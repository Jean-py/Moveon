!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.StartAudioContext=t()}(this,function(){var e=function(e,t){this._dragged=!1,this._element=e,this._bindedMove=this._moved.bind(this),this._bindedEnd=this._ended.bind(this,t),e.addEventListener("touchstart",this._bindedEnd),e.addEventListener("touchmove",this._bindedMove),e.addEventListener("touchend",this._bindedEnd),e.addEventListener("mouseup",this._bindedEnd)};function t(e){return"running"===e.state}return e.prototype._moved=function(e){this._dragged=!0},e.prototype._ended=function(e){var t,n,i;this._dragged||(n=(t=e).createBuffer(1,1,t.sampleRate),(i=t.createBufferSource()).buffer=n,i.connect(t.destination),i.start(0),t.resume&&t.resume()),this._dragged=!1},e.prototype.dispose=function(){this._element.removeEventListener("touchstart",this._bindedEnd),this._element.removeEventListener("touchmove",this._bindedMove),this._element.removeEventListener("touchend",this._bindedEnd),this._element.removeEventListener("mouseup",this._bindedEnd),this._bindedMove=null,this._bindedEnd=null,this._element=null},function(n,i,d){var o=new Promise(function(e){var i,d;d=e,t(i=n)?d():function e(){t(i)?d():(requestAnimationFrame(e),i.resume&&i.resume())}()}),r=[];return i||(i=document.body),function t(n,i,d){if(Array.isArray(n)||NodeList&&n instanceof NodeList)for(var o=0;o<n.length;o++)t(n[o],i,d);else if("string"==typeof n)t(document.querySelectorAll(n),i,d);else if(n.jquery&&"function"==typeof n.toArray)t(n.toArray(),i,d);else if(Element&&n instanceof Element){var r=new e(n,d);i.push(r)}}(i,r,n),o.then(function(){for(var e=0;e<r.length;e++)r[e].dispose();r=null,d&&d()}),o}});