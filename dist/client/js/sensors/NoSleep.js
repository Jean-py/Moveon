"use strict";

/**
 * NoSleep.js v0.5.0 - git.io/vfn01
 * Rich Tibbett
 * MIT license
 **/
(function (root) {
  // UA matching
  var ua = {
    Android: /Android/ig.test(navigator.userAgent),
    iOS: /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent)
  };

  var media = {
    WebM: "data:video/webm;base64,GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=",
    MP4: "data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw=="
  };

  function addSourceToVideo(element, type, dataURI) {
    var source = document.createElement('source');
    source.src = dataURI;
    source.type = "video/" + type;
    element.appendChild(source);
  }

  // NoSleep instance constructor
  var NoSleep = function NoSleep() {
    if (ua.iOS) {
      this.noSleepTimer = null;
    } else if (ua.Android) {
      // Set up no sleep video element
      this.noSleepVideo = document.createElement('video');
      this.noSleepVideo.setAttribute("loop", "");

      // Append nosleep video sources
      addSourceToVideo(this.noSleepVideo, "webm", media.WebM);
      addSourceToVideo(this.noSleepVideo, "mp4", media.MP4);
    }

    return this;
  };

  // Enable NoSleep instance
  NoSleep.prototype.enable = function (duration) {
    if (ua.iOS) {
      this.disable();
      this.noSleepTimer = window.setInterval(function () {
        window.location.href = '/';
        window.setTimeout(window.stop, 0);
      }, duration || 15000);
    } else if (ua.Android) {
      this.noSleepVideo.play();
    }
  };

  // Disable NoSleep instance
  NoSleep.prototype.disable = function () {
    if (ua.iOS) {
      if (this.noSleepTimer) {
        window.clearInterval(this.noSleepTimer);
        this.noSleepTimer = null;
      }
    } else if (ua.Android) {
      this.noSleepVideo.pause();
    }
  };

  // Append NoSleep API to root object
  root.NoSleep = NoSleep;
})(undefined);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk5vU2xlZXAuanMiXSwibmFtZXMiOlsicm9vdCIsInVhIiwiQW5kcm9pZCIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJpT1MiLCJtZWRpYSIsIldlYk0iLCJNUDQiLCJhZGRTb3VyY2VUb1ZpZGVvIiwiZWxlbWVudCIsInR5cGUiLCJkYXRhVVJJIiwic291cmNlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3JjIiwiYXBwZW5kQ2hpbGQiLCJOb1NsZWVwIiwibm9TbGVlcFRpbWVyIiwibm9TbGVlcFZpZGVvIiwic2V0QXR0cmlidXRlIiwicHJvdG90eXBlIiwiZW5hYmxlIiwiZHVyYXRpb24iLCJkaXNhYmxlIiwid2luZG93Iiwic2V0SW50ZXJ2YWwiLCJsb2NhdGlvbiIsImhyZWYiLCJzZXRUaW1lb3V0Iiwic3RvcCIsInBsYXkiLCJjbGVhckludGVydmFsIiwicGF1c2UiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7O0FBS0EsQ0FBQyxVQUFTQSxJQUFULEVBQWU7QUFDZDtBQUNBLE1BQUlDLEtBQUs7QUFDUEMsYUFBUyxZQUFZQyxJQUFaLENBQWlCQyxVQUFVQyxTQUEzQixDQURGO0FBRVBDLFNBQUssY0FBY0gsSUFBZCxDQUFtQkMsVUFBVUMsU0FBN0IsS0FBMkMsY0FBY0YsSUFBZCxDQUFtQkMsVUFBVUMsU0FBN0I7QUFGekMsR0FBVDs7QUFLQSxNQUFJRSxRQUFRO0FBQ1ZDLFVBQU0saVJBREk7QUFFVkMsU0FBSztBQUZLLEdBQVo7O0FBS0EsV0FBU0MsZ0JBQVQsQ0FBMEJDLE9BQTFCLEVBQW1DQyxJQUFuQyxFQUF5Q0MsT0FBekMsRUFBa0Q7QUFDaEQsUUFBSUMsU0FBU0MsU0FBU0MsYUFBVCxDQUF1QixRQUF2QixDQUFiO0FBQ0FGLFdBQU9HLEdBQVAsR0FBYUosT0FBYjtBQUNBQyxXQUFPRixJQUFQLEdBQWMsV0FBV0EsSUFBekI7QUFDQUQsWUFBUU8sV0FBUixDQUFvQkosTUFBcEI7QUFDRDs7QUFFRDtBQUNBLE1BQUlLLFVBQVUsU0FBVkEsT0FBVSxHQUFXO0FBQ3ZCLFFBQUlsQixHQUFHSyxHQUFQLEVBQVk7QUFDVixXQUFLYyxZQUFMLEdBQW9CLElBQXBCO0FBQ0QsS0FGRCxNQUVPLElBQUluQixHQUFHQyxPQUFQLEVBQWdCO0FBQ3JCO0FBQ0EsV0FBS21CLFlBQUwsR0FBb0JOLFNBQVNDLGFBQVQsQ0FBdUIsT0FBdkIsQ0FBcEI7QUFDQSxXQUFLSyxZQUFMLENBQWtCQyxZQUFsQixDQUErQixNQUEvQixFQUF1QyxFQUF2Qzs7QUFFQTtBQUNBWix1QkFBaUIsS0FBS1csWUFBdEIsRUFBb0MsTUFBcEMsRUFBNENkLE1BQU1DLElBQWxEO0FBQ0FFLHVCQUFpQixLQUFLVyxZQUF0QixFQUFvQyxLQUFwQyxFQUEyQ2QsTUFBTUUsR0FBakQ7QUFDRDs7QUFFRCxXQUFPLElBQVA7QUFDRCxHQWREOztBQWdCQTtBQUNBVSxVQUFRSSxTQUFSLENBQWtCQyxNQUFsQixHQUEyQixVQUFTQyxRQUFULEVBQW1CO0FBQzVDLFFBQUl4QixHQUFHSyxHQUFQLEVBQVk7QUFDVixXQUFLb0IsT0FBTDtBQUNBLFdBQUtOLFlBQUwsR0FBb0JPLE9BQU9DLFdBQVAsQ0FBbUIsWUFBVztBQUNoREQsZUFBT0UsUUFBUCxDQUFnQkMsSUFBaEIsR0FBdUIsR0FBdkI7QUFDQUgsZUFBT0ksVUFBUCxDQUFrQkosT0FBT0ssSUFBekIsRUFBK0IsQ0FBL0I7QUFDRCxPQUhtQixFQUdqQlAsWUFBWSxLQUhLLENBQXBCO0FBSUQsS0FORCxNQU1PLElBQUl4QixHQUFHQyxPQUFQLEVBQWdCO0FBQ3JCLFdBQUttQixZQUFMLENBQWtCWSxJQUFsQjtBQUNEO0FBQ0YsR0FWRDs7QUFZQTtBQUNBZCxVQUFRSSxTQUFSLENBQWtCRyxPQUFsQixHQUE0QixZQUFXO0FBQ3JDLFFBQUl6QixHQUFHSyxHQUFQLEVBQVk7QUFDVixVQUFJLEtBQUtjLFlBQVQsRUFBdUI7QUFDckJPLGVBQU9PLGFBQVAsQ0FBcUIsS0FBS2QsWUFBMUI7QUFDQSxhQUFLQSxZQUFMLEdBQW9CLElBQXBCO0FBQ0Q7QUFDRixLQUxELE1BS08sSUFBSW5CLEdBQUdDLE9BQVAsRUFBZ0I7QUFDckIsV0FBS21CLFlBQUwsQ0FBa0JjLEtBQWxCO0FBQ0Q7QUFDRixHQVREOztBQVdBO0FBQ0FuQyxPQUFLbUIsT0FBTCxHQUFlQSxPQUFmO0FBQ0QsQ0EvREQiLCJmaWxlIjoiTm9TbGVlcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTm9TbGVlcC5qcyB2MC41LjAgLSBnaXQuaW8vdmZuMDFcbiAqIFJpY2ggVGliYmV0dFxuICogTUlUIGxpY2Vuc2VcbiAqKi9cbihmdW5jdGlvbihyb290KSB7XG4gIC8vIFVBIG1hdGNoaW5nXG4gIHZhciB1YSA9IHtcbiAgICBBbmRyb2lkOiAvQW5kcm9pZC9pZy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLFxuICAgIGlPUzogL0FwcGxlV2ViS2l0Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmIC9Nb2JpbGVcXC9cXHcrLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG4gIH07XG5cbiAgdmFyIG1lZGlhID0ge1xuICAgIFdlYk06IFwiZGF0YTp2aWRlby93ZWJtO2Jhc2U2NCxHa1hmbzBBZ1FvYUJBVUwzZ1FGQzhvRUVRdk9CQ0VLQ1FBUjNaV0p0UW9lQkFrS0ZnUUlZVTRCblFJMFZTYWxtUUNncTE3RkFBdzlDUUUyQVFBWjNhR0Z0YlhsWFFVQUdkMmhoYlcxNVJJbEFDRUNQUUFBQUFBQUFGbFN1YTBBeHJrQXUxNEVCWThXQkFaeUJBQ0sxbkVBRGRXNWtoa0FGVmw5V1VEZ2xob2hBQTFaUU9JT0JBZUJBQnJDQkNMcUJDQjlEdG5WQUl1ZUJBS05BSElFQUFJQXdBUUNkQVNvSUFBZ0FBVUFtSmFRQUEzQUEvdnowQUFBPVwiLFxuICAgIE1QNDogXCJkYXRhOnZpZGVvL21wNDtiYXNlNjQsQUFBQUhHWjBlWEJwYzI5dEFBQUNBR2x6YjIxcGMyOHliWEEwTVFBQUFBaG1jbVZsQUFBQUcyMWtZWFFBQUFHekFCQUhBQUFCdGhBREFvd2RiYjkvQUFBQzZXMXZiM1lBQUFCc2JYWm9aQUFBQUFCOEpiQ0FmQ1d3Z0FBQUErZ0FBQUFBQUFFQUFBRUFBQUFBQUFBQUFBQUFBQUFCQUFBQUFBQUFBQUFBQUFBQUFBQUFBUUFBQUFBQUFBQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUlBQUFJVmRISmhhd0FBQUZ4MGEyaGtBQUFBRDN3bHNJQjhKYkNBQUFBQUFRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQkFBQUFBQUFBQUFBQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFRQUFBQUFBSUFBQUFDQUFBQUFBQnNXMWthV0VBQUFBZ2JXUm9aQUFBQUFCOEpiQ0FmQ1d3Z0FBQUErZ0FBQUFBVmNRQUFBQUFBQzFvWkd4eUFBQUFBQUFBQUFCMmFXUmxBQUFBQUFBQUFBQUFBQUFBVm1sa1pXOUlZVzVrYkdWeUFBQUFBVnh0YVc1bUFBQUFGSFp0YUdRQUFBQUJBQUFBQUFBQUFBQUFBQUFrWkdsdVpnQUFBQnhrY21WbUFBQUFBQUFBQUFFQUFBQU1kWEpzSUFBQUFBRUFBQUVjYzNSaWJBQUFBTGh6ZEhOa0FBQUFBQUFBQUFFQUFBQ29iWEEwZGdBQUFBQUFBQUFCQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFJQUFnQVNBQUFBRWdBQUFBQUFBQUFBUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCai8vd0FBQUZKbGMyUnpBQUFBQUFORUFBRUFCRHdnRVFBQUFBQUREVUFBQUFBQUJTMEFBQUd3QVFBQUFiV0pFd0FBQVFBQUFBRWdBTVNOaUI5RkFFUUJGR01BQUFHeVRHRjJZelV5TGpnM0xqUUdBUUlBQUFBWWMzUjBjd0FBQUFBQUFBQUJBQUFBQVFBQUFBQUFBQUFjYzNSell3QUFBQUFBQUFBQkFBQUFBUUFBQUFFQUFBQUJBQUFBRkhOMGMzb0FBQUFBQUFBQUV3QUFBQUVBQUFBVWMzUmpid0FBQUFBQUFBQUJBQUFBTEFBQUFHQjFaSFJoQUFBQVdHMWxkR0VBQUFBQUFBQUFJV2hrYkhJQUFBQUFBQUFBQUcxa2FYSmhjSEJzQUFBQUFBQUFBQUFBQUFBQUsybHNjM1FBQUFBanFYUnZid0FBQUJ0a1lYUmhBQUFBQVFBQUFBQk1ZWFptTlRJdU56Z3VNdz09XCJcbiAgfTtcblxuICBmdW5jdGlvbiBhZGRTb3VyY2VUb1ZpZGVvKGVsZW1lbnQsIHR5cGUsIGRhdGFVUkkpIHtcbiAgICB2YXIgc291cmNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJyk7XG4gICAgc291cmNlLnNyYyA9IGRhdGFVUkk7XG4gICAgc291cmNlLnR5cGUgPSBcInZpZGVvL1wiICsgdHlwZTtcbiAgICBlbGVtZW50LmFwcGVuZENoaWxkKHNvdXJjZSk7XG4gIH1cblxuICAvLyBOb1NsZWVwIGluc3RhbmNlIGNvbnN0cnVjdG9yXG4gIHZhciBOb1NsZWVwID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHVhLmlPUykge1xuICAgICAgdGhpcy5ub1NsZWVwVGltZXIgPSBudWxsO1xuICAgIH0gZWxzZSBpZiAodWEuQW5kcm9pZCkge1xuICAgICAgLy8gU2V0IHVwIG5vIHNsZWVwIHZpZGVvIGVsZW1lbnRcbiAgICAgIHRoaXMubm9TbGVlcFZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgIHRoaXMubm9TbGVlcFZpZGVvLnNldEF0dHJpYnV0ZShcImxvb3BcIiwgXCJcIik7XG5cbiAgICAgIC8vIEFwcGVuZCBub3NsZWVwIHZpZGVvIHNvdXJjZXNcbiAgICAgIGFkZFNvdXJjZVRvVmlkZW8odGhpcy5ub1NsZWVwVmlkZW8sIFwid2VibVwiLCBtZWRpYS5XZWJNKTtcbiAgICAgIGFkZFNvdXJjZVRvVmlkZW8odGhpcy5ub1NsZWVwVmlkZW8sIFwibXA0XCIsIG1lZGlhLk1QNCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gRW5hYmxlIE5vU2xlZXAgaW5zdGFuY2VcbiAgTm9TbGVlcC5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24oZHVyYXRpb24pIHtcbiAgICBpZiAodWEuaU9TKSB7XG4gICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICAgIHRoaXMubm9TbGVlcFRpbWVyID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvJztcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQod2luZG93LnN0b3AsIDApO1xuICAgICAgfSwgZHVyYXRpb24gfHwgMTUwMDApO1xuICAgIH0gZWxzZSBpZiAodWEuQW5kcm9pZCkge1xuICAgICAgdGhpcy5ub1NsZWVwVmlkZW8ucGxheSgpO1xuICAgIH1cbiAgfTtcblxuICAvLyBEaXNhYmxlIE5vU2xlZXAgaW5zdGFuY2VcbiAgTm9TbGVlcC5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh1YS5pT1MpIHtcbiAgICAgIGlmICh0aGlzLm5vU2xlZXBUaW1lcikge1xuICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLm5vU2xlZXBUaW1lcik7XG4gICAgICAgIHRoaXMubm9TbGVlcFRpbWVyID0gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHVhLkFuZHJvaWQpIHtcbiAgICAgIHRoaXMubm9TbGVlcFZpZGVvLnBhdXNlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEFwcGVuZCBOb1NsZWVwIEFQSSB0byByb290IG9iamVjdFxuICByb290Lk5vU2xlZXAgPSBOb1NsZWVwO1xufSkodGhpcyk7XG4iXX0=