"use strict";

var menu = document.getElementById("containerMenu");
var bar1 = document.getElementById("bar1id");
var bar2 = document.getElementById("bar2id");
var bar3 = document.getElementById("bar3id");
var menuOption = document.getElementById("menuOptionId");
var sidebarMenu = document.getElementById("sidebarMenu");
var noteMessage = document.getElementById("noteMessage");
var idSession = document.getElementById("idSession");
var btnLoadFile = document.getElementById("btnLoadFile");
var inputFile = document.getElementById('logFileLoad');
var btnCleanAll = document.getElementById('btnCleanAll');
var btnLoadYtVideo = document.getElementById('loadYtVideo');
var btnSaveSegments = document.getElementById('btnSaveSegments');

//var dataAnalyst = DataAnalyst;

var btnloadSH1 = document.getElementById('loadSHvideo1');
var btnloadSH2 = document.getElementById('loadSHvideo2');
var btnloadSHTuto = document.getElementById('loadSHvideoTutorial');
var btnloadVideo1 = document.getElementById('loadvideo1');
var btnloadVideo2 = document.getElementById('loadvideo2');
var btnAnalyzeData = document.getElementById('analyzeData');

var menuExtended = 0;

//menuOption.innerHTML = "Username : " + logger.getSocket_name_session();

idSession.value = logger.getSocket_name_session();

inputFile.addEventListener('change', updateImageDisplay);

btnLoadFile.addEventListener("mousedown", function (e) {
  //emulating a click on a file picking
  inputFile.click();
}, {
  passive: true
});

function updateImageDisplay() {
  var curFiles = inputFile.files;
  console.log(curFiles);
  cardManager.execute(new LoadLogCommand(curFiles));
  var notification_feedback = "File imported !";
  notificationFeedback(notification_feedback);
}

menu.addEventListener("mousedown", handleMenu, {
  passive: true
});

btnLoadYtVideo.addEventListener("mousedown", callbackLoadYtVideo);

btnCleanAll.addEventListener("mousedown", callbackCleanSegmentHistory);

btnSaveSegments.addEventListener("mousedown", callbackSaveFile);

btnloadSH1.addEventListener("mousedown", loadSH1);
btnloadSH2.addEventListener("mousedown", loadSH2);
btnloadSHTuto.addEventListener("mousedown", loadSHTuto);
btnloadVideo1.addEventListener("mousedown", loadVideo1);
btnloadVideo2.addEventListener("mousedown", loadVideo2);
btnAnalyzeData.addEventListener("mousedown", analyzeData);

idSession.addEventListener("blur", setSessionName, { passive: true });
function setSessionName() {
  logger.changeUsernameSocket(idSession.value);
  var notification_feedback = "Sucess! Log file is : " + idSession.value;
  notificationFeedback(notification_feedback);
}

function callbackCleanSegmentHistory() {
  if (confirm(" /!\\ Voulez-vous vraiment supprimer tous les segments?")) {
    // Code à éxécuter si le l'utilisateur clique sur "OK"
    var notification_feedback = "Clean all success";
    notificationFeedback(notification_feedback);
    cardManager.execute(new CleanSegmentHistoryCommand());
    // Code à éxécuter si l'utilisateur clique sur "Annuler"
  } else {
    var notification_feedback = "Not confirmed!";
    notificationFeedback(notification_feedback);
  }
}

function callbackSaveFile() {
  console.log("saving log");
  /*arrayCard.forEach(function (arrayItem) {
    // arrayItem.updateInfo();
    //arrayItem.
  });*/
  cardManager.exportCard();
  var notification_feedback = "File saved : " + idSession.value;
  notificationFeedback(notification_feedback);
}

function callbackLoadYtVideo() {}

function handleMenu() {
  menu.classList.toggle("change");
  //sidebarMenu.classList.toggle("appearMenuSidebar");
  if (menuExtended) {
    menuExtended = 0;
    sidebarMenu.style.visibility = 'hidden'; // Show
  } else {
    sidebarMenu.style.visibility = 'visible'; // Hide
    menuExtended = 1;
  }
}

function notificationFeedback(notification_message) {
  window.location = "#oNote4";
  noteMessage.innerHTML = notification_message;
  setTimeout(function () {
    window.location = "#oNote";
  }, 2500);
}

// Get the modal
var modal = document.getElementById('myModal');

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal
btnLoadYtVideo.onclick = function () {
  modal.style.display = "block";
};

// When the user clicks on <span> (x), close the modal
span.onclick = function () {
  modal.style.display = "none";
};

// When the user clicks anywhere outside of the modal, close it
window.onclick = function (event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
};

function loadSH1() {
  loadJSONSegmentHistory1();
}

function loadSH2() {
  loadJSONSegmentHistory2();
}
function loadSHTuto() {
  loadJSONSegmentHistoryTutorial();
}

function loadVideo1() {
  Player.setSource("./public/media/workshop2/videoW1.mp4");
}
function loadVideo2() {
  Player.setSource("./public/media/workshop2/videoW1-2.mp4");
}

function analyzeData() {
  dataAnalyst.analyseData1();
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lbnUuanMiXSwibmFtZXMiOlsibWVudSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJiYXIxIiwiYmFyMiIsImJhcjMiLCJtZW51T3B0aW9uIiwic2lkZWJhck1lbnUiLCJub3RlTWVzc2FnZSIsImlkU2Vzc2lvbiIsImJ0bkxvYWRGaWxlIiwiaW5wdXRGaWxlIiwiYnRuQ2xlYW5BbGwiLCJidG5Mb2FkWXRWaWRlbyIsImJ0blNhdmVTZWdtZW50cyIsImJ0bmxvYWRTSDEiLCJidG5sb2FkU0gyIiwiYnRubG9hZFNIVHV0byIsImJ0bmxvYWRWaWRlbzEiLCJidG5sb2FkVmlkZW8yIiwiYnRuQW5hbHl6ZURhdGEiLCJtZW51RXh0ZW5kZWQiLCJ2YWx1ZSIsImxvZ2dlciIsImdldFNvY2tldF9uYW1lX3Nlc3Npb24iLCJhZGRFdmVudExpc3RlbmVyIiwidXBkYXRlSW1hZ2VEaXNwbGF5IiwiZSIsImNsaWNrIiwicGFzc2l2ZSIsImN1ckZpbGVzIiwiZmlsZXMiLCJjb25zb2xlIiwibG9nIiwiY2FyZE1hbmFnZXIiLCJleGVjdXRlIiwiTG9hZExvZ0NvbW1hbmQiLCJub3RpZmljYXRpb25fZmVlZGJhY2siLCJub3RpZmljYXRpb25GZWVkYmFjayIsImhhbmRsZU1lbnUiLCJjYWxsYmFja0xvYWRZdFZpZGVvIiwiY2FsbGJhY2tDbGVhblNlZ21lbnRIaXN0b3J5IiwiY2FsbGJhY2tTYXZlRmlsZSIsImxvYWRTSDEiLCJsb2FkU0gyIiwibG9hZFNIVHV0byIsImxvYWRWaWRlbzEiLCJsb2FkVmlkZW8yIiwiYW5hbHl6ZURhdGEiLCJzZXRTZXNzaW9uTmFtZSIsImNoYW5nZVVzZXJuYW1lU29ja2V0IiwiY29uZmlybSIsIkNsZWFuU2VnbWVudEhpc3RvcnlDb21tYW5kIiwiZXhwb3J0Q2FyZCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInN0eWxlIiwidmlzaWJpbGl0eSIsIm5vdGlmaWNhdGlvbl9tZXNzYWdlIiwid2luZG93IiwibG9jYXRpb24iLCJpbm5lckhUTUwiLCJzZXRUaW1lb3V0IiwibW9kYWwiLCJzcGFuIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIm9uY2xpY2siLCJkaXNwbGF5IiwiZXZlbnQiLCJ0YXJnZXQiLCJsb2FkSlNPTlNlZ21lbnRIaXN0b3J5MSIsImxvYWRKU09OU2VnbWVudEhpc3RvcnkyIiwibG9hZEpTT05TZWdtZW50SGlzdG9yeVR1dG9yaWFsIiwiUGxheWVyIiwic2V0U291cmNlIiwiZGF0YUFuYWx5c3QiLCJhbmFseXNlRGF0YTEiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSUEsT0FBT0MsU0FBU0MsY0FBVCxDQUF3QixlQUF4QixDQUFYO0FBQ0EsSUFBSUMsT0FBT0YsU0FBU0MsY0FBVCxDQUF3QixRQUF4QixDQUFYO0FBQ0EsSUFBSUUsT0FBT0gsU0FBU0MsY0FBVCxDQUF3QixRQUF4QixDQUFYO0FBQ0EsSUFBSUcsT0FBT0osU0FBU0MsY0FBVCxDQUF3QixRQUF4QixDQUFYO0FBQ0EsSUFBSUksYUFBYUwsU0FBU0MsY0FBVCxDQUF3QixjQUF4QixDQUFqQjtBQUNBLElBQUlLLGNBQWNOLFNBQVNDLGNBQVQsQ0FBd0IsYUFBeEIsQ0FBbEI7QUFDQSxJQUFJTSxjQUFjUCxTQUFTQyxjQUFULENBQXdCLGFBQXhCLENBQWxCO0FBQ0EsSUFBSU8sWUFBWVIsU0FBU0MsY0FBVCxDQUF3QixXQUF4QixDQUFoQjtBQUNBLElBQUlRLGNBQWNULFNBQVNDLGNBQVQsQ0FBd0IsYUFBeEIsQ0FBbEI7QUFDQSxJQUFJUyxZQUFZVixTQUFTQyxjQUFULENBQXdCLGFBQXhCLENBQWhCO0FBQ0EsSUFBSVUsY0FBY1gsU0FBU0MsY0FBVCxDQUF3QixhQUF4QixDQUFsQjtBQUNBLElBQUlXLGlCQUFpQlosU0FBU0MsY0FBVCxDQUF3QixhQUF4QixDQUFyQjtBQUNBLElBQUlZLGtCQUFrQmIsU0FBU0MsY0FBVCxDQUF3QixpQkFBeEIsQ0FBdEI7O0FBRUE7O0FBRUEsSUFBSWEsYUFBYWQsU0FBU0MsY0FBVCxDQUF3QixjQUF4QixDQUFqQjtB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QUFrQjtBQUNoQjJCO0FBRUQ7QUFDRCxTQUFTMUIsVUFBVCxHQUFxQjtBQUNuQjJCO0FBQ0Q7O0FBR0QsU0FBUzFCLFVBQVQsR0FBcUI7QUFDbkIyQixTQUFPQyxTQUFQLENBQWlCLHNDQUFqQjtBQUNEO0FBQ0QsU0FBUzNCLFVBQVQsR0FBcUI7QUFDbkIwQixTQUFPQyxTQUFQLENBQWlCLHdDQUFqQjtBQUE0RDs7QUFFOUQsU0FBUzFCLFdBQVQsR0FBc0I7QUFDcEIyQixjQUFZQyxZQUFaO0FBQ0QiLCJmaWxlIjoibWVudS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBtZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250YWluZXJNZW51XCIpO1xudmFyIGJhcjEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhcjFpZFwiKTtcbnZhciBiYXIyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYXIyaWRcIik7XG52YXIgYmFyMyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFyM2lkXCIpO1xudmFyIG1lbnVPcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lbnVPcHRpb25JZFwiKTtcbnZhciBzaWRlYmFyTWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2lkZWJhck1lbnVcIik7XG52YXIgbm90ZU1lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5vdGVNZXNzYWdlXCIpO1xudmFyIGlkU2Vzc2lvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaWRTZXNzaW9uXCIpO1xudmFyIGJ0bkxvYWRGaWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG5Mb2FkRmlsZVwiKTtcbnZhciBpbnB1dEZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nRmlsZUxvYWQnKTtcbnZhciBidG5DbGVhbkFsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5DbGVhbkFsbCcpO1xudmFyIGJ0bkxvYWRZdFZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRZdFZpZGVvJyk7XG52YXIgYnRuU2F2ZVNlZ21lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0blNhdmVTZWdtZW50cycpO1xuXG4vL3ZhciBkYXRhQW5hbHlzdCA9IERhdGFBbmFseXN0O1xuXG52YXIgYnRubG9hZFNIMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkU0h2aWRlbzEnKTtcbnZhciBidG5sb2FkU0gyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRTSHZpZGVvMicpO1xudmFyIGJ0bmxvYWRTSFR1dG8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZFNIdmlkZW9UdXRvcmlhbCcpO1xudmFyIGJ0bmxvYWRWaWRlbzEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZHZpZGVvMScpO1xudmFyIGJ0bmxvYWRWaWRlbzIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZHZpZGVvMicpO1xudmFyIGJ0bkFuYWx5emVEYXRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FuYWx5emVEYXRhJyk7XG5cblxuXG52YXIgbWVudUV4dGVuZGVkID0gMDtcblxuLy9tZW51T3B0aW9uLmlubmVySFRNTCA9IFwiVXNlcm5hbWUgOiBcIiArIGxvZ2dlci5nZXRTb2NrZXRfbmFtZV9zZXNzaW9uKCk7XG5cbmlkU2Vzc2lvbi52YWx1ZSA9IGxvZ2dlci5nZXRTb2NrZXRfbmFtZV9zZXNzaW9uKCk7XG5cbmlucHV0RmlsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB1cGRhdGVJbWFnZURpc3BsYXkpO1xuXG5idG5Mb2FkRmlsZS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgLy9lbXVsYXRpbmcgYSBjbGljayBvbiBhIGZpbGUgcGlja2luZ1xuICAgIGlucHV0RmlsZS5jbGljaygpO1xuICB9LCB7XG4gIHBhc3NpdmU6IHRydWVcbn0pO1xuXG5cblxuZnVuY3Rpb24gdXBkYXRlSW1hZ2VEaXNwbGF5KCkge1xuICB2YXIgY3VyRmlsZXMgPSBpbnB1dEZpbGUuZmlsZXM7XG4gIGNvbnNvbGUubG9nKGN1ckZpbGVzKTtcbiAgY2FyZE1hbmFnZXIuZXhlY3V0ZShuZXcgTG9hZExvZ0NvbW1hbmQoY3VyRmlsZXMpKTtcbiAgdmFyIG5vdGlmaWNhdGlvbl9mZWVkYmFjayA9IFwiRmlsZSBpbXBvcnRlZCAhXCI7XG4gIG5vdGlmaWNhdGlvbkZlZWRiYWNrKG5vdGlmaWNhdGlvbl9mZWVkYmFjaylcbn1cblxuXG5tZW51LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlTWVudSwge1xuICBwYXNzaXZlOiB0cnVlXG59KTtcblxuYnRuTG9hZFl0VmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjYWxsYmFja0xvYWRZdFZpZGVvKTtcblxuYnRuQ2xlYW5BbGwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjYWxsYmFja0NsZWFuU2VnbWVudEhpc3RvcnkpO1xuXG5idG5TYXZlU2VnbWVudHMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjYWxsYmFja1NhdmVGaWxlKTtcblxuYnRubG9hZFNIMS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGxvYWRTSDEgKTtcbmJ0bmxvYWRTSDIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBsb2FkU0gyKTtcbmJ0bmxvYWRTSFR1dG8uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBsb2FkU0hUdXRvKTtcbmJ0bmxvYWRWaWRlbzEuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBsb2FkVmlkZW8xKTtcbmJ0bmxvYWRWaWRlbzIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBsb2FkVmlkZW8yKTtcbmJ0bkFuYWx5emVEYXRhLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgYW5hbHl6ZURhdGEpO1xuXG5cblxuaWRTZXNzaW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsc2V0U2Vzc2lvbk5hbWUsIHtwYXNzaXZlOiB0cnVlfSk7XG5mdW5jdGlvbiBzZXRTZXNzaW9uTmFtZSgpe1xuICAgbG9nZ2VyLmNoYW5nZVVzZXJuYW1lU29ja2V0KCBpZFNlc3Npb24udmFsdWUgKTtcbiAgIHZhciBub3RpZmljYXRpb25fZmVlZGJhY2sgPSBcIlN1Y2VzcyEgTG9nIGZpbGUgaXMgOiBcIiArIGlkU2Vzc2lvbi52YWx1ZTtcbiAgICBub3RpZmljYXRpb25GZWVkYmFjayhub3RpZmljYXRpb25fZmVlZGJhY2spO1xufVxuXG5mdW5jdGlvbiBjYWxsYmFja0NsZWFuU2VnbWVudEhpc3RvcnkoKXtcbiAgaWYgKCBjb25maXJtKCBcIiAvIVxcXFwgVm91bGV6LXZvdXMgdnJhaW1lbnQgc3VwcHJpbWVyIHRvdXMgbGVzIHNlZ21lbnRzP1wiICkgKSB7XG4gICAgLy8gQ29kZSDDoCDDqXjDqWN1dGVyIHNpIGxlIGwndXRpbGlzYXRldXIgY2xpcXVlIHN1ciBcIk9LXCJcbiAgICB2YXIgbm90aWZpY2F0aW9uX2ZlZWRiYWNrID0gXCJDbGVhbiBhbGwgc3VjY2Vzc1wiO1xuICAgIG5vdGlmaWNhdGlvbkZlZWRiYWNrKG5vdGlmaWNhdGlvbl9mZWVkYmFjayk7XG4gICAgY2FyZE1hbmFnZXIuZXhlY3V0ZShuZXcgQ2xlYW5TZWdtZW50SGlzdG9yeUNvbW1hbmQoKSk7XG4gICAgLy8gQ29kZSDDoCDDqXjDqWN1dGVyIHNpIGwndXRpbGlzYXRldXIgY2xpcXVlIHN1ciBcIkFubnVsZXJcIlxuICB9IGVsc2Uge1xuICAgIHZhciBub3RpZmljYXRpb25fZmVlZGJhY2sgPSBcIk5vdCBjb25maXJtZWQhXCI7XG4gICAgbm90aWZpY2F0aW9uRmVlZGJhY2sobm90aWZpY2F0aW9uX2ZlZWRiYWNrKTtcbiAgfVxuICBcbiAgXG59XG5cbmZ1bmN0aW9uIGNhbGxiYWNrU2F2ZUZpbGUoKXtcbiAgY29uc29sZS5sb2coXCJzYXZpbmcgbG9nXCIpO1xuICAvKmFycmF5Q2FyZC5mb3JFYWNoKGZ1bmN0aW9uIChhcnJheUl0ZW0pIHtcbiAgICAvLyBhcnJheUl0ZW0udXBkYXRlSW5mbygpO1xuICAgIC8vYXJyYXlJdGVtLlxuICB9KTsqL1xuICBjYXJkTWFuYWdlci5leHBvcnRDYXJkKCk7XG4gIHZhciBub3RpZmljYXRpb25fZmVlZGJhY2sgPSBcIkZpbGUgc2F2ZWQgOiBcIiArIGlkU2Vzc2lvbi52YWx1ZTtcbiAgbm90aWZpY2F0aW9uRmVlZGJhY2sobm90aWZpY2F0aW9uX2ZlZWRiYWNrKTtcbn1cblxuZnVuY3Rpb24gY2FsbGJhY2tMb2FkWXRWaWRlbygpe1xuXG59XG5cbmZ1bmN0aW9uIGhhbmRsZU1lbnUoKXtcbiAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKFwiY2hhbmdlXCIpO1xuICAvL3NpZGViYXJNZW51LmNsYXNzTGlzdC50b2dnbGUoXCJhcHBlYXJNZW51U2lkZWJhclwiKTtcbiAgaWYobWVudUV4dGVuZGVkKXtcbiAgICBtZW51RXh0ZW5kZWQgPSAwO1xuICAgIHNpZGViYXJNZW51LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsgICAgIC8vIFNob3dcbiAgfSBlbHNlIHtcbiAgICBzaWRlYmFyTWVudS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnOyAgICAgIC8vIEhpZGVcbiAgICBtZW51RXh0ZW5kZWQgPSAxO1xuICB9XG59XG5cbmZ1bmN0aW9uIG5vdGlmaWNhdGlvbkZlZWRiYWNrKG5vdGlmaWNhdGlvbl9tZXNzYWdlKXtcbiAgd2luZG93LmxvY2F0aW9uID0gXCIjb05vdGU0XCI7XG4gIG5vdGVNZXNzYWdlLmlubmVySFRNTCA9IG5vdGlmaWNhdGlvbl9tZXNzYWdlO1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge3dpbmRvdy5sb2NhdGlvbiA9IFwiI29Ob3RlXCI7fSwgMjUwMCk7XG59XG5cbi8vIEdldCB0aGUgbW9kYWxcbnZhciBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteU1vZGFsJyk7XG5cbi8vIEdldCB0aGUgPHNwYW4+IGVsZW1lbnQgdGhhdCBjbG9zZXMgdGhlIG1vZGFsXG52YXIgc3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjbG9zZVwiKVswXTtcblxuLy8gV2hlbiB0aGUgdXNlciBjbGlja3MgdGhlIGJ1dHRvbiwgb3BlbiB0aGUgbW9kYWxcbmJ0bkxvYWRZdFZpZGVvLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbn07XG5cbi8vIFdoZW4gdGhlIHVzZXIgY2xpY2tzIG9uIDxzcGFuPiAoeCksIGNsb3NlIHRoZSBtb2RhbFxuc3Bhbi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbn07XG5cbi8vIFdoZW4gdGhlIHVzZXIgY2xpY2tzIGFueXdoZXJlIG91dHNpZGUgb2YgdGhlIG1vZGFsLCBjbG9zZSBpdFxud2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkge1xuICBpZiAoZXZlbnQudGFyZ2V0ID09IG1vZGFsKSB7XG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB9XG59O1xuXG5cblxuZnVuY3Rpb24gbG9hZFNIMSgpe1xuICBsb2FkSlNPTlNlZ21lbnRIaXN0b3J5MSgpIDtcbn1cblxuZnVuY3Rpb24gbG9hZFNIMigpe1xuICBsb2FkSlNPTlNlZ21lbnRIaXN0b3J5MigpO1xuXG59XG5mdW5jdGlvbiBsb2FkU0hUdXRvKCl7XG4gIGxvYWRKU09OU2VnbWVudEhpc3RvcnlUdXRvcmlhbCgpO1xufVxuXG5cbmZ1bmN0aW9uIGxvYWRWaWRlbzEoKXtcbiAgUGxheWVyLnNldFNvdXJjZShcIi4vcHVibGljL21lZGlhL3dvcmtzaG9wMi92aWRlb1cxLm1wNFwiKTtcbn1cbmZ1bmN0aW9uIGxvYWRWaWRlbzIoKXtcbiAgUGxheWVyLnNldFNvdXJjZShcIi4vcHVibGljL21lZGlhL3dvcmtzaG9wMi92aWRlb1cxLTIubXA0XCIpO31cblxuZnVuY3Rpb24gYW5hbHl6ZURhdGEoKXtcbiAgZGF0YUFuYWx5c3QuYW5hbHlzZURhdGExKCk7XG59XG5cblxuXG5cblxuXG4iXX0=