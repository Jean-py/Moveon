"use strict";

var menu = document.getElementById("containerMenu");
var bar1 = document.getElementById("bar1id");
var bar2 = document.getElementById("bar2id");
var bar3 = document.getElementById("bar3id");
var menuOption = document.getElementById("menuOptionId");
var sidebarMenu = document.getElementById("sidebarMenu");
var noteMessage = document.getElementById("noteMessage");
var idSession = document.getElementById("idSession");
var btnLoadFile = document.getElementById("btnLoadFile");
var inputFile = document.getElementById('logFileLoad');
var btnCleanAll = document.getElementById('btnCleanAll');
var btnLoadYtVideo = document.getElementById('loadYtVideo');
var btnSaveSegments = document.getElementById('btnSaveSegments');

//var dataAnalyst = DataAnalyst;

var btnloadSH1 = document.getElementById('loadSHvideo1');
var btnloadSH2 = document.getElementById('loadSHvideo2');
var btnloadSHTuto = document.getElementById('loadSHvideoTutorial');
var btnloadVideo1 = document.getElementById('loadvideo1');
var btnloadVideo2 = document.getElementById('loadvideo2');
var btnAnalyzeData = document.getElementById('analyzeData');

var menuExtended = 0;

//menuOption.innerHTML = "Username : " + logger.getSocket_name_session();

idSession.value = logger.getSocket_name_session();

inputFile.addEventListener('change', updateImageDisplay);

btnLoadFile.addEventListener("mousedown", function (e) {
  //emulating a click on a file picking
  inputFile.click();
}, {
  passive: true
});

function updateImageDisplay() {
  var curFiles = inputFile.files;
  console.log(curFiles);
  cardManager.execute(new LoadLogCommand(curFiles));
  var notification_feedback = "File imported !";
  notificationFeedback(notification_feedback);
}

menu.addEventListener("mousedown", handleMenu, {
  passive: true
});

if (btnLoadYtVideo !== null) btnLoadYtVideo.addEventListener("mousedown", callbackLoadYtVideo);

btnCleanAll.addEventListener("mousedown", callbackCleanSegmentHistory);

btnSaveSegments.addEventListener("mousedown", callbackSaveFile);

if (btnloadSH1 !== null) btnloadSH1.addEventListener("mousedown", loadSH1);

if (btnloadSH2 !== null) btnloadSH2.addEventListener("mousedown", loadSH2);
if (btnloadSHTuto !== null) btnloadSHTuto.addEventListener("mousedown", loadSHTuto);
if (btnloadVideo1 !== null) btnloadVideo1.addEventListener("mousedown", loadVideo1);
if (btnloadVideo2 !== null) btnloadVideo2.addEventListener("mousedown", loadVideo2);
if (btnAnalyzeData !== null) btnAnalyzeData.addEventListener("mousedown", analyzeData);

idSession.addEventListener("blur", setSessionName, { passive: true });
function setSessionName() {
  logger.changeUsernameSocket(idSession.value);
  var notification_feedback = "Sucess! Log file is : " + idSession.value;
  notificationFeedback(notification_feedback);
}

function callbackCleanSegmentHistory() {
  if (confirm(" /!\\ Voulez-vous vraiment supprimer tous les segments?")) {
    // Code à éxécuter si le l'utilisateur clique sur "OK"
    var notification_feedback = "Clean all success";
    notificationFeedback(notification_feedback);
    cardManager.execute(new CleanSegmentHistoryCommand());
    // Code à éxécuter si l'utilisateur clique sur "Annuler"
  } else {
    var notification_feedback = "Not confirmed!";
    notificationFeedback(notification_feedback);
  }
}

function callbackSaveFile() {
  console.log("saving log");
  /*arrayCard.forEach(function (arrayItem) {
    // arrayItem.updateInfo();
    //arrayItem.
  });*/
  cardManager.exportCard();
  var notification_feedback = "File saved : " + idSession.value;
  notificationFeedback(notification_feedback);
}

function callbackLoadYtVideo() {}

function handleMenu() {
  menu.classList.toggle("change");
  //sidebarMenu.classList.toggle("appearMenuSidebar");
  if (menuExtended) {
    menuExtended = 0;
    sidebarMenu.style.visibility = 'hidden'; // Show
  } else {
    sidebarMenu.style.visibility = 'visible'; // Hide
    menuExtended = 1;
  }
}

function notificationFeedback(notification_message) {
  window.location = "#oNote4";
  noteMessage.innerHTML = notification_message;
  setTimeout(function () {
    window.location = "#oNote";
  }, 2500);
}

// Get the modal
var modal = document.getElementById('myModal');

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal
if (btnLoadYtVideo !== null) {

  btnLoadYtVideo.onclick = function () {
    modal.style.display = "block";
  };
}

// When the user clicks on <span> (x), close the modal
span.onclick = function () {
  modal.style.display = "none";
};

// When the user clicks anywhere outside of the modal, close it
window.onclick = function (event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
};

function loadSH1() {
  loadJSONSegmentHistory1();
}

function loadSH2() {
  loadJSONSegmentHistory2();
}
function loadSHTuto() {
  loadJSONSegmentHistoryTutorial();
}

function loadVideo1() {
  Player.setSource("./public/media/workshop2/videoW1.mp4");
}
function loadVideo2() {
  Player.setSource("./public/media/workshop2/videoW1-2.mp4");
}

function analyzeData() {
  dataAnalyst.analyseData1();
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lbnUuanMiXSwibmFtZXMiOlsibWVudSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJiYXIxIiwiYmFyMiIsImJhcjMiLCJtZW51T3B0aW9uIiwic2lkZWJhck1lbnUiLCJub3RlTWVzc2FnZSIsImlkU2Vzc2lvbiIsImJ0bkxvYWRGaWxlIiwiaW5wdXRGaWxlIiwiYnRuQ2xlYW5BbGwiLCJidG5Mb2FkWXRWaWRlbyIsImJ0blNhdmVTZWdtZW50cyIsImJ0bmxvYWRTSDEiLCJidG5sb2FkU0gyIiwiYnRubG9hZFNIVHV0byIsImJ0bmxvYWRWaWRlbzEiLCJidG5sb2FkVmlkZW8yIiwiYnRuQW5hbHl6ZURhdGEiLCJtZW51RXh0ZW5kZWQiLCJ2YWx1ZSIsImxvZ2dlciIsImdldFNvY2tldF9uYW1lX3Nlc3Npb24iLCJhZGRFdmVudExpc3RlbmVyIiwidXBkYXRlSW1hZ2VEaXNwbGF5IiwiZSIsImNsaWNrIiwicGFzc2l2ZSIsImN1ckZpbGVzIiwiZmlsZXMiLCJjb25zb2xlIiwibG9nIiwiY2FyZE1hbmFnZXIiLCJleGVjdXRlIiwiTG9hZExvZ0NvbW1hbmQiLCJub3RpZmljYXRpb25fZmVlZGJhY2siLCJub3RpZmljYXRpb25GZWVkYmFjayIsImhhbmRsZU1lbnUiLCJjYWxsYmFja0xvYWRZdFZpZGVvIiwiY2FsbGJhY2tDbGVhblNlZ21lbnRIaXN0b3J5IiwiY2FsbGJhY2tTYXZlRmlsZSIsImxvYWRTSDEiLCJsb2FkU0gyIiwibG9hZFNIVHV0byIsImxvYWRWaWRlbzEiLCJsb2FkVmlkZW8yIiwiYW5hbHl6ZURhdGEiLCJzZXRTZXNzaW9uTmFtZSIsImNoYW5nZVVzZXJuYW1lU29ja2V0IiwiY29uZmlybSIsIkNsZWFuU2VnbWVudEhpc3RvcnlDb21tYW5kIiwiZXhwb3J0Q2FyZCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInN0eWxlIiwidmlzaWJpbGl0eSIsIm5vdGlmaWNhdGlvbl9tZXNzYWdlIiwid2luZG93IiwibG9jYXRpb24iLCJpbm5lckhUTUwiLCJzZXRUaW1lb3V0IiwibW9kYWwiLCJzcGFuIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIm9uY2xpY2siLCJkaXNwbGF5IiwiZXZlbnQiLCJ0YXJnZXQiLCJsb2FkSlNPTlNlZ21lbnRIaXN0b3J5MSIsImxvYWRKU09OU2VnbWVudEhpc3RvcnkyIiwibG9hZEpTT05TZWdtZW50SGlzdG9yeVR1dG9yaWFsIiwiUGxheWVyIiwic2V0U291cmNlIiwiZGF0YUFuYWx5c3QiLCJhbmFseXNlRGF0YTEiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSUEsT0FBT0MsU0FBU0MsY0FBVCxDQUF3QixlQUF4QixDQUFYO0FBQ0EsSUFBSUMsT0FBT0YsU0FBU0MsY0FBVCxDQUF3QixRQUF4QixDQUFYO0FBQ0EsSUFBSUUsT0FBT0gsU0FBU0MsY0FBVCxDQUF3QixRQUF4QixDQUFYO0FBQ0EsSUFBSUcsT0FBT0osU0FBU0MsY0FBVCxDQUF3QixRQUF4QixDQUFYO0FBQ0EsSUFBSUksYUFBYUwsU0FBU0MsY0FBVCxDQUF3QixjQUF4QixDQUFqQjtBQUNBLElBQUlLLGNBQWNOLFNBQVNDLGNBQVQsQ0FBd0IsYUFBeEIsQ0FBbEI7QUFDQSxJQUFJTSxjQUFjUCxTQUFTQyxjQUFULENBQXdCLGFBQXhCLENBQWxCO0FBQ0EsSUFBSU8sWUFBWVIsU0FBU0MsY0FBVCxDQUF3QixXQUF4QixDQUFoQjtBQUNBLElBQUlRLGNBQWNULFNBQVNDLGNBQVQsQ0FBd0IsYUFBeEIsQ0FBbEI7QUFDQSxJQUFJUyxZQUFZVixTQUFTQyxjQUFULENBQXdCLGFBQXhCLENBQWhCO0FBQ0EsSUFBSVUsY0FBY1gsU0FBU0MsY0FBVCxDQUF3QixhQUF4QixDQUFsQjtBQUNBLElBQUlXLGlCQUFpQlosU0FBU0MsY0FBVCxDQUF3QixhQUF4QixDQUFyQjtBQUNBLElBQUlZLGtCQUFrQmIsU0FBU0MsY0FBVCxDQUF3QixpQkFBeEIsQ0FBdEI7O0FBRUE7O0FBRUEsSUFBSWEsYUFBYWQsU0FBU0MsY0FBVCxDQUF3QixjQUF4QixDQUFqQjtB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RkQ7O0FBSUE7QUFDQVIsT0FBT08sT0FBUCxHQUFpQixVQUFTRSxLQUFULEVBQWdCO0FBQy9CLE1BQUlBLE1BQU1DLE1BQU4sSUFBZ0JOLEtBQXBCLEVBQTJCO0FBQ3pCQSxVQUFNUCxLQUFOLENBQVlXLE9BQVosR0FBc0IsTUFBdEI7QUFDRDtBQUNGLENBSkQ7O0FBUUEsU0FBU3hCLE9BQVQsR0FBa0I7QUFDaEIyQjtBQUNEOztBQUVELFNBQVMxQixPQUFULEdBQWtCO0FBQ2hCMkI7QUFFRDtBQUNELFNBQVMxQixVQUFULEdBQXFCO0FBQ25CMkI7QUFDRDs7QUFHRCxTQUFTMUIsVUFBVCxHQUFxQjtBQUNuQjJCLFNBQU9DLFNBQVAsQ0FBaUIsc0NBQWpCO0FBQ0Q7QUFDRCxTQUFTM0IsVUFBVCxHQUFxQjtBQUNuQjBCLFNBQU9DLFNBQVAsQ0FBaUIsd0NBQWpCO0FBQTREOztBQUU5RCxTQUFTMUIsV0FBVCxHQUFzQjtBQUNwQjJCLGNBQVlDLFlBQVo7QUFDRCIsImZpbGUiOiJtZW51LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lck1lbnVcIik7XG52YXIgYmFyMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFyMWlkXCIpO1xudmFyIGJhcjIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhcjJpZFwiKTtcbnZhciBiYXIzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYXIzaWRcIik7XG52YXIgbWVudU9wdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVudU9wdGlvbklkXCIpO1xudmFyIHNpZGViYXJNZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaWRlYmFyTWVudVwiKTtcbnZhciBub3RlTWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibm90ZU1lc3NhZ2VcIik7XG52YXIgaWRTZXNzaW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpZFNlc3Npb25cIik7XG52YXIgYnRuTG9hZEZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ0bkxvYWRGaWxlXCIpO1xudmFyIGlucHV0RmlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dGaWxlTG9hZCcpO1xudmFyIGJ0bkNsZWFuQWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bkNsZWFuQWxsJyk7XG52YXIgYnRuTG9hZFl0VmlkZW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZFl0VmlkZW8nKTtcbnZhciBidG5TYXZlU2VnbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuU2F2ZVNlZ21lbnRzJyk7XG5cbi8vdmFyIGRhdGFBbmFseXN0ID0gRGF0YUFuYWx5c3Q7XG5cbnZhciBidG5sb2FkU0gxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRTSHZpZGVvMScpO1xudmFyIGJ0bmxvYWRTSDIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZFNIdmlkZW8yJyk7XG52YXIgYnRubG9hZFNIVHV0byA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkU0h2aWRlb1R1dG9yaWFsJyk7XG52YXIgYnRubG9hZFZpZGVvMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkdmlkZW8xJyk7XG52YXIgYnRubG9hZFZpZGVvMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkdmlkZW8yJyk7XG52YXIgYnRuQW5hbHl6ZURhdGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5hbHl6ZURhdGEnKTtcblxuXG5cbnZhciBtZW51RXh0ZW5kZWQgPSAwO1xuXG4vL21lbnVPcHRpb24uaW5uZXJIVE1MID0gXCJVc2VybmFtZSA6IFwiICsgbG9nZ2VyLmdldFNvY2tldF9uYW1lX3Nlc3Npb24oKTtcblxuaWRTZXNzaW9uLnZhbHVlID0gbG9nZ2VyLmdldFNvY2tldF9uYW1lX3Nlc3Npb24oKTtcblxuaW5wdXRGaWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHVwZGF0ZUltYWdlRGlzcGxheSk7XG5cbmJ0bkxvYWRGaWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAvL2VtdWxhdGluZyBhIGNsaWNrIG9uIGEgZmlsZSBwaWNraW5nXG4gICAgaW5wdXRGaWxlLmNsaWNrKCk7XG4gIH0sIHtcbiAgcGFzc2l2ZTogdHJ1ZVxufSk7XG5cblxuXG5mdW5jdGlvbiB1cGRhdGVJbWFnZURpc3BsYXkoKSB7XG4gIHZhciBjdXJGaWxlcyA9IGlucHV0RmlsZS5maWxlcztcbiAgY29uc29sZS5sb2coY3VyRmlsZXMpO1xuICBjYXJkTWFuYWdlci5leGVjdXRlKG5ldyBMb2FkTG9nQ29tbWFuZChjdXJGaWxlcykpO1xuICB2YXIgbm90aWZpY2F0aW9uX2ZlZWRiYWNrID0gXCJGaWxlIGltcG9ydGVkICFcIjtcbiAgbm90aWZpY2F0aW9uRmVlZGJhY2sobm90aWZpY2F0aW9uX2ZlZWRiYWNrKVxufVxuXG5cbm1lbnUuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVNZW51LCB7XG4gIHBhc3NpdmU6IHRydWVcbn0pO1xuXG5pZihidG5Mb2FkWXRWaWRlbyAhPT0gbnVsbClcbiAgYnRuTG9hZFl0VmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjYWxsYmFja0xvYWRZdFZpZGVvKTtcblxuYnRuQ2xlYW5BbGwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjYWxsYmFja0NsZWFuU2VnbWVudEhpc3RvcnkpO1xuXG5idG5TYXZlU2VnbWVudHMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjYWxsYmFja1NhdmVGaWxlKTtcblxuaWYoYnRubG9hZFNIMSAhPT0gbnVsbClcbiAgYnRubG9hZFNIMS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGxvYWRTSDEgKTtcblxuaWYoYnRubG9hZFNIMiAhPT0gbnVsbClcbiAgYnRubG9hZFNIMi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGxvYWRTSDIpO1xuaWYoYnRubG9hZFNIVHV0byAhPT0gbnVsbClcbiAgYnRubG9hZFNIVHV0by5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGxvYWRTSFR1dG8pO1xuaWYoYnRubG9hZFZpZGVvMSAhPT0gbnVsbClcbiAgYnRubG9hZFZpZGVvMS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGxvYWRWaWRlbzEpO1xuaWYoYnRubG9hZFZpZGVvMiAhPT0gbnVsbClcbiAgYnRubG9hZFZpZGVvMi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGxvYWRWaWRlbzIpO1xuaWYoYnRuQW5hbHl6ZURhdGEgIT09IG51bGwpXG4gIGJ0bkFuYWx5emVEYXRhLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgYW5hbHl6ZURhdGEpO1xuXG5cblxuXG5pZFNlc3Npb24uYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIixzZXRTZXNzaW9uTmFtZSwge3Bhc3NpdmU6IHRydWV9KTtcbmZ1bmN0aW9uIHNldFNlc3Npb25OYW1lKCl7XG4gICBsb2dnZXIuY2hhbmdlVXNlcm5hbWVTb2NrZXQoIGlkU2Vzc2lvbi52YWx1ZSApO1xuICAgdmFyIG5vdGlmaWNhdGlvbl9mZWVkYmFjayA9IFwiU3VjZXNzISBMb2cgZmlsZSBpcyA6IFwiICsgaWRTZXNzaW9uLnZhbHVlO1xuICAgIG5vdGlmaWNhdGlvbkZlZWRiYWNrKG5vdGlmaWNhdGlvbl9mZWVkYmFjayk7XG59XG5cbmZ1bmN0aW9uIGNhbGxiYWNrQ2xlYW5TZWdtZW50SGlzdG9yeSgpe1xuICBpZiAoIGNvbmZpcm0oIFwiIC8hXFxcXCBWb3VsZXotdm91cyB2cmFpbWVudCBzdXBwcmltZXIgdG91cyBsZXMgc2VnbWVudHM/XCIgKSApIHtcbiAgICAvLyBDb2RlIMOgIMOpeMOpY3V0ZXIgc2kgbGUgbCd1dGlsaXNhdGV1ciBjbGlxdWUgc3VyIFwiT0tcIlxuICAgIHZhciBub3RpZmljYXRpb25fZmVlZGJhY2sgPSBcIkNsZWFuIGFsbCBzdWNjZXNzXCI7XG4gICAgbm90aWZpY2F0aW9uRmVlZGJhY2sobm90aWZpY2F0aW9uX2ZlZWRiYWNrKTtcbiAgICBjYXJkTWFuYWdlci5leGVjdXRlKG5ldyBDbGVhblNlZ21lbnRIaXN0b3J5Q29tbWFuZCgpKTtcbiAgICAvLyBDb2RlIMOgIMOpeMOpY3V0ZXIgc2kgbCd1dGlsaXNhdGV1ciBjbGlxdWUgc3VyIFwiQW5udWxlclwiXG4gIH0gZWxzZSB7XG4gICAgdmFyIG5vdGlmaWNhdGlvbl9mZWVkYmFjayA9IFwiTm90IGNvbmZpcm1lZCFcIjtcbiAgICBub3RpZmljYXRpb25GZWVkYmFjayhub3RpZmljYXRpb25fZmVlZGJhY2spO1xuICB9XG4gIFxuICBcbn1cblxuZnVuY3Rpb24gY2FsbGJhY2tTYXZlRmlsZSgpe1xuICBjb25zb2xlLmxvZyhcInNhdmluZyBsb2dcIik7XG4gIC8qYXJyYXlDYXJkLmZvckVhY2goZnVuY3Rpb24gKGFycmF5SXRlbSkge1xuICAgIC8vIGFycmF5SXRlbS51cGRhdGVJbmZvKCk7XG4gICAgLy9hcnJheUl0ZW0uXG4gIH0pOyovXG4gIGNhcmRNYW5hZ2VyLmV4cG9ydENhcmQoKTtcbiAgdmFyIG5vdGlmaWNhdGlvbl9mZWVkYmFjayA9IFwiRmlsZSBzYXZlZCA6IFwiICsgaWRTZXNzaW9uLnZhbHVlO1xuICBub3RpZmljYXRpb25GZWVkYmFjayhub3RpZmljYXRpb25fZmVlZGJhY2spO1xufVxuXG5mdW5jdGlvbiBjYWxsYmFja0xvYWRZdFZpZGVvKCl7XG5cbn1cblxuZnVuY3Rpb24gaGFuZGxlTWVudSgpe1xuICBtZW51LmNsYXNzTGlzdC50b2dnbGUoXCJjaGFuZ2VcIik7XG4gIC8vc2lkZWJhck1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcImFwcGVhck1lbnVTaWRlYmFyXCIpO1xuICBpZihtZW51RXh0ZW5kZWQpe1xuICAgIG1lbnVFeHRlbmRlZCA9IDA7XG4gICAgc2lkZWJhck1lbnUuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nOyAgICAgLy8gU2hvd1xuICB9IGVsc2Uge1xuICAgIHNpZGViYXJNZW51LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7ICAgICAgLy8gSGlkZVxuICAgIG1lbnVFeHRlbmRlZCA9IDE7XG4gIH1cbn1cblxuZnVuY3Rpb24gbm90aWZpY2F0aW9uRmVlZGJhY2sobm90aWZpY2F0aW9uX21lc3NhZ2Upe1xuICB3aW5kb3cubG9jYXRpb24gPSBcIiNvTm90ZTRcIjtcbiAgbm90ZU1lc3NhZ2UuaW5uZXJIVE1MID0gbm90aWZpY2F0aW9uX21lc3NhZ2U7XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7d2luZG93LmxvY2F0aW9uID0gXCIjb05vdGVcIjt9LCAyNTAwKTtcbn1cblxuLy8gR2V0IHRoZSBtb2RhbFxudmFyIG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215TW9kYWwnKTtcblxuLy8gR2V0IHRoZSA8c3Bhbj4gZWxlbWVudCB0aGF0IGNsb3NlcyB0aGUgbW9kYWxcbnZhciBzcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNsb3NlXCIpWzBdO1xuXG4vLyBXaGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgYnV0dG9uLCBvcGVuIHRoZSBtb2RhbFxuaWYoYnRuTG9hZFl0VmlkZW8gIT09IG51bGwpe1xuICBcbiAgYnRuTG9hZFl0VmlkZW8ub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gIH07XG59XG5cbi8vIFdoZW4gdGhlIHVzZXIgY2xpY2tzIG9uIDxzcGFuPiAoeCksIGNsb3NlIHRoZSBtb2RhbFxuc3Bhbi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbn07XG5cbi8vIFdoZW4gdGhlIHVzZXIgY2xpY2tzIGFueXdoZXJlIG91dHNpZGUgb2YgdGhlIG1vZGFsLCBjbG9zZSBpdFxud2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkge1xuICBpZiAoZXZlbnQudGFyZ2V0ID09IG1vZGFsKSB7XG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB9XG59O1xuXG5cblxuZnVuY3Rpb24gbG9hZFNIMSgpe1xuICBsb2FkSlNPTlNlZ21lbnRIaXN0b3J5MSgpIDtcbn1cblxuZnVuY3Rpb24gbG9hZFNIMigpe1xuICBsb2FkSlNPTlNlZ21lbnRIaXN0b3J5MigpO1xuXG59XG5mdW5jdGlvbiBsb2FkU0hUdXRvKCl7XG4gIGxvYWRKU09OU2VnbWVudEhpc3RvcnlUdXRvcmlhbCgpO1xufVxuXG5cbmZ1bmN0aW9uIGxvYWRWaWRlbzEoKXtcbiAgUGxheWVyLnNldFNvdXJjZShcIi4vcHVibGljL21lZGlhL3dvcmtzaG9wMi92aWRlb1cxLm1wNFwiKTtcbn1cbmZ1bmN0aW9uIGxvYWRWaWRlbzIoKXtcbiAgUGxheWVyLnNldFNvdXJjZShcIi4vcHVibGljL21lZGlhL3dvcmtzaG9wMi92aWRlb1cxLTIubXA0XCIpO31cblxuZnVuY3Rpb24gYW5hbHl6ZURhdGEoKXtcbiAgZGF0YUFuYWx5c3QuYW5hbHlzZURhdGExKCk7XG59XG5cblxuXG5cblxuXG4iXX0=