"use strict";

var menu = document.getElementById("containerMenu");
var bar1 = document.getElementById("bar1id");
var bar2 = document.getElementById("bar2id");
var bar3 = document.getElementById("bar3id");
var menuOption = document.getElementById("menuOptionId");
var sidebarMenu = document.getElementById("sidebarMenu");
var noteMessage = document.getElementById("noteMessage");
var idSession = document.getElementById("idSession");
var btnLoadFile = document.getElementById("btnLoadFile");
var inputFile = document.getElementById('logFileLoad');
var btnCleanAll = document.getElementById('btnCleanAll');
var btnLoadYtVideo = document.getElementById('loadYtVideo');
var btnSaveSegments = document.getElementById('btnSaveSegments');

var btnloadv1 = document.getElementById('loadSHvideo1');
var btnloadv2 = document.getElementById('loadSHvideo2');

var menuExtended = 0;

//menuOption.innerHTML = "Username : " + logger.getSocket_name_session();

idSession.value = logger.getSocket_name_session();

inputFile.addEventListener('change', updateImageDisplay);

btnLoadFile.addEventListener("mousedown", function (e) {
  //emulating a click on a file picking
  inputFile.click();
}, {
  passive: true
});

function updateImageDisplay() {
  var curFiles = inputFile.files;
  console.log(curFiles);
  cardManager.execute(new LoadLogCommand(curFiles));

  var notification_feedback = "File imported !";
  notificationFeedback(notification_feedback);
}

menu.addEventListener("mousedown", handleMenu, {
  passive: true
});

btnLoadYtVideo.addEventListener("mousedown", callbackLoadYtVideo);

btnCleanAll.addEventListener("mousedown", callbackCleanSegmentHistory);

btnSaveSegments.addEventListener("mousedown", callbackSaveFile);

btnloadv1.addEventListener("mousedown", loadv1);
btnloadv2.addEventListener("mousedown", loadv2);

idSession.addEventListener("blur", setSessionName, { passive: true });
function setSessionName() {
  logger.changeUsernameSocket(idSession.value);
  var notification_feedback = "Sucess! Log file is : " + idSession.value;
  notificationFeedback(notification_feedback);
}

function callbackCleanSegmentHistory() {
  if (confirm(" /!\\ Voulez-vous vraiment supprimer tous les segments?")) {
    // Code à éxécuter si le l'utilisateur clique sur "OK"
    var notification_feedback = "Clean all success";
    notificationFeedback(notification_feedback);
    cardManager.execute(new CleanSegmentHistoryCommand());
    // Code à éxécuter si l'utilisateur clique sur "Annuler"
  } else {
    var notification_feedback = "Not confirmed!";
    notificationFeedback(notification_feedback);
  }
}

function callbackSaveFile() {
  console.log("saving log");
  /*arrayCard.forEach(function (arrayItem) {
    // arrayItem.updateInfo();
    //arrayItem.
  });*/
  cardManager.exportCard();
  var notification_feedback = "File saved : " + idSession.value;
  notificationFeedback(notification_feedback);
}

function callbackLoadYtVideo() {}

function handleMenu() {
  menu.classList.toggle("change");
  //sidebarMenu.classList.toggle("appearMenuSidebar");
  if (menuExtended) {
    menuExtended = 0;
    sidebarMenu.style.visibility = 'hidden'; // Show
  } else {
    sidebarMenu.style.visibility = 'visible'; // Hide
    menuExtended = 1;
  }
}

function notificationFeedback(notification_message) {
  window.location = "#oNote4";
  noteMessage.innerHTML = notification_message;
  setTimeout(function () {
    window.location = "#oNote";
  }, 2500);
}

// Get the modal
var modal = document.getElementById('myModal');

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal
btnLoadYtVideo.onclick = function () {
  modal.style.display = "block";
};

// When the user clicks on <span> (x), close the modal
span.onclick = function () {
  modal.style.display = "none";
};

// When the user clicks anywhere outside of the modal, close it
window.onclick = function (event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
};

function loadv1() {}

function loadv2() {}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lbnUuanMiXSwibmFtZXMiOlsibWVudSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJiYXIxIiwiYmFyMiIsImJhcjMiLCJtZW51T3B0aW9uIiwic2lkZWJhck1lbnUiLCJub3RlTWVzc2FnZSIsImlkU2Vzc2lvbiIsImJ0bkxvYWRGaWxlIiwiaW5wdXRGaWxlIiwiYnRuQ2xlYW5BbGwiLCJidG5Mb2FkWXRWaWRlbyIsImJ0blNhdmVTZWdtZW50cyIsImJ0bmxvYWR2MSIsImJ0bmxvYWR2MiIsIm1lbnVFeHRlbmRlZCIsInZhbHVlIiwibG9nZ2VyIiwiZ2V0U29ja2V0X25hbWVfc2Vzc2lvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJ1cGRhdGVJbWFnZURpc3BsYXkiLCJlIiwiY2xpY2siLCJwYXNzaXZlIiwiY3VyRmlsZXMiLCJmaWxlcyIsImNvbnNvbGUiLCJsb2ciLCJjYXJkTWFuYWdlciIsImV4ZWN1dGUiLCJMb2FkTG9nQ29tbWFuZCIsIm5vdGlmaWNhdGlvbl9mZWVkYmFjayIsIm5vdGlmaWNhdGlvbkZlZWRiYWNrIiwiaGFuZGxlTWVudSIsImNhbGxiYWNrTG9hZFl0VmlkZW8iLCJjYWxsYmFja0NsZWFuU2VnbWVudEhpc3RvcnkiLCJjYWxsYmFja1NhdmVGaWxlIiwibG9hZHYxIiwibG9hZHYyIiwic2V0U2Vzc2lvbk5hbWUiLCJjaGFuZ2VVc2VybmFtZVNvY2tldCIsImNvbmZpcm0iLCJDbGVhblNlZ21lbnRIaXN0b3J5Q29tbWFuZCIsImV4cG9ydENhcmQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJub3RpZmljYXRpb25fbWVzc2FnZSIsIndpbmRvdyIsImxvY2F0aW9uIiwiaW5uZXJIVE1MIiwic2V0VGltZW91dCIsIm1vZGFsIiwic3BhbiIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJvbmNsaWNrIiwiZGlzcGxheSIsImV2ZW50IiwidGFyZ2V0Il0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUlB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eEJILFFBQU1QLEtBQU4sQ0FBWVcsT0FBWixHQUFzQixNQUF0QjtBQUNELENBRkQ7O0FBSUE7QUFDQVIsT0FBT08sT0FBUCxHQUFpQixVQUFTRSxLQUFULEVBQWdCO0FBQy9CLE1BQUlBLE1BQU1DLE1BQU4sSUFBZ0JOLEtBQXBCLEVBQTJCO0FBQ3pCQSxVQUFNUCxLQUFOLENBQVlXLE9BQVosR0FBc0IsTUFBdEI7QUFDRDtBQUNGLENBSkQ7O0FBUUEsU0FBU3BCLE1BQVQsR0FBaUIsQ0FFaEI7O0FBRUQsU0FBU0MsTUFBVCxHQUFpQixDQUVoQiIsImZpbGUiOiJtZW51LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lck1lbnVcIik7XG52YXIgYmFyMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFyMWlkXCIpO1xudmFyIGJhcjIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhcjJpZFwiKTtcbnZhciBiYXIzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYXIzaWRcIik7XG52YXIgbWVudU9wdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVudU9wdGlvbklkXCIpO1xudmFyIHNpZGViYXJNZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaWRlYmFyTWVudVwiKTtcbnZhciBub3RlTWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibm90ZU1lc3NhZ2VcIik7XG52YXIgaWRTZXNzaW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpZFNlc3Npb25cIik7XG52YXIgYnRuTG9hZEZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ0bkxvYWRGaWxlXCIpO1xudmFyIGlucHV0RmlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dGaWxlTG9hZCcpO1xudmFyIGJ0bkNsZWFuQWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bkNsZWFuQWxsJyk7XG52YXIgYnRuTG9hZFl0VmlkZW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZFl0VmlkZW8nKTtcbnZhciBidG5TYXZlU2VnbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuU2F2ZVNlZ21lbnRzJyk7XG5cblxudmFyIGJ0bmxvYWR2MSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkU0h2aWRlbzEnKTtcbnZhciBidG5sb2FkdjIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZFNIdmlkZW8yJyk7XG5cblxuXG52YXIgbWVudUV4dGVuZGVkID0gMDtcblxuLy9tZW51T3B0aW9uLmlubmVySFRNTCA9IFwiVXNlcm5hbWUgOiBcIiArIGxvZ2dlci5nZXRTb2NrZXRfbmFtZV9zZXNzaW9uKCk7XG5cbmlkU2Vzc2lvbi52YWx1ZSA9IGxvZ2dlci5nZXRTb2NrZXRfbmFtZV9zZXNzaW9uKCk7XG5cbmlucHV0RmlsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB1cGRhdGVJbWFnZURpc3BsYXkpO1xuXG5idG5Mb2FkRmlsZS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgLy9lbXVsYXRpbmcgYSBjbGljayBvbiBhIGZpbGUgcGlja2luZ1xuICAgIGlucHV0RmlsZS5jbGljaygpO1xuICB9LCB7XG4gIHBhc3NpdmU6IHRydWVcbn0pO1xuXG5cbmZ1bmN0aW9uIHVwZGF0ZUltYWdlRGlzcGxheSgpIHtcbiAgdmFyIGN1ckZpbGVzID0gaW5wdXRGaWxlLmZpbGVzO1xuICBjb25zb2xlLmxvZyhjdXJGaWxlcyk7XG4gIGNhcmRNYW5hZ2VyLmV4ZWN1dGUobmV3IExvYWRMb2dDb21tYW5kKGN1ckZpbGVzKSk7XG4gIFxuICBcbiAgdmFyIG5vdGlmaWNhdGlvbl9mZWVkYmFjayA9IFwiRmlsZSBpbXBvcnRlZCAhXCI7XG4gIG5vdGlmaWNhdGlvbkZlZWRiYWNrKG5vdGlmaWNhdGlvbl9mZWVkYmFjaylcbn1cblxuXG5tZW51LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlTWVudSwge1xuICBwYXNzaXZlOiB0cnVlXG59KTtcblxuYnRuTG9hZFl0VmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjYWxsYmFja0xvYWRZdFZpZGVvKTtcblxuYnRuQ2xlYW5BbGwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjYWxsYmFja0NsZWFuU2VnbWVudEhpc3RvcnkpO1xuXG5idG5TYXZlU2VnbWVudHMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBjYWxsYmFja1NhdmVGaWxlKTtcblxuYnRubG9hZHYxLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgbG9hZHYxICk7XG5idG5sb2FkdjIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBsb2FkdjIpO1xuXG5cbmlkU2Vzc2lvbi5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLHNldFNlc3Npb25OYW1lLCB7cGFzc2l2ZTogdHJ1ZX0pO1xuZnVuY3Rpb24gc2V0U2Vzc2lvbk5hbWUoKXtcbiAgIGxvZ2dlci5jaGFuZ2VVc2VybmFtZVNvY2tldCggaWRTZXNzaW9uLnZhbHVlICk7XG4gICB2YXIgbm90aWZpY2F0aW9uX2ZlZWRiYWNrID0gXCJTdWNlc3MhIExvZyBmaWxlIGlzIDogXCIgKyBpZFNlc3Npb24udmFsdWU7XG4gICAgbm90aWZpY2F0aW9uRmVlZGJhY2sobm90aWZpY2F0aW9uX2ZlZWRiYWNrKTtcbn1cblxuZnVuY3Rpb24gY2FsbGJhY2tDbGVhblNlZ21lbnRIaXN0b3J5KCl7XG4gIGlmICggY29uZmlybSggXCIgLyFcXFxcIFZvdWxlei12b3VzIHZyYWltZW50IHN1cHByaW1lciB0b3VzIGxlcyBzZWdtZW50cz9cIiApICkge1xuICAgIC8vIENvZGUgw6Agw6l4w6ljdXRlciBzaSBsZSBsJ3V0aWxpc2F0ZXVyIGNsaXF1ZSBzdXIgXCJPS1wiXG4gICAgdmFyIG5vdGlmaWNhdGlvbl9mZWVkYmFjayA9IFwiQ2xlYW4gYWxsIHN1Y2Nlc3NcIjtcbiAgICBub3RpZmljYXRpb25GZWVkYmFjayhub3RpZmljYXRpb25fZmVlZGJhY2spO1xuICAgIGNhcmRNYW5hZ2VyLmV4ZWN1dGUobmV3IENsZWFuU2VnbWVudEhpc3RvcnlDb21tYW5kKCkpO1xuICAgIC8vIENvZGUgw6Agw6l4w6ljdXRlciBzaSBsJ3V0aWxpc2F0ZXVyIGNsaXF1ZSBzdXIgXCJBbm51bGVyXCJcbiAgfSBlbHNlIHtcbiAgICB2YXIgbm90aWZpY2F0aW9uX2ZlZWRiYWNrID0gXCJOb3QgY29uZmlybWVkIVwiO1xuICAgIG5vdGlmaWNhdGlvbkZlZWRiYWNrKG5vdGlmaWNhdGlvbl9mZWVkYmFjayk7XG4gIH1cbiAgXG4gIFxufVxuXG5mdW5jdGlvbiBjYWxsYmFja1NhdmVGaWxlKCl7XG4gIGNvbnNvbGUubG9nKFwic2F2aW5nIGxvZ1wiKTtcbiAgLyphcnJheUNhcmQuZm9yRWFjaChmdW5jdGlvbiAoYXJyYXlJdGVtKSB7XG4gICAgLy8gYXJyYXlJdGVtLnVwZGF0ZUluZm8oKTtcbiAgICAvL2FycmF5SXRlbS5cbiAgfSk7Ki9cbiAgY2FyZE1hbmFnZXIuZXhwb3J0Q2FyZCgpO1xuICB2YXIgbm90aWZpY2F0aW9uX2ZlZWRiYWNrID0gXCJGaWxlIHNhdmVkIDogXCIgKyBpZFNlc3Npb24udmFsdWU7XG4gIG5vdGlmaWNhdGlvbkZlZWRiYWNrKG5vdGlmaWNhdGlvbl9mZWVkYmFjayk7XG59XG5cbmZ1bmN0aW9uIGNhbGxiYWNrTG9hZFl0VmlkZW8oKXtcblxufVxuXG5mdW5jdGlvbiBoYW5kbGVNZW51KCl7XG4gIG1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcImNoYW5nZVwiKTtcbiAgLy9zaWRlYmFyTWVudS5jbGFzc0xpc3QudG9nZ2xlKFwiYXBwZWFyTWVudVNpZGViYXJcIik7XG4gIGlmKG1lbnVFeHRlbmRlZCl7XG4gICAgbWVudUV4dGVuZGVkID0gMDtcbiAgICBzaWRlYmFyTWVudS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7ICAgICAvLyBTaG93XG4gIH0gZWxzZSB7XG4gICAgc2lkZWJhck1lbnUuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJzsgICAgICAvLyBIaWRlXG4gICAgbWVudUV4dGVuZGVkID0gMTtcbiAgfVxufVxuXG5mdW5jdGlvbiBub3RpZmljYXRpb25GZWVkYmFjayhub3RpZmljYXRpb25fbWVzc2FnZSl7XG4gIHdpbmRvdy5sb2NhdGlvbiA9IFwiI29Ob3RlNFwiO1xuICBub3RlTWVzc2FnZS5pbm5lckhUTUwgPSBub3RpZmljYXRpb25fbWVzc2FnZTtcbiAgc2V0VGltZW91dChmdW5jdGlvbigpIHt3aW5kb3cubG9jYXRpb24gPSBcIiNvTm90ZVwiO30sIDI1MDApO1xufVxuXG4vLyBHZXQgdGhlIG1vZGFsXG52YXIgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXlNb2RhbCcpO1xuXG4vLyBHZXQgdGhlIDxzcGFuPiBlbGVtZW50IHRoYXQgY2xvc2VzIHRoZSBtb2RhbFxudmFyIHNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2xvc2VcIilbMF07XG5cbi8vIFdoZW4gdGhlIHVzZXIgY2xpY2tzIHRoZSBidXR0b24sIG9wZW4gdGhlIG1vZGFsXG5idG5Mb2FkWXRWaWRlby5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG59O1xuXG4vLyBXaGVuIHRoZSB1c2VyIGNsaWNrcyBvbiA8c3Bhbj4gKHgpLCBjbG9zZSB0aGUgbW9kYWxcbnNwYW4ub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG59O1xuXG4vLyBXaGVuIHRoZSB1c2VyIGNsaWNrcyBhbnl3aGVyZSBvdXRzaWRlIG9mIHRoZSBtb2RhbCwgY2xvc2UgaXRcbndpbmRvdy5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgaWYgKGV2ZW50LnRhcmdldCA9PSBtb2RhbCkge1xuICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfVxufTtcblxuXG5cbmZ1bmN0aW9uIGxvYWR2MSgpe1xuXG59XG5cbmZ1bmN0aW9uIGxvYWR2Migpe1xuXG59XG5cblxuXG5cbiJdfQ==