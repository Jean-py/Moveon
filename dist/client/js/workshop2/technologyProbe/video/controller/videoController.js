"use strict";

var video = document.getElementById("videoEAT");
var timerRepetition;
var speedrate = 1;
var videoSlider = document.getElementById("videoSlider");
// Buttons
var playButton = document.getElementById("play-pause");
var muteButton = document.getElementById("mute");
var timerVideo = document.getElementById("timerVideo");
// Sliders
var knobMin = document.getElementById("range-slider_handle-min");
var rangeSliderTrack = document.getElementById("rangeSliderTrack");
var wrapperCommandAndRangeid = document.getElementById("wrapperCommandAndRangeid");

var rangeSliderWrapper = document.getElementById("range-slider-wrapper");
var divCardBoard = document.getElementById("divCardBoard");
var body = document.getElementsByTagName("BODY")[0];

var KNOB_WIDTH = 25;

var NUMBER_OF_TICK = parseInt(WIDTH_RANGE_SLIDER_TRACK, 10);
var VALUE_KNOB_MIN = 0;
var WIDTH_MID_KNOB_MIN = 15;
var currentValueKnob = VALUE_KNOB_MIN;
var videoDuration = "1:47";

var videoFunctionalCoreManager = new VideoFunctionalCoreManager();

knobMin.style.left = currentValueKnob + rangeSliderTrack.offsetLeft + "px";

/*---- Creation de ma propre bar de commande de lecture pour la vid√©o ----- */
// Event controller for the play/pause button
playButton.addEventListener("touchstart", function (e) {
  e.preventDefault();
  event.preventDefault();
  kill('mousedown');
  //console.log("appel l36 playPausecallback videoController" );
  // videoFunctionalCoreManager.execute(new PlayPauseCommand());
  playPausecallback(e);
  //playPausecallback(e);
}, {
  passive: true
});
//Click on the video trigger play and pause
video.addEventListener("touchend", function (e) {
  //console.log("appel l42 playPausecallback videoCOntroller");
  //videoFunctionalCoreManager.execute(new PlayPauseCommand());
  playPausecallback(e);
});
muteButton.addEventListener("touchend", function (e) {
  videoFunctionalCoreManager.execute(new MuteButtonCommand());
});
rangeSliderWrapper.addEventListener("touchend", function (e) {
  //play();
  //console.log("appel l50 playPausecallback video Controller");
  //videoFunctionalCoreManager.execute(new PlayPauseCommand());
  playPausecallback(e);
});

//Mouse event controller
playButton.addEventListener("mousedown", function (e) {

  //console.log("appel playPause function playButton.addEventListener(mousedown in l56 videocontroller") ;
  //videoFunctionalCoreManager.execute(new PlayPauseCommand());
  playPausecallback(e);

  e.preventDefault();
  // event.preventDefault();
});
muteButton.addEventListener("mousedown", function (e) {
  videoFunctionalCoreManager.execute(new MuteButtonCommand());
});
video.addEventListener("mousedown", function (e) {
  //console.log("appel playPause function video.addEventListener(mousedown in l62 videocontroller") ;
  //videoFunctionalCoreManager.execute(new PlayPauseCommand());
  playPausecallback(e);
});

// Event controller for the seek bar
videoSlider.addEventListener("change", function (e) {
  updateTimerVideo();
});

// Update the seek bar as the video plays
video.addEventListener("timeupdate", function () {
  // Update the slider value
  if (!video.paused) {
    currentValueKnob = NUMBER_OF_TICK / video.duration * video.currentTime + rangeSliderTrack.offsetLeft;
    // knobMin.style.left = currentValueKnob-(KNOB_WIDTH/2)+ "px" ;
    knobMin.style.left = currentValueKnob - KNOB_WIDTH / 2 + "px";
  }
  //videoSlider.value = (NUMBER_OF_TICK / video.duration) * video.currentTime;
  updateTimerVideo();
}, false);

//Function to update the knob
var updateKnobAndVideoWrapper = function updateKnobAndVideoWrapper(e) {
  if (e.type === "mouseup" || e.type === "mousedown") {
    videoFunctionalCoreManager.execute(new updateKnobAndVideoComputerCommand(e));

    //updateKnobAndVideoComputer(e);
  } else if (e.type === "mousemove" || e.type === "[object MouseEvent]") {

    updateKnobAndVideoComputer(e);
  } else {
    updateKnobAndVideo(e);
  }
  // video.play();
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZGVvQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJ2aWRlbyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ0aW1lclJlcGV0aXRpb24iLCJzcGVlZHJhdGUiLCJ2aWRlb1NsaWRlciIsInBsYXlCdXR0b24iLCJtdXRlQnV0dG9uIiwidGltZXJWaWRlbyIsImtub2JNaW4iLCJyYW5nZVNsaWRlclRyYWNrIiwid3JhcHBlckNvbW1hbmRBbmRSYW5nZWlkIiwicmFuZ2VTbGlkZXJXcmFwcGVyIiwiZGl2Q2FyZEJvYXJkIiwiYm9keSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiS05PQl9XSURUSCIsIk5VTUJFUl9PRl9USUNLIiwicGFyc2VJbnQiLCJXSURUSF9SQU5HRV9TTElERVJfVFJBQ0siLCJWQUxVRV9LTk9CX01JTiIsIldJRFRIX01JRF9LTk9CX01JTiIsImN1cnJlbnRWYWx1ZUtub2IiLCJ2aWRlb0R1cmF0aW9uIiwidmlkZW9GdW5jdGlvbmFsQ29yZU1hbmFnZXIiLCJWaWRlb0Z1bmN0aW9uYWxDb3JlTWFuYWdlciIsInN0eWxlIiwibGVmdCIsIm9mZnNldExlZnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZXZlbnQiLCJraWxsIiwicGxheVBhdXNlY2FsbGJhY2siLCJwYXNzaXZlIiwiZXhlY3V0ZSIsIk11dGVCdXR0b25Db21tYW5kIiwidXBkYXRlVGltZXJWaWRlbyIsInBhdXNlZCIsImR1cmF0aW9uIiwiY3VycmVudFRpbWUiLCJ1cGRhdGVLbm9iQW5kVmlkZW9XcmFwcGVyIiwidHlwZSIsInVwZGF0ZUtub2JBbmRWaWRlb0NvbXB1dGVyQ29tbWFuZCIsInVwZGF0ZUtub2JBbmRWaWRlb0NvbXB1dGVyIiwidXBkYXRlS25vYkFuZFZpZGVvIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUlBLFFBQVFDLFNBQVNDLGNBQVQsQ0FBd0IsVUFBeEIsQ0FBWjtBQUNBLElBQUlDLGVBQUo7QUFDQSxJQUFJQyxZ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QixNQUFNd0MsUUFBeEIsR0FBb0N4QyxNQUFNeUMsV0FBM0MsR0FBMEQvQixpQkFBaUJrQixVQUEvRjtBQUNBO0FBQ0FuQixZQUFRaUIsS0FBUixDQUFjQyxJQUFkLEdBQXFCTCxtQkFBb0JOLGFBQWEsQ0FBakMsR0FBc0MsSUFBM0Q7QUFDRDtBQUNEO0FBQ0FzQjtBQUNELENBVEQsRUFTRyxLQVRIOztBQWFBO0FBQ0EsSUFBSUksNEJBQTRCLFNBQTVCQSx5QkFBNEIsQ0FBU1osQ0FBVCxFQUFZO0FBQzFDLE1BQUlBLEVBQUVhLElBQUYsS0FBVyxTQUFYLElBQXdCYixFQUFFYSxJQUFGLEtBQVcsV0FBdkMsRUFBb0Q7QUFDbERuQiwrQkFBMkJZLE9BQTNCLENBQW1DLElBQUlRLGlDQUFKLENBQXNDZCxDQUF0QyxDQUFuQzs7QUFFQTtBQUNELEdBSkQsTUFJTyxJQUFHQSxFQUFFYSxJQUFGLEtBQVcsV0FBWCxJQUEwQmIsRUFBRWEsSUFBRixLQUFXLHFCQUF4QyxFQUErRDs7QUFFcEVFLCtCQUEyQmYsQ0FBM0I7QUFDRCxHQUhNLE1BR0E7QUFDTGdCLHVCQUFtQmhCLENBQW5CO0FBQ0Q7QUFDRDtBQUNELENBWkQiLCJmaWxlIjoidmlkZW9Db250cm9sbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb0VBVFwiKTtcbnZhciB0aW1lclJlcGV0aXRpb247XG52YXIgc3BlZWRyYXRlID0gMTtcbnZhciB2aWRlb1NsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9TbGlkZXJcIik7XG4vLyBCdXR0b25zXG52YXIgcGxheUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheS1wYXVzZVwiKTtcbnZhciBtdXRlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtdXRlXCIpO1xudmFyIHRpbWVyVmlkZW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpbWVyVmlkZW9cIik7XG4vLyBTbGlkZXJzXG52YXIga25vYk1pbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmFuZ2Utc2xpZGVyX2hhbmRsZS1taW5cIik7XG52YXIgcmFuZ2VTbGlkZXJUcmFjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmFuZ2VTbGlkZXJUcmFja1wiKTtcbnZhciB3cmFwcGVyQ29tbWFuZEFuZFJhbmdlaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndyYXBwZXJDb21tYW5kQW5kUmFuZ2VpZFwiKTtcblxudmFyIHJhbmdlU2xpZGVyV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmFuZ2Utc2xpZGVyLXdyYXBwZXJcIik7XG52YXIgZGl2Q2FyZEJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkaXZDYXJkQm9hcmRcIik7XG52YXIgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiQk9EWVwiKVswXTtcblxuXG52YXIgS05PQl9XSURUSCA9IDI1O1xuXG52YXIgTlVNQkVSX09GX1RJQ0sgPSBwYXJzZUludChXSURUSF9SQU5HRV9TTElERVJfVFJBQ0ssIDEwKTtcbnZhciBWQUxVRV9LTk9CX01JTiA9IDA7XG52YXIgV0lEVEhfTUlEX0tOT0JfTUlOID0gMTU7XG52YXIgY3VycmVudFZhbHVlS25vYiA9IFZBTFVFX0tOT0JfTUlOO1xudmFyIHZpZGVvRHVyYXRpb24gPSBcIjE6NDdcIjtcblxudmFyIHZpZGVvRnVuY3Rpb25hbENvcmVNYW5hZ2VyID0gbmV3IFZpZGVvRnVuY3Rpb25hbENvcmVNYW5hZ2VyKCk7XG5cbmtub2JNaW4uc3R5bGUubGVmdCA9IChjdXJyZW50VmFsdWVLbm9iICsgcmFuZ2VTbGlkZXJUcmFjay5vZmZzZXRMZWZ0KSArIFwicHhcIjtcblxuLyotLS0tIENyZWF0aW9uIGRlIG1hIHByb3ByZSBiYXIgZGUgY29tbWFuZGUgZGUgbGVjdHVyZSBwb3VyIGxhIHZpZMOpbyAtLS0tLSAqL1xuLy8gRXZlbnQgY29udHJvbGxlciBmb3IgdGhlIHBsYXkvcGF1c2UgYnV0dG9uXG5wbGF5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGZ1bmN0aW9uKGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBraWxsKCdtb3VzZWRvd24nKTtcbiAgLy9jb25zb2xlLmxvZyhcImFwcGVsIGwzNiBwbGF5UGF1c2VjYWxsYmFjayB2aWRlb0NvbnRyb2xsZXJcIiApO1xuIC8vIHZpZGVvRnVuY3Rpb25hbENvcmVNYW5hZ2VyLmV4ZWN1dGUobmV3IFBsYXlQYXVzZUNvbW1hbmQoKSk7XG4gIHBsYXlQYXVzZWNhbGxiYWNrKGUpO1xuICAvL3BsYXlQYXVzZWNhbGxiYWNrKGUpO1xufSwge1xuICBwYXNzaXZlOiB0cnVlXG59KTtcbi8vQ2xpY2sgb24gdGhlIHZpZGVvIHRyaWdnZXIgcGxheSBhbmQgcGF1c2VcbnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBmdW5jdGlvbihlKSB7XG4gIC8vY29uc29sZS5sb2coXCJhcHBlbCBsNDIgcGxheVBhdXNlY2FsbGJhY2sgdmlkZW9DT250cm9sbGVyXCIpO1xuICAvL3ZpZGVvRnVuY3Rpb25hbENvcmVNYW5hZ2VyLmV4ZWN1dGUobmV3IFBsYXlQYXVzZUNvbW1hbmQoKSk7XG4gIHBsYXlQYXVzZWNhbGxiYWNrKGUpO1xufSk7XG5tdXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBmdW5jdGlvbihlKSB7XG4gIHZpZGVvRnVuY3Rpb25hbENvcmVNYW5hZ2VyLmV4ZWN1dGUobmV3IE11dGVCdXR0b25Db21tYW5kKCkpO1xuICBcbn0pO1xucmFuZ2VTbGlkZXJXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBmdW5jdGlvbihlKSB7XG4gIC8vcGxheSgpO1xuICAvL2NvbnNvbGUubG9nKFwiYXBwZWwgbDUwIHBsYXlQYXVzZWNhbGxiYWNrIHZpZGVvIENvbnRyb2xsZXJcIik7XG4gIC8vdmlkZW9GdW5jdGlvbmFsQ29yZU1hbmFnZXIuZXhlY3V0ZShuZXcgUGxheVBhdXNlQ29tbWFuZCgpKTtcbiAgcGxheVBhdXNlY2FsbGJhY2soZSk7XG4gIFxufSk7XG5cbi8vTW91c2UgZXZlbnQgY29udHJvbGxlclxucGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgXG4gIC8vY29uc29sZS5sb2coXCJhcHBlbCBwbGF5UGF1c2UgZnVuY3Rpb24gcGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKG1vdXNlZG93biBpbiBsNTYgdmlkZW9jb250cm9sbGVyXCIpIDtcbiAgLy92aWRlb0Z1bmN0aW9uYWxDb3JlTWFuYWdlci5leGVjdXRlKG5ldyBQbGF5UGF1c2VDb21tYW5kKCkpO1xuICBwbGF5UGF1c2VjYWxsYmFjayhlKTtcbiAgXG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcbn0pO1xubXV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgdmlkZW9GdW5jdGlvbmFsQ29yZU1hbmFnZXIuZXhlY3V0ZShuZXcgTXV0ZUJ1dHRvbkNvbW1hbmQoKSk7XG4gIFxufSk7XG52aWRlby5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgLy9jb25zb2xlLmxvZyhcImFwcGVsIHBsYXlQYXVzZSBmdW5jdGlvbiB2aWRlby5hZGRFdmVudExpc3RlbmVyKG1vdXNlZG93biBpbiBsNjIgdmlkZW9jb250cm9sbGVyXCIpIDtcbiAgLy92aWRlb0Z1bmN0aW9uYWxDb3JlTWFuYWdlci5leGVjdXRlKG5ldyBQbGF5UGF1c2VDb21tYW5kKCkpO1xuICBwbGF5UGF1c2VjYWxsYmFjayhlKTtcbiAgXG59KTtcblxuXG4vLyBFdmVudCBjb250cm9sbGVyIGZvciB0aGUgc2VlayBiYXJcbnZpZGVvU2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24oZSkge1xuICB1cGRhdGVUaW1lclZpZGVvKCk7XG59KTtcblxuXG4vLyBVcGRhdGUgdGhlIHNlZWsgYmFyIGFzIHRoZSB2aWRlbyBwbGF5c1xudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcInRpbWV1cGRhdGVcIiwgZnVuY3Rpb24oKSB7XG4gIC8vIFVwZGF0ZSB0aGUgc2xpZGVyIHZhbHVlXG4gIGlmICghdmlkZW8ucGF1c2VkKSB7XG4gICAgY3VycmVudFZhbHVlS25vYiA9ICgoKE5VTUJFUl9PRl9USUNLIC8gdmlkZW8uZHVyYXRpb24pICogdmlkZW8uY3VycmVudFRpbWUpICsgcmFuZ2VTbGlkZXJUcmFjay5vZmZzZXRMZWZ0KTtcbiAgICAvLyBrbm9iTWluLnN0eWxlLmxlZnQgPSBjdXJyZW50VmFsdWVLbm9iLShLTk9CX1dJRFRILzIpKyBcInB4XCIgO1xuICAgIGtub2JNaW4uc3R5bGUubGVmdCA9IGN1cnJlbnRWYWx1ZUtub2IgLSAoS05PQl9XSURUSCAvIDIpICsgXCJweFwiO1xuICB9XG4gIC8vdmlkZW9TbGlkZXIudmFsdWUgPSAoTlVNQkVSX09GX1RJQ0sgLyB2aWRlby5kdXJhdGlvbikgKiB2aWRlby5jdXJyZW50VGltZTtcbiAgdXBkYXRlVGltZXJWaWRlbygpO1xufSwgZmFsc2UpO1xuXG5cblxuLy9GdW5jdGlvbiB0byB1cGRhdGUgdGhlIGtub2JcbnZhciB1cGRhdGVLbm9iQW5kVmlkZW9XcmFwcGVyID0gZnVuY3Rpb24oZSkge1xuICBpZiAoZS50eXBlID09PSBcIm1vdXNldXBcIiB8fCBlLnR5cGUgPT09IFwibW91c2Vkb3duXCIgKXtcbiAgICB2aWRlb0Z1bmN0aW9uYWxDb3JlTWFuYWdlci5leGVjdXRlKG5ldyB1cGRhdGVLbm9iQW5kVmlkZW9Db21wdXRlckNvbW1hbmQoZSkpO1xuICAgIFxuICAgIC8vdXBkYXRlS25vYkFuZFZpZGVvQ29tcHV0ZXIoZSk7XG4gIH0gZWxzZSBpZihlLnR5cGUgPT09IFwibW91c2Vtb3ZlXCIgfHwgZS50eXBlID09PSBcIltvYmplY3QgTW91c2VFdmVudF1cIikge1xuICBcbiAgICB1cGRhdGVLbm9iQW5kVmlkZW9Db21wdXRlcihlKTtcbiAgfSBlbHNlIHtcbiAgICB1cGRhdGVLbm9iQW5kVmlkZW8oZSk7XG4gIH1cbiAgLy8gdmlkZW8ucGxheSgpO1xufTtcblxuIl19