"use strict";

var video = document.getElementById("videoEAT");
var timerRepetition;
var speedrate = 1;
var videoSlider = document.getElementById("videoSlider");
// Buttons
var playButton = document.getElementById("play-pause");
var muteButton = document.getElementById("mute");
var timerVideo = document.getElementById("timerVideo");
// Sliders
var knobMin = document.getElementById("range-slider_handle-min");
var rangeSliderTrack = document.getElementById("rangeSliderTrack");
var wrapperCommandAndRangeid = document.getElementById("wrapperCommandAndRangeid");

var rangeSliderWrapper = document.getElementById("range-slider-wrapper");
var divCardBoard = document.getElementById("divCardBoard");
var body = document.getElementsByTagName("BODY")[0];

var KNOB_WIDTH = 25;

var NUMBER_OF_TICK = parseInt(WIDTH_RANGE_SLIDER_TRACK, 10);
var VALUE_KNOB_MIN = 0;
var WIDTH_MID_KNOB_MIN = 15;
var currentValueKnob = VALUE_KNOB_MIN;
var videoDuration = "1:47";

knobMin.style.left = currentValueKnob + rangeSliderTrack.offsetLeft + "px";

/*---- Creation de ma propre bar de commande de lecture pour la vid√©o ----- */
// Event controller for the play/pause button
playButton.addEventListener("touchstart", function (e) {
  /*e.preventDefault();
  event.preventDefault();
  //kill('mousedown');
  //console.log("appel l36 playPausecallback videoController" );
  // videoFunctionalCoreManager.execute(new PlayPauseCommand());
  playPausecallback(e);
  //playPausecallback(e);*/
}, {
  passive: true
});

//Click on the video trigger play and pause
video.addEventListener("touchend", function (e) {
  //console.log("appel l42 playPausecallback videoCOntroller");
  //videoFunctionalCoreManager.execute(new PlayPauseCommand());
  e.preventDefault();
  Player.playPausecallback(e);
});

muteButton.addEventListener("touchend", function (e) {
  e.preventDefault();
  videoFunctionalCoreManager.execute(new MuteButtonCommand());
});
rangeSliderWrapper.addEventListener("touchend", function (e) {
  e.preventDefault();
  Player.playPausecallback(e);
});

//Mouse event controller
playButton.addEventListener("mousedown", function (e) {
  //console.log("appel playPause function playButton.addEventListener(mousedown in l56 videocontroller") ;
  //videoFunctionalCoreManager.execute(new PlayPauseCommand());
  Player.playPausecallback();
  // event.preventDefault();
});
muteButton.addEventListener("mousedown", function (e) {
  videoFunctionalCoreManager.execute(new MuteButtonCommand());
});
video.addEventListener("mousedown", function (e) {
  //console.log("appel playPause function video.addEventListener(mousedown in l62 videocontroller") ;
  //videoFunctionalCoreManager.execute(new PlayPauseCommand());
  Player.playPausecallback();
});

// Event controller for the seek bar
videoSlider.addEventListener("change", function (e) {
  Player.updateTimerVideo();
});

// Update the seek bar as the video plays
video.addEventListener("timeupdate", function () {
  // Update the slider value
  if (!video.paused) {
    currentValueKnob = NUMBER_OF_TICK / video.duration * video.currentTime + rangeSliderTrack.offsetLeft;
    // knobMin.style.left = currentValueKnob-(KNOB_WIDTH/2)+ "px" ;
    knobMin.style.left = currentValueKnob - KNOB_WIDTH / 2 + "px";
  }
  //videoSlider.value = (NUMBER_OF_TICK / video.duration) * video.currentTime;
  Player.updateTimerVideo();
}, false);

//Function to update the knob
var updateKnobAndVideoWrapper = function updateKnobAndVideoWrapper(e) {
  if (e.type === "mouseup" || e.type === "mousedown") {
    videoFunctionalCoreManager.execute(new updateKnobAndVideoComputerCommand(e));

    //updateKnobAndVideoComputer(e);
  } else if (e.type === "mousemove" || e.type === "[object MouseEvent]") {

    updateKnobAndVideoComputer(e);
  } else {
    updateKnobAndVideo(e);
  }
  // video.play();
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZGVvQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJ2aWRlbyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ0aW1lclJlcGV0aXRpb24iLCJzcGVlZHJhdGUiLCJ2aWRlb1NsaWRlciIsInBsYXlCdXR0b24iLCJtdXRlQnV0dG9uIiwidGltZXJWaWRlbyIsImtub2JNaW4iLCJyYW5nZVNsaWRlclRyYWNrIiwid3JhcHBlckNvbW1hbmRBbmRSYW5nZWlkIiwicmFuZ2VTbGlkZXJXcmFwcGVyIiwiZGl2Q2FyZEJvYXJkIiwiYm9keSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiS05PQl9XSURUSCIsIk5VTUJFUl9PRl9USUNLIiwicGFyc2VJbnQiLCJXSURUSF9SQU5HRV9TTElERVJfVFJBQ0siLCJWQUxVRV9LTk9CX01JTiIsIldJRFRIX01JRF9LTk9CX01JTiIsImN1cnJlbnRWYWx1ZUtub2IiLCJ2aWRlb0R1cmF0aW9uIiwic3R5bGUiLCJsZWZ0Iiwib2Zmc2V0TGVmdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicGFzc2l2ZSIsInByZXZlbnREZWZhdWx0IiwiUGxheWVyIiwicGxheVBhdXNlY2FsbGJhY2siLCJ2aWRlb0Z1bmN0aW9uYWxDb3JlTWFuYWdlciIsImV4ZWN1dGUiLCJNdXRlQnV0dG9uQ29tbWFuZCIsInVwZGF0ZVRpbWVyVmlkZW8iLCJwYXVzZWQiLCJkdXJhdGlvbiIsImN1cnJlbnRUaW1lIiwidXBkYXRlS25vYkFuZFZpZGVvV3JhcHBlciIsInR5cGUiLCJ1cGRhdGVLbm9iQW5kVmlkZW9Db21wdXRlckNvbW1hbmQiLCJ1cGRhdGVLbm9iQW5kVmlkZW9Db21wdXRlciIsInVwZGF0ZUtub2JBbmRWaWRlbyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJQSxRQUFRQyxTQUFTQyxjQUFULENBQXdCLFVBQXhCLENBQVo7QUFDQSxJQUFJQyxlQUFKO0FBQ0EsSUFBSUMsWUFBWSxDQUFoQjtBQUNBLElBQUlDLGNBQWNKLFNBQVNDLGNBQVQsQ0FBd0IsYUFBeEIsQ0FBbEI7QUFDQTtBQUNBLElBQUlJLGFBQWFMLFNBQVNDLGNBQVQsQ0FBd0IsWUFBeEIsQ0FBakI7QUFDQSxJQUFJSyxhQUFhTixTQUFTQyxjQUFULENBQXdCLE1BQXhCLENBQWpCO0FBQ0EsSUFBSU0sYUFBYVAsU0FBU0MsY0FBVCxDQUF3QixZQUF4QixDQUFqQjtBQUNBO0FBQ0EsSUFBSU8sVUFBVVIsU0FBU0MsY0FBVCxDQUF3Qix5QkFBeEIsQ0FBZDtBQUNBLElBQUlRLG1CQUFtQlQsU0FBU0MsY0FBVCxDQUF3QixrQkFBeEIsQ0FBdkI7QUFDQSxJQUFJUywyQkFBMkJWLFNBQVNDLGNBQVQsQ0FBd0IsMEJBQXhCLENBQS9COztBQUVBLElBQUlVLHFCQUFxQlgsU0FBU0MsY0FBVCxDQUF3QixzQkFBeEIsQ0FBekI7QUFDQSxJQUFJVyxlQUFlWixTQUFTQyxjQUFULENBQXdCLGNBQXhCLENBQW5CO0FBQ0EsSUFBSVksT0FBT2IsU0FBU2Msb0JBQVQsQ0FBOEIsTUFBOUIsRUFBc0MsQ0FBdEMsQ0FBWDs7QUFHQSxJQUFJQyxhQUFhLEVBQWpCOztBQUVBLElBQUlDLGlCQUFpQkMsU0FBU0Msd0JBQVQsRUFBbUMsRUFBbkMsQ0FBckI7QUFDQSxJQUFJQyxpQkFBaUIsQ0FBckI7QUFDQSxJQUFJQyxxQkFBcUIsRUFBekI7QUFDQSxJQUFJQyxtQkFBbUJGLGNBQXZCO0FBQ0EsSUFBSUcsZ0JBQWdCLE1BQXBCOztBQUdBZCxRQUFRZSxLQUFSLENBQWNDLElBQWQsR0FBc0JILG1CQUFtQlosaUJBQWlCZ0IsVUFBckMsR0FBbUQsSUFBeEU7O0FBRUE7QUFDQTtBQUNBcEIsV0FBV3FCLGdCQUFYLENBQTRCLFlBQTVCLEVBQTBDLFVBQVNDLENBQVQsRUFBWTtBQUNwRDs7Ozs7OztBQU9ELENBUkQsRUFRRztBQUNEQyxXQUFTO0FBRFIsQ0FSSDs7QUFhQTtBQUNBN0IsTUFBTTJCLGdCQUFOLENBQXVCLFVBQXZCLEVBQW1DLFVBQVNDLENBQVQsRUFBWTtBQUM3QztBQUNBO0FBQ0FBLElBQUVFLGNBQUY7QUFDQUMsU0FBT0MsaUJBQVAsQ0FBeUJKLENBQXpCO0FBQ0QsQ0FMRDs7QUFPQXJCLFdBQVdvQixnQkFBWCxDQUE0QixVQUE1QixFQUF3QyxVQUFTQyxDQUFULEVBQVk7QUFDbERBLElBQUVFLGNBQUY7QUFDQUcsNkJBQTJCQyxPQUEzQixDQUFtQyxJQUFJQyxpQkFBSixFQUFuQztBQUVELENBSkQ7QUFLQXZCLG1CQUFtQmUsZ0JBQW5CLENBQW9DLFVBQXBDLEVBQWdELFVBQVNDLENBQVQsRUFBWTtBQUMxREEsSUFBRUUsY0FBRjtBQUNBQyxTQUFPQyxpQkFBUCxDQUF5QkosQ0FBekI7QUFFRCxDQUpEOztBQU1BO0FBQ0F0QixXQUFXcUIsZ0JBQVgsQ0FBNEIsV0FBNUIsRUFBeUMsVUFBU0MsQ0FBVCxFQUFZO0FBQ25EO0FBQ0E7QUFDQUcsU0FBT0MsaUJBQVA7QUFDQTtBQUNELENBTEQ7QUFNQXpCLFdBQVdvQixnQkFBWCxDQUE0QixXQUE1QixFQUF5QyxVQUFTQyxDQUFULEVBQVk7QUFDbkRLLDZCQUEyQkMsT0FBM0IsQ0FBbUMsSUFBSUMsaUJBQUosRUFBbkM7QUFFRCxDQUhEO0FBSUFuQyxNQUFNMkIsZ0JBQU4sQ0FBdUIsV0FBdkIsRUFBb0MsVUFBU0MsQ0FBVCxFQUFZO0FBQzlDO0FBQ0E7QUFDQUcsU0FBT0MsaUJBQVA7QUFFRCxDQUxEOztBQVVBO0FBQ0EzQixZQUFZc0IsZ0JBQVosQ0FBNkIsUUFBN0IsRUFBdUMsVUFBU0MsQ0FBVCxFQUFZO0FBQ2pERyxTQUFPSyxnQkFBUDtBQUNELENBRkQ7O0FBS0E7QUFDQXBDLE1BQU0yQixnQkFBTixDQUF1QixZQUF2QixFQUFxQyxZQUFXO0FBQzlDO0FBQ0EsTUFBSSxDQUFDM0IsTUFBTXFDLE1BQVgsRUFBbUI7QUFDakJmLHVCQUFzQkwsaUJBQWlCakIsTUFBTXNDLFFBQXhCLEdBQW9DdEMsTUFBTXVDLFdBQTNDLEdBQTBEN0IsaUJBQWlCZ0IsVUFBL0Y7QUFDQTtBQUNBakIsWUFBUWUsS0FBUixDQUFjQyxJQUFkLEdBQXFCSCxtQkFBb0JOLGFBQWEsQ0FBakMsR0FBc0MsSUFBM0Q7QUFDRDtBQUNEO0FBQ0FlLFNBQU9LLGdCQUFQO0FBQ0QsQ0FURCxFQVNHLEtBVEg7O0FBYUE7QUFDQSxJQUFJSSw0QkFBNEIsU0FBNUJBLHlCQUE0QixDQUFTWixDQUFULEVBQVk7QUFDMUMsTUFBSUEsRUFBRWEsSUFBRixLQUFXLFNBQVgsSUFBd0JiLEVBQUVhLElBQUYsS0FBVyxXQUF2QyxFQUFvRDtBQUNsRFIsK0JBQTJCQyxPQUEzQixDQUFtQyxJQUFJUSxpQ0FBSixDQUFzQ2QsQ0FBdEMsQ0FBbkM7O0FBRUE7QUFDRCxHQUpELE1BSU8sSUFBR0EsRUFBRWEsSUFBRixLQUFXLFdBQVgsSUFBMEJiLEVBQUVhLElBQUYsS0FBVyxxQkFBeEMsRUFBK0Q7O0FBRXBFRSwrQkFBMkJmLENBQTNCO0FBQ0QsR0FITSxNQUdBO0FBQ0xnQix1QkFBbUJoQixDQUFuQjtBQUNEO0FBQ0Q7QUFDRCxDQVpEIiwiZmlsZSI6InZpZGVvQ29udHJvbGxlci5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciB2aWRlbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9FQVRcIik7XG52YXIgdGltZXJSZXBldGl0aW9uO1xudmFyIHNwZWVkcmF0ZSA9IDE7XG52YXIgdmlkZW9TbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvU2xpZGVyXCIpO1xuLy8gQnV0dG9uc1xudmFyIHBsYXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXktcGF1c2VcIik7XG52YXIgbXV0ZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXV0ZVwiKTtcbnZhciB0aW1lclZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aW1lclZpZGVvXCIpO1xuLy8gU2xpZGVyc1xudmFyIGtub2JNaW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJhbmdlLXNsaWRlcl9oYW5kbGUtbWluXCIpO1xudmFyIHJhbmdlU2xpZGVyVHJhY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJhbmdlU2xpZGVyVHJhY2tcIik7XG52YXIgd3JhcHBlckNvbW1hbmRBbmRSYW5nZWlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3cmFwcGVyQ29tbWFuZEFuZFJhbmdlaWRcIik7XG5cbnZhciByYW5nZVNsaWRlcldyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJhbmdlLXNsaWRlci13cmFwcGVyXCIpO1xudmFyIGRpdkNhcmRCb2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGl2Q2FyZEJvYXJkXCIpO1xudmFyIGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcIkJPRFlcIilbMF07XG5cblxudmFyIEtOT0JfV0lEVEggPSAyNTtcblxudmFyIE5VTUJFUl9PRl9USUNLID0gcGFyc2VJbnQoV0lEVEhfUkFOR0VfU0xJREVSX1RSQUNLLCAxMCk7XG52YXIgVkFMVUVfS05PQl9NSU4gPSAwO1xudmFyIFdJRFRIX01JRF9LTk9CX01JTiA9IDE1O1xudmFyIGN1cnJlbnRWYWx1ZUtub2IgPSBWQUxVRV9LTk9CX01JTjtcbnZhciB2aWRlb0R1cmF0aW9uID0gXCIxOjQ3XCI7XG5cblxua25vYk1pbi5zdHlsZS5sZWZ0ID0gKGN1cnJlbnRWYWx1ZUtub2IgKyByYW5nZVNsaWRlclRyYWNrLm9mZnNldExlZnQpICsgXCJweFwiO1xuXG4vKi0tLS0gQ3JlYXRpb24gZGUgbWEgcHJvcHJlIGJhciBkZSBjb21tYW5kZSBkZSBsZWN0dXJlIHBvdXIgbGEgdmlkw6lvIC0tLS0tICovXG4vLyBFdmVudCBjb250cm9sbGVyIGZvciB0aGUgcGxheS9wYXVzZSBidXR0b25cbnBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgZnVuY3Rpb24oZSkge1xuICAvKmUucHJldmVudERlZmF1bHQoKTtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgLy9raWxsKCdtb3VzZWRvd24nKTtcbiAgLy9jb25zb2xlLmxvZyhcImFwcGVsIGwzNiBwbGF5UGF1c2VjYWxsYmFjayB2aWRlb0NvbnRyb2xsZXJcIiApO1xuIC8vIHZpZGVvRnVuY3Rpb25hbENvcmVNYW5hZ2VyLmV4ZWN1dGUobmV3IFBsYXlQYXVzZUNvbW1hbmQoKSk7XG4gIHBsYXlQYXVzZWNhbGxiYWNrKGUpO1xuICAvL3BsYXlQYXVzZWNhbGxiYWNrKGUpOyovXG59LCB7XG4gIHBhc3NpdmU6IHRydWVcbn0pO1xuXG5cbi8vQ2xpY2sgb24gdGhlIHZpZGVvIHRyaWdnZXIgcGxheSBhbmQgcGF1c2VcbnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBmdW5jdGlvbihlKSB7XG4gIC8vY29uc29sZS5sb2coXCJhcHBlbCBsNDIgcGxheVBhdXNlY2FsbGJhY2sgdmlkZW9DT250cm9sbGVyXCIpO1xuICAvL3ZpZGVvRnVuY3Rpb25hbENvcmVNYW5hZ2VyLmV4ZWN1dGUobmV3IFBsYXlQYXVzZUNvbW1hbmQoKSk7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgUGxheWVyLnBsYXlQYXVzZWNhbGxiYWNrKGUpO1xufSk7XG5cbm11dGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIGZ1bmN0aW9uKGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB2aWRlb0Z1bmN0aW9uYWxDb3JlTWFuYWdlci5leGVjdXRlKG5ldyBNdXRlQnV0dG9uQ29tbWFuZCgpKTtcbiAgXG59KTtcbnJhbmdlU2xpZGVyV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgZnVuY3Rpb24oZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIFBsYXllci5wbGF5UGF1c2VjYWxsYmFjayhlKTtcbiAgXG59KTtcblxuLy9Nb3VzZSBldmVudCBjb250cm9sbGVyXG5wbGF5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24oZSkge1xuICAvL2NvbnNvbGUubG9nKFwiYXBwZWwgcGxheVBhdXNlIGZ1bmN0aW9uIHBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihtb3VzZWRvd24gaW4gbDU2IHZpZGVvY29udHJvbGxlclwiKSA7XG4gIC8vdmlkZW9GdW5jdGlvbmFsQ29yZU1hbmFnZXIuZXhlY3V0ZShuZXcgUGxheVBhdXNlQ29tbWFuZCgpKTtcbiAgUGxheWVyLnBsYXlQYXVzZWNhbGxiYWNrKCk7XG4gIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG59KTtcbm11dGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbihlKSB7XG4gIHZpZGVvRnVuY3Rpb25hbENvcmVNYW5hZ2VyLmV4ZWN1dGUobmV3IE11dGVCdXR0b25Db21tYW5kKCkpO1xuICBcbn0pO1xudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbihlKSB7XG4gIC8vY29uc29sZS5sb2coXCJhcHBlbCBwbGF5UGF1c2UgZnVuY3Rpb24gdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihtb3VzZWRvd24gaW4gbDYyIHZpZGVvY29udHJvbGxlclwiKSA7XG4gIC8vdmlkZW9GdW5jdGlvbmFsQ29yZU1hbmFnZXIuZXhlY3V0ZShuZXcgUGxheVBhdXNlQ29tbWFuZCgpKTtcbiAgUGxheWVyLnBsYXlQYXVzZWNhbGxiYWNrKCk7XG4gIFxufSk7XG5cblxuXG5cbi8vIEV2ZW50IGNvbnRyb2xsZXIgZm9yIHRoZSBzZWVrIGJhclxudmlkZW9TbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbihlKSB7XG4gIFBsYXllci51cGRhdGVUaW1lclZpZGVvKCk7XG59KTtcblxuXG4vLyBVcGRhdGUgdGhlIHNlZWsgYmFyIGFzIHRoZSB2aWRlbyBwbGF5c1xudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcInRpbWV1cGRhdGVcIiwgZnVuY3Rpb24oKSB7XG4gIC8vIFVwZGF0ZSB0aGUgc2xpZGVyIHZhbHVlXG4gIGlmICghdmlkZW8ucGF1c2VkKSB7XG4gICAgY3VycmVudFZhbHVlS25vYiA9ICgoKE5VTUJFUl9PRl9USUNLIC8gdmlkZW8uZHVyYXRpb24pICogdmlkZW8uY3VycmVudFRpbWUpICsgcmFuZ2VTbGlkZXJUcmFjay5vZmZzZXRMZWZ0KTtcbiAgICAvLyBrbm9iTWluLnN0eWxlLmxlZnQgPSBjdXJyZW50VmFsdWVLbm9iLShLTk9CX1dJRFRILzIpKyBcInB4XCIgO1xuICAgIGtub2JNaW4uc3R5bGUubGVmdCA9IGN1cnJlbnRWYWx1ZUtub2IgLSAoS05PQl9XSURUSCAvIDIpICsgXCJweFwiO1xuICB9XG4gIC8vdmlkZW9TbGlkZXIudmFsdWUgPSAoTlVNQkVSX09GX1RJQ0sgLyB2aWRlby5kdXJhdGlvbikgKiB2aWRlby5jdXJyZW50VGltZTtcbiAgUGxheWVyLnVwZGF0ZVRpbWVyVmlkZW8oKTtcbn0sIGZhbHNlKTtcblxuXG5cbi8vRnVuY3Rpb24gdG8gdXBkYXRlIHRoZSBrbm9iXG52YXIgdXBkYXRlS25vYkFuZFZpZGVvV3JhcHBlciA9IGZ1bmN0aW9uKGUpIHtcbiAgaWYgKGUudHlwZSA9PT0gXCJtb3VzZXVwXCIgfHwgZS50eXBlID09PSBcIm1vdXNlZG93blwiICl7XG4gICAgdmlkZW9GdW5jdGlvbmFsQ29yZU1hbmFnZXIuZXhlY3V0ZShuZXcgdXBkYXRlS25vYkFuZFZpZGVvQ29tcHV0ZXJDb21tYW5kKGUpKTtcbiAgICBcbiAgICAvL3VwZGF0ZUtub2JBbmRWaWRlb0NvbXB1dGVyKGUpO1xuICB9IGVsc2UgaWYoZS50eXBlID09PSBcIm1vdXNlbW92ZVwiIHx8IGUudHlwZSA9PT0gXCJbb2JqZWN0IE1vdXNlRXZlbnRdXCIpIHtcbiAgXG4gICAgdXBkYXRlS25vYkFuZFZpZGVvQ29tcHV0ZXIoZSk7XG4gIH0gZWxzZSB7XG4gICAgdXBkYXRlS25vYkFuZFZpZGVvKGUpO1xuICB9XG4gIC8vIHZpZGVvLnBsYXkoKTtcbn07XG5cbiJdfQ==