"use strict";

var video = document.getElementById("videoEAT");
var timerRepetition;
var speedrate = 1;
var videoSlider = document.getElementById("videoSlider");
// Buttons
var playButton = document.getElementById("play-pause");
var muteButton = document.getElementById("mute");
var timerVideo = document.getElementById("timerVideo");
// Sliders
var knobMin = document.getElementById("range-slider_handle-min");
var rangeSliderTrack = document.getElementById("rangeSliderTrack");
var wrapperCommandAndRangeid = document.getElementById("wrapperCommandAndRangeid");

var rangeSliderWrapper = document.getElementById("range-slider-wrapper");
var divCardBoard = document.getElementById("divCardBoard");
var body = document.getElementsByTagName("BODY")[0];

var KNOB_WIDTH = 25;

var NUMBER_OF_TICK = parseInt(WIDTH_RANGE_SLIDER_TRACK, 10);
var VALUE_KNOB_MIN = 0;
var WIDTH_MID_KNOB_MIN = 15;
var currentValueKnob = VALUE_KNOB_MIN;
var videoDuration = "1:47";

var videoFunctionalCoreManager = new VideoFunctionalCoreManagerYT();

knobMin.style.left = currentValueKnob + rangeSliderTrack.offsetLeft + "px";

/*---- Creation de ma propre bar de commande de lecture pour la vid√©o ----- */
// Event controller for the play/pause button
playButton.addEventListener("touchstart", function (e) {
  /*e.preventDefault();
  event.preventDefault();
  //kill('mousedown');
  //console.log("appel l36 playPausecallback videoController" );
  // videoFunctionalCoreManager.execute(new PlayPauseCommand());
  playPausecallback(e);
  //playPausecallback(e);*/
}, {
  passive: true
});

//Click on the video trigger play and pause
video.addEventListener("touchend", function (e) {
  //console.log("appel l42 playPausecallback videoCOntroller");
  //videoFunctionalCoreManager.execute(new PlayPauseCommand());
  e.preventDefault();
  playPausecallback(e);
});

muteButton.addEventListener("touchend", function (e) {
  e.preventDefault();
  videoFunctionalCoreManager.execute(new MuteButtonCommand());
});
rangeSliderWrapper.addEventListener("touchend", function (e) {
  e.preventDefault();
  playPausecallback(e);
});

//Mouse event controller
playButton.addEventListener("mousedown", function (e) {
  console.log("click playButton");
  //console.log("appel playPause function playButton.addEventListener(mousedown in l56 videocontroller") ;
  //videoFunctionalCoreManager.execute(new PlayPauseCommand());
  playPausecallback(e);
  // event.preventDefault();
});
muteButton.addEventListener("mousedown", function (e) {
  videoFunctionalCoreManager.execute(new MuteButtonCommand());
});
video.addEventListener("mousedown", function (e) {
  //console.log("appel playPause function video.addEventListener(mousedown in l62 videocontroller") ;
  //videoFunctionalCoreManager.execute(new PlayPauseCommand());
  playPausecallback(e);
});

// Event controller for the seek bar
videoSlider.addEventListener("change", function (e) {
  updateTimerVideo();
});

// Update the seek bar as the video plays
video.addEventListener("timeupdate", function () {
  // Update the slider value
  if (!video.paused) {
    currentValueKnob = NUMBER_OF_TICK / video.duration * video.currentTime + rangeSliderTrack.offsetLeft;
    // knobMin.style.left = currentValueKnob-(KNOB_WIDTH/2)+ "px" ;
    knobMin.style.left = currentValueKnob - KNOB_WIDTH / 2 + "px";
  }
  //videoSlider.value = (NUMBER_OF_TICK / video.duration) * video.currentTime;
  updateTimerVideo();
}, false);

//Function to update the knob
var updateKnobAndVideoWrapper = function updateKnobAndVideoWrapper(e) {
  if (e.type === "mouseup" || e.type === "mousedown") {
    videoFunctionalCoreManager.execute(new updateKnobAndVideoComputerCommand(e));

    //updateKnobAndVideoComputer(e);
  } else if (e.type === "mousemove" || e.type === "[object MouseEvent]") {

    updateKnobAndVideoComputer(e);
  } else {
    updateKnobAndVideo(e);
  }
  // video.play();
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZGVvQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJ2aWRlbyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ0aW1lclJlcGV0aXRpb24iLCJzcGVlZHJhdGUiLCJ2aWRlb1NsaWRlciIsInBsYXlCdXR0b24iLCJtdXRlQnV0dG9uIiwidGltZXJWaWRlbyIsImtub2JNaW4iLCJyYW5nZVNsaWRlclRyYWNrIiwid3JhcHBlckNvbW1hbmRBbmRSYW5nZWlkIiwicmFuZ2VTbGlkZXJXcmFwcGVyIiwiZGl2Q2FyZEJvYXJkIiwiYm9keSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiS05PQl9XSURUSCIsIk5VTUJFUl9PRl9USUNLIiwicGFyc2VJbnQiLCJXSURUSF9SQU5HRV9TTElERVJfVFJBQ0siLCJWQUxVRV9LTk9CX01JTiIsIldJRFRIX01JRF9LTk9CX01JTiIsImN1cnJlbnRWYWx1ZUtub2IiLCJ2aWRlb0R1cmF0aW9uIiwidmlkZW9GdW5jdGlvbmFsQ29yZU1hbmFnZXIiLCJWaWRlb0Z1bmN0aW9uYWxDb3JlTWFuYWdlcllUIiwic3R5bGUiLCJsZWZ0Iiwib2Zmc2V0TGVmdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicGFzc2l2ZSIsInByZXZlbnREZWZhdWx0IiwicGxheVBhdXNlY2FsbGJhY2siLCJleGVjdXRlIiwiTXV0ZUJ1dHRvbkNvbW1hbmQiLCJjb25zb2xlIiwibG9nIiwidXBkYXRlVGltZXJWaWRlbyIsInBhdXNlZCIsImR1cmF0aW9uIiwiY3VycmVudFRpbWUiLCJ1cGRhdGVLbm9iQW5kVmlkZW9XcmFwcGVyIiwidHlwZSIsInVwZGF0ZUtub2JBbmRWaWRlb0NvbXB1dGVyQ29tbWFuZCIsInVwZGF0ZUtub2JBbmRWaWRlb0NvbXB1dGVyIiwidXBkYXRlS25vYkFuZFZpZGVvIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUlBLFFBQVFDLFNBQVNDLGNBQVQsQ0FBd0IsVUFBeEIsQ0FBWjtBQUNBLElBQUlDLGVBQUo7QUFDQSxJQUFJ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QUFNeUMsV0FBM0MsR0FBMEQvQixpQkFBaUJrQixVQUEvRjtBQUNBO0FBQ0FuQixZQUFRaUIsS0FBUixDQUFjQyxJQUFkLEdBQXFCTCxtQkFBb0JOLGFBQWEsQ0FBakMsR0FBc0MsSUFBM0Q7QUFDRDtBQUNEO0FBQ0FzQjtBQUNELENBVEQsRUFTRyxLQVRIOztBQWFBO0FBQ0EsSUFBSUksNEJBQTRCLFNBQTVCQSx5QkFBNEIsQ0FBU1osQ0FBVCxFQUFZO0FBQzFDLE1BQUlBLEVBQUVhLElBQUYsS0FBVyxTQUFYLElBQXdCYixFQUFFYSxJQUFGLEtBQVcsV0FBdkMsRUFBb0Q7QUFDbERuQiwrQkFBMkJVLE9BQTNCLENBQW1DLElBQUlVLGlDQUFKLENBQXNDZCxDQUF0QyxDQUFuQzs7QUFFQTtBQUNELEdBSkQsTUFJTyxJQUFHQSxFQUFFYSxJQUFGLEtBQVcsV0FBWCxJQUEwQmIsRUFBRWEsSUFBRixLQUFXLHFCQUF4QyxFQUErRDs7QUFFcEVFLCtCQUEyQmYsQ0FBM0I7QUFDRCxHQUhNLE1BR0E7QUFDTGdCLHVCQUFtQmhCLENBQW5CO0FBQ0Q7QUFDRDtBQUNELENBWkQiLCJmaWxlIjoidmlkZW9Db250cm9sbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb0VBVFwiKTtcbnZhciB0aW1lclJlcGV0aXRpb247XG52YXIgc3BlZWRyYXRlID0gMTtcbnZhciB2aWRlb1NsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9TbGlkZXJcIik7XG4vLyBCdXR0b25zXG52YXIgcGxheUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheS1wYXVzZVwiKTtcbnZhciBtdXRlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtdXRlXCIpO1xudmFyIHRpbWVyVmlkZW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpbWVyVmlkZW9cIik7XG4vLyBTbGlkZXJzXG52YXIga25vYk1pbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmFuZ2Utc2xpZGVyX2hhbmRsZS1taW5cIik7XG52YXIgcmFuZ2VTbGlkZXJUcmFjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmFuZ2VTbGlkZXJUcmFja1wiKTtcbnZhciB3cmFwcGVyQ29tbWFuZEFuZFJhbmdlaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndyYXBwZXJDb21tYW5kQW5kUmFuZ2VpZFwiKTtcblxudmFyIHJhbmdlU2xpZGVyV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmFuZ2Utc2xpZGVyLXdyYXBwZXJcIik7XG52YXIgZGl2Q2FyZEJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkaXZDYXJkQm9hcmRcIik7XG52YXIgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiQk9EWVwiKVswXTtcblxuXG52YXIgS05PQl9XSURUSCA9IDI1O1xuXG52YXIgTlVNQkVSX09GX1RJQ0sgPSBwYXJzZUludChXSURUSF9SQU5HRV9TTElERVJfVFJBQ0ssIDEwKTtcbnZhciBWQUxVRV9LTk9CX01JTiA9IDA7XG52YXIgV0lEVEhfTUlEX0tOT0JfTUlOID0gMTU7XG52YXIgY3VycmVudFZhbHVlS25vYiA9IFZBTFVFX0tOT0JfTUlOO1xudmFyIHZpZGVvRHVyYXRpb24gPSBcIjE6NDdcIjtcblxudmFyIHZpZGVvRnVuY3Rpb25hbENvcmVNYW5hZ2VyID0gbmV3IFZpZGVvRnVuY3Rpb25hbENvcmVNYW5hZ2VyWVQoKTtcblxua25vYk1pbi5zdHlsZS5sZWZ0ID0gKGN1cnJlbnRWYWx1ZUtub2IgKyByYW5nZVNsaWRlclRyYWNrLm9mZnNldExlZnQpICsgXCJweFwiO1xuXG4vKi0tLS0gQ3JlYXRpb24gZGUgbWEgcHJvcHJlIGJhciBkZSBjb21tYW5kZSBkZSBsZWN0dXJlIHBvdXIgbGEgdmlkw6lvIC0tLS0tICovXG4vLyBFdmVudCBjb250cm9sbGVyIGZvciB0aGUgcGxheS9wYXVzZSBidXR0b25cbnBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgZnVuY3Rpb24oZSkge1xuICAvKmUucHJldmVudERlZmF1bHQoKTtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgLy9raWxsKCdtb3VzZWRvd24nKTtcbiAgLy9jb25zb2xlLmxvZyhcImFwcGVsIGwzNiBwbGF5UGF1c2VjYWxsYmFjayB2aWRlb0NvbnRyb2xsZXJcIiApO1xuIC8vIHZpZGVvRnVuY3Rpb25hbENvcmVNYW5hZ2VyLmV4ZWN1dGUobmV3IFBsYXlQYXVzZUNvbW1hbmQoKSk7XG4gIHBsYXlQYXVzZWNhbGxiYWNrKGUpO1xuICAvL3BsYXlQYXVzZWNhbGxiYWNrKGUpOyovXG59LCB7XG4gIHBhc3NpdmU6IHRydWVcbn0pO1xuXG5cbi8vQ2xpY2sgb24gdGhlIHZpZGVvIHRyaWdnZXIgcGxheSBhbmQgcGF1c2VcbnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBmdW5jdGlvbihlKSB7XG4gIC8vY29uc29sZS5sb2coXCJhcHBlbCBsNDIgcGxheVBhdXNlY2FsbGJhY2sgdmlkZW9DT250cm9sbGVyXCIpO1xuICAvL3ZpZGVvRnVuY3Rpb25hbENvcmVNYW5hZ2VyLmV4ZWN1dGUobmV3IFBsYXlQYXVzZUNvbW1hbmQoKSk7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgcGxheVBhdXNlY2FsbGJhY2soZSk7XG59KTtcblxubXV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgZnVuY3Rpb24oZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIHZpZGVvRnVuY3Rpb25hbENvcmVNYW5hZ2VyLmV4ZWN1dGUobmV3IE11dGVCdXR0b25Db21tYW5kKCkpO1xuICBcbn0pO1xucmFuZ2VTbGlkZXJXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBmdW5jdGlvbihlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgcGxheVBhdXNlY2FsbGJhY2soZSk7XG4gIFxufSk7XG5cbi8vTW91c2UgZXZlbnQgY29udHJvbGxlclxucGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgY29uc29sZS5sb2coXCJjbGljayBwbGF5QnV0dG9uXCIpO1xuICAvL2NvbnNvbGUubG9nKFwiYXBwZWwgcGxheVBhdXNlIGZ1bmN0aW9uIHBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihtb3VzZWRvd24gaW4gbDU2IHZpZGVvY29udHJvbGxlclwiKSA7XG4gIC8vdmlkZW9GdW5jdGlvbmFsQ29yZU1hbmFnZXIuZXhlY3V0ZShuZXcgUGxheVBhdXNlQ29tbWFuZCgpKTtcbiAgcGxheVBhdXNlY2FsbGJhY2soZSk7XG4gIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG59KTtcbm11dGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbihlKSB7XG4gIHZpZGVvRnVuY3Rpb25hbENvcmVNYW5hZ2VyLmV4ZWN1dGUobmV3IE11dGVCdXR0b25Db21tYW5kKCkpO1xuICBcbn0pO1xudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbihlKSB7XG4gIC8vY29uc29sZS5sb2coXCJhcHBlbCBwbGF5UGF1c2UgZnVuY3Rpb24gdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihtb3VzZWRvd24gaW4gbDYyIHZpZGVvY29udHJvbGxlclwiKSA7XG4gIC8vdmlkZW9GdW5jdGlvbmFsQ29yZU1hbmFnZXIuZXhlY3V0ZShuZXcgUGxheVBhdXNlQ29tbWFuZCgpKTtcbiAgcGxheVBhdXNlY2FsbGJhY2soZSk7XG4gIFxufSk7XG5cblxuLy8gRXZlbnQgY29udHJvbGxlciBmb3IgdGhlIHNlZWsgYmFyXG52aWRlb1NsaWRlci5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgdXBkYXRlVGltZXJWaWRlbygpO1xufSk7XG5cblxuLy8gVXBkYXRlIHRoZSBzZWVrIGJhciBhcyB0aGUgdmlkZW8gcGxheXNcbnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJ0aW1ldXBkYXRlXCIsIGZ1bmN0aW9uKCkge1xuICAvLyBVcGRhdGUgdGhlIHNsaWRlciB2YWx1ZVxuICBpZiAoIXZpZGVvLnBhdXNlZCkge1xuICAgIGN1cnJlbnRWYWx1ZUtub2IgPSAoKChOVU1CRVJfT0ZfVElDSyAvIHZpZGVvLmR1cmF0aW9uKSAqIHZpZGVvLmN1cnJlbnRUaW1lKSArIHJhbmdlU2xpZGVyVHJhY2sub2Zmc2V0TGVmdCk7XG4gICAgLy8ga25vYk1pbi5zdHlsZS5sZWZ0ID0gY3VycmVudFZhbHVlS25vYi0oS05PQl9XSURUSC8yKSsgXCJweFwiIDtcbiAgICBrbm9iTWluLnN0eWxlLmxlZnQgPSBjdXJyZW50VmFsdWVLbm9iIC0gKEtOT0JfV0lEVEggLyAyKSArIFwicHhcIjtcbiAgfVxuICAvL3ZpZGVvU2xpZGVyLnZhbHVlID0gKE5VTUJFUl9PRl9USUNLIC8gdmlkZW8uZHVyYXRpb24pICogdmlkZW8uY3VycmVudFRpbWU7XG4gIHVwZGF0ZVRpbWVyVmlkZW8oKTtcbn0sIGZhbHNlKTtcblxuXG5cbi8vRnVuY3Rpb24gdG8gdXBkYXRlIHRoZSBrbm9iXG52YXIgdXBkYXRlS25vYkFuZFZpZGVvV3JhcHBlciA9IGZ1bmN0aW9uKGUpIHtcbiAgaWYgKGUudHlwZSA9PT0gXCJtb3VzZXVwXCIgfHwgZS50eXBlID09PSBcIm1vdXNlZG93blwiICl7XG4gICAgdmlkZW9GdW5jdGlvbmFsQ29yZU1hbmFnZXIuZXhlY3V0ZShuZXcgdXBkYXRlS25vYkFuZFZpZGVvQ29tcHV0ZXJDb21tYW5kKGUpKTtcbiAgICBcbiAgICAvL3VwZGF0ZUtub2JBbmRWaWRlb0NvbXB1dGVyKGUpO1xuICB9IGVsc2UgaWYoZS50eXBlID09PSBcIm1vdXNlbW92ZVwiIHx8IGUudHlwZSA9PT0gXCJbb2JqZWN0IE1vdXNlRXZlbnRdXCIpIHtcbiAgXG4gICAgdXBkYXRlS25vYkFuZFZpZGVvQ29tcHV0ZXIoZSk7XG4gIH0gZWxzZSB7XG4gICAgdXBkYXRlS25vYkFuZFZpZGVvKGUpO1xuICB9XG4gIC8vIHZpZGVvLnBsYXkoKTtcbn07XG5cbiJdfQ==