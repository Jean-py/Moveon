'use strict';

var alreadyCharged = false;

var VideoPicker = function VideoPicker() {

  //I implemented a command pattern, see : https://www.dofactory.com/javascript/command-design-pattern
  return {
    chargeVideo: function chargeVideo() {
      _chargeVideo();
    }
  };
};

var VideoPicker = new VideoPicker();

var _chargeVideo = function _chargeVideo() {
  //We charge all the video only one time
  if (!alreadyCharged) {
    console.log("charging the video");
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'src/client/js/workshop2/technologyProbe/video/video_picker/videoPreview_view.html', true);
    xhr.onreadystatechange = function () {
      if (this.readyState !== 4) return;
      if (this.status !== 200) return; // or whatever error handling you want
      document.getElementById('videoPickerOverviewModal').innerHTML = this.responseText;

      var elms = document.getElementById('videoPickerOverviewModal').getElementsByTagName("video");
      var span = document.getElementsByClassName("close")[0];

      span.addEventListener("mousedown", function () {
        modalVideo.style.display = "none";
      });
      for (var i = 0; i < elms.length; i++) {
        elms[i].addEventListener("mousedown", function () {
          //console.log(this.getElementsByTagName("source")[0].src);
          console.log(video_current);
          video_current.src = this.getElementsByTagName("source")[0].src;
          var notification_feedback = "Video successfully loaded!";
          notificationFeedback(notification_feedback);
          //modalVideo.style.display = "none";
          //modalVideo.style.visibility = "hidden";
        });
      }
    };
    xhr.send();
    alreadyCharged = true;
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZGVvX3BpY2tlci5qcyJdLCJuYW1lcyI6WyJhbHJlYWR5Q2hhcmdlZCIsIlZpZGVvUGlja2VyIiwiY2hhcmdlVmlkZW8iLCJjb25zb2xlIiwibG9nIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJyZXNwb25zZVRleHQiLCJlbG1zIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzcGFuIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJtb2RhbFZpZGVvIiwic3R5bGUiLCJkaXNwbGF5IiwiaSIsImxlbmd0aCIsInZpZGVvX2N1cnJlbnQiLCJzcmMiLCJub3RpZmljYXRpb25fZmVlZGJhY2siLCJub3RpZmljYXRpb25GZWVkYmFjayIsInNlbmQiXSwibWFwcGluZ3MiOiI7O0FBRUEsSUFBSUEsaUJBQWlCLEtBQXJCOztBQUdBLElBQUlDLGNBQWMsU0FBZEEsV0FBYyxHQUFXOztBQUUzQjtBQUNBLFNBQU87QUFDTEMsaUJBQWEsdUJBQVU7QUFDdEJBO0FBQ0E7QUFISSxHQUFQO0FBS0QsQ0FSRDs7QUFXQSxJQUFJRCxjQUFjLElBQUlBLFdBQUosRUFBbEI7O0FBR0EsSUFBSUMsZUFBYyxTQUFkQSxZQUFjLEdBQVc7QUFDM0I7QUFDQSxNQUFHLENBQUNGLGNBQUosRUFBbUI7QUFDakJHLFlBQVFDLEdBQVIsQ0FBWSxvQkFBWjtBQUNBLFFBQUlDLE1BQUssSUFBSUMsY0FBSixFQUFUO0FBQ0FELFFBQUlFLElBQUosQ0FBUyxLQUFULEVBQWdCLG1GQUFoQixFQUFxRyxJQUFyRztBQUNBRixRQUFJRyxrQkFBSixHQUF3QixZQUFXO0FBQ2pDLFVBQUksS0FBS0MsVUFBTCxLQUFrQixDQUF0QixFQUF5QjtBQUN6QixVQUFJLEtBQUtDLE1BQUwsS0FBYyxHQUFsQixFQUF1QixPQUZVLENBRUY7QUFDL0JDLGVBQVNDLGNBQVQsQ0FBd0IsMEJBQXhCLEVBQW9EQyxTQUFwRCxHQUErRCxLQUFLQyxZQUFwRTs7QUFHQSxVQUFJQyxPQUFPSixTQUFTQyxjQUFULENBQXdCLDBCQUF4QixFQUFvREksb0JBQXBELENBQXlFLE9BQXpFLENBQVg7QUFDQSxVQUFJQyxPQUFPTixTQUFTTyxzQkFBVCxDQUFnQyxPQUFoQyxFQUF5QyxDQUF6QyxDQUFYOztBQUVBRCxXQUFLRSxnQkFBTCxDQUF1QixXQUF2QixFQUFxQyxZQUFXO0FBQzlDQyxtQkFBV0MsS0FBWCxDQUFpQkMsT0FBakIsR0FBMkIsTUFBM0I7QUFDRCxPQUZEO0FBR0EsV0FBSyxJQUFJQyxJQUFJLENBQWIsRUFBZ0JBLElBQUlSLEtBQUtTLE1BQXpCLEVBQWlDRCxHQUFqQyxFQUFzQztBQUNsQ1IsYUFBS1EsQ0FBTCxFQUFRSixnQkFBUixDQUF5QixXQUF6QixFQUFzQyxZQUFXO0FBQy9DO0FBQ0FoQixrQkFBUUMsR0FBUixDQUFZcUIsYUFBWjtBQUNBQSx3QkFBY0MsR0FBZCxHQUFvQixLQUFLVixvQkFBTCxDQUEwQixRQUExQixFQUFvQyxDQUFwQyxFQUF1Q1UsR0FBM0Q7QUFDQSxjQUFJQyx3QkFBd0IsNEJBQTVCO0FBQ0FDLCtCQUFxQkQscUJBQXJCO0FBQ0E7QUFDQTtBQUNILFNBUkM7QUFTSDtBQUNGLEtBdkJEO0FBd0JBdEIsUUFBSXdCLElBQUo7QUFDQTdCLHFCQUFpQixJQUFqQjtBQUNEO0FBRUYsQ0FsQ0QiLCJmaWxlIjoidmlkZW9fcGlja2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5cbnZhciBhbHJlYWR5Q2hhcmdlZCA9IGZhbHNlO1xuXG5cbnZhciBWaWRlb1BpY2tlciA9IGZ1bmN0aW9uKCkge1xuICBcbiAgLy9JIGltcGxlbWVudGVkIGEgY29tbWFuZCBwYXR0ZXJuLCBzZWUgOiBodHRwczovL3d3dy5kb2ZhY3RvcnkuY29tL2phdmFzY3JpcHQvY29tbWFuZC1kZXNpZ24tcGF0dGVyblxuICByZXR1cm4ge1xuICAgIGNoYXJnZVZpZGVvOiBmdW5jdGlvbigpe1xuICAgICBjaGFyZ2VWaWRlbygpO1xuICAgIH0sXG4gIH1cbn07XG5cblxudmFyIFZpZGVvUGlja2VyID0gbmV3IFZpZGVvUGlja2VyKCk7XG5cblxudmFyIGNoYXJnZVZpZGVvID0gZnVuY3Rpb24gKCl7XG4gIC8vV2UgY2hhcmdlIGFsbCB0aGUgdmlkZW8gb25seSBvbmUgdGltZVxuICBpZighYWxyZWFkeUNoYXJnZWQpe1xuICAgIGNvbnNvbGUubG9nKFwiY2hhcmdpbmcgdGhlIHZpZGVvXCIpO1xuICAgIHZhciB4aHI9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKCdHRVQnLCAnc3JjL2NsaWVudC9qcy93b3Jrc2hvcDIvdGVjaG5vbG9neVByb2JlL3ZpZGVvL3ZpZGVvX3BpY2tlci92aWRlb1ByZXZpZXdfdmlldy5odG1sJywgdHJ1ZSk7XG4gICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZT0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5yZWFkeVN0YXRlIT09NCkgcmV0dXJuO1xuICAgICAgaWYgKHRoaXMuc3RhdHVzIT09MjAwKSByZXR1cm47IC8vIG9yIHdoYXRldmVyIGVycm9yIGhhbmRsaW5nIHlvdSB3YW50XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlkZW9QaWNrZXJPdmVydmlld01vZGFsJykuaW5uZXJIVE1MPSB0aGlzLnJlc3BvbnNlVGV4dDtcbiAgXG4gIFxuICAgICAgdmFyIGVsbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlkZW9QaWNrZXJPdmVydmlld01vZGFsJykuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ2aWRlb1wiKTtcbiAgICAgIHZhciBzcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNsb3NlXCIpWzBdO1xuICBcbiAgICAgIHNwYW4uYWRkRXZlbnRMaXN0ZW5lciggXCJtb3VzZWRvd25cIiAsIGZ1bmN0aW9uKCkge1xuICAgICAgICBtb2RhbFZpZGVvLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIH0pO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbG1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZWxtc1tpXS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic291cmNlXCIpWzBdLnNyYyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh2aWRlb19jdXJyZW50KTtcbiAgICAgICAgICAgIHZpZGVvX2N1cnJlbnQuc3JjID0gdGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNvdXJjZVwiKVswXS5zcmM7XG4gICAgICAgICAgICB2YXIgbm90aWZpY2F0aW9uX2ZlZWRiYWNrID0gXCJWaWRlbyBzdWNjZXNzZnVsbHkgbG9hZGVkIVwiO1xuICAgICAgICAgICAgbm90aWZpY2F0aW9uRmVlZGJhY2sobm90aWZpY2F0aW9uX2ZlZWRiYWNrKTtcbiAgICAgICAgICAgIC8vbW9kYWxWaWRlby5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAvL21vZGFsVmlkZW8uc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gICAgeGhyLnNlbmQoKTtcbiAgICBhbHJlYWR5Q2hhcmdlZCA9IHRydWU7XG4gIH1cbiBcbn07XG5cblxuXG4iXX0=