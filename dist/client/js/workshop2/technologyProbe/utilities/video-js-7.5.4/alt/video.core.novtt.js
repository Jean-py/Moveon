'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};/**
 * @license
 * Video.js 7.5.4 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */(function(global,factory){(typeof exports==='undefined'?'undefined':_typeof(exports))==='object'&&typeof module!=='undefined'?module.exports=factory(require('global/window'),require('global/document')):typeof define==='function'&&define.amd?define(['global/window','global/document'],factory):(global=global||self,global.videojs=factory(global.window,global.document));})(undefined,function(window$1,document){window$1=window$1&&window$1.hasOwnProperty('default')?window$1['default']:window$1;document=document&&document.hasOwnProperty('default')?document['default']:document;var version="7.5.4";function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass;}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct;}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor();if(Class)_setPrototypeOf(instance,Class.prototype);return instance;};}return _construct.apply(null,arguments);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _taggedTemplateLiteralLoose(strings,raw){if(!raw){raw=strings.slice(0);}strings.raw=raw;return strings;}/**
   * @file create-logger.js
   * @module create-logger
   */var history=[];/**
   * Log messages to the console and history based on the type of message
   *
   * @private
   * @param  {string} type
   *         The name of the console method to use.
   *
   * @param  {Array} args
   *         The arguments to be passed to the matching console method.
   */var LogByTypeFactory=function LogByTypeFactory(name,log){return function(type,level,args){var lvl=log.levels[level];var lvlRegExp=new RegExp("^("+lvl+")$");if(type!=='log'){// Add the type to the front of the message when it's not "log".
args.unshift(type.toUpperCase()+':');}// Add console prefix after adding to history.
args.unshift(name+':');// Add a clone of the args at this point to history.
if(history){history.push([].concat(args));}// If there's no console then don't try to output messages, but they will
// still be stored in history.
if(!window$1.console){return;}// Was setting these once outside of this function, but containing them
// in the function makes it easier to test cases where console doesn't exist
// when the module is executed.
var fn=window$1.console[type];if(!fn&&type==='debug'){// Certain browsers don't have support for console.debug. For those, we
// should default to the closest comparable log.
fn=window$1.console.info||window$1.console.log;}// Bail out if there's no console or if this type is not allowed by the
// current logging level.
if(!fn||!lvl||!lvlRegExp.test(type)){return;}fn[Array.isArray(args)?'apply':'call'](window$1.console,args);};};function createLogger(name){// This is the private tracking variable for logging level.
var level='info';// the curried logByType bound to the specific log and history
var logByType;/**
     * Logs plain debug messages. Similar to `console.log`.
     *
     * Due to [limitations](https://github.com/jsdoc3/jsdoc/issues/955#issuecomment-313829149)
     * of our JSDoc template, we cannot properly document this as both a function
     * and a namespace, so its function signature is documented here.
     *
     * #### Arguments
     * ##### *args
     * Mixed[]
     *
     * Any combination of values that could be passed to `console.log()`.
     *
     * #### Return Value
     *
     * `undefined`
     *
     * @namespace
     * @param    {Mixed[]} args
     *           One or more messages or objects that should be logged.
     */var log=function log(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}logByType('log',level,args);};// This is the logByType helper that the logging methods below use
logByType=LogByTypeFactory(name,log);/**
     * Create a new sublogger which chains the old name to the new name.
     *
     * For example, doing `videojs.log.createLogger('player')` and then using that logger will log the following:
     * ```js
     *  mylogger('foo');
     *  // > VIDEOJS: player: foo
     * ```
     *
     * @param {string} name
     *        The name to add call the new logger
     * @return {Object}
     */log.createLogger=function(subname){return createLogger(name+': '+subname);};/**
     * Enumeration of available logging levels, where the keys are the level names
     * and the values are `|`-separated strings containing logging methods allowed
     * in that logging level. These strings are used to create a regular expression
     * matching the function name being called.
     *
     * Levels provided by Video.js are:
     *
     * - `off`: Matches no calls. Any value that can be cast to `false` will have
     *   this effect. The most restrictive.
     * - `all`: Matches only Video.js-provided functions (`debug`, `log`,
     *   `log.warn`, and `log.error`).
     * - `debug`: Matches `log.debug`, `log`, `log.warn`, and `log.error` calls.
     * - `info` (default): Matches `log`, `log.warn`, and `log.error` calls.
     * - `warn`: Matches `log.warn` and `log.error` calls.
     * - `error`: Matches only `log.error` calls.
     *
     * @type {Object}
     */log.levels={all:'debug|log|warn|error',off:'',debug:'debug|log|warn|error',info:'log|warn|error',warn:'warn|error',error:'error',DEFAULT:level};/**
     * Get or set the current logging level.
     *
     * If a string matching a key from {@link module:log.levels} is provided, acts
     * as a setter.
     *
     * @param  {string} [lvl]
     *         Pass a valid level to set a new logging level.
     *
     * @return {string}
     *         The current logging level.
     */log.level=function(lvl){if(typeof lvl==='string'){if(!log.levels.hasOwnProperty(lvl)){throw new Error("\""+lvl+"\" in not a valid log level");}level=lvl;}return level;};/**
     * Returns an array containing everything that has been logged to the history.
     *
     * This array is a shallow clone of the internal history record. However, its
     * contents are _not_ cloned; so, mutating objects inside this array will
     * mutate them in history.
     *
     * @return {Array}
     */log.history=function(){return history?[].concat(history):[];};/**
     * Allows you to filter the history by the given logger name
     *
     * @param {string} fname
     *        The name to filter by
     *
     * @return {Array}
     *         The filtered list to return
     */log.history.filter=function(fname){return(history||[]).filter(function(historyItem){// if the first item in each historyItem includes `fname`, then it's a match
return new RegExp(".*"+fname+".*").test(historyItem[0]);});};/**
     * Clears the internal history tracking, but does not prevent further history
     * tracking.
     */log.history.clear=function(){if(history){history.length=0;}};/**
     * Disable history tracking if it is currently enabled.
     */log.history.disable=function(){if(history!==null){history.length=0;history=null;}};/**
     * Enable history tracking if it is currently disabled.
     */log.history.enable=function(){if(history===null){history=[];}};/**
     * Logs error messages. Similar to `console.error`.
     *
     * @param {Mixed[]} args
     *        One or more messages or objects that should be logged as an error
     */log.error=function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}return logByType('error',level,args);};/**
     * Logs warning messages. Similar to `console.warn`.
     *
     * @param {Mixed[]} args
     *        One or more messages or objects that should be logged as a warning.
     */log.warn=function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}return logByType('warn',level,args);};/**
     * Logs debug messages. Similar to `console.debug`, but may also act as a comparable
     * log if `console.debug` is not available
     *
     * @param {Mixed[]} args
     *        One or more messages or objects that should be logged as debug.
     */log.debug=function(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}return logByType('debug',level,args);};return log;}/**
   * @file log.js
   * @module log
   */var log=createLogger('VIDEOJS');var createLogger$1=log.createLogger;function clean(s){return s.replace(/\n\r?\s*/g,'');}var tsml=function tsml(sa){var s='',i=0;for(;i<arguments.length;i++){s+=clean(sa[i])+(arguments[i+1]||'');}return s;};/**
   * @file obj.js
   * @module obj
   *//**
   * @callback obj:EachCallback
   *
   * @param {Mixed} value
   *        The current key for the object that is being iterated over.
   *
   * @param {string} key
   *        The current key-value for object that is being iterated over
   *//**
   * @callback obj:ReduceCallback
   *
   * @param {Mixed} accum
   *        The value that is accumulating over the reduce loop.
   *
   * @param {Mixed} value
   *        The current key for the object that is being iterated over.
   *
   * @param {string} key
   *        The current key-value for object that is being iterated over
   *
   * @return {Mixed}
   *         The new accumulated value.
   */var toString=Object.prototype.toString;/**
   * Get the keys of an Object
   *
   * @param {Object}
   *        The Object to get the keys from
   *
   * @return {string[]}
   *         An array of the keys from the object. Returns an empty array if the
   *         object passed in was invalid or had no keys.
   *
   * @private
   */var keys=function keys(object){return isObject(object)?Object.keys(object):[];};/**
   * Array-like iteration for objects.
   *
   * @param {Object} object
   *        The object to iterate over
   *
   * @param {obj:EachCallback} fn
   *        The callback function which is called for each key in the object.
   */function each(object,fn){keys(object).forEach(function(key){return fn(object[key],key);});}/**
   * Array-like reduce for objects.
   *
   * @param {Object} object
   *        The Object that you want to reduce.
   *
   * @param {Function} fn
   *         A callback function which is called for each key in the object. It
   *         receives the accumulated value and the per-iteration value and key
   *         as arguments.
   *
   * @param {Mixed} [initial = 0]
   *        Starting value
   *
   * @return {Mixed}
   *         The final accumulated value.
   */function reduce(object,fn,initial){if(initial===void 0){initial=0;}return keys(object).reduce(function(accum,key){return fn(accum,object[key],key);},initial);}/**
   * Object.assign-style object shallow merge/extend.
   *
   * @param  {Object} target
   * @param  {Object} ...sources
   * @return {Object}
   */function assign(target){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){sources[_key-1]=arguments[_key];}if(Object.assign){return Object.assign.apply(Object,[target].concat(sources));}sources.forEach(function(source){if(!source){return;}each(source,function(value,key){target[key]=value;});});return target;}/**
   * Returns whether a value is an object of any kind - including DOM nodes,
   * arrays, regular expressions, etc. Not functions, though.
   *
   * This avoids the gotcha where using `typeof` on a `null` value
   * results in `'object'`.
   *
   * @param  {Object} value
   * @return {boolean}
   */function isObject(value){return!!value&&(typeof value==='undefined'?'undefined':_typeof(value))==='object';}/**
   * Returns whether an object appears to be a "plain" object - that is, a
   * direct instance of `Object`.
   *
   * @param  {Object} value
   * @return {boolean}
   */function isPlain(value){return isObject(value)&&toString.call(value)==='[object Object]'&&value.constructor===Object;}/**
   * @file computed-style.js
   * @module computed-style
   *//**
   * A safe getComputedStyle.
   *
   * This is needed because in Firefox, if the player is loaded in an iframe with
   * `display:none`, then `getComputedStyle` returns `null`, so, we do a
   * null-check to make sure that the player doesn't break in these cases.
   *
   * @function
   * @param    {Element} el
   *           The element you want the computed style of
   *
   * @param    {string} prop
   *           The property name you want
   *
   * @see      https://bugzilla.mozilla.org/show_bug.cgi?id=548397
   */function computedStyle(el,prop){if(!el||!prop){return'';}if(typeof window$1.getComputedStyle==='function'){var cs=window$1.getComputedStyle(el);return cs?cs[prop]:'';}return'';}function _templateObject(){var data=_taggedTemplateLiteralLoose(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);_templateObject=function _templateObject(){return data;};return data;}/**
   * Detect if a value is a string with any non-whitespace characters.
   *
   * @private
   * @param  {string} str
   *         The string to check
   *
   * @return {boolean}
   *         Will be `true` if the string is non-blank, `false` otherwise.
   *
   */function isNonBlankString(str){return typeof str==='string'&&/\S/.test(str);}/**
   * Throws an error if the passed string has whitespace. This is used by
   * class methods to be relatively consistent with the classList API.
   *
   * @private
   * @param  {string} str
   *         The string to check for whitespace.
   *
   * @throws {Error}
   *         Throws an error if there is whitespace in the string.
   */function throwIfWhitespace(str){if(/\s/.test(str)){throw new Error('class has illegal whitespace characters');}}/**
   * Produce a regular expression for matching a className within an elements className.
   *
   * @private
   * @param  {string} className
   *         The className to generate the RegExp for.
   *
   * @return {RegExp}
   *         The RegExp that will check for a specific `className` in an elements
   *         className.
   */function classRegExp(className){return new RegExp('(^|\\s)'+className+'($|\\s)');}/**
   * Whether the current DOM interface appears to be real (i.e. not simulated).
   *
   * @return {boolean}
   *         Will be `true` if the DOM appears to be real, `false` otherwise.
   */function isReal(){// Both document and window will never be undefined thanks to `global`.
return document===window$1.document;}/**
   * Determines, via duck typing, whether or not a value is a DOM element.
   *
   * @param  {Mixed} value
   *         The value to check.
   *
   * @return {boolean}
   *         Will be `true` if the value is a DOM element, `false` otherwise.
   */function isEl(value){return isObject(value)&&value.nodeType===1;}/**
   * Determines if the current DOM is embedded in an iframe.
   *
   * @return {boolean}
   *         Will be `true` if the DOM is embedded in an iframe, `false`
   *         otherwise.
   */function isInFrame(){// We need a try/catch here because Safari will throw errors when attempting
// to get either `parent` or `self`
try{return window$1.parent!==window$1.self;}catch(x){return true;}}/**
   * Creates functions to query the DOM using a given method.
   *
   * @private
   * @param   {string} method
   *          The method to create the query with.
   *
   * @return  {Function}
   *          The query method
   */function createQuerier(method){return function(selector,context){if(!isNonBlankString(selector)){return document[method](null);}if(isNonBlankString(context)){context=document.querySelector(context);}var ctx=isEl(context)?context:document;return ctx[method]&&ctx[method](selector);};}/**
   * Creates an element and applies properties, attributes, and inserts content.
   *
   * @param  {string} [tagName='div']
   *         Name of tag to be created.
   *
   * @param  {Object} [properties={}]
   *         Element properties to be applied.
   *
   * @param  {Object} [attributes={}]
   *         Element attributes to be applied.
   *
   * @param {module:dom~ContentDescriptor} content
   *        A content descriptor object.
   *
   * @return {Element}
   *         The element that was created.
   */function createEl(tagName,properties,attributes,content){if(tagName===void 0){tagName='div';}if(properties===void 0){properties={};}if(attributes===void 0){attributes={};}var el=document.createElement(tagName);Object.getOwnPropertyNames(properties).forEach(function(propName){var val=properties[propName];// See #2176
// We originally were accepting both properties and attributes in the
// same object, but that doesn't work so well.
if(propName.indexOf('aria-')!==-1||propName==='role'||propName==='type'){log.warn(tsml(_templateObject(),propName,val));el.setAttribute(propName,val);// Handle textContent since it's not supported everywhere and we have a
// method for it.
}else if(propName==='textContent'){textContent(el,val);}else{el[propName]=val;}});Object.getOwnPropertyNames(attributes).forEach(function(attrName){el.setAttribute(attrName,attributes[attrName]);});if(content){appendContent(el,content);}return el;}/**
   * Injects text into an element, replacing any existing contents entirely.
   *
   * @param  {Element} el
   *         The element to add text content into
   *
   * @param  {string} text
   *         The text content to add.
   *
   * @return {Element}
   *         The element with added text content.
   */function textContent(el,text){if(typeof el.textContent==='undefined'){el.innerText=text;}else{el.textContent=text;}return el;}/**
   * Insert an element as the first child node of another
   *
   * @param {Element} child
   *        Element to insert
   *
   * @param {Element} parent
   *        Element to insert child into
   */function prependTo(child,parent){if(parent.firstChild){parent.insertBefore(child,parent.firstChild);}else{parent.appendChild(child);}}/**
   * Check if an element has a class name.
   *
   * @param  {Element} element
   *         Element to check
   *
   * @param  {string} classToCheck
   *         Class name to check for
   *
   * @return {boolean}
   *         Will be `true` if the element has a class, `false` otherwise.
   *
   * @throws {Error}
   *         Throws an error if `classToCheck` has white space.
   */function hasClass(element,classToCheck){throwIfWhitespace(classToCheck);if(element.classList){return element.classList.contains(classToCheck);}return classRegExp(classToCheck).test(element.className);}/**
   * Add a class name to an element.
   *
   * @param  {Element} element
   *         Element to add class name to.
   *
   * @param  {string} classToAdd
   *         Class name to add.
   *
   * @return {Element}
   *         The DOM element with the added class name.
   */function addClass(element,classToAdd){if(element.classList){element.classList.add(classToAdd);// Don't need to `throwIfWhitespace` here because `hasElClass` will do it
// in the case of classList not being supported.
}else if(!hasClass(element,classToAdd)){element.className=(element.className+' '+classToAdd).trim();}return element;}/**
   * Remove a class name from an element.
   *
   * @param  {Element} element
   *         Element to remove a class name from.
   *
   * @param  {string} classToRemove
   *         Class name to remove
   *
   * @return {Element}
   *         The DOM element with class name removed.
   */function removeClass(element,classToRemove){if(element.classList){element.classList.remove(classToRemove);}else{throwIfWhitespace(classToRemove);element.className=element.className.split(/\s+/).filter(function(c){return c!==classToRemove;}).join(' ');}return element;}/**
   * The callback definition for toggleClass.
   *
   * @callback module:dom~PredicateCallback
   * @param    {Element} element
   *           The DOM element of the Component.
   *
   * @param    {string} classToToggle
   *           The `className` that wants to be toggled
   *
   * @return   {boolean|undefined}
   *           If `true` is returned, the `classToToggle` will be added to the
   *           `element`. If `false`, the `classToToggle` will be removed from
   *           the `element`. If `undefined`, the callback will be ignored.
   *//**
   * Adds or removes a class name to/from an element depending on an optional
   * condition or the presence/absence of the class name.
   *
   * @param  {Element} element
   *         The element to toggle a class name on.
   *
   * @param  {string} classToToggle
   *         The class that should be toggled.
   *
   * @param  {boolean|module:dom~PredicateCallback} [predicate]
   *         See the return value for {@link module:dom~PredicateCallback}
   *
   * @return {Element}
   *         The element with a class that has been toggled.
   */function toggleClass(element,classToToggle,predicate){// This CANNOT use `classList` internally because IE11 does not support the
// second parameter to the `classList.toggle()` method! Which is fine because
// `classList` will be used by the add/remove functions.
var has=hasClass(element,classToToggle);if(typeof predicate==='function'){predicate=predicate(element,classToToggle);}if(typeof predicate!=='boolean'){predicate=!has;}// If the necessary class operation matches the current state of the
// element, no action is required.
if(predicate===has){return;}if(predicate){addClass(element,classToToggle);}else{removeClass(element,classToToggle);}return element;}/**
   * Apply attributes to an HTML element.
   *
   * @param {Element} el
   *        Element to add attributes to.
   *
   * @param {Object} [attributes]
   *        Attributes to be applied.
   */function setAttributes(el,attributes){Object.getOwnPropertyNames(attributes).forEach(function(attrName){var attrValue=attributes[attrName];if(attrValue===null||typeof attrValue==='undefined'||attrValue===false){el.removeAttribute(attrName);}else{el.setAttribute(attrName,attrValue===true?'':attrValue);}});}/**
   * Get an element's attribute values, as defined on the HTML tag.
   *
   * Attributes are not the same as properties. They're defined on the tag
   * or with setAttribute.
   *
   * @param  {Element} tag
   *         Element from which to get tag attributes.
   *
   * @return {Object}
   *         All attributes of the element. Boolean attributes will be `true` or
   *         `false`, others will be strings.
   */function getAttributes(tag){var obj={};// known boolean attributes
// we can check for matching boolean properties, but not all browsers
// and not all tags know about these attributes, so, we still want to check them manually
var knownBooleans=','+'autoplay,controls,playsinline,loop,muted,default,defaultMuted'+',';if(tag&&tag.attributes&&tag.attributes.length>0){var attrs=tag.attributes;for(var i=attrs.length-1;i>=0;i--){var attrName=attrs[i].name;var attrVal=attrs[i].value;// check for known booleans
// the matching element property will return a value for typeof
if(typeof tag[attrName]==='boolean'||knownBooleans.indexOf(','+attrName+',')!==-1){// the value of an included boolean attribute is typically an empty
// string ('') which would equal false if we just check for a false value.
// we also don't want support bad code like autoplay='false'
attrVal=attrVal!==null?true:false;}obj[attrName]=attrVal;}}return obj;}/**
   * Get the value of an element's attribute.
   *
   * @param {Element} el
   *        A DOM element.
   *
   * @param {string} attribute
   *        Attribute to get the value of.
   *
   * @return {string}
   *         The value of the attribute.
   */function getAttribute(el,attribute){return el.getAttribute(attribute);}/**
   * Set the value of an element's attribute.
   *
   * @param {Element} el
   *        A DOM element.
   *
   * @param {string} attribute
   *        Attribute to set.
   *
   * @param {string} value
   *        Value to set the attribute to.
   */function setAttribute(el,attribute,value){el.setAttribute(attribute,value);}/**
   * Remove an element's attribute.
   *
   * @param {Element} el
   *        A DOM element.
   *
   * @param {string} attribute
   *        Attribute to remove.
   */function removeAttribute(el,attribute){el.removeAttribute(attribute);}/**
   * Attempt to block the ability to select text.
   */function blockTextSelection(){document.body.focus();document.onselectstart=function(){return false;};}/**
   * Turn off text selection blocking.
   */function unblockTextSelection(){document.onselectstart=function(){return true;};}/**
   * Identical to the native `getBoundingClientRect` function, but ensures that
   * the method is supported at all (it is in all browsers we claim to support)
   * and that the element is in the DOM before continuing.
   *
   * This wrapper function also shims properties which are not provided by some
   * older browsers (namely, IE8).
   *
   * Additionally, some browsers do not support adding properties to a
   * `ClientRect`/`DOMRect` object; so, we shallow-copy it with the standard
   * properties (except `x` and `y` which are not widely supported). This helps
   * avoid implementations where keys are non-enumerable.
   *
   * @param  {Element} el
   *         Element whose `ClientRect` we want to calculate.
   *
   * @return {Object|undefined}
   *         Always returns a plain object - or `undefined` if it cannot.
   */function getBoundingClientRect(el){if(el&&el.getBoundingClientRect&&el.parentNode){var rect=el.getBoundingClientRect();var result={};['bottom','height','left','right','top','width'].forEach(function(k){if(rect[k]!==undefined){result[k]=rect[k];}});if(!result.height){result.height=parseFloat(computedStyle(el,'height'));}if(!result.width){result.width=parseFloat(computedStyle(el,'width'));}return result;}}/**
   * Represents the position of a DOM element on the page.
   *
   * @typedef  {Object} module:dom~Position
   *
   * @property {number} left
   *           Pixels to the left.
   *
   * @property {number} top
   *           Pixels from the top.
   *//**
   * Get the position of an element in the DOM.
   *
   * Uses `getBoundingClientRect` technique from John Resig.
   *
   * @see http://ejohn.org/blog/getboundingclientrect-is-awesome/
   *
   * @param  {Element} el
   *         Element from which to get offset.
   *
   * @return {module:dom~Position}
   *         The position of the element that was passed in.
   */function findPosition(el){var box;if(el.getBoundingClientRect&&el.parentNode){box=el.getBoundingClientRect();}if(!box){return{left:0,top:0};}var docEl=document.documentElement;var body=document.body;var clientLeft=docEl.clientLeft||body.clientLeft||0;var scrollLeft=window$1.pageXOffset||body.scrollLeft;var left=box.left+scrollLeft-clientLeft;var clientTop=docEl.clientTop||body.clientTop||0;var scrollTop=window$1.pageYOffset||body.scrollTop;var top=box.top+scrollTop-clientTop;// Android sometimes returns slightly off decimal values, so need to round
return{left:Math.round(left),top:Math.round(top)};}/**
   * Represents x and y coordinates for a DOM element or mouse pointer.
   *
   * @typedef  {Object} module:dom~Coordinates
   *
   * @property {number} x
   *           x coordinate in pixels
   *
   * @property {number} y
   *           y coordinate in pixels
   *//**
   * Get the pointer position within an element.
   *
   * The base on the coordinates are the bottom left of the element.
   *
   * @param  {Element} el
   *         Element on which to get the pointer position on.
   *
   * @param  {EventTarget~Event} event
   *         Event object.
   *
   * @return {module:dom~Coordinates}
   *         A coordinates object corresponding to the mouse position.
   *
   */function getPointerPosition(el,event){var position={};var box=findPosition(el);var boxW=el.offsetWidth;var boxH=el.offsetHeight;var boxY=box.top;var boxX=box.left;var pageY=event.pageY;var pageX=event.pageX;if(event.changedTouches){pageX=event.changedTouches[0].pageX;pageY=event.changedTouches[0].pageY;}position.y=Math.max(0,Math.min(1,(boxY-pageY+boxH)/boxH));position.x=Math.max(0,Math.min(1,(pageX-boxX)/boxW));return position;}/**
   * Determines, via duck typing, whether or not a value is a text node.
   *
   * @param  {Mixed} value
   *         Check if this value is a text node.
   *
   * @return {boolean}
   *         Will be `true` if the value is a text node, `false` otherwise.
   */function isTextNode(value){return isObject(value)&&value.nodeType===3;}/**
   * Empties the contents of an element.
   *
   * @param  {Element} el
   *         The element to empty children from
   *
   * @return {Element}
   *         The element with no children
   */function emptyEl(el){while(el.firstChild){el.removeChild(el.firstChild);}return el;}/**
   * This is a mixed value that describes content to be injected into the DOM
   * via some method. It can be of the following types:
   *
   * Type       | Description
   * -----------|-------------
   * `string`   | The value will be normalized into a text node.
   * `Element`  | The value will be accepted as-is.
   * `TextNode` | The value will be accepted as-is.
   * `Array`    | A one-dimensional array of strings, elements, text nodes, or functions. These functions should return a string, element, or text node (any other return value, like an array, will be ignored).
   * `Function` | A function, which is expected to return a string, element, text node, or array - any of the other possible values described above. This means that a content descriptor could be a function that returns an array of functions, but those second-level functions must return strings, elements, or text nodes.
   *
   * @typedef {string|Element|TextNode|Array|Function} module:dom~ContentDescriptor
   *//**
   * Normalizes content for eventual insertion into the DOM.
   *
   * This allows a wide range of content definition methods, but helps protect
   * from falling into the trap of simply writing to `innerHTML`, which could
   * be an XSS concern.
   *
   * The content for an element can be passed in multiple types and
   * combinations, whose behavior is as follows:
   *
   * @param {module:dom~ContentDescriptor} content
   *        A content descriptor value.
   *
   * @return {Array}
   *         All of the content that was passed in, normalized to an array of
   *         elements or text nodes.
   */function normalizeContent(content){// First, invoke content if it is a function. If it produces an array,
// that needs to happen before normalization.
if(typeof content==='function'){content=content();}// Next up, normalize to an array, so one or many items can be normalized,
// filtered, and returned.
return(Array.isArray(content)?content:[content]).map(function(value){// First, invoke value if it is a function to produce a new value,
// which will be subsequently normalized to a Node of some kind.
if(typeof value==='function'){value=value();}if(isEl(value)||isTextNode(value)){return value;}if(typeof value==='string'&&/\S/.test(value)){return document.createTextNode(value);}}).filter(function(value){return value;});}/**
   * Normalizes and appends content to an element.
   *
   * @param  {Element} el
   *         Element to append normalized content to.
   *
   * @param {module:dom~ContentDescriptor} content
   *        A content descriptor value.
   *
   * @return {Element}
   *         The element with appended normalized content.
   */function appendContent(el,content){normalizeContent(content).forEach(function(node){return el.appendChild(node);});return el;}/**
   * Normalizes and inserts content into an element; this is identical to
   * `appendContent()`, except it empties the element first.
   *
   * @param {Element} el
   *        Element to insert normalized content into.
   *
   * @param {module:dom~ContentDescriptor} content
   *        A content descriptor value.
   *
   * @return {Element}
   *         The element with inserted normalized content.
   */function insertContent(el,content){return appendContent(emptyEl(el),content);}/**
   * Check if an event was a single left click.
   *
   * @param  {EventTarget~Event} event
   *         Event object.
   *
   * @return {boolean}
   *         Will be `true` if a single left click, `false` otherwise.
   */function isSingleLeftClick(event){// Note: if you create something draggable, be sure to
// call it on both `mousedown` and `mousemove` event,
// otherwise `mousedown` should be enough for a button
if(event.button===undefined&&event.buttons===undefined){// Why do we need `buttons` ?
// Because, middle mouse sometimes have this:
// e.button === 0 and e.buttons === 4
// Furthermore, we want to prevent combination click, something like
// HOLD middlemouse then left click, that would be
// e.button === 0, e.buttons === 5
// just `button` is not gonna work
// Alright, then what this block does ?
// this is for chrome `simulate mobile devices`
// I want to support this as well
return true;}if(event.button===0&&event.buttons===undefined){// Touch screen, sometimes on some specific device, `buttons`
// doesn't have anything (safari on ios, blackberry...)
return true;}if(event.button!==0||event.buttons!==1){// This is the reason we have those if else block above
// if any special case we can catch and let it slide
// we do it above, when get to here, this definitely
// is-not-left-click
return false;}return true;}/**
   * Finds a single DOM element matching `selector` within the optional
   * `context` of another DOM element (defaulting to `document`).
   *
   * @param  {string} selector
   *         A valid CSS selector, which will be passed to `querySelector`.
   *
   * @param  {Element|String} [context=document]
   *         A DOM element within which to query. Can also be a selector
   *         string in which case the first matching element will be used
   *         as context. If missing (or no element matches selector), falls
   *         back to `document`.
   *
   * @return {Element|null}
   *         The element that was found or null.
   */var $=createQuerier('querySelector');/**
   * Finds a all DOM elements matching `selector` within the optional
   * `context` of another DOM element (defaulting to `document`).
   *
   * @param  {string} selector
   *         A valid CSS selector, which will be passed to `querySelectorAll`.
   *
   * @param  {Element|String} [context=document]
   *         A DOM element within which to query. Can also be a selector
   *         string in which case the first matching element will be used
   *         as context. If missing (or no element matches selector), falls
   *         back to `document`.
   *
   * @return {NodeList}
   *         A element list of elements that were found. Will be empty if none
   *         were found.
   *
   */var $$=createQuerier('querySelectorAll');var Dom=/*#__PURE__*/Object.freeze({isReal:isReal,isEl:isEl,isInFrame:isInFrame,createEl:createEl,textContent:textContent,prependTo:prependTo,hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,setAttributes:setAttributes,getAttributes:getAttributes,getAttribute:getAttribute,setAttribute:setAttribute,removeAttribute:removeAttribute,blockTextSelection:blockTextSelection,unblockTextSelection:unblockTextSelection,getBoundingClientRect:getBoundingClientRect,findPosition:findPosition,getPointerPosition:getPointerPosition,isTextNode:isTextNode,emptyEl:emptyEl,normalizeContent:normalizeContent,appendContent:appendContent,insertContent:insertContent,isSingleLeftClick:isSingleLeftClick,$:$,$$:$$});/**
   * @file guid.js
   * @module guid
   *//**
   * Unique ID for an element or function
   * @type {Number}
   */var _guid=1;/**
   * Get a unique auto-incrementing ID by number that has not been returned before.
   *
   * @return {number}
   *         A new unique ID.
   */function newGUID(){return _guid++;}/**
   * @file dom-data.js
   * @module dom-data
   *//**
   * Element Data Store.
   *
   * Allows for binding data to an element without putting it directly on the
   * element. Ex. Event listeners are stored here.
   * (also from jsninja.com, slightly modified and updated for closure compiler)
   *
   * @type {Object}
   * @private
   */var elData={};/*
   * Unique attribute name to store an element's guid in
   *
   * @type {String}
   * @constant
   * @private
   */var elIdAttr='vdata'+new Date().getTime();/**
   * Returns the cache object where data for an element is stored
   *
   * @param {Element} el
   *        Element to store data for.
   *
   * @return {Object}
   *         The cache object for that el that was passed in.
   */function getData(el){var id=el[elIdAttr];if(!id){id=el[elIdAttr]=newGUID();}if(!elData[id]){elData[id]={};}return elData[id];}/**
   * Returns whether or not an element has cached data
   *
   * @param {Element} el
   *        Check if this element has cached data.
   *
   * @return {boolean}
   *         - True if the DOM element has cached data.
   *         - False otherwise.
   */function hasData(el){var id=el[elIdAttr];if(!id){return false;}return!!Object.getOwnPropertyNames(elData[id]).length;}/**
   * Delete data for the element from the cache and the guid attr from getElementById
   *
   * @param {Element} el
   *        Remove cached data for this element.
   */function removeData(el){var id=el[elIdAttr];if(!id){return;}// Remove all stored data
delete elData[id];// Remove the elIdAttr property from the DOM node
try{delete el[elIdAttr];}catch(e){if(el.removeAttribute){el.removeAttribute(elIdAttr);}else{// IE doesn't appear to support removeAttribute on the document element
el[elIdAttr]=null;}}}/**
   * @file events.js. An Event System (John Resig - Secrets of a JS Ninja http://jsninja.com/)
   * (Original book version wasn't completely usable, so fixed some things and made Closure Compiler compatible)
   * This should work very similarly to jQuery's events, however it's based off the book version which isn't as
   * robust as jquery's, so there's probably some differences.
   *
   * @file events.js
   * @module events
   *//**
   * Clean up the listener cache and dispatchers
   *
   * @param {Element|Object} elem
   *        Element to clean up
   *
   * @param {string} type
   *        Type of event to clean up
   */function _cleanUpEvents(elem,type){var data=getData(elem);// Remove the events of a particular type if there are none left
if(data.handlers[type].length===0){delete data.handlers[type];// data.handlers[type] = null;
// Setting to null was causing an error with data.handlers
// Remove the meta-handler from the element
if(elem.removeEventListener){elem.removeEventListener(type,data.dispatcher,false);}else if(elem.detachEvent){elem.detachEvent('on'+type,data.dispatcher);}}// Remove the events object if there are no types left
if(Object.getOwnPropertyNames(data.handlers).length<=0){delete data.handlers;delete data.dispatcher;delete data.disabled;}// Finally remove the element data if there is no data left
if(Object.getOwnPropertyNames(data).length===0){removeData(elem);}}/**
   * Loops through an array of event types and calls the requested method for each type.
   *
   * @param {Function} fn
   *        The event method we want to use.
   *
   * @param {Element|Object} elem
   *        Element or object to bind listeners to
   *
   * @param {string} type
   *        Type of event to bind to.
   *
   * @param {EventTarget~EventListener} callback
   *        Event listener.
   */function _handleMultipleEvents(fn,elem,types,callback){types.forEach(function(type){// Call the event method for each one of the types
fn(elem,type,callback);});}/**
   * Fix a native event to have standard property values
   *
   * @param {Object} event
   *        Event object to fix.
   *
   * @return {Object}
   *         Fixed event object.
   */function fixEvent(event){function returnTrue(){return true;}function returnFalse(){return false;}// Test if fixing up is needed
// Used to check if !event.stopPropagation instead of isPropagationStopped
// But native events return true for stopPropagation, but don't have
// other expected methods like isPropagationStopped. Seems to be a problem
// with the Javascript Ninja code. So we're just overriding all events now.
if(!event||!event.isPropagationStopped){var old=event||window$1.event;event={};// Clone the old object so that we can modify the values event = {};
// IE8 Doesn't like when you mess with native event properties
// Firefox returns false for event.hasOwnProperty('type') and other props
//  which makes copying more difficult.
// TODO: Probably best to create a whitelist of event props
for(var key in old){// Safari 6.0.3 warns you if you try to copy deprecated layerX/Y
// Chrome warns you if you try to copy deprecated keyboardEvent.keyLocation
// and webkitMovementX/Y
if(key!=='layerX'&&key!=='layerY'&&key!=='keyLocation'&&key!=='webkitMovementX'&&key!=='webkitMovementY'){// Chrome 32+ warns if you try to copy deprecated returnValue, but
// we still want to if preventDefault isn't supported (IE8).
if(!(key==='returnValue'&&old.preventDefault)){event[key]=old[key];}}}// The event occurred on this element
if(!event.target){event.target=event.srcElement||document;}// Handle which other element the event is related to
if(!event.relatedTarget){event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement;}// Stop the default browser action
event.preventDefault=function(){if(old.preventDefault){old.preventDefault();}event.returnValue=false;old.returnValue=false;event.defaultPrevented=true;};event.defaultPrevented=false;// Stop the event from bubbling
event.stopPropagation=function(){if(old.stopPropagation){old.stopPropagation();}event.cancelBubble=true;old.cancelBubble=true;event.isPropagationStopped=returnTrue;};event.isPropagationStopped=returnFalse;// Stop the event from bubbling and executing other handlers
event.stopImmediatePropagation=function(){if(old.stopImmediatePropagation){old.stopImmediatePropagation();}event.isImmediatePropagationStopped=returnTrue;event.stopPropagation();};event.isImmediatePropagationStopped=returnFalse;// Handle mouse position
if(event.clientX!==null&&event.clientX!==undefined){var doc=document.documentElement;var body=document.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}// Handle key presses
event.which=event.charCode||event.keyCode;// Fix button for mouse clicks:
// 0 == left; 1 == middle; 2 == right
if(event.button!==null&&event.button!==undefined){// The following is disabled because it does not pass videojs-standard
// and... yikes.
/* eslint-disable */event.button=event.button&1?0:event.button&4?1:event.button&2?2:0;/* eslint-enable */}}// Returns fixed-up instance
return event;}/**
   * Whether passive event listeners are supported
   */var _supportsPassive=false;(function(){try{var opts=Object.defineProperty({},'passive',{get:function get(){_supportsPassive=true;}});window$1.addEventListener('test',null,opts);window$1.removeEventListener('test',null,opts);}catch(e){// disregard
}})();/**
   * Touch events Chrome expects to be passive
   */var passiveEvents=['touchstart','touchmove'];/**
   * Add an event listener to element
   * It stores the handler function in a separate cache object
   * and adds a generic handler to the element's event,
   * along with a unique id (guid) to the element.
   *
   * @param {Element|Object} elem
   *        Element or object to bind listeners to
   *
   * @param {string|string[]} type
   *        Type of event to bind to.
   *
   * @param {EventTarget~EventListener} fn
   *        Event listener.
   */function on(elem,type,fn){if(Array.isArray(type)){return _handleMultipleEvents(on,elem,type,fn);}var data=getData(elem);// We need a place to store all our handler data
if(!data.handlers){data.handlers={};}if(!data.handlers[type]){data.handlers[type]=[];}if(!fn.guid){fn.guid=newGUID();}data.handlers[type].push(fn);if(!data.dispatcher){data.disabled=false;data.dispatcher=function(event,hash){if(data.disabled){return;}event=fixEvent(event);var handlers=data.handlers[event.type];if(handlers){// Copy handlers so if handlers are added/removed during the process it doesn't throw everything off.
var handlersCopy=handlers.slice(0);for(var m=0,n=handlersCopy.length;m<n;m++){if(event.isImmediatePropagationStopped()){break;}else{try{handlersCopy[m].call(elem,event,hash);}catch(e){log.error(e);}}}}};}if(data.handlers[type].length===1){if(elem.addEventListener){var options=false;if(_supportsPassive&&passiveEvents.indexOf(type)>-1){options={passive:true};}elem.addEventListener(type,data.dispatcher,options);}else if(elem.attachEvent){elem.attachEvent('on'+type,data.dispatcher);}}}/**
   * Removes event listeners from an element
   *
   * @param {Element|Object} elem
   *        Object to remove listeners from.
   *
   * @param {string|string[]} [type]
   *        Type of listener to remove. Don't include to remove all events from element.
   *
   * @param {EventTarget~EventListener} [fn]
   *        Specific listener to remove. Don't include to remove listeners for an event
   *        type.
   */function off(elem,type,fn){// Don't want to add a cache object through getElData if not needed
if(!hasData(elem)){return;}var data=getData(elem);// If no events exist, nothing to unbind
if(!data.handlers){return;}if(Array.isArray(type)){return _handleMultipleEvents(off,elem,type,fn);}// Utility function
var removeType=function removeType(el,t){data.handlers[t]=[];_cleanUpEvents(el,t);};// Are we removing all bound events?
if(type===undefined){for(var t in data.handlers){if(Object.prototype.hasOwnProperty.call(data.handlers||{},t)){removeType(elem,t);}}return;}var handlers=data.handlers[type];// If no handlers exist, nothing to unbind
if(!handlers){return;}// If no listener was provided, remove all listeners for type
if(!fn){removeType(elem,type);return;}// We're only removing a single handler
if(fn.guid){for(var n=0;n<handlers.length;n++){if(handlers[n].guid===fn.guid){handlers.splice(n--,1);}}}_cleanUpEvents(elem,type);}/**
   * Trigger an event for an element
   *
   * @param {Element|Object} elem
   *        Element to trigger an event on
   *
   * @param {EventTarget~Event|string} event
   *        A string (the type) or an event object with a type attribute
   *
   * @param {Object} [hash]
   *        data hash to pass along with the event
   *
   * @return {boolean|undefined}
   *         Returns the opposite of `defaultPrevented` if default was
   *         prevented. Otherwise, returns `undefined`
   */function trigger(elem,event,hash){// Fetches element data and a reference to the parent (for bubbling).
// Don't want to add a data object to cache for every parent,
// so checking hasElData first.
var elemData=hasData(elem)?getData(elem):{};var parent=elem.parentNode||elem.ownerDocument;// type = event.type || event,
// handler;
// If an event name was passed as a string, creates an event out of it
if(typeof event==='string'){event={type:event,target:elem};}else if(!event.target){event.target=elem;}// Normalizes the event properties.
event=fixEvent(event);// If the passed element has a dispatcher, executes the established handlers.
if(elemData.dispatcher){elemData.dispatcher.call(elem,event,hash);}// Unless explicitly stopped or the event does not bubble (e.g. media events)
// recursively calls this function to bubble the event up the DOM.
if(parent&&!event.isPropagationStopped()&&event.bubbles===true){trigger.call(null,parent,event,hash);// If at the top of the DOM, triggers the default action unless disabled.
}else if(!parent&&!event.defaultPrevented&&event.target&&event.target[event.type]){var targetData=getData(event.target);// Checks if the target has a default action for this event.
if(event.target[event.type]){// Temporarily disables event dispatching on the target as we have already executed the handler.
targetData.disabled=true;// Executes the default action.
if(typeof event.target[event.type]==='function'){event.target[event.type]();}// Re-enables event dispatching.
targetData.disabled=false;}}// Inform the triggerer if the default was prevented by returning false
return!event.defaultPrevented;}/**
   * Trigger a listener only once for an event.
   *
   * @param {Element|Object} elem
   *        Element or object to bind to.
   *
   * @param {string|string[]} type
   *        Name/type of event
   *
   * @param {Event~EventListener} fn
   *        Event listener function
   */function one(elem,type,fn){if(Array.isArray(type)){return _handleMultipleEvents(one,elem,type,fn);}var func=function func(){off(elem,type,func);fn.apply(this,arguments);};// copy the guid to the new function so it can removed using the original function's ID
func.guid=fn.guid=fn.guid||newGUID();on(elem,type,func);}var Events=/*#__PURE__*/Object.freeze({fixEvent:fixEvent,on:on,off:off,trigger:trigger,one:one});/**
   * @file setup.js - Functions for setting up a player without
   * user interaction based on the data-setup `attribute` of the video tag.
   *
   * @module setup
   */var _windowLoaded=false;var videojs;/**
   * Set up any tags that have a data-setup `attribute` when the player is started.
   */var autoSetup=function autoSetup(){// Protect against breakage in non-browser environments and check global autoSetup option.
if(!isReal()||videojs.options.autoSetup===false){return;}var vids=Array.prototype.slice.call(document.getElementsByTagName('video'));var audios=Array.prototype.slice.call(document.getElementsByTagName('audio'));var divs=Array.prototype.slice.call(document.getElementsByTagName('video-js'));var mediaEls=vids.concat(audios,divs);// Check if any media elements exist
if(mediaEls&&mediaEls.length>0){for(var i=0,e=mediaEls.length;i<e;i++){var mediaEl=mediaEls[i];// Check if element exists, has getAttribute func.
if(mediaEl&&mediaEl.getAttribute){// Make sure this player hasn't already been set up.
if(mediaEl.player===undefined){var options=mediaEl.getAttribute('data-setup');// Check if data-setup attr exists.
// We only auto-setup if they've added the data-setup attr.
if(options!==null){// Create new video.js instance.
videojs(mediaEl);}}// If getAttribute isn't defined, we need to wait for the DOM.
}else{autoSetupTimeout(1);break;}}// No videos were found, so keep looping unless page is finished loading.
}else if(!_windowLoaded){autoSetupTimeout(1);}};/**
   * Wait until the page is loaded before running autoSetup. This will be called in
   * autoSetup if `hasLoaded` returns false.
   *
   * @param {number} wait
   *        How long to wait in ms
   *
   * @param {module:videojs} [vjs]
   *        The videojs library function
   */function autoSetupTimeout(wait,vjs){if(vjs){videojs=vjs;}window$1.setTimeout(autoSetup,wait);}if(isReal()&&document.readyState==='complete'){_windowLoaded=true;}else{/**
     * Listen for the load event on window, and set _windowLoaded to true.
     *
     * @listens load
     */one(window$1,'load',function(){_windowLoaded=true;});}/**
   * @file stylesheet.js
   * @module stylesheet
   *//**
   * Create a DOM syle element given a className for it.
   *
   * @param {string} className
   *        The className to add to the created style element.
   *
   * @return {Element}
   *         The element that was created.
   */var createStyleElement=function createStyleElement(className){var style=document.createElement('style');style.className=className;return style;};/**
   * Add text to a DOM element.
   *
   * @param {Element} el
   *        The Element to add text content to.
   *
   * @param {string} content
   *        The text to add to the element.
   */var setTextContent=function setTextContent(el,content){if(el.styleSheet){el.styleSheet.cssText=content;}else{el.textContent=content;}};/**
   * @file fn.js
   * @module fn
   *//**
   * Bind (a.k.a proxy or context). A simple method for changing the context of
   * a function.
   *
   * It also stores a unique id on the function so it can be easily removed from
   * events.
   *
   * @function
   * @param    {Mixed} context
   *           The object to bind as scope.
   *
   * @param    {Function} fn
   *           The function to be bound to a scope.
   *
   * @param    {number} [uid]
   *           An optional unique ID for the function to be set
   *
   * @return   {Function}
   *           The new function that will be bound into the context given
   */var bind=function bind(context,fn,uid){// Make sure the function has a unique ID
if(!fn.guid){fn.guid=newGUID();}// Create the new function that changes the context
var bound=function bound(){return fn.apply(context,arguments);};// Allow for the ability to individualize this function
// Needed in the case where multiple objects might share the same prototype
// IF both items add an event listener with the same function, then you try to remove just one
// it will remove both because they both have the same guid.
// when using this, you need to use the bind method when you remove the listener as well.
// currently used in text tracks
bound.guid=uid?uid+'_'+fn.guid:fn.guid;return bound;};/**
   * Wraps the given function, `fn`, with a new function that only invokes `fn`
   * at most once per every `wait` milliseconds.
   *
   * @function
   * @param    {Function} fn
   *           The function to be throttled.
   *
   * @param    {number}   wait
   *           The number of milliseconds by which to throttle.
   *
   * @return   {Function}
   */var throttle=function throttle(fn,wait){var last=Date.now();var throttled=function throttled(){var now=Date.now();if(now-last>=wait){fn.apply(void 0,arguments);last=now;}};return throttled;};/**
   * Creates a debounced function that delays invoking `func` until after `wait`
   * milliseconds have elapsed since the last time the debounced function was
   * invoked.
   *
   * Inspired by lodash and underscore implementations.
   *
   * @function
   * @param    {Function} func
   *           The function to wrap with debounce behavior.
   *
   * @param    {number} wait
   *           The number of milliseconds to wait after the last invocation.
   *
   * @param    {boolean} [immediate]
   *           Whether or not to invoke the function immediately upon creation.
   *
   * @param    {Object} [context=window]
   *           The "context" in which the debounced function should debounce. For
   *           example, if this function should be tied to a Video.js player,
   *           the player can be passed here. Alternatively, defaults to the
   *           global `window` object.
   *
   * @return   {Function}
   *           A debounced function.
   */var debounce=function debounce(func,wait,immediate,context){if(context===void 0){context=window$1;}var timeout;var cancel=function cancel(){context.clearTimeout(timeout);timeout=null;};/* eslint-disable consistent-this */var debounced=function debounced(){var self=this;var args=arguments;var _later=function later(){timeout=null;_later=null;if(!immediate){func.apply(self,args);}};if(!timeout&&immediate){func.apply(self,args);}context.clearTimeout(timeout);timeout=context.setTimeout(_later,wait);};/* eslint-enable consistent-this */debounced.cancel=cancel;return debounced;};/**
   * @file src/js/event-target.js
   *//**
   * `EventTarget` is a class that can have the same API as the DOM `EventTarget`. It
   * adds shorthand functions that wrap around lengthy functions. For example:
   * the `on` function is a wrapper around `addEventListener`.
   *
   * @see [EventTarget Spec]{@link https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget}
   * @class EventTarget
   */var EventTarget=function EventTarget(){};/**
   * A Custom DOM event.
   *
   * @typedef {Object} EventTarget~Event
   * @see [Properties]{@link https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent}
   *//**
   * All event listeners should follow the following format.
   *
   * @callback EventTarget~EventListener
   * @this {EventTarget}
   *
   * @param {EventTarget~Event} event
   *        the event that triggered this function
   *
   * @param {Object} [hash]
   *        hash of data sent during the event
   *//**
   * An object containing event names as keys and booleans as values.
   *
   * > NOTE: If an event name is set to a true value here {@link EventTarget#trigger}
   *         will have extra functionality. See that function for more information.
   *
   * @property EventTarget.prototype.allowedEvents_
   * @private
   */EventTarget.prototype.allowedEvents_={};/**
   * Adds an `event listener` to an instance of an `EventTarget`. An `event listener` is a
   * function that will get called when an event with a certain name gets triggered.
   *
   * @param {string|string[]} type
   *        An event name or an array of event names.
   *
   * @param {EventTarget~EventListener} fn
   *        The function to call with `EventTarget`s
   */EventTarget.prototype.on=function(type,fn){// Remove the addEventListener alias before calling Events.on
// so we don't get into an infinite type loop
var ael=this.addEventListener;this.addEventListener=function(){};on(this,type,fn);this.addEventListener=ael;};/**
   * An alias of {@link EventTarget#on}. Allows `EventTarget` to mimic
   * the standard DOM API.
   *
   * @function
   * @see {@link EventTarget#on}
   */EventTarget.prototype.addEventListener=EventTarget.prototype.on;/**
   * Removes an `event listener` for a specific event from an instance of `EventTarget`.
   * This makes it so that the `event listener` will no longer get called when the
   * named event happens.
   *
   * @param {string|string[]} type
   *        An event name or an array of event names.
   *
   * @param {EventTarget~EventListener} fn
   *        The function to remove.
   */EventTarget.prototype.off=function(type,fn){off(this,type,fn);};/**
   * An alias of {@link EventTarget#off}. Allows `EventTarget` to mimic
   * the standard DOM API.
   *
   * @function
   * @see {@link EventTarget#off}
   */EventTarget.prototype.removeEventListener=EventTarget.prototype.off;/**
   * This function will add an `event listener` that gets triggered only once. After the
   * first trigger it will get removed. This is like adding an `event listener`
   * with {@link EventTarget#on} that calls {@link EventTarget#off} on itself.
   *
   * @param {string|string[]} type
   *        An event name or an array of event names.
   *
   * @param {EventTarget~EventListener} fn
   *        The function to be called once for each event name.
   */EventTarget.prototype.one=function(type,fn){// Remove the addEventListener alialing Events.on
// so we don't get into an infinite type loop
var ael=this.addEventListener;this.addEventListener=function(){};one(this,type,fn);this.addEventListener=ael;};/**
   * This function causes an event to happen. This will then cause any `event listeners`
   * that are waiting for that event, to get called. If there are no `event listeners`
   * for an event then nothing will happen.
   *
   * If the name of the `Event` that is being triggered is in `EventTarget.allowedEvents_`.
   * Trigger will also call the `on` + `uppercaseEventName` function.
   *
   * Example:
   * 'click' is in `EventTarget.allowedEvents_`, so, trigger will attempt to call
   * `onClick` if it exists.
   *
   * @param {string|EventTarget~Event|Object} event
   *        The name of the event, an `Event`, or an object with a key of type set to
   *        an event name.
   */EventTarget.prototype.trigger=function(event){var type=event.type||event;// deprecation
// In a future version we should default target to `this`
// similar to how we default the target to `elem` in
// `Events.trigger`. Right now the default `target` will be
// `document` due to the `Event.fixEvent` call.
if(typeof event==='string'){event={type:type};}event=fixEvent(event);if(this.allowedEvents_[type]&&this['on'+type]){this['on'+type](event);}trigger(this,event);};/**
   * An alias of {@link EventTarget#trigger}. Allows `EventTarget` to mimic
   * the standard DOM API.
   *
   * @function
   * @see {@link EventTarget#trigger}
   */EventTarget.prototype.dispatchEvent=EventTarget.prototype.trigger;var EVENT_MAP;EventTarget.prototype.queueTrigger=function(event){var _this=this;// only set up EVENT_MAP if it'll be used
if(!EVENT_MAP){EVENT_MAP=new Map();}var type=event.type||event;var map=EVENT_MAP.get(this);if(!map){map=new Map();EVENT_MAP.set(this,map);}var oldTimeout=map.get(type);map.delete(type);window$1.clearTimeout(oldTimeout);var timeout=window$1.setTimeout(function(){// if we cleared out all timeouts for the current target, delete its map
if(map.size===0){map=null;EVENT_MAP.delete(_this);}_this.trigger(event);},0);map.set(type,timeout);};/**
   * @file mixins/evented.js
   * @module evented
   *//**
   * Returns whether or not an object has had the evented mixin applied.
   *
   * @param  {Object} object
   *         An object to test.
   *
   * @return {boolean}
   *         Whether or not the object appears to be evented.
   */var isEvented=function isEvented(object){return object instanceof EventTarget||!!object.eventBusEl_&&['on','one','off','trigger'].every(function(k){return typeof object[k]==='function';});};/**
   * Adds a callback to run after the evented mixin applied.
   *
   * @param  {Object} object
   *         An object to Add
   * @param  {Function} callback
   *         The callback to run.
   */var addEventedCallback=function addEventedCallback(target,callback){if(isEvented(target)){callback();}else{if(!target.eventedCallbacks){target.eventedCallbacks=[];}target.eventedCallbacks.push(callback);}};/**
   * Whether a value is a valid event type - non-empty string or array.
   *
   * @private
   * @param  {string|Array} type
   *         The type value to test.
   *
   * @return {boolean}
   *         Whether or not the type is a valid event type.
   */var isValidEventType=function isValidEventType(type){return(// The regex here verifies that the `type` contains at least one non-
// whitespace character.
typeof type==='string'&&/\S/.test(type)||Array.isArray(type)&&!!type.length);};/**
   * Validates a value to determine if it is a valid event target. Throws if not.
   *
   * @private
   * @throws {Error}
   *         If the target does not appear to be a valid event target.
   *
   * @param  {Object} target
   *         The object to test.
   */var validateTarget=function validateTarget(target){if(!target.nodeName&&!isEvented(target)){throw new Error('Invalid target; must be a DOM node or evented object.');}};/**
   * Validates a value to determine if it is a valid event target. Throws if not.
   *
   * @private
   * @throws {Error}
   *         If the type does not appear to be a valid event type.
   *
   * @param  {string|Array} type
   *         The type to test.
   */var validateEventType=function validateEventType(type){if(!isValidEventType(type)){throw new Error('Invalid event type; must be a non-empty string or array.');}};/**
   * Validates a value to determine if it is a valid listener. Throws if not.
   *
   * @private
   * @throws {Error}
   *         If the listener is not a function.
   *
   * @param  {Function} listener
   *         The listener to test.
   */var validateListener=function validateListener(listener){if(typeof listener!=='function'){throw new Error('Invalid listener; must be a function.');}};/**
   * Takes an array of arguments given to `on()` or `one()`, validates them, and
   * normalizes them into an object.
   *
   * @private
   * @param  {Object} self
   *         The evented object on which `on()` or `one()` was called. This
   *         object will be bound as the `this` value for the listener.
   *
   * @param  {Array} args
   *         An array of arguments passed to `on()` or `one()`.
   *
   * @return {Object}
   *         An object containing useful values for `on()` or `one()` calls.
   */var normalizeListenArgs=function normalizeListenArgs(self,args){// If the number of arguments is less than 3, the target is always the
// evented object itself.
var isTargetingSelf=args.length<3||args[0]===self||args[0]===self.eventBusEl_;var target;var type;var listener;if(isTargetingSelf){target=self.eventBusEl_;// Deal with cases where we got 3 arguments, but we are still listening to
// the evented object itself.
if(args.length>=3){args.shift();}type=args[0];listener=args[1];}else{target=args[0];type=args[1];listener=args[2];}validateTarget(target);validateEventType(type);validateListener(listener);listener=bind(self,listener);return{isTargetingSelf:isTargetingSelf,target:target,type:type,listener:listener};};/**
   * Adds the listener to the event type(s) on the target, normalizing for
   * the type of target.
   *
   * @private
   * @param  {Element|Object} target
   *         A DOM node or evented object.
   *
   * @param  {string} method
   *         The event binding method to use ("on" or "one").
   *
   * @param  {string|Array} type
   *         One or more event type(s).
   *
   * @param  {Function} listener
   *         A listener function.
   */var listen=function listen(target,method,type,listener){validateTarget(target);if(target.nodeName){Events[method](target,type,listener);}else{target[method](type,listener);}};/**
   * Contains methods that provide event capabilities to an object which is passed
   * to {@link module:evented|evented}.
   *
   * @mixin EventedMixin
   */var EventedMixin={/**
     * Add a listener to an event (or events) on this object or another evented
     * object.
     *
     * @param  {string|Array|Element|Object} targetOrType
     *         If this is a string or array, it represents the event type(s)
     *         that will trigger the listener.
     *
     *         Another evented object can be passed here instead, which will
     *         cause the listener to listen for events on _that_ object.
     *
     *         In either case, the listener's `this` value will be bound to
     *         this object.
     *
     * @param  {string|Array|Function} typeOrListener
     *         If the first argument was a string or array, this should be the
     *         listener function. Otherwise, this is a string or array of event
     *         type(s).
     *
     * @param  {Function} [listener]
     *         If the first argument was another evented object, this will be
     *         the listener function.
     */on:function on$$1(){var _this=this;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var _normalizeListenArgs=normalizeListenArgs(this,args),isTargetingSelf=_normalizeListenArgs.isTargetingSelf,target=_normalizeListenArgs.target,type=_normalizeListenArgs.type,listener=_normalizeListenArgs.listener;listen(target,'on',type,listener);// If this object is listening to another evented object.
if(!isTargetingSelf){// If this object is disposed, remove the listener.
var removeListenerOnDispose=function removeListenerOnDispose(){return _this.off(target,type,listener);};// Use the same function ID as the listener so we can remove it later it
// using the ID of the original listener.
removeListenerOnDispose.guid=listener.guid;// Add a listener to the target's dispose event as well. This ensures
// that if the target is disposed BEFORE this object, we remove the
// removal listener that was just added. Otherwise, we create a memory leak.
var removeRemoverOnTargetDispose=function removeRemoverOnTargetDispose(){return _this.off('dispose',removeListenerOnDispose);};// Use the same function ID as the listener so we can remove it later
// it using the ID of the original listener.
removeRemoverOnTargetDispose.guid=listener.guid;listen(this,'on','dispose',removeListenerOnDispose);listen(target,'on','dispose',removeRemoverOnTargetDispose);}},/**
     * Add a listener to an event (or events) on this object or another evented
     * object. The listener will only be called once and then removed.
     *
     * @param  {string|Array|Element|Object} targetOrType
     *         If this is a string or array, it represents the event type(s)
     *         that will trigger the listener.
     *
     *         Another evented object can be passed here instead, which will
     *         cause the listener to listen for events on _that_ object.
     *
     *         In either case, the listener's `this` value will be bound to
     *         this object.
     *
     * @param  {string|Array|Function} typeOrListener
     *         If the first argument was a string or array, this should be the
     *         listener function. Otherwise, this is a string or array of event
     *         type(s).
     *
     * @param  {Function} [listener]
     *         If the first argument was another evented object, this will be
     *         the listener function.
     */one:function one$$1(){var _this2=this;for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}var _normalizeListenArgs2=normalizeListenArgs(this,args),isTargetingSelf=_normalizeListenArgs2.isTargetingSelf,target=_normalizeListenArgs2.target,type=_normalizeListenArgs2.type,listener=_normalizeListenArgs2.listener;// Targeting this evented object.
if(isTargetingSelf){listen(target,'one',type,listener);// Targeting another evented object.
}else{var wrapper=function wrapper(){_this2.off(target,type,wrapper);for(var _len3=arguments.length,largs=new Array(_len3),_key3=0;_key3<_len3;_key3++){largs[_key3]=arguments[_key3];}listener.apply(null,largs);};// Use the same function ID as the listener so we can remove it later
// it using the ID of the original listener.
wrapper.guid=listener.guid;listen(target,'one',type,wrapper);}},/**
     * Removes listener(s) from event(s) on an evented object.
     *
     * @param  {string|Array|Element|Object} [targetOrType]
     *         If this is a string or array, it represents the event type(s).
     *
     *         Another evented object can be passed here instead, in which case
     *         ALL 3 arguments are _required_.
     *
     * @param  {string|Array|Function} [typeOrListener]
     *         If the first argument was a string or array, this may be the
     *         listener function. Otherwise, this is a string or array of event
     *         type(s).
     *
     * @param  {Function} [listener]
     *         If the first argument was another evented object, this will be
     *         the listener function; otherwise, _all_ listeners bound to the
     *         event type(s) will be removed.
     */off:function off$$1(targetOrType,typeOrListener,listener){// Targeting this evented object.
if(!targetOrType||isValidEventType(targetOrType)){off(this.eventBusEl_,targetOrType,typeOrListener);// Targeting another evented object.
}else{var target=targetOrType;var type=typeOrListener;// Fail fast and in a meaningful way!
validateTarget(target);validateEventType(type);validateListener(listener);// Ensure there's at least a guid, even if the function hasn't been used
listener=bind(this,listener);// Remove the dispose listener on this evented object, which was given
// the same guid as the event listener in on().
this.off('dispose',listener);if(target.nodeName){off(target,type,listener);off(target,'dispose',listener);}else if(isEvented(target)){target.off(type,listener);target.off('dispose',listener);}}},/**
     * Fire an event on this evented object, causing its listeners to be called.
     *
     * @param   {string|Object} event
     *          An event type or an object with a type property.
     *
     * @param   {Object} [hash]
     *          An additional object to pass along to listeners.
     *
     * @return {boolean}
     *          Whether or not the default behavior was prevented.
     */trigger:function trigger$$1(event,hash){return trigger(this.eventBusEl_,event,hash);}};/**
   * Applies {@link module:evented~EventedMixin|EventedMixin} to a target object.
   *
   * @param  {Object} target
   *         The object to which to add event methods.
   *
   * @param  {Object} [options={}]
   *         Options for customizing the mixin behavior.
   *
   * @param  {string} [options.eventBusKey]
   *         By default, adds a `eventBusEl_` DOM element to the target object,
   *         which is used as an event bus. If the target object already has a
   *         DOM element that should be used, pass its key here.
   *
   * @return {Object}
   *         The target object.
   */function evented(target,options){if(options===void 0){options={};}var _options=options,eventBusKey=_options.eventBusKey;// Set or create the eventBusEl_.
if(eventBusKey){if(!target[eventBusKey].nodeName){throw new Error("The eventBusKey \""+eventBusKey+"\" does not refer to an element.");}target.eventBusEl_=target[eventBusKey];}else{target.eventBusEl_=createEl('span',{className:'vjs-event-bus'});}assign(target,EventedMixin);if(target.eventedCallbacks){target.eventedCallbacks.forEach(function(callback){callback();});}// When any evented object is disposed, it removes all its listeners.
target.on('dispose',function(){target.off();window$1.setTimeout(function(){target.eventBusEl_=null;},0);});return target;}/**
   * @file mixins/stateful.js
   * @module stateful
   *//**
   * Contains methods that provide statefulness to an object which is passed
   * to {@link module:stateful}.
   *
   * @mixin StatefulMixin
   */var StatefulMixin={/**
     * A hash containing arbitrary keys and values representing the state of
     * the object.
     *
     * @type {Object}
     */state:{},/**
     * Set the state of an object by mutating its
     * {@link module:stateful~StatefulMixin.state|state} object in place.
     *
     * @fires   module:stateful~StatefulMixin#statechanged
     * @param   {Object|Function} stateUpdates
     *          A new set of properties to shallow-merge into the plugin state.
     *          Can be a plain object or a function returning a plain object.
     *
     * @return {Object|undefined}
     *          An object containing changes that occurred. If no changes
     *          occurred, returns `undefined`.
     */setState:function setState(stateUpdates){var _this=this;// Support providing the `stateUpdates` state as a function.
if(typeof stateUpdates==='function'){stateUpdates=stateUpdates();}var changes;each(stateUpdates,function(value,key){// Record the change if the value is different from what's in the
// current state.
if(_this.state[key]!==value){changes=changes||{};changes[key]={from:_this.state[key],to:value};}_this.state[key]=value;});// Only trigger "statechange" if there were changes AND we have a trigger
// function. This allows us to not require that the target object be an
// evented object.
if(changes&&isEvented(this)){/**
         * An event triggered on an object that is both
         * {@link module:stateful|stateful} and {@link module:evented|evented}
         * indicating that its state has changed.
         *
         * @event    module:stateful~StatefulMixin#statechanged
         * @type     {Object}
         * @property {Object} changes
         *           A hash containing the properties that were changed and
         *           the values they were changed `from` and `to`.
         */this.trigger({changes:changes,type:'statechanged'});}return changes;}};/**
   * Applies {@link module:stateful~StatefulMixin|StatefulMixin} to a target
   * object.
   *
   * If the target object is {@link module:evented|evented} and has a
   * `handleStateChanged` method, that method will be automatically bound to the
   * `statechanged` event on itself.
   *
   * @param   {Object} target
   *          The object to be made stateful.
   *
   * @param   {Object} [defaultState]
   *          A default set of properties to populate the newly-stateful object's
   *          `state` property.
   *
   * @return {Object}
   *          Returns the `target`.
   */function stateful(target,defaultState){assign(target,StatefulMixin);// This happens after the mixing-in because we need to replace the `state`
// added in that step.
target.state=assign({},target.state,defaultState);// Auto-bind the `handleStateChanged` method of the target object if it exists.
if(typeof target.handleStateChanged==='function'&&isEvented(target)){target.on('statechanged',target.handleStateChanged);}return target;}/**
   * @file to-title-case.js
   * @module to-title-case
   *//**
   * Uppercase the first letter of a string.
   *
   * @param {string} string
   *        String to be uppercased
   *
   * @return {string}
   *         The string with an uppercased first letter
   */function toTitleCase(string){if(typeof string!=='string'){return string;}return string.charAt(0).toUpperCase()+string.slice(1);}/**
   * Compares the TitleCase versions of the two strings for equality.
   *
   * @param {string} str1
   *        The first string to compare
   *
   * @param {string} str2
   *        The second string to compare
   *
   * @return {boolean}
   *         Whether the TitleCase versions of the strings are equal
   */function titleCaseEquals(str1,str2){return toTitleCase(str1)===toTitleCase(str2);}/**
   * @file merge-options.js
   * @module merge-options
   *//**
   * Merge two objects recursively.
   *
   * Performs a deep merge like
   * {@link https://lodash.com/docs/4.17.10#merge|lodash.merge}, but only merges
   * plain objects (not arrays, elements, or anything else).
   *
   * Non-plain object values will be copied directly from the right-most
   * argument.
   *
   * @static
   * @param   {Object[]} sources
   *          One or more objects to merge into a new object.
   *
   * @return {Object}
   *          A new object that is the merged result of all sources.
   */function mergeOptions(){var result={};for(var _len=arguments.length,sources=new Array(_len),_key=0;_key<_len;_key++){sources[_key]=arguments[_key];}sources.forEach(function(source){if(!source){return;}each(source,function(value,key){if(!isPlain(value)){result[key]=value;return;}if(!isPlain(result[key])){result[key]={};}result[key]=mergeOptions(result[key],value);});});return result;}/**
   * Player Component - Base class for all UI objects
   *
   * @file component.js
   *//**
   * Base class for all UI Components.
   * Components are UI objects which represent both a javascript object and an element
   * in the DOM. They can be children of other components, and can have
   * children themselves.
   *
   * Components can also use methods from {@link EventTarget}
   */var Component=/*#__PURE__*/function(){/**
     * A callback that is called when a component is ready. Does not have any
     * paramters and any callback value will be ignored.
     *
     * @callback Component~ReadyCallback
     * @this Component
     *//**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     *
     * @param {Object[]} [options.children]
     *        An array of children objects to intialize this component with. Children objects have
     *        a name property that will be used if more than one component of the same type needs to be
     *        added.
     *
     * @param {Component~ReadyCallback} [ready]
     *        Function that gets called when the `Component` is ready.
     */function Component(player,options,ready){// The component might be the player itself and we can't pass `this` to super
if(!player&&this.play){this.player_=player=this;// eslint-disable-line
}else{this.player_=player;}// Hold the reference to the parent component via `addChild` method
this.parentComponent_=null;// Make a copy of prototype.options_ to protect against overriding defaults
this.options_=mergeOptions({},this.options_);// Updated options with supplied options
options=this.options_=mergeOptions(this.options_,options);// Get ID from options or options element if one is supplied
this.id_=options.id||options.el&&options.el.id;// If there was no ID from the options, generate one
if(!this.id_){// Don't require the player ID function in the case of mock players
var id=player&&player.id&&player.id()||'no_player';this.id_=id+"_component_"+newGUID();}this.name_=options.name||null;// Create element if one wasn't provided in options
if(options.el){this.el_=options.el;}else if(options.createEl!==false){this.el_=this.createEl();}// if evented is anything except false, we want to mixin in evented
if(options.evented!==false){// Make this an evented object and use `el_`, if available, as its event bus
evented(this,{eventBusKey:this.el_?'el_':null});}stateful(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};// Add any child components in options
if(options.initChildren!==false){this.initChildren();}this.ready(ready);// Don't want to trigger ready here or it will before init is actually
// finished for all children that run this constructor
if(options.reportTouchActivity!==false){this.enableTouchActivity();}}/**
     * Dispose of the `Component` and all child components.
     *
     * @fires Component#dispose
     */var _proto=Component.prototype;_proto.dispose=function dispose(){/**
       * Triggered when a `Component` is disposed.
       *
       * @event Component#dispose
       * @type {EventTarget~Event}
       *
       * @property {boolean} [bubbles=false]
       *           set to false so that the close event does not
       *           bubble up
       */this.trigger({type:'dispose',bubbles:false});// Dispose all children.
if(this.children_){for(var i=this.children_.length-1;i>=0;i--){if(this.children_[i].dispose){this.children_[i].dispose();}}}// Delete child references
this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.parentComponent_=null;if(this.el_){// Remove element from DOM
if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_);}removeData(this.el_);this.el_=null;}// remove reference to the player after disposing of the element
this.player_=null;}/**
     * Return the {@link Player} that the `Component` has attached to.
     *
     * @return {Player}
     *         The player that this `Component` has attached to.
     */;_proto.player=function player(){return this.player_;}/**
     * Deep merge of options objects with new options.
     * > Note: When both `obj` and `options` contain properties whose values are objects.
     *         The two properties get merged using {@link module:mergeOptions}
     *
     * @param {Object} obj
     *        The object that contains new options.
     *
     * @return {Object}
     *         A new object of `this.options_` and `obj` merged together.
     *
     * @deprecated since version 5
     */;_proto.options=function options(obj){log.warn('this.options() has been deprecated and will be moved to the constructor in 6.0');if(!obj){return this.options_;}this.options_=mergeOptions(this.options_,obj);return this.options_;}/**
     * Get the `Component`s DOM element
     *
     * @return {Element}
     *         The DOM element for this `Component`.
     */;_proto.el=function el(){return this.el_;}/**
     * Create the `Component`s DOM element.
     *
     * @param {string} [tagName]
     *        Element's DOM node type. e.g. 'div'
     *
     * @param {Object} [properties]
     *        An object of properties that should be set.
     *
     * @param {Object} [attributes]
     *        An object of attributes that should be set.
     *
     * @return {Element}
     *         The element that gets created.
     */;_proto.createEl=function createEl$$1(tagName,properties,attributes){return createEl(tagName,properties,attributes);}/**
     * Localize a string given the string in english.
     *
     * If tokens are provided, it'll try and run a simple token replacement on the provided string.
     * The tokens it looks for look like `{1}` with the index being 1-indexed into the tokens array.
     *
     * If a `defaultValue` is provided, it'll use that over `string`,
     * if a value isn't found in provided language files.
     * This is useful if you want to have a descriptive key for token replacement
     * but have a succinct localized string and not require `en.json` to be included.
     *
     * Currently, it is used for the progress bar timing.
     * ```js
     * {
     *   "progress bar timing: currentTime={1} duration={2}": "{1} of {2}"
     * }
     * ```
     * It is then used like so:
     * ```js
     * this.localize('progress bar timing: currentTime={1} duration{2}',
     *               [this.player_.currentTime(), this.player_.duration()],
     *               '{1} of {2}');
     * ```
     *
     * Which outputs something like: `01:23 of 24:56`.
     *
     *
     * @param {string} string
     *        The string to localize and the key to lookup in the language files.
     * @param {string[]} [tokens]
     *        If the current item has token replacements, provide the tokens here.
     * @param {string} [defaultValue]
     *        Defaults to `string`. Can be a default value to use for token replacement
     *        if the lookup key is needed to be separate.
     *
     * @return {string}
     *         The localized string or if no localization exists the english string.
     */;_proto.localize=function localize(string,tokens,defaultValue){if(defaultValue===void 0){defaultValue=string;}var code=this.player_.language&&this.player_.language();var languages=this.player_.languages&&this.player_.languages();var language=languages&&languages[code];var primaryCode=code&&code.split('-')[0];var primaryLang=languages&&languages[primaryCode];var localizedString=defaultValue;if(language&&language[string]){localizedString=language[string];}else if(primaryLang&&primaryLang[string]){localizedString=primaryLang[string];}if(tokens){localizedString=localizedString.replace(/\{(\d+)\}/g,function(match,index){var value=tokens[index-1];var ret=value;if(typeof value==='undefined'){ret=match;}return ret;});}return localizedString;}/**
     * Return the `Component`s DOM element. This is where children get inserted.
     * This will usually be the the same as the element returned in {@link Component#el}.
     *
     * @return {Element}
     *         The content element for this `Component`.
     */;_proto.contentEl=function contentEl(){return this.contentEl_||this.el_;}/**
     * Get this `Component`s ID
     *
     * @return {string}
     *         The id of this `Component`
     */;_proto.id=function id(){return this.id_;}/**
     * Get the `Component`s name. The name gets used to reference the `Component`
     * and is set during registration.
     *
     * @return {string}
     *         The name of this `Component`.
     */;_proto.name=function name(){return this.name_;}/**
     * Get an array of all child components
     *
     * @return {Array}
     *         The children
     */;_proto.children=function children(){return this.children_;}/**
     * Returns the child `Component` with the given `id`.
     *
     * @param {string} id
     *        The id of the child `Component` to get.
     *
     * @return {Component|undefined}
     *         The child `Component` with the given `id` or undefined.
     */;_proto.getChildById=function getChildById(id){return this.childIndex_[id];}/**
     * Returns the child `Component` with the given `name`.
     *
     * @param {string} name
     *        The name of the child `Component` to get.
     *
     * @return {Component|undefined}
     *         The child `Component` with the given `name` or undefined.
     */;_proto.getChild=function getChild(name){if(!name){return;}name=toTitleCase(name);return this.childNameIndex_[name];}/**
     * Add a child `Component` inside the current `Component`.
     *
     *
     * @param {string|Component} child
     *        The name or instance of a child to add.
     *
     * @param {Object} [options={}]
     *        The key/value store of options that will get passed to children of
     *        the child.
     *
     * @param {number} [index=this.children_.length]
     *        The index to attempt to add a child into.
     *
     * @return {Component}
     *         The `Component` that gets added as a child. When using a string the
     *         `Component` will get created by this process.
     */;_proto.addChild=function addChild(child,options,index){if(options===void 0){options={};}if(index===void 0){index=this.children_.length;}var component;var componentName;// If child is a string, create component with options
if(typeof child==='string'){componentName=toTitleCase(child);var componentClassName=options.componentClass||componentName;// Set name through options
options.name=componentName;// Create a new object & element for this controls set
// If there's no .player_, this is a player
var ComponentClass=Component.getComponent(componentClassName);if(!ComponentClass){throw new Error("Component "+componentClassName+" does not exist");}// data stored directly on the videojs object may be
// misidentified as a component to retain
// backwards-compatibility with 4.x. check to make sure the
// component class can be instantiated.
if(typeof ComponentClass!=='function'){return null;}component=new ComponentClass(this.player_||this,options);// child is a component instance
}else{component=child;}if(component.parentComponent_){component.parentComponent_.removeChild(component);}this.children_.splice(index,0,component);component.parentComponent_=this;if(typeof component.id==='function'){this.childIndex_[component.id()]=component;}// If a name wasn't used to create the component, check if we can use the
// name function of the component
componentName=componentName||component.name&&toTitleCase(component.name());if(componentName){this.childNameIndex_[componentName]=component;}// Add the UI object's element to the container div (box)
// Having an element is not required
if(typeof component.el==='function'&&component.el()){var childNodes=this.contentEl().children;var refNode=childNodes[index]||null;this.contentEl().insertBefore(component.el(),refNode);}// Return so it can stored on parent object if desired.
return component;}/**
     * Remove a child `Component` from this `Component`s list of children. Also removes
     * the child `Component`s element from this `Component`s element.
     *
     * @param {Component} component
     *        The child `Component` to remove.
     */;_proto.removeChild=function removeChild(component){if(typeof component==='string'){component=this.getChild(component);}if(!component||!this.children_){return;}var childFound=false;for(var i=this.children_.length-1;i>=0;i--){if(this.children_[i]===component){childFound=true;this.children_.splice(i,1);break;}}if(!childFound){return;}component.parentComponent_=null;this.childIndex_[component.id()]=null;this.childNameIndex_[component.name()]=null;var compEl=component.el();if(compEl&&compEl.parentNode===this.contentEl()){this.contentEl().removeChild(component.el());}}/**
     * Add and initialize default child `Component`s based upon options.
     */;_proto.initChildren=function initChildren(){var _this=this;var children=this.options_.children;if(children){// `this` is `parent`
var parentOptions=this.options_;var handleAdd=function handleAdd(child){var name=child.name;var opts=child.opts;// Allow options for children to be set at the parent options
// e.g. videojs(id, { controlBar: false });
// instead of videojs(id, { children: { controlBar: false });
if(parentOptions[name]!==undefined){opts=parentOptions[name];}// Allow for disabling default components
// e.g. options['children']['posterImage'] = false
if(opts===false){return;}// Allow options to be passed as a simple boolean if no configuration
// is necessary.
if(opts===true){opts={};}// We also want to pass the original player options
// to each component as well so they don't need to
// reach back into the player for options later.
opts.playerOptions=_this.options_.playerOptions;// Create and add the child component.
// Add a direct reference to the child by name on the parent instance.
// If two of the same component are used, different names should be supplied
// for each
var newChild=_this.addChild(name,opts);if(newChild){_this[name]=newChild;}};// Allow for an array of children details to passed in the options
var workingChildren;var Tech=Component.getComponent('Tech');if(Array.isArray(children)){workingChildren=children;}else{workingChildren=Object.keys(children);}workingChildren// children that are in this.options_ but also in workingChildren  would
// give us extra children we do not want. So, we want to filter them out.
.concat(Object.keys(this.options_).filter(function(child){return!workingChildren.some(function(wchild){if(typeof wchild==='string'){return child===wchild;}return child===wchild.name;});})).map(function(child){var name;var opts;if(typeof child==='string'){name=child;opts=children[name]||_this.options_[name]||{};}else{name=child.name;opts=child;}return{name:name,opts:opts};}).filter(function(child){// we have to make sure that child.name isn't in the techOrder since
// techs are registerd as Components but can't aren't compatible
// See https://github.com/videojs/video.js/issues/2772
var c=Component.getComponent(child.opts.componentClass||toTitleCase(child.name));return c&&!Tech.isTech(c);}).forEach(handleAdd);}}/**
     * Builds the default DOM class name. Should be overriden by sub-components.
     *
     * @return {string}
     *         The DOM class name for this object.
     *
     * @abstract
     */;_proto.buildCSSClass=function buildCSSClass(){// Child classes can include a function that does:
// return 'CLASS NAME' + this._super();
return'';}/**
     * Bind a listener to the component's ready state.
     * Different from event listeners in that if the ready event has already happened
     * it will trigger the function immediately.
     *
     * @return {Component}
     *         Returns itself; method can be chained.
     */;_proto.ready=function ready(fn,sync){if(sync===void 0){sync=false;}if(!fn){return;}if(!this.isReady_){this.readyQueue_=this.readyQueue_||[];this.readyQueue_.push(fn);return;}if(sync){fn.call(this);}else{// Call the function asynchronously by default for consistency
this.setTimeout(fn,1);}}/**
     * Trigger all the ready listeners for this `Component`.
     *
     * @fires Component#ready
     */;_proto.triggerReady=function triggerReady(){this.isReady_=true;// Ensure ready is triggered asynchronously
this.setTimeout(function(){var readyQueue=this.readyQueue_;// Reset Ready Queue
this.readyQueue_=[];if(readyQueue&&readyQueue.length>0){readyQueue.forEach(function(fn){fn.call(this);},this);}// Allow for using event listeners also
/**
         * Triggered when a `Component` is ready.
         *
         * @event Component#ready
         * @type {EventTarget~Event}
         */this.trigger('ready');},1);}/**
     * Find a single DOM element matching a `selector`. This can be within the `Component`s
     * `contentEl()` or another custom context.
     *
     * @param {string} selector
     *        A valid CSS selector, which will be passed to `querySelector`.
     *
     * @param {Element|string} [context=this.contentEl()]
     *        A DOM element within which to query. Can also be a selector string in
     *        which case the first matching element will get used as context. If
     *        missing `this.contentEl()` gets used. If  `this.contentEl()` returns
     *        nothing it falls back to `document`.
     *
     * @return {Element|null}
     *         the dom element that was found, or null
     *
     * @see [Information on CSS Selectors](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_Started/Selectors)
     */;_proto.$=function $$$1(selector,context){return $(selector,context||this.contentEl());}/**
     * Finds all DOM element matching a `selector`. This can be within the `Component`s
     * `contentEl()` or another custom context.
     *
     * @param {string} selector
     *        A valid CSS selector, which will be passed to `querySelectorAll`.
     *
     * @param {Element|string} [context=this.contentEl()]
     *        A DOM element within which to query. Can also be a selector string in
     *        which case the first matching element will get used as context. If
     *        missing `this.contentEl()` gets used. If  `this.contentEl()` returns
     *        nothing it falls back to `document`.
     *
     * @return {NodeList}
     *         a list of dom elements that were found
     *
     * @see [Information on CSS Selectors](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_Started/Selectors)
     */;_proto.$$=function $$$$1(selector,context){return $$(selector,context||this.contentEl());}/**
     * Check if a component's element has a CSS class name.
     *
     * @param {string} classToCheck
     *        CSS class name to check.
     *
     * @return {boolean}
     *         - True if the `Component` has the class.
     *         - False if the `Component` does not have the class`
     */;_proto.hasClass=function hasClass$$1(classToCheck){return hasClass(this.el_,classToCheck);}/**
     * Add a CSS class name to the `Component`s element.
     *
     * @param {string} classToAdd
     *        CSS class name to add
     */;_proto.addClass=function addClass$$1(classToAdd){addClass(this.el_,classToAdd);}/**
     * Remove a CSS class name from the `Component`s element.
     *
     * @param {string} classToRemove
     *        CSS class name to remove
     */;_proto.removeClass=function removeClass$$1(classToRemove){removeClass(this.el_,classToRemove);}/**
     * Add or remove a CSS class name from the component's element.
     * - `classToToggle` gets added when {@link Component#hasClass} would return false.
     * - `classToToggle` gets removed when {@link Component#hasClass} would return true.
     *
     * @param  {string} classToToggle
     *         The class to add or remove based on (@link Component#hasClass}
     *
     * @param  {boolean|Dom~predicate} [predicate]
     *         An {@link Dom~predicate} function or a boolean
     */;_proto.toggleClass=function toggleClass$$1(classToToggle,predicate){toggleClass(this.el_,classToToggle,predicate);}/**
     * Show the `Component`s element if it is hidden by removing the
     * 'vjs-hidden' class name from it.
     */;_proto.show=function show(){this.removeClass('vjs-hidden');}/**
     * Hide the `Component`s element if it is currently showing by adding the
     * 'vjs-hidden` class name to it.
     */;_proto.hide=function hide(){this.addClass('vjs-hidden');}/**
     * Lock a `Component`s element in its visible state by adding the 'vjs-lock-showing'
     * class name to it. Used during fadeIn/fadeOut.
     *
     * @private
     */;_proto.lockShowing=function lockShowing(){this.addClass('vjs-lock-showing');}/**
     * Unlock a `Component`s element from its visible state by removing the 'vjs-lock-showing'
     * class name from it. Used during fadeIn/fadeOut.
     *
     * @private
     */;_proto.unlockShowing=function unlockShowing(){this.removeClass('vjs-lock-showing');}/**
     * Get the value of an attribute on the `Component`s element.
     *
     * @param {string} attribute
     *        Name of the attribute to get the value from.
     *
     * @return {string|null}
     *         - The value of the attribute that was asked for.
     *         - Can be an empty string on some browsers if the attribute does not exist
     *           or has no value
     *         - Most browsers will return null if the attibute does not exist or has
     *           no value.
     *
     * @see [DOM API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute}
     */;_proto.getAttribute=function getAttribute$$1(attribute){return getAttribute(this.el_,attribute);}/**
     * Set the value of an attribute on the `Component`'s element
     *
     * @param {string} attribute
     *        Name of the attribute to set.
     *
     * @param {string} value
     *        Value to set the attribute to.
     *
     * @see [DOM API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute}
     */;_proto.setAttribute=function setAttribute$$1(attribute,value){setAttribute(this.el_,attribute,value);}/**
     * Remove an attribute from the `Component`s element.
     *
     * @param {string} attribute
     *        Name of the attribute to remove.
     *
     * @see [DOM API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute}
     */;_proto.removeAttribute=function removeAttribute$$1(attribute){removeAttribute(this.el_,attribute);}/**
     * Get or set the width of the component based upon the CSS styles.
     * See {@link Component#dimension} for more detailed information.
     *
     * @param {number|string} [num]
     *        The width that you want to set postfixed with '%', 'px' or nothing.
     *
     * @param {boolean} [skipListeners]
     *        Skip the componentresize event trigger
     *
     * @return {number|string}
     *         The width when getting, zero if there is no width. Can be a string
     *           postpixed with '%' or 'px'.
     */;_proto.width=function width(num,skipListeners){return this.dimension('width',num,skipListeners);}/**
     * Get or set the height of the component based upon the CSS styles.
     * See {@link Component#dimension} for more detailed information.
     *
     * @param {number|string} [num]
     *        The height that you want to set postfixed with '%', 'px' or nothing.
     *
     * @param {boolean} [skipListeners]
     *        Skip the componentresize event trigger
     *
     * @return {number|string}
     *         The width when getting, zero if there is no width. Can be a string
     *         postpixed with '%' or 'px'.
     */;_proto.height=function height(num,skipListeners){return this.dimension('height',num,skipListeners);}/**
     * Set both the width and height of the `Component` element at the same time.
     *
     * @param  {number|string} width
     *         Width to set the `Component`s element to.
     *
     * @param  {number|string} height
     *         Height to set the `Component`s element to.
     */;_proto.dimensions=function dimensions(width,height){// Skip componentresize listeners on width for optimization
this.width(width,true);this.height(height);}/**
     * Get or set width or height of the `Component` element. This is the shared code
     * for the {@link Component#width} and {@link Component#height}.
     *
     * Things to know:
     * - If the width or height in an number this will return the number postfixed with 'px'.
     * - If the width/height is a percent this will return the percent postfixed with '%'
     * - Hidden elements have a width of 0 with `window.getComputedStyle`. This function
     *   defaults to the `Component`s `style.width` and falls back to `window.getComputedStyle`.
     *   See [this]{@link http://www.foliotek.com/devblog/getting-the-width-of-a-hidden-element-with-jquery-using-width/}
     *   for more information
     * - If you want the computed style of the component, use {@link Component#currentWidth}
     *   and {@link {Component#currentHeight}
     *
     * @fires Component#componentresize
     *
     * @param {string} widthOrHeight
     8        'width' or 'height'
     *
     * @param  {number|string} [num]
     8         New dimension
     *
     * @param  {boolean} [skipListeners]
     *         Skip componentresize event trigger
     *
     * @return {number}
     *         The dimension when getting or 0 if unset
     */;_proto.dimension=function dimension(widthOrHeight,num,skipListeners){if(num!==undefined){// Set to zero if null or literally NaN (NaN !== NaN)
if(num===null||num!==num){num=0;}// Check if using css width/height (% or px) and adjust
if((''+num).indexOf('%')!==-1||(''+num).indexOf('px')!==-1){this.el_.style[widthOrHeight]=num;}else if(num==='auto'){this.el_.style[widthOrHeight]='';}else{this.el_.style[widthOrHeight]=num+'px';}// skipListeners allows us to avoid triggering the resize event when setting both width and height
if(!skipListeners){/**
           * Triggered when a component is resized.
           *
           * @event Component#componentresize
           * @type {EventTarget~Event}
           */this.trigger('componentresize');}return;}// Not setting a value, so getting it
// Make sure element exists
if(!this.el_){return 0;}// Get dimension value from style
var val=this.el_.style[widthOrHeight];var pxIndex=val.indexOf('px');if(pxIndex!==-1){// Return the pixel value with no 'px'
return parseInt(val.slice(0,pxIndex),10);}// No px so using % or no style was set, so falling back to offsetWidth/height
// If component has display:none, offset will return 0
// TODO: handle display:none and no dimension style using px
return parseInt(this.el_['offset'+toTitleCase(widthOrHeight)],10);}/**
     * Get the computed width or the height of the component's element.
     *
     * Uses `window.getComputedStyle`.
     *
     * @param {string} widthOrHeight
     *        A string containing 'width' or 'height'. Whichever one you want to get.
     *
     * @return {number}
     *         The dimension that gets asked for or 0 if nothing was set
     *         for that dimension.
     */;_proto.currentDimension=function currentDimension(widthOrHeight){var computedWidthOrHeight=0;if(widthOrHeight!=='width'&&widthOrHeight!=='height'){throw new Error('currentDimension only accepts width or height value');}if(typeof window$1.getComputedStyle==='function'){var computedStyle=window$1.getComputedStyle(this.el_);computedWidthOrHeight=computedStyle.getPropertyValue(widthOrHeight)||computedStyle[widthOrHeight];}// remove 'px' from variable and parse as integer
computedWidthOrHeight=parseFloat(computedWidthOrHeight);// if the computed value is still 0, it's possible that the browser is lying
// and we want to check the offset values.
// This code also runs wherever getComputedStyle doesn't exist.
if(computedWidthOrHeight===0){var rule="offset"+toTitleCase(widthOrHeight);computedWidthOrHeight=this.el_[rule];}return computedWidthOrHeight;}/**
     * An object that contains width and height values of the `Component`s
     * computed style. Uses `window.getComputedStyle`.
     *
     * @typedef {Object} Component~DimensionObject
     *
     * @property {number} width
     *           The width of the `Component`s computed style.
     *
     * @property {number} height
     *           The height of the `Component`s computed style.
     *//**
     * Get an object that contains computed width and height values of the
     * component's element.
     *
     * Uses `window.getComputedStyle`.
     *
     * @return {Component~DimensionObject}
     *         The computed dimensions of the component's element.
     */;_proto.currentDimensions=function currentDimensions(){return{width:this.currentDimension('width'),height:this.currentDimension('height')};}/**
     * Get the computed width of the component's element.
     *
     * Uses `window.getComputedStyle`.
     *
     * @return {number}
     *         The computed width of the component's element.
     */;_proto.currentWidth=function currentWidth(){return this.currentDimension('width');}/**
     * Get the computed height of the component's element.
     *
     * Uses `window.getComputedStyle`.
     *
     * @return {number}
     *         The computed height of the component's element.
     */;_proto.currentHeight=function currentHeight(){return this.currentDimension('height');}/**
     * Set the focus to this component
     */;_proto.focus=function focus(){this.el_.focus();}/**
     * Remove the focus from this component
     */;_proto.blur=function blur(){this.el_.blur();}/**
     * When this Component receives a keydown event which it does not process,
     *  it passes the event to the Player for handling.
     *
     * @param {EventTarget~Event} event
     *        The `keydown` event that caused this function to be called.
     */;_proto.handleKeyPress=function handleKeyPress(event){if(this.player_){this.player_.handleKeyPress(event);}}/**
     * Emit a 'tap' events when touch event support gets detected. This gets used to
     * support toggling the controls through a tap on the video. They get enabled
     * because every sub-component would have extra overhead otherwise.
     *
     * @private
     * @fires Component#tap
     * @listens Component#touchstart
     * @listens Component#touchmove
     * @listens Component#touchleave
     * @listens Component#touchcancel
     * @listens Component#touchend
      */;_proto.emitTapEvents=function emitTapEvents(){// Track the start time so we can determine how long the touch lasted
var touchStart=0;var firstTouch=null;// Maximum movement allowed during a touch event to still be considered a tap
// Other popular libs use anywhere from 2 (hammer.js) to 15,
// so 10 seems like a nice, round number.
var tapMovementThreshold=10;// The maximum length a touch can be while still being considered a tap
var touchTimeThreshold=200;var couldBeTap;this.on('touchstart',function(event){// If more than one finger, don't consider treating this as a click
if(event.touches.length===1){// Copy pageX/pageY from the object
firstTouch={pageX:event.touches[0].pageX,pageY:event.touches[0].pageY};// Record start time so we can detect a tap vs. "touch and hold"
touchStart=new Date().getTime();// Reset couldBeTap tracking
couldBeTap=true;}});this.on('touchmove',function(event){// If more than one finger, don't consider treating this as a click
if(event.touches.length>1){couldBeTap=false;}else if(firstTouch){// Some devices will throw touchmoves for all but the slightest of taps.
// So, if we moved only a small distance, this could still be a tap
var xdiff=event.touches[0].pageX-firstTouch.pageX;var ydiff=event.touches[0].pageY-firstTouch.pageY;var touchDistance=Math.sqrt(xdiff*xdiff+ydiff*ydiff);if(touchDistance>tapMovementThreshold){couldBeTap=false;}}});var noTap=function noTap(){couldBeTap=false;};// TODO: Listen to the original target. http://youtu.be/DujfpXOKUp8?t=13m8s
this.on('touchleave',noTap);this.on('touchcancel',noTap);// When the touch ends, measure how long it took and trigger the appropriate
// event
this.on('touchend',function(event){firstTouch=null;// Proceed only if the touchmove/leave/cancel event didn't happen
if(couldBeTap===true){// Measure how long the touch lasted
var touchTime=new Date().getTime()-touchStart;// Make sure the touch was less than the threshold to be considered a tap
if(touchTime<touchTimeThreshold){// Don't let browser turn this into a click
event.preventDefault();/**
             * Triggered when a `Component` is tapped.
             *
             * @event Component#tap
             * @type {EventTarget~Event}
             */this.trigger('tap');// It may be good to copy the touchend event object and change the
// type to tap, if the other event properties aren't exact after
// Events.fixEvent runs (e.g. event.target)
}}});}/**
     * This function reports user activity whenever touch events happen. This can get
     * turned off by any sub-components that wants touch events to act another way.
     *
     * Report user touch activity when touch events occur. User activity gets used to
     * determine when controls should show/hide. It is simple when it comes to mouse
     * events, because any mouse event should show the controls. So we capture mouse
     * events that bubble up to the player and report activity when that happens.
     * With touch events it isn't as easy as `touchstart` and `touchend` toggle player
     * controls. So touch events can't help us at the player level either.
     *
     * User activity gets checked asynchronously. So what could happen is a tap event
     * on the video turns the controls off. Then the `touchend` event bubbles up to
     * the player. Which, if it reported user activity, would turn the controls right
     * back on. We also don't want to completely block touch events from bubbling up.
     * Furthermore a `touchmove` event and anything other than a tap, should not turn
     * controls back on.
     *
     * @listens Component#touchstart
     * @listens Component#touchmove
     * @listens Component#touchend
     * @listens Component#touchcancel
     */;_proto.enableTouchActivity=function enableTouchActivity(){// Don't continue if the root player doesn't support reporting user activity
if(!this.player()||!this.player().reportUserActivity){return;}// listener for reporting that the user is active
var report=bind(this.player(),this.player().reportUserActivity);var touchHolding;this.on('touchstart',function(){report();// For as long as the they are touching the device or have their mouse down,
// we consider them active even if they're not moving their finger or mouse.
// So we want to continue to update that they are active
this.clearInterval(touchHolding);// report at the same interval as activityCheck
touchHolding=this.setInterval(report,250);});var touchEnd=function touchEnd(event){report();// stop the interval that maintains activity if the touch is holding
this.clearInterval(touchHolding);};this.on('touchmove',report);this.on('touchend',touchEnd);this.on('touchcancel',touchEnd);}/**
     * A callback that has no parameters and is bound into `Component`s context.
     *
     * @callback Component~GenericCallback
     * @this Component
     *//**
     * Creates a function that runs after an `x` millisecond timeout. This function is a
     * wrapper around `window.setTimeout`. There are a few reasons to use this one
     * instead though:
     * 1. It gets cleared via  {@link Component#clearTimeout} when
     *    {@link Component#dispose} gets called.
     * 2. The function callback will gets turned into a {@link Component~GenericCallback}
     *
     * > Note: You can't use `window.clearTimeout` on the id returned by this function. This
     *         will cause its dispose listener not to get cleaned up! Please use
     *         {@link Component#clearTimeout} or {@link Component#dispose} instead.
     *
     * @param {Component~GenericCallback} fn
     *        The function that will be run after `timeout`.
     *
     * @param {number} timeout
     *        Timeout in milliseconds to delay before executing the specified function.
     *
     * @return {number}
     *         Returns a timeout ID that gets used to identify the timeout. It can also
     *         get used in {@link Component#clearTimeout} to clear the timeout that
     *         was set.
     *
     * @listens Component#dispose
     * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setTimeout}
     */;_proto.setTimeout=function setTimeout(fn,timeout){var _this2=this;// declare as variables so they are properly available in timeout function
// eslint-disable-next-line
var timeoutId,disposeFn;fn=bind(this,fn);timeoutId=window$1.setTimeout(function(){_this2.off('dispose',disposeFn);fn();},timeout);disposeFn=function disposeFn(){return _this2.clearTimeout(timeoutId);};disposeFn.guid="vjs-timeout-"+timeoutId;this.on('dispose',disposeFn);return timeoutId;}/**
     * Clears a timeout that gets created via `window.setTimeout` or
     * {@link Component#setTimeout}. If you set a timeout via {@link Component#setTimeout}
     * use this function instead of `window.clearTimout`. If you don't your dispose
     * listener will not get cleaned up until {@link Component#dispose}!
     *
     * @param {number} timeoutId
     *        The id of the timeout to clear. The return value of
     *        {@link Component#setTimeout} or `window.setTimeout`.
     *
     * @return {number}
     *         Returns the timeout id that was cleared.
     *
     * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/clearTimeout}
     */;_proto.clearTimeout=function clearTimeout(timeoutId){window$1.clearTimeout(timeoutId);var disposeFn=function disposeFn(){};disposeFn.guid="vjs-timeout-"+timeoutId;this.off('dispose',disposeFn);return timeoutId;}/**
     * Creates a function that gets run every `x` milliseconds. This function is a wrapper
     * around `window.setInterval`. There are a few reasons to use this one instead though.
     * 1. It gets cleared via  {@link Component#clearInterval} when
     *    {@link Component#dispose} gets called.
     * 2. The function callback will be a {@link Component~GenericCallback}
     *
     * @param {Component~GenericCallback} fn
     *        The function to run every `x` seconds.
     *
     * @param {number} interval
     *        Execute the specified function every `x` milliseconds.
     *
     * @return {number}
     *         Returns an id that can be used to identify the interval. It can also be be used in
     *         {@link Component#clearInterval} to clear the interval.
     *
     * @listens Component#dispose
     * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setInterval}
     */;_proto.setInterval=function setInterval(fn,interval){var _this3=this;fn=bind(this,fn);var intervalId=window$1.setInterval(fn,interval);var disposeFn=function disposeFn(){return _this3.clearInterval(intervalId);};disposeFn.guid="vjs-interval-"+intervalId;this.on('dispose',disposeFn);return intervalId;}/**
     * Clears an interval that gets created via `window.setInterval` or
     * {@link Component#setInterval}. If you set an inteval via {@link Component#setInterval}
     * use this function instead of `window.clearInterval`. If you don't your dispose
     * listener will not get cleaned up until {@link Component#dispose}!
     *
     * @param {number} intervalId
     *        The id of the interval to clear. The return value of
     *        {@link Component#setInterval} or `window.setInterval`.
     *
     * @return {number}
     *         Returns the interval id that was cleared.
     *
     * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/clearInterval}
     */;_proto.clearInterval=function clearInterval(intervalId){window$1.clearInterval(intervalId);var disposeFn=function disposeFn(){};disposeFn.guid="vjs-interval-"+intervalId;this.off('dispose',disposeFn);return intervalId;}/**
     * Queues up a callback to be passed to requestAnimationFrame (rAF), but
     * with a few extra bonuses:
     *
     * - Supports browsers that do not support rAF by falling back to
     *   {@link Component#setTimeout}.
     *
     * - The callback is turned into a {@link Component~GenericCallback} (i.e.
     *   bound to the component).
     *
     * - Automatic cancellation of the rAF callback is handled if the component
     *   is disposed before it is called.
     *
     * @param  {Component~GenericCallback} fn
     *         A function that will be bound to this component and executed just
     *         before the browser's next repaint.
     *
     * @return {number}
     *         Returns an rAF ID that gets used to identify the timeout. It can
     *         also be used in {@link Component#cancelAnimationFrame} to cancel
     *         the animation frame callback.
     *
     * @listens Component#dispose
     * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame}
     */;_proto.requestAnimationFrame=function requestAnimationFrame(fn){var _this4=this;// declare as variables so they are properly available in rAF function
// eslint-disable-next-line
var id,disposeFn;if(this.supportsRaf_){fn=bind(this,fn);id=window$1.requestAnimationFrame(function(){_this4.off('dispose',disposeFn);fn();});disposeFn=function disposeFn(){return _this4.cancelAnimationFrame(id);};disposeFn.guid="vjs-raf-"+id;this.on('dispose',disposeFn);return id;}// Fall back to using a timer.
return this.setTimeout(fn,1000/60);}/**
     * Cancels a queued callback passed to {@link Component#requestAnimationFrame}
     * (rAF).
     *
     * If you queue an rAF callback via {@link Component#requestAnimationFrame},
     * use this function instead of `window.cancelAnimationFrame`. If you don't,
     * your dispose listener will not get cleaned up until {@link Component#dispose}!
     *
     * @param {number} id
     *        The rAF ID to clear. The return value of {@link Component#requestAnimationFrame}.
     *
     * @return {number}
     *         Returns the rAF ID that was cleared.
     *
     * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/window/cancelAnimationFrame}
     */;_proto.cancelAnimationFrame=function cancelAnimationFrame(id){if(this.supportsRaf_){window$1.cancelAnimationFrame(id);var disposeFn=function disposeFn(){};disposeFn.guid="vjs-raf-"+id;this.off('dispose',disposeFn);return id;}// Fall back to using a timer.
return this.clearTimeout(id);}/**
     * Register a `Component` with `videojs` given the name and the component.
     *
     * > NOTE: {@link Tech}s should not be registered as a `Component`. {@link Tech}s
     *         should be registered using {@link Tech.registerTech} or
     *         {@link videojs:videojs.registerTech}.
     *
     * > NOTE: This function can also be seen on videojs as
     *         {@link videojs:videojs.registerComponent}.
     *
     * @param {string} name
     *        The name of the `Component` to register.
     *
     * @param {Component} ComponentToRegister
     *        The `Component` class to register.
     *
     * @return {Component}
     *         The `Component` that was registered.
     */;Component.registerComponent=function registerComponent(name,ComponentToRegister){if(typeof name!=='string'||!name){throw new Error("Illegal component name, \""+name+"\"; must be a non-empty string.");}var Tech=Component.getComponent('Tech');// We need to make sure this check is only done if Tech has been registered.
var isTech=Tech&&Tech.isTech(ComponentToRegister);var isComp=Component===ComponentToRegister||Component.prototype.isPrototypeOf(ComponentToRegister.prototype);if(isTech||!isComp){var reason;if(isTech){reason='techs must be registered using Tech.registerTech()';}else{reason='must be a Component subclass';}throw new Error("Illegal component, \""+name+"\"; "+reason+".");}name=toTitleCase(name);if(!Component.components_){Component.components_={};}var Player=Component.getComponent('Player');if(name==='Player'&&Player&&Player.players){var players=Player.players;var playerNames=Object.keys(players);// If we have players that were disposed, then their name will still be
// in Players.players. So, we must loop through and verify that the value
// for each item is not null. This allows registration of the Player component
// after all players have been disposed or before any were created.
if(players&&playerNames.length>0&&playerNames.map(function(pname){return players[pname];}).every(Boolean)){throw new Error('Can not register Player component after player has been created.');}}Component.components_[name]=ComponentToRegister;return ComponentToRegister;}/**
     * Get a `Component` based on the name it was registered with.
     *
     * @param {string} name
     *        The Name of the component to get.
     *
     * @return {Component}
     *         The `Component` that got registered under the given name.
     *
     * @deprecated In `videojs` 6 this will not return `Component`s that were not
     *             registered using {@link Component.registerComponent}. Currently we
     *             check the global `videojs` object for a `Component` name and
     *             return that if it exists.
     */;Component.getComponent=function getComponent(name){if(!name){return;}name=toTitleCase(name);if(Component.components_&&Component.components_[name]){return Component.components_[name];}};return Component;}();/**
   * Whether or not this component supports `requestAnimationFrame`.
   *
   * This is exposed primarily for testing purposes.
   *
   * @private
   * @type {Boolean}
   */Component.prototype.supportsRaf_=typeof window$1.requestAnimationFrame==='function'&&typeof window$1.cancelAnimationFrame==='function';Component.registerComponent('Component',Component);/**
   * @file browser.js
   * @module browser
   */var USER_AGENT=window$1.navigator&&window$1.navigator.userAgent||'';var webkitVersionMap=/AppleWebKit\/([\d.]+)/i.exec(USER_AGENT);var appleWebkitVersion=webkitVersionMap?parseFloat(webkitVersionMap.pop()):null;/**
   * Whether or not this device is an iPad.
   *
   * @static
   * @const
   * @type {Boolean}
   */var IS_IPAD=/iPad/i.test(USER_AGENT);/**
   * Whether or not this device is an iPhone.
   *
   * @static
   * @const
   * @type {Boolean}
   */// The Facebook app's UIWebView identifies as both an iPhone and iPad, so
// to identify iPhones, we need to exclude iPads.
// http://artsy.github.io/blog/2012/10/18/the-perils-of-ios-user-agent-sniffing/
var IS_IPHONE=/iPhone/i.test(USER_AGENT)&&!IS_IPAD;/**
   * Whether or not this device is an iPod.
   *
   * @static
   * @const
   * @type {Boolean}
   */var IS_IPOD=/iPod/i.test(USER_AGENT);/**
   * Whether or not this is an iOS device.
   *
   * @static
   * @const
   * @type {Boolean}
   */var IS_IOS=IS_IPHONE||IS_IPAD||IS_IPOD;/**
   * The detected iOS version - or `null`.
   *
   * @static
   * @const
   * @type {string|null}
   */var IOS_VERSION=function(){var match=USER_AGENT.match(/OS (\d+)_/i);if(match&&match[1]){return match[1];}return null;}();/**
   * Whether or not this is an Android device.
   *
   * @static
   * @const
   * @type {Boolean}
   */var IS_ANDROID=/Android/i.test(USER_AGENT);/**
   * The detected Android version - or `null`.
   *
   * @static
   * @const
   * @type {number|string|null}
   */var ANDROID_VERSION=function(){// This matches Android Major.Minor.Patch versions
// ANDROID_VERSION is Major.Minor as a Number, if Minor isn't available, then only Major is returned
var match=USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!match){return null;}var major=match[1]&&parseFloat(match[1]);var minor=match[2]&&parseFloat(match[2]);if(major&&minor){return parseFloat(match[1]+'.'+match[2]);}else if(major){return major;}return null;}();/**
   * Whether or not this is a native Android browser.
   *
   * @static
   * @const
   * @type {Boolean}
   */var IS_NATIVE_ANDROID=IS_ANDROID&&ANDROID_VERSION<5&&appleWebkitVersion<537;/**
   * Whether or not this is Mozilla Firefox.
   *
   * @static
   * @const
   * @type {Boolean}
   */var IS_FIREFOX=/Firefox/i.test(USER_AGENT);/**
   * Whether or not this is Microsoft Edge.
   *
   * @static
   * @const
   * @type {Boolean}
   */var IS_EDGE=/Edge/i.test(USER_AGENT);/**
   * Whether or not this is Google Chrome.
   *
   * This will also be `true` for Chrome on iOS, which will have different support
   * as it is actually Safari under the hood.
   *
   * @static
   * @const
   * @type {Boolean}
   */var IS_CHROME=!IS_EDGE&&(/Chrome/i.test(USER_AGENT)||/CriOS/i.test(USER_AGENT));/**
   * The detected Google Chrome version - or `null`.
   *
   * @static
   * @const
   * @type {number|null}
   */var CHROME_VERSION=function(){var match=USER_AGENT.match(/(Chrome|CriOS)\/(\d+)/);if(match&&match[2]){return parseFloat(match[2]);}return null;}();/**
   * The detected Internet Explorer version - or `null`.
   *
   * @static
   * @const
   * @type {number|null}
   */var IE_VERSION=function(){var result=/MSIE\s(\d+)\.\d/.exec(USER_AGENT);var version=result&&parseFloat(result[1]);if(!version&&/Trident\/7.0/i.test(USER_AGENT)&&/rv:11.0/.test(USER_AGENT)){// IE 11 has a different user agent string than other IE versions
version=11.0;}return version;}();/**
   * Whether or not this is desktop Safari.
   *
   * @static
   * @const
   * @type {Boolean}
   */var IS_SAFARI=/Safari/i.test(USER_AGENT)&&!IS_CHROME&&!IS_ANDROID&&!IS_EDGE;/**
   * Whether or not this is any flavor of Safari - including iOS.
   *
   * @static
   * @const
   * @type {Boolean}
   */var IS_ANY_SAFARI=(IS_SAFARI||IS_IOS)&&!IS_CHROME;/**
   * Whether or not this device is touch-enabled.
   *
   * @static
   * @const
   * @type {Boolean}
   */var TOUCH_ENABLED=isReal()&&('ontouchstart'in window$1||window$1.navigator.maxTouchPoints||window$1.DocumentTouch&&window$1.document instanceof window$1.DocumentTouch);var browser=/*#__PURE__*/Object.freeze({IS_IPAD:IS_IPAD,IS_IPHONE:IS_IPHONE,IS_IPOD:IS_IPOD,IS_IOS:IS_IOS,IOS_VERSION:IOS_VERSION,IS_ANDROID:IS_ANDROID,ANDROID_VERSION:ANDROID_VERSION,IS_NATIVE_ANDROID:IS_NATIVE_ANDROID,IS_FIREFOX:IS_FIREFOX,IS_EDGE:IS_EDGE,IS_CHROME:IS_CHROME,CHROME_VERSION:CHROME_VERSION,IE_VERSION:IE_VERSION,IS_SAFARI:IS_SAFARI,IS_ANY_SAFARI:IS_ANY_SAFARI,TOUCH_ENABLED:TOUCH_ENABLED});/**
   * @file time-ranges.js
   * @module time-ranges
   *//**
   * Returns the time for the specified index at the start or end
   * of a TimeRange object.
   *
   * @typedef    {Function} TimeRangeIndex
   *
   * @param      {number} [index=0]
   *             The range number to return the time for.
   *
   * @return     {number}
   *             The time offset at the specified index.
   *
   * @deprecated The index argument must be provided.
   *             In the future, leaving it out will throw an error.
   *//**
   * An object that contains ranges of time.
   *
   * @typedef  {Object} TimeRange
   *
   * @property {number} length
   *           The number of time ranges represented by this object.
   *
   * @property {module:time-ranges~TimeRangeIndex} start
   *           Returns the time offset at which a specified time range begins.
   *
   * @property {module:time-ranges~TimeRangeIndex} end
   *           Returns the time offset at which a specified time range ends.
   *
   * @see https://developer.mozilla.org/en-US/docs/Web/API/TimeRanges
   *//**
   * Check if any of the time ranges are over the maximum index.
   *
   * @private
   * @param   {string} fnName
   *          The function name to use for logging
   *
   * @param   {number} index
   *          The index to check
   *
   * @param   {number} maxIndex
   *          The maximum possible index
   *
   * @throws  {Error} if the timeRanges provided are over the maxIndex
   */function rangeCheck(fnName,index,maxIndex){if(typeof index!=='number'||index<0||index>maxIndex){throw new Error("Failed to execute '"+fnName+"' on 'TimeRanges': The index provided ("+index+") is non-numeric or out of bounds (0-"+maxIndex+").");}}/**
   * Get the time for the specified index at the start or end
   * of a TimeRange object.
   *
   * @private
   * @param      {string} fnName
   *             The function name to use for logging
   *
   * @param      {string} valueIndex
   *             The property that should be used to get the time. should be
   *             'start' or 'end'
   *
   * @param      {Array} ranges
   *             An array of time ranges
   *
   * @param      {Array} [rangeIndex=0]
   *             The index to start the search at
   *
   * @return     {number}
   *             The time that offset at the specified index.
   *
   * @deprecated rangeIndex must be set to a value, in the future this will throw an error.
   * @throws     {Error} if rangeIndex is more than the length of ranges
   */function getRange(fnName,valueIndex,ranges,rangeIndex){rangeCheck(fnName,rangeIndex,ranges.length-1);return ranges[rangeIndex][valueIndex];}/**
   * Create a time range object given ranges of time.
   *
   * @private
   * @param   {Array} [ranges]
   *          An array of time ranges.
   */function createTimeRangesObj(ranges){if(ranges===undefined||ranges.length===0){return{length:0,start:function start(){throw new Error('This TimeRanges object is empty');},end:function end(){throw new Error('This TimeRanges object is empty');}};}return{length:ranges.length,start:getRange.bind(null,'start',0,ranges),end:getRange.bind(null,'end',1,ranges)};}/**
   * Create a `TimeRange` object which mimics an
   * {@link https://developer.mozilla.org/en-US/docs/Web/API/TimeRanges|HTML5 TimeRanges instance}.
   *
   * @param {number|Array[]} start
   *        The start of a single range (a number) or an array of ranges (an
   *        array of arrays of two numbers each).
   *
   * @param {number} end
   *        The end of a single range. Cannot be used with the array form of
   *        the `start` argument.
   */function createTimeRanges(start,end){if(Array.isArray(start)){return createTimeRangesObj(start);}else if(start===undefined||end===undefined){return createTimeRangesObj();}return createTimeRangesObj([[start,end]]);}/**
   * @file buffer.js
   * @module buffer
   *//**
   * Compute the percentage of the media that has been buffered.
   *
   * @param {TimeRange} buffered
   *        The current `TimeRange` object representing buffered time ranges
   *
   * @param {number} duration
   *        Total duration of the media
   *
   * @return {number}
   *         Percent buffered of the total duration in decimal form.
   */function bufferedPercent(buffered,duration){var bufferedDuration=0;var start;var end;if(!duration){return 0;}if(!buffered||!buffered.length){buffered=createTimeRanges(0,0);}for(var i=0;i<buffered.length;i++){start=buffered.start(i);end=buffered.end(i);// buffered end can be bigger than duration by a very small fraction
if(end>duration){end=duration;}bufferedDuration+=end-start;}return bufferedDuration/duration;}/**
   * @file fullscreen-api.js
   * @module fullscreen-api
   * @private
   *//**
   * Store the browser-specific methods for the fullscreen API.
   *
   * @type {Object}
   * @see [Specification]{@link https://fullscreen.spec.whatwg.org}
   * @see [Map Approach From Screenfull.js]{@link https://github.com/sindresorhus/screenfull.js}
   */var FullscreenApi={};// browser API methods
var apiMap=[['requestFullscreen','exitFullscreen','fullscreenElement','fullscreenEnabled','fullscreenchange','fullscreenerror','fullscreen'],// WebKit
['webkitRequestFullscreen','webkitExitFullscreen','webkitFullscreenElement','webkitFullscreenEnabled','webkitfullscreenchange','webkitfullscreenerror','-webkit-full-screen'],// Mozilla
['mozRequestFullScreen','mozCancelFullScreen','mozFullScreenElement','mozFullScreenEnabled','mozfullscreenchange','mozfullscreenerror','-moz-full-screen'],// Microsoft
['msRequestFullscreen','msExitFullscreen','msFullscreenElement','msFullscreenEnabled','MSFullscreenChange','MSFullscreenError','-ms-fullscreen']];var specApi=apiMap[0];var browserApi;var prefixedAPI=false;// determine the supported set of functions
for(var i=0;i<apiMap.length;i++){// check for exitFullscreen function
if(apiMap[i][1]in document){browserApi=apiMap[i];break;}}// map the browser API names to the spec API names
if(browserApi){for(var _i=0;_i<browserApi.length;_i++){FullscreenApi[specApi[_i]]=browserApi[_i];}prefixedAPI=browserApi[0]===specApi[0];}/**
   * @file media-error.js
   *//**
   * A Custom `MediaError` class which mimics the standard HTML5 `MediaError` class.
   *
   * @param {number|string|Object|MediaError} value
   *        This can be of multiple types:
   *        - number: should be a standard error code
   *        - string: an error message (the code will be 0)
   *        - Object: arbitrary properties
   *        - `MediaError` (native): used to populate a video.js `MediaError` object
   *        - `MediaError` (video.js): will return itself if it's already a
   *          video.js `MediaError` object.
   *
   * @see [MediaError Spec]{@link https://dev.w3.org/html5/spec-author-view/video.html#mediaerror}
   * @see [Encrypted MediaError Spec]{@link https://www.w3.org/TR/2013/WD-encrypted-media-20130510/#error-codes}
   *
   * @class MediaError
   */function MediaError(value){// Allow redundant calls to this constructor to avoid having `instanceof`
// checks peppered around the code.
if(value instanceof MediaError){return value;}if(typeof value==='number'){this.code=value;}else if(typeof value==='string'){// default code is zero, so this is a custom error
this.message=value;}else if(isObject(value)){// We assign the `code` property manually because native `MediaError` objects
// do not expose it as an own/enumerable property of the object.
if(typeof value.code==='number'){this.code=value.code;}assign(this,value);}if(!this.message){this.message=MediaError.defaultMessages[this.code]||'';}}/**
   * The error code that refers two one of the defined `MediaError` types
   *
   * @type {Number}
   */MediaError.prototype.code=0;/**
   * An optional message that to show with the error. Message is not part of the HTML5
   * video spec but allows for more informative custom errors.
   *
   * @type {String}
   */MediaError.prototype.message='';/**
   * An optional status code that can be set by plugins to allow even more detail about
   * the error. For example a plugin might provide a specific HTTP status code and an
   * error message for that code. Then when the plugin gets that error this class will
   * know how to display an error message for it. This allows a custom message to show
   * up on the `Player` error overlay.
   *
   * @type {Array}
   */MediaError.prototype.status=null;/**
   * Errors indexed by the W3C standard. The order **CANNOT CHANGE**! See the
   * specification listed under {@link MediaError} for more information.
   *
   * @enum {array}
   * @readonly
   * @property {string} 0 - MEDIA_ERR_CUSTOM
   * @property {string} 1 - MEDIA_ERR_ABORTED
   * @property {string} 2 - MEDIA_ERR_NETWORK
   * @property {string} 3 - MEDIA_ERR_DECODE
   * @property {string} 4 - MEDIA_ERR_SRC_NOT_SUPPORTED
   * @property {string} 5 - MEDIA_ERR_ENCRYPTED
   */MediaError.errorTypes=['MEDIA_ERR_CUSTOM','MEDIA_ERR_ABORTED','MEDIA_ERR_NETWORK','MEDIA_ERR_DECODE','MEDIA_ERR_SRC_NOT_SUPPORTED','MEDIA_ERR_ENCRYPTED'];/**
   * The default `MediaError` messages based on the {@link MediaError.errorTypes}.
   *
   * @type {Array}
   * @constant
   */MediaError.defaultMessages={1:'You aborted the media playback',2:'A network error caused the media download to fail part-way.',3:'The media playback was aborted due to a corruption problem or because the media used features your browser did not support.',4:'The media could not be loaded, either because the server or network failed or because the format is not supported.',5:'The media is encrypted and we do not have the keys to decrypt it.'};// Add types as properties on MediaError
// e.g. MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED = 4;
for(var errNum=0;errNum<MediaError.errorTypes.length;errNum++){MediaError[MediaError.errorTypes[errNum]]=errNum;// values should be accessible on both the class and instance
MediaError.prototype[MediaError.errorTypes[errNum]]=errNum;}// jsdocs for instance/static members added above
var tuple=SafeParseTuple;function SafeParseTuple(obj,reviver){var json;var error=null;try{json=JSON.parse(obj,reviver);}catch(err){error=err;}return[error,json];}/**
   * Returns whether an object is `Promise`-like (i.e. has a `then` method).
   *
   * @param  {Object}  value
   *         An object that may or may not be `Promise`-like.
   *
   * @return {boolean}
   *         Whether or not the object is `Promise`-like.
   */function isPromise(value){return value!==undefined&&value!==null&&typeof value.then==='function';}/**
   * Silence a Promise-like object.
   *
   * This is useful for avoiding non-harmful, but potentially confusing "uncaught
   * play promise" rejection error messages.
   *
   * @param  {Object} value
   *         An object that may or may not be `Promise`-like.
   */function silencePromise(value){if(isPromise(value)){value.then(null,function(e){});}}/**
   * @file text-track-list-converter.js Utilities for capturing text track state and
   * re-creating tracks based on a capture.
   *
   * @module text-track-list-converter
   *//**
   * Examine a single {@link TextTrack} and return a JSON-compatible javascript object that
   * represents the {@link TextTrack}'s state.
   *
   * @param {TextTrack} track
   *        The text track to query.
   *
   * @return {Object}
   *         A serializable javascript representation of the TextTrack.
   * @private
   */var trackToJson_=function trackToJson_(track){var ret=['kind','label','language','id','inBandMetadataTrackDispatchType','mode','src'].reduce(function(acc,prop,i){if(track[prop]){acc[prop]=track[prop];}return acc;},{cues:track.cues&&Array.prototype.map.call(track.cues,function(cue){return{startTime:cue.startTime,endTime:cue.endTime,text:cue.text,id:cue.id};})});return ret;};/**
   * Examine a {@link Tech} and return a JSON-compatible javascript array that represents the
   * state of all {@link TextTrack}s currently configured. The return array is compatible with
   * {@link text-track-list-converter:jsonToTextTracks}.
   *
   * @param {Tech} tech
   *        The tech object to query
   *
   * @return {Array}
   *         A serializable javascript representation of the {@link Tech}s
   *         {@link TextTrackList}.
   */var textTracksToJson=function textTracksToJson(tech){var trackEls=tech.$$('track');var trackObjs=Array.prototype.map.call(trackEls,function(t){return t.track;});var tracks=Array.prototype.map.call(trackEls,function(trackEl){var json=trackToJson_(trackEl.track);if(trackEl.src){json.src=trackEl.src;}return json;});return tracks.concat(Array.prototype.filter.call(tech.textTracks(),function(track){return trackObjs.indexOf(track)===-1;}).map(trackToJson_));};/**
   * Create a set of remote {@link TextTrack}s on a {@link Tech} based on an array of javascript
   * object {@link TextTrack} representations.
   *
   * @param {Array} json
   *        An array of `TextTrack` representation objects, like those that would be
   *        produced by `textTracksToJson`.
   *
   * @param {Tech} tech
   *        The `Tech` to create the `TextTrack`s on.
   */var jsonToTextTracks=function jsonToTextTracks(json,tech){json.forEach(function(track){var addedTrack=tech.addRemoteTextTrack(track).track;if(!track.src&&track.cues){track.cues.forEach(function(cue){return addedTrack.addCue(cue);});}});return tech.textTracks();};var textTrackConverter={textTracksToJson:textTracksToJson,jsonToTextTracks:jsonToTextTracks,trackToJson_:trackToJson_};function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports;}var keycode=createCommonjsModule(function(module,exports){// Source: http://jsfiddle.net/vWx8V/
// http://stackoverflow.com/questions/5603195/full-list-of-javascript-keycodes
/**
     * Conenience method returns corresponding value for given keyName or keyCode.
     *
     * @param {Mixed} keyCode {Number} or keyName {String}
     * @return {Mixed}
     * @api public
     */function keyCode(searchInput){// Keyboard Events
if(searchInput&&'object'===(typeof searchInput==='undefined'?'undefined':_typeof(searchInput))){var hasKeyCode=searchInput.which||searchInput.keyCode||searchInput.charCode;if(hasKeyCode)searchInput=hasKeyCode;}// Numbers
if('number'===typeof searchInput)return names[searchInput];// Everything else (cast to string)
var search=String(searchInput);// check codes
var foundNamedKey=codes[search.toLowerCase()];if(foundNamedKey)return foundNamedKey;// check aliases
var foundNamedKey=aliases[search.toLowerCase()];if(foundNamedKey)return foundNamedKey;// weird character?
if(search.length===1)return search.charCodeAt(0);return undefined;}/**
     * Compares a keyboard event with a given keyCode or keyName.
     *
     * @param {Event} event Keyboard event that should be tested
     * @param {Mixed} keyCode {Number} or keyName {String}
     * @return {Boolean}
     * @api public
     */keyCode.isEventKey=function isEventKey(event,nameOrCode){if(event&&'object'===(typeof event==='undefined'?'undefined':_typeof(event))){var keyCode=event.which||event.keyCode||event.charCode;if(keyCode===null||keyCode===undefined){return false;}if(typeof nameOrCode==='string'){// check codes
var foundNamedKey=codes[nameOrCode.toLowerCase()];if(foundNamedKey){return foundNamedKey===keyCode;}// check aliases
var foundNamedKey=aliases[nameOrCode.toLowerCase()];if(foundNamedKey){return foundNamedKey===keyCode;}}else if(typeof nameOrCode==='number'){return nameOrCode===keyCode;}return false;}};exports=module.exports=keyCode;/**
     * Get by name
     *
     *   exports.code['enter'] // => 13
     */var codes=exports.code=exports.codes={'backspace':8,'tab':9,'enter':13,'shift':16,'ctrl':17,'alt':18,'pause/break':19,'caps lock':20,'esc':27,'space':32,'page up':33,'page down':34,'end':35,'home':36,'left':37,'up':38,'right':39,'down':40,'insert':45,'delete':46,'command':91,'left command':91,'right command':93,'numpad *':106,'numpad +':107,'numpad -':109,'numpad .':110,'numpad /':111,'num lock':144,'scroll lock':145,'my computer':182,'my calculator':183,';':186,'=':187,',':188,'-':189,'.':190,'/':191,'`':192,'[':219,'\\':220,']':221,"'":222// Helper aliases
};var aliases=exports.aliases={'windows':91,'⇧':16,'⌥':18,'⌃':17,'⌘':91,'ctl':17,'control':17,'option':18,'pause':19,'break':19,'caps':20,'return':13,'escape':27,'spc':32,'spacebar':32,'pgup':33,'pgdn':34,'ins':45,'del':46,'cmd':91/*!
       * Programatically add the following
       */// lower case chars
};for(i=97;i<123;i++){codes[String.fromCharCode(i)]=i-32;}// numbers
for(var i=48;i<58;i++){codes[i-48]=i;}// function keys
for(i=1;i<13;i++){codes['f'+i]=i+111;}// numpad keys
for(i=0;i<10;i++){codes['numpad '+i]=i+96;}/**
     * Get by code
     *
     *   exports.name[13] // => 'Enter'
     */var names=exports.names=exports.title={};// title for backward compat
// Create reverse mapping
for(i in codes){names[codes[i]]=i;}// Add aliases
for(var alias in aliases){codes[alias]=aliases[alias];}});var keycode_1=keycode.code;var keycode_2=keycode.codes;var keycode_3=keycode.aliases;var keycode_4=keycode.names;var keycode_5=keycode.title;var MODAL_CLASS_NAME='vjs-modal-dialog';/**
   * The `ModalDialog` displays over the video and its controls, which blocks
   * interaction with the player until it is closed.
   *
   * Modal dialogs include a "Close" button and will close when that button
   * is activated - or when ESC is pressed anywhere.
   *
   * @extends Component
   */var ModalDialog=/*#__PURE__*/function(_Component){_inheritsLoose(ModalDialog,_Component);/**
     * Create an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     *
     * @param {Mixed} [options.content=undefined]
     *        Provide customized content for this modal.
     *
     * @param {string} [options.description]
     *        A text description for the modal, primarily for accessibility.
     *
     * @param {boolean} [options.fillAlways=false]
     *        Normally, modals are automatically filled only the first time
     *        they open. This tells the modal to refresh its content
     *        every time it opens.
     *
     * @param {string} [options.label]
     *        A text label for the modal, primarily for accessibility.
     *
     * @param {boolean} [options.pauseOnOpen=true]
     *        If `true`, playback will will be paused if playing when
     *        the modal opens, and resumed when it closes.
     *
     * @param {boolean} [options.temporary=true]
     *        If `true`, the modal can only be opened once; it will be
     *        disposed as soon as it's closed.
     *
     * @param {boolean} [options.uncloseable=false]
     *        If `true`, the user will not be able to close the modal
     *        through the UI in the normal ways. Programmatic closing is
     *        still possible.
     */function ModalDialog(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.opened_=_this.hasBeenOpened_=_this.hasBeenFilled_=false;_this.closeable(!_this.options_.uncloseable);_this.content(_this.options_.content);// Make sure the contentEl is defined AFTER any children are initialized
// because we only want the contents of the modal in the contentEl
// (not the UI elements like the close button).
_this.contentEl_=createEl('div',{className:MODAL_CLASS_NAME+"-content"},{role:'document'});_this.descEl_=createEl('p',{className:MODAL_CLASS_NAME+"-description vjs-control-text",id:_this.el().getAttribute('aria-describedby')});textContent(_this.descEl_,_this.description());_this.el_.appendChild(_this.descEl_);_this.el_.appendChild(_this.contentEl_);return _this;}/**
     * Create the `ModalDialog`'s DOM element
     *
     * @return {Element}
     *         The DOM element that gets created.
     */var _proto=ModalDialog.prototype;_proto.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,'div',{className:this.buildCSSClass(),tabIndex:-1},{'aria-describedby':this.id()+"_description",'aria-hidden':'true','aria-label':this.label(),'role':'dialog'});};_proto.dispose=function dispose(){this.contentEl_=null;this.descEl_=null;this.previouslyActiveEl_=null;_Component.prototype.dispose.call(this);}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */;_proto.buildCSSClass=function buildCSSClass(){return MODAL_CLASS_NAME+" vjs-hidden "+_Component.prototype.buildCSSClass.call(this);}/**
     * Handles `keydown` events on the document, looking for ESC, which closes
     * the modal.
     *
     * @param {EventTarget~Event} event
     *        The keypress that triggered this event.
     *
     * @listens keydown
     */;_proto.handleKeyPress=function handleKeyPress(event){if(keycode.isEventKey(event,'Escape')&&this.closeable()){this.close();}}/**
     * Returns the label string for this modal. Primarily used for accessibility.
     *
     * @return {string}
     *         the localized or raw label of this modal.
     */;_proto.label=function label(){return this.localize(this.options_.label||'Modal Window');}/**
     * Returns the description string for this modal. Primarily used for
     * accessibility.
     *
     * @return {string}
     *         The localized or raw description of this modal.
     */;_proto.description=function description(){var desc=this.options_.description||this.localize('This is a modal window.');// Append a universal closeability message if the modal is closeable.
if(this.closeable()){desc+=' '+this.localize('This modal can be closed by pressing the Escape key or activating the close button.');}return desc;}/**
     * Opens the modal.
     *
     * @fires ModalDialog#beforemodalopen
     * @fires ModalDialog#modalopen
     */;_proto.open=function open(){if(!this.opened_){var player=this.player();/**
          * Fired just before a `ModalDialog` is opened.
          *
          * @event ModalDialog#beforemodalopen
          * @type {EventTarget~Event}
          */this.trigger('beforemodalopen');this.opened_=true;// Fill content if the modal has never opened before and
// never been filled.
if(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_){this.fill();}// If the player was playing, pause it and take note of its previously
// playing state.
this.wasPlaying_=!player.paused();if(this.options_.pauseOnOpen&&this.wasPlaying_){player.pause();}if(this.closeable()){this.on(this.el_.ownerDocument,'keydown',bind(this,this.handleKeyPress));}// Hide controls and note if they were enabled.
this.hadControls_=player.controls();player.controls(false);this.show();this.conditionalFocus_();this.el().setAttribute('aria-hidden','false');/**
          * Fired just after a `ModalDialog` is opened.
          *
          * @event ModalDialog#modalopen
          * @type {EventTarget~Event}
          */this.trigger('modalopen');this.hasBeenOpened_=true;}}/**
     * If the `ModalDialog` is currently open or closed.
     *
     * @param  {boolean} [value]
     *         If given, it will open (`true`) or close (`false`) the modal.
     *
     * @return {boolean}
     *         the current open state of the modaldialog
     */;_proto.opened=function opened(value){if(typeof value==='boolean'){this[value?'open':'close']();}return this.opened_;}/**
     * Closes the modal, does nothing if the `ModalDialog` is
     * not open.
     *
     * @fires ModalDialog#beforemodalclose
     * @fires ModalDialog#modalclose
     */;_proto.close=function close(){if(!this.opened_){return;}var player=this.player();/**
        * Fired just before a `ModalDialog` is closed.
        *
        * @event ModalDialog#beforemodalclose
        * @type {EventTarget~Event}
        */this.trigger('beforemodalclose');this.opened_=false;if(this.wasPlaying_&&this.options_.pauseOnOpen){player.play();}if(this.closeable()){this.off(this.el_.ownerDocument,'keydown',bind(this,this.handleKeyPress));}if(this.hadControls_){player.controls(true);}this.hide();this.el().setAttribute('aria-hidden','true');/**
        * Fired just after a `ModalDialog` is closed.
        *
        * @event ModalDialog#modalclose
        * @type {EventTarget~Event}
        */this.trigger('modalclose');this.conditionalBlur_();if(this.options_.temporary){this.dispose();}}/**
     * Check to see if the `ModalDialog` is closeable via the UI.
     *
     * @param  {boolean} [value]
     *         If given as a boolean, it will set the `closeable` option.
     *
     * @return {boolean}
     *         Returns the final value of the closable option.
     */;_proto.closeable=function closeable(value){if(typeof value==='boolean'){var closeable=this.closeable_=!!value;var close=this.getChild('closeButton');// If this is being made closeable and has no close button, add one.
if(closeable&&!close){// The close button should be a child of the modal - not its
// content element, so temporarily change the content element.
var temp=this.contentEl_;this.contentEl_=this.el_;close=this.addChild('closeButton',{controlText:'Close Modal Dialog'});this.contentEl_=temp;this.on(close,'close',this.close);}// If this is being made uncloseable and has a close button, remove it.
if(!closeable&&close){this.off(close,'close',this.close);this.removeChild(close);close.dispose();}}return this.closeable_;}/**
     * Fill the modal's content element with the modal's "content" option.
     * The content element will be emptied before this change takes place.
     */;_proto.fill=function fill(){this.fillWith(this.content());}/**
     * Fill the modal's content element with arbitrary content.
     * The content element will be emptied before this change takes place.
     *
     * @fires ModalDialog#beforemodalfill
     * @fires ModalDialog#modalfill
     *
     * @param {Mixed} [content]
     *        The same rules apply to this as apply to the `content` option.
     */;_proto.fillWith=function fillWith(content){var contentEl=this.contentEl();var parentEl=contentEl.parentNode;var nextSiblingEl=contentEl.nextSibling;/**
        * Fired just before a `ModalDialog` is filled with content.
        *
        * @event ModalDialog#beforemodalfill
        * @type {EventTarget~Event}
        */this.trigger('beforemodalfill');this.hasBeenFilled_=true;// Detach the content element from the DOM before performing
// manipulation to avoid modifying the live DOM multiple times.
parentEl.removeChild(contentEl);this.empty();insertContent(contentEl,content);/**
       * Fired just after a `ModalDialog` is filled with content.
       *
       * @event ModalDialog#modalfill
       * @type {EventTarget~Event}
       */this.trigger('modalfill');// Re-inject the re-filled content element.
if(nextSiblingEl){parentEl.insertBefore(contentEl,nextSiblingEl);}else{parentEl.appendChild(contentEl);}// make sure that the close button is last in the dialog DOM
var closeButton=this.getChild('closeButton');if(closeButton){parentEl.appendChild(closeButton.el_);}}/**
     * Empties the content element. This happens anytime the modal is filled.
     *
     * @fires ModalDialog#beforemodalempty
     * @fires ModalDialog#modalempty
     */;_proto.empty=function empty(){/**
      * Fired just before a `ModalDialog` is emptied.
      *
      * @event ModalDialog#beforemodalempty
      * @type {EventTarget~Event}
      */this.trigger('beforemodalempty');emptyEl(this.contentEl());/**
      * Fired just after a `ModalDialog` is emptied.
      *
      * @event ModalDialog#modalempty
      * @type {EventTarget~Event}
      */this.trigger('modalempty');}/**
     * Gets or sets the modal content, which gets normalized before being
     * rendered into the DOM.
     *
     * This does not update the DOM or fill the modal, but it is called during
     * that process.
     *
     * @param  {Mixed} [value]
     *         If defined, sets the internal content value to be used on the
     *         next call(s) to `fill`. This value is normalized before being
     *         inserted. To "clear" the internal content value, pass `null`.
     *
     * @return {Mixed}
     *         The current content of the modal dialog
     */;_proto.content=function content(value){if(typeof value!=='undefined'){this.content_=value;}return this.content_;}/**
     * conditionally focus the modal dialog if focus was previously on the player.
     *
     * @private
     */;_proto.conditionalFocus_=function conditionalFocus_(){var activeEl=document.activeElement;var playerEl=this.player_.el_;this.previouslyActiveEl_=null;if(playerEl.contains(activeEl)||playerEl===activeEl){this.previouslyActiveEl_=activeEl;this.focus();this.on(document,'keydown',this.handleKeyDown);}}/**
     * conditionally blur the element and refocus the last focused element
     *
     * @private
     */;_proto.conditionalBlur_=function conditionalBlur_(){if(this.previouslyActiveEl_){this.previouslyActiveEl_.focus();this.previouslyActiveEl_=null;}this.off(document,'keydown',this.handleKeyDown);}/**
     * Keydown handler. Attached when modal is focused.
     *
     * @listens keydown
     */;_proto.handleKeyDown=function handleKeyDown(event){// exit early if it isn't a tab key
if(!keycode.isEventKey(event,'Tab')){return;}var focusableEls=this.focusableEls_();var activeEl=this.el_.querySelector(':focus');var focusIndex;for(var i=0;i<focusableEls.length;i++){if(activeEl===focusableEls[i]){focusIndex=i;break;}}if(document.activeElement===this.el_){focusIndex=0;}if(event.shiftKey&&focusIndex===0){focusableEls[focusableEls.length-1].focus();event.preventDefault();}else if(!event.shiftKey&&focusIndex===focusableEls.length-1){focusableEls[0].focus();event.preventDefault();}}/**
     * get all focusable elements
     *
     * @private
     */;_proto.focusableEls_=function focusableEls_(){var allChildren=this.el_.querySelectorAll('*');return Array.prototype.filter.call(allChildren,function(child){return(child instanceof window$1.HTMLAnchorElement||child instanceof window$1.HTMLAreaElement)&&child.hasAttribute('href')||(child instanceof window$1.HTMLInputElement||child instanceof window$1.HTMLSelectElement||child instanceof window$1.HTMLTextAreaElement||child instanceof window$1.HTMLButtonElement)&&!child.hasAttribute('disabled')||child instanceof window$1.HTMLIFrameElement||child instanceof window$1.HTMLObjectElement||child instanceof window$1.HTMLEmbedElement||child.hasAttribute('tabindex')&&child.getAttribute('tabindex')!==-1||child.hasAttribute('contenteditable');});};return ModalDialog;}(Component);/**
   * Default options for `ModalDialog` default options.
   *
   * @type {Object}
   * @private
   */ModalDialog.prototype.options_={pauseOnOpen:true,temporary:true};Component.registerComponent('ModalDialog',ModalDialog);/**
   * Common functionaliy between {@link TextTrackList}, {@link AudioTrackList}, and
   * {@link VideoTrackList}
   *
   * @extends EventTarget
   */var TrackList=/*#__PURE__*/function(_EventTarget){_inheritsLoose(TrackList,_EventTarget);/**
     * Create an instance of this class
     *
     * @param {Track[]} tracks
     *        A list of tracks to initialize the list with.
     *
     * @abstract
     */function TrackList(tracks){var _this;if(tracks===void 0){tracks=[];}_this=_EventTarget.call(this)||this;_this.tracks_=[];/**
       * @memberof TrackList
       * @member {number} length
       *         The current number of `Track`s in the this Trackist.
       * @instance
       */Object.defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),'length',{get:function get(){return this.tracks_.length;}});for(var i=0;i<tracks.length;i++){_this.addTrack(tracks[i]);}return _this;}/**
     * Add a {@link Track} to the `TrackList`
     *
     * @param {Track} track
     *        The audio, video, or text track to add to the list.
     *
     * @fires TrackList#addtrack
     */var _proto=TrackList.prototype;_proto.addTrack=function addTrack(track){var index=this.tracks_.length;if(!(''+index in this)){Object.defineProperty(this,index,{get:function get(){return this.tracks_[index];}});}// Do not add duplicate tracks
if(this.tracks_.indexOf(track)===-1){this.tracks_.push(track);/**
         * Triggered when a track is added to a track list.
         *
         * @event TrackList#addtrack
         * @type {EventTarget~Event}
         * @property {Track} track
         *           A reference to track that was added.
         */this.trigger({track:track,type:'addtrack',target:this});}}/**
     * Remove a {@link Track} from the `TrackList`
     *
     * @param {Track} rtrack
     *        The audio, video, or text track to remove from the list.
     *
     * @fires TrackList#removetrack
     */;_proto.removeTrack=function removeTrack(rtrack){var track;for(var i=0,l=this.length;i<l;i++){if(this[i]===rtrack){track=this[i];if(track.off){track.off();}this.tracks_.splice(i,1);break;}}if(!track){return;}/**
       * Triggered when a track is removed from track list.
       *
       * @event TrackList#removetrack
       * @type {EventTarget~Event}
       * @property {Track} track
       *           A reference to track that was removed.
       */this.trigger({track:track,type:'removetrack',target:this});}/**
     * Get a Track from the TrackList by a tracks id
     *
     * @param {string} id - the id of the track to get
     * @method getTrackById
     * @return {Track}
     * @private
     */;_proto.getTrackById=function getTrackById(id){var result=null;for(var i=0,l=this.length;i<l;i++){var track=this[i];if(track.id===id){result=track;break;}}return result;};return TrackList;}(EventTarget);/**
   * Triggered when a different track is selected/enabled.
   *
   * @event TrackList#change
   * @type {EventTarget~Event}
   *//**
   * Events that can be called with on + eventName. See {@link EventHandler}.
   *
   * @property {Object} TrackList#allowedEvents_
   * @private
   */TrackList.prototype.allowedEvents_={change:'change',addtrack:'addtrack',removetrack:'removetrack'};// emulate attribute EventHandler support to allow for feature detection
for(var event in TrackList.prototype.allowedEvents_){TrackList.prototype['on'+event]=null;}/**
   * Anywhere we call this function we diverge from the spec
   * as we only support one enabled audiotrack at a time
   *
   * @param {AudioTrackList} list
   *        list to work on
   *
   * @param {AudioTrack} track
   *        The track to skip
   *
   * @private
   */var disableOthers=function disableOthers(list,track){for(var i=0;i<list.length;i++){if(!Object.keys(list[i]).length||track.id===list[i].id){continue;}// another audio track is enabled, disable it
list[i].enabled=false;}};/**
   * The current list of {@link AudioTrack} for a media file.
   *
   * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#audiotracklist}
   * @extends TrackList
   */var AudioTrackList=/*#__PURE__*/function(_TrackList){_inheritsLoose(AudioTrackList,_TrackList);/**
     * Create an instance of this class.
     *
     * @param {AudioTrack[]} [tracks=[]]
     *        A list of `AudioTrack` to instantiate the list with.
     */function AudioTrackList(tracks){var _this;if(tracks===void 0){tracks=[];}// make sure only 1 track is enabled
// sorted from last index to first index
for(var i=tracks.length-1;i>=0;i--){if(tracks[i].enabled){disableOthers(tracks,tracks[i]);break;}}_this=_TrackList.call(this,tracks)||this;_this.changing_=false;return _this;}/**
     * Add an {@link AudioTrack} to the `AudioTrackList`.
     *
     * @param {AudioTrack} track
     *        The AudioTrack to add to the list
     *
     * @fires TrackList#addtrack
     */var _proto=AudioTrackList.prototype;_proto.addTrack=function addTrack(track){var _this2=this;if(track.enabled){disableOthers(this,track);}_TrackList.prototype.addTrack.call(this,track);// native tracks don't have this
if(!track.addEventListener){return;}track.enabledChange_=function(){// when we are disabling other tracks (since we don't support
// more than one track at a time) we will set changing_
// to true so that we don't trigger additional change events
if(_this2.changing_){return;}_this2.changing_=true;disableOthers(_this2,track);_this2.changing_=false;_this2.trigger('change');};/**
       * @listens AudioTrack#enabledchange
       * @fires TrackList#change
       */track.addEventListener('enabledchange',track.enabledChange_);};_proto.removeTrack=function removeTrack(rtrack){_TrackList.prototype.removeTrack.call(this,rtrack);if(rtrack.removeEventListener&&rtrack.enabledChange_){rtrack.removeEventListener('enabledchange',rtrack.enabledChange_);rtrack.enabledChange_=null;}};return AudioTrackList;}(TrackList);/**
   * Un-select all other {@link VideoTrack}s that are selected.
   *
   * @param {VideoTrackList} list
   *        list to work on
   *
   * @param {VideoTrack} track
   *        The track to skip
   *
   * @private
   */var disableOthers$1=function disableOthers(list,track){for(var i=0;i<list.length;i++){if(!Object.keys(list[i]).length||track.id===list[i].id){continue;}// another video track is enabled, disable it
list[i].selected=false;}};/**
   * The current list of {@link VideoTrack} for a video.
   *
   * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#videotracklist}
   * @extends TrackList
   */var VideoTrackList=/*#__PURE__*/function(_TrackList){_inheritsLoose(VideoTrackList,_TrackList);/**
     * Create an instance of this class.
     *
     * @param {VideoTrack[]} [tracks=[]]
     *        A list of `VideoTrack` to instantiate the list with.
     */function VideoTrackList(tracks){var _this;if(tracks===void 0){tracks=[];}// make sure only 1 track is enabled
// sorted from last index to first index
for(var i=tracks.length-1;i>=0;i--){if(tracks[i].selected){disableOthers$1(tracks,tracks[i]);break;}}_this=_TrackList.call(this,tracks)||this;_this.changing_=false;/**
       * @member {number} VideoTrackList#selectedIndex
       *         The current index of the selected {@link VideoTrack`}.
       */Object.defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),'selectedIndex',{get:function get(){for(var _i=0;_i<this.length;_i++){if(this[_i].selected){return _i;}}return-1;},set:function set(){}});return _this;}/**
     * Add a {@link VideoTrack} to the `VideoTrackList`.
     *
     * @param {VideoTrack} track
     *        The VideoTrack to add to the list
     *
     * @fires TrackList#addtrack
     */var _proto=VideoTrackList.prototype;_proto.addTrack=function addTrack(track){var _this2=this;if(track.selected){disableOthers$1(this,track);}_TrackList.prototype.addTrack.call(this,track);// native tracks don't have this
if(!track.addEventListener){return;}track.selectedChange_=function(){if(_this2.changing_){return;}_this2.changing_=true;disableOthers$1(_this2,track);_this2.changing_=false;_this2.trigger('change');};/**
       * @listens VideoTrack#selectedchange
       * @fires TrackList#change
       */track.addEventListener('selectedchange',track.selectedChange_);};_proto.removeTrack=function removeTrack(rtrack){_TrackList.prototype.removeTrack.call(this,rtrack);if(rtrack.removeEventListener&&rtrack.selectedChange_){rtrack.removeEventListener('selectedchange',rtrack.selectedChange_);rtrack.selectedChange_=null;}};return VideoTrackList;}(TrackList);/**
   * The current list of {@link TextTrack} for a media file.
   *
   * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttracklist}
   * @extends TrackList
   */var TextTrackList=/*#__PURE__*/function(_TrackList){_inheritsLoose(TextTrackList,_TrackList);function TextTrackList(){return _TrackList.apply(this,arguments)||this;}var _proto=TextTrackList.prototype;/**
     * Add a {@link TextTrack} to the `TextTrackList`
     *
     * @param {TextTrack} track
     *        The text track to add to the list.
     *
     * @fires TrackList#addtrack
     */_proto.addTrack=function addTrack(track){var _this=this;_TrackList.prototype.addTrack.call(this,track);if(!this.queueChange_){this.queueChange_=function(){return _this.queueTrigger('change');};}if(!this.triggerSelectedlanguagechange){this.triggerSelectedlanguagechange_=function(){return _this.trigger('selectedlanguagechange');};}/**
       * @listens TextTrack#modechange
       * @fires TrackList#change
       */track.addEventListener('modechange',this.queueChange_);var nonLanguageTextTrackKind=['metadata','chapters'];if(nonLanguageTextTrackKind.indexOf(track.kind)===-1){track.addEventListener('modechange',this.triggerSelectedlanguagechange_);}};_proto.removeTrack=function removeTrack(rtrack){_TrackList.prototype.removeTrack.call(this,rtrack);// manually remove the event handlers we added
if(rtrack.removeEventListener){if(this.queueChange_){rtrack.removeEventListener('modechange',this.queueChange_);}if(this.selectedlanguagechange_){rtrack.removeEventListener('modechange',this.triggerSelectedlanguagechange_);}}};return TextTrackList;}(TrackList);/**
   * @file html-track-element-list.js
   *//**
   * The current list of {@link HtmlTrackElement}s.
   */var HtmlTrackElementList=/*#__PURE__*/function(){/**
     * Create an instance of this class.
     *
     * @param {HtmlTrackElement[]} [tracks=[]]
     *        A list of `HtmlTrackElement` to instantiate the list with.
     */function HtmlTrackElementList(trackElements){if(trackElements===void 0){trackElements=[];}this.trackElements_=[];/**
       * @memberof HtmlTrackElementList
       * @member {number} length
       *         The current number of `Track`s in the this Trackist.
       * @instance
       */Object.defineProperty(this,'length',{get:function get(){return this.trackElements_.length;}});for(var i=0,length=trackElements.length;i<length;i++){this.addTrackElement_(trackElements[i]);}}/**
     * Add an {@link HtmlTrackElement} to the `HtmlTrackElementList`
     *
     * @param {HtmlTrackElement} trackElement
     *        The track element to add to the list.
     *
     * @private
     */var _proto=HtmlTrackElementList.prototype;_proto.addTrackElement_=function addTrackElement_(trackElement){var index=this.trackElements_.length;if(!(''+index in this)){Object.defineProperty(this,index,{get:function get(){return this.trackElements_[index];}});}// Do not add duplicate elements
if(this.trackElements_.indexOf(trackElement)===-1){this.trackElements_.push(trackElement);}}/**
     * Get an {@link HtmlTrackElement} from the `HtmlTrackElementList` given an
     * {@link TextTrack}.
     *
     * @param {TextTrack} track
     *        The track associated with a track element.
     *
     * @return {HtmlTrackElement|undefined}
     *         The track element that was found or undefined.
     *
     * @private
     */;_proto.getTrackElementByTrack_=function getTrackElementByTrack_(track){var trackElement_;for(var i=0,length=this.trackElements_.length;i<length;i++){if(track===this.trackElements_[i].track){trackElement_=this.trackElements_[i];break;}}return trackElement_;}/**
     * Remove a {@link HtmlTrackElement} from the `HtmlTrackElementList`
     *
     * @param {HtmlTrackElement} trackElement
     *        The track element to remove from the list.
     *
     * @private
     */;_proto.removeTrackElement_=function removeTrackElement_(trackElement){for(var i=0,length=this.trackElements_.length;i<length;i++){if(trackElement===this.trackElements_[i]){if(this.trackElements_[i].track&&typeof this.trackElements_[i].track.off==='function'){this.trackElements_[i].track.off();}if(typeof this.trackElements_[i].off==='function'){this.trackElements_[i].off();}this.trackElements_.splice(i,1);break;}}};return HtmlTrackElementList;}();/**
   * @file text-track-cue-list.js
   *//**
   * @typedef {Object} TextTrackCueList~TextTrackCue
   *
   * @property {string} id
   *           The unique id for this text track cue
   *
   * @property {number} startTime
   *           The start time for this text track cue
   *
   * @property {number} endTime
   *           The end time for this text track cue
   *
   * @property {boolean} pauseOnExit
   *           Pause when the end time is reached if true.
   *
   * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackcue}
   *//**
   * A List of TextTrackCues.
   *
   * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackcuelist}
   */var TextTrackCueList=/*#__PURE__*/function(){/**
     * Create an instance of this class..
     *
     * @param {Array} cues
     *        A list of cues to be initialized with
     */function TextTrackCueList(cues){TextTrackCueList.prototype.setCues_.call(this,cues);/**
       * @memberof TextTrackCueList
       * @member {number} length
       *         The current number of `TextTrackCue`s in the TextTrackCueList.
       * @instance
       */Object.defineProperty(this,'length',{get:function get(){return this.length_;}});}/**
     * A setter for cues in this list. Creates getters
     * an an index for the cues.
     *
     * @param {Array} cues
     *        An array of cues to set
     *
     * @private
     */var _proto=TextTrackCueList.prototype;_proto.setCues_=function setCues_(cues){var oldLength=this.length||0;var i=0;var l=cues.length;this.cues_=cues;this.length_=cues.length;var defineProp=function defineProp(index){if(!(''+index in this)){Object.defineProperty(this,''+index,{get:function get(){return this.cues_[index];}});}};if(oldLength<l){i=oldLength;for(;i<l;i++){defineProp.call(this,i);}}}/**
     * Get a `TextTrackCue` that is currently in the `TextTrackCueList` by id.
     *
     * @param {string} id
     *        The id of the cue that should be searched for.
     *
     * @return {TextTrackCueList~TextTrackCue|null}
     *         A single cue or null if none was found.
     */;_proto.getCueById=function getCueById(id){var result=null;for(var i=0,l=this.length;i<l;i++){var cue=this[i];if(cue.id===id){result=cue;break;}}return result;};return TextTrackCueList;}();/**
   * @file track-kinds.js
   *//**
   * All possible `VideoTrackKind`s
   *
   * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-videotrack-kind
   * @typedef VideoTrack~Kind
   * @enum
   */var VideoTrackKind={alternative:'alternative',captions:'captions',main:'main',sign:'sign',subtitles:'subtitles',commentary:'commentary'};/**
   * All possible `AudioTrackKind`s
   *
   * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-audiotrack-kind
   * @typedef AudioTrack~Kind
   * @enum
   */var AudioTrackKind={'alternative':'alternative','descriptions':'descriptions','main':'main','main-desc':'main-desc','translation':'translation','commentary':'commentary'};/**
   * All possible `TextTrackKind`s
   *
   * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-texttrack-kind
   * @typedef TextTrack~Kind
   * @enum
   */var TextTrackKind={subtitles:'subtitles',captions:'captions',descriptions:'descriptions',chapters:'chapters',metadata:'metadata'};/**
   * All possible `TextTrackMode`s
   *
   * @see https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackmode
   * @typedef TextTrack~Mode
   * @enum
   */var TextTrackMode={disabled:'disabled',hidden:'hidden',showing:'showing'};/**
   * A Track class that contains all of the common functionality for {@link AudioTrack},
   * {@link VideoTrack}, and {@link TextTrack}.
   *
   * > Note: This class should not be used directly
   *
   * @see {@link https://html.spec.whatwg.org/multipage/embedded-content.html}
   * @extends EventTarget
   * @abstract
   */var Track=/*#__PURE__*/function(_EventTarget){_inheritsLoose(Track,_EventTarget);/**
     * Create an instance of this class.
     *
     * @param {Object} [options={}]
     *        Object of option names and values
     *
     * @param {string} [options.kind='']
     *        A valid kind for the track type you are creating.
     *
     * @param {string} [options.id='vjs_track_' + Guid.newGUID()]
     *        A unique id for this AudioTrack.
     *
     * @param {string} [options.label='']
     *        The menu label for this track.
     *
     * @param {string} [options.language='']
     *        A valid two character language code.
     *
     * @abstract
     */function Track(options){var _this;if(options===void 0){options={};}_this=_EventTarget.call(this)||this;var trackProps={id:options.id||'vjs_track_'+newGUID(),kind:options.kind||'',label:options.label||'',language:options.language||''};/**
       * @memberof Track
       * @member {string} id
       *         The id of this track. Cannot be changed after creation.
       * @instance
       *
       * @readonly
       *//**
       * @memberof Track
       * @member {string} kind
       *         The kind of track that this is. Cannot be changed after creation.
       * @instance
       *
       * @readonly
       *//**
       * @memberof Track
       * @member {string} label
       *         The label of this track. Cannot be changed after creation.
       * @instance
       *
       * @readonly
       *//**
       * @memberof Track
       * @member {string} language
       *         The two letter language code for this track. Cannot be changed after
       *         creation.
       * @instance
       *
       * @readonly
       */var _loop=function _loop(key){Object.defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),key,{get:function get(){return trackProps[key];},set:function set(){}});};for(var key in trackProps){_loop(key);}return _this;}return Track;}(EventTarget);/**
   * @file url.js
   * @module url
   *//**
   * @typedef {Object} url:URLObject
   *
   * @property {string} protocol
   *           The protocol of the url that was parsed.
   *
   * @property {string} hostname
   *           The hostname of the url that was parsed.
   *
   * @property {string} port
   *           The port of the url that was parsed.
   *
   * @property {string} pathname
   *           The pathname of the url that was parsed.
   *
   * @property {string} search
   *           The search query of the url that was parsed.
   *
   * @property {string} hash
   *           The hash of the url that was parsed.
   *
   * @property {string} host
   *           The host of the url that was parsed.
   *//**
   * Resolve and parse the elements of a URL.
   *
   * @function
   * @param    {String} url
   *           The url to parse
   *
   * @return   {url:URLObject}
   *           An object of url details
   */var parseUrl=function parseUrl(url){var props=['protocol','hostname','port','pathname','search','hash','host'];// add the url to an anchor and let the browser parse the URL
var a=document.createElement('a');a.href=url;// IE8 (and 9?) Fix
// ie8 doesn't parse the URL correctly until the anchor is actually
// added to the body, and an innerHTML is needed to trigger the parsing
var addToBody=a.host===''&&a.protocol!=='file:';var div;if(addToBody){div=document.createElement('div');div.innerHTML="<a href=\""+url+"\"></a>";a=div.firstChild;// prevent the div from affecting layout
div.setAttribute('style','display:none; position:absolute;');document.body.appendChild(div);}// Copy the specific URL properties to a new object
// This is also needed for IE8 because the anchor loses its
// properties when it's removed from the dom
var details={};for(var i=0;i<props.length;i++){details[props[i]]=a[props[i]];}// IE9 adds the port to the host property unlike everyone else. If
// a port identifier is added for standard ports, strip it.
if(details.protocol==='http:'){details.host=details.host.replace(/:80$/,'');}if(details.protocol==='https:'){details.host=details.host.replace(/:443$/,'');}if(!details.protocol){details.protocol=window$1.location.protocol;}if(addToBody){document.body.removeChild(div);}return details;};/**
   * Get absolute version of relative URL. Used to tell Flash the correct URL.
   *
   * @function
   * @param    {string} url
   *           URL to make absolute
   *
   * @return   {string}
   *           Absolute URL
   *
   * @see      http://stackoverflow.com/questions/470832/getting-an-absolute-url-from-a-relative-one-ie6-issue
   */var getAbsoluteURL=function getAbsoluteURL(url){// Check if absolute URL
if(!url.match(/^https?:\/\//)){// Convert to absolute URL. Flash hosted off-site needs an absolute URL.
var div=document.createElement('div');div.innerHTML="<a href=\""+url+"\">x</a>";url=div.firstChild.href;}return url;};/**
   * Returns the extension of the passed file name. It will return an empty string
   * if passed an invalid path.
   *
   * @function
   * @param    {string} path
   *           The fileName path like '/path/to/file.mp4'
   *
   * @return  {string}
   *           The extension in lower case or an empty string if no
   *           extension could be found.
   */var getFileExtension=function getFileExtension(path){if(typeof path==='string'){var splitPathRe=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i;var pathParts=splitPathRe.exec(path);if(pathParts){return pathParts.pop().toLowerCase();}}return'';};/**
   * Returns whether the url passed is a cross domain request or not.
   *
   * @function
   * @param    {string} url
   *           The url to check.
   *
   * @return   {boolean}
   *           Whether it is a cross domain request or not.
   */var isCrossOrigin=function isCrossOrigin(url){var winLoc=window$1.location;var urlInfo=parseUrl(url);// IE8 protocol relative urls will return ':' for protocol
var srcProtocol=urlInfo.protocol===':'?winLoc.protocol:urlInfo.protocol;// Check if url is for another domain/origin
// IE8 doesn't know location.origin, so we won't rely on it here
var crossOrigin=srcProtocol+urlInfo.host!==winLoc.protocol+winLoc.host;return crossOrigin;};var Url=/*#__PURE__*/Object.freeze({parseUrl:parseUrl,getAbsoluteURL:getAbsoluteURL,getFileExtension:getFileExtension,isCrossOrigin:isCrossOrigin});var isFunction_1=isFunction;var toString$1=Object.prototype.toString;function isFunction(fn){var string=toString$1.call(fn);return string==='[object Function]'||typeof fn==='function'&&string!=='[object RegExp]'||typeof window!=='undefined'&&(// IE8 and below
fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt);}var trim_1=createCommonjsModule(function(module,exports){exports=module.exports=trim;function trim(str){return str.replace(/^\s*|\s*$/g,'');}exports.left=function(str){return str.replace(/^\s*/,'');};exports.right=function(str){return str.replace(/\s*$/,'');};});var trim_2=trim_1.left;var trim_3=trim_1.right;var fnToStr=Function.prototype.toString;var constructorRegex=/^\s*class\b/;var isES6ClassFn=function isES6ClassFunction(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr);}catch(e){return false;// not a function
}};var tryFunctionObject=function tryFunctionToStr(value){try{if(isES6ClassFn(value)){return false;}fnToStr.call(value);return true;}catch(e){return false;}};var toStr=Object.prototype.toString;var fnClass='[object Function]';var genClass='[object GeneratorFunction]';var hasToStringTag=typeof Symbol==='function'&&_typeof(Symbol.toStringTag)==='symbol';var isCallable=function isCallable(value){if(!value){return false;}if(typeof value!=='function'&&(typeof value==='undefined'?'undefined':_typeof(value))!=='object'){return false;}if(typeof value==='function'&&!value.prototype){return true;}if(hasToStringTag){return tryFunctionObject(value);}if(isES6ClassFn(value)){return false;}var strClass=toStr.call(value);return strClass===fnClass||strClass===genClass;};var toStr$1=Object.prototype.toString;var hasOwnProperty=Object.prototype.hasOwnProperty;var forEachArray=function forEachArray(array,iterator,receiver){for(var i=0,len=array.length;i<len;i++){if(hasOwnProperty.call(array,i)){if(receiver==null){iterator(array[i],i,array);}else{iterator.call(receiver,array[i],i,array);}}}};var forEachString=function forEachString(string,iterator,receiver){for(var i=0,len=string.length;i<len;i++){// no such thing as a sparse string.
if(receiver==null){iterator(string.charAt(i),i,string);}else{iterator.call(receiver,string.charAt(i),i,string);}}};var forEachObject=function forEachObject(object,iterator,receiver){for(var k in object){if(hasOwnProperty.call(object,k)){if(receiver==null){iterator(object[k],k,object);}else{iterator.call(receiver,object[k],k,object);}}}};var forEach=function forEach(list,iterator,thisArg){if(!isCallable(iterator)){throw new TypeError('iterator must be a function');}var receiver;if(arguments.length>=3){receiver=thisArg;}if(toStr$1.call(list)==='[object Array]'){forEachArray(list,iterator,receiver);}else if(typeof list==='string'){forEachString(list,iterator,receiver);}else{forEachObject(list,iterator,receiver);}};var forEach_1=forEach;var isArray=function isArray(arg){return Object.prototype.toString.call(arg)==='[object Array]';};var parseHeaders=function parseHeaders(headers){if(!headers)return{};var result={};forEach_1(trim_1(headers).split('\n'),function(row){var index=row.indexOf(':'),key=trim_1(row.slice(0,index)).toLowerCase(),value=trim_1(row.slice(index+1));if(typeof result[key]==='undefined'){result[key]=value;}else if(isArray(result[key])){result[key].push(value);}else{result[key]=[result[key],value];}});return result;};var immutable=extend;var hasOwnProperty$1=Object.prototype.hasOwnProperty;function extend(){var target={};for(var i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(hasOwnProperty$1.call(source,key)){target[key]=source[key];}}}return target;}var xhr=createXHR;createXHR.XMLHttpRequest=window$1.XMLHttpRequest||noop;createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest()?createXHR.XMLHttpRequest:window$1.XDomainRequest;forEachArray$1(["get","put","post","patch","head","delete"],function(method){createXHR[method==="delete"?"del":method]=function(uri,options,callback){options=initParams(uri,options,callback);options.method=method.toUpperCase();return _createXHR(options);};});function forEachArray$1(array,iterator){for(var i=0;i<array.length;i++){iterator(array[i]);}}function isEmpty(obj){for(var i in obj){if(obj.hasOwnProperty(i))return false;}return true;}function initParams(uri,options,callback){var params=uri;if(isFunction_1(options)){callback=options;if(typeof uri==="string"){params={uri:uri};}}else{params=immutable(options,{uri:uri});}params.callback=callback;return params;}function createXHR(uri,options,callback){options=initParams(uri,options,callback);return _createXHR(options);}function _createXHR(options){if(typeof options.callback==="undefined"){throw new Error("callback argument missing");}var called=false;var callback=function cbOnce(err,response,body){if(!called){called=true;options.callback(err,response,body);}};function readystatechange(){if(xhr.readyState===4){setTimeout(loadFunc,0);}}function getBody(){// Chrome with requestType=blob throws errors arround when even testing access to responseText
var body=undefined;if(xhr.response){body=xhr.response;}else{body=xhr.responseText||getXml(xhr);}if(isJson){try{body=JSON.parse(body);}catch(e){}}return body;}function errorFunc(evt){clearTimeout(timeoutTimer);if(!(evt instanceof Error)){evt=new Error(""+(evt||"Unknown XMLHttpRequest Error"));}evt.statusCode=0;return callback(evt,failureResponse);}// will load the data & process the response in a special response object
function loadFunc(){if(aborted)return;var status;clearTimeout(timeoutTimer);if(options.useXDR&&xhr.status===undefined){//IE8 CORS GET successful response doesn't have a status field, but body is fine
status=200;}else{status=xhr.status===1223?204:xhr.status;}var response=failureResponse;var err=null;if(status!==0){response={body:getBody(),statusCode:status,method:method,headers:{},url:uri,rawRequest:xhr};if(xhr.getAllResponseHeaders){//remember xhr can in fact be XDR for CORS in IE
response.headers=parseHeaders(xhr.getAllResponseHeaders());}}else{err=new Error("Internal XMLHttpRequest Error");}return callback(err,response,response.body);}var xhr=options.xhr||null;if(!xhr){if(options.cors||options.useXDR){xhr=new createXHR.XDomainRequest();}else{xhr=new createXHR.XMLHttpRequest();}}var key;var aborted;var uri=xhr.url=options.uri||options.url;var method=xhr.method=options.method||"GET";var body=options.body||options.data;var headers=xhr.headers=options.headers||{};var sync=!!options.sync;var isJson=false;var timeoutTimer;var failureResponse={body:undefined,headers:{},statusCode:0,method:method,url:uri,rawRequest:xhr};if("json"in options&&options.json!==false){isJson=true;headers["accept"]||headers["Accept"]||(headers["Accept"]="application/json");//Don't override existing accept header declared by user
if(method!=="GET"&&method!=="HEAD"){headers["content-type"]||headers["Content-Type"]||(headers["Content-Type"]="application/json");//Don't override existing accept header declared by user
body=JSON.stringify(options.json===true?body:options.json);}}xhr.onreadystatechange=readystatechange;xhr.onload=loadFunc;xhr.onerror=errorFunc;// IE9 must have onprogress be set to a unique function.
xhr.onprogress=function(){// IE must die
};xhr.onabort=function(){aborted=true;};xhr.ontimeout=errorFunc;xhr.open(method,uri,!sync,options.username,options.password);//has to be after open
if(!sync){xhr.withCredentials=!!options.withCredentials;}// Cannot set timeout with sync request
// not setting timeout on the xhr object, because of old webkits etc. not handling that correctly
// both npm's request and jquery 1.x use this kind of timeout, so this is being consistent
if(!sync&&options.timeout>0){timeoutTimer=setTimeout(function(){if(aborted)return;aborted=true;//IE9 may still call readystatechange
xhr.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT";errorFunc(e);},options.timeout);}if(xhr.setRequestHeader){for(key in headers){if(headers.hasOwnProperty(key)){xhr.setRequestHeader(key,headers[key]);}}}else if(options.headers&&!isEmpty(options.headers)){throw new Error("Headers cannot be set on an XDomainRequest object");}if("responseType"in options){xhr.responseType=options.responseType;}if("beforeSend"in options&&typeof options.beforeSend==="function"){options.beforeSend(xhr);}// Microsoft Edge browser sends "undefined" when send is called with undefined value.
// XMLHttpRequest spec says to pass null as body to indicate no body
// See https://github.com/naugtur/xhr/issues/100.
xhr.send(body||null);return xhr;}function getXml(xhr){if(xhr.responseType==="document"){return xhr.responseXML;}var firefoxBugTakenEffect=xhr.responseXML&&xhr.responseXML.documentElement.nodeName==="parsererror";if(xhr.responseType===""&&!firefoxBugTakenEffect){return xhr.responseXML;}return null;}function noop(){}/**
   * Takes a webvtt file contents and parses it into cues
   *
   * @param {string} srcContent
   *        webVTT file contents
   *
   * @param {TextTrack} track
   *        TextTrack to add cues to. Cues come from the srcContent.
   *
   * @private
   */var parseCues=function parseCues(srcContent,track){var parser=new window$1.WebVTT.Parser(window$1,window$1.vttjs,window$1.WebVTT.StringDecoder());var errors=[];parser.oncue=function(cue){track.addCue(cue);};parser.onparsingerror=function(error){errors.push(error);};parser.onflush=function(){track.trigger({type:'loadeddata',target:track});};parser.parse(srcContent);if(errors.length>0){if(window$1.console&&window$1.console.groupCollapsed){window$1.console.groupCollapsed("Text Track parsing errors for "+track.src);}errors.forEach(function(error){return log.error(error);});if(window$1.console&&window$1.console.groupEnd){window$1.console.groupEnd();}}parser.flush();};/**
   * Load a `TextTrack` from a specified url.
   *
   * @param {string} src
   *        Url to load track from.
   *
   * @param {TextTrack} track
   *        Track to add cues to. Comes from the content at the end of `url`.
   *
   * @private
   */var loadTrack=function loadTrack(src,track){var opts={uri:src};var crossOrigin=isCrossOrigin(src);if(crossOrigin){opts.cors=crossOrigin;}xhr(opts,bind(this,function(err,response,responseBody){if(err){return log.error(err,response);}track.loaded_=true;// Make sure that vttjs has loaded, otherwise, wait till it finished loading
// NOTE: this is only used for the alt/video.novtt.js build
if(typeof window$1.WebVTT!=='function'){if(track.tech_){// to prevent use before define eslint error, we define loadHandler
// as a let here
var loadHandler;var errorHandler=function errorHandler(){log.error("vttjs failed to load, stopping trying to process "+track.src);track.tech_.off('vttjsloaded',loadHandler);};loadHandler=function loadHandler(){track.tech_.off('vttjserror',errorHandler);return parseCues(responseBody,track);};track.tech_.one('vttjsloaded',loadHandler);track.tech_.one('vttjserror',errorHandler);}}else{parseCues(responseBody,track);}}));};/**
   * A representation of a single `TextTrack`.
   *
   * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttrack}
   * @extends Track
   */var TextTrack=/*#__PURE__*/function(_Track){_inheritsLoose(TextTrack,_Track);/**
     * Create an instance of this class.
     *
     * @param {Object} options={}
     *        Object of option names and values
     *
     * @param {Tech} options.tech
     *        A reference to the tech that owns this TextTrack.
     *
     * @param {TextTrack~Kind} [options.kind='subtitles']
     *        A valid text track kind.
     *
     * @param {TextTrack~Mode} [options.mode='disabled']
     *        A valid text track mode.
     *
     * @param {string} [options.id='vjs_track_' + Guid.newGUID()]
     *        A unique id for this TextTrack.
     *
     * @param {string} [options.label='']
     *        The menu label for this track.
     *
     * @param {string} [options.language='']
     *        A valid two character language code.
     *
     * @param {string} [options.srclang='']
     *        A valid two character language code. An alternative, but deprioritized
     *        version of `options.language`
     *
     * @param {string} [options.src]
     *        A url to TextTrack cues.
     *
     * @param {boolean} [options.default]
     *        If this track should default to on or off.
     */function TextTrack(options){var _this;if(options===void 0){options={};}if(!options.tech){throw new Error('A tech was not provided.');}var settings=mergeOptions(options,{kind:TextTrackKind[options.kind]||'subtitles',language:options.language||options.srclang||''});var mode=TextTrackMode[settings.mode]||'disabled';var default_=settings.default;if(settings.kind==='metadata'||settings.kind==='chapters'){mode='hidden';}_this=_Track.call(this,settings)||this;_this.tech_=settings.tech;_this.cues_=[];_this.activeCues_=[];var cues=new TextTrackCueList(_this.cues_);var activeCues=new TextTrackCueList(_this.activeCues_);var changed=false;var timeupdateHandler=bind(_assertThisInitialized(_assertThisInitialized(_this)),function(){// Accessing this.activeCues for the side-effects of updating itself
// due to its nature as a getter function. Do not remove or cues will
// stop updating!
// Use the setter to prevent deletion from uglify (pure_getters rule)
this.activeCues=this.activeCues;if(changed){this.trigger('cuechange');changed=false;}});if(mode!=='disabled'){_this.tech_.ready(function(){_this.tech_.on('timeupdate',timeupdateHandler);},true);}Object.defineProperties(_assertThisInitialized(_assertThisInitialized(_this)),{/**
         * @memberof TextTrack
         * @member {boolean} default
         *         If this track was set to be on or off by default. Cannot be changed after
         *         creation.
         * @instance
         *
         * @readonly
         */default:{get:function get(){return default_;},set:function set(){}},/**
         * @memberof TextTrack
         * @member {string} mode
         *         Set the mode of this TextTrack to a valid {@link TextTrack~Mode}. Will
         *         not be set if setting to an invalid mode.
         * @instance
         *
         * @fires TextTrack#modechange
         */mode:{get:function get(){return mode;},set:function set(newMode){var _this2=this;if(!TextTrackMode[newMode]){return;}mode=newMode;if(mode!=='disabled'){this.tech_.ready(function(){_this2.tech_.on('timeupdate',timeupdateHandler);},true);}else{this.tech_.off('timeupdate',timeupdateHandler);}/**
             * An event that fires when mode changes on this track. This allows
             * the TextTrackList that holds this track to act accordingly.
             *
             * > Note: This is not part of the spec!
             *
             * @event TextTrack#modechange
             * @type {EventTarget~Event}
             */this.trigger('modechange');}},/**
         * @memberof TextTrack
         * @member {TextTrackCueList} cues
         *         The text track cue list for this TextTrack.
         * @instance
         */cues:{get:function get(){if(!this.loaded_){return null;}return cues;},set:function set(){}},/**
         * @memberof TextTrack
         * @member {TextTrackCueList} activeCues
         *         The list text track cues that are currently active for this TextTrack.
         * @instance
         */activeCues:{get:function get(){if(!this.loaded_){return null;}// nothing to do
if(this.cues.length===0){return activeCues;}var ct=this.tech_.currentTime();var active=[];for(var i=0,l=this.cues.length;i<l;i++){var cue=this.cues[i];if(cue.startTime<=ct&&cue.endTime>=ct){active.push(cue);}else if(cue.startTime===cue.endTime&&cue.startTime<=ct&&cue.startTime+0.5>=ct){active.push(cue);}}changed=false;if(active.length!==this.activeCues_.length){changed=true;}else{for(var _i=0;_i<active.length;_i++){if(this.activeCues_.indexOf(active[_i])===-1){changed=true;}}}this.activeCues_=active;activeCues.setCues_(this.activeCues_);return activeCues;},// /!\ Keep this setter empty (see the timeupdate handler above)
set:function set(){}}});if(settings.src){_this.src=settings.src;loadTrack(settings.src,_assertThisInitialized(_assertThisInitialized(_this)));}else{_this.loaded_=true;}return _this;}/**
     * Add a cue to the internal list of cues.
     *
     * @param {TextTrack~Cue} cue
     *        The cue to add to our internal list
     */var _proto=TextTrack.prototype;_proto.addCue=function addCue(originalCue){var cue=originalCue;if(window$1.vttjs&&!(originalCue instanceof window$1.vttjs.VTTCue)){cue=new window$1.vttjs.VTTCue(originalCue.startTime,originalCue.endTime,originalCue.text);for(var prop in originalCue){if(!(prop in cue)){cue[prop]=originalCue[prop];}}// make sure that `id` is copied over
cue.id=originalCue.id;cue.originalCue_=originalCue;}var tracks=this.tech_.textTracks();for(var i=0;i<tracks.length;i++){if(tracks[i]!==this){tracks[i].removeCue(cue);}}this.cues_.push(cue);this.cues.setCues_(this.cues_);}/**
     * Remove a cue from our internal list
     *
     * @param {TextTrack~Cue} removeCue
     *        The cue to remove from our internal list
     */;_proto.removeCue=function removeCue(_removeCue){var i=this.cues_.length;while(i--){var cue=this.cues_[i];if(cue===_removeCue||cue.originalCue_&&cue.originalCue_===_removeCue){this.cues_.splice(i,1);this.cues.setCues_(this.cues_);break;}}};return TextTrack;}(Track);/**
   * cuechange - One or more cues in the track have become active or stopped being active.
   */TextTrack.prototype.allowedEvents_={cuechange:'cuechange'};/**
   * A representation of a single `AudioTrack`. If it is part of an {@link AudioTrackList}
   * only one `AudioTrack` in the list will be enabled at a time.
   *
   * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#audiotrack}
   * @extends Track
   */var AudioTrack=/*#__PURE__*/function(_Track){_inheritsLoose(AudioTrack,_Track);/**
     * Create an instance of this class.
     *
     * @param {Object} [options={}]
     *        Object of option names and values
     *
     * @param {AudioTrack~Kind} [options.kind='']
     *        A valid audio track kind
     *
     * @param {string} [options.id='vjs_track_' + Guid.newGUID()]
     *        A unique id for this AudioTrack.
     *
     * @param {string} [options.label='']
     *        The menu label for this track.
     *
     * @param {string} [options.language='']
     *        A valid two character language code.
     *
     * @param {boolean} [options.enabled]
     *        If this track is the one that is currently playing. If this track is part of
     *        an {@link AudioTrackList}, only one {@link AudioTrack} will be enabled.
     */function AudioTrack(options){var _this;if(options===void 0){options={};}var settings=mergeOptions(options,{kind:AudioTrackKind[options.kind]||''});_this=_Track.call(this,settings)||this;var enabled=false;/**
       * @memberof AudioTrack
       * @member {boolean} enabled
       *         If this `AudioTrack` is enabled or not. When setting this will
       *         fire {@link AudioTrack#enabledchange} if the state of enabled is changed.
       * @instance
       *
       * @fires VideoTrack#selectedchange
       */Object.defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),'enabled',{get:function get(){return enabled;},set:function set(newEnabled){// an invalid or unchanged value
if(typeof newEnabled!=='boolean'||newEnabled===enabled){return;}enabled=newEnabled;/**
           * An event that fires when enabled changes on this track. This allows
           * the AudioTrackList that holds this track to act accordingly.
           *
           * > Note: This is not part of the spec! Native tracks will do
           *         this internally without an event.
           *
           * @event AudioTrack#enabledchange
           * @type {EventTarget~Event}
           */this.trigger('enabledchange');}});// if the user sets this track to selected then
// set selected to that true value otherwise
// we keep it false
if(settings.enabled){_this.enabled=settings.enabled;}_this.loaded_=true;return _this;}return AudioTrack;}(Track);/**
   * A representation of a single `VideoTrack`.
   *
   * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#videotrack}
   * @extends Track
   */var VideoTrack=/*#__PURE__*/function(_Track){_inheritsLoose(VideoTrack,_Track);/**
     * Create an instance of this class.
     *
     * @param {Object} [options={}]
     *        Object of option names and values
     *
     * @param {string} [options.kind='']
     *        A valid {@link VideoTrack~Kind}
     *
     * @param {string} [options.id='vjs_track_' + Guid.newGUID()]
     *        A unique id for this AudioTrack.
     *
     * @param {string} [options.label='']
     *        The menu label for this track.
     *
     * @param {string} [options.language='']
     *        A valid two character language code.
     *
     * @param {boolean} [options.selected]
     *        If this track is the one that is currently playing.
     */function VideoTrack(options){var _this;if(options===void 0){options={};}var settings=mergeOptions(options,{kind:VideoTrackKind[options.kind]||''});_this=_Track.call(this,settings)||this;var selected=false;/**
       * @memberof VideoTrack
       * @member {boolean} selected
       *         If this `VideoTrack` is selected or not. When setting this will
       *         fire {@link VideoTrack#selectedchange} if the state of selected changed.
       * @instance
       *
       * @fires VideoTrack#selectedchange
       */Object.defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),'selected',{get:function get(){return selected;},set:function set(newSelected){// an invalid or unchanged value
if(typeof newSelected!=='boolean'||newSelected===selected){return;}selected=newSelected;/**
           * An event that fires when selected changes on this track. This allows
           * the VideoTrackList that holds this track to act accordingly.
           *
           * > Note: This is not part of the spec! Native tracks will do
           *         this internally without an event.
           *
           * @event VideoTrack#selectedchange
           * @type {EventTarget~Event}
           */this.trigger('selectedchange');}});// if the user sets this track to selected then
// set selected to that true value otherwise
// we keep it false
if(settings.selected){_this.selected=settings.selected;}return _this;}return VideoTrack;}(Track);/**
   * @memberof HTMLTrackElement
   * @typedef {HTMLTrackElement~ReadyState}
   * @enum {number}
   */var NONE=0;var LOADING=1;var LOADED=2;var ERROR=3;/**
   * A single track represented in the DOM.
   *
   * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#htmltrackelement}
   * @extends EventTarget
   */var HTMLTrackElement=/*#__PURE__*/function(_EventTarget){_inheritsLoose(HTMLTrackElement,_EventTarget);/**
     * Create an instance of this class.
     *
     * @param {Object} options={}
     *        Object of option names and values
     *
     * @param {Tech} options.tech
     *        A reference to the tech that owns this HTMLTrackElement.
     *
     * @param {TextTrack~Kind} [options.kind='subtitles']
     *        A valid text track kind.
     *
     * @param {TextTrack~Mode} [options.mode='disabled']
     *        A valid text track mode.
     *
     * @param {string} [options.id='vjs_track_' + Guid.newGUID()]
     *        A unique id for this TextTrack.
     *
     * @param {string} [options.label='']
     *        The menu label for this track.
     *
     * @param {string} [options.language='']
     *        A valid two character language code.
     *
     * @param {string} [options.srclang='']
     *        A valid two character language code. An alternative, but deprioritized
     *        vesion of `options.language`
     *
     * @param {string} [options.src]
     *        A url to TextTrack cues.
     *
     * @param {boolean} [options.default]
     *        If this track should default to on or off.
     */function HTMLTrackElement(options){var _this;if(options===void 0){options={};}_this=_EventTarget.call(this)||this;var readyState;var track=new TextTrack(options);_this.kind=track.kind;_this.src=track.src;_this.srclang=track.language;_this.label=track.label;_this.default=track.default;Object.defineProperties(_assertThisInitialized(_assertThisInitialized(_this)),{/**
         * @memberof HTMLTrackElement
         * @member {HTMLTrackElement~ReadyState} readyState
         *         The current ready state of the track element.
         * @instance
         */readyState:{get:function get(){return readyState;}},/**
         * @memberof HTMLTrackElement
         * @member {TextTrack} track
         *         The underlying TextTrack object.
         * @instance
         *
         */track:{get:function get(){return track;}}});readyState=NONE;/**
       * @listens TextTrack#loadeddata
       * @fires HTMLTrackElement#load
       */track.addEventListener('loadeddata',function(){readyState=LOADED;_this.trigger({type:'load',target:_assertThisInitialized(_assertThisInitialized(_this))});});return _this;}return HTMLTrackElement;}(EventTarget);HTMLTrackElement.prototype.allowedEvents_={load:'load'};HTMLTrackElement.NONE=NONE;HTMLTrackElement.LOADING=LOADING;HTMLTrackElement.LOADED=LOADED;HTMLTrackElement.ERROR=ERROR;/*
   * This file contains all track properties that are used in
   * player.js, tech.js, html5.js and possibly other techs in the future.
   */var NORMAL={audio:{ListClass:AudioTrackList,TrackClass:AudioTrack,capitalName:'Audio'},video:{ListClass:VideoTrackList,TrackClass:VideoTrack,capitalName:'Video'},text:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:'Text'}};Object.keys(NORMAL).forEach(function(type){NORMAL[type].getterName=type+"Tracks";NORMAL[type].privateName=type+"Tracks_";});var REMOTE={remoteText:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:'RemoteText',getterName:'remoteTextTracks',privateName:'remoteTextTracks_'},remoteTextEl:{ListClass:HtmlTrackElementList,TrackClass:HTMLTrackElement,capitalName:'RemoteTextTrackEls',getterName:'remoteTextTrackEls',privateName:'remoteTextTrackEls_'}};var ALL=mergeOptions(NORMAL,REMOTE);REMOTE.names=Object.keys(REMOTE);NORMAL.names=Object.keys(NORMAL);ALL.names=[].concat(REMOTE.names).concat(NORMAL.names);var vtt={};/**
   * An Object containing a structure like: `{src: 'url', type: 'mimetype'}` or string
   * that just contains the src url alone.
   * * `var SourceObject = {src: 'http://ex.com/video.mp4', type: 'video/mp4'};`
     * `var SourceString = 'http://example.com/some-video.mp4';`
   *
   * @typedef {Object|string} Tech~SourceObject
   *
   * @property {string} src
   *           The url to the source
   *
   * @property {string} type
   *           The mime type of the source
   *//**
   * A function used by {@link Tech} to create a new {@link TextTrack}.
   *
   * @private
   *
   * @param {Tech} self
   *        An instance of the Tech class.
   *
   * @param {string} kind
   *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata)
   *
   * @param {string} [label]
   *        Label to identify the text track
   *
   * @param {string} [language]
   *        Two letter language abbreviation
   *
   * @param {Object} [options={}]
   *        An object with additional text track options
   *
   * @return {TextTrack}
   *          The text track that was created.
   */function createTrackHelper(self,kind,label,language,options){if(options===void 0){options={};}var tracks=self.textTracks();options.kind=kind;if(label){options.label=label;}if(language){options.language=language;}options.tech=self;var track=new ALL.text.TrackClass(options);tracks.addTrack(track);return track;}/**
   * This is the base class for media playback technology controllers, such as
   * {@link Flash} and {@link HTML5}
   *
   * @extends Component
   */var Tech=/*#__PURE__*/function(_Component){_inheritsLoose(Tech,_Component);/**
    * Create an instance of this Tech.
    *
    * @param {Object} [options]
    *        The key/value store of player options.
    *
    * @param {Component~ReadyCallback} ready
    *        Callback function to call when the `HTML5` Tech is ready.
    */function Tech(options,ready){var _this;if(options===void 0){options={};}if(ready===void 0){ready=function ready(){};}// we don't want the tech to report user activity automatically.
// This is done manually in addControlsListeners
options.reportTouchActivity=false;_this=_Component.call(this,null,options,ready)||this;// keep track of whether the current source has played at all to
// implement a very limited played()
_this.hasStarted_=false;_this.on('playing',function(){this.hasStarted_=true;});_this.on('loadstart',function(){this.hasStarted_=false;});ALL.names.forEach(function(name){var props=ALL[name];if(options&&options[props.getterName]){_this[props.privateName]=options[props.getterName];}});// Manually track progress in cases where the browser/flash player doesn't report it.
if(!_this.featuresProgressEvents){_this.manualProgressOn();}// Manually track timeupdates in cases where the browser/flash player doesn't report it.
if(!_this.featuresTimeupdateEvents){_this.manualTimeUpdatesOn();}['Text','Audio','Video'].forEach(function(track){if(options["native"+track+"Tracks"]===false){_this["featuresNative"+track+"Tracks"]=false;}});if(options.nativeCaptions===false||options.nativeTextTracks===false){_this.featuresNativeTextTracks=false;}else if(options.nativeCaptions===true||options.nativeTextTracks===true){_this.featuresNativeTextTracks=true;}if(!_this.featuresNativeTextTracks){_this.emulateTextTracks();}_this.autoRemoteTextTracks_=new ALL.text.ListClass();_this.initTrackListeners();// Turn on component tap events only if not using native controls
if(!options.nativeControlsForTouch){_this.emitTapEvents();}if(_this.constructor){_this.name_=_this.constructor.name||'Unknown Tech';}return _this;}/**
     * A special function to trigger source set in a way that will allow player
     * to re-trigger if the player or tech are not ready yet.
     *
     * @fires Tech#sourceset
     * @param {string} src The source string at the time of the source changing.
     */var _proto=Tech.prototype;_proto.triggerSourceset=function triggerSourceset(src){var _this2=this;if(!this.isReady_){// on initial ready we have to trigger source set
// 1ms after ready so that player can watch for it.
this.one('ready',function(){return _this2.setTimeout(function(){return _this2.triggerSourceset(src);},1);});}/**
       * Fired when the source is set on the tech causing the media element
       * to reload.
       *
       * @see {@link Player#event:sourceset}
       * @event Tech#sourceset
       * @type {EventTarget~Event}
       */this.trigger({src:src,type:'sourceset'});}/* Fallbacks for unsupported event types
    ================================================================================ *//**
     * Polyfill the `progress` event for browsers that don't support it natively.
     *
     * @see {@link Tech#trackProgress}
     */;_proto.manualProgressOn=function manualProgressOn(){this.on('durationchange',this.onDurationChange);this.manualProgress=true;// Trigger progress watching when a source begins loading
this.one('ready',this.trackProgress);}/**
     * Turn off the polyfill for `progress` events that was created in
     * {@link Tech#manualProgressOn}
     */;_proto.manualProgressOff=function manualProgressOff(){this.manualProgress=false;this.stopTrackingProgress();this.off('durationchange',this.onDurationChange);}/**
     * This is used to trigger a `progress` event when the buffered percent changes. It
     * sets an interval function that will be called every 500 milliseconds to check if the
     * buffer end percent has changed.
     *
     * > This function is called by {@link Tech#manualProgressOn}
     *
     * @param {EventTarget~Event} event
     *        The `ready` event that caused this to run.
     *
     * @listens Tech#ready
     * @fires Tech#progress
     */;_proto.trackProgress=function trackProgress(event){this.stopTrackingProgress();this.progressInterval=this.setInterval(bind(this,function(){// Don't trigger unless buffered amount is greater than last time
var numBufferedPercent=this.bufferedPercent();if(this.bufferedPercent_!==numBufferedPercent){/**
           * See {@link Player#progress}
           *
           * @event Tech#progress
           * @type {EventTarget~Event}
           */this.trigger('progress');}this.bufferedPercent_=numBufferedPercent;if(numBufferedPercent===1){this.stopTrackingProgress();}}),500);}/**
     * Update our internal duration on a `durationchange` event by calling
     * {@link Tech#duration}.
     *
     * @param {EventTarget~Event} event
     *        The `durationchange` event that caused this to run.
     *
     * @listens Tech#durationchange
     */;_proto.onDurationChange=function onDurationChange(event){this.duration_=this.duration();}/**
     * Get and create a `TimeRange` object for buffering.
     *
     * @return {TimeRange}
     *         The time range object that was created.
     */;_proto.buffered=function buffered(){return createTimeRanges(0,0);}/**
     * Get the percentage of the current video that is currently buffered.
     *
     * @return {number}
     *         A number from 0 to 1 that represents the decimal percentage of the
     *         video that is buffered.
     *
     */;_proto.bufferedPercent=function bufferedPercent$$1(){return bufferedPercent(this.buffered(),this.duration_);}/**
     * Turn off the polyfill for `progress` events that was created in
     * {@link Tech#manualProgressOn}
     * Stop manually tracking progress events by clearing the interval that was set in
     * {@link Tech#trackProgress}.
     */;_proto.stopTrackingProgress=function stopTrackingProgress(){this.clearInterval(this.progressInterval);}/**
     * Polyfill the `timeupdate` event for browsers that don't support it.
     *
     * @see {@link Tech#trackCurrentTime}
     */;_proto.manualTimeUpdatesOn=function manualTimeUpdatesOn(){this.manualTimeUpdates=true;this.on('play',this.trackCurrentTime);this.on('pause',this.stopTrackingCurrentTime);}/**
     * Turn off the polyfill for `timeupdate` events that was created in
     * {@link Tech#manualTimeUpdatesOn}
     */;_proto.manualTimeUpdatesOff=function manualTimeUpdatesOff(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off('play',this.trackCurrentTime);this.off('pause',this.stopTrackingCurrentTime);}/**
     * Sets up an interval function to track current time and trigger `timeupdate` every
     * 250 milliseconds.
     *
     * @listens Tech#play
     * @triggers Tech#timeupdate
     */;_proto.trackCurrentTime=function trackCurrentTime(){if(this.currentTimeInterval){this.stopTrackingCurrentTime();}this.currentTimeInterval=this.setInterval(function(){/**
         * Triggered at an interval of 250ms to indicated that time is passing in the video.
         *
         * @event Tech#timeupdate
         * @type {EventTarget~Event}
         */this.trigger({type:'timeupdate',target:this,manuallyTriggered:true});// 42 = 24 fps // 250 is what Webkit uses // FF uses 15
},250);}/**
     * Stop the interval function created in {@link Tech#trackCurrentTime} so that the
     * `timeupdate` event is no longer triggered.
     *
     * @listens {Tech#pause}
     */;_proto.stopTrackingCurrentTime=function stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval);// #1002 - if the video ends right before the next timeupdate would happen,
// the progress bar won't make it all the way to the end
this.trigger({type:'timeupdate',target:this,manuallyTriggered:true});}/**
     * Turn off all event polyfills, clear the `Tech`s {@link AudioTrackList},
     * {@link VideoTrackList}, and {@link TextTrackList}, and dispose of this Tech.
     *
     * @fires Component#dispose
     */;_proto.dispose=function dispose(){// clear out all tracks because we can't reuse them between techs
this.clearTracks(NORMAL.names);// Turn off any manual progress or timeupdate tracking
if(this.manualProgress){this.manualProgressOff();}if(this.manualTimeUpdates){this.manualTimeUpdatesOff();}_Component.prototype.dispose.call(this);}/**
     * Clear out a single `TrackList` or an array of `TrackLists` given their names.
     *
     * > Note: Techs without source handlers should call this between sources for `video`
     *         & `audio` tracks. You don't want to use them between tracks!
     *
     * @param {string[]|string} types
     *        TrackList names to clear, valid names are `video`, `audio`, and
     *        `text`.
     */;_proto.clearTracks=function clearTracks(types){var _this3=this;types=[].concat(types);// clear out all tracks because we can't reuse them between techs
types.forEach(function(type){var list=_this3[type+"Tracks"]()||[];var i=list.length;while(i--){var track=list[i];if(type==='text'){_this3.removeRemoteTextTrack(track);}list.removeTrack(track);}});}/**
     * Remove any TextTracks added via addRemoteTextTrack that are
     * flagged for automatic garbage collection
     */;_proto.cleanupAutoTextTracks=function cleanupAutoTextTracks(){var list=this.autoRemoteTextTracks_||[];var i=list.length;while(i--){var track=list[i];this.removeRemoteTextTrack(track);}}/**
     * Reset the tech, which will removes all sources and reset the internal readyState.
     *
     * @abstract
     */;_proto.reset=function reset(){}/**
     * Get or set an error on the Tech.
     *
     * @param {MediaError} [err]
     *        Error to set on the Tech
     *
     * @return {MediaError|null}
     *         The current error object on the tech, or null if there isn't one.
     */;_proto.error=function error(err){if(err!==undefined){this.error_=new MediaError(err);this.trigger('error');}return this.error_;}/**
     * Returns the `TimeRange`s that have been played through for the current source.
     *
     * > NOTE: This implementation is incomplete. It does not track the played `TimeRange`.
     *         It only checks whether the source has played at all or not.
     *
     * @return {TimeRange}
     *         - A single time range if this video has played
     *         - An empty set of ranges if not.
     */;_proto.played=function played(){if(this.hasStarted_){return createTimeRanges(0,0);}return createTimeRanges();}/**
     * Causes a manual time update to occur if {@link Tech#manualTimeUpdatesOn} was
     * previously called.
     *
     * @fires Tech#timeupdate
     */;_proto.setCurrentTime=function setCurrentTime(){// improve the accuracy of manual timeupdates
if(this.manualTimeUpdates){/**
         * A manual `timeupdate` event.
         *
         * @event Tech#timeupdate
         * @type {EventTarget~Event}
         */this.trigger({type:'timeupdate',target:this,manuallyTriggered:true});}}/**
     * Turn on listeners for {@link VideoTrackList}, {@link {AudioTrackList}, and
     * {@link TextTrackList} events.
     *
     * This adds {@link EventTarget~EventListeners} for `addtrack`, and  `removetrack`.
     *
     * @fires Tech#audiotrackchange
     * @fires Tech#videotrackchange
     * @fires Tech#texttrackchange
     */;_proto.initTrackListeners=function initTrackListeners(){var _this4=this;/**
        * Triggered when tracks are added or removed on the Tech {@link AudioTrackList}
        *
        * @event Tech#audiotrackchange
        * @type {EventTarget~Event}
        *//**
        * Triggered when tracks are added or removed on the Tech {@link VideoTrackList}
        *
        * @event Tech#videotrackchange
        * @type {EventTarget~Event}
        *//**
        * Triggered when tracks are added or removed on the Tech {@link TextTrackList}
        *
        * @event Tech#texttrackchange
        * @type {EventTarget~Event}
        */NORMAL.names.forEach(function(name){var props=NORMAL[name];var trackListChanges=function trackListChanges(){_this4.trigger(name+"trackchange");};var tracks=_this4[props.getterName]();tracks.addEventListener('removetrack',trackListChanges);tracks.addEventListener('addtrack',trackListChanges);_this4.on('dispose',function(){tracks.removeEventListener('removetrack',trackListChanges);tracks.removeEventListener('addtrack',trackListChanges);});});}/**
     * Emulate TextTracks using vtt.js if necessary
     *
     * @fires Tech#vttjsloaded
     * @fires Tech#vttjserror
     */;_proto.addWebVttScript_=function addWebVttScript_(){var _this5=this;if(window$1.WebVTT){return;}// Initially, Tech.el_ is a child of a dummy-div wait until the Component system
// signals that the Tech is ready at which point Tech.el_ is part of the DOM
// before inserting the WebVTT script
if(document.body.contains(this.el())){// load via require if available and vtt.js script location was not passed in
// as an option. novtt builds will turn the above require call into an empty object
// which will cause this if check to always fail.
if(!this.options_['vtt.js']&&isPlain(vtt)&&Object.keys(vtt).length>0){this.trigger('vttjsloaded');return;}// load vtt.js via the script location option or the cdn of no location was
// passed in
var script=document.createElement('script');script.src=this.options_['vtt.js']||'https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js';script.onload=function(){/**
           * Fired when vtt.js is loaded.
           *
           * @event Tech#vttjsloaded
           * @type {EventTarget~Event}
           */_this5.trigger('vttjsloaded');};script.onerror=function(){/**
           * Fired when vtt.js was not loaded due to an error
           *
           * @event Tech#vttjsloaded
           * @type {EventTarget~Event}
           */_this5.trigger('vttjserror');};this.on('dispose',function(){script.onload=null;script.onerror=null;});// but have not loaded yet and we set it to true before the inject so that
// we don't overwrite the injected window.WebVTT if it loads right away
window$1.WebVTT=true;this.el().parentNode.appendChild(script);}else{this.ready(this.addWebVttScript_);}}/**
     * Emulate texttracks
     *
     */;_proto.emulateTextTracks=function emulateTextTracks(){var _this6=this;var tracks=this.textTracks();var remoteTracks=this.remoteTextTracks();var handleAddTrack=function handleAddTrack(e){return tracks.addTrack(e.track);};var handleRemoveTrack=function handleRemoveTrack(e){return tracks.removeTrack(e.track);};remoteTracks.on('addtrack',handleAddTrack);remoteTracks.on('removetrack',handleRemoveTrack);this.addWebVttScript_();var updateDisplay=function updateDisplay(){return _this6.trigger('texttrackchange');};var textTracksChanges=function textTracksChanges(){updateDisplay();for(var i=0;i<tracks.length;i++){var track=tracks[i];track.removeEventListener('cuechange',updateDisplay);if(track.mode==='showing'){track.addEventListener('cuechange',updateDisplay);}}};textTracksChanges();tracks.addEventListener('change',textTracksChanges);tracks.addEventListener('addtrack',textTracksChanges);tracks.addEventListener('removetrack',textTracksChanges);this.on('dispose',function(){remoteTracks.off('addtrack',handleAddTrack);remoteTracks.off('removetrack',handleRemoveTrack);tracks.removeEventListener('change',textTracksChanges);tracks.removeEventListener('addtrack',textTracksChanges);tracks.removeEventListener('removetrack',textTracksChanges);for(var i=0;i<tracks.length;i++){var track=tracks[i];track.removeEventListener('cuechange',updateDisplay);}});}/**
     * Create and returns a remote {@link TextTrack} object.
     *
     * @param {string} kind
     *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata)
     *
     * @param {string} [label]
     *        Label to identify the text track
     *
     * @param {string} [language]
     *        Two letter language abbreviation
     *
     * @return {TextTrack}
     *         The TextTrack that gets created.
     */;_proto.addTextTrack=function addTextTrack(kind,label,language){if(!kind){throw new Error('TextTrack kind is required but was not provided');}return createTrackHelper(this,kind,label,language);}/**
     * Create an emulated TextTrack for use by addRemoteTextTrack
     *
     * This is intended to be overridden by classes that inherit from
     * Tech in order to create native or custom TextTracks.
     *
     * @param {Object} options
     *        The object should contain the options to initialize the TextTrack with.
     *
     * @param {string} [options.kind]
     *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata).
     *
     * @param {string} [options.label].
     *        Label to identify the text track
     *
     * @param {string} [options.language]
     *        Two letter language abbreviation.
     *
     * @return {HTMLTrackElement}
     *         The track element that gets created.
     */;_proto.createRemoteTextTrack=function createRemoteTextTrack(options){var track=mergeOptions(options,{tech:this});return new REMOTE.remoteTextEl.TrackClass(track);}/**
     * Creates a remote text track object and returns an html track element.
     *
     * > Note: This can be an emulated {@link HTMLTrackElement} or a native one.
     *
     * @param {Object} options
     *        See {@link Tech#createRemoteTextTrack} for more detailed properties.
     *
     * @param {boolean} [manualCleanup=true]
     *        - When false: the TextTrack will be automatically removed from the video
     *          element whenever the source changes
     *        - When True: The TextTrack will have to be cleaned up manually
     *
     * @return {HTMLTrackElement}
     *         An Html Track Element.
     *
     * @deprecated The default functionality for this function will be equivalent
     *             to "manualCleanup=false" in the future. The manualCleanup parameter will
     *             also be removed.
     */;_proto.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){var _this7=this;if(options===void 0){options={};}var htmlTrackElement=this.createRemoteTextTrack(options);if(manualCleanup!==true&&manualCleanup!==false){// deprecation warning
log.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js');manualCleanup=true;}// store HTMLTrackElement and TextTrack to remote list
this.remoteTextTrackEls().addTrackElement_(htmlTrackElement);this.remoteTextTracks().addTrack(htmlTrackElement.track);if(manualCleanup!==true){// create the TextTrackList if it doesn't exist
this.ready(function(){return _this7.autoRemoteTextTracks_.addTrack(htmlTrackElement.track);});}return htmlTrackElement;}/**
     * Remove a remote text track from the remote `TextTrackList`.
     *
     * @param {TextTrack} track
     *        `TextTrack` to remove from the `TextTrackList`
     */;_proto.removeRemoteTextTrack=function removeRemoteTextTrack(track){var trackElement=this.remoteTextTrackEls().getTrackElementByTrack_(track);// remove HTMLTrackElement and TextTrack from remote list
this.remoteTextTrackEls().removeTrackElement_(trackElement);this.remoteTextTracks().removeTrack(track);this.autoRemoteTextTracks_.removeTrack(track);}/**
     * Gets available media playback quality metrics as specified by the W3C's Media
     * Playback Quality API.
     *
     * @see [Spec]{@link https://wicg.github.io/media-playback-quality}
     *
     * @return {Object}
     *         An object with supported media playback quality metrics
     *
     * @abstract
     */;_proto.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return{};}/**
     * A method to set a poster from a `Tech`.
     *
     * @abstract
     */;_proto.setPoster=function setPoster(){}/**
     * A method to check for the presence of the 'playsinline' <video> attribute.
     *
     * @abstract
     */;_proto.playsinline=function playsinline(){}/**
     * A method to set or unset the 'playsinline' <video> attribute.
     *
     * @abstract
     */;_proto.setPlaysinline=function setPlaysinline(){}/**
     * Attempt to force override of native audio tracks.
     *
     * @param {boolean} override - If set to true native audio will be overridden,
     * otherwise native audio will potentially be used.
     *
     * @abstract
     */;_proto.overrideNativeAudioTracks=function overrideNativeAudioTracks(){}/**
     * Attempt to force override of native video tracks.
     *
     * @param {boolean} override - If set to true native video will be overridden,
     * otherwise native video will potentially be used.
     *
     * @abstract
     */;_proto.overrideNativeVideoTracks=function overrideNativeVideoTracks(){}/*
     * Check if the tech can support the given mime-type.
     *
     * The base tech does not support any type, but source handlers might
     * overwrite this.
     *
     * @param  {string} type
     *         The mimetype to check for support
     *
     * @return {string}
     *         'probably', 'maybe', or empty string
     *
     * @see [Spec]{@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/canPlayType}
     *
     * @abstract
     */;_proto.canPlayType=function canPlayType(){return'';}/**
     * Check if the type is supported by this tech.
     *
     * The base tech does not support any type, but source handlers might
     * overwrite this.
     *
     * @param {string} type
     *        The media type to check
     * @return {string} Returns the native video element's response
     */;Tech.canPlayType=function canPlayType(){return'';}/**
     * Check if the tech can support the given source
     *
     * @param {Object} srcObj
     *        The source object
     * @param {Object} options
     *        The options passed to the tech
     * @return {string} 'probably', 'maybe', or '' (empty string)
     */;Tech.canPlaySource=function canPlaySource(srcObj,options){return Tech.canPlayType(srcObj.type);}/*
     * Return whether the argument is a Tech or not.
     * Can be passed either a Class like `Html5` or a instance like `player.tech_`
     *
     * @param {Object} component
     *        The item to check
     *
     * @return {boolean}
     *         Whether it is a tech or not
     *         - True if it is a tech
     *         - False if it is not
     */;Tech.isTech=function isTech(component){return component.prototype instanceof Tech||component instanceof Tech||component===Tech;}/**
     * Registers a `Tech` into a shared list for videojs.
     *
     * @param {string} name
     *        Name of the `Tech` to register.
     *
     * @param {Object} tech
     *        The `Tech` class to register.
     */;Tech.registerTech=function registerTech(name,tech){if(!Tech.techs_){Tech.techs_={};}if(!Tech.isTech(tech)){throw new Error("Tech "+name+" must be a Tech");}if(!Tech.canPlayType){throw new Error('Techs must have a static canPlayType method on them');}if(!Tech.canPlaySource){throw new Error('Techs must have a static canPlaySource method on them');}name=toTitleCase(name);Tech.techs_[name]=tech;if(name!=='Tech'){// camel case the techName for use in techOrder
Tech.defaultTechOrder_.push(name);}return tech;}/**
     * Get a `Tech` from the shared list by name.
     *
     * @param {string} name
     *        `camelCase` or `TitleCase` name of the Tech to get
     *
     * @return {Tech|undefined}
     *         The `Tech` or undefined if there was no tech with the name requested.
     */;Tech.getTech=function getTech(name){if(!name){return;}name=toTitleCase(name);if(Tech.techs_&&Tech.techs_[name]){return Tech.techs_[name];}if(window$1&&window$1.videojs&&window$1.videojs[name]){log.warn("The "+name+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)");return window$1.videojs[name];}};return Tech;}(Component);/**
   * Get the {@link VideoTrackList}
   *
   * @returns {VideoTrackList}
   * @method Tech.prototype.videoTracks
   *//**
   * Get the {@link AudioTrackList}
   *
   * @returns {AudioTrackList}
   * @method Tech.prototype.audioTracks
   *//**
   * Get the {@link TextTrackList}
   *
   * @returns {TextTrackList}
   * @method Tech.prototype.textTracks
   *//**
   * Get the remote element {@link TextTrackList}
   *
   * @returns {TextTrackList}
   * @method Tech.prototype.remoteTextTracks
   *//**
   * Get the remote element {@link HtmlTrackElementList}
   *
   * @returns {HtmlTrackElementList}
   * @method Tech.prototype.remoteTextTrackEls
   */ALL.names.forEach(function(name){var props=ALL[name];Tech.prototype[props.getterName]=function(){this[props.privateName]=this[props.privateName]||new props.ListClass();return this[props.privateName];};});/**
   * List of associated text tracks
   *
   * @type {TextTrackList}
   * @private
   * @property Tech#textTracks_
   *//**
   * List of associated audio tracks.
   *
   * @type {AudioTrackList}
   * @private
   * @property Tech#audioTracks_
   *//**
   * List of associated video tracks.
   *
   * @type {VideoTrackList}
   * @private
   * @property Tech#videoTracks_
   *//**
   * Boolean indicating whether the `Tech` supports volume control.
   *
   * @type {boolean}
   * @default
   */Tech.prototype.featuresVolumeControl=true;/**
   * Boolean indicating whether the `Tech` supports muting volume.
   *
   * @type {bolean}
   * @default
   */Tech.prototype.featuresMuteControl=true;/**
   * Boolean indicating whether the `Tech` supports fullscreen resize control.
   * Resizing plugins using request fullscreen reloads the plugin
   *
   * @type {boolean}
   * @default
   */Tech.prototype.featuresFullscreenResize=false;/**
   * Boolean indicating whether the `Tech` supports changing the speed at which the video
   * plays. Examples:
   *   - Set player to play 2x (twice) as fast
   *   - Set player to play 0.5x (half) as fast
   *
   * @type {boolean}
   * @default
   */Tech.prototype.featuresPlaybackRate=false;/**
   * Boolean indicating whether the `Tech` supports the `progress` event. This is currently
   * not triggered by video-js-swf. This will be used to determine if
   * {@link Tech#manualProgressOn} should be called.
   *
   * @type {boolean}
   * @default
   */Tech.prototype.featuresProgressEvents=false;/**
   * Boolean indicating whether the `Tech` supports the `sourceset` event.
   *
   * A tech should set this to `true` and then use {@link Tech#triggerSourceset}
   * to trigger a {@link Tech#event:sourceset} at the earliest time after getting
   * a new source.
   *
   * @type {boolean}
   * @default
   */Tech.prototype.featuresSourceset=false;/**
   * Boolean indicating whether the `Tech` supports the `timeupdate` event. This is currently
   * not triggered by video-js-swf. This will be used to determine if
   * {@link Tech#manualTimeUpdates} should be called.
   *
   * @type {boolean}
   * @default
   */Tech.prototype.featuresTimeupdateEvents=false;/**
   * Boolean indicating whether the `Tech` supports the native `TextTrack`s.
   * This will help us integrate with native `TextTrack`s if the browser supports them.
   *
   * @type {boolean}
   * @default
   */Tech.prototype.featuresNativeTextTracks=false;/**
   * A functional mixin for techs that want to use the Source Handler pattern.
   * Source handlers are scripts for handling specific formats.
   * The source handler pattern is used for adaptive formats (HLS, DASH) that
   * manually load video data and feed it into a Source Buffer (Media Source Extensions)
   * Example: `Tech.withSourceHandlers.call(MyTech);`
   *
   * @param {Tech} _Tech
   *        The tech to add source handler functions to.
   *
   * @mixes Tech~SourceHandlerAdditions
   */Tech.withSourceHandlers=function(_Tech){/**
     * Register a source handler
     *
     * @param {Function} handler
     *        The source handler class
     *
     * @param {number} [index]
     *        Register it at the following index
     */_Tech.registerSourceHandler=function(handler,index){var handlers=_Tech.sourceHandlers;if(!handlers){handlers=_Tech.sourceHandlers=[];}if(index===undefined){// add to the end of the list
index=handlers.length;}handlers.splice(index,0,handler);};/**
     * Check if the tech can support the given type. Also checks the
     * Techs sourceHandlers.
     *
     * @param {string} type
     *         The mimetype to check.
     *
     * @return {string}
     *         'probably', 'maybe', or '' (empty string)
     */_Tech.canPlayType=function(type){var handlers=_Tech.sourceHandlers||[];var can;for(var i=0;i<handlers.length;i++){can=handlers[i].canPlayType(type);if(can){return can;}}return'';};/**
     * Returns the first source handler that supports the source.
     *
     * TODO: Answer question: should 'probably' be prioritized over 'maybe'
     *
     * @param {Tech~SourceObject} source
     *        The source object
     *
     * @param {Object} options
     *        The options passed to the tech
     *
     * @return {SourceHandler|null}
     *          The first source handler that supports the source or null if
     *          no SourceHandler supports the source
     */_Tech.selectSourceHandler=function(source,options){var handlers=_Tech.sourceHandlers||[];var can;for(var i=0;i<handlers.length;i++){can=handlers[i].canHandleSource(source,options);if(can){return handlers[i];}}return null;};/**
     * Check if the tech can support the given source.
     *
     * @param {Tech~SourceObject} srcObj
     *        The source object
     *
     * @param {Object} options
     *        The options passed to the tech
     *
     * @return {string}
     *         'probably', 'maybe', or '' (empty string)
     */_Tech.canPlaySource=function(srcObj,options){var sh=_Tech.selectSourceHandler(srcObj,options);if(sh){return sh.canHandleSource(srcObj,options);}return'';};/**
     * When using a source handler, prefer its implementation of
     * any function normally provided by the tech.
     */var deferrable=['seekable','seeking','duration'];/**
     * A wrapper around {@link Tech#seekable} that will call a `SourceHandler`s seekable
     * function if it exists, with a fallback to the Techs seekable function.
     *
     * @method _Tech.seekable
     *//**
     * A wrapper around {@link Tech#duration} that will call a `SourceHandler`s duration
     * function if it exists, otherwise it will fallback to the techs duration function.
     *
     * @method _Tech.duration
     */deferrable.forEach(function(fnName){var originalFn=this[fnName];if(typeof originalFn!=='function'){return;}this[fnName]=function(){if(this.sourceHandler_&&this.sourceHandler_[fnName]){return this.sourceHandler_[fnName].apply(this.sourceHandler_,arguments);}return originalFn.apply(this,arguments);};},_Tech.prototype);/**
     * Create a function for setting the source using a source object
     * and source handlers.
     * Should never be called unless a source handler was found.
     *
     * @param {Tech~SourceObject} source
     *        A source object with src and type keys
     */_Tech.prototype.setSource=function(source){var sh=_Tech.selectSourceHandler(source,this.options_);if(!sh){// Fall back to a native source hander when unsupported sources are
// deliberately set
if(_Tech.nativeSourceHandler){sh=_Tech.nativeSourceHandler;}else{log.error('No source handler found for the current source.');}}// Dispose any existing source handler
this.disposeSourceHandler();this.off('dispose',this.disposeSourceHandler);if(sh!==_Tech.nativeSourceHandler){this.currentSource_=source;}this.sourceHandler_=sh.handleSource(source,this,this.options_);this.one('dispose',this.disposeSourceHandler);};/**
     * Clean up any existing SourceHandlers and listeners when the Tech is disposed.
     *
     * @listens Tech#dispose
     */_Tech.prototype.disposeSourceHandler=function(){// if we have a source and get another one
// then we are loading something new
// than clear all of our current tracks
if(this.currentSource_){this.clearTracks(['audio','video']);this.currentSource_=null;}// always clean up auto-text tracks
this.cleanupAutoTextTracks();if(this.sourceHandler_){if(this.sourceHandler_.dispose){this.sourceHandler_.dispose();}this.sourceHandler_=null;}};};// The base Tech class needs to be registered as a Component. It is the only
// Tech that can be registered as a Component.
Component.registerComponent('Tech',Tech);Tech.registerTech('Tech',Tech);/**
   * A list of techs that should be added to techOrder on Players
   *
   * @private
   */Tech.defaultTechOrder_=[];/**
   * @file middleware.js
   * @module middleware
   */var middlewares={};var middlewareInstances={};var TERMINATOR={};/**
   * A middleware object is a plain JavaScript object that has methods that
   * match the {@link Tech} methods found in the lists of allowed
   * {@link module:middleware.allowedGetters|getters},
   * {@link module:middleware.allowedSetters|setters}, and
   * {@link module:middleware.allowedMediators|mediators}.
   *
   * @typedef {Object} MiddlewareObject
   *//**
   * A middleware factory function that should return a
   * {@link module:middleware~MiddlewareObject|MiddlewareObject}.
   *
   * This factory will be called for each player when needed, with the player
   * passed in as an argument.
   *
   * @callback MiddlewareFactory
   * @param {Player} player
   *        A Video.js player.
   *//**
   * Define a middleware that the player should use by way of a factory function
   * that returns a middleware object.
   *
   * @param  {string} type
   *         The MIME type to match or `"*"` for all MIME types.
   *
   * @param  {MiddlewareFactory} middleware
   *         A middleware factory function that will be executed for
   *         matching types.
   */function use(type,middleware){middlewares[type]=middlewares[type]||[];middlewares[type].push(middleware);}/**
   * Asynchronously sets a source using middleware by recursing through any
   * matching middlewares and calling `setSource` on each, passing along the
   * previous returned value each time.
   *
   * @param  {Player} player
   *         A {@link Player} instance.
   *
   * @param  {Tech~SourceObject} src
   *         A source object.
   *
   * @param  {Function}
   *         The next middleware to run.
   */function setSource(player,src,next){player.setTimeout(function(){return setSourceHelper(src,middlewares[src.type],next,player);},1);}/**
   * When the tech is set, passes the tech to each middleware's `setTech` method.
   *
   * @param {Object[]} middleware
   *        An array of middleware instances.
   *
   * @param {Tech} tech
   *        A Video.js tech.
   */function setTech(middleware,tech){middleware.forEach(function(mw){return mw.setTech&&mw.setTech(tech);});}/**
   * Calls a getter on the tech first, through each middleware
   * from right to left to the player.
   *
   * @param  {Object[]} middleware
   *         An array of middleware instances.
   *
   * @param  {Tech} tech
   *         The current tech.
   *
   * @param  {string} method
   *         A method name.
   *
   * @return {Mixed}
   *         The final value from the tech after middleware has intercepted it.
   */function get(middleware,tech,method){return middleware.reduceRight(middlewareIterator(method),tech[method]());}/**
   * Takes the argument given to the player and calls the setter method on each
   * middleware from left to right to the tech.
   *
   * @param  {Object[]} middleware
   *         An array of middleware instances.
   *
   * @param  {Tech} tech
   *         The current tech.
   *
   * @param  {string} method
   *         A method name.
   *
   * @param  {Mixed} arg
   *         The value to set on the tech.
   *
   * @return {Mixed}
   *         The return value of the `method` of the `tech`.
   */function set$1(middleware,tech,method,arg){return tech[method](middleware.reduce(middlewareIterator(method),arg));}/**
   * Takes the argument given to the player and calls the `call` version of the
   * method on each middleware from left to right.
   *
   * Then, call the passed in method on the tech and return the result unchanged
   * back to the player, through middleware, this time from right to left.
   *
   * @param  {Object[]} middleware
   *         An array of middleware instances.
   *
   * @param  {Tech} tech
   *         The current tech.
   *
   * @param  {string} method
   *         A method name.
   *
   * @param  {Mixed} arg
   *         The value to set on the tech.
   *
   * @return {Mixed}
   *         The return value of the `method` of the `tech`, regardless of the
   *         return values of middlewares.
   */function mediate(middleware,tech,method,arg){if(arg===void 0){arg=null;}var callMethod='call'+toTitleCase(method);var middlewareValue=middleware.reduce(middlewareIterator(callMethod),arg);var terminated=middlewareValue===TERMINATOR;// deprecated. The `null` return value should instead return TERMINATOR to
// prevent confusion if a techs method actually returns null.
var returnValue=terminated?null:tech[method](middlewareValue);executeRight(middleware,method,returnValue,terminated);return returnValue;}/**
   * Enumeration of allowed getters where the keys are method names.
   *
   * @type {Object}
   */var allowedGetters={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1};/**
   * Enumeration of allowed setters where the keys are method names.
   *
   * @type {Object}
   */var allowedSetters={setCurrentTime:1};/**
   * Enumeration of allowed mediators where the keys are method names.
   *
   * @type {Object}
   */var allowedMediators={play:1,pause:1};function middlewareIterator(method){return function(value,mw){// if the previous middleware terminated, pass along the termination
if(value===TERMINATOR){return TERMINATOR;}if(mw[method]){return mw[method](value);}return value;};}function executeRight(mws,method,value,terminated){for(var i=mws.length-1;i>=0;i--){var mw=mws[i];if(mw[method]){mw[method](terminated,value);}}}/**
   * Clear the middleware cache for a player.
   *
   * @param  {Player} player
   *         A {@link Player} instance.
   */function clearCacheForPlayer(player){middlewareInstances[player.id()]=null;}/**
   * {
   *  [playerId]: [[mwFactory, mwInstance], ...]
   * }
   *
   * @private
   */function getOrCreateFactory(player,mwFactory){var mws=middlewareInstances[player.id()];var mw=null;if(mws===undefined||mws===null){mw=mwFactory(player);middlewareInstances[player.id()]=[[mwFactory,mw]];return mw;}for(var i=0;i<mws.length;i++){var _mws$i=mws[i],mwf=_mws$i[0],mwi=_mws$i[1];if(mwf!==mwFactory){continue;}mw=mwi;}if(mw===null){mw=mwFactory(player);mws.push([mwFactory,mw]);}return mw;}function setSourceHelper(src,middleware,next,player,acc,lastRun){if(src===void 0){src={};}if(middleware===void 0){middleware=[];}if(acc===void 0){acc=[];}if(lastRun===void 0){lastRun=false;}var _middleware=middleware,mwFactory=_middleware[0],mwrest=_middleware.slice(1);// if mwFactory is a string, then we're at a fork in the road
if(typeof mwFactory==='string'){setSourceHelper(src,middlewares[mwFactory],next,player,acc,lastRun);// if we have an mwFactory, call it with the player to get the mw,
// then call the mw's setSource method
}else if(mwFactory){var mw=getOrCreateFactory(player,mwFactory);// if setSource isn't present, implicitly select this middleware
if(!mw.setSource){acc.push(mw);return setSourceHelper(src,mwrest,next,player,acc,lastRun);}mw.setSource(assign({},src),function(err,_src){// something happened, try the next middleware on the current level
// make sure to use the old src
if(err){return setSourceHelper(src,mwrest,next,player,acc,lastRun);}// we've succeeded, now we need to go deeper
acc.push(mw);// if it's the same type, continue down the current chain
// otherwise, we want to go down the new chain
setSourceHelper(_src,src.type===_src.type?mwrest:middlewares[_src.type],next,player,acc,lastRun);});}else if(mwrest.length){setSourceHelper(src,mwrest,next,player,acc,lastRun);}else if(lastRun){next(src,acc);}else{setSourceHelper(src,middlewares['*'],next,player,acc,true);}}/**
   * Mimetypes
   *
   * @see http://hul.harvard.edu/ois/////systems/wax/wax-public-help/mimetypes.htm
   * @typedef Mimetypes~Kind
   * @enum
   */var MimetypesKind={opus:'video/ogg',ogv:'video/ogg',mp4:'video/mp4',mov:'video/mp4',m4v:'video/mp4',mkv:'video/x-matroska',mp3:'audio/mpeg',aac:'audio/aac',oga:'audio/ogg',m3u8:'application/x-mpegURL',jpg:'image/jpeg',jpeg:'image/jpeg',gif:'image/gif',png:'image/png',svg:'image/svg+xml',webp:'image/webp'};/**
   * Get the mimetype of a given src url if possible
   *
   * @param {string} src
   *        The url to the src
   *
   * @return {string}
   *         return the mimetype if it was known or empty string otherwise
   */var getMimetype=function getMimetype(src){if(src===void 0){src='';}var ext=getFileExtension(src);var mimetype=MimetypesKind[ext.toLowerCase()];return mimetype||'';};/**
   * Find the mime type of a given source string if possible. Uses the player
   * source cache.
   *
   * @param {Player} player
   *        The player object
   *
   * @param {string} src
   *        The source string
   *
   * @return {string}
   *         The type that was found
   */var findMimetype=function findMimetype(player,src){if(!src){return'';}// 1. check for the type in the `source` cache
if(player.cache_.source.src===src&&player.cache_.source.type){return player.cache_.source.type;}// 2. see if we have this source in our `currentSources` cache
var matchingSources=player.cache_.sources.filter(function(s){return s.src===src;});if(matchingSources.length){return matchingSources[0].type;}// 3. look for the src url in source elements and use the type there
var sources=player.$$('source');for(var i=0;i<sources.length;i++){var s=sources[i];if(s.type&&s.src&&s.src===src){return s.type;}}// 4. finally fallback to our list of mime types based on src url extension
return getMimetype(src);};/**
   * @module filter-source
   *//**
   * Filter out single bad source objects or multiple source objects in an
   * array. Also flattens nested source object arrays into a 1 dimensional
   * array of source objects.
   *
   * @param {Tech~SourceObject|Tech~SourceObject[]} src
   *        The src object to filter
   *
   * @return {Tech~SourceObject[]}
   *         An array of sourceobjects containing only valid sources
   *
   * @private
   */var filterSource=function filterSource(src){// traverse array
if(Array.isArray(src)){var newsrc=[];src.forEach(function(srcobj){srcobj=filterSource(srcobj);if(Array.isArray(srcobj)){newsrc=newsrc.concat(srcobj);}else if(isObject(srcobj)){newsrc.push(srcobj);}});src=newsrc;}else if(typeof src==='string'&&src.trim()){// convert string into object
src=[fixSource({src:src})];}else if(isObject(src)&&typeof src.src==='string'&&src.src&&src.src.trim()){// src is already valid
src=[fixSource(src)];}else{// invalid source, turn it into an empty array
src=[];}return src;};/**
   * Checks src mimetype, adding it when possible
   *
   * @param {Tech~SourceObject} src
   *        The src object to check
   * @return {Tech~SourceObject}
   *        src Object with known type
   */function fixSource(src){var mimetype=getMimetype(src.src);if(!src.type&&mimetype){src.type=mimetype;}return src;}/**
   * The `MediaLoader` is the `Component` that decides which playback technology to load
   * when a player is initialized.
   *
   * @extends Component
   */var MediaLoader=/*#__PURE__*/function(_Component){_inheritsLoose(MediaLoader,_Component);/**
     * Create an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should attach to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     *
     * @param {Component~ReadyCallback} [ready]
     *        The function that is run when this component is ready.
     */function MediaLoader(player,options,ready){var _this;// MediaLoader has no element
var options_=mergeOptions({createEl:false},options);_this=_Component.call(this,player,options_,ready)||this;// If there are no sources when the player is initialized,
// load the first supported playback technology.
if(!options.playerOptions.sources||options.playerOptions.sources.length===0){for(var i=0,j=options.playerOptions.techOrder;i<j.length;i++){var techName=toTitleCase(j[i]);var tech=Tech.getTech(techName);// Support old behavior of techs being registered as components.
// Remove once that deprecated behavior is removed.
if(!techName){tech=Component.getComponent(techName);}// Check if the browser supports this technology
if(tech&&tech.isSupported()){player.loadTech_(techName);break;}}}else{// Loop through playback technologies (HTML5, Flash) and check for support.
// Then load the best source.
// A few assumptions here:
//   All playback technologies respect preload false.
player.src(options.playerOptions.sources);}return _this;}return MediaLoader;}(Component);Component.registerComponent('MediaLoader',MediaLoader);/**
   * Clickable Component which is clickable or keyboard actionable,
   * but is not a native HTML button.
   *
   * @extends Component
   */var ClickableComponent=/*#__PURE__*/function(_Component){_inheritsLoose(ClickableComponent,_Component);/**
     * Creates an instance of this class.
     *
     * @param  {Player} player
     *         The `Player` that this class should be attached to.
     *
     * @param  {Object} [options]
     *         The key/value store of player options.
     */function ClickableComponent(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.emitTapEvents();_this.enable();return _this;}/**
     * Create the `Component`s DOM element.
     *
     * @param {string} [tag=div]
     *        The element's node type.
     *
     * @param {Object} [props={}]
     *        An object of properties that should be set on the element.
     *
     * @param {Object} [attributes={}]
     *        An object of attributes that should be set on the element.
     *
     * @return {Element}
     *         The element that gets created.
     */var _proto=ClickableComponent.prototype;_proto.createEl=function createEl$$1(tag,props,attributes){if(tag===void 0){tag='div';}if(props===void 0){props={};}if(attributes===void 0){attributes={};}props=assign({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},props);if(tag==='button'){log.error("Creating a ClickableComponent with an HTML element of "+tag+" is not supported; use a Button instead.");}// Add ARIA attributes for clickable element which is not a native HTML button
attributes=assign({role:'button'},attributes);this.tabIndex_=props.tabIndex;var el=_Component.prototype.createEl.call(this,tag,props,attributes);this.createControlTextEl(el);return el;};_proto.dispose=function dispose(){// remove controlTextEl_ on dispose
this.controlTextEl_=null;_Component.prototype.dispose.call(this);}/**
     * Create a control text element on this `Component`
     *
     * @param {Element} [el]
     *        Parent element for the control text.
     *
     * @return {Element}
     *         The control text element that gets created.
     */;_proto.createControlTextEl=function createControlTextEl(el){this.controlTextEl_=createEl('span',{className:'vjs-control-text'},{// let the screen reader user know that the text of the element may change
'aria-live':'polite'});if(el){el.appendChild(this.controlTextEl_);}this.controlText(this.controlText_,el);return this.controlTextEl_;}/**
     * Get or set the localize text to use for the controls on the `Component`.
     *
     * @param {string} [text]
     *        Control text for element.
     *
     * @param {Element} [el=this.el()]
     *        Element to set the title on.
     *
     * @return {string}
     *         - The control text when getting
     */;_proto.controlText=function controlText(text,el){if(el===void 0){el=this.el();}if(text===undefined){return this.controlText_||'Need Text';}var localizedText=this.localize(text);this.controlText_=text;textContent(this.controlTextEl_,localizedText);if(!this.nonIconControl){// Set title attribute if only an icon is shown
el.setAttribute('title',localizedText);}}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */;_proto.buildCSSClass=function buildCSSClass(){return"vjs-control vjs-button "+_Component.prototype.buildCSSClass.call(this);}/**
     * Enable this `Component`s element.
     */;_proto.enable=function enable(){if(!this.enabled_){this.enabled_=true;this.removeClass('vjs-disabled');this.el_.setAttribute('aria-disabled','false');if(typeof this.tabIndex_!=='undefined'){this.el_.setAttribute('tabIndex',this.tabIndex_);}this.on(['tap','click'],this.handleClick);this.on('focus',this.handleFocus);this.on('blur',this.handleBlur);}}/**
     * Disable this `Component`s element.
     */;_proto.disable=function disable(){this.enabled_=false;this.addClass('vjs-disabled');this.el_.setAttribute('aria-disabled','true');if(typeof this.tabIndex_!=='undefined'){this.el_.removeAttribute('tabIndex');}this.off(['tap','click'],this.handleClick);this.off('focus',this.handleFocus);this.off('blur',this.handleBlur);}/**
     * This gets called when a `ClickableComponent` gets:
     * - Clicked (via the `click` event, listening starts in the constructor)
     * - Tapped (via the `tap` event, listening starts in the constructor)
     * - The following things happen in order:
     *   1. {@link ClickableComponent#handleFocus} is called via a `focus` event on the
     *      `ClickableComponent`.
     *   2. {@link ClickableComponent#handleFocus} adds a listener for `keydown` on using
     *      {@link ClickableComponent#handleKeyPress}.
     *   3. `ClickableComponent` has not had a `blur` event (`blur` means that focus was lost). The user presses
     *      the space or enter key.
     *   4. {@link ClickableComponent#handleKeyPress} calls this function with the `keydown`
     *      event as a parameter.
     *
     * @param {EventTarget~Event} event
     *        The `keydown`, `tap`, or `click` event that caused this function to be
     *        called.
     *
     * @listens tap
     * @listens click
     * @abstract
     */;_proto.handleClick=function handleClick(event){}/**
     * This gets called when a `ClickableComponent` gains focus via a `focus` event.
     * Turns on listening for `keydown` events. When they happen it
     * calls `this.handleKeyPress`.
     *
     * @param {EventTarget~Event} event
     *        The `focus` event that caused this function to be called.
     *
     * @listens focus
     */;_proto.handleFocus=function handleFocus(event){on(document,'keydown',bind(this,this.handleKeyPress));}/**
     * Called when this ClickableComponent has focus and a key gets pressed down. By
     * default it will call `this.handleClick` when the key is space or enter.
     *
     * @param {EventTarget~Event} event
     *        The `keydown` event that caused this function to be called.
     *
     * @listens keydown
     */;_proto.handleKeyPress=function handleKeyPress(event){// Support Space or Enter key operation to fire a click event
if(keycode.isEventKey(event,'Space')||keycode.isEventKey(event,'Enter')){event.preventDefault();this.trigger('click');}else{// Pass keypress handling up for unsupported keys
_Component.prototype.handleKeyPress.call(this,event);}}/**
     * Called when a `ClickableComponent` loses focus. Turns off the listener for
     * `keydown` events. Which Stops `this.handleKeyPress` from getting called.
     *
     * @param {EventTarget~Event} event
     *        The `blur` event that caused this function to be called.
     *
     * @listens blur
     */;_proto.handleBlur=function handleBlur(event){off(document,'keydown',bind(this,this.handleKeyPress));};return ClickableComponent;}(Component);Component.registerComponent('ClickableComponent',ClickableComponent);/**
   * A `ClickableComponent` that handles showing the poster image for the player.
   *
   * @extends ClickableComponent
   */var PosterImage=/*#__PURE__*/function(_ClickableComponent){_inheritsLoose(PosterImage,_ClickableComponent);/**
     * Create an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should attach to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function PosterImage(player,options){var _this;_this=_ClickableComponent.call(this,player,options)||this;_this.update();player.on('posterchange',bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.update));return _this;}/**
     * Clean up and dispose of the `PosterImage`.
     */var _proto=PosterImage.prototype;_proto.dispose=function dispose(){this.player().off('posterchange',this.update);_ClickableComponent.prototype.dispose.call(this);}/**
     * Create the `PosterImage`s DOM element.
     *
     * @return {Element}
     *         The element that gets created.
     */;_proto.createEl=function createEl$$1(){var el=createEl('div',{className:'vjs-poster',// Don't want poster to be tabbable.
tabIndex:-1});return el;}/**
     * An {@link EventTarget~EventListener} for {@link Player#posterchange} events.
     *
     * @listens Player#posterchange
     *
     * @param {EventTarget~Event} [event]
     *        The `Player#posterchange` event that triggered this function.
     */;_proto.update=function update(event){var url=this.player().poster();this.setSrc(url);// If there's no poster source we should display:none on this component
// so it's not still clickable or right-clickable
if(url){this.show();}else{this.hide();}}/**
     * Set the source of the `PosterImage` depending on the display method.
     *
     * @param {string} url
     *        The URL to the source for the `PosterImage`.
     */;_proto.setSrc=function setSrc(url){var backgroundImage='';// Any falsy value should stay as an empty string, otherwise
// this will throw an extra error
if(url){backgroundImage="url(\""+url+"\")";}this.el_.style.backgroundImage=backgroundImage;}/**
     * An {@link EventTarget~EventListener} for clicks on the `PosterImage`. See
     * {@link ClickableComponent#handleClick} for instances where this will be triggered.
     *
     * @listens tap
     * @listens click
     * @listens keydown
     *
     * @param {EventTarget~Event} event
     +        The `click`, `tap` or `keydown` event that caused this function to be called.
     */;_proto.handleClick=function handleClick(event){// We don't want a click to trigger playback when controls are disabled
if(!this.player_.controls()){return;}if(this.player_.paused()){silencePromise(this.player_.play());}else{this.player_.pause();}// call handleFocus manually to get hotkeys working
this.player_.handleFocus({});};return PosterImage;}(ClickableComponent);Component.registerComponent('PosterImage',PosterImage);var darkGray='#222';var lightGray='#ccc';var fontMap={monospace:'monospace',sansSerif:'sans-serif',serif:'serif',monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:'sans-serif',proportionalSerif:'serif',casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};/**
   * Construct an rgba color from a given hex color code.
   *
   * @param {number} color
   *        Hex number for color, like #f0e or #f604e2.
   *
   * @param {number} opacity
   *        Value for opacity, 0.0 - 1.0.
   *
   * @return {string}
   *         The rgba color that was created, like 'rgba(255, 0, 0, 0.3)'.
   */function constructColor(color,opacity){var hex;if(color.length===4){// color looks like "#f0e"
hex=color[1]+color[1]+color[2]+color[2]+color[3]+color[3];}else if(color.length===7){// color looks like "#f604e2"
hex=color.slice(1);}else{throw new Error('Invalid color code provided, '+color+'; must be formatted as e.g. #f0e or #f604e2.');}return'rgba('+parseInt(hex.slice(0,2),16)+','+parseInt(hex.slice(2,4),16)+','+parseInt(hex.slice(4,6),16)+','+opacity+')';}/**
   * Try to update the style of a DOM element. Some style changes will throw an error,
   * particularly in IE8. Those should be noops.
   *
   * @param {Element} el
   *        The DOM element to be styled.
   *
   * @param {string} style
   *        The CSS property on the element that should be styled.
   *
   * @param {string} rule
   *        The style rule that should be applied to the property.
   *
   * @private
   */function tryUpdateStyle(el,style,rule){try{el.style[style]=rule;}catch(e){// Satisfies linter.
return;}}/**
   * The component for displaying text track cues.
   *
   * @extends Component
   */var TextTrackDisplay=/*#__PURE__*/function(_Component){_inheritsLoose(TextTrackDisplay,_Component);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     *
     * @param {Component~ReadyCallback} [ready]
     *        The function to call when `TextTrackDisplay` is ready.
     */function TextTrackDisplay(player,options,ready){var _this;_this=_Component.call(this,player,options,ready)||this;var updateDisplayHandler=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.updateDisplay);player.on('loadstart',bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.toggleDisplay));player.on('texttrackchange',updateDisplayHandler);player.on('loadedmetadata',bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.preselectTrack));// This used to be called during player init, but was causing an error
// if a track should show by default and the display hadn't loaded yet.
// Should probably be moved to an external track loader when we support
// tracks that don't need a display.
player.ready(bind(_assertThisInitialized(_assertThisInitialized(_this)),function(){if(player.tech_&&player.tech_.featuresNativeTextTracks){this.hide();return;}player.on('fullscreenchange',updateDisplayHandler);player.on('playerresize',updateDisplayHandler);window$1.addEventListener('orientationchange',updateDisplayHandler);player.on('dispose',function(){return window$1.removeEventListener('orientationchange',updateDisplayHandler);});var tracks=this.options_.playerOptions.tracks||[];for(var i=0;i<tracks.length;i++){this.player_.addRemoteTextTrack(tracks[i],true);}this.preselectTrack();}));return _this;}/**
    * Preselect a track following this precedence:
    * - matches the previously selected {@link TextTrack}'s language and kind
    * - matches the previously selected {@link TextTrack}'s language only
    * - is the first default captions track
    * - is the first default descriptions track
    *
    * @listens Player#loadstart
    */var _proto=TextTrackDisplay.prototype;_proto.preselectTrack=function preselectTrack(){var modes={captions:1,subtitles:1};var trackList=this.player_.textTracks();var userPref=this.player_.cache_.selectedLanguage;var firstDesc;var firstCaptions;var preferredTrack;for(var i=0;i<trackList.length;i++){var track=trackList[i];if(userPref&&userPref.enabled&&userPref.language&&userPref.language===track.language&&track.kind in modes){// Always choose the track that matches both language and kind
if(track.kind===userPref.kind){preferredTrack=track;// or choose the first track that matches language
}else if(!preferredTrack){preferredTrack=track;}// clear everything if offTextTrackMenuItem was clicked
}else if(userPref&&!userPref.enabled){preferredTrack=null;firstDesc=null;firstCaptions=null;}else if(track.default){if(track.kind==='descriptions'&&!firstDesc){firstDesc=track;}else if(track.kind in modes&&!firstCaptions){firstCaptions=track;}}}// The preferredTrack matches the user preference and takes
// precedence over all the other tracks.
// So, display the preferredTrack before the first default track
// and the subtitles/captions track before the descriptions track
if(preferredTrack){preferredTrack.mode='showing';}else if(firstCaptions){firstCaptions.mode='showing';}else if(firstDesc){firstDesc.mode='showing';}}/**
     * Turn display of {@link TextTrack}'s from the current state into the other state.
     * There are only two states:
     * - 'shown'
     * - 'hidden'
     *
     * @listens Player#loadstart
     */;_proto.toggleDisplay=function toggleDisplay(){if(this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks){this.hide();}else{this.show();}}/**
     * Create the {@link Component}'s DOM element.
     *
     * @return {Element}
     *         The element that was created.
     */;_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-text-track-display'},{'aria-live':'off','aria-atomic':'true'});}/**
     * Clear all displayed {@link TextTrack}s.
     */;_proto.clearDisplay=function clearDisplay(){if(typeof window$1.WebVTT==='function'){window$1.WebVTT.processCues(window$1,[],this.el_);}}/**
     * Update the displayed TextTrack when a either a {@link Player#texttrackchange} or
     * a {@link Player#fullscreenchange} is fired.
     *
     * @listens Player#texttrackchange
     * @listens Player#fullscreenchange
     */;_proto.updateDisplay=function updateDisplay(){var tracks=this.player_.textTracks();this.clearDisplay();// Track display prioritization model: if multiple tracks are 'showing',
//  display the first 'subtitles' or 'captions' track which is 'showing',
//  otherwise display the first 'descriptions' track which is 'showing'
var descriptionsTrack=null;var captionsSubtitlesTrack=null;var i=tracks.length;while(i--){var track=tracks[i];if(track.mode==='showing'){if(track.kind==='descriptions'){descriptionsTrack=track;}else{captionsSubtitlesTrack=track;}}}if(captionsSubtitlesTrack){if(this.getAttribute('aria-live')!=='off'){this.setAttribute('aria-live','off');}this.updateForTrack(captionsSubtitlesTrack);}else if(descriptionsTrack){if(this.getAttribute('aria-live')!=='assertive'){this.setAttribute('aria-live','assertive');}this.updateForTrack(descriptionsTrack);}}/**
     * Add an {@link TextTrack} to to the {@link Tech}s {@link TextTrackList}.
     *
     * @param {TextTrack} track
     *        Text track object to be added to the list.
     */;_proto.updateForTrack=function updateForTrack(track){if(typeof window$1.WebVTT!=='function'||!track.activeCues){return;}var cues=[];for(var _i=0;_i<track.activeCues.length;_i++){cues.push(track.activeCues[_i]);}window$1.WebVTT.processCues(window$1,cues,this.el_);if(!this.player_.textTrackSettings){return;}var overrides=this.player_.textTrackSettings.getValues();var i=cues.length;while(i--){var cue=cues[i];if(!cue){continue;}var cueDiv=cue.displayState;if(overrides.color){cueDiv.firstChild.style.color=overrides.color;}if(overrides.textOpacity){tryUpdateStyle(cueDiv.firstChild,'color',constructColor(overrides.color||'#fff',overrides.textOpacity));}if(overrides.backgroundColor){cueDiv.firstChild.style.backgroundColor=overrides.backgroundColor;}if(overrides.backgroundOpacity){tryUpdateStyle(cueDiv.firstChild,'backgroundColor',constructColor(overrides.backgroundColor||'#000',overrides.backgroundOpacity));}if(overrides.windowColor){if(overrides.windowOpacity){tryUpdateStyle(cueDiv,'backgroundColor',constructColor(overrides.windowColor,overrides.windowOpacity));}else{cueDiv.style.backgroundColor=overrides.windowColor;}}if(overrides.edgeStyle){if(overrides.edgeStyle==='dropshadow'){cueDiv.firstChild.style.textShadow="2px 2px 3px "+darkGray+", 2px 2px 4px "+darkGray+", 2px 2px 5px "+darkGray;}else if(overrides.edgeStyle==='raised'){cueDiv.firstChild.style.textShadow="1px 1px "+darkGray+", 2px 2px "+darkGray+", 3px 3px "+darkGray;}else if(overrides.edgeStyle==='depressed'){cueDiv.firstChild.style.textShadow="1px 1px "+lightGray+", 0 1px "+lightGray+", -1px -1px "+darkGray+", 0 -1px "+darkGray;}else if(overrides.edgeStyle==='uniform'){cueDiv.firstChild.style.textShadow="0 0 4px "+darkGray+", 0 0 4px "+darkGray+", 0 0 4px "+darkGray+", 0 0 4px "+darkGray;}}if(overrides.fontPercent&&overrides.fontPercent!==1){var fontSize=window$1.parseFloat(cueDiv.style.fontSize);cueDiv.style.fontSize=fontSize*overrides.fontPercent+'px';cueDiv.style.height='auto';cueDiv.style.top='auto';cueDiv.style.bottom='2px';}if(overrides.fontFamily&&overrides.fontFamily!=='default'){if(overrides.fontFamily==='small-caps'){cueDiv.firstChild.style.fontVariant='small-caps';}else{cueDiv.firstChild.style.fontFamily=fontMap[overrides.fontFamily];}}}};return TextTrackDisplay;}(Component);Component.registerComponent('TextTrackDisplay',TextTrackDisplay);/**
   * A loading spinner for use during waiting/loading events.
   *
   * @extends Component
   */var LoadingSpinner=/*#__PURE__*/function(_Component){_inheritsLoose(LoadingSpinner,_Component);function LoadingSpinner(){return _Component.apply(this,arguments)||this;}var _proto=LoadingSpinner.prototype;/**
     * Create the `LoadingSpinner`s DOM element.
     *
     * @return {Element}
     *         The dom element that gets created.
     */_proto.createEl=function createEl$$1(){var isAudio=this.player_.isAudio();var playerType=this.localize(isAudio?'Audio Player':'Video Player');var controlText=createEl('span',{className:'vjs-control-text',innerHTML:this.localize('{1} is loading.',[playerType])});var el=_Component.prototype.createEl.call(this,'div',{className:'vjs-loading-spinner',dir:'ltr'});el.appendChild(controlText);return el;};return LoadingSpinner;}(Component);Component.registerComponent('LoadingSpinner',LoadingSpinner);/**
   * Base class for all buttons.
   *
   * @extends ClickableComponent
   */var Button=/*#__PURE__*/function(_ClickableComponent){_inheritsLoose(Button,_ClickableComponent);function Button(){return _ClickableComponent.apply(this,arguments)||this;}var _proto=Button.prototype;/**
     * Create the `Button`s DOM element.
     *
     * @param {string} [tag="button"]
     *        The element's node type. This argument is IGNORED: no matter what
     *        is passed, it will always create a `button` element.
     *
     * @param {Object} [props={}]
     *        An object of properties that should be set on the element.
     *
     * @param {Object} [attributes={}]
     *        An object of attributes that should be set on the element.
     *
     * @return {Element}
     *         The element that gets created.
     */_proto.createEl=function createEl(tag,props,attributes){if(props===void 0){props={};}if(attributes===void 0){attributes={};}tag='button';props=assign({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},props);// Add attributes for button element
attributes=assign({// Necessary since the default button type is "submit"
type:'button'},attributes);var el=Component.prototype.createEl.call(this,tag,props,attributes);this.createControlTextEl(el);return el;}/**
     * Add a child `Component` inside of this `Button`.
     *
     * @param {string|Component} child
     *        The name or instance of a child to add.
     *
     * @param {Object} [options={}]
     *        The key/value store of options that will get passed to children of
     *        the child.
     *
     * @return {Component}
     *         The `Component` that gets added as a child. When using a string the
     *         `Component` will get created by this process.
     *
     * @deprecated since version 5
     */;_proto.addChild=function addChild(child,options){if(options===void 0){options={};}var className=this.constructor.name;log.warn("Adding an actionable (user controllable) child to a Button ("+className+") is not supported; use a ClickableComponent instead.");// Avoid the error message generated by ClickableComponent's addChild method
return Component.prototype.addChild.call(this,child,options);}/**
     * Enable the `Button` element so that it can be activated or clicked. Use this with
     * {@link Button#disable}.
     */;_proto.enable=function enable(){_ClickableComponent.prototype.enable.call(this);this.el_.removeAttribute('disabled');}/**
     * Disable the `Button` element so that it cannot be activated or clicked. Use this with
     * {@link Button#enable}.
     */;_proto.disable=function disable(){_ClickableComponent.prototype.disable.call(this);this.el_.setAttribute('disabled','disabled');}/**
     * This gets called when a `Button` has focus and `keydown` is triggered via a key
     * press.
     *
     * @param {EventTarget~Event} event
     *        The event that caused this function to get called.
     *
     * @listens keydown
     */;_proto.handleKeyPress=function handleKeyPress(event){// Ignore Space or Enter key operation, which is handled by the browser for a button.
if(!(keycode.isEventKey(event,'Space')||keycode.isEventKey(event,'Enter'))){// Pass keypress handling up for unsupported keys
_ClickableComponent.prototype.handleKeyPress.call(this,event);}};return Button;}(ClickableComponent);Component.registerComponent('Button',Button);/**
   * The initial play button that shows before the video has played. The hiding of the
   * `BigPlayButton` get done via CSS and `Player` states.
   *
   * @extends Button
   */var BigPlayButton=/*#__PURE__*/function(_Button){_inheritsLoose(BigPlayButton,_Button);function BigPlayButton(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.mouseused_=false;_this.on('mousedown',_this.handleMouseDown);return _this;}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object. Always returns 'vjs-big-play-button'.
     */var _proto=BigPlayButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return'vjs-big-play-button';}/**
     * This gets called when a `BigPlayButton` "clicked". See {@link ClickableComponent}
     * for more detailed information on what a click can be.
     *
     * @param {EventTarget~Event} event
     *        The `keydown`, `tap`, or `click` event that caused this function to be
     *        called.
     *
     * @listens tap
     * @listens click
     */;_proto.handleClick=function handleClick(event){var playPromise=this.player_.play();// exit early if clicked via the mouse
if(this.mouseused_&&event.clientX&&event.clientY){silencePromise(playPromise);// call handleFocus manually to get hotkeys working
this.player_.handleFocus({});return;}var cb=this.player_.getChild('controlBar');var playToggle=cb&&cb.getChild('playToggle');if(!playToggle){this.player_.focus();return;}var playFocus=function playFocus(){return playToggle.focus();};if(isPromise(playPromise)){playPromise.then(playFocus,function(){});}else{this.setTimeout(playFocus,1);}};_proto.handleKeyPress=function handleKeyPress(event){this.mouseused_=false;_Button.prototype.handleKeyPress.call(this,event);};_proto.handleMouseDown=function handleMouseDown(event){this.mouseused_=true;};return BigPlayButton;}(Button);/**
   * The text that should display over the `BigPlayButton`s controls. Added to for localization.
   *
   * @type {string}
   * @private
   */BigPlayButton.prototype.controlText_='Play Video';Component.registerComponent('BigPlayButton',BigPlayButton);/**
   * The `CloseButton` is a `{@link Button}` that fires a `close` event when
   * it gets clicked.
   *
   * @extends Button
   */var CloseButton=/*#__PURE__*/function(_Button){_inheritsLoose(CloseButton,_Button);/**
    * Creates an instance of the this class.
    *
    * @param  {Player} player
    *         The `Player` that this class should be attached to.
    *
    * @param  {Object} [options]
    *         The key/value store of player options.
    */function CloseButton(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.controlText(options&&options.controlText||_this.localize('Close'));return _this;}/**
    * Builds the default DOM `className`.
    *
    * @return {string}
    *         The DOM `className` for this object.
    */var _proto=CloseButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-close-button "+_Button.prototype.buildCSSClass.call(this);}/**
     * This gets called when a `CloseButton` has focus and `keydown` is triggered via a key
     * press.
     *
     * @param {EventTarget~Event} event
     *        The event that caused this function to get called.
     *
     * @listens keydown
     */;_proto.handleKeyPress=function handleKeyPress(event){}// Override the default `Button` behavior, and don't pass the keypress event
//  up to the player because this button is part of a `ModalDialog`, which
//  doesn't pass keypresses to the player either.
/**
     * This gets called when a `CloseButton` gets clicked. See
     * {@link ClickableComponent#handleClick} for more information on when this will be
     * triggered
     *
     * @param {EventTarget~Event} event
     *        The `keydown`, `tap`, or `click` event that caused this function to be
     *        called.
     *
     * @listens tap
     * @listens click
     * @fires CloseButton#close
     */;_proto.handleClick=function handleClick(event){/**
       * Triggered when the a `CloseButton` is clicked.
       *
       * @event CloseButton#close
       * @type {EventTarget~Event}
       *
       * @property {boolean} [bubbles=false]
       *           set to false so that the close event does not
       *           bubble up to parents if there is no listener
       */this.trigger({type:'close',bubbles:false});};return CloseButton;}(Button);Component.registerComponent('CloseButton',CloseButton);/**
   * Button to toggle between play and pause.
   *
   * @extends Button
   */var PlayToggle=/*#__PURE__*/function(_Button){_inheritsLoose(PlayToggle,_Button);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options={}]
     *        The key/value store of player options.
     */function PlayToggle(player,options){var _this;if(options===void 0){options={};}_this=_Button.call(this,player,options)||this;// show or hide replay icon
options.replay=options.replay===undefined||options.replay;_this.on(player,'play',_this.handlePlay);_this.on(player,'pause',_this.handlePause);if(options.replay){_this.on(player,'ended',_this.handleEnded);}return _this;}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */var _proto=PlayToggle.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-play-control "+_Button.prototype.buildCSSClass.call(this);}/**
     * This gets called when an `PlayToggle` is "clicked". See
     * {@link ClickableComponent} for more detailed information on what a click can be.
     *
     * @param {EventTarget~Event} [event]
     *        The `keydown`, `tap`, or `click` event that caused this function to be
     *        called.
     *
     * @listens tap
     * @listens click
     */;_proto.handleClick=function handleClick(event){if(this.player_.paused()){this.player_.play();}else{this.player_.pause();}}/**
     * This gets called once after the video has ended and the user seeks so that
     * we can change the replay button back to a play button.
     *
     * @param {EventTarget~Event} [event]
     *        The event that caused this function to run.
     *
     * @listens Player#seeked
     */;_proto.handleSeeked=function handleSeeked(event){this.removeClass('vjs-ended');if(this.player_.paused()){this.handlePause(event);}else{this.handlePlay(event);}}/**
     * Add the vjs-playing class to the element so it can change appearance.
     *
     * @param {EventTarget~Event} [event]
     *        The event that caused this function to run.
     *
     * @listens Player#play
     */;_proto.handlePlay=function handlePlay(event){this.removeClass('vjs-ended');this.removeClass('vjs-paused');this.addClass('vjs-playing');// change the button text to "Pause"
this.controlText('Pause');}/**
     * Add the vjs-paused class to the element so it can change appearance.
     *
     * @param {EventTarget~Event} [event]
     *        The event that caused this function to run.
     *
     * @listens Player#pause
     */;_proto.handlePause=function handlePause(event){this.removeClass('vjs-playing');this.addClass('vjs-paused');// change the button text to "Play"
this.controlText('Play');}/**
     * Add the vjs-ended class to the element so it can change appearance
     *
     * @param {EventTarget~Event} [event]
     *        The event that caused this function to run.
     *
     * @listens Player#ended
     */;_proto.handleEnded=function handleEnded(event){this.removeClass('vjs-playing');this.addClass('vjs-ended');// change the button text to "Replay"
this.controlText('Replay');// on the next seek remove the replay button
this.one(this.player_,'seeked',this.handleSeeked);};return PlayToggle;}(Button);/**
   * The text that should display over the `PlayToggle`s controls. Added for localization.
   *
   * @type {string}
   * @private
   */PlayToggle.prototype.controlText_='Play';Component.registerComponent('PlayToggle',PlayToggle);/**
   * @file format-time.js
   * @module format-time
   *//**
   * Format seconds as a time string, H:MM:SS or M:SS. Supplying a guide (in
   * seconds) will force a number of leading zeros to cover the length of the
   * guide.
   *
   * @private
   * @param  {number} seconds
   *         Number of seconds to be turned into a string
   *
   * @param  {number} guide
   *         Number (in seconds) to model the string after
   *
   * @return {string}
   *         Time formatted as H:MM:SS or M:SS
   */var defaultImplementation=function defaultImplementation(seconds,guide){seconds=seconds<0?0:seconds;var s=Math.floor(seconds%60);var m=Math.floor(seconds/60%60);var h=Math.floor(seconds/3600);var gm=Math.floor(guide/60%60);var gh=Math.floor(guide/3600);// handle invalid times
if(isNaN(seconds)||seconds===Infinity){// '-' is false for all relational operators (e.g. <, >=) so this setting
// will add the minimum number of fields specified by the guide
h=m=s='-';}// Check if we need to show hours
h=h>0||gh>0?h+':':'';// If hours are showing, we may need to add a leading zero.
// Always show at least one digit of minutes.
m=((h||gm>=10)&&m<10?'0'+m:m)+':';// Check if leading zero is need for seconds
s=s<10?'0'+s:s;return h+m+s;};// Internal pointer to the current implementation.
var implementation=defaultImplementation;/**
   * Replaces the default formatTime implementation with a custom implementation.
   *
   * @param {Function} customImplementation
   *        A function which will be used in place of the default formatTime
   *        implementation. Will receive the current time in seconds and the
   *        guide (in seconds) as arguments.
   */function setFormatTime(customImplementation){implementation=customImplementation;}/**
   * Resets formatTime to the default implementation.
   */function resetFormatTime(){implementation=defaultImplementation;}/**
   * Delegates to either the default time formatting function or a custom
   * function supplied via `setFormatTime`.
   *
   * Formats seconds as a time string (H:MM:SS or M:SS). Supplying a
   * guide (in seconds) will force a number of leading zeros to cover the
   * length of the guide.
   *
   * @static
   * @example  formatTime(125, 600) === "02:05"
   * @param    {number} seconds
   *           Number of seconds to be turned into a string
   *
   * @param    {number} guide
   *           Number (in seconds) to model the string after
   *
   * @return   {string}
   *           Time formatted as H:MM:SS or M:SS
   */function formatTime(seconds,guide){if(guide===void 0){guide=seconds;}return implementation(seconds,guide);}/**
   * Displays time information about the video
   *
   * @extends Component
   */var TimeDisplay=/*#__PURE__*/function(_Component){_inheritsLoose(TimeDisplay,_Component);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function TimeDisplay(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.throttledUpdateContent=throttle(bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.updateContent),25);_this.on(player,'timeupdate',_this.throttledUpdateContent);return _this;}/**
     * Create the `Component`'s DOM element
     *
     * @return {Element}
     *         The element that was created.
     */var _proto=TimeDisplay.prototype;_proto.createEl=function createEl$$1(){var className=this.buildCSSClass();var el=_Component.prototype.createEl.call(this,'div',{className:className+" vjs-time-control vjs-control",innerHTML:"<span class=\"vjs-control-text\" role=\"presentation\">"+this.localize(this.labelText_)+"\xA0</span>"});this.contentEl_=createEl('span',{className:className+"-display"},{// tell screen readers not to automatically read the time as it changes
'aria-live':'off',// span elements have no implicit role, but some screen readers (notably VoiceOver)
// treat them as a break between items in the DOM when using arrow keys
// (or left-to-right swipes on iOS) to read contents of a page. Using
// role='presentation' causes VoiceOver to NOT treat this span as a break.
'role':'presentation'});this.updateTextNode_();el.appendChild(this.contentEl_);return el;};_proto.dispose=function dispose(){this.contentEl_=null;this.textNode_=null;_Component.prototype.dispose.call(this);}/**
     * Updates the "remaining time" text node with new content using the
     * contents of the `formattedTime_` property.
     *
     * @private
     */;_proto.updateTextNode_=function updateTextNode_(){if(!this.contentEl_){return;}while(this.contentEl_.firstChild){this.contentEl_.removeChild(this.contentEl_.firstChild);}this.textNode_=document.createTextNode(this.formattedTime_||this.formatTime_(0));this.contentEl_.appendChild(this.textNode_);}/**
     * Generates a formatted time for this component to use in display.
     *
     * @param  {number} time
     *         A numeric time, in seconds.
     *
     * @return {string}
     *         A formatted time
     *
     * @private
     */;_proto.formatTime_=function formatTime_(time){return formatTime(time);}/**
     * Updates the time display text node if it has what was passed in changed
     * the formatted time.
     *
     * @param {number} time
     *        The time to update to
     *
     * @private
     */;_proto.updateFormattedTime_=function updateFormattedTime_(time){var formattedTime=this.formatTime_(time);if(formattedTime===this.formattedTime_){return;}this.formattedTime_=formattedTime;this.requestAnimationFrame(this.updateTextNode_);}/**
     * To be filled out in the child class, should update the displayed time
     * in accordance with the fact that the current time has changed.
     *
     * @param {EventTarget~Event} [event]
     *        The `timeupdate`  event that caused this to run.
     *
     * @listens Player#timeupdate
     */;_proto.updateContent=function updateContent(event){};return TimeDisplay;}(Component);/**
   * The text that is added to the `TimeDisplay` for screen reader users.
   *
   * @type {string}
   * @private
   */TimeDisplay.prototype.labelText_='Time';/**
   * The text that should display over the `TimeDisplay`s controls. Added to for localization.
   *
   * @type {string}
   * @private
   *
   * @deprecated in v7; controlText_ is not used in non-active display Components
   */TimeDisplay.prototype.controlText_='Time';Component.registerComponent('TimeDisplay',TimeDisplay);/**
   * Displays the current time
   *
   * @extends Component
   */var CurrentTimeDisplay=/*#__PURE__*/function(_TimeDisplay){_inheritsLoose(CurrentTimeDisplay,_TimeDisplay);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function CurrentTimeDisplay(player,options){var _this;_this=_TimeDisplay.call(this,player,options)||this;_this.on(player,'ended',_this.handleEnded);return _this;}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */var _proto=CurrentTimeDisplay.prototype;_proto.buildCSSClass=function buildCSSClass(){return'vjs-current-time';}/**
     * Update current time display
     *
     * @param {EventTarget~Event} [event]
     *        The `timeupdate` event that caused this function to run.
     *
     * @listens Player#timeupdate
     */;_proto.updateContent=function updateContent(event){// Allows for smooth scrubbing, when player can't keep up.
var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(time);}/**
     * When the player fires ended there should be no time left. Sadly
     * this is not always the case, lets make it seem like that is the case
     * for users.
     *
     * @param {EventTarget~Event} [event]
     *        The `ended` event that caused this to run.
     *
     * @listens Player#ended
     */;_proto.handleEnded=function handleEnded(event){if(!this.player_.duration()){return;}this.updateFormattedTime_(this.player_.duration());};return CurrentTimeDisplay;}(TimeDisplay);/**
   * The text that is added to the `CurrentTimeDisplay` for screen reader users.
   *
   * @type {string}
   * @private
   */CurrentTimeDisplay.prototype.labelText_='Current Time';/**
   * The text that should display over the `CurrentTimeDisplay`s controls. Added to for localization.
   *
   * @type {string}
   * @private
   *
   * @deprecated in v7; controlText_ is not used in non-active display Components
   */CurrentTimeDisplay.prototype.controlText_='Current Time';Component.registerComponent('CurrentTimeDisplay',CurrentTimeDisplay);/**
   * Displays the duration
   *
   * @extends Component
   */var DurationDisplay=/*#__PURE__*/function(_TimeDisplay){_inheritsLoose(DurationDisplay,_TimeDisplay);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function DurationDisplay(player,options){var _this;_this=_TimeDisplay.call(this,player,options)||this;// we do not want to/need to throttle duration changes,
// as they should always display the changed duration as
// it has changed
_this.on(player,'durationchange',_this.updateContent);// Listen to loadstart because the player duration is reset when a new media element is loaded,
// but the durationchange on the user agent will not fire.
// @see [Spec]{@link https://www.w3.org/TR/2011/WD-html5-20110113/video.html#media-element-load-algorithm}
_this.on(player,'loadstart',_this.updateContent);// Also listen for timeupdate (in the parent) and loadedmetadata because removing those
// listeners could have broken dependent applications/libraries. These
// can likely be removed for 7.0.
_this.on(player,'loadedmetadata',_this.throttledUpdateContent);return _this;}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */var _proto=DurationDisplay.prototype;_proto.buildCSSClass=function buildCSSClass(){return'vjs-duration';}/**
     * Update duration time display.
     *
     * @param {EventTarget~Event} [event]
     *        The `durationchange`, `timeupdate`, or `loadedmetadata` event that caused
     *        this function to be called.
     *
     * @listens Player#durationchange
     * @listens Player#timeupdate
     * @listens Player#loadedmetadata
     */;_proto.updateContent=function updateContent(event){var duration=this.player_.duration();if(this.duration_!==duration){this.duration_=duration;this.updateFormattedTime_(duration);}};return DurationDisplay;}(TimeDisplay);/**
   * The text that is added to the `DurationDisplay` for screen reader users.
   *
   * @type {string}
   * @private
   */DurationDisplay.prototype.labelText_='Duration';/**
   * The text that should display over the `DurationDisplay`s controls. Added to for localization.
   *
   * @type {string}
   * @private
   *
   * @deprecated in v7; controlText_ is not used in non-active display Components
   */DurationDisplay.prototype.controlText_='Duration';Component.registerComponent('DurationDisplay',DurationDisplay);/**
   * The separator between the current time and duration.
   * Can be hidden if it's not needed in the design.
   *
   * @extends Component
   */var TimeDivider=/*#__PURE__*/function(_Component){_inheritsLoose(TimeDivider,_Component);function TimeDivider(){return _Component.apply(this,arguments)||this;}var _proto=TimeDivider.prototype;/**
     * Create the component's DOM element
     *
     * @return {Element}
     *         The element that was created.
     */_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-time-control vjs-time-divider',innerHTML:'<div><span>/</span></div>'},{// this element and its contents can be hidden from assistive techs since
// it is made extraneous by the announcement of the control text
// for the current time and duration displays
'aria-hidden':true});};return TimeDivider;}(Component);Component.registerComponent('TimeDivider',TimeDivider);/**
   * Displays the time left in the video
   *
   * @extends Component
   */var RemainingTimeDisplay=/*#__PURE__*/function(_TimeDisplay){_inheritsLoose(RemainingTimeDisplay,_TimeDisplay);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function RemainingTimeDisplay(player,options){var _this;_this=_TimeDisplay.call(this,player,options)||this;_this.on(player,'durationchange',_this.throttledUpdateContent);_this.on(player,'ended',_this.handleEnded);return _this;}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */var _proto=RemainingTimeDisplay.prototype;_proto.buildCSSClass=function buildCSSClass(){return'vjs-remaining-time';}/**
     * Create the `Component`'s DOM element with the "minus" characted prepend to the time
     *
     * @return {Element}
     *         The element that was created.
     */;_proto.createEl=function createEl$$1(){var el=_TimeDisplay.prototype.createEl.call(this);el.insertBefore(createEl('span',{},{'aria-hidden':true},'-'),this.contentEl_);return el;}/**
     * Update remaining time display.
     *
     * @param {EventTarget~Event} [event]
     *        The `timeupdate` or `durationchange` event that caused this to run.
     *
     * @listens Player#timeupdate
     * @listens Player#durationchange
     */;_proto.updateContent=function updateContent(event){if(typeof this.player_.duration()!=='number'){return;}// @deprecated We should only use remainingTimeDisplay
// as of video.js 7
if(this.player_.remainingTimeDisplay){this.updateFormattedTime_(this.player_.remainingTimeDisplay());}else{this.updateFormattedTime_(this.player_.remainingTime());}}/**
     * When the player fires ended there should be no time left. Sadly
     * this is not always the case, lets make it seem like that is the case
     * for users.
     *
     * @param {EventTarget~Event} [event]
     *        The `ended` event that caused this to run.
     *
     * @listens Player#ended
     */;_proto.handleEnded=function handleEnded(event){if(!this.player_.duration()){return;}this.updateFormattedTime_(0);};return RemainingTimeDisplay;}(TimeDisplay);/**
   * The text that is added to the `RemainingTimeDisplay` for screen reader users.
   *
   * @type {string}
   * @private
   */RemainingTimeDisplay.prototype.labelText_='Remaining Time';/**
   * The text that should display over the `RemainingTimeDisplay`s controls. Added to for localization.
   *
   * @type {string}
   * @private
   *
   * @deprecated in v7; controlText_ is not used in non-active display Components
   */RemainingTimeDisplay.prototype.controlText_='Remaining Time';Component.registerComponent('RemainingTimeDisplay',RemainingTimeDisplay);/**
   * Displays the live indicator when duration is Infinity.
   *
   * @extends Component
   */var LiveDisplay=/*#__PURE__*/function(_Component){_inheritsLoose(LiveDisplay,_Component);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function LiveDisplay(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.updateShowing();_this.on(_this.player(),'durationchange',_this.updateShowing);return _this;}/**
     * Create the `Component`'s DOM element
     *
     * @return {Element}
     *         The element that was created.
     */var _proto=LiveDisplay.prototype;_proto.createEl=function createEl$$1(){var el=_Component.prototype.createEl.call(this,'div',{className:'vjs-live-control vjs-control'});this.contentEl_=createEl('div',{className:'vjs-live-display',innerHTML:"<span class=\"vjs-control-text\">"+this.localize('Stream Type')+"\xA0</span>"+this.localize('LIVE')},{'aria-live':'off'});el.appendChild(this.contentEl_);return el;};_proto.dispose=function dispose(){this.contentEl_=null;_Component.prototype.dispose.call(this);}/**
     * Check the duration to see if the LiveDisplay should be showing or not. Then show/hide
     * it accordingly
     *
     * @param {EventTarget~Event} [event]
     *        The {@link Player#durationchange} event that caused this function to run.
     *
     * @listens Player#durationchange
     */;_proto.updateShowing=function updateShowing(event){if(this.player().duration()===Infinity){this.show();}else{this.hide();}};return LiveDisplay;}(Component);Component.registerComponent('LiveDisplay',LiveDisplay);/**
   * Displays the live indicator when duration is Infinity.
   *
   * @extends Component
   */var SeekToLive=/*#__PURE__*/function(_Button){_inheritsLoose(SeekToLive,_Button);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function SeekToLive(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.updateLiveEdgeStatus();if(_this.player_.liveTracker){_this.on(_this.player_.liveTracker,'liveedgechange',_this.updateLiveEdgeStatus);}return _this;}/**
     * Create the `Component`'s DOM element
     *
     * @return {Element}
     *         The element that was created.
     */var _proto=SeekToLive.prototype;_proto.createEl=function createEl$$1(){var el=_Button.prototype.createEl.call(this,'button',{className:'vjs-seek-to-live-control vjs-control'});this.textEl_=createEl('span',{className:'vjs-seek-to-live-text',innerHTML:this.localize('LIVE')},{'aria-hidden':'true'});el.appendChild(this.textEl_);return el;}/**
     * Update the state of this button if we are at the live edge
     * or not
     */;_proto.updateLiveEdgeStatus=function updateLiveEdgeStatus(e){// default to live edge
if(!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()){this.setAttribute('aria-disabled',true);this.addClass('vjs-at-live-edge');this.controlText('Seek to live, currently playing live');}else{this.setAttribute('aria-disabled',false);this.removeClass('vjs-at-live-edge');this.controlText('Seek to live, currently behind live');}}/**
     * On click bring us as near to the live point as possible.
     * This requires that we wait for the next `live-seekable-change`
     * event which will happen every segment length seconds.
     */;_proto.handleClick=function handleClick(){this.player_.liveTracker.seekToLiveEdge();}/**
     * Dispose of the element and stop tracking
     */;_proto.dispose=function dispose(){if(this.player_.liveTracker){this.off(this.player_.liveTracker,'liveedgechange',this.updateLiveEdgeStatus);}this.textEl_=null;_Button.prototype.dispose.call(this);};return SeekToLive;}(Button);SeekToLive.prototype.controlText_='Seek to live, currently playing live';Component.registerComponent('SeekToLive',SeekToLive);/**
   * The base functionality for a slider. Can be vertical or horizontal.
   * For instance the volume bar or the seek bar on a video is a slider.
   *
   * @extends Component
   */var Slider=/*#__PURE__*/function(_Component){_inheritsLoose(Slider,_Component);/**
    * Create an instance of this class
    *
    * @param {Player} player
    *        The `Player` that this class should be attached to.
    *
    * @param {Object} [options]
    *        The key/value store of player options.
    */function Slider(player,options){var _this;_this=_Component.call(this,player,options)||this;// Set property names to bar to match with the child Slider class is looking for
_this.bar=_this.getChild(_this.options_.barName);// Set a horizontal or vertical class on the slider depending on the slider type
_this.vertical(!!_this.options_.vertical);_this.enable();return _this;}/**
     * Are controls are currently enabled for this slider or not.
     *
     * @return {boolean}
     *         true if controls are enabled, false otherwise
     */var _proto=Slider.prototype;_proto.enabled=function enabled(){return this.enabled_;}/**
     * Enable controls for this slider if they are disabled
     */;_proto.enable=function enable(){if(this.enabled()){return;}this.on('mousedown',this.handleMouseDown);this.on('touchstart',this.handleMouseDown);this.on('focus',this.handleFocus);this.on('blur',this.handleBlur);this.on('click',this.handleClick);this.on(this.player_,'controlsvisible',this.update);if(this.playerEvent){this.on(this.player_,this.playerEvent,this.update);}this.removeClass('disabled');this.setAttribute('tabindex',0);this.enabled_=true;}/**
     * Disable controls for this slider if they are enabled
     */;_proto.disable=function disable(){if(!this.enabled()){return;}var doc=this.bar.el_.ownerDocument;this.off('mousedown',this.handleMouseDown);this.off('touchstart',this.handleMouseDown);this.off('focus',this.handleFocus);this.off('blur',this.handleBlur);this.off('click',this.handleClick);this.off(this.player_,'controlsvisible',this.update);this.off(doc,'mousemove',this.handleMouseMove);this.off(doc,'mouseup',this.handleMouseUp);this.off(doc,'touchmove',this.handleMouseMove);this.off(doc,'touchend',this.handleMouseUp);this.removeAttribute('tabindex');this.addClass('disabled');if(this.playerEvent){this.off(this.player_,this.playerEvent,this.update);}this.enabled_=false;}/**
     * Create the `Slider`s DOM element.
     *
     * @param {string} type
     *        Type of element to create.
     *
     * @param {Object} [props={}]
     *        List of properties in Object form.
     *
     * @param {Object} [attributes={}]
     *        list of attributes in Object form.
     *
     * @return {Element}
     *         The element that gets created.
     */;_proto.createEl=function createEl$$1(type,props,attributes){if(props===void 0){props={};}if(attributes===void 0){attributes={};}// Add the slider element class to all sub classes
props.className=props.className+' vjs-slider';props=assign({tabIndex:0},props);attributes=assign({'role':'slider','aria-valuenow':0,'aria-valuemin':0,'aria-valuemax':100,'tabIndex':0},attributes);return _Component.prototype.createEl.call(this,type,props,attributes);}/**
     * Handle `mousedown` or `touchstart` events on the `Slider`.
     *
     * @param {EventTarget~Event} event
     *        `mousedown` or `touchstart` event that triggered this function
     *
     * @listens mousedown
     * @listens touchstart
     * @fires Slider#slideractive
     */;_proto.handleMouseDown=function handleMouseDown(event){var doc=this.bar.el_.ownerDocument;if(event.type==='mousedown'){event.preventDefault();}// Do not call preventDefault() on touchstart in Chrome
// to avoid console warnings. Use a 'touch-action: none' style
// instead to prevent unintented scrolling.
// https://developers.google.com/web/updates/2017/01/scrolling-intervention
if(event.type==='touchstart'&&!IS_CHROME){event.preventDefault();}blockTextSelection();this.addClass('vjs-sliding');/**
       * Triggered when the slider is in an active state
       *
       * @event Slider#slideractive
       * @type {EventTarget~Event}
       */this.trigger('slideractive');this.on(doc,'mousemove',this.handleMouseMove);this.on(doc,'mouseup',this.handleMouseUp);this.on(doc,'touchmove',this.handleMouseMove);this.on(doc,'touchend',this.handleMouseUp);this.handleMouseMove(event);}/**
     * Handle the `mousemove`, `touchmove`, and `mousedown` events on this `Slider`.
     * The `mousemove` and `touchmove` events will only only trigger this function during
     * `mousedown` and `touchstart`. This is due to {@link Slider#handleMouseDown} and
     * {@link Slider#handleMouseUp}.
     *
     * @param {EventTarget~Event} event
     *        `mousedown`, `mousemove`, `touchstart`, or `touchmove` event that triggered
     *        this function
     *
     * @listens mousemove
     * @listens touchmove
     */;_proto.handleMouseMove=function handleMouseMove(event){}/**
     * Handle `mouseup` or `touchend` events on the `Slider`.
     *
     * @param {EventTarget~Event} event
     *        `mouseup` or `touchend` event that triggered this function.
     *
     * @listens touchend
     * @listens mouseup
     * @fires Slider#sliderinactive
     */;_proto.handleMouseUp=function handleMouseUp(){var doc=this.bar.el_.ownerDocument;unblockTextSelection();this.removeClass('vjs-sliding');/**
       * Triggered when the slider is no longer in an active state.
       *
       * @event Slider#sliderinactive
       * @type {EventTarget~Event}
       */this.trigger('sliderinactive');this.off(doc,'mousemove',this.handleMouseMove);this.off(doc,'mouseup',this.handleMouseUp);this.off(doc,'touchmove',this.handleMouseMove);this.off(doc,'touchend',this.handleMouseUp);this.update();}/**
     * Update the progress bar of the `Slider`.
     *
     * @return {number}
     *          The percentage of progress the progress bar represents as a
     *          number from 0 to 1.
     */;_proto.update=function update(){// In VolumeBar init we have a setTimeout for update that pops and update
// to the end of the execution stack. The player is destroyed before then
// update will cause an error
if(!this.el_){return;}// If scrubbing, we could use a cached value to make the handle keep up
// with the user's mouse. On HTML5 browsers scrubbing is really smooth, but
// some flash players are slow, so we might want to utilize this later.
// var progress =  (this.player_.scrubbing()) ? this.player_.getCache().currentTime / this.player_.duration() : this.player_.currentTime() / this.player_.duration();
var progress=this.getPercent();var bar=this.bar;// If there's no bar...
if(!bar){return;}// Protect against no duration and other division issues
if(typeof progress!=='number'||progress!==progress||progress<0||progress===Infinity){progress=0;}// Convert to a percentage for setting
var percentage=(progress*100).toFixed(2)+'%';var style=bar.el().style;// Set the new bar width or height
if(this.vertical()){style.height=percentage;}else{style.width=percentage;}return progress;}/**
     * Calculate distance for slider
     *
     * @param {EventTarget~Event} event
     *        The event that caused this function to run.
     *
     * @return {number}
     *         The current position of the Slider.
     *         - position.x for vertical `Slider`s
     *         - position.y for horizontal `Slider`s
     */;_proto.calculateDistance=function calculateDistance(event){var position=getPointerPosition(this.el_,event);if(this.vertical()){return position.y;}return position.x;}/**
     * Handle a `focus` event on this `Slider`.
     *
     * @param {EventTarget~Event} event
     *        The `focus` event that caused this function to run.
     *
     * @listens focus
     */;_proto.handleFocus=function handleFocus(){this.on(this.bar.el_.ownerDocument,'keydown',this.handleKeyPress);}/**
     * Handle a `keydown` event on the `Slider`. Watches for left, rigth, up, and down
     * arrow keys. This function will only be called when the slider has focus. See
     * {@link Slider#handleFocus} and {@link Slider#handleBlur}.
     *
     * @param {EventTarget~Event} event
     *        the `keydown` event that caused this function to run.
     *
     * @listens keydown
     */;_proto.handleKeyPress=function handleKeyPress(event){// Left and Down Arrows
if(keycode.isEventKey(event,'Left')||keycode.isEventKey(event,'Down')){event.preventDefault();this.stepBack();// Up and Right Arrows
}else if(keycode.isEventKey(event,'Right')||keycode.isEventKey(event,'Up')){event.preventDefault();this.stepForward();}else{// Pass keypress handling up for unsupported keys
_Component.prototype.handleKeyPress.call(this,event);}}/**
     * Handle a `blur` event on this `Slider`.
     *
     * @param {EventTarget~Event} event
     *        The `blur` event that caused this function to run.
     *
     * @listens blur
     */;_proto.handleBlur=function handleBlur(){this.off(this.bar.el_.ownerDocument,'keydown',this.handleKeyPress);}/**
     * Listener for click events on slider, used to prevent clicks
     *   from bubbling up to parent elements like button menus.
     *
     * @param {Object} event
     *        Event that caused this object to run
     */;_proto.handleClick=function handleClick(event){event.stopImmediatePropagation();event.preventDefault();}/**
     * Get/set if slider is horizontal for vertical
     *
     * @param {boolean} [bool]
     *        - true if slider is vertical,
     *        - false is horizontal
     *
     * @return {boolean}
     *         - true if slider is vertical, and getting
     *         - false if the slider is horizontal, and getting
     */;_proto.vertical=function vertical(bool){if(bool===undefined){return this.vertical_||false;}this.vertical_=!!bool;if(this.vertical_){this.addClass('vjs-slider-vertical');}else{this.addClass('vjs-slider-horizontal');}};return Slider;}(Component);Component.registerComponent('Slider',Slider);/**
   * Shows loading progress
   *
   * @extends Component
   */var LoadProgressBar=/*#__PURE__*/function(_Component){_inheritsLoose(LoadProgressBar,_Component);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function LoadProgressBar(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.partEls_=[];_this.on(player,'progress',_this.update);return _this;}/**
     * Create the `Component`'s DOM element
     *
     * @return {Element}
     *         The element that was created.
     */var _proto=LoadProgressBar.prototype;_proto.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-load-progress',innerHTML:"<span class=\"vjs-control-text\"><span>"+this.localize('Loaded')+"</span>: <span class=\"vjs-control-text-loaded-percentage\">0%</span></span>"});};_proto.dispose=function dispose(){this.partEls_=null;_Component.prototype.dispose.call(this);}/**
     * Update progress bar
     *
     * @param {EventTarget~Event} [event]
     *        The `progress` event that caused this function to run.
     *
     * @listens Player#progress
     */;_proto.update=function update(event){var liveTracker=this.player_.liveTracker;var buffered=this.player_.buffered();var duration=liveTracker&&liveTracker.isLive()?liveTracker.seekableEnd():this.player_.duration();var bufferedEnd=this.player_.bufferedEnd();var children=this.partEls_;var controlTextPercentage=this.$('.vjs-control-text-loaded-percentage');// get the percent width of a time compared to the total end
var percentify=function percentify(time,end,rounded){// no NaN
var percent=time/end||0;percent=(percent>=1?1:percent)*100;if(rounded){percent=percent.toFixed(2);}return percent+'%';};// update the width of the progress bar
this.el_.style.width=percentify(bufferedEnd,duration);// update the control-text
textContent(controlTextPercentage,percentify(bufferedEnd,duration,true));// add child elements to represent the individual buffered time ranges
for(var i=0;i<buffered.length;i++){var start=buffered.start(i);var end=buffered.end(i);var part=children[i];if(!part){part=this.el_.appendChild(createEl());children[i]=part;}// set the percent based on the width of the progress bar (bufferedEnd)
part.style.left=percentify(start,bufferedEnd);part.style.width=percentify(end-start,bufferedEnd);}// remove unused buffered range elements
for(var _i=children.length;_i>buffered.length;_i--){this.el_.removeChild(children[_i-1]);}children.length=buffered.length;};return LoadProgressBar;}(Component);Component.registerComponent('LoadProgressBar',LoadProgressBar);/**
   * Time tooltips display a time above the progress bar.
   *
   * @extends Component
   */var TimeTooltip=/*#__PURE__*/function(_Component){_inheritsLoose(TimeTooltip,_Component);function TimeTooltip(){return _Component.apply(this,arguments)||this;}var _proto=TimeTooltip.prototype;/**
     * Create the time tooltip DOM element
     *
     * @return {Element}
     *         The element that was created.
     */_proto.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-time-tooltip'},{'aria-hidden':'true'});}/**
     * Updates the position of the time tooltip relative to the `SeekBar`.
     *
     * @param {Object} seekBarRect
     *        The `ClientRect` for the {@link SeekBar} element.
     *
     * @param {number} seekBarPoint
     *        A number from 0 to 1, representing a horizontal reference point
     *        from the left edge of the {@link SeekBar}
     */;_proto.update=function update(seekBarRect,seekBarPoint,content){var tooltipRect=getBoundingClientRect(this.el_);var playerRect=getBoundingClientRect(this.player_.el());var seekBarPointPx=seekBarRect.width*seekBarPoint;// do nothing if either rect isn't available
// for example, if the player isn't in the DOM for testing
if(!playerRect||!tooltipRect){return;}// This is the space left of the `seekBarPoint` available within the bounds
// of the player. We calculate any gap between the left edge of the player
// and the left edge of the `SeekBar` and add the number of pixels in the
// `SeekBar` before hitting the `seekBarPoint`
var spaceLeftOfPoint=seekBarRect.left-playerRect.left+seekBarPointPx;// This is the space right of the `seekBarPoint` available within the bounds
// of the player. We calculate the number of pixels from the `seekBarPoint`
// to the right edge of the `SeekBar` and add to that any gap between the
// right edge of the `SeekBar` and the player.
var spaceRightOfPoint=seekBarRect.width-seekBarPointPx+(playerRect.right-seekBarRect.right);// This is the number of pixels by which the tooltip will need to be pulled
// further to the right to center it over the `seekBarPoint`.
var pullTooltipBy=tooltipRect.width/2;// Adjust the `pullTooltipBy` distance to the left or right depending on
// the results of the space calculations above.
if(spaceLeftOfPoint<pullTooltipBy){pullTooltipBy+=pullTooltipBy-spaceLeftOfPoint;}else if(spaceRightOfPoint<pullTooltipBy){pullTooltipBy=spaceRightOfPoint;}// Due to the imprecision of decimal/ratio based calculations and varying
// rounding behaviors, there are cases where the spacing adjustment is off
// by a pixel or two. This adds insurance to these calculations.
if(pullTooltipBy<0){pullTooltipBy=0;}else if(pullTooltipBy>tooltipRect.width){pullTooltipBy=tooltipRect.width;}this.el_.style.right="-"+pullTooltipBy+"px";textContent(this.el_,content);}/**
     * Updates the position of the time tooltip relative to the `SeekBar`.
     *
     * @param {Object} seekBarRect
     *        The `ClientRect` for the {@link SeekBar} element.
     *
     * @param {number} seekBarPoint
     *        A number from 0 to 1, representing a horizontal reference point
     *        from the left edge of the {@link SeekBar}
     *
     * @param {number} time
     *        The time to update the tooltip to, not used during live playback
     *
     * @param {Function} cb
     *        A function that will be called during the request animation frame
     *        for tooltips that need to do additional animations from the default
     */;_proto.updateTime=function updateTime(seekBarRect,seekBarPoint,time,cb){var _this=this;// If there is an existing rAF ID, cancel it so we don't over-queue.
if(this.rafId_){this.cancelAnimationFrame(this.rafId_);}this.rafId_=this.requestAnimationFrame(function(){var content;var duration=_this.player_.duration();if(_this.player_.liveTracker&&_this.player_.liveTracker.isLive()){var liveWindow=_this.player_.liveTracker.liveWindow();var secondsBehind=liveWindow-seekBarPoint*liveWindow;content=(secondsBehind<1?'':'-')+formatTime(secondsBehind,liveWindow);}else{content=formatTime(time,duration);}_this.update(seekBarRect,seekBarPoint,content);if(cb){cb();}});};return TimeTooltip;}(Component);Component.registerComponent('TimeTooltip',TimeTooltip);/**
   * Used by {@link SeekBar} to display media playback progress as part of the
   * {@link ProgressControl}.
   *
   * @extends Component
   */var PlayProgressBar=/*#__PURE__*/function(_Component){_inheritsLoose(PlayProgressBar,_Component);function PlayProgressBar(){return _Component.apply(this,arguments)||this;}var _proto=PlayProgressBar.prototype;/**
     * Create the the DOM element for this class.
     *
     * @return {Element}
     *         The element that was created.
     */_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-play-progress vjs-slider-bar'},{'aria-hidden':'true'});}/**
     * Enqueues updates to its own DOM as well as the DOM of its
     * {@link TimeTooltip} child.
     *
     * @param {Object} seekBarRect
     *        The `ClientRect` for the {@link SeekBar} element.
     *
     * @param {number} seekBarPoint
     *        A number from 0 to 1, representing a horizontal reference point
     *        from the left edge of the {@link SeekBar}
     */;_proto.update=function update(seekBarRect,seekBarPoint){var timeTooltip=this.getChild('timeTooltip');if(!timeTooltip){return;}var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();timeTooltip.updateTime(seekBarRect,seekBarPoint,time);};return PlayProgressBar;}(Component);/**
   * Default options for {@link PlayProgressBar}.
   *
   * @type {Object}
   * @private
   */PlayProgressBar.prototype.options_={children:[]};// Time tooltips should not be added to a player on mobile devices
if(!IS_IOS&&!IS_ANDROID){PlayProgressBar.prototype.options_.children.push('timeTooltip');}Component.registerComponent('PlayProgressBar',PlayProgressBar);/**
   * The {@link MouseTimeDisplay} component tracks mouse movement over the
   * {@link ProgressControl}. It displays an indicator and a {@link TimeTooltip}
   * indicating the time which is represented by a given point in the
   * {@link ProgressControl}.
   *
   * @extends Component
   */var MouseTimeDisplay=/*#__PURE__*/function(_Component){_inheritsLoose(MouseTimeDisplay,_Component);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The {@link Player} that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function MouseTimeDisplay(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.update=throttle(bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.update),25);return _this;}/**
     * Create the DOM element for this class.
     *
     * @return {Element}
     *         The element that was created.
     */var _proto=MouseTimeDisplay.prototype;_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-mouse-display'});}/**
     * Enqueues updates to its own DOM as well as the DOM of its
     * {@link TimeTooltip} child.
     *
     * @param {Object} seekBarRect
     *        The `ClientRect` for the {@link SeekBar} element.
     *
     * @param {number} seekBarPoint
     *        A number from 0 to 1, representing a horizontal reference point
     *        from the left edge of the {@link SeekBar}
     */;_proto.update=function update(seekBarRect,seekBarPoint){var _this2=this;var time=seekBarPoint*this.player_.duration();this.getChild('timeTooltip').updateTime(seekBarRect,seekBarPoint,time,function(){_this2.el_.style.left=seekBarRect.width*seekBarPoint+"px";});};return MouseTimeDisplay;}(Component);/**
   * Default options for `MouseTimeDisplay`
   *
   * @type {Object}
   * @private
   */MouseTimeDisplay.prototype.options_={children:['timeTooltip']};Component.registerComponent('MouseTimeDisplay',MouseTimeDisplay);var STEP_SECONDS=5;// The multiplier of STEP_SECONDS that PgUp/PgDown move the timeline.
var PAGE_KEY_MULTIPLIER=12;// The interval at which the bar should update as it progresses.
var UPDATE_REFRESH_INTERVAL=30;/**
   * Seek bar and container for the progress bars. Uses {@link PlayProgressBar}
   * as its `bar`.
   *
   * @extends Slider
   */var SeekBar=/*#__PURE__*/function(_Slider){_inheritsLoose(SeekBar,_Slider);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function SeekBar(player,options){var _this;_this=_Slider.call(this,player,options)||this;_this.setEventHandlers_();return _this;}/**
     * Sets the event handlers
     *
     * @private
     */var _proto=SeekBar.prototype;_proto.setEventHandlers_=function setEventHandlers_(){this.update=throttle(bind(this,this.update),UPDATE_REFRESH_INTERVAL);this.on(this.player_,'timeupdate',this.update);this.on(this.player_,'ended',this.handleEnded);this.on(this.player_,'durationchange',this.update);if(this.player_.liveTracker){this.on(this.player_.liveTracker,'liveedgechange',this.update);}// when playing, let's ensure we smoothly update the play progress bar
// via an interval
this.updateInterval=null;this.on(this.player_,['playing'],this.enableInterval_);this.on(this.player_,['ended','pause','waiting'],this.disableInterval_);// we don't need to update the play progress if the document is hidden,
// also, this causes the CPU to spike and eventually crash the page on IE11.
if('hidden'in document&&'visibilityState'in document){this.on(document,'visibilitychange',this.toggleVisibility_);}};_proto.toggleVisibility_=function toggleVisibility_(e){if(document.hidden){this.disableInterval_(e);}else{this.enableInterval_();// we just switched back to the page and someone may be looking, so, update ASAP
this.requestAnimationFrame(this.update);}};_proto.enableInterval_=function enableInterval_(){var _this2=this;this.clearInterval(this.updateInterval);this.updateInterval=this.setInterval(function(){_this2.requestAnimationFrame(_this2.update);},UPDATE_REFRESH_INTERVAL);};_proto.disableInterval_=function disableInterval_(e){if(this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e.type!=='ended'){return;}this.clearInterval(this.updateInterval);}/**
     * Create the `Component`'s DOM element
     *
     * @return {Element}
     *         The element that was created.
     */;_proto.createEl=function createEl$$1(){return _Slider.prototype.createEl.call(this,'div',{className:'vjs-progress-holder'},{'aria-label':this.localize('Progress Bar')});}/**
     * This function updates the play progress bar and accessibility
     * attributes to whatever is passed in.
     *
     * @param {number} currentTime
     *        The currentTime value that should be used for accessibility
     *
     * @param {number} percent
     *        The percentage as a decimal that the bar should be filled from 0-1.
     *
     * @private
     */;_proto.update_=function update_(currentTime,percent){var liveTracker=this.player_.liveTracker;var duration=this.player_.duration();if(liveTracker&&liveTracker.isLive()){duration=this.player_.liveTracker.liveCurrentTime();}// machine readable value of progress bar (percentage complete)
this.el_.setAttribute('aria-valuenow',(percent*100).toFixed(2));// human readable value of progress bar (time complete)
this.el_.setAttribute('aria-valuetext',this.localize('progress bar timing: currentTime={1} duration={2}',[formatTime(currentTime,duration),formatTime(duration,duration)],'{1} of {2}'));// Update the `PlayProgressBar`.
if(this.bar){this.bar.update(getBoundingClientRect(this.el_),percent);}}/**
     * Update the seek bar's UI.
     *
     * @param {EventTarget~Event} [event]
     *        The `timeupdate` or `ended` event that caused this to run.
     *
     * @listens Player#timeupdate
     *
     * @return {number}
     *          The current percent at a number from 0-1
     */;_proto.update=function update(event){// if the offsetParent is null, then this element is hidden, in which case
// we don't need to update it.
if(this.el().offsetParent===null){return;}var percent=_Slider.prototype.update.call(this);this.update_(this.getCurrentTime_(),percent);return percent;}/**
     * Get the value of current time but allows for smooth scrubbing,
     * when player can't keep up.
     *
     * @return {number}
     *         The current time value to display
     *
     * @private
     */;_proto.getCurrentTime_=function getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();}/**
     * We want the seek bar to be full on ended
     * no matter what the actual internal values are. so we force it.
     *
     * @param {EventTarget~Event} [event]
     *        The `timeupdate` or `ended` event that caused this to run.
     *
     * @listens Player#ended
     */;_proto.handleEnded=function handleEnded(event){this.update_(this.player_.duration(),1);}/**
     * Get the percentage of media played so far.
     *
     * @return {number}
     *         The percentage of media played so far (0 to 1).
     */;_proto.getPercent=function getPercent(){var currentTime=this.getCurrentTime_();var percent;var liveTracker=this.player_.liveTracker;if(liveTracker&&liveTracker.isLive()){percent=(currentTime-liveTracker.seekableStart())/liveTracker.liveWindow();// prevent the percent from changing at the live edge
if(liveTracker.atLiveEdge()){percent=1;}}else{percent=currentTime/this.player_.duration();}return percent>=1?1:percent||0;}/**
     * Handle mouse down on seek bar
     *
     * @param {EventTarget~Event} event
     *        The `mousedown` event that caused this to run.
     *
     * @listens mousedown
     */;_proto.handleMouseDown=function handleMouseDown(event){if(!isSingleLeftClick(event)){return;}// Stop event propagation to prevent double fire in progress-control.js
event.stopPropagation();this.player_.scrubbing(true);this.videoWasPlaying=!this.player_.paused();this.player_.pause();_Slider.prototype.handleMouseDown.call(this,event);}/**
     * Handle mouse move on seek bar
     *
     * @param {EventTarget~Event} event
     *        The `mousemove` event that caused this to run.
     *
     * @listens mousemove
     */;_proto.handleMouseMove=function handleMouseMove(event){if(!isSingleLeftClick(event)){return;}var newTime;var distance=this.calculateDistance(event);var liveTracker=this.player_.liveTracker;if(!liveTracker||!liveTracker.isLive()){newTime=distance*this.player_.duration();// Don't let video end while scrubbing.
if(newTime===this.player_.duration()){newTime=newTime-0.1;}}else{var seekableStart=liveTracker.seekableStart();var seekableEnd=liveTracker.liveCurrentTime();newTime=seekableStart+distance*liveTracker.liveWindow();// Don't let video end while scrubbing.
if(newTime>=seekableEnd){newTime=seekableEnd;}// Compensate for precision differences so that currentTime is not less
// than seekable start
if(newTime<=seekableStart){newTime=seekableStart+0.1;}// On android seekableEnd can be Infinity sometimes,
// this will cause newTime to be Infinity, which is
// not a valid currentTime.
if(newTime===Infinity){return;}}// Set new time (tell player to seek to new time)
this.player_.currentTime(newTime);};_proto.enable=function enable(){_Slider.prototype.enable.call(this);var mouseTimeDisplay=this.getChild('mouseTimeDisplay');if(!mouseTimeDisplay){return;}mouseTimeDisplay.show();};_proto.disable=function disable(){_Slider.prototype.disable.call(this);var mouseTimeDisplay=this.getChild('mouseTimeDisplay');if(!mouseTimeDisplay){return;}mouseTimeDisplay.hide();}/**
     * Handle mouse up on seek bar
     *
     * @param {EventTarget~Event} event
     *        The `mouseup` event that caused this to run.
     *
     * @listens mouseup
     */;_proto.handleMouseUp=function handleMouseUp(event){_Slider.prototype.handleMouseUp.call(this,event);// Stop event propagation to prevent double fire in progress-control.js
if(event){event.stopPropagation();}this.player_.scrubbing(false);/**
       * Trigger timeupdate because we're done seeking and the time has changed.
       * This is particularly useful for if the player is paused to time the time displays.
       *
       * @event Tech#timeupdate
       * @type {EventTarget~Event}
       */this.player_.trigger({type:'timeupdate',target:this,manuallyTriggered:true});if(this.videoWasPlaying){silencePromise(this.player_.play());}}/**
     * Move more quickly fast forward for keyboard-only users
     */;_proto.stepForward=function stepForward(){this.player_.currentTime(this.player_.currentTime()+STEP_SECONDS);}/**
     * Move more quickly rewind for keyboard-only users
     */;_proto.stepBack=function stepBack(){this.player_.currentTime(this.player_.currentTime()-STEP_SECONDS);}/**
     * Toggles the playback state of the player
     * This gets called when enter or space is used on the seekbar
     *
     * @param {EventTarget~Event} event
     *        The `keydown` event that caused this function to be called
     *
     */;_proto.handleAction=function handleAction(event){if(this.player_.paused()){this.player_.play();}else{this.player_.pause();}}/**
     * Called when this SeekBar has focus and a key gets pressed down.
     * Supports the following keys:
     *
     *   Space or Enter key fire a click event
     *   Home key moves to start of the timeline
     *   End key moves to end of the timeline
     *   Digit "0" through "9" keys move to 0%, 10% ... 80%, 90% of the timeline
     *   PageDown key moves back a larger step than ArrowDown
     *   PageUp key moves forward a large step
     *
     * @param {EventTarget~Event} event
     *        The `keydown` event that caused this function to be called.
     *
     * @listens keydown
     */;_proto.handleKeyPress=function handleKeyPress(event){if(keycode.isEventKey(event,'Space')||keycode.isEventKey(event,'Enter')){event.preventDefault();this.handleAction(event);}else if(keycode.isEventKey(event,'Home')){event.preventDefault();this.player_.currentTime(0);}else if(keycode.isEventKey(event,'End')){event.preventDefault();this.player_.currentTime(this.player_.duration());}else if(/^[0-9]$/.test(keycode(event))){event.preventDefault();var gotoFraction=(keycode.codes[keycode(event)]-keycode.codes['0'])*10.0/100.0;this.player_.currentTime(this.player_.duration()*gotoFraction);}else if(keycode.isEventKey(event,'PgDn')){event.preventDefault();this.player_.currentTime(this.player_.currentTime()-STEP_SECONDS*PAGE_KEY_MULTIPLIER);}else if(keycode.isEventKey(event,'PgUp')){event.preventDefault();this.player_.currentTime(this.player_.currentTime()+STEP_SECONDS*PAGE_KEY_MULTIPLIER);}else{// Pass keypress handling up for unsupported keys
_Slider.prototype.handleKeyPress.call(this,event);}};return SeekBar;}(Slider);/**
   * Default options for the `SeekBar`
   *
   * @type {Object}
   * @private
   */SeekBar.prototype.options_={children:['loadProgressBar','playProgressBar'],barName:'playProgressBar'};// MouseTimeDisplay tooltips should not be added to a player on mobile devices
if(!IS_IOS&&!IS_ANDROID){SeekBar.prototype.options_.children.splice(1,0,'mouseTimeDisplay');}Component.registerComponent('SeekBar',SeekBar);/**
   * The Progress Control component contains the seek bar, load progress,
   * and play progress.
   *
   * @extends Component
   */var ProgressControl=/*#__PURE__*/function(_Component){_inheritsLoose(ProgressControl,_Component);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function ProgressControl(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.handleMouseMove=throttle(bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.handleMouseMove),25);_this.throttledHandleMouseSeek=throttle(bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.handleMouseSeek),25);_this.enable();return _this;}/**
     * Create the `Component`'s DOM element
     *
     * @return {Element}
     *         The element that was created.
     */var _proto=ProgressControl.prototype;_proto.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-progress-control vjs-control'});}/**
     * When the mouse moves over the `ProgressControl`, the pointer position
     * gets passed down to the `MouseTimeDisplay` component.
     *
     * @param {EventTarget~Event} event
     *        The `mousemove` event that caused this function to run.
     *
     * @listen mousemove
     */;_proto.handleMouseMove=function handleMouseMove(event){var seekBar=this.getChild('seekBar');if(seekBar){var mouseTimeDisplay=seekBar.getChild('mouseTimeDisplay');var seekBarEl=seekBar.el();var seekBarRect=getBoundingClientRect(seekBarEl);var seekBarPoint=getPointerPosition(seekBarEl,event).x;// The default skin has a gap on either side of the `SeekBar`. This means
// that it's possible to trigger this behavior outside the boundaries of
// the `SeekBar`. This ensures we stay within it at all times.
if(seekBarPoint>1){seekBarPoint=1;}else if(seekBarPoint<0){seekBarPoint=0;}if(mouseTimeDisplay){mouseTimeDisplay.update(seekBarRect,seekBarPoint);}}}/**
     * A throttled version of the {@link ProgressControl#handleMouseSeek} listener.
     *
     * @method ProgressControl#throttledHandleMouseSeek
     * @param {EventTarget~Event} event
     *        The `mousemove` event that caused this function to run.
     *
     * @listen mousemove
     * @listen touchmove
     *//**
     * Handle `mousemove` or `touchmove` events on the `ProgressControl`.
     *
     * @param {EventTarget~Event} event
     *        `mousedown` or `touchstart` event that triggered this function
     *
     * @listens mousemove
     * @listens touchmove
     */;_proto.handleMouseSeek=function handleMouseSeek(event){var seekBar=this.getChild('seekBar');if(seekBar){seekBar.handleMouseMove(event);}}/**
     * Are controls are currently enabled for this progress control.
     *
     * @return {boolean}
     *         true if controls are enabled, false otherwise
     */;_proto.enabled=function enabled(){return this.enabled_;}/**
     * Disable all controls on the progress control and its children
     */;_proto.disable=function disable(){this.children().forEach(function(child){return child.disable&&child.disable();});if(!this.enabled()){return;}this.off(['mousedown','touchstart'],this.handleMouseDown);this.off(this.el_,'mousemove',this.handleMouseMove);this.handleMouseUp();this.addClass('disabled');this.enabled_=false;}/**
     * Enable all controls on the progress control and its children
     */;_proto.enable=function enable(){this.children().forEach(function(child){return child.enable&&child.enable();});if(this.enabled()){return;}this.on(['mousedown','touchstart'],this.handleMouseDown);this.on(this.el_,'mousemove',this.handleMouseMove);this.removeClass('disabled');this.enabled_=true;}/**
     * Handle `mousedown` or `touchstart` events on the `ProgressControl`.
     *
     * @param {EventTarget~Event} event
     *        `mousedown` or `touchstart` event that triggered this function
     *
     * @listens mousedown
     * @listens touchstart
     */;_proto.handleMouseDown=function handleMouseDown(event){var doc=this.el_.ownerDocument;var seekBar=this.getChild('seekBar');if(seekBar){seekBar.handleMouseDown(event);}this.on(doc,'mousemove',this.throttledHandleMouseSeek);this.on(doc,'touchmove',this.throttledHandleMouseSeek);this.on(doc,'mouseup',this.handleMouseUp);this.on(doc,'touchend',this.handleMouseUp);}/**
     * Handle `mouseup` or `touchend` events on the `ProgressControl`.
     *
     * @param {EventTarget~Event} event
     *        `mouseup` or `touchend` event that triggered this function.
     *
     * @listens touchend
     * @listens mouseup
     */;_proto.handleMouseUp=function handleMouseUp(event){var doc=this.el_.ownerDocument;var seekBar=this.getChild('seekBar');if(seekBar){seekBar.handleMouseUp(event);}this.off(doc,'mousemove',this.throttledHandleMouseSeek);this.off(doc,'touchmove',this.throttledHandleMouseSeek);this.off(doc,'mouseup',this.handleMouseUp);this.off(doc,'touchend',this.handleMouseUp);};return ProgressControl;}(Component);/**
   * Default options for `ProgressControl`
   *
   * @type {Object}
   * @private
   */ProgressControl.prototype.options_={children:['seekBar']};Component.registerComponent('ProgressControl',ProgressControl);/**
   * Toggle fullscreen video
   *
   * @extends Button
   */var FullscreenToggle=/*#__PURE__*/function(_Button){_inheritsLoose(FullscreenToggle,_Button);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function FullscreenToggle(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.on(player,'fullscreenchange',_this.handleFullscreenChange);if(document[FullscreenApi.fullscreenEnabled]===false){_this.disable();}return _this;}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */var _proto=FullscreenToggle.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-fullscreen-control "+_Button.prototype.buildCSSClass.call(this);}/**
     * Handles fullscreenchange on the player and change control text accordingly.
     *
     * @param {EventTarget~Event} [event]
     *        The {@link Player#fullscreenchange} event that caused this function to be
     *        called.
     *
     * @listens Player#fullscreenchange
     */;_proto.handleFullscreenChange=function handleFullscreenChange(event){if(this.player_.isFullscreen()){this.controlText('Non-Fullscreen');}else{this.controlText('Fullscreen');}}/**
     * This gets called when an `FullscreenToggle` is "clicked". See
     * {@link ClickableComponent} for more detailed information on what a click can be.
     *
     * @param {EventTarget~Event} [event]
     *        The `keydown`, `tap`, or `click` event that caused this function to be
     *        called.
     *
     * @listens tap
     * @listens click
     */;_proto.handleClick=function handleClick(event){if(!this.player_.isFullscreen()){this.player_.requestFullscreen();}else{this.player_.exitFullscreen();}};return FullscreenToggle;}(Button);/**
   * The text that should display over the `FullscreenToggle`s controls. Added for localization.
   *
   * @type {string}
   * @private
   */FullscreenToggle.prototype.controlText_='Fullscreen';Component.registerComponent('FullscreenToggle',FullscreenToggle);/**
   * Check if volume control is supported and if it isn't hide the
   * `Component` that was passed  using the `vjs-hidden` class.
   *
   * @param {Component} self
   *        The component that should be hidden if volume is unsupported
   *
   * @param {Player} player
   *        A reference to the player
   *
   * @private
   */var checkVolumeSupport=function checkVolumeSupport(self,player){// hide volume controls when they're not supported by the current tech
if(player.tech_&&!player.tech_.featuresVolumeControl){self.addClass('vjs-hidden');}self.on(player,'loadstart',function(){if(!player.tech_.featuresVolumeControl){self.addClass('vjs-hidden');}else{self.removeClass('vjs-hidden');}});};/**
   * Shows volume level
   *
   * @extends Component
   */var VolumeLevel=/*#__PURE__*/function(_Component){_inheritsLoose(VolumeLevel,_Component);function VolumeLevel(){return _Component.apply(this,arguments)||this;}var _proto=VolumeLevel.prototype;/**
     * Create the `Component`'s DOM element
     *
     * @return {Element}
     *         The element that was created.
     */_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-volume-level',innerHTML:'<span class="vjs-control-text"></span>'});};return VolumeLevel;}(Component);Component.registerComponent('VolumeLevel',VolumeLevel);/**
   * The bar that contains the volume level and can be clicked on to adjust the level
   *
   * @extends Slider
   */var VolumeBar=/*#__PURE__*/function(_Slider){_inheritsLoose(VolumeBar,_Slider);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function VolumeBar(player,options){var _this;_this=_Slider.call(this,player,options)||this;_this.on('slideractive',_this.updateLastVolume_);_this.on(player,'volumechange',_this.updateARIAAttributes);player.ready(function(){return _this.updateARIAAttributes();});return _this;}/**
     * Create the `Component`'s DOM element
     *
     * @return {Element}
     *         The element that was created.
     */var _proto=VolumeBar.prototype;_proto.createEl=function createEl$$1(){return _Slider.prototype.createEl.call(this,'div',{className:'vjs-volume-bar vjs-slider-bar'},{'aria-label':this.localize('Volume Level'),'aria-live':'polite'});}/**
     * Handle mouse down on volume bar
     *
     * @param {EventTarget~Event} event
     *        The `mousedown` event that caused this to run.
     *
     * @listens mousedown
     */;_proto.handleMouseDown=function handleMouseDown(event){if(!isSingleLeftClick(event)){return;}_Slider.prototype.handleMouseDown.call(this,event);}/**
     * Handle movement events on the {@link VolumeMenuButton}.
     *
     * @param {EventTarget~Event} event
     *        The event that caused this function to run.
     *
     * @listens mousemove
     */;_proto.handleMouseMove=function handleMouseMove(event){if(!isSingleLeftClick(event)){return;}this.checkMuted();this.player_.volume(this.calculateDistance(event));}/**
     * If the player is muted unmute it.
     */;_proto.checkMuted=function checkMuted(){if(this.player_.muted()){this.player_.muted(false);}}/**
     * Get percent of volume level
     *
     * @return {number}
     *         Volume level percent as a decimal number.
     */;_proto.getPercent=function getPercent(){if(this.player_.muted()){return 0;}return this.player_.volume();}/**
     * Increase volume level for keyboard users
     */;_proto.stepForward=function stepForward(){this.checkMuted();this.player_.volume(this.player_.volume()+0.1);}/**
     * Decrease volume level for keyboard users
     */;_proto.stepBack=function stepBack(){this.checkMuted();this.player_.volume(this.player_.volume()-0.1);}/**
     * Update ARIA accessibility attributes
     *
     * @param {EventTarget~Event} [event]
     *        The `volumechange` event that caused this function to run.
     *
     * @listens Player#volumechange
     */;_proto.updateARIAAttributes=function updateARIAAttributes(event){var ariaValue=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute('aria-valuenow',ariaValue);this.el_.setAttribute('aria-valuetext',ariaValue+'%');}/**
     * Returns the current value of the player volume as a percentage
     *
     * @private
     */;_proto.volumeAsPercentage_=function volumeAsPercentage_(){return Math.round(this.player_.volume()*100);}/**
     * When user starts dragging the VolumeBar, store the volume and listen for
     * the end of the drag. When the drag ends, if the volume was set to zero,
     * set lastVolume to the stored volume.
     *
     * @listens slideractive
     * @private
     */;_proto.updateLastVolume_=function updateLastVolume_(){var _this2=this;var volumeBeforeDrag=this.player_.volume();this.one('sliderinactive',function(){if(_this2.player_.volume()===0){_this2.player_.lastVolume_(volumeBeforeDrag);}});};return VolumeBar;}(Slider);/**
   * Default options for the `VolumeBar`
   *
   * @type {Object}
   * @private
   */VolumeBar.prototype.options_={children:['volumeLevel'],barName:'volumeLevel'};/**
   * Call the update event for this Slider when this event happens on the player.
   *
   * @type {string}
   */VolumeBar.prototype.playerEvent='volumechange';Component.registerComponent('VolumeBar',VolumeBar);/**
   * The component for controlling the volume level
   *
   * @extends Component
   */var VolumeControl=/*#__PURE__*/function(_Component){_inheritsLoose(VolumeControl,_Component);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options={}]
     *        The key/value store of player options.
     */function VolumeControl(player,options){var _this;if(options===void 0){options={};}options.vertical=options.vertical||false;// Pass the vertical option down to the VolumeBar if
// the VolumeBar is turned on.
if(typeof options.volumeBar==='undefined'||isPlain(options.volumeBar)){options.volumeBar=options.volumeBar||{};options.volumeBar.vertical=options.vertical;}_this=_Component.call(this,player,options)||this;// hide this control if volume support is missing
checkVolumeSupport(_assertThisInitialized(_assertThisInitialized(_this)),player);_this.throttledHandleMouseMove=throttle(bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.handleMouseMove),25);_this.on('mousedown',_this.handleMouseDown);_this.on('touchstart',_this.handleMouseDown);// while the slider is active (the mouse has been pressed down and
// is dragging) or in focus we do not want to hide the VolumeBar
_this.on(_this.volumeBar,['focus','slideractive'],function(){_this.volumeBar.addClass('vjs-slider-active');_this.addClass('vjs-slider-active');_this.trigger('slideractive');});_this.on(_this.volumeBar,['blur','sliderinactive'],function(){_this.volumeBar.removeClass('vjs-slider-active');_this.removeClass('vjs-slider-active');_this.trigger('sliderinactive');});return _this;}/**
     * Create the `Component`'s DOM element
     *
     * @return {Element}
     *         The element that was created.
     */var _proto=VolumeControl.prototype;_proto.createEl=function createEl(){var orientationClass='vjs-volume-horizontal';if(this.options_.vertical){orientationClass='vjs-volume-vertical';}return _Component.prototype.createEl.call(this,'div',{className:"vjs-volume-control vjs-control "+orientationClass});}/**
     * Handle `mousedown` or `touchstart` events on the `VolumeControl`.
     *
     * @param {EventTarget~Event} event
     *        `mousedown` or `touchstart` event that triggered this function
     *
     * @listens mousedown
     * @listens touchstart
     */;_proto.handleMouseDown=function handleMouseDown(event){var doc=this.el_.ownerDocument;this.on(doc,'mousemove',this.throttledHandleMouseMove);this.on(doc,'touchmove',this.throttledHandleMouseMove);this.on(doc,'mouseup',this.handleMouseUp);this.on(doc,'touchend',this.handleMouseUp);}/**
     * Handle `mouseup` or `touchend` events on the `VolumeControl`.
     *
     * @param {EventTarget~Event} event
     *        `mouseup` or `touchend` event that triggered this function.
     *
     * @listens touchend
     * @listens mouseup
     */;_proto.handleMouseUp=function handleMouseUp(event){var doc=this.el_.ownerDocument;this.off(doc,'mousemove',this.throttledHandleMouseMove);this.off(doc,'touchmove',this.throttledHandleMouseMove);this.off(doc,'mouseup',this.handleMouseUp);this.off(doc,'touchend',this.handleMouseUp);}/**
     * Handle `mousedown` or `touchstart` events on the `VolumeControl`.
     *
     * @param {EventTarget~Event} event
     *        `mousedown` or `touchstart` event that triggered this function
     *
     * @listens mousedown
     * @listens touchstart
     */;_proto.handleMouseMove=function handleMouseMove(event){this.volumeBar.handleMouseMove(event);};return VolumeControl;}(Component);/**
   * Default options for the `VolumeControl`
   *
   * @type {Object}
   * @private
   */VolumeControl.prototype.options_={children:['volumeBar']};Component.registerComponent('VolumeControl',VolumeControl);/**
   * Check if muting volume is supported and if it isn't hide the mute toggle
   * button.
   *
   * @param {Component} self
   *        A reference to the mute toggle button
   *
   * @param {Player} player
   *        A reference to the player
   *
   * @private
   */var checkMuteSupport=function checkMuteSupport(self,player){// hide mute toggle button if it's not supported by the current tech
if(player.tech_&&!player.tech_.featuresMuteControl){self.addClass('vjs-hidden');}self.on(player,'loadstart',function(){if(!player.tech_.featuresMuteControl){self.addClass('vjs-hidden');}else{self.removeClass('vjs-hidden');}});};/**
   * A button component for muting the audio.
   *
   * @extends Button
   */var MuteToggle=/*#__PURE__*/function(_Button){_inheritsLoose(MuteToggle,_Button);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function MuteToggle(player,options){var _this;_this=_Button.call(this,player,options)||this;// hide this control if volume support is missing
checkMuteSupport(_assertThisInitialized(_assertThisInitialized(_this)),player);_this.on(player,['loadstart','volumechange'],_this.update);return _this;}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */var _proto=MuteToggle.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-mute-control "+_Button.prototype.buildCSSClass.call(this);}/**
     * This gets called when an `MuteToggle` is "clicked". See
     * {@link ClickableComponent} for more detailed information on what a click can be.
     *
     * @param {EventTarget~Event} [event]
     *        The `keydown`, `tap`, or `click` event that caused this function to be
     *        called.
     *
     * @listens tap
     * @listens click
     */;_proto.handleClick=function handleClick(event){var vol=this.player_.volume();var lastVolume=this.player_.lastVolume_();if(vol===0){var volumeToSet=lastVolume<0.1?0.1:lastVolume;this.player_.volume(volumeToSet);this.player_.muted(false);}else{this.player_.muted(this.player_.muted()?false:true);}}/**
     * Update the `MuteToggle` button based on the state of `volume` and `muted`
     * on the player.
     *
     * @param {EventTarget~Event} [event]
     *        The {@link Player#loadstart} event if this function was called
     *        through an event.
     *
     * @listens Player#loadstart
     * @listens Player#volumechange
     */;_proto.update=function update(event){this.updateIcon_();this.updateControlText_();}/**
     * Update the appearance of the `MuteToggle` icon.
     *
     * Possible states (given `level` variable below):
     * - 0: crossed out
     * - 1: zero bars of volume
     * - 2: one bar of volume
     * - 3: two bars of volume
     *
     * @private
     */;_proto.updateIcon_=function updateIcon_(){var vol=this.player_.volume();var level=3;// in iOS when a player is loaded with muted attribute
// and volume is changed with a native mute button
// we want to make sure muted state is updated
if(IS_IOS&&this.player_.tech_&&this.player_.tech_.el_){this.player_.muted(this.player_.tech_.el_.muted);}if(vol===0||this.player_.muted()){level=0;}else if(vol<0.33){level=1;}else if(vol<0.67){level=2;}// TODO improve muted icon classes
for(var i=0;i<4;i++){removeClass(this.el_,"vjs-vol-"+i);}addClass(this.el_,"vjs-vol-"+level);}/**
     * If `muted` has changed on the player, update the control text
     * (`title` attribute on `vjs-mute-control` element and content of
     * `vjs-control-text` element).
     *
     * @private
     */;_proto.updateControlText_=function updateControlText_(){var soundOff=this.player_.muted()||this.player_.volume()===0;var text=soundOff?'Unmute':'Mute';if(this.controlText()!==text){this.controlText(text);}};return MuteToggle;}(Button);/**
   * The text that should display over the `MuteToggle`s controls. Added for localization.
   *
   * @type {string}
   * @private
   */MuteToggle.prototype.controlText_='Mute';Component.registerComponent('MuteToggle',MuteToggle);/**
   * A Component to contain the MuteToggle and VolumeControl so that
   * they can work together.
   *
   * @extends Component
   */var VolumePanel=/*#__PURE__*/function(_Component){_inheritsLoose(VolumePanel,_Component);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options={}]
     *        The key/value store of player options.
     */function VolumePanel(player,options){var _this;if(options===void 0){options={};}if(typeof options.inline!=='undefined'){options.inline=options.inline;}else{options.inline=true;}// pass the inline option down to the VolumeControl as vertical if
// the VolumeControl is on.
if(typeof options.volumeControl==='undefined'||isPlain(options.volumeControl)){options.volumeControl=options.volumeControl||{};options.volumeControl.vertical=!options.inline;}_this=_Component.call(this,player,options)||this;_this.on(player,['loadstart'],_this.volumePanelState_);// while the slider is active (the mouse has been pressed down and
// is dragging) we do not want to hide the VolumeBar
_this.on(_this.volumeControl,['slideractive'],_this.sliderActive_);_this.on(_this.volumeControl,['sliderinactive'],_this.sliderInactive_);return _this;}/**
     * Add vjs-slider-active class to the VolumePanel
     *
     * @listens VolumeControl#slideractive
     * @private
     */var _proto=VolumePanel.prototype;_proto.sliderActive_=function sliderActive_(){this.addClass('vjs-slider-active');}/**
     * Removes vjs-slider-active class to the VolumePanel
     *
     * @listens VolumeControl#sliderinactive
     * @private
     */;_proto.sliderInactive_=function sliderInactive_(){this.removeClass('vjs-slider-active');}/**
     * Adds vjs-hidden or vjs-mute-toggle-only to the VolumePanel
     * depending on MuteToggle and VolumeControl state
     *
     * @listens Player#loadstart
     * @private
     */;_proto.volumePanelState_=function volumePanelState_(){// hide volume panel if neither volume control or mute toggle
// are displayed
if(this.volumeControl.hasClass('vjs-hidden')&&this.muteToggle.hasClass('vjs-hidden')){this.addClass('vjs-hidden');}// if only mute toggle is visible we don't want
// volume panel expanding when hovered or active
if(this.volumeControl.hasClass('vjs-hidden')&&!this.muteToggle.hasClass('vjs-hidden')){this.addClass('vjs-mute-toggle-only');}}/**
     * Create the `Component`'s DOM element
     *
     * @return {Element}
     *         The element that was created.
     */;_proto.createEl=function createEl(){var orientationClass='vjs-volume-panel-horizontal';if(!this.options_.inline){orientationClass='vjs-volume-panel-vertical';}return _Component.prototype.createEl.call(this,'div',{className:"vjs-volume-panel vjs-control "+orientationClass});};return VolumePanel;}(Component);/**
   * Default options for the `VolumeControl`
   *
   * @type {Object}
   * @private
   */VolumePanel.prototype.options_={children:['muteToggle','volumeControl']};Component.registerComponent('VolumePanel',VolumePanel);/**
   * The Menu component is used to build popup menus, including subtitle and
   * captions selection menus.
   *
   * @extends Component
   */var Menu=/*#__PURE__*/function(_Component){_inheritsLoose(Menu,_Component);/**
     * Create an instance of this class.
     *
     * @param {Player} player
     *        the player that this component should attach to
     *
     * @param {Object} [options]
     *        Object of option names and values
     *
     */function Menu(player,options){var _this;_this=_Component.call(this,player,options)||this;if(options){_this.menuButton_=options.menuButton;}_this.focusedChild_=-1;_this.on('keydown',_this.handleKeyPress);// All the menu item instances share the same blur handler provided by the menu container.
_this.boundHandleBlur_=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.handleBlur);_this.boundHandleTapClick_=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.handleTapClick);return _this;}/**
     * Add event listeners to the {@link MenuItem}.
     *
     * @param {Object} component
     *        The instance of the `MenuItem` to add listeners to.
     *
     */var _proto=Menu.prototype;_proto.addEventListenerForItem=function addEventListenerForItem(component){if(!(component instanceof Component)){return;}this.on(component,'blur',this.boundHandleBlur_);this.on(component,['tap','click'],this.boundHandleTapClick_);}/**
     * Remove event listeners from the {@link MenuItem}.
     *
     * @param {Object} component
     *        The instance of the `MenuItem` to remove listeners.
     *
     */;_proto.removeEventListenerForItem=function removeEventListenerForItem(component){if(!(component instanceof Component)){return;}this.off(component,'blur',this.boundHandleBlur_);this.off(component,['tap','click'],this.boundHandleTapClick_);}/**
     * This method will be called indirectly when the component has been added
     * before the component adds to the new menu instance by `addItem`.
     * In this case, the original menu instance will remove the component
     * by calling `removeChild`.
     *
     * @param {Object} component
     *        The instance of the `MenuItem`
     */;_proto.removeChild=function removeChild(component){if(typeof component==='string'){component=this.getChild(component);}this.removeEventListenerForItem(component);_Component.prototype.removeChild.call(this,component);}/**
     * Add a {@link MenuItem} to the menu.
     *
     * @param {Object|string} component
     *        The name or instance of the `MenuItem` to add.
     *
     */;_proto.addItem=function addItem(component){var childComponent=this.addChild(component);if(childComponent){this.addEventListenerForItem(childComponent);}}/**
     * Create the `Menu`s DOM element.
     *
     * @return {Element}
     *         the element that was created
     */;_proto.createEl=function createEl$$1(){var contentElType=this.options_.contentElType||'ul';this.contentEl_=createEl(contentElType,{className:'vjs-menu-content'});this.contentEl_.setAttribute('role','menu');var el=_Component.prototype.createEl.call(this,'div',{append:this.contentEl_,className:'vjs-menu'});el.appendChild(this.contentEl_);// Prevent clicks from bubbling up. Needed for Menu Buttons,
// where a click on the parent is significant
on(el,'click',function(event){event.preventDefault();event.stopImmediatePropagation();});return el;};_proto.dispose=function dispose(){this.contentEl_=null;this.boundHandleBlur_=null;this.boundHandleTapClick_=null;_Component.prototype.dispose.call(this);}/**
     * Called when a `MenuItem` loses focus.
     *
     * @param {EventTarget~Event} event
     *        The `blur` event that caused this function to be called.
     *
     * @listens blur
     */;_proto.handleBlur=function handleBlur(event){var relatedTarget=event.relatedTarget||document.activeElement;// Close menu popup when a user clicks outside the menu
if(!this.children().some(function(element){return element.el()===relatedTarget;})){var btn=this.menuButton_;if(btn&&btn.buttonPressed_&&relatedTarget!==btn.el().firstChild){btn.unpressButton();}}}/**
     * Called when a `MenuItem` gets clicked or tapped.
     *
     * @param {EventTarget~Event} event
     *        The `click` or `tap` event that caused this function to be called.
     *
     * @listens click,tap
     */;_proto.handleTapClick=function handleTapClick(event){// Unpress the associated MenuButton, and move focus back to it
if(this.menuButton_){this.menuButton_.unpressButton();var childComponents=this.children();if(!Array.isArray(childComponents)){return;}var foundComponent=childComponents.filter(function(component){return component.el()===event.target;})[0];if(!foundComponent){return;}// don't focus menu button if item is a caption settings item
// because focus will move elsewhere
if(foundComponent.name()!=='CaptionSettingsMenuItem'){this.menuButton_.focus();}}}/**
     * Handle a `keydown` event on this menu. This listener is added in the constructor.
     *
     * @param {EventTarget~Event} event
     *        A `keydown` event that happened on the menu.
     *
     * @listens keydown
     */;_proto.handleKeyPress=function handleKeyPress(event){// Left and Down Arrows
if(keycode.isEventKey(event,'Left')||keycode.isEventKey(event,'Down')){event.preventDefault();this.stepForward();// Up and Right Arrows
}else if(keycode.isEventKey(event,'Right')||keycode.isEventKey(event,'Up')){event.preventDefault();this.stepBack();}}/**
     * Move to next (lower) menu item for keyboard users.
     */;_proto.stepForward=function stepForward(){var stepChild=0;if(this.focusedChild_!==undefined){stepChild=this.focusedChild_+1;}this.focus(stepChild);}/**
     * Move to previous (higher) menu item for keyboard users.
     */;_proto.stepBack=function stepBack(){var stepChild=0;if(this.focusedChild_!==undefined){stepChild=this.focusedChild_-1;}this.focus(stepChild);}/**
     * Set focus on a {@link MenuItem} in the `Menu`.
     *
     * @param {Object|string} [item=0]
     *        Index of child item set focus on.
     */;_proto.focus=function focus(item){if(item===void 0){item=0;}var children=this.children().slice();var haveTitle=children.length&&children[0].className&&/vjs-menu-title/.test(children[0].className);if(haveTitle){children.shift();}if(children.length>0){if(item<0){item=0;}else if(item>=children.length){item=children.length-1;}this.focusedChild_=item;children[item].el_.focus();}};return Menu;}(Component);Component.registerComponent('Menu',Menu);/**
   * A `MenuButton` class for any popup {@link Menu}.
   *
   * @extends Component
   */var MenuButton=/*#__PURE__*/function(_Component){_inheritsLoose(MenuButton,_Component);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options={}]
     *        The key/value store of player options.
     */function MenuButton(player,options){var _this;if(options===void 0){options={};}_this=_Component.call(this,player,options)||this;_this.menuButton_=new Button(player,options);_this.menuButton_.controlText(_this.controlText_);_this.menuButton_.el_.setAttribute('aria-haspopup','true');// Add buildCSSClass values to the button, not the wrapper
var buttonClass=Button.prototype.buildCSSClass();_this.menuButton_.el_.className=_this.buildCSSClass()+' '+buttonClass;_this.menuButton_.removeClass('vjs-control');_this.addChild(_this.menuButton_);_this.update();_this.enabled_=true;_this.on(_this.menuButton_,'tap',_this.handleClick);_this.on(_this.menuButton_,'click',_this.handleClick);_this.on(_this.menuButton_,'focus',_this.handleFocus);_this.on(_this.menuButton_,'blur',_this.handleBlur);_this.on(_this.menuButton_,'mouseenter',function(){_this.menu.show();});_this.on('keydown',_this.handleSubmenuKeyPress);return _this;}/**
     * Update the menu based on the current state of its items.
     */var _proto=MenuButton.prototype;_proto.update=function update(){var menu=this.createMenu();if(this.menu){this.menu.dispose();this.removeChild(this.menu);}this.menu=menu;this.addChild(menu);/**
       * Track the state of the menu button
       *
       * @type {Boolean}
       * @private
       */this.buttonPressed_=false;this.menuButton_.el_.setAttribute('aria-expanded','false');if(this.items&&this.items.length<=this.hideThreshold_){this.hide();}else{this.show();}}/**
     * Create the menu and add all items to it.
     *
     * @return {Menu}
     *         The constructed menu
     */;_proto.createMenu=function createMenu(){var menu=new Menu(this.player_,{menuButton:this});/**
       * Hide the menu if the number of items is less than or equal to this threshold. This defaults
       * to 0 and whenever we add items which can be hidden to the menu we'll increment it. We list
       * it here because every time we run `createMenu` we need to reset the value.
       *
       * @protected
       * @type {Number}
       */this.hideThreshold_=0;// Add a title list item to the top
if(this.options_.title){var titleEl=createEl('li',{className:'vjs-menu-title',innerHTML:toTitleCase(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var titleComponent=new Component(this.player_,{el:titleEl});menu.addItem(titleComponent);}this.items=this.createItems();if(this.items){// Add menu items to the menu
for(var i=0;i<this.items.length;i++){menu.addItem(this.items[i]);}}return menu;}/**
     * Create the list of menu items. Specific to each subclass.
     *
     * @abstract
     */;_proto.createItems=function createItems(){}/**
     * Create the `MenuButtons`s DOM element.
     *
     * @return {Element}
     *         The element that gets created.
     */;_proto.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,'div',{className:this.buildWrapperCSSClass()},{});}/**
     * Allow sub components to stack CSS class names for the wrapper element
     *
     * @return {string}
     *         The constructed wrapper DOM `className`
     */;_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){var menuButtonClass='vjs-menu-button';// If the inline option is passed, we want to use different styles altogether.
if(this.options_.inline===true){menuButtonClass+='-inline';}else{menuButtonClass+='-popup';}// TODO: Fix the CSS so that this isn't necessary
var buttonClass=Button.prototype.buildCSSClass();return"vjs-menu-button "+menuButtonClass+" "+buttonClass+" "+_Component.prototype.buildCSSClass.call(this);}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */;_proto.buildCSSClass=function buildCSSClass(){var menuButtonClass='vjs-menu-button';// If the inline option is passed, we want to use different styles altogether.
if(this.options_.inline===true){menuButtonClass+='-inline';}else{menuButtonClass+='-popup';}return"vjs-menu-button "+menuButtonClass+" "+_Component.prototype.buildCSSClass.call(this);}/**
     * Get or set the localized control text that will be used for accessibility.
     *
     * > NOTE: This will come from the internal `menuButton_` element.
     *
     * @param {string} [text]
     *        Control text for element.
     *
     * @param {Element} [el=this.menuButton_.el()]
     *        Element to set the title on.
     *
     * @return {string}
     *         - The control text when getting
     */;_proto.controlText=function controlText(text,el){if(el===void 0){el=this.menuButton_.el();}return this.menuButton_.controlText(text,el);}/**
     * Handle a click on a `MenuButton`.
     * See {@link ClickableComponent#handleClick} for instances where this is called.
     *
     * @param {EventTarget~Event} event
     *        The `keydown`, `tap`, or `click` event that caused this function to be
     *        called.
     *
     * @listens tap
     * @listens click
     */;_proto.handleClick=function handleClick(event){if(this.buttonPressed_){this.unpressButton();}else{this.pressButton();}}/**
     * Set the focus to the actual button, not to this element
     */;_proto.focus=function focus(){this.menuButton_.focus();}/**
     * Remove the focus from the actual button, not this element
     */;_proto.blur=function blur(){this.menuButton_.blur();}/**
     * This gets called when a `MenuButton` gains focus via a `focus` event.
     * Turns on listening for `keydown` events. When they happen it
     * calls `this.handleKeyPress`.
     *
     * @param {EventTarget~Event} event
     *        The `focus` event that caused this function to be called.
     *
     * @listens focus
     */;_proto.handleFocus=function handleFocus(){on(document,'keydown',bind(this,this.handleKeyPress));}/**
     * Called when a `MenuButton` loses focus. Turns off the listener for
     * `keydown` events. Which Stops `this.handleKeyPress` from getting called.
     *
     * @param {EventTarget~Event} event
     *        The `blur` event that caused this function to be called.
     *
     * @listens blur
     */;_proto.handleBlur=function handleBlur(){off(document,'keydown',bind(this,this.handleKeyPress));}/**
     * Handle tab, escape, down arrow, and up arrow keys for `MenuButton`. See
     * {@link ClickableComponent#handleKeyPress} for instances where this is called.
     *
     * @param {EventTarget~Event} event
     *        The `keydown` event that caused this function to be called.
     *
     * @listens keydown
     */;_proto.handleKeyPress=function handleKeyPress(event){// Escape or Tab unpress the 'button'
if(keycode.isEventKey(event,'Esc')||keycode.isEventKey(event,'Tab')){if(this.buttonPressed_){this.unpressButton();}// Don't preventDefault for Tab key - we still want to lose focus
if(!keycode.isEventKey(event,'Tab')){event.preventDefault();// Set focus back to the menu button's button
this.menuButton_.focus();}// Up Arrow or Down Arrow also 'press' the button to open the menu
}else if(keycode.isEventKey(event,'Up')||keycode.isEventKey(event,'Down')){if(!this.buttonPressed_){event.preventDefault();this.pressButton();}}}/**
     * Handle a `keydown` event on a sub-menu. The listener for this is added in
     * the constructor.
     *
     * @param {EventTarget~Event} event
     *        Key press event
     *
     * @listens keydown
     */;_proto.handleSubmenuKeyPress=function handleSubmenuKeyPress(event){// Escape or Tab unpress the 'button'
if(keycode.isEventKey(event,'Esc')||keycode.isEventKey(event,'Tab')){if(this.buttonPressed_){this.unpressButton();}// Don't preventDefault for Tab key - we still want to lose focus
if(!keycode.isEventKey(event,'Tab')){event.preventDefault();// Set focus back to the menu button's button
this.menuButton_.focus();}}}/**
     * Put the current `MenuButton` into a pressed state.
     */;_proto.pressButton=function pressButton(){if(this.enabled_){this.buttonPressed_=true;this.menu.show();this.menu.lockShowing();this.menuButton_.el_.setAttribute('aria-expanded','true');// set the focus into the submenu, except on iOS where it is resulting in
// undesired scrolling behavior when the player is in an iframe
if(IS_IOS&&isInFrame()){// Return early so that the menu isn't focused
return;}this.menu.focus();}}/**
     * Take the current `MenuButton` out of a pressed state.
     */;_proto.unpressButton=function unpressButton(){if(this.enabled_){this.buttonPressed_=false;this.menu.unlockShowing();this.menu.hide();this.menuButton_.el_.setAttribute('aria-expanded','false');}}/**
     * Disable the `MenuButton`. Don't allow it to be clicked.
     */;_proto.disable=function disable(){this.unpressButton();this.enabled_=false;this.addClass('vjs-disabled');this.menuButton_.disable();}/**
     * Enable the `MenuButton`. Allow it to be clicked.
     */;_proto.enable=function enable(){this.enabled_=true;this.removeClass('vjs-disabled');this.menuButton_.enable();};return MenuButton;}(Component);Component.registerComponent('MenuButton',MenuButton);/**
   * The base class for buttons that toggle specific  track types (e.g. subtitles).
   *
   * @extends MenuButton
   */var TrackButton=/*#__PURE__*/function(_MenuButton){_inheritsLoose(TrackButton,_MenuButton);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function TrackButton(player,options){var _this;var tracks=options.tracks;_this=_MenuButton.call(this,player,options)||this;if(_this.items.length<=1){_this.hide();}if(!tracks){return _assertThisInitialized(_this);}var updateHandler=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.update);tracks.addEventListener('removetrack',updateHandler);tracks.addEventListener('addtrack',updateHandler);_this.player_.on('ready',updateHandler);_this.player_.on('dispose',function(){tracks.removeEventListener('removetrack',updateHandler);tracks.removeEventListener('addtrack',updateHandler);});return _this;}return TrackButton;}(MenuButton);Component.registerComponent('TrackButton',TrackButton);/**
   * @file menu-keys.js
   *//**
    * All keys used for operation of a menu (`MenuButton`, `Menu`, and `MenuItem`)
    * Note that 'Enter' and 'Space' are not included here (otherwise they would
    * prevent the `MenuButton` and `MenuItem` from being keyboard-clickable)
    * @typedef MenuKeys
    * @array
    */var MenuKeys=['Tab','Esc','Up','Down','Right','Left'];/**
   * The component for a menu item. `<li>`
   *
   * @extends ClickableComponent
   */var MenuItem=/*#__PURE__*/function(_ClickableComponent){_inheritsLoose(MenuItem,_ClickableComponent);/**
     * Creates an instance of the this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options={}]
     *        The key/value store of player options.
     *
     */function MenuItem(player,options){var _this;_this=_ClickableComponent.call(this,player,options)||this;_this.selectable=options.selectable;_this.isSelected_=options.selected||false;_this.multiSelectable=options.multiSelectable;_this.selected(_this.isSelected_);if(_this.selectable){if(_this.multiSelectable){_this.el_.setAttribute('role','menuitemcheckbox');}else{_this.el_.setAttribute('role','menuitemradio');}}else{_this.el_.setAttribute('role','menuitem');}return _this;}/**
     * Create the `MenuItem's DOM element
     *
     * @param {string} [type=li]
     *        Element's node type, not actually used, always set to `li`.
     *
     * @param {Object} [props={}]
     *        An object of properties that should be set on the element
     *
     * @param {Object} [attrs={}]
     *        An object of attributes that should be set on the element
     *
     * @return {Element}
     *         The element that gets created.
     */var _proto=MenuItem.prototype;_proto.createEl=function createEl(type,props,attrs){// The control is textual, not just an icon
this.nonIconControl=true;return _ClickableComponent.prototype.createEl.call(this,'li',assign({className:'vjs-menu-item',innerHTML:"<span class=\"vjs-menu-item-text\">"+this.localize(this.options_.label)+"</span>",tabIndex:-1},props),attrs);}/**
     * Ignore keys which are used by the menu, but pass any other ones up. See
     * {@link ClickableComponent#handleKeyPress} for instances where this is called.
     *
     * @param {EventTarget~Event} event
     *        The `keydown` event that caused this function to be called.
     *
     * @listens keydown
     */;_proto.handleKeyPress=function handleKeyPress(event){if(!MenuKeys.some(function(key){return keycode.isEventKey(event,key);})){// Pass keypress handling up for unused keys
_ClickableComponent.prototype.handleKeyPress.call(this,event);}}/**
     * Any click on a `MenuItem` puts it into the selected state.
     * See {@link ClickableComponent#handleClick} for instances where this is called.
     *
     * @param {EventTarget~Event} event
     *        The `keydown`, `tap`, or `click` event that caused this function to be
     *        called.
     *
     * @listens tap
     * @listens click
     */;_proto.handleClick=function handleClick(event){this.selected(true);}/**
     * Set the state for this menu item as selected or not.
     *
     * @param {boolean} selected
     *        if the menu item is selected or not
     */;_proto.selected=function selected(_selected){if(this.selectable){if(_selected){this.addClass('vjs-selected');this.el_.setAttribute('aria-checked','true');// aria-checked isn't fully supported by browsers/screen readers,
// so indicate selected state to screen reader in the control text.
this.controlText(', selected');this.isSelected_=true;}else{this.removeClass('vjs-selected');this.el_.setAttribute('aria-checked','false');// Indicate un-selected state to screen reader
this.controlText('');this.isSelected_=false;}}};return MenuItem;}(ClickableComponent);Component.registerComponent('MenuItem',MenuItem);/**
   * The specific menu item type for selecting a language within a text track kind
   *
   * @extends MenuItem
   */var TextTrackMenuItem=/*#__PURE__*/function(_MenuItem){_inheritsLoose(TextTrackMenuItem,_MenuItem);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function TextTrackMenuItem(player,options){var _this;var track=options.track;var tracks=player.textTracks();// Modify options for parent MenuItem class's init.
options.label=track.label||track.language||'Unknown';options.selected=track.mode==='showing';_this=_MenuItem.call(this,player,options)||this;_this.track=track;var changeHandler=function changeHandler(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this.handleTracksChange.apply(_assertThisInitialized(_assertThisInitialized(_this)),args);};var selectedLanguageChangeHandler=function selectedLanguageChangeHandler(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this.handleSelectedLanguageChange.apply(_assertThisInitialized(_assertThisInitialized(_this)),args);};player.on(['loadstart','texttrackchange'],changeHandler);tracks.addEventListener('change',changeHandler);tracks.addEventListener('selectedlanguagechange',selectedLanguageChangeHandler);_this.on('dispose',function(){player.off(['loadstart','texttrackchange'],changeHandler);tracks.removeEventListener('change',changeHandler);tracks.removeEventListener('selectedlanguagechange',selectedLanguageChangeHandler);});// iOS7 doesn't dispatch change events to TextTrackLists when an
// associated track's mode changes. Without something like
// Object.observe() (also not present on iOS7), it's not
// possible to detect changes to the mode attribute and polyfill
// the change event. As a poor substitute, we manually dispatch
// change events whenever the controls modify the mode.
if(tracks.onchange===undefined){var event;_this.on(['tap','click'],function(){if(_typeof(window$1.Event)!=='object'){// Android 2.3 throws an Illegal Constructor error for window.Event
try{event=new window$1.Event('change');}catch(err){// continue regardless of error
}}if(!event){event=document.createEvent('Event');event.initEvent('change',true,true);}tracks.dispatchEvent(event);});}// set the default state based on current tracks
_this.handleTracksChange();return _this;}/**
     * This gets called when an `TextTrackMenuItem` is "clicked". See
     * {@link ClickableComponent} for more detailed information on what a click can be.
     *
     * @param {EventTarget~Event} event
     *        The `keydown`, `tap`, or `click` event that caused this function to be
     *        called.
     *
     * @listens tap
     * @listens click
     */var _proto=TextTrackMenuItem.prototype;_proto.handleClick=function handleClick(event){var referenceTrack=this.track;var tracks=this.player_.textTracks();_MenuItem.prototype.handleClick.call(this,event);if(!tracks){return;}// Determine the relevant kind(s) of tracks for this component and filter
// out empty kinds.
var kinds=(referenceTrack.kinds||[referenceTrack.kind]).filter(Boolean);for(var i=0;i<tracks.length;i++){var track=tracks[i];// If the track from the text tracks list is not of the right kind,
// skip it. We do not want to affect tracks of incompatible kind(s).
if(kinds.indexOf(track.kind)===-1){continue;}// If this text track is the component's track and it is not showing,
// set it to showing.
if(track===referenceTrack){if(track.mode!=='showing'){track.mode='showing';}// If this text track is not the component's track and it is not
// disabled, set it to disabled.
}else if(track.mode!=='disabled'){track.mode='disabled';}}}/**
     * Handle text track list change
     *
     * @param {EventTarget~Event} event
     *        The `change` event that caused this function to be called.
     *
     * @listens TextTrackList#change
     */;_proto.handleTracksChange=function handleTracksChange(event){var shouldBeSelected=this.track.mode==='showing';// Prevent redundant selected() calls because they may cause
// screen readers to read the appended control text unnecessarily
if(shouldBeSelected!==this.isSelected_){this.selected(shouldBeSelected);}};_proto.handleSelectedLanguageChange=function handleSelectedLanguageChange(event){if(this.track.mode==='showing'){var selectedLanguage=this.player_.cache_.selectedLanguage;// Don't replace the kind of track across the same language
if(selectedLanguage&&selectedLanguage.enabled&&selectedLanguage.language===this.track.language&&selectedLanguage.kind!==this.track.kind){return;}this.player_.cache_.selectedLanguage={enabled:true,language:this.track.language,kind:this.track.kind};}};_proto.dispose=function dispose(){// remove reference to track object on dispose
this.track=null;_MenuItem.prototype.dispose.call(this);};return TextTrackMenuItem;}(MenuItem);Component.registerComponent('TextTrackMenuItem',TextTrackMenuItem);/**
   * A special menu item for turning of a specific type of text track
   *
   * @extends TextTrackMenuItem
   */var OffTextTrackMenuItem=/*#__PURE__*/function(_TextTrackMenuItem){_inheritsLoose(OffTextTrackMenuItem,_TextTrackMenuItem);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function OffTextTrackMenuItem(player,options){// Create pseudo track info
// Requires options['kind']
options.track={player:player,kind:options.kind,kinds:options.kinds,default:false,mode:'disabled'};if(!options.kinds){options.kinds=[options.kind];}if(options.label){options.track.label=options.label;}else{options.track.label=options.kinds.join(' and ')+' off';}// MenuItem is selectable
options.selectable=true;// MenuItem is NOT multiSelectable (i.e. only one can be marked "selected" at a time)
options.multiSelectable=false;return _TextTrackMenuItem.call(this,player,options)||this;}/**
     * Handle text track change
     *
     * @param {EventTarget~Event} event
     *        The event that caused this function to run
     */var _proto=OffTextTrackMenuItem.prototype;_proto.handleTracksChange=function handleTracksChange(event){var tracks=this.player().textTracks();var shouldBeSelected=true;for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(this.options_.kinds.indexOf(track.kind)>-1&&track.mode==='showing'){shouldBeSelected=false;break;}}// Prevent redundant selected() calls because they may cause
// screen readers to read the appended control text unnecessarily
if(shouldBeSelected!==this.isSelected_){this.selected(shouldBeSelected);}};_proto.handleSelectedLanguageChange=function handleSelectedLanguageChange(event){var tracks=this.player().textTracks();var allHidden=true;for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(['captions','descriptions','subtitles'].indexOf(track.kind)>-1&&track.mode==='showing'){allHidden=false;break;}}if(allHidden){this.player_.cache_.selectedLanguage={enabled:false};}};return OffTextTrackMenuItem;}(TextTrackMenuItem);Component.registerComponent('OffTextTrackMenuItem',OffTextTrackMenuItem);/**
   * The base class for buttons that toggle specific text track types (e.g. subtitles)
   *
   * @extends MenuButton
   */var TextTrackButton=/*#__PURE__*/function(_TrackButton){_inheritsLoose(TextTrackButton,_TrackButton);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options={}]
     *        The key/value store of player options.
     */function TextTrackButton(player,options){if(options===void 0){options={};}options.tracks=player.textTracks();return _TrackButton.call(this,player,options)||this;}/**
     * Create a menu item for each text track
     *
     * @param {TextTrackMenuItem[]} [items=[]]
     *        Existing array of items to use during creation
     *
     * @return {TextTrackMenuItem[]}
     *         Array of menu items that were created
     */var _proto=TextTrackButton.prototype;_proto.createItems=function createItems(items,TrackMenuItem){if(items===void 0){items=[];}if(TrackMenuItem===void 0){TrackMenuItem=TextTrackMenuItem;}// Label is an override for the [track] off label
// USed to localise captions/subtitles
var label;if(this.label_){label=this.label_+" off";}// Add an OFF menu item to turn all tracks off
items.push(new OffTextTrackMenuItem(this.player_,{kinds:this.kinds_,kind:this.kind_,label:label}));this.hideThreshold_+=1;var tracks=this.player_.textTracks();if(!Array.isArray(this.kinds_)){this.kinds_=[this.kind_];}for(var i=0;i<tracks.length;i++){var track=tracks[i];// only add tracks that are of an appropriate kind and have a label
if(this.kinds_.indexOf(track.kind)>-1){var item=new TrackMenuItem(this.player_,{track:track,// MenuItem is selectable
selectable:true,// MenuItem is NOT multiSelectable (i.e. only one can be marked "selected" at a time)
multiSelectable:false});item.addClass("vjs-"+track.kind+"-menu-item");items.push(item);}}return items;};return TextTrackButton;}(TrackButton);Component.registerComponent('TextTrackButton',TextTrackButton);/**
   * The chapter track menu item
   *
   * @extends MenuItem
   */var ChaptersTrackMenuItem=/*#__PURE__*/function(_MenuItem){_inheritsLoose(ChaptersTrackMenuItem,_MenuItem);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function ChaptersTrackMenuItem(player,options){var _this;var track=options.track;var cue=options.cue;var currentTime=player.currentTime();// Modify options for parent MenuItem class's init.
options.selectable=true;options.multiSelectable=false;options.label=cue.text;options.selected=cue.startTime<=currentTime&&currentTime<cue.endTime;_this=_MenuItem.call(this,player,options)||this;_this.track=track;_this.cue=cue;track.addEventListener('cuechange',bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.update));return _this;}/**
     * This gets called when an `ChaptersTrackMenuItem` is "clicked". See
     * {@link ClickableComponent} for more detailed information on what a click can be.
     *
     * @param {EventTarget~Event} [event]
     *        The `keydown`, `tap`, or `click` event that caused this function to be
     *        called.
     *
     * @listens tap
     * @listens click
     */var _proto=ChaptersTrackMenuItem.prototype;_proto.handleClick=function handleClick(event){_MenuItem.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime);}/**
     * Update chapter menu item
     *
     * @param {EventTarget~Event} [event]
     *        The `cuechange` event that caused this function to run.
     *
     * @listens TextTrack#cuechange
     */;_proto.update=function update(event){var cue=this.cue;var currentTime=this.player_.currentTime();// vjs.log(currentTime, cue.startTime);
this.selected(cue.startTime<=currentTime&&currentTime<cue.endTime);};return ChaptersTrackMenuItem;}(MenuItem);Component.registerComponent('ChaptersTrackMenuItem',ChaptersTrackMenuItem);/**
   * The button component for toggling and selecting chapters
   * Chapters act much differently than other text tracks
   * Cues are navigation vs. other tracks of alternative languages
   *
   * @extends TextTrackButton
   */var ChaptersButton=/*#__PURE__*/function(_TextTrackButton){_inheritsLoose(ChaptersButton,_TextTrackButton);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     *
     * @param {Component~ReadyCallback} [ready]
     *        The function to call when this function is ready.
     */function ChaptersButton(player,options,ready){return _TextTrackButton.call(this,player,options,ready)||this;}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */var _proto=ChaptersButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-chapters-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-chapters-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);}/**
     * Update the menu based on the current state of its items.
     *
     * @param {EventTarget~Event} [event]
     *        An event that triggered this function to run.
     *
     * @listens TextTrackList#addtrack
     * @listens TextTrackList#removetrack
     * @listens TextTrackList#change
     */;_proto.update=function update(event){if(!this.track_||event&&(event.type==='addtrack'||event.type==='removetrack')){this.setTrack(this.findChaptersTrack());}_TextTrackButton.prototype.update.call(this);}/**
     * Set the currently selected track for the chapters button.
     *
     * @param {TextTrack} track
     *        The new track to select. Nothing will change if this is the currently selected
     *        track.
     */;_proto.setTrack=function setTrack(track){if(this.track_===track){return;}if(!this.updateHandler_){this.updateHandler_=this.update.bind(this);}// here this.track_ refers to the old track instance
if(this.track_){var remoteTextTrackEl=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(remoteTextTrackEl){remoteTextTrackEl.removeEventListener('load',this.updateHandler_);}this.track_=null;}this.track_=track;// here this.track_ refers to the new track instance
if(this.track_){this.track_.mode='hidden';var _remoteTextTrackEl=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(_remoteTextTrackEl){_remoteTextTrackEl.addEventListener('load',this.updateHandler_);}}}/**
     * Find the track object that is currently in use by this ChaptersButton
     *
     * @return {TextTrack|undefined}
     *         The current track or undefined if none was found.
     */;_proto.findChaptersTrack=function findChaptersTrack(){var tracks=this.player_.textTracks()||[];for(var i=tracks.length-1;i>=0;i--){// We will always choose the last track as our chaptersTrack
var track=tracks[i];if(track.kind===this.kind_){return track;}}}/**
     * Get the caption for the ChaptersButton based on the track label. This will also
     * use the current tracks localized kind as a fallback if a label does not exist.
     *
     * @return {string}
     *         The tracks current label or the localized track kind.
     */;_proto.getMenuCaption=function getMenuCaption(){if(this.track_&&this.track_.label){return this.track_.label;}return this.localize(toTitleCase(this.kind_));}/**
     * Create menu from chapter track
     *
     * @return {Menu}
     *         New menu for the chapter buttons
     */;_proto.createMenu=function createMenu(){this.options_.title=this.getMenuCaption();return _TextTrackButton.prototype.createMenu.call(this);}/**
     * Create a menu item for each text track
     *
     * @return {TextTrackMenuItem[]}
     *         Array of menu items
     */;_proto.createItems=function createItems(){var items=[];if(!this.track_){return items;}var cues=this.track_.cues;if(!cues){return items;}for(var i=0,l=cues.length;i<l;i++){var cue=cues[i];var mi=new ChaptersTrackMenuItem(this.player_,{track:this.track_,cue:cue});items.push(mi);}return items;};return ChaptersButton;}(TextTrackButton);/**
   * `kind` of TextTrack to look for to associate it with this menu.
   *
   * @type {string}
   * @private
   */ChaptersButton.prototype.kind_='chapters';/**
   * The text that should display over the `ChaptersButton`s controls. Added for localization.
   *
   * @type {string}
   * @private
   */ChaptersButton.prototype.controlText_='Chapters';Component.registerComponent('ChaptersButton',ChaptersButton);/**
   * The button component for toggling and selecting descriptions
   *
   * @extends TextTrackButton
   */var DescriptionsButton=/*#__PURE__*/function(_TextTrackButton){_inheritsLoose(DescriptionsButton,_TextTrackButton);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     *
     * @param {Component~ReadyCallback} [ready]
     *        The function to call when this component is ready.
     */function DescriptionsButton(player,options,ready){var _this;_this=_TextTrackButton.call(this,player,options,ready)||this;var tracks=player.textTracks();var changeHandler=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.handleTracksChange);tracks.addEventListener('change',changeHandler);_this.on('dispose',function(){tracks.removeEventListener('change',changeHandler);});return _this;}/**
     * Handle text track change
     *
     * @param {EventTarget~Event} event
     *        The event that caused this function to run
     *
     * @listens TextTrackList#change
     */var _proto=DescriptionsButton.prototype;_proto.handleTracksChange=function handleTracksChange(event){var tracks=this.player().textTracks();var disabled=false;// Check whether a track of a different kind is showing
for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(track.kind!==this.kind_&&track.mode==='showing'){disabled=true;break;}}// If another track is showing, disable this menu button
if(disabled){this.disable();}else{this.enable();}}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */;_proto.buildCSSClass=function buildCSSClass(){return"vjs-descriptions-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-descriptions-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};return DescriptionsButton;}(TextTrackButton);/**
   * `kind` of TextTrack to look for to associate it with this menu.
   *
   * @type {string}
   * @private
   */DescriptionsButton.prototype.kind_='descriptions';/**
   * The text that should display over the `DescriptionsButton`s controls. Added for localization.
   *
   * @type {string}
   * @private
   */DescriptionsButton.prototype.controlText_='Descriptions';Component.registerComponent('DescriptionsButton',DescriptionsButton);/**
   * The button component for toggling and selecting subtitles
   *
   * @extends TextTrackButton
   */var SubtitlesButton=/*#__PURE__*/function(_TextTrackButton){_inheritsLoose(SubtitlesButton,_TextTrackButton);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     *
     * @param {Component~ReadyCallback} [ready]
     *        The function to call when this component is ready.
     */function SubtitlesButton(player,options,ready){return _TextTrackButton.call(this,player,options,ready)||this;}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */var _proto=SubtitlesButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-subtitles-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-subtitles-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};return SubtitlesButton;}(TextTrackButton);/**
   * `kind` of TextTrack to look for to associate it with this menu.
   *
   * @type {string}
   * @private
   */SubtitlesButton.prototype.kind_='subtitles';/**
   * The text that should display over the `SubtitlesButton`s controls. Added for localization.
   *
   * @type {string}
   * @private
   */SubtitlesButton.prototype.controlText_='Subtitles';Component.registerComponent('SubtitlesButton',SubtitlesButton);/**
   * The menu item for caption track settings menu
   *
   * @extends TextTrackMenuItem
   */var CaptionSettingsMenuItem=/*#__PURE__*/function(_TextTrackMenuItem){_inheritsLoose(CaptionSettingsMenuItem,_TextTrackMenuItem);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function CaptionSettingsMenuItem(player,options){var _this;options.track={player:player,kind:options.kind,label:options.kind+' settings',selectable:false,default:false,mode:'disabled'};// CaptionSettingsMenuItem has no concept of 'selected'
options.selectable=false;options.name='CaptionSettingsMenuItem';_this=_TextTrackMenuItem.call(this,player,options)||this;_this.addClass('vjs-texttrack-settings');_this.controlText(', opens '+options.kind+' settings dialog');return _this;}/**
     * This gets called when an `CaptionSettingsMenuItem` is "clicked". See
     * {@link ClickableComponent} for more detailed information on what a click can be.
     *
     * @param {EventTarget~Event} [event]
     *        The `keydown`, `tap`, or `click` event that caused this function to be
     *        called.
     *
     * @listens tap
     * @listens click
     */var _proto=CaptionSettingsMenuItem.prototype;_proto.handleClick=function handleClick(event){this.player().getChild('textTrackSettings').open();};return CaptionSettingsMenuItem;}(TextTrackMenuItem);Component.registerComponent('CaptionSettingsMenuItem',CaptionSettingsMenuItem);/**
   * The button component for toggling and selecting captions
   *
   * @extends TextTrackButton
   */var CaptionsButton=/*#__PURE__*/function(_TextTrackButton){_inheritsLoose(CaptionsButton,_TextTrackButton);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     *
     * @param {Component~ReadyCallback} [ready]
     *        The function to call when this component is ready.
     */function CaptionsButton(player,options,ready){return _TextTrackButton.call(this,player,options,ready)||this;}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */var _proto=CaptionsButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-captions-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-captions-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);}/**
     * Create caption menu items
     *
     * @return {CaptionSettingsMenuItem[]}
     *         The array of current menu items.
     */;_proto.createItems=function createItems(){var items=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild('textTrackSettings')){items.push(new CaptionSettingsMenuItem(this.player_,{kind:this.kind_}));this.hideThreshold_+=1;}return _TextTrackButton.prototype.createItems.call(this,items);};return CaptionsButton;}(TextTrackButton);/**
   * `kind` of TextTrack to look for to associate it with this menu.
   *
   * @type {string}
   * @private
   */CaptionsButton.prototype.kind_='captions';/**
   * The text that should display over the `CaptionsButton`s controls. Added for localization.
   *
   * @type {string}
   * @private
   */CaptionsButton.prototype.controlText_='Captions';Component.registerComponent('CaptionsButton',CaptionsButton);/**
   * SubsCapsMenuItem has an [cc] icon to distinguish captions from subtitles
   * in the SubsCapsMenu.
   *
   * @extends TextTrackMenuItem
   */var SubsCapsMenuItem=/*#__PURE__*/function(_TextTrackMenuItem){_inheritsLoose(SubsCapsMenuItem,_TextTrackMenuItem);function SubsCapsMenuItem(){return _TextTrackMenuItem.apply(this,arguments)||this;}var _proto=SubsCapsMenuItem.prototype;_proto.createEl=function createEl(type,props,attrs){var innerHTML="<span class=\"vjs-menu-item-text\">"+this.localize(this.options_.label);if(this.options_.track.kind==='captions'){innerHTML+="\n        <span aria-hidden=\"true\" class=\"vjs-icon-placeholder\"></span>\n        <span class=\"vjs-control-text\"> "+this.localize('Captions')+"</span>\n      ";}innerHTML+='</span>';var el=_TextTrackMenuItem.prototype.createEl.call(this,type,assign({innerHTML:innerHTML},props),attrs);return el;};return SubsCapsMenuItem;}(TextTrackMenuItem);Component.registerComponent('SubsCapsMenuItem',SubsCapsMenuItem);/**
   * The button component for toggling and selecting captions and/or subtitles
   *
   * @extends TextTrackButton
   */var SubsCapsButton=/*#__PURE__*/function(_TextTrackButton){_inheritsLoose(SubsCapsButton,_TextTrackButton);function SubsCapsButton(player,options){var _this;if(options===void 0){options={};}_this=_TextTrackButton.call(this,player,options)||this;// Although North America uses "captions" in most cases for
// "captions and subtitles" other locales use "subtitles"
_this.label_='subtitles';if(['en','en-us','en-ca','fr-ca'].indexOf(_this.player_.language_)>-1){_this.label_='captions';}_this.menuButton_.controlText(toTitleCase(_this.label_));return _this;}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */var _proto=SubsCapsButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-subs-caps-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-subs-caps-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);}/**
     * Create caption/subtitles menu items
     *
     * @return {CaptionSettingsMenuItem[]}
     *         The array of current menu items.
     */;_proto.createItems=function createItems(){var items=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild('textTrackSettings')){items.push(new CaptionSettingsMenuItem(this.player_,{kind:this.label_}));this.hideThreshold_+=1;}items=_TextTrackButton.prototype.createItems.call(this,items,SubsCapsMenuItem);return items;};return SubsCapsButton;}(TextTrackButton);/**
   * `kind`s of TextTrack to look for to associate it with this menu.
   *
   * @type {array}
   * @private
   */SubsCapsButton.prototype.kinds_=['captions','subtitles'];/**
   * The text that should display over the `SubsCapsButton`s controls.
   *
   *
   * @type {string}
   * @private
   */SubsCapsButton.prototype.controlText_='Subtitles';Component.registerComponent('SubsCapsButton',SubsCapsButton);/**
   * An {@link AudioTrack} {@link MenuItem}
   *
   * @extends MenuItem
   */var AudioTrackMenuItem=/*#__PURE__*/function(_MenuItem){_inheritsLoose(AudioTrackMenuItem,_MenuItem);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function AudioTrackMenuItem(player,options){var _this;var track=options.track;var tracks=player.audioTracks();// Modify options for parent MenuItem class's init.
options.label=track.label||track.language||'Unknown';options.selected=track.enabled;_this=_MenuItem.call(this,player,options)||this;_this.track=track;_this.addClass("vjs-"+track.kind+"-menu-item");var changeHandler=function changeHandler(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this.handleTracksChange.apply(_assertThisInitialized(_assertThisInitialized(_this)),args);};tracks.addEventListener('change',changeHandler);_this.on('dispose',function(){tracks.removeEventListener('change',changeHandler);});return _this;}var _proto=AudioTrackMenuItem.prototype;_proto.createEl=function createEl(type,props,attrs){var innerHTML="<span class=\"vjs-menu-item-text\">"+this.localize(this.options_.label);if(this.options_.track.kind==='main-desc'){innerHTML+="\n        <span aria-hidden=\"true\" class=\"vjs-icon-placeholder\"></span>\n        <span class=\"vjs-control-text\"> "+this.localize('Descriptions')+"</span>\n      ";}innerHTML+='</span>';var el=_MenuItem.prototype.createEl.call(this,type,assign({innerHTML:innerHTML},props),attrs);return el;}/**
     * This gets called when an `AudioTrackMenuItem is "clicked". See {@link ClickableComponent}
     * for more detailed information on what a click can be.
     *
     * @param {EventTarget~Event} [event]
     *        The `keydown`, `tap`, or `click` event that caused this function to be
     *        called.
     *
     * @listens tap
     * @listens click
     */;_proto.handleClick=function handleClick(event){var tracks=this.player_.audioTracks();_MenuItem.prototype.handleClick.call(this,event);for(var i=0;i<tracks.length;i++){var track=tracks[i];track.enabled=track===this.track;}}/**
     * Handle any {@link AudioTrack} change.
     *
     * @param {EventTarget~Event} [event]
     *        The {@link AudioTrackList#change} event that caused this to run.
     *
     * @listens AudioTrackList#change
     */;_proto.handleTracksChange=function handleTracksChange(event){this.selected(this.track.enabled);};return AudioTrackMenuItem;}(MenuItem);Component.registerComponent('AudioTrackMenuItem',AudioTrackMenuItem);/**
   * The base class for buttons that toggle specific {@link AudioTrack} types.
   *
   * @extends TrackButton
   */var AudioTrackButton=/*#__PURE__*/function(_TrackButton){_inheritsLoose(AudioTrackButton,_TrackButton);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options={}]
     *        The key/value store of player options.
     */function AudioTrackButton(player,options){if(options===void 0){options={};}options.tracks=player.audioTracks();return _TrackButton.call(this,player,options)||this;}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */var _proto=AudioTrackButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-audio-button "+_TrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-audio-button "+_TrackButton.prototype.buildWrapperCSSClass.call(this);}/**
     * Create a menu item for each audio track
     *
     * @param {AudioTrackMenuItem[]} [items=[]]
     *        An array of existing menu items to use.
     *
     * @return {AudioTrackMenuItem[]}
     *         An array of menu items
     */;_proto.createItems=function createItems(items){if(items===void 0){items=[];}// if there's only one audio track, there no point in showing it
this.hideThreshold_=1;var tracks=this.player_.audioTracks();for(var i=0;i<tracks.length;i++){var track=tracks[i];items.push(new AudioTrackMenuItem(this.player_,{track:track,// MenuItem is selectable
selectable:true,// MenuItem is NOT multiSelectable (i.e. only one can be marked "selected" at a time)
multiSelectable:false}));}return items;};return AudioTrackButton;}(TrackButton);/**
   * The text that should display over the `AudioTrackButton`s controls. Added for localization.
   *
   * @type {string}
   * @private
   */AudioTrackButton.prototype.controlText_='Audio Track';Component.registerComponent('AudioTrackButton',AudioTrackButton);/**
   * The specific menu item type for selecting a playback rate.
   *
   * @extends MenuItem
   */var PlaybackRateMenuItem=/*#__PURE__*/function(_MenuItem){_inheritsLoose(PlaybackRateMenuItem,_MenuItem);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function PlaybackRateMenuItem(player,options){var _this;var label=options.rate;var rate=parseFloat(label,10);// Modify options for parent MenuItem class's init.
options.label=label;options.selected=rate===1;options.selectable=true;options.multiSelectable=false;_this=_MenuItem.call(this,player,options)||this;_this.label=label;_this.rate=rate;_this.on(player,'ratechange',_this.update);return _this;}/**
     * This gets called when an `PlaybackRateMenuItem` is "clicked". See
     * {@link ClickableComponent} for more detailed information on what a click can be.
     *
     * @param {EventTarget~Event} [event]
     *        The `keydown`, `tap`, or `click` event that caused this function to be
     *        called.
     *
     * @listens tap
     * @listens click
     */var _proto=PlaybackRateMenuItem.prototype;_proto.handleClick=function handleClick(event){_MenuItem.prototype.handleClick.call(this);this.player().playbackRate(this.rate);}/**
     * Update the PlaybackRateMenuItem when the playbackrate changes.
     *
     * @param {EventTarget~Event} [event]
     *        The `ratechange` event that caused this function to run.
     *
     * @listens Player#ratechange
     */;_proto.update=function update(event){this.selected(this.player().playbackRate()===this.rate);};return PlaybackRateMenuItem;}(MenuItem);/**
   * The text that should display over the `PlaybackRateMenuItem`s controls. Added for localization.
   *
   * @type {string}
   * @private
   */PlaybackRateMenuItem.prototype.contentElType='button';Component.registerComponent('PlaybackRateMenuItem',PlaybackRateMenuItem);/**
   * The component for controlling the playback rate.
   *
   * @extends MenuButton
   */var PlaybackRateMenuButton=/*#__PURE__*/function(_MenuButton){_inheritsLoose(PlaybackRateMenuButton,_MenuButton);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of player options.
     */function PlaybackRateMenuButton(player,options){var _this;_this=_MenuButton.call(this,player,options)||this;_this.updateVisibility();_this.updateLabel();_this.on(player,'loadstart',_this.updateVisibility);_this.on(player,'ratechange',_this.updateLabel);return _this;}/**
     * Create the `Component`'s DOM element
     *
     * @return {Element}
     *         The element that was created.
     */var _proto=PlaybackRateMenuButton.prototype;_proto.createEl=function createEl$$1(){var el=_MenuButton.prototype.createEl.call(this);this.labelEl_=createEl('div',{className:'vjs-playback-rate-value',innerHTML:'1x'});el.appendChild(this.labelEl_);return el;};_proto.dispose=function dispose(){this.labelEl_=null;_MenuButton.prototype.dispose.call(this);}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */;_proto.buildCSSClass=function buildCSSClass(){return"vjs-playback-rate "+_MenuButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-playback-rate "+_MenuButton.prototype.buildWrapperCSSClass.call(this);}/**
     * Create the playback rate menu
     *
     * @return {Menu}
     *         Menu object populated with {@link PlaybackRateMenuItem}s
     */;_proto.createMenu=function createMenu(){var menu=new Menu(this.player());var rates=this.playbackRates();if(rates){for(var i=rates.length-1;i>=0;i--){menu.addChild(new PlaybackRateMenuItem(this.player(),{rate:rates[i]+'x'}));}}return menu;}/**
     * Updates ARIA accessibility attributes
     */;_proto.updateARIAAttributes=function updateARIAAttributes(){// Current playback rate
this.el().setAttribute('aria-valuenow',this.player().playbackRate());}/**
     * This gets called when an `PlaybackRateMenuButton` is "clicked". See
     * {@link ClickableComponent} for more detailed information on what a click can be.
     *
     * @param {EventTarget~Event} [event]
     *        The `keydown`, `tap`, or `click` event that caused this function to be
     *        called.
     *
     * @listens tap
     * @listens click
     */;_proto.handleClick=function handleClick(event){// select next rate option
var currentRate=this.player().playbackRate();var rates=this.playbackRates();// this will select first one if the last one currently selected
var newRate=rates[0];for(var i=0;i<rates.length;i++){if(rates[i]>currentRate){newRate=rates[i];break;}}this.player().playbackRate(newRate);}/**
     * Get possible playback rates
     *
     * @return {Array}
     *         All possible playback rates
     */;_proto.playbackRates=function playbackRates(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates;}/**
     * Get whether playback rates is supported by the tech
     * and an array of playback rates exists
     *
     * @return {boolean}
     *         Whether changing playback rate is supported
     */;_proto.playbackRateSupported=function playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0;}/**
     * Hide playback rate controls when they're no playback rate options to select
     *
     * @param {EventTarget~Event} [event]
     *        The event that caused this function to run.
     *
     * @listens Player#loadstart
     */;_proto.updateVisibility=function updateVisibility(event){if(this.playbackRateSupported()){this.removeClass('vjs-hidden');}else{this.addClass('vjs-hidden');}}/**
     * Update button label when rate changed
     *
     * @param {EventTarget~Event} [event]
     *        The event that caused this function to run.
     *
     * @listens Player#ratechange
     */;_proto.updateLabel=function updateLabel(event){if(this.playbackRateSupported()){this.labelEl_.innerHTML=this.player().playbackRate()+'x';}};return PlaybackRateMenuButton;}(MenuButton);/**
   * The text that should display over the `FullscreenToggle`s controls. Added for localization.
   *
   * @type {string}
   * @private
   */PlaybackRateMenuButton.prototype.controlText_='Playback Rate';Component.registerComponent('PlaybackRateMenuButton',PlaybackRateMenuButton);/**
   * Just an empty spacer element that can be used as an append point for plugins, etc.
   * Also can be used to create space between elements when necessary.
   *
   * @extends Component
   */var Spacer=/*#__PURE__*/function(_Component){_inheritsLoose(Spacer,_Component);function Spacer(){return _Component.apply(this,arguments)||this;}var _proto=Spacer.prototype;/**
    * Builds the default DOM `className`.
    *
    * @return {string}
    *         The DOM `className` for this object.
    */_proto.buildCSSClass=function buildCSSClass(){return"vjs-spacer "+_Component.prototype.buildCSSClass.call(this);}/**
     * Create the `Component`'s DOM element
     *
     * @return {Element}
     *         The element that was created.
     */;_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:this.buildCSSClass()});};return Spacer;}(Component);Component.registerComponent('Spacer',Spacer);/**
   * Spacer specifically meant to be used as an insertion point for new plugins, etc.
   *
   * @extends Spacer
   */var CustomControlSpacer=/*#__PURE__*/function(_Spacer){_inheritsLoose(CustomControlSpacer,_Spacer);function CustomControlSpacer(){return _Spacer.apply(this,arguments)||this;}var _proto=CustomControlSpacer.prototype;/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     */_proto.buildCSSClass=function buildCSSClass(){return"vjs-custom-control-spacer "+_Spacer.prototype.buildCSSClass.call(this);}/**
     * Create the `Component`'s DOM element
     *
     * @return {Element}
     *         The element that was created.
     */;_proto.createEl=function createEl(){var el=_Spacer.prototype.createEl.call(this,{className:this.buildCSSClass()});// No-flex/table-cell mode requires there be some content
// in the cell to fill the remaining space of the table.
el.innerHTML="\xA0";return el;};return CustomControlSpacer;}(Spacer);Component.registerComponent('CustomControlSpacer',CustomControlSpacer);/**
   * Container of main controls.
   *
   * @extends Component
   */var ControlBar=/*#__PURE__*/function(_Component){_inheritsLoose(ControlBar,_Component);function ControlBar(){return _Component.apply(this,arguments)||this;}var _proto=ControlBar.prototype;/**
     * Create the `Component`'s DOM element
     *
     * @return {Element}
     *         The element that was created.
     */_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-control-bar',dir:'ltr'});};return ControlBar;}(Component);/**
   * Default options for `ControlBar`
   *
   * @type {Object}
   * @private
   */ControlBar.prototype.options_={children:['playToggle','volumePanel','currentTimeDisplay','timeDivider','durationDisplay','progressControl','liveDisplay','seekToLive','remainingTimeDisplay','customControlSpacer','playbackRateMenuButton','chaptersButton','descriptionsButton','subsCapsButton','audioTrackButton','fullscreenToggle']};Component.registerComponent('ControlBar',ControlBar);/**
   * A display that indicates an error has occurred. This means that the video
   * is unplayable.
   *
   * @extends ModalDialog
   */var ErrorDisplay=/*#__PURE__*/function(_ModalDialog){_inheritsLoose(ErrorDisplay,_ModalDialog);/**
     * Creates an instance of this class.
     *
     * @param  {Player} player
     *         The `Player` that this class should be attached to.
     *
     * @param  {Object} [options]
     *         The key/value store of player options.
     */function ErrorDisplay(player,options){var _this;_this=_ModalDialog.call(this,player,options)||this;_this.on(player,'error',_this.open);return _this;}/**
     * Builds the default DOM `className`.
     *
     * @return {string}
     *         The DOM `className` for this object.
     *
     * @deprecated Since version 5.
     */var _proto=ErrorDisplay.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-error-display "+_ModalDialog.prototype.buildCSSClass.call(this);}/**
     * Gets the localized error message based on the `Player`s error.
     *
     * @return {string}
     *         The `Player`s error message localized or an empty string.
     */;_proto.content=function content(){var error=this.player().error();return error?this.localize(error.message):'';};return ErrorDisplay;}(ModalDialog);/**
   * The default options for an `ErrorDisplay`.
   *
   * @private
   */ErrorDisplay.prototype.options_=mergeOptions(ModalDialog.prototype.options_,{pauseOnOpen:false,fillAlways:true,temporary:false,uncloseable:true});Component.registerComponent('ErrorDisplay',ErrorDisplay);var LOCAL_STORAGE_KEY='vjs-text-track-settings';var COLOR_BLACK=['#000','Black'];var COLOR_BLUE=['#00F','Blue'];var COLOR_CYAN=['#0FF','Cyan'];var COLOR_GREEN=['#0F0','Green'];var COLOR_MAGENTA=['#F0F','Magenta'];var COLOR_RED=['#F00','Red'];var COLOR_WHITE=['#FFF','White'];var COLOR_YELLOW=['#FF0','Yellow'];var OPACITY_OPAQUE=['1','Opaque'];var OPACITY_SEMI=['0.5','Semi-Transparent'];var OPACITY_TRANS=['0','Transparent'];// Configuration for the various <select> elements in the DOM of this component.
//
// Possible keys include:
//
// `default`:
//   The default option index. Only needs to be provided if not zero.
// `parser`:
//   A function which is used to parse the value from the selected option in
//   a customized way.
// `selector`:
//   The selector used to find the associated <select> element.
var selectConfigs={backgroundColor:{selector:'.vjs-bg-color > select',id:'captions-background-color-%s',label:'Color',options:[COLOR_BLACK,COLOR_WHITE,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN]},backgroundOpacity:{selector:'.vjs-bg-opacity > select',id:'captions-background-opacity-%s',label:'Transparency',options:[OPACITY_OPAQUE,OPACITY_SEMI,OPACITY_TRANS]},color:{selector:'.vjs-fg-color > select',id:'captions-foreground-color-%s',label:'Color',options:[COLOR_WHITE,COLOR_BLACK,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN]},edgeStyle:{selector:'.vjs-edge-style > select',id:'%s',label:'Text Edge Style',options:[['none','None'],['raised','Raised'],['depressed','Depressed'],['uniform','Uniform'],['dropshadow','Dropshadow']]},fontFamily:{selector:'.vjs-font-family > select',id:'captions-font-family-%s',label:'Font Family',options:[['proportionalSansSerif','Proportional Sans-Serif'],['monospaceSansSerif','Monospace Sans-Serif'],['proportionalSerif','Proportional Serif'],['monospaceSerif','Monospace Serif'],['casual','Casual'],['script','Script'],['small-caps','Small Caps']]},fontPercent:{selector:'.vjs-font-percent > select',id:'captions-font-size-%s',label:'Font Size',options:[['0.50','50%'],['0.75','75%'],['1.00','100%'],['1.25','125%'],['1.50','150%'],['1.75','175%'],['2.00','200%'],['3.00','300%'],['4.00','400%']],default:2,parser:function parser(v){return v==='1.00'?null:Number(v);}},textOpacity:{selector:'.vjs-text-opacity > select',id:'captions-foreground-opacity-%s',label:'Transparency',options:[OPACITY_OPAQUE,OPACITY_SEMI]},// Options for this object are defined below.
windowColor:{selector:'.vjs-window-color > select',id:'captions-window-color-%s',label:'Color'},// Options for this object are defined below.
windowOpacity:{selector:'.vjs-window-opacity > select',id:'captions-window-opacity-%s',label:'Transparency',options:[OPACITY_TRANS,OPACITY_SEMI,OPACITY_OPAQUE]}};selectConfigs.windowColor.options=selectConfigs.backgroundColor.options;/**
   * Get the actual value of an option.
   *
   * @param  {string} value
   *         The value to get
   *
   * @param  {Function} [parser]
   *         Optional function to adjust the value.
   *
   * @return {Mixed}
   *         - Will be `undefined` if no value exists
   *         - Will be `undefined` if the given value is "none".
   *         - Will be the actual value otherwise.
   *
   * @private
   */function parseOptionValue(value,parser){if(parser){value=parser(value);}if(value&&value!=='none'){return value;}}/**
   * Gets the value of the selected <option> element within a <select> element.
   *
   * @param  {Element} el
   *         the element to look in
   *
   * @param  {Function} [parser]
   *         Optional function to adjust the value.
   *
   * @return {Mixed}
   *         - Will be `undefined` if no value exists
   *         - Will be `undefined` if the given value is "none".
   *         - Will be the actual value otherwise.
   *
   * @private
   */function getSelectedOptionValue(el,parser){var value=el.options[el.options.selectedIndex].value;return parseOptionValue(value,parser);}/**
   * Sets the selected <option> element within a <select> element based on a
   * given value.
   *
   * @param {Element} el
   *        The element to look in.
   *
   * @param {string} value
   *        the property to look on.
   *
   * @param {Function} [parser]
   *        Optional function to adjust the value before comparing.
   *
   * @private
   */function setSelectedOption(el,value,parser){if(!value){return;}for(var i=0;i<el.options.length;i++){if(parseOptionValue(el.options[i].value,parser)===value){el.selectedIndex=i;break;}}}/**
   * Manipulate Text Tracks settings.
   *
   * @extends ModalDialog
   */var TextTrackSettings=/*#__PURE__*/function(_ModalDialog){_inheritsLoose(TextTrackSettings,_ModalDialog);/**
     * Creates an instance of this class.
     *
     * @param {Player} player
     *         The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *         The key/value store of player options.
     */function TextTrackSettings(player,options){var _this;options.temporary=false;_this=_ModalDialog.call(this,player,options)||this;_this.updateDisplay=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.updateDisplay);// fill the modal and pretend we have opened it
_this.fill();_this.hasBeenOpened_=_this.hasBeenFilled_=true;_this.endDialog=createEl('p',{className:'vjs-control-text',textContent:_this.localize('End of dialog window.')});_this.el().appendChild(_this.endDialog);_this.setDefaults();// Grab `persistTextTrackSettings` from the player options if not passed in child options
if(options.persistTextTrackSettings===undefined){_this.options_.persistTextTrackSettings=_this.options_.playerOptions.persistTextTrackSettings;}_this.on(_this.$('.vjs-done-button'),'click',function(){_this.saveSettings();_this.close();});_this.on(_this.$('.vjs-default-button'),'click',function(){_this.setDefaults();_this.updateDisplay();});each(selectConfigs,function(config){_this.on(_this.$(config.selector),'change',_this.updateDisplay);});if(_this.options_.persistTextTrackSettings){_this.restoreSettings();}return _this;}var _proto=TextTrackSettings.prototype;_proto.dispose=function dispose(){this.endDialog=null;_ModalDialog.prototype.dispose.call(this);}/**
     * Create a <select> element with configured options.
     *
     * @param {string} key
     *        Configuration key to use during creation.
     *
     * @return {string}
     *         An HTML string.
     *
     * @private
     */;_proto.createElSelect_=function createElSelect_(key,legendId,type){var _this2=this;if(legendId===void 0){legendId='';}if(type===void 0){type='label';}var config=selectConfigs[key];var id=config.id.replace('%s',this.id_);var selectLabelledbyIds=[legendId,id].join(' ').trim();return["<"+type+" id=\""+id+"\" class=\""+(type==='label'?'vjs-label':'')+"\">",this.localize(config.label),"</"+type+">","<select aria-labelledby=\""+selectLabelledbyIds+"\">"].concat(config.options.map(function(o){var optionId=id+'-'+o[1].replace(/\W+/g,'');return["<option id=\""+optionId+"\" value=\""+o[0]+"\" ","aria-labelledby=\""+selectLabelledbyIds+" "+optionId+"\">",_this2.localize(o[1]),'</option>'].join('');})).concat('</select>').join('');}/**
     * Create foreground color element for the component
     *
     * @return {string}
     *         An HTML string.
     *
     * @private
     */;_proto.createElFgColor_=function createElFgColor_(){var legendId="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">',"<legend id=\""+legendId+"\">",this.localize('Text'),'</legend>',this.createElSelect_('color',legendId),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_('textOpacity',legendId),'</span>','</fieldset>'].join('');}/**
     * Create background color element for the component
     *
     * @return {string}
     *         An HTML string.
     *
     * @private
     */;_proto.createElBgColor_=function createElBgColor_(){var legendId="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">',"<legend id=\""+legendId+"\">",this.localize('Background'),'</legend>',this.createElSelect_('backgroundColor',legendId),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_('backgroundOpacity',legendId),'</span>','</fieldset>'].join('');}/**
     * Create window color element for the component
     *
     * @return {string}
     *         An HTML string.
     *
     * @private
     */;_proto.createElWinColor_=function createElWinColor_(){var legendId="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">',"<legend id=\""+legendId+"\">",this.localize('Window'),'</legend>',this.createElSelect_('windowColor',legendId),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_('windowOpacity',legendId),'</span>','</fieldset>'].join('');}/**
     * Create color elements for the component
     *
     * @return {Element}
     *         The element that was created
     *
     * @private
     */;_proto.createElColors_=function createElColors_(){return createEl('div',{className:'vjs-track-settings-colors',innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join('')});}/**
     * Create font elements for the component
     *
     * @return {Element}
     *         The element that was created.
     *
     * @private
     */;_proto.createElFont_=function createElFont_(){return createEl('div',{className:'vjs-track-settings-font',innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_('fontPercent','','legend'),'</fieldset>','<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_('edgeStyle','','legend'),'</fieldset>','<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_('fontFamily','','legend'),'</fieldset>'].join('')});}/**
     * Create controls for the component
     *
     * @return {Element}
     *         The element that was created.
     *
     * @private
     */;_proto.createElControls_=function createElControls_(){var defaultsDescription=this.localize('restore all settings to the default values');return createEl('div',{className:'vjs-track-settings-controls',innerHTML:["<button type=\"button\" class=\"vjs-default-button\" title=\""+defaultsDescription+"\">",this.localize('Reset'),"<span class=\"vjs-control-text\"> "+defaultsDescription+"</span>",'</button>',"<button type=\"button\" class=\"vjs-done-button\">"+this.localize('Done')+"</button>"].join('')});};_proto.content=function content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()];};_proto.label=function label(){return this.localize('Caption Settings Dialog');};_proto.description=function description(){return this.localize('Beginning of dialog window. Escape will cancel and close the window.');};_proto.buildCSSClass=function buildCSSClass(){return _ModalDialog.prototype.buildCSSClass.call(this)+' vjs-text-track-settings';}/**
     * Gets an object of text track settings (or null).
     *
     * @return {Object}
     *         An object with config values parsed from the DOM or localStorage.
     */;_proto.getValues=function getValues(){var _this3=this;return reduce(selectConfigs,function(accum,config,key){var value=getSelectedOptionValue(_this3.$(config.selector),config.parser);if(value!==undefined){accum[key]=value;}return accum;},{});}/**
     * Sets text track settings from an object of values.
     *
     * @param {Object} values
     *        An object with config values parsed from the DOM or localStorage.
     */;_proto.setValues=function setValues(values){var _this4=this;each(selectConfigs,function(config,key){setSelectedOption(_this4.$(config.selector),values[key],config.parser);});}/**
     * Sets all `<select>` elements to their default values.
     */;_proto.setDefaults=function setDefaults(){var _this5=this;each(selectConfigs,function(config){var index=config.hasOwnProperty('default')?config.default:0;_this5.$(config.selector).selectedIndex=index;});}/**
     * Restore texttrack settings from localStorage
     */;_proto.restoreSettings=function restoreSettings(){var values;try{values=JSON.parse(window$1.localStorage.getItem(LOCAL_STORAGE_KEY));}catch(err){log.warn(err);}if(values){this.setValues(values);}}/**
     * Save text track settings to localStorage
     */;_proto.saveSettings=function saveSettings(){if(!this.options_.persistTextTrackSettings){return;}var values=this.getValues();try{if(Object.keys(values).length){window$1.localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(values));}else{window$1.localStorage.removeItem(LOCAL_STORAGE_KEY);}}catch(err){log.warn(err);}}/**
     * Update display of text track settings
     */;_proto.updateDisplay=function updateDisplay(){var ttDisplay=this.player_.getChild('textTrackDisplay');if(ttDisplay){ttDisplay.updateDisplay();}}/**
     * conditionally blur the element and refocus the captions button
     *
     * @private
     */;_proto.conditionalBlur_=function conditionalBlur_(){this.previouslyActiveEl_=null;this.off(document,'keydown',this.handleKeyDown);var cb=this.player_.controlBar;var subsCapsBtn=cb&&cb.subsCapsButton;var ccBtn=cb&&cb.captionsButton;if(subsCapsBtn){subsCapsBtn.focus();}else if(ccBtn){ccBtn.focus();}};return TextTrackSettings;}(ModalDialog);Component.registerComponent('TextTrackSettings',TextTrackSettings);/**
   * A Resize Manager. It is in charge of triggering `playerresize` on the player in the right conditions.
   *
   * It'll either create an iframe and use a debounced resize handler on it or use the new {@link https://wicg.github.io/ResizeObserver/|ResizeObserver}.
   *
   * If the ResizeObserver is available natively, it will be used. A polyfill can be passed in as an option.
   * If a `playerresize` event is not needed, the ResizeManager component can be removed from the player, see the example below.
   * @example <caption>How to disable the resize manager</caption>
   * const player = videojs('#vid', {
   *   resizeManager: false
   * });
   *
   * @see {@link https://wicg.github.io/ResizeObserver/|ResizeObserver specification}
   *
   * @extends Component
   */var ResizeManager=/*#__PURE__*/function(_Component){_inheritsLoose(ResizeManager,_Component);/**
     * Create the ResizeManager.
     *
     * @param {Object} player
     *        The `Player` that this class should be attached to.
     *
     * @param {Object} [options]
     *        The key/value store of ResizeManager options.
     *
     * @param {Object} [options.ResizeObserver]
     *        A polyfill for ResizeObserver can be passed in here.
     *        If this is set to null it will ignore the native ResizeObserver and fall back to the iframe fallback.
     */function ResizeManager(player,options){var _this;var RESIZE_OBSERVER_AVAILABLE=options.ResizeObserver||window$1.ResizeObserver;// if `null` was passed, we want to disable the ResizeObserver
if(options.ResizeObserver===null){RESIZE_OBSERVER_AVAILABLE=false;}// Only create an element when ResizeObserver isn't available
var options_=mergeOptions({createEl:!RESIZE_OBSERVER_AVAILABLE,reportTouchActivity:false},options);_this=_Component.call(this,player,options_)||this;_this.ResizeObserver=options.ResizeObserver||window$1.ResizeObserver;_this.loadListener_=null;_this.resizeObserver_=null;_this.debouncedHandler_=debounce(function(){_this.resizeHandler();},100,false,_assertThisInitialized(_assertThisInitialized(_this)));if(RESIZE_OBSERVER_AVAILABLE){_this.resizeObserver_=new _this.ResizeObserver(_this.debouncedHandler_);_this.resizeObserver_.observe(player.el());}else{_this.loadListener_=function(){if(!_this.el_||!_this.el_.contentWindow){return;}var debouncedHandler_=_this.debouncedHandler_;var unloadListener_=_this.unloadListener_=function(){off(this,'resize',debouncedHandler_);off(this,'unload',unloadListener_);unloadListener_=null;};// safari and edge can unload the iframe before resizemanager dispose
// we have to dispose of event handlers correctly before that happens
on(_this.el_.contentWindow,'unload',unloadListener_);on(_this.el_.contentWindow,'resize',debouncedHandler_);};_this.one('load',_this.loadListener_);}return _this;}var _proto=ResizeManager.prototype;_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,'iframe',{className:'vjs-resize-manager',tabIndex:-1},{'aria-hidden':'true'});}/**
     * Called when a resize is triggered on the iframe or a resize is observed via the ResizeObserver
     *
     * @fires Player#playerresize
     */;_proto.resizeHandler=function resizeHandler(){/**
       * Called when the player size has changed
       *
       * @event Player#playerresize
       * @type {EventTarget~Event}
       */// make sure player is still around to trigger
// prevents this from causing an error after dispose
if(!this.player_||!this.player_.trigger){return;}this.player_.trigger('playerresize');};_proto.dispose=function dispose(){if(this.debouncedHandler_){this.debouncedHandler_.cancel();}if(this.resizeObserver_){if(this.player_.el()){this.resizeObserver_.unobserve(this.player_.el());}this.resizeObserver_.disconnect();}if(this.loadListener_){this.off('load',this.loadListener_);}if(this.el_&&this.el_.contentWindow&&this.unloadListener_){this.unloadListener_.call(this.el_.contentWindow);}this.ResizeObserver=null;this.resizeObserver=null;this.debouncedHandler_=null;this.loadListener_=null;_Component.prototype.dispose.call(this);};return ResizeManager;}(Component);Component.registerComponent('ResizeManager',ResizeManager);/* track when we are at the live edge, and other helpers for live playback */var LiveTracker=/*#__PURE__*/function(_Component){_inheritsLoose(LiveTracker,_Component);function LiveTracker(player,options){var _this;// LiveTracker does not need an element
var options_=mergeOptions({createEl:false},options);_this=_Component.call(this,player,options_)||this;_this.reset_();_this.on(_this.player_,'durationchange',_this.handleDurationchange);// we don't need to track live playback if the document is hidden,
// also, tracking when the document is hidden can
// cause the CPU to spike and eventually crash the page on IE11.
if(IE_VERSION&&'hidden'in document&&'visibilityState'in document){_this.on(document,'visibilitychange',_this.handleVisibilityChange);}return _this;}var _proto=LiveTracker.prototype;_proto.handleVisibilityChange=function handleVisibilityChange(){if(this.player_.duration()!==Infinity){return;}if(document.hidden){this.stopTracking();}else{this.startTracking();}};_proto.isBehind_=function isBehind_(){// don't report that we are behind until a timeupdate has been seen
if(!this.timeupdateSeen_){return false;}var liveCurrentTime=this.liveCurrentTime();var currentTime=this.player_.currentTime();var seekableIncrement=this.seekableIncrement_;// the live edge window is the amount of seconds away from live
// that a player can be, but still be considered live.
// we add 0.07 because the live tracking happens every 30ms
// and we want some wiggle room for short segment live playback
var liveEdgeWindow=seekableIncrement*2+0.07;// on Android liveCurrentTime can bee Infinity, because seekableEnd
// can be Infinity, so we handle that case.
return liveCurrentTime!==Infinity&&liveCurrentTime-liveEdgeWindow>=currentTime;}// all the functionality for tracking when seek end changes
// and for tracking how far past seek end we should be
;_proto.trackLive_=function trackLive_(){this.pastSeekEnd_=this.pastSeekEnd_;var seekable=this.player_.seekable();// skip undefined seekable
if(!seekable||!seekable.length){return;}var newSeekEnd=this.seekableEnd();// we can only tell if we are behind live, when seekable changes
// once we detect that seekable has changed we check the new seek
// end against current time, with a fudge value of half a second.
if(newSeekEnd!==this.lastSeekEnd_){if(this.lastSeekEnd_){this.seekableIncrement_=Math.abs(newSeekEnd-this.lastSeekEnd_);}this.pastSeekEnd_=0;this.lastSeekEnd_=newSeekEnd;this.trigger('seekableendchange');}this.pastSeekEnd_=this.pastSeekEnd()+0.03;if(this.isBehind_()!==this.behindLiveEdge()){this.behindLiveEdge_=this.isBehind_();this.trigger('liveedgechange');}}/**
     * handle a durationchange event on the player
     * and start/stop tracking accordingly.
     */;_proto.handleDurationchange=function handleDurationchange(){if(this.player_.duration()===Infinity){this.startTracking();}else{this.stopTracking();}}/**
     * start tracking live playback
     */;_proto.startTracking=function startTracking(){var _this2=this;if(this.isTracking()){return;}this.trackingInterval_=this.setInterval(this.trackLive_,30);this.trackLive_();this.on(this.player_,'play',this.trackLive_);this.on(this.player_,'pause',this.trackLive_);this.one(this.player_,'play',this.handlePlay);// this is to prevent showing that we are not live
// before a video starts to play
if(!this.timeupdateSeen_){this.handleTimeupdate=function(){_this2.timeupdateSeen_=true;_this2.handleTimeupdate=null;};this.one(this.player_,'timeupdate',this.handleTimeupdate);}};_proto.handlePlay=function handlePlay(){this.one(this.player_,'timeupdate',this.seekToLiveEdge);}/**
     * Stop tracking, and set all internal variables to
     * their initial value.
     */;_proto.reset_=function reset_(){this.pastSeekEnd_=0;this.lastSeekEnd_=null;this.behindLiveEdge_=null;this.timeupdateSeen_=false;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.seekableIncrement_=12;this.off(this.player_,'play',this.trackLive_);this.off(this.player_,'pause',this.trackLive_);this.off(this.player_,'play',this.handlePlay);this.off(this.player_,'timeupdate',this.seekToLiveEdge);if(this.handleTimeupdate){this.off(this.player_,'timeupdate',this.handleTimeupdate);this.handleTimeupdate=null;}}/**
     * stop tracking live playback
     */;_proto.stopTracking=function stopTracking(){if(!this.isTracking()){return;}this.reset_();}/**
     * A helper to get the player seekable end
     * so that we don't have to null check everywhere
     */;_proto.seekableEnd=function seekableEnd(){var seekable=this.player_.seekable();var seekableEnds=[];var i=seekable?seekable.length:0;while(i--){seekableEnds.push(seekable.end(i));}// grab the furthest seekable end after sorting, or if there are none
// default to Infinity
return seekableEnds.length?seekableEnds.sort()[seekableEnds.length-1]:Infinity;}/**
     * A helper to get the player seekable start
     * so that we don't have to null check everywhere
     */;_proto.seekableStart=function seekableStart(){var seekable=this.player_.seekable();var seekableStarts=[];var i=seekable?seekable.length:0;while(i--){seekableStarts.push(seekable.start(i));}// grab the first seekable start after sorting, or if there are none
// default to 0
return seekableStarts.length?seekableStarts.sort()[0]:0;}/**
     * Get the live time window
     */;_proto.liveWindow=function liveWindow(){var liveCurrentTime=this.liveCurrentTime();if(liveCurrentTime===Infinity){return Infinity;}return liveCurrentTime-this.seekableStart();}/**
     * Determines if the player is live, only checks if this component
     * is tracking live playback or not
     */;_proto.isLive=function isLive(){return this.isTracking();}/**
     * Determines if currentTime is at the live edge and won't fall behind
     * on each seekableendchange
     */;_proto.atLiveEdge=function atLiveEdge(){return!this.behindLiveEdge();}/**
     * get what we expect the live current time to be
     */;_proto.liveCurrentTime=function liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd();}/**
     * Returns how far past seek end we expect current time to be
     */;_proto.pastSeekEnd=function pastSeekEnd(){return this.pastSeekEnd_;}/**
     * If we are currently behind the live edge, aka currentTime will be
     * behind on a seekableendchange
     */;_proto.behindLiveEdge=function behindLiveEdge(){return this.behindLiveEdge_;};_proto.isTracking=function isTracking(){return typeof this.trackingInterval_==='number';}/**
     * Seek to the live edge if we are behind the live edge
     */;_proto.seekToLiveEdge=function seekToLiveEdge(){if(this.atLiveEdge()){return;}this.player_.currentTime(this.liveCurrentTime());if(this.player_.paused()){this.player_.play();}};_proto.dispose=function dispose(){this.stopTracking();_Component.prototype.dispose.call(this);};return LiveTracker;}(Component);Component.registerComponent('LiveTracker',LiveTracker);/**
   * This function is used to fire a sourceset when there is something
   * similar to `mediaEl.load()` being called. It will try to find the source via
   * the `src` attribute and then the `<source>` elements. It will then fire `sourceset`
   * with the source that was found or empty string if we cannot know. If it cannot
   * find a source then `sourceset` will not be fired.
   *
   * @param {Html5} tech
   *        The tech object that sourceset was setup on
   *
   * @return {boolean}
   *         returns false if the sourceset was not fired and true otherwise.
   */var sourcesetLoad=function sourcesetLoad(tech){var el=tech.el();// if `el.src` is set, that source will be loaded.
if(el.hasAttribute('src')){tech.triggerSourceset(el.src);return true;}/**
     * Since there isn't a src property on the media element, source elements will be used for
     * implementing the source selection algorithm. This happens asynchronously and
     * for most cases were there is more than one source we cannot tell what source will
     * be loaded, without re-implementing the source selection algorithm. At this time we are not
     * going to do that. There are three special cases that we do handle here though:
     *
     * 1. If there are no sources, do not fire `sourceset`.
     * 2. If there is only one `<source>` with a `src` property/attribute that is our `src`
     * 3. If there is more than one `<source>` but all of them have the same `src` url.
     *    That will be our src.
     */var sources=tech.$$('source');var srcUrls=[];var src='';// if there are no sources, do not fire sourceset
if(!sources.length){return false;}// only count valid/non-duplicate source elements
for(var i=0;i<sources.length;i++){var url=sources[i].src;if(url&&srcUrls.indexOf(url)===-1){srcUrls.push(url);}}// there were no valid sources
if(!srcUrls.length){return false;}// there is only one valid source element url
// use that
if(srcUrls.length===1){src=srcUrls[0];}tech.triggerSourceset(src);return true;};/**
   * our implementation of an `innerHTML` descriptor for browsers
   * that do not have one.
   */var innerHTMLDescriptorPolyfill=Object.defineProperty({},'innerHTML',{get:function get(){return this.cloneNode(true).innerHTML;},set:function set(v){// make a dummy node to use innerHTML on
var dummy=document.createElement(this.nodeName.toLowerCase());// set innerHTML to the value provided
dummy.innerHTML=v;// make a document fragment to hold the nodes from dummy
var docFrag=document.createDocumentFragment();// copy all of the nodes created by the innerHTML on dummy
// to the document fragment
while(dummy.childNodes.length){docFrag.appendChild(dummy.childNodes[0]);}// remove content
this.innerText='';// now we add all of that html in one by appending the
// document fragment. This is how innerHTML does it.
window$1.Element.prototype.appendChild.call(this,docFrag);// then return the result that innerHTML's setter would
return this.innerHTML;}});/**
   * Get a property descriptor given a list of priorities and the
   * property to get.
   */var getDescriptor=function getDescriptor(priority,prop){var descriptor={};for(var i=0;i<priority.length;i++){descriptor=Object.getOwnPropertyDescriptor(priority[i],prop);if(descriptor&&descriptor.set&&descriptor.get){break;}}descriptor.enumerable=true;descriptor.configurable=true;return descriptor;};var getInnerHTMLDescriptor=function getInnerHTMLDescriptor(tech){return getDescriptor([tech.el(),window$1.HTMLMediaElement.prototype,window$1.Element.prototype,innerHTMLDescriptorPolyfill],'innerHTML');};/**
   * Patches browser internal functions so that we can tell synchronously
   * if a `<source>` was appended to the media element. For some reason this
   * causes a `sourceset` if the the media element is ready and has no source.
   * This happens when:
   * - The page has just loaded and the media element does not have a source.
   * - The media element was emptied of all sources, then `load()` was called.
   *
   * It does this by patching the following functions/properties when they are supported:
   *
   * - `append()` - can be used to add a `<source>` element to the media element
   * - `appendChild()` - can be used to add a `<source>` element to the media element
   * - `insertAdjacentHTML()` -  can be used to add a `<source>` element to the media element
   * - `innerHTML` -  can be used to add a `<source>` element to the media element
   *
   * @param {Html5} tech
   *        The tech object that sourceset is being setup on.
   */var firstSourceWatch=function firstSourceWatch(tech){var el=tech.el();// make sure firstSourceWatch isn't setup twice.
if(el.resetSourceWatch_){return;}var old={};var innerDescriptor=getInnerHTMLDescriptor(tech);var appendWrapper=function appendWrapper(appendFn){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var retval=appendFn.apply(el,args);sourcesetLoad(tech);return retval;};};['append','appendChild','insertAdjacentHTML'].forEach(function(k){if(!el[k]){return;}// store the old function
old[k]=el[k];// call the old function with a sourceset if a source
// was loaded
el[k]=appendWrapper(old[k]);});Object.defineProperty(el,'innerHTML',mergeOptions(innerDescriptor,{set:appendWrapper(innerDescriptor.set)}));el.resetSourceWatch_=function(){el.resetSourceWatch_=null;Object.keys(old).forEach(function(k){el[k]=old[k];});Object.defineProperty(el,'innerHTML',innerDescriptor);};// on the first sourceset, we need to revert our changes
tech.one('sourceset',el.resetSourceWatch_);};/**
   * our implementation of a `src` descriptor for browsers
   * that do not have one.
   */var srcDescriptorPolyfill=Object.defineProperty({},'src',{get:function get(){if(this.hasAttribute('src')){return getAbsoluteURL(window$1.Element.prototype.getAttribute.call(this,'src'));}return'';},set:function set(v){window$1.Element.prototype.setAttribute.call(this,'src',v);return v;}});var getSrcDescriptor=function getSrcDescriptor(tech){return getDescriptor([tech.el(),window$1.HTMLMediaElement.prototype,srcDescriptorPolyfill],'src');};/**
   * setup `sourceset` handling on the `Html5` tech. This function
   * patches the following element properties/functions:
   *
   * - `src` - to determine when `src` is set
   * - `setAttribute()` - to determine when `src` is set
   * - `load()` - this re-triggers the source selection algorithm, and can
   *              cause a sourceset.
   *
   * If there is no source when we are adding `sourceset` support or during a `load()`
   * we also patch the functions listed in `firstSourceWatch`.
   *
   * @param {Html5} tech
   *        The tech to patch
   */var setupSourceset=function setupSourceset(tech){if(!tech.featuresSourceset){return;}var el=tech.el();// make sure sourceset isn't setup twice.
if(el.resetSourceset_){return;}var srcDescriptor=getSrcDescriptor(tech);var oldSetAttribute=el.setAttribute;var oldLoad=el.load;Object.defineProperty(el,'src',mergeOptions(srcDescriptor,{set:function set(v){var retval=srcDescriptor.set.call(el,v);// we use the getter here to get the actual value set on src
tech.triggerSourceset(el.src);return retval;}}));el.setAttribute=function(n,v){var retval=oldSetAttribute.call(el,n,v);if(/src/i.test(n)){tech.triggerSourceset(el.src);}return retval;};el.load=function(){var retval=oldLoad.call(el);// if load was called, but there was no source to fire
// sourceset on. We have to watch for a source append
// as that can trigger a `sourceset` when the media element
// has no source
if(!sourcesetLoad(tech)){tech.triggerSourceset('');firstSourceWatch(tech);}return retval;};if(el.currentSrc){tech.triggerSourceset(el.currentSrc);}else if(!sourcesetLoad(tech)){firstSourceWatch(tech);}el.resetSourceset_=function(){el.resetSourceset_=null;el.load=oldLoad;el.setAttribute=oldSetAttribute;Object.defineProperty(el,'src',srcDescriptor);if(el.resetSourceWatch_){el.resetSourceWatch_();}};};function _templateObject$1(){var data=_taggedTemplateLiteralLoose(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);_templateObject$1=function _templateObject(){return data;};return data;}/**
   * HTML5 Media Controller - Wrapper for HTML5 Media API
   *
   * @mixes Tech~SourceHandlerAdditions
   * @extends Tech
   */var Html5=/*#__PURE__*/function(_Tech){_inheritsLoose(Html5,_Tech);/**
    * Create an instance of this Tech.
    *
    * @param {Object} [options]
    *        The key/value store of player options.
    *
    * @param {Component~ReadyCallback} ready
    *        Callback function to call when the `HTML5` Tech is ready.
    */function Html5(options,ready){var _this;_this=_Tech.call(this,options,ready)||this;var source=options.source;var crossoriginTracks=false;// Set the source if one is provided
// 1) Check if the source is new (if not, we want to keep the original so playback isn't interrupted)
// 2) Check to see if the network state of the tag was failed at init, and if so, reset the source
// anyway so the error gets fired.
if(source&&(_this.el_.currentSrc!==source.src||options.tag&&options.tag.initNetworkState_===3)){_this.setSource(source);}else{_this.handleLateInit_(_this.el_);}// setup sourceset after late sourceset/init
if(options.enableSourceset){_this.setupSourcesetHandling_();}if(_this.el_.hasChildNodes()){var nodes=_this.el_.childNodes;var nodesLength=nodes.length;var removeNodes=[];while(nodesLength--){var node=nodes[nodesLength];var nodeName=node.nodeName.toLowerCase();if(nodeName==='track'){if(!_this.featuresNativeTextTracks){// Empty video tag tracks so the built-in player doesn't use them also.
// This may not be fast enough to stop HTML5 browsers from reading the tags
// so we'll need to turn off any default tracks if we're manually doing
// captions and subtitles. videoElement.textTracks
removeNodes.push(node);}else{// store HTMLTrackElement and TextTrack to remote list
_this.remoteTextTrackEls().addTrackElement_(node);_this.remoteTextTracks().addTrack(node.track);_this.textTracks().addTrack(node.track);if(!crossoriginTracks&&!_this.el_.hasAttribute('crossorigin')&&isCrossOrigin(node.src)){crossoriginTracks=true;}}}}for(var i=0;i<removeNodes.length;i++){_this.el_.removeChild(removeNodes[i]);}}_this.proxyNativeTracks_();if(_this.featuresNativeTextTracks&&crossoriginTracks){log.warn(tsml(_templateObject$1()));}// prevent iOS Safari from disabling metadata text tracks during native playback
_this.restoreMetadataTracksInIOSNativePlayer_();// Determine if native controls should be used
// Our goal should be to get the custom controls on mobile solid everywhere
// so we can remove this all together. Right now this will block custom
// controls on touch enabled laptops like the Chrome Pixel
if((TOUCH_ENABLED||IS_IPHONE||IS_NATIVE_ANDROID)&&options.nativeControlsForTouch===true){_this.setControls(true);}// on iOS, we want to proxy `webkitbeginfullscreen` and `webkitendfullscreen`
// into a `fullscreenchange` event
_this.proxyWebkitFullscreen_();_this.triggerReady();return _this;}/**
     * Dispose of `HTML5` media element and remove all tracks.
     */var _proto=Html5.prototype;_proto.dispose=function dispose(){if(this.el_&&this.el_.resetSourceset_){this.el_.resetSourceset_();}Html5.disposeMediaElement(this.el_);this.options_=null;// tech will handle clearing of the emulated track list
_Tech.prototype.dispose.call(this);}/**
     * Modify the media element so that we can detect when
     * the source is changed. Fires `sourceset` just after the source has changed
     */;_proto.setupSourcesetHandling_=function setupSourcesetHandling_(){setupSourceset(this);}/**
     * When a captions track is enabled in the iOS Safari native player, all other
     * tracks are disabled (including metadata tracks), which nulls all of their
     * associated cue points. This will restore metadata tracks to their pre-fullscreen
     * state in those cases so that cue points are not needlessly lost.
     *
     * @private
     */;_proto.restoreMetadataTracksInIOSNativePlayer_=function restoreMetadataTracksInIOSNativePlayer_(){var textTracks=this.textTracks();var metadataTracksPreFullscreenState;// captures a snapshot of every metadata track's current state
var takeMetadataTrackSnapshot=function takeMetadataTrackSnapshot(){metadataTracksPreFullscreenState=[];for(var i=0;i<textTracks.length;i++){var track=textTracks[i];if(track.kind==='metadata'){metadataTracksPreFullscreenState.push({track:track,storedMode:track.mode});}}};// snapshot each metadata track's initial state, and update the snapshot
// each time there is a track 'change' event
takeMetadataTrackSnapshot();textTracks.addEventListener('change',takeMetadataTrackSnapshot);this.on('dispose',function(){return textTracks.removeEventListener('change',takeMetadataTrackSnapshot);});var restoreTrackMode=function restoreTrackMode(){for(var i=0;i<metadataTracksPreFullscreenState.length;i++){var storedTrack=metadataTracksPreFullscreenState[i];if(storedTrack.track.mode==='disabled'&&storedTrack.track.mode!==storedTrack.storedMode){storedTrack.track.mode=storedTrack.storedMode;}}// we only want this handler to be executed on the first 'change' event
textTracks.removeEventListener('change',restoreTrackMode);};// when we enter fullscreen playback, stop updating the snapshot and
// restore all track modes to their pre-fullscreen state
this.on('webkitbeginfullscreen',function(){textTracks.removeEventListener('change',takeMetadataTrackSnapshot);// remove the listener before adding it just in case it wasn't previously removed
textTracks.removeEventListener('change',restoreTrackMode);textTracks.addEventListener('change',restoreTrackMode);});// start updating the snapshot again after leaving fullscreen
this.on('webkitendfullscreen',function(){// remove the listener before adding it just in case it wasn't previously removed
textTracks.removeEventListener('change',takeMetadataTrackSnapshot);textTracks.addEventListener('change',takeMetadataTrackSnapshot);// remove the restoreTrackMode handler in case it wasn't triggered during fullscreen playback
textTracks.removeEventListener('change',restoreTrackMode);});}/**
     * Attempt to force override of tracks for the given type
     *
     * @param {string} type - Track type to override, possible values include 'Audio',
     * 'Video', and 'Text'.
     * @param {boolean} override - If set to true native audio/video will be overridden,
     * otherwise native audio/video will potentially be used.
     * @private
     */;_proto.overrideNative_=function overrideNative_(type,override){var _this2=this;// If there is no behavioral change don't add/remove listeners
if(override!==this["featuresNative"+type+"Tracks"]){return;}var lowerCaseType=type.toLowerCase();if(this[lowerCaseType+"TracksListeners_"]){Object.keys(this[lowerCaseType+"TracksListeners_"]).forEach(function(eventName){var elTracks=_this2.el()[lowerCaseType+"Tracks"];elTracks.removeEventListener(eventName,_this2[lowerCaseType+"TracksListeners_"][eventName]);});}this["featuresNative"+type+"Tracks"]=!override;this[lowerCaseType+"TracksListeners_"]=null;this.proxyNativeTracksForType_(lowerCaseType);}/**
     * Attempt to force override of native audio tracks.
     *
     * @param {boolean} override - If set to true native audio will be overridden,
     * otherwise native audio will potentially be used.
     */;_proto.overrideNativeAudioTracks=function overrideNativeAudioTracks(override){this.overrideNative_('Audio',override);}/**
     * Attempt to force override of native video tracks.
     *
     * @param {boolean} override - If set to true native video will be overridden,
     * otherwise native video will potentially be used.
     */;_proto.overrideNativeVideoTracks=function overrideNativeVideoTracks(override){this.overrideNative_('Video',override);}/**
     * Proxy native track list events for the given type to our track
     * lists if the browser we are playing in supports that type of track list.
     *
     * @param {string} name - Track type; values include 'audio', 'video', and 'text'
     * @private
     */;_proto.proxyNativeTracksForType_=function proxyNativeTracksForType_(name){var _this3=this;var props=NORMAL[name];var elTracks=this.el()[props.getterName];var techTracks=this[props.getterName]();if(!this["featuresNative"+props.capitalName+"Tracks"]||!elTracks||!elTracks.addEventListener){return;}var listeners={change:function change(e){techTracks.trigger({type:'change',target:techTracks,currentTarget:techTracks,srcElement:techTracks});},addtrack:function addtrack(e){techTracks.addTrack(e.track);},removetrack:function removetrack(e){techTracks.removeTrack(e.track);}};var removeOldTracks=function removeOldTracks(){var removeTracks=[];for(var i=0;i<techTracks.length;i++){var found=false;for(var j=0;j<elTracks.length;j++){if(elTracks[j]===techTracks[i]){found=true;break;}}if(!found){removeTracks.push(techTracks[i]);}}while(removeTracks.length){techTracks.removeTrack(removeTracks.shift());}};this[props.getterName+'Listeners_']=listeners;Object.keys(listeners).forEach(function(eventName){var listener=listeners[eventName];elTracks.addEventListener(eventName,listener);_this3.on('dispose',function(e){return elTracks.removeEventListener(eventName,listener);});});// Remove (native) tracks that are not used anymore
this.on('loadstart',removeOldTracks);this.on('dispose',function(e){return _this3.off('loadstart',removeOldTracks);});}/**
     * Proxy all native track list events to our track lists if the browser we are playing
     * in supports that type of track list.
     *
     * @private
     */;_proto.proxyNativeTracks_=function proxyNativeTracks_(){var _this4=this;NORMAL.names.forEach(function(name){_this4.proxyNativeTracksForType_(name);});}/**
     * Create the `Html5` Tech's DOM element.
     *
     * @return {Element}
     *         The element that gets created.
     */;_proto.createEl=function createEl$$1(){var el=this.options_.tag;// Check if this browser supports moving the element into the box.
// On the iPhone video will break if you move the element,
// So we have to create a brand new element.
// If we ingested the player div, we do not need to move the media element.
if(!el||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){// If the original tag is still there, clone and remove it.
if(el){var clone=el.cloneNode(true);if(el.parentNode){el.parentNode.insertBefore(clone,el);}Html5.disposeMediaElement(el);el=clone;}else{el=document.createElement('video');// determine if native controls should be used
var tagAttributes=this.options_.tag&&getAttributes(this.options_.tag);var attributes=mergeOptions({},tagAttributes);if(!TOUCH_ENABLED||this.options_.nativeControlsForTouch!==true){delete attributes.controls;}setAttributes(el,assign(attributes,{id:this.options_.techId,class:'vjs-tech'}));}el.playerId=this.options_.playerId;}if(typeof this.options_.preload!=='undefined'){setAttribute(el,'preload',this.options_.preload);}// Update specific tag settings, in case they were overridden
// `autoplay` has to be *last* so that `muted` and `playsinline` are present
// when iOS/Safari or other browsers attempt to autoplay.
var settingsAttrs=['loop','muted','playsinline','autoplay'];for(var i=0;i<settingsAttrs.length;i++){var attr=settingsAttrs[i];var value=this.options_[attr];if(typeof value!=='undefined'){if(value){setAttribute(el,attr,attr);}else{removeAttribute(el,attr);}el[attr]=value;}}return el;}/**
     * This will be triggered if the loadstart event has already fired, before videojs was
     * ready. Two known examples of when this can happen are:
     * 1. If we're loading the playback object after it has started loading
     * 2. The media is already playing the (often with autoplay on) then
     *
     * This function will fire another loadstart so that videojs can catchup.
     *
     * @fires Tech#loadstart
     *
     * @return {undefined}
     *         returns nothing.
     */;_proto.handleLateInit_=function handleLateInit_(el){if(el.networkState===0||el.networkState===3){// The video element hasn't started loading the source yet
// or didn't find a source
return;}if(el.readyState===0){// NetworkState is set synchronously BUT loadstart is fired at the
// end of the current stack, usually before setInterval(fn, 0).
// So at this point we know loadstart may have already fired or is
// about to fire, and either way the player hasn't seen it yet.
// We don't want to fire loadstart prematurely here and cause a
// double loadstart so we'll wait and see if it happens between now
// and the next loop, and fire it if not.
// HOWEVER, we also want to make sure it fires before loadedmetadata
// which could also happen between now and the next loop, so we'll
// watch for that also.
var loadstartFired=false;var setLoadstartFired=function setLoadstartFired(){loadstartFired=true;};this.on('loadstart',setLoadstartFired);var triggerLoadstart=function triggerLoadstart(){// We did miss the original loadstart. Make sure the player
// sees loadstart before loadedmetadata
if(!loadstartFired){this.trigger('loadstart');}};this.on('loadedmetadata',triggerLoadstart);this.ready(function(){this.off('loadstart',setLoadstartFired);this.off('loadedmetadata',triggerLoadstart);if(!loadstartFired){// We did miss the original native loadstart. Fire it now.
this.trigger('loadstart');}});return;}// From here on we know that loadstart already fired and we missed it.
// The other readyState events aren't as much of a problem if we double
// them, so not going to go to as much trouble as loadstart to prevent
// that unless we find reason to.
var eventsToTrigger=['loadstart'];// loadedmetadata: newly equal to HAVE_METADATA (1) or greater
eventsToTrigger.push('loadedmetadata');// loadeddata: newly increased to HAVE_CURRENT_DATA (2) or greater
if(el.readyState>=2){eventsToTrigger.push('loadeddata');}// canplay: newly increased to HAVE_FUTURE_DATA (3) or greater
if(el.readyState>=3){eventsToTrigger.push('canplay');}// canplaythrough: newly equal to HAVE_ENOUGH_DATA (4)
if(el.readyState>=4){eventsToTrigger.push('canplaythrough');}// We still need to give the player time to add event listeners
this.ready(function(){eventsToTrigger.forEach(function(type){this.trigger(type);},this);});}/**
     * Set current time for the `HTML5` tech.
     *
     * @param {number} seconds
     *        Set the current time of the media to this.
     */;_proto.setCurrentTime=function setCurrentTime(seconds){try{this.el_.currentTime=seconds;}catch(e){log(e,'Video is not ready. (Video.js)');// this.warning(VideoJS.warnings.videoNotReady);
}}/**
     * Get the current duration of the HTML5 media element.
     *
     * @return {number}
     *         The duration of the media or 0 if there is no duration.
     */;_proto.duration=function duration(){var _this5=this;// Android Chrome will report duration as Infinity for VOD HLS until after
// playback has started, which triggers the live display erroneously.
// Return NaN if playback has not started and trigger a durationupdate once
// the duration can be reliably known.
if(this.el_.duration===Infinity&&IS_ANDROID&&IS_CHROME&&this.el_.currentTime===0){// Wait for the first `timeupdate` with currentTime > 0 - there may be
// several with 0
var checkProgress=function checkProgress(){if(_this5.el_.currentTime>0){// Trigger durationchange for genuinely live video
if(_this5.el_.duration===Infinity){_this5.trigger('durationchange');}_this5.off('timeupdate',checkProgress);}};this.on('timeupdate',checkProgress);return NaN;}return this.el_.duration||NaN;}/**
     * Get the current width of the HTML5 media element.
     *
     * @return {number}
     *         The width of the HTML5 media element.
     */;_proto.width=function width(){return this.el_.offsetWidth;}/**
     * Get the current height of the HTML5 media element.
     *
     * @return {number}
     *         The height of the HTML5 media element.
     */;_proto.height=function height(){return this.el_.offsetHeight;}/**
     * Proxy iOS `webkitbeginfullscreen` and `webkitendfullscreen` into
     * `fullscreenchange` event.
     *
     * @private
     * @fires fullscreenchange
     * @listens webkitendfullscreen
     * @listens webkitbeginfullscreen
     * @listens webkitbeginfullscreen
     */;_proto.proxyWebkitFullscreen_=function proxyWebkitFullscreen_(){var _this6=this;if(!('webkitDisplayingFullscreen'in this.el_)){return;}var endFn=function endFn(){this.trigger('fullscreenchange',{isFullscreen:false});};var beginFn=function beginFn(){if('webkitPresentationMode'in this.el_&&this.el_.webkitPresentationMode!=='picture-in-picture'){this.one('webkitendfullscreen',endFn);this.trigger('fullscreenchange',{isFullscreen:true});}};this.on('webkitbeginfullscreen',beginFn);this.on('dispose',function(){_this6.off('webkitbeginfullscreen',beginFn);_this6.off('webkitendfullscreen',endFn);});}/**
     * Check if fullscreen is supported on the current playback device.
     *
     * @return {boolean}
     *         - True if fullscreen is supported.
     *         - False if fullscreen is not supported.
     */;_proto.supportsFullScreen=function supportsFullScreen(){if(typeof this.el_.webkitEnterFullScreen==='function'){var userAgent=window$1.navigator&&window$1.navigator.userAgent||'';// Seems to be broken in Chromium/Chrome && Safari in Leopard
if(/Android/.test(userAgent)||!/Chrome|Mac OS X 10.5/.test(userAgent)){return true;}}return false;}/**
     * Request that the `HTML5` Tech enter fullscreen.
     */;_proto.enterFullScreen=function enterFullScreen(){var video=this.el_;if(video.paused&&video.networkState<=video.HAVE_METADATA){// attempt to prime the video element for programmatic access
// this isn't necessary on the desktop but shouldn't hurt
this.el_.play();// playing and pausing synchronously during the transition to fullscreen
// can get iOS ~6.1 devices into a play/pause loop
this.setTimeout(function(){video.pause();video.webkitEnterFullScreen();},0);}else{video.webkitEnterFullScreen();}}/**
     * Request that the `HTML5` Tech exit fullscreen.
     */;_proto.exitFullScreen=function exitFullScreen(){this.el_.webkitExitFullScreen();}/**
     * A getter/setter for the `Html5` Tech's source object.
     * > Note: Please use {@link Html5#setSource}
     *
     * @param {Tech~SourceObject} [src]
     *        The source object you want to set on the `HTML5` techs element.
     *
     * @return {Tech~SourceObject|undefined}
     *         - The current source object when a source is not passed in.
     *         - undefined when setting
     *
     * @deprecated Since version 5.
     */;_proto.src=function src(_src){if(_src===undefined){return this.el_.src;}// Setting src through `src` instead of `setSrc` will be deprecated
this.setSrc(_src);}/**
     * Reset the tech by removing all sources and then calling
     * {@link Html5.resetMediaElement}.
     */;_proto.reset=function reset(){Html5.resetMediaElement(this.el_);}/**
     * Get the current source on the `HTML5` Tech. Falls back to returning the source from
     * the HTML5 media element.
     *
     * @return {Tech~SourceObject}
     *         The current source object from the HTML5 tech. With a fallback to the
     *         elements source.
     */;_proto.currentSrc=function currentSrc(){if(this.currentSource_){return this.currentSource_.src;}return this.el_.currentSrc;}/**
     * Set controls attribute for the HTML5 media Element.
     *
     * @param {string} val
     *        Value to set the controls attribute to
     */;_proto.setControls=function setControls(val){this.el_.controls=!!val;}/**
     * Create and returns a remote {@link TextTrack} object.
     *
     * @param {string} kind
     *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata)
     *
     * @param {string} [label]
     *        Label to identify the text track
     *
     * @param {string} [language]
     *        Two letter language abbreviation
     *
     * @return {TextTrack}
     *         The TextTrack that gets created.
     */;_proto.addTextTrack=function addTextTrack(kind,label,language){if(!this.featuresNativeTextTracks){return _Tech.prototype.addTextTrack.call(this,kind,label,language);}return this.el_.addTextTrack(kind,label,language);}/**
     * Creates either native TextTrack or an emulated TextTrack depending
     * on the value of `featuresNativeTextTracks`
     *
     * @param {Object} options
     *        The object should contain the options to initialize the TextTrack with.
     *
     * @param {string} [options.kind]
     *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata).
     *
     * @param {string} [options.label]
     *        Label to identify the text track
     *
     * @param {string} [options.language]
     *        Two letter language abbreviation.
     *
     * @param {boolean} [options.default]
     *        Default this track to on.
     *
     * @param {string} [options.id]
     *        The internal id to assign this track.
     *
     * @param {string} [options.src]
     *        A source url for the track.
     *
     * @return {HTMLTrackElement}
     *         The track element that gets created.
     */;_proto.createRemoteTextTrack=function createRemoteTextTrack(options){if(!this.featuresNativeTextTracks){return _Tech.prototype.createRemoteTextTrack.call(this,options);}var htmlTrackElement=document.createElement('track');if(options.kind){htmlTrackElement.kind=options.kind;}if(options.label){htmlTrackElement.label=options.label;}if(options.language||options.srclang){htmlTrackElement.srclang=options.language||options.srclang;}if(options.default){htmlTrackElement.default=options.default;}if(options.id){htmlTrackElement.id=options.id;}if(options.src){htmlTrackElement.src=options.src;}return htmlTrackElement;}/**
     * Creates a remote text track object and returns an html track element.
     *
     * @param {Object} options The object should contain values for
     * kind, language, label, and src (location of the WebVTT file)
     * @param {boolean} [manualCleanup=true] if set to false, the TextTrack will be
     * automatically removed from the video element whenever the source changes
     * @return {HTMLTrackElement} An Html Track Element.
     * This can be an emulated {@link HTMLTrackElement} or a native one.
     * @deprecated The default value of the "manualCleanup" parameter will default
     * to "false" in upcoming versions of Video.js
     */;_proto.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){var htmlTrackElement=_Tech.prototype.addRemoteTextTrack.call(this,options,manualCleanup);if(this.featuresNativeTextTracks){this.el().appendChild(htmlTrackElement);}return htmlTrackElement;}/**
     * Remove remote `TextTrack` from `TextTrackList` object
     *
     * @param {TextTrack} track
     *        `TextTrack` object to remove
     */;_proto.removeRemoteTextTrack=function removeRemoteTextTrack(track){_Tech.prototype.removeRemoteTextTrack.call(this,track);if(this.featuresNativeTextTracks){var tracks=this.$$('track');var i=tracks.length;while(i--){if(track===tracks[i]||track===tracks[i].track){this.el().removeChild(tracks[i]);}}}}/**
     * Gets available media playback quality metrics as specified by the W3C's Media
     * Playback Quality API.
     *
     * @see [Spec]{@link https://wicg.github.io/media-playback-quality}
     *
     * @return {Object}
     *         An object with supported media playback quality metrics
     */;_proto.getVideoPlaybackQuality=function getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality==='function'){return this.el().getVideoPlaybackQuality();}var videoPlaybackQuality={};if(typeof this.el().webkitDroppedFrameCount!=='undefined'&&typeof this.el().webkitDecodedFrameCount!=='undefined'){videoPlaybackQuality.droppedVideoFrames=this.el().webkitDroppedFrameCount;videoPlaybackQuality.totalVideoFrames=this.el().webkitDecodedFrameCount;}if(window$1.performance&&typeof window$1.performance.now==='function'){videoPlaybackQuality.creationTime=window$1.performance.now();}else if(window$1.performance&&window$1.performance.timing&&typeof window$1.performance.timing.navigationStart==='number'){videoPlaybackQuality.creationTime=window$1.Date.now()-window$1.performance.timing.navigationStart;}return videoPlaybackQuality;};return Html5;}(Tech);/* HTML5 Support Testing ---------------------------------------------------- */if(isReal()){/**
     * Element for testing browser HTML5 media capabilities
     *
     * @type {Element}
     * @constant
     * @private
     */Html5.TEST_VID=document.createElement('video');var track=document.createElement('track');track.kind='captions';track.srclang='en';track.label='English';Html5.TEST_VID.appendChild(track);}/**
   * Check if HTML5 media is supported by this browser/device.
   *
   * @return {boolean}
   *         - True if HTML5 media is supported.
   *         - False if HTML5 media is not supported.
   */Html5.isSupported=function(){// IE with no Media Player is a LIAR! (#984)
try{Html5.TEST_VID.volume=0.5;}catch(e){return false;}return!!(Html5.TEST_VID&&Html5.TEST_VID.canPlayType);};/**
   * Check if the tech can support the given type
   *
   * @param {string} type
   *        The mimetype to check
   * @return {string} 'probably', 'maybe', or '' (empty string)
   */Html5.canPlayType=function(type){return Html5.TEST_VID.canPlayType(type);};/**
   * Check if the tech can support the given source
   *
   * @param {Object} srcObj
   *        The source object
   * @param {Object} options
   *        The options passed to the tech
   * @return {string} 'probably', 'maybe', or '' (empty string)
   */Html5.canPlaySource=function(srcObj,options){return Html5.canPlayType(srcObj.type);};/**
   * Check if the volume can be changed in this browser/device.
   * Volume cannot be changed in a lot of mobile devices.
   * Specifically, it can't be changed from 1 on iOS.
   *
   * @return {boolean}
   *         - True if volume can be controlled
   *         - False otherwise
   */Html5.canControlVolume=function(){// IE will error if Windows Media Player not installed #3315
try{var volume=Html5.TEST_VID.volume;Html5.TEST_VID.volume=volume/2+0.1;return volume!==Html5.TEST_VID.volume;}catch(e){return false;}};/**
   * Check if the volume can be muted in this browser/device.
   * Some devices, e.g. iOS, don't allow changing volume
   * but permits muting/unmuting.
   *
   * @return {bolean}
   *      - True if volume can be muted
   *      - False otherwise
   */Html5.canMuteVolume=function(){try{var muted=Html5.TEST_VID.muted;// in some versions of iOS muted property doesn't always
// work, so we want to set both property and attribute
Html5.TEST_VID.muted=!muted;if(Html5.TEST_VID.muted){setAttribute(Html5.TEST_VID,'muted','muted');}else{removeAttribute(Html5.TEST_VID,'muted','muted');}return muted!==Html5.TEST_VID.muted;}catch(e){return false;}};/**
   * Check if the playback rate can be changed in this browser/device.
   *
   * @return {boolean}
   *         - True if playback rate can be controlled
   *         - False otherwise
   */Html5.canControlPlaybackRate=function(){// Playback rate API is implemented in Android Chrome, but doesn't do anything
// https://github.com/videojs/video.js/issues/3180
if(IS_ANDROID&&IS_CHROME&&CHROME_VERSION<58){return false;}// IE will error if Windows Media Player not installed #3315
try{var playbackRate=Html5.TEST_VID.playbackRate;Html5.TEST_VID.playbackRate=playbackRate/2+0.1;return playbackRate!==Html5.TEST_VID.playbackRate;}catch(e){return false;}};/**
   * Check if we can override a video/audio elements attributes, with
   * Object.defineProperty.
   *
   * @return {boolean}
   *         - True if builtin attributes can be overridden
   *         - False otherwise
   */Html5.canOverrideAttributes=function(){// if we cannot overwrite the src/innerHTML property, there is no support
// iOS 7 safari for instance cannot do this.
try{var noop=function noop(){};Object.defineProperty(document.createElement('video'),'src',{get:noop,set:noop});Object.defineProperty(document.createElement('audio'),'src',{get:noop,set:noop});Object.defineProperty(document.createElement('video'),'innerHTML',{get:noop,set:noop});Object.defineProperty(document.createElement('audio'),'innerHTML',{get:noop,set:noop});}catch(e){return false;}return true;};/**
   * Check to see if native `TextTrack`s are supported by this browser/device.
   *
   * @return {boolean}
   *         - True if native `TextTrack`s are supported.
   *         - False otherwise
   */Html5.supportsNativeTextTracks=function(){return IS_ANY_SAFARI||IS_IOS&&IS_CHROME;};/**
   * Check to see if native `VideoTrack`s are supported by this browser/device
   *
   * @return {boolean}
   *        - True if native `VideoTrack`s are supported.
   *        - False otherwise
   */Html5.supportsNativeVideoTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.videoTracks);};/**
   * Check to see if native `AudioTrack`s are supported by this browser/device
   *
   * @return {boolean}
   *        - True if native `AudioTrack`s are supported.
   *        - False otherwise
   */Html5.supportsNativeAudioTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.audioTracks);};/**
   * An array of events available on the Html5 tech.
   *
   * @private
   * @type {Array}
   */Html5.Events=['loadstart','suspend','abort','error','emptied','stalled','loadedmetadata','loadeddata','canplay','canplaythrough','playing','waiting','seeking','seeked','ended','durationchange','timeupdate','progress','play','pause','ratechange','resize','volumechange'];/**
   * Boolean indicating whether the `Tech` supports volume control.
   *
   * @type {boolean}
   * @default {@link Html5.canControlVolume}
   */Html5.prototype.featuresVolumeControl=Html5.canControlVolume();/**
   * Boolean indicating whether the `Tech` supports muting volume.
   *
   * @type {bolean}
   * @default {@link Html5.canMuteVolume}
   */Html5.prototype.featuresMuteControl=Html5.canMuteVolume();/**
   * Boolean indicating whether the `Tech` supports changing the speed at which the media
   * plays. Examples:
   *   - Set player to play 2x (twice) as fast
   *   - Set player to play 0.5x (half) as fast
   *
   * @type {boolean}
   * @default {@link Html5.canControlPlaybackRate}
   */Html5.prototype.featuresPlaybackRate=Html5.canControlPlaybackRate();/**
   * Boolean indicating whether the `Tech` supports the `sourceset` event.
   *
   * @type {boolean}
   * @default
   */Html5.prototype.featuresSourceset=Html5.canOverrideAttributes();/**
   * Boolean indicating whether the `HTML5` tech currently supports the media element
   * moving in the DOM. iOS breaks if you move the media element, so this is set this to
   * false there. Everywhere else this should be true.
   *
   * @type {boolean}
   * @default
   */Html5.prototype.movingMediaElementInDOM=!IS_IOS;// TODO: Previous comment: No longer appears to be used. Can probably be removed.
//       Is this true?
/**
   * Boolean indicating whether the `HTML5` tech currently supports automatic media resize
   * when going into fullscreen.
   *
   * @type {boolean}
   * @default
   */Html5.prototype.featuresFullscreenResize=true;/**
   * Boolean indicating whether the `HTML5` tech currently supports the progress event.
   * If this is false, manual `progress` events will be triggered instead.
   *
   * @type {boolean}
   * @default
   */Html5.prototype.featuresProgressEvents=true;/**
   * Boolean indicating whether the `HTML5` tech currently supports the timeupdate event.
   * If this is false, manual `timeupdate` events will be triggered instead.
   *
   * @default
   */Html5.prototype.featuresTimeupdateEvents=true;/**
   * Boolean indicating whether the `HTML5` tech currently supports native `TextTrack`s.
   *
   * @type {boolean}
   * @default {@link Html5.supportsNativeTextTracks}
   */Html5.prototype.featuresNativeTextTracks=Html5.supportsNativeTextTracks();/**
   * Boolean indicating whether the `HTML5` tech currently supports native `VideoTrack`s.
   *
   * @type {boolean}
   * @default {@link Html5.supportsNativeVideoTracks}
   */Html5.prototype.featuresNativeVideoTracks=Html5.supportsNativeVideoTracks();/**
   * Boolean indicating whether the `HTML5` tech currently supports native `AudioTrack`s.
   *
   * @type {boolean}
   * @default {@link Html5.supportsNativeAudioTracks}
   */Html5.prototype.featuresNativeAudioTracks=Html5.supportsNativeAudioTracks();// HTML5 Feature detection and Device Fixes --------------------------------- //
var canPlayType=Html5.TEST_VID&&Html5.TEST_VID.constructor.prototype.canPlayType;var mpegurlRE=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;Html5.patchCanPlayType=function(){// Android 4.0 and above can play HLS to some extent but it reports being unable to do so
// Firefox and Chrome report correctly
if(ANDROID_VERSION>=4.0&&!IS_FIREFOX&&!IS_CHROME){Html5.TEST_VID.constructor.prototype.canPlayType=function(type){if(type&&mpegurlRE.test(type)){return'maybe';}return canPlayType.call(this,type);};}};Html5.unpatchCanPlayType=function(){var r=Html5.TEST_VID.constructor.prototype.canPlayType;Html5.TEST_VID.constructor.prototype.canPlayType=canPlayType;return r;};// by default, patch the media element
Html5.patchCanPlayType();Html5.disposeMediaElement=function(el){if(!el){return;}if(el.parentNode){el.parentNode.removeChild(el);}// remove any child track or source nodes to prevent their loading
while(el.hasChildNodes()){el.removeChild(el.firstChild);}// remove any src reference. not setting `src=''` because that causes a warning
// in firefox
el.removeAttribute('src');// force the media element to update its loading state by calling load()
// however IE on Windows 7N has a bug that throws an error so need a try/catch (#793)
if(typeof el.load==='function'){// wrapping in an iife so it's not deoptimized (#1060#discussion_r10324473)
(function(){try{el.load();}catch(e){// not supported
}})();}};Html5.resetMediaElement=function(el){if(!el){return;}var sources=el.querySelectorAll('source');var i=sources.length;while(i--){el.removeChild(sources[i]);}// remove any src reference.
// not setting `src=''` because that throws an error
el.removeAttribute('src');if(typeof el.load==='function'){// wrapping in an iife so it's not deoptimized (#1060#discussion_r10324473)
(function(){try{el.load();}catch(e){// satisfy linter
}})();}};/* Native HTML5 element property wrapping ----------------------------------- */// Wrap native boolean attributes with getters that check both property and attribute
// The list is as followed:
// muted, defaultMuted, autoplay, controls, loop, playsinline
[/**
   * Get the value of `muted` from the media element. `muted` indicates
   * that the volume for the media should be set to silent. This does not actually change
   * the `volume` attribute.
   *
   * @method Html5#muted
   * @return {boolean}
   *         - True if the value of `volume` should be ignored and the audio set to silent.
   *         - False if the value of `volume` should be used.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-muted}
   */'muted',/**
   * Get the value of `defaultMuted` from the media element. `defaultMuted` indicates
   * whether the media should start muted or not. Only changes the default state of the
   * media. `muted` and `defaultMuted` can have different values. {@link Html5#muted} indicates the
   * current state.
   *
   * @method Html5#defaultMuted
   * @return {boolean}
   *         - The value of `defaultMuted` from the media element.
   *         - True indicates that the media should start muted.
   *         - False indicates that the media should not start muted
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-defaultmuted}
   */'defaultMuted',/**
   * Get the value of `autoplay` from the media element. `autoplay` indicates
   * that the media should start to play as soon as the page is ready.
   *
   * @method Html5#autoplay
   * @return {boolean}
   *         - The value of `autoplay` from the media element.
   *         - True indicates that the media should start as soon as the page loads.
   *         - False indicates that the media should not start as soon as the page loads.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-autoplay}
   */'autoplay',/**
   * Get the value of `controls` from the media element. `controls` indicates
   * whether the native media controls should be shown or hidden.
   *
   * @method Html5#controls
   * @return {boolean}
   *         - The value of `controls` from the media element.
   *         - True indicates that native controls should be showing.
   *         - False indicates that native controls should be hidden.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-controls}
   */'controls',/**
   * Get the value of `loop` from the media element. `loop` indicates
   * that the media should return to the start of the media and continue playing once
   * it reaches the end.
   *
   * @method Html5#loop
   * @return {boolean}
   *         - The value of `loop` from the media element.
   *         - True indicates that playback should seek back to start once
   *           the end of a media is reached.
   *         - False indicates that playback should not loop back to the start when the
   *           end of the media is reached.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-loop}
   */'loop',/**
   * Get the value of `playsinline` from the media element. `playsinline` indicates
   * to the browser that non-fullscreen playback is preferred when fullscreen
   * playback is the native default, such as in iOS Safari.
   *
   * @method Html5#playsinline
   * @return {boolean}
   *         - The value of `playsinline` from the media element.
   *         - True indicates that the media should play inline.
   *         - False indicates that the media should not play inline.
   *
   * @see [Spec]{@link https://html.spec.whatwg.org/#attr-video-playsinline}
   */'playsinline'].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop]||this.el_.hasAttribute(prop);};});// Wrap native boolean attributes with setters that set both property and attribute
// The list is as followed:
// setMuted, setDefaultMuted, setAutoplay, setLoop, setPlaysinline
// setControls is special-cased above
[/**
   * Set the value of `muted` on the media element. `muted` indicates that the current
   * audio level should be silent.
   *
   * @method Html5#setMuted
   * @param {boolean} muted
   *        - True if the audio should be set to silent
   *        - False otherwise
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-muted}
   */'muted',/**
   * Set the value of `defaultMuted` on the media element. `defaultMuted` indicates that the current
   * audio level should be silent, but will only effect the muted level on intial playback..
   *
   * @method Html5.prototype.setDefaultMuted
   * @param {boolean} defaultMuted
   *        - True if the audio should be set to silent
   *        - False otherwise
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-defaultmuted}
   */'defaultMuted',/**
   * Set the value of `autoplay` on the media element. `autoplay` indicates
   * that the media should start to play as soon as the page is ready.
   *
   * @method Html5#setAutoplay
   * @param {boolean} autoplay
   *         - True indicates that the media should start as soon as the page loads.
   *         - False indicates that the media should not start as soon as the page loads.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-autoplay}
   */'autoplay',/**
   * Set the value of `loop` on the media element. `loop` indicates
   * that the media should return to the start of the media and continue playing once
   * it reaches the end.
   *
   * @method Html5#setLoop
   * @param {boolean} loop
   *         - True indicates that playback should seek back to start once
   *           the end of a media is reached.
   *         - False indicates that playback should not loop back to the start when the
   *           end of the media is reached.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-loop}
   */'loop',/**
   * Set the value of `playsinline` from the media element. `playsinline` indicates
   * to the browser that non-fullscreen playback is preferred when fullscreen
   * playback is the native default, such as in iOS Safari.
   *
   * @method Html5#setPlaysinline
   * @param {boolean} playsinline
   *         - True indicates that the media should play inline.
   *         - False indicates that the media should not play inline.
   *
   * @see [Spec]{@link https://html.spec.whatwg.org/#attr-video-playsinline}
   */'playsinline'].forEach(function(prop){Html5.prototype['set'+toTitleCase(prop)]=function(v){this.el_[prop]=v;if(v){this.el_.setAttribute(prop,prop);}else{this.el_.removeAttribute(prop);}};});// Wrap native properties with a getter
// The list is as followed
// paused, currentTime, buffered, volume, poster, preload, error, seeking
// seekable, ended, playbackRate, defaultPlaybackRate, played, networkState
// readyState, videoWidth, videoHeight
[/**
   * Get the value of `paused` from the media element. `paused` indicates whether the media element
   * is currently paused or not.
   *
   * @method Html5#paused
   * @return {boolean}
   *         The value of `paused` from the media element.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-paused}
   */'paused',/**
   * Get the value of `currentTime` from the media element. `currentTime` indicates
   * the current second that the media is at in playback.
   *
   * @method Html5#currentTime
   * @return {number}
   *         The value of `currentTime` from the media element.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-currenttime}
   */'currentTime',/**
   * Get the value of `buffered` from the media element. `buffered` is a `TimeRange`
   * object that represents the parts of the media that are already downloaded and
   * available for playback.
   *
   * @method Html5#buffered
   * @return {TimeRange}
   *         The value of `buffered` from the media element.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-buffered}
   */'buffered',/**
   * Get the value of `volume` from the media element. `volume` indicates
   * the current playback volume of audio for a media. `volume` will be a value from 0
   * (silent) to 1 (loudest and default).
   *
   * @method Html5#volume
   * @return {number}
   *         The value of `volume` from the media element. Value will be between 0-1.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-a-volume}
   */'volume',/**
   * Get the value of `poster` from the media element. `poster` indicates
   * that the url of an image file that can/will be shown when no media data is available.
   *
   * @method Html5#poster
   * @return {string}
   *         The value of `poster` from the media element. Value will be a url to an
   *         image.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-video-poster}
   */'poster',/**
   * Get the value of `preload` from the media element. `preload` indicates
   * what should download before the media is interacted with. It can have the following
   * values:
   * - none: nothing should be downloaded
   * - metadata: poster and the first few frames of the media may be downloaded to get
   *   media dimensions and other metadata
   * - auto: allow the media and metadata for the media to be downloaded before
   *    interaction
   *
   * @method Html5#preload
   * @return {string}
   *         The value of `preload` from the media element. Will be 'none', 'metadata',
   *         or 'auto'.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-preload}
   */'preload',/**
   * Get the value of the `error` from the media element. `error` indicates any
   * MediaError that may have occurred during playback. If error returns null there is no
   * current error.
   *
   * @method Html5#error
   * @return {MediaError|null}
   *         The value of `error` from the media element. Will be `MediaError` if there
   *         is a current error and null otherwise.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-error}
   */'error',/**
   * Get the value of `seeking` from the media element. `seeking` indicates whether the
   * media is currently seeking to a new position or not.
   *
   * @method Html5#seeking
   * @return {boolean}
   *         - The value of `seeking` from the media element.
   *         - True indicates that the media is currently seeking to a new position.
   *         - False indicates that the media is not seeking to a new position at this time.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-seeking}
   */'seeking',/**
   * Get the value of `seekable` from the media element. `seekable` returns a
   * `TimeRange` object indicating ranges of time that can currently be `seeked` to.
   *
   * @method Html5#seekable
   * @return {TimeRange}
   *         The value of `seekable` from the media element. A `TimeRange` object
   *         indicating the current ranges of time that can be seeked to.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-seekable}
   */'seekable',/**
   * Get the value of `ended` from the media element. `ended` indicates whether
   * the media has reached the end or not.
   *
   * @method Html5#ended
   * @return {boolean}
   *         - The value of `ended` from the media element.
   *         - True indicates that the media has ended.
   *         - False indicates that the media has not ended.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-ended}
   */'ended',/**
   * Get the value of `playbackRate` from the media element. `playbackRate` indicates
   * the rate at which the media is currently playing back. Examples:
   *   - if playbackRate is set to 2, media will play twice as fast.
   *   - if playbackRate is set to 0.5, media will play half as fast.
   *
   * @method Html5#playbackRate
   * @return {number}
   *         The value of `playbackRate` from the media element. A number indicating
   *         the current playback speed of the media, where 1 is normal speed.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate}
   */'playbackRate',/**
   * Get the value of `defaultPlaybackRate` from the media element. `defaultPlaybackRate` indicates
   * the rate at which the media is currently playing back. This value will not indicate the current
   * `playbackRate` after playback has started, use {@link Html5#playbackRate} for that.
   *
   * Examples:
   *   - if defaultPlaybackRate is set to 2, media will play twice as fast.
   *   - if defaultPlaybackRate is set to 0.5, media will play half as fast.
   *
   * @method Html5.prototype.defaultPlaybackRate
   * @return {number}
   *         The value of `defaultPlaybackRate` from the media element. A number indicating
   *         the current playback speed of the media, where 1 is normal speed.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate}
   */'defaultPlaybackRate',/**
   * Get the value of `played` from the media element. `played` returns a `TimeRange`
   * object representing points in the media timeline that have been played.
   *
   * @method Html5#played
   * @return {TimeRange}
   *         The value of `played` from the media element. A `TimeRange` object indicating
   *         the ranges of time that have been played.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-played}
   */'played',/**
   * Get the value of `networkState` from the media element. `networkState` indicates
   * the current network state. It returns an enumeration from the following list:
   * - 0: NETWORK_EMPTY
   * - 1: NETWORK_IDLE
   * - 2: NETWORK_LOADING
   * - 3: NETWORK_NO_SOURCE
   *
   * @method Html5#networkState
   * @return {number}
   *         The value of `networkState` from the media element. This will be a number
   *         from the list in the description.
   *
   * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-networkstate}
   */'networkState',/**
   * Get the value of `readyState` from the media element. `readyState` indicates
   * the current state of the media element. It returns an enumeration from the
   * following list:
   * - 0: HAVE_NOTHING
   * - 1: HAVE_METADATA
   * - 2: HAVE_CURRENT_DATA
   * - 3: HAVE_FUTURE_DATA
   * - 4: HAVE_ENOUGH_DATA
   *
   * @method Html5#readyState
   * @return {number}
   *         The value of `readyState` from the media element. This will be a number
   *         from the list in the description.
   *
   * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#ready-states}
   */'readyState',/**
   * Get the value of `videoWidth` from the video element. `videoWidth` indicates
   * the current width of the video in css pixels.
   *
   * @method Html5#videoWidth
   * @return {number}
   *         The value of `videoWidth` from the video element. This will be a number
   *         in css pixels.
   *
   * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-video-videowidth}
   */'videoWidth',/**
   * Get the value of `videoHeight` from the video element. `videoHeight` indicates
   * the current height of the video in css pixels.
   *
   * @method Html5#videoHeight
   * @return {number}
   *         The value of `videoHeight` from the video element. This will be a number
   *         in css pixels.
   *
   * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-video-videowidth}
   */'videoHeight'].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop];};});// Wrap native properties with a setter in this format:
// set + toTitleCase(name)
// The list is as follows:
// setVolume, setSrc, setPoster, setPreload, setPlaybackRate, setDefaultPlaybackRate
[/**
   * Set the value of `volume` on the media element. `volume` indicates the current
   * audio level as a percentage in decimal form. This means that 1 is 100%, 0.5 is 50%, and
   * so on.
   *
   * @method Html5#setVolume
   * @param {number} percentAsDecimal
   *        The volume percent as a decimal. Valid range is from 0-1.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-a-volume}
   */'volume',/**
   * Set the value of `src` on the media element. `src` indicates the current
   * {@link Tech~SourceObject} for the media.
   *
   * @method Html5#setSrc
   * @param {Tech~SourceObject} src
   *        The source object to set as the current source.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-src}
   */'src',/**
   * Set the value of `poster` on the media element. `poster` is the url to
   * an image file that can/will be shown when no media data is available.
   *
   * @method Html5#setPoster
   * @param {string} poster
   *        The url to an image that should be used as the `poster` for the media
   *        element.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-poster}
   */'poster',/**
   * Set the value of `preload` on the media element. `preload` indicates
   * what should download before the media is interacted with. It can have the following
   * values:
   * - none: nothing should be downloaded
   * - metadata: poster and the first few frames of the media may be downloaded to get
   *   media dimensions and other metadata
   * - auto: allow the media and metadata for the media to be downloaded before
   *    interaction
   *
   * @method Html5#setPreload
   * @param {string} preload
   *         The value of `preload` to set on the media element. Must be 'none', 'metadata',
   *         or 'auto'.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-preload}
   */'preload',/**
   * Set the value of `playbackRate` on the media element. `playbackRate` indicates
   * the rate at which the media should play back. Examples:
   *   - if playbackRate is set to 2, media will play twice as fast.
   *   - if playbackRate is set to 0.5, media will play half as fast.
   *
   * @method Html5#setPlaybackRate
   * @return {number}
   *         The value of `playbackRate` from the media element. A number indicating
   *         the current playback speed of the media, where 1 is normal speed.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate}
   */'playbackRate',/**
   * Set the value of `defaultPlaybackRate` on the media element. `defaultPlaybackRate` indicates
   * the rate at which the media should play back upon initial startup. Changing this value
   * after a video has started will do nothing. Instead you should used {@link Html5#setPlaybackRate}.
   *
   * Example Values:
   *   - if playbackRate is set to 2, media will play twice as fast.
   *   - if playbackRate is set to 0.5, media will play half as fast.
   *
   * @method Html5.prototype.setDefaultPlaybackRate
   * @return {number}
   *         The value of `defaultPlaybackRate` from the media element. A number indicating
   *         the current playback speed of the media, where 1 is normal speed.
   *
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-defaultplaybackrate}
   */'defaultPlaybackRate'].forEach(function(prop){Html5.prototype['set'+toTitleCase(prop)]=function(v){this.el_[prop]=v;};});// wrap native functions with a function
// The list is as follows:
// pause, load, play
[/**
   * A wrapper around the media elements `pause` function. This will call the `HTML5`
   * media elements `pause` function.
   *
   * @method Html5#pause
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-pause}
   */'pause',/**
   * A wrapper around the media elements `load` function. This will call the `HTML5`s
   * media element `load` function.
   *
   * @method Html5#load
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-load}
   */'load',/**
   * A wrapper around the media elements `play` function. This will call the `HTML5`s
   * media element `play` function.
   *
   * @method Html5#play
   * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-play}
   */'play'].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop]();};});Tech.withSourceHandlers(Html5);/**
   * Native source handler for Html5, simply passes the source to the media element.
   *
   * @property {Tech~SourceObject} source
   *        The source object
   *
   * @property {Html5} tech
   *        The instance of the HTML5 tech.
   */Html5.nativeSourceHandler={};/**
   * Check if the media element can play the given mime type.
   *
   * @param {string} type
   *        The mimetype to check
   *
   * @return {string}
   *         'probably', 'maybe', or '' (empty string)
   */Html5.nativeSourceHandler.canPlayType=function(type){// IE without MediaPlayer throws an error (#519)
try{return Html5.TEST_VID.canPlayType(type);}catch(e){return'';}};/**
   * Check if the media element can handle a source natively.
   *
   * @param {Tech~SourceObject} source
   *         The source object
   *
   * @param {Object} [options]
   *         Options to be passed to the tech.
   *
   * @return {string}
   *         'probably', 'maybe', or '' (empty string).
   */Html5.nativeSourceHandler.canHandleSource=function(source,options){// If a type was provided we should rely on that
if(source.type){return Html5.nativeSourceHandler.canPlayType(source.type);// If no type, fall back to checking 'video/[EXTENSION]'
}else if(source.src){var ext=getFileExtension(source.src);return Html5.nativeSourceHandler.canPlayType("video/"+ext);}return'';};/**
   * Pass the source to the native media element.
   *
   * @param {Tech~SourceObject} source
   *        The source object
   *
   * @param {Html5} tech
   *        The instance of the Html5 tech
   *
   * @param {Object} [options]
   *        The options to pass to the source
   */Html5.nativeSourceHandler.handleSource=function(source,tech,options){tech.setSrc(source.src);};/**
   * A noop for the native dispose function, as cleanup is not needed.
   */Html5.nativeSourceHandler.dispose=function(){};// Register the native source handler
Html5.registerSourceHandler(Html5.nativeSourceHandler);Tech.registerTech('Html5',Html5);function _templateObject$2(){var data=_taggedTemplateLiteralLoose(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]);_templateObject$2=function _templateObject(){return data;};return data;}// on the player when they happen
var TECH_EVENTS_RETRIGGER=[/**
   * Fired while the user agent is downloading media data.
   *
   * @event Player#progress
   * @type {EventTarget~Event}
   *//**
   * Retrigger the `progress` event that was triggered by the {@link Tech}.
   *
   * @private
   * @method Player#handleTechProgress_
   * @fires Player#progress
   * @listens Tech#progress
   */'progress',/**
   * Fires when the loading of an audio/video is aborted.
   *
   * @event Player#abort
   * @type {EventTarget~Event}
   *//**
   * Retrigger the `abort` event that was triggered by the {@link Tech}.
   *
   * @private
   * @method Player#handleTechAbort_
   * @fires Player#abort
   * @listens Tech#abort
   */'abort',/**
   * Fires when the browser is intentionally not getting media data.
   *
   * @event Player#suspend
   * @type {EventTarget~Event}
   *//**
   * Retrigger the `suspend` event that was triggered by the {@link Tech}.
   *
   * @private
   * @method Player#handleTechSuspend_
   * @fires Player#suspend
   * @listens Tech#suspend
   */'suspend',/**
   * Fires when the current playlist is empty.
   *
   * @event Player#emptied
   * @type {EventTarget~Event}
   *//**
   * Retrigger the `emptied` event that was triggered by the {@link Tech}.
   *
   * @private
   * @method Player#handleTechEmptied_
   * @fires Player#emptied
   * @listens Tech#emptied
   */'emptied',/**
   * Fires when the browser is trying to get media data, but data is not available.
   *
   * @event Player#stalled
   * @type {EventTarget~Event}
   *//**
   * Retrigger the `stalled` event that was triggered by the {@link Tech}.
   *
   * @private
   * @method Player#handleTechStalled_
   * @fires Player#stalled
   * @listens Tech#stalled
   */'stalled',/**
   * Fires when the browser has loaded meta data for the audio/video.
   *
   * @event Player#loadedmetadata
   * @type {EventTarget~Event}
   *//**
   * Retrigger the `stalled` event that was triggered by the {@link Tech}.
   *
   * @private
   * @method Player#handleTechLoadedmetadata_
   * @fires Player#loadedmetadata
   * @listens Tech#loadedmetadata
   */'loadedmetadata',/**
   * Fires when the browser has loaded the current frame of the audio/video.
   *
   * @event Player#loadeddata
   * @type {event}
   *//**
   * Retrigger the `loadeddata` event that was triggered by the {@link Tech}.
   *
   * @private
   * @method Player#handleTechLoaddeddata_
   * @fires Player#loadeddata
   * @listens Tech#loadeddata
   */'loadeddata',/**
   * Fires when the current playback position has changed.
   *
   * @event Player#timeupdate
   * @type {event}
   *//**
   * Retrigger the `timeupdate` event that was triggered by the {@link Tech}.
   *
   * @private
   * @method Player#handleTechTimeUpdate_
   * @fires Player#timeupdate
   * @listens Tech#timeupdate
   */'timeupdate',/**
   * Fires when the video's intrinsic dimensions change
   *
   * @event Player#resize
   * @type {event}
   *//**
   * Retrigger the `resize` event that was triggered by the {@link Tech}.
   *
   * @private
   * @method Player#handleTechResize_
   * @fires Player#resize
   * @listens Tech#resize
   */'resize',/**
   * Fires when the volume has been changed
   *
   * @event Player#volumechange
   * @type {event}
   *//**
   * Retrigger the `volumechange` event that was triggered by the {@link Tech}.
   *
   * @private
   * @method Player#handleTechVolumechange_
   * @fires Player#volumechange
   * @listens Tech#volumechange
   */'volumechange',/**
   * Fires when the text track has been changed
   *
   * @event Player#texttrackchange
   * @type {event}
   *//**
   * Retrigger the `texttrackchange` event that was triggered by the {@link Tech}.
   *
   * @private
   * @method Player#handleTechTexttrackchange_
   * @fires Player#texttrackchange
   * @listens Tech#texttrackchange
   */'texttrackchange'];// events to queue when playback rate is zero
// this is a hash for the sole purpose of mapping non-camel-cased event names
// to camel-cased function names
var TECH_EVENTS_QUEUE={canplay:'CanPlay',canplaythrough:'CanPlayThrough',playing:'Playing',seeked:'Seeked'};var BREAKPOINT_ORDER=['tiny','xsmall','small','medium','large','xlarge','huge'];var BREAKPOINT_CLASSES={};// grep: vjs-layout-tiny
// grep: vjs-layout-x-small
// grep: vjs-layout-small
// grep: vjs-layout-medium
// grep: vjs-layout-large
// grep: vjs-layout-x-large
// grep: vjs-layout-huge
BREAKPOINT_ORDER.forEach(function(k){var v=k.charAt(0)==='x'?"x-"+k.substring(1):k;BREAKPOINT_CLASSES[k]="vjs-layout-"+v;});var DEFAULT_BREAKPOINTS={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity};/**
   * An instance of the `Player` class is created when any of the Video.js setup methods
   * are used to initialize a video.
   *
   * After an instance has been created it can be accessed globally in two ways:
   * 1. By calling `videojs('example_video_1');`
   * 2. By using it directly via  `videojs.players.example_video_1;`
   *
   * @extends Component
   */var Player=/*#__PURE__*/function(_Component){_inheritsLoose(Player,_Component);/**
     * Create an instance of this class.
     *
     * @param {Element} tag
     *        The original video DOM element used for configuring options.
     *
     * @param {Object} [options]
     *        Object of option names and values.
     *
     * @param {Component~ReadyCallback} [ready]
     *        Ready callback function.
     */function Player(tag,options,ready){var _this;// Make sure tag ID exists
tag.id=tag.id||options.id||"vjs_video_"+newGUID();// Set Options
// The options argument overrides options set in the video tag
// which overrides globally set options.
// This latter part coincides with the load order
// (tag must exist before Player)
options=assign(Player.getTagSettings(tag),options);// Delay the initialization of children because we need to set up
// player properties first, and can't use `this` before `super()`
options.initChildren=false;// Same with creating the element
options.createEl=false;// don't auto mixin the evented mixin
options.evented=false;// we don't want the player to report touch activity on itself
// see enableTouchActivity in Component
options.reportTouchActivity=false;// If language is not set, get the closest lang attribute
if(!options.language){if(typeof tag.closest==='function'){var closest=tag.closest('[lang]');if(closest&&closest.getAttribute){options.language=closest.getAttribute('lang');}}else{var element=tag;while(element&&element.nodeType===1){if(getAttributes(element).hasOwnProperty('lang')){options.language=element.getAttribute('lang');break;}element=element.parentNode;}}}// Run base component initializing with new options
_this=_Component.call(this,null,options,ready)||this;// Create bound methods for document listeners.
_this.boundDocumentFullscreenChange_=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.documentFullscreenChange_);_this.boundFullWindowOnEscKey_=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.fullWindowOnEscKey);_this.boundHandleKeyPress_=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.handleKeyPress);// create logger
_this.log=createLogger$1(_this.id_);// Tracks when a tech changes the poster
_this.isPosterFromTech_=false;// Holds callback info that gets queued when playback rate is zero
// and a seek is happening
_this.queuedCallbacks_=[];// Turn off API access because we're loading a new tech that might load asynchronously
_this.isReady_=false;// Init state hasStarted_
_this.hasStarted_=false;// Init state userActive_
_this.userActive_=false;// if the global option object was accidentally blown away by
// someone, bail early with an informative error
if(!_this.options_||!_this.options_.techOrder||!_this.options_.techOrder.length){throw new Error('No techOrder specified. Did you overwrite '+'videojs.options instead of just changing the '+'properties you want to override?');}// Store the original tag used to set options
_this.tag=tag;// Store the tag attributes used to restore html5 element
_this.tagAttributes=tag&&getAttributes(tag);// Update current language
_this.language(_this.options_.language);// Update Supported Languages
if(options.languages){// Normalise player option languages to lowercase
var languagesToLower={};Object.getOwnPropertyNames(options.languages).forEach(function(name$$1){languagesToLower[name$$1.toLowerCase()]=options.languages[name$$1];});_this.languages_=languagesToLower;}else{_this.languages_=Player.prototype.options_.languages;}_this.resetCache_();// Set poster
_this.poster_=options.poster||'';// Set controls
_this.controls_=!!options.controls;// Original tag settings stored in options
// now remove immediately so native controls don't flash.
// May be turned back on by HTML5 tech if nativeControlsForTouch is true
tag.controls=false;tag.removeAttribute('controls');_this.changingSrc_=false;_this.playCallbacks_=[];_this.playTerminatedQueue_=[];// the attribute overrides the option
if(tag.hasAttribute('autoplay')){_this.autoplay(true);}else{// otherwise use the setter to validate and
// set the correct value.
_this.autoplay(_this.options_.autoplay);}// check plugins
if(options.plugins){Object.keys(options.plugins).forEach(function(name$$1){if(typeof _this[name$$1]!=='function'){throw new Error("plugin \""+name$$1+"\" does not exist");}});}/*
       * Store the internal state of scrubbing
       *
       * @private
       * @return {Boolean} True if the user is scrubbing
       */_this.scrubbing_=false;_this.el_=_this.createEl();// Make this an evented object and use `el_` as its event bus.
evented(_assertThisInitialized(_assertThisInitialized(_this)),{eventBusKey:'el_'});if(_this.fluid_){_this.on('playerreset',_this.updateStyleEl_);}// We also want to pass the original player options to each component and plugin
// as well so they don't need to reach back into the player for options later.
// We also need to do another copy of this.options_ so we don't end up with
// an infinite loop.
var playerOptionsCopy=mergeOptions(_this.options_);// Load plugins
if(options.plugins){Object.keys(options.plugins).forEach(function(name$$1){_this[name$$1](options.plugins[name$$1]);});}_this.options_.playerOptions=playerOptionsCopy;_this.middleware_=[];_this.initChildren();// Set isAudio based on whether or not an audio tag was used
_this.isAudio(tag.nodeName.toLowerCase()==='audio');// Update controls className. Can't do this when the controls are initially
// set because the element doesn't exist yet.
if(_this.controls()){_this.addClass('vjs-controls-enabled');}else{_this.addClass('vjs-controls-disabled');}// Set ARIA label and region role depending on player type
_this.el_.setAttribute('role','region');if(_this.isAudio()){_this.el_.setAttribute('aria-label',_this.localize('Audio Player'));}else{_this.el_.setAttribute('aria-label',_this.localize('Video Player'));}if(_this.isAudio()){_this.addClass('vjs-audio');}if(_this.flexNotSupported_()){_this.addClass('vjs-no-flex');}// TODO: Make this smarter. Toggle user state between touching/mousing
// using events, since devices can have both touch and mouse events.
// TODO: Make this check be performed again when the window switches between monitors
// (See https://github.com/videojs/video.js/issues/5683)
if(TOUCH_ENABLED){_this.addClass('vjs-touch-enabled');}// iOS Safari has broken hover handling
if(!IS_IOS){_this.addClass('vjs-workinghover');}// Make player easily findable by ID
Player.players[_this.id_]=_assertThisInitialized(_assertThisInitialized(_this));// Add a major version class to aid css in plugins
var majorVersion=version.split('.')[0];_this.addClass("vjs-v"+majorVersion);// When the player is first initialized, trigger activity so components
// like the control bar show themselves if needed
_this.userActive(true);_this.reportUserActivity();_this.one('play',_this.listenForUserActivity_);_this.on('focus',_this.handleFocus);_this.on('blur',_this.handleBlur);_this.on('stageclick',_this.handleStageClick_);_this.breakpoints(_this.options_.breakpoints);_this.responsive(_this.options_.responsive);return _this;}/**
     * Destroys the video player and does any necessary cleanup.
     *
     * This is especially helpful if you are dynamically adding and removing videos
     * to/from the DOM.
     *
     * @fires Player#dispose
     */var _proto=Player.prototype;_proto.dispose=function dispose(){var _this2=this;/**
       * Called when the player is being disposed of.
       *
       * @event Player#dispose
       * @type {EventTarget~Event}
       */this.trigger('dispose');// prevent dispose from being called twice
this.off('dispose');// Make sure all player-specific document listeners are unbound. This is
off(document,FullscreenApi.fullscreenchange,this.boundDocumentFullscreenChange_);off(document,'keydown',this.boundFullWindowOnEscKey_);off(document,'keydown',this.boundHandleKeyPress_);if(this.styleEl_&&this.styleEl_.parentNode){this.styleEl_.parentNode.removeChild(this.styleEl_);this.styleEl_=null;}// Kill reference to this player
Player.players[this.id_]=null;if(this.tag&&this.tag.player){this.tag.player=null;}if(this.el_&&this.el_.player){this.el_.player=null;}if(this.tech_){this.tech_.dispose();this.isPosterFromTech_=false;this.poster_='';}if(this.playerElIngest_){this.playerElIngest_=null;}if(this.tag){this.tag=null;}clearCacheForPlayer(this);// remove all event handlers for track lists
// all tracks and track listeners are removed on
// tech dispose
ALL.names.forEach(function(name$$1){var props=ALL[name$$1];var list=_this2[props.getterName]();// if it is not a native list
// we have to manually remove event listeners
if(list&&list.off){list.off();}});// the actual .el_ is removed here
_Component.prototype.dispose.call(this);}/**
     * Create the `Player`'s DOM element.
     *
     * @return {Element}
     *         The DOM element that gets created.
     */;_proto.createEl=function createEl$$1(){var tag=this.tag;var el;var playerElIngest=this.playerElIngest_=tag.parentNode&&tag.parentNode.hasAttribute&&tag.parentNode.hasAttribute('data-vjs-player');var divEmbed=this.tag.tagName.toLowerCase()==='video-js';if(playerElIngest){el=this.el_=tag.parentNode;}else if(!divEmbed){el=this.el_=_Component.prototype.createEl.call(this,'div');}// Copy over all the attributes from the tag, including ID and class
// ID will now reference player box, not the video tag
var attrs=getAttributes(tag);if(divEmbed){el=this.el_=tag;tag=this.tag=document.createElement('video');while(el.children.length){tag.appendChild(el.firstChild);}if(!hasClass(el,'video-js')){addClass(el,'video-js');}el.appendChild(tag);playerElIngest=this.playerElIngest_=el;// move properties over from our custom `video-js` element
// to our new `video` element. This will move things like
// `src` or `controls` that were set via js before the player
// was initialized.
Object.keys(el).forEach(function(k){tag[k]=el[k];});}// set tabindex to -1 to remove the video element from the focus order
tag.setAttribute('tabindex','-1');attrs.tabindex='-1';// Workaround for #4583 (JAWS+IE doesn't announce BPB or play button)
// See https://github.com/FreedomScientific/VFO-standards-support/issues/78
// Note that we can't detect if JAWS is being used, but this ARIA attribute
//  doesn't change behavior of IE11 if JAWS is not being used
if(IE_VERSION){tag.setAttribute('role','application');attrs.role='application';}// Remove width/height attrs from tag so CSS can make it 100% width/height
tag.removeAttribute('width');tag.removeAttribute('height');if('width'in attrs){delete attrs.width;}if('height'in attrs){delete attrs.height;}Object.getOwnPropertyNames(attrs).forEach(function(attr){// don't copy over the class attribute to the player element when we're in a div embed
// the class is already set up properly in the divEmbed case
// and we want to make sure that the `video-js` class doesn't get lost
if(!(divEmbed&&attr==='class')){el.setAttribute(attr,attrs[attr]);}if(divEmbed){tag.setAttribute(attr,attrs[attr]);}});// Update tag id/class for use as HTML5 playback tech
// Might think we should do this after embedding in container so .vjs-tech class
// doesn't flash 100% width/height, but class only applies with .video-js parent
tag.playerId=tag.id;tag.id+='_html5_api';tag.className='vjs-tech';// Make player findable on elements
tag.player=el.player=this;// Default state of video is paused
this.addClass('vjs-paused');// Add a style element in the player that we'll use to set the width/height
// of the player in a way that's still overrideable by CSS, just like the
// video element
if(window$1.VIDEOJS_NO_DYNAMIC_STYLE!==true){this.styleEl_=createStyleElement('vjs-styles-dimensions');var defaultsStyleEl=$('.vjs-styles-defaults');var head=$('head');head.insertBefore(this.styleEl_,defaultsStyleEl?defaultsStyleEl.nextSibling:head.firstChild);}this.fill_=false;this.fluid_=false;// Pass in the width/height/aspectRatio options which will update the style el
this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);// Hide any links within the video/audio tag,
// because IE doesn't hide them completely from screen readers.
var links=tag.getElementsByTagName('a');for(var i=0;i<links.length;i++){var linkEl=links.item(i);addClass(linkEl,'vjs-hidden');linkEl.setAttribute('hidden','hidden');}// insertElFirst seems to cause the networkState to flicker from 3 to 2, so
// keep track of the original for later so we can know if the source originally failed
tag.initNetworkState_=tag.networkState;// Wrap video tag in div (el/box) container
if(tag.parentNode&&!playerElIngest){tag.parentNode.insertBefore(el,tag);}// insert the tag as the first child of the player element
// then manually add it to the children array so that this.addChild
// will work properly for other components
//
// Breaks iPhone, fixed in HTML5 setup.
prependTo(tag,el);this.children_.unshift(tag);// Set lang attr on player to ensure CSS :lang() in consistent with player
// if it's been set to something different to the doc
this.el_.setAttribute('lang',this.language_);this.el_=el;return el;}/**
     * A getter/setter for the `Player`'s width. Returns the player's configured value.
     * To get the current width use `currentWidth()`.
     *
     * @param {number} [value]
     *        The value to set the `Player`'s width to.
     *
     * @return {number}
     *         The current width of the `Player` when getting.
     */;_proto.width=function width(value){return this.dimension('width',value);}/**
     * A getter/setter for the `Player`'s height. Returns the player's configured value.
     * To get the current height use `currentheight()`.
     *
     * @param {number} [value]
     *        The value to set the `Player`'s heigth to.
     *
     * @return {number}
     *         The current height of the `Player` when getting.
     */;_proto.height=function height(value){return this.dimension('height',value);}/**
     * A getter/setter for the `Player`'s width & height.
     *
     * @param {string} dimension
     *        This string can be:
     *        - 'width'
     *        - 'height'
     *
     * @param {number} [value]
     *        Value for dimension specified in the first argument.
     *
     * @return {number}
     *         The dimension arguments value when getting (width/height).
     */;_proto.dimension=function dimension(_dimension,value){var privDimension=_dimension+'_';if(value===undefined){return this[privDimension]||0;}if(value===''){// If an empty string is given, reset the dimension to be automatic
this[privDimension]=undefined;this.updateStyleEl_();return;}var parsedVal=parseFloat(value);if(isNaN(parsedVal)){log.error("Improper value \""+value+"\" supplied for for "+_dimension);return;}this[privDimension]=parsedVal;this.updateStyleEl_();}/**
     * A getter/setter/toggler for the vjs-fluid `className` on the `Player`.
     *
     * Turning this on will turn off fill mode.
     *
     * @param {boolean} [bool]
     *        - A value of true adds the class.
     *        - A value of false removes the class.
     *        - No value will be a getter.
     *
     * @return {boolean|undefined}
     *         - The value of fluid when getting.
     *         - `undefined` when setting.
     */;_proto.fluid=function fluid(bool){if(bool===undefined){return!!this.fluid_;}this.fluid_=!!bool;if(isEvented(this)){this.off('playerreset',this.updateStyleEl_);}if(bool){this.addClass('vjs-fluid');this.fill(false);addEventedCallback(function(){this.on('playerreset',this.updateStyleEl_);});}else{this.removeClass('vjs-fluid');}this.updateStyleEl_();}/**
     * A getter/setter/toggler for the vjs-fill `className` on the `Player`.
     *
     * Turning this on will turn off fluid mode.
     *
     * @param {boolean} [bool]
     *        - A value of true adds the class.
     *        - A value of false removes the class.
     *        - No value will be a getter.
     *
     * @return {boolean|undefined}
     *         - The value of fluid when getting.
     *         - `undefined` when setting.
     */;_proto.fill=function fill(bool){if(bool===undefined){return!!this.fill_;}this.fill_=!!bool;if(bool){this.addClass('vjs-fill');this.fluid(false);}else{this.removeClass('vjs-fill');}}/**
     * Get/Set the aspect ratio
     *
     * @param {string} [ratio]
     *        Aspect ratio for player
     *
     * @return {string|undefined}
     *         returns the current aspect ratio when getting
     *//**
     * A getter/setter for the `Player`'s aspect ratio.
     *
     * @param {string} [ratio]
     *        The value to set the `Player's aspect ratio to.
     *
     * @return {string|undefined}
     *         - The current aspect ratio of the `Player` when getting.
     *         - undefined when setting
     */;_proto.aspectRatio=function aspectRatio(ratio){if(ratio===undefined){return this.aspectRatio_;}// Check for width:height format
if(!/^\d+\:\d+$/.test(ratio)){throw new Error('Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.');}this.aspectRatio_=ratio;// We're assuming if you set an aspect ratio you want fluid mode,
// because in fixed mode you could calculate width and height yourself.
this.fluid(true);this.updateStyleEl_();}/**
     * Update styles of the `Player` element (height, width and aspect ratio).
     *
     * @private
     * @listens Tech#loadedmetadata
     */;_proto.updateStyleEl_=function updateStyleEl_(){if(window$1.VIDEOJS_NO_DYNAMIC_STYLE===true){var _width=typeof this.width_==='number'?this.width_:this.options_.width;var _height=typeof this.height_==='number'?this.height_:this.options_.height;var techEl=this.tech_&&this.tech_.el();if(techEl){if(_width>=0){techEl.width=_width;}if(_height>=0){techEl.height=_height;}}return;}var width;var height;var aspectRatio;var idClass;// The aspect ratio is either used directly or to calculate width and height.
if(this.aspectRatio_!==undefined&&this.aspectRatio_!=='auto'){// Use any aspectRatio that's been specifically set
aspectRatio=this.aspectRatio_;}else if(this.videoWidth()>0){// Otherwise try to get the aspect ratio from the video metadata
aspectRatio=this.videoWidth()+':'+this.videoHeight();}else{// Or use a default. The video element's is 2:1, but 16:9 is more common.
aspectRatio='16:9';}// Get the ratio as a decimal we can use to calculate dimensions
var ratioParts=aspectRatio.split(':');var ratioMultiplier=ratioParts[1]/ratioParts[0];if(this.width_!==undefined){// Use any width that's been specifically set
width=this.width_;}else if(this.height_!==undefined){// Or calulate the width from the aspect ratio if a height has been set
width=this.height_/ratioMultiplier;}else{// Or use the video's metadata, or use the video el's default of 300
width=this.videoWidth()||300;}if(this.height_!==undefined){// Use any height that's been specifically set
height=this.height_;}else{// Otherwise calculate the height from the ratio and the width
height=width*ratioMultiplier;}// Ensure the CSS class is valid by starting with an alpha character
if(/^[^a-zA-Z]/.test(this.id())){idClass='dimensions-'+this.id();}else{idClass=this.id()+'-dimensions';}// Ensure the right class is still on the player for the style element
this.addClass(idClass);setTextContent(this.styleEl_,"\n      ."+idClass+" {\n        width: "+width+"px;\n        height: "+height+"px;\n      }\n\n      ."+idClass+".vjs-fluid {\n        padding-top: "+ratioMultiplier*100+"%;\n      }\n    ");}/**
     * Load/Create an instance of playback {@link Tech} including element
     * and API methods. Then append the `Tech` element in `Player` as a child.
     *
     * @param {string} techName
     *        name of the playback technology
     *
     * @param {string} source
     *        video source
     *
     * @private
     */;_proto.loadTech_=function loadTech_(techName,source){var _this3=this;// Pause and remove current playback technology
if(this.tech_){this.unloadTech_();}var titleTechName=toTitleCase(techName);var camelTechName=techName.charAt(0).toLowerCase()+techName.slice(1);// get rid of the HTML5 video tag as soon as we are using another tech
if(titleTechName!=='Html5'&&this.tag){Tech.getTech('Html5').disposeMediaElement(this.tag);this.tag.player=null;this.tag=null;}this.techName_=titleTechName;// Turn off API access because we're loading a new tech that might load asynchronously
this.isReady_=false;// if autoplay is a string we pass false to the tech
// because the player is going to handle autoplay on `loadstart`
var autoplay=typeof this.autoplay()==='string'?false:this.autoplay();// Grab tech-specific options from player options and add source and parent element to use.
var techOptions={source:source,autoplay:autoplay,'nativeControlsForTouch':this.options_.nativeControlsForTouch,'playerId':this.id(),'techId':this.id()+"_"+camelTechName+"_api",'playsinline':this.options_.playsinline,'preload':this.options_.preload,'loop':this.options_.loop,'muted':this.options_.muted,'poster':this.poster(),'language':this.language(),'playerElIngest':this.playerElIngest_||false,'vtt.js':this.options_['vtt.js'],'canOverridePoster':!!this.options_.techCanOverridePoster,'enableSourceset':this.options_.enableSourceset};ALL.names.forEach(function(name$$1){var props=ALL[name$$1];techOptions[props.getterName]=_this3[props.privateName];});assign(techOptions,this.options_[titleTechName]);assign(techOptions,this.options_[camelTechName]);assign(techOptions,this.options_[techName.toLowerCase()]);if(this.tag){techOptions.tag=this.tag;}if(source&&source.src===this.cache_.src&&this.cache_.currentTime>0){techOptions.startTime=this.cache_.currentTime;}// Initialize tech instance
var TechClass=Tech.getTech(techName);if(!TechClass){throw new Error("No Tech named '"+titleTechName+"' exists! '"+titleTechName+"' should be registered using videojs.registerTech()'");}this.tech_=new TechClass(techOptions);// player.triggerReady is always async, so don't need this to be async
this.tech_.ready(bind(this,this.handleTechReady_),true);textTrackConverter.jsonToTextTracks(this.textTracksJson_||[],this.tech_);// Listen to all HTML5-defined events and trigger them on the player
TECH_EVENTS_RETRIGGER.forEach(function(event){_this3.on(_this3.tech_,event,_this3["handleTech"+toTitleCase(event)+"_"]);});Object.keys(TECH_EVENTS_QUEUE).forEach(function(event){_this3.on(_this3.tech_,event,function(eventObj){if(_this3.tech_.playbackRate()===0&&_this3.tech_.seeking()){_this3.queuedCallbacks_.push({callback:_this3["handleTech"+TECH_EVENTS_QUEUE[event]+"_"].bind(_this3),event:eventObj});return;}_this3["handleTech"+TECH_EVENTS_QUEUE[event]+"_"](eventObj);});});this.on(this.tech_,'loadstart',this.handleTechLoadStart_);this.on(this.tech_,'sourceset',this.handleTechSourceset_);this.on(this.tech_,'waiting',this.handleTechWaiting_);this.on(this.tech_,'ended',this.handleTechEnded_);this.on(this.tech_,'seeking',this.handleTechSeeking_);this.on(this.tech_,'play',this.handleTechPlay_);this.on(this.tech_,'firstplay',this.handleTechFirstPlay_);this.on(this.tech_,'pause',this.handleTechPause_);this.on(this.tech_,'durationchange',this.handleTechDurationChange_);this.on(this.tech_,'fullscreenchange',this.handleTechFullscreenChange_);this.on(this.tech_,'error',this.handleTechError_);this.on(this.tech_,'loadedmetadata',this.updateStyleEl_);this.on(this.tech_,'posterchange',this.handleTechPosterChange_);this.on(this.tech_,'textdata',this.handleTechTextData_);this.on(this.tech_,'ratechange',this.handleTechRateChange_);this.usingNativeControls(this.techGet_('controls'));if(this.controls()&&!this.usingNativeControls()){this.addTechControlsListeners_();}// Add the tech element in the DOM if it was not already there
// Make sure to not insert the original video element if using Html5
if(this.tech_.el().parentNode!==this.el()&&(titleTechName!=='Html5'||!this.tag)){prependTo(this.tech_.el(),this.el());}// Get rid of the original video tag reference after the first tech is loaded
if(this.tag){this.tag.player=null;this.tag=null;}}/**
     * Unload and dispose of the current playback {@link Tech}.
     *
     * @private
     */;_proto.unloadTech_=function unloadTech_(){var _this4=this;// Save the current text tracks so that we can reuse the same text tracks with the next tech
ALL.names.forEach(function(name$$1){var props=ALL[name$$1];_this4[props.privateName]=_this4[props.getterName]();});this.textTracksJson_=textTrackConverter.textTracksToJson(this.tech_);this.isReady_=false;this.tech_.dispose();this.tech_=false;if(this.isPosterFromTech_){this.poster_='';this.trigger('posterchange');}this.isPosterFromTech_=false;}/**
     * Return a reference to the current {@link Tech}.
     * It will print a warning by default about the danger of using the tech directly
     * but any argument that is passed in will silence the warning.
     *
     * @param {*} [safety]
     *        Anything passed in to silence the warning
     *
     * @return {Tech}
     *         The Tech
     */;_proto.tech=function tech(safety){if(safety===undefined){log.warn(tsml(_templateObject$2()));}return this.tech_;}/**
     * Set up click and touch listeners for the playback element
     *
     * - On desktops: a click on the video itself will toggle playback
     * - On mobile devices: a click on the video toggles controls
     *   which is done by toggling the user state between active and
     *   inactive
     * - A tap can signal that a user has become active or has become inactive
     *   e.g. a quick tap on an iPhone movie should reveal the controls. Another
     *   quick tap should hide them again (signaling the user is in an inactive
     *   viewing state)
     * - In addition to this, we still want the user to be considered inactive after
     *   a few seconds of inactivity.
     *
     * > Note: the only part of iOS interaction we can't mimic with this setup
     * is a touch and hold on the video element counting as activity in order to
     * keep the controls showing, but that shouldn't be an issue. A touch and hold
     * on any controls will still keep the user active
     *
     * @private
     */;_proto.addTechControlsListeners_=function addTechControlsListeners_(){// Make sure to remove all the previous listeners in case we are called multiple times.
this.removeTechControlsListeners_();// Some browsers (Chrome & IE) don't trigger a click on a flash swf, but do
// trigger mousedown/up.
// http://stackoverflow.com/questions/1444562/javascript-onclick-event-over-flash-object
// Any touch events are set to block the mousedown event from happening
this.on(this.tech_,'mousedown',this.handleTechClick_);this.on(this.tech_,'dblclick',this.handleTechDoubleClick_);// If the controls were hidden we don't want that to change without a tap event
// so we'll check if the controls were already showing before reporting user
// activity
this.on(this.tech_,'touchstart',this.handleTechTouchStart_);this.on(this.tech_,'touchmove',this.handleTechTouchMove_);this.on(this.tech_,'touchend',this.handleTechTouchEnd_);// The tap listener needs to come after the touchend listener because the tap
// listener cancels out any reportedUserActivity when setting userActive(false)
this.on(this.tech_,'tap',this.handleTechTap_);}/**
     * Remove the listeners used for click and tap controls. This is needed for
     * toggling to controls disabled, where a tap/touch should do nothing.
     *
     * @private
     */;_proto.removeTechControlsListeners_=function removeTechControlsListeners_(){// We don't want to just use `this.off()` because there might be other needed
// listeners added by techs that extend this.
this.off(this.tech_,'tap',this.handleTechTap_);this.off(this.tech_,'touchstart',this.handleTechTouchStart_);this.off(this.tech_,'touchmove',this.handleTechTouchMove_);this.off(this.tech_,'touchend',this.handleTechTouchEnd_);this.off(this.tech_,'mousedown',this.handleTechClick_);this.off(this.tech_,'dblclick',this.handleTechDoubleClick_);}/**
     * Player waits for the tech to be ready
     *
     * @private
     */;_proto.handleTechReady_=function handleTechReady_(){this.triggerReady();// Keep the same volume as before
if(this.cache_.volume){this.techCall_('setVolume',this.cache_.volume);}// Look if the tech found a higher resolution poster while loading
this.handleTechPosterChange_();// Update the duration if available
this.handleTechDurationChange_();}/**
     * Retrigger the `loadstart` event that was triggered by the {@link Tech}. This
     * function will also trigger {@link Player#firstplay} if it is the first loadstart
     * for a video.
     *
     * @fires Player#loadstart
     * @fires Player#firstplay
     * @listens Tech#loadstart
     * @private
     */;_proto.handleTechLoadStart_=function handleTechLoadStart_(){// TODO: Update to use `emptied` event instead. See #1277.
this.removeClass('vjs-ended');this.removeClass('vjs-seeking');// reset the error state
this.error(null);// Update the duration
this.handleTechDurationChange_();// If it's already playing we want to trigger a firstplay event now.
// The firstplay event relies on both the play and loadstart events
// which can happen in any order for a new source
if(!this.paused()){/**
         * Fired when the user agent begins looking for media data
         *
         * @event Player#loadstart
         * @type {EventTarget~Event}
         */this.trigger('loadstart');this.trigger('firstplay');}else{// reset the hasStarted state
this.hasStarted(false);this.trigger('loadstart');}// autoplay happens after loadstart for the browser,
// so we mimic that behavior
this.manualAutoplay_(this.autoplay());}/**
     * Handle autoplay string values, rather than the typical boolean
     * values that should be handled by the tech. Note that this is not
     * part of any specification. Valid values and what they do can be
     * found on the autoplay getter at Player#autoplay()
     */;_proto.manualAutoplay_=function manualAutoplay_(type){var _this5=this;if(!this.tech_||typeof type!=='string'){return;}var muted=function muted(){var previouslyMuted=_this5.muted();_this5.muted(true);var restoreMuted=function restoreMuted(){_this5.muted(previouslyMuted);};// restore muted on play terminatation
_this5.playTerminatedQueue_.push(restoreMuted);var mutedPromise=_this5.play();if(!isPromise(mutedPromise)){return;}return mutedPromise.catch(restoreMuted);};var promise;// if muted defaults to true
// the only thing we can do is call play
if(type==='any'&&this.muted()!==true){promise=this.play();if(isPromise(promise)){promise=promise.catch(muted);}}else if(type==='muted'&&this.muted()!==true){promise=muted();}else{promise=this.play();}if(!isPromise(promise)){return;}return promise.then(function(){_this5.trigger({type:'autoplay-success',autoplay:type});}).catch(function(e){_this5.trigger({type:'autoplay-failure',autoplay:type});});}/**
     * Update the internal source caches so that we return the correct source from
     * `src()`, `currentSource()`, and `currentSources()`.
     *
     * > Note: `currentSources` will not be updated if the source that is passed in exists
     *         in the current `currentSources` cache.
     *
     *
     * @param {Tech~SourceObject} srcObj
     *        A string or object source to update our caches to.
     */;_proto.updateSourceCaches_=function updateSourceCaches_(srcObj){if(srcObj===void 0){srcObj='';}var src=srcObj;var type='';if(typeof src!=='string'){src=srcObj.src;type=srcObj.type;}// make sure all the caches are set to default values
// to prevent null checking
this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];// try to get the type of the src that was passed in
if(src&&!type){type=findMimetype(this,src);}// update `currentSource` cache always
this.cache_.source=mergeOptions({},srcObj,{src:src,type:type});var matchingSources=this.cache_.sources.filter(function(s){return s.src&&s.src===src;});var sourceElSources=[];var sourceEls=this.$$('source');var matchingSourceEls=[];for(var i=0;i<sourceEls.length;i++){var sourceObj=getAttributes(sourceEls[i]);sourceElSources.push(sourceObj);if(sourceObj.src&&sourceObj.src===src){matchingSourceEls.push(sourceObj.src);}}// if we have matching source els but not matching sources
// the current source cache is not up to date
if(matchingSourceEls.length&&!matchingSources.length){this.cache_.sources=sourceElSources;// if we don't have matching source or source els set the
// sources cache to the `currentSource` cache
}else if(!matchingSources.length){this.cache_.sources=[this.cache_.source];}// update the tech `src` cache
this.cache_.src=src;}/**
     * *EXPERIMENTAL* Fired when the source is set or changed on the {@link Tech}
     * causing the media element to reload.
     *
     * It will fire for the initial source and each subsequent source.
     * This event is a custom event from Video.js and is triggered by the {@link Tech}.
     *
     * The event object for this event contains a `src` property that will contain the source
     * that was available when the event was triggered. This is generally only necessary if Video.js
     * is switching techs while the source was being changed.
     *
     * It is also fired when `load` is called on the player (or media element)
     * because the {@link https://html.spec.whatwg.org/multipage/media.html#dom-media-load|specification for `load`}
     * says that the resource selection algorithm needs to be aborted and restarted.
     * In this case, it is very likely that the `src` property will be set to the
     * empty string `""` to indicate we do not know what the source will be but
     * that it is changing.
     *
     * *This event is currently still experimental and may change in minor releases.*
     * __To use this, pass `enableSourceset` option to the player.__
     *
     * @event Player#sourceset
     * @type {EventTarget~Event}
     * @prop {string} src
     *                The source url available when the `sourceset` was triggered.
     *                It will be an empty string if we cannot know what the source is
     *                but know that the source will change.
     *//**
     * Retrigger the `sourceset` event that was triggered by the {@link Tech}.
     *
     * @fires Player#sourceset
     * @listens Tech#sourceset
     * @private
     */;_proto.handleTechSourceset_=function handleTechSourceset_(event){var _this6=this;// only update the source cache when the source
// was not updated using the player api
if(!this.changingSrc_){var updateSourceCaches=function updateSourceCaches(src){return _this6.updateSourceCaches_(src);};var playerSrc=this.currentSource().src;var eventSrc=event.src;// if we have a playerSrc that is not a blob, and a tech src that is a blob
if(playerSrc&&!/^blob:/.test(playerSrc)&&/^blob:/.test(eventSrc)){// if both the tech source and the player source were updated we assume
// something like @videojs/http-streaming did the sourceset and skip updating the source cache.
if(!this.lastSource_||this.lastSource_.tech!==eventSrc&&this.lastSource_.player!==playerSrc){updateSourceCaches=function updateSourceCaches(){};}}// update the source to the intial source right away
// in some cases this will be empty string
updateSourceCaches(eventSrc);// if the `sourceset` `src` was an empty string
// wait for a `loadstart` to update the cache to `currentSrc`.
// If a sourceset happens before a `loadstart`, we reset the state
// as this function will be called again.
if(!event.src){var updateCache=function updateCache(e){if(e.type!=='sourceset'){var techSrc=_this6.techGet('currentSrc');_this6.lastSource_.tech=techSrc;_this6.updateSourceCaches_(techSrc);}_this6.tech_.off(['sourceset','loadstart'],updateCache);};this.tech_.one(['sourceset','loadstart'],updateCache);}}this.lastSource_={player:this.currentSource().src,tech:event.src};this.trigger({src:event.src,type:'sourceset'});}/**
     * Add/remove the vjs-has-started class
     *
     * @fires Player#firstplay
     *
     * @param {boolean} request
     *        - true: adds the class
     *        - false: remove the class
     *
     * @return {boolean}
     *         the boolean value of hasStarted_
     */;_proto.hasStarted=function hasStarted(request){if(request===undefined){// act as getter, if we have no request to change
return this.hasStarted_;}if(request===this.hasStarted_){return;}this.hasStarted_=request;if(this.hasStarted_){this.addClass('vjs-has-started');this.trigger('firstplay');}else{this.removeClass('vjs-has-started');}}/**
     * Fired whenever the media begins or resumes playback
     *
     * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-play}
     * @fires Player#play
     * @listens Tech#play
     * @private
     */;_proto.handleTechPlay_=function handleTechPlay_(){this.removeClass('vjs-ended');this.removeClass('vjs-paused');this.addClass('vjs-playing');// hide the poster when the user hits play
this.hasStarted(true);/**
       * Triggered whenever an {@link Tech#play} event happens. Indicates that
       * playback has started or resumed.
       *
       * @event Player#play
       * @type {EventTarget~Event}
       */this.trigger('play');}/**
     * Retrigger the `ratechange` event that was triggered by the {@link Tech}.
     *
     * If there were any events queued while the playback rate was zero, fire
     * those events now.
     *
     * @private
     * @method Player#handleTechRateChange_
     * @fires Player#ratechange
     * @listens Tech#ratechange
     */;_proto.handleTechRateChange_=function handleTechRateChange_(){if(this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0){this.queuedCallbacks_.forEach(function(queued){return queued.callback(queued.event);});this.queuedCallbacks_=[];}this.cache_.lastPlaybackRate=this.tech_.playbackRate();/**
       * Fires when the playing speed of the audio/video is changed
       *
       * @event Player#ratechange
       * @type {event}
       */this.trigger('ratechange');}/**
     * Retrigger the `waiting` event that was triggered by the {@link Tech}.
     *
     * @fires Player#waiting
     * @listens Tech#waiting
     * @private
     */;_proto.handleTechWaiting_=function handleTechWaiting_(){var _this7=this;this.addClass('vjs-waiting');/**
       * A readyState change on the DOM element has caused playback to stop.
       *
       * @event Player#waiting
       * @type {EventTarget~Event}
       */this.trigger('waiting');// Browsers may emit a timeupdate event after a waiting event. In order to prevent
// premature removal of the waiting class, wait for the time to change.
var timeWhenWaiting=this.currentTime();var timeUpdateListener=function timeUpdateListener(){if(timeWhenWaiting!==_this7.currentTime()){_this7.removeClass('vjs-waiting');_this7.off('timeupdate',timeUpdateListener);}};this.on('timeupdate',timeUpdateListener);}/**
     * Retrigger the `canplay` event that was triggered by the {@link Tech}.
     * > Note: This is not consistent between browsers. See #1351
     *
     * @fires Player#canplay
     * @listens Tech#canplay
     * @private
     */;_proto.handleTechCanPlay_=function handleTechCanPlay_(){this.removeClass('vjs-waiting');/**
       * The media has a readyState of HAVE_FUTURE_DATA or greater.
       *
       * @event Player#canplay
       * @type {EventTarget~Event}
       */this.trigger('canplay');}/**
     * Retrigger the `canplaythrough` event that was triggered by the {@link Tech}.
     *
     * @fires Player#canplaythrough
     * @listens Tech#canplaythrough
     * @private
     */;_proto.handleTechCanPlayThrough_=function handleTechCanPlayThrough_(){this.removeClass('vjs-waiting');/**
       * The media has a readyState of HAVE_ENOUGH_DATA or greater. This means that the
       * entire media file can be played without buffering.
       *
       * @event Player#canplaythrough
       * @type {EventTarget~Event}
       */this.trigger('canplaythrough');}/**
     * Retrigger the `playing` event that was triggered by the {@link Tech}.
     *
     * @fires Player#playing
     * @listens Tech#playing
     * @private
     */;_proto.handleTechPlaying_=function handleTechPlaying_(){this.removeClass('vjs-waiting');/**
       * The media is no longer blocked from playback, and has started playing.
       *
       * @event Player#playing
       * @type {EventTarget~Event}
       */this.trigger('playing');}/**
     * Retrigger the `seeking` event that was triggered by the {@link Tech}.
     *
     * @fires Player#seeking
     * @listens Tech#seeking
     * @private
     */;_proto.handleTechSeeking_=function handleTechSeeking_(){this.addClass('vjs-seeking');/**
       * Fired whenever the player is jumping to a new time
       *
       * @event Player#seeking
       * @type {EventTarget~Event}
       */this.trigger('seeking');}/**
     * Retrigger the `seeked` event that was triggered by the {@link Tech}.
     *
     * @fires Player#seeked
     * @listens Tech#seeked
     * @private
     */;_proto.handleTechSeeked_=function handleTechSeeked_(){this.removeClass('vjs-seeking');this.removeClass('vjs-ended');/**
       * Fired when the player has finished jumping to a new time
       *
       * @event Player#seeked
       * @type {EventTarget~Event}
       */this.trigger('seeked');}/**
     * Retrigger the `firstplay` event that was triggered by the {@link Tech}.
     *
     * @fires Player#firstplay
     * @listens Tech#firstplay
     * @deprecated As of 6.0 firstplay event is deprecated.
     *             As of 6.0 passing the `starttime` option to the player and the firstplay event are deprecated.
     * @private
     */;_proto.handleTechFirstPlay_=function handleTechFirstPlay_(){// If the first starttime attribute is specified
// then we will start at the given offset in seconds
if(this.options_.starttime){log.warn('Passing the `starttime` option to the player will be deprecated in 6.0');this.currentTime(this.options_.starttime);}this.addClass('vjs-has-started');/**
       * Fired the first time a video is played. Not part of the HLS spec, and this is
       * probably not the best implementation yet, so use sparingly. If you don't have a
       * reason to prevent playback, use `myPlayer.one('play');` instead.
       *
       * @event Player#firstplay
       * @deprecated As of 6.0 firstplay event is deprecated.
       * @type {EventTarget~Event}
       */this.trigger('firstplay');}/**
     * Retrigger the `pause` event that was triggered by the {@link Tech}.
     *
     * @fires Player#pause
     * @listens Tech#pause
     * @private
     */;_proto.handleTechPause_=function handleTechPause_(){this.removeClass('vjs-playing');this.addClass('vjs-paused');/**
       * Fired whenever the media has been paused
       *
       * @event Player#pause
       * @type {EventTarget~Event}
       */this.trigger('pause');}/**
     * Retrigger the `ended` event that was triggered by the {@link Tech}.
     *
     * @fires Player#ended
     * @listens Tech#ended
     * @private
     */;_proto.handleTechEnded_=function handleTechEnded_(){this.addClass('vjs-ended');if(this.options_.loop){this.currentTime(0);this.play();}else if(!this.paused()){this.pause();}/**
       * Fired when the end of the media resource is reached (currentTime == duration)
       *
       * @event Player#ended
       * @type {EventTarget~Event}
       */this.trigger('ended');}/**
     * Fired when the duration of the media resource is first known or changed
     *
     * @listens Tech#durationchange
     * @private
     */;_proto.handleTechDurationChange_=function handleTechDurationChange_(){this.duration(this.techGet_('duration'));}/**
     * Handle a click on the media element to play/pause
     *
     * @param {EventTarget~Event} event
     *        the event that caused this function to trigger
     *
     * @listens Tech#mousedown
     * @private
     */;_proto.handleTechClick_=function handleTechClick_(event){if(!isSingleLeftClick(event)){return;}// When controls are disabled a click should not toggle playback because
// the click is considered a control
if(!this.controls_){return;}if(this.paused()){silencePromise(this.play());}else{this.pause();}}/**
     * Handle a double-click on the media element to enter/exit fullscreen
     *
     * @param {EventTarget~Event} event
     *        the event that caused this function to trigger
     *
     * @listens Tech#dblclick
     * @private
     */;_proto.handleTechDoubleClick_=function handleTechDoubleClick_(event){if(!this.controls_){return;}// we do not want to toggle fullscreen state
// when double-clicking inside a control bar or a modal
var inAllowedEls=Array.prototype.some.call(this.$$('.vjs-control-bar, .vjs-modal-dialog'),function(el){return el.contains(event.target);});if(!inAllowedEls){/*
         * options.userActions.doubleClick
         *
         * If `undefined` or `true`, double-click toggles fullscreen if controls are present
         * Set to `false` to disable double-click handling
         * Set to a function to substitute an external double-click handler
         */if(this.options_===undefined||this.options_.userActions===undefined||this.options_.userActions.doubleClick===undefined||this.options_.userActions.doubleClick!==false){if(this.options_!==undefined&&this.options_.userActions!==undefined&&typeof this.options_.userActions.doubleClick==='function'){this.options_.userActions.doubleClick.call(this,event);}else if(this.isFullscreen()){this.exitFullscreen();}else{this.requestFullscreen();}}}}/**
     * Handle a tap on the media element. It will toggle the user
     * activity state, which hides and shows the controls.
     *
     * @listens Tech#tap
     * @private
     */;_proto.handleTechTap_=function handleTechTap_(){this.userActive(!this.userActive());}/**
     * Handle touch to start
     *
     * @listens Tech#touchstart
     * @private
     */;_proto.handleTechTouchStart_=function handleTechTouchStart_(){this.userWasActive=this.userActive();}/**
     * Handle touch to move
     *
     * @listens Tech#touchmove
     * @private
     */;_proto.handleTechTouchMove_=function handleTechTouchMove_(){if(this.userWasActive){this.reportUserActivity();}}/**
     * Handle touch to end
     *
     * @param {EventTarget~Event} event
     *        the touchend event that triggered
     *        this function
     *
     * @listens Tech#touchend
     * @private
     */;_proto.handleTechTouchEnd_=function handleTechTouchEnd_(event){// Stop the mouse events from also happening
event.preventDefault();}/**
     * native click events on the SWF aren't triggered on IE11, Win8.1RT
     * use stageclick events triggered from inside the SWF instead
     *
     * @private
     * @listens stageclick
     */;_proto.handleStageClick_=function handleStageClick_(){this.reportUserActivity();}/**
     * @private
     */;_proto.toggleFullscreenClass_=function toggleFullscreenClass_(){if(this.isFullscreen()){this.addClass('vjs-fullscreen');}else{this.removeClass('vjs-fullscreen');}}/**
     * when the document fschange event triggers it calls this
     */;_proto.documentFullscreenChange_=function documentFullscreenChange_(e){var fsApi=FullscreenApi;this.isFullscreen(document[fsApi.fullscreenElement]===this.el()||this.el().matches(':'+fsApi.fullscreen));// If cancelling fullscreen, remove event listener.
if(this.isFullscreen()===false){off(document,fsApi.fullscreenchange,this.boundDocumentFullscreenChange_);}if(!prefixedAPI){/**
         * @event Player#fullscreenchange
         * @type {EventTarget~Event}
         */this.trigger('fullscreenchange');}}/**
     * Handle Tech Fullscreen Change
     *
     * @param {EventTarget~Event} event
     *        the fullscreenchange event that triggered this function
     *
     * @param {Object} data
     *        the data that was sent with the event
     *
     * @private
     * @listens Tech#fullscreenchange
     * @fires Player#fullscreenchange
     */;_proto.handleTechFullscreenChange_=function handleTechFullscreenChange_(event,data){if(data){this.isFullscreen(data.isFullscreen);}/**
       * Fired when going in and out of fullscreen.
       *
       * @event Player#fullscreenchange
       * @type {EventTarget~Event}
       */this.trigger('fullscreenchange');}/**
     * Fires when an error occurred during the loading of an audio/video.
     *
     * @private
     * @listens Tech#error
     */;_proto.handleTechError_=function handleTechError_(){var error=this.tech_.error();this.error(error);}/**
     * Retrigger the `textdata` event that was triggered by the {@link Tech}.
     *
     * @fires Player#textdata
     * @listens Tech#textdata
     * @private
     */;_proto.handleTechTextData_=function handleTechTextData_(){var data=null;if(arguments.length>1){data=arguments[1];}/**
       * Fires when we get a textdata event from tech
       *
       * @event Player#textdata
       * @type {EventTarget~Event}
       */this.trigger('textdata',data);}/**
     * Get object for cached values.
     *
     * @return {Object}
     *         get the current object cache
     */;_proto.getCache=function getCache(){return this.cache_;}/**
     * Resets the internal cache object.
     *
     * Using this function outside the player constructor or reset method may
     * have unintended side-effects.
     *
     * @private
     */;_proto.resetCache_=function resetCache_(){this.cache_={// Right now, the currentTime is not _really_ cached because it is always
// retrieved from the tech (see: currentTime). However, for completeness,
// we set it to zero here to ensure that if we do start actually caching
// it, we reset it along with everything else.
currentTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:'',source:{},sources:[],volume:1};}/**
     * Pass values to the playback tech
     *
     * @param {string} [method]
     *        the method to call
     *
     * @param {Object} arg
     *        the argument to pass
     *
     * @private
     */;_proto.techCall_=function techCall_(method,arg){// If it's not ready yet, call method when it is
this.ready(function(){if(method in allowedSetters){return set$1(this.middleware_,this.tech_,method,arg);}else if(method in allowedMediators){return mediate(this.middleware_,this.tech_,method,arg);}try{if(this.tech_){this.tech_[method](arg);}}catch(e){log(e);throw e;}},true);}/**
     * Get calls can't wait for the tech, and sometimes don't need to.
     *
     * @param {string} method
     *        Tech method
     *
     * @return {Function|undefined}
     *         the method or undefined
     *
     * @private
     */;_proto.techGet_=function techGet_(method){if(!this.tech_||!this.tech_.isReady_){return;}if(method in allowedGetters){return get(this.middleware_,this.tech_,method);}else if(method in allowedMediators){return mediate(this.middleware_,this.tech_,method);}// Flash likes to die and reload when you hide or reposition it.
// In these cases the object methods go away and we get errors.
// When that happens we'll catch the errors and inform tech that it's not ready any more.
try{return this.tech_[method]();}catch(e){// When building additional tech libs, an expected method may not be defined yet
if(this.tech_[method]===undefined){log("Video.js: "+method+" method not defined for "+this.techName_+" playback technology.",e);throw e;}// When a method isn't available on the object it throws a TypeError
if(e.name==='TypeError'){log("Video.js: "+method+" unavailable on "+this.techName_+" playback technology element.",e);this.tech_.isReady_=false;throw e;}// If error unknown, just log and throw
log(e);throw e;}}/**
     * Attempt to begin playback at the first opportunity.
     *
     * @return {Promise|undefined}
     *         Returns a promise if the browser supports Promises (or one
     *         was passed in as an option). This promise will be resolved on
     *         the return value of play. If this is undefined it will fulfill the
     *         promise chain otherwise the promise chain will be fulfilled when
     *         the promise from play is fulfilled.
     */;_proto.play=function play(){var _this8=this;var PromiseClass=this.options_.Promise||window$1.Promise;if(PromiseClass){return new PromiseClass(function(resolve){_this8.play_(resolve);});}return this.play_();}/**
     * The actual logic for play, takes a callback that will be resolved on the
     * return value of play. This allows us to resolve to the play promise if there
     * is one on modern browsers.
     *
     * @private
     * @param {Function} [callback]
     *        The callback that should be called when the techs play is actually called
     */;_proto.play_=function play_(callback){var _this9=this;if(callback===void 0){callback=silencePromise;}this.playCallbacks_.push(callback);var isSrcReady=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));// treat calls to play_ somewhat like the `one` event function
if(this.waitToPlay_){this.off(['ready','loadstart'],this.waitToPlay_);this.waitToPlay_=null;}// if the player/tech is not ready or the src itself is not ready
// queue up a call to play on `ready` or `loadstart`
if(!this.isReady_||!isSrcReady){this.waitToPlay_=function(e){_this9.play_();};this.one(['ready','loadstart'],this.waitToPlay_);// if we are in Safari, there is a high chance that loadstart will trigger after the gesture timeperiod
// in that case, we need to prime the video element by calling load so it'll be ready in time
if(!isSrcReady&&(IS_ANY_SAFARI||IS_IOS)){this.load();}return;}// If the player/tech is ready and we have a source, we can attempt playback.
var val=this.techGet_('play');// play was terminated if the returned value is null
if(val===null){this.runPlayTerminatedQueue_();}else{this.runPlayCallbacks_(val);}}/**
     * These functions will be run when if play is terminated. If play
     * runPlayCallbacks_ is run these function will not be run. This allows us
     * to differenciate between a terminated play and an actual call to play.
     */;_proto.runPlayTerminatedQueue_=function runPlayTerminatedQueue_(){var queue=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];queue.forEach(function(q){q();});}/**
     * When a callback to play is delayed we have to run these
     * callbacks when play is actually called on the tech. This function
     * runs the callbacks that were delayed and accepts the return value
     * from the tech.
     *
     * @param {undefined|Promise} val
     *        The return value from the tech.
     */;_proto.runPlayCallbacks_=function runPlayCallbacks_(val){var callbacks=this.playCallbacks_.slice(0);this.playCallbacks_=[];// clear play terminatedQueue since we finished a real play
this.playTerminatedQueue_=[];callbacks.forEach(function(cb){cb(val);});}/**
     * Pause the video playback
     *
     * @return {Player}
     *         A reference to the player object this function was called on
     */;_proto.pause=function pause(){this.techCall_('pause');}/**
     * Check if the player is paused or has yet to play
     *
     * @return {boolean}
     *         - false: if the media is currently playing
     *         - true: if media is not currently playing
     */;_proto.paused=function paused(){// The initial state of paused should be true (in Safari it's actually false)
return this.techGet_('paused')===false?false:true;}/**
     * Get a TimeRange object representing the current ranges of time that the user
     * has played.
     *
     * @return {TimeRange}
     *         A time range object that represents all the increments of time that have
     *         been played.
     */;_proto.played=function played(){return this.techGet_('played')||createTimeRanges(0,0);}/**
     * Returns whether or not the user is "scrubbing". Scrubbing is
     * when the user has clicked the progress bar handle and is
     * dragging it along the progress bar.
     *
     * @param {boolean} [isScrubbing]
     *        whether the user is or is not scrubbing
     *
     * @return {boolean}
     *         The value of scrubbing when getting
     */;_proto.scrubbing=function scrubbing(isScrubbing){if(typeof isScrubbing==='undefined'){return this.scrubbing_;}this.scrubbing_=!!isScrubbing;if(isScrubbing){this.addClass('vjs-scrubbing');}else{this.removeClass('vjs-scrubbing');}}/**
     * Get or set the current time (in seconds)
     *
     * @param {number|string} [seconds]
     *        The time to seek to in seconds
     *
     * @return {number}
     *         - the current time in seconds when getting
     */;_proto.currentTime=function currentTime(seconds){if(typeof seconds!=='undefined'){if(seconds<0){seconds=0;}this.techCall_('setCurrentTime',seconds);return;}// cache last currentTime and return. default to 0 seconds
//
// Caching the currentTime is meant to prevent a massive amount of reads on the tech's
// currentTime when scrubbing, but may not provide much performance benefit afterall.
// Should be tested. Also something has to read the actual current time or the cache will
// never get updated.
this.cache_.currentTime=this.techGet_('currentTime')||0;return this.cache_.currentTime;}/**
     * Normally gets the length in time of the video in seconds;
     * in all but the rarest use cases an argument will NOT be passed to the method
     *
     * > **NOTE**: The video must have started loading before the duration can be
     * known, and in the case of Flash, may not be known until the video starts
     * playing.
     *
     * @fires Player#durationchange
     *
     * @param {number} [seconds]
     *        The duration of the video to set in seconds
     *
     * @return {number}
     *         - The duration of the video in seconds when getting
     */;_proto.duration=function duration(seconds){if(seconds===undefined){// return NaN if the duration is not known
return this.cache_.duration!==undefined?this.cache_.duration:NaN;}seconds=parseFloat(seconds);// Standardize on Infinity for signaling video is live
if(seconds<0){seconds=Infinity;}if(seconds!==this.cache_.duration){// Cache the last set value for optimized scrubbing (esp. Flash)
this.cache_.duration=seconds;if(seconds===Infinity){this.addClass('vjs-live');if(this.options_.liveui&&this.player_.liveTracker){this.addClass('vjs-liveui');}}else{this.removeClass('vjs-live');this.removeClass('vjs-liveui');}if(!isNaN(seconds)){// Do not fire durationchange unless the duration value is known.
// @see [Spec]{@link https://www.w3.org/TR/2011/WD-html5-20110113/video.html#media-element-load-algorithm}
/**
           * @event Player#durationchange
           * @type {EventTarget~Event}
           */this.trigger('durationchange');}}}/**
     * Calculates how much time is left in the video. Not part
     * of the native video API.
     *
     * @return {number}
     *         The time remaining in seconds
     */;_proto.remainingTime=function remainingTime(){return this.duration()-this.currentTime();}/**
     * A remaining time function that is intented to be used when
     * the time is to be displayed directly to the user.
     *
     * @return {number}
     *         The rounded time remaining in seconds
     */;_proto.remainingTimeDisplay=function remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime());}//
// Kind of like an array of portions of the video that have been downloaded.
/**
     * Get a TimeRange object with an array of the times of the video
     * that have been downloaded. If you just want the percent of the
     * video that's been downloaded, use bufferedPercent.
     *
     * @see [Buffered Spec]{@link http://dev.w3.org/html5/spec/video.html#dom-media-buffered}
     *
     * @return {TimeRange}
     *         A mock TimeRange object (following HTML spec)
     */;_proto.buffered=function buffered(){var buffered=this.techGet_('buffered');if(!buffered||!buffered.length){buffered=createTimeRanges(0,0);}return buffered;}/**
     * Get the percent (as a decimal) of the video that's been downloaded.
     * This method is not a part of the native HTML video API.
     *
     * @return {number}
     *         A decimal between 0 and 1 representing the percent
     *         that is buffered 0 being 0% and 1 being 100%
     */;_proto.bufferedPercent=function bufferedPercent$$1(){return bufferedPercent(this.buffered(),this.duration());}/**
     * Get the ending time of the last buffered time range
     * This is used in the progress bar to encapsulate all time ranges.
     *
     * @return {number}
     *         The end of the last buffered time range
     */;_proto.bufferedEnd=function bufferedEnd(){var buffered=this.buffered();var duration=this.duration();var end=buffered.end(buffered.length-1);if(end>duration){end=duration;}return end;}/**
     * Get or set the current volume of the media
     *
     * @param  {number} [percentAsDecimal]
     *         The new volume as a decimal percent:
     *         - 0 is muted/0%/off
     *         - 1.0 is 100%/full
     *         - 0.5 is half volume or 50%
     *
     * @return {number}
     *         The current volume as a percent when getting
     */;_proto.volume=function volume(percentAsDecimal){var vol;if(percentAsDecimal!==undefined){// Force value to between 0 and 1
vol=Math.max(0,Math.min(1,parseFloat(percentAsDecimal)));this.cache_.volume=vol;this.techCall_('setVolume',vol);if(vol>0){this.lastVolume_(vol);}return;}// Default to 1 when returning current volume.
vol=parseFloat(this.techGet_('volume'));return isNaN(vol)?1:vol;}/**
     * Get the current muted state, or turn mute on or off
     *
     * @param {boolean} [muted]
     *        - true to mute
     *        - false to unmute
     *
     * @return {boolean}
     *         - true if mute is on and getting
     *         - false if mute is off and getting
     */;_proto.muted=function muted(_muted){if(_muted!==undefined){this.techCall_('setMuted',_muted);return;}return this.techGet_('muted')||false;}/**
     * Get the current defaultMuted state, or turn defaultMuted on or off. defaultMuted
     * indicates the state of muted on initial playback.
     *
     * ```js
     *   var myPlayer = videojs('some-player-id');
     *
     *   myPlayer.src("http://www.example.com/path/to/video.mp4");
     *
     *   // get, should be false
     *   console.log(myPlayer.defaultMuted());
     *   // set to true
     *   myPlayer.defaultMuted(true);
     *   // get should be true
     *   console.log(myPlayer.defaultMuted());
     * ```
     *
     * @param {boolean} [defaultMuted]
     *        - true to mute
     *        - false to unmute
     *
     * @return {boolean|Player}
     *         - true if defaultMuted is on and getting
     *         - false if defaultMuted is off and getting
     *         - A reference to the current player when setting
     */;_proto.defaultMuted=function defaultMuted(_defaultMuted){if(_defaultMuted!==undefined){return this.techCall_('setDefaultMuted',_defaultMuted);}return this.techGet_('defaultMuted')||false;}/**
     * Get the last volume, or set it
     *
     * @param  {number} [percentAsDecimal]
     *         The new last volume as a decimal percent:
     *         - 0 is muted/0%/off
     *         - 1.0 is 100%/full
     *         - 0.5 is half volume or 50%
     *
     * @return {number}
     *         the current value of lastVolume as a percent when getting
     *
     * @private
     */;_proto.lastVolume_=function lastVolume_(percentAsDecimal){if(percentAsDecimal!==undefined&&percentAsDecimal!==0){this.cache_.lastVolume=percentAsDecimal;return;}return this.cache_.lastVolume;}/**
     * Check if current tech can support native fullscreen
     * (e.g. with built in controls like iOS, so not our flash swf)
     *
     * @return {boolean}
     *         if native fullscreen is supported
     */;_proto.supportsFullScreen=function supportsFullScreen(){return this.techGet_('supportsFullScreen')||false;}/**
     * Check if the player is in fullscreen mode or tell the player that it
     * is or is not in fullscreen mode.
     *
     * > NOTE: As of the latest HTML5 spec, isFullscreen is no longer an official
     * property and instead document.fullscreenElement is used. But isFullscreen is
     * still a valuable property for internal player workings.
     *
     * @param  {boolean} [isFS]
     *         Set the players current fullscreen state
     *
     * @return {boolean}
     *         - true if fullscreen is on and getting
     *         - false if fullscreen is off and getting
     */;_proto.isFullscreen=function isFullscreen(isFS){if(isFS!==undefined){this.isFullscreen_=!!isFS;this.toggleFullscreenClass_();return;}return!!this.isFullscreen_;}/**
     * Increase the size of the video to full screen
     * In some browsers, full screen is not supported natively, so it enters
     * "full window mode", where the video fills the browser window.
     * In browsers and devices that support native full screen, sometimes the
     * browser's default controls will be shown, and not the Video.js custom skin.
     * This includes most mobile devices (iOS, Android) and older versions of
     * Safari.
     *
     * @fires Player#fullscreenchange
     */;_proto.requestFullscreen=function requestFullscreen(){var fsApi=FullscreenApi;this.isFullscreen(true);if(fsApi.requestFullscreen){// the browser supports going fullscreen at the element level so we can
// take the controls fullscreen as well as the video
// Trigger fullscreenchange event after change
// We have to specifically add this each time, and remove
// when canceling fullscreen. Otherwise if there's multiple
// players on a page, they would all be reacting to the same fullscreen
// events
on(document,fsApi.fullscreenchange,this.boundDocumentFullscreenChange_);this.el_[fsApi.requestFullscreen]();}else if(this.tech_.supportsFullScreen()){// we can't take the video.js controls fullscreen but we can go fullscreen
// with native controls
this.techCall_('enterFullScreen');}else{// fullscreen isn't supported so we'll just stretch the video element to
// fill the viewport
this.enterFullWindow();/**
         * @event Player#fullscreenchange
         * @type {EventTarget~Event}
         */this.trigger('fullscreenchange');}}/**
     * Return the video to its normal size after having been in full screen mode
     *
     * @fires Player#fullscreenchange
     */;_proto.exitFullscreen=function exitFullscreen(){var fsApi=FullscreenApi;this.isFullscreen(false);// Check for browser element fullscreen support
if(fsApi.requestFullscreen){document[fsApi.exitFullscreen]();}else if(this.tech_.supportsFullScreen()){this.techCall_('exitFullScreen');}else{this.exitFullWindow();/**
         * @event Player#fullscreenchange
         * @type {EventTarget~Event}
         */this.trigger('fullscreenchange');}}/**
     * When fullscreen isn't supported we can stretch the
     * video container to as wide as the browser will let us.
     *
     * @fires Player#enterFullWindow
     */;_proto.enterFullWindow=function enterFullWindow(){this.isFullWindow=true;// Storing original doc overflow value to return to when fullscreen is off
this.docOrigOverflow=document.documentElement.style.overflow;// Add listener for esc key to exit fullscreen
on(document,'keydown',this.boundFullWindowOnEscKey_);// Hide any scroll bars
document.documentElement.style.overflow='hidden';// Apply fullscreen styles
addClass(document.body,'vjs-full-window');/**
       * @event Player#enterFullWindow
       * @type {EventTarget~Event}
       */this.trigger('enterFullWindow');}/**
     * Check for call to either exit full window or
     * full screen on ESC key
     *
     * @param {string} event
     *        Event to check for key press
     */;_proto.fullWindowOnEscKey=function fullWindowOnEscKey(event){if(keycode.isEventKey(event,'Esc')){if(this.isFullscreen()===true){this.exitFullscreen();}else{this.exitFullWindow();}}}/**
     * Exit full window
     *
     * @fires Player#exitFullWindow
     */;_proto.exitFullWindow=function exitFullWindow(){this.isFullWindow=false;off(document,'keydown',this.boundFullWindowOnEscKey_);// Unhide scroll bars.
document.documentElement.style.overflow=this.docOrigOverflow;// Remove fullscreen styles
removeClass(document.body,'vjs-full-window');// Resize the box, controller, and poster to original sizes
// this.positionAll();
/**
       * @event Player#exitFullWindow
       * @type {EventTarget~Event}
       */this.trigger('exitFullWindow');}/**
     * This gets called when a `Player` gains focus via a `focus` event.
     * Turns on listening for `keydown` events. When they happen it
     * calls `this.handleKeyPress`.
     *
     * @param {EventTarget~Event} event
     *        The `focus` event that caused this function to be called.
     *
     * @listens focus
     */;_proto.handleFocus=function handleFocus(event){// call off first to make sure we don't keep adding keydown handlers
off(document,'keydown',this.boundHandleKeyPress_);on(document,'keydown',this.boundHandleKeyPress_);}/**
     * Called when a `Player` loses focus. Turns off the listener for
     * `keydown` events. Which Stops `this.handleKeyPress` from getting called.
     *
     * @param {EventTarget~Event} event
     *        The `blur` event that caused this function to be called.
     *
     * @listens blur
     */;_proto.handleBlur=function handleBlur(event){off(document,'keydown',this.boundHandleKeyPress_);}/**
     * Called when this Player has focus and a key gets pressed down, or when
     * any Component of this player receives a key press that it doesn't handle.
     * This allows player-wide hotkeys (either as defined below, or optionally
     * by an external function).
     *
     * @param {EventTarget~Event} event
     *        The `keydown` event that caused this function to be called.
     *
     * @listens keydown
     */;_proto.handleKeyPress=function handleKeyPress(event){if(this.options_.userActions&&this.options_.userActions.hotkeys&&this.options_.userActions.hotkeys!==false){if(typeof this.options_.userActions.hotkeys==='function'){this.options_.userActions.hotkeys.call(this,event);}else{this.handleHotkeys(event);}}}/**
     * Called when this Player receives a hotkey keydown event.
     * Supported player-wide hotkeys are:
     *
     *   f          - toggle fullscreen
     *   m          - toggle mute
     *   k or Space - toggle play/pause
     *
     * @param {EventTarget~Event} event
     *        The `keydown` event that caused this function to be called.
     */;_proto.handleHotkeys=function handleHotkeys(event){var hotkeys=this.options_.userActions?this.options_.userActions.hotkeys:{};// set fullscreenKey, muteKey, playPauseKey from `hotkeys`, use defaults if not set
var _hotkeys$fullscreenKe=hotkeys.fullscreenKey,fullscreenKey=_hotkeys$fullscreenKe===void 0?function(keydownEvent){return keycode.isEventKey(keydownEvent,'f');}:_hotkeys$fullscreenKe,_hotkeys$muteKey=hotkeys.muteKey,muteKey=_hotkeys$muteKey===void 0?function(keydownEvent){return keycode.isEventKey(keydownEvent,'m');}:_hotkeys$muteKey,_hotkeys$playPauseKey=hotkeys.playPauseKey,playPauseKey=_hotkeys$playPauseKey===void 0?function(keydownEvent){return keycode.isEventKey(keydownEvent,'k')||keycode.isEventKey(keydownEvent,'Space');}:_hotkeys$playPauseKey;if(fullscreenKey.call(this,event)){event.preventDefault();var FSToggle=Component.getComponent('FullscreenToggle');if(document[FullscreenApi.fullscreenEnabled]!==false){FSToggle.prototype.handleClick.call(this);}}else if(muteKey.call(this,event)){event.preventDefault();var MuteToggle=Component.getComponent('MuteToggle');MuteToggle.prototype.handleClick.call(this);}else if(playPauseKey.call(this,event)){event.preventDefault();var PlayToggle=Component.getComponent('PlayToggle');PlayToggle.prototype.handleClick.call(this);}}/**
     * Check whether the player can play a given mimetype
     *
     * @see https://www.w3.org/TR/2011/WD-html5-20110113/video.html#dom-navigator-canplaytype
     *
     * @param {string} type
     *        The mimetype to check
     *
     * @return {string}
     *         'probably', 'maybe', or '' (empty string)
     */;_proto.canPlayType=function canPlayType(type){var can;// Loop through each playback technology in the options order
for(var i=0,j=this.options_.techOrder;i<j.length;i++){var techName=j[i];var tech=Tech.getTech(techName);// Support old behavior of techs being registered as components.
// Remove once that deprecated behavior is removed.
if(!tech){tech=Component.getComponent(techName);}// Check if the current tech is defined before continuing
if(!tech){log.error("The \""+techName+"\" tech is undefined. Skipped browser support check for that tech.");continue;}// Check if the browser supports this technology
if(tech.isSupported()){can=tech.canPlayType(type);if(can){return can;}}}return'';}/**
     * Select source based on tech-order or source-order
     * Uses source-order selection if `options.sourceOrder` is truthy. Otherwise,
     * defaults to tech-order selection
     *
     * @param {Array} sources
     *        The sources for a media asset
     *
     * @return {Object|boolean}
     *         Object of source and tech order or false
     */;_proto.selectSource=function selectSource(sources){var _this10=this;// Get only the techs specified in `techOrder` that exist and are supported by the
// current platform
var techs=this.options_.techOrder.map(function(techName){return[techName,Tech.getTech(techName)];}).filter(function(_ref){var techName=_ref[0],tech=_ref[1];// Check if the current tech is defined before continuing
if(tech){// Check if the browser supports this technology
return tech.isSupported();}log.error("The \""+techName+"\" tech is undefined. Skipped browser support check for that tech.");return false;});// Iterate over each `innerArray` element once per `outerArray` element and execute
// `tester` with both. If `tester` returns a non-falsy value, exit early and return
// that value.
var findFirstPassingTechSourcePair=function findFirstPassingTechSourcePair(outerArray,innerArray,tester){var found;outerArray.some(function(outerChoice){return innerArray.some(function(innerChoice){found=tester(outerChoice,innerChoice);if(found){return true;}});});return found;};var foundSourceAndTech;var flip=function flip(fn){return function(a,b){return fn(b,a);};};var finder=function finder(_ref2,source){var techName=_ref2[0],tech=_ref2[1];if(tech.canPlaySource(source,_this10.options_[techName.toLowerCase()])){return{source:source,tech:techName};}};// Depending on the truthiness of `options.sourceOrder`, we swap the order of techs and sources
// to select from them based on their priority.
if(this.options_.sourceOrder){// Source-first ordering
foundSourceAndTech=findFirstPassingTechSourcePair(sources,techs,flip(finder));}else{// Tech-first ordering
foundSourceAndTech=findFirstPassingTechSourcePair(techs,sources,finder);}return foundSourceAndTech||false;}/**
     * Get or set the video source.
     *
     * @param {Tech~SourceObject|Tech~SourceObject[]|string} [source]
     *        A SourceObject, an array of SourceObjects, or a string referencing
     *        a URL to a media source. It is _highly recommended_ that an object
     *        or array of objects is used here, so that source selection
     *        algorithms can take the `type` into account.
     *
     *        If not provided, this method acts as a getter.
     *
     * @return {string|undefined}
     *         If the `source` argument is missing, returns the current source
     *         URL. Otherwise, returns nothing/undefined.
     */;_proto.src=function src(source){var _this11=this;// getter usage
if(typeof source==='undefined'){return this.cache_.src||'';}// filter out invalid sources and turn our source into
// an array of source objects
var sources=filterSource(source);// if a source was passed in then it is invalid because
// it was filtered to a zero length Array. So we have to
// show an error
if(!sources.length){this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)});},0);return;}// intial sources
this.changingSrc_=true;this.cache_.sources=sources;this.updateSourceCaches_(sources[0]);// middlewareSource is the source after it has been changed by middleware
setSource(this,sources[0],function(middlewareSource,mws){_this11.middleware_=mws;// since sourceSet is async we have to update the cache again after we select a source since
// the source that is selected could be out of order from the cache update above this callback.
_this11.cache_.sources=sources;_this11.updateSourceCaches_(middlewareSource);var err=_this11.src_(middlewareSource);if(err){if(sources.length>1){return _this11.src(sources.slice(1));}_this11.changingSrc_=false;// We need to wrap this in a timeout to give folks a chance to add error event handlers
_this11.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)});},0);// we could not find an appropriate tech, but let's still notify the delegate that this is it
// this needs a better comment about why this is needed
_this11.triggerReady();return;}setTech(mws,_this11.tech_);});}/**
     * Set the source object on the tech, returns a boolean that indicates whether
     * there is a tech that can play the source or not
     *
     * @param {Tech~SourceObject} source
     *        The source object to set on the Tech
     *
     * @return {boolean}
     *         - True if there is no Tech to playback this source
     *         - False otherwise
     *
     * @private
     */;_proto.src_=function src_(source){var _this12=this;var sourceTech=this.selectSource([source]);if(!sourceTech){return true;}if(!titleCaseEquals(sourceTech.tech,this.techName_)){this.changingSrc_=true;// load this technology with the chosen source
this.loadTech_(sourceTech.tech,sourceTech.source);this.tech_.ready(function(){_this12.changingSrc_=false;});return false;}// wait until the tech is ready to set the source
// and set it synchronously if possible (#2326)
this.ready(function(){// The setSource tech method was added with source handlers
// so older techs won't support it
// We need to check the direct prototype for the case where subclasses
// of the tech do not support source handlers
if(this.tech_.constructor.prototype.hasOwnProperty('setSource')){this.techCall_('setSource',source);}else{this.techCall_('src',source.src);}this.changingSrc_=false;},true);return false;}/**
     * Begin loading the src data.
     */;_proto.load=function load(){this.techCall_('load');}/**
     * Reset the player. Loads the first tech in the techOrder,
     * removes all the text tracks in the existing `tech`,
     * and calls `reset` on the `tech`.
     */;_proto.reset=function reset(){var _this13=this;var PromiseClass=this.options_.Promise||window$1.Promise;if(this.paused()||!PromiseClass){this.doReset_();}else{var playPromise=this.play();silencePromise(playPromise.then(function(){return _this13.doReset_();}));}};_proto.doReset_=function doReset_(){if(this.tech_){this.tech_.clearTracks('text');}this.resetCache_();this.poster('');this.loadTech_(this.options_.techOrder[0],null);this.techCall_('reset');this.resetControlBarUI_();if(isEvented(this)){this.trigger('playerreset');}}/**
     * Reset Control Bar's UI by calling sub-methods that reset
     * all of Control Bar's components
     */;_proto.resetControlBarUI_=function resetControlBarUI_(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_();}/**
     * Reset tech's progress so progress bar is reset in the UI
     */;_proto.resetProgressBar_=function resetProgressBar_(){this.currentTime(0);var _this$controlBar=this.controlBar,durationDisplay=_this$controlBar.durationDisplay,remainingTimeDisplay=_this$controlBar.remainingTimeDisplay;if(durationDisplay){durationDisplay.updateContent();}if(remainingTimeDisplay){remainingTimeDisplay.updateContent();}}/**
     * Reset Playback ratio
     */;_proto.resetPlaybackRate_=function resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_();}/**
     * Reset Volume bar
     */;_proto.resetVolumeBar_=function resetVolumeBar_(){this.volume(1.0);this.trigger('volumechange');}/**
     * Returns all of the current source objects.
     *
     * @return {Tech~SourceObject[]}
     *         The current source objects
     */;_proto.currentSources=function currentSources(){var source=this.currentSource();var sources=[];// assume `{}` or `{ src }`
if(Object.keys(source).length!==0){sources.push(source);}return this.cache_.sources||sources;}/**
     * Returns the current source object.
     *
     * @return {Tech~SourceObject}
     *         The current source object
     */;_proto.currentSource=function currentSource(){return this.cache_.source||{};}/**
     * Returns the fully qualified URL of the current source value e.g. http://mysite.com/video.mp4
     * Can be used in conjunction with `currentType` to assist in rebuilding the current source object.
     *
     * @return {string}
     *         The current source
     */;_proto.currentSrc=function currentSrc(){return this.currentSource()&&this.currentSource().src||'';}/**
     * Get the current source type e.g. video/mp4
     * This can allow you rebuild the current source object so that you could load the same
     * source and tech later
     *
     * @return {string}
     *         The source MIME type
     */;_proto.currentType=function currentType(){return this.currentSource()&&this.currentSource().type||'';}/**
     * Get or set the preload attribute
     *
     * @param {boolean} [value]
     *        - true means that we should preload
     *        - false means that we should not preload
     *
     * @return {string}
     *         The preload attribute value when getting
     */;_proto.preload=function preload(value){if(value!==undefined){this.techCall_('setPreload',value);this.options_.preload=value;return;}return this.techGet_('preload');}/**
     * Get or set the autoplay option. When this is a boolean it will
     * modify the attribute on the tech. When this is a string the attribute on
     * the tech will be removed and `Player` will handle autoplay on loadstarts.
     *
     * @param {boolean|string} [value]
     *        - true: autoplay using the browser behavior
     *        - false: do not autoplay
     *        - 'play': call play() on every loadstart
     *        - 'muted': call muted() then play() on every loadstart
     *        - 'any': call play() on every loadstart. if that fails call muted() then play().
     *        - *: values other than those listed here will be set `autoplay` to true
     *
     * @return {boolean|string}
     *         The current value of autoplay when getting
     */;_proto.autoplay=function autoplay(value){// getter usage
if(value===undefined){return this.options_.autoplay||false;}var techAutoplay;// if the value is a valid string set it to that
if(typeof value==='string'&&/(any|play|muted)/.test(value)){this.options_.autoplay=value;this.manualAutoplay_(value);techAutoplay=false;// any falsy value sets autoplay to false in the browser,
// lets do the same
}else if(!value){this.options_.autoplay=false;// any other value (ie truthy) sets autoplay to true
}else{this.options_.autoplay=true;}techAutoplay=typeof techAutoplay==='undefined'?this.options_.autoplay:techAutoplay;// if we don't have a tech then we do not queue up
// a setAutoplay call on tech ready. We do this because the
// autoplay option will be passed in the constructor and we
// do not need to set it twice
if(this.tech_){this.techCall_('setAutoplay',techAutoplay);}}/**
     * Set or unset the playsinline attribute.
     * Playsinline tells the browser that non-fullscreen playback is preferred.
     *
     * @param {boolean} [value]
     *        - true means that we should try to play inline by default
     *        - false means that we should use the browser's default playback mode,
     *          which in most cases is inline. iOS Safari is a notable exception
     *          and plays fullscreen by default.
     *
     * @return {string|Player}
     *         - the current value of playsinline
     *         - the player when setting
     *
     * @see [Spec]{@link https://html.spec.whatwg.org/#attr-video-playsinline}
     */;_proto.playsinline=function playsinline(value){if(value!==undefined){this.techCall_('setPlaysinline',value);this.options_.playsinline=value;return this;}return this.techGet_('playsinline');}/**
     * Get or set the loop attribute on the video element.
     *
     * @param {boolean} [value]
     *        - true means that we should loop the video
     *        - false means that we should not loop the video
     *
     * @return {boolean}
     *         The current value of loop when getting
     */;_proto.loop=function loop(value){if(value!==undefined){this.techCall_('setLoop',value);this.options_.loop=value;return;}return this.techGet_('loop');}/**
     * Get or set the poster image source url
     *
     * @fires Player#posterchange
     *
     * @param {string} [src]
     *        Poster image source URL
     *
     * @return {string}
     *         The current value of poster when getting
     */;_proto.poster=function poster(src){if(src===undefined){return this.poster_;}// The correct way to remove a poster is to set as an empty string
// other falsey values will throw errors
if(!src){src='';}if(src===this.poster_){return;}// update the internal poster variable
this.poster_=src;// update the tech's poster
this.techCall_('setPoster',src);this.isPosterFromTech_=false;// alert components that the poster has been set
/**
       * This event fires when the poster image is changed on the player.
       *
       * @event Player#posterchange
       * @type {EventTarget~Event}
       */this.trigger('posterchange');}/**
     * Some techs (e.g. YouTube) can provide a poster source in an
     * asynchronous way. We want the poster component to use this
     * poster source so that it covers up the tech's controls.
     * (YouTube's play button). However we only want to use this
     * source if the player user hasn't set a poster through
     * the normal APIs.
     *
     * @fires Player#posterchange
     * @listens Tech#posterchange
     * @private
     */;_proto.handleTechPosterChange_=function handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var newPoster=this.tech_.poster()||'';if(newPoster!==this.poster_){this.poster_=newPoster;this.isPosterFromTech_=true;// Let components know the poster has changed
this.trigger('posterchange');}}}/**
     * Get or set whether or not the controls are showing.
     *
     * @fires Player#controlsenabled
     *
     * @param {boolean} [bool]
     *        - true to turn controls on
     *        - false to turn controls off
     *
     * @return {boolean}
     *         The current value of controls when getting
     */;_proto.controls=function controls(bool){if(bool===undefined){return!!this.controls_;}bool=!!bool;// Don't trigger a change event unless it actually changed
if(this.controls_===bool){return;}this.controls_=bool;if(this.usingNativeControls()){this.techCall_('setControls',bool);}if(this.controls_){this.removeClass('vjs-controls-disabled');this.addClass('vjs-controls-enabled');/**
         * @event Player#controlsenabled
         * @type {EventTarget~Event}
         */this.trigger('controlsenabled');if(!this.usingNativeControls()){this.addTechControlsListeners_();}}else{this.removeClass('vjs-controls-enabled');this.addClass('vjs-controls-disabled');/**
         * @event Player#controlsdisabled
         * @type {EventTarget~Event}
         */this.trigger('controlsdisabled');if(!this.usingNativeControls()){this.removeTechControlsListeners_();}}}/**
     * Toggle native controls on/off. Native controls are the controls built into
     * devices (e.g. default iPhone controls), Flash, or other techs
     * (e.g. Vimeo Controls)
     * **This should only be set by the current tech, because only the tech knows
     * if it can support native controls**
     *
     * @fires Player#usingnativecontrols
     * @fires Player#usingcustomcontrols
     *
     * @param {boolean} [bool]
     *        - true to turn native controls on
     *        - false to turn native controls off
     *
     * @return {boolean}
     *         The current value of native controls when getting
     */;_proto.usingNativeControls=function usingNativeControls(bool){if(bool===undefined){return!!this.usingNativeControls_;}bool=!!bool;// Don't trigger a change event unless it actually changed
if(this.usingNativeControls_===bool){return;}this.usingNativeControls_=bool;if(this.usingNativeControls_){this.addClass('vjs-using-native-controls');/**
         * player is using the native device controls
         *
         * @event Player#usingnativecontrols
         * @type {EventTarget~Event}
         */this.trigger('usingnativecontrols');}else{this.removeClass('vjs-using-native-controls');/**
         * player is using the custom HTML controls
         *
         * @event Player#usingcustomcontrols
         * @type {EventTarget~Event}
         */this.trigger('usingcustomcontrols');}}/**
     * Set or get the current MediaError
     *
     * @fires Player#error
     *
     * @param  {MediaError|string|number} [err]
     *         A MediaError or a string/number to be turned
     *         into a MediaError
     *
     * @return {MediaError|null}
     *         The current MediaError when getting (or null)
     */;_proto.error=function error(err){if(err===undefined){return this.error_||null;}// restoring to default
if(err===null){this.error_=err;this.removeClass('vjs-error');if(this.errorDisplay){this.errorDisplay.close();}return;}this.error_=new MediaError(err);// add the vjs-error classname to the player
this.addClass('vjs-error');// log the name of the error type and any message
// IE11 logs "[object object]" and required you to expand message to see error object
log.error("(CODE:"+this.error_.code+" "+MediaError.errorTypes[this.error_.code]+")",this.error_.message,this.error_);/**
       * @event Player#error
       * @type {EventTarget~Event}
       */this.trigger('error');return;}/**
     * Report user activity
     *
     * @param {Object} event
     *        Event object
     */;_proto.reportUserActivity=function reportUserActivity(event){this.userActivity_=true;}/**
     * Get/set if user is active
     *
     * @fires Player#useractive
     * @fires Player#userinactive
     *
     * @param {boolean} [bool]
     *        - true if the user is active
     *        - false if the user is inactive
     *
     * @return {boolean}
     *         The current value of userActive when getting
     */;_proto.userActive=function userActive(bool){if(bool===undefined){return this.userActive_;}bool=!!bool;if(bool===this.userActive_){return;}this.userActive_=bool;if(this.userActive_){this.userActivity_=true;this.removeClass('vjs-user-inactive');this.addClass('vjs-user-active');/**
         * @event Player#useractive
         * @type {EventTarget~Event}
         */this.trigger('useractive');return;}// Chrome/Safari/IE have bugs where when you change the cursor it can
// trigger a mousemove event. This causes an issue when you're hiding
// the cursor when the user is inactive, and a mousemove signals user
// activity. Making it impossible to go into inactive mode. Specifically
// this happens in fullscreen when we really need to hide the cursor.
//
// When this gets resolved in ALL browsers it can be removed
// https://code.google.com/p/chromium/issues/detail?id=103041
if(this.tech_){this.tech_.one('mousemove',function(e){e.stopPropagation();e.preventDefault();});}this.userActivity_=false;this.removeClass('vjs-user-active');this.addClass('vjs-user-inactive');/**
       * @event Player#userinactive
       * @type {EventTarget~Event}
       */this.trigger('userinactive');}/**
     * Listen for user activity based on timeout value
     *
     * @private
     */;_proto.listenForUserActivity_=function listenForUserActivity_(){var mouseInProgress;var lastMoveX;var lastMoveY;var handleActivity=bind(this,this.reportUserActivity);var handleMouseMove=function handleMouseMove(e){// #1068 - Prevent mousemove spamming
// Chrome Bug: https://code.google.com/p/chromium/issues/detail?id=366970
if(e.screenX!==lastMoveX||e.screenY!==lastMoveY){lastMoveX=e.screenX;lastMoveY=e.screenY;handleActivity();}};var handleMouseDown=function handleMouseDown(){handleActivity();// For as long as the they are touching the device or have their mouse down,
// we consider them active even if they're not moving their finger or mouse.
// So we want to continue to update that they are active
this.clearInterval(mouseInProgress);// Setting userActivity=true now and setting the interval to the same time
// as the activityCheck interval (250) should ensure we never miss the
// next activityCheck
mouseInProgress=this.setInterval(handleActivity,250);};var handleMouseUp=function handleMouseUp(event){handleActivity();// Stop the interval that maintains activity if the mouse/touch is down
this.clearInterval(mouseInProgress);};// Any mouse movement will be considered user activity
this.on('mousedown',handleMouseDown);this.on('mousemove',handleMouseMove);this.on('mouseup',handleMouseUp);var controlBar=this.getChild('controlBar');// Fixes bug on Android & iOS where when tapping progressBar (when control bar is displayed)
// controlBar would no longer be hidden by default timeout.
if(controlBar&&!IS_IOS&&!IS_ANDROID){controlBar.on('mouseenter',function(event){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;this.player().options_.inactivityTimeout=0;});controlBar.on('mouseleave',function(event){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout;});}// Listen for keyboard navigation
// Shouldn't need to use inProgress interval because of key repeat
this.on('keydown',handleActivity);this.on('keyup',handleActivity);// Run an interval every 250 milliseconds instead of stuffing everything into
// the mousemove/touchmove function itself, to prevent performance degradation.
// `this.reportUserActivity` simply sets this.userActivity_ to true, which
// then gets picked up by this loop
// http://ejohn.org/blog/learning-from-twitter/
var inactivityTimeout;this.setInterval(function(){// Check to see if mouse/touch activity has happened
if(!this.userActivity_){return;}// Reset the activity tracker
this.userActivity_=false;// If the user state was inactive, set the state to active
this.userActive(true);// Clear any existing inactivity timeout to start the timer over
this.clearTimeout(inactivityTimeout);var timeout=this.options_.inactivityTimeout;if(timeout<=0){return;}// In <timeout> milliseconds, if no more activity has occurred the
// user will be considered inactive
inactivityTimeout=this.setTimeout(function(){// Protect against the case where the inactivityTimeout can trigger just
// before the next user activity is picked up by the activity check loop
// causing a flicker
if(!this.userActivity_){this.userActive(false);}},timeout);},250);}/**
     * Gets or sets the current playback rate. A playback rate of
     * 1.0 represents normal speed and 0.5 would indicate half-speed
     * playback, for instance.
     *
     * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-playbackrate
     *
     * @param {number} [rate]
     *       New playback rate to set.
     *
     * @return {number}
     *         The current playback rate when getting or 1.0
     */;_proto.playbackRate=function playbackRate(rate){if(rate!==undefined){// NOTE: this.cache_.lastPlaybackRate is set from the tech handler
// that is registered above
this.techCall_('setPlaybackRate',rate);return;}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.cache_.lastPlaybackRate||this.techGet_('playbackRate');}return 1.0;}/**
     * Gets or sets the current default playback rate. A default playback rate of
     * 1.0 represents normal speed and 0.5 would indicate half-speed playback, for instance.
     * defaultPlaybackRate will only represent what the initial playbackRate of a video was, not
     * not the current playbackRate.
     *
     * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-defaultplaybackrate
     *
     * @param {number} [rate]
     *       New default playback rate to set.
     *
     * @return {number|Player}
     *         - The default playback rate when getting or 1.0
     *         - the player when setting
     */;_proto.defaultPlaybackRate=function defaultPlaybackRate(rate){if(rate!==undefined){return this.techCall_('setDefaultPlaybackRate',rate);}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.techGet_('defaultPlaybackRate');}return 1.0;}/**
     * Gets or sets the audio flag
     *
     * @param {boolean} bool
     *        - true signals that this is an audio player
     *        - false signals that this is not an audio player
     *
     * @return {boolean}
     *         The current value of isAudio when getting
     */;_proto.isAudio=function isAudio(bool){if(bool!==undefined){this.isAudio_=!!bool;return;}return!!this.isAudio_;}/**
     * A helper method for adding a {@link TextTrack} to our
     * {@link TextTrackList}.
     *
     * In addition to the W3C settings we allow adding additional info through options.
     *
     * @see http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-addtexttrack
     *
     * @param {string} [kind]
     *        the kind of TextTrack you are adding
     *
     * @param {string} [label]
     *        the label to give the TextTrack label
     *
     * @param {string} [language]
     *        the language to set on the TextTrack
     *
     * @return {TextTrack|undefined}
     *         the TextTrack that was added or undefined
     *         if there is no tech
     */;_proto.addTextTrack=function addTextTrack(kind,label,language){if(this.tech_){return this.tech_.addTextTrack(kind,label,language);}}/**
     * Create a remote {@link TextTrack} and an {@link HTMLTrackElement}. It will
     * automatically removed from the video element whenever the source changes, unless
     * manualCleanup is set to false.
     *
     * @param {Object} options
     *        Options to pass to {@link HTMLTrackElement} during creation. See
     *        {@link HTMLTrackElement} for object properties that you should use.
     *
     * @param {boolean} [manualCleanup=true] if set to false, the TextTrack will be
     *
     * @return {HtmlTrackElement}
     *         the HTMLTrackElement that was created and added
     *         to the HtmlTrackElementList and the remote
     *         TextTrackList
     *
     * @deprecated The default value of the "manualCleanup" parameter will default
     *             to "false" in upcoming versions of Video.js
     */;_proto.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){if(this.tech_){return this.tech_.addRemoteTextTrack(options,manualCleanup);}}/**
     * Remove a remote {@link TextTrack} from the respective
     * {@link TextTrackList} and {@link HtmlTrackElementList}.
     *
     * @param {Object} track
     *        Remote {@link TextTrack} to remove
     *
     * @return {undefined}
     *         does not return anything
     */;_proto.removeRemoteTextTrack=function removeRemoteTextTrack(obj){if(obj===void 0){obj={};}var _obj=obj,track=_obj.track;if(!track){track=obj;}// destructure the input into an object with a track argument, defaulting to arguments[0]
// default the whole argument to an empty object if nothing was passed in
if(this.tech_){return this.tech_.removeRemoteTextTrack(track);}}/**
     * Gets available media playback quality metrics as specified by the W3C's Media
     * Playback Quality API.
     *
     * @see [Spec]{@link https://wicg.github.io/media-playback-quality}
     *
     * @return {Object|undefined}
     *         An object with supported media playback quality metrics or undefined if there
     *         is no tech or the tech does not support it.
     */;_proto.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return this.techGet_('getVideoPlaybackQuality');}/**
     * Get video width
     *
     * @return {number}
     *         current video width
     */;_proto.videoWidth=function videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0;}/**
     * Get video height
     *
     * @return {number}
     *         current video height
     */;_proto.videoHeight=function videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0;}/**
     * The player's language code
     * NOTE: The language should be set in the player options if you want the
     * the controls to be built with a specific language. Changing the language
     * later will not update controls text.
     *
     * @param {string} [code]
     *        the language code to set the player to
     *
     * @return {string}
     *         The current language code when getting
     */;_proto.language=function language(code){if(code===undefined){return this.language_;}this.language_=String(code).toLowerCase();}/**
     * Get the player's language dictionary
     * Merge every time, because a newly added plugin might call videojs.addLanguage() at any time
     * Languages specified directly in the player options have precedence
     *
     * @return {Array}
     *         An array of of supported languages
     */;_proto.languages=function languages(){return mergeOptions(Player.prototype.options_.languages,this.languages_);}/**
     * returns a JavaScript object reperesenting the current track
     * information. **DOES not return it as JSON**
     *
     * @return {Object}
     *         Object representing the current of track info
     */;_proto.toJSON=function toJSON(){var options=mergeOptions(this.options_);var tracks=options.tracks;options.tracks=[];for(var i=0;i<tracks.length;i++){var track=tracks[i];// deep merge tracks and null out player so no circular references
track=mergeOptions(track);track.player=undefined;options.tracks[i]=track;}return options;}/**
     * Creates a simple modal dialog (an instance of the {@link ModalDialog}
     * component) that immediately overlays the player with arbitrary
     * content and removes itself when closed.
     *
     * @param {string|Function|Element|Array|null} content
     *        Same as {@link ModalDialog#content}'s param of the same name.
     *        The most straight-forward usage is to provide a string or DOM
     *        element.
     *
     * @param {Object} [options]
     *        Extra options which will be passed on to the {@link ModalDialog}.
     *
     * @return {ModalDialog}
     *         the {@link ModalDialog} that was created
     */;_proto.createModal=function createModal(content,options){var _this14=this;options=options||{};options.content=content||'';var modal=new ModalDialog(this,options);this.addChild(modal);modal.on('dispose',function(){_this14.removeChild(modal);});modal.open();return modal;}/**
     * Change breakpoint classes when the player resizes.
     *
     * @private
     */;_proto.updateCurrentBreakpoint_=function updateCurrentBreakpoint_(){if(!this.responsive()){return;}var currentBreakpoint=this.currentBreakpoint();var currentWidth=this.currentWidth();for(var i=0;i<BREAKPOINT_ORDER.length;i++){var candidateBreakpoint=BREAKPOINT_ORDER[i];var maxWidth=this.breakpoints_[candidateBreakpoint];if(currentWidth<=maxWidth){// The current breakpoint did not change, nothing to do.
if(currentBreakpoint===candidateBreakpoint){return;}// Only remove a class if there is a current breakpoint.
if(currentBreakpoint){this.removeClass(BREAKPOINT_CLASSES[currentBreakpoint]);}this.addClass(BREAKPOINT_CLASSES[candidateBreakpoint]);this.breakpoint_=candidateBreakpoint;break;}}}/**
     * Removes the current breakpoint.
     *
     * @private
     */;_proto.removeCurrentBreakpoint_=function removeCurrentBreakpoint_(){var className=this.currentBreakpointClass();this.breakpoint_='';if(className){this.removeClass(className);}}/**
     * Get or set breakpoints on the player.
     *
     * Calling this method with an object or `true` will remove any previous
     * custom breakpoints and start from the defaults again.
     *
     * @param  {Object|boolean} [breakpoints]
     *         If an object is given, it can be used to provide custom
     *         breakpoints. If `true` is given, will set default breakpoints.
     *         If this argument is not given, will simply return the current
     *         breakpoints.
     *
     * @param  {number} [breakpoints.tiny]
     *         The maximum width for the "vjs-layout-tiny" class.
     *
     * @param  {number} [breakpoints.xsmall]
     *         The maximum width for the "vjs-layout-x-small" class.
     *
     * @param  {number} [breakpoints.small]
     *         The maximum width for the "vjs-layout-small" class.
     *
     * @param  {number} [breakpoints.medium]
     *         The maximum width for the "vjs-layout-medium" class.
     *
     * @param  {number} [breakpoints.large]
     *         The maximum width for the "vjs-layout-large" class.
     *
     * @param  {number} [breakpoints.xlarge]
     *         The maximum width for the "vjs-layout-x-large" class.
     *
     * @param  {number} [breakpoints.huge]
     *         The maximum width for the "vjs-layout-huge" class.
     *
     * @return {Object}
     *         An object mapping breakpoint names to maximum width values.
     */;_proto.breakpoints=function breakpoints(_breakpoints){// Used as a getter.
if(_breakpoints===undefined){return assign(this.breakpoints_);}this.breakpoint_='';this.breakpoints_=assign({},DEFAULT_BREAKPOINTS,_breakpoints);// When breakpoint definitions change, we need to update the currently
// selected breakpoint.
this.updateCurrentBreakpoint_();// Clone the breakpoints before returning.
return assign(this.breakpoints_);}/**
     * Get or set a flag indicating whether or not this player should adjust
     * its UI based on its dimensions.
     *
     * @param  {boolean} value
     *         Should be `true` if the player should adjust its UI based on its
     *         dimensions; otherwise, should be `false`.
     *
     * @return {boolean}
     *         Will be `true` if this player should adjust its UI based on its
     *         dimensions; otherwise, will be `false`.
     */;_proto.responsive=function responsive(value){// Used as a getter.
if(value===undefined){return this.responsive_;}value=Boolean(value);var current=this.responsive_;// Nothing changed.
if(value===current){return;}// The value actually changed, set it.
this.responsive_=value;// Start listening for breakpoints and set the initial breakpoint if the
// player is now responsive.
if(value){this.on('playerresize',this.updateCurrentBreakpoint_);this.updateCurrentBreakpoint_();// Stop listening for breakpoints if the player is no longer responsive.
}else{this.off('playerresize',this.updateCurrentBreakpoint_);this.removeCurrentBreakpoint_();}return value;}/**
     * Get current breakpoint name, if any.
     *
     * @return {string}
     *         If there is currently a breakpoint set, returns a the key from the
     *         breakpoints object matching it. Otherwise, returns an empty string.
     */;_proto.currentBreakpoint=function currentBreakpoint(){return this.breakpoint_;}/**
     * Get the current breakpoint class name.
     *
     * @return {string}
     *         The matching class name (e.g. `"vjs-layout-tiny"` or
     *         `"vjs-layout-large"`) for the current breakpoint. Empty string if
     *         there is no current breakpoint.
     */;_proto.currentBreakpointClass=function currentBreakpointClass(){return BREAKPOINT_CLASSES[this.breakpoint_]||'';}/**
     * An object that describes a single piece of media.
     *
     * Properties that are not part of this type description will be retained; so,
     * this can be viewed as a generic metadata storage mechanism as well.
     *
     * @see      {@link https://wicg.github.io/mediasession/#the-mediametadata-interface}
     * @typedef  {Object} Player~MediaObject
     *
     * @property {string} [album]
     *           Unused, except if this object is passed to the `MediaSession`
     *           API.
     *
     * @property {string} [artist]
     *           Unused, except if this object is passed to the `MediaSession`
     *           API.
     *
     * @property {Object[]} [artwork]
     *           Unused, except if this object is passed to the `MediaSession`
     *           API. If not specified, will be populated via the `poster`, if
     *           available.
     *
     * @property {string} [poster]
     *           URL to an image that will display before playback.
     *
     * @property {Tech~SourceObject|Tech~SourceObject[]|string} [src]
     *           A single source object, an array of source objects, or a string
     *           referencing a URL to a media source. It is _highly recommended_
     *           that an object or array of objects is used here, so that source
     *           selection algorithms can take the `type` into account.
     *
     * @property {string} [title]
     *           Unused, except if this object is passed to the `MediaSession`
     *           API.
     *
     * @property {Object[]} [textTracks]
     *           An array of objects to be used to create text tracks, following
     *           the {@link https://www.w3.org/TR/html50/embedded-content-0.html#the-track-element|native track element format}.
     *           For ease of removal, these will be created as "remote" text
     *           tracks and set to automatically clean up on source changes.
     *
     *           These objects may have properties like `src`, `kind`, `label`,
     *           and `language`, see {@link Tech#createRemoteTextTrack}.
     *//**
     * Populate the player using a {@link Player~MediaObject|MediaObject}.
     *
     * @param  {Player~MediaObject} media
     *         A media object.
     *
     * @param  {Function} ready
     *         A callback to be called when the player is ready.
     */;_proto.loadMedia=function loadMedia(media,ready){var _this15=this;if(!media||(typeof media==='undefined'?'undefined':_typeof(media))!=='object'){return;}this.reset();// Clone the media object so it cannot be mutated from outside.
this.cache_.media=mergeOptions(media);var _this$cache_$media=this.cache_.media,artwork=_this$cache_$media.artwork,poster=_this$cache_$media.poster,src=_this$cache_$media.src,textTracks=_this$cache_$media.textTracks;// If `artwork` is not given, create it using `poster`.
if(!artwork&&poster){this.cache_.media.artwork=[{src:poster,type:getMimetype(poster)}];}if(src){this.src(src);}if(poster){this.poster(poster);}if(Array.isArray(textTracks)){textTracks.forEach(function(tt){return _this15.addRemoteTextTrack(tt,false);});}this.ready(ready);}/**
     * Get a clone of the current {@link Player~MediaObject} for this player.
     *
     * If the `loadMedia` method has not been used, will attempt to return a
     * {@link Player~MediaObject} based on the current state of the player.
     *
     * @return {Player~MediaObject}
     */;_proto.getMedia=function getMedia(){if(!this.cache_.media){var poster=this.poster();var src=this.currentSources();var textTracks=Array.prototype.map.call(this.remoteTextTracks(),function(tt){return{kind:tt.kind,label:tt.label,language:tt.language,src:tt.src};});var media={src:src,textTracks:textTracks};if(poster){media.poster=poster;media.artwork=[{src:media.poster,type:getMimetype(media.poster)}];}return media;}return mergeOptions(this.cache_.media);}/**
     * Gets tag settings
     *
     * @param {Element} tag
     *        The player tag
     *
     * @return {Object}
     *         An object containing all of the settings
     *         for a player tag
     */;Player.getTagSettings=function getTagSettings(tag){var baseOptions={sources:[],tracks:[]};var tagOptions=getAttributes(tag);var dataSetup=tagOptions['data-setup'];if(hasClass(tag,'vjs-fill')){tagOptions.fill=true;}if(hasClass(tag,'vjs-fluid')){tagOptions.fluid=true;}// Check if data-setup attr exists.
if(dataSetup!==null){// Parse options JSON
// If empty string, make it a parsable json object.
var _safeParseTuple=tuple(dataSetup||'{}'),err=_safeParseTuple[0],data=_safeParseTuple[1];if(err){log.error(err);}assign(tagOptions,data);}assign(baseOptions,tagOptions);// Get tag children settings
if(tag.hasChildNodes()){var children=tag.childNodes;for(var i=0,j=children.length;i<j;i++){var child=children[i];// Change case needed: http://ejohn.org/blog/nodename-case-sensitivity/
var childName=child.nodeName.toLowerCase();if(childName==='source'){baseOptions.sources.push(getAttributes(child));}else if(childName==='track'){baseOptions.tracks.push(getAttributes(child));}}}return baseOptions;}/**
     * Determine whether or not flexbox is supported
     *
     * @return {boolean}
     *         - true if flexbox is supported
     *         - false if flexbox is not supported
     */;_proto.flexNotSupported_=function flexNotSupported_(){var elem=document.createElement('i');// Note: We don't actually use flexBasis (or flexOrder), but it's one of the more
// common flex features that we can rely on when checking for flex support.
return!('flexBasis'in elem.style||'webkitFlexBasis'in elem.style||'mozFlexBasis'in elem.style||'msFlexBasis'in elem.style||// IE10-specific (2012 flex spec), available for completeness
'msFlexOrder'in elem.style);};return Player;}(Component);/**
   * Get the {@link VideoTrackList}
   * @link https://html.spec.whatwg.org/multipage/embedded-content.html#videotracklist
   *
   * @return {VideoTrackList}
   *         the current video track list
   *
   * @method Player.prototype.videoTracks
   *//**
   * Get the {@link AudioTrackList}
   * @link https://html.spec.whatwg.org/multipage/embedded-content.html#audiotracklist
   *
   * @return {AudioTrackList}
   *         the current audio track list
   *
   * @method Player.prototype.audioTracks
   *//**
   * Get the {@link TextTrackList}
   *
   * @link http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-texttracks
   *
   * @return {TextTrackList}
   *         the current text track list
   *
   * @method Player.prototype.textTracks
   *//**
   * Get the remote {@link TextTrackList}
   *
   * @return {TextTrackList}
   *         The current remote text track list
   *
   * @method Player.prototype.remoteTextTracks
   *//**
   * Get the remote {@link HtmlTrackElementList} tracks.
   *
   * @return {HtmlTrackElementList}
   *         The current remote text track element list
   *
   * @method Player.prototype.remoteTextTrackEls
   */ALL.names.forEach(function(name$$1){var props=ALL[name$$1];Player.prototype[props.getterName]=function(){if(this.tech_){return this.tech_[props.getterName]();}// if we have not yet loadTech_, we create {video,audio,text}Tracks_
// these will be passed to the tech during loading
this[props.privateName]=this[props.privateName]||new props.ListClass();return this[props.privateName];};});/**
   * Global enumeration of players.
   *
   * The keys are the player IDs and the values are either the {@link Player}
   * instance or `null` for disposed players.
   *
   * @type {Object}
   */Player.players={};var navigator=window$1.navigator;/*
   * Player instance options, surfaced using options
   * options = Player.prototype.options_
   * Make changes in options, not here.
   *
   * @type {Object}
   * @private
   */Player.prototype.options_={// Default order of fallback technology
techOrder:Tech.defaultTechOrder_,html5:{},flash:{},// default inactivity timeout
inactivityTimeout:2000,// default playback rates
playbackRates:[],// Add playback rate selection by adding rates
// 'playbackRates': [0.5, 1, 1.5, 2],
liveui:false,// Included control sets
children:['mediaLoader','posterImage','textTrackDisplay','loadingSpinner','bigPlayButton','liveTracker','controlBar','errorDisplay','textTrackSettings','resizeManager'],language:navigator&&(navigator.languages&&navigator.languages[0]||navigator.userLanguage||navigator.language)||'en',// locales and their language translations
languages:{},// Default message to show when a video cannot be played.
notSupportedMessage:'No compatible source was found for this media.',breakpoints:{},responsive:false};[/**
   * Returns whether or not the player is in the "ended" state.
   *
   * @return {Boolean} True if the player is in the ended state, false if not.
   * @method Player#ended
   */'ended',/**
   * Returns whether or not the player is in the "seeking" state.
   *
   * @return {Boolean} True if the player is in the seeking state, false if not.
   * @method Player#seeking
   */'seeking',/**
   * Returns the TimeRanges of the media that are currently available
   * for seeking to.
   *
   * @return {TimeRanges} the seekable intervals of the media timeline
   * @method Player#seekable
   */'seekable',/**
   * Returns the current state of network activity for the element, from
   * the codes in the list below.
   * - NETWORK_EMPTY (numeric value 0)
   *   The element has not yet been initialised. All attributes are in
   *   their initial states.
   * - NETWORK_IDLE (numeric value 1)
   *   The element's resource selection algorithm is active and has
   *   selected a resource, but it is not actually using the network at
   *   this time.
   * - NETWORK_LOADING (numeric value 2)
   *   The user agent is actively trying to download data.
   * - NETWORK_NO_SOURCE (numeric value 3)
   *   The element's resource selection algorithm is active, but it has
   *   not yet found a resource to use.
   *
   * @see https://html.spec.whatwg.org/multipage/embedded-content.html#network-states
   * @return {number} the current network activity state
   * @method Player#networkState
   */'networkState',/**
   * Returns a value that expresses the current state of the element
   * with respect to rendering the current playback position, from the
   * codes in the list below.
   * - HAVE_NOTHING (numeric value 0)
   *   No information regarding the media resource is available.
   * - HAVE_METADATA (numeric value 1)
   *   Enough of the resource has been obtained that the duration of the
   *   resource is available.
   * - HAVE_CURRENT_DATA (numeric value 2)
   *   Data for the immediate current playback position is available.
   * - HAVE_FUTURE_DATA (numeric value 3)
   *   Data for the immediate current playback position is available, as
   *   well as enough data for the user agent to advance the current
   *   playback position in the direction of playback.
   * - HAVE_ENOUGH_DATA (numeric value 4)
   *   The user agent estimates that enough data is available for
   *   playback to proceed uninterrupted.
   *
   * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-readystate
   * @return {number} the current playback rendering state
   * @method Player#readyState
   */'readyState'].forEach(function(fn){Player.prototype[fn]=function(){return this.techGet_(fn);};});TECH_EVENTS_RETRIGGER.forEach(function(event){Player.prototype["handleTech"+toTitleCase(event)+"_"]=function(){return this.trigger(event);};});/**
   * Fired when the player has initial duration and dimension information
   *
   * @event Player#loadedmetadata
   * @type {EventTarget~Event}
   *//**
   * Fired when the player has downloaded data at the current playback position
   *
   * @event Player#loadeddata
   * @type {EventTarget~Event}
   *//**
   * Fired when the current playback position has changed *
   * During playback this is fired every 15-250 milliseconds, depending on the
   * playback technology in use.
   *
   * @event Player#timeupdate
   * @type {EventTarget~Event}
   *//**
   * Fired when the volume changes
   *
   * @event Player#volumechange
   * @type {EventTarget~Event}
   *//**
   * Reports whether or not a player has a plugin available.
   *
   * This does not report whether or not the plugin has ever been initialized
   * on this player. For that, [usingPlugin]{@link Player#usingPlugin}.
   *
   * @method Player#hasPlugin
   * @param  {string}  name
   *         The name of a plugin.
   *
   * @return {boolean}
   *         Whether or not this player has the requested plugin available.
   *//**
   * Reports whether or not a player is using a plugin by name.
   *
   * For basic plugins, this only reports whether the plugin has _ever_ been
   * initialized on this player.
   *
   * @method Player#usingPlugin
   * @param  {string} name
   *         The name of a plugin.
   *
   * @return {boolean}
   *         Whether or not this player is using the requested plugin.
   */Component.registerComponent('Player',Player);/**
   * The base plugin name.
   *
   * @private
   * @constant
   * @type {string}
   */var BASE_PLUGIN_NAME='plugin';/**
   * The key on which a player's active plugins cache is stored.
   *
   * @private
   * @constant
   * @type     {string}
   */var PLUGIN_CACHE_KEY='activePlugins_';/**
   * Stores registered plugins in a private space.
   *
   * @private
   * @type    {Object}
   */var pluginStorage={};/**
   * Reports whether or not a plugin has been registered.
   *
   * @private
   * @param   {string} name
   *          The name of a plugin.
   *
   * @return {boolean}
   *          Whether or not the plugin has been registered.
   */var pluginExists=function pluginExists(name){return pluginStorage.hasOwnProperty(name);};/**
   * Get a single registered plugin by name.
   *
   * @private
   * @param   {string} name
   *          The name of a plugin.
   *
   * @return {Function|undefined}
   *          The plugin (or undefined).
   */var getPlugin=function getPlugin(name){return pluginExists(name)?pluginStorage[name]:undefined;};/**
   * Marks a plugin as "active" on a player.
   *
   * Also, ensures that the player has an object for tracking active plugins.
   *
   * @private
   * @param   {Player} player
   *          A Video.js player instance.
   *
   * @param   {string} name
   *          The name of a plugin.
   */var markPluginAsActive=function markPluginAsActive(player,name){player[PLUGIN_CACHE_KEY]=player[PLUGIN_CACHE_KEY]||{};player[PLUGIN_CACHE_KEY][name]=true;};/**
   * Triggers a pair of plugin setup events.
   *
   * @private
   * @param  {Player} player
   *         A Video.js player instance.
   *
   * @param  {Plugin~PluginEventHash} hash
   *         A plugin event hash.
   *
   * @param  {boolean} [before]
   *         If true, prefixes the event name with "before". In other words,
   *         use this to trigger "beforepluginsetup" instead of "pluginsetup".
   */var triggerSetupEvent=function triggerSetupEvent(player,hash,before){var eventName=(before?'before':'')+'pluginsetup';player.trigger(eventName,hash);player.trigger(eventName+':'+hash.name,hash);};/**
   * Takes a basic plugin function and returns a wrapper function which marks
   * on the player that the plugin has been activated.
   *
   * @private
   * @param   {string} name
   *          The name of the plugin.
   *
   * @param   {Function} plugin
   *          The basic plugin.
   *
   * @return {Function}
   *          A wrapper function for the given plugin.
   */var createBasicPlugin=function createBasicPlugin(name,plugin){var basicPluginWrapper=function basicPluginWrapper(){// We trigger the "beforepluginsetup" and "pluginsetup" events on the player
// regardless, but we want the hash to be consistent with the hash provided
// for advanced plugins.
//
// The only potentially counter-intuitive thing here is the `instance` in
// the "pluginsetup" event is the value returned by the `plugin` function.
triggerSetupEvent(this,{name:name,plugin:plugin,instance:null},true);var instance=plugin.apply(this,arguments);markPluginAsActive(this,name);triggerSetupEvent(this,{name:name,plugin:plugin,instance:instance});return instance;};Object.keys(plugin).forEach(function(prop){basicPluginWrapper[prop]=plugin[prop];});return basicPluginWrapper;};/**
   * Takes a plugin sub-class and returns a factory function for generating
   * instances of it.
   *
   * This factory function will replace itself with an instance of the requested
   * sub-class of Plugin.
   *
   * @private
   * @param   {string} name
   *          The name of the plugin.
   *
   * @param   {Plugin} PluginSubClass
   *          The advanced plugin.
   *
   * @return {Function}
   */var createPluginFactory=function createPluginFactory(name,PluginSubClass){// Add a `name` property to the plugin prototype so that each plugin can
// refer to itself by name.
PluginSubClass.prototype.name=name;return function(){triggerSetupEvent(this,{name:name,plugin:PluginSubClass,instance:null},true);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var instance=_construct(PluginSubClass,[this].concat(args));// The plugin is replaced by a function that returns the current instance.
this[name]=function(){return instance;};triggerSetupEvent(this,instance.getEventHash());return instance;};};/**
   * Parent class for all advanced plugins.
   *
   * @mixes   module:evented~EventedMixin
   * @mixes   module:stateful~StatefulMixin
   * @fires   Player#beforepluginsetup
   * @fires   Player#beforepluginsetup:$name
   * @fires   Player#pluginsetup
   * @fires   Player#pluginsetup:$name
   * @listens Player#dispose
   * @throws  {Error}
   *          If attempting to instantiate the base {@link Plugin} class
   *          directly instead of via a sub-class.
   */var Plugin=/*#__PURE__*/function(){/**
     * Creates an instance of this class.
     *
     * Sub-classes should call `super` to ensure plugins are properly initialized.
     *
     * @param {Player} player
     *        A Video.js player instance.
     */function Plugin(player){if(this.constructor===Plugin){throw new Error('Plugin must be sub-classed; not directly instantiated.');}this.player=player;// Make this object evented, but remove the added `trigger` method so we
// use the prototype version instead.
evented(this);delete this.trigger;stateful(this,this.constructor.defaultState);markPluginAsActive(player,this.name);// Auto-bind the dispose method so we can use it as a listener and unbind
// it later easily.
this.dispose=bind(this,this.dispose);// If the player is disposed, dispose the plugin.
player.on('dispose',this.dispose);}/**
     * Get the version of the plugin that was set on <pluginName>.VERSION
     */var _proto=Plugin.prototype;_proto.version=function version(){return this.constructor.VERSION;}/**
     * Each event triggered by plugins includes a hash of additional data with
     * conventional properties.
     *
     * This returns that object or mutates an existing hash.
     *
     * @param   {Object} [hash={}]
     *          An object to be used as event an event hash.
     *
     * @return {Plugin~PluginEventHash}
     *          An event hash object with provided properties mixed-in.
     */;_proto.getEventHash=function getEventHash(hash){if(hash===void 0){hash={};}hash.name=this.name;hash.plugin=this.constructor;hash.instance=this;return hash;}/**
     * Triggers an event on the plugin object and overrides
     * {@link module:evented~EventedMixin.trigger|EventedMixin.trigger}.
     *
     * @param   {string|Object} event
     *          An event type or an object with a type property.
     *
     * @param   {Object} [hash={}]
     *          Additional data hash to merge with a
     *          {@link Plugin~PluginEventHash|PluginEventHash}.
     *
     * @return {boolean}
     *          Whether or not default was prevented.
     */;_proto.trigger=function trigger$$1(event,hash){if(hash===void 0){hash={};}return trigger(this.eventBusEl_,event,this.getEventHash(hash));}/**
     * Handles "statechanged" events on the plugin. No-op by default, override by
     * subclassing.
     *
     * @abstract
     * @param    {Event} e
     *           An event object provided by a "statechanged" event.
     *
     * @param    {Object} e.changes
     *           An object describing changes that occurred with the "statechanged"
     *           event.
     */;_proto.handleStateChanged=function handleStateChanged(e){}/**
     * Disposes a plugin.
     *
     * Subclasses can override this if they want, but for the sake of safety,
     * it's probably best to subscribe the "dispose" event.
     *
     * @fires Plugin#dispose
     */;_proto.dispose=function dispose(){var name=this.name,player=this.player;/**
       * Signals that a advanced plugin is about to be disposed.
       *
       * @event Plugin#dispose
       * @type  {EventTarget~Event}
       */this.trigger('dispose');this.off();player.off('dispose',this.dispose);// Eliminate any possible sources of leaking memory by clearing up
// references between the player and the plugin instance and nulling out
// the plugin's state and replacing methods with a function that throws.
player[PLUGIN_CACHE_KEY][name]=false;this.player=this.state=null;// Finally, replace the plugin name on the player with a new factory
// function, so that the plugin is ready to be set up again.
player[name]=createPluginFactory(name,pluginStorage[name]);}/**
     * Determines if a plugin is a basic plugin (i.e. not a sub-class of `Plugin`).
     *
     * @param   {string|Function} plugin
     *          If a string, matches the name of a plugin. If a function, will be
     *          tested directly.
     *
     * @return {boolean}
     *          Whether or not a plugin is a basic plugin.
     */;Plugin.isBasic=function isBasic(plugin){var p=typeof plugin==='string'?getPlugin(plugin):plugin;return typeof p==='function'&&!Plugin.prototype.isPrototypeOf(p.prototype);}/**
     * Register a Video.js plugin.
     *
     * @param   {string} name
     *          The name of the plugin to be registered. Must be a string and
     *          must not match an existing plugin or a method on the `Player`
     *          prototype.
     *
     * @param   {Function} plugin
     *          A sub-class of `Plugin` or a function for basic plugins.
     *
     * @return {Function}
     *          For advanced plugins, a factory function for that plugin. For
     *          basic plugins, a wrapper function that initializes the plugin.
     */;Plugin.registerPlugin=function registerPlugin(name,plugin){if(typeof name!=='string'){throw new Error("Illegal plugin name, \""+name+"\", must be a string, was "+(typeof name==='undefined'?'undefined':_typeof(name))+".");}if(pluginExists(name)){log.warn("A plugin named \""+name+"\" already exists. You may want to avoid re-registering plugins!");}else if(Player.prototype.hasOwnProperty(name)){throw new Error("Illegal plugin name, \""+name+"\", cannot share a name with an existing player method!");}if(typeof plugin!=='function'){throw new Error("Illegal plugin for \""+name+"\", must be a function, was "+(typeof plugin==='undefined'?'undefined':_typeof(plugin))+".");}pluginStorage[name]=plugin;// Add a player prototype method for all sub-classed plugins (but not for
// the base Plugin class).
if(name!==BASE_PLUGIN_NAME){if(Plugin.isBasic(plugin)){Player.prototype[name]=createBasicPlugin(name,plugin);}else{Player.prototype[name]=createPluginFactory(name,plugin);}}return plugin;}/**
     * De-register a Video.js plugin.
     *
     * @param  {string} name
     *         The name of the plugin to be de-registered. Must be a string that
     *         matches an existing plugin.
     *
     * @throws {Error}
     *         If an attempt is made to de-register the base plugin.
     */;Plugin.deregisterPlugin=function deregisterPlugin(name){if(name===BASE_PLUGIN_NAME){throw new Error('Cannot de-register base plugin.');}if(pluginExists(name)){delete pluginStorage[name];delete Player.prototype[name];}}/**
     * Gets an object containing multiple Video.js plugins.
     *
     * @param   {Array} [names]
     *          If provided, should be an array of plugin names. Defaults to _all_
     *          plugin names.
     *
     * @return {Object|undefined}
     *          An object containing plugin(s) associated with their name(s) or
     *          `undefined` if no matching plugins exist).
     */;Plugin.getPlugins=function getPlugins(names){if(names===void 0){names=Object.keys(pluginStorage);}var result;names.forEach(function(name){var plugin=getPlugin(name);if(plugin){result=result||{};result[name]=plugin;}});return result;}/**
     * Gets a plugin's version, if available
     *
     * @param   {string} name
     *          The name of a plugin.
     *
     * @return {string}
     *          The plugin's version or an empty string.
     */;Plugin.getPluginVersion=function getPluginVersion(name){var plugin=getPlugin(name);return plugin&&plugin.VERSION||'';};return Plugin;}();/**
   * Gets a plugin by name if it exists.
   *
   * @static
   * @method   getPlugin
   * @memberOf Plugin
   * @param    {string} name
   *           The name of a plugin.
   *
   * @returns  {Function|undefined}
   *           The plugin (or `undefined`).
   */Plugin.getPlugin=getPlugin;/**
   * The name of the base plugin class as it is registered.
   *
   * @type {string}
   */Plugin.BASE_PLUGIN_NAME=BASE_PLUGIN_NAME;Plugin.registerPlugin(BASE_PLUGIN_NAME,Plugin);/**
   * Documented in player.js
   *
   * @ignore
   */Player.prototype.usingPlugin=function(name){return!!this[PLUGIN_CACHE_KEY]&&this[PLUGIN_CACHE_KEY][name]===true;};/**
   * Documented in player.js
   *
   * @ignore
   */Player.prototype.hasPlugin=function(name){return!!pluginExists(name);};/**
   * Signals that a plugin is about to be set up on a player.
   *
   * @event    Player#beforepluginsetup
   * @type     {Plugin~PluginEventHash}
   *//**
   * Signals that a plugin is about to be set up on a player - by name. The name
   * is the name of the plugin.
   *
   * @event    Player#beforepluginsetup:$name
   * @type     {Plugin~PluginEventHash}
   *//**
   * Signals that a plugin has just been set up on a player.
   *
   * @event    Player#pluginsetup
   * @type     {Plugin~PluginEventHash}
   *//**
   * Signals that a plugin has just been set up on a player - by name. The name
   * is the name of the plugin.
   *
   * @event    Player#pluginsetup:$name
   * @type     {Plugin~PluginEventHash}
   *//**
   * @typedef  {Object} Plugin~PluginEventHash
   *
   * @property {string} instance
   *           For basic plugins, the return value of the plugin function. For
   *           advanced plugins, the plugin instance on which the event is fired.
   *
   * @property {string} name
   *           The name of the plugin.
   *
   * @property {string} plugin
   *           For basic plugins, the plugin function. For advanced plugins, the
   *           plugin class/constructor.
   *//**
   * @file extend.js
   * @module extend
   *//**
   * A combination of node inherits and babel's inherits (after transpile).
   * Both work the same but node adds `super_` to the subClass
   * and Bable adds the superClass as __proto__. Both seem useful.
   *
   * @param {Object} subClass
   *        The class to inherit to
   *
   * @param {Object} superClass
   *        The class to inherit from
   *
   * @private
   */var _inherits$1=function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+(typeof superClass==='undefined'?'undefined':_typeof(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass){// node
subClass.super_=superClass;}};/**
   * Used to subclass an existing class by emulating ES subclassing using the
   * `extends` keyword.
   *
   * @function
   * @example
   * var MyComponent = videojs.extend(videojs.getComponent('Component'), {
   *   myCustomMethod: function() {
   *     // Do things in my method.
   *   }
   * });
   *
   * @param    {Function} superClass
   *           The class to inherit from
   *
   * @param    {Object}   [subClassMethods={}]
   *           Methods of the new class
   *
   * @return   {Function}
   *           The new class with subClassMethods that inherited superClass.
   */var extend$1=function extend(superClass,subClassMethods){if(subClassMethods===void 0){subClassMethods={};}var subClass=function subClass(){superClass.apply(this,arguments);};var methods={};if((typeof subClassMethods==='undefined'?'undefined':_typeof(subClassMethods))==='object'){if(subClassMethods.constructor!==Object.prototype.constructor){subClass=subClassMethods.constructor;}methods=subClassMethods;}else if(typeof subClassMethods==='function'){subClass=subClassMethods;}_inherits$1(subClass,superClass);// Extend subObj's prototype with functions and other properties from props
for(var name in methods){if(methods.hasOwnProperty(name)){subClass.prototype[name]=methods[name];}}return subClass;};/**
   * @file video.js
   * @module videojs
   *//**
   * Normalize an `id` value by trimming off a leading `#`
   *
   * @private
   * @param   {string} id
   *          A string, maybe with a leading `#`.
   *
   * @return {string}
   *          The string, without any leading `#`.
   */var normalizeId=function normalizeId(id){return id.indexOf('#')===0?id.slice(1):id;};/**
   * The `videojs()` function doubles as the main function for users to create a
   * {@link Player} instance as well as the main library namespace.
   *
   * It can also be used as a getter for a pre-existing {@link Player} instance.
   * However, we _strongly_ recommend using `videojs.getPlayer()` for this
   * purpose because it avoids any potential for unintended initialization.
   *
   * Due to [limitations](https://github.com/jsdoc3/jsdoc/issues/955#issuecomment-313829149)
   * of our JSDoc template, we cannot properly document this as both a function
   * and a namespace, so its function signature is documented here.
   *
   * #### Arguments
   * ##### id
   * string|Element, **required**
   *
   * Video element or video element ID.
   *
   * ##### options
   * Object, optional
   *
   * Options object for providing settings.
   * See: [Options Guide](https://docs.videojs.com/tutorial-options.html).
   *
   * ##### ready
   * {@link Component~ReadyCallback}, optional
   *
   * A function to be called when the {@link Player} and {@link Tech} are ready.
   *
   * #### Return Value
   *
   * The `videojs()` function returns a {@link Player} instance.
   *
   * @namespace
   *
   * @borrows AudioTrack as AudioTrack
   * @borrows Component.getComponent as getComponent
   * @borrows module:computed-style~computedStyle as computedStyle
   * @borrows module:events.on as on
   * @borrows module:events.one as one
   * @borrows module:events.off as off
   * @borrows module:events.trigger as trigger
   * @borrows EventTarget as EventTarget
   * @borrows module:extend~extend as extend
   * @borrows module:fn.bind as bind
   * @borrows module:format-time.formatTime as formatTime
   * @borrows module:format-time.resetFormatTime as resetFormatTime
   * @borrows module:format-time.setFormatTime as setFormatTime
   * @borrows module:merge-options.mergeOptions as mergeOptions
   * @borrows module:middleware.use as use
   * @borrows Player.players as players
   * @borrows Plugin.registerPlugin as registerPlugin
   * @borrows Plugin.deregisterPlugin as deregisterPlugin
   * @borrows Plugin.getPlugins as getPlugins
   * @borrows Plugin.getPlugin as getPlugin
   * @borrows Plugin.getPluginVersion as getPluginVersion
   * @borrows Tech.getTech as getTech
   * @borrows Tech.registerTech as registerTech
   * @borrows TextTrack as TextTrack
   * @borrows module:time-ranges.createTimeRanges as createTimeRange
   * @borrows module:time-ranges.createTimeRanges as createTimeRanges
   * @borrows module:url.isCrossOrigin as isCrossOrigin
   * @borrows module:url.parseUrl as parseUrl
   * @borrows VideoTrack as VideoTrack
   *
   * @param  {string|Element} id
   *         Video element or video element ID.
   *
   * @param  {Object} [options]
   *         Options object for providing settings.
   *         See: [Options Guide](https://docs.videojs.com/tutorial-options.html).
   *
   * @param  {Component~ReadyCallback} [ready]
   *         A function to be called when the {@link Player} and {@link Tech} are
   *         ready.
   *
   * @return {Player}
   *         The `videojs()` function returns a {@link Player|Player} instance.
   */function videojs$1(id,options,ready){var player=videojs$1.getPlayer(id);if(player){if(options){log.warn("Player \""+id+"\" is already initialised. Options will not be applied.");}if(ready){player.ready(ready);}return player;}var el=typeof id==='string'?$('#'+normalizeId(id)):id;if(!isEl(el)){throw new TypeError('The element or ID supplied is not valid. (videojs)');}// document.body.contains(el) will only check if el is contained within that one document.
// This causes problems for elements in iframes.
// Instead, use the element's ownerDocument instead of the global document.
// This will make sure that the element is indeed in the dom of that document.
// Additionally, check that the document in question has a default view.
// If the document is no longer attached to the dom, the defaultView of the document will be null.
if(!el.ownerDocument.defaultView||!el.ownerDocument.body.contains(el)){log.warn('The element supplied is not included in the DOM');}options=options||{};videojs$1.hooks('beforesetup').forEach(function(hookFunction){var opts=hookFunction(el,mergeOptions(options));if(!isObject(opts)||Array.isArray(opts)){log.error('please return an object in beforesetup hooks');return;}options=mergeOptions(options,opts);});// We get the current "Player" component here in case an integration has
// replaced it with a custom player.
var PlayerComponent=Component.getComponent('Player');player=new PlayerComponent(el,options,ready);videojs$1.hooks('setup').forEach(function(hookFunction){return hookFunction(player);});return player;}/**
   * An Object that contains lifecycle hooks as keys which point to an array
   * of functions that are run when a lifecycle is triggered
   *
   * @private
   */videojs$1.hooks_={};/**
   * Get a list of hooks for a specific lifecycle
   *
   * @param  {string} type
   *         the lifecyle to get hooks from
   *
   * @param  {Function|Function[]} [fn]
   *         Optionally add a hook (or hooks) to the lifecycle that your are getting.
   *
   * @return {Array}
   *         an array of hooks, or an empty array if there are none.
   */videojs$1.hooks=function(type,fn){videojs$1.hooks_[type]=videojs$1.hooks_[type]||[];if(fn){videojs$1.hooks_[type]=videojs$1.hooks_[type].concat(fn);}return videojs$1.hooks_[type];};/**
   * Add a function hook to a specific videojs lifecycle.
   *
   * @param {string} type
   *        the lifecycle to hook the function to.
   *
   * @param {Function|Function[]}
   *        The function or array of functions to attach.
   */videojs$1.hook=function(type,fn){videojs$1.hooks(type,fn);};/**
   * Add a function hook that will only run once to a specific videojs lifecycle.
   *
   * @param {string} type
   *        the lifecycle to hook the function to.
   *
   * @param {Function|Function[]}
   *        The function or array of functions to attach.
   */videojs$1.hookOnce=function(type,fn){videojs$1.hooks(type,[].concat(fn).map(function(original){var wrapper=function wrapper(){videojs$1.removeHook(type,wrapper);return original.apply(void 0,arguments);};return wrapper;}));};/**
   * Remove a hook from a specific videojs lifecycle.
   *
   * @param  {string} type
   *         the lifecycle that the function hooked to
   *
   * @param  {Function} fn
   *         The hooked function to remove
   *
   * @return {boolean}
   *         The function that was removed or undef
   */videojs$1.removeHook=function(type,fn){var index=videojs$1.hooks(type).indexOf(fn);if(index<=-1){return false;}videojs$1.hooks_[type]=videojs$1.hooks_[type].slice();videojs$1.hooks_[type].splice(index,1);return true;};// Add default styles
if(window$1.VIDEOJS_NO_DYNAMIC_STYLE!==true&&isReal()){var style$1=$('.vjs-styles-defaults');if(!style$1){style$1=createStyleElement('vjs-styles-defaults');var head=$('head');if(head){head.insertBefore(style$1,head.firstChild);}setTextContent(style$1,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ");}}// Run Auto-load players
// You have to wait at least once in case this script is loaded after your
// video in the DOM (weird behavior only with minified version)
autoSetupTimeout(1,videojs$1);/**
   * Current Video.js version. Follows [semantic versioning](https://semver.org/).
   *
   * @type {string}
   */videojs$1.VERSION=version;/**
   * The global options object. These are the settings that take effect
   * if no overrides are specified when the player is created.
   *
   * @type {Object}
   */videojs$1.options=Player.prototype.options_;/**
   * Get an object with the currently created players, keyed by player ID
   *
   * @return {Object}
   *         The created players
   */videojs$1.getPlayers=function(){return Player.players;};/**
   * Get a single player based on an ID or DOM element.
   *
   * This is useful if you want to check if an element or ID has an associated
   * Video.js player, but not create one if it doesn't.
   *
   * @param   {string|Element} id
   *          An HTML element - `<video>`, `<audio>`, or `<video-js>` -
   *          or a string matching the `id` of such an element.
   *
   * @return {Player|undefined}
   *          A player instance or `undefined` if there is no player instance
   *          matching the argument.
   */videojs$1.getPlayer=function(id){var players=Player.players;var tag;if(typeof id==='string'){var nId=normalizeId(id);var player=players[nId];if(player){return player;}tag=$('#'+nId);}else{tag=id;}if(isEl(tag)){var _tag=tag,_player=_tag.player,playerId=_tag.playerId;// Element may have a `player` property referring to an already created
// player instance. If so, return that.
if(_player||players[playerId]){return _player||players[playerId];}}};/**
   * Returns an array of all current players.
   *
   * @return {Array}
   *         An array of all players. The array will be in the order that
   *         `Object.keys` provides, which could potentially vary between
   *         JavaScript engines.
   *
   */videojs$1.getAllPlayers=function(){return(// Disposed players leave a key with a `null` value, so we need to make sure
// we filter those out.
Object.keys(Player.players).map(function(k){return Player.players[k];}).filter(Boolean));};videojs$1.players=Player.players;videojs$1.getComponent=Component.getComponent;/**
   * Register a component so it can referred to by name. Used when adding to other
   * components, either through addChild `component.addChild('myComponent')` or through
   * default children options  `{ children: ['myComponent'] }`.
   *
   * > NOTE: You could also just initialize the component before adding.
   * `component.addChild(new MyComponent());`
   *
   * @param {string} name
   *        The class name of the component
   *
   * @param {Component} comp
   *        The component class
   *
   * @return {Component}
   *         The newly registered component
   */videojs$1.registerComponent=function(name$$1,comp){if(Tech.isTech(comp)){log.warn("The "+name$$1+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");}Component.registerComponent.call(Component,name$$1,comp);};videojs$1.getTech=Tech.getTech;videojs$1.registerTech=Tech.registerTech;videojs$1.use=use;/**
   * An object that can be returned by a middleware to signify
   * that the middleware is being terminated.
   *
   * @type {object}
   * @property {object} middleware.TERMINATOR
   */Object.defineProperty(videojs$1,'middleware',{value:{},writeable:false,enumerable:true});Object.defineProperty(videojs$1.middleware,'TERMINATOR',{value:TERMINATOR,writeable:false,enumerable:true});/**
   * A reference to the {@link module:browser|browser utility module} as an object.
   *
   * @type {Object}
   * @see  {@link module:browser|browser}
   */videojs$1.browser=browser;/**
   * Use {@link module:browser.TOUCH_ENABLED|browser.TOUCH_ENABLED} instead; only
   * included for backward-compatibility with 4.x.
   *
   * @deprecated Since version 5.0, use {@link module:browser.TOUCH_ENABLED|browser.TOUCH_ENABLED instead.
   * @type {boolean}
   */videojs$1.TOUCH_ENABLED=TOUCH_ENABLED;videojs$1.extend=extend$1;videojs$1.mergeOptions=mergeOptions;videojs$1.bind=bind;videojs$1.registerPlugin=Plugin.registerPlugin;videojs$1.deregisterPlugin=Plugin.deregisterPlugin;/**
   * Deprecated method to register a plugin with Video.js
   *
   * @deprecated videojs.plugin() is deprecated; use videojs.registerPlugin() instead
   *
   * @param {string} name
   *        The plugin name
   *
   * @param {Plugin|Function} plugin
   *         The plugin sub-class or function
   */videojs$1.plugin=function(name$$1,plugin){log.warn('videojs.plugin() is deprecated; use videojs.registerPlugin() instead');return Plugin.registerPlugin(name$$1,plugin);};videojs$1.getPlugins=Plugin.getPlugins;videojs$1.getPlugin=Plugin.getPlugin;videojs$1.getPluginVersion=Plugin.getPluginVersion;/**
   * Adding languages so that they're available to all players.
   * Example: `videojs.addLanguage('es', { 'Hello': 'Hola' });`
   *
   * @param {string} code
   *        The language code or dictionary property
   *
   * @param {Object} data
   *        The data values to be translated
   *
   * @return {Object}
   *         The resulting language dictionary object
   */videojs$1.addLanguage=function(code,data){var _mergeOptions;code=(''+code).toLowerCase();videojs$1.options.languages=mergeOptions(videojs$1.options.languages,(_mergeOptions={},_mergeOptions[code]=data,_mergeOptions));return videojs$1.options.languages[code];};/**
   * A reference to the {@link module:log|log utility module} as an object.
   *
   * @type {Function}
   * @see  {@link module:log|log}
   */videojs$1.log=log;videojs$1.createLogger=createLogger$1;videojs$1.createTimeRange=videojs$1.createTimeRanges=createTimeRanges;videojs$1.formatTime=formatTime;videojs$1.setFormatTime=setFormatTime;videojs$1.resetFormatTime=resetFormatTime;videojs$1.parseUrl=parseUrl;videojs$1.isCrossOrigin=isCrossOrigin;videojs$1.EventTarget=EventTarget;videojs$1.on=on;videojs$1.one=one;videojs$1.off=off;videojs$1.trigger=trigger;/**
   * A cross-browser XMLHttpRequest wrapper.
   *
   * @function
   * @param    {Object} options
   *           Settings for the request.
   *
   * @return   {XMLHttpRequest|XDomainRequest}
   *           The request object.
   *
   * @see      https://github.com/Raynos/xhr
   */videojs$1.xhr=xhr;videojs$1.TextTrack=TextTrack;videojs$1.AudioTrack=AudioTrack;videojs$1.VideoTrack=VideoTrack;['isEl','isTextNode','createEl','hasClass','addClass','removeClass','toggleClass','setAttributes','getAttributes','emptyEl','appendContent','insertContent'].forEach(function(k){videojs$1[k]=function(){log.warn("videojs."+k+"() is deprecated; use videojs.dom."+k+"() instead");return Dom[k].apply(null,arguments);};});videojs$1.computedStyle=computedStyle;/**
   * A reference to the {@link module:dom|DOM utility module} as an object.
   *
   * @type {Object}
   * @see  {@link module:dom|dom}
   */videojs$1.dom=Dom;/**
   * A reference to the {@link module:url|URL utility module} as an object.
   *
   * @type {Object}
   * @see  {@link module:url|url}
   */videojs$1.url=Url;return videojs$1;});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZGVvLmNvcmUubm92dHQuanMiXSwibmFtZXMiOlsiZ2xvYmFsIiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsInZpZGVvanMiLCJ3aW5kb3ciLCJkb2N1bWVudCIsIndpbmRvdyQxIiwiaGFzT3duUHJvcGVydHkiLCJ2ZXJzaW9uIiwiX2luaGVyaXRzTG9vc2UiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsIl9fcHJvdG9fXyIsIl9zZXRQcm90b3R5cGVPZiIsIm8iLCJwIiwic2V0UHJvdG90eXBlT2YiLCJpc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QiLCJSZWZsZWN0IiwiY29uc3RydWN0Iiwic2hhbSIsIlByb3h5IiwiRGF0ZSIsInRvU3RyaW5nIiwiY2FsbCIsImUiLCJfY29uc3RydWN0IiwiUGFyZW50IiwiYXJncyIsIkNsYXNzIiwiYSIsInB1c2giLCJhcHBseSIsIkNvbnN0cnVjdG9yIiwiRnVuY3Rpb24iLCJiaW5kIiwiaW5zdGFuY2UiLCJhcmd1bWVudHMiLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwiUmVmZXJlbmNlRXJyb3IiLCJfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsTG9vc2UiLCJzdHJpbmdzIiwicmF3Iiwic2xpY2UiLCJoaXN0b3J5IiwiTG9nQnlUeXBlRmFjdG9yeSIsIm5hbWUiLCJsb2ciLCJ0eXBlIiwibGV2ZWwiLCJsdmwiLCJsZXZlbHMiLCJsdmxSZWdFeHAiLCJSZWdFeHAiLCJ1bnNoaWZ0IiwidG9VcHBlckNhc2UiLCJjb25jYXQiLCJjb25zb2xlIiwiZm4iLCJpbmZvIiwidGVzdCIsIkFycmF5IiwiaXNBcnJheSIsImNyZWF0ZUxvZ2dlciIsImxvZ0J5VHlwZSIsIl9sZW4iLCJsZW5ndGgiLCJfa2V5Iiwic3VibmFtZSIsImFsbCIsIm9mZiIsImRlYnVnIiwid2FybiIsImVycm9yIiwiREVGQVVMVCIsIkVycm9yIiwiZmlsdGVyIiwiZm5hbWUiLCJoaXN0b3J5SXRlbSIsImNsZWFyIiwiZGlzYWJsZSIsImVuYWJsZSIsIl9sZW4yIiwiX2tleTIiLCJfbGVuMyIsIl9rZXkzIiwiX2xlbjQiLCJfa2V5NCIsImNyZWF0ZUxvZ2dlciQxIiwiY2xlYW4iLCJzIiwicmVwbGFjZSIsInRzbWwiLCJzYSIsImkiLCJrZXlzIiwib2JqZWN0IiwiaXNPYmplY3QiLCJlYWNoIiwiZm9yRWFjaCIsImtleSIsInJlZHVjZSIsImluaXRpYWwiLCJhY2N1bSIsImFzc2lnbiIsInRhcmdldCIsInNvdXJjZXMiLCJzb3VyY2UiLCJ2YWx1ZSIsImlzUGxhaW4iLCJjb21wdXRlZFN0eWxlIiwiZWwiLCJwcm9wIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImNzIiwiX3RlbXBsYXRlT2JqZWN0IiwiZGF0YSIsImlzTm9uQmxhbmtTdHJpbmciLCJzdHIiLCJ0aHJvd0lmV2hpdGVzcGFjZSIsImNsYXNzUmVnRXhwIiwiY2xhc3NOYW1lIiwiaXNSZWFsIiwiaXNFbCIsIm5vZGVUeXBlIiwiaXNJbkZyYW1lIiwicGFyZW50IiwieCIsImNyZWF0ZVF1ZXJpZXIiLCJtZXRob2QiLCJzZWxlY3RvciIsImNvbnRleHQiLCJxdWVyeVNlbGVjdG9yIiwiY3R4IiwiY3JlYXRlRWwiLCJ0YWdOYW1lIiwicHJvcGVydGllcyIsImF0dHJpYnV0ZXMiLCJjb250ZW50IiwiY3JlYXRlRWxlbWVudCIsImdldE93blByb3BlcnR5TmFtZXMiLCJwcm9wTmFtZSIsInZhbCIsImluZGV4T2YiLCJzZXRBdHRyaWJ1dGUiLCJ0ZXh0Q29udGVudCIsImF0dHJOYW1lIiwiYXBwZW5kQ29udGVudCIsInRleHQiLCJpbm5lclRleHQiLCJwcmVwZW5kVG8iLCJjaGlsZCIsImZpcnN0Q2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJhcHBlbmRDaGlsZCIsImhhc0NsYXNzIiwiZWxlbWVudCIsImNsYXNzVG9DaGVjayIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiYWRkQ2xhc3MiLCJjbGFzc1RvQWRkIiwiYWRkIiwidHJpbSIsInJlbW92ZUNsYXNzIiwiY2xhc3NUb1JlbW92ZSIsInJlbW92ZSIsInNwbGl0IiwiYyIsImpvaW4iLCJ0b2dnbGVDbGFzcyIsImNsYXNzVG9Ub2dnbGUiLCJwcmVkaWNhdGUiLCJoYXMiLCJzZXRBdHRyaWJ1dGVzIiwiYXR0clZhbHVlIiwicmVtb3ZlQXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlcyIsInRhZyIsIm9iaiIsImtub3duQm9vbGVhbnMiLCJhdHRycyIsImF0dHJWYWwiLCJnZXRBdHRyaWJ1dGUiLCJhdHRyaWJ1dGUiLCJibG9ja1RleHRTZWxlY3Rpb24iLCJib2R5IiwiZm9jdXMiLCJvbnNlbGVjdHN0YXJ0IiwidW5ibG9ja1RleHRTZWxlY3Rpb24iLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJwYXJlbnROb2RlIiwicmVjdCIsInJlc3VsdCIsImsiLCJ1bmRlZmluZWQiLCJoZWlnaHQiLCJwYXJzZUZsb2F0Iiwid2lkdGgiLCJmaW5kUG9zaXRpb24iLCJib3giLCJsZWZ0IiwidG9wIiwiZG9jRWwiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRMZWZ0Iiwic2Nyb2xsTGVmdCIsInBhZ2VYT2Zmc2V0IiwiY2xpZW50VG9wIiwic2Nyb2xsVG9wIiwicGFnZVlPZmZzZXQiLCJNYXRoIiwicm91bmQiLCJnZXRQb2ludGVyUG9zaXRpb24iLCJldmVudCIsInBvc2l0aW9uIiwiYm94VyIsIm9mZnNldFdpZHRoIiwiYm94SCIsIm9mZnNldEhlaWdodCIsImJveFkiLCJib3hYIiwicGFnZVkiLCJwYWdlWCIsImNoYW5nZWRUb3VjaGVzIiwieSIsIm1heCIsIm1pbiIsImlzVGV4dE5vZGUiLCJlbXB0eUVsIiwicmVtb3ZlQ2hpbGQiLCJub3JtYWxpemVDb250ZW50IiwibWFwIiwiY3JlYXRlVGV4dE5vZGUiLCJub2RlIiwiaW5zZXJ0Q29udGVudCIsImlzU2luZ2xlTGVmdENsaWNrIiwiYnV0dG9uIiwiYnV0dG9ucyIsIiQiLCIkJCIsIkRvbSIsImZyZWV6ZSIsIl9ndWlkIiwibmV3R1VJRCIsImVsRGF0YSIsImVsSWRBdHRyIiwiZ2V0VGltZSIsImdldERhdGEiLCJpZCIsImhhc0RhdGEiLCJyZW1vdmVEYXRhIiwiX2NsZWFuVXBFdmVudHMiLCJlbGVtIiwiaGFuZGxlcnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hlciIsImRldGFjaEV2ZW50IiwiZGlzYWJsZWQiLCJfaGFuZGxlTXVsdGlwbGVFdmVudHMiLCJ0eXBlcyIsImNhbGxiYWNrIiwiZml4RXZlbnQiLCJyZXR1cm5UcnVlIiwicmV0dXJuRmFsc2UiLCJpc1Byb3BhZ2F0aW9uU3RvcHBlZCIsIm9sZCIsInByZXZlbnREZWZhdWx0Iiwic3JjRWxlbWVudCIsInJlbGF0ZWRUYXJnZXQiLCJmcm9tRWxlbWVudCIsInRvRWxlbWVudCIsInJldHVyblZhbHVlIiwiZGVmYXVsdFByZXZlbnRlZCIsInN0b3BQcm9wYWdhdGlvbiIsImNhbmNlbEJ1YmJsZSIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsImlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkIiwiY2xpZW50WCIsImRvYyIsImNsaWVudFkiLCJ3aGljaCIsImNoYXJDb2RlIiwia2V5Q29kZSIsIl9zdXBwb3J0c1Bhc3NpdmUiLCJvcHRzIiwiZGVmaW5lUHJvcGVydHkiLCJnZXQiLCJhZGRFdmVudExpc3RlbmVyIiwicGFzc2l2ZUV2ZW50cyIsIm9uIiwiZ3VpZCIsImhhc2giLCJoYW5kbGVyc0NvcHkiLCJtIiwibiIsIm9wdGlvbnMiLCJwYXNzaXZlIiwiYXR0YWNoRXZlbnQiLCJyZW1vdmVUeXBlIiwidCIsInNwbGljZSIsInRyaWdnZXIiLCJlbGVtRGF0YSIsIm93bmVyRG9jdW1lbnQiLCJidWJibGVzIiwidGFyZ2V0RGF0YSIsIm9uZSIsImZ1bmMiLCJFdmVudHMiLCJfd2luZG93TG9hZGVkIiwiYXV0b1NldHVwIiwidmlkcyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYXVkaW9zIiwiZGl2cyIsIm1lZGlhRWxzIiwibWVkaWFFbCIsInBsYXllciIsImF1dG9TZXR1cFRpbWVvdXQiLCJ3YWl0IiwidmpzIiwic2V0VGltZW91dCIsInJlYWR5U3RhdGUiLCJjcmVhdGVTdHlsZUVsZW1lbnQiLCJzdHlsZSIsInNldFRleHRDb250ZW50Iiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJ1aWQiLCJib3VuZCIsInRocm90dGxlIiwibGFzdCIsIm5vdyIsInRocm90dGxlZCIsImRlYm91bmNlIiwiaW1tZWRpYXRlIiwidGltZW91dCIsImNhbmNlbCIsImNsZWFyVGltZW91dCIsImRlYm91bmNlZCIsIl9sYXRlciIsImxhdGVyIiwiRXZlbnRUYXJnZXQiLCJhbGxvd2VkRXZlbnRzXyIsImFlbCIsImRpc3BhdGNoRXZlbnQiLCJFVkVOVF9NQVAiLCJxdWV1ZVRyaWdnZXIiLCJfdGhpcyIsIk1hcCIsInNldCIsIm9sZFRpbWVvdXQiLCJkZWxldGUiLCJzaXplIiwiaXNFdmVudGVkIiwiZXZlbnRCdXNFbF8iLCJldmVyeSIsImFkZEV2ZW50ZWRDYWxsYmFjayIsImV2ZW50ZWRDYWxsYmFja3MiLCJpc1ZhbGlkRXZlbnRUeXBlIiwidmFsaWRhdGVUYXJnZXQiLCJub2RlTmFtZSIsInZhbGlkYXRlRXZlbnRUeXBlIiwidmFsaWRhdGVMaXN0ZW5lciIsImxpc3RlbmVyIiwibm9ybWFsaXplTGlzdGVuQXJncyIsImlzVGFyZ2V0aW5nU2VsZiIsInNoaWZ0IiwibGlzdGVuIiwiRXZlbnRlZE1peGluIiwib24kJDEiLCJfbm9ybWFsaXplTGlzdGVuQXJncyIsInJlbW92ZUxpc3RlbmVyT25EaXNwb3NlIiwicmVtb3ZlUmVtb3Zlck9uVGFyZ2V0RGlzcG9zZSIsIm9uZSQkMSIsIl90aGlzMiIsIl9ub3JtYWxpemVMaXN0ZW5BcmdzMiIsIndyYXBwZXIiLCJsYXJncyIsIm9mZiQkMSIsInRhcmdldE9yVHlwZSIsInR5cGVPckxpc3RlbmVyIiwidHJpZ2dlciQkMSIsImV2ZW50ZWQiLCJfb3B0aW9ucyIsImV2ZW50QnVzS2V5IiwiU3RhdGVmdWxNaXhpbiIsInN0YXRlIiwic2V0U3RhdGUiLCJzdGF0ZVVwZGF0ZXMiLCJjaGFuZ2VzIiwiZnJvbSIsInRvIiwic3RhdGVmdWwiLCJkZWZhdWx0U3RhdGUiLCJoYW5kbGVTdGF0ZUNoYW5nZWQiLCJ0b1RpdGxlQ2FzZSIsInN0cmluZyIsImNoYXJBdCIsInRpdGxlQ2FzZUVxdWFscyIsInN0cjEiLCJzdHIyIiwibWVyZ2VPcHRpb25zIiwiQ29tcG9uZW50IiwicmVhZHkiLCJwbGF5IiwicGxheWVyXyIsInBhcmVudENvbXBvbmVudF8iLCJvcHRpb25zXyIsImlkXyIsIm5hbWVfIiwiZWxfIiwiY2hpbGRyZW5fIiwiY2hpbGRJbmRleF8iLCJjaGlsZE5hbWVJbmRleF8iLCJpbml0Q2hpbGRyZW4iLCJyZXBvcnRUb3VjaEFjdGl2aXR5IiwiZW5hYmxlVG91Y2hBY3Rpdml0eSIsIl9wcm90byIsImRpc3Bvc2UiLCJjcmVhdGVFbCQkMSIsImxvY2FsaXplIiwidG9rZW5zIiwiZGVmYXVsdFZhbHVlIiwiY29kZSIsImxhbmd1YWdlIiwibGFuZ3VhZ2VzIiwicHJpbWFyeUNvZGUiLCJwcmltYXJ5TGFuZyIsImxvY2FsaXplZFN0cmluZyIsIm1hdGNoIiwiaW5kZXgiLCJyZXQiLCJjb250ZW50RWwiLCJjb250ZW50RWxfIiwiY2hpbGRyZW4iLCJnZXRDaGlsZEJ5SWQiLCJnZXRDaGlsZCIsImFkZENoaWxkIiwiY29tcG9uZW50IiwiY29tcG9uZW50TmFtZSIsImNvbXBvbmVudENsYXNzTmFtZSIsImNvbXBvbmVudENsYXNzIiwiQ29tcG9uZW50Q2xhc3MiLCJnZXRDb21wb25lbnQiLCJjaGlsZE5vZGVzIiwicmVmTm9kZSIsImNoaWxkRm91bmQiLCJjb21wRWwiLCJwYXJlbnRPcHRpb25zIiwiaGFuZGxlQWRkIiwicGxheWVyT3B0aW9ucyIsIm5ld0NoaWxkIiwid29ya2luZ0NoaWxkcmVuIiwiVGVjaCIsInNvbWUiLCJ3Y2hpbGQiLCJpc1RlY2giLCJidWlsZENTU0NsYXNzIiwic3luYyIsImlzUmVhZHlfIiwicmVhZHlRdWV1ZV8iLCJ0cmlnZ2VyUmVhZHkiLCJyZWFkeVF1ZXVlIiwiJCQkMSIsIiQkJCQxIiwiaGFzQ2xhc3MkJDEiLCJhZGRDbGFzcyQkMSIsInJlbW92ZUNsYXNzJCQxIiwidG9nZ2xlQ2xhc3MkJDEiLCJzaG93IiwiaGlkZSIsImxvY2tTaG93aW5nIiwidW5sb2NrU2hvd2luZyIsImdldEF0dHJpYnV0ZSQkMSIsInNldEF0dHJpYnV0ZSQkMSIsInJlbW92ZUF0dHJpYnV0ZSQkMSIsIm51bSIsInNraXBMaXN0ZW5lcnMiLCJkaW1lbnNpb24iLCJkaW1lbnNpb25zIiwid2lkdGhPckhlaWdodCIsInB4SW5kZXgiLCJwYXJzZUludCIsImN1cnJlbnREaW1lbnNpb24iLCJjb21wdXRlZFdpZHRoT3JIZWlnaHQiLCJnZXRQcm9wZXJ0eVZhbHVlIiwicnVsZSIsImN1cnJlbnREaW1lbnNpb25zIiwiY3VycmVudFdpZHRoIiwiY3VycmVudEhlaWdodCIsImJsdXIiLCJoYW5kbGVLZXlQcmVzcyIsImVtaXRUYXBFdmVudHMiLCJ0b3VjaFN0YXJ0IiwiZmlyc3RUb3VjaCIsInRhcE1vdmVtZW50VGhyZXNob2xkIiwidG91Y2hUaW1lVGhyZXNob2xkIiwiY291bGRCZVRhcCIsInRvdWNoZXMiLCJ4ZGlmZiIsInlkaWZmIiwidG91Y2hEaXN0YW5jZSIsInNxcnQiLCJub1RhcCIsInRvdWNoVGltZSIsInJlcG9ydFVzZXJBY3Rpdml0eSIsInJlcG9ydCIsInRvdWNoSG9sZGluZyIsImNsZWFySW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInRvdWNoRW5kIiwidGltZW91dElkIiwiZGlzcG9zZUZuIiwiaW50ZXJ2YWwiLCJfdGhpczMiLCJpbnRlcnZhbElkIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiX3RoaXM0Iiwic3VwcG9ydHNSYWZfIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJyZWdpc3RlckNvbXBvbmVudCIsIkNvbXBvbmVudFRvUmVnaXN0ZXIiLCJpc0NvbXAiLCJpc1Byb3RvdHlwZU9mIiwicmVhc29uIiwiY29tcG9uZW50c18iLCJQbGF5ZXIiLCJwbGF5ZXJzIiwicGxheWVyTmFtZXMiLCJwbmFtZSIsIkJvb2xlYW4iLCJVU0VSX0FHRU5UIiwibmF2aWdhdG9yIiwidXNlckFnZW50Iiwid2Via2l0VmVyc2lvbk1hcCIsImV4ZWMiLCJhcHBsZVdlYmtpdFZlcnNpb24iLCJwb3AiLCJJU19JUEFEIiwiSVNfSVBIT05FIiwiSVNfSVBPRCIsIklTX0lPUyIsIklPU19WRVJTSU9OIiwiSVNfQU5EUk9JRCIsIkFORFJPSURfVkVSU0lPTiIsIm1ham9yIiwibWlub3IiLCJJU19OQVRJVkVfQU5EUk9JRCIsIklTX0ZJUkVGT1giLCJJU19FREdFIiwiSVNfQ0hST01FIiwiQ0hST01FX1ZFUlNJT04iLCJJRV9WRVJTSU9OIiwiSVNfU0FGQVJJIiwiSVNfQU5ZX1NBRkFSSSIsIlRPVUNIX0VOQUJMRUQiLCJtYXhUb3VjaFBvaW50cyIsIkRvY3VtZW50VG91Y2giLCJicm93c2VyIiwicmFuZ2VDaGVjayIsImZuTmFtZSIsIm1heEluZGV4IiwiZ2V0UmFuZ2UiLCJ2YWx1ZUluZGV4IiwicmFuZ2VzIiwicmFuZ2VJbmRleCIsImNyZWF0ZVRpbWVSYW5nZXNPYmoiLCJzdGFydCIsImVuZCIsImNyZWF0ZVRpbWVSYW5nZXMiLCJidWZmZXJlZFBlcmNlbnQiLCJidWZmZXJlZCIsImR1cmF0aW9uIiwiYnVmZmVyZWREdXJhdGlvbiIsIkZ1bGxzY3JlZW5BcGkiLCJhcGlNYXAiLCJzcGVjQXBpIiwiYnJvd3NlckFwaSIsInByZWZpeGVkQVBJIiwiX2kiLCJNZWRpYUVycm9yIiwibWVzc2FnZSIsImRlZmF1bHRNZXNzYWdlcyIsInN0YXR1cyIsImVycm9yVHlwZXMiLCJlcnJOdW0iLCJ0dXBsZSIsIlNhZmVQYXJzZVR1cGxlIiwicmV2aXZlciIsImpzb24iLCJKU09OIiwicGFyc2UiLCJlcnIiLCJpc1Byb21pc2UiLCJ0aGVuIiwic2lsZW5jZVByb21pc2UiLCJ0cmFja1RvSnNvbl8iLCJ0cmFjayIsImFjYyIsImN1ZXMiLCJjdWUiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwidGV4dFRyYWNrc1RvSnNvbiIsInRlY2giLCJ0cmFja0VscyIsInRyYWNrT2JqcyIsInRyYWNrcyIsInRyYWNrRWwiLCJzcmMiLCJ0ZXh0VHJhY2tzIiwianNvblRvVGV4dFRyYWNrcyIsImFkZGVkVHJhY2siLCJhZGRSZW1vdGVUZXh0VHJhY2siLCJhZGRDdWUiLCJ0ZXh0VHJhY2tDb252ZXJ0ZXIiLCJjcmVhdGVDb21tb25qc01vZHVsZSIsImtleWNvZGUiLCJzZWFyY2hJbnB1dCIsImhhc0tleUNvZGUiLCJuYW1lcyIsInNlYXJjaCIsIlN0cmluZyIsImZvdW5kTmFtZWRLZXkiLCJjb2RlcyIsInRvTG93ZXJDYXNlIiwiYWxpYXNlcyIsImNoYXJDb2RlQXQiLCJpc0V2ZW50S2V5IiwibmFtZU9yQ29kZSIsImZyb21DaGFyQ29kZSIsInRpdGxlIiwiYWxpYXMiLCJrZXljb2RlXzEiLCJrZXljb2RlXzIiLCJrZXljb2RlXzMiLCJrZXljb2RlXzQiLCJrZXljb2RlXzUiLCJNT0RBTF9DTEFTU19OQU1FIiwiTW9kYWxEaWFsb2ciLCJfQ29tcG9uZW50Iiwib3BlbmVkXyIsImhhc0JlZW5PcGVuZWRfIiwiaGFzQmVlbkZpbGxlZF8iLCJjbG9zZWFibGUiLCJ1bmNsb3NlYWJsZSIsInJvbGUiLCJkZXNjRWxfIiwiZGVzY3JpcHRpb24iLCJ0YWJJbmRleCIsImxhYmVsIiwicHJldmlvdXNseUFjdGl2ZUVsXyIsImNsb3NlIiwiZGVzYyIsIm9wZW4iLCJmaWxsQWx3YXlzIiwiZmlsbCIsIndhc1BsYXlpbmdfIiwicGF1c2VkIiwicGF1c2VPbk9wZW4iLCJwYXVzZSIsImhhZENvbnRyb2xzXyIsImNvbnRyb2xzIiwiY29uZGl0aW9uYWxGb2N1c18iLCJvcGVuZWQiLCJjb25kaXRpb25hbEJsdXJfIiwidGVtcG9yYXJ5IiwiY2xvc2VhYmxlXyIsInRlbXAiLCJjb250cm9sVGV4dCIsImZpbGxXaXRoIiwicGFyZW50RWwiLCJuZXh0U2libGluZ0VsIiwibmV4dFNpYmxpbmciLCJlbXB0eSIsImNsb3NlQnV0dG9uIiwiY29udGVudF8iLCJhY3RpdmVFbCIsImFjdGl2ZUVsZW1lbnQiLCJwbGF5ZXJFbCIsImhhbmRsZUtleURvd24iLCJmb2N1c2FibGVFbHMiLCJmb2N1c2FibGVFbHNfIiwiZm9jdXNJbmRleCIsInNoaWZ0S2V5IiwiYWxsQ2hpbGRyZW4iLCJxdWVyeVNlbGVjdG9yQWxsIiwiSFRNTEFuY2hvckVsZW1lbnQiLCJIVE1MQXJlYUVsZW1lbnQiLCJoYXNBdHRyaWJ1dGUiLCJIVE1MSW5wdXRFbGVtZW50IiwiSFRNTFNlbGVjdEVsZW1lbnQiLCJIVE1MVGV4dEFyZWFFbGVtZW50IiwiSFRNTEJ1dHRvbkVsZW1lbnQiLCJIVE1MSUZyYW1lRWxlbWVudCIsIkhUTUxPYmplY3RFbGVtZW50IiwiSFRNTEVtYmVkRWxlbWVudCIsIlRyYWNrTGlzdCIsIl9FdmVudFRhcmdldCIsInRyYWNrc18iLCJhZGRUcmFjayIsInJlbW92ZVRyYWNrIiwicnRyYWNrIiwibCIsImdldFRyYWNrQnlJZCIsImNoYW5nZSIsImFkZHRyYWNrIiwicmVtb3ZldHJhY2siLCJkaXNhYmxlT3RoZXJzIiwibGlzdCIsImVuYWJsZWQiLCJBdWRpb1RyYWNrTGlzdCIsIl9UcmFja0xpc3QiLCJjaGFuZ2luZ18iLCJlbmFibGVkQ2hhbmdlXyIsImRpc2FibGVPdGhlcnMkMSIsInNlbGVjdGVkIiwiVmlkZW9UcmFja0xpc3QiLCJzZWxlY3RlZENoYW5nZV8iLCJUZXh0VHJhY2tMaXN0IiwicXVldWVDaGFuZ2VfIiwidHJpZ2dlclNlbGVjdGVkbGFuZ3VhZ2VjaGFuZ2UiLCJ0cmlnZ2VyU2VsZWN0ZWRsYW5ndWFnZWNoYW5nZV8iLCJub25MYW5ndWFnZVRleHRUcmFja0tpbmQiLCJraW5kIiwic2VsZWN0ZWRsYW5ndWFnZWNoYW5nZV8iLCJIdG1sVHJhY2tFbGVtZW50TGlzdCIsInRyYWNrRWxlbWVudHMiLCJ0cmFja0VsZW1lbnRzXyIsImFkZFRyYWNrRWxlbWVudF8iLCJ0cmFja0VsZW1lbnQiLCJnZXRUcmFja0VsZW1lbnRCeVRyYWNrXyIsInRyYWNrRWxlbWVudF8iLCJyZW1vdmVUcmFja0VsZW1lbnRfIiwiVGV4dFRyYWNrQ3VlTGlzdCIsInNldEN1ZXNfIiwibGVuZ3RoXyIsIm9sZExlbmd0aCIsImN1ZXNfIiwiZGVmaW5lUHJvcCIsImdldEN1ZUJ5SWQiLCJWaWRlb1RyYWNrS2luZCIsImFsdGVybmF0aXZlIiwiY2FwdGlvbnMiLCJtYWluIiwic2lnbiIsInN1YnRpdGxlcyIsImNvbW1lbnRhcnkiLCJBdWRpb1RyYWNrS2luZCIsIlRleHRUcmFja0tpbmQiLCJkZXNjcmlwdGlvbnMiLCJjaGFwdGVycyIsIm1ldGFkYXRhIiwiVGV4dFRyYWNrTW9kZSIsImhpZGRlbiIsInNob3dpbmciLCJUcmFjayIsInRyYWNrUHJvcHMiLCJfbG9vcCIsInBhcnNlVXJsIiwidXJsIiwicHJvcHMiLCJocmVmIiwiYWRkVG9Cb2R5IiwiaG9zdCIsInByb3RvY29sIiwiZGl2IiwiaW5uZXJIVE1MIiwiZGV0YWlscyIsImxvY2F0aW9uIiwiZ2V0QWJzb2x1dGVVUkwiLCJnZXRGaWxlRXh0ZW5zaW9uIiwicGF0aCIsInNwbGl0UGF0aFJlIiwicGF0aFBhcnRzIiwiaXNDcm9zc09yaWdpbiIsIndpbkxvYyIsInVybEluZm8iLCJzcmNQcm90b2NvbCIsImNyb3NzT3JpZ2luIiwiVXJsIiwiaXNGdW5jdGlvbl8xIiwiaXNGdW5jdGlvbiIsInRvU3RyaW5nJDEiLCJhbGVydCIsImNvbmZpcm0iLCJwcm9tcHQiLCJ0cmltXzEiLCJyaWdodCIsInRyaW1fMiIsInRyaW1fMyIsImZuVG9TdHIiLCJjb25zdHJ1Y3RvclJlZ2V4IiwiaXNFUzZDbGFzc0ZuIiwiaXNFUzZDbGFzc0Z1bmN0aW9uIiwiZm5TdHIiLCJ0cnlGdW5jdGlvbk9iamVjdCIsInRyeUZ1bmN0aW9uVG9TdHIiLCJ0b1N0ciIsImZuQ2xhc3MiLCJnZW5DbGFzcyIsImhhc1RvU3RyaW5nVGFnIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJpc0NhbGxhYmxlIiwic3RyQ2xhc3MiLCJ0b1N0ciQxIiwiZm9yRWFjaEFycmF5IiwiYXJyYXkiLCJpdGVyYXRvciIsInJlY2VpdmVyIiwibGVuIiwiZm9yRWFjaFN0cmluZyIsImZvckVhY2hPYmplY3QiLCJ0aGlzQXJnIiwiVHlwZUVycm9yIiwiZm9yRWFjaF8xIiwiYXJnIiwicGFyc2VIZWFkZXJzIiwiaGVhZGVycyIsInJvdyIsImltbXV0YWJsZSIsImV4dGVuZCIsImhhc093blByb3BlcnR5JDEiLCJ4aHIiLCJjcmVhdGVYSFIiLCJYTUxIdHRwUmVxdWVzdCIsIm5vb3AiLCJYRG9tYWluUmVxdWVzdCIsImZvckVhY2hBcnJheSQxIiwidXJpIiwiaW5pdFBhcmFtcyIsIl9jcmVhdGVYSFIiLCJpc0VtcHR5IiwicGFyYW1zIiwiY2FsbGVkIiwiY2JPbmNlIiwicmVzcG9uc2UiLCJyZWFkeXN0YXRlY2hhbmdlIiwibG9hZEZ1bmMiLCJnZXRCb2R5IiwicmVzcG9uc2VUZXh0IiwiZ2V0WG1sIiwiaXNKc29uIiwiZXJyb3JGdW5jIiwiZXZ0IiwidGltZW91dFRpbWVyIiwic3RhdHVzQ29kZSIsImZhaWx1cmVSZXNwb25zZSIsImFib3J0ZWQiLCJ1c2VYRFIiLCJyYXdSZXF1ZXN0IiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwiY29ycyIsInN0cmluZ2lmeSIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsIm9ubG9hZCIsIm9uZXJyb3IiLCJvbnByb2dyZXNzIiwib25hYm9ydCIsIm9udGltZW91dCIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJ3aXRoQ3JlZGVudGlhbHMiLCJhYm9ydCIsInNldFJlcXVlc3RIZWFkZXIiLCJyZXNwb25zZVR5cGUiLCJiZWZvcmVTZW5kIiwic2VuZCIsInJlc3BvbnNlWE1MIiwiZmlyZWZveEJ1Z1Rha2VuRWZmZWN0IiwicGFyc2VDdWVzIiwic3JjQ29udGVudCIsInBhcnNlciIsIldlYlZUVCIsIlBhcnNlciIsInZ0dGpzIiwiU3RyaW5nRGVjb2RlciIsImVycm9ycyIsIm9uY3VlIiwib25wYXJzaW5nZXJyb3IiLCJvbmZsdXNoIiwiZ3JvdXBDb2xsYXBzZWQiLCJncm91cEVuZCIsImZsdXNoIiwibG9hZFRyYWNrIiwicmVzcG9uc2VCb2R5IiwibG9hZGVkXyIsInRlY2hfIiwibG9hZEhhbmRsZXIiLCJlcnJvckhhbmRsZXIiLCJUZXh0VHJhY2siLCJfVHJhY2siLCJzZXR0aW5ncyIsInNyY2xhbmciLCJtb2RlIiwiZGVmYXVsdF8iLCJkZWZhdWx0IiwiYWN0aXZlQ3Vlc18iLCJhY3RpdmVDdWVzIiwiY2hhbmdlZCIsInRpbWV1cGRhdGVIYW5kbGVyIiwiZGVmaW5lUHJvcGVydGllcyIsIm5ld01vZGUiLCJjdCIsImN1cnJlbnRUaW1lIiwiYWN0aXZlIiwib3JpZ2luYWxDdWUiLCJWVFRDdWUiLCJvcmlnaW5hbEN1ZV8iLCJyZW1vdmVDdWUiLCJfcmVtb3ZlQ3VlIiwiY3VlY2hhbmdlIiwiQXVkaW9UcmFjayIsIm5ld0VuYWJsZWQiLCJWaWRlb1RyYWNrIiwibmV3U2VsZWN0ZWQiLCJOT05FIiwiTE9BRElORyIsIkxPQURFRCIsIkVSUk9SIiwiSFRNTFRyYWNrRWxlbWVudCIsImxvYWQiLCJOT1JNQUwiLCJhdWRpbyIsIkxpc3RDbGFzcyIsIlRyYWNrQ2xhc3MiLCJjYXBpdGFsTmFtZSIsInZpZGVvIiwiZ2V0dGVyTmFtZSIsInByaXZhdGVOYW1lIiwiUkVNT1RFIiwicmVtb3RlVGV4dCIsInJlbW90ZVRleHRFbCIsIkFMTCIsInZ0dCIsImNyZWF0ZVRyYWNrSGVscGVyIiwiaGFzU3RhcnRlZF8iLCJmZWF0dXJlc1Byb2dyZXNzRXZlbnRzIiwibWFudWFsUHJvZ3Jlc3NPbiIsImZlYXR1cmVzVGltZXVwZGF0ZUV2ZW50cyIsIm1hbnVhbFRpbWVVcGRhdGVzT24iLCJuYXRpdmVDYXB0aW9ucyIsIm5hdGl2ZVRleHRUcmFja3MiLCJmZWF0dXJlc05hdGl2ZVRleHRUcmFja3MiLCJlbXVsYXRlVGV4dFRyYWNrcyIsImF1dG9SZW1vdGVUZXh0VHJhY2tzXyIsImluaXRUcmFja0xpc3RlbmVycyIsIm5hdGl2ZUNvbnRyb2xzRm9yVG91Y2giLCJ0cmlnZ2VyU291cmNlc2V0Iiwib25EdXJhdGlvbkNoYW5nZSIsIm1hbnVhbFByb2dyZXNzIiwidHJhY2tQcm9ncmVzcyIsIm1hbnVhbFByb2dyZXNzT2ZmIiwic3RvcFRyYWNraW5nUHJvZ3Jlc3MiLCJwcm9ncmVzc0ludGVydmFsIiwibnVtQnVmZmVyZWRQZXJjZW50IiwiYnVmZmVyZWRQZXJjZW50XyIsImR1cmF0aW9uXyIsImJ1ZmZlcmVkUGVyY2VudCQkMSIsIm1hbnVhbFRpbWVVcGRhdGVzIiwidHJhY2tDdXJyZW50VGltZSIsInN0b3BUcmFja2luZ0N1cnJlbnRUaW1lIiwibWFudWFsVGltZVVwZGF0ZXNPZmYiLCJjdXJyZW50VGltZUludGVydmFsIiwibWFudWFsbHlUcmlnZ2VyZWQiLCJjbGVhclRyYWNrcyIsInJlbW92ZVJlbW90ZVRleHRUcmFjayIsImNsZWFudXBBdXRvVGV4dFRyYWNrcyIsInJlc2V0IiwiZXJyb3JfIiwicGxheWVkIiwic2V0Q3VycmVudFRpbWUiLCJ0cmFja0xpc3RDaGFuZ2VzIiwiYWRkV2ViVnR0U2NyaXB0XyIsIl90aGlzNSIsInNjcmlwdCIsIl90aGlzNiIsInJlbW90ZVRyYWNrcyIsInJlbW90ZVRleHRUcmFja3MiLCJoYW5kbGVBZGRUcmFjayIsImhhbmRsZVJlbW92ZVRyYWNrIiwidXBkYXRlRGlzcGxheSIsInRleHRUcmFja3NDaGFuZ2VzIiwiYWRkVGV4dFRyYWNrIiwiY3JlYXRlUmVtb3RlVGV4dFRyYWNrIiwibWFudWFsQ2xlYW51cCIsIl90aGlzNyIsImh0bWxUcmFja0VsZW1lbnQiLCJyZW1vdGVUZXh0VHJhY2tFbHMiLCJnZXRWaWRlb1BsYXliYWNrUXVhbGl0eSIsInNldFBvc3RlciIsInBsYXlzaW5saW5lIiwic2V0UGxheXNpbmxpbmUiLCJvdmVycmlkZU5hdGl2ZUF1ZGlvVHJhY2tzIiwib3ZlcnJpZGVOYXRpdmVWaWRlb1RyYWNrcyIsImNhblBsYXlUeXBlIiwiY2FuUGxheVNvdXJjZSIsInNyY09iaiIsInJlZ2lzdGVyVGVjaCIsInRlY2hzXyIsImRlZmF1bHRUZWNoT3JkZXJfIiwiZ2V0VGVjaCIsImZlYXR1cmVzVm9sdW1lQ29udHJvbCIsImZlYXR1cmVzTXV0ZUNvbnRyb2wiLCJmZWF0dXJlc0Z1bGxzY3JlZW5SZXNpemUiLCJmZWF0dXJlc1BsYXliYWNrUmF0ZSIsImZlYXR1cmVzU291cmNlc2V0Iiwid2l0aFNvdXJjZUhhbmRsZXJzIiwiX1RlY2giLCJyZWdpc3RlclNvdXJjZUhhbmRsZXIiLCJoYW5kbGVyIiwic291cmNlSGFuZGxlcnMiLCJjYW4iLCJzZWxlY3RTb3VyY2VIYW5kbGVyIiwiY2FuSGFuZGxlU291cmNlIiwic2giLCJkZWZlcnJhYmxlIiwib3JpZ2luYWxGbiIsInNvdXJjZUhhbmRsZXJfIiwic2V0U291cmNlIiwibmF0aXZlU291cmNlSGFuZGxlciIsImRpc3Bvc2VTb3VyY2VIYW5kbGVyIiwiY3VycmVudFNvdXJjZV8iLCJoYW5kbGVTb3VyY2UiLCJtaWRkbGV3YXJlcyIsIm1pZGRsZXdhcmVJbnN0YW5jZXMiLCJURVJNSU5BVE9SIiwidXNlIiwibWlkZGxld2FyZSIsIm5leHQiLCJzZXRTb3VyY2VIZWxwZXIiLCJzZXRUZWNoIiwibXciLCJyZWR1Y2VSaWdodCIsIm1pZGRsZXdhcmVJdGVyYXRvciIsInNldCQxIiwibWVkaWF0ZSIsImNhbGxNZXRob2QiLCJtaWRkbGV3YXJlVmFsdWUiLCJ0ZXJtaW5hdGVkIiwiZXhlY3V0ZVJpZ2h0IiwiYWxsb3dlZEdldHRlcnMiLCJzZWVrYWJsZSIsImFsbG93ZWRTZXR0ZXJzIiwiYWxsb3dlZE1lZGlhdG9ycyIsIm13cyIsImNsZWFyQ2FjaGVGb3JQbGF5ZXIiLCJnZXRPckNyZWF0ZUZhY3RvcnkiLCJtd0ZhY3RvcnkiLCJfbXdzJGkiLCJtd2YiLCJtd2kiLCJsYXN0UnVuIiwiX21pZGRsZXdhcmUiLCJtd3Jlc3QiLCJfc3JjIiwiTWltZXR5cGVzS2luZCIsIm9wdXMiLCJvZ3YiLCJtcDQiLCJtb3YiLCJtNHYiLCJta3YiLCJtcDMiLCJhYWMiLCJvZ2EiLCJtM3U4IiwianBnIiwianBlZyIsImdpZiIsInBuZyIsInN2ZyIsIndlYnAiLCJnZXRNaW1ldHlwZSIsImV4dCIsIm1pbWV0eXBlIiwiZmluZE1pbWV0eXBlIiwiY2FjaGVfIiwibWF0Y2hpbmdTb3VyY2VzIiwiZmlsdGVyU291cmNlIiwibmV3c3JjIiwic3Jjb2JqIiwiZml4U291cmNlIiwiTWVkaWFMb2FkZXIiLCJqIiwidGVjaE9yZGVyIiwidGVjaE5hbWUiLCJpc1N1cHBvcnRlZCIsImxvYWRUZWNoXyIsIkNsaWNrYWJsZUNvbXBvbmVudCIsInRhYkluZGV4XyIsImNyZWF0ZUNvbnRyb2xUZXh0RWwiLCJjb250cm9sVGV4dEVsXyIsImNvbnRyb2xUZXh0XyIsImxvY2FsaXplZFRleHQiLCJub25JY29uQ29udHJvbCIsImVuYWJsZWRfIiwiaGFuZGxlQ2xpY2siLCJoYW5kbGVGb2N1cyIsImhhbmRsZUJsdXIiLCJQb3N0ZXJJbWFnZSIsIl9DbGlja2FibGVDb21wb25lbnQiLCJ1cGRhdGUiLCJwb3N0ZXIiLCJzZXRTcmMiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJkYXJrR3JheSIsImxpZ2h0R3JheSIsImZvbnRNYXAiLCJtb25vc3BhY2UiLCJzYW5zU2VyaWYiLCJzZXJpZiIsIm1vbm9zcGFjZVNhbnNTZXJpZiIsIm1vbm9zcGFjZVNlcmlmIiwicHJvcG9ydGlvbmFsU2Fuc1NlcmlmIiwicHJvcG9ydGlvbmFsU2VyaWYiLCJjYXN1YWwiLCJzbWFsbGNhcHMiLCJjb25zdHJ1Y3RDb2xvciIsImNvbG9yIiwib3BhY2l0eSIsImhleCIsInRyeVVwZGF0ZVN0eWxlIiwiVGV4dFRyYWNrRGlzcGxheSIsInVwZGF0ZURpc3BsYXlIYW5kbGVyIiwidG9nZ2xlRGlzcGxheSIsInByZXNlbGVjdFRyYWNrIiwibW9kZXMiLCJ0cmFja0xpc3QiLCJ1c2VyUHJlZiIsInNlbGVjdGVkTGFuZ3VhZ2UiLCJmaXJzdERlc2MiLCJmaXJzdENhcHRpb25zIiwicHJlZmVycmVkVHJhY2siLCJjbGVhckRpc3BsYXkiLCJwcm9jZXNzQ3VlcyIsImRlc2NyaXB0aW9uc1RyYWNrIiwiY2FwdGlvbnNTdWJ0aXRsZXNUcmFjayIsInVwZGF0ZUZvclRyYWNrIiwidGV4dFRyYWNrU2V0dGluZ3MiLCJvdmVycmlkZXMiLCJnZXRWYWx1ZXMiLCJjdWVEaXYiLCJkaXNwbGF5U3RhdGUiLCJ0ZXh0T3BhY2l0eSIsImJhY2tncm91bmRDb2xvciIsImJhY2tncm91bmRPcGFjaXR5Iiwid2luZG93Q29sb3IiLCJ3aW5kb3dPcGFjaXR5IiwiZWRnZVN0eWxlIiwidGV4dFNoYWRvdyIsImZvbnRQZXJjZW50IiwiZm9udFNpemUiLCJib3R0b20iLCJmb250RmFtaWx5IiwiZm9udFZhcmlhbnQiLCJMb2FkaW5nU3Bpbm5lciIsImlzQXVkaW8iLCJwbGF5ZXJUeXBlIiwiZGlyIiwiQnV0dG9uIiwiQmlnUGxheUJ1dHRvbiIsIl9CdXR0b24iLCJtb3VzZXVzZWRfIiwiaGFuZGxlTW91c2VEb3duIiwicGxheVByb21pc2UiLCJjYiIsInBsYXlUb2dnbGUiLCJwbGF5Rm9jdXMiLCJDbG9zZUJ1dHRvbiIsIlBsYXlUb2dnbGUiLCJyZXBsYXkiLCJoYW5kbGVQbGF5IiwiaGFuZGxlUGF1c2UiLCJoYW5kbGVFbmRlZCIsImhhbmRsZVNlZWtlZCIsImRlZmF1bHRJbXBsZW1lbnRhdGlvbiIsInNlY29uZHMiLCJndWlkZSIsImZsb29yIiwiaCIsImdtIiwiZ2giLCJpc05hTiIsIkluZmluaXR5IiwiaW1wbGVtZW50YXRpb24iLCJzZXRGb3JtYXRUaW1lIiwiY3VzdG9tSW1wbGVtZW50YXRpb24iLCJyZXNldEZvcm1hdFRpbWUiLCJmb3JtYXRUaW1lIiwiVGltZURpc3BsYXkiLCJ0aHJvdHRsZWRVcGRhdGVDb250ZW50IiwidXBkYXRlQ29udGVudCIsImxhYmVsVGV4dF8iLCJ1cGRhdGVUZXh0Tm9kZV8iLCJ0ZXh0Tm9kZV8iLCJmb3JtYXR0ZWRUaW1lXyIsImZvcm1hdFRpbWVfIiwidGltZSIsInVwZGF0ZUZvcm1hdHRlZFRpbWVfIiwiZm9ybWF0dGVkVGltZSIsIkN1cnJlbnRUaW1lRGlzcGxheSIsIl9UaW1lRGlzcGxheSIsInNjcnViYmluZyIsImdldENhY2hlIiwiRHVyYXRpb25EaXNwbGF5IiwiVGltZURpdmlkZXIiLCJSZW1haW5pbmdUaW1lRGlzcGxheSIsInJlbWFpbmluZ1RpbWVEaXNwbGF5IiwicmVtYWluaW5nVGltZSIsIkxpdmVEaXNwbGF5IiwidXBkYXRlU2hvd2luZyIsIlNlZWtUb0xpdmUiLCJ1cGRhdGVMaXZlRWRnZVN0YXR1cyIsImxpdmVUcmFja2VyIiwidGV4dEVsXyIsImF0TGl2ZUVkZ2UiLCJzZWVrVG9MaXZlRWRnZSIsIlNsaWRlciIsImJhciIsImJhck5hbWUiLCJ2ZXJ0aWNhbCIsInBsYXllckV2ZW50IiwiaGFuZGxlTW91c2VNb3ZlIiwiaGFuZGxlTW91c2VVcCIsInByb2dyZXNzIiwiZ2V0UGVyY2VudCIsInBlcmNlbnRhZ2UiLCJ0b0ZpeGVkIiwiY2FsY3VsYXRlRGlzdGFuY2UiLCJzdGVwQmFjayIsInN0ZXBGb3J3YXJkIiwiYm9vbCIsInZlcnRpY2FsXyIsIkxvYWRQcm9ncmVzc0JhciIsInBhcnRFbHNfIiwiaXNMaXZlIiwic2Vla2FibGVFbmQiLCJidWZmZXJlZEVuZCIsImNvbnRyb2xUZXh0UGVyY2VudGFnZSIsInBlcmNlbnRpZnkiLCJyb3VuZGVkIiwicGVyY2VudCIsInBhcnQiLCJUaW1lVG9vbHRpcCIsInNlZWtCYXJSZWN0Iiwic2Vla0JhclBvaW50IiwidG9vbHRpcFJlY3QiLCJwbGF5ZXJSZWN0Iiwic2Vla0JhclBvaW50UHgiLCJzcGFjZUxlZnRPZlBvaW50Iiwic3BhY2VSaWdodE9mUG9pbnQiLCJwdWxsVG9vbHRpcEJ5IiwidXBkYXRlVGltZSIsInJhZklkXyIsImxpdmVXaW5kb3ciLCJzZWNvbmRzQmVoaW5kIiwiUGxheVByb2dyZXNzQmFyIiwidGltZVRvb2x0aXAiLCJNb3VzZVRpbWVEaXNwbGF5IiwiU1RFUF9TRUNPTkRTIiwiUEFHRV9LRVlfTVVMVElQTElFUiIsIlVQREFURV9SRUZSRVNIX0lOVEVSVkFMIiwiU2Vla0JhciIsIl9TbGlkZXIiLCJzZXRFdmVudEhhbmRsZXJzXyIsInVwZGF0ZUludGVydmFsIiwiZW5hYmxlSW50ZXJ2YWxfIiwiZGlzYWJsZUludGVydmFsXyIsInRvZ2dsZVZpc2liaWxpdHlfIiwidXBkYXRlXyIsImxpdmVDdXJyZW50VGltZSIsIm9mZnNldFBhcmVudCIsImdldEN1cnJlbnRUaW1lXyIsInNlZWthYmxlU3RhcnQiLCJ2aWRlb1dhc1BsYXlpbmciLCJuZXdUaW1lIiwiZGlzdGFuY2UiLCJtb3VzZVRpbWVEaXNwbGF5IiwiaGFuZGxlQWN0aW9uIiwiZ290b0ZyYWN0aW9uIiwiUHJvZ3Jlc3NDb250cm9sIiwidGhyb3R0bGVkSGFuZGxlTW91c2VTZWVrIiwiaGFuZGxlTW91c2VTZWVrIiwic2Vla0JhciIsInNlZWtCYXJFbCIsIkZ1bGxzY3JlZW5Ub2dnbGUiLCJoYW5kbGVGdWxsc2NyZWVuQ2hhbmdlIiwiZnVsbHNjcmVlbkVuYWJsZWQiLCJpc0Z1bGxzY3JlZW4iLCJyZXF1ZXN0RnVsbHNjcmVlbiIsImV4aXRGdWxsc2NyZWVuIiwiY2hlY2tWb2x1bWVTdXBwb3J0IiwiVm9sdW1lTGV2ZWwiLCJWb2x1bWVCYXIiLCJ1cGRhdGVMYXN0Vm9sdW1lXyIsInVwZGF0ZUFSSUFBdHRyaWJ1dGVzIiwiY2hlY2tNdXRlZCIsInZvbHVtZSIsIm11dGVkIiwiYXJpYVZhbHVlIiwidm9sdW1lQXNQZXJjZW50YWdlXyIsInZvbHVtZUJlZm9yZURyYWciLCJsYXN0Vm9sdW1lXyIsIlZvbHVtZUNvbnRyb2wiLCJ2b2x1bWVCYXIiLCJ0aHJvdHRsZWRIYW5kbGVNb3VzZU1vdmUiLCJvcmllbnRhdGlvbkNsYXNzIiwiY2hlY2tNdXRlU3VwcG9ydCIsIk11dGVUb2dnbGUiLCJ2b2wiLCJsYXN0Vm9sdW1lIiwidm9sdW1lVG9TZXQiLCJ1cGRhdGVJY29uXyIsInVwZGF0ZUNvbnRyb2xUZXh0XyIsInNvdW5kT2ZmIiwiVm9sdW1lUGFuZWwiLCJpbmxpbmUiLCJ2b2x1bWVDb250cm9sIiwidm9sdW1lUGFuZWxTdGF0ZV8iLCJzbGlkZXJBY3RpdmVfIiwic2xpZGVySW5hY3RpdmVfIiwibXV0ZVRvZ2dsZSIsIk1lbnUiLCJtZW51QnV0dG9uXyIsIm1lbnVCdXR0b24iLCJmb2N1c2VkQ2hpbGRfIiwiYm91bmRIYW5kbGVCbHVyXyIsImJvdW5kSGFuZGxlVGFwQ2xpY2tfIiwiaGFuZGxlVGFwQ2xpY2siLCJhZGRFdmVudExpc3RlbmVyRm9ySXRlbSIsInJlbW92ZUV2ZW50TGlzdGVuZXJGb3JJdGVtIiwiYWRkSXRlbSIsImNoaWxkQ29tcG9uZW50IiwiY29udGVudEVsVHlwZSIsImFwcGVuZCIsImJ0biIsImJ1dHRvblByZXNzZWRfIiwidW5wcmVzc0J1dHRvbiIsImNoaWxkQ29tcG9uZW50cyIsImZvdW5kQ29tcG9uZW50Iiwic3RlcENoaWxkIiwiaXRlbSIsImhhdmVUaXRsZSIsIk1lbnVCdXR0b24iLCJidXR0b25DbGFzcyIsIm1lbnUiLCJoYW5kbGVTdWJtZW51S2V5UHJlc3MiLCJjcmVhdGVNZW51IiwiaXRlbXMiLCJoaWRlVGhyZXNob2xkXyIsInRpdGxlRWwiLCJ0aXRsZUNvbXBvbmVudCIsImNyZWF0ZUl0ZW1zIiwiYnVpbGRXcmFwcGVyQ1NTQ2xhc3MiLCJtZW51QnV0dG9uQ2xhc3MiLCJwcmVzc0J1dHRvbiIsIlRyYWNrQnV0dG9uIiwiX01lbnVCdXR0b24iLCJ1cGRhdGVIYW5kbGVyIiwiTWVudUtleXMiLCJNZW51SXRlbSIsInNlbGVjdGFibGUiLCJpc1NlbGVjdGVkXyIsIm11bHRpU2VsZWN0YWJsZSIsIl9zZWxlY3RlZCIsIlRleHRUcmFja01lbnVJdGVtIiwiX01lbnVJdGVtIiwiY2hhbmdlSGFuZGxlciIsImhhbmRsZVRyYWNrc0NoYW5nZSIsInNlbGVjdGVkTGFuZ3VhZ2VDaGFuZ2VIYW5kbGVyIiwiaGFuZGxlU2VsZWN0ZWRMYW5ndWFnZUNoYW5nZSIsIm9uY2hhbmdlIiwiRXZlbnQiLCJjcmVhdGVFdmVudCIsImluaXRFdmVudCIsInJlZmVyZW5jZVRyYWNrIiwia2luZHMiLCJzaG91bGRCZVNlbGVjdGVkIiwiT2ZmVGV4dFRyYWNrTWVudUl0ZW0iLCJfVGV4dFRyYWNrTWVudUl0ZW0iLCJhbGxIaWRkZW4iLCJUZXh0VHJhY2tCdXR0b24iLCJfVHJhY2tCdXR0b24iLCJUcmFja01lbnVJdGVtIiwibGFiZWxfIiwia2luZHNfIiwia2luZF8iLCJDaGFwdGVyc1RyYWNrTWVudUl0ZW0iLCJDaGFwdGVyc0J1dHRvbiIsIl9UZXh0VHJhY2tCdXR0b24iLCJ0cmFja18iLCJzZXRUcmFjayIsImZpbmRDaGFwdGVyc1RyYWNrIiwidXBkYXRlSGFuZGxlcl8iLCJyZW1vdGVUZXh0VHJhY2tFbCIsIl9yZW1vdGVUZXh0VHJhY2tFbCIsImdldE1lbnVDYXB0aW9uIiwibWkiLCJEZXNjcmlwdGlvbnNCdXR0b24iLCJTdWJ0aXRsZXNCdXR0b24iLCJDYXB0aW9uU2V0dGluZ3NNZW51SXRlbSIsIkNhcHRpb25zQnV0dG9uIiwiU3Vic0NhcHNNZW51SXRlbSIsIlN1YnNDYXBzQnV0dG9uIiwibGFuZ3VhZ2VfIiwiQXVkaW9UcmFja01lbnVJdGVtIiwiYXVkaW9UcmFja3MiLCJBdWRpb1RyYWNrQnV0dG9uIiwiUGxheWJhY2tSYXRlTWVudUl0ZW0iLCJyYXRlIiwicGxheWJhY2tSYXRlIiwiUGxheWJhY2tSYXRlTWVudUJ1dHRvbiIsInVwZGF0ZVZpc2liaWxpdHkiLCJ1cGRhdGVMYWJlbCIsImxhYmVsRWxfIiwicmF0ZXMiLCJwbGF5YmFja1JhdGVzIiwiY3VycmVudFJhdGUiLCJuZXdSYXRlIiwicGxheWJhY2tSYXRlU3VwcG9ydGVkIiwiU3BhY2VyIiwiQ3VzdG9tQ29udHJvbFNwYWNlciIsIl9TcGFjZXIiLCJDb250cm9sQmFyIiwiRXJyb3JEaXNwbGF5IiwiX01vZGFsRGlhbG9nIiwiTE9DQUxfU1RPUkFHRV9LRVkiLCJDT0xPUl9CTEFDSyIsIkNPTE9SX0JMVUUiLCJDT0xPUl9DWUFOIiwiQ09MT1JfR1JFRU4iLCJDT0xPUl9NQUdFTlRBIiwiQ09MT1JfUkVEIiwiQ09MT1JfV0hJVEUiLCJDT0xPUl9ZRUxMT1ciLCJPUEFDSVRZX09QQVFVRSIsIk9QQUNJVFlfU0VNSSIsIk9QQUNJVFlfVFJBTlMiLCJzZWxlY3RDb25maWdzIiwidiIsIk51bWJlciIsInBhcnNlT3B0aW9uVmFsdWUiLCJnZXRTZWxlY3RlZE9wdGlvblZhbHVlIiwic2VsZWN0ZWRJbmRleCIsInNldFNlbGVjdGVkT3B0aW9uIiwiVGV4dFRyYWNrU2V0dGluZ3MiLCJlbmREaWFsb2ciLCJzZXREZWZhdWx0cyIsInBlcnNpc3RUZXh0VHJhY2tTZXR0aW5ncyIsInNhdmVTZXR0aW5ncyIsImNvbmZpZyIsInJlc3RvcmVTZXR0aW5ncyIsImNyZWF0ZUVsU2VsZWN0XyIsImxlZ2VuZElkIiwic2VsZWN0TGFiZWxsZWRieUlkcyIsIm9wdGlvbklkIiwiY3JlYXRlRWxGZ0NvbG9yXyIsImNyZWF0ZUVsQmdDb2xvcl8iLCJjcmVhdGVFbFdpbkNvbG9yXyIsImNyZWF0ZUVsQ29sb3JzXyIsImNyZWF0ZUVsRm9udF8iLCJjcmVhdGVFbENvbnRyb2xzXyIsImRlZmF1bHRzRGVzY3JpcHRpb24iLCJzZXRWYWx1ZXMiLCJ2YWx1ZXMiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJ0dERpc3BsYXkiLCJjb250cm9sQmFyIiwic3Vic0NhcHNCdG4iLCJzdWJzQ2Fwc0J1dHRvbiIsImNjQnRuIiwiY2FwdGlvbnNCdXR0b24iLCJSZXNpemVNYW5hZ2VyIiwiUkVTSVpFX09CU0VSVkVSX0FWQUlMQUJMRSIsIlJlc2l6ZU9ic2VydmVyIiwibG9hZExpc3RlbmVyXyIsInJlc2l6ZU9ic2VydmVyXyIsImRlYm91bmNlZEhhbmRsZXJfIiwicmVzaXplSGFuZGxlciIsIm9ic2VydmUiLCJjb250ZW50V2luZG93IiwidW5sb2FkTGlzdGVuZXJfIiwidW5vYnNlcnZlIiwiZGlzY29ubmVjdCIsInJlc2l6ZU9ic2VydmVyIiwiTGl2ZVRyYWNrZXIiLCJyZXNldF8iLCJoYW5kbGVEdXJhdGlvbmNoYW5nZSIsImhhbmRsZVZpc2liaWxpdHlDaGFuZ2UiLCJzdG9wVHJhY2tpbmciLCJzdGFydFRyYWNraW5nIiwiaXNCZWhpbmRfIiwidGltZXVwZGF0ZVNlZW5fIiwic2Vla2FibGVJbmNyZW1lbnQiLCJzZWVrYWJsZUluY3JlbWVudF8iLCJsaXZlRWRnZVdpbmRvdyIsInRyYWNrTGl2ZV8iLCJwYXN0U2Vla0VuZF8iLCJuZXdTZWVrRW5kIiwibGFzdFNlZWtFbmRfIiwiYWJzIiwicGFzdFNlZWtFbmQiLCJiZWhpbmRMaXZlRWRnZSIsImJlaGluZExpdmVFZGdlXyIsImlzVHJhY2tpbmciLCJ0cmFja2luZ0ludGVydmFsXyIsImhhbmRsZVRpbWV1cGRhdGUiLCJzZWVrYWJsZUVuZHMiLCJzb3J0Iiwic2Vla2FibGVTdGFydHMiLCJzb3VyY2VzZXRMb2FkIiwic3JjVXJscyIsImlubmVySFRNTERlc2NyaXB0b3JQb2x5ZmlsbCIsImNsb25lTm9kZSIsImR1bW15IiwiZG9jRnJhZyIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJFbGVtZW50IiwiZ2V0RGVzY3JpcHRvciIsInByaW9yaXR5IiwiZGVzY3JpcHRvciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJnZXRJbm5lckhUTUxEZXNjcmlwdG9yIiwiSFRNTE1lZGlhRWxlbWVudCIsImZpcnN0U291cmNlV2F0Y2giLCJyZXNldFNvdXJjZVdhdGNoXyIsImlubmVyRGVzY3JpcHRvciIsImFwcGVuZFdyYXBwZXIiLCJhcHBlbmRGbiIsInJldHZhbCIsInNyY0Rlc2NyaXB0b3JQb2x5ZmlsbCIsImdldFNyY0Rlc2NyaXB0b3IiLCJzZXR1cFNvdXJjZXNldCIsInJlc2V0U291cmNlc2V0XyIsInNyY0Rlc2NyaXB0b3IiLCJvbGRTZXRBdHRyaWJ1dGUiLCJvbGRMb2FkIiwiY3VycmVudFNyYyIsIl90ZW1wbGF0ZU9iamVjdCQxIiwiSHRtbDUiLCJjcm9zc29yaWdpblRyYWNrcyIsImluaXROZXR3b3JrU3RhdGVfIiwiaGFuZGxlTGF0ZUluaXRfIiwiZW5hYmxlU291cmNlc2V0Iiwic2V0dXBTb3VyY2VzZXRIYW5kbGluZ18iLCJoYXNDaGlsZE5vZGVzIiwibm9kZXMiLCJub2Rlc0xlbmd0aCIsInJlbW92ZU5vZGVzIiwicHJveHlOYXRpdmVUcmFja3NfIiwicmVzdG9yZU1ldGFkYXRhVHJhY2tzSW5JT1NOYXRpdmVQbGF5ZXJfIiwic2V0Q29udHJvbHMiLCJwcm94eVdlYmtpdEZ1bGxzY3JlZW5fIiwiZGlzcG9zZU1lZGlhRWxlbWVudCIsIm1ldGFkYXRhVHJhY2tzUHJlRnVsbHNjcmVlblN0YXRlIiwidGFrZU1ldGFkYXRhVHJhY2tTbmFwc2hvdCIsInN0b3JlZE1vZGUiLCJyZXN0b3JlVHJhY2tNb2RlIiwic3RvcmVkVHJhY2siLCJvdmVycmlkZU5hdGl2ZV8iLCJvdmVycmlkZSIsImxvd2VyQ2FzZVR5cGUiLCJldmVudE5hbWUiLCJlbFRyYWNrcyIsInByb3h5TmF0aXZlVHJhY2tzRm9yVHlwZV8iLCJ0ZWNoVHJhY2tzIiwibGlzdGVuZXJzIiwiY3VycmVudFRhcmdldCIsInJlbW92ZU9sZFRyYWNrcyIsInJlbW92ZVRyYWNrcyIsImZvdW5kIiwicGxheWVyRWxJbmdlc3QiLCJtb3ZpbmdNZWRpYUVsZW1lbnRJbkRPTSIsImNsb25lIiwidGFnQXR0cmlidXRlcyIsInRlY2hJZCIsImNsYXNzIiwicGxheWVySWQiLCJwcmVsb2FkIiwic2V0dGluZ3NBdHRycyIsImF0dHIiLCJuZXR3b3JrU3RhdGUiLCJsb2Fkc3RhcnRGaXJlZCIsInNldExvYWRzdGFydEZpcmVkIiwidHJpZ2dlckxvYWRzdGFydCIsImV2ZW50c1RvVHJpZ2dlciIsImNoZWNrUHJvZ3Jlc3MiLCJOYU4iLCJlbmRGbiIsImJlZ2luRm4iLCJ3ZWJraXRQcmVzZW50YXRpb25Nb2RlIiwic3VwcG9ydHNGdWxsU2NyZWVuIiwid2Via2l0RW50ZXJGdWxsU2NyZWVuIiwiZW50ZXJGdWxsU2NyZWVuIiwiSEFWRV9NRVRBREFUQSIsImV4aXRGdWxsU2NyZWVuIiwid2Via2l0RXhpdEZ1bGxTY3JlZW4iLCJyZXNldE1lZGlhRWxlbWVudCIsInZpZGVvUGxheWJhY2tRdWFsaXR5Iiwid2Via2l0RHJvcHBlZEZyYW1lQ291bnQiLCJ3ZWJraXREZWNvZGVkRnJhbWVDb3VudCIsImRyb3BwZWRWaWRlb0ZyYW1lcyIsInRvdGFsVmlkZW9GcmFtZXMiLCJwZXJmb3JtYW5jZSIsImNyZWF0aW9uVGltZSIsInRpbWluZyIsIm5hdmlnYXRpb25TdGFydCIsIlRFU1RfVklEIiwiY2FuQ29udHJvbFZvbHVtZSIsImNhbk11dGVWb2x1bWUiLCJjYW5Db250cm9sUGxheWJhY2tSYXRlIiwiY2FuT3ZlcnJpZGVBdHRyaWJ1dGVzIiwic3VwcG9ydHNOYXRpdmVUZXh0VHJhY2tzIiwic3VwcG9ydHNOYXRpdmVWaWRlb1RyYWNrcyIsInZpZGVvVHJhY2tzIiwic3VwcG9ydHNOYXRpdmVBdWRpb1RyYWNrcyIsImZlYXR1cmVzTmF0aXZlVmlkZW9UcmFja3MiLCJmZWF0dXJlc05hdGl2ZUF1ZGlvVHJhY2tzIiwibXBlZ3VybFJFIiwicGF0Y2hDYW5QbGF5VHlwZSIsInVucGF0Y2hDYW5QbGF5VHlwZSIsInIiLCJfdGVtcGxhdGVPYmplY3QkMiIsIlRFQ0hfRVZFTlRTX1JFVFJJR0dFUiIsIlRFQ0hfRVZFTlRTX1FVRVVFIiwiY2FucGxheSIsImNhbnBsYXl0aHJvdWdoIiwicGxheWluZyIsInNlZWtlZCIsIkJSRUFLUE9JTlRfT1JERVIiLCJCUkVBS1BPSU5UX0NMQVNTRVMiLCJzdWJzdHJpbmciLCJERUZBVUxUX0JSRUFLUE9JTlRTIiwidGlueSIsInhzbWFsbCIsInNtYWxsIiwibWVkaXVtIiwibGFyZ2UiLCJ4bGFyZ2UiLCJodWdlIiwiZ2V0VGFnU2V0dGluZ3MiLCJjbG9zZXN0IiwiYm91bmREb2N1bWVudEZ1bGxzY3JlZW5DaGFuZ2VfIiwiZG9jdW1lbnRGdWxsc2NyZWVuQ2hhbmdlXyIsImJvdW5kRnVsbFdpbmRvd09uRXNjS2V5XyIsImZ1bGxXaW5kb3dPbkVzY0tleSIsImJvdW5kSGFuZGxlS2V5UHJlc3NfIiwiaXNQb3N0ZXJGcm9tVGVjaF8iLCJxdWV1ZWRDYWxsYmFja3NfIiwidXNlckFjdGl2ZV8iLCJsYW5ndWFnZXNUb0xvd2VyIiwibmFtZSQkMSIsImxhbmd1YWdlc18iLCJyZXNldENhY2hlXyIsInBvc3Rlcl8iLCJjb250cm9sc18iLCJjaGFuZ2luZ1NyY18iLCJwbGF5Q2FsbGJhY2tzXyIsInBsYXlUZXJtaW5hdGVkUXVldWVfIiwiYXV0b3BsYXkiLCJwbHVnaW5zIiwic2NydWJiaW5nXyIsImZsdWlkXyIsInVwZGF0ZVN0eWxlRWxfIiwicGxheWVyT3B0aW9uc0NvcHkiLCJtaWRkbGV3YXJlXyIsImZsZXhOb3RTdXBwb3J0ZWRfIiwibWFqb3JWZXJzaW9uIiwidXNlckFjdGl2ZSIsImxpc3RlbkZvclVzZXJBY3Rpdml0eV8iLCJoYW5kbGVTdGFnZUNsaWNrXyIsImJyZWFrcG9pbnRzIiwicmVzcG9uc2l2ZSIsImZ1bGxzY3JlZW5jaGFuZ2UiLCJzdHlsZUVsXyIsInBsYXllckVsSW5nZXN0XyIsImRpdkVtYmVkIiwidGFiaW5kZXgiLCJWSURFT0pTX05PX0RZTkFNSUNfU1RZTEUiLCJkZWZhdWx0c1N0eWxlRWwiLCJoZWFkIiwiZmlsbF8iLCJmbHVpZCIsImFzcGVjdFJhdGlvIiwibGlua3MiLCJsaW5rRWwiLCJfZGltZW5zaW9uIiwicHJpdkRpbWVuc2lvbiIsInBhcnNlZFZhbCIsInJhdGlvIiwiYXNwZWN0UmF0aW9fIiwiX3dpZHRoIiwid2lkdGhfIiwiX2hlaWdodCIsImhlaWdodF8iLCJ0ZWNoRWwiLCJpZENsYXNzIiwidmlkZW9XaWR0aCIsInZpZGVvSGVpZ2h0IiwicmF0aW9QYXJ0cyIsInJhdGlvTXVsdGlwbGllciIsInVubG9hZFRlY2hfIiwidGl0bGVUZWNoTmFtZSIsImNhbWVsVGVjaE5hbWUiLCJ0ZWNoTmFtZV8iLCJ0ZWNoT3B0aW9ucyIsImxvb3AiLCJ0ZWNoQ2FuT3ZlcnJpZGVQb3N0ZXIiLCJUZWNoQ2xhc3MiLCJoYW5kbGVUZWNoUmVhZHlfIiwidGV4dFRyYWNrc0pzb25fIiwiZXZlbnRPYmoiLCJzZWVraW5nIiwiaGFuZGxlVGVjaExvYWRTdGFydF8iLCJoYW5kbGVUZWNoU291cmNlc2V0XyIsImhhbmRsZVRlY2hXYWl0aW5nXyIsImhhbmRsZVRlY2hFbmRlZF8iLCJoYW5kbGVUZWNoU2Vla2luZ18iLCJoYW5kbGVUZWNoUGxheV8iLCJoYW5kbGVUZWNoRmlyc3RQbGF5XyIsImhhbmRsZVRlY2hQYXVzZV8iLCJoYW5kbGVUZWNoRHVyYXRpb25DaGFuZ2VfIiwiaGFuZGxlVGVjaEZ1bGxzY3JlZW5DaGFuZ2VfIiwiaGFuZGxlVGVjaEVycm9yXyIsImhhbmRsZVRlY2hQb3N0ZXJDaGFuZ2VfIiwiaGFuZGxlVGVjaFRleHREYXRhXyIsImhhbmRsZVRlY2hSYXRlQ2hhbmdlXyIsInVzaW5nTmF0aXZlQ29udHJvbHMiLCJ0ZWNoR2V0XyIsImFkZFRlY2hDb250cm9sc0xpc3RlbmVyc18iLCJzYWZldHkiLCJyZW1vdmVUZWNoQ29udHJvbHNMaXN0ZW5lcnNfIiwiaGFuZGxlVGVjaENsaWNrXyIsImhhbmRsZVRlY2hEb3VibGVDbGlja18iLCJoYW5kbGVUZWNoVG91Y2hTdGFydF8iLCJoYW5kbGVUZWNoVG91Y2hNb3ZlXyIsImhhbmRsZVRlY2hUb3VjaEVuZF8iLCJoYW5kbGVUZWNoVGFwXyIsInRlY2hDYWxsXyIsImhhc1N0YXJ0ZWQiLCJtYW51YWxBdXRvcGxheV8iLCJwcmV2aW91c2x5TXV0ZWQiLCJyZXN0b3JlTXV0ZWQiLCJtdXRlZFByb21pc2UiLCJjYXRjaCIsInByb21pc2UiLCJ1cGRhdGVTb3VyY2VDYWNoZXNfIiwic291cmNlRWxTb3VyY2VzIiwic291cmNlRWxzIiwibWF0Y2hpbmdTb3VyY2VFbHMiLCJzb3VyY2VPYmoiLCJ1cGRhdGVTb3VyY2VDYWNoZXMiLCJwbGF5ZXJTcmMiLCJjdXJyZW50U291cmNlIiwiZXZlbnRTcmMiLCJsYXN0U291cmNlXyIsInVwZGF0ZUNhY2hlIiwidGVjaFNyYyIsInRlY2hHZXQiLCJyZXF1ZXN0IiwibGFzdFBsYXliYWNrUmF0ZSIsInF1ZXVlZCIsInRpbWVXaGVuV2FpdGluZyIsInRpbWVVcGRhdGVMaXN0ZW5lciIsImhhbmRsZVRlY2hDYW5QbGF5XyIsImhhbmRsZVRlY2hDYW5QbGF5VGhyb3VnaF8iLCJoYW5kbGVUZWNoUGxheWluZ18iLCJoYW5kbGVUZWNoU2Vla2VkXyIsInN0YXJ0dGltZSIsImluQWxsb3dlZEVscyIsInVzZXJBY3Rpb25zIiwiZG91YmxlQ2xpY2siLCJ1c2VyV2FzQWN0aXZlIiwidG9nZ2xlRnVsbHNjcmVlbkNsYXNzXyIsImZzQXBpIiwiZnVsbHNjcmVlbkVsZW1lbnQiLCJtYXRjaGVzIiwiZnVsbHNjcmVlbiIsImluYWN0aXZpdHlUaW1lb3V0IiwiZGVmYXVsdFBsYXliYWNrUmF0ZSIsIm1lZGlhIiwiX3RoaXM4IiwiUHJvbWlzZUNsYXNzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJwbGF5XyIsIl90aGlzOSIsImlzU3JjUmVhZHkiLCJ3YWl0VG9QbGF5XyIsInJ1blBsYXlUZXJtaW5hdGVkUXVldWVfIiwicnVuUGxheUNhbGxiYWNrc18iLCJxdWV1ZSIsInEiLCJjYWxsYmFja3MiLCJpc1NjcnViYmluZyIsImxpdmV1aSIsInBlcmNlbnRBc0RlY2ltYWwiLCJfbXV0ZWQiLCJkZWZhdWx0TXV0ZWQiLCJfZGVmYXVsdE11dGVkIiwiaXNGUyIsImlzRnVsbHNjcmVlbl8iLCJlbnRlckZ1bGxXaW5kb3ciLCJleGl0RnVsbFdpbmRvdyIsImlzRnVsbFdpbmRvdyIsImRvY09yaWdPdmVyZmxvdyIsIm92ZXJmbG93IiwiaG90a2V5cyIsImhhbmRsZUhvdGtleXMiLCJfaG90a2V5cyRmdWxsc2NyZWVuS2UiLCJmdWxsc2NyZWVuS2V5Iiwia2V5ZG93bkV2ZW50IiwiX2hvdGtleXMkbXV0ZUtleSIsIm11dGVLZXkiLCJfaG90a2V5cyRwbGF5UGF1c2VLZXkiLCJwbGF5UGF1c2VLZXkiLCJGU1RvZ2dsZSIsInNlbGVjdFNvdXJjZSIsIl90aGlzMTAiLCJ0ZWNocyIsIl9yZWYiLCJmaW5kRmlyc3RQYXNzaW5nVGVjaFNvdXJjZVBhaXIiLCJvdXRlckFycmF5IiwiaW5uZXJBcnJheSIsInRlc3RlciIsIm91dGVyQ2hvaWNlIiwiaW5uZXJDaG9pY2UiLCJmb3VuZFNvdXJjZUFuZFRlY2giLCJmbGlwIiwiYiIsImZpbmRlciIsIl9yZWYyIiwic291cmNlT3JkZXIiLCJfdGhpczExIiwibm90U3VwcG9ydGVkTWVzc2FnZSIsIm1pZGRsZXdhcmVTb3VyY2UiLCJzcmNfIiwiX3RoaXMxMiIsInNvdXJjZVRlY2giLCJfdGhpczEzIiwiZG9SZXNldF8iLCJyZXNldENvbnRyb2xCYXJVSV8iLCJyZXNldFByb2dyZXNzQmFyXyIsInJlc2V0UGxheWJhY2tSYXRlXyIsInJlc2V0Vm9sdW1lQmFyXyIsIl90aGlzJGNvbnRyb2xCYXIiLCJkdXJhdGlvbkRpc3BsYXkiLCJjdXJyZW50U291cmNlcyIsImN1cnJlbnRUeXBlIiwidGVjaEF1dG9wbGF5IiwibmV3UG9zdGVyIiwidXNpbmdOYXRpdmVDb250cm9sc18iLCJlcnJvckRpc3BsYXkiLCJ1c2VyQWN0aXZpdHlfIiwibW91c2VJblByb2dyZXNzIiwibGFzdE1vdmVYIiwibGFzdE1vdmVZIiwiaGFuZGxlQWN0aXZpdHkiLCJzY3JlZW5YIiwic2NyZWVuWSIsImlzQXVkaW9fIiwiX29iaiIsInRvSlNPTiIsImNyZWF0ZU1vZGFsIiwiX3RoaXMxNCIsIm1vZGFsIiwidXBkYXRlQ3VycmVudEJyZWFrcG9pbnRfIiwiY3VycmVudEJyZWFrcG9pbnQiLCJjYW5kaWRhdGVCcmVha3BvaW50IiwibWF4V2lkdGgiLCJicmVha3BvaW50c18iLCJicmVha3BvaW50XyIsInJlbW92ZUN1cnJlbnRCcmVha3BvaW50XyIsImN1cnJlbnRCcmVha3BvaW50Q2xhc3MiLCJfYnJlYWtwb2ludHMiLCJyZXNwb25zaXZlXyIsImN1cnJlbnQiLCJsb2FkTWVkaWEiLCJfdGhpczE1IiwiX3RoaXMkY2FjaGVfJG1lZGlhIiwiYXJ0d29yayIsInR0IiwiZ2V0TWVkaWEiLCJiYXNlT3B0aW9ucyIsInRhZ09wdGlvbnMiLCJkYXRhU2V0dXAiLCJfc2FmZVBhcnNlVHVwbGUiLCJjaGlsZE5hbWUiLCJodG1sNSIsImZsYXNoIiwidXNlckxhbmd1YWdlIiwiQkFTRV9QTFVHSU5fTkFNRSIsIlBMVUdJTl9DQUNIRV9LRVkiLCJwbHVnaW5TdG9yYWdlIiwicGx1Z2luRXhpc3RzIiwiZ2V0UGx1Z2luIiwibWFya1BsdWdpbkFzQWN0aXZlIiwidHJpZ2dlclNldHVwRXZlbnQiLCJiZWZvcmUiLCJjcmVhdGVCYXNpY1BsdWdpbiIsInBsdWdpbiIsImJhc2ljUGx1Z2luV3JhcHBlciIsImNyZWF0ZVBsdWdpbkZhY3RvcnkiLCJQbHVnaW5TdWJDbGFzcyIsImdldEV2ZW50SGFzaCIsIlBsdWdpbiIsIlZFUlNJT04iLCJpc0Jhc2ljIiwicmVnaXN0ZXJQbHVnaW4iLCJkZXJlZ2lzdGVyUGx1Z2luIiwiZ2V0UGx1Z2lucyIsImdldFBsdWdpblZlcnNpb24iLCJ1c2luZ1BsdWdpbiIsImhhc1BsdWdpbiIsIl9pbmhlcml0cyQxIiwiX2luaGVyaXRzIiwid3JpdGFibGUiLCJzdXBlcl8iLCJleHRlbmQkMSIsInN1YkNsYXNzTWV0aG9kcyIsIm1ldGhvZHMiLCJub3JtYWxpemVJZCIsInZpZGVvanMkMSIsImdldFBsYXllciIsImRlZmF1bHRWaWV3IiwiaG9va3MiLCJob29rRnVuY3Rpb24iLCJQbGF5ZXJDb21wb25lbnQiLCJob29rc18iLCJob29rIiwiaG9va09uY2UiLCJvcmlnaW5hbCIsInJlbW92ZUhvb2siLCJzdHlsZSQxIiwiZ2V0UGxheWVycyIsIm5JZCIsIl90YWciLCJfcGxheWVyIiwiZ2V0QWxsUGxheWVycyIsImNvbXAiLCJ3cml0ZWFibGUiLCJhZGRMYW5ndWFnZSIsIl9tZXJnZU9wdGlvbnMiLCJjcmVhdGVUaW1lUmFuZ2UiLCJkb20iXSwibWFwcGluZ3MiOiJzUEFBQTs7Ozs7Ozs7OztHQVlDLFVBQVVBLE1BQVYsQ0FBa0JDLE9BQWxCLENB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QUNBd2xELFVBQVVyMEQsR0FBVixDQUFnQkEsR0FBaEIsQ0FDQXEwRCxVQUFVN2xELE9BQVYsQ0FBb0JBLE9BQXBCLENBQ0E7Ozs7Ozs7Ozs7O0tBYUE2bEQsVUFBVWpsQyxHQUFWLENBQWdCQSxHQUFoQixDQUNBaWxDLFVBQVU5Z0MsU0FBVixDQUFzQkEsU0FBdEIsQ0FDQThnQyxVQUFVeC9CLFVBQVYsQ0FBdUJBLFVBQXZCLENBQ0F3L0IsVUFBVXQvQixVQUFWLENBQXVCQSxVQUF2QixDQUNBLENBQUMsTUFBRCxDQUFTLFlBQVQsQ0FBdUIsVUFBdkIsQ0FBbUMsVUFBbkMsQ0FBK0MsVUFBL0MsQ0FBMkQsYUFBM0QsQ0FBMEUsYUFBMUUsQ0FBeUYsZUFBekYsQ0FBMEcsZUFBMUcsQ0FBMkgsU0FBM0gsQ0FBc0ksZUFBdEksQ0FBdUosZUFBdkosRUFBd0tsekIsT0FBeEssQ0FBZ0wsU0FBVStGLENBQVYsQ0FBYSxDQUMzTHlzRCxVQUFVenNELENBQVYsRUFBZSxVQUFZLENBQ3pCbkosSUFBSXlCLElBQUosQ0FBUyxXQUFhMEgsQ0FBYixDQUFpQixvQ0FBakIsQ0FBd0RBLENBQXhELENBQTRELFlBQXJFLEVBQ0EsTUFBTytDLEtBQUkvQyxDQUFKLEVBQU9sSyxLQUFQLENBQWEsSUFBYixDQUFtQkssU0FBbkIsQ0FBUCxDQUNELENBSEQsQ0FJRCxDQUxELEVBTUFzMkQsVUFBVTd4RCxhQUFWLENBQTBCQSxhQUExQixDQUNBOzs7OztLQU9BNnhELFVBQVVzQixHQUFWLENBQWdCaHJELEdBQWhCLENBQ0E7Ozs7O0tBT0EwcEQsVUFBVWpwQyxHQUFWLENBQWdCb0IsR0FBaEIsQ0FFQSxNQUFPNm5DLFVBQVAsQ0FFRCxDQTU5ekJBLENBQUQiLCJmaWxlIjoidmlkZW8uY29yZS5ub3Z0dC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIFZpZGVvLmpzIDcuNS40IDxodHRwOi8vdmlkZW9qcy5jb20vPlxuICogQ29weXJpZ2h0IEJyaWdodGNvdmUsIEluYy4gPGh0dHBzOi8vd3d3LmJyaWdodGNvdmUuY29tLz5cbiAqIEF2YWlsYWJsZSB1bmRlciBBcGFjaGUgTGljZW5zZSBWZXJzaW9uIDIuMFxuICogPGh0dHBzOi8vZ2l0aHViLmNvbS92aWRlb2pzL3ZpZGVvLmpzL2Jsb2IvbWFzdGVyL0xJQ0VOU0U+XG4gKlxuICogSW5jbHVkZXMgdnR0LmpzIDxodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYS92dHQuanM+XG4gKiBBdmFpbGFibGUgdW5kZXIgQXBhY2hlIExpY2Vuc2UgVmVyc2lvbiAyLjBcbiAqIDxodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYS92dHQuanMvYmxvYi9tYXN0ZXIvTElDRU5TRT5cbiAqL1xuXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnZ2xvYmFsL3dpbmRvdycpLCByZXF1aXJlKCdnbG9iYWwvZG9jdW1lbnQnKSkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydnbG9iYWwvd2luZG93JywgJ2dsb2JhbC9kb2N1bWVudCddLCBmYWN0b3J5KSA6XG4gIChnbG9iYWwgPSBnbG9iYWwgfHwgc2VsZiwgZ2xvYmFsLnZpZGVvanMgPSBmYWN0b3J5KGdsb2JhbC53aW5kb3csIGdsb2JhbC5kb2N1bWVudCkpO1xufSh0aGlzLCBmdW5jdGlvbiAod2luZG93JDEsIGRvY3VtZW50KSB7XG4gIHdpbmRvdyQxID0gd2luZG93JDEgJiYgd2luZG93JDEuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKSA/IHdpbmRvdyQxWydkZWZhdWx0J10gOiB3aW5kb3ckMTtcbiAgZG9jdW1lbnQgPSBkb2N1bWVudCAmJiBkb2N1bWVudC5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpID8gZG9jdW1lbnRbJ2RlZmF1bHQnXSA6IGRvY3VtZW50O1xuXG4gIHZhciB2ZXJzaW9uID0gXCI3LjUuNFwiO1xuXG4gIGZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gICAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7XG4gICAgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7XG4gICAgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gICAgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gICAgICBvLl9fcHJvdG9fXyA9IHA7XG4gICAgICByZXR1cm4gbztcbiAgICB9O1xuXG4gICAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTtcbiAgICBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlO1xuXG4gICAgdHJ5IHtcbiAgICAgIERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoRGF0ZSwgW10sIGZ1bmN0aW9uICgpIHt9KSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2NvbnN0cnVjdChQYXJlbnQsIGFyZ3MsIENsYXNzKSB7XG4gICAgaWYgKGlzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpKSB7XG4gICAgICBfY29uc3RydWN0ID0gUmVmbGVjdC5jb25zdHJ1Y3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIF9jb25zdHJ1Y3QgPSBmdW5jdGlvbiBfY29uc3RydWN0KFBhcmVudCwgYXJncywgQ2xhc3MpIHtcbiAgICAgICAgdmFyIGEgPSBbbnVsbF07XG4gICAgICAgIGEucHVzaC5hcHBseShhLCBhcmdzKTtcbiAgICAgICAgdmFyIENvbnN0cnVjdG9yID0gRnVuY3Rpb24uYmluZC5hcHBseShQYXJlbnQsIGEpO1xuICAgICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgQ29uc3RydWN0b3IoKTtcbiAgICAgICAgaWYgKENsYXNzKSBfc2V0UHJvdG90eXBlT2YoaW5zdGFuY2UsIENsYXNzLnByb3RvdHlwZSk7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9jb25zdHJ1Y3QuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikge1xuICAgIGlmIChzZWxmID09PSB2b2lkIDApIHtcbiAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfVxuXG4gIGZ1bmN0aW9uIF90YWdnZWRUZW1wbGF0ZUxpdGVyYWxMb29zZShzdHJpbmdzLCByYXcpIHtcbiAgICBpZiAoIXJhdykge1xuICAgICAgcmF3ID0gc3RyaW5ncy5zbGljZSgwKTtcbiAgICB9XG5cbiAgICBzdHJpbmdzLnJhdyA9IHJhdztcbiAgICByZXR1cm4gc3RyaW5ncztcbiAgfVxuXG4gIC8qKlxuICAgKiBAZmlsZSBjcmVhdGUtbG9nZ2VyLmpzXG4gICAqIEBtb2R1bGUgY3JlYXRlLWxvZ2dlclxuICAgKi9cblxuICB2YXIgaGlzdG9yeSA9IFtdO1xuICAvKipcbiAgICogTG9nIG1lc3NhZ2VzIHRvIHRoZSBjb25zb2xlIGFuZCBoaXN0b3J5IGJhc2VkIG9uIHRoZSB0eXBlIG9mIG1lc3NhZ2VcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtICB7c3RyaW5nfSB0eXBlXG4gICAqICAgICAgICAgVGhlIG5hbWUgb2YgdGhlIGNvbnNvbGUgbWV0aG9kIHRvIHVzZS5cbiAgICpcbiAgICogQHBhcmFtICB7QXJyYXl9IGFyZ3NcbiAgICogICAgICAgICBUaGUgYXJndW1lbnRzIHRvIGJlIHBhc3NlZCB0byB0aGUgbWF0Y2hpbmcgY29uc29sZSBtZXRob2QuXG4gICAqL1xuXG4gIHZhciBMb2dCeVR5cGVGYWN0b3J5ID0gZnVuY3Rpb24gTG9nQnlUeXBlRmFjdG9yeShuYW1lLCBsb2cpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHR5cGUsIGxldmVsLCBhcmdzKSB7XG4gICAgICB2YXIgbHZsID0gbG9nLmxldmVsc1tsZXZlbF07XG4gICAgICB2YXIgbHZsUmVnRXhwID0gbmV3IFJlZ0V4cChcIl4oXCIgKyBsdmwgKyBcIikkXCIpO1xuXG4gICAgICBpZiAodHlwZSAhPT0gJ2xvZycpIHtcbiAgICAgICAgLy8gQWRkIHRoZSB0eXBlIHRvIHRoZSBmcm9udCBvZiB0aGUgbWVzc2FnZSB3aGVuIGl0J3Mgbm90IFwibG9nXCIuXG4gICAgICAgIGFyZ3MudW5zaGlmdCh0eXBlLnRvVXBwZXJDYXNlKCkgKyAnOicpO1xuICAgICAgfSAvLyBBZGQgY29uc29sZSBwcmVmaXggYWZ0ZXIgYWRkaW5nIHRvIGhpc3RvcnkuXG5cblxuICAgICAgYXJncy51bnNoaWZ0KG5hbWUgKyAnOicpOyAvLyBBZGQgYSBjbG9uZSBvZiB0aGUgYXJncyBhdCB0aGlzIHBvaW50IHRvIGhpc3RvcnkuXG5cbiAgICAgIGlmIChoaXN0b3J5KSB7XG4gICAgICAgIGhpc3RvcnkucHVzaChbXS5jb25jYXQoYXJncykpO1xuICAgICAgfSAvLyBJZiB0aGVyZSdzIG5vIGNvbnNvbGUgdGhlbiBkb24ndCB0cnkgdG8gb3V0cHV0IG1lc3NhZ2VzLCBidXQgdGhleSB3aWxsXG4gICAgICAvLyBzdGlsbCBiZSBzdG9yZWQgaW4gaGlzdG9yeS5cblxuXG4gICAgICBpZiAoIXdpbmRvdyQxLmNvbnNvbGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBXYXMgc2V0dGluZyB0aGVzZSBvbmNlIG91dHNpZGUgb2YgdGhpcyBmdW5jdGlvbiwgYnV0IGNvbnRhaW5pbmcgdGhlbVxuICAgICAgLy8gaW4gdGhlIGZ1bmN0aW9uIG1ha2VzIGl0IGVhc2llciB0byB0ZXN0IGNhc2VzIHdoZXJlIGNvbnNvbGUgZG9lc24ndCBleGlzdFxuICAgICAgLy8gd2hlbiB0aGUgbW9kdWxlIGlzIGV4ZWN1dGVkLlxuXG5cbiAgICAgIHZhciBmbiA9IHdpbmRvdyQxLmNvbnNvbGVbdHlwZV07XG5cbiAgICAgIGlmICghZm4gJiYgdHlwZSA9PT0gJ2RlYnVnJykge1xuICAgICAgICAvLyBDZXJ0YWluIGJyb3dzZXJzIGRvbid0IGhhdmUgc3VwcG9ydCBmb3IgY29uc29sZS5kZWJ1Zy4gRm9yIHRob3NlLCB3ZVxuICAgICAgICAvLyBzaG91bGQgZGVmYXVsdCB0byB0aGUgY2xvc2VzdCBjb21wYXJhYmxlIGxvZy5cbiAgICAgICAgZm4gPSB3aW5kb3ckMS5jb25zb2xlLmluZm8gfHwgd2luZG93JDEuY29uc29sZS5sb2c7XG4gICAgICB9IC8vIEJhaWwgb3V0IGlmIHRoZXJlJ3Mgbm8gY29uc29sZSBvciBpZiB0aGlzIHR5cGUgaXMgbm90IGFsbG93ZWQgYnkgdGhlXG4gICAgICAvLyBjdXJyZW50IGxvZ2dpbmcgbGV2ZWwuXG5cblxuICAgICAgaWYgKCFmbiB8fCAhbHZsIHx8ICFsdmxSZWdFeHAudGVzdCh0eXBlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGZuW0FycmF5LmlzQXJyYXkoYXJncykgPyAnYXBwbHknIDogJ2NhbGwnXSh3aW5kb3ckMS5jb25zb2xlLCBhcmdzKTtcbiAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUxvZ2dlcihuYW1lKSB7XG4gICAgLy8gVGhpcyBpcyB0aGUgcHJpdmF0ZSB0cmFja2luZyB2YXJpYWJsZSBmb3IgbG9nZ2luZyBsZXZlbC5cbiAgICB2YXIgbGV2ZWwgPSAnaW5mbyc7IC8vIHRoZSBjdXJyaWVkIGxvZ0J5VHlwZSBib3VuZCB0byB0aGUgc3BlY2lmaWMgbG9nIGFuZCBoaXN0b3J5XG5cbiAgICB2YXIgbG9nQnlUeXBlO1xuICAgIC8qKlxuICAgICAqIExvZ3MgcGxhaW4gZGVidWcgbWVzc2FnZXMuIFNpbWlsYXIgdG8gYGNvbnNvbGUubG9nYC5cbiAgICAgKlxuICAgICAqIER1ZSB0byBbbGltaXRhdGlvbnNdKGh0dHBzOi8vZ2l0aHViLmNvbS9qc2RvYzMvanNkb2MvaXNzdWVzLzk1NSNpc3N1ZWNvbW1lbnQtMzEzODI5MTQ5KVxuICAgICAqIG9mIG91ciBKU0RvYyB0ZW1wbGF0ZSwgd2UgY2Fubm90IHByb3Blcmx5IGRvY3VtZW50IHRoaXMgYXMgYm90aCBhIGZ1bmN0aW9uXG4gICAgICogYW5kIGEgbmFtZXNwYWNlLCBzbyBpdHMgZnVuY3Rpb24gc2lnbmF0dXJlIGlzIGRvY3VtZW50ZWQgaGVyZS5cbiAgICAgKlxuICAgICAqICMjIyMgQXJndW1lbnRzXG4gICAgICogIyMjIyMgKmFyZ3NcbiAgICAgKiBNaXhlZFtdXG4gICAgICpcbiAgICAgKiBBbnkgY29tYmluYXRpb24gb2YgdmFsdWVzIHRoYXQgY291bGQgYmUgcGFzc2VkIHRvIGBjb25zb2xlLmxvZygpYC5cbiAgICAgKlxuICAgICAqICMjIyMgUmV0dXJuIFZhbHVlXG4gICAgICpcbiAgICAgKiBgdW5kZWZpbmVkYFxuICAgICAqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBwYXJhbSAgICB7TWl4ZWRbXX0gYXJnc1xuICAgICAqICAgICAgICAgICBPbmUgb3IgbW9yZSBtZXNzYWdlcyBvciBvYmplY3RzIHRoYXQgc2hvdWxkIGJlIGxvZ2dlZC5cbiAgICAgKi9cblxuICAgIHZhciBsb2cgPSBmdW5jdGlvbiBsb2coKSB7XG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgbG9nQnlUeXBlKCdsb2cnLCBsZXZlbCwgYXJncyk7XG4gICAgfTsgLy8gVGhpcyBpcyB0aGUgbG9nQnlUeXBlIGhlbHBlciB0aGF0IHRoZSBsb2dnaW5nIG1ldGhvZHMgYmVsb3cgdXNlXG5cblxuICAgIGxvZ0J5VHlwZSA9IExvZ0J5VHlwZUZhY3RvcnkobmFtZSwgbG9nKTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgc3VibG9nZ2VyIHdoaWNoIGNoYWlucyB0aGUgb2xkIG5hbWUgdG8gdGhlIG5ldyBuYW1lLlxuICAgICAqXG4gICAgICogRm9yIGV4YW1wbGUsIGRvaW5nIGB2aWRlb2pzLmxvZy5jcmVhdGVMb2dnZXIoJ3BsYXllcicpYCBhbmQgdGhlbiB1c2luZyB0aGF0IGxvZ2dlciB3aWxsIGxvZyB0aGUgZm9sbG93aW5nOlxuICAgICAqIGBgYGpzXG4gICAgICogIG15bG9nZ2VyKCdmb28nKTtcbiAgICAgKiAgLy8gPiBWSURFT0pTOiBwbGF5ZXI6IGZvb1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiAgICAgICAgVGhlIG5hbWUgdG8gYWRkIGNhbGwgdGhlIG5ldyBsb2dnZXJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICovXG5cbiAgICBsb2cuY3JlYXRlTG9nZ2VyID0gZnVuY3Rpb24gKHN1Ym5hbWUpIHtcbiAgICAgIHJldHVybiBjcmVhdGVMb2dnZXIobmFtZSArICc6ICcgKyBzdWJuYW1lKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEVudW1lcmF0aW9uIG9mIGF2YWlsYWJsZSBsb2dnaW5nIGxldmVscywgd2hlcmUgdGhlIGtleXMgYXJlIHRoZSBsZXZlbCBuYW1lc1xuICAgICAqIGFuZCB0aGUgdmFsdWVzIGFyZSBgfGAtc2VwYXJhdGVkIHN0cmluZ3MgY29udGFpbmluZyBsb2dnaW5nIG1ldGhvZHMgYWxsb3dlZFxuICAgICAqIGluIHRoYXQgbG9nZ2luZyBsZXZlbC4gVGhlc2Ugc3RyaW5ncyBhcmUgdXNlZCB0byBjcmVhdGUgYSByZWd1bGFyIGV4cHJlc3Npb25cbiAgICAgKiBtYXRjaGluZyB0aGUgZnVuY3Rpb24gbmFtZSBiZWluZyBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBMZXZlbHMgcHJvdmlkZWQgYnkgVmlkZW8uanMgYXJlOlxuICAgICAqXG4gICAgICogLSBgb2ZmYDogTWF0Y2hlcyBubyBjYWxscy4gQW55IHZhbHVlIHRoYXQgY2FuIGJlIGNhc3QgdG8gYGZhbHNlYCB3aWxsIGhhdmVcbiAgICAgKiAgIHRoaXMgZWZmZWN0LiBUaGUgbW9zdCByZXN0cmljdGl2ZS5cbiAgICAgKiAtIGBhbGxgOiBNYXRjaGVzIG9ubHkgVmlkZW8uanMtcHJvdmlkZWQgZnVuY3Rpb25zIChgZGVidWdgLCBgbG9nYCxcbiAgICAgKiAgIGBsb2cud2FybmAsIGFuZCBgbG9nLmVycm9yYCkuXG4gICAgICogLSBgZGVidWdgOiBNYXRjaGVzIGBsb2cuZGVidWdgLCBgbG9nYCwgYGxvZy53YXJuYCwgYW5kIGBsb2cuZXJyb3JgIGNhbGxzLlxuICAgICAqIC0gYGluZm9gIChkZWZhdWx0KTogTWF0Y2hlcyBgbG9nYCwgYGxvZy53YXJuYCwgYW5kIGBsb2cuZXJyb3JgIGNhbGxzLlxuICAgICAqIC0gYHdhcm5gOiBNYXRjaGVzIGBsb2cud2FybmAgYW5kIGBsb2cuZXJyb3JgIGNhbGxzLlxuICAgICAqIC0gYGVycm9yYDogTWF0Y2hlcyBvbmx5IGBsb2cuZXJyb3JgIGNhbGxzLlxuICAgICAqXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cblxuXG4gICAgbG9nLmxldmVscyA9IHtcbiAgICAgIGFsbDogJ2RlYnVnfGxvZ3x3YXJufGVycm9yJyxcbiAgICAgIG9mZjogJycsXG4gICAgICBkZWJ1ZzogJ2RlYnVnfGxvZ3x3YXJufGVycm9yJyxcbiAgICAgIGluZm86ICdsb2d8d2FybnxlcnJvcicsXG4gICAgICB3YXJuOiAnd2FybnxlcnJvcicsXG4gICAgICBlcnJvcjogJ2Vycm9yJyxcbiAgICAgIERFRkFVTFQ6IGxldmVsXG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgb3Igc2V0IHRoZSBjdXJyZW50IGxvZ2dpbmcgbGV2ZWwuXG4gICAgICpcbiAgICAgKiBJZiBhIHN0cmluZyBtYXRjaGluZyBhIGtleSBmcm9tIHtAbGluayBtb2R1bGU6bG9nLmxldmVsc30gaXMgcHJvdmlkZWQsIGFjdHNcbiAgICAgKiBhcyBhIHNldHRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gW2x2bF1cbiAgICAgKiAgICAgICAgIFBhc3MgYSB2YWxpZCBsZXZlbCB0byBzZXQgYSBuZXcgbG9nZ2luZyBsZXZlbC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKiAgICAgICAgIFRoZSBjdXJyZW50IGxvZ2dpbmcgbGV2ZWwuXG4gICAgICovXG5cbiAgICBsb2cubGV2ZWwgPSBmdW5jdGlvbiAobHZsKSB7XG4gICAgICBpZiAodHlwZW9mIGx2bCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKCFsb2cubGV2ZWxzLmhhc093blByb3BlcnR5KGx2bCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcXFwiXCIgKyBsdmwgKyBcIlxcXCIgaW4gbm90IGEgdmFsaWQgbG9nIGxldmVsXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV2ZWwgPSBsdmw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBsZXZlbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgY29udGFpbmluZyBldmVyeXRoaW5nIHRoYXQgaGFzIGJlZW4gbG9nZ2VkIHRvIHRoZSBoaXN0b3J5LlxuICAgICAqXG4gICAgICogVGhpcyBhcnJheSBpcyBhIHNoYWxsb3cgY2xvbmUgb2YgdGhlIGludGVybmFsIGhpc3RvcnkgcmVjb3JkLiBIb3dldmVyLCBpdHNcbiAgICAgKiBjb250ZW50cyBhcmUgX25vdF8gY2xvbmVkOyBzbywgbXV0YXRpbmcgb2JqZWN0cyBpbnNpZGUgdGhpcyBhcnJheSB3aWxsXG4gICAgICogbXV0YXRlIHRoZW0gaW4gaGlzdG9yeS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0FycmF5fVxuICAgICAqL1xuXG5cbiAgICBsb2cuaGlzdG9yeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBoaXN0b3J5ID8gW10uY29uY2F0KGhpc3RvcnkpIDogW107XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBbGxvd3MgeW91IHRvIGZpbHRlciB0aGUgaGlzdG9yeSBieSB0aGUgZ2l2ZW4gbG9nZ2VyIG5hbWVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmbmFtZVxuICAgICAqICAgICAgICBUaGUgbmFtZSB0byBmaWx0ZXIgYnlcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0FycmF5fVxuICAgICAqICAgICAgICAgVGhlIGZpbHRlcmVkIGxpc3QgdG8gcmV0dXJuXG4gICAgICovXG5cblxuICAgIGxvZy5oaXN0b3J5LmZpbHRlciA9IGZ1bmN0aW9uIChmbmFtZSkge1xuICAgICAgcmV0dXJuIChoaXN0b3J5IHx8IFtdKS5maWx0ZXIoZnVuY3Rpb24gKGhpc3RvcnlJdGVtKSB7XG4gICAgICAgIC8vIGlmIHRoZSBmaXJzdCBpdGVtIGluIGVhY2ggaGlzdG9yeUl0ZW0gaW5jbHVkZXMgYGZuYW1lYCwgdGhlbiBpdCdzIGEgbWF0Y2hcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoXCIuKlwiICsgZm5hbWUgKyBcIi4qXCIpLnRlc3QoaGlzdG9yeUl0ZW1bMF0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIGludGVybmFsIGhpc3RvcnkgdHJhY2tpbmcsIGJ1dCBkb2VzIG5vdCBwcmV2ZW50IGZ1cnRoZXIgaGlzdG9yeVxuICAgICAqIHRyYWNraW5nLlxuICAgICAqL1xuXG5cbiAgICBsb2cuaGlzdG9yeS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChoaXN0b3J5KSB7XG4gICAgICAgIGhpc3RvcnkubGVuZ3RoID0gMDtcbiAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc2FibGUgaGlzdG9yeSB0cmFja2luZyBpZiBpdCBpcyBjdXJyZW50bHkgZW5hYmxlZC5cbiAgICAgKi9cblxuXG4gICAgbG9nLmhpc3RvcnkuZGlzYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChoaXN0b3J5ICE9PSBudWxsKSB7XG4gICAgICAgIGhpc3RvcnkubGVuZ3RoID0gMDtcbiAgICAgICAgaGlzdG9yeSA9IG51bGw7XG4gICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFbmFibGUgaGlzdG9yeSB0cmFja2luZyBpZiBpdCBpcyBjdXJyZW50bHkgZGlzYWJsZWQuXG4gICAgICovXG5cblxuICAgIGxvZy5oaXN0b3J5LmVuYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChoaXN0b3J5ID09PSBudWxsKSB7XG4gICAgICAgIGhpc3RvcnkgPSBbXTtcbiAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvZ3MgZXJyb3IgbWVzc2FnZXMuIFNpbWlsYXIgdG8gYGNvbnNvbGUuZXJyb3JgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtNaXhlZFtdfSBhcmdzXG4gICAgICogICAgICAgIE9uZSBvciBtb3JlIG1lc3NhZ2VzIG9yIG9iamVjdHMgdGhhdCBzaG91bGQgYmUgbG9nZ2VkIGFzIGFuIGVycm9yXG4gICAgICovXG5cblxuICAgIGxvZy5lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBsb2dCeVR5cGUoJ2Vycm9yJywgbGV2ZWwsIGFyZ3MpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9ncyB3YXJuaW5nIG1lc3NhZ2VzLiBTaW1pbGFyIHRvIGBjb25zb2xlLndhcm5gLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtNaXhlZFtdfSBhcmdzXG4gICAgICogICAgICAgIE9uZSBvciBtb3JlIG1lc3NhZ2VzIG9yIG9iamVjdHMgdGhhdCBzaG91bGQgYmUgbG9nZ2VkIGFzIGEgd2FybmluZy5cbiAgICAgKi9cblxuXG4gICAgbG9nLndhcm4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjMpLCBfa2V5MyA9IDA7IF9rZXkzIDwgX2xlbjM7IF9rZXkzKyspIHtcbiAgICAgICAgYXJnc1tfa2V5M10gPSBhcmd1bWVudHNbX2tleTNdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbG9nQnlUeXBlKCd3YXJuJywgbGV2ZWwsIGFyZ3MpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9ncyBkZWJ1ZyBtZXNzYWdlcy4gU2ltaWxhciB0byBgY29uc29sZS5kZWJ1Z2AsIGJ1dCBtYXkgYWxzbyBhY3QgYXMgYSBjb21wYXJhYmxlXG4gICAgICogbG9nIGlmIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgYXZhaWxhYmxlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge01peGVkW119IGFyZ3NcbiAgICAgKiAgICAgICAgT25lIG9yIG1vcmUgbWVzc2FnZXMgb3Igb2JqZWN0cyB0aGF0IHNob3VsZCBiZSBsb2dnZWQgYXMgZGVidWcuXG4gICAgICovXG5cblxuICAgIGxvZy5kZWJ1ZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuNCksIF9rZXk0ID0gMDsgX2tleTQgPCBfbGVuNDsgX2tleTQrKykge1xuICAgICAgICBhcmdzW19rZXk0XSA9IGFyZ3VtZW50c1tfa2V5NF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBsb2dCeVR5cGUoJ2RlYnVnJywgbGV2ZWwsIGFyZ3MpO1xuICAgIH07XG5cbiAgICByZXR1cm4gbG9nO1xuICB9XG5cbiAgLyoqXG4gICAqIEBmaWxlIGxvZy5qc1xuICAgKiBAbW9kdWxlIGxvZ1xuICAgKi9cbiAgdmFyIGxvZyA9IGNyZWF0ZUxvZ2dlcignVklERU9KUycpO1xuICB2YXIgY3JlYXRlTG9nZ2VyJDEgPSBsb2cuY3JlYXRlTG9nZ2VyO1xuXG4gIGZ1bmN0aW9uIGNsZWFuKHMpIHtcbiAgICByZXR1cm4gcy5yZXBsYWNlKC9cXG5cXHI/XFxzKi9nLCAnJyk7XG4gIH1cblxuICB2YXIgdHNtbCA9IGZ1bmN0aW9uIHRzbWwoc2EpIHtcbiAgICB2YXIgcyA9ICcnLFxuICAgICAgICBpID0gMDtcblxuICAgIGZvciAoOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzICs9IGNsZWFuKHNhW2ldKSArIChhcmd1bWVudHNbaSArIDFdIHx8ICcnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcztcbiAgfTtcblxuICAvKipcbiAgICogQGZpbGUgb2JqLmpzXG4gICAqIEBtb2R1bGUgb2JqXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAY2FsbGJhY2sgb2JqOkVhY2hDYWxsYmFja1xuICAgKlxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgKiAgICAgICAgVGhlIGN1cnJlbnQga2V5IGZvciB0aGUgb2JqZWN0IHRoYXQgaXMgYmVpbmcgaXRlcmF0ZWQgb3Zlci5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICAgKiAgICAgICAgVGhlIGN1cnJlbnQga2V5LXZhbHVlIGZvciBvYmplY3QgdGhhdCBpcyBiZWluZyBpdGVyYXRlZCBvdmVyXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAY2FsbGJhY2sgb2JqOlJlZHVjZUNhbGxiYWNrXG4gICAqXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGFjY3VtXG4gICAqICAgICAgICBUaGUgdmFsdWUgdGhhdCBpcyBhY2N1bXVsYXRpbmcgb3ZlciB0aGUgcmVkdWNlIGxvb3AuXG4gICAqXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAqICAgICAgICBUaGUgY3VycmVudCBrZXkgZm9yIHRoZSBvYmplY3QgdGhhdCBpcyBiZWluZyBpdGVyYXRlZCBvdmVyLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gICAqICAgICAgICBUaGUgY3VycmVudCBrZXktdmFsdWUgZm9yIG9iamVjdCB0aGF0IGlzIGJlaW5nIGl0ZXJhdGVkIG92ZXJcbiAgICpcbiAgICogQHJldHVybiB7TWl4ZWR9XG4gICAqICAgICAgICAgVGhlIG5ldyBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICovXG4gIHZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG4gIC8qKlxuICAgKiBHZXQgdGhlIGtleXMgb2YgYW4gT2JqZWN0XG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fVxuICAgKiAgICAgICAgVGhlIE9iamVjdCB0byBnZXQgdGhlIGtleXMgZnJvbVxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmdbXX1cbiAgICogICAgICAgICBBbiBhcnJheSBvZiB0aGUga2V5cyBmcm9tIHRoZSBvYmplY3QuIFJldHVybnMgYW4gZW1wdHkgYXJyYXkgaWYgdGhlXG4gICAqICAgICAgICAgb2JqZWN0IHBhc3NlZCBpbiB3YXMgaW52YWxpZCBvciBoYWQgbm8ga2V5cy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgdmFyIGtleXMgPSBmdW5jdGlvbiBrZXlzKG9iamVjdCkge1xuICAgIHJldHVybiBpc09iamVjdChvYmplY3QpID8gT2JqZWN0LmtleXMob2JqZWN0KSA6IFtdO1xuICB9O1xuICAvKipcbiAgICogQXJyYXktbGlrZSBpdGVyYXRpb24gZm9yIG9iamVjdHMuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogICAgICAgIFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqOkVhY2hDYWxsYmFja30gZm5cbiAgICogICAgICAgIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB3aGljaCBpcyBjYWxsZWQgZm9yIGVhY2gga2V5IGluIHRoZSBvYmplY3QuXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gZWFjaChvYmplY3QsIGZuKSB7XG4gICAga2V5cyhvYmplY3QpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIGZuKG9iamVjdFtrZXldLCBrZXkpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBBcnJheS1saWtlIHJlZHVjZSBmb3Igb2JqZWN0cy5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICAgKiAgICAgICAgVGhlIE9iamVjdCB0aGF0IHlvdSB3YW50IHRvIHJlZHVjZS5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICogICAgICAgICBBIGNhbGxiYWNrIGZ1bmN0aW9uIHdoaWNoIGlzIGNhbGxlZCBmb3IgZWFjaCBrZXkgaW4gdGhlIG9iamVjdC4gSXRcbiAgICogICAgICAgICByZWNlaXZlcyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUgYW5kIHRoZSBwZXItaXRlcmF0aW9uIHZhbHVlIGFuZCBrZXlcbiAgICogICAgICAgICBhcyBhcmd1bWVudHMuXG4gICAqXG4gICAqIEBwYXJhbSB7TWl4ZWR9IFtpbml0aWFsID0gMF1cbiAgICogICAgICAgIFN0YXJ0aW5nIHZhbHVlXG4gICAqXG4gICAqIEByZXR1cm4ge01peGVkfVxuICAgKiAgICAgICAgIFRoZSBmaW5hbCBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVkdWNlKG9iamVjdCwgZm4sIGluaXRpYWwpIHtcbiAgICBpZiAoaW5pdGlhbCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbml0aWFsID0gMDtcbiAgICB9XG5cbiAgICByZXR1cm4ga2V5cyhvYmplY3QpLnJlZHVjZShmdW5jdGlvbiAoYWNjdW0sIGtleSkge1xuICAgICAgcmV0dXJuIGZuKGFjY3VtLCBvYmplY3Rba2V5XSwga2V5KTtcbiAgICB9LCBpbml0aWFsKTtcbiAgfVxuICAvKipcbiAgICogT2JqZWN0LmFzc2lnbi1zdHlsZSBvYmplY3Qgc2hhbGxvdyBtZXJnZS9leHRlbmQuXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gdGFyZ2V0XG4gICAqIEBwYXJhbSAge09iamVjdH0gLi4uc291cmNlc1xuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgc291cmNlcyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBzb3VyY2VzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmFzc2lnbikge1xuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24uYXBwbHkoT2JqZWN0LCBbdGFyZ2V0XS5jb25jYXQoc291cmNlcykpO1xuICAgIH1cblxuICAgIHNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGVhY2goc291cmNlLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgICB0YXJnZXRba2V5XSA9IHZhbHVlO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIGEgdmFsdWUgaXMgYW4gb2JqZWN0IG9mIGFueSBraW5kIC0gaW5jbHVkaW5nIERPTSBub2RlcyxcbiAgICogYXJyYXlzLCByZWd1bGFyIGV4cHJlc3Npb25zLCBldGMuIE5vdCBmdW5jdGlvbnMsIHRob3VnaC5cbiAgICpcbiAgICogVGhpcyBhdm9pZHMgdGhlIGdvdGNoYSB3aGVyZSB1c2luZyBgdHlwZW9mYCBvbiBhIGBudWxsYCB2YWx1ZVxuICAgKiByZXN1bHRzIGluIGAnb2JqZWN0J2AuXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gdmFsdWVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgYW4gb2JqZWN0IGFwcGVhcnMgdG8gYmUgYSBcInBsYWluXCIgb2JqZWN0IC0gdGhhdCBpcywgYVxuICAgKiBkaXJlY3QgaW5zdGFuY2Ugb2YgYE9iamVjdGAuXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gdmFsdWVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gaXNQbGFpbih2YWx1ZSkge1xuICAgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IE9iamVjdF0nICYmIHZhbHVlLmNvbnN0cnVjdG9yID09PSBPYmplY3Q7XG4gIH1cblxuICAvKipcbiAgICogQGZpbGUgY29tcHV0ZWQtc3R5bGUuanNcbiAgICogQG1vZHVsZSBjb21wdXRlZC1zdHlsZVxuICAgKi9cbiAgLyoqXG4gICAqIEEgc2FmZSBnZXRDb21wdXRlZFN0eWxlLlxuICAgKlxuICAgKiBUaGlzIGlzIG5lZWRlZCBiZWNhdXNlIGluIEZpcmVmb3gsIGlmIHRoZSBwbGF5ZXIgaXMgbG9hZGVkIGluIGFuIGlmcmFtZSB3aXRoXG4gICAqIGBkaXNwbGF5Om5vbmVgLCB0aGVuIGBnZXRDb21wdXRlZFN0eWxlYCByZXR1cm5zIGBudWxsYCwgc28sIHdlIGRvIGFcbiAgICogbnVsbC1jaGVjayB0byBtYWtlIHN1cmUgdGhhdCB0aGUgcGxheWVyIGRvZXNuJ3QgYnJlYWsgaW4gdGhlc2UgY2FzZXMuXG4gICAqXG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW0gICAge0VsZW1lbnR9IGVsXG4gICAqICAgICAgICAgICBUaGUgZWxlbWVudCB5b3Ugd2FudCB0aGUgY29tcHV0ZWQgc3R5bGUgb2ZcbiAgICpcbiAgICogQHBhcmFtICAgIHtzdHJpbmd9IHByb3BcbiAgICogICAgICAgICAgIFRoZSBwcm9wZXJ0eSBuYW1lIHlvdSB3YW50XG4gICAqXG4gICAqIEBzZWUgICAgICBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD01NDgzOTdcbiAgICovXG5cbiAgZnVuY3Rpb24gY29tcHV0ZWRTdHlsZShlbCwgcHJvcCkge1xuICAgIGlmICghZWwgfHwgIXByb3ApIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyQxLmdldENvbXB1dGVkU3R5bGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHZhciBjcyA9IHdpbmRvdyQxLmdldENvbXB1dGVkU3R5bGUoZWwpO1xuICAgICAgcmV0dXJuIGNzID8gY3NbcHJvcF0gOiAnJztcbiAgICB9XG5cbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QoKSB7XG4gICAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsTG9vc2UoW1wiU2V0dGluZyBhdHRyaWJ1dGVzIGluIHRoZSBzZWNvbmQgYXJndW1lbnQgb2YgY3JlYXRlRWwoKVxcbiAgICAgICAgICAgICAgICBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgdGhlIHRoaXJkIGFyZ3VtZW50IGluc3RlYWQuXFxuICAgICAgICAgICAgICAgIGNyZWF0ZUVsKHR5cGUsIHByb3BlcnRpZXMsIGF0dHJpYnV0ZXMpLiBBdHRlbXB0aW5nIHRvIHNldCBcIiwgXCIgdG8gXCIsIFwiLlwiXSk7XG5cbiAgICBfdGVtcGxhdGVPYmplY3QgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QoKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgLyoqXG4gICAqIERldGVjdCBpZiBhIHZhbHVlIGlzIGEgc3RyaW5nIHdpdGggYW55IG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlcnMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSAge3N0cmluZ30gc3RyXG4gICAqICAgICAgICAgVGhlIHN0cmluZyB0byBjaGVja1xuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIFdpbGwgYmUgYHRydWVgIGlmIHRoZSBzdHJpbmcgaXMgbm9uLWJsYW5rLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICpcbiAgICovXG5cbiAgZnVuY3Rpb24gaXNOb25CbGFua1N0cmluZyhzdHIpIHtcbiAgICByZXR1cm4gdHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgL1xcUy8udGVzdChzdHIpO1xuICB9XG4gIC8qKlxuICAgKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIHBhc3NlZCBzdHJpbmcgaGFzIHdoaXRlc3BhY2UuIFRoaXMgaXMgdXNlZCBieVxuICAgKiBjbGFzcyBtZXRob2RzIHRvIGJlIHJlbGF0aXZlbHkgY29uc2lzdGVudCB3aXRoIHRoZSBjbGFzc0xpc3QgQVBJLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHN0clxuICAgKiAgICAgICAgIFRoZSBzdHJpbmcgdG8gY2hlY2sgZm9yIHdoaXRlc3BhY2UuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfVxuICAgKiAgICAgICAgIFRocm93cyBhbiBlcnJvciBpZiB0aGVyZSBpcyB3aGl0ZXNwYWNlIGluIHRoZSBzdHJpbmcuXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gdGhyb3dJZldoaXRlc3BhY2Uoc3RyKSB7XG4gICAgaWYgKC9cXHMvLnRlc3Qoc3RyKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjbGFzcyBoYXMgaWxsZWdhbCB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMnKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFByb2R1Y2UgYSByZWd1bGFyIGV4cHJlc3Npb24gZm9yIG1hdGNoaW5nIGEgY2xhc3NOYW1lIHdpdGhpbiBhbiBlbGVtZW50cyBjbGFzc05hbWUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSAge3N0cmluZ30gY2xhc3NOYW1lXG4gICAqICAgICAgICAgVGhlIGNsYXNzTmFtZSB0byBnZW5lcmF0ZSB0aGUgUmVnRXhwIGZvci5cbiAgICpcbiAgICogQHJldHVybiB7UmVnRXhwfVxuICAgKiAgICAgICAgIFRoZSBSZWdFeHAgdGhhdCB3aWxsIGNoZWNrIGZvciBhIHNwZWNpZmljIGBjbGFzc05hbWVgIGluIGFuIGVsZW1lbnRzXG4gICAqICAgICAgICAgY2xhc3NOYW1lLlxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIGNsYXNzUmVnRXhwKGNsYXNzTmFtZSkge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKCcoXnxcXFxccyknICsgY2xhc3NOYW1lICsgJygkfFxcXFxzKScpO1xuICB9XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBjdXJyZW50IERPTSBpbnRlcmZhY2UgYXBwZWFycyB0byBiZSByZWFsIChpLmUuIG5vdCBzaW11bGF0ZWQpLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIFdpbGwgYmUgYHRydWVgIGlmIHRoZSBET00gYXBwZWFycyB0byBiZSByZWFsLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICovXG5cblxuICBmdW5jdGlvbiBpc1JlYWwoKSB7XG4gICAgLy8gQm90aCBkb2N1bWVudCBhbmQgd2luZG93IHdpbGwgbmV2ZXIgYmUgdW5kZWZpbmVkIHRoYW5rcyB0byBgZ2xvYmFsYC5cbiAgICByZXR1cm4gZG9jdW1lbnQgPT09IHdpbmRvdyQxLmRvY3VtZW50O1xuICB9XG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzLCB2aWEgZHVjayB0eXBpbmcsIHdoZXRoZXIgb3Igbm90IGEgdmFsdWUgaXMgYSBET00gZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtICB7TWl4ZWR9IHZhbHVlXG4gICAqICAgICAgICAgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIFdpbGwgYmUgYHRydWVgIGlmIHRoZSB2YWx1ZSBpcyBhIERPTSBlbGVtZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gaXNFbCh2YWx1ZSkge1xuICAgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgJiYgdmFsdWUubm9kZVR5cGUgPT09IDE7XG4gIH1cbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgdGhlIGN1cnJlbnQgRE9NIGlzIGVtYmVkZGVkIGluIGFuIGlmcmFtZS5cbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICBXaWxsIGJlIGB0cnVlYCBpZiB0aGUgRE9NIGlzIGVtYmVkZGVkIGluIGFuIGlmcmFtZSwgYGZhbHNlYFxuICAgKiAgICAgICAgIG90aGVyd2lzZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gaXNJbkZyYW1lKCkge1xuICAgIC8vIFdlIG5lZWQgYSB0cnkvY2F0Y2ggaGVyZSBiZWNhdXNlIFNhZmFyaSB3aWxsIHRocm93IGVycm9ycyB3aGVuIGF0dGVtcHRpbmdcbiAgICAvLyB0byBnZXQgZWl0aGVyIGBwYXJlbnRgIG9yIGBzZWxmYFxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gd2luZG93JDEucGFyZW50ICE9PSB3aW5kb3ckMS5zZWxmO1xuICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBmdW5jdGlvbnMgdG8gcXVlcnkgdGhlIERPTSB1c2luZyBhIGdpdmVuIG1ldGhvZC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtICAge3N0cmluZ30gbWV0aG9kXG4gICAqICAgICAgICAgIFRoZSBtZXRob2QgdG8gY3JlYXRlIHRoZSBxdWVyeSB3aXRoLlxuICAgKlxuICAgKiBAcmV0dXJuICB7RnVuY3Rpb259XG4gICAqICAgICAgICAgIFRoZSBxdWVyeSBtZXRob2RcbiAgICovXG5cbiAgZnVuY3Rpb24gY3JlYXRlUXVlcmllcihtZXRob2QpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNlbGVjdG9yLCBjb250ZXh0KSB7XG4gICAgICBpZiAoIWlzTm9uQmxhbmtTdHJpbmcoc2VsZWN0b3IpKSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudFttZXRob2RdKG51bGwpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNOb25CbGFua1N0cmluZyhjb250ZXh0KSkge1xuICAgICAgICBjb250ZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250ZXh0KTtcbiAgICAgIH1cblxuICAgICAgdmFyIGN0eCA9IGlzRWwoY29udGV4dCkgPyBjb250ZXh0IDogZG9jdW1lbnQ7XG4gICAgICByZXR1cm4gY3R4W21ldGhvZF0gJiYgY3R4W21ldGhvZF0oc2VsZWN0b3IpO1xuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gZWxlbWVudCBhbmQgYXBwbGllcyBwcm9wZXJ0aWVzLCBhdHRyaWJ1dGVzLCBhbmQgaW5zZXJ0cyBjb250ZW50LlxuICAgKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IFt0YWdOYW1lPSdkaXYnXVxuICAgKiAgICAgICAgIE5hbWUgb2YgdGFnIHRvIGJlIGNyZWF0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gW3Byb3BlcnRpZXM9e31dXG4gICAqICAgICAgICAgRWxlbWVudCBwcm9wZXJ0aWVzIHRvIGJlIGFwcGxpZWQuXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gW2F0dHJpYnV0ZXM9e31dXG4gICAqICAgICAgICAgRWxlbWVudCBhdHRyaWJ1dGVzIHRvIGJlIGFwcGxpZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7bW9kdWxlOmRvbX5Db250ZW50RGVzY3JpcHRvcn0gY29udGVudFxuICAgKiAgICAgICAgQSBjb250ZW50IGRlc2NyaXB0b3Igb2JqZWN0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gY3JlYXRlRWwodGFnTmFtZSwgcHJvcGVydGllcywgYXR0cmlidXRlcywgY29udGVudCkge1xuICAgIGlmICh0YWdOYW1lID09PSB2b2lkIDApIHtcbiAgICAgIHRhZ05hbWUgPSAnZGl2JztcbiAgICB9XG5cbiAgICBpZiAocHJvcGVydGllcyA9PT0gdm9pZCAwKSB7XG4gICAgICBwcm9wZXJ0aWVzID0ge307XG4gICAgfVxuXG4gICAgaWYgKGF0dHJpYnV0ZXMgPT09IHZvaWQgMCkge1xuICAgICAgYXR0cmlidXRlcyA9IHt9O1xuICAgIH1cblxuICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG4gICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocHJvcGVydGllcykuZm9yRWFjaChmdW5jdGlvbiAocHJvcE5hbWUpIHtcbiAgICAgIHZhciB2YWwgPSBwcm9wZXJ0aWVzW3Byb3BOYW1lXTsgLy8gU2VlICMyMTc2XG4gICAgICAvLyBXZSBvcmlnaW5hbGx5IHdlcmUgYWNjZXB0aW5nIGJvdGggcHJvcGVydGllcyBhbmQgYXR0cmlidXRlcyBpbiB0aGVcbiAgICAgIC8vIHNhbWUgb2JqZWN0LCBidXQgdGhhdCBkb2Vzbid0IHdvcmsgc28gd2VsbC5cblxuICAgICAgaWYgKHByb3BOYW1lLmluZGV4T2YoJ2FyaWEtJykgIT09IC0xIHx8IHByb3BOYW1lID09PSAncm9sZScgfHwgcHJvcE5hbWUgPT09ICd0eXBlJykge1xuICAgICAgICBsb2cud2Fybih0c21sKF90ZW1wbGF0ZU9iamVjdCgpLCBwcm9wTmFtZSwgdmFsKSk7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShwcm9wTmFtZSwgdmFsKTsgLy8gSGFuZGxlIHRleHRDb250ZW50IHNpbmNlIGl0J3Mgbm90IHN1cHBvcnRlZCBldmVyeXdoZXJlIGFuZCB3ZSBoYXZlIGFcbiAgICAgICAgLy8gbWV0aG9kIGZvciBpdC5cbiAgICAgIH0gZWxzZSBpZiAocHJvcE5hbWUgPT09ICd0ZXh0Q29udGVudCcpIHtcbiAgICAgICAgdGV4dENvbnRlbnQoZWwsIHZhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbFtwcm9wTmFtZV0gPSB2YWw7XG4gICAgICB9XG4gICAgfSk7XG4gICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoYXR0ck5hbWUpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgYXR0cmlidXRlc1thdHRyTmFtZV0pO1xuICAgIH0pO1xuXG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIGFwcGVuZENvbnRlbnQoZWwsIGNvbnRlbnQpO1xuICAgIH1cblxuICAgIHJldHVybiBlbDtcbiAgfVxuICAvKipcbiAgICogSW5qZWN0cyB0ZXh0IGludG8gYW4gZWxlbWVudCwgcmVwbGFjaW5nIGFueSBleGlzdGluZyBjb250ZW50cyBlbnRpcmVseS5cbiAgICpcbiAgICogQHBhcmFtICB7RWxlbWVudH0gZWxcbiAgICogICAgICAgICBUaGUgZWxlbWVudCB0byBhZGQgdGV4dCBjb250ZW50IGludG9cbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSB0ZXh0XG4gICAqICAgICAgICAgVGhlIHRleHQgY29udGVudCB0byBhZGQuXG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgd2l0aCBhZGRlZCB0ZXh0IGNvbnRlbnQuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHRleHRDb250ZW50KGVsLCB0ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBlbC50ZXh0Q29udGVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGVsLmlubmVyVGV4dCA9IHRleHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICB9XG5cbiAgICByZXR1cm4gZWw7XG4gIH1cbiAgLyoqXG4gICAqIEluc2VydCBhbiBlbGVtZW50IGFzIHRoZSBmaXJzdCBjaGlsZCBub2RlIG9mIGFub3RoZXJcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBjaGlsZFxuICAgKiAgICAgICAgRWxlbWVudCB0byBpbnNlcnRcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBwYXJlbnRcbiAgICogICAgICAgIEVsZW1lbnQgdG8gaW5zZXJ0IGNoaWxkIGludG9cbiAgICovXG5cbiAgZnVuY3Rpb24gcHJlcGVuZFRvKGNoaWxkLCBwYXJlbnQpIHtcbiAgICBpZiAocGFyZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIHBhcmVudC5maXJzdENoaWxkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaGFzIGEgY2xhc3MgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtICB7RWxlbWVudH0gZWxlbWVudFxuICAgKiAgICAgICAgIEVsZW1lbnQgdG8gY2hlY2tcbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSBjbGFzc1RvQ2hlY2tcbiAgICogICAgICAgICBDbGFzcyBuYW1lIHRvIGNoZWNrIGZvclxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIFdpbGwgYmUgYHRydWVgIGlmIHRoZSBlbGVtZW50IGhhcyBhIGNsYXNzLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICpcbiAgICogQHRocm93cyB7RXJyb3J9XG4gICAqICAgICAgICAgVGhyb3dzIGFuIGVycm9yIGlmIGBjbGFzc1RvQ2hlY2tgIGhhcyB3aGl0ZSBzcGFjZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gaGFzQ2xhc3MoZWxlbWVudCwgY2xhc3NUb0NoZWNrKSB7XG4gICAgdGhyb3dJZldoaXRlc3BhY2UoY2xhc3NUb0NoZWNrKTtcblxuICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCkge1xuICAgICAgcmV0dXJuIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzVG9DaGVjayk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsYXNzUmVnRXhwKGNsYXNzVG9DaGVjaykudGVzdChlbGVtZW50LmNsYXNzTmFtZSk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIGNsYXNzIG5hbWUgdG8gYW4gZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtICB7RWxlbWVudH0gZWxlbWVudFxuICAgKiAgICAgICAgIEVsZW1lbnQgdG8gYWRkIGNsYXNzIG5hbWUgdG8uXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gY2xhc3NUb0FkZFxuICAgKiAgICAgICAgIENsYXNzIG5hbWUgdG8gYWRkLlxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKiAgICAgICAgIFRoZSBET00gZWxlbWVudCB3aXRoIHRoZSBhZGRlZCBjbGFzcyBuYW1lLlxuICAgKi9cblxuICBmdW5jdGlvbiBhZGRDbGFzcyhlbGVtZW50LCBjbGFzc1RvQWRkKSB7XG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NUb0FkZCk7IC8vIERvbid0IG5lZWQgdG8gYHRocm93SWZXaGl0ZXNwYWNlYCBoZXJlIGJlY2F1c2UgYGhhc0VsQ2xhc3NgIHdpbGwgZG8gaXRcbiAgICAgIC8vIGluIHRoZSBjYXNlIG9mIGNsYXNzTGlzdCBub3QgYmVpbmcgc3VwcG9ydGVkLlxuICAgIH0gZWxzZSBpZiAoIWhhc0NsYXNzKGVsZW1lbnQsIGNsYXNzVG9BZGQpKSB7XG4gICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IChlbGVtZW50LmNsYXNzTmFtZSArICcgJyArIGNsYXNzVG9BZGQpLnRyaW0oKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIGEgY2xhc3MgbmFtZSBmcm9tIGFuIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSAge0VsZW1lbnR9IGVsZW1lbnRcbiAgICogICAgICAgICBFbGVtZW50IHRvIHJlbW92ZSBhIGNsYXNzIG5hbWUgZnJvbS5cbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSBjbGFzc1RvUmVtb3ZlXG4gICAqICAgICAgICAgQ2xhc3MgbmFtZSB0byByZW1vdmVcbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICBUaGUgRE9NIGVsZW1lbnQgd2l0aCBjbGFzcyBuYW1lIHJlbW92ZWQuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsZW1lbnQsIGNsYXNzVG9SZW1vdmUpIHtcbiAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc1RvUmVtb3ZlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3dJZldoaXRlc3BhY2UoY2xhc3NUb1JlbW92ZSk7XG4gICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lLnNwbGl0KC9cXHMrLykuZmlsdGVyKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIHJldHVybiBjICE9PSBjbGFzc1RvUmVtb3ZlO1xuICAgICAgfSkuam9pbignICcpO1xuICAgIH1cblxuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG4gIC8qKlxuICAgKiBUaGUgY2FsbGJhY2sgZGVmaW5pdGlvbiBmb3IgdG9nZ2xlQ2xhc3MuXG4gICAqXG4gICAqIEBjYWxsYmFjayBtb2R1bGU6ZG9tflByZWRpY2F0ZUNhbGxiYWNrXG4gICAqIEBwYXJhbSAgICB7RWxlbWVudH0gZWxlbWVudFxuICAgKiAgICAgICAgICAgVGhlIERPTSBlbGVtZW50IG9mIHRoZSBDb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSAgICB7c3RyaW5nfSBjbGFzc1RvVG9nZ2xlXG4gICAqICAgICAgICAgICBUaGUgYGNsYXNzTmFtZWAgdGhhdCB3YW50cyB0byBiZSB0b2dnbGVkXG4gICAqXG4gICAqIEByZXR1cm4gICB7Ym9vbGVhbnx1bmRlZmluZWR9XG4gICAqICAgICAgICAgICBJZiBgdHJ1ZWAgaXMgcmV0dXJuZWQsIHRoZSBgY2xhc3NUb1RvZ2dsZWAgd2lsbCBiZSBhZGRlZCB0byB0aGVcbiAgICogICAgICAgICAgIGBlbGVtZW50YC4gSWYgYGZhbHNlYCwgdGhlIGBjbGFzc1RvVG9nZ2xlYCB3aWxsIGJlIHJlbW92ZWQgZnJvbVxuICAgKiAgICAgICAgICAgdGhlIGBlbGVtZW50YC4gSWYgYHVuZGVmaW5lZGAsIHRoZSBjYWxsYmFjayB3aWxsIGJlIGlnbm9yZWQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBZGRzIG9yIHJlbW92ZXMgYSBjbGFzcyBuYW1lIHRvL2Zyb20gYW4gZWxlbWVudCBkZXBlbmRpbmcgb24gYW4gb3B0aW9uYWxcbiAgICogY29uZGl0aW9uIG9yIHRoZSBwcmVzZW5jZS9hYnNlbmNlIG9mIHRoZSBjbGFzcyBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0gIHtFbGVtZW50fSBlbGVtZW50XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgdG8gdG9nZ2xlIGEgY2xhc3MgbmFtZSBvbi5cbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSBjbGFzc1RvVG9nZ2xlXG4gICAqICAgICAgICAgVGhlIGNsYXNzIHRoYXQgc2hvdWxkIGJlIHRvZ2dsZWQuXG4gICAqXG4gICAqIEBwYXJhbSAge2Jvb2xlYW58bW9kdWxlOmRvbX5QcmVkaWNhdGVDYWxsYmFja30gW3ByZWRpY2F0ZV1cbiAgICogICAgICAgICBTZWUgdGhlIHJldHVybiB2YWx1ZSBmb3Ige0BsaW5rIG1vZHVsZTpkb21+UHJlZGljYXRlQ2FsbGJhY2t9XG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgd2l0aCBhIGNsYXNzIHRoYXQgaGFzIGJlZW4gdG9nZ2xlZC5cbiAgICovXG5cbiAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxlbWVudCwgY2xhc3NUb1RvZ2dsZSwgcHJlZGljYXRlKSB7XG4gICAgLy8gVGhpcyBDQU5OT1QgdXNlIGBjbGFzc0xpc3RgIGludGVybmFsbHkgYmVjYXVzZSBJRTExIGRvZXMgbm90IHN1cHBvcnQgdGhlXG4gICAgLy8gc2Vjb25kIHBhcmFtZXRlciB0byB0aGUgYGNsYXNzTGlzdC50b2dnbGUoKWAgbWV0aG9kISBXaGljaCBpcyBmaW5lIGJlY2F1c2VcbiAgICAvLyBgY2xhc3NMaXN0YCB3aWxsIGJlIHVzZWQgYnkgdGhlIGFkZC9yZW1vdmUgZnVuY3Rpb25zLlxuICAgIHZhciBoYXMgPSBoYXNDbGFzcyhlbGVtZW50LCBjbGFzc1RvVG9nZ2xlKTtcblxuICAgIGlmICh0eXBlb2YgcHJlZGljYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwcmVkaWNhdGUgPSBwcmVkaWNhdGUoZWxlbWVudCwgY2xhc3NUb1RvZ2dsZSk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBwcmVkaWNhdGUgIT09ICdib29sZWFuJykge1xuICAgICAgcHJlZGljYXRlID0gIWhhcztcbiAgICB9IC8vIElmIHRoZSBuZWNlc3NhcnkgY2xhc3Mgb3BlcmF0aW9uIG1hdGNoZXMgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlXG4gICAgLy8gZWxlbWVudCwgbm8gYWN0aW9uIGlzIHJlcXVpcmVkLlxuXG5cbiAgICBpZiAocHJlZGljYXRlID09PSBoYXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAocHJlZGljYXRlKSB7XG4gICAgICBhZGRDbGFzcyhlbGVtZW50LCBjbGFzc1RvVG9nZ2xlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlQ2xhc3MoZWxlbWVudCwgY2xhc3NUb1RvZ2dsZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cbiAgLyoqXG4gICAqIEFwcGx5IGF0dHJpYnV0ZXMgdG8gYW4gSFRNTCBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqICAgICAgICBFbGVtZW50IHRvIGFkZCBhdHRyaWJ1dGVzIHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW2F0dHJpYnV0ZXNdXG4gICAqICAgICAgICBBdHRyaWJ1dGVzIHRvIGJlIGFwcGxpZWQuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHNldEF0dHJpYnV0ZXMoZWwsIGF0dHJpYnV0ZXMpIHtcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyTmFtZSkge1xuICAgICAgdmFyIGF0dHJWYWx1ZSA9IGF0dHJpYnV0ZXNbYXR0ck5hbWVdO1xuXG4gICAgICBpZiAoYXR0clZhbHVlID09PSBudWxsIHx8IHR5cGVvZiBhdHRyVmFsdWUgPT09ICd1bmRlZmluZWQnIHx8IGF0dHJWYWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHJOYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgYXR0clZhbHVlID09PSB0cnVlID8gJycgOiBhdHRyVmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYW4gZWxlbWVudCdzIGF0dHJpYnV0ZSB2YWx1ZXMsIGFzIGRlZmluZWQgb24gdGhlIEhUTUwgdGFnLlxuICAgKlxuICAgKiBBdHRyaWJ1dGVzIGFyZSBub3QgdGhlIHNhbWUgYXMgcHJvcGVydGllcy4gVGhleSdyZSBkZWZpbmVkIG9uIHRoZSB0YWdcbiAgICogb3Igd2l0aCBzZXRBdHRyaWJ1dGUuXG4gICAqXG4gICAqIEBwYXJhbSAge0VsZW1lbnR9IHRhZ1xuICAgKiAgICAgICAgIEVsZW1lbnQgZnJvbSB3aGljaCB0byBnZXQgdGFnIGF0dHJpYnV0ZXMuXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICogICAgICAgICBBbGwgYXR0cmlidXRlcyBvZiB0aGUgZWxlbWVudC4gQm9vbGVhbiBhdHRyaWJ1dGVzIHdpbGwgYmUgYHRydWVgIG9yXG4gICAqICAgICAgICAgYGZhbHNlYCwgb3RoZXJzIHdpbGwgYmUgc3RyaW5ncy5cbiAgICovXG5cbiAgZnVuY3Rpb24gZ2V0QXR0cmlidXRlcyh0YWcpIHtcbiAgICB2YXIgb2JqID0ge307IC8vIGtub3duIGJvb2xlYW4gYXR0cmlidXRlc1xuICAgIC8vIHdlIGNhbiBjaGVjayBmb3IgbWF0Y2hpbmcgYm9vbGVhbiBwcm9wZXJ0aWVzLCBidXQgbm90IGFsbCBicm93c2Vyc1xuICAgIC8vIGFuZCBub3QgYWxsIHRhZ3Mga25vdyBhYm91dCB0aGVzZSBhdHRyaWJ1dGVzLCBzbywgd2Ugc3RpbGwgd2FudCB0byBjaGVjayB0aGVtIG1hbnVhbGx5XG5cbiAgICB2YXIga25vd25Cb29sZWFucyA9ICcsJyArICdhdXRvcGxheSxjb250cm9scyxwbGF5c2lubGluZSxsb29wLG11dGVkLGRlZmF1bHQsZGVmYXVsdE11dGVkJyArICcsJztcblxuICAgIGlmICh0YWcgJiYgdGFnLmF0dHJpYnV0ZXMgJiYgdGFnLmF0dHJpYnV0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgdmFyIGF0dHJzID0gdGFnLmF0dHJpYnV0ZXM7XG5cbiAgICAgIGZvciAodmFyIGkgPSBhdHRycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB2YXIgYXR0ck5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuICAgICAgICB2YXIgYXR0clZhbCA9IGF0dHJzW2ldLnZhbHVlOyAvLyBjaGVjayBmb3Iga25vd24gYm9vbGVhbnNcbiAgICAgICAgLy8gdGhlIG1hdGNoaW5nIGVsZW1lbnQgcHJvcGVydHkgd2lsbCByZXR1cm4gYSB2YWx1ZSBmb3IgdHlwZW9mXG5cbiAgICAgICAgaWYgKHR5cGVvZiB0YWdbYXR0ck5hbWVdID09PSAnYm9vbGVhbicgfHwga25vd25Cb29sZWFucy5pbmRleE9mKCcsJyArIGF0dHJOYW1lICsgJywnKSAhPT0gLTEpIHtcbiAgICAgICAgICAvLyB0aGUgdmFsdWUgb2YgYW4gaW5jbHVkZWQgYm9vbGVhbiBhdHRyaWJ1dGUgaXMgdHlwaWNhbGx5IGFuIGVtcHR5XG4gICAgICAgICAgLy8gc3RyaW5nICgnJykgd2hpY2ggd291bGQgZXF1YWwgZmFsc2UgaWYgd2UganVzdCBjaGVjayBmb3IgYSBmYWxzZSB2YWx1ZS5cbiAgICAgICAgICAvLyB3ZSBhbHNvIGRvbid0IHdhbnQgc3VwcG9ydCBiYWQgY29kZSBsaWtlIGF1dG9wbGF5PSdmYWxzZSdcbiAgICAgICAgICBhdHRyVmFsID0gYXR0clZhbCAhPT0gbnVsbCA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9ialthdHRyTmFtZV0gPSBhdHRyVmFsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb2YgYW4gZWxlbWVudCdzIGF0dHJpYnV0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiAgICAgICAgQSBET00gZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZVxuICAgKiAgICAgICAgQXR0cmlidXRlIHRvIGdldCB0aGUgdmFsdWUgb2YuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBUaGUgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gZ2V0QXR0cmlidXRlKGVsLCBhdHRyaWJ1dGUpIHtcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgdmFsdWUgb2YgYW4gZWxlbWVudCdzIGF0dHJpYnV0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiAgICAgICAgQSBET00gZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZVxuICAgKiAgICAgICAgQXR0cmlidXRlIHRvIHNldC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqICAgICAgICBWYWx1ZSB0byBzZXQgdGhlIGF0dHJpYnV0ZSB0by5cbiAgICovXG5cbiAgZnVuY3Rpb24gc2V0QXR0cmlidXRlKGVsLCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgZWwuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgdmFsdWUpO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gZWxlbWVudCdzIGF0dHJpYnV0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiAgICAgICAgQSBET00gZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZVxuICAgKiAgICAgICAgQXR0cmlidXRlIHRvIHJlbW92ZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVtb3ZlQXR0cmlidXRlKGVsLCBhdHRyaWJ1dGUpIHtcbiAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgfVxuICAvKipcbiAgICogQXR0ZW1wdCB0byBibG9jayB0aGUgYWJpbGl0eSB0byBzZWxlY3QgdGV4dC5cbiAgICovXG5cbiAgZnVuY3Rpb24gYmxvY2tUZXh0U2VsZWN0aW9uKCkge1xuICAgIGRvY3VtZW50LmJvZHkuZm9jdXMoKTtcblxuICAgIGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogVHVybiBvZmYgdGV4dCBzZWxlY3Rpb24gYmxvY2tpbmcuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHVuYmxvY2tUZXh0U2VsZWN0aW9uKCkge1xuICAgIGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBJZGVudGljYWwgdG8gdGhlIG5hdGl2ZSBgZ2V0Qm91bmRpbmdDbGllbnRSZWN0YCBmdW5jdGlvbiwgYnV0IGVuc3VyZXMgdGhhdFxuICAgKiB0aGUgbWV0aG9kIGlzIHN1cHBvcnRlZCBhdCBhbGwgKGl0IGlzIGluIGFsbCBicm93c2VycyB3ZSBjbGFpbSB0byBzdXBwb3J0KVxuICAgKiBhbmQgdGhhdCB0aGUgZWxlbWVudCBpcyBpbiB0aGUgRE9NIGJlZm9yZSBjb250aW51aW5nLlxuICAgKlxuICAgKiBUaGlzIHdyYXBwZXIgZnVuY3Rpb24gYWxzbyBzaGltcyBwcm9wZXJ0aWVzIHdoaWNoIGFyZSBub3QgcHJvdmlkZWQgYnkgc29tZVxuICAgKiBvbGRlciBicm93c2VycyAobmFtZWx5LCBJRTgpLlxuICAgKlxuICAgKiBBZGRpdGlvbmFsbHksIHNvbWUgYnJvd3NlcnMgZG8gbm90IHN1cHBvcnQgYWRkaW5nIHByb3BlcnRpZXMgdG8gYVxuICAgKiBgQ2xpZW50UmVjdGAvYERPTVJlY3RgIG9iamVjdDsgc28sIHdlIHNoYWxsb3ctY29weSBpdCB3aXRoIHRoZSBzdGFuZGFyZFxuICAgKiBwcm9wZXJ0aWVzIChleGNlcHQgYHhgIGFuZCBgeWAgd2hpY2ggYXJlIG5vdCB3aWRlbHkgc3VwcG9ydGVkKS4gVGhpcyBoZWxwc1xuICAgKiBhdm9pZCBpbXBsZW1lbnRhdGlvbnMgd2hlcmUga2V5cyBhcmUgbm9uLWVudW1lcmFibGUuXG4gICAqXG4gICAqIEBwYXJhbSAge0VsZW1lbnR9IGVsXG4gICAqICAgICAgICAgRWxlbWVudCB3aG9zZSBgQ2xpZW50UmVjdGAgd2Ugd2FudCB0byBjYWxjdWxhdGUuXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG4gICAqICAgICAgICAgQWx3YXlzIHJldHVybnMgYSBwbGFpbiBvYmplY3QgLSBvciBgdW5kZWZpbmVkYCBpZiBpdCBjYW5ub3QuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGdldEJvdW5kaW5nQ2xpZW50UmVjdChlbCkge1xuICAgIGlmIChlbCAmJiBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QgJiYgZWwucGFyZW50Tm9kZSkge1xuICAgICAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgIFsnYm90dG9tJywgJ2hlaWdodCcsICdsZWZ0JywgJ3JpZ2h0JywgJ3RvcCcsICd3aWR0aCddLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgaWYgKHJlY3Rba10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJlc3VsdFtrXSA9IHJlY3Rba107XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3VsdC5oZWlnaHQpIHtcbiAgICAgICAgcmVzdWx0LmhlaWdodCA9IHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZShlbCwgJ2hlaWdodCcpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXN1bHQud2lkdGgpIHtcbiAgICAgICAgcmVzdWx0LndpZHRoID0gcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlKGVsLCAnd2lkdGgnKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIHRoZSBwb3NpdGlvbiBvZiBhIERPTSBlbGVtZW50IG9uIHRoZSBwYWdlLlxuICAgKlxuICAgKiBAdHlwZWRlZiAge09iamVjdH0gbW9kdWxlOmRvbX5Qb3NpdGlvblxuICAgKlxuICAgKiBAcHJvcGVydHkge251bWJlcn0gbGVmdFxuICAgKiAgICAgICAgICAgUGl4ZWxzIHRvIHRoZSBsZWZ0LlxuICAgKlxuICAgKiBAcHJvcGVydHkge251bWJlcn0gdG9wXG4gICAqICAgICAgICAgICBQaXhlbHMgZnJvbSB0aGUgdG9wLlxuICAgKi9cblxuICAvKipcbiAgICogR2V0IHRoZSBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IGluIHRoZSBET00uXG4gICAqXG4gICAqIFVzZXMgYGdldEJvdW5kaW5nQ2xpZW50UmVjdGAgdGVjaG5pcXVlIGZyb20gSm9obiBSZXNpZy5cbiAgICpcbiAgICogQHNlZSBodHRwOi8vZWpvaG4ub3JnL2Jsb2cvZ2V0Ym91bmRpbmdjbGllbnRyZWN0LWlzLWF3ZXNvbWUvXG4gICAqXG4gICAqIEBwYXJhbSAge0VsZW1lbnR9IGVsXG4gICAqICAgICAgICAgRWxlbWVudCBmcm9tIHdoaWNoIHRvIGdldCBvZmZzZXQuXG4gICAqXG4gICAqIEByZXR1cm4ge21vZHVsZTpkb21+UG9zaXRpb259XG4gICAqICAgICAgICAgVGhlIHBvc2l0aW9uIG9mIHRoZSBlbGVtZW50IHRoYXQgd2FzIHBhc3NlZCBpbi5cbiAgICovXG5cbiAgZnVuY3Rpb24gZmluZFBvc2l0aW9uKGVsKSB7XG4gICAgdmFyIGJveDtcblxuICAgIGlmIChlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QgJiYgZWwucGFyZW50Tm9kZSkge1xuICAgICAgYm94ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgfVxuXG4gICAgaWYgKCFib3gpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIHRvcDogMFxuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgZG9jRWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICAgIHZhciBjbGllbnRMZWZ0ID0gZG9jRWwuY2xpZW50TGVmdCB8fCBib2R5LmNsaWVudExlZnQgfHwgMDtcbiAgICB2YXIgc2Nyb2xsTGVmdCA9IHdpbmRvdyQxLnBhZ2VYT2Zmc2V0IHx8IGJvZHkuc2Nyb2xsTGVmdDtcbiAgICB2YXIgbGVmdCA9IGJveC5sZWZ0ICsgc2Nyb2xsTGVmdCAtIGNsaWVudExlZnQ7XG4gICAgdmFyIGNsaWVudFRvcCA9IGRvY0VsLmNsaWVudFRvcCB8fCBib2R5LmNsaWVudFRvcCB8fCAwO1xuICAgIHZhciBzY3JvbGxUb3AgPSB3aW5kb3ckMS5wYWdlWU9mZnNldCB8fCBib2R5LnNjcm9sbFRvcDtcbiAgICB2YXIgdG9wID0gYm94LnRvcCArIHNjcm9sbFRvcCAtIGNsaWVudFRvcDsgLy8gQW5kcm9pZCBzb21ldGltZXMgcmV0dXJucyBzbGlnaHRseSBvZmYgZGVjaW1hbCB2YWx1ZXMsIHNvIG5lZWQgdG8gcm91bmRcblxuICAgIHJldHVybiB7XG4gICAgICBsZWZ0OiBNYXRoLnJvdW5kKGxlZnQpLFxuICAgICAgdG9wOiBNYXRoLnJvdW5kKHRvcClcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIHggYW5kIHkgY29vcmRpbmF0ZXMgZm9yIGEgRE9NIGVsZW1lbnQgb3IgbW91c2UgcG9pbnRlci5cbiAgICpcbiAgICogQHR5cGVkZWYgIHtPYmplY3R9IG1vZHVsZTpkb21+Q29vcmRpbmF0ZXNcbiAgICpcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHhcbiAgICogICAgICAgICAgIHggY29vcmRpbmF0ZSBpbiBwaXhlbHNcbiAgICpcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHlcbiAgICogICAgICAgICAgIHkgY29vcmRpbmF0ZSBpbiBwaXhlbHNcbiAgICovXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcG9pbnRlciBwb3NpdGlvbiB3aXRoaW4gYW4gZWxlbWVudC5cbiAgICpcbiAgICogVGhlIGJhc2Ugb24gdGhlIGNvb3JkaW5hdGVzIGFyZSB0aGUgYm90dG9tIGxlZnQgb2YgdGhlIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSAge0VsZW1lbnR9IGVsXG4gICAqICAgICAgICAgRWxlbWVudCBvbiB3aGljaCB0byBnZXQgdGhlIHBvaW50ZXIgcG9zaXRpb24gb24uXG4gICAqXG4gICAqIEBwYXJhbSAge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKiAgICAgICAgIEV2ZW50IG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybiB7bW9kdWxlOmRvbX5Db29yZGluYXRlc31cbiAgICogICAgICAgICBBIGNvb3JkaW5hdGVzIG9iamVjdCBjb3JyZXNwb25kaW5nIHRvIHRoZSBtb3VzZSBwb3NpdGlvbi5cbiAgICpcbiAgICovXG5cbiAgZnVuY3Rpb24gZ2V0UG9pbnRlclBvc2l0aW9uKGVsLCBldmVudCkge1xuICAgIHZhciBwb3NpdGlvbiA9IHt9O1xuICAgIHZhciBib3ggPSBmaW5kUG9zaXRpb24oZWwpO1xuICAgIHZhciBib3hXID0gZWwub2Zmc2V0V2lkdGg7XG4gICAgdmFyIGJveEggPSBlbC5vZmZzZXRIZWlnaHQ7XG4gICAgdmFyIGJveFkgPSBib3gudG9wO1xuICAgIHZhciBib3hYID0gYm94LmxlZnQ7XG4gICAgdmFyIHBhZ2VZID0gZXZlbnQucGFnZVk7XG4gICAgdmFyIHBhZ2VYID0gZXZlbnQucGFnZVg7XG5cbiAgICBpZiAoZXZlbnQuY2hhbmdlZFRvdWNoZXMpIHtcbiAgICAgIHBhZ2VYID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICBwYWdlWSA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZO1xuICAgIH1cblxuICAgIHBvc2l0aW9uLnkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCAoYm94WSAtIHBhZ2VZICsgYm94SCkgLyBib3hIKSk7XG4gICAgcG9zaXRpb24ueCA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIChwYWdlWCAtIGJveFgpIC8gYm94VykpO1xuICAgIHJldHVybiBwb3NpdGlvbjtcbiAgfVxuICAvKipcbiAgICogRGV0ZXJtaW5lcywgdmlhIGR1Y2sgdHlwaW5nLCB3aGV0aGVyIG9yIG5vdCBhIHZhbHVlIGlzIGEgdGV4dCBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0gIHtNaXhlZH0gdmFsdWVcbiAgICogICAgICAgICBDaGVjayBpZiB0aGlzIHZhbHVlIGlzIGEgdGV4dCBub2RlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIFdpbGwgYmUgYHRydWVgIGlmIHRoZSB2YWx1ZSBpcyBhIHRleHQgbm9kZSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGlzVGV4dE5vZGUodmFsdWUpIHtcbiAgICByZXR1cm4gaXNPYmplY3QodmFsdWUpICYmIHZhbHVlLm5vZGVUeXBlID09PSAzO1xuICB9XG4gIC8qKlxuICAgKiBFbXB0aWVzIHRoZSBjb250ZW50cyBvZiBhbiBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0gIHtFbGVtZW50fSBlbFxuICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRvIGVtcHR5IGNoaWxkcmVuIGZyb21cbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICBUaGUgZWxlbWVudCB3aXRoIG5vIGNoaWxkcmVuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGVtcHR5RWwoZWwpIHtcbiAgICB3aGlsZSAoZWwuZmlyc3RDaGlsZCkge1xuICAgICAgZWwucmVtb3ZlQ2hpbGQoZWwuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVsO1xuICB9XG4gIC8qKlxuICAgKiBUaGlzIGlzIGEgbWl4ZWQgdmFsdWUgdGhhdCBkZXNjcmliZXMgY29udGVudCB0byBiZSBpbmplY3RlZCBpbnRvIHRoZSBET01cbiAgICogdmlhIHNvbWUgbWV0aG9kLiBJdCBjYW4gYmUgb2YgdGhlIGZvbGxvd2luZyB0eXBlczpcbiAgICpcbiAgICogVHlwZSAgICAgICB8IERlc2NyaXB0aW9uXG4gICAqIC0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS1cbiAgICogYHN0cmluZ2AgICB8IFRoZSB2YWx1ZSB3aWxsIGJlIG5vcm1hbGl6ZWQgaW50byBhIHRleHQgbm9kZS5cbiAgICogYEVsZW1lbnRgICB8IFRoZSB2YWx1ZSB3aWxsIGJlIGFjY2VwdGVkIGFzLWlzLlxuICAgKiBgVGV4dE5vZGVgIHwgVGhlIHZhbHVlIHdpbGwgYmUgYWNjZXB0ZWQgYXMtaXMuXG4gICAqIGBBcnJheWAgICAgfCBBIG9uZS1kaW1lbnNpb25hbCBhcnJheSBvZiBzdHJpbmdzLCBlbGVtZW50cywgdGV4dCBub2Rlcywgb3IgZnVuY3Rpb25zLiBUaGVzZSBmdW5jdGlvbnMgc2hvdWxkIHJldHVybiBhIHN0cmluZywgZWxlbWVudCwgb3IgdGV4dCBub2RlIChhbnkgb3RoZXIgcmV0dXJuIHZhbHVlLCBsaWtlIGFuIGFycmF5LCB3aWxsIGJlIGlnbm9yZWQpLlxuICAgKiBgRnVuY3Rpb25gIHwgQSBmdW5jdGlvbiwgd2hpY2ggaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIGEgc3RyaW5nLCBlbGVtZW50LCB0ZXh0IG5vZGUsIG9yIGFycmF5IC0gYW55IG9mIHRoZSBvdGhlciBwb3NzaWJsZSB2YWx1ZXMgZGVzY3JpYmVkIGFib3ZlLiBUaGlzIG1lYW5zIHRoYXQgYSBjb250ZW50IGRlc2NyaXB0b3IgY291bGQgYmUgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gYXJyYXkgb2YgZnVuY3Rpb25zLCBidXQgdGhvc2Ugc2Vjb25kLWxldmVsIGZ1bmN0aW9ucyBtdXN0IHJldHVybiBzdHJpbmdzLCBlbGVtZW50cywgb3IgdGV4dCBub2Rlcy5cbiAgICpcbiAgICogQHR5cGVkZWYge3N0cmluZ3xFbGVtZW50fFRleHROb2RlfEFycmF5fEZ1bmN0aW9ufSBtb2R1bGU6ZG9tfkNvbnRlbnREZXNjcmlwdG9yXG4gICAqL1xuXG4gIC8qKlxuICAgKiBOb3JtYWxpemVzIGNvbnRlbnQgZm9yIGV2ZW50dWFsIGluc2VydGlvbiBpbnRvIHRoZSBET00uXG4gICAqXG4gICAqIFRoaXMgYWxsb3dzIGEgd2lkZSByYW5nZSBvZiBjb250ZW50IGRlZmluaXRpb24gbWV0aG9kcywgYnV0IGhlbHBzIHByb3RlY3RcbiAgICogZnJvbSBmYWxsaW5nIGludG8gdGhlIHRyYXAgb2Ygc2ltcGx5IHdyaXRpbmcgdG8gYGlubmVySFRNTGAsIHdoaWNoIGNvdWxkXG4gICAqIGJlIGFuIFhTUyBjb25jZXJuLlxuICAgKlxuICAgKiBUaGUgY29udGVudCBmb3IgYW4gZWxlbWVudCBjYW4gYmUgcGFzc2VkIGluIG11bHRpcGxlIHR5cGVzIGFuZFxuICAgKiBjb21iaW5hdGlvbnMsIHdob3NlIGJlaGF2aW9yIGlzIGFzIGZvbGxvd3M6XG4gICAqXG4gICAqIEBwYXJhbSB7bW9kdWxlOmRvbX5Db250ZW50RGVzY3JpcHRvcn0gY29udGVudFxuICAgKiAgICAgICAgQSBjb250ZW50IGRlc2NyaXB0b3IgdmFsdWUuXG4gICAqXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKiAgICAgICAgIEFsbCBvZiB0aGUgY29udGVudCB0aGF0IHdhcyBwYXNzZWQgaW4sIG5vcm1hbGl6ZWQgdG8gYW4gYXJyYXkgb2ZcbiAgICogICAgICAgICBlbGVtZW50cyBvciB0ZXh0IG5vZGVzLlxuICAgKi9cblxuICBmdW5jdGlvbiBub3JtYWxpemVDb250ZW50KGNvbnRlbnQpIHtcbiAgICAvLyBGaXJzdCwgaW52b2tlIGNvbnRlbnQgaWYgaXQgaXMgYSBmdW5jdGlvbi4gSWYgaXQgcHJvZHVjZXMgYW4gYXJyYXksXG4gICAgLy8gdGhhdCBuZWVkcyB0byBoYXBwZW4gYmVmb3JlIG5vcm1hbGl6YXRpb24uXG4gICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb250ZW50ID0gY29udGVudCgpO1xuICAgIH0gLy8gTmV4dCB1cCwgbm9ybWFsaXplIHRvIGFuIGFycmF5LCBzbyBvbmUgb3IgbWFueSBpdGVtcyBjYW4gYmUgbm9ybWFsaXplZCxcbiAgICAvLyBmaWx0ZXJlZCwgYW5kIHJldHVybmVkLlxuXG5cbiAgICByZXR1cm4gKEFycmF5LmlzQXJyYXkoY29udGVudCkgPyBjb250ZW50IDogW2NvbnRlbnRdKS5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBGaXJzdCwgaW52b2tlIHZhbHVlIGlmIGl0IGlzIGEgZnVuY3Rpb24gdG8gcHJvZHVjZSBhIG5ldyB2YWx1ZSxcbiAgICAgIC8vIHdoaWNoIHdpbGwgYmUgc3Vic2VxdWVudGx5IG5vcm1hbGl6ZWQgdG8gYSBOb2RlIG9mIHNvbWUga2luZC5cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNFbCh2YWx1ZSkgfHwgaXNUZXh0Tm9kZSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiAvXFxTLy50ZXN0KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodmFsdWUpO1xuICAgICAgfVxuICAgIH0pLmZpbHRlcihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogTm9ybWFsaXplcyBhbmQgYXBwZW5kcyBjb250ZW50IHRvIGFuIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSAge0VsZW1lbnR9IGVsXG4gICAqICAgICAgICAgRWxlbWVudCB0byBhcHBlbmQgbm9ybWFsaXplZCBjb250ZW50IHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge21vZHVsZTpkb21+Q29udGVudERlc2NyaXB0b3J9IGNvbnRlbnRcbiAgICogICAgICAgIEEgY29udGVudCBkZXNjcmlwdG9yIHZhbHVlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHdpdGggYXBwZW5kZWQgbm9ybWFsaXplZCBjb250ZW50LlxuICAgKi9cblxuICBmdW5jdGlvbiBhcHBlbmRDb250ZW50KGVsLCBjb250ZW50KSB7XG4gICAgbm9ybWFsaXplQ29udGVudChjb250ZW50KS5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICByZXR1cm4gZWwuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGVsO1xuICB9XG4gIC8qKlxuICAgKiBOb3JtYWxpemVzIGFuZCBpbnNlcnRzIGNvbnRlbnQgaW50byBhbiBlbGVtZW50OyB0aGlzIGlzIGlkZW50aWNhbCB0b1xuICAgKiBgYXBwZW5kQ29udGVudCgpYCwgZXhjZXB0IGl0IGVtcHRpZXMgdGhlIGVsZW1lbnQgZmlyc3QuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogICAgICAgIEVsZW1lbnQgdG8gaW5zZXJ0IG5vcm1hbGl6ZWQgY29udGVudCBpbnRvLlxuICAgKlxuICAgKiBAcGFyYW0ge21vZHVsZTpkb21+Q29udGVudERlc2NyaXB0b3J9IGNvbnRlbnRcbiAgICogICAgICAgIEEgY29udGVudCBkZXNjcmlwdG9yIHZhbHVlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHdpdGggaW5zZXJ0ZWQgbm9ybWFsaXplZCBjb250ZW50LlxuICAgKi9cblxuICBmdW5jdGlvbiBpbnNlcnRDb250ZW50KGVsLCBjb250ZW50KSB7XG4gICAgcmV0dXJuIGFwcGVuZENvbnRlbnQoZW1wdHlFbChlbCksIGNvbnRlbnQpO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBldmVudCB3YXMgYSBzaW5nbGUgbGVmdCBjbGljay5cbiAgICpcbiAgICogQHBhcmFtICB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICAgRXZlbnQgb2JqZWN0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIFdpbGwgYmUgYHRydWVgIGlmIGEgc2luZ2xlIGxlZnQgY2xpY2ssIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgKi9cblxuICBmdW5jdGlvbiBpc1NpbmdsZUxlZnRDbGljayhldmVudCkge1xuICAgIC8vIE5vdGU6IGlmIHlvdSBjcmVhdGUgc29tZXRoaW5nIGRyYWdnYWJsZSwgYmUgc3VyZSB0b1xuICAgIC8vIGNhbGwgaXQgb24gYm90aCBgbW91c2Vkb3duYCBhbmQgYG1vdXNlbW92ZWAgZXZlbnQsXG4gICAgLy8gb3RoZXJ3aXNlIGBtb3VzZWRvd25gIHNob3VsZCBiZSBlbm91Z2ggZm9yIGEgYnV0dG9uXG4gICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gdW5kZWZpbmVkICYmIGV2ZW50LmJ1dHRvbnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gV2h5IGRvIHdlIG5lZWQgYGJ1dHRvbnNgID9cbiAgICAgIC8vIEJlY2F1c2UsIG1pZGRsZSBtb3VzZSBzb21ldGltZXMgaGF2ZSB0aGlzOlxuICAgICAgLy8gZS5idXR0b24gPT09IDAgYW5kIGUuYnV0dG9ucyA9PT0gNFxuICAgICAgLy8gRnVydGhlcm1vcmUsIHdlIHdhbnQgdG8gcHJldmVudCBjb21iaW5hdGlvbiBjbGljaywgc29tZXRoaW5nIGxpa2VcbiAgICAgIC8vIEhPTEQgbWlkZGxlbW91c2UgdGhlbiBsZWZ0IGNsaWNrLCB0aGF0IHdvdWxkIGJlXG4gICAgICAvLyBlLmJ1dHRvbiA9PT0gMCwgZS5idXR0b25zID09PSA1XG4gICAgICAvLyBqdXN0IGBidXR0b25gIGlzIG5vdCBnb25uYSB3b3JrXG4gICAgICAvLyBBbHJpZ2h0LCB0aGVuIHdoYXQgdGhpcyBibG9jayBkb2VzID9cbiAgICAgIC8vIHRoaXMgaXMgZm9yIGNocm9tZSBgc2ltdWxhdGUgbW9iaWxlIGRldmljZXNgXG4gICAgICAvLyBJIHdhbnQgdG8gc3VwcG9ydCB0aGlzIGFzIHdlbGxcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChldmVudC5idXR0b24gPT09IDAgJiYgZXZlbnQuYnV0dG9ucyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBUb3VjaCBzY3JlZW4sIHNvbWV0aW1lcyBvbiBzb21lIHNwZWNpZmljIGRldmljZSwgYGJ1dHRvbnNgXG4gICAgICAvLyBkb2Vzbid0IGhhdmUgYW55dGhpbmcgKHNhZmFyaSBvbiBpb3MsIGJsYWNrYmVycnkuLi4pXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuYnV0dG9uICE9PSAwIHx8IGV2ZW50LmJ1dHRvbnMgIT09IDEpIHtcbiAgICAgIC8vIFRoaXMgaXMgdGhlIHJlYXNvbiB3ZSBoYXZlIHRob3NlIGlmIGVsc2UgYmxvY2sgYWJvdmVcbiAgICAgIC8vIGlmIGFueSBzcGVjaWFsIGNhc2Ugd2UgY2FuIGNhdGNoIGFuZCBsZXQgaXQgc2xpZGVcbiAgICAgIC8vIHdlIGRvIGl0IGFib3ZlLCB3aGVuIGdldCB0byBoZXJlLCB0aGlzIGRlZmluaXRlbHlcbiAgICAgIC8vIGlzLW5vdC1sZWZ0LWNsaWNrXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIEZpbmRzIGEgc2luZ2xlIERPTSBlbGVtZW50IG1hdGNoaW5nIGBzZWxlY3RvcmAgd2l0aGluIHRoZSBvcHRpb25hbFxuICAgKiBgY29udGV4dGAgb2YgYW5vdGhlciBET00gZWxlbWVudCAoZGVmYXVsdGluZyB0byBgZG9jdW1lbnRgKS5cbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSBzZWxlY3RvclxuICAgKiAgICAgICAgIEEgdmFsaWQgQ1NTIHNlbGVjdG9yLCB3aGljaCB3aWxsIGJlIHBhc3NlZCB0byBgcXVlcnlTZWxlY3RvcmAuXG4gICAqXG4gICAqIEBwYXJhbSAge0VsZW1lbnR8U3RyaW5nfSBbY29udGV4dD1kb2N1bWVudF1cbiAgICogICAgICAgICBBIERPTSBlbGVtZW50IHdpdGhpbiB3aGljaCB0byBxdWVyeS4gQ2FuIGFsc28gYmUgYSBzZWxlY3RvclxuICAgKiAgICAgICAgIHN0cmluZyBpbiB3aGljaCBjYXNlIHRoZSBmaXJzdCBtYXRjaGluZyBlbGVtZW50IHdpbGwgYmUgdXNlZFxuICAgKiAgICAgICAgIGFzIGNvbnRleHQuIElmIG1pc3NpbmcgKG9yIG5vIGVsZW1lbnQgbWF0Y2hlcyBzZWxlY3RvciksIGZhbGxzXG4gICAqICAgICAgICAgYmFjayB0byBgZG9jdW1lbnRgLlxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fG51bGx9XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgZm91bmQgb3IgbnVsbC5cbiAgICovXG5cbiAgdmFyICQgPSBjcmVhdGVRdWVyaWVyKCdxdWVyeVNlbGVjdG9yJyk7XG4gIC8qKlxuICAgKiBGaW5kcyBhIGFsbCBET00gZWxlbWVudHMgbWF0Y2hpbmcgYHNlbGVjdG9yYCB3aXRoaW4gdGhlIG9wdGlvbmFsXG4gICAqIGBjb250ZXh0YCBvZiBhbm90aGVyIERPTSBlbGVtZW50IChkZWZhdWx0aW5nIHRvIGBkb2N1bWVudGApLlxuICAgKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHNlbGVjdG9yXG4gICAqICAgICAgICAgQSB2YWxpZCBDU1Mgc2VsZWN0b3IsIHdoaWNoIHdpbGwgYmUgcGFzc2VkIHRvIGBxdWVyeVNlbGVjdG9yQWxsYC5cbiAgICpcbiAgICogQHBhcmFtICB7RWxlbWVudHxTdHJpbmd9IFtjb250ZXh0PWRvY3VtZW50XVxuICAgKiAgICAgICAgIEEgRE9NIGVsZW1lbnQgd2l0aGluIHdoaWNoIHRvIHF1ZXJ5LiBDYW4gYWxzbyBiZSBhIHNlbGVjdG9yXG4gICAqICAgICAgICAgc3RyaW5nIGluIHdoaWNoIGNhc2UgdGhlIGZpcnN0IG1hdGNoaW5nIGVsZW1lbnQgd2lsbCBiZSB1c2VkXG4gICAqICAgICAgICAgYXMgY29udGV4dC4gSWYgbWlzc2luZyAob3Igbm8gZWxlbWVudCBtYXRjaGVzIHNlbGVjdG9yKSwgZmFsbHNcbiAgICogICAgICAgICBiYWNrIHRvIGBkb2N1bWVudGAuXG4gICAqXG4gICAqIEByZXR1cm4ge05vZGVMaXN0fVxuICAgKiAgICAgICAgIEEgZWxlbWVudCBsaXN0IG9mIGVsZW1lbnRzIHRoYXQgd2VyZSBmb3VuZC4gV2lsbCBiZSBlbXB0eSBpZiBub25lXG4gICAqICAgICAgICAgd2VyZSBmb3VuZC5cbiAgICpcbiAgICovXG5cbiAgdmFyICQkID0gY3JlYXRlUXVlcmllcigncXVlcnlTZWxlY3RvckFsbCcpO1xuXG4gIHZhciBEb20gPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgaXNSZWFsOiBpc1JlYWwsXG4gICAgaXNFbDogaXNFbCxcbiAgICBpc0luRnJhbWU6IGlzSW5GcmFtZSxcbiAgICBjcmVhdGVFbDogY3JlYXRlRWwsXG4gICAgdGV4dENvbnRlbnQ6IHRleHRDb250ZW50LFxuICAgIHByZXBlbmRUbzogcHJlcGVuZFRvLFxuICAgIGhhc0NsYXNzOiBoYXNDbGFzcyxcbiAgICBhZGRDbGFzczogYWRkQ2xhc3MsXG4gICAgcmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLFxuICAgIHRvZ2dsZUNsYXNzOiB0b2dnbGVDbGFzcyxcbiAgICBzZXRBdHRyaWJ1dGVzOiBzZXRBdHRyaWJ1dGVzLFxuICAgIGdldEF0dHJpYnV0ZXM6IGdldEF0dHJpYnV0ZXMsXG4gICAgZ2V0QXR0cmlidXRlOiBnZXRBdHRyaWJ1dGUsXG4gICAgc2V0QXR0cmlidXRlOiBzZXRBdHRyaWJ1dGUsXG4gICAgcmVtb3ZlQXR0cmlidXRlOiByZW1vdmVBdHRyaWJ1dGUsXG4gICAgYmxvY2tUZXh0U2VsZWN0aW9uOiBibG9ja1RleHRTZWxlY3Rpb24sXG4gICAgdW5ibG9ja1RleHRTZWxlY3Rpb246IHVuYmxvY2tUZXh0U2VsZWN0aW9uLFxuICAgIGdldEJvdW5kaW5nQ2xpZW50UmVjdDogZ2V0Qm91bmRpbmdDbGllbnRSZWN0LFxuICAgIGZpbmRQb3NpdGlvbjogZmluZFBvc2l0aW9uLFxuICAgIGdldFBvaW50ZXJQb3NpdGlvbjogZ2V0UG9pbnRlclBvc2l0aW9uLFxuICAgIGlzVGV4dE5vZGU6IGlzVGV4dE5vZGUsXG4gICAgZW1wdHlFbDogZW1wdHlFbCxcbiAgICBub3JtYWxpemVDb250ZW50OiBub3JtYWxpemVDb250ZW50LFxuICAgIGFwcGVuZENvbnRlbnQ6IGFwcGVuZENvbnRlbnQsXG4gICAgaW5zZXJ0Q29udGVudDogaW5zZXJ0Q29udGVudCxcbiAgICBpc1NpbmdsZUxlZnRDbGljazogaXNTaW5nbGVMZWZ0Q2xpY2ssXG4gICAgJDogJCxcbiAgICAkJDogJCRcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEBmaWxlIGd1aWQuanNcbiAgICogQG1vZHVsZSBndWlkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBVbmlxdWUgSUQgZm9yIGFuIGVsZW1lbnQgb3IgZnVuY3Rpb25cbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIHZhciBfZ3VpZCA9IDE7XG4gIC8qKlxuICAgKiBHZXQgYSB1bmlxdWUgYXV0by1pbmNyZW1lbnRpbmcgSUQgYnkgbnVtYmVyIHRoYXQgaGFzIG5vdCBiZWVuIHJldHVybmVkIGJlZm9yZS5cbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIEEgbmV3IHVuaXF1ZSBJRC5cbiAgICovXG5cbiAgZnVuY3Rpb24gbmV3R1VJRCgpIHtcbiAgICByZXR1cm4gX2d1aWQrKztcbiAgfVxuXG4gIC8qKlxuICAgKiBAZmlsZSBkb20tZGF0YS5qc1xuICAgKiBAbW9kdWxlIGRvbS1kYXRhXG4gICAqL1xuICAvKipcbiAgICogRWxlbWVudCBEYXRhIFN0b3JlLlxuICAgKlxuICAgKiBBbGxvd3MgZm9yIGJpbmRpbmcgZGF0YSB0byBhbiBlbGVtZW50IHdpdGhvdXQgcHV0dGluZyBpdCBkaXJlY3RseSBvbiB0aGVcbiAgICogZWxlbWVudC4gRXguIEV2ZW50IGxpc3RlbmVycyBhcmUgc3RvcmVkIGhlcmUuXG4gICAqIChhbHNvIGZyb20ganNuaW5qYS5jb20sIHNsaWdodGx5IG1vZGlmaWVkIGFuZCB1cGRhdGVkIGZvciBjbG9zdXJlIGNvbXBpbGVyKVxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICB2YXIgZWxEYXRhID0ge307XG4gIC8qXG4gICAqIFVuaXF1ZSBhdHRyaWJ1dGUgbmFtZSB0byBzdG9yZSBhbiBlbGVtZW50J3MgZ3VpZCBpblxuICAgKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAY29uc3RhbnRcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgdmFyIGVsSWRBdHRyID0gJ3ZkYXRhJyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAvKipcbiAgICogUmV0dXJucyB0aGUgY2FjaGUgb2JqZWN0IHdoZXJlIGRhdGEgZm9yIGFuIGVsZW1lbnQgaXMgc3RvcmVkXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogICAgICAgIEVsZW1lbnQgdG8gc3RvcmUgZGF0YSBmb3IuXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICogICAgICAgICBUaGUgY2FjaGUgb2JqZWN0IGZvciB0aGF0IGVsIHRoYXQgd2FzIHBhc3NlZCBpbi5cbiAgICovXG5cbiAgZnVuY3Rpb24gZ2V0RGF0YShlbCkge1xuICAgIHZhciBpZCA9IGVsW2VsSWRBdHRyXTtcblxuICAgIGlmICghaWQpIHtcbiAgICAgIGlkID0gZWxbZWxJZEF0dHJdID0gbmV3R1VJRCgpO1xuICAgIH1cblxuICAgIGlmICghZWxEYXRhW2lkXSkge1xuICAgICAgZWxEYXRhW2lkXSA9IHt9O1xuICAgIH1cblxuICAgIHJldHVybiBlbERhdGFbaWRdO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IGFuIGVsZW1lbnQgaGFzIGNhY2hlZCBkYXRhXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogICAgICAgIENoZWNrIGlmIHRoaXMgZWxlbWVudCBoYXMgY2FjaGVkIGRhdGEuXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqICAgICAgICAgLSBUcnVlIGlmIHRoZSBET00gZWxlbWVudCBoYXMgY2FjaGVkIGRhdGEuXG4gICAqICAgICAgICAgLSBGYWxzZSBvdGhlcndpc2UuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGhhc0RhdGEoZWwpIHtcbiAgICB2YXIgaWQgPSBlbFtlbElkQXR0cl07XG5cbiAgICBpZiAoIWlkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuICEhT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZWxEYXRhW2lkXSkubGVuZ3RoO1xuICB9XG4gIC8qKlxuICAgKiBEZWxldGUgZGF0YSBmb3IgdGhlIGVsZW1lbnQgZnJvbSB0aGUgY2FjaGUgYW5kIHRoZSBndWlkIGF0dHIgZnJvbSBnZXRFbGVtZW50QnlJZFxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqICAgICAgICBSZW1vdmUgY2FjaGVkIGRhdGEgZm9yIHRoaXMgZWxlbWVudC5cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVtb3ZlRGF0YShlbCkge1xuICAgIHZhciBpZCA9IGVsW2VsSWRBdHRyXTtcblxuICAgIGlmICghaWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIFJlbW92ZSBhbGwgc3RvcmVkIGRhdGFcblxuXG4gICAgZGVsZXRlIGVsRGF0YVtpZF07IC8vIFJlbW92ZSB0aGUgZWxJZEF0dHIgcHJvcGVydHkgZnJvbSB0aGUgRE9NIG5vZGVcblxuICAgIHRyeSB7XG4gICAgICBkZWxldGUgZWxbZWxJZEF0dHJdO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChlbC5yZW1vdmVBdHRyaWJ1dGUpIHtcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGVsSWRBdHRyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElFIGRvZXNuJ3QgYXBwZWFyIHRvIHN1cHBvcnQgcmVtb3ZlQXR0cmlidXRlIG9uIHRoZSBkb2N1bWVudCBlbGVtZW50XG4gICAgICAgIGVsW2VsSWRBdHRyXSA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBmaWxlIGV2ZW50cy5qcy4gQW4gRXZlbnQgU3lzdGVtIChKb2huIFJlc2lnIC0gU2VjcmV0cyBvZiBhIEpTIE5pbmphIGh0dHA6Ly9qc25pbmphLmNvbS8pXG4gICAqIChPcmlnaW5hbCBib29rIHZlcnNpb24gd2Fzbid0IGNvbXBsZXRlbHkgdXNhYmxlLCBzbyBmaXhlZCBzb21lIHRoaW5ncyBhbmQgbWFkZSBDbG9zdXJlIENvbXBpbGVyIGNvbXBhdGlibGUpXG4gICAqIFRoaXMgc2hvdWxkIHdvcmsgdmVyeSBzaW1pbGFybHkgdG8galF1ZXJ5J3MgZXZlbnRzLCBob3dldmVyIGl0J3MgYmFzZWQgb2ZmIHRoZSBib29rIHZlcnNpb24gd2hpY2ggaXNuJ3QgYXNcbiAgICogcm9idXN0IGFzIGpxdWVyeSdzLCBzbyB0aGVyZSdzIHByb2JhYmx5IHNvbWUgZGlmZmVyZW5jZXMuXG4gICAqXG4gICAqIEBmaWxlIGV2ZW50cy5qc1xuICAgKiBAbW9kdWxlIGV2ZW50c1xuICAgKi9cbiAgLyoqXG4gICAqIENsZWFuIHVwIHRoZSBsaXN0ZW5lciBjYWNoZSBhbmQgZGlzcGF0Y2hlcnNcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gZWxlbVxuICAgKiAgICAgICAgRWxlbWVudCB0byBjbGVhbiB1cFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICAgKiAgICAgICAgVHlwZSBvZiBldmVudCB0byBjbGVhbiB1cFxuICAgKi9cblxuICBmdW5jdGlvbiBfY2xlYW5VcEV2ZW50cyhlbGVtLCB0eXBlKSB7XG4gICAgdmFyIGRhdGEgPSBnZXREYXRhKGVsZW0pOyAvLyBSZW1vdmUgdGhlIGV2ZW50cyBvZiBhIHBhcnRpY3VsYXIgdHlwZSBpZiB0aGVyZSBhcmUgbm9uZSBsZWZ0XG5cbiAgICBpZiAoZGF0YS5oYW5kbGVyc1t0eXBlXS5sZW5ndGggPT09IDApIHtcbiAgICAgIGRlbGV0ZSBkYXRhLmhhbmRsZXJzW3R5cGVdOyAvLyBkYXRhLmhhbmRsZXJzW3R5cGVdID0gbnVsbDtcbiAgICAgIC8vIFNldHRpbmcgdG8gbnVsbCB3YXMgY2F1c2luZyBhbiBlcnJvciB3aXRoIGRhdGEuaGFuZGxlcnNcbiAgICAgIC8vIFJlbW92ZSB0aGUgbWV0YS1oYW5kbGVyIGZyb20gdGhlIGVsZW1lbnRcblxuICAgICAgaWYgKGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZGF0YS5kaXNwYXRjaGVyLCBmYWxzZSk7XG4gICAgICB9IGVsc2UgaWYgKGVsZW0uZGV0YWNoRXZlbnQpIHtcbiAgICAgICAgZWxlbS5kZXRhY2hFdmVudCgnb24nICsgdHlwZSwgZGF0YS5kaXNwYXRjaGVyKTtcbiAgICAgIH1cbiAgICB9IC8vIFJlbW92ZSB0aGUgZXZlbnRzIG9iamVjdCBpZiB0aGVyZSBhcmUgbm8gdHlwZXMgbGVmdFxuXG5cbiAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZGF0YS5oYW5kbGVycykubGVuZ3RoIDw9IDApIHtcbiAgICAgIGRlbGV0ZSBkYXRhLmhhbmRsZXJzO1xuICAgICAgZGVsZXRlIGRhdGEuZGlzcGF0Y2hlcjtcbiAgICAgIGRlbGV0ZSBkYXRhLmRpc2FibGVkO1xuICAgIH0gLy8gRmluYWxseSByZW1vdmUgdGhlIGVsZW1lbnQgZGF0YSBpZiB0aGVyZSBpcyBubyBkYXRhIGxlZnRcblxuXG4gICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGRhdGEpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmVtb3ZlRGF0YShlbGVtKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIExvb3BzIHRocm91Z2ggYW4gYXJyYXkgb2YgZXZlbnQgdHlwZXMgYW5kIGNhbGxzIHRoZSByZXF1ZXN0ZWQgbWV0aG9kIGZvciBlYWNoIHR5cGUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqICAgICAgICBUaGUgZXZlbnQgbWV0aG9kIHdlIHdhbnQgdG8gdXNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtXG4gICAqICAgICAgICBFbGVtZW50IG9yIG9iamVjdCB0byBiaW5kIGxpc3RlbmVycyB0b1xuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICAgKiAgICAgICAgVHlwZSBvZiBldmVudCB0byBiaW5kIHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50TGlzdGVuZXJ9IGNhbGxiYWNrXG4gICAqICAgICAgICBFdmVudCBsaXN0ZW5lci5cbiAgICovXG5cblxuICBmdW5jdGlvbiBfaGFuZGxlTXVsdGlwbGVFdmVudHMoZm4sIGVsZW0sIHR5cGVzLCBjYWxsYmFjaykge1xuICAgIHR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgIC8vIENhbGwgdGhlIGV2ZW50IG1ldGhvZCBmb3IgZWFjaCBvbmUgb2YgdGhlIHR5cGVzXG4gICAgICBmbihlbGVtLCB0eXBlLCBjYWxsYmFjayk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEZpeCBhIG5hdGl2ZSBldmVudCB0byBoYXZlIHN0YW5kYXJkIHByb3BlcnR5IHZhbHVlc1xuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcbiAgICogICAgICAgIEV2ZW50IG9iamVjdCB0byBmaXguXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICogICAgICAgICBGaXhlZCBldmVudCBvYmplY3QuXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gZml4RXZlbnQoZXZlbnQpIHtcbiAgICBmdW5jdGlvbiByZXR1cm5UcnVlKCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmV0dXJuRmFsc2UoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSAvLyBUZXN0IGlmIGZpeGluZyB1cCBpcyBuZWVkZWRcbiAgICAvLyBVc2VkIHRvIGNoZWNrIGlmICFldmVudC5zdG9wUHJvcGFnYXRpb24gaW5zdGVhZCBvZiBpc1Byb3BhZ2F0aW9uU3RvcHBlZFxuICAgIC8vIEJ1dCBuYXRpdmUgZXZlbnRzIHJldHVybiB0cnVlIGZvciBzdG9wUHJvcGFnYXRpb24sIGJ1dCBkb24ndCBoYXZlXG4gICAgLy8gb3RoZXIgZXhwZWN0ZWQgbWV0aG9kcyBsaWtlIGlzUHJvcGFnYXRpb25TdG9wcGVkLiBTZWVtcyB0byBiZSBhIHByb2JsZW1cbiAgICAvLyB3aXRoIHRoZSBKYXZhc2NyaXB0IE5pbmphIGNvZGUuIFNvIHdlJ3JlIGp1c3Qgb3ZlcnJpZGluZyBhbGwgZXZlbnRzIG5vdy5cblxuXG4gICAgaWYgKCFldmVudCB8fCAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQpIHtcbiAgICAgIHZhciBvbGQgPSBldmVudCB8fCB3aW5kb3ckMS5ldmVudDtcbiAgICAgIGV2ZW50ID0ge307IC8vIENsb25lIHRoZSBvbGQgb2JqZWN0IHNvIHRoYXQgd2UgY2FuIG1vZGlmeSB0aGUgdmFsdWVzIGV2ZW50ID0ge307XG4gICAgICAvLyBJRTggRG9lc24ndCBsaWtlIHdoZW4geW91IG1lc3Mgd2l0aCBuYXRpdmUgZXZlbnQgcHJvcGVydGllc1xuICAgICAgLy8gRmlyZWZveCByZXR1cm5zIGZhbHNlIGZvciBldmVudC5oYXNPd25Qcm9wZXJ0eSgndHlwZScpIGFuZCBvdGhlciBwcm9wc1xuICAgICAgLy8gIHdoaWNoIG1ha2VzIGNvcHlpbmcgbW9yZSBkaWZmaWN1bHQuXG4gICAgICAvLyBUT0RPOiBQcm9iYWJseSBiZXN0IHRvIGNyZWF0ZSBhIHdoaXRlbGlzdCBvZiBldmVudCBwcm9wc1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gb2xkKSB7XG4gICAgICAgIC8vIFNhZmFyaSA2LjAuMyB3YXJucyB5b3UgaWYgeW91IHRyeSB0byBjb3B5IGRlcHJlY2F0ZWQgbGF5ZXJYL1lcbiAgICAgICAgLy8gQ2hyb21lIHdhcm5zIHlvdSBpZiB5b3UgdHJ5IHRvIGNvcHkgZGVwcmVjYXRlZCBrZXlib2FyZEV2ZW50LmtleUxvY2F0aW9uXG4gICAgICAgIC8vIGFuZCB3ZWJraXRNb3ZlbWVudFgvWVxuICAgICAgICBpZiAoa2V5ICE9PSAnbGF5ZXJYJyAmJiBrZXkgIT09ICdsYXllclknICYmIGtleSAhPT0gJ2tleUxvY2F0aW9uJyAmJiBrZXkgIT09ICd3ZWJraXRNb3ZlbWVudFgnICYmIGtleSAhPT0gJ3dlYmtpdE1vdmVtZW50WScpIHtcbiAgICAgICAgICAvLyBDaHJvbWUgMzIrIHdhcm5zIGlmIHlvdSB0cnkgdG8gY29weSBkZXByZWNhdGVkIHJldHVyblZhbHVlLCBidXRcbiAgICAgICAgICAvLyB3ZSBzdGlsbCB3YW50IHRvIGlmIHByZXZlbnREZWZhdWx0IGlzbid0IHN1cHBvcnRlZCAoSUU4KS5cbiAgICAgICAgICBpZiAoIShrZXkgPT09ICdyZXR1cm5WYWx1ZScgJiYgb2xkLnByZXZlbnREZWZhdWx0KSkge1xuICAgICAgICAgICAgZXZlbnRba2V5XSA9IG9sZFtrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSAvLyBUaGUgZXZlbnQgb2NjdXJyZWQgb24gdGhpcyBlbGVtZW50XG5cblxuICAgICAgaWYgKCFldmVudC50YXJnZXQpIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0ID0gZXZlbnQuc3JjRWxlbWVudCB8fCBkb2N1bWVudDtcbiAgICAgIH0gLy8gSGFuZGxlIHdoaWNoIG90aGVyIGVsZW1lbnQgdGhlIGV2ZW50IGlzIHJlbGF0ZWQgdG9cblxuXG4gICAgICBpZiAoIWV2ZW50LnJlbGF0ZWRUYXJnZXQpIHtcbiAgICAgICAgZXZlbnQucmVsYXRlZFRhcmdldCA9IGV2ZW50LmZyb21FbGVtZW50ID09PSBldmVudC50YXJnZXQgPyBldmVudC50b0VsZW1lbnQgOiBldmVudC5mcm9tRWxlbWVudDtcbiAgICAgIH0gLy8gU3RvcCB0aGUgZGVmYXVsdCBicm93c2VyIGFjdGlvblxuXG5cbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAob2xkLnByZXZlbnREZWZhdWx0KSB7XG4gICAgICAgICAgb2xkLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICBvbGQucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgZXZlbnQuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7XG4gICAgICB9O1xuXG4gICAgICBldmVudC5kZWZhdWx0UHJldmVudGVkID0gZmFsc2U7IC8vIFN0b3AgdGhlIGV2ZW50IGZyb20gYnViYmxpbmdcblxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAob2xkLnN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICAgIG9sZC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICAgIG9sZC5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgICAgICBldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVyblRydWU7XG4gICAgICB9O1xuXG4gICAgICBldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVybkZhbHNlOyAvLyBTdG9wIHRoZSBldmVudCBmcm9tIGJ1YmJsaW5nIGFuZCBleGVjdXRpbmcgb3RoZXIgaGFuZGxlcnNcblxuICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAob2xkLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbikge1xuICAgICAgICAgIG9sZC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9O1xuXG4gICAgICBldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVybkZhbHNlOyAvLyBIYW5kbGUgbW91c2UgcG9zaXRpb25cblxuICAgICAgaWYgKGV2ZW50LmNsaWVudFggIT09IG51bGwgJiYgZXZlbnQuY2xpZW50WCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBkb2MgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgICAgZXZlbnQucGFnZVggPSBldmVudC5jbGllbnRYICsgKGRvYyAmJiBkb2Muc2Nyb2xsTGVmdCB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsTGVmdCB8fCAwKSAtIChkb2MgJiYgZG9jLmNsaWVudExlZnQgfHwgYm9keSAmJiBib2R5LmNsaWVudExlZnQgfHwgMCk7XG4gICAgICAgIGV2ZW50LnBhZ2VZID0gZXZlbnQuY2xpZW50WSArIChkb2MgJiYgZG9jLnNjcm9sbFRvcCB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsVG9wIHx8IDApIC0gKGRvYyAmJiBkb2MuY2xpZW50VG9wIHx8IGJvZHkgJiYgYm9keS5jbGllbnRUb3AgfHwgMCk7XG4gICAgICB9IC8vIEhhbmRsZSBrZXkgcHJlc3Nlc1xuXG5cbiAgICAgIGV2ZW50LndoaWNoID0gZXZlbnQuY2hhckNvZGUgfHwgZXZlbnQua2V5Q29kZTsgLy8gRml4IGJ1dHRvbiBmb3IgbW91c2UgY2xpY2tzOlxuICAgICAgLy8gMCA9PSBsZWZ0OyAxID09IG1pZGRsZTsgMiA9PSByaWdodFxuXG4gICAgICBpZiAoZXZlbnQuYnV0dG9uICE9PSBudWxsICYmIGV2ZW50LmJ1dHRvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgaXMgZGlzYWJsZWQgYmVjYXVzZSBpdCBkb2VzIG5vdCBwYXNzIHZpZGVvanMtc3RhbmRhcmRcbiAgICAgICAgLy8gYW5kLi4uIHlpa2VzLlxuXG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlICovXG4gICAgICAgIGV2ZW50LmJ1dHRvbiA9IGV2ZW50LmJ1dHRvbiAmIDEgPyAwIDogZXZlbnQuYnV0dG9uICYgNCA/IDEgOiBldmVudC5idXR0b24gJiAyID8gMiA6IDA7XG4gICAgICAgIC8qIGVzbGludC1lbmFibGUgKi9cbiAgICAgIH1cbiAgICB9IC8vIFJldHVybnMgZml4ZWQtdXAgaW5zdGFuY2VcblxuXG4gICAgcmV0dXJuIGV2ZW50O1xuICB9XG4gIC8qKlxuICAgKiBXaGV0aGVyIHBhc3NpdmUgZXZlbnQgbGlzdGVuZXJzIGFyZSBzdXBwb3J0ZWRcbiAgICovXG5cbiAgdmFyIF9zdXBwb3J0c1Bhc3NpdmUgPSBmYWxzZTtcblxuICAoZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICB2YXIgb3B0cyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3Bhc3NpdmUnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgIF9zdXBwb3J0c1Bhc3NpdmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHdpbmRvdyQxLmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBudWxsLCBvcHRzKTtcbiAgICAgIHdpbmRvdyQxLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBudWxsLCBvcHRzKTtcbiAgICB9IGNhdGNoIChlKSB7Ly8gZGlzcmVnYXJkXG4gICAgfVxuICB9KSgpO1xuICAvKipcbiAgICogVG91Y2ggZXZlbnRzIENocm9tZSBleHBlY3RzIHRvIGJlIHBhc3NpdmVcbiAgICovXG5cblxuICB2YXIgcGFzc2l2ZUV2ZW50cyA9IFsndG91Y2hzdGFydCcsICd0b3VjaG1vdmUnXTtcbiAgLyoqXG4gICAqIEFkZCBhbiBldmVudCBsaXN0ZW5lciB0byBlbGVtZW50XG4gICAqIEl0IHN0b3JlcyB0aGUgaGFuZGxlciBmdW5jdGlvbiBpbiBhIHNlcGFyYXRlIGNhY2hlIG9iamVjdFxuICAgKiBhbmQgYWRkcyBhIGdlbmVyaWMgaGFuZGxlciB0byB0aGUgZWxlbWVudCdzIGV2ZW50LFxuICAgKiBhbG9uZyB3aXRoIGEgdW5pcXVlIGlkIChndWlkKSB0byB0aGUgZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gZWxlbVxuICAgKiAgICAgICAgRWxlbWVudCBvciBvYmplY3QgdG8gYmluZCBsaXN0ZW5lcnMgdG9cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IHR5cGVcbiAgICogICAgICAgIFR5cGUgb2YgZXZlbnQgdG8gYmluZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudExpc3RlbmVyfSBmblxuICAgKiAgICAgICAgRXZlbnQgbGlzdGVuZXIuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG9uKGVsZW0sIHR5cGUsIGZuKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHtcbiAgICAgIHJldHVybiBfaGFuZGxlTXVsdGlwbGVFdmVudHMob24sIGVsZW0sIHR5cGUsIGZuKTtcbiAgICB9XG5cbiAgICB2YXIgZGF0YSA9IGdldERhdGEoZWxlbSk7IC8vIFdlIG5lZWQgYSBwbGFjZSB0byBzdG9yZSBhbGwgb3VyIGhhbmRsZXIgZGF0YVxuXG4gICAgaWYgKCFkYXRhLmhhbmRsZXJzKSB7XG4gICAgICBkYXRhLmhhbmRsZXJzID0ge307XG4gICAgfVxuXG4gICAgaWYgKCFkYXRhLmhhbmRsZXJzW3R5cGVdKSB7XG4gICAgICBkYXRhLmhhbmRsZXJzW3R5cGVdID0gW107XG4gICAgfVxuXG4gICAgaWYgKCFmbi5ndWlkKSB7XG4gICAgICBmbi5ndWlkID0gbmV3R1VJRCgpO1xuICAgIH1cblxuICAgIGRhdGEuaGFuZGxlcnNbdHlwZV0ucHVzaChmbik7XG5cbiAgICBpZiAoIWRhdGEuZGlzcGF0Y2hlcikge1xuICAgICAgZGF0YS5kaXNhYmxlZCA9IGZhbHNlO1xuXG4gICAgICBkYXRhLmRpc3BhdGNoZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGhhc2gpIHtcbiAgICAgICAgaWYgKGRhdGEuZGlzYWJsZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBldmVudCA9IGZpeEV2ZW50KGV2ZW50KTtcbiAgICAgICAgdmFyIGhhbmRsZXJzID0gZGF0YS5oYW5kbGVyc1tldmVudC50eXBlXTtcblxuICAgICAgICBpZiAoaGFuZGxlcnMpIHtcbiAgICAgICAgICAvLyBDb3B5IGhhbmRsZXJzIHNvIGlmIGhhbmRsZXJzIGFyZSBhZGRlZC9yZW1vdmVkIGR1cmluZyB0aGUgcHJvY2VzcyBpdCBkb2Vzbid0IHRocm93IGV2ZXJ5dGhpbmcgb2ZmLlxuICAgICAgICAgIHZhciBoYW5kbGVyc0NvcHkgPSBoYW5kbGVycy5zbGljZSgwKTtcblxuICAgICAgICAgIGZvciAodmFyIG0gPSAwLCBuID0gaGFuZGxlcnNDb3B5Lmxlbmd0aDsgbSA8IG47IG0rKykge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGhhbmRsZXJzQ29weVttXS5jYWxsKGVsZW0sIGV2ZW50LCBoYXNoKTtcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGxvZy5lcnJvcihlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5oYW5kbGVyc1t0eXBlXS5sZW5ndGggPT09IDEpIHtcbiAgICAgIGlmIChlbGVtLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBmYWxzZTtcblxuICAgICAgICBpZiAoX3N1cHBvcnRzUGFzc2l2ZSAmJiBwYXNzaXZlRXZlbnRzLmluZGV4T2YodHlwZSkgPiAtMSkge1xuICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBwYXNzaXZlOiB0cnVlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBkYXRhLmRpc3BhdGNoZXIsIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIGlmIChlbGVtLmF0dGFjaEV2ZW50KSB7XG4gICAgICAgIGVsZW0uYXR0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGRhdGEuZGlzcGF0Y2hlcik7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmVzIGV2ZW50IGxpc3RlbmVycyBmcm9tIGFuIGVsZW1lbnRcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gZWxlbVxuICAgKiAgICAgICAgT2JqZWN0IHRvIHJlbW92ZSBsaXN0ZW5lcnMgZnJvbS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IFt0eXBlXVxuICAgKiAgICAgICAgVHlwZSBvZiBsaXN0ZW5lciB0byByZW1vdmUuIERvbid0IGluY2x1ZGUgdG8gcmVtb3ZlIGFsbCBldmVudHMgZnJvbSBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50TGlzdGVuZXJ9IFtmbl1cbiAgICogICAgICAgIFNwZWNpZmljIGxpc3RlbmVyIHRvIHJlbW92ZS4gRG9uJ3QgaW5jbHVkZSB0byByZW1vdmUgbGlzdGVuZXJzIGZvciBhbiBldmVudFxuICAgKiAgICAgICAgdHlwZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gb2ZmKGVsZW0sIHR5cGUsIGZuKSB7XG4gICAgLy8gRG9uJ3Qgd2FudCB0byBhZGQgYSBjYWNoZSBvYmplY3QgdGhyb3VnaCBnZXRFbERhdGEgaWYgbm90IG5lZWRlZFxuICAgIGlmICghaGFzRGF0YShlbGVtKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBkYXRhID0gZ2V0RGF0YShlbGVtKTsgLy8gSWYgbm8gZXZlbnRzIGV4aXN0LCBub3RoaW5nIHRvIHVuYmluZFxuXG4gICAgaWYgKCFkYXRhLmhhbmRsZXJzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHtcbiAgICAgIHJldHVybiBfaGFuZGxlTXVsdGlwbGVFdmVudHMob2ZmLCBlbGVtLCB0eXBlLCBmbik7XG4gICAgfSAvLyBVdGlsaXR5IGZ1bmN0aW9uXG5cblxuICAgIHZhciByZW1vdmVUeXBlID0gZnVuY3Rpb24gcmVtb3ZlVHlwZShlbCwgdCkge1xuICAgICAgZGF0YS5oYW5kbGVyc1t0XSA9IFtdO1xuXG4gICAgICBfY2xlYW5VcEV2ZW50cyhlbCwgdCk7XG4gICAgfTsgLy8gQXJlIHdlIHJlbW92aW5nIGFsbCBib3VuZCBldmVudHM/XG5cblxuICAgIGlmICh0eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZvciAodmFyIHQgaW4gZGF0YS5oYW5kbGVycykge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEuaGFuZGxlcnMgfHwge30sIHQpKSB7XG4gICAgICAgICAgcmVtb3ZlVHlwZShlbGVtLCB0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGhhbmRsZXJzID0gZGF0YS5oYW5kbGVyc1t0eXBlXTsgLy8gSWYgbm8gaGFuZGxlcnMgZXhpc3QsIG5vdGhpbmcgdG8gdW5iaW5kXG5cbiAgICBpZiAoIWhhbmRsZXJzKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBJZiBubyBsaXN0ZW5lciB3YXMgcHJvdmlkZWQsIHJlbW92ZSBhbGwgbGlzdGVuZXJzIGZvciB0eXBlXG5cblxuICAgIGlmICghZm4pIHtcbiAgICAgIHJlbW92ZVR5cGUoZWxlbSwgdHlwZSk7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBXZSdyZSBvbmx5IHJlbW92aW5nIGEgc2luZ2xlIGhhbmRsZXJcblxuXG4gICAgaWYgKGZuLmd1aWQpIHtcbiAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgaGFuZGxlcnMubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgaWYgKGhhbmRsZXJzW25dLmd1aWQgPT09IGZuLmd1aWQpIHtcbiAgICAgICAgICBoYW5kbGVycy5zcGxpY2Uobi0tLCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIF9jbGVhblVwRXZlbnRzKGVsZW0sIHR5cGUpO1xuICB9XG4gIC8qKlxuICAgKiBUcmlnZ2VyIGFuIGV2ZW50IGZvciBhbiBlbGVtZW50XG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsZW1cbiAgICogICAgICAgIEVsZW1lbnQgdG8gdHJpZ2dlciBhbiBldmVudCBvblxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fHN0cmluZ30gZXZlbnRcbiAgICogICAgICAgIEEgc3RyaW5nICh0aGUgdHlwZSkgb3IgYW4gZXZlbnQgb2JqZWN0IHdpdGggYSB0eXBlIGF0dHJpYnV0ZVxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW2hhc2hdXG4gICAqICAgICAgICBkYXRhIGhhc2ggdG8gcGFzcyBhbG9uZyB3aXRoIHRoZSBldmVudFxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufHVuZGVmaW5lZH1cbiAgICogICAgICAgICBSZXR1cm5zIHRoZSBvcHBvc2l0ZSBvZiBgZGVmYXVsdFByZXZlbnRlZGAgaWYgZGVmYXVsdCB3YXNcbiAgICogICAgICAgICBwcmV2ZW50ZWQuIE90aGVyd2lzZSwgcmV0dXJucyBgdW5kZWZpbmVkYFxuICAgKi9cblxuICBmdW5jdGlvbiB0cmlnZ2VyKGVsZW0sIGV2ZW50LCBoYXNoKSB7XG4gICAgLy8gRmV0Y2hlcyBlbGVtZW50IGRhdGEgYW5kIGEgcmVmZXJlbmNlIHRvIHRoZSBwYXJlbnQgKGZvciBidWJibGluZykuXG4gICAgLy8gRG9uJ3Qgd2FudCB0byBhZGQgYSBkYXRhIG9iamVjdCB0byBjYWNoZSBmb3IgZXZlcnkgcGFyZW50LFxuICAgIC8vIHNvIGNoZWNraW5nIGhhc0VsRGF0YSBmaXJzdC5cbiAgICB2YXIgZWxlbURhdGEgPSBoYXNEYXRhKGVsZW0pID8gZ2V0RGF0YShlbGVtKSA6IHt9O1xuICAgIHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGUgfHwgZWxlbS5vd25lckRvY3VtZW50OyAvLyB0eXBlID0gZXZlbnQudHlwZSB8fCBldmVudCxcbiAgICAvLyBoYW5kbGVyO1xuICAgIC8vIElmIGFuIGV2ZW50IG5hbWUgd2FzIHBhc3NlZCBhcyBhIHN0cmluZywgY3JlYXRlcyBhbiBldmVudCBvdXQgb2YgaXRcblxuICAgIGlmICh0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBldmVudCA9IHtcbiAgICAgICAgdHlwZTogZXZlbnQsXG4gICAgICAgIHRhcmdldDogZWxlbVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKCFldmVudC50YXJnZXQpIHtcbiAgICAgIGV2ZW50LnRhcmdldCA9IGVsZW07XG4gICAgfSAvLyBOb3JtYWxpemVzIHRoZSBldmVudCBwcm9wZXJ0aWVzLlxuXG5cbiAgICBldmVudCA9IGZpeEV2ZW50KGV2ZW50KTsgLy8gSWYgdGhlIHBhc3NlZCBlbGVtZW50IGhhcyBhIGRpc3BhdGNoZXIsIGV4ZWN1dGVzIHRoZSBlc3RhYmxpc2hlZCBoYW5kbGVycy5cblxuICAgIGlmIChlbGVtRGF0YS5kaXNwYXRjaGVyKSB7XG4gICAgICBlbGVtRGF0YS5kaXNwYXRjaGVyLmNhbGwoZWxlbSwgZXZlbnQsIGhhc2gpO1xuICAgIH0gLy8gVW5sZXNzIGV4cGxpY2l0bHkgc3RvcHBlZCBvciB0aGUgZXZlbnQgZG9lcyBub3QgYnViYmxlIChlLmcuIG1lZGlhIGV2ZW50cylcbiAgICAvLyByZWN1cnNpdmVseSBjYWxscyB0aGlzIGZ1bmN0aW9uIHRvIGJ1YmJsZSB0aGUgZXZlbnQgdXAgdGhlIERPTS5cblxuXG4gICAgaWYgKHBhcmVudCAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSAmJiBldmVudC5idWJibGVzID09PSB0cnVlKSB7XG4gICAgICB0cmlnZ2VyLmNhbGwobnVsbCwgcGFyZW50LCBldmVudCwgaGFzaCk7IC8vIElmIGF0IHRoZSB0b3Agb2YgdGhlIERPTSwgdHJpZ2dlcnMgdGhlIGRlZmF1bHQgYWN0aW9uIHVubGVzcyBkaXNhYmxlZC5cbiAgICB9IGVsc2UgaWYgKCFwYXJlbnQgJiYgIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgJiYgZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldFtldmVudC50eXBlXSkge1xuICAgICAgdmFyIHRhcmdldERhdGEgPSBnZXREYXRhKGV2ZW50LnRhcmdldCk7IC8vIENoZWNrcyBpZiB0aGUgdGFyZ2V0IGhhcyBhIGRlZmF1bHQgYWN0aW9uIGZvciB0aGlzIGV2ZW50LlxuXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0W2V2ZW50LnR5cGVdKSB7XG4gICAgICAgIC8vIFRlbXBvcmFyaWx5IGRpc2FibGVzIGV2ZW50IGRpc3BhdGNoaW5nIG9uIHRoZSB0YXJnZXQgYXMgd2UgaGF2ZSBhbHJlYWR5IGV4ZWN1dGVkIHRoZSBoYW5kbGVyLlxuICAgICAgICB0YXJnZXREYXRhLmRpc2FibGVkID0gdHJ1ZTsgLy8gRXhlY3V0ZXMgdGhlIGRlZmF1bHQgYWN0aW9uLlxuXG4gICAgICAgIGlmICh0eXBlb2YgZXZlbnQudGFyZ2V0W2V2ZW50LnR5cGVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgZXZlbnQudGFyZ2V0W2V2ZW50LnR5cGVdKCk7XG4gICAgICAgIH0gLy8gUmUtZW5hYmxlcyBldmVudCBkaXNwYXRjaGluZy5cblxuXG4gICAgICAgIHRhcmdldERhdGEuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IC8vIEluZm9ybSB0aGUgdHJpZ2dlcmVyIGlmIHRoZSBkZWZhdWx0IHdhcyBwcmV2ZW50ZWQgYnkgcmV0dXJuaW5nIGZhbHNlXG5cblxuICAgIHJldHVybiAhZXZlbnQuZGVmYXVsdFByZXZlbnRlZDtcbiAgfVxuICAvKipcbiAgICogVHJpZ2dlciBhIGxpc3RlbmVyIG9ubHkgb25jZSBmb3IgYW4gZXZlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsZW1cbiAgICogICAgICAgIEVsZW1lbnQgb3Igb2JqZWN0IHRvIGJpbmQgdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSB0eXBlXG4gICAqICAgICAgICBOYW1lL3R5cGUgb2YgZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtFdmVudH5FdmVudExpc3RlbmVyfSBmblxuICAgKiAgICAgICAgRXZlbnQgbGlzdGVuZXIgZnVuY3Rpb25cbiAgICovXG5cbiAgZnVuY3Rpb24gb25lKGVsZW0sIHR5cGUsIGZuKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHtcbiAgICAgIHJldHVybiBfaGFuZGxlTXVsdGlwbGVFdmVudHMob25lLCBlbGVtLCB0eXBlLCBmbik7XG4gICAgfVxuXG4gICAgdmFyIGZ1bmMgPSBmdW5jdGlvbiBmdW5jKCkge1xuICAgICAgb2ZmKGVsZW0sIHR5cGUsIGZ1bmMpO1xuICAgICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9OyAvLyBjb3B5IHRoZSBndWlkIHRvIHRoZSBuZXcgZnVuY3Rpb24gc28gaXQgY2FuIHJlbW92ZWQgdXNpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uJ3MgSURcblxuXG4gICAgZnVuYy5ndWlkID0gZm4uZ3VpZCA9IGZuLmd1aWQgfHwgbmV3R1VJRCgpO1xuICAgIG9uKGVsZW0sIHR5cGUsIGZ1bmMpO1xuICB9XG5cbiAgdmFyIEV2ZW50cyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBmaXhFdmVudDogZml4RXZlbnQsXG4gICAgb246IG9uLFxuICAgIG9mZjogb2ZmLFxuICAgIHRyaWdnZXI6IHRyaWdnZXIsXG4gICAgb25lOiBvbmVcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEBmaWxlIHNldHVwLmpzIC0gRnVuY3Rpb25zIGZvciBzZXR0aW5nIHVwIGEgcGxheWVyIHdpdGhvdXRcbiAgICogdXNlciBpbnRlcmFjdGlvbiBiYXNlZCBvbiB0aGUgZGF0YS1zZXR1cCBgYXR0cmlidXRlYCBvZiB0aGUgdmlkZW8gdGFnLlxuICAgKlxuICAgKiBAbW9kdWxlIHNldHVwXG4gICAqL1xuICB2YXIgX3dpbmRvd0xvYWRlZCA9IGZhbHNlO1xuICB2YXIgdmlkZW9qcztcbiAgLyoqXG4gICAqIFNldCB1cCBhbnkgdGFncyB0aGF0IGhhdmUgYSBkYXRhLXNldHVwIGBhdHRyaWJ1dGVgIHdoZW4gdGhlIHBsYXllciBpcyBzdGFydGVkLlxuICAgKi9cblxuICB2YXIgYXV0b1NldHVwID0gZnVuY3Rpb24gYXV0b1NldHVwKCkge1xuICAgIC8vIFByb3RlY3QgYWdhaW5zdCBicmVha2FnZSBpbiBub24tYnJvd3NlciBlbnZpcm9ubWVudHMgYW5kIGNoZWNrIGdsb2JhbCBhdXRvU2V0dXAgb3B0aW9uLlxuICAgIGlmICghaXNSZWFsKCkgfHwgdmlkZW9qcy5vcHRpb25zLmF1dG9TZXR1cCA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdmlkcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlbycpKTtcbiAgICB2YXIgYXVkaW9zID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2F1ZGlvJykpO1xuICAgIHZhciBkaXZzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3ZpZGVvLWpzJykpO1xuICAgIHZhciBtZWRpYUVscyA9IHZpZHMuY29uY2F0KGF1ZGlvcywgZGl2cyk7IC8vIENoZWNrIGlmIGFueSBtZWRpYSBlbGVtZW50cyBleGlzdFxuXG4gICAgaWYgKG1lZGlhRWxzICYmIG1lZGlhRWxzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBlID0gbWVkaWFFbHMubGVuZ3RoOyBpIDwgZTsgaSsrKSB7XG4gICAgICAgIHZhciBtZWRpYUVsID0gbWVkaWFFbHNbaV07IC8vIENoZWNrIGlmIGVsZW1lbnQgZXhpc3RzLCBoYXMgZ2V0QXR0cmlidXRlIGZ1bmMuXG5cbiAgICAgICAgaWYgKG1lZGlhRWwgJiYgbWVkaWFFbC5nZXRBdHRyaWJ1dGUpIHtcbiAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhpcyBwbGF5ZXIgaGFzbid0IGFscmVhZHkgYmVlbiBzZXQgdXAuXG4gICAgICAgICAgaWYgKG1lZGlhRWwucGxheWVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gbWVkaWFFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2V0dXAnKTsgLy8gQ2hlY2sgaWYgZGF0YS1zZXR1cCBhdHRyIGV4aXN0cy5cbiAgICAgICAgICAgIC8vIFdlIG9ubHkgYXV0by1zZXR1cCBpZiB0aGV5J3ZlIGFkZGVkIHRoZSBkYXRhLXNldHVwIGF0dHIuXG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIC8vIENyZWF0ZSBuZXcgdmlkZW8uanMgaW5zdGFuY2UuXG4gICAgICAgICAgICAgIHZpZGVvanMobWVkaWFFbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSAvLyBJZiBnZXRBdHRyaWJ1dGUgaXNuJ3QgZGVmaW5lZCwgd2UgbmVlZCB0byB3YWl0IGZvciB0aGUgRE9NLlxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXV0b1NldHVwVGltZW91dCgxKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSAvLyBObyB2aWRlb3Mgd2VyZSBmb3VuZCwgc28ga2VlcCBsb29waW5nIHVubGVzcyBwYWdlIGlzIGZpbmlzaGVkIGxvYWRpbmcuXG5cbiAgICB9IGVsc2UgaWYgKCFfd2luZG93TG9hZGVkKSB7XG4gICAgICBhdXRvU2V0dXBUaW1lb3V0KDEpO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFdhaXQgdW50aWwgdGhlIHBhZ2UgaXMgbG9hZGVkIGJlZm9yZSBydW5uaW5nIGF1dG9TZXR1cC4gVGhpcyB3aWxsIGJlIGNhbGxlZCBpblxuICAgKiBhdXRvU2V0dXAgaWYgYGhhc0xvYWRlZGAgcmV0dXJucyBmYWxzZS5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHdhaXRcbiAgICogICAgICAgIEhvdyBsb25nIHRvIHdhaXQgaW4gbXNcbiAgICpcbiAgICogQHBhcmFtIHttb2R1bGU6dmlkZW9qc30gW3Zqc11cbiAgICogICAgICAgIFRoZSB2aWRlb2pzIGxpYnJhcnkgZnVuY3Rpb25cbiAgICovXG5cblxuICBmdW5jdGlvbiBhdXRvU2V0dXBUaW1lb3V0KHdhaXQsIHZqcykge1xuICAgIGlmICh2anMpIHtcbiAgICAgIHZpZGVvanMgPSB2anM7XG4gICAgfVxuXG4gICAgd2luZG93JDEuc2V0VGltZW91dChhdXRvU2V0dXAsIHdhaXQpO1xuICB9XG5cbiAgaWYgKGlzUmVhbCgpICYmIGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICBfd2luZG93TG9hZGVkID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICAvKipcbiAgICAgKiBMaXN0ZW4gZm9yIHRoZSBsb2FkIGV2ZW50IG9uIHdpbmRvdywgYW5kIHNldCBfd2luZG93TG9hZGVkIHRvIHRydWUuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBsb2FkXG4gICAgICovXG4gICAgb25lKHdpbmRvdyQxLCAnbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF93aW5kb3dMb2FkZWQgPSB0cnVlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBmaWxlIHN0eWxlc2hlZXQuanNcbiAgICogQG1vZHVsZSBzdHlsZXNoZWV0XG4gICAqL1xuICAvKipcbiAgICogQ3JlYXRlIGEgRE9NIHN5bGUgZWxlbWVudCBnaXZlbiBhIGNsYXNzTmFtZSBmb3IgaXQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWVcbiAgICogICAgICAgIFRoZSBjbGFzc05hbWUgdG8gYWRkIHRvIHRoZSBjcmVhdGVkIHN0eWxlIGVsZW1lbnQuXG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICovXG5cbiAgdmFyIGNyZWF0ZVN0eWxlRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudChjbGFzc05hbWUpIHtcbiAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICByZXR1cm4gc3R5bGU7XG4gIH07XG4gIC8qKlxuICAgKiBBZGQgdGV4dCB0byBhIERPTSBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqICAgICAgICBUaGUgRWxlbWVudCB0byBhZGQgdGV4dCBjb250ZW50IHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29udGVudFxuICAgKiAgICAgICAgVGhlIHRleHQgdG8gYWRkIHRvIHRoZSBlbGVtZW50LlxuICAgKi9cblxuICB2YXIgc2V0VGV4dENvbnRlbnQgPSBmdW5jdGlvbiBzZXRUZXh0Q29udGVudChlbCwgY29udGVudCkge1xuICAgIGlmIChlbC5zdHlsZVNoZWV0KSB7XG4gICAgICBlbC5zdHlsZVNoZWV0LmNzc1RleHQgPSBjb250ZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAZmlsZSBmbi5qc1xuICAgKiBAbW9kdWxlIGZuXG4gICAqL1xuICAvKipcbiAgICogQmluZCAoYS5rLmEgcHJveHkgb3IgY29udGV4dCkuIEEgc2ltcGxlIG1ldGhvZCBmb3IgY2hhbmdpbmcgdGhlIGNvbnRleHQgb2ZcbiAgICogYSBmdW5jdGlvbi5cbiAgICpcbiAgICogSXQgYWxzbyBzdG9yZXMgYSB1bmlxdWUgaWQgb24gdGhlIGZ1bmN0aW9uIHNvIGl0IGNhbiBiZSBlYXNpbHkgcmVtb3ZlZCBmcm9tXG4gICAqIGV2ZW50cy5cbiAgICpcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBwYXJhbSAgICB7TWl4ZWR9IGNvbnRleHRcbiAgICogICAgICAgICAgIFRoZSBvYmplY3QgdG8gYmluZCBhcyBzY29wZS5cbiAgICpcbiAgICogQHBhcmFtICAgIHtGdW5jdGlvbn0gZm5cbiAgICogICAgICAgICAgIFRoZSBmdW5jdGlvbiB0byBiZSBib3VuZCB0byBhIHNjb3BlLlxuICAgKlxuICAgKiBAcGFyYW0gICAge251bWJlcn0gW3VpZF1cbiAgICogICAgICAgICAgIEFuIG9wdGlvbmFsIHVuaXF1ZSBJRCBmb3IgdGhlIGZ1bmN0aW9uIHRvIGJlIHNldFxuICAgKlxuICAgKiBAcmV0dXJuICAge0Z1bmN0aW9ufVxuICAgKiAgICAgICAgICAgVGhlIG5ldyBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgYm91bmQgaW50byB0aGUgY29udGV4dCBnaXZlblxuICAgKi9cblxuICB2YXIgYmluZCA9IGZ1bmN0aW9uIGJpbmQoY29udGV4dCwgZm4sIHVpZCkge1xuICAgIC8vIE1ha2Ugc3VyZSB0aGUgZnVuY3Rpb24gaGFzIGEgdW5pcXVlIElEXG4gICAgaWYgKCFmbi5ndWlkKSB7XG4gICAgICBmbi5ndWlkID0gbmV3R1VJRCgpO1xuICAgIH0gLy8gQ3JlYXRlIHRoZSBuZXcgZnVuY3Rpb24gdGhhdCBjaGFuZ2VzIHRoZSBjb250ZXh0XG5cblxuICAgIHZhciBib3VuZCA9IGZ1bmN0aW9uIGJvdW5kKCkge1xuICAgICAgcmV0dXJuIGZuLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gICAgfTsgLy8gQWxsb3cgZm9yIHRoZSBhYmlsaXR5IHRvIGluZGl2aWR1YWxpemUgdGhpcyBmdW5jdGlvblxuICAgIC8vIE5lZWRlZCBpbiB0aGUgY2FzZSB3aGVyZSBtdWx0aXBsZSBvYmplY3RzIG1pZ2h0IHNoYXJlIHRoZSBzYW1lIHByb3RvdHlwZVxuICAgIC8vIElGIGJvdGggaXRlbXMgYWRkIGFuIGV2ZW50IGxpc3RlbmVyIHdpdGggdGhlIHNhbWUgZnVuY3Rpb24sIHRoZW4geW91IHRyeSB0byByZW1vdmUganVzdCBvbmVcbiAgICAvLyBpdCB3aWxsIHJlbW92ZSBib3RoIGJlY2F1c2UgdGhleSBib3RoIGhhdmUgdGhlIHNhbWUgZ3VpZC5cbiAgICAvLyB3aGVuIHVzaW5nIHRoaXMsIHlvdSBuZWVkIHRvIHVzZSB0aGUgYmluZCBtZXRob2Qgd2hlbiB5b3UgcmVtb3ZlIHRoZSBsaXN0ZW5lciBhcyB3ZWxsLlxuICAgIC8vIGN1cnJlbnRseSB1c2VkIGluIHRleHQgdHJhY2tzXG5cblxuICAgIGJvdW5kLmd1aWQgPSB1aWQgPyB1aWQgKyAnXycgKyBmbi5ndWlkIDogZm4uZ3VpZDtcbiAgICByZXR1cm4gYm91bmQ7XG4gIH07XG4gIC8qKlxuICAgKiBXcmFwcyB0aGUgZ2l2ZW4gZnVuY3Rpb24sIGBmbmAsIHdpdGggYSBuZXcgZnVuY3Rpb24gdGhhdCBvbmx5IGludm9rZXMgYGZuYFxuICAgKiBhdCBtb3N0IG9uY2UgcGVyIGV2ZXJ5IGB3YWl0YCBtaWxsaXNlY29uZHMuXG4gICAqXG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW0gICAge0Z1bmN0aW9ufSBmblxuICAgKiAgICAgICAgICAgVGhlIGZ1bmN0aW9uIHRvIGJlIHRocm90dGxlZC5cbiAgICpcbiAgICogQHBhcmFtICAgIHtudW1iZXJ9ICAgd2FpdFxuICAgKiAgICAgICAgICAgVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgYnkgd2hpY2ggdG8gdGhyb3R0bGUuXG4gICAqXG4gICAqIEByZXR1cm4gICB7RnVuY3Rpb259XG4gICAqL1xuXG4gIHZhciB0aHJvdHRsZSA9IGZ1bmN0aW9uIHRocm90dGxlKGZuLCB3YWl0KSB7XG4gICAgdmFyIGxhc3QgPSBEYXRlLm5vdygpO1xuXG4gICAgdmFyIHRocm90dGxlZCA9IGZ1bmN0aW9uIHRocm90dGxlZCgpIHtcbiAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgICBpZiAobm93IC0gbGFzdCA+PSB3YWl0KSB7XG4gICAgICAgIGZuLmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKTtcbiAgICAgICAgbGFzdCA9IG5vdztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHRocm90dGxlZDtcbiAgfTtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICAgKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcbiAgICogaW52b2tlZC5cbiAgICpcbiAgICogSW5zcGlyZWQgYnkgbG9kYXNoIGFuZCB1bmRlcnNjb3JlIGltcGxlbWVudGF0aW9ucy5cbiAgICpcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBwYXJhbSAgICB7RnVuY3Rpb259IGZ1bmNcbiAgICogICAgICAgICAgIFRoZSBmdW5jdGlvbiB0byB3cmFwIHdpdGggZGVib3VuY2UgYmVoYXZpb3IuXG4gICAqXG4gICAqIEBwYXJhbSAgICB7bnVtYmVyfSB3YWl0XG4gICAqICAgICAgICAgICBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB3YWl0IGFmdGVyIHRoZSBsYXN0IGludm9jYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSAgICB7Ym9vbGVhbn0gW2ltbWVkaWF0ZV1cbiAgICogICAgICAgICAgIFdoZXRoZXIgb3Igbm90IHRvIGludm9rZSB0aGUgZnVuY3Rpb24gaW1tZWRpYXRlbHkgdXBvbiBjcmVhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtICAgIHtPYmplY3R9IFtjb250ZXh0PXdpbmRvd11cbiAgICogICAgICAgICAgIFRoZSBcImNvbnRleHRcIiBpbiB3aGljaCB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHNob3VsZCBkZWJvdW5jZS4gRm9yXG4gICAqICAgICAgICAgICBleGFtcGxlLCBpZiB0aGlzIGZ1bmN0aW9uIHNob3VsZCBiZSB0aWVkIHRvIGEgVmlkZW8uanMgcGxheWVyLFxuICAgKiAgICAgICAgICAgdGhlIHBsYXllciBjYW4gYmUgcGFzc2VkIGhlcmUuIEFsdGVybmF0aXZlbHksIGRlZmF1bHRzIHRvIHRoZVxuICAgKiAgICAgICAgICAgZ2xvYmFsIGB3aW5kb3dgIG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybiAgIHtGdW5jdGlvbn1cbiAgICogICAgICAgICAgIEEgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICAgKi9cblxuICB2YXIgZGVib3VuY2UgPSBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUsIGNvbnRleHQpIHtcbiAgICBpZiAoY29udGV4dCA9PT0gdm9pZCAwKSB7XG4gICAgICBjb250ZXh0ID0gd2luZG93JDE7XG4gICAgfVxuXG4gICAgdmFyIHRpbWVvdXQ7XG5cbiAgICB2YXIgY2FuY2VsID0gZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgICAgY29udGV4dC5jbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICB9O1xuICAgIC8qIGVzbGludC1kaXNhYmxlIGNvbnNpc3RlbnQtdGhpcyAqL1xuXG5cbiAgICB2YXIgZGVib3VuY2VkID0gZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgICAgIHZhciBfbGF0ZXIgPSBmdW5jdGlvbiBsYXRlcigpIHtcbiAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgIF9sYXRlciA9IG51bGw7XG5cbiAgICAgICAgaWYgKCFpbW1lZGlhdGUpIHtcbiAgICAgICAgICBmdW5jLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBpZiAoIXRpbWVvdXQgJiYgaW1tZWRpYXRlKSB7XG4gICAgICAgIGZ1bmMuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHQuY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgdGltZW91dCA9IGNvbnRleHQuc2V0VGltZW91dChfbGF0ZXIsIHdhaXQpO1xuICAgIH07XG4gICAgLyogZXNsaW50LWVuYWJsZSBjb25zaXN0ZW50LXRoaXMgKi9cblxuXG4gICAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgICByZXR1cm4gZGVib3VuY2VkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAZmlsZSBzcmMvanMvZXZlbnQtdGFyZ2V0LmpzXG4gICAqL1xuICAvKipcbiAgICogYEV2ZW50VGFyZ2V0YCBpcyBhIGNsYXNzIHRoYXQgY2FuIGhhdmUgdGhlIHNhbWUgQVBJIGFzIHRoZSBET00gYEV2ZW50VGFyZ2V0YC4gSXRcbiAgICogYWRkcyBzaG9ydGhhbmQgZnVuY3Rpb25zIHRoYXQgd3JhcCBhcm91bmQgbGVuZ3RoeSBmdW5jdGlvbnMuIEZvciBleGFtcGxlOlxuICAgKiB0aGUgYG9uYCBmdW5jdGlvbiBpcyBhIHdyYXBwZXIgYXJvdW5kIGBhZGRFdmVudExpc3RlbmVyYC5cbiAgICpcbiAgICogQHNlZSBbRXZlbnRUYXJnZXQgU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0yLUV2ZW50cy9ldmVudHMuaHRtbCNFdmVudHMtRXZlbnRUYXJnZXR9XG4gICAqIEBjbGFzcyBFdmVudFRhcmdldFxuICAgKi9cblxuICB2YXIgRXZlbnRUYXJnZXQgPSBmdW5jdGlvbiBFdmVudFRhcmdldCgpIHt9O1xuICAvKipcbiAgICogQSBDdXN0b20gRE9NIGV2ZW50LlxuICAgKlxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBFdmVudFRhcmdldH5FdmVudFxuICAgKiBAc2VlIFtQcm9wZXJ0aWVzXXtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ3VzdG9tRXZlbnR9XG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbGwgZXZlbnQgbGlzdGVuZXJzIHNob3VsZCBmb2xsb3cgdGhlIGZvbGxvd2luZyBmb3JtYXQuXG4gICAqXG4gICAqIEBjYWxsYmFjayBFdmVudFRhcmdldH5FdmVudExpc3RlbmVyXG4gICAqIEB0aGlzIHtFdmVudFRhcmdldH1cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIHRoZSBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGlzIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbaGFzaF1cbiAgICogICAgICAgIGhhc2ggb2YgZGF0YSBzZW50IGR1cmluZyB0aGUgZXZlbnRcbiAgICovXG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCBjb250YWluaW5nIGV2ZW50IG5hbWVzIGFzIGtleXMgYW5kIGJvb2xlYW5zIGFzIHZhbHVlcy5cbiAgICpcbiAgICogPiBOT1RFOiBJZiBhbiBldmVudCBuYW1lIGlzIHNldCB0byBhIHRydWUgdmFsdWUgaGVyZSB7QGxpbmsgRXZlbnRUYXJnZXQjdHJpZ2dlcn1cbiAgICogICAgICAgICB3aWxsIGhhdmUgZXh0cmEgZnVuY3Rpb25hbGl0eS4gU2VlIHRoYXQgZnVuY3Rpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAqXG4gICAqIEBwcm9wZXJ0eSBFdmVudFRhcmdldC5wcm90b3R5cGUuYWxsb3dlZEV2ZW50c19cbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICBFdmVudFRhcmdldC5wcm90b3R5cGUuYWxsb3dlZEV2ZW50c18gPSB7fTtcbiAgLyoqXG4gICAqIEFkZHMgYW4gYGV2ZW50IGxpc3RlbmVyYCB0byBhbiBpbnN0YW5jZSBvZiBhbiBgRXZlbnRUYXJnZXRgLiBBbiBgZXZlbnQgbGlzdGVuZXJgIGlzIGFcbiAgICogZnVuY3Rpb24gdGhhdCB3aWxsIGdldCBjYWxsZWQgd2hlbiBhbiBldmVudCB3aXRoIGEgY2VydGFpbiBuYW1lIGdldHMgdHJpZ2dlcmVkLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gdHlwZVxuICAgKiAgICAgICAgQW4gZXZlbnQgbmFtZSBvciBhbiBhcnJheSBvZiBldmVudCBuYW1lcy5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudExpc3RlbmVyfSBmblxuICAgKiAgICAgICAgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2l0aCBgRXZlbnRUYXJnZXRgc1xuICAgKi9cblxuICBFdmVudFRhcmdldC5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICAvLyBSZW1vdmUgdGhlIGFkZEV2ZW50TGlzdGVuZXIgYWxpYXMgYmVmb3JlIGNhbGxpbmcgRXZlbnRzLm9uXG4gICAgLy8gc28gd2UgZG9uJ3QgZ2V0IGludG8gYW4gaW5maW5pdGUgdHlwZSBsb29wXG4gICAgdmFyIGFlbCA9IHRoaXMuYWRkRXZlbnRMaXN0ZW5lcjtcblxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgb24odGhpcywgdHlwZSwgZm4pO1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciA9IGFlbDtcbiAgfTtcbiAgLyoqXG4gICAqIEFuIGFsaWFzIG9mIHtAbGluayBFdmVudFRhcmdldCNvbn0uIEFsbG93cyBgRXZlbnRUYXJnZXRgIHRvIG1pbWljXG4gICAqIHRoZSBzdGFuZGFyZCBET00gQVBJLlxuICAgKlxuICAgKiBAZnVuY3Rpb25cbiAgICogQHNlZSB7QGxpbmsgRXZlbnRUYXJnZXQjb259XG4gICAqL1xuXG5cbiAgRXZlbnRUYXJnZXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBFdmVudFRhcmdldC5wcm90b3R5cGUub247XG4gIC8qKlxuICAgKiBSZW1vdmVzIGFuIGBldmVudCBsaXN0ZW5lcmAgZm9yIGEgc3BlY2lmaWMgZXZlbnQgZnJvbSBhbiBpbnN0YW5jZSBvZiBgRXZlbnRUYXJnZXRgLlxuICAgKiBUaGlzIG1ha2VzIGl0IHNvIHRoYXQgdGhlIGBldmVudCBsaXN0ZW5lcmAgd2lsbCBubyBsb25nZXIgZ2V0IGNhbGxlZCB3aGVuIHRoZVxuICAgKiBuYW1lZCBldmVudCBoYXBwZW5zLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gdHlwZVxuICAgKiAgICAgICAgQW4gZXZlbnQgbmFtZSBvciBhbiBhcnJheSBvZiBldmVudCBuYW1lcy5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudExpc3RlbmVyfSBmblxuICAgKiAgICAgICAgVGhlIGZ1bmN0aW9uIHRvIHJlbW92ZS5cbiAgICovXG5cbiAgRXZlbnRUYXJnZXQucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xuICAgIG9mZih0aGlzLCB0eXBlLCBmbik7XG4gIH07XG4gIC8qKlxuICAgKiBBbiBhbGlhcyBvZiB7QGxpbmsgRXZlbnRUYXJnZXQjb2ZmfS4gQWxsb3dzIGBFdmVudFRhcmdldGAgdG8gbWltaWNcbiAgICogdGhlIHN0YW5kYXJkIERPTSBBUEkuXG4gICAqXG4gICAqIEBmdW5jdGlvblxuICAgKiBAc2VlIHtAbGluayBFdmVudFRhcmdldCNvZmZ9XG4gICAqL1xuXG5cbiAgRXZlbnRUYXJnZXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBFdmVudFRhcmdldC5wcm90b3R5cGUub2ZmO1xuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiB3aWxsIGFkZCBhbiBgZXZlbnQgbGlzdGVuZXJgIHRoYXQgZ2V0cyB0cmlnZ2VyZWQgb25seSBvbmNlLiBBZnRlciB0aGVcbiAgICogZmlyc3QgdHJpZ2dlciBpdCB3aWxsIGdldCByZW1vdmVkLiBUaGlzIGlzIGxpa2UgYWRkaW5nIGFuIGBldmVudCBsaXN0ZW5lcmBcbiAgICogd2l0aCB7QGxpbmsgRXZlbnRUYXJnZXQjb259IHRoYXQgY2FsbHMge0BsaW5rIEV2ZW50VGFyZ2V0I29mZn0gb24gaXRzZWxmLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gdHlwZVxuICAgKiAgICAgICAgQW4gZXZlbnQgbmFtZSBvciBhbiBhcnJheSBvZiBldmVudCBuYW1lcy5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudExpc3RlbmVyfSBmblxuICAgKiAgICAgICAgVGhlIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbmNlIGZvciBlYWNoIGV2ZW50IG5hbWUuXG4gICAqL1xuXG4gIEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5vbmUgPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICAvLyBSZW1vdmUgdGhlIGFkZEV2ZW50TGlzdGVuZXIgYWxpYWxpbmcgRXZlbnRzLm9uXG4gICAgLy8gc28gd2UgZG9uJ3QgZ2V0IGludG8gYW4gaW5maW5pdGUgdHlwZSBsb29wXG4gICAgdmFyIGFlbCA9IHRoaXMuYWRkRXZlbnRMaXN0ZW5lcjtcblxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgb25lKHRoaXMsIHR5cGUsIGZuKTtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIgPSBhZWw7XG4gIH07XG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIGNhdXNlcyBhbiBldmVudCB0byBoYXBwZW4uIFRoaXMgd2lsbCB0aGVuIGNhdXNlIGFueSBgZXZlbnQgbGlzdGVuZXJzYFxuICAgKiB0aGF0IGFyZSB3YWl0aW5nIGZvciB0aGF0IGV2ZW50LCB0byBnZXQgY2FsbGVkLiBJZiB0aGVyZSBhcmUgbm8gYGV2ZW50IGxpc3RlbmVyc2BcbiAgICogZm9yIGFuIGV2ZW50IHRoZW4gbm90aGluZyB3aWxsIGhhcHBlbi5cbiAgICpcbiAgICogSWYgdGhlIG5hbWUgb2YgdGhlIGBFdmVudGAgdGhhdCBpcyBiZWluZyB0cmlnZ2VyZWQgaXMgaW4gYEV2ZW50VGFyZ2V0LmFsbG93ZWRFdmVudHNfYC5cbiAgICogVHJpZ2dlciB3aWxsIGFsc28gY2FsbCB0aGUgYG9uYCArIGB1cHBlcmNhc2VFdmVudE5hbWVgIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKiAnY2xpY2snIGlzIGluIGBFdmVudFRhcmdldC5hbGxvd2VkRXZlbnRzX2AsIHNvLCB0cmlnZ2VyIHdpbGwgYXR0ZW1wdCB0byBjYWxsXG4gICAqIGBvbkNsaWNrYCBpZiBpdCBleGlzdHMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfEV2ZW50VGFyZ2V0fkV2ZW50fE9iamVjdH0gZXZlbnRcbiAgICogICAgICAgIFRoZSBuYW1lIG9mIHRoZSBldmVudCwgYW4gYEV2ZW50YCwgb3IgYW4gb2JqZWN0IHdpdGggYSBrZXkgb2YgdHlwZSBzZXQgdG9cbiAgICogICAgICAgIGFuIGV2ZW50IG5hbWUuXG4gICAqL1xuXG5cbiAgRXZlbnRUYXJnZXQucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgdHlwZSA9IGV2ZW50LnR5cGUgfHwgZXZlbnQ7IC8vIGRlcHJlY2F0aW9uXG4gICAgLy8gSW4gYSBmdXR1cmUgdmVyc2lvbiB3ZSBzaG91bGQgZGVmYXVsdCB0YXJnZXQgdG8gYHRoaXNgXG4gICAgLy8gc2ltaWxhciB0byBob3cgd2UgZGVmYXVsdCB0aGUgdGFyZ2V0IHRvIGBlbGVtYCBpblxuICAgIC8vIGBFdmVudHMudHJpZ2dlcmAuIFJpZ2h0IG5vdyB0aGUgZGVmYXVsdCBgdGFyZ2V0YCB3aWxsIGJlXG4gICAgLy8gYGRvY3VtZW50YCBkdWUgdG8gdGhlIGBFdmVudC5maXhFdmVudGAgY2FsbC5cblxuICAgIGlmICh0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBldmVudCA9IHtcbiAgICAgICAgdHlwZTogdHlwZVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBldmVudCA9IGZpeEV2ZW50KGV2ZW50KTtcblxuICAgIGlmICh0aGlzLmFsbG93ZWRFdmVudHNfW3R5cGVdICYmIHRoaXNbJ29uJyArIHR5cGVdKSB7XG4gICAgICB0aGlzWydvbicgKyB0eXBlXShldmVudCk7XG4gICAgfVxuXG4gICAgdHJpZ2dlcih0aGlzLCBldmVudCk7XG4gIH07XG4gIC8qKlxuICAgKiBBbiBhbGlhcyBvZiB7QGxpbmsgRXZlbnRUYXJnZXQjdHJpZ2dlcn0uIEFsbG93cyBgRXZlbnRUYXJnZXRgIHRvIG1pbWljXG4gICAqIHRoZSBzdGFuZGFyZCBET00gQVBJLlxuICAgKlxuICAgKiBAZnVuY3Rpb25cbiAgICogQHNlZSB7QGxpbmsgRXZlbnRUYXJnZXQjdHJpZ2dlcn1cbiAgICovXG5cblxuICBFdmVudFRhcmdldC5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudCA9IEV2ZW50VGFyZ2V0LnByb3RvdHlwZS50cmlnZ2VyO1xuICB2YXIgRVZFTlRfTUFQO1xuXG4gIEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5xdWV1ZVRyaWdnZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgLy8gb25seSBzZXQgdXAgRVZFTlRfTUFQIGlmIGl0J2xsIGJlIHVzZWRcbiAgICBpZiAoIUVWRU5UX01BUCkge1xuICAgICAgRVZFTlRfTUFQID0gbmV3IE1hcCgpO1xuICAgIH1cblxuICAgIHZhciB0eXBlID0gZXZlbnQudHlwZSB8fCBldmVudDtcbiAgICB2YXIgbWFwID0gRVZFTlRfTUFQLmdldCh0aGlzKTtcblxuICAgIGlmICghbWFwKSB7XG4gICAgICBtYXAgPSBuZXcgTWFwKCk7XG4gICAgICBFVkVOVF9NQVAuc2V0KHRoaXMsIG1hcCk7XG4gICAgfVxuXG4gICAgdmFyIG9sZFRpbWVvdXQgPSBtYXAuZ2V0KHR5cGUpO1xuICAgIG1hcC5kZWxldGUodHlwZSk7XG4gICAgd2luZG93JDEuY2xlYXJUaW1lb3V0KG9sZFRpbWVvdXQpO1xuICAgIHZhciB0aW1lb3V0ID0gd2luZG93JDEuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBpZiB3ZSBjbGVhcmVkIG91dCBhbGwgdGltZW91dHMgZm9yIHRoZSBjdXJyZW50IHRhcmdldCwgZGVsZXRlIGl0cyBtYXBcbiAgICAgIGlmIChtYXAuc2l6ZSA9PT0gMCkge1xuICAgICAgICBtYXAgPSBudWxsO1xuICAgICAgICBFVkVOVF9NQVAuZGVsZXRlKF90aGlzKTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMudHJpZ2dlcihldmVudCk7XG4gICAgfSwgMCk7XG4gICAgbWFwLnNldCh0eXBlLCB0aW1lb3V0KTtcbiAgfTtcblxuICAvKipcbiAgICogQGZpbGUgbWl4aW5zL2V2ZW50ZWQuanNcbiAgICogQG1vZHVsZSBldmVudGVkXG4gICAqL1xuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCBhbiBvYmplY3QgaGFzIGhhZCB0aGUgZXZlbnRlZCBtaXhpbiBhcHBsaWVkLlxuICAgKlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IG9iamVjdFxuICAgKiAgICAgICAgIEFuIG9iamVjdCB0byB0ZXN0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIFdoZXRoZXIgb3Igbm90IHRoZSBvYmplY3QgYXBwZWFycyB0byBiZSBldmVudGVkLlxuICAgKi9cblxuICB2YXIgaXNFdmVudGVkID0gZnVuY3Rpb24gaXNFdmVudGVkKG9iamVjdCkge1xuICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBFdmVudFRhcmdldCB8fCAhIW9iamVjdC5ldmVudEJ1c0VsXyAmJiBbJ29uJywgJ29uZScsICdvZmYnLCAndHJpZ2dlciddLmV2ZXJ5KGZ1bmN0aW9uIChrKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIG9iamVjdFtrXSA9PT0gJ2Z1bmN0aW9uJztcbiAgICB9KTtcbiAgfTtcbiAgLyoqXG4gICAqIEFkZHMgYSBjYWxsYmFjayB0byBydW4gYWZ0ZXIgdGhlIGV2ZW50ZWQgbWl4aW4gYXBwbGllZC5cbiAgICpcbiAgICogQHBhcmFtICB7T2JqZWN0fSBvYmplY3RcbiAgICogICAgICAgICBBbiBvYmplY3QgdG8gQWRkXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKiAgICAgICAgIFRoZSBjYWxsYmFjayB0byBydW4uXG4gICAqL1xuXG5cbiAgdmFyIGFkZEV2ZW50ZWRDYWxsYmFjayA9IGZ1bmN0aW9uIGFkZEV2ZW50ZWRDYWxsYmFjayh0YXJnZXQsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGlzRXZlbnRlZCh0YXJnZXQpKSB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXRhcmdldC5ldmVudGVkQ2FsbGJhY2tzKSB7XG4gICAgICAgIHRhcmdldC5ldmVudGVkQ2FsbGJhY2tzID0gW107XG4gICAgICB9XG5cbiAgICAgIHRhcmdldC5ldmVudGVkQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFdoZXRoZXIgYSB2YWx1ZSBpcyBhIHZhbGlkIGV2ZW50IHR5cGUgLSBub24tZW1wdHkgc3RyaW5nIG9yIGFycmF5LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0gIHtzdHJpbmd8QXJyYXl9IHR5cGVcbiAgICogICAgICAgICBUaGUgdHlwZSB2YWx1ZSB0byB0ZXN0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIFdoZXRoZXIgb3Igbm90IHRoZSB0eXBlIGlzIGEgdmFsaWQgZXZlbnQgdHlwZS5cbiAgICovXG5cblxuICB2YXIgaXNWYWxpZEV2ZW50VHlwZSA9IGZ1bmN0aW9uIGlzVmFsaWRFdmVudFR5cGUodHlwZSkge1xuICAgIHJldHVybiAoLy8gVGhlIHJlZ2V4IGhlcmUgdmVyaWZpZXMgdGhhdCB0aGUgYHR5cGVgIGNvbnRhaW5zIGF0IGxlYXN0IG9uZSBub24tXG4gICAgICAvLyB3aGl0ZXNwYWNlIGNoYXJhY3Rlci5cbiAgICAgIHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyAmJiAvXFxTLy50ZXN0KHR5cGUpIHx8IEFycmF5LmlzQXJyYXkodHlwZSkgJiYgISF0eXBlLmxlbmd0aFxuICAgICk7XG4gIH07XG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgYSB2YWx1ZSB0byBkZXRlcm1pbmUgaWYgaXQgaXMgYSB2YWxpZCBldmVudCB0YXJnZXQuIFRocm93cyBpZiBub3QuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0aHJvd3Mge0Vycm9yfVxuICAgKiAgICAgICAgIElmIHRoZSB0YXJnZXQgZG9lcyBub3QgYXBwZWFyIHRvIGJlIGEgdmFsaWQgZXZlbnQgdGFyZ2V0LlxuICAgKlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IHRhcmdldFxuICAgKiAgICAgICAgIFRoZSBvYmplY3QgdG8gdGVzdC5cbiAgICovXG5cblxuICB2YXIgdmFsaWRhdGVUYXJnZXQgPSBmdW5jdGlvbiB2YWxpZGF0ZVRhcmdldCh0YXJnZXQpIHtcbiAgICBpZiAoIXRhcmdldC5ub2RlTmFtZSAmJiAhaXNFdmVudGVkKHRhcmdldCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0YXJnZXQ7IG11c3QgYmUgYSBET00gbm9kZSBvciBldmVudGVkIG9iamVjdC4nKTtcbiAgICB9XG4gIH07XG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgYSB2YWx1ZSB0byBkZXRlcm1pbmUgaWYgaXQgaXMgYSB2YWxpZCBldmVudCB0YXJnZXQuIFRocm93cyBpZiBub3QuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0aHJvd3Mge0Vycm9yfVxuICAgKiAgICAgICAgIElmIHRoZSB0eXBlIGRvZXMgbm90IGFwcGVhciB0byBiZSBhIHZhbGlkIGV2ZW50IHR5cGUuXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ3xBcnJheX0gdHlwZVxuICAgKiAgICAgICAgIFRoZSB0eXBlIHRvIHRlc3QuXG4gICAqL1xuXG5cbiAgdmFyIHZhbGlkYXRlRXZlbnRUeXBlID0gZnVuY3Rpb24gdmFsaWRhdGVFdmVudFR5cGUodHlwZSkge1xuICAgIGlmICghaXNWYWxpZEV2ZW50VHlwZSh0eXBlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGV2ZW50IHR5cGU7IG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nIG9yIGFycmF5LicpO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFZhbGlkYXRlcyBhIHZhbHVlIHRvIGRldGVybWluZSBpZiBpdCBpcyBhIHZhbGlkIGxpc3RlbmVyLiBUaHJvd3MgaWYgbm90LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdGhyb3dzIHtFcnJvcn1cbiAgICogICAgICAgICBJZiB0aGUgbGlzdGVuZXIgaXMgbm90IGEgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBsaXN0ZW5lclxuICAgKiAgICAgICAgIFRoZSBsaXN0ZW5lciB0byB0ZXN0LlxuICAgKi9cblxuXG4gIHZhciB2YWxpZGF0ZUxpc3RlbmVyID0gZnVuY3Rpb24gdmFsaWRhdGVMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBsaXN0ZW5lcjsgbXVzdCBiZSBhIGZ1bmN0aW9uLicpO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFRha2VzIGFuIGFycmF5IG9mIGFyZ3VtZW50cyBnaXZlbiB0byBgb24oKWAgb3IgYG9uZSgpYCwgdmFsaWRhdGVzIHRoZW0sIGFuZFxuICAgKiBub3JtYWxpemVzIHRoZW0gaW50byBhbiBvYmplY3QuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSAge09iamVjdH0gc2VsZlxuICAgKiAgICAgICAgIFRoZSBldmVudGVkIG9iamVjdCBvbiB3aGljaCBgb24oKWAgb3IgYG9uZSgpYCB3YXMgY2FsbGVkLiBUaGlzXG4gICAqICAgICAgICAgb2JqZWN0IHdpbGwgYmUgYm91bmQgYXMgdGhlIGB0aGlzYCB2YWx1ZSBmb3IgdGhlIGxpc3RlbmVyLlxuICAgKlxuICAgKiBAcGFyYW0gIHtBcnJheX0gYXJnc1xuICAgKiAgICAgICAgIEFuIGFycmF5IG9mIGFyZ3VtZW50cyBwYXNzZWQgdG8gYG9uKClgIG9yIGBvbmUoKWAuXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICogICAgICAgICBBbiBvYmplY3QgY29udGFpbmluZyB1c2VmdWwgdmFsdWVzIGZvciBgb24oKWAgb3IgYG9uZSgpYCBjYWxscy5cbiAgICovXG5cblxuICB2YXIgbm9ybWFsaXplTGlzdGVuQXJncyA9IGZ1bmN0aW9uIG5vcm1hbGl6ZUxpc3RlbkFyZ3Moc2VsZiwgYXJncykge1xuICAgIC8vIElmIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzIGlzIGxlc3MgdGhhbiAzLCB0aGUgdGFyZ2V0IGlzIGFsd2F5cyB0aGVcbiAgICAvLyBldmVudGVkIG9iamVjdCBpdHNlbGYuXG4gICAgdmFyIGlzVGFyZ2V0aW5nU2VsZiA9IGFyZ3MubGVuZ3RoIDwgMyB8fCBhcmdzWzBdID09PSBzZWxmIHx8IGFyZ3NbMF0gPT09IHNlbGYuZXZlbnRCdXNFbF87XG4gICAgdmFyIHRhcmdldDtcbiAgICB2YXIgdHlwZTtcbiAgICB2YXIgbGlzdGVuZXI7XG5cbiAgICBpZiAoaXNUYXJnZXRpbmdTZWxmKSB7XG4gICAgICB0YXJnZXQgPSBzZWxmLmV2ZW50QnVzRWxfOyAvLyBEZWFsIHdpdGggY2FzZXMgd2hlcmUgd2UgZ290IDMgYXJndW1lbnRzLCBidXQgd2UgYXJlIHN0aWxsIGxpc3RlbmluZyB0b1xuICAgICAgLy8gdGhlIGV2ZW50ZWQgb2JqZWN0IGl0c2VsZi5cblxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID49IDMpIHtcbiAgICAgICAgYXJncy5zaGlmdCgpO1xuICAgICAgfVxuXG4gICAgICB0eXBlID0gYXJnc1swXTtcbiAgICAgIGxpc3RlbmVyID0gYXJnc1sxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0ID0gYXJnc1swXTtcbiAgICAgIHR5cGUgPSBhcmdzWzFdO1xuICAgICAgbGlzdGVuZXIgPSBhcmdzWzJdO1xuICAgIH1cblxuICAgIHZhbGlkYXRlVGFyZ2V0KHRhcmdldCk7XG4gICAgdmFsaWRhdGVFdmVudFR5cGUodHlwZSk7XG4gICAgdmFsaWRhdGVMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgbGlzdGVuZXIgPSBiaW5kKHNlbGYsIGxpc3RlbmVyKTtcbiAgICByZXR1cm4ge1xuICAgICAgaXNUYXJnZXRpbmdTZWxmOiBpc1RhcmdldGluZ1NlbGYsXG4gICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgIHR5cGU6IHR5cGUsXG4gICAgICBsaXN0ZW5lcjogbGlzdGVuZXJcbiAgICB9O1xuICB9O1xuICAvKipcbiAgICogQWRkcyB0aGUgbGlzdGVuZXIgdG8gdGhlIGV2ZW50IHR5cGUocykgb24gdGhlIHRhcmdldCwgbm9ybWFsaXppbmcgZm9yXG4gICAqIHRoZSB0eXBlIG9mIHRhcmdldC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtICB7RWxlbWVudHxPYmplY3R9IHRhcmdldFxuICAgKiAgICAgICAgIEEgRE9NIG5vZGUgb3IgZXZlbnRlZCBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gbWV0aG9kXG4gICAqICAgICAgICAgVGhlIGV2ZW50IGJpbmRpbmcgbWV0aG9kIHRvIHVzZSAoXCJvblwiIG9yIFwib25lXCIpLlxuICAgKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd8QXJyYXl9IHR5cGVcbiAgICogICAgICAgICBPbmUgb3IgbW9yZSBldmVudCB0eXBlKHMpLlxuICAgKlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gbGlzdGVuZXJcbiAgICogICAgICAgICBBIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICAgKi9cblxuXG4gIHZhciBsaXN0ZW4gPSBmdW5jdGlvbiBsaXN0ZW4odGFyZ2V0LCBtZXRob2QsIHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgdmFsaWRhdGVUYXJnZXQodGFyZ2V0KTtcblxuICAgIGlmICh0YXJnZXQubm9kZU5hbWUpIHtcbiAgICAgIEV2ZW50c1ttZXRob2RdKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRbbWV0aG9kXSh0eXBlLCBsaXN0ZW5lcik7XG4gICAgfVxuICB9O1xuICAvKipcbiAgICogQ29udGFpbnMgbWV0aG9kcyB0aGF0IHByb3ZpZGUgZXZlbnQgY2FwYWJpbGl0aWVzIHRvIGFuIG9iamVjdCB3aGljaCBpcyBwYXNzZWRcbiAgICogdG8ge0BsaW5rIG1vZHVsZTpldmVudGVkfGV2ZW50ZWR9LlxuICAgKlxuICAgKiBAbWl4aW4gRXZlbnRlZE1peGluXG4gICAqL1xuXG5cbiAgdmFyIEV2ZW50ZWRNaXhpbiA9IHtcbiAgICAvKipcbiAgICAgKiBBZGQgYSBsaXN0ZW5lciB0byBhbiBldmVudCAob3IgZXZlbnRzKSBvbiB0aGlzIG9iamVjdCBvciBhbm90aGVyIGV2ZW50ZWRcbiAgICAgKiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd8QXJyYXl8RWxlbWVudHxPYmplY3R9IHRhcmdldE9yVHlwZVxuICAgICAqICAgICAgICAgSWYgdGhpcyBpcyBhIHN0cmluZyBvciBhcnJheSwgaXQgcmVwcmVzZW50cyB0aGUgZXZlbnQgdHlwZShzKVxuICAgICAqICAgICAgICAgdGhhdCB3aWxsIHRyaWdnZXIgdGhlIGxpc3RlbmVyLlxuICAgICAqXG4gICAgICogICAgICAgICBBbm90aGVyIGV2ZW50ZWQgb2JqZWN0IGNhbiBiZSBwYXNzZWQgaGVyZSBpbnN0ZWFkLCB3aGljaCB3aWxsXG4gICAgICogICAgICAgICBjYXVzZSB0aGUgbGlzdGVuZXIgdG8gbGlzdGVuIGZvciBldmVudHMgb24gX3RoYXRfIG9iamVjdC5cbiAgICAgKlxuICAgICAqICAgICAgICAgSW4gZWl0aGVyIGNhc2UsIHRoZSBsaXN0ZW5lcidzIGB0aGlzYCB2YWx1ZSB3aWxsIGJlIGJvdW5kIHRvXG4gICAgICogICAgICAgICB0aGlzIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge3N0cmluZ3xBcnJheXxGdW5jdGlvbn0gdHlwZU9yTGlzdGVuZXJcbiAgICAgKiAgICAgICAgIElmIHRoZSBmaXJzdCBhcmd1bWVudCB3YXMgYSBzdHJpbmcgb3IgYXJyYXksIHRoaXMgc2hvdWxkIGJlIHRoZVxuICAgICAqICAgICAgICAgbGlzdGVuZXIgZnVuY3Rpb24uIE90aGVyd2lzZSwgdGhpcyBpcyBhIHN0cmluZyBvciBhcnJheSBvZiBldmVudFxuICAgICAqICAgICAgICAgdHlwZShzKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBbbGlzdGVuZXJdXG4gICAgICogICAgICAgICBJZiB0aGUgZmlyc3QgYXJndW1lbnQgd2FzIGFub3RoZXIgZXZlbnRlZCBvYmplY3QsIHRoaXMgd2lsbCBiZVxuICAgICAqICAgICAgICAgdGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIG9uOiBmdW5jdGlvbiBvbiQkMSgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICB2YXIgX25vcm1hbGl6ZUxpc3RlbkFyZ3MgPSBub3JtYWxpemVMaXN0ZW5BcmdzKHRoaXMsIGFyZ3MpLFxuICAgICAgICAgIGlzVGFyZ2V0aW5nU2VsZiA9IF9ub3JtYWxpemVMaXN0ZW5BcmdzLmlzVGFyZ2V0aW5nU2VsZixcbiAgICAgICAgICB0YXJnZXQgPSBfbm9ybWFsaXplTGlzdGVuQXJncy50YXJnZXQsXG4gICAgICAgICAgdHlwZSA9IF9ub3JtYWxpemVMaXN0ZW5BcmdzLnR5cGUsXG4gICAgICAgICAgbGlzdGVuZXIgPSBfbm9ybWFsaXplTGlzdGVuQXJncy5saXN0ZW5lcjtcblxuICAgICAgbGlzdGVuKHRhcmdldCwgJ29uJywgdHlwZSwgbGlzdGVuZXIpOyAvLyBJZiB0aGlzIG9iamVjdCBpcyBsaXN0ZW5pbmcgdG8gYW5vdGhlciBldmVudGVkIG9iamVjdC5cblxuICAgICAgaWYgKCFpc1RhcmdldGluZ1NlbGYpIHtcbiAgICAgICAgLy8gSWYgdGhpcyBvYmplY3QgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgbGlzdGVuZXIuXG4gICAgICAgIHZhciByZW1vdmVMaXN0ZW5lck9uRGlzcG9zZSA9IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyT25EaXNwb3NlKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5vZmYodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lcik7XG4gICAgICAgIH07IC8vIFVzZSB0aGUgc2FtZSBmdW5jdGlvbiBJRCBhcyB0aGUgbGlzdGVuZXIgc28gd2UgY2FuIHJlbW92ZSBpdCBsYXRlciBpdFxuICAgICAgICAvLyB1c2luZyB0aGUgSUQgb2YgdGhlIG9yaWdpbmFsIGxpc3RlbmVyLlxuXG5cbiAgICAgICAgcmVtb3ZlTGlzdGVuZXJPbkRpc3Bvc2UuZ3VpZCA9IGxpc3RlbmVyLmd1aWQ7IC8vIEFkZCBhIGxpc3RlbmVyIHRvIHRoZSB0YXJnZXQncyBkaXNwb3NlIGV2ZW50IGFzIHdlbGwuIFRoaXMgZW5zdXJlc1xuICAgICAgICAvLyB0aGF0IGlmIHRoZSB0YXJnZXQgaXMgZGlzcG9zZWQgQkVGT1JFIHRoaXMgb2JqZWN0LCB3ZSByZW1vdmUgdGhlXG4gICAgICAgIC8vIHJlbW92YWwgbGlzdGVuZXIgdGhhdCB3YXMganVzdCBhZGRlZC4gT3RoZXJ3aXNlLCB3ZSBjcmVhdGUgYSBtZW1vcnkgbGVhay5cblxuICAgICAgICB2YXIgcmVtb3ZlUmVtb3Zlck9uVGFyZ2V0RGlzcG9zZSA9IGZ1bmN0aW9uIHJlbW92ZVJlbW92ZXJPblRhcmdldERpc3Bvc2UoKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm9mZignZGlzcG9zZScsIHJlbW92ZUxpc3RlbmVyT25EaXNwb3NlKTtcbiAgICAgICAgfTsgLy8gVXNlIHRoZSBzYW1lIGZ1bmN0aW9uIElEIGFzIHRoZSBsaXN0ZW5lciBzbyB3ZSBjYW4gcmVtb3ZlIGl0IGxhdGVyXG4gICAgICAgIC8vIGl0IHVzaW5nIHRoZSBJRCBvZiB0aGUgb3JpZ2luYWwgbGlzdGVuZXIuXG5cblxuICAgICAgICByZW1vdmVSZW1vdmVyT25UYXJnZXREaXNwb3NlLmd1aWQgPSBsaXN0ZW5lci5ndWlkO1xuICAgICAgICBsaXN0ZW4odGhpcywgJ29uJywgJ2Rpc3Bvc2UnLCByZW1vdmVMaXN0ZW5lck9uRGlzcG9zZSk7XG4gICAgICAgIGxpc3Rlbih0YXJnZXQsICdvbicsICdkaXNwb3NlJywgcmVtb3ZlUmVtb3Zlck9uVGFyZ2V0RGlzcG9zZSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFkZCBhIGxpc3RlbmVyIHRvIGFuIGV2ZW50IChvciBldmVudHMpIG9uIHRoaXMgb2JqZWN0IG9yIGFub3RoZXIgZXZlbnRlZFxuICAgICAqIG9iamVjdC4gVGhlIGxpc3RlbmVyIHdpbGwgb25seSBiZSBjYWxsZWQgb25jZSBhbmQgdGhlbiByZW1vdmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7c3RyaW5nfEFycmF5fEVsZW1lbnR8T2JqZWN0fSB0YXJnZXRPclR5cGVcbiAgICAgKiAgICAgICAgIElmIHRoaXMgaXMgYSBzdHJpbmcgb3IgYXJyYXksIGl0IHJlcHJlc2VudHMgdGhlIGV2ZW50IHR5cGUocylcbiAgICAgKiAgICAgICAgIHRoYXQgd2lsbCB0cmlnZ2VyIHRoZSBsaXN0ZW5lci5cbiAgICAgKlxuICAgICAqICAgICAgICAgQW5vdGhlciBldmVudGVkIG9iamVjdCBjYW4gYmUgcGFzc2VkIGhlcmUgaW5zdGVhZCwgd2hpY2ggd2lsbFxuICAgICAqICAgICAgICAgY2F1c2UgdGhlIGxpc3RlbmVyIHRvIGxpc3RlbiBmb3IgZXZlbnRzIG9uIF90aGF0XyBvYmplY3QuXG4gICAgICpcbiAgICAgKiAgICAgICAgIEluIGVpdGhlciBjYXNlLCB0aGUgbGlzdGVuZXIncyBgdGhpc2AgdmFsdWUgd2lsbCBiZSBib3VuZCB0b1xuICAgICAqICAgICAgICAgdGhpcyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd8QXJyYXl8RnVuY3Rpb259IHR5cGVPckxpc3RlbmVyXG4gICAgICogICAgICAgICBJZiB0aGUgZmlyc3QgYXJndW1lbnQgd2FzIGEgc3RyaW5nIG9yIGFycmF5LCB0aGlzIHNob3VsZCBiZSB0aGVcbiAgICAgKiAgICAgICAgIGxpc3RlbmVyIGZ1bmN0aW9uLiBPdGhlcndpc2UsIHRoaXMgaXMgYSBzdHJpbmcgb3IgYXJyYXkgb2YgZXZlbnRcbiAgICAgKiAgICAgICAgIHR5cGUocykuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gW2xpc3RlbmVyXVxuICAgICAqICAgICAgICAgSWYgdGhlIGZpcnN0IGFyZ3VtZW50IHdhcyBhbm90aGVyIGV2ZW50ZWQgb2JqZWN0LCB0aGlzIHdpbGwgYmVcbiAgICAgKiAgICAgICAgIHRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBvbmU6IGZ1bmN0aW9uIG9uZSQkMSgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgfVxuXG4gICAgICB2YXIgX25vcm1hbGl6ZUxpc3RlbkFyZ3MyID0gbm9ybWFsaXplTGlzdGVuQXJncyh0aGlzLCBhcmdzKSxcbiAgICAgICAgICBpc1RhcmdldGluZ1NlbGYgPSBfbm9ybWFsaXplTGlzdGVuQXJnczIuaXNUYXJnZXRpbmdTZWxmLFxuICAgICAgICAgIHRhcmdldCA9IF9ub3JtYWxpemVMaXN0ZW5BcmdzMi50YXJnZXQsXG4gICAgICAgICAgdHlwZSA9IF9ub3JtYWxpemVMaXN0ZW5BcmdzMi50eXBlLFxuICAgICAgICAgIGxpc3RlbmVyID0gX25vcm1hbGl6ZUxpc3RlbkFyZ3MyLmxpc3RlbmVyOyAvLyBUYXJnZXRpbmcgdGhpcyBldmVudGVkIG9iamVjdC5cblxuXG4gICAgICBpZiAoaXNUYXJnZXRpbmdTZWxmKSB7XG4gICAgICAgIGxpc3Rlbih0YXJnZXQsICdvbmUnLCB0eXBlLCBsaXN0ZW5lcik7IC8vIFRhcmdldGluZyBhbm90aGVyIGV2ZW50ZWQgb2JqZWN0LlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHdyYXBwZXIgPSBmdW5jdGlvbiB3cmFwcGVyKCkge1xuICAgICAgICAgIF90aGlzMi5vZmYodGFyZ2V0LCB0eXBlLCB3cmFwcGVyKTtcblxuICAgICAgICAgIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgbGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjMpLCBfa2V5MyA9IDA7IF9rZXkzIDwgX2xlbjM7IF9rZXkzKyspIHtcbiAgICAgICAgICAgIGxhcmdzW19rZXkzXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGlzdGVuZXIuYXBwbHkobnVsbCwgbGFyZ3MpO1xuICAgICAgICB9OyAvLyBVc2UgdGhlIHNhbWUgZnVuY3Rpb24gSUQgYXMgdGhlIGxpc3RlbmVyIHNvIHdlIGNhbiByZW1vdmUgaXQgbGF0ZXJcbiAgICAgICAgLy8gaXQgdXNpbmcgdGhlIElEIG9mIHRoZSBvcmlnaW5hbCBsaXN0ZW5lci5cblxuXG4gICAgICAgIHdyYXBwZXIuZ3VpZCA9IGxpc3RlbmVyLmd1aWQ7XG4gICAgICAgIGxpc3Rlbih0YXJnZXQsICdvbmUnLCB0eXBlLCB3cmFwcGVyKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBsaXN0ZW5lcihzKSBmcm9tIGV2ZW50KHMpIG9uIGFuIGV2ZW50ZWQgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtICB7c3RyaW5nfEFycmF5fEVsZW1lbnR8T2JqZWN0fSBbdGFyZ2V0T3JUeXBlXVxuICAgICAqICAgICAgICAgSWYgdGhpcyBpcyBhIHN0cmluZyBvciBhcnJheSwgaXQgcmVwcmVzZW50cyB0aGUgZXZlbnQgdHlwZShzKS5cbiAgICAgKlxuICAgICAqICAgICAgICAgQW5vdGhlciBldmVudGVkIG9iamVjdCBjYW4gYmUgcGFzc2VkIGhlcmUgaW5zdGVhZCwgaW4gd2hpY2ggY2FzZVxuICAgICAqICAgICAgICAgQUxMIDMgYXJndW1lbnRzIGFyZSBfcmVxdWlyZWRfLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7c3RyaW5nfEFycmF5fEZ1bmN0aW9ufSBbdHlwZU9yTGlzdGVuZXJdXG4gICAgICogICAgICAgICBJZiB0aGUgZmlyc3QgYXJndW1lbnQgd2FzIGEgc3RyaW5nIG9yIGFycmF5LCB0aGlzIG1heSBiZSB0aGVcbiAgICAgKiAgICAgICAgIGxpc3RlbmVyIGZ1bmN0aW9uLiBPdGhlcndpc2UsIHRoaXMgaXMgYSBzdHJpbmcgb3IgYXJyYXkgb2YgZXZlbnRcbiAgICAgKiAgICAgICAgIHR5cGUocykuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gW2xpc3RlbmVyXVxuICAgICAqICAgICAgICAgSWYgdGhlIGZpcnN0IGFyZ3VtZW50IHdhcyBhbm90aGVyIGV2ZW50ZWQgb2JqZWN0LCB0aGlzIHdpbGwgYmVcbiAgICAgKiAgICAgICAgIHRoZSBsaXN0ZW5lciBmdW5jdGlvbjsgb3RoZXJ3aXNlLCBfYWxsXyBsaXN0ZW5lcnMgYm91bmQgdG8gdGhlXG4gICAgICogICAgICAgICBldmVudCB0eXBlKHMpIHdpbGwgYmUgcmVtb3ZlZC5cbiAgICAgKi9cbiAgICBvZmY6IGZ1bmN0aW9uIG9mZiQkMSh0YXJnZXRPclR5cGUsIHR5cGVPckxpc3RlbmVyLCBsaXN0ZW5lcikge1xuICAgICAgLy8gVGFyZ2V0aW5nIHRoaXMgZXZlbnRlZCBvYmplY3QuXG4gICAgICBpZiAoIXRhcmdldE9yVHlwZSB8fCBpc1ZhbGlkRXZlbnRUeXBlKHRhcmdldE9yVHlwZSkpIHtcbiAgICAgICAgb2ZmKHRoaXMuZXZlbnRCdXNFbF8sIHRhcmdldE9yVHlwZSwgdHlwZU9yTGlzdGVuZXIpOyAvLyBUYXJnZXRpbmcgYW5vdGhlciBldmVudGVkIG9iamVjdC5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0YXJnZXRPclR5cGU7XG4gICAgICAgIHZhciB0eXBlID0gdHlwZU9yTGlzdGVuZXI7IC8vIEZhaWwgZmFzdCBhbmQgaW4gYSBtZWFuaW5nZnVsIHdheSFcblxuICAgICAgICB2YWxpZGF0ZVRhcmdldCh0YXJnZXQpO1xuICAgICAgICB2YWxpZGF0ZUV2ZW50VHlwZSh0eXBlKTtcbiAgICAgICAgdmFsaWRhdGVMaXN0ZW5lcihsaXN0ZW5lcik7IC8vIEVuc3VyZSB0aGVyZSdzIGF0IGxlYXN0IGEgZ3VpZCwgZXZlbiBpZiB0aGUgZnVuY3Rpb24gaGFzbid0IGJlZW4gdXNlZFxuXG4gICAgICAgIGxpc3RlbmVyID0gYmluZCh0aGlzLCBsaXN0ZW5lcik7IC8vIFJlbW92ZSB0aGUgZGlzcG9zZSBsaXN0ZW5lciBvbiB0aGlzIGV2ZW50ZWQgb2JqZWN0LCB3aGljaCB3YXMgZ2l2ZW5cbiAgICAgICAgLy8gdGhlIHNhbWUgZ3VpZCBhcyB0aGUgZXZlbnQgbGlzdGVuZXIgaW4gb24oKS5cblxuICAgICAgICB0aGlzLm9mZignZGlzcG9zZScsIGxpc3RlbmVyKTtcblxuICAgICAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lKSB7XG4gICAgICAgICAgb2ZmKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICAgIG9mZih0YXJnZXQsICdkaXNwb3NlJywgbGlzdGVuZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRXZlbnRlZCh0YXJnZXQpKSB7XG4gICAgICAgICAgdGFyZ2V0Lm9mZih0eXBlLCBsaXN0ZW5lcik7XG4gICAgICAgICAgdGFyZ2V0Lm9mZignZGlzcG9zZScsIGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBGaXJlIGFuIGV2ZW50IG9uIHRoaXMgZXZlbnRlZCBvYmplY3QsIGNhdXNpbmcgaXRzIGxpc3RlbmVycyB0byBiZSBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gICB7c3RyaW5nfE9iamVjdH0gZXZlbnRcbiAgICAgKiAgICAgICAgICBBbiBldmVudCB0eXBlIG9yIGFuIG9iamVjdCB3aXRoIGEgdHlwZSBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAgIHtPYmplY3R9IFtoYXNoXVxuICAgICAqICAgICAgICAgIEFuIGFkZGl0aW9uYWwgb2JqZWN0IHRvIHBhc3MgYWxvbmcgdG8gbGlzdGVuZXJzLlxuICAgICAqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKiAgICAgICAgICBXaGV0aGVyIG9yIG5vdCB0aGUgZGVmYXVsdCBiZWhhdmlvciB3YXMgcHJldmVudGVkLlxuICAgICAqL1xuICAgIHRyaWdnZXI6IGZ1bmN0aW9uIHRyaWdnZXIkJDEoZXZlbnQsIGhhc2gpIHtcbiAgICAgIHJldHVybiB0cmlnZ2VyKHRoaXMuZXZlbnRCdXNFbF8sIGV2ZW50LCBoYXNoKTtcbiAgICB9XG4gIH07XG4gIC8qKlxuICAgKiBBcHBsaWVzIHtAbGluayBtb2R1bGU6ZXZlbnRlZH5FdmVudGVkTWl4aW58RXZlbnRlZE1peGlufSB0byBhIHRhcmdldCBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gdGFyZ2V0XG4gICAqICAgICAgICAgVGhlIG9iamVjdCB0byB3aGljaCB0byBhZGQgZXZlbnQgbWV0aG9kcy5cbiAgICpcbiAgICogQHBhcmFtICB7T2JqZWN0fSBbb3B0aW9ucz17fV1cbiAgICogICAgICAgICBPcHRpb25zIGZvciBjdXN0b21pemluZyB0aGUgbWl4aW4gYmVoYXZpb3IuXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gW29wdGlvbnMuZXZlbnRCdXNLZXldXG4gICAqICAgICAgICAgQnkgZGVmYXVsdCwgYWRkcyBhIGBldmVudEJ1c0VsX2AgRE9NIGVsZW1lbnQgdG8gdGhlIHRhcmdldCBvYmplY3QsXG4gICAqICAgICAgICAgd2hpY2ggaXMgdXNlZCBhcyBhbiBldmVudCBidXMuIElmIHRoZSB0YXJnZXQgb2JqZWN0IGFscmVhZHkgaGFzIGFcbiAgICogICAgICAgICBET00gZWxlbWVudCB0aGF0IHNob3VsZCBiZSB1c2VkLCBwYXNzIGl0cyBrZXkgaGVyZS5cbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKiAgICAgICAgIFRoZSB0YXJnZXQgb2JqZWN0LlxuICAgKi9cblxuICBmdW5jdGlvbiBldmVudGVkKHRhcmdldCwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgX29wdGlvbnMgPSBvcHRpb25zLFxuICAgICAgICBldmVudEJ1c0tleSA9IF9vcHRpb25zLmV2ZW50QnVzS2V5OyAvLyBTZXQgb3IgY3JlYXRlIHRoZSBldmVudEJ1c0VsXy5cblxuICAgIGlmIChldmVudEJ1c0tleSkge1xuICAgICAgaWYgKCF0YXJnZXRbZXZlbnRCdXNLZXldLm5vZGVOYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBldmVudEJ1c0tleSBcXFwiXCIgKyBldmVudEJ1c0tleSArIFwiXFxcIiBkb2VzIG5vdCByZWZlciB0byBhbiBlbGVtZW50LlwiKTtcbiAgICAgIH1cblxuICAgICAgdGFyZ2V0LmV2ZW50QnVzRWxfID0gdGFyZ2V0W2V2ZW50QnVzS2V5XTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0LmV2ZW50QnVzRWxfID0gY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ3Zqcy1ldmVudC1idXMnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3NpZ24odGFyZ2V0LCBFdmVudGVkTWl4aW4pO1xuXG4gICAgaWYgKHRhcmdldC5ldmVudGVkQ2FsbGJhY2tzKSB7XG4gICAgICB0YXJnZXQuZXZlbnRlZENhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfSk7XG4gICAgfSAvLyBXaGVuIGFueSBldmVudGVkIG9iamVjdCBpcyBkaXNwb3NlZCwgaXQgcmVtb3ZlcyBhbGwgaXRzIGxpc3RlbmVycy5cblxuXG4gICAgdGFyZ2V0Lm9uKCdkaXNwb3NlJywgZnVuY3Rpb24gKCkge1xuICAgICAgdGFyZ2V0Lm9mZigpO1xuICAgICAgd2luZG93JDEuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRhcmdldC5ldmVudEJ1c0VsXyA9IG51bGw7XG4gICAgICB9LCAwKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBmaWxlIG1peGlucy9zdGF0ZWZ1bC5qc1xuICAgKiBAbW9kdWxlIHN0YXRlZnVsXG4gICAqL1xuICAvKipcbiAgICogQ29udGFpbnMgbWV0aG9kcyB0aGF0IHByb3ZpZGUgc3RhdGVmdWxuZXNzIHRvIGFuIG9iamVjdCB3aGljaCBpcyBwYXNzZWRcbiAgICogdG8ge0BsaW5rIG1vZHVsZTpzdGF0ZWZ1bH0uXG4gICAqXG4gICAqIEBtaXhpbiBTdGF0ZWZ1bE1peGluXG4gICAqL1xuXG4gIHZhciBTdGF0ZWZ1bE1peGluID0ge1xuICAgIC8qKlxuICAgICAqIEEgaGFzaCBjb250YWluaW5nIGFyYml0cmFyeSBrZXlzIGFuZCB2YWx1ZXMgcmVwcmVzZW50aW5nIHRoZSBzdGF0ZSBvZlxuICAgICAqIHRoZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuICAgIHN0YXRlOiB7fSxcblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc3RhdGUgb2YgYW4gb2JqZWN0IGJ5IG11dGF0aW5nIGl0c1xuICAgICAqIHtAbGluayBtb2R1bGU6c3RhdGVmdWx+U3RhdGVmdWxNaXhpbi5zdGF0ZXxzdGF0ZX0gb2JqZWN0IGluIHBsYWNlLlxuICAgICAqXG4gICAgICogQGZpcmVzICAgbW9kdWxlOnN0YXRlZnVsflN0YXRlZnVsTWl4aW4jc3RhdGVjaGFuZ2VkXG4gICAgICogQHBhcmFtICAge09iamVjdHxGdW5jdGlvbn0gc3RhdGVVcGRhdGVzXG4gICAgICogICAgICAgICAgQSBuZXcgc2V0IG9mIHByb3BlcnRpZXMgdG8gc2hhbGxvdy1tZXJnZSBpbnRvIHRoZSBwbHVnaW4gc3RhdGUuXG4gICAgICogICAgICAgICAgQ2FuIGJlIGEgcGxhaW4gb2JqZWN0IG9yIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGEgcGxhaW4gb2JqZWN0LlxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cbiAgICAgKiAgICAgICAgICBBbiBvYmplY3QgY29udGFpbmluZyBjaGFuZ2VzIHRoYXQgb2NjdXJyZWQuIElmIG5vIGNoYW5nZXNcbiAgICAgKiAgICAgICAgICBvY2N1cnJlZCwgcmV0dXJucyBgdW5kZWZpbmVkYC5cbiAgICAgKi9cbiAgICBzZXRTdGF0ZTogZnVuY3Rpb24gc2V0U3RhdGUoc3RhdGVVcGRhdGVzKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAvLyBTdXBwb3J0IHByb3ZpZGluZyB0aGUgYHN0YXRlVXBkYXRlc2Agc3RhdGUgYXMgYSBmdW5jdGlvbi5cbiAgICAgIGlmICh0eXBlb2Ygc3RhdGVVcGRhdGVzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHN0YXRlVXBkYXRlcyA9IHN0YXRlVXBkYXRlcygpO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2hhbmdlcztcbiAgICAgIGVhY2goc3RhdGVVcGRhdGVzLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIGNoYW5nZSBpZiB0aGUgdmFsdWUgaXMgZGlmZmVyZW50IGZyb20gd2hhdCdzIGluIHRoZVxuICAgICAgICAvLyBjdXJyZW50IHN0YXRlLlxuICAgICAgICBpZiAoX3RoaXMuc3RhdGVba2V5XSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICBjaGFuZ2VzID0gY2hhbmdlcyB8fCB7fTtcbiAgICAgICAgICBjaGFuZ2VzW2tleV0gPSB7XG4gICAgICAgICAgICBmcm9tOiBfdGhpcy5zdGF0ZVtrZXldLFxuICAgICAgICAgICAgdG86IHZhbHVlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzLnN0YXRlW2tleV0gPSB2YWx1ZTtcbiAgICAgIH0pOyAvLyBPbmx5IHRyaWdnZXIgXCJzdGF0ZWNoYW5nZVwiIGlmIHRoZXJlIHdlcmUgY2hhbmdlcyBBTkQgd2UgaGF2ZSBhIHRyaWdnZXJcbiAgICAgIC8vIGZ1bmN0aW9uLiBUaGlzIGFsbG93cyB1cyB0byBub3QgcmVxdWlyZSB0aGF0IHRoZSB0YXJnZXQgb2JqZWN0IGJlIGFuXG4gICAgICAvLyBldmVudGVkIG9iamVjdC5cblxuICAgICAgaWYgKGNoYW5nZXMgJiYgaXNFdmVudGVkKHRoaXMpKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBldmVudCB0cmlnZ2VyZWQgb24gYW4gb2JqZWN0IHRoYXQgaXMgYm90aFxuICAgICAgICAgKiB7QGxpbmsgbW9kdWxlOnN0YXRlZnVsfHN0YXRlZnVsfSBhbmQge0BsaW5rIG1vZHVsZTpldmVudGVkfGV2ZW50ZWR9XG4gICAgICAgICAqIGluZGljYXRpbmcgdGhhdCBpdHMgc3RhdGUgaGFzIGNoYW5nZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCAgICBtb2R1bGU6c3RhdGVmdWx+U3RhdGVmdWxNaXhpbiNzdGF0ZWNoYW5nZWRcbiAgICAgICAgICogQHR5cGUgICAgIHtPYmplY3R9XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBjaGFuZ2VzXG4gICAgICAgICAqICAgICAgICAgICBBIGhhc2ggY29udGFpbmluZyB0aGUgcHJvcGVydGllcyB0aGF0IHdlcmUgY2hhbmdlZCBhbmRcbiAgICAgICAgICogICAgICAgICAgIHRoZSB2YWx1ZXMgdGhleSB3ZXJlIGNoYW5nZWQgYGZyb21gIGFuZCBgdG9gLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50cmlnZ2VyKHtcbiAgICAgICAgICBjaGFuZ2VzOiBjaGFuZ2VzLFxuICAgICAgICAgIHR5cGU6ICdzdGF0ZWNoYW5nZWQnXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2hhbmdlcztcbiAgICB9XG4gIH07XG4gIC8qKlxuICAgKiBBcHBsaWVzIHtAbGluayBtb2R1bGU6c3RhdGVmdWx+U3RhdGVmdWxNaXhpbnxTdGF0ZWZ1bE1peGlufSB0byBhIHRhcmdldFxuICAgKiBvYmplY3QuXG4gICAqXG4gICAqIElmIHRoZSB0YXJnZXQgb2JqZWN0IGlzIHtAbGluayBtb2R1bGU6ZXZlbnRlZHxldmVudGVkfSBhbmQgaGFzIGFcbiAgICogYGhhbmRsZVN0YXRlQ2hhbmdlZGAgbWV0aG9kLCB0aGF0IG1ldGhvZCB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgYm91bmQgdG8gdGhlXG4gICAqIGBzdGF0ZWNoYW5nZWRgIGV2ZW50IG9uIGl0c2VsZi5cbiAgICpcbiAgICogQHBhcmFtICAge09iamVjdH0gdGFyZ2V0XG4gICAqICAgICAgICAgIFRoZSBvYmplY3QgdG8gYmUgbWFkZSBzdGF0ZWZ1bC5cbiAgICpcbiAgICogQHBhcmFtICAge09iamVjdH0gW2RlZmF1bHRTdGF0ZV1cbiAgICogICAgICAgICAgQSBkZWZhdWx0IHNldCBvZiBwcm9wZXJ0aWVzIHRvIHBvcHVsYXRlIHRoZSBuZXdseS1zdGF0ZWZ1bCBvYmplY3Qnc1xuICAgKiAgICAgICAgICBgc3RhdGVgIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqICAgICAgICAgIFJldHVybnMgdGhlIGB0YXJnZXRgLlxuICAgKi9cblxuICBmdW5jdGlvbiBzdGF0ZWZ1bCh0YXJnZXQsIGRlZmF1bHRTdGF0ZSkge1xuICAgIGFzc2lnbih0YXJnZXQsIFN0YXRlZnVsTWl4aW4pOyAvLyBUaGlzIGhhcHBlbnMgYWZ0ZXIgdGhlIG1peGluZy1pbiBiZWNhdXNlIHdlIG5lZWQgdG8gcmVwbGFjZSB0aGUgYHN0YXRlYFxuICAgIC8vIGFkZGVkIGluIHRoYXQgc3RlcC5cblxuICAgIHRhcmdldC5zdGF0ZSA9IGFzc2lnbih7fSwgdGFyZ2V0LnN0YXRlLCBkZWZhdWx0U3RhdGUpOyAvLyBBdXRvLWJpbmQgdGhlIGBoYW5kbGVTdGF0ZUNoYW5nZWRgIG1ldGhvZCBvZiB0aGUgdGFyZ2V0IG9iamVjdCBpZiBpdCBleGlzdHMuXG5cbiAgICBpZiAodHlwZW9mIHRhcmdldC5oYW5kbGVTdGF0ZUNoYW5nZWQgPT09ICdmdW5jdGlvbicgJiYgaXNFdmVudGVkKHRhcmdldCkpIHtcbiAgICAgIHRhcmdldC5vbignc3RhdGVjaGFuZ2VkJywgdGFyZ2V0LmhhbmRsZVN0YXRlQ2hhbmdlZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZmlsZSB0by10aXRsZS1jYXNlLmpzXG4gICAqIEBtb2R1bGUgdG8tdGl0bGUtY2FzZVxuICAgKi9cblxuICAvKipcbiAgICogVXBwZXJjYXNlIHRoZSBmaXJzdCBsZXR0ZXIgb2YgYSBzdHJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAgICogICAgICAgIFN0cmluZyB0byBiZSB1cHBlcmNhc2VkXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBUaGUgc3RyaW5nIHdpdGggYW4gdXBwZXJjYXNlZCBmaXJzdCBsZXR0ZXJcbiAgICovXG4gIGZ1bmN0aW9uIHRvVGl0bGVDYXNlKHN0cmluZykge1xuICAgIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHN0cmluZztcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpO1xuICB9XG4gIC8qKlxuICAgKiBDb21wYXJlcyB0aGUgVGl0bGVDYXNlIHZlcnNpb25zIG9mIHRoZSB0d28gc3RyaW5ncyBmb3IgZXF1YWxpdHkuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHIxXG4gICAqICAgICAgICBUaGUgZmlyc3Qgc3RyaW5nIHRvIGNvbXBhcmVcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0cjJcbiAgICogICAgICAgIFRoZSBzZWNvbmQgc3RyaW5nIHRvIGNvbXBhcmVcbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICBXaGV0aGVyIHRoZSBUaXRsZUNhc2UgdmVyc2lvbnMgb2YgdGhlIHN0cmluZ3MgYXJlIGVxdWFsXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHRpdGxlQ2FzZUVxdWFscyhzdHIxLCBzdHIyKSB7XG4gICAgcmV0dXJuIHRvVGl0bGVDYXNlKHN0cjEpID09PSB0b1RpdGxlQ2FzZShzdHIyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZmlsZSBtZXJnZS1vcHRpb25zLmpzXG4gICAqIEBtb2R1bGUgbWVyZ2Utb3B0aW9uc1xuICAgKi9cbiAgLyoqXG4gICAqIE1lcmdlIHR3byBvYmplY3RzIHJlY3Vyc2l2ZWx5LlxuICAgKlxuICAgKiBQZXJmb3JtcyBhIGRlZXAgbWVyZ2UgbGlrZVxuICAgKiB7QGxpbmsgaHR0cHM6Ly9sb2Rhc2guY29tL2RvY3MvNC4xNy4xMCNtZXJnZXxsb2Rhc2gubWVyZ2V9LCBidXQgb25seSBtZXJnZXNcbiAgICogcGxhaW4gb2JqZWN0cyAobm90IGFycmF5cywgZWxlbWVudHMsIG9yIGFueXRoaW5nIGVsc2UpLlxuICAgKlxuICAgKiBOb24tcGxhaW4gb2JqZWN0IHZhbHVlcyB3aWxsIGJlIGNvcGllZCBkaXJlY3RseSBmcm9tIHRoZSByaWdodC1tb3N0XG4gICAqIGFyZ3VtZW50LlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBwYXJhbSAgIHtPYmplY3RbXX0gc291cmNlc1xuICAgKiAgICAgICAgICBPbmUgb3IgbW9yZSBvYmplY3RzIHRvIG1lcmdlIGludG8gYSBuZXcgb2JqZWN0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqICAgICAgICAgIEEgbmV3IG9iamVjdCB0aGF0IGlzIHRoZSBtZXJnZWQgcmVzdWx0IG9mIGFsbCBzb3VyY2VzLlxuICAgKi9cblxuICBmdW5jdGlvbiBtZXJnZU9wdGlvbnMoKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHNvdXJjZXMgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBzb3VyY2VzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGVhY2goc291cmNlLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgICBpZiAoIWlzUGxhaW4odmFsdWUpKSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzUGxhaW4ocmVzdWx0W2tleV0pKSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdFtrZXldID0gbWVyZ2VPcHRpb25zKHJlc3VsdFtrZXldLCB2YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFBsYXllciBDb21wb25lbnQgLSBCYXNlIGNsYXNzIGZvciBhbGwgVUkgb2JqZWN0c1xuICAgKlxuICAgKiBAZmlsZSBjb21wb25lbnQuanNcbiAgICovXG4gIC8qKlxuICAgKiBCYXNlIGNsYXNzIGZvciBhbGwgVUkgQ29tcG9uZW50cy5cbiAgICogQ29tcG9uZW50cyBhcmUgVUkgb2JqZWN0cyB3aGljaCByZXByZXNlbnQgYm90aCBhIGphdmFzY3JpcHQgb2JqZWN0IGFuZCBhbiBlbGVtZW50XG4gICAqIGluIHRoZSBET00uIFRoZXkgY2FuIGJlIGNoaWxkcmVuIG9mIG90aGVyIGNvbXBvbmVudHMsIGFuZCBjYW4gaGF2ZVxuICAgKiBjaGlsZHJlbiB0aGVtc2VsdmVzLlxuICAgKlxuICAgKiBDb21wb25lbnRzIGNhbiBhbHNvIHVzZSBtZXRob2RzIGZyb20ge0BsaW5rIEV2ZW50VGFyZ2V0fVxuICAgKi9cblxuICB2YXIgQ29tcG9uZW50ID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQSBjYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIGEgY29tcG9uZW50IGlzIHJlYWR5LiBEb2VzIG5vdCBoYXZlIGFueVxuICAgICAqIHBhcmFtdGVycyBhbmQgYW55IGNhbGxiYWNrIHZhbHVlIHdpbGwgYmUgaWdub3JlZC5cbiAgICAgKlxuICAgICAqIEBjYWxsYmFjayBDb21wb25lbnR+UmVhZHlDYWxsYmFja1xuICAgICAqIEB0aGlzIENvbXBvbmVudFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0W119IFtvcHRpb25zLmNoaWxkcmVuXVxuICAgICAqICAgICAgICBBbiBhcnJheSBvZiBjaGlsZHJlbiBvYmplY3RzIHRvIGludGlhbGl6ZSB0aGlzIGNvbXBvbmVudCB3aXRoLiBDaGlsZHJlbiBvYmplY3RzIGhhdmVcbiAgICAgKiAgICAgICAgYSBuYW1lIHByb3BlcnR5IHRoYXQgd2lsbCBiZSB1c2VkIGlmIG1vcmUgdGhhbiBvbmUgY29tcG9uZW50IG9mIHRoZSBzYW1lIHR5cGUgbmVlZHMgdG8gYmVcbiAgICAgKiAgICAgICAgYWRkZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0NvbXBvbmVudH5SZWFkeUNhbGxiYWNrfSBbcmVhZHldXG4gICAgICogICAgICAgIEZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgYENvbXBvbmVudGAgaXMgcmVhZHkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ29tcG9uZW50KHBsYXllciwgb3B0aW9ucywgcmVhZHkpIHtcbiAgICAgIC8vIFRoZSBjb21wb25lbnQgbWlnaHQgYmUgdGhlIHBsYXllciBpdHNlbGYgYW5kIHdlIGNhbid0IHBhc3MgYHRoaXNgIHRvIHN1cGVyXG4gICAgICBpZiAoIXBsYXllciAmJiB0aGlzLnBsYXkpIHtcbiAgICAgICAgdGhpcy5wbGF5ZXJfID0gcGxheWVyID0gdGhpczsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wbGF5ZXJfID0gcGxheWVyO1xuICAgICAgfSAvLyBIb2xkIHRoZSByZWZlcmVuY2UgdG8gdGhlIHBhcmVudCBjb21wb25lbnQgdmlhIGBhZGRDaGlsZGAgbWV0aG9kXG5cblxuICAgICAgdGhpcy5wYXJlbnRDb21wb25lbnRfID0gbnVsbDsgLy8gTWFrZSBhIGNvcHkgb2YgcHJvdG90eXBlLm9wdGlvbnNfIHRvIHByb3RlY3QgYWdhaW5zdCBvdmVycmlkaW5nIGRlZmF1bHRzXG5cbiAgICAgIHRoaXMub3B0aW9uc18gPSBtZXJnZU9wdGlvbnMoe30sIHRoaXMub3B0aW9uc18pOyAvLyBVcGRhdGVkIG9wdGlvbnMgd2l0aCBzdXBwbGllZCBvcHRpb25zXG5cbiAgICAgIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnNfID0gbWVyZ2VPcHRpb25zKHRoaXMub3B0aW9uc18sIG9wdGlvbnMpOyAvLyBHZXQgSUQgZnJvbSBvcHRpb25zIG9yIG9wdGlvbnMgZWxlbWVudCBpZiBvbmUgaXMgc3VwcGxpZWRcblxuICAgICAgdGhpcy5pZF8gPSBvcHRpb25zLmlkIHx8IG9wdGlvbnMuZWwgJiYgb3B0aW9ucy5lbC5pZDsgLy8gSWYgdGhlcmUgd2FzIG5vIElEIGZyb20gdGhlIG9wdGlvbnMsIGdlbmVyYXRlIG9uZVxuXG4gICAgICBpZiAoIXRoaXMuaWRfKSB7XG4gICAgICAgIC8vIERvbid0IHJlcXVpcmUgdGhlIHBsYXllciBJRCBmdW5jdGlvbiBpbiB0aGUgY2FzZSBvZiBtb2NrIHBsYXllcnNcbiAgICAgICAgdmFyIGlkID0gcGxheWVyICYmIHBsYXllci5pZCAmJiBwbGF5ZXIuaWQoKSB8fCAnbm9fcGxheWVyJztcbiAgICAgICAgdGhpcy5pZF8gPSBpZCArIFwiX2NvbXBvbmVudF9cIiArIG5ld0dVSUQoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5uYW1lXyA9IG9wdGlvbnMubmFtZSB8fCBudWxsOyAvLyBDcmVhdGUgZWxlbWVudCBpZiBvbmUgd2Fzbid0IHByb3ZpZGVkIGluIG9wdGlvbnNcblxuICAgICAgaWYgKG9wdGlvbnMuZWwpIHtcbiAgICAgICAgdGhpcy5lbF8gPSBvcHRpb25zLmVsO1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmNyZWF0ZUVsICE9PSBmYWxzZSkge1xuICAgICAgICB0aGlzLmVsXyA9IHRoaXMuY3JlYXRlRWwoKTtcbiAgICAgIH0gLy8gaWYgZXZlbnRlZCBpcyBhbnl0aGluZyBleGNlcHQgZmFsc2UsIHdlIHdhbnQgdG8gbWl4aW4gaW4gZXZlbnRlZFxuXG5cbiAgICAgIGlmIChvcHRpb25zLmV2ZW50ZWQgIT09IGZhbHNlKSB7XG4gICAgICAgIC8vIE1ha2UgdGhpcyBhbiBldmVudGVkIG9iamVjdCBhbmQgdXNlIGBlbF9gLCBpZiBhdmFpbGFibGUsIGFzIGl0cyBldmVudCBidXNcbiAgICAgICAgZXZlbnRlZCh0aGlzLCB7XG4gICAgICAgICAgZXZlbnRCdXNLZXk6IHRoaXMuZWxfID8gJ2VsXycgOiBudWxsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBzdGF0ZWZ1bCh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRTdGF0ZSk7XG4gICAgICB0aGlzLmNoaWxkcmVuXyA9IFtdO1xuICAgICAgdGhpcy5jaGlsZEluZGV4XyA9IHt9O1xuICAgICAgdGhpcy5jaGlsZE5hbWVJbmRleF8gPSB7fTsgLy8gQWRkIGFueSBjaGlsZCBjb21wb25lbnRzIGluIG9wdGlvbnNcblxuICAgICAgaWYgKG9wdGlvbnMuaW5pdENoaWxkcmVuICE9PSBmYWxzZSkge1xuICAgICAgICB0aGlzLmluaXRDaGlsZHJlbigpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJlYWR5KHJlYWR5KTsgLy8gRG9uJ3Qgd2FudCB0byB0cmlnZ2VyIHJlYWR5IGhlcmUgb3IgaXQgd2lsbCBiZWZvcmUgaW5pdCBpcyBhY3R1YWxseVxuICAgICAgLy8gZmluaXNoZWQgZm9yIGFsbCBjaGlsZHJlbiB0aGF0IHJ1biB0aGlzIGNvbnN0cnVjdG9yXG5cbiAgICAgIGlmIChvcHRpb25zLnJlcG9ydFRvdWNoQWN0aXZpdHkgIT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlVG91Y2hBY3Rpdml0eSgpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIG9mIHRoZSBgQ29tcG9uZW50YCBhbmQgYWxsIGNoaWxkIGNvbXBvbmVudHMuXG4gICAgICpcbiAgICAgKiBAZmlyZXMgQ29tcG9uZW50I2Rpc3Bvc2VcbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90byA9IENvbXBvbmVudC5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAvKipcbiAgICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgYENvbXBvbmVudGAgaXMgZGlzcG9zZWQuXG4gICAgICAgKlxuICAgICAgICogQGV2ZW50IENvbXBvbmVudCNkaXNwb3NlXG4gICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgKlxuICAgICAgICogQHByb3BlcnR5IHtib29sZWFufSBbYnViYmxlcz1mYWxzZV1cbiAgICAgICAqICAgICAgICAgICBzZXQgdG8gZmFsc2Ugc28gdGhhdCB0aGUgY2xvc2UgZXZlbnQgZG9lcyBub3RcbiAgICAgICAqICAgICAgICAgICBidWJibGUgdXBcbiAgICAgICAqL1xuICAgICAgdGhpcy50cmlnZ2VyKHtcbiAgICAgICAgdHlwZTogJ2Rpc3Bvc2UnLFxuICAgICAgICBidWJibGVzOiBmYWxzZVxuICAgICAgfSk7IC8vIERpc3Bvc2UgYWxsIGNoaWxkcmVuLlxuXG4gICAgICBpZiAodGhpcy5jaGlsZHJlbl8pIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuY2hpbGRyZW5fLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgaWYgKHRoaXMuY2hpbGRyZW5fW2ldLmRpc3Bvc2UpIHtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5fW2ldLmRpc3Bvc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gLy8gRGVsZXRlIGNoaWxkIHJlZmVyZW5jZXNcblxuXG4gICAgICB0aGlzLmNoaWxkcmVuXyA9IG51bGw7XG4gICAgICB0aGlzLmNoaWxkSW5kZXhfID0gbnVsbDtcbiAgICAgIHRoaXMuY2hpbGROYW1lSW5kZXhfID0gbnVsbDtcbiAgICAgIHRoaXMucGFyZW50Q29tcG9uZW50XyA9IG51bGw7XG5cbiAgICAgIGlmICh0aGlzLmVsXykge1xuICAgICAgICAvLyBSZW1vdmUgZWxlbWVudCBmcm9tIERPTVxuICAgICAgICBpZiAodGhpcy5lbF8ucGFyZW50Tm9kZSkge1xuICAgICAgICAgIHRoaXMuZWxfLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbF8pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVtb3ZlRGF0YSh0aGlzLmVsXyk7XG4gICAgICAgIHRoaXMuZWxfID0gbnVsbDtcbiAgICAgIH0gLy8gcmVtb3ZlIHJlZmVyZW5jZSB0byB0aGUgcGxheWVyIGFmdGVyIGRpc3Bvc2luZyBvZiB0aGUgZWxlbWVudFxuXG5cbiAgICAgIHRoaXMucGxheWVyXyA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUge0BsaW5rIFBsYXllcn0gdGhhdCB0aGUgYENvbXBvbmVudGAgaGFzIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHJldHVybiB7UGxheWVyfVxuICAgICAqICAgICAgICAgVGhlIHBsYXllciB0aGF0IHRoaXMgYENvbXBvbmVudGAgaGFzIGF0dGFjaGVkIHRvLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5wbGF5ZXIgPSBmdW5jdGlvbiBwbGF5ZXIoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wbGF5ZXJfO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWVwIG1lcmdlIG9mIG9wdGlvbnMgb2JqZWN0cyB3aXRoIG5ldyBvcHRpb25zLlxuICAgICAqID4gTm90ZTogV2hlbiBib3RoIGBvYmpgIGFuZCBgb3B0aW9uc2AgY29udGFpbiBwcm9wZXJ0aWVzIHdob3NlIHZhbHVlcyBhcmUgb2JqZWN0cy5cbiAgICAgKiAgICAgICAgIFRoZSB0d28gcHJvcGVydGllcyBnZXQgbWVyZ2VkIHVzaW5nIHtAbGluayBtb2R1bGU6bWVyZ2VPcHRpb25zfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAgICAqICAgICAgICBUaGUgb2JqZWN0IHRoYXQgY29udGFpbnMgbmV3IG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogICAgICAgICBBIG5ldyBvYmplY3Qgb2YgYHRoaXMub3B0aW9uc19gIGFuZCBgb2JqYCBtZXJnZWQgdG9nZXRoZXIuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSB2ZXJzaW9uIDVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ub3B0aW9ucyA9IGZ1bmN0aW9uIG9wdGlvbnMob2JqKSB7XG4gICAgICBsb2cud2FybigndGhpcy5vcHRpb25zKCkgaGFzIGJlZW4gZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSBtb3ZlZCB0byB0aGUgY29uc3RydWN0b3IgaW4gNi4wJyk7XG5cbiAgICAgIGlmICghb2JqKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNfO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9wdGlvbnNfID0gbWVyZ2VPcHRpb25zKHRoaXMub3B0aW9uc18sIG9iaik7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zXztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBgQ29tcG9uZW50YHMgRE9NIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgRE9NIGVsZW1lbnQgZm9yIHRoaXMgYENvbXBvbmVudGAuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmVsID0gZnVuY3Rpb24gZWwoKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbF87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgYENvbXBvbmVudGBzIERPTSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFt0YWdOYW1lXVxuICAgICAqICAgICAgICBFbGVtZW50J3MgRE9NIG5vZGUgdHlwZS4gZS5nLiAnZGl2J1xuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzXVxuICAgICAqICAgICAgICBBbiBvYmplY3Qgb2YgcHJvcGVydGllcyB0aGF0IHNob3VsZCBiZSBzZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW2F0dHJpYnV0ZXNdXG4gICAgICogICAgICAgIEFuIG9iamVjdCBvZiBhdHRyaWJ1dGVzIHRoYXQgc2hvdWxkIGJlIHNldC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IGdldHMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSh0YWdOYW1lLCBwcm9wZXJ0aWVzLCBhdHRyaWJ1dGVzKSB7XG4gICAgICByZXR1cm4gY3JlYXRlRWwodGFnTmFtZSwgcHJvcGVydGllcywgYXR0cmlidXRlcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvY2FsaXplIGEgc3RyaW5nIGdpdmVuIHRoZSBzdHJpbmcgaW4gZW5nbGlzaC5cbiAgICAgKlxuICAgICAqIElmIHRva2VucyBhcmUgcHJvdmlkZWQsIGl0J2xsIHRyeSBhbmQgcnVuIGEgc2ltcGxlIHRva2VuIHJlcGxhY2VtZW50IG9uIHRoZSBwcm92aWRlZCBzdHJpbmcuXG4gICAgICogVGhlIHRva2VucyBpdCBsb29rcyBmb3IgbG9vayBsaWtlIGB7MX1gIHdpdGggdGhlIGluZGV4IGJlaW5nIDEtaW5kZXhlZCBpbnRvIHRoZSB0b2tlbnMgYXJyYXkuXG4gICAgICpcbiAgICAgKiBJZiBhIGBkZWZhdWx0VmFsdWVgIGlzIHByb3ZpZGVkLCBpdCdsbCB1c2UgdGhhdCBvdmVyIGBzdHJpbmdgLFxuICAgICAqIGlmIGEgdmFsdWUgaXNuJ3QgZm91bmQgaW4gcHJvdmlkZWQgbGFuZ3VhZ2UgZmlsZXMuXG4gICAgICogVGhpcyBpcyB1c2VmdWwgaWYgeW91IHdhbnQgdG8gaGF2ZSBhIGRlc2NyaXB0aXZlIGtleSBmb3IgdG9rZW4gcmVwbGFjZW1lbnRcbiAgICAgKiBidXQgaGF2ZSBhIHN1Y2NpbmN0IGxvY2FsaXplZCBzdHJpbmcgYW5kIG5vdCByZXF1aXJlIGBlbi5qc29uYCB0byBiZSBpbmNsdWRlZC5cbiAgICAgKlxuICAgICAqIEN1cnJlbnRseSwgaXQgaXMgdXNlZCBmb3IgdGhlIHByb2dyZXNzIGJhciB0aW1pbmcuXG4gICAgICogYGBganNcbiAgICAgKiB7XG4gICAgICogICBcInByb2dyZXNzIGJhciB0aW1pbmc6IGN1cnJlbnRUaW1lPXsxfSBkdXJhdGlvbj17Mn1cIjogXCJ7MX0gb2YgezJ9XCJcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICogSXQgaXMgdGhlbiB1c2VkIGxpa2Ugc286XG4gICAgICogYGBganNcbiAgICAgKiB0aGlzLmxvY2FsaXplKCdwcm9ncmVzcyBiYXIgdGltaW5nOiBjdXJyZW50VGltZT17MX0gZHVyYXRpb257Mn0nLFxuICAgICAqICAgICAgICAgICAgICAgW3RoaXMucGxheWVyXy5jdXJyZW50VGltZSgpLCB0aGlzLnBsYXllcl8uZHVyYXRpb24oKV0sXG4gICAgICogICAgICAgICAgICAgICAnezF9IG9mIHsyfScpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogV2hpY2ggb3V0cHV0cyBzb21ldGhpbmcgbGlrZTogYDAxOjIzIG9mIDI0OjU2YC5cbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICAgICAqICAgICAgICBUaGUgc3RyaW5nIHRvIGxvY2FsaXplIGFuZCB0aGUga2V5IHRvIGxvb2t1cCBpbiB0aGUgbGFuZ3VhZ2UgZmlsZXMuXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gW3Rva2Vuc11cbiAgICAgKiAgICAgICAgSWYgdGhlIGN1cnJlbnQgaXRlbSBoYXMgdG9rZW4gcmVwbGFjZW1lbnRzLCBwcm92aWRlIHRoZSB0b2tlbnMgaGVyZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2RlZmF1bHRWYWx1ZV1cbiAgICAgKiAgICAgICAgRGVmYXVsdHMgdG8gYHN0cmluZ2AuIENhbiBiZSBhIGRlZmF1bHQgdmFsdWUgdG8gdXNlIGZvciB0b2tlbiByZXBsYWNlbWVudFxuICAgICAqICAgICAgICBpZiB0aGUgbG9va3VwIGtleSBpcyBuZWVkZWQgdG8gYmUgc2VwYXJhdGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogICAgICAgICBUaGUgbG9jYWxpemVkIHN0cmluZyBvciBpZiBubyBsb2NhbGl6YXRpb24gZXhpc3RzIHRoZSBlbmdsaXNoIHN0cmluZy5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ubG9jYWxpemUgPSBmdW5jdGlvbiBsb2NhbGl6ZShzdHJpbmcsIHRva2VucywgZGVmYXVsdFZhbHVlKSB7XG4gICAgICBpZiAoZGVmYXVsdFZhbHVlID09PSB2b2lkIDApIHtcbiAgICAgICAgZGVmYXVsdFZhbHVlID0gc3RyaW5nO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29kZSA9IHRoaXMucGxheWVyXy5sYW5ndWFnZSAmJiB0aGlzLnBsYXllcl8ubGFuZ3VhZ2UoKTtcbiAgICAgIHZhciBsYW5ndWFnZXMgPSB0aGlzLnBsYXllcl8ubGFuZ3VhZ2VzICYmIHRoaXMucGxheWVyXy5sYW5ndWFnZXMoKTtcbiAgICAgIHZhciBsYW5ndWFnZSA9IGxhbmd1YWdlcyAmJiBsYW5ndWFnZXNbY29kZV07XG4gICAgICB2YXIgcHJpbWFyeUNvZGUgPSBjb2RlICYmIGNvZGUuc3BsaXQoJy0nKVswXTtcbiAgICAgIHZhciBwcmltYXJ5TGFuZyA9IGxhbmd1YWdlcyAmJiBsYW5ndWFnZXNbcHJpbWFyeUNvZGVdO1xuICAgICAgdmFyIGxvY2FsaXplZFN0cmluZyA9IGRlZmF1bHRWYWx1ZTtcblxuICAgICAgaWYgKGxhbmd1YWdlICYmIGxhbmd1YWdlW3N0cmluZ10pIHtcbiAgICAgICAgbG9jYWxpemVkU3RyaW5nID0gbGFuZ3VhZ2Vbc3RyaW5nXTtcbiAgICAgIH0gZWxzZSBpZiAocHJpbWFyeUxhbmcgJiYgcHJpbWFyeUxhbmdbc3RyaW5nXSkge1xuICAgICAgICBsb2NhbGl6ZWRTdHJpbmcgPSBwcmltYXJ5TGFuZ1tzdHJpbmddO1xuICAgICAgfVxuXG4gICAgICBpZiAodG9rZW5zKSB7XG4gICAgICAgIGxvY2FsaXplZFN0cmluZyA9IGxvY2FsaXplZFN0cmluZy5yZXBsYWNlKC9cXHsoXFxkKylcXH0vZywgZnVuY3Rpb24gKG1hdGNoLCBpbmRleCkge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IHRva2Vuc1tpbmRleCAtIDFdO1xuICAgICAgICAgIHZhciByZXQgPSB2YWx1ZTtcblxuICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXQgPSBtYXRjaDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGxvY2FsaXplZFN0cmluZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBgQ29tcG9uZW50YHMgRE9NIGVsZW1lbnQuIFRoaXMgaXMgd2hlcmUgY2hpbGRyZW4gZ2V0IGluc2VydGVkLlxuICAgICAqIFRoaXMgd2lsbCB1c3VhbGx5IGJlIHRoZSB0aGUgc2FtZSBhcyB0aGUgZWxlbWVudCByZXR1cm5lZCBpbiB7QGxpbmsgQ29tcG9uZW50I2VsfS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgY29udGVudCBlbGVtZW50IGZvciB0aGlzIGBDb21wb25lbnRgLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jb250ZW50RWwgPSBmdW5jdGlvbiBjb250ZW50RWwoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250ZW50RWxfIHx8IHRoaXMuZWxfO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhpcyBgQ29tcG9uZW50YHMgSURcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKiAgICAgICAgIFRoZSBpZCBvZiB0aGlzIGBDb21wb25lbnRgXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmlkID0gZnVuY3Rpb24gaWQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pZF87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYENvbXBvbmVudGBzIG5hbWUuIFRoZSBuYW1lIGdldHMgdXNlZCB0byByZWZlcmVuY2UgdGhlIGBDb21wb25lbnRgXG4gICAgICogYW5kIGlzIHNldCBkdXJpbmcgcmVnaXN0cmF0aW9uLlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgVGhlIG5hbWUgb2YgdGhpcyBgQ29tcG9uZW50YC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ubmFtZSA9IGZ1bmN0aW9uIG5hbWUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5uYW1lXztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGFuIGFycmF5IG9mIGFsbCBjaGlsZCBjb21wb25lbnRzXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICAgKiAgICAgICAgIFRoZSBjaGlsZHJlblxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jaGlsZHJlbiA9IGZ1bmN0aW9uIGNoaWxkcmVuKCkge1xuICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5fO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjaGlsZCBgQ29tcG9uZW50YCB3aXRoIHRoZSBnaXZlbiBgaWRgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gICAgICogICAgICAgIFRoZSBpZCBvZiB0aGUgY2hpbGQgYENvbXBvbmVudGAgdG8gZ2V0LlxuICAgICAqXG4gICAgICogQHJldHVybiB7Q29tcG9uZW50fHVuZGVmaW5lZH1cbiAgICAgKiAgICAgICAgIFRoZSBjaGlsZCBgQ29tcG9uZW50YCB3aXRoIHRoZSBnaXZlbiBgaWRgIG9yIHVuZGVmaW5lZC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZ2V0Q2hpbGRCeUlkID0gZnVuY3Rpb24gZ2V0Q2hpbGRCeUlkKGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGlsZEluZGV4X1tpZF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGNoaWxkIGBDb21wb25lbnRgIHdpdGggdGhlIGdpdmVuIGBuYW1lYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogICAgICAgIFRoZSBuYW1lIG9mIHRoZSBjaGlsZCBgQ29tcG9uZW50YCB0byBnZXQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtDb21wb25lbnR8dW5kZWZpbmVkfVxuICAgICAqICAgICAgICAgVGhlIGNoaWxkIGBDb21wb25lbnRgIHdpdGggdGhlIGdpdmVuIGBuYW1lYCBvciB1bmRlZmluZWQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmdldENoaWxkID0gZnVuY3Rpb24gZ2V0Q2hpbGQobmFtZSkge1xuICAgICAgaWYgKCFuYW1lKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbmFtZSA9IHRvVGl0bGVDYXNlKG5hbWUpO1xuICAgICAgcmV0dXJuIHRoaXMuY2hpbGROYW1lSW5kZXhfW25hbWVdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgYSBjaGlsZCBgQ29tcG9uZW50YCBpbnNpZGUgdGhlIGN1cnJlbnQgYENvbXBvbmVudGAuXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfENvbXBvbmVudH0gY2hpbGRcbiAgICAgKiAgICAgICAgVGhlIG5hbWUgb3IgaW5zdGFuY2Ugb2YgYSBjaGlsZCB0byBhZGQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dXG4gICAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2Ygb3B0aW9ucyB0aGF0IHdpbGwgZ2V0IHBhc3NlZCB0byBjaGlsZHJlbiBvZlxuICAgICAqICAgICAgICB0aGUgY2hpbGQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2luZGV4PXRoaXMuY2hpbGRyZW5fLmxlbmd0aF1cbiAgICAgKiAgICAgICAgVGhlIGluZGV4IHRvIGF0dGVtcHQgdG8gYWRkIGEgY2hpbGQgaW50by5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0NvbXBvbmVudH1cbiAgICAgKiAgICAgICAgIFRoZSBgQ29tcG9uZW50YCB0aGF0IGdldHMgYWRkZWQgYXMgYSBjaGlsZC4gV2hlbiB1c2luZyBhIHN0cmluZyB0aGVcbiAgICAgKiAgICAgICAgIGBDb21wb25lbnRgIHdpbGwgZ2V0IGNyZWF0ZWQgYnkgdGhpcyBwcm9jZXNzLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5hZGRDaGlsZCA9IGZ1bmN0aW9uIGFkZENoaWxkKGNoaWxkLCBvcHRpb25zLCBpbmRleCkge1xuICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG5cbiAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGluZGV4ID0gdGhpcy5jaGlsZHJlbl8ubGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29tcG9uZW50O1xuICAgICAgdmFyIGNvbXBvbmVudE5hbWU7IC8vIElmIGNoaWxkIGlzIGEgc3RyaW5nLCBjcmVhdGUgY29tcG9uZW50IHdpdGggb3B0aW9uc1xuXG4gICAgICBpZiAodHlwZW9mIGNoaWxkID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb21wb25lbnROYW1lID0gdG9UaXRsZUNhc2UoY2hpbGQpO1xuICAgICAgICB2YXIgY29tcG9uZW50Q2xhc3NOYW1lID0gb3B0aW9ucy5jb21wb25lbnRDbGFzcyB8fCBjb21wb25lbnROYW1lOyAvLyBTZXQgbmFtZSB0aHJvdWdoIG9wdGlvbnNcblxuICAgICAgICBvcHRpb25zLm5hbWUgPSBjb21wb25lbnROYW1lOyAvLyBDcmVhdGUgYSBuZXcgb2JqZWN0ICYgZWxlbWVudCBmb3IgdGhpcyBjb250cm9scyBzZXRcbiAgICAgICAgLy8gSWYgdGhlcmUncyBubyAucGxheWVyXywgdGhpcyBpcyBhIHBsYXllclxuXG4gICAgICAgIHZhciBDb21wb25lbnRDbGFzcyA9IENvbXBvbmVudC5nZXRDb21wb25lbnQoY29tcG9uZW50Q2xhc3NOYW1lKTtcblxuICAgICAgICBpZiAoIUNvbXBvbmVudENsYXNzKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29tcG9uZW50IFwiICsgY29tcG9uZW50Q2xhc3NOYW1lICsgXCIgZG9lcyBub3QgZXhpc3RcIik7XG4gICAgICAgIH0gLy8gZGF0YSBzdG9yZWQgZGlyZWN0bHkgb24gdGhlIHZpZGVvanMgb2JqZWN0IG1heSBiZVxuICAgICAgICAvLyBtaXNpZGVudGlmaWVkIGFzIGEgY29tcG9uZW50IHRvIHJldGFpblxuICAgICAgICAvLyBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSB3aXRoIDQueC4gY2hlY2sgdG8gbWFrZSBzdXJlIHRoZVxuICAgICAgICAvLyBjb21wb25lbnQgY2xhc3MgY2FuIGJlIGluc3RhbnRpYXRlZC5cblxuXG4gICAgICAgIGlmICh0eXBlb2YgQ29tcG9uZW50Q2xhc3MgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbXBvbmVudCA9IG5ldyBDb21wb25lbnRDbGFzcyh0aGlzLnBsYXllcl8gfHwgdGhpcywgb3B0aW9ucyk7IC8vIGNoaWxkIGlzIGEgY29tcG9uZW50IGluc3RhbmNlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21wb25lbnQgPSBjaGlsZDtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbXBvbmVudC5wYXJlbnRDb21wb25lbnRfKSB7XG4gICAgICAgIGNvbXBvbmVudC5wYXJlbnRDb21wb25lbnRfLnJlbW92ZUNoaWxkKGNvbXBvbmVudCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2hpbGRyZW5fLnNwbGljZShpbmRleCwgMCwgY29tcG9uZW50KTtcbiAgICAgIGNvbXBvbmVudC5wYXJlbnRDb21wb25lbnRfID0gdGhpcztcblxuICAgICAgaWYgKHR5cGVvZiBjb21wb25lbnQuaWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5jaGlsZEluZGV4X1tjb21wb25lbnQuaWQoKV0gPSBjb21wb25lbnQ7XG4gICAgICB9IC8vIElmIGEgbmFtZSB3YXNuJ3QgdXNlZCB0byBjcmVhdGUgdGhlIGNvbXBvbmVudCwgY2hlY2sgaWYgd2UgY2FuIHVzZSB0aGVcbiAgICAgIC8vIG5hbWUgZnVuY3Rpb24gb2YgdGhlIGNvbXBvbmVudFxuXG5cbiAgICAgIGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnROYW1lIHx8IGNvbXBvbmVudC5uYW1lICYmIHRvVGl0bGVDYXNlKGNvbXBvbmVudC5uYW1lKCkpO1xuXG4gICAgICBpZiAoY29tcG9uZW50TmFtZSkge1xuICAgICAgICB0aGlzLmNoaWxkTmFtZUluZGV4X1tjb21wb25lbnROYW1lXSA9IGNvbXBvbmVudDtcbiAgICAgIH0gLy8gQWRkIHRoZSBVSSBvYmplY3QncyBlbGVtZW50IHRvIHRoZSBjb250YWluZXIgZGl2IChib3gpXG4gICAgICAvLyBIYXZpbmcgYW4gZWxlbWVudCBpcyBub3QgcmVxdWlyZWRcblxuXG4gICAgICBpZiAodHlwZW9mIGNvbXBvbmVudC5lbCA9PT0gJ2Z1bmN0aW9uJyAmJiBjb21wb25lbnQuZWwoKSkge1xuICAgICAgICB2YXIgY2hpbGROb2RlcyA9IHRoaXMuY29udGVudEVsKCkuY2hpbGRyZW47XG4gICAgICAgIHZhciByZWZOb2RlID0gY2hpbGROb2Rlc1tpbmRleF0gfHwgbnVsbDtcbiAgICAgICAgdGhpcy5jb250ZW50RWwoKS5pbnNlcnRCZWZvcmUoY29tcG9uZW50LmVsKCksIHJlZk5vZGUpO1xuICAgICAgfSAvLyBSZXR1cm4gc28gaXQgY2FuIHN0b3JlZCBvbiBwYXJlbnQgb2JqZWN0IGlmIGRlc2lyZWQuXG5cblxuICAgICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgY2hpbGQgYENvbXBvbmVudGAgZnJvbSB0aGlzIGBDb21wb25lbnRgcyBsaXN0IG9mIGNoaWxkcmVuLiBBbHNvIHJlbW92ZXNcbiAgICAgKiB0aGUgY2hpbGQgYENvbXBvbmVudGBzIGVsZW1lbnQgZnJvbSB0aGlzIGBDb21wb25lbnRgcyBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDb21wb25lbnR9IGNvbXBvbmVudFxuICAgICAqICAgICAgICBUaGUgY2hpbGQgYENvbXBvbmVudGAgdG8gcmVtb3ZlLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5yZW1vdmVDaGlsZCA9IGZ1bmN0aW9uIHJlbW92ZUNoaWxkKGNvbXBvbmVudCkge1xuICAgICAgaWYgKHR5cGVvZiBjb21wb25lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbXBvbmVudCA9IHRoaXMuZ2V0Q2hpbGQoY29tcG9uZW50KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFjb21wb25lbnQgfHwgIXRoaXMuY2hpbGRyZW5fKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNoaWxkRm91bmQgPSBmYWxzZTtcblxuICAgICAgZm9yICh2YXIgaSA9IHRoaXMuY2hpbGRyZW5fLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGlmICh0aGlzLmNoaWxkcmVuX1tpXSA9PT0gY29tcG9uZW50KSB7XG4gICAgICAgICAgY2hpbGRGb3VuZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5jaGlsZHJlbl8uc3BsaWNlKGksIDEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghY2hpbGRGb3VuZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbXBvbmVudC5wYXJlbnRDb21wb25lbnRfID0gbnVsbDtcbiAgICAgIHRoaXMuY2hpbGRJbmRleF9bY29tcG9uZW50LmlkKCldID0gbnVsbDtcbiAgICAgIHRoaXMuY2hpbGROYW1lSW5kZXhfW2NvbXBvbmVudC5uYW1lKCldID0gbnVsbDtcbiAgICAgIHZhciBjb21wRWwgPSBjb21wb25lbnQuZWwoKTtcblxuICAgICAgaWYgKGNvbXBFbCAmJiBjb21wRWwucGFyZW50Tm9kZSA9PT0gdGhpcy5jb250ZW50RWwoKSkge1xuICAgICAgICB0aGlzLmNvbnRlbnRFbCgpLnJlbW92ZUNoaWxkKGNvbXBvbmVudC5lbCgpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGFuZCBpbml0aWFsaXplIGRlZmF1bHQgY2hpbGQgYENvbXBvbmVudGBzIGJhc2VkIHVwb24gb3B0aW9ucy5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaW5pdENoaWxkcmVuID0gZnVuY3Rpb24gaW5pdENoaWxkcmVuKCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5vcHRpb25zXy5jaGlsZHJlbjtcblxuICAgICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgIC8vIGB0aGlzYCBpcyBgcGFyZW50YFxuICAgICAgICB2YXIgcGFyZW50T3B0aW9ucyA9IHRoaXMub3B0aW9uc187XG5cbiAgICAgICAgdmFyIGhhbmRsZUFkZCA9IGZ1bmN0aW9uIGhhbmRsZUFkZChjaGlsZCkge1xuICAgICAgICAgIHZhciBuYW1lID0gY2hpbGQubmFtZTtcbiAgICAgICAgICB2YXIgb3B0cyA9IGNoaWxkLm9wdHM7IC8vIEFsbG93IG9wdGlvbnMgZm9yIGNoaWxkcmVuIHRvIGJlIHNldCBhdCB0aGUgcGFyZW50IG9wdGlvbnNcbiAgICAgICAgICAvLyBlLmcuIHZpZGVvanMoaWQsIHsgY29udHJvbEJhcjogZmFsc2UgfSk7XG4gICAgICAgICAgLy8gaW5zdGVhZCBvZiB2aWRlb2pzKGlkLCB7IGNoaWxkcmVuOiB7IGNvbnRyb2xCYXI6IGZhbHNlIH0pO1xuXG4gICAgICAgICAgaWYgKHBhcmVudE9wdGlvbnNbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgb3B0cyA9IHBhcmVudE9wdGlvbnNbbmFtZV07XG4gICAgICAgICAgfSAvLyBBbGxvdyBmb3IgZGlzYWJsaW5nIGRlZmF1bHQgY29tcG9uZW50c1xuICAgICAgICAgIC8vIGUuZy4gb3B0aW9uc1snY2hpbGRyZW4nXVsncG9zdGVySW1hZ2UnXSA9IGZhbHNlXG5cblxuICAgICAgICAgIGlmIChvcHRzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gLy8gQWxsb3cgb3B0aW9ucyB0byBiZSBwYXNzZWQgYXMgYSBzaW1wbGUgYm9vbGVhbiBpZiBubyBjb25maWd1cmF0aW9uXG4gICAgICAgICAgLy8gaXMgbmVjZXNzYXJ5LlxuXG5cbiAgICAgICAgICBpZiAob3B0cyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgb3B0cyA9IHt9O1xuICAgICAgICAgIH0gLy8gV2UgYWxzbyB3YW50IHRvIHBhc3MgdGhlIG9yaWdpbmFsIHBsYXllciBvcHRpb25zXG4gICAgICAgICAgLy8gdG8gZWFjaCBjb21wb25lbnQgYXMgd2VsbCBzbyB0aGV5IGRvbid0IG5lZWQgdG9cbiAgICAgICAgICAvLyByZWFjaCBiYWNrIGludG8gdGhlIHBsYXllciBmb3Igb3B0aW9ucyBsYXRlci5cblxuXG4gICAgICAgICAgb3B0cy5wbGF5ZXJPcHRpb25zID0gX3RoaXMub3B0aW9uc18ucGxheWVyT3B0aW9uczsgLy8gQ3JlYXRlIGFuZCBhZGQgdGhlIGNoaWxkIGNvbXBvbmVudC5cbiAgICAgICAgICAvLyBBZGQgYSBkaXJlY3QgcmVmZXJlbmNlIHRvIHRoZSBjaGlsZCBieSBuYW1lIG9uIHRoZSBwYXJlbnQgaW5zdGFuY2UuXG4gICAgICAgICAgLy8gSWYgdHdvIG9mIHRoZSBzYW1lIGNvbXBvbmVudCBhcmUgdXNlZCwgZGlmZmVyZW50IG5hbWVzIHNob3VsZCBiZSBzdXBwbGllZFxuICAgICAgICAgIC8vIGZvciBlYWNoXG5cbiAgICAgICAgICB2YXIgbmV3Q2hpbGQgPSBfdGhpcy5hZGRDaGlsZChuYW1lLCBvcHRzKTtcblxuICAgICAgICAgIGlmIChuZXdDaGlsZCkge1xuICAgICAgICAgICAgX3RoaXNbbmFtZV0gPSBuZXdDaGlsZDtcbiAgICAgICAgICB9XG4gICAgICAgIH07IC8vIEFsbG93IGZvciBhbiBhcnJheSBvZiBjaGlsZHJlbiBkZXRhaWxzIHRvIHBhc3NlZCBpbiB0aGUgb3B0aW9uc1xuXG5cbiAgICAgICAgdmFyIHdvcmtpbmdDaGlsZHJlbjtcbiAgICAgICAgdmFyIFRlY2ggPSBDb21wb25lbnQuZ2V0Q29tcG9uZW50KCdUZWNoJyk7XG5cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XG4gICAgICAgICAgd29ya2luZ0NoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd29ya2luZ0NoaWxkcmVuID0gT2JqZWN0LmtleXMoY2hpbGRyZW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgd29ya2luZ0NoaWxkcmVuIC8vIGNoaWxkcmVuIHRoYXQgYXJlIGluIHRoaXMub3B0aW9uc18gYnV0IGFsc28gaW4gd29ya2luZ0NoaWxkcmVuICB3b3VsZFxuICAgICAgICAvLyBnaXZlIHVzIGV4dHJhIGNoaWxkcmVuIHdlIGRvIG5vdCB3YW50LiBTbywgd2Ugd2FudCB0byBmaWx0ZXIgdGhlbSBvdXQuXG4gICAgICAgIC5jb25jYXQoT2JqZWN0LmtleXModGhpcy5vcHRpb25zXykuZmlsdGVyKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgIHJldHVybiAhd29ya2luZ0NoaWxkcmVuLnNvbWUoZnVuY3Rpb24gKHdjaGlsZCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB3Y2hpbGQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIHJldHVybiBjaGlsZCA9PT0gd2NoaWxkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY2hpbGQgPT09IHdjaGlsZC5uYW1lO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KSkubWFwKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgIHZhciBuYW1lO1xuICAgICAgICAgIHZhciBvcHRzO1xuXG4gICAgICAgICAgaWYgKHR5cGVvZiBjaGlsZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIG5hbWUgPSBjaGlsZDtcbiAgICAgICAgICAgIG9wdHMgPSBjaGlsZHJlbltuYW1lXSB8fCBfdGhpcy5vcHRpb25zX1tuYW1lXSB8fCB7fTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmFtZSA9IGNoaWxkLm5hbWU7XG4gICAgICAgICAgICBvcHRzID0gY2hpbGQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBvcHRzOiBvcHRzXG4gICAgICAgICAgfTtcbiAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgIC8vIHdlIGhhdmUgdG8gbWFrZSBzdXJlIHRoYXQgY2hpbGQubmFtZSBpc24ndCBpbiB0aGUgdGVjaE9yZGVyIHNpbmNlXG4gICAgICAgICAgLy8gdGVjaHMgYXJlIHJlZ2lzdGVyZCBhcyBDb21wb25lbnRzIGJ1dCBjYW4ndCBhcmVuJ3QgY29tcGF0aWJsZVxuICAgICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdmlkZW9qcy92aWRlby5qcy9pc3N1ZXMvMjc3MlxuICAgICAgICAgIHZhciBjID0gQ29tcG9uZW50LmdldENvbXBvbmVudChjaGlsZC5vcHRzLmNvbXBvbmVudENsYXNzIHx8IHRvVGl0bGVDYXNlKGNoaWxkLm5hbWUpKTtcbiAgICAgICAgICByZXR1cm4gYyAmJiAhVGVjaC5pc1RlY2goYyk7XG4gICAgICAgIH0pLmZvckVhY2goaGFuZGxlQWRkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVpbGRzIHRoZSBkZWZhdWx0IERPTSBjbGFzcyBuYW1lLiBTaG91bGQgYmUgb3ZlcnJpZGVuIGJ5IHN1Yi1jb21wb25lbnRzLlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgVGhlIERPTSBjbGFzcyBuYW1lIGZvciB0aGlzIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRDU1NDbGFzcygpIHtcbiAgICAgIC8vIENoaWxkIGNsYXNzZXMgY2FuIGluY2x1ZGUgYSBmdW5jdGlvbiB0aGF0IGRvZXM6XG4gICAgICAvLyByZXR1cm4gJ0NMQVNTIE5BTUUnICsgdGhpcy5fc3VwZXIoKTtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZCBhIGxpc3RlbmVyIHRvIHRoZSBjb21wb25lbnQncyByZWFkeSBzdGF0ZS5cbiAgICAgKiBEaWZmZXJlbnQgZnJvbSBldmVudCBsaXN0ZW5lcnMgaW4gdGhhdCBpZiB0aGUgcmVhZHkgZXZlbnQgaGFzIGFscmVhZHkgaGFwcGVuZWRcbiAgICAgKiBpdCB3aWxsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIGltbWVkaWF0ZWx5LlxuICAgICAqXG4gICAgICogQHJldHVybiB7Q29tcG9uZW50fVxuICAgICAqICAgICAgICAgUmV0dXJucyBpdHNlbGY7IG1ldGhvZCBjYW4gYmUgY2hhaW5lZC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ucmVhZHkgPSBmdW5jdGlvbiByZWFkeShmbiwgc3luYykge1xuICAgICAgaWYgKHN5bmMgPT09IHZvaWQgMCkge1xuICAgICAgICBzeW5jID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmICghZm4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuaXNSZWFkeV8pIHtcbiAgICAgICAgdGhpcy5yZWFkeVF1ZXVlXyA9IHRoaXMucmVhZHlRdWV1ZV8gfHwgW107XG4gICAgICAgIHRoaXMucmVhZHlRdWV1ZV8ucHVzaChmbik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHN5bmMpIHtcbiAgICAgICAgZm4uY2FsbCh0aGlzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENhbGwgdGhlIGZ1bmN0aW9uIGFzeW5jaHJvbm91c2x5IGJ5IGRlZmF1bHQgZm9yIGNvbnNpc3RlbmN5XG4gICAgICAgIHRoaXMuc2V0VGltZW91dChmbiwgMSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgYWxsIHRoZSByZWFkeSBsaXN0ZW5lcnMgZm9yIHRoaXMgYENvbXBvbmVudGAuXG4gICAgICpcbiAgICAgKiBAZmlyZXMgQ29tcG9uZW50I3JlYWR5XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnRyaWdnZXJSZWFkeSA9IGZ1bmN0aW9uIHRyaWdnZXJSZWFkeSgpIHtcbiAgICAgIHRoaXMuaXNSZWFkeV8gPSB0cnVlOyAvLyBFbnN1cmUgcmVhZHkgaXMgdHJpZ2dlcmVkIGFzeW5jaHJvbm91c2x5XG5cbiAgICAgIHRoaXMuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZWFkeVF1ZXVlID0gdGhpcy5yZWFkeVF1ZXVlXzsgLy8gUmVzZXQgUmVhZHkgUXVldWVcblxuICAgICAgICB0aGlzLnJlYWR5UXVldWVfID0gW107XG5cbiAgICAgICAgaWYgKHJlYWR5UXVldWUgJiYgcmVhZHlRdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmVhZHlRdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgZm4uY2FsbCh0aGlzKTtcbiAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgfSAvLyBBbGxvdyBmb3IgdXNpbmcgZXZlbnQgbGlzdGVuZXJzIGFsc29cblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJpZ2dlcmVkIHdoZW4gYSBgQ29tcG9uZW50YCBpcyByZWFkeS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IENvbXBvbmVudCNyZWFkeVxuICAgICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdyZWFkeScpO1xuICAgICAgfSwgMSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmQgYSBzaW5nbGUgRE9NIGVsZW1lbnQgbWF0Y2hpbmcgYSBgc2VsZWN0b3JgLiBUaGlzIGNhbiBiZSB3aXRoaW4gdGhlIGBDb21wb25lbnRgc1xuICAgICAqIGBjb250ZW50RWwoKWAgb3IgYW5vdGhlciBjdXN0b20gY29udGV4dC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvclxuICAgICAqICAgICAgICBBIHZhbGlkIENTUyBzZWxlY3Rvciwgd2hpY2ggd2lsbCBiZSBwYXNzZWQgdG8gYHF1ZXJ5U2VsZWN0b3JgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fHN0cmluZ30gW2NvbnRleHQ9dGhpcy5jb250ZW50RWwoKV1cbiAgICAgKiAgICAgICAgQSBET00gZWxlbWVudCB3aXRoaW4gd2hpY2ggdG8gcXVlcnkuIENhbiBhbHNvIGJlIGEgc2VsZWN0b3Igc3RyaW5nIGluXG4gICAgICogICAgICAgIHdoaWNoIGNhc2UgdGhlIGZpcnN0IG1hdGNoaW5nIGVsZW1lbnQgd2lsbCBnZXQgdXNlZCBhcyBjb250ZXh0LiBJZlxuICAgICAqICAgICAgICBtaXNzaW5nIGB0aGlzLmNvbnRlbnRFbCgpYCBnZXRzIHVzZWQuIElmICBgdGhpcy5jb250ZW50RWwoKWAgcmV0dXJuc1xuICAgICAqICAgICAgICBub3RoaW5nIGl0IGZhbGxzIGJhY2sgdG8gYGRvY3VtZW50YC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR8bnVsbH1cbiAgICAgKiAgICAgICAgIHRoZSBkb20gZWxlbWVudCB0aGF0IHdhcyBmb3VuZCwgb3IgbnVsbFxuICAgICAqXG4gICAgICogQHNlZSBbSW5mb3JtYXRpb24gb24gQ1NTIFNlbGVjdG9yc10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvR3VpZGUvQ1NTL0dldHRpbmdfU3RhcnRlZC9TZWxlY3RvcnMpXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLiQgPSBmdW5jdGlvbiAkJCQxKHNlbGVjdG9yLCBjb250ZXh0KSB7XG4gICAgICByZXR1cm4gJChzZWxlY3RvciwgY29udGV4dCB8fCB0aGlzLmNvbnRlbnRFbCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZHMgYWxsIERPTSBlbGVtZW50IG1hdGNoaW5nIGEgYHNlbGVjdG9yYC4gVGhpcyBjYW4gYmUgd2l0aGluIHRoZSBgQ29tcG9uZW50YHNcbiAgICAgKiBgY29udGVudEVsKClgIG9yIGFub3RoZXIgY3VzdG9tIGNvbnRleHQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3JcbiAgICAgKiAgICAgICAgQSB2YWxpZCBDU1Mgc2VsZWN0b3IsIHdoaWNoIHdpbGwgYmUgcGFzc2VkIHRvIGBxdWVyeVNlbGVjdG9yQWxsYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudHxzdHJpbmd9IFtjb250ZXh0PXRoaXMuY29udGVudEVsKCldXG4gICAgICogICAgICAgIEEgRE9NIGVsZW1lbnQgd2l0aGluIHdoaWNoIHRvIHF1ZXJ5LiBDYW4gYWxzbyBiZSBhIHNlbGVjdG9yIHN0cmluZyBpblxuICAgICAqICAgICAgICB3aGljaCBjYXNlIHRoZSBmaXJzdCBtYXRjaGluZyBlbGVtZW50IHdpbGwgZ2V0IHVzZWQgYXMgY29udGV4dC4gSWZcbiAgICAgKiAgICAgICAgbWlzc2luZyBgdGhpcy5jb250ZW50RWwoKWAgZ2V0cyB1c2VkLiBJZiAgYHRoaXMuY29udGVudEVsKClgIHJldHVybnNcbiAgICAgKiAgICAgICAgbm90aGluZyBpdCBmYWxscyBiYWNrIHRvIGBkb2N1bWVudGAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtOb2RlTGlzdH1cbiAgICAgKiAgICAgICAgIGEgbGlzdCBvZiBkb20gZWxlbWVudHMgdGhhdCB3ZXJlIGZvdW5kXG4gICAgICpcbiAgICAgKiBAc2VlIFtJbmZvcm1hdGlvbiBvbiBDU1MgU2VsZWN0b3JzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9HdWlkZS9DU1MvR2V0dGluZ19TdGFydGVkL1NlbGVjdG9ycylcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uJCQgPSBmdW5jdGlvbiAkJCQkMShzZWxlY3RvciwgY29udGV4dCkge1xuICAgICAgcmV0dXJuICQkKHNlbGVjdG9yLCBjb250ZXh0IHx8IHRoaXMuY29udGVudEVsKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIGNvbXBvbmVudCdzIGVsZW1lbnQgaGFzIGEgQ1NTIGNsYXNzIG5hbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NUb0NoZWNrXG4gICAgICogICAgICAgIENTUyBjbGFzcyBuYW1lIHRvIGNoZWNrLlxuICAgICAqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKiAgICAgICAgIC0gVHJ1ZSBpZiB0aGUgYENvbXBvbmVudGAgaGFzIHRoZSBjbGFzcy5cbiAgICAgKiAgICAgICAgIC0gRmFsc2UgaWYgdGhlIGBDb21wb25lbnRgIGRvZXMgbm90IGhhdmUgdGhlIGNsYXNzYFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYXNDbGFzcyA9IGZ1bmN0aW9uIGhhc0NsYXNzJCQxKGNsYXNzVG9DaGVjaykge1xuICAgICAgcmV0dXJuIGhhc0NsYXNzKHRoaXMuZWxfLCBjbGFzc1RvQ2hlY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgYSBDU1MgY2xhc3MgbmFtZSB0byB0aGUgYENvbXBvbmVudGBzIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NUb0FkZFxuICAgICAqICAgICAgICBDU1MgY2xhc3MgbmFtZSB0byBhZGRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uYWRkQ2xhc3MgPSBmdW5jdGlvbiBhZGRDbGFzcyQkMShjbGFzc1RvQWRkKSB7XG4gICAgICBhZGRDbGFzcyh0aGlzLmVsXywgY2xhc3NUb0FkZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIENTUyBjbGFzcyBuYW1lIGZyb20gdGhlIGBDb21wb25lbnRgcyBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzVG9SZW1vdmVcbiAgICAgKiAgICAgICAgQ1NTIGNsYXNzIG5hbWUgdG8gcmVtb3ZlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnJlbW92ZUNsYXNzID0gZnVuY3Rpb24gcmVtb3ZlQ2xhc3MkJDEoY2xhc3NUb1JlbW92ZSkge1xuICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbF8sIGNsYXNzVG9SZW1vdmUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgb3IgcmVtb3ZlIGEgQ1NTIGNsYXNzIG5hbWUgZnJvbSB0aGUgY29tcG9uZW50J3MgZWxlbWVudC5cbiAgICAgKiAtIGBjbGFzc1RvVG9nZ2xlYCBnZXRzIGFkZGVkIHdoZW4ge0BsaW5rIENvbXBvbmVudCNoYXNDbGFzc30gd291bGQgcmV0dXJuIGZhbHNlLlxuICAgICAqIC0gYGNsYXNzVG9Ub2dnbGVgIGdldHMgcmVtb3ZlZCB3aGVuIHtAbGluayBDb21wb25lbnQjaGFzQ2xhc3N9IHdvdWxkIHJldHVybiB0cnVlLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBjbGFzc1RvVG9nZ2xlXG4gICAgICogICAgICAgICBUaGUgY2xhc3MgdG8gYWRkIG9yIHJlbW92ZSBiYXNlZCBvbiAoQGxpbmsgQ29tcG9uZW50I2hhc0NsYXNzfVxuICAgICAqXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbnxEb21+cHJlZGljYXRlfSBbcHJlZGljYXRlXVxuICAgICAqICAgICAgICAgQW4ge0BsaW5rIERvbX5wcmVkaWNhdGV9IGZ1bmN0aW9uIG9yIGEgYm9vbGVhblxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by50b2dnbGVDbGFzcyA9IGZ1bmN0aW9uIHRvZ2dsZUNsYXNzJCQxKGNsYXNzVG9Ub2dnbGUsIHByZWRpY2F0ZSkge1xuICAgICAgdG9nZ2xlQ2xhc3ModGhpcy5lbF8sIGNsYXNzVG9Ub2dnbGUsIHByZWRpY2F0ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNob3cgdGhlIGBDb21wb25lbnRgcyBlbGVtZW50IGlmIGl0IGlzIGhpZGRlbiBieSByZW1vdmluZyB0aGVcbiAgICAgKiAndmpzLWhpZGRlbicgY2xhc3MgbmFtZSBmcm9tIGl0LlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zaG93ID0gZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGlkZSB0aGUgYENvbXBvbmVudGBzIGVsZW1lbnQgaWYgaXQgaXMgY3VycmVudGx5IHNob3dpbmcgYnkgYWRkaW5nIHRoZVxuICAgICAqICd2anMtaGlkZGVuYCBjbGFzcyBuYW1lIHRvIGl0LlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oaWRlID0gZnVuY3Rpb24gaGlkZSgpIHtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9jayBhIGBDb21wb25lbnRgcyBlbGVtZW50IGluIGl0cyB2aXNpYmxlIHN0YXRlIGJ5IGFkZGluZyB0aGUgJ3Zqcy1sb2NrLXNob3dpbmcnXG4gICAgICogY2xhc3MgbmFtZSB0byBpdC4gVXNlZCBkdXJpbmcgZmFkZUluL2ZhZGVPdXQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5sb2NrU2hvd2luZyA9IGZ1bmN0aW9uIGxvY2tTaG93aW5nKCkge1xuICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWxvY2stc2hvd2luZycpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbmxvY2sgYSBgQ29tcG9uZW50YHMgZWxlbWVudCBmcm9tIGl0cyB2aXNpYmxlIHN0YXRlIGJ5IHJlbW92aW5nIHRoZSAndmpzLWxvY2stc2hvd2luZydcbiAgICAgKiBjbGFzcyBuYW1lIGZyb20gaXQuIFVzZWQgZHVyaW5nIGZhZGVJbi9mYWRlT3V0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udW5sb2NrU2hvd2luZyA9IGZ1bmN0aW9uIHVubG9ja1Nob3dpbmcoKSB7XG4gICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtbG9jay1zaG93aW5nJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmFsdWUgb2YgYW4gYXR0cmlidXRlIG9uIHRoZSBgQ29tcG9uZW50YHMgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVcbiAgICAgKiAgICAgICAgTmFtZSBvZiB0aGUgYXR0cmlidXRlIHRvIGdldCB0aGUgdmFsdWUgZnJvbS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3xudWxsfVxuICAgICAqICAgICAgICAgLSBUaGUgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZSB0aGF0IHdhcyBhc2tlZCBmb3IuXG4gICAgICogICAgICAgICAtIENhbiBiZSBhbiBlbXB0eSBzdHJpbmcgb24gc29tZSBicm93c2VycyBpZiB0aGUgYXR0cmlidXRlIGRvZXMgbm90IGV4aXN0XG4gICAgICogICAgICAgICAgIG9yIGhhcyBubyB2YWx1ZVxuICAgICAqICAgICAgICAgLSBNb3N0IGJyb3dzZXJzIHdpbGwgcmV0dXJuIG51bGwgaWYgdGhlIGF0dGlidXRlIGRvZXMgbm90IGV4aXN0IG9yIGhhc1xuICAgICAqICAgICAgICAgICBubyB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBzZWUgW0RPTSBBUElde0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L2dldEF0dHJpYnV0ZX1cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZ2V0QXR0cmlidXRlID0gZnVuY3Rpb24gZ2V0QXR0cmlidXRlJCQxKGF0dHJpYnV0ZSkge1xuICAgICAgcmV0dXJuIGdldEF0dHJpYnV0ZSh0aGlzLmVsXywgYXR0cmlidXRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUgb24gdGhlIGBDb21wb25lbnRgJ3MgZWxlbWVudFxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZVxuICAgICAqICAgICAgICBOYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdG8gc2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICogICAgICAgIFZhbHVlIHRvIHNldCB0aGUgYXR0cmlidXRlIHRvLlxuICAgICAqXG4gICAgICogQHNlZSBbRE9NIEFQSV17QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0VsZW1lbnQvc2V0QXR0cmlidXRlfVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbiBzZXRBdHRyaWJ1dGUkJDEoYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgICAgc2V0QXR0cmlidXRlKHRoaXMuZWxfLCBhdHRyaWJ1dGUsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFuIGF0dHJpYnV0ZSBmcm9tIHRoZSBgQ29tcG9uZW50YHMgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVcbiAgICAgKiAgICAgICAgTmFtZSBvZiB0aGUgYXR0cmlidXRlIHRvIHJlbW92ZS5cbiAgICAgKlxuICAgICAqIEBzZWUgW0RPTSBBUElde0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L3JlbW92ZUF0dHJpYnV0ZX1cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ucmVtb3ZlQXR0cmlidXRlID0gZnVuY3Rpb24gcmVtb3ZlQXR0cmlidXRlJCQxKGF0dHJpYnV0ZSkge1xuICAgICAgcmVtb3ZlQXR0cmlidXRlKHRoaXMuZWxfLCBhdHRyaWJ1dGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgb3Igc2V0IHRoZSB3aWR0aCBvZiB0aGUgY29tcG9uZW50IGJhc2VkIHVwb24gdGhlIENTUyBzdHlsZXMuXG4gICAgICogU2VlIHtAbGluayBDb21wb25lbnQjZGltZW5zaW9ufSBmb3IgbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gW251bV1cbiAgICAgKiAgICAgICAgVGhlIHdpZHRoIHRoYXQgeW91IHdhbnQgdG8gc2V0IHBvc3RmaXhlZCB3aXRoICclJywgJ3B4JyBvciBub3RoaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbc2tpcExpc3RlbmVyc11cbiAgICAgKiAgICAgICAgU2tpcCB0aGUgY29tcG9uZW50cmVzaXplIGV2ZW50IHRyaWdnZXJcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge251bWJlcnxzdHJpbmd9XG4gICAgICogICAgICAgICBUaGUgd2lkdGggd2hlbiBnZXR0aW5nLCB6ZXJvIGlmIHRoZXJlIGlzIG5vIHdpZHRoLiBDYW4gYmUgYSBzdHJpbmdcbiAgICAgKiAgICAgICAgICAgcG9zdHBpeGVkIHdpdGggJyUnIG9yICdweCcuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLndpZHRoID0gZnVuY3Rpb24gd2lkdGgobnVtLCBza2lwTGlzdGVuZXJzKSB7XG4gICAgICByZXR1cm4gdGhpcy5kaW1lbnNpb24oJ3dpZHRoJywgbnVtLCBza2lwTGlzdGVuZXJzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IG9yIHNldCB0aGUgaGVpZ2h0IG9mIHRoZSBjb21wb25lbnQgYmFzZWQgdXBvbiB0aGUgQ1NTIHN0eWxlcy5cbiAgICAgKiBTZWUge0BsaW5rIENvbXBvbmVudCNkaW1lbnNpb259IGZvciBtb3JlIGRldGFpbGVkIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBbbnVtXVxuICAgICAqICAgICAgICBUaGUgaGVpZ2h0IHRoYXQgeW91IHdhbnQgdG8gc2V0IHBvc3RmaXhlZCB3aXRoICclJywgJ3B4JyBvciBub3RoaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbc2tpcExpc3RlbmVyc11cbiAgICAgKiAgICAgICAgU2tpcCB0aGUgY29tcG9uZW50cmVzaXplIGV2ZW50IHRyaWdnZXJcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge251bWJlcnxzdHJpbmd9XG4gICAgICogICAgICAgICBUaGUgd2lkdGggd2hlbiBnZXR0aW5nLCB6ZXJvIGlmIHRoZXJlIGlzIG5vIHdpZHRoLiBDYW4gYmUgYSBzdHJpbmdcbiAgICAgKiAgICAgICAgIHBvc3RwaXhlZCB3aXRoICclJyBvciAncHgnLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oZWlnaHQgPSBmdW5jdGlvbiBoZWlnaHQobnVtLCBza2lwTGlzdGVuZXJzKSB7XG4gICAgICByZXR1cm4gdGhpcy5kaW1lbnNpb24oJ2hlaWdodCcsIG51bSwgc2tpcExpc3RlbmVycyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBib3RoIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IG9mIHRoZSBgQ29tcG9uZW50YCBlbGVtZW50IGF0IHRoZSBzYW1lIHRpbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ8c3RyaW5nfSB3aWR0aFxuICAgICAqICAgICAgICAgV2lkdGggdG8gc2V0IHRoZSBgQ29tcG9uZW50YHMgZWxlbWVudCB0by5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge251bWJlcnxzdHJpbmd9IGhlaWdodFxuICAgICAqICAgICAgICAgSGVpZ2h0IHRvIHNldCB0aGUgYENvbXBvbmVudGBzIGVsZW1lbnQgdG8uXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmRpbWVuc2lvbnMgPSBmdW5jdGlvbiBkaW1lbnNpb25zKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIC8vIFNraXAgY29tcG9uZW50cmVzaXplIGxpc3RlbmVycyBvbiB3aWR0aCBmb3Igb3B0aW1pemF0aW9uXG4gICAgICB0aGlzLndpZHRoKHdpZHRoLCB0cnVlKTtcbiAgICAgIHRoaXMuaGVpZ2h0KGhlaWdodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBvciBzZXQgd2lkdGggb3IgaGVpZ2h0IG9mIHRoZSBgQ29tcG9uZW50YCBlbGVtZW50LiBUaGlzIGlzIHRoZSBzaGFyZWQgY29kZVxuICAgICAqIGZvciB0aGUge0BsaW5rIENvbXBvbmVudCN3aWR0aH0gYW5kIHtAbGluayBDb21wb25lbnQjaGVpZ2h0fS5cbiAgICAgKlxuICAgICAqIFRoaW5ncyB0byBrbm93OlxuICAgICAqIC0gSWYgdGhlIHdpZHRoIG9yIGhlaWdodCBpbiBhbiBudW1iZXIgdGhpcyB3aWxsIHJldHVybiB0aGUgbnVtYmVyIHBvc3RmaXhlZCB3aXRoICdweCcuXG4gICAgICogLSBJZiB0aGUgd2lkdGgvaGVpZ2h0IGlzIGEgcGVyY2VudCB0aGlzIHdpbGwgcmV0dXJuIHRoZSBwZXJjZW50IHBvc3RmaXhlZCB3aXRoICclJ1xuICAgICAqIC0gSGlkZGVuIGVsZW1lbnRzIGhhdmUgYSB3aWR0aCBvZiAwIHdpdGggYHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlYC4gVGhpcyBmdW5jdGlvblxuICAgICAqICAgZGVmYXVsdHMgdG8gdGhlIGBDb21wb25lbnRgcyBgc3R5bGUud2lkdGhgIGFuZCBmYWxscyBiYWNrIHRvIGB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZWAuXG4gICAgICogICBTZWUgW3RoaXNde0BsaW5rIGh0dHA6Ly93d3cuZm9saW90ZWsuY29tL2RldmJsb2cvZ2V0dGluZy10aGUtd2lkdGgtb2YtYS1oaWRkZW4tZWxlbWVudC13aXRoLWpxdWVyeS11c2luZy13aWR0aC99XG4gICAgICogICBmb3IgbW9yZSBpbmZvcm1hdGlvblxuICAgICAqIC0gSWYgeW91IHdhbnQgdGhlIGNvbXB1dGVkIHN0eWxlIG9mIHRoZSBjb21wb25lbnQsIHVzZSB7QGxpbmsgQ29tcG9uZW50I2N1cnJlbnRXaWR0aH1cbiAgICAgKiAgIGFuZCB7QGxpbmsge0NvbXBvbmVudCNjdXJyZW50SGVpZ2h0fVxuICAgICAqXG4gICAgICogQGZpcmVzIENvbXBvbmVudCNjb21wb25lbnRyZXNpemVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB3aWR0aE9ySGVpZ2h0XG4gICAgIDggICAgICAgICd3aWR0aCcgb3IgJ2hlaWdodCdcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge251bWJlcnxzdHJpbmd9IFtudW1dXG4gICAgIDggICAgICAgICBOZXcgZGltZW5zaW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBbc2tpcExpc3RlbmVyc11cbiAgICAgKiAgICAgICAgIFNraXAgY29tcG9uZW50cmVzaXplIGV2ZW50IHRyaWdnZXJcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKiAgICAgICAgIFRoZSBkaW1lbnNpb24gd2hlbiBnZXR0aW5nIG9yIDAgaWYgdW5zZXRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZGltZW5zaW9uID0gZnVuY3Rpb24gZGltZW5zaW9uKHdpZHRoT3JIZWlnaHQsIG51bSwgc2tpcExpc3RlbmVycykge1xuICAgICAgaWYgKG51bSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIFNldCB0byB6ZXJvIGlmIG51bGwgb3IgbGl0ZXJhbGx5IE5hTiAoTmFOICE9PSBOYU4pXG4gICAgICAgIGlmIChudW0gPT09IG51bGwgfHwgbnVtICE9PSBudW0pIHtcbiAgICAgICAgICBudW0gPSAwO1xuICAgICAgICB9IC8vIENoZWNrIGlmIHVzaW5nIGNzcyB3aWR0aC9oZWlnaHQgKCUgb3IgcHgpIGFuZCBhZGp1c3RcblxuXG4gICAgICAgIGlmICgoJycgKyBudW0pLmluZGV4T2YoJyUnKSAhPT0gLTEgfHwgKCcnICsgbnVtKS5pbmRleE9mKCdweCcpICE9PSAtMSkge1xuICAgICAgICAgIHRoaXMuZWxfLnN0eWxlW3dpZHRoT3JIZWlnaHRdID0gbnVtO1xuICAgICAgICB9IGVsc2UgaWYgKG51bSA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgdGhpcy5lbF8uc3R5bGVbd2lkdGhPckhlaWdodF0gPSAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmVsXy5zdHlsZVt3aWR0aE9ySGVpZ2h0XSA9IG51bSArICdweCc7XG4gICAgICAgIH0gLy8gc2tpcExpc3RlbmVycyBhbGxvd3MgdXMgdG8gYXZvaWQgdHJpZ2dlcmluZyB0aGUgcmVzaXplIGV2ZW50IHdoZW4gc2V0dGluZyBib3RoIHdpZHRoIGFuZCBoZWlnaHRcblxuXG4gICAgICAgIGlmICghc2tpcExpc3RlbmVycykge1xuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgY29tcG9uZW50IGlzIHJlc2l6ZWQuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZXZlbnQgQ29tcG9uZW50I2NvbXBvbmVudHJlc2l6ZVxuICAgICAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAgICAgKi9cbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NvbXBvbmVudHJlc2l6ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBOb3Qgc2V0dGluZyBhIHZhbHVlLCBzbyBnZXR0aW5nIGl0XG4gICAgICAvLyBNYWtlIHN1cmUgZWxlbWVudCBleGlzdHNcblxuXG4gICAgICBpZiAoIXRoaXMuZWxfKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfSAvLyBHZXQgZGltZW5zaW9uIHZhbHVlIGZyb20gc3R5bGVcblxuXG4gICAgICB2YXIgdmFsID0gdGhpcy5lbF8uc3R5bGVbd2lkdGhPckhlaWdodF07XG4gICAgICB2YXIgcHhJbmRleCA9IHZhbC5pbmRleE9mKCdweCcpO1xuXG4gICAgICBpZiAocHhJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgLy8gUmV0dXJuIHRoZSBwaXhlbCB2YWx1ZSB3aXRoIG5vICdweCdcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbC5zbGljZSgwLCBweEluZGV4KSwgMTApO1xuICAgICAgfSAvLyBObyBweCBzbyB1c2luZyAlIG9yIG5vIHN0eWxlIHdhcyBzZXQsIHNvIGZhbGxpbmcgYmFjayB0byBvZmZzZXRXaWR0aC9oZWlnaHRcbiAgICAgIC8vIElmIGNvbXBvbmVudCBoYXMgZGlzcGxheTpub25lLCBvZmZzZXQgd2lsbCByZXR1cm4gMFxuICAgICAgLy8gVE9ETzogaGFuZGxlIGRpc3BsYXk6bm9uZSBhbmQgbm8gZGltZW5zaW9uIHN0eWxlIHVzaW5nIHB4XG5cblxuICAgICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZWxfWydvZmZzZXQnICsgdG9UaXRsZUNhc2Uod2lkdGhPckhlaWdodCldLCAxMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29tcHV0ZWQgd2lkdGggb3IgdGhlIGhlaWdodCBvZiB0aGUgY29tcG9uZW50J3MgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIFVzZXMgYHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB3aWR0aE9ySGVpZ2h0XG4gICAgICogICAgICAgIEEgc3RyaW5nIGNvbnRhaW5pbmcgJ3dpZHRoJyBvciAnaGVpZ2h0Jy4gV2hpY2hldmVyIG9uZSB5b3Ugd2FudCB0byBnZXQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICogICAgICAgICBUaGUgZGltZW5zaW9uIHRoYXQgZ2V0cyBhc2tlZCBmb3Igb3IgMCBpZiBub3RoaW5nIHdhcyBzZXRcbiAgICAgKiAgICAgICAgIGZvciB0aGF0IGRpbWVuc2lvbi5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3VycmVudERpbWVuc2lvbiA9IGZ1bmN0aW9uIGN1cnJlbnREaW1lbnNpb24od2lkdGhPckhlaWdodCkge1xuICAgICAgdmFyIGNvbXB1dGVkV2lkdGhPckhlaWdodCA9IDA7XG5cbiAgICAgIGlmICh3aWR0aE9ySGVpZ2h0ICE9PSAnd2lkdGgnICYmIHdpZHRoT3JIZWlnaHQgIT09ICdoZWlnaHQnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignY3VycmVudERpbWVuc2lvbiBvbmx5IGFjY2VwdHMgd2lkdGggb3IgaGVpZ2h0IHZhbHVlJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygd2luZG93JDEuZ2V0Q29tcHV0ZWRTdHlsZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdyQxLmdldENvbXB1dGVkU3R5bGUodGhpcy5lbF8pO1xuICAgICAgICBjb21wdXRlZFdpZHRoT3JIZWlnaHQgPSBjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUod2lkdGhPckhlaWdodCkgfHwgY29tcHV0ZWRTdHlsZVt3aWR0aE9ySGVpZ2h0XTtcbiAgICAgIH0gLy8gcmVtb3ZlICdweCcgZnJvbSB2YXJpYWJsZSBhbmQgcGFyc2UgYXMgaW50ZWdlclxuXG5cbiAgICAgIGNvbXB1dGVkV2lkdGhPckhlaWdodCA9IHBhcnNlRmxvYXQoY29tcHV0ZWRXaWR0aE9ySGVpZ2h0KTsgLy8gaWYgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHN0aWxsIDAsIGl0J3MgcG9zc2libGUgdGhhdCB0aGUgYnJvd3NlciBpcyBseWluZ1xuICAgICAgLy8gYW5kIHdlIHdhbnQgdG8gY2hlY2sgdGhlIG9mZnNldCB2YWx1ZXMuXG4gICAgICAvLyBUaGlzIGNvZGUgYWxzbyBydW5zIHdoZXJldmVyIGdldENvbXB1dGVkU3R5bGUgZG9lc24ndCBleGlzdC5cblxuICAgICAgaWYgKGNvbXB1dGVkV2lkdGhPckhlaWdodCA9PT0gMCkge1xuICAgICAgICB2YXIgcnVsZSA9IFwib2Zmc2V0XCIgKyB0b1RpdGxlQ2FzZSh3aWR0aE9ySGVpZ2h0KTtcbiAgICAgICAgY29tcHV0ZWRXaWR0aE9ySGVpZ2h0ID0gdGhpcy5lbF9bcnVsZV07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb21wdXRlZFdpZHRoT3JIZWlnaHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHdpZHRoIGFuZCBoZWlnaHQgdmFsdWVzIG9mIHRoZSBgQ29tcG9uZW50YHNcbiAgICAgKiBjb21wdXRlZCBzdHlsZS4gVXNlcyBgd2luZG93LmdldENvbXB1dGVkU3R5bGVgLlxuICAgICAqXG4gICAgICogQHR5cGVkZWYge09iamVjdH0gQ29tcG9uZW50fkRpbWVuc2lvbk9iamVjdFxuICAgICAqXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHdpZHRoXG4gICAgICogICAgICAgICAgIFRoZSB3aWR0aCBvZiB0aGUgYENvbXBvbmVudGBzIGNvbXB1dGVkIHN0eWxlLlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IGhlaWdodFxuICAgICAqICAgICAgICAgICBUaGUgaGVpZ2h0IG9mIHRoZSBgQ29tcG9uZW50YHMgY29tcHV0ZWQgc3R5bGUuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBHZXQgYW4gb2JqZWN0IHRoYXQgY29udGFpbnMgY29tcHV0ZWQgd2lkdGggYW5kIGhlaWdodCB2YWx1ZXMgb2YgdGhlXG4gICAgICogY29tcG9uZW50J3MgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIFVzZXMgYHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0NvbXBvbmVudH5EaW1lbnNpb25PYmplY3R9XG4gICAgICogICAgICAgICBUaGUgY29tcHV0ZWQgZGltZW5zaW9ucyBvZiB0aGUgY29tcG9uZW50J3MgZWxlbWVudC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3VycmVudERpbWVuc2lvbnMgPSBmdW5jdGlvbiBjdXJyZW50RGltZW5zaW9ucygpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdpZHRoOiB0aGlzLmN1cnJlbnREaW1lbnNpb24oJ3dpZHRoJyksXG4gICAgICAgIGhlaWdodDogdGhpcy5jdXJyZW50RGltZW5zaW9uKCdoZWlnaHQnKVxuICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb21wdXRlZCB3aWR0aCBvZiB0aGUgY29tcG9uZW50J3MgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIFVzZXMgYHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKiAgICAgICAgIFRoZSBjb21wdXRlZCB3aWR0aCBvZiB0aGUgY29tcG9uZW50J3MgZWxlbWVudC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3VycmVudFdpZHRoID0gZnVuY3Rpb24gY3VycmVudFdpZHRoKCkge1xuICAgICAgcmV0dXJuIHRoaXMuY3VycmVudERpbWVuc2lvbignd2lkdGgnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb21wdXRlZCBoZWlnaHQgb2YgdGhlIGNvbXBvbmVudCdzIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBVc2VzIGB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICogICAgICAgICBUaGUgY29tcHV0ZWQgaGVpZ2h0IG9mIHRoZSBjb21wb25lbnQncyBlbGVtZW50LlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jdXJyZW50SGVpZ2h0ID0gZnVuY3Rpb24gY3VycmVudEhlaWdodCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnREaW1lbnNpb24oJ2hlaWdodCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGZvY3VzIHRvIHRoaXMgY29tcG9uZW50XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmZvY3VzID0gZnVuY3Rpb24gZm9jdXMoKSB7XG4gICAgICB0aGlzLmVsXy5mb2N1cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGZvY3VzIGZyb20gdGhpcyBjb21wb25lbnRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uYmx1ciA9IGZ1bmN0aW9uIGJsdXIoKSB7XG4gICAgICB0aGlzLmVsXy5ibHVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhpcyBDb21wb25lbnQgcmVjZWl2ZXMgYSBrZXlkb3duIGV2ZW50IHdoaWNoIGl0IGRvZXMgbm90IHByb2Nlc3MsXG4gICAgICogIGl0IHBhc3NlcyB0aGUgZXZlbnQgdG8gdGhlIFBsYXllciBmb3IgaGFuZGxpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBUaGUgYGtleWRvd25gIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmUgY2FsbGVkLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVLZXlQcmVzcyA9IGZ1bmN0aW9uIGhhbmRsZUtleVByZXNzKGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5wbGF5ZXJfKSB7XG4gICAgICAgIHRoaXMucGxheWVyXy5oYW5kbGVLZXlQcmVzcyhldmVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVtaXQgYSAndGFwJyBldmVudHMgd2hlbiB0b3VjaCBldmVudCBzdXBwb3J0IGdldHMgZGV0ZWN0ZWQuIFRoaXMgZ2V0cyB1c2VkIHRvXG4gICAgICogc3VwcG9ydCB0b2dnbGluZyB0aGUgY29udHJvbHMgdGhyb3VnaCBhIHRhcCBvbiB0aGUgdmlkZW8uIFRoZXkgZ2V0IGVuYWJsZWRcbiAgICAgKiBiZWNhdXNlIGV2ZXJ5IHN1Yi1jb21wb25lbnQgd291bGQgaGF2ZSBleHRyYSBvdmVyaGVhZCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBmaXJlcyBDb21wb25lbnQjdGFwXG4gICAgICogQGxpc3RlbnMgQ29tcG9uZW50I3RvdWNoc3RhcnRcbiAgICAgKiBAbGlzdGVucyBDb21wb25lbnQjdG91Y2htb3ZlXG4gICAgICogQGxpc3RlbnMgQ29tcG9uZW50I3RvdWNobGVhdmVcbiAgICAgKiBAbGlzdGVucyBDb21wb25lbnQjdG91Y2hjYW5jZWxcbiAgICAgKiBAbGlzdGVucyBDb21wb25lbnQjdG91Y2hlbmRcbiAgICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmVtaXRUYXBFdmVudHMgPSBmdW5jdGlvbiBlbWl0VGFwRXZlbnRzKCkge1xuICAgICAgLy8gVHJhY2sgdGhlIHN0YXJ0IHRpbWUgc28gd2UgY2FuIGRldGVybWluZSBob3cgbG9uZyB0aGUgdG91Y2ggbGFzdGVkXG4gICAgICB2YXIgdG91Y2hTdGFydCA9IDA7XG4gICAgICB2YXIgZmlyc3RUb3VjaCA9IG51bGw7IC8vIE1heGltdW0gbW92ZW1lbnQgYWxsb3dlZCBkdXJpbmcgYSB0b3VjaCBldmVudCB0byBzdGlsbCBiZSBjb25zaWRlcmVkIGEgdGFwXG4gICAgICAvLyBPdGhlciBwb3B1bGFyIGxpYnMgdXNlIGFueXdoZXJlIGZyb20gMiAoaGFtbWVyLmpzKSB0byAxNSxcbiAgICAgIC8vIHNvIDEwIHNlZW1zIGxpa2UgYSBuaWNlLCByb3VuZCBudW1iZXIuXG5cbiAgICAgIHZhciB0YXBNb3ZlbWVudFRocmVzaG9sZCA9IDEwOyAvLyBUaGUgbWF4aW11bSBsZW5ndGggYSB0b3VjaCBjYW4gYmUgd2hpbGUgc3RpbGwgYmVpbmcgY29uc2lkZXJlZCBhIHRhcFxuXG4gICAgICB2YXIgdG91Y2hUaW1lVGhyZXNob2xkID0gMjAwO1xuICAgICAgdmFyIGNvdWxkQmVUYXA7XG4gICAgICB0aGlzLm9uKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIElmIG1vcmUgdGhhbiBvbmUgZmluZ2VyLCBkb24ndCBjb25zaWRlciB0cmVhdGluZyB0aGlzIGFzIGEgY2xpY2tcbiAgICAgICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgLy8gQ29weSBwYWdlWC9wYWdlWSBmcm9tIHRoZSBvYmplY3RcbiAgICAgICAgICBmaXJzdFRvdWNoID0ge1xuICAgICAgICAgICAgcGFnZVg6IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVgsXG4gICAgICAgICAgICBwYWdlWTogZXZlbnQudG91Y2hlc1swXS5wYWdlWVxuICAgICAgICAgIH07IC8vIFJlY29yZCBzdGFydCB0aW1lIHNvIHdlIGNhbiBkZXRlY3QgYSB0YXAgdnMuIFwidG91Y2ggYW5kIGhvbGRcIlxuXG4gICAgICAgICAgdG91Y2hTdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOyAvLyBSZXNldCBjb3VsZEJlVGFwIHRyYWNraW5nXG5cbiAgICAgICAgICBjb3VsZEJlVGFwID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLm9uKCd0b3VjaG1vdmUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gSWYgbW9yZSB0aGFuIG9uZSBmaW5nZXIsIGRvbid0IGNvbnNpZGVyIHRyZWF0aW5nIHRoaXMgYXMgYSBjbGlja1xuICAgICAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgY291bGRCZVRhcCA9IGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGZpcnN0VG91Y2gpIHtcbiAgICAgICAgICAvLyBTb21lIGRldmljZXMgd2lsbCB0aHJvdyB0b3VjaG1vdmVzIGZvciBhbGwgYnV0IHRoZSBzbGlnaHRlc3Qgb2YgdGFwcy5cbiAgICAgICAgICAvLyBTbywgaWYgd2UgbW92ZWQgb25seSBhIHNtYWxsIGRpc3RhbmNlLCB0aGlzIGNvdWxkIHN0aWxsIGJlIGEgdGFwXG4gICAgICAgICAgdmFyIHhkaWZmID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWCAtIGZpcnN0VG91Y2gucGFnZVg7XG4gICAgICAgICAgdmFyIHlkaWZmID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWSAtIGZpcnN0VG91Y2gucGFnZVk7XG4gICAgICAgICAgdmFyIHRvdWNoRGlzdGFuY2UgPSBNYXRoLnNxcnQoeGRpZmYgKiB4ZGlmZiArIHlkaWZmICogeWRpZmYpO1xuXG4gICAgICAgICAgaWYgKHRvdWNoRGlzdGFuY2UgPiB0YXBNb3ZlbWVudFRocmVzaG9sZCkge1xuICAgICAgICAgICAgY291bGRCZVRhcCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHZhciBub1RhcCA9IGZ1bmN0aW9uIG5vVGFwKCkge1xuICAgICAgICBjb3VsZEJlVGFwID0gZmFsc2U7XG4gICAgICB9OyAvLyBUT0RPOiBMaXN0ZW4gdG8gdGhlIG9yaWdpbmFsIHRhcmdldC4gaHR0cDovL3lvdXR1LmJlL0R1amZwWE9LVXA4P3Q9MTNtOHNcblxuXG4gICAgICB0aGlzLm9uKCd0b3VjaGxlYXZlJywgbm9UYXApO1xuICAgICAgdGhpcy5vbigndG91Y2hjYW5jZWwnLCBub1RhcCk7IC8vIFdoZW4gdGhlIHRvdWNoIGVuZHMsIG1lYXN1cmUgaG93IGxvbmcgaXQgdG9vayBhbmQgdHJpZ2dlciB0aGUgYXBwcm9wcmlhdGVcbiAgICAgIC8vIGV2ZW50XG5cbiAgICAgIHRoaXMub24oJ3RvdWNoZW5kJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGZpcnN0VG91Y2ggPSBudWxsOyAvLyBQcm9jZWVkIG9ubHkgaWYgdGhlIHRvdWNobW92ZS9sZWF2ZS9jYW5jZWwgZXZlbnQgZGlkbid0IGhhcHBlblxuXG4gICAgICAgIGlmIChjb3VsZEJlVGFwID09PSB0cnVlKSB7XG4gICAgICAgICAgLy8gTWVhc3VyZSBob3cgbG9uZyB0aGUgdG91Y2ggbGFzdGVkXG4gICAgICAgICAgdmFyIHRvdWNoVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdG91Y2hTdGFydDsgLy8gTWFrZSBzdXJlIHRoZSB0b3VjaCB3YXMgbGVzcyB0aGFuIHRoZSB0aHJlc2hvbGQgdG8gYmUgY29uc2lkZXJlZCBhIHRhcFxuXG4gICAgICAgICAgaWYgKHRvdWNoVGltZSA8IHRvdWNoVGltZVRocmVzaG9sZCkge1xuICAgICAgICAgICAgLy8gRG9uJ3QgbGV0IGJyb3dzZXIgdHVybiB0aGlzIGludG8gYSBjbGlja1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVHJpZ2dlcmVkIHdoZW4gYSBgQ29tcG9uZW50YCBpcyB0YXBwZWQuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQGV2ZW50IENvbXBvbmVudCN0YXBcbiAgICAgICAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3RhcCcpOyAvLyBJdCBtYXkgYmUgZ29vZCB0byBjb3B5IHRoZSB0b3VjaGVuZCBldmVudCBvYmplY3QgYW5kIGNoYW5nZSB0aGVcbiAgICAgICAgICAgIC8vIHR5cGUgdG8gdGFwLCBpZiB0aGUgb3RoZXIgZXZlbnQgcHJvcGVydGllcyBhcmVuJ3QgZXhhY3QgYWZ0ZXJcbiAgICAgICAgICAgIC8vIEV2ZW50cy5maXhFdmVudCBydW5zIChlLmcuIGV2ZW50LnRhcmdldClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHJlcG9ydHMgdXNlciBhY3Rpdml0eSB3aGVuZXZlciB0b3VjaCBldmVudHMgaGFwcGVuLiBUaGlzIGNhbiBnZXRcbiAgICAgKiB0dXJuZWQgb2ZmIGJ5IGFueSBzdWItY29tcG9uZW50cyB0aGF0IHdhbnRzIHRvdWNoIGV2ZW50cyB0byBhY3QgYW5vdGhlciB3YXkuXG4gICAgICpcbiAgICAgKiBSZXBvcnQgdXNlciB0b3VjaCBhY3Rpdml0eSB3aGVuIHRvdWNoIGV2ZW50cyBvY2N1ci4gVXNlciBhY3Rpdml0eSBnZXRzIHVzZWQgdG9cbiAgICAgKiBkZXRlcm1pbmUgd2hlbiBjb250cm9scyBzaG91bGQgc2hvdy9oaWRlLiBJdCBpcyBzaW1wbGUgd2hlbiBpdCBjb21lcyB0byBtb3VzZVxuICAgICAqIGV2ZW50cywgYmVjYXVzZSBhbnkgbW91c2UgZXZlbnQgc2hvdWxkIHNob3cgdGhlIGNvbnRyb2xzLiBTbyB3ZSBjYXB0dXJlIG1vdXNlXG4gICAgICogZXZlbnRzIHRoYXQgYnViYmxlIHVwIHRvIHRoZSBwbGF5ZXIgYW5kIHJlcG9ydCBhY3Rpdml0eSB3aGVuIHRoYXQgaGFwcGVucy5cbiAgICAgKiBXaXRoIHRvdWNoIGV2ZW50cyBpdCBpc24ndCBhcyBlYXN5IGFzIGB0b3VjaHN0YXJ0YCBhbmQgYHRvdWNoZW5kYCB0b2dnbGUgcGxheWVyXG4gICAgICogY29udHJvbHMuIFNvIHRvdWNoIGV2ZW50cyBjYW4ndCBoZWxwIHVzIGF0IHRoZSBwbGF5ZXIgbGV2ZWwgZWl0aGVyLlxuICAgICAqXG4gICAgICogVXNlciBhY3Rpdml0eSBnZXRzIGNoZWNrZWQgYXN5bmNocm9ub3VzbHkuIFNvIHdoYXQgY291bGQgaGFwcGVuIGlzIGEgdGFwIGV2ZW50XG4gICAgICogb24gdGhlIHZpZGVvIHR1cm5zIHRoZSBjb250cm9scyBvZmYuIFRoZW4gdGhlIGB0b3VjaGVuZGAgZXZlbnQgYnViYmxlcyB1cCB0b1xuICAgICAqIHRoZSBwbGF5ZXIuIFdoaWNoLCBpZiBpdCByZXBvcnRlZCB1c2VyIGFjdGl2aXR5LCB3b3VsZCB0dXJuIHRoZSBjb250cm9scyByaWdodFxuICAgICAqIGJhY2sgb24uIFdlIGFsc28gZG9uJ3Qgd2FudCB0byBjb21wbGV0ZWx5IGJsb2NrIHRvdWNoIGV2ZW50cyBmcm9tIGJ1YmJsaW5nIHVwLlxuICAgICAqIEZ1cnRoZXJtb3JlIGEgYHRvdWNobW92ZWAgZXZlbnQgYW5kIGFueXRoaW5nIG90aGVyIHRoYW4gYSB0YXAsIHNob3VsZCBub3QgdHVyblxuICAgICAqIGNvbnRyb2xzIGJhY2sgb24uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBDb21wb25lbnQjdG91Y2hzdGFydFxuICAgICAqIEBsaXN0ZW5zIENvbXBvbmVudCN0b3VjaG1vdmVcbiAgICAgKiBAbGlzdGVucyBDb21wb25lbnQjdG91Y2hlbmRcbiAgICAgKiBAbGlzdGVucyBDb21wb25lbnQjdG91Y2hjYW5jZWxcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZW5hYmxlVG91Y2hBY3Rpdml0eSA9IGZ1bmN0aW9uIGVuYWJsZVRvdWNoQWN0aXZpdHkoKSB7XG4gICAgICAvLyBEb24ndCBjb250aW51ZSBpZiB0aGUgcm9vdCBwbGF5ZXIgZG9lc24ndCBzdXBwb3J0IHJlcG9ydGluZyB1c2VyIGFjdGl2aXR5XG4gICAgICBpZiAoIXRoaXMucGxheWVyKCkgfHwgIXRoaXMucGxheWVyKCkucmVwb3J0VXNlckFjdGl2aXR5KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gbGlzdGVuZXIgZm9yIHJlcG9ydGluZyB0aGF0IHRoZSB1c2VyIGlzIGFjdGl2ZVxuXG5cbiAgICAgIHZhciByZXBvcnQgPSBiaW5kKHRoaXMucGxheWVyKCksIHRoaXMucGxheWVyKCkucmVwb3J0VXNlckFjdGl2aXR5KTtcbiAgICAgIHZhciB0b3VjaEhvbGRpbmc7XG4gICAgICB0aGlzLm9uKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXBvcnQoKTsgLy8gRm9yIGFzIGxvbmcgYXMgdGhlIHRoZXkgYXJlIHRvdWNoaW5nIHRoZSBkZXZpY2Ugb3IgaGF2ZSB0aGVpciBtb3VzZSBkb3duLFxuICAgICAgICAvLyB3ZSBjb25zaWRlciB0aGVtIGFjdGl2ZSBldmVuIGlmIHRoZXkncmUgbm90IG1vdmluZyB0aGVpciBmaW5nZXIgb3IgbW91c2UuXG4gICAgICAgIC8vIFNvIHdlIHdhbnQgdG8gY29udGludWUgdG8gdXBkYXRlIHRoYXQgdGhleSBhcmUgYWN0aXZlXG5cbiAgICAgICAgdGhpcy5jbGVhckludGVydmFsKHRvdWNoSG9sZGluZyk7IC8vIHJlcG9ydCBhdCB0aGUgc2FtZSBpbnRlcnZhbCBhcyBhY3Rpdml0eUNoZWNrXG5cbiAgICAgICAgdG91Y2hIb2xkaW5nID0gdGhpcy5zZXRJbnRlcnZhbChyZXBvcnQsIDI1MCk7XG4gICAgICB9KTtcblxuICAgICAgdmFyIHRvdWNoRW5kID0gZnVuY3Rpb24gdG91Y2hFbmQoZXZlbnQpIHtcbiAgICAgICAgcmVwb3J0KCk7IC8vIHN0b3AgdGhlIGludGVydmFsIHRoYXQgbWFpbnRhaW5zIGFjdGl2aXR5IGlmIHRoZSB0b3VjaCBpcyBob2xkaW5nXG5cbiAgICAgICAgdGhpcy5jbGVhckludGVydmFsKHRvdWNoSG9sZGluZyk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLm9uKCd0b3VjaG1vdmUnLCByZXBvcnQpO1xuICAgICAgdGhpcy5vbigndG91Y2hlbmQnLCB0b3VjaEVuZCk7XG4gICAgICB0aGlzLm9uKCd0b3VjaGNhbmNlbCcsIHRvdWNoRW5kKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBjYWxsYmFjayB0aGF0IGhhcyBubyBwYXJhbWV0ZXJzIGFuZCBpcyBib3VuZCBpbnRvIGBDb21wb25lbnRgcyBjb250ZXh0LlxuICAgICAqXG4gICAgICogQGNhbGxiYWNrIENvbXBvbmVudH5HZW5lcmljQ2FsbGJhY2tcbiAgICAgKiBAdGhpcyBDb21wb25lbnRcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHJ1bnMgYWZ0ZXIgYW4gYHhgIG1pbGxpc2Vjb25kIHRpbWVvdXQuIFRoaXMgZnVuY3Rpb24gaXMgYVxuICAgICAqIHdyYXBwZXIgYXJvdW5kIGB3aW5kb3cuc2V0VGltZW91dGAuIFRoZXJlIGFyZSBhIGZldyByZWFzb25zIHRvIHVzZSB0aGlzIG9uZVxuICAgICAqIGluc3RlYWQgdGhvdWdoOlxuICAgICAqIDEuIEl0IGdldHMgY2xlYXJlZCB2aWEgIHtAbGluayBDb21wb25lbnQjY2xlYXJUaW1lb3V0fSB3aGVuXG4gICAgICogICAge0BsaW5rIENvbXBvbmVudCNkaXNwb3NlfSBnZXRzIGNhbGxlZC5cbiAgICAgKiAyLiBUaGUgZnVuY3Rpb24gY2FsbGJhY2sgd2lsbCBnZXRzIHR1cm5lZCBpbnRvIGEge0BsaW5rIENvbXBvbmVudH5HZW5lcmljQ2FsbGJhY2t9XG4gICAgICpcbiAgICAgKiA+IE5vdGU6IFlvdSBjYW4ndCB1c2UgYHdpbmRvdy5jbGVhclRpbWVvdXRgIG9uIHRoZSBpZCByZXR1cm5lZCBieSB0aGlzIGZ1bmN0aW9uLiBUaGlzXG4gICAgICogICAgICAgICB3aWxsIGNhdXNlIGl0cyBkaXNwb3NlIGxpc3RlbmVyIG5vdCB0byBnZXQgY2xlYW5lZCB1cCEgUGxlYXNlIHVzZVxuICAgICAqICAgICAgICAge0BsaW5rIENvbXBvbmVudCNjbGVhclRpbWVvdXR9IG9yIHtAbGluayBDb21wb25lbnQjZGlzcG9zZX0gaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Q29tcG9uZW50fkdlbmVyaWNDYWxsYmFja30gZm5cbiAgICAgKiAgICAgICAgVGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBydW4gYWZ0ZXIgYHRpbWVvdXRgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVvdXRcbiAgICAgKiAgICAgICAgVGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gZGVsYXkgYmVmb3JlIGV4ZWN1dGluZyB0aGUgc3BlY2lmaWVkIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqICAgICAgICAgUmV0dXJucyBhIHRpbWVvdXQgSUQgdGhhdCBnZXRzIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHRpbWVvdXQuIEl0IGNhbiBhbHNvXG4gICAgICogICAgICAgICBnZXQgdXNlZCBpbiB7QGxpbmsgQ29tcG9uZW50I2NsZWFyVGltZW91dH0gdG8gY2xlYXIgdGhlIHRpbWVvdXQgdGhhdFxuICAgICAqICAgICAgICAgd2FzIHNldC5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIENvbXBvbmVudCNkaXNwb3NlXG4gICAgICogQHNlZSBbU2ltaWxhciB0b117QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvd1RpbWVycy9zZXRUaW1lb3V0fVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zZXRUaW1lb3V0ID0gZnVuY3Rpb24gc2V0VGltZW91dChmbiwgdGltZW91dCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIC8vIGRlY2xhcmUgYXMgdmFyaWFibGVzIHNvIHRoZXkgYXJlIHByb3Blcmx5IGF2YWlsYWJsZSBpbiB0aW1lb3V0IGZ1bmN0aW9uXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgIHZhciB0aW1lb3V0SWQsIGRpc3Bvc2VGbjtcbiAgICAgIGZuID0gYmluZCh0aGlzLCBmbik7XG4gICAgICB0aW1lb3V0SWQgPSB3aW5kb3ckMS5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMyLm9mZignZGlzcG9zZScsIGRpc3Bvc2VGbik7XG5cbiAgICAgICAgZm4oKTtcbiAgICAgIH0sIHRpbWVvdXQpO1xuXG4gICAgICBkaXNwb3NlRm4gPSBmdW5jdGlvbiBkaXNwb3NlRm4oKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICB9O1xuXG4gICAgICBkaXNwb3NlRm4uZ3VpZCA9IFwidmpzLXRpbWVvdXQtXCIgKyB0aW1lb3V0SWQ7XG4gICAgICB0aGlzLm9uKCdkaXNwb3NlJywgZGlzcG9zZUZuKTtcbiAgICAgIHJldHVybiB0aW1lb3V0SWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyBhIHRpbWVvdXQgdGhhdCBnZXRzIGNyZWF0ZWQgdmlhIGB3aW5kb3cuc2V0VGltZW91dGAgb3JcbiAgICAgKiB7QGxpbmsgQ29tcG9uZW50I3NldFRpbWVvdXR9LiBJZiB5b3Ugc2V0IGEgdGltZW91dCB2aWEge0BsaW5rIENvbXBvbmVudCNzZXRUaW1lb3V0fVxuICAgICAqIHVzZSB0aGlzIGZ1bmN0aW9uIGluc3RlYWQgb2YgYHdpbmRvdy5jbGVhclRpbW91dGAuIElmIHlvdSBkb24ndCB5b3VyIGRpc3Bvc2VcbiAgICAgKiBsaXN0ZW5lciB3aWxsIG5vdCBnZXQgY2xlYW5lZCB1cCB1bnRpbCB7QGxpbmsgQ29tcG9uZW50I2Rpc3Bvc2V9IVxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVvdXRJZFxuICAgICAqICAgICAgICBUaGUgaWQgb2YgdGhlIHRpbWVvdXQgdG8gY2xlYXIuIFRoZSByZXR1cm4gdmFsdWUgb2ZcbiAgICAgKiAgICAgICAge0BsaW5rIENvbXBvbmVudCNzZXRUaW1lb3V0fSBvciBgd2luZG93LnNldFRpbWVvdXRgLlxuICAgICAqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqICAgICAgICAgUmV0dXJucyB0aGUgdGltZW91dCBpZCB0aGF0IHdhcyBjbGVhcmVkLlxuICAgICAqXG4gICAgICogQHNlZSBbU2ltaWxhciB0b117QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvd1RpbWVycy9jbGVhclRpbWVvdXR9XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNsZWFyVGltZW91dCA9IGZ1bmN0aW9uIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpIHtcbiAgICAgIHdpbmRvdyQxLmNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXG4gICAgICB2YXIgZGlzcG9zZUZuID0gZnVuY3Rpb24gZGlzcG9zZUZuKCkge307XG5cbiAgICAgIGRpc3Bvc2VGbi5ndWlkID0gXCJ2anMtdGltZW91dC1cIiArIHRpbWVvdXRJZDtcbiAgICAgIHRoaXMub2ZmKCdkaXNwb3NlJywgZGlzcG9zZUZuKTtcbiAgICAgIHJldHVybiB0aW1lb3V0SWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGdldHMgcnVuIGV2ZXJ5IGB4YCBtaWxsaXNlY29uZHMuIFRoaXMgZnVuY3Rpb24gaXMgYSB3cmFwcGVyXG4gICAgICogYXJvdW5kIGB3aW5kb3cuc2V0SW50ZXJ2YWxgLiBUaGVyZSBhcmUgYSBmZXcgcmVhc29ucyB0byB1c2UgdGhpcyBvbmUgaW5zdGVhZCB0aG91Z2guXG4gICAgICogMS4gSXQgZ2V0cyBjbGVhcmVkIHZpYSAge0BsaW5rIENvbXBvbmVudCNjbGVhckludGVydmFsfSB3aGVuXG4gICAgICogICAge0BsaW5rIENvbXBvbmVudCNkaXNwb3NlfSBnZXRzIGNhbGxlZC5cbiAgICAgKiAyLiBUaGUgZnVuY3Rpb24gY2FsbGJhY2sgd2lsbCBiZSBhIHtAbGluayBDb21wb25lbnR+R2VuZXJpY0NhbGxiYWNrfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtDb21wb25lbnR+R2VuZXJpY0NhbGxiYWNrfSBmblxuICAgICAqICAgICAgICBUaGUgZnVuY3Rpb24gdG8gcnVuIGV2ZXJ5IGB4YCBzZWNvbmRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGludGVydmFsXG4gICAgICogICAgICAgIEV4ZWN1dGUgdGhlIHNwZWNpZmllZCBmdW5jdGlvbiBldmVyeSBgeGAgbWlsbGlzZWNvbmRzLlxuICAgICAqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqICAgICAgICAgUmV0dXJucyBhbiBpZCB0aGF0IGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHRoZSBpbnRlcnZhbC4gSXQgY2FuIGFsc28gYmUgYmUgdXNlZCBpblxuICAgICAqICAgICAgICAge0BsaW5rIENvbXBvbmVudCNjbGVhckludGVydmFsfSB0byBjbGVhciB0aGUgaW50ZXJ2YWwuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBDb21wb25lbnQjZGlzcG9zZVxuICAgICAqIEBzZWUgW1NpbWlsYXIgdG9de0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaW5kb3dUaW1lcnMvc2V0SW50ZXJ2YWx9XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnNldEludGVydmFsID0gZnVuY3Rpb24gc2V0SW50ZXJ2YWwoZm4sIGludGVydmFsKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgZm4gPSBiaW5kKHRoaXMsIGZuKTtcbiAgICAgIHZhciBpbnRlcnZhbElkID0gd2luZG93JDEuc2V0SW50ZXJ2YWwoZm4sIGludGVydmFsKTtcblxuICAgICAgdmFyIGRpc3Bvc2VGbiA9IGZ1bmN0aW9uIGRpc3Bvc2VGbigpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMy5jbGVhckludGVydmFsKGludGVydmFsSWQpO1xuICAgICAgfTtcblxuICAgICAgZGlzcG9zZUZuLmd1aWQgPSBcInZqcy1pbnRlcnZhbC1cIiArIGludGVydmFsSWQ7XG4gICAgICB0aGlzLm9uKCdkaXNwb3NlJywgZGlzcG9zZUZuKTtcbiAgICAgIHJldHVybiBpbnRlcnZhbElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgYW4gaW50ZXJ2YWwgdGhhdCBnZXRzIGNyZWF0ZWQgdmlhIGB3aW5kb3cuc2V0SW50ZXJ2YWxgIG9yXG4gICAgICoge0BsaW5rIENvbXBvbmVudCNzZXRJbnRlcnZhbH0uIElmIHlvdSBzZXQgYW4gaW50ZXZhbCB2aWEge0BsaW5rIENvbXBvbmVudCNzZXRJbnRlcnZhbH1cbiAgICAgKiB1c2UgdGhpcyBmdW5jdGlvbiBpbnN0ZWFkIG9mIGB3aW5kb3cuY2xlYXJJbnRlcnZhbGAuIElmIHlvdSBkb24ndCB5b3VyIGRpc3Bvc2VcbiAgICAgKiBsaXN0ZW5lciB3aWxsIG5vdCBnZXQgY2xlYW5lZCB1cCB1bnRpbCB7QGxpbmsgQ29tcG9uZW50I2Rpc3Bvc2V9IVxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGludGVydmFsSWRcbiAgICAgKiAgICAgICAgVGhlIGlkIG9mIHRoZSBpbnRlcnZhbCB0byBjbGVhci4gVGhlIHJldHVybiB2YWx1ZSBvZlxuICAgICAqICAgICAgICB7QGxpbmsgQ29tcG9uZW50I3NldEludGVydmFsfSBvciBgd2luZG93LnNldEludGVydmFsYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKiAgICAgICAgIFJldHVybnMgdGhlIGludGVydmFsIGlkIHRoYXQgd2FzIGNsZWFyZWQuXG4gICAgICpcbiAgICAgKiBAc2VlIFtTaW1pbGFyIHRvXXtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93VGltZXJzL2NsZWFySW50ZXJ2YWx9XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbiBjbGVhckludGVydmFsKGludGVydmFsSWQpIHtcbiAgICAgIHdpbmRvdyQxLmNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7XG5cbiAgICAgIHZhciBkaXNwb3NlRm4gPSBmdW5jdGlvbiBkaXNwb3NlRm4oKSB7fTtcblxuICAgICAgZGlzcG9zZUZuLmd1aWQgPSBcInZqcy1pbnRlcnZhbC1cIiArIGludGVydmFsSWQ7XG4gICAgICB0aGlzLm9mZignZGlzcG9zZScsIGRpc3Bvc2VGbik7XG4gICAgICByZXR1cm4gaW50ZXJ2YWxJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUXVldWVzIHVwIGEgY2FsbGJhY2sgdG8gYmUgcGFzc2VkIHRvIHJlcXVlc3RBbmltYXRpb25GcmFtZSAockFGKSwgYnV0XG4gICAgICogd2l0aCBhIGZldyBleHRyYSBib251c2VzOlxuICAgICAqXG4gICAgICogLSBTdXBwb3J0cyBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IHJBRiBieSBmYWxsaW5nIGJhY2sgdG9cbiAgICAgKiAgIHtAbGluayBDb21wb25lbnQjc2V0VGltZW91dH0uXG4gICAgICpcbiAgICAgKiAtIFRoZSBjYWxsYmFjayBpcyB0dXJuZWQgaW50byBhIHtAbGluayBDb21wb25lbnR+R2VuZXJpY0NhbGxiYWNrfSAoaS5lLlxuICAgICAqICAgYm91bmQgdG8gdGhlIGNvbXBvbmVudCkuXG4gICAgICpcbiAgICAgKiAtIEF1dG9tYXRpYyBjYW5jZWxsYXRpb24gb2YgdGhlIHJBRiBjYWxsYmFjayBpcyBoYW5kbGVkIGlmIHRoZSBjb21wb25lbnRcbiAgICAgKiAgIGlzIGRpc3Bvc2VkIGJlZm9yZSBpdCBpcyBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtDb21wb25lbnR+R2VuZXJpY0NhbGxiYWNrfSBmblxuICAgICAqICAgICAgICAgQSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgYm91bmQgdG8gdGhpcyBjb21wb25lbnQgYW5kIGV4ZWN1dGVkIGp1c3RcbiAgICAgKiAgICAgICAgIGJlZm9yZSB0aGUgYnJvd3NlcidzIG5leHQgcmVwYWludC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKiAgICAgICAgIFJldHVybnMgYW4gckFGIElEIHRoYXQgZ2V0cyB1c2VkIHRvIGlkZW50aWZ5IHRoZSB0aW1lb3V0LiBJdCBjYW5cbiAgICAgKiAgICAgICAgIGFsc28gYmUgdXNlZCBpbiB7QGxpbmsgQ29tcG9uZW50I2NhbmNlbEFuaW1hdGlvbkZyYW1lfSB0byBjYW5jZWxcbiAgICAgKiAgICAgICAgIHRoZSBhbmltYXRpb24gZnJhbWUgY2FsbGJhY2suXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBDb21wb25lbnQjZGlzcG9zZVxuICAgICAqIEBzZWUgW1NpbWlsYXIgdG9de0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS93aW5kb3cvcmVxdWVzdEFuaW1hdGlvbkZyYW1lfVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZm4pIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICAvLyBkZWNsYXJlIGFzIHZhcmlhYmxlcyBzbyB0aGV5IGFyZSBwcm9wZXJseSBhdmFpbGFibGUgaW4gckFGIGZ1bmN0aW9uXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgIHZhciBpZCwgZGlzcG9zZUZuO1xuXG4gICAgICBpZiAodGhpcy5zdXBwb3J0c1JhZl8pIHtcbiAgICAgICAgZm4gPSBiaW5kKHRoaXMsIGZuKTtcbiAgICAgICAgaWQgPSB3aW5kb3ckMS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzNC5vZmYoJ2Rpc3Bvc2UnLCBkaXNwb3NlRm4pO1xuXG4gICAgICAgICAgZm4oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGlzcG9zZUZuID0gZnVuY3Rpb24gZGlzcG9zZUZuKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczQuY2FuY2VsQW5pbWF0aW9uRnJhbWUoaWQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGRpc3Bvc2VGbi5ndWlkID0gXCJ2anMtcmFmLVwiICsgaWQ7XG4gICAgICAgIHRoaXMub24oJ2Rpc3Bvc2UnLCBkaXNwb3NlRm4pO1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9IC8vIEZhbGwgYmFjayB0byB1c2luZyBhIHRpbWVyLlxuXG5cbiAgICAgIHJldHVybiB0aGlzLnNldFRpbWVvdXQoZm4sIDEwMDAgLyA2MCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbmNlbHMgYSBxdWV1ZWQgY2FsbGJhY2sgcGFzc2VkIHRvIHtAbGluayBDb21wb25lbnQjcmVxdWVzdEFuaW1hdGlvbkZyYW1lfVxuICAgICAqIChyQUYpLlxuICAgICAqXG4gICAgICogSWYgeW91IHF1ZXVlIGFuIHJBRiBjYWxsYmFjayB2aWEge0BsaW5rIENvbXBvbmVudCNyZXF1ZXN0QW5pbWF0aW9uRnJhbWV9LFxuICAgICAqIHVzZSB0aGlzIGZ1bmN0aW9uIGluc3RlYWQgb2YgYHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZWAuIElmIHlvdSBkb24ndCxcbiAgICAgKiB5b3VyIGRpc3Bvc2UgbGlzdGVuZXIgd2lsbCBub3QgZ2V0IGNsZWFuZWQgdXAgdW50aWwge0BsaW5rIENvbXBvbmVudCNkaXNwb3NlfSFcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpZFxuICAgICAqICAgICAgICBUaGUgckFGIElEIHRvIGNsZWFyLiBUaGUgcmV0dXJuIHZhbHVlIG9mIHtAbGluayBDb21wb25lbnQjcmVxdWVzdEFuaW1hdGlvbkZyYW1lfS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKiAgICAgICAgIFJldHVybnMgdGhlIHJBRiBJRCB0aGF0IHdhcyBjbGVhcmVkLlxuICAgICAqXG4gICAgICogQHNlZSBbU2ltaWxhciB0b117QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL3dpbmRvdy9jYW5jZWxBbmltYXRpb25GcmFtZX1cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiBjYW5jZWxBbmltYXRpb25GcmFtZShpZCkge1xuICAgICAgaWYgKHRoaXMuc3VwcG9ydHNSYWZfKSB7XG4gICAgICAgIHdpbmRvdyQxLmNhbmNlbEFuaW1hdGlvbkZyYW1lKGlkKTtcblxuICAgICAgICB2YXIgZGlzcG9zZUZuID0gZnVuY3Rpb24gZGlzcG9zZUZuKCkge307XG5cbiAgICAgICAgZGlzcG9zZUZuLmd1aWQgPSBcInZqcy1yYWYtXCIgKyBpZDtcbiAgICAgICAgdGhpcy5vZmYoJ2Rpc3Bvc2UnLCBkaXNwb3NlRm4pO1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9IC8vIEZhbGwgYmFjayB0byB1c2luZyBhIHRpbWVyLlxuXG5cbiAgICAgIHJldHVybiB0aGlzLmNsZWFyVGltZW91dChpZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgYENvbXBvbmVudGAgd2l0aCBgdmlkZW9qc2AgZ2l2ZW4gdGhlIG5hbWUgYW5kIHRoZSBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiA+IE5PVEU6IHtAbGluayBUZWNofXMgc2hvdWxkIG5vdCBiZSByZWdpc3RlcmVkIGFzIGEgYENvbXBvbmVudGAuIHtAbGluayBUZWNofXNcbiAgICAgKiAgICAgICAgIHNob3VsZCBiZSByZWdpc3RlcmVkIHVzaW5nIHtAbGluayBUZWNoLnJlZ2lzdGVyVGVjaH0gb3JcbiAgICAgKiAgICAgICAgIHtAbGluayB2aWRlb2pzOnZpZGVvanMucmVnaXN0ZXJUZWNofS5cbiAgICAgKlxuICAgICAqID4gTk9URTogVGhpcyBmdW5jdGlvbiBjYW4gYWxzbyBiZSBzZWVuIG9uIHZpZGVvanMgYXNcbiAgICAgKiAgICAgICAgIHtAbGluayB2aWRlb2pzOnZpZGVvanMucmVnaXN0ZXJDb21wb25lbnR9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiAgICAgICAgVGhlIG5hbWUgb2YgdGhlIGBDb21wb25lbnRgIHRvIHJlZ2lzdGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDb21wb25lbnR9IENvbXBvbmVudFRvUmVnaXN0ZXJcbiAgICAgKiAgICAgICAgVGhlIGBDb21wb25lbnRgIGNsYXNzIHRvIHJlZ2lzdGVyLlxuICAgICAqXG4gICAgICogQHJldHVybiB7Q29tcG9uZW50fVxuICAgICAqICAgICAgICAgVGhlIGBDb21wb25lbnRgIHRoYXQgd2FzIHJlZ2lzdGVyZWQuXG4gICAgICovXG4gICAgO1xuXG4gICAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50ID0gZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnQobmFtZSwgQ29tcG9uZW50VG9SZWdpc3Rlcikge1xuICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJyB8fCAhbmFtZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbGxlZ2FsIGNvbXBvbmVudCBuYW1lLCBcXFwiXCIgKyBuYW1lICsgXCJcXFwiOyBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZy5cIik7XG4gICAgICB9XG5cbiAgICAgIHZhciBUZWNoID0gQ29tcG9uZW50LmdldENvbXBvbmVudCgnVGVjaCcpOyAvLyBXZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGlzIGNoZWNrIGlzIG9ubHkgZG9uZSBpZiBUZWNoIGhhcyBiZWVuIHJlZ2lzdGVyZWQuXG5cbiAgICAgIHZhciBpc1RlY2ggPSBUZWNoICYmIFRlY2guaXNUZWNoKENvbXBvbmVudFRvUmVnaXN0ZXIpO1xuICAgICAgdmFyIGlzQ29tcCA9IENvbXBvbmVudCA9PT0gQ29tcG9uZW50VG9SZWdpc3RlciB8fCBDb21wb25lbnQucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoQ29tcG9uZW50VG9SZWdpc3Rlci5wcm90b3R5cGUpO1xuXG4gICAgICBpZiAoaXNUZWNoIHx8ICFpc0NvbXApIHtcbiAgICAgICAgdmFyIHJlYXNvbjtcblxuICAgICAgICBpZiAoaXNUZWNoKSB7XG4gICAgICAgICAgcmVhc29uID0gJ3RlY2hzIG11c3QgYmUgcmVnaXN0ZXJlZCB1c2luZyBUZWNoLnJlZ2lzdGVyVGVjaCgpJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZWFzb24gPSAnbXVzdCBiZSBhIENvbXBvbmVudCBzdWJjbGFzcyc7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbGxlZ2FsIGNvbXBvbmVudCwgXFxcIlwiICsgbmFtZSArIFwiXFxcIjsgXCIgKyByZWFzb24gKyBcIi5cIik7XG4gICAgICB9XG5cbiAgICAgIG5hbWUgPSB0b1RpdGxlQ2FzZShuYW1lKTtcblxuICAgICAgaWYgKCFDb21wb25lbnQuY29tcG9uZW50c18pIHtcbiAgICAgICAgQ29tcG9uZW50LmNvbXBvbmVudHNfID0ge307XG4gICAgICB9XG5cbiAgICAgIHZhciBQbGF5ZXIgPSBDb21wb25lbnQuZ2V0Q29tcG9uZW50KCdQbGF5ZXInKTtcblxuICAgICAgaWYgKG5hbWUgPT09ICdQbGF5ZXInICYmIFBsYXllciAmJiBQbGF5ZXIucGxheWVycykge1xuICAgICAgICB2YXIgcGxheWVycyA9IFBsYXllci5wbGF5ZXJzO1xuICAgICAgICB2YXIgcGxheWVyTmFtZXMgPSBPYmplY3Qua2V5cyhwbGF5ZXJzKTsgLy8gSWYgd2UgaGF2ZSBwbGF5ZXJzIHRoYXQgd2VyZSBkaXNwb3NlZCwgdGhlbiB0aGVpciBuYW1lIHdpbGwgc3RpbGwgYmVcbiAgICAgICAgLy8gaW4gUGxheWVycy5wbGF5ZXJzLiBTbywgd2UgbXVzdCBsb29wIHRocm91Z2ggYW5kIHZlcmlmeSB0aGF0IHRoZSB2YWx1ZVxuICAgICAgICAvLyBmb3IgZWFjaCBpdGVtIGlzIG5vdCBudWxsLiBUaGlzIGFsbG93cyByZWdpc3RyYXRpb24gb2YgdGhlIFBsYXllciBjb21wb25lbnRcbiAgICAgICAgLy8gYWZ0ZXIgYWxsIHBsYXllcnMgaGF2ZSBiZWVuIGRpc3Bvc2VkIG9yIGJlZm9yZSBhbnkgd2VyZSBjcmVhdGVkLlxuXG4gICAgICAgIGlmIChwbGF5ZXJzICYmIHBsYXllck5hbWVzLmxlbmd0aCA+IDAgJiYgcGxheWVyTmFtZXMubWFwKGZ1bmN0aW9uIChwbmFtZSkge1xuICAgICAgICAgIHJldHVybiBwbGF5ZXJzW3BuYW1lXTtcbiAgICAgICAgfSkuZXZlcnkoQm9vbGVhbikpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbiBub3QgcmVnaXN0ZXIgUGxheWVyIGNvbXBvbmVudCBhZnRlciBwbGF5ZXIgaGFzIGJlZW4gY3JlYXRlZC4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBDb21wb25lbnQuY29tcG9uZW50c19bbmFtZV0gPSBDb21wb25lbnRUb1JlZ2lzdGVyO1xuICAgICAgcmV0dXJuIENvbXBvbmVudFRvUmVnaXN0ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhIGBDb21wb25lbnRgIGJhc2VkIG9uIHRoZSBuYW1lIGl0IHdhcyByZWdpc3RlcmVkIHdpdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqICAgICAgICBUaGUgTmFtZSBvZiB0aGUgY29tcG9uZW50IHRvIGdldC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0NvbXBvbmVudH1cbiAgICAgKiAgICAgICAgIFRoZSBgQ29tcG9uZW50YCB0aGF0IGdvdCByZWdpc3RlcmVkIHVuZGVyIHRoZSBnaXZlbiBuYW1lLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgSW4gYHZpZGVvanNgIDYgdGhpcyB3aWxsIG5vdCByZXR1cm4gYENvbXBvbmVudGBzIHRoYXQgd2VyZSBub3RcbiAgICAgKiAgICAgICAgICAgICByZWdpc3RlcmVkIHVzaW5nIHtAbGluayBDb21wb25lbnQucmVnaXN0ZXJDb21wb25lbnR9LiBDdXJyZW50bHkgd2VcbiAgICAgKiAgICAgICAgICAgICBjaGVjayB0aGUgZ2xvYmFsIGB2aWRlb2pzYCBvYmplY3QgZm9yIGEgYENvbXBvbmVudGAgbmFtZSBhbmRcbiAgICAgKiAgICAgICAgICAgICByZXR1cm4gdGhhdCBpZiBpdCBleGlzdHMuXG4gICAgICovXG4gICAgO1xuXG4gICAgQ29tcG9uZW50LmdldENvbXBvbmVudCA9IGZ1bmN0aW9uIGdldENvbXBvbmVudChuYW1lKSB7XG4gICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBuYW1lID0gdG9UaXRsZUNhc2UobmFtZSk7XG5cbiAgICAgIGlmIChDb21wb25lbnQuY29tcG9uZW50c18gJiYgQ29tcG9uZW50LmNvbXBvbmVudHNfW25hbWVdKSB7XG4gICAgICAgIHJldHVybiBDb21wb25lbnQuY29tcG9uZW50c19bbmFtZV07XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBDb21wb25lbnQ7XG4gIH0oKTtcbiAgLyoqXG4gICAqIFdoZXRoZXIgb3Igbm90IHRoaXMgY29tcG9uZW50IHN1cHBvcnRzIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgLlxuICAgKlxuICAgKiBUaGlzIGlzIGV4cG9zZWQgcHJpbWFyaWx5IGZvciB0ZXN0aW5nIHB1cnBvc2VzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cblxuICBDb21wb25lbnQucHJvdG90eXBlLnN1cHBvcnRzUmFmXyA9IHR5cGVvZiB3aW5kb3ckMS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHdpbmRvdyQxLmNhbmNlbEFuaW1hdGlvbkZyYW1lID09PSAnZnVuY3Rpb24nO1xuICBDb21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ0NvbXBvbmVudCcsIENvbXBvbmVudCk7XG5cbiAgLyoqXG4gICAqIEBmaWxlIGJyb3dzZXIuanNcbiAgICogQG1vZHVsZSBicm93c2VyXG4gICAqL1xuICB2YXIgVVNFUl9BR0VOVCA9IHdpbmRvdyQxLm5hdmlnYXRvciAmJiB3aW5kb3ckMS5uYXZpZ2F0b3IudXNlckFnZW50IHx8ICcnO1xuICB2YXIgd2Via2l0VmVyc2lvbk1hcCA9IC9BcHBsZVdlYktpdFxcLyhbXFxkLl0rKS9pLmV4ZWMoVVNFUl9BR0VOVCk7XG4gIHZhciBhcHBsZVdlYmtpdFZlcnNpb24gPSB3ZWJraXRWZXJzaW9uTWFwID8gcGFyc2VGbG9hdCh3ZWJraXRWZXJzaW9uTWFwLnBvcCgpKSA6IG51bGw7XG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0aGlzIGRldmljZSBpcyBhbiBpUGFkLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBjb25zdFxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgdmFyIElTX0lQQUQgPSAvaVBhZC9pLnRlc3QoVVNFUl9BR0VOVCk7XG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0aGlzIGRldmljZSBpcyBhbiBpUGhvbmUuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQGNvbnN0XG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgLy8gVGhlIEZhY2Vib29rIGFwcCdzIFVJV2ViVmlldyBpZGVudGlmaWVzIGFzIGJvdGggYW4gaVBob25lIGFuZCBpUGFkLCBzb1xuICAvLyB0byBpZGVudGlmeSBpUGhvbmVzLCB3ZSBuZWVkIHRvIGV4Y2x1ZGUgaVBhZHMuXG4gIC8vIGh0dHA6Ly9hcnRzeS5naXRodWIuaW8vYmxvZy8yMDEyLzEwLzE4L3RoZS1wZXJpbHMtb2YtaW9zLXVzZXItYWdlbnQtc25pZmZpbmcvXG5cbiAgdmFyIElTX0lQSE9ORSA9IC9pUGhvbmUvaS50ZXN0KFVTRVJfQUdFTlQpICYmICFJU19JUEFEO1xuICAvKipcbiAgICogV2hldGhlciBvciBub3QgdGhpcyBkZXZpY2UgaXMgYW4gaVBvZC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAY29uc3RcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuXG4gIHZhciBJU19JUE9EID0gL2lQb2QvaS50ZXN0KFVTRVJfQUdFTlQpO1xuICAvKipcbiAgICogV2hldGhlciBvciBub3QgdGhpcyBpcyBhbiBpT1MgZGV2aWNlLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBjb25zdFxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgdmFyIElTX0lPUyA9IElTX0lQSE9ORSB8fCBJU19JUEFEIHx8IElTX0lQT0Q7XG4gIC8qKlxuICAgKiBUaGUgZGV0ZWN0ZWQgaU9TIHZlcnNpb24gLSBvciBgbnVsbGAuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQGNvbnN0XG4gICAqIEB0eXBlIHtzdHJpbmd8bnVsbH1cbiAgICovXG5cbiAgdmFyIElPU19WRVJTSU9OID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBtYXRjaCA9IFVTRVJfQUdFTlQubWF0Y2goL09TIChcXGQrKV8vaSk7XG5cbiAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgIHJldHVybiBtYXRjaFsxXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfSgpO1xuICAvKipcbiAgICogV2hldGhlciBvciBub3QgdGhpcyBpcyBhbiBBbmRyb2lkIGRldmljZS5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAY29uc3RcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuXG4gIHZhciBJU19BTkRST0lEID0gL0FuZHJvaWQvaS50ZXN0KFVTRVJfQUdFTlQpO1xuICAvKipcbiAgICogVGhlIGRldGVjdGVkIEFuZHJvaWQgdmVyc2lvbiAtIG9yIGBudWxsYC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAY29uc3RcbiAgICogQHR5cGUge251bWJlcnxzdHJpbmd8bnVsbH1cbiAgICovXG5cbiAgdmFyIEFORFJPSURfVkVSU0lPTiA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBUaGlzIG1hdGNoZXMgQW5kcm9pZCBNYWpvci5NaW5vci5QYXRjaCB2ZXJzaW9uc1xuICAgIC8vIEFORFJPSURfVkVSU0lPTiBpcyBNYWpvci5NaW5vciBhcyBhIE51bWJlciwgaWYgTWlub3IgaXNuJ3QgYXZhaWxhYmxlLCB0aGVuIG9ubHkgTWFqb3IgaXMgcmV0dXJuZWRcbiAgICB2YXIgbWF0Y2ggPSBVU0VSX0FHRU5ULm1hdGNoKC9BbmRyb2lkIChcXGQrKSg/OlxcLihcXGQrKSk/KD86XFwuKFxcZCspKSovaSk7XG5cbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgbWFqb3IgPSBtYXRjaFsxXSAmJiBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcbiAgICB2YXIgbWlub3IgPSBtYXRjaFsyXSAmJiBwYXJzZUZsb2F0KG1hdGNoWzJdKTtcblxuICAgIGlmIChtYWpvciAmJiBtaW5vcikge1xuICAgICAgcmV0dXJuIHBhcnNlRmxvYXQobWF0Y2hbMV0gKyAnLicgKyBtYXRjaFsyXSk7XG4gICAgfSBlbHNlIGlmIChtYWpvcikge1xuICAgICAgcmV0dXJuIG1ham9yO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9KCk7XG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0aGlzIGlzIGEgbmF0aXZlIEFuZHJvaWQgYnJvd3Nlci5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAY29uc3RcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuXG4gIHZhciBJU19OQVRJVkVfQU5EUk9JRCA9IElTX0FORFJPSUQgJiYgQU5EUk9JRF9WRVJTSU9OIDwgNSAmJiBhcHBsZVdlYmtpdFZlcnNpb24gPCA1Mzc7XG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0aGlzIGlzIE1vemlsbGEgRmlyZWZveC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAY29uc3RcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuXG4gIHZhciBJU19GSVJFRk9YID0gL0ZpcmVmb3gvaS50ZXN0KFVTRVJfQUdFTlQpO1xuICAvKipcbiAgICogV2hldGhlciBvciBub3QgdGhpcyBpcyBNaWNyb3NvZnQgRWRnZS5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAY29uc3RcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuXG4gIHZhciBJU19FREdFID0gL0VkZ2UvaS50ZXN0KFVTRVJfQUdFTlQpO1xuICAvKipcbiAgICogV2hldGhlciBvciBub3QgdGhpcyBpcyBHb29nbGUgQ2hyb21lLlxuICAgKlxuICAgKiBUaGlzIHdpbGwgYWxzbyBiZSBgdHJ1ZWAgZm9yIENocm9tZSBvbiBpT1MsIHdoaWNoIHdpbGwgaGF2ZSBkaWZmZXJlbnQgc3VwcG9ydFxuICAgKiBhcyBpdCBpcyBhY3R1YWxseSBTYWZhcmkgdW5kZXIgdGhlIGhvb2QuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQGNvbnN0XG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cblxuICB2YXIgSVNfQ0hST01FID0gIUlTX0VER0UgJiYgKC9DaHJvbWUvaS50ZXN0KFVTRVJfQUdFTlQpIHx8IC9DcmlPUy9pLnRlc3QoVVNFUl9BR0VOVCkpO1xuICAvKipcbiAgICogVGhlIGRldGVjdGVkIEdvb2dsZSBDaHJvbWUgdmVyc2lvbiAtIG9yIGBudWxsYC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAY29uc3RcbiAgICogQHR5cGUge251bWJlcnxudWxsfVxuICAgKi9cblxuICB2YXIgQ0hST01FX1ZFUlNJT04gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1hdGNoID0gVVNFUl9BR0VOVC5tYXRjaCgvKENocm9tZXxDcmlPUylcXC8oXFxkKykvKTtcblxuICAgIGlmIChtYXRjaCAmJiBtYXRjaFsyXSkge1xuICAgICAgcmV0dXJuIHBhcnNlRmxvYXQobWF0Y2hbMl0pO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9KCk7XG4gIC8qKlxuICAgKiBUaGUgZGV0ZWN0ZWQgSW50ZXJuZXQgRXhwbG9yZXIgdmVyc2lvbiAtIG9yIGBudWxsYC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAY29uc3RcbiAgICogQHR5cGUge251bWJlcnxudWxsfVxuICAgKi9cblxuICB2YXIgSUVfVkVSU0lPTiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVzdWx0ID0gL01TSUVcXHMoXFxkKylcXC5cXGQvLmV4ZWMoVVNFUl9BR0VOVCk7XG4gICAgdmFyIHZlcnNpb24gPSByZXN1bHQgJiYgcGFyc2VGbG9hdChyZXN1bHRbMV0pO1xuXG4gICAgaWYgKCF2ZXJzaW9uICYmIC9UcmlkZW50XFwvNy4wL2kudGVzdChVU0VSX0FHRU5UKSAmJiAvcnY6MTEuMC8udGVzdChVU0VSX0FHRU5UKSkge1xuICAgICAgLy8gSUUgMTEgaGFzIGEgZGlmZmVyZW50IHVzZXIgYWdlbnQgc3RyaW5nIHRoYW4gb3RoZXIgSUUgdmVyc2lvbnNcbiAgICAgIHZlcnNpb24gPSAxMS4wO1xuICAgIH1cblxuICAgIHJldHVybiB2ZXJzaW9uO1xuICB9KCk7XG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0aGlzIGlzIGRlc2t0b3AgU2FmYXJpLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBjb25zdFxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgdmFyIElTX1NBRkFSSSA9IC9TYWZhcmkvaS50ZXN0KFVTRVJfQUdFTlQpICYmICFJU19DSFJPTUUgJiYgIUlTX0FORFJPSUQgJiYgIUlTX0VER0U7XG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0aGlzIGlzIGFueSBmbGF2b3Igb2YgU2FmYXJpIC0gaW5jbHVkaW5nIGlPUy5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAY29uc3RcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuXG4gIHZhciBJU19BTllfU0FGQVJJID0gKElTX1NBRkFSSSB8fCBJU19JT1MpICYmICFJU19DSFJPTUU7XG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0aGlzIGRldmljZSBpcyB0b3VjaC1lbmFibGVkLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBjb25zdFxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgdmFyIFRPVUNIX0VOQUJMRUQgPSBpc1JlYWwoKSAmJiAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93JDEgfHwgd2luZG93JDEubmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzIHx8IHdpbmRvdyQxLkRvY3VtZW50VG91Y2ggJiYgd2luZG93JDEuZG9jdW1lbnQgaW5zdGFuY2VvZiB3aW5kb3ckMS5Eb2N1bWVudFRvdWNoKTtcblxuICB2YXIgYnJvd3NlciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBJU19JUEFEOiBJU19JUEFELFxuICAgIElTX0lQSE9ORTogSVNfSVBIT05FLFxuICAgIElTX0lQT0Q6IElTX0lQT0QsXG4gICAgSVNfSU9TOiBJU19JT1MsXG4gICAgSU9TX1ZFUlNJT046IElPU19WRVJTSU9OLFxuICAgIElTX0FORFJPSUQ6IElTX0FORFJPSUQsXG4gICAgQU5EUk9JRF9WRVJTSU9OOiBBTkRST0lEX1ZFUlNJT04sXG4gICAgSVNfTkFUSVZFX0FORFJPSUQ6IElTX05BVElWRV9BTkRST0lELFxuICAgIElTX0ZJUkVGT1g6IElTX0ZJUkVGT1gsXG4gICAgSVNfRURHRTogSVNfRURHRSxcbiAgICBJU19DSFJPTUU6IElTX0NIUk9NRSxcbiAgICBDSFJPTUVfVkVSU0lPTjogQ0hST01FX1ZFUlNJT04sXG4gICAgSUVfVkVSU0lPTjogSUVfVkVSU0lPTixcbiAgICBJU19TQUZBUkk6IElTX1NBRkFSSSxcbiAgICBJU19BTllfU0FGQVJJOiBJU19BTllfU0FGQVJJLFxuICAgIFRPVUNIX0VOQUJMRUQ6IFRPVUNIX0VOQUJMRURcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEBmaWxlIHRpbWUtcmFuZ2VzLmpzXG4gICAqIEBtb2R1bGUgdGltZS1yYW5nZXNcbiAgICovXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHRpbWUgZm9yIHRoZSBzcGVjaWZpZWQgaW5kZXggYXQgdGhlIHN0YXJ0IG9yIGVuZFxuICAgKiBvZiBhIFRpbWVSYW5nZSBvYmplY3QuXG4gICAqXG4gICAqIEB0eXBlZGVmICAgIHtGdW5jdGlvbn0gVGltZVJhbmdlSW5kZXhcbiAgICpcbiAgICogQHBhcmFtICAgICAge251bWJlcn0gW2luZGV4PTBdXG4gICAqICAgICAgICAgICAgIFRoZSByYW5nZSBudW1iZXIgdG8gcmV0dXJuIHRoZSB0aW1lIGZvci5cbiAgICpcbiAgICogQHJldHVybiAgICAge251bWJlcn1cbiAgICogICAgICAgICAgICAgVGhlIHRpbWUgb2Zmc2V0IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguXG4gICAqXG4gICAqIEBkZXByZWNhdGVkIFRoZSBpbmRleCBhcmd1bWVudCBtdXN0IGJlIHByb3ZpZGVkLlxuICAgKiAgICAgICAgICAgICBJbiB0aGUgZnV0dXJlLCBsZWF2aW5nIGl0IG91dCB3aWxsIHRocm93IGFuIGVycm9yLlxuICAgKi9cblxuICAvKipcbiAgICogQW4gb2JqZWN0IHRoYXQgY29udGFpbnMgcmFuZ2VzIG9mIHRpbWUuXG4gICAqXG4gICAqIEB0eXBlZGVmICB7T2JqZWN0fSBUaW1lUmFuZ2VcbiAgICpcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IGxlbmd0aFxuICAgKiAgICAgICAgICAgVGhlIG51bWJlciBvZiB0aW1lIHJhbmdlcyByZXByZXNlbnRlZCBieSB0aGlzIG9iamVjdC5cbiAgICpcbiAgICogQHByb3BlcnR5IHttb2R1bGU6dGltZS1yYW5nZXN+VGltZVJhbmdlSW5kZXh9IHN0YXJ0XG4gICAqICAgICAgICAgICBSZXR1cm5zIHRoZSB0aW1lIG9mZnNldCBhdCB3aGljaCBhIHNwZWNpZmllZCB0aW1lIHJhbmdlIGJlZ2lucy5cbiAgICpcbiAgICogQHByb3BlcnR5IHttb2R1bGU6dGltZS1yYW5nZXN+VGltZVJhbmdlSW5kZXh9IGVuZFxuICAgKiAgICAgICAgICAgUmV0dXJucyB0aGUgdGltZSBvZmZzZXQgYXQgd2hpY2ggYSBzcGVjaWZpZWQgdGltZSByYW5nZSBlbmRzLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9UaW1lUmFuZ2VzXG4gICAqL1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbnkgb2YgdGhlIHRpbWUgcmFuZ2VzIGFyZSBvdmVyIHRoZSBtYXhpbXVtIGluZGV4LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0gICB7c3RyaW5nfSBmbk5hbWVcbiAgICogICAgICAgICAgVGhlIGZ1bmN0aW9uIG5hbWUgdG8gdXNlIGZvciBsb2dnaW5nXG4gICAqXG4gICAqIEBwYXJhbSAgIHtudW1iZXJ9IGluZGV4XG4gICAqICAgICAgICAgIFRoZSBpbmRleCB0byBjaGVja1xuICAgKlxuICAgKiBAcGFyYW0gICB7bnVtYmVyfSBtYXhJbmRleFxuICAgKiAgICAgICAgICBUaGUgbWF4aW11bSBwb3NzaWJsZSBpbmRleFxuICAgKlxuICAgKiBAdGhyb3dzICB7RXJyb3J9IGlmIHRoZSB0aW1lUmFuZ2VzIHByb3ZpZGVkIGFyZSBvdmVyIHRoZSBtYXhJbmRleFxuICAgKi9cbiAgZnVuY3Rpb24gcmFuZ2VDaGVjayhmbk5hbWUsIGluZGV4LCBtYXhJbmRleCkge1xuICAgIGlmICh0eXBlb2YgaW5kZXggIT09ICdudW1iZXInIHx8IGluZGV4IDwgMCB8fCBpbmRleCA+IG1heEluZGV4KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZXhlY3V0ZSAnXCIgKyBmbk5hbWUgKyBcIicgb24gJ1RpbWVSYW5nZXMnOiBUaGUgaW5kZXggcHJvdmlkZWQgKFwiICsgaW5kZXggKyBcIikgaXMgbm9uLW51bWVyaWMgb3Igb3V0IG9mIGJvdW5kcyAoMC1cIiArIG1heEluZGV4ICsgXCIpLlwiKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgdGltZSBmb3IgdGhlIHNwZWNpZmllZCBpbmRleCBhdCB0aGUgc3RhcnQgb3IgZW5kXG4gICAqIG9mIGEgVGltZVJhbmdlIG9iamVjdC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtICAgICAge3N0cmluZ30gZm5OYW1lXG4gICAqICAgICAgICAgICAgIFRoZSBmdW5jdGlvbiBuYW1lIHRvIHVzZSBmb3IgbG9nZ2luZ1xuICAgKlxuICAgKiBAcGFyYW0gICAgICB7c3RyaW5nfSB2YWx1ZUluZGV4XG4gICAqICAgICAgICAgICAgIFRoZSBwcm9wZXJ0eSB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIGdldCB0aGUgdGltZS4gc2hvdWxkIGJlXG4gICAqICAgICAgICAgICAgICdzdGFydCcgb3IgJ2VuZCdcbiAgICpcbiAgICogQHBhcmFtICAgICAge0FycmF5fSByYW5nZXNcbiAgICogICAgICAgICAgICAgQW4gYXJyYXkgb2YgdGltZSByYW5nZXNcbiAgICpcbiAgICogQHBhcmFtICAgICAge0FycmF5fSBbcmFuZ2VJbmRleD0wXVxuICAgKiAgICAgICAgICAgICBUaGUgaW5kZXggdG8gc3RhcnQgdGhlIHNlYXJjaCBhdFxuICAgKlxuICAgKiBAcmV0dXJuICAgICB7bnVtYmVyfVxuICAgKiAgICAgICAgICAgICBUaGUgdGltZSB0aGF0IG9mZnNldCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LlxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCByYW5nZUluZGV4IG11c3QgYmUgc2V0IHRvIGEgdmFsdWUsIGluIHRoZSBmdXR1cmUgdGhpcyB3aWxsIHRocm93IGFuIGVycm9yLlxuICAgKiBAdGhyb3dzICAgICB7RXJyb3J9IGlmIHJhbmdlSW5kZXggaXMgbW9yZSB0aGFuIHRoZSBsZW5ndGggb2YgcmFuZ2VzXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gZ2V0UmFuZ2UoZm5OYW1lLCB2YWx1ZUluZGV4LCByYW5nZXMsIHJhbmdlSW5kZXgpIHtcbiAgICByYW5nZUNoZWNrKGZuTmFtZSwgcmFuZ2VJbmRleCwgcmFuZ2VzLmxlbmd0aCAtIDEpO1xuICAgIHJldHVybiByYW5nZXNbcmFuZ2VJbmRleF1bdmFsdWVJbmRleF07XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHRpbWUgcmFuZ2Ugb2JqZWN0IGdpdmVuIHJhbmdlcyBvZiB0aW1lLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0gICB7QXJyYXl9IFtyYW5nZXNdXG4gICAqICAgICAgICAgIEFuIGFycmF5IG9mIHRpbWUgcmFuZ2VzLlxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVRpbWVSYW5nZXNPYmoocmFuZ2VzKSB7XG4gICAgaWYgKHJhbmdlcyA9PT0gdW5kZWZpbmVkIHx8IHJhbmdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxlbmd0aDogMCxcbiAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhpcyBUaW1lUmFuZ2VzIG9iamVjdCBpcyBlbXB0eScpO1xuICAgICAgICB9LFxuICAgICAgICBlbmQ6IGZ1bmN0aW9uIGVuZCgpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgVGltZVJhbmdlcyBvYmplY3QgaXMgZW1wdHknKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgbGVuZ3RoOiByYW5nZXMubGVuZ3RoLFxuICAgICAgc3RhcnQ6IGdldFJhbmdlLmJpbmQobnVsbCwgJ3N0YXJ0JywgMCwgcmFuZ2VzKSxcbiAgICAgIGVuZDogZ2V0UmFuZ2UuYmluZChudWxsLCAnZW5kJywgMSwgcmFuZ2VzKVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGBUaW1lUmFuZ2VgIG9iamVjdCB3aGljaCBtaW1pY3MgYW5cbiAgICoge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9UaW1lUmFuZ2VzfEhUTUw1IFRpbWVSYW5nZXMgaW5zdGFuY2V9LlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcnxBcnJheVtdfSBzdGFydFxuICAgKiAgICAgICAgVGhlIHN0YXJ0IG9mIGEgc2luZ2xlIHJhbmdlIChhIG51bWJlcikgb3IgYW4gYXJyYXkgb2YgcmFuZ2VzIChhblxuICAgKiAgICAgICAgYXJyYXkgb2YgYXJyYXlzIG9mIHR3byBudW1iZXJzIGVhY2gpLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gZW5kXG4gICAqICAgICAgICBUaGUgZW5kIG9mIGEgc2luZ2xlIHJhbmdlLiBDYW5ub3QgYmUgdXNlZCB3aXRoIHRoZSBhcnJheSBmb3JtIG9mXG4gICAqICAgICAgICB0aGUgYHN0YXJ0YCBhcmd1bWVudC5cbiAgICovXG5cblxuICBmdW5jdGlvbiBjcmVhdGVUaW1lUmFuZ2VzKHN0YXJ0LCBlbmQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzdGFydCkpIHtcbiAgICAgIHJldHVybiBjcmVhdGVUaW1lUmFuZ2VzT2JqKHN0YXJ0KTtcbiAgICB9IGVsc2UgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgZW5kID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBjcmVhdGVUaW1lUmFuZ2VzT2JqKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNyZWF0ZVRpbWVSYW5nZXNPYmooW1tzdGFydCwgZW5kXV0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBmaWxlIGJ1ZmZlci5qc1xuICAgKiBAbW9kdWxlIGJ1ZmZlclxuICAgKi9cbiAgLyoqXG4gICAqIENvbXB1dGUgdGhlIHBlcmNlbnRhZ2Ugb2YgdGhlIG1lZGlhIHRoYXQgaGFzIGJlZW4gYnVmZmVyZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7VGltZVJhbmdlfSBidWZmZXJlZFxuICAgKiAgICAgICAgVGhlIGN1cnJlbnQgYFRpbWVSYW5nZWAgb2JqZWN0IHJlcHJlc2VudGluZyBidWZmZXJlZCB0aW1lIHJhbmdlc1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb25cbiAgICogICAgICAgIFRvdGFsIGR1cmF0aW9uIG9mIHRoZSBtZWRpYVxuICAgKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqICAgICAgICAgUGVyY2VudCBidWZmZXJlZCBvZiB0aGUgdG90YWwgZHVyYXRpb24gaW4gZGVjaW1hbCBmb3JtLlxuICAgKi9cblxuICBmdW5jdGlvbiBidWZmZXJlZFBlcmNlbnQoYnVmZmVyZWQsIGR1cmF0aW9uKSB7XG4gICAgdmFyIGJ1ZmZlcmVkRHVyYXRpb24gPSAwO1xuICAgIHZhciBzdGFydDtcbiAgICB2YXIgZW5kO1xuXG4gICAgaWYgKCFkdXJhdGlvbikge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgaWYgKCFidWZmZXJlZCB8fCAhYnVmZmVyZWQubGVuZ3RoKSB7XG4gICAgICBidWZmZXJlZCA9IGNyZWF0ZVRpbWVSYW5nZXMoMCwgMCk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWZmZXJlZC5sZW5ndGg7IGkrKykge1xuICAgICAgc3RhcnQgPSBidWZmZXJlZC5zdGFydChpKTtcbiAgICAgIGVuZCA9IGJ1ZmZlcmVkLmVuZChpKTsgLy8gYnVmZmVyZWQgZW5kIGNhbiBiZSBiaWdnZXIgdGhhbiBkdXJhdGlvbiBieSBhIHZlcnkgc21hbGwgZnJhY3Rpb25cblxuICAgICAgaWYgKGVuZCA+IGR1cmF0aW9uKSB7XG4gICAgICAgIGVuZCA9IGR1cmF0aW9uO1xuICAgICAgfVxuXG4gICAgICBidWZmZXJlZER1cmF0aW9uICs9IGVuZCAtIHN0YXJ0O1xuICAgIH1cblxuICAgIHJldHVybiBidWZmZXJlZER1cmF0aW9uIC8gZHVyYXRpb247XG4gIH1cblxuICAvKipcbiAgICogQGZpbGUgZnVsbHNjcmVlbi1hcGkuanNcbiAgICogQG1vZHVsZSBmdWxsc2NyZWVuLWFwaVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgLyoqXG4gICAqIFN0b3JlIHRoZSBicm93c2VyLXNwZWNpZmljIG1ldGhvZHMgZm9yIHRoZSBmdWxsc2NyZWVuIEFQSS5cbiAgICpcbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQHNlZSBbU3BlY2lmaWNhdGlvbl17QGxpbmsgaHR0cHM6Ly9mdWxsc2NyZWVuLnNwZWMud2hhdHdnLm9yZ31cbiAgICogQHNlZSBbTWFwIEFwcHJvYWNoIEZyb20gU2NyZWVuZnVsbC5qc117QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL3NpbmRyZXNvcmh1cy9zY3JlZW5mdWxsLmpzfVxuICAgKi9cblxuICB2YXIgRnVsbHNjcmVlbkFwaSA9IHt9OyAvLyBicm93c2VyIEFQSSBtZXRob2RzXG5cbiAgdmFyIGFwaU1hcCA9IFtbJ3JlcXVlc3RGdWxsc2NyZWVuJywgJ2V4aXRGdWxsc2NyZWVuJywgJ2Z1bGxzY3JlZW5FbGVtZW50JywgJ2Z1bGxzY3JlZW5FbmFibGVkJywgJ2Z1bGxzY3JlZW5jaGFuZ2UnLCAnZnVsbHNjcmVlbmVycm9yJywgJ2Z1bGxzY3JlZW4nXSwgLy8gV2ViS2l0XG4gIFsnd2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4nLCAnd2Via2l0RXhpdEZ1bGxzY3JlZW4nLCAnd2Via2l0RnVsbHNjcmVlbkVsZW1lbnQnLCAnd2Via2l0RnVsbHNjcmVlbkVuYWJsZWQnLCAnd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsICd3ZWJraXRmdWxsc2NyZWVuZXJyb3InLCAnLXdlYmtpdC1mdWxsLXNjcmVlbiddLCAvLyBNb3ppbGxhXG4gIFsnbW96UmVxdWVzdEZ1bGxTY3JlZW4nLCAnbW96Q2FuY2VsRnVsbFNjcmVlbicsICdtb3pGdWxsU2NyZWVuRWxlbWVudCcsICdtb3pGdWxsU2NyZWVuRW5hYmxlZCcsICdtb3pmdWxsc2NyZWVuY2hhbmdlJywgJ21vemZ1bGxzY3JlZW5lcnJvcicsICctbW96LWZ1bGwtc2NyZWVuJ10sIC8vIE1pY3Jvc29mdFxuICBbJ21zUmVxdWVzdEZ1bGxzY3JlZW4nLCAnbXNFeGl0RnVsbHNjcmVlbicsICdtc0Z1bGxzY3JlZW5FbGVtZW50JywgJ21zRnVsbHNjcmVlbkVuYWJsZWQnLCAnTVNGdWxsc2NyZWVuQ2hhbmdlJywgJ01TRnVsbHNjcmVlbkVycm9yJywgJy1tcy1mdWxsc2NyZWVuJ11dO1xuICB2YXIgc3BlY0FwaSA9IGFwaU1hcFswXTtcbiAgdmFyIGJyb3dzZXJBcGk7XG4gIHZhciBwcmVmaXhlZEFQSSA9IGZhbHNlOyAvLyBkZXRlcm1pbmUgdGhlIHN1cHBvcnRlZCBzZXQgb2YgZnVuY3Rpb25zXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcGlNYXAubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBjaGVjayBmb3IgZXhpdEZ1bGxzY3JlZW4gZnVuY3Rpb25cbiAgICBpZiAoYXBpTWFwW2ldWzFdIGluIGRvY3VtZW50KSB7XG4gICAgICBicm93c2VyQXBpID0gYXBpTWFwW2ldO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9IC8vIG1hcCB0aGUgYnJvd3NlciBBUEkgbmFtZXMgdG8gdGhlIHNwZWMgQVBJIG5hbWVzXG5cblxuICBpZiAoYnJvd3NlckFwaSkge1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBicm93c2VyQXBpLmxlbmd0aDsgX2krKykge1xuICAgICAgRnVsbHNjcmVlbkFwaVtzcGVjQXBpW19pXV0gPSBicm93c2VyQXBpW19pXTtcbiAgICB9XG5cbiAgICBwcmVmaXhlZEFQSSA9IGJyb3dzZXJBcGlbMF0gPT09IHNwZWNBcGlbMF07XG4gIH1cblxuICAvKipcbiAgICogQGZpbGUgbWVkaWEtZXJyb3IuanNcbiAgICovXG4gIC8qKlxuICAgKiBBIEN1c3RvbSBgTWVkaWFFcnJvcmAgY2xhc3Mgd2hpY2ggbWltaWNzIHRoZSBzdGFuZGFyZCBIVE1MNSBgTWVkaWFFcnJvcmAgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ3xPYmplY3R8TWVkaWFFcnJvcn0gdmFsdWVcbiAgICogICAgICAgIFRoaXMgY2FuIGJlIG9mIG11bHRpcGxlIHR5cGVzOlxuICAgKiAgICAgICAgLSBudW1iZXI6IHNob3VsZCBiZSBhIHN0YW5kYXJkIGVycm9yIGNvZGVcbiAgICogICAgICAgIC0gc3RyaW5nOiBhbiBlcnJvciBtZXNzYWdlICh0aGUgY29kZSB3aWxsIGJlIDApXG4gICAqICAgICAgICAtIE9iamVjdDogYXJiaXRyYXJ5IHByb3BlcnRpZXNcbiAgICogICAgICAgIC0gYE1lZGlhRXJyb3JgIChuYXRpdmUpOiB1c2VkIHRvIHBvcHVsYXRlIGEgdmlkZW8uanMgYE1lZGlhRXJyb3JgIG9iamVjdFxuICAgKiAgICAgICAgLSBgTWVkaWFFcnJvcmAgKHZpZGVvLmpzKTogd2lsbCByZXR1cm4gaXRzZWxmIGlmIGl0J3MgYWxyZWFkeSBhXG4gICAqICAgICAgICAgIHZpZGVvLmpzIGBNZWRpYUVycm9yYCBvYmplY3QuXG4gICAqXG4gICAqIEBzZWUgW01lZGlhRXJyb3IgU3BlY117QGxpbmsgaHR0cHM6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMtYXV0aG9yLXZpZXcvdmlkZW8uaHRtbCNtZWRpYWVycm9yfVxuICAgKiBAc2VlIFtFbmNyeXB0ZWQgTWVkaWFFcnJvciBTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvMjAxMy9XRC1lbmNyeXB0ZWQtbWVkaWEtMjAxMzA1MTAvI2Vycm9yLWNvZGVzfVxuICAgKlxuICAgKiBAY2xhc3MgTWVkaWFFcnJvclxuICAgKi9cblxuICBmdW5jdGlvbiBNZWRpYUVycm9yKHZhbHVlKSB7XG4gICAgLy8gQWxsb3cgcmVkdW5kYW50IGNhbGxzIHRvIHRoaXMgY29uc3RydWN0b3IgdG8gYXZvaWQgaGF2aW5nIGBpbnN0YW5jZW9mYFxuICAgIC8vIGNoZWNrcyBwZXBwZXJlZCBhcm91bmQgdGhlIGNvZGUuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgTWVkaWFFcnJvcikge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICB0aGlzLmNvZGUgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIGRlZmF1bHQgY29kZSBpcyB6ZXJvLCBzbyB0aGlzIGlzIGEgY3VzdG9tIGVycm9yXG4gICAgICB0aGlzLm1lc3NhZ2UgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgLy8gV2UgYXNzaWduIHRoZSBgY29kZWAgcHJvcGVydHkgbWFudWFsbHkgYmVjYXVzZSBuYXRpdmUgYE1lZGlhRXJyb3JgIG9iamVjdHNcbiAgICAgIC8vIGRvIG5vdCBleHBvc2UgaXQgYXMgYW4gb3duL2VudW1lcmFibGUgcHJvcGVydHkgb2YgdGhlIG9iamVjdC5cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUuY29kZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdGhpcy5jb2RlID0gdmFsdWUuY29kZTtcbiAgICAgIH1cblxuICAgICAgYXNzaWduKHRoaXMsIHZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubWVzc2FnZSkge1xuICAgICAgdGhpcy5tZXNzYWdlID0gTWVkaWFFcnJvci5kZWZhdWx0TWVzc2FnZXNbdGhpcy5jb2RlXSB8fCAnJztcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFRoZSBlcnJvciBjb2RlIHRoYXQgcmVmZXJzIHR3byBvbmUgb2YgdGhlIGRlZmluZWQgYE1lZGlhRXJyb3JgIHR5cGVzXG4gICAqXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuXG5cbiAgTWVkaWFFcnJvci5wcm90b3R5cGUuY29kZSA9IDA7XG4gIC8qKlxuICAgKiBBbiBvcHRpb25hbCBtZXNzYWdlIHRoYXQgdG8gc2hvdyB3aXRoIHRoZSBlcnJvci4gTWVzc2FnZSBpcyBub3QgcGFydCBvZiB0aGUgSFRNTDVcbiAgICogdmlkZW8gc3BlYyBidXQgYWxsb3dzIGZvciBtb3JlIGluZm9ybWF0aXZlIGN1c3RvbSBlcnJvcnMuXG4gICAqXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuXG4gIE1lZGlhRXJyb3IucHJvdG90eXBlLm1lc3NhZ2UgPSAnJztcbiAgLyoqXG4gICAqIEFuIG9wdGlvbmFsIHN0YXR1cyBjb2RlIHRoYXQgY2FuIGJlIHNldCBieSBwbHVnaW5zIHRvIGFsbG93IGV2ZW4gbW9yZSBkZXRhaWwgYWJvdXRcbiAgICogdGhlIGVycm9yLiBGb3IgZXhhbXBsZSBhIHBsdWdpbiBtaWdodCBwcm92aWRlIGEgc3BlY2lmaWMgSFRUUCBzdGF0dXMgY29kZSBhbmQgYW5cbiAgICogZXJyb3IgbWVzc2FnZSBmb3IgdGhhdCBjb2RlLiBUaGVuIHdoZW4gdGhlIHBsdWdpbiBnZXRzIHRoYXQgZXJyb3IgdGhpcyBjbGFzcyB3aWxsXG4gICAqIGtub3cgaG93IHRvIGRpc3BsYXkgYW4gZXJyb3IgbWVzc2FnZSBmb3IgaXQuIFRoaXMgYWxsb3dzIGEgY3VzdG9tIG1lc3NhZ2UgdG8gc2hvd1xuICAgKiB1cCBvbiB0aGUgYFBsYXllcmAgZXJyb3Igb3ZlcmxheS5cbiAgICpcbiAgICogQHR5cGUge0FycmF5fVxuICAgKi9cblxuICBNZWRpYUVycm9yLnByb3RvdHlwZS5zdGF0dXMgPSBudWxsO1xuICAvKipcbiAgICogRXJyb3JzIGluZGV4ZWQgYnkgdGhlIFczQyBzdGFuZGFyZC4gVGhlIG9yZGVyICoqQ0FOTk9UIENIQU5HRSoqISBTZWUgdGhlXG4gICAqIHNwZWNpZmljYXRpb24gbGlzdGVkIHVuZGVyIHtAbGluayBNZWRpYUVycm9yfSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICpcbiAgICogQGVudW0ge2FycmF5fVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IDAgLSBNRURJQV9FUlJfQ1VTVE9NXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSAxIC0gTUVESUFfRVJSX0FCT1JURURcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IDIgLSBNRURJQV9FUlJfTkVUV09SS1xuICAgKiBAcHJvcGVydHkge3N0cmluZ30gMyAtIE1FRElBX0VSUl9ERUNPREVcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IDQgLSBNRURJQV9FUlJfU1JDX05PVF9TVVBQT1JURURcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IDUgLSBNRURJQV9FUlJfRU5DUllQVEVEXG4gICAqL1xuXG4gIE1lZGlhRXJyb3IuZXJyb3JUeXBlcyA9IFsnTUVESUFfRVJSX0NVU1RPTScsICdNRURJQV9FUlJfQUJPUlRFRCcsICdNRURJQV9FUlJfTkVUV09SSycsICdNRURJQV9FUlJfREVDT0RFJywgJ01FRElBX0VSUl9TUkNfTk9UX1NVUFBPUlRFRCcsICdNRURJQV9FUlJfRU5DUllQVEVEJ107XG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBgTWVkaWFFcnJvcmAgbWVzc2FnZXMgYmFzZWQgb24gdGhlIHtAbGluayBNZWRpYUVycm9yLmVycm9yVHlwZXN9LlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXl9XG4gICAqIEBjb25zdGFudFxuICAgKi9cblxuICBNZWRpYUVycm9yLmRlZmF1bHRNZXNzYWdlcyA9IHtcbiAgICAxOiAnWW91IGFib3J0ZWQgdGhlIG1lZGlhIHBsYXliYWNrJyxcbiAgICAyOiAnQSBuZXR3b3JrIGVycm9yIGNhdXNlZCB0aGUgbWVkaWEgZG93bmxvYWQgdG8gZmFpbCBwYXJ0LXdheS4nLFxuICAgIDM6ICdUaGUgbWVkaWEgcGxheWJhY2sgd2FzIGFib3J0ZWQgZHVlIHRvIGEgY29ycnVwdGlvbiBwcm9ibGVtIG9yIGJlY2F1c2UgdGhlIG1lZGlhIHVzZWQgZmVhdHVyZXMgeW91ciBicm93c2VyIGRpZCBub3Qgc3VwcG9ydC4nLFxuICAgIDQ6ICdUaGUgbWVkaWEgY291bGQgbm90IGJlIGxvYWRlZCwgZWl0aGVyIGJlY2F1c2UgdGhlIHNlcnZlciBvciBuZXR3b3JrIGZhaWxlZCBvciBiZWNhdXNlIHRoZSBmb3JtYXQgaXMgbm90IHN1cHBvcnRlZC4nLFxuICAgIDU6ICdUaGUgbWVkaWEgaXMgZW5jcnlwdGVkIGFuZCB3ZSBkbyBub3QgaGF2ZSB0aGUga2V5cyB0byBkZWNyeXB0IGl0LidcbiAgfTsgLy8gQWRkIHR5cGVzIGFzIHByb3BlcnRpZXMgb24gTWVkaWFFcnJvclxuICAvLyBlLmcuIE1lZGlhRXJyb3IuTUVESUFfRVJSX1NSQ19OT1RfU1VQUE9SVEVEID0gNDtcblxuICBmb3IgKHZhciBlcnJOdW0gPSAwOyBlcnJOdW0gPCBNZWRpYUVycm9yLmVycm9yVHlwZXMubGVuZ3RoOyBlcnJOdW0rKykge1xuICAgIE1lZGlhRXJyb3JbTWVkaWFFcnJvci5lcnJvclR5cGVzW2Vyck51bV1dID0gZXJyTnVtOyAvLyB2YWx1ZXMgc2hvdWxkIGJlIGFjY2Vzc2libGUgb24gYm90aCB0aGUgY2xhc3MgYW5kIGluc3RhbmNlXG5cbiAgICBNZWRpYUVycm9yLnByb3RvdHlwZVtNZWRpYUVycm9yLmVycm9yVHlwZXNbZXJyTnVtXV0gPSBlcnJOdW07XG4gIH0gLy8ganNkb2NzIGZvciBpbnN0YW5jZS9zdGF0aWMgbWVtYmVycyBhZGRlZCBhYm92ZVxuXG4gIHZhciB0dXBsZSA9IFNhZmVQYXJzZVR1cGxlO1xuXG4gIGZ1bmN0aW9uIFNhZmVQYXJzZVR1cGxlKG9iaiwgcmV2aXZlcikge1xuICAgIHZhciBqc29uO1xuICAgIHZhciBlcnJvciA9IG51bGw7XG5cbiAgICB0cnkge1xuICAgICAganNvbiA9IEpTT04ucGFyc2Uob2JqLCByZXZpdmVyKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGVycm9yID0gZXJyO1xuICAgIH1cblxuICAgIHJldHVybiBbZXJyb3IsIGpzb25dO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciBhbiBvYmplY3QgaXMgYFByb21pc2VgLWxpa2UgKGkuZS4gaGFzIGEgYHRoZW5gIG1ldGhvZCkuXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gIHZhbHVlXG4gICAqICAgICAgICAgQW4gb2JqZWN0IHRoYXQgbWF5IG9yIG1heSBub3QgYmUgYFByb21pc2VgLWxpa2UuXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqICAgICAgICAgV2hldGhlciBvciBub3QgdGhlIG9iamVjdCBpcyBgUHJvbWlzZWAtbGlrZS5cbiAgICovXG4gIGZ1bmN0aW9uIGlzUHJvbWlzZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nO1xuICB9XG4gIC8qKlxuICAgKiBTaWxlbmNlIGEgUHJvbWlzZS1saWtlIG9iamVjdC5cbiAgICpcbiAgICogVGhpcyBpcyB1c2VmdWwgZm9yIGF2b2lkaW5nIG5vbi1oYXJtZnVsLCBidXQgcG90ZW50aWFsbHkgY29uZnVzaW5nIFwidW5jYXVnaHRcbiAgICogcGxheSBwcm9taXNlXCIgcmVqZWN0aW9uIGVycm9yIG1lc3NhZ2VzLlxuICAgKlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IHZhbHVlXG4gICAqICAgICAgICAgQW4gb2JqZWN0IHRoYXQgbWF5IG9yIG1heSBub3QgYmUgYFByb21pc2VgLWxpa2UuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHNpbGVuY2VQcm9taXNlKHZhbHVlKSB7XG4gICAgaWYgKGlzUHJvbWlzZSh2YWx1ZSkpIHtcbiAgICAgIHZhbHVlLnRoZW4obnVsbCwgZnVuY3Rpb24gKGUpIHt9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGZpbGUgdGV4dC10cmFjay1saXN0LWNvbnZlcnRlci5qcyBVdGlsaXRpZXMgZm9yIGNhcHR1cmluZyB0ZXh0IHRyYWNrIHN0YXRlIGFuZFxuICAgKiByZS1jcmVhdGluZyB0cmFja3MgYmFzZWQgb24gYSBjYXB0dXJlLlxuICAgKlxuICAgKiBAbW9kdWxlIHRleHQtdHJhY2stbGlzdC1jb252ZXJ0ZXJcbiAgICovXG5cbiAgLyoqXG4gICAqIEV4YW1pbmUgYSBzaW5nbGUge0BsaW5rIFRleHRUcmFja30gYW5kIHJldHVybiBhIEpTT04tY29tcGF0aWJsZSBqYXZhc2NyaXB0IG9iamVjdCB0aGF0XG4gICAqIHJlcHJlc2VudHMgdGhlIHtAbGluayBUZXh0VHJhY2t9J3Mgc3RhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7VGV4dFRyYWNrfSB0cmFja1xuICAgKiAgICAgICAgVGhlIHRleHQgdHJhY2sgdG8gcXVlcnkuXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICogICAgICAgICBBIHNlcmlhbGl6YWJsZSBqYXZhc2NyaXB0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBUZXh0VHJhY2suXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB2YXIgdHJhY2tUb0pzb25fID0gZnVuY3Rpb24gdHJhY2tUb0pzb25fKHRyYWNrKSB7XG4gICAgdmFyIHJldCA9IFsna2luZCcsICdsYWJlbCcsICdsYW5ndWFnZScsICdpZCcsICdpbkJhbmRNZXRhZGF0YVRyYWNrRGlzcGF0Y2hUeXBlJywgJ21vZGUnLCAnc3JjJ10ucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHByb3AsIGkpIHtcbiAgICAgIGlmICh0cmFja1twcm9wXSkge1xuICAgICAgICBhY2NbcHJvcF0gPSB0cmFja1twcm9wXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7XG4gICAgICBjdWVzOiB0cmFjay5jdWVzICYmIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbCh0cmFjay5jdWVzLCBmdW5jdGlvbiAoY3VlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3RhcnRUaW1lOiBjdWUuc3RhcnRUaW1lLFxuICAgICAgICAgIGVuZFRpbWU6IGN1ZS5lbmRUaW1lLFxuICAgICAgICAgIHRleHQ6IGN1ZS50ZXh0LFxuICAgICAgICAgIGlkOiBjdWUuaWRcbiAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgfSk7XG4gICAgcmV0dXJuIHJldDtcbiAgfTtcbiAgLyoqXG4gICAqIEV4YW1pbmUgYSB7QGxpbmsgVGVjaH0gYW5kIHJldHVybiBhIEpTT04tY29tcGF0aWJsZSBqYXZhc2NyaXB0IGFycmF5IHRoYXQgcmVwcmVzZW50cyB0aGVcbiAgICogc3RhdGUgb2YgYWxsIHtAbGluayBUZXh0VHJhY2t9cyBjdXJyZW50bHkgY29uZmlndXJlZC4gVGhlIHJldHVybiBhcnJheSBpcyBjb21wYXRpYmxlIHdpdGhcbiAgICoge0BsaW5rIHRleHQtdHJhY2stbGlzdC1jb252ZXJ0ZXI6anNvblRvVGV4dFRyYWNrc30uXG4gICAqXG4gICAqIEBwYXJhbSB7VGVjaH0gdGVjaFxuICAgKiAgICAgICAgVGhlIHRlY2ggb2JqZWN0IHRvIHF1ZXJ5XG4gICAqXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKiAgICAgICAgIEEgc2VyaWFsaXphYmxlIGphdmFzY3JpcHQgcmVwcmVzZW50YXRpb24gb2YgdGhlIHtAbGluayBUZWNofXNcbiAgICogICAgICAgICB7QGxpbmsgVGV4dFRyYWNrTGlzdH0uXG4gICAqL1xuXG5cbiAgdmFyIHRleHRUcmFja3NUb0pzb24gPSBmdW5jdGlvbiB0ZXh0VHJhY2tzVG9Kc29uKHRlY2gpIHtcbiAgICB2YXIgdHJhY2tFbHMgPSB0ZWNoLiQkKCd0cmFjaycpO1xuICAgIHZhciB0cmFja09ianMgPSBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwodHJhY2tFbHMsIGZ1bmN0aW9uICh0KSB7XG4gICAgICByZXR1cm4gdC50cmFjaztcbiAgICB9KTtcbiAgICB2YXIgdHJhY2tzID0gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKHRyYWNrRWxzLCBmdW5jdGlvbiAodHJhY2tFbCkge1xuICAgICAgdmFyIGpzb24gPSB0cmFja1RvSnNvbl8odHJhY2tFbC50cmFjayk7XG5cbiAgICAgIGlmICh0cmFja0VsLnNyYykge1xuICAgICAgICBqc29uLnNyYyA9IHRyYWNrRWwuc3JjO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ganNvbjtcbiAgICB9KTtcbiAgICByZXR1cm4gdHJhY2tzLmNvbmNhdChBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwodGVjaC50ZXh0VHJhY2tzKCksIGZ1bmN0aW9uICh0cmFjaykge1xuICAgICAgcmV0dXJuIHRyYWNrT2Jqcy5pbmRleE9mKHRyYWNrKSA9PT0gLTE7XG4gICAgfSkubWFwKHRyYWNrVG9Kc29uXykpO1xuICB9O1xuICAvKipcbiAgICogQ3JlYXRlIGEgc2V0IG9mIHJlbW90ZSB7QGxpbmsgVGV4dFRyYWNrfXMgb24gYSB7QGxpbmsgVGVjaH0gYmFzZWQgb24gYW4gYXJyYXkgb2YgamF2YXNjcmlwdFxuICAgKiBvYmplY3Qge0BsaW5rIFRleHRUcmFja30gcmVwcmVzZW50YXRpb25zLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBqc29uXG4gICAqICAgICAgICBBbiBhcnJheSBvZiBgVGV4dFRyYWNrYCByZXByZXNlbnRhdGlvbiBvYmplY3RzLCBsaWtlIHRob3NlIHRoYXQgd291bGQgYmVcbiAgICogICAgICAgIHByb2R1Y2VkIGJ5IGB0ZXh0VHJhY2tzVG9Kc29uYC5cbiAgICpcbiAgICogQHBhcmFtIHtUZWNofSB0ZWNoXG4gICAqICAgICAgICBUaGUgYFRlY2hgIHRvIGNyZWF0ZSB0aGUgYFRleHRUcmFja2BzIG9uLlxuICAgKi9cblxuXG4gIHZhciBqc29uVG9UZXh0VHJhY2tzID0gZnVuY3Rpb24ganNvblRvVGV4dFRyYWNrcyhqc29uLCB0ZWNoKSB7XG4gICAganNvbi5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykge1xuICAgICAgdmFyIGFkZGVkVHJhY2sgPSB0ZWNoLmFkZFJlbW90ZVRleHRUcmFjayh0cmFjaykudHJhY2s7XG5cbiAgICAgIGlmICghdHJhY2suc3JjICYmIHRyYWNrLmN1ZXMpIHtcbiAgICAgICAgdHJhY2suY3Vlcy5mb3JFYWNoKGZ1bmN0aW9uIChjdWUpIHtcbiAgICAgICAgICByZXR1cm4gYWRkZWRUcmFjay5hZGRDdWUoY3VlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRlY2gudGV4dFRyYWNrcygpO1xuICB9O1xuXG4gIHZhciB0ZXh0VHJhY2tDb252ZXJ0ZXIgPSB7XG4gICAgdGV4dFRyYWNrc1RvSnNvbjogdGV4dFRyYWNrc1RvSnNvbixcbiAgICBqc29uVG9UZXh0VHJhY2tzOiBqc29uVG9UZXh0VHJhY2tzLFxuICAgIHRyYWNrVG9Kc29uXzogdHJhY2tUb0pzb25fXG4gIH07XG5cbiAgZnVuY3Rpb24gY3JlYXRlQ29tbW9uanNNb2R1bGUoZm4sIG1vZHVsZSkge1xuICBcdHJldHVybiBtb2R1bGUgPSB7IGV4cG9ydHM6IHt9IH0sIGZuKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMpLCBtb2R1bGUuZXhwb3J0cztcbiAgfVxuXG4gIHZhciBrZXljb2RlID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykge1xuICAgIC8vIFNvdXJjZTogaHR0cDovL2pzZmlkZGxlLm5ldC92V3g4Vi9cbiAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzU2MDMxOTUvZnVsbC1saXN0LW9mLWphdmFzY3JpcHQta2V5Y29kZXNcblxuICAgIC8qKlxuICAgICAqIENvbmVuaWVuY2UgbWV0aG9kIHJldHVybnMgY29ycmVzcG9uZGluZyB2YWx1ZSBmb3IgZ2l2ZW4ga2V5TmFtZSBvciBrZXlDb2RlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtNaXhlZH0ga2V5Q29kZSB7TnVtYmVyfSBvciBrZXlOYW1lIHtTdHJpbmd9XG4gICAgICogQHJldHVybiB7TWl4ZWR9XG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBrZXlDb2RlKHNlYXJjaElucHV0KSB7XG4gICAgICAvLyBLZXlib2FyZCBFdmVudHNcbiAgICAgIGlmIChzZWFyY2hJbnB1dCAmJiAnb2JqZWN0JyA9PT0gdHlwZW9mIHNlYXJjaElucHV0KSB7XG4gICAgICAgIHZhciBoYXNLZXlDb2RlID0gc2VhcmNoSW5wdXQud2hpY2ggfHwgc2VhcmNoSW5wdXQua2V5Q29kZSB8fCBzZWFyY2hJbnB1dC5jaGFyQ29kZTtcbiAgICAgICAgaWYgKGhhc0tleUNvZGUpIHNlYXJjaElucHV0ID0gaGFzS2V5Q29kZTtcbiAgICAgIH0gLy8gTnVtYmVyc1xuXG5cbiAgICAgIGlmICgnbnVtYmVyJyA9PT0gdHlwZW9mIHNlYXJjaElucHV0KSByZXR1cm4gbmFtZXNbc2VhcmNoSW5wdXRdOyAvLyBFdmVyeXRoaW5nIGVsc2UgKGNhc3QgdG8gc3RyaW5nKVxuXG4gICAgICB2YXIgc2VhcmNoID0gU3RyaW5nKHNlYXJjaElucHV0KTsgLy8gY2hlY2sgY29kZXNcblxuICAgICAgdmFyIGZvdW5kTmFtZWRLZXkgPSBjb2Rlc1tzZWFyY2gudG9Mb3dlckNhc2UoKV07XG4gICAgICBpZiAoZm91bmROYW1lZEtleSkgcmV0dXJuIGZvdW5kTmFtZWRLZXk7IC8vIGNoZWNrIGFsaWFzZXNcblxuICAgICAgdmFyIGZvdW5kTmFtZWRLZXkgPSBhbGlhc2VzW3NlYXJjaC50b0xvd2VyQ2FzZSgpXTtcbiAgICAgIGlmIChmb3VuZE5hbWVkS2V5KSByZXR1cm4gZm91bmROYW1lZEtleTsgLy8gd2VpcmQgY2hhcmFjdGVyP1xuXG4gICAgICBpZiAoc2VhcmNoLmxlbmd0aCA9PT0gMSkgcmV0dXJuIHNlYXJjaC5jaGFyQ29kZUF0KDApO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcGFyZXMgYSBrZXlib2FyZCBldmVudCB3aXRoIGEgZ2l2ZW4ga2V5Q29kZSBvciBrZXlOYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgS2V5Ym9hcmQgZXZlbnQgdGhhdCBzaG91bGQgYmUgdGVzdGVkXG4gICAgICogQHBhcmFtIHtNaXhlZH0ga2V5Q29kZSB7TnVtYmVyfSBvciBrZXlOYW1lIHtTdHJpbmd9XG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAYXBpIHB1YmxpY1xuICAgICAqL1xuXG5cbiAgICBrZXlDb2RlLmlzRXZlbnRLZXkgPSBmdW5jdGlvbiBpc0V2ZW50S2V5KGV2ZW50LCBuYW1lT3JDb2RlKSB7XG4gICAgICBpZiAoZXZlbnQgJiYgJ29iamVjdCcgPT09IHR5cGVvZiBldmVudCkge1xuICAgICAgICB2YXIga2V5Q29kZSA9IGV2ZW50LndoaWNoIHx8IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQuY2hhckNvZGU7XG5cbiAgICAgICAgaWYgKGtleUNvZGUgPT09IG51bGwgfHwga2V5Q29kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lT3JDb2RlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIC8vIGNoZWNrIGNvZGVzXG4gICAgICAgICAgdmFyIGZvdW5kTmFtZWRLZXkgPSBjb2Rlc1tuYW1lT3JDb2RlLnRvTG93ZXJDYXNlKCldO1xuXG4gICAgICAgICAgaWYgKGZvdW5kTmFtZWRLZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBmb3VuZE5hbWVkS2V5ID09PSBrZXlDb2RlO1xuICAgICAgICAgIH0gLy8gY2hlY2sgYWxpYXNlc1xuXG5cbiAgICAgICAgICB2YXIgZm91bmROYW1lZEtleSA9IGFsaWFzZXNbbmFtZU9yQ29kZS50b0xvd2VyQ2FzZSgpXTtcblxuICAgICAgICAgIGlmIChmb3VuZE5hbWVkS2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gZm91bmROYW1lZEtleSA9PT0ga2V5Q29kZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWVPckNvZGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgcmV0dXJuIG5hbWVPckNvZGUgPT09IGtleUNvZGU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGtleUNvZGU7XG4gICAgLyoqXG4gICAgICogR2V0IGJ5IG5hbWVcbiAgICAgKlxuICAgICAqICAgZXhwb3J0cy5jb2RlWydlbnRlciddIC8vID0+IDEzXG4gICAgICovXG5cbiAgICB2YXIgY29kZXMgPSBleHBvcnRzLmNvZGUgPSBleHBvcnRzLmNvZGVzID0ge1xuICAgICAgJ2JhY2tzcGFjZSc6IDgsXG4gICAgICAndGFiJzogOSxcbiAgICAgICdlbnRlcic6IDEzLFxuICAgICAgJ3NoaWZ0JzogMTYsXG4gICAgICAnY3RybCc6IDE3LFxuICAgICAgJ2FsdCc6IDE4LFxuICAgICAgJ3BhdXNlL2JyZWFrJzogMTksXG4gICAgICAnY2FwcyBsb2NrJzogMjAsXG4gICAgICAnZXNjJzogMjcsXG4gICAgICAnc3BhY2UnOiAzMixcbiAgICAgICdwYWdlIHVwJzogMzMsXG4gICAgICAncGFnZSBkb3duJzogMzQsXG4gICAgICAnZW5kJzogMzUsXG4gICAgICAnaG9tZSc6IDM2LFxuICAgICAgJ2xlZnQnOiAzNyxcbiAgICAgICd1cCc6IDM4LFxuICAgICAgJ3JpZ2h0JzogMzksXG4gICAgICAnZG93bic6IDQwLFxuICAgICAgJ2luc2VydCc6IDQ1LFxuICAgICAgJ2RlbGV0ZSc6IDQ2LFxuICAgICAgJ2NvbW1hbmQnOiA5MSxcbiAgICAgICdsZWZ0IGNvbW1hbmQnOiA5MSxcbiAgICAgICdyaWdodCBjb21tYW5kJzogOTMsXG4gICAgICAnbnVtcGFkIConOiAxMDYsXG4gICAgICAnbnVtcGFkICsnOiAxMDcsXG4gICAgICAnbnVtcGFkIC0nOiAxMDksXG4gICAgICAnbnVtcGFkIC4nOiAxMTAsXG4gICAgICAnbnVtcGFkIC8nOiAxMTEsXG4gICAgICAnbnVtIGxvY2snOiAxNDQsXG4gICAgICAnc2Nyb2xsIGxvY2snOiAxNDUsXG4gICAgICAnbXkgY29tcHV0ZXInOiAxODIsXG4gICAgICAnbXkgY2FsY3VsYXRvcic6IDE4MyxcbiAgICAgICc7JzogMTg2LFxuICAgICAgJz0nOiAxODcsXG4gICAgICAnLCc6IDE4OCxcbiAgICAgICctJzogMTg5LFxuICAgICAgJy4nOiAxOTAsXG4gICAgICAnLyc6IDE5MSxcbiAgICAgICdgJzogMTkyLFxuICAgICAgJ1snOiAyMTksXG4gICAgICAnXFxcXCc6IDIyMCxcbiAgICAgICddJzogMjIxLFxuICAgICAgXCInXCI6IDIyMiAvLyBIZWxwZXIgYWxpYXNlc1xuXG4gICAgfTtcbiAgICB2YXIgYWxpYXNlcyA9IGV4cG9ydHMuYWxpYXNlcyA9IHtcbiAgICAgICd3aW5kb3dzJzogOTEsXG4gICAgICAn4oenJzogMTYsXG4gICAgICAn4oylJzogMTgsXG4gICAgICAn4oyDJzogMTcsXG4gICAgICAn4oyYJzogOTEsXG4gICAgICAnY3RsJzogMTcsXG4gICAgICAnY29udHJvbCc6IDE3LFxuICAgICAgJ29wdGlvbic6IDE4LFxuICAgICAgJ3BhdXNlJzogMTksXG4gICAgICAnYnJlYWsnOiAxOSxcbiAgICAgICdjYXBzJzogMjAsXG4gICAgICAncmV0dXJuJzogMTMsXG4gICAgICAnZXNjYXBlJzogMjcsXG4gICAgICAnc3BjJzogMzIsXG4gICAgICAnc3BhY2ViYXInOiAzMixcbiAgICAgICdwZ3VwJzogMzMsXG4gICAgICAncGdkbic6IDM0LFxuICAgICAgJ2lucyc6IDQ1LFxuICAgICAgJ2RlbCc6IDQ2LFxuICAgICAgJ2NtZCc6IDkxXG4gICAgICAvKiFcbiAgICAgICAqIFByb2dyYW1hdGljYWxseSBhZGQgdGhlIGZvbGxvd2luZ1xuICAgICAgICovXG4gICAgICAvLyBsb3dlciBjYXNlIGNoYXJzXG5cbiAgICB9O1xuXG4gICAgZm9yIChpID0gOTc7IGkgPCAxMjM7IGkrKykge1xuICAgICAgY29kZXNbU3RyaW5nLmZyb21DaGFyQ29kZShpKV0gPSBpIC0gMzI7XG4gICAgfSAvLyBudW1iZXJzXG5cblxuICAgIGZvciAodmFyIGkgPSA0ODsgaSA8IDU4OyBpKyspIHtcbiAgICAgIGNvZGVzW2kgLSA0OF0gPSBpO1xuICAgIH0gLy8gZnVuY3Rpb24ga2V5c1xuXG5cbiAgICBmb3IgKGkgPSAxOyBpIDwgMTM7IGkrKykge1xuICAgICAgY29kZXNbJ2YnICsgaV0gPSBpICsgMTExO1xuICAgIH0gLy8gbnVtcGFkIGtleXNcblxuXG4gICAgZm9yIChpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgIGNvZGVzWydudW1wYWQgJyArIGldID0gaSArIDk2O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYnkgY29kZVxuICAgICAqXG4gICAgICogICBleHBvcnRzLm5hbWVbMTNdIC8vID0+ICdFbnRlcidcbiAgICAgKi9cblxuXG4gICAgdmFyIG5hbWVzID0gZXhwb3J0cy5uYW1lcyA9IGV4cG9ydHMudGl0bGUgPSB7fTsgLy8gdGl0bGUgZm9yIGJhY2t3YXJkIGNvbXBhdFxuICAgIC8vIENyZWF0ZSByZXZlcnNlIG1hcHBpbmdcblxuICAgIGZvciAoaSBpbiBjb2Rlcykge1xuICAgICAgbmFtZXNbY29kZXNbaV1dID0gaTtcbiAgICB9IC8vIEFkZCBhbGlhc2VzXG5cblxuICAgIGZvciAodmFyIGFsaWFzIGluIGFsaWFzZXMpIHtcbiAgICAgIGNvZGVzW2FsaWFzXSA9IGFsaWFzZXNbYWxpYXNdO1xuICAgIH1cbiAgfSk7XG4gIHZhciBrZXljb2RlXzEgPSBrZXljb2RlLmNvZGU7XG4gIHZhciBrZXljb2RlXzIgPSBrZXljb2RlLmNvZGVzO1xuICB2YXIga2V5Y29kZV8zID0ga2V5Y29kZS5hbGlhc2VzO1xuICB2YXIga2V5Y29kZV80ID0ga2V5Y29kZS5uYW1lcztcbiAgdmFyIGtleWNvZGVfNSA9IGtleWNvZGUudGl0bGU7XG5cbiAgdmFyIE1PREFMX0NMQVNTX05BTUUgPSAndmpzLW1vZGFsLWRpYWxvZyc7XG4gIC8qKlxuICAgKiBUaGUgYE1vZGFsRGlhbG9nYCBkaXNwbGF5cyBvdmVyIHRoZSB2aWRlbyBhbmQgaXRzIGNvbnRyb2xzLCB3aGljaCBibG9ja3NcbiAgICogaW50ZXJhY3Rpb24gd2l0aCB0aGUgcGxheWVyIHVudGlsIGl0IGlzIGNsb3NlZC5cbiAgICpcbiAgICogTW9kYWwgZGlhbG9ncyBpbmNsdWRlIGEgXCJDbG9zZVwiIGJ1dHRvbiBhbmQgd2lsbCBjbG9zZSB3aGVuIHRoYXQgYnV0dG9uXG4gICAqIGlzIGFjdGl2YXRlZCAtIG9yIHdoZW4gRVNDIGlzIHByZXNzZWQgYW55d2hlcmUuXG4gICAqXG4gICAqIEBleHRlbmRzIENvbXBvbmVudFxuICAgKi9cblxuICB2YXIgTW9kYWxEaWFsb2cgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoTW9kYWxEaWFsb2csIF9Db21wb25lbnQpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtNaXhlZH0gW29wdGlvbnMuY29udGVudD11bmRlZmluZWRdXG4gICAgICogICAgICAgIFByb3ZpZGUgY3VzdG9taXplZCBjb250ZW50IGZvciB0aGlzIG1vZGFsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmRlc2NyaXB0aW9uXVxuICAgICAqICAgICAgICBBIHRleHQgZGVzY3JpcHRpb24gZm9yIHRoZSBtb2RhbCwgcHJpbWFyaWx5IGZvciBhY2Nlc3NpYmlsaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5maWxsQWx3YXlzPWZhbHNlXVxuICAgICAqICAgICAgICBOb3JtYWxseSwgbW9kYWxzIGFyZSBhdXRvbWF0aWNhbGx5IGZpbGxlZCBvbmx5IHRoZSBmaXJzdCB0aW1lXG4gICAgICogICAgICAgIHRoZXkgb3Blbi4gVGhpcyB0ZWxscyB0aGUgbW9kYWwgdG8gcmVmcmVzaCBpdHMgY29udGVudFxuICAgICAqICAgICAgICBldmVyeSB0aW1lIGl0IG9wZW5zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxhYmVsXVxuICAgICAqICAgICAgICBBIHRleHQgbGFiZWwgZm9yIHRoZSBtb2RhbCwgcHJpbWFyaWx5IGZvciBhY2Nlc3NpYmlsaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5wYXVzZU9uT3Blbj10cnVlXVxuICAgICAqICAgICAgICBJZiBgdHJ1ZWAsIHBsYXliYWNrIHdpbGwgd2lsbCBiZSBwYXVzZWQgaWYgcGxheWluZyB3aGVuXG4gICAgICogICAgICAgIHRoZSBtb2RhbCBvcGVucywgYW5kIHJlc3VtZWQgd2hlbiBpdCBjbG9zZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRlbXBvcmFyeT10cnVlXVxuICAgICAqICAgICAgICBJZiBgdHJ1ZWAsIHRoZSBtb2RhbCBjYW4gb25seSBiZSBvcGVuZWQgb25jZTsgaXQgd2lsbCBiZVxuICAgICAqICAgICAgICBkaXNwb3NlZCBhcyBzb29uIGFzIGl0J3MgY2xvc2VkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy51bmNsb3NlYWJsZT1mYWxzZV1cbiAgICAgKiAgICAgICAgSWYgYHRydWVgLCB0aGUgdXNlciB3aWxsIG5vdCBiZSBhYmxlIHRvIGNsb3NlIHRoZSBtb2RhbFxuICAgICAqICAgICAgICB0aHJvdWdoIHRoZSBVSSBpbiB0aGUgbm9ybWFsIHdheXMuIFByb2dyYW1tYXRpYyBjbG9zaW5nIGlzXG4gICAgICogICAgICAgIHN0aWxsIHBvc3NpYmxlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1vZGFsRGlhbG9nKHBsYXllciwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICBfdGhpcyA9IF9Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICBfdGhpcy5vcGVuZWRfID0gX3RoaXMuaGFzQmVlbk9wZW5lZF8gPSBfdGhpcy5oYXNCZWVuRmlsbGVkXyA9IGZhbHNlO1xuXG4gICAgICBfdGhpcy5jbG9zZWFibGUoIV90aGlzLm9wdGlvbnNfLnVuY2xvc2VhYmxlKTtcblxuICAgICAgX3RoaXMuY29udGVudChfdGhpcy5vcHRpb25zXy5jb250ZW50KTsgLy8gTWFrZSBzdXJlIHRoZSBjb250ZW50RWwgaXMgZGVmaW5lZCBBRlRFUiBhbnkgY2hpbGRyZW4gYXJlIGluaXRpYWxpemVkXG4gICAgICAvLyBiZWNhdXNlIHdlIG9ubHkgd2FudCB0aGUgY29udGVudHMgb2YgdGhlIG1vZGFsIGluIHRoZSBjb250ZW50RWxcbiAgICAgIC8vIChub3QgdGhlIFVJIGVsZW1lbnRzIGxpa2UgdGhlIGNsb3NlIGJ1dHRvbikuXG5cblxuICAgICAgX3RoaXMuY29udGVudEVsXyA9IGNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogTU9EQUxfQ0xBU1NfTkFNRSArIFwiLWNvbnRlbnRcIlxuICAgICAgfSwge1xuICAgICAgICByb2xlOiAnZG9jdW1lbnQnXG4gICAgICB9KTtcbiAgICAgIF90aGlzLmRlc2NFbF8gPSBjcmVhdGVFbCgncCcsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBNT0RBTF9DTEFTU19OQU1FICsgXCItZGVzY3JpcHRpb24gdmpzLWNvbnRyb2wtdGV4dFwiLFxuICAgICAgICBpZDogX3RoaXMuZWwoKS5nZXRBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknKVxuICAgICAgfSk7XG4gICAgICB0ZXh0Q29udGVudChfdGhpcy5kZXNjRWxfLCBfdGhpcy5kZXNjcmlwdGlvbigpKTtcblxuICAgICAgX3RoaXMuZWxfLmFwcGVuZENoaWxkKF90aGlzLmRlc2NFbF8pO1xuXG4gICAgICBfdGhpcy5lbF8uYXBwZW5kQ2hpbGQoX3RoaXMuY29udGVudEVsXyk7XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBgTW9kYWxEaWFsb2dgJ3MgRE9NIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgRE9NIGVsZW1lbnQgdGhhdCBnZXRzIGNyZWF0ZWQuXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBNb2RhbERpYWxvZy5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSgpIHtcbiAgICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogdGhpcy5idWlsZENTU0NsYXNzKCksXG4gICAgICAgIHRhYkluZGV4OiAtMVxuICAgICAgfSwge1xuICAgICAgICAnYXJpYS1kZXNjcmliZWRieSc6IHRoaXMuaWQoKSArIFwiX2Rlc2NyaXB0aW9uXCIsXG4gICAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJyxcbiAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLmxhYmVsKCksXG4gICAgICAgICdyb2xlJzogJ2RpYWxvZydcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICB0aGlzLmNvbnRlbnRFbF8gPSBudWxsO1xuICAgICAgdGhpcy5kZXNjRWxfID0gbnVsbDtcbiAgICAgIHRoaXMucHJldmlvdXNseUFjdGl2ZUVsXyA9IG51bGw7XG5cbiAgICAgIF9Db21wb25lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVpbGRzIHRoZSBkZWZhdWx0IERPTSBgY2xhc3NOYW1lYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKiAgICAgICAgIFRoZSBET00gYGNsYXNzTmFtZWAgZm9yIHRoaXMgb2JqZWN0LlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRDU1NDbGFzcygpIHtcbiAgICAgIHJldHVybiBNT0RBTF9DTEFTU19OQU1FICsgXCIgdmpzLWhpZGRlbiBcIiArIF9Db21wb25lbnQucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBga2V5ZG93bmAgZXZlbnRzIG9uIHRoZSBkb2N1bWVudCwgbG9va2luZyBmb3IgRVNDLCB3aGljaCBjbG9zZXNcbiAgICAgKiB0aGUgbW9kYWwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBUaGUga2V5cHJlc3MgdGhhdCB0cmlnZ2VyZWQgdGhpcyBldmVudC5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIGtleWRvd25cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlS2V5UHJlc3MgPSBmdW5jdGlvbiBoYW5kbGVLZXlQcmVzcyhldmVudCkge1xuICAgICAgaWYgKGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ0VzY2FwZScpICYmIHRoaXMuY2xvc2VhYmxlKCkpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsYWJlbCBzdHJpbmcgZm9yIHRoaXMgbW9kYWwuIFByaW1hcmlseSB1c2VkIGZvciBhY2Nlc3NpYmlsaXR5LlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgdGhlIGxvY2FsaXplZCBvciByYXcgbGFiZWwgb2YgdGhpcyBtb2RhbC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ubGFiZWwgPSBmdW5jdGlvbiBsYWJlbCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmxvY2FsaXplKHRoaXMub3B0aW9uc18ubGFiZWwgfHwgJ01vZGFsIFdpbmRvdycpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkZXNjcmlwdGlvbiBzdHJpbmcgZm9yIHRoaXMgbW9kYWwuIFByaW1hcmlseSB1c2VkIGZvclxuICAgICAqIGFjY2Vzc2liaWxpdHkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogICAgICAgICBUaGUgbG9jYWxpemVkIG9yIHJhdyBkZXNjcmlwdGlvbiBvZiB0aGlzIG1vZGFsLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5kZXNjcmlwdGlvbiA9IGZ1bmN0aW9uIGRlc2NyaXB0aW9uKCkge1xuICAgICAgdmFyIGRlc2MgPSB0aGlzLm9wdGlvbnNfLmRlc2NyaXB0aW9uIHx8IHRoaXMubG9jYWxpemUoJ1RoaXMgaXMgYSBtb2RhbCB3aW5kb3cuJyk7IC8vIEFwcGVuZCBhIHVuaXZlcnNhbCBjbG9zZWFiaWxpdHkgbWVzc2FnZSBpZiB0aGUgbW9kYWwgaXMgY2xvc2VhYmxlLlxuXG4gICAgICBpZiAodGhpcy5jbG9zZWFibGUoKSkge1xuICAgICAgICBkZXNjICs9ICcgJyArIHRoaXMubG9jYWxpemUoJ1RoaXMgbW9kYWwgY2FuIGJlIGNsb3NlZCBieSBwcmVzc2luZyB0aGUgRXNjYXBlIGtleSBvciBhY3RpdmF0aW5nIHRoZSBjbG9zZSBidXR0b24uJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkZXNjO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPcGVucyB0aGUgbW9kYWwuXG4gICAgICpcbiAgICAgKiBAZmlyZXMgTW9kYWxEaWFsb2cjYmVmb3JlbW9kYWxvcGVuXG4gICAgICogQGZpcmVzIE1vZGFsRGlhbG9nI21vZGFsb3BlblxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5vcGVuID0gZnVuY3Rpb24gb3BlbigpIHtcbiAgICAgIGlmICghdGhpcy5vcGVuZWRfKSB7XG4gICAgICAgIHZhciBwbGF5ZXIgPSB0aGlzLnBsYXllcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICAqIEZpcmVkIGp1c3QgYmVmb3JlIGEgYE1vZGFsRGlhbG9nYCBpcyBvcGVuZWQuXG4gICAgICAgICAgKlxuICAgICAgICAgICogQGV2ZW50IE1vZGFsRGlhbG9nI2JlZm9yZW1vZGFsb3BlblxuICAgICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICAgICovXG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdiZWZvcmVtb2RhbG9wZW4nKTtcbiAgICAgICAgdGhpcy5vcGVuZWRfID0gdHJ1ZTsgLy8gRmlsbCBjb250ZW50IGlmIHRoZSBtb2RhbCBoYXMgbmV2ZXIgb3BlbmVkIGJlZm9yZSBhbmRcbiAgICAgICAgLy8gbmV2ZXIgYmVlbiBmaWxsZWQuXG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9uc18uZmlsbEFsd2F5cyB8fCAhdGhpcy5oYXNCZWVuT3BlbmVkXyAmJiAhdGhpcy5oYXNCZWVuRmlsbGVkXykge1xuICAgICAgICAgIHRoaXMuZmlsbCgpO1xuICAgICAgICB9IC8vIElmIHRoZSBwbGF5ZXIgd2FzIHBsYXlpbmcsIHBhdXNlIGl0IGFuZCB0YWtlIG5vdGUgb2YgaXRzIHByZXZpb3VzbHlcbiAgICAgICAgLy8gcGxheWluZyBzdGF0ZS5cblxuXG4gICAgICAgIHRoaXMud2FzUGxheWluZ18gPSAhcGxheWVyLnBhdXNlZCgpO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnNfLnBhdXNlT25PcGVuICYmIHRoaXMud2FzUGxheWluZ18pIHtcbiAgICAgICAgICBwbGF5ZXIucGF1c2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNsb3NlYWJsZSgpKSB7XG4gICAgICAgICAgdGhpcy5vbih0aGlzLmVsXy5vd25lckRvY3VtZW50LCAna2V5ZG93bicsIGJpbmQodGhpcywgdGhpcy5oYW5kbGVLZXlQcmVzcykpO1xuICAgICAgICB9IC8vIEhpZGUgY29udHJvbHMgYW5kIG5vdGUgaWYgdGhleSB3ZXJlIGVuYWJsZWQuXG5cblxuICAgICAgICB0aGlzLmhhZENvbnRyb2xzXyA9IHBsYXllci5jb250cm9scygpO1xuICAgICAgICBwbGF5ZXIuY29udHJvbHMoZmFsc2UpO1xuICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgdGhpcy5jb25kaXRpb25hbEZvY3VzXygpO1xuICAgICAgICB0aGlzLmVsKCkuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xuICAgICAgICAvKipcbiAgICAgICAgICAqIEZpcmVkIGp1c3QgYWZ0ZXIgYSBgTW9kYWxEaWFsb2dgIGlzIG9wZW5lZC5cbiAgICAgICAgICAqXG4gICAgICAgICAgKiBAZXZlbnQgTW9kYWxEaWFsb2cjbW9kYWxvcGVuXG4gICAgICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgICAgKi9cblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ21vZGFsb3BlbicpO1xuICAgICAgICB0aGlzLmhhc0JlZW5PcGVuZWRfID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgdGhlIGBNb2RhbERpYWxvZ2AgaXMgY3VycmVudGx5IG9wZW4gb3IgY2xvc2VkLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gW3ZhbHVlXVxuICAgICAqICAgICAgICAgSWYgZ2l2ZW4sIGl0IHdpbGwgb3BlbiAoYHRydWVgKSBvciBjbG9zZSAoYGZhbHNlYCkgdGhlIG1vZGFsLlxuICAgICAqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKiAgICAgICAgIHRoZSBjdXJyZW50IG9wZW4gc3RhdGUgb2YgdGhlIG1vZGFsZGlhbG9nXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLm9wZW5lZCA9IGZ1bmN0aW9uIG9wZW5lZCh2YWx1ZSkge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHRoaXNbdmFsdWUgPyAnb3BlbicgOiAnY2xvc2UnXSgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5vcGVuZWRfO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIG1vZGFsLCBkb2VzIG5vdGhpbmcgaWYgdGhlIGBNb2RhbERpYWxvZ2AgaXNcbiAgICAgKiBub3Qgb3Blbi5cbiAgICAgKlxuICAgICAqIEBmaXJlcyBNb2RhbERpYWxvZyNiZWZvcmVtb2RhbGNsb3NlXG4gICAgICogQGZpcmVzIE1vZGFsRGlhbG9nI21vZGFsY2xvc2VcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY2xvc2UgPSBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgIGlmICghdGhpcy5vcGVuZWRfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHBsYXllciA9IHRoaXMucGxheWVyKCk7XG4gICAgICAvKipcbiAgICAgICAgKiBGaXJlZCBqdXN0IGJlZm9yZSBhIGBNb2RhbERpYWxvZ2AgaXMgY2xvc2VkLlxuICAgICAgICAqXG4gICAgICAgICogQGV2ZW50IE1vZGFsRGlhbG9nI2JlZm9yZW1vZGFsY2xvc2VcbiAgICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgICovXG5cbiAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlbW9kYWxjbG9zZScpO1xuICAgICAgdGhpcy5vcGVuZWRfID0gZmFsc2U7XG5cbiAgICAgIGlmICh0aGlzLndhc1BsYXlpbmdfICYmIHRoaXMub3B0aW9uc18ucGF1c2VPbk9wZW4pIHtcbiAgICAgICAgcGxheWVyLnBsYXkoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuY2xvc2VhYmxlKCkpIHtcbiAgICAgICAgdGhpcy5vZmYodGhpcy5lbF8ub3duZXJEb2N1bWVudCwgJ2tleWRvd24nLCBiaW5kKHRoaXMsIHRoaXMuaGFuZGxlS2V5UHJlc3MpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuaGFkQ29udHJvbHNfKSB7XG4gICAgICAgIHBsYXllci5jb250cm9scyh0cnVlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICB0aGlzLmVsKCkuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgICAvKipcbiAgICAgICAgKiBGaXJlZCBqdXN0IGFmdGVyIGEgYE1vZGFsRGlhbG9nYCBpcyBjbG9zZWQuXG4gICAgICAgICpcbiAgICAgICAgKiBAZXZlbnQgTW9kYWxEaWFsb2cjbW9kYWxjbG9zZVxuICAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAgKi9cblxuICAgICAgdGhpcy50cmlnZ2VyKCdtb2RhbGNsb3NlJyk7XG4gICAgICB0aGlzLmNvbmRpdGlvbmFsQmx1cl8oKTtcblxuICAgICAgaWYgKHRoaXMub3B0aW9uc18udGVtcG9yYXJ5KSB7XG4gICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayB0byBzZWUgaWYgdGhlIGBNb2RhbERpYWxvZ2AgaXMgY2xvc2VhYmxlIHZpYSB0aGUgVUkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBbdmFsdWVdXG4gICAgICogICAgICAgICBJZiBnaXZlbiBhcyBhIGJvb2xlYW4sIGl0IHdpbGwgc2V0IHRoZSBgY2xvc2VhYmxlYCBvcHRpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqICAgICAgICAgUmV0dXJucyB0aGUgZmluYWwgdmFsdWUgb2YgdGhlIGNsb3NhYmxlIG9wdGlvbi5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY2xvc2VhYmxlID0gZnVuY3Rpb24gY2xvc2VhYmxlKHZhbHVlKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdmFyIGNsb3NlYWJsZSA9IHRoaXMuY2xvc2VhYmxlXyA9ICEhdmFsdWU7XG4gICAgICAgIHZhciBjbG9zZSA9IHRoaXMuZ2V0Q2hpbGQoJ2Nsb3NlQnV0dG9uJyk7IC8vIElmIHRoaXMgaXMgYmVpbmcgbWFkZSBjbG9zZWFibGUgYW5kIGhhcyBubyBjbG9zZSBidXR0b24sIGFkZCBvbmUuXG5cbiAgICAgICAgaWYgKGNsb3NlYWJsZSAmJiAhY2xvc2UpIHtcbiAgICAgICAgICAvLyBUaGUgY2xvc2UgYnV0dG9uIHNob3VsZCBiZSBhIGNoaWxkIG9mIHRoZSBtb2RhbCAtIG5vdCBpdHNcbiAgICAgICAgICAvLyBjb250ZW50IGVsZW1lbnQsIHNvIHRlbXBvcmFyaWx5IGNoYW5nZSB0aGUgY29udGVudCBlbGVtZW50LlxuICAgICAgICAgIHZhciB0ZW1wID0gdGhpcy5jb250ZW50RWxfO1xuICAgICAgICAgIHRoaXMuY29udGVudEVsXyA9IHRoaXMuZWxfO1xuICAgICAgICAgIGNsb3NlID0gdGhpcy5hZGRDaGlsZCgnY2xvc2VCdXR0b24nLCB7XG4gICAgICAgICAgICBjb250cm9sVGV4dDogJ0Nsb3NlIE1vZGFsIERpYWxvZydcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLmNvbnRlbnRFbF8gPSB0ZW1wO1xuICAgICAgICAgIHRoaXMub24oY2xvc2UsICdjbG9zZScsIHRoaXMuY2xvc2UpO1xuICAgICAgICB9IC8vIElmIHRoaXMgaXMgYmVpbmcgbWFkZSB1bmNsb3NlYWJsZSBhbmQgaGFzIGEgY2xvc2UgYnV0dG9uLCByZW1vdmUgaXQuXG5cblxuICAgICAgICBpZiAoIWNsb3NlYWJsZSAmJiBjbG9zZSkge1xuICAgICAgICAgIHRoaXMub2ZmKGNsb3NlLCAnY2xvc2UnLCB0aGlzLmNsb3NlKTtcbiAgICAgICAgICB0aGlzLnJlbW92ZUNoaWxkKGNsb3NlKTtcbiAgICAgICAgICBjbG9zZS5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY2xvc2VhYmxlXztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmlsbCB0aGUgbW9kYWwncyBjb250ZW50IGVsZW1lbnQgd2l0aCB0aGUgbW9kYWwncyBcImNvbnRlbnRcIiBvcHRpb24uXG4gICAgICogVGhlIGNvbnRlbnQgZWxlbWVudCB3aWxsIGJlIGVtcHRpZWQgYmVmb3JlIHRoaXMgY2hhbmdlIHRha2VzIHBsYWNlLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5maWxsID0gZnVuY3Rpb24gZmlsbCgpIHtcbiAgICAgIHRoaXMuZmlsbFdpdGgodGhpcy5jb250ZW50KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaWxsIHRoZSBtb2RhbCdzIGNvbnRlbnQgZWxlbWVudCB3aXRoIGFyYml0cmFyeSBjb250ZW50LlxuICAgICAqIFRoZSBjb250ZW50IGVsZW1lbnQgd2lsbCBiZSBlbXB0aWVkIGJlZm9yZSB0aGlzIGNoYW5nZSB0YWtlcyBwbGFjZS5cbiAgICAgKlxuICAgICAqIEBmaXJlcyBNb2RhbERpYWxvZyNiZWZvcmVtb2RhbGZpbGxcbiAgICAgKiBAZmlyZXMgTW9kYWxEaWFsb2cjbW9kYWxmaWxsXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge01peGVkfSBbY29udGVudF1cbiAgICAgKiAgICAgICAgVGhlIHNhbWUgcnVsZXMgYXBwbHkgdG8gdGhpcyBhcyBhcHBseSB0byB0aGUgYGNvbnRlbnRgIG9wdGlvbi5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZmlsbFdpdGggPSBmdW5jdGlvbiBmaWxsV2l0aChjb250ZW50KSB7XG4gICAgICB2YXIgY29udGVudEVsID0gdGhpcy5jb250ZW50RWwoKTtcbiAgICAgIHZhciBwYXJlbnRFbCA9IGNvbnRlbnRFbC5wYXJlbnROb2RlO1xuICAgICAgdmFyIG5leHRTaWJsaW5nRWwgPSBjb250ZW50RWwubmV4dFNpYmxpbmc7XG4gICAgICAvKipcbiAgICAgICAgKiBGaXJlZCBqdXN0IGJlZm9yZSBhIGBNb2RhbERpYWxvZ2AgaXMgZmlsbGVkIHdpdGggY29udGVudC5cbiAgICAgICAgKlxuICAgICAgICAqIEBldmVudCBNb2RhbERpYWxvZyNiZWZvcmVtb2RhbGZpbGxcbiAgICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgICovXG5cbiAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlbW9kYWxmaWxsJyk7XG4gICAgICB0aGlzLmhhc0JlZW5GaWxsZWRfID0gdHJ1ZTsgLy8gRGV0YWNoIHRoZSBjb250ZW50IGVsZW1lbnQgZnJvbSB0aGUgRE9NIGJlZm9yZSBwZXJmb3JtaW5nXG4gICAgICAvLyBtYW5pcHVsYXRpb24gdG8gYXZvaWQgbW9kaWZ5aW5nIHRoZSBsaXZlIERPTSBtdWx0aXBsZSB0aW1lcy5cblxuICAgICAgcGFyZW50RWwucmVtb3ZlQ2hpbGQoY29udGVudEVsKTtcbiAgICAgIHRoaXMuZW1wdHkoKTtcbiAgICAgIGluc2VydENvbnRlbnQoY29udGVudEVsLCBjb250ZW50KTtcbiAgICAgIC8qKlxuICAgICAgICogRmlyZWQganVzdCBhZnRlciBhIGBNb2RhbERpYWxvZ2AgaXMgZmlsbGVkIHdpdGggY29udGVudC5cbiAgICAgICAqXG4gICAgICAgKiBAZXZlbnQgTW9kYWxEaWFsb2cjbW9kYWxmaWxsXG4gICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgKi9cblxuICAgICAgdGhpcy50cmlnZ2VyKCdtb2RhbGZpbGwnKTsgLy8gUmUtaW5qZWN0IHRoZSByZS1maWxsZWQgY29udGVudCBlbGVtZW50LlxuXG4gICAgICBpZiAobmV4dFNpYmxpbmdFbCkge1xuICAgICAgICBwYXJlbnRFbC5pbnNlcnRCZWZvcmUoY29udGVudEVsLCBuZXh0U2libGluZ0VsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmVudEVsLmFwcGVuZENoaWxkKGNvbnRlbnRFbCk7XG4gICAgICB9IC8vIG1ha2Ugc3VyZSB0aGF0IHRoZSBjbG9zZSBidXR0b24gaXMgbGFzdCBpbiB0aGUgZGlhbG9nIERPTVxuXG5cbiAgICAgIHZhciBjbG9zZUJ1dHRvbiA9IHRoaXMuZ2V0Q2hpbGQoJ2Nsb3NlQnV0dG9uJyk7XG5cbiAgICAgIGlmIChjbG9zZUJ1dHRvbikge1xuICAgICAgICBwYXJlbnRFbC5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbi5lbF8pO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbXB0aWVzIHRoZSBjb250ZW50IGVsZW1lbnQuIFRoaXMgaGFwcGVucyBhbnl0aW1lIHRoZSBtb2RhbCBpcyBmaWxsZWQuXG4gICAgICpcbiAgICAgKiBAZmlyZXMgTW9kYWxEaWFsb2cjYmVmb3JlbW9kYWxlbXB0eVxuICAgICAqIEBmaXJlcyBNb2RhbERpYWxvZyNtb2RhbGVtcHR5XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmVtcHR5ID0gZnVuY3Rpb24gZW1wdHkoKSB7XG4gICAgICAvKipcbiAgICAgICogRmlyZWQganVzdCBiZWZvcmUgYSBgTW9kYWxEaWFsb2dgIGlzIGVtcHRpZWQuXG4gICAgICAqXG4gICAgICAqIEBldmVudCBNb2RhbERpYWxvZyNiZWZvcmVtb2RhbGVtcHR5XG4gICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICovXG4gICAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZW1vZGFsZW1wdHknKTtcbiAgICAgIGVtcHR5RWwodGhpcy5jb250ZW50RWwoKSk7XG4gICAgICAvKipcbiAgICAgICogRmlyZWQganVzdCBhZnRlciBhIGBNb2RhbERpYWxvZ2AgaXMgZW1wdGllZC5cbiAgICAgICpcbiAgICAgICogQGV2ZW50IE1vZGFsRGlhbG9nI21vZGFsZW1wdHlcbiAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgKi9cblxuICAgICAgdGhpcy50cmlnZ2VyKCdtb2RhbGVtcHR5Jyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgb3Igc2V0cyB0aGUgbW9kYWwgY29udGVudCwgd2hpY2ggZ2V0cyBub3JtYWxpemVkIGJlZm9yZSBiZWluZ1xuICAgICAqIHJlbmRlcmVkIGludG8gdGhlIERPTS5cbiAgICAgKlxuICAgICAqIFRoaXMgZG9lcyBub3QgdXBkYXRlIHRoZSBET00gb3IgZmlsbCB0aGUgbW9kYWwsIGJ1dCBpdCBpcyBjYWxsZWQgZHVyaW5nXG4gICAgICogdGhhdCBwcm9jZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7TWl4ZWR9IFt2YWx1ZV1cbiAgICAgKiAgICAgICAgIElmIGRlZmluZWQsIHNldHMgdGhlIGludGVybmFsIGNvbnRlbnQgdmFsdWUgdG8gYmUgdXNlZCBvbiB0aGVcbiAgICAgKiAgICAgICAgIG5leHQgY2FsbChzKSB0byBgZmlsbGAuIFRoaXMgdmFsdWUgaXMgbm9ybWFsaXplZCBiZWZvcmUgYmVpbmdcbiAgICAgKiAgICAgICAgIGluc2VydGVkLiBUbyBcImNsZWFyXCIgdGhlIGludGVybmFsIGNvbnRlbnQgdmFsdWUsIHBhc3MgYG51bGxgLlxuICAgICAqXG4gICAgICogQHJldHVybiB7TWl4ZWR9XG4gICAgICogICAgICAgICBUaGUgY3VycmVudCBjb250ZW50IG9mIHRoZSBtb2RhbCBkaWFsb2dcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY29udGVudCA9IGZ1bmN0aW9uIGNvbnRlbnQodmFsdWUpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuY29udGVudF8gPSB2YWx1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY29udGVudF87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGNvbmRpdGlvbmFsbHkgZm9jdXMgdGhlIG1vZGFsIGRpYWxvZyBpZiBmb2N1cyB3YXMgcHJldmlvdXNseSBvbiB0aGUgcGxheWVyLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY29uZGl0aW9uYWxGb2N1c18gPSBmdW5jdGlvbiBjb25kaXRpb25hbEZvY3VzXygpIHtcbiAgICAgIHZhciBhY3RpdmVFbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICB2YXIgcGxheWVyRWwgPSB0aGlzLnBsYXllcl8uZWxfO1xuICAgICAgdGhpcy5wcmV2aW91c2x5QWN0aXZlRWxfID0gbnVsbDtcblxuICAgICAgaWYgKHBsYXllckVsLmNvbnRhaW5zKGFjdGl2ZUVsKSB8fCBwbGF5ZXJFbCA9PT0gYWN0aXZlRWwpIHtcbiAgICAgICAgdGhpcy5wcmV2aW91c2x5QWN0aXZlRWxfID0gYWN0aXZlRWw7XG4gICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5vbihkb2N1bWVudCwgJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleURvd24pO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBjb25kaXRpb25hbGx5IGJsdXIgdGhlIGVsZW1lbnQgYW5kIHJlZm9jdXMgdGhlIGxhc3QgZm9jdXNlZCBlbGVtZW50XG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jb25kaXRpb25hbEJsdXJfID0gZnVuY3Rpb24gY29uZGl0aW9uYWxCbHVyXygpIHtcbiAgICAgIGlmICh0aGlzLnByZXZpb3VzbHlBY3RpdmVFbF8pIHtcbiAgICAgICAgdGhpcy5wcmV2aW91c2x5QWN0aXZlRWxfLmZvY3VzKCk7XG4gICAgICAgIHRoaXMucHJldmlvdXNseUFjdGl2ZUVsXyA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHRoaXMub2ZmKGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5RG93bik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEtleWRvd24gaGFuZGxlci4gQXR0YWNoZWQgd2hlbiBtb2RhbCBpcyBmb2N1c2VkLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMga2V5ZG93blxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVLZXlEb3duID0gZnVuY3Rpb24gaGFuZGxlS2V5RG93bihldmVudCkge1xuICAgICAgLy8gZXhpdCBlYXJseSBpZiBpdCBpc24ndCBhIHRhYiBrZXlcbiAgICAgIGlmICgha2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnVGFiJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZm9jdXNhYmxlRWxzID0gdGhpcy5mb2N1c2FibGVFbHNfKCk7XG4gICAgICB2YXIgYWN0aXZlRWwgPSB0aGlzLmVsXy5xdWVyeVNlbGVjdG9yKCc6Zm9jdXMnKTtcbiAgICAgIHZhciBmb2N1c0luZGV4O1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZvY3VzYWJsZUVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYWN0aXZlRWwgPT09IGZvY3VzYWJsZUVsc1tpXSkge1xuICAgICAgICAgIGZvY3VzSW5kZXggPSBpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSB0aGlzLmVsXykge1xuICAgICAgICBmb2N1c0luZGV4ID0gMDtcbiAgICAgIH1cblxuICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5ICYmIGZvY3VzSW5kZXggPT09IDApIHtcbiAgICAgICAgZm9jdXNhYmxlRWxzW2ZvY3VzYWJsZUVscy5sZW5ndGggLSAxXS5mb2N1cygpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSBlbHNlIGlmICghZXZlbnQuc2hpZnRLZXkgJiYgZm9jdXNJbmRleCA9PT0gZm9jdXNhYmxlRWxzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgZm9jdXNhYmxlRWxzWzBdLmZvY3VzKCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGdldCBhbGwgZm9jdXNhYmxlIGVsZW1lbnRzXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5mb2N1c2FibGVFbHNfID0gZnVuY3Rpb24gZm9jdXNhYmxlRWxzXygpIHtcbiAgICAgIHZhciBhbGxDaGlsZHJlbiA9IHRoaXMuZWxfLnF1ZXJ5U2VsZWN0b3JBbGwoJyonKTtcbiAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYWxsQ2hpbGRyZW4sIGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICByZXR1cm4gKGNoaWxkIGluc3RhbmNlb2Ygd2luZG93JDEuSFRNTEFuY2hvckVsZW1lbnQgfHwgY2hpbGQgaW5zdGFuY2VvZiB3aW5kb3ckMS5IVE1MQXJlYUVsZW1lbnQpICYmIGNoaWxkLmhhc0F0dHJpYnV0ZSgnaHJlZicpIHx8IChjaGlsZCBpbnN0YW5jZW9mIHdpbmRvdyQxLkhUTUxJbnB1dEVsZW1lbnQgfHwgY2hpbGQgaW5zdGFuY2VvZiB3aW5kb3ckMS5IVE1MU2VsZWN0RWxlbWVudCB8fCBjaGlsZCBpbnN0YW5jZW9mIHdpbmRvdyQxLkhUTUxUZXh0QXJlYUVsZW1lbnQgfHwgY2hpbGQgaW5zdGFuY2VvZiB3aW5kb3ckMS5IVE1MQnV0dG9uRWxlbWVudCkgJiYgIWNoaWxkLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSB8fCBjaGlsZCBpbnN0YW5jZW9mIHdpbmRvdyQxLkhUTUxJRnJhbWVFbGVtZW50IHx8IGNoaWxkIGluc3RhbmNlb2Ygd2luZG93JDEuSFRNTE9iamVjdEVsZW1lbnQgfHwgY2hpbGQgaW5zdGFuY2VvZiB3aW5kb3ckMS5IVE1MRW1iZWRFbGVtZW50IHx8IGNoaWxkLmhhc0F0dHJpYnV0ZSgndGFiaW5kZXgnKSAmJiBjaGlsZC5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JykgIT09IC0xIHx8IGNoaWxkLmhhc0F0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJyk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1vZGFsRGlhbG9nO1xuICB9KENvbXBvbmVudCk7XG4gIC8qKlxuICAgKiBEZWZhdWx0IG9wdGlvbnMgZm9yIGBNb2RhbERpYWxvZ2AgZGVmYXVsdCBvcHRpb25zLlxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIE1vZGFsRGlhbG9nLnByb3RvdHlwZS5vcHRpb25zXyA9IHtcbiAgICBwYXVzZU9uT3BlbjogdHJ1ZSxcbiAgICB0ZW1wb3Jhcnk6IHRydWVcbiAgfTtcbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdNb2RhbERpYWxvZycsIE1vZGFsRGlhbG9nKTtcblxuICAvKipcbiAgICogQ29tbW9uIGZ1bmN0aW9uYWxpeSBiZXR3ZWVuIHtAbGluayBUZXh0VHJhY2tMaXN0fSwge0BsaW5rIEF1ZGlvVHJhY2tMaXN0fSwgYW5kXG4gICAqIHtAbGluayBWaWRlb1RyYWNrTGlzdH1cbiAgICpcbiAgICogQGV4dGVuZHMgRXZlbnRUYXJnZXRcbiAgICovXG5cbiAgdmFyIFRyYWNrTGlzdCA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9FdmVudFRhcmdldCkge1xuICAgIF9pbmhlcml0c0xvb3NlKFRyYWNrTGlzdCwgX0V2ZW50VGFyZ2V0KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RyYWNrW119IHRyYWNrc1xuICAgICAqICAgICAgICBBIGxpc3Qgb2YgdHJhY2tzIHRvIGluaXRpYWxpemUgdGhlIGxpc3Qgd2l0aC5cbiAgICAgKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRyYWNrTGlzdCh0cmFja3MpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgaWYgKHRyYWNrcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHRyYWNrcyA9IFtdO1xuICAgICAgfVxuXG4gICAgICBfdGhpcyA9IF9FdmVudFRhcmdldC5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICBfdGhpcy50cmFja3NfID0gW107XG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBUcmFja0xpc3RcbiAgICAgICAqIEBtZW1iZXIge251bWJlcn0gbGVuZ3RoXG4gICAgICAgKiAgICAgICAgIFRoZSBjdXJyZW50IG51bWJlciBvZiBgVHJhY2tgcyBpbiB0aGUgdGhpcyBUcmFja2lzdC5cbiAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICovXG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgJ2xlbmd0aCcsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMudHJhY2tzXy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBfdGhpcy5hZGRUcmFjayh0cmFja3NbaV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIHtAbGluayBUcmFja30gdG8gdGhlIGBUcmFja0xpc3RgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RyYWNrfSB0cmFja1xuICAgICAqICAgICAgICBUaGUgYXVkaW8sIHZpZGVvLCBvciB0ZXh0IHRyYWNrIHRvIGFkZCB0byB0aGUgbGlzdC5cbiAgICAgKlxuICAgICAqIEBmaXJlcyBUcmFja0xpc3QjYWRkdHJhY2tcbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90byA9IFRyYWNrTGlzdC5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uYWRkVHJhY2sgPSBmdW5jdGlvbiBhZGRUcmFjayh0cmFjaykge1xuICAgICAgdmFyIGluZGV4ID0gdGhpcy50cmFja3NfLmxlbmd0aDtcblxuICAgICAgaWYgKCEoJycgKyBpbmRleCBpbiB0aGlzKSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgaW5kZXgsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYWNrc19baW5kZXhdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IC8vIERvIG5vdCBhZGQgZHVwbGljYXRlIHRyYWNrc1xuXG5cbiAgICAgIGlmICh0aGlzLnRyYWNrc18uaW5kZXhPZih0cmFjaykgPT09IC0xKSB7XG4gICAgICAgIHRoaXMudHJhY2tzXy5wdXNoKHRyYWNrKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgdHJhY2sgaXMgYWRkZWQgdG8gYSB0cmFjayBsaXN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgVHJhY2tMaXN0I2FkZHRyYWNrXG4gICAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAgICogQHByb3BlcnR5IHtUcmFja30gdHJhY2tcbiAgICAgICAgICogICAgICAgICAgIEEgcmVmZXJlbmNlIHRvIHRyYWNrIHRoYXQgd2FzIGFkZGVkLlxuICAgICAgICAgKi9cblxuICAgICAgICB0aGlzLnRyaWdnZXIoe1xuICAgICAgICAgIHRyYWNrOiB0cmFjayxcbiAgICAgICAgICB0eXBlOiAnYWRkdHJhY2snLFxuICAgICAgICAgIHRhcmdldDogdGhpc1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEge0BsaW5rIFRyYWNrfSBmcm9tIHRoZSBgVHJhY2tMaXN0YFxuICAgICAqXG4gICAgICogQHBhcmFtIHtUcmFja30gcnRyYWNrXG4gICAgICogICAgICAgIFRoZSBhdWRpbywgdmlkZW8sIG9yIHRleHQgdHJhY2sgdG8gcmVtb3ZlIGZyb20gdGhlIGxpc3QuXG4gICAgICpcbiAgICAgKiBAZmlyZXMgVHJhY2tMaXN0I3JlbW92ZXRyYWNrXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnJlbW92ZVRyYWNrID0gZnVuY3Rpb24gcmVtb3ZlVHJhY2socnRyYWNrKSB7XG4gICAgICB2YXIgdHJhY2s7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKHRoaXNbaV0gPT09IHJ0cmFjaykge1xuICAgICAgICAgIHRyYWNrID0gdGhpc1tpXTtcblxuICAgICAgICAgIGlmICh0cmFjay5vZmYpIHtcbiAgICAgICAgICAgIHRyYWNrLm9mZigpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMudHJhY2tzXy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCF0cmFjaykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgdHJhY2sgaXMgcmVtb3ZlZCBmcm9tIHRyYWNrIGxpc3QuXG4gICAgICAgKlxuICAgICAgICogQGV2ZW50IFRyYWNrTGlzdCNyZW1vdmV0cmFja1xuICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICogQHByb3BlcnR5IHtUcmFja30gdHJhY2tcbiAgICAgICAqICAgICAgICAgICBBIHJlZmVyZW5jZSB0byB0cmFjayB0aGF0IHdhcyByZW1vdmVkLlxuICAgICAgICovXG5cblxuICAgICAgdGhpcy50cmlnZ2VyKHtcbiAgICAgICAgdHJhY2s6IHRyYWNrLFxuICAgICAgICB0eXBlOiAncmVtb3ZldHJhY2snLFxuICAgICAgICB0YXJnZXQ6IHRoaXNcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYSBUcmFjayBmcm9tIHRoZSBUcmFja0xpc3QgYnkgYSB0cmFja3MgaWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIHRoZSBpZCBvZiB0aGUgdHJhY2sgdG8gZ2V0XG4gICAgICogQG1ldGhvZCBnZXRUcmFja0J5SWRcbiAgICAgKiBAcmV0dXJuIHtUcmFja31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5nZXRUcmFja0J5SWQgPSBmdW5jdGlvbiBnZXRUcmFja0J5SWQoaWQpIHtcbiAgICAgIHZhciByZXN1bHQgPSBudWxsO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciB0cmFjayA9IHRoaXNbaV07XG5cbiAgICAgICAgaWYgKHRyYWNrLmlkID09PSBpZCkge1xuICAgICAgICAgIHJlc3VsdCA9IHRyYWNrO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIHJldHVybiBUcmFja0xpc3Q7XG4gIH0oRXZlbnRUYXJnZXQpO1xuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gYSBkaWZmZXJlbnQgdHJhY2sgaXMgc2VsZWN0ZWQvZW5hYmxlZC5cbiAgICpcbiAgICogQGV2ZW50IFRyYWNrTGlzdCNjaGFuZ2VcbiAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgKi9cblxuICAvKipcbiAgICogRXZlbnRzIHRoYXQgY2FuIGJlIGNhbGxlZCB3aXRoIG9uICsgZXZlbnROYW1lLiBTZWUge0BsaW5rIEV2ZW50SGFuZGxlcn0uXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBUcmFja0xpc3QjYWxsb3dlZEV2ZW50c19cbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICBUcmFja0xpc3QucHJvdG90eXBlLmFsbG93ZWRFdmVudHNfID0ge1xuICAgIGNoYW5nZTogJ2NoYW5nZScsXG4gICAgYWRkdHJhY2s6ICdhZGR0cmFjaycsXG4gICAgcmVtb3ZldHJhY2s6ICdyZW1vdmV0cmFjaydcbiAgfTsgLy8gZW11bGF0ZSBhdHRyaWJ1dGUgRXZlbnRIYW5kbGVyIHN1cHBvcnQgdG8gYWxsb3cgZm9yIGZlYXR1cmUgZGV0ZWN0aW9uXG5cbiAgZm9yICh2YXIgZXZlbnQgaW4gVHJhY2tMaXN0LnByb3RvdHlwZS5hbGxvd2VkRXZlbnRzXykge1xuICAgIFRyYWNrTGlzdC5wcm90b3R5cGVbJ29uJyArIGV2ZW50XSA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQW55d2hlcmUgd2UgY2FsbCB0aGlzIGZ1bmN0aW9uIHdlIGRpdmVyZ2UgZnJvbSB0aGUgc3BlY1xuICAgKiBhcyB3ZSBvbmx5IHN1cHBvcnQgb25lIGVuYWJsZWQgYXVkaW90cmFjayBhdCBhIHRpbWVcbiAgICpcbiAgICogQHBhcmFtIHtBdWRpb1RyYWNrTGlzdH0gbGlzdFxuICAgKiAgICAgICAgbGlzdCB0byB3b3JrIG9uXG4gICAqXG4gICAqIEBwYXJhbSB7QXVkaW9UcmFja30gdHJhY2tcbiAgICogICAgICAgIFRoZSB0cmFjayB0byBza2lwXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIHZhciBkaXNhYmxlT3RoZXJzID0gZnVuY3Rpb24gZGlzYWJsZU90aGVycyhsaXN0LCB0cmFjaykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCFPYmplY3Qua2V5cyhsaXN0W2ldKS5sZW5ndGggfHwgdHJhY2suaWQgPT09IGxpc3RbaV0uaWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IC8vIGFub3RoZXIgYXVkaW8gdHJhY2sgaXMgZW5hYmxlZCwgZGlzYWJsZSBpdFxuXG5cbiAgICAgIGxpc3RbaV0uZW5hYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IGxpc3Qgb2Yge0BsaW5rIEF1ZGlvVHJhY2t9IGZvciBhIG1lZGlhIGZpbGUuXG4gICAqXG4gICAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCNhdWRpb3RyYWNrbGlzdH1cbiAgICogQGV4dGVuZHMgVHJhY2tMaXN0XG4gICAqL1xuXG5cbiAgdmFyIEF1ZGlvVHJhY2tMaXN0ID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX1RyYWNrTGlzdCkge1xuICAgIF9pbmhlcml0c0xvb3NlKEF1ZGlvVHJhY2tMaXN0LCBfVHJhY2tMaXN0KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBdWRpb1RyYWNrW119IFt0cmFja3M9W11dXG4gICAgICogICAgICAgIEEgbGlzdCBvZiBgQXVkaW9UcmFja2AgdG8gaW5zdGFudGlhdGUgdGhlIGxpc3Qgd2l0aC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBdWRpb1RyYWNrTGlzdCh0cmFja3MpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgaWYgKHRyYWNrcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHRyYWNrcyA9IFtdO1xuICAgICAgfVxuXG4gICAgICAvLyBtYWtlIHN1cmUgb25seSAxIHRyYWNrIGlzIGVuYWJsZWRcbiAgICAgIC8vIHNvcnRlZCBmcm9tIGxhc3QgaW5kZXggdG8gZmlyc3QgaW5kZXhcbiAgICAgIGZvciAodmFyIGkgPSB0cmFja3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKHRyYWNrc1tpXS5lbmFibGVkKSB7XG4gICAgICAgICAgZGlzYWJsZU90aGVycyh0cmFja3MsIHRyYWNrc1tpXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgX3RoaXMgPSBfVHJhY2tMaXN0LmNhbGwodGhpcywgdHJhY2tzKSB8fCB0aGlzO1xuICAgICAgX3RoaXMuY2hhbmdpbmdfID0gZmFsc2U7XG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhbiB7QGxpbmsgQXVkaW9UcmFja30gdG8gdGhlIGBBdWRpb1RyYWNrTGlzdGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0F1ZGlvVHJhY2t9IHRyYWNrXG4gICAgICogICAgICAgIFRoZSBBdWRpb1RyYWNrIHRvIGFkZCB0byB0aGUgbGlzdFxuICAgICAqXG4gICAgICogQGZpcmVzIFRyYWNrTGlzdCNhZGR0cmFja1xuICAgICAqL1xuXG5cbiAgICB2YXIgX3Byb3RvID0gQXVkaW9UcmFja0xpc3QucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLmFkZFRyYWNrID0gZnVuY3Rpb24gYWRkVHJhY2sodHJhY2spIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAodHJhY2suZW5hYmxlZCkge1xuICAgICAgICBkaXNhYmxlT3RoZXJzKHRoaXMsIHRyYWNrKTtcbiAgICAgIH1cblxuICAgICAgX1RyYWNrTGlzdC5wcm90b3R5cGUuYWRkVHJhY2suY2FsbCh0aGlzLCB0cmFjayk7IC8vIG5hdGl2ZSB0cmFja3MgZG9uJ3QgaGF2ZSB0aGlzXG5cblxuICAgICAgaWYgKCF0cmFjay5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdHJhY2suZW5hYmxlZENoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHdoZW4gd2UgYXJlIGRpc2FibGluZyBvdGhlciB0cmFja3MgKHNpbmNlIHdlIGRvbid0IHN1cHBvcnRcbiAgICAgICAgLy8gbW9yZSB0aGFuIG9uZSB0cmFjayBhdCBhIHRpbWUpIHdlIHdpbGwgc2V0IGNoYW5naW5nX1xuICAgICAgICAvLyB0byB0cnVlIHNvIHRoYXQgd2UgZG9uJ3QgdHJpZ2dlciBhZGRpdGlvbmFsIGNoYW5nZSBldmVudHNcbiAgICAgICAgaWYgKF90aGlzMi5jaGFuZ2luZ18pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIuY2hhbmdpbmdfID0gdHJ1ZTtcbiAgICAgICAgZGlzYWJsZU90aGVycyhfdGhpczIsIHRyYWNrKTtcbiAgICAgICAgX3RoaXMyLmNoYW5naW5nXyA9IGZhbHNlO1xuXG4gICAgICAgIF90aGlzMi50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAqIEBsaXN0ZW5zIEF1ZGlvVHJhY2sjZW5hYmxlZGNoYW5nZVxuICAgICAgICogQGZpcmVzIFRyYWNrTGlzdCNjaGFuZ2VcbiAgICAgICAqL1xuXG5cbiAgICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2VuYWJsZWRjaGFuZ2UnLCB0cmFjay5lbmFibGVkQ2hhbmdlXyk7XG4gICAgfTtcblxuICAgIF9wcm90by5yZW1vdmVUcmFjayA9IGZ1bmN0aW9uIHJlbW92ZVRyYWNrKHJ0cmFjaykge1xuICAgICAgX1RyYWNrTGlzdC5wcm90b3R5cGUucmVtb3ZlVHJhY2suY2FsbCh0aGlzLCBydHJhY2spO1xuXG4gICAgICBpZiAocnRyYWNrLnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgcnRyYWNrLmVuYWJsZWRDaGFuZ2VfKSB7XG4gICAgICAgIHJ0cmFjay5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmFibGVkY2hhbmdlJywgcnRyYWNrLmVuYWJsZWRDaGFuZ2VfKTtcbiAgICAgICAgcnRyYWNrLmVuYWJsZWRDaGFuZ2VfID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIEF1ZGlvVHJhY2tMaXN0O1xuICB9KFRyYWNrTGlzdCk7XG5cbiAgLyoqXG4gICAqIFVuLXNlbGVjdCBhbGwgb3RoZXIge0BsaW5rIFZpZGVvVHJhY2t9cyB0aGF0IGFyZSBzZWxlY3RlZC5cbiAgICpcbiAgICogQHBhcmFtIHtWaWRlb1RyYWNrTGlzdH0gbGlzdFxuICAgKiAgICAgICAgbGlzdCB0byB3b3JrIG9uXG4gICAqXG4gICAqIEBwYXJhbSB7VmlkZW9UcmFja30gdHJhY2tcbiAgICogICAgICAgIFRoZSB0cmFjayB0byBza2lwXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIHZhciBkaXNhYmxlT3RoZXJzJDEgPSBmdW5jdGlvbiBkaXNhYmxlT3RoZXJzKGxpc3QsIHRyYWNrKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIU9iamVjdC5rZXlzKGxpc3RbaV0pLmxlbmd0aCB8fCB0cmFjay5pZCA9PT0gbGlzdFtpXS5pZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gLy8gYW5vdGhlciB2aWRlbyB0cmFjayBpcyBlbmFibGVkLCBkaXNhYmxlIGl0XG5cblxuICAgICAgbGlzdFtpXS5zZWxlY3RlZCA9IGZhbHNlO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IGxpc3Qgb2Yge0BsaW5rIFZpZGVvVHJhY2t9IGZvciBhIHZpZGVvLlxuICAgKlxuICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9lbWJlZGRlZC1jb250ZW50Lmh0bWwjdmlkZW90cmFja2xpc3R9XG4gICAqIEBleHRlbmRzIFRyYWNrTGlzdFxuICAgKi9cblxuXG4gIHZhciBWaWRlb1RyYWNrTGlzdCA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9UcmFja0xpc3QpIHtcbiAgICBfaW5oZXJpdHNMb29zZShWaWRlb1RyYWNrTGlzdCwgX1RyYWNrTGlzdCk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VmlkZW9UcmFja1tdfSBbdHJhY2tzPVtdXVxuICAgICAqICAgICAgICBBIGxpc3Qgb2YgYFZpZGVvVHJhY2tgIHRvIGluc3RhbnRpYXRlIHRoZSBsaXN0IHdpdGguXG4gICAgICovXG4gICAgZnVuY3Rpb24gVmlkZW9UcmFja0xpc3QodHJhY2tzKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIGlmICh0cmFja3MgPT09IHZvaWQgMCkge1xuICAgICAgICB0cmFja3MgPSBbXTtcbiAgICAgIH1cblxuICAgICAgLy8gbWFrZSBzdXJlIG9ubHkgMSB0cmFjayBpcyBlbmFibGVkXG4gICAgICAvLyBzb3J0ZWQgZnJvbSBsYXN0IGluZGV4IHRvIGZpcnN0IGluZGV4XG4gICAgICBmb3IgKHZhciBpID0gdHJhY2tzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGlmICh0cmFja3NbaV0uc2VsZWN0ZWQpIHtcbiAgICAgICAgICBkaXNhYmxlT3RoZXJzJDEodHJhY2tzLCB0cmFja3NbaV0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIF90aGlzID0gX1RyYWNrTGlzdC5jYWxsKHRoaXMsIHRyYWNrcykgfHwgdGhpcztcbiAgICAgIF90aGlzLmNoYW5naW5nXyA9IGZhbHNlO1xuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IFZpZGVvVHJhY2tMaXN0I3NlbGVjdGVkSW5kZXhcbiAgICAgICAqICAgICAgICAgVGhlIGN1cnJlbnQgaW5kZXggb2YgdGhlIHNlbGVjdGVkIHtAbGluayBWaWRlb1RyYWNrYH0uXG4gICAgICAgKi9cblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCAnc2VsZWN0ZWRJbmRleCcsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHRoaXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpc1tfaV0uc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIF9pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoKSB7fVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIHtAbGluayBWaWRlb1RyYWNrfSB0byB0aGUgYFZpZGVvVHJhY2tMaXN0YC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VmlkZW9UcmFja30gdHJhY2tcbiAgICAgKiAgICAgICAgVGhlIFZpZGVvVHJhY2sgdG8gYWRkIHRvIHRoZSBsaXN0XG4gICAgICpcbiAgICAgKiBAZmlyZXMgVHJhY2tMaXN0I2FkZHRyYWNrXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBWaWRlb1RyYWNrTGlzdC5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uYWRkVHJhY2sgPSBmdW5jdGlvbiBhZGRUcmFjayh0cmFjaykge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGlmICh0cmFjay5zZWxlY3RlZCkge1xuICAgICAgICBkaXNhYmxlT3RoZXJzJDEodGhpcywgdHJhY2spO1xuICAgICAgfVxuXG4gICAgICBfVHJhY2tMaXN0LnByb3RvdHlwZS5hZGRUcmFjay5jYWxsKHRoaXMsIHRyYWNrKTsgLy8gbmF0aXZlIHRyYWNrcyBkb24ndCBoYXZlIHRoaXNcblxuXG4gICAgICBpZiAoIXRyYWNrLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0cmFjay5zZWxlY3RlZENoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChfdGhpczIuY2hhbmdpbmdfKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLmNoYW5naW5nXyA9IHRydWU7XG4gICAgICAgIGRpc2FibGVPdGhlcnMkMShfdGhpczIsIHRyYWNrKTtcbiAgICAgICAgX3RoaXMyLmNoYW5naW5nXyA9IGZhbHNlO1xuXG4gICAgICAgIF90aGlzMi50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAqIEBsaXN0ZW5zIFZpZGVvVHJhY2sjc2VsZWN0ZWRjaGFuZ2VcbiAgICAgICAqIEBmaXJlcyBUcmFja0xpc3QjY2hhbmdlXG4gICAgICAgKi9cblxuXG4gICAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3RlZGNoYW5nZScsIHRyYWNrLnNlbGVjdGVkQ2hhbmdlXyk7XG4gICAgfTtcblxuICAgIF9wcm90by5yZW1vdmVUcmFjayA9IGZ1bmN0aW9uIHJlbW92ZVRyYWNrKHJ0cmFjaykge1xuICAgICAgX1RyYWNrTGlzdC5wcm90b3R5cGUucmVtb3ZlVHJhY2suY2FsbCh0aGlzLCBydHJhY2spO1xuXG4gICAgICBpZiAocnRyYWNrLnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgcnRyYWNrLnNlbGVjdGVkQ2hhbmdlXykge1xuICAgICAgICBydHJhY2sucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2VsZWN0ZWRjaGFuZ2UnLCBydHJhY2suc2VsZWN0ZWRDaGFuZ2VfKTtcbiAgICAgICAgcnRyYWNrLnNlbGVjdGVkQ2hhbmdlXyA9IG51bGw7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBWaWRlb1RyYWNrTGlzdDtcbiAgfShUcmFja0xpc3QpO1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBsaXN0IG9mIHtAbGluayBUZXh0VHJhY2t9IGZvciBhIG1lZGlhIGZpbGUuXG4gICAqXG4gICAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCN0ZXh0dHJhY2tsaXN0fVxuICAgKiBAZXh0ZW5kcyBUcmFja0xpc3RcbiAgICovXG5cbiAgdmFyIFRleHRUcmFja0xpc3QgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfVHJhY2tMaXN0KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoVGV4dFRyYWNrTGlzdCwgX1RyYWNrTGlzdCk7XG5cbiAgICBmdW5jdGlvbiBUZXh0VHJhY2tMaXN0KCkge1xuICAgICAgcmV0dXJuIF9UcmFja0xpc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBUZXh0VHJhY2tMaXN0LnByb3RvdHlwZTtcblxuICAgIC8qKlxuICAgICAqIEFkZCBhIHtAbGluayBUZXh0VHJhY2t9IHRvIHRoZSBgVGV4dFRyYWNrTGlzdGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGV4dFRyYWNrfSB0cmFja1xuICAgICAqICAgICAgICBUaGUgdGV4dCB0cmFjayB0byBhZGQgdG8gdGhlIGxpc3QuXG4gICAgICpcbiAgICAgKiBAZmlyZXMgVHJhY2tMaXN0I2FkZHRyYWNrXG4gICAgICovXG4gICAgX3Byb3RvLmFkZFRyYWNrID0gZnVuY3Rpb24gYWRkVHJhY2sodHJhY2spIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIF9UcmFja0xpc3QucHJvdG90eXBlLmFkZFRyYWNrLmNhbGwodGhpcywgdHJhY2spO1xuXG4gICAgICBpZiAoIXRoaXMucXVldWVDaGFuZ2VfKSB7XG4gICAgICAgIHRoaXMucXVldWVDaGFuZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5xdWV1ZVRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMudHJpZ2dlclNlbGVjdGVkbGFuZ3VhZ2VjaGFuZ2UpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyU2VsZWN0ZWRsYW5ndWFnZWNoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnRyaWdnZXIoJ3NlbGVjdGVkbGFuZ3VhZ2VjaGFuZ2UnKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQGxpc3RlbnMgVGV4dFRyYWNrI21vZGVjaGFuZ2VcbiAgICAgICAqIEBmaXJlcyBUcmFja0xpc3QjY2hhbmdlXG4gICAgICAgKi9cblxuXG4gICAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKCdtb2RlY2hhbmdlJywgdGhpcy5xdWV1ZUNoYW5nZV8pO1xuICAgICAgdmFyIG5vbkxhbmd1YWdlVGV4dFRyYWNrS2luZCA9IFsnbWV0YWRhdGEnLCAnY2hhcHRlcnMnXTtcblxuICAgICAgaWYgKG5vbkxhbmd1YWdlVGV4dFRyYWNrS2luZC5pbmRleE9mKHRyYWNrLmtpbmQpID09PSAtMSkge1xuICAgICAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKCdtb2RlY2hhbmdlJywgdGhpcy50cmlnZ2VyU2VsZWN0ZWRsYW5ndWFnZWNoYW5nZV8pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8ucmVtb3ZlVHJhY2sgPSBmdW5jdGlvbiByZW1vdmVUcmFjayhydHJhY2spIHtcbiAgICAgIF9UcmFja0xpc3QucHJvdG90eXBlLnJlbW92ZVRyYWNrLmNhbGwodGhpcywgcnRyYWNrKTsgLy8gbWFudWFsbHkgcmVtb3ZlIHRoZSBldmVudCBoYW5kbGVycyB3ZSBhZGRlZFxuXG5cbiAgICAgIGlmIChydHJhY2sucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBpZiAodGhpcy5xdWV1ZUNoYW5nZV8pIHtcbiAgICAgICAgICBydHJhY2sucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW9kZWNoYW5nZScsIHRoaXMucXVldWVDaGFuZ2VfKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkbGFuZ3VhZ2VjaGFuZ2VfKSB7XG4gICAgICAgICAgcnRyYWNrLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vZGVjaGFuZ2UnLCB0aGlzLnRyaWdnZXJTZWxlY3RlZGxhbmd1YWdlY2hhbmdlXyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFRleHRUcmFja0xpc3Q7XG4gIH0oVHJhY2tMaXN0KTtcblxuICAvKipcbiAgICogQGZpbGUgaHRtbC10cmFjay1lbGVtZW50LWxpc3QuanNcbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IGxpc3Qgb2Yge0BsaW5rIEh0bWxUcmFja0VsZW1lbnR9cy5cbiAgICovXG4gIHZhciBIdG1sVHJhY2tFbGVtZW50TGlzdCA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtIdG1sVHJhY2tFbGVtZW50W119IFt0cmFja3M9W11dXG4gICAgICogICAgICAgIEEgbGlzdCBvZiBgSHRtbFRyYWNrRWxlbWVudGAgdG8gaW5zdGFudGlhdGUgdGhlIGxpc3Qgd2l0aC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBIdG1sVHJhY2tFbGVtZW50TGlzdCh0cmFja0VsZW1lbnRzKSB7XG4gICAgICBpZiAodHJhY2tFbGVtZW50cyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHRyYWNrRWxlbWVudHMgPSBbXTtcbiAgICAgIH1cblxuICAgICAgdGhpcy50cmFja0VsZW1lbnRzXyA9IFtdO1xuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgSHRtbFRyYWNrRWxlbWVudExpc3RcbiAgICAgICAqIEBtZW1iZXIge251bWJlcn0gbGVuZ3RoXG4gICAgICAgKiAgICAgICAgIFRoZSBjdXJyZW50IG51bWJlciBvZiBgVHJhY2tgcyBpbiB0aGUgdGhpcyBUcmFja2lzdC5cbiAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICovXG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbGVuZ3RoJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy50cmFja0VsZW1lbnRzXy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gdHJhY2tFbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmFkZFRyYWNrRWxlbWVudF8odHJhY2tFbGVtZW50c1tpXSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhbiB7QGxpbmsgSHRtbFRyYWNrRWxlbWVudH0gdG8gdGhlIGBIdG1sVHJhY2tFbGVtZW50TGlzdGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SHRtbFRyYWNrRWxlbWVudH0gdHJhY2tFbGVtZW50XG4gICAgICogICAgICAgIFRoZSB0cmFjayBlbGVtZW50IHRvIGFkZCB0byB0aGUgbGlzdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBIdG1sVHJhY2tFbGVtZW50TGlzdC5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uYWRkVHJhY2tFbGVtZW50XyA9IGZ1bmN0aW9uIGFkZFRyYWNrRWxlbWVudF8odHJhY2tFbGVtZW50KSB7XG4gICAgICB2YXIgaW5kZXggPSB0aGlzLnRyYWNrRWxlbWVudHNfLmxlbmd0aDtcblxuICAgICAgaWYgKCEoJycgKyBpbmRleCBpbiB0aGlzKSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgaW5kZXgsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYWNrRWxlbWVudHNfW2luZGV4XTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSAvLyBEbyBub3QgYWRkIGR1cGxpY2F0ZSBlbGVtZW50c1xuXG5cbiAgICAgIGlmICh0aGlzLnRyYWNrRWxlbWVudHNfLmluZGV4T2YodHJhY2tFbGVtZW50KSA9PT0gLTEpIHtcbiAgICAgICAgdGhpcy50cmFja0VsZW1lbnRzXy5wdXNoKHRyYWNrRWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhbiB7QGxpbmsgSHRtbFRyYWNrRWxlbWVudH0gZnJvbSB0aGUgYEh0bWxUcmFja0VsZW1lbnRMaXN0YCBnaXZlbiBhblxuICAgICAqIHtAbGluayBUZXh0VHJhY2t9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtUZXh0VHJhY2t9IHRyYWNrXG4gICAgICogICAgICAgIFRoZSB0cmFjayBhc3NvY2lhdGVkIHdpdGggYSB0cmFjayBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHJldHVybiB7SHRtbFRyYWNrRWxlbWVudHx1bmRlZmluZWR9XG4gICAgICogICAgICAgICBUaGUgdHJhY2sgZWxlbWVudCB0aGF0IHdhcyBmb3VuZCBvciB1bmRlZmluZWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5nZXRUcmFja0VsZW1lbnRCeVRyYWNrXyA9IGZ1bmN0aW9uIGdldFRyYWNrRWxlbWVudEJ5VHJhY2tfKHRyYWNrKSB7XG4gICAgICB2YXIgdHJhY2tFbGVtZW50XztcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHRoaXMudHJhY2tFbGVtZW50c18ubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHRyYWNrID09PSB0aGlzLnRyYWNrRWxlbWVudHNfW2ldLnRyYWNrKSB7XG4gICAgICAgICAgdHJhY2tFbGVtZW50XyA9IHRoaXMudHJhY2tFbGVtZW50c19baV07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRyYWNrRWxlbWVudF87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIHtAbGluayBIdG1sVHJhY2tFbGVtZW50fSBmcm9tIHRoZSBgSHRtbFRyYWNrRWxlbWVudExpc3RgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0h0bWxUcmFja0VsZW1lbnR9IHRyYWNrRWxlbWVudFxuICAgICAqICAgICAgICBUaGUgdHJhY2sgZWxlbWVudCB0byByZW1vdmUgZnJvbSB0aGUgbGlzdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnJlbW92ZVRyYWNrRWxlbWVudF8gPSBmdW5jdGlvbiByZW1vdmVUcmFja0VsZW1lbnRfKHRyYWNrRWxlbWVudCkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHRoaXMudHJhY2tFbGVtZW50c18ubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHRyYWNrRWxlbWVudCA9PT0gdGhpcy50cmFja0VsZW1lbnRzX1tpXSkge1xuICAgICAgICAgIGlmICh0aGlzLnRyYWNrRWxlbWVudHNfW2ldLnRyYWNrICYmIHR5cGVvZiB0aGlzLnRyYWNrRWxlbWVudHNfW2ldLnRyYWNrLm9mZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy50cmFja0VsZW1lbnRzX1tpXS50cmFjay5vZmYoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMudHJhY2tFbGVtZW50c19baV0ub2ZmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnRyYWNrRWxlbWVudHNfW2ldLm9mZigpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMudHJhY2tFbGVtZW50c18uc3BsaWNlKGksIDEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBIdG1sVHJhY2tFbGVtZW50TGlzdDtcbiAgfSgpO1xuXG4gIC8qKlxuICAgKiBAZmlsZSB0ZXh0LXRyYWNrLWN1ZS1saXN0LmpzXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBUZXh0VHJhY2tDdWVMaXN0flRleHRUcmFja0N1ZVxuICAgKlxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gaWRcbiAgICogICAgICAgICAgIFRoZSB1bmlxdWUgaWQgZm9yIHRoaXMgdGV4dCB0cmFjayBjdWVcbiAgICpcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHN0YXJ0VGltZVxuICAgKiAgICAgICAgICAgVGhlIHN0YXJ0IHRpbWUgZm9yIHRoaXMgdGV4dCB0cmFjayBjdWVcbiAgICpcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IGVuZFRpbWVcbiAgICogICAgICAgICAgIFRoZSBlbmQgdGltZSBmb3IgdGhpcyB0ZXh0IHRyYWNrIGN1ZVxuICAgKlxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IHBhdXNlT25FeGl0XG4gICAqICAgICAgICAgICBQYXVzZSB3aGVuIHRoZSBlbmQgdGltZSBpcyByZWFjaGVkIGlmIHRydWUuXG4gICAqXG4gICAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCN0ZXh0dHJhY2tjdWV9XG4gICAqL1xuXG4gIC8qKlxuICAgKiBBIExpc3Qgb2YgVGV4dFRyYWNrQ3Vlcy5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZW1iZWRkZWQtY29udGVudC5odG1sI3RleHR0cmFja2N1ZWxpc3R9XG4gICAqL1xuICB2YXIgVGV4dFRyYWNrQ3VlTGlzdCA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGN1ZXNcbiAgICAgKiAgICAgICAgQSBsaXN0IG9mIGN1ZXMgdG8gYmUgaW5pdGlhbGl6ZWQgd2l0aFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRleHRUcmFja0N1ZUxpc3QoY3Vlcykge1xuICAgICAgVGV4dFRyYWNrQ3VlTGlzdC5wcm90b3R5cGUuc2V0Q3Vlc18uY2FsbCh0aGlzLCBjdWVzKTtcbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIFRleHRUcmFja0N1ZUxpc3RcbiAgICAgICAqIEBtZW1iZXIge251bWJlcn0gbGVuZ3RoXG4gICAgICAgKiAgICAgICAgIFRoZSBjdXJyZW50IG51bWJlciBvZiBgVGV4dFRyYWNrQ3VlYHMgaW4gdGhlIFRleHRUcmFja0N1ZUxpc3QuXG4gICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAqL1xuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2xlbmd0aCcsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoXztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc2V0dGVyIGZvciBjdWVzIGluIHRoaXMgbGlzdC4gQ3JlYXRlcyBnZXR0ZXJzXG4gICAgICogYW4gYW4gaW5kZXggZm9yIHRoZSBjdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gY3Vlc1xuICAgICAqICAgICAgICBBbiBhcnJheSBvZiBjdWVzIHRvIHNldFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90byA9IFRleHRUcmFja0N1ZUxpc3QucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLnNldEN1ZXNfID0gZnVuY3Rpb24gc2V0Q3Vlc18oY3Vlcykge1xuICAgICAgdmFyIG9sZExlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDA7XG4gICAgICB2YXIgaSA9IDA7XG4gICAgICB2YXIgbCA9IGN1ZXMubGVuZ3RoO1xuICAgICAgdGhpcy5jdWVzXyA9IGN1ZXM7XG4gICAgICB0aGlzLmxlbmd0aF8gPSBjdWVzLmxlbmd0aDtcblxuICAgICAgdmFyIGRlZmluZVByb3AgPSBmdW5jdGlvbiBkZWZpbmVQcm9wKGluZGV4KSB7XG4gICAgICAgIGlmICghKCcnICsgaW5kZXggaW4gdGhpcykpIHtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJycgKyBpbmRleCwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1ZXNfW2luZGV4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgaWYgKG9sZExlbmd0aCA8IGwpIHtcbiAgICAgICAgaSA9IG9sZExlbmd0aDtcblxuICAgICAgICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIGRlZmluZVByb3AuY2FsbCh0aGlzLCBpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYSBgVGV4dFRyYWNrQ3VlYCB0aGF0IGlzIGN1cnJlbnRseSBpbiB0aGUgYFRleHRUcmFja0N1ZUxpc3RgIGJ5IGlkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gICAgICogICAgICAgIFRoZSBpZCBvZiB0aGUgY3VlIHRoYXQgc2hvdWxkIGJlIHNlYXJjaGVkIGZvci5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1RleHRUcmFja0N1ZUxpc3R+VGV4dFRyYWNrQ3VlfG51bGx9XG4gICAgICogICAgICAgICBBIHNpbmdsZSBjdWUgb3IgbnVsbCBpZiBub25lIHdhcyBmb3VuZC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZ2V0Q3VlQnlJZCA9IGZ1bmN0aW9uIGdldEN1ZUJ5SWQoaWQpIHtcbiAgICAgIHZhciByZXN1bHQgPSBudWxsO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBjdWUgPSB0aGlzW2ldO1xuXG4gICAgICAgIGlmIChjdWUuaWQgPT09IGlkKSB7XG4gICAgICAgICAgcmVzdWx0ID0gY3VlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIHJldHVybiBUZXh0VHJhY2tDdWVMaXN0O1xuICB9KCk7XG5cbiAgLyoqXG4gICAqIEBmaWxlIHRyYWNrLWtpbmRzLmpzXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbGwgcG9zc2libGUgYFZpZGVvVHJhY2tLaW5kYHNcbiAgICpcbiAgICogQHNlZSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9lbWJlZGRlZC1jb250ZW50Lmh0bWwjZG9tLXZpZGVvdHJhY2sta2luZFxuICAgKiBAdHlwZWRlZiBWaWRlb1RyYWNrfktpbmRcbiAgICogQGVudW1cbiAgICovXG4gIHZhciBWaWRlb1RyYWNrS2luZCA9IHtcbiAgICBhbHRlcm5hdGl2ZTogJ2FsdGVybmF0aXZlJyxcbiAgICBjYXB0aW9uczogJ2NhcHRpb25zJyxcbiAgICBtYWluOiAnbWFpbicsXG4gICAgc2lnbjogJ3NpZ24nLFxuICAgIHN1YnRpdGxlczogJ3N1YnRpdGxlcycsXG4gICAgY29tbWVudGFyeTogJ2NvbW1lbnRhcnknXG4gIH07XG4gIC8qKlxuICAgKiBBbGwgcG9zc2libGUgYEF1ZGlvVHJhY2tLaW5kYHNcbiAgICpcbiAgICogQHNlZSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9lbWJlZGRlZC1jb250ZW50Lmh0bWwjZG9tLWF1ZGlvdHJhY2sta2luZFxuICAgKiBAdHlwZWRlZiBBdWRpb1RyYWNrfktpbmRcbiAgICogQGVudW1cbiAgICovXG5cbiAgdmFyIEF1ZGlvVHJhY2tLaW5kID0ge1xuICAgICdhbHRlcm5hdGl2ZSc6ICdhbHRlcm5hdGl2ZScsXG4gICAgJ2Rlc2NyaXB0aW9ucyc6ICdkZXNjcmlwdGlvbnMnLFxuICAgICdtYWluJzogJ21haW4nLFxuICAgICdtYWluLWRlc2MnOiAnbWFpbi1kZXNjJyxcbiAgICAndHJhbnNsYXRpb24nOiAndHJhbnNsYXRpb24nLFxuICAgICdjb21tZW50YXJ5JzogJ2NvbW1lbnRhcnknXG4gIH07XG4gIC8qKlxuICAgKiBBbGwgcG9zc2libGUgYFRleHRUcmFja0tpbmRgc1xuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCNkb20tdGV4dHRyYWNrLWtpbmRcbiAgICogQHR5cGVkZWYgVGV4dFRyYWNrfktpbmRcbiAgICogQGVudW1cbiAgICovXG5cbiAgdmFyIFRleHRUcmFja0tpbmQgPSB7XG4gICAgc3VidGl0bGVzOiAnc3VidGl0bGVzJyxcbiAgICBjYXB0aW9uczogJ2NhcHRpb25zJyxcbiAgICBkZXNjcmlwdGlvbnM6ICdkZXNjcmlwdGlvbnMnLFxuICAgIGNoYXB0ZXJzOiAnY2hhcHRlcnMnLFxuICAgIG1ldGFkYXRhOiAnbWV0YWRhdGEnXG4gIH07XG4gIC8qKlxuICAgKiBBbGwgcG9zc2libGUgYFRleHRUcmFja01vZGVgc1xuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCN0ZXh0dHJhY2ttb2RlXG4gICAqIEB0eXBlZGVmIFRleHRUcmFja35Nb2RlXG4gICAqIEBlbnVtXG4gICAqL1xuXG4gIHZhciBUZXh0VHJhY2tNb2RlID0ge1xuICAgIGRpc2FibGVkOiAnZGlzYWJsZWQnLFxuICAgIGhpZGRlbjogJ2hpZGRlbicsXG4gICAgc2hvd2luZzogJ3Nob3dpbmcnXG4gIH07XG5cbiAgLyoqXG4gICAqIEEgVHJhY2sgY2xhc3MgdGhhdCBjb250YWlucyBhbGwgb2YgdGhlIGNvbW1vbiBmdW5jdGlvbmFsaXR5IGZvciB7QGxpbmsgQXVkaW9UcmFja30sXG4gICAqIHtAbGluayBWaWRlb1RyYWNrfSwgYW5kIHtAbGluayBUZXh0VHJhY2t9LlxuICAgKlxuICAgKiA+IE5vdGU6IFRoaXMgY2xhc3Mgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5XG4gICAqXG4gICAqIEBzZWUge0BsaW5rIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbH1cbiAgICogQGV4dGVuZHMgRXZlbnRUYXJnZXRcbiAgICogQGFic3RyYWN0XG4gICAqL1xuXG4gIHZhciBUcmFjayA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9FdmVudFRhcmdldCkge1xuICAgIF9pbmhlcml0c0xvb3NlKFRyYWNrLCBfRXZlbnRUYXJnZXQpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dXG4gICAgICogICAgICAgIE9iamVjdCBvZiBvcHRpb24gbmFtZXMgYW5kIHZhbHVlc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmtpbmQ9JyddXG4gICAgICogICAgICAgIEEgdmFsaWQga2luZCBmb3IgdGhlIHRyYWNrIHR5cGUgeW91IGFyZSBjcmVhdGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5pZD0ndmpzX3RyYWNrXycgKyBHdWlkLm5ld0dVSUQoKV1cbiAgICAgKiAgICAgICAgQSB1bmlxdWUgaWQgZm9yIHRoaXMgQXVkaW9UcmFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYWJlbD0nJ11cbiAgICAgKiAgICAgICAgVGhlIG1lbnUgbGFiZWwgZm9yIHRoaXMgdHJhY2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubGFuZ3VhZ2U9JyddXG4gICAgICogICAgICAgIEEgdmFsaWQgdHdvIGNoYXJhY3RlciBsYW5ndWFnZSBjb2RlLlxuICAgICAqXG4gICAgICogQGFic3RyYWN0XG4gICAgICovXG4gICAgZnVuY3Rpb24gVHJhY2sob3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMgPSBfRXZlbnRUYXJnZXQuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgdmFyIHRyYWNrUHJvcHMgPSB7XG4gICAgICAgIGlkOiBvcHRpb25zLmlkIHx8ICd2anNfdHJhY2tfJyArIG5ld0dVSUQoKSxcbiAgICAgICAga2luZDogb3B0aW9ucy5raW5kIHx8ICcnLFxuICAgICAgICBsYWJlbDogb3B0aW9ucy5sYWJlbCB8fCAnJyxcbiAgICAgICAgbGFuZ3VhZ2U6IG9wdGlvbnMubGFuZ3VhZ2UgfHwgJydcbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBUcmFja1xuICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBpZFxuICAgICAgICogICAgICAgICBUaGUgaWQgb2YgdGhpcyB0cmFjay4gQ2Fubm90IGJlIGNoYW5nZWQgYWZ0ZXIgY3JlYXRpb24uXG4gICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAqXG4gICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAqL1xuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBUcmFja1xuICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBraW5kXG4gICAgICAgKiAgICAgICAgIFRoZSBraW5kIG9mIHRyYWNrIHRoYXQgdGhpcyBpcy4gQ2Fubm90IGJlIGNoYW5nZWQgYWZ0ZXIgY3JlYXRpb24uXG4gICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAqXG4gICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAqL1xuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBUcmFja1xuICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBsYWJlbFxuICAgICAgICogICAgICAgICBUaGUgbGFiZWwgb2YgdGhpcyB0cmFjay4gQ2Fubm90IGJlIGNoYW5nZWQgYWZ0ZXIgY3JlYXRpb24uXG4gICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAqXG4gICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAqL1xuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBUcmFja1xuICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBsYW5ndWFnZVxuICAgICAgICogICAgICAgICBUaGUgdHdvIGxldHRlciBsYW5ndWFnZSBjb2RlIGZvciB0aGlzIHRyYWNrLiBDYW5ub3QgYmUgY2hhbmdlZCBhZnRlclxuICAgICAgICogICAgICAgICBjcmVhdGlvbi5cbiAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICpcbiAgICAgICAqIEByZWFkb25seVxuICAgICAgICovXG5cbiAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGtleSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIGtleSwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRyYWNrUHJvcHNba2V5XTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KCkge31cbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gdHJhY2tQcm9wcykge1xuICAgICAgICBfbG9vcChrZXkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIFRyYWNrO1xuICB9KEV2ZW50VGFyZ2V0KTtcblxuICAvKipcbiAgICogQGZpbGUgdXJsLmpzXG4gICAqIEBtb2R1bGUgdXJsXG4gICAqL1xuICAvKipcbiAgICogQHR5cGVkZWYge09iamVjdH0gdXJsOlVSTE9iamVjdFxuICAgKlxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gcHJvdG9jb2xcbiAgICogICAgICAgICAgIFRoZSBwcm90b2NvbCBvZiB0aGUgdXJsIHRoYXQgd2FzIHBhcnNlZC5cbiAgICpcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IGhvc3RuYW1lXG4gICAqICAgICAgICAgICBUaGUgaG9zdG5hbWUgb2YgdGhlIHVybCB0aGF0IHdhcyBwYXJzZWQuXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwb3J0XG4gICAqICAgICAgICAgICBUaGUgcG9ydCBvZiB0aGUgdXJsIHRoYXQgd2FzIHBhcnNlZC5cbiAgICpcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IHBhdGhuYW1lXG4gICAqICAgICAgICAgICBUaGUgcGF0aG5hbWUgb2YgdGhlIHVybCB0aGF0IHdhcyBwYXJzZWQuXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBzZWFyY2hcbiAgICogICAgICAgICAgIFRoZSBzZWFyY2ggcXVlcnkgb2YgdGhlIHVybCB0aGF0IHdhcyBwYXJzZWQuXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBoYXNoXG4gICAqICAgICAgICAgICBUaGUgaGFzaCBvZiB0aGUgdXJsIHRoYXQgd2FzIHBhcnNlZC5cbiAgICpcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IGhvc3RcbiAgICogICAgICAgICAgIFRoZSBob3N0IG9mIHRoZSB1cmwgdGhhdCB3YXMgcGFyc2VkLlxuICAgKi9cblxuICAvKipcbiAgICogUmVzb2x2ZSBhbmQgcGFyc2UgdGhlIGVsZW1lbnRzIG9mIGEgVVJMLlxuICAgKlxuICAgKiBAZnVuY3Rpb25cbiAgICogQHBhcmFtICAgIHtTdHJpbmd9IHVybFxuICAgKiAgICAgICAgICAgVGhlIHVybCB0byBwYXJzZVxuICAgKlxuICAgKiBAcmV0dXJuICAge3VybDpVUkxPYmplY3R9XG4gICAqICAgICAgICAgICBBbiBvYmplY3Qgb2YgdXJsIGRldGFpbHNcbiAgICovXG5cbiAgdmFyIHBhcnNlVXJsID0gZnVuY3Rpb24gcGFyc2VVcmwodXJsKSB7XG4gICAgdmFyIHByb3BzID0gWydwcm90b2NvbCcsICdob3N0bmFtZScsICdwb3J0JywgJ3BhdGhuYW1lJywgJ3NlYXJjaCcsICdoYXNoJywgJ2hvc3QnXTsgLy8gYWRkIHRoZSB1cmwgdG8gYW4gYW5jaG9yIGFuZCBsZXQgdGhlIGJyb3dzZXIgcGFyc2UgdGhlIFVSTFxuXG4gICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgYS5ocmVmID0gdXJsOyAvLyBJRTggKGFuZCA5PykgRml4XG4gICAgLy8gaWU4IGRvZXNuJ3QgcGFyc2UgdGhlIFVSTCBjb3JyZWN0bHkgdW50aWwgdGhlIGFuY2hvciBpcyBhY3R1YWxseVxuICAgIC8vIGFkZGVkIHRvIHRoZSBib2R5LCBhbmQgYW4gaW5uZXJIVE1MIGlzIG5lZWRlZCB0byB0cmlnZ2VyIHRoZSBwYXJzaW5nXG5cbiAgICB2YXIgYWRkVG9Cb2R5ID0gYS5ob3N0ID09PSAnJyAmJiBhLnByb3RvY29sICE9PSAnZmlsZTonO1xuICAgIHZhciBkaXY7XG5cbiAgICBpZiAoYWRkVG9Cb2R5KSB7XG4gICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGRpdi5pbm5lckhUTUwgPSBcIjxhIGhyZWY9XFxcIlwiICsgdXJsICsgXCJcXFwiPjwvYT5cIjtcbiAgICAgIGEgPSBkaXYuZmlyc3RDaGlsZDsgLy8gcHJldmVudCB0aGUgZGl2IGZyb20gYWZmZWN0aW5nIGxheW91dFxuXG4gICAgICBkaXYuc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5Om5vbmU7IHBvc2l0aW9uOmFic29sdXRlOycpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuICAgIH0gLy8gQ29weSB0aGUgc3BlY2lmaWMgVVJMIHByb3BlcnRpZXMgdG8gYSBuZXcgb2JqZWN0XG4gICAgLy8gVGhpcyBpcyBhbHNvIG5lZWRlZCBmb3IgSUU4IGJlY2F1c2UgdGhlIGFuY2hvciBsb3NlcyBpdHNcbiAgICAvLyBwcm9wZXJ0aWVzIHdoZW4gaXQncyByZW1vdmVkIGZyb20gdGhlIGRvbVxuXG5cbiAgICB2YXIgZGV0YWlscyA9IHt9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgZGV0YWlsc1twcm9wc1tpXV0gPSBhW3Byb3BzW2ldXTtcbiAgICB9IC8vIElFOSBhZGRzIHRoZSBwb3J0IHRvIHRoZSBob3N0IHByb3BlcnR5IHVubGlrZSBldmVyeW9uZSBlbHNlLiBJZlxuICAgIC8vIGEgcG9ydCBpZGVudGlmaWVyIGlzIGFkZGVkIGZvciBzdGFuZGFyZCBwb3J0cywgc3RyaXAgaXQuXG5cblxuICAgIGlmIChkZXRhaWxzLnByb3RvY29sID09PSAnaHR0cDonKSB7XG4gICAgICBkZXRhaWxzLmhvc3QgPSBkZXRhaWxzLmhvc3QucmVwbGFjZSgvOjgwJC8sICcnKTtcbiAgICB9XG5cbiAgICBpZiAoZGV0YWlscy5wcm90b2NvbCA9PT0gJ2h0dHBzOicpIHtcbiAgICAgIGRldGFpbHMuaG9zdCA9IGRldGFpbHMuaG9zdC5yZXBsYWNlKC86NDQzJC8sICcnKTtcbiAgICB9XG5cbiAgICBpZiAoIWRldGFpbHMucHJvdG9jb2wpIHtcbiAgICAgIGRldGFpbHMucHJvdG9jb2wgPSB3aW5kb3ckMS5sb2NhdGlvbi5wcm90b2NvbDtcbiAgICB9XG5cbiAgICBpZiAoYWRkVG9Cb2R5KSB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRldGFpbHM7XG4gIH07XG4gIC8qKlxuICAgKiBHZXQgYWJzb2x1dGUgdmVyc2lvbiBvZiByZWxhdGl2ZSBVUkwuIFVzZWQgdG8gdGVsbCBGbGFzaCB0aGUgY29ycmVjdCBVUkwuXG4gICAqXG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW0gICAge3N0cmluZ30gdXJsXG4gICAqICAgICAgICAgICBVUkwgdG8gbWFrZSBhYnNvbHV0ZVxuICAgKlxuICAgKiBAcmV0dXJuICAge3N0cmluZ31cbiAgICogICAgICAgICAgIEFic29sdXRlIFVSTFxuICAgKlxuICAgKiBAc2VlICAgICAgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80NzA4MzIvZ2V0dGluZy1hbi1hYnNvbHV0ZS11cmwtZnJvbS1hLXJlbGF0aXZlLW9uZS1pZTYtaXNzdWVcbiAgICovXG5cbiAgdmFyIGdldEFic29sdXRlVVJMID0gZnVuY3Rpb24gZ2V0QWJzb2x1dGVVUkwodXJsKSB7XG4gICAgLy8gQ2hlY2sgaWYgYWJzb2x1dGUgVVJMXG4gICAgaWYgKCF1cmwubWF0Y2goL15odHRwcz86XFwvXFwvLykpIHtcbiAgICAgIC8vIENvbnZlcnQgdG8gYWJzb2x1dGUgVVJMLiBGbGFzaCBob3N0ZWQgb2ZmLXNpdGUgbmVlZHMgYW4gYWJzb2x1dGUgVVJMLlxuICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgZGl2LmlubmVySFRNTCA9IFwiPGEgaHJlZj1cXFwiXCIgKyB1cmwgKyBcIlxcXCI+eDwvYT5cIjtcbiAgICAgIHVybCA9IGRpdi5maXJzdENoaWxkLmhyZWY7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVybDtcbiAgfTtcbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGV4dGVuc2lvbiBvZiB0aGUgcGFzc2VkIGZpbGUgbmFtZS4gSXQgd2lsbCByZXR1cm4gYW4gZW1wdHkgc3RyaW5nXG4gICAqIGlmIHBhc3NlZCBhbiBpbnZhbGlkIHBhdGguXG4gICAqXG4gICAqIEBmdW5jdGlvblxuICAgKiBAcGFyYW0gICAge3N0cmluZ30gcGF0aFxuICAgKiAgICAgICAgICAgVGhlIGZpbGVOYW1lIHBhdGggbGlrZSAnL3BhdGgvdG8vZmlsZS5tcDQnXG4gICAqXG4gICAqIEByZXR1cm4gIHtzdHJpbmd9XG4gICAqICAgICAgICAgICBUaGUgZXh0ZW5zaW9uIGluIGxvd2VyIGNhc2Ugb3IgYW4gZW1wdHkgc3RyaW5nIGlmIG5vXG4gICAqICAgICAgICAgICBleHRlbnNpb24gY291bGQgYmUgZm91bmQuXG4gICAqL1xuXG4gIHZhciBnZXRGaWxlRXh0ZW5zaW9uID0gZnVuY3Rpb24gZ2V0RmlsZUV4dGVuc2lvbihwYXRoKSB7XG4gICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgdmFyIHNwbGl0UGF0aFJlID0gL14oXFwvPykoW1xcc1xcU10qPykoKD86XFwuezEsMn18W15cXC9dKz8pKFxcLihbXlxcLlxcL1xcP10rKSkpKD86W1xcL10qfFtcXD9dLiopJC9pO1xuICAgICAgdmFyIHBhdGhQYXJ0cyA9IHNwbGl0UGF0aFJlLmV4ZWMocGF0aCk7XG5cbiAgICAgIGlmIChwYXRoUGFydHMpIHtcbiAgICAgICAgcmV0dXJuIHBhdGhQYXJ0cy5wb3AoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAnJztcbiAgfTtcbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgdXJsIHBhc3NlZCBpcyBhIGNyb3NzIGRvbWFpbiByZXF1ZXN0IG9yIG5vdC5cbiAgICpcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBwYXJhbSAgICB7c3RyaW5nfSB1cmxcbiAgICogICAgICAgICAgIFRoZSB1cmwgdG8gY2hlY2suXG4gICAqXG4gICAqIEByZXR1cm4gICB7Ym9vbGVhbn1cbiAgICogICAgICAgICAgIFdoZXRoZXIgaXQgaXMgYSBjcm9zcyBkb21haW4gcmVxdWVzdCBvciBub3QuXG4gICAqL1xuXG4gIHZhciBpc0Nyb3NzT3JpZ2luID0gZnVuY3Rpb24gaXNDcm9zc09yaWdpbih1cmwpIHtcbiAgICB2YXIgd2luTG9jID0gd2luZG93JDEubG9jYXRpb247XG4gICAgdmFyIHVybEluZm8gPSBwYXJzZVVybCh1cmwpOyAvLyBJRTggcHJvdG9jb2wgcmVsYXRpdmUgdXJscyB3aWxsIHJldHVybiAnOicgZm9yIHByb3RvY29sXG5cbiAgICB2YXIgc3JjUHJvdG9jb2wgPSB1cmxJbmZvLnByb3RvY29sID09PSAnOicgPyB3aW5Mb2MucHJvdG9jb2wgOiB1cmxJbmZvLnByb3RvY29sOyAvLyBDaGVjayBpZiB1cmwgaXMgZm9yIGFub3RoZXIgZG9tYWluL29yaWdpblxuICAgIC8vIElFOCBkb2Vzbid0IGtub3cgbG9jYXRpb24ub3JpZ2luLCBzbyB3ZSB3b24ndCByZWx5IG9uIGl0IGhlcmVcblxuICAgIHZhciBjcm9zc09yaWdpbiA9IHNyY1Byb3RvY29sICsgdXJsSW5mby5ob3N0ICE9PSB3aW5Mb2MucHJvdG9jb2wgKyB3aW5Mb2MuaG9zdDtcbiAgICByZXR1cm4gY3Jvc3NPcmlnaW47XG4gIH07XG5cbiAgdmFyIFVybCA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBwYXJzZVVybDogcGFyc2VVcmwsXG4gICAgZ2V0QWJzb2x1dGVVUkw6IGdldEFic29sdXRlVVJMLFxuICAgIGdldEZpbGVFeHRlbnNpb246IGdldEZpbGVFeHRlbnNpb24sXG4gICAgaXNDcm9zc09yaWdpbjogaXNDcm9zc09yaWdpblxuICB9KTtcblxuICB2YXIgaXNGdW5jdGlvbl8xID0gaXNGdW5jdGlvbjtcbiAgdmFyIHRvU3RyaW5nJDEgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4gIGZ1bmN0aW9uIGlzRnVuY3Rpb24oZm4pIHtcbiAgICB2YXIgc3RyaW5nID0gdG9TdHJpbmckMS5jYWxsKGZuKTtcbiAgICByZXR1cm4gc3RyaW5nID09PSAnW29iamVjdCBGdW5jdGlvbl0nIHx8IHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyAmJiBzdHJpbmcgIT09ICdbb2JqZWN0IFJlZ0V4cF0nIHx8IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICggLy8gSUU4IGFuZCBiZWxvd1xuICAgIGZuID09PSB3aW5kb3cuc2V0VGltZW91dCB8fCBmbiA9PT0gd2luZG93LmFsZXJ0IHx8IGZuID09PSB3aW5kb3cuY29uZmlybSB8fCBmbiA9PT0gd2luZG93LnByb21wdCk7XG4gIH1cblxuICB2YXIgdHJpbV8xID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykge1xuICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHRyaW07XG5cbiAgICBmdW5jdGlvbiB0cmltKHN0cikge1xuICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzKnxcXHMqJC9nLCAnJyk7XG4gICAgfVxuXG4gICAgZXhwb3J0cy5sZWZ0ID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzKi8sICcnKTtcbiAgICB9O1xuXG4gICAgZXhwb3J0cy5yaWdodCA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvXFxzKiQvLCAnJyk7XG4gICAgfTtcbiAgfSk7XG4gIHZhciB0cmltXzIgPSB0cmltXzEubGVmdDtcbiAgdmFyIHRyaW1fMyA9IHRyaW1fMS5yaWdodDtcblxuICB2YXIgZm5Ub1N0ciA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcbiAgdmFyIGNvbnN0cnVjdG9yUmVnZXggPSAvXlxccypjbGFzc1xcYi87XG5cbiAgdmFyIGlzRVM2Q2xhc3NGbiA9IGZ1bmN0aW9uIGlzRVM2Q2xhc3NGdW5jdGlvbih2YWx1ZSkge1xuICAgIHRyeSB7XG4gICAgICB2YXIgZm5TdHIgPSBmblRvU3RyLmNhbGwodmFsdWUpO1xuICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yUmVnZXgudGVzdChmblN0cik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBub3QgYSBmdW5jdGlvblxuICAgIH1cbiAgfTtcblxuICB2YXIgdHJ5RnVuY3Rpb25PYmplY3QgPSBmdW5jdGlvbiB0cnlGdW5jdGlvblRvU3RyKHZhbHVlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChpc0VTNkNsYXNzRm4odmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgZm5Ub1N0ci5jYWxsKHZhbHVlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHRvU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbiAgdmFyIGZuQ2xhc3MgPSAnW29iamVjdCBGdW5jdGlvbl0nO1xuICB2YXIgZ2VuQ2xhc3MgPSAnW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0nO1xuICB2YXIgaGFzVG9TdHJpbmdUYWcgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBTeW1ib2wudG9TdHJpbmdUYWcgPT09ICdzeW1ib2wnO1xuXG4gIHZhciBpc0NhbGxhYmxlID0gZnVuY3Rpb24gaXNDYWxsYWJsZSh2YWx1ZSkge1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nICYmICF2YWx1ZS5wcm90b3R5cGUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChoYXNUb1N0cmluZ1RhZykge1xuICAgICAgcmV0dXJuIHRyeUZ1bmN0aW9uT2JqZWN0KHZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAoaXNFUzZDbGFzc0ZuKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBzdHJDbGFzcyA9IHRvU3RyLmNhbGwodmFsdWUpO1xuICAgIHJldHVybiBzdHJDbGFzcyA9PT0gZm5DbGFzcyB8fCBzdHJDbGFzcyA9PT0gZ2VuQ2xhc3M7XG4gIH07XG5cbiAgdmFyIHRvU3RyJDEgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuICB2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4gIHZhciBmb3JFYWNoQXJyYXkgPSBmdW5jdGlvbiBmb3JFYWNoQXJyYXkoYXJyYXksIGl0ZXJhdG9yLCByZWNlaXZlcikge1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoYXJyYXksIGkpKSB7XG4gICAgICAgIGlmIChyZWNlaXZlciA9PSBudWxsKSB7XG4gICAgICAgICAgaXRlcmF0b3IoYXJyYXlbaV0sIGksIGFycmF5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKHJlY2VpdmVyLCBhcnJheVtpXSwgaSwgYXJyYXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhciBmb3JFYWNoU3RyaW5nID0gZnVuY3Rpb24gZm9yRWFjaFN0cmluZyhzdHJpbmcsIGl0ZXJhdG9yLCByZWNlaXZlcikge1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzdHJpbmcubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIC8vIG5vIHN1Y2ggdGhpbmcgYXMgYSBzcGFyc2Ugc3RyaW5nLlxuICAgICAgaWYgKHJlY2VpdmVyID09IG51bGwpIHtcbiAgICAgICAgaXRlcmF0b3Ioc3RyaW5nLmNoYXJBdChpKSwgaSwgc3RyaW5nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZXJhdG9yLmNhbGwocmVjZWl2ZXIsIHN0cmluZy5jaGFyQXQoaSksIGksIHN0cmluZyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhciBmb3JFYWNoT2JqZWN0ID0gZnVuY3Rpb24gZm9yRWFjaE9iamVjdChvYmplY3QsIGl0ZXJhdG9yLCByZWNlaXZlcikge1xuICAgIGZvciAodmFyIGsgaW4gb2JqZWN0KSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGspKSB7XG4gICAgICAgIGlmIChyZWNlaXZlciA9PSBudWxsKSB7XG4gICAgICAgICAgaXRlcmF0b3Iob2JqZWN0W2tdLCBrLCBvYmplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZXJhdG9yLmNhbGwocmVjZWl2ZXIsIG9iamVjdFtrXSwgaywgb2JqZWN0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2gobGlzdCwgaXRlcmF0b3IsIHRoaXNBcmcpIHtcbiAgICBpZiAoIWlzQ2FsbGFibGUoaXRlcmF0b3IpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpdGVyYXRvciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgICB9XG5cbiAgICB2YXIgcmVjZWl2ZXI7XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAzKSB7XG4gICAgICByZWNlaXZlciA9IHRoaXNBcmc7XG4gICAgfVxuXG4gICAgaWYgKHRvU3RyJDEuY2FsbChsaXN0KSA9PT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgZm9yRWFjaEFycmF5KGxpc3QsIGl0ZXJhdG9yLCByZWNlaXZlcik7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbGlzdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGZvckVhY2hTdHJpbmcobGlzdCwgaXRlcmF0b3IsIHJlY2VpdmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yRWFjaE9iamVjdChsaXN0LCBpdGVyYXRvciwgcmVjZWl2ZXIpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgZm9yRWFjaF8xID0gZm9yRWFjaDtcblxuICB2YXIgaXNBcnJheSA9IGZ1bmN0aW9uIGlzQXJyYXkoYXJnKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmcpID09PSAnW29iamVjdCBBcnJheV0nO1xuICB9O1xuXG4gIHZhciBwYXJzZUhlYWRlcnMgPSBmdW5jdGlvbiBwYXJzZUhlYWRlcnMoaGVhZGVycykge1xuICAgIGlmICghaGVhZGVycykgcmV0dXJuIHt9O1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBmb3JFYWNoXzEodHJpbV8xKGhlYWRlcnMpLnNwbGl0KCdcXG4nKSwgZnVuY3Rpb24gKHJvdykge1xuICAgICAgdmFyIGluZGV4ID0gcm93LmluZGV4T2YoJzonKSxcbiAgICAgICAgICBrZXkgPSB0cmltXzEocm93LnNsaWNlKDAsIGluZGV4KSkudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICB2YWx1ZSA9IHRyaW1fMShyb3cuc2xpY2UoaW5kZXggKyAxKSk7XG5cbiAgICAgIGlmICh0eXBlb2YgcmVzdWx0W2tleV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKGlzQXJyYXkocmVzdWx0W2tleV0pKSB7XG4gICAgICAgIHJlc3VsdFtrZXldLnB1c2godmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSBbcmVzdWx0W2tleV0sIHZhbHVlXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHZhciBpbW11dGFibGUgPSBleHRlbmQ7XG4gIHZhciBoYXNPd25Qcm9wZXJ0eSQxID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuICBmdW5jdGlvbiBleHRlbmQoKSB7XG4gICAgdmFyIHRhcmdldCA9IHt9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG5cbiAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5JDEuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIHZhciB4aHIgPSBjcmVhdGVYSFI7XG4gIGNyZWF0ZVhIUi5YTUxIdHRwUmVxdWVzdCA9IHdpbmRvdyQxLlhNTEh0dHBSZXF1ZXN0IHx8IG5vb3A7XG4gIGNyZWF0ZVhIUi5YRG9tYWluUmVxdWVzdCA9IFwid2l0aENyZWRlbnRpYWxzXCIgaW4gbmV3IGNyZWF0ZVhIUi5YTUxIdHRwUmVxdWVzdCgpID8gY3JlYXRlWEhSLlhNTEh0dHBSZXF1ZXN0IDogd2luZG93JDEuWERvbWFpblJlcXVlc3Q7XG4gIGZvckVhY2hBcnJheSQxKFtcImdldFwiLCBcInB1dFwiLCBcInBvc3RcIiwgXCJwYXRjaFwiLCBcImhlYWRcIiwgXCJkZWxldGVcIl0sIGZ1bmN0aW9uIChtZXRob2QpIHtcbiAgICBjcmVhdGVYSFJbbWV0aG9kID09PSBcImRlbGV0ZVwiID8gXCJkZWxcIiA6IG1ldGhvZF0gPSBmdW5jdGlvbiAodXJpLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgICAgb3B0aW9ucyA9IGluaXRQYXJhbXModXJpLCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgICBvcHRpb25zLm1ldGhvZCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpO1xuICAgICAgcmV0dXJuIF9jcmVhdGVYSFIob3B0aW9ucyk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gZm9yRWFjaEFycmF5JDEoYXJyYXksIGl0ZXJhdG9yKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgaXRlcmF0b3IoYXJyYXlbaV0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XG4gICAgZm9yICh2YXIgaSBpbiBvYmopIHtcbiAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoaSkpIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXRQYXJhbXModXJpLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHZhciBwYXJhbXMgPSB1cmk7XG5cbiAgICBpZiAoaXNGdW5jdGlvbl8xKG9wdGlvbnMpKSB7XG4gICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG5cbiAgICAgIGlmICh0eXBlb2YgdXJpID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHBhcmFtcyA9IHtcbiAgICAgICAgICB1cmk6IHVyaVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwYXJhbXMgPSBpbW11dGFibGUob3B0aW9ucywge1xuICAgICAgICB1cmk6IHVyaVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcGFyYW1zLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVhIUih1cmksIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgb3B0aW9ucyA9IGluaXRQYXJhbXModXJpLCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIF9jcmVhdGVYSFIob3B0aW9ucyk7XG4gIH1cblxuICBmdW5jdGlvbiBfY3JlYXRlWEhSKG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuY2FsbGJhY2sgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImNhbGxiYWNrIGFyZ3VtZW50IG1pc3NpbmdcIik7XG4gICAgfVxuXG4gICAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuXG4gICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gY2JPbmNlKGVyciwgcmVzcG9uc2UsIGJvZHkpIHtcbiAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgIG9wdGlvbnMuY2FsbGJhY2soZXJyLCByZXNwb25zZSwgYm9keSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHJlYWR5c3RhdGVjaGFuZ2UoKSB7XG4gICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgc2V0VGltZW91dChsb2FkRnVuYywgMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Qm9keSgpIHtcbiAgICAgIC8vIENocm9tZSB3aXRoIHJlcXVlc3RUeXBlPWJsb2IgdGhyb3dzIGVycm9ycyBhcnJvdW5kIHdoZW4gZXZlbiB0ZXN0aW5nIGFjY2VzcyB0byByZXNwb25zZVRleHRcbiAgICAgIHZhciBib2R5ID0gdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoeGhyLnJlc3BvbnNlKSB7XG4gICAgICAgIGJvZHkgPSB4aHIucmVzcG9uc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBib2R5ID0geGhyLnJlc3BvbnNlVGV4dCB8fCBnZXRYbWwoeGhyKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzSnNvbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGJvZHkgPSBKU09OLnBhcnNlKGJvZHkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYm9keTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlcnJvckZ1bmMoZXZ0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dFRpbWVyKTtcblxuICAgICAgaWYgKCEoZXZ0IGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgICAgIGV2dCA9IG5ldyBFcnJvcihcIlwiICsgKGV2dCB8fCBcIlVua25vd24gWE1MSHR0cFJlcXVlc3QgRXJyb3JcIikpO1xuICAgICAgfVxuXG4gICAgICBldnQuc3RhdHVzQ29kZSA9IDA7XG4gICAgICByZXR1cm4gY2FsbGJhY2soZXZ0LCBmYWlsdXJlUmVzcG9uc2UpO1xuICAgIH0gLy8gd2lsbCBsb2FkIHRoZSBkYXRhICYgcHJvY2VzcyB0aGUgcmVzcG9uc2UgaW4gYSBzcGVjaWFsIHJlc3BvbnNlIG9iamVjdFxuXG5cbiAgICBmdW5jdGlvbiBsb2FkRnVuYygpIHtcbiAgICAgIGlmIChhYm9ydGVkKSByZXR1cm47XG4gICAgICB2YXIgc3RhdHVzO1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRUaW1lcik7XG5cbiAgICAgIGlmIChvcHRpb25zLnVzZVhEUiAmJiB4aHIuc3RhdHVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy9JRTggQ09SUyBHRVQgc3VjY2Vzc2Z1bCByZXNwb25zZSBkb2Vzbid0IGhhdmUgYSBzdGF0dXMgZmllbGQsIGJ1dCBib2R5IGlzIGZpbmVcbiAgICAgICAgc3RhdHVzID0gMjAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdHVzID0geGhyLnN0YXR1cyA9PT0gMTIyMyA/IDIwNCA6IHhoci5zdGF0dXM7XG4gICAgICB9XG5cbiAgICAgIHZhciByZXNwb25zZSA9IGZhaWx1cmVSZXNwb25zZTtcbiAgICAgIHZhciBlcnIgPSBudWxsO1xuXG4gICAgICBpZiAoc3RhdHVzICE9PSAwKSB7XG4gICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgIGJvZHk6IGdldEJvZHkoKSxcbiAgICAgICAgICBzdGF0dXNDb2RlOiBzdGF0dXMsXG4gICAgICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICAgICAgaGVhZGVyczoge30sXG4gICAgICAgICAgdXJsOiB1cmksXG4gICAgICAgICAgcmF3UmVxdWVzdDogeGhyXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMpIHtcbiAgICAgICAgICAvL3JlbWVtYmVyIHhociBjYW4gaW4gZmFjdCBiZSBYRFIgZm9yIENPUlMgaW4gSUVcbiAgICAgICAgICByZXNwb25zZS5oZWFkZXJzID0gcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVyciA9IG5ldyBFcnJvcihcIkludGVybmFsIFhNTEh0dHBSZXF1ZXN0IEVycm9yXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2FsbGJhY2soZXJyLCByZXNwb25zZSwgcmVzcG9uc2UuYm9keSk7XG4gICAgfVxuXG4gICAgdmFyIHhociA9IG9wdGlvbnMueGhyIHx8IG51bGw7XG5cbiAgICBpZiAoIXhocikge1xuICAgICAgaWYgKG9wdGlvbnMuY29ycyB8fCBvcHRpb25zLnVzZVhEUikge1xuICAgICAgICB4aHIgPSBuZXcgY3JlYXRlWEhSLlhEb21haW5SZXF1ZXN0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4aHIgPSBuZXcgY3JlYXRlWEhSLlhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGtleTtcbiAgICB2YXIgYWJvcnRlZDtcbiAgICB2YXIgdXJpID0geGhyLnVybCA9IG9wdGlvbnMudXJpIHx8IG9wdGlvbnMudXJsO1xuICAgIHZhciBtZXRob2QgPSB4aHIubWV0aG9kID0gb3B0aW9ucy5tZXRob2QgfHwgXCJHRVRcIjtcbiAgICB2YXIgYm9keSA9IG9wdGlvbnMuYm9keSB8fCBvcHRpb25zLmRhdGE7XG4gICAgdmFyIGhlYWRlcnMgPSB4aHIuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyB8fCB7fTtcbiAgICB2YXIgc3luYyA9ICEhb3B0aW9ucy5zeW5jO1xuICAgIHZhciBpc0pzb24gPSBmYWxzZTtcbiAgICB2YXIgdGltZW91dFRpbWVyO1xuICAgIHZhciBmYWlsdXJlUmVzcG9uc2UgPSB7XG4gICAgICBib2R5OiB1bmRlZmluZWQsXG4gICAgICBoZWFkZXJzOiB7fSxcbiAgICAgIHN0YXR1c0NvZGU6IDAsXG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIHVybDogdXJpLFxuICAgICAgcmF3UmVxdWVzdDogeGhyXG4gICAgfTtcblxuICAgIGlmIChcImpzb25cIiBpbiBvcHRpb25zICYmIG9wdGlvbnMuanNvbiAhPT0gZmFsc2UpIHtcbiAgICAgIGlzSnNvbiA9IHRydWU7XG4gICAgICBoZWFkZXJzW1wiYWNjZXB0XCJdIHx8IGhlYWRlcnNbXCJBY2NlcHRcIl0gfHwgKGhlYWRlcnNbXCJBY2NlcHRcIl0gPSBcImFwcGxpY2F0aW9uL2pzb25cIik7IC8vRG9uJ3Qgb3ZlcnJpZGUgZXhpc3RpbmcgYWNjZXB0IGhlYWRlciBkZWNsYXJlZCBieSB1c2VyXG5cbiAgICAgIGlmIChtZXRob2QgIT09IFwiR0VUXCIgJiYgbWV0aG9kICE9PSBcIkhFQURcIikge1xuICAgICAgICBoZWFkZXJzW1wiY29udGVudC10eXBlXCJdIHx8IGhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0gfHwgKGhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0gPSBcImFwcGxpY2F0aW9uL2pzb25cIik7IC8vRG9uJ3Qgb3ZlcnJpZGUgZXhpc3RpbmcgYWNjZXB0IGhlYWRlciBkZWNsYXJlZCBieSB1c2VyXG5cbiAgICAgICAgYm9keSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuanNvbiA9PT0gdHJ1ZSA/IGJvZHkgOiBvcHRpb25zLmpzb24pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSByZWFkeXN0YXRlY2hhbmdlO1xuICAgIHhoci5vbmxvYWQgPSBsb2FkRnVuYztcbiAgICB4aHIub25lcnJvciA9IGVycm9yRnVuYzsgLy8gSUU5IG11c3QgaGF2ZSBvbnByb2dyZXNzIGJlIHNldCB0byBhIHVuaXF1ZSBmdW5jdGlvbi5cblxuICAgIHhoci5vbnByb2dyZXNzID0gZnVuY3Rpb24gKCkgey8vIElFIG11c3QgZGllXG4gICAgfTtcblxuICAgIHhoci5vbmFib3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgYWJvcnRlZCA9IHRydWU7XG4gICAgfTtcblxuICAgIHhoci5vbnRpbWVvdXQgPSBlcnJvckZ1bmM7XG4gICAgeGhyLm9wZW4obWV0aG9kLCB1cmksICFzeW5jLCBvcHRpb25zLnVzZXJuYW1lLCBvcHRpb25zLnBhc3N3b3JkKTsgLy9oYXMgdG8gYmUgYWZ0ZXIgb3BlblxuXG4gICAgaWYgKCFzeW5jKSB7XG4gICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gISFvcHRpb25zLndpdGhDcmVkZW50aWFscztcbiAgICB9IC8vIENhbm5vdCBzZXQgdGltZW91dCB3aXRoIHN5bmMgcmVxdWVzdFxuICAgIC8vIG5vdCBzZXR0aW5nIHRpbWVvdXQgb24gdGhlIHhociBvYmplY3QsIGJlY2F1c2Ugb2Ygb2xkIHdlYmtpdHMgZXRjLiBub3QgaGFuZGxpbmcgdGhhdCBjb3JyZWN0bHlcbiAgICAvLyBib3RoIG5wbSdzIHJlcXVlc3QgYW5kIGpxdWVyeSAxLnggdXNlIHRoaXMga2luZCBvZiB0aW1lb3V0LCBzbyB0aGlzIGlzIGJlaW5nIGNvbnNpc3RlbnRcblxuXG4gICAgaWYgKCFzeW5jICYmIG9wdGlvbnMudGltZW91dCA+IDApIHtcbiAgICAgIHRpbWVvdXRUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoYWJvcnRlZCkgcmV0dXJuO1xuICAgICAgICBhYm9ydGVkID0gdHJ1ZTsgLy9JRTkgbWF5IHN0aWxsIGNhbGwgcmVhZHlzdGF0ZWNoYW5nZVxuXG4gICAgICAgIHhoci5hYm9ydChcInRpbWVvdXRcIik7XG4gICAgICAgIHZhciBlID0gbmV3IEVycm9yKFwiWE1MSHR0cFJlcXVlc3QgdGltZW91dFwiKTtcbiAgICAgICAgZS5jb2RlID0gXCJFVElNRURPVVRcIjtcbiAgICAgICAgZXJyb3JGdW5jKGUpO1xuICAgICAgfSwgb3B0aW9ucy50aW1lb3V0KTtcbiAgICB9XG5cbiAgICBpZiAoeGhyLnNldFJlcXVlc3RIZWFkZXIpIHtcbiAgICAgIGZvciAoa2V5IGluIGhlYWRlcnMpIHtcbiAgICAgICAgaWYgKGhlYWRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgaGVhZGVyc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5oZWFkZXJzICYmICFpc0VtcHR5KG9wdGlvbnMuaGVhZGVycykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkhlYWRlcnMgY2Fubm90IGJlIHNldCBvbiBhbiBYRG9tYWluUmVxdWVzdCBvYmplY3RcIik7XG4gICAgfVxuXG4gICAgaWYgKFwicmVzcG9uc2VUeXBlXCIgaW4gb3B0aW9ucykge1xuICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9IG9wdGlvbnMucmVzcG9uc2VUeXBlO1xuICAgIH1cblxuICAgIGlmIChcImJlZm9yZVNlbmRcIiBpbiBvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLmJlZm9yZVNlbmQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgb3B0aW9ucy5iZWZvcmVTZW5kKHhocik7XG4gICAgfSAvLyBNaWNyb3NvZnQgRWRnZSBicm93c2VyIHNlbmRzIFwidW5kZWZpbmVkXCIgd2hlbiBzZW5kIGlzIGNhbGxlZCB3aXRoIHVuZGVmaW5lZCB2YWx1ZS5cbiAgICAvLyBYTUxIdHRwUmVxdWVzdCBzcGVjIHNheXMgdG8gcGFzcyBudWxsIGFzIGJvZHkgdG8gaW5kaWNhdGUgbm8gYm9keVxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbmF1Z3R1ci94aHIvaXNzdWVzLzEwMC5cblxuXG4gICAgeGhyLnNlbmQoYm9keSB8fCBudWxsKTtcbiAgICByZXR1cm4geGhyO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0WG1sKHhocikge1xuICAgIGlmICh4aHIucmVzcG9uc2VUeXBlID09PSBcImRvY3VtZW50XCIpIHtcbiAgICAgIHJldHVybiB4aHIucmVzcG9uc2VYTUw7XG4gICAgfVxuXG4gICAgdmFyIGZpcmVmb3hCdWdUYWtlbkVmZmVjdCA9IHhoci5yZXNwb25zZVhNTCAmJiB4aHIucmVzcG9uc2VYTUwuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lID09PSBcInBhcnNlcmVycm9yXCI7XG5cbiAgICBpZiAoeGhyLnJlc3BvbnNlVHlwZSA9PT0gXCJcIiAmJiAhZmlyZWZveEJ1Z1Rha2VuRWZmZWN0KSB7XG4gICAgICByZXR1cm4geGhyLnJlc3BvbnNlWE1MO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gbm9vcCgpIHt9XG5cbiAgLyoqXG4gICAqIFRha2VzIGEgd2VidnR0IGZpbGUgY29udGVudHMgYW5kIHBhcnNlcyBpdCBpbnRvIGN1ZXNcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNyY0NvbnRlbnRcbiAgICogICAgICAgIHdlYlZUVCBmaWxlIGNvbnRlbnRzXG4gICAqXG4gICAqIEBwYXJhbSB7VGV4dFRyYWNrfSB0cmFja1xuICAgKiAgICAgICAgVGV4dFRyYWNrIHRvIGFkZCBjdWVzIHRvLiBDdWVzIGNvbWUgZnJvbSB0aGUgc3JjQ29udGVudC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgdmFyIHBhcnNlQ3VlcyA9IGZ1bmN0aW9uIHBhcnNlQ3VlcyhzcmNDb250ZW50LCB0cmFjaykge1xuICAgIHZhciBwYXJzZXIgPSBuZXcgd2luZG93JDEuV2ViVlRULlBhcnNlcih3aW5kb3ckMSwgd2luZG93JDEudnR0anMsIHdpbmRvdyQxLldlYlZUVC5TdHJpbmdEZWNvZGVyKCkpO1xuICAgIHZhciBlcnJvcnMgPSBbXTtcblxuICAgIHBhcnNlci5vbmN1ZSA9IGZ1bmN0aW9uIChjdWUpIHtcbiAgICAgIHRyYWNrLmFkZEN1ZShjdWUpO1xuICAgIH07XG5cbiAgICBwYXJzZXIub25wYXJzaW5nZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIGVycm9ycy5wdXNoKGVycm9yKTtcbiAgICB9O1xuXG4gICAgcGFyc2VyLm9uZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0cmFjay50cmlnZ2VyKHtcbiAgICAgICAgdHlwZTogJ2xvYWRlZGRhdGEnLFxuICAgICAgICB0YXJnZXQ6IHRyYWNrXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcGFyc2VyLnBhcnNlKHNyY0NvbnRlbnQpO1xuXG4gICAgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAod2luZG93JDEuY29uc29sZSAmJiB3aW5kb3ckMS5jb25zb2xlLmdyb3VwQ29sbGFwc2VkKSB7XG4gICAgICAgIHdpbmRvdyQxLmNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQoXCJUZXh0IFRyYWNrIHBhcnNpbmcgZXJyb3JzIGZvciBcIiArIHRyYWNrLnNyYyk7XG4gICAgICB9XG5cbiAgICAgIGVycm9ycy5mb3JFYWNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICByZXR1cm4gbG9nLmVycm9yKGVycm9yKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAod2luZG93JDEuY29uc29sZSAmJiB3aW5kb3ckMS5jb25zb2xlLmdyb3VwRW5kKSB7XG4gICAgICAgIHdpbmRvdyQxLmNvbnNvbGUuZ3JvdXBFbmQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYXJzZXIuZmx1c2goKTtcbiAgfTtcbiAgLyoqXG4gICAqIExvYWQgYSBgVGV4dFRyYWNrYCBmcm9tIGEgc3BlY2lmaWVkIHVybC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNyY1xuICAgKiAgICAgICAgVXJsIHRvIGxvYWQgdHJhY2sgZnJvbS5cbiAgICpcbiAgICogQHBhcmFtIHtUZXh0VHJhY2t9IHRyYWNrXG4gICAqICAgICAgICBUcmFjayB0byBhZGQgY3VlcyB0by4gQ29tZXMgZnJvbSB0aGUgY29udGVudCBhdCB0aGUgZW5kIG9mIGB1cmxgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIHZhciBsb2FkVHJhY2sgPSBmdW5jdGlvbiBsb2FkVHJhY2soc3JjLCB0cmFjaykge1xuICAgIHZhciBvcHRzID0ge1xuICAgICAgdXJpOiBzcmNcbiAgICB9O1xuICAgIHZhciBjcm9zc09yaWdpbiA9IGlzQ3Jvc3NPcmlnaW4oc3JjKTtcblxuICAgIGlmIChjcm9zc09yaWdpbikge1xuICAgICAgb3B0cy5jb3JzID0gY3Jvc3NPcmlnaW47XG4gICAgfVxuXG4gICAgeGhyKG9wdHMsIGJpbmQodGhpcywgZnVuY3Rpb24gKGVyciwgcmVzcG9uc2UsIHJlc3BvbnNlQm9keSkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gbG9nLmVycm9yKGVyciwgcmVzcG9uc2UpO1xuICAgICAgfVxuXG4gICAgICB0cmFjay5sb2FkZWRfID0gdHJ1ZTsgLy8gTWFrZSBzdXJlIHRoYXQgdnR0anMgaGFzIGxvYWRlZCwgb3RoZXJ3aXNlLCB3YWl0IHRpbGwgaXQgZmluaXNoZWQgbG9hZGluZ1xuICAgICAgLy8gTk9URTogdGhpcyBpcyBvbmx5IHVzZWQgZm9yIHRoZSBhbHQvdmlkZW8ubm92dHQuanMgYnVpbGRcblxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3ckMS5XZWJWVFQgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgaWYgKHRyYWNrLnRlY2hfKSB7XG4gICAgICAgICAgLy8gdG8gcHJldmVudCB1c2UgYmVmb3JlIGRlZmluZSBlc2xpbnQgZXJyb3IsIHdlIGRlZmluZSBsb2FkSGFuZGxlclxuICAgICAgICAgIC8vIGFzIGEgbGV0IGhlcmVcbiAgICAgICAgICB2YXIgbG9hZEhhbmRsZXI7XG5cbiAgICAgICAgICB2YXIgZXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gZXJyb3JIYW5kbGVyKCkge1xuICAgICAgICAgICAgbG9nLmVycm9yKFwidnR0anMgZmFpbGVkIHRvIGxvYWQsIHN0b3BwaW5nIHRyeWluZyB0byBwcm9jZXNzIFwiICsgdHJhY2suc3JjKTtcbiAgICAgICAgICAgIHRyYWNrLnRlY2hfLm9mZigndnR0anNsb2FkZWQnLCBsb2FkSGFuZGxlcik7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGxvYWRIYW5kbGVyID0gZnVuY3Rpb24gbG9hZEhhbmRsZXIoKSB7XG4gICAgICAgICAgICB0cmFjay50ZWNoXy5vZmYoJ3Z0dGpzZXJyb3InLCBlcnJvckhhbmRsZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQ3VlcyhyZXNwb25zZUJvZHksIHRyYWNrKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdHJhY2sudGVjaF8ub25lKCd2dHRqc2xvYWRlZCcsIGxvYWRIYW5kbGVyKTtcbiAgICAgICAgICB0cmFjay50ZWNoXy5vbmUoJ3Z0dGpzZXJyb3InLCBlcnJvckhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJzZUN1ZXMocmVzcG9uc2VCb2R5LCB0cmFjayk7XG4gICAgICB9XG4gICAgfSkpO1xuICB9O1xuICAvKipcbiAgICogQSByZXByZXNlbnRhdGlvbiBvZiBhIHNpbmdsZSBgVGV4dFRyYWNrYC5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZW1iZWRkZWQtY29udGVudC5odG1sI3RleHR0cmFja31cbiAgICogQGV4dGVuZHMgVHJhY2tcbiAgICovXG5cblxuICB2YXIgVGV4dFRyYWNrID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX1RyYWNrKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoVGV4dFRyYWNrLCBfVHJhY2spO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucz17fVxuICAgICAqICAgICAgICBPYmplY3Qgb2Ygb3B0aW9uIG5hbWVzIGFuZCB2YWx1ZXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGVjaH0gb3B0aW9ucy50ZWNoXG4gICAgICogICAgICAgIEEgcmVmZXJlbmNlIHRvIHRoZSB0ZWNoIHRoYXQgb3ducyB0aGlzIFRleHRUcmFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGV4dFRyYWNrfktpbmR9IFtvcHRpb25zLmtpbmQ9J3N1YnRpdGxlcyddXG4gICAgICogICAgICAgIEEgdmFsaWQgdGV4dCB0cmFjayBraW5kLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtUZXh0VHJhY2t+TW9kZX0gW29wdGlvbnMubW9kZT0nZGlzYWJsZWQnXVxuICAgICAqICAgICAgICBBIHZhbGlkIHRleHQgdHJhY2sgbW9kZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5pZD0ndmpzX3RyYWNrXycgKyBHdWlkLm5ld0dVSUQoKV1cbiAgICAgKiAgICAgICAgQSB1bmlxdWUgaWQgZm9yIHRoaXMgVGV4dFRyYWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxhYmVsPScnXVxuICAgICAqICAgICAgICBUaGUgbWVudSBsYWJlbCBmb3IgdGhpcyB0cmFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYW5ndWFnZT0nJ11cbiAgICAgKiAgICAgICAgQSB2YWxpZCB0d28gY2hhcmFjdGVyIGxhbmd1YWdlIGNvZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuc3JjbGFuZz0nJ11cbiAgICAgKiAgICAgICAgQSB2YWxpZCB0d28gY2hhcmFjdGVyIGxhbmd1YWdlIGNvZGUuIEFuIGFsdGVybmF0aXZlLCBidXQgZGVwcmlvcml0aXplZFxuICAgICAqICAgICAgICB2ZXJzaW9uIG9mIGBvcHRpb25zLmxhbmd1YWdlYFxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnNyY11cbiAgICAgKiAgICAgICAgQSB1cmwgdG8gVGV4dFRyYWNrIGN1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmRlZmF1bHRdXG4gICAgICogICAgICAgIElmIHRoaXMgdHJhY2sgc2hvdWxkIGRlZmF1bHQgdG8gb24gb3Igb2ZmLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRleHRUcmFjayhvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuXG4gICAgICBpZiAoIW9wdGlvbnMudGVjaCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgdGVjaCB3YXMgbm90IHByb3ZpZGVkLicpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2V0dGluZ3MgPSBtZXJnZU9wdGlvbnMob3B0aW9ucywge1xuICAgICAgICBraW5kOiBUZXh0VHJhY2tLaW5kW29wdGlvbnMua2luZF0gfHwgJ3N1YnRpdGxlcycsXG4gICAgICAgIGxhbmd1YWdlOiBvcHRpb25zLmxhbmd1YWdlIHx8IG9wdGlvbnMuc3JjbGFuZyB8fCAnJ1xuICAgICAgfSk7XG4gICAgICB2YXIgbW9kZSA9IFRleHRUcmFja01vZGVbc2V0dGluZ3MubW9kZV0gfHwgJ2Rpc2FibGVkJztcbiAgICAgIHZhciBkZWZhdWx0XyA9IHNldHRpbmdzLmRlZmF1bHQ7XG5cbiAgICAgIGlmIChzZXR0aW5ncy5raW5kID09PSAnbWV0YWRhdGEnIHx8IHNldHRpbmdzLmtpbmQgPT09ICdjaGFwdGVycycpIHtcbiAgICAgICAgbW9kZSA9ICdoaWRkZW4nO1xuICAgICAgfVxuXG4gICAgICBfdGhpcyA9IF9UcmFjay5jYWxsKHRoaXMsIHNldHRpbmdzKSB8fCB0aGlzO1xuICAgICAgX3RoaXMudGVjaF8gPSBzZXR0aW5ncy50ZWNoO1xuICAgICAgX3RoaXMuY3Vlc18gPSBbXTtcbiAgICAgIF90aGlzLmFjdGl2ZUN1ZXNfID0gW107XG4gICAgICB2YXIgY3VlcyA9IG5ldyBUZXh0VHJhY2tDdWVMaXN0KF90aGlzLmN1ZXNfKTtcbiAgICAgIHZhciBhY3RpdmVDdWVzID0gbmV3IFRleHRUcmFja0N1ZUxpc3QoX3RoaXMuYWN0aXZlQ3Vlc18pO1xuICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcbiAgICAgIHZhciB0aW1ldXBkYXRlSGFuZGxlciA9IGJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gQWNjZXNzaW5nIHRoaXMuYWN0aXZlQ3VlcyBmb3IgdGhlIHNpZGUtZWZmZWN0cyBvZiB1cGRhdGluZyBpdHNlbGZcbiAgICAgICAgLy8gZHVlIHRvIGl0cyBuYXR1cmUgYXMgYSBnZXR0ZXIgZnVuY3Rpb24uIERvIG5vdCByZW1vdmUgb3IgY3VlcyB3aWxsXG4gICAgICAgIC8vIHN0b3AgdXBkYXRpbmchXG4gICAgICAgIC8vIFVzZSB0aGUgc2V0dGVyIHRvIHByZXZlbnQgZGVsZXRpb24gZnJvbSB1Z2xpZnkgKHB1cmVfZ2V0dGVycyBydWxlKVxuICAgICAgICB0aGlzLmFjdGl2ZUN1ZXMgPSB0aGlzLmFjdGl2ZUN1ZXM7XG5cbiAgICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2N1ZWNoYW5nZScpO1xuICAgICAgICAgIGNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChtb2RlICE9PSAnZGlzYWJsZWQnKSB7XG4gICAgICAgIF90aGlzLnRlY2hfLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpcy50ZWNoXy5vbigndGltZXVwZGF0ZScsIHRpbWV1cGRhdGVIYW5kbGVyKTtcbiAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyb2YgVGV4dFRyYWNrXG4gICAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59IGRlZmF1bHRcbiAgICAgICAgICogICAgICAgICBJZiB0aGlzIHRyYWNrIHdhcyBzZXQgdG8gYmUgb24gb3Igb2ZmIGJ5IGRlZmF1bHQuIENhbm5vdCBiZSBjaGFuZ2VkIGFmdGVyXG4gICAgICAgICAqICAgICAgICAgY3JlYXRpb24uXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0XztcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KCkge31cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlcm9mIFRleHRUcmFja1xuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IG1vZGVcbiAgICAgICAgICogICAgICAgICBTZXQgdGhlIG1vZGUgb2YgdGhpcyBUZXh0VHJhY2sgdG8gYSB2YWxpZCB7QGxpbmsgVGV4dFRyYWNrfk1vZGV9LiBXaWxsXG4gICAgICAgICAqICAgICAgICAgbm90IGJlIHNldCBpZiBzZXR0aW5nIHRvIGFuIGludmFsaWQgbW9kZS5cbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBmaXJlcyBUZXh0VHJhY2sjbW9kZWNoYW5nZVxuICAgICAgICAgKi9cbiAgICAgICAgbW9kZToge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIG1vZGU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdNb2RlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgaWYgKCFUZXh0VHJhY2tNb2RlW25ld01vZGVdKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbW9kZSA9IG5ld01vZGU7XG5cbiAgICAgICAgICAgIGlmIChtb2RlICE9PSAnZGlzYWJsZWQnKSB7XG4gICAgICAgICAgICAgIHRoaXMudGVjaF8ucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzMi50ZWNoXy5vbigndGltZXVwZGF0ZScsIHRpbWV1cGRhdGVIYW5kbGVyKTtcbiAgICAgICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnRlY2hfLm9mZigndGltZXVwZGF0ZScsIHRpbWV1cGRhdGVIYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQW4gZXZlbnQgdGhhdCBmaXJlcyB3aGVuIG1vZGUgY2hhbmdlcyBvbiB0aGlzIHRyYWNrLiBUaGlzIGFsbG93c1xuICAgICAgICAgICAgICogdGhlIFRleHRUcmFja0xpc3QgdGhhdCBob2xkcyB0aGlzIHRyYWNrIHRvIGFjdCBhY2NvcmRpbmdseS5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiA+IE5vdGU6IFRoaXMgaXMgbm90IHBhcnQgb2YgdGhlIHNwZWMhXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQGV2ZW50IFRleHRUcmFjayNtb2RlY2hhbmdlXG4gICAgICAgICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgICAgICAgKi9cblxuXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ21vZGVjaGFuZ2UnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXJvZiBUZXh0VHJhY2tcbiAgICAgICAgICogQG1lbWJlciB7VGV4dFRyYWNrQ3VlTGlzdH0gY3Vlc1xuICAgICAgICAgKiAgICAgICAgIFRoZSB0ZXh0IHRyYWNrIGN1ZSBsaXN0IGZvciB0aGlzIFRleHRUcmFjay5cbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBjdWVzOiB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMubG9hZGVkXykge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGN1ZXM7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCgpIHt9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXJvZiBUZXh0VHJhY2tcbiAgICAgICAgICogQG1lbWJlciB7VGV4dFRyYWNrQ3VlTGlzdH0gYWN0aXZlQ3Vlc1xuICAgICAgICAgKiAgICAgICAgIFRoZSBsaXN0IHRleHQgdHJhY2sgY3VlcyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlIGZvciB0aGlzIFRleHRUcmFjay5cbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBhY3RpdmVDdWVzOiB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMubG9hZGVkXykge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH0gLy8gbm90aGluZyB0byBkb1xuXG5cbiAgICAgICAgICAgIGlmICh0aGlzLmN1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiBhY3RpdmVDdWVzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY3QgPSB0aGlzLnRlY2hfLmN1cnJlbnRUaW1lKCk7XG4gICAgICAgICAgICB2YXIgYWN0aXZlID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5jdWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICB2YXIgY3VlID0gdGhpcy5jdWVzW2ldO1xuXG4gICAgICAgICAgICAgIGlmIChjdWUuc3RhcnRUaW1lIDw9IGN0ICYmIGN1ZS5lbmRUaW1lID49IGN0KSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlLnB1c2goY3VlKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdWUuc3RhcnRUaW1lID09PSBjdWUuZW5kVGltZSAmJiBjdWUuc3RhcnRUaW1lIDw9IGN0ICYmIGN1ZS5zdGFydFRpbWUgKyAwLjUgPj0gY3QpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmUucHVzaChjdWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNoYW5nZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgaWYgKGFjdGl2ZS5sZW5ndGggIT09IHRoaXMuYWN0aXZlQ3Vlc18ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFjdGl2ZS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVDdWVzXy5pbmRleE9mKGFjdGl2ZVtfaV0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuYWN0aXZlQ3Vlc18gPSBhY3RpdmU7XG4gICAgICAgICAgICBhY3RpdmVDdWVzLnNldEN1ZXNfKHRoaXMuYWN0aXZlQ3Vlc18pO1xuICAgICAgICAgICAgcmV0dXJuIGFjdGl2ZUN1ZXM7XG4gICAgICAgICAgfSxcbiAgICAgICAgICAvLyAvIVxcIEtlZXAgdGhpcyBzZXR0ZXIgZW1wdHkgKHNlZSB0aGUgdGltZXVwZGF0ZSBoYW5kbGVyIGFib3ZlKVxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KCkge31cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChzZXR0aW5ncy5zcmMpIHtcbiAgICAgICAgX3RoaXMuc3JjID0gc2V0dGluZ3Muc3JjO1xuICAgICAgICBsb2FkVHJhY2soc2V0dGluZ3Muc3JjLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpcy5sb2FkZWRfID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgYSBjdWUgdG8gdGhlIGludGVybmFsIGxpc3Qgb2YgY3Vlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGV4dFRyYWNrfkN1ZX0gY3VlXG4gICAgICogICAgICAgIFRoZSBjdWUgdG8gYWRkIHRvIG91ciBpbnRlcm5hbCBsaXN0XG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBUZXh0VHJhY2sucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLmFkZEN1ZSA9IGZ1bmN0aW9uIGFkZEN1ZShvcmlnaW5hbEN1ZSkge1xuICAgICAgdmFyIGN1ZSA9IG9yaWdpbmFsQ3VlO1xuXG4gICAgICBpZiAod2luZG93JDEudnR0anMgJiYgIShvcmlnaW5hbEN1ZSBpbnN0YW5jZW9mIHdpbmRvdyQxLnZ0dGpzLlZUVEN1ZSkpIHtcbiAgICAgICAgY3VlID0gbmV3IHdpbmRvdyQxLnZ0dGpzLlZUVEN1ZShvcmlnaW5hbEN1ZS5zdGFydFRpbWUsIG9yaWdpbmFsQ3VlLmVuZFRpbWUsIG9yaWdpbmFsQ3VlLnRleHQpO1xuXG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gb3JpZ2luYWxDdWUpIHtcbiAgICAgICAgICBpZiAoIShwcm9wIGluIGN1ZSkpIHtcbiAgICAgICAgICAgIGN1ZVtwcm9wXSA9IG9yaWdpbmFsQ3VlW3Byb3BdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBtYWtlIHN1cmUgdGhhdCBgaWRgIGlzIGNvcGllZCBvdmVyXG5cblxuICAgICAgICBjdWUuaWQgPSBvcmlnaW5hbEN1ZS5pZDtcbiAgICAgICAgY3VlLm9yaWdpbmFsQ3VlXyA9IG9yaWdpbmFsQ3VlO1xuICAgICAgfVxuXG4gICAgICB2YXIgdHJhY2tzID0gdGhpcy50ZWNoXy50ZXh0VHJhY2tzKCk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICh0cmFja3NbaV0gIT09IHRoaXMpIHtcbiAgICAgICAgICB0cmFja3NbaV0ucmVtb3ZlQ3VlKGN1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5jdWVzXy5wdXNoKGN1ZSk7XG4gICAgICB0aGlzLmN1ZXMuc2V0Q3Vlc18odGhpcy5jdWVzXyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGN1ZSBmcm9tIG91ciBpbnRlcm5hbCBsaXN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RleHRUcmFja35DdWV9IHJlbW92ZUN1ZVxuICAgICAqICAgICAgICBUaGUgY3VlIHRvIHJlbW92ZSBmcm9tIG91ciBpbnRlcm5hbCBsaXN0XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnJlbW92ZUN1ZSA9IGZ1bmN0aW9uIHJlbW92ZUN1ZShfcmVtb3ZlQ3VlKSB7XG4gICAgICB2YXIgaSA9IHRoaXMuY3Vlc18ubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIHZhciBjdWUgPSB0aGlzLmN1ZXNfW2ldO1xuXG4gICAgICAgIGlmIChjdWUgPT09IF9yZW1vdmVDdWUgfHwgY3VlLm9yaWdpbmFsQ3VlXyAmJiBjdWUub3JpZ2luYWxDdWVfID09PSBfcmVtb3ZlQ3VlKSB7XG4gICAgICAgICAgdGhpcy5jdWVzXy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgdGhpcy5jdWVzLnNldEN1ZXNfKHRoaXMuY3Vlc18pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBUZXh0VHJhY2s7XG4gIH0oVHJhY2spO1xuICAvKipcbiAgICogY3VlY2hhbmdlIC0gT25lIG9yIG1vcmUgY3VlcyBpbiB0aGUgdHJhY2sgaGF2ZSBiZWNvbWUgYWN0aXZlIG9yIHN0b3BwZWQgYmVpbmcgYWN0aXZlLlxuICAgKi9cblxuXG4gIFRleHRUcmFjay5wcm90b3R5cGUuYWxsb3dlZEV2ZW50c18gPSB7XG4gICAgY3VlY2hhbmdlOiAnY3VlY2hhbmdlJ1xuICB9O1xuXG4gIC8qKlxuICAgKiBBIHJlcHJlc2VudGF0aW9uIG9mIGEgc2luZ2xlIGBBdWRpb1RyYWNrYC4gSWYgaXQgaXMgcGFydCBvZiBhbiB7QGxpbmsgQXVkaW9UcmFja0xpc3R9XG4gICAqIG9ubHkgb25lIGBBdWRpb1RyYWNrYCBpbiB0aGUgbGlzdCB3aWxsIGJlIGVuYWJsZWQgYXQgYSB0aW1lLlxuICAgKlxuICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9lbWJlZGRlZC1jb250ZW50Lmh0bWwjYXVkaW90cmFja31cbiAgICogQGV4dGVuZHMgVHJhY2tcbiAgICovXG5cbiAgdmFyIEF1ZGlvVHJhY2sgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfVHJhY2spIHtcbiAgICBfaW5oZXJpdHNMb29zZShBdWRpb1RyYWNrLCBfVHJhY2spO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dXG4gICAgICogICAgICAgIE9iamVjdCBvZiBvcHRpb24gbmFtZXMgYW5kIHZhbHVlc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtBdWRpb1RyYWNrfktpbmR9IFtvcHRpb25zLmtpbmQ9JyddXG4gICAgICogICAgICAgIEEgdmFsaWQgYXVkaW8gdHJhY2sga2luZFxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmlkPSd2anNfdHJhY2tfJyArIEd1aWQubmV3R1VJRCgpXVxuICAgICAqICAgICAgICBBIHVuaXF1ZSBpZCBmb3IgdGhpcyBBdWRpb1RyYWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxhYmVsPScnXVxuICAgICAqICAgICAgICBUaGUgbWVudSBsYWJlbCBmb3IgdGhpcyB0cmFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYW5ndWFnZT0nJ11cbiAgICAgKiAgICAgICAgQSB2YWxpZCB0d28gY2hhcmFjdGVyIGxhbmd1YWdlIGNvZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmVuYWJsZWRdXG4gICAgICogICAgICAgIElmIHRoaXMgdHJhY2sgaXMgdGhlIG9uZSB0aGF0IGlzIGN1cnJlbnRseSBwbGF5aW5nLiBJZiB0aGlzIHRyYWNrIGlzIHBhcnQgb2ZcbiAgICAgKiAgICAgICAgYW4ge0BsaW5rIEF1ZGlvVHJhY2tMaXN0fSwgb25seSBvbmUge0BsaW5rIEF1ZGlvVHJhY2t9IHdpbGwgYmUgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBdWRpb1RyYWNrKG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG5cbiAgICAgIHZhciBzZXR0aW5ncyA9IG1lcmdlT3B0aW9ucyhvcHRpb25zLCB7XG4gICAgICAgIGtpbmQ6IEF1ZGlvVHJhY2tLaW5kW29wdGlvbnMua2luZF0gfHwgJydcbiAgICAgIH0pO1xuICAgICAgX3RoaXMgPSBfVHJhY2suY2FsbCh0aGlzLCBzZXR0aW5ncykgfHwgdGhpcztcbiAgICAgIHZhciBlbmFibGVkID0gZmFsc2U7XG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBBdWRpb1RyYWNrXG4gICAgICAgKiBAbWVtYmVyIHtib29sZWFufSBlbmFibGVkXG4gICAgICAgKiAgICAgICAgIElmIHRoaXMgYEF1ZGlvVHJhY2tgIGlzIGVuYWJsZWQgb3Igbm90LiBXaGVuIHNldHRpbmcgdGhpcyB3aWxsXG4gICAgICAgKiAgICAgICAgIGZpcmUge0BsaW5rIEF1ZGlvVHJhY2sjZW5hYmxlZGNoYW5nZX0gaWYgdGhlIHN0YXRlIG9mIGVuYWJsZWQgaXMgY2hhbmdlZC5cbiAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICpcbiAgICAgICAqIEBmaXJlcyBWaWRlb1RyYWNrI3NlbGVjdGVkY2hhbmdlXG4gICAgICAgKi9cblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCAnZW5hYmxlZCcsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIGVuYWJsZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld0VuYWJsZWQpIHtcbiAgICAgICAgICAvLyBhbiBpbnZhbGlkIG9yIHVuY2hhbmdlZCB2YWx1ZVxuICAgICAgICAgIGlmICh0eXBlb2YgbmV3RW5hYmxlZCAhPT0gJ2Jvb2xlYW4nIHx8IG5ld0VuYWJsZWQgPT09IGVuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBlbmFibGVkID0gbmV3RW5hYmxlZDtcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBBbiBldmVudCB0aGF0IGZpcmVzIHdoZW4gZW5hYmxlZCBjaGFuZ2VzIG9uIHRoaXMgdHJhY2suIFRoaXMgYWxsb3dzXG4gICAgICAgICAgICogdGhlIEF1ZGlvVHJhY2tMaXN0IHRoYXQgaG9sZHMgdGhpcyB0cmFjayB0byBhY3QgYWNjb3JkaW5nbHkuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiA+IE5vdGU6IFRoaXMgaXMgbm90IHBhcnQgb2YgdGhlIHNwZWMhIE5hdGl2ZSB0cmFja3Mgd2lsbCBkb1xuICAgICAgICAgICAqICAgICAgICAgdGhpcyBpbnRlcm5hbGx5IHdpdGhvdXQgYW4gZXZlbnQuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZXZlbnQgQXVkaW9UcmFjayNlbmFibGVkY2hhbmdlXG4gICAgICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICAgICAqL1xuXG4gICAgICAgICAgdGhpcy50cmlnZ2VyKCdlbmFibGVkY2hhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgIH0pOyAvLyBpZiB0aGUgdXNlciBzZXRzIHRoaXMgdHJhY2sgdG8gc2VsZWN0ZWQgdGhlblxuICAgICAgLy8gc2V0IHNlbGVjdGVkIHRvIHRoYXQgdHJ1ZSB2YWx1ZSBvdGhlcndpc2VcbiAgICAgIC8vIHdlIGtlZXAgaXQgZmFsc2VcblxuICAgICAgaWYgKHNldHRpbmdzLmVuYWJsZWQpIHtcbiAgICAgICAgX3RoaXMuZW5hYmxlZCA9IHNldHRpbmdzLmVuYWJsZWQ7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLmxvYWRlZF8gPSB0cnVlO1xuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIHJldHVybiBBdWRpb1RyYWNrO1xuICB9KFRyYWNrKTtcblxuICAvKipcbiAgICogQSByZXByZXNlbnRhdGlvbiBvZiBhIHNpbmdsZSBgVmlkZW9UcmFja2AuXG4gICAqXG4gICAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCN2aWRlb3RyYWNrfVxuICAgKiBAZXh0ZW5kcyBUcmFja1xuICAgKi9cblxuICB2YXIgVmlkZW9UcmFjayA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9UcmFjaykge1xuICAgIF9pbmhlcml0c0xvb3NlKFZpZGVvVHJhY2ssIF9UcmFjayk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV1cbiAgICAgKiAgICAgICAgT2JqZWN0IG9mIG9wdGlvbiBuYW1lcyBhbmQgdmFsdWVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMua2luZD0nJ11cbiAgICAgKiAgICAgICAgQSB2YWxpZCB7QGxpbmsgVmlkZW9UcmFja35LaW5kfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmlkPSd2anNfdHJhY2tfJyArIEd1aWQubmV3R1VJRCgpXVxuICAgICAqICAgICAgICBBIHVuaXF1ZSBpZCBmb3IgdGhpcyBBdWRpb1RyYWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxhYmVsPScnXVxuICAgICAqICAgICAgICBUaGUgbWVudSBsYWJlbCBmb3IgdGhpcyB0cmFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYW5ndWFnZT0nJ11cbiAgICAgKiAgICAgICAgQSB2YWxpZCB0d28gY2hhcmFjdGVyIGxhbmd1YWdlIGNvZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNlbGVjdGVkXVxuICAgICAqICAgICAgICBJZiB0aGlzIHRyYWNrIGlzIHRoZSBvbmUgdGhhdCBpcyBjdXJyZW50bHkgcGxheWluZy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBWaWRlb1RyYWNrKG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG5cbiAgICAgIHZhciBzZXR0aW5ncyA9IG1lcmdlT3B0aW9ucyhvcHRpb25zLCB7XG4gICAgICAgIGtpbmQ6IFZpZGVvVHJhY2tLaW5kW29wdGlvbnMua2luZF0gfHwgJydcbiAgICAgIH0pO1xuICAgICAgX3RoaXMgPSBfVHJhY2suY2FsbCh0aGlzLCBzZXR0aW5ncykgfHwgdGhpcztcbiAgICAgIHZhciBzZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgVmlkZW9UcmFja1xuICAgICAgICogQG1lbWJlciB7Ym9vbGVhbn0gc2VsZWN0ZWRcbiAgICAgICAqICAgICAgICAgSWYgdGhpcyBgVmlkZW9UcmFja2AgaXMgc2VsZWN0ZWQgb3Igbm90LiBXaGVuIHNldHRpbmcgdGhpcyB3aWxsXG4gICAgICAgKiAgICAgICAgIGZpcmUge0BsaW5rIFZpZGVvVHJhY2sjc2VsZWN0ZWRjaGFuZ2V9IGlmIHRoZSBzdGF0ZSBvZiBzZWxlY3RlZCBjaGFuZ2VkLlxuICAgICAgICogQGluc3RhbmNlXG4gICAgICAgKlxuICAgICAgICogQGZpcmVzIFZpZGVvVHJhY2sjc2VsZWN0ZWRjaGFuZ2VcbiAgICAgICAqL1xuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksICdzZWxlY3RlZCcsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGVjdGVkO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdTZWxlY3RlZCkge1xuICAgICAgICAgIC8vIGFuIGludmFsaWQgb3IgdW5jaGFuZ2VkIHZhbHVlXG4gICAgICAgICAgaWYgKHR5cGVvZiBuZXdTZWxlY3RlZCAhPT0gJ2Jvb2xlYW4nIHx8IG5ld1NlbGVjdGVkID09PSBzZWxlY3RlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGVjdGVkID0gbmV3U2VsZWN0ZWQ7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQW4gZXZlbnQgdGhhdCBmaXJlcyB3aGVuIHNlbGVjdGVkIGNoYW5nZXMgb24gdGhpcyB0cmFjay4gVGhpcyBhbGxvd3NcbiAgICAgICAgICAgKiB0aGUgVmlkZW9UcmFja0xpc3QgdGhhdCBob2xkcyB0aGlzIHRyYWNrIHRvIGFjdCBhY2NvcmRpbmdseS5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqID4gTm90ZTogVGhpcyBpcyBub3QgcGFydCBvZiB0aGUgc3BlYyEgTmF0aXZlIHRyYWNrcyB3aWxsIGRvXG4gICAgICAgICAgICogICAgICAgICB0aGlzIGludGVybmFsbHkgd2l0aG91dCBhbiBldmVudC5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBldmVudCBWaWRlb1RyYWNrI3NlbGVjdGVkY2hhbmdlXG4gICAgICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICAgICAqL1xuXG4gICAgICAgICAgdGhpcy50cmlnZ2VyKCdzZWxlY3RlZGNoYW5nZScpO1xuICAgICAgICB9XG4gICAgICB9KTsgLy8gaWYgdGhlIHVzZXIgc2V0cyB0aGlzIHRyYWNrIHRvIHNlbGVjdGVkIHRoZW5cbiAgICAgIC8vIHNldCBzZWxlY3RlZCB0byB0aGF0IHRydWUgdmFsdWUgb3RoZXJ3aXNlXG4gICAgICAvLyB3ZSBrZWVwIGl0IGZhbHNlXG5cbiAgICAgIGlmIChzZXR0aW5ncy5zZWxlY3RlZCkge1xuICAgICAgICBfdGhpcy5zZWxlY3RlZCA9IHNldHRpbmdzLnNlbGVjdGVkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIFZpZGVvVHJhY2s7XG4gIH0oVHJhY2spO1xuXG4gIC8qKlxuICAgKiBAbWVtYmVyb2YgSFRNTFRyYWNrRWxlbWVudFxuICAgKiBAdHlwZWRlZiB7SFRNTFRyYWNrRWxlbWVudH5SZWFkeVN0YXRlfVxuICAgKiBAZW51bSB7bnVtYmVyfVxuICAgKi9cblxuICB2YXIgTk9ORSA9IDA7XG4gIHZhciBMT0FESU5HID0gMTtcbiAgdmFyIExPQURFRCA9IDI7XG4gIHZhciBFUlJPUiA9IDM7XG4gIC8qKlxuICAgKiBBIHNpbmdsZSB0cmFjayByZXByZXNlbnRlZCBpbiB0aGUgRE9NLlxuICAgKlxuICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9lbWJlZGRlZC1jb250ZW50Lmh0bWwjaHRtbHRyYWNrZWxlbWVudH1cbiAgICogQGV4dGVuZHMgRXZlbnRUYXJnZXRcbiAgICovXG5cbiAgdmFyIEhUTUxUcmFja0VsZW1lbnQgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfRXZlbnRUYXJnZXQpIHtcbiAgICBfaW5oZXJpdHNMb29zZShIVE1MVHJhY2tFbGVtZW50LCBfRXZlbnRUYXJnZXQpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucz17fVxuICAgICAqICAgICAgICBPYmplY3Qgb2Ygb3B0aW9uIG5hbWVzIGFuZCB2YWx1ZXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGVjaH0gb3B0aW9ucy50ZWNoXG4gICAgICogICAgICAgIEEgcmVmZXJlbmNlIHRvIHRoZSB0ZWNoIHRoYXQgb3ducyB0aGlzIEhUTUxUcmFja0VsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RleHRUcmFja35LaW5kfSBbb3B0aW9ucy5raW5kPSdzdWJ0aXRsZXMnXVxuICAgICAqICAgICAgICBBIHZhbGlkIHRleHQgdHJhY2sga2luZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGV4dFRyYWNrfk1vZGV9IFtvcHRpb25zLm1vZGU9J2Rpc2FibGVkJ11cbiAgICAgKiAgICAgICAgQSB2YWxpZCB0ZXh0IHRyYWNrIG1vZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuaWQ9J3Zqc190cmFja18nICsgR3VpZC5uZXdHVUlEKCldXG4gICAgICogICAgICAgIEEgdW5pcXVlIGlkIGZvciB0aGlzIFRleHRUcmFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYWJlbD0nJ11cbiAgICAgKiAgICAgICAgVGhlIG1lbnUgbGFiZWwgZm9yIHRoaXMgdHJhY2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubGFuZ3VhZ2U9JyddXG4gICAgICogICAgICAgIEEgdmFsaWQgdHdvIGNoYXJhY3RlciBsYW5ndWFnZSBjb2RlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnNyY2xhbmc9JyddXG4gICAgICogICAgICAgIEEgdmFsaWQgdHdvIGNoYXJhY3RlciBsYW5ndWFnZSBjb2RlLiBBbiBhbHRlcm5hdGl2ZSwgYnV0IGRlcHJpb3JpdGl6ZWRcbiAgICAgKiAgICAgICAgdmVzaW9uIG9mIGBvcHRpb25zLmxhbmd1YWdlYFxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnNyY11cbiAgICAgKiAgICAgICAgQSB1cmwgdG8gVGV4dFRyYWNrIGN1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmRlZmF1bHRdXG4gICAgICogICAgICAgIElmIHRoaXMgdHJhY2sgc2hvdWxkIGRlZmF1bHQgdG8gb24gb3Igb2ZmLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEhUTUxUcmFja0VsZW1lbnQob3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMgPSBfRXZlbnRUYXJnZXQuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgdmFyIHJlYWR5U3RhdGU7XG4gICAgICB2YXIgdHJhY2sgPSBuZXcgVGV4dFRyYWNrKG9wdGlvbnMpO1xuICAgICAgX3RoaXMua2luZCA9IHRyYWNrLmtpbmQ7XG4gICAgICBfdGhpcy5zcmMgPSB0cmFjay5zcmM7XG4gICAgICBfdGhpcy5zcmNsYW5nID0gdHJhY2subGFuZ3VhZ2U7XG4gICAgICBfdGhpcy5sYWJlbCA9IHRyYWNrLmxhYmVsO1xuICAgICAgX3RoaXMuZGVmYXVsdCA9IHRyYWNrLmRlZmF1bHQ7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlcm9mIEhUTUxUcmFja0VsZW1lbnRcbiAgICAgICAgICogQG1lbWJlciB7SFRNTFRyYWNrRWxlbWVudH5SZWFkeVN0YXRlfSByZWFkeVN0YXRlXG4gICAgICAgICAqICAgICAgICAgVGhlIGN1cnJlbnQgcmVhZHkgc3RhdGUgb2YgdGhlIHRyYWNrIGVsZW1lbnQuXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgcmVhZHlTdGF0ZToge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlYWR5U3RhdGU7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyb2YgSFRNTFRyYWNrRWxlbWVudFxuICAgICAgICAgKiBAbWVtYmVyIHtUZXh0VHJhY2t9IHRyYWNrXG4gICAgICAgICAqICAgICAgICAgVGhlIHVuZGVybHlpbmcgVGV4dFRyYWNrIG9iamVjdC5cbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICB0cmFjazoge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRyYWNrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZWFkeVN0YXRlID0gTk9ORTtcbiAgICAgIC8qKlxuICAgICAgICogQGxpc3RlbnMgVGV4dFRyYWNrI2xvYWRlZGRhdGFcbiAgICAgICAqIEBmaXJlcyBIVE1MVHJhY2tFbGVtZW50I2xvYWRcbiAgICAgICAqL1xuXG4gICAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRkYXRhJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZWFkeVN0YXRlID0gTE9BREVEO1xuXG4gICAgICAgIF90aGlzLnRyaWdnZXIoe1xuICAgICAgICAgIHR5cGU6ICdsb2FkJyxcbiAgICAgICAgICB0YXJnZXQ6IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIEhUTUxUcmFja0VsZW1lbnQ7XG4gIH0oRXZlbnRUYXJnZXQpO1xuXG4gIEhUTUxUcmFja0VsZW1lbnQucHJvdG90eXBlLmFsbG93ZWRFdmVudHNfID0ge1xuICAgIGxvYWQ6ICdsb2FkJ1xuICB9O1xuICBIVE1MVHJhY2tFbGVtZW50Lk5PTkUgPSBOT05FO1xuICBIVE1MVHJhY2tFbGVtZW50LkxPQURJTkcgPSBMT0FESU5HO1xuICBIVE1MVHJhY2tFbGVtZW50LkxPQURFRCA9IExPQURFRDtcbiAgSFRNTFRyYWNrRWxlbWVudC5FUlJPUiA9IEVSUk9SO1xuXG4gIC8qXG4gICAqIFRoaXMgZmlsZSBjb250YWlucyBhbGwgdHJhY2sgcHJvcGVydGllcyB0aGF0IGFyZSB1c2VkIGluXG4gICAqIHBsYXllci5qcywgdGVjaC5qcywgaHRtbDUuanMgYW5kIHBvc3NpYmx5IG90aGVyIHRlY2hzIGluIHRoZSBmdXR1cmUuXG4gICAqL1xuXG4gIHZhciBOT1JNQUwgPSB7XG4gICAgYXVkaW86IHtcbiAgICAgIExpc3RDbGFzczogQXVkaW9UcmFja0xpc3QsXG4gICAgICBUcmFja0NsYXNzOiBBdWRpb1RyYWNrLFxuICAgICAgY2FwaXRhbE5hbWU6ICdBdWRpbydcbiAgICB9LFxuICAgIHZpZGVvOiB7XG4gICAgICBMaXN0Q2xhc3M6IFZpZGVvVHJhY2tMaXN0LFxuICAgICAgVHJhY2tDbGFzczogVmlkZW9UcmFjayxcbiAgICAgIGNhcGl0YWxOYW1lOiAnVmlkZW8nXG4gICAgfSxcbiAgICB0ZXh0OiB7XG4gICAgICBMaXN0Q2xhc3M6IFRleHRUcmFja0xpc3QsXG4gICAgICBUcmFja0NsYXNzOiBUZXh0VHJhY2ssXG4gICAgICBjYXBpdGFsTmFtZTogJ1RleHQnXG4gICAgfVxuICB9O1xuICBPYmplY3Qua2V5cyhOT1JNQUwpLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICBOT1JNQUxbdHlwZV0uZ2V0dGVyTmFtZSA9IHR5cGUgKyBcIlRyYWNrc1wiO1xuICAgIE5PUk1BTFt0eXBlXS5wcml2YXRlTmFtZSA9IHR5cGUgKyBcIlRyYWNrc19cIjtcbiAgfSk7XG4gIHZhciBSRU1PVEUgPSB7XG4gICAgcmVtb3RlVGV4dDoge1xuICAgICAgTGlzdENsYXNzOiBUZXh0VHJhY2tMaXN0LFxuICAgICAgVHJhY2tDbGFzczogVGV4dFRyYWNrLFxuICAgICAgY2FwaXRhbE5hbWU6ICdSZW1vdGVUZXh0JyxcbiAgICAgIGdldHRlck5hbWU6ICdyZW1vdGVUZXh0VHJhY2tzJyxcbiAgICAgIHByaXZhdGVOYW1lOiAncmVtb3RlVGV4dFRyYWNrc18nXG4gICAgfSxcbiAgICByZW1vdGVUZXh0RWw6IHtcbiAgICAgIExpc3RDbGFzczogSHRtbFRyYWNrRWxlbWVudExpc3QsXG4gICAgICBUcmFja0NsYXNzOiBIVE1MVHJhY2tFbGVtZW50LFxuICAgICAgY2FwaXRhbE5hbWU6ICdSZW1vdGVUZXh0VHJhY2tFbHMnLFxuICAgICAgZ2V0dGVyTmFtZTogJ3JlbW90ZVRleHRUcmFja0VscycsXG4gICAgICBwcml2YXRlTmFtZTogJ3JlbW90ZVRleHRUcmFja0Vsc18nXG4gICAgfVxuICB9O1xuICB2YXIgQUxMID0gbWVyZ2VPcHRpb25zKE5PUk1BTCwgUkVNT1RFKTtcbiAgUkVNT1RFLm5hbWVzID0gT2JqZWN0LmtleXMoUkVNT1RFKTtcbiAgTk9STUFMLm5hbWVzID0gT2JqZWN0LmtleXMoTk9STUFMKTtcbiAgQUxMLm5hbWVzID0gW10uY29uY2F0KFJFTU9URS5uYW1lcykuY29uY2F0KE5PUk1BTC5uYW1lcyk7XG5cbiAgdmFyIHZ0dCA9IHt9O1xuXG4gIC8qKlxuICAgKiBBbiBPYmplY3QgY29udGFpbmluZyBhIHN0cnVjdHVyZSBsaWtlOiBge3NyYzogJ3VybCcsIHR5cGU6ICdtaW1ldHlwZSd9YCBvciBzdHJpbmdcbiAgICogdGhhdCBqdXN0IGNvbnRhaW5zIHRoZSBzcmMgdXJsIGFsb25lLlxuICAgKiAqIGB2YXIgU291cmNlT2JqZWN0ID0ge3NyYzogJ2h0dHA6Ly9leC5jb20vdmlkZW8ubXA0JywgdHlwZTogJ3ZpZGVvL21wNCd9O2BcbiAgICAgKiBgdmFyIFNvdXJjZVN0cmluZyA9ICdodHRwOi8vZXhhbXBsZS5jb20vc29tZS12aWRlby5tcDQnO2BcbiAgICpcbiAgICogQHR5cGVkZWYge09iamVjdHxzdHJpbmd9IFRlY2h+U291cmNlT2JqZWN0XG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBzcmNcbiAgICogICAgICAgICAgIFRoZSB1cmwgdG8gdGhlIHNvdXJjZVxuICAgKlxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZVxuICAgKiAgICAgICAgICAgVGhlIG1pbWUgdHlwZSBvZiB0aGUgc291cmNlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHVzZWQgYnkge0BsaW5rIFRlY2h9IHRvIGNyZWF0ZSBhIG5ldyB7QGxpbmsgVGV4dFRyYWNrfS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQHBhcmFtIHtUZWNofSBzZWxmXG4gICAqICAgICAgICBBbiBpbnN0YW5jZSBvZiB0aGUgVGVjaCBjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtpbmRcbiAgICogICAgICAgIGBUZXh0VHJhY2tgIGtpbmQgKHN1YnRpdGxlcywgY2FwdGlvbnMsIGRlc2NyaXB0aW9ucywgY2hhcHRlcnMsIG9yIG1ldGFkYXRhKVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xhYmVsXVxuICAgKiAgICAgICAgTGFiZWwgdG8gaWRlbnRpZnkgdGhlIHRleHQgdHJhY2tcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtsYW5ndWFnZV1cbiAgICogICAgICAgIFR3byBsZXR0ZXIgbGFuZ3VhZ2UgYWJicmV2aWF0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV1cbiAgICogICAgICAgIEFuIG9iamVjdCB3aXRoIGFkZGl0aW9uYWwgdGV4dCB0cmFjayBvcHRpb25zXG4gICAqXG4gICAqIEByZXR1cm4ge1RleHRUcmFja31cbiAgICogICAgICAgICAgVGhlIHRleHQgdHJhY2sgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICovXG5cbiAgZnVuY3Rpb24gY3JlYXRlVHJhY2tIZWxwZXIoc2VsZiwga2luZCwgbGFiZWwsIGxhbmd1YWdlLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIHZhciB0cmFja3MgPSBzZWxmLnRleHRUcmFja3MoKTtcbiAgICBvcHRpb25zLmtpbmQgPSBraW5kO1xuXG4gICAgaWYgKGxhYmVsKSB7XG4gICAgICBvcHRpb25zLmxhYmVsID0gbGFiZWw7XG4gICAgfVxuXG4gICAgaWYgKGxhbmd1YWdlKSB7XG4gICAgICBvcHRpb25zLmxhbmd1YWdlID0gbGFuZ3VhZ2U7XG4gICAgfVxuXG4gICAgb3B0aW9ucy50ZWNoID0gc2VsZjtcbiAgICB2YXIgdHJhY2sgPSBuZXcgQUxMLnRleHQuVHJhY2tDbGFzcyhvcHRpb25zKTtcbiAgICB0cmFja3MuYWRkVHJhY2sodHJhY2spO1xuICAgIHJldHVybiB0cmFjaztcbiAgfVxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgYmFzZSBjbGFzcyBmb3IgbWVkaWEgcGxheWJhY2sgdGVjaG5vbG9neSBjb250cm9sbGVycywgc3VjaCBhc1xuICAgKiB7QGxpbmsgRmxhc2h9IGFuZCB7QGxpbmsgSFRNTDV9XG4gICAqXG4gICAqIEBleHRlbmRzIENvbXBvbmVudFxuICAgKi9cblxuXG4gIHZhciBUZWNoID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAgIF9pbmhlcml0c0xvb3NlKFRlY2gsIF9Db21wb25lbnQpO1xuXG4gICAgLyoqXG4gICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBUZWNoLlxuICAgICpcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICpcbiAgICAqIEBwYXJhbSB7Q29tcG9uZW50flJlYWR5Q2FsbGJhY2t9IHJlYWR5XG4gICAgKiAgICAgICAgQ2FsbGJhY2sgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBgSFRNTDVgIFRlY2ggaXMgcmVhZHkuXG4gICAgKi9cbiAgICBmdW5jdGlvbiBUZWNoKG9wdGlvbnMsIHJlYWR5KSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuXG4gICAgICBpZiAocmVhZHkgPT09IHZvaWQgMCkge1xuICAgICAgICByZWFkeSA9IGZ1bmN0aW9uIHJlYWR5KCkge307XG4gICAgICB9XG5cbiAgICAgIC8vIHdlIGRvbid0IHdhbnQgdGhlIHRlY2ggdG8gcmVwb3J0IHVzZXIgYWN0aXZpdHkgYXV0b21hdGljYWxseS5cbiAgICAgIC8vIFRoaXMgaXMgZG9uZSBtYW51YWxseSBpbiBhZGRDb250cm9sc0xpc3RlbmVyc1xuICAgICAgb3B0aW9ucy5yZXBvcnRUb3VjaEFjdGl2aXR5ID0gZmFsc2U7XG4gICAgICBfdGhpcyA9IF9Db21wb25lbnQuY2FsbCh0aGlzLCBudWxsLCBvcHRpb25zLCByZWFkeSkgfHwgdGhpczsgLy8ga2VlcCB0cmFjayBvZiB3aGV0aGVyIHRoZSBjdXJyZW50IHNvdXJjZSBoYXMgcGxheWVkIGF0IGFsbCB0b1xuICAgICAgLy8gaW1wbGVtZW50IGEgdmVyeSBsaW1pdGVkIHBsYXllZCgpXG5cbiAgICAgIF90aGlzLmhhc1N0YXJ0ZWRfID0gZmFsc2U7XG5cbiAgICAgIF90aGlzLm9uKCdwbGF5aW5nJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhhc1N0YXJ0ZWRfID0gdHJ1ZTtcbiAgICAgIH0pO1xuXG4gICAgICBfdGhpcy5vbignbG9hZHN0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhhc1N0YXJ0ZWRfID0gZmFsc2U7XG4gICAgICB9KTtcblxuICAgICAgQUxMLm5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIHByb3BzID0gQUxMW25hbWVdO1xuXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnNbcHJvcHMuZ2V0dGVyTmFtZV0pIHtcbiAgICAgICAgICBfdGhpc1twcm9wcy5wcml2YXRlTmFtZV0gPSBvcHRpb25zW3Byb3BzLmdldHRlck5hbWVdO1xuICAgICAgICB9XG4gICAgICB9KTsgLy8gTWFudWFsbHkgdHJhY2sgcHJvZ3Jlc3MgaW4gY2FzZXMgd2hlcmUgdGhlIGJyb3dzZXIvZmxhc2ggcGxheWVyIGRvZXNuJ3QgcmVwb3J0IGl0LlxuXG4gICAgICBpZiAoIV90aGlzLmZlYXR1cmVzUHJvZ3Jlc3NFdmVudHMpIHtcbiAgICAgICAgX3RoaXMubWFudWFsUHJvZ3Jlc3NPbigpO1xuICAgICAgfSAvLyBNYW51YWxseSB0cmFjayB0aW1ldXBkYXRlcyBpbiBjYXNlcyB3aGVyZSB0aGUgYnJvd3Nlci9mbGFzaCBwbGF5ZXIgZG9lc24ndCByZXBvcnQgaXQuXG5cblxuICAgICAgaWYgKCFfdGhpcy5mZWF0dXJlc1RpbWV1cGRhdGVFdmVudHMpIHtcbiAgICAgICAgX3RoaXMubWFudWFsVGltZVVwZGF0ZXNPbigpO1xuICAgICAgfVxuXG4gICAgICBbJ1RleHQnLCAnQXVkaW8nLCAnVmlkZW8nXS5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykge1xuICAgICAgICBpZiAob3B0aW9uc1tcIm5hdGl2ZVwiICsgdHJhY2sgKyBcIlRyYWNrc1wiXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBfdGhpc1tcImZlYXR1cmVzTmF0aXZlXCIgKyB0cmFjayArIFwiVHJhY2tzXCJdID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAob3B0aW9ucy5uYXRpdmVDYXB0aW9ucyA9PT0gZmFsc2UgfHwgb3B0aW9ucy5uYXRpdmVUZXh0VHJhY2tzID09PSBmYWxzZSkge1xuICAgICAgICBfdGhpcy5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5uYXRpdmVDYXB0aW9ucyA9PT0gdHJ1ZSB8fCBvcHRpb25zLm5hdGl2ZVRleHRUcmFja3MgPT09IHRydWUpIHtcbiAgICAgICAgX3RoaXMuZmVhdHVyZXNOYXRpdmVUZXh0VHJhY2tzID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFfdGhpcy5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MpIHtcbiAgICAgICAgX3RoaXMuZW11bGF0ZVRleHRUcmFja3MoKTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMuYXV0b1JlbW90ZVRleHRUcmFja3NfID0gbmV3IEFMTC50ZXh0Lkxpc3RDbGFzcygpO1xuXG4gICAgICBfdGhpcy5pbml0VHJhY2tMaXN0ZW5lcnMoKTsgLy8gVHVybiBvbiBjb21wb25lbnQgdGFwIGV2ZW50cyBvbmx5IGlmIG5vdCB1c2luZyBuYXRpdmUgY29udHJvbHNcblxuXG4gICAgICBpZiAoIW9wdGlvbnMubmF0aXZlQ29udHJvbHNGb3JUb3VjaCkge1xuICAgICAgICBfdGhpcy5lbWl0VGFwRXZlbnRzKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChfdGhpcy5jb25zdHJ1Y3Rvcikge1xuICAgICAgICBfdGhpcy5uYW1lXyA9IF90aGlzLmNvbnN0cnVjdG9yLm5hbWUgfHwgJ1Vua25vd24gVGVjaCc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsIGZ1bmN0aW9uIHRvIHRyaWdnZXIgc291cmNlIHNldCBpbiBhIHdheSB0aGF0IHdpbGwgYWxsb3cgcGxheWVyXG4gICAgICogdG8gcmUtdHJpZ2dlciBpZiB0aGUgcGxheWVyIG9yIHRlY2ggYXJlIG5vdCByZWFkeSB5ZXQuXG4gICAgICpcbiAgICAgKiBAZmlyZXMgVGVjaCNzb3VyY2VzZXRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjIFRoZSBzb3VyY2Ugc3RyaW5nIGF0IHRoZSB0aW1lIG9mIHRoZSBzb3VyY2UgY2hhbmdpbmcuXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBUZWNoLnByb3RvdHlwZTtcblxuICAgIF9wcm90by50cmlnZ2VyU291cmNlc2V0ID0gZnVuY3Rpb24gdHJpZ2dlclNvdXJjZXNldChzcmMpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAoIXRoaXMuaXNSZWFkeV8pIHtcbiAgICAgICAgLy8gb24gaW5pdGlhbCByZWFkeSB3ZSBoYXZlIHRvIHRyaWdnZXIgc291cmNlIHNldFxuICAgICAgICAvLyAxbXMgYWZ0ZXIgcmVhZHkgc28gdGhhdCBwbGF5ZXIgY2FuIHdhdGNoIGZvciBpdC5cbiAgICAgICAgdGhpcy5vbmUoJ3JlYWR5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczIuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMyLnRyaWdnZXJTb3VyY2VzZXQoc3JjKTtcbiAgICAgICAgICB9LCAxKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEZpcmVkIHdoZW4gdGhlIHNvdXJjZSBpcyBzZXQgb24gdGhlIHRlY2ggY2F1c2luZyB0aGUgbWVkaWEgZWxlbWVudFxuICAgICAgICogdG8gcmVsb2FkLlxuICAgICAgICpcbiAgICAgICAqIEBzZWUge0BsaW5rIFBsYXllciNldmVudDpzb3VyY2VzZXR9XG4gICAgICAgKiBAZXZlbnQgVGVjaCNzb3VyY2VzZXRcbiAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAqL1xuXG5cbiAgICAgIHRoaXMudHJpZ2dlcih7XG4gICAgICAgIHNyYzogc3JjLFxuICAgICAgICB0eXBlOiAnc291cmNlc2V0J1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qIEZhbGxiYWNrcyBmb3IgdW5zdXBwb3J0ZWQgZXZlbnQgdHlwZXNcbiAgICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG4gICAgLyoqXG4gICAgICogUG9seWZpbGwgdGhlIGBwcm9ncmVzc2AgZXZlbnQgZm9yIGJyb3dzZXJzIHRoYXQgZG9uJ3Qgc3VwcG9ydCBpdCBuYXRpdmVseS5cbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIFRlY2gjdHJhY2tQcm9ncmVzc31cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ubWFudWFsUHJvZ3Jlc3NPbiA9IGZ1bmN0aW9uIG1hbnVhbFByb2dyZXNzT24oKSB7XG4gICAgICB0aGlzLm9uKCdkdXJhdGlvbmNoYW5nZScsIHRoaXMub25EdXJhdGlvbkNoYW5nZSk7XG4gICAgICB0aGlzLm1hbnVhbFByb2dyZXNzID0gdHJ1ZTsgLy8gVHJpZ2dlciBwcm9ncmVzcyB3YXRjaGluZyB3aGVuIGEgc291cmNlIGJlZ2lucyBsb2FkaW5nXG5cbiAgICAgIHRoaXMub25lKCdyZWFkeScsIHRoaXMudHJhY2tQcm9ncmVzcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFR1cm4gb2ZmIHRoZSBwb2x5ZmlsbCBmb3IgYHByb2dyZXNzYCBldmVudHMgdGhhdCB3YXMgY3JlYXRlZCBpblxuICAgICAqIHtAbGluayBUZWNoI21hbnVhbFByb2dyZXNzT259XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLm1hbnVhbFByb2dyZXNzT2ZmID0gZnVuY3Rpb24gbWFudWFsUHJvZ3Jlc3NPZmYoKSB7XG4gICAgICB0aGlzLm1hbnVhbFByb2dyZXNzID0gZmFsc2U7XG4gICAgICB0aGlzLnN0b3BUcmFja2luZ1Byb2dyZXNzKCk7XG4gICAgICB0aGlzLm9mZignZHVyYXRpb25jaGFuZ2UnLCB0aGlzLm9uRHVyYXRpb25DaGFuZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gdHJpZ2dlciBhIGBwcm9ncmVzc2AgZXZlbnQgd2hlbiB0aGUgYnVmZmVyZWQgcGVyY2VudCBjaGFuZ2VzLiBJdFxuICAgICAqIHNldHMgYW4gaW50ZXJ2YWwgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBldmVyeSA1MDAgbWlsbGlzZWNvbmRzIHRvIGNoZWNrIGlmIHRoZVxuICAgICAqIGJ1ZmZlciBlbmQgcGVyY2VudCBoYXMgY2hhbmdlZC5cbiAgICAgKlxuICAgICAqID4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYnkge0BsaW5rIFRlY2gjbWFudWFsUHJvZ3Jlc3NPbn1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIFRoZSBgcmVhZHlgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgdG8gcnVuLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgVGVjaCNyZWFkeVxuICAgICAqIEBmaXJlcyBUZWNoI3Byb2dyZXNzXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnRyYWNrUHJvZ3Jlc3MgPSBmdW5jdGlvbiB0cmFja1Byb2dyZXNzKGV2ZW50KSB7XG4gICAgICB0aGlzLnN0b3BUcmFja2luZ1Byb2dyZXNzKCk7XG4gICAgICB0aGlzLnByb2dyZXNzSW50ZXJ2YWwgPSB0aGlzLnNldEludGVydmFsKGJpbmQodGhpcywgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBEb24ndCB0cmlnZ2VyIHVubGVzcyBidWZmZXJlZCBhbW91bnQgaXMgZ3JlYXRlciB0aGFuIGxhc3QgdGltZVxuICAgICAgICB2YXIgbnVtQnVmZmVyZWRQZXJjZW50ID0gdGhpcy5idWZmZXJlZFBlcmNlbnQoKTtcblxuICAgICAgICBpZiAodGhpcy5idWZmZXJlZFBlcmNlbnRfICE9PSBudW1CdWZmZXJlZFBlcmNlbnQpIHtcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBTZWUge0BsaW5rIFBsYXllciNwcm9ncmVzc31cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBldmVudCBUZWNoI3Byb2dyZXNzXG4gICAgICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICAgICAqL1xuICAgICAgICAgIHRoaXMudHJpZ2dlcigncHJvZ3Jlc3MnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYnVmZmVyZWRQZXJjZW50XyA9IG51bUJ1ZmZlcmVkUGVyY2VudDtcblxuICAgICAgICBpZiAobnVtQnVmZmVyZWRQZXJjZW50ID09PSAxKSB7XG4gICAgICAgICAgdGhpcy5zdG9wVHJhY2tpbmdQcm9ncmVzcygpO1xuICAgICAgICB9XG4gICAgICB9KSwgNTAwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIG91ciBpbnRlcm5hbCBkdXJhdGlvbiBvbiBhIGBkdXJhdGlvbmNoYW5nZWAgZXZlbnQgYnkgY2FsbGluZ1xuICAgICAqIHtAbGluayBUZWNoI2R1cmF0aW9ufS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIFRoZSBgZHVyYXRpb25jaGFuZ2VgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgdG8gcnVuLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgVGVjaCNkdXJhdGlvbmNoYW5nZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5vbkR1cmF0aW9uQ2hhbmdlID0gZnVuY3Rpb24gb25EdXJhdGlvbkNoYW5nZShldmVudCkge1xuICAgICAgdGhpcy5kdXJhdGlvbl8gPSB0aGlzLmR1cmF0aW9uKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhbmQgY3JlYXRlIGEgYFRpbWVSYW5nZWAgb2JqZWN0IGZvciBidWZmZXJpbmcuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtUaW1lUmFuZ2V9XG4gICAgICogICAgICAgICBUaGUgdGltZSByYW5nZSBvYmplY3QgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uYnVmZmVyZWQgPSBmdW5jdGlvbiBidWZmZXJlZCgpIHtcbiAgICAgIHJldHVybiBjcmVhdGVUaW1lUmFuZ2VzKDAsIDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBlcmNlbnRhZ2Ugb2YgdGhlIGN1cnJlbnQgdmlkZW8gdGhhdCBpcyBjdXJyZW50bHkgYnVmZmVyZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICogICAgICAgICBBIG51bWJlciBmcm9tIDAgdG8gMSB0aGF0IHJlcHJlc2VudHMgdGhlIGRlY2ltYWwgcGVyY2VudGFnZSBvZiB0aGVcbiAgICAgKiAgICAgICAgIHZpZGVvIHRoYXQgaXMgYnVmZmVyZWQuXG4gICAgICpcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uYnVmZmVyZWRQZXJjZW50ID0gZnVuY3Rpb24gYnVmZmVyZWRQZXJjZW50JCQxKCkge1xuICAgICAgcmV0dXJuIGJ1ZmZlcmVkUGVyY2VudCh0aGlzLmJ1ZmZlcmVkKCksIHRoaXMuZHVyYXRpb25fKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHVybiBvZmYgdGhlIHBvbHlmaWxsIGZvciBgcHJvZ3Jlc3NgIGV2ZW50cyB0aGF0IHdhcyBjcmVhdGVkIGluXG4gICAgICoge0BsaW5rIFRlY2gjbWFudWFsUHJvZ3Jlc3NPbn1cbiAgICAgKiBTdG9wIG1hbnVhbGx5IHRyYWNraW5nIHByb2dyZXNzIGV2ZW50cyBieSBjbGVhcmluZyB0aGUgaW50ZXJ2YWwgdGhhdCB3YXMgc2V0IGluXG4gICAgICoge0BsaW5rIFRlY2gjdHJhY2tQcm9ncmVzc30uXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnN0b3BUcmFja2luZ1Byb2dyZXNzID0gZnVuY3Rpb24gc3RvcFRyYWNraW5nUHJvZ3Jlc3MoKSB7XG4gICAgICB0aGlzLmNsZWFySW50ZXJ2YWwodGhpcy5wcm9ncmVzc0ludGVydmFsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUG9seWZpbGwgdGhlIGB0aW1ldXBkYXRlYCBldmVudCBmb3IgYnJvd3NlcnMgdGhhdCBkb24ndCBzdXBwb3J0IGl0LlxuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgVGVjaCN0cmFja0N1cnJlbnRUaW1lfVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5tYW51YWxUaW1lVXBkYXRlc09uID0gZnVuY3Rpb24gbWFudWFsVGltZVVwZGF0ZXNPbigpIHtcbiAgICAgIHRoaXMubWFudWFsVGltZVVwZGF0ZXMgPSB0cnVlO1xuICAgICAgdGhpcy5vbigncGxheScsIHRoaXMudHJhY2tDdXJyZW50VGltZSk7XG4gICAgICB0aGlzLm9uKCdwYXVzZScsIHRoaXMuc3RvcFRyYWNraW5nQ3VycmVudFRpbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUdXJuIG9mZiB0aGUgcG9seWZpbGwgZm9yIGB0aW1ldXBkYXRlYCBldmVudHMgdGhhdCB3YXMgY3JlYXRlZCBpblxuICAgICAqIHtAbGluayBUZWNoI21hbnVhbFRpbWVVcGRhdGVzT259XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLm1hbnVhbFRpbWVVcGRhdGVzT2ZmID0gZnVuY3Rpb24gbWFudWFsVGltZVVwZGF0ZXNPZmYoKSB7XG4gICAgICB0aGlzLm1hbnVhbFRpbWVVcGRhdGVzID0gZmFsc2U7XG4gICAgICB0aGlzLnN0b3BUcmFja2luZ0N1cnJlbnRUaW1lKCk7XG4gICAgICB0aGlzLm9mZigncGxheScsIHRoaXMudHJhY2tDdXJyZW50VGltZSk7XG4gICAgICB0aGlzLm9mZigncGF1c2UnLCB0aGlzLnN0b3BUcmFja2luZ0N1cnJlbnRUaW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB1cCBhbiBpbnRlcnZhbCBmdW5jdGlvbiB0byB0cmFjayBjdXJyZW50IHRpbWUgYW5kIHRyaWdnZXIgYHRpbWV1cGRhdGVgIGV2ZXJ5XG4gICAgICogMjUwIG1pbGxpc2Vjb25kcy5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIFRlY2gjcGxheVxuICAgICAqIEB0cmlnZ2VycyBUZWNoI3RpbWV1cGRhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udHJhY2tDdXJyZW50VGltZSA9IGZ1bmN0aW9uIHRyYWNrQ3VycmVudFRpbWUoKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50VGltZUludGVydmFsKSB7XG4gICAgICAgIHRoaXMuc3RvcFRyYWNraW5nQ3VycmVudFRpbWUoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jdXJyZW50VGltZUludGVydmFsID0gdGhpcy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmlnZ2VyZWQgYXQgYW4gaW50ZXJ2YWwgb2YgMjUwbXMgdG8gaW5kaWNhdGVkIHRoYXQgdGltZSBpcyBwYXNzaW5nIGluIHRoZSB2aWRlby5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFRlY2gjdGltZXVwZGF0ZVxuICAgICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRyaWdnZXIoe1xuICAgICAgICAgIHR5cGU6ICd0aW1ldXBkYXRlJyxcbiAgICAgICAgICB0YXJnZXQ6IHRoaXMsXG4gICAgICAgICAgbWFudWFsbHlUcmlnZ2VyZWQ6IHRydWVcbiAgICAgICAgfSk7IC8vIDQyID0gMjQgZnBzIC8vIDI1MCBpcyB3aGF0IFdlYmtpdCB1c2VzIC8vIEZGIHVzZXMgMTVcbiAgICAgIH0sIDI1MCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3AgdGhlIGludGVydmFsIGZ1bmN0aW9uIGNyZWF0ZWQgaW4ge0BsaW5rIFRlY2gjdHJhY2tDdXJyZW50VGltZX0gc28gdGhhdCB0aGVcbiAgICAgKiBgdGltZXVwZGF0ZWAgZXZlbnQgaXMgbm8gbG9uZ2VyIHRyaWdnZXJlZC5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIHtUZWNoI3BhdXNlfVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zdG9wVHJhY2tpbmdDdXJyZW50VGltZSA9IGZ1bmN0aW9uIHN0b3BUcmFja2luZ0N1cnJlbnRUaW1lKCkge1xuICAgICAgdGhpcy5jbGVhckludGVydmFsKHRoaXMuY3VycmVudFRpbWVJbnRlcnZhbCk7IC8vICMxMDAyIC0gaWYgdGhlIHZpZGVvIGVuZHMgcmlnaHQgYmVmb3JlIHRoZSBuZXh0IHRpbWV1cGRhdGUgd291bGQgaGFwcGVuLFxuICAgICAgLy8gdGhlIHByb2dyZXNzIGJhciB3b24ndCBtYWtlIGl0IGFsbCB0aGUgd2F5IHRvIHRoZSBlbmRcblxuICAgICAgdGhpcy50cmlnZ2VyKHtcbiAgICAgICAgdHlwZTogJ3RpbWV1cGRhdGUnLFxuICAgICAgICB0YXJnZXQ6IHRoaXMsXG4gICAgICAgIG1hbnVhbGx5VHJpZ2dlcmVkOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHVybiBvZmYgYWxsIGV2ZW50IHBvbHlmaWxscywgY2xlYXIgdGhlIGBUZWNoYHMge0BsaW5rIEF1ZGlvVHJhY2tMaXN0fSxcbiAgICAgKiB7QGxpbmsgVmlkZW9UcmFja0xpc3R9LCBhbmQge0BsaW5rIFRleHRUcmFja0xpc3R9LCBhbmQgZGlzcG9zZSBvZiB0aGlzIFRlY2guXG4gICAgICpcbiAgICAgKiBAZmlyZXMgQ29tcG9uZW50I2Rpc3Bvc2VcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAvLyBjbGVhciBvdXQgYWxsIHRyYWNrcyBiZWNhdXNlIHdlIGNhbid0IHJldXNlIHRoZW0gYmV0d2VlbiB0ZWNoc1xuICAgICAgdGhpcy5jbGVhclRyYWNrcyhOT1JNQUwubmFtZXMpOyAvLyBUdXJuIG9mZiBhbnkgbWFudWFsIHByb2dyZXNzIG9yIHRpbWV1cGRhdGUgdHJhY2tpbmdcblxuICAgICAgaWYgKHRoaXMubWFudWFsUHJvZ3Jlc3MpIHtcbiAgICAgICAgdGhpcy5tYW51YWxQcm9ncmVzc09mZigpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5tYW51YWxUaW1lVXBkYXRlcykge1xuICAgICAgICB0aGlzLm1hbnVhbFRpbWVVcGRhdGVzT2ZmKCk7XG4gICAgICB9XG5cbiAgICAgIF9Db21wb25lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXIgb3V0IGEgc2luZ2xlIGBUcmFja0xpc3RgIG9yIGFuIGFycmF5IG9mIGBUcmFja0xpc3RzYCBnaXZlbiB0aGVpciBuYW1lcy5cbiAgICAgKlxuICAgICAqID4gTm90ZTogVGVjaHMgd2l0aG91dCBzb3VyY2UgaGFuZGxlcnMgc2hvdWxkIGNhbGwgdGhpcyBiZXR3ZWVuIHNvdXJjZXMgZm9yIGB2aWRlb2BcbiAgICAgKiAgICAgICAgICYgYGF1ZGlvYCB0cmFja3MuIFlvdSBkb24ndCB3YW50IHRvIHVzZSB0aGVtIGJldHdlZW4gdHJhY2tzIVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXXxzdHJpbmd9IHR5cGVzXG4gICAgICogICAgICAgIFRyYWNrTGlzdCBuYW1lcyB0byBjbGVhciwgdmFsaWQgbmFtZXMgYXJlIGB2aWRlb2AsIGBhdWRpb2AsIGFuZFxuICAgICAqICAgICAgICBgdGV4dGAuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNsZWFyVHJhY2tzID0gZnVuY3Rpb24gY2xlYXJUcmFja3ModHlwZXMpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB0eXBlcyA9IFtdLmNvbmNhdCh0eXBlcyk7IC8vIGNsZWFyIG91dCBhbGwgdHJhY2tzIGJlY2F1c2Ugd2UgY2FuJ3QgcmV1c2UgdGhlbSBiZXR3ZWVuIHRlY2hzXG5cbiAgICAgIHR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgdmFyIGxpc3QgPSBfdGhpczNbdHlwZSArIFwiVHJhY2tzXCJdKCkgfHwgW107XG4gICAgICAgIHZhciBpID0gbGlzdC5sZW5ndGg7XG5cbiAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgIHZhciB0cmFjayA9IGxpc3RbaV07XG5cbiAgICAgICAgICBpZiAodHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICBfdGhpczMucmVtb3ZlUmVtb3RlVGV4dFRyYWNrKHRyYWNrKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsaXN0LnJlbW92ZVRyYWNrKHRyYWNrKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbnkgVGV4dFRyYWNrcyBhZGRlZCB2aWEgYWRkUmVtb3RlVGV4dFRyYWNrIHRoYXQgYXJlXG4gICAgICogZmxhZ2dlZCBmb3IgYXV0b21hdGljIGdhcmJhZ2UgY29sbGVjdGlvblxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jbGVhbnVwQXV0b1RleHRUcmFja3MgPSBmdW5jdGlvbiBjbGVhbnVwQXV0b1RleHRUcmFja3MoKSB7XG4gICAgICB2YXIgbGlzdCA9IHRoaXMuYXV0b1JlbW90ZVRleHRUcmFja3NfIHx8IFtdO1xuICAgICAgdmFyIGkgPSBsaXN0Lmxlbmd0aDtcblxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICB2YXIgdHJhY2sgPSBsaXN0W2ldO1xuICAgICAgICB0aGlzLnJlbW92ZVJlbW90ZVRleHRUcmFjayh0cmFjayk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSB0ZWNoLCB3aGljaCB3aWxsIHJlbW92ZXMgYWxsIHNvdXJjZXMgYW5kIHJlc2V0IHRoZSBpbnRlcm5hbCByZWFkeVN0YXRlLlxuICAgICAqXG4gICAgICogQGFic3RyYWN0XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoKSB7fVxuICAgIC8qKlxuICAgICAqIEdldCBvciBzZXQgYW4gZXJyb3Igb24gdGhlIFRlY2guXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge01lZGlhRXJyb3J9IFtlcnJdXG4gICAgICogICAgICAgIEVycm9yIHRvIHNldCBvbiB0aGUgVGVjaFxuICAgICAqXG4gICAgICogQHJldHVybiB7TWVkaWFFcnJvcnxudWxsfVxuICAgICAqICAgICAgICAgVGhlIGN1cnJlbnQgZXJyb3Igb2JqZWN0IG9uIHRoZSB0ZWNoLCBvciBudWxsIGlmIHRoZXJlIGlzbid0IG9uZS5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZXJyb3IgPSBmdW5jdGlvbiBlcnJvcihlcnIpIHtcbiAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmVycm9yXyA9IG5ldyBNZWRpYUVycm9yKGVycik7XG4gICAgICAgIHRoaXMudHJpZ2dlcignZXJyb3InKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuZXJyb3JfO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBgVGltZVJhbmdlYHMgdGhhdCBoYXZlIGJlZW4gcGxheWVkIHRocm91Z2ggZm9yIHRoZSBjdXJyZW50IHNvdXJjZS5cbiAgICAgKlxuICAgICAqID4gTk9URTogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBpbmNvbXBsZXRlLiBJdCBkb2VzIG5vdCB0cmFjayB0aGUgcGxheWVkIGBUaW1lUmFuZ2VgLlxuICAgICAqICAgICAgICAgSXQgb25seSBjaGVja3Mgd2hldGhlciB0aGUgc291cmNlIGhhcyBwbGF5ZWQgYXQgYWxsIG9yIG5vdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1RpbWVSYW5nZX1cbiAgICAgKiAgICAgICAgIC0gQSBzaW5nbGUgdGltZSByYW5nZSBpZiB0aGlzIHZpZGVvIGhhcyBwbGF5ZWRcbiAgICAgKiAgICAgICAgIC0gQW4gZW1wdHkgc2V0IG9mIHJhbmdlcyBpZiBub3QuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnBsYXllZCA9IGZ1bmN0aW9uIHBsYXllZCgpIHtcbiAgICAgIGlmICh0aGlzLmhhc1N0YXJ0ZWRfKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVUaW1lUmFuZ2VzKDAsIDApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY3JlYXRlVGltZVJhbmdlcygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYXVzZXMgYSBtYW51YWwgdGltZSB1cGRhdGUgdG8gb2NjdXIgaWYge0BsaW5rIFRlY2gjbWFudWFsVGltZVVwZGF0ZXNPbn0gd2FzXG4gICAgICogcHJldmlvdXNseSBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAZmlyZXMgVGVjaCN0aW1ldXBkYXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnNldEN1cnJlbnRUaW1lID0gZnVuY3Rpb24gc2V0Q3VycmVudFRpbWUoKSB7XG4gICAgICAvLyBpbXByb3ZlIHRoZSBhY2N1cmFjeSBvZiBtYW51YWwgdGltZXVwZGF0ZXNcbiAgICAgIGlmICh0aGlzLm1hbnVhbFRpbWVVcGRhdGVzKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG1hbnVhbCBgdGltZXVwZGF0ZWAgZXZlbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBUZWNoI3RpbWV1cGRhdGVcbiAgICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50cmlnZ2VyKHtcbiAgICAgICAgICB0eXBlOiAndGltZXVwZGF0ZScsXG4gICAgICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgICAgIG1hbnVhbGx5VHJpZ2dlcmVkOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUdXJuIG9uIGxpc3RlbmVycyBmb3Ige0BsaW5rIFZpZGVvVHJhY2tMaXN0fSwge0BsaW5rIHtBdWRpb1RyYWNrTGlzdH0sIGFuZFxuICAgICAqIHtAbGluayBUZXh0VHJhY2tMaXN0fSBldmVudHMuXG4gICAgICpcbiAgICAgKiBUaGlzIGFkZHMge0BsaW5rIEV2ZW50VGFyZ2V0fkV2ZW50TGlzdGVuZXJzfSBmb3IgYGFkZHRyYWNrYCwgYW5kICBgcmVtb3ZldHJhY2tgLlxuICAgICAqXG4gICAgICogQGZpcmVzIFRlY2gjYXVkaW90cmFja2NoYW5nZVxuICAgICAqIEBmaXJlcyBUZWNoI3ZpZGVvdHJhY2tjaGFuZ2VcbiAgICAgKiBAZmlyZXMgVGVjaCN0ZXh0dHJhY2tjaGFuZ2VcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaW5pdFRyYWNrTGlzdGVuZXJzID0gZnVuY3Rpb24gaW5pdFRyYWNrTGlzdGVuZXJzKCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIC8qKlxuICAgICAgICAqIFRyaWdnZXJlZCB3aGVuIHRyYWNrcyBhcmUgYWRkZWQgb3IgcmVtb3ZlZCBvbiB0aGUgVGVjaCB7QGxpbmsgQXVkaW9UcmFja0xpc3R9XG4gICAgICAgICpcbiAgICAgICAgKiBAZXZlbnQgVGVjaCNhdWRpb3RyYWNrY2hhbmdlXG4gICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICAqL1xuXG4gICAgICAvKipcbiAgICAgICAgKiBUcmlnZ2VyZWQgd2hlbiB0cmFja3MgYXJlIGFkZGVkIG9yIHJlbW92ZWQgb24gdGhlIFRlY2gge0BsaW5rIFZpZGVvVHJhY2tMaXN0fVxuICAgICAgICAqXG4gICAgICAgICogQGV2ZW50IFRlY2gjdmlkZW90cmFja2NoYW5nZVxuICAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAgKi9cblxuICAgICAgLyoqXG4gICAgICAgICogVHJpZ2dlcmVkIHdoZW4gdHJhY2tzIGFyZSBhZGRlZCBvciByZW1vdmVkIG9uIHRoZSBUZWNoIHtAbGluayBUZXh0VHJhY2tMaXN0fVxuICAgICAgICAqXG4gICAgICAgICogQGV2ZW50IFRlY2gjdGV4dHRyYWNrY2hhbmdlXG4gICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICAqL1xuICAgICAgTk9STUFMLm5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIHByb3BzID0gTk9STUFMW25hbWVdO1xuXG4gICAgICAgIHZhciB0cmFja0xpc3RDaGFuZ2VzID0gZnVuY3Rpb24gdHJhY2tMaXN0Q2hhbmdlcygpIHtcbiAgICAgICAgICBfdGhpczQudHJpZ2dlcihuYW1lICsgXCJ0cmFja2NoYW5nZVwiKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgdHJhY2tzID0gX3RoaXM0W3Byb3BzLmdldHRlck5hbWVdKCk7XG5cbiAgICAgICAgdHJhY2tzLmFkZEV2ZW50TGlzdGVuZXIoJ3JlbW92ZXRyYWNrJywgdHJhY2tMaXN0Q2hhbmdlcyk7XG4gICAgICAgIHRyYWNrcy5hZGRFdmVudExpc3RlbmVyKCdhZGR0cmFjaycsIHRyYWNrTGlzdENoYW5nZXMpO1xuXG4gICAgICAgIF90aGlzNC5vbignZGlzcG9zZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0cmFja3MucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVtb3ZldHJhY2snLCB0cmFja0xpc3RDaGFuZ2VzKTtcbiAgICAgICAgICB0cmFja3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkdHJhY2snLCB0cmFja0xpc3RDaGFuZ2VzKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW11bGF0ZSBUZXh0VHJhY2tzIHVzaW5nIHZ0dC5qcyBpZiBuZWNlc3NhcnlcbiAgICAgKlxuICAgICAqIEBmaXJlcyBUZWNoI3Z0dGpzbG9hZGVkXG4gICAgICogQGZpcmVzIFRlY2gjdnR0anNlcnJvclxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5hZGRXZWJWdHRTY3JpcHRfID0gZnVuY3Rpb24gYWRkV2ViVnR0U2NyaXB0XygpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICBpZiAod2luZG93JDEuV2ViVlRUKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gSW5pdGlhbGx5LCBUZWNoLmVsXyBpcyBhIGNoaWxkIG9mIGEgZHVtbXktZGl2IHdhaXQgdW50aWwgdGhlIENvbXBvbmVudCBzeXN0ZW1cbiAgICAgIC8vIHNpZ25hbHMgdGhhdCB0aGUgVGVjaCBpcyByZWFkeSBhdCB3aGljaCBwb2ludCBUZWNoLmVsXyBpcyBwYXJ0IG9mIHRoZSBET01cbiAgICAgIC8vIGJlZm9yZSBpbnNlcnRpbmcgdGhlIFdlYlZUVCBzY3JpcHRcblxuXG4gICAgICBpZiAoZG9jdW1lbnQuYm9keS5jb250YWlucyh0aGlzLmVsKCkpKSB7XG4gICAgICAgIC8vIGxvYWQgdmlhIHJlcXVpcmUgaWYgYXZhaWxhYmxlIGFuZCB2dHQuanMgc2NyaXB0IGxvY2F0aW9uIHdhcyBub3QgcGFzc2VkIGluXG4gICAgICAgIC8vIGFzIGFuIG9wdGlvbi4gbm92dHQgYnVpbGRzIHdpbGwgdHVybiB0aGUgYWJvdmUgcmVxdWlyZSBjYWxsIGludG8gYW4gZW1wdHkgb2JqZWN0XG4gICAgICAgIC8vIHdoaWNoIHdpbGwgY2F1c2UgdGhpcyBpZiBjaGVjayB0byBhbHdheXMgZmFpbC5cbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnNfWyd2dHQuanMnXSAmJiBpc1BsYWluKHZ0dCkgJiYgT2JqZWN0LmtleXModnR0KS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyKCd2dHRqc2xvYWRlZCcpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBsb2FkIHZ0dC5qcyB2aWEgdGhlIHNjcmlwdCBsb2NhdGlvbiBvcHRpb24gb3IgdGhlIGNkbiBvZiBubyBsb2NhdGlvbiB3YXNcbiAgICAgICAgLy8gcGFzc2VkIGluXG5cblxuICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgIHNjcmlwdC5zcmMgPSB0aGlzLm9wdGlvbnNfWyd2dHQuanMnXSB8fCAnaHR0cHM6Ly92anMuemVuY2RuLm5ldC92dHRqcy8wLjE0LjEvdnR0Lm1pbi5qcyc7XG5cbiAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBGaXJlZCB3aGVuIHZ0dC5qcyBpcyBsb2FkZWQuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZXZlbnQgVGVjaCN2dHRqc2xvYWRlZFxuICAgICAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBfdGhpczUudHJpZ2dlcigndnR0anNsb2FkZWQnKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBGaXJlZCB3aGVuIHZ0dC5qcyB3YXMgbm90IGxvYWRlZCBkdWUgdG8gYW4gZXJyb3JcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBldmVudCBUZWNoI3Z0dGpzbG9hZGVkXG4gICAgICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICAgICAqL1xuICAgICAgICAgIF90aGlzNS50cmlnZ2VyKCd2dHRqc2Vycm9yJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5vbignZGlzcG9zZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzY3JpcHQub25sb2FkID0gbnVsbDtcbiAgICAgICAgICBzY3JpcHQub25lcnJvciA9IG51bGw7XG4gICAgICAgIH0pOyAvLyBidXQgaGF2ZSBub3QgbG9hZGVkIHlldCBhbmQgd2Ugc2V0IGl0IHRvIHRydWUgYmVmb3JlIHRoZSBpbmplY3Qgc28gdGhhdFxuICAgICAgICAvLyB3ZSBkb24ndCBvdmVyd3JpdGUgdGhlIGluamVjdGVkIHdpbmRvdy5XZWJWVFQgaWYgaXQgbG9hZHMgcmlnaHQgYXdheVxuXG4gICAgICAgIHdpbmRvdyQxLldlYlZUVCA9IHRydWU7XG4gICAgICAgIHRoaXMuZWwoKS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlYWR5KHRoaXMuYWRkV2ViVnR0U2NyaXB0Xyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVtdWxhdGUgdGV4dHRyYWNrc1xuICAgICAqXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmVtdWxhdGVUZXh0VHJhY2tzID0gZnVuY3Rpb24gZW11bGF0ZVRleHRUcmFja3MoKSB7XG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgdmFyIHRyYWNrcyA9IHRoaXMudGV4dFRyYWNrcygpO1xuICAgICAgdmFyIHJlbW90ZVRyYWNrcyA9IHRoaXMucmVtb3RlVGV4dFRyYWNrcygpO1xuXG4gICAgICB2YXIgaGFuZGxlQWRkVHJhY2sgPSBmdW5jdGlvbiBoYW5kbGVBZGRUcmFjayhlKSB7XG4gICAgICAgIHJldHVybiB0cmFja3MuYWRkVHJhY2soZS50cmFjayk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgaGFuZGxlUmVtb3ZlVHJhY2sgPSBmdW5jdGlvbiBoYW5kbGVSZW1vdmVUcmFjayhlKSB7XG4gICAgICAgIHJldHVybiB0cmFja3MucmVtb3ZlVHJhY2soZS50cmFjayk7XG4gICAgICB9O1xuXG4gICAgICByZW1vdGVUcmFja3Mub24oJ2FkZHRyYWNrJywgaGFuZGxlQWRkVHJhY2spO1xuICAgICAgcmVtb3RlVHJhY2tzLm9uKCdyZW1vdmV0cmFjaycsIGhhbmRsZVJlbW92ZVRyYWNrKTtcbiAgICAgIHRoaXMuYWRkV2ViVnR0U2NyaXB0XygpO1xuXG4gICAgICB2YXIgdXBkYXRlRGlzcGxheSA9IGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXkoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczYudHJpZ2dlcigndGV4dHRyYWNrY2hhbmdlJyk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgdGV4dFRyYWNrc0NoYW5nZXMgPSBmdW5jdGlvbiB0ZXh0VHJhY2tzQ2hhbmdlcygpIHtcbiAgICAgICAgdXBkYXRlRGlzcGxheSgpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHRyYWNrID0gdHJhY2tzW2ldO1xuICAgICAgICAgIHRyYWNrLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2N1ZWNoYW5nZScsIHVwZGF0ZURpc3BsYXkpO1xuXG4gICAgICAgICAgaWYgKHRyYWNrLm1vZGUgPT09ICdzaG93aW5nJykge1xuICAgICAgICAgICAgdHJhY2suYWRkRXZlbnRMaXN0ZW5lcignY3VlY2hhbmdlJywgdXBkYXRlRGlzcGxheSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB0ZXh0VHJhY2tzQ2hhbmdlcygpO1xuICAgICAgdHJhY2tzLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRleHRUcmFja3NDaGFuZ2VzKTtcbiAgICAgIHRyYWNrcy5hZGRFdmVudExpc3RlbmVyKCdhZGR0cmFjaycsIHRleHRUcmFja3NDaGFuZ2VzKTtcbiAgICAgIHRyYWNrcy5hZGRFdmVudExpc3RlbmVyKCdyZW1vdmV0cmFjaycsIHRleHRUcmFja3NDaGFuZ2VzKTtcbiAgICAgIHRoaXMub24oJ2Rpc3Bvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlbW90ZVRyYWNrcy5vZmYoJ2FkZHRyYWNrJywgaGFuZGxlQWRkVHJhY2spO1xuICAgICAgICByZW1vdGVUcmFja3Mub2ZmKCdyZW1vdmV0cmFjaycsIGhhbmRsZVJlbW92ZVRyYWNrKTtcbiAgICAgICAgdHJhY2tzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRleHRUcmFja3NDaGFuZ2VzKTtcbiAgICAgICAgdHJhY2tzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FkZHRyYWNrJywgdGV4dFRyYWNrc0NoYW5nZXMpO1xuICAgICAgICB0cmFja3MucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVtb3ZldHJhY2snLCB0ZXh0VHJhY2tzQ2hhbmdlcyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgdHJhY2sgPSB0cmFja3NbaV07XG4gICAgICAgICAgdHJhY2sucmVtb3ZlRXZlbnRMaXN0ZW5lcignY3VlY2hhbmdlJywgdXBkYXRlRGlzcGxheSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW5kIHJldHVybnMgYSByZW1vdGUge0BsaW5rIFRleHRUcmFja30gb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtpbmRcbiAgICAgKiAgICAgICAgYFRleHRUcmFja2Aga2luZCAoc3VidGl0bGVzLCBjYXB0aW9ucywgZGVzY3JpcHRpb25zLCBjaGFwdGVycywgb3IgbWV0YWRhdGEpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xhYmVsXVxuICAgICAqICAgICAgICBMYWJlbCB0byBpZGVudGlmeSB0aGUgdGV4dCB0cmFja1xuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtsYW5ndWFnZV1cbiAgICAgKiAgICAgICAgVHdvIGxldHRlciBsYW5ndWFnZSBhYmJyZXZpYXRpb25cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1RleHRUcmFja31cbiAgICAgKiAgICAgICAgIFRoZSBUZXh0VHJhY2sgdGhhdCBnZXRzIGNyZWF0ZWQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmFkZFRleHRUcmFjayA9IGZ1bmN0aW9uIGFkZFRleHRUcmFjayhraW5kLCBsYWJlbCwgbGFuZ3VhZ2UpIHtcbiAgICAgIGlmICgha2luZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RleHRUcmFjayBraW5kIGlzIHJlcXVpcmVkIGJ1dCB3YXMgbm90IHByb3ZpZGVkJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjcmVhdGVUcmFja0hlbHBlcih0aGlzLCBraW5kLCBsYWJlbCwgbGFuZ3VhZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gZW11bGF0ZWQgVGV4dFRyYWNrIGZvciB1c2UgYnkgYWRkUmVtb3RlVGV4dFRyYWNrXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGludGVuZGVkIHRvIGJlIG92ZXJyaWRkZW4gYnkgY2xhc3NlcyB0aGF0IGluaGVyaXQgZnJvbVxuICAgICAqIFRlY2ggaW4gb3JkZXIgdG8gY3JlYXRlIG5hdGl2ZSBvciBjdXN0b20gVGV4dFRyYWNrcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICogICAgICAgIFRoZSBvYmplY3Qgc2hvdWxkIGNvbnRhaW4gdGhlIG9wdGlvbnMgdG8gaW5pdGlhbGl6ZSB0aGUgVGV4dFRyYWNrIHdpdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMua2luZF1cbiAgICAgKiAgICAgICAgYFRleHRUcmFja2Aga2luZCAoc3VidGl0bGVzLCBjYXB0aW9ucywgZGVzY3JpcHRpb25zLCBjaGFwdGVycywgb3IgbWV0YWRhdGEpLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxhYmVsXS5cbiAgICAgKiAgICAgICAgTGFiZWwgdG8gaWRlbnRpZnkgdGhlIHRleHQgdHJhY2tcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYW5ndWFnZV1cbiAgICAgKiAgICAgICAgVHdvIGxldHRlciBsYW5ndWFnZSBhYmJyZXZpYXRpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtIVE1MVHJhY2tFbGVtZW50fVxuICAgICAqICAgICAgICAgVGhlIHRyYWNrIGVsZW1lbnQgdGhhdCBnZXRzIGNyZWF0ZWQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNyZWF0ZVJlbW90ZVRleHRUcmFjayA9IGZ1bmN0aW9uIGNyZWF0ZVJlbW90ZVRleHRUcmFjayhvcHRpb25zKSB7XG4gICAgICB2YXIgdHJhY2sgPSBtZXJnZU9wdGlvbnMob3B0aW9ucywge1xuICAgICAgICB0ZWNoOiB0aGlzXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXcgUkVNT1RFLnJlbW90ZVRleHRFbC5UcmFja0NsYXNzKHRyYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlbW90ZSB0ZXh0IHRyYWNrIG9iamVjdCBhbmQgcmV0dXJucyBhbiBodG1sIHRyYWNrIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiA+IE5vdGU6IFRoaXMgY2FuIGJlIGFuIGVtdWxhdGVkIHtAbGluayBIVE1MVHJhY2tFbGVtZW50fSBvciBhIG5hdGl2ZSBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqICAgICAgICBTZWUge0BsaW5rIFRlY2gjY3JlYXRlUmVtb3RlVGV4dFRyYWNrfSBmb3IgbW9yZSBkZXRhaWxlZCBwcm9wZXJ0aWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbbWFudWFsQ2xlYW51cD10cnVlXVxuICAgICAqICAgICAgICAtIFdoZW4gZmFsc2U6IHRoZSBUZXh0VHJhY2sgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgZnJvbSB0aGUgdmlkZW9cbiAgICAgKiAgICAgICAgICBlbGVtZW50IHdoZW5ldmVyIHRoZSBzb3VyY2UgY2hhbmdlc1xuICAgICAqICAgICAgICAtIFdoZW4gVHJ1ZTogVGhlIFRleHRUcmFjayB3aWxsIGhhdmUgdG8gYmUgY2xlYW5lZCB1cCBtYW51YWxseVxuICAgICAqXG4gICAgICogQHJldHVybiB7SFRNTFRyYWNrRWxlbWVudH1cbiAgICAgKiAgICAgICAgIEFuIEh0bWwgVHJhY2sgRWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFRoZSBkZWZhdWx0IGZ1bmN0aW9uYWxpdHkgZm9yIHRoaXMgZnVuY3Rpb24gd2lsbCBiZSBlcXVpdmFsZW50XG4gICAgICogICAgICAgICAgICAgdG8gXCJtYW51YWxDbGVhbnVwPWZhbHNlXCIgaW4gdGhlIGZ1dHVyZS4gVGhlIG1hbnVhbENsZWFudXAgcGFyYW1ldGVyIHdpbGxcbiAgICAgKiAgICAgICAgICAgICBhbHNvIGJlIHJlbW92ZWQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmFkZFJlbW90ZVRleHRUcmFjayA9IGZ1bmN0aW9uIGFkZFJlbW90ZVRleHRUcmFjayhvcHRpb25zLCBtYW51YWxDbGVhbnVwKSB7XG4gICAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG5cbiAgICAgIHZhciBodG1sVHJhY2tFbGVtZW50ID0gdGhpcy5jcmVhdGVSZW1vdGVUZXh0VHJhY2sob3B0aW9ucyk7XG5cbiAgICAgIGlmIChtYW51YWxDbGVhbnVwICE9PSB0cnVlICYmIG1hbnVhbENsZWFudXAgIT09IGZhbHNlKSB7XG4gICAgICAgIC8vIGRlcHJlY2F0aW9uIHdhcm5pbmdcbiAgICAgICAgbG9nLndhcm4oJ0NhbGxpbmcgYWRkUmVtb3RlVGV4dFRyYWNrIHdpdGhvdXQgZXhwbGljaXRseSBzZXR0aW5nIHRoZSBcIm1hbnVhbENsZWFudXBcIiBwYXJhbWV0ZXIgdG8gYHRydWVgIGlzIGRlcHJlY2F0ZWQgYW5kIGRlZmF1bHQgdG8gYGZhbHNlYCBpbiBmdXR1cmUgdmVyc2lvbiBvZiB2aWRlby5qcycpO1xuICAgICAgICBtYW51YWxDbGVhbnVwID0gdHJ1ZTtcbiAgICAgIH0gLy8gc3RvcmUgSFRNTFRyYWNrRWxlbWVudCBhbmQgVGV4dFRyYWNrIHRvIHJlbW90ZSBsaXN0XG5cblxuICAgICAgdGhpcy5yZW1vdGVUZXh0VHJhY2tFbHMoKS5hZGRUcmFja0VsZW1lbnRfKGh0bWxUcmFja0VsZW1lbnQpO1xuICAgICAgdGhpcy5yZW1vdGVUZXh0VHJhY2tzKCkuYWRkVHJhY2soaHRtbFRyYWNrRWxlbWVudC50cmFjayk7XG5cbiAgICAgIGlmIChtYW51YWxDbGVhbnVwICE9PSB0cnVlKSB7XG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgVGV4dFRyYWNrTGlzdCBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICAgIHRoaXMucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczcuYXV0b1JlbW90ZVRleHRUcmFja3NfLmFkZFRyYWNrKGh0bWxUcmFja0VsZW1lbnQudHJhY2spO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGh0bWxUcmFja0VsZW1lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIHJlbW90ZSB0ZXh0IHRyYWNrIGZyb20gdGhlIHJlbW90ZSBgVGV4dFRyYWNrTGlzdGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RleHRUcmFja30gdHJhY2tcbiAgICAgKiAgICAgICAgYFRleHRUcmFja2AgdG8gcmVtb3ZlIGZyb20gdGhlIGBUZXh0VHJhY2tMaXN0YFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5yZW1vdmVSZW1vdGVUZXh0VHJhY2sgPSBmdW5jdGlvbiByZW1vdmVSZW1vdGVUZXh0VHJhY2sodHJhY2spIHtcbiAgICAgIHZhciB0cmFja0VsZW1lbnQgPSB0aGlzLnJlbW90ZVRleHRUcmFja0VscygpLmdldFRyYWNrRWxlbWVudEJ5VHJhY2tfKHRyYWNrKTsgLy8gcmVtb3ZlIEhUTUxUcmFja0VsZW1lbnQgYW5kIFRleHRUcmFjayBmcm9tIHJlbW90ZSBsaXN0XG5cbiAgICAgIHRoaXMucmVtb3RlVGV4dFRyYWNrRWxzKCkucmVtb3ZlVHJhY2tFbGVtZW50Xyh0cmFja0VsZW1lbnQpO1xuICAgICAgdGhpcy5yZW1vdGVUZXh0VHJhY2tzKCkucmVtb3ZlVHJhY2sodHJhY2spO1xuICAgICAgdGhpcy5hdXRvUmVtb3RlVGV4dFRyYWNrc18ucmVtb3ZlVHJhY2sodHJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGF2YWlsYWJsZSBtZWRpYSBwbGF5YmFjayBxdWFsaXR5IG1ldHJpY3MgYXMgc3BlY2lmaWVkIGJ5IHRoZSBXM0MncyBNZWRpYVxuICAgICAqIFBsYXliYWNrIFF1YWxpdHkgQVBJLlxuICAgICAqXG4gICAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93aWNnLmdpdGh1Yi5pby9tZWRpYS1wbGF5YmFjay1xdWFsaXR5fVxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqICAgICAgICAgQW4gb2JqZWN0IHdpdGggc3VwcG9ydGVkIG1lZGlhIHBsYXliYWNrIHF1YWxpdHkgbWV0cmljc1xuICAgICAqXG4gICAgICogQGFic3RyYWN0XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmdldFZpZGVvUGxheWJhY2tRdWFsaXR5ID0gZnVuY3Rpb24gZ2V0VmlkZW9QbGF5YmFja1F1YWxpdHkoKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgbWV0aG9kIHRvIHNldCBhIHBvc3RlciBmcm9tIGEgYFRlY2hgLlxuICAgICAqXG4gICAgICogQGFic3RyYWN0XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnNldFBvc3RlciA9IGZ1bmN0aW9uIHNldFBvc3RlcigpIHt9XG4gICAgLyoqXG4gICAgICogQSBtZXRob2QgdG8gY2hlY2sgZm9yIHRoZSBwcmVzZW5jZSBvZiB0aGUgJ3BsYXlzaW5saW5lJyA8dmlkZW8+IGF0dHJpYnV0ZS5cbiAgICAgKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5wbGF5c2lubGluZSA9IGZ1bmN0aW9uIHBsYXlzaW5saW5lKCkge31cbiAgICAvKipcbiAgICAgKiBBIG1ldGhvZCB0byBzZXQgb3IgdW5zZXQgdGhlICdwbGF5c2lubGluZScgPHZpZGVvPiBhdHRyaWJ1dGUuXG4gICAgICpcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uc2V0UGxheXNpbmxpbmUgPSBmdW5jdGlvbiBzZXRQbGF5c2lubGluZSgpIHt9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCB0byBmb3JjZSBvdmVycmlkZSBvZiBuYXRpdmUgYXVkaW8gdHJhY2tzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBvdmVycmlkZSAtIElmIHNldCB0byB0cnVlIG5hdGl2ZSBhdWRpbyB3aWxsIGJlIG92ZXJyaWRkZW4sXG4gICAgICogb3RoZXJ3aXNlIG5hdGl2ZSBhdWRpbyB3aWxsIHBvdGVudGlhbGx5IGJlIHVzZWQuXG4gICAgICpcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ub3ZlcnJpZGVOYXRpdmVBdWRpb1RyYWNrcyA9IGZ1bmN0aW9uIG92ZXJyaWRlTmF0aXZlQXVkaW9UcmFja3MoKSB7fVxuICAgIC8qKlxuICAgICAqIEF0dGVtcHQgdG8gZm9yY2Ugb3ZlcnJpZGUgb2YgbmF0aXZlIHZpZGVvIHRyYWNrcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3ZlcnJpZGUgLSBJZiBzZXQgdG8gdHJ1ZSBuYXRpdmUgdmlkZW8gd2lsbCBiZSBvdmVycmlkZGVuLFxuICAgICAqIG90aGVyd2lzZSBuYXRpdmUgdmlkZW8gd2lsbCBwb3RlbnRpYWxseSBiZSB1c2VkLlxuICAgICAqXG4gICAgICogQGFic3RyYWN0XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLm92ZXJyaWRlTmF0aXZlVmlkZW9UcmFja3MgPSBmdW5jdGlvbiBvdmVycmlkZU5hdGl2ZVZpZGVvVHJhY2tzKCkge31cbiAgICAvKlxuICAgICAqIENoZWNrIGlmIHRoZSB0ZWNoIGNhbiBzdXBwb3J0IHRoZSBnaXZlbiBtaW1lLXR5cGUuXG4gICAgICpcbiAgICAgKiBUaGUgYmFzZSB0ZWNoIGRvZXMgbm90IHN1cHBvcnQgYW55IHR5cGUsIGJ1dCBzb3VyY2UgaGFuZGxlcnMgbWlnaHRcbiAgICAgKiBvdmVyd3JpdGUgdGhpcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gdHlwZVxuICAgICAqICAgICAgICAgVGhlIG1pbWV0eXBlIHRvIGNoZWNrIGZvciBzdXBwb3J0XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogICAgICAgICAncHJvYmFibHknLCAnbWF5YmUnLCBvciBlbXB0eSBzdHJpbmdcbiAgICAgKlxuICAgICAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9IVE1MTWVkaWFFbGVtZW50L2NhblBsYXlUeXBlfVxuICAgICAqXG4gICAgICogQGFic3RyYWN0XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNhblBsYXlUeXBlID0gZnVuY3Rpb24gY2FuUGxheVR5cGUoKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSB0eXBlIGlzIHN1cHBvcnRlZCBieSB0aGlzIHRlY2guXG4gICAgICpcbiAgICAgKiBUaGUgYmFzZSB0ZWNoIGRvZXMgbm90IHN1cHBvcnQgYW55IHR5cGUsIGJ1dCBzb3VyY2UgaGFuZGxlcnMgbWlnaHRcbiAgICAgKiBvdmVyd3JpdGUgdGhpcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gICAgICogICAgICAgIFRoZSBtZWRpYSB0eXBlIHRvIGNoZWNrXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBSZXR1cm5zIHRoZSBuYXRpdmUgdmlkZW8gZWxlbWVudCdzIHJlc3BvbnNlXG4gICAgICovXG4gICAgO1xuXG4gICAgVGVjaC5jYW5QbGF5VHlwZSA9IGZ1bmN0aW9uIGNhblBsYXlUeXBlKCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB0aGUgdGVjaCBjYW4gc3VwcG9ydCB0aGUgZ2l2ZW4gc291cmNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3JjT2JqXG4gICAgICogICAgICAgIFRoZSBzb3VyY2Ugb2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiAgICAgICAgVGhlIG9wdGlvbnMgcGFzc2VkIHRvIHRoZSB0ZWNoXG4gICAgICogQHJldHVybiB7c3RyaW5nfSAncHJvYmFibHknLCAnbWF5YmUnLCBvciAnJyAoZW1wdHkgc3RyaW5nKVxuICAgICAqL1xuICAgIDtcblxuICAgIFRlY2guY2FuUGxheVNvdXJjZSA9IGZ1bmN0aW9uIGNhblBsYXlTb3VyY2Uoc3JjT2JqLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gVGVjaC5jYW5QbGF5VHlwZShzcmNPYmoudHlwZSk7XG4gICAgfVxuICAgIC8qXG4gICAgICogUmV0dXJuIHdoZXRoZXIgdGhlIGFyZ3VtZW50IGlzIGEgVGVjaCBvciBub3QuXG4gICAgICogQ2FuIGJlIHBhc3NlZCBlaXRoZXIgYSBDbGFzcyBsaWtlIGBIdG1sNWAgb3IgYSBpbnN0YW5jZSBsaWtlIGBwbGF5ZXIudGVjaF9gXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29tcG9uZW50XG4gICAgICogICAgICAgIFRoZSBpdGVtIHRvIGNoZWNrXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqICAgICAgICAgV2hldGhlciBpdCBpcyBhIHRlY2ggb3Igbm90XG4gICAgICogICAgICAgICAtIFRydWUgaWYgaXQgaXMgYSB0ZWNoXG4gICAgICogICAgICAgICAtIEZhbHNlIGlmIGl0IGlzIG5vdFxuICAgICAqL1xuICAgIDtcblxuICAgIFRlY2guaXNUZWNoID0gZnVuY3Rpb24gaXNUZWNoKGNvbXBvbmVudCkge1xuICAgICAgcmV0dXJuIGNvbXBvbmVudC5wcm90b3R5cGUgaW5zdGFuY2VvZiBUZWNoIHx8IGNvbXBvbmVudCBpbnN0YW5jZW9mIFRlY2ggfHwgY29tcG9uZW50ID09PSBUZWNoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBgVGVjaGAgaW50byBhIHNoYXJlZCBsaXN0IGZvciB2aWRlb2pzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiAgICAgICAgTmFtZSBvZiB0aGUgYFRlY2hgIHRvIHJlZ2lzdGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHRlY2hcbiAgICAgKiAgICAgICAgVGhlIGBUZWNoYCBjbGFzcyB0byByZWdpc3Rlci5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBUZWNoLnJlZ2lzdGVyVGVjaCA9IGZ1bmN0aW9uIHJlZ2lzdGVyVGVjaChuYW1lLCB0ZWNoKSB7XG4gICAgICBpZiAoIVRlY2gudGVjaHNfKSB7XG4gICAgICAgIFRlY2gudGVjaHNfID0ge307XG4gICAgICB9XG5cbiAgICAgIGlmICghVGVjaC5pc1RlY2godGVjaCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGVjaCBcIiArIG5hbWUgKyBcIiBtdXN0IGJlIGEgVGVjaFwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFUZWNoLmNhblBsYXlUeXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGVjaHMgbXVzdCBoYXZlIGEgc3RhdGljIGNhblBsYXlUeXBlIG1ldGhvZCBvbiB0aGVtJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICghVGVjaC5jYW5QbGF5U291cmNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGVjaHMgbXVzdCBoYXZlIGEgc3RhdGljIGNhblBsYXlTb3VyY2UgbWV0aG9kIG9uIHRoZW0nKTtcbiAgICAgIH1cblxuICAgICAgbmFtZSA9IHRvVGl0bGVDYXNlKG5hbWUpO1xuICAgICAgVGVjaC50ZWNoc19bbmFtZV0gPSB0ZWNoO1xuXG4gICAgICBpZiAobmFtZSAhPT0gJ1RlY2gnKSB7XG4gICAgICAgIC8vIGNhbWVsIGNhc2UgdGhlIHRlY2hOYW1lIGZvciB1c2UgaW4gdGVjaE9yZGVyXG4gICAgICAgIFRlY2guZGVmYXVsdFRlY2hPcmRlcl8ucHVzaChuYW1lKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRlY2g7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhIGBUZWNoYCBmcm9tIHRoZSBzaGFyZWQgbGlzdCBieSBuYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiAgICAgICAgYGNhbWVsQ2FzZWAgb3IgYFRpdGxlQ2FzZWAgbmFtZSBvZiB0aGUgVGVjaCB0byBnZXRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1RlY2h8dW5kZWZpbmVkfVxuICAgICAqICAgICAgICAgVGhlIGBUZWNoYCBvciB1bmRlZmluZWQgaWYgdGhlcmUgd2FzIG5vIHRlY2ggd2l0aCB0aGUgbmFtZSByZXF1ZXN0ZWQuXG4gICAgICovXG4gICAgO1xuXG4gICAgVGVjaC5nZXRUZWNoID0gZnVuY3Rpb24gZ2V0VGVjaChuYW1lKSB7XG4gICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBuYW1lID0gdG9UaXRsZUNhc2UobmFtZSk7XG5cbiAgICAgIGlmIChUZWNoLnRlY2hzXyAmJiBUZWNoLnRlY2hzX1tuYW1lXSkge1xuICAgICAgICByZXR1cm4gVGVjaC50ZWNoc19bbmFtZV07XG4gICAgICB9XG5cbiAgICAgIGlmICh3aW5kb3ckMSAmJiB3aW5kb3ckMS52aWRlb2pzICYmIHdpbmRvdyQxLnZpZGVvanNbbmFtZV0pIHtcbiAgICAgICAgbG9nLndhcm4oXCJUaGUgXCIgKyBuYW1lICsgXCIgdGVjaCB3YXMgYWRkZWQgdG8gdGhlIHZpZGVvanMgb2JqZWN0IHdoZW4gaXQgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgdXNpbmcgdmlkZW9qcy5yZWdpc3RlclRlY2gobmFtZSwgdGVjaClcIik7XG4gICAgICAgIHJldHVybiB3aW5kb3ckMS52aWRlb2pzW25hbWVdO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gVGVjaDtcbiAgfShDb21wb25lbnQpO1xuICAvKipcbiAgICogR2V0IHRoZSB7QGxpbmsgVmlkZW9UcmFja0xpc3R9XG4gICAqXG4gICAqIEByZXR1cm5zIHtWaWRlb1RyYWNrTGlzdH1cbiAgICogQG1ldGhvZCBUZWNoLnByb3RvdHlwZS52aWRlb1RyYWNrc1xuICAgKi9cblxuICAvKipcbiAgICogR2V0IHRoZSB7QGxpbmsgQXVkaW9UcmFja0xpc3R9XG4gICAqXG4gICAqIEByZXR1cm5zIHtBdWRpb1RyYWNrTGlzdH1cbiAgICogQG1ldGhvZCBUZWNoLnByb3RvdHlwZS5hdWRpb1RyYWNrc1xuICAgKi9cblxuICAvKipcbiAgICogR2V0IHRoZSB7QGxpbmsgVGV4dFRyYWNrTGlzdH1cbiAgICpcbiAgICogQHJldHVybnMge1RleHRUcmFja0xpc3R9XG4gICAqIEBtZXRob2QgVGVjaC5wcm90b3R5cGUudGV4dFRyYWNrc1xuICAgKi9cblxuICAvKipcbiAgICogR2V0IHRoZSByZW1vdGUgZWxlbWVudCB7QGxpbmsgVGV4dFRyYWNrTGlzdH1cbiAgICpcbiAgICogQHJldHVybnMge1RleHRUcmFja0xpc3R9XG4gICAqIEBtZXRob2QgVGVjaC5wcm90b3R5cGUucmVtb3RlVGV4dFRyYWNrc1xuICAgKi9cblxuICAvKipcbiAgICogR2V0IHRoZSByZW1vdGUgZWxlbWVudCB7QGxpbmsgSHRtbFRyYWNrRWxlbWVudExpc3R9XG4gICAqXG4gICAqIEByZXR1cm5zIHtIdG1sVHJhY2tFbGVtZW50TGlzdH1cbiAgICogQG1ldGhvZCBUZWNoLnByb3RvdHlwZS5yZW1vdGVUZXh0VHJhY2tFbHNcbiAgICovXG5cblxuICBBTEwubmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgIHZhciBwcm9wcyA9IEFMTFtuYW1lXTtcblxuICAgIFRlY2gucHJvdG90eXBlW3Byb3BzLmdldHRlck5hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpc1twcm9wcy5wcml2YXRlTmFtZV0gPSB0aGlzW3Byb3BzLnByaXZhdGVOYW1lXSB8fCBuZXcgcHJvcHMuTGlzdENsYXNzKCk7XG4gICAgICByZXR1cm4gdGhpc1twcm9wcy5wcml2YXRlTmFtZV07XG4gICAgfTtcbiAgfSk7XG4gIC8qKlxuICAgKiBMaXN0IG9mIGFzc29jaWF0ZWQgdGV4dCB0cmFja3NcbiAgICpcbiAgICogQHR5cGUge1RleHRUcmFja0xpc3R9XG4gICAqIEBwcml2YXRlXG4gICAqIEBwcm9wZXJ0eSBUZWNoI3RleHRUcmFja3NfXG4gICAqL1xuXG4gIC8qKlxuICAgKiBMaXN0IG9mIGFzc29jaWF0ZWQgYXVkaW8gdHJhY2tzLlxuICAgKlxuICAgKiBAdHlwZSB7QXVkaW9UcmFja0xpc3R9XG4gICAqIEBwcml2YXRlXG4gICAqIEBwcm9wZXJ0eSBUZWNoI2F1ZGlvVHJhY2tzX1xuICAgKi9cblxuICAvKipcbiAgICogTGlzdCBvZiBhc3NvY2lhdGVkIHZpZGVvIHRyYWNrcy5cbiAgICpcbiAgICogQHR5cGUge1ZpZGVvVHJhY2tMaXN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcHJvcGVydHkgVGVjaCN2aWRlb1RyYWNrc19cbiAgICovXG5cbiAgLyoqXG4gICAqIEJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBgVGVjaGAgc3VwcG9ydHMgdm9sdW1lIGNvbnRyb2wuXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAZGVmYXVsdFxuICAgKi9cblxuICBUZWNoLnByb3RvdHlwZS5mZWF0dXJlc1ZvbHVtZUNvbnRyb2wgPSB0cnVlO1xuICAvKipcbiAgICogQm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGBUZWNoYCBzdXBwb3J0cyBtdXRpbmcgdm9sdW1lLlxuICAgKlxuICAgKiBAdHlwZSB7Ym9sZWFufVxuICAgKiBAZGVmYXVsdFxuICAgKi9cblxuICBUZWNoLnByb3RvdHlwZS5mZWF0dXJlc011dGVDb250cm9sID0gdHJ1ZTtcbiAgLyoqXG4gICAqIEJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBgVGVjaGAgc3VwcG9ydHMgZnVsbHNjcmVlbiByZXNpemUgY29udHJvbC5cbiAgICogUmVzaXppbmcgcGx1Z2lucyB1c2luZyByZXF1ZXN0IGZ1bGxzY3JlZW4gcmVsb2FkcyB0aGUgcGx1Z2luXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAZGVmYXVsdFxuICAgKi9cblxuICBUZWNoLnByb3RvdHlwZS5mZWF0dXJlc0Z1bGxzY3JlZW5SZXNpemUgPSBmYWxzZTtcbiAgLyoqXG4gICAqIEJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBgVGVjaGAgc3VwcG9ydHMgY2hhbmdpbmcgdGhlIHNwZWVkIGF0IHdoaWNoIHRoZSB2aWRlb1xuICAgKiBwbGF5cy4gRXhhbXBsZXM6XG4gICAqICAgLSBTZXQgcGxheWVyIHRvIHBsYXkgMnggKHR3aWNlKSBhcyBmYXN0XG4gICAqICAgLSBTZXQgcGxheWVyIHRvIHBsYXkgMC41eCAoaGFsZikgYXMgZmFzdFxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQGRlZmF1bHRcbiAgICovXG5cbiAgVGVjaC5wcm90b3R5cGUuZmVhdHVyZXNQbGF5YmFja1JhdGUgPSBmYWxzZTtcbiAgLyoqXG4gICAqIEJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBgVGVjaGAgc3VwcG9ydHMgdGhlIGBwcm9ncmVzc2AgZXZlbnQuIFRoaXMgaXMgY3VycmVudGx5XG4gICAqIG5vdCB0cmlnZ2VyZWQgYnkgdmlkZW8tanMtc3dmLiBUaGlzIHdpbGwgYmUgdXNlZCB0byBkZXRlcm1pbmUgaWZcbiAgICoge0BsaW5rIFRlY2gjbWFudWFsUHJvZ3Jlc3NPbn0gc2hvdWxkIGJlIGNhbGxlZC5cbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBkZWZhdWx0XG4gICAqL1xuXG4gIFRlY2gucHJvdG90eXBlLmZlYXR1cmVzUHJvZ3Jlc3NFdmVudHMgPSBmYWxzZTtcbiAgLyoqXG4gICAqIEJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBgVGVjaGAgc3VwcG9ydHMgdGhlIGBzb3VyY2VzZXRgIGV2ZW50LlxuICAgKlxuICAgKiBBIHRlY2ggc2hvdWxkIHNldCB0aGlzIHRvIGB0cnVlYCBhbmQgdGhlbiB1c2Uge0BsaW5rIFRlY2gjdHJpZ2dlclNvdXJjZXNldH1cbiAgICogdG8gdHJpZ2dlciBhIHtAbGluayBUZWNoI2V2ZW50OnNvdXJjZXNldH0gYXQgdGhlIGVhcmxpZXN0IHRpbWUgYWZ0ZXIgZ2V0dGluZ1xuICAgKiBhIG5ldyBzb3VyY2UuXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAZGVmYXVsdFxuICAgKi9cblxuICBUZWNoLnByb3RvdHlwZS5mZWF0dXJlc1NvdXJjZXNldCA9IGZhbHNlO1xuICAvKipcbiAgICogQm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGBUZWNoYCBzdXBwb3J0cyB0aGUgYHRpbWV1cGRhdGVgIGV2ZW50LiBUaGlzIGlzIGN1cnJlbnRseVxuICAgKiBub3QgdHJpZ2dlcmVkIGJ5IHZpZGVvLWpzLXN3Zi4gVGhpcyB3aWxsIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIGlmXG4gICAqIHtAbGluayBUZWNoI21hbnVhbFRpbWVVcGRhdGVzfSBzaG91bGQgYmUgY2FsbGVkLlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQGRlZmF1bHRcbiAgICovXG5cbiAgVGVjaC5wcm90b3R5cGUuZmVhdHVyZXNUaW1ldXBkYXRlRXZlbnRzID0gZmFsc2U7XG4gIC8qKlxuICAgKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYFRlY2hgIHN1cHBvcnRzIHRoZSBuYXRpdmUgYFRleHRUcmFja2BzLlxuICAgKiBUaGlzIHdpbGwgaGVscCB1cyBpbnRlZ3JhdGUgd2l0aCBuYXRpdmUgYFRleHRUcmFja2BzIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoZW0uXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAZGVmYXVsdFxuICAgKi9cblxuICBUZWNoLnByb3RvdHlwZS5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MgPSBmYWxzZTtcbiAgLyoqXG4gICAqIEEgZnVuY3Rpb25hbCBtaXhpbiBmb3IgdGVjaHMgdGhhdCB3YW50IHRvIHVzZSB0aGUgU291cmNlIEhhbmRsZXIgcGF0dGVybi5cbiAgICogU291cmNlIGhhbmRsZXJzIGFyZSBzY3JpcHRzIGZvciBoYW5kbGluZyBzcGVjaWZpYyBmb3JtYXRzLlxuICAgKiBUaGUgc291cmNlIGhhbmRsZXIgcGF0dGVybiBpcyB1c2VkIGZvciBhZGFwdGl2ZSBmb3JtYXRzIChITFMsIERBU0gpIHRoYXRcbiAgICogbWFudWFsbHkgbG9hZCB2aWRlbyBkYXRhIGFuZCBmZWVkIGl0IGludG8gYSBTb3VyY2UgQnVmZmVyIChNZWRpYSBTb3VyY2UgRXh0ZW5zaW9ucylcbiAgICogRXhhbXBsZTogYFRlY2gud2l0aFNvdXJjZUhhbmRsZXJzLmNhbGwoTXlUZWNoKTtgXG4gICAqXG4gICAqIEBwYXJhbSB7VGVjaH0gX1RlY2hcbiAgICogICAgICAgIFRoZSB0ZWNoIHRvIGFkZCBzb3VyY2UgaGFuZGxlciBmdW5jdGlvbnMgdG8uXG4gICAqXG4gICAqIEBtaXhlcyBUZWNoflNvdXJjZUhhbmRsZXJBZGRpdGlvbnNcbiAgICovXG5cbiAgVGVjaC53aXRoU291cmNlSGFuZGxlcnMgPSBmdW5jdGlvbiAoX1RlY2gpIHtcbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhIHNvdXJjZSBoYW5kbGVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gICAgICogICAgICAgIFRoZSBzb3VyY2UgaGFuZGxlciBjbGFzc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtpbmRleF1cbiAgICAgKiAgICAgICAgUmVnaXN0ZXIgaXQgYXQgdGhlIGZvbGxvd2luZyBpbmRleFxuICAgICAqL1xuICAgIF9UZWNoLnJlZ2lzdGVyU291cmNlSGFuZGxlciA9IGZ1bmN0aW9uIChoYW5kbGVyLCBpbmRleCkge1xuICAgICAgdmFyIGhhbmRsZXJzID0gX1RlY2guc291cmNlSGFuZGxlcnM7XG5cbiAgICAgIGlmICghaGFuZGxlcnMpIHtcbiAgICAgICAgaGFuZGxlcnMgPSBfVGVjaC5zb3VyY2VIYW5kbGVycyA9IFtdO1xuICAgICAgfVxuXG4gICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBhZGQgdG8gdGhlIGVuZCBvZiB0aGUgbGlzdFxuICAgICAgICBpbmRleCA9IGhhbmRsZXJzLmxlbmd0aDtcbiAgICAgIH1cblxuICAgICAgaGFuZGxlcnMuc3BsaWNlKGluZGV4LCAwLCBoYW5kbGVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSB0ZWNoIGNhbiBzdXBwb3J0IHRoZSBnaXZlbiB0eXBlLiBBbHNvIGNoZWNrcyB0aGVcbiAgICAgKiBUZWNocyBzb3VyY2VIYW5kbGVycy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gICAgICogICAgICAgICBUaGUgbWltZXR5cGUgdG8gY2hlY2suXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogICAgICAgICAncHJvYmFibHknLCAnbWF5YmUnLCBvciAnJyAoZW1wdHkgc3RyaW5nKVxuICAgICAqL1xuXG5cbiAgICBfVGVjaC5jYW5QbGF5VHlwZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICB2YXIgaGFuZGxlcnMgPSBfVGVjaC5zb3VyY2VIYW5kbGVycyB8fCBbXTtcbiAgICAgIHZhciBjYW47XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2FuID0gaGFuZGxlcnNbaV0uY2FuUGxheVR5cGUodHlwZSk7XG5cbiAgICAgICAgaWYgKGNhbikge1xuICAgICAgICAgIHJldHVybiBjYW47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuICcnO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZmlyc3Qgc291cmNlIGhhbmRsZXIgdGhhdCBzdXBwb3J0cyB0aGUgc291cmNlLlxuICAgICAqXG4gICAgICogVE9ETzogQW5zd2VyIHF1ZXN0aW9uOiBzaG91bGQgJ3Byb2JhYmx5JyBiZSBwcmlvcml0aXplZCBvdmVyICdtYXliZSdcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGVjaH5Tb3VyY2VPYmplY3R9IHNvdXJjZVxuICAgICAqICAgICAgICBUaGUgc291cmNlIG9iamVjdFxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiAgICAgICAgVGhlIG9wdGlvbnMgcGFzc2VkIHRvIHRoZSB0ZWNoXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtTb3VyY2VIYW5kbGVyfG51bGx9XG4gICAgICogICAgICAgICAgVGhlIGZpcnN0IHNvdXJjZSBoYW5kbGVyIHRoYXQgc3VwcG9ydHMgdGhlIHNvdXJjZSBvciBudWxsIGlmXG4gICAgICogICAgICAgICAgbm8gU291cmNlSGFuZGxlciBzdXBwb3J0cyB0aGUgc291cmNlXG4gICAgICovXG5cblxuICAgIF9UZWNoLnNlbGVjdFNvdXJjZUhhbmRsZXIgPSBmdW5jdGlvbiAoc291cmNlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgaGFuZGxlcnMgPSBfVGVjaC5zb3VyY2VIYW5kbGVycyB8fCBbXTtcbiAgICAgIHZhciBjYW47XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2FuID0gaGFuZGxlcnNbaV0uY2FuSGFuZGxlU291cmNlKHNvdXJjZSwgb3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKGNhbikge1xuICAgICAgICAgIHJldHVybiBoYW5kbGVyc1tpXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSB0ZWNoIGNhbiBzdXBwb3J0IHRoZSBnaXZlbiBzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RlY2h+U291cmNlT2JqZWN0fSBzcmNPYmpcbiAgICAgKiAgICAgICAgVGhlIHNvdXJjZSBvYmplY3RcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICogICAgICAgIFRoZSBvcHRpb25zIHBhc3NlZCB0byB0aGUgdGVjaFxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgJ3Byb2JhYmx5JywgJ21heWJlJywgb3IgJycgKGVtcHR5IHN0cmluZylcbiAgICAgKi9cblxuXG4gICAgX1RlY2guY2FuUGxheVNvdXJjZSA9IGZ1bmN0aW9uIChzcmNPYmosIG9wdGlvbnMpIHtcbiAgICAgIHZhciBzaCA9IF9UZWNoLnNlbGVjdFNvdXJjZUhhbmRsZXIoc3JjT2JqLCBvcHRpb25zKTtcblxuICAgICAgaWYgKHNoKSB7XG4gICAgICAgIHJldHVybiBzaC5jYW5IYW5kbGVTb3VyY2Uoc3JjT2JqLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICcnO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogV2hlbiB1c2luZyBhIHNvdXJjZSBoYW5kbGVyLCBwcmVmZXIgaXRzIGltcGxlbWVudGF0aW9uIG9mXG4gICAgICogYW55IGZ1bmN0aW9uIG5vcm1hbGx5IHByb3ZpZGVkIGJ5IHRoZSB0ZWNoLlxuICAgICAqL1xuXG5cbiAgICB2YXIgZGVmZXJyYWJsZSA9IFsnc2Vla2FibGUnLCAnc2Vla2luZycsICdkdXJhdGlvbiddO1xuICAgIC8qKlxuICAgICAqIEEgd3JhcHBlciBhcm91bmQge0BsaW5rIFRlY2gjc2Vla2FibGV9IHRoYXQgd2lsbCBjYWxsIGEgYFNvdXJjZUhhbmRsZXJgcyBzZWVrYWJsZVxuICAgICAqIGZ1bmN0aW9uIGlmIGl0IGV4aXN0cywgd2l0aCBhIGZhbGxiYWNrIHRvIHRoZSBUZWNocyBzZWVrYWJsZSBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBtZXRob2QgX1RlY2guc2Vla2FibGVcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEEgd3JhcHBlciBhcm91bmQge0BsaW5rIFRlY2gjZHVyYXRpb259IHRoYXQgd2lsbCBjYWxsIGEgYFNvdXJjZUhhbmRsZXJgcyBkdXJhdGlvblxuICAgICAqIGZ1bmN0aW9uIGlmIGl0IGV4aXN0cywgb3RoZXJ3aXNlIGl0IHdpbGwgZmFsbGJhY2sgdG8gdGhlIHRlY2hzIGR1cmF0aW9uIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQG1ldGhvZCBfVGVjaC5kdXJhdGlvblxuICAgICAqL1xuXG4gICAgZGVmZXJyYWJsZS5mb3JFYWNoKGZ1bmN0aW9uIChmbk5hbWUpIHtcbiAgICAgIHZhciBvcmlnaW5hbEZuID0gdGhpc1tmbk5hbWVdO1xuXG4gICAgICBpZiAodHlwZW9mIG9yaWdpbmFsRm4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzW2ZuTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZUhhbmRsZXJfICYmIHRoaXMuc291cmNlSGFuZGxlcl9bZm5OYW1lXSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnNvdXJjZUhhbmRsZXJfW2ZuTmFtZV0uYXBwbHkodGhpcy5zb3VyY2VIYW5kbGVyXywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvcmlnaW5hbEZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0sIF9UZWNoLnByb3RvdHlwZSk7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgZnVuY3Rpb24gZm9yIHNldHRpbmcgdGhlIHNvdXJjZSB1c2luZyBhIHNvdXJjZSBvYmplY3RcbiAgICAgKiBhbmQgc291cmNlIGhhbmRsZXJzLlxuICAgICAqIFNob3VsZCBuZXZlciBiZSBjYWxsZWQgdW5sZXNzIGEgc291cmNlIGhhbmRsZXIgd2FzIGZvdW5kLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtUZWNoflNvdXJjZU9iamVjdH0gc291cmNlXG4gICAgICogICAgICAgIEEgc291cmNlIG9iamVjdCB3aXRoIHNyYyBhbmQgdHlwZSBrZXlzXG4gICAgICovXG5cbiAgICBfVGVjaC5wcm90b3R5cGUuc2V0U291cmNlID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgdmFyIHNoID0gX1RlY2guc2VsZWN0U291cmNlSGFuZGxlcihzb3VyY2UsIHRoaXMub3B0aW9uc18pO1xuXG4gICAgICBpZiAoIXNoKSB7XG4gICAgICAgIC8vIEZhbGwgYmFjayB0byBhIG5hdGl2ZSBzb3VyY2UgaGFuZGVyIHdoZW4gdW5zdXBwb3J0ZWQgc291cmNlcyBhcmVcbiAgICAgICAgLy8gZGVsaWJlcmF0ZWx5IHNldFxuICAgICAgICBpZiAoX1RlY2gubmF0aXZlU291cmNlSGFuZGxlcikge1xuICAgICAgICAgIHNoID0gX1RlY2gubmF0aXZlU291cmNlSGFuZGxlcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsb2cuZXJyb3IoJ05vIHNvdXJjZSBoYW5kbGVyIGZvdW5kIGZvciB0aGUgY3VycmVudCBzb3VyY2UuJyk7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gRGlzcG9zZSBhbnkgZXhpc3Rpbmcgc291cmNlIGhhbmRsZXJcblxuXG4gICAgICB0aGlzLmRpc3Bvc2VTb3VyY2VIYW5kbGVyKCk7XG4gICAgICB0aGlzLm9mZignZGlzcG9zZScsIHRoaXMuZGlzcG9zZVNvdXJjZUhhbmRsZXIpO1xuXG4gICAgICBpZiAoc2ggIT09IF9UZWNoLm5hdGl2ZVNvdXJjZUhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50U291cmNlXyA9IHNvdXJjZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zb3VyY2VIYW5kbGVyXyA9IHNoLmhhbmRsZVNvdXJjZShzb3VyY2UsIHRoaXMsIHRoaXMub3B0aW9uc18pO1xuICAgICAgdGhpcy5vbmUoJ2Rpc3Bvc2UnLCB0aGlzLmRpc3Bvc2VTb3VyY2VIYW5kbGVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENsZWFuIHVwIGFueSBleGlzdGluZyBTb3VyY2VIYW5kbGVycyBhbmQgbGlzdGVuZXJzIHdoZW4gdGhlIFRlY2ggaXMgZGlzcG9zZWQuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBUZWNoI2Rpc3Bvc2VcbiAgICAgKi9cblxuXG4gICAgX1RlY2gucHJvdG90eXBlLmRpc3Bvc2VTb3VyY2VIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gaWYgd2UgaGF2ZSBhIHNvdXJjZSBhbmQgZ2V0IGFub3RoZXIgb25lXG4gICAgICAvLyB0aGVuIHdlIGFyZSBsb2FkaW5nIHNvbWV0aGluZyBuZXdcbiAgICAgIC8vIHRoYW4gY2xlYXIgYWxsIG9mIG91ciBjdXJyZW50IHRyYWNrc1xuICAgICAgaWYgKHRoaXMuY3VycmVudFNvdXJjZV8pIHtcbiAgICAgICAgdGhpcy5jbGVhclRyYWNrcyhbJ2F1ZGlvJywgJ3ZpZGVvJ10pO1xuICAgICAgICB0aGlzLmN1cnJlbnRTb3VyY2VfID0gbnVsbDtcbiAgICAgIH0gLy8gYWx3YXlzIGNsZWFuIHVwIGF1dG8tdGV4dCB0cmFja3NcblxuXG4gICAgICB0aGlzLmNsZWFudXBBdXRvVGV4dFRyYWNrcygpO1xuXG4gICAgICBpZiAodGhpcy5zb3VyY2VIYW5kbGVyXykge1xuICAgICAgICBpZiAodGhpcy5zb3VyY2VIYW5kbGVyXy5kaXNwb3NlKSB7XG4gICAgICAgICAgdGhpcy5zb3VyY2VIYW5kbGVyXy5kaXNwb3NlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNvdXJjZUhhbmRsZXJfID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICB9OyAvLyBUaGUgYmFzZSBUZWNoIGNsYXNzIG5lZWRzIHRvIGJlIHJlZ2lzdGVyZWQgYXMgYSBDb21wb25lbnQuIEl0IGlzIHRoZSBvbmx5XG4gIC8vIFRlY2ggdGhhdCBjYW4gYmUgcmVnaXN0ZXJlZCBhcyBhIENvbXBvbmVudC5cblxuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnVGVjaCcsIFRlY2gpO1xuICBUZWNoLnJlZ2lzdGVyVGVjaCgnVGVjaCcsIFRlY2gpO1xuICAvKipcbiAgICogQSBsaXN0IG9mIHRlY2hzIHRoYXQgc2hvdWxkIGJlIGFkZGVkIHRvIHRlY2hPcmRlciBvbiBQbGF5ZXJzXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIFRlY2guZGVmYXVsdFRlY2hPcmRlcl8gPSBbXTtcblxuICAvKipcbiAgICogQGZpbGUgbWlkZGxld2FyZS5qc1xuICAgKiBAbW9kdWxlIG1pZGRsZXdhcmVcbiAgICovXG4gIHZhciBtaWRkbGV3YXJlcyA9IHt9O1xuICB2YXIgbWlkZGxld2FyZUluc3RhbmNlcyA9IHt9O1xuICB2YXIgVEVSTUlOQVRPUiA9IHt9O1xuICAvKipcbiAgICogQSBtaWRkbGV3YXJlIG9iamVjdCBpcyBhIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0IHRoYXQgaGFzIG1ldGhvZHMgdGhhdFxuICAgKiBtYXRjaCB0aGUge0BsaW5rIFRlY2h9IG1ldGhvZHMgZm91bmQgaW4gdGhlIGxpc3RzIG9mIGFsbG93ZWRcbiAgICoge0BsaW5rIG1vZHVsZTptaWRkbGV3YXJlLmFsbG93ZWRHZXR0ZXJzfGdldHRlcnN9LFxuICAgKiB7QGxpbmsgbW9kdWxlOm1pZGRsZXdhcmUuYWxsb3dlZFNldHRlcnN8c2V0dGVyc30sIGFuZFxuICAgKiB7QGxpbmsgbW9kdWxlOm1pZGRsZXdhcmUuYWxsb3dlZE1lZGlhdG9yc3xtZWRpYXRvcnN9LlxuICAgKlxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBNaWRkbGV3YXJlT2JqZWN0XG4gICAqL1xuXG4gIC8qKlxuICAgKiBBIG1pZGRsZXdhcmUgZmFjdG9yeSBmdW5jdGlvbiB0aGF0IHNob3VsZCByZXR1cm4gYVxuICAgKiB7QGxpbmsgbW9kdWxlOm1pZGRsZXdhcmV+TWlkZGxld2FyZU9iamVjdHxNaWRkbGV3YXJlT2JqZWN0fS5cbiAgICpcbiAgICogVGhpcyBmYWN0b3J5IHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoIHBsYXllciB3aGVuIG5lZWRlZCwgd2l0aCB0aGUgcGxheWVyXG4gICAqIHBhc3NlZCBpbiBhcyBhbiBhcmd1bWVudC5cbiAgICpcbiAgICogQGNhbGxiYWNrIE1pZGRsZXdhcmVGYWN0b3J5XG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICogICAgICAgIEEgVmlkZW8uanMgcGxheWVyLlxuICAgKi9cblxuICAvKipcbiAgICogRGVmaW5lIGEgbWlkZGxld2FyZSB0aGF0IHRoZSBwbGF5ZXIgc2hvdWxkIHVzZSBieSB3YXkgb2YgYSBmYWN0b3J5IGZ1bmN0aW9uXG4gICAqIHRoYXQgcmV0dXJucyBhIG1pZGRsZXdhcmUgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHR5cGVcbiAgICogICAgICAgICBUaGUgTUlNRSB0eXBlIHRvIG1hdGNoIG9yIGBcIipcImAgZm9yIGFsbCBNSU1FIHR5cGVzLlxuICAgKlxuICAgKiBAcGFyYW0gIHtNaWRkbGV3YXJlRmFjdG9yeX0gbWlkZGxld2FyZVxuICAgKiAgICAgICAgIEEgbWlkZGxld2FyZSBmYWN0b3J5IGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBmb3JcbiAgICogICAgICAgICBtYXRjaGluZyB0eXBlcy5cbiAgICovXG5cbiAgZnVuY3Rpb24gdXNlKHR5cGUsIG1pZGRsZXdhcmUpIHtcbiAgICBtaWRkbGV3YXJlc1t0eXBlXSA9IG1pZGRsZXdhcmVzW3R5cGVdIHx8IFtdO1xuICAgIG1pZGRsZXdhcmVzW3R5cGVdLnB1c2gobWlkZGxld2FyZSk7XG4gIH1cbiAgLyoqXG4gICAqIEFzeW5jaHJvbm91c2x5IHNldHMgYSBzb3VyY2UgdXNpbmcgbWlkZGxld2FyZSBieSByZWN1cnNpbmcgdGhyb3VnaCBhbnlcbiAgICogbWF0Y2hpbmcgbWlkZGxld2FyZXMgYW5kIGNhbGxpbmcgYHNldFNvdXJjZWAgb24gZWFjaCwgcGFzc2luZyBhbG9uZyB0aGVcbiAgICogcHJldmlvdXMgcmV0dXJuZWQgdmFsdWUgZWFjaCB0aW1lLlxuICAgKlxuICAgKiBAcGFyYW0gIHtQbGF5ZXJ9IHBsYXllclxuICAgKiAgICAgICAgIEEge0BsaW5rIFBsYXllcn0gaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSAge1RlY2h+U291cmNlT2JqZWN0fSBzcmNcbiAgICogICAgICAgICBBIHNvdXJjZSBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufVxuICAgKiAgICAgICAgIFRoZSBuZXh0IG1pZGRsZXdhcmUgdG8gcnVuLlxuICAgKi9cblxuICBmdW5jdGlvbiBzZXRTb3VyY2UocGxheWVyLCBzcmMsIG5leHQpIHtcbiAgICBwbGF5ZXIuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gc2V0U291cmNlSGVscGVyKHNyYywgbWlkZGxld2FyZXNbc3JjLnR5cGVdLCBuZXh0LCBwbGF5ZXIpO1xuICAgIH0sIDEpO1xuICB9XG4gIC8qKlxuICAgKiBXaGVuIHRoZSB0ZWNoIGlzIHNldCwgcGFzc2VzIHRoZSB0ZWNoIHRvIGVhY2ggbWlkZGxld2FyZSdzIGBzZXRUZWNoYCBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0W119IG1pZGRsZXdhcmVcbiAgICogICAgICAgIEFuIGFycmF5IG9mIG1pZGRsZXdhcmUgaW5zdGFuY2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1RlY2h9IHRlY2hcbiAgICogICAgICAgIEEgVmlkZW8uanMgdGVjaC5cbiAgICovXG5cbiAgZnVuY3Rpb24gc2V0VGVjaChtaWRkbGV3YXJlLCB0ZWNoKSB7XG4gICAgbWlkZGxld2FyZS5mb3JFYWNoKGZ1bmN0aW9uIChtdykge1xuICAgICAgcmV0dXJuIG13LnNldFRlY2ggJiYgbXcuc2V0VGVjaCh0ZWNoKTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ2FsbHMgYSBnZXR0ZXIgb24gdGhlIHRlY2ggZmlyc3QsIHRocm91Z2ggZWFjaCBtaWRkbGV3YXJlXG4gICAqIGZyb20gcmlnaHQgdG8gbGVmdCB0byB0aGUgcGxheWVyLlxuICAgKlxuICAgKiBAcGFyYW0gIHtPYmplY3RbXX0gbWlkZGxld2FyZVxuICAgKiAgICAgICAgIEFuIGFycmF5IG9mIG1pZGRsZXdhcmUgaW5zdGFuY2VzLlxuICAgKlxuICAgKiBAcGFyYW0gIHtUZWNofSB0ZWNoXG4gICAqICAgICAgICAgVGhlIGN1cnJlbnQgdGVjaC5cbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSBtZXRob2RcbiAgICogICAgICAgICBBIG1ldGhvZCBuYW1lLlxuICAgKlxuICAgKiBAcmV0dXJuIHtNaXhlZH1cbiAgICogICAgICAgICBUaGUgZmluYWwgdmFsdWUgZnJvbSB0aGUgdGVjaCBhZnRlciBtaWRkbGV3YXJlIGhhcyBpbnRlcmNlcHRlZCBpdC5cbiAgICovXG5cbiAgZnVuY3Rpb24gZ2V0KG1pZGRsZXdhcmUsIHRlY2gsIG1ldGhvZCkge1xuICAgIHJldHVybiBtaWRkbGV3YXJlLnJlZHVjZVJpZ2h0KG1pZGRsZXdhcmVJdGVyYXRvcihtZXRob2QpLCB0ZWNoW21ldGhvZF0oKSk7XG4gIH1cbiAgLyoqXG4gICAqIFRha2VzIHRoZSBhcmd1bWVudCBnaXZlbiB0byB0aGUgcGxheWVyIGFuZCBjYWxscyB0aGUgc2V0dGVyIG1ldGhvZCBvbiBlYWNoXG4gICAqIG1pZGRsZXdhcmUgZnJvbSBsZWZ0IHRvIHJpZ2h0IHRvIHRoZSB0ZWNoLlxuICAgKlxuICAgKiBAcGFyYW0gIHtPYmplY3RbXX0gbWlkZGxld2FyZVxuICAgKiAgICAgICAgIEFuIGFycmF5IG9mIG1pZGRsZXdhcmUgaW5zdGFuY2VzLlxuICAgKlxuICAgKiBAcGFyYW0gIHtUZWNofSB0ZWNoXG4gICAqICAgICAgICAgVGhlIGN1cnJlbnQgdGVjaC5cbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSBtZXRob2RcbiAgICogICAgICAgICBBIG1ldGhvZCBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0gIHtNaXhlZH0gYXJnXG4gICAqICAgICAgICAgVGhlIHZhbHVlIHRvIHNldCBvbiB0aGUgdGVjaC5cbiAgICpcbiAgICogQHJldHVybiB7TWl4ZWR9XG4gICAqICAgICAgICAgVGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgYG1ldGhvZGAgb2YgdGhlIGB0ZWNoYC5cbiAgICovXG5cbiAgZnVuY3Rpb24gc2V0JDEobWlkZGxld2FyZSwgdGVjaCwgbWV0aG9kLCBhcmcpIHtcbiAgICByZXR1cm4gdGVjaFttZXRob2RdKG1pZGRsZXdhcmUucmVkdWNlKG1pZGRsZXdhcmVJdGVyYXRvcihtZXRob2QpLCBhcmcpKTtcbiAgfVxuICAvKipcbiAgICogVGFrZXMgdGhlIGFyZ3VtZW50IGdpdmVuIHRvIHRoZSBwbGF5ZXIgYW5kIGNhbGxzIHRoZSBgY2FsbGAgdmVyc2lvbiBvZiB0aGVcbiAgICogbWV0aG9kIG9uIGVhY2ggbWlkZGxld2FyZSBmcm9tIGxlZnQgdG8gcmlnaHQuXG4gICAqXG4gICAqIFRoZW4sIGNhbGwgdGhlIHBhc3NlZCBpbiBtZXRob2Qgb24gdGhlIHRlY2ggYW5kIHJldHVybiB0aGUgcmVzdWx0IHVuY2hhbmdlZFxuICAgKiBiYWNrIHRvIHRoZSBwbGF5ZXIsIHRocm91Z2ggbWlkZGxld2FyZSwgdGhpcyB0aW1lIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICpcbiAgICogQHBhcmFtICB7T2JqZWN0W119IG1pZGRsZXdhcmVcbiAgICogICAgICAgICBBbiBhcnJheSBvZiBtaWRkbGV3YXJlIGluc3RhbmNlcy5cbiAgICpcbiAgICogQHBhcmFtICB7VGVjaH0gdGVjaFxuICAgKiAgICAgICAgIFRoZSBjdXJyZW50IHRlY2guXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gbWV0aG9kXG4gICAqICAgICAgICAgQSBtZXRob2QgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtICB7TWl4ZWR9IGFyZ1xuICAgKiAgICAgICAgIFRoZSB2YWx1ZSB0byBzZXQgb24gdGhlIHRlY2guXG4gICAqXG4gICAqIEByZXR1cm4ge01peGVkfVxuICAgKiAgICAgICAgIFRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGBtZXRob2RgIG9mIHRoZSBgdGVjaGAsIHJlZ2FyZGxlc3Mgb2YgdGhlXG4gICAqICAgICAgICAgcmV0dXJuIHZhbHVlcyBvZiBtaWRkbGV3YXJlcy5cbiAgICovXG5cbiAgZnVuY3Rpb24gbWVkaWF0ZShtaWRkbGV3YXJlLCB0ZWNoLCBtZXRob2QsIGFyZykge1xuICAgIGlmIChhcmcgPT09IHZvaWQgMCkge1xuICAgICAgYXJnID0gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgY2FsbE1ldGhvZCA9ICdjYWxsJyArIHRvVGl0bGVDYXNlKG1ldGhvZCk7XG4gICAgdmFyIG1pZGRsZXdhcmVWYWx1ZSA9IG1pZGRsZXdhcmUucmVkdWNlKG1pZGRsZXdhcmVJdGVyYXRvcihjYWxsTWV0aG9kKSwgYXJnKTtcbiAgICB2YXIgdGVybWluYXRlZCA9IG1pZGRsZXdhcmVWYWx1ZSA9PT0gVEVSTUlOQVRPUjsgLy8gZGVwcmVjYXRlZC4gVGhlIGBudWxsYCByZXR1cm4gdmFsdWUgc2hvdWxkIGluc3RlYWQgcmV0dXJuIFRFUk1JTkFUT1IgdG9cbiAgICAvLyBwcmV2ZW50IGNvbmZ1c2lvbiBpZiBhIHRlY2hzIG1ldGhvZCBhY3R1YWxseSByZXR1cm5zIG51bGwuXG5cbiAgICB2YXIgcmV0dXJuVmFsdWUgPSB0ZXJtaW5hdGVkID8gbnVsbCA6IHRlY2hbbWV0aG9kXShtaWRkbGV3YXJlVmFsdWUpO1xuICAgIGV4ZWN1dGVSaWdodChtaWRkbGV3YXJlLCBtZXRob2QsIHJldHVyblZhbHVlLCB0ZXJtaW5hdGVkKTtcbiAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gIH1cbiAgLyoqXG4gICAqIEVudW1lcmF0aW9uIG9mIGFsbG93ZWQgZ2V0dGVycyB3aGVyZSB0aGUga2V5cyBhcmUgbWV0aG9kIG5hbWVzLlxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cblxuICB2YXIgYWxsb3dlZEdldHRlcnMgPSB7XG4gICAgYnVmZmVyZWQ6IDEsXG4gICAgY3VycmVudFRpbWU6IDEsXG4gICAgZHVyYXRpb246IDEsXG4gICAgc2Vla2FibGU6IDEsXG4gICAgcGxheWVkOiAxLFxuICAgIHBhdXNlZDogMVxuICB9O1xuICAvKipcbiAgICogRW51bWVyYXRpb24gb2YgYWxsb3dlZCBzZXR0ZXJzIHdoZXJlIHRoZSBrZXlzIGFyZSBtZXRob2QgbmFtZXMuXG4gICAqXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuXG4gIHZhciBhbGxvd2VkU2V0dGVycyA9IHtcbiAgICBzZXRDdXJyZW50VGltZTogMVxuICB9O1xuICAvKipcbiAgICogRW51bWVyYXRpb24gb2YgYWxsb3dlZCBtZWRpYXRvcnMgd2hlcmUgdGhlIGtleXMgYXJlIG1ldGhvZCBuYW1lcy5cbiAgICpcbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG5cbiAgdmFyIGFsbG93ZWRNZWRpYXRvcnMgPSB7XG4gICAgcGxheTogMSxcbiAgICBwYXVzZTogMVxuICB9O1xuXG4gIGZ1bmN0aW9uIG1pZGRsZXdhcmVJdGVyYXRvcihtZXRob2QpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlLCBtdykge1xuICAgICAgLy8gaWYgdGhlIHByZXZpb3VzIG1pZGRsZXdhcmUgdGVybWluYXRlZCwgcGFzcyBhbG9uZyB0aGUgdGVybWluYXRpb25cbiAgICAgIGlmICh2YWx1ZSA9PT0gVEVSTUlOQVRPUikge1xuICAgICAgICByZXR1cm4gVEVSTUlOQVRPUjtcbiAgICAgIH1cblxuICAgICAgaWYgKG13W21ldGhvZF0pIHtcbiAgICAgICAgcmV0dXJuIG13W21ldGhvZF0odmFsdWUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV4ZWN1dGVSaWdodChtd3MsIG1ldGhvZCwgdmFsdWUsIHRlcm1pbmF0ZWQpIHtcbiAgICBmb3IgKHZhciBpID0gbXdzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB2YXIgbXcgPSBtd3NbaV07XG5cbiAgICAgIGlmIChtd1ttZXRob2RdKSB7XG4gICAgICAgIG13W21ldGhvZF0odGVybWluYXRlZCwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2xlYXIgdGhlIG1pZGRsZXdhcmUgY2FjaGUgZm9yIGEgcGxheWVyLlxuICAgKlxuICAgKiBAcGFyYW0gIHtQbGF5ZXJ9IHBsYXllclxuICAgKiAgICAgICAgIEEge0BsaW5rIFBsYXllcn0gaW5zdGFuY2UuXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gY2xlYXJDYWNoZUZvclBsYXllcihwbGF5ZXIpIHtcbiAgICBtaWRkbGV3YXJlSW5zdGFuY2VzW3BsYXllci5pZCgpXSA9IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIHtcbiAgICogIFtwbGF5ZXJJZF06IFtbbXdGYWN0b3J5LCBtd0luc3RhbmNlXSwgLi4uXVxuICAgKiB9XG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGdldE9yQ3JlYXRlRmFjdG9yeShwbGF5ZXIsIG13RmFjdG9yeSkge1xuICAgIHZhciBtd3MgPSBtaWRkbGV3YXJlSW5zdGFuY2VzW3BsYXllci5pZCgpXTtcbiAgICB2YXIgbXcgPSBudWxsO1xuXG4gICAgaWYgKG13cyA9PT0gdW5kZWZpbmVkIHx8IG13cyA9PT0gbnVsbCkge1xuICAgICAgbXcgPSBtd0ZhY3RvcnkocGxheWVyKTtcbiAgICAgIG1pZGRsZXdhcmVJbnN0YW5jZXNbcGxheWVyLmlkKCldID0gW1ttd0ZhY3RvcnksIG13XV07XG4gICAgICByZXR1cm4gbXc7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBfbXdzJGkgPSBtd3NbaV0sXG4gICAgICAgICAgbXdmID0gX213cyRpWzBdLFxuICAgICAgICAgIG13aSA9IF9td3MkaVsxXTtcblxuICAgICAgaWYgKG13ZiAhPT0gbXdGYWN0b3J5KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBtdyA9IG13aTtcbiAgICB9XG5cbiAgICBpZiAobXcgPT09IG51bGwpIHtcbiAgICAgIG13ID0gbXdGYWN0b3J5KHBsYXllcik7XG4gICAgICBtd3MucHVzaChbbXdGYWN0b3J5LCBtd10pO1xuICAgIH1cblxuICAgIHJldHVybiBtdztcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFNvdXJjZUhlbHBlcihzcmMsIG1pZGRsZXdhcmUsIG5leHQsIHBsYXllciwgYWNjLCBsYXN0UnVuKSB7XG4gICAgaWYgKHNyYyA9PT0gdm9pZCAwKSB7XG4gICAgICBzcmMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAobWlkZGxld2FyZSA9PT0gdm9pZCAwKSB7XG4gICAgICBtaWRkbGV3YXJlID0gW107XG4gICAgfVxuXG4gICAgaWYgKGFjYyA9PT0gdm9pZCAwKSB7XG4gICAgICBhY2MgPSBbXTtcbiAgICB9XG5cbiAgICBpZiAobGFzdFJ1biA9PT0gdm9pZCAwKSB7XG4gICAgICBsYXN0UnVuID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIF9taWRkbGV3YXJlID0gbWlkZGxld2FyZSxcbiAgICAgICAgbXdGYWN0b3J5ID0gX21pZGRsZXdhcmVbMF0sXG4gICAgICAgIG13cmVzdCA9IF9taWRkbGV3YXJlLnNsaWNlKDEpOyAvLyBpZiBtd0ZhY3RvcnkgaXMgYSBzdHJpbmcsIHRoZW4gd2UncmUgYXQgYSBmb3JrIGluIHRoZSByb2FkXG5cblxuICAgIGlmICh0eXBlb2YgbXdGYWN0b3J5ID09PSAnc3RyaW5nJykge1xuICAgICAgc2V0U291cmNlSGVscGVyKHNyYywgbWlkZGxld2FyZXNbbXdGYWN0b3J5XSwgbmV4dCwgcGxheWVyLCBhY2MsIGxhc3RSdW4pOyAvLyBpZiB3ZSBoYXZlIGFuIG13RmFjdG9yeSwgY2FsbCBpdCB3aXRoIHRoZSBwbGF5ZXIgdG8gZ2V0IHRoZSBtdyxcbiAgICAgIC8vIHRoZW4gY2FsbCB0aGUgbXcncyBzZXRTb3VyY2UgbWV0aG9kXG4gICAgfSBlbHNlIGlmIChtd0ZhY3RvcnkpIHtcbiAgICAgIHZhciBtdyA9IGdldE9yQ3JlYXRlRmFjdG9yeShwbGF5ZXIsIG13RmFjdG9yeSk7IC8vIGlmIHNldFNvdXJjZSBpc24ndCBwcmVzZW50LCBpbXBsaWNpdGx5IHNlbGVjdCB0aGlzIG1pZGRsZXdhcmVcblxuICAgICAgaWYgKCFtdy5zZXRTb3VyY2UpIHtcbiAgICAgICAgYWNjLnB1c2gobXcpO1xuICAgICAgICByZXR1cm4gc2V0U291cmNlSGVscGVyKHNyYywgbXdyZXN0LCBuZXh0LCBwbGF5ZXIsIGFjYywgbGFzdFJ1bik7XG4gICAgICB9XG5cbiAgICAgIG13LnNldFNvdXJjZShhc3NpZ24oe30sIHNyYyksIGZ1bmN0aW9uIChlcnIsIF9zcmMpIHtcbiAgICAgICAgLy8gc29tZXRoaW5nIGhhcHBlbmVkLCB0cnkgdGhlIG5leHQgbWlkZGxld2FyZSBvbiB0aGUgY3VycmVudCBsZXZlbFxuICAgICAgICAvLyBtYWtlIHN1cmUgdG8gdXNlIHRoZSBvbGQgc3JjXG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gc2V0U291cmNlSGVscGVyKHNyYywgbXdyZXN0LCBuZXh0LCBwbGF5ZXIsIGFjYywgbGFzdFJ1bik7XG4gICAgICAgIH0gLy8gd2UndmUgc3VjY2VlZGVkLCBub3cgd2UgbmVlZCB0byBnbyBkZWVwZXJcblxuXG4gICAgICAgIGFjYy5wdXNoKG13KTsgLy8gaWYgaXQncyB0aGUgc2FtZSB0eXBlLCBjb250aW51ZSBkb3duIHRoZSBjdXJyZW50IGNoYWluXG4gICAgICAgIC8vIG90aGVyd2lzZSwgd2Ugd2FudCB0byBnbyBkb3duIHRoZSBuZXcgY2hhaW5cblxuICAgICAgICBzZXRTb3VyY2VIZWxwZXIoX3NyYywgc3JjLnR5cGUgPT09IF9zcmMudHlwZSA/IG13cmVzdCA6IG1pZGRsZXdhcmVzW19zcmMudHlwZV0sIG5leHQsIHBsYXllciwgYWNjLCBsYXN0UnVuKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAobXdyZXN0Lmxlbmd0aCkge1xuICAgICAgc2V0U291cmNlSGVscGVyKHNyYywgbXdyZXN0LCBuZXh0LCBwbGF5ZXIsIGFjYywgbGFzdFJ1bik7XG4gICAgfSBlbHNlIGlmIChsYXN0UnVuKSB7XG4gICAgICBuZXh0KHNyYywgYWNjKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0U291cmNlSGVscGVyKHNyYywgbWlkZGxld2FyZXNbJyonXSwgbmV4dCwgcGxheWVyLCBhY2MsIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNaW1ldHlwZXNcbiAgICpcbiAgICogQHNlZSBodHRwOi8vaHVsLmhhcnZhcmQuZWR1L29pcy8vLy8vc3lzdGVtcy93YXgvd2F4LXB1YmxpYy1oZWxwL21pbWV0eXBlcy5odG1cbiAgICogQHR5cGVkZWYgTWltZXR5cGVzfktpbmRcbiAgICogQGVudW1cbiAgICovXG5cbiAgdmFyIE1pbWV0eXBlc0tpbmQgPSB7XG4gICAgb3B1czogJ3ZpZGVvL29nZycsXG4gICAgb2d2OiAndmlkZW8vb2dnJyxcbiAgICBtcDQ6ICd2aWRlby9tcDQnLFxuICAgIG1vdjogJ3ZpZGVvL21wNCcsXG4gICAgbTR2OiAndmlkZW8vbXA0JyxcbiAgICBta3Y6ICd2aWRlby94LW1hdHJvc2thJyxcbiAgICBtcDM6ICdhdWRpby9tcGVnJyxcbiAgICBhYWM6ICdhdWRpby9hYWMnLFxuICAgIG9nYTogJ2F1ZGlvL29nZycsXG4gICAgbTN1ODogJ2FwcGxpY2F0aW9uL3gtbXBlZ1VSTCcsXG4gICAganBnOiAnaW1hZ2UvanBlZycsXG4gICAganBlZzogJ2ltYWdlL2pwZWcnLFxuICAgIGdpZjogJ2ltYWdlL2dpZicsXG4gICAgcG5nOiAnaW1hZ2UvcG5nJyxcbiAgICBzdmc6ICdpbWFnZS9zdmcreG1sJyxcbiAgICB3ZWJwOiAnaW1hZ2Uvd2VicCdcbiAgfTtcbiAgLyoqXG4gICAqIEdldCB0aGUgbWltZXR5cGUgb2YgYSBnaXZlbiBzcmMgdXJsIGlmIHBvc3NpYmxlXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzcmNcbiAgICogICAgICAgIFRoZSB1cmwgdG8gdGhlIHNyY1xuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgcmV0dXJuIHRoZSBtaW1ldHlwZSBpZiBpdCB3YXMga25vd24gb3IgZW1wdHkgc3RyaW5nIG90aGVyd2lzZVxuICAgKi9cblxuICB2YXIgZ2V0TWltZXR5cGUgPSBmdW5jdGlvbiBnZXRNaW1ldHlwZShzcmMpIHtcbiAgICBpZiAoc3JjID09PSB2b2lkIDApIHtcbiAgICAgIHNyYyA9ICcnO1xuICAgIH1cblxuICAgIHZhciBleHQgPSBnZXRGaWxlRXh0ZW5zaW9uKHNyYyk7XG4gICAgdmFyIG1pbWV0eXBlID0gTWltZXR5cGVzS2luZFtleHQudG9Mb3dlckNhc2UoKV07XG4gICAgcmV0dXJuIG1pbWV0eXBlIHx8ICcnO1xuICB9O1xuICAvKipcbiAgICogRmluZCB0aGUgbWltZSB0eXBlIG9mIGEgZ2l2ZW4gc291cmNlIHN0cmluZyBpZiBwb3NzaWJsZS4gVXNlcyB0aGUgcGxheWVyXG4gICAqIHNvdXJjZSBjYWNoZS5cbiAgICpcbiAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgKiAgICAgICAgVGhlIHBsYXllciBvYmplY3RcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNyY1xuICAgKiAgICAgICAgVGhlIHNvdXJjZSBzdHJpbmdcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiAgICAgICAgIFRoZSB0eXBlIHRoYXQgd2FzIGZvdW5kXG4gICAqL1xuXG4gIHZhciBmaW5kTWltZXR5cGUgPSBmdW5jdGlvbiBmaW5kTWltZXR5cGUocGxheWVyLCBzcmMpIHtcbiAgICBpZiAoIXNyYykge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH0gLy8gMS4gY2hlY2sgZm9yIHRoZSB0eXBlIGluIHRoZSBgc291cmNlYCBjYWNoZVxuXG5cbiAgICBpZiAocGxheWVyLmNhY2hlXy5zb3VyY2Uuc3JjID09PSBzcmMgJiYgcGxheWVyLmNhY2hlXy5zb3VyY2UudHlwZSkge1xuICAgICAgcmV0dXJuIHBsYXllci5jYWNoZV8uc291cmNlLnR5cGU7XG4gICAgfSAvLyAyLiBzZWUgaWYgd2UgaGF2ZSB0aGlzIHNvdXJjZSBpbiBvdXIgYGN1cnJlbnRTb3VyY2VzYCBjYWNoZVxuXG5cbiAgICB2YXIgbWF0Y2hpbmdTb3VyY2VzID0gcGxheWVyLmNhY2hlXy5zb3VyY2VzLmZpbHRlcihmdW5jdGlvbiAocykge1xuICAgICAgcmV0dXJuIHMuc3JjID09PSBzcmM7XG4gICAgfSk7XG5cbiAgICBpZiAobWF0Y2hpbmdTb3VyY2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIG1hdGNoaW5nU291cmNlc1swXS50eXBlO1xuICAgIH0gLy8gMy4gbG9vayBmb3IgdGhlIHNyYyB1cmwgaW4gc291cmNlIGVsZW1lbnRzIGFuZCB1c2UgdGhlIHR5cGUgdGhlcmVcblxuXG4gICAgdmFyIHNvdXJjZXMgPSBwbGF5ZXIuJCQoJ3NvdXJjZScpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcyA9IHNvdXJjZXNbaV07XG5cbiAgICAgIGlmIChzLnR5cGUgJiYgcy5zcmMgJiYgcy5zcmMgPT09IHNyYykge1xuICAgICAgICByZXR1cm4gcy50eXBlO1xuICAgICAgfVxuICAgIH0gLy8gNC4gZmluYWxseSBmYWxsYmFjayB0byBvdXIgbGlzdCBvZiBtaW1lIHR5cGVzIGJhc2VkIG9uIHNyYyB1cmwgZXh0ZW5zaW9uXG5cblxuICAgIHJldHVybiBnZXRNaW1ldHlwZShzcmMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbW9kdWxlIGZpbHRlci1zb3VyY2VcbiAgICovXG4gIC8qKlxuICAgKiBGaWx0ZXIgb3V0IHNpbmdsZSBiYWQgc291cmNlIG9iamVjdHMgb3IgbXVsdGlwbGUgc291cmNlIG9iamVjdHMgaW4gYW5cbiAgICogYXJyYXkuIEFsc28gZmxhdHRlbnMgbmVzdGVkIHNvdXJjZSBvYmplY3QgYXJyYXlzIGludG8gYSAxIGRpbWVuc2lvbmFsXG4gICAqIGFycmF5IG9mIHNvdXJjZSBvYmplY3RzLlxuICAgKlxuICAgKiBAcGFyYW0ge1RlY2h+U291cmNlT2JqZWN0fFRlY2h+U291cmNlT2JqZWN0W119IHNyY1xuICAgKiAgICAgICAgVGhlIHNyYyBvYmplY3QgdG8gZmlsdGVyXG4gICAqXG4gICAqIEByZXR1cm4ge1RlY2h+U291cmNlT2JqZWN0W119XG4gICAqICAgICAgICAgQW4gYXJyYXkgb2Ygc291cmNlb2JqZWN0cyBjb250YWluaW5nIG9ubHkgdmFsaWQgc291cmNlc1xuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICB2YXIgZmlsdGVyU291cmNlID0gZnVuY3Rpb24gZmlsdGVyU291cmNlKHNyYykge1xuICAgIC8vIHRyYXZlcnNlIGFycmF5XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3JjKSkge1xuICAgICAgdmFyIG5ld3NyYyA9IFtdO1xuICAgICAgc3JjLmZvckVhY2goZnVuY3Rpb24gKHNyY29iaikge1xuICAgICAgICBzcmNvYmogPSBmaWx0ZXJTb3VyY2Uoc3Jjb2JqKTtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzcmNvYmopKSB7XG4gICAgICAgICAgbmV3c3JjID0gbmV3c3JjLmNvbmNhdChzcmNvYmopO1xuICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHNyY29iaikpIHtcbiAgICAgICAgICBuZXdzcmMucHVzaChzcmNvYmopO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHNyYyA9IG5ld3NyYztcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcmMgPT09ICdzdHJpbmcnICYmIHNyYy50cmltKCkpIHtcbiAgICAgIC8vIGNvbnZlcnQgc3RyaW5nIGludG8gb2JqZWN0XG4gICAgICBzcmMgPSBbZml4U291cmNlKHtcbiAgICAgICAgc3JjOiBzcmNcbiAgICAgIH0pXTtcbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHNyYykgJiYgdHlwZW9mIHNyYy5zcmMgPT09ICdzdHJpbmcnICYmIHNyYy5zcmMgJiYgc3JjLnNyYy50cmltKCkpIHtcbiAgICAgIC8vIHNyYyBpcyBhbHJlYWR5IHZhbGlkXG4gICAgICBzcmMgPSBbZml4U291cmNlKHNyYyldO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpbnZhbGlkIHNvdXJjZSwgdHVybiBpdCBpbnRvIGFuIGVtcHR5IGFycmF5XG4gICAgICBzcmMgPSBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3JjO1xuICB9O1xuICAvKipcbiAgICogQ2hlY2tzIHNyYyBtaW1ldHlwZSwgYWRkaW5nIGl0IHdoZW4gcG9zc2libGVcbiAgICpcbiAgICogQHBhcmFtIHtUZWNoflNvdXJjZU9iamVjdH0gc3JjXG4gICAqICAgICAgICBUaGUgc3JjIG9iamVjdCB0byBjaGVja1xuICAgKiBAcmV0dXJuIHtUZWNoflNvdXJjZU9iamVjdH1cbiAgICogICAgICAgIHNyYyBPYmplY3Qgd2l0aCBrbm93biB0eXBlXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gZml4U291cmNlKHNyYykge1xuICAgIHZhciBtaW1ldHlwZSA9IGdldE1pbWV0eXBlKHNyYy5zcmMpO1xuXG4gICAgaWYgKCFzcmMudHlwZSAmJiBtaW1ldHlwZSkge1xuICAgICAgc3JjLnR5cGUgPSBtaW1ldHlwZTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3JjO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBgTWVkaWFMb2FkZXJgIGlzIHRoZSBgQ29tcG9uZW50YCB0aGF0IGRlY2lkZXMgd2hpY2ggcGxheWJhY2sgdGVjaG5vbG9neSB0byBsb2FkXG4gICAqIHdoZW4gYSBwbGF5ZXIgaXMgaW5pdGlhbGl6ZWQuXG4gICAqXG4gICAqIEBleHRlbmRzIENvbXBvbmVudFxuICAgKi9cblxuICB2YXIgTWVkaWFMb2FkZXIgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoTWVkaWFMb2FkZXIsIF9Db21wb25lbnQpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGF0dGFjaCB0by5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Q29tcG9uZW50flJlYWR5Q2FsbGJhY2t9IFtyZWFkeV1cbiAgICAgKiAgICAgICAgVGhlIGZ1bmN0aW9uIHRoYXQgaXMgcnVuIHdoZW4gdGhpcyBjb21wb25lbnQgaXMgcmVhZHkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTWVkaWFMb2FkZXIocGxheWVyLCBvcHRpb25zLCByZWFkeSkge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICAvLyBNZWRpYUxvYWRlciBoYXMgbm8gZWxlbWVudFxuICAgICAgdmFyIG9wdGlvbnNfID0gbWVyZ2VPcHRpb25zKHtcbiAgICAgICAgY3JlYXRlRWw6IGZhbHNlXG4gICAgICB9LCBvcHRpb25zKTtcbiAgICAgIF90aGlzID0gX0NvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9uc18sIHJlYWR5KSB8fCB0aGlzOyAvLyBJZiB0aGVyZSBhcmUgbm8gc291cmNlcyB3aGVuIHRoZSBwbGF5ZXIgaXMgaW5pdGlhbGl6ZWQsXG4gICAgICAvLyBsb2FkIHRoZSBmaXJzdCBzdXBwb3J0ZWQgcGxheWJhY2sgdGVjaG5vbG9neS5cblxuICAgICAgaWYgKCFvcHRpb25zLnBsYXllck9wdGlvbnMuc291cmNlcyB8fCBvcHRpb25zLnBsYXllck9wdGlvbnMuc291cmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBvcHRpb25zLnBsYXllck9wdGlvbnMudGVjaE9yZGVyOyBpIDwgai5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciB0ZWNoTmFtZSA9IHRvVGl0bGVDYXNlKGpbaV0pO1xuICAgICAgICAgIHZhciB0ZWNoID0gVGVjaC5nZXRUZWNoKHRlY2hOYW1lKTsgLy8gU3VwcG9ydCBvbGQgYmVoYXZpb3Igb2YgdGVjaHMgYmVpbmcgcmVnaXN0ZXJlZCBhcyBjb21wb25lbnRzLlxuICAgICAgICAgIC8vIFJlbW92ZSBvbmNlIHRoYXQgZGVwcmVjYXRlZCBiZWhhdmlvciBpcyByZW1vdmVkLlxuXG4gICAgICAgICAgaWYgKCF0ZWNoTmFtZSkge1xuICAgICAgICAgICAgdGVjaCA9IENvbXBvbmVudC5nZXRDb21wb25lbnQodGVjaE5hbWUpO1xuICAgICAgICAgIH0gLy8gQ2hlY2sgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhpcyB0ZWNobm9sb2d5XG5cblxuICAgICAgICAgIGlmICh0ZWNoICYmIHRlY2guaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgcGxheWVyLmxvYWRUZWNoXyh0ZWNoTmFtZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBwbGF5YmFjayB0ZWNobm9sb2dpZXMgKEhUTUw1LCBGbGFzaCkgYW5kIGNoZWNrIGZvciBzdXBwb3J0LlxuICAgICAgICAvLyBUaGVuIGxvYWQgdGhlIGJlc3Qgc291cmNlLlxuICAgICAgICAvLyBBIGZldyBhc3N1bXB0aW9ucyBoZXJlOlxuICAgICAgICAvLyAgIEFsbCBwbGF5YmFjayB0ZWNobm9sb2dpZXMgcmVzcGVjdCBwcmVsb2FkIGZhbHNlLlxuICAgICAgICBwbGF5ZXIuc3JjKG9wdGlvbnMucGxheWVyT3B0aW9ucy5zb3VyY2VzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIHJldHVybiBNZWRpYUxvYWRlcjtcbiAgfShDb21wb25lbnQpO1xuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnTWVkaWFMb2FkZXInLCBNZWRpYUxvYWRlcik7XG5cbiAgLyoqXG4gICAqIENsaWNrYWJsZSBDb21wb25lbnQgd2hpY2ggaXMgY2xpY2thYmxlIG9yIGtleWJvYXJkIGFjdGlvbmFibGUsXG4gICAqIGJ1dCBpcyBub3QgYSBuYXRpdmUgSFRNTCBidXR0b24uXG4gICAqXG4gICAqIEBleHRlbmRzIENvbXBvbmVudFxuICAgKi9cblxuICB2YXIgQ2xpY2thYmxlQ29tcG9uZW50ID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAgIF9pbmhlcml0c0xvb3NlKENsaWNrYWJsZUNvbXBvbmVudCwgX0NvbXBvbmVudCk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtQbGF5ZXJ9IHBsYXllclxuICAgICAqICAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDbGlja2FibGVDb21wb25lbnQocGxheWVyLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX0NvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcblxuICAgICAgX3RoaXMuZW1pdFRhcEV2ZW50cygpO1xuXG4gICAgICBfdGhpcy5lbmFibGUoKTtcblxuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgcyBET00gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdGFnPWRpdl1cbiAgICAgKiAgICAgICAgVGhlIGVsZW1lbnQncyBub2RlIHR5cGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3Byb3BzPXt9XVxuICAgICAqICAgICAgICBBbiBvYmplY3Qgb2YgcHJvcGVydGllcyB0aGF0IHNob3VsZCBiZSBzZXQgb24gdGhlIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW2F0dHJpYnV0ZXM9e31dXG4gICAgICogICAgICAgIEFuIG9iamVjdCBvZiBhdHRyaWJ1dGVzIHRoYXQgc2hvdWxkIGJlIHNldCBvbiB0aGUgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IGdldHMgY3JlYXRlZC5cbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90byA9IENsaWNrYWJsZUNvbXBvbmVudC5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSh0YWcsIHByb3BzLCBhdHRyaWJ1dGVzKSB7XG4gICAgICBpZiAodGFnID09PSB2b2lkIDApIHtcbiAgICAgICAgdGFnID0gJ2Rpdic7XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHByb3BzID0ge307XG4gICAgICB9XG5cbiAgICAgIGlmIChhdHRyaWJ1dGVzID09PSB2b2lkIDApIHtcbiAgICAgICAgYXR0cmlidXRlcyA9IHt9O1xuICAgICAgfVxuXG4gICAgICBwcm9wcyA9IGFzc2lnbih7XG4gICAgICAgIGlubmVySFRNTDogJzxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIGNsYXNzPVwidmpzLWljb24tcGxhY2Vob2xkZXJcIj48L3NwYW4+JyxcbiAgICAgICAgY2xhc3NOYW1lOiB0aGlzLmJ1aWxkQ1NTQ2xhc3MoKSxcbiAgICAgICAgdGFiSW5kZXg6IDBcbiAgICAgIH0sIHByb3BzKTtcblxuICAgICAgaWYgKHRhZyA9PT0gJ2J1dHRvbicpIHtcbiAgICAgICAgbG9nLmVycm9yKFwiQ3JlYXRpbmcgYSBDbGlja2FibGVDb21wb25lbnQgd2l0aCBhbiBIVE1MIGVsZW1lbnQgb2YgXCIgKyB0YWcgKyBcIiBpcyBub3Qgc3VwcG9ydGVkOyB1c2UgYSBCdXR0b24gaW5zdGVhZC5cIik7XG4gICAgICB9IC8vIEFkZCBBUklBIGF0dHJpYnV0ZXMgZm9yIGNsaWNrYWJsZSBlbGVtZW50IHdoaWNoIGlzIG5vdCBhIG5hdGl2ZSBIVE1MIGJ1dHRvblxuXG5cbiAgICAgIGF0dHJpYnV0ZXMgPSBhc3NpZ24oe1xuICAgICAgICByb2xlOiAnYnV0dG9uJ1xuICAgICAgfSwgYXR0cmlidXRlcyk7XG4gICAgICB0aGlzLnRhYkluZGV4XyA9IHByb3BzLnRhYkluZGV4O1xuXG4gICAgICB2YXIgZWwgPSBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsIHRhZywgcHJvcHMsIGF0dHJpYnV0ZXMpO1xuXG4gICAgICB0aGlzLmNyZWF0ZUNvbnRyb2xUZXh0RWwoZWwpO1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH07XG5cbiAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAvLyByZW1vdmUgY29udHJvbFRleHRFbF8gb24gZGlzcG9zZVxuICAgICAgdGhpcy5jb250cm9sVGV4dEVsXyA9IG51bGw7XG5cbiAgICAgIF9Db21wb25lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgY29udHJvbCB0ZXh0IGVsZW1lbnQgb24gdGhpcyBgQ29tcG9uZW50YFxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBbZWxdXG4gICAgICogICAgICAgIFBhcmVudCBlbGVtZW50IGZvciB0aGUgY29udHJvbCB0ZXh0LlxuICAgICAqXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgKiAgICAgICAgIFRoZSBjb250cm9sIHRleHQgZWxlbWVudCB0aGF0IGdldHMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3JlYXRlQ29udHJvbFRleHRFbCA9IGZ1bmN0aW9uIGNyZWF0ZUNvbnRyb2xUZXh0RWwoZWwpIHtcbiAgICAgIHRoaXMuY29udHJvbFRleHRFbF8gPSBjcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAndmpzLWNvbnRyb2wtdGV4dCdcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gbGV0IHRoZSBzY3JlZW4gcmVhZGVyIHVzZXIga25vdyB0aGF0IHRoZSB0ZXh0IG9mIHRoZSBlbGVtZW50IG1heSBjaGFuZ2VcbiAgICAgICAgJ2FyaWEtbGl2ZSc6ICdwb2xpdGUnXG4gICAgICB9KTtcblxuICAgICAgaWYgKGVsKSB7XG4gICAgICAgIGVsLmFwcGVuZENoaWxkKHRoaXMuY29udHJvbFRleHRFbF8pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmNvbnRyb2xUZXh0KHRoaXMuY29udHJvbFRleHRfLCBlbCk7XG4gICAgICByZXR1cm4gdGhpcy5jb250cm9sVGV4dEVsXztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IG9yIHNldCB0aGUgbG9jYWxpemUgdGV4dCB0byB1c2UgZm9yIHRoZSBjb250cm9scyBvbiB0aGUgYENvbXBvbmVudGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3RleHRdXG4gICAgICogICAgICAgIENvbnRyb2wgdGV4dCBmb3IgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gW2VsPXRoaXMuZWwoKV1cbiAgICAgKiAgICAgICAgRWxlbWVudCB0byBzZXQgdGhlIHRpdGxlIG9uLlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgLSBUaGUgY29udHJvbCB0ZXh0IHdoZW4gZ2V0dGluZ1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jb250cm9sVGV4dCA9IGZ1bmN0aW9uIGNvbnRyb2xUZXh0KHRleHQsIGVsKSB7XG4gICAgICBpZiAoZWwgPT09IHZvaWQgMCkge1xuICAgICAgICBlbCA9IHRoaXMuZWwoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRleHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250cm9sVGV4dF8gfHwgJ05lZWQgVGV4dCc7XG4gICAgICB9XG5cbiAgICAgIHZhciBsb2NhbGl6ZWRUZXh0ID0gdGhpcy5sb2NhbGl6ZSh0ZXh0KTtcbiAgICAgIHRoaXMuY29udHJvbFRleHRfID0gdGV4dDtcbiAgICAgIHRleHRDb250ZW50KHRoaXMuY29udHJvbFRleHRFbF8sIGxvY2FsaXplZFRleHQpO1xuXG4gICAgICBpZiAoIXRoaXMubm9uSWNvbkNvbnRyb2wpIHtcbiAgICAgICAgLy8gU2V0IHRpdGxlIGF0dHJpYnV0ZSBpZiBvbmx5IGFuIGljb24gaXMgc2hvd25cbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCd0aXRsZScsIGxvY2FsaXplZFRleHQpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgdGhlIGRlZmF1bHQgRE9NIGBjbGFzc05hbWVgLlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgVGhlIERPTSBgY2xhc3NOYW1lYCBmb3IgdGhpcyBvYmplY3QuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgICAgcmV0dXJuIFwidmpzLWNvbnRyb2wgdmpzLWJ1dHRvbiBcIiArIF9Db21wb25lbnQucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5hYmxlIHRoaXMgYENvbXBvbmVudGBzIGVsZW1lbnQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmVuYWJsZSA9IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICAgIGlmICghdGhpcy5lbmFibGVkXykge1xuICAgICAgICB0aGlzLmVuYWJsZWRfID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWRpc2FibGVkJyk7XG4gICAgICAgIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICdmYWxzZScpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy50YWJJbmRleF8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5lbF8uc2V0QXR0cmlidXRlKCd0YWJJbmRleCcsIHRoaXMudGFiSW5kZXhfKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub24oWyd0YXAnLCAnY2xpY2snXSwgdGhpcy5oYW5kbGVDbGljayk7XG4gICAgICAgIHRoaXMub24oJ2ZvY3VzJywgdGhpcy5oYW5kbGVGb2N1cyk7XG4gICAgICAgIHRoaXMub24oJ2JsdXInLCB0aGlzLmhhbmRsZUJsdXIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNhYmxlIHRoaXMgYENvbXBvbmVudGBzIGVsZW1lbnQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmRpc2FibGUgPSBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgdGhpcy5lbmFibGVkXyA9IGZhbHNlO1xuICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWRpc2FibGVkJyk7XG4gICAgICB0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCAndHJ1ZScpO1xuXG4gICAgICBpZiAodHlwZW9mIHRoaXMudGFiSW5kZXhfICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLmVsXy5yZW1vdmVBdHRyaWJ1dGUoJ3RhYkluZGV4Jyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMub2ZmKFsndGFwJywgJ2NsaWNrJ10sIHRoaXMuaGFuZGxlQ2xpY2spO1xuICAgICAgdGhpcy5vZmYoJ2ZvY3VzJywgdGhpcy5oYW5kbGVGb2N1cyk7XG4gICAgICB0aGlzLm9mZignYmx1cicsIHRoaXMuaGFuZGxlQmx1cik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhIGBDbGlja2FibGVDb21wb25lbnRgIGdldHM6XG4gICAgICogLSBDbGlja2VkICh2aWEgdGhlIGBjbGlja2AgZXZlbnQsIGxpc3RlbmluZyBzdGFydHMgaW4gdGhlIGNvbnN0cnVjdG9yKVxuICAgICAqIC0gVGFwcGVkICh2aWEgdGhlIGB0YXBgIGV2ZW50LCBsaXN0ZW5pbmcgc3RhcnRzIGluIHRoZSBjb25zdHJ1Y3RvcilcbiAgICAgKiAtIFRoZSBmb2xsb3dpbmcgdGhpbmdzIGhhcHBlbiBpbiBvcmRlcjpcbiAgICAgKiAgIDEuIHtAbGluayBDbGlja2FibGVDb21wb25lbnQjaGFuZGxlRm9jdXN9IGlzIGNhbGxlZCB2aWEgYSBgZm9jdXNgIGV2ZW50IG9uIHRoZVxuICAgICAqICAgICAgYENsaWNrYWJsZUNvbXBvbmVudGAuXG4gICAgICogICAyLiB7QGxpbmsgQ2xpY2thYmxlQ29tcG9uZW50I2hhbmRsZUZvY3VzfSBhZGRzIGEgbGlzdGVuZXIgZm9yIGBrZXlkb3duYCBvbiB1c2luZ1xuICAgICAqICAgICAge0BsaW5rIENsaWNrYWJsZUNvbXBvbmVudCNoYW5kbGVLZXlQcmVzc30uXG4gICAgICogICAzLiBgQ2xpY2thYmxlQ29tcG9uZW50YCBoYXMgbm90IGhhZCBhIGBibHVyYCBldmVudCAoYGJsdXJgIG1lYW5zIHRoYXQgZm9jdXMgd2FzIGxvc3QpLiBUaGUgdXNlciBwcmVzc2VzXG4gICAgICogICAgICB0aGUgc3BhY2Ugb3IgZW50ZXIga2V5LlxuICAgICAqICAgNC4ge0BsaW5rIENsaWNrYWJsZUNvbXBvbmVudCNoYW5kbGVLZXlQcmVzc30gY2FsbHMgdGhpcyBmdW5jdGlvbiB3aXRoIHRoZSBga2V5ZG93bmBcbiAgICAgKiAgICAgIGV2ZW50IGFzIGEgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgVGhlIGBrZXlkb3duYCwgYHRhcGAsIG9yIGBjbGlja2AgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZVxuICAgICAqICAgICAgICBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyB0YXBcbiAgICAgKiBAbGlzdGVucyBjbGlja1xuICAgICAqIEBhYnN0cmFjdFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7fVxuICAgIC8qKlxuICAgICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhIGBDbGlja2FibGVDb21wb25lbnRgIGdhaW5zIGZvY3VzIHZpYSBhIGBmb2N1c2AgZXZlbnQuXG4gICAgICogVHVybnMgb24gbGlzdGVuaW5nIGZvciBga2V5ZG93bmAgZXZlbnRzLiBXaGVuIHRoZXkgaGFwcGVuIGl0XG4gICAgICogY2FsbHMgYHRoaXMuaGFuZGxlS2V5UHJlc3NgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgVGhlIGBmb2N1c2AgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZSBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBmb2N1c1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVGb2N1cyA9IGZ1bmN0aW9uIGhhbmRsZUZvY3VzKGV2ZW50KSB7XG4gICAgICBvbihkb2N1bWVudCwgJ2tleWRvd24nLCBiaW5kKHRoaXMsIHRoaXMuaGFuZGxlS2V5UHJlc3MpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gdGhpcyBDbGlja2FibGVDb21wb25lbnQgaGFzIGZvY3VzIGFuZCBhIGtleSBnZXRzIHByZXNzZWQgZG93bi4gQnlcbiAgICAgKiBkZWZhdWx0IGl0IHdpbGwgY2FsbCBgdGhpcy5oYW5kbGVDbGlja2Agd2hlbiB0aGUga2V5IGlzIHNwYWNlIG9yIGVudGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgVGhlIGBrZXlkb3duYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIGtleWRvd25cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlS2V5UHJlc3MgPSBmdW5jdGlvbiBoYW5kbGVLZXlQcmVzcyhldmVudCkge1xuICAgICAgLy8gU3VwcG9ydCBTcGFjZSBvciBFbnRlciBrZXkgb3BlcmF0aW9uIHRvIGZpcmUgYSBjbGljayBldmVudFxuICAgICAgaWYgKGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ1NwYWNlJykgfHwga2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnRW50ZXInKSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBQYXNzIGtleXByZXNzIGhhbmRsaW5nIHVwIGZvciB1bnN1cHBvcnRlZCBrZXlzXG4gICAgICAgIF9Db21wb25lbnQucHJvdG90eXBlLmhhbmRsZUtleVByZXNzLmNhbGwodGhpcywgZXZlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiBhIGBDbGlja2FibGVDb21wb25lbnRgIGxvc2VzIGZvY3VzLiBUdXJucyBvZmYgdGhlIGxpc3RlbmVyIGZvclxuICAgICAqIGBrZXlkb3duYCBldmVudHMuIFdoaWNoIFN0b3BzIGB0aGlzLmhhbmRsZUtleVByZXNzYCBmcm9tIGdldHRpbmcgY2FsbGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgVGhlIGBibHVyYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIGJsdXJcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlQmx1ciA9IGZ1bmN0aW9uIGhhbmRsZUJsdXIoZXZlbnQpIHtcbiAgICAgIG9mZihkb2N1bWVudCwgJ2tleWRvd24nLCBiaW5kKHRoaXMsIHRoaXMuaGFuZGxlS2V5UHJlc3MpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENsaWNrYWJsZUNvbXBvbmVudDtcbiAgfShDb21wb25lbnQpO1xuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnQ2xpY2thYmxlQ29tcG9uZW50JywgQ2xpY2thYmxlQ29tcG9uZW50KTtcblxuICAvKipcbiAgICogQSBgQ2xpY2thYmxlQ29tcG9uZW50YCB0aGF0IGhhbmRsZXMgc2hvd2luZyB0aGUgcG9zdGVyIGltYWdlIGZvciB0aGUgcGxheWVyLlxuICAgKlxuICAgKiBAZXh0ZW5kcyBDbGlja2FibGVDb21wb25lbnRcbiAgICovXG5cbiAgdmFyIFBvc3RlckltYWdlID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX0NsaWNrYWJsZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0c0xvb3NlKFBvc3RlckltYWdlLCBfQ2xpY2thYmxlQ29tcG9uZW50KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBhdHRhY2ggdG8uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUG9zdGVySW1hZ2UocGxheWVyLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX0NsaWNrYWJsZUNvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcblxuICAgICAgX3RoaXMudXBkYXRlKCk7XG5cbiAgICAgIHBsYXllci5vbigncG9zdGVyY2hhbmdlJywgYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMudXBkYXRlKSk7XG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFuIHVwIGFuZCBkaXNwb3NlIG9mIHRoZSBgUG9zdGVySW1hZ2VgLlxuICAgICAqL1xuXG5cbiAgICB2YXIgX3Byb3RvID0gUG9zdGVySW1hZ2UucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgdGhpcy5wbGF5ZXIoKS5vZmYoJ3Bvc3RlcmNoYW5nZScsIHRoaXMudXBkYXRlKTtcblxuICAgICAgX0NsaWNrYWJsZUNvbXBvbmVudC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIGBQb3N0ZXJJbWFnZWBzIERPTSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgZ2V0cyBjcmVhdGVkLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsJCQxKCkge1xuICAgICAgdmFyIGVsID0gY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAndmpzLXBvc3RlcicsXG4gICAgICAgIC8vIERvbid0IHdhbnQgcG9zdGVyIHRvIGJlIHRhYmJhYmxlLlxuICAgICAgICB0YWJJbmRleDogLTFcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbiB7QGxpbmsgRXZlbnRUYXJnZXR+RXZlbnRMaXN0ZW5lcn0gZm9yIHtAbGluayBQbGF5ZXIjcG9zdGVyY2hhbmdlfSBldmVudHMuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBQbGF5ZXIjcG9zdGVyY2hhbmdlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyI3Bvc3RlcmNoYW5nZWAgZXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhpcyBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGV2ZW50KSB7XG4gICAgICB2YXIgdXJsID0gdGhpcy5wbGF5ZXIoKS5wb3N0ZXIoKTtcbiAgICAgIHRoaXMuc2V0U3JjKHVybCk7IC8vIElmIHRoZXJlJ3Mgbm8gcG9zdGVyIHNvdXJjZSB3ZSBzaG91bGQgZGlzcGxheTpub25lIG9uIHRoaXMgY29tcG9uZW50XG4gICAgICAvLyBzbyBpdCdzIG5vdCBzdGlsbCBjbGlja2FibGUgb3IgcmlnaHQtY2xpY2thYmxlXG5cbiAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzb3VyY2Ugb2YgdGhlIGBQb3N0ZXJJbWFnZWAgZGVwZW5kaW5nIG9uIHRoZSBkaXNwbGF5IG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICAgKiAgICAgICAgVGhlIFVSTCB0byB0aGUgc291cmNlIGZvciB0aGUgYFBvc3RlckltYWdlYC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uc2V0U3JjID0gZnVuY3Rpb24gc2V0U3JjKHVybCkge1xuICAgICAgdmFyIGJhY2tncm91bmRJbWFnZSA9ICcnOyAvLyBBbnkgZmFsc3kgdmFsdWUgc2hvdWxkIHN0YXkgYXMgYW4gZW1wdHkgc3RyaW5nLCBvdGhlcndpc2VcbiAgICAgIC8vIHRoaXMgd2lsbCB0aHJvdyBhbiBleHRyYSBlcnJvclxuXG4gICAgICBpZiAodXJsKSB7XG4gICAgICAgIGJhY2tncm91bmRJbWFnZSA9IFwidXJsKFxcXCJcIiArIHVybCArIFwiXFxcIilcIjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5lbF8uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYmFja2dyb3VuZEltYWdlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbiB7QGxpbmsgRXZlbnRUYXJnZXR+RXZlbnRMaXN0ZW5lcn0gZm9yIGNsaWNrcyBvbiB0aGUgYFBvc3RlckltYWdlYC4gU2VlXG4gICAgICoge0BsaW5rIENsaWNrYWJsZUNvbXBvbmVudCNoYW5kbGVDbGlja30gZm9yIGluc3RhbmNlcyB3aGVyZSB0aGlzIHdpbGwgYmUgdHJpZ2dlcmVkLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgdGFwXG4gICAgICogQGxpc3RlbnMgY2xpY2tcbiAgICAgKiBAbGlzdGVucyBrZXlkb3duXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICArICAgICAgICBUaGUgYGNsaWNrYCwgYHRhcGAgb3IgYGtleWRvd25gIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmUgY2FsbGVkLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XG4gICAgICAvLyBXZSBkb24ndCB3YW50IGEgY2xpY2sgdG8gdHJpZ2dlciBwbGF5YmFjayB3aGVuIGNvbnRyb2xzIGFyZSBkaXNhYmxlZFxuICAgICAgaWYgKCF0aGlzLnBsYXllcl8uY29udHJvbHMoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnBsYXllcl8ucGF1c2VkKCkpIHtcbiAgICAgICAgc2lsZW5jZVByb21pc2UodGhpcy5wbGF5ZXJfLnBsYXkoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBsYXllcl8ucGF1c2UoKTtcbiAgICAgIH0gLy8gY2FsbCBoYW5kbGVGb2N1cyBtYW51YWxseSB0byBnZXQgaG90a2V5cyB3b3JraW5nXG5cblxuICAgICAgdGhpcy5wbGF5ZXJfLmhhbmRsZUZvY3VzKHt9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBvc3RlckltYWdlO1xuICB9KENsaWNrYWJsZUNvbXBvbmVudCk7XG5cbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdQb3N0ZXJJbWFnZScsIFBvc3RlckltYWdlKTtcblxuICB2YXIgZGFya0dyYXkgPSAnIzIyMic7XG4gIHZhciBsaWdodEdyYXkgPSAnI2NjYyc7XG4gIHZhciBmb250TWFwID0ge1xuICAgIG1vbm9zcGFjZTogJ21vbm9zcGFjZScsXG4gICAgc2Fuc1NlcmlmOiAnc2Fucy1zZXJpZicsXG4gICAgc2VyaWY6ICdzZXJpZicsXG4gICAgbW9ub3NwYWNlU2Fuc1NlcmlmOiAnXCJBbmRhbGUgTW9ub1wiLCBcIkx1Y2lkYSBDb25zb2xlXCIsIG1vbm9zcGFjZScsXG4gICAgbW9ub3NwYWNlU2VyaWY6ICdcIkNvdXJpZXIgTmV3XCIsIG1vbm9zcGFjZScsXG4gICAgcHJvcG9ydGlvbmFsU2Fuc1NlcmlmOiAnc2Fucy1zZXJpZicsXG4gICAgcHJvcG9ydGlvbmFsU2VyaWY6ICdzZXJpZicsXG4gICAgY2FzdWFsOiAnXCJDb21pYyBTYW5zIE1TXCIsIEltcGFjdCwgZmFudGFzeScsXG4gICAgc2NyaXB0OiAnXCJNb25vdHlwZSBDb3JzaXZhXCIsIGN1cnNpdmUnLFxuICAgIHNtYWxsY2FwczogJ1wiQW5kYWxlIE1vbm9cIiwgXCJMdWNpZGEgQ29uc29sZVwiLCBtb25vc3BhY2UsIHNhbnMtc2VyaWYnXG4gIH07XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3QgYW4gcmdiYSBjb2xvciBmcm9tIGEgZ2l2ZW4gaGV4IGNvbG9yIGNvZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjb2xvclxuICAgKiAgICAgICAgSGV4IG51bWJlciBmb3IgY29sb3IsIGxpa2UgI2YwZSBvciAjZjYwNGUyLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eVxuICAgKiAgICAgICAgVmFsdWUgZm9yIG9wYWNpdHksIDAuMCAtIDEuMC5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiAgICAgICAgIFRoZSByZ2JhIGNvbG9yIHRoYXQgd2FzIGNyZWF0ZWQsIGxpa2UgJ3JnYmEoMjU1LCAwLCAwLCAwLjMpJy5cbiAgICovXG5cbiAgZnVuY3Rpb24gY29uc3RydWN0Q29sb3IoY29sb3IsIG9wYWNpdHkpIHtcbiAgICB2YXIgaGV4O1xuXG4gICAgaWYgKGNvbG9yLmxlbmd0aCA9PT0gNCkge1xuICAgICAgLy8gY29sb3IgbG9va3MgbGlrZSBcIiNmMGVcIlxuICAgICAgaGV4ID0gY29sb3JbMV0gKyBjb2xvclsxXSArIGNvbG9yWzJdICsgY29sb3JbMl0gKyBjb2xvclszXSArIGNvbG9yWzNdO1xuICAgIH0gZWxzZSBpZiAoY29sb3IubGVuZ3RoID09PSA3KSB7XG4gICAgICAvLyBjb2xvciBsb29rcyBsaWtlIFwiI2Y2MDRlMlwiXG4gICAgICBoZXggPSBjb2xvci5zbGljZSgxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvbG9yIGNvZGUgcHJvdmlkZWQsICcgKyBjb2xvciArICc7IG11c3QgYmUgZm9ybWF0dGVkIGFzIGUuZy4gI2YwZSBvciAjZjYwNGUyLicpO1xuICAgIH1cblxuICAgIHJldHVybiAncmdiYSgnICsgcGFyc2VJbnQoaGV4LnNsaWNlKDAsIDIpLCAxNikgKyAnLCcgKyBwYXJzZUludChoZXguc2xpY2UoMiwgNCksIDE2KSArICcsJyArIHBhcnNlSW50KGhleC5zbGljZSg0LCA2KSwgMTYpICsgJywnICsgb3BhY2l0eSArICcpJztcbiAgfVxuICAvKipcbiAgICogVHJ5IHRvIHVwZGF0ZSB0aGUgc3R5bGUgb2YgYSBET00gZWxlbWVudC4gU29tZSBzdHlsZSBjaGFuZ2VzIHdpbGwgdGhyb3cgYW4gZXJyb3IsXG4gICAqIHBhcnRpY3VsYXJseSBpbiBJRTguIFRob3NlIHNob3VsZCBiZSBub29wcy5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiAgICAgICAgVGhlIERPTSBlbGVtZW50IHRvIGJlIHN0eWxlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0eWxlXG4gICAqICAgICAgICBUaGUgQ1NTIHByb3BlcnR5IG9uIHRoZSBlbGVtZW50IHRoYXQgc2hvdWxkIGJlIHN0eWxlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJ1bGVcbiAgICogICAgICAgIFRoZSBzdHlsZSBydWxlIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gdGhlIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBmdW5jdGlvbiB0cnlVcGRhdGVTdHlsZShlbCwgc3R5bGUsIHJ1bGUpIHtcbiAgICB0cnkge1xuICAgICAgZWwuc3R5bGVbc3R5bGVdID0gcnVsZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBTYXRpc2ZpZXMgbGludGVyLlxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVGhlIGNvbXBvbmVudCBmb3IgZGlzcGxheWluZyB0ZXh0IHRyYWNrIGN1ZXMuXG4gICAqXG4gICAqIEBleHRlbmRzIENvbXBvbmVudFxuICAgKi9cblxuXG4gIHZhciBUZXh0VHJhY2tEaXNwbGF5ID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAgIF9pbmhlcml0c0xvb3NlKFRleHRUcmFja0Rpc3BsYXksIF9Db21wb25lbnQpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Q29tcG9uZW50flJlYWR5Q2FsbGJhY2t9IFtyZWFkeV1cbiAgICAgKiAgICAgICAgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBgVGV4dFRyYWNrRGlzcGxheWAgaXMgcmVhZHkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGV4dFRyYWNrRGlzcGxheShwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX0NvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucywgcmVhZHkpIHx8IHRoaXM7XG4gICAgICB2YXIgdXBkYXRlRGlzcGxheUhhbmRsZXIgPSBiaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBfdGhpcy51cGRhdGVEaXNwbGF5KTtcbiAgICAgIHBsYXllci5vbignbG9hZHN0YXJ0JywgYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMudG9nZ2xlRGlzcGxheSkpO1xuICAgICAgcGxheWVyLm9uKCd0ZXh0dHJhY2tjaGFuZ2UnLCB1cGRhdGVEaXNwbGF5SGFuZGxlcik7XG4gICAgICBwbGF5ZXIub24oJ2xvYWRlZG1ldGFkYXRhJywgYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMucHJlc2VsZWN0VHJhY2spKTsgLy8gVGhpcyB1c2VkIHRvIGJlIGNhbGxlZCBkdXJpbmcgcGxheWVyIGluaXQsIGJ1dCB3YXMgY2F1c2luZyBhbiBlcnJvclxuICAgICAgLy8gaWYgYSB0cmFjayBzaG91bGQgc2hvdyBieSBkZWZhdWx0IGFuZCB0aGUgZGlzcGxheSBoYWRuJ3QgbG9hZGVkIHlldC5cbiAgICAgIC8vIFNob3VsZCBwcm9iYWJseSBiZSBtb3ZlZCB0byBhbiBleHRlcm5hbCB0cmFjayBsb2FkZXIgd2hlbiB3ZSBzdXBwb3J0XG4gICAgICAvLyB0cmFja3MgdGhhdCBkb24ndCBuZWVkIGEgZGlzcGxheS5cblxuICAgICAgcGxheWVyLnJlYWR5KGJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHBsYXllci50ZWNoXyAmJiBwbGF5ZXIudGVjaF8uZmVhdHVyZXNOYXRpdmVUZXh0VHJhY2tzKSB7XG4gICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcGxheWVyLm9uKCdmdWxsc2NyZWVuY2hhbmdlJywgdXBkYXRlRGlzcGxheUhhbmRsZXIpO1xuICAgICAgICBwbGF5ZXIub24oJ3BsYXllcnJlc2l6ZScsIHVwZGF0ZURpc3BsYXlIYW5kbGVyKTtcbiAgICAgICAgd2luZG93JDEuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCB1cGRhdGVEaXNwbGF5SGFuZGxlcik7XG4gICAgICAgIHBsYXllci5vbignZGlzcG9zZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gd2luZG93JDEucmVtb3ZlRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCB1cGRhdGVEaXNwbGF5SGFuZGxlcik7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgdHJhY2tzID0gdGhpcy5vcHRpb25zXy5wbGF5ZXJPcHRpb25zLnRyYWNrcyB8fCBbXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRoaXMucGxheWVyXy5hZGRSZW1vdGVUZXh0VHJhY2sodHJhY2tzW2ldLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucHJlc2VsZWN0VHJhY2soKTtcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgKiBQcmVzZWxlY3QgYSB0cmFjayBmb2xsb3dpbmcgdGhpcyBwcmVjZWRlbmNlOlxuICAgICogLSBtYXRjaGVzIHRoZSBwcmV2aW91c2x5IHNlbGVjdGVkIHtAbGluayBUZXh0VHJhY2t9J3MgbGFuZ3VhZ2UgYW5kIGtpbmRcbiAgICAqIC0gbWF0Y2hlcyB0aGUgcHJldmlvdXNseSBzZWxlY3RlZCB7QGxpbmsgVGV4dFRyYWNrfSdzIGxhbmd1YWdlIG9ubHlcbiAgICAqIC0gaXMgdGhlIGZpcnN0IGRlZmF1bHQgY2FwdGlvbnMgdHJhY2tcbiAgICAqIC0gaXMgdGhlIGZpcnN0IGRlZmF1bHQgZGVzY3JpcHRpb25zIHRyYWNrXG4gICAgKlxuICAgICogQGxpc3RlbnMgUGxheWVyI2xvYWRzdGFydFxuICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBUZXh0VHJhY2tEaXNwbGF5LnByb3RvdHlwZTtcblxuICAgIF9wcm90by5wcmVzZWxlY3RUcmFjayA9IGZ1bmN0aW9uIHByZXNlbGVjdFRyYWNrKCkge1xuICAgICAgdmFyIG1vZGVzID0ge1xuICAgICAgICBjYXB0aW9uczogMSxcbiAgICAgICAgc3VidGl0bGVzOiAxXG4gICAgICB9O1xuICAgICAgdmFyIHRyYWNrTGlzdCA9IHRoaXMucGxheWVyXy50ZXh0VHJhY2tzKCk7XG4gICAgICB2YXIgdXNlclByZWYgPSB0aGlzLnBsYXllcl8uY2FjaGVfLnNlbGVjdGVkTGFuZ3VhZ2U7XG4gICAgICB2YXIgZmlyc3REZXNjO1xuICAgICAgdmFyIGZpcnN0Q2FwdGlvbnM7XG4gICAgICB2YXIgcHJlZmVycmVkVHJhY2s7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2tMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0cmFjayA9IHRyYWNrTGlzdFtpXTtcblxuICAgICAgICBpZiAodXNlclByZWYgJiYgdXNlclByZWYuZW5hYmxlZCAmJiB1c2VyUHJlZi5sYW5ndWFnZSAmJiB1c2VyUHJlZi5sYW5ndWFnZSA9PT0gdHJhY2subGFuZ3VhZ2UgJiYgdHJhY2sua2luZCBpbiBtb2Rlcykge1xuICAgICAgICAgIC8vIEFsd2F5cyBjaG9vc2UgdGhlIHRyYWNrIHRoYXQgbWF0Y2hlcyBib3RoIGxhbmd1YWdlIGFuZCBraW5kXG4gICAgICAgICAgaWYgKHRyYWNrLmtpbmQgPT09IHVzZXJQcmVmLmtpbmQpIHtcbiAgICAgICAgICAgIHByZWZlcnJlZFRyYWNrID0gdHJhY2s7IC8vIG9yIGNob29zZSB0aGUgZmlyc3QgdHJhY2sgdGhhdCBtYXRjaGVzIGxhbmd1YWdlXG4gICAgICAgICAgfSBlbHNlIGlmICghcHJlZmVycmVkVHJhY2spIHtcbiAgICAgICAgICAgIHByZWZlcnJlZFRyYWNrID0gdHJhY2s7XG4gICAgICAgICAgfSAvLyBjbGVhciBldmVyeXRoaW5nIGlmIG9mZlRleHRUcmFja01lbnVJdGVtIHdhcyBjbGlja2VkXG5cbiAgICAgICAgfSBlbHNlIGlmICh1c2VyUHJlZiAmJiAhdXNlclByZWYuZW5hYmxlZCkge1xuICAgICAgICAgIHByZWZlcnJlZFRyYWNrID0gbnVsbDtcbiAgICAgICAgICBmaXJzdERlc2MgPSBudWxsO1xuICAgICAgICAgIGZpcnN0Q2FwdGlvbnMgPSBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKHRyYWNrLmRlZmF1bHQpIHtcbiAgICAgICAgICBpZiAodHJhY2sua2luZCA9PT0gJ2Rlc2NyaXB0aW9ucycgJiYgIWZpcnN0RGVzYykge1xuICAgICAgICAgICAgZmlyc3REZXNjID0gdHJhY2s7XG4gICAgICAgICAgfSBlbHNlIGlmICh0cmFjay5raW5kIGluIG1vZGVzICYmICFmaXJzdENhcHRpb25zKSB7XG4gICAgICAgICAgICBmaXJzdENhcHRpb25zID0gdHJhY2s7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IC8vIFRoZSBwcmVmZXJyZWRUcmFjayBtYXRjaGVzIHRoZSB1c2VyIHByZWZlcmVuY2UgYW5kIHRha2VzXG4gICAgICAvLyBwcmVjZWRlbmNlIG92ZXIgYWxsIHRoZSBvdGhlciB0cmFja3MuXG4gICAgICAvLyBTbywgZGlzcGxheSB0aGUgcHJlZmVycmVkVHJhY2sgYmVmb3JlIHRoZSBmaXJzdCBkZWZhdWx0IHRyYWNrXG4gICAgICAvLyBhbmQgdGhlIHN1YnRpdGxlcy9jYXB0aW9ucyB0cmFjayBiZWZvcmUgdGhlIGRlc2NyaXB0aW9ucyB0cmFja1xuXG5cbiAgICAgIGlmIChwcmVmZXJyZWRUcmFjaykge1xuICAgICAgICBwcmVmZXJyZWRUcmFjay5tb2RlID0gJ3Nob3dpbmcnO1xuICAgICAgfSBlbHNlIGlmIChmaXJzdENhcHRpb25zKSB7XG4gICAgICAgIGZpcnN0Q2FwdGlvbnMubW9kZSA9ICdzaG93aW5nJztcbiAgICAgIH0gZWxzZSBpZiAoZmlyc3REZXNjKSB7XG4gICAgICAgIGZpcnN0RGVzYy5tb2RlID0gJ3Nob3dpbmcnO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUdXJuIGRpc3BsYXkgb2Yge0BsaW5rIFRleHRUcmFja30ncyBmcm9tIHRoZSBjdXJyZW50IHN0YXRlIGludG8gdGhlIG90aGVyIHN0YXRlLlxuICAgICAqIFRoZXJlIGFyZSBvbmx5IHR3byBzdGF0ZXM6XG4gICAgICogLSAnc2hvd24nXG4gICAgICogLSAnaGlkZGVuJ1xuICAgICAqXG4gICAgICogQGxpc3RlbnMgUGxheWVyI2xvYWRzdGFydFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by50b2dnbGVEaXNwbGF5ID0gZnVuY3Rpb24gdG9nZ2xlRGlzcGxheSgpIHtcbiAgICAgIGlmICh0aGlzLnBsYXllcl8udGVjaF8gJiYgdGhpcy5wbGF5ZXJfLnRlY2hfLmZlYXR1cmVzTmF0aXZlVGV4dFRyYWNrcykge1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIHtAbGluayBDb21wb25lbnR9J3MgRE9NIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCgpIHtcbiAgICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ3Zqcy10ZXh0LXRyYWNrLWRpc3BsYXknXG4gICAgICB9LCB7XG4gICAgICAgICdhcmlhLWxpdmUnOiAnb2ZmJyxcbiAgICAgICAgJ2FyaWEtYXRvbWljJzogJ3RydWUnXG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXIgYWxsIGRpc3BsYXllZCB7QGxpbmsgVGV4dFRyYWNrfXMuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNsZWFyRGlzcGxheSA9IGZ1bmN0aW9uIGNsZWFyRGlzcGxheSgpIHtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93JDEuV2ViVlRUID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHdpbmRvdyQxLldlYlZUVC5wcm9jZXNzQ3Vlcyh3aW5kb3ckMSwgW10sIHRoaXMuZWxfKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBkaXNwbGF5ZWQgVGV4dFRyYWNrIHdoZW4gYSBlaXRoZXIgYSB7QGxpbmsgUGxheWVyI3RleHR0cmFja2NoYW5nZX0gb3JcbiAgICAgKiBhIHtAbGluayBQbGF5ZXIjZnVsbHNjcmVlbmNoYW5nZX0gaXMgZmlyZWQuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBQbGF5ZXIjdGV4dHRyYWNrY2hhbmdlXG4gICAgICogQGxpc3RlbnMgUGxheWVyI2Z1bGxzY3JlZW5jaGFuZ2VcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udXBkYXRlRGlzcGxheSA9IGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXkoKSB7XG4gICAgICB2YXIgdHJhY2tzID0gdGhpcy5wbGF5ZXJfLnRleHRUcmFja3MoKTtcbiAgICAgIHRoaXMuY2xlYXJEaXNwbGF5KCk7IC8vIFRyYWNrIGRpc3BsYXkgcHJpb3JpdGl6YXRpb24gbW9kZWw6IGlmIG11bHRpcGxlIHRyYWNrcyBhcmUgJ3Nob3dpbmcnLFxuICAgICAgLy8gIGRpc3BsYXkgdGhlIGZpcnN0ICdzdWJ0aXRsZXMnIG9yICdjYXB0aW9ucycgdHJhY2sgd2hpY2ggaXMgJ3Nob3dpbmcnLFxuICAgICAgLy8gIG90aGVyd2lzZSBkaXNwbGF5IHRoZSBmaXJzdCAnZGVzY3JpcHRpb25zJyB0cmFjayB3aGljaCBpcyAnc2hvd2luZydcblxuICAgICAgdmFyIGRlc2NyaXB0aW9uc1RyYWNrID0gbnVsbDtcbiAgICAgIHZhciBjYXB0aW9uc1N1YnRpdGxlc1RyYWNrID0gbnVsbDtcbiAgICAgIHZhciBpID0gdHJhY2tzLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICB2YXIgdHJhY2sgPSB0cmFja3NbaV07XG5cbiAgICAgICAgaWYgKHRyYWNrLm1vZGUgPT09ICdzaG93aW5nJykge1xuICAgICAgICAgIGlmICh0cmFjay5raW5kID09PSAnZGVzY3JpcHRpb25zJykge1xuICAgICAgICAgICAgZGVzY3JpcHRpb25zVHJhY2sgPSB0cmFjaztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FwdGlvbnNTdWJ0aXRsZXNUcmFjayA9IHRyYWNrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2FwdGlvbnNTdWJ0aXRsZXNUcmFjaykge1xuICAgICAgICBpZiAodGhpcy5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScpICE9PSAnb2ZmJykge1xuICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWxpdmUnLCAnb2ZmJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnVwZGF0ZUZvclRyYWNrKGNhcHRpb25zU3VidGl0bGVzVHJhY2spO1xuICAgICAgfSBlbHNlIGlmIChkZXNjcmlwdGlvbnNUcmFjaykge1xuICAgICAgICBpZiAodGhpcy5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScpICE9PSAnYXNzZXJ0aXZlJykge1xuICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWxpdmUnLCAnYXNzZXJ0aXZlJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnVwZGF0ZUZvclRyYWNrKGRlc2NyaXB0aW9uc1RyYWNrKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGFuIHtAbGluayBUZXh0VHJhY2t9IHRvIHRvIHRoZSB7QGxpbmsgVGVjaH1zIHtAbGluayBUZXh0VHJhY2tMaXN0fS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGV4dFRyYWNrfSB0cmFja1xuICAgICAqICAgICAgICBUZXh0IHRyYWNrIG9iamVjdCB0byBiZSBhZGRlZCB0byB0aGUgbGlzdC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udXBkYXRlRm9yVHJhY2sgPSBmdW5jdGlvbiB1cGRhdGVGb3JUcmFjayh0cmFjaykge1xuICAgICAgaWYgKHR5cGVvZiB3aW5kb3ckMS5XZWJWVFQgIT09ICdmdW5jdGlvbicgfHwgIXRyYWNrLmFjdGl2ZUN1ZXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgY3VlcyA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgdHJhY2suYWN0aXZlQ3Vlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgY3Vlcy5wdXNoKHRyYWNrLmFjdGl2ZUN1ZXNbX2ldKTtcbiAgICAgIH1cblxuICAgICAgd2luZG93JDEuV2ViVlRULnByb2Nlc3NDdWVzKHdpbmRvdyQxLCBjdWVzLCB0aGlzLmVsXyk7XG5cbiAgICAgIGlmICghdGhpcy5wbGF5ZXJfLnRleHRUcmFja1NldHRpbmdzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIG92ZXJyaWRlcyA9IHRoaXMucGxheWVyXy50ZXh0VHJhY2tTZXR0aW5ncy5nZXRWYWx1ZXMoKTtcbiAgICAgIHZhciBpID0gY3Vlcy5sZW5ndGg7XG5cbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdmFyIGN1ZSA9IGN1ZXNbaV07XG5cbiAgICAgICAgaWYgKCFjdWUpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjdWVEaXYgPSBjdWUuZGlzcGxheVN0YXRlO1xuXG4gICAgICAgIGlmIChvdmVycmlkZXMuY29sb3IpIHtcbiAgICAgICAgICBjdWVEaXYuZmlyc3RDaGlsZC5zdHlsZS5jb2xvciA9IG92ZXJyaWRlcy5jb2xvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvdmVycmlkZXMudGV4dE9wYWNpdHkpIHtcbiAgICAgICAgICB0cnlVcGRhdGVTdHlsZShjdWVEaXYuZmlyc3RDaGlsZCwgJ2NvbG9yJywgY29uc3RydWN0Q29sb3Iob3ZlcnJpZGVzLmNvbG9yIHx8ICcjZmZmJywgb3ZlcnJpZGVzLnRleHRPcGFjaXR5KSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3ZlcnJpZGVzLmJhY2tncm91bmRDb2xvcikge1xuICAgICAgICAgIGN1ZURpdi5maXJzdENoaWxkLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG92ZXJyaWRlcy5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3ZlcnJpZGVzLmJhY2tncm91bmRPcGFjaXR5KSB7XG4gICAgICAgICAgdHJ5VXBkYXRlU3R5bGUoY3VlRGl2LmZpcnN0Q2hpbGQsICdiYWNrZ3JvdW5kQ29sb3InLCBjb25zdHJ1Y3RDb2xvcihvdmVycmlkZXMuYmFja2dyb3VuZENvbG9yIHx8ICcjMDAwJywgb3ZlcnJpZGVzLmJhY2tncm91bmRPcGFjaXR5KSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3ZlcnJpZGVzLndpbmRvd0NvbG9yKSB7XG4gICAgICAgICAgaWYgKG92ZXJyaWRlcy53aW5kb3dPcGFjaXR5KSB7XG4gICAgICAgICAgICB0cnlVcGRhdGVTdHlsZShjdWVEaXYsICdiYWNrZ3JvdW5kQ29sb3InLCBjb25zdHJ1Y3RDb2xvcihvdmVycmlkZXMud2luZG93Q29sb3IsIG92ZXJyaWRlcy53aW5kb3dPcGFjaXR5KSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN1ZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBvdmVycmlkZXMud2luZG93Q29sb3I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG92ZXJyaWRlcy5lZGdlU3R5bGUpIHtcbiAgICAgICAgICBpZiAob3ZlcnJpZGVzLmVkZ2VTdHlsZSA9PT0gJ2Ryb3BzaGFkb3cnKSB7XG4gICAgICAgICAgICBjdWVEaXYuZmlyc3RDaGlsZC5zdHlsZS50ZXh0U2hhZG93ID0gXCIycHggMnB4IDNweCBcIiArIGRhcmtHcmF5ICsgXCIsIDJweCAycHggNHB4IFwiICsgZGFya0dyYXkgKyBcIiwgMnB4IDJweCA1cHggXCIgKyBkYXJrR3JheTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG92ZXJyaWRlcy5lZGdlU3R5bGUgPT09ICdyYWlzZWQnKSB7XG4gICAgICAgICAgICBjdWVEaXYuZmlyc3RDaGlsZC5zdHlsZS50ZXh0U2hhZG93ID0gXCIxcHggMXB4IFwiICsgZGFya0dyYXkgKyBcIiwgMnB4IDJweCBcIiArIGRhcmtHcmF5ICsgXCIsIDNweCAzcHggXCIgKyBkYXJrR3JheTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG92ZXJyaWRlcy5lZGdlU3R5bGUgPT09ICdkZXByZXNzZWQnKSB7XG4gICAgICAgICAgICBjdWVEaXYuZmlyc3RDaGlsZC5zdHlsZS50ZXh0U2hhZG93ID0gXCIxcHggMXB4IFwiICsgbGlnaHRHcmF5ICsgXCIsIDAgMXB4IFwiICsgbGlnaHRHcmF5ICsgXCIsIC0xcHggLTFweCBcIiArIGRhcmtHcmF5ICsgXCIsIDAgLTFweCBcIiArIGRhcmtHcmF5O1xuICAgICAgICAgIH0gZWxzZSBpZiAob3ZlcnJpZGVzLmVkZ2VTdHlsZSA9PT0gJ3VuaWZvcm0nKSB7XG4gICAgICAgICAgICBjdWVEaXYuZmlyc3RDaGlsZC5zdHlsZS50ZXh0U2hhZG93ID0gXCIwIDAgNHB4IFwiICsgZGFya0dyYXkgKyBcIiwgMCAwIDRweCBcIiArIGRhcmtHcmF5ICsgXCIsIDAgMCA0cHggXCIgKyBkYXJrR3JheSArIFwiLCAwIDAgNHB4IFwiICsgZGFya0dyYXk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG92ZXJyaWRlcy5mb250UGVyY2VudCAmJiBvdmVycmlkZXMuZm9udFBlcmNlbnQgIT09IDEpIHtcbiAgICAgICAgICB2YXIgZm9udFNpemUgPSB3aW5kb3ckMS5wYXJzZUZsb2F0KGN1ZURpdi5zdHlsZS5mb250U2l6ZSk7XG4gICAgICAgICAgY3VlRGl2LnN0eWxlLmZvbnRTaXplID0gZm9udFNpemUgKiBvdmVycmlkZXMuZm9udFBlcmNlbnQgKyAncHgnO1xuICAgICAgICAgIGN1ZURpdi5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgICAgY3VlRGl2LnN0eWxlLnRvcCA9ICdhdXRvJztcbiAgICAgICAgICBjdWVEaXYuc3R5bGUuYm90dG9tID0gJzJweCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3ZlcnJpZGVzLmZvbnRGYW1pbHkgJiYgb3ZlcnJpZGVzLmZvbnRGYW1pbHkgIT09ICdkZWZhdWx0Jykge1xuICAgICAgICAgIGlmIChvdmVycmlkZXMuZm9udEZhbWlseSA9PT0gJ3NtYWxsLWNhcHMnKSB7XG4gICAgICAgICAgICBjdWVEaXYuZmlyc3RDaGlsZC5zdHlsZS5mb250VmFyaWFudCA9ICdzbWFsbC1jYXBzJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3VlRGl2LmZpcnN0Q2hpbGQuc3R5bGUuZm9udEZhbWlseSA9IGZvbnRNYXBbb3ZlcnJpZGVzLmZvbnRGYW1pbHldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gVGV4dFRyYWNrRGlzcGxheTtcbiAgfShDb21wb25lbnQpO1xuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnVGV4dFRyYWNrRGlzcGxheScsIFRleHRUcmFja0Rpc3BsYXkpO1xuXG4gIC8qKlxuICAgKiBBIGxvYWRpbmcgc3Bpbm5lciBmb3IgdXNlIGR1cmluZyB3YWl0aW5nL2xvYWRpbmcgZXZlbnRzLlxuICAgKlxuICAgKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAgICovXG5cbiAgdmFyIExvYWRpbmdTcGlubmVyID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAgIF9pbmhlcml0c0xvb3NlKExvYWRpbmdTcGlubmVyLCBfQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIExvYWRpbmdTcGlubmVyKCkge1xuICAgICAgcmV0dXJuIF9Db21wb25lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBMb2FkaW5nU3Bpbm5lci5wcm90b3R5cGU7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIGBMb2FkaW5nU3Bpbm5lcmBzIERPTSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgKiAgICAgICAgIFRoZSBkb20gZWxlbWVudCB0aGF0IGdldHMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSgpIHtcbiAgICAgIHZhciBpc0F1ZGlvID0gdGhpcy5wbGF5ZXJfLmlzQXVkaW8oKTtcbiAgICAgIHZhciBwbGF5ZXJUeXBlID0gdGhpcy5sb2NhbGl6ZShpc0F1ZGlvID8gJ0F1ZGlvIFBsYXllcicgOiAnVmlkZW8gUGxheWVyJyk7XG4gICAgICB2YXIgY29udHJvbFRleHQgPSBjcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAndmpzLWNvbnRyb2wtdGV4dCcsXG4gICAgICAgIGlubmVySFRNTDogdGhpcy5sb2NhbGl6ZSgnezF9IGlzIGxvYWRpbmcuJywgW3BsYXllclR5cGVdKVxuICAgICAgfSk7XG5cbiAgICAgIHZhciBlbCA9IF9Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAndmpzLWxvYWRpbmctc3Bpbm5lcicsXG4gICAgICAgIGRpcjogJ2x0cidcbiAgICAgIH0pO1xuXG4gICAgICBlbC5hcHBlbmRDaGlsZChjb250cm9sVGV4dCk7XG4gICAgICByZXR1cm4gZWw7XG4gICAgfTtcblxuICAgIHJldHVybiBMb2FkaW5nU3Bpbm5lcjtcbiAgfShDb21wb25lbnQpO1xuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnTG9hZGluZ1NwaW5uZXInLCBMb2FkaW5nU3Bpbm5lcik7XG5cbiAgLyoqXG4gICAqIEJhc2UgY2xhc3MgZm9yIGFsbCBidXR0b25zLlxuICAgKlxuICAgKiBAZXh0ZW5kcyBDbGlja2FibGVDb21wb25lbnRcbiAgICovXG5cbiAgdmFyIEJ1dHRvbiA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9DbGlja2FibGVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHNMb29zZShCdXR0b24sIF9DbGlja2FibGVDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gQnV0dG9uKCkge1xuICAgICAgcmV0dXJuIF9DbGlja2FibGVDb21wb25lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBCdXR0b24ucHJvdG90eXBlO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBgQnV0dG9uYHMgRE9NIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3RhZz1cImJ1dHRvblwiXVxuICAgICAqICAgICAgICBUaGUgZWxlbWVudCdzIG5vZGUgdHlwZS4gVGhpcyBhcmd1bWVudCBpcyBJR05PUkVEOiBubyBtYXR0ZXIgd2hhdFxuICAgICAqICAgICAgICBpcyBwYXNzZWQsIGl0IHdpbGwgYWx3YXlzIGNyZWF0ZSBhIGBidXR0b25gIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3Byb3BzPXt9XVxuICAgICAqICAgICAgICBBbiBvYmplY3Qgb2YgcHJvcGVydGllcyB0aGF0IHNob3VsZCBiZSBzZXQgb24gdGhlIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW2F0dHJpYnV0ZXM9e31dXG4gICAgICogICAgICAgIEFuIG9iamVjdCBvZiBhdHRyaWJ1dGVzIHRoYXQgc2hvdWxkIGJlIHNldCBvbiB0aGUgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IGdldHMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCh0YWcsIHByb3BzLCBhdHRyaWJ1dGVzKSB7XG4gICAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkge1xuICAgICAgICBwcm9wcyA9IHt9O1xuICAgICAgfVxuXG4gICAgICBpZiAoYXR0cmlidXRlcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgIH1cblxuICAgICAgdGFnID0gJ2J1dHRvbic7XG4gICAgICBwcm9wcyA9IGFzc2lnbih7XG4gICAgICAgIGlubmVySFRNTDogJzxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIGNsYXNzPVwidmpzLWljb24tcGxhY2Vob2xkZXJcIj48L3NwYW4+JyxcbiAgICAgICAgY2xhc3NOYW1lOiB0aGlzLmJ1aWxkQ1NTQ2xhc3MoKVxuICAgICAgfSwgcHJvcHMpOyAvLyBBZGQgYXR0cmlidXRlcyBmb3IgYnV0dG9uIGVsZW1lbnRcblxuICAgICAgYXR0cmlidXRlcyA9IGFzc2lnbih7XG4gICAgICAgIC8vIE5lY2Vzc2FyeSBzaW5jZSB0aGUgZGVmYXVsdCBidXR0b24gdHlwZSBpcyBcInN1Ym1pdFwiXG4gICAgICAgIHR5cGU6ICdidXR0b24nXG4gICAgICB9LCBhdHRyaWJ1dGVzKTtcbiAgICAgIHZhciBlbCA9IENvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCB0YWcsIHByb3BzLCBhdHRyaWJ1dGVzKTtcbiAgICAgIHRoaXMuY3JlYXRlQ29udHJvbFRleHRFbChlbCk7XG4gICAgICByZXR1cm4gZWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIGNoaWxkIGBDb21wb25lbnRgIGluc2lkZSBvZiB0aGlzIGBCdXR0b25gLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8Q29tcG9uZW50fSBjaGlsZFxuICAgICAqICAgICAgICBUaGUgbmFtZSBvciBpbnN0YW5jZSBvZiBhIGNoaWxkIHRvIGFkZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV1cbiAgICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBvcHRpb25zIHRoYXQgd2lsbCBnZXQgcGFzc2VkIHRvIGNoaWxkcmVuIG9mXG4gICAgICogICAgICAgIHRoZSBjaGlsZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0NvbXBvbmVudH1cbiAgICAgKiAgICAgICAgIFRoZSBgQ29tcG9uZW50YCB0aGF0IGdldHMgYWRkZWQgYXMgYSBjaGlsZC4gV2hlbiB1c2luZyBhIHN0cmluZyB0aGVcbiAgICAgKiAgICAgICAgIGBDb21wb25lbnRgIHdpbGwgZ2V0IGNyZWF0ZWQgYnkgdGhpcyBwcm9jZXNzLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgc2luY2UgdmVyc2lvbiA1XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmFkZENoaWxkID0gZnVuY3Rpb24gYWRkQ2hpbGQoY2hpbGQsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuXG4gICAgICB2YXIgY2xhc3NOYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgbG9nLndhcm4oXCJBZGRpbmcgYW4gYWN0aW9uYWJsZSAodXNlciBjb250cm9sbGFibGUpIGNoaWxkIHRvIGEgQnV0dG9uIChcIiArIGNsYXNzTmFtZSArIFwiKSBpcyBub3Qgc3VwcG9ydGVkOyB1c2UgYSBDbGlja2FibGVDb21wb25lbnQgaW5zdGVhZC5cIik7IC8vIEF2b2lkIHRoZSBlcnJvciBtZXNzYWdlIGdlbmVyYXRlZCBieSBDbGlja2FibGVDb21wb25lbnQncyBhZGRDaGlsZCBtZXRob2RcblxuICAgICAgcmV0dXJuIENvbXBvbmVudC5wcm90b3R5cGUuYWRkQ2hpbGQuY2FsbCh0aGlzLCBjaGlsZCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuYWJsZSB0aGUgYEJ1dHRvbmAgZWxlbWVudCBzbyB0aGF0IGl0IGNhbiBiZSBhY3RpdmF0ZWQgb3IgY2xpY2tlZC4gVXNlIHRoaXMgd2l0aFxuICAgICAqIHtAbGluayBCdXR0b24jZGlzYWJsZX0uXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmVuYWJsZSA9IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICAgIF9DbGlja2FibGVDb21wb25lbnQucHJvdG90eXBlLmVuYWJsZS5jYWxsKHRoaXMpO1xuXG4gICAgICB0aGlzLmVsXy5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc2FibGUgdGhlIGBCdXR0b25gIGVsZW1lbnQgc28gdGhhdCBpdCBjYW5ub3QgYmUgYWN0aXZhdGVkIG9yIGNsaWNrZWQuIFVzZSB0aGlzIHdpdGhcbiAgICAgKiB7QGxpbmsgQnV0dG9uI2VuYWJsZX0uXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmRpc2FibGUgPSBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgX0NsaWNrYWJsZUNvbXBvbmVudC5wcm90b3R5cGUuZGlzYWJsZS5jYWxsKHRoaXMpO1xuXG4gICAgICB0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhIGBCdXR0b25gIGhhcyBmb2N1cyBhbmQgYGtleWRvd25gIGlzIHRyaWdnZXJlZCB2aWEgYSBrZXlcbiAgICAgKiBwcmVzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIFRoZSBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGdldCBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBrZXlkb3duXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZUtleVByZXNzID0gZnVuY3Rpb24gaGFuZGxlS2V5UHJlc3MoZXZlbnQpIHtcbiAgICAgIC8vIElnbm9yZSBTcGFjZSBvciBFbnRlciBrZXkgb3BlcmF0aW9uLCB3aGljaCBpcyBoYW5kbGVkIGJ5IHRoZSBicm93c2VyIGZvciBhIGJ1dHRvbi5cbiAgICAgIGlmICghKGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ1NwYWNlJykgfHwga2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnRW50ZXInKSkpIHtcbiAgICAgICAgLy8gUGFzcyBrZXlwcmVzcyBoYW5kbGluZyB1cCBmb3IgdW5zdXBwb3J0ZWQga2V5c1xuICAgICAgICBfQ2xpY2thYmxlQ29tcG9uZW50LnByb3RvdHlwZS5oYW5kbGVLZXlQcmVzcy5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIEJ1dHRvbjtcbiAgfShDbGlja2FibGVDb21wb25lbnQpO1xuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnQnV0dG9uJywgQnV0dG9uKTtcblxuICAvKipcbiAgICogVGhlIGluaXRpYWwgcGxheSBidXR0b24gdGhhdCBzaG93cyBiZWZvcmUgdGhlIHZpZGVvIGhhcyBwbGF5ZWQuIFRoZSBoaWRpbmcgb2YgdGhlXG4gICAqIGBCaWdQbGF5QnV0dG9uYCBnZXQgZG9uZSB2aWEgQ1NTIGFuZCBgUGxheWVyYCBzdGF0ZXMuXG4gICAqXG4gICAqIEBleHRlbmRzIEJ1dHRvblxuICAgKi9cblxuICB2YXIgQmlnUGxheUJ1dHRvbiA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9CdXR0b24pIHtcbiAgICBfaW5oZXJpdHNMb29zZShCaWdQbGF5QnV0dG9uLCBfQnV0dG9uKTtcblxuICAgIGZ1bmN0aW9uIEJpZ1BsYXlCdXR0b24ocGxheWVyLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX0J1dHRvbi5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcbiAgICAgIF90aGlzLm1vdXNldXNlZF8gPSBmYWxzZTtcblxuICAgICAgX3RoaXMub24oJ21vdXNlZG93bicsIF90aGlzLmhhbmRsZU1vdXNlRG93bik7XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVpbGRzIHRoZSBkZWZhdWx0IERPTSBgY2xhc3NOYW1lYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKiAgICAgICAgIFRoZSBET00gYGNsYXNzTmFtZWAgZm9yIHRoaXMgb2JqZWN0LiBBbHdheXMgcmV0dXJucyAndmpzLWJpZy1wbGF5LWJ1dHRvbicuXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBCaWdQbGF5QnV0dG9uLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRDU1NDbGFzcygpIHtcbiAgICAgIHJldHVybiAndmpzLWJpZy1wbGF5LWJ1dHRvbic7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhIGBCaWdQbGF5QnV0dG9uYCBcImNsaWNrZWRcIi4gU2VlIHtAbGluayBDbGlja2FibGVDb21wb25lbnR9XG4gICAgICogZm9yIG1vcmUgZGV0YWlsZWQgaW5mb3JtYXRpb24gb24gd2hhdCBhIGNsaWNrIGNhbiBiZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIFRoZSBga2V5ZG93bmAsIGB0YXBgLCBvciBgY2xpY2tgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmVcbiAgICAgKiAgICAgICAgY2FsbGVkLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgdGFwXG4gICAgICogQGxpc3RlbnMgY2xpY2tcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljayhldmVudCkge1xuICAgICAgdmFyIHBsYXlQcm9taXNlID0gdGhpcy5wbGF5ZXJfLnBsYXkoKTsgLy8gZXhpdCBlYXJseSBpZiBjbGlja2VkIHZpYSB0aGUgbW91c2VcblxuICAgICAgaWYgKHRoaXMubW91c2V1c2VkXyAmJiBldmVudC5jbGllbnRYICYmIGV2ZW50LmNsaWVudFkpIHtcbiAgICAgICAgc2lsZW5jZVByb21pc2UocGxheVByb21pc2UpOyAvLyBjYWxsIGhhbmRsZUZvY3VzIG1hbnVhbGx5IHRvIGdldCBob3RrZXlzIHdvcmtpbmdcblxuICAgICAgICB0aGlzLnBsYXllcl8uaGFuZGxlRm9jdXMoe30pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBjYiA9IHRoaXMucGxheWVyXy5nZXRDaGlsZCgnY29udHJvbEJhcicpO1xuICAgICAgdmFyIHBsYXlUb2dnbGUgPSBjYiAmJiBjYi5nZXRDaGlsZCgncGxheVRvZ2dsZScpO1xuXG4gICAgICBpZiAoIXBsYXlUb2dnbGUpIHtcbiAgICAgICAgdGhpcy5wbGF5ZXJfLmZvY3VzKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHBsYXlGb2N1cyA9IGZ1bmN0aW9uIHBsYXlGb2N1cygpIHtcbiAgICAgICAgcmV0dXJuIHBsYXlUb2dnbGUuZm9jdXMoKTtcbiAgICAgIH07XG5cbiAgICAgIGlmIChpc1Byb21pc2UocGxheVByb21pc2UpKSB7XG4gICAgICAgIHBsYXlQcm9taXNlLnRoZW4ocGxheUZvY3VzLCBmdW5jdGlvbiAoKSB7fSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNldFRpbWVvdXQocGxheUZvY3VzLCAxKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLmhhbmRsZUtleVByZXNzID0gZnVuY3Rpb24gaGFuZGxlS2V5UHJlc3MoZXZlbnQpIHtcbiAgICAgIHRoaXMubW91c2V1c2VkXyA9IGZhbHNlO1xuXG4gICAgICBfQnV0dG9uLnByb3RvdHlwZS5oYW5kbGVLZXlQcmVzcy5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmhhbmRsZU1vdXNlRG93biA9IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bihldmVudCkge1xuICAgICAgdGhpcy5tb3VzZXVzZWRfID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEJpZ1BsYXlCdXR0b247XG4gIH0oQnV0dG9uKTtcbiAgLyoqXG4gICAqIFRoZSB0ZXh0IHRoYXQgc2hvdWxkIGRpc3BsYXkgb3ZlciB0aGUgYEJpZ1BsYXlCdXR0b25gcyBjb250cm9scy4gQWRkZWQgdG8gZm9yIGxvY2FsaXphdGlvbi5cbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICBCaWdQbGF5QnV0dG9uLnByb3RvdHlwZS5jb250cm9sVGV4dF8gPSAnUGxheSBWaWRlbyc7XG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnQmlnUGxheUJ1dHRvbicsIEJpZ1BsYXlCdXR0b24pO1xuXG4gIC8qKlxuICAgKiBUaGUgYENsb3NlQnV0dG9uYCBpcyBhIGB7QGxpbmsgQnV0dG9ufWAgdGhhdCBmaXJlcyBhIGBjbG9zZWAgZXZlbnQgd2hlblxuICAgKiBpdCBnZXRzIGNsaWNrZWQuXG4gICAqXG4gICAqIEBleHRlbmRzIEJ1dHRvblxuICAgKi9cblxuICB2YXIgQ2xvc2VCdXR0b24gPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfQnV0dG9uKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoQ2xvc2VCdXR0b24sIF9CdXR0b24pO1xuXG4gICAgLyoqXG4gICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSB0aGlzIGNsYXNzLlxuICAgICpcbiAgICAqIEBwYXJhbSAge1BsYXllcn0gcGxheWVyXG4gICAgKiAgICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICpcbiAgICAqIEBwYXJhbSAge09iamVjdH0gW29wdGlvbnNdXG4gICAgKiAgICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAgKi9cbiAgICBmdW5jdGlvbiBDbG9zZUJ1dHRvbihwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgX3RoaXMgPSBfQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuXG4gICAgICBfdGhpcy5jb250cm9sVGV4dChvcHRpb25zICYmIG9wdGlvbnMuY29udHJvbFRleHQgfHwgX3RoaXMubG9jYWxpemUoJ0Nsb3NlJykpO1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICogQnVpbGRzIHRoZSBkZWZhdWx0IERPTSBgY2xhc3NOYW1lYC5cbiAgICAqXG4gICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgKiAgICAgICAgIFRoZSBET00gYGNsYXNzTmFtZWAgZm9yIHRoaXMgb2JqZWN0LlxuICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBDbG9zZUJ1dHRvbi5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkQ1NTQ2xhc3MoKSB7XG4gICAgICByZXR1cm4gXCJ2anMtY2xvc2UtYnV0dG9uIFwiICsgX0J1dHRvbi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGdldHMgY2FsbGVkIHdoZW4gYSBgQ2xvc2VCdXR0b25gIGhhcyBmb2N1cyBhbmQgYGtleWRvd25gIGlzIHRyaWdnZXJlZCB2aWEgYSBrZXlcbiAgICAgKiBwcmVzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIFRoZSBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGdldCBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBrZXlkb3duXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZUtleVByZXNzID0gZnVuY3Rpb24gaGFuZGxlS2V5UHJlc3MoZXZlbnQpIHt9IC8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0IGBCdXR0b25gIGJlaGF2aW9yLCBhbmQgZG9uJ3QgcGFzcyB0aGUga2V5cHJlc3MgZXZlbnRcbiAgICAvLyAgdXAgdG8gdGhlIHBsYXllciBiZWNhdXNlIHRoaXMgYnV0dG9uIGlzIHBhcnQgb2YgYSBgTW9kYWxEaWFsb2dgLCB3aGljaFxuICAgIC8vICBkb2Vzbid0IHBhc3Mga2V5cHJlc3NlcyB0byB0aGUgcGxheWVyIGVpdGhlci5cblxuICAgIC8qKlxuICAgICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhIGBDbG9zZUJ1dHRvbmAgZ2V0cyBjbGlja2VkLiBTZWVcbiAgICAgKiB7QGxpbmsgQ2xpY2thYmxlQ29tcG9uZW50I2hhbmRsZUNsaWNrfSBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB3aGVuIHRoaXMgd2lsbCBiZVxuICAgICAqIHRyaWdnZXJlZFxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgVGhlIGBrZXlkb3duYCwgYHRhcGAsIG9yIGBjbGlja2AgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZVxuICAgICAqICAgICAgICBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyB0YXBcbiAgICAgKiBAbGlzdGVucyBjbGlja1xuICAgICAqIEBmaXJlcyBDbG9zZUJ1dHRvbiNjbG9zZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XG4gICAgICAvKipcbiAgICAgICAqIFRyaWdnZXJlZCB3aGVuIHRoZSBhIGBDbG9zZUJ1dHRvbmAgaXMgY2xpY2tlZC5cbiAgICAgICAqXG4gICAgICAgKiBAZXZlbnQgQ2xvc2VCdXR0b24jY2xvc2VcbiAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAqXG4gICAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFtidWJibGVzPWZhbHNlXVxuICAgICAgICogICAgICAgICAgIHNldCB0byBmYWxzZSBzbyB0aGF0IHRoZSBjbG9zZSBldmVudCBkb2VzIG5vdFxuICAgICAgICogICAgICAgICAgIGJ1YmJsZSB1cCB0byBwYXJlbnRzIGlmIHRoZXJlIGlzIG5vIGxpc3RlbmVyXG4gICAgICAgKi9cbiAgICAgIHRoaXMudHJpZ2dlcih7XG4gICAgICAgIHR5cGU6ICdjbG9zZScsXG4gICAgICAgIGJ1YmJsZXM6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENsb3NlQnV0dG9uO1xuICB9KEJ1dHRvbik7XG5cbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdDbG9zZUJ1dHRvbicsIENsb3NlQnV0dG9uKTtcblxuICAvKipcbiAgICogQnV0dG9uIHRvIHRvZ2dsZSBiZXR3ZWVuIHBsYXkgYW5kIHBhdXNlLlxuICAgKlxuICAgKiBAZXh0ZW5kcyBCdXR0b25cbiAgICovXG5cbiAgdmFyIFBsYXlUb2dnbGUgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfQnV0dG9uKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoUGxheVRvZ2dsZSwgX0J1dHRvbik7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBsYXlUb2dnbGUocGxheWVyLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuXG4gICAgICBfdGhpcyA9IF9CdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7IC8vIHNob3cgb3IgaGlkZSByZXBsYXkgaWNvblxuXG4gICAgICBvcHRpb25zLnJlcGxheSA9IG9wdGlvbnMucmVwbGF5ID09PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5yZXBsYXk7XG5cbiAgICAgIF90aGlzLm9uKHBsYXllciwgJ3BsYXknLCBfdGhpcy5oYW5kbGVQbGF5KTtcblxuICAgICAgX3RoaXMub24ocGxheWVyLCAncGF1c2UnLCBfdGhpcy5oYW5kbGVQYXVzZSk7XG5cbiAgICAgIGlmIChvcHRpb25zLnJlcGxheSkge1xuICAgICAgICBfdGhpcy5vbihwbGF5ZXIsICdlbmRlZCcsIF90aGlzLmhhbmRsZUVuZGVkKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgdGhlIGRlZmF1bHQgRE9NIGBjbGFzc05hbWVgLlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgVGhlIERPTSBgY2xhc3NOYW1lYCBmb3IgdGhpcyBvYmplY3QuXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBQbGF5VG9nZ2xlLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRDU1NDbGFzcygpIHtcbiAgICAgIHJldHVybiBcInZqcy1wbGF5LWNvbnRyb2wgXCIgKyBfQnV0dG9uLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhbiBgUGxheVRvZ2dsZWAgaXMgXCJjbGlja2VkXCIuIFNlZVxuICAgICAqIHtAbGluayBDbGlja2FibGVDb21wb25lbnR9IGZvciBtb3JlIGRldGFpbGVkIGluZm9ybWF0aW9uIG9uIHdoYXQgYSBjbGljayBjYW4gYmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAgICogICAgICAgIFRoZSBga2V5ZG93bmAsIGB0YXBgLCBvciBgY2xpY2tgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmVcbiAgICAgKiAgICAgICAgY2FsbGVkLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgdGFwXG4gICAgICogQGxpc3RlbnMgY2xpY2tcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljayhldmVudCkge1xuICAgICAgaWYgKHRoaXMucGxheWVyXy5wYXVzZWQoKSkge1xuICAgICAgICB0aGlzLnBsYXllcl8ucGxheSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wbGF5ZXJfLnBhdXNlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZ2V0cyBjYWxsZWQgb25jZSBhZnRlciB0aGUgdmlkZW8gaGFzIGVuZGVkIGFuZCB0aGUgdXNlciBzZWVrcyBzbyB0aGF0XG4gICAgICogd2UgY2FuIGNoYW5nZSB0aGUgcmVwbGF5IGJ1dHRvbiBiYWNrIHRvIGEgcGxheSBidXR0b24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAgICogICAgICAgIFRoZSBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIHJ1bi5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIFBsYXllciNzZWVrZWRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlU2Vla2VkID0gZnVuY3Rpb24gaGFuZGxlU2Vla2VkKGV2ZW50KSB7XG4gICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtZW5kZWQnKTtcblxuICAgICAgaWYgKHRoaXMucGxheWVyXy5wYXVzZWQoKSkge1xuICAgICAgICB0aGlzLmhhbmRsZVBhdXNlKGV2ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGFuZGxlUGxheShldmVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCB0aGUgdmpzLXBsYXlpbmcgY2xhc3MgdG8gdGhlIGVsZW1lbnQgc28gaXQgY2FuIGNoYW5nZSBhcHBlYXJhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgICAqICAgICAgICBUaGUgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBydW4uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBQbGF5ZXIjcGxheVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVQbGF5ID0gZnVuY3Rpb24gaGFuZGxlUGxheShldmVudCkge1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWVuZGVkJyk7XG4gICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtcGF1c2VkJyk7XG4gICAgICB0aGlzLmFkZENsYXNzKCd2anMtcGxheWluZycpOyAvLyBjaGFuZ2UgdGhlIGJ1dHRvbiB0ZXh0IHRvIFwiUGF1c2VcIlxuXG4gICAgICB0aGlzLmNvbnRyb2xUZXh0KCdQYXVzZScpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIHZqcy1wYXVzZWQgY2xhc3MgdG8gdGhlIGVsZW1lbnQgc28gaXQgY2FuIGNoYW5nZSBhcHBlYXJhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgICAqICAgICAgICBUaGUgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBydW4uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBQbGF5ZXIjcGF1c2VcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlUGF1c2UgPSBmdW5jdGlvbiBoYW5kbGVQYXVzZShldmVudCkge1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLXBsYXlpbmcnKTtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1wYXVzZWQnKTsgLy8gY2hhbmdlIHRoZSBidXR0b24gdGV4dCB0byBcIlBsYXlcIlxuXG4gICAgICB0aGlzLmNvbnRyb2xUZXh0KCdQbGF5Jyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCB0aGUgdmpzLWVuZGVkIGNsYXNzIHRvIHRoZSBlbGVtZW50IHNvIGl0IGNhbiBjaGFuZ2UgYXBwZWFyYW5jZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgICAqICAgICAgICBUaGUgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBydW4uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBQbGF5ZXIjZW5kZWRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlRW5kZWQgPSBmdW5jdGlvbiBoYW5kbGVFbmRlZChldmVudCkge1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLXBsYXlpbmcnKTtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1lbmRlZCcpOyAvLyBjaGFuZ2UgdGhlIGJ1dHRvbiB0ZXh0IHRvIFwiUmVwbGF5XCJcblxuICAgICAgdGhpcy5jb250cm9sVGV4dCgnUmVwbGF5Jyk7IC8vIG9uIHRoZSBuZXh0IHNlZWsgcmVtb3ZlIHRoZSByZXBsYXkgYnV0dG9uXG5cbiAgICAgIHRoaXMub25lKHRoaXMucGxheWVyXywgJ3NlZWtlZCcsIHRoaXMuaGFuZGxlU2Vla2VkKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBsYXlUb2dnbGU7XG4gIH0oQnV0dG9uKTtcbiAgLyoqXG4gICAqIFRoZSB0ZXh0IHRoYXQgc2hvdWxkIGRpc3BsYXkgb3ZlciB0aGUgYFBsYXlUb2dnbGVgcyBjb250cm9scy4gQWRkZWQgZm9yIGxvY2FsaXphdGlvbi5cbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICBQbGF5VG9nZ2xlLnByb3RvdHlwZS5jb250cm9sVGV4dF8gPSAnUGxheSc7XG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnUGxheVRvZ2dsZScsIFBsYXlUb2dnbGUpO1xuXG4gIC8qKlxuICAgKiBAZmlsZSBmb3JtYXQtdGltZS5qc1xuICAgKiBAbW9kdWxlIGZvcm1hdC10aW1lXG4gICAqL1xuXG4gIC8qKlxuICAgKiBGb3JtYXQgc2Vjb25kcyBhcyBhIHRpbWUgc3RyaW5nLCBIOk1NOlNTIG9yIE06U1MuIFN1cHBseWluZyBhIGd1aWRlIChpblxuICAgKiBzZWNvbmRzKSB3aWxsIGZvcmNlIGEgbnVtYmVyIG9mIGxlYWRpbmcgemVyb3MgdG8gY292ZXIgdGhlIGxlbmd0aCBvZiB0aGVcbiAgICogZ3VpZGUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSAge251bWJlcn0gc2Vjb25kc1xuICAgKiAgICAgICAgIE51bWJlciBvZiBzZWNvbmRzIHRvIGJlIHR1cm5lZCBpbnRvIGEgc3RyaW5nXG4gICAqXG4gICAqIEBwYXJhbSAge251bWJlcn0gZ3VpZGVcbiAgICogICAgICAgICBOdW1iZXIgKGluIHNlY29uZHMpIHRvIG1vZGVsIHRoZSBzdHJpbmcgYWZ0ZXJcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiAgICAgICAgIFRpbWUgZm9ybWF0dGVkIGFzIEg6TU06U1Mgb3IgTTpTU1xuICAgKi9cbiAgdmFyIGRlZmF1bHRJbXBsZW1lbnRhdGlvbiA9IGZ1bmN0aW9uIGRlZmF1bHRJbXBsZW1lbnRhdGlvbihzZWNvbmRzLCBndWlkZSkge1xuICAgIHNlY29uZHMgPSBzZWNvbmRzIDwgMCA/IDAgOiBzZWNvbmRzO1xuICAgIHZhciBzID0gTWF0aC5mbG9vcihzZWNvbmRzICUgNjApO1xuICAgIHZhciBtID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjAgJSA2MCk7XG4gICAgdmFyIGggPSBNYXRoLmZsb29yKHNlY29uZHMgLyAzNjAwKTtcbiAgICB2YXIgZ20gPSBNYXRoLmZsb29yKGd1aWRlIC8gNjAgJSA2MCk7XG4gICAgdmFyIGdoID0gTWF0aC5mbG9vcihndWlkZSAvIDM2MDApOyAvLyBoYW5kbGUgaW52YWxpZCB0aW1lc1xuXG4gICAgaWYgKGlzTmFOKHNlY29uZHMpIHx8IHNlY29uZHMgPT09IEluZmluaXR5KSB7XG4gICAgICAvLyAnLScgaXMgZmFsc2UgZm9yIGFsbCByZWxhdGlvbmFsIG9wZXJhdG9ycyAoZS5nLiA8LCA+PSkgc28gdGhpcyBzZXR0aW5nXG4gICAgICAvLyB3aWxsIGFkZCB0aGUgbWluaW11bSBudW1iZXIgb2YgZmllbGRzIHNwZWNpZmllZCBieSB0aGUgZ3VpZGVcbiAgICAgIGggPSBtID0gcyA9ICctJztcbiAgICB9IC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gc2hvdyBob3Vyc1xuXG5cbiAgICBoID0gaCA+IDAgfHwgZ2ggPiAwID8gaCArICc6JyA6ICcnOyAvLyBJZiBob3VycyBhcmUgc2hvd2luZywgd2UgbWF5IG5lZWQgdG8gYWRkIGEgbGVhZGluZyB6ZXJvLlxuICAgIC8vIEFsd2F5cyBzaG93IGF0IGxlYXN0IG9uZSBkaWdpdCBvZiBtaW51dGVzLlxuXG4gICAgbSA9ICgoaCB8fCBnbSA+PSAxMCkgJiYgbSA8IDEwID8gJzAnICsgbSA6IG0pICsgJzonOyAvLyBDaGVjayBpZiBsZWFkaW5nIHplcm8gaXMgbmVlZCBmb3Igc2Vjb25kc1xuXG4gICAgcyA9IHMgPCAxMCA/ICcwJyArIHMgOiBzO1xuICAgIHJldHVybiBoICsgbSArIHM7XG4gIH07IC8vIEludGVybmFsIHBvaW50ZXIgdG8gdGhlIGN1cnJlbnQgaW1wbGVtZW50YXRpb24uXG5cblxuICB2YXIgaW1wbGVtZW50YXRpb24gPSBkZWZhdWx0SW1wbGVtZW50YXRpb247XG4gIC8qKlxuICAgKiBSZXBsYWNlcyB0aGUgZGVmYXVsdCBmb3JtYXRUaW1lIGltcGxlbWVudGF0aW9uIHdpdGggYSBjdXN0b20gaW1wbGVtZW50YXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbUltcGxlbWVudGF0aW9uXG4gICAqICAgICAgICBBIGZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgdXNlZCBpbiBwbGFjZSBvZiB0aGUgZGVmYXVsdCBmb3JtYXRUaW1lXG4gICAqICAgICAgICBpbXBsZW1lbnRhdGlvbi4gV2lsbCByZWNlaXZlIHRoZSBjdXJyZW50IHRpbWUgaW4gc2Vjb25kcyBhbmQgdGhlXG4gICAqICAgICAgICBndWlkZSAoaW4gc2Vjb25kcykgYXMgYXJndW1lbnRzLlxuICAgKi9cblxuICBmdW5jdGlvbiBzZXRGb3JtYXRUaW1lKGN1c3RvbUltcGxlbWVudGF0aW9uKSB7XG4gICAgaW1wbGVtZW50YXRpb24gPSBjdXN0b21JbXBsZW1lbnRhdGlvbjtcbiAgfVxuICAvKipcbiAgICogUmVzZXRzIGZvcm1hdFRpbWUgdG8gdGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24uXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlc2V0Rm9ybWF0VGltZSgpIHtcbiAgICBpbXBsZW1lbnRhdGlvbiA9IGRlZmF1bHRJbXBsZW1lbnRhdGlvbjtcbiAgfVxuICAvKipcbiAgICogRGVsZWdhdGVzIHRvIGVpdGhlciB0aGUgZGVmYXVsdCB0aW1lIGZvcm1hdHRpbmcgZnVuY3Rpb24gb3IgYSBjdXN0b21cbiAgICogZnVuY3Rpb24gc3VwcGxpZWQgdmlhIGBzZXRGb3JtYXRUaW1lYC5cbiAgICpcbiAgICogRm9ybWF0cyBzZWNvbmRzIGFzIGEgdGltZSBzdHJpbmcgKEg6TU06U1Mgb3IgTTpTUykuIFN1cHBseWluZyBhXG4gICAqIGd1aWRlIChpbiBzZWNvbmRzKSB3aWxsIGZvcmNlIGEgbnVtYmVyIG9mIGxlYWRpbmcgemVyb3MgdG8gY292ZXIgdGhlXG4gICAqIGxlbmd0aCBvZiB0aGUgZ3VpZGUuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQGV4YW1wbGUgIGZvcm1hdFRpbWUoMTI1LCA2MDApID09PSBcIjAyOjA1XCJcbiAgICogQHBhcmFtICAgIHtudW1iZXJ9IHNlY29uZHNcbiAgICogICAgICAgICAgIE51bWJlciBvZiBzZWNvbmRzIHRvIGJlIHR1cm5lZCBpbnRvIGEgc3RyaW5nXG4gICAqXG4gICAqIEBwYXJhbSAgICB7bnVtYmVyfSBndWlkZVxuICAgKiAgICAgICAgICAgTnVtYmVyIChpbiBzZWNvbmRzKSB0byBtb2RlbCB0aGUgc3RyaW5nIGFmdGVyXG4gICAqXG4gICAqIEByZXR1cm4gICB7c3RyaW5nfVxuICAgKiAgICAgICAgICAgVGltZSBmb3JtYXR0ZWQgYXMgSDpNTTpTUyBvciBNOlNTXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGZvcm1hdFRpbWUoc2Vjb25kcywgZ3VpZGUpIHtcbiAgICBpZiAoZ3VpZGUgPT09IHZvaWQgMCkge1xuICAgICAgZ3VpZGUgPSBzZWNvbmRzO1xuICAgIH1cblxuICAgIHJldHVybiBpbXBsZW1lbnRhdGlvbihzZWNvbmRzLCBndWlkZSk7XG4gIH1cblxuICAvKipcbiAgICogRGlzcGxheXMgdGltZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdmlkZW9cbiAgICpcbiAgICogQGV4dGVuZHMgQ29tcG9uZW50XG4gICAqL1xuXG4gIHZhciBUaW1lRGlzcGxheSA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHNMb29zZShUaW1lRGlzcGxheSwgX0NvbXBvbmVudCk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbWVEaXNwbGF5KHBsYXllciwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICBfdGhpcyA9IF9Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICBfdGhpcy50aHJvdHRsZWRVcGRhdGVDb250ZW50ID0gdGhyb3R0bGUoYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMudXBkYXRlQ29udGVudCksIDI1KTtcblxuICAgICAgX3RoaXMub24ocGxheWVyLCAndGltZXVwZGF0ZScsIF90aGlzLnRocm90dGxlZFVwZGF0ZUNvbnRlbnQpO1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgYENvbXBvbmVudGAncyBET00gZWxlbWVudFxuICAgICAqXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBUaW1lRGlzcGxheS5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSgpIHtcbiAgICAgIHZhciBjbGFzc05hbWUgPSB0aGlzLmJ1aWxkQ1NTQ2xhc3MoKTtcblxuICAgICAgdmFyIGVsID0gX0NvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArIFwiIHZqcy10aW1lLWNvbnRyb2wgdmpzLWNvbnRyb2xcIixcbiAgICAgICAgaW5uZXJIVE1MOiBcIjxzcGFuIGNsYXNzPVxcXCJ2anMtY29udHJvbC10ZXh0XFxcIiByb2xlPVxcXCJwcmVzZW50YXRpb25cXFwiPlwiICsgdGhpcy5sb2NhbGl6ZSh0aGlzLmxhYmVsVGV4dF8pICsgXCJcXHhBMDwvc3Bhbj5cIlxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuY29udGVudEVsXyA9IGNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArIFwiLWRpc3BsYXlcIlxuICAgICAgfSwge1xuICAgICAgICAvLyB0ZWxsIHNjcmVlbiByZWFkZXJzIG5vdCB0byBhdXRvbWF0aWNhbGx5IHJlYWQgdGhlIHRpbWUgYXMgaXQgY2hhbmdlc1xuICAgICAgICAnYXJpYS1saXZlJzogJ29mZicsXG4gICAgICAgIC8vIHNwYW4gZWxlbWVudHMgaGF2ZSBubyBpbXBsaWNpdCByb2xlLCBidXQgc29tZSBzY3JlZW4gcmVhZGVycyAobm90YWJseSBWb2ljZU92ZXIpXG4gICAgICAgIC8vIHRyZWF0IHRoZW0gYXMgYSBicmVhayBiZXR3ZWVuIGl0ZW1zIGluIHRoZSBET00gd2hlbiB1c2luZyBhcnJvdyBrZXlzXG4gICAgICAgIC8vIChvciBsZWZ0LXRvLXJpZ2h0IHN3aXBlcyBvbiBpT1MpIHRvIHJlYWQgY29udGVudHMgb2YgYSBwYWdlLiBVc2luZ1xuICAgICAgICAvLyByb2xlPSdwcmVzZW50YXRpb24nIGNhdXNlcyBWb2ljZU92ZXIgdG8gTk9UIHRyZWF0IHRoaXMgc3BhbiBhcyBhIGJyZWFrLlxuICAgICAgICAncm9sZSc6ICdwcmVzZW50YXRpb24nXG4gICAgICB9KTtcbiAgICAgIHRoaXMudXBkYXRlVGV4dE5vZGVfKCk7XG4gICAgICBlbC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnRFbF8pO1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH07XG5cbiAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICB0aGlzLmNvbnRlbnRFbF8gPSBudWxsO1xuICAgICAgdGhpcy50ZXh0Tm9kZV8gPSBudWxsO1xuXG4gICAgICBfQ29tcG9uZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIFwicmVtYWluaW5nIHRpbWVcIiB0ZXh0IG5vZGUgd2l0aCBuZXcgY29udGVudCB1c2luZyB0aGVcbiAgICAgKiBjb250ZW50cyBvZiB0aGUgYGZvcm1hdHRlZFRpbWVfYCBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnVwZGF0ZVRleHROb2RlXyA9IGZ1bmN0aW9uIHVwZGF0ZVRleHROb2RlXygpIHtcbiAgICAgIGlmICghdGhpcy5jb250ZW50RWxfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgd2hpbGUgKHRoaXMuY29udGVudEVsXy5maXJzdENoaWxkKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsXy5yZW1vdmVDaGlsZCh0aGlzLmNvbnRlbnRFbF8uZmlyc3RDaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMudGV4dE5vZGVfID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy5mb3JtYXR0ZWRUaW1lXyB8fCB0aGlzLmZvcm1hdFRpbWVfKDApKTtcbiAgICAgIHRoaXMuY29udGVudEVsXy5hcHBlbmRDaGlsZCh0aGlzLnRleHROb2RlXyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIGZvcm1hdHRlZCB0aW1lIGZvciB0aGlzIGNvbXBvbmVudCB0byB1c2UgaW4gZGlzcGxheS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge251bWJlcn0gdGltZVxuICAgICAqICAgICAgICAgQSBudW1lcmljIHRpbWUsIGluIHNlY29uZHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogICAgICAgICBBIGZvcm1hdHRlZCB0aW1lXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5mb3JtYXRUaW1lXyA9IGZ1bmN0aW9uIGZvcm1hdFRpbWVfKHRpbWUpIHtcbiAgICAgIHJldHVybiBmb3JtYXRUaW1lKHRpbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSB0aW1lIGRpc3BsYXkgdGV4dCBub2RlIGlmIGl0IGhhcyB3aGF0IHdhcyBwYXNzZWQgaW4gY2hhbmdlZFxuICAgICAqIHRoZSBmb3JtYXR0ZWQgdGltZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lXG4gICAgICogICAgICAgIFRoZSB0aW1lIHRvIHVwZGF0ZSB0b1xuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udXBkYXRlRm9ybWF0dGVkVGltZV8gPSBmdW5jdGlvbiB1cGRhdGVGb3JtYXR0ZWRUaW1lXyh0aW1lKSB7XG4gICAgICB2YXIgZm9ybWF0dGVkVGltZSA9IHRoaXMuZm9ybWF0VGltZV8odGltZSk7XG5cbiAgICAgIGlmIChmb3JtYXR0ZWRUaW1lID09PSB0aGlzLmZvcm1hdHRlZFRpbWVfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5mb3JtYXR0ZWRUaW1lXyA9IGZvcm1hdHRlZFRpbWU7XG4gICAgICB0aGlzLnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZVRleHROb2RlXyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRvIGJlIGZpbGxlZCBvdXQgaW4gdGhlIGNoaWxkIGNsYXNzLCBzaG91bGQgdXBkYXRlIHRoZSBkaXNwbGF5ZWQgdGltZVxuICAgICAqIGluIGFjY29yZGFuY2Ugd2l0aCB0aGUgZmFjdCB0aGF0IHRoZSBjdXJyZW50IHRpbWUgaGFzIGNoYW5nZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAgICogICAgICAgIFRoZSBgdGltZXVwZGF0ZWAgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgdG8gcnVuLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgUGxheWVyI3RpbWV1cGRhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udXBkYXRlQ29udGVudCA9IGZ1bmN0aW9uIHVwZGF0ZUNvbnRlbnQoZXZlbnQpIHt9O1xuXG4gICAgcmV0dXJuIFRpbWVEaXNwbGF5O1xuICB9KENvbXBvbmVudCk7XG4gIC8qKlxuICAgKiBUaGUgdGV4dCB0aGF0IGlzIGFkZGVkIHRvIHRoZSBgVGltZURpc3BsYXlgIGZvciBzY3JlZW4gcmVhZGVyIHVzZXJzLlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIFRpbWVEaXNwbGF5LnByb3RvdHlwZS5sYWJlbFRleHRfID0gJ1RpbWUnO1xuICAvKipcbiAgICogVGhlIHRleHQgdGhhdCBzaG91bGQgZGlzcGxheSBvdmVyIHRoZSBgVGltZURpc3BsYXlgcyBjb250cm9scy4gQWRkZWQgdG8gZm9yIGxvY2FsaXphdGlvbi5cbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgaW4gdjc7IGNvbnRyb2xUZXh0XyBpcyBub3QgdXNlZCBpbiBub24tYWN0aXZlIGRpc3BsYXkgQ29tcG9uZW50c1xuICAgKi9cblxuICBUaW1lRGlzcGxheS5wcm90b3R5cGUuY29udHJvbFRleHRfID0gJ1RpbWUnO1xuICBDb21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ1RpbWVEaXNwbGF5JywgVGltZURpc3BsYXkpO1xuXG4gIC8qKlxuICAgKiBEaXNwbGF5cyB0aGUgY3VycmVudCB0aW1lXG4gICAqXG4gICAqIEBleHRlbmRzIENvbXBvbmVudFxuICAgKi9cblxuICB2YXIgQ3VycmVudFRpbWVEaXNwbGF5ID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX1RpbWVEaXNwbGF5KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoQ3VycmVudFRpbWVEaXNwbGF5LCBfVGltZURpc3BsYXkpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDdXJyZW50VGltZURpc3BsYXkocGxheWVyLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX1RpbWVEaXNwbGF5LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuXG4gICAgICBfdGhpcy5vbihwbGF5ZXIsICdlbmRlZCcsIF90aGlzLmhhbmRsZUVuZGVkKTtcblxuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgdGhlIGRlZmF1bHQgRE9NIGBjbGFzc05hbWVgLlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgVGhlIERPTSBgY2xhc3NOYW1lYCBmb3IgdGhpcyBvYmplY3QuXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBDdXJyZW50VGltZURpc3BsYXkucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgICAgcmV0dXJuICd2anMtY3VycmVudC10aW1lJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIGN1cnJlbnQgdGltZSBkaXNwbGF5XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAgICogICAgICAgIFRoZSBgdGltZXVwZGF0ZWAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBydW4uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBQbGF5ZXIjdGltZXVwZGF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by51cGRhdGVDb250ZW50ID0gZnVuY3Rpb24gdXBkYXRlQ29udGVudChldmVudCkge1xuICAgICAgLy8gQWxsb3dzIGZvciBzbW9vdGggc2NydWJiaW5nLCB3aGVuIHBsYXllciBjYW4ndCBrZWVwIHVwLlxuICAgICAgdmFyIHRpbWUgPSB0aGlzLnBsYXllcl8uc2NydWJiaW5nKCkgPyB0aGlzLnBsYXllcl8uZ2V0Q2FjaGUoKS5jdXJyZW50VGltZSA6IHRoaXMucGxheWVyXy5jdXJyZW50VGltZSgpO1xuICAgICAgdGhpcy51cGRhdGVGb3JtYXR0ZWRUaW1lXyh0aW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hlbiB0aGUgcGxheWVyIGZpcmVzIGVuZGVkIHRoZXJlIHNob3VsZCBiZSBubyB0aW1lIGxlZnQuIFNhZGx5XG4gICAgICogdGhpcyBpcyBub3QgYWx3YXlzIHRoZSBjYXNlLCBsZXRzIG1ha2UgaXQgc2VlbSBsaWtlIHRoYXQgaXMgdGhlIGNhc2VcbiAgICAgKiBmb3IgdXNlcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAgICogICAgICAgIFRoZSBgZW5kZWRgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgdG8gcnVuLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgUGxheWVyI2VuZGVkXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZUVuZGVkID0gZnVuY3Rpb24gaGFuZGxlRW5kZWQoZXZlbnQpIHtcbiAgICAgIGlmICghdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnVwZGF0ZUZvcm1hdHRlZFRpbWVfKHRoaXMucGxheWVyXy5kdXJhdGlvbigpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEN1cnJlbnRUaW1lRGlzcGxheTtcbiAgfShUaW1lRGlzcGxheSk7XG4gIC8qKlxuICAgKiBUaGUgdGV4dCB0aGF0IGlzIGFkZGVkIHRvIHRoZSBgQ3VycmVudFRpbWVEaXNwbGF5YCBmb3Igc2NyZWVuIHJlYWRlciB1c2Vycy5cbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICBDdXJyZW50VGltZURpc3BsYXkucHJvdG90eXBlLmxhYmVsVGV4dF8gPSAnQ3VycmVudCBUaW1lJztcbiAgLyoqXG4gICAqIFRoZSB0ZXh0IHRoYXQgc2hvdWxkIGRpc3BsYXkgb3ZlciB0aGUgYEN1cnJlbnRUaW1lRGlzcGxheWBzIGNvbnRyb2xzLiBBZGRlZCB0byBmb3IgbG9jYWxpemF0aW9uLlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCBpbiB2NzsgY29udHJvbFRleHRfIGlzIG5vdCB1c2VkIGluIG5vbi1hY3RpdmUgZGlzcGxheSBDb21wb25lbnRzXG4gICAqL1xuXG4gIEN1cnJlbnRUaW1lRGlzcGxheS5wcm90b3R5cGUuY29udHJvbFRleHRfID0gJ0N1cnJlbnQgVGltZSc7XG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnQ3VycmVudFRpbWVEaXNwbGF5JywgQ3VycmVudFRpbWVEaXNwbGF5KTtcblxuICAvKipcbiAgICogRGlzcGxheXMgdGhlIGR1cmF0aW9uXG4gICAqXG4gICAqIEBleHRlbmRzIENvbXBvbmVudFxuICAgKi9cblxuICB2YXIgRHVyYXRpb25EaXNwbGF5ID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX1RpbWVEaXNwbGF5KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoRHVyYXRpb25EaXNwbGF5LCBfVGltZURpc3BsYXkpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBEdXJhdGlvbkRpc3BsYXkocGxheWVyLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX1RpbWVEaXNwbGF5LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzOyAvLyB3ZSBkbyBub3Qgd2FudCB0by9uZWVkIHRvIHRocm90dGxlIGR1cmF0aW9uIGNoYW5nZXMsXG4gICAgICAvLyBhcyB0aGV5IHNob3VsZCBhbHdheXMgZGlzcGxheSB0aGUgY2hhbmdlZCBkdXJhdGlvbiBhc1xuICAgICAgLy8gaXQgaGFzIGNoYW5nZWRcblxuICAgICAgX3RoaXMub24ocGxheWVyLCAnZHVyYXRpb25jaGFuZ2UnLCBfdGhpcy51cGRhdGVDb250ZW50KTsgLy8gTGlzdGVuIHRvIGxvYWRzdGFydCBiZWNhdXNlIHRoZSBwbGF5ZXIgZHVyYXRpb24gaXMgcmVzZXQgd2hlbiBhIG5ldyBtZWRpYSBlbGVtZW50IGlzIGxvYWRlZCxcbiAgICAgIC8vIGJ1dCB0aGUgZHVyYXRpb25jaGFuZ2Ugb24gdGhlIHVzZXIgYWdlbnQgd2lsbCBub3QgZmlyZS5cbiAgICAgIC8vIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDExL1dELWh0bWw1LTIwMTEwMTEzL3ZpZGVvLmh0bWwjbWVkaWEtZWxlbWVudC1sb2FkLWFsZ29yaXRobX1cblxuXG4gICAgICBfdGhpcy5vbihwbGF5ZXIsICdsb2Fkc3RhcnQnLCBfdGhpcy51cGRhdGVDb250ZW50KTsgLy8gQWxzbyBsaXN0ZW4gZm9yIHRpbWV1cGRhdGUgKGluIHRoZSBwYXJlbnQpIGFuZCBsb2FkZWRtZXRhZGF0YSBiZWNhdXNlIHJlbW92aW5nIHRob3NlXG4gICAgICAvLyBsaXN0ZW5lcnMgY291bGQgaGF2ZSBicm9rZW4gZGVwZW5kZW50IGFwcGxpY2F0aW9ucy9saWJyYXJpZXMuIFRoZXNlXG4gICAgICAvLyBjYW4gbGlrZWx5IGJlIHJlbW92ZWQgZm9yIDcuMC5cblxuXG4gICAgICBfdGhpcy5vbihwbGF5ZXIsICdsb2FkZWRtZXRhZGF0YScsIF90aGlzLnRocm90dGxlZFVwZGF0ZUNvbnRlbnQpO1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1aWxkcyB0aGUgZGVmYXVsdCBET00gYGNsYXNzTmFtZWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogICAgICAgICBUaGUgRE9NIGBjbGFzc05hbWVgIGZvciB0aGlzIG9iamVjdC5cbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90byA9IER1cmF0aW9uRGlzcGxheS5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkQ1NTQ2xhc3MoKSB7XG4gICAgICByZXR1cm4gJ3Zqcy1kdXJhdGlvbic7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBkdXJhdGlvbiB0aW1lIGRpc3BsYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAgICogICAgICAgIFRoZSBgZHVyYXRpb25jaGFuZ2VgLCBgdGltZXVwZGF0ZWAsIG9yIGBsb2FkZWRtZXRhZGF0YWAgZXZlbnQgdGhhdCBjYXVzZWRcbiAgICAgKiAgICAgICAgdGhpcyBmdW5jdGlvbiB0byBiZSBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBQbGF5ZXIjZHVyYXRpb25jaGFuZ2VcbiAgICAgKiBAbGlzdGVucyBQbGF5ZXIjdGltZXVwZGF0ZVxuICAgICAqIEBsaXN0ZW5zIFBsYXllciNsb2FkZWRtZXRhZGF0YVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by51cGRhdGVDb250ZW50ID0gZnVuY3Rpb24gdXBkYXRlQ29udGVudChldmVudCkge1xuICAgICAgdmFyIGR1cmF0aW9uID0gdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCk7XG5cbiAgICAgIGlmICh0aGlzLmR1cmF0aW9uXyAhPT0gZHVyYXRpb24pIHtcbiAgICAgICAgdGhpcy5kdXJhdGlvbl8gPSBkdXJhdGlvbjtcbiAgICAgICAgdGhpcy51cGRhdGVGb3JtYXR0ZWRUaW1lXyhkdXJhdGlvbik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBEdXJhdGlvbkRpc3BsYXk7XG4gIH0oVGltZURpc3BsYXkpO1xuICAvKipcbiAgICogVGhlIHRleHQgdGhhdCBpcyBhZGRlZCB0byB0aGUgYER1cmF0aW9uRGlzcGxheWAgZm9yIHNjcmVlbiByZWFkZXIgdXNlcnMuXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgRHVyYXRpb25EaXNwbGF5LnByb3RvdHlwZS5sYWJlbFRleHRfID0gJ0R1cmF0aW9uJztcbiAgLyoqXG4gICAqIFRoZSB0ZXh0IHRoYXQgc2hvdWxkIGRpc3BsYXkgb3ZlciB0aGUgYER1cmF0aW9uRGlzcGxheWBzIGNvbnRyb2xzLiBBZGRlZCB0byBmb3IgbG9jYWxpemF0aW9uLlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCBpbiB2NzsgY29udHJvbFRleHRfIGlzIG5vdCB1c2VkIGluIG5vbi1hY3RpdmUgZGlzcGxheSBDb21wb25lbnRzXG4gICAqL1xuXG4gIER1cmF0aW9uRGlzcGxheS5wcm90b3R5cGUuY29udHJvbFRleHRfID0gJ0R1cmF0aW9uJztcbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdEdXJhdGlvbkRpc3BsYXknLCBEdXJhdGlvbkRpc3BsYXkpO1xuXG4gIC8qKlxuICAgKiBUaGUgc2VwYXJhdG9yIGJldHdlZW4gdGhlIGN1cnJlbnQgdGltZSBhbmQgZHVyYXRpb24uXG4gICAqIENhbiBiZSBoaWRkZW4gaWYgaXQncyBub3QgbmVlZGVkIGluIHRoZSBkZXNpZ24uXG4gICAqXG4gICAqIEBleHRlbmRzIENvbXBvbmVudFxuICAgKi9cblxuICB2YXIgVGltZURpdmlkZXIgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoVGltZURpdmlkZXIsIF9Db21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gVGltZURpdmlkZXIoKSB7XG4gICAgICByZXR1cm4gX0NvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90byA9IFRpbWVEaXZpZGVyLnByb3RvdHlwZTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgY29tcG9uZW50J3MgRE9NIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsKCkge1xuICAgICAgcmV0dXJuIF9Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAndmpzLXRpbWUtY29udHJvbCB2anMtdGltZS1kaXZpZGVyJyxcbiAgICAgICAgaW5uZXJIVE1MOiAnPGRpdj48c3Bhbj4vPC9zcGFuPjwvZGl2PidcbiAgICAgIH0sIHtcbiAgICAgICAgLy8gdGhpcyBlbGVtZW50IGFuZCBpdHMgY29udGVudHMgY2FuIGJlIGhpZGRlbiBmcm9tIGFzc2lzdGl2ZSB0ZWNocyBzaW5jZVxuICAgICAgICAvLyBpdCBpcyBtYWRlIGV4dHJhbmVvdXMgYnkgdGhlIGFubm91bmNlbWVudCBvZiB0aGUgY29udHJvbCB0ZXh0XG4gICAgICAgIC8vIGZvciB0aGUgY3VycmVudCB0aW1lIGFuZCBkdXJhdGlvbiBkaXNwbGF5c1xuICAgICAgICAnYXJpYS1oaWRkZW4nOiB0cnVlXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRpbWVEaXZpZGVyO1xuICB9KENvbXBvbmVudCk7XG5cbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdUaW1lRGl2aWRlcicsIFRpbWVEaXZpZGVyKTtcblxuICAvKipcbiAgICogRGlzcGxheXMgdGhlIHRpbWUgbGVmdCBpbiB0aGUgdmlkZW9cbiAgICpcbiAgICogQGV4dGVuZHMgQ29tcG9uZW50XG4gICAqL1xuXG4gIHZhciBSZW1haW5pbmdUaW1lRGlzcGxheSA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9UaW1lRGlzcGxheSkge1xuICAgIF9pbmhlcml0c0xvb3NlKFJlbWFpbmluZ1RpbWVEaXNwbGF5LCBfVGltZURpc3BsYXkpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZW1haW5pbmdUaW1lRGlzcGxheShwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgX3RoaXMgPSBfVGltZURpc3BsYXkuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG5cbiAgICAgIF90aGlzLm9uKHBsYXllciwgJ2R1cmF0aW9uY2hhbmdlJywgX3RoaXMudGhyb3R0bGVkVXBkYXRlQ29udGVudCk7XG5cbiAgICAgIF90aGlzLm9uKHBsYXllciwgJ2VuZGVkJywgX3RoaXMuaGFuZGxlRW5kZWQpO1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1aWxkcyB0aGUgZGVmYXVsdCBET00gYGNsYXNzTmFtZWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogICAgICAgICBUaGUgRE9NIGBjbGFzc05hbWVgIGZvciB0aGlzIG9iamVjdC5cbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90byA9IFJlbWFpbmluZ1RpbWVEaXNwbGF5LnByb3RvdHlwZTtcblxuICAgIF9wcm90by5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRDU1NDbGFzcygpIHtcbiAgICAgIHJldHVybiAndmpzLXJlbWFpbmluZy10aW1lJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBgQ29tcG9uZW50YCdzIERPTSBlbGVtZW50IHdpdGggdGhlIFwibWludXNcIiBjaGFyYWN0ZWQgcHJlcGVuZCB0byB0aGUgdGltZVxuICAgICAqXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwkJDEoKSB7XG4gICAgICB2YXIgZWwgPSBfVGltZURpc3BsYXkucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcyk7XG5cbiAgICAgIGVsLmluc2VydEJlZm9yZShjcmVhdGVFbCgnc3BhbicsIHt9LCB7XG4gICAgICAgICdhcmlhLWhpZGRlbic6IHRydWVcbiAgICAgIH0sICctJyksIHRoaXMuY29udGVudEVsXyk7XG4gICAgICByZXR1cm4gZWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSByZW1haW5pbmcgdGltZSBkaXNwbGF5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgICAqICAgICAgICBUaGUgYHRpbWV1cGRhdGVgIG9yIGBkdXJhdGlvbmNoYW5nZWAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyB0byBydW4uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBQbGF5ZXIjdGltZXVwZGF0ZVxuICAgICAqIEBsaXN0ZW5zIFBsYXllciNkdXJhdGlvbmNoYW5nZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by51cGRhdGVDb250ZW50ID0gZnVuY3Rpb24gdXBkYXRlQ29udGVudChldmVudCkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnBsYXllcl8uZHVyYXRpb24oKSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBAZGVwcmVjYXRlZCBXZSBzaG91bGQgb25seSB1c2UgcmVtYWluaW5nVGltZURpc3BsYXlcbiAgICAgIC8vIGFzIG9mIHZpZGVvLmpzIDdcblxuXG4gICAgICBpZiAodGhpcy5wbGF5ZXJfLnJlbWFpbmluZ1RpbWVEaXNwbGF5KSB7XG4gICAgICAgIHRoaXMudXBkYXRlRm9ybWF0dGVkVGltZV8odGhpcy5wbGF5ZXJfLnJlbWFpbmluZ1RpbWVEaXNwbGF5KCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy51cGRhdGVGb3JtYXR0ZWRUaW1lXyh0aGlzLnBsYXllcl8ucmVtYWluaW5nVGltZSgpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hlbiB0aGUgcGxheWVyIGZpcmVzIGVuZGVkIHRoZXJlIHNob3VsZCBiZSBubyB0aW1lIGxlZnQuIFNhZGx5XG4gICAgICogdGhpcyBpcyBub3QgYWx3YXlzIHRoZSBjYXNlLCBsZXRzIG1ha2UgaXQgc2VlbSBsaWtlIHRoYXQgaXMgdGhlIGNhc2VcbiAgICAgKiBmb3IgdXNlcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAgICogICAgICAgIFRoZSBgZW5kZWRgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgdG8gcnVuLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgUGxheWVyI2VuZGVkXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZUVuZGVkID0gZnVuY3Rpb24gaGFuZGxlRW5kZWQoZXZlbnQpIHtcbiAgICAgIGlmICghdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnVwZGF0ZUZvcm1hdHRlZFRpbWVfKDApO1xuICAgIH07XG5cbiAgICByZXR1cm4gUmVtYWluaW5nVGltZURpc3BsYXk7XG4gIH0oVGltZURpc3BsYXkpO1xuICAvKipcbiAgICogVGhlIHRleHQgdGhhdCBpcyBhZGRlZCB0byB0aGUgYFJlbWFpbmluZ1RpbWVEaXNwbGF5YCBmb3Igc2NyZWVuIHJlYWRlciB1c2Vycy5cbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICBSZW1haW5pbmdUaW1lRGlzcGxheS5wcm90b3R5cGUubGFiZWxUZXh0XyA9ICdSZW1haW5pbmcgVGltZSc7XG4gIC8qKlxuICAgKiBUaGUgdGV4dCB0aGF0IHNob3VsZCBkaXNwbGF5IG92ZXIgdGhlIGBSZW1haW5pbmdUaW1lRGlzcGxheWBzIGNvbnRyb2xzLiBBZGRlZCB0byBmb3IgbG9jYWxpemF0aW9uLlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCBpbiB2NzsgY29udHJvbFRleHRfIGlzIG5vdCB1c2VkIGluIG5vbi1hY3RpdmUgZGlzcGxheSBDb21wb25lbnRzXG4gICAqL1xuXG4gIFJlbWFpbmluZ1RpbWVEaXNwbGF5LnByb3RvdHlwZS5jb250cm9sVGV4dF8gPSAnUmVtYWluaW5nIFRpbWUnO1xuICBDb21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ1JlbWFpbmluZ1RpbWVEaXNwbGF5JywgUmVtYWluaW5nVGltZURpc3BsYXkpO1xuXG4gIC8qKlxuICAgKiBEaXNwbGF5cyB0aGUgbGl2ZSBpbmRpY2F0b3Igd2hlbiBkdXJhdGlvbiBpcyBJbmZpbml0eS5cbiAgICpcbiAgICogQGV4dGVuZHMgQ29tcG9uZW50XG4gICAqL1xuXG4gIHZhciBMaXZlRGlzcGxheSA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHNMb29zZShMaXZlRGlzcGxheSwgX0NvbXBvbmVudCk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExpdmVEaXNwbGF5KHBsYXllciwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICBfdGhpcyA9IF9Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG5cbiAgICAgIF90aGlzLnVwZGF0ZVNob3dpbmcoKTtcblxuICAgICAgX3RoaXMub24oX3RoaXMucGxheWVyKCksICdkdXJhdGlvbmNoYW5nZScsIF90aGlzLnVwZGF0ZVNob3dpbmcpO1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgYENvbXBvbmVudGAncyBET00gZWxlbWVudFxuICAgICAqXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBMaXZlRGlzcGxheS5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSgpIHtcbiAgICAgIHZhciBlbCA9IF9Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAndmpzLWxpdmUtY29udHJvbCB2anMtY29udHJvbCdcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmNvbnRlbnRFbF8gPSBjcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICBjbGFzc05hbWU6ICd2anMtbGl2ZS1kaXNwbGF5JyxcbiAgICAgICAgaW5uZXJIVE1MOiBcIjxzcGFuIGNsYXNzPVxcXCJ2anMtY29udHJvbC10ZXh0XFxcIj5cIiArIHRoaXMubG9jYWxpemUoJ1N0cmVhbSBUeXBlJykgKyBcIlxceEEwPC9zcGFuPlwiICsgdGhpcy5sb2NhbGl6ZSgnTElWRScpXG4gICAgICB9LCB7XG4gICAgICAgICdhcmlhLWxpdmUnOiAnb2ZmJ1xuICAgICAgfSk7XG4gICAgICBlbC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnRFbF8pO1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH07XG5cbiAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICB0aGlzLmNvbnRlbnRFbF8gPSBudWxsO1xuXG4gICAgICBfQ29tcG9uZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIHRoZSBkdXJhdGlvbiB0byBzZWUgaWYgdGhlIExpdmVEaXNwbGF5IHNob3VsZCBiZSBzaG93aW5nIG9yIG5vdC4gVGhlbiBzaG93L2hpZGVcbiAgICAgKiBpdCBhY2NvcmRpbmdseVxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgICAqICAgICAgICBUaGUge0BsaW5rIFBsYXllciNkdXJhdGlvbmNoYW5nZX0gZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBydW4uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBQbGF5ZXIjZHVyYXRpb25jaGFuZ2VcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udXBkYXRlU2hvd2luZyA9IGZ1bmN0aW9uIHVwZGF0ZVNob3dpbmcoZXZlbnQpIHtcbiAgICAgIGlmICh0aGlzLnBsYXllcigpLmR1cmF0aW9uKCkgPT09IEluZmluaXR5KSB7XG4gICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBMaXZlRGlzcGxheTtcbiAgfShDb21wb25lbnQpO1xuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnTGl2ZURpc3BsYXknLCBMaXZlRGlzcGxheSk7XG5cbiAgLyoqXG4gICAqIERpc3BsYXlzIHRoZSBsaXZlIGluZGljYXRvciB3aGVuIGR1cmF0aW9uIGlzIEluZmluaXR5LlxuICAgKlxuICAgKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAgICovXG5cbiAgdmFyIFNlZWtUb0xpdmUgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfQnV0dG9uKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoU2Vla1RvTGl2ZSwgX0J1dHRvbik7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFNlZWtUb0xpdmUocGxheWVyLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX0J1dHRvbi5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcblxuICAgICAgX3RoaXMudXBkYXRlTGl2ZUVkZ2VTdGF0dXMoKTtcblxuICAgICAgaWYgKF90aGlzLnBsYXllcl8ubGl2ZVRyYWNrZXIpIHtcbiAgICAgICAgX3RoaXMub24oX3RoaXMucGxheWVyXy5saXZlVHJhY2tlciwgJ2xpdmVlZGdlY2hhbmdlJywgX3RoaXMudXBkYXRlTGl2ZUVkZ2VTdGF0dXMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgYENvbXBvbmVudGAncyBET00gZWxlbWVudFxuICAgICAqXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBTZWVrVG9MaXZlLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsJCQxKCkge1xuICAgICAgdmFyIGVsID0gX0J1dHRvbi5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnYnV0dG9uJywge1xuICAgICAgICBjbGFzc05hbWU6ICd2anMtc2Vlay10by1saXZlLWNvbnRyb2wgdmpzLWNvbnRyb2wnXG4gICAgICB9KTtcblxuICAgICAgdGhpcy50ZXh0RWxfID0gY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ3Zqcy1zZWVrLXRvLWxpdmUtdGV4dCcsXG4gICAgICAgIGlubmVySFRNTDogdGhpcy5sb2NhbGl6ZSgnTElWRScpXG4gICAgICB9LCB7XG4gICAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJ1xuICAgICAgfSk7XG4gICAgICBlbC5hcHBlbmRDaGlsZCh0aGlzLnRleHRFbF8pO1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHN0YXRlIG9mIHRoaXMgYnV0dG9uIGlmIHdlIGFyZSBhdCB0aGUgbGl2ZSBlZGdlXG4gICAgICogb3Igbm90XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnVwZGF0ZUxpdmVFZGdlU3RhdHVzID0gZnVuY3Rpb24gdXBkYXRlTGl2ZUVkZ2VTdGF0dXMoZSkge1xuICAgICAgLy8gZGVmYXVsdCB0byBsaXZlIGVkZ2VcbiAgICAgIGlmICghdGhpcy5wbGF5ZXJfLmxpdmVUcmFja2VyIHx8IHRoaXMucGxheWVyXy5saXZlVHJhY2tlci5hdExpdmVFZGdlKCkpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWF0LWxpdmUtZWRnZScpO1xuICAgICAgICB0aGlzLmNvbnRyb2xUZXh0KCdTZWVrIHRvIGxpdmUsIGN1cnJlbnRseSBwbGF5aW5nIGxpdmUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtYXQtbGl2ZS1lZGdlJyk7XG4gICAgICAgIHRoaXMuY29udHJvbFRleHQoJ1NlZWsgdG8gbGl2ZSwgY3VycmVudGx5IGJlaGluZCBsaXZlJyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9uIGNsaWNrIGJyaW5nIHVzIGFzIG5lYXIgdG8gdGhlIGxpdmUgcG9pbnQgYXMgcG9zc2libGUuXG4gICAgICogVGhpcyByZXF1aXJlcyB0aGF0IHdlIHdhaXQgZm9yIHRoZSBuZXh0IGBsaXZlLXNlZWthYmxlLWNoYW5nZWBcbiAgICAgKiBldmVudCB3aGljaCB3aWxsIGhhcHBlbiBldmVyeSBzZWdtZW50IGxlbmd0aCBzZWNvbmRzLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKCkge1xuICAgICAgdGhpcy5wbGF5ZXJfLmxpdmVUcmFja2VyLnNlZWtUb0xpdmVFZGdlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc3Bvc2Ugb2YgdGhlIGVsZW1lbnQgYW5kIHN0b3AgdHJhY2tpbmdcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICBpZiAodGhpcy5wbGF5ZXJfLmxpdmVUcmFja2VyKSB7XG4gICAgICAgIHRoaXMub2ZmKHRoaXMucGxheWVyXy5saXZlVHJhY2tlciwgJ2xpdmVlZGdlY2hhbmdlJywgdGhpcy51cGRhdGVMaXZlRWRnZVN0YXR1cyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMudGV4dEVsXyA9IG51bGw7XG5cbiAgICAgIF9CdXR0b24ucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNlZWtUb0xpdmU7XG4gIH0oQnV0dG9uKTtcblxuICBTZWVrVG9MaXZlLnByb3RvdHlwZS5jb250cm9sVGV4dF8gPSAnU2VlayB0byBsaXZlLCBjdXJyZW50bHkgcGxheWluZyBsaXZlJztcbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdTZWVrVG9MaXZlJywgU2Vla1RvTGl2ZSk7XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGZ1bmN0aW9uYWxpdHkgZm9yIGEgc2xpZGVyLiBDYW4gYmUgdmVydGljYWwgb3IgaG9yaXpvbnRhbC5cbiAgICogRm9yIGluc3RhbmNlIHRoZSB2b2x1bWUgYmFyIG9yIHRoZSBzZWVrIGJhciBvbiBhIHZpZGVvIGlzIGEgc2xpZGVyLlxuICAgKlxuICAgKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAgICovXG5cbiAgdmFyIFNsaWRlciA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHNMb29zZShTbGlkZXIsIF9Db21wb25lbnQpO1xuXG4gICAgLyoqXG4gICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzc1xuICAgICpcbiAgICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICAqXG4gICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICAqL1xuICAgIGZ1bmN0aW9uIFNsaWRlcihwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgX3RoaXMgPSBfQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzOyAvLyBTZXQgcHJvcGVydHkgbmFtZXMgdG8gYmFyIHRvIG1hdGNoIHdpdGggdGhlIGNoaWxkIFNsaWRlciBjbGFzcyBpcyBsb29raW5nIGZvclxuXG4gICAgICBfdGhpcy5iYXIgPSBfdGhpcy5nZXRDaGlsZChfdGhpcy5vcHRpb25zXy5iYXJOYW1lKTsgLy8gU2V0IGEgaG9yaXpvbnRhbCBvciB2ZXJ0aWNhbCBjbGFzcyBvbiB0aGUgc2xpZGVyIGRlcGVuZGluZyBvbiB0aGUgc2xpZGVyIHR5cGVcblxuICAgICAgX3RoaXMudmVydGljYWwoISFfdGhpcy5vcHRpb25zXy52ZXJ0aWNhbCk7XG5cbiAgICAgIF90aGlzLmVuYWJsZSgpO1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFyZSBjb250cm9scyBhcmUgY3VycmVudGx5IGVuYWJsZWQgZm9yIHRoaXMgc2xpZGVyIG9yIG5vdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICogICAgICAgICB0cnVlIGlmIGNvbnRyb2xzIGFyZSBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90byA9IFNsaWRlci5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uZW5hYmxlZCA9IGZ1bmN0aW9uIGVuYWJsZWQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbmFibGVkXztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5hYmxlIGNvbnRyb2xzIGZvciB0aGlzIHNsaWRlciBpZiB0aGV5IGFyZSBkaXNhYmxlZFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5lbmFibGUgPSBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICBpZiAodGhpcy5lbmFibGVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9uKCdtb3VzZWRvd24nLCB0aGlzLmhhbmRsZU1vdXNlRG93bik7XG4gICAgICB0aGlzLm9uKCd0b3VjaHN0YXJ0JywgdGhpcy5oYW5kbGVNb3VzZURvd24pO1xuICAgICAgdGhpcy5vbignZm9jdXMnLCB0aGlzLmhhbmRsZUZvY3VzKTtcbiAgICAgIHRoaXMub24oJ2JsdXInLCB0aGlzLmhhbmRsZUJsdXIpO1xuICAgICAgdGhpcy5vbignY2xpY2snLCB0aGlzLmhhbmRsZUNsaWNrKTtcbiAgICAgIHRoaXMub24odGhpcy5wbGF5ZXJfLCAnY29udHJvbHN2aXNpYmxlJywgdGhpcy51cGRhdGUpO1xuXG4gICAgICBpZiAodGhpcy5wbGF5ZXJFdmVudCkge1xuICAgICAgICB0aGlzLm9uKHRoaXMucGxheWVyXywgdGhpcy5wbGF5ZXJFdmVudCwgdGhpcy51cGRhdGUpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgMCk7XG4gICAgICB0aGlzLmVuYWJsZWRfID0gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzYWJsZSBjb250cm9scyBmb3IgdGhpcyBzbGlkZXIgaWYgdGhleSBhcmUgZW5hYmxlZFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5kaXNhYmxlID0gZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICAgIGlmICghdGhpcy5lbmFibGVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZG9jID0gdGhpcy5iYXIuZWxfLm93bmVyRG9jdW1lbnQ7XG4gICAgICB0aGlzLm9mZignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVNb3VzZURvd24pO1xuICAgICAgdGhpcy5vZmYoJ3RvdWNoc3RhcnQnLCB0aGlzLmhhbmRsZU1vdXNlRG93bik7XG4gICAgICB0aGlzLm9mZignZm9jdXMnLCB0aGlzLmhhbmRsZUZvY3VzKTtcbiAgICAgIHRoaXMub2ZmKCdibHVyJywgdGhpcy5oYW5kbGVCbHVyKTtcbiAgICAgIHRoaXMub2ZmKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2spO1xuICAgICAgdGhpcy5vZmYodGhpcy5wbGF5ZXJfLCAnY29udHJvbHN2aXNpYmxlJywgdGhpcy51cGRhdGUpO1xuICAgICAgdGhpcy5vZmYoZG9jLCAnbW91c2Vtb3ZlJywgdGhpcy5oYW5kbGVNb3VzZU1vdmUpO1xuICAgICAgdGhpcy5vZmYoZG9jLCAnbW91c2V1cCcsIHRoaXMuaGFuZGxlTW91c2VVcCk7XG4gICAgICB0aGlzLm9mZihkb2MsICd0b3VjaG1vdmUnLCB0aGlzLmhhbmRsZU1vdXNlTW92ZSk7XG4gICAgICB0aGlzLm9mZihkb2MsICd0b3VjaGVuZCcsIHRoaXMuaGFuZGxlTW91c2VVcCk7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cbiAgICAgIGlmICh0aGlzLnBsYXllckV2ZW50KSB7XG4gICAgICAgIHRoaXMub2ZmKHRoaXMucGxheWVyXywgdGhpcy5wbGF5ZXJFdmVudCwgdGhpcy51cGRhdGUpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmVuYWJsZWRfID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgYFNsaWRlcmBzIERPTSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICAgKiAgICAgICAgVHlwZSBvZiBlbGVtZW50IHRvIGNyZWF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcHM9e31dXG4gICAgICogICAgICAgIExpc3Qgb2YgcHJvcGVydGllcyBpbiBPYmplY3QgZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbYXR0cmlidXRlcz17fV1cbiAgICAgKiAgICAgICAgbGlzdCBvZiBhdHRyaWJ1dGVzIGluIE9iamVjdCBmb3JtLlxuICAgICAqXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgZ2V0cyBjcmVhdGVkLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsJCQxKHR5cGUsIHByb3BzLCBhdHRyaWJ1dGVzKSB7XG4gICAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkge1xuICAgICAgICBwcm9wcyA9IHt9O1xuICAgICAgfVxuXG4gICAgICBpZiAoYXR0cmlidXRlcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHRoZSBzbGlkZXIgZWxlbWVudCBjbGFzcyB0byBhbGwgc3ViIGNsYXNzZXNcbiAgICAgIHByb3BzLmNsYXNzTmFtZSA9IHByb3BzLmNsYXNzTmFtZSArICcgdmpzLXNsaWRlcic7XG4gICAgICBwcm9wcyA9IGFzc2lnbih7XG4gICAgICAgIHRhYkluZGV4OiAwXG4gICAgICB9LCBwcm9wcyk7XG4gICAgICBhdHRyaWJ1dGVzID0gYXNzaWduKHtcbiAgICAgICAgJ3JvbGUnOiAnc2xpZGVyJyxcbiAgICAgICAgJ2FyaWEtdmFsdWVub3cnOiAwLFxuICAgICAgICAnYXJpYS12YWx1ZW1pbic6IDAsXG4gICAgICAgICdhcmlhLXZhbHVlbWF4JzogMTAwLFxuICAgICAgICAndGFiSW5kZXgnOiAwXG4gICAgICB9LCBhdHRyaWJ1dGVzKTtcbiAgICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsIHR5cGUsIHByb3BzLCBhdHRyaWJ1dGVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGBtb3VzZWRvd25gIG9yIGB0b3VjaHN0YXJ0YCBldmVudHMgb24gdGhlIGBTbGlkZXJgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgYG1vdXNlZG93bmAgb3IgYHRvdWNoc3RhcnRgIGV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoaXMgZnVuY3Rpb25cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIG1vdXNlZG93blxuICAgICAqIEBsaXN0ZW5zIHRvdWNoc3RhcnRcbiAgICAgKiBAZmlyZXMgU2xpZGVyI3NsaWRlcmFjdGl2ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVNb3VzZURvd24gPSBmdW5jdGlvbiBoYW5kbGVNb3VzZURvd24oZXZlbnQpIHtcbiAgICAgIHZhciBkb2MgPSB0aGlzLmJhci5lbF8ub3duZXJEb2N1bWVudDtcblxuICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdtb3VzZWRvd24nKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9IC8vIERvIG5vdCBjYWxsIHByZXZlbnREZWZhdWx0KCkgb24gdG91Y2hzdGFydCBpbiBDaHJvbWVcbiAgICAgIC8vIHRvIGF2b2lkIGNvbnNvbGUgd2FybmluZ3MuIFVzZSBhICd0b3VjaC1hY3Rpb246IG5vbmUnIHN0eWxlXG4gICAgICAvLyBpbnN0ZWFkIHRvIHByZXZlbnQgdW5pbnRlbnRlZCBzY3JvbGxpbmcuXG4gICAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS93ZWIvdXBkYXRlcy8yMDE3LzAxL3Njcm9sbGluZy1pbnRlcnZlbnRpb25cblxuXG4gICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3RvdWNoc3RhcnQnICYmICFJU19DSFJPTUUpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cblxuICAgICAgYmxvY2tUZXh0U2VsZWN0aW9uKCk7XG4gICAgICB0aGlzLmFkZENsYXNzKCd2anMtc2xpZGluZycpO1xuICAgICAgLyoqXG4gICAgICAgKiBUcmlnZ2VyZWQgd2hlbiB0aGUgc2xpZGVyIGlzIGluIGFuIGFjdGl2ZSBzdGF0ZVxuICAgICAgICpcbiAgICAgICAqIEBldmVudCBTbGlkZXIjc2xpZGVyYWN0aXZlXG4gICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgKi9cblxuICAgICAgdGhpcy50cmlnZ2VyKCdzbGlkZXJhY3RpdmUnKTtcbiAgICAgIHRoaXMub24oZG9jLCAnbW91c2Vtb3ZlJywgdGhpcy5oYW5kbGVNb3VzZU1vdmUpO1xuICAgICAgdGhpcy5vbihkb2MsICdtb3VzZXVwJywgdGhpcy5oYW5kbGVNb3VzZVVwKTtcbiAgICAgIHRoaXMub24oZG9jLCAndG91Y2htb3ZlJywgdGhpcy5oYW5kbGVNb3VzZU1vdmUpO1xuICAgICAgdGhpcy5vbihkb2MsICd0b3VjaGVuZCcsIHRoaXMuaGFuZGxlTW91c2VVcCk7XG4gICAgICB0aGlzLmhhbmRsZU1vdXNlTW92ZShldmVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSB0aGUgYG1vdXNlbW92ZWAsIGB0b3VjaG1vdmVgLCBhbmQgYG1vdXNlZG93bmAgZXZlbnRzIG9uIHRoaXMgYFNsaWRlcmAuXG4gICAgICogVGhlIGBtb3VzZW1vdmVgIGFuZCBgdG91Y2htb3ZlYCBldmVudHMgd2lsbCBvbmx5IG9ubHkgdHJpZ2dlciB0aGlzIGZ1bmN0aW9uIGR1cmluZ1xuICAgICAqIGBtb3VzZWRvd25gIGFuZCBgdG91Y2hzdGFydGAuIFRoaXMgaXMgZHVlIHRvIHtAbGluayBTbGlkZXIjaGFuZGxlTW91c2VEb3dufSBhbmRcbiAgICAgKiB7QGxpbmsgU2xpZGVyI2hhbmRsZU1vdXNlVXB9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgYG1vdXNlZG93bmAsIGBtb3VzZW1vdmVgLCBgdG91Y2hzdGFydGAsIG9yIGB0b3VjaG1vdmVgIGV2ZW50IHRoYXQgdHJpZ2dlcmVkXG4gICAgICogICAgICAgIHRoaXMgZnVuY3Rpb25cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIG1vdXNlbW92ZVxuICAgICAqIEBsaXN0ZW5zIHRvdWNobW92ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVNb3VzZU1vdmUgPSBmdW5jdGlvbiBoYW5kbGVNb3VzZU1vdmUoZXZlbnQpIHt9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGBtb3VzZXVwYCBvciBgdG91Y2hlbmRgIGV2ZW50cyBvbiB0aGUgYFNsaWRlcmAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBgbW91c2V1cGAgb3IgYHRvdWNoZW5kYCBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGlzIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgdG91Y2hlbmRcbiAgICAgKiBAbGlzdGVucyBtb3VzZXVwXG4gICAgICogQGZpcmVzIFNsaWRlciNzbGlkZXJpbmFjdGl2ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVNb3VzZVVwID0gZnVuY3Rpb24gaGFuZGxlTW91c2VVcCgpIHtcbiAgICAgIHZhciBkb2MgPSB0aGlzLmJhci5lbF8ub3duZXJEb2N1bWVudDtcbiAgICAgIHVuYmxvY2tUZXh0U2VsZWN0aW9uKCk7XG4gICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtc2xpZGluZycpO1xuICAgICAgLyoqXG4gICAgICAgKiBUcmlnZ2VyZWQgd2hlbiB0aGUgc2xpZGVyIGlzIG5vIGxvbmdlciBpbiBhbiBhY3RpdmUgc3RhdGUuXG4gICAgICAgKlxuICAgICAgICogQGV2ZW50IFNsaWRlciNzbGlkZXJpbmFjdGl2ZVxuICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICovXG5cbiAgICAgIHRoaXMudHJpZ2dlcignc2xpZGVyaW5hY3RpdmUnKTtcbiAgICAgIHRoaXMub2ZmKGRvYywgJ21vdXNlbW92ZScsIHRoaXMuaGFuZGxlTW91c2VNb3ZlKTtcbiAgICAgIHRoaXMub2ZmKGRvYywgJ21vdXNldXAnLCB0aGlzLmhhbmRsZU1vdXNlVXApO1xuICAgICAgdGhpcy5vZmYoZG9jLCAndG91Y2htb3ZlJywgdGhpcy5oYW5kbGVNb3VzZU1vdmUpO1xuICAgICAgdGhpcy5vZmYoZG9jLCAndG91Y2hlbmQnLCB0aGlzLmhhbmRsZU1vdXNlVXApO1xuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBwcm9ncmVzcyBiYXIgb2YgdGhlIGBTbGlkZXJgLlxuICAgICAqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqICAgICAgICAgIFRoZSBwZXJjZW50YWdlIG9mIHByb2dyZXNzIHRoZSBwcm9ncmVzcyBiYXIgcmVwcmVzZW50cyBhcyBhXG4gICAgICogICAgICAgICAgbnVtYmVyIGZyb20gMCB0byAxLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAvLyBJbiBWb2x1bWVCYXIgaW5pdCB3ZSBoYXZlIGEgc2V0VGltZW91dCBmb3IgdXBkYXRlIHRoYXQgcG9wcyBhbmQgdXBkYXRlXG4gICAgICAvLyB0byB0aGUgZW5kIG9mIHRoZSBleGVjdXRpb24gc3RhY2suIFRoZSBwbGF5ZXIgaXMgZGVzdHJveWVkIGJlZm9yZSB0aGVuXG4gICAgICAvLyB1cGRhdGUgd2lsbCBjYXVzZSBhbiBlcnJvclxuICAgICAgaWYgKCF0aGlzLmVsXykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIElmIHNjcnViYmluZywgd2UgY291bGQgdXNlIGEgY2FjaGVkIHZhbHVlIHRvIG1ha2UgdGhlIGhhbmRsZSBrZWVwIHVwXG4gICAgICAvLyB3aXRoIHRoZSB1c2VyJ3MgbW91c2UuIE9uIEhUTUw1IGJyb3dzZXJzIHNjcnViYmluZyBpcyByZWFsbHkgc21vb3RoLCBidXRcbiAgICAgIC8vIHNvbWUgZmxhc2ggcGxheWVycyBhcmUgc2xvdywgc28gd2UgbWlnaHQgd2FudCB0byB1dGlsaXplIHRoaXMgbGF0ZXIuXG4gICAgICAvLyB2YXIgcHJvZ3Jlc3MgPSAgKHRoaXMucGxheWVyXy5zY3J1YmJpbmcoKSkgPyB0aGlzLnBsYXllcl8uZ2V0Q2FjaGUoKS5jdXJyZW50VGltZSAvIHRoaXMucGxheWVyXy5kdXJhdGlvbigpIDogdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCkgLyB0aGlzLnBsYXllcl8uZHVyYXRpb24oKTtcblxuXG4gICAgICB2YXIgcHJvZ3Jlc3MgPSB0aGlzLmdldFBlcmNlbnQoKTtcbiAgICAgIHZhciBiYXIgPSB0aGlzLmJhcjsgLy8gSWYgdGhlcmUncyBubyBiYXIuLi5cblxuICAgICAgaWYgKCFiYXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBQcm90ZWN0IGFnYWluc3Qgbm8gZHVyYXRpb24gYW5kIG90aGVyIGRpdmlzaW9uIGlzc3Vlc1xuXG5cbiAgICAgIGlmICh0eXBlb2YgcHJvZ3Jlc3MgIT09ICdudW1iZXInIHx8IHByb2dyZXNzICE9PSBwcm9ncmVzcyB8fCBwcm9ncmVzcyA8IDAgfHwgcHJvZ3Jlc3MgPT09IEluZmluaXR5KSB7XG4gICAgICAgIHByb2dyZXNzID0gMDtcbiAgICAgIH0gLy8gQ29udmVydCB0byBhIHBlcmNlbnRhZ2UgZm9yIHNldHRpbmdcblxuXG4gICAgICB2YXIgcGVyY2VudGFnZSA9IChwcm9ncmVzcyAqIDEwMCkudG9GaXhlZCgyKSArICclJztcbiAgICAgIHZhciBzdHlsZSA9IGJhci5lbCgpLnN0eWxlOyAvLyBTZXQgdGhlIG5ldyBiYXIgd2lkdGggb3IgaGVpZ2h0XG5cbiAgICAgIGlmICh0aGlzLnZlcnRpY2FsKCkpIHtcbiAgICAgICAgc3R5bGUuaGVpZ2h0ID0gcGVyY2VudGFnZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlLndpZHRoID0gcGVyY2VudGFnZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByb2dyZXNzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgZGlzdGFuY2UgZm9yIHNsaWRlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgVGhlIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gcnVuLlxuICAgICAqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqICAgICAgICAgVGhlIGN1cnJlbnQgcG9zaXRpb24gb2YgdGhlIFNsaWRlci5cbiAgICAgKiAgICAgICAgIC0gcG9zaXRpb24ueCBmb3IgdmVydGljYWwgYFNsaWRlcmBzXG4gICAgICogICAgICAgICAtIHBvc2l0aW9uLnkgZm9yIGhvcml6b250YWwgYFNsaWRlcmBzXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNhbGN1bGF0ZURpc3RhbmNlID0gZnVuY3Rpb24gY2FsY3VsYXRlRGlzdGFuY2UoZXZlbnQpIHtcbiAgICAgIHZhciBwb3NpdGlvbiA9IGdldFBvaW50ZXJQb3NpdGlvbih0aGlzLmVsXywgZXZlbnQpO1xuXG4gICAgICBpZiAodGhpcy52ZXJ0aWNhbCgpKSB7XG4gICAgICAgIHJldHVybiBwb3NpdGlvbi55O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcG9zaXRpb24ueDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGEgYGZvY3VzYCBldmVudCBvbiB0aGlzIGBTbGlkZXJgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgVGhlIGBmb2N1c2AgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBydW4uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBmb2N1c1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVGb2N1cyA9IGZ1bmN0aW9uIGhhbmRsZUZvY3VzKCkge1xuICAgICAgdGhpcy5vbih0aGlzLmJhci5lbF8ub3duZXJEb2N1bWVudCwgJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleVByZXNzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGEgYGtleWRvd25gIGV2ZW50IG9uIHRoZSBgU2xpZGVyYC4gV2F0Y2hlcyBmb3IgbGVmdCwgcmlndGgsIHVwLCBhbmQgZG93blxuICAgICAqIGFycm93IGtleXMuIFRoaXMgZnVuY3Rpb24gd2lsbCBvbmx5IGJlIGNhbGxlZCB3aGVuIHRoZSBzbGlkZXIgaGFzIGZvY3VzLiBTZWVcbiAgICAgKiB7QGxpbmsgU2xpZGVyI2hhbmRsZUZvY3VzfSBhbmQge0BsaW5rIFNsaWRlciNoYW5kbGVCbHVyfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIHRoZSBga2V5ZG93bmAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBydW4uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBrZXlkb3duXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZUtleVByZXNzID0gZnVuY3Rpb24gaGFuZGxlS2V5UHJlc3MoZXZlbnQpIHtcbiAgICAgIC8vIExlZnQgYW5kIERvd24gQXJyb3dzXG4gICAgICBpZiAoa2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnTGVmdCcpIHx8IGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ0Rvd24nKSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnN0ZXBCYWNrKCk7IC8vIFVwIGFuZCBSaWdodCBBcnJvd3NcbiAgICAgIH0gZWxzZSBpZiAoa2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnUmlnaHQnKSB8fCBrZXljb2RlLmlzRXZlbnRLZXkoZXZlbnQsICdVcCcpKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuc3RlcEZvcndhcmQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFBhc3Mga2V5cHJlc3MgaGFuZGxpbmcgdXAgZm9yIHVuc3VwcG9ydGVkIGtleXNcbiAgICAgICAgX0NvbXBvbmVudC5wcm90b3R5cGUuaGFuZGxlS2V5UHJlc3MuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBhIGBibHVyYCBldmVudCBvbiB0aGlzIGBTbGlkZXJgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgVGhlIGBibHVyYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIHJ1bi5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIGJsdXJcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlQmx1ciA9IGZ1bmN0aW9uIGhhbmRsZUJsdXIoKSB7XG4gICAgICB0aGlzLm9mZih0aGlzLmJhci5lbF8ub3duZXJEb2N1bWVudCwgJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleVByZXNzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGlzdGVuZXIgZm9yIGNsaWNrIGV2ZW50cyBvbiBzbGlkZXIsIHVzZWQgdG8gcHJldmVudCBjbGlja3NcbiAgICAgKiAgIGZyb20gYnViYmxpbmcgdXAgdG8gcGFyZW50IGVsZW1lbnRzIGxpa2UgYnV0dG9uIG1lbnVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG4gICAgICogICAgICAgIEV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgb2JqZWN0IHRvIHJ1blxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XG4gICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgaWYgc2xpZGVyIGlzIGhvcml6b250YWwgZm9yIHZlcnRpY2FsXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtib29sXVxuICAgICAqICAgICAgICAtIHRydWUgaWYgc2xpZGVyIGlzIHZlcnRpY2FsLFxuICAgICAqICAgICAgICAtIGZhbHNlIGlzIGhvcml6b250YWxcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICogICAgICAgICAtIHRydWUgaWYgc2xpZGVyIGlzIHZlcnRpY2FsLCBhbmQgZ2V0dGluZ1xuICAgICAqICAgICAgICAgLSBmYWxzZSBpZiB0aGUgc2xpZGVyIGlzIGhvcml6b250YWwsIGFuZCBnZXR0aW5nXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnZlcnRpY2FsID0gZnVuY3Rpb24gdmVydGljYWwoYm9vbCkge1xuICAgICAgaWYgKGJvb2wgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJ0aWNhbF8gfHwgZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHRoaXMudmVydGljYWxfID0gISFib29sO1xuXG4gICAgICBpZiAodGhpcy52ZXJ0aWNhbF8pIHtcbiAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLXNsaWRlci12ZXJ0aWNhbCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLXNsaWRlci1ob3Jpem9udGFsJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBTbGlkZXI7XG4gIH0oQ29tcG9uZW50KTtcblxuICBDb21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ1NsaWRlcicsIFNsaWRlcik7XG5cbiAgLyoqXG4gICAqIFNob3dzIGxvYWRpbmcgcHJvZ3Jlc3NcbiAgICpcbiAgICogQGV4dGVuZHMgQ29tcG9uZW50XG4gICAqL1xuXG4gIHZhciBMb2FkUHJvZ3Jlc3NCYXIgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoTG9hZFByb2dyZXNzQmFyLCBfQ29tcG9uZW50KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICAgKiAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTG9hZFByb2dyZXNzQmFyKHBsYXllciwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICBfdGhpcyA9IF9Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICBfdGhpcy5wYXJ0RWxzXyA9IFtdO1xuXG4gICAgICBfdGhpcy5vbihwbGF5ZXIsICdwcm9ncmVzcycsIF90aGlzLnVwZGF0ZSk7XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBgQ29tcG9uZW50YCdzIERPTSBlbGVtZW50XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90byA9IExvYWRQcm9ncmVzc0Jhci5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSgpIHtcbiAgICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ3Zqcy1sb2FkLXByb2dyZXNzJyxcbiAgICAgICAgaW5uZXJIVE1MOiBcIjxzcGFuIGNsYXNzPVxcXCJ2anMtY29udHJvbC10ZXh0XFxcIj48c3Bhbj5cIiArIHRoaXMubG9jYWxpemUoJ0xvYWRlZCcpICsgXCI8L3NwYW4+OiA8c3BhbiBjbGFzcz1cXFwidmpzLWNvbnRyb2wtdGV4dC1sb2FkZWQtcGVyY2VudGFnZVxcXCI+MCU8L3NwYW4+PC9zcGFuPlwiXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgdGhpcy5wYXJ0RWxzXyA9IG51bGw7XG5cbiAgICAgIF9Db21wb25lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHByb2dyZXNzIGJhclxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgICAqICAgICAgICBUaGUgYHByb2dyZXNzYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIHJ1bi5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIFBsYXllciNwcm9ncmVzc1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZXZlbnQpIHtcbiAgICAgIHZhciBsaXZlVHJhY2tlciA9IHRoaXMucGxheWVyXy5saXZlVHJhY2tlcjtcbiAgICAgIHZhciBidWZmZXJlZCA9IHRoaXMucGxheWVyXy5idWZmZXJlZCgpO1xuICAgICAgdmFyIGR1cmF0aW9uID0gbGl2ZVRyYWNrZXIgJiYgbGl2ZVRyYWNrZXIuaXNMaXZlKCkgPyBsaXZlVHJhY2tlci5zZWVrYWJsZUVuZCgpIDogdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCk7XG4gICAgICB2YXIgYnVmZmVyZWRFbmQgPSB0aGlzLnBsYXllcl8uYnVmZmVyZWRFbmQoKTtcbiAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMucGFydEVsc187XG4gICAgICB2YXIgY29udHJvbFRleHRQZXJjZW50YWdlID0gdGhpcy4kKCcudmpzLWNvbnRyb2wtdGV4dC1sb2FkZWQtcGVyY2VudGFnZScpOyAvLyBnZXQgdGhlIHBlcmNlbnQgd2lkdGggb2YgYSB0aW1lIGNvbXBhcmVkIHRvIHRoZSB0b3RhbCBlbmRcblxuICAgICAgdmFyIHBlcmNlbnRpZnkgPSBmdW5jdGlvbiBwZXJjZW50aWZ5KHRpbWUsIGVuZCwgcm91bmRlZCkge1xuICAgICAgICAvLyBubyBOYU5cbiAgICAgICAgdmFyIHBlcmNlbnQgPSB0aW1lIC8gZW5kIHx8IDA7XG4gICAgICAgIHBlcmNlbnQgPSAocGVyY2VudCA+PSAxID8gMSA6IHBlcmNlbnQpICogMTAwO1xuXG4gICAgICAgIGlmIChyb3VuZGVkKSB7XG4gICAgICAgICAgcGVyY2VudCA9IHBlcmNlbnQudG9GaXhlZCgyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwZXJjZW50ICsgJyUnO1xuICAgICAgfTsgLy8gdXBkYXRlIHRoZSB3aWR0aCBvZiB0aGUgcHJvZ3Jlc3MgYmFyXG5cblxuICAgICAgdGhpcy5lbF8uc3R5bGUud2lkdGggPSBwZXJjZW50aWZ5KGJ1ZmZlcmVkRW5kLCBkdXJhdGlvbik7IC8vIHVwZGF0ZSB0aGUgY29udHJvbC10ZXh0XG5cbiAgICAgIHRleHRDb250ZW50KGNvbnRyb2xUZXh0UGVyY2VudGFnZSwgcGVyY2VudGlmeShidWZmZXJlZEVuZCwgZHVyYXRpb24sIHRydWUpKTsgLy8gYWRkIGNoaWxkIGVsZW1lbnRzIHRvIHJlcHJlc2VudCB0aGUgaW5kaXZpZHVhbCBidWZmZXJlZCB0aW1lIHJhbmdlc1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1ZmZlcmVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzdGFydCA9IGJ1ZmZlcmVkLnN0YXJ0KGkpO1xuICAgICAgICB2YXIgZW5kID0gYnVmZmVyZWQuZW5kKGkpO1xuICAgICAgICB2YXIgcGFydCA9IGNoaWxkcmVuW2ldO1xuXG4gICAgICAgIGlmICghcGFydCkge1xuICAgICAgICAgIHBhcnQgPSB0aGlzLmVsXy5hcHBlbmRDaGlsZChjcmVhdGVFbCgpKTtcbiAgICAgICAgICBjaGlsZHJlbltpXSA9IHBhcnQ7XG4gICAgICAgIH0gLy8gc2V0IHRoZSBwZXJjZW50IGJhc2VkIG9uIHRoZSB3aWR0aCBvZiB0aGUgcHJvZ3Jlc3MgYmFyIChidWZmZXJlZEVuZClcblxuXG4gICAgICAgIHBhcnQuc3R5bGUubGVmdCA9IHBlcmNlbnRpZnkoc3RhcnQsIGJ1ZmZlcmVkRW5kKTtcbiAgICAgICAgcGFydC5zdHlsZS53aWR0aCA9IHBlcmNlbnRpZnkoZW5kIC0gc3RhcnQsIGJ1ZmZlcmVkRW5kKTtcbiAgICAgIH0gLy8gcmVtb3ZlIHVudXNlZCBidWZmZXJlZCByYW5nZSBlbGVtZW50c1xuXG5cbiAgICAgIGZvciAodmFyIF9pID0gY2hpbGRyZW4ubGVuZ3RoOyBfaSA+IGJ1ZmZlcmVkLmxlbmd0aDsgX2ktLSkge1xuICAgICAgICB0aGlzLmVsXy5yZW1vdmVDaGlsZChjaGlsZHJlbltfaSAtIDFdKTtcbiAgICAgIH1cblxuICAgICAgY2hpbGRyZW4ubGVuZ3RoID0gYnVmZmVyZWQubGVuZ3RoO1xuICAgIH07XG5cbiAgICByZXR1cm4gTG9hZFByb2dyZXNzQmFyO1xuICB9KENvbXBvbmVudCk7XG5cbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdMb2FkUHJvZ3Jlc3NCYXInLCBMb2FkUHJvZ3Jlc3NCYXIpO1xuXG4gIC8qKlxuICAgKiBUaW1lIHRvb2x0aXBzIGRpc3BsYXkgYSB0aW1lIGFib3ZlIHRoZSBwcm9ncmVzcyBiYXIuXG4gICAqXG4gICAqIEBleHRlbmRzIENvbXBvbmVudFxuICAgKi9cblxuICB2YXIgVGltZVRvb2x0aXAgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoVGltZVRvb2x0aXAsIF9Db21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gVGltZVRvb2x0aXAoKSB7XG4gICAgICByZXR1cm4gX0NvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90byA9IFRpbWVUb29sdGlwLnByb3RvdHlwZTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgdGltZSB0b29sdGlwIERPTSBlbGVtZW50XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSgpIHtcbiAgICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ3Zqcy10aW1lLXRvb2x0aXAnXG4gICAgICB9LCB7XG4gICAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSB0aW1lIHRvb2x0aXAgcmVsYXRpdmUgdG8gdGhlIGBTZWVrQmFyYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzZWVrQmFyUmVjdFxuICAgICAqICAgICAgICBUaGUgYENsaWVudFJlY3RgIGZvciB0aGUge0BsaW5rIFNlZWtCYXJ9IGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2Vla0JhclBvaW50XG4gICAgICogICAgICAgIEEgbnVtYmVyIGZyb20gMCB0byAxLCByZXByZXNlbnRpbmcgYSBob3Jpem9udGFsIHJlZmVyZW5jZSBwb2ludFxuICAgICAqICAgICAgICBmcm9tIHRoZSBsZWZ0IGVkZ2Ugb2YgdGhlIHtAbGluayBTZWVrQmFyfVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoc2Vla0JhclJlY3QsIHNlZWtCYXJQb2ludCwgY29udGVudCkge1xuICAgICAgdmFyIHRvb2x0aXBSZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KHRoaXMuZWxfKTtcbiAgICAgIHZhciBwbGF5ZXJSZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KHRoaXMucGxheWVyXy5lbCgpKTtcbiAgICAgIHZhciBzZWVrQmFyUG9pbnRQeCA9IHNlZWtCYXJSZWN0LndpZHRoICogc2Vla0JhclBvaW50OyAvLyBkbyBub3RoaW5nIGlmIGVpdGhlciByZWN0IGlzbid0IGF2YWlsYWJsZVxuICAgICAgLy8gZm9yIGV4YW1wbGUsIGlmIHRoZSBwbGF5ZXIgaXNuJ3QgaW4gdGhlIERPTSBmb3IgdGVzdGluZ1xuXG4gICAgICBpZiAoIXBsYXllclJlY3QgfHwgIXRvb2x0aXBSZWN0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gVGhpcyBpcyB0aGUgc3BhY2UgbGVmdCBvZiB0aGUgYHNlZWtCYXJQb2ludGAgYXZhaWxhYmxlIHdpdGhpbiB0aGUgYm91bmRzXG4gICAgICAvLyBvZiB0aGUgcGxheWVyLiBXZSBjYWxjdWxhdGUgYW55IGdhcCBiZXR3ZWVuIHRoZSBsZWZ0IGVkZ2Ugb2YgdGhlIHBsYXllclxuICAgICAgLy8gYW5kIHRoZSBsZWZ0IGVkZ2Ugb2YgdGhlIGBTZWVrQmFyYCBhbmQgYWRkIHRoZSBudW1iZXIgb2YgcGl4ZWxzIGluIHRoZVxuICAgICAgLy8gYFNlZWtCYXJgIGJlZm9yZSBoaXR0aW5nIHRoZSBgc2Vla0JhclBvaW50YFxuXG5cbiAgICAgIHZhciBzcGFjZUxlZnRPZlBvaW50ID0gc2Vla0JhclJlY3QubGVmdCAtIHBsYXllclJlY3QubGVmdCArIHNlZWtCYXJQb2ludFB4OyAvLyBUaGlzIGlzIHRoZSBzcGFjZSByaWdodCBvZiB0aGUgYHNlZWtCYXJQb2ludGAgYXZhaWxhYmxlIHdpdGhpbiB0aGUgYm91bmRzXG4gICAgICAvLyBvZiB0aGUgcGxheWVyLiBXZSBjYWxjdWxhdGUgdGhlIG51bWJlciBvZiBwaXhlbHMgZnJvbSB0aGUgYHNlZWtCYXJQb2ludGBcbiAgICAgIC8vIHRvIHRoZSByaWdodCBlZGdlIG9mIHRoZSBgU2Vla0JhcmAgYW5kIGFkZCB0byB0aGF0IGFueSBnYXAgYmV0d2VlbiB0aGVcbiAgICAgIC8vIHJpZ2h0IGVkZ2Ugb2YgdGhlIGBTZWVrQmFyYCBhbmQgdGhlIHBsYXllci5cblxuICAgICAgdmFyIHNwYWNlUmlnaHRPZlBvaW50ID0gc2Vla0JhclJlY3Qud2lkdGggLSBzZWVrQmFyUG9pbnRQeCArIChwbGF5ZXJSZWN0LnJpZ2h0IC0gc2Vla0JhclJlY3QucmlnaHQpOyAvLyBUaGlzIGlzIHRoZSBudW1iZXIgb2YgcGl4ZWxzIGJ5IHdoaWNoIHRoZSB0b29sdGlwIHdpbGwgbmVlZCB0byBiZSBwdWxsZWRcbiAgICAgIC8vIGZ1cnRoZXIgdG8gdGhlIHJpZ2h0IHRvIGNlbnRlciBpdCBvdmVyIHRoZSBgc2Vla0JhclBvaW50YC5cblxuICAgICAgdmFyIHB1bGxUb29sdGlwQnkgPSB0b29sdGlwUmVjdC53aWR0aCAvIDI7IC8vIEFkanVzdCB0aGUgYHB1bGxUb29sdGlwQnlgIGRpc3RhbmNlIHRvIHRoZSBsZWZ0IG9yIHJpZ2h0IGRlcGVuZGluZyBvblxuICAgICAgLy8gdGhlIHJlc3VsdHMgb2YgdGhlIHNwYWNlIGNhbGN1bGF0aW9ucyBhYm92ZS5cblxuICAgICAgaWYgKHNwYWNlTGVmdE9mUG9pbnQgPCBwdWxsVG9vbHRpcEJ5KSB7XG4gICAgICAgIHB1bGxUb29sdGlwQnkgKz0gcHVsbFRvb2x0aXBCeSAtIHNwYWNlTGVmdE9mUG9pbnQ7XG4gICAgICB9IGVsc2UgaWYgKHNwYWNlUmlnaHRPZlBvaW50IDwgcHVsbFRvb2x0aXBCeSkge1xuICAgICAgICBwdWxsVG9vbHRpcEJ5ID0gc3BhY2VSaWdodE9mUG9pbnQ7XG4gICAgICB9IC8vIER1ZSB0byB0aGUgaW1wcmVjaXNpb24gb2YgZGVjaW1hbC9yYXRpbyBiYXNlZCBjYWxjdWxhdGlvbnMgYW5kIHZhcnlpbmdcbiAgICAgIC8vIHJvdW5kaW5nIGJlaGF2aW9ycywgdGhlcmUgYXJlIGNhc2VzIHdoZXJlIHRoZSBzcGFjaW5nIGFkanVzdG1lbnQgaXMgb2ZmXG4gICAgICAvLyBieSBhIHBpeGVsIG9yIHR3by4gVGhpcyBhZGRzIGluc3VyYW5jZSB0byB0aGVzZSBjYWxjdWxhdGlvbnMuXG5cblxuICAgICAgaWYgKHB1bGxUb29sdGlwQnkgPCAwKSB7XG4gICAgICAgIHB1bGxUb29sdGlwQnkgPSAwO1xuICAgICAgfSBlbHNlIGlmIChwdWxsVG9vbHRpcEJ5ID4gdG9vbHRpcFJlY3Qud2lkdGgpIHtcbiAgICAgICAgcHVsbFRvb2x0aXBCeSA9IHRvb2x0aXBSZWN0LndpZHRoO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmVsXy5zdHlsZS5yaWdodCA9IFwiLVwiICsgcHVsbFRvb2x0aXBCeSArIFwicHhcIjtcbiAgICAgIHRleHRDb250ZW50KHRoaXMuZWxfLCBjb250ZW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgcG9zaXRpb24gb2YgdGhlIHRpbWUgdG9vbHRpcCByZWxhdGl2ZSB0byB0aGUgYFNlZWtCYXJgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNlZWtCYXJSZWN0XG4gICAgICogICAgICAgIFRoZSBgQ2xpZW50UmVjdGAgZm9yIHRoZSB7QGxpbmsgU2Vla0Jhcn0gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzZWVrQmFyUG9pbnRcbiAgICAgKiAgICAgICAgQSBudW1iZXIgZnJvbSAwIHRvIDEsIHJlcHJlc2VudGluZyBhIGhvcml6b250YWwgcmVmZXJlbmNlIHBvaW50XG4gICAgICogICAgICAgIGZyb20gdGhlIGxlZnQgZWRnZSBvZiB0aGUge0BsaW5rIFNlZWtCYXJ9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGltZVxuICAgICAqICAgICAgICBUaGUgdGltZSB0byB1cGRhdGUgdGhlIHRvb2x0aXAgdG8sIG5vdCB1c2VkIGR1cmluZyBsaXZlIHBsYXliYWNrXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgICAqICAgICAgICBBIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgZHVyaW5nIHRoZSByZXF1ZXN0IGFuaW1hdGlvbiBmcmFtZVxuICAgICAqICAgICAgICBmb3IgdG9vbHRpcHMgdGhhdCBuZWVkIHRvIGRvIGFkZGl0aW9uYWwgYW5pbWF0aW9ucyBmcm9tIHRoZSBkZWZhdWx0XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnVwZGF0ZVRpbWUgPSBmdW5jdGlvbiB1cGRhdGVUaW1lKHNlZWtCYXJSZWN0LCBzZWVrQmFyUG9pbnQsIHRpbWUsIGNiKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGVyZSBpcyBhbiBleGlzdGluZyByQUYgSUQsIGNhbmNlbCBpdCBzbyB3ZSBkb24ndCBvdmVyLXF1ZXVlLlxuICAgICAgaWYgKHRoaXMucmFmSWRfKSB7XG4gICAgICAgIHRoaXMuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5yYWZJZF8pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJhZklkXyA9IHRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbnRlbnQ7XG5cbiAgICAgICAgdmFyIGR1cmF0aW9uID0gX3RoaXMucGxheWVyXy5kdXJhdGlvbigpO1xuXG4gICAgICAgIGlmIChfdGhpcy5wbGF5ZXJfLmxpdmVUcmFja2VyICYmIF90aGlzLnBsYXllcl8ubGl2ZVRyYWNrZXIuaXNMaXZlKCkpIHtcbiAgICAgICAgICB2YXIgbGl2ZVdpbmRvdyA9IF90aGlzLnBsYXllcl8ubGl2ZVRyYWNrZXIubGl2ZVdpbmRvdygpO1xuXG4gICAgICAgICAgdmFyIHNlY29uZHNCZWhpbmQgPSBsaXZlV2luZG93IC0gc2Vla0JhclBvaW50ICogbGl2ZVdpbmRvdztcbiAgICAgICAgICBjb250ZW50ID0gKHNlY29uZHNCZWhpbmQgPCAxID8gJycgOiAnLScpICsgZm9ybWF0VGltZShzZWNvbmRzQmVoaW5kLCBsaXZlV2luZG93KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb250ZW50ID0gZm9ybWF0VGltZSh0aW1lLCBkdXJhdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpcy51cGRhdGUoc2Vla0JhclJlY3QsIHNlZWtCYXJQb2ludCwgY29udGVudCk7XG5cbiAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBUaW1lVG9vbHRpcDtcbiAgfShDb21wb25lbnQpO1xuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnVGltZVRvb2x0aXAnLCBUaW1lVG9vbHRpcCk7XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkge0BsaW5rIFNlZWtCYXJ9IHRvIGRpc3BsYXkgbWVkaWEgcGxheWJhY2sgcHJvZ3Jlc3MgYXMgcGFydCBvZiB0aGVcbiAgICoge0BsaW5rIFByb2dyZXNzQ29udHJvbH0uXG4gICAqXG4gICAqIEBleHRlbmRzIENvbXBvbmVudFxuICAgKi9cblxuICB2YXIgUGxheVByb2dyZXNzQmFyID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAgIF9pbmhlcml0c0xvb3NlKFBsYXlQcm9ncmVzc0JhciwgX0NvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBQbGF5UHJvZ3Jlc3NCYXIoKSB7XG4gICAgICByZXR1cm4gX0NvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90byA9IFBsYXlQcm9ncmVzc0Jhci5wcm90b3R5cGU7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIHRoZSBET00gZWxlbWVudCBmb3IgdGhpcyBjbGFzcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsKCkge1xuICAgICAgcmV0dXJuIF9Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAndmpzLXBsYXktcHJvZ3Jlc3MgdmpzLXNsaWRlci1iYXInXG4gICAgICB9LCB7XG4gICAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVucXVldWVzIHVwZGF0ZXMgdG8gaXRzIG93biBET00gYXMgd2VsbCBhcyB0aGUgRE9NIG9mIGl0c1xuICAgICAqIHtAbGluayBUaW1lVG9vbHRpcH0gY2hpbGQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc2Vla0JhclJlY3RcbiAgICAgKiAgICAgICAgVGhlIGBDbGllbnRSZWN0YCBmb3IgdGhlIHtAbGluayBTZWVrQmFyfSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNlZWtCYXJQb2ludFxuICAgICAqICAgICAgICBBIG51bWJlciBmcm9tIDAgdG8gMSwgcmVwcmVzZW50aW5nIGEgaG9yaXpvbnRhbCByZWZlcmVuY2UgcG9pbnRcbiAgICAgKiAgICAgICAgZnJvbSB0aGUgbGVmdCBlZGdlIG9mIHRoZSB7QGxpbmsgU2Vla0Jhcn1cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKHNlZWtCYXJSZWN0LCBzZWVrQmFyUG9pbnQpIHtcbiAgICAgIHZhciB0aW1lVG9vbHRpcCA9IHRoaXMuZ2V0Q2hpbGQoJ3RpbWVUb29sdGlwJyk7XG5cbiAgICAgIGlmICghdGltZVRvb2x0aXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgdGltZSA9IHRoaXMucGxheWVyXy5zY3J1YmJpbmcoKSA/IHRoaXMucGxheWVyXy5nZXRDYWNoZSgpLmN1cnJlbnRUaW1lIDogdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCk7XG4gICAgICB0aW1lVG9vbHRpcC51cGRhdGVUaW1lKHNlZWtCYXJSZWN0LCBzZWVrQmFyUG9pbnQsIHRpbWUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gUGxheVByb2dyZXNzQmFyO1xuICB9KENvbXBvbmVudCk7XG4gIC8qKlxuICAgKiBEZWZhdWx0IG9wdGlvbnMgZm9yIHtAbGluayBQbGF5UHJvZ3Jlc3NCYXJ9LlxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIFBsYXlQcm9ncmVzc0Jhci5wcm90b3R5cGUub3B0aW9uc18gPSB7XG4gICAgY2hpbGRyZW46IFtdXG4gIH07IC8vIFRpbWUgdG9vbHRpcHMgc2hvdWxkIG5vdCBiZSBhZGRlZCB0byBhIHBsYXllciBvbiBtb2JpbGUgZGV2aWNlc1xuXG4gIGlmICghSVNfSU9TICYmICFJU19BTkRST0lEKSB7XG4gICAgUGxheVByb2dyZXNzQmFyLnByb3RvdHlwZS5vcHRpb25zXy5jaGlsZHJlbi5wdXNoKCd0aW1lVG9vbHRpcCcpO1xuICB9XG5cbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdQbGF5UHJvZ3Jlc3NCYXInLCBQbGF5UHJvZ3Jlc3NCYXIpO1xuXG4gIC8qKlxuICAgKiBUaGUge0BsaW5rIE1vdXNlVGltZURpc3BsYXl9IGNvbXBvbmVudCB0cmFja3MgbW91c2UgbW92ZW1lbnQgb3ZlciB0aGVcbiAgICoge0BsaW5rIFByb2dyZXNzQ29udHJvbH0uIEl0IGRpc3BsYXlzIGFuIGluZGljYXRvciBhbmQgYSB7QGxpbmsgVGltZVRvb2x0aXB9XG4gICAqIGluZGljYXRpbmcgdGhlIHRpbWUgd2hpY2ggaXMgcmVwcmVzZW50ZWQgYnkgYSBnaXZlbiBwb2ludCBpbiB0aGVcbiAgICoge0BsaW5rIFByb2dyZXNzQ29udHJvbH0uXG4gICAqXG4gICAqIEBleHRlbmRzIENvbXBvbmVudFxuICAgKi9cblxuICB2YXIgTW91c2VUaW1lRGlzcGxheSA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHNMb29zZShNb3VzZVRpbWVEaXNwbGF5LCBfQ29tcG9uZW50KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICAgKiAgICAgICAgVGhlIHtAbGluayBQbGF5ZXJ9IHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTW91c2VUaW1lRGlzcGxheShwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgX3RoaXMgPSBfQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgICAgX3RoaXMudXBkYXRlID0gdGhyb3R0bGUoYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMudXBkYXRlKSwgMjUpO1xuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIERPTSBlbGVtZW50IGZvciB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBNb3VzZVRpbWVEaXNwbGF5LnByb3RvdHlwZTtcblxuICAgIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsKCkge1xuICAgICAgcmV0dXJuIF9Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAndmpzLW1vdXNlLWRpc3BsYXknXG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5xdWV1ZXMgdXBkYXRlcyB0byBpdHMgb3duIERPTSBhcyB3ZWxsIGFzIHRoZSBET00gb2YgaXRzXG4gICAgICoge0BsaW5rIFRpbWVUb29sdGlwfSBjaGlsZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzZWVrQmFyUmVjdFxuICAgICAqICAgICAgICBUaGUgYENsaWVudFJlY3RgIGZvciB0aGUge0BsaW5rIFNlZWtCYXJ9IGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2Vla0JhclBvaW50XG4gICAgICogICAgICAgIEEgbnVtYmVyIGZyb20gMCB0byAxLCByZXByZXNlbnRpbmcgYSBob3Jpem9udGFsIHJlZmVyZW5jZSBwb2ludFxuICAgICAqICAgICAgICBmcm9tIHRoZSBsZWZ0IGVkZ2Ugb2YgdGhlIHtAbGluayBTZWVrQmFyfVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoc2Vla0JhclJlY3QsIHNlZWtCYXJQb2ludCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciB0aW1lID0gc2Vla0JhclBvaW50ICogdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCk7XG4gICAgICB0aGlzLmdldENoaWxkKCd0aW1lVG9vbHRpcCcpLnVwZGF0ZVRpbWUoc2Vla0JhclJlY3QsIHNlZWtCYXJQb2ludCwgdGltZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIuZWxfLnN0eWxlLmxlZnQgPSBzZWVrQmFyUmVjdC53aWR0aCAqIHNlZWtCYXJQb2ludCArIFwicHhcIjtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gTW91c2VUaW1lRGlzcGxheTtcbiAgfShDb21wb25lbnQpO1xuICAvKipcbiAgICogRGVmYXVsdCBvcHRpb25zIGZvciBgTW91c2VUaW1lRGlzcGxheWBcbiAgICpcbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICBNb3VzZVRpbWVEaXNwbGF5LnByb3RvdHlwZS5vcHRpb25zXyA9IHtcbiAgICBjaGlsZHJlbjogWyd0aW1lVG9vbHRpcCddXG4gIH07XG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnTW91c2VUaW1lRGlzcGxheScsIE1vdXNlVGltZURpc3BsYXkpO1xuXG4gIHZhciBTVEVQX1NFQ09ORFMgPSA1OyAvLyBUaGUgbXVsdGlwbGllciBvZiBTVEVQX1NFQ09ORFMgdGhhdCBQZ1VwL1BnRG93biBtb3ZlIHRoZSB0aW1lbGluZS5cblxuICB2YXIgUEFHRV9LRVlfTVVMVElQTElFUiA9IDEyOyAvLyBUaGUgaW50ZXJ2YWwgYXQgd2hpY2ggdGhlIGJhciBzaG91bGQgdXBkYXRlIGFzIGl0IHByb2dyZXNzZXMuXG5cbiAgdmFyIFVQREFURV9SRUZSRVNIX0lOVEVSVkFMID0gMzA7XG4gIC8qKlxuICAgKiBTZWVrIGJhciBhbmQgY29udGFpbmVyIGZvciB0aGUgcHJvZ3Jlc3MgYmFycy4gVXNlcyB7QGxpbmsgUGxheVByb2dyZXNzQmFyfVxuICAgKiBhcyBpdHMgYGJhcmAuXG4gICAqXG4gICAqIEBleHRlbmRzIFNsaWRlclxuICAgKi9cblxuICB2YXIgU2Vla0JhciA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9TbGlkZXIpIHtcbiAgICBfaW5oZXJpdHNMb29zZShTZWVrQmFyLCBfU2xpZGVyKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICAgKiAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gU2Vla0JhcihwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgX3RoaXMgPSBfU2xpZGVyLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuXG4gICAgICBfdGhpcy5zZXRFdmVudEhhbmRsZXJzXygpO1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGV2ZW50IGhhbmRsZXJzXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG5cbiAgICB2YXIgX3Byb3RvID0gU2Vla0Jhci5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uc2V0RXZlbnRIYW5kbGVyc18gPSBmdW5jdGlvbiBzZXRFdmVudEhhbmRsZXJzXygpIHtcbiAgICAgIHRoaXMudXBkYXRlID0gdGhyb3R0bGUoYmluZCh0aGlzLCB0aGlzLnVwZGF0ZSksIFVQREFURV9SRUZSRVNIX0lOVEVSVkFMKTtcbiAgICAgIHRoaXMub24odGhpcy5wbGF5ZXJfLCAndGltZXVwZGF0ZScsIHRoaXMudXBkYXRlKTtcbiAgICAgIHRoaXMub24odGhpcy5wbGF5ZXJfLCAnZW5kZWQnLCB0aGlzLmhhbmRsZUVuZGVkKTtcbiAgICAgIHRoaXMub24odGhpcy5wbGF5ZXJfLCAnZHVyYXRpb25jaGFuZ2UnLCB0aGlzLnVwZGF0ZSk7XG5cbiAgICAgIGlmICh0aGlzLnBsYXllcl8ubGl2ZVRyYWNrZXIpIHtcbiAgICAgICAgdGhpcy5vbih0aGlzLnBsYXllcl8ubGl2ZVRyYWNrZXIsICdsaXZlZWRnZWNoYW5nZScsIHRoaXMudXBkYXRlKTtcbiAgICAgIH0gLy8gd2hlbiBwbGF5aW5nLCBsZXQncyBlbnN1cmUgd2Ugc21vb3RobHkgdXBkYXRlIHRoZSBwbGF5IHByb2dyZXNzIGJhclxuICAgICAgLy8gdmlhIGFuIGludGVydmFsXG5cblxuICAgICAgdGhpcy51cGRhdGVJbnRlcnZhbCA9IG51bGw7XG4gICAgICB0aGlzLm9uKHRoaXMucGxheWVyXywgWydwbGF5aW5nJ10sIHRoaXMuZW5hYmxlSW50ZXJ2YWxfKTtcbiAgICAgIHRoaXMub24odGhpcy5wbGF5ZXJfLCBbJ2VuZGVkJywgJ3BhdXNlJywgJ3dhaXRpbmcnXSwgdGhpcy5kaXNhYmxlSW50ZXJ2YWxfKTsgLy8gd2UgZG9uJ3QgbmVlZCB0byB1cGRhdGUgdGhlIHBsYXkgcHJvZ3Jlc3MgaWYgdGhlIGRvY3VtZW50IGlzIGhpZGRlbixcbiAgICAgIC8vIGFsc28sIHRoaXMgY2F1c2VzIHRoZSBDUFUgdG8gc3Bpa2UgYW5kIGV2ZW50dWFsbHkgY3Jhc2ggdGhlIHBhZ2Ugb24gSUUxMS5cblxuICAgICAgaWYgKCdoaWRkZW4nIGluIGRvY3VtZW50ICYmICd2aXNpYmlsaXR5U3RhdGUnIGluIGRvY3VtZW50KSB7XG4gICAgICAgIHRoaXMub24oZG9jdW1lbnQsICd2aXNpYmlsaXR5Y2hhbmdlJywgdGhpcy50b2dnbGVWaXNpYmlsaXR5Xyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by50b2dnbGVWaXNpYmlsaXR5XyA9IGZ1bmN0aW9uIHRvZ2dsZVZpc2liaWxpdHlfKGUpIHtcbiAgICAgIGlmIChkb2N1bWVudC5oaWRkZW4pIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlSW50ZXJ2YWxfKGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5lbmFibGVJbnRlcnZhbF8oKTsgLy8gd2UganVzdCBzd2l0Y2hlZCBiYWNrIHRvIHRoZSBwYWdlIGFuZCBzb21lb25lIG1heSBiZSBsb29raW5nLCBzbywgdXBkYXRlIEFTQVBcblxuICAgICAgICB0aGlzLnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5lbmFibGVJbnRlcnZhbF8gPSBmdW5jdGlvbiBlbmFibGVJbnRlcnZhbF8oKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdGhpcy5jbGVhckludGVydmFsKHRoaXMudXBkYXRlSW50ZXJ2YWwpO1xuICAgICAgdGhpcy51cGRhdGVJbnRlcnZhbCA9IHRoaXMuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIucmVxdWVzdEFuaW1hdGlvbkZyYW1lKF90aGlzMi51cGRhdGUpO1xuICAgICAgfSwgVVBEQVRFX1JFRlJFU0hfSU5URVJWQUwpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uZGlzYWJsZUludGVydmFsXyA9IGZ1bmN0aW9uIGRpc2FibGVJbnRlcnZhbF8oZSkge1xuICAgICAgaWYgKHRoaXMucGxheWVyXy5saXZlVHJhY2tlciAmJiB0aGlzLnBsYXllcl8ubGl2ZVRyYWNrZXIuaXNMaXZlKCkgJiYgZS50eXBlICE9PSAnZW5kZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jbGVhckludGVydmFsKHRoaXMudXBkYXRlSW50ZXJ2YWwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgJ3MgRE9NIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsJCQxKCkge1xuICAgICAgcmV0dXJuIF9TbGlkZXIucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAndmpzLXByb2dyZXNzLWhvbGRlcidcbiAgICAgIH0sIHtcbiAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLmxvY2FsaXplKCdQcm9ncmVzcyBCYXInKVxuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gdXBkYXRlcyB0aGUgcGxheSBwcm9ncmVzcyBiYXIgYW5kIGFjY2Vzc2liaWxpdHlcbiAgICAgKiBhdHRyaWJ1dGVzIHRvIHdoYXRldmVyIGlzIHBhc3NlZCBpbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjdXJyZW50VGltZVxuICAgICAqICAgICAgICBUaGUgY3VycmVudFRpbWUgdmFsdWUgdGhhdCBzaG91bGQgYmUgdXNlZCBmb3IgYWNjZXNzaWJpbGl0eVxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBlcmNlbnRcbiAgICAgKiAgICAgICAgVGhlIHBlcmNlbnRhZ2UgYXMgYSBkZWNpbWFsIHRoYXQgdGhlIGJhciBzaG91bGQgYmUgZmlsbGVkIGZyb20gMC0xLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udXBkYXRlXyA9IGZ1bmN0aW9uIHVwZGF0ZV8oY3VycmVudFRpbWUsIHBlcmNlbnQpIHtcbiAgICAgIHZhciBsaXZlVHJhY2tlciA9IHRoaXMucGxheWVyXy5saXZlVHJhY2tlcjtcbiAgICAgIHZhciBkdXJhdGlvbiA9IHRoaXMucGxheWVyXy5kdXJhdGlvbigpO1xuXG4gICAgICBpZiAobGl2ZVRyYWNrZXIgJiYgbGl2ZVRyYWNrZXIuaXNMaXZlKCkpIHtcbiAgICAgICAgZHVyYXRpb24gPSB0aGlzLnBsYXllcl8ubGl2ZVRyYWNrZXIubGl2ZUN1cnJlbnRUaW1lKCk7XG4gICAgICB9IC8vIG1hY2hpbmUgcmVhZGFibGUgdmFsdWUgb2YgcHJvZ3Jlc3MgYmFyIChwZXJjZW50YWdlIGNvbXBsZXRlKVxuXG5cbiAgICAgIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycsIChwZXJjZW50ICogMTAwKS50b0ZpeGVkKDIpKTsgLy8gaHVtYW4gcmVhZGFibGUgdmFsdWUgb2YgcHJvZ3Jlc3MgYmFyICh0aW1lIGNvbXBsZXRlKVxuXG4gICAgICB0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWV0ZXh0JywgdGhpcy5sb2NhbGl6ZSgncHJvZ3Jlc3MgYmFyIHRpbWluZzogY3VycmVudFRpbWU9ezF9IGR1cmF0aW9uPXsyfScsIFtmb3JtYXRUaW1lKGN1cnJlbnRUaW1lLCBkdXJhdGlvbiksIGZvcm1hdFRpbWUoZHVyYXRpb24sIGR1cmF0aW9uKV0sICd7MX0gb2YgezJ9JykpOyAvLyBVcGRhdGUgdGhlIGBQbGF5UHJvZ3Jlc3NCYXJgLlxuXG4gICAgICBpZiAodGhpcy5iYXIpIHtcbiAgICAgICAgdGhpcy5iYXIudXBkYXRlKGdldEJvdW5kaW5nQ2xpZW50UmVjdCh0aGlzLmVsXyksIHBlcmNlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHNlZWsgYmFyJ3MgVUkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAgICogICAgICAgIFRoZSBgdGltZXVwZGF0ZWAgb3IgYGVuZGVkYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIHRvIHJ1bi5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIFBsYXllciN0aW1ldXBkYXRlXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICogICAgICAgICAgVGhlIGN1cnJlbnQgcGVyY2VudCBhdCBhIG51bWJlciBmcm9tIDAtMVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZXZlbnQpIHtcbiAgICAgIC8vIGlmIHRoZSBvZmZzZXRQYXJlbnQgaXMgbnVsbCwgdGhlbiB0aGlzIGVsZW1lbnQgaXMgaGlkZGVuLCBpbiB3aGljaCBjYXNlXG4gICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIHVwZGF0ZSBpdC5cbiAgICAgIGlmICh0aGlzLmVsKCkub2Zmc2V0UGFyZW50ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHBlcmNlbnQgPSBfU2xpZGVyLnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzKTtcblxuICAgICAgdGhpcy51cGRhdGVfKHRoaXMuZ2V0Q3VycmVudFRpbWVfKCksIHBlcmNlbnQpO1xuICAgICAgcmV0dXJuIHBlcmNlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmFsdWUgb2YgY3VycmVudCB0aW1lIGJ1dCBhbGxvd3MgZm9yIHNtb290aCBzY3J1YmJpbmcsXG4gICAgICogd2hlbiBwbGF5ZXIgY2FuJ3Qga2VlcCB1cC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKiAgICAgICAgIFRoZSBjdXJyZW50IHRpbWUgdmFsdWUgdG8gZGlzcGxheVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZ2V0Q3VycmVudFRpbWVfID0gZnVuY3Rpb24gZ2V0Q3VycmVudFRpbWVfKCkge1xuICAgICAgcmV0dXJuIHRoaXMucGxheWVyXy5zY3J1YmJpbmcoKSA/IHRoaXMucGxheWVyXy5nZXRDYWNoZSgpLmN1cnJlbnRUaW1lIDogdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdlIHdhbnQgdGhlIHNlZWsgYmFyIHRvIGJlIGZ1bGwgb24gZW5kZWRcbiAgICAgKiBubyBtYXR0ZXIgd2hhdCB0aGUgYWN0dWFsIGludGVybmFsIHZhbHVlcyBhcmUuIHNvIHdlIGZvcmNlIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgICAqICAgICAgICBUaGUgYHRpbWV1cGRhdGVgIG9yIGBlbmRlZGAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyB0byBydW4uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBQbGF5ZXIjZW5kZWRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlRW5kZWQgPSBmdW5jdGlvbiBoYW5kbGVFbmRlZChldmVudCkge1xuICAgICAgdGhpcy51cGRhdGVfKHRoaXMucGxheWVyXy5kdXJhdGlvbigpLCAxKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwZXJjZW50YWdlIG9mIG1lZGlhIHBsYXllZCBzbyBmYXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICogICAgICAgICBUaGUgcGVyY2VudGFnZSBvZiBtZWRpYSBwbGF5ZWQgc28gZmFyICgwIHRvIDEpLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5nZXRQZXJjZW50ID0gZnVuY3Rpb24gZ2V0UGVyY2VudCgpIHtcbiAgICAgIHZhciBjdXJyZW50VGltZSA9IHRoaXMuZ2V0Q3VycmVudFRpbWVfKCk7XG4gICAgICB2YXIgcGVyY2VudDtcbiAgICAgIHZhciBsaXZlVHJhY2tlciA9IHRoaXMucGxheWVyXy5saXZlVHJhY2tlcjtcblxuICAgICAgaWYgKGxpdmVUcmFja2VyICYmIGxpdmVUcmFja2VyLmlzTGl2ZSgpKSB7XG4gICAgICAgIHBlcmNlbnQgPSAoY3VycmVudFRpbWUgLSBsaXZlVHJhY2tlci5zZWVrYWJsZVN0YXJ0KCkpIC8gbGl2ZVRyYWNrZXIubGl2ZVdpbmRvdygpOyAvLyBwcmV2ZW50IHRoZSBwZXJjZW50IGZyb20gY2hhbmdpbmcgYXQgdGhlIGxpdmUgZWRnZVxuXG4gICAgICAgIGlmIChsaXZlVHJhY2tlci5hdExpdmVFZGdlKCkpIHtcbiAgICAgICAgICBwZXJjZW50ID0gMTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGVyY2VudCA9IGN1cnJlbnRUaW1lIC8gdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwZXJjZW50ID49IDEgPyAxIDogcGVyY2VudCB8fCAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgbW91c2UgZG93biBvbiBzZWVrIGJhclxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgVGhlIGBtb3VzZWRvd25gIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgdG8gcnVuLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgbW91c2Vkb3duXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZU1vdXNlRG93biA9IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bihldmVudCkge1xuICAgICAgaWYgKCFpc1NpbmdsZUxlZnRDbGljayhldmVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBTdG9wIGV2ZW50IHByb3BhZ2F0aW9uIHRvIHByZXZlbnQgZG91YmxlIGZpcmUgaW4gcHJvZ3Jlc3MtY29udHJvbC5qc1xuXG5cbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5wbGF5ZXJfLnNjcnViYmluZyh0cnVlKTtcbiAgICAgIHRoaXMudmlkZW9XYXNQbGF5aW5nID0gIXRoaXMucGxheWVyXy5wYXVzZWQoKTtcbiAgICAgIHRoaXMucGxheWVyXy5wYXVzZSgpO1xuXG4gICAgICBfU2xpZGVyLnByb3RvdHlwZS5oYW5kbGVNb3VzZURvd24uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBtb3VzZSBtb3ZlIG9uIHNlZWsgYmFyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBUaGUgYG1vdXNlbW92ZWAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyB0byBydW4uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBtb3VzZW1vdmVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlTW91c2VNb3ZlID0gZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlKGV2ZW50KSB7XG4gICAgICBpZiAoIWlzU2luZ2xlTGVmdENsaWNrKGV2ZW50KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBuZXdUaW1lO1xuICAgICAgdmFyIGRpc3RhbmNlID0gdGhpcy5jYWxjdWxhdGVEaXN0YW5jZShldmVudCk7XG4gICAgICB2YXIgbGl2ZVRyYWNrZXIgPSB0aGlzLnBsYXllcl8ubGl2ZVRyYWNrZXI7XG5cbiAgICAgIGlmICghbGl2ZVRyYWNrZXIgfHwgIWxpdmVUcmFja2VyLmlzTGl2ZSgpKSB7XG4gICAgICAgIG5ld1RpbWUgPSBkaXN0YW5jZSAqIHRoaXMucGxheWVyXy5kdXJhdGlvbigpOyAvLyBEb24ndCBsZXQgdmlkZW8gZW5kIHdoaWxlIHNjcnViYmluZy5cblxuICAgICAgICBpZiAobmV3VGltZSA9PT0gdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCkpIHtcbiAgICAgICAgICBuZXdUaW1lID0gbmV3VGltZSAtIDAuMTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHNlZWthYmxlU3RhcnQgPSBsaXZlVHJhY2tlci5zZWVrYWJsZVN0YXJ0KCk7XG4gICAgICAgIHZhciBzZWVrYWJsZUVuZCA9IGxpdmVUcmFja2VyLmxpdmVDdXJyZW50VGltZSgpO1xuICAgICAgICBuZXdUaW1lID0gc2Vla2FibGVTdGFydCArIGRpc3RhbmNlICogbGl2ZVRyYWNrZXIubGl2ZVdpbmRvdygpOyAvLyBEb24ndCBsZXQgdmlkZW8gZW5kIHdoaWxlIHNjcnViYmluZy5cblxuICAgICAgICBpZiAobmV3VGltZSA+PSBzZWVrYWJsZUVuZCkge1xuICAgICAgICAgIG5ld1RpbWUgPSBzZWVrYWJsZUVuZDtcbiAgICAgICAgfSAvLyBDb21wZW5zYXRlIGZvciBwcmVjaXNpb24gZGlmZmVyZW5jZXMgc28gdGhhdCBjdXJyZW50VGltZSBpcyBub3QgbGVzc1xuICAgICAgICAvLyB0aGFuIHNlZWthYmxlIHN0YXJ0XG5cblxuICAgICAgICBpZiAobmV3VGltZSA8PSBzZWVrYWJsZVN0YXJ0KSB7XG4gICAgICAgICAgbmV3VGltZSA9IHNlZWthYmxlU3RhcnQgKyAwLjE7XG4gICAgICAgIH0gLy8gT24gYW5kcm9pZCBzZWVrYWJsZUVuZCBjYW4gYmUgSW5maW5pdHkgc29tZXRpbWVzLFxuICAgICAgICAvLyB0aGlzIHdpbGwgY2F1c2UgbmV3VGltZSB0byBiZSBJbmZpbml0eSwgd2hpY2ggaXNcbiAgICAgICAgLy8gbm90IGEgdmFsaWQgY3VycmVudFRpbWUuXG5cblxuICAgICAgICBpZiAobmV3VGltZSA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0gLy8gU2V0IG5ldyB0aW1lICh0ZWxsIHBsYXllciB0byBzZWVrIHRvIG5ldyB0aW1lKVxuXG5cbiAgICAgIHRoaXMucGxheWVyXy5jdXJyZW50VGltZShuZXdUaW1lKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmVuYWJsZSA9IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICAgIF9TbGlkZXIucHJvdG90eXBlLmVuYWJsZS5jYWxsKHRoaXMpO1xuXG4gICAgICB2YXIgbW91c2VUaW1lRGlzcGxheSA9IHRoaXMuZ2V0Q2hpbGQoJ21vdXNlVGltZURpc3BsYXknKTtcblxuICAgICAgaWYgKCFtb3VzZVRpbWVEaXNwbGF5KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbW91c2VUaW1lRGlzcGxheS5zaG93KCk7XG4gICAgfTtcblxuICAgIF9wcm90by5kaXNhYmxlID0gZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICAgIF9TbGlkZXIucHJvdG90eXBlLmRpc2FibGUuY2FsbCh0aGlzKTtcblxuICAgICAgdmFyIG1vdXNlVGltZURpc3BsYXkgPSB0aGlzLmdldENoaWxkKCdtb3VzZVRpbWVEaXNwbGF5Jyk7XG5cbiAgICAgIGlmICghbW91c2VUaW1lRGlzcGxheSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1vdXNlVGltZURpc3BsYXkuaGlkZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgbW91c2UgdXAgb24gc2VlayBiYXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIFRoZSBgbW91c2V1cGAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyB0byBydW4uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBtb3VzZXVwXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZU1vdXNlVXAgPSBmdW5jdGlvbiBoYW5kbGVNb3VzZVVwKGV2ZW50KSB7XG4gICAgICBfU2xpZGVyLnByb3RvdHlwZS5oYW5kbGVNb3VzZVVwLmNhbGwodGhpcywgZXZlbnQpOyAvLyBTdG9wIGV2ZW50IHByb3BhZ2F0aW9uIHRvIHByZXZlbnQgZG91YmxlIGZpcmUgaW4gcHJvZ3Jlc3MtY29udHJvbC5qc1xuXG5cbiAgICAgIGlmIChldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wbGF5ZXJfLnNjcnViYmluZyhmYWxzZSk7XG4gICAgICAvKipcbiAgICAgICAqIFRyaWdnZXIgdGltZXVwZGF0ZSBiZWNhdXNlIHdlJ3JlIGRvbmUgc2Vla2luZyBhbmQgdGhlIHRpbWUgaGFzIGNoYW5nZWQuXG4gICAgICAgKiBUaGlzIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIGlmIHRoZSBwbGF5ZXIgaXMgcGF1c2VkIHRvIHRpbWUgdGhlIHRpbWUgZGlzcGxheXMuXG4gICAgICAgKlxuICAgICAgICogQGV2ZW50IFRlY2gjdGltZXVwZGF0ZVxuICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICovXG5cbiAgICAgIHRoaXMucGxheWVyXy50cmlnZ2VyKHtcbiAgICAgICAgdHlwZTogJ3RpbWV1cGRhdGUnLFxuICAgICAgICB0YXJnZXQ6IHRoaXMsXG4gICAgICAgIG1hbnVhbGx5VHJpZ2dlcmVkOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgaWYgKHRoaXMudmlkZW9XYXNQbGF5aW5nKSB7XG4gICAgICAgIHNpbGVuY2VQcm9taXNlKHRoaXMucGxheWVyXy5wbGF5KCkpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb3ZlIG1vcmUgcXVpY2tseSBmYXN0IGZvcndhcmQgZm9yIGtleWJvYXJkLW9ubHkgdXNlcnNcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uc3RlcEZvcndhcmQgPSBmdW5jdGlvbiBzdGVwRm9yd2FyZCgpIHtcbiAgICAgIHRoaXMucGxheWVyXy5jdXJyZW50VGltZSh0aGlzLnBsYXllcl8uY3VycmVudFRpbWUoKSArIFNURVBfU0VDT05EUyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vdmUgbW9yZSBxdWlja2x5IHJld2luZCBmb3Iga2V5Ym9hcmQtb25seSB1c2Vyc1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zdGVwQmFjayA9IGZ1bmN0aW9uIHN0ZXBCYWNrKCkge1xuICAgICAgdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKHRoaXMucGxheWVyXy5jdXJyZW50VGltZSgpIC0gU1RFUF9TRUNPTkRTKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyB0aGUgcGxheWJhY2sgc3RhdGUgb2YgdGhlIHBsYXllclxuICAgICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBlbnRlciBvciBzcGFjZSBpcyB1c2VkIG9uIHRoZSBzZWVrYmFyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBUaGUgYGtleWRvd25gIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXG4gICAgICpcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlQWN0aW9uID0gZnVuY3Rpb24gaGFuZGxlQWN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5wbGF5ZXJfLnBhdXNlZCgpKSB7XG4gICAgICAgIHRoaXMucGxheWVyXy5wbGF5KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBsYXllcl8ucGF1c2UoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gdGhpcyBTZWVrQmFyIGhhcyBmb2N1cyBhbmQgYSBrZXkgZ2V0cyBwcmVzc2VkIGRvd24uXG4gICAgICogU3VwcG9ydHMgdGhlIGZvbGxvd2luZyBrZXlzOlxuICAgICAqXG4gICAgICogICBTcGFjZSBvciBFbnRlciBrZXkgZmlyZSBhIGNsaWNrIGV2ZW50XG4gICAgICogICBIb21lIGtleSBtb3ZlcyB0byBzdGFydCBvZiB0aGUgdGltZWxpbmVcbiAgICAgKiAgIEVuZCBrZXkgbW92ZXMgdG8gZW5kIG9mIHRoZSB0aW1lbGluZVxuICAgICAqICAgRGlnaXQgXCIwXCIgdGhyb3VnaCBcIjlcIiBrZXlzIG1vdmUgdG8gMCUsIDEwJSAuLi4gODAlLCA5MCUgb2YgdGhlIHRpbWVsaW5lXG4gICAgICogICBQYWdlRG93biBrZXkgbW92ZXMgYmFjayBhIGxhcmdlciBzdGVwIHRoYW4gQXJyb3dEb3duXG4gICAgICogICBQYWdlVXAga2V5IG1vdmVzIGZvcndhcmQgYSBsYXJnZSBzdGVwXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBUaGUgYGtleWRvd25gIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmUgY2FsbGVkLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMga2V5ZG93blxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVLZXlQcmVzcyA9IGZ1bmN0aW9uIGhhbmRsZUtleVByZXNzKGV2ZW50KSB7XG4gICAgICBpZiAoa2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnU3BhY2UnKSB8fCBrZXljb2RlLmlzRXZlbnRLZXkoZXZlbnQsICdFbnRlcicpKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuaGFuZGxlQWN0aW9uKGV2ZW50KTtcbiAgICAgIH0gZWxzZSBpZiAoa2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnSG9tZScpKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMucGxheWVyXy5jdXJyZW50VGltZSgwKTtcbiAgICAgIH0gZWxzZSBpZiAoa2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnRW5kJykpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKHRoaXMucGxheWVyXy5kdXJhdGlvbigpKTtcbiAgICAgIH0gZWxzZSBpZiAoL15bMC05XSQvLnRlc3Qoa2V5Y29kZShldmVudCkpKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBnb3RvRnJhY3Rpb24gPSAoa2V5Y29kZS5jb2Rlc1trZXljb2RlKGV2ZW50KV0gLSBrZXljb2RlLmNvZGVzWycwJ10pICogMTAuMCAvIDEwMC4wO1xuICAgICAgICB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUodGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCkgKiBnb3RvRnJhY3Rpb24pO1xuICAgICAgfSBlbHNlIGlmIChrZXljb2RlLmlzRXZlbnRLZXkoZXZlbnQsICdQZ0RuJykpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKHRoaXMucGxheWVyXy5jdXJyZW50VGltZSgpIC0gU1RFUF9TRUNPTkRTICogUEFHRV9LRVlfTVVMVElQTElFUik7XG4gICAgICB9IGVsc2UgaWYgKGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ1BnVXAnKSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUodGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCkgKyBTVEVQX1NFQ09ORFMgKiBQQUdFX0tFWV9NVUxUSVBMSUVSKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFBhc3Mga2V5cHJlc3MgaGFuZGxpbmcgdXAgZm9yIHVuc3VwcG9ydGVkIGtleXNcbiAgICAgICAgX1NsaWRlci5wcm90b3R5cGUuaGFuZGxlS2V5UHJlc3MuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBTZWVrQmFyO1xuICB9KFNsaWRlcik7XG4gIC8qKlxuICAgKiBEZWZhdWx0IG9wdGlvbnMgZm9yIHRoZSBgU2Vla0JhcmBcbiAgICpcbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICBTZWVrQmFyLnByb3RvdHlwZS5vcHRpb25zXyA9IHtcbiAgICBjaGlsZHJlbjogWydsb2FkUHJvZ3Jlc3NCYXInLCAncGxheVByb2dyZXNzQmFyJ10sXG4gICAgYmFyTmFtZTogJ3BsYXlQcm9ncmVzc0JhcidcbiAgfTsgLy8gTW91c2VUaW1lRGlzcGxheSB0b29sdGlwcyBzaG91bGQgbm90IGJlIGFkZGVkIHRvIGEgcGxheWVyIG9uIG1vYmlsZSBkZXZpY2VzXG5cbiAgaWYgKCFJU19JT1MgJiYgIUlTX0FORFJPSUQpIHtcbiAgICBTZWVrQmFyLnByb3RvdHlwZS5vcHRpb25zXy5jaGlsZHJlbi5zcGxpY2UoMSwgMCwgJ21vdXNlVGltZURpc3BsYXknKTtcbiAgfVxuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnU2Vla0JhcicsIFNlZWtCYXIpO1xuXG4gIC8qKlxuICAgKiBUaGUgUHJvZ3Jlc3MgQ29udHJvbCBjb21wb25lbnQgY29udGFpbnMgdGhlIHNlZWsgYmFyLCBsb2FkIHByb2dyZXNzLFxuICAgKiBhbmQgcGxheSBwcm9ncmVzcy5cbiAgICpcbiAgICogQGV4dGVuZHMgQ29tcG9uZW50XG4gICAqL1xuXG4gIHZhciBQcm9ncmVzc0NvbnRyb2wgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoUHJvZ3Jlc3NDb250cm9sLCBfQ29tcG9uZW50KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICAgKiAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUHJvZ3Jlc3NDb250cm9sKHBsYXllciwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICBfdGhpcyA9IF9Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICBfdGhpcy5oYW5kbGVNb3VzZU1vdmUgPSB0aHJvdHRsZShiaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBfdGhpcy5oYW5kbGVNb3VzZU1vdmUpLCAyNSk7XG4gICAgICBfdGhpcy50aHJvdHRsZWRIYW5kbGVNb3VzZVNlZWsgPSB0aHJvdHRsZShiaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBfdGhpcy5oYW5kbGVNb3VzZVNlZWspLCAyNSk7XG5cbiAgICAgIF90aGlzLmVuYWJsZSgpO1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgYENvbXBvbmVudGAncyBET00gZWxlbWVudFxuICAgICAqXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBQcm9ncmVzc0NvbnRyb2wucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwkJDEoKSB7XG4gICAgICByZXR1cm4gX0NvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgICAgICBjbGFzc05hbWU6ICd2anMtcHJvZ3Jlc3MtY29udHJvbCB2anMtY29udHJvbCdcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGVuIHRoZSBtb3VzZSBtb3ZlcyBvdmVyIHRoZSBgUHJvZ3Jlc3NDb250cm9sYCwgdGhlIHBvaW50ZXIgcG9zaXRpb25cbiAgICAgKiBnZXRzIHBhc3NlZCBkb3duIHRvIHRoZSBgTW91c2VUaW1lRGlzcGxheWAgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgVGhlIGBtb3VzZW1vdmVgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gcnVuLlxuICAgICAqXG4gICAgICogQGxpc3RlbiBtb3VzZW1vdmVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlTW91c2VNb3ZlID0gZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlKGV2ZW50KSB7XG4gICAgICB2YXIgc2Vla0JhciA9IHRoaXMuZ2V0Q2hpbGQoJ3NlZWtCYXInKTtcblxuICAgICAgaWYgKHNlZWtCYXIpIHtcbiAgICAgICAgdmFyIG1vdXNlVGltZURpc3BsYXkgPSBzZWVrQmFyLmdldENoaWxkKCdtb3VzZVRpbWVEaXNwbGF5Jyk7XG4gICAgICAgIHZhciBzZWVrQmFyRWwgPSBzZWVrQmFyLmVsKCk7XG4gICAgICAgIHZhciBzZWVrQmFyUmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChzZWVrQmFyRWwpO1xuICAgICAgICB2YXIgc2Vla0JhclBvaW50ID0gZ2V0UG9pbnRlclBvc2l0aW9uKHNlZWtCYXJFbCwgZXZlbnQpLng7IC8vIFRoZSBkZWZhdWx0IHNraW4gaGFzIGEgZ2FwIG9uIGVpdGhlciBzaWRlIG9mIHRoZSBgU2Vla0JhcmAuIFRoaXMgbWVhbnNcbiAgICAgICAgLy8gdGhhdCBpdCdzIHBvc3NpYmxlIHRvIHRyaWdnZXIgdGhpcyBiZWhhdmlvciBvdXRzaWRlIHRoZSBib3VuZGFyaWVzIG9mXG4gICAgICAgIC8vIHRoZSBgU2Vla0JhcmAuIFRoaXMgZW5zdXJlcyB3ZSBzdGF5IHdpdGhpbiBpdCBhdCBhbGwgdGltZXMuXG5cbiAgICAgICAgaWYgKHNlZWtCYXJQb2ludCA+IDEpIHtcbiAgICAgICAgICBzZWVrQmFyUG9pbnQgPSAxO1xuICAgICAgICB9IGVsc2UgaWYgKHNlZWtCYXJQb2ludCA8IDApIHtcbiAgICAgICAgICBzZWVrQmFyUG9pbnQgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1vdXNlVGltZURpc3BsYXkpIHtcbiAgICAgICAgICBtb3VzZVRpbWVEaXNwbGF5LnVwZGF0ZShzZWVrQmFyUmVjdCwgc2Vla0JhclBvaW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHRocm90dGxlZCB2ZXJzaW9uIG9mIHRoZSB7QGxpbmsgUHJvZ3Jlc3NDb250cm9sI2hhbmRsZU1vdXNlU2Vla30gbGlzdGVuZXIuXG4gICAgICpcbiAgICAgKiBAbWV0aG9kIFByb2dyZXNzQ29udHJvbCN0aHJvdHRsZWRIYW5kbGVNb3VzZVNlZWtcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBUaGUgYG1vdXNlbW92ZWAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBydW4uXG4gICAgICpcbiAgICAgKiBAbGlzdGVuIG1vdXNlbW92ZVxuICAgICAqIEBsaXN0ZW4gdG91Y2htb3ZlXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgYG1vdXNlbW92ZWAgb3IgYHRvdWNobW92ZWAgZXZlbnRzIG9uIHRoZSBgUHJvZ3Jlc3NDb250cm9sYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIGBtb3VzZWRvd25gIG9yIGB0b3VjaHN0YXJ0YCBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGlzIGZ1bmN0aW9uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBtb3VzZW1vdmVcbiAgICAgKiBAbGlzdGVucyB0b3VjaG1vdmVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlTW91c2VTZWVrID0gZnVuY3Rpb24gaGFuZGxlTW91c2VTZWVrKGV2ZW50KSB7XG4gICAgICB2YXIgc2Vla0JhciA9IHRoaXMuZ2V0Q2hpbGQoJ3NlZWtCYXInKTtcblxuICAgICAgaWYgKHNlZWtCYXIpIHtcbiAgICAgICAgc2Vla0Jhci5oYW5kbGVNb3VzZU1vdmUoZXZlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcmUgY29udHJvbHMgYXJlIGN1cnJlbnRseSBlbmFibGVkIGZvciB0aGlzIHByb2dyZXNzIGNvbnRyb2wuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqICAgICAgICAgdHJ1ZSBpZiBjb250cm9scyBhcmUgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmVuYWJsZWQgPSBmdW5jdGlvbiBlbmFibGVkKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZW5hYmxlZF87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc2FibGUgYWxsIGNvbnRyb2xzIG9uIHRoZSBwcm9ncmVzcyBjb250cm9sIGFuZCBpdHMgY2hpbGRyZW5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZGlzYWJsZSA9IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICB0aGlzLmNoaWxkcmVuKCkuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgcmV0dXJuIGNoaWxkLmRpc2FibGUgJiYgY2hpbGQuZGlzYWJsZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghdGhpcy5lbmFibGVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9mZihbJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0J10sIHRoaXMuaGFuZGxlTW91c2VEb3duKTtcbiAgICAgIHRoaXMub2ZmKHRoaXMuZWxfLCAnbW91c2Vtb3ZlJywgdGhpcy5oYW5kbGVNb3VzZU1vdmUpO1xuICAgICAgdGhpcy5oYW5kbGVNb3VzZVVwKCk7XG4gICAgICB0aGlzLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgdGhpcy5lbmFibGVkXyA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmFibGUgYWxsIGNvbnRyb2xzIG9uIHRoZSBwcm9ncmVzcyBjb250cm9sIGFuZCBpdHMgY2hpbGRyZW5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZW5hYmxlID0gZnVuY3Rpb24gZW5hYmxlKCkge1xuICAgICAgdGhpcy5jaGlsZHJlbigpLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgIHJldHVybiBjaGlsZC5lbmFibGUgJiYgY2hpbGQuZW5hYmxlKCk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5vbihbJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0J10sIHRoaXMuaGFuZGxlTW91c2VEb3duKTtcbiAgICAgIHRoaXMub24odGhpcy5lbF8sICdtb3VzZW1vdmUnLCB0aGlzLmhhbmRsZU1vdXNlTW92ZSk7XG4gICAgICB0aGlzLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgdGhpcy5lbmFibGVkXyA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBgbW91c2Vkb3duYCBvciBgdG91Y2hzdGFydGAgZXZlbnRzIG9uIHRoZSBgUHJvZ3Jlc3NDb250cm9sYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIGBtb3VzZWRvd25gIG9yIGB0b3VjaHN0YXJ0YCBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGlzIGZ1bmN0aW9uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBtb3VzZWRvd25cbiAgICAgKiBAbGlzdGVucyB0b3VjaHN0YXJ0XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZU1vdXNlRG93biA9IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bihldmVudCkge1xuICAgICAgdmFyIGRvYyA9IHRoaXMuZWxfLm93bmVyRG9jdW1lbnQ7XG4gICAgICB2YXIgc2Vla0JhciA9IHRoaXMuZ2V0Q2hpbGQoJ3NlZWtCYXInKTtcblxuICAgICAgaWYgKHNlZWtCYXIpIHtcbiAgICAgICAgc2Vla0Jhci5oYW5kbGVNb3VzZURvd24oZXZlbnQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9uKGRvYywgJ21vdXNlbW92ZScsIHRoaXMudGhyb3R0bGVkSGFuZGxlTW91c2VTZWVrKTtcbiAgICAgIHRoaXMub24oZG9jLCAndG91Y2htb3ZlJywgdGhpcy50aHJvdHRsZWRIYW5kbGVNb3VzZVNlZWspO1xuICAgICAgdGhpcy5vbihkb2MsICdtb3VzZXVwJywgdGhpcy5oYW5kbGVNb3VzZVVwKTtcbiAgICAgIHRoaXMub24oZG9jLCAndG91Y2hlbmQnLCB0aGlzLmhhbmRsZU1vdXNlVXApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgYG1vdXNldXBgIG9yIGB0b3VjaGVuZGAgZXZlbnRzIG9uIHRoZSBgUHJvZ3Jlc3NDb250cm9sYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIGBtb3VzZXVwYCBvciBgdG91Y2hlbmRgIGV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoaXMgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyB0b3VjaGVuZFxuICAgICAqIEBsaXN0ZW5zIG1vdXNldXBcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlTW91c2VVcCA9IGZ1bmN0aW9uIGhhbmRsZU1vdXNlVXAoZXZlbnQpIHtcbiAgICAgIHZhciBkb2MgPSB0aGlzLmVsXy5vd25lckRvY3VtZW50O1xuICAgICAgdmFyIHNlZWtCYXIgPSB0aGlzLmdldENoaWxkKCdzZWVrQmFyJyk7XG5cbiAgICAgIGlmIChzZWVrQmFyKSB7XG4gICAgICAgIHNlZWtCYXIuaGFuZGxlTW91c2VVcChldmVudCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMub2ZmKGRvYywgJ21vdXNlbW92ZScsIHRoaXMudGhyb3R0bGVkSGFuZGxlTW91c2VTZWVrKTtcbiAgICAgIHRoaXMub2ZmKGRvYywgJ3RvdWNobW92ZScsIHRoaXMudGhyb3R0bGVkSGFuZGxlTW91c2VTZWVrKTtcbiAgICAgIHRoaXMub2ZmKGRvYywgJ21vdXNldXAnLCB0aGlzLmhhbmRsZU1vdXNlVXApO1xuICAgICAgdGhpcy5vZmYoZG9jLCAndG91Y2hlbmQnLCB0aGlzLmhhbmRsZU1vdXNlVXApO1xuICAgIH07XG5cbiAgICByZXR1cm4gUHJvZ3Jlc3NDb250cm9sO1xuICB9KENvbXBvbmVudCk7XG4gIC8qKlxuICAgKiBEZWZhdWx0IG9wdGlvbnMgZm9yIGBQcm9ncmVzc0NvbnRyb2xgXG4gICAqXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgUHJvZ3Jlc3NDb250cm9sLnByb3RvdHlwZS5vcHRpb25zXyA9IHtcbiAgICBjaGlsZHJlbjogWydzZWVrQmFyJ11cbiAgfTtcbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdQcm9ncmVzc0NvbnRyb2wnLCBQcm9ncmVzc0NvbnRyb2wpO1xuXG4gIC8qKlxuICAgKiBUb2dnbGUgZnVsbHNjcmVlbiB2aWRlb1xuICAgKlxuICAgKiBAZXh0ZW5kcyBCdXR0b25cbiAgICovXG5cbiAgdmFyIEZ1bGxzY3JlZW5Ub2dnbGUgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfQnV0dG9uKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoRnVsbHNjcmVlblRvZ2dsZSwgX0J1dHRvbik7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEZ1bGxzY3JlZW5Ub2dnbGUocGxheWVyLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX0J1dHRvbi5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcblxuICAgICAgX3RoaXMub24ocGxheWVyLCAnZnVsbHNjcmVlbmNoYW5nZScsIF90aGlzLmhhbmRsZUZ1bGxzY3JlZW5DaGFuZ2UpO1xuXG4gICAgICBpZiAoZG9jdW1lbnRbRnVsbHNjcmVlbkFwaS5mdWxsc2NyZWVuRW5hYmxlZF0gPT09IGZhbHNlKSB7XG4gICAgICAgIF90aGlzLmRpc2FibGUoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgdGhlIGRlZmF1bHQgRE9NIGBjbGFzc05hbWVgLlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgVGhlIERPTSBgY2xhc3NOYW1lYCBmb3IgdGhpcyBvYmplY3QuXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBGdWxsc2NyZWVuVG9nZ2xlLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRDU1NDbGFzcygpIHtcbiAgICAgIHJldHVybiBcInZqcy1mdWxsc2NyZWVuLWNvbnRyb2wgXCIgKyBfQnV0dG9uLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgZnVsbHNjcmVlbmNoYW5nZSBvbiB0aGUgcGxheWVyIGFuZCBjaGFuZ2UgY29udHJvbCB0ZXh0IGFjY29yZGluZ2x5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgICAqICAgICAgICBUaGUge0BsaW5rIFBsYXllciNmdWxsc2NyZWVuY2hhbmdlfSBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlXG4gICAgICogICAgICAgIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIFBsYXllciNmdWxsc2NyZWVuY2hhbmdlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZUZ1bGxzY3JlZW5DaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVGdWxsc2NyZWVuQ2hhbmdlKGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5wbGF5ZXJfLmlzRnVsbHNjcmVlbigpKSB7XG4gICAgICAgIHRoaXMuY29udHJvbFRleHQoJ05vbi1GdWxsc2NyZWVuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNvbnRyb2xUZXh0KCdGdWxsc2NyZWVuJyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhbiBgRnVsbHNjcmVlblRvZ2dsZWAgaXMgXCJjbGlja2VkXCIuIFNlZVxuICAgICAqIHtAbGluayBDbGlja2FibGVDb21wb25lbnR9IGZvciBtb3JlIGRldGFpbGVkIGluZm9ybWF0aW9uIG9uIHdoYXQgYSBjbGljayBjYW4gYmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAgICogICAgICAgIFRoZSBga2V5ZG93bmAsIGB0YXBgLCBvciBgY2xpY2tgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmVcbiAgICAgKiAgICAgICAgY2FsbGVkLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgdGFwXG4gICAgICogQGxpc3RlbnMgY2xpY2tcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljayhldmVudCkge1xuICAgICAgaWYgKCF0aGlzLnBsYXllcl8uaXNGdWxsc2NyZWVuKCkpIHtcbiAgICAgICAgdGhpcy5wbGF5ZXJfLnJlcXVlc3RGdWxsc2NyZWVuKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBsYXllcl8uZXhpdEZ1bGxzY3JlZW4oKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIEZ1bGxzY3JlZW5Ub2dnbGU7XG4gIH0oQnV0dG9uKTtcbiAgLyoqXG4gICAqIFRoZSB0ZXh0IHRoYXQgc2hvdWxkIGRpc3BsYXkgb3ZlciB0aGUgYEZ1bGxzY3JlZW5Ub2dnbGVgcyBjb250cm9scy4gQWRkZWQgZm9yIGxvY2FsaXphdGlvbi5cbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICBGdWxsc2NyZWVuVG9nZ2xlLnByb3RvdHlwZS5jb250cm9sVGV4dF8gPSAnRnVsbHNjcmVlbic7XG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnRnVsbHNjcmVlblRvZ2dsZScsIEZ1bGxzY3JlZW5Ub2dnbGUpO1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB2b2x1bWUgY29udHJvbCBpcyBzdXBwb3J0ZWQgYW5kIGlmIGl0IGlzbid0IGhpZGUgdGhlXG4gICAqIGBDb21wb25lbnRgIHRoYXQgd2FzIHBhc3NlZCAgdXNpbmcgdGhlIGB2anMtaGlkZGVuYCBjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtIHtDb21wb25lbnR9IHNlbGZcbiAgICogICAgICAgIFRoZSBjb21wb25lbnQgdGhhdCBzaG91bGQgYmUgaGlkZGVuIGlmIHZvbHVtZSBpcyB1bnN1cHBvcnRlZFxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBBIHJlZmVyZW5jZSB0byB0aGUgcGxheWVyXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB2YXIgY2hlY2tWb2x1bWVTdXBwb3J0ID0gZnVuY3Rpb24gY2hlY2tWb2x1bWVTdXBwb3J0KHNlbGYsIHBsYXllcikge1xuICAgIC8vIGhpZGUgdm9sdW1lIGNvbnRyb2xzIHdoZW4gdGhleSdyZSBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IHRlY2hcbiAgICBpZiAocGxheWVyLnRlY2hfICYmICFwbGF5ZXIudGVjaF8uZmVhdHVyZXNWb2x1bWVDb250cm9sKSB7XG4gICAgICBzZWxmLmFkZENsYXNzKCd2anMtaGlkZGVuJyk7XG4gICAgfVxuXG4gICAgc2VsZi5vbihwbGF5ZXIsICdsb2Fkc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXBsYXllci50ZWNoXy5mZWF0dXJlc1ZvbHVtZUNvbnRyb2wpIHtcbiAgICAgICAgc2VsZi5hZGRDbGFzcygndmpzLWhpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5yZW1vdmVDbGFzcygndmpzLWhpZGRlbicpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTaG93cyB2b2x1bWUgbGV2ZWxcbiAgICpcbiAgICogQGV4dGVuZHMgQ29tcG9uZW50XG4gICAqL1xuXG4gIHZhciBWb2x1bWVMZXZlbCA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHNMb29zZShWb2x1bWVMZXZlbCwgX0NvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBWb2x1bWVMZXZlbCgpIHtcbiAgICAgIHJldHVybiBfQ29tcG9uZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvID0gVm9sdW1lTGV2ZWwucHJvdG90eXBlO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBgQ29tcG9uZW50YCdzIERPTSBlbGVtZW50XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCgpIHtcbiAgICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ3Zqcy12b2x1bWUtbGV2ZWwnLFxuICAgICAgICBpbm5lckhUTUw6ICc8c3BhbiBjbGFzcz1cInZqcy1jb250cm9sLXRleHRcIj48L3NwYW4+J1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBWb2x1bWVMZXZlbDtcbiAgfShDb21wb25lbnQpO1xuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnVm9sdW1lTGV2ZWwnLCBWb2x1bWVMZXZlbCk7XG5cbiAgLyoqXG4gICAqIFRoZSBiYXIgdGhhdCBjb250YWlucyB0aGUgdm9sdW1lIGxldmVsIGFuZCBjYW4gYmUgY2xpY2tlZCBvbiB0byBhZGp1c3QgdGhlIGxldmVsXG4gICAqXG4gICAqIEBleHRlbmRzIFNsaWRlclxuICAgKi9cblxuICB2YXIgVm9sdW1lQmFyID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX1NsaWRlcikge1xuICAgIF9pbmhlcml0c0xvb3NlKFZvbHVtZUJhciwgX1NsaWRlcik7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFZvbHVtZUJhcihwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgX3RoaXMgPSBfU2xpZGVyLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuXG4gICAgICBfdGhpcy5vbignc2xpZGVyYWN0aXZlJywgX3RoaXMudXBkYXRlTGFzdFZvbHVtZV8pO1xuXG4gICAgICBfdGhpcy5vbihwbGF5ZXIsICd2b2x1bWVjaGFuZ2UnLCBfdGhpcy51cGRhdGVBUklBQXR0cmlidXRlcyk7XG5cbiAgICAgIHBsYXllci5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy51cGRhdGVBUklBQXR0cmlidXRlcygpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgYENvbXBvbmVudGAncyBET00gZWxlbWVudFxuICAgICAqXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBWb2x1bWVCYXIucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwkJDEoKSB7XG4gICAgICByZXR1cm4gX1NsaWRlci5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgICAgICBjbGFzc05hbWU6ICd2anMtdm9sdW1lLWJhciB2anMtc2xpZGVyLWJhcidcbiAgICAgIH0sIHtcbiAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLmxvY2FsaXplKCdWb2x1bWUgTGV2ZWwnKSxcbiAgICAgICAgJ2FyaWEtbGl2ZSc6ICdwb2xpdGUnXG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIG1vdXNlIGRvd24gb24gdm9sdW1lIGJhclxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgVGhlIGBtb3VzZWRvd25gIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgdG8gcnVuLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgbW91c2Vkb3duXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZU1vdXNlRG93biA9IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bihldmVudCkge1xuICAgICAgaWYgKCFpc1NpbmdsZUxlZnRDbGljayhldmVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBfU2xpZGVyLnByb3RvdHlwZS5oYW5kbGVNb3VzZURvd24uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBtb3ZlbWVudCBldmVudHMgb24gdGhlIHtAbGluayBWb2x1bWVNZW51QnV0dG9ufS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIFRoZSBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIHJ1bi5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIG1vdXNlbW92ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVNb3VzZU1vdmUgPSBmdW5jdGlvbiBoYW5kbGVNb3VzZU1vdmUoZXZlbnQpIHtcbiAgICAgIGlmICghaXNTaW5nbGVMZWZ0Q2xpY2soZXZlbnQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jaGVja011dGVkKCk7XG4gICAgICB0aGlzLnBsYXllcl8udm9sdW1lKHRoaXMuY2FsY3VsYXRlRGlzdGFuY2UoZXZlbnQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgdGhlIHBsYXllciBpcyBtdXRlZCB1bm11dGUgaXQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNoZWNrTXV0ZWQgPSBmdW5jdGlvbiBjaGVja011dGVkKCkge1xuICAgICAgaWYgKHRoaXMucGxheWVyXy5tdXRlZCgpKSB7XG4gICAgICAgIHRoaXMucGxheWVyXy5tdXRlZChmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBwZXJjZW50IG9mIHZvbHVtZSBsZXZlbFxuICAgICAqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqICAgICAgICAgVm9sdW1lIGxldmVsIHBlcmNlbnQgYXMgYSBkZWNpbWFsIG51bWJlci5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZ2V0UGVyY2VudCA9IGZ1bmN0aW9uIGdldFBlcmNlbnQoKSB7XG4gICAgICBpZiAodGhpcy5wbGF5ZXJfLm11dGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnBsYXllcl8udm9sdW1lKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlYXNlIHZvbHVtZSBsZXZlbCBmb3Iga2V5Ym9hcmQgdXNlcnNcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uc3RlcEZvcndhcmQgPSBmdW5jdGlvbiBzdGVwRm9yd2FyZCgpIHtcbiAgICAgIHRoaXMuY2hlY2tNdXRlZCgpO1xuICAgICAgdGhpcy5wbGF5ZXJfLnZvbHVtZSh0aGlzLnBsYXllcl8udm9sdW1lKCkgKyAwLjEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNyZWFzZSB2b2x1bWUgbGV2ZWwgZm9yIGtleWJvYXJkIHVzZXJzXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnN0ZXBCYWNrID0gZnVuY3Rpb24gc3RlcEJhY2soKSB7XG4gICAgICB0aGlzLmNoZWNrTXV0ZWQoKTtcbiAgICAgIHRoaXMucGxheWVyXy52b2x1bWUodGhpcy5wbGF5ZXJfLnZvbHVtZSgpIC0gMC4xKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIEFSSUEgYWNjZXNzaWJpbGl0eSBhdHRyaWJ1dGVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAgICogICAgICAgIFRoZSBgdm9sdW1lY2hhbmdlYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIHJ1bi5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIFBsYXllciN2b2x1bWVjaGFuZ2VcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udXBkYXRlQVJJQUF0dHJpYnV0ZXMgPSBmdW5jdGlvbiB1cGRhdGVBUklBQXR0cmlidXRlcyhldmVudCkge1xuICAgICAgdmFyIGFyaWFWYWx1ZSA9IHRoaXMucGxheWVyXy5tdXRlZCgpID8gMCA6IHRoaXMudm9sdW1lQXNQZXJjZW50YWdlXygpO1xuICAgICAgdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbm93JywgYXJpYVZhbHVlKTtcbiAgICAgIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZXRleHQnLCBhcmlhVmFsdWUgKyAnJScpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBwbGF5ZXIgdm9sdW1lIGFzIGEgcGVyY2VudGFnZVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udm9sdW1lQXNQZXJjZW50YWdlXyA9IGZ1bmN0aW9uIHZvbHVtZUFzUGVyY2VudGFnZV8oKSB7XG4gICAgICByZXR1cm4gTWF0aC5yb3VuZCh0aGlzLnBsYXllcl8udm9sdW1lKCkgKiAxMDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGVuIHVzZXIgc3RhcnRzIGRyYWdnaW5nIHRoZSBWb2x1bWVCYXIsIHN0b3JlIHRoZSB2b2x1bWUgYW5kIGxpc3RlbiBmb3JcbiAgICAgKiB0aGUgZW5kIG9mIHRoZSBkcmFnLiBXaGVuIHRoZSBkcmFnIGVuZHMsIGlmIHRoZSB2b2x1bWUgd2FzIHNldCB0byB6ZXJvLFxuICAgICAqIHNldCBsYXN0Vm9sdW1lIHRvIHRoZSBzdG9yZWQgdm9sdW1lLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgc2xpZGVyYWN0aXZlXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udXBkYXRlTGFzdFZvbHVtZV8gPSBmdW5jdGlvbiB1cGRhdGVMYXN0Vm9sdW1lXygpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgdm9sdW1lQmVmb3JlRHJhZyA9IHRoaXMucGxheWVyXy52b2x1bWUoKTtcbiAgICAgIHRoaXMub25lKCdzbGlkZXJpbmFjdGl2ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF90aGlzMi5wbGF5ZXJfLnZvbHVtZSgpID09PSAwKSB7XG4gICAgICAgICAgX3RoaXMyLnBsYXllcl8ubGFzdFZvbHVtZV8odm9sdW1lQmVmb3JlRHJhZyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gVm9sdW1lQmFyO1xuICB9KFNsaWRlcik7XG4gIC8qKlxuICAgKiBEZWZhdWx0IG9wdGlvbnMgZm9yIHRoZSBgVm9sdW1lQmFyYFxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIFZvbHVtZUJhci5wcm90b3R5cGUub3B0aW9uc18gPSB7XG4gICAgY2hpbGRyZW46IFsndm9sdW1lTGV2ZWwnXSxcbiAgICBiYXJOYW1lOiAndm9sdW1lTGV2ZWwnXG4gIH07XG4gIC8qKlxuICAgKiBDYWxsIHRoZSB1cGRhdGUgZXZlbnQgZm9yIHRoaXMgU2xpZGVyIHdoZW4gdGhpcyBldmVudCBoYXBwZW5zIG9uIHRoZSBwbGF5ZXIuXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuXG4gIFZvbHVtZUJhci5wcm90b3R5cGUucGxheWVyRXZlbnQgPSAndm9sdW1lY2hhbmdlJztcbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdWb2x1bWVCYXInLCBWb2x1bWVCYXIpO1xuXG4gIC8qKlxuICAgKiBUaGUgY29tcG9uZW50IGZvciBjb250cm9sbGluZyB0aGUgdm9sdW1lIGxldmVsXG4gICAqXG4gICAqIEBleHRlbmRzIENvbXBvbmVudFxuICAgKi9cblxuICB2YXIgVm9sdW1lQ29udHJvbCA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHNMb29zZShWb2x1bWVDb250cm9sLCBfQ29tcG9uZW50KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICAgKiAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dXG4gICAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVm9sdW1lQ29udHJvbChwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMudmVydGljYWwgPSBvcHRpb25zLnZlcnRpY2FsIHx8IGZhbHNlOyAvLyBQYXNzIHRoZSB2ZXJ0aWNhbCBvcHRpb24gZG93biB0byB0aGUgVm9sdW1lQmFyIGlmXG4gICAgICAvLyB0aGUgVm9sdW1lQmFyIGlzIHR1cm5lZCBvbi5cblxuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnZvbHVtZUJhciA9PT0gJ3VuZGVmaW5lZCcgfHwgaXNQbGFpbihvcHRpb25zLnZvbHVtZUJhcikpIHtcbiAgICAgICAgb3B0aW9ucy52b2x1bWVCYXIgPSBvcHRpb25zLnZvbHVtZUJhciB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy52b2x1bWVCYXIudmVydGljYWwgPSBvcHRpb25zLnZlcnRpY2FsO1xuICAgICAgfVxuXG4gICAgICBfdGhpcyA9IF9Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7IC8vIGhpZGUgdGhpcyBjb250cm9sIGlmIHZvbHVtZSBzdXBwb3J0IGlzIG1pc3NpbmdcblxuICAgICAgY2hlY2tWb2x1bWVTdXBwb3J0KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBwbGF5ZXIpO1xuICAgICAgX3RoaXMudGhyb3R0bGVkSGFuZGxlTW91c2VNb3ZlID0gdGhyb3R0bGUoYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMuaGFuZGxlTW91c2VNb3ZlKSwgMjUpO1xuXG4gICAgICBfdGhpcy5vbignbW91c2Vkb3duJywgX3RoaXMuaGFuZGxlTW91c2VEb3duKTtcblxuICAgICAgX3RoaXMub24oJ3RvdWNoc3RhcnQnLCBfdGhpcy5oYW5kbGVNb3VzZURvd24pOyAvLyB3aGlsZSB0aGUgc2xpZGVyIGlzIGFjdGl2ZSAodGhlIG1vdXNlIGhhcyBiZWVuIHByZXNzZWQgZG93biBhbmRcbiAgICAgIC8vIGlzIGRyYWdnaW5nKSBvciBpbiBmb2N1cyB3ZSBkbyBub3Qgd2FudCB0byBoaWRlIHRoZSBWb2x1bWVCYXJcblxuXG4gICAgICBfdGhpcy5vbihfdGhpcy52b2x1bWVCYXIsIFsnZm9jdXMnLCAnc2xpZGVyYWN0aXZlJ10sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMudm9sdW1lQmFyLmFkZENsYXNzKCd2anMtc2xpZGVyLWFjdGl2ZScpO1xuXG4gICAgICAgIF90aGlzLmFkZENsYXNzKCd2anMtc2xpZGVyLWFjdGl2ZScpO1xuXG4gICAgICAgIF90aGlzLnRyaWdnZXIoJ3NsaWRlcmFjdGl2ZScpO1xuICAgICAgfSk7XG5cbiAgICAgIF90aGlzLm9uKF90aGlzLnZvbHVtZUJhciwgWydibHVyJywgJ3NsaWRlcmluYWN0aXZlJ10sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMudm9sdW1lQmFyLnJlbW92ZUNsYXNzKCd2anMtc2xpZGVyLWFjdGl2ZScpO1xuXG4gICAgICAgIF90aGlzLnJlbW92ZUNsYXNzKCd2anMtc2xpZGVyLWFjdGl2ZScpO1xuXG4gICAgICAgIF90aGlzLnRyaWdnZXIoJ3NsaWRlcmluYWN0aXZlJyk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgJ3MgRE9NIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqL1xuXG5cbiAgICB2YXIgX3Byb3RvID0gVm9sdW1lQ29udHJvbC5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCgpIHtcbiAgICAgIHZhciBvcmllbnRhdGlvbkNsYXNzID0gJ3Zqcy12b2x1bWUtaG9yaXpvbnRhbCc7XG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnNfLnZlcnRpY2FsKSB7XG4gICAgICAgIG9yaWVudGF0aW9uQ2xhc3MgPSAndmpzLXZvbHVtZS12ZXJ0aWNhbCc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJ2anMtdm9sdW1lLWNvbnRyb2wgdmpzLWNvbnRyb2wgXCIgKyBvcmllbnRhdGlvbkNsYXNzXG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGBtb3VzZWRvd25gIG9yIGB0b3VjaHN0YXJ0YCBldmVudHMgb24gdGhlIGBWb2x1bWVDb250cm9sYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIGBtb3VzZWRvd25gIG9yIGB0b3VjaHN0YXJ0YCBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGlzIGZ1bmN0aW9uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBtb3VzZWRvd25cbiAgICAgKiBAbGlzdGVucyB0b3VjaHN0YXJ0XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZU1vdXNlRG93biA9IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bihldmVudCkge1xuICAgICAgdmFyIGRvYyA9IHRoaXMuZWxfLm93bmVyRG9jdW1lbnQ7XG4gICAgICB0aGlzLm9uKGRvYywgJ21vdXNlbW92ZScsIHRoaXMudGhyb3R0bGVkSGFuZGxlTW91c2VNb3ZlKTtcbiAgICAgIHRoaXMub24oZG9jLCAndG91Y2htb3ZlJywgdGhpcy50aHJvdHRsZWRIYW5kbGVNb3VzZU1vdmUpO1xuICAgICAgdGhpcy5vbihkb2MsICdtb3VzZXVwJywgdGhpcy5oYW5kbGVNb3VzZVVwKTtcbiAgICAgIHRoaXMub24oZG9jLCAndG91Y2hlbmQnLCB0aGlzLmhhbmRsZU1vdXNlVXApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgYG1vdXNldXBgIG9yIGB0b3VjaGVuZGAgZXZlbnRzIG9uIHRoZSBgVm9sdW1lQ29udHJvbGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBgbW91c2V1cGAgb3IgYHRvdWNoZW5kYCBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGlzIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgdG91Y2hlbmRcbiAgICAgKiBAbGlzdGVucyBtb3VzZXVwXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZU1vdXNlVXAgPSBmdW5jdGlvbiBoYW5kbGVNb3VzZVVwKGV2ZW50KSB7XG4gICAgICB2YXIgZG9jID0gdGhpcy5lbF8ub3duZXJEb2N1bWVudDtcbiAgICAgIHRoaXMub2ZmKGRvYywgJ21vdXNlbW92ZScsIHRoaXMudGhyb3R0bGVkSGFuZGxlTW91c2VNb3ZlKTtcbiAgICAgIHRoaXMub2ZmKGRvYywgJ3RvdWNobW92ZScsIHRoaXMudGhyb3R0bGVkSGFuZGxlTW91c2VNb3ZlKTtcbiAgICAgIHRoaXMub2ZmKGRvYywgJ21vdXNldXAnLCB0aGlzLmhhbmRsZU1vdXNlVXApO1xuICAgICAgdGhpcy5vZmYoZG9jLCAndG91Y2hlbmQnLCB0aGlzLmhhbmRsZU1vdXNlVXApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgYG1vdXNlZG93bmAgb3IgYHRvdWNoc3RhcnRgIGV2ZW50cyBvbiB0aGUgYFZvbHVtZUNvbnRyb2xgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgYG1vdXNlZG93bmAgb3IgYHRvdWNoc3RhcnRgIGV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoaXMgZnVuY3Rpb25cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIG1vdXNlZG93blxuICAgICAqIEBsaXN0ZW5zIHRvdWNoc3RhcnRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlTW91c2VNb3ZlID0gZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlKGV2ZW50KSB7XG4gICAgICB0aGlzLnZvbHVtZUJhci5oYW5kbGVNb3VzZU1vdmUoZXZlbnQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVm9sdW1lQ29udHJvbDtcbiAgfShDb21wb25lbnQpO1xuICAvKipcbiAgICogRGVmYXVsdCBvcHRpb25zIGZvciB0aGUgYFZvbHVtZUNvbnRyb2xgXG4gICAqXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgVm9sdW1lQ29udHJvbC5wcm90b3R5cGUub3B0aW9uc18gPSB7XG4gICAgY2hpbGRyZW46IFsndm9sdW1lQmFyJ11cbiAgfTtcbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdWb2x1bWVDb250cm9sJywgVm9sdW1lQ29udHJvbCk7XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIG11dGluZyB2b2x1bWUgaXMgc3VwcG9ydGVkIGFuZCBpZiBpdCBpc24ndCBoaWRlIHRoZSBtdXRlIHRvZ2dsZVxuICAgKiBidXR0b24uXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBzZWxmXG4gICAqICAgICAgICBBIHJlZmVyZW5jZSB0byB0aGUgbXV0ZSB0b2dnbGUgYnV0dG9uXG4gICAqXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICogICAgICAgIEEgcmVmZXJlbmNlIHRvIHRoZSBwbGF5ZXJcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHZhciBjaGVja011dGVTdXBwb3J0ID0gZnVuY3Rpb24gY2hlY2tNdXRlU3VwcG9ydChzZWxmLCBwbGF5ZXIpIHtcbiAgICAvLyBoaWRlIG11dGUgdG9nZ2xlIGJ1dHRvbiBpZiBpdCdzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGN1cnJlbnQgdGVjaFxuICAgIGlmIChwbGF5ZXIudGVjaF8gJiYgIXBsYXllci50ZWNoXy5mZWF0dXJlc011dGVDb250cm9sKSB7XG4gICAgICBzZWxmLmFkZENsYXNzKCd2anMtaGlkZGVuJyk7XG4gICAgfVxuXG4gICAgc2VsZi5vbihwbGF5ZXIsICdsb2Fkc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXBsYXllci50ZWNoXy5mZWF0dXJlc011dGVDb250cm9sKSB7XG4gICAgICAgIHNlbGYuYWRkQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYucmVtb3ZlQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQSBidXR0b24gY29tcG9uZW50IGZvciBtdXRpbmcgdGhlIGF1ZGlvLlxuICAgKlxuICAgKiBAZXh0ZW5kcyBCdXR0b25cbiAgICovXG5cbiAgdmFyIE11dGVUb2dnbGUgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfQnV0dG9uKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoTXV0ZVRvZ2dsZSwgX0J1dHRvbik7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE11dGVUb2dnbGUocGxheWVyLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX0J1dHRvbi5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpczsgLy8gaGlkZSB0aGlzIGNvbnRyb2wgaWYgdm9sdW1lIHN1cHBvcnQgaXMgbWlzc2luZ1xuXG4gICAgICBjaGVja011dGVTdXBwb3J0KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBwbGF5ZXIpO1xuXG4gICAgICBfdGhpcy5vbihwbGF5ZXIsIFsnbG9hZHN0YXJ0JywgJ3ZvbHVtZWNoYW5nZSddLCBfdGhpcy51cGRhdGUpO1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1aWxkcyB0aGUgZGVmYXVsdCBET00gYGNsYXNzTmFtZWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogICAgICAgICBUaGUgRE9NIGBjbGFzc05hbWVgIGZvciB0aGlzIG9iamVjdC5cbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90byA9IE11dGVUb2dnbGUucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgICAgcmV0dXJuIFwidmpzLW11dGUtY29udHJvbCBcIiArIF9CdXR0b24ucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBnZXRzIGNhbGxlZCB3aGVuIGFuIGBNdXRlVG9nZ2xlYCBpcyBcImNsaWNrZWRcIi4gU2VlXG4gICAgICoge0BsaW5rIENsaWNrYWJsZUNvbXBvbmVudH0gZm9yIG1vcmUgZGV0YWlsZWQgaW5mb3JtYXRpb24gb24gd2hhdCBhIGNsaWNrIGNhbiBiZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IFtldmVudF1cbiAgICAgKiAgICAgICAgVGhlIGBrZXlkb3duYCwgYHRhcGAsIG9yIGBjbGlja2AgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZVxuICAgICAqICAgICAgICBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyB0YXBcbiAgICAgKiBAbGlzdGVucyBjbGlja1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XG4gICAgICB2YXIgdm9sID0gdGhpcy5wbGF5ZXJfLnZvbHVtZSgpO1xuICAgICAgdmFyIGxhc3RWb2x1bWUgPSB0aGlzLnBsYXllcl8ubGFzdFZvbHVtZV8oKTtcblxuICAgICAgaWYgKHZvbCA9PT0gMCkge1xuICAgICAgICB2YXIgdm9sdW1lVG9TZXQgPSBsYXN0Vm9sdW1lIDwgMC4xID8gMC4xIDogbGFzdFZvbHVtZTtcbiAgICAgICAgdGhpcy5wbGF5ZXJfLnZvbHVtZSh2b2x1bWVUb1NldCk7XG4gICAgICAgIHRoaXMucGxheWVyXy5tdXRlZChmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBsYXllcl8ubXV0ZWQodGhpcy5wbGF5ZXJfLm11dGVkKCkgPyBmYWxzZSA6IHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGBNdXRlVG9nZ2xlYCBidXR0b24gYmFzZWQgb24gdGhlIHN0YXRlIG9mIGB2b2x1bWVgIGFuZCBgbXV0ZWRgXG4gICAgICogb24gdGhlIHBsYXllci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IFtldmVudF1cbiAgICAgKiAgICAgICAgVGhlIHtAbGluayBQbGF5ZXIjbG9hZHN0YXJ0fSBldmVudCBpZiB0aGlzIGZ1bmN0aW9uIHdhcyBjYWxsZWRcbiAgICAgKiAgICAgICAgdGhyb3VnaCBhbiBldmVudC5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIFBsYXllciNsb2Fkc3RhcnRcbiAgICAgKiBAbGlzdGVucyBQbGF5ZXIjdm9sdW1lY2hhbmdlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShldmVudCkge1xuICAgICAgdGhpcy51cGRhdGVJY29uXygpO1xuICAgICAgdGhpcy51cGRhdGVDb250cm9sVGV4dF8oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBhcHBlYXJhbmNlIG9mIHRoZSBgTXV0ZVRvZ2dsZWAgaWNvbi5cbiAgICAgKlxuICAgICAqIFBvc3NpYmxlIHN0YXRlcyAoZ2l2ZW4gYGxldmVsYCB2YXJpYWJsZSBiZWxvdyk6XG4gICAgICogLSAwOiBjcm9zc2VkIG91dFxuICAgICAqIC0gMTogemVybyBiYXJzIG9mIHZvbHVtZVxuICAgICAqIC0gMjogb25lIGJhciBvZiB2b2x1bWVcbiAgICAgKiAtIDM6IHR3byBiYXJzIG9mIHZvbHVtZVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udXBkYXRlSWNvbl8gPSBmdW5jdGlvbiB1cGRhdGVJY29uXygpIHtcbiAgICAgIHZhciB2b2wgPSB0aGlzLnBsYXllcl8udm9sdW1lKCk7XG4gICAgICB2YXIgbGV2ZWwgPSAzOyAvLyBpbiBpT1Mgd2hlbiBhIHBsYXllciBpcyBsb2FkZWQgd2l0aCBtdXRlZCBhdHRyaWJ1dGVcbiAgICAgIC8vIGFuZCB2b2x1bWUgaXMgY2hhbmdlZCB3aXRoIGEgbmF0aXZlIG11dGUgYnV0dG9uXG4gICAgICAvLyB3ZSB3YW50IHRvIG1ha2Ugc3VyZSBtdXRlZCBzdGF0ZSBpcyB1cGRhdGVkXG5cbiAgICAgIGlmIChJU19JT1MgJiYgdGhpcy5wbGF5ZXJfLnRlY2hfICYmIHRoaXMucGxheWVyXy50ZWNoXy5lbF8pIHtcbiAgICAgICAgdGhpcy5wbGF5ZXJfLm11dGVkKHRoaXMucGxheWVyXy50ZWNoXy5lbF8ubXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICBpZiAodm9sID09PSAwIHx8IHRoaXMucGxheWVyXy5tdXRlZCgpKSB7XG4gICAgICAgIGxldmVsID0gMDtcbiAgICAgIH0gZWxzZSBpZiAodm9sIDwgMC4zMykge1xuICAgICAgICBsZXZlbCA9IDE7XG4gICAgICB9IGVsc2UgaWYgKHZvbCA8IDAuNjcpIHtcbiAgICAgICAgbGV2ZWwgPSAyO1xuICAgICAgfSAvLyBUT0RPIGltcHJvdmUgbXV0ZWQgaWNvbiBjbGFzc2VzXG5cblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbF8sIFwidmpzLXZvbC1cIiArIGkpO1xuICAgICAgfVxuXG4gICAgICBhZGRDbGFzcyh0aGlzLmVsXywgXCJ2anMtdm9sLVwiICsgbGV2ZWwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiBgbXV0ZWRgIGhhcyBjaGFuZ2VkIG9uIHRoZSBwbGF5ZXIsIHVwZGF0ZSB0aGUgY29udHJvbCB0ZXh0XG4gICAgICogKGB0aXRsZWAgYXR0cmlidXRlIG9uIGB2anMtbXV0ZS1jb250cm9sYCBlbGVtZW50IGFuZCBjb250ZW50IG9mXG4gICAgICogYHZqcy1jb250cm9sLXRleHRgIGVsZW1lbnQpLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udXBkYXRlQ29udHJvbFRleHRfID0gZnVuY3Rpb24gdXBkYXRlQ29udHJvbFRleHRfKCkge1xuICAgICAgdmFyIHNvdW5kT2ZmID0gdGhpcy5wbGF5ZXJfLm11dGVkKCkgfHwgdGhpcy5wbGF5ZXJfLnZvbHVtZSgpID09PSAwO1xuICAgICAgdmFyIHRleHQgPSBzb3VuZE9mZiA/ICdVbm11dGUnIDogJ011dGUnO1xuXG4gICAgICBpZiAodGhpcy5jb250cm9sVGV4dCgpICE9PSB0ZXh0KSB7XG4gICAgICAgIHRoaXMuY29udHJvbFRleHQodGV4dCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBNdXRlVG9nZ2xlO1xuICB9KEJ1dHRvbik7XG4gIC8qKlxuICAgKiBUaGUgdGV4dCB0aGF0IHNob3VsZCBkaXNwbGF5IG92ZXIgdGhlIGBNdXRlVG9nZ2xlYHMgY29udHJvbHMuIEFkZGVkIGZvciBsb2NhbGl6YXRpb24uXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgTXV0ZVRvZ2dsZS5wcm90b3R5cGUuY29udHJvbFRleHRfID0gJ011dGUnO1xuICBDb21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ011dGVUb2dnbGUnLCBNdXRlVG9nZ2xlKTtcblxuICAvKipcbiAgICogQSBDb21wb25lbnQgdG8gY29udGFpbiB0aGUgTXV0ZVRvZ2dsZSBhbmQgVm9sdW1lQ29udHJvbCBzbyB0aGF0XG4gICAqIHRoZXkgY2FuIHdvcmsgdG9nZXRoZXIuXG4gICAqXG4gICAqIEBleHRlbmRzIENvbXBvbmVudFxuICAgKi9cblxuICB2YXIgVm9sdW1lUGFuZWwgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoVm9sdW1lUGFuZWwsIF9Db21wb25lbnQpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV1cbiAgICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBWb2x1bWVQYW5lbChwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5pbmxpbmUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG9wdGlvbnMuaW5saW5lID0gb3B0aW9ucy5pbmxpbmU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zLmlubGluZSA9IHRydWU7XG4gICAgICB9IC8vIHBhc3MgdGhlIGlubGluZSBvcHRpb24gZG93biB0byB0aGUgVm9sdW1lQ29udHJvbCBhcyB2ZXJ0aWNhbCBpZlxuICAgICAgLy8gdGhlIFZvbHVtZUNvbnRyb2wgaXMgb24uXG5cblxuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnZvbHVtZUNvbnRyb2wgPT09ICd1bmRlZmluZWQnIHx8IGlzUGxhaW4ob3B0aW9ucy52b2x1bWVDb250cm9sKSkge1xuICAgICAgICBvcHRpb25zLnZvbHVtZUNvbnRyb2wgPSBvcHRpb25zLnZvbHVtZUNvbnRyb2wgfHwge307XG4gICAgICAgIG9wdGlvbnMudm9sdW1lQ29udHJvbC52ZXJ0aWNhbCA9ICFvcHRpb25zLmlubGluZTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMgPSBfQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuXG4gICAgICBfdGhpcy5vbihwbGF5ZXIsIFsnbG9hZHN0YXJ0J10sIF90aGlzLnZvbHVtZVBhbmVsU3RhdGVfKTsgLy8gd2hpbGUgdGhlIHNsaWRlciBpcyBhY3RpdmUgKHRoZSBtb3VzZSBoYXMgYmVlbiBwcmVzc2VkIGRvd24gYW5kXG4gICAgICAvLyBpcyBkcmFnZ2luZykgd2UgZG8gbm90IHdhbnQgdG8gaGlkZSB0aGUgVm9sdW1lQmFyXG5cblxuICAgICAgX3RoaXMub24oX3RoaXMudm9sdW1lQ29udHJvbCwgWydzbGlkZXJhY3RpdmUnXSwgX3RoaXMuc2xpZGVyQWN0aXZlXyk7XG5cbiAgICAgIF90aGlzLm9uKF90aGlzLnZvbHVtZUNvbnRyb2wsIFsnc2xpZGVyaW5hY3RpdmUnXSwgX3RoaXMuc2xpZGVySW5hY3RpdmVfKTtcblxuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgdmpzLXNsaWRlci1hY3RpdmUgY2xhc3MgdG8gdGhlIFZvbHVtZVBhbmVsXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBWb2x1bWVDb250cm9sI3NsaWRlcmFjdGl2ZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBWb2x1bWVQYW5lbC5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uc2xpZGVyQWN0aXZlXyA9IGZ1bmN0aW9uIHNsaWRlckFjdGl2ZV8oKSB7XG4gICAgICB0aGlzLmFkZENsYXNzKCd2anMtc2xpZGVyLWFjdGl2ZScpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHZqcy1zbGlkZXItYWN0aXZlIGNsYXNzIHRvIHRoZSBWb2x1bWVQYW5lbFxuICAgICAqXG4gICAgICogQGxpc3RlbnMgVm9sdW1lQ29udHJvbCNzbGlkZXJpbmFjdGl2ZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnNsaWRlckluYWN0aXZlXyA9IGZ1bmN0aW9uIHNsaWRlckluYWN0aXZlXygpIHtcbiAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1zbGlkZXItYWN0aXZlJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdmpzLWhpZGRlbiBvciB2anMtbXV0ZS10b2dnbGUtb25seSB0byB0aGUgVm9sdW1lUGFuZWxcbiAgICAgKiBkZXBlbmRpbmcgb24gTXV0ZVRvZ2dsZSBhbmQgVm9sdW1lQ29udHJvbCBzdGF0ZVxuICAgICAqXG4gICAgICogQGxpc3RlbnMgUGxheWVyI2xvYWRzdGFydFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnZvbHVtZVBhbmVsU3RhdGVfID0gZnVuY3Rpb24gdm9sdW1lUGFuZWxTdGF0ZV8oKSB7XG4gICAgICAvLyBoaWRlIHZvbHVtZSBwYW5lbCBpZiBuZWl0aGVyIHZvbHVtZSBjb250cm9sIG9yIG11dGUgdG9nZ2xlXG4gICAgICAvLyBhcmUgZGlzcGxheWVkXG4gICAgICBpZiAodGhpcy52b2x1bWVDb250cm9sLmhhc0NsYXNzKCd2anMtaGlkZGVuJykgJiYgdGhpcy5tdXRlVG9nZ2xlLmhhc0NsYXNzKCd2anMtaGlkZGVuJykpIHtcbiAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWhpZGRlbicpO1xuICAgICAgfSAvLyBpZiBvbmx5IG11dGUgdG9nZ2xlIGlzIHZpc2libGUgd2UgZG9uJ3Qgd2FudFxuICAgICAgLy8gdm9sdW1lIHBhbmVsIGV4cGFuZGluZyB3aGVuIGhvdmVyZWQgb3IgYWN0aXZlXG5cblxuICAgICAgaWYgKHRoaXMudm9sdW1lQ29udHJvbC5oYXNDbGFzcygndmpzLWhpZGRlbicpICYmICF0aGlzLm11dGVUb2dnbGUuaGFzQ2xhc3MoJ3Zqcy1oaWRkZW4nKSkge1xuICAgICAgICB0aGlzLmFkZENsYXNzKCd2anMtbXV0ZS10b2dnbGUtb25seScpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgJ3MgRE9NIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsKCkge1xuICAgICAgdmFyIG9yaWVudGF0aW9uQ2xhc3MgPSAndmpzLXZvbHVtZS1wYW5lbC1ob3Jpem9udGFsJztcblxuICAgICAgaWYgKCF0aGlzLm9wdGlvbnNfLmlubGluZSkge1xuICAgICAgICBvcmllbnRhdGlvbkNsYXNzID0gJ3Zqcy12b2x1bWUtcGFuZWwtdmVydGljYWwnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX0NvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgICAgICBjbGFzc05hbWU6IFwidmpzLXZvbHVtZS1wYW5lbCB2anMtY29udHJvbCBcIiArIG9yaWVudGF0aW9uQ2xhc3NcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gVm9sdW1lUGFuZWw7XG4gIH0oQ29tcG9uZW50KTtcbiAgLyoqXG4gICAqIERlZmF1bHQgb3B0aW9ucyBmb3IgdGhlIGBWb2x1bWVDb250cm9sYFxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIFZvbHVtZVBhbmVsLnByb3RvdHlwZS5vcHRpb25zXyA9IHtcbiAgICBjaGlsZHJlbjogWydtdXRlVG9nZ2xlJywgJ3ZvbHVtZUNvbnRyb2wnXVxuICB9O1xuICBDb21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ1ZvbHVtZVBhbmVsJywgVm9sdW1lUGFuZWwpO1xuXG4gIC8qKlxuICAgKiBUaGUgTWVudSBjb21wb25lbnQgaXMgdXNlZCB0byBidWlsZCBwb3B1cCBtZW51cywgaW5jbHVkaW5nIHN1YnRpdGxlIGFuZFxuICAgKiBjYXB0aW9ucyBzZWxlY3Rpb24gbWVudXMuXG4gICAqXG4gICAqIEBleHRlbmRzIENvbXBvbmVudFxuICAgKi9cblxuICB2YXIgTWVudSA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHNMb29zZShNZW51LCBfQ29tcG9uZW50KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgICAqICAgICAgICB0aGUgcGxheWVyIHRoYXQgdGhpcyBjb21wb25lbnQgc2hvdWxkIGF0dGFjaCB0b1xuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBPYmplY3Qgb2Ygb3B0aW9uIG5hbWVzIGFuZCB2YWx1ZXNcbiAgICAgKlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1lbnUocGxheWVyLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX0NvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcblxuICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgX3RoaXMubWVudUJ1dHRvbl8gPSBvcHRpb25zLm1lbnVCdXR0b247XG4gICAgICB9XG5cbiAgICAgIF90aGlzLmZvY3VzZWRDaGlsZF8gPSAtMTtcblxuICAgICAgX3RoaXMub24oJ2tleWRvd24nLCBfdGhpcy5oYW5kbGVLZXlQcmVzcyk7IC8vIEFsbCB0aGUgbWVudSBpdGVtIGluc3RhbmNlcyBzaGFyZSB0aGUgc2FtZSBibHVyIGhhbmRsZXIgcHJvdmlkZWQgYnkgdGhlIG1lbnUgY29udGFpbmVyLlxuXG5cbiAgICAgIF90aGlzLmJvdW5kSGFuZGxlQmx1cl8gPSBiaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBfdGhpcy5oYW5kbGVCbHVyKTtcbiAgICAgIF90aGlzLmJvdW5kSGFuZGxlVGFwQ2xpY2tfID0gYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMuaGFuZGxlVGFwQ2xpY2spO1xuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgZXZlbnQgbGlzdGVuZXJzIHRvIHRoZSB7QGxpbmsgTWVudUl0ZW19LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNvbXBvbmVudFxuICAgICAqICAgICAgICBUaGUgaW5zdGFuY2Ugb2YgdGhlIGBNZW51SXRlbWAgdG8gYWRkIGxpc3RlbmVycyB0by5cbiAgICAgKlxuICAgICAqL1xuXG5cbiAgICB2YXIgX3Byb3RvID0gTWVudS5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uYWRkRXZlbnRMaXN0ZW5lckZvckl0ZW0gPSBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyRm9ySXRlbShjb21wb25lbnQpIHtcbiAgICAgIGlmICghKGNvbXBvbmVudCBpbnN0YW5jZW9mIENvbXBvbmVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9uKGNvbXBvbmVudCwgJ2JsdXInLCB0aGlzLmJvdW5kSGFuZGxlQmx1cl8pO1xuICAgICAgdGhpcy5vbihjb21wb25lbnQsIFsndGFwJywgJ2NsaWNrJ10sIHRoaXMuYm91bmRIYW5kbGVUYXBDbGlja18pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzIGZyb20gdGhlIHtAbGluayBNZW51SXRlbX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29tcG9uZW50XG4gICAgICogICAgICAgIFRoZSBpbnN0YW5jZSBvZiB0aGUgYE1lbnVJdGVtYCB0byByZW1vdmUgbGlzdGVuZXJzLlxuICAgICAqXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnJlbW92ZUV2ZW50TGlzdGVuZXJGb3JJdGVtID0gZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lckZvckl0ZW0oY29tcG9uZW50KSB7XG4gICAgICBpZiAoIShjb21wb25lbnQgaW5zdGFuY2VvZiBDb21wb25lbnQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5vZmYoY29tcG9uZW50LCAnYmx1cicsIHRoaXMuYm91bmRIYW5kbGVCbHVyXyk7XG4gICAgICB0aGlzLm9mZihjb21wb25lbnQsIFsndGFwJywgJ2NsaWNrJ10sIHRoaXMuYm91bmRIYW5kbGVUYXBDbGlja18pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCBpbmRpcmVjdGx5IHdoZW4gdGhlIGNvbXBvbmVudCBoYXMgYmVlbiBhZGRlZFxuICAgICAqIGJlZm9yZSB0aGUgY29tcG9uZW50IGFkZHMgdG8gdGhlIG5ldyBtZW51IGluc3RhbmNlIGJ5IGBhZGRJdGVtYC5cbiAgICAgKiBJbiB0aGlzIGNhc2UsIHRoZSBvcmlnaW5hbCBtZW51IGluc3RhbmNlIHdpbGwgcmVtb3ZlIHRoZSBjb21wb25lbnRcbiAgICAgKiBieSBjYWxsaW5nIGByZW1vdmVDaGlsZGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29tcG9uZW50XG4gICAgICogICAgICAgIFRoZSBpbnN0YW5jZSBvZiB0aGUgYE1lbnVJdGVtYFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5yZW1vdmVDaGlsZCA9IGZ1bmN0aW9uIHJlbW92ZUNoaWxkKGNvbXBvbmVudCkge1xuICAgICAgaWYgKHR5cGVvZiBjb21wb25lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbXBvbmVudCA9IHRoaXMuZ2V0Q2hpbGQoY29tcG9uZW50KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyRm9ySXRlbShjb21wb25lbnQpO1xuXG4gICAgICBfQ29tcG9uZW50LnByb3RvdHlwZS5yZW1vdmVDaGlsZC5jYWxsKHRoaXMsIGNvbXBvbmVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIHtAbGluayBNZW51SXRlbX0gdG8gdGhlIG1lbnUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdHxzdHJpbmd9IGNvbXBvbmVudFxuICAgICAqICAgICAgICBUaGUgbmFtZSBvciBpbnN0YW5jZSBvZiB0aGUgYE1lbnVJdGVtYCB0byBhZGQuXG4gICAgICpcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uYWRkSXRlbSA9IGZ1bmN0aW9uIGFkZEl0ZW0oY29tcG9uZW50KSB7XG4gICAgICB2YXIgY2hpbGRDb21wb25lbnQgPSB0aGlzLmFkZENoaWxkKGNvbXBvbmVudCk7XG5cbiAgICAgIGlmIChjaGlsZENvbXBvbmVudCkge1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJGb3JJdGVtKGNoaWxkQ29tcG9uZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBgTWVudWBzIERPTSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgKiAgICAgICAgIHRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSgpIHtcbiAgICAgIHZhciBjb250ZW50RWxUeXBlID0gdGhpcy5vcHRpb25zXy5jb250ZW50RWxUeXBlIHx8ICd1bCc7XG4gICAgICB0aGlzLmNvbnRlbnRFbF8gPSBjcmVhdGVFbChjb250ZW50RWxUeXBlLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ3Zqcy1tZW51LWNvbnRlbnQnXG4gICAgICB9KTtcbiAgICAgIHRoaXMuY29udGVudEVsXy5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnbWVudScpO1xuXG4gICAgICB2YXIgZWwgPSBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICAgIGFwcGVuZDogdGhpcy5jb250ZW50RWxfLFxuICAgICAgICBjbGFzc05hbWU6ICd2anMtbWVudSdcbiAgICAgIH0pO1xuXG4gICAgICBlbC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnRFbF8pOyAvLyBQcmV2ZW50IGNsaWNrcyBmcm9tIGJ1YmJsaW5nIHVwLiBOZWVkZWQgZm9yIE1lbnUgQnV0dG9ucyxcbiAgICAgIC8vIHdoZXJlIGEgY2xpY2sgb24gdGhlIHBhcmVudCBpcyBzaWduaWZpY2FudFxuXG4gICAgICBvbihlbCwgJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZWw7XG4gICAgfTtcblxuICAgIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgIHRoaXMuY29udGVudEVsXyA9IG51bGw7XG4gICAgICB0aGlzLmJvdW5kSGFuZGxlQmx1cl8gPSBudWxsO1xuICAgICAgdGhpcy5ib3VuZEhhbmRsZVRhcENsaWNrXyA9IG51bGw7XG5cbiAgICAgIF9Db21wb25lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gYSBgTWVudUl0ZW1gIGxvc2VzIGZvY3VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgVGhlIGBibHVyYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIGJsdXJcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlQmx1ciA9IGZ1bmN0aW9uIGhhbmRsZUJsdXIoZXZlbnQpIHtcbiAgICAgIHZhciByZWxhdGVkVGFyZ2V0ID0gZXZlbnQucmVsYXRlZFRhcmdldCB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50OyAvLyBDbG9zZSBtZW51IHBvcHVwIHdoZW4gYSB1c2VyIGNsaWNrcyBvdXRzaWRlIHRoZSBtZW51XG5cbiAgICAgIGlmICghdGhpcy5jaGlsZHJlbigpLnNvbWUoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQuZWwoKSA9PT0gcmVsYXRlZFRhcmdldDtcbiAgICAgIH0pKSB7XG4gICAgICAgIHZhciBidG4gPSB0aGlzLm1lbnVCdXR0b25fO1xuXG4gICAgICAgIGlmIChidG4gJiYgYnRuLmJ1dHRvblByZXNzZWRfICYmIHJlbGF0ZWRUYXJnZXQgIT09IGJ0bi5lbCgpLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICBidG4udW5wcmVzc0J1dHRvbigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aGVuIGEgYE1lbnVJdGVtYCBnZXRzIGNsaWNrZWQgb3IgdGFwcGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgVGhlIGBjbGlja2Agb3IgYHRhcGAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZSBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBjbGljayx0YXBcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlVGFwQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVUYXBDbGljayhldmVudCkge1xuICAgICAgLy8gVW5wcmVzcyB0aGUgYXNzb2NpYXRlZCBNZW51QnV0dG9uLCBhbmQgbW92ZSBmb2N1cyBiYWNrIHRvIGl0XG4gICAgICBpZiAodGhpcy5tZW51QnV0dG9uXykge1xuICAgICAgICB0aGlzLm1lbnVCdXR0b25fLnVucHJlc3NCdXR0b24oKTtcbiAgICAgICAgdmFyIGNoaWxkQ29tcG9uZW50cyA9IHRoaXMuY2hpbGRyZW4oKTtcblxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoY2hpbGRDb21wb25lbnRzKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmb3VuZENvbXBvbmVudCA9IGNoaWxkQ29tcG9uZW50cy5maWx0ZXIoZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgICAgIHJldHVybiBjb21wb25lbnQuZWwoKSA9PT0gZXZlbnQudGFyZ2V0O1xuICAgICAgICB9KVswXTtcblxuICAgICAgICBpZiAoIWZvdW5kQ29tcG9uZW50KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIGRvbid0IGZvY3VzIG1lbnUgYnV0dG9uIGlmIGl0ZW0gaXMgYSBjYXB0aW9uIHNldHRpbmdzIGl0ZW1cbiAgICAgICAgLy8gYmVjYXVzZSBmb2N1cyB3aWxsIG1vdmUgZWxzZXdoZXJlXG5cblxuICAgICAgICBpZiAoZm91bmRDb21wb25lbnQubmFtZSgpICE9PSAnQ2FwdGlvblNldHRpbmdzTWVudUl0ZW0nKSB7XG4gICAgICAgICAgdGhpcy5tZW51QnV0dG9uXy5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBhIGBrZXlkb3duYCBldmVudCBvbiB0aGlzIG1lbnUuIFRoaXMgbGlzdGVuZXIgaXMgYWRkZWQgaW4gdGhlIGNvbnN0cnVjdG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgQSBga2V5ZG93bmAgZXZlbnQgdGhhdCBoYXBwZW5lZCBvbiB0aGUgbWVudS5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIGtleWRvd25cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlS2V5UHJlc3MgPSBmdW5jdGlvbiBoYW5kbGVLZXlQcmVzcyhldmVudCkge1xuICAgICAgLy8gTGVmdCBhbmQgRG93biBBcnJvd3NcbiAgICAgIGlmIChrZXljb2RlLmlzRXZlbnRLZXkoZXZlbnQsICdMZWZ0JykgfHwga2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnRG93bicpKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuc3RlcEZvcndhcmQoKTsgLy8gVXAgYW5kIFJpZ2h0IEFycm93c1xuICAgICAgfSBlbHNlIGlmIChrZXljb2RlLmlzRXZlbnRLZXkoZXZlbnQsICdSaWdodCcpIHx8IGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ1VwJykpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5zdGVwQmFjaygpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb3ZlIHRvIG5leHQgKGxvd2VyKSBtZW51IGl0ZW0gZm9yIGtleWJvYXJkIHVzZXJzLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zdGVwRm9yd2FyZCA9IGZ1bmN0aW9uIHN0ZXBGb3J3YXJkKCkge1xuICAgICAgdmFyIHN0ZXBDaGlsZCA9IDA7XG5cbiAgICAgIGlmICh0aGlzLmZvY3VzZWRDaGlsZF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdGVwQ2hpbGQgPSB0aGlzLmZvY3VzZWRDaGlsZF8gKyAxO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmZvY3VzKHN0ZXBDaGlsZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vdmUgdG8gcHJldmlvdXMgKGhpZ2hlcikgbWVudSBpdGVtIGZvciBrZXlib2FyZCB1c2Vycy5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uc3RlcEJhY2sgPSBmdW5jdGlvbiBzdGVwQmFjaygpIHtcbiAgICAgIHZhciBzdGVwQ2hpbGQgPSAwO1xuXG4gICAgICBpZiAodGhpcy5mb2N1c2VkQ2hpbGRfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3RlcENoaWxkID0gdGhpcy5mb2N1c2VkQ2hpbGRfIC0gMTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5mb2N1cyhzdGVwQ2hpbGQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgZm9jdXMgb24gYSB7QGxpbmsgTWVudUl0ZW19IGluIHRoZSBgTWVudWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdHxzdHJpbmd9IFtpdGVtPTBdXG4gICAgICogICAgICAgIEluZGV4IG9mIGNoaWxkIGl0ZW0gc2V0IGZvY3VzIG9uLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5mb2N1cyA9IGZ1bmN0aW9uIGZvY3VzKGl0ZW0pIHtcbiAgICAgIGlmIChpdGVtID09PSB2b2lkIDApIHtcbiAgICAgICAgaXRlbSA9IDA7XG4gICAgICB9XG5cbiAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW4oKS5zbGljZSgpO1xuICAgICAgdmFyIGhhdmVUaXRsZSA9IGNoaWxkcmVuLmxlbmd0aCAmJiBjaGlsZHJlblswXS5jbGFzc05hbWUgJiYgL3Zqcy1tZW51LXRpdGxlLy50ZXN0KGNoaWxkcmVuWzBdLmNsYXNzTmFtZSk7XG5cbiAgICAgIGlmIChoYXZlVGl0bGUpIHtcbiAgICAgICAgY2hpbGRyZW4uc2hpZnQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKGl0ZW0gPCAwKSB7XG4gICAgICAgICAgaXRlbSA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbSA+PSBjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICBpdGVtID0gY2hpbGRyZW4ubGVuZ3RoIC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZm9jdXNlZENoaWxkXyA9IGl0ZW07XG4gICAgICAgIGNoaWxkcmVuW2l0ZW1dLmVsXy5mb2N1cygpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gTWVudTtcbiAgfShDb21wb25lbnQpO1xuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnTWVudScsIE1lbnUpO1xuXG4gIC8qKlxuICAgKiBBIGBNZW51QnV0dG9uYCBjbGFzcyBmb3IgYW55IHBvcHVwIHtAbGluayBNZW51fS5cbiAgICpcbiAgICogQGV4dGVuZHMgQ29tcG9uZW50XG4gICAqL1xuXG4gIHZhciBNZW51QnV0dG9uID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAgIF9pbmhlcml0c0xvb3NlKE1lbnVCdXR0b24sIF9Db21wb25lbnQpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV1cbiAgICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNZW51QnV0dG9uKHBsYXllciwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMgPSBfQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgICAgX3RoaXMubWVudUJ1dHRvbl8gPSBuZXcgQnV0dG9uKHBsYXllciwgb3B0aW9ucyk7XG5cbiAgICAgIF90aGlzLm1lbnVCdXR0b25fLmNvbnRyb2xUZXh0KF90aGlzLmNvbnRyb2xUZXh0Xyk7XG5cbiAgICAgIF90aGlzLm1lbnVCdXR0b25fLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGFzcG9wdXAnLCAndHJ1ZScpOyAvLyBBZGQgYnVpbGRDU1NDbGFzcyB2YWx1ZXMgdG8gdGhlIGJ1dHRvbiwgbm90IHRoZSB3cmFwcGVyXG5cblxuICAgICAgdmFyIGJ1dHRvbkNsYXNzID0gQnV0dG9uLnByb3RvdHlwZS5idWlsZENTU0NsYXNzKCk7XG4gICAgICBfdGhpcy5tZW51QnV0dG9uXy5lbF8uY2xhc3NOYW1lID0gX3RoaXMuYnVpbGRDU1NDbGFzcygpICsgJyAnICsgYnV0dG9uQ2xhc3M7XG5cbiAgICAgIF90aGlzLm1lbnVCdXR0b25fLnJlbW92ZUNsYXNzKCd2anMtY29udHJvbCcpO1xuXG4gICAgICBfdGhpcy5hZGRDaGlsZChfdGhpcy5tZW51QnV0dG9uXyk7XG5cbiAgICAgIF90aGlzLnVwZGF0ZSgpO1xuXG4gICAgICBfdGhpcy5lbmFibGVkXyA9IHRydWU7XG5cbiAgICAgIF90aGlzLm9uKF90aGlzLm1lbnVCdXR0b25fLCAndGFwJywgX3RoaXMuaGFuZGxlQ2xpY2spO1xuXG4gICAgICBfdGhpcy5vbihfdGhpcy5tZW51QnV0dG9uXywgJ2NsaWNrJywgX3RoaXMuaGFuZGxlQ2xpY2spO1xuXG4gICAgICBfdGhpcy5vbihfdGhpcy5tZW51QnV0dG9uXywgJ2ZvY3VzJywgX3RoaXMuaGFuZGxlRm9jdXMpO1xuXG4gICAgICBfdGhpcy5vbihfdGhpcy5tZW51QnV0dG9uXywgJ2JsdXInLCBfdGhpcy5oYW5kbGVCbHVyKTtcblxuICAgICAgX3RoaXMub24oX3RoaXMubWVudUJ1dHRvbl8sICdtb3VzZWVudGVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5tZW51LnNob3coKTtcbiAgICAgIH0pO1xuXG4gICAgICBfdGhpcy5vbigna2V5ZG93bicsIF90aGlzLmhhbmRsZVN1Ym1lbnVLZXlQcmVzcyk7XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBtZW51IGJhc2VkIG9uIHRoZSBjdXJyZW50IHN0YXRlIG9mIGl0cyBpdGVtcy5cbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90byA9IE1lbnVCdXR0b24ucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgIHZhciBtZW51ID0gdGhpcy5jcmVhdGVNZW51KCk7XG5cbiAgICAgIGlmICh0aGlzLm1lbnUpIHtcbiAgICAgICAgdGhpcy5tZW51LmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5yZW1vdmVDaGlsZCh0aGlzLm1lbnUpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1lbnUgPSBtZW51O1xuICAgICAgdGhpcy5hZGRDaGlsZChtZW51KTtcbiAgICAgIC8qKlxuICAgICAgICogVHJhY2sgdGhlIHN0YXRlIG9mIHRoZSBtZW51IGJ1dHRvblxuICAgICAgICpcbiAgICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqL1xuXG4gICAgICB0aGlzLmJ1dHRvblByZXNzZWRfID0gZmFsc2U7XG4gICAgICB0aGlzLm1lbnVCdXR0b25fLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcblxuICAgICAgaWYgKHRoaXMuaXRlbXMgJiYgdGhpcy5pdGVtcy5sZW5ndGggPD0gdGhpcy5oaWRlVGhyZXNob2xkXykge1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIG1lbnUgYW5kIGFkZCBhbGwgaXRlbXMgdG8gaXQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtNZW51fVxuICAgICAqICAgICAgICAgVGhlIGNvbnN0cnVjdGVkIG1lbnVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3JlYXRlTWVudSA9IGZ1bmN0aW9uIGNyZWF0ZU1lbnUoKSB7XG4gICAgICB2YXIgbWVudSA9IG5ldyBNZW51KHRoaXMucGxheWVyXywge1xuICAgICAgICBtZW51QnV0dG9uOiB0aGlzXG4gICAgICB9KTtcbiAgICAgIC8qKlxuICAgICAgICogSGlkZSB0aGUgbWVudSBpZiB0aGUgbnVtYmVyIG9mIGl0ZW1zIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGlzIHRocmVzaG9sZC4gVGhpcyBkZWZhdWx0c1xuICAgICAgICogdG8gMCBhbmQgd2hlbmV2ZXIgd2UgYWRkIGl0ZW1zIHdoaWNoIGNhbiBiZSBoaWRkZW4gdG8gdGhlIG1lbnUgd2UnbGwgaW5jcmVtZW50IGl0LiBXZSBsaXN0XG4gICAgICAgKiBpdCBoZXJlIGJlY2F1c2UgZXZlcnkgdGltZSB3ZSBydW4gYGNyZWF0ZU1lbnVgIHdlIG5lZWQgdG8gcmVzZXQgdGhlIHZhbHVlLlxuICAgICAgICpcbiAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAgICAgKi9cblxuICAgICAgdGhpcy5oaWRlVGhyZXNob2xkXyA9IDA7IC8vIEFkZCBhIHRpdGxlIGxpc3QgaXRlbSB0byB0aGUgdG9wXG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnNfLnRpdGxlKSB7XG4gICAgICAgIHZhciB0aXRsZUVsID0gY3JlYXRlRWwoJ2xpJywge1xuICAgICAgICAgIGNsYXNzTmFtZTogJ3Zqcy1tZW51LXRpdGxlJyxcbiAgICAgICAgICBpbm5lckhUTUw6IHRvVGl0bGVDYXNlKHRoaXMub3B0aW9uc18udGl0bGUpLFxuICAgICAgICAgIHRhYkluZGV4OiAtMVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5oaWRlVGhyZXNob2xkXyArPSAxO1xuICAgICAgICB2YXIgdGl0bGVDb21wb25lbnQgPSBuZXcgQ29tcG9uZW50KHRoaXMucGxheWVyXywge1xuICAgICAgICAgIGVsOiB0aXRsZUVsXG4gICAgICAgIH0pO1xuICAgICAgICBtZW51LmFkZEl0ZW0odGl0bGVDb21wb25lbnQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLml0ZW1zID0gdGhpcy5jcmVhdGVJdGVtcygpO1xuXG4gICAgICBpZiAodGhpcy5pdGVtcykge1xuICAgICAgICAvLyBBZGQgbWVudSBpdGVtcyB0byB0aGUgbWVudVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBtZW51LmFkZEl0ZW0odGhpcy5pdGVtc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG1lbnU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgbGlzdCBvZiBtZW51IGl0ZW1zLiBTcGVjaWZpYyB0byBlYWNoIHN1YmNsYXNzLlxuICAgICAqXG4gICAgICogQGFic3RyYWN0XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNyZWF0ZUl0ZW1zID0gZnVuY3Rpb24gY3JlYXRlSXRlbXMoKSB7fVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgYE1lbnVCdXR0b25zYHMgRE9NIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCBnZXRzIGNyZWF0ZWQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwkJDEoKSB7XG4gICAgICByZXR1cm4gX0NvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgICAgICBjbGFzc05hbWU6IHRoaXMuYnVpbGRXcmFwcGVyQ1NTQ2xhc3MoKVxuICAgICAgfSwge30pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbGxvdyBzdWIgY29tcG9uZW50cyB0byBzdGFjayBDU1MgY2xhc3MgbmFtZXMgZm9yIHRoZSB3cmFwcGVyIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKiAgICAgICAgIFRoZSBjb25zdHJ1Y3RlZCB3cmFwcGVyIERPTSBgY2xhc3NOYW1lYFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5idWlsZFdyYXBwZXJDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkV3JhcHBlckNTU0NsYXNzKCkge1xuICAgICAgdmFyIG1lbnVCdXR0b25DbGFzcyA9ICd2anMtbWVudS1idXR0b24nOyAvLyBJZiB0aGUgaW5saW5lIG9wdGlvbiBpcyBwYXNzZWQsIHdlIHdhbnQgdG8gdXNlIGRpZmZlcmVudCBzdHlsZXMgYWx0b2dldGhlci5cblxuICAgICAgaWYgKHRoaXMub3B0aW9uc18uaW5saW5lID09PSB0cnVlKSB7XG4gICAgICAgIG1lbnVCdXR0b25DbGFzcyArPSAnLWlubGluZSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtZW51QnV0dG9uQ2xhc3MgKz0gJy1wb3B1cCc7XG4gICAgICB9IC8vIFRPRE86IEZpeCB0aGUgQ1NTIHNvIHRoYXQgdGhpcyBpc24ndCBuZWNlc3NhcnlcblxuXG4gICAgICB2YXIgYnV0dG9uQ2xhc3MgPSBCdXR0b24ucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MoKTtcbiAgICAgIHJldHVybiBcInZqcy1tZW51LWJ1dHRvbiBcIiArIG1lbnVCdXR0b25DbGFzcyArIFwiIFwiICsgYnV0dG9uQ2xhc3MgKyBcIiBcIiArIF9Db21wb25lbnQucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVpbGRzIHRoZSBkZWZhdWx0IERPTSBgY2xhc3NOYW1lYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKiAgICAgICAgIFRoZSBET00gYGNsYXNzTmFtZWAgZm9yIHRoaXMgb2JqZWN0LlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRDU1NDbGFzcygpIHtcbiAgICAgIHZhciBtZW51QnV0dG9uQ2xhc3MgPSAndmpzLW1lbnUtYnV0dG9uJzsgLy8gSWYgdGhlIGlubGluZSBvcHRpb24gaXMgcGFzc2VkLCB3ZSB3YW50IHRvIHVzZSBkaWZmZXJlbnQgc3R5bGVzIGFsdG9nZXRoZXIuXG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnNfLmlubGluZSA9PT0gdHJ1ZSkge1xuICAgICAgICBtZW51QnV0dG9uQ2xhc3MgKz0gJy1pbmxpbmUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWVudUJ1dHRvbkNsYXNzICs9ICctcG9wdXAnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gXCJ2anMtbWVudS1idXR0b24gXCIgKyBtZW51QnV0dG9uQ2xhc3MgKyBcIiBcIiArIF9Db21wb25lbnQucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IG9yIHNldCB0aGUgbG9jYWxpemVkIGNvbnRyb2wgdGV4dCB0aGF0IHdpbGwgYmUgdXNlZCBmb3IgYWNjZXNzaWJpbGl0eS5cbiAgICAgKlxuICAgICAqID4gTk9URTogVGhpcyB3aWxsIGNvbWUgZnJvbSB0aGUgaW50ZXJuYWwgYG1lbnVCdXR0b25fYCBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFt0ZXh0XVxuICAgICAqICAgICAgICBDb250cm9sIHRleHQgZm9yIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IFtlbD10aGlzLm1lbnVCdXR0b25fLmVsKCldXG4gICAgICogICAgICAgIEVsZW1lbnQgdG8gc2V0IHRoZSB0aXRsZSBvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKiAgICAgICAgIC0gVGhlIGNvbnRyb2wgdGV4dCB3aGVuIGdldHRpbmdcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY29udHJvbFRleHQgPSBmdW5jdGlvbiBjb250cm9sVGV4dCh0ZXh0LCBlbCkge1xuICAgICAgaWYgKGVsID09PSB2b2lkIDApIHtcbiAgICAgICAgZWwgPSB0aGlzLm1lbnVCdXR0b25fLmVsKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLm1lbnVCdXR0b25fLmNvbnRyb2xUZXh0KHRleHQsIGVsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGEgY2xpY2sgb24gYSBgTWVudUJ1dHRvbmAuXG4gICAgICogU2VlIHtAbGluayBDbGlja2FibGVDb21wb25lbnQjaGFuZGxlQ2xpY2t9IGZvciBpbnN0YW5jZXMgd2hlcmUgdGhpcyBpcyBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBUaGUgYGtleWRvd25gLCBgdGFwYCwgb3IgYGNsaWNrYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlXG4gICAgICogICAgICAgIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIHRhcFxuICAgICAqIEBsaXN0ZW5zIGNsaWNrXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZUNsaWNrID0gZnVuY3Rpb24gaGFuZGxlQ2xpY2soZXZlbnQpIHtcbiAgICAgIGlmICh0aGlzLmJ1dHRvblByZXNzZWRfKSB7XG4gICAgICAgIHRoaXMudW5wcmVzc0J1dHRvbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wcmVzc0J1dHRvbigpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGZvY3VzIHRvIHRoZSBhY3R1YWwgYnV0dG9uLCBub3QgdG8gdGhpcyBlbGVtZW50XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmZvY3VzID0gZnVuY3Rpb24gZm9jdXMoKSB7XG4gICAgICB0aGlzLm1lbnVCdXR0b25fLmZvY3VzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZm9jdXMgZnJvbSB0aGUgYWN0dWFsIGJ1dHRvbiwgbm90IHRoaXMgZWxlbWVudFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5ibHVyID0gZnVuY3Rpb24gYmx1cigpIHtcbiAgICAgIHRoaXMubWVudUJ1dHRvbl8uYmx1cigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGdldHMgY2FsbGVkIHdoZW4gYSBgTWVudUJ1dHRvbmAgZ2FpbnMgZm9jdXMgdmlhIGEgYGZvY3VzYCBldmVudC5cbiAgICAgKiBUdXJucyBvbiBsaXN0ZW5pbmcgZm9yIGBrZXlkb3duYCBldmVudHMuIFdoZW4gdGhleSBoYXBwZW4gaXRcbiAgICAgKiBjYWxscyBgdGhpcy5oYW5kbGVLZXlQcmVzc2AuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBUaGUgYGZvY3VzYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIGZvY3VzXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZUZvY3VzID0gZnVuY3Rpb24gaGFuZGxlRm9jdXMoKSB7XG4gICAgICBvbihkb2N1bWVudCwgJ2tleWRvd24nLCBiaW5kKHRoaXMsIHRoaXMuaGFuZGxlS2V5UHJlc3MpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gYSBgTWVudUJ1dHRvbmAgbG9zZXMgZm9jdXMuIFR1cm5zIG9mZiB0aGUgbGlzdGVuZXIgZm9yXG4gICAgICogYGtleWRvd25gIGV2ZW50cy4gV2hpY2ggU3RvcHMgYHRoaXMuaGFuZGxlS2V5UHJlc3NgIGZyb20gZ2V0dGluZyBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBUaGUgYGJsdXJgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmUgY2FsbGVkLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgYmx1clxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVCbHVyID0gZnVuY3Rpb24gaGFuZGxlQmx1cigpIHtcbiAgICAgIG9mZihkb2N1bWVudCwgJ2tleWRvd24nLCBiaW5kKHRoaXMsIHRoaXMuaGFuZGxlS2V5UHJlc3MpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHRhYiwgZXNjYXBlLCBkb3duIGFycm93LCBhbmQgdXAgYXJyb3cga2V5cyBmb3IgYE1lbnVCdXR0b25gLiBTZWVcbiAgICAgKiB7QGxpbmsgQ2xpY2thYmxlQ29tcG9uZW50I2hhbmRsZUtleVByZXNzfSBmb3IgaW5zdGFuY2VzIHdoZXJlIHRoaXMgaXMgY2FsbGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgVGhlIGBrZXlkb3duYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIGtleWRvd25cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlS2V5UHJlc3MgPSBmdW5jdGlvbiBoYW5kbGVLZXlQcmVzcyhldmVudCkge1xuICAgICAgLy8gRXNjYXBlIG9yIFRhYiB1bnByZXNzIHRoZSAnYnV0dG9uJ1xuICAgICAgaWYgKGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ0VzYycpIHx8IGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ1RhYicpKSB7XG4gICAgICAgIGlmICh0aGlzLmJ1dHRvblByZXNzZWRfKSB7XG4gICAgICAgICAgdGhpcy51bnByZXNzQnV0dG9uKCk7XG4gICAgICAgIH0gLy8gRG9uJ3QgcHJldmVudERlZmF1bHQgZm9yIFRhYiBrZXkgLSB3ZSBzdGlsbCB3YW50IHRvIGxvc2UgZm9jdXNcblxuXG4gICAgICAgIGlmICgha2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnVGFiJykpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBTZXQgZm9jdXMgYmFjayB0byB0aGUgbWVudSBidXR0b24ncyBidXR0b25cblxuICAgICAgICAgIHRoaXMubWVudUJ1dHRvbl8uZm9jdXMoKTtcbiAgICAgICAgfSAvLyBVcCBBcnJvdyBvciBEb3duIEFycm93IGFsc28gJ3ByZXNzJyB0aGUgYnV0dG9uIHRvIG9wZW4gdGhlIG1lbnVcblxuICAgICAgfSBlbHNlIGlmIChrZXljb2RlLmlzRXZlbnRLZXkoZXZlbnQsICdVcCcpIHx8IGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ0Rvd24nKSkge1xuICAgICAgICBpZiAoIXRoaXMuYnV0dG9uUHJlc3NlZF8pIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMucHJlc3NCdXR0b24oKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgYSBga2V5ZG93bmAgZXZlbnQgb24gYSBzdWItbWVudS4gVGhlIGxpc3RlbmVyIGZvciB0aGlzIGlzIGFkZGVkIGluXG4gICAgICogdGhlIGNvbnN0cnVjdG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgS2V5IHByZXNzIGV2ZW50XG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBrZXlkb3duXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZVN1Ym1lbnVLZXlQcmVzcyA9IGZ1bmN0aW9uIGhhbmRsZVN1Ym1lbnVLZXlQcmVzcyhldmVudCkge1xuICAgICAgLy8gRXNjYXBlIG9yIFRhYiB1bnByZXNzIHRoZSAnYnV0dG9uJ1xuICAgICAgaWYgKGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ0VzYycpIHx8IGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ1RhYicpKSB7XG4gICAgICAgIGlmICh0aGlzLmJ1dHRvblByZXNzZWRfKSB7XG4gICAgICAgICAgdGhpcy51bnByZXNzQnV0dG9uKCk7XG4gICAgICAgIH0gLy8gRG9uJ3QgcHJldmVudERlZmF1bHQgZm9yIFRhYiBrZXkgLSB3ZSBzdGlsbCB3YW50IHRvIGxvc2UgZm9jdXNcblxuXG4gICAgICAgIGlmICgha2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnVGFiJykpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBTZXQgZm9jdXMgYmFjayB0byB0aGUgbWVudSBidXR0b24ncyBidXR0b25cblxuICAgICAgICAgIHRoaXMubWVudUJ1dHRvbl8uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdXQgdGhlIGN1cnJlbnQgYE1lbnVCdXR0b25gIGludG8gYSBwcmVzc2VkIHN0YXRlLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5wcmVzc0J1dHRvbiA9IGZ1bmN0aW9uIHByZXNzQnV0dG9uKCkge1xuICAgICAgaWYgKHRoaXMuZW5hYmxlZF8pIHtcbiAgICAgICAgdGhpcy5idXR0b25QcmVzc2VkXyA9IHRydWU7XG4gICAgICAgIHRoaXMubWVudS5zaG93KCk7XG4gICAgICAgIHRoaXMubWVudS5sb2NrU2hvd2luZygpO1xuICAgICAgICB0aGlzLm1lbnVCdXR0b25fLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpOyAvLyBzZXQgdGhlIGZvY3VzIGludG8gdGhlIHN1Ym1lbnUsIGV4Y2VwdCBvbiBpT1Mgd2hlcmUgaXQgaXMgcmVzdWx0aW5nIGluXG4gICAgICAgIC8vIHVuZGVzaXJlZCBzY3JvbGxpbmcgYmVoYXZpb3Igd2hlbiB0aGUgcGxheWVyIGlzIGluIGFuIGlmcmFtZVxuXG4gICAgICAgIGlmIChJU19JT1MgJiYgaXNJbkZyYW1lKCkpIHtcbiAgICAgICAgICAvLyBSZXR1cm4gZWFybHkgc28gdGhhdCB0aGUgbWVudSBpc24ndCBmb2N1c2VkXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tZW51LmZvY3VzKCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRha2UgdGhlIGN1cnJlbnQgYE1lbnVCdXR0b25gIG91dCBvZiBhIHByZXNzZWQgc3RhdGUuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnVucHJlc3NCdXR0b24gPSBmdW5jdGlvbiB1bnByZXNzQnV0dG9uKCkge1xuICAgICAgaWYgKHRoaXMuZW5hYmxlZF8pIHtcbiAgICAgICAgdGhpcy5idXR0b25QcmVzc2VkXyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1lbnUudW5sb2NrU2hvd2luZygpO1xuICAgICAgICB0aGlzLm1lbnUuaGlkZSgpO1xuICAgICAgICB0aGlzLm1lbnVCdXR0b25fLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzYWJsZSB0aGUgYE1lbnVCdXR0b25gLiBEb24ndCBhbGxvdyBpdCB0byBiZSBjbGlja2VkLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5kaXNhYmxlID0gZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICAgIHRoaXMudW5wcmVzc0J1dHRvbigpO1xuICAgICAgdGhpcy5lbmFibGVkXyA9IGZhbHNlO1xuICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWRpc2FibGVkJyk7XG4gICAgICB0aGlzLm1lbnVCdXR0b25fLmRpc2FibGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5hYmxlIHRoZSBgTWVudUJ1dHRvbmAuIEFsbG93IGl0IHRvIGJlIGNsaWNrZWQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmVuYWJsZSA9IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICAgIHRoaXMuZW5hYmxlZF8gPSB0cnVlO1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWRpc2FibGVkJyk7XG4gICAgICB0aGlzLm1lbnVCdXR0b25fLmVuYWJsZSgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTWVudUJ1dHRvbjtcbiAgfShDb21wb25lbnQpO1xuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnTWVudUJ1dHRvbicsIE1lbnVCdXR0b24pO1xuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBjbGFzcyBmb3IgYnV0dG9ucyB0aGF0IHRvZ2dsZSBzcGVjaWZpYyAgdHJhY2sgdHlwZXMgKGUuZy4gc3VidGl0bGVzKS5cbiAgICpcbiAgICogQGV4dGVuZHMgTWVudUJ1dHRvblxuICAgKi9cblxuICB2YXIgVHJhY2tCdXR0b24gPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfTWVudUJ1dHRvbikge1xuICAgIF9pbmhlcml0c0xvb3NlKFRyYWNrQnV0dG9uLCBfTWVudUJ1dHRvbik7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRyYWNrQnV0dG9uKHBsYXllciwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICB2YXIgdHJhY2tzID0gb3B0aW9ucy50cmFja3M7XG4gICAgICBfdGhpcyA9IF9NZW51QnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuXG4gICAgICBpZiAoX3RoaXMuaXRlbXMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgX3RoaXMuaGlkZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRyYWNrcykge1xuICAgICAgICByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyk7XG4gICAgICB9XG5cbiAgICAgIHZhciB1cGRhdGVIYW5kbGVyID0gYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMudXBkYXRlKTtcbiAgICAgIHRyYWNrcy5hZGRFdmVudExpc3RlbmVyKCdyZW1vdmV0cmFjaycsIHVwZGF0ZUhhbmRsZXIpO1xuICAgICAgdHJhY2tzLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHRyYWNrJywgdXBkYXRlSGFuZGxlcik7XG5cbiAgICAgIF90aGlzLnBsYXllcl8ub24oJ3JlYWR5JywgdXBkYXRlSGFuZGxlcik7XG5cbiAgICAgIF90aGlzLnBsYXllcl8ub24oJ2Rpc3Bvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRyYWNrcy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZW1vdmV0cmFjaycsIHVwZGF0ZUhhbmRsZXIpO1xuICAgICAgICB0cmFja3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkdHJhY2snLCB1cGRhdGVIYW5kbGVyKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIFRyYWNrQnV0dG9uO1xuICB9KE1lbnVCdXR0b24pO1xuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnVHJhY2tCdXR0b24nLCBUcmFja0J1dHRvbik7XG5cbiAgLyoqXG4gICAqIEBmaWxlIG1lbnUta2V5cy5qc1xuICAgKi9cblxuICAvKipcbiAgICAqIEFsbCBrZXlzIHVzZWQgZm9yIG9wZXJhdGlvbiBvZiBhIG1lbnUgKGBNZW51QnV0dG9uYCwgYE1lbnVgLCBhbmQgYE1lbnVJdGVtYClcbiAgICAqIE5vdGUgdGhhdCAnRW50ZXInIGFuZCAnU3BhY2UnIGFyZSBub3QgaW5jbHVkZWQgaGVyZSAob3RoZXJ3aXNlIHRoZXkgd291bGRcbiAgICAqIHByZXZlbnQgdGhlIGBNZW51QnV0dG9uYCBhbmQgYE1lbnVJdGVtYCBmcm9tIGJlaW5nIGtleWJvYXJkLWNsaWNrYWJsZSlcbiAgICAqIEB0eXBlZGVmIE1lbnVLZXlzXG4gICAgKiBAYXJyYXlcbiAgICAqL1xuICB2YXIgTWVudUtleXMgPSBbJ1RhYicsICdFc2MnLCAnVXAnLCAnRG93bicsICdSaWdodCcsICdMZWZ0J107XG5cbiAgLyoqXG4gICAqIFRoZSBjb21wb25lbnQgZm9yIGEgbWVudSBpdGVtLiBgPGxpPmBcbiAgICpcbiAgICogQGV4dGVuZHMgQ2xpY2thYmxlQ29tcG9uZW50XG4gICAqL1xuXG4gIHZhciBNZW51SXRlbSA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9DbGlja2FibGVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHNMb29zZShNZW51SXRlbSwgX0NsaWNrYWJsZUNvbXBvbmVudCk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV1cbiAgICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICAgKlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1lbnVJdGVtKHBsYXllciwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICBfdGhpcyA9IF9DbGlja2FibGVDb21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICBfdGhpcy5zZWxlY3RhYmxlID0gb3B0aW9ucy5zZWxlY3RhYmxlO1xuICAgICAgX3RoaXMuaXNTZWxlY3RlZF8gPSBvcHRpb25zLnNlbGVjdGVkIHx8IGZhbHNlO1xuICAgICAgX3RoaXMubXVsdGlTZWxlY3RhYmxlID0gb3B0aW9ucy5tdWx0aVNlbGVjdGFibGU7XG5cbiAgICAgIF90aGlzLnNlbGVjdGVkKF90aGlzLmlzU2VsZWN0ZWRfKTtcblxuICAgICAgaWYgKF90aGlzLnNlbGVjdGFibGUpIHtcbiAgICAgICAgaWYgKF90aGlzLm11bHRpU2VsZWN0YWJsZSkge1xuICAgICAgICAgIF90aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnbWVudWl0ZW1jaGVja2JveCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnbWVudWl0ZW1yYWRpbycpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdyb2xlJywgJ21lbnVpdGVtJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBgTWVudUl0ZW0ncyBET00gZWxlbWVudFxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFt0eXBlPWxpXVxuICAgICAqICAgICAgICBFbGVtZW50J3Mgbm9kZSB0eXBlLCBub3QgYWN0dWFsbHkgdXNlZCwgYWx3YXlzIHNldCB0byBgbGlgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtwcm9wcz17fV1cbiAgICAgKiAgICAgICAgQW4gb2JqZWN0IG9mIHByb3BlcnRpZXMgdGhhdCBzaG91bGQgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW2F0dHJzPXt9XVxuICAgICAqICAgICAgICBBbiBvYmplY3Qgb2YgYXR0cmlidXRlcyB0aGF0IHNob3VsZCBiZSBzZXQgb24gdGhlIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IGdldHMgY3JlYXRlZC5cbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90byA9IE1lbnVJdGVtLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsKHR5cGUsIHByb3BzLCBhdHRycykge1xuICAgICAgLy8gVGhlIGNvbnRyb2wgaXMgdGV4dHVhbCwgbm90IGp1c3QgYW4gaWNvblxuICAgICAgdGhpcy5ub25JY29uQ29udHJvbCA9IHRydWU7XG4gICAgICByZXR1cm4gX0NsaWNrYWJsZUNvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnbGknLCBhc3NpZ24oe1xuICAgICAgICBjbGFzc05hbWU6ICd2anMtbWVudS1pdGVtJyxcbiAgICAgICAgaW5uZXJIVE1MOiBcIjxzcGFuIGNsYXNzPVxcXCJ2anMtbWVudS1pdGVtLXRleHRcXFwiPlwiICsgdGhpcy5sb2NhbGl6ZSh0aGlzLm9wdGlvbnNfLmxhYmVsKSArIFwiPC9zcGFuPlwiLFxuICAgICAgICB0YWJJbmRleDogLTFcbiAgICAgIH0sIHByb3BzKSwgYXR0cnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZ25vcmUga2V5cyB3aGljaCBhcmUgdXNlZCBieSB0aGUgbWVudSwgYnV0IHBhc3MgYW55IG90aGVyIG9uZXMgdXAuIFNlZVxuICAgICAqIHtAbGluayBDbGlja2FibGVDb21wb25lbnQjaGFuZGxlS2V5UHJlc3N9IGZvciBpbnN0YW5jZXMgd2hlcmUgdGhpcyBpcyBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBUaGUgYGtleWRvd25gIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmUgY2FsbGVkLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMga2V5ZG93blxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVLZXlQcmVzcyA9IGZ1bmN0aW9uIGhhbmRsZUtleVByZXNzKGV2ZW50KSB7XG4gICAgICBpZiAoIU1lbnVLZXlzLnNvbWUoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4ga2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCBrZXkpO1xuICAgICAgfSkpIHtcbiAgICAgICAgLy8gUGFzcyBrZXlwcmVzcyBoYW5kbGluZyB1cCBmb3IgdW51c2VkIGtleXNcbiAgICAgICAgX0NsaWNrYWJsZUNvbXBvbmVudC5wcm90b3R5cGUuaGFuZGxlS2V5UHJlc3MuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFueSBjbGljayBvbiBhIGBNZW51SXRlbWAgcHV0cyBpdCBpbnRvIHRoZSBzZWxlY3RlZCBzdGF0ZS5cbiAgICAgKiBTZWUge0BsaW5rIENsaWNrYWJsZUNvbXBvbmVudCNoYW5kbGVDbGlja30gZm9yIGluc3RhbmNlcyB3aGVyZSB0aGlzIGlzIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIFRoZSBga2V5ZG93bmAsIGB0YXBgLCBvciBgY2xpY2tgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmVcbiAgICAgKiAgICAgICAgY2FsbGVkLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgdGFwXG4gICAgICogQGxpc3RlbnMgY2xpY2tcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljayhldmVudCkge1xuICAgICAgdGhpcy5zZWxlY3RlZCh0cnVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzdGF0ZSBmb3IgdGhpcyBtZW51IGl0ZW0gYXMgc2VsZWN0ZWQgb3Igbm90LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzZWxlY3RlZFxuICAgICAqICAgICAgICBpZiB0aGUgbWVudSBpdGVtIGlzIHNlbGVjdGVkIG9yIG5vdFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zZWxlY3RlZCA9IGZ1bmN0aW9uIHNlbGVjdGVkKF9zZWxlY3RlZCkge1xuICAgICAgaWYgKHRoaXMuc2VsZWN0YWJsZSkge1xuICAgICAgICBpZiAoX3NlbGVjdGVkKSB7XG4gICAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLXNlbGVjdGVkJyk7XG4gICAgICAgICAgdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdhcmlhLWNoZWNrZWQnLCAndHJ1ZScpOyAvLyBhcmlhLWNoZWNrZWQgaXNuJ3QgZnVsbHkgc3VwcG9ydGVkIGJ5IGJyb3dzZXJzL3NjcmVlbiByZWFkZXJzLFxuICAgICAgICAgIC8vIHNvIGluZGljYXRlIHNlbGVjdGVkIHN0YXRlIHRvIHNjcmVlbiByZWFkZXIgaW4gdGhlIGNvbnRyb2wgdGV4dC5cblxuICAgICAgICAgIHRoaXMuY29udHJvbFRleHQoJywgc2VsZWN0ZWQnKTtcbiAgICAgICAgICB0aGlzLmlzU2VsZWN0ZWRfID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtc2VsZWN0ZWQnKTtcbiAgICAgICAgICB0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsICdmYWxzZScpOyAvLyBJbmRpY2F0ZSB1bi1zZWxlY3RlZCBzdGF0ZSB0byBzY3JlZW4gcmVhZGVyXG5cbiAgICAgICAgICB0aGlzLmNvbnRyb2xUZXh0KCcnKTtcbiAgICAgICAgICB0aGlzLmlzU2VsZWN0ZWRfID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIE1lbnVJdGVtO1xuICB9KENsaWNrYWJsZUNvbXBvbmVudCk7XG5cbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdNZW51SXRlbScsIE1lbnVJdGVtKTtcblxuICAvKipcbiAgICogVGhlIHNwZWNpZmljIG1lbnUgaXRlbSB0eXBlIGZvciBzZWxlY3RpbmcgYSBsYW5ndWFnZSB3aXRoaW4gYSB0ZXh0IHRyYWNrIGtpbmRcbiAgICpcbiAgICogQGV4dGVuZHMgTWVudUl0ZW1cbiAgICovXG5cbiAgdmFyIFRleHRUcmFja01lbnVJdGVtID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX01lbnVJdGVtKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoVGV4dFRyYWNrTWVudUl0ZW0sIF9NZW51SXRlbSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRleHRUcmFja01lbnVJdGVtKHBsYXllciwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICB2YXIgdHJhY2sgPSBvcHRpb25zLnRyYWNrO1xuICAgICAgdmFyIHRyYWNrcyA9IHBsYXllci50ZXh0VHJhY2tzKCk7IC8vIE1vZGlmeSBvcHRpb25zIGZvciBwYXJlbnQgTWVudUl0ZW0gY2xhc3MncyBpbml0LlxuXG4gICAgICBvcHRpb25zLmxhYmVsID0gdHJhY2subGFiZWwgfHwgdHJhY2subGFuZ3VhZ2UgfHwgJ1Vua25vd24nO1xuICAgICAgb3B0aW9ucy5zZWxlY3RlZCA9IHRyYWNrLm1vZGUgPT09ICdzaG93aW5nJztcbiAgICAgIF90aGlzID0gX01lbnVJdGVtLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgICAgX3RoaXMudHJhY2sgPSB0cmFjaztcblxuICAgICAgdmFyIGNoYW5nZUhhbmRsZXIgPSBmdW5jdGlvbiBjaGFuZ2VIYW5kbGVyKCkge1xuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMuaGFuZGxlVHJhY2tzQ2hhbmdlLmFwcGx5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBhcmdzKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBzZWxlY3RlZExhbmd1YWdlQ2hhbmdlSGFuZGxlciA9IGZ1bmN0aW9uIHNlbGVjdGVkTGFuZ3VhZ2VDaGFuZ2VIYW5kbGVyKCkge1xuICAgICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpcy5oYW5kbGVTZWxlY3RlZExhbmd1YWdlQ2hhbmdlLmFwcGx5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBhcmdzKTtcbiAgICAgIH07XG5cbiAgICAgIHBsYXllci5vbihbJ2xvYWRzdGFydCcsICd0ZXh0dHJhY2tjaGFuZ2UnXSwgY2hhbmdlSGFuZGxlcik7XG4gICAgICB0cmFja3MuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgY2hhbmdlSGFuZGxlcik7XG4gICAgICB0cmFja3MuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0ZWRsYW5ndWFnZWNoYW5nZScsIHNlbGVjdGVkTGFuZ3VhZ2VDaGFuZ2VIYW5kbGVyKTtcblxuICAgICAgX3RoaXMub24oJ2Rpc3Bvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHBsYXllci5vZmYoWydsb2Fkc3RhcnQnLCAndGV4dHRyYWNrY2hhbmdlJ10sIGNoYW5nZUhhbmRsZXIpO1xuICAgICAgICB0cmFja3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgY2hhbmdlSGFuZGxlcik7XG4gICAgICAgIHRyYWNrcy5yZW1vdmVFdmVudExpc3RlbmVyKCdzZWxlY3RlZGxhbmd1YWdlY2hhbmdlJywgc2VsZWN0ZWRMYW5ndWFnZUNoYW5nZUhhbmRsZXIpO1xuICAgICAgfSk7IC8vIGlPUzcgZG9lc24ndCBkaXNwYXRjaCBjaGFuZ2UgZXZlbnRzIHRvIFRleHRUcmFja0xpc3RzIHdoZW4gYW5cbiAgICAgIC8vIGFzc29jaWF0ZWQgdHJhY2sncyBtb2RlIGNoYW5nZXMuIFdpdGhvdXQgc29tZXRoaW5nIGxpa2VcbiAgICAgIC8vIE9iamVjdC5vYnNlcnZlKCkgKGFsc28gbm90IHByZXNlbnQgb24gaU9TNyksIGl0J3Mgbm90XG4gICAgICAvLyBwb3NzaWJsZSB0byBkZXRlY3QgY2hhbmdlcyB0byB0aGUgbW9kZSBhdHRyaWJ1dGUgYW5kIHBvbHlmaWxsXG4gICAgICAvLyB0aGUgY2hhbmdlIGV2ZW50LiBBcyBhIHBvb3Igc3Vic3RpdHV0ZSwgd2UgbWFudWFsbHkgZGlzcGF0Y2hcbiAgICAgIC8vIGNoYW5nZSBldmVudHMgd2hlbmV2ZXIgdGhlIGNvbnRyb2xzIG1vZGlmeSB0aGUgbW9kZS5cblxuXG4gICAgICBpZiAodHJhY2tzLm9uY2hhbmdlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIGV2ZW50O1xuXG4gICAgICAgIF90aGlzLm9uKFsndGFwJywgJ2NsaWNrJ10sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyQxLkV2ZW50ICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgLy8gQW5kcm9pZCAyLjMgdGhyb3dzIGFuIElsbGVnYWwgQ29uc3RydWN0b3IgZXJyb3IgZm9yIHdpbmRvdy5FdmVudFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZXZlbnQgPSBuZXcgd2luZG93JDEuRXZlbnQoJ2NoYW5nZScpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7Ly8gY29udGludWUgcmVnYXJkbGVzcyBvZiBlcnJvclxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICAgICAgICBldmVudC5pbml0RXZlbnQoJ2NoYW5nZScsIHRydWUsIHRydWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRyYWNrcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICB9IC8vIHNldCB0aGUgZGVmYXVsdCBzdGF0ZSBiYXNlZCBvbiBjdXJyZW50IHRyYWNrc1xuXG5cbiAgICAgIF90aGlzLmhhbmRsZVRyYWNrc0NoYW5nZSgpO1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhbiBgVGV4dFRyYWNrTWVudUl0ZW1gIGlzIFwiY2xpY2tlZFwiLiBTZWVcbiAgICAgKiB7QGxpbmsgQ2xpY2thYmxlQ29tcG9uZW50fSBmb3IgbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiBvbiB3aGF0IGEgY2xpY2sgY2FuIGJlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgVGhlIGBrZXlkb3duYCwgYHRhcGAsIG9yIGBjbGlja2AgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZVxuICAgICAqICAgICAgICBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyB0YXBcbiAgICAgKiBAbGlzdGVucyBjbGlja1xuICAgICAqL1xuXG5cbiAgICB2YXIgX3Byb3RvID0gVGV4dFRyYWNrTWVudUl0ZW0ucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLmhhbmRsZUNsaWNrID0gZnVuY3Rpb24gaGFuZGxlQ2xpY2soZXZlbnQpIHtcbiAgICAgIHZhciByZWZlcmVuY2VUcmFjayA9IHRoaXMudHJhY2s7XG4gICAgICB2YXIgdHJhY2tzID0gdGhpcy5wbGF5ZXJfLnRleHRUcmFja3MoKTtcblxuICAgICAgX01lbnVJdGVtLnByb3RvdHlwZS5oYW5kbGVDbGljay5jYWxsKHRoaXMsIGV2ZW50KTtcblxuICAgICAgaWYgKCF0cmFja3MpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBEZXRlcm1pbmUgdGhlIHJlbGV2YW50IGtpbmQocykgb2YgdHJhY2tzIGZvciB0aGlzIGNvbXBvbmVudCBhbmQgZmlsdGVyXG4gICAgICAvLyBvdXQgZW1wdHkga2luZHMuXG5cblxuICAgICAgdmFyIGtpbmRzID0gKHJlZmVyZW5jZVRyYWNrLmtpbmRzIHx8IFtyZWZlcmVuY2VUcmFjay5raW5kXSkuZmlsdGVyKEJvb2xlYW4pO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdHJhY2sgPSB0cmFja3NbaV07IC8vIElmIHRoZSB0cmFjayBmcm9tIHRoZSB0ZXh0IHRyYWNrcyBsaXN0IGlzIG5vdCBvZiB0aGUgcmlnaHQga2luZCxcbiAgICAgICAgLy8gc2tpcCBpdC4gV2UgZG8gbm90IHdhbnQgdG8gYWZmZWN0IHRyYWNrcyBvZiBpbmNvbXBhdGlibGUga2luZChzKS5cblxuICAgICAgICBpZiAoa2luZHMuaW5kZXhPZih0cmFjay5raW5kKSA9PT0gLTEpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSAvLyBJZiB0aGlzIHRleHQgdHJhY2sgaXMgdGhlIGNvbXBvbmVudCdzIHRyYWNrIGFuZCBpdCBpcyBub3Qgc2hvd2luZyxcbiAgICAgICAgLy8gc2V0IGl0IHRvIHNob3dpbmcuXG5cblxuICAgICAgICBpZiAodHJhY2sgPT09IHJlZmVyZW5jZVRyYWNrKSB7XG4gICAgICAgICAgaWYgKHRyYWNrLm1vZGUgIT09ICdzaG93aW5nJykge1xuICAgICAgICAgICAgdHJhY2subW9kZSA9ICdzaG93aW5nJztcbiAgICAgICAgICB9IC8vIElmIHRoaXMgdGV4dCB0cmFjayBpcyBub3QgdGhlIGNvbXBvbmVudCdzIHRyYWNrIGFuZCBpdCBpcyBub3RcbiAgICAgICAgICAvLyBkaXNhYmxlZCwgc2V0IGl0IHRvIGRpc2FibGVkLlxuXG4gICAgICAgIH0gZWxzZSBpZiAodHJhY2subW9kZSAhPT0gJ2Rpc2FibGVkJykge1xuICAgICAgICAgIHRyYWNrLm1vZGUgPSAnZGlzYWJsZWQnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSB0ZXh0IHRyYWNrIGxpc3QgY2hhbmdlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBUaGUgYGNoYW5nZWAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZSBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBUZXh0VHJhY2tMaXN0I2NoYW5nZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVUcmFja3NDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVUcmFja3NDaGFuZ2UoZXZlbnQpIHtcbiAgICAgIHZhciBzaG91bGRCZVNlbGVjdGVkID0gdGhpcy50cmFjay5tb2RlID09PSAnc2hvd2luZyc7IC8vIFByZXZlbnQgcmVkdW5kYW50IHNlbGVjdGVkKCkgY2FsbHMgYmVjYXVzZSB0aGV5IG1heSBjYXVzZVxuICAgICAgLy8gc2NyZWVuIHJlYWRlcnMgdG8gcmVhZCB0aGUgYXBwZW5kZWQgY29udHJvbCB0ZXh0IHVubmVjZXNzYXJpbHlcblxuICAgICAgaWYgKHNob3VsZEJlU2VsZWN0ZWQgIT09IHRoaXMuaXNTZWxlY3RlZF8pIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZChzaG91bGRCZVNlbGVjdGVkKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLmhhbmRsZVNlbGVjdGVkTGFuZ3VhZ2VDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVTZWxlY3RlZExhbmd1YWdlQ2hhbmdlKGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy50cmFjay5tb2RlID09PSAnc2hvd2luZycpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkTGFuZ3VhZ2UgPSB0aGlzLnBsYXllcl8uY2FjaGVfLnNlbGVjdGVkTGFuZ3VhZ2U7IC8vIERvbid0IHJlcGxhY2UgdGhlIGtpbmQgb2YgdHJhY2sgYWNyb3NzIHRoZSBzYW1lIGxhbmd1YWdlXG5cbiAgICAgICAgaWYgKHNlbGVjdGVkTGFuZ3VhZ2UgJiYgc2VsZWN0ZWRMYW5ndWFnZS5lbmFibGVkICYmIHNlbGVjdGVkTGFuZ3VhZ2UubGFuZ3VhZ2UgPT09IHRoaXMudHJhY2subGFuZ3VhZ2UgJiYgc2VsZWN0ZWRMYW5ndWFnZS5raW5kICE9PSB0aGlzLnRyYWNrLmtpbmQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBsYXllcl8uY2FjaGVfLnNlbGVjdGVkTGFuZ3VhZ2UgPSB7XG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICBsYW5ndWFnZTogdGhpcy50cmFjay5sYW5ndWFnZSxcbiAgICAgICAgICBraW5kOiB0aGlzLnRyYWNrLmtpbmRcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgLy8gcmVtb3ZlIHJlZmVyZW5jZSB0byB0cmFjayBvYmplY3Qgb24gZGlzcG9zZVxuICAgICAgdGhpcy50cmFjayA9IG51bGw7XG5cbiAgICAgIF9NZW51SXRlbS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGV4dFRyYWNrTWVudUl0ZW07XG4gIH0oTWVudUl0ZW0pO1xuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnVGV4dFRyYWNrTWVudUl0ZW0nLCBUZXh0VHJhY2tNZW51SXRlbSk7XG5cbiAgLyoqXG4gICAqIEEgc3BlY2lhbCBtZW51IGl0ZW0gZm9yIHR1cm5pbmcgb2YgYSBzcGVjaWZpYyB0eXBlIG9mIHRleHQgdHJhY2tcbiAgICpcbiAgICogQGV4dGVuZHMgVGV4dFRyYWNrTWVudUl0ZW1cbiAgICovXG5cbiAgdmFyIE9mZlRleHRUcmFja01lbnVJdGVtID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX1RleHRUcmFja01lbnVJdGVtKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoT2ZmVGV4dFRyYWNrTWVudUl0ZW0sIF9UZXh0VHJhY2tNZW51SXRlbSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE9mZlRleHRUcmFja01lbnVJdGVtKHBsYXllciwgb3B0aW9ucykge1xuICAgICAgLy8gQ3JlYXRlIHBzZXVkbyB0cmFjayBpbmZvXG4gICAgICAvLyBSZXF1aXJlcyBvcHRpb25zWydraW5kJ11cbiAgICAgIG9wdGlvbnMudHJhY2sgPSB7XG4gICAgICAgIHBsYXllcjogcGxheWVyLFxuICAgICAgICBraW5kOiBvcHRpb25zLmtpbmQsXG4gICAgICAgIGtpbmRzOiBvcHRpb25zLmtpbmRzLFxuICAgICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgbW9kZTogJ2Rpc2FibGVkJ1xuICAgICAgfTtcblxuICAgICAgaWYgKCFvcHRpb25zLmtpbmRzKSB7XG4gICAgICAgIG9wdGlvbnMua2luZHMgPSBbb3B0aW9ucy5raW5kXTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMubGFiZWwpIHtcbiAgICAgICAgb3B0aW9ucy50cmFjay5sYWJlbCA9IG9wdGlvbnMubGFiZWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zLnRyYWNrLmxhYmVsID0gb3B0aW9ucy5raW5kcy5qb2luKCcgYW5kICcpICsgJyBvZmYnO1xuICAgICAgfSAvLyBNZW51SXRlbSBpcyBzZWxlY3RhYmxlXG5cblxuICAgICAgb3B0aW9ucy5zZWxlY3RhYmxlID0gdHJ1ZTsgLy8gTWVudUl0ZW0gaXMgTk9UIG11bHRpU2VsZWN0YWJsZSAoaS5lLiBvbmx5IG9uZSBjYW4gYmUgbWFya2VkIFwic2VsZWN0ZWRcIiBhdCBhIHRpbWUpXG5cbiAgICAgIG9wdGlvbnMubXVsdGlTZWxlY3RhYmxlID0gZmFsc2U7XG4gICAgICByZXR1cm4gX1RleHRUcmFja01lbnVJdGVtLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdGV4dCB0cmFjayBjaGFuZ2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIFRoZSBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIHJ1blxuICAgICAqL1xuXG5cbiAgICB2YXIgX3Byb3RvID0gT2ZmVGV4dFRyYWNrTWVudUl0ZW0ucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLmhhbmRsZVRyYWNrc0NoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZVRyYWNrc0NoYW5nZShldmVudCkge1xuICAgICAgdmFyIHRyYWNrcyA9IHRoaXMucGxheWVyKCkudGV4dFRyYWNrcygpO1xuICAgICAgdmFyIHNob3VsZEJlU2VsZWN0ZWQgPSB0cnVlO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRyYWNrcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdmFyIHRyYWNrID0gdHJhY2tzW2ldO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnNfLmtpbmRzLmluZGV4T2YodHJhY2sua2luZCkgPiAtMSAmJiB0cmFjay5tb2RlID09PSAnc2hvd2luZycpIHtcbiAgICAgICAgICBzaG91bGRCZVNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gUHJldmVudCByZWR1bmRhbnQgc2VsZWN0ZWQoKSBjYWxscyBiZWNhdXNlIHRoZXkgbWF5IGNhdXNlXG4gICAgICAvLyBzY3JlZW4gcmVhZGVycyB0byByZWFkIHRoZSBhcHBlbmRlZCBjb250cm9sIHRleHQgdW5uZWNlc3NhcmlseVxuXG5cbiAgICAgIGlmIChzaG91bGRCZVNlbGVjdGVkICE9PSB0aGlzLmlzU2VsZWN0ZWRfKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWQoc2hvdWxkQmVTZWxlY3RlZCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5oYW5kbGVTZWxlY3RlZExhbmd1YWdlQ2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlU2VsZWN0ZWRMYW5ndWFnZUNoYW5nZShldmVudCkge1xuICAgICAgdmFyIHRyYWNrcyA9IHRoaXMucGxheWVyKCkudGV4dFRyYWNrcygpO1xuICAgICAgdmFyIGFsbEhpZGRlbiA9IHRydWU7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdHJhY2tzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgdHJhY2sgPSB0cmFja3NbaV07XG5cbiAgICAgICAgaWYgKFsnY2FwdGlvbnMnLCAnZGVzY3JpcHRpb25zJywgJ3N1YnRpdGxlcyddLmluZGV4T2YodHJhY2sua2luZCkgPiAtMSAmJiB0cmFjay5tb2RlID09PSAnc2hvd2luZycpIHtcbiAgICAgICAgICBhbGxIaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoYWxsSGlkZGVuKSB7XG4gICAgICAgIHRoaXMucGxheWVyXy5jYWNoZV8uc2VsZWN0ZWRMYW5ndWFnZSA9IHtcbiAgICAgICAgICBlbmFibGVkOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gT2ZmVGV4dFRyYWNrTWVudUl0ZW07XG4gIH0oVGV4dFRyYWNrTWVudUl0ZW0pO1xuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnT2ZmVGV4dFRyYWNrTWVudUl0ZW0nLCBPZmZUZXh0VHJhY2tNZW51SXRlbSk7XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGNsYXNzIGZvciBidXR0b25zIHRoYXQgdG9nZ2xlIHNwZWNpZmljIHRleHQgdHJhY2sgdHlwZXMgKGUuZy4gc3VidGl0bGVzKVxuICAgKlxuICAgKiBAZXh0ZW5kcyBNZW51QnV0dG9uXG4gICAqL1xuXG4gIHZhciBUZXh0VHJhY2tCdXR0b24gPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfVHJhY2tCdXR0b24pIHtcbiAgICBfaW5oZXJpdHNMb29zZShUZXh0VHJhY2tCdXR0b24sIF9UcmFja0J1dHRvbik7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRleHRUcmFja0J1dHRvbihwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zLnRyYWNrcyA9IHBsYXllci50ZXh0VHJhY2tzKCk7XG4gICAgICByZXR1cm4gX1RyYWNrQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBtZW51IGl0ZW0gZm9yIGVhY2ggdGV4dCB0cmFja1xuICAgICAqXG4gICAgICogQHBhcmFtIHtUZXh0VHJhY2tNZW51SXRlbVtdfSBbaXRlbXM9W11dXG4gICAgICogICAgICAgIEV4aXN0aW5nIGFycmF5IG9mIGl0ZW1zIHRvIHVzZSBkdXJpbmcgY3JlYXRpb25cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1RleHRUcmFja01lbnVJdGVtW119XG4gICAgICogICAgICAgICBBcnJheSBvZiBtZW51IGl0ZW1zIHRoYXQgd2VyZSBjcmVhdGVkXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBUZXh0VHJhY2tCdXR0b24ucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLmNyZWF0ZUl0ZW1zID0gZnVuY3Rpb24gY3JlYXRlSXRlbXMoaXRlbXMsIFRyYWNrTWVudUl0ZW0pIHtcbiAgICAgIGlmIChpdGVtcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGl0ZW1zID0gW107XG4gICAgICB9XG5cbiAgICAgIGlmIChUcmFja01lbnVJdGVtID09PSB2b2lkIDApIHtcbiAgICAgICAgVHJhY2tNZW51SXRlbSA9IFRleHRUcmFja01lbnVJdGVtO1xuICAgICAgfVxuXG4gICAgICAvLyBMYWJlbCBpcyBhbiBvdmVycmlkZSBmb3IgdGhlIFt0cmFja10gb2ZmIGxhYmVsXG4gICAgICAvLyBVU2VkIHRvIGxvY2FsaXNlIGNhcHRpb25zL3N1YnRpdGxlc1xuICAgICAgdmFyIGxhYmVsO1xuXG4gICAgICBpZiAodGhpcy5sYWJlbF8pIHtcbiAgICAgICAgbGFiZWwgPSB0aGlzLmxhYmVsXyArIFwiIG9mZlwiO1xuICAgICAgfSAvLyBBZGQgYW4gT0ZGIG1lbnUgaXRlbSB0byB0dXJuIGFsbCB0cmFja3Mgb2ZmXG5cblxuICAgICAgaXRlbXMucHVzaChuZXcgT2ZmVGV4dFRyYWNrTWVudUl0ZW0odGhpcy5wbGF5ZXJfLCB7XG4gICAgICAgIGtpbmRzOiB0aGlzLmtpbmRzXyxcbiAgICAgICAga2luZDogdGhpcy5raW5kXyxcbiAgICAgICAgbGFiZWw6IGxhYmVsXG4gICAgICB9KSk7XG4gICAgICB0aGlzLmhpZGVUaHJlc2hvbGRfICs9IDE7XG4gICAgICB2YXIgdHJhY2tzID0gdGhpcy5wbGF5ZXJfLnRleHRUcmFja3MoKTtcblxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMua2luZHNfKSkge1xuICAgICAgICB0aGlzLmtpbmRzXyA9IFt0aGlzLmtpbmRfXTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRyYWNrID0gdHJhY2tzW2ldOyAvLyBvbmx5IGFkZCB0cmFja3MgdGhhdCBhcmUgb2YgYW4gYXBwcm9wcmlhdGUga2luZCBhbmQgaGF2ZSBhIGxhYmVsXG5cbiAgICAgICAgaWYgKHRoaXMua2luZHNfLmluZGV4T2YodHJhY2sua2luZCkgPiAtMSkge1xuICAgICAgICAgIHZhciBpdGVtID0gbmV3IFRyYWNrTWVudUl0ZW0odGhpcy5wbGF5ZXJfLCB7XG4gICAgICAgICAgICB0cmFjazogdHJhY2ssXG4gICAgICAgICAgICAvLyBNZW51SXRlbSBpcyBzZWxlY3RhYmxlXG4gICAgICAgICAgICBzZWxlY3RhYmxlOiB0cnVlLFxuICAgICAgICAgICAgLy8gTWVudUl0ZW0gaXMgTk9UIG11bHRpU2VsZWN0YWJsZSAoaS5lLiBvbmx5IG9uZSBjYW4gYmUgbWFya2VkIFwic2VsZWN0ZWRcIiBhdCBhIHRpbWUpXG4gICAgICAgICAgICBtdWx0aVNlbGVjdGFibGU6IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaXRlbS5hZGRDbGFzcyhcInZqcy1cIiArIHRyYWNrLmtpbmQgKyBcIi1tZW51LWl0ZW1cIik7XG4gICAgICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaXRlbXM7XG4gICAgfTtcblxuICAgIHJldHVybiBUZXh0VHJhY2tCdXR0b247XG4gIH0oVHJhY2tCdXR0b24pO1xuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnVGV4dFRyYWNrQnV0dG9uJywgVGV4dFRyYWNrQnV0dG9uKTtcblxuICAvKipcbiAgICogVGhlIGNoYXB0ZXIgdHJhY2sgbWVudSBpdGVtXG4gICAqXG4gICAqIEBleHRlbmRzIE1lbnVJdGVtXG4gICAqL1xuXG4gIHZhciBDaGFwdGVyc1RyYWNrTWVudUl0ZW0gPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfTWVudUl0ZW0pIHtcbiAgICBfaW5oZXJpdHNMb29zZShDaGFwdGVyc1RyYWNrTWVudUl0ZW0sIF9NZW51SXRlbSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENoYXB0ZXJzVHJhY2tNZW51SXRlbShwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgdmFyIHRyYWNrID0gb3B0aW9ucy50cmFjaztcbiAgICAgIHZhciBjdWUgPSBvcHRpb25zLmN1ZTtcbiAgICAgIHZhciBjdXJyZW50VGltZSA9IHBsYXllci5jdXJyZW50VGltZSgpOyAvLyBNb2RpZnkgb3B0aW9ucyBmb3IgcGFyZW50IE1lbnVJdGVtIGNsYXNzJ3MgaW5pdC5cblxuICAgICAgb3B0aW9ucy5zZWxlY3RhYmxlID0gdHJ1ZTtcbiAgICAgIG9wdGlvbnMubXVsdGlTZWxlY3RhYmxlID0gZmFsc2U7XG4gICAgICBvcHRpb25zLmxhYmVsID0gY3VlLnRleHQ7XG4gICAgICBvcHRpb25zLnNlbGVjdGVkID0gY3VlLnN0YXJ0VGltZSA8PSBjdXJyZW50VGltZSAmJiBjdXJyZW50VGltZSA8IGN1ZS5lbmRUaW1lO1xuICAgICAgX3RoaXMgPSBfTWVudUl0ZW0uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICBfdGhpcy50cmFjayA9IHRyYWNrO1xuICAgICAgX3RoaXMuY3VlID0gY3VlO1xuICAgICAgdHJhY2suYWRkRXZlbnRMaXN0ZW5lcignY3VlY2hhbmdlJywgYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMudXBkYXRlKSk7XG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhbiBgQ2hhcHRlcnNUcmFja01lbnVJdGVtYCBpcyBcImNsaWNrZWRcIi4gU2VlXG4gICAgICoge0BsaW5rIENsaWNrYWJsZUNvbXBvbmVudH0gZm9yIG1vcmUgZGV0YWlsZWQgaW5mb3JtYXRpb24gb24gd2hhdCBhIGNsaWNrIGNhbiBiZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IFtldmVudF1cbiAgICAgKiAgICAgICAgVGhlIGBrZXlkb3duYCwgYHRhcGAsIG9yIGBjbGlja2AgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZVxuICAgICAqICAgICAgICBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyB0YXBcbiAgICAgKiBAbGlzdGVucyBjbGlja1xuICAgICAqL1xuXG5cbiAgICB2YXIgX3Byb3RvID0gQ2hhcHRlcnNUcmFja01lbnVJdGVtLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XG4gICAgICBfTWVudUl0ZW0ucHJvdG90eXBlLmhhbmRsZUNsaWNrLmNhbGwodGhpcyk7XG5cbiAgICAgIHRoaXMucGxheWVyXy5jdXJyZW50VGltZSh0aGlzLmN1ZS5zdGFydFRpbWUpO1xuICAgICAgdGhpcy51cGRhdGUodGhpcy5jdWUuc3RhcnRUaW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIGNoYXB0ZXIgbWVudSBpdGVtXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAgICogICAgICAgIFRoZSBgY3VlY2hhbmdlYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIHJ1bi5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIFRleHRUcmFjayNjdWVjaGFuZ2VcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGV2ZW50KSB7XG4gICAgICB2YXIgY3VlID0gdGhpcy5jdWU7XG4gICAgICB2YXIgY3VycmVudFRpbWUgPSB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUoKTsgLy8gdmpzLmxvZyhjdXJyZW50VGltZSwgY3VlLnN0YXJ0VGltZSk7XG5cbiAgICAgIHRoaXMuc2VsZWN0ZWQoY3VlLnN0YXJ0VGltZSA8PSBjdXJyZW50VGltZSAmJiBjdXJyZW50VGltZSA8IGN1ZS5lbmRUaW1lKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENoYXB0ZXJzVHJhY2tNZW51SXRlbTtcbiAgfShNZW51SXRlbSk7XG5cbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdDaGFwdGVyc1RyYWNrTWVudUl0ZW0nLCBDaGFwdGVyc1RyYWNrTWVudUl0ZW0pO1xuXG4gIC8qKlxuICAgKiBUaGUgYnV0dG9uIGNvbXBvbmVudCBmb3IgdG9nZ2xpbmcgYW5kIHNlbGVjdGluZyBjaGFwdGVyc1xuICAgKiBDaGFwdGVycyBhY3QgbXVjaCBkaWZmZXJlbnRseSB0aGFuIG90aGVyIHRleHQgdHJhY2tzXG4gICAqIEN1ZXMgYXJlIG5hdmlnYXRpb24gdnMuIG90aGVyIHRyYWNrcyBvZiBhbHRlcm5hdGl2ZSBsYW5ndWFnZXNcbiAgICpcbiAgICogQGV4dGVuZHMgVGV4dFRyYWNrQnV0dG9uXG4gICAqL1xuXG4gIHZhciBDaGFwdGVyc0J1dHRvbiA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9UZXh0VHJhY2tCdXR0b24pIHtcbiAgICBfaW5oZXJpdHNMb29zZShDaGFwdGVyc0J1dHRvbiwgX1RleHRUcmFja0J1dHRvbik7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDb21wb25lbnR+UmVhZHlDYWxsYmFja30gW3JlYWR5XVxuICAgICAqICAgICAgICBUaGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoaXMgZnVuY3Rpb24gaXMgcmVhZHkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ2hhcHRlcnNCdXR0b24ocGxheWVyLCBvcHRpb25zLCByZWFkeSkge1xuICAgICAgcmV0dXJuIF9UZXh0VHJhY2tCdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgdGhlIGRlZmF1bHQgRE9NIGBjbGFzc05hbWVgLlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgVGhlIERPTSBgY2xhc3NOYW1lYCBmb3IgdGhpcyBvYmplY3QuXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBDaGFwdGVyc0J1dHRvbi5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkQ1NTQ2xhc3MoKSB7XG4gICAgICByZXR1cm4gXCJ2anMtY2hhcHRlcnMtYnV0dG9uIFwiICsgX1RleHRUcmFja0J1dHRvbi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uYnVpbGRXcmFwcGVyQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZFdyYXBwZXJDU1NDbGFzcygpIHtcbiAgICAgIHJldHVybiBcInZqcy1jaGFwdGVycy1idXR0b24gXCIgKyBfVGV4dFRyYWNrQnV0dG9uLnByb3RvdHlwZS5idWlsZFdyYXBwZXJDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIG1lbnUgYmFzZWQgb24gdGhlIGN1cnJlbnQgc3RhdGUgb2YgaXRzIGl0ZW1zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgICAqICAgICAgICBBbiBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGlzIGZ1bmN0aW9uIHRvIHJ1bi5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIFRleHRUcmFja0xpc3QjYWRkdHJhY2tcbiAgICAgKiBAbGlzdGVucyBUZXh0VHJhY2tMaXN0I3JlbW92ZXRyYWNrXG4gICAgICogQGxpc3RlbnMgVGV4dFRyYWNrTGlzdCNjaGFuZ2VcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGV2ZW50KSB7XG4gICAgICBpZiAoIXRoaXMudHJhY2tfIHx8IGV2ZW50ICYmIChldmVudC50eXBlID09PSAnYWRkdHJhY2snIHx8IGV2ZW50LnR5cGUgPT09ICdyZW1vdmV0cmFjaycpKSB7XG4gICAgICAgIHRoaXMuc2V0VHJhY2sodGhpcy5maW5kQ2hhcHRlcnNUcmFjaygpKTtcbiAgICAgIH1cblxuICAgICAgX1RleHRUcmFja0J1dHRvbi5wcm90b3R5cGUudXBkYXRlLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHRyYWNrIGZvciB0aGUgY2hhcHRlcnMgYnV0dG9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtUZXh0VHJhY2t9IHRyYWNrXG4gICAgICogICAgICAgIFRoZSBuZXcgdHJhY2sgdG8gc2VsZWN0LiBOb3RoaW5nIHdpbGwgY2hhbmdlIGlmIHRoaXMgaXMgdGhlIGN1cnJlbnRseSBzZWxlY3RlZFxuICAgICAqICAgICAgICB0cmFjay5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uc2V0VHJhY2sgPSBmdW5jdGlvbiBzZXRUcmFjayh0cmFjaykge1xuICAgICAgaWYgKHRoaXMudHJhY2tfID09PSB0cmFjaykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy51cGRhdGVIYW5kbGVyXykge1xuICAgICAgICB0aGlzLnVwZGF0ZUhhbmRsZXJfID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKTtcbiAgICAgIH0gLy8gaGVyZSB0aGlzLnRyYWNrXyByZWZlcnMgdG8gdGhlIG9sZCB0cmFjayBpbnN0YW5jZVxuXG5cbiAgICAgIGlmICh0aGlzLnRyYWNrXykge1xuICAgICAgICB2YXIgcmVtb3RlVGV4dFRyYWNrRWwgPSB0aGlzLnBsYXllcl8ucmVtb3RlVGV4dFRyYWNrRWxzKCkuZ2V0VHJhY2tFbGVtZW50QnlUcmFja18odGhpcy50cmFja18pO1xuXG4gICAgICAgIGlmIChyZW1vdGVUZXh0VHJhY2tFbCkge1xuICAgICAgICAgIHJlbW90ZVRleHRUcmFja0VsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB0aGlzLnVwZGF0ZUhhbmRsZXJfKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJhY2tfID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdGhpcy50cmFja18gPSB0cmFjazsgLy8gaGVyZSB0aGlzLnRyYWNrXyByZWZlcnMgdG8gdGhlIG5ldyB0cmFjayBpbnN0YW5jZVxuXG4gICAgICBpZiAodGhpcy50cmFja18pIHtcbiAgICAgICAgdGhpcy50cmFja18ubW9kZSA9ICdoaWRkZW4nO1xuXG4gICAgICAgIHZhciBfcmVtb3RlVGV4dFRyYWNrRWwgPSB0aGlzLnBsYXllcl8ucmVtb3RlVGV4dFRyYWNrRWxzKCkuZ2V0VHJhY2tFbGVtZW50QnlUcmFja18odGhpcy50cmFja18pO1xuXG4gICAgICAgIGlmIChfcmVtb3RlVGV4dFRyYWNrRWwpIHtcbiAgICAgICAgICBfcmVtb3RlVGV4dFRyYWNrRWwuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMudXBkYXRlSGFuZGxlcl8pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmQgdGhlIHRyYWNrIG9iamVjdCB0aGF0IGlzIGN1cnJlbnRseSBpbiB1c2UgYnkgdGhpcyBDaGFwdGVyc0J1dHRvblxuICAgICAqXG4gICAgICogQHJldHVybiB7VGV4dFRyYWNrfHVuZGVmaW5lZH1cbiAgICAgKiAgICAgICAgIFRoZSBjdXJyZW50IHRyYWNrIG9yIHVuZGVmaW5lZCBpZiBub25lIHdhcyBmb3VuZC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZmluZENoYXB0ZXJzVHJhY2sgPSBmdW5jdGlvbiBmaW5kQ2hhcHRlcnNUcmFjaygpIHtcbiAgICAgIHZhciB0cmFja3MgPSB0aGlzLnBsYXllcl8udGV4dFRyYWNrcygpIHx8IFtdO1xuXG4gICAgICBmb3IgKHZhciBpID0gdHJhY2tzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIC8vIFdlIHdpbGwgYWx3YXlzIGNob29zZSB0aGUgbGFzdCB0cmFjayBhcyBvdXIgY2hhcHRlcnNUcmFja1xuICAgICAgICB2YXIgdHJhY2sgPSB0cmFja3NbaV07XG5cbiAgICAgICAgaWYgKHRyYWNrLmtpbmQgPT09IHRoaXMua2luZF8pIHtcbiAgICAgICAgICByZXR1cm4gdHJhY2s7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjYXB0aW9uIGZvciB0aGUgQ2hhcHRlcnNCdXR0b24gYmFzZWQgb24gdGhlIHRyYWNrIGxhYmVsLiBUaGlzIHdpbGwgYWxzb1xuICAgICAqIHVzZSB0aGUgY3VycmVudCB0cmFja3MgbG9jYWxpemVkIGtpbmQgYXMgYSBmYWxsYmFjayBpZiBhIGxhYmVsIGRvZXMgbm90IGV4aXN0LlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgVGhlIHRyYWNrcyBjdXJyZW50IGxhYmVsIG9yIHRoZSBsb2NhbGl6ZWQgdHJhY2sga2luZC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZ2V0TWVudUNhcHRpb24gPSBmdW5jdGlvbiBnZXRNZW51Q2FwdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLnRyYWNrXyAmJiB0aGlzLnRyYWNrXy5sYWJlbCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFja18ubGFiZWw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmxvY2FsaXplKHRvVGl0bGVDYXNlKHRoaXMua2luZF8pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIG1lbnUgZnJvbSBjaGFwdGVyIHRyYWNrXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtNZW51fVxuICAgICAqICAgICAgICAgTmV3IG1lbnUgZm9yIHRoZSBjaGFwdGVyIGJ1dHRvbnNcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3JlYXRlTWVudSA9IGZ1bmN0aW9uIGNyZWF0ZU1lbnUoKSB7XG4gICAgICB0aGlzLm9wdGlvbnNfLnRpdGxlID0gdGhpcy5nZXRNZW51Q2FwdGlvbigpO1xuICAgICAgcmV0dXJuIF9UZXh0VHJhY2tCdXR0b24ucHJvdG90eXBlLmNyZWF0ZU1lbnUuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbWVudSBpdGVtIGZvciBlYWNoIHRleHQgdHJhY2tcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1RleHRUcmFja01lbnVJdGVtW119XG4gICAgICogICAgICAgICBBcnJheSBvZiBtZW51IGl0ZW1zXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNyZWF0ZUl0ZW1zID0gZnVuY3Rpb24gY3JlYXRlSXRlbXMoKSB7XG4gICAgICB2YXIgaXRlbXMgPSBbXTtcblxuICAgICAgaWYgKCF0aGlzLnRyYWNrXykge1xuICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICB9XG5cbiAgICAgIHZhciBjdWVzID0gdGhpcy50cmFja18uY3VlcztcblxuICAgICAgaWYgKCFjdWVzKSB7XG4gICAgICAgIHJldHVybiBpdGVtcztcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjdWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgY3VlID0gY3Vlc1tpXTtcbiAgICAgICAgdmFyIG1pID0gbmV3IENoYXB0ZXJzVHJhY2tNZW51SXRlbSh0aGlzLnBsYXllcl8sIHtcbiAgICAgICAgICB0cmFjazogdGhpcy50cmFja18sXG4gICAgICAgICAgY3VlOiBjdWVcbiAgICAgICAgfSk7XG4gICAgICAgIGl0ZW1zLnB1c2gobWkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaXRlbXM7XG4gICAgfTtcblxuICAgIHJldHVybiBDaGFwdGVyc0J1dHRvbjtcbiAgfShUZXh0VHJhY2tCdXR0b24pO1xuICAvKipcbiAgICogYGtpbmRgIG9mIFRleHRUcmFjayB0byBsb29rIGZvciB0byBhc3NvY2lhdGUgaXQgd2l0aCB0aGlzIG1lbnUuXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgQ2hhcHRlcnNCdXR0b24ucHJvdG90eXBlLmtpbmRfID0gJ2NoYXB0ZXJzJztcbiAgLyoqXG4gICAqIFRoZSB0ZXh0IHRoYXQgc2hvdWxkIGRpc3BsYXkgb3ZlciB0aGUgYENoYXB0ZXJzQnV0dG9uYHMgY29udHJvbHMuIEFkZGVkIGZvciBsb2NhbGl6YXRpb24uXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIENoYXB0ZXJzQnV0dG9uLnByb3RvdHlwZS5jb250cm9sVGV4dF8gPSAnQ2hhcHRlcnMnO1xuICBDb21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ0NoYXB0ZXJzQnV0dG9uJywgQ2hhcHRlcnNCdXR0b24pO1xuXG4gIC8qKlxuICAgKiBUaGUgYnV0dG9uIGNvbXBvbmVudCBmb3IgdG9nZ2xpbmcgYW5kIHNlbGVjdGluZyBkZXNjcmlwdGlvbnNcbiAgICpcbiAgICogQGV4dGVuZHMgVGV4dFRyYWNrQnV0dG9uXG4gICAqL1xuXG4gIHZhciBEZXNjcmlwdGlvbnNCdXR0b24gPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfVGV4dFRyYWNrQnV0dG9uKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoRGVzY3JpcHRpb25zQnV0dG9uLCBfVGV4dFRyYWNrQnV0dG9uKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICAgKiAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0NvbXBvbmVudH5SZWFkeUNhbGxiYWNrfSBbcmVhZHldXG4gICAgICogICAgICAgIFRoZSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhpcyBjb21wb25lbnQgaXMgcmVhZHkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRGVzY3JpcHRpb25zQnV0dG9uKHBsYXllciwgb3B0aW9ucywgcmVhZHkpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgX3RoaXMgPSBfVGV4dFRyYWNrQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zLCByZWFkeSkgfHwgdGhpcztcbiAgICAgIHZhciB0cmFja3MgPSBwbGF5ZXIudGV4dFRyYWNrcygpO1xuICAgICAgdmFyIGNoYW5nZUhhbmRsZXIgPSBiaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBfdGhpcy5oYW5kbGVUcmFja3NDaGFuZ2UpO1xuICAgICAgdHJhY2tzLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGNoYW5nZUhhbmRsZXIpO1xuXG4gICAgICBfdGhpcy5vbignZGlzcG9zZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJhY2tzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGNoYW5nZUhhbmRsZXIpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHRleHQgdHJhY2sgY2hhbmdlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBUaGUgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBydW5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIFRleHRUcmFja0xpc3QjY2hhbmdlXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBEZXNjcmlwdGlvbnNCdXR0b24ucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLmhhbmRsZVRyYWNrc0NoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZVRyYWNrc0NoYW5nZShldmVudCkge1xuICAgICAgdmFyIHRyYWNrcyA9IHRoaXMucGxheWVyKCkudGV4dFRyYWNrcygpO1xuICAgICAgdmFyIGRpc2FibGVkID0gZmFsc2U7IC8vIENoZWNrIHdoZXRoZXIgYSB0cmFjayBvZiBhIGRpZmZlcmVudCBraW5kIGlzIHNob3dpbmdcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0cmFja3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciB0cmFjayA9IHRyYWNrc1tpXTtcblxuICAgICAgICBpZiAodHJhY2sua2luZCAhPT0gdGhpcy5raW5kXyAmJiB0cmFjay5tb2RlID09PSAnc2hvd2luZycpIHtcbiAgICAgICAgICBkaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gSWYgYW5vdGhlciB0cmFjayBpcyBzaG93aW5nLCBkaXNhYmxlIHRoaXMgbWVudSBidXR0b25cblxuXG4gICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVuYWJsZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgdGhlIGRlZmF1bHQgRE9NIGBjbGFzc05hbWVgLlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgVGhlIERPTSBgY2xhc3NOYW1lYCBmb3IgdGhpcyBvYmplY3QuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgICAgcmV0dXJuIFwidmpzLWRlc2NyaXB0aW9ucy1idXR0b24gXCIgKyBfVGV4dFRyYWNrQnV0dG9uLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyk7XG4gICAgfTtcblxuICAgIF9wcm90by5idWlsZFdyYXBwZXJDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkV3JhcHBlckNTU0NsYXNzKCkge1xuICAgICAgcmV0dXJuIFwidmpzLWRlc2NyaXB0aW9ucy1idXR0b24gXCIgKyBfVGV4dFRyYWNrQnV0dG9uLnByb3RvdHlwZS5idWlsZFdyYXBwZXJDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRGVzY3JpcHRpb25zQnV0dG9uO1xuICB9KFRleHRUcmFja0J1dHRvbik7XG4gIC8qKlxuICAgKiBga2luZGAgb2YgVGV4dFRyYWNrIHRvIGxvb2sgZm9yIHRvIGFzc29jaWF0ZSBpdCB3aXRoIHRoaXMgbWVudS5cbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICBEZXNjcmlwdGlvbnNCdXR0b24ucHJvdG90eXBlLmtpbmRfID0gJ2Rlc2NyaXB0aW9ucyc7XG4gIC8qKlxuICAgKiBUaGUgdGV4dCB0aGF0IHNob3VsZCBkaXNwbGF5IG92ZXIgdGhlIGBEZXNjcmlwdGlvbnNCdXR0b25gcyBjb250cm9scy4gQWRkZWQgZm9yIGxvY2FsaXphdGlvbi5cbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgRGVzY3JpcHRpb25zQnV0dG9uLnByb3RvdHlwZS5jb250cm9sVGV4dF8gPSAnRGVzY3JpcHRpb25zJztcbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdEZXNjcmlwdGlvbnNCdXR0b24nLCBEZXNjcmlwdGlvbnNCdXR0b24pO1xuXG4gIC8qKlxuICAgKiBUaGUgYnV0dG9uIGNvbXBvbmVudCBmb3IgdG9nZ2xpbmcgYW5kIHNlbGVjdGluZyBzdWJ0aXRsZXNcbiAgICpcbiAgICogQGV4dGVuZHMgVGV4dFRyYWNrQnV0dG9uXG4gICAqL1xuXG4gIHZhciBTdWJ0aXRsZXNCdXR0b24gPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfVGV4dFRyYWNrQnV0dG9uKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoU3VidGl0bGVzQnV0dG9uLCBfVGV4dFRyYWNrQnV0dG9uKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICAgKiAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0NvbXBvbmVudH5SZWFkeUNhbGxiYWNrfSBbcmVhZHldXG4gICAgICogICAgICAgIFRoZSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhpcyBjb21wb25lbnQgaXMgcmVhZHkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gU3VidGl0bGVzQnV0dG9uKHBsYXllciwgb3B0aW9ucywgcmVhZHkpIHtcbiAgICAgIHJldHVybiBfVGV4dFRyYWNrQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zLCByZWFkeSkgfHwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVpbGRzIHRoZSBkZWZhdWx0IERPTSBgY2xhc3NOYW1lYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKiAgICAgICAgIFRoZSBET00gYGNsYXNzTmFtZWAgZm9yIHRoaXMgb2JqZWN0LlxuICAgICAqL1xuXG5cbiAgICB2YXIgX3Byb3RvID0gU3VidGl0bGVzQnV0dG9uLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRDU1NDbGFzcygpIHtcbiAgICAgIHJldHVybiBcInZqcy1zdWJ0aXRsZXMtYnV0dG9uIFwiICsgX1RleHRUcmFja0J1dHRvbi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uYnVpbGRXcmFwcGVyQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZFdyYXBwZXJDU1NDbGFzcygpIHtcbiAgICAgIHJldHVybiBcInZqcy1zdWJ0aXRsZXMtYnV0dG9uIFwiICsgX1RleHRUcmFja0J1dHRvbi5wcm90b3R5cGUuYnVpbGRXcmFwcGVyQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFN1YnRpdGxlc0J1dHRvbjtcbiAgfShUZXh0VHJhY2tCdXR0b24pO1xuICAvKipcbiAgICogYGtpbmRgIG9mIFRleHRUcmFjayB0byBsb29rIGZvciB0byBhc3NvY2lhdGUgaXQgd2l0aCB0aGlzIG1lbnUuXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgU3VidGl0bGVzQnV0dG9uLnByb3RvdHlwZS5raW5kXyA9ICdzdWJ0aXRsZXMnO1xuICAvKipcbiAgICogVGhlIHRleHQgdGhhdCBzaG91bGQgZGlzcGxheSBvdmVyIHRoZSBgU3VidGl0bGVzQnV0dG9uYHMgY29udHJvbHMuIEFkZGVkIGZvciBsb2NhbGl6YXRpb24uXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIFN1YnRpdGxlc0J1dHRvbi5wcm90b3R5cGUuY29udHJvbFRleHRfID0gJ1N1YnRpdGxlcyc7XG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnU3VidGl0bGVzQnV0dG9uJywgU3VidGl0bGVzQnV0dG9uKTtcblxuICAvKipcbiAgICogVGhlIG1lbnUgaXRlbSBmb3IgY2FwdGlvbiB0cmFjayBzZXR0aW5ncyBtZW51XG4gICAqXG4gICAqIEBleHRlbmRzIFRleHRUcmFja01lbnVJdGVtXG4gICAqL1xuXG4gIHZhciBDYXB0aW9uU2V0dGluZ3NNZW51SXRlbSA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9UZXh0VHJhY2tNZW51SXRlbSkge1xuICAgIF9pbmhlcml0c0xvb3NlKENhcHRpb25TZXR0aW5nc01lbnVJdGVtLCBfVGV4dFRyYWNrTWVudUl0ZW0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDYXB0aW9uU2V0dGluZ3NNZW51SXRlbShwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgb3B0aW9ucy50cmFjayA9IHtcbiAgICAgICAgcGxheWVyOiBwbGF5ZXIsXG4gICAgICAgIGtpbmQ6IG9wdGlvbnMua2luZCxcbiAgICAgICAgbGFiZWw6IG9wdGlvbnMua2luZCArICcgc2V0dGluZ3MnLFxuICAgICAgICBzZWxlY3RhYmxlOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgICAgIG1vZGU6ICdkaXNhYmxlZCdcbiAgICAgIH07IC8vIENhcHRpb25TZXR0aW5nc01lbnVJdGVtIGhhcyBubyBjb25jZXB0IG9mICdzZWxlY3RlZCdcblxuICAgICAgb3B0aW9ucy5zZWxlY3RhYmxlID0gZmFsc2U7XG4gICAgICBvcHRpb25zLm5hbWUgPSAnQ2FwdGlvblNldHRpbmdzTWVudUl0ZW0nO1xuICAgICAgX3RoaXMgPSBfVGV4dFRyYWNrTWVudUl0ZW0uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG5cbiAgICAgIF90aGlzLmFkZENsYXNzKCd2anMtdGV4dHRyYWNrLXNldHRpbmdzJyk7XG5cbiAgICAgIF90aGlzLmNvbnRyb2xUZXh0KCcsIG9wZW5zICcgKyBvcHRpb25zLmtpbmQgKyAnIHNldHRpbmdzIGRpYWxvZycpO1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhbiBgQ2FwdGlvblNldHRpbmdzTWVudUl0ZW1gIGlzIFwiY2xpY2tlZFwiLiBTZWVcbiAgICAgKiB7QGxpbmsgQ2xpY2thYmxlQ29tcG9uZW50fSBmb3IgbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiBvbiB3aGF0IGEgY2xpY2sgY2FuIGJlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgICAqICAgICAgICBUaGUgYGtleWRvd25gLCBgdGFwYCwgb3IgYGNsaWNrYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlXG4gICAgICogICAgICAgIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIHRhcFxuICAgICAqIEBsaXN0ZW5zIGNsaWNrXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBDYXB0aW9uU2V0dGluZ3NNZW51SXRlbS5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljayhldmVudCkge1xuICAgICAgdGhpcy5wbGF5ZXIoKS5nZXRDaGlsZCgndGV4dFRyYWNrU2V0dGluZ3MnKS5vcGVuKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBDYXB0aW9uU2V0dGluZ3NNZW51SXRlbTtcbiAgfShUZXh0VHJhY2tNZW51SXRlbSk7XG5cbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdDYXB0aW9uU2V0dGluZ3NNZW51SXRlbScsIENhcHRpb25TZXR0aW5nc01lbnVJdGVtKTtcblxuICAvKipcbiAgICogVGhlIGJ1dHRvbiBjb21wb25lbnQgZm9yIHRvZ2dsaW5nIGFuZCBzZWxlY3RpbmcgY2FwdGlvbnNcbiAgICpcbiAgICogQGV4dGVuZHMgVGV4dFRyYWNrQnV0dG9uXG4gICAqL1xuXG4gIHZhciBDYXB0aW9uc0J1dHRvbiA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9UZXh0VHJhY2tCdXR0b24pIHtcbiAgICBfaW5oZXJpdHNMb29zZShDYXB0aW9uc0J1dHRvbiwgX1RleHRUcmFja0J1dHRvbik7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDb21wb25lbnR+UmVhZHlDYWxsYmFja30gW3JlYWR5XVxuICAgICAqICAgICAgICBUaGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoaXMgY29tcG9uZW50IGlzIHJlYWR5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENhcHRpb25zQnV0dG9uKHBsYXllciwgb3B0aW9ucywgcmVhZHkpIHtcbiAgICAgIHJldHVybiBfVGV4dFRyYWNrQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zLCByZWFkeSkgfHwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVpbGRzIHRoZSBkZWZhdWx0IERPTSBgY2xhc3NOYW1lYC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKiAgICAgICAgIFRoZSBET00gYGNsYXNzTmFtZWAgZm9yIHRoaXMgb2JqZWN0LlxuICAgICAqL1xuXG5cbiAgICB2YXIgX3Byb3RvID0gQ2FwdGlvbnNCdXR0b24ucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgICAgcmV0dXJuIFwidmpzLWNhcHRpb25zLWJ1dHRvbiBcIiArIF9UZXh0VHJhY2tCdXR0b24ucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmJ1aWxkV3JhcHBlckNTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRXcmFwcGVyQ1NTQ2xhc3MoKSB7XG4gICAgICByZXR1cm4gXCJ2anMtY2FwdGlvbnMtYnV0dG9uIFwiICsgX1RleHRUcmFja0J1dHRvbi5wcm90b3R5cGUuYnVpbGRXcmFwcGVyQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGNhcHRpb24gbWVudSBpdGVtc1xuICAgICAqXG4gICAgICogQHJldHVybiB7Q2FwdGlvblNldHRpbmdzTWVudUl0ZW1bXX1cbiAgICAgKiAgICAgICAgIFRoZSBhcnJheSBvZiBjdXJyZW50IG1lbnUgaXRlbXMuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNyZWF0ZUl0ZW1zID0gZnVuY3Rpb24gY3JlYXRlSXRlbXMoKSB7XG4gICAgICB2YXIgaXRlbXMgPSBbXTtcblxuICAgICAgaWYgKCEodGhpcy5wbGF5ZXIoKS50ZWNoXyAmJiB0aGlzLnBsYXllcigpLnRlY2hfLmZlYXR1cmVzTmF0aXZlVGV4dFRyYWNrcykgJiYgdGhpcy5wbGF5ZXIoKS5nZXRDaGlsZCgndGV4dFRyYWNrU2V0dGluZ3MnKSkge1xuICAgICAgICBpdGVtcy5wdXNoKG5ldyBDYXB0aW9uU2V0dGluZ3NNZW51SXRlbSh0aGlzLnBsYXllcl8sIHtcbiAgICAgICAgICBraW5kOiB0aGlzLmtpbmRfXG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5oaWRlVGhyZXNob2xkXyArPSAxO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX1RleHRUcmFja0J1dHRvbi5wcm90b3R5cGUuY3JlYXRlSXRlbXMuY2FsbCh0aGlzLCBpdGVtcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBDYXB0aW9uc0J1dHRvbjtcbiAgfShUZXh0VHJhY2tCdXR0b24pO1xuICAvKipcbiAgICogYGtpbmRgIG9mIFRleHRUcmFjayB0byBsb29rIGZvciB0byBhc3NvY2lhdGUgaXQgd2l0aCB0aGlzIG1lbnUuXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgQ2FwdGlvbnNCdXR0b24ucHJvdG90eXBlLmtpbmRfID0gJ2NhcHRpb25zJztcbiAgLyoqXG4gICAqIFRoZSB0ZXh0IHRoYXQgc2hvdWxkIGRpc3BsYXkgb3ZlciB0aGUgYENhcHRpb25zQnV0dG9uYHMgY29udHJvbHMuIEFkZGVkIGZvciBsb2NhbGl6YXRpb24uXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIENhcHRpb25zQnV0dG9uLnByb3RvdHlwZS5jb250cm9sVGV4dF8gPSAnQ2FwdGlvbnMnO1xuICBDb21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ0NhcHRpb25zQnV0dG9uJywgQ2FwdGlvbnNCdXR0b24pO1xuXG4gIC8qKlxuICAgKiBTdWJzQ2Fwc01lbnVJdGVtIGhhcyBhbiBbY2NdIGljb24gdG8gZGlzdGluZ3Vpc2ggY2FwdGlvbnMgZnJvbSBzdWJ0aXRsZXNcbiAgICogaW4gdGhlIFN1YnNDYXBzTWVudS5cbiAgICpcbiAgICogQGV4dGVuZHMgVGV4dFRyYWNrTWVudUl0ZW1cbiAgICovXG5cbiAgdmFyIFN1YnNDYXBzTWVudUl0ZW0gPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfVGV4dFRyYWNrTWVudUl0ZW0pIHtcbiAgICBfaW5oZXJpdHNMb29zZShTdWJzQ2Fwc01lbnVJdGVtLCBfVGV4dFRyYWNrTWVudUl0ZW0pO1xuXG4gICAgZnVuY3Rpb24gU3Vic0NhcHNNZW51SXRlbSgpIHtcbiAgICAgIHJldHVybiBfVGV4dFRyYWNrTWVudUl0ZW0uYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBTdWJzQ2Fwc01lbnVJdGVtLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsKHR5cGUsIHByb3BzLCBhdHRycykge1xuICAgICAgdmFyIGlubmVySFRNTCA9IFwiPHNwYW4gY2xhc3M9XFxcInZqcy1tZW51LWl0ZW0tdGV4dFxcXCI+XCIgKyB0aGlzLmxvY2FsaXplKHRoaXMub3B0aW9uc18ubGFiZWwpO1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zXy50cmFjay5raW5kID09PSAnY2FwdGlvbnMnKSB7XG4gICAgICAgIGlubmVySFRNTCArPSBcIlxcbiAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XFxcInRydWVcXFwiIGNsYXNzPVxcXCJ2anMtaWNvbi1wbGFjZWhvbGRlclxcXCI+PC9zcGFuPlxcbiAgICAgICAgPHNwYW4gY2xhc3M9XFxcInZqcy1jb250cm9sLXRleHRcXFwiPiBcIiArIHRoaXMubG9jYWxpemUoJ0NhcHRpb25zJykgKyBcIjwvc3Bhbj5cXG4gICAgICBcIjtcbiAgICAgIH1cblxuICAgICAgaW5uZXJIVE1MICs9ICc8L3NwYW4+JztcblxuICAgICAgdmFyIGVsID0gX1RleHRUcmFja01lbnVJdGVtLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsIHR5cGUsIGFzc2lnbih7XG4gICAgICAgIGlubmVySFRNTDogaW5uZXJIVE1MXG4gICAgICB9LCBwcm9wcyksIGF0dHJzKTtcblxuICAgICAgcmV0dXJuIGVsO1xuICAgIH07XG5cbiAgICByZXR1cm4gU3Vic0NhcHNNZW51SXRlbTtcbiAgfShUZXh0VHJhY2tNZW51SXRlbSk7XG5cbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdTdWJzQ2Fwc01lbnVJdGVtJywgU3Vic0NhcHNNZW51SXRlbSk7XG5cbiAgLyoqXG4gICAqIFRoZSBidXR0b24gY29tcG9uZW50IGZvciB0b2dnbGluZyBhbmQgc2VsZWN0aW5nIGNhcHRpb25zIGFuZC9vciBzdWJ0aXRsZXNcbiAgICpcbiAgICogQGV4dGVuZHMgVGV4dFRyYWNrQnV0dG9uXG4gICAqL1xuXG4gIHZhciBTdWJzQ2Fwc0J1dHRvbiA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9UZXh0VHJhY2tCdXR0b24pIHtcbiAgICBfaW5oZXJpdHNMb29zZShTdWJzQ2Fwc0J1dHRvbiwgX1RleHRUcmFja0J1dHRvbik7XG5cbiAgICBmdW5jdGlvbiBTdWJzQ2Fwc0J1dHRvbihwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG5cbiAgICAgIF90aGlzID0gX1RleHRUcmFja0J1dHRvbi5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpczsgLy8gQWx0aG91Z2ggTm9ydGggQW1lcmljYSB1c2VzIFwiY2FwdGlvbnNcIiBpbiBtb3N0IGNhc2VzIGZvclxuICAgICAgLy8gXCJjYXB0aW9ucyBhbmQgc3VidGl0bGVzXCIgb3RoZXIgbG9jYWxlcyB1c2UgXCJzdWJ0aXRsZXNcIlxuXG4gICAgICBfdGhpcy5sYWJlbF8gPSAnc3VidGl0bGVzJztcblxuICAgICAgaWYgKFsnZW4nLCAnZW4tdXMnLCAnZW4tY2EnLCAnZnItY2EnXS5pbmRleE9mKF90aGlzLnBsYXllcl8ubGFuZ3VhZ2VfKSA+IC0xKSB7XG4gICAgICAgIF90aGlzLmxhYmVsXyA9ICdjYXB0aW9ucyc7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLm1lbnVCdXR0b25fLmNvbnRyb2xUZXh0KHRvVGl0bGVDYXNlKF90aGlzLmxhYmVsXykpO1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1aWxkcyB0aGUgZGVmYXVsdCBET00gYGNsYXNzTmFtZWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogICAgICAgICBUaGUgRE9NIGBjbGFzc05hbWVgIGZvciB0aGlzIG9iamVjdC5cbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90byA9IFN1YnNDYXBzQnV0dG9uLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRDU1NDbGFzcygpIHtcbiAgICAgIHJldHVybiBcInZqcy1zdWJzLWNhcHMtYnV0dG9uIFwiICsgX1RleHRUcmFja0J1dHRvbi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uYnVpbGRXcmFwcGVyQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZFdyYXBwZXJDU1NDbGFzcygpIHtcbiAgICAgIHJldHVybiBcInZqcy1zdWJzLWNhcHMtYnV0dG9uIFwiICsgX1RleHRUcmFja0J1dHRvbi5wcm90b3R5cGUuYnVpbGRXcmFwcGVyQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGNhcHRpb24vc3VidGl0bGVzIG1lbnUgaXRlbXNcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0NhcHRpb25TZXR0aW5nc01lbnVJdGVtW119XG4gICAgICogICAgICAgICBUaGUgYXJyYXkgb2YgY3VycmVudCBtZW51IGl0ZW1zLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jcmVhdGVJdGVtcyA9IGZ1bmN0aW9uIGNyZWF0ZUl0ZW1zKCkge1xuICAgICAgdmFyIGl0ZW1zID0gW107XG5cbiAgICAgIGlmICghKHRoaXMucGxheWVyKCkudGVjaF8gJiYgdGhpcy5wbGF5ZXIoKS50ZWNoXy5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MpICYmIHRoaXMucGxheWVyKCkuZ2V0Q2hpbGQoJ3RleHRUcmFja1NldHRpbmdzJykpIHtcbiAgICAgICAgaXRlbXMucHVzaChuZXcgQ2FwdGlvblNldHRpbmdzTWVudUl0ZW0odGhpcy5wbGF5ZXJfLCB7XG4gICAgICAgICAga2luZDogdGhpcy5sYWJlbF9cbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLmhpZGVUaHJlc2hvbGRfICs9IDE7XG4gICAgICB9XG5cbiAgICAgIGl0ZW1zID0gX1RleHRUcmFja0J1dHRvbi5wcm90b3R5cGUuY3JlYXRlSXRlbXMuY2FsbCh0aGlzLCBpdGVtcywgU3Vic0NhcHNNZW51SXRlbSk7XG4gICAgICByZXR1cm4gaXRlbXM7XG4gICAgfTtcblxuICAgIHJldHVybiBTdWJzQ2Fwc0J1dHRvbjtcbiAgfShUZXh0VHJhY2tCdXR0b24pO1xuICAvKipcbiAgICogYGtpbmRgcyBvZiBUZXh0VHJhY2sgdG8gbG9vayBmb3IgdG8gYXNzb2NpYXRlIGl0IHdpdGggdGhpcyBtZW51LlxuICAgKlxuICAgKiBAdHlwZSB7YXJyYXl9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgU3Vic0NhcHNCdXR0b24ucHJvdG90eXBlLmtpbmRzXyA9IFsnY2FwdGlvbnMnLCAnc3VidGl0bGVzJ107XG4gIC8qKlxuICAgKiBUaGUgdGV4dCB0aGF0IHNob3VsZCBkaXNwbGF5IG92ZXIgdGhlIGBTdWJzQ2Fwc0J1dHRvbmBzIGNvbnRyb2xzLlxuICAgKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBTdWJzQ2Fwc0J1dHRvbi5wcm90b3R5cGUuY29udHJvbFRleHRfID0gJ1N1YnRpdGxlcyc7XG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnU3Vic0NhcHNCdXR0b24nLCBTdWJzQ2Fwc0J1dHRvbik7XG5cbiAgLyoqXG4gICAqIEFuIHtAbGluayBBdWRpb1RyYWNrfSB7QGxpbmsgTWVudUl0ZW19XG4gICAqXG4gICAqIEBleHRlbmRzIE1lbnVJdGVtXG4gICAqL1xuXG4gIHZhciBBdWRpb1RyYWNrTWVudUl0ZW0gPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfTWVudUl0ZW0pIHtcbiAgICBfaW5oZXJpdHNMb29zZShBdWRpb1RyYWNrTWVudUl0ZW0sIF9NZW51SXRlbSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEF1ZGlvVHJhY2tNZW51SXRlbShwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgdmFyIHRyYWNrID0gb3B0aW9ucy50cmFjaztcbiAgICAgIHZhciB0cmFja3MgPSBwbGF5ZXIuYXVkaW9UcmFja3MoKTsgLy8gTW9kaWZ5IG9wdGlvbnMgZm9yIHBhcmVudCBNZW51SXRlbSBjbGFzcydzIGluaXQuXG5cbiAgICAgIG9wdGlvbnMubGFiZWwgPSB0cmFjay5sYWJlbCB8fCB0cmFjay5sYW5ndWFnZSB8fCAnVW5rbm93bic7XG4gICAgICBvcHRpb25zLnNlbGVjdGVkID0gdHJhY2suZW5hYmxlZDtcbiAgICAgIF90aGlzID0gX01lbnVJdGVtLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgICAgX3RoaXMudHJhY2sgPSB0cmFjaztcblxuICAgICAgX3RoaXMuYWRkQ2xhc3MoXCJ2anMtXCIgKyB0cmFjay5raW5kICsgXCItbWVudS1pdGVtXCIpO1xuXG4gICAgICB2YXIgY2hhbmdlSGFuZGxlciA9IGZ1bmN0aW9uIGNoYW5nZUhhbmRsZXIoKSB7XG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpcy5oYW5kbGVUcmFja3NDaGFuZ2UuYXBwbHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIGFyZ3MpO1xuICAgICAgfTtcblxuICAgICAgdHJhY2tzLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGNoYW5nZUhhbmRsZXIpO1xuXG4gICAgICBfdGhpcy5vbignZGlzcG9zZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJhY2tzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGNoYW5nZUhhbmRsZXIpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvID0gQXVkaW9UcmFja01lbnVJdGVtLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsKHR5cGUsIHByb3BzLCBhdHRycykge1xuICAgICAgdmFyIGlubmVySFRNTCA9IFwiPHNwYW4gY2xhc3M9XFxcInZqcy1tZW51LWl0ZW0tdGV4dFxcXCI+XCIgKyB0aGlzLmxvY2FsaXplKHRoaXMub3B0aW9uc18ubGFiZWwpO1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zXy50cmFjay5raW5kID09PSAnbWFpbi1kZXNjJykge1xuICAgICAgICBpbm5lckhUTUwgKz0gXCJcXG4gICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIiBjbGFzcz1cXFwidmpzLWljb24tcGxhY2Vob2xkZXJcXFwiPjwvc3Bhbj5cXG4gICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ2anMtY29udHJvbC10ZXh0XFxcIj4gXCIgKyB0aGlzLmxvY2FsaXplKCdEZXNjcmlwdGlvbnMnKSArIFwiPC9zcGFuPlxcbiAgICAgIFwiO1xuICAgICAgfVxuXG4gICAgICBpbm5lckhUTUwgKz0gJzwvc3Bhbj4nO1xuXG4gICAgICB2YXIgZWwgPSBfTWVudUl0ZW0ucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgdHlwZSwgYXNzaWduKHtcbiAgICAgICAgaW5uZXJIVE1MOiBpbm5lckhUTUxcbiAgICAgIH0sIHByb3BzKSwgYXR0cnMpO1xuXG4gICAgICByZXR1cm4gZWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhbiBgQXVkaW9UcmFja01lbnVJdGVtIGlzIFwiY2xpY2tlZFwiLiBTZWUge0BsaW5rIENsaWNrYWJsZUNvbXBvbmVudH1cbiAgICAgKiBmb3IgbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiBvbiB3aGF0IGEgY2xpY2sgY2FuIGJlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgICAqICAgICAgICBUaGUgYGtleWRvd25gLCBgdGFwYCwgb3IgYGNsaWNrYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlXG4gICAgICogICAgICAgIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIHRhcFxuICAgICAqIEBsaXN0ZW5zIGNsaWNrXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZUNsaWNrID0gZnVuY3Rpb24gaGFuZGxlQ2xpY2soZXZlbnQpIHtcbiAgICAgIHZhciB0cmFja3MgPSB0aGlzLnBsYXllcl8uYXVkaW9UcmFja3MoKTtcblxuICAgICAgX01lbnVJdGVtLnByb3RvdHlwZS5oYW5kbGVDbGljay5jYWxsKHRoaXMsIGV2ZW50KTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRyYWNrID0gdHJhY2tzW2ldO1xuICAgICAgICB0cmFjay5lbmFibGVkID0gdHJhY2sgPT09IHRoaXMudHJhY2s7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBhbnkge0BsaW5rIEF1ZGlvVHJhY2t9IGNoYW5nZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IFtldmVudF1cbiAgICAgKiAgICAgICAgVGhlIHtAbGluayBBdWRpb1RyYWNrTGlzdCNjaGFuZ2V9IGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgdG8gcnVuLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgQXVkaW9UcmFja0xpc3QjY2hhbmdlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZVRyYWNrc0NoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZVRyYWNrc0NoYW5nZShldmVudCkge1xuICAgICAgdGhpcy5zZWxlY3RlZCh0aGlzLnRyYWNrLmVuYWJsZWQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQXVkaW9UcmFja01lbnVJdGVtO1xuICB9KE1lbnVJdGVtKTtcblxuICBDb21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ0F1ZGlvVHJhY2tNZW51SXRlbScsIEF1ZGlvVHJhY2tNZW51SXRlbSk7XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGNsYXNzIGZvciBidXR0b25zIHRoYXQgdG9nZ2xlIHNwZWNpZmljIHtAbGluayBBdWRpb1RyYWNrfSB0eXBlcy5cbiAgICpcbiAgICogQGV4dGVuZHMgVHJhY2tCdXR0b25cbiAgICovXG5cbiAgdmFyIEF1ZGlvVHJhY2tCdXR0b24gPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfVHJhY2tCdXR0b24pIHtcbiAgICBfaW5oZXJpdHNMb29zZShBdWRpb1RyYWNrQnV0dG9uLCBfVHJhY2tCdXR0b24pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV1cbiAgICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBdWRpb1RyYWNrQnV0dG9uKHBsYXllciwgb3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMudHJhY2tzID0gcGxheWVyLmF1ZGlvVHJhY2tzKCk7XG4gICAgICByZXR1cm4gX1RyYWNrQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgdGhlIGRlZmF1bHQgRE9NIGBjbGFzc05hbWVgLlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgVGhlIERPTSBgY2xhc3NOYW1lYCBmb3IgdGhpcyBvYmplY3QuXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBBdWRpb1RyYWNrQnV0dG9uLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRDU1NDbGFzcygpIHtcbiAgICAgIHJldHVybiBcInZqcy1hdWRpby1idXR0b24gXCIgKyBfVHJhY2tCdXR0b24ucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmJ1aWxkV3JhcHBlckNTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRXcmFwcGVyQ1NTQ2xhc3MoKSB7XG4gICAgICByZXR1cm4gXCJ2anMtYXVkaW8tYnV0dG9uIFwiICsgX1RyYWNrQnV0dG9uLnByb3RvdHlwZS5idWlsZFdyYXBwZXJDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBtZW51IGl0ZW0gZm9yIGVhY2ggYXVkaW8gdHJhY2tcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXVkaW9UcmFja01lbnVJdGVtW119IFtpdGVtcz1bXV1cbiAgICAgKiAgICAgICAgQW4gYXJyYXkgb2YgZXhpc3RpbmcgbWVudSBpdGVtcyB0byB1c2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtBdWRpb1RyYWNrTWVudUl0ZW1bXX1cbiAgICAgKiAgICAgICAgIEFuIGFycmF5IG9mIG1lbnUgaXRlbXNcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3JlYXRlSXRlbXMgPSBmdW5jdGlvbiBjcmVhdGVJdGVtcyhpdGVtcykge1xuICAgICAgaWYgKGl0ZW1zID09PSB2b2lkIDApIHtcbiAgICAgICAgaXRlbXMgPSBbXTtcbiAgICAgIH1cblxuICAgICAgLy8gaWYgdGhlcmUncyBvbmx5IG9uZSBhdWRpbyB0cmFjaywgdGhlcmUgbm8gcG9pbnQgaW4gc2hvd2luZyBpdFxuICAgICAgdGhpcy5oaWRlVGhyZXNob2xkXyA9IDE7XG4gICAgICB2YXIgdHJhY2tzID0gdGhpcy5wbGF5ZXJfLmF1ZGlvVHJhY2tzKCk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0cmFjayA9IHRyYWNrc1tpXTtcbiAgICAgICAgaXRlbXMucHVzaChuZXcgQXVkaW9UcmFja01lbnVJdGVtKHRoaXMucGxheWVyXywge1xuICAgICAgICAgIHRyYWNrOiB0cmFjayxcbiAgICAgICAgICAvLyBNZW51SXRlbSBpcyBzZWxlY3RhYmxlXG4gICAgICAgICAgc2VsZWN0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAvLyBNZW51SXRlbSBpcyBOT1QgbXVsdGlTZWxlY3RhYmxlIChpLmUuIG9ubHkgb25lIGNhbiBiZSBtYXJrZWQgXCJzZWxlY3RlZFwiIGF0IGEgdGltZSlcbiAgICAgICAgICBtdWx0aVNlbGVjdGFibGU6IGZhbHNlXG4gICAgICAgIH0pKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgIH07XG5cbiAgICByZXR1cm4gQXVkaW9UcmFja0J1dHRvbjtcbiAgfShUcmFja0J1dHRvbik7XG4gIC8qKlxuICAgKiBUaGUgdGV4dCB0aGF0IHNob3VsZCBkaXNwbGF5IG92ZXIgdGhlIGBBdWRpb1RyYWNrQnV0dG9uYHMgY29udHJvbHMuIEFkZGVkIGZvciBsb2NhbGl6YXRpb24uXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgQXVkaW9UcmFja0J1dHRvbi5wcm90b3R5cGUuY29udHJvbFRleHRfID0gJ0F1ZGlvIFRyYWNrJztcbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdBdWRpb1RyYWNrQnV0dG9uJywgQXVkaW9UcmFja0J1dHRvbik7XG5cbiAgLyoqXG4gICAqIFRoZSBzcGVjaWZpYyBtZW51IGl0ZW0gdHlwZSBmb3Igc2VsZWN0aW5nIGEgcGxheWJhY2sgcmF0ZS5cbiAgICpcbiAgICogQGV4dGVuZHMgTWVudUl0ZW1cbiAgICovXG5cbiAgdmFyIFBsYXliYWNrUmF0ZU1lbnVJdGVtID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX01lbnVJdGVtKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoUGxheWJhY2tSYXRlTWVudUl0ZW0sIF9NZW51SXRlbSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBsYXliYWNrUmF0ZU1lbnVJdGVtKHBsYXllciwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICB2YXIgbGFiZWwgPSBvcHRpb25zLnJhdGU7XG4gICAgICB2YXIgcmF0ZSA9IHBhcnNlRmxvYXQobGFiZWwsIDEwKTsgLy8gTW9kaWZ5IG9wdGlvbnMgZm9yIHBhcmVudCBNZW51SXRlbSBjbGFzcydzIGluaXQuXG5cbiAgICAgIG9wdGlvbnMubGFiZWwgPSBsYWJlbDtcbiAgICAgIG9wdGlvbnMuc2VsZWN0ZWQgPSByYXRlID09PSAxO1xuICAgICAgb3B0aW9ucy5zZWxlY3RhYmxlID0gdHJ1ZTtcbiAgICAgIG9wdGlvbnMubXVsdGlTZWxlY3RhYmxlID0gZmFsc2U7XG4gICAgICBfdGhpcyA9IF9NZW51SXRlbS5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcbiAgICAgIF90aGlzLmxhYmVsID0gbGFiZWw7XG4gICAgICBfdGhpcy5yYXRlID0gcmF0ZTtcblxuICAgICAgX3RoaXMub24ocGxheWVyLCAncmF0ZWNoYW5nZScsIF90aGlzLnVwZGF0ZSk7XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBnZXRzIGNhbGxlZCB3aGVuIGFuIGBQbGF5YmFja1JhdGVNZW51SXRlbWAgaXMgXCJjbGlja2VkXCIuIFNlZVxuICAgICAqIHtAbGluayBDbGlja2FibGVDb21wb25lbnR9IGZvciBtb3JlIGRldGFpbGVkIGluZm9ybWF0aW9uIG9uIHdoYXQgYSBjbGljayBjYW4gYmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAgICogICAgICAgIFRoZSBga2V5ZG93bmAsIGB0YXBgLCBvciBgY2xpY2tgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmVcbiAgICAgKiAgICAgICAgY2FsbGVkLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgdGFwXG4gICAgICogQGxpc3RlbnMgY2xpY2tcbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90byA9IFBsYXliYWNrUmF0ZU1lbnVJdGVtLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XG4gICAgICBfTWVudUl0ZW0ucHJvdG90eXBlLmhhbmRsZUNsaWNrLmNhbGwodGhpcyk7XG5cbiAgICAgIHRoaXMucGxheWVyKCkucGxheWJhY2tSYXRlKHRoaXMucmF0ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgUGxheWJhY2tSYXRlTWVudUl0ZW0gd2hlbiB0aGUgcGxheWJhY2tyYXRlIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAgICogICAgICAgIFRoZSBgcmF0ZWNoYW5nZWAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBydW4uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBQbGF5ZXIjcmF0ZWNoYW5nZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZXZlbnQpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWQodGhpcy5wbGF5ZXIoKS5wbGF5YmFja1JhdGUoKSA9PT0gdGhpcy5yYXRlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBsYXliYWNrUmF0ZU1lbnVJdGVtO1xuICB9KE1lbnVJdGVtKTtcbiAgLyoqXG4gICAqIFRoZSB0ZXh0IHRoYXQgc2hvdWxkIGRpc3BsYXkgb3ZlciB0aGUgYFBsYXliYWNrUmF0ZU1lbnVJdGVtYHMgY29udHJvbHMuIEFkZGVkIGZvciBsb2NhbGl6YXRpb24uXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgUGxheWJhY2tSYXRlTWVudUl0ZW0ucHJvdG90eXBlLmNvbnRlbnRFbFR5cGUgPSAnYnV0dG9uJztcbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdQbGF5YmFja1JhdGVNZW51SXRlbScsIFBsYXliYWNrUmF0ZU1lbnVJdGVtKTtcblxuICAvKipcbiAgICogVGhlIGNvbXBvbmVudCBmb3IgY29udHJvbGxpbmcgdGhlIHBsYXliYWNrIHJhdGUuXG4gICAqXG4gICAqIEBleHRlbmRzIE1lbnVCdXR0b25cbiAgICovXG5cbiAgdmFyIFBsYXliYWNrUmF0ZU1lbnVCdXR0b24gPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfTWVudUJ1dHRvbikge1xuICAgIF9pbmhlcml0c0xvb3NlKFBsYXliYWNrUmF0ZU1lbnVCdXR0b24sIF9NZW51QnV0dG9uKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICAgKiAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUGxheWJhY2tSYXRlTWVudUJ1dHRvbihwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgX3RoaXMgPSBfTWVudUJ1dHRvbi5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcblxuICAgICAgX3RoaXMudXBkYXRlVmlzaWJpbGl0eSgpO1xuXG4gICAgICBfdGhpcy51cGRhdGVMYWJlbCgpO1xuXG4gICAgICBfdGhpcy5vbihwbGF5ZXIsICdsb2Fkc3RhcnQnLCBfdGhpcy51cGRhdGVWaXNpYmlsaXR5KTtcblxuICAgICAgX3RoaXMub24ocGxheWVyLCAncmF0ZWNoYW5nZScsIF90aGlzLnVwZGF0ZUxhYmVsKTtcblxuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgJ3MgRE9NIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqL1xuXG5cbiAgICB2YXIgX3Byb3RvID0gUGxheWJhY2tSYXRlTWVudUJ1dHRvbi5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSgpIHtcbiAgICAgIHZhciBlbCA9IF9NZW51QnV0dG9uLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMpO1xuXG4gICAgICB0aGlzLmxhYmVsRWxfID0gY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAndmpzLXBsYXliYWNrLXJhdGUtdmFsdWUnLFxuICAgICAgICBpbm5lckhUTUw6ICcxeCdcbiAgICAgIH0pO1xuICAgICAgZWwuYXBwZW5kQ2hpbGQodGhpcy5sYWJlbEVsXyk7XG4gICAgICByZXR1cm4gZWw7XG4gICAgfTtcblxuICAgIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgIHRoaXMubGFiZWxFbF8gPSBudWxsO1xuXG4gICAgICBfTWVudUJ1dHRvbi5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgdGhlIGRlZmF1bHQgRE9NIGBjbGFzc05hbWVgLlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgVGhlIERPTSBgY2xhc3NOYW1lYCBmb3IgdGhpcyBvYmplY3QuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgICAgcmV0dXJuIFwidmpzLXBsYXliYWNrLXJhdGUgXCIgKyBfTWVudUJ1dHRvbi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uYnVpbGRXcmFwcGVyQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZFdyYXBwZXJDU1NDbGFzcygpIHtcbiAgICAgIHJldHVybiBcInZqcy1wbGF5YmFjay1yYXRlIFwiICsgX01lbnVCdXR0b24ucHJvdG90eXBlLmJ1aWxkV3JhcHBlckNTU0NsYXNzLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgcGxheWJhY2sgcmF0ZSBtZW51XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtNZW51fVxuICAgICAqICAgICAgICAgTWVudSBvYmplY3QgcG9wdWxhdGVkIHdpdGgge0BsaW5rIFBsYXliYWNrUmF0ZU1lbnVJdGVtfXNcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3JlYXRlTWVudSA9IGZ1bmN0aW9uIGNyZWF0ZU1lbnUoKSB7XG4gICAgICB2YXIgbWVudSA9IG5ldyBNZW51KHRoaXMucGxheWVyKCkpO1xuICAgICAgdmFyIHJhdGVzID0gdGhpcy5wbGF5YmFja1JhdGVzKCk7XG5cbiAgICAgIGlmIChyYXRlcykge1xuICAgICAgICBmb3IgKHZhciBpID0gcmF0ZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICBtZW51LmFkZENoaWxkKG5ldyBQbGF5YmFja1JhdGVNZW51SXRlbSh0aGlzLnBsYXllcigpLCB7XG4gICAgICAgICAgICByYXRlOiByYXRlc1tpXSArICd4J1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbWVudTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBBUklBIGFjY2Vzc2liaWxpdHkgYXR0cmlidXRlc1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by51cGRhdGVBUklBQXR0cmlidXRlcyA9IGZ1bmN0aW9uIHVwZGF0ZUFSSUFBdHRyaWJ1dGVzKCkge1xuICAgICAgLy8gQ3VycmVudCBwbGF5YmFjayByYXRlXG4gICAgICB0aGlzLmVsKCkuc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbm93JywgdGhpcy5wbGF5ZXIoKS5wbGF5YmFja1JhdGUoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhbiBgUGxheWJhY2tSYXRlTWVudUJ1dHRvbmAgaXMgXCJjbGlja2VkXCIuIFNlZVxuICAgICAqIHtAbGluayBDbGlja2FibGVDb21wb25lbnR9IGZvciBtb3JlIGRldGFpbGVkIGluZm9ybWF0aW9uIG9uIHdoYXQgYSBjbGljayBjYW4gYmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAgICogICAgICAgIFRoZSBga2V5ZG93bmAsIGB0YXBgLCBvciBgY2xpY2tgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmVcbiAgICAgKiAgICAgICAgY2FsbGVkLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMgdGFwXG4gICAgICogQGxpc3RlbnMgY2xpY2tcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljayhldmVudCkge1xuICAgICAgLy8gc2VsZWN0IG5leHQgcmF0ZSBvcHRpb25cbiAgICAgIHZhciBjdXJyZW50UmF0ZSA9IHRoaXMucGxheWVyKCkucGxheWJhY2tSYXRlKCk7XG4gICAgICB2YXIgcmF0ZXMgPSB0aGlzLnBsYXliYWNrUmF0ZXMoKTsgLy8gdGhpcyB3aWxsIHNlbGVjdCBmaXJzdCBvbmUgaWYgdGhlIGxhc3Qgb25lIGN1cnJlbnRseSBzZWxlY3RlZFxuXG4gICAgICB2YXIgbmV3UmF0ZSA9IHJhdGVzWzBdO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChyYXRlc1tpXSA+IGN1cnJlbnRSYXRlKSB7XG4gICAgICAgICAgbmV3UmF0ZSA9IHJhdGVzW2ldO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMucGxheWVyKCkucGxheWJhY2tSYXRlKG5ld1JhdGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgcG9zc2libGUgcGxheWJhY2sgcmF0ZXNcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0FycmF5fVxuICAgICAqICAgICAgICAgQWxsIHBvc3NpYmxlIHBsYXliYWNrIHJhdGVzXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnBsYXliYWNrUmF0ZXMgPSBmdW5jdGlvbiBwbGF5YmFja1JhdGVzKCkge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc18ucGxheWJhY2tSYXRlcyB8fCB0aGlzLm9wdGlvbnNfLnBsYXllck9wdGlvbnMgJiYgdGhpcy5vcHRpb25zXy5wbGF5ZXJPcHRpb25zLnBsYXliYWNrUmF0ZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB3aGV0aGVyIHBsYXliYWNrIHJhdGVzIGlzIHN1cHBvcnRlZCBieSB0aGUgdGVjaFxuICAgICAqIGFuZCBhbiBhcnJheSBvZiBwbGF5YmFjayByYXRlcyBleGlzdHNcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICogICAgICAgICBXaGV0aGVyIGNoYW5naW5nIHBsYXliYWNrIHJhdGUgaXMgc3VwcG9ydGVkXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnBsYXliYWNrUmF0ZVN1cHBvcnRlZCA9IGZ1bmN0aW9uIHBsYXliYWNrUmF0ZVN1cHBvcnRlZCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnBsYXllcigpLnRlY2hfICYmIHRoaXMucGxheWVyKCkudGVjaF8uZmVhdHVyZXNQbGF5YmFja1JhdGUgJiYgdGhpcy5wbGF5YmFja1JhdGVzKCkgJiYgdGhpcy5wbGF5YmFja1JhdGVzKCkubGVuZ3RoID4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGlkZSBwbGF5YmFjayByYXRlIGNvbnRyb2xzIHdoZW4gdGhleSdyZSBubyBwbGF5YmFjayByYXRlIG9wdGlvbnMgdG8gc2VsZWN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAgICogICAgICAgIFRoZSBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIHJ1bi5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIFBsYXllciNsb2Fkc3RhcnRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udXBkYXRlVmlzaWJpbGl0eSA9IGZ1bmN0aW9uIHVwZGF0ZVZpc2liaWxpdHkoZXZlbnQpIHtcbiAgICAgIGlmICh0aGlzLnBsYXliYWNrUmF0ZVN1cHBvcnRlZCgpKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIGJ1dHRvbiBsYWJlbCB3aGVuIHJhdGUgY2hhbmdlZFxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgICAqICAgICAgICBUaGUgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBydW4uXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBQbGF5ZXIjcmF0ZWNoYW5nZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by51cGRhdGVMYWJlbCA9IGZ1bmN0aW9uIHVwZGF0ZUxhYmVsKGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5wbGF5YmFja1JhdGVTdXBwb3J0ZWQoKSkge1xuICAgICAgICB0aGlzLmxhYmVsRWxfLmlubmVySFRNTCA9IHRoaXMucGxheWVyKCkucGxheWJhY2tSYXRlKCkgKyAneCc7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBQbGF5YmFja1JhdGVNZW51QnV0dG9uO1xuICB9KE1lbnVCdXR0b24pO1xuICAvKipcbiAgICogVGhlIHRleHQgdGhhdCBzaG91bGQgZGlzcGxheSBvdmVyIHRoZSBgRnVsbHNjcmVlblRvZ2dsZWBzIGNvbnRyb2xzLiBBZGRlZCBmb3IgbG9jYWxpemF0aW9uLlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIFBsYXliYWNrUmF0ZU1lbnVCdXR0b24ucHJvdG90eXBlLmNvbnRyb2xUZXh0XyA9ICdQbGF5YmFjayBSYXRlJztcbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdQbGF5YmFja1JhdGVNZW51QnV0dG9uJywgUGxheWJhY2tSYXRlTWVudUJ1dHRvbik7XG5cbiAgLyoqXG4gICAqIEp1c3QgYW4gZW1wdHkgc3BhY2VyIGVsZW1lbnQgdGhhdCBjYW4gYmUgdXNlZCBhcyBhbiBhcHBlbmQgcG9pbnQgZm9yIHBsdWdpbnMsIGV0Yy5cbiAgICogQWxzbyBjYW4gYmUgdXNlZCB0byBjcmVhdGUgc3BhY2UgYmV0d2VlbiBlbGVtZW50cyB3aGVuIG5lY2Vzc2FyeS5cbiAgICpcbiAgICogQGV4dGVuZHMgQ29tcG9uZW50XG4gICAqL1xuXG4gIHZhciBTcGFjZXIgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoU3BhY2VyLCBfQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIFNwYWNlcigpIHtcbiAgICAgIHJldHVybiBfQ29tcG9uZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvID0gU3BhY2VyLnByb3RvdHlwZTtcblxuICAgIC8qKlxuICAgICogQnVpbGRzIHRoZSBkZWZhdWx0IERPTSBgY2xhc3NOYW1lYC5cbiAgICAqXG4gICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgKiAgICAgICAgIFRoZSBET00gYGNsYXNzTmFtZWAgZm9yIHRoaXMgb2JqZWN0LlxuICAgICovXG4gICAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgICAgcmV0dXJuIFwidmpzLXNwYWNlciBcIiArIF9Db21wb25lbnQucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBgQ29tcG9uZW50YCdzIERPTSBlbGVtZW50XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCgpIHtcbiAgICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogdGhpcy5idWlsZENTU0NsYXNzKClcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gU3BhY2VyO1xuICB9KENvbXBvbmVudCk7XG5cbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdTcGFjZXInLCBTcGFjZXIpO1xuXG4gIC8qKlxuICAgKiBTcGFjZXIgc3BlY2lmaWNhbGx5IG1lYW50IHRvIGJlIHVzZWQgYXMgYW4gaW5zZXJ0aW9uIHBvaW50IGZvciBuZXcgcGx1Z2lucywgZXRjLlxuICAgKlxuICAgKiBAZXh0ZW5kcyBTcGFjZXJcbiAgICovXG5cbiAgdmFyIEN1c3RvbUNvbnRyb2xTcGFjZXIgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfU3BhY2VyKSB7XG4gICAgX2luaGVyaXRzTG9vc2UoQ3VzdG9tQ29udHJvbFNwYWNlciwgX1NwYWNlcik7XG5cbiAgICBmdW5jdGlvbiBDdXN0b21Db250cm9sU3BhY2VyKCkge1xuICAgICAgcmV0dXJuIF9TcGFjZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBDdXN0b21Db250cm9sU3BhY2VyLnByb3RvdHlwZTtcblxuICAgIC8qKlxuICAgICAqIEJ1aWxkcyB0aGUgZGVmYXVsdCBET00gYGNsYXNzTmFtZWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogICAgICAgICBUaGUgRE9NIGBjbGFzc05hbWVgIGZvciB0aGlzIG9iamVjdC5cbiAgICAgKi9cbiAgICBfcHJvdG8uYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkQ1NTQ2xhc3MoKSB7XG4gICAgICByZXR1cm4gXCJ2anMtY3VzdG9tLWNvbnRyb2wtc3BhY2VyIFwiICsgX1NwYWNlci5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgJ3MgRE9NIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsKCkge1xuICAgICAgdmFyIGVsID0gX1NwYWNlci5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCB7XG4gICAgICAgIGNsYXNzTmFtZTogdGhpcy5idWlsZENTU0NsYXNzKClcbiAgICAgIH0pOyAvLyBOby1mbGV4L3RhYmxlLWNlbGwgbW9kZSByZXF1aXJlcyB0aGVyZSBiZSBzb21lIGNvbnRlbnRcbiAgICAgIC8vIGluIHRoZSBjZWxsIHRvIGZpbGwgdGhlIHJlbWFpbmluZyBzcGFjZSBvZiB0aGUgdGFibGUuXG5cblxuICAgICAgZWwuaW5uZXJIVE1MID0gXCJcXHhBMFwiO1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ3VzdG9tQ29udHJvbFNwYWNlcjtcbiAgfShTcGFjZXIpO1xuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnQ3VzdG9tQ29udHJvbFNwYWNlcicsIEN1c3RvbUNvbnRyb2xTcGFjZXIpO1xuXG4gIC8qKlxuICAgKiBDb250YWluZXIgb2YgbWFpbiBjb250cm9scy5cbiAgICpcbiAgICogQGV4dGVuZHMgQ29tcG9uZW50XG4gICAqL1xuXG4gIHZhciBDb250cm9sQmFyID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAgIF9pbmhlcml0c0xvb3NlKENvbnRyb2xCYXIsIF9Db21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gQ29udHJvbEJhcigpIHtcbiAgICAgIHJldHVybiBfQ29tcG9uZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG5cbiAgICB2YXIgX3Byb3RvID0gQ29udHJvbEJhci5wcm90b3R5cGU7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgJ3MgRE9NIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsKCkge1xuICAgICAgcmV0dXJuIF9Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAndmpzLWNvbnRyb2wtYmFyJyxcbiAgICAgICAgZGlyOiAnbHRyJ1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb250cm9sQmFyO1xuICB9KENvbXBvbmVudCk7XG4gIC8qKlxuICAgKiBEZWZhdWx0IG9wdGlvbnMgZm9yIGBDb250cm9sQmFyYFxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIENvbnRyb2xCYXIucHJvdG90eXBlLm9wdGlvbnNfID0ge1xuICAgIGNoaWxkcmVuOiBbJ3BsYXlUb2dnbGUnLCAndm9sdW1lUGFuZWwnLCAnY3VycmVudFRpbWVEaXNwbGF5JywgJ3RpbWVEaXZpZGVyJywgJ2R1cmF0aW9uRGlzcGxheScsICdwcm9ncmVzc0NvbnRyb2wnLCAnbGl2ZURpc3BsYXknLCAnc2Vla1RvTGl2ZScsICdyZW1haW5pbmdUaW1lRGlzcGxheScsICdjdXN0b21Db250cm9sU3BhY2VyJywgJ3BsYXliYWNrUmF0ZU1lbnVCdXR0b24nLCAnY2hhcHRlcnNCdXR0b24nLCAnZGVzY3JpcHRpb25zQnV0dG9uJywgJ3N1YnNDYXBzQnV0dG9uJywgJ2F1ZGlvVHJhY2tCdXR0b24nLCAnZnVsbHNjcmVlblRvZ2dsZSddXG4gIH07XG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnQ29udHJvbEJhcicsIENvbnRyb2xCYXIpO1xuXG4gIC8qKlxuICAgKiBBIGRpc3BsYXkgdGhhdCBpbmRpY2F0ZXMgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBUaGlzIG1lYW5zIHRoYXQgdGhlIHZpZGVvXG4gICAqIGlzIHVucGxheWFibGUuXG4gICAqXG4gICAqIEBleHRlbmRzIE1vZGFsRGlhbG9nXG4gICAqL1xuXG4gIHZhciBFcnJvckRpc3BsYXkgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfTW9kYWxEaWFsb2cpIHtcbiAgICBfaW5oZXJpdHNMb29zZShFcnJvckRpc3BsYXksIF9Nb2RhbERpYWxvZyk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtQbGF5ZXJ9IHBsYXllclxuICAgICAqICAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBFcnJvckRpc3BsYXkocGxheWVyLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX01vZGFsRGlhbG9nLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuXG4gICAgICBfdGhpcy5vbihwbGF5ZXIsICdlcnJvcicsIF90aGlzLm9wZW4pO1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1aWxkcyB0aGUgZGVmYXVsdCBET00gYGNsYXNzTmFtZWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogICAgICAgICBUaGUgRE9NIGBjbGFzc05hbWVgIGZvciB0aGlzIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFNpbmNlIHZlcnNpb24gNS5cbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90byA9IEVycm9yRGlzcGxheS5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkQ1NTQ2xhc3MoKSB7XG4gICAgICByZXR1cm4gXCJ2anMtZXJyb3ItZGlzcGxheSBcIiArIF9Nb2RhbERpYWxvZy5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsb2NhbGl6ZWQgZXJyb3IgbWVzc2FnZSBiYXNlZCBvbiB0aGUgYFBsYXllcmBzIGVycm9yLlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgVGhlIGBQbGF5ZXJgcyBlcnJvciBtZXNzYWdlIGxvY2FsaXplZCBvciBhbiBlbXB0eSBzdHJpbmcuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNvbnRlbnQgPSBmdW5jdGlvbiBjb250ZW50KCkge1xuICAgICAgdmFyIGVycm9yID0gdGhpcy5wbGF5ZXIoKS5lcnJvcigpO1xuICAgICAgcmV0dXJuIGVycm9yID8gdGhpcy5sb2NhbGl6ZShlcnJvci5tZXNzYWdlKSA6ICcnO1xuICAgIH07XG5cbiAgICByZXR1cm4gRXJyb3JEaXNwbGF5O1xuICB9KE1vZGFsRGlhbG9nKTtcbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IG9wdGlvbnMgZm9yIGFuIGBFcnJvckRpc3BsYXlgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIEVycm9yRGlzcGxheS5wcm90b3R5cGUub3B0aW9uc18gPSBtZXJnZU9wdGlvbnMoTW9kYWxEaWFsb2cucHJvdG90eXBlLm9wdGlvbnNfLCB7XG4gICAgcGF1c2VPbk9wZW46IGZhbHNlLFxuICAgIGZpbGxBbHdheXM6IHRydWUsXG4gICAgdGVtcG9yYXJ5OiBmYWxzZSxcbiAgICB1bmNsb3NlYWJsZTogdHJ1ZVxuICB9KTtcbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdFcnJvckRpc3BsYXknLCBFcnJvckRpc3BsYXkpO1xuXG4gIHZhciBMT0NBTF9TVE9SQUdFX0tFWSA9ICd2anMtdGV4dC10cmFjay1zZXR0aW5ncyc7XG4gIHZhciBDT0xPUl9CTEFDSyA9IFsnIzAwMCcsICdCbGFjayddO1xuICB2YXIgQ09MT1JfQkxVRSA9IFsnIzAwRicsICdCbHVlJ107XG4gIHZhciBDT0xPUl9DWUFOID0gWycjMEZGJywgJ0N5YW4nXTtcbiAgdmFyIENPTE9SX0dSRUVOID0gWycjMEYwJywgJ0dyZWVuJ107XG4gIHZhciBDT0xPUl9NQUdFTlRBID0gWycjRjBGJywgJ01hZ2VudGEnXTtcbiAgdmFyIENPTE9SX1JFRCA9IFsnI0YwMCcsICdSZWQnXTtcbiAgdmFyIENPTE9SX1dISVRFID0gWycjRkZGJywgJ1doaXRlJ107XG4gIHZhciBDT0xPUl9ZRUxMT1cgPSBbJyNGRjAnLCAnWWVsbG93J107XG4gIHZhciBPUEFDSVRZX09QQVFVRSA9IFsnMScsICdPcGFxdWUnXTtcbiAgdmFyIE9QQUNJVFlfU0VNSSA9IFsnMC41JywgJ1NlbWktVHJhbnNwYXJlbnQnXTtcbiAgdmFyIE9QQUNJVFlfVFJBTlMgPSBbJzAnLCAnVHJhbnNwYXJlbnQnXTsgLy8gQ29uZmlndXJhdGlvbiBmb3IgdGhlIHZhcmlvdXMgPHNlbGVjdD4gZWxlbWVudHMgaW4gdGhlIERPTSBvZiB0aGlzIGNvbXBvbmVudC5cbiAgLy9cbiAgLy8gUG9zc2libGUga2V5cyBpbmNsdWRlOlxuICAvL1xuICAvLyBgZGVmYXVsdGA6XG4gIC8vICAgVGhlIGRlZmF1bHQgb3B0aW9uIGluZGV4LiBPbmx5IG5lZWRzIHRvIGJlIHByb3ZpZGVkIGlmIG5vdCB6ZXJvLlxuICAvLyBgcGFyc2VyYDpcbiAgLy8gICBBIGZ1bmN0aW9uIHdoaWNoIGlzIHVzZWQgdG8gcGFyc2UgdGhlIHZhbHVlIGZyb20gdGhlIHNlbGVjdGVkIG9wdGlvbiBpblxuICAvLyAgIGEgY3VzdG9taXplZCB3YXkuXG4gIC8vIGBzZWxlY3RvcmA6XG4gIC8vICAgVGhlIHNlbGVjdG9yIHVzZWQgdG8gZmluZCB0aGUgYXNzb2NpYXRlZCA8c2VsZWN0PiBlbGVtZW50LlxuXG4gIHZhciBzZWxlY3RDb25maWdzID0ge1xuICAgIGJhY2tncm91bmRDb2xvcjoge1xuICAgICAgc2VsZWN0b3I6ICcudmpzLWJnLWNvbG9yID4gc2VsZWN0JyxcbiAgICAgIGlkOiAnY2FwdGlvbnMtYmFja2dyb3VuZC1jb2xvci0lcycsXG4gICAgICBsYWJlbDogJ0NvbG9yJyxcbiAgICAgIG9wdGlvbnM6IFtDT0xPUl9CTEFDSywgQ09MT1JfV0hJVEUsIENPTE9SX1JFRCwgQ09MT1JfR1JFRU4sIENPTE9SX0JMVUUsIENPTE9SX1lFTExPVywgQ09MT1JfTUFHRU5UQSwgQ09MT1JfQ1lBTl1cbiAgICB9LFxuICAgIGJhY2tncm91bmRPcGFjaXR5OiB7XG4gICAgICBzZWxlY3RvcjogJy52anMtYmctb3BhY2l0eSA+IHNlbGVjdCcsXG4gICAgICBpZDogJ2NhcHRpb25zLWJhY2tncm91bmQtb3BhY2l0eS0lcycsXG4gICAgICBsYWJlbDogJ1RyYW5zcGFyZW5jeScsXG4gICAgICBvcHRpb25zOiBbT1BBQ0lUWV9PUEFRVUUsIE9QQUNJVFlfU0VNSSwgT1BBQ0lUWV9UUkFOU11cbiAgICB9LFxuICAgIGNvbG9yOiB7XG4gICAgICBzZWxlY3RvcjogJy52anMtZmctY29sb3IgPiBzZWxlY3QnLFxuICAgICAgaWQ6ICdjYXB0aW9ucy1mb3JlZ3JvdW5kLWNvbG9yLSVzJyxcbiAgICAgIGxhYmVsOiAnQ29sb3InLFxuICAgICAgb3B0aW9uczogW0NPTE9SX1dISVRFLCBDT0xPUl9CTEFDSywgQ09MT1JfUkVELCBDT0xPUl9HUkVFTiwgQ09MT1JfQkxVRSwgQ09MT1JfWUVMTE9XLCBDT0xPUl9NQUdFTlRBLCBDT0xPUl9DWUFOXVxuICAgIH0sXG4gICAgZWRnZVN0eWxlOiB7XG4gICAgICBzZWxlY3RvcjogJy52anMtZWRnZS1zdHlsZSA+IHNlbGVjdCcsXG4gICAgICBpZDogJyVzJyxcbiAgICAgIGxhYmVsOiAnVGV4dCBFZGdlIFN0eWxlJyxcbiAgICAgIG9wdGlvbnM6IFtbJ25vbmUnLCAnTm9uZSddLCBbJ3JhaXNlZCcsICdSYWlzZWQnXSwgWydkZXByZXNzZWQnLCAnRGVwcmVzc2VkJ10sIFsndW5pZm9ybScsICdVbmlmb3JtJ10sIFsnZHJvcHNoYWRvdycsICdEcm9wc2hhZG93J11dXG4gICAgfSxcbiAgICBmb250RmFtaWx5OiB7XG4gICAgICBzZWxlY3RvcjogJy52anMtZm9udC1mYW1pbHkgPiBzZWxlY3QnLFxuICAgICAgaWQ6ICdjYXB0aW9ucy1mb250LWZhbWlseS0lcycsXG4gICAgICBsYWJlbDogJ0ZvbnQgRmFtaWx5JyxcbiAgICAgIG9wdGlvbnM6IFtbJ3Byb3BvcnRpb25hbFNhbnNTZXJpZicsICdQcm9wb3J0aW9uYWwgU2Fucy1TZXJpZiddLCBbJ21vbm9zcGFjZVNhbnNTZXJpZicsICdNb25vc3BhY2UgU2Fucy1TZXJpZiddLCBbJ3Byb3BvcnRpb25hbFNlcmlmJywgJ1Byb3BvcnRpb25hbCBTZXJpZiddLCBbJ21vbm9zcGFjZVNlcmlmJywgJ01vbm9zcGFjZSBTZXJpZiddLCBbJ2Nhc3VhbCcsICdDYXN1YWwnXSwgWydzY3JpcHQnLCAnU2NyaXB0J10sIFsnc21hbGwtY2FwcycsICdTbWFsbCBDYXBzJ11dXG4gICAgfSxcbiAgICBmb250UGVyY2VudDoge1xuICAgICAgc2VsZWN0b3I6ICcudmpzLWZvbnQtcGVyY2VudCA+IHNlbGVjdCcsXG4gICAgICBpZDogJ2NhcHRpb25zLWZvbnQtc2l6ZS0lcycsXG4gICAgICBsYWJlbDogJ0ZvbnQgU2l6ZScsXG4gICAgICBvcHRpb25zOiBbWycwLjUwJywgJzUwJSddLCBbJzAuNzUnLCAnNzUlJ10sIFsnMS4wMCcsICcxMDAlJ10sIFsnMS4yNScsICcxMjUlJ10sIFsnMS41MCcsICcxNTAlJ10sIFsnMS43NScsICcxNzUlJ10sIFsnMi4wMCcsICcyMDAlJ10sIFsnMy4wMCcsICczMDAlJ10sIFsnNC4wMCcsICc0MDAlJ11dLFxuICAgICAgZGVmYXVsdDogMixcbiAgICAgIHBhcnNlcjogZnVuY3Rpb24gcGFyc2VyKHYpIHtcbiAgICAgICAgcmV0dXJuIHYgPT09ICcxLjAwJyA/IG51bGwgOiBOdW1iZXIodik7XG4gICAgICB9XG4gICAgfSxcbiAgICB0ZXh0T3BhY2l0eToge1xuICAgICAgc2VsZWN0b3I6ICcudmpzLXRleHQtb3BhY2l0eSA+IHNlbGVjdCcsXG4gICAgICBpZDogJ2NhcHRpb25zLWZvcmVncm91bmQtb3BhY2l0eS0lcycsXG4gICAgICBsYWJlbDogJ1RyYW5zcGFyZW5jeScsXG4gICAgICBvcHRpb25zOiBbT1BBQ0lUWV9PUEFRVUUsIE9QQUNJVFlfU0VNSV1cbiAgICB9LFxuICAgIC8vIE9wdGlvbnMgZm9yIHRoaXMgb2JqZWN0IGFyZSBkZWZpbmVkIGJlbG93LlxuICAgIHdpbmRvd0NvbG9yOiB7XG4gICAgICBzZWxlY3RvcjogJy52anMtd2luZG93LWNvbG9yID4gc2VsZWN0JyxcbiAgICAgIGlkOiAnY2FwdGlvbnMtd2luZG93LWNvbG9yLSVzJyxcbiAgICAgIGxhYmVsOiAnQ29sb3InXG4gICAgfSxcbiAgICAvLyBPcHRpb25zIGZvciB0aGlzIG9iamVjdCBhcmUgZGVmaW5lZCBiZWxvdy5cbiAgICB3aW5kb3dPcGFjaXR5OiB7XG4gICAgICBzZWxlY3RvcjogJy52anMtd2luZG93LW9wYWNpdHkgPiBzZWxlY3QnLFxuICAgICAgaWQ6ICdjYXB0aW9ucy13aW5kb3ctb3BhY2l0eS0lcycsXG4gICAgICBsYWJlbDogJ1RyYW5zcGFyZW5jeScsXG4gICAgICBvcHRpb25zOiBbT1BBQ0lUWV9UUkFOUywgT1BBQ0lUWV9TRU1JLCBPUEFDSVRZX09QQVFVRV1cbiAgICB9XG4gIH07XG4gIHNlbGVjdENvbmZpZ3Mud2luZG93Q29sb3Iub3B0aW9ucyA9IHNlbGVjdENvbmZpZ3MuYmFja2dyb3VuZENvbG9yLm9wdGlvbnM7XG4gIC8qKlxuICAgKiBHZXQgdGhlIGFjdHVhbCB2YWx1ZSBvZiBhbiBvcHRpb24uXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdmFsdWVcbiAgICogICAgICAgICBUaGUgdmFsdWUgdG8gZ2V0XG4gICAqXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBbcGFyc2VyXVxuICAgKiAgICAgICAgIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGFkanVzdCB0aGUgdmFsdWUuXG4gICAqXG4gICAqIEByZXR1cm4ge01peGVkfVxuICAgKiAgICAgICAgIC0gV2lsbCBiZSBgdW5kZWZpbmVkYCBpZiBubyB2YWx1ZSBleGlzdHNcbiAgICogICAgICAgICAtIFdpbGwgYmUgYHVuZGVmaW5lZGAgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIFwibm9uZVwiLlxuICAgKiAgICAgICAgIC0gV2lsbCBiZSB0aGUgYWN0dWFsIHZhbHVlIG90aGVyd2lzZS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgZnVuY3Rpb24gcGFyc2VPcHRpb25WYWx1ZSh2YWx1ZSwgcGFyc2VyKSB7XG4gICAgaWYgKHBhcnNlcikge1xuICAgICAgdmFsdWUgPSBwYXJzZXIodmFsdWUpO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZSAmJiB2YWx1ZSAhPT0gJ25vbmUnKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXRzIHRoZSB2YWx1ZSBvZiB0aGUgc2VsZWN0ZWQgPG9wdGlvbj4gZWxlbWVudCB3aXRoaW4gYSA8c2VsZWN0PiBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0gIHtFbGVtZW50fSBlbFxuICAgKiAgICAgICAgIHRoZSBlbGVtZW50IHRvIGxvb2sgaW5cbiAgICpcbiAgICogQHBhcmFtICB7RnVuY3Rpb259IFtwYXJzZXJdXG4gICAqICAgICAgICAgT3B0aW9uYWwgZnVuY3Rpb24gdG8gYWRqdXN0IHRoZSB2YWx1ZS5cbiAgICpcbiAgICogQHJldHVybiB7TWl4ZWR9XG4gICAqICAgICAgICAgLSBXaWxsIGJlIGB1bmRlZmluZWRgIGlmIG5vIHZhbHVlIGV4aXN0c1xuICAgKiAgICAgICAgIC0gV2lsbCBiZSBgdW5kZWZpbmVkYCBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgXCJub25lXCIuXG4gICAqICAgICAgICAgLSBXaWxsIGJlIHRoZSBhY3R1YWwgdmFsdWUgb3RoZXJ3aXNlLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIGdldFNlbGVjdGVkT3B0aW9uVmFsdWUoZWwsIHBhcnNlcikge1xuICAgIHZhciB2YWx1ZSA9IGVsLm9wdGlvbnNbZWwub3B0aW9ucy5zZWxlY3RlZEluZGV4XS52YWx1ZTtcbiAgICByZXR1cm4gcGFyc2VPcHRpb25WYWx1ZSh2YWx1ZSwgcGFyc2VyKTtcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgc2VsZWN0ZWQgPG9wdGlvbj4gZWxlbWVudCB3aXRoaW4gYSA8c2VsZWN0PiBlbGVtZW50IGJhc2VkIG9uIGFcbiAgICogZ2l2ZW4gdmFsdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogICAgICAgIFRoZSBlbGVtZW50IHRvIGxvb2sgaW4uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgKiAgICAgICAgdGhlIHByb3BlcnR5IHRvIGxvb2sgb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwYXJzZXJdXG4gICAqICAgICAgICBPcHRpb25hbCBmdW5jdGlvbiB0byBhZGp1c3QgdGhlIHZhbHVlIGJlZm9yZSBjb21wYXJpbmcuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gc2V0U2VsZWN0ZWRPcHRpb24oZWwsIHZhbHVlLCBwYXJzZXIpIHtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbC5vcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocGFyc2VPcHRpb25WYWx1ZShlbC5vcHRpb25zW2ldLnZhbHVlLCBwYXJzZXIpID09PSB2YWx1ZSkge1xuICAgICAgICBlbC5zZWxlY3RlZEluZGV4ID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBNYW5pcHVsYXRlIFRleHQgVHJhY2tzIHNldHRpbmdzLlxuICAgKlxuICAgKiBAZXh0ZW5kcyBNb2RhbERpYWxvZ1xuICAgKi9cblxuXG4gIHZhciBUZXh0VHJhY2tTZXR0aW5ncyA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9Nb2RhbERpYWxvZykge1xuICAgIF9pbmhlcml0c0xvb3NlKFRleHRUcmFja1NldHRpbmdzLCBfTW9kYWxEaWFsb2cpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgICAqICAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRleHRUcmFja1NldHRpbmdzKHBsYXllciwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICBvcHRpb25zLnRlbXBvcmFyeSA9IGZhbHNlO1xuICAgICAgX3RoaXMgPSBfTW9kYWxEaWFsb2cuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICBfdGhpcy51cGRhdGVEaXNwbGF5ID0gYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMudXBkYXRlRGlzcGxheSk7IC8vIGZpbGwgdGhlIG1vZGFsIGFuZCBwcmV0ZW5kIHdlIGhhdmUgb3BlbmVkIGl0XG5cbiAgICAgIF90aGlzLmZpbGwoKTtcblxuICAgICAgX3RoaXMuaGFzQmVlbk9wZW5lZF8gPSBfdGhpcy5oYXNCZWVuRmlsbGVkXyA9IHRydWU7XG4gICAgICBfdGhpcy5lbmREaWFsb2cgPSBjcmVhdGVFbCgncCcsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAndmpzLWNvbnRyb2wtdGV4dCcsXG4gICAgICAgIHRleHRDb250ZW50OiBfdGhpcy5sb2NhbGl6ZSgnRW5kIG9mIGRpYWxvZyB3aW5kb3cuJylcbiAgICAgIH0pO1xuXG4gICAgICBfdGhpcy5lbCgpLmFwcGVuZENoaWxkKF90aGlzLmVuZERpYWxvZyk7XG5cbiAgICAgIF90aGlzLnNldERlZmF1bHRzKCk7IC8vIEdyYWIgYHBlcnNpc3RUZXh0VHJhY2tTZXR0aW5nc2AgZnJvbSB0aGUgcGxheWVyIG9wdGlvbnMgaWYgbm90IHBhc3NlZCBpbiBjaGlsZCBvcHRpb25zXG5cblxuICAgICAgaWYgKG9wdGlvbnMucGVyc2lzdFRleHRUcmFja1NldHRpbmdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgX3RoaXMub3B0aW9uc18ucGVyc2lzdFRleHRUcmFja1NldHRpbmdzID0gX3RoaXMub3B0aW9uc18ucGxheWVyT3B0aW9ucy5wZXJzaXN0VGV4dFRyYWNrU2V0dGluZ3M7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLm9uKF90aGlzLiQoJy52anMtZG9uZS1idXR0b24nKSwgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgICBfdGhpcy5jbG9zZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIF90aGlzLm9uKF90aGlzLiQoJy52anMtZGVmYXVsdC1idXR0b24nKSwgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5zZXREZWZhdWx0cygpO1xuXG4gICAgICAgIF90aGlzLnVwZGF0ZURpc3BsYXkoKTtcbiAgICAgIH0pO1xuXG4gICAgICBlYWNoKHNlbGVjdENvbmZpZ3MsIGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgX3RoaXMub24oX3RoaXMuJChjb25maWcuc2VsZWN0b3IpLCAnY2hhbmdlJywgX3RoaXMudXBkYXRlRGlzcGxheSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKF90aGlzLm9wdGlvbnNfLnBlcnNpc3RUZXh0VHJhY2tTZXR0aW5ncykge1xuICAgICAgICBfdGhpcy5yZXN0b3JlU2V0dGluZ3MoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIHZhciBfcHJvdG8gPSBUZXh0VHJhY2tTZXR0aW5ncy5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICB0aGlzLmVuZERpYWxvZyA9IG51bGw7XG5cbiAgICAgIF9Nb2RhbERpYWxvZy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSA8c2VsZWN0PiBlbGVtZW50IHdpdGggY29uZmlndXJlZCBvcHRpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICAgICAqICAgICAgICBDb25maWd1cmF0aW9uIGtleSB0byB1c2UgZHVyaW5nIGNyZWF0aW9uLlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgQW4gSFRNTCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jcmVhdGVFbFNlbGVjdF8gPSBmdW5jdGlvbiBjcmVhdGVFbFNlbGVjdF8oa2V5LCBsZWdlbmRJZCwgdHlwZSkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGlmIChsZWdlbmRJZCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGxlZ2VuZElkID0gJyc7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlID09PSB2b2lkIDApIHtcbiAgICAgICAgdHlwZSA9ICdsYWJlbCc7XG4gICAgICB9XG5cbiAgICAgIHZhciBjb25maWcgPSBzZWxlY3RDb25maWdzW2tleV07XG4gICAgICB2YXIgaWQgPSBjb25maWcuaWQucmVwbGFjZSgnJXMnLCB0aGlzLmlkXyk7XG4gICAgICB2YXIgc2VsZWN0TGFiZWxsZWRieUlkcyA9IFtsZWdlbmRJZCwgaWRdLmpvaW4oJyAnKS50cmltKCk7XG4gICAgICByZXR1cm4gW1wiPFwiICsgdHlwZSArIFwiIGlkPVxcXCJcIiArIGlkICsgXCJcXFwiIGNsYXNzPVxcXCJcIiArICh0eXBlID09PSAnbGFiZWwnID8gJ3Zqcy1sYWJlbCcgOiAnJykgKyBcIlxcXCI+XCIsIHRoaXMubG9jYWxpemUoY29uZmlnLmxhYmVsKSwgXCI8L1wiICsgdHlwZSArIFwiPlwiLCBcIjxzZWxlY3QgYXJpYS1sYWJlbGxlZGJ5PVxcXCJcIiArIHNlbGVjdExhYmVsbGVkYnlJZHMgKyBcIlxcXCI+XCJdLmNvbmNhdChjb25maWcub3B0aW9ucy5tYXAoZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgdmFyIG9wdGlvbklkID0gaWQgKyAnLScgKyBvWzFdLnJlcGxhY2UoL1xcVysvZywgJycpO1xuICAgICAgICByZXR1cm4gW1wiPG9wdGlvbiBpZD1cXFwiXCIgKyBvcHRpb25JZCArIFwiXFxcIiB2YWx1ZT1cXFwiXCIgKyBvWzBdICsgXCJcXFwiIFwiLCBcImFyaWEtbGFiZWxsZWRieT1cXFwiXCIgKyBzZWxlY3RMYWJlbGxlZGJ5SWRzICsgXCIgXCIgKyBvcHRpb25JZCArIFwiXFxcIj5cIiwgX3RoaXMyLmxvY2FsaXplKG9bMV0pLCAnPC9vcHRpb24+J10uam9pbignJyk7XG4gICAgICB9KSkuY29uY2F0KCc8L3NlbGVjdD4nKS5qb2luKCcnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGZvcmVncm91bmQgY29sb3IgZWxlbWVudCBmb3IgdGhlIGNvbXBvbmVudFxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgQW4gSFRNTCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jcmVhdGVFbEZnQ29sb3JfID0gZnVuY3Rpb24gY3JlYXRlRWxGZ0NvbG9yXygpIHtcbiAgICAgIHZhciBsZWdlbmRJZCA9IFwiY2FwdGlvbnMtdGV4dC1sZWdlbmQtXCIgKyB0aGlzLmlkXztcbiAgICAgIHJldHVybiBbJzxmaWVsZHNldCBjbGFzcz1cInZqcy1mZy1jb2xvciB2anMtdHJhY2stc2V0dGluZ1wiPicsIFwiPGxlZ2VuZCBpZD1cXFwiXCIgKyBsZWdlbmRJZCArIFwiXFxcIj5cIiwgdGhpcy5sb2NhbGl6ZSgnVGV4dCcpLCAnPC9sZWdlbmQ+JywgdGhpcy5jcmVhdGVFbFNlbGVjdF8oJ2NvbG9yJywgbGVnZW5kSWQpLCAnPHNwYW4gY2xhc3M9XCJ2anMtdGV4dC1vcGFjaXR5IHZqcy1vcGFjaXR5XCI+JywgdGhpcy5jcmVhdGVFbFNlbGVjdF8oJ3RleHRPcGFjaXR5JywgbGVnZW5kSWQpLCAnPC9zcGFuPicsICc8L2ZpZWxkc2V0PiddLmpvaW4oJycpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYmFja2dyb3VuZCBjb2xvciBlbGVtZW50IGZvciB0aGUgY29tcG9uZW50XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogICAgICAgICBBbiBIVE1MIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNyZWF0ZUVsQmdDb2xvcl8gPSBmdW5jdGlvbiBjcmVhdGVFbEJnQ29sb3JfKCkge1xuICAgICAgdmFyIGxlZ2VuZElkID0gXCJjYXB0aW9ucy1iYWNrZ3JvdW5kLVwiICsgdGhpcy5pZF87XG4gICAgICByZXR1cm4gWyc8ZmllbGRzZXQgY2xhc3M9XCJ2anMtYmctY29sb3IgdmpzLXRyYWNrLXNldHRpbmdcIj4nLCBcIjxsZWdlbmQgaWQ9XFxcIlwiICsgbGVnZW5kSWQgKyBcIlxcXCI+XCIsIHRoaXMubG9jYWxpemUoJ0JhY2tncm91bmQnKSwgJzwvbGVnZW5kPicsIHRoaXMuY3JlYXRlRWxTZWxlY3RfKCdiYWNrZ3JvdW5kQ29sb3InLCBsZWdlbmRJZCksICc8c3BhbiBjbGFzcz1cInZqcy1iZy1vcGFjaXR5IHZqcy1vcGFjaXR5XCI+JywgdGhpcy5jcmVhdGVFbFNlbGVjdF8oJ2JhY2tncm91bmRPcGFjaXR5JywgbGVnZW5kSWQpLCAnPC9zcGFuPicsICc8L2ZpZWxkc2V0PiddLmpvaW4oJycpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgd2luZG93IGNvbG9yIGVsZW1lbnQgZm9yIHRoZSBjb21wb25lbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKiAgICAgICAgIEFuIEhUTUwgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3JlYXRlRWxXaW5Db2xvcl8gPSBmdW5jdGlvbiBjcmVhdGVFbFdpbkNvbG9yXygpIHtcbiAgICAgIHZhciBsZWdlbmRJZCA9IFwiY2FwdGlvbnMtd2luZG93LVwiICsgdGhpcy5pZF87XG4gICAgICByZXR1cm4gWyc8ZmllbGRzZXQgY2xhc3M9XCJ2anMtd2luZG93LWNvbG9yIHZqcy10cmFjay1zZXR0aW5nXCI+JywgXCI8bGVnZW5kIGlkPVxcXCJcIiArIGxlZ2VuZElkICsgXCJcXFwiPlwiLCB0aGlzLmxvY2FsaXplKCdXaW5kb3cnKSwgJzwvbGVnZW5kPicsIHRoaXMuY3JlYXRlRWxTZWxlY3RfKCd3aW5kb3dDb2xvcicsIGxlZ2VuZElkKSwgJzxzcGFuIGNsYXNzPVwidmpzLXdpbmRvdy1vcGFjaXR5IHZqcy1vcGFjaXR5XCI+JywgdGhpcy5jcmVhdGVFbFNlbGVjdF8oJ3dpbmRvd09wYWNpdHknLCBsZWdlbmRJZCksICc8L3NwYW4+JywgJzwvZmllbGRzZXQ+J10uam9pbignJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBjb2xvciBlbGVtZW50cyBmb3IgdGhlIGNvbXBvbmVudFxuICAgICAqXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWRcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNyZWF0ZUVsQ29sb3JzXyA9IGZ1bmN0aW9uIGNyZWF0ZUVsQ29sb3JzXygpIHtcbiAgICAgIHJldHVybiBjcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICBjbGFzc05hbWU6ICd2anMtdHJhY2stc2V0dGluZ3MtY29sb3JzJyxcbiAgICAgICAgaW5uZXJIVE1MOiBbdGhpcy5jcmVhdGVFbEZnQ29sb3JfKCksIHRoaXMuY3JlYXRlRWxCZ0NvbG9yXygpLCB0aGlzLmNyZWF0ZUVsV2luQ29sb3JfKCldLmpvaW4oJycpXG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGZvbnQgZWxlbWVudHMgZm9yIHRoZSBjb21wb25lbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3JlYXRlRWxGb250XyA9IGZ1bmN0aW9uIGNyZWF0ZUVsRm9udF8oKSB7XG4gICAgICByZXR1cm4gY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAndmpzLXRyYWNrLXNldHRpbmdzLWZvbnQnLFxuICAgICAgICBpbm5lckhUTUw6IFsnPGZpZWxkc2V0IGNsYXNzPVwidmpzLWZvbnQtcGVyY2VudCB2anMtdHJhY2stc2V0dGluZ1wiPicsIHRoaXMuY3JlYXRlRWxTZWxlY3RfKCdmb250UGVyY2VudCcsICcnLCAnbGVnZW5kJyksICc8L2ZpZWxkc2V0PicsICc8ZmllbGRzZXQgY2xhc3M9XCJ2anMtZWRnZS1zdHlsZSB2anMtdHJhY2stc2V0dGluZ1wiPicsIHRoaXMuY3JlYXRlRWxTZWxlY3RfKCdlZGdlU3R5bGUnLCAnJywgJ2xlZ2VuZCcpLCAnPC9maWVsZHNldD4nLCAnPGZpZWxkc2V0IGNsYXNzPVwidmpzLWZvbnQtZmFtaWx5IHZqcy10cmFjay1zZXR0aW5nXCI+JywgdGhpcy5jcmVhdGVFbFNlbGVjdF8oJ2ZvbnRGYW1pbHknLCAnJywgJ2xlZ2VuZCcpLCAnPC9maWVsZHNldD4nXS5qb2luKCcnKVxuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBjb250cm9scyBmb3IgdGhlIGNvbXBvbmVudFxuICAgICAqXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jcmVhdGVFbENvbnRyb2xzXyA9IGZ1bmN0aW9uIGNyZWF0ZUVsQ29udHJvbHNfKCkge1xuICAgICAgdmFyIGRlZmF1bHRzRGVzY3JpcHRpb24gPSB0aGlzLmxvY2FsaXplKCdyZXN0b3JlIGFsbCBzZXR0aW5ncyB0byB0aGUgZGVmYXVsdCB2YWx1ZXMnKTtcbiAgICAgIHJldHVybiBjcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICBjbGFzc05hbWU6ICd2anMtdHJhY2stc2V0dGluZ3MtY29udHJvbHMnLFxuICAgICAgICBpbm5lckhUTUw6IFtcIjxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwidmpzLWRlZmF1bHQtYnV0dG9uXFxcIiB0aXRsZT1cXFwiXCIgKyBkZWZhdWx0c0Rlc2NyaXB0aW9uICsgXCJcXFwiPlwiLCB0aGlzLmxvY2FsaXplKCdSZXNldCcpLCBcIjxzcGFuIGNsYXNzPVxcXCJ2anMtY29udHJvbC10ZXh0XFxcIj4gXCIgKyBkZWZhdWx0c0Rlc2NyaXB0aW9uICsgXCI8L3NwYW4+XCIsICc8L2J1dHRvbj4nLCBcIjxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwidmpzLWRvbmUtYnV0dG9uXFxcIj5cIiArIHRoaXMubG9jYWxpemUoJ0RvbmUnKSArIFwiPC9idXR0b24+XCJdLmpvaW4oJycpXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmNvbnRlbnQgPSBmdW5jdGlvbiBjb250ZW50KCkge1xuICAgICAgcmV0dXJuIFt0aGlzLmNyZWF0ZUVsQ29sb3JzXygpLCB0aGlzLmNyZWF0ZUVsRm9udF8oKSwgdGhpcy5jcmVhdGVFbENvbnRyb2xzXygpXTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmxhYmVsID0gZnVuY3Rpb24gbGFiZWwoKSB7XG4gICAgICByZXR1cm4gdGhpcy5sb2NhbGl6ZSgnQ2FwdGlvbiBTZXR0aW5ncyBEaWFsb2cnKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmRlc2NyaXB0aW9uID0gZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5sb2NhbGl6ZSgnQmVnaW5uaW5nIG9mIGRpYWxvZyB3aW5kb3cuIEVzY2FwZSB3aWxsIGNhbmNlbCBhbmQgY2xvc2UgdGhlIHdpbmRvdy4nKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgICAgcmV0dXJuIF9Nb2RhbERpYWxvZy5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpICsgJyB2anMtdGV4dC10cmFjay1zZXR0aW5ncyc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYW4gb2JqZWN0IG9mIHRleHQgdHJhY2sgc2V0dGluZ3MgKG9yIG51bGwpLlxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqICAgICAgICAgQW4gb2JqZWN0IHdpdGggY29uZmlnIHZhbHVlcyBwYXJzZWQgZnJvbSB0aGUgRE9NIG9yIGxvY2FsU3RvcmFnZS5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZ2V0VmFsdWVzID0gZnVuY3Rpb24gZ2V0VmFsdWVzKCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHJldHVybiByZWR1Y2Uoc2VsZWN0Q29uZmlncywgZnVuY3Rpb24gKGFjY3VtLCBjb25maWcsIGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBnZXRTZWxlY3RlZE9wdGlvblZhbHVlKF90aGlzMy4kKGNvbmZpZy5zZWxlY3RvciksIGNvbmZpZy5wYXJzZXIpO1xuXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgYWNjdW1ba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFjY3VtO1xuICAgICAgfSwge30pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRleHQgdHJhY2sgc2V0dGluZ3MgZnJvbSBhbiBvYmplY3Qgb2YgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlc1xuICAgICAqICAgICAgICBBbiBvYmplY3Qgd2l0aCBjb25maWcgdmFsdWVzIHBhcnNlZCBmcm9tIHRoZSBET00gb3IgbG9jYWxTdG9yYWdlLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zZXRWYWx1ZXMgPSBmdW5jdGlvbiBzZXRWYWx1ZXModmFsdWVzKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgZWFjaChzZWxlY3RDb25maWdzLCBmdW5jdGlvbiAoY29uZmlnLCBrZXkpIHtcbiAgICAgICAgc2V0U2VsZWN0ZWRPcHRpb24oX3RoaXM0LiQoY29uZmlnLnNlbGVjdG9yKSwgdmFsdWVzW2tleV0sIGNvbmZpZy5wYXJzZXIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgYWxsIGA8c2VsZWN0PmAgZWxlbWVudHMgdG8gdGhlaXIgZGVmYXVsdCB2YWx1ZXMuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnNldERlZmF1bHRzID0gZnVuY3Rpb24gc2V0RGVmYXVsdHMoKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgZWFjaChzZWxlY3RDb25maWdzLCBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIHZhciBpbmRleCA9IGNvbmZpZy5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpID8gY29uZmlnLmRlZmF1bHQgOiAwO1xuICAgICAgICBfdGhpczUuJChjb25maWcuc2VsZWN0b3IpLnNlbGVjdGVkSW5kZXggPSBpbmRleDtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXN0b3JlIHRleHR0cmFjayBzZXR0aW5ncyBmcm9tIGxvY2FsU3RvcmFnZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5yZXN0b3JlU2V0dGluZ3MgPSBmdW5jdGlvbiByZXN0b3JlU2V0dGluZ3MoKSB7XG4gICAgICB2YXIgdmFsdWVzO1xuXG4gICAgICB0cnkge1xuICAgICAgICB2YWx1ZXMgPSBKU09OLnBhcnNlKHdpbmRvdyQxLmxvY2FsU3RvcmFnZS5nZXRJdGVtKExPQ0FMX1NUT1JBR0VfS0VZKSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgbG9nLndhcm4oZXJyKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHZhbHVlcykge1xuICAgICAgICB0aGlzLnNldFZhbHVlcyh2YWx1ZXMpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTYXZlIHRleHQgdHJhY2sgc2V0dGluZ3MgdG8gbG9jYWxTdG9yYWdlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnNhdmVTZXR0aW5ncyA9IGZ1bmN0aW9uIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgIGlmICghdGhpcy5vcHRpb25zXy5wZXJzaXN0VGV4dFRyYWNrU2V0dGluZ3MpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgdmFsdWVzID0gdGhpcy5nZXRWYWx1ZXMoKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHZhbHVlcykubGVuZ3RoKSB7XG4gICAgICAgICAgd2luZG93JDEubG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KHZhbHVlcykpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdpbmRvdyQxLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKExPQ0FMX1NUT1JBR0VfS0VZKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGxvZy53YXJuKGVycik7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBkaXNwbGF5IG9mIHRleHQgdHJhY2sgc2V0dGluZ3NcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udXBkYXRlRGlzcGxheSA9IGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXkoKSB7XG4gICAgICB2YXIgdHREaXNwbGF5ID0gdGhpcy5wbGF5ZXJfLmdldENoaWxkKCd0ZXh0VHJhY2tEaXNwbGF5Jyk7XG5cbiAgICAgIGlmICh0dERpc3BsYXkpIHtcbiAgICAgICAgdHREaXNwbGF5LnVwZGF0ZURpc3BsYXkoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogY29uZGl0aW9uYWxseSBibHVyIHRoZSBlbGVtZW50IGFuZCByZWZvY3VzIHRoZSBjYXB0aW9ucyBidXR0b25cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNvbmRpdGlvbmFsQmx1cl8gPSBmdW5jdGlvbiBjb25kaXRpb25hbEJsdXJfKCkge1xuICAgICAgdGhpcy5wcmV2aW91c2x5QWN0aXZlRWxfID0gbnVsbDtcbiAgICAgIHRoaXMub2ZmKGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5RG93bik7XG4gICAgICB2YXIgY2IgPSB0aGlzLnBsYXllcl8uY29udHJvbEJhcjtcbiAgICAgIHZhciBzdWJzQ2Fwc0J0biA9IGNiICYmIGNiLnN1YnNDYXBzQnV0dG9uO1xuICAgICAgdmFyIGNjQnRuID0gY2IgJiYgY2IuY2FwdGlvbnNCdXR0b247XG5cbiAgICAgIGlmIChzdWJzQ2Fwc0J0bikge1xuICAgICAgICBzdWJzQ2Fwc0J0bi5mb2N1cygpO1xuICAgICAgfSBlbHNlIGlmIChjY0J0bikge1xuICAgICAgICBjY0J0bi5mb2N1cygpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gVGV4dFRyYWNrU2V0dGluZ3M7XG4gIH0oTW9kYWxEaWFsb2cpO1xuXG4gIENvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnVGV4dFRyYWNrU2V0dGluZ3MnLCBUZXh0VHJhY2tTZXR0aW5ncyk7XG5cbiAgLyoqXG4gICAqIEEgUmVzaXplIE1hbmFnZXIuIEl0IGlzIGluIGNoYXJnZSBvZiB0cmlnZ2VyaW5nIGBwbGF5ZXJyZXNpemVgIG9uIHRoZSBwbGF5ZXIgaW4gdGhlIHJpZ2h0IGNvbmRpdGlvbnMuXG4gICAqXG4gICAqIEl0J2xsIGVpdGhlciBjcmVhdGUgYW4gaWZyYW1lIGFuZCB1c2UgYSBkZWJvdW5jZWQgcmVzaXplIGhhbmRsZXIgb24gaXQgb3IgdXNlIHRoZSBuZXcge0BsaW5rIGh0dHBzOi8vd2ljZy5naXRodWIuaW8vUmVzaXplT2JzZXJ2ZXIvfFJlc2l6ZU9ic2VydmVyfS5cbiAgICpcbiAgICogSWYgdGhlIFJlc2l6ZU9ic2VydmVyIGlzIGF2YWlsYWJsZSBuYXRpdmVseSwgaXQgd2lsbCBiZSB1c2VkLiBBIHBvbHlmaWxsIGNhbiBiZSBwYXNzZWQgaW4gYXMgYW4gb3B0aW9uLlxuICAgKiBJZiBhIGBwbGF5ZXJyZXNpemVgIGV2ZW50IGlzIG5vdCBuZWVkZWQsIHRoZSBSZXNpemVNYW5hZ2VyIGNvbXBvbmVudCBjYW4gYmUgcmVtb3ZlZCBmcm9tIHRoZSBwbGF5ZXIsIHNlZSB0aGUgZXhhbXBsZSBiZWxvdy5cbiAgICogQGV4YW1wbGUgPGNhcHRpb24+SG93IHRvIGRpc2FibGUgdGhlIHJlc2l6ZSBtYW5hZ2VyPC9jYXB0aW9uPlxuICAgKiBjb25zdCBwbGF5ZXIgPSB2aWRlb2pzKCcjdmlkJywge1xuICAgKiAgIHJlc2l6ZU1hbmFnZXI6IGZhbHNlXG4gICAqIH0pO1xuICAgKlxuICAgKiBAc2VlIHtAbGluayBodHRwczovL3dpY2cuZ2l0aHViLmlvL1Jlc2l6ZU9ic2VydmVyL3xSZXNpemVPYnNlcnZlciBzcGVjaWZpY2F0aW9ufVxuICAgKlxuICAgKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAgICovXG5cbiAgdmFyIFJlc2l6ZU1hbmFnZXIgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoUmVzaXplTWFuYWdlciwgX0NvbXBvbmVudCk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIFJlc2l6ZU1hbmFnZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGxheWVyXG4gICAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIFJlc2l6ZU1hbmFnZXIgb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5SZXNpemVPYnNlcnZlcl1cbiAgICAgKiAgICAgICAgQSBwb2x5ZmlsbCBmb3IgUmVzaXplT2JzZXJ2ZXIgY2FuIGJlIHBhc3NlZCBpbiBoZXJlLlxuICAgICAqICAgICAgICBJZiB0aGlzIGlzIHNldCB0byBudWxsIGl0IHdpbGwgaWdub3JlIHRoZSBuYXRpdmUgUmVzaXplT2JzZXJ2ZXIgYW5kIGZhbGwgYmFjayB0byB0aGUgaWZyYW1lIGZhbGxiYWNrLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJlc2l6ZU1hbmFnZXIocGxheWVyLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIHZhciBSRVNJWkVfT0JTRVJWRVJfQVZBSUxBQkxFID0gb3B0aW9ucy5SZXNpemVPYnNlcnZlciB8fCB3aW5kb3ckMS5SZXNpemVPYnNlcnZlcjsgLy8gaWYgYG51bGxgIHdhcyBwYXNzZWQsIHdlIHdhbnQgdG8gZGlzYWJsZSB0aGUgUmVzaXplT2JzZXJ2ZXJcblxuICAgICAgaWYgKG9wdGlvbnMuUmVzaXplT2JzZXJ2ZXIgPT09IG51bGwpIHtcbiAgICAgICAgUkVTSVpFX09CU0VSVkVSX0FWQUlMQUJMRSA9IGZhbHNlO1xuICAgICAgfSAvLyBPbmx5IGNyZWF0ZSBhbiBlbGVtZW50IHdoZW4gUmVzaXplT2JzZXJ2ZXIgaXNuJ3QgYXZhaWxhYmxlXG5cblxuICAgICAgdmFyIG9wdGlvbnNfID0gbWVyZ2VPcHRpb25zKHtcbiAgICAgICAgY3JlYXRlRWw6ICFSRVNJWkVfT0JTRVJWRVJfQVZBSUxBQkxFLFxuICAgICAgICByZXBvcnRUb3VjaEFjdGl2aXR5OiBmYWxzZVxuICAgICAgfSwgb3B0aW9ucyk7XG4gICAgICBfdGhpcyA9IF9Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnNfKSB8fCB0aGlzO1xuICAgICAgX3RoaXMuUmVzaXplT2JzZXJ2ZXIgPSBvcHRpb25zLlJlc2l6ZU9ic2VydmVyIHx8IHdpbmRvdyQxLlJlc2l6ZU9ic2VydmVyO1xuICAgICAgX3RoaXMubG9hZExpc3RlbmVyXyA9IG51bGw7XG4gICAgICBfdGhpcy5yZXNpemVPYnNlcnZlcl8gPSBudWxsO1xuICAgICAgX3RoaXMuZGVib3VuY2VkSGFuZGxlcl8gPSBkZWJvdW5jZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLnJlc2l6ZUhhbmRsZXIoKTtcbiAgICAgIH0sIDEwMCwgZmFsc2UsIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpKTtcblxuICAgICAgaWYgKFJFU0laRV9PQlNFUlZFUl9BVkFJTEFCTEUpIHtcbiAgICAgICAgX3RoaXMucmVzaXplT2JzZXJ2ZXJfID0gbmV3IF90aGlzLlJlc2l6ZU9ic2VydmVyKF90aGlzLmRlYm91bmNlZEhhbmRsZXJfKTtcblxuICAgICAgICBfdGhpcy5yZXNpemVPYnNlcnZlcl8ub2JzZXJ2ZShwbGF5ZXIuZWwoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpcy5sb2FkTGlzdGVuZXJfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICghX3RoaXMuZWxfIHx8ICFfdGhpcy5lbF8uY29udGVudFdpbmRvdykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBkZWJvdW5jZWRIYW5kbGVyXyA9IF90aGlzLmRlYm91bmNlZEhhbmRsZXJfO1xuXG4gICAgICAgICAgdmFyIHVubG9hZExpc3RlbmVyXyA9IF90aGlzLnVubG9hZExpc3RlbmVyXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9mZih0aGlzLCAncmVzaXplJywgZGVib3VuY2VkSGFuZGxlcl8pO1xuICAgICAgICAgICAgb2ZmKHRoaXMsICd1bmxvYWQnLCB1bmxvYWRMaXN0ZW5lcl8pO1xuICAgICAgICAgICAgdW5sb2FkTGlzdGVuZXJfID0gbnVsbDtcbiAgICAgICAgICB9OyAvLyBzYWZhcmkgYW5kIGVkZ2UgY2FuIHVubG9hZCB0aGUgaWZyYW1lIGJlZm9yZSByZXNpemVtYW5hZ2VyIGRpc3Bvc2VcbiAgICAgICAgICAvLyB3ZSBoYXZlIHRvIGRpc3Bvc2Ugb2YgZXZlbnQgaGFuZGxlcnMgY29ycmVjdGx5IGJlZm9yZSB0aGF0IGhhcHBlbnNcblxuXG4gICAgICAgICAgb24oX3RoaXMuZWxfLmNvbnRlbnRXaW5kb3csICd1bmxvYWQnLCB1bmxvYWRMaXN0ZW5lcl8pO1xuICAgICAgICAgIG9uKF90aGlzLmVsXy5jb250ZW50V2luZG93LCAncmVzaXplJywgZGVib3VuY2VkSGFuZGxlcl8pO1xuICAgICAgICB9O1xuXG4gICAgICAgIF90aGlzLm9uZSgnbG9hZCcsIF90aGlzLmxvYWRMaXN0ZW5lcl8pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90byA9IFJlc2l6ZU1hbmFnZXIucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwoKSB7XG4gICAgICByZXR1cm4gX0NvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnaWZyYW1lJywge1xuICAgICAgICBjbGFzc05hbWU6ICd2anMtcmVzaXplLW1hbmFnZXInLFxuICAgICAgICB0YWJJbmRleDogLTFcbiAgICAgIH0sIHtcbiAgICAgICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnXG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gYSByZXNpemUgaXMgdHJpZ2dlcmVkIG9uIHRoZSBpZnJhbWUgb3IgYSByZXNpemUgaXMgb2JzZXJ2ZWQgdmlhIHRoZSBSZXNpemVPYnNlcnZlclxuICAgICAqXG4gICAgICogQGZpcmVzIFBsYXllciNwbGF5ZXJyZXNpemVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ucmVzaXplSGFuZGxlciA9IGZ1bmN0aW9uIHJlc2l6ZUhhbmRsZXIoKSB7XG4gICAgICAvKipcbiAgICAgICAqIENhbGxlZCB3aGVuIHRoZSBwbGF5ZXIgc2l6ZSBoYXMgY2hhbmdlZFxuICAgICAgICpcbiAgICAgICAqIEBldmVudCBQbGF5ZXIjcGxheWVycmVzaXplXG4gICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgKi9cbiAgICAgIC8vIG1ha2Ugc3VyZSBwbGF5ZXIgaXMgc3RpbGwgYXJvdW5kIHRvIHRyaWdnZXJcbiAgICAgIC8vIHByZXZlbnRzIHRoaXMgZnJvbSBjYXVzaW5nIGFuIGVycm9yIGFmdGVyIGRpc3Bvc2VcbiAgICAgIGlmICghdGhpcy5wbGF5ZXJfIHx8ICF0aGlzLnBsYXllcl8udHJpZ2dlcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMucGxheWVyXy50cmlnZ2VyKCdwbGF5ZXJyZXNpemUnKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgaWYgKHRoaXMuZGVib3VuY2VkSGFuZGxlcl8pIHtcbiAgICAgICAgdGhpcy5kZWJvdW5jZWRIYW5kbGVyXy5jYW5jZWwoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMucmVzaXplT2JzZXJ2ZXJfKSB7XG4gICAgICAgIGlmICh0aGlzLnBsYXllcl8uZWwoKSkge1xuICAgICAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXJfLnVub2JzZXJ2ZSh0aGlzLnBsYXllcl8uZWwoKSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyXy5kaXNjb25uZWN0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmxvYWRMaXN0ZW5lcl8pIHtcbiAgICAgICAgdGhpcy5vZmYoJ2xvYWQnLCB0aGlzLmxvYWRMaXN0ZW5lcl8pO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5lbF8gJiYgdGhpcy5lbF8uY29udGVudFdpbmRvdyAmJiB0aGlzLnVubG9hZExpc3RlbmVyXykge1xuICAgICAgICB0aGlzLnVubG9hZExpc3RlbmVyXy5jYWxsKHRoaXMuZWxfLmNvbnRlbnRXaW5kb3cpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLlJlc2l6ZU9ic2VydmVyID0gbnVsbDtcbiAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgdGhpcy5kZWJvdW5jZWRIYW5kbGVyXyA9IG51bGw7XG4gICAgICB0aGlzLmxvYWRMaXN0ZW5lcl8gPSBudWxsO1xuXG4gICAgICBfQ29tcG9uZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBSZXNpemVNYW5hZ2VyO1xuICB9KENvbXBvbmVudCk7XG5cbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdSZXNpemVNYW5hZ2VyJywgUmVzaXplTWFuYWdlcik7XG5cbiAgLyogdHJhY2sgd2hlbiB3ZSBhcmUgYXQgdGhlIGxpdmUgZWRnZSwgYW5kIG90aGVyIGhlbHBlcnMgZm9yIGxpdmUgcGxheWJhY2sgKi9cblxuICB2YXIgTGl2ZVRyYWNrZXIgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoTGl2ZVRyYWNrZXIsIF9Db21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gTGl2ZVRyYWNrZXIocGxheWVyLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIC8vIExpdmVUcmFja2VyIGRvZXMgbm90IG5lZWQgYW4gZWxlbWVudFxuICAgICAgdmFyIG9wdGlvbnNfID0gbWVyZ2VPcHRpb25zKHtcbiAgICAgICAgY3JlYXRlRWw6IGZhbHNlXG4gICAgICB9LCBvcHRpb25zKTtcbiAgICAgIF90aGlzID0gX0NvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9uc18pIHx8IHRoaXM7XG5cbiAgICAgIF90aGlzLnJlc2V0XygpO1xuXG4gICAgICBfdGhpcy5vbihfdGhpcy5wbGF5ZXJfLCAnZHVyYXRpb25jaGFuZ2UnLCBfdGhpcy5oYW5kbGVEdXJhdGlvbmNoYW5nZSk7IC8vIHdlIGRvbid0IG5lZWQgdG8gdHJhY2sgbGl2ZSBwbGF5YmFjayBpZiB0aGUgZG9jdW1lbnQgaXMgaGlkZGVuLFxuICAgICAgLy8gYWxzbywgdHJhY2tpbmcgd2hlbiB0aGUgZG9jdW1lbnQgaXMgaGlkZGVuIGNhblxuICAgICAgLy8gY2F1c2UgdGhlIENQVSB0byBzcGlrZSBhbmQgZXZlbnR1YWxseSBjcmFzaCB0aGUgcGFnZSBvbiBJRTExLlxuXG5cbiAgICAgIGlmIChJRV9WRVJTSU9OICYmICdoaWRkZW4nIGluIGRvY3VtZW50ICYmICd2aXNpYmlsaXR5U3RhdGUnIGluIGRvY3VtZW50KSB7XG4gICAgICAgIF90aGlzLm9uKGRvY3VtZW50LCAndmlzaWJpbGl0eWNoYW5nZScsIF90aGlzLmhhbmRsZVZpc2liaWxpdHlDaGFuZ2UpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgdmFyIF9wcm90byA9IExpdmVUcmFja2VyLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5oYW5kbGVWaXNpYmlsaXR5Q2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSgpIHtcbiAgICAgIGlmICh0aGlzLnBsYXllcl8uZHVyYXRpb24oKSAhPT0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoZG9jdW1lbnQuaGlkZGVuKSB7XG4gICAgICAgIHRoaXMuc3RvcFRyYWNraW5nKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnN0YXJ0VHJhY2tpbmcoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLmlzQmVoaW5kXyA9IGZ1bmN0aW9uIGlzQmVoaW5kXygpIHtcbiAgICAgIC8vIGRvbid0IHJlcG9ydCB0aGF0IHdlIGFyZSBiZWhpbmQgdW50aWwgYSB0aW1ldXBkYXRlIGhhcyBiZWVuIHNlZW5cbiAgICAgIGlmICghdGhpcy50aW1ldXBkYXRlU2Vlbl8pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgbGl2ZUN1cnJlbnRUaW1lID0gdGhpcy5saXZlQ3VycmVudFRpbWUoKTtcbiAgICAgIHZhciBjdXJyZW50VGltZSA9IHRoaXMucGxheWVyXy5jdXJyZW50VGltZSgpO1xuICAgICAgdmFyIHNlZWthYmxlSW5jcmVtZW50ID0gdGhpcy5zZWVrYWJsZUluY3JlbWVudF87IC8vIHRoZSBsaXZlIGVkZ2Ugd2luZG93IGlzIHRoZSBhbW91bnQgb2Ygc2Vjb25kcyBhd2F5IGZyb20gbGl2ZVxuICAgICAgLy8gdGhhdCBhIHBsYXllciBjYW4gYmUsIGJ1dCBzdGlsbCBiZSBjb25zaWRlcmVkIGxpdmUuXG4gICAgICAvLyB3ZSBhZGQgMC4wNyBiZWNhdXNlIHRoZSBsaXZlIHRyYWNraW5nIGhhcHBlbnMgZXZlcnkgMzBtc1xuICAgICAgLy8gYW5kIHdlIHdhbnQgc29tZSB3aWdnbGUgcm9vbSBmb3Igc2hvcnQgc2VnbWVudCBsaXZlIHBsYXliYWNrXG5cbiAgICAgIHZhciBsaXZlRWRnZVdpbmRvdyA9IHNlZWthYmxlSW5jcmVtZW50ICogMiArIDAuMDc7IC8vIG9uIEFuZHJvaWQgbGl2ZUN1cnJlbnRUaW1lIGNhbiBiZWUgSW5maW5pdHksIGJlY2F1c2Ugc2Vla2FibGVFbmRcbiAgICAgIC8vIGNhbiBiZSBJbmZpbml0eSwgc28gd2UgaGFuZGxlIHRoYXQgY2FzZS5cblxuICAgICAgcmV0dXJuIGxpdmVDdXJyZW50VGltZSAhPT0gSW5maW5pdHkgJiYgbGl2ZUN1cnJlbnRUaW1lIC0gbGl2ZUVkZ2VXaW5kb3cgPj0gY3VycmVudFRpbWU7XG4gICAgfSAvLyBhbGwgdGhlIGZ1bmN0aW9uYWxpdHkgZm9yIHRyYWNraW5nIHdoZW4gc2VlayBlbmQgY2hhbmdlc1xuICAgIC8vIGFuZCBmb3IgdHJhY2tpbmcgaG93IGZhciBwYXN0IHNlZWsgZW5kIHdlIHNob3VsZCBiZVxuICAgIDtcblxuICAgIF9wcm90by50cmFja0xpdmVfID0gZnVuY3Rpb24gdHJhY2tMaXZlXygpIHtcbiAgICAgIHRoaXMucGFzdFNlZWtFbmRfID0gdGhpcy5wYXN0U2Vla0VuZF87XG4gICAgICB2YXIgc2Vla2FibGUgPSB0aGlzLnBsYXllcl8uc2Vla2FibGUoKTsgLy8gc2tpcCB1bmRlZmluZWQgc2Vla2FibGVcblxuICAgICAgaWYgKCFzZWVrYWJsZSB8fCAhc2Vla2FibGUubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIG5ld1NlZWtFbmQgPSB0aGlzLnNlZWthYmxlRW5kKCk7IC8vIHdlIGNhbiBvbmx5IHRlbGwgaWYgd2UgYXJlIGJlaGluZCBsaXZlLCB3aGVuIHNlZWthYmxlIGNoYW5nZXNcbiAgICAgIC8vIG9uY2Ugd2UgZGV0ZWN0IHRoYXQgc2Vla2FibGUgaGFzIGNoYW5nZWQgd2UgY2hlY2sgdGhlIG5ldyBzZWVrXG4gICAgICAvLyBlbmQgYWdhaW5zdCBjdXJyZW50IHRpbWUsIHdpdGggYSBmdWRnZSB2YWx1ZSBvZiBoYWxmIGEgc2Vjb25kLlxuXG4gICAgICBpZiAobmV3U2Vla0VuZCAhPT0gdGhpcy5sYXN0U2Vla0VuZF8pIHtcbiAgICAgICAgaWYgKHRoaXMubGFzdFNlZWtFbmRfKSB7XG4gICAgICAgICAgdGhpcy5zZWVrYWJsZUluY3JlbWVudF8gPSBNYXRoLmFicyhuZXdTZWVrRW5kIC0gdGhpcy5sYXN0U2Vla0VuZF8pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXN0U2Vla0VuZF8gPSAwO1xuICAgICAgICB0aGlzLmxhc3RTZWVrRW5kXyA9IG5ld1NlZWtFbmQ7XG4gICAgICAgIHRoaXMudHJpZ2dlcignc2Vla2FibGVlbmRjaGFuZ2UnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wYXN0U2Vla0VuZF8gPSB0aGlzLnBhc3RTZWVrRW5kKCkgKyAwLjAzO1xuXG4gICAgICBpZiAodGhpcy5pc0JlaGluZF8oKSAhPT0gdGhpcy5iZWhpbmRMaXZlRWRnZSgpKSB7XG4gICAgICAgIHRoaXMuYmVoaW5kTGl2ZUVkZ2VfID0gdGhpcy5pc0JlaGluZF8oKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdsaXZlZWRnZWNoYW5nZScpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBoYW5kbGUgYSBkdXJhdGlvbmNoYW5nZSBldmVudCBvbiB0aGUgcGxheWVyXG4gICAgICogYW5kIHN0YXJ0L3N0b3AgdHJhY2tpbmcgYWNjb3JkaW5nbHkuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZUR1cmF0aW9uY2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlRHVyYXRpb25jaGFuZ2UoKSB7XG4gICAgICBpZiAodGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCkgPT09IEluZmluaXR5KSB7XG4gICAgICAgIHRoaXMuc3RhcnRUcmFja2luZygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdG9wVHJhY2tpbmcoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogc3RhcnQgdHJhY2tpbmcgbGl2ZSBwbGF5YmFja1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zdGFydFRyYWNraW5nID0gZnVuY3Rpb24gc3RhcnRUcmFja2luZygpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5pc1RyYWNraW5nKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRyYWNraW5nSW50ZXJ2YWxfID0gdGhpcy5zZXRJbnRlcnZhbCh0aGlzLnRyYWNrTGl2ZV8sIDMwKTtcbiAgICAgIHRoaXMudHJhY2tMaXZlXygpO1xuICAgICAgdGhpcy5vbih0aGlzLnBsYXllcl8sICdwbGF5JywgdGhpcy50cmFja0xpdmVfKTtcbiAgICAgIHRoaXMub24odGhpcy5wbGF5ZXJfLCAncGF1c2UnLCB0aGlzLnRyYWNrTGl2ZV8pO1xuICAgICAgdGhpcy5vbmUodGhpcy5wbGF5ZXJfLCAncGxheScsIHRoaXMuaGFuZGxlUGxheSk7IC8vIHRoaXMgaXMgdG8gcHJldmVudCBzaG93aW5nIHRoYXQgd2UgYXJlIG5vdCBsaXZlXG4gICAgICAvLyBiZWZvcmUgYSB2aWRlbyBzdGFydHMgdG8gcGxheVxuXG4gICAgICBpZiAoIXRoaXMudGltZXVwZGF0ZVNlZW5fKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlVGltZXVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczIudGltZXVwZGF0ZVNlZW5fID0gdHJ1ZTtcbiAgICAgICAgICBfdGhpczIuaGFuZGxlVGltZXVwZGF0ZSA9IG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5vbmUodGhpcy5wbGF5ZXJfLCAndGltZXVwZGF0ZScsIHRoaXMuaGFuZGxlVGltZXVwZGF0ZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5oYW5kbGVQbGF5ID0gZnVuY3Rpb24gaGFuZGxlUGxheSgpIHtcbiAgICAgIHRoaXMub25lKHRoaXMucGxheWVyXywgJ3RpbWV1cGRhdGUnLCB0aGlzLnNlZWtUb0xpdmVFZGdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcCB0cmFja2luZywgYW5kIHNldCBhbGwgaW50ZXJuYWwgdmFyaWFibGVzIHRvXG4gICAgICogdGhlaXIgaW5pdGlhbCB2YWx1ZS5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ucmVzZXRfID0gZnVuY3Rpb24gcmVzZXRfKCkge1xuICAgICAgdGhpcy5wYXN0U2Vla0VuZF8gPSAwO1xuICAgICAgdGhpcy5sYXN0U2Vla0VuZF8gPSBudWxsO1xuICAgICAgdGhpcy5iZWhpbmRMaXZlRWRnZV8gPSBudWxsO1xuICAgICAgdGhpcy50aW1ldXBkYXRlU2Vlbl8gPSBmYWxzZTtcbiAgICAgIHRoaXMuY2xlYXJJbnRlcnZhbCh0aGlzLnRyYWNraW5nSW50ZXJ2YWxfKTtcbiAgICAgIHRoaXMudHJhY2tpbmdJbnRlcnZhbF8gPSBudWxsO1xuICAgICAgdGhpcy5zZWVrYWJsZUluY3JlbWVudF8gPSAxMjtcbiAgICAgIHRoaXMub2ZmKHRoaXMucGxheWVyXywgJ3BsYXknLCB0aGlzLnRyYWNrTGl2ZV8pO1xuICAgICAgdGhpcy5vZmYodGhpcy5wbGF5ZXJfLCAncGF1c2UnLCB0aGlzLnRyYWNrTGl2ZV8pO1xuICAgICAgdGhpcy5vZmYodGhpcy5wbGF5ZXJfLCAncGxheScsIHRoaXMuaGFuZGxlUGxheSk7XG4gICAgICB0aGlzLm9mZih0aGlzLnBsYXllcl8sICd0aW1ldXBkYXRlJywgdGhpcy5zZWVrVG9MaXZlRWRnZSk7XG5cbiAgICAgIGlmICh0aGlzLmhhbmRsZVRpbWV1cGRhdGUpIHtcbiAgICAgICAgdGhpcy5vZmYodGhpcy5wbGF5ZXJfLCAndGltZXVwZGF0ZScsIHRoaXMuaGFuZGxlVGltZXVwZGF0ZSk7XG4gICAgICAgIHRoaXMuaGFuZGxlVGltZXVwZGF0ZSA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHN0b3AgdHJhY2tpbmcgbGl2ZSBwbGF5YmFja1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zdG9wVHJhY2tpbmcgPSBmdW5jdGlvbiBzdG9wVHJhY2tpbmcoKSB7XG4gICAgICBpZiAoIXRoaXMuaXNUcmFja2luZygpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZXNldF8oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBoZWxwZXIgdG8gZ2V0IHRoZSBwbGF5ZXIgc2Vla2FibGUgZW5kXG4gICAgICogc28gdGhhdCB3ZSBkb24ndCBoYXZlIHRvIG51bGwgY2hlY2sgZXZlcnl3aGVyZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zZWVrYWJsZUVuZCA9IGZ1bmN0aW9uIHNlZWthYmxlRW5kKCkge1xuICAgICAgdmFyIHNlZWthYmxlID0gdGhpcy5wbGF5ZXJfLnNlZWthYmxlKCk7XG4gICAgICB2YXIgc2Vla2FibGVFbmRzID0gW107XG4gICAgICB2YXIgaSA9IHNlZWthYmxlID8gc2Vla2FibGUubGVuZ3RoIDogMDtcblxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBzZWVrYWJsZUVuZHMucHVzaChzZWVrYWJsZS5lbmQoaSkpO1xuICAgICAgfSAvLyBncmFiIHRoZSBmdXJ0aGVzdCBzZWVrYWJsZSBlbmQgYWZ0ZXIgc29ydGluZywgb3IgaWYgdGhlcmUgYXJlIG5vbmVcbiAgICAgIC8vIGRlZmF1bHQgdG8gSW5maW5pdHlcblxuXG4gICAgICByZXR1cm4gc2Vla2FibGVFbmRzLmxlbmd0aCA/IHNlZWthYmxlRW5kcy5zb3J0KClbc2Vla2FibGVFbmRzLmxlbmd0aCAtIDFdIDogSW5maW5pdHk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgaGVscGVyIHRvIGdldCB0aGUgcGxheWVyIHNlZWthYmxlIHN0YXJ0XG4gICAgICogc28gdGhhdCB3ZSBkb24ndCBoYXZlIHRvIG51bGwgY2hlY2sgZXZlcnl3aGVyZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zZWVrYWJsZVN0YXJ0ID0gZnVuY3Rpb24gc2Vla2FibGVTdGFydCgpIHtcbiAgICAgIHZhciBzZWVrYWJsZSA9IHRoaXMucGxheWVyXy5zZWVrYWJsZSgpO1xuICAgICAgdmFyIHNlZWthYmxlU3RhcnRzID0gW107XG4gICAgICB2YXIgaSA9IHNlZWthYmxlID8gc2Vla2FibGUubGVuZ3RoIDogMDtcblxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBzZWVrYWJsZVN0YXJ0cy5wdXNoKHNlZWthYmxlLnN0YXJ0KGkpKTtcbiAgICAgIH0gLy8gZ3JhYiB0aGUgZmlyc3Qgc2Vla2FibGUgc3RhcnQgYWZ0ZXIgc29ydGluZywgb3IgaWYgdGhlcmUgYXJlIG5vbmVcbiAgICAgIC8vIGRlZmF1bHQgdG8gMFxuXG5cbiAgICAgIHJldHVybiBzZWVrYWJsZVN0YXJ0cy5sZW5ndGggPyBzZWVrYWJsZVN0YXJ0cy5zb3J0KClbMF0gOiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxpdmUgdGltZSB3aW5kb3dcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ubGl2ZVdpbmRvdyA9IGZ1bmN0aW9uIGxpdmVXaW5kb3coKSB7XG4gICAgICB2YXIgbGl2ZUN1cnJlbnRUaW1lID0gdGhpcy5saXZlQ3VycmVudFRpbWUoKTtcblxuICAgICAgaWYgKGxpdmVDdXJyZW50VGltZSA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIEluZmluaXR5O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbGl2ZUN1cnJlbnRUaW1lIC0gdGhpcy5zZWVrYWJsZVN0YXJ0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgdGhlIHBsYXllciBpcyBsaXZlLCBvbmx5IGNoZWNrcyBpZiB0aGlzIGNvbXBvbmVudFxuICAgICAqIGlzIHRyYWNraW5nIGxpdmUgcGxheWJhY2sgb3Igbm90XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmlzTGl2ZSA9IGZ1bmN0aW9uIGlzTGl2ZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzVHJhY2tpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiBjdXJyZW50VGltZSBpcyBhdCB0aGUgbGl2ZSBlZGdlIGFuZCB3b24ndCBmYWxsIGJlaGluZFxuICAgICAqIG9uIGVhY2ggc2Vla2FibGVlbmRjaGFuZ2VcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uYXRMaXZlRWRnZSA9IGZ1bmN0aW9uIGF0TGl2ZUVkZ2UoKSB7XG4gICAgICByZXR1cm4gIXRoaXMuYmVoaW5kTGl2ZUVkZ2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogZ2V0IHdoYXQgd2UgZXhwZWN0IHRoZSBsaXZlIGN1cnJlbnQgdGltZSB0byBiZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5saXZlQ3VycmVudFRpbWUgPSBmdW5jdGlvbiBsaXZlQ3VycmVudFRpbWUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wYXN0U2Vla0VuZCgpICsgdGhpcy5zZWVrYWJsZUVuZCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGhvdyBmYXIgcGFzdCBzZWVrIGVuZCB3ZSBleHBlY3QgY3VycmVudCB0aW1lIHRvIGJlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnBhc3RTZWVrRW5kID0gZnVuY3Rpb24gcGFzdFNlZWtFbmQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wYXN0U2Vla0VuZF87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHdlIGFyZSBjdXJyZW50bHkgYmVoaW5kIHRoZSBsaXZlIGVkZ2UsIGFrYSBjdXJyZW50VGltZSB3aWxsIGJlXG4gICAgICogYmVoaW5kIG9uIGEgc2Vla2FibGVlbmRjaGFuZ2VcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uYmVoaW5kTGl2ZUVkZ2UgPSBmdW5jdGlvbiBiZWhpbmRMaXZlRWRnZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLmJlaGluZExpdmVFZGdlXztcbiAgICB9O1xuXG4gICAgX3Byb3RvLmlzVHJhY2tpbmcgPSBmdW5jdGlvbiBpc1RyYWNraW5nKCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLnRyYWNraW5nSW50ZXJ2YWxfID09PSAnbnVtYmVyJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VlayB0byB0aGUgbGl2ZSBlZGdlIGlmIHdlIGFyZSBiZWhpbmQgdGhlIGxpdmUgZWRnZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zZWVrVG9MaXZlRWRnZSA9IGZ1bmN0aW9uIHNlZWtUb0xpdmVFZGdlKCkge1xuICAgICAgaWYgKHRoaXMuYXRMaXZlRWRnZSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKHRoaXMubGl2ZUN1cnJlbnRUaW1lKCkpO1xuXG4gICAgICBpZiAodGhpcy5wbGF5ZXJfLnBhdXNlZCgpKSB7XG4gICAgICAgIHRoaXMucGxheWVyXy5wbGF5KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgIHRoaXMuc3RvcFRyYWNraW5nKCk7XG5cbiAgICAgIF9Db21wb25lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIExpdmVUcmFja2VyO1xuICB9KENvbXBvbmVudCk7XG5cbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdMaXZlVHJhY2tlcicsIExpdmVUcmFja2VyKTtcblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGZpcmUgYSBzb3VyY2VzZXQgd2hlbiB0aGVyZSBpcyBzb21ldGhpbmdcbiAgICogc2ltaWxhciB0byBgbWVkaWFFbC5sb2FkKClgIGJlaW5nIGNhbGxlZC4gSXQgd2lsbCB0cnkgdG8gZmluZCB0aGUgc291cmNlIHZpYVxuICAgKiB0aGUgYHNyY2AgYXR0cmlidXRlIGFuZCB0aGVuIHRoZSBgPHNvdXJjZT5gIGVsZW1lbnRzLiBJdCB3aWxsIHRoZW4gZmlyZSBgc291cmNlc2V0YFxuICAgKiB3aXRoIHRoZSBzb3VyY2UgdGhhdCB3YXMgZm91bmQgb3IgZW1wdHkgc3RyaW5nIGlmIHdlIGNhbm5vdCBrbm93LiBJZiBpdCBjYW5ub3RcbiAgICogZmluZCBhIHNvdXJjZSB0aGVuIGBzb3VyY2VzZXRgIHdpbGwgbm90IGJlIGZpcmVkLlxuICAgKlxuICAgKiBAcGFyYW0ge0h0bWw1fSB0ZWNoXG4gICAqICAgICAgICBUaGUgdGVjaCBvYmplY3QgdGhhdCBzb3VyY2VzZXQgd2FzIHNldHVwIG9uXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqICAgICAgICAgcmV0dXJucyBmYWxzZSBpZiB0aGUgc291cmNlc2V0IHdhcyBub3QgZmlyZWQgYW5kIHRydWUgb3RoZXJ3aXNlLlxuICAgKi9cblxuICB2YXIgc291cmNlc2V0TG9hZCA9IGZ1bmN0aW9uIHNvdXJjZXNldExvYWQodGVjaCkge1xuICAgIHZhciBlbCA9IHRlY2guZWwoKTsgLy8gaWYgYGVsLnNyY2AgaXMgc2V0LCB0aGF0IHNvdXJjZSB3aWxsIGJlIGxvYWRlZC5cblxuICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3NyYycpKSB7XG4gICAgICB0ZWNoLnRyaWdnZXJTb3VyY2VzZXQoZWwuc3JjKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaW5jZSB0aGVyZSBpc24ndCBhIHNyYyBwcm9wZXJ0eSBvbiB0aGUgbWVkaWEgZWxlbWVudCwgc291cmNlIGVsZW1lbnRzIHdpbGwgYmUgdXNlZCBmb3JcbiAgICAgKiBpbXBsZW1lbnRpbmcgdGhlIHNvdXJjZSBzZWxlY3Rpb24gYWxnb3JpdGhtLiBUaGlzIGhhcHBlbnMgYXN5bmNocm9ub3VzbHkgYW5kXG4gICAgICogZm9yIG1vc3QgY2FzZXMgd2VyZSB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIHNvdXJjZSB3ZSBjYW5ub3QgdGVsbCB3aGF0IHNvdXJjZSB3aWxsXG4gICAgICogYmUgbG9hZGVkLCB3aXRob3V0IHJlLWltcGxlbWVudGluZyB0aGUgc291cmNlIHNlbGVjdGlvbiBhbGdvcml0aG0uIEF0IHRoaXMgdGltZSB3ZSBhcmUgbm90XG4gICAgICogZ29pbmcgdG8gZG8gdGhhdC4gVGhlcmUgYXJlIHRocmVlIHNwZWNpYWwgY2FzZXMgdGhhdCB3ZSBkbyBoYW5kbGUgaGVyZSB0aG91Z2g6XG4gICAgICpcbiAgICAgKiAxLiBJZiB0aGVyZSBhcmUgbm8gc291cmNlcywgZG8gbm90IGZpcmUgYHNvdXJjZXNldGAuXG4gICAgICogMi4gSWYgdGhlcmUgaXMgb25seSBvbmUgYDxzb3VyY2U+YCB3aXRoIGEgYHNyY2AgcHJvcGVydHkvYXR0cmlidXRlIHRoYXQgaXMgb3VyIGBzcmNgXG4gICAgICogMy4gSWYgdGhlcmUgaXMgbW9yZSB0aGFuIG9uZSBgPHNvdXJjZT5gIGJ1dCBhbGwgb2YgdGhlbSBoYXZlIHRoZSBzYW1lIGBzcmNgIHVybC5cbiAgICAgKiAgICBUaGF0IHdpbGwgYmUgb3VyIHNyYy5cbiAgICAgKi9cblxuXG4gICAgdmFyIHNvdXJjZXMgPSB0ZWNoLiQkKCdzb3VyY2UnKTtcbiAgICB2YXIgc3JjVXJscyA9IFtdO1xuICAgIHZhciBzcmMgPSAnJzsgLy8gaWYgdGhlcmUgYXJlIG5vIHNvdXJjZXMsIGRvIG5vdCBmaXJlIHNvdXJjZXNldFxuXG4gICAgaWYgKCFzb3VyY2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gLy8gb25seSBjb3VudCB2YWxpZC9ub24tZHVwbGljYXRlIHNvdXJjZSBlbGVtZW50c1xuXG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNvdXJjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB1cmwgPSBzb3VyY2VzW2ldLnNyYztcblxuICAgICAgaWYgKHVybCAmJiBzcmNVcmxzLmluZGV4T2YodXJsKSA9PT0gLTEpIHtcbiAgICAgICAgc3JjVXJscy5wdXNoKHVybCk7XG4gICAgICB9XG4gICAgfSAvLyB0aGVyZSB3ZXJlIG5vIHZhbGlkIHNvdXJjZXNcblxuXG4gICAgaWYgKCFzcmNVcmxzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gLy8gdGhlcmUgaXMgb25seSBvbmUgdmFsaWQgc291cmNlIGVsZW1lbnQgdXJsXG4gICAgLy8gdXNlIHRoYXRcblxuXG4gICAgaWYgKHNyY1VybHMubGVuZ3RoID09PSAxKSB7XG4gICAgICBzcmMgPSBzcmNVcmxzWzBdO1xuICAgIH1cblxuICAgIHRlY2gudHJpZ2dlclNvdXJjZXNldChzcmMpO1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuICAvKipcbiAgICogb3VyIGltcGxlbWVudGF0aW9uIG9mIGFuIGBpbm5lckhUTUxgIGRlc2NyaXB0b3IgZm9yIGJyb3dzZXJzXG4gICAqIHRoYXQgZG8gbm90IGhhdmUgb25lLlxuICAgKi9cblxuXG4gIHZhciBpbm5lckhUTUxEZXNjcmlwdG9yUG9seWZpbGwgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdpbm5lckhUTUwnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jbG9uZU5vZGUodHJ1ZSkuaW5uZXJIVE1MO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodikge1xuICAgICAgLy8gbWFrZSBhIGR1bW15IG5vZGUgdG8gdXNlIGlubmVySFRNTCBvblxuICAgICAgdmFyIGR1bW15ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpOyAvLyBzZXQgaW5uZXJIVE1MIHRvIHRoZSB2YWx1ZSBwcm92aWRlZFxuXG4gICAgICBkdW1teS5pbm5lckhUTUwgPSB2OyAvLyBtYWtlIGEgZG9jdW1lbnQgZnJhZ21lbnQgdG8gaG9sZCB0aGUgbm9kZXMgZnJvbSBkdW1teVxuXG4gICAgICB2YXIgZG9jRnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsgLy8gY29weSBhbGwgb2YgdGhlIG5vZGVzIGNyZWF0ZWQgYnkgdGhlIGlubmVySFRNTCBvbiBkdW1teVxuICAgICAgLy8gdG8gdGhlIGRvY3VtZW50IGZyYWdtZW50XG5cbiAgICAgIHdoaWxlIChkdW1teS5jaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgICBkb2NGcmFnLmFwcGVuZENoaWxkKGR1bW15LmNoaWxkTm9kZXNbMF0pO1xuICAgICAgfSAvLyByZW1vdmUgY29udGVudFxuXG5cbiAgICAgIHRoaXMuaW5uZXJUZXh0ID0gJyc7IC8vIG5vdyB3ZSBhZGQgYWxsIG9mIHRoYXQgaHRtbCBpbiBvbmUgYnkgYXBwZW5kaW5nIHRoZVxuICAgICAgLy8gZG9jdW1lbnQgZnJhZ21lbnQuIFRoaXMgaXMgaG93IGlubmVySFRNTCBkb2VzIGl0LlxuXG4gICAgICB3aW5kb3ckMS5FbGVtZW50LnByb3RvdHlwZS5hcHBlbmRDaGlsZC5jYWxsKHRoaXMsIGRvY0ZyYWcpOyAvLyB0aGVuIHJldHVybiB0aGUgcmVzdWx0IHRoYXQgaW5uZXJIVE1MJ3Mgc2V0dGVyIHdvdWxkXG5cbiAgICAgIHJldHVybiB0aGlzLmlubmVySFRNTDtcbiAgICB9XG4gIH0pO1xuICAvKipcbiAgICogR2V0IGEgcHJvcGVydHkgZGVzY3JpcHRvciBnaXZlbiBhIGxpc3Qgb2YgcHJpb3JpdGllcyBhbmQgdGhlXG4gICAqIHByb3BlcnR5IHRvIGdldC5cbiAgICovXG5cbiAgdmFyIGdldERlc2NyaXB0b3IgPSBmdW5jdGlvbiBnZXREZXNjcmlwdG9yKHByaW9yaXR5LCBwcm9wKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSB7fTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJpb3JpdHkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByaW9yaXR5W2ldLCBwcm9wKTtcblxuICAgICAgaWYgKGRlc2NyaXB0b3IgJiYgZGVzY3JpcHRvci5zZXQgJiYgZGVzY3JpcHRvci5nZXQpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gdHJ1ZTtcbiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgcmV0dXJuIGRlc2NyaXB0b3I7XG4gIH07XG5cbiAgdmFyIGdldElubmVySFRNTERlc2NyaXB0b3IgPSBmdW5jdGlvbiBnZXRJbm5lckhUTUxEZXNjcmlwdG9yKHRlY2gpIHtcbiAgICByZXR1cm4gZ2V0RGVzY3JpcHRvcihbdGVjaC5lbCgpLCB3aW5kb3ckMS5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSwgd2luZG93JDEuRWxlbWVudC5wcm90b3R5cGUsIGlubmVySFRNTERlc2NyaXB0b3JQb2x5ZmlsbF0sICdpbm5lckhUTUwnKTtcbiAgfTtcbiAgLyoqXG4gICAqIFBhdGNoZXMgYnJvd3NlciBpbnRlcm5hbCBmdW5jdGlvbnMgc28gdGhhdCB3ZSBjYW4gdGVsbCBzeW5jaHJvbm91c2x5XG4gICAqIGlmIGEgYDxzb3VyY2U+YCB3YXMgYXBwZW5kZWQgdG8gdGhlIG1lZGlhIGVsZW1lbnQuIEZvciBzb21lIHJlYXNvbiB0aGlzXG4gICAqIGNhdXNlcyBhIGBzb3VyY2VzZXRgIGlmIHRoZSB0aGUgbWVkaWEgZWxlbWVudCBpcyByZWFkeSBhbmQgaGFzIG5vIHNvdXJjZS5cbiAgICogVGhpcyBoYXBwZW5zIHdoZW46XG4gICAqIC0gVGhlIHBhZ2UgaGFzIGp1c3QgbG9hZGVkIGFuZCB0aGUgbWVkaWEgZWxlbWVudCBkb2VzIG5vdCBoYXZlIGEgc291cmNlLlxuICAgKiAtIFRoZSBtZWRpYSBlbGVtZW50IHdhcyBlbXB0aWVkIG9mIGFsbCBzb3VyY2VzLCB0aGVuIGBsb2FkKClgIHdhcyBjYWxsZWQuXG4gICAqXG4gICAqIEl0IGRvZXMgdGhpcyBieSBwYXRjaGluZyB0aGUgZm9sbG93aW5nIGZ1bmN0aW9ucy9wcm9wZXJ0aWVzIHdoZW4gdGhleSBhcmUgc3VwcG9ydGVkOlxuICAgKlxuICAgKiAtIGBhcHBlbmQoKWAgLSBjYW4gYmUgdXNlZCB0byBhZGQgYSBgPHNvdXJjZT5gIGVsZW1lbnQgdG8gdGhlIG1lZGlhIGVsZW1lbnRcbiAgICogLSBgYXBwZW5kQ2hpbGQoKWAgLSBjYW4gYmUgdXNlZCB0byBhZGQgYSBgPHNvdXJjZT5gIGVsZW1lbnQgdG8gdGhlIG1lZGlhIGVsZW1lbnRcbiAgICogLSBgaW5zZXJ0QWRqYWNlbnRIVE1MKClgIC0gIGNhbiBiZSB1c2VkIHRvIGFkZCBhIGA8c291cmNlPmAgZWxlbWVudCB0byB0aGUgbWVkaWEgZWxlbWVudFxuICAgKiAtIGBpbm5lckhUTUxgIC0gIGNhbiBiZSB1c2VkIHRvIGFkZCBhIGA8c291cmNlPmAgZWxlbWVudCB0byB0aGUgbWVkaWEgZWxlbWVudFxuICAgKlxuICAgKiBAcGFyYW0ge0h0bWw1fSB0ZWNoXG4gICAqICAgICAgICBUaGUgdGVjaCBvYmplY3QgdGhhdCBzb3VyY2VzZXQgaXMgYmVpbmcgc2V0dXAgb24uXG4gICAqL1xuXG5cbiAgdmFyIGZpcnN0U291cmNlV2F0Y2ggPSBmdW5jdGlvbiBmaXJzdFNvdXJjZVdhdGNoKHRlY2gpIHtcbiAgICB2YXIgZWwgPSB0ZWNoLmVsKCk7IC8vIG1ha2Ugc3VyZSBmaXJzdFNvdXJjZVdhdGNoIGlzbid0IHNldHVwIHR3aWNlLlxuXG4gICAgaWYgKGVsLnJlc2V0U291cmNlV2F0Y2hfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG9sZCA9IHt9O1xuICAgIHZhciBpbm5lckRlc2NyaXB0b3IgPSBnZXRJbm5lckhUTUxEZXNjcmlwdG9yKHRlY2gpO1xuXG4gICAgdmFyIGFwcGVuZFdyYXBwZXIgPSBmdW5jdGlvbiBhcHBlbmRXcmFwcGVyKGFwcGVuZEZuKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJldHZhbCA9IGFwcGVuZEZuLmFwcGx5KGVsLCBhcmdzKTtcbiAgICAgICAgc291cmNlc2V0TG9hZCh0ZWNoKTtcbiAgICAgICAgcmV0dXJuIHJldHZhbDtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIFsnYXBwZW5kJywgJ2FwcGVuZENoaWxkJywgJ2luc2VydEFkamFjZW50SFRNTCddLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgIGlmICghZWxba10pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBzdG9yZSB0aGUgb2xkIGZ1bmN0aW9uXG5cblxuICAgICAgb2xkW2tdID0gZWxba107IC8vIGNhbGwgdGhlIG9sZCBmdW5jdGlvbiB3aXRoIGEgc291cmNlc2V0IGlmIGEgc291cmNlXG4gICAgICAvLyB3YXMgbG9hZGVkXG5cbiAgICAgIGVsW2tdID0gYXBwZW5kV3JhcHBlcihvbGRba10pO1xuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbCwgJ2lubmVySFRNTCcsIG1lcmdlT3B0aW9ucyhpbm5lckRlc2NyaXB0b3IsIHtcbiAgICAgIHNldDogYXBwZW5kV3JhcHBlcihpbm5lckRlc2NyaXB0b3Iuc2V0KVxuICAgIH0pKTtcblxuICAgIGVsLnJlc2V0U291cmNlV2F0Y2hfID0gZnVuY3Rpb24gKCkge1xuICAgICAgZWwucmVzZXRTb3VyY2VXYXRjaF8gPSBudWxsO1xuICAgICAgT2JqZWN0LmtleXMob2xkKS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIGVsW2tdID0gb2xkW2tdO1xuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWwsICdpbm5lckhUTUwnLCBpbm5lckRlc2NyaXB0b3IpO1xuICAgIH07IC8vIG9uIHRoZSBmaXJzdCBzb3VyY2VzZXQsIHdlIG5lZWQgdG8gcmV2ZXJ0IG91ciBjaGFuZ2VzXG5cblxuICAgIHRlY2gub25lKCdzb3VyY2VzZXQnLCBlbC5yZXNldFNvdXJjZVdhdGNoXyk7XG4gIH07XG4gIC8qKlxuICAgKiBvdXIgaW1wbGVtZW50YXRpb24gb2YgYSBgc3JjYCBkZXNjcmlwdG9yIGZvciBicm93c2Vyc1xuICAgKiB0aGF0IGRvIG5vdCBoYXZlIG9uZS5cbiAgICovXG5cblxuICB2YXIgc3JjRGVzY3JpcHRvclBvbHlmaWxsID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAnc3JjJywge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKHRoaXMuaGFzQXR0cmlidXRlKCdzcmMnKSkge1xuICAgICAgICByZXR1cm4gZ2V0QWJzb2x1dGVVUkwod2luZG93JDEuRWxlbWVudC5wcm90b3R5cGUuZ2V0QXR0cmlidXRlLmNhbGwodGhpcywgJ3NyYycpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICcnO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodikge1xuICAgICAgd2luZG93JDEuRWxlbWVudC5wcm90b3R5cGUuc2V0QXR0cmlidXRlLmNhbGwodGhpcywgJ3NyYycsIHYpO1xuICAgICAgcmV0dXJuIHY7XG4gICAgfVxuICB9KTtcblxuICB2YXIgZ2V0U3JjRGVzY3JpcHRvciA9IGZ1bmN0aW9uIGdldFNyY0Rlc2NyaXB0b3IodGVjaCkge1xuICAgIHJldHVybiBnZXREZXNjcmlwdG9yKFt0ZWNoLmVsKCksIHdpbmRvdyQxLkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLCBzcmNEZXNjcmlwdG9yUG9seWZpbGxdLCAnc3JjJyk7XG4gIH07XG4gIC8qKlxuICAgKiBzZXR1cCBgc291cmNlc2V0YCBoYW5kbGluZyBvbiB0aGUgYEh0bWw1YCB0ZWNoLiBUaGlzIGZ1bmN0aW9uXG4gICAqIHBhdGNoZXMgdGhlIGZvbGxvd2luZyBlbGVtZW50IHByb3BlcnRpZXMvZnVuY3Rpb25zOlxuICAgKlxuICAgKiAtIGBzcmNgIC0gdG8gZGV0ZXJtaW5lIHdoZW4gYHNyY2AgaXMgc2V0XG4gICAqIC0gYHNldEF0dHJpYnV0ZSgpYCAtIHRvIGRldGVybWluZSB3aGVuIGBzcmNgIGlzIHNldFxuICAgKiAtIGBsb2FkKClgIC0gdGhpcyByZS10cmlnZ2VycyB0aGUgc291cmNlIHNlbGVjdGlvbiBhbGdvcml0aG0sIGFuZCBjYW5cbiAgICogICAgICAgICAgICAgIGNhdXNlIGEgc291cmNlc2V0LlxuICAgKlxuICAgKiBJZiB0aGVyZSBpcyBubyBzb3VyY2Ugd2hlbiB3ZSBhcmUgYWRkaW5nIGBzb3VyY2VzZXRgIHN1cHBvcnQgb3IgZHVyaW5nIGEgYGxvYWQoKWBcbiAgICogd2UgYWxzbyBwYXRjaCB0aGUgZnVuY3Rpb25zIGxpc3RlZCBpbiBgZmlyc3RTb3VyY2VXYXRjaGAuXG4gICAqXG4gICAqIEBwYXJhbSB7SHRtbDV9IHRlY2hcbiAgICogICAgICAgIFRoZSB0ZWNoIHRvIHBhdGNoXG4gICAqL1xuXG5cbiAgdmFyIHNldHVwU291cmNlc2V0ID0gZnVuY3Rpb24gc2V0dXBTb3VyY2VzZXQodGVjaCkge1xuICAgIGlmICghdGVjaC5mZWF0dXJlc1NvdXJjZXNldCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBlbCA9IHRlY2guZWwoKTsgLy8gbWFrZSBzdXJlIHNvdXJjZXNldCBpc24ndCBzZXR1cCB0d2ljZS5cblxuICAgIGlmIChlbC5yZXNldFNvdXJjZXNldF8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgc3JjRGVzY3JpcHRvciA9IGdldFNyY0Rlc2NyaXB0b3IodGVjaCk7XG4gICAgdmFyIG9sZFNldEF0dHJpYnV0ZSA9IGVsLnNldEF0dHJpYnV0ZTtcbiAgICB2YXIgb2xkTG9hZCA9IGVsLmxvYWQ7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsLCAnc3JjJywgbWVyZ2VPcHRpb25zKHNyY0Rlc2NyaXB0b3IsIHtcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0KHYpIHtcbiAgICAgICAgdmFyIHJldHZhbCA9IHNyY0Rlc2NyaXB0b3Iuc2V0LmNhbGwoZWwsIHYpOyAvLyB3ZSB1c2UgdGhlIGdldHRlciBoZXJlIHRvIGdldCB0aGUgYWN0dWFsIHZhbHVlIHNldCBvbiBzcmNcblxuICAgICAgICB0ZWNoLnRyaWdnZXJTb3VyY2VzZXQoZWwuc3JjKTtcbiAgICAgICAgcmV0dXJuIHJldHZhbDtcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICBlbC5zZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbiAobiwgdikge1xuICAgICAgdmFyIHJldHZhbCA9IG9sZFNldEF0dHJpYnV0ZS5jYWxsKGVsLCBuLCB2KTtcblxuICAgICAgaWYgKC9zcmMvaS50ZXN0KG4pKSB7XG4gICAgICAgIHRlY2gudHJpZ2dlclNvdXJjZXNldChlbC5zcmMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmV0dmFsO1xuICAgIH07XG5cbiAgICBlbC5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHJldHZhbCA9IG9sZExvYWQuY2FsbChlbCk7IC8vIGlmIGxvYWQgd2FzIGNhbGxlZCwgYnV0IHRoZXJlIHdhcyBubyBzb3VyY2UgdG8gZmlyZVxuICAgICAgLy8gc291cmNlc2V0IG9uLiBXZSBoYXZlIHRvIHdhdGNoIGZvciBhIHNvdXJjZSBhcHBlbmRcbiAgICAgIC8vIGFzIHRoYXQgY2FuIHRyaWdnZXIgYSBgc291cmNlc2V0YCB3aGVuIHRoZSBtZWRpYSBlbGVtZW50XG4gICAgICAvLyBoYXMgbm8gc291cmNlXG5cbiAgICAgIGlmICghc291cmNlc2V0TG9hZCh0ZWNoKSkge1xuICAgICAgICB0ZWNoLnRyaWdnZXJTb3VyY2VzZXQoJycpO1xuICAgICAgICBmaXJzdFNvdXJjZVdhdGNoKHRlY2gpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmV0dmFsO1xuICAgIH07XG5cbiAgICBpZiAoZWwuY3VycmVudFNyYykge1xuICAgICAgdGVjaC50cmlnZ2VyU291cmNlc2V0KGVsLmN1cnJlbnRTcmMpO1xuICAgIH0gZWxzZSBpZiAoIXNvdXJjZXNldExvYWQodGVjaCkpIHtcbiAgICAgIGZpcnN0U291cmNlV2F0Y2godGVjaCk7XG4gICAgfVxuXG4gICAgZWwucmVzZXRTb3VyY2VzZXRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgZWwucmVzZXRTb3VyY2VzZXRfID0gbnVsbDtcbiAgICAgIGVsLmxvYWQgPSBvbGRMb2FkO1xuICAgICAgZWwuc2V0QXR0cmlidXRlID0gb2xkU2V0QXR0cmlidXRlO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsLCAnc3JjJywgc3JjRGVzY3JpcHRvcik7XG5cbiAgICAgIGlmIChlbC5yZXNldFNvdXJjZVdhdGNoXykge1xuICAgICAgICBlbC5yZXNldFNvdXJjZVdhdGNoXygpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0JDEoKSB7XG4gICAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsTG9vc2UoW1wiVGV4dCBUcmFja3MgYXJlIGJlaW5nIGxvYWRlZCBmcm9tIGFub3RoZXIgb3JpZ2luIGJ1dCB0aGUgY3Jvc3NvcmlnaW4gYXR0cmlidXRlIGlzbid0IHVzZWQuXFxuICAgICAgICAgICAgVGhpcyBtYXkgcHJldmVudCB0ZXh0IHRyYWNrcyBmcm9tIGxvYWRpbmcuXCJdKTtcblxuICAgIF90ZW1wbGF0ZU9iamVjdCQxID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfTtcblxuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIC8qKlxuICAgKiBIVE1MNSBNZWRpYSBDb250cm9sbGVyIC0gV3JhcHBlciBmb3IgSFRNTDUgTWVkaWEgQVBJXG4gICAqXG4gICAqIEBtaXhlcyBUZWNoflNvdXJjZUhhbmRsZXJBZGRpdGlvbnNcbiAgICogQGV4dGVuZHMgVGVjaFxuICAgKi9cblxuICB2YXIgSHRtbDUgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfVGVjaCkge1xuICAgIF9pbmhlcml0c0xvb3NlKEh0bWw1LCBfVGVjaCk7XG5cbiAgICAvKipcbiAgICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIFRlY2guXG4gICAgKlxuICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAgKlxuICAgICogQHBhcmFtIHtDb21wb25lbnR+UmVhZHlDYWxsYmFja30gcmVhZHlcbiAgICAqICAgICAgICBDYWxsYmFjayBmdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIGBIVE1MNWAgVGVjaCBpcyByZWFkeS5cbiAgICAqL1xuICAgIGZ1bmN0aW9uIEh0bWw1KG9wdGlvbnMsIHJlYWR5KSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX1RlY2guY2FsbCh0aGlzLCBvcHRpb25zLCByZWFkeSkgfHwgdGhpcztcbiAgICAgIHZhciBzb3VyY2UgPSBvcHRpb25zLnNvdXJjZTtcbiAgICAgIHZhciBjcm9zc29yaWdpblRyYWNrcyA9IGZhbHNlOyAvLyBTZXQgdGhlIHNvdXJjZSBpZiBvbmUgaXMgcHJvdmlkZWRcbiAgICAgIC8vIDEpIENoZWNrIGlmIHRoZSBzb3VyY2UgaXMgbmV3IChpZiBub3QsIHdlIHdhbnQgdG8ga2VlcCB0aGUgb3JpZ2luYWwgc28gcGxheWJhY2sgaXNuJ3QgaW50ZXJydXB0ZWQpXG4gICAgICAvLyAyKSBDaGVjayB0byBzZWUgaWYgdGhlIG5ldHdvcmsgc3RhdGUgb2YgdGhlIHRhZyB3YXMgZmFpbGVkIGF0IGluaXQsIGFuZCBpZiBzbywgcmVzZXQgdGhlIHNvdXJjZVxuICAgICAgLy8gYW55d2F5IHNvIHRoZSBlcnJvciBnZXRzIGZpcmVkLlxuXG4gICAgICBpZiAoc291cmNlICYmIChfdGhpcy5lbF8uY3VycmVudFNyYyAhPT0gc291cmNlLnNyYyB8fCBvcHRpb25zLnRhZyAmJiBvcHRpb25zLnRhZy5pbml0TmV0d29ya1N0YXRlXyA9PT0gMykpIHtcbiAgICAgICAgX3RoaXMuc2V0U291cmNlKHNvdXJjZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpcy5oYW5kbGVMYXRlSW5pdF8oX3RoaXMuZWxfKTtcbiAgICAgIH0gLy8gc2V0dXAgc291cmNlc2V0IGFmdGVyIGxhdGUgc291cmNlc2V0L2luaXRcblxuXG4gICAgICBpZiAob3B0aW9ucy5lbmFibGVTb3VyY2VzZXQpIHtcbiAgICAgICAgX3RoaXMuc2V0dXBTb3VyY2VzZXRIYW5kbGluZ18oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKF90aGlzLmVsXy5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgdmFyIG5vZGVzID0gX3RoaXMuZWxfLmNoaWxkTm9kZXM7XG4gICAgICAgIHZhciBub2Rlc0xlbmd0aCA9IG5vZGVzLmxlbmd0aDtcbiAgICAgICAgdmFyIHJlbW92ZU5vZGVzID0gW107XG5cbiAgICAgICAgd2hpbGUgKG5vZGVzTGVuZ3RoLS0pIHtcbiAgICAgICAgICB2YXIgbm9kZSA9IG5vZGVzW25vZGVzTGVuZ3RoXTtcbiAgICAgICAgICB2YXIgbm9kZU5hbWUgPSBub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICBpZiAobm9kZU5hbWUgPT09ICd0cmFjaycpIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMuZmVhdHVyZXNOYXRpdmVUZXh0VHJhY2tzKSB7XG4gICAgICAgICAgICAgIC8vIEVtcHR5IHZpZGVvIHRhZyB0cmFja3Mgc28gdGhlIGJ1aWx0LWluIHBsYXllciBkb2Vzbid0IHVzZSB0aGVtIGFsc28uXG4gICAgICAgICAgICAgIC8vIFRoaXMgbWF5IG5vdCBiZSBmYXN0IGVub3VnaCB0byBzdG9wIEhUTUw1IGJyb3dzZXJzIGZyb20gcmVhZGluZyB0aGUgdGFnc1xuICAgICAgICAgICAgICAvLyBzbyB3ZSdsbCBuZWVkIHRvIHR1cm4gb2ZmIGFueSBkZWZhdWx0IHRyYWNrcyBpZiB3ZSdyZSBtYW51YWxseSBkb2luZ1xuICAgICAgICAgICAgICAvLyBjYXB0aW9ucyBhbmQgc3VidGl0bGVzLiB2aWRlb0VsZW1lbnQudGV4dFRyYWNrc1xuICAgICAgICAgICAgICByZW1vdmVOb2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gc3RvcmUgSFRNTFRyYWNrRWxlbWVudCBhbmQgVGV4dFRyYWNrIHRvIHJlbW90ZSBsaXN0XG4gICAgICAgICAgICAgIF90aGlzLnJlbW90ZVRleHRUcmFja0VscygpLmFkZFRyYWNrRWxlbWVudF8obm9kZSk7XG5cbiAgICAgICAgICAgICAgX3RoaXMucmVtb3RlVGV4dFRyYWNrcygpLmFkZFRyYWNrKG5vZGUudHJhY2spO1xuXG4gICAgICAgICAgICAgIF90aGlzLnRleHRUcmFja3MoKS5hZGRUcmFjayhub2RlLnRyYWNrKTtcblxuICAgICAgICAgICAgICBpZiAoIWNyb3Nzb3JpZ2luVHJhY2tzICYmICFfdGhpcy5lbF8uaGFzQXR0cmlidXRlKCdjcm9zc29yaWdpbicpICYmIGlzQ3Jvc3NPcmlnaW4obm9kZS5zcmMpKSB7XG4gICAgICAgICAgICAgICAgY3Jvc3NvcmlnaW5UcmFja3MgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW1vdmVOb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIF90aGlzLmVsXy5yZW1vdmVDaGlsZChyZW1vdmVOb2Rlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgX3RoaXMucHJveHlOYXRpdmVUcmFja3NfKCk7XG5cbiAgICAgIGlmIChfdGhpcy5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MgJiYgY3Jvc3NvcmlnaW5UcmFja3MpIHtcbiAgICAgICAgbG9nLndhcm4odHNtbChfdGVtcGxhdGVPYmplY3QkMSgpKSk7XG4gICAgICB9IC8vIHByZXZlbnQgaU9TIFNhZmFyaSBmcm9tIGRpc2FibGluZyBtZXRhZGF0YSB0ZXh0IHRyYWNrcyBkdXJpbmcgbmF0aXZlIHBsYXliYWNrXG5cblxuICAgICAgX3RoaXMucmVzdG9yZU1ldGFkYXRhVHJhY2tzSW5JT1NOYXRpdmVQbGF5ZXJfKCk7IC8vIERldGVybWluZSBpZiBuYXRpdmUgY29udHJvbHMgc2hvdWxkIGJlIHVzZWRcbiAgICAgIC8vIE91ciBnb2FsIHNob3VsZCBiZSB0byBnZXQgdGhlIGN1c3RvbSBjb250cm9scyBvbiBtb2JpbGUgc29saWQgZXZlcnl3aGVyZVxuICAgICAgLy8gc28gd2UgY2FuIHJlbW92ZSB0aGlzIGFsbCB0b2dldGhlci4gUmlnaHQgbm93IHRoaXMgd2lsbCBibG9jayBjdXN0b21cbiAgICAgIC8vIGNvbnRyb2xzIG9uIHRvdWNoIGVuYWJsZWQgbGFwdG9wcyBsaWtlIHRoZSBDaHJvbWUgUGl4ZWxcblxuXG4gICAgICBpZiAoKFRPVUNIX0VOQUJMRUQgfHwgSVNfSVBIT05FIHx8IElTX05BVElWRV9BTkRST0lEKSAmJiBvcHRpb25zLm5hdGl2ZUNvbnRyb2xzRm9yVG91Y2ggPT09IHRydWUpIHtcbiAgICAgICAgX3RoaXMuc2V0Q29udHJvbHModHJ1ZSk7XG4gICAgICB9IC8vIG9uIGlPUywgd2Ugd2FudCB0byBwcm94eSBgd2Via2l0YmVnaW5mdWxsc2NyZWVuYCBhbmQgYHdlYmtpdGVuZGZ1bGxzY3JlZW5gXG4gICAgICAvLyBpbnRvIGEgYGZ1bGxzY3JlZW5jaGFuZ2VgIGV2ZW50XG5cblxuICAgICAgX3RoaXMucHJveHlXZWJraXRGdWxsc2NyZWVuXygpO1xuXG4gICAgICBfdGhpcy50cmlnZ2VyUmVhZHkoKTtcblxuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIG9mIGBIVE1MNWAgbWVkaWEgZWxlbWVudCBhbmQgcmVtb3ZlIGFsbCB0cmFja3MuXG4gICAgICovXG5cblxuICAgIHZhciBfcHJvdG8gPSBIdG1sNS5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICBpZiAodGhpcy5lbF8gJiYgdGhpcy5lbF8ucmVzZXRTb3VyY2VzZXRfKSB7XG4gICAgICAgIHRoaXMuZWxfLnJlc2V0U291cmNlc2V0XygpO1xuICAgICAgfVxuXG4gICAgICBIdG1sNS5kaXNwb3NlTWVkaWFFbGVtZW50KHRoaXMuZWxfKTtcbiAgICAgIHRoaXMub3B0aW9uc18gPSBudWxsOyAvLyB0ZWNoIHdpbGwgaGFuZGxlIGNsZWFyaW5nIG9mIHRoZSBlbXVsYXRlZCB0cmFjayBsaXN0XG5cbiAgICAgIF9UZWNoLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vZGlmeSB0aGUgbWVkaWEgZWxlbWVudCBzbyB0aGF0IHdlIGNhbiBkZXRlY3Qgd2hlblxuICAgICAqIHRoZSBzb3VyY2UgaXMgY2hhbmdlZC4gRmlyZXMgYHNvdXJjZXNldGAganVzdCBhZnRlciB0aGUgc291cmNlIGhhcyBjaGFuZ2VkXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnNldHVwU291cmNlc2V0SGFuZGxpbmdfID0gZnVuY3Rpb24gc2V0dXBTb3VyY2VzZXRIYW5kbGluZ18oKSB7XG4gICAgICBzZXR1cFNvdXJjZXNldCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hlbiBhIGNhcHRpb25zIHRyYWNrIGlzIGVuYWJsZWQgaW4gdGhlIGlPUyBTYWZhcmkgbmF0aXZlIHBsYXllciwgYWxsIG90aGVyXG4gICAgICogdHJhY2tzIGFyZSBkaXNhYmxlZCAoaW5jbHVkaW5nIG1ldGFkYXRhIHRyYWNrcyksIHdoaWNoIG51bGxzIGFsbCBvZiB0aGVpclxuICAgICAqIGFzc29jaWF0ZWQgY3VlIHBvaW50cy4gVGhpcyB3aWxsIHJlc3RvcmUgbWV0YWRhdGEgdHJhY2tzIHRvIHRoZWlyIHByZS1mdWxsc2NyZWVuXG4gICAgICogc3RhdGUgaW4gdGhvc2UgY2FzZXMgc28gdGhhdCBjdWUgcG9pbnRzIGFyZSBub3QgbmVlZGxlc3NseSBsb3N0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ucmVzdG9yZU1ldGFkYXRhVHJhY2tzSW5JT1NOYXRpdmVQbGF5ZXJfID0gZnVuY3Rpb24gcmVzdG9yZU1ldGFkYXRhVHJhY2tzSW5JT1NOYXRpdmVQbGF5ZXJfKCkge1xuICAgICAgdmFyIHRleHRUcmFja3MgPSB0aGlzLnRleHRUcmFja3MoKTtcbiAgICAgIHZhciBtZXRhZGF0YVRyYWNrc1ByZUZ1bGxzY3JlZW5TdGF0ZTsgLy8gY2FwdHVyZXMgYSBzbmFwc2hvdCBvZiBldmVyeSBtZXRhZGF0YSB0cmFjaydzIGN1cnJlbnQgc3RhdGVcblxuICAgICAgdmFyIHRha2VNZXRhZGF0YVRyYWNrU25hcHNob3QgPSBmdW5jdGlvbiB0YWtlTWV0YWRhdGFUcmFja1NuYXBzaG90KCkge1xuICAgICAgICBtZXRhZGF0YVRyYWNrc1ByZUZ1bGxzY3JlZW5TdGF0ZSA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dFRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciB0cmFjayA9IHRleHRUcmFja3NbaV07XG5cbiAgICAgICAgICBpZiAodHJhY2sua2luZCA9PT0gJ21ldGFkYXRhJykge1xuICAgICAgICAgICAgbWV0YWRhdGFUcmFja3NQcmVGdWxsc2NyZWVuU3RhdGUucHVzaCh7XG4gICAgICAgICAgICAgIHRyYWNrOiB0cmFjayxcbiAgICAgICAgICAgICAgc3RvcmVkTW9kZTogdHJhY2subW9kZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9OyAvLyBzbmFwc2hvdCBlYWNoIG1ldGFkYXRhIHRyYWNrJ3MgaW5pdGlhbCBzdGF0ZSwgYW5kIHVwZGF0ZSB0aGUgc25hcHNob3RcbiAgICAgIC8vIGVhY2ggdGltZSB0aGVyZSBpcyBhIHRyYWNrICdjaGFuZ2UnIGV2ZW50XG5cblxuICAgICAgdGFrZU1ldGFkYXRhVHJhY2tTbmFwc2hvdCgpO1xuICAgICAgdGV4dFRyYWNrcy5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0YWtlTWV0YWRhdGFUcmFja1NuYXBzaG90KTtcbiAgICAgIHRoaXMub24oJ2Rpc3Bvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0ZXh0VHJhY2tzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRha2VNZXRhZGF0YVRyYWNrU25hcHNob3QpO1xuICAgICAgfSk7XG5cbiAgICAgIHZhciByZXN0b3JlVHJhY2tNb2RlID0gZnVuY3Rpb24gcmVzdG9yZVRyYWNrTW9kZSgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhZGF0YVRyYWNrc1ByZUZ1bGxzY3JlZW5TdGF0ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBzdG9yZWRUcmFjayA9IG1ldGFkYXRhVHJhY2tzUHJlRnVsbHNjcmVlblN0YXRlW2ldO1xuXG4gICAgICAgICAgaWYgKHN0b3JlZFRyYWNrLnRyYWNrLm1vZGUgPT09ICdkaXNhYmxlZCcgJiYgc3RvcmVkVHJhY2sudHJhY2subW9kZSAhPT0gc3RvcmVkVHJhY2suc3RvcmVkTW9kZSkge1xuICAgICAgICAgICAgc3RvcmVkVHJhY2sudHJhY2subW9kZSA9IHN0b3JlZFRyYWNrLnN0b3JlZE1vZGU7XG4gICAgICAgICAgfVxuICAgICAgICB9IC8vIHdlIG9ubHkgd2FudCB0aGlzIGhhbmRsZXIgdG8gYmUgZXhlY3V0ZWQgb24gdGhlIGZpcnN0ICdjaGFuZ2UnIGV2ZW50XG5cblxuICAgICAgICB0ZXh0VHJhY2tzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHJlc3RvcmVUcmFja01vZGUpO1xuICAgICAgfTsgLy8gd2hlbiB3ZSBlbnRlciBmdWxsc2NyZWVuIHBsYXliYWNrLCBzdG9wIHVwZGF0aW5nIHRoZSBzbmFwc2hvdCBhbmRcbiAgICAgIC8vIHJlc3RvcmUgYWxsIHRyYWNrIG1vZGVzIHRvIHRoZWlyIHByZS1mdWxsc2NyZWVuIHN0YXRlXG5cblxuICAgICAgdGhpcy5vbignd2Via2l0YmVnaW5mdWxsc2NyZWVuJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB0ZXh0VHJhY2tzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRha2VNZXRhZGF0YVRyYWNrU25hcHNob3QpOyAvLyByZW1vdmUgdGhlIGxpc3RlbmVyIGJlZm9yZSBhZGRpbmcgaXQganVzdCBpbiBjYXNlIGl0IHdhc24ndCBwcmV2aW91c2x5IHJlbW92ZWRcblxuICAgICAgICB0ZXh0VHJhY2tzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHJlc3RvcmVUcmFja01vZGUpO1xuICAgICAgICB0ZXh0VHJhY2tzLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHJlc3RvcmVUcmFja01vZGUpO1xuICAgICAgfSk7IC8vIHN0YXJ0IHVwZGF0aW5nIHRoZSBzbmFwc2hvdCBhZ2FpbiBhZnRlciBsZWF2aW5nIGZ1bGxzY3JlZW5cblxuICAgICAgdGhpcy5vbignd2Via2l0ZW5kZnVsbHNjcmVlbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBsaXN0ZW5lciBiZWZvcmUgYWRkaW5nIGl0IGp1c3QgaW4gY2FzZSBpdCB3YXNuJ3QgcHJldmlvdXNseSByZW1vdmVkXG4gICAgICAgIHRleHRUcmFja3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGFrZU1ldGFkYXRhVHJhY2tTbmFwc2hvdCk7XG4gICAgICAgIHRleHRUcmFja3MuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGFrZU1ldGFkYXRhVHJhY2tTbmFwc2hvdCk7IC8vIHJlbW92ZSB0aGUgcmVzdG9yZVRyYWNrTW9kZSBoYW5kbGVyIGluIGNhc2UgaXQgd2Fzbid0IHRyaWdnZXJlZCBkdXJpbmcgZnVsbHNjcmVlbiBwbGF5YmFja1xuXG4gICAgICAgIHRleHRUcmFja3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgcmVzdG9yZVRyYWNrTW9kZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCB0byBmb3JjZSBvdmVycmlkZSBvZiB0cmFja3MgZm9yIHRoZSBnaXZlbiB0eXBlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIFRyYWNrIHR5cGUgdG8gb3ZlcnJpZGUsIHBvc3NpYmxlIHZhbHVlcyBpbmNsdWRlICdBdWRpbycsXG4gICAgICogJ1ZpZGVvJywgYW5kICdUZXh0Jy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG92ZXJyaWRlIC0gSWYgc2V0IHRvIHRydWUgbmF0aXZlIGF1ZGlvL3ZpZGVvIHdpbGwgYmUgb3ZlcnJpZGRlbixcbiAgICAgKiBvdGhlcndpc2UgbmF0aXZlIGF1ZGlvL3ZpZGVvIHdpbGwgcG90ZW50aWFsbHkgYmUgdXNlZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5vdmVycmlkZU5hdGl2ZV8gPSBmdW5jdGlvbiBvdmVycmlkZU5hdGl2ZV8odHlwZSwgb3ZlcnJpZGUpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAvLyBJZiB0aGVyZSBpcyBubyBiZWhhdmlvcmFsIGNoYW5nZSBkb24ndCBhZGQvcmVtb3ZlIGxpc3RlbmVyc1xuICAgICAgaWYgKG92ZXJyaWRlICE9PSB0aGlzW1wiZmVhdHVyZXNOYXRpdmVcIiArIHR5cGUgKyBcIlRyYWNrc1wiXSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBsb3dlckNhc2VUeXBlID0gdHlwZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICBpZiAodGhpc1tsb3dlckNhc2VUeXBlICsgXCJUcmFja3NMaXN0ZW5lcnNfXCJdKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXNbbG93ZXJDYXNlVHlwZSArIFwiVHJhY2tzTGlzdGVuZXJzX1wiXSkuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgICAgICAgdmFyIGVsVHJhY2tzID0gX3RoaXMyLmVsKClbbG93ZXJDYXNlVHlwZSArIFwiVHJhY2tzXCJdO1xuXG4gICAgICAgICAgZWxUcmFja3MucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIF90aGlzMltsb3dlckNhc2VUeXBlICsgXCJUcmFja3NMaXN0ZW5lcnNfXCJdW2V2ZW50TmFtZV0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpc1tcImZlYXR1cmVzTmF0aXZlXCIgKyB0eXBlICsgXCJUcmFja3NcIl0gPSAhb3ZlcnJpZGU7XG4gICAgICB0aGlzW2xvd2VyQ2FzZVR5cGUgKyBcIlRyYWNrc0xpc3RlbmVyc19cIl0gPSBudWxsO1xuICAgICAgdGhpcy5wcm94eU5hdGl2ZVRyYWNrc0ZvclR5cGVfKGxvd2VyQ2FzZVR5cGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IHRvIGZvcmNlIG92ZXJyaWRlIG9mIG5hdGl2ZSBhdWRpbyB0cmFja3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG92ZXJyaWRlIC0gSWYgc2V0IHRvIHRydWUgbmF0aXZlIGF1ZGlvIHdpbGwgYmUgb3ZlcnJpZGRlbixcbiAgICAgKiBvdGhlcndpc2UgbmF0aXZlIGF1ZGlvIHdpbGwgcG90ZW50aWFsbHkgYmUgdXNlZC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ub3ZlcnJpZGVOYXRpdmVBdWRpb1RyYWNrcyA9IGZ1bmN0aW9uIG92ZXJyaWRlTmF0aXZlQXVkaW9UcmFja3Mob3ZlcnJpZGUpIHtcbiAgICAgIHRoaXMub3ZlcnJpZGVOYXRpdmVfKCdBdWRpbycsIG92ZXJyaWRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCB0byBmb3JjZSBvdmVycmlkZSBvZiBuYXRpdmUgdmlkZW8gdHJhY2tzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBvdmVycmlkZSAtIElmIHNldCB0byB0cnVlIG5hdGl2ZSB2aWRlbyB3aWxsIGJlIG92ZXJyaWRkZW4sXG4gICAgICogb3RoZXJ3aXNlIG5hdGl2ZSB2aWRlbyB3aWxsIHBvdGVudGlhbGx5IGJlIHVzZWQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLm92ZXJyaWRlTmF0aXZlVmlkZW9UcmFja3MgPSBmdW5jdGlvbiBvdmVycmlkZU5hdGl2ZVZpZGVvVHJhY2tzKG92ZXJyaWRlKSB7XG4gICAgICB0aGlzLm92ZXJyaWRlTmF0aXZlXygnVmlkZW8nLCBvdmVycmlkZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb3h5IG5hdGl2ZSB0cmFjayBsaXN0IGV2ZW50cyBmb3IgdGhlIGdpdmVuIHR5cGUgdG8gb3VyIHRyYWNrXG4gICAgICogbGlzdHMgaWYgdGhlIGJyb3dzZXIgd2UgYXJlIHBsYXlpbmcgaW4gc3VwcG9ydHMgdGhhdCB0eXBlIG9mIHRyYWNrIGxpc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRyYWNrIHR5cGU7IHZhbHVlcyBpbmNsdWRlICdhdWRpbycsICd2aWRlbycsIGFuZCAndGV4dCdcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5wcm94eU5hdGl2ZVRyYWNrc0ZvclR5cGVfID0gZnVuY3Rpb24gcHJveHlOYXRpdmVUcmFja3NGb3JUeXBlXyhuYW1lKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIHByb3BzID0gTk9STUFMW25hbWVdO1xuICAgICAgdmFyIGVsVHJhY2tzID0gdGhpcy5lbCgpW3Byb3BzLmdldHRlck5hbWVdO1xuICAgICAgdmFyIHRlY2hUcmFja3MgPSB0aGlzW3Byb3BzLmdldHRlck5hbWVdKCk7XG5cbiAgICAgIGlmICghdGhpc1tcImZlYXR1cmVzTmF0aXZlXCIgKyBwcm9wcy5jYXBpdGFsTmFtZSArIFwiVHJhY2tzXCJdIHx8ICFlbFRyYWNrcyB8fCAhZWxUcmFja3MuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBsaXN0ZW5lcnMgPSB7XG4gICAgICAgIGNoYW5nZTogZnVuY3Rpb24gY2hhbmdlKGUpIHtcbiAgICAgICAgICB0ZWNoVHJhY2tzLnRyaWdnZXIoe1xuICAgICAgICAgICAgdHlwZTogJ2NoYW5nZScsXG4gICAgICAgICAgICB0YXJnZXQ6IHRlY2hUcmFja3MsXG4gICAgICAgICAgICBjdXJyZW50VGFyZ2V0OiB0ZWNoVHJhY2tzLFxuICAgICAgICAgICAgc3JjRWxlbWVudDogdGVjaFRyYWNrc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBhZGR0cmFjazogZnVuY3Rpb24gYWRkdHJhY2soZSkge1xuICAgICAgICAgIHRlY2hUcmFja3MuYWRkVHJhY2soZS50cmFjayk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZXRyYWNrOiBmdW5jdGlvbiByZW1vdmV0cmFjayhlKSB7XG4gICAgICAgICAgdGVjaFRyYWNrcy5yZW1vdmVUcmFjayhlLnRyYWNrKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIHJlbW92ZU9sZFRyYWNrcyA9IGZ1bmN0aW9uIHJlbW92ZU9sZFRyYWNrcygpIHtcbiAgICAgICAgdmFyIHJlbW92ZVRyYWNrcyA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVjaFRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBlbFRyYWNrcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKGVsVHJhY2tzW2pdID09PSB0ZWNoVHJhY2tzW2ldKSB7XG4gICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgcmVtb3ZlVHJhY2tzLnB1c2godGVjaFRyYWNrc1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKHJlbW92ZVRyYWNrcy5sZW5ndGgpIHtcbiAgICAgICAgICB0ZWNoVHJhY2tzLnJlbW92ZVRyYWNrKHJlbW92ZVRyYWNrcy5zaGlmdCgpKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpc1twcm9wcy5nZXR0ZXJOYW1lICsgJ0xpc3RlbmVyc18nXSA9IGxpc3RlbmVycztcbiAgICAgIE9iamVjdC5rZXlzKGxpc3RlbmVycykuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgICAgIHZhciBsaXN0ZW5lciA9IGxpc3RlbmVyc1tldmVudE5hbWVdO1xuICAgICAgICBlbFRyYWNrcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuXG4gICAgICAgIF90aGlzMy5vbignZGlzcG9zZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGVsVHJhY2tzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5lcik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7IC8vIFJlbW92ZSAobmF0aXZlKSB0cmFja3MgdGhhdCBhcmUgbm90IHVzZWQgYW55bW9yZVxuXG4gICAgICB0aGlzLm9uKCdsb2Fkc3RhcnQnLCByZW1vdmVPbGRUcmFja3MpO1xuICAgICAgdGhpcy5vbignZGlzcG9zZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBfdGhpczMub2ZmKCdsb2Fkc3RhcnQnLCByZW1vdmVPbGRUcmFja3MpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb3h5IGFsbCBuYXRpdmUgdHJhY2sgbGlzdCBldmVudHMgdG8gb3VyIHRyYWNrIGxpc3RzIGlmIHRoZSBicm93c2VyIHdlIGFyZSBwbGF5aW5nXG4gICAgICogaW4gc3VwcG9ydHMgdGhhdCB0eXBlIG9mIHRyYWNrIGxpc3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5wcm94eU5hdGl2ZVRyYWNrc18gPSBmdW5jdGlvbiBwcm94eU5hdGl2ZVRyYWNrc18oKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgTk9STUFMLm5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgX3RoaXM0LnByb3h5TmF0aXZlVHJhY2tzRm9yVHlwZV8obmFtZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBgSHRtbDVgIFRlY2gncyBET00gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IGdldHMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSgpIHtcbiAgICAgIHZhciBlbCA9IHRoaXMub3B0aW9uc18udGFnOyAvLyBDaGVjayBpZiB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgbW92aW5nIHRoZSBlbGVtZW50IGludG8gdGhlIGJveC5cbiAgICAgIC8vIE9uIHRoZSBpUGhvbmUgdmlkZW8gd2lsbCBicmVhayBpZiB5b3UgbW92ZSB0aGUgZWxlbWVudCxcbiAgICAgIC8vIFNvIHdlIGhhdmUgdG8gY3JlYXRlIGEgYnJhbmQgbmV3IGVsZW1lbnQuXG4gICAgICAvLyBJZiB3ZSBpbmdlc3RlZCB0aGUgcGxheWVyIGRpdiwgd2UgZG8gbm90IG5lZWQgdG8gbW92ZSB0aGUgbWVkaWEgZWxlbWVudC5cblxuICAgICAgaWYgKCFlbCB8fCAhKHRoaXMub3B0aW9uc18ucGxheWVyRWxJbmdlc3QgfHwgdGhpcy5tb3ZpbmdNZWRpYUVsZW1lbnRJbkRPTSkpIHtcbiAgICAgICAgLy8gSWYgdGhlIG9yaWdpbmFsIHRhZyBpcyBzdGlsbCB0aGVyZSwgY2xvbmUgYW5kIHJlbW92ZSBpdC5cbiAgICAgICAgaWYgKGVsKSB7XG4gICAgICAgICAgdmFyIGNsb25lID0gZWwuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgICAgICAgaWYgKGVsLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIGVsLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGNsb25lLCBlbCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgSHRtbDUuZGlzcG9zZU1lZGlhRWxlbWVudChlbCk7XG4gICAgICAgICAgZWwgPSBjbG9uZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7IC8vIGRldGVybWluZSBpZiBuYXRpdmUgY29udHJvbHMgc2hvdWxkIGJlIHVzZWRcblxuICAgICAgICAgIHZhciB0YWdBdHRyaWJ1dGVzID0gdGhpcy5vcHRpb25zXy50YWcgJiYgZ2V0QXR0cmlidXRlcyh0aGlzLm9wdGlvbnNfLnRhZyk7XG4gICAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBtZXJnZU9wdGlvbnMoe30sIHRhZ0F0dHJpYnV0ZXMpO1xuXG4gICAgICAgICAgaWYgKCFUT1VDSF9FTkFCTEVEIHx8IHRoaXMub3B0aW9uc18ubmF0aXZlQ29udHJvbHNGb3JUb3VjaCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgZGVsZXRlIGF0dHJpYnV0ZXMuY29udHJvbHM7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2V0QXR0cmlidXRlcyhlbCwgYXNzaWduKGF0dHJpYnV0ZXMsIHtcbiAgICAgICAgICAgIGlkOiB0aGlzLm9wdGlvbnNfLnRlY2hJZCxcbiAgICAgICAgICAgIGNsYXNzOiAndmpzLXRlY2gnXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZWwucGxheWVySWQgPSB0aGlzLm9wdGlvbnNfLnBsYXllcklkO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9uc18ucHJlbG9hZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc2V0QXR0cmlidXRlKGVsLCAncHJlbG9hZCcsIHRoaXMub3B0aW9uc18ucHJlbG9hZCk7XG4gICAgICB9IC8vIFVwZGF0ZSBzcGVjaWZpYyB0YWcgc2V0dGluZ3MsIGluIGNhc2UgdGhleSB3ZXJlIG92ZXJyaWRkZW5cbiAgICAgIC8vIGBhdXRvcGxheWAgaGFzIHRvIGJlICpsYXN0KiBzbyB0aGF0IGBtdXRlZGAgYW5kIGBwbGF5c2lubGluZWAgYXJlIHByZXNlbnRcbiAgICAgIC8vIHdoZW4gaU9TL1NhZmFyaSBvciBvdGhlciBicm93c2VycyBhdHRlbXB0IHRvIGF1dG9wbGF5LlxuXG5cbiAgICAgIHZhciBzZXR0aW5nc0F0dHJzID0gWydsb29wJywgJ211dGVkJywgJ3BsYXlzaW5saW5lJywgJ2F1dG9wbGF5J107XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2V0dGluZ3NBdHRycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYXR0ciA9IHNldHRpbmdzQXR0cnNbaV07XG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMub3B0aW9uc19bYXR0cl07XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHNldEF0dHJpYnV0ZShlbCwgYXR0ciwgYXR0cik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlbW92ZUF0dHJpYnV0ZShlbCwgYXR0cik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZWxbYXR0cl0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgd2lsbCBiZSB0cmlnZ2VyZWQgaWYgdGhlIGxvYWRzdGFydCBldmVudCBoYXMgYWxyZWFkeSBmaXJlZCwgYmVmb3JlIHZpZGVvanMgd2FzXG4gICAgICogcmVhZHkuIFR3byBrbm93biBleGFtcGxlcyBvZiB3aGVuIHRoaXMgY2FuIGhhcHBlbiBhcmU6XG4gICAgICogMS4gSWYgd2UncmUgbG9hZGluZyB0aGUgcGxheWJhY2sgb2JqZWN0IGFmdGVyIGl0IGhhcyBzdGFydGVkIGxvYWRpbmdcbiAgICAgKiAyLiBUaGUgbWVkaWEgaXMgYWxyZWFkeSBwbGF5aW5nIHRoZSAob2Z0ZW4gd2l0aCBhdXRvcGxheSBvbikgdGhlblxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiB3aWxsIGZpcmUgYW5vdGhlciBsb2Fkc3RhcnQgc28gdGhhdCB2aWRlb2pzIGNhbiBjYXRjaHVwLlxuICAgICAqXG4gICAgICogQGZpcmVzIFRlY2gjbG9hZHN0YXJ0XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XG4gICAgICogICAgICAgICByZXR1cm5zIG5vdGhpbmcuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZUxhdGVJbml0XyA9IGZ1bmN0aW9uIGhhbmRsZUxhdGVJbml0XyhlbCkge1xuICAgICAgaWYgKGVsLm5ldHdvcmtTdGF0ZSA9PT0gMCB8fCBlbC5uZXR3b3JrU3RhdGUgPT09IDMpIHtcbiAgICAgICAgLy8gVGhlIHZpZGVvIGVsZW1lbnQgaGFzbid0IHN0YXJ0ZWQgbG9hZGluZyB0aGUgc291cmNlIHlldFxuICAgICAgICAvLyBvciBkaWRuJ3QgZmluZCBhIHNvdXJjZVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChlbC5yZWFkeVN0YXRlID09PSAwKSB7XG4gICAgICAgIC8vIE5ldHdvcmtTdGF0ZSBpcyBzZXQgc3luY2hyb25vdXNseSBCVVQgbG9hZHN0YXJ0IGlzIGZpcmVkIGF0IHRoZVxuICAgICAgICAvLyBlbmQgb2YgdGhlIGN1cnJlbnQgc3RhY2ssIHVzdWFsbHkgYmVmb3JlIHNldEludGVydmFsKGZuLCAwKS5cbiAgICAgICAgLy8gU28gYXQgdGhpcyBwb2ludCB3ZSBrbm93IGxvYWRzdGFydCBtYXkgaGF2ZSBhbHJlYWR5IGZpcmVkIG9yIGlzXG4gICAgICAgIC8vIGFib3V0IHRvIGZpcmUsIGFuZCBlaXRoZXIgd2F5IHRoZSBwbGF5ZXIgaGFzbid0IHNlZW4gaXQgeWV0LlxuICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRvIGZpcmUgbG9hZHN0YXJ0IHByZW1hdHVyZWx5IGhlcmUgYW5kIGNhdXNlIGFcbiAgICAgICAgLy8gZG91YmxlIGxvYWRzdGFydCBzbyB3ZSdsbCB3YWl0IGFuZCBzZWUgaWYgaXQgaGFwcGVucyBiZXR3ZWVuIG5vd1xuICAgICAgICAvLyBhbmQgdGhlIG5leHQgbG9vcCwgYW5kIGZpcmUgaXQgaWYgbm90LlxuICAgICAgICAvLyBIT1dFVkVSLCB3ZSBhbHNvIHdhbnQgdG8gbWFrZSBzdXJlIGl0IGZpcmVzIGJlZm9yZSBsb2FkZWRtZXRhZGF0YVxuICAgICAgICAvLyB3aGljaCBjb3VsZCBhbHNvIGhhcHBlbiBiZXR3ZWVuIG5vdyBhbmQgdGhlIG5leHQgbG9vcCwgc28gd2UnbGxcbiAgICAgICAgLy8gd2F0Y2ggZm9yIHRoYXQgYWxzby5cbiAgICAgICAgdmFyIGxvYWRzdGFydEZpcmVkID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIHNldExvYWRzdGFydEZpcmVkID0gZnVuY3Rpb24gc2V0TG9hZHN0YXJ0RmlyZWQoKSB7XG4gICAgICAgICAgbG9hZHN0YXJ0RmlyZWQgPSB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMub24oJ2xvYWRzdGFydCcsIHNldExvYWRzdGFydEZpcmVkKTtcblxuICAgICAgICB2YXIgdHJpZ2dlckxvYWRzdGFydCA9IGZ1bmN0aW9uIHRyaWdnZXJMb2Fkc3RhcnQoKSB7XG4gICAgICAgICAgLy8gV2UgZGlkIG1pc3MgdGhlIG9yaWdpbmFsIGxvYWRzdGFydC4gTWFrZSBzdXJlIHRoZSBwbGF5ZXJcbiAgICAgICAgICAvLyBzZWVzIGxvYWRzdGFydCBiZWZvcmUgbG9hZGVkbWV0YWRhdGFcbiAgICAgICAgICBpZiAoIWxvYWRzdGFydEZpcmVkKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2xvYWRzdGFydCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm9uKCdsb2FkZWRtZXRhZGF0YScsIHRyaWdnZXJMb2Fkc3RhcnQpO1xuICAgICAgICB0aGlzLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aGlzLm9mZignbG9hZHN0YXJ0Jywgc2V0TG9hZHN0YXJ0RmlyZWQpO1xuICAgICAgICAgIHRoaXMub2ZmKCdsb2FkZWRtZXRhZGF0YScsIHRyaWdnZXJMb2Fkc3RhcnQpO1xuXG4gICAgICAgICAgaWYgKCFsb2Fkc3RhcnRGaXJlZCkge1xuICAgICAgICAgICAgLy8gV2UgZGlkIG1pc3MgdGhlIG9yaWdpbmFsIG5hdGl2ZSBsb2Fkc3RhcnQuIEZpcmUgaXQgbm93LlxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdsb2Fkc3RhcnQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIEZyb20gaGVyZSBvbiB3ZSBrbm93IHRoYXQgbG9hZHN0YXJ0IGFscmVhZHkgZmlyZWQgYW5kIHdlIG1pc3NlZCBpdC5cbiAgICAgIC8vIFRoZSBvdGhlciByZWFkeVN0YXRlIGV2ZW50cyBhcmVuJ3QgYXMgbXVjaCBvZiBhIHByb2JsZW0gaWYgd2UgZG91YmxlXG4gICAgICAvLyB0aGVtLCBzbyBub3QgZ29pbmcgdG8gZ28gdG8gYXMgbXVjaCB0cm91YmxlIGFzIGxvYWRzdGFydCB0byBwcmV2ZW50XG4gICAgICAvLyB0aGF0IHVubGVzcyB3ZSBmaW5kIHJlYXNvbiB0by5cblxuXG4gICAgICB2YXIgZXZlbnRzVG9UcmlnZ2VyID0gWydsb2Fkc3RhcnQnXTsgLy8gbG9hZGVkbWV0YWRhdGE6IG5ld2x5IGVxdWFsIHRvIEhBVkVfTUVUQURBVEEgKDEpIG9yIGdyZWF0ZXJcblxuICAgICAgZXZlbnRzVG9UcmlnZ2VyLnB1c2goJ2xvYWRlZG1ldGFkYXRhJyk7IC8vIGxvYWRlZGRhdGE6IG5ld2x5IGluY3JlYXNlZCB0byBIQVZFX0NVUlJFTlRfREFUQSAoMikgb3IgZ3JlYXRlclxuXG4gICAgICBpZiAoZWwucmVhZHlTdGF0ZSA+PSAyKSB7XG4gICAgICAgIGV2ZW50c1RvVHJpZ2dlci5wdXNoKCdsb2FkZWRkYXRhJyk7XG4gICAgICB9IC8vIGNhbnBsYXk6IG5ld2x5IGluY3JlYXNlZCB0byBIQVZFX0ZVVFVSRV9EQVRBICgzKSBvciBncmVhdGVyXG5cblxuICAgICAgaWYgKGVsLnJlYWR5U3RhdGUgPj0gMykge1xuICAgICAgICBldmVudHNUb1RyaWdnZXIucHVzaCgnY2FucGxheScpO1xuICAgICAgfSAvLyBjYW5wbGF5dGhyb3VnaDogbmV3bHkgZXF1YWwgdG8gSEFWRV9FTk9VR0hfREFUQSAoNClcblxuXG4gICAgICBpZiAoZWwucmVhZHlTdGF0ZSA+PSA0KSB7XG4gICAgICAgIGV2ZW50c1RvVHJpZ2dlci5wdXNoKCdjYW5wbGF5dGhyb3VnaCcpO1xuICAgICAgfSAvLyBXZSBzdGlsbCBuZWVkIHRvIGdpdmUgdGhlIHBsYXllciB0aW1lIHRvIGFkZCBldmVudCBsaXN0ZW5lcnNcblxuXG4gICAgICB0aGlzLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZXZlbnRzVG9UcmlnZ2VyLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIodHlwZSk7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBjdXJyZW50IHRpbWUgZm9yIHRoZSBgSFRNTDVgIHRlY2guXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2Vjb25kc1xuICAgICAqICAgICAgICBTZXQgdGhlIGN1cnJlbnQgdGltZSBvZiB0aGUgbWVkaWEgdG8gdGhpcy5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uc2V0Q3VycmVudFRpbWUgPSBmdW5jdGlvbiBzZXRDdXJyZW50VGltZShzZWNvbmRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLmVsXy5jdXJyZW50VGltZSA9IHNlY29uZHM7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGxvZyhlLCAnVmlkZW8gaXMgbm90IHJlYWR5LiAoVmlkZW8uanMpJyk7IC8vIHRoaXMud2FybmluZyhWaWRlb0pTLndhcm5pbmdzLnZpZGVvTm90UmVhZHkpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgZHVyYXRpb24gb2YgdGhlIEhUTUw1IG1lZGlhIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICogICAgICAgICBUaGUgZHVyYXRpb24gb2YgdGhlIG1lZGlhIG9yIDAgaWYgdGhlcmUgaXMgbm8gZHVyYXRpb24uXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmR1cmF0aW9uID0gZnVuY3Rpb24gZHVyYXRpb24oKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgLy8gQW5kcm9pZCBDaHJvbWUgd2lsbCByZXBvcnQgZHVyYXRpb24gYXMgSW5maW5pdHkgZm9yIFZPRCBITFMgdW50aWwgYWZ0ZXJcbiAgICAgIC8vIHBsYXliYWNrIGhhcyBzdGFydGVkLCB3aGljaCB0cmlnZ2VycyB0aGUgbGl2ZSBkaXNwbGF5IGVycm9uZW91c2x5LlxuICAgICAgLy8gUmV0dXJuIE5hTiBpZiBwbGF5YmFjayBoYXMgbm90IHN0YXJ0ZWQgYW5kIHRyaWdnZXIgYSBkdXJhdGlvbnVwZGF0ZSBvbmNlXG4gICAgICAvLyB0aGUgZHVyYXRpb24gY2FuIGJlIHJlbGlhYmx5IGtub3duLlxuICAgICAgaWYgKHRoaXMuZWxfLmR1cmF0aW9uID09PSBJbmZpbml0eSAmJiBJU19BTkRST0lEICYmIElTX0NIUk9NRSAmJiB0aGlzLmVsXy5jdXJyZW50VGltZSA9PT0gMCkge1xuICAgICAgICAvLyBXYWl0IGZvciB0aGUgZmlyc3QgYHRpbWV1cGRhdGVgIHdpdGggY3VycmVudFRpbWUgPiAwIC0gdGhlcmUgbWF5IGJlXG4gICAgICAgIC8vIHNldmVyYWwgd2l0aCAwXG4gICAgICAgIHZhciBjaGVja1Byb2dyZXNzID0gZnVuY3Rpb24gY2hlY2tQcm9ncmVzcygpIHtcbiAgICAgICAgICBpZiAoX3RoaXM1LmVsXy5jdXJyZW50VGltZSA+IDApIHtcbiAgICAgICAgICAgIC8vIFRyaWdnZXIgZHVyYXRpb25jaGFuZ2UgZm9yIGdlbnVpbmVseSBsaXZlIHZpZGVvXG4gICAgICAgICAgICBpZiAoX3RoaXM1LmVsXy5kdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgX3RoaXM1LnRyaWdnZXIoJ2R1cmF0aW9uY2hhbmdlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF90aGlzNS5vZmYoJ3RpbWV1cGRhdGUnLCBjaGVja1Byb2dyZXNzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5vbigndGltZXVwZGF0ZScsIGNoZWNrUHJvZ3Jlc3MpO1xuICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5lbF8uZHVyYXRpb24gfHwgTmFOO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgd2lkdGggb2YgdGhlIEhUTUw1IG1lZGlhIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICogICAgICAgICBUaGUgd2lkdGggb2YgdGhlIEhUTUw1IG1lZGlhIGVsZW1lbnQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLndpZHRoID0gZnVuY3Rpb24gd2lkdGgoKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbF8ub2Zmc2V0V2lkdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VycmVudCBoZWlnaHQgb2YgdGhlIEhUTUw1IG1lZGlhIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICogICAgICAgICBUaGUgaGVpZ2h0IG9mIHRoZSBIVE1MNSBtZWRpYSBlbGVtZW50LlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oZWlnaHQgPSBmdW5jdGlvbiBoZWlnaHQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbF8ub2Zmc2V0SGVpZ2h0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm94eSBpT1MgYHdlYmtpdGJlZ2luZnVsbHNjcmVlbmAgYW5kIGB3ZWJraXRlbmRmdWxsc2NyZWVuYCBpbnRvXG4gICAgICogYGZ1bGxzY3JlZW5jaGFuZ2VgIGV2ZW50LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAZmlyZXMgZnVsbHNjcmVlbmNoYW5nZVxuICAgICAqIEBsaXN0ZW5zIHdlYmtpdGVuZGZ1bGxzY3JlZW5cbiAgICAgKiBAbGlzdGVucyB3ZWJraXRiZWdpbmZ1bGxzY3JlZW5cbiAgICAgKiBAbGlzdGVucyB3ZWJraXRiZWdpbmZ1bGxzY3JlZW5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ucHJveHlXZWJraXRGdWxsc2NyZWVuXyA9IGZ1bmN0aW9uIHByb3h5V2Via2l0RnVsbHNjcmVlbl8oKSB7XG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgaWYgKCEoJ3dlYmtpdERpc3BsYXlpbmdGdWxsc2NyZWVuJyBpbiB0aGlzLmVsXykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZW5kRm4gPSBmdW5jdGlvbiBlbmRGbigpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdmdWxsc2NyZWVuY2hhbmdlJywge1xuICAgICAgICAgIGlzRnVsbHNjcmVlbjogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgYmVnaW5GbiA9IGZ1bmN0aW9uIGJlZ2luRm4oKSB7XG4gICAgICAgIGlmICgnd2Via2l0UHJlc2VudGF0aW9uTW9kZScgaW4gdGhpcy5lbF8gJiYgdGhpcy5lbF8ud2Via2l0UHJlc2VudGF0aW9uTW9kZSAhPT0gJ3BpY3R1cmUtaW4tcGljdHVyZScpIHtcbiAgICAgICAgICB0aGlzLm9uZSgnd2Via2l0ZW5kZnVsbHNjcmVlbicsIGVuZEZuKTtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCB7XG4gICAgICAgICAgICBpc0Z1bGxzY3JlZW46IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy5vbignd2Via2l0YmVnaW5mdWxsc2NyZWVuJywgYmVnaW5Gbik7XG4gICAgICB0aGlzLm9uKCdkaXNwb3NlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczYub2ZmKCd3ZWJraXRiZWdpbmZ1bGxzY3JlZW4nLCBiZWdpbkZuKTtcblxuICAgICAgICBfdGhpczYub2ZmKCd3ZWJraXRlbmRmdWxsc2NyZWVuJywgZW5kRm4pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGZ1bGxzY3JlZW4gaXMgc3VwcG9ydGVkIG9uIHRoZSBjdXJyZW50IHBsYXliYWNrIGRldmljZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICogICAgICAgICAtIFRydWUgaWYgZnVsbHNjcmVlbiBpcyBzdXBwb3J0ZWQuXG4gICAgICogICAgICAgICAtIEZhbHNlIGlmIGZ1bGxzY3JlZW4gaXMgbm90IHN1cHBvcnRlZC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uc3VwcG9ydHNGdWxsU2NyZWVuID0gZnVuY3Rpb24gc3VwcG9ydHNGdWxsU2NyZWVuKCkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLmVsXy53ZWJraXRFbnRlckZ1bGxTY3JlZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIHVzZXJBZ2VudCA9IHdpbmRvdyQxLm5hdmlnYXRvciAmJiB3aW5kb3ckMS5uYXZpZ2F0b3IudXNlckFnZW50IHx8ICcnOyAvLyBTZWVtcyB0byBiZSBicm9rZW4gaW4gQ2hyb21pdW0vQ2hyb21lICYmIFNhZmFyaSBpbiBMZW9wYXJkXG5cbiAgICAgICAgaWYgKC9BbmRyb2lkLy50ZXN0KHVzZXJBZ2VudCkgfHwgIS9DaHJvbWV8TWFjIE9TIFggMTAuNS8udGVzdCh1c2VyQWdlbnQpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXF1ZXN0IHRoYXQgdGhlIGBIVE1MNWAgVGVjaCBlbnRlciBmdWxsc2NyZWVuLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5lbnRlckZ1bGxTY3JlZW4gPSBmdW5jdGlvbiBlbnRlckZ1bGxTY3JlZW4oKSB7XG4gICAgICB2YXIgdmlkZW8gPSB0aGlzLmVsXztcblxuICAgICAgaWYgKHZpZGVvLnBhdXNlZCAmJiB2aWRlby5uZXR3b3JrU3RhdGUgPD0gdmlkZW8uSEFWRV9NRVRBREFUQSkge1xuICAgICAgICAvLyBhdHRlbXB0IHRvIHByaW1lIHRoZSB2aWRlbyBlbGVtZW50IGZvciBwcm9ncmFtbWF0aWMgYWNjZXNzXG4gICAgICAgIC8vIHRoaXMgaXNuJ3QgbmVjZXNzYXJ5IG9uIHRoZSBkZXNrdG9wIGJ1dCBzaG91bGRuJ3QgaHVydFxuICAgICAgICB0aGlzLmVsXy5wbGF5KCk7IC8vIHBsYXlpbmcgYW5kIHBhdXNpbmcgc3luY2hyb25vdXNseSBkdXJpbmcgdGhlIHRyYW5zaXRpb24gdG8gZnVsbHNjcmVlblxuICAgICAgICAvLyBjYW4gZ2V0IGlPUyB+Ni4xIGRldmljZXMgaW50byBhIHBsYXkvcGF1c2UgbG9vcFxuXG4gICAgICAgIHRoaXMuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmlkZW8ucGF1c2UoKTtcbiAgICAgICAgICB2aWRlby53ZWJraXRFbnRlckZ1bGxTY3JlZW4oKTtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2aWRlby53ZWJraXRFbnRlckZ1bGxTY3JlZW4oKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVxdWVzdCB0aGF0IHRoZSBgSFRNTDVgIFRlY2ggZXhpdCBmdWxsc2NyZWVuLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5leGl0RnVsbFNjcmVlbiA9IGZ1bmN0aW9uIGV4aXRGdWxsU2NyZWVuKCkge1xuICAgICAgdGhpcy5lbF8ud2Via2l0RXhpdEZ1bGxTY3JlZW4oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBnZXR0ZXIvc2V0dGVyIGZvciB0aGUgYEh0bWw1YCBUZWNoJ3Mgc291cmNlIG9iamVjdC5cbiAgICAgKiA+IE5vdGU6IFBsZWFzZSB1c2Uge0BsaW5rIEh0bWw1I3NldFNvdXJjZX1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGVjaH5Tb3VyY2VPYmplY3R9IFtzcmNdXG4gICAgICogICAgICAgIFRoZSBzb3VyY2Ugb2JqZWN0IHlvdSB3YW50IHRvIHNldCBvbiB0aGUgYEhUTUw1YCB0ZWNocyBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHJldHVybiB7VGVjaH5Tb3VyY2VPYmplY3R8dW5kZWZpbmVkfVxuICAgICAqICAgICAgICAgLSBUaGUgY3VycmVudCBzb3VyY2Ugb2JqZWN0IHdoZW4gYSBzb3VyY2UgaXMgbm90IHBhc3NlZCBpbi5cbiAgICAgKiAgICAgICAgIC0gdW5kZWZpbmVkIHdoZW4gc2V0dGluZ1xuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgU2luY2UgdmVyc2lvbiA1LlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zcmMgPSBmdW5jdGlvbiBzcmMoX3NyYykge1xuICAgICAgaWYgKF9zcmMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbF8uc3JjO1xuICAgICAgfSAvLyBTZXR0aW5nIHNyYyB0aHJvdWdoIGBzcmNgIGluc3RlYWQgb2YgYHNldFNyY2Agd2lsbCBiZSBkZXByZWNhdGVkXG5cblxuICAgICAgdGhpcy5zZXRTcmMoX3NyYyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSB0ZWNoIGJ5IHJlbW92aW5nIGFsbCBzb3VyY2VzIGFuZCB0aGVuIGNhbGxpbmdcbiAgICAgKiB7QGxpbmsgSHRtbDUucmVzZXRNZWRpYUVsZW1lbnR9LlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgSHRtbDUucmVzZXRNZWRpYUVsZW1lbnQodGhpcy5lbF8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgc291cmNlIG9uIHRoZSBgSFRNTDVgIFRlY2guIEZhbGxzIGJhY2sgdG8gcmV0dXJuaW5nIHRoZSBzb3VyY2UgZnJvbVxuICAgICAqIHRoZSBIVE1MNSBtZWRpYSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHJldHVybiB7VGVjaH5Tb3VyY2VPYmplY3R9XG4gICAgICogICAgICAgICBUaGUgY3VycmVudCBzb3VyY2Ugb2JqZWN0IGZyb20gdGhlIEhUTUw1IHRlY2guIFdpdGggYSBmYWxsYmFjayB0byB0aGVcbiAgICAgKiAgICAgICAgIGVsZW1lbnRzIHNvdXJjZS5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3VycmVudFNyYyA9IGZ1bmN0aW9uIGN1cnJlbnRTcmMoKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50U291cmNlXykge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50U291cmNlXy5zcmM7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmVsXy5jdXJyZW50U3JjO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgY29udHJvbHMgYXR0cmlidXRlIGZvciB0aGUgSFRNTDUgbWVkaWEgRWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWxcbiAgICAgKiAgICAgICAgVmFsdWUgdG8gc2V0IHRoZSBjb250cm9scyBhdHRyaWJ1dGUgdG9cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uc2V0Q29udHJvbHMgPSBmdW5jdGlvbiBzZXRDb250cm9scyh2YWwpIHtcbiAgICAgIHRoaXMuZWxfLmNvbnRyb2xzID0gISF2YWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbmQgcmV0dXJucyBhIHJlbW90ZSB7QGxpbmsgVGV4dFRyYWNrfSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2luZFxuICAgICAqICAgICAgICBgVGV4dFRyYWNrYCBraW5kIChzdWJ0aXRsZXMsIGNhcHRpb25zLCBkZXNjcmlwdGlvbnMsIGNoYXB0ZXJzLCBvciBtZXRhZGF0YSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbGFiZWxdXG4gICAgICogICAgICAgIExhYmVsIHRvIGlkZW50aWZ5IHRoZSB0ZXh0IHRyYWNrXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xhbmd1YWdlXVxuICAgICAqICAgICAgICBUd28gbGV0dGVyIGxhbmd1YWdlIGFiYnJldmlhdGlvblxuICAgICAqXG4gICAgICogQHJldHVybiB7VGV4dFRyYWNrfVxuICAgICAqICAgICAgICAgVGhlIFRleHRUcmFjayB0aGF0IGdldHMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uYWRkVGV4dFRyYWNrID0gZnVuY3Rpb24gYWRkVGV4dFRyYWNrKGtpbmQsIGxhYmVsLCBsYW5ndWFnZSkge1xuICAgICAgaWYgKCF0aGlzLmZlYXR1cmVzTmF0aXZlVGV4dFRyYWNrcykge1xuICAgICAgICByZXR1cm4gX1RlY2gucHJvdG90eXBlLmFkZFRleHRUcmFjay5jYWxsKHRoaXMsIGtpbmQsIGxhYmVsLCBsYW5ndWFnZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmVsXy5hZGRUZXh0VHJhY2soa2luZCwgbGFiZWwsIGxhbmd1YWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBlaXRoZXIgbmF0aXZlIFRleHRUcmFjayBvciBhbiBlbXVsYXRlZCBUZXh0VHJhY2sgZGVwZW5kaW5nXG4gICAgICogb24gdGhlIHZhbHVlIG9mIGBmZWF0dXJlc05hdGl2ZVRleHRUcmFja3NgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqICAgICAgICBUaGUgb2JqZWN0IHNob3VsZCBjb250YWluIHRoZSBvcHRpb25zIHRvIGluaXRpYWxpemUgdGhlIFRleHRUcmFjayB3aXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmtpbmRdXG4gICAgICogICAgICAgIGBUZXh0VHJhY2tgIGtpbmQgKHN1YnRpdGxlcywgY2FwdGlvbnMsIGRlc2NyaXB0aW9ucywgY2hhcHRlcnMsIG9yIG1ldGFkYXRhKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYWJlbF1cbiAgICAgKiAgICAgICAgTGFiZWwgdG8gaWRlbnRpZnkgdGhlIHRleHQgdHJhY2tcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYW5ndWFnZV1cbiAgICAgKiAgICAgICAgVHdvIGxldHRlciBsYW5ndWFnZSBhYmJyZXZpYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmRlZmF1bHRdXG4gICAgICogICAgICAgIERlZmF1bHQgdGhpcyB0cmFjayB0byBvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5pZF1cbiAgICAgKiAgICAgICAgVGhlIGludGVybmFsIGlkIHRvIGFzc2lnbiB0aGlzIHRyYWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnNyY11cbiAgICAgKiAgICAgICAgQSBzb3VyY2UgdXJsIGZvciB0aGUgdHJhY2suXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtIVE1MVHJhY2tFbGVtZW50fVxuICAgICAqICAgICAgICAgVGhlIHRyYWNrIGVsZW1lbnQgdGhhdCBnZXRzIGNyZWF0ZWQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNyZWF0ZVJlbW90ZVRleHRUcmFjayA9IGZ1bmN0aW9uIGNyZWF0ZVJlbW90ZVRleHRUcmFjayhvcHRpb25zKSB7XG4gICAgICBpZiAoIXRoaXMuZmVhdHVyZXNOYXRpdmVUZXh0VHJhY2tzKSB7XG4gICAgICAgIHJldHVybiBfVGVjaC5wcm90b3R5cGUuY3JlYXRlUmVtb3RlVGV4dFRyYWNrLmNhbGwodGhpcywgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBodG1sVHJhY2tFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHJhY2snKTtcblxuICAgICAgaWYgKG9wdGlvbnMua2luZCkge1xuICAgICAgICBodG1sVHJhY2tFbGVtZW50LmtpbmQgPSBvcHRpb25zLmtpbmQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLmxhYmVsKSB7XG4gICAgICAgIGh0bWxUcmFja0VsZW1lbnQubGFiZWwgPSBvcHRpb25zLmxhYmVsO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5sYW5ndWFnZSB8fCBvcHRpb25zLnNyY2xhbmcpIHtcbiAgICAgICAgaHRtbFRyYWNrRWxlbWVudC5zcmNsYW5nID0gb3B0aW9ucy5sYW5ndWFnZSB8fCBvcHRpb25zLnNyY2xhbmc7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLmRlZmF1bHQpIHtcbiAgICAgICAgaHRtbFRyYWNrRWxlbWVudC5kZWZhdWx0ID0gb3B0aW9ucy5kZWZhdWx0O1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5pZCkge1xuICAgICAgICBodG1sVHJhY2tFbGVtZW50LmlkID0gb3B0aW9ucy5pZDtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMuc3JjKSB7XG4gICAgICAgIGh0bWxUcmFja0VsZW1lbnQuc3JjID0gb3B0aW9ucy5zcmM7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBodG1sVHJhY2tFbGVtZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcmVtb3RlIHRleHQgdHJhY2sgb2JqZWN0IGFuZCByZXR1cm5zIGFuIGh0bWwgdHJhY2sgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFRoZSBvYmplY3Qgc2hvdWxkIGNvbnRhaW4gdmFsdWVzIGZvclxuICAgICAqIGtpbmQsIGxhbmd1YWdlLCBsYWJlbCwgYW5kIHNyYyAobG9jYXRpb24gb2YgdGhlIFdlYlZUVCBmaWxlKVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW21hbnVhbENsZWFudXA9dHJ1ZV0gaWYgc2V0IHRvIGZhbHNlLCB0aGUgVGV4dFRyYWNrIHdpbGwgYmVcbiAgICAgKiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgZnJvbSB0aGUgdmlkZW8gZWxlbWVudCB3aGVuZXZlciB0aGUgc291cmNlIGNoYW5nZXNcbiAgICAgKiBAcmV0dXJuIHtIVE1MVHJhY2tFbGVtZW50fSBBbiBIdG1sIFRyYWNrIEVsZW1lbnQuXG4gICAgICogVGhpcyBjYW4gYmUgYW4gZW11bGF0ZWQge0BsaW5rIEhUTUxUcmFja0VsZW1lbnR9IG9yIGEgbmF0aXZlIG9uZS5cbiAgICAgKiBAZGVwcmVjYXRlZCBUaGUgZGVmYXVsdCB2YWx1ZSBvZiB0aGUgXCJtYW51YWxDbGVhbnVwXCIgcGFyYW1ldGVyIHdpbGwgZGVmYXVsdFxuICAgICAqIHRvIFwiZmFsc2VcIiBpbiB1cGNvbWluZyB2ZXJzaW9ucyBvZiBWaWRlby5qc1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5hZGRSZW1vdGVUZXh0VHJhY2sgPSBmdW5jdGlvbiBhZGRSZW1vdGVUZXh0VHJhY2sob3B0aW9ucywgbWFudWFsQ2xlYW51cCkge1xuICAgICAgdmFyIGh0bWxUcmFja0VsZW1lbnQgPSBfVGVjaC5wcm90b3R5cGUuYWRkUmVtb3RlVGV4dFRyYWNrLmNhbGwodGhpcywgb3B0aW9ucywgbWFudWFsQ2xlYW51cCk7XG5cbiAgICAgIGlmICh0aGlzLmZlYXR1cmVzTmF0aXZlVGV4dFRyYWNrcykge1xuICAgICAgICB0aGlzLmVsKCkuYXBwZW5kQ2hpbGQoaHRtbFRyYWNrRWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBodG1sVHJhY2tFbGVtZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgcmVtb3RlIGBUZXh0VHJhY2tgIGZyb20gYFRleHRUcmFja0xpc3RgIG9iamVjdFxuICAgICAqXG4gICAgICogQHBhcmFtIHtUZXh0VHJhY2t9IHRyYWNrXG4gICAgICogICAgICAgIGBUZXh0VHJhY2tgIG9iamVjdCB0byByZW1vdmVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ucmVtb3ZlUmVtb3RlVGV4dFRyYWNrID0gZnVuY3Rpb24gcmVtb3ZlUmVtb3RlVGV4dFRyYWNrKHRyYWNrKSB7XG4gICAgICBfVGVjaC5wcm90b3R5cGUucmVtb3ZlUmVtb3RlVGV4dFRyYWNrLmNhbGwodGhpcywgdHJhY2spO1xuXG4gICAgICBpZiAodGhpcy5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MpIHtcbiAgICAgICAgdmFyIHRyYWNrcyA9IHRoaXMuJCQoJ3RyYWNrJyk7XG4gICAgICAgIHZhciBpID0gdHJhY2tzLmxlbmd0aDtcblxuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgaWYgKHRyYWNrID09PSB0cmFja3NbaV0gfHwgdHJhY2sgPT09IHRyYWNrc1tpXS50cmFjaykge1xuICAgICAgICAgICAgdGhpcy5lbCgpLnJlbW92ZUNoaWxkKHRyYWNrc1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYXZhaWxhYmxlIG1lZGlhIHBsYXliYWNrIHF1YWxpdHkgbWV0cmljcyBhcyBzcGVjaWZpZWQgYnkgdGhlIFczQydzIE1lZGlhXG4gICAgICogUGxheWJhY2sgUXVhbGl0eSBBUEkuXG4gICAgICpcbiAgICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3dpY2cuZ2l0aHViLmlvL21lZGlhLXBsYXliYWNrLXF1YWxpdHl9XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogICAgICAgICBBbiBvYmplY3Qgd2l0aCBzdXBwb3J0ZWQgbWVkaWEgcGxheWJhY2sgcXVhbGl0eSBtZXRyaWNzXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmdldFZpZGVvUGxheWJhY2tRdWFsaXR5ID0gZnVuY3Rpb24gZ2V0VmlkZW9QbGF5YmFja1F1YWxpdHkoKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuZWwoKS5nZXRWaWRlb1BsYXliYWNrUXVhbGl0eSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gdGhpcy5lbCgpLmdldFZpZGVvUGxheWJhY2tRdWFsaXR5KCk7XG4gICAgICB9XG5cbiAgICAgIHZhciB2aWRlb1BsYXliYWNrUXVhbGl0eSA9IHt9O1xuXG4gICAgICBpZiAodHlwZW9mIHRoaXMuZWwoKS53ZWJraXREcm9wcGVkRnJhbWVDb3VudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHRoaXMuZWwoKS53ZWJraXREZWNvZGVkRnJhbWVDb3VudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmlkZW9QbGF5YmFja1F1YWxpdHkuZHJvcHBlZFZpZGVvRnJhbWVzID0gdGhpcy5lbCgpLndlYmtpdERyb3BwZWRGcmFtZUNvdW50O1xuICAgICAgICB2aWRlb1BsYXliYWNrUXVhbGl0eS50b3RhbFZpZGVvRnJhbWVzID0gdGhpcy5lbCgpLndlYmtpdERlY29kZWRGcmFtZUNvdW50O1xuICAgICAgfVxuXG4gICAgICBpZiAod2luZG93JDEucGVyZm9ybWFuY2UgJiYgdHlwZW9mIHdpbmRvdyQxLnBlcmZvcm1hbmNlLm5vdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2aWRlb1BsYXliYWNrUXVhbGl0eS5jcmVhdGlvblRpbWUgPSB3aW5kb3ckMS5wZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIH0gZWxzZSBpZiAod2luZG93JDEucGVyZm9ybWFuY2UgJiYgd2luZG93JDEucGVyZm9ybWFuY2UudGltaW5nICYmIHR5cGVvZiB3aW5kb3ckMS5wZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0ID09PSAnbnVtYmVyJykge1xuICAgICAgICB2aWRlb1BsYXliYWNrUXVhbGl0eS5jcmVhdGlvblRpbWUgPSB3aW5kb3ckMS5EYXRlLm5vdygpIC0gd2luZG93JDEucGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZpZGVvUGxheWJhY2tRdWFsaXR5O1xuICAgIH07XG5cbiAgICByZXR1cm4gSHRtbDU7XG4gIH0oVGVjaCk7XG4gIC8qIEhUTUw1IFN1cHBvcnQgVGVzdGluZyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblxuICBpZiAoaXNSZWFsKCkpIHtcbiAgICAvKipcbiAgICAgKiBFbGVtZW50IGZvciB0ZXN0aW5nIGJyb3dzZXIgSFRNTDUgbWVkaWEgY2FwYWJpbGl0aWVzXG4gICAgICpcbiAgICAgKiBAdHlwZSB7RWxlbWVudH1cbiAgICAgKiBAY29uc3RhbnRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEh0bWw1LlRFU1RfVklEID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICB2YXIgdHJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cmFjaycpO1xuICAgIHRyYWNrLmtpbmQgPSAnY2FwdGlvbnMnO1xuICAgIHRyYWNrLnNyY2xhbmcgPSAnZW4nO1xuICAgIHRyYWNrLmxhYmVsID0gJ0VuZ2xpc2gnO1xuICAgIEh0bWw1LlRFU1RfVklELmFwcGVuZENoaWxkKHRyYWNrKTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgSFRNTDUgbWVkaWEgaXMgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3Nlci9kZXZpY2UuXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqICAgICAgICAgLSBUcnVlIGlmIEhUTUw1IG1lZGlhIGlzIHN1cHBvcnRlZC5cbiAgICogICAgICAgICAtIEZhbHNlIGlmIEhUTUw1IG1lZGlhIGlzIG5vdCBzdXBwb3J0ZWQuXG4gICAqL1xuXG5cbiAgSHRtbDUuaXNTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gSUUgd2l0aCBubyBNZWRpYSBQbGF5ZXIgaXMgYSBMSUFSISAoIzk4NClcbiAgICB0cnkge1xuICAgICAgSHRtbDUuVEVTVF9WSUQudm9sdW1lID0gMC41O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gISEoSHRtbDUuVEVTVF9WSUQgJiYgSHRtbDUuVEVTVF9WSUQuY2FuUGxheVR5cGUpO1xuICB9O1xuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIHRlY2ggY2FuIHN1cHBvcnQgdGhlIGdpdmVuIHR5cGVcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICogICAgICAgIFRoZSBtaW1ldHlwZSB0byBjaGVja1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9ICdwcm9iYWJseScsICdtYXliZScsIG9yICcnIChlbXB0eSBzdHJpbmcpXG4gICAqL1xuXG5cbiAgSHRtbDUuY2FuUGxheVR5cGUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIHJldHVybiBIdG1sNS5URVNUX1ZJRC5jYW5QbGF5VHlwZSh0eXBlKTtcbiAgfTtcbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSB0ZWNoIGNhbiBzdXBwb3J0IHRoZSBnaXZlbiBzb3VyY2VcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHNyY09ialxuICAgKiAgICAgICAgVGhlIHNvdXJjZSBvYmplY3RcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogICAgICAgIFRoZSBvcHRpb25zIHBhc3NlZCB0byB0aGUgdGVjaFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9ICdwcm9iYWJseScsICdtYXliZScsIG9yICcnIChlbXB0eSBzdHJpbmcpXG4gICAqL1xuXG5cbiAgSHRtbDUuY2FuUGxheVNvdXJjZSA9IGZ1bmN0aW9uIChzcmNPYmosIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gSHRtbDUuY2FuUGxheVR5cGUoc3JjT2JqLnR5cGUpO1xuICB9O1xuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIHZvbHVtZSBjYW4gYmUgY2hhbmdlZCBpbiB0aGlzIGJyb3dzZXIvZGV2aWNlLlxuICAgKiBWb2x1bWUgY2Fubm90IGJlIGNoYW5nZWQgaW4gYSBsb3Qgb2YgbW9iaWxlIGRldmljZXMuXG4gICAqIFNwZWNpZmljYWxseSwgaXQgY2FuJ3QgYmUgY2hhbmdlZCBmcm9tIDEgb24gaU9TLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIC0gVHJ1ZSBpZiB2b2x1bWUgY2FuIGJlIGNvbnRyb2xsZWRcbiAgICogICAgICAgICAtIEZhbHNlIG90aGVyd2lzZVxuICAgKi9cblxuXG4gIEh0bWw1LmNhbkNvbnRyb2xWb2x1bWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gSUUgd2lsbCBlcnJvciBpZiBXaW5kb3dzIE1lZGlhIFBsYXllciBub3QgaW5zdGFsbGVkICMzMzE1XG4gICAgdHJ5IHtcbiAgICAgIHZhciB2b2x1bWUgPSBIdG1sNS5URVNUX1ZJRC52b2x1bWU7XG4gICAgICBIdG1sNS5URVNUX1ZJRC52b2x1bWUgPSB2b2x1bWUgLyAyICsgMC4xO1xuICAgICAgcmV0dXJuIHZvbHVtZSAhPT0gSHRtbDUuVEVTVF9WSUQudm9sdW1lO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgdm9sdW1lIGNhbiBiZSBtdXRlZCBpbiB0aGlzIGJyb3dzZXIvZGV2aWNlLlxuICAgKiBTb21lIGRldmljZXMsIGUuZy4gaU9TLCBkb24ndCBhbGxvdyBjaGFuZ2luZyB2b2x1bWVcbiAgICogYnV0IHBlcm1pdHMgbXV0aW5nL3VubXV0aW5nLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib2xlYW59XG4gICAqICAgICAgLSBUcnVlIGlmIHZvbHVtZSBjYW4gYmUgbXV0ZWRcbiAgICogICAgICAtIEZhbHNlIG90aGVyd2lzZVxuICAgKi9cblxuXG4gIEh0bWw1LmNhbk11dGVWb2x1bWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBtdXRlZCA9IEh0bWw1LlRFU1RfVklELm11dGVkOyAvLyBpbiBzb21lIHZlcnNpb25zIG9mIGlPUyBtdXRlZCBwcm9wZXJ0eSBkb2Vzbid0IGFsd2F5c1xuICAgICAgLy8gd29yaywgc28gd2Ugd2FudCB0byBzZXQgYm90aCBwcm9wZXJ0eSBhbmQgYXR0cmlidXRlXG5cbiAgICAgIEh0bWw1LlRFU1RfVklELm11dGVkID0gIW11dGVkO1xuXG4gICAgICBpZiAoSHRtbDUuVEVTVF9WSUQubXV0ZWQpIHtcbiAgICAgICAgc2V0QXR0cmlidXRlKEh0bWw1LlRFU1RfVklELCAnbXV0ZWQnLCAnbXV0ZWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlbW92ZUF0dHJpYnV0ZShIdG1sNS5URVNUX1ZJRCwgJ211dGVkJywgJ211dGVkJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBtdXRlZCAhPT0gSHRtbDUuVEVTVF9WSUQubXV0ZWQ7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBwbGF5YmFjayByYXRlIGNhbiBiZSBjaGFuZ2VkIGluIHRoaXMgYnJvd3Nlci9kZXZpY2UuXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqICAgICAgICAgLSBUcnVlIGlmIHBsYXliYWNrIHJhdGUgY2FuIGJlIGNvbnRyb2xsZWRcbiAgICogICAgICAgICAtIEZhbHNlIG90aGVyd2lzZVxuICAgKi9cblxuXG4gIEh0bWw1LmNhbkNvbnRyb2xQbGF5YmFja1JhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gUGxheWJhY2sgcmF0ZSBBUEkgaXMgaW1wbGVtZW50ZWQgaW4gQW5kcm9pZCBDaHJvbWUsIGJ1dCBkb2Vzbid0IGRvIGFueXRoaW5nXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3ZpZGVvanMvdmlkZW8uanMvaXNzdWVzLzMxODBcbiAgICBpZiAoSVNfQU5EUk9JRCAmJiBJU19DSFJPTUUgJiYgQ0hST01FX1ZFUlNJT04gPCA1OCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gLy8gSUUgd2lsbCBlcnJvciBpZiBXaW5kb3dzIE1lZGlhIFBsYXllciBub3QgaW5zdGFsbGVkICMzMzE1XG5cblxuICAgIHRyeSB7XG4gICAgICB2YXIgcGxheWJhY2tSYXRlID0gSHRtbDUuVEVTVF9WSUQucGxheWJhY2tSYXRlO1xuICAgICAgSHRtbDUuVEVTVF9WSUQucGxheWJhY2tSYXRlID0gcGxheWJhY2tSYXRlIC8gMiArIDAuMTtcbiAgICAgIHJldHVybiBwbGF5YmFja1JhdGUgIT09IEh0bWw1LlRFU1RfVklELnBsYXliYWNrUmF0ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuICAvKipcbiAgICogQ2hlY2sgaWYgd2UgY2FuIG92ZXJyaWRlIGEgdmlkZW8vYXVkaW8gZWxlbWVudHMgYXR0cmlidXRlcywgd2l0aFxuICAgKiBPYmplY3QuZGVmaW5lUHJvcGVydHkuXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqICAgICAgICAgLSBUcnVlIGlmIGJ1aWx0aW4gYXR0cmlidXRlcyBjYW4gYmUgb3ZlcnJpZGRlblxuICAgKiAgICAgICAgIC0gRmFsc2Ugb3RoZXJ3aXNlXG4gICAqL1xuXG5cbiAgSHRtbDUuY2FuT3ZlcnJpZGVBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIGlmIHdlIGNhbm5vdCBvdmVyd3JpdGUgdGhlIHNyYy9pbm5lckhUTUwgcHJvcGVydHksIHRoZXJlIGlzIG5vIHN1cHBvcnRcbiAgICAvLyBpT1MgNyBzYWZhcmkgZm9yIGluc3RhbmNlIGNhbm5vdCBkbyB0aGlzLlxuICAgIHRyeSB7XG4gICAgICB2YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTtcblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyksICdzcmMnLCB7XG4gICAgICAgIGdldDogbm9vcCxcbiAgICAgICAgc2V0OiBub29wXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpLCAnc3JjJywge1xuICAgICAgICBnZXQ6IG5vb3AsXG4gICAgICAgIHNldDogbm9vcFxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKSwgJ2lubmVySFRNTCcsIHtcbiAgICAgICAgZ2V0OiBub29wLFxuICAgICAgICBzZXQ6IG5vb3BcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyksICdpbm5lckhUTUwnLCB7XG4gICAgICAgIGdldDogbm9vcCxcbiAgICAgICAgc2V0OiBub29wXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG4gIC8qKlxuICAgKiBDaGVjayB0byBzZWUgaWYgbmF0aXZlIGBUZXh0VHJhY2tgcyBhcmUgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3Nlci9kZXZpY2UuXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqICAgICAgICAgLSBUcnVlIGlmIG5hdGl2ZSBgVGV4dFRyYWNrYHMgYXJlIHN1cHBvcnRlZC5cbiAgICogICAgICAgICAtIEZhbHNlIG90aGVyd2lzZVxuICAgKi9cblxuXG4gIEh0bWw1LnN1cHBvcnRzTmF0aXZlVGV4dFRyYWNrcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gSVNfQU5ZX1NBRkFSSSB8fCBJU19JT1MgJiYgSVNfQ0hST01FO1xuICB9O1xuICAvKipcbiAgICogQ2hlY2sgdG8gc2VlIGlmIG5hdGl2ZSBgVmlkZW9UcmFja2BzIGFyZSBzdXBwb3J0ZWQgYnkgdGhpcyBicm93c2VyL2RldmljZVxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgLSBUcnVlIGlmIG5hdGl2ZSBgVmlkZW9UcmFja2BzIGFyZSBzdXBwb3J0ZWQuXG4gICAqICAgICAgICAtIEZhbHNlIG90aGVyd2lzZVxuICAgKi9cblxuXG4gIEh0bWw1LnN1cHBvcnRzTmF0aXZlVmlkZW9UcmFja3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICEhKEh0bWw1LlRFU1RfVklEICYmIEh0bWw1LlRFU1RfVklELnZpZGVvVHJhY2tzKTtcbiAgfTtcbiAgLyoqXG4gICAqIENoZWNrIHRvIHNlZSBpZiBuYXRpdmUgYEF1ZGlvVHJhY2tgcyBhcmUgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3Nlci9kZXZpY2VcbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgIC0gVHJ1ZSBpZiBuYXRpdmUgYEF1ZGlvVHJhY2tgcyBhcmUgc3VwcG9ydGVkLlxuICAgKiAgICAgICAgLSBGYWxzZSBvdGhlcndpc2VcbiAgICovXG5cblxuICBIdG1sNS5zdXBwb3J0c05hdGl2ZUF1ZGlvVHJhY2tzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAhIShIdG1sNS5URVNUX1ZJRCAmJiBIdG1sNS5URVNUX1ZJRC5hdWRpb1RyYWNrcyk7XG4gIH07XG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBldmVudHMgYXZhaWxhYmxlIG9uIHRoZSBIdG1sNSB0ZWNoLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7QXJyYXl9XG4gICAqL1xuXG5cbiAgSHRtbDUuRXZlbnRzID0gWydsb2Fkc3RhcnQnLCAnc3VzcGVuZCcsICdhYm9ydCcsICdlcnJvcicsICdlbXB0aWVkJywgJ3N0YWxsZWQnLCAnbG9hZGVkbWV0YWRhdGEnLCAnbG9hZGVkZGF0YScsICdjYW5wbGF5JywgJ2NhbnBsYXl0aHJvdWdoJywgJ3BsYXlpbmcnLCAnd2FpdGluZycsICdzZWVraW5nJywgJ3NlZWtlZCcsICdlbmRlZCcsICdkdXJhdGlvbmNoYW5nZScsICd0aW1ldXBkYXRlJywgJ3Byb2dyZXNzJywgJ3BsYXknLCAncGF1c2UnLCAncmF0ZWNoYW5nZScsICdyZXNpemUnLCAndm9sdW1lY2hhbmdlJ107XG4gIC8qKlxuICAgKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYFRlY2hgIHN1cHBvcnRzIHZvbHVtZSBjb250cm9sLlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQGRlZmF1bHQge0BsaW5rIEh0bWw1LmNhbkNvbnRyb2xWb2x1bWV9XG4gICAqL1xuXG4gIEh0bWw1LnByb3RvdHlwZS5mZWF0dXJlc1ZvbHVtZUNvbnRyb2wgPSBIdG1sNS5jYW5Db250cm9sVm9sdW1lKCk7XG4gIC8qKlxuICAgKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYFRlY2hgIHN1cHBvcnRzIG11dGluZyB2b2x1bWUuXG4gICAqXG4gICAqIEB0eXBlIHtib2xlYW59XG4gICAqIEBkZWZhdWx0IHtAbGluayBIdG1sNS5jYW5NdXRlVm9sdW1lfVxuICAgKi9cblxuICBIdG1sNS5wcm90b3R5cGUuZmVhdHVyZXNNdXRlQ29udHJvbCA9IEh0bWw1LmNhbk11dGVWb2x1bWUoKTtcbiAgLyoqXG4gICAqIEJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBgVGVjaGAgc3VwcG9ydHMgY2hhbmdpbmcgdGhlIHNwZWVkIGF0IHdoaWNoIHRoZSBtZWRpYVxuICAgKiBwbGF5cy4gRXhhbXBsZXM6XG4gICAqICAgLSBTZXQgcGxheWVyIHRvIHBsYXkgMnggKHR3aWNlKSBhcyBmYXN0XG4gICAqICAgLSBTZXQgcGxheWVyIHRvIHBsYXkgMC41eCAoaGFsZikgYXMgZmFzdFxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQGRlZmF1bHQge0BsaW5rIEh0bWw1LmNhbkNvbnRyb2xQbGF5YmFja1JhdGV9XG4gICAqL1xuXG4gIEh0bWw1LnByb3RvdHlwZS5mZWF0dXJlc1BsYXliYWNrUmF0ZSA9IEh0bWw1LmNhbkNvbnRyb2xQbGF5YmFja1JhdGUoKTtcbiAgLyoqXG4gICAqIEJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBgVGVjaGAgc3VwcG9ydHMgdGhlIGBzb3VyY2VzZXRgIGV2ZW50LlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQGRlZmF1bHRcbiAgICovXG5cbiAgSHRtbDUucHJvdG90eXBlLmZlYXR1cmVzU291cmNlc2V0ID0gSHRtbDUuY2FuT3ZlcnJpZGVBdHRyaWJ1dGVzKCk7XG4gIC8qKlxuICAgKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYEhUTUw1YCB0ZWNoIGN1cnJlbnRseSBzdXBwb3J0cyB0aGUgbWVkaWEgZWxlbWVudFxuICAgKiBtb3ZpbmcgaW4gdGhlIERPTS4gaU9TIGJyZWFrcyBpZiB5b3UgbW92ZSB0aGUgbWVkaWEgZWxlbWVudCwgc28gdGhpcyBpcyBzZXQgdGhpcyB0b1xuICAgKiBmYWxzZSB0aGVyZS4gRXZlcnl3aGVyZSBlbHNlIHRoaXMgc2hvdWxkIGJlIHRydWUuXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAZGVmYXVsdFxuICAgKi9cblxuICBIdG1sNS5wcm90b3R5cGUubW92aW5nTWVkaWFFbGVtZW50SW5ET00gPSAhSVNfSU9TOyAvLyBUT0RPOiBQcmV2aW91cyBjb21tZW50OiBObyBsb25nZXIgYXBwZWFycyB0byBiZSB1c2VkLiBDYW4gcHJvYmFibHkgYmUgcmVtb3ZlZC5cbiAgLy8gICAgICAgSXMgdGhpcyB0cnVlP1xuXG4gIC8qKlxuICAgKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYEhUTUw1YCB0ZWNoIGN1cnJlbnRseSBzdXBwb3J0cyBhdXRvbWF0aWMgbWVkaWEgcmVzaXplXG4gICAqIHdoZW4gZ29pbmcgaW50byBmdWxsc2NyZWVuLlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQGRlZmF1bHRcbiAgICovXG5cbiAgSHRtbDUucHJvdG90eXBlLmZlYXR1cmVzRnVsbHNjcmVlblJlc2l6ZSA9IHRydWU7XG4gIC8qKlxuICAgKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYEhUTUw1YCB0ZWNoIGN1cnJlbnRseSBzdXBwb3J0cyB0aGUgcHJvZ3Jlc3MgZXZlbnQuXG4gICAqIElmIHRoaXMgaXMgZmFsc2UsIG1hbnVhbCBgcHJvZ3Jlc3NgIGV2ZW50cyB3aWxsIGJlIHRyaWdnZXJlZCBpbnN0ZWFkLlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQGRlZmF1bHRcbiAgICovXG5cbiAgSHRtbDUucHJvdG90eXBlLmZlYXR1cmVzUHJvZ3Jlc3NFdmVudHMgPSB0cnVlO1xuICAvKipcbiAgICogQm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGBIVE1MNWAgdGVjaCBjdXJyZW50bHkgc3VwcG9ydHMgdGhlIHRpbWV1cGRhdGUgZXZlbnQuXG4gICAqIElmIHRoaXMgaXMgZmFsc2UsIG1hbnVhbCBgdGltZXVwZGF0ZWAgZXZlbnRzIHdpbGwgYmUgdHJpZ2dlcmVkIGluc3RlYWQuXG4gICAqXG4gICAqIEBkZWZhdWx0XG4gICAqL1xuXG4gIEh0bWw1LnByb3RvdHlwZS5mZWF0dXJlc1RpbWV1cGRhdGVFdmVudHMgPSB0cnVlO1xuICAvKipcbiAgICogQm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGBIVE1MNWAgdGVjaCBjdXJyZW50bHkgc3VwcG9ydHMgbmF0aXZlIGBUZXh0VHJhY2tgcy5cbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBkZWZhdWx0IHtAbGluayBIdG1sNS5zdXBwb3J0c05hdGl2ZVRleHRUcmFja3N9XG4gICAqL1xuXG4gIEh0bWw1LnByb3RvdHlwZS5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MgPSBIdG1sNS5zdXBwb3J0c05hdGl2ZVRleHRUcmFja3MoKTtcbiAgLyoqXG4gICAqIEJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBgSFRNTDVgIHRlY2ggY3VycmVudGx5IHN1cHBvcnRzIG5hdGl2ZSBgVmlkZW9UcmFja2BzLlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQGRlZmF1bHQge0BsaW5rIEh0bWw1LnN1cHBvcnRzTmF0aXZlVmlkZW9UcmFja3N9XG4gICAqL1xuXG4gIEh0bWw1LnByb3RvdHlwZS5mZWF0dXJlc05hdGl2ZVZpZGVvVHJhY2tzID0gSHRtbDUuc3VwcG9ydHNOYXRpdmVWaWRlb1RyYWNrcygpO1xuICAvKipcbiAgICogQm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGBIVE1MNWAgdGVjaCBjdXJyZW50bHkgc3VwcG9ydHMgbmF0aXZlIGBBdWRpb1RyYWNrYHMuXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAZGVmYXVsdCB7QGxpbmsgSHRtbDUuc3VwcG9ydHNOYXRpdmVBdWRpb1RyYWNrc31cbiAgICovXG5cbiAgSHRtbDUucHJvdG90eXBlLmZlYXR1cmVzTmF0aXZlQXVkaW9UcmFja3MgPSBIdG1sNS5zdXBwb3J0c05hdGl2ZUF1ZGlvVHJhY2tzKCk7IC8vIEhUTUw1IEZlYXR1cmUgZGV0ZWN0aW9uIGFuZCBEZXZpY2UgRml4ZXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgdmFyIGNhblBsYXlUeXBlID0gSHRtbDUuVEVTVF9WSUQgJiYgSHRtbDUuVEVTVF9WSUQuY29uc3RydWN0b3IucHJvdG90eXBlLmNhblBsYXlUeXBlO1xuICB2YXIgbXBlZ3VybFJFID0gL15hcHBsaWNhdGlvblxcLyg/OngtfHZuZFxcLmFwcGxlXFwuKW1wZWd1cmwvaTtcblxuICBIdG1sNS5wYXRjaENhblBsYXlUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIEFuZHJvaWQgNC4wIGFuZCBhYm92ZSBjYW4gcGxheSBITFMgdG8gc29tZSBleHRlbnQgYnV0IGl0IHJlcG9ydHMgYmVpbmcgdW5hYmxlIHRvIGRvIHNvXG4gICAgLy8gRmlyZWZveCBhbmQgQ2hyb21lIHJlcG9ydCBjb3JyZWN0bHlcbiAgICBpZiAoQU5EUk9JRF9WRVJTSU9OID49IDQuMCAmJiAhSVNfRklSRUZPWCAmJiAhSVNfQ0hST01FKSB7XG4gICAgICBIdG1sNS5URVNUX1ZJRC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUuY2FuUGxheVR5cGUgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICBpZiAodHlwZSAmJiBtcGVndXJsUkUudGVzdCh0eXBlKSkge1xuICAgICAgICAgIHJldHVybiAnbWF5YmUnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNhblBsYXlUeXBlLmNhbGwodGhpcywgdHlwZSk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcblxuICBIdG1sNS51bnBhdGNoQ2FuUGxheVR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHIgPSBIdG1sNS5URVNUX1ZJRC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUuY2FuUGxheVR5cGU7XG4gICAgSHRtbDUuVEVTVF9WSUQuY29uc3RydWN0b3IucHJvdG90eXBlLmNhblBsYXlUeXBlID0gY2FuUGxheVR5cGU7XG4gICAgcmV0dXJuIHI7XG4gIH07IC8vIGJ5IGRlZmF1bHQsIHBhdGNoIHRoZSBtZWRpYSBlbGVtZW50XG5cblxuICBIdG1sNS5wYXRjaENhblBsYXlUeXBlKCk7XG5cbiAgSHRtbDUuZGlzcG9zZU1lZGlhRWxlbWVudCA9IGZ1bmN0aW9uIChlbCkge1xuICAgIGlmICghZWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZWwucGFyZW50Tm9kZSkge1xuICAgICAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG4gICAgfSAvLyByZW1vdmUgYW55IGNoaWxkIHRyYWNrIG9yIHNvdXJjZSBub2RlcyB0byBwcmV2ZW50IHRoZWlyIGxvYWRpbmdcblxuXG4gICAgd2hpbGUgKGVsLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgZWwucmVtb3ZlQ2hpbGQoZWwuZmlyc3RDaGlsZCk7XG4gICAgfSAvLyByZW1vdmUgYW55IHNyYyByZWZlcmVuY2UuIG5vdCBzZXR0aW5nIGBzcmM9JydgIGJlY2F1c2UgdGhhdCBjYXVzZXMgYSB3YXJuaW5nXG4gICAgLy8gaW4gZmlyZWZveFxuXG5cbiAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpOyAvLyBmb3JjZSB0aGUgbWVkaWEgZWxlbWVudCB0byB1cGRhdGUgaXRzIGxvYWRpbmcgc3RhdGUgYnkgY2FsbGluZyBsb2FkKClcbiAgICAvLyBob3dldmVyIElFIG9uIFdpbmRvd3MgN04gaGFzIGEgYnVnIHRoYXQgdGhyb3dzIGFuIGVycm9yIHNvIG5lZWQgYSB0cnkvY2F0Y2ggKCM3OTMpXG5cbiAgICBpZiAodHlwZW9mIGVsLmxvYWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIHdyYXBwaW5nIGluIGFuIGlpZmUgc28gaXQncyBub3QgZGVvcHRpbWl6ZWQgKCMxMDYwI2Rpc2N1c3Npb25fcjEwMzI0NDczKVxuICAgICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBlbC5sb2FkKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsvLyBub3Qgc3VwcG9ydGVkXG4gICAgICAgIH1cbiAgICAgIH0pKCk7XG4gICAgfVxuICB9O1xuXG4gIEh0bWw1LnJlc2V0TWVkaWFFbGVtZW50ID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgaWYgKCFlbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBzb3VyY2VzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnc291cmNlJyk7XG4gICAgdmFyIGkgPSBzb3VyY2VzLmxlbmd0aDtcblxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGVsLnJlbW92ZUNoaWxkKHNvdXJjZXNbaV0pO1xuICAgIH0gLy8gcmVtb3ZlIGFueSBzcmMgcmVmZXJlbmNlLlxuICAgIC8vIG5vdCBzZXR0aW5nIGBzcmM9JydgIGJlY2F1c2UgdGhhdCB0aHJvd3MgYW4gZXJyb3JcblxuXG4gICAgZWwucmVtb3ZlQXR0cmlidXRlKCdzcmMnKTtcblxuICAgIGlmICh0eXBlb2YgZWwubG9hZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gd3JhcHBpbmcgaW4gYW4gaWlmZSBzbyBpdCdzIG5vdCBkZW9wdGltaXplZCAoIzEwNjAjZGlzY3Vzc2lvbl9yMTAzMjQ0NzMpXG4gICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGVsLmxvYWQoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgey8vIHNhdGlzZnkgbGludGVyXG4gICAgICAgIH1cbiAgICAgIH0pKCk7XG4gICAgfVxuICB9O1xuICAvKiBOYXRpdmUgSFRNTDUgZWxlbWVudCBwcm9wZXJ0eSB3cmFwcGluZyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvLyBXcmFwIG5hdGl2ZSBib29sZWFuIGF0dHJpYnV0ZXMgd2l0aCBnZXR0ZXJzIHRoYXQgY2hlY2sgYm90aCBwcm9wZXJ0eSBhbmQgYXR0cmlidXRlXG4gIC8vIFRoZSBsaXN0IGlzIGFzIGZvbGxvd2VkOlxuICAvLyBtdXRlZCwgZGVmYXVsdE11dGVkLCBhdXRvcGxheSwgY29udHJvbHMsIGxvb3AsIHBsYXlzaW5saW5lXG5cblxuICBbXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGBtdXRlZGAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gYG11dGVkYCBpbmRpY2F0ZXNcbiAgICogdGhhdCB0aGUgdm9sdW1lIGZvciB0aGUgbWVkaWEgc2hvdWxkIGJlIHNldCB0byBzaWxlbnQuIFRoaXMgZG9lcyBub3QgYWN0dWFsbHkgY2hhbmdlXG4gICAqIHRoZSBgdm9sdW1lYCBhdHRyaWJ1dGUuXG4gICAqXG4gICAqIEBtZXRob2QgSHRtbDUjbXV0ZWRcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICAtIFRydWUgaWYgdGhlIHZhbHVlIG9mIGB2b2x1bWVgIHNob3VsZCBiZSBpZ25vcmVkIGFuZCB0aGUgYXVkaW8gc2V0IHRvIHNpbGVudC5cbiAgICogICAgICAgICAtIEZhbHNlIGlmIHRoZSB2YWx1ZSBvZiBgdm9sdW1lYCBzaG91bGQgYmUgdXNlZC5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS1tdXRlZH1cbiAgICovXG4gICdtdXRlZCcsXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGBkZWZhdWx0TXV0ZWRgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIGBkZWZhdWx0TXV0ZWRgIGluZGljYXRlc1xuICAgKiB3aGV0aGVyIHRoZSBtZWRpYSBzaG91bGQgc3RhcnQgbXV0ZWQgb3Igbm90LiBPbmx5IGNoYW5nZXMgdGhlIGRlZmF1bHQgc3RhdGUgb2YgdGhlXG4gICAqIG1lZGlhLiBgbXV0ZWRgIGFuZCBgZGVmYXVsdE11dGVkYCBjYW4gaGF2ZSBkaWZmZXJlbnQgdmFsdWVzLiB7QGxpbmsgSHRtbDUjbXV0ZWR9IGluZGljYXRlcyB0aGVcbiAgICogY3VycmVudCBzdGF0ZS5cbiAgICpcbiAgICogQG1ldGhvZCBIdG1sNSNkZWZhdWx0TXV0ZWRcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICAtIFRoZSB2YWx1ZSBvZiBgZGVmYXVsdE11dGVkYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LlxuICAgKiAgICAgICAgIC0gVHJ1ZSBpbmRpY2F0ZXMgdGhhdCB0aGUgbWVkaWEgc2hvdWxkIHN0YXJ0IG11dGVkLlxuICAgKiAgICAgICAgIC0gRmFsc2UgaW5kaWNhdGVzIHRoYXQgdGhlIG1lZGlhIHNob3VsZCBub3Qgc3RhcnQgbXV0ZWRcbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS1kZWZhdWx0bXV0ZWR9XG4gICAqL1xuICAnZGVmYXVsdE11dGVkJyxcbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb2YgYGF1dG9wbGF5YCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgYXV0b3BsYXlgIGluZGljYXRlc1xuICAgKiB0aGF0IHRoZSBtZWRpYSBzaG91bGQgc3RhcnQgdG8gcGxheSBhcyBzb29uIGFzIHRoZSBwYWdlIGlzIHJlYWR5LlxuICAgKlxuICAgKiBAbWV0aG9kIEh0bWw1I2F1dG9wbGF5XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqICAgICAgICAgLSBUaGUgdmFsdWUgb2YgYGF1dG9wbGF5YCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LlxuICAgKiAgICAgICAgIC0gVHJ1ZSBpbmRpY2F0ZXMgdGhhdCB0aGUgbWVkaWEgc2hvdWxkIHN0YXJ0IGFzIHNvb24gYXMgdGhlIHBhZ2UgbG9hZHMuXG4gICAqICAgICAgICAgLSBGYWxzZSBpbmRpY2F0ZXMgdGhhdCB0aGUgbWVkaWEgc2hvdWxkIG5vdCBzdGFydCBhcyBzb29uIGFzIHRoZSBwYWdlIGxvYWRzLlxuICAgKlxuICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjYXR0ci1tZWRpYS1hdXRvcGxheX1cbiAgICovXG4gICdhdXRvcGxheScsXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGBjb250cm9sc2AgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gYGNvbnRyb2xzYCBpbmRpY2F0ZXNcbiAgICogd2hldGhlciB0aGUgbmF0aXZlIG1lZGlhIGNvbnRyb2xzIHNob3VsZCBiZSBzaG93biBvciBoaWRkZW4uXG4gICAqXG4gICAqIEBtZXRob2QgSHRtbDUjY29udHJvbHNcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICAtIFRoZSB2YWx1ZSBvZiBgY29udHJvbHNgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuXG4gICAqICAgICAgICAgLSBUcnVlIGluZGljYXRlcyB0aGF0IG5hdGl2ZSBjb250cm9scyBzaG91bGQgYmUgc2hvd2luZy5cbiAgICogICAgICAgICAtIEZhbHNlIGluZGljYXRlcyB0aGF0IG5hdGl2ZSBjb250cm9scyBzaG91bGQgYmUgaGlkZGVuLlxuICAgKlxuICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjYXR0ci1tZWRpYS1jb250cm9sc31cbiAgICovXG4gICdjb250cm9scycsXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGBsb29wYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgbG9vcGAgaW5kaWNhdGVzXG4gICAqIHRoYXQgdGhlIG1lZGlhIHNob3VsZCByZXR1cm4gdG8gdGhlIHN0YXJ0IG9mIHRoZSBtZWRpYSBhbmQgY29udGludWUgcGxheWluZyBvbmNlXG4gICAqIGl0IHJlYWNoZXMgdGhlIGVuZC5cbiAgICpcbiAgICogQG1ldGhvZCBIdG1sNSNsb29wXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqICAgICAgICAgLSBUaGUgdmFsdWUgb2YgYGxvb3BgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuXG4gICAqICAgICAgICAgLSBUcnVlIGluZGljYXRlcyB0aGF0IHBsYXliYWNrIHNob3VsZCBzZWVrIGJhY2sgdG8gc3RhcnQgb25jZVxuICAgKiAgICAgICAgICAgdGhlIGVuZCBvZiBhIG1lZGlhIGlzIHJlYWNoZWQuXG4gICAqICAgICAgICAgLSBGYWxzZSBpbmRpY2F0ZXMgdGhhdCBwbGF5YmFjayBzaG91bGQgbm90IGxvb3AgYmFjayB0byB0aGUgc3RhcnQgd2hlbiB0aGVcbiAgICogICAgICAgICAgIGVuZCBvZiB0aGUgbWVkaWEgaXMgcmVhY2hlZC5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2F0dHItbWVkaWEtbG9vcH1cbiAgICovXG4gICdsb29wJyxcbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb2YgYHBsYXlzaW5saW5lYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgcGxheXNpbmxpbmVgIGluZGljYXRlc1xuICAgKiB0byB0aGUgYnJvd3NlciB0aGF0IG5vbi1mdWxsc2NyZWVuIHBsYXliYWNrIGlzIHByZWZlcnJlZCB3aGVuIGZ1bGxzY3JlZW5cbiAgICogcGxheWJhY2sgaXMgdGhlIG5hdGl2ZSBkZWZhdWx0LCBzdWNoIGFzIGluIGlPUyBTYWZhcmkuXG4gICAqXG4gICAqIEBtZXRob2QgSHRtbDUjcGxheXNpbmxpbmVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICAtIFRoZSB2YWx1ZSBvZiBgcGxheXNpbmxpbmVgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuXG4gICAqICAgICAgICAgLSBUcnVlIGluZGljYXRlcyB0aGF0IHRoZSBtZWRpYSBzaG91bGQgcGxheSBpbmxpbmUuXG4gICAqICAgICAgICAgLSBGYWxzZSBpbmRpY2F0ZXMgdGhhdCB0aGUgbWVkaWEgc2hvdWxkIG5vdCBwbGF5IGlubGluZS5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy8jYXR0ci12aWRlby1wbGF5c2lubGluZX1cbiAgICovXG4gICdwbGF5c2lubGluZSddLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHtcbiAgICBIdG1sNS5wcm90b3R5cGVbcHJvcF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbF9bcHJvcF0gfHwgdGhpcy5lbF8uaGFzQXR0cmlidXRlKHByb3ApO1xuICAgIH07XG4gIH0pOyAvLyBXcmFwIG5hdGl2ZSBib29sZWFuIGF0dHJpYnV0ZXMgd2l0aCBzZXR0ZXJzIHRoYXQgc2V0IGJvdGggcHJvcGVydHkgYW5kIGF0dHJpYnV0ZVxuICAvLyBUaGUgbGlzdCBpcyBhcyBmb2xsb3dlZDpcbiAgLy8gc2V0TXV0ZWQsIHNldERlZmF1bHRNdXRlZCwgc2V0QXV0b3BsYXksIHNldExvb3AsIHNldFBsYXlzaW5saW5lXG4gIC8vIHNldENvbnRyb2xzIGlzIHNwZWNpYWwtY2FzZWQgYWJvdmVcblxuICBbXG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlIG9mIGBtdXRlZGAgb24gdGhlIG1lZGlhIGVsZW1lbnQuIGBtdXRlZGAgaW5kaWNhdGVzIHRoYXQgdGhlIGN1cnJlbnRcbiAgICogYXVkaW8gbGV2ZWwgc2hvdWxkIGJlIHNpbGVudC5cbiAgICpcbiAgICogQG1ldGhvZCBIdG1sNSNzZXRNdXRlZFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IG11dGVkXG4gICAqICAgICAgICAtIFRydWUgaWYgdGhlIGF1ZGlvIHNob3VsZCBiZSBzZXQgdG8gc2lsZW50XG4gICAqICAgICAgICAtIEZhbHNlIG90aGVyd2lzZVxuICAgKlxuICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjZG9tLW1lZGlhLW11dGVkfVxuICAgKi9cbiAgJ211dGVkJyxcbiAgLyoqXG4gICAqIFNldCB0aGUgdmFsdWUgb2YgYGRlZmF1bHRNdXRlZGAgb24gdGhlIG1lZGlhIGVsZW1lbnQuIGBkZWZhdWx0TXV0ZWRgIGluZGljYXRlcyB0aGF0IHRoZSBjdXJyZW50XG4gICAqIGF1ZGlvIGxldmVsIHNob3VsZCBiZSBzaWxlbnQsIGJ1dCB3aWxsIG9ubHkgZWZmZWN0IHRoZSBtdXRlZCBsZXZlbCBvbiBpbnRpYWwgcGxheWJhY2suLlxuICAgKlxuICAgKiBAbWV0aG9kIEh0bWw1LnByb3RvdHlwZS5zZXREZWZhdWx0TXV0ZWRcbiAgICogQHBhcmFtIHtib29sZWFufSBkZWZhdWx0TXV0ZWRcbiAgICogICAgICAgIC0gVHJ1ZSBpZiB0aGUgYXVkaW8gc2hvdWxkIGJlIHNldCB0byBzaWxlbnRcbiAgICogICAgICAgIC0gRmFsc2Ugb3RoZXJ3aXNlXG4gICAqXG4gICAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtZGVmYXVsdG11dGVkfVxuICAgKi9cbiAgJ2RlZmF1bHRNdXRlZCcsXG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlIG9mIGBhdXRvcGxheWAgb24gdGhlIG1lZGlhIGVsZW1lbnQuIGBhdXRvcGxheWAgaW5kaWNhdGVzXG4gICAqIHRoYXQgdGhlIG1lZGlhIHNob3VsZCBzdGFydCB0byBwbGF5IGFzIHNvb24gYXMgdGhlIHBhZ2UgaXMgcmVhZHkuXG4gICAqXG4gICAqIEBtZXRob2QgSHRtbDUjc2V0QXV0b3BsYXlcbiAgICogQHBhcmFtIHtib29sZWFufSBhdXRvcGxheVxuICAgKiAgICAgICAgIC0gVHJ1ZSBpbmRpY2F0ZXMgdGhhdCB0aGUgbWVkaWEgc2hvdWxkIHN0YXJ0IGFzIHNvb24gYXMgdGhlIHBhZ2UgbG9hZHMuXG4gICAqICAgICAgICAgLSBGYWxzZSBpbmRpY2F0ZXMgdGhhdCB0aGUgbWVkaWEgc2hvdWxkIG5vdCBzdGFydCBhcyBzb29uIGFzIHRoZSBwYWdlIGxvYWRzLlxuICAgKlxuICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjYXR0ci1tZWRpYS1hdXRvcGxheX1cbiAgICovXG4gICdhdXRvcGxheScsXG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlIG9mIGBsb29wYCBvbiB0aGUgbWVkaWEgZWxlbWVudC4gYGxvb3BgIGluZGljYXRlc1xuICAgKiB0aGF0IHRoZSBtZWRpYSBzaG91bGQgcmV0dXJuIHRvIHRoZSBzdGFydCBvZiB0aGUgbWVkaWEgYW5kIGNvbnRpbnVlIHBsYXlpbmcgb25jZVxuICAgKiBpdCByZWFjaGVzIHRoZSBlbmQuXG4gICAqXG4gICAqIEBtZXRob2QgSHRtbDUjc2V0TG9vcFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGxvb3BcbiAgICogICAgICAgICAtIFRydWUgaW5kaWNhdGVzIHRoYXQgcGxheWJhY2sgc2hvdWxkIHNlZWsgYmFjayB0byBzdGFydCBvbmNlXG4gICAqICAgICAgICAgICB0aGUgZW5kIG9mIGEgbWVkaWEgaXMgcmVhY2hlZC5cbiAgICogICAgICAgICAtIEZhbHNlIGluZGljYXRlcyB0aGF0IHBsYXliYWNrIHNob3VsZCBub3QgbG9vcCBiYWNrIHRvIHRoZSBzdGFydCB3aGVuIHRoZVxuICAgKiAgICAgICAgICAgZW5kIG9mIHRoZSBtZWRpYSBpcyByZWFjaGVkLlxuICAgKlxuICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjYXR0ci1tZWRpYS1sb29wfVxuICAgKi9cbiAgJ2xvb3AnLFxuICAvKipcbiAgICogU2V0IHRoZSB2YWx1ZSBvZiBgcGxheXNpbmxpbmVgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIGBwbGF5c2lubGluZWAgaW5kaWNhdGVzXG4gICAqIHRvIHRoZSBicm93c2VyIHRoYXQgbm9uLWZ1bGxzY3JlZW4gcGxheWJhY2sgaXMgcHJlZmVycmVkIHdoZW4gZnVsbHNjcmVlblxuICAgKiBwbGF5YmFjayBpcyB0aGUgbmF0aXZlIGRlZmF1bHQsIHN1Y2ggYXMgaW4gaU9TIFNhZmFyaS5cbiAgICpcbiAgICogQG1ldGhvZCBIdG1sNSNzZXRQbGF5c2lubGluZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHBsYXlzaW5saW5lXG4gICAqICAgICAgICAgLSBUcnVlIGluZGljYXRlcyB0aGF0IHRoZSBtZWRpYSBzaG91bGQgcGxheSBpbmxpbmUuXG4gICAqICAgICAgICAgLSBGYWxzZSBpbmRpY2F0ZXMgdGhhdCB0aGUgbWVkaWEgc2hvdWxkIG5vdCBwbGF5IGlubGluZS5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy8jYXR0ci12aWRlby1wbGF5c2lubGluZX1cbiAgICovXG4gICdwbGF5c2lubGluZSddLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHtcbiAgICBIdG1sNS5wcm90b3R5cGVbJ3NldCcgKyB0b1RpdGxlQ2FzZShwcm9wKV0gPSBmdW5jdGlvbiAodikge1xuICAgICAgdGhpcy5lbF9bcHJvcF0gPSB2O1xuXG4gICAgICBpZiAodikge1xuICAgICAgICB0aGlzLmVsXy5zZXRBdHRyaWJ1dGUocHJvcCwgcHJvcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVsXy5yZW1vdmVBdHRyaWJ1dGUocHJvcCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7IC8vIFdyYXAgbmF0aXZlIHByb3BlcnRpZXMgd2l0aCBhIGdldHRlclxuICAvLyBUaGUgbGlzdCBpcyBhcyBmb2xsb3dlZFxuICAvLyBwYXVzZWQsIGN1cnJlbnRUaW1lLCBidWZmZXJlZCwgdm9sdW1lLCBwb3N0ZXIsIHByZWxvYWQsIGVycm9yLCBzZWVraW5nXG4gIC8vIHNlZWthYmxlLCBlbmRlZCwgcGxheWJhY2tSYXRlLCBkZWZhdWx0UGxheWJhY2tSYXRlLCBwbGF5ZWQsIG5ldHdvcmtTdGF0ZVxuICAvLyByZWFkeVN0YXRlLCB2aWRlb1dpZHRoLCB2aWRlb0hlaWdodFxuXG4gIFtcbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb2YgYHBhdXNlZGAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gYHBhdXNlZGAgaW5kaWNhdGVzIHdoZXRoZXIgdGhlIG1lZGlhIGVsZW1lbnRcbiAgICogaXMgY3VycmVudGx5IHBhdXNlZCBvciBub3QuXG4gICAqXG4gICAqIEBtZXRob2QgSHRtbDUjcGF1c2VkXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqICAgICAgICAgVGhlIHZhbHVlIG9mIGBwYXVzZWRgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuXG4gICAqXG4gICAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtcGF1c2VkfVxuICAgKi9cbiAgJ3BhdXNlZCcsXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGBjdXJyZW50VGltZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gYGN1cnJlbnRUaW1lYCBpbmRpY2F0ZXNcbiAgICogdGhlIGN1cnJlbnQgc2Vjb25kIHRoYXQgdGhlIG1lZGlhIGlzIGF0IGluIHBsYXliYWNrLlxuICAgKlxuICAgKiBAbWV0aG9kIEh0bWw1I2N1cnJlbnRUaW1lXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICBUaGUgdmFsdWUgb2YgYGN1cnJlbnRUaW1lYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LlxuICAgKlxuICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjZG9tLW1lZGlhLWN1cnJlbnR0aW1lfVxuICAgKi9cbiAgJ2N1cnJlbnRUaW1lJyxcbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb2YgYGJ1ZmZlcmVkYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgYnVmZmVyZWRgIGlzIGEgYFRpbWVSYW5nZWBcbiAgICogb2JqZWN0IHRoYXQgcmVwcmVzZW50cyB0aGUgcGFydHMgb2YgdGhlIG1lZGlhIHRoYXQgYXJlIGFscmVhZHkgZG93bmxvYWRlZCBhbmRcbiAgICogYXZhaWxhYmxlIGZvciBwbGF5YmFjay5cbiAgICpcbiAgICogQG1ldGhvZCBIdG1sNSNidWZmZXJlZFxuICAgKiBAcmV0dXJuIHtUaW1lUmFuZ2V9XG4gICAqICAgICAgICAgVGhlIHZhbHVlIG9mIGBidWZmZXJlZGAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS1idWZmZXJlZH1cbiAgICovXG4gICdidWZmZXJlZCcsXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGB2b2x1bWVgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIGB2b2x1bWVgIGluZGljYXRlc1xuICAgKiB0aGUgY3VycmVudCBwbGF5YmFjayB2b2x1bWUgb2YgYXVkaW8gZm9yIGEgbWVkaWEuIGB2b2x1bWVgIHdpbGwgYmUgYSB2YWx1ZSBmcm9tIDBcbiAgICogKHNpbGVudCkgdG8gMSAobG91ZGVzdCBhbmQgZGVmYXVsdCkuXG4gICAqXG4gICAqIEBtZXRob2QgSHRtbDUjdm9sdW1lXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICBUaGUgdmFsdWUgb2YgYHZvbHVtZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gVmFsdWUgd2lsbCBiZSBiZXR3ZWVuIDAtMS5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1hLXZvbHVtZX1cbiAgICovXG4gICd2b2x1bWUnLFxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvZiBgcG9zdGVyYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgcG9zdGVyYCBpbmRpY2F0ZXNcbiAgICogdGhhdCB0aGUgdXJsIG9mIGFuIGltYWdlIGZpbGUgdGhhdCBjYW4vd2lsbCBiZSBzaG93biB3aGVuIG5vIG1lZGlhIGRhdGEgaXMgYXZhaWxhYmxlLlxuICAgKlxuICAgKiBAbWV0aG9kIEh0bWw1I3Bvc3RlclxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIHZhbHVlIG9mIGBwb3N0ZXJgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIFZhbHVlIHdpbGwgYmUgYSB1cmwgdG8gYW5cbiAgICogICAgICAgICBpbWFnZS5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2F0dHItdmlkZW8tcG9zdGVyfVxuICAgKi9cbiAgJ3Bvc3RlcicsXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGBwcmVsb2FkYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgcHJlbG9hZGAgaW5kaWNhdGVzXG4gICAqIHdoYXQgc2hvdWxkIGRvd25sb2FkIGJlZm9yZSB0aGUgbWVkaWEgaXMgaW50ZXJhY3RlZCB3aXRoLiBJdCBjYW4gaGF2ZSB0aGUgZm9sbG93aW5nXG4gICAqIHZhbHVlczpcbiAgICogLSBub25lOiBub3RoaW5nIHNob3VsZCBiZSBkb3dubG9hZGVkXG4gICAqIC0gbWV0YWRhdGE6IHBvc3RlciBhbmQgdGhlIGZpcnN0IGZldyBmcmFtZXMgb2YgdGhlIG1lZGlhIG1heSBiZSBkb3dubG9hZGVkIHRvIGdldFxuICAgKiAgIG1lZGlhIGRpbWVuc2lvbnMgYW5kIG90aGVyIG1ldGFkYXRhXG4gICAqIC0gYXV0bzogYWxsb3cgdGhlIG1lZGlhIGFuZCBtZXRhZGF0YSBmb3IgdGhlIG1lZGlhIHRvIGJlIGRvd25sb2FkZWQgYmVmb3JlXG4gICAqICAgIGludGVyYWN0aW9uXG4gICAqXG4gICAqIEBtZXRob2QgSHRtbDUjcHJlbG9hZFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIHZhbHVlIG9mIGBwcmVsb2FkYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBXaWxsIGJlICdub25lJywgJ21ldGFkYXRhJyxcbiAgICogICAgICAgICBvciAnYXV0bycuXG4gICAqXG4gICAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNhdHRyLW1lZGlhLXByZWxvYWR9XG4gICAqL1xuICAncHJlbG9hZCcsXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIHRoZSBgZXJyb3JgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIGBlcnJvcmAgaW5kaWNhdGVzIGFueVxuICAgKiBNZWRpYUVycm9yIHRoYXQgbWF5IGhhdmUgb2NjdXJyZWQgZHVyaW5nIHBsYXliYWNrLiBJZiBlcnJvciByZXR1cm5zIG51bGwgdGhlcmUgaXMgbm9cbiAgICogY3VycmVudCBlcnJvci5cbiAgICpcbiAgICogQG1ldGhvZCBIdG1sNSNlcnJvclxuICAgKiBAcmV0dXJuIHtNZWRpYUVycm9yfG51bGx9XG4gICAqICAgICAgICAgVGhlIHZhbHVlIG9mIGBlcnJvcmAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gV2lsbCBiZSBgTWVkaWFFcnJvcmAgaWYgdGhlcmVcbiAgICogICAgICAgICBpcyBhIGN1cnJlbnQgZXJyb3IgYW5kIG51bGwgb3RoZXJ3aXNlLlxuICAgKlxuICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjZG9tLW1lZGlhLWVycm9yfVxuICAgKi9cbiAgJ2Vycm9yJyxcbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb2YgYHNlZWtpbmdgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIGBzZWVraW5nYCBpbmRpY2F0ZXMgd2hldGhlciB0aGVcbiAgICogbWVkaWEgaXMgY3VycmVudGx5IHNlZWtpbmcgdG8gYSBuZXcgcG9zaXRpb24gb3Igbm90LlxuICAgKlxuICAgKiBAbWV0aG9kIEh0bWw1I3NlZWtpbmdcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICAtIFRoZSB2YWx1ZSBvZiBgc2Vla2luZ2AgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC5cbiAgICogICAgICAgICAtIFRydWUgaW5kaWNhdGVzIHRoYXQgdGhlIG1lZGlhIGlzIGN1cnJlbnRseSBzZWVraW5nIHRvIGEgbmV3IHBvc2l0aW9uLlxuICAgKiAgICAgICAgIC0gRmFsc2UgaW5kaWNhdGVzIHRoYXQgdGhlIG1lZGlhIGlzIG5vdCBzZWVraW5nIHRvIGEgbmV3IHBvc2l0aW9uIGF0IHRoaXMgdGltZS5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS1zZWVraW5nfVxuICAgKi9cbiAgJ3NlZWtpbmcnLFxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvZiBgc2Vla2FibGVgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIGBzZWVrYWJsZWAgcmV0dXJucyBhXG4gICAqIGBUaW1lUmFuZ2VgIG9iamVjdCBpbmRpY2F0aW5nIHJhbmdlcyBvZiB0aW1lIHRoYXQgY2FuIGN1cnJlbnRseSBiZSBgc2Vla2VkYCB0by5cbiAgICpcbiAgICogQG1ldGhvZCBIdG1sNSNzZWVrYWJsZVxuICAgKiBAcmV0dXJuIHtUaW1lUmFuZ2V9XG4gICAqICAgICAgICAgVGhlIHZhbHVlIG9mIGBzZWVrYWJsZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gQSBgVGltZVJhbmdlYCBvYmplY3RcbiAgICogICAgICAgICBpbmRpY2F0aW5nIHRoZSBjdXJyZW50IHJhbmdlcyBvZiB0aW1lIHRoYXQgY2FuIGJlIHNlZWtlZCB0by5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS1zZWVrYWJsZX1cbiAgICovXG4gICdzZWVrYWJsZScsXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGBlbmRlZGAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gYGVuZGVkYCBpbmRpY2F0ZXMgd2hldGhlclxuICAgKiB0aGUgbWVkaWEgaGFzIHJlYWNoZWQgdGhlIGVuZCBvciBub3QuXG4gICAqXG4gICAqIEBtZXRob2QgSHRtbDUjZW5kZWRcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICAtIFRoZSB2YWx1ZSBvZiBgZW5kZWRgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuXG4gICAqICAgICAgICAgLSBUcnVlIGluZGljYXRlcyB0aGF0IHRoZSBtZWRpYSBoYXMgZW5kZWQuXG4gICAqICAgICAgICAgLSBGYWxzZSBpbmRpY2F0ZXMgdGhhdCB0aGUgbWVkaWEgaGFzIG5vdCBlbmRlZC5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS1lbmRlZH1cbiAgICovXG4gICdlbmRlZCcsXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGBwbGF5YmFja1JhdGVgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIGBwbGF5YmFja1JhdGVgIGluZGljYXRlc1xuICAgKiB0aGUgcmF0ZSBhdCB3aGljaCB0aGUgbWVkaWEgaXMgY3VycmVudGx5IHBsYXlpbmcgYmFjay4gRXhhbXBsZXM6XG4gICAqICAgLSBpZiBwbGF5YmFja1JhdGUgaXMgc2V0IHRvIDIsIG1lZGlhIHdpbGwgcGxheSB0d2ljZSBhcyBmYXN0LlxuICAgKiAgIC0gaWYgcGxheWJhY2tSYXRlIGlzIHNldCB0byAwLjUsIG1lZGlhIHdpbGwgcGxheSBoYWxmIGFzIGZhc3QuXG4gICAqXG4gICAqIEBtZXRob2QgSHRtbDUjcGxheWJhY2tSYXRlXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICBUaGUgdmFsdWUgb2YgYHBsYXliYWNrUmF0ZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gQSBudW1iZXIgaW5kaWNhdGluZ1xuICAgKiAgICAgICAgIHRoZSBjdXJyZW50IHBsYXliYWNrIHNwZWVkIG9mIHRoZSBtZWRpYSwgd2hlcmUgMSBpcyBub3JtYWwgc3BlZWQuXG4gICAqXG4gICAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtcGxheWJhY2tyYXRlfVxuICAgKi9cbiAgJ3BsYXliYWNrUmF0ZScsXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGBkZWZhdWx0UGxheWJhY2tSYXRlYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgZGVmYXVsdFBsYXliYWNrUmF0ZWAgaW5kaWNhdGVzXG4gICAqIHRoZSByYXRlIGF0IHdoaWNoIHRoZSBtZWRpYSBpcyBjdXJyZW50bHkgcGxheWluZyBiYWNrLiBUaGlzIHZhbHVlIHdpbGwgbm90IGluZGljYXRlIHRoZSBjdXJyZW50XG4gICAqIGBwbGF5YmFja1JhdGVgIGFmdGVyIHBsYXliYWNrIGhhcyBzdGFydGVkLCB1c2Uge0BsaW5rIEh0bWw1I3BsYXliYWNrUmF0ZX0gZm9yIHRoYXQuXG4gICAqXG4gICAqIEV4YW1wbGVzOlxuICAgKiAgIC0gaWYgZGVmYXVsdFBsYXliYWNrUmF0ZSBpcyBzZXQgdG8gMiwgbWVkaWEgd2lsbCBwbGF5IHR3aWNlIGFzIGZhc3QuXG4gICAqICAgLSBpZiBkZWZhdWx0UGxheWJhY2tSYXRlIGlzIHNldCB0byAwLjUsIG1lZGlhIHdpbGwgcGxheSBoYWxmIGFzIGZhc3QuXG4gICAqXG4gICAqIEBtZXRob2QgSHRtbDUucHJvdG90eXBlLmRlZmF1bHRQbGF5YmFja1JhdGVcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIFRoZSB2YWx1ZSBvZiBgZGVmYXVsdFBsYXliYWNrUmF0ZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gQSBudW1iZXIgaW5kaWNhdGluZ1xuICAgKiAgICAgICAgIHRoZSBjdXJyZW50IHBsYXliYWNrIHNwZWVkIG9mIHRoZSBtZWRpYSwgd2hlcmUgMSBpcyBub3JtYWwgc3BlZWQuXG4gICAqXG4gICAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtcGxheWJhY2tyYXRlfVxuICAgKi9cbiAgJ2RlZmF1bHRQbGF5YmFja1JhdGUnLFxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvZiBgcGxheWVkYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgcGxheWVkYCByZXR1cm5zIGEgYFRpbWVSYW5nZWBcbiAgICogb2JqZWN0IHJlcHJlc2VudGluZyBwb2ludHMgaW4gdGhlIG1lZGlhIHRpbWVsaW5lIHRoYXQgaGF2ZSBiZWVuIHBsYXllZC5cbiAgICpcbiAgICogQG1ldGhvZCBIdG1sNSNwbGF5ZWRcbiAgICogQHJldHVybiB7VGltZVJhbmdlfVxuICAgKiAgICAgICAgIFRoZSB2YWx1ZSBvZiBgcGxheWVkYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBBIGBUaW1lUmFuZ2VgIG9iamVjdCBpbmRpY2F0aW5nXG4gICAqICAgICAgICAgdGhlIHJhbmdlcyBvZiB0aW1lIHRoYXQgaGF2ZSBiZWVuIHBsYXllZC5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS1wbGF5ZWR9XG4gICAqL1xuICAncGxheWVkJyxcbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb2YgYG5ldHdvcmtTdGF0ZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gYG5ldHdvcmtTdGF0ZWAgaW5kaWNhdGVzXG4gICAqIHRoZSBjdXJyZW50IG5ldHdvcmsgc3RhdGUuIEl0IHJldHVybnMgYW4gZW51bWVyYXRpb24gZnJvbSB0aGUgZm9sbG93aW5nIGxpc3Q6XG4gICAqIC0gMDogTkVUV09SS19FTVBUWVxuICAgKiAtIDE6IE5FVFdPUktfSURMRVxuICAgKiAtIDI6IE5FVFdPUktfTE9BRElOR1xuICAgKiAtIDM6IE5FVFdPUktfTk9fU09VUkNFXG4gICAqXG4gICAqIEBtZXRob2QgSHRtbDUjbmV0d29ya1N0YXRlXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICBUaGUgdmFsdWUgb2YgYG5ldHdvcmtTdGF0ZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gVGhpcyB3aWxsIGJlIGEgbnVtYmVyXG4gICAqICAgICAgICAgZnJvbSB0aGUgbGlzdCBpbiB0aGUgZGVzY3JpcHRpb24uXG4gICAqXG4gICAqIEBzZWUgW1NwZWNdIHtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjZG9tLW1lZGlhLW5ldHdvcmtzdGF0ZX1cbiAgICovXG4gICduZXR3b3JrU3RhdGUnLFxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvZiBgcmVhZHlTdGF0ZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gYHJlYWR5U3RhdGVgIGluZGljYXRlc1xuICAgKiB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgbWVkaWEgZWxlbWVudC4gSXQgcmV0dXJucyBhbiBlbnVtZXJhdGlvbiBmcm9tIHRoZVxuICAgKiBmb2xsb3dpbmcgbGlzdDpcbiAgICogLSAwOiBIQVZFX05PVEhJTkdcbiAgICogLSAxOiBIQVZFX01FVEFEQVRBXG4gICAqIC0gMjogSEFWRV9DVVJSRU5UX0RBVEFcbiAgICogLSAzOiBIQVZFX0ZVVFVSRV9EQVRBXG4gICAqIC0gNDogSEFWRV9FTk9VR0hfREFUQVxuICAgKlxuICAgKiBAbWV0aG9kIEh0bWw1I3JlYWR5U3RhdGVcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIFRoZSB2YWx1ZSBvZiBgcmVhZHlTdGF0ZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gVGhpcyB3aWxsIGJlIGEgbnVtYmVyXG4gICAqICAgICAgICAgZnJvbSB0aGUgbGlzdCBpbiB0aGUgZGVzY3JpcHRpb24uXG4gICAqXG4gICAqIEBzZWUgW1NwZWNdIHtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjcmVhZHktc3RhdGVzfVxuICAgKi9cbiAgJ3JlYWR5U3RhdGUnLFxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvZiBgdmlkZW9XaWR0aGAgZnJvbSB0aGUgdmlkZW8gZWxlbWVudC4gYHZpZGVvV2lkdGhgIGluZGljYXRlc1xuICAgKiB0aGUgY3VycmVudCB3aWR0aCBvZiB0aGUgdmlkZW8gaW4gY3NzIHBpeGVscy5cbiAgICpcbiAgICogQG1ldGhvZCBIdG1sNSN2aWRlb1dpZHRoXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICBUaGUgdmFsdWUgb2YgYHZpZGVvV2lkdGhgIGZyb20gdGhlIHZpZGVvIGVsZW1lbnQuIFRoaXMgd2lsbCBiZSBhIG51bWJlclxuICAgKiAgICAgICAgIGluIGNzcyBwaXhlbHMuXG4gICAqXG4gICAqIEBzZWUgW1NwZWNdIHtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjZG9tLXZpZGVvLXZpZGVvd2lkdGh9XG4gICAqL1xuICAndmlkZW9XaWR0aCcsXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGB2aWRlb0hlaWdodGAgZnJvbSB0aGUgdmlkZW8gZWxlbWVudC4gYHZpZGVvSGVpZ2h0YCBpbmRpY2F0ZXNcbiAgICogdGhlIGN1cnJlbnQgaGVpZ2h0IG9mIHRoZSB2aWRlbyBpbiBjc3MgcGl4ZWxzLlxuICAgKlxuICAgKiBAbWV0aG9kIEh0bWw1I3ZpZGVvSGVpZ2h0XG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICBUaGUgdmFsdWUgb2YgYHZpZGVvSGVpZ2h0YCBmcm9tIHRoZSB2aWRlbyBlbGVtZW50LiBUaGlzIHdpbGwgYmUgYSBudW1iZXJcbiAgICogICAgICAgICBpbiBjc3MgcGl4ZWxzLlxuICAgKlxuICAgKiBAc2VlIFtTcGVjXSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS12aWRlby12aWRlb3dpZHRofVxuICAgKi9cbiAgJ3ZpZGVvSGVpZ2h0J10uZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgIEh0bWw1LnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsX1twcm9wXTtcbiAgICB9O1xuICB9KTsgLy8gV3JhcCBuYXRpdmUgcHJvcGVydGllcyB3aXRoIGEgc2V0dGVyIGluIHRoaXMgZm9ybWF0OlxuICAvLyBzZXQgKyB0b1RpdGxlQ2FzZShuYW1lKVxuICAvLyBUaGUgbGlzdCBpcyBhcyBmb2xsb3dzOlxuICAvLyBzZXRWb2x1bWUsIHNldFNyYywgc2V0UG9zdGVyLCBzZXRQcmVsb2FkLCBzZXRQbGF5YmFja1JhdGUsIHNldERlZmF1bHRQbGF5YmFja1JhdGVcblxuICBbXG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlIG9mIGB2b2x1bWVgIG9uIHRoZSBtZWRpYSBlbGVtZW50LiBgdm9sdW1lYCBpbmRpY2F0ZXMgdGhlIGN1cnJlbnRcbiAgICogYXVkaW8gbGV2ZWwgYXMgYSBwZXJjZW50YWdlIGluIGRlY2ltYWwgZm9ybS4gVGhpcyBtZWFucyB0aGF0IDEgaXMgMTAwJSwgMC41IGlzIDUwJSwgYW5kXG4gICAqIHNvIG9uLlxuICAgKlxuICAgKiBAbWV0aG9kIEh0bWw1I3NldFZvbHVtZVxuICAgKiBAcGFyYW0ge251bWJlcn0gcGVyY2VudEFzRGVjaW1hbFxuICAgKiAgICAgICAgVGhlIHZvbHVtZSBwZXJjZW50IGFzIGEgZGVjaW1hbC4gVmFsaWQgcmFuZ2UgaXMgZnJvbSAwLTEuXG4gICAqXG4gICAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tYS12b2x1bWV9XG4gICAqL1xuICAndm9sdW1lJyxcbiAgLyoqXG4gICAqIFNldCB0aGUgdmFsdWUgb2YgYHNyY2Agb24gdGhlIG1lZGlhIGVsZW1lbnQuIGBzcmNgIGluZGljYXRlcyB0aGUgY3VycmVudFxuICAgKiB7QGxpbmsgVGVjaH5Tb3VyY2VPYmplY3R9IGZvciB0aGUgbWVkaWEuXG4gICAqXG4gICAqIEBtZXRob2QgSHRtbDUjc2V0U3JjXG4gICAqIEBwYXJhbSB7VGVjaH5Tb3VyY2VPYmplY3R9IHNyY1xuICAgKiAgICAgICAgVGhlIHNvdXJjZSBvYmplY3QgdG8gc2V0IGFzIHRoZSBjdXJyZW50IHNvdXJjZS5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS1zcmN9XG4gICAqL1xuICAnc3JjJyxcbiAgLyoqXG4gICAqIFNldCB0aGUgdmFsdWUgb2YgYHBvc3RlcmAgb24gdGhlIG1lZGlhIGVsZW1lbnQuIGBwb3N0ZXJgIGlzIHRoZSB1cmwgdG9cbiAgICogYW4gaW1hZ2UgZmlsZSB0aGF0IGNhbi93aWxsIGJlIHNob3duIHdoZW4gbm8gbWVkaWEgZGF0YSBpcyBhdmFpbGFibGUuXG4gICAqXG4gICAqIEBtZXRob2QgSHRtbDUjc2V0UG9zdGVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwb3N0ZXJcbiAgICogICAgICAgIFRoZSB1cmwgdG8gYW4gaW1hZ2UgdGhhdCBzaG91bGQgYmUgdXNlZCBhcyB0aGUgYHBvc3RlcmAgZm9yIHRoZSBtZWRpYVxuICAgKiAgICAgICAgZWxlbWVudC5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2F0dHItbWVkaWEtcG9zdGVyfVxuICAgKi9cbiAgJ3Bvc3RlcicsXG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlIG9mIGBwcmVsb2FkYCBvbiB0aGUgbWVkaWEgZWxlbWVudC4gYHByZWxvYWRgIGluZGljYXRlc1xuICAgKiB3aGF0IHNob3VsZCBkb3dubG9hZCBiZWZvcmUgdGhlIG1lZGlhIGlzIGludGVyYWN0ZWQgd2l0aC4gSXQgY2FuIGhhdmUgdGhlIGZvbGxvd2luZ1xuICAgKiB2YWx1ZXM6XG4gICAqIC0gbm9uZTogbm90aGluZyBzaG91bGQgYmUgZG93bmxvYWRlZFxuICAgKiAtIG1ldGFkYXRhOiBwb3N0ZXIgYW5kIHRoZSBmaXJzdCBmZXcgZnJhbWVzIG9mIHRoZSBtZWRpYSBtYXkgYmUgZG93bmxvYWRlZCB0byBnZXRcbiAgICogICBtZWRpYSBkaW1lbnNpb25zIGFuZCBvdGhlciBtZXRhZGF0YVxuICAgKiAtIGF1dG86IGFsbG93IHRoZSBtZWRpYSBhbmQgbWV0YWRhdGEgZm9yIHRoZSBtZWRpYSB0byBiZSBkb3dubG9hZGVkIGJlZm9yZVxuICAgKiAgICBpbnRlcmFjdGlvblxuICAgKlxuICAgKiBAbWV0aG9kIEh0bWw1I3NldFByZWxvYWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByZWxvYWRcbiAgICogICAgICAgICBUaGUgdmFsdWUgb2YgYHByZWxvYWRgIHRvIHNldCBvbiB0aGUgbWVkaWEgZWxlbWVudC4gTXVzdCBiZSAnbm9uZScsICdtZXRhZGF0YScsXG4gICAqICAgICAgICAgb3IgJ2F1dG8nLlxuICAgKlxuICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjYXR0ci1tZWRpYS1wcmVsb2FkfVxuICAgKi9cbiAgJ3ByZWxvYWQnLFxuICAvKipcbiAgICogU2V0IHRoZSB2YWx1ZSBvZiBgcGxheWJhY2tSYXRlYCBvbiB0aGUgbWVkaWEgZWxlbWVudC4gYHBsYXliYWNrUmF0ZWAgaW5kaWNhdGVzXG4gICAqIHRoZSByYXRlIGF0IHdoaWNoIHRoZSBtZWRpYSBzaG91bGQgcGxheSBiYWNrLiBFeGFtcGxlczpcbiAgICogICAtIGlmIHBsYXliYWNrUmF0ZSBpcyBzZXQgdG8gMiwgbWVkaWEgd2lsbCBwbGF5IHR3aWNlIGFzIGZhc3QuXG4gICAqICAgLSBpZiBwbGF5YmFja1JhdGUgaXMgc2V0IHRvIDAuNSwgbWVkaWEgd2lsbCBwbGF5IGhhbGYgYXMgZmFzdC5cbiAgICpcbiAgICogQG1ldGhvZCBIdG1sNSNzZXRQbGF5YmFja1JhdGVcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIFRoZSB2YWx1ZSBvZiBgcGxheWJhY2tSYXRlYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBBIG51bWJlciBpbmRpY2F0aW5nXG4gICAqICAgICAgICAgdGhlIGN1cnJlbnQgcGxheWJhY2sgc3BlZWQgb2YgdGhlIG1lZGlhLCB3aGVyZSAxIGlzIG5vcm1hbCBzcGVlZC5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS1wbGF5YmFja3JhdGV9XG4gICAqL1xuICAncGxheWJhY2tSYXRlJyxcbiAgLyoqXG4gICAqIFNldCB0aGUgdmFsdWUgb2YgYGRlZmF1bHRQbGF5YmFja1JhdGVgIG9uIHRoZSBtZWRpYSBlbGVtZW50LiBgZGVmYXVsdFBsYXliYWNrUmF0ZWAgaW5kaWNhdGVzXG4gICAqIHRoZSByYXRlIGF0IHdoaWNoIHRoZSBtZWRpYSBzaG91bGQgcGxheSBiYWNrIHVwb24gaW5pdGlhbCBzdGFydHVwLiBDaGFuZ2luZyB0aGlzIHZhbHVlXG4gICAqIGFmdGVyIGEgdmlkZW8gaGFzIHN0YXJ0ZWQgd2lsbCBkbyBub3RoaW5nLiBJbnN0ZWFkIHlvdSBzaG91bGQgdXNlZCB7QGxpbmsgSHRtbDUjc2V0UGxheWJhY2tSYXRlfS5cbiAgICpcbiAgICogRXhhbXBsZSBWYWx1ZXM6XG4gICAqICAgLSBpZiBwbGF5YmFja1JhdGUgaXMgc2V0IHRvIDIsIG1lZGlhIHdpbGwgcGxheSB0d2ljZSBhcyBmYXN0LlxuICAgKiAgIC0gaWYgcGxheWJhY2tSYXRlIGlzIHNldCB0byAwLjUsIG1lZGlhIHdpbGwgcGxheSBoYWxmIGFzIGZhc3QuXG4gICAqXG4gICAqIEBtZXRob2QgSHRtbDUucHJvdG90eXBlLnNldERlZmF1bHRQbGF5YmFja1JhdGVcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIFRoZSB2YWx1ZSBvZiBgZGVmYXVsdFBsYXliYWNrUmF0ZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gQSBudW1iZXIgaW5kaWNhdGluZ1xuICAgKiAgICAgICAgIHRoZSBjdXJyZW50IHBsYXliYWNrIHNwZWVkIG9mIHRoZSBtZWRpYSwgd2hlcmUgMSBpcyBub3JtYWwgc3BlZWQuXG4gICAqXG4gICAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtZGVmYXVsdHBsYXliYWNrcmF0ZX1cbiAgICovXG4gICdkZWZhdWx0UGxheWJhY2tSYXRlJ10uZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgIEh0bWw1LnByb3RvdHlwZVsnc2V0JyArIHRvVGl0bGVDYXNlKHByb3ApXSA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICB0aGlzLmVsX1twcm9wXSA9IHY7XG4gICAgfTtcbiAgfSk7IC8vIHdyYXAgbmF0aXZlIGZ1bmN0aW9ucyB3aXRoIGEgZnVuY3Rpb25cbiAgLy8gVGhlIGxpc3QgaXMgYXMgZm9sbG93czpcbiAgLy8gcGF1c2UsIGxvYWQsIHBsYXlcblxuICBbXG4gIC8qKlxuICAgKiBBIHdyYXBwZXIgYXJvdW5kIHRoZSBtZWRpYSBlbGVtZW50cyBgcGF1c2VgIGZ1bmN0aW9uLiBUaGlzIHdpbGwgY2FsbCB0aGUgYEhUTUw1YFxuICAgKiBtZWRpYSBlbGVtZW50cyBgcGF1c2VgIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAbWV0aG9kIEh0bWw1I3BhdXNlXG4gICAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtcGF1c2V9XG4gICAqL1xuICAncGF1c2UnLFxuICAvKipcbiAgICogQSB3cmFwcGVyIGFyb3VuZCB0aGUgbWVkaWEgZWxlbWVudHMgYGxvYWRgIGZ1bmN0aW9uLiBUaGlzIHdpbGwgY2FsbCB0aGUgYEhUTUw1YHNcbiAgICogbWVkaWEgZWxlbWVudCBgbG9hZGAgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBtZXRob2QgSHRtbDUjbG9hZFxuICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjZG9tLW1lZGlhLWxvYWR9XG4gICAqL1xuICAnbG9hZCcsXG4gIC8qKlxuICAgKiBBIHdyYXBwZXIgYXJvdW5kIHRoZSBtZWRpYSBlbGVtZW50cyBgcGxheWAgZnVuY3Rpb24uIFRoaXMgd2lsbCBjYWxsIHRoZSBgSFRNTDVgc1xuICAgKiBtZWRpYSBlbGVtZW50IGBwbGF5YCBmdW5jdGlvbi5cbiAgICpcbiAgICogQG1ldGhvZCBIdG1sNSNwbGF5XG4gICAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtcGxheX1cbiAgICovXG4gICdwbGF5J10uZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgIEh0bWw1LnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsX1twcm9wXSgpO1xuICAgIH07XG4gIH0pO1xuICBUZWNoLndpdGhTb3VyY2VIYW5kbGVycyhIdG1sNSk7XG4gIC8qKlxuICAgKiBOYXRpdmUgc291cmNlIGhhbmRsZXIgZm9yIEh0bWw1LCBzaW1wbHkgcGFzc2VzIHRoZSBzb3VyY2UgdG8gdGhlIG1lZGlhIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7VGVjaH5Tb3VyY2VPYmplY3R9IHNvdXJjZVxuICAgKiAgICAgICAgVGhlIHNvdXJjZSBvYmplY3RcbiAgICpcbiAgICogQHByb3BlcnR5IHtIdG1sNX0gdGVjaFxuICAgKiAgICAgICAgVGhlIGluc3RhbmNlIG9mIHRoZSBIVE1MNSB0ZWNoLlxuICAgKi9cblxuICBIdG1sNS5uYXRpdmVTb3VyY2VIYW5kbGVyID0ge307XG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgbWVkaWEgZWxlbWVudCBjYW4gcGxheSB0aGUgZ2l2ZW4gbWltZSB0eXBlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICAgKiAgICAgICAgVGhlIG1pbWV0eXBlIHRvIGNoZWNrXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICAncHJvYmFibHknLCAnbWF5YmUnLCBvciAnJyAoZW1wdHkgc3RyaW5nKVxuICAgKi9cblxuICBIdG1sNS5uYXRpdmVTb3VyY2VIYW5kbGVyLmNhblBsYXlUeXBlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAvLyBJRSB3aXRob3V0IE1lZGlhUGxheWVyIHRocm93cyBhbiBlcnJvciAoIzUxOSlcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEh0bWw1LlRFU1RfVklELmNhblBsYXlUeXBlKHR5cGUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH07XG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgbWVkaWEgZWxlbWVudCBjYW4gaGFuZGxlIGEgc291cmNlIG5hdGl2ZWx5LlxuICAgKlxuICAgKiBAcGFyYW0ge1RlY2h+U291cmNlT2JqZWN0fSBzb3VyY2VcbiAgICogICAgICAgICBUaGUgc291cmNlIG9iamVjdFxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqICAgICAgICAgT3B0aW9ucyB0byBiZSBwYXNzZWQgdG8gdGhlIHRlY2guXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICAncHJvYmFibHknLCAnbWF5YmUnLCBvciAnJyAoZW1wdHkgc3RyaW5nKS5cbiAgICovXG5cblxuICBIdG1sNS5uYXRpdmVTb3VyY2VIYW5kbGVyLmNhbkhhbmRsZVNvdXJjZSA9IGZ1bmN0aW9uIChzb3VyY2UsIG9wdGlvbnMpIHtcbiAgICAvLyBJZiBhIHR5cGUgd2FzIHByb3ZpZGVkIHdlIHNob3VsZCByZWx5IG9uIHRoYXRcbiAgICBpZiAoc291cmNlLnR5cGUpIHtcbiAgICAgIHJldHVybiBIdG1sNS5uYXRpdmVTb3VyY2VIYW5kbGVyLmNhblBsYXlUeXBlKHNvdXJjZS50eXBlKTsgLy8gSWYgbm8gdHlwZSwgZmFsbCBiYWNrIHRvIGNoZWNraW5nICd2aWRlby9bRVhURU5TSU9OXSdcbiAgICB9IGVsc2UgaWYgKHNvdXJjZS5zcmMpIHtcbiAgICAgIHZhciBleHQgPSBnZXRGaWxlRXh0ZW5zaW9uKHNvdXJjZS5zcmMpO1xuICAgICAgcmV0dXJuIEh0bWw1Lm5hdGl2ZVNvdXJjZUhhbmRsZXIuY2FuUGxheVR5cGUoXCJ2aWRlby9cIiArIGV4dCk7XG4gICAgfVxuXG4gICAgcmV0dXJuICcnO1xuICB9O1xuICAvKipcbiAgICogUGFzcyB0aGUgc291cmNlIHRvIHRoZSBuYXRpdmUgbWVkaWEgZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtUZWNoflNvdXJjZU9iamVjdH0gc291cmNlXG4gICAqICAgICAgICBUaGUgc291cmNlIG9iamVjdFxuICAgKlxuICAgKiBAcGFyYW0ge0h0bWw1fSB0ZWNoXG4gICAqICAgICAgICBUaGUgaW5zdGFuY2Ugb2YgdGhlIEh0bWw1IHRlY2hcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgVGhlIG9wdGlvbnMgdG8gcGFzcyB0byB0aGUgc291cmNlXG4gICAqL1xuXG5cbiAgSHRtbDUubmF0aXZlU291cmNlSGFuZGxlci5oYW5kbGVTb3VyY2UgPSBmdW5jdGlvbiAoc291cmNlLCB0ZWNoLCBvcHRpb25zKSB7XG4gICAgdGVjaC5zZXRTcmMoc291cmNlLnNyYyk7XG4gIH07XG4gIC8qKlxuICAgKiBBIG5vb3AgZm9yIHRoZSBuYXRpdmUgZGlzcG9zZSBmdW5jdGlvbiwgYXMgY2xlYW51cCBpcyBub3QgbmVlZGVkLlxuICAgKi9cblxuXG4gIEh0bWw1Lm5hdGl2ZVNvdXJjZUhhbmRsZXIuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHt9OyAvLyBSZWdpc3RlciB0aGUgbmF0aXZlIHNvdXJjZSBoYW5kbGVyXG5cblxuICBIdG1sNS5yZWdpc3RlclNvdXJjZUhhbmRsZXIoSHRtbDUubmF0aXZlU291cmNlSGFuZGxlcik7XG4gIFRlY2gucmVnaXN0ZXJUZWNoKCdIdG1sNScsIEh0bWw1KTtcblxuICBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QkMigpIHtcbiAgICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWxMb29zZShbXCJcXG4gICAgICAgIFVzaW5nIHRoZSB0ZWNoIGRpcmVjdGx5IGNhbiBiZSBkYW5nZXJvdXMuIEkgaG9wZSB5b3Uga25vdyB3aGF0IHlvdSdyZSBkb2luZy5cXG4gICAgICAgIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdmlkZW9qcy92aWRlby5qcy9pc3N1ZXMvMjYxNyBmb3IgbW9yZSBpbmZvLlxcbiAgICAgIFwiXSk7XG5cbiAgICBfdGVtcGxhdGVPYmplY3QkMiA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdCgpIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH07XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICAvLyBvbiB0aGUgcGxheWVyIHdoZW4gdGhleSBoYXBwZW5cblxuICB2YXIgVEVDSF9FVkVOVFNfUkVUUklHR0VSID0gW1xuICAvKipcbiAgICogRmlyZWQgd2hpbGUgdGhlIHVzZXIgYWdlbnQgaXMgZG93bmxvYWRpbmcgbWVkaWEgZGF0YS5cbiAgICpcbiAgICogQGV2ZW50IFBsYXllciNwcm9ncmVzc1xuICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAqL1xuXG4gIC8qKlxuICAgKiBSZXRyaWdnZXIgdGhlIGBwcm9ncmVzc2AgZXZlbnQgdGhhdCB3YXMgdHJpZ2dlcmVkIGJ5IHRoZSB7QGxpbmsgVGVjaH0uXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgUGxheWVyI2hhbmRsZVRlY2hQcm9ncmVzc19cbiAgICogQGZpcmVzIFBsYXllciNwcm9ncmVzc1xuICAgKiBAbGlzdGVucyBUZWNoI3Byb2dyZXNzXG4gICAqL1xuICAncHJvZ3Jlc3MnLFxuICAvKipcbiAgICogRmlyZXMgd2hlbiB0aGUgbG9hZGluZyBvZiBhbiBhdWRpby92aWRlbyBpcyBhYm9ydGVkLlxuICAgKlxuICAgKiBAZXZlbnQgUGxheWVyI2Fib3J0XG4gICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICovXG5cbiAgLyoqXG4gICAqIFJldHJpZ2dlciB0aGUgYGFib3J0YCBldmVudCB0aGF0IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIHtAbGluayBUZWNofS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1ldGhvZCBQbGF5ZXIjaGFuZGxlVGVjaEFib3J0X1xuICAgKiBAZmlyZXMgUGxheWVyI2Fib3J0XG4gICAqIEBsaXN0ZW5zIFRlY2gjYWJvcnRcbiAgICovXG4gICdhYm9ydCcsXG4gIC8qKlxuICAgKiBGaXJlcyB3aGVuIHRoZSBicm93c2VyIGlzIGludGVudGlvbmFsbHkgbm90IGdldHRpbmcgbWVkaWEgZGF0YS5cbiAgICpcbiAgICogQGV2ZW50IFBsYXllciNzdXNwZW5kXG4gICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICovXG5cbiAgLyoqXG4gICAqIFJldHJpZ2dlciB0aGUgYHN1c3BlbmRgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIFBsYXllciNoYW5kbGVUZWNoU3VzcGVuZF9cbiAgICogQGZpcmVzIFBsYXllciNzdXNwZW5kXG4gICAqIEBsaXN0ZW5zIFRlY2gjc3VzcGVuZFxuICAgKi9cbiAgJ3N1c3BlbmQnLFxuICAvKipcbiAgICogRmlyZXMgd2hlbiB0aGUgY3VycmVudCBwbGF5bGlzdCBpcyBlbXB0eS5cbiAgICpcbiAgICogQGV2ZW50IFBsYXllciNlbXB0aWVkXG4gICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICovXG5cbiAgLyoqXG4gICAqIFJldHJpZ2dlciB0aGUgYGVtcHRpZWRgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIFBsYXllciNoYW5kbGVUZWNoRW1wdGllZF9cbiAgICogQGZpcmVzIFBsYXllciNlbXB0aWVkXG4gICAqIEBsaXN0ZW5zIFRlY2gjZW1wdGllZFxuICAgKi9cbiAgJ2VtcHRpZWQnLFxuICAvKipcbiAgICogRmlyZXMgd2hlbiB0aGUgYnJvd3NlciBpcyB0cnlpbmcgdG8gZ2V0IG1lZGlhIGRhdGEsIGJ1dCBkYXRhIGlzIG5vdCBhdmFpbGFibGUuXG4gICAqXG4gICAqIEBldmVudCBQbGF5ZXIjc3RhbGxlZFxuICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAqL1xuXG4gIC8qKlxuICAgKiBSZXRyaWdnZXIgdGhlIGBzdGFsbGVkYCBldmVudCB0aGF0IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIHtAbGluayBUZWNofS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1ldGhvZCBQbGF5ZXIjaGFuZGxlVGVjaFN0YWxsZWRfXG4gICAqIEBmaXJlcyBQbGF5ZXIjc3RhbGxlZFxuICAgKiBAbGlzdGVucyBUZWNoI3N0YWxsZWRcbiAgICovXG4gICdzdGFsbGVkJyxcbiAgLyoqXG4gICAqIEZpcmVzIHdoZW4gdGhlIGJyb3dzZXIgaGFzIGxvYWRlZCBtZXRhIGRhdGEgZm9yIHRoZSBhdWRpby92aWRlby5cbiAgICpcbiAgICogQGV2ZW50IFBsYXllciNsb2FkZWRtZXRhZGF0YVxuICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAqL1xuXG4gIC8qKlxuICAgKiBSZXRyaWdnZXIgdGhlIGBzdGFsbGVkYCBldmVudCB0aGF0IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIHtAbGluayBUZWNofS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1ldGhvZCBQbGF5ZXIjaGFuZGxlVGVjaExvYWRlZG1ldGFkYXRhX1xuICAgKiBAZmlyZXMgUGxheWVyI2xvYWRlZG1ldGFkYXRhXG4gICAqIEBsaXN0ZW5zIFRlY2gjbG9hZGVkbWV0YWRhdGFcbiAgICovXG4gICdsb2FkZWRtZXRhZGF0YScsXG4gIC8qKlxuICAgKiBGaXJlcyB3aGVuIHRoZSBicm93c2VyIGhhcyBsb2FkZWQgdGhlIGN1cnJlbnQgZnJhbWUgb2YgdGhlIGF1ZGlvL3ZpZGVvLlxuICAgKlxuICAgKiBAZXZlbnQgUGxheWVyI2xvYWRlZGRhdGFcbiAgICogQHR5cGUge2V2ZW50fVxuICAgKi9cblxuICAvKipcbiAgICogUmV0cmlnZ2VyIHRoZSBgbG9hZGVkZGF0YWAgZXZlbnQgdGhhdCB3YXMgdHJpZ2dlcmVkIGJ5IHRoZSB7QGxpbmsgVGVjaH0uXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgUGxheWVyI2hhbmRsZVRlY2hMb2FkZGVkZGF0YV9cbiAgICogQGZpcmVzIFBsYXllciNsb2FkZWRkYXRhXG4gICAqIEBsaXN0ZW5zIFRlY2gjbG9hZGVkZGF0YVxuICAgKi9cbiAgJ2xvYWRlZGRhdGEnLFxuICAvKipcbiAgICogRmlyZXMgd2hlbiB0aGUgY3VycmVudCBwbGF5YmFjayBwb3NpdGlvbiBoYXMgY2hhbmdlZC5cbiAgICpcbiAgICogQGV2ZW50IFBsYXllciN0aW1ldXBkYXRlXG4gICAqIEB0eXBlIHtldmVudH1cbiAgICovXG5cbiAgLyoqXG4gICAqIFJldHJpZ2dlciB0aGUgYHRpbWV1cGRhdGVgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIFBsYXllciNoYW5kbGVUZWNoVGltZVVwZGF0ZV9cbiAgICogQGZpcmVzIFBsYXllciN0aW1ldXBkYXRlXG4gICAqIEBsaXN0ZW5zIFRlY2gjdGltZXVwZGF0ZVxuICAgKi9cbiAgJ3RpbWV1cGRhdGUnLFxuICAvKipcbiAgICogRmlyZXMgd2hlbiB0aGUgdmlkZW8ncyBpbnRyaW5zaWMgZGltZW5zaW9ucyBjaGFuZ2VcbiAgICpcbiAgICogQGV2ZW50IFBsYXllciNyZXNpemVcbiAgICogQHR5cGUge2V2ZW50fVxuICAgKi9cblxuICAvKipcbiAgICogUmV0cmlnZ2VyIHRoZSBgcmVzaXplYCBldmVudCB0aGF0IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIHtAbGluayBUZWNofS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1ldGhvZCBQbGF5ZXIjaGFuZGxlVGVjaFJlc2l6ZV9cbiAgICogQGZpcmVzIFBsYXllciNyZXNpemVcbiAgICogQGxpc3RlbnMgVGVjaCNyZXNpemVcbiAgICovXG4gICdyZXNpemUnLFxuICAvKipcbiAgICogRmlyZXMgd2hlbiB0aGUgdm9sdW1lIGhhcyBiZWVuIGNoYW5nZWRcbiAgICpcbiAgICogQGV2ZW50IFBsYXllciN2b2x1bWVjaGFuZ2VcbiAgICogQHR5cGUge2V2ZW50fVxuICAgKi9cblxuICAvKipcbiAgICogUmV0cmlnZ2VyIHRoZSBgdm9sdW1lY2hhbmdlYCBldmVudCB0aGF0IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIHtAbGluayBUZWNofS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1ldGhvZCBQbGF5ZXIjaGFuZGxlVGVjaFZvbHVtZWNoYW5nZV9cbiAgICogQGZpcmVzIFBsYXllciN2b2x1bWVjaGFuZ2VcbiAgICogQGxpc3RlbnMgVGVjaCN2b2x1bWVjaGFuZ2VcbiAgICovXG4gICd2b2x1bWVjaGFuZ2UnLFxuICAvKipcbiAgICogRmlyZXMgd2hlbiB0aGUgdGV4dCB0cmFjayBoYXMgYmVlbiBjaGFuZ2VkXG4gICAqXG4gICAqIEBldmVudCBQbGF5ZXIjdGV4dHRyYWNrY2hhbmdlXG4gICAqIEB0eXBlIHtldmVudH1cbiAgICovXG5cbiAgLyoqXG4gICAqIFJldHJpZ2dlciB0aGUgYHRleHR0cmFja2NoYW5nZWAgZXZlbnQgdGhhdCB3YXMgdHJpZ2dlcmVkIGJ5IHRoZSB7QGxpbmsgVGVjaH0uXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgUGxheWVyI2hhbmRsZVRlY2hUZXh0dHJhY2tjaGFuZ2VfXG4gICAqIEBmaXJlcyBQbGF5ZXIjdGV4dHRyYWNrY2hhbmdlXG4gICAqIEBsaXN0ZW5zIFRlY2gjdGV4dHRyYWNrY2hhbmdlXG4gICAqL1xuICAndGV4dHRyYWNrY2hhbmdlJ107IC8vIGV2ZW50cyB0byBxdWV1ZSB3aGVuIHBsYXliYWNrIHJhdGUgaXMgemVyb1xuICAvLyB0aGlzIGlzIGEgaGFzaCBmb3IgdGhlIHNvbGUgcHVycG9zZSBvZiBtYXBwaW5nIG5vbi1jYW1lbC1jYXNlZCBldmVudCBuYW1lc1xuICAvLyB0byBjYW1lbC1jYXNlZCBmdW5jdGlvbiBuYW1lc1xuXG4gIHZhciBURUNIX0VWRU5UU19RVUVVRSA9IHtcbiAgICBjYW5wbGF5OiAnQ2FuUGxheScsXG4gICAgY2FucGxheXRocm91Z2g6ICdDYW5QbGF5VGhyb3VnaCcsXG4gICAgcGxheWluZzogJ1BsYXlpbmcnLFxuICAgIHNlZWtlZDogJ1NlZWtlZCdcbiAgfTtcbiAgdmFyIEJSRUFLUE9JTlRfT1JERVIgPSBbJ3RpbnknLCAneHNtYWxsJywgJ3NtYWxsJywgJ21lZGl1bScsICdsYXJnZScsICd4bGFyZ2UnLCAnaHVnZSddO1xuICB2YXIgQlJFQUtQT0lOVF9DTEFTU0VTID0ge307IC8vIGdyZXA6IHZqcy1sYXlvdXQtdGlueVxuICAvLyBncmVwOiB2anMtbGF5b3V0LXgtc21hbGxcbiAgLy8gZ3JlcDogdmpzLWxheW91dC1zbWFsbFxuICAvLyBncmVwOiB2anMtbGF5b3V0LW1lZGl1bVxuICAvLyBncmVwOiB2anMtbGF5b3V0LWxhcmdlXG4gIC8vIGdyZXA6IHZqcy1sYXlvdXQteC1sYXJnZVxuICAvLyBncmVwOiB2anMtbGF5b3V0LWh1Z2VcblxuICBCUkVBS1BPSU5UX09SREVSLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICB2YXIgdiA9IGsuY2hhckF0KDApID09PSAneCcgPyBcIngtXCIgKyBrLnN1YnN0cmluZygxKSA6IGs7XG4gICAgQlJFQUtQT0lOVF9DTEFTU0VTW2tdID0gXCJ2anMtbGF5b3V0LVwiICsgdjtcbiAgfSk7XG4gIHZhciBERUZBVUxUX0JSRUFLUE9JTlRTID0ge1xuICAgIHRpbnk6IDIxMCxcbiAgICB4c21hbGw6IDMyMCxcbiAgICBzbWFsbDogNDI1LFxuICAgIG1lZGl1bTogNzY4LFxuICAgIGxhcmdlOiAxNDQwLFxuICAgIHhsYXJnZTogMjU2MCxcbiAgICBodWdlOiBJbmZpbml0eVxuICB9O1xuICAvKipcbiAgICogQW4gaW5zdGFuY2Ugb2YgdGhlIGBQbGF5ZXJgIGNsYXNzIGlzIGNyZWF0ZWQgd2hlbiBhbnkgb2YgdGhlIFZpZGVvLmpzIHNldHVwIG1ldGhvZHNcbiAgICogYXJlIHVzZWQgdG8gaW5pdGlhbGl6ZSBhIHZpZGVvLlxuICAgKlxuICAgKiBBZnRlciBhbiBpbnN0YW5jZSBoYXMgYmVlbiBjcmVhdGVkIGl0IGNhbiBiZSBhY2Nlc3NlZCBnbG9iYWxseSBpbiB0d28gd2F5czpcbiAgICogMS4gQnkgY2FsbGluZyBgdmlkZW9qcygnZXhhbXBsZV92aWRlb18xJyk7YFxuICAgKiAyLiBCeSB1c2luZyBpdCBkaXJlY3RseSB2aWEgIGB2aWRlb2pzLnBsYXllcnMuZXhhbXBsZV92aWRlb18xO2BcbiAgICpcbiAgICogQGV4dGVuZHMgQ29tcG9uZW50XG4gICAqL1xuXG4gIHZhciBQbGF5ZXIgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoUGxheWVyLCBfQ29tcG9uZW50KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSB0YWdcbiAgICAgKiAgICAgICAgVGhlIG9yaWdpbmFsIHZpZGVvIERPTSBlbGVtZW50IHVzZWQgZm9yIGNvbmZpZ3VyaW5nIG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogICAgICAgIE9iamVjdCBvZiBvcHRpb24gbmFtZXMgYW5kIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Q29tcG9uZW50flJlYWR5Q2FsbGJhY2t9IFtyZWFkeV1cbiAgICAgKiAgICAgICAgUmVhZHkgY2FsbGJhY2sgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gUGxheWVyKHRhZywgb3B0aW9ucywgcmVhZHkpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgLy8gTWFrZSBzdXJlIHRhZyBJRCBleGlzdHNcbiAgICAgIHRhZy5pZCA9IHRhZy5pZCB8fCBvcHRpb25zLmlkIHx8IFwidmpzX3ZpZGVvX1wiICsgbmV3R1VJRCgpOyAvLyBTZXQgT3B0aW9uc1xuICAgICAgLy8gVGhlIG9wdGlvbnMgYXJndW1lbnQgb3ZlcnJpZGVzIG9wdGlvbnMgc2V0IGluIHRoZSB2aWRlbyB0YWdcbiAgICAgIC8vIHdoaWNoIG92ZXJyaWRlcyBnbG9iYWxseSBzZXQgb3B0aW9ucy5cbiAgICAgIC8vIFRoaXMgbGF0dGVyIHBhcnQgY29pbmNpZGVzIHdpdGggdGhlIGxvYWQgb3JkZXJcbiAgICAgIC8vICh0YWcgbXVzdCBleGlzdCBiZWZvcmUgUGxheWVyKVxuXG4gICAgICBvcHRpb25zID0gYXNzaWduKFBsYXllci5nZXRUYWdTZXR0aW5ncyh0YWcpLCBvcHRpb25zKTsgLy8gRGVsYXkgdGhlIGluaXRpYWxpemF0aW9uIG9mIGNoaWxkcmVuIGJlY2F1c2Ugd2UgbmVlZCB0byBzZXQgdXBcbiAgICAgIC8vIHBsYXllciBwcm9wZXJ0aWVzIGZpcnN0LCBhbmQgY2FuJ3QgdXNlIGB0aGlzYCBiZWZvcmUgYHN1cGVyKClgXG5cbiAgICAgIG9wdGlvbnMuaW5pdENoaWxkcmVuID0gZmFsc2U7IC8vIFNhbWUgd2l0aCBjcmVhdGluZyB0aGUgZWxlbWVudFxuXG4gICAgICBvcHRpb25zLmNyZWF0ZUVsID0gZmFsc2U7IC8vIGRvbid0IGF1dG8gbWl4aW4gdGhlIGV2ZW50ZWQgbWl4aW5cblxuICAgICAgb3B0aW9ucy5ldmVudGVkID0gZmFsc2U7IC8vIHdlIGRvbid0IHdhbnQgdGhlIHBsYXllciB0byByZXBvcnQgdG91Y2ggYWN0aXZpdHkgb24gaXRzZWxmXG4gICAgICAvLyBzZWUgZW5hYmxlVG91Y2hBY3Rpdml0eSBpbiBDb21wb25lbnRcblxuICAgICAgb3B0aW9ucy5yZXBvcnRUb3VjaEFjdGl2aXR5ID0gZmFsc2U7IC8vIElmIGxhbmd1YWdlIGlzIG5vdCBzZXQsIGdldCB0aGUgY2xvc2VzdCBsYW5nIGF0dHJpYnV0ZVxuXG4gICAgICBpZiAoIW9wdGlvbnMubGFuZ3VhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0YWcuY2xvc2VzdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHZhciBjbG9zZXN0ID0gdGFnLmNsb3Nlc3QoJ1tsYW5nXScpO1xuXG4gICAgICAgICAgaWYgKGNsb3Nlc3QgJiYgY2xvc2VzdC5nZXRBdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgIG9wdGlvbnMubGFuZ3VhZ2UgPSBjbG9zZXN0LmdldEF0dHJpYnV0ZSgnbGFuZycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgZWxlbWVudCA9IHRhZztcblxuICAgICAgICAgIHdoaWxlIChlbGVtZW50ICYmIGVsZW1lbnQubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgIGlmIChnZXRBdHRyaWJ1dGVzKGVsZW1lbnQpLmhhc093blByb3BlcnR5KCdsYW5nJykpIHtcbiAgICAgICAgICAgICAgb3B0aW9ucy5sYW5ndWFnZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdsYW5nJyk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSAvLyBSdW4gYmFzZSBjb21wb25lbnQgaW5pdGlhbGl6aW5nIHdpdGggbmV3IG9wdGlvbnNcblxuXG4gICAgICBfdGhpcyA9IF9Db21wb25lbnQuY2FsbCh0aGlzLCBudWxsLCBvcHRpb25zLCByZWFkeSkgfHwgdGhpczsgLy8gQ3JlYXRlIGJvdW5kIG1ldGhvZHMgZm9yIGRvY3VtZW50IGxpc3RlbmVycy5cblxuICAgICAgX3RoaXMuYm91bmREb2N1bWVudEZ1bGxzY3JlZW5DaGFuZ2VfID0gYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMuZG9jdW1lbnRGdWxsc2NyZWVuQ2hhbmdlXyk7XG4gICAgICBfdGhpcy5ib3VuZEZ1bGxXaW5kb3dPbkVzY0tleV8gPSBiaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBfdGhpcy5mdWxsV2luZG93T25Fc2NLZXkpO1xuICAgICAgX3RoaXMuYm91bmRIYW5kbGVLZXlQcmVzc18gPSBiaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBfdGhpcy5oYW5kbGVLZXlQcmVzcyk7IC8vIGNyZWF0ZSBsb2dnZXJcblxuICAgICAgX3RoaXMubG9nID0gY3JlYXRlTG9nZ2VyJDEoX3RoaXMuaWRfKTsgLy8gVHJhY2tzIHdoZW4gYSB0ZWNoIGNoYW5nZXMgdGhlIHBvc3RlclxuXG4gICAgICBfdGhpcy5pc1Bvc3RlckZyb21UZWNoXyA9IGZhbHNlOyAvLyBIb2xkcyBjYWxsYmFjayBpbmZvIHRoYXQgZ2V0cyBxdWV1ZWQgd2hlbiBwbGF5YmFjayByYXRlIGlzIHplcm9cbiAgICAgIC8vIGFuZCBhIHNlZWsgaXMgaGFwcGVuaW5nXG5cbiAgICAgIF90aGlzLnF1ZXVlZENhbGxiYWNrc18gPSBbXTsgLy8gVHVybiBvZmYgQVBJIGFjY2VzcyBiZWNhdXNlIHdlJ3JlIGxvYWRpbmcgYSBuZXcgdGVjaCB0aGF0IG1pZ2h0IGxvYWQgYXN5bmNocm9ub3VzbHlcblxuICAgICAgX3RoaXMuaXNSZWFkeV8gPSBmYWxzZTsgLy8gSW5pdCBzdGF0ZSBoYXNTdGFydGVkX1xuXG4gICAgICBfdGhpcy5oYXNTdGFydGVkXyA9IGZhbHNlOyAvLyBJbml0IHN0YXRlIHVzZXJBY3RpdmVfXG5cbiAgICAgIF90aGlzLnVzZXJBY3RpdmVfID0gZmFsc2U7IC8vIGlmIHRoZSBnbG9iYWwgb3B0aW9uIG9iamVjdCB3YXMgYWNjaWRlbnRhbGx5IGJsb3duIGF3YXkgYnlcbiAgICAgIC8vIHNvbWVvbmUsIGJhaWwgZWFybHkgd2l0aCBhbiBpbmZvcm1hdGl2ZSBlcnJvclxuXG4gICAgICBpZiAoIV90aGlzLm9wdGlvbnNfIHx8ICFfdGhpcy5vcHRpb25zXy50ZWNoT3JkZXIgfHwgIV90aGlzLm9wdGlvbnNfLnRlY2hPcmRlci5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB0ZWNoT3JkZXIgc3BlY2lmaWVkLiBEaWQgeW91IG92ZXJ3cml0ZSAnICsgJ3ZpZGVvanMub3B0aW9ucyBpbnN0ZWFkIG9mIGp1c3QgY2hhbmdpbmcgdGhlICcgKyAncHJvcGVydGllcyB5b3Ugd2FudCB0byBvdmVycmlkZT8nKTtcbiAgICAgIH0gLy8gU3RvcmUgdGhlIG9yaWdpbmFsIHRhZyB1c2VkIHRvIHNldCBvcHRpb25zXG5cblxuICAgICAgX3RoaXMudGFnID0gdGFnOyAvLyBTdG9yZSB0aGUgdGFnIGF0dHJpYnV0ZXMgdXNlZCB0byByZXN0b3JlIGh0bWw1IGVsZW1lbnRcblxuICAgICAgX3RoaXMudGFnQXR0cmlidXRlcyA9IHRhZyAmJiBnZXRBdHRyaWJ1dGVzKHRhZyk7IC8vIFVwZGF0ZSBjdXJyZW50IGxhbmd1YWdlXG5cbiAgICAgIF90aGlzLmxhbmd1YWdlKF90aGlzLm9wdGlvbnNfLmxhbmd1YWdlKTsgLy8gVXBkYXRlIFN1cHBvcnRlZCBMYW5ndWFnZXNcblxuXG4gICAgICBpZiAob3B0aW9ucy5sYW5ndWFnZXMpIHtcbiAgICAgICAgLy8gTm9ybWFsaXNlIHBsYXllciBvcHRpb24gbGFuZ3VhZ2VzIHRvIGxvd2VyY2FzZVxuICAgICAgICB2YXIgbGFuZ3VhZ2VzVG9Mb3dlciA9IHt9O1xuICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvcHRpb25zLmxhbmd1YWdlcykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSQkMSkge1xuICAgICAgICAgIGxhbmd1YWdlc1RvTG93ZXJbbmFtZSQkMS50b0xvd2VyQ2FzZSgpXSA9IG9wdGlvbnMubGFuZ3VhZ2VzW25hbWUkJDFdO1xuICAgICAgICB9KTtcbiAgICAgICAgX3RoaXMubGFuZ3VhZ2VzXyA9IGxhbmd1YWdlc1RvTG93ZXI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpcy5sYW5ndWFnZXNfID0gUGxheWVyLnByb3RvdHlwZS5vcHRpb25zXy5sYW5ndWFnZXM7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLnJlc2V0Q2FjaGVfKCk7IC8vIFNldCBwb3N0ZXJcblxuXG4gICAgICBfdGhpcy5wb3N0ZXJfID0gb3B0aW9ucy5wb3N0ZXIgfHwgJyc7IC8vIFNldCBjb250cm9sc1xuXG4gICAgICBfdGhpcy5jb250cm9sc18gPSAhIW9wdGlvbnMuY29udHJvbHM7IC8vIE9yaWdpbmFsIHRhZyBzZXR0aW5ncyBzdG9yZWQgaW4gb3B0aW9uc1xuICAgICAgLy8gbm93IHJlbW92ZSBpbW1lZGlhdGVseSBzbyBuYXRpdmUgY29udHJvbHMgZG9uJ3QgZmxhc2guXG4gICAgICAvLyBNYXkgYmUgdHVybmVkIGJhY2sgb24gYnkgSFRNTDUgdGVjaCBpZiBuYXRpdmVDb250cm9sc0ZvclRvdWNoIGlzIHRydWVcblxuICAgICAgdGFnLmNvbnRyb2xzID0gZmFsc2U7XG4gICAgICB0YWcucmVtb3ZlQXR0cmlidXRlKCdjb250cm9scycpO1xuICAgICAgX3RoaXMuY2hhbmdpbmdTcmNfID0gZmFsc2U7XG4gICAgICBfdGhpcy5wbGF5Q2FsbGJhY2tzXyA9IFtdO1xuICAgICAgX3RoaXMucGxheVRlcm1pbmF0ZWRRdWV1ZV8gPSBbXTsgLy8gdGhlIGF0dHJpYnV0ZSBvdmVycmlkZXMgdGhlIG9wdGlvblxuXG4gICAgICBpZiAodGFnLmhhc0F0dHJpYnV0ZSgnYXV0b3BsYXknKSkge1xuICAgICAgICBfdGhpcy5hdXRvcGxheSh0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG90aGVyd2lzZSB1c2UgdGhlIHNldHRlciB0byB2YWxpZGF0ZSBhbmRcbiAgICAgICAgLy8gc2V0IHRoZSBjb3JyZWN0IHZhbHVlLlxuICAgICAgICBfdGhpcy5hdXRvcGxheShfdGhpcy5vcHRpb25zXy5hdXRvcGxheSk7XG4gICAgICB9IC8vIGNoZWNrIHBsdWdpbnNcblxuXG4gICAgICBpZiAob3B0aW9ucy5wbHVnaW5zKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKG9wdGlvbnMucGx1Z2lucykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSQkMSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXNbbmFtZSQkMV0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInBsdWdpbiBcXFwiXCIgKyBuYW1lJCQxICsgXCJcXFwiIGRvZXMgbm90IGV4aXN0XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvKlxuICAgICAgICogU3RvcmUgdGhlIGludGVybmFsIHN0YXRlIG9mIHNjcnViYmluZ1xuICAgICAgICpcbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIHRoZSB1c2VyIGlzIHNjcnViYmluZ1xuICAgICAgICovXG5cblxuICAgICAgX3RoaXMuc2NydWJiaW5nXyA9IGZhbHNlO1xuICAgICAgX3RoaXMuZWxfID0gX3RoaXMuY3JlYXRlRWwoKTsgLy8gTWFrZSB0aGlzIGFuIGV2ZW50ZWQgb2JqZWN0IGFuZCB1c2UgYGVsX2AgYXMgaXRzIGV2ZW50IGJ1cy5cblxuICAgICAgZXZlbnRlZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwge1xuICAgICAgICBldmVudEJ1c0tleTogJ2VsXydcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoX3RoaXMuZmx1aWRfKSB7XG4gICAgICAgIF90aGlzLm9uKCdwbGF5ZXJyZXNldCcsIF90aGlzLnVwZGF0ZVN0eWxlRWxfKTtcbiAgICAgIH0gLy8gV2UgYWxzbyB3YW50IHRvIHBhc3MgdGhlIG9yaWdpbmFsIHBsYXllciBvcHRpb25zIHRvIGVhY2ggY29tcG9uZW50IGFuZCBwbHVnaW5cbiAgICAgIC8vIGFzIHdlbGwgc28gdGhleSBkb24ndCBuZWVkIHRvIHJlYWNoIGJhY2sgaW50byB0aGUgcGxheWVyIGZvciBvcHRpb25zIGxhdGVyLlxuICAgICAgLy8gV2UgYWxzbyBuZWVkIHRvIGRvIGFub3RoZXIgY29weSBvZiB0aGlzLm9wdGlvbnNfIHNvIHdlIGRvbid0IGVuZCB1cCB3aXRoXG4gICAgICAvLyBhbiBpbmZpbml0ZSBsb29wLlxuXG5cbiAgICAgIHZhciBwbGF5ZXJPcHRpb25zQ29weSA9IG1lcmdlT3B0aW9ucyhfdGhpcy5vcHRpb25zXyk7IC8vIExvYWQgcGx1Z2luc1xuXG4gICAgICBpZiAob3B0aW9ucy5wbHVnaW5zKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKG9wdGlvbnMucGx1Z2lucykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSQkMSkge1xuICAgICAgICAgIF90aGlzW25hbWUkJDFdKG9wdGlvbnMucGx1Z2luc1tuYW1lJCQxXSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5vcHRpb25zXy5wbGF5ZXJPcHRpb25zID0gcGxheWVyT3B0aW9uc0NvcHk7XG4gICAgICBfdGhpcy5taWRkbGV3YXJlXyA9IFtdO1xuXG4gICAgICBfdGhpcy5pbml0Q2hpbGRyZW4oKTsgLy8gU2V0IGlzQXVkaW8gYmFzZWQgb24gd2hldGhlciBvciBub3QgYW4gYXVkaW8gdGFnIHdhcyB1c2VkXG5cblxuICAgICAgX3RoaXMuaXNBdWRpbyh0YWcubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2F1ZGlvJyk7IC8vIFVwZGF0ZSBjb250cm9scyBjbGFzc05hbWUuIENhbid0IGRvIHRoaXMgd2hlbiB0aGUgY29udHJvbHMgYXJlIGluaXRpYWxseVxuICAgICAgLy8gc2V0IGJlY2F1c2UgdGhlIGVsZW1lbnQgZG9lc24ndCBleGlzdCB5ZXQuXG5cblxuICAgICAgaWYgKF90aGlzLmNvbnRyb2xzKCkpIHtcbiAgICAgICAgX3RoaXMuYWRkQ2xhc3MoJ3Zqcy1jb250cm9scy1lbmFibGVkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpcy5hZGRDbGFzcygndmpzLWNvbnRyb2xzLWRpc2FibGVkJyk7XG4gICAgICB9IC8vIFNldCBBUklBIGxhYmVsIGFuZCByZWdpb24gcm9sZSBkZXBlbmRpbmcgb24gcGxheWVyIHR5cGVcblxuXG4gICAgICBfdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdyb2xlJywgJ3JlZ2lvbicpO1xuXG4gICAgICBpZiAoX3RoaXMuaXNBdWRpbygpKSB7XG4gICAgICAgIF90aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBfdGhpcy5sb2NhbGl6ZSgnQXVkaW8gUGxheWVyJykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3RoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIF90aGlzLmxvY2FsaXplKCdWaWRlbyBQbGF5ZXInKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChfdGhpcy5pc0F1ZGlvKCkpIHtcbiAgICAgICAgX3RoaXMuYWRkQ2xhc3MoJ3Zqcy1hdWRpbycpO1xuICAgICAgfVxuXG4gICAgICBpZiAoX3RoaXMuZmxleE5vdFN1cHBvcnRlZF8oKSkge1xuICAgICAgICBfdGhpcy5hZGRDbGFzcygndmpzLW5vLWZsZXgnKTtcbiAgICAgIH0gLy8gVE9ETzogTWFrZSB0aGlzIHNtYXJ0ZXIuIFRvZ2dsZSB1c2VyIHN0YXRlIGJldHdlZW4gdG91Y2hpbmcvbW91c2luZ1xuICAgICAgLy8gdXNpbmcgZXZlbnRzLCBzaW5jZSBkZXZpY2VzIGNhbiBoYXZlIGJvdGggdG91Y2ggYW5kIG1vdXNlIGV2ZW50cy5cbiAgICAgIC8vIFRPRE86IE1ha2UgdGhpcyBjaGVjayBiZSBwZXJmb3JtZWQgYWdhaW4gd2hlbiB0aGUgd2luZG93IHN3aXRjaGVzIGJldHdlZW4gbW9uaXRvcnNcbiAgICAgIC8vIChTZWUgaHR0cHM6Ly9naXRodWIuY29tL3ZpZGVvanMvdmlkZW8uanMvaXNzdWVzLzU2ODMpXG5cblxuICAgICAgaWYgKFRPVUNIX0VOQUJMRUQpIHtcbiAgICAgICAgX3RoaXMuYWRkQ2xhc3MoJ3Zqcy10b3VjaC1lbmFibGVkJyk7XG4gICAgICB9IC8vIGlPUyBTYWZhcmkgaGFzIGJyb2tlbiBob3ZlciBoYW5kbGluZ1xuXG5cbiAgICAgIGlmICghSVNfSU9TKSB7XG4gICAgICAgIF90aGlzLmFkZENsYXNzKCd2anMtd29ya2luZ2hvdmVyJyk7XG4gICAgICB9IC8vIE1ha2UgcGxheWVyIGVhc2lseSBmaW5kYWJsZSBieSBJRFxuXG5cbiAgICAgIFBsYXllci5wbGF5ZXJzW190aGlzLmlkX10gPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsgLy8gQWRkIGEgbWFqb3IgdmVyc2lvbiBjbGFzcyB0byBhaWQgY3NzIGluIHBsdWdpbnNcblxuICAgICAgdmFyIG1ham9yVmVyc2lvbiA9IHZlcnNpb24uc3BsaXQoJy4nKVswXTtcblxuICAgICAgX3RoaXMuYWRkQ2xhc3MoXCJ2anMtdlwiICsgbWFqb3JWZXJzaW9uKTsgLy8gV2hlbiB0aGUgcGxheWVyIGlzIGZpcnN0IGluaXRpYWxpemVkLCB0cmlnZ2VyIGFjdGl2aXR5IHNvIGNvbXBvbmVudHNcbiAgICAgIC8vIGxpa2UgdGhlIGNvbnRyb2wgYmFyIHNob3cgdGhlbXNlbHZlcyBpZiBuZWVkZWRcblxuXG4gICAgICBfdGhpcy51c2VyQWN0aXZlKHRydWUpO1xuXG4gICAgICBfdGhpcy5yZXBvcnRVc2VyQWN0aXZpdHkoKTtcblxuICAgICAgX3RoaXMub25lKCdwbGF5JywgX3RoaXMubGlzdGVuRm9yVXNlckFjdGl2aXR5Xyk7XG5cbiAgICAgIF90aGlzLm9uKCdmb2N1cycsIF90aGlzLmhhbmRsZUZvY3VzKTtcblxuICAgICAgX3RoaXMub24oJ2JsdXInLCBfdGhpcy5oYW5kbGVCbHVyKTtcblxuICAgICAgX3RoaXMub24oJ3N0YWdlY2xpY2snLCBfdGhpcy5oYW5kbGVTdGFnZUNsaWNrXyk7XG5cbiAgICAgIF90aGlzLmJyZWFrcG9pbnRzKF90aGlzLm9wdGlvbnNfLmJyZWFrcG9pbnRzKTtcblxuICAgICAgX3RoaXMucmVzcG9uc2l2ZShfdGhpcy5vcHRpb25zXy5yZXNwb25zaXZlKTtcblxuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGUgdmlkZW8gcGxheWVyIGFuZCBkb2VzIGFueSBuZWNlc3NhcnkgY2xlYW51cC5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgZXNwZWNpYWxseSBoZWxwZnVsIGlmIHlvdSBhcmUgZHluYW1pY2FsbHkgYWRkaW5nIGFuZCByZW1vdmluZyB2aWRlb3NcbiAgICAgKiB0by9mcm9tIHRoZSBET00uXG4gICAgICpcbiAgICAgKiBAZmlyZXMgUGxheWVyI2Rpc3Bvc2VcbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90byA9IFBsYXllci5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgLyoqXG4gICAgICAgKiBDYWxsZWQgd2hlbiB0aGUgcGxheWVyIGlzIGJlaW5nIGRpc3Bvc2VkIG9mLlxuICAgICAgICpcbiAgICAgICAqIEBldmVudCBQbGF5ZXIjZGlzcG9zZVxuICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICovXG4gICAgICB0aGlzLnRyaWdnZXIoJ2Rpc3Bvc2UnKTsgLy8gcHJldmVudCBkaXNwb3NlIGZyb20gYmVpbmcgY2FsbGVkIHR3aWNlXG5cbiAgICAgIHRoaXMub2ZmKCdkaXNwb3NlJyk7IC8vIE1ha2Ugc3VyZSBhbGwgcGxheWVyLXNwZWNpZmljIGRvY3VtZW50IGxpc3RlbmVycyBhcmUgdW5ib3VuZC4gVGhpcyBpc1xuXG4gICAgICBvZmYoZG9jdW1lbnQsIEZ1bGxzY3JlZW5BcGkuZnVsbHNjcmVlbmNoYW5nZSwgdGhpcy5ib3VuZERvY3VtZW50RnVsbHNjcmVlbkNoYW5nZV8pO1xuICAgICAgb2ZmKGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuYm91bmRGdWxsV2luZG93T25Fc2NLZXlfKTtcbiAgICAgIG9mZihkb2N1bWVudCwgJ2tleWRvd24nLCB0aGlzLmJvdW5kSGFuZGxlS2V5UHJlc3NfKTtcblxuICAgICAgaWYgKHRoaXMuc3R5bGVFbF8gJiYgdGhpcy5zdHlsZUVsXy5wYXJlbnROb2RlKSB7XG4gICAgICAgIHRoaXMuc3R5bGVFbF8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnN0eWxlRWxfKTtcbiAgICAgICAgdGhpcy5zdHlsZUVsXyA9IG51bGw7XG4gICAgICB9IC8vIEtpbGwgcmVmZXJlbmNlIHRvIHRoaXMgcGxheWVyXG5cblxuICAgICAgUGxheWVyLnBsYXllcnNbdGhpcy5pZF9dID0gbnVsbDtcblxuICAgICAgaWYgKHRoaXMudGFnICYmIHRoaXMudGFnLnBsYXllcikge1xuICAgICAgICB0aGlzLnRhZy5wbGF5ZXIgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5lbF8gJiYgdGhpcy5lbF8ucGxheWVyKSB7XG4gICAgICAgIHRoaXMuZWxfLnBsYXllciA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnRlY2hfKSB7XG4gICAgICAgIHRoaXMudGVjaF8uZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLmlzUG9zdGVyRnJvbVRlY2hfID0gZmFsc2U7XG4gICAgICAgIHRoaXMucG9zdGVyXyA9ICcnO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wbGF5ZXJFbEluZ2VzdF8pIHtcbiAgICAgICAgdGhpcy5wbGF5ZXJFbEluZ2VzdF8gPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy50YWcpIHtcbiAgICAgICAgdGhpcy50YWcgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBjbGVhckNhY2hlRm9yUGxheWVyKHRoaXMpOyAvLyByZW1vdmUgYWxsIGV2ZW50IGhhbmRsZXJzIGZvciB0cmFjayBsaXN0c1xuICAgICAgLy8gYWxsIHRyYWNrcyBhbmQgdHJhY2sgbGlzdGVuZXJzIGFyZSByZW1vdmVkIG9uXG4gICAgICAvLyB0ZWNoIGRpc3Bvc2VcblxuICAgICAgQUxMLm5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUkJDEpIHtcbiAgICAgICAgdmFyIHByb3BzID0gQUxMW25hbWUkJDFdO1xuXG4gICAgICAgIHZhciBsaXN0ID0gX3RoaXMyW3Byb3BzLmdldHRlck5hbWVdKCk7IC8vIGlmIGl0IGlzIG5vdCBhIG5hdGl2ZSBsaXN0XG4gICAgICAgIC8vIHdlIGhhdmUgdG8gbWFudWFsbHkgcmVtb3ZlIGV2ZW50IGxpc3RlbmVyc1xuXG5cbiAgICAgICAgaWYgKGxpc3QgJiYgbGlzdC5vZmYpIHtcbiAgICAgICAgICBsaXN0Lm9mZigpO1xuICAgICAgICB9XG4gICAgICB9KTsgLy8gdGhlIGFjdHVhbCAuZWxfIGlzIHJlbW92ZWQgaGVyZVxuXG4gICAgICBfQ29tcG9uZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgYFBsYXllcmAncyBET00gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgRE9NIGVsZW1lbnQgdGhhdCBnZXRzIGNyZWF0ZWQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwkJDEoKSB7XG4gICAgICB2YXIgdGFnID0gdGhpcy50YWc7XG4gICAgICB2YXIgZWw7XG4gICAgICB2YXIgcGxheWVyRWxJbmdlc3QgPSB0aGlzLnBsYXllckVsSW5nZXN0XyA9IHRhZy5wYXJlbnROb2RlICYmIHRhZy5wYXJlbnROb2RlLmhhc0F0dHJpYnV0ZSAmJiB0YWcucGFyZW50Tm9kZS5oYXNBdHRyaWJ1dGUoJ2RhdGEtdmpzLXBsYXllcicpO1xuICAgICAgdmFyIGRpdkVtYmVkID0gdGhpcy50YWcudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndmlkZW8tanMnO1xuXG4gICAgICBpZiAocGxheWVyRWxJbmdlc3QpIHtcbiAgICAgICAgZWwgPSB0aGlzLmVsXyA9IHRhZy5wYXJlbnROb2RlO1xuICAgICAgfSBlbHNlIGlmICghZGl2RW1iZWQpIHtcbiAgICAgICAgZWwgPSB0aGlzLmVsXyA9IF9Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicpO1xuICAgICAgfSAvLyBDb3B5IG92ZXIgYWxsIHRoZSBhdHRyaWJ1dGVzIGZyb20gdGhlIHRhZywgaW5jbHVkaW5nIElEIGFuZCBjbGFzc1xuICAgICAgLy8gSUQgd2lsbCBub3cgcmVmZXJlbmNlIHBsYXllciBib3gsIG5vdCB0aGUgdmlkZW8gdGFnXG5cblxuICAgICAgdmFyIGF0dHJzID0gZ2V0QXR0cmlidXRlcyh0YWcpO1xuXG4gICAgICBpZiAoZGl2RW1iZWQpIHtcbiAgICAgICAgZWwgPSB0aGlzLmVsXyA9IHRhZztcbiAgICAgICAgdGFnID0gdGhpcy50YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuXG4gICAgICAgIHdoaWxlIChlbC5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICB0YWcuYXBwZW5kQ2hpbGQoZWwuZmlyc3RDaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWhhc0NsYXNzKGVsLCAndmlkZW8tanMnKSkge1xuICAgICAgICAgIGFkZENsYXNzKGVsLCAndmlkZW8tanMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsLmFwcGVuZENoaWxkKHRhZyk7XG4gICAgICAgIHBsYXllckVsSW5nZXN0ID0gdGhpcy5wbGF5ZXJFbEluZ2VzdF8gPSBlbDsgLy8gbW92ZSBwcm9wZXJ0aWVzIG92ZXIgZnJvbSBvdXIgY3VzdG9tIGB2aWRlby1qc2AgZWxlbWVudFxuICAgICAgICAvLyB0byBvdXIgbmV3IGB2aWRlb2AgZWxlbWVudC4gVGhpcyB3aWxsIG1vdmUgdGhpbmdzIGxpa2VcbiAgICAgICAgLy8gYHNyY2Agb3IgYGNvbnRyb2xzYCB0aGF0IHdlcmUgc2V0IHZpYSBqcyBiZWZvcmUgdGhlIHBsYXllclxuICAgICAgICAvLyB3YXMgaW5pdGlhbGl6ZWQuXG5cbiAgICAgICAgT2JqZWN0LmtleXMoZWwpLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICB0YWdba10gPSBlbFtrXTtcbiAgICAgICAgfSk7XG4gICAgICB9IC8vIHNldCB0YWJpbmRleCB0byAtMSB0byByZW1vdmUgdGhlIHZpZGVvIGVsZW1lbnQgZnJvbSB0aGUgZm9jdXMgb3JkZXJcblxuXG4gICAgICB0YWcuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgYXR0cnMudGFiaW5kZXggPSAnLTEnOyAvLyBXb3JrYXJvdW5kIGZvciAjNDU4MyAoSkFXUytJRSBkb2Vzbid0IGFubm91bmNlIEJQQiBvciBwbGF5IGJ1dHRvbilcbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRnJlZWRvbVNjaWVudGlmaWMvVkZPLXN0YW5kYXJkcy1zdXBwb3J0L2lzc3Vlcy83OFxuICAgICAgLy8gTm90ZSB0aGF0IHdlIGNhbid0IGRldGVjdCBpZiBKQVdTIGlzIGJlaW5nIHVzZWQsIGJ1dCB0aGlzIEFSSUEgYXR0cmlidXRlXG4gICAgICAvLyAgZG9lc24ndCBjaGFuZ2UgYmVoYXZpb3Igb2YgSUUxMSBpZiBKQVdTIGlzIG5vdCBiZWluZyB1c2VkXG5cbiAgICAgIGlmIChJRV9WRVJTSU9OKSB7XG4gICAgICAgIHRhZy5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYXBwbGljYXRpb24nKTtcbiAgICAgICAgYXR0cnMucm9sZSA9ICdhcHBsaWNhdGlvbic7XG4gICAgICB9IC8vIFJlbW92ZSB3aWR0aC9oZWlnaHQgYXR0cnMgZnJvbSB0YWcgc28gQ1NTIGNhbiBtYWtlIGl0IDEwMCUgd2lkdGgvaGVpZ2h0XG5cblxuICAgICAgdGFnLnJlbW92ZUF0dHJpYnV0ZSgnd2lkdGgnKTtcbiAgICAgIHRhZy5yZW1vdmVBdHRyaWJ1dGUoJ2hlaWdodCcpO1xuXG4gICAgICBpZiAoJ3dpZHRoJyBpbiBhdHRycykge1xuICAgICAgICBkZWxldGUgYXR0cnMud2lkdGg7XG4gICAgICB9XG5cbiAgICAgIGlmICgnaGVpZ2h0JyBpbiBhdHRycykge1xuICAgICAgICBkZWxldGUgYXR0cnMuaGVpZ2h0O1xuICAgICAgfVxuXG4gICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhdHRycykuZm9yRWFjaChmdW5jdGlvbiAoYXR0cikge1xuICAgICAgICAvLyBkb24ndCBjb3B5IG92ZXIgdGhlIGNsYXNzIGF0dHJpYnV0ZSB0byB0aGUgcGxheWVyIGVsZW1lbnQgd2hlbiB3ZSdyZSBpbiBhIGRpdiBlbWJlZFxuICAgICAgICAvLyB0aGUgY2xhc3MgaXMgYWxyZWFkeSBzZXQgdXAgcHJvcGVybHkgaW4gdGhlIGRpdkVtYmVkIGNhc2VcbiAgICAgICAgLy8gYW5kIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGB2aWRlby1qc2AgY2xhc3MgZG9lc24ndCBnZXQgbG9zdFxuICAgICAgICBpZiAoIShkaXZFbWJlZCAmJiBhdHRyID09PSAnY2xhc3MnKSkge1xuICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyc1thdHRyXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGl2RW1iZWQpIHtcbiAgICAgICAgICB0YWcuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJzW2F0dHJdKTtcbiAgICAgICAgfVxuICAgICAgfSk7IC8vIFVwZGF0ZSB0YWcgaWQvY2xhc3MgZm9yIHVzZSBhcyBIVE1MNSBwbGF5YmFjayB0ZWNoXG4gICAgICAvLyBNaWdodCB0aGluayB3ZSBzaG91bGQgZG8gdGhpcyBhZnRlciBlbWJlZGRpbmcgaW4gY29udGFpbmVyIHNvIC52anMtdGVjaCBjbGFzc1xuICAgICAgLy8gZG9lc24ndCBmbGFzaCAxMDAlIHdpZHRoL2hlaWdodCwgYnV0IGNsYXNzIG9ubHkgYXBwbGllcyB3aXRoIC52aWRlby1qcyBwYXJlbnRcblxuICAgICAgdGFnLnBsYXllcklkID0gdGFnLmlkO1xuICAgICAgdGFnLmlkICs9ICdfaHRtbDVfYXBpJztcbiAgICAgIHRhZy5jbGFzc05hbWUgPSAndmpzLXRlY2gnOyAvLyBNYWtlIHBsYXllciBmaW5kYWJsZSBvbiBlbGVtZW50c1xuXG4gICAgICB0YWcucGxheWVyID0gZWwucGxheWVyID0gdGhpczsgLy8gRGVmYXVsdCBzdGF0ZSBvZiB2aWRlbyBpcyBwYXVzZWRcblxuICAgICAgdGhpcy5hZGRDbGFzcygndmpzLXBhdXNlZCcpOyAvLyBBZGQgYSBzdHlsZSBlbGVtZW50IGluIHRoZSBwbGF5ZXIgdGhhdCB3ZSdsbCB1c2UgdG8gc2V0IHRoZSB3aWR0aC9oZWlnaHRcbiAgICAgIC8vIG9mIHRoZSBwbGF5ZXIgaW4gYSB3YXkgdGhhdCdzIHN0aWxsIG92ZXJyaWRlYWJsZSBieSBDU1MsIGp1c3QgbGlrZSB0aGVcbiAgICAgIC8vIHZpZGVvIGVsZW1lbnRcblxuICAgICAgaWYgKHdpbmRvdyQxLlZJREVPSlNfTk9fRFlOQU1JQ19TVFlMRSAhPT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLnN0eWxlRWxfID0gY3JlYXRlU3R5bGVFbGVtZW50KCd2anMtc3R5bGVzLWRpbWVuc2lvbnMnKTtcbiAgICAgICAgdmFyIGRlZmF1bHRzU3R5bGVFbCA9ICQoJy52anMtc3R5bGVzLWRlZmF1bHRzJyk7XG4gICAgICAgIHZhciBoZWFkID0gJCgnaGVhZCcpO1xuICAgICAgICBoZWFkLmluc2VydEJlZm9yZSh0aGlzLnN0eWxlRWxfLCBkZWZhdWx0c1N0eWxlRWwgPyBkZWZhdWx0c1N0eWxlRWwubmV4dFNpYmxpbmcgOiBoZWFkLmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmZpbGxfID0gZmFsc2U7XG4gICAgICB0aGlzLmZsdWlkXyA9IGZhbHNlOyAvLyBQYXNzIGluIHRoZSB3aWR0aC9oZWlnaHQvYXNwZWN0UmF0aW8gb3B0aW9ucyB3aGljaCB3aWxsIHVwZGF0ZSB0aGUgc3R5bGUgZWxcblxuICAgICAgdGhpcy53aWR0aCh0aGlzLm9wdGlvbnNfLndpZHRoKTtcbiAgICAgIHRoaXMuaGVpZ2h0KHRoaXMub3B0aW9uc18uaGVpZ2h0KTtcbiAgICAgIHRoaXMuZmlsbCh0aGlzLm9wdGlvbnNfLmZpbGwpO1xuICAgICAgdGhpcy5mbHVpZCh0aGlzLm9wdGlvbnNfLmZsdWlkKTtcbiAgICAgIHRoaXMuYXNwZWN0UmF0aW8odGhpcy5vcHRpb25zXy5hc3BlY3RSYXRpbyk7IC8vIEhpZGUgYW55IGxpbmtzIHdpdGhpbiB0aGUgdmlkZW8vYXVkaW8gdGFnLFxuICAgICAgLy8gYmVjYXVzZSBJRSBkb2Vzbid0IGhpZGUgdGhlbSBjb21wbGV0ZWx5IGZyb20gc2NyZWVuIHJlYWRlcnMuXG5cbiAgICAgIHZhciBsaW5rcyA9IHRhZy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYScpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBsaW5rRWwgPSBsaW5rcy5pdGVtKGkpO1xuICAgICAgICBhZGRDbGFzcyhsaW5rRWwsICd2anMtaGlkZGVuJyk7XG4gICAgICAgIGxpbmtFbC5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICdoaWRkZW4nKTtcbiAgICAgIH0gLy8gaW5zZXJ0RWxGaXJzdCBzZWVtcyB0byBjYXVzZSB0aGUgbmV0d29ya1N0YXRlIHRvIGZsaWNrZXIgZnJvbSAzIHRvIDIsIHNvXG4gICAgICAvLyBrZWVwIHRyYWNrIG9mIHRoZSBvcmlnaW5hbCBmb3IgbGF0ZXIgc28gd2UgY2FuIGtub3cgaWYgdGhlIHNvdXJjZSBvcmlnaW5hbGx5IGZhaWxlZFxuXG5cbiAgICAgIHRhZy5pbml0TmV0d29ya1N0YXRlXyA9IHRhZy5uZXR3b3JrU3RhdGU7IC8vIFdyYXAgdmlkZW8gdGFnIGluIGRpdiAoZWwvYm94KSBjb250YWluZXJcblxuICAgICAgaWYgKHRhZy5wYXJlbnROb2RlICYmICFwbGF5ZXJFbEluZ2VzdCkge1xuICAgICAgICB0YWcucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWwsIHRhZyk7XG4gICAgICB9IC8vIGluc2VydCB0aGUgdGFnIGFzIHRoZSBmaXJzdCBjaGlsZCBvZiB0aGUgcGxheWVyIGVsZW1lbnRcbiAgICAgIC8vIHRoZW4gbWFudWFsbHkgYWRkIGl0IHRvIHRoZSBjaGlsZHJlbiBhcnJheSBzbyB0aGF0IHRoaXMuYWRkQ2hpbGRcbiAgICAgIC8vIHdpbGwgd29yayBwcm9wZXJseSBmb3Igb3RoZXIgY29tcG9uZW50c1xuICAgICAgLy9cbiAgICAgIC8vIEJyZWFrcyBpUGhvbmUsIGZpeGVkIGluIEhUTUw1IHNldHVwLlxuXG5cbiAgICAgIHByZXBlbmRUbyh0YWcsIGVsKTtcbiAgICAgIHRoaXMuY2hpbGRyZW5fLnVuc2hpZnQodGFnKTsgLy8gU2V0IGxhbmcgYXR0ciBvbiBwbGF5ZXIgdG8gZW5zdXJlIENTUyA6bGFuZygpIGluIGNvbnNpc3RlbnQgd2l0aCBwbGF5ZXJcbiAgICAgIC8vIGlmIGl0J3MgYmVlbiBzZXQgdG8gc29tZXRoaW5nIGRpZmZlcmVudCB0byB0aGUgZG9jXG5cbiAgICAgIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnbGFuZycsIHRoaXMubGFuZ3VhZ2VfKTtcbiAgICAgIHRoaXMuZWxfID0gZWw7XG4gICAgICByZXR1cm4gZWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgZ2V0dGVyL3NldHRlciBmb3IgdGhlIGBQbGF5ZXJgJ3Mgd2lkdGguIFJldHVybnMgdGhlIHBsYXllcidzIGNvbmZpZ3VyZWQgdmFsdWUuXG4gICAgICogVG8gZ2V0IHRoZSBjdXJyZW50IHdpZHRoIHVzZSBgY3VycmVudFdpZHRoKClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt2YWx1ZV1cbiAgICAgKiAgICAgICAgVGhlIHZhbHVlIHRvIHNldCB0aGUgYFBsYXllcmAncyB3aWR0aCB0by5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKiAgICAgICAgIFRoZSBjdXJyZW50IHdpZHRoIG9mIHRoZSBgUGxheWVyYCB3aGVuIGdldHRpbmcuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLndpZHRoID0gZnVuY3Rpb24gd2lkdGgodmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbignd2lkdGgnLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgZ2V0dGVyL3NldHRlciBmb3IgdGhlIGBQbGF5ZXJgJ3MgaGVpZ2h0LiBSZXR1cm5zIHRoZSBwbGF5ZXIncyBjb25maWd1cmVkIHZhbHVlLlxuICAgICAqIFRvIGdldCB0aGUgY3VycmVudCBoZWlnaHQgdXNlIGBjdXJyZW50aGVpZ2h0KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt2YWx1ZV1cbiAgICAgKiAgICAgICAgVGhlIHZhbHVlIHRvIHNldCB0aGUgYFBsYXllcmAncyBoZWlndGggdG8uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICogICAgICAgICBUaGUgY3VycmVudCBoZWlnaHQgb2YgdGhlIGBQbGF5ZXJgIHdoZW4gZ2V0dGluZy5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGVpZ2h0ID0gZnVuY3Rpb24gaGVpZ2h0KHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5kaW1lbnNpb24oJ2hlaWdodCcsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBnZXR0ZXIvc2V0dGVyIGZvciB0aGUgYFBsYXllcmAncyB3aWR0aCAmIGhlaWdodC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkaW1lbnNpb25cbiAgICAgKiAgICAgICAgVGhpcyBzdHJpbmcgY2FuIGJlOlxuICAgICAqICAgICAgICAtICd3aWR0aCdcbiAgICAgKiAgICAgICAgLSAnaGVpZ2h0J1xuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt2YWx1ZV1cbiAgICAgKiAgICAgICAgVmFsdWUgZm9yIGRpbWVuc2lvbiBzcGVjaWZpZWQgaW4gdGhlIGZpcnN0IGFyZ3VtZW50LlxuICAgICAqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqICAgICAgICAgVGhlIGRpbWVuc2lvbiBhcmd1bWVudHMgdmFsdWUgd2hlbiBnZXR0aW5nICh3aWR0aC9oZWlnaHQpLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5kaW1lbnNpb24gPSBmdW5jdGlvbiBkaW1lbnNpb24oX2RpbWVuc2lvbiwgdmFsdWUpIHtcbiAgICAgIHZhciBwcml2RGltZW5zaW9uID0gX2RpbWVuc2lvbiArICdfJztcblxuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbcHJpdkRpbWVuc2lvbl0gfHwgMDtcbiAgICAgIH1cblxuICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICAvLyBJZiBhbiBlbXB0eSBzdHJpbmcgaXMgZ2l2ZW4sIHJlc2V0IHRoZSBkaW1lbnNpb24gdG8gYmUgYXV0b21hdGljXG4gICAgICAgIHRoaXNbcHJpdkRpbWVuc2lvbl0gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudXBkYXRlU3R5bGVFbF8oKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgcGFyc2VkVmFsID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG5cbiAgICAgIGlmIChpc05hTihwYXJzZWRWYWwpKSB7XG4gICAgICAgIGxvZy5lcnJvcihcIkltcHJvcGVyIHZhbHVlIFxcXCJcIiArIHZhbHVlICsgXCJcXFwiIHN1cHBsaWVkIGZvciBmb3IgXCIgKyBfZGltZW5zaW9uKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzW3ByaXZEaW1lbnNpb25dID0gcGFyc2VkVmFsO1xuICAgICAgdGhpcy51cGRhdGVTdHlsZUVsXygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGdldHRlci9zZXR0ZXIvdG9nZ2xlciBmb3IgdGhlIHZqcy1mbHVpZCBgY2xhc3NOYW1lYCBvbiB0aGUgYFBsYXllcmAuXG4gICAgICpcbiAgICAgKiBUdXJuaW5nIHRoaXMgb24gd2lsbCB0dXJuIG9mZiBmaWxsIG1vZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtib29sXVxuICAgICAqICAgICAgICAtIEEgdmFsdWUgb2YgdHJ1ZSBhZGRzIHRoZSBjbGFzcy5cbiAgICAgKiAgICAgICAgLSBBIHZhbHVlIG9mIGZhbHNlIHJlbW92ZXMgdGhlIGNsYXNzLlxuICAgICAqICAgICAgICAtIE5vIHZhbHVlIHdpbGwgYmUgYSBnZXR0ZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufHVuZGVmaW5lZH1cbiAgICAgKiAgICAgICAgIC0gVGhlIHZhbHVlIG9mIGZsdWlkIHdoZW4gZ2V0dGluZy5cbiAgICAgKiAgICAgICAgIC0gYHVuZGVmaW5lZGAgd2hlbiBzZXR0aW5nLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5mbHVpZCA9IGZ1bmN0aW9uIGZsdWlkKGJvb2wpIHtcbiAgICAgIGlmIChib29sID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5mbHVpZF87XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZmx1aWRfID0gISFib29sO1xuXG4gICAgICBpZiAoaXNFdmVudGVkKHRoaXMpKSB7XG4gICAgICAgIHRoaXMub2ZmKCdwbGF5ZXJyZXNldCcsIHRoaXMudXBkYXRlU3R5bGVFbF8pO1xuICAgICAgfVxuXG4gICAgICBpZiAoYm9vbCkge1xuICAgICAgICB0aGlzLmFkZENsYXNzKCd2anMtZmx1aWQnKTtcbiAgICAgICAgdGhpcy5maWxsKGZhbHNlKTtcbiAgICAgICAgYWRkRXZlbnRlZENhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aGlzLm9uKCdwbGF5ZXJyZXNldCcsIHRoaXMudXBkYXRlU3R5bGVFbF8pO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1mbHVpZCcpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnVwZGF0ZVN0eWxlRWxfKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgZ2V0dGVyL3NldHRlci90b2dnbGVyIGZvciB0aGUgdmpzLWZpbGwgYGNsYXNzTmFtZWAgb24gdGhlIGBQbGF5ZXJgLlxuICAgICAqXG4gICAgICogVHVybmluZyB0aGlzIG9uIHdpbGwgdHVybiBvZmYgZmx1aWQgbW9kZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Jvb2xdXG4gICAgICogICAgICAgIC0gQSB2YWx1ZSBvZiB0cnVlIGFkZHMgdGhlIGNsYXNzLlxuICAgICAqICAgICAgICAtIEEgdmFsdWUgb2YgZmFsc2UgcmVtb3ZlcyB0aGUgY2xhc3MuXG4gICAgICogICAgICAgIC0gTm8gdmFsdWUgd2lsbCBiZSBhIGdldHRlci5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW58dW5kZWZpbmVkfVxuICAgICAqICAgICAgICAgLSBUaGUgdmFsdWUgb2YgZmx1aWQgd2hlbiBnZXR0aW5nLlxuICAgICAqICAgICAgICAgLSBgdW5kZWZpbmVkYCB3aGVuIHNldHRpbmcuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmZpbGwgPSBmdW5jdGlvbiBmaWxsKGJvb2wpIHtcbiAgICAgIGlmIChib29sID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5maWxsXztcbiAgICAgIH1cblxuICAgICAgdGhpcy5maWxsXyA9ICEhYm9vbDtcblxuICAgICAgaWYgKGJvb2wpIHtcbiAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWZpbGwnKTtcbiAgICAgICAgdGhpcy5mbHVpZChmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtZmlsbCcpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQvU2V0IHRoZSBhc3BlY3QgcmF0aW9cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmF0aW9dXG4gICAgICogICAgICAgIEFzcGVjdCByYXRpbyBmb3IgcGxheWVyXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfVxuICAgICAqICAgICAgICAgcmV0dXJucyB0aGUgY3VycmVudCBhc3BlY3QgcmF0aW8gd2hlbiBnZXR0aW5nXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBBIGdldHRlci9zZXR0ZXIgZm9yIHRoZSBgUGxheWVyYCdzIGFzcGVjdCByYXRpby5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmF0aW9dXG4gICAgICogICAgICAgIFRoZSB2YWx1ZSB0byBzZXQgdGhlIGBQbGF5ZXIncyBhc3BlY3QgcmF0aW8gdG8uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfVxuICAgICAqICAgICAgICAgLSBUaGUgY3VycmVudCBhc3BlY3QgcmF0aW8gb2YgdGhlIGBQbGF5ZXJgIHdoZW4gZ2V0dGluZy5cbiAgICAgKiAgICAgICAgIC0gdW5kZWZpbmVkIHdoZW4gc2V0dGluZ1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5hc3BlY3RSYXRpbyA9IGZ1bmN0aW9uIGFzcGVjdFJhdGlvKHJhdGlvKSB7XG4gICAgICBpZiAocmF0aW8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hc3BlY3RSYXRpb187XG4gICAgICB9IC8vIENoZWNrIGZvciB3aWR0aDpoZWlnaHQgZm9ybWF0XG5cblxuICAgICAgaWYgKCEvXlxcZCtcXDpcXGQrJC8udGVzdChyYXRpbykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbXByb3BlciB2YWx1ZSBzdXBwbGllZCBmb3IgYXNwZWN0IHJhdGlvLiBUaGUgZm9ybWF0IHNob3VsZCBiZSB3aWR0aDpoZWlnaHQsIGZvciBleGFtcGxlIDE2OjkuJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYXNwZWN0UmF0aW9fID0gcmF0aW87IC8vIFdlJ3JlIGFzc3VtaW5nIGlmIHlvdSBzZXQgYW4gYXNwZWN0IHJhdGlvIHlvdSB3YW50IGZsdWlkIG1vZGUsXG4gICAgICAvLyBiZWNhdXNlIGluIGZpeGVkIG1vZGUgeW91IGNvdWxkIGNhbGN1bGF0ZSB3aWR0aCBhbmQgaGVpZ2h0IHlvdXJzZWxmLlxuXG4gICAgICB0aGlzLmZsdWlkKHRydWUpO1xuICAgICAgdGhpcy51cGRhdGVTdHlsZUVsXygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgc3R5bGVzIG9mIHRoZSBgUGxheWVyYCBlbGVtZW50IChoZWlnaHQsIHdpZHRoIGFuZCBhc3BlY3QgcmF0aW8pLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbGlzdGVucyBUZWNoI2xvYWRlZG1ldGFkYXRhXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnVwZGF0ZVN0eWxlRWxfID0gZnVuY3Rpb24gdXBkYXRlU3R5bGVFbF8oKSB7XG4gICAgICBpZiAod2luZG93JDEuVklERU9KU19OT19EWU5BTUlDX1NUWUxFID09PSB0cnVlKSB7XG4gICAgICAgIHZhciBfd2lkdGggPSB0eXBlb2YgdGhpcy53aWR0aF8gPT09ICdudW1iZXInID8gdGhpcy53aWR0aF8gOiB0aGlzLm9wdGlvbnNfLndpZHRoO1xuXG4gICAgICAgIHZhciBfaGVpZ2h0ID0gdHlwZW9mIHRoaXMuaGVpZ2h0XyA9PT0gJ251bWJlcicgPyB0aGlzLmhlaWdodF8gOiB0aGlzLm9wdGlvbnNfLmhlaWdodDtcblxuICAgICAgICB2YXIgdGVjaEVsID0gdGhpcy50ZWNoXyAmJiB0aGlzLnRlY2hfLmVsKCk7XG5cbiAgICAgICAgaWYgKHRlY2hFbCkge1xuICAgICAgICAgIGlmIChfd2lkdGggPj0gMCkge1xuICAgICAgICAgICAgdGVjaEVsLndpZHRoID0gX3dpZHRoO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChfaGVpZ2h0ID49IDApIHtcbiAgICAgICAgICAgIHRlY2hFbC5oZWlnaHQgPSBfaGVpZ2h0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHdpZHRoO1xuICAgICAgdmFyIGhlaWdodDtcbiAgICAgIHZhciBhc3BlY3RSYXRpbztcbiAgICAgIHZhciBpZENsYXNzOyAvLyBUaGUgYXNwZWN0IHJhdGlvIGlzIGVpdGhlciB1c2VkIGRpcmVjdGx5IG9yIHRvIGNhbGN1bGF0ZSB3aWR0aCBhbmQgaGVpZ2h0LlxuXG4gICAgICBpZiAodGhpcy5hc3BlY3RSYXRpb18gIT09IHVuZGVmaW5lZCAmJiB0aGlzLmFzcGVjdFJhdGlvXyAhPT0gJ2F1dG8nKSB7XG4gICAgICAgIC8vIFVzZSBhbnkgYXNwZWN0UmF0aW8gdGhhdCdzIGJlZW4gc3BlY2lmaWNhbGx5IHNldFxuICAgICAgICBhc3BlY3RSYXRpbyA9IHRoaXMuYXNwZWN0UmF0aW9fO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnZpZGVvV2lkdGgoKSA+IDApIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlIHRyeSB0byBnZXQgdGhlIGFzcGVjdCByYXRpbyBmcm9tIHRoZSB2aWRlbyBtZXRhZGF0YVxuICAgICAgICBhc3BlY3RSYXRpbyA9IHRoaXMudmlkZW9XaWR0aCgpICsgJzonICsgdGhpcy52aWRlb0hlaWdodCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT3IgdXNlIGEgZGVmYXVsdC4gVGhlIHZpZGVvIGVsZW1lbnQncyBpcyAyOjEsIGJ1dCAxNjo5IGlzIG1vcmUgY29tbW9uLlxuICAgICAgICBhc3BlY3RSYXRpbyA9ICcxNjo5JztcbiAgICAgIH0gLy8gR2V0IHRoZSByYXRpbyBhcyBhIGRlY2ltYWwgd2UgY2FuIHVzZSB0byBjYWxjdWxhdGUgZGltZW5zaW9uc1xuXG5cbiAgICAgIHZhciByYXRpb1BhcnRzID0gYXNwZWN0UmF0aW8uc3BsaXQoJzonKTtcbiAgICAgIHZhciByYXRpb011bHRpcGxpZXIgPSByYXRpb1BhcnRzWzFdIC8gcmF0aW9QYXJ0c1swXTtcblxuICAgICAgaWYgKHRoaXMud2lkdGhfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gVXNlIGFueSB3aWR0aCB0aGF0J3MgYmVlbiBzcGVjaWZpY2FsbHkgc2V0XG4gICAgICAgIHdpZHRoID0gdGhpcy53aWR0aF87XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaGVpZ2h0XyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIE9yIGNhbHVsYXRlIHRoZSB3aWR0aCBmcm9tIHRoZSBhc3BlY3QgcmF0aW8gaWYgYSBoZWlnaHQgaGFzIGJlZW4gc2V0XG4gICAgICAgIHdpZHRoID0gdGhpcy5oZWlnaHRfIC8gcmF0aW9NdWx0aXBsaWVyO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT3IgdXNlIHRoZSB2aWRlbydzIG1ldGFkYXRhLCBvciB1c2UgdGhlIHZpZGVvIGVsJ3MgZGVmYXVsdCBvZiAzMDBcbiAgICAgICAgd2lkdGggPSB0aGlzLnZpZGVvV2lkdGgoKSB8fCAzMDA7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmhlaWdodF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBVc2UgYW55IGhlaWdodCB0aGF0J3MgYmVlbiBzcGVjaWZpY2FsbHkgc2V0XG4gICAgICAgIGhlaWdodCA9IHRoaXMuaGVpZ2h0XztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSBjYWxjdWxhdGUgdGhlIGhlaWdodCBmcm9tIHRoZSByYXRpbyBhbmQgdGhlIHdpZHRoXG4gICAgICAgIGhlaWdodCA9IHdpZHRoICogcmF0aW9NdWx0aXBsaWVyO1xuICAgICAgfSAvLyBFbnN1cmUgdGhlIENTUyBjbGFzcyBpcyB2YWxpZCBieSBzdGFydGluZyB3aXRoIGFuIGFscGhhIGNoYXJhY3RlclxuXG5cbiAgICAgIGlmICgvXlteYS16QS1aXS8udGVzdCh0aGlzLmlkKCkpKSB7XG4gICAgICAgIGlkQ2xhc3MgPSAnZGltZW5zaW9ucy0nICsgdGhpcy5pZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWRDbGFzcyA9IHRoaXMuaWQoKSArICctZGltZW5zaW9ucyc7XG4gICAgICB9IC8vIEVuc3VyZSB0aGUgcmlnaHQgY2xhc3MgaXMgc3RpbGwgb24gdGhlIHBsYXllciBmb3IgdGhlIHN0eWxlIGVsZW1lbnRcblxuXG4gICAgICB0aGlzLmFkZENsYXNzKGlkQ2xhc3MpO1xuICAgICAgc2V0VGV4dENvbnRlbnQodGhpcy5zdHlsZUVsXywgXCJcXG4gICAgICAuXCIgKyBpZENsYXNzICsgXCIge1xcbiAgICAgICAgd2lkdGg6IFwiICsgd2lkdGggKyBcInB4O1xcbiAgICAgICAgaGVpZ2h0OiBcIiArIGhlaWdodCArIFwicHg7XFxuICAgICAgfVxcblxcbiAgICAgIC5cIiArIGlkQ2xhc3MgKyBcIi52anMtZmx1aWQge1xcbiAgICAgICAgcGFkZGluZy10b3A6IFwiICsgcmF0aW9NdWx0aXBsaWVyICogMTAwICsgXCIlO1xcbiAgICAgIH1cXG4gICAgXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkL0NyZWF0ZSBhbiBpbnN0YW5jZSBvZiBwbGF5YmFjayB7QGxpbmsgVGVjaH0gaW5jbHVkaW5nIGVsZW1lbnRcbiAgICAgKiBhbmQgQVBJIG1ldGhvZHMuIFRoZW4gYXBwZW5kIHRoZSBgVGVjaGAgZWxlbWVudCBpbiBgUGxheWVyYCBhcyBhIGNoaWxkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRlY2hOYW1lXG4gICAgICogICAgICAgIG5hbWUgb2YgdGhlIHBsYXliYWNrIHRlY2hub2xvZ3lcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2VcbiAgICAgKiAgICAgICAgdmlkZW8gc291cmNlXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5sb2FkVGVjaF8gPSBmdW5jdGlvbiBsb2FkVGVjaF8odGVjaE5hbWUsIHNvdXJjZSkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIC8vIFBhdXNlIGFuZCByZW1vdmUgY3VycmVudCBwbGF5YmFjayB0ZWNobm9sb2d5XG4gICAgICBpZiAodGhpcy50ZWNoXykge1xuICAgICAgICB0aGlzLnVubG9hZFRlY2hfKCk7XG4gICAgICB9XG5cbiAgICAgIHZhciB0aXRsZVRlY2hOYW1lID0gdG9UaXRsZUNhc2UodGVjaE5hbWUpO1xuICAgICAgdmFyIGNhbWVsVGVjaE5hbWUgPSB0ZWNoTmFtZS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIHRlY2hOYW1lLnNsaWNlKDEpOyAvLyBnZXQgcmlkIG9mIHRoZSBIVE1MNSB2aWRlbyB0YWcgYXMgc29vbiBhcyB3ZSBhcmUgdXNpbmcgYW5vdGhlciB0ZWNoXG5cbiAgICAgIGlmICh0aXRsZVRlY2hOYW1lICE9PSAnSHRtbDUnICYmIHRoaXMudGFnKSB7XG4gICAgICAgIFRlY2guZ2V0VGVjaCgnSHRtbDUnKS5kaXNwb3NlTWVkaWFFbGVtZW50KHRoaXMudGFnKTtcbiAgICAgICAgdGhpcy50YWcucGxheWVyID0gbnVsbDtcbiAgICAgICAgdGhpcy50YWcgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRlY2hOYW1lXyA9IHRpdGxlVGVjaE5hbWU7IC8vIFR1cm4gb2ZmIEFQSSBhY2Nlc3MgYmVjYXVzZSB3ZSdyZSBsb2FkaW5nIGEgbmV3IHRlY2ggdGhhdCBtaWdodCBsb2FkIGFzeW5jaHJvbm91c2x5XG5cbiAgICAgIHRoaXMuaXNSZWFkeV8gPSBmYWxzZTsgLy8gaWYgYXV0b3BsYXkgaXMgYSBzdHJpbmcgd2UgcGFzcyBmYWxzZSB0byB0aGUgdGVjaFxuICAgICAgLy8gYmVjYXVzZSB0aGUgcGxheWVyIGlzIGdvaW5nIHRvIGhhbmRsZSBhdXRvcGxheSBvbiBgbG9hZHN0YXJ0YFxuXG4gICAgICB2YXIgYXV0b3BsYXkgPSB0eXBlb2YgdGhpcy5hdXRvcGxheSgpID09PSAnc3RyaW5nJyA/IGZhbHNlIDogdGhpcy5hdXRvcGxheSgpOyAvLyBHcmFiIHRlY2gtc3BlY2lmaWMgb3B0aW9ucyBmcm9tIHBsYXllciBvcHRpb25zIGFuZCBhZGQgc291cmNlIGFuZCBwYXJlbnQgZWxlbWVudCB0byB1c2UuXG5cbiAgICAgIHZhciB0ZWNoT3B0aW9ucyA9IHtcbiAgICAgICAgc291cmNlOiBzb3VyY2UsXG4gICAgICAgIGF1dG9wbGF5OiBhdXRvcGxheSxcbiAgICAgICAgJ25hdGl2ZUNvbnRyb2xzRm9yVG91Y2gnOiB0aGlzLm9wdGlvbnNfLm5hdGl2ZUNvbnRyb2xzRm9yVG91Y2gsXG4gICAgICAgICdwbGF5ZXJJZCc6IHRoaXMuaWQoKSxcbiAgICAgICAgJ3RlY2hJZCc6IHRoaXMuaWQoKSArIFwiX1wiICsgY2FtZWxUZWNoTmFtZSArIFwiX2FwaVwiLFxuICAgICAgICAncGxheXNpbmxpbmUnOiB0aGlzLm9wdGlvbnNfLnBsYXlzaW5saW5lLFxuICAgICAgICAncHJlbG9hZCc6IHRoaXMub3B0aW9uc18ucHJlbG9hZCxcbiAgICAgICAgJ2xvb3AnOiB0aGlzLm9wdGlvbnNfLmxvb3AsXG4gICAgICAgICdtdXRlZCc6IHRoaXMub3B0aW9uc18ubXV0ZWQsXG4gICAgICAgICdwb3N0ZXInOiB0aGlzLnBvc3RlcigpLFxuICAgICAgICAnbGFuZ3VhZ2UnOiB0aGlzLmxhbmd1YWdlKCksXG4gICAgICAgICdwbGF5ZXJFbEluZ2VzdCc6IHRoaXMucGxheWVyRWxJbmdlc3RfIHx8IGZhbHNlLFxuICAgICAgICAndnR0LmpzJzogdGhpcy5vcHRpb25zX1sndnR0LmpzJ10sXG4gICAgICAgICdjYW5PdmVycmlkZVBvc3Rlcic6ICEhdGhpcy5vcHRpb25zXy50ZWNoQ2FuT3ZlcnJpZGVQb3N0ZXIsXG4gICAgICAgICdlbmFibGVTb3VyY2VzZXQnOiB0aGlzLm9wdGlvbnNfLmVuYWJsZVNvdXJjZXNldFxuICAgICAgfTtcbiAgICAgIEFMTC5uYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lJCQxKSB7XG4gICAgICAgIHZhciBwcm9wcyA9IEFMTFtuYW1lJCQxXTtcbiAgICAgICAgdGVjaE9wdGlvbnNbcHJvcHMuZ2V0dGVyTmFtZV0gPSBfdGhpczNbcHJvcHMucHJpdmF0ZU5hbWVdO1xuICAgICAgfSk7XG4gICAgICBhc3NpZ24odGVjaE9wdGlvbnMsIHRoaXMub3B0aW9uc19bdGl0bGVUZWNoTmFtZV0pO1xuICAgICAgYXNzaWduKHRlY2hPcHRpb25zLCB0aGlzLm9wdGlvbnNfW2NhbWVsVGVjaE5hbWVdKTtcbiAgICAgIGFzc2lnbih0ZWNoT3B0aW9ucywgdGhpcy5vcHRpb25zX1t0ZWNoTmFtZS50b0xvd2VyQ2FzZSgpXSk7XG5cbiAgICAgIGlmICh0aGlzLnRhZykge1xuICAgICAgICB0ZWNoT3B0aW9ucy50YWcgPSB0aGlzLnRhZztcbiAgICAgIH1cblxuICAgICAgaWYgKHNvdXJjZSAmJiBzb3VyY2Uuc3JjID09PSB0aGlzLmNhY2hlXy5zcmMgJiYgdGhpcy5jYWNoZV8uY3VycmVudFRpbWUgPiAwKSB7XG4gICAgICAgIHRlY2hPcHRpb25zLnN0YXJ0VGltZSA9IHRoaXMuY2FjaGVfLmN1cnJlbnRUaW1lO1xuICAgICAgfSAvLyBJbml0aWFsaXplIHRlY2ggaW5zdGFuY2VcblxuXG4gICAgICB2YXIgVGVjaENsYXNzID0gVGVjaC5nZXRUZWNoKHRlY2hOYW1lKTtcblxuICAgICAgaWYgKCFUZWNoQ2xhc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gVGVjaCBuYW1lZCAnXCIgKyB0aXRsZVRlY2hOYW1lICsgXCInIGV4aXN0cyEgJ1wiICsgdGl0bGVUZWNoTmFtZSArIFwiJyBzaG91bGQgYmUgcmVnaXN0ZXJlZCB1c2luZyB2aWRlb2pzLnJlZ2lzdGVyVGVjaCgpJ1wiKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy50ZWNoXyA9IG5ldyBUZWNoQ2xhc3ModGVjaE9wdGlvbnMpOyAvLyBwbGF5ZXIudHJpZ2dlclJlYWR5IGlzIGFsd2F5cyBhc3luYywgc28gZG9uJ3QgbmVlZCB0aGlzIHRvIGJlIGFzeW5jXG5cbiAgICAgIHRoaXMudGVjaF8ucmVhZHkoYmluZCh0aGlzLCB0aGlzLmhhbmRsZVRlY2hSZWFkeV8pLCB0cnVlKTtcbiAgICAgIHRleHRUcmFja0NvbnZlcnRlci5qc29uVG9UZXh0VHJhY2tzKHRoaXMudGV4dFRyYWNrc0pzb25fIHx8IFtdLCB0aGlzLnRlY2hfKTsgLy8gTGlzdGVuIHRvIGFsbCBIVE1MNS1kZWZpbmVkIGV2ZW50cyBhbmQgdHJpZ2dlciB0aGVtIG9uIHRoZSBwbGF5ZXJcblxuICAgICAgVEVDSF9FVkVOVFNfUkVUUklHR0VSLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIF90aGlzMy5vbihfdGhpczMudGVjaF8sIGV2ZW50LCBfdGhpczNbXCJoYW5kbGVUZWNoXCIgKyB0b1RpdGxlQ2FzZShldmVudCkgKyBcIl9cIl0pO1xuICAgICAgfSk7XG4gICAgICBPYmplY3Qua2V5cyhURUNIX0VWRU5UU19RVUVVRSkuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgX3RoaXMzLm9uKF90aGlzMy50ZWNoXywgZXZlbnQsIGZ1bmN0aW9uIChldmVudE9iaikge1xuICAgICAgICAgIGlmIChfdGhpczMudGVjaF8ucGxheWJhY2tSYXRlKCkgPT09IDAgJiYgX3RoaXMzLnRlY2hfLnNlZWtpbmcoKSkge1xuICAgICAgICAgICAgX3RoaXMzLnF1ZXVlZENhbGxiYWNrc18ucHVzaCh7XG4gICAgICAgICAgICAgIGNhbGxiYWNrOiBfdGhpczNbXCJoYW5kbGVUZWNoXCIgKyBURUNIX0VWRU5UU19RVUVVRVtldmVudF0gKyBcIl9cIl0uYmluZChfdGhpczMpLFxuICAgICAgICAgICAgICBldmVudDogZXZlbnRPYmpcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3RoaXMzW1wiaGFuZGxlVGVjaFwiICsgVEVDSF9FVkVOVFNfUVVFVUVbZXZlbnRdICsgXCJfXCJdKGV2ZW50T2JqKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub24odGhpcy50ZWNoXywgJ2xvYWRzdGFydCcsIHRoaXMuaGFuZGxlVGVjaExvYWRTdGFydF8pO1xuICAgICAgdGhpcy5vbih0aGlzLnRlY2hfLCAnc291cmNlc2V0JywgdGhpcy5oYW5kbGVUZWNoU291cmNlc2V0Xyk7XG4gICAgICB0aGlzLm9uKHRoaXMudGVjaF8sICd3YWl0aW5nJywgdGhpcy5oYW5kbGVUZWNoV2FpdGluZ18pO1xuICAgICAgdGhpcy5vbih0aGlzLnRlY2hfLCAnZW5kZWQnLCB0aGlzLmhhbmRsZVRlY2hFbmRlZF8pO1xuICAgICAgdGhpcy5vbih0aGlzLnRlY2hfLCAnc2Vla2luZycsIHRoaXMuaGFuZGxlVGVjaFNlZWtpbmdfKTtcbiAgICAgIHRoaXMub24odGhpcy50ZWNoXywgJ3BsYXknLCB0aGlzLmhhbmRsZVRlY2hQbGF5Xyk7XG4gICAgICB0aGlzLm9uKHRoaXMudGVjaF8sICdmaXJzdHBsYXknLCB0aGlzLmhhbmRsZVRlY2hGaXJzdFBsYXlfKTtcbiAgICAgIHRoaXMub24odGhpcy50ZWNoXywgJ3BhdXNlJywgdGhpcy5oYW5kbGVUZWNoUGF1c2VfKTtcbiAgICAgIHRoaXMub24odGhpcy50ZWNoXywgJ2R1cmF0aW9uY2hhbmdlJywgdGhpcy5oYW5kbGVUZWNoRHVyYXRpb25DaGFuZ2VfKTtcbiAgICAgIHRoaXMub24odGhpcy50ZWNoXywgJ2Z1bGxzY3JlZW5jaGFuZ2UnLCB0aGlzLmhhbmRsZVRlY2hGdWxsc2NyZWVuQ2hhbmdlXyk7XG4gICAgICB0aGlzLm9uKHRoaXMudGVjaF8sICdlcnJvcicsIHRoaXMuaGFuZGxlVGVjaEVycm9yXyk7XG4gICAgICB0aGlzLm9uKHRoaXMudGVjaF8sICdsb2FkZWRtZXRhZGF0YScsIHRoaXMudXBkYXRlU3R5bGVFbF8pO1xuICAgICAgdGhpcy5vbih0aGlzLnRlY2hfLCAncG9zdGVyY2hhbmdlJywgdGhpcy5oYW5kbGVUZWNoUG9zdGVyQ2hhbmdlXyk7XG4gICAgICB0aGlzLm9uKHRoaXMudGVjaF8sICd0ZXh0ZGF0YScsIHRoaXMuaGFuZGxlVGVjaFRleHREYXRhXyk7XG4gICAgICB0aGlzLm9uKHRoaXMudGVjaF8sICdyYXRlY2hhbmdlJywgdGhpcy5oYW5kbGVUZWNoUmF0ZUNoYW5nZV8pO1xuICAgICAgdGhpcy51c2luZ05hdGl2ZUNvbnRyb2xzKHRoaXMudGVjaEdldF8oJ2NvbnRyb2xzJykpO1xuXG4gICAgICBpZiAodGhpcy5jb250cm9scygpICYmICF0aGlzLnVzaW5nTmF0aXZlQ29udHJvbHMoKSkge1xuICAgICAgICB0aGlzLmFkZFRlY2hDb250cm9sc0xpc3RlbmVyc18oKTtcbiAgICAgIH0gLy8gQWRkIHRoZSB0ZWNoIGVsZW1lbnQgaW4gdGhlIERPTSBpZiBpdCB3YXMgbm90IGFscmVhZHkgdGhlcmVcbiAgICAgIC8vIE1ha2Ugc3VyZSB0byBub3QgaW5zZXJ0IHRoZSBvcmlnaW5hbCB2aWRlbyBlbGVtZW50IGlmIHVzaW5nIEh0bWw1XG5cblxuICAgICAgaWYgKHRoaXMudGVjaF8uZWwoKS5wYXJlbnROb2RlICE9PSB0aGlzLmVsKCkgJiYgKHRpdGxlVGVjaE5hbWUgIT09ICdIdG1sNScgfHwgIXRoaXMudGFnKSkge1xuICAgICAgICBwcmVwZW5kVG8odGhpcy50ZWNoXy5lbCgpLCB0aGlzLmVsKCkpO1xuICAgICAgfSAvLyBHZXQgcmlkIG9mIHRoZSBvcmlnaW5hbCB2aWRlbyB0YWcgcmVmZXJlbmNlIGFmdGVyIHRoZSBmaXJzdCB0ZWNoIGlzIGxvYWRlZFxuXG5cbiAgICAgIGlmICh0aGlzLnRhZykge1xuICAgICAgICB0aGlzLnRhZy5wbGF5ZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnRhZyA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVubG9hZCBhbmQgZGlzcG9zZSBvZiB0aGUgY3VycmVudCBwbGF5YmFjayB7QGxpbmsgVGVjaH0uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by51bmxvYWRUZWNoXyA9IGZ1bmN0aW9uIHVubG9hZFRlY2hfKCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIC8vIFNhdmUgdGhlIGN1cnJlbnQgdGV4dCB0cmFja3Mgc28gdGhhdCB3ZSBjYW4gcmV1c2UgdGhlIHNhbWUgdGV4dCB0cmFja3Mgd2l0aCB0aGUgbmV4dCB0ZWNoXG4gICAgICBBTEwubmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSQkMSkge1xuICAgICAgICB2YXIgcHJvcHMgPSBBTExbbmFtZSQkMV07XG4gICAgICAgIF90aGlzNFtwcm9wcy5wcml2YXRlTmFtZV0gPSBfdGhpczRbcHJvcHMuZ2V0dGVyTmFtZV0oKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy50ZXh0VHJhY2tzSnNvbl8gPSB0ZXh0VHJhY2tDb252ZXJ0ZXIudGV4dFRyYWNrc1RvSnNvbih0aGlzLnRlY2hfKTtcbiAgICAgIHRoaXMuaXNSZWFkeV8gPSBmYWxzZTtcbiAgICAgIHRoaXMudGVjaF8uZGlzcG9zZSgpO1xuICAgICAgdGhpcy50ZWNoXyA9IGZhbHNlO1xuXG4gICAgICBpZiAodGhpcy5pc1Bvc3RlckZyb21UZWNoXykge1xuICAgICAgICB0aGlzLnBvc3Rlcl8gPSAnJztcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdwb3N0ZXJjaGFuZ2UnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5pc1Bvc3RlckZyb21UZWNoXyA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQge0BsaW5rIFRlY2h9LlxuICAgICAqIEl0IHdpbGwgcHJpbnQgYSB3YXJuaW5nIGJ5IGRlZmF1bHQgYWJvdXQgdGhlIGRhbmdlciBvZiB1c2luZyB0aGUgdGVjaCBkaXJlY3RseVxuICAgICAqIGJ1dCBhbnkgYXJndW1lbnQgdGhhdCBpcyBwYXNzZWQgaW4gd2lsbCBzaWxlbmNlIHRoZSB3YXJuaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBbc2FmZXR5XVxuICAgICAqICAgICAgICBBbnl0aGluZyBwYXNzZWQgaW4gdG8gc2lsZW5jZSB0aGUgd2FybmluZ1xuICAgICAqXG4gICAgICogQHJldHVybiB7VGVjaH1cbiAgICAgKiAgICAgICAgIFRoZSBUZWNoXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnRlY2ggPSBmdW5jdGlvbiB0ZWNoKHNhZmV0eSkge1xuICAgICAgaWYgKHNhZmV0eSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGxvZy53YXJuKHRzbWwoX3RlbXBsYXRlT2JqZWN0JDIoKSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy50ZWNoXztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHVwIGNsaWNrIGFuZCB0b3VjaCBsaXN0ZW5lcnMgZm9yIHRoZSBwbGF5YmFjayBlbGVtZW50XG4gICAgICpcbiAgICAgKiAtIE9uIGRlc2t0b3BzOiBhIGNsaWNrIG9uIHRoZSB2aWRlbyBpdHNlbGYgd2lsbCB0b2dnbGUgcGxheWJhY2tcbiAgICAgKiAtIE9uIG1vYmlsZSBkZXZpY2VzOiBhIGNsaWNrIG9uIHRoZSB2aWRlbyB0b2dnbGVzIGNvbnRyb2xzXG4gICAgICogICB3aGljaCBpcyBkb25lIGJ5IHRvZ2dsaW5nIHRoZSB1c2VyIHN0YXRlIGJldHdlZW4gYWN0aXZlIGFuZFxuICAgICAqICAgaW5hY3RpdmVcbiAgICAgKiAtIEEgdGFwIGNhbiBzaWduYWwgdGhhdCBhIHVzZXIgaGFzIGJlY29tZSBhY3RpdmUgb3IgaGFzIGJlY29tZSBpbmFjdGl2ZVxuICAgICAqICAgZS5nLiBhIHF1aWNrIHRhcCBvbiBhbiBpUGhvbmUgbW92aWUgc2hvdWxkIHJldmVhbCB0aGUgY29udHJvbHMuIEFub3RoZXJcbiAgICAgKiAgIHF1aWNrIHRhcCBzaG91bGQgaGlkZSB0aGVtIGFnYWluIChzaWduYWxpbmcgdGhlIHVzZXIgaXMgaW4gYW4gaW5hY3RpdmVcbiAgICAgKiAgIHZpZXdpbmcgc3RhdGUpXG4gICAgICogLSBJbiBhZGRpdGlvbiB0byB0aGlzLCB3ZSBzdGlsbCB3YW50IHRoZSB1c2VyIHRvIGJlIGNvbnNpZGVyZWQgaW5hY3RpdmUgYWZ0ZXJcbiAgICAgKiAgIGEgZmV3IHNlY29uZHMgb2YgaW5hY3Rpdml0eS5cbiAgICAgKlxuICAgICAqID4gTm90ZTogdGhlIG9ubHkgcGFydCBvZiBpT1MgaW50ZXJhY3Rpb24gd2UgY2FuJ3QgbWltaWMgd2l0aCB0aGlzIHNldHVwXG4gICAgICogaXMgYSB0b3VjaCBhbmQgaG9sZCBvbiB0aGUgdmlkZW8gZWxlbWVudCBjb3VudGluZyBhcyBhY3Rpdml0eSBpbiBvcmRlciB0b1xuICAgICAqIGtlZXAgdGhlIGNvbnRyb2xzIHNob3dpbmcsIGJ1dCB0aGF0IHNob3VsZG4ndCBiZSBhbiBpc3N1ZS4gQSB0b3VjaCBhbmQgaG9sZFxuICAgICAqIG9uIGFueSBjb250cm9scyB3aWxsIHN0aWxsIGtlZXAgdGhlIHVzZXIgYWN0aXZlXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5hZGRUZWNoQ29udHJvbHNMaXN0ZW5lcnNfID0gZnVuY3Rpb24gYWRkVGVjaENvbnRyb2xzTGlzdGVuZXJzXygpIHtcbiAgICAgIC8vIE1ha2Ugc3VyZSB0byByZW1vdmUgYWxsIHRoZSBwcmV2aW91cyBsaXN0ZW5lcnMgaW4gY2FzZSB3ZSBhcmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzLlxuICAgICAgdGhpcy5yZW1vdmVUZWNoQ29udHJvbHNMaXN0ZW5lcnNfKCk7IC8vIFNvbWUgYnJvd3NlcnMgKENocm9tZSAmIElFKSBkb24ndCB0cmlnZ2VyIGEgY2xpY2sgb24gYSBmbGFzaCBzd2YsIGJ1dCBkb1xuICAgICAgLy8gdHJpZ2dlciBtb3VzZWRvd24vdXAuXG4gICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE0NDQ1NjIvamF2YXNjcmlwdC1vbmNsaWNrLWV2ZW50LW92ZXItZmxhc2gtb2JqZWN0XG4gICAgICAvLyBBbnkgdG91Y2ggZXZlbnRzIGFyZSBzZXQgdG8gYmxvY2sgdGhlIG1vdXNlZG93biBldmVudCBmcm9tIGhhcHBlbmluZ1xuXG4gICAgICB0aGlzLm9uKHRoaXMudGVjaF8sICdtb3VzZWRvd24nLCB0aGlzLmhhbmRsZVRlY2hDbGlja18pO1xuICAgICAgdGhpcy5vbih0aGlzLnRlY2hfLCAnZGJsY2xpY2snLCB0aGlzLmhhbmRsZVRlY2hEb3VibGVDbGlja18pOyAvLyBJZiB0aGUgY29udHJvbHMgd2VyZSBoaWRkZW4gd2UgZG9uJ3Qgd2FudCB0aGF0IHRvIGNoYW5nZSB3aXRob3V0IGEgdGFwIGV2ZW50XG4gICAgICAvLyBzbyB3ZSdsbCBjaGVjayBpZiB0aGUgY29udHJvbHMgd2VyZSBhbHJlYWR5IHNob3dpbmcgYmVmb3JlIHJlcG9ydGluZyB1c2VyXG4gICAgICAvLyBhY3Rpdml0eVxuXG4gICAgICB0aGlzLm9uKHRoaXMudGVjaF8sICd0b3VjaHN0YXJ0JywgdGhpcy5oYW5kbGVUZWNoVG91Y2hTdGFydF8pO1xuICAgICAgdGhpcy5vbih0aGlzLnRlY2hfLCAndG91Y2htb3ZlJywgdGhpcy5oYW5kbGVUZWNoVG91Y2hNb3ZlXyk7XG4gICAgICB0aGlzLm9uKHRoaXMudGVjaF8sICd0b3VjaGVuZCcsIHRoaXMuaGFuZGxlVGVjaFRvdWNoRW5kXyk7IC8vIFRoZSB0YXAgbGlzdGVuZXIgbmVlZHMgdG8gY29tZSBhZnRlciB0aGUgdG91Y2hlbmQgbGlzdGVuZXIgYmVjYXVzZSB0aGUgdGFwXG4gICAgICAvLyBsaXN0ZW5lciBjYW5jZWxzIG91dCBhbnkgcmVwb3J0ZWRVc2VyQWN0aXZpdHkgd2hlbiBzZXR0aW5nIHVzZXJBY3RpdmUoZmFsc2UpXG5cbiAgICAgIHRoaXMub24odGhpcy50ZWNoXywgJ3RhcCcsIHRoaXMuaGFuZGxlVGVjaFRhcF8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGxpc3RlbmVycyB1c2VkIGZvciBjbGljayBhbmQgdGFwIGNvbnRyb2xzLiBUaGlzIGlzIG5lZWRlZCBmb3JcbiAgICAgKiB0b2dnbGluZyB0byBjb250cm9scyBkaXNhYmxlZCwgd2hlcmUgYSB0YXAvdG91Y2ggc2hvdWxkIGRvIG5vdGhpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5yZW1vdmVUZWNoQ29udHJvbHNMaXN0ZW5lcnNfID0gZnVuY3Rpb24gcmVtb3ZlVGVjaENvbnRyb2xzTGlzdGVuZXJzXygpIHtcbiAgICAgIC8vIFdlIGRvbid0IHdhbnQgdG8ganVzdCB1c2UgYHRoaXMub2ZmKClgIGJlY2F1c2UgdGhlcmUgbWlnaHQgYmUgb3RoZXIgbmVlZGVkXG4gICAgICAvLyBsaXN0ZW5lcnMgYWRkZWQgYnkgdGVjaHMgdGhhdCBleHRlbmQgdGhpcy5cbiAgICAgIHRoaXMub2ZmKHRoaXMudGVjaF8sICd0YXAnLCB0aGlzLmhhbmRsZVRlY2hUYXBfKTtcbiAgICAgIHRoaXMub2ZmKHRoaXMudGVjaF8sICd0b3VjaHN0YXJ0JywgdGhpcy5oYW5kbGVUZWNoVG91Y2hTdGFydF8pO1xuICAgICAgdGhpcy5vZmYodGhpcy50ZWNoXywgJ3RvdWNobW92ZScsIHRoaXMuaGFuZGxlVGVjaFRvdWNoTW92ZV8pO1xuICAgICAgdGhpcy5vZmYodGhpcy50ZWNoXywgJ3RvdWNoZW5kJywgdGhpcy5oYW5kbGVUZWNoVG91Y2hFbmRfKTtcbiAgICAgIHRoaXMub2ZmKHRoaXMudGVjaF8sICdtb3VzZWRvd24nLCB0aGlzLmhhbmRsZVRlY2hDbGlja18pO1xuICAgICAgdGhpcy5vZmYodGhpcy50ZWNoXywgJ2RibGNsaWNrJywgdGhpcy5oYW5kbGVUZWNoRG91YmxlQ2xpY2tfKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGxheWVyIHdhaXRzIGZvciB0aGUgdGVjaCB0byBiZSByZWFkeVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlVGVjaFJlYWR5XyA9IGZ1bmN0aW9uIGhhbmRsZVRlY2hSZWFkeV8oKSB7XG4gICAgICB0aGlzLnRyaWdnZXJSZWFkeSgpOyAvLyBLZWVwIHRoZSBzYW1lIHZvbHVtZSBhcyBiZWZvcmVcblxuICAgICAgaWYgKHRoaXMuY2FjaGVfLnZvbHVtZSkge1xuICAgICAgICB0aGlzLnRlY2hDYWxsXygnc2V0Vm9sdW1lJywgdGhpcy5jYWNoZV8udm9sdW1lKTtcbiAgICAgIH0gLy8gTG9vayBpZiB0aGUgdGVjaCBmb3VuZCBhIGhpZ2hlciByZXNvbHV0aW9uIHBvc3RlciB3aGlsZSBsb2FkaW5nXG5cblxuICAgICAgdGhpcy5oYW5kbGVUZWNoUG9zdGVyQ2hhbmdlXygpOyAvLyBVcGRhdGUgdGhlIGR1cmF0aW9uIGlmIGF2YWlsYWJsZVxuXG4gICAgICB0aGlzLmhhbmRsZVRlY2hEdXJhdGlvbkNoYW5nZV8oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlnZ2VyIHRoZSBgbG9hZHN0YXJ0YCBldmVudCB0aGF0IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIHtAbGluayBUZWNofS4gVGhpc1xuICAgICAqIGZ1bmN0aW9uIHdpbGwgYWxzbyB0cmlnZ2VyIHtAbGluayBQbGF5ZXIjZmlyc3RwbGF5fSBpZiBpdCBpcyB0aGUgZmlyc3QgbG9hZHN0YXJ0XG4gICAgICogZm9yIGEgdmlkZW8uXG4gICAgICpcbiAgICAgKiBAZmlyZXMgUGxheWVyI2xvYWRzdGFydFxuICAgICAqIEBmaXJlcyBQbGF5ZXIjZmlyc3RwbGF5XG4gICAgICogQGxpc3RlbnMgVGVjaCNsb2Fkc3RhcnRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVUZWNoTG9hZFN0YXJ0XyA9IGZ1bmN0aW9uIGhhbmRsZVRlY2hMb2FkU3RhcnRfKCkge1xuICAgICAgLy8gVE9ETzogVXBkYXRlIHRvIHVzZSBgZW1wdGllZGAgZXZlbnQgaW5zdGVhZC4gU2VlICMxMjc3LlxuICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWVuZGVkJyk7XG4gICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtc2Vla2luZycpOyAvLyByZXNldCB0aGUgZXJyb3Igc3RhdGVcblxuICAgICAgdGhpcy5lcnJvcihudWxsKTsgLy8gVXBkYXRlIHRoZSBkdXJhdGlvblxuXG4gICAgICB0aGlzLmhhbmRsZVRlY2hEdXJhdGlvbkNoYW5nZV8oKTsgLy8gSWYgaXQncyBhbHJlYWR5IHBsYXlpbmcgd2Ugd2FudCB0byB0cmlnZ2VyIGEgZmlyc3RwbGF5IGV2ZW50IG5vdy5cbiAgICAgIC8vIFRoZSBmaXJzdHBsYXkgZXZlbnQgcmVsaWVzIG9uIGJvdGggdGhlIHBsYXkgYW5kIGxvYWRzdGFydCBldmVudHNcbiAgICAgIC8vIHdoaWNoIGNhbiBoYXBwZW4gaW4gYW55IG9yZGVyIGZvciBhIG5ldyBzb3VyY2VcblxuICAgICAgaWYgKCF0aGlzLnBhdXNlZCgpKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIHRoZSB1c2VyIGFnZW50IGJlZ2lucyBsb29raW5nIGZvciBtZWRpYSBkYXRhXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQbGF5ZXIjbG9hZHN0YXJ0XG4gICAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJpZ2dlcignbG9hZHN0YXJ0Jyk7XG4gICAgICAgIHRoaXMudHJpZ2dlcignZmlyc3RwbGF5Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyByZXNldCB0aGUgaGFzU3RhcnRlZCBzdGF0ZVxuICAgICAgICB0aGlzLmhhc1N0YXJ0ZWQoZmFsc2UpO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2xvYWRzdGFydCcpO1xuICAgICAgfSAvLyBhdXRvcGxheSBoYXBwZW5zIGFmdGVyIGxvYWRzdGFydCBmb3IgdGhlIGJyb3dzZXIsXG4gICAgICAvLyBzbyB3ZSBtaW1pYyB0aGF0IGJlaGF2aW9yXG5cblxuICAgICAgdGhpcy5tYW51YWxBdXRvcGxheV8odGhpcy5hdXRvcGxheSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGF1dG9wbGF5IHN0cmluZyB2YWx1ZXMsIHJhdGhlciB0aGFuIHRoZSB0eXBpY2FsIGJvb2xlYW5cbiAgICAgKiB2YWx1ZXMgdGhhdCBzaG91bGQgYmUgaGFuZGxlZCBieSB0aGUgdGVjaC4gTm90ZSB0aGF0IHRoaXMgaXMgbm90XG4gICAgICogcGFydCBvZiBhbnkgc3BlY2lmaWNhdGlvbi4gVmFsaWQgdmFsdWVzIGFuZCB3aGF0IHRoZXkgZG8gY2FuIGJlXG4gICAgICogZm91bmQgb24gdGhlIGF1dG9wbGF5IGdldHRlciBhdCBQbGF5ZXIjYXV0b3BsYXkoKVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5tYW51YWxBdXRvcGxheV8gPSBmdW5jdGlvbiBtYW51YWxBdXRvcGxheV8odHlwZSkge1xuICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgIGlmICghdGhpcy50ZWNoXyB8fCB0eXBlb2YgdHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgbXV0ZWQgPSBmdW5jdGlvbiBtdXRlZCgpIHtcbiAgICAgICAgdmFyIHByZXZpb3VzbHlNdXRlZCA9IF90aGlzNS5tdXRlZCgpO1xuXG4gICAgICAgIF90aGlzNS5tdXRlZCh0cnVlKTtcblxuICAgICAgICB2YXIgcmVzdG9yZU11dGVkID0gZnVuY3Rpb24gcmVzdG9yZU11dGVkKCkge1xuICAgICAgICAgIF90aGlzNS5tdXRlZChwcmV2aW91c2x5TXV0ZWQpO1xuICAgICAgICB9OyAvLyByZXN0b3JlIG11dGVkIG9uIHBsYXkgdGVybWluYXRhdGlvblxuXG5cbiAgICAgICAgX3RoaXM1LnBsYXlUZXJtaW5hdGVkUXVldWVfLnB1c2gocmVzdG9yZU11dGVkKTtcblxuICAgICAgICB2YXIgbXV0ZWRQcm9taXNlID0gX3RoaXM1LnBsYXkoKTtcblxuICAgICAgICBpZiAoIWlzUHJvbWlzZShtdXRlZFByb21pc2UpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG11dGVkUHJvbWlzZS5jYXRjaChyZXN0b3JlTXV0ZWQpO1xuICAgICAgfTtcblxuICAgICAgdmFyIHByb21pc2U7IC8vIGlmIG11dGVkIGRlZmF1bHRzIHRvIHRydWVcbiAgICAgIC8vIHRoZSBvbmx5IHRoaW5nIHdlIGNhbiBkbyBpcyBjYWxsIHBsYXlcblxuICAgICAgaWYgKHR5cGUgPT09ICdhbnknICYmIHRoaXMubXV0ZWQoKSAhPT0gdHJ1ZSkge1xuICAgICAgICBwcm9taXNlID0gdGhpcy5wbGF5KCk7XG5cbiAgICAgICAgaWYgKGlzUHJvbWlzZShwcm9taXNlKSkge1xuICAgICAgICAgIHByb21pc2UgPSBwcm9taXNlLmNhdGNoKG11dGVkKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnbXV0ZWQnICYmIHRoaXMubXV0ZWQoKSAhPT0gdHJ1ZSkge1xuICAgICAgICBwcm9taXNlID0gbXV0ZWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb21pc2UgPSB0aGlzLnBsYXkoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc1Byb21pc2UocHJvbWlzZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXM1LnRyaWdnZXIoe1xuICAgICAgICAgIHR5cGU6ICdhdXRvcGxheS1zdWNjZXNzJyxcbiAgICAgICAgICBhdXRvcGxheTogdHlwZVxuICAgICAgICB9KTtcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIF90aGlzNS50cmlnZ2VyKHtcbiAgICAgICAgICB0eXBlOiAnYXV0b3BsYXktZmFpbHVyZScsXG4gICAgICAgICAgYXV0b3BsYXk6IHR5cGVcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBpbnRlcm5hbCBzb3VyY2UgY2FjaGVzIHNvIHRoYXQgd2UgcmV0dXJuIHRoZSBjb3JyZWN0IHNvdXJjZSBmcm9tXG4gICAgICogYHNyYygpYCwgYGN1cnJlbnRTb3VyY2UoKWAsIGFuZCBgY3VycmVudFNvdXJjZXMoKWAuXG4gICAgICpcbiAgICAgKiA+IE5vdGU6IGBjdXJyZW50U291cmNlc2Agd2lsbCBub3QgYmUgdXBkYXRlZCBpZiB0aGUgc291cmNlIHRoYXQgaXMgcGFzc2VkIGluIGV4aXN0c1xuICAgICAqICAgICAgICAgaW4gdGhlIGN1cnJlbnQgYGN1cnJlbnRTb3VyY2VzYCBjYWNoZS5cbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtUZWNoflNvdXJjZU9iamVjdH0gc3JjT2JqXG4gICAgICogICAgICAgIEEgc3RyaW5nIG9yIG9iamVjdCBzb3VyY2UgdG8gdXBkYXRlIG91ciBjYWNoZXMgdG8uXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnVwZGF0ZVNvdXJjZUNhY2hlc18gPSBmdW5jdGlvbiB1cGRhdGVTb3VyY2VDYWNoZXNfKHNyY09iaikge1xuICAgICAgaWYgKHNyY09iaiA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHNyY09iaiA9ICcnO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3JjID0gc3JjT2JqO1xuICAgICAgdmFyIHR5cGUgPSAnJztcblxuICAgICAgaWYgKHR5cGVvZiBzcmMgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHNyYyA9IHNyY09iai5zcmM7XG4gICAgICAgIHR5cGUgPSBzcmNPYmoudHlwZTtcbiAgICAgIH0gLy8gbWFrZSBzdXJlIGFsbCB0aGUgY2FjaGVzIGFyZSBzZXQgdG8gZGVmYXVsdCB2YWx1ZXNcbiAgICAgIC8vIHRvIHByZXZlbnQgbnVsbCBjaGVja2luZ1xuXG5cbiAgICAgIHRoaXMuY2FjaGVfLnNvdXJjZSA9IHRoaXMuY2FjaGVfLnNvdXJjZSB8fCB7fTtcbiAgICAgIHRoaXMuY2FjaGVfLnNvdXJjZXMgPSB0aGlzLmNhY2hlXy5zb3VyY2VzIHx8IFtdOyAvLyB0cnkgdG8gZ2V0IHRoZSB0eXBlIG9mIHRoZSBzcmMgdGhhdCB3YXMgcGFzc2VkIGluXG5cbiAgICAgIGlmIChzcmMgJiYgIXR5cGUpIHtcbiAgICAgICAgdHlwZSA9IGZpbmRNaW1ldHlwZSh0aGlzLCBzcmMpO1xuICAgICAgfSAvLyB1cGRhdGUgYGN1cnJlbnRTb3VyY2VgIGNhY2hlIGFsd2F5c1xuXG5cbiAgICAgIHRoaXMuY2FjaGVfLnNvdXJjZSA9IG1lcmdlT3B0aW9ucyh7fSwgc3JjT2JqLCB7XG4gICAgICAgIHNyYzogc3JjLFxuICAgICAgICB0eXBlOiB0eXBlXG4gICAgICB9KTtcbiAgICAgIHZhciBtYXRjaGluZ1NvdXJjZXMgPSB0aGlzLmNhY2hlXy5zb3VyY2VzLmZpbHRlcihmdW5jdGlvbiAocykge1xuICAgICAgICByZXR1cm4gcy5zcmMgJiYgcy5zcmMgPT09IHNyYztcbiAgICAgIH0pO1xuICAgICAgdmFyIHNvdXJjZUVsU291cmNlcyA9IFtdO1xuICAgICAgdmFyIHNvdXJjZUVscyA9IHRoaXMuJCQoJ3NvdXJjZScpO1xuICAgICAgdmFyIG1hdGNoaW5nU291cmNlRWxzID0gW107XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc291cmNlRWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzb3VyY2VPYmogPSBnZXRBdHRyaWJ1dGVzKHNvdXJjZUVsc1tpXSk7XG4gICAgICAgIHNvdXJjZUVsU291cmNlcy5wdXNoKHNvdXJjZU9iaik7XG5cbiAgICAgICAgaWYgKHNvdXJjZU9iai5zcmMgJiYgc291cmNlT2JqLnNyYyA9PT0gc3JjKSB7XG4gICAgICAgICAgbWF0Y2hpbmdTb3VyY2VFbHMucHVzaChzb3VyY2VPYmouc3JjKTtcbiAgICAgICAgfVxuICAgICAgfSAvLyBpZiB3ZSBoYXZlIG1hdGNoaW5nIHNvdXJjZSBlbHMgYnV0IG5vdCBtYXRjaGluZyBzb3VyY2VzXG4gICAgICAvLyB0aGUgY3VycmVudCBzb3VyY2UgY2FjaGUgaXMgbm90IHVwIHRvIGRhdGVcblxuXG4gICAgICBpZiAobWF0Y2hpbmdTb3VyY2VFbHMubGVuZ3RoICYmICFtYXRjaGluZ1NvdXJjZXMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuY2FjaGVfLnNvdXJjZXMgPSBzb3VyY2VFbFNvdXJjZXM7IC8vIGlmIHdlIGRvbid0IGhhdmUgbWF0Y2hpbmcgc291cmNlIG9yIHNvdXJjZSBlbHMgc2V0IHRoZVxuICAgICAgICAvLyBzb3VyY2VzIGNhY2hlIHRvIHRoZSBgY3VycmVudFNvdXJjZWAgY2FjaGVcbiAgICAgIH0gZWxzZSBpZiAoIW1hdGNoaW5nU291cmNlcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5jYWNoZV8uc291cmNlcyA9IFt0aGlzLmNhY2hlXy5zb3VyY2VdO1xuICAgICAgfSAvLyB1cGRhdGUgdGhlIHRlY2ggYHNyY2AgY2FjaGVcblxuXG4gICAgICB0aGlzLmNhY2hlXy5zcmMgPSBzcmM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqICpFWFBFUklNRU5UQUwqIEZpcmVkIHdoZW4gdGhlIHNvdXJjZSBpcyBzZXQgb3IgY2hhbmdlZCBvbiB0aGUge0BsaW5rIFRlY2h9XG4gICAgICogY2F1c2luZyB0aGUgbWVkaWEgZWxlbWVudCB0byByZWxvYWQuXG4gICAgICpcbiAgICAgKiBJdCB3aWxsIGZpcmUgZm9yIHRoZSBpbml0aWFsIHNvdXJjZSBhbmQgZWFjaCBzdWJzZXF1ZW50IHNvdXJjZS5cbiAgICAgKiBUaGlzIGV2ZW50IGlzIGEgY3VzdG9tIGV2ZW50IGZyb20gVmlkZW8uanMgYW5kIGlzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgICAqXG4gICAgICogVGhlIGV2ZW50IG9iamVjdCBmb3IgdGhpcyBldmVudCBjb250YWlucyBhIGBzcmNgIHByb3BlcnR5IHRoYXQgd2lsbCBjb250YWluIHRoZSBzb3VyY2VcbiAgICAgKiB0aGF0IHdhcyBhdmFpbGFibGUgd2hlbiB0aGUgZXZlbnQgd2FzIHRyaWdnZXJlZC4gVGhpcyBpcyBnZW5lcmFsbHkgb25seSBuZWNlc3NhcnkgaWYgVmlkZW8uanNcbiAgICAgKiBpcyBzd2l0Y2hpbmcgdGVjaHMgd2hpbGUgdGhlIHNvdXJjZSB3YXMgYmVpbmcgY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEl0IGlzIGFsc28gZmlyZWQgd2hlbiBgbG9hZGAgaXMgY2FsbGVkIG9uIHRoZSBwbGF5ZXIgKG9yIG1lZGlhIGVsZW1lbnQpXG4gICAgICogYmVjYXVzZSB0aGUge0BsaW5rIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL21lZGlhLmh0bWwjZG9tLW1lZGlhLWxvYWR8c3BlY2lmaWNhdGlvbiBmb3IgYGxvYWRgfVxuICAgICAqIHNheXMgdGhhdCB0aGUgcmVzb3VyY2Ugc2VsZWN0aW9uIGFsZ29yaXRobSBuZWVkcyB0byBiZSBhYm9ydGVkIGFuZCByZXN0YXJ0ZWQuXG4gICAgICogSW4gdGhpcyBjYXNlLCBpdCBpcyB2ZXJ5IGxpa2VseSB0aGF0IHRoZSBgc3JjYCBwcm9wZXJ0eSB3aWxsIGJlIHNldCB0byB0aGVcbiAgICAgKiBlbXB0eSBzdHJpbmcgYFwiXCJgIHRvIGluZGljYXRlIHdlIGRvIG5vdCBrbm93IHdoYXQgdGhlIHNvdXJjZSB3aWxsIGJlIGJ1dFxuICAgICAqIHRoYXQgaXQgaXMgY2hhbmdpbmcuXG4gICAgICpcbiAgICAgKiAqVGhpcyBldmVudCBpcyBjdXJyZW50bHkgc3RpbGwgZXhwZXJpbWVudGFsIGFuZCBtYXkgY2hhbmdlIGluIG1pbm9yIHJlbGVhc2VzLipcbiAgICAgKiBfX1RvIHVzZSB0aGlzLCBwYXNzIGBlbmFibGVTb3VyY2VzZXRgIG9wdGlvbiB0byB0aGUgcGxheWVyLl9fXG4gICAgICpcbiAgICAgKiBAZXZlbnQgUGxheWVyI3NvdXJjZXNldFxuICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgKiBAcHJvcCB7c3RyaW5nfSBzcmNcbiAgICAgKiAgICAgICAgICAgICAgICBUaGUgc291cmNlIHVybCBhdmFpbGFibGUgd2hlbiB0aGUgYHNvdXJjZXNldGAgd2FzIHRyaWdnZXJlZC5cbiAgICAgKiAgICAgICAgICAgICAgICBJdCB3aWxsIGJlIGFuIGVtcHR5IHN0cmluZyBpZiB3ZSBjYW5ub3Qga25vdyB3aGF0IHRoZSBzb3VyY2UgaXNcbiAgICAgKiAgICAgICAgICAgICAgICBidXQga25vdyB0aGF0IHRoZSBzb3VyY2Ugd2lsbCBjaGFuZ2UuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWdnZXIgdGhlIGBzb3VyY2VzZXRgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgICAqXG4gICAgICogQGZpcmVzIFBsYXllciNzb3VyY2VzZXRcbiAgICAgKiBAbGlzdGVucyBUZWNoI3NvdXJjZXNldFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZVRlY2hTb3VyY2VzZXRfID0gZnVuY3Rpb24gaGFuZGxlVGVjaFNvdXJjZXNldF8oZXZlbnQpIHtcbiAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICAvLyBvbmx5IHVwZGF0ZSB0aGUgc291cmNlIGNhY2hlIHdoZW4gdGhlIHNvdXJjZVxuICAgICAgLy8gd2FzIG5vdCB1cGRhdGVkIHVzaW5nIHRoZSBwbGF5ZXIgYXBpXG4gICAgICBpZiAoIXRoaXMuY2hhbmdpbmdTcmNfKSB7XG4gICAgICAgIHZhciB1cGRhdGVTb3VyY2VDYWNoZXMgPSBmdW5jdGlvbiB1cGRhdGVTb3VyY2VDYWNoZXMoc3JjKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzNi51cGRhdGVTb3VyY2VDYWNoZXNfKHNyYyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHBsYXllclNyYyA9IHRoaXMuY3VycmVudFNvdXJjZSgpLnNyYztcbiAgICAgICAgdmFyIGV2ZW50U3JjID0gZXZlbnQuc3JjOyAvLyBpZiB3ZSBoYXZlIGEgcGxheWVyU3JjIHRoYXQgaXMgbm90IGEgYmxvYiwgYW5kIGEgdGVjaCBzcmMgdGhhdCBpcyBhIGJsb2JcblxuICAgICAgICBpZiAocGxheWVyU3JjICYmICEvXmJsb2I6Ly50ZXN0KHBsYXllclNyYykgJiYgL15ibG9iOi8udGVzdChldmVudFNyYykpIHtcbiAgICAgICAgICAvLyBpZiBib3RoIHRoZSB0ZWNoIHNvdXJjZSBhbmQgdGhlIHBsYXllciBzb3VyY2Ugd2VyZSB1cGRhdGVkIHdlIGFzc3VtZVxuICAgICAgICAgIC8vIHNvbWV0aGluZyBsaWtlIEB2aWRlb2pzL2h0dHAtc3RyZWFtaW5nIGRpZCB0aGUgc291cmNlc2V0IGFuZCBza2lwIHVwZGF0aW5nIHRoZSBzb3VyY2UgY2FjaGUuXG4gICAgICAgICAgaWYgKCF0aGlzLmxhc3RTb3VyY2VfIHx8IHRoaXMubGFzdFNvdXJjZV8udGVjaCAhPT0gZXZlbnRTcmMgJiYgdGhpcy5sYXN0U291cmNlXy5wbGF5ZXIgIT09IHBsYXllclNyYykge1xuICAgICAgICAgICAgdXBkYXRlU291cmNlQ2FjaGVzID0gZnVuY3Rpb24gdXBkYXRlU291cmNlQ2FjaGVzKCkge307XG4gICAgICAgICAgfVxuICAgICAgICB9IC8vIHVwZGF0ZSB0aGUgc291cmNlIHRvIHRoZSBpbnRpYWwgc291cmNlIHJpZ2h0IGF3YXlcbiAgICAgICAgLy8gaW4gc29tZSBjYXNlcyB0aGlzIHdpbGwgYmUgZW1wdHkgc3RyaW5nXG5cblxuICAgICAgICB1cGRhdGVTb3VyY2VDYWNoZXMoZXZlbnRTcmMpOyAvLyBpZiB0aGUgYHNvdXJjZXNldGAgYHNyY2Agd2FzIGFuIGVtcHR5IHN0cmluZ1xuICAgICAgICAvLyB3YWl0IGZvciBhIGBsb2Fkc3RhcnRgIHRvIHVwZGF0ZSB0aGUgY2FjaGUgdG8gYGN1cnJlbnRTcmNgLlxuICAgICAgICAvLyBJZiBhIHNvdXJjZXNldCBoYXBwZW5zIGJlZm9yZSBhIGBsb2Fkc3RhcnRgLCB3ZSByZXNldCB0aGUgc3RhdGVcbiAgICAgICAgLy8gYXMgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBhZ2Fpbi5cblxuICAgICAgICBpZiAoIWV2ZW50LnNyYykge1xuICAgICAgICAgIHZhciB1cGRhdGVDYWNoZSA9IGZ1bmN0aW9uIHVwZGF0ZUNhY2hlKGUpIHtcbiAgICAgICAgICAgIGlmIChlLnR5cGUgIT09ICdzb3VyY2VzZXQnKSB7XG4gICAgICAgICAgICAgIHZhciB0ZWNoU3JjID0gX3RoaXM2LnRlY2hHZXQoJ2N1cnJlbnRTcmMnKTtcblxuICAgICAgICAgICAgICBfdGhpczYubGFzdFNvdXJjZV8udGVjaCA9IHRlY2hTcmM7XG5cbiAgICAgICAgICAgICAgX3RoaXM2LnVwZGF0ZVNvdXJjZUNhY2hlc18odGVjaFNyYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF90aGlzNi50ZWNoXy5vZmYoWydzb3VyY2VzZXQnLCAnbG9hZHN0YXJ0J10sIHVwZGF0ZUNhY2hlKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdGhpcy50ZWNoXy5vbmUoWydzb3VyY2VzZXQnLCAnbG9hZHN0YXJ0J10sIHVwZGF0ZUNhY2hlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmxhc3RTb3VyY2VfID0ge1xuICAgICAgICBwbGF5ZXI6IHRoaXMuY3VycmVudFNvdXJjZSgpLnNyYyxcbiAgICAgICAgdGVjaDogZXZlbnQuc3JjXG4gICAgICB9O1xuICAgICAgdGhpcy50cmlnZ2VyKHtcbiAgICAgICAgc3JjOiBldmVudC5zcmMsXG4gICAgICAgIHR5cGU6ICdzb3VyY2VzZXQnXG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkL3JlbW92ZSB0aGUgdmpzLWhhcy1zdGFydGVkIGNsYXNzXG4gICAgICpcbiAgICAgKiBAZmlyZXMgUGxheWVyI2ZpcnN0cGxheVxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSByZXF1ZXN0XG4gICAgICogICAgICAgIC0gdHJ1ZTogYWRkcyB0aGUgY2xhc3NcbiAgICAgKiAgICAgICAgLSBmYWxzZTogcmVtb3ZlIHRoZSBjbGFzc1xuICAgICAqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKiAgICAgICAgIHRoZSBib29sZWFuIHZhbHVlIG9mIGhhc1N0YXJ0ZWRfXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhc1N0YXJ0ZWQgPSBmdW5jdGlvbiBoYXNTdGFydGVkKHJlcXVlc3QpIHtcbiAgICAgIGlmIChyZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gYWN0IGFzIGdldHRlciwgaWYgd2UgaGF2ZSBubyByZXF1ZXN0IHRvIGNoYW5nZVxuICAgICAgICByZXR1cm4gdGhpcy5oYXNTdGFydGVkXztcbiAgICAgIH1cblxuICAgICAgaWYgKHJlcXVlc3QgPT09IHRoaXMuaGFzU3RhcnRlZF8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmhhc1N0YXJ0ZWRfID0gcmVxdWVzdDtcblxuICAgICAgaWYgKHRoaXMuaGFzU3RhcnRlZF8pIHtcbiAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWhhcy1zdGFydGVkJyk7XG4gICAgICAgIHRoaXMudHJpZ2dlcignZmlyc3RwbGF5Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtaGFzLXN0YXJ0ZWQnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRmlyZWQgd2hlbmV2ZXIgdGhlIG1lZGlhIGJlZ2lucyBvciByZXN1bWVzIHBsYXliYWNrXG4gICAgICpcbiAgICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9lbWJlZGRlZC1jb250ZW50Lmh0bWwjZG9tLW1lZGlhLXBsYXl9XG4gICAgICogQGZpcmVzIFBsYXllciNwbGF5XG4gICAgICogQGxpc3RlbnMgVGVjaCNwbGF5XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlVGVjaFBsYXlfID0gZnVuY3Rpb24gaGFuZGxlVGVjaFBsYXlfKCkge1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWVuZGVkJyk7XG4gICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtcGF1c2VkJyk7XG4gICAgICB0aGlzLmFkZENsYXNzKCd2anMtcGxheWluZycpOyAvLyBoaWRlIHRoZSBwb3N0ZXIgd2hlbiB0aGUgdXNlciBoaXRzIHBsYXlcblxuICAgICAgdGhpcy5oYXNTdGFydGVkKHRydWUpO1xuICAgICAgLyoqXG4gICAgICAgKiBUcmlnZ2VyZWQgd2hlbmV2ZXIgYW4ge0BsaW5rIFRlY2gjcGxheX0gZXZlbnQgaGFwcGVucy4gSW5kaWNhdGVzIHRoYXRcbiAgICAgICAqIHBsYXliYWNrIGhhcyBzdGFydGVkIG9yIHJlc3VtZWQuXG4gICAgICAgKlxuICAgICAgICogQGV2ZW50IFBsYXllciNwbGF5XG4gICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgKi9cblxuICAgICAgdGhpcy50cmlnZ2VyKCdwbGF5Jyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZ2dlciB0aGUgYHJhdGVjaGFuZ2VgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgICAqXG4gICAgICogSWYgdGhlcmUgd2VyZSBhbnkgZXZlbnRzIHF1ZXVlZCB3aGlsZSB0aGUgcGxheWJhY2sgcmF0ZSB3YXMgemVybywgZmlyZVxuICAgICAqIHRob3NlIGV2ZW50cyBub3cuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBtZXRob2QgUGxheWVyI2hhbmRsZVRlY2hSYXRlQ2hhbmdlX1xuICAgICAqIEBmaXJlcyBQbGF5ZXIjcmF0ZWNoYW5nZVxuICAgICAqIEBsaXN0ZW5zIFRlY2gjcmF0ZWNoYW5nZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVUZWNoUmF0ZUNoYW5nZV8gPSBmdW5jdGlvbiBoYW5kbGVUZWNoUmF0ZUNoYW5nZV8oKSB7XG4gICAgICBpZiAodGhpcy50ZWNoXy5wbGF5YmFja1JhdGUoKSA+IDAgJiYgdGhpcy5jYWNoZV8ubGFzdFBsYXliYWNrUmF0ZSA9PT0gMCkge1xuICAgICAgICB0aGlzLnF1ZXVlZENhbGxiYWNrc18uZm9yRWFjaChmdW5jdGlvbiAocXVldWVkKSB7XG4gICAgICAgICAgcmV0dXJuIHF1ZXVlZC5jYWxsYmFjayhxdWV1ZWQuZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5xdWV1ZWRDYWxsYmFja3NfID0gW107XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2FjaGVfLmxhc3RQbGF5YmFja1JhdGUgPSB0aGlzLnRlY2hfLnBsYXliYWNrUmF0ZSgpO1xuICAgICAgLyoqXG4gICAgICAgKiBGaXJlcyB3aGVuIHRoZSBwbGF5aW5nIHNwZWVkIG9mIHRoZSBhdWRpby92aWRlbyBpcyBjaGFuZ2VkXG4gICAgICAgKlxuICAgICAgICogQGV2ZW50IFBsYXllciNyYXRlY2hhbmdlXG4gICAgICAgKiBAdHlwZSB7ZXZlbnR9XG4gICAgICAgKi9cblxuICAgICAgdGhpcy50cmlnZ2VyKCdyYXRlY2hhbmdlJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZ2dlciB0aGUgYHdhaXRpbmdgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgICAqXG4gICAgICogQGZpcmVzIFBsYXllciN3YWl0aW5nXG4gICAgICogQGxpc3RlbnMgVGVjaCN3YWl0aW5nXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlVGVjaFdhaXRpbmdfID0gZnVuY3Rpb24gaGFuZGxlVGVjaFdhaXRpbmdfKCkge1xuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy13YWl0aW5nJyk7XG4gICAgICAvKipcbiAgICAgICAqIEEgcmVhZHlTdGF0ZSBjaGFuZ2Ugb24gdGhlIERPTSBlbGVtZW50IGhhcyBjYXVzZWQgcGxheWJhY2sgdG8gc3RvcC5cbiAgICAgICAqXG4gICAgICAgKiBAZXZlbnQgUGxheWVyI3dhaXRpbmdcbiAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAqL1xuXG4gICAgICB0aGlzLnRyaWdnZXIoJ3dhaXRpbmcnKTsgLy8gQnJvd3NlcnMgbWF5IGVtaXQgYSB0aW1ldXBkYXRlIGV2ZW50IGFmdGVyIGEgd2FpdGluZyBldmVudC4gSW4gb3JkZXIgdG8gcHJldmVudFxuICAgICAgLy8gcHJlbWF0dXJlIHJlbW92YWwgb2YgdGhlIHdhaXRpbmcgY2xhc3MsIHdhaXQgZm9yIHRoZSB0aW1lIHRvIGNoYW5nZS5cblxuICAgICAgdmFyIHRpbWVXaGVuV2FpdGluZyA9IHRoaXMuY3VycmVudFRpbWUoKTtcblxuICAgICAgdmFyIHRpbWVVcGRhdGVMaXN0ZW5lciA9IGZ1bmN0aW9uIHRpbWVVcGRhdGVMaXN0ZW5lcigpIHtcbiAgICAgICAgaWYgKHRpbWVXaGVuV2FpdGluZyAhPT0gX3RoaXM3LmN1cnJlbnRUaW1lKCkpIHtcbiAgICAgICAgICBfdGhpczcucmVtb3ZlQ2xhc3MoJ3Zqcy13YWl0aW5nJyk7XG5cbiAgICAgICAgICBfdGhpczcub2ZmKCd0aW1ldXBkYXRlJywgdGltZVVwZGF0ZUxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy5vbigndGltZXVwZGF0ZScsIHRpbWVVcGRhdGVMaXN0ZW5lcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZ2dlciB0aGUgYGNhbnBsYXlgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgICAqID4gTm90ZTogVGhpcyBpcyBub3QgY29uc2lzdGVudCBiZXR3ZWVuIGJyb3dzZXJzLiBTZWUgIzEzNTFcbiAgICAgKlxuICAgICAqIEBmaXJlcyBQbGF5ZXIjY2FucGxheVxuICAgICAqIEBsaXN0ZW5zIFRlY2gjY2FucGxheVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZVRlY2hDYW5QbGF5XyA9IGZ1bmN0aW9uIGhhbmRsZVRlY2hDYW5QbGF5XygpIHtcbiAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy13YWl0aW5nJyk7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBtZWRpYSBoYXMgYSByZWFkeVN0YXRlIG9mIEhBVkVfRlVUVVJFX0RBVEEgb3IgZ3JlYXRlci5cbiAgICAgICAqXG4gICAgICAgKiBAZXZlbnQgUGxheWVyI2NhbnBsYXlcbiAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAqL1xuXG4gICAgICB0aGlzLnRyaWdnZXIoJ2NhbnBsYXknKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlnZ2VyIHRoZSBgY2FucGxheXRocm91Z2hgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgICAqXG4gICAgICogQGZpcmVzIFBsYXllciNjYW5wbGF5dGhyb3VnaFxuICAgICAqIEBsaXN0ZW5zIFRlY2gjY2FucGxheXRocm91Z2hcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVUZWNoQ2FuUGxheVRocm91Z2hfID0gZnVuY3Rpb24gaGFuZGxlVGVjaENhblBsYXlUaHJvdWdoXygpIHtcbiAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy13YWl0aW5nJyk7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBtZWRpYSBoYXMgYSByZWFkeVN0YXRlIG9mIEhBVkVfRU5PVUdIX0RBVEEgb3IgZ3JlYXRlci4gVGhpcyBtZWFucyB0aGF0IHRoZVxuICAgICAgICogZW50aXJlIG1lZGlhIGZpbGUgY2FuIGJlIHBsYXllZCB3aXRob3V0IGJ1ZmZlcmluZy5cbiAgICAgICAqXG4gICAgICAgKiBAZXZlbnQgUGxheWVyI2NhbnBsYXl0aHJvdWdoXG4gICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgKi9cblxuICAgICAgdGhpcy50cmlnZ2VyKCdjYW5wbGF5dGhyb3VnaCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWdnZXIgdGhlIGBwbGF5aW5nYCBldmVudCB0aGF0IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIHtAbGluayBUZWNofS5cbiAgICAgKlxuICAgICAqIEBmaXJlcyBQbGF5ZXIjcGxheWluZ1xuICAgICAqIEBsaXN0ZW5zIFRlY2gjcGxheWluZ1xuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZVRlY2hQbGF5aW5nXyA9IGZ1bmN0aW9uIGhhbmRsZVRlY2hQbGF5aW5nXygpIHtcbiAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy13YWl0aW5nJyk7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBtZWRpYSBpcyBubyBsb25nZXIgYmxvY2tlZCBmcm9tIHBsYXliYWNrLCBhbmQgaGFzIHN0YXJ0ZWQgcGxheWluZy5cbiAgICAgICAqXG4gICAgICAgKiBAZXZlbnQgUGxheWVyI3BsYXlpbmdcbiAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAqL1xuXG4gICAgICB0aGlzLnRyaWdnZXIoJ3BsYXlpbmcnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlnZ2VyIHRoZSBgc2Vla2luZ2AgZXZlbnQgdGhhdCB3YXMgdHJpZ2dlcmVkIGJ5IHRoZSB7QGxpbmsgVGVjaH0uXG4gICAgICpcbiAgICAgKiBAZmlyZXMgUGxheWVyI3NlZWtpbmdcbiAgICAgKiBAbGlzdGVucyBUZWNoI3NlZWtpbmdcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVUZWNoU2Vla2luZ18gPSBmdW5jdGlvbiBoYW5kbGVUZWNoU2Vla2luZ18oKSB7XG4gICAgICB0aGlzLmFkZENsYXNzKCd2anMtc2Vla2luZycpO1xuICAgICAgLyoqXG4gICAgICAgKiBGaXJlZCB3aGVuZXZlciB0aGUgcGxheWVyIGlzIGp1bXBpbmcgdG8gYSBuZXcgdGltZVxuICAgICAgICpcbiAgICAgICAqIEBldmVudCBQbGF5ZXIjc2Vla2luZ1xuICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICovXG5cbiAgICAgIHRoaXMudHJpZ2dlcignc2Vla2luZycpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWdnZXIgdGhlIGBzZWVrZWRgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgICAqXG4gICAgICogQGZpcmVzIFBsYXllciNzZWVrZWRcbiAgICAgKiBAbGlzdGVucyBUZWNoI3NlZWtlZFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZVRlY2hTZWVrZWRfID0gZnVuY3Rpb24gaGFuZGxlVGVjaFNlZWtlZF8oKSB7XG4gICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtc2Vla2luZycpO1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWVuZGVkJyk7XG4gICAgICAvKipcbiAgICAgICAqIEZpcmVkIHdoZW4gdGhlIHBsYXllciBoYXMgZmluaXNoZWQganVtcGluZyB0byBhIG5ldyB0aW1lXG4gICAgICAgKlxuICAgICAgICogQGV2ZW50IFBsYXllciNzZWVrZWRcbiAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAqL1xuXG4gICAgICB0aGlzLnRyaWdnZXIoJ3NlZWtlZCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWdnZXIgdGhlIGBmaXJzdHBsYXlgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgICAqXG4gICAgICogQGZpcmVzIFBsYXllciNmaXJzdHBsYXlcbiAgICAgKiBAbGlzdGVucyBUZWNoI2ZpcnN0cGxheVxuICAgICAqIEBkZXByZWNhdGVkIEFzIG9mIDYuMCBmaXJzdHBsYXkgZXZlbnQgaXMgZGVwcmVjYXRlZC5cbiAgICAgKiAgICAgICAgICAgICBBcyBvZiA2LjAgcGFzc2luZyB0aGUgYHN0YXJ0dGltZWAgb3B0aW9uIHRvIHRoZSBwbGF5ZXIgYW5kIHRoZSBmaXJzdHBsYXkgZXZlbnQgYXJlIGRlcHJlY2F0ZWQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlVGVjaEZpcnN0UGxheV8gPSBmdW5jdGlvbiBoYW5kbGVUZWNoRmlyc3RQbGF5XygpIHtcbiAgICAgIC8vIElmIHRoZSBmaXJzdCBzdGFydHRpbWUgYXR0cmlidXRlIGlzIHNwZWNpZmllZFxuICAgICAgLy8gdGhlbiB3ZSB3aWxsIHN0YXJ0IGF0IHRoZSBnaXZlbiBvZmZzZXQgaW4gc2Vjb25kc1xuICAgICAgaWYgKHRoaXMub3B0aW9uc18uc3RhcnR0aW1lKSB7XG4gICAgICAgIGxvZy53YXJuKCdQYXNzaW5nIHRoZSBgc3RhcnR0aW1lYCBvcHRpb24gdG8gdGhlIHBsYXllciB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gNi4wJyk7XG4gICAgICAgIHRoaXMuY3VycmVudFRpbWUodGhpcy5vcHRpb25zXy5zdGFydHRpbWUpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmFkZENsYXNzKCd2anMtaGFzLXN0YXJ0ZWQnKTtcbiAgICAgIC8qKlxuICAgICAgICogRmlyZWQgdGhlIGZpcnN0IHRpbWUgYSB2aWRlbyBpcyBwbGF5ZWQuIE5vdCBwYXJ0IG9mIHRoZSBITFMgc3BlYywgYW5kIHRoaXMgaXNcbiAgICAgICAqIHByb2JhYmx5IG5vdCB0aGUgYmVzdCBpbXBsZW1lbnRhdGlvbiB5ZXQsIHNvIHVzZSBzcGFyaW5nbHkuIElmIHlvdSBkb24ndCBoYXZlIGFcbiAgICAgICAqIHJlYXNvbiB0byBwcmV2ZW50IHBsYXliYWNrLCB1c2UgYG15UGxheWVyLm9uZSgncGxheScpO2AgaW5zdGVhZC5cbiAgICAgICAqXG4gICAgICAgKiBAZXZlbnQgUGxheWVyI2ZpcnN0cGxheVxuICAgICAgICogQGRlcHJlY2F0ZWQgQXMgb2YgNi4wIGZpcnN0cGxheSBldmVudCBpcyBkZXByZWNhdGVkLlxuICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICovXG5cbiAgICAgIHRoaXMudHJpZ2dlcignZmlyc3RwbGF5Jyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZ2dlciB0aGUgYHBhdXNlYCBldmVudCB0aGF0IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIHtAbGluayBUZWNofS5cbiAgICAgKlxuICAgICAqIEBmaXJlcyBQbGF5ZXIjcGF1c2VcbiAgICAgKiBAbGlzdGVucyBUZWNoI3BhdXNlXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlVGVjaFBhdXNlXyA9IGZ1bmN0aW9uIGhhbmRsZVRlY2hQYXVzZV8oKSB7XG4gICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtcGxheWluZycpO1xuICAgICAgdGhpcy5hZGRDbGFzcygndmpzLXBhdXNlZCcpO1xuICAgICAgLyoqXG4gICAgICAgKiBGaXJlZCB3aGVuZXZlciB0aGUgbWVkaWEgaGFzIGJlZW4gcGF1c2VkXG4gICAgICAgKlxuICAgICAgICogQGV2ZW50IFBsYXllciNwYXVzZVxuICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICovXG5cbiAgICAgIHRoaXMudHJpZ2dlcigncGF1c2UnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlnZ2VyIHRoZSBgZW5kZWRgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgICAqXG4gICAgICogQGZpcmVzIFBsYXllciNlbmRlZFxuICAgICAqIEBsaXN0ZW5zIFRlY2gjZW5kZWRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVUZWNoRW5kZWRfID0gZnVuY3Rpb24gaGFuZGxlVGVjaEVuZGVkXygpIHtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1lbmRlZCcpO1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zXy5sb29wKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFRpbWUoMCk7XG4gICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgfSBlbHNlIGlmICghdGhpcy5wYXVzZWQoKSkge1xuICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEZpcmVkIHdoZW4gdGhlIGVuZCBvZiB0aGUgbWVkaWEgcmVzb3VyY2UgaXMgcmVhY2hlZCAoY3VycmVudFRpbWUgPT0gZHVyYXRpb24pXG4gICAgICAgKlxuICAgICAgICogQGV2ZW50IFBsYXllciNlbmRlZFxuICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICovXG5cblxuICAgICAgdGhpcy50cmlnZ2VyKCdlbmRlZCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIHRoZSBkdXJhdGlvbiBvZiB0aGUgbWVkaWEgcmVzb3VyY2UgaXMgZmlyc3Qga25vd24gb3IgY2hhbmdlZFxuICAgICAqXG4gICAgICogQGxpc3RlbnMgVGVjaCNkdXJhdGlvbmNoYW5nZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZVRlY2hEdXJhdGlvbkNoYW5nZV8gPSBmdW5jdGlvbiBoYW5kbGVUZWNoRHVyYXRpb25DaGFuZ2VfKCkge1xuICAgICAgdGhpcy5kdXJhdGlvbih0aGlzLnRlY2hHZXRfKCdkdXJhdGlvbicpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGEgY2xpY2sgb24gdGhlIG1lZGlhIGVsZW1lbnQgdG8gcGxheS9wYXVzZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgdGhlIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gdHJpZ2dlclxuICAgICAqXG4gICAgICogQGxpc3RlbnMgVGVjaCNtb3VzZWRvd25cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVUZWNoQ2xpY2tfID0gZnVuY3Rpb24gaGFuZGxlVGVjaENsaWNrXyhldmVudCkge1xuICAgICAgaWYgKCFpc1NpbmdsZUxlZnRDbGljayhldmVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBXaGVuIGNvbnRyb2xzIGFyZSBkaXNhYmxlZCBhIGNsaWNrIHNob3VsZCBub3QgdG9nZ2xlIHBsYXliYWNrIGJlY2F1c2VcbiAgICAgIC8vIHRoZSBjbGljayBpcyBjb25zaWRlcmVkIGEgY29udHJvbFxuXG5cbiAgICAgIGlmICghdGhpcy5jb250cm9sc18pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wYXVzZWQoKSkge1xuICAgICAgICBzaWxlbmNlUHJvbWlzZSh0aGlzLnBsYXkoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBhIGRvdWJsZS1jbGljayBvbiB0aGUgbWVkaWEgZWxlbWVudCB0byBlbnRlci9leGl0IGZ1bGxzY3JlZW5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIHRoZSBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIHRyaWdnZXJcbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIFRlY2gjZGJsY2xpY2tcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVUZWNoRG91YmxlQ2xpY2tfID0gZnVuY3Rpb24gaGFuZGxlVGVjaERvdWJsZUNsaWNrXyhldmVudCkge1xuICAgICAgaWYgKCF0aGlzLmNvbnRyb2xzXykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIHdlIGRvIG5vdCB3YW50IHRvIHRvZ2dsZSBmdWxsc2NyZWVuIHN0YXRlXG4gICAgICAvLyB3aGVuIGRvdWJsZS1jbGlja2luZyBpbnNpZGUgYSBjb250cm9sIGJhciBvciBhIG1vZGFsXG5cblxuICAgICAgdmFyIGluQWxsb3dlZEVscyA9IEFycmF5LnByb3RvdHlwZS5zb21lLmNhbGwodGhpcy4kJCgnLnZqcy1jb250cm9sLWJhciwgLnZqcy1tb2RhbC1kaWFsb2cnKSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBlbC5jb250YWlucyhldmVudC50YXJnZXQpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghaW5BbGxvd2VkRWxzKSB7XG4gICAgICAgIC8qXG4gICAgICAgICAqIG9wdGlvbnMudXNlckFjdGlvbnMuZG91YmxlQ2xpY2tcbiAgICAgICAgICpcbiAgICAgICAgICogSWYgYHVuZGVmaW5lZGAgb3IgYHRydWVgLCBkb3VibGUtY2xpY2sgdG9nZ2xlcyBmdWxsc2NyZWVuIGlmIGNvbnRyb2xzIGFyZSBwcmVzZW50XG4gICAgICAgICAqIFNldCB0byBgZmFsc2VgIHRvIGRpc2FibGUgZG91YmxlLWNsaWNrIGhhbmRsaW5nXG4gICAgICAgICAqIFNldCB0byBhIGZ1bmN0aW9uIHRvIHN1YnN0aXR1dGUgYW4gZXh0ZXJuYWwgZG91YmxlLWNsaWNrIGhhbmRsZXJcbiAgICAgICAgICovXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnNfID09PSB1bmRlZmluZWQgfHwgdGhpcy5vcHRpb25zXy51c2VyQWN0aW9ucyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub3B0aW9uc18udXNlckFjdGlvbnMuZG91YmxlQ2xpY2sgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm9wdGlvbnNfLnVzZXJBY3Rpb25zLmRvdWJsZUNsaWNrICE9PSBmYWxzZSkge1xuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnNfICE9PSB1bmRlZmluZWQgJiYgdGhpcy5vcHRpb25zXy51c2VyQWN0aW9ucyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB0aGlzLm9wdGlvbnNfLnVzZXJBY3Rpb25zLmRvdWJsZUNsaWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnNfLnVzZXJBY3Rpb25zLmRvdWJsZUNsaWNrLmNhbGwodGhpcywgZXZlbnQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0Z1bGxzY3JlZW4oKSkge1xuICAgICAgICAgICAgdGhpcy5leGl0RnVsbHNjcmVlbigpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RGdWxsc2NyZWVuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBhIHRhcCBvbiB0aGUgbWVkaWEgZWxlbWVudC4gSXQgd2lsbCB0b2dnbGUgdGhlIHVzZXJcbiAgICAgKiBhY3Rpdml0eSBzdGF0ZSwgd2hpY2ggaGlkZXMgYW5kIHNob3dzIHRoZSBjb250cm9scy5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIFRlY2gjdGFwXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaGFuZGxlVGVjaFRhcF8gPSBmdW5jdGlvbiBoYW5kbGVUZWNoVGFwXygpIHtcbiAgICAgIHRoaXMudXNlckFjdGl2ZSghdGhpcy51c2VyQWN0aXZlKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdG91Y2ggdG8gc3RhcnRcbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIFRlY2gjdG91Y2hzdGFydFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZVRlY2hUb3VjaFN0YXJ0XyA9IGZ1bmN0aW9uIGhhbmRsZVRlY2hUb3VjaFN0YXJ0XygpIHtcbiAgICAgIHRoaXMudXNlcldhc0FjdGl2ZSA9IHRoaXMudXNlckFjdGl2ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdG91Y2ggdG8gbW92ZVxuICAgICAqXG4gICAgICogQGxpc3RlbnMgVGVjaCN0b3VjaG1vdmVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVUZWNoVG91Y2hNb3ZlXyA9IGZ1bmN0aW9uIGhhbmRsZVRlY2hUb3VjaE1vdmVfKCkge1xuICAgICAgaWYgKHRoaXMudXNlcldhc0FjdGl2ZSkge1xuICAgICAgICB0aGlzLnJlcG9ydFVzZXJBY3Rpdml0eSgpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdG91Y2ggdG8gZW5kXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICB0aGUgdG91Y2hlbmQgZXZlbnQgdGhhdCB0cmlnZ2VyZWRcbiAgICAgKiAgICAgICAgdGhpcyBmdW5jdGlvblxuICAgICAqXG4gICAgICogQGxpc3RlbnMgVGVjaCN0b3VjaGVuZFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZVRlY2hUb3VjaEVuZF8gPSBmdW5jdGlvbiBoYW5kbGVUZWNoVG91Y2hFbmRfKGV2ZW50KSB7XG4gICAgICAvLyBTdG9wIHRoZSBtb3VzZSBldmVudHMgZnJvbSBhbHNvIGhhcHBlbmluZ1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogbmF0aXZlIGNsaWNrIGV2ZW50cyBvbiB0aGUgU1dGIGFyZW4ndCB0cmlnZ2VyZWQgb24gSUUxMSwgV2luOC4xUlRcbiAgICAgKiB1c2Ugc3RhZ2VjbGljayBldmVudHMgdHJpZ2dlcmVkIGZyb20gaW5zaWRlIHRoZSBTV0YgaW5zdGVhZFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbGlzdGVucyBzdGFnZWNsaWNrXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZVN0YWdlQ2xpY2tfID0gZnVuY3Rpb24gaGFuZGxlU3RhZ2VDbGlja18oKSB7XG4gICAgICB0aGlzLnJlcG9ydFVzZXJBY3Rpdml0eSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by50b2dnbGVGdWxsc2NyZWVuQ2xhc3NfID0gZnVuY3Rpb24gdG9nZ2xlRnVsbHNjcmVlbkNsYXNzXygpIHtcbiAgICAgIGlmICh0aGlzLmlzRnVsbHNjcmVlbigpKSB7XG4gICAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1mdWxsc2NyZWVuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtZnVsbHNjcmVlbicpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiB3aGVuIHRoZSBkb2N1bWVudCBmc2NoYW5nZSBldmVudCB0cmlnZ2VycyBpdCBjYWxscyB0aGlzXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmRvY3VtZW50RnVsbHNjcmVlbkNoYW5nZV8gPSBmdW5jdGlvbiBkb2N1bWVudEZ1bGxzY3JlZW5DaGFuZ2VfKGUpIHtcbiAgICAgIHZhciBmc0FwaSA9IEZ1bGxzY3JlZW5BcGk7XG4gICAgICB0aGlzLmlzRnVsbHNjcmVlbihkb2N1bWVudFtmc0FwaS5mdWxsc2NyZWVuRWxlbWVudF0gPT09IHRoaXMuZWwoKSB8fCB0aGlzLmVsKCkubWF0Y2hlcygnOicgKyBmc0FwaS5mdWxsc2NyZWVuKSk7IC8vIElmIGNhbmNlbGxpbmcgZnVsbHNjcmVlbiwgcmVtb3ZlIGV2ZW50IGxpc3RlbmVyLlxuXG4gICAgICBpZiAodGhpcy5pc0Z1bGxzY3JlZW4oKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgb2ZmKGRvY3VtZW50LCBmc0FwaS5mdWxsc2NyZWVuY2hhbmdlLCB0aGlzLmJvdW5kRG9jdW1lbnRGdWxsc2NyZWVuQ2hhbmdlXyk7XG4gICAgICB9XG5cbiAgICAgIGlmICghcHJlZml4ZWRBUEkpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBldmVudCBQbGF5ZXIjZnVsbHNjcmVlbmNoYW5nZVxuICAgICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIFRlY2ggRnVsbHNjcmVlbiBDaGFuZ2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIHRoZSBmdWxsc2NyZWVuY2hhbmdlIGV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoaXMgZnVuY3Rpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICogICAgICAgIHRoZSBkYXRhIHRoYXQgd2FzIHNlbnQgd2l0aCB0aGUgZXZlbnRcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGxpc3RlbnMgVGVjaCNmdWxsc2NyZWVuY2hhbmdlXG4gICAgICogQGZpcmVzIFBsYXllciNmdWxsc2NyZWVuY2hhbmdlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZVRlY2hGdWxsc2NyZWVuQ2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZVRlY2hGdWxsc2NyZWVuQ2hhbmdlXyhldmVudCwgZGF0YSkge1xuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgdGhpcy5pc0Z1bGxzY3JlZW4oZGF0YS5pc0Z1bGxzY3JlZW4pO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBGaXJlZCB3aGVuIGdvaW5nIGluIGFuZCBvdXQgb2YgZnVsbHNjcmVlbi5cbiAgICAgICAqXG4gICAgICAgKiBAZXZlbnQgUGxheWVyI2Z1bGxzY3JlZW5jaGFuZ2VcbiAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAqL1xuXG5cbiAgICAgIHRoaXMudHJpZ2dlcignZnVsbHNjcmVlbmNoYW5nZScpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaXJlcyB3aGVuIGFuIGVycm9yIG9jY3VycmVkIGR1cmluZyB0aGUgbG9hZGluZyBvZiBhbiBhdWRpby92aWRlby5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGxpc3RlbnMgVGVjaCNlcnJvclxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVUZWNoRXJyb3JfID0gZnVuY3Rpb24gaGFuZGxlVGVjaEVycm9yXygpIHtcbiAgICAgIHZhciBlcnJvciA9IHRoaXMudGVjaF8uZXJyb3IoKTtcbiAgICAgIHRoaXMuZXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWdnZXIgdGhlIGB0ZXh0ZGF0YWAgZXZlbnQgdGhhdCB3YXMgdHJpZ2dlcmVkIGJ5IHRoZSB7QGxpbmsgVGVjaH0uXG4gICAgICpcbiAgICAgKiBAZmlyZXMgUGxheWVyI3RleHRkYXRhXG4gICAgICogQGxpc3RlbnMgVGVjaCN0ZXh0ZGF0YVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZVRlY2hUZXh0RGF0YV8gPSBmdW5jdGlvbiBoYW5kbGVUZWNoVGV4dERhdGFfKCkge1xuICAgICAgdmFyIGRhdGEgPSBudWxsO1xuXG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZGF0YSA9IGFyZ3VtZW50c1sxXTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogRmlyZXMgd2hlbiB3ZSBnZXQgYSB0ZXh0ZGF0YSBldmVudCBmcm9tIHRlY2hcbiAgICAgICAqXG4gICAgICAgKiBAZXZlbnQgUGxheWVyI3RleHRkYXRhXG4gICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgKi9cblxuXG4gICAgICB0aGlzLnRyaWdnZXIoJ3RleHRkYXRhJywgZGF0YSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBvYmplY3QgZm9yIGNhY2hlZCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogICAgICAgICBnZXQgdGhlIGN1cnJlbnQgb2JqZWN0IGNhY2hlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmdldENhY2hlID0gZnVuY3Rpb24gZ2V0Q2FjaGUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jYWNoZV87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgaW50ZXJuYWwgY2FjaGUgb2JqZWN0LlxuICAgICAqXG4gICAgICogVXNpbmcgdGhpcyBmdW5jdGlvbiBvdXRzaWRlIHRoZSBwbGF5ZXIgY29uc3RydWN0b3Igb3IgcmVzZXQgbWV0aG9kIG1heVxuICAgICAqIGhhdmUgdW5pbnRlbmRlZCBzaWRlLWVmZmVjdHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5yZXNldENhY2hlXyA9IGZ1bmN0aW9uIHJlc2V0Q2FjaGVfKCkge1xuICAgICAgdGhpcy5jYWNoZV8gPSB7XG4gICAgICAgIC8vIFJpZ2h0IG5vdywgdGhlIGN1cnJlbnRUaW1lIGlzIG5vdCBfcmVhbGx5XyBjYWNoZWQgYmVjYXVzZSBpdCBpcyBhbHdheXNcbiAgICAgICAgLy8gcmV0cmlldmVkIGZyb20gdGhlIHRlY2ggKHNlZTogY3VycmVudFRpbWUpLiBIb3dldmVyLCBmb3IgY29tcGxldGVuZXNzLFxuICAgICAgICAvLyB3ZSBzZXQgaXQgdG8gemVybyBoZXJlIHRvIGVuc3VyZSB0aGF0IGlmIHdlIGRvIHN0YXJ0IGFjdHVhbGx5IGNhY2hpbmdcbiAgICAgICAgLy8gaXQsIHdlIHJlc2V0IGl0IGFsb25nIHdpdGggZXZlcnl0aGluZyBlbHNlLlxuICAgICAgICBjdXJyZW50VGltZTogMCxcbiAgICAgICAgaW5hY3Rpdml0eVRpbWVvdXQ6IHRoaXMub3B0aW9uc18uaW5hY3Rpdml0eVRpbWVvdXQsXG4gICAgICAgIGR1cmF0aW9uOiBOYU4sXG4gICAgICAgIGxhc3RWb2x1bWU6IDEsXG4gICAgICAgIGxhc3RQbGF5YmFja1JhdGU6IHRoaXMuZGVmYXVsdFBsYXliYWNrUmF0ZSgpLFxuICAgICAgICBtZWRpYTogbnVsbCxcbiAgICAgICAgc3JjOiAnJyxcbiAgICAgICAgc291cmNlOiB7fSxcbiAgICAgICAgc291cmNlczogW10sXG4gICAgICAgIHZvbHVtZTogMVxuICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFzcyB2YWx1ZXMgdG8gdGhlIHBsYXliYWNrIHRlY2hcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbWV0aG9kXVxuICAgICAqICAgICAgICB0aGUgbWV0aG9kIHRvIGNhbGxcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBhcmdcbiAgICAgKiAgICAgICAgdGhlIGFyZ3VtZW50IHRvIHBhc3NcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnRlY2hDYWxsXyA9IGZ1bmN0aW9uIHRlY2hDYWxsXyhtZXRob2QsIGFyZykge1xuICAgICAgLy8gSWYgaXQncyBub3QgcmVhZHkgeWV0LCBjYWxsIG1ldGhvZCB3aGVuIGl0IGlzXG4gICAgICB0aGlzLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKG1ldGhvZCBpbiBhbGxvd2VkU2V0dGVycykge1xuICAgICAgICAgIHJldHVybiBzZXQkMSh0aGlzLm1pZGRsZXdhcmVfLCB0aGlzLnRlY2hfLCBtZXRob2QsIGFyZyk7XG4gICAgICAgIH0gZWxzZSBpZiAobWV0aG9kIGluIGFsbG93ZWRNZWRpYXRvcnMpIHtcbiAgICAgICAgICByZXR1cm4gbWVkaWF0ZSh0aGlzLm1pZGRsZXdhcmVfLCB0aGlzLnRlY2hfLCBtZXRob2QsIGFyZyk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0aGlzLnRlY2hfKSB7XG4gICAgICAgICAgICB0aGlzLnRlY2hfW21ldGhvZF0oYXJnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBsb2coZSk7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfSwgdHJ1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBjYWxscyBjYW4ndCB3YWl0IGZvciB0aGUgdGVjaCwgYW5kIHNvbWV0aW1lcyBkb24ndCBuZWVkIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZFxuICAgICAqICAgICAgICBUZWNoIG1ldGhvZFxuICAgICAqXG4gICAgICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICAgICAqICAgICAgICAgdGhlIG1ldGhvZCBvciB1bmRlZmluZWRcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnRlY2hHZXRfID0gZnVuY3Rpb24gdGVjaEdldF8obWV0aG9kKSB7XG4gICAgICBpZiAoIXRoaXMudGVjaF8gfHwgIXRoaXMudGVjaF8uaXNSZWFkeV8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAobWV0aG9kIGluIGFsbG93ZWRHZXR0ZXJzKSB7XG4gICAgICAgIHJldHVybiBnZXQodGhpcy5taWRkbGV3YXJlXywgdGhpcy50ZWNoXywgbWV0aG9kKTtcbiAgICAgIH0gZWxzZSBpZiAobWV0aG9kIGluIGFsbG93ZWRNZWRpYXRvcnMpIHtcbiAgICAgICAgcmV0dXJuIG1lZGlhdGUodGhpcy5taWRkbGV3YXJlXywgdGhpcy50ZWNoXywgbWV0aG9kKTtcbiAgICAgIH0gLy8gRmxhc2ggbGlrZXMgdG8gZGllIGFuZCByZWxvYWQgd2hlbiB5b3UgaGlkZSBvciByZXBvc2l0aW9uIGl0LlxuICAgICAgLy8gSW4gdGhlc2UgY2FzZXMgdGhlIG9iamVjdCBtZXRob2RzIGdvIGF3YXkgYW5kIHdlIGdldCBlcnJvcnMuXG4gICAgICAvLyBXaGVuIHRoYXQgaGFwcGVucyB3ZSdsbCBjYXRjaCB0aGUgZXJyb3JzIGFuZCBpbmZvcm0gdGVjaCB0aGF0IGl0J3Mgbm90IHJlYWR5IGFueSBtb3JlLlxuXG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlY2hfW21ldGhvZF0oKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gV2hlbiBidWlsZGluZyBhZGRpdGlvbmFsIHRlY2ggbGlicywgYW4gZXhwZWN0ZWQgbWV0aG9kIG1heSBub3QgYmUgZGVmaW5lZCB5ZXRcbiAgICAgICAgaWYgKHRoaXMudGVjaF9bbWV0aG9kXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbG9nKFwiVmlkZW8uanM6IFwiICsgbWV0aG9kICsgXCIgbWV0aG9kIG5vdCBkZWZpbmVkIGZvciBcIiArIHRoaXMudGVjaE5hbWVfICsgXCIgcGxheWJhY2sgdGVjaG5vbG9neS5cIiwgZSk7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfSAvLyBXaGVuIGEgbWV0aG9kIGlzbid0IGF2YWlsYWJsZSBvbiB0aGUgb2JqZWN0IGl0IHRocm93cyBhIFR5cGVFcnJvclxuXG5cbiAgICAgICAgaWYgKGUubmFtZSA9PT0gJ1R5cGVFcnJvcicpIHtcbiAgICAgICAgICBsb2coXCJWaWRlby5qczogXCIgKyBtZXRob2QgKyBcIiB1bmF2YWlsYWJsZSBvbiBcIiArIHRoaXMudGVjaE5hbWVfICsgXCIgcGxheWJhY2sgdGVjaG5vbG9neSBlbGVtZW50LlwiLCBlKTtcbiAgICAgICAgICB0aGlzLnRlY2hfLmlzUmVhZHlfID0gZmFsc2U7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfSAvLyBJZiBlcnJvciB1bmtub3duLCBqdXN0IGxvZyBhbmQgdGhyb3dcblxuXG4gICAgICAgIGxvZyhlKTtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCB0byBiZWdpbiBwbGF5YmFjayBhdCB0aGUgZmlyc3Qgb3Bwb3J0dW5pdHkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfHVuZGVmaW5lZH1cbiAgICAgKiAgICAgICAgIFJldHVybnMgYSBwcm9taXNlIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIFByb21pc2VzIChvciBvbmVcbiAgICAgKiAgICAgICAgIHdhcyBwYXNzZWQgaW4gYXMgYW4gb3B0aW9uKS4gVGhpcyBwcm9taXNlIHdpbGwgYmUgcmVzb2x2ZWQgb25cbiAgICAgKiAgICAgICAgIHRoZSByZXR1cm4gdmFsdWUgb2YgcGxheS4gSWYgdGhpcyBpcyB1bmRlZmluZWQgaXQgd2lsbCBmdWxmaWxsIHRoZVxuICAgICAqICAgICAgICAgcHJvbWlzZSBjaGFpbiBvdGhlcndpc2UgdGhlIHByb21pc2UgY2hhaW4gd2lsbCBiZSBmdWxmaWxsZWQgd2hlblxuICAgICAqICAgICAgICAgdGhlIHByb21pc2UgZnJvbSBwbGF5IGlzIGZ1bGZpbGxlZC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ucGxheSA9IGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgICB2YXIgX3RoaXM4ID0gdGhpcztcblxuICAgICAgdmFyIFByb21pc2VDbGFzcyA9IHRoaXMub3B0aW9uc18uUHJvbWlzZSB8fCB3aW5kb3ckMS5Qcm9taXNlO1xuXG4gICAgICBpZiAoUHJvbWlzZUNsYXNzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZUNsYXNzKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgX3RoaXM4LnBsYXlfKHJlc29sdmUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMucGxheV8oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGFjdHVhbCBsb2dpYyBmb3IgcGxheSwgdGFrZXMgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgb24gdGhlXG4gICAgICogcmV0dXJuIHZhbHVlIG9mIHBsYXkuIFRoaXMgYWxsb3dzIHVzIHRvIHJlc29sdmUgdG8gdGhlIHBsYXkgcHJvbWlzZSBpZiB0aGVyZVxuICAgICAqIGlzIG9uZSBvbiBtb2Rlcm4gYnJvd3NlcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja11cbiAgICAgKiAgICAgICAgVGhlIGNhbGxiYWNrIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIHRoZSB0ZWNocyBwbGF5IGlzIGFjdHVhbGx5IGNhbGxlZFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5wbGF5XyA9IGZ1bmN0aW9uIHBsYXlfKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgX3RoaXM5ID0gdGhpcztcblxuICAgICAgaWYgKGNhbGxiYWNrID09PSB2b2lkIDApIHtcbiAgICAgICAgY2FsbGJhY2sgPSBzaWxlbmNlUHJvbWlzZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wbGF5Q2FsbGJhY2tzXy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgIHZhciBpc1NyY1JlYWR5ID0gQm9vbGVhbighdGhpcy5jaGFuZ2luZ1NyY18gJiYgKHRoaXMuc3JjKCkgfHwgdGhpcy5jdXJyZW50U3JjKCkpKTsgLy8gdHJlYXQgY2FsbHMgdG8gcGxheV8gc29tZXdoYXQgbGlrZSB0aGUgYG9uZWAgZXZlbnQgZnVuY3Rpb25cblxuICAgICAgaWYgKHRoaXMud2FpdFRvUGxheV8pIHtcbiAgICAgICAgdGhpcy5vZmYoWydyZWFkeScsICdsb2Fkc3RhcnQnXSwgdGhpcy53YWl0VG9QbGF5Xyk7XG4gICAgICAgIHRoaXMud2FpdFRvUGxheV8gPSBudWxsO1xuICAgICAgfSAvLyBpZiB0aGUgcGxheWVyL3RlY2ggaXMgbm90IHJlYWR5IG9yIHRoZSBzcmMgaXRzZWxmIGlzIG5vdCByZWFkeVxuICAgICAgLy8gcXVldWUgdXAgYSBjYWxsIHRvIHBsYXkgb24gYHJlYWR5YCBvciBgbG9hZHN0YXJ0YFxuXG5cbiAgICAgIGlmICghdGhpcy5pc1JlYWR5XyB8fCAhaXNTcmNSZWFkeSkge1xuICAgICAgICB0aGlzLndhaXRUb1BsYXlfID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBfdGhpczkucGxheV8oKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm9uZShbJ3JlYWR5JywgJ2xvYWRzdGFydCddLCB0aGlzLndhaXRUb1BsYXlfKTsgLy8gaWYgd2UgYXJlIGluIFNhZmFyaSwgdGhlcmUgaXMgYSBoaWdoIGNoYW5jZSB0aGF0IGxvYWRzdGFydCB3aWxsIHRyaWdnZXIgYWZ0ZXIgdGhlIGdlc3R1cmUgdGltZXBlcmlvZFxuICAgICAgICAvLyBpbiB0aGF0IGNhc2UsIHdlIG5lZWQgdG8gcHJpbWUgdGhlIHZpZGVvIGVsZW1lbnQgYnkgY2FsbGluZyBsb2FkIHNvIGl0J2xsIGJlIHJlYWR5IGluIHRpbWVcblxuICAgICAgICBpZiAoIWlzU3JjUmVhZHkgJiYgKElTX0FOWV9TQUZBUkkgfHwgSVNfSU9TKSkge1xuICAgICAgICAgIHRoaXMubG9hZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBJZiB0aGUgcGxheWVyL3RlY2ggaXMgcmVhZHkgYW5kIHdlIGhhdmUgYSBzb3VyY2UsIHdlIGNhbiBhdHRlbXB0IHBsYXliYWNrLlxuXG5cbiAgICAgIHZhciB2YWwgPSB0aGlzLnRlY2hHZXRfKCdwbGF5Jyk7IC8vIHBsYXkgd2FzIHRlcm1pbmF0ZWQgaWYgdGhlIHJldHVybmVkIHZhbHVlIGlzIG51bGxcblxuICAgICAgaWYgKHZhbCA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLnJ1blBsYXlUZXJtaW5hdGVkUXVldWVfKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJ1blBsYXlDYWxsYmFja3NfKHZhbCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZXNlIGZ1bmN0aW9ucyB3aWxsIGJlIHJ1biB3aGVuIGlmIHBsYXkgaXMgdGVybWluYXRlZC4gSWYgcGxheVxuICAgICAqIHJ1blBsYXlDYWxsYmFja3NfIGlzIHJ1biB0aGVzZSBmdW5jdGlvbiB3aWxsIG5vdCBiZSBydW4uIFRoaXMgYWxsb3dzIHVzXG4gICAgICogdG8gZGlmZmVyZW5jaWF0ZSBiZXR3ZWVuIGEgdGVybWluYXRlZCBwbGF5IGFuZCBhbiBhY3R1YWwgY2FsbCB0byBwbGF5LlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5ydW5QbGF5VGVybWluYXRlZFF1ZXVlXyA9IGZ1bmN0aW9uIHJ1blBsYXlUZXJtaW5hdGVkUXVldWVfKCkge1xuICAgICAgdmFyIHF1ZXVlID0gdGhpcy5wbGF5VGVybWluYXRlZFF1ZXVlXy5zbGljZSgwKTtcbiAgICAgIHRoaXMucGxheVRlcm1pbmF0ZWRRdWV1ZV8gPSBbXTtcbiAgICAgIHF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKHEpIHtcbiAgICAgICAgcSgpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZW4gYSBjYWxsYmFjayB0byBwbGF5IGlzIGRlbGF5ZWQgd2UgaGF2ZSB0byBydW4gdGhlc2VcbiAgICAgKiBjYWxsYmFja3Mgd2hlbiBwbGF5IGlzIGFjdHVhbGx5IGNhbGxlZCBvbiB0aGUgdGVjaC4gVGhpcyBmdW5jdGlvblxuICAgICAqIHJ1bnMgdGhlIGNhbGxiYWNrcyB0aGF0IHdlcmUgZGVsYXllZCBhbmQgYWNjZXB0cyB0aGUgcmV0dXJuIHZhbHVlXG4gICAgICogZnJvbSB0aGUgdGVjaC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7dW5kZWZpbmVkfFByb21pc2V9IHZhbFxuICAgICAqICAgICAgICBUaGUgcmV0dXJuIHZhbHVlIGZyb20gdGhlIHRlY2guXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnJ1blBsYXlDYWxsYmFja3NfID0gZnVuY3Rpb24gcnVuUGxheUNhbGxiYWNrc18odmFsKSB7XG4gICAgICB2YXIgY2FsbGJhY2tzID0gdGhpcy5wbGF5Q2FsbGJhY2tzXy5zbGljZSgwKTtcbiAgICAgIHRoaXMucGxheUNhbGxiYWNrc18gPSBbXTsgLy8gY2xlYXIgcGxheSB0ZXJtaW5hdGVkUXVldWUgc2luY2Ugd2UgZmluaXNoZWQgYSByZWFsIHBsYXlcblxuICAgICAgdGhpcy5wbGF5VGVybWluYXRlZFF1ZXVlXyA9IFtdO1xuICAgICAgY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgIGNiKHZhbCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGF1c2UgdGhlIHZpZGVvIHBsYXliYWNrXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQbGF5ZXJ9XG4gICAgICogICAgICAgICBBIHJlZmVyZW5jZSB0byB0aGUgcGxheWVyIG9iamVjdCB0aGlzIGZ1bmN0aW9uIHdhcyBjYWxsZWQgb25cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ucGF1c2UgPSBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICAgIHRoaXMudGVjaENhbGxfKCdwYXVzZScpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB0aGUgcGxheWVyIGlzIHBhdXNlZCBvciBoYXMgeWV0IHRvIHBsYXlcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICogICAgICAgICAtIGZhbHNlOiBpZiB0aGUgbWVkaWEgaXMgY3VycmVudGx5IHBsYXlpbmdcbiAgICAgKiAgICAgICAgIC0gdHJ1ZTogaWYgbWVkaWEgaXMgbm90IGN1cnJlbnRseSBwbGF5aW5nXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnBhdXNlZCA9IGZ1bmN0aW9uIHBhdXNlZCgpIHtcbiAgICAgIC8vIFRoZSBpbml0aWFsIHN0YXRlIG9mIHBhdXNlZCBzaG91bGQgYmUgdHJ1ZSAoaW4gU2FmYXJpIGl0J3MgYWN0dWFsbHkgZmFsc2UpXG4gICAgICByZXR1cm4gdGhpcy50ZWNoR2V0XygncGF1c2VkJykgPT09IGZhbHNlID8gZmFsc2UgOiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYSBUaW1lUmFuZ2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCByYW5nZXMgb2YgdGltZSB0aGF0IHRoZSB1c2VyXG4gICAgICogaGFzIHBsYXllZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1RpbWVSYW5nZX1cbiAgICAgKiAgICAgICAgIEEgdGltZSByYW5nZSBvYmplY3QgdGhhdCByZXByZXNlbnRzIGFsbCB0aGUgaW5jcmVtZW50cyBvZiB0aW1lIHRoYXQgaGF2ZVxuICAgICAqICAgICAgICAgYmVlbiBwbGF5ZWQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnBsYXllZCA9IGZ1bmN0aW9uIHBsYXllZCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnRlY2hHZXRfKCdwbGF5ZWQnKSB8fCBjcmVhdGVUaW1lUmFuZ2VzKDAsIDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSB1c2VyIGlzIFwic2NydWJiaW5nXCIuIFNjcnViYmluZyBpc1xuICAgICAqIHdoZW4gdGhlIHVzZXIgaGFzIGNsaWNrZWQgdGhlIHByb2dyZXNzIGJhciBoYW5kbGUgYW5kIGlzXG4gICAgICogZHJhZ2dpbmcgaXQgYWxvbmcgdGhlIHByb2dyZXNzIGJhci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzU2NydWJiaW5nXVxuICAgICAqICAgICAgICB3aGV0aGVyIHRoZSB1c2VyIGlzIG9yIGlzIG5vdCBzY3J1YmJpbmdcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICogICAgICAgICBUaGUgdmFsdWUgb2Ygc2NydWJiaW5nIHdoZW4gZ2V0dGluZ1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zY3J1YmJpbmcgPSBmdW5jdGlvbiBzY3J1YmJpbmcoaXNTY3J1YmJpbmcpIHtcbiAgICAgIGlmICh0eXBlb2YgaXNTY3J1YmJpbmcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjcnViYmluZ187XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2NydWJiaW5nXyA9ICEhaXNTY3J1YmJpbmc7XG5cbiAgICAgIGlmIChpc1NjcnViYmluZykge1xuICAgICAgICB0aGlzLmFkZENsYXNzKCd2anMtc2NydWJiaW5nJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtc2NydWJiaW5nJyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBvciBzZXQgdGhlIGN1cnJlbnQgdGltZSAoaW4gc2Vjb25kcylcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gW3NlY29uZHNdXG4gICAgICogICAgICAgIFRoZSB0aW1lIHRvIHNlZWsgdG8gaW4gc2Vjb25kc1xuICAgICAqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqICAgICAgICAgLSB0aGUgY3VycmVudCB0aW1lIGluIHNlY29uZHMgd2hlbiBnZXR0aW5nXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmN1cnJlbnRUaW1lID0gZnVuY3Rpb24gY3VycmVudFRpbWUoc2Vjb25kcykge1xuICAgICAgaWYgKHR5cGVvZiBzZWNvbmRzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAoc2Vjb25kcyA8IDApIHtcbiAgICAgICAgICBzZWNvbmRzID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudGVjaENhbGxfKCdzZXRDdXJyZW50VGltZScsIHNlY29uZHMpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIGNhY2hlIGxhc3QgY3VycmVudFRpbWUgYW5kIHJldHVybi4gZGVmYXVsdCB0byAwIHNlY29uZHNcbiAgICAgIC8vXG4gICAgICAvLyBDYWNoaW5nIHRoZSBjdXJyZW50VGltZSBpcyBtZWFudCB0byBwcmV2ZW50IGEgbWFzc2l2ZSBhbW91bnQgb2YgcmVhZHMgb24gdGhlIHRlY2gnc1xuICAgICAgLy8gY3VycmVudFRpbWUgd2hlbiBzY3J1YmJpbmcsIGJ1dCBtYXkgbm90IHByb3ZpZGUgbXVjaCBwZXJmb3JtYW5jZSBiZW5lZml0IGFmdGVyYWxsLlxuICAgICAgLy8gU2hvdWxkIGJlIHRlc3RlZC4gQWxzbyBzb21ldGhpbmcgaGFzIHRvIHJlYWQgdGhlIGFjdHVhbCBjdXJyZW50IHRpbWUgb3IgdGhlIGNhY2hlIHdpbGxcbiAgICAgIC8vIG5ldmVyIGdldCB1cGRhdGVkLlxuXG5cbiAgICAgIHRoaXMuY2FjaGVfLmN1cnJlbnRUaW1lID0gdGhpcy50ZWNoR2V0XygnY3VycmVudFRpbWUnKSB8fCAwO1xuICAgICAgcmV0dXJuIHRoaXMuY2FjaGVfLmN1cnJlbnRUaW1lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3JtYWxseSBnZXRzIHRoZSBsZW5ndGggaW4gdGltZSBvZiB0aGUgdmlkZW8gaW4gc2Vjb25kcztcbiAgICAgKiBpbiBhbGwgYnV0IHRoZSByYXJlc3QgdXNlIGNhc2VzIGFuIGFyZ3VtZW50IHdpbGwgTk9UIGJlIHBhc3NlZCB0byB0aGUgbWV0aG9kXG4gICAgICpcbiAgICAgKiA+ICoqTk9URSoqOiBUaGUgdmlkZW8gbXVzdCBoYXZlIHN0YXJ0ZWQgbG9hZGluZyBiZWZvcmUgdGhlIGR1cmF0aW9uIGNhbiBiZVxuICAgICAqIGtub3duLCBhbmQgaW4gdGhlIGNhc2Ugb2YgRmxhc2gsIG1heSBub3QgYmUga25vd24gdW50aWwgdGhlIHZpZGVvIHN0YXJ0c1xuICAgICAqIHBsYXlpbmcuXG4gICAgICpcbiAgICAgKiBAZmlyZXMgUGxheWVyI2R1cmF0aW9uY2hhbmdlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3NlY29uZHNdXG4gICAgICogICAgICAgIFRoZSBkdXJhdGlvbiBvZiB0aGUgdmlkZW8gdG8gc2V0IGluIHNlY29uZHNcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKiAgICAgICAgIC0gVGhlIGR1cmF0aW9uIG9mIHRoZSB2aWRlbyBpbiBzZWNvbmRzIHdoZW4gZ2V0dGluZ1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5kdXJhdGlvbiA9IGZ1bmN0aW9uIGR1cmF0aW9uKHNlY29uZHMpIHtcbiAgICAgIGlmIChzZWNvbmRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gcmV0dXJuIE5hTiBpZiB0aGUgZHVyYXRpb24gaXMgbm90IGtub3duXG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlXy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gdGhpcy5jYWNoZV8uZHVyYXRpb24gOiBOYU47XG4gICAgICB9XG5cbiAgICAgIHNlY29uZHMgPSBwYXJzZUZsb2F0KHNlY29uZHMpOyAvLyBTdGFuZGFyZGl6ZSBvbiBJbmZpbml0eSBmb3Igc2lnbmFsaW5nIHZpZGVvIGlzIGxpdmVcblxuICAgICAgaWYgKHNlY29uZHMgPCAwKSB7XG4gICAgICAgIHNlY29uZHMgPSBJbmZpbml0eTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlY29uZHMgIT09IHRoaXMuY2FjaGVfLmR1cmF0aW9uKSB7XG4gICAgICAgIC8vIENhY2hlIHRoZSBsYXN0IHNldCB2YWx1ZSBmb3Igb3B0aW1pemVkIHNjcnViYmluZyAoZXNwLiBGbGFzaClcbiAgICAgICAgdGhpcy5jYWNoZV8uZHVyYXRpb24gPSBzZWNvbmRzO1xuXG4gICAgICAgIGlmIChzZWNvbmRzID09PSBJbmZpbml0eSkge1xuICAgICAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1saXZlJyk7XG5cbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zXy5saXZldWkgJiYgdGhpcy5wbGF5ZXJfLmxpdmVUcmFja2VyKSB7XG4gICAgICAgICAgICB0aGlzLmFkZENsYXNzKCd2anMtbGl2ZXVpJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1saXZlJyk7XG4gICAgICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWxpdmV1aScpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc05hTihzZWNvbmRzKSkge1xuICAgICAgICAgIC8vIERvIG5vdCBmaXJlIGR1cmF0aW9uY2hhbmdlIHVubGVzcyB0aGUgZHVyYXRpb24gdmFsdWUgaXMga25vd24uXG4gICAgICAgICAgLy8gQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMTEvV0QtaHRtbDUtMjAxMTAxMTMvdmlkZW8uaHRtbCNtZWRpYS1lbGVtZW50LWxvYWQtYWxnb3JpdGhtfVxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQGV2ZW50IFBsYXllciNkdXJhdGlvbmNoYW5nZVxuICAgICAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAgICAgKi9cbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2R1cmF0aW9uY2hhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyBob3cgbXVjaCB0aW1lIGlzIGxlZnQgaW4gdGhlIHZpZGVvLiBOb3QgcGFydFxuICAgICAqIG9mIHRoZSBuYXRpdmUgdmlkZW8gQVBJLlxuICAgICAqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqICAgICAgICAgVGhlIHRpbWUgcmVtYWluaW5nIGluIHNlY29uZHNcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ucmVtYWluaW5nVGltZSA9IGZ1bmN0aW9uIHJlbWFpbmluZ1RpbWUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5kdXJhdGlvbigpIC0gdGhpcy5jdXJyZW50VGltZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHJlbWFpbmluZyB0aW1lIGZ1bmN0aW9uIHRoYXQgaXMgaW50ZW50ZWQgdG8gYmUgdXNlZCB3aGVuXG4gICAgICogdGhlIHRpbWUgaXMgdG8gYmUgZGlzcGxheWVkIGRpcmVjdGx5IHRvIHRoZSB1c2VyLlxuICAgICAqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqICAgICAgICAgVGhlIHJvdW5kZWQgdGltZSByZW1haW5pbmcgaW4gc2Vjb25kc1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5yZW1haW5pbmdUaW1lRGlzcGxheSA9IGZ1bmN0aW9uIHJlbWFpbmluZ1RpbWVEaXNwbGF5KCkge1xuICAgICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5kdXJhdGlvbigpKSAtIE1hdGguZmxvb3IodGhpcy5jdXJyZW50VGltZSgpKTtcbiAgICB9IC8vXG4gICAgLy8gS2luZCBvZiBsaWtlIGFuIGFycmF5IG9mIHBvcnRpb25zIG9mIHRoZSB2aWRlbyB0aGF0IGhhdmUgYmVlbiBkb3dubG9hZGVkLlxuXG4gICAgLyoqXG4gICAgICogR2V0IGEgVGltZVJhbmdlIG9iamVjdCB3aXRoIGFuIGFycmF5IG9mIHRoZSB0aW1lcyBvZiB0aGUgdmlkZW9cbiAgICAgKiB0aGF0IGhhdmUgYmVlbiBkb3dubG9hZGVkLiBJZiB5b3UganVzdCB3YW50IHRoZSBwZXJjZW50IG9mIHRoZVxuICAgICAqIHZpZGVvIHRoYXQncyBiZWVuIGRvd25sb2FkZWQsIHVzZSBidWZmZXJlZFBlcmNlbnQuXG4gICAgICpcbiAgICAgKiBAc2VlIFtCdWZmZXJlZCBTcGVjXXtAbGluayBodHRwOi8vZGV2LnczLm9yZy9odG1sNS9zcGVjL3ZpZGVvLmh0bWwjZG9tLW1lZGlhLWJ1ZmZlcmVkfVxuICAgICAqXG4gICAgICogQHJldHVybiB7VGltZVJhbmdlfVxuICAgICAqICAgICAgICAgQSBtb2NrIFRpbWVSYW5nZSBvYmplY3QgKGZvbGxvd2luZyBIVE1MIHNwZWMpXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmJ1ZmZlcmVkID0gZnVuY3Rpb24gYnVmZmVyZWQoKSB7XG4gICAgICB2YXIgYnVmZmVyZWQgPSB0aGlzLnRlY2hHZXRfKCdidWZmZXJlZCcpO1xuXG4gICAgICBpZiAoIWJ1ZmZlcmVkIHx8ICFidWZmZXJlZC5sZW5ndGgpIHtcbiAgICAgICAgYnVmZmVyZWQgPSBjcmVhdGVUaW1lUmFuZ2VzKDAsIDApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnVmZmVyZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGVyY2VudCAoYXMgYSBkZWNpbWFsKSBvZiB0aGUgdmlkZW8gdGhhdCdzIGJlZW4gZG93bmxvYWRlZC5cbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYSBwYXJ0IG9mIHRoZSBuYXRpdmUgSFRNTCB2aWRlbyBBUEkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICogICAgICAgICBBIGRlY2ltYWwgYmV0d2VlbiAwIGFuZCAxIHJlcHJlc2VudGluZyB0aGUgcGVyY2VudFxuICAgICAqICAgICAgICAgdGhhdCBpcyBidWZmZXJlZCAwIGJlaW5nIDAlIGFuZCAxIGJlaW5nIDEwMCVcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uYnVmZmVyZWRQZXJjZW50ID0gZnVuY3Rpb24gYnVmZmVyZWRQZXJjZW50JCQxKCkge1xuICAgICAgcmV0dXJuIGJ1ZmZlcmVkUGVyY2VudCh0aGlzLmJ1ZmZlcmVkKCksIHRoaXMuZHVyYXRpb24oKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZW5kaW5nIHRpbWUgb2YgdGhlIGxhc3QgYnVmZmVyZWQgdGltZSByYW5nZVxuICAgICAqIFRoaXMgaXMgdXNlZCBpbiB0aGUgcHJvZ3Jlc3MgYmFyIHRvIGVuY2Fwc3VsYXRlIGFsbCB0aW1lIHJhbmdlcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKiAgICAgICAgIFRoZSBlbmQgb2YgdGhlIGxhc3QgYnVmZmVyZWQgdGltZSByYW5nZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5idWZmZXJlZEVuZCA9IGZ1bmN0aW9uIGJ1ZmZlcmVkRW5kKCkge1xuICAgICAgdmFyIGJ1ZmZlcmVkID0gdGhpcy5idWZmZXJlZCgpO1xuICAgICAgdmFyIGR1cmF0aW9uID0gdGhpcy5kdXJhdGlvbigpO1xuICAgICAgdmFyIGVuZCA9IGJ1ZmZlcmVkLmVuZChidWZmZXJlZC5sZW5ndGggLSAxKTtcblxuICAgICAgaWYgKGVuZCA+IGR1cmF0aW9uKSB7XG4gICAgICAgIGVuZCA9IGR1cmF0aW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZW5kO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgb3Igc2V0IHRoZSBjdXJyZW50IHZvbHVtZSBvZiB0aGUgbWVkaWFcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge251bWJlcn0gW3BlcmNlbnRBc0RlY2ltYWxdXG4gICAgICogICAgICAgICBUaGUgbmV3IHZvbHVtZSBhcyBhIGRlY2ltYWwgcGVyY2VudDpcbiAgICAgKiAgICAgICAgIC0gMCBpcyBtdXRlZC8wJS9vZmZcbiAgICAgKiAgICAgICAgIC0gMS4wIGlzIDEwMCUvZnVsbFxuICAgICAqICAgICAgICAgLSAwLjUgaXMgaGFsZiB2b2x1bWUgb3IgNTAlXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICogICAgICAgICBUaGUgY3VycmVudCB2b2x1bWUgYXMgYSBwZXJjZW50IHdoZW4gZ2V0dGluZ1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by52b2x1bWUgPSBmdW5jdGlvbiB2b2x1bWUocGVyY2VudEFzRGVjaW1hbCkge1xuICAgICAgdmFyIHZvbDtcblxuICAgICAgaWYgKHBlcmNlbnRBc0RlY2ltYWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBGb3JjZSB2YWx1ZSB0byBiZXR3ZWVuIDAgYW5kIDFcbiAgICAgICAgdm9sID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgcGFyc2VGbG9hdChwZXJjZW50QXNEZWNpbWFsKSkpO1xuICAgICAgICB0aGlzLmNhY2hlXy52b2x1bWUgPSB2b2w7XG4gICAgICAgIHRoaXMudGVjaENhbGxfKCdzZXRWb2x1bWUnLCB2b2wpO1xuXG4gICAgICAgIGlmICh2b2wgPiAwKSB7XG4gICAgICAgICAgdGhpcy5sYXN0Vm9sdW1lXyh2b2wpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBEZWZhdWx0IHRvIDEgd2hlbiByZXR1cm5pbmcgY3VycmVudCB2b2x1bWUuXG5cblxuICAgICAgdm9sID0gcGFyc2VGbG9hdCh0aGlzLnRlY2hHZXRfKCd2b2x1bWUnKSk7XG4gICAgICByZXR1cm4gaXNOYU4odm9sKSA/IDEgOiB2b2w7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VycmVudCBtdXRlZCBzdGF0ZSwgb3IgdHVybiBtdXRlIG9uIG9yIG9mZlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbbXV0ZWRdXG4gICAgICogICAgICAgIC0gdHJ1ZSB0byBtdXRlXG4gICAgICogICAgICAgIC0gZmFsc2UgdG8gdW5tdXRlXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqICAgICAgICAgLSB0cnVlIGlmIG11dGUgaXMgb24gYW5kIGdldHRpbmdcbiAgICAgKiAgICAgICAgIC0gZmFsc2UgaWYgbXV0ZSBpcyBvZmYgYW5kIGdldHRpbmdcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ubXV0ZWQgPSBmdW5jdGlvbiBtdXRlZChfbXV0ZWQpIHtcbiAgICAgIGlmIChfbXV0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnRlY2hDYWxsXygnc2V0TXV0ZWQnLCBfbXV0ZWQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnRlY2hHZXRfKCdtdXRlZCcpIHx8IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgZGVmYXVsdE11dGVkIHN0YXRlLCBvciB0dXJuIGRlZmF1bHRNdXRlZCBvbiBvciBvZmYuIGRlZmF1bHRNdXRlZFxuICAgICAqIGluZGljYXRlcyB0aGUgc3RhdGUgb2YgbXV0ZWQgb24gaW5pdGlhbCBwbGF5YmFjay5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICB2YXIgbXlQbGF5ZXIgPSB2aWRlb2pzKCdzb21lLXBsYXllci1pZCcpO1xuICAgICAqXG4gICAgICogICBteVBsYXllci5zcmMoXCJodHRwOi8vd3d3LmV4YW1wbGUuY29tL3BhdGgvdG8vdmlkZW8ubXA0XCIpO1xuICAgICAqXG4gICAgICogICAvLyBnZXQsIHNob3VsZCBiZSBmYWxzZVxuICAgICAqICAgY29uc29sZS5sb2cobXlQbGF5ZXIuZGVmYXVsdE11dGVkKCkpO1xuICAgICAqICAgLy8gc2V0IHRvIHRydWVcbiAgICAgKiAgIG15UGxheWVyLmRlZmF1bHRNdXRlZCh0cnVlKTtcbiAgICAgKiAgIC8vIGdldCBzaG91bGQgYmUgdHJ1ZVxuICAgICAqICAgY29uc29sZS5sb2cobXlQbGF5ZXIuZGVmYXVsdE11dGVkKCkpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZGVmYXVsdE11dGVkXVxuICAgICAqICAgICAgICAtIHRydWUgdG8gbXV0ZVxuICAgICAqICAgICAgICAtIGZhbHNlIHRvIHVubXV0ZVxuICAgICAqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbnxQbGF5ZXJ9XG4gICAgICogICAgICAgICAtIHRydWUgaWYgZGVmYXVsdE11dGVkIGlzIG9uIGFuZCBnZXR0aW5nXG4gICAgICogICAgICAgICAtIGZhbHNlIGlmIGRlZmF1bHRNdXRlZCBpcyBvZmYgYW5kIGdldHRpbmdcbiAgICAgKiAgICAgICAgIC0gQSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgcGxheWVyIHdoZW4gc2V0dGluZ1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5kZWZhdWx0TXV0ZWQgPSBmdW5jdGlvbiBkZWZhdWx0TXV0ZWQoX2RlZmF1bHRNdXRlZCkge1xuICAgICAgaWYgKF9kZWZhdWx0TXV0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpcy50ZWNoQ2FsbF8oJ3NldERlZmF1bHRNdXRlZCcsIF9kZWZhdWx0TXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy50ZWNoR2V0XygnZGVmYXVsdE11dGVkJykgfHwgZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGFzdCB2b2x1bWUsIG9yIHNldCBpdFxuICAgICAqXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBbcGVyY2VudEFzRGVjaW1hbF1cbiAgICAgKiAgICAgICAgIFRoZSBuZXcgbGFzdCB2b2x1bWUgYXMgYSBkZWNpbWFsIHBlcmNlbnQ6XG4gICAgICogICAgICAgICAtIDAgaXMgbXV0ZWQvMCUvb2ZmXG4gICAgICogICAgICAgICAtIDEuMCBpcyAxMDAlL2Z1bGxcbiAgICAgKiAgICAgICAgIC0gMC41IGlzIGhhbGYgdm9sdW1lIG9yIDUwJVxuICAgICAqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqICAgICAgICAgdGhlIGN1cnJlbnQgdmFsdWUgb2YgbGFzdFZvbHVtZSBhcyBhIHBlcmNlbnQgd2hlbiBnZXR0aW5nXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5sYXN0Vm9sdW1lXyA9IGZ1bmN0aW9uIGxhc3RWb2x1bWVfKHBlcmNlbnRBc0RlY2ltYWwpIHtcbiAgICAgIGlmIChwZXJjZW50QXNEZWNpbWFsICE9PSB1bmRlZmluZWQgJiYgcGVyY2VudEFzRGVjaW1hbCAhPT0gMCkge1xuICAgICAgICB0aGlzLmNhY2hlXy5sYXN0Vm9sdW1lID0gcGVyY2VudEFzRGVjaW1hbDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5jYWNoZV8ubGFzdFZvbHVtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgY3VycmVudCB0ZWNoIGNhbiBzdXBwb3J0IG5hdGl2ZSBmdWxsc2NyZWVuXG4gICAgICogKGUuZy4gd2l0aCBidWlsdCBpbiBjb250cm9scyBsaWtlIGlPUywgc28gbm90IG91ciBmbGFzaCBzd2YpXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqICAgICAgICAgaWYgbmF0aXZlIGZ1bGxzY3JlZW4gaXMgc3VwcG9ydGVkXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnN1cHBvcnRzRnVsbFNjcmVlbiA9IGZ1bmN0aW9uIHN1cHBvcnRzRnVsbFNjcmVlbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRlY2hHZXRfKCdzdXBwb3J0c0Z1bGxTY3JlZW4nKSB8fCBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdGhlIHBsYXllciBpcyBpbiBmdWxsc2NyZWVuIG1vZGUgb3IgdGVsbCB0aGUgcGxheWVyIHRoYXQgaXRcbiAgICAgKiBpcyBvciBpcyBub3QgaW4gZnVsbHNjcmVlbiBtb2RlLlxuICAgICAqXG4gICAgICogPiBOT1RFOiBBcyBvZiB0aGUgbGF0ZXN0IEhUTUw1IHNwZWMsIGlzRnVsbHNjcmVlbiBpcyBubyBsb25nZXIgYW4gb2ZmaWNpYWxcbiAgICAgKiBwcm9wZXJ0eSBhbmQgaW5zdGVhZCBkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCBpcyB1c2VkLiBCdXQgaXNGdWxsc2NyZWVuIGlzXG4gICAgICogc3RpbGwgYSB2YWx1YWJsZSBwcm9wZXJ0eSBmb3IgaW50ZXJuYWwgcGxheWVyIHdvcmtpbmdzLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gW2lzRlNdXG4gICAgICogICAgICAgICBTZXQgdGhlIHBsYXllcnMgY3VycmVudCBmdWxsc2NyZWVuIHN0YXRlXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqICAgICAgICAgLSB0cnVlIGlmIGZ1bGxzY3JlZW4gaXMgb24gYW5kIGdldHRpbmdcbiAgICAgKiAgICAgICAgIC0gZmFsc2UgaWYgZnVsbHNjcmVlbiBpcyBvZmYgYW5kIGdldHRpbmdcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uaXNGdWxsc2NyZWVuID0gZnVuY3Rpb24gaXNGdWxsc2NyZWVuKGlzRlMpIHtcbiAgICAgIGlmIChpc0ZTICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5pc0Z1bGxzY3JlZW5fID0gISFpc0ZTO1xuICAgICAgICB0aGlzLnRvZ2dsZUZ1bGxzY3JlZW5DbGFzc18oKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gISF0aGlzLmlzRnVsbHNjcmVlbl87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlYXNlIHRoZSBzaXplIG9mIHRoZSB2aWRlbyB0byBmdWxsIHNjcmVlblxuICAgICAqIEluIHNvbWUgYnJvd3NlcnMsIGZ1bGwgc2NyZWVuIGlzIG5vdCBzdXBwb3J0ZWQgbmF0aXZlbHksIHNvIGl0IGVudGVyc1xuICAgICAqIFwiZnVsbCB3aW5kb3cgbW9kZVwiLCB3aGVyZSB0aGUgdmlkZW8gZmlsbHMgdGhlIGJyb3dzZXIgd2luZG93LlxuICAgICAqIEluIGJyb3dzZXJzIGFuZCBkZXZpY2VzIHRoYXQgc3VwcG9ydCBuYXRpdmUgZnVsbCBzY3JlZW4sIHNvbWV0aW1lcyB0aGVcbiAgICAgKiBicm93c2VyJ3MgZGVmYXVsdCBjb250cm9scyB3aWxsIGJlIHNob3duLCBhbmQgbm90IHRoZSBWaWRlby5qcyBjdXN0b20gc2tpbi5cbiAgICAgKiBUaGlzIGluY2x1ZGVzIG1vc3QgbW9iaWxlIGRldmljZXMgKGlPUywgQW5kcm9pZCkgYW5kIG9sZGVyIHZlcnNpb25zIG9mXG4gICAgICogU2FmYXJpLlxuICAgICAqXG4gICAgICogQGZpcmVzIFBsYXllciNmdWxsc2NyZWVuY2hhbmdlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnJlcXVlc3RGdWxsc2NyZWVuID0gZnVuY3Rpb24gcmVxdWVzdEZ1bGxzY3JlZW4oKSB7XG4gICAgICB2YXIgZnNBcGkgPSBGdWxsc2NyZWVuQXBpO1xuICAgICAgdGhpcy5pc0Z1bGxzY3JlZW4odHJ1ZSk7XG5cbiAgICAgIGlmIChmc0FwaS5yZXF1ZXN0RnVsbHNjcmVlbikge1xuICAgICAgICAvLyB0aGUgYnJvd3NlciBzdXBwb3J0cyBnb2luZyBmdWxsc2NyZWVuIGF0IHRoZSBlbGVtZW50IGxldmVsIHNvIHdlIGNhblxuICAgICAgICAvLyB0YWtlIHRoZSBjb250cm9scyBmdWxsc2NyZWVuIGFzIHdlbGwgYXMgdGhlIHZpZGVvXG4gICAgICAgIC8vIFRyaWdnZXIgZnVsbHNjcmVlbmNoYW5nZSBldmVudCBhZnRlciBjaGFuZ2VcbiAgICAgICAgLy8gV2UgaGF2ZSB0byBzcGVjaWZpY2FsbHkgYWRkIHRoaXMgZWFjaCB0aW1lLCBhbmQgcmVtb3ZlXG4gICAgICAgIC8vIHdoZW4gY2FuY2VsaW5nIGZ1bGxzY3JlZW4uIE90aGVyd2lzZSBpZiB0aGVyZSdzIG11bHRpcGxlXG4gICAgICAgIC8vIHBsYXllcnMgb24gYSBwYWdlLCB0aGV5IHdvdWxkIGFsbCBiZSByZWFjdGluZyB0byB0aGUgc2FtZSBmdWxsc2NyZWVuXG4gICAgICAgIC8vIGV2ZW50c1xuICAgICAgICBvbihkb2N1bWVudCwgZnNBcGkuZnVsbHNjcmVlbmNoYW5nZSwgdGhpcy5ib3VuZERvY3VtZW50RnVsbHNjcmVlbkNoYW5nZV8pO1xuICAgICAgICB0aGlzLmVsX1tmc0FwaS5yZXF1ZXN0RnVsbHNjcmVlbl0oKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy50ZWNoXy5zdXBwb3J0c0Z1bGxTY3JlZW4oKSkge1xuICAgICAgICAvLyB3ZSBjYW4ndCB0YWtlIHRoZSB2aWRlby5qcyBjb250cm9scyBmdWxsc2NyZWVuIGJ1dCB3ZSBjYW4gZ28gZnVsbHNjcmVlblxuICAgICAgICAvLyB3aXRoIG5hdGl2ZSBjb250cm9sc1xuICAgICAgICB0aGlzLnRlY2hDYWxsXygnZW50ZXJGdWxsU2NyZWVuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBmdWxsc2NyZWVuIGlzbid0IHN1cHBvcnRlZCBzbyB3ZSdsbCBqdXN0IHN0cmV0Y2ggdGhlIHZpZGVvIGVsZW1lbnQgdG9cbiAgICAgICAgLy8gZmlsbCB0aGUgdmlld3BvcnRcbiAgICAgICAgdGhpcy5lbnRlckZ1bGxXaW5kb3coKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBldmVudCBQbGF5ZXIjZnVsbHNjcmVlbmNoYW5nZVxuICAgICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgICAqL1xuXG4gICAgICAgIHRoaXMudHJpZ2dlcignZnVsbHNjcmVlbmNoYW5nZScpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHZpZGVvIHRvIGl0cyBub3JtYWwgc2l6ZSBhZnRlciBoYXZpbmcgYmVlbiBpbiBmdWxsIHNjcmVlbiBtb2RlXG4gICAgICpcbiAgICAgKiBAZmlyZXMgUGxheWVyI2Z1bGxzY3JlZW5jaGFuZ2VcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZXhpdEZ1bGxzY3JlZW4gPSBmdW5jdGlvbiBleGl0RnVsbHNjcmVlbigpIHtcbiAgICAgIHZhciBmc0FwaSA9IEZ1bGxzY3JlZW5BcGk7XG4gICAgICB0aGlzLmlzRnVsbHNjcmVlbihmYWxzZSk7IC8vIENoZWNrIGZvciBicm93c2VyIGVsZW1lbnQgZnVsbHNjcmVlbiBzdXBwb3J0XG5cbiAgICAgIGlmIChmc0FwaS5yZXF1ZXN0RnVsbHNjcmVlbikge1xuICAgICAgICBkb2N1bWVudFtmc0FwaS5leGl0RnVsbHNjcmVlbl0oKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy50ZWNoXy5zdXBwb3J0c0Z1bGxTY3JlZW4oKSkge1xuICAgICAgICB0aGlzLnRlY2hDYWxsXygnZXhpdEZ1bGxTY3JlZW4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZXhpdEZ1bGxXaW5kb3coKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBldmVudCBQbGF5ZXIjZnVsbHNjcmVlbmNoYW5nZVxuICAgICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgICAqL1xuXG4gICAgICAgIHRoaXMudHJpZ2dlcignZnVsbHNjcmVlbmNoYW5nZScpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGVuIGZ1bGxzY3JlZW4gaXNuJ3Qgc3VwcG9ydGVkIHdlIGNhbiBzdHJldGNoIHRoZVxuICAgICAqIHZpZGVvIGNvbnRhaW5lciB0byBhcyB3aWRlIGFzIHRoZSBicm93c2VyIHdpbGwgbGV0IHVzLlxuICAgICAqXG4gICAgICogQGZpcmVzIFBsYXllciNlbnRlckZ1bGxXaW5kb3dcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZW50ZXJGdWxsV2luZG93ID0gZnVuY3Rpb24gZW50ZXJGdWxsV2luZG93KCkge1xuICAgICAgdGhpcy5pc0Z1bGxXaW5kb3cgPSB0cnVlOyAvLyBTdG9yaW5nIG9yaWdpbmFsIGRvYyBvdmVyZmxvdyB2YWx1ZSB0byByZXR1cm4gdG8gd2hlbiBmdWxsc2NyZWVuIGlzIG9mZlxuXG4gICAgICB0aGlzLmRvY09yaWdPdmVyZmxvdyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdzsgLy8gQWRkIGxpc3RlbmVyIGZvciBlc2Mga2V5IHRvIGV4aXQgZnVsbHNjcmVlblxuXG4gICAgICBvbihkb2N1bWVudCwgJ2tleWRvd24nLCB0aGlzLmJvdW5kRnVsbFdpbmRvd09uRXNjS2V5Xyk7IC8vIEhpZGUgYW55IHNjcm9sbCBiYXJzXG5cbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOyAvLyBBcHBseSBmdWxsc2NyZWVuIHN0eWxlc1xuXG4gICAgICBhZGRDbGFzcyhkb2N1bWVudC5ib2R5LCAndmpzLWZ1bGwtd2luZG93Jyk7XG4gICAgICAvKipcbiAgICAgICAqIEBldmVudCBQbGF5ZXIjZW50ZXJGdWxsV2luZG93XG4gICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgKi9cblxuICAgICAgdGhpcy50cmlnZ2VyKCdlbnRlckZ1bGxXaW5kb3cnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgZm9yIGNhbGwgdG8gZWl0aGVyIGV4aXQgZnVsbCB3aW5kb3cgb3JcbiAgICAgKiBmdWxsIHNjcmVlbiBvbiBFU0Mga2V5XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAgICAgKiAgICAgICAgRXZlbnQgdG8gY2hlY2sgZm9yIGtleSBwcmVzc1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5mdWxsV2luZG93T25Fc2NLZXkgPSBmdW5jdGlvbiBmdWxsV2luZG93T25Fc2NLZXkoZXZlbnQpIHtcbiAgICAgIGlmIChrZXljb2RlLmlzRXZlbnRLZXkoZXZlbnQsICdFc2MnKSkge1xuICAgICAgICBpZiAodGhpcy5pc0Z1bGxzY3JlZW4oKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHRoaXMuZXhpdEZ1bGxzY3JlZW4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmV4aXRGdWxsV2luZG93KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhpdCBmdWxsIHdpbmRvd1xuICAgICAqXG4gICAgICogQGZpcmVzIFBsYXllciNleGl0RnVsbFdpbmRvd1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5leGl0RnVsbFdpbmRvdyA9IGZ1bmN0aW9uIGV4aXRGdWxsV2luZG93KCkge1xuICAgICAgdGhpcy5pc0Z1bGxXaW5kb3cgPSBmYWxzZTtcbiAgICAgIG9mZihkb2N1bWVudCwgJ2tleWRvd24nLCB0aGlzLmJvdW5kRnVsbFdpbmRvd09uRXNjS2V5Xyk7IC8vIFVuaGlkZSBzY3JvbGwgYmFycy5cblxuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gdGhpcy5kb2NPcmlnT3ZlcmZsb3c7IC8vIFJlbW92ZSBmdWxsc2NyZWVuIHN0eWxlc1xuXG4gICAgICByZW1vdmVDbGFzcyhkb2N1bWVudC5ib2R5LCAndmpzLWZ1bGwtd2luZG93Jyk7IC8vIFJlc2l6ZSB0aGUgYm94LCBjb250cm9sbGVyLCBhbmQgcG9zdGVyIHRvIG9yaWdpbmFsIHNpemVzXG4gICAgICAvLyB0aGlzLnBvc2l0aW9uQWxsKCk7XG5cbiAgICAgIC8qKlxuICAgICAgICogQGV2ZW50IFBsYXllciNleGl0RnVsbFdpbmRvd1xuICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICovXG5cbiAgICAgIHRoaXMudHJpZ2dlcignZXhpdEZ1bGxXaW5kb3cnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBnZXRzIGNhbGxlZCB3aGVuIGEgYFBsYXllcmAgZ2FpbnMgZm9jdXMgdmlhIGEgYGZvY3VzYCBldmVudC5cbiAgICAgKiBUdXJucyBvbiBsaXN0ZW5pbmcgZm9yIGBrZXlkb3duYCBldmVudHMuIFdoZW4gdGhleSBoYXBwZW4gaXRcbiAgICAgKiBjYWxscyBgdGhpcy5oYW5kbGVLZXlQcmVzc2AuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBUaGUgYGZvY3VzYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBsaXN0ZW5zIGZvY3VzXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZUZvY3VzID0gZnVuY3Rpb24gaGFuZGxlRm9jdXMoZXZlbnQpIHtcbiAgICAgIC8vIGNhbGwgb2ZmIGZpcnN0IHRvIG1ha2Ugc3VyZSB3ZSBkb24ndCBrZWVwIGFkZGluZyBrZXlkb3duIGhhbmRsZXJzXG4gICAgICBvZmYoZG9jdW1lbnQsICdrZXlkb3duJywgdGhpcy5ib3VuZEhhbmRsZUtleVByZXNzXyk7XG4gICAgICBvbihkb2N1bWVudCwgJ2tleWRvd24nLCB0aGlzLmJvdW5kSGFuZGxlS2V5UHJlc3NfKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gYSBgUGxheWVyYCBsb3NlcyBmb2N1cy4gVHVybnMgb2ZmIHRoZSBsaXN0ZW5lciBmb3JcbiAgICAgKiBga2V5ZG93bmAgZXZlbnRzLiBXaGljaCBTdG9wcyBgdGhpcy5oYW5kbGVLZXlQcmVzc2AgZnJvbSBnZXR0aW5nIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIFRoZSBgYmx1cmAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZSBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAbGlzdGVucyBibHVyXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZUJsdXIgPSBmdW5jdGlvbiBoYW5kbGVCbHVyKGV2ZW50KSB7XG4gICAgICBvZmYoZG9jdW1lbnQsICdrZXlkb3duJywgdGhpcy5ib3VuZEhhbmRsZUtleVByZXNzXyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aGVuIHRoaXMgUGxheWVyIGhhcyBmb2N1cyBhbmQgYSBrZXkgZ2V0cyBwcmVzc2VkIGRvd24sIG9yIHdoZW5cbiAgICAgKiBhbnkgQ29tcG9uZW50IG9mIHRoaXMgcGxheWVyIHJlY2VpdmVzIGEga2V5IHByZXNzIHRoYXQgaXQgZG9lc24ndCBoYW5kbGUuXG4gICAgICogVGhpcyBhbGxvd3MgcGxheWVyLXdpZGUgaG90a2V5cyAoZWl0aGVyIGFzIGRlZmluZWQgYmVsb3csIG9yIG9wdGlvbmFsbHlcbiAgICAgKiBieSBhbiBleHRlcm5hbCBmdW5jdGlvbikuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBUaGUgYGtleWRvd25gIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmUgY2FsbGVkLlxuICAgICAqXG4gICAgICogQGxpc3RlbnMga2V5ZG93blxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVLZXlQcmVzcyA9IGZ1bmN0aW9uIGhhbmRsZUtleVByZXNzKGV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zXy51c2VyQWN0aW9ucyAmJiB0aGlzLm9wdGlvbnNfLnVzZXJBY3Rpb25zLmhvdGtleXMgJiYgdGhpcy5vcHRpb25zXy51c2VyQWN0aW9ucy5ob3RrZXlzICE9PSBmYWxzZSkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9uc18udXNlckFjdGlvbnMuaG90a2V5cyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9uc18udXNlckFjdGlvbnMuaG90a2V5cy5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmhhbmRsZUhvdGtleXMoZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aGVuIHRoaXMgUGxheWVyIHJlY2VpdmVzIGEgaG90a2V5IGtleWRvd24gZXZlbnQuXG4gICAgICogU3VwcG9ydGVkIHBsYXllci13aWRlIGhvdGtleXMgYXJlOlxuICAgICAqXG4gICAgICogICBmICAgICAgICAgIC0gdG9nZ2xlIGZ1bGxzY3JlZW5cbiAgICAgKiAgIG0gICAgICAgICAgLSB0b2dnbGUgbXV0ZVxuICAgICAqICAgayBvciBTcGFjZSAtIHRvZ2dsZSBwbGF5L3BhdXNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgICAqICAgICAgICBUaGUgYGtleWRvd25gIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmUgY2FsbGVkLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5oYW5kbGVIb3RrZXlzID0gZnVuY3Rpb24gaGFuZGxlSG90a2V5cyhldmVudCkge1xuICAgICAgdmFyIGhvdGtleXMgPSB0aGlzLm9wdGlvbnNfLnVzZXJBY3Rpb25zID8gdGhpcy5vcHRpb25zXy51c2VyQWN0aW9ucy5ob3RrZXlzIDoge307IC8vIHNldCBmdWxsc2NyZWVuS2V5LCBtdXRlS2V5LCBwbGF5UGF1c2VLZXkgZnJvbSBgaG90a2V5c2AsIHVzZSBkZWZhdWx0cyBpZiBub3Qgc2V0XG5cbiAgICAgIHZhciBfaG90a2V5cyRmdWxsc2NyZWVuS2UgPSBob3RrZXlzLmZ1bGxzY3JlZW5LZXksXG4gICAgICAgICAgZnVsbHNjcmVlbktleSA9IF9ob3RrZXlzJGZ1bGxzY3JlZW5LZSA9PT0gdm9pZCAwID8gZnVuY3Rpb24gKGtleWRvd25FdmVudCkge1xuICAgICAgICByZXR1cm4ga2V5Y29kZS5pc0V2ZW50S2V5KGtleWRvd25FdmVudCwgJ2YnKTtcbiAgICAgIH0gOiBfaG90a2V5cyRmdWxsc2NyZWVuS2UsXG4gICAgICAgICAgX2hvdGtleXMkbXV0ZUtleSA9IGhvdGtleXMubXV0ZUtleSxcbiAgICAgICAgICBtdXRlS2V5ID0gX2hvdGtleXMkbXV0ZUtleSA9PT0gdm9pZCAwID8gZnVuY3Rpb24gKGtleWRvd25FdmVudCkge1xuICAgICAgICByZXR1cm4ga2V5Y29kZS5pc0V2ZW50S2V5KGtleWRvd25FdmVudCwgJ20nKTtcbiAgICAgIH0gOiBfaG90a2V5cyRtdXRlS2V5LFxuICAgICAgICAgIF9ob3RrZXlzJHBsYXlQYXVzZUtleSA9IGhvdGtleXMucGxheVBhdXNlS2V5LFxuICAgICAgICAgIHBsYXlQYXVzZUtleSA9IF9ob3RrZXlzJHBsYXlQYXVzZUtleSA9PT0gdm9pZCAwID8gZnVuY3Rpb24gKGtleWRvd25FdmVudCkge1xuICAgICAgICByZXR1cm4ga2V5Y29kZS5pc0V2ZW50S2V5KGtleWRvd25FdmVudCwgJ2snKSB8fCBrZXljb2RlLmlzRXZlbnRLZXkoa2V5ZG93bkV2ZW50LCAnU3BhY2UnKTtcbiAgICAgIH0gOiBfaG90a2V5cyRwbGF5UGF1c2VLZXk7XG5cbiAgICAgIGlmIChmdWxsc2NyZWVuS2V5LmNhbGwodGhpcywgZXZlbnQpKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBGU1RvZ2dsZSA9IENvbXBvbmVudC5nZXRDb21wb25lbnQoJ0Z1bGxzY3JlZW5Ub2dnbGUnKTtcblxuICAgICAgICBpZiAoZG9jdW1lbnRbRnVsbHNjcmVlbkFwaS5mdWxsc2NyZWVuRW5hYmxlZF0gIT09IGZhbHNlKSB7XG4gICAgICAgICAgRlNUb2dnbGUucHJvdG90eXBlLmhhbmRsZUNsaWNrLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobXV0ZUtleS5jYWxsKHRoaXMsIGV2ZW50KSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgTXV0ZVRvZ2dsZSA9IENvbXBvbmVudC5nZXRDb21wb25lbnQoJ011dGVUb2dnbGUnKTtcbiAgICAgICAgTXV0ZVRvZ2dsZS5wcm90b3R5cGUuaGFuZGxlQ2xpY2suY2FsbCh0aGlzKTtcbiAgICAgIH0gZWxzZSBpZiAocGxheVBhdXNlS2V5LmNhbGwodGhpcywgZXZlbnQpKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBQbGF5VG9nZ2xlID0gQ29tcG9uZW50LmdldENvbXBvbmVudCgnUGxheVRvZ2dsZScpO1xuICAgICAgICBQbGF5VG9nZ2xlLnByb3RvdHlwZS5oYW5kbGVDbGljay5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayB3aGV0aGVyIHRoZSBwbGF5ZXIgY2FuIHBsYXkgYSBnaXZlbiBtaW1ldHlwZVxuICAgICAqXG4gICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAxMS9XRC1odG1sNS0yMDExMDExMy92aWRlby5odG1sI2RvbS1uYXZpZ2F0b3ItY2FucGxheXR5cGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gICAgICogICAgICAgIFRoZSBtaW1ldHlwZSB0byBjaGVja1xuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgJ3Byb2JhYmx5JywgJ21heWJlJywgb3IgJycgKGVtcHR5IHN0cmluZylcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY2FuUGxheVR5cGUgPSBmdW5jdGlvbiBjYW5QbGF5VHlwZSh0eXBlKSB7XG4gICAgICB2YXIgY2FuOyAvLyBMb29wIHRocm91Z2ggZWFjaCBwbGF5YmFjayB0ZWNobm9sb2d5IGluIHRoZSBvcHRpb25zIG9yZGVyXG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gdGhpcy5vcHRpb25zXy50ZWNoT3JkZXI7IGkgPCBqLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0ZWNoTmFtZSA9IGpbaV07XG4gICAgICAgIHZhciB0ZWNoID0gVGVjaC5nZXRUZWNoKHRlY2hOYW1lKTsgLy8gU3VwcG9ydCBvbGQgYmVoYXZpb3Igb2YgdGVjaHMgYmVpbmcgcmVnaXN0ZXJlZCBhcyBjb21wb25lbnRzLlxuICAgICAgICAvLyBSZW1vdmUgb25jZSB0aGF0IGRlcHJlY2F0ZWQgYmVoYXZpb3IgaXMgcmVtb3ZlZC5cblxuICAgICAgICBpZiAoIXRlY2gpIHtcbiAgICAgICAgICB0ZWNoID0gQ29tcG9uZW50LmdldENvbXBvbmVudCh0ZWNoTmFtZSk7XG4gICAgICAgIH0gLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgdGVjaCBpcyBkZWZpbmVkIGJlZm9yZSBjb250aW51aW5nXG5cblxuICAgICAgICBpZiAoIXRlY2gpIHtcbiAgICAgICAgICBsb2cuZXJyb3IoXCJUaGUgXFxcIlwiICsgdGVjaE5hbWUgKyBcIlxcXCIgdGVjaCBpcyB1bmRlZmluZWQuIFNraXBwZWQgYnJvd3NlciBzdXBwb3J0IGNoZWNrIGZvciB0aGF0IHRlY2guXCIpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9IC8vIENoZWNrIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoaXMgdGVjaG5vbG9neVxuXG5cbiAgICAgICAgaWYgKHRlY2guaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgIGNhbiA9IHRlY2guY2FuUGxheVR5cGUodHlwZSk7XG5cbiAgICAgICAgICBpZiAoY2FuKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbGVjdCBzb3VyY2UgYmFzZWQgb24gdGVjaC1vcmRlciBvciBzb3VyY2Utb3JkZXJcbiAgICAgKiBVc2VzIHNvdXJjZS1vcmRlciBzZWxlY3Rpb24gaWYgYG9wdGlvbnMuc291cmNlT3JkZXJgIGlzIHRydXRoeS4gT3RoZXJ3aXNlLFxuICAgICAqIGRlZmF1bHRzIHRvIHRlY2gtb3JkZXIgc2VsZWN0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBzb3VyY2VzXG4gICAgICogICAgICAgIFRoZSBzb3VyY2VzIGZvciBhIG1lZGlhIGFzc2V0XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R8Ym9vbGVhbn1cbiAgICAgKiAgICAgICAgIE9iamVjdCBvZiBzb3VyY2UgYW5kIHRlY2ggb3JkZXIgb3IgZmFsc2VcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uc2VsZWN0U291cmNlID0gZnVuY3Rpb24gc2VsZWN0U291cmNlKHNvdXJjZXMpIHtcbiAgICAgIHZhciBfdGhpczEwID0gdGhpcztcblxuICAgICAgLy8gR2V0IG9ubHkgdGhlIHRlY2hzIHNwZWNpZmllZCBpbiBgdGVjaE9yZGVyYCB0aGF0IGV4aXN0IGFuZCBhcmUgc3VwcG9ydGVkIGJ5IHRoZVxuICAgICAgLy8gY3VycmVudCBwbGF0Zm9ybVxuICAgICAgdmFyIHRlY2hzID0gdGhpcy5vcHRpb25zXy50ZWNoT3JkZXIubWFwKGZ1bmN0aW9uICh0ZWNoTmFtZSkge1xuICAgICAgICByZXR1cm4gW3RlY2hOYW1lLCBUZWNoLmdldFRlY2godGVjaE5hbWUpXTtcbiAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoX3JlZikge1xuICAgICAgICB2YXIgdGVjaE5hbWUgPSBfcmVmWzBdLFxuICAgICAgICAgICAgdGVjaCA9IF9yZWZbMV07XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgdGVjaCBpcyBkZWZpbmVkIGJlZm9yZSBjb250aW51aW5nXG4gICAgICAgIGlmICh0ZWNoKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhpcyB0ZWNobm9sb2d5XG4gICAgICAgICAgcmV0dXJuIHRlY2guaXNTdXBwb3J0ZWQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxvZy5lcnJvcihcIlRoZSBcXFwiXCIgKyB0ZWNoTmFtZSArIFwiXFxcIiB0ZWNoIGlzIHVuZGVmaW5lZC4gU2tpcHBlZCBicm93c2VyIHN1cHBvcnQgY2hlY2sgZm9yIHRoYXQgdGVjaC5cIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0pOyAvLyBJdGVyYXRlIG92ZXIgZWFjaCBgaW5uZXJBcnJheWAgZWxlbWVudCBvbmNlIHBlciBgb3V0ZXJBcnJheWAgZWxlbWVudCBhbmQgZXhlY3V0ZVxuICAgICAgLy8gYHRlc3RlcmAgd2l0aCBib3RoLiBJZiBgdGVzdGVyYCByZXR1cm5zIGEgbm9uLWZhbHN5IHZhbHVlLCBleGl0IGVhcmx5IGFuZCByZXR1cm5cbiAgICAgIC8vIHRoYXQgdmFsdWUuXG5cbiAgICAgIHZhciBmaW5kRmlyc3RQYXNzaW5nVGVjaFNvdXJjZVBhaXIgPSBmdW5jdGlvbiBmaW5kRmlyc3RQYXNzaW5nVGVjaFNvdXJjZVBhaXIob3V0ZXJBcnJheSwgaW5uZXJBcnJheSwgdGVzdGVyKSB7XG4gICAgICAgIHZhciBmb3VuZDtcbiAgICAgICAgb3V0ZXJBcnJheS5zb21lKGZ1bmN0aW9uIChvdXRlckNob2ljZSkge1xuICAgICAgICAgIHJldHVybiBpbm5lckFycmF5LnNvbWUoZnVuY3Rpb24gKGlubmVyQ2hvaWNlKSB7XG4gICAgICAgICAgICBmb3VuZCA9IHRlc3RlcihvdXRlckNob2ljZSwgaW5uZXJDaG9pY2UpO1xuXG4gICAgICAgICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgICB9O1xuXG4gICAgICB2YXIgZm91bmRTb3VyY2VBbmRUZWNoO1xuXG4gICAgICB2YXIgZmxpcCA9IGZ1bmN0aW9uIGZsaXAoZm4pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgcmV0dXJuIGZuKGIsIGEpO1xuICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgdmFyIGZpbmRlciA9IGZ1bmN0aW9uIGZpbmRlcihfcmVmMiwgc291cmNlKSB7XG4gICAgICAgIHZhciB0ZWNoTmFtZSA9IF9yZWYyWzBdLFxuICAgICAgICAgICAgdGVjaCA9IF9yZWYyWzFdO1xuXG4gICAgICAgIGlmICh0ZWNoLmNhblBsYXlTb3VyY2Uoc291cmNlLCBfdGhpczEwLm9wdGlvbnNfW3RlY2hOYW1lLnRvTG93ZXJDYXNlKCldKSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzb3VyY2U6IHNvdXJjZSxcbiAgICAgICAgICAgIHRlY2g6IHRlY2hOYW1lXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfTsgLy8gRGVwZW5kaW5nIG9uIHRoZSB0cnV0aGluZXNzIG9mIGBvcHRpb25zLnNvdXJjZU9yZGVyYCwgd2Ugc3dhcCB0aGUgb3JkZXIgb2YgdGVjaHMgYW5kIHNvdXJjZXNcbiAgICAgIC8vIHRvIHNlbGVjdCBmcm9tIHRoZW0gYmFzZWQgb24gdGhlaXIgcHJpb3JpdHkuXG5cblxuICAgICAgaWYgKHRoaXMub3B0aW9uc18uc291cmNlT3JkZXIpIHtcbiAgICAgICAgLy8gU291cmNlLWZpcnN0IG9yZGVyaW5nXG4gICAgICAgIGZvdW5kU291cmNlQW5kVGVjaCA9IGZpbmRGaXJzdFBhc3NpbmdUZWNoU291cmNlUGFpcihzb3VyY2VzLCB0ZWNocywgZmxpcChmaW5kZXIpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFRlY2gtZmlyc3Qgb3JkZXJpbmdcbiAgICAgICAgZm91bmRTb3VyY2VBbmRUZWNoID0gZmluZEZpcnN0UGFzc2luZ1RlY2hTb3VyY2VQYWlyKHRlY2hzLCBzb3VyY2VzLCBmaW5kZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm91bmRTb3VyY2VBbmRUZWNoIHx8IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgb3Igc2V0IHRoZSB2aWRlbyBzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RlY2h+U291cmNlT2JqZWN0fFRlY2h+U291cmNlT2JqZWN0W118c3RyaW5nfSBbc291cmNlXVxuICAgICAqICAgICAgICBBIFNvdXJjZU9iamVjdCwgYW4gYXJyYXkgb2YgU291cmNlT2JqZWN0cywgb3IgYSBzdHJpbmcgcmVmZXJlbmNpbmdcbiAgICAgKiAgICAgICAgYSBVUkwgdG8gYSBtZWRpYSBzb3VyY2UuIEl0IGlzIF9oaWdobHkgcmVjb21tZW5kZWRfIHRoYXQgYW4gb2JqZWN0XG4gICAgICogICAgICAgIG9yIGFycmF5IG9mIG9iamVjdHMgaXMgdXNlZCBoZXJlLCBzbyB0aGF0IHNvdXJjZSBzZWxlY3Rpb25cbiAgICAgKiAgICAgICAgYWxnb3JpdGhtcyBjYW4gdGFrZSB0aGUgYHR5cGVgIGludG8gYWNjb3VudC5cbiAgICAgKlxuICAgICAqICAgICAgICBJZiBub3QgcHJvdmlkZWQsIHRoaXMgbWV0aG9kIGFjdHMgYXMgYSBnZXR0ZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfVxuICAgICAqICAgICAgICAgSWYgdGhlIGBzb3VyY2VgIGFyZ3VtZW50IGlzIG1pc3NpbmcsIHJldHVybnMgdGhlIGN1cnJlbnQgc291cmNlXG4gICAgICogICAgICAgICBVUkwuIE90aGVyd2lzZSwgcmV0dXJucyBub3RoaW5nL3VuZGVmaW5lZC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uc3JjID0gZnVuY3Rpb24gc3JjKHNvdXJjZSkge1xuICAgICAgdmFyIF90aGlzMTEgPSB0aGlzO1xuXG4gICAgICAvLyBnZXR0ZXIgdXNhZ2VcbiAgICAgIGlmICh0eXBlb2Ygc291cmNlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZV8uc3JjIHx8ICcnO1xuICAgICAgfSAvLyBmaWx0ZXIgb3V0IGludmFsaWQgc291cmNlcyBhbmQgdHVybiBvdXIgc291cmNlIGludG9cbiAgICAgIC8vIGFuIGFycmF5IG9mIHNvdXJjZSBvYmplY3RzXG5cblxuICAgICAgdmFyIHNvdXJjZXMgPSBmaWx0ZXJTb3VyY2Uoc291cmNlKTsgLy8gaWYgYSBzb3VyY2Ugd2FzIHBhc3NlZCBpbiB0aGVuIGl0IGlzIGludmFsaWQgYmVjYXVzZVxuICAgICAgLy8gaXQgd2FzIGZpbHRlcmVkIHRvIGEgemVybyBsZW5ndGggQXJyYXkuIFNvIHdlIGhhdmUgdG9cbiAgICAgIC8vIHNob3cgYW4gZXJyb3JcblxuICAgICAgaWYgKCFzb3VyY2VzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMuZXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogNCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMubG9jYWxpemUodGhpcy5vcHRpb25zXy5ub3RTdXBwb3J0ZWRNZXNzYWdlKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCAwKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBpbnRpYWwgc291cmNlc1xuXG5cbiAgICAgIHRoaXMuY2hhbmdpbmdTcmNfID0gdHJ1ZTtcbiAgICAgIHRoaXMuY2FjaGVfLnNvdXJjZXMgPSBzb3VyY2VzO1xuICAgICAgdGhpcy51cGRhdGVTb3VyY2VDYWNoZXNfKHNvdXJjZXNbMF0pOyAvLyBtaWRkbGV3YXJlU291cmNlIGlzIHRoZSBzb3VyY2UgYWZ0ZXIgaXQgaGFzIGJlZW4gY2hhbmdlZCBieSBtaWRkbGV3YXJlXG5cbiAgICAgIHNldFNvdXJjZSh0aGlzLCBzb3VyY2VzWzBdLCBmdW5jdGlvbiAobWlkZGxld2FyZVNvdXJjZSwgbXdzKSB7XG4gICAgICAgIF90aGlzMTEubWlkZGxld2FyZV8gPSBtd3M7IC8vIHNpbmNlIHNvdXJjZVNldCBpcyBhc3luYyB3ZSBoYXZlIHRvIHVwZGF0ZSB0aGUgY2FjaGUgYWdhaW4gYWZ0ZXIgd2Ugc2VsZWN0IGEgc291cmNlIHNpbmNlXG4gICAgICAgIC8vIHRoZSBzb3VyY2UgdGhhdCBpcyBzZWxlY3RlZCBjb3VsZCBiZSBvdXQgb2Ygb3JkZXIgZnJvbSB0aGUgY2FjaGUgdXBkYXRlIGFib3ZlIHRoaXMgY2FsbGJhY2suXG5cbiAgICAgICAgX3RoaXMxMS5jYWNoZV8uc291cmNlcyA9IHNvdXJjZXM7XG5cbiAgICAgICAgX3RoaXMxMS51cGRhdGVTb3VyY2VDYWNoZXNfKG1pZGRsZXdhcmVTb3VyY2UpO1xuXG4gICAgICAgIHZhciBlcnIgPSBfdGhpczExLnNyY18obWlkZGxld2FyZVNvdXJjZSk7XG5cbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGlmIChzb3VyY2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczExLnNyYyhzb3VyY2VzLnNsaWNlKDEpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBfdGhpczExLmNoYW5naW5nU3JjXyA9IGZhbHNlOyAvLyBXZSBuZWVkIHRvIHdyYXAgdGhpcyBpbiBhIHRpbWVvdXQgdG8gZ2l2ZSBmb2xrcyBhIGNoYW5jZSB0byBhZGQgZXJyb3IgZXZlbnQgaGFuZGxlcnNcblxuICAgICAgICAgIF90aGlzMTEuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yKHtcbiAgICAgICAgICAgICAgY29kZTogNCxcbiAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5sb2NhbGl6ZSh0aGlzLm9wdGlvbnNfLm5vdFN1cHBvcnRlZE1lc3NhZ2UpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCAwKTsgLy8gd2UgY291bGQgbm90IGZpbmQgYW4gYXBwcm9wcmlhdGUgdGVjaCwgYnV0IGxldCdzIHN0aWxsIG5vdGlmeSB0aGUgZGVsZWdhdGUgdGhhdCB0aGlzIGlzIGl0XG4gICAgICAgICAgLy8gdGhpcyBuZWVkcyBhIGJldHRlciBjb21tZW50IGFib3V0IHdoeSB0aGlzIGlzIG5lZWRlZFxuXG5cbiAgICAgICAgICBfdGhpczExLnRyaWdnZXJSZWFkeSgpO1xuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0VGVjaChtd3MsIF90aGlzMTEudGVjaF8pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc291cmNlIG9iamVjdCBvbiB0aGUgdGVjaCwgcmV0dXJucyBhIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgd2hldGhlclxuICAgICAqIHRoZXJlIGlzIGEgdGVjaCB0aGF0IGNhbiBwbGF5IHRoZSBzb3VyY2Ugb3Igbm90XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RlY2h+U291cmNlT2JqZWN0fSBzb3VyY2VcbiAgICAgKiAgICAgICAgVGhlIHNvdXJjZSBvYmplY3QgdG8gc2V0IG9uIHRoZSBUZWNoXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqICAgICAgICAgLSBUcnVlIGlmIHRoZXJlIGlzIG5vIFRlY2ggdG8gcGxheWJhY2sgdGhpcyBzb3VyY2VcbiAgICAgKiAgICAgICAgIC0gRmFsc2Ugb3RoZXJ3aXNlXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5zcmNfID0gZnVuY3Rpb24gc3JjXyhzb3VyY2UpIHtcbiAgICAgIHZhciBfdGhpczEyID0gdGhpcztcblxuICAgICAgdmFyIHNvdXJjZVRlY2ggPSB0aGlzLnNlbGVjdFNvdXJjZShbc291cmNlXSk7XG5cbiAgICAgIGlmICghc291cmNlVGVjaCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aXRsZUNhc2VFcXVhbHMoc291cmNlVGVjaC50ZWNoLCB0aGlzLnRlY2hOYW1lXykpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2luZ1NyY18gPSB0cnVlOyAvLyBsb2FkIHRoaXMgdGVjaG5vbG9neSB3aXRoIHRoZSBjaG9zZW4gc291cmNlXG5cbiAgICAgICAgdGhpcy5sb2FkVGVjaF8oc291cmNlVGVjaC50ZWNoLCBzb3VyY2VUZWNoLnNvdXJjZSk7XG4gICAgICAgIHRoaXMudGVjaF8ucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMTIuY2hhbmdpbmdTcmNfID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IC8vIHdhaXQgdW50aWwgdGhlIHRlY2ggaXMgcmVhZHkgdG8gc2V0IHRoZSBzb3VyY2VcbiAgICAgIC8vIGFuZCBzZXQgaXQgc3luY2hyb25vdXNseSBpZiBwb3NzaWJsZSAoIzIzMjYpXG5cblxuICAgICAgdGhpcy5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIFRoZSBzZXRTb3VyY2UgdGVjaCBtZXRob2Qgd2FzIGFkZGVkIHdpdGggc291cmNlIGhhbmRsZXJzXG4gICAgICAgIC8vIHNvIG9sZGVyIHRlY2hzIHdvbid0IHN1cHBvcnQgaXRcbiAgICAgICAgLy8gV2UgbmVlZCB0byBjaGVjayB0aGUgZGlyZWN0IHByb3RvdHlwZSBmb3IgdGhlIGNhc2Ugd2hlcmUgc3ViY2xhc3Nlc1xuICAgICAgICAvLyBvZiB0aGUgdGVjaCBkbyBub3Qgc3VwcG9ydCBzb3VyY2UgaGFuZGxlcnNcbiAgICAgICAgaWYgKHRoaXMudGVjaF8uY29uc3RydWN0b3IucHJvdG90eXBlLmhhc093blByb3BlcnR5KCdzZXRTb3VyY2UnKSkge1xuICAgICAgICAgIHRoaXMudGVjaENhbGxfKCdzZXRTb3VyY2UnLCBzb3VyY2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudGVjaENhbGxfKCdzcmMnLCBzb3VyY2Uuc3JjKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2hhbmdpbmdTcmNfID0gZmFsc2U7XG4gICAgICB9LCB0cnVlKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmVnaW4gbG9hZGluZyB0aGUgc3JjIGRhdGEuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmxvYWQgPSBmdW5jdGlvbiBsb2FkKCkge1xuICAgICAgdGhpcy50ZWNoQ2FsbF8oJ2xvYWQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIHBsYXllci4gTG9hZHMgdGhlIGZpcnN0IHRlY2ggaW4gdGhlIHRlY2hPcmRlcixcbiAgICAgKiByZW1vdmVzIGFsbCB0aGUgdGV4dCB0cmFja3MgaW4gdGhlIGV4aXN0aW5nIGB0ZWNoYCxcbiAgICAgKiBhbmQgY2FsbHMgYHJlc2V0YCBvbiB0aGUgYHRlY2hgLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgdmFyIF90aGlzMTMgPSB0aGlzO1xuXG4gICAgICB2YXIgUHJvbWlzZUNsYXNzID0gdGhpcy5vcHRpb25zXy5Qcm9taXNlIHx8IHdpbmRvdyQxLlByb21pc2U7XG5cbiAgICAgIGlmICh0aGlzLnBhdXNlZCgpIHx8ICFQcm9taXNlQ2xhc3MpIHtcbiAgICAgICAgdGhpcy5kb1Jlc2V0XygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHBsYXlQcm9taXNlID0gdGhpcy5wbGF5KCk7XG4gICAgICAgIHNpbGVuY2VQcm9taXNlKHBsYXlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczEzLmRvUmVzZXRfKCk7XG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLmRvUmVzZXRfID0gZnVuY3Rpb24gZG9SZXNldF8oKSB7XG4gICAgICBpZiAodGhpcy50ZWNoXykge1xuICAgICAgICB0aGlzLnRlY2hfLmNsZWFyVHJhY2tzKCd0ZXh0Jyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVzZXRDYWNoZV8oKTtcbiAgICAgIHRoaXMucG9zdGVyKCcnKTtcbiAgICAgIHRoaXMubG9hZFRlY2hfKHRoaXMub3B0aW9uc18udGVjaE9yZGVyWzBdLCBudWxsKTtcbiAgICAgIHRoaXMudGVjaENhbGxfKCdyZXNldCcpO1xuICAgICAgdGhpcy5yZXNldENvbnRyb2xCYXJVSV8oKTtcblxuICAgICAgaWYgKGlzRXZlbnRlZCh0aGlzKSkge1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ3BsYXllcnJlc2V0Jyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IENvbnRyb2wgQmFyJ3MgVUkgYnkgY2FsbGluZyBzdWItbWV0aG9kcyB0aGF0IHJlc2V0XG4gICAgICogYWxsIG9mIENvbnRyb2wgQmFyJ3MgY29tcG9uZW50c1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5yZXNldENvbnRyb2xCYXJVSV8gPSBmdW5jdGlvbiByZXNldENvbnRyb2xCYXJVSV8oKSB7XG4gICAgICB0aGlzLnJlc2V0UHJvZ3Jlc3NCYXJfKCk7XG4gICAgICB0aGlzLnJlc2V0UGxheWJhY2tSYXRlXygpO1xuICAgICAgdGhpcy5yZXNldFZvbHVtZUJhcl8oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgdGVjaCdzIHByb2dyZXNzIHNvIHByb2dyZXNzIGJhciBpcyByZXNldCBpbiB0aGUgVUlcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ucmVzZXRQcm9ncmVzc0Jhcl8gPSBmdW5jdGlvbiByZXNldFByb2dyZXNzQmFyXygpIHtcbiAgICAgIHRoaXMuY3VycmVudFRpbWUoMCk7XG4gICAgICB2YXIgX3RoaXMkY29udHJvbEJhciA9IHRoaXMuY29udHJvbEJhcixcbiAgICAgICAgICBkdXJhdGlvbkRpc3BsYXkgPSBfdGhpcyRjb250cm9sQmFyLmR1cmF0aW9uRGlzcGxheSxcbiAgICAgICAgICByZW1haW5pbmdUaW1lRGlzcGxheSA9IF90aGlzJGNvbnRyb2xCYXIucmVtYWluaW5nVGltZURpc3BsYXk7XG5cbiAgICAgIGlmIChkdXJhdGlvbkRpc3BsYXkpIHtcbiAgICAgICAgZHVyYXRpb25EaXNwbGF5LnVwZGF0ZUNvbnRlbnQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlbWFpbmluZ1RpbWVEaXNwbGF5KSB7XG4gICAgICAgIHJlbWFpbmluZ1RpbWVEaXNwbGF5LnVwZGF0ZUNvbnRlbnQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgUGxheWJhY2sgcmF0aW9cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ucmVzZXRQbGF5YmFja1JhdGVfID0gZnVuY3Rpb24gcmVzZXRQbGF5YmFja1JhdGVfKCkge1xuICAgICAgdGhpcy5wbGF5YmFja1JhdGUodGhpcy5kZWZhdWx0UGxheWJhY2tSYXRlKCkpO1xuICAgICAgdGhpcy5oYW5kbGVUZWNoUmF0ZUNoYW5nZV8oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgVm9sdW1lIGJhclxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5yZXNldFZvbHVtZUJhcl8gPSBmdW5jdGlvbiByZXNldFZvbHVtZUJhcl8oKSB7XG4gICAgICB0aGlzLnZvbHVtZSgxLjApO1xuICAgICAgdGhpcy50cmlnZ2VyKCd2b2x1bWVjaGFuZ2UnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgb2YgdGhlIGN1cnJlbnQgc291cmNlIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtUZWNoflNvdXJjZU9iamVjdFtdfVxuICAgICAqICAgICAgICAgVGhlIGN1cnJlbnQgc291cmNlIG9iamVjdHNcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3VycmVudFNvdXJjZXMgPSBmdW5jdGlvbiBjdXJyZW50U291cmNlcygpIHtcbiAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmN1cnJlbnRTb3VyY2UoKTtcbiAgICAgIHZhciBzb3VyY2VzID0gW107IC8vIGFzc3VtZSBge31gIG9yIGB7IHNyYyB9YFxuXG4gICAgICBpZiAoT2JqZWN0LmtleXMoc291cmNlKS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgc291cmNlcy5wdXNoKHNvdXJjZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmNhY2hlXy5zb3VyY2VzIHx8IHNvdXJjZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgc291cmNlIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1RlY2h+U291cmNlT2JqZWN0fVxuICAgICAqICAgICAgICAgVGhlIGN1cnJlbnQgc291cmNlIG9iamVjdFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jdXJyZW50U291cmNlID0gZnVuY3Rpb24gY3VycmVudFNvdXJjZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLmNhY2hlXy5zb3VyY2UgfHwge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGZ1bGx5IHF1YWxpZmllZCBVUkwgb2YgdGhlIGN1cnJlbnQgc291cmNlIHZhbHVlIGUuZy4gaHR0cDovL215c2l0ZS5jb20vdmlkZW8ubXA0XG4gICAgICogQ2FuIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgY3VycmVudFR5cGVgIHRvIGFzc2lzdCBpbiByZWJ1aWxkaW5nIHRoZSBjdXJyZW50IHNvdXJjZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogICAgICAgICBUaGUgY3VycmVudCBzb3VyY2VcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3VycmVudFNyYyA9IGZ1bmN0aW9uIGN1cnJlbnRTcmMoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jdXJyZW50U291cmNlKCkgJiYgdGhpcy5jdXJyZW50U291cmNlKCkuc3JjIHx8ICcnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgc291cmNlIHR5cGUgZS5nLiB2aWRlby9tcDRcbiAgICAgKiBUaGlzIGNhbiBhbGxvdyB5b3UgcmVidWlsZCB0aGUgY3VycmVudCBzb3VyY2Ugb2JqZWN0IHNvIHRoYXQgeW91IGNvdWxkIGxvYWQgdGhlIHNhbWVcbiAgICAgKiBzb3VyY2UgYW5kIHRlY2ggbGF0ZXJcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKiAgICAgICAgIFRoZSBzb3VyY2UgTUlNRSB0eXBlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmN1cnJlbnRUeXBlID0gZnVuY3Rpb24gY3VycmVudFR5cGUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jdXJyZW50U291cmNlKCkgJiYgdGhpcy5jdXJyZW50U291cmNlKCkudHlwZSB8fCAnJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IG9yIHNldCB0aGUgcHJlbG9hZCBhdHRyaWJ1dGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3ZhbHVlXVxuICAgICAqICAgICAgICAtIHRydWUgbWVhbnMgdGhhdCB3ZSBzaG91bGQgcHJlbG9hZFxuICAgICAqICAgICAgICAtIGZhbHNlIG1lYW5zIHRoYXQgd2Ugc2hvdWxkIG5vdCBwcmVsb2FkXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogICAgICAgICBUaGUgcHJlbG9hZCBhdHRyaWJ1dGUgdmFsdWUgd2hlbiBnZXR0aW5nXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnByZWxvYWQgPSBmdW5jdGlvbiBwcmVsb2FkKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnRlY2hDYWxsXygnc2V0UHJlbG9hZCcsIHZhbHVlKTtcbiAgICAgICAgdGhpcy5vcHRpb25zXy5wcmVsb2FkID0gdmFsdWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMudGVjaEdldF8oJ3ByZWxvYWQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IG9yIHNldCB0aGUgYXV0b3BsYXkgb3B0aW9uLiBXaGVuIHRoaXMgaXMgYSBib29sZWFuIGl0IHdpbGxcbiAgICAgKiBtb2RpZnkgdGhlIGF0dHJpYnV0ZSBvbiB0aGUgdGVjaC4gV2hlbiB0aGlzIGlzIGEgc3RyaW5nIHRoZSBhdHRyaWJ1dGUgb25cbiAgICAgKiB0aGUgdGVjaCB3aWxsIGJlIHJlbW92ZWQgYW5kIGBQbGF5ZXJgIHdpbGwgaGFuZGxlIGF1dG9wbGF5IG9uIGxvYWRzdGFydHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW58c3RyaW5nfSBbdmFsdWVdXG4gICAgICogICAgICAgIC0gdHJ1ZTogYXV0b3BsYXkgdXNpbmcgdGhlIGJyb3dzZXIgYmVoYXZpb3JcbiAgICAgKiAgICAgICAgLSBmYWxzZTogZG8gbm90IGF1dG9wbGF5XG4gICAgICogICAgICAgIC0gJ3BsYXknOiBjYWxsIHBsYXkoKSBvbiBldmVyeSBsb2Fkc3RhcnRcbiAgICAgKiAgICAgICAgLSAnbXV0ZWQnOiBjYWxsIG11dGVkKCkgdGhlbiBwbGF5KCkgb24gZXZlcnkgbG9hZHN0YXJ0XG4gICAgICogICAgICAgIC0gJ2FueSc6IGNhbGwgcGxheSgpIG9uIGV2ZXJ5IGxvYWRzdGFydC4gaWYgdGhhdCBmYWlscyBjYWxsIG11dGVkKCkgdGhlbiBwbGF5KCkuXG4gICAgICogICAgICAgIC0gKjogdmFsdWVzIG90aGVyIHRoYW4gdGhvc2UgbGlzdGVkIGhlcmUgd2lsbCBiZSBzZXQgYGF1dG9wbGF5YCB0byB0cnVlXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufHN0cmluZ31cbiAgICAgKiAgICAgICAgIFRoZSBjdXJyZW50IHZhbHVlIG9mIGF1dG9wbGF5IHdoZW4gZ2V0dGluZ1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5hdXRvcGxheSA9IGZ1bmN0aW9uIGF1dG9wbGF5KHZhbHVlKSB7XG4gICAgICAvLyBnZXR0ZXIgdXNhZ2VcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNfLmF1dG9wbGF5IHx8IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgdGVjaEF1dG9wbGF5OyAvLyBpZiB0aGUgdmFsdWUgaXMgYSB2YWxpZCBzdHJpbmcgc2V0IGl0IHRvIHRoYXRcblxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgLyhhbnl8cGxheXxtdXRlZCkvLnRlc3QodmFsdWUpKSB7XG4gICAgICAgIHRoaXMub3B0aW9uc18uYXV0b3BsYXkgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5tYW51YWxBdXRvcGxheV8odmFsdWUpO1xuICAgICAgICB0ZWNoQXV0b3BsYXkgPSBmYWxzZTsgLy8gYW55IGZhbHN5IHZhbHVlIHNldHMgYXV0b3BsYXkgdG8gZmFsc2UgaW4gdGhlIGJyb3dzZXIsXG4gICAgICAgIC8vIGxldHMgZG8gdGhlIHNhbWVcbiAgICAgIH0gZWxzZSBpZiAoIXZhbHVlKSB7XG4gICAgICAgIHRoaXMub3B0aW9uc18uYXV0b3BsYXkgPSBmYWxzZTsgLy8gYW55IG90aGVyIHZhbHVlIChpZSB0cnV0aHkpIHNldHMgYXV0b3BsYXkgdG8gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vcHRpb25zXy5hdXRvcGxheSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHRlY2hBdXRvcGxheSA9IHR5cGVvZiB0ZWNoQXV0b3BsYXkgPT09ICd1bmRlZmluZWQnID8gdGhpcy5vcHRpb25zXy5hdXRvcGxheSA6IHRlY2hBdXRvcGxheTsgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhIHRlY2ggdGhlbiB3ZSBkbyBub3QgcXVldWUgdXBcbiAgICAgIC8vIGEgc2V0QXV0b3BsYXkgY2FsbCBvbiB0ZWNoIHJlYWR5LiBXZSBkbyB0aGlzIGJlY2F1c2UgdGhlXG4gICAgICAvLyBhdXRvcGxheSBvcHRpb24gd2lsbCBiZSBwYXNzZWQgaW4gdGhlIGNvbnN0cnVjdG9yIGFuZCB3ZVxuICAgICAgLy8gZG8gbm90IG5lZWQgdG8gc2V0IGl0IHR3aWNlXG5cbiAgICAgIGlmICh0aGlzLnRlY2hfKSB7XG4gICAgICAgIHRoaXMudGVjaENhbGxfKCdzZXRBdXRvcGxheScsIHRlY2hBdXRvcGxheSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBvciB1bnNldCB0aGUgcGxheXNpbmxpbmUgYXR0cmlidXRlLlxuICAgICAqIFBsYXlzaW5saW5lIHRlbGxzIHRoZSBicm93c2VyIHRoYXQgbm9uLWZ1bGxzY3JlZW4gcGxheWJhY2sgaXMgcHJlZmVycmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbdmFsdWVdXG4gICAgICogICAgICAgIC0gdHJ1ZSBtZWFucyB0aGF0IHdlIHNob3VsZCB0cnkgdG8gcGxheSBpbmxpbmUgYnkgZGVmYXVsdFxuICAgICAqICAgICAgICAtIGZhbHNlIG1lYW5zIHRoYXQgd2Ugc2hvdWxkIHVzZSB0aGUgYnJvd3NlcidzIGRlZmF1bHQgcGxheWJhY2sgbW9kZSxcbiAgICAgKiAgICAgICAgICB3aGljaCBpbiBtb3N0IGNhc2VzIGlzIGlubGluZS4gaU9TIFNhZmFyaSBpcyBhIG5vdGFibGUgZXhjZXB0aW9uXG4gICAgICogICAgICAgICAgYW5kIHBsYXlzIGZ1bGxzY3JlZW4gYnkgZGVmYXVsdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3xQbGF5ZXJ9XG4gICAgICogICAgICAgICAtIHRoZSBjdXJyZW50IHZhbHVlIG9mIHBsYXlzaW5saW5lXG4gICAgICogICAgICAgICAtIHRoZSBwbGF5ZXIgd2hlbiBzZXR0aW5nXG4gICAgICpcbiAgICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnLyNhdHRyLXZpZGVvLXBsYXlzaW5saW5lfVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5wbGF5c2lubGluZSA9IGZ1bmN0aW9uIHBsYXlzaW5saW5lKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnRlY2hDYWxsXygnc2V0UGxheXNpbmxpbmUnLCB2YWx1ZSk7XG4gICAgICAgIHRoaXMub3B0aW9uc18ucGxheXNpbmxpbmUgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnRlY2hHZXRfKCdwbGF5c2lubGluZScpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgb3Igc2V0IHRoZSBsb29wIGF0dHJpYnV0ZSBvbiB0aGUgdmlkZW8gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3ZhbHVlXVxuICAgICAqICAgICAgICAtIHRydWUgbWVhbnMgdGhhdCB3ZSBzaG91bGQgbG9vcCB0aGUgdmlkZW9cbiAgICAgKiAgICAgICAgLSBmYWxzZSBtZWFucyB0aGF0IHdlIHNob3VsZCBub3QgbG9vcCB0aGUgdmlkZW9cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICogICAgICAgICBUaGUgY3VycmVudCB2YWx1ZSBvZiBsb29wIHdoZW4gZ2V0dGluZ1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5sb29wID0gZnVuY3Rpb24gbG9vcCh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy50ZWNoQ2FsbF8oJ3NldExvb3AnLCB2YWx1ZSk7XG4gICAgICAgIHRoaXMub3B0aW9uc18ubG9vcCA9IHZhbHVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnRlY2hHZXRfKCdsb29wJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBvciBzZXQgdGhlIHBvc3RlciBpbWFnZSBzb3VyY2UgdXJsXG4gICAgICpcbiAgICAgKiBAZmlyZXMgUGxheWVyI3Bvc3RlcmNoYW5nZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzcmNdXG4gICAgICogICAgICAgIFBvc3RlciBpbWFnZSBzb3VyY2UgVVJMXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogICAgICAgICBUaGUgY3VycmVudCB2YWx1ZSBvZiBwb3N0ZXIgd2hlbiBnZXR0aW5nXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnBvc3RlciA9IGZ1bmN0aW9uIHBvc3RlcihzcmMpIHtcbiAgICAgIGlmIChzcmMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3N0ZXJfO1xuICAgICAgfSAvLyBUaGUgY29ycmVjdCB3YXkgdG8gcmVtb3ZlIGEgcG9zdGVyIGlzIHRvIHNldCBhcyBhbiBlbXB0eSBzdHJpbmdcbiAgICAgIC8vIG90aGVyIGZhbHNleSB2YWx1ZXMgd2lsbCB0aHJvdyBlcnJvcnNcblxuXG4gICAgICBpZiAoIXNyYykge1xuICAgICAgICBzcmMgPSAnJztcbiAgICAgIH1cblxuICAgICAgaWYgKHNyYyA9PT0gdGhpcy5wb3N0ZXJfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gdXBkYXRlIHRoZSBpbnRlcm5hbCBwb3N0ZXIgdmFyaWFibGVcblxuXG4gICAgICB0aGlzLnBvc3Rlcl8gPSBzcmM7IC8vIHVwZGF0ZSB0aGUgdGVjaCdzIHBvc3RlclxuXG4gICAgICB0aGlzLnRlY2hDYWxsXygnc2V0UG9zdGVyJywgc3JjKTtcbiAgICAgIHRoaXMuaXNQb3N0ZXJGcm9tVGVjaF8gPSBmYWxzZTsgLy8gYWxlcnQgY29tcG9uZW50cyB0aGF0IHRoZSBwb3N0ZXIgaGFzIGJlZW4gc2V0XG5cbiAgICAgIC8qKlxuICAgICAgICogVGhpcyBldmVudCBmaXJlcyB3aGVuIHRoZSBwb3N0ZXIgaW1hZ2UgaXMgY2hhbmdlZCBvbiB0aGUgcGxheWVyLlxuICAgICAgICpcbiAgICAgICAqIEBldmVudCBQbGF5ZXIjcG9zdGVyY2hhbmdlXG4gICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgKi9cblxuICAgICAgdGhpcy50cmlnZ2VyKCdwb3N0ZXJjaGFuZ2UnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU29tZSB0ZWNocyAoZS5nLiBZb3VUdWJlKSBjYW4gcHJvdmlkZSBhIHBvc3RlciBzb3VyY2UgaW4gYW5cbiAgICAgKiBhc3luY2hyb25vdXMgd2F5LiBXZSB3YW50IHRoZSBwb3N0ZXIgY29tcG9uZW50IHRvIHVzZSB0aGlzXG4gICAgICogcG9zdGVyIHNvdXJjZSBzbyB0aGF0IGl0IGNvdmVycyB1cCB0aGUgdGVjaCdzIGNvbnRyb2xzLlxuICAgICAqIChZb3VUdWJlJ3MgcGxheSBidXR0b24pLiBIb3dldmVyIHdlIG9ubHkgd2FudCB0byB1c2UgdGhpc1xuICAgICAqIHNvdXJjZSBpZiB0aGUgcGxheWVyIHVzZXIgaGFzbid0IHNldCBhIHBvc3RlciB0aHJvdWdoXG4gICAgICogdGhlIG5vcm1hbCBBUElzLlxuICAgICAqXG4gICAgICogQGZpcmVzIFBsYXllciNwb3N0ZXJjaGFuZ2VcbiAgICAgKiBAbGlzdGVucyBUZWNoI3Bvc3RlcmNoYW5nZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZVRlY2hQb3N0ZXJDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlVGVjaFBvc3RlckNoYW5nZV8oKSB7XG4gICAgICBpZiAoKCF0aGlzLnBvc3Rlcl8gfHwgdGhpcy5vcHRpb25zXy50ZWNoQ2FuT3ZlcnJpZGVQb3N0ZXIpICYmIHRoaXMudGVjaF8gJiYgdGhpcy50ZWNoXy5wb3N0ZXIpIHtcbiAgICAgICAgdmFyIG5ld1Bvc3RlciA9IHRoaXMudGVjaF8ucG9zdGVyKCkgfHwgJyc7XG5cbiAgICAgICAgaWYgKG5ld1Bvc3RlciAhPT0gdGhpcy5wb3N0ZXJfKSB7XG4gICAgICAgICAgdGhpcy5wb3N0ZXJfID0gbmV3UG9zdGVyO1xuICAgICAgICAgIHRoaXMuaXNQb3N0ZXJGcm9tVGVjaF8gPSB0cnVlOyAvLyBMZXQgY29tcG9uZW50cyBrbm93IHRoZSBwb3N0ZXIgaGFzIGNoYW5nZWRcblxuICAgICAgICAgIHRoaXMudHJpZ2dlcigncG9zdGVyY2hhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IG9yIHNldCB3aGV0aGVyIG9yIG5vdCB0aGUgY29udHJvbHMgYXJlIHNob3dpbmcuXG4gICAgICpcbiAgICAgKiBAZmlyZXMgUGxheWVyI2NvbnRyb2xzZW5hYmxlZFxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbYm9vbF1cbiAgICAgKiAgICAgICAgLSB0cnVlIHRvIHR1cm4gY29udHJvbHMgb25cbiAgICAgKiAgICAgICAgLSBmYWxzZSB0byB0dXJuIGNvbnRyb2xzIG9mZlxuICAgICAqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKiAgICAgICAgIFRoZSBjdXJyZW50IHZhbHVlIG9mIGNvbnRyb2xzIHdoZW4gZ2V0dGluZ1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jb250cm9scyA9IGZ1bmN0aW9uIGNvbnRyb2xzKGJvb2wpIHtcbiAgICAgIGlmIChib29sID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5jb250cm9sc187XG4gICAgICB9XG5cbiAgICAgIGJvb2wgPSAhIWJvb2w7IC8vIERvbid0IHRyaWdnZXIgYSBjaGFuZ2UgZXZlbnQgdW5sZXNzIGl0IGFjdHVhbGx5IGNoYW5nZWRcblxuICAgICAgaWYgKHRoaXMuY29udHJvbHNfID09PSBib29sKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jb250cm9sc18gPSBib29sO1xuXG4gICAgICBpZiAodGhpcy51c2luZ05hdGl2ZUNvbnRyb2xzKCkpIHtcbiAgICAgICAgdGhpcy50ZWNoQ2FsbF8oJ3NldENvbnRyb2xzJywgYm9vbCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmNvbnRyb2xzXykge1xuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtY29udHJvbHMtZGlzYWJsZWQnKTtcbiAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWNvbnRyb2xzLWVuYWJsZWQnKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBldmVudCBQbGF5ZXIjY29udHJvbHNlbmFibGVkXG4gICAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAgICovXG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdjb250cm9sc2VuYWJsZWQnKTtcblxuICAgICAgICBpZiAoIXRoaXMudXNpbmdOYXRpdmVDb250cm9scygpKSB7XG4gICAgICAgICAgdGhpcy5hZGRUZWNoQ29udHJvbHNMaXN0ZW5lcnNfKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1jb250cm9scy1lbmFibGVkJyk7XG4gICAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1jb250cm9scy1kaXNhYmxlZCcpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGV2ZW50IFBsYXllciNjb250cm9sc2Rpc2FibGVkXG4gICAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAgICovXG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdjb250cm9sc2Rpc2FibGVkJyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnVzaW5nTmF0aXZlQ29udHJvbHMoKSkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlVGVjaENvbnRyb2xzTGlzdGVuZXJzXygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRvZ2dsZSBuYXRpdmUgY29udHJvbHMgb24vb2ZmLiBOYXRpdmUgY29udHJvbHMgYXJlIHRoZSBjb250cm9scyBidWlsdCBpbnRvXG4gICAgICogZGV2aWNlcyAoZS5nLiBkZWZhdWx0IGlQaG9uZSBjb250cm9scyksIEZsYXNoLCBvciBvdGhlciB0ZWNoc1xuICAgICAqIChlLmcuIFZpbWVvIENvbnRyb2xzKVxuICAgICAqICoqVGhpcyBzaG91bGQgb25seSBiZSBzZXQgYnkgdGhlIGN1cnJlbnQgdGVjaCwgYmVjYXVzZSBvbmx5IHRoZSB0ZWNoIGtub3dzXG4gICAgICogaWYgaXQgY2FuIHN1cHBvcnQgbmF0aXZlIGNvbnRyb2xzKipcbiAgICAgKlxuICAgICAqIEBmaXJlcyBQbGF5ZXIjdXNpbmduYXRpdmVjb250cm9sc1xuICAgICAqIEBmaXJlcyBQbGF5ZXIjdXNpbmdjdXN0b21jb250cm9sc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbYm9vbF1cbiAgICAgKiAgICAgICAgLSB0cnVlIHRvIHR1cm4gbmF0aXZlIGNvbnRyb2xzIG9uXG4gICAgICogICAgICAgIC0gZmFsc2UgdG8gdHVybiBuYXRpdmUgY29udHJvbHMgb2ZmXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqICAgICAgICAgVGhlIGN1cnJlbnQgdmFsdWUgb2YgbmF0aXZlIGNvbnRyb2xzIHdoZW4gZ2V0dGluZ1xuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by51c2luZ05hdGl2ZUNvbnRyb2xzID0gZnVuY3Rpb24gdXNpbmdOYXRpdmVDb250cm9scyhib29sKSB7XG4gICAgICBpZiAoYm9vbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMudXNpbmdOYXRpdmVDb250cm9sc187XG4gICAgICB9XG5cbiAgICAgIGJvb2wgPSAhIWJvb2w7IC8vIERvbid0IHRyaWdnZXIgYSBjaGFuZ2UgZXZlbnQgdW5sZXNzIGl0IGFjdHVhbGx5IGNoYW5nZWRcblxuICAgICAgaWYgKHRoaXMudXNpbmdOYXRpdmVDb250cm9sc18gPT09IGJvb2wpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnVzaW5nTmF0aXZlQ29udHJvbHNfID0gYm9vbDtcblxuICAgICAgaWYgKHRoaXMudXNpbmdOYXRpdmVDb250cm9sc18pIHtcbiAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLXVzaW5nLW5hdGl2ZS1jb250cm9scycpO1xuICAgICAgICAvKipcbiAgICAgICAgICogcGxheWVyIGlzIHVzaW5nIHRoZSBuYXRpdmUgZGV2aWNlIGNvbnRyb2xzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBQbGF5ZXIjdXNpbmduYXRpdmVjb250cm9sc1xuICAgICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgICAqL1xuXG4gICAgICAgIHRoaXMudHJpZ2dlcigndXNpbmduYXRpdmVjb250cm9scycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLXVzaW5nLW5hdGl2ZS1jb250cm9scycpO1xuICAgICAgICAvKipcbiAgICAgICAgICogcGxheWVyIGlzIHVzaW5nIHRoZSBjdXN0b20gSFRNTCBjb250cm9sc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgUGxheWVyI3VzaW5nY3VzdG9tY29udHJvbHNcbiAgICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICAgKi9cblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ3VzaW5nY3VzdG9tY29udHJvbHMnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IG9yIGdldCB0aGUgY3VycmVudCBNZWRpYUVycm9yXG4gICAgICpcbiAgICAgKiBAZmlyZXMgUGxheWVyI2Vycm9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtNZWRpYUVycm9yfHN0cmluZ3xudW1iZXJ9IFtlcnJdXG4gICAgICogICAgICAgICBBIE1lZGlhRXJyb3Igb3IgYSBzdHJpbmcvbnVtYmVyIHRvIGJlIHR1cm5lZFxuICAgICAqICAgICAgICAgaW50byBhIE1lZGlhRXJyb3JcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge01lZGlhRXJyb3J8bnVsbH1cbiAgICAgKiAgICAgICAgIFRoZSBjdXJyZW50IE1lZGlhRXJyb3Igd2hlbiBnZXR0aW5nIChvciBudWxsKVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5lcnJvciA9IGZ1bmN0aW9uIGVycm9yKGVycikge1xuICAgICAgaWYgKGVyciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yXyB8fCBudWxsO1xuICAgICAgfSAvLyByZXN0b3JpbmcgdG8gZGVmYXVsdFxuXG5cbiAgICAgIGlmIChlcnIgPT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5lcnJvcl8gPSBlcnI7XG4gICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1lcnJvcicpO1xuXG4gICAgICAgIGlmICh0aGlzLmVycm9yRGlzcGxheSkge1xuICAgICAgICAgIHRoaXMuZXJyb3JEaXNwbGF5LmNsb3NlKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZXJyb3JfID0gbmV3IE1lZGlhRXJyb3IoZXJyKTsgLy8gYWRkIHRoZSB2anMtZXJyb3IgY2xhc3NuYW1lIHRvIHRoZSBwbGF5ZXJcblxuICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWVycm9yJyk7IC8vIGxvZyB0aGUgbmFtZSBvZiB0aGUgZXJyb3IgdHlwZSBhbmQgYW55IG1lc3NhZ2VcbiAgICAgIC8vIElFMTEgbG9ncyBcIltvYmplY3Qgb2JqZWN0XVwiIGFuZCByZXF1aXJlZCB5b3UgdG8gZXhwYW5kIG1lc3NhZ2UgdG8gc2VlIGVycm9yIG9iamVjdFxuXG4gICAgICBsb2cuZXJyb3IoXCIoQ09ERTpcIiArIHRoaXMuZXJyb3JfLmNvZGUgKyBcIiBcIiArIE1lZGlhRXJyb3IuZXJyb3JUeXBlc1t0aGlzLmVycm9yXy5jb2RlXSArIFwiKVwiLCB0aGlzLmVycm9yXy5tZXNzYWdlLCB0aGlzLmVycm9yXyk7XG4gICAgICAvKipcbiAgICAgICAqIEBldmVudCBQbGF5ZXIjZXJyb3JcbiAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAqL1xuXG4gICAgICB0aGlzLnRyaWdnZXIoJ2Vycm9yJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcG9ydCB1c2VyIGFjdGl2aXR5XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcbiAgICAgKiAgICAgICAgRXZlbnQgb2JqZWN0XG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnJlcG9ydFVzZXJBY3Rpdml0eSA9IGZ1bmN0aW9uIHJlcG9ydFVzZXJBY3Rpdml0eShldmVudCkge1xuICAgICAgdGhpcy51c2VyQWN0aXZpdHlfID0gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0L3NldCBpZiB1c2VyIGlzIGFjdGl2ZVxuICAgICAqXG4gICAgICogQGZpcmVzIFBsYXllciN1c2VyYWN0aXZlXG4gICAgICogQGZpcmVzIFBsYXllciN1c2VyaW5hY3RpdmVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Jvb2xdXG4gICAgICogICAgICAgIC0gdHJ1ZSBpZiB0aGUgdXNlciBpcyBhY3RpdmVcbiAgICAgKiAgICAgICAgLSBmYWxzZSBpZiB0aGUgdXNlciBpcyBpbmFjdGl2ZVxuICAgICAqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKiAgICAgICAgIFRoZSBjdXJyZW50IHZhbHVlIG9mIHVzZXJBY3RpdmUgd2hlbiBnZXR0aW5nXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnVzZXJBY3RpdmUgPSBmdW5jdGlvbiB1c2VyQWN0aXZlKGJvb2wpIHtcbiAgICAgIGlmIChib29sID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlckFjdGl2ZV87XG4gICAgICB9XG5cbiAgICAgIGJvb2wgPSAhIWJvb2w7XG5cbiAgICAgIGlmIChib29sID09PSB0aGlzLnVzZXJBY3RpdmVfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy51c2VyQWN0aXZlXyA9IGJvb2w7XG5cbiAgICAgIGlmICh0aGlzLnVzZXJBY3RpdmVfKSB7XG4gICAgICAgIHRoaXMudXNlckFjdGl2aXR5XyA9IHRydWU7XG4gICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy11c2VyLWluYWN0aXZlJyk7XG4gICAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy11c2VyLWFjdGl2ZScpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGV2ZW50IFBsYXllciN1c2VyYWN0aXZlXG4gICAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAgICovXG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCd1c2VyYWN0aXZlJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gQ2hyb21lL1NhZmFyaS9JRSBoYXZlIGJ1Z3Mgd2hlcmUgd2hlbiB5b3UgY2hhbmdlIHRoZSBjdXJzb3IgaXQgY2FuXG4gICAgICAvLyB0cmlnZ2VyIGEgbW91c2Vtb3ZlIGV2ZW50LiBUaGlzIGNhdXNlcyBhbiBpc3N1ZSB3aGVuIHlvdSdyZSBoaWRpbmdcbiAgICAgIC8vIHRoZSBjdXJzb3Igd2hlbiB0aGUgdXNlciBpcyBpbmFjdGl2ZSwgYW5kIGEgbW91c2Vtb3ZlIHNpZ25hbHMgdXNlclxuICAgICAgLy8gYWN0aXZpdHkuIE1ha2luZyBpdCBpbXBvc3NpYmxlIHRvIGdvIGludG8gaW5hY3RpdmUgbW9kZS4gU3BlY2lmaWNhbGx5XG4gICAgICAvLyB0aGlzIGhhcHBlbnMgaW4gZnVsbHNjcmVlbiB3aGVuIHdlIHJlYWxseSBuZWVkIHRvIGhpZGUgdGhlIGN1cnNvci5cbiAgICAgIC8vXG4gICAgICAvLyBXaGVuIHRoaXMgZ2V0cyByZXNvbHZlZCBpbiBBTEwgYnJvd3NlcnMgaXQgY2FuIGJlIHJlbW92ZWRcbiAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0xMDMwNDFcblxuXG4gICAgICBpZiAodGhpcy50ZWNoXykge1xuICAgICAgICB0aGlzLnRlY2hfLm9uZSgnbW91c2Vtb3ZlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMudXNlckFjdGl2aXR5XyA9IGZhbHNlO1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLXVzZXItYWN0aXZlJyk7XG4gICAgICB0aGlzLmFkZENsYXNzKCd2anMtdXNlci1pbmFjdGl2ZScpO1xuICAgICAgLyoqXG4gICAgICAgKiBAZXZlbnQgUGxheWVyI3VzZXJpbmFjdGl2ZVxuICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICovXG5cbiAgICAgIHRoaXMudHJpZ2dlcigndXNlcmluYWN0aXZlJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExpc3RlbiBmb3IgdXNlciBhY3Rpdml0eSBiYXNlZCBvbiB0aW1lb3V0IHZhbHVlXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5saXN0ZW5Gb3JVc2VyQWN0aXZpdHlfID0gZnVuY3Rpb24gbGlzdGVuRm9yVXNlckFjdGl2aXR5XygpIHtcbiAgICAgIHZhciBtb3VzZUluUHJvZ3Jlc3M7XG4gICAgICB2YXIgbGFzdE1vdmVYO1xuICAgICAgdmFyIGxhc3RNb3ZlWTtcbiAgICAgIHZhciBoYW5kbGVBY3Rpdml0eSA9IGJpbmQodGhpcywgdGhpcy5yZXBvcnRVc2VyQWN0aXZpdHkpO1xuXG4gICAgICB2YXIgaGFuZGxlTW91c2VNb3ZlID0gZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlKGUpIHtcbiAgICAgICAgLy8gIzEwNjggLSBQcmV2ZW50IG1vdXNlbW92ZSBzcGFtbWluZ1xuICAgICAgICAvLyBDaHJvbWUgQnVnOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MzY2OTcwXG4gICAgICAgIGlmIChlLnNjcmVlblggIT09IGxhc3RNb3ZlWCB8fCBlLnNjcmVlblkgIT09IGxhc3RNb3ZlWSkge1xuICAgICAgICAgIGxhc3RNb3ZlWCA9IGUuc2NyZWVuWDtcbiAgICAgICAgICBsYXN0TW92ZVkgPSBlLnNjcmVlblk7XG4gICAgICAgICAgaGFuZGxlQWN0aXZpdHkoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIGhhbmRsZU1vdXNlRG93biA9IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bigpIHtcbiAgICAgICAgaGFuZGxlQWN0aXZpdHkoKTsgLy8gRm9yIGFzIGxvbmcgYXMgdGhlIHRoZXkgYXJlIHRvdWNoaW5nIHRoZSBkZXZpY2Ugb3IgaGF2ZSB0aGVpciBtb3VzZSBkb3duLFxuICAgICAgICAvLyB3ZSBjb25zaWRlciB0aGVtIGFjdGl2ZSBldmVuIGlmIHRoZXkncmUgbm90IG1vdmluZyB0aGVpciBmaW5nZXIgb3IgbW91c2UuXG4gICAgICAgIC8vIFNvIHdlIHdhbnQgdG8gY29udGludWUgdG8gdXBkYXRlIHRoYXQgdGhleSBhcmUgYWN0aXZlXG5cbiAgICAgICAgdGhpcy5jbGVhckludGVydmFsKG1vdXNlSW5Qcm9ncmVzcyk7IC8vIFNldHRpbmcgdXNlckFjdGl2aXR5PXRydWUgbm93IGFuZCBzZXR0aW5nIHRoZSBpbnRlcnZhbCB0byB0aGUgc2FtZSB0aW1lXG4gICAgICAgIC8vIGFzIHRoZSBhY3Rpdml0eUNoZWNrIGludGVydmFsICgyNTApIHNob3VsZCBlbnN1cmUgd2UgbmV2ZXIgbWlzcyB0aGVcbiAgICAgICAgLy8gbmV4dCBhY3Rpdml0eUNoZWNrXG5cbiAgICAgICAgbW91c2VJblByb2dyZXNzID0gdGhpcy5zZXRJbnRlcnZhbChoYW5kbGVBY3Rpdml0eSwgMjUwKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBoYW5kbGVNb3VzZVVwID0gZnVuY3Rpb24gaGFuZGxlTW91c2VVcChldmVudCkge1xuICAgICAgICBoYW5kbGVBY3Rpdml0eSgpOyAvLyBTdG9wIHRoZSBpbnRlcnZhbCB0aGF0IG1haW50YWlucyBhY3Rpdml0eSBpZiB0aGUgbW91c2UvdG91Y2ggaXMgZG93blxuXG4gICAgICAgIHRoaXMuY2xlYXJJbnRlcnZhbChtb3VzZUluUHJvZ3Jlc3MpO1xuICAgICAgfTsgLy8gQW55IG1vdXNlIG1vdmVtZW50IHdpbGwgYmUgY29uc2lkZXJlZCB1c2VyIGFjdGl2aXR5XG5cblxuICAgICAgdGhpcy5vbignbW91c2Vkb3duJywgaGFuZGxlTW91c2VEb3duKTtcbiAgICAgIHRoaXMub24oJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSk7XG4gICAgICB0aGlzLm9uKCdtb3VzZXVwJywgaGFuZGxlTW91c2VVcCk7XG4gICAgICB2YXIgY29udHJvbEJhciA9IHRoaXMuZ2V0Q2hpbGQoJ2NvbnRyb2xCYXInKTsgLy8gRml4ZXMgYnVnIG9uIEFuZHJvaWQgJiBpT1Mgd2hlcmUgd2hlbiB0YXBwaW5nIHByb2dyZXNzQmFyICh3aGVuIGNvbnRyb2wgYmFyIGlzIGRpc3BsYXllZClcbiAgICAgIC8vIGNvbnRyb2xCYXIgd291bGQgbm8gbG9uZ2VyIGJlIGhpZGRlbiBieSBkZWZhdWx0IHRpbWVvdXQuXG5cbiAgICAgIGlmIChjb250cm9sQmFyICYmICFJU19JT1MgJiYgIUlTX0FORFJPSUQpIHtcbiAgICAgICAgY29udHJvbEJhci5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHRoaXMucGxheWVyKCkuY2FjaGVfLmluYWN0aXZpdHlUaW1lb3V0ID0gdGhpcy5wbGF5ZXIoKS5vcHRpb25zXy5pbmFjdGl2aXR5VGltZW91dDtcbiAgICAgICAgICB0aGlzLnBsYXllcigpLm9wdGlvbnNfLmluYWN0aXZpdHlUaW1lb3V0ID0gMDtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRyb2xCYXIub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICB0aGlzLnBsYXllcigpLm9wdGlvbnNfLmluYWN0aXZpdHlUaW1lb3V0ID0gdGhpcy5wbGF5ZXIoKS5jYWNoZV8uaW5hY3Rpdml0eVRpbWVvdXQ7XG4gICAgICAgIH0pO1xuICAgICAgfSAvLyBMaXN0ZW4gZm9yIGtleWJvYXJkIG5hdmlnYXRpb25cbiAgICAgIC8vIFNob3VsZG4ndCBuZWVkIHRvIHVzZSBpblByb2dyZXNzIGludGVydmFsIGJlY2F1c2Ugb2Yga2V5IHJlcGVhdFxuXG5cbiAgICAgIHRoaXMub24oJ2tleWRvd24nLCBoYW5kbGVBY3Rpdml0eSk7XG4gICAgICB0aGlzLm9uKCdrZXl1cCcsIGhhbmRsZUFjdGl2aXR5KTsgLy8gUnVuIGFuIGludGVydmFsIGV2ZXJ5IDI1MCBtaWxsaXNlY29uZHMgaW5zdGVhZCBvZiBzdHVmZmluZyBldmVyeXRoaW5nIGludG9cbiAgICAgIC8vIHRoZSBtb3VzZW1vdmUvdG91Y2htb3ZlIGZ1bmN0aW9uIGl0c2VsZiwgdG8gcHJldmVudCBwZXJmb3JtYW5jZSBkZWdyYWRhdGlvbi5cbiAgICAgIC8vIGB0aGlzLnJlcG9ydFVzZXJBY3Rpdml0eWAgc2ltcGx5IHNldHMgdGhpcy51c2VyQWN0aXZpdHlfIHRvIHRydWUsIHdoaWNoXG4gICAgICAvLyB0aGVuIGdldHMgcGlja2VkIHVwIGJ5IHRoaXMgbG9vcFxuICAgICAgLy8gaHR0cDovL2Vqb2huLm9yZy9ibG9nL2xlYXJuaW5nLWZyb20tdHdpdHRlci9cblxuICAgICAgdmFyIGluYWN0aXZpdHlUaW1lb3V0O1xuICAgICAgdGhpcy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiBtb3VzZS90b3VjaCBhY3Rpdml0eSBoYXMgaGFwcGVuZWRcbiAgICAgICAgaWYgKCF0aGlzLnVzZXJBY3Rpdml0eV8pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gUmVzZXQgdGhlIGFjdGl2aXR5IHRyYWNrZXJcblxuXG4gICAgICAgIHRoaXMudXNlckFjdGl2aXR5XyA9IGZhbHNlOyAvLyBJZiB0aGUgdXNlciBzdGF0ZSB3YXMgaW5hY3RpdmUsIHNldCB0aGUgc3RhdGUgdG8gYWN0aXZlXG5cbiAgICAgICAgdGhpcy51c2VyQWN0aXZlKHRydWUpOyAvLyBDbGVhciBhbnkgZXhpc3RpbmcgaW5hY3Rpdml0eSB0aW1lb3V0IHRvIHN0YXJ0IHRoZSB0aW1lciBvdmVyXG5cbiAgICAgICAgdGhpcy5jbGVhclRpbWVvdXQoaW5hY3Rpdml0eVRpbWVvdXQpO1xuICAgICAgICB2YXIgdGltZW91dCA9IHRoaXMub3B0aW9uc18uaW5hY3Rpdml0eVRpbWVvdXQ7XG5cbiAgICAgICAgaWYgKHRpbWVvdXQgPD0gMCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBJbiA8dGltZW91dD4gbWlsbGlzZWNvbmRzLCBpZiBubyBtb3JlIGFjdGl2aXR5IGhhcyBvY2N1cnJlZCB0aGVcbiAgICAgICAgLy8gdXNlciB3aWxsIGJlIGNvbnNpZGVyZWQgaW5hY3RpdmVcblxuXG4gICAgICAgIGluYWN0aXZpdHlUaW1lb3V0ID0gdGhpcy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvLyBQcm90ZWN0IGFnYWluc3QgdGhlIGNhc2Ugd2hlcmUgdGhlIGluYWN0aXZpdHlUaW1lb3V0IGNhbiB0cmlnZ2VyIGp1c3RcbiAgICAgICAgICAvLyBiZWZvcmUgdGhlIG5leHQgdXNlciBhY3Rpdml0eSBpcyBwaWNrZWQgdXAgYnkgdGhlIGFjdGl2aXR5IGNoZWNrIGxvb3BcbiAgICAgICAgICAvLyBjYXVzaW5nIGEgZmxpY2tlclxuICAgICAgICAgIGlmICghdGhpcy51c2VyQWN0aXZpdHlfKSB7XG4gICAgICAgICAgICB0aGlzLnVzZXJBY3RpdmUoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICB9LCAyNTApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIG9yIHNldHMgdGhlIGN1cnJlbnQgcGxheWJhY2sgcmF0ZS4gQSBwbGF5YmFjayByYXRlIG9mXG4gICAgICogMS4wIHJlcHJlc2VudHMgbm9ybWFsIHNwZWVkIGFuZCAwLjUgd291bGQgaW5kaWNhdGUgaGFsZi1zcGVlZFxuICAgICAqIHBsYXliYWNrLCBmb3IgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAc2VlIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCNkb20tbWVkaWEtcGxheWJhY2tyYXRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3JhdGVdXG4gICAgICogICAgICAgTmV3IHBsYXliYWNrIHJhdGUgdG8gc2V0LlxuICAgICAqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqICAgICAgICAgVGhlIGN1cnJlbnQgcGxheWJhY2sgcmF0ZSB3aGVuIGdldHRpbmcgb3IgMS4wXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnBsYXliYWNrUmF0ZSA9IGZ1bmN0aW9uIHBsYXliYWNrUmF0ZShyYXRlKSB7XG4gICAgICBpZiAocmF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIE5PVEU6IHRoaXMuY2FjaGVfLmxhc3RQbGF5YmFja1JhdGUgaXMgc2V0IGZyb20gdGhlIHRlY2ggaGFuZGxlclxuICAgICAgICAvLyB0aGF0IGlzIHJlZ2lzdGVyZWQgYWJvdmVcbiAgICAgICAgdGhpcy50ZWNoQ2FsbF8oJ3NldFBsYXliYWNrUmF0ZScsIHJhdGUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnRlY2hfICYmIHRoaXMudGVjaF8uZmVhdHVyZXNQbGF5YmFja1JhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVfLmxhc3RQbGF5YmFja1JhdGUgfHwgdGhpcy50ZWNoR2V0XygncGxheWJhY2tSYXRlJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAxLjA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgb3Igc2V0cyB0aGUgY3VycmVudCBkZWZhdWx0IHBsYXliYWNrIHJhdGUuIEEgZGVmYXVsdCBwbGF5YmFjayByYXRlIG9mXG4gICAgICogMS4wIHJlcHJlc2VudHMgbm9ybWFsIHNwZWVkIGFuZCAwLjUgd291bGQgaW5kaWNhdGUgaGFsZi1zcGVlZCBwbGF5YmFjaywgZm9yIGluc3RhbmNlLlxuICAgICAqIGRlZmF1bHRQbGF5YmFja1JhdGUgd2lsbCBvbmx5IHJlcHJlc2VudCB3aGF0IHRoZSBpbml0aWFsIHBsYXliYWNrUmF0ZSBvZiBhIHZpZGVvIHdhcywgbm90XG4gICAgICogbm90IHRoZSBjdXJyZW50IHBsYXliYWNrUmF0ZS5cbiAgICAgKlxuICAgICAqIEBzZWUgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZW1iZWRkZWQtY29udGVudC5odG1sI2RvbS1tZWRpYS1kZWZhdWx0cGxheWJhY2tyYXRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3JhdGVdXG4gICAgICogICAgICAgTmV3IGRlZmF1bHQgcGxheWJhY2sgcmF0ZSB0byBzZXQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8UGxheWVyfVxuICAgICAqICAgICAgICAgLSBUaGUgZGVmYXVsdCBwbGF5YmFjayByYXRlIHdoZW4gZ2V0dGluZyBvciAxLjBcbiAgICAgKiAgICAgICAgIC0gdGhlIHBsYXllciB3aGVuIHNldHRpbmdcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZGVmYXVsdFBsYXliYWNrUmF0ZSA9IGZ1bmN0aW9uIGRlZmF1bHRQbGF5YmFja1JhdGUocmF0ZSkge1xuICAgICAgaWYgKHJhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpcy50ZWNoQ2FsbF8oJ3NldERlZmF1bHRQbGF5YmFja1JhdGUnLCByYXRlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMudGVjaF8gJiYgdGhpcy50ZWNoXy5mZWF0dXJlc1BsYXliYWNrUmF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50ZWNoR2V0XygnZGVmYXVsdFBsYXliYWNrUmF0ZScpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gMS4wO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIG9yIHNldHMgdGhlIGF1ZGlvIGZsYWdcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gYm9vbFxuICAgICAqICAgICAgICAtIHRydWUgc2lnbmFscyB0aGF0IHRoaXMgaXMgYW4gYXVkaW8gcGxheWVyXG4gICAgICogICAgICAgIC0gZmFsc2Ugc2lnbmFscyB0aGF0IHRoaXMgaXMgbm90IGFuIGF1ZGlvIHBsYXllclxuICAgICAqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKiAgICAgICAgIFRoZSBjdXJyZW50IHZhbHVlIG9mIGlzQXVkaW8gd2hlbiBnZXR0aW5nXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmlzQXVkaW8gPSBmdW5jdGlvbiBpc0F1ZGlvKGJvb2wpIHtcbiAgICAgIGlmIChib29sICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5pc0F1ZGlvXyA9ICEhYm9vbDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gISF0aGlzLmlzQXVkaW9fO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGhlbHBlciBtZXRob2QgZm9yIGFkZGluZyBhIHtAbGluayBUZXh0VHJhY2t9IHRvIG91clxuICAgICAqIHtAbGluayBUZXh0VHJhY2tMaXN0fS5cbiAgICAgKlxuICAgICAqIEluIGFkZGl0aW9uIHRvIHRoZSBXM0Mgc2V0dGluZ3Mgd2UgYWxsb3cgYWRkaW5nIGFkZGl0aW9uYWwgaW5mbyB0aHJvdWdoIG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL2h0bWwvd2cvZHJhZnRzL2h0bWwvbWFzdGVyL2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS1hZGR0ZXh0dHJhY2tcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBba2luZF1cbiAgICAgKiAgICAgICAgdGhlIGtpbmQgb2YgVGV4dFRyYWNrIHlvdSBhcmUgYWRkaW5nXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xhYmVsXVxuICAgICAqICAgICAgICB0aGUgbGFiZWwgdG8gZ2l2ZSB0aGUgVGV4dFRyYWNrIGxhYmVsXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xhbmd1YWdlXVxuICAgICAqICAgICAgICB0aGUgbGFuZ3VhZ2UgdG8gc2V0IG9uIHRoZSBUZXh0VHJhY2tcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1RleHRUcmFja3x1bmRlZmluZWR9XG4gICAgICogICAgICAgICB0aGUgVGV4dFRyYWNrIHRoYXQgd2FzIGFkZGVkIG9yIHVuZGVmaW5lZFxuICAgICAqICAgICAgICAgaWYgdGhlcmUgaXMgbm8gdGVjaFxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5hZGRUZXh0VHJhY2sgPSBmdW5jdGlvbiBhZGRUZXh0VHJhY2soa2luZCwgbGFiZWwsIGxhbmd1YWdlKSB7XG4gICAgICBpZiAodGhpcy50ZWNoXykge1xuICAgICAgICByZXR1cm4gdGhpcy50ZWNoXy5hZGRUZXh0VHJhY2soa2luZCwgbGFiZWwsIGxhbmd1YWdlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgcmVtb3RlIHtAbGluayBUZXh0VHJhY2t9IGFuZCBhbiB7QGxpbmsgSFRNTFRyYWNrRWxlbWVudH0uIEl0IHdpbGxcbiAgICAgKiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgZnJvbSB0aGUgdmlkZW8gZWxlbWVudCB3aGVuZXZlciB0aGUgc291cmNlIGNoYW5nZXMsIHVubGVzc1xuICAgICAqIG1hbnVhbENsZWFudXAgaXMgc2V0IHRvIGZhbHNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiAgICAgICAgT3B0aW9ucyB0byBwYXNzIHRvIHtAbGluayBIVE1MVHJhY2tFbGVtZW50fSBkdXJpbmcgY3JlYXRpb24uIFNlZVxuICAgICAqICAgICAgICB7QGxpbmsgSFRNTFRyYWNrRWxlbWVudH0gZm9yIG9iamVjdCBwcm9wZXJ0aWVzIHRoYXQgeW91IHNob3VsZCB1c2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFttYW51YWxDbGVhbnVwPXRydWVdIGlmIHNldCB0byBmYWxzZSwgdGhlIFRleHRUcmFjayB3aWxsIGJlXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtIdG1sVHJhY2tFbGVtZW50fVxuICAgICAqICAgICAgICAgdGhlIEhUTUxUcmFja0VsZW1lbnQgdGhhdCB3YXMgY3JlYXRlZCBhbmQgYWRkZWRcbiAgICAgKiAgICAgICAgIHRvIHRoZSBIdG1sVHJhY2tFbGVtZW50TGlzdCBhbmQgdGhlIHJlbW90ZVxuICAgICAqICAgICAgICAgVGV4dFRyYWNrTGlzdFxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVGhlIGRlZmF1bHQgdmFsdWUgb2YgdGhlIFwibWFudWFsQ2xlYW51cFwiIHBhcmFtZXRlciB3aWxsIGRlZmF1bHRcbiAgICAgKiAgICAgICAgICAgICB0byBcImZhbHNlXCIgaW4gdXBjb21pbmcgdmVyc2lvbnMgb2YgVmlkZW8uanNcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uYWRkUmVtb3RlVGV4dFRyYWNrID0gZnVuY3Rpb24gYWRkUmVtb3RlVGV4dFRyYWNrKG9wdGlvbnMsIG1hbnVhbENsZWFudXApIHtcbiAgICAgIGlmICh0aGlzLnRlY2hfKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlY2hfLmFkZFJlbW90ZVRleHRUcmFjayhvcHRpb25zLCBtYW51YWxDbGVhbnVwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgcmVtb3RlIHtAbGluayBUZXh0VHJhY2t9IGZyb20gdGhlIHJlc3BlY3RpdmVcbiAgICAgKiB7QGxpbmsgVGV4dFRyYWNrTGlzdH0gYW5kIHtAbGluayBIdG1sVHJhY2tFbGVtZW50TGlzdH0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdHJhY2tcbiAgICAgKiAgICAgICAgUmVtb3RlIHtAbGluayBUZXh0VHJhY2t9IHRvIHJlbW92ZVxuICAgICAqXG4gICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxuICAgICAqICAgICAgICAgZG9lcyBub3QgcmV0dXJuIGFueXRoaW5nXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnJlbW92ZVJlbW90ZVRleHRUcmFjayA9IGZ1bmN0aW9uIHJlbW92ZVJlbW90ZVRleHRUcmFjayhvYmopIHtcbiAgICAgIGlmIChvYmogPT09IHZvaWQgMCkge1xuICAgICAgICBvYmogPSB7fTtcbiAgICAgIH1cblxuICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgdHJhY2sgPSBfb2JqLnRyYWNrO1xuXG4gICAgICBpZiAoIXRyYWNrKSB7XG4gICAgICAgIHRyYWNrID0gb2JqO1xuICAgICAgfSAvLyBkZXN0cnVjdHVyZSB0aGUgaW5wdXQgaW50byBhbiBvYmplY3Qgd2l0aCBhIHRyYWNrIGFyZ3VtZW50LCBkZWZhdWx0aW5nIHRvIGFyZ3VtZW50c1swXVxuICAgICAgLy8gZGVmYXVsdCB0aGUgd2hvbGUgYXJndW1lbnQgdG8gYW4gZW1wdHkgb2JqZWN0IGlmIG5vdGhpbmcgd2FzIHBhc3NlZCBpblxuXG5cbiAgICAgIGlmICh0aGlzLnRlY2hfKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlY2hfLnJlbW92ZVJlbW90ZVRleHRUcmFjayh0cmFjayk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYXZhaWxhYmxlIG1lZGlhIHBsYXliYWNrIHF1YWxpdHkgbWV0cmljcyBhcyBzcGVjaWZpZWQgYnkgdGhlIFczQydzIE1lZGlhXG4gICAgICogUGxheWJhY2sgUXVhbGl0eSBBUEkuXG4gICAgICpcbiAgICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3dpY2cuZ2l0aHViLmlvL21lZGlhLXBsYXliYWNrLXF1YWxpdHl9XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuICAgICAqICAgICAgICAgQW4gb2JqZWN0IHdpdGggc3VwcG9ydGVkIG1lZGlhIHBsYXliYWNrIHF1YWxpdHkgbWV0cmljcyBvciB1bmRlZmluZWQgaWYgdGhlcmVcbiAgICAgKiAgICAgICAgIGlzIG5vIHRlY2ggb3IgdGhlIHRlY2ggZG9lcyBub3Qgc3VwcG9ydCBpdC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZ2V0VmlkZW9QbGF5YmFja1F1YWxpdHkgPSBmdW5jdGlvbiBnZXRWaWRlb1BsYXliYWNrUXVhbGl0eSgpIHtcbiAgICAgIHJldHVybiB0aGlzLnRlY2hHZXRfKCdnZXRWaWRlb1BsYXliYWNrUXVhbGl0eScpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdmlkZW8gd2lkdGhcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKiAgICAgICAgIGN1cnJlbnQgdmlkZW8gd2lkdGhcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udmlkZW9XaWR0aCA9IGZ1bmN0aW9uIHZpZGVvV2lkdGgoKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZWNoXyAmJiB0aGlzLnRlY2hfLnZpZGVvV2lkdGggJiYgdGhpcy50ZWNoXy52aWRlb1dpZHRoKCkgfHwgMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHZpZGVvIGhlaWdodFxuICAgICAqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqICAgICAgICAgY3VycmVudCB2aWRlbyBoZWlnaHRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8udmlkZW9IZWlnaHQgPSBmdW5jdGlvbiB2aWRlb0hlaWdodCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnRlY2hfICYmIHRoaXMudGVjaF8udmlkZW9IZWlnaHQgJiYgdGhpcy50ZWNoXy52aWRlb0hlaWdodCgpIHx8IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBwbGF5ZXIncyBsYW5ndWFnZSBjb2RlXG4gICAgICogTk9URTogVGhlIGxhbmd1YWdlIHNob3VsZCBiZSBzZXQgaW4gdGhlIHBsYXllciBvcHRpb25zIGlmIHlvdSB3YW50IHRoZVxuICAgICAqIHRoZSBjb250cm9scyB0byBiZSBidWlsdCB3aXRoIGEgc3BlY2lmaWMgbGFuZ3VhZ2UuIENoYW5naW5nIHRoZSBsYW5ndWFnZVxuICAgICAqIGxhdGVyIHdpbGwgbm90IHVwZGF0ZSBjb250cm9scyB0ZXh0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXVxuICAgICAqICAgICAgICB0aGUgbGFuZ3VhZ2UgY29kZSB0byBzZXQgdGhlIHBsYXllciB0b1xuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgVGhlIGN1cnJlbnQgbGFuZ3VhZ2UgY29kZSB3aGVuIGdldHRpbmdcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ubGFuZ3VhZ2UgPSBmdW5jdGlvbiBsYW5ndWFnZShjb2RlKSB7XG4gICAgICBpZiAoY29kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhbmd1YWdlXztcbiAgICAgIH1cblxuICAgICAgdGhpcy5sYW5ndWFnZV8gPSBTdHJpbmcoY29kZSkudG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwbGF5ZXIncyBsYW5ndWFnZSBkaWN0aW9uYXJ5XG4gICAgICogTWVyZ2UgZXZlcnkgdGltZSwgYmVjYXVzZSBhIG5ld2x5IGFkZGVkIHBsdWdpbiBtaWdodCBjYWxsIHZpZGVvanMuYWRkTGFuZ3VhZ2UoKSBhdCBhbnkgdGltZVxuICAgICAqIExhbmd1YWdlcyBzcGVjaWZpZWQgZGlyZWN0bHkgaW4gdGhlIHBsYXllciBvcHRpb25zIGhhdmUgcHJlY2VkZW5jZVxuICAgICAqXG4gICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICogICAgICAgICBBbiBhcnJheSBvZiBvZiBzdXBwb3J0ZWQgbGFuZ3VhZ2VzXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmxhbmd1YWdlcyA9IGZ1bmN0aW9uIGxhbmd1YWdlcygpIHtcbiAgICAgIHJldHVybiBtZXJnZU9wdGlvbnMoUGxheWVyLnByb3RvdHlwZS5vcHRpb25zXy5sYW5ndWFnZXMsIHRoaXMubGFuZ3VhZ2VzXyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHJldHVybnMgYSBKYXZhU2NyaXB0IG9iamVjdCByZXBlcmVzZW50aW5nIHRoZSBjdXJyZW50IHRyYWNrXG4gICAgICogaW5mb3JtYXRpb24uICoqRE9FUyBub3QgcmV0dXJuIGl0IGFzIEpTT04qKlxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqICAgICAgICAgT2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBvZiB0cmFjayBpbmZvXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgIHZhciBvcHRpb25zID0gbWVyZ2VPcHRpb25zKHRoaXMub3B0aW9uc18pO1xuICAgICAgdmFyIHRyYWNrcyA9IG9wdGlvbnMudHJhY2tzO1xuICAgICAgb3B0aW9ucy50cmFja3MgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRyYWNrID0gdHJhY2tzW2ldOyAvLyBkZWVwIG1lcmdlIHRyYWNrcyBhbmQgbnVsbCBvdXQgcGxheWVyIHNvIG5vIGNpcmN1bGFyIHJlZmVyZW5jZXNcblxuICAgICAgICB0cmFjayA9IG1lcmdlT3B0aW9ucyh0cmFjayk7XG4gICAgICAgIHRyYWNrLnBsYXllciA9IHVuZGVmaW5lZDtcbiAgICAgICAgb3B0aW9ucy50cmFja3NbaV0gPSB0cmFjaztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzaW1wbGUgbW9kYWwgZGlhbG9nIChhbiBpbnN0YW5jZSBvZiB0aGUge0BsaW5rIE1vZGFsRGlhbG9nfVxuICAgICAqIGNvbXBvbmVudCkgdGhhdCBpbW1lZGlhdGVseSBvdmVybGF5cyB0aGUgcGxheWVyIHdpdGggYXJiaXRyYXJ5XG4gICAgICogY29udGVudCBhbmQgcmVtb3ZlcyBpdHNlbGYgd2hlbiBjbG9zZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xGdW5jdGlvbnxFbGVtZW50fEFycmF5fG51bGx9IGNvbnRlbnRcbiAgICAgKiAgICAgICAgU2FtZSBhcyB7QGxpbmsgTW9kYWxEaWFsb2cjY29udGVudH0ncyBwYXJhbSBvZiB0aGUgc2FtZSBuYW1lLlxuICAgICAqICAgICAgICBUaGUgbW9zdCBzdHJhaWdodC1mb3J3YXJkIHVzYWdlIGlzIHRvIHByb3ZpZGUgYSBzdHJpbmcgb3IgRE9NXG4gICAgICogICAgICAgIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogICAgICAgIEV4dHJhIG9wdGlvbnMgd2hpY2ggd2lsbCBiZSBwYXNzZWQgb24gdG8gdGhlIHtAbGluayBNb2RhbERpYWxvZ30uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtNb2RhbERpYWxvZ31cbiAgICAgKiAgICAgICAgIHRoZSB7QGxpbmsgTW9kYWxEaWFsb2d9IHRoYXQgd2FzIGNyZWF0ZWRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3JlYXRlTW9kYWwgPSBmdW5jdGlvbiBjcmVhdGVNb2RhbChjb250ZW50LCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXMxNCA9IHRoaXM7XG5cbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgb3B0aW9ucy5jb250ZW50ID0gY29udGVudCB8fCAnJztcbiAgICAgIHZhciBtb2RhbCA9IG5ldyBNb2RhbERpYWxvZyh0aGlzLCBvcHRpb25zKTtcbiAgICAgIHRoaXMuYWRkQ2hpbGQobW9kYWwpO1xuICAgICAgbW9kYWwub24oJ2Rpc3Bvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMTQucmVtb3ZlQ2hpbGQobW9kYWwpO1xuICAgICAgfSk7XG4gICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICByZXR1cm4gbW9kYWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZSBicmVha3BvaW50IGNsYXNzZXMgd2hlbiB0aGUgcGxheWVyIHJlc2l6ZXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by51cGRhdGVDdXJyZW50QnJlYWtwb2ludF8gPSBmdW5jdGlvbiB1cGRhdGVDdXJyZW50QnJlYWtwb2ludF8oKSB7XG4gICAgICBpZiAoIXRoaXMucmVzcG9uc2l2ZSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGN1cnJlbnRCcmVha3BvaW50ID0gdGhpcy5jdXJyZW50QnJlYWtwb2ludCgpO1xuICAgICAgdmFyIGN1cnJlbnRXaWR0aCA9IHRoaXMuY3VycmVudFdpZHRoKCk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQlJFQUtQT0lOVF9PUkRFUi5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgY2FuZGlkYXRlQnJlYWtwb2ludCA9IEJSRUFLUE9JTlRfT1JERVJbaV07XG4gICAgICAgIHZhciBtYXhXaWR0aCA9IHRoaXMuYnJlYWtwb2ludHNfW2NhbmRpZGF0ZUJyZWFrcG9pbnRdO1xuXG4gICAgICAgIGlmIChjdXJyZW50V2lkdGggPD0gbWF4V2lkdGgpIHtcbiAgICAgICAgICAvLyBUaGUgY3VycmVudCBicmVha3BvaW50IGRpZCBub3QgY2hhbmdlLCBub3RoaW5nIHRvIGRvLlxuICAgICAgICAgIGlmIChjdXJyZW50QnJlYWtwb2ludCA9PT0gY2FuZGlkYXRlQnJlYWtwb2ludCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gLy8gT25seSByZW1vdmUgYSBjbGFzcyBpZiB0aGVyZSBpcyBhIGN1cnJlbnQgYnJlYWtwb2ludC5cblxuXG4gICAgICAgICAgaWYgKGN1cnJlbnRCcmVha3BvaW50KSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKEJSRUFLUE9JTlRfQ0xBU1NFU1tjdXJyZW50QnJlYWtwb2ludF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuYWRkQ2xhc3MoQlJFQUtQT0lOVF9DTEFTU0VTW2NhbmRpZGF0ZUJyZWFrcG9pbnRdKTtcbiAgICAgICAgICB0aGlzLmJyZWFrcG9pbnRfID0gY2FuZGlkYXRlQnJlYWtwb2ludDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBjdXJyZW50IGJyZWFrcG9pbnQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5yZW1vdmVDdXJyZW50QnJlYWtwb2ludF8gPSBmdW5jdGlvbiByZW1vdmVDdXJyZW50QnJlYWtwb2ludF8oKSB7XG4gICAgICB2YXIgY2xhc3NOYW1lID0gdGhpcy5jdXJyZW50QnJlYWtwb2ludENsYXNzKCk7XG4gICAgICB0aGlzLmJyZWFrcG9pbnRfID0gJyc7XG5cbiAgICAgIGlmIChjbGFzc05hbWUpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcyhjbGFzc05hbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgb3Igc2V0IGJyZWFrcG9pbnRzIG9uIHRoZSBwbGF5ZXIuXG4gICAgICpcbiAgICAgKiBDYWxsaW5nIHRoaXMgbWV0aG9kIHdpdGggYW4gb2JqZWN0IG9yIGB0cnVlYCB3aWxsIHJlbW92ZSBhbnkgcHJldmlvdXNcbiAgICAgKiBjdXN0b20gYnJlYWtwb2ludHMgYW5kIHN0YXJ0IGZyb20gdGhlIGRlZmF1bHRzIGFnYWluLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7T2JqZWN0fGJvb2xlYW59IFticmVha3BvaW50c11cbiAgICAgKiAgICAgICAgIElmIGFuIG9iamVjdCBpcyBnaXZlbiwgaXQgY2FuIGJlIHVzZWQgdG8gcHJvdmlkZSBjdXN0b21cbiAgICAgKiAgICAgICAgIGJyZWFrcG9pbnRzLiBJZiBgdHJ1ZWAgaXMgZ2l2ZW4sIHdpbGwgc2V0IGRlZmF1bHQgYnJlYWtwb2ludHMuXG4gICAgICogICAgICAgICBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBnaXZlbiwgd2lsbCBzaW1wbHkgcmV0dXJuIHRoZSBjdXJyZW50XG4gICAgICogICAgICAgICBicmVha3BvaW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge251bWJlcn0gW2JyZWFrcG9pbnRzLnRpbnldXG4gICAgICogICAgICAgICBUaGUgbWF4aW11bSB3aWR0aCBmb3IgdGhlIFwidmpzLWxheW91dC10aW55XCIgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IFticmVha3BvaW50cy54c21hbGxdXG4gICAgICogICAgICAgICBUaGUgbWF4aW11bSB3aWR0aCBmb3IgdGhlIFwidmpzLWxheW91dC14LXNtYWxsXCIgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IFticmVha3BvaW50cy5zbWFsbF1cbiAgICAgKiAgICAgICAgIFRoZSBtYXhpbXVtIHdpZHRoIGZvciB0aGUgXCJ2anMtbGF5b3V0LXNtYWxsXCIgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IFticmVha3BvaW50cy5tZWRpdW1dXG4gICAgICogICAgICAgICBUaGUgbWF4aW11bSB3aWR0aCBmb3IgdGhlIFwidmpzLWxheW91dC1tZWRpdW1cIiBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge251bWJlcn0gW2JyZWFrcG9pbnRzLmxhcmdlXVxuICAgICAqICAgICAgICAgVGhlIG1heGltdW0gd2lkdGggZm9yIHRoZSBcInZqcy1sYXlvdXQtbGFyZ2VcIiBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge251bWJlcn0gW2JyZWFrcG9pbnRzLnhsYXJnZV1cbiAgICAgKiAgICAgICAgIFRoZSBtYXhpbXVtIHdpZHRoIGZvciB0aGUgXCJ2anMtbGF5b3V0LXgtbGFyZ2VcIiBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge251bWJlcn0gW2JyZWFrcG9pbnRzLmh1Z2VdXG4gICAgICogICAgICAgICBUaGUgbWF4aW11bSB3aWR0aCBmb3IgdGhlIFwidmpzLWxheW91dC1odWdlXCIgY2xhc3MuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogICAgICAgICBBbiBvYmplY3QgbWFwcGluZyBicmVha3BvaW50IG5hbWVzIHRvIG1heGltdW0gd2lkdGggdmFsdWVzLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5icmVha3BvaW50cyA9IGZ1bmN0aW9uIGJyZWFrcG9pbnRzKF9icmVha3BvaW50cykge1xuICAgICAgLy8gVXNlZCBhcyBhIGdldHRlci5cbiAgICAgIGlmIChfYnJlYWtwb2ludHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gYXNzaWduKHRoaXMuYnJlYWtwb2ludHNfKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5icmVha3BvaW50XyA9ICcnO1xuICAgICAgdGhpcy5icmVha3BvaW50c18gPSBhc3NpZ24oe30sIERFRkFVTFRfQlJFQUtQT0lOVFMsIF9icmVha3BvaW50cyk7IC8vIFdoZW4gYnJlYWtwb2ludCBkZWZpbml0aW9ucyBjaGFuZ2UsIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSBjdXJyZW50bHlcbiAgICAgIC8vIHNlbGVjdGVkIGJyZWFrcG9pbnQuXG5cbiAgICAgIHRoaXMudXBkYXRlQ3VycmVudEJyZWFrcG9pbnRfKCk7IC8vIENsb25lIHRoZSBicmVha3BvaW50cyBiZWZvcmUgcmV0dXJuaW5nLlxuXG4gICAgICByZXR1cm4gYXNzaWduKHRoaXMuYnJlYWtwb2ludHNfKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IG9yIHNldCBhIGZsYWcgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGlzIHBsYXllciBzaG91bGQgYWRqdXN0XG4gICAgICogaXRzIFVJIGJhc2VkIG9uIGl0cyBkaW1lbnNpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gdmFsdWVcbiAgICAgKiAgICAgICAgIFNob3VsZCBiZSBgdHJ1ZWAgaWYgdGhlIHBsYXllciBzaG91bGQgYWRqdXN0IGl0cyBVSSBiYXNlZCBvbiBpdHNcbiAgICAgKiAgICAgICAgIGRpbWVuc2lvbnM7IG90aGVyd2lzZSwgc2hvdWxkIGJlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqICAgICAgICAgV2lsbCBiZSBgdHJ1ZWAgaWYgdGhpcyBwbGF5ZXIgc2hvdWxkIGFkanVzdCBpdHMgVUkgYmFzZWQgb24gaXRzXG4gICAgICogICAgICAgICBkaW1lbnNpb25zOyBvdGhlcndpc2UsIHdpbGwgYmUgYGZhbHNlYC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8ucmVzcG9uc2l2ZSA9IGZ1bmN0aW9uIHJlc3BvbnNpdmUodmFsdWUpIHtcbiAgICAgIC8vIFVzZWQgYXMgYSBnZXR0ZXIuXG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNwb25zaXZlXztcbiAgICAgIH1cblxuICAgICAgdmFsdWUgPSBCb29sZWFuKHZhbHVlKTtcbiAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5yZXNwb25zaXZlXzsgLy8gTm90aGluZyBjaGFuZ2VkLlxuXG4gICAgICBpZiAodmFsdWUgPT09IGN1cnJlbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBUaGUgdmFsdWUgYWN0dWFsbHkgY2hhbmdlZCwgc2V0IGl0LlxuXG5cbiAgICAgIHRoaXMucmVzcG9uc2l2ZV8gPSB2YWx1ZTsgLy8gU3RhcnQgbGlzdGVuaW5nIGZvciBicmVha3BvaW50cyBhbmQgc2V0IHRoZSBpbml0aWFsIGJyZWFrcG9pbnQgaWYgdGhlXG4gICAgICAvLyBwbGF5ZXIgaXMgbm93IHJlc3BvbnNpdmUuXG5cbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB0aGlzLm9uKCdwbGF5ZXJyZXNpemUnLCB0aGlzLnVwZGF0ZUN1cnJlbnRCcmVha3BvaW50Xyk7XG4gICAgICAgIHRoaXMudXBkYXRlQ3VycmVudEJyZWFrcG9pbnRfKCk7IC8vIFN0b3AgbGlzdGVuaW5nIGZvciBicmVha3BvaW50cyBpZiB0aGUgcGxheWVyIGlzIG5vIGxvbmdlciByZXNwb25zaXZlLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vZmYoJ3BsYXllcnJlc2l6ZScsIHRoaXMudXBkYXRlQ3VycmVudEJyZWFrcG9pbnRfKTtcbiAgICAgICAgdGhpcy5yZW1vdmVDdXJyZW50QnJlYWtwb2ludF8oKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgY3VycmVudCBicmVha3BvaW50IG5hbWUsIGlmIGFueS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKiAgICAgICAgIElmIHRoZXJlIGlzIGN1cnJlbnRseSBhIGJyZWFrcG9pbnQgc2V0LCByZXR1cm5zIGEgdGhlIGtleSBmcm9tIHRoZVxuICAgICAqICAgICAgICAgYnJlYWtwb2ludHMgb2JqZWN0IG1hdGNoaW5nIGl0LiBPdGhlcndpc2UsIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5jdXJyZW50QnJlYWtwb2ludCA9IGZ1bmN0aW9uIGN1cnJlbnRCcmVha3BvaW50KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYnJlYWtwb2ludF87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VycmVudCBicmVha3BvaW50IGNsYXNzIG5hbWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogICAgICAgICBUaGUgbWF0Y2hpbmcgY2xhc3MgbmFtZSAoZS5nLiBgXCJ2anMtbGF5b3V0LXRpbnlcImAgb3JcbiAgICAgKiAgICAgICAgIGBcInZqcy1sYXlvdXQtbGFyZ2VcImApIGZvciB0aGUgY3VycmVudCBicmVha3BvaW50LiBFbXB0eSBzdHJpbmcgaWZcbiAgICAgKiAgICAgICAgIHRoZXJlIGlzIG5vIGN1cnJlbnQgYnJlYWtwb2ludC5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uY3VycmVudEJyZWFrcG9pbnRDbGFzcyA9IGZ1bmN0aW9uIGN1cnJlbnRCcmVha3BvaW50Q2xhc3MoKSB7XG4gICAgICByZXR1cm4gQlJFQUtQT0lOVF9DTEFTU0VTW3RoaXMuYnJlYWtwb2ludF9dIHx8ICcnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbiBvYmplY3QgdGhhdCBkZXNjcmliZXMgYSBzaW5nbGUgcGllY2Ugb2YgbWVkaWEuXG4gICAgICpcbiAgICAgKiBQcm9wZXJ0aWVzIHRoYXQgYXJlIG5vdCBwYXJ0IG9mIHRoaXMgdHlwZSBkZXNjcmlwdGlvbiB3aWxsIGJlIHJldGFpbmVkOyBzbyxcbiAgICAgKiB0aGlzIGNhbiBiZSB2aWV3ZWQgYXMgYSBnZW5lcmljIG1ldGFkYXRhIHN0b3JhZ2UgbWVjaGFuaXNtIGFzIHdlbGwuXG4gICAgICpcbiAgICAgKiBAc2VlICAgICAge0BsaW5rIGh0dHBzOi8vd2ljZy5naXRodWIuaW8vbWVkaWFzZXNzaW9uLyN0aGUtbWVkaWFtZXRhZGF0YS1pbnRlcmZhY2V9XG4gICAgICogQHR5cGVkZWYgIHtPYmplY3R9IFBsYXllcn5NZWRpYU9iamVjdFxuICAgICAqXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IFthbGJ1bV1cbiAgICAgKiAgICAgICAgICAgVW51c2VkLCBleGNlcHQgaWYgdGhpcyBvYmplY3QgaXMgcGFzc2VkIHRvIHRoZSBgTWVkaWFTZXNzaW9uYFxuICAgICAqICAgICAgICAgICBBUEkuXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2FydGlzdF1cbiAgICAgKiAgICAgICAgICAgVW51c2VkLCBleGNlcHQgaWYgdGhpcyBvYmplY3QgaXMgcGFzc2VkIHRvIHRoZSBgTWVkaWFTZXNzaW9uYFxuICAgICAqICAgICAgICAgICBBUEkuXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkge09iamVjdFtdfSBbYXJ0d29ya11cbiAgICAgKiAgICAgICAgICAgVW51c2VkLCBleGNlcHQgaWYgdGhpcyBvYmplY3QgaXMgcGFzc2VkIHRvIHRoZSBgTWVkaWFTZXNzaW9uYFxuICAgICAqICAgICAgICAgICBBUEkuIElmIG5vdCBzcGVjaWZpZWQsIHdpbGwgYmUgcG9wdWxhdGVkIHZpYSB0aGUgYHBvc3RlcmAsIGlmXG4gICAgICogICAgICAgICAgIGF2YWlsYWJsZS5cbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcG9zdGVyXVxuICAgICAqICAgICAgICAgICBVUkwgdG8gYW4gaW1hZ2UgdGhhdCB3aWxsIGRpc3BsYXkgYmVmb3JlIHBsYXliYWNrLlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IHtUZWNoflNvdXJjZU9iamVjdHxUZWNoflNvdXJjZU9iamVjdFtdfHN0cmluZ30gW3NyY11cbiAgICAgKiAgICAgICAgICAgQSBzaW5nbGUgc291cmNlIG9iamVjdCwgYW4gYXJyYXkgb2Ygc291cmNlIG9iamVjdHMsIG9yIGEgc3RyaW5nXG4gICAgICogICAgICAgICAgIHJlZmVyZW5jaW5nIGEgVVJMIHRvIGEgbWVkaWEgc291cmNlLiBJdCBpcyBfaGlnaGx5IHJlY29tbWVuZGVkX1xuICAgICAqICAgICAgICAgICB0aGF0IGFuIG9iamVjdCBvciBhcnJheSBvZiBvYmplY3RzIGlzIHVzZWQgaGVyZSwgc28gdGhhdCBzb3VyY2VcbiAgICAgKiAgICAgICAgICAgc2VsZWN0aW9uIGFsZ29yaXRobXMgY2FuIHRha2UgdGhlIGB0eXBlYCBpbnRvIGFjY291bnQuXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3RpdGxlXVxuICAgICAqICAgICAgICAgICBVbnVzZWQsIGV4Y2VwdCBpZiB0aGlzIG9iamVjdCBpcyBwYXNzZWQgdG8gdGhlIGBNZWRpYVNlc3Npb25gXG4gICAgICogICAgICAgICAgIEFQSS5cbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0W119IFt0ZXh0VHJhY2tzXVxuICAgICAqICAgICAgICAgICBBbiBhcnJheSBvZiBvYmplY3RzIHRvIGJlIHVzZWQgdG8gY3JlYXRlIHRleHQgdHJhY2tzLCBmb2xsb3dpbmdcbiAgICAgKiAgICAgICAgICAgdGhlIHtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUwL2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI3RoZS10cmFjay1lbGVtZW50fG5hdGl2ZSB0cmFjayBlbGVtZW50IGZvcm1hdH0uXG4gICAgICogICAgICAgICAgIEZvciBlYXNlIG9mIHJlbW92YWwsIHRoZXNlIHdpbGwgYmUgY3JlYXRlZCBhcyBcInJlbW90ZVwiIHRleHRcbiAgICAgKiAgICAgICAgICAgdHJhY2tzIGFuZCBzZXQgdG8gYXV0b21hdGljYWxseSBjbGVhbiB1cCBvbiBzb3VyY2UgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqICAgICAgICAgICBUaGVzZSBvYmplY3RzIG1heSBoYXZlIHByb3BlcnRpZXMgbGlrZSBgc3JjYCwgYGtpbmRgLCBgbGFiZWxgLFxuICAgICAqICAgICAgICAgICBhbmQgYGxhbmd1YWdlYCwgc2VlIHtAbGluayBUZWNoI2NyZWF0ZVJlbW90ZVRleHRUcmFja30uXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBQb3B1bGF0ZSB0aGUgcGxheWVyIHVzaW5nIGEge0BsaW5rIFBsYXllcn5NZWRpYU9iamVjdHxNZWRpYU9iamVjdH0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtQbGF5ZXJ+TWVkaWFPYmplY3R9IG1lZGlhXG4gICAgICogICAgICAgICBBIG1lZGlhIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSByZWFkeVxuICAgICAqICAgICAgICAgQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgd2hlbiB0aGUgcGxheWVyIGlzIHJlYWR5LlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by5sb2FkTWVkaWEgPSBmdW5jdGlvbiBsb2FkTWVkaWEobWVkaWEsIHJlYWR5KSB7XG4gICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7XG5cbiAgICAgIGlmICghbWVkaWEgfHwgdHlwZW9mIG1lZGlhICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVzZXQoKTsgLy8gQ2xvbmUgdGhlIG1lZGlhIG9iamVjdCBzbyBpdCBjYW5ub3QgYmUgbXV0YXRlZCBmcm9tIG91dHNpZGUuXG5cbiAgICAgIHRoaXMuY2FjaGVfLm1lZGlhID0gbWVyZ2VPcHRpb25zKG1lZGlhKTtcbiAgICAgIHZhciBfdGhpcyRjYWNoZV8kbWVkaWEgPSB0aGlzLmNhY2hlXy5tZWRpYSxcbiAgICAgICAgICBhcnR3b3JrID0gX3RoaXMkY2FjaGVfJG1lZGlhLmFydHdvcmssXG4gICAgICAgICAgcG9zdGVyID0gX3RoaXMkY2FjaGVfJG1lZGlhLnBvc3RlcixcbiAgICAgICAgICBzcmMgPSBfdGhpcyRjYWNoZV8kbWVkaWEuc3JjLFxuICAgICAgICAgIHRleHRUcmFja3MgPSBfdGhpcyRjYWNoZV8kbWVkaWEudGV4dFRyYWNrczsgLy8gSWYgYGFydHdvcmtgIGlzIG5vdCBnaXZlbiwgY3JlYXRlIGl0IHVzaW5nIGBwb3N0ZXJgLlxuXG4gICAgICBpZiAoIWFydHdvcmsgJiYgcG9zdGVyKSB7XG4gICAgICAgIHRoaXMuY2FjaGVfLm1lZGlhLmFydHdvcmsgPSBbe1xuICAgICAgICAgIHNyYzogcG9zdGVyLFxuICAgICAgICAgIHR5cGU6IGdldE1pbWV0eXBlKHBvc3RlcilcbiAgICAgICAgfV07XG4gICAgICB9XG5cbiAgICAgIGlmIChzcmMpIHtcbiAgICAgICAgdGhpcy5zcmMoc3JjKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBvc3Rlcikge1xuICAgICAgICB0aGlzLnBvc3Rlcihwb3N0ZXIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh0ZXh0VHJhY2tzKSkge1xuICAgICAgICB0ZXh0VHJhY2tzLmZvckVhY2goZnVuY3Rpb24gKHR0KSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMTUuYWRkUmVtb3RlVGV4dFRyYWNrKHR0LCBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJlYWR5KHJlYWR5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGEgY2xvbmUgb2YgdGhlIGN1cnJlbnQge0BsaW5rIFBsYXllcn5NZWRpYU9iamVjdH0gZm9yIHRoaXMgcGxheWVyLlxuICAgICAqXG4gICAgICogSWYgdGhlIGBsb2FkTWVkaWFgIG1ldGhvZCBoYXMgbm90IGJlZW4gdXNlZCwgd2lsbCBhdHRlbXB0IHRvIHJldHVybiBhXG4gICAgICoge0BsaW5rIFBsYXllcn5NZWRpYU9iamVjdH0gYmFzZWQgb24gdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHBsYXllci5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1BsYXllcn5NZWRpYU9iamVjdH1cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZ2V0TWVkaWEgPSBmdW5jdGlvbiBnZXRNZWRpYSgpIHtcbiAgICAgIGlmICghdGhpcy5jYWNoZV8ubWVkaWEpIHtcbiAgICAgICAgdmFyIHBvc3RlciA9IHRoaXMucG9zdGVyKCk7XG4gICAgICAgIHZhciBzcmMgPSB0aGlzLmN1cnJlbnRTb3VyY2VzKCk7XG4gICAgICAgIHZhciB0ZXh0VHJhY2tzID0gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMucmVtb3RlVGV4dFRyYWNrcygpLCBmdW5jdGlvbiAodHQpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogdHQua2luZCxcbiAgICAgICAgICAgIGxhYmVsOiB0dC5sYWJlbCxcbiAgICAgICAgICAgIGxhbmd1YWdlOiB0dC5sYW5ndWFnZSxcbiAgICAgICAgICAgIHNyYzogdHQuc3JjXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBtZWRpYSA9IHtcbiAgICAgICAgICBzcmM6IHNyYyxcbiAgICAgICAgICB0ZXh0VHJhY2tzOiB0ZXh0VHJhY2tzXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHBvc3Rlcikge1xuICAgICAgICAgIG1lZGlhLnBvc3RlciA9IHBvc3RlcjtcbiAgICAgICAgICBtZWRpYS5hcnR3b3JrID0gW3tcbiAgICAgICAgICAgIHNyYzogbWVkaWEucG9zdGVyLFxuICAgICAgICAgICAgdHlwZTogZ2V0TWltZXR5cGUobWVkaWEucG9zdGVyKVxuICAgICAgICAgIH1dO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1lZGlhO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbWVyZ2VPcHRpb25zKHRoaXMuY2FjaGVfLm1lZGlhKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0YWcgc2V0dGluZ3NcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gdGFnXG4gICAgICogICAgICAgIFRoZSBwbGF5ZXIgdGFnXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogICAgICAgICBBbiBvYmplY3QgY29udGFpbmluZyBhbGwgb2YgdGhlIHNldHRpbmdzXG4gICAgICogICAgICAgICBmb3IgYSBwbGF5ZXIgdGFnXG4gICAgICovXG4gICAgO1xuXG4gICAgUGxheWVyLmdldFRhZ1NldHRpbmdzID0gZnVuY3Rpb24gZ2V0VGFnU2V0dGluZ3ModGFnKSB7XG4gICAgICB2YXIgYmFzZU9wdGlvbnMgPSB7XG4gICAgICAgIHNvdXJjZXM6IFtdLFxuICAgICAgICB0cmFja3M6IFtdXG4gICAgICB9O1xuICAgICAgdmFyIHRhZ09wdGlvbnMgPSBnZXRBdHRyaWJ1dGVzKHRhZyk7XG4gICAgICB2YXIgZGF0YVNldHVwID0gdGFnT3B0aW9uc1snZGF0YS1zZXR1cCddO1xuXG4gICAgICBpZiAoaGFzQ2xhc3ModGFnLCAndmpzLWZpbGwnKSkge1xuICAgICAgICB0YWdPcHRpb25zLmZpbGwgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoaGFzQ2xhc3ModGFnLCAndmpzLWZsdWlkJykpIHtcbiAgICAgICAgdGFnT3B0aW9ucy5mbHVpZCA9IHRydWU7XG4gICAgICB9IC8vIENoZWNrIGlmIGRhdGEtc2V0dXAgYXR0ciBleGlzdHMuXG5cblxuICAgICAgaWYgKGRhdGFTZXR1cCAhPT0gbnVsbCkge1xuICAgICAgICAvLyBQYXJzZSBvcHRpb25zIEpTT05cbiAgICAgICAgLy8gSWYgZW1wdHkgc3RyaW5nLCBtYWtlIGl0IGEgcGFyc2FibGUganNvbiBvYmplY3QuXG4gICAgICAgIHZhciBfc2FmZVBhcnNlVHVwbGUgPSB0dXBsZShkYXRhU2V0dXAgfHwgJ3t9JyksXG4gICAgICAgICAgICBlcnIgPSBfc2FmZVBhcnNlVHVwbGVbMF0sXG4gICAgICAgICAgICBkYXRhID0gX3NhZmVQYXJzZVR1cGxlWzFdO1xuXG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBsb2cuZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFzc2lnbih0YWdPcHRpb25zLCBkYXRhKTtcbiAgICAgIH1cblxuICAgICAgYXNzaWduKGJhc2VPcHRpb25zLCB0YWdPcHRpb25zKTsgLy8gR2V0IHRhZyBjaGlsZHJlbiBzZXR0aW5nc1xuXG4gICAgICBpZiAodGFnLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSB0YWcuY2hpbGROb2RlcztcblxuICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldOyAvLyBDaGFuZ2UgY2FzZSBuZWVkZWQ6IGh0dHA6Ly9lam9obi5vcmcvYmxvZy9ub2RlbmFtZS1jYXNlLXNlbnNpdGl2aXR5L1xuXG4gICAgICAgICAgdmFyIGNoaWxkTmFtZSA9IGNoaWxkLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICBpZiAoY2hpbGROYW1lID09PSAnc291cmNlJykge1xuICAgICAgICAgICAgYmFzZU9wdGlvbnMuc291cmNlcy5wdXNoKGdldEF0dHJpYnV0ZXMoY2hpbGQpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNoaWxkTmFtZSA9PT0gJ3RyYWNrJykge1xuICAgICAgICAgICAgYmFzZU9wdGlvbnMudHJhY2tzLnB1c2goZ2V0QXR0cmlidXRlcyhjaGlsZCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYmFzZU9wdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZSB3aGV0aGVyIG9yIG5vdCBmbGV4Ym94IGlzIHN1cHBvcnRlZFxuICAgICAqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKiAgICAgICAgIC0gdHJ1ZSBpZiBmbGV4Ym94IGlzIHN1cHBvcnRlZFxuICAgICAqICAgICAgICAgLSBmYWxzZSBpZiBmbGV4Ym94IGlzIG5vdCBzdXBwb3J0ZWRcbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZmxleE5vdFN1cHBvcnRlZF8gPSBmdW5jdGlvbiBmbGV4Tm90U3VwcG9ydGVkXygpIHtcbiAgICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpOyAvLyBOb3RlOiBXZSBkb24ndCBhY3R1YWxseSB1c2UgZmxleEJhc2lzIChvciBmbGV4T3JkZXIpLCBidXQgaXQncyBvbmUgb2YgdGhlIG1vcmVcbiAgICAgIC8vIGNvbW1vbiBmbGV4IGZlYXR1cmVzIHRoYXQgd2UgY2FuIHJlbHkgb24gd2hlbiBjaGVja2luZyBmb3IgZmxleCBzdXBwb3J0LlxuXG4gICAgICByZXR1cm4gISgnZmxleEJhc2lzJyBpbiBlbGVtLnN0eWxlIHx8ICd3ZWJraXRGbGV4QmFzaXMnIGluIGVsZW0uc3R5bGUgfHwgJ21vekZsZXhCYXNpcycgaW4gZWxlbS5zdHlsZSB8fCAnbXNGbGV4QmFzaXMnIGluIGVsZW0uc3R5bGUgfHwgLy8gSUUxMC1zcGVjaWZpYyAoMjAxMiBmbGV4IHNwZWMpLCBhdmFpbGFibGUgZm9yIGNvbXBsZXRlbmVzc1xuICAgICAgJ21zRmxleE9yZGVyJyBpbiBlbGVtLnN0eWxlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBsYXllcjtcbiAgfShDb21wb25lbnQpO1xuICAvKipcbiAgICogR2V0IHRoZSB7QGxpbmsgVmlkZW9UcmFja0xpc3R9XG4gICAqIEBsaW5rIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCN2aWRlb3RyYWNrbGlzdFxuICAgKlxuICAgKiBAcmV0dXJuIHtWaWRlb1RyYWNrTGlzdH1cbiAgICogICAgICAgICB0aGUgY3VycmVudCB2aWRlbyB0cmFjayBsaXN0XG4gICAqXG4gICAqIEBtZXRob2QgUGxheWVyLnByb3RvdHlwZS52aWRlb1RyYWNrc1xuICAgKi9cblxuICAvKipcbiAgICogR2V0IHRoZSB7QGxpbmsgQXVkaW9UcmFja0xpc3R9XG4gICAqIEBsaW5rIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCNhdWRpb3RyYWNrbGlzdFxuICAgKlxuICAgKiBAcmV0dXJuIHtBdWRpb1RyYWNrTGlzdH1cbiAgICogICAgICAgICB0aGUgY3VycmVudCBhdWRpbyB0cmFjayBsaXN0XG4gICAqXG4gICAqIEBtZXRob2QgUGxheWVyLnByb3RvdHlwZS5hdWRpb1RyYWNrc1xuICAgKi9cblxuICAvKipcbiAgICogR2V0IHRoZSB7QGxpbmsgVGV4dFRyYWNrTGlzdH1cbiAgICpcbiAgICogQGxpbmsgaHR0cDovL3d3dy53My5vcmcvaHRtbC93Zy9kcmFmdHMvaHRtbC9tYXN0ZXIvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjZG9tLW1lZGlhLXRleHR0cmFja3NcbiAgICpcbiAgICogQHJldHVybiB7VGV4dFRyYWNrTGlzdH1cbiAgICogICAgICAgICB0aGUgY3VycmVudCB0ZXh0IHRyYWNrIGxpc3RcbiAgICpcbiAgICogQG1ldGhvZCBQbGF5ZXIucHJvdG90eXBlLnRleHRUcmFja3NcbiAgICovXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcmVtb3RlIHtAbGluayBUZXh0VHJhY2tMaXN0fVxuICAgKlxuICAgKiBAcmV0dXJuIHtUZXh0VHJhY2tMaXN0fVxuICAgKiAgICAgICAgIFRoZSBjdXJyZW50IHJlbW90ZSB0ZXh0IHRyYWNrIGxpc3RcbiAgICpcbiAgICogQG1ldGhvZCBQbGF5ZXIucHJvdG90eXBlLnJlbW90ZVRleHRUcmFja3NcbiAgICovXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcmVtb3RlIHtAbGluayBIdG1sVHJhY2tFbGVtZW50TGlzdH0gdHJhY2tzLlxuICAgKlxuICAgKiBAcmV0dXJuIHtIdG1sVHJhY2tFbGVtZW50TGlzdH1cbiAgICogICAgICAgICBUaGUgY3VycmVudCByZW1vdGUgdGV4dCB0cmFjayBlbGVtZW50IGxpc3RcbiAgICpcbiAgICogQG1ldGhvZCBQbGF5ZXIucHJvdG90eXBlLnJlbW90ZVRleHRUcmFja0Vsc1xuICAgKi9cblxuXG4gIEFMTC5uYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lJCQxKSB7XG4gICAgdmFyIHByb3BzID0gQUxMW25hbWUkJDFdO1xuXG4gICAgUGxheWVyLnByb3RvdHlwZVtwcm9wcy5nZXR0ZXJOYW1lXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLnRlY2hfKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlY2hfW3Byb3BzLmdldHRlck5hbWVdKCk7XG4gICAgICB9IC8vIGlmIHdlIGhhdmUgbm90IHlldCBsb2FkVGVjaF8sIHdlIGNyZWF0ZSB7dmlkZW8sYXVkaW8sdGV4dH1UcmFja3NfXG4gICAgICAvLyB0aGVzZSB3aWxsIGJlIHBhc3NlZCB0byB0aGUgdGVjaCBkdXJpbmcgbG9hZGluZ1xuXG5cbiAgICAgIHRoaXNbcHJvcHMucHJpdmF0ZU5hbWVdID0gdGhpc1twcm9wcy5wcml2YXRlTmFtZV0gfHwgbmV3IHByb3BzLkxpc3RDbGFzcygpO1xuICAgICAgcmV0dXJuIHRoaXNbcHJvcHMucHJpdmF0ZU5hbWVdO1xuICAgIH07XG4gIH0pO1xuICAvKipcbiAgICogR2xvYmFsIGVudW1lcmF0aW9uIG9mIHBsYXllcnMuXG4gICAqXG4gICAqIFRoZSBrZXlzIGFyZSB0aGUgcGxheWVyIElEcyBhbmQgdGhlIHZhbHVlcyBhcmUgZWl0aGVyIHRoZSB7QGxpbmsgUGxheWVyfVxuICAgKiBpbnN0YW5jZSBvciBgbnVsbGAgZm9yIGRpc3Bvc2VkIHBsYXllcnMuXG4gICAqXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuXG4gIFBsYXllci5wbGF5ZXJzID0ge307XG4gIHZhciBuYXZpZ2F0b3IgPSB3aW5kb3ckMS5uYXZpZ2F0b3I7XG4gIC8qXG4gICAqIFBsYXllciBpbnN0YW5jZSBvcHRpb25zLCBzdXJmYWNlZCB1c2luZyBvcHRpb25zXG4gICAqIG9wdGlvbnMgPSBQbGF5ZXIucHJvdG90eXBlLm9wdGlvbnNfXG4gICAqIE1ha2UgY2hhbmdlcyBpbiBvcHRpb25zLCBub3QgaGVyZS5cbiAgICpcbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgUGxheWVyLnByb3RvdHlwZS5vcHRpb25zXyA9IHtcbiAgICAvLyBEZWZhdWx0IG9yZGVyIG9mIGZhbGxiYWNrIHRlY2hub2xvZ3lcbiAgICB0ZWNoT3JkZXI6IFRlY2guZGVmYXVsdFRlY2hPcmRlcl8sXG4gICAgaHRtbDU6IHt9LFxuICAgIGZsYXNoOiB7fSxcbiAgICAvLyBkZWZhdWx0IGluYWN0aXZpdHkgdGltZW91dFxuICAgIGluYWN0aXZpdHlUaW1lb3V0OiAyMDAwLFxuICAgIC8vIGRlZmF1bHQgcGxheWJhY2sgcmF0ZXNcbiAgICBwbGF5YmFja1JhdGVzOiBbXSxcbiAgICAvLyBBZGQgcGxheWJhY2sgcmF0ZSBzZWxlY3Rpb24gYnkgYWRkaW5nIHJhdGVzXG4gICAgLy8gJ3BsYXliYWNrUmF0ZXMnOiBbMC41LCAxLCAxLjUsIDJdLFxuICAgIGxpdmV1aTogZmFsc2UsXG4gICAgLy8gSW5jbHVkZWQgY29udHJvbCBzZXRzXG4gICAgY2hpbGRyZW46IFsnbWVkaWFMb2FkZXInLCAncG9zdGVySW1hZ2UnLCAndGV4dFRyYWNrRGlzcGxheScsICdsb2FkaW5nU3Bpbm5lcicsICdiaWdQbGF5QnV0dG9uJywgJ2xpdmVUcmFja2VyJywgJ2NvbnRyb2xCYXInLCAnZXJyb3JEaXNwbGF5JywgJ3RleHRUcmFja1NldHRpbmdzJywgJ3Jlc2l6ZU1hbmFnZXInXSxcbiAgICBsYW5ndWFnZTogbmF2aWdhdG9yICYmIChuYXZpZ2F0b3IubGFuZ3VhZ2VzICYmIG5hdmlnYXRvci5sYW5ndWFnZXNbMF0gfHwgbmF2aWdhdG9yLnVzZXJMYW5ndWFnZSB8fCBuYXZpZ2F0b3IubGFuZ3VhZ2UpIHx8ICdlbicsXG4gICAgLy8gbG9jYWxlcyBhbmQgdGhlaXIgbGFuZ3VhZ2UgdHJhbnNsYXRpb25zXG4gICAgbGFuZ3VhZ2VzOiB7fSxcbiAgICAvLyBEZWZhdWx0IG1lc3NhZ2UgdG8gc2hvdyB3aGVuIGEgdmlkZW8gY2Fubm90IGJlIHBsYXllZC5cbiAgICBub3RTdXBwb3J0ZWRNZXNzYWdlOiAnTm8gY29tcGF0aWJsZSBzb3VyY2Ugd2FzIGZvdW5kIGZvciB0aGlzIG1lZGlhLicsXG4gICAgYnJlYWtwb2ludHM6IHt9LFxuICAgIHJlc3BvbnNpdmU6IGZhbHNlXG4gIH07XG4gIFtcbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHBsYXllciBpcyBpbiB0aGUgXCJlbmRlZFwiIHN0YXRlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIHRoZSBwbGF5ZXIgaXMgaW4gdGhlIGVuZGVkIHN0YXRlLCBmYWxzZSBpZiBub3QuXG4gICAqIEBtZXRob2QgUGxheWVyI2VuZGVkXG4gICAqL1xuICAnZW5kZWQnLFxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgcGxheWVyIGlzIGluIHRoZSBcInNlZWtpbmdcIiBzdGF0ZS5cbiAgICpcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgcGxheWVyIGlzIGluIHRoZSBzZWVraW5nIHN0YXRlLCBmYWxzZSBpZiBub3QuXG4gICAqIEBtZXRob2QgUGxheWVyI3NlZWtpbmdcbiAgICovXG4gICdzZWVraW5nJyxcbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIFRpbWVSYW5nZXMgb2YgdGhlIG1lZGlhIHRoYXQgYXJlIGN1cnJlbnRseSBhdmFpbGFibGVcbiAgICogZm9yIHNlZWtpbmcgdG8uXG4gICAqXG4gICAqIEByZXR1cm4ge1RpbWVSYW5nZXN9IHRoZSBzZWVrYWJsZSBpbnRlcnZhbHMgb2YgdGhlIG1lZGlhIHRpbWVsaW5lXG4gICAqIEBtZXRob2QgUGxheWVyI3NlZWthYmxlXG4gICAqL1xuICAnc2Vla2FibGUnLFxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY3VycmVudCBzdGF0ZSBvZiBuZXR3b3JrIGFjdGl2aXR5IGZvciB0aGUgZWxlbWVudCwgZnJvbVxuICAgKiB0aGUgY29kZXMgaW4gdGhlIGxpc3QgYmVsb3cuXG4gICAqIC0gTkVUV09SS19FTVBUWSAobnVtZXJpYyB2YWx1ZSAwKVxuICAgKiAgIFRoZSBlbGVtZW50IGhhcyBub3QgeWV0IGJlZW4gaW5pdGlhbGlzZWQuIEFsbCBhdHRyaWJ1dGVzIGFyZSBpblxuICAgKiAgIHRoZWlyIGluaXRpYWwgc3RhdGVzLlxuICAgKiAtIE5FVFdPUktfSURMRSAobnVtZXJpYyB2YWx1ZSAxKVxuICAgKiAgIFRoZSBlbGVtZW50J3MgcmVzb3VyY2Ugc2VsZWN0aW9uIGFsZ29yaXRobSBpcyBhY3RpdmUgYW5kIGhhc1xuICAgKiAgIHNlbGVjdGVkIGEgcmVzb3VyY2UsIGJ1dCBpdCBpcyBub3QgYWN0dWFsbHkgdXNpbmcgdGhlIG5ldHdvcmsgYXRcbiAgICogICB0aGlzIHRpbWUuXG4gICAqIC0gTkVUV09SS19MT0FESU5HIChudW1lcmljIHZhbHVlIDIpXG4gICAqICAgVGhlIHVzZXIgYWdlbnQgaXMgYWN0aXZlbHkgdHJ5aW5nIHRvIGRvd25sb2FkIGRhdGEuXG4gICAqIC0gTkVUV09SS19OT19TT1VSQ0UgKG51bWVyaWMgdmFsdWUgMylcbiAgICogICBUaGUgZWxlbWVudCdzIHJlc291cmNlIHNlbGVjdGlvbiBhbGdvcml0aG0gaXMgYWN0aXZlLCBidXQgaXQgaGFzXG4gICAqICAgbm90IHlldCBmb3VuZCBhIHJlc291cmNlIHRvIHVzZS5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9lbWJlZGRlZC1jb250ZW50Lmh0bWwjbmV0d29yay1zdGF0ZXNcbiAgICogQHJldHVybiB7bnVtYmVyfSB0aGUgY3VycmVudCBuZXR3b3JrIGFjdGl2aXR5IHN0YXRlXG4gICAqIEBtZXRob2QgUGxheWVyI25ldHdvcmtTdGF0ZVxuICAgKi9cbiAgJ25ldHdvcmtTdGF0ZScsXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgdmFsdWUgdGhhdCBleHByZXNzZXMgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGVsZW1lbnRcbiAgICogd2l0aCByZXNwZWN0IHRvIHJlbmRlcmluZyB0aGUgY3VycmVudCBwbGF5YmFjayBwb3NpdGlvbiwgZnJvbSB0aGVcbiAgICogY29kZXMgaW4gdGhlIGxpc3QgYmVsb3cuXG4gICAqIC0gSEFWRV9OT1RISU5HIChudW1lcmljIHZhbHVlIDApXG4gICAqICAgTm8gaW5mb3JtYXRpb24gcmVnYXJkaW5nIHRoZSBtZWRpYSByZXNvdXJjZSBpcyBhdmFpbGFibGUuXG4gICAqIC0gSEFWRV9NRVRBREFUQSAobnVtZXJpYyB2YWx1ZSAxKVxuICAgKiAgIEVub3VnaCBvZiB0aGUgcmVzb3VyY2UgaGFzIGJlZW4gb2J0YWluZWQgdGhhdCB0aGUgZHVyYXRpb24gb2YgdGhlXG4gICAqICAgcmVzb3VyY2UgaXMgYXZhaWxhYmxlLlxuICAgKiAtIEhBVkVfQ1VSUkVOVF9EQVRBIChudW1lcmljIHZhbHVlIDIpXG4gICAqICAgRGF0YSBmb3IgdGhlIGltbWVkaWF0ZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uIGlzIGF2YWlsYWJsZS5cbiAgICogLSBIQVZFX0ZVVFVSRV9EQVRBIChudW1lcmljIHZhbHVlIDMpXG4gICAqICAgRGF0YSBmb3IgdGhlIGltbWVkaWF0ZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uIGlzIGF2YWlsYWJsZSwgYXNcbiAgICogICB3ZWxsIGFzIGVub3VnaCBkYXRhIGZvciB0aGUgdXNlciBhZ2VudCB0byBhZHZhbmNlIHRoZSBjdXJyZW50XG4gICAqICAgcGxheWJhY2sgcG9zaXRpb24gaW4gdGhlIGRpcmVjdGlvbiBvZiBwbGF5YmFjay5cbiAgICogLSBIQVZFX0VOT1VHSF9EQVRBIChudW1lcmljIHZhbHVlIDQpXG4gICAqICAgVGhlIHVzZXIgYWdlbnQgZXN0aW1hdGVzIHRoYXQgZW5vdWdoIGRhdGEgaXMgYXZhaWxhYmxlIGZvclxuICAgKiAgIHBsYXliYWNrIHRvIHByb2NlZWQgdW5pbnRlcnJ1cHRlZC5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9lbWJlZGRlZC1jb250ZW50Lmh0bWwjZG9tLW1lZGlhLXJlYWR5c3RhdGVcbiAgICogQHJldHVybiB7bnVtYmVyfSB0aGUgY3VycmVudCBwbGF5YmFjayByZW5kZXJpbmcgc3RhdGVcbiAgICogQG1ldGhvZCBQbGF5ZXIjcmVhZHlTdGF0ZVxuICAgKi9cbiAgJ3JlYWR5U3RhdGUnXS5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgIFBsYXllci5wcm90b3R5cGVbZm5dID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMudGVjaEdldF8oZm4pO1xuICAgIH07XG4gIH0pO1xuICBURUNIX0VWRU5UU19SRVRSSUdHRVIuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBQbGF5ZXIucHJvdG90eXBlW1wiaGFuZGxlVGVjaFwiICsgdG9UaXRsZUNhc2UoZXZlbnQpICsgXCJfXCJdID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMudHJpZ2dlcihldmVudCk7XG4gICAgfTtcbiAgfSk7XG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuIHRoZSBwbGF5ZXIgaGFzIGluaXRpYWwgZHVyYXRpb24gYW5kIGRpbWVuc2lvbiBpbmZvcm1hdGlvblxuICAgKlxuICAgKiBAZXZlbnQgUGxheWVyI2xvYWRlZG1ldGFkYXRhXG4gICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICovXG5cbiAgLyoqXG4gICAqIEZpcmVkIHdoZW4gdGhlIHBsYXllciBoYXMgZG93bmxvYWRlZCBkYXRhIGF0IHRoZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uXG4gICAqXG4gICAqIEBldmVudCBQbGF5ZXIjbG9hZGVkZGF0YVxuICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAqL1xuXG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuIHRoZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uIGhhcyBjaGFuZ2VkICpcbiAgICogRHVyaW5nIHBsYXliYWNrIHRoaXMgaXMgZmlyZWQgZXZlcnkgMTUtMjUwIG1pbGxpc2Vjb25kcywgZGVwZW5kaW5nIG9uIHRoZVxuICAgKiBwbGF5YmFjayB0ZWNobm9sb2d5IGluIHVzZS5cbiAgICpcbiAgICogQGV2ZW50IFBsYXllciN0aW1ldXBkYXRlXG4gICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICovXG5cbiAgLyoqXG4gICAqIEZpcmVkIHdoZW4gdGhlIHZvbHVtZSBjaGFuZ2VzXG4gICAqXG4gICAqIEBldmVudCBQbGF5ZXIjdm9sdW1lY2hhbmdlXG4gICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICovXG5cbiAgLyoqXG4gICAqIFJlcG9ydHMgd2hldGhlciBvciBub3QgYSBwbGF5ZXIgaGFzIGEgcGx1Z2luIGF2YWlsYWJsZS5cbiAgICpcbiAgICogVGhpcyBkb2VzIG5vdCByZXBvcnQgd2hldGhlciBvciBub3QgdGhlIHBsdWdpbiBoYXMgZXZlciBiZWVuIGluaXRpYWxpemVkXG4gICAqIG9uIHRoaXMgcGxheWVyLiBGb3IgdGhhdCwgW3VzaW5nUGx1Z2luXXtAbGluayBQbGF5ZXIjdXNpbmdQbHVnaW59LlxuICAgKlxuICAgKiBAbWV0aG9kIFBsYXllciNoYXNQbHVnaW5cbiAgICogQHBhcmFtICB7c3RyaW5nfSAgbmFtZVxuICAgKiAgICAgICAgIFRoZSBuYW1lIG9mIGEgcGx1Z2luLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIFdoZXRoZXIgb3Igbm90IHRoaXMgcGxheWVyIGhhcyB0aGUgcmVxdWVzdGVkIHBsdWdpbiBhdmFpbGFibGUuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBSZXBvcnRzIHdoZXRoZXIgb3Igbm90IGEgcGxheWVyIGlzIHVzaW5nIGEgcGx1Z2luIGJ5IG5hbWUuXG4gICAqXG4gICAqIEZvciBiYXNpYyBwbHVnaW5zLCB0aGlzIG9ubHkgcmVwb3J0cyB3aGV0aGVyIHRoZSBwbHVnaW4gaGFzIF9ldmVyXyBiZWVuXG4gICAqIGluaXRpYWxpemVkIG9uIHRoaXMgcGxheWVyLlxuICAgKlxuICAgKiBAbWV0aG9kIFBsYXllciN1c2luZ1BsdWdpblxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWVcbiAgICogICAgICAgICBUaGUgbmFtZSBvZiBhIHBsdWdpbi5cbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICBXaGV0aGVyIG9yIG5vdCB0aGlzIHBsYXllciBpcyB1c2luZyB0aGUgcmVxdWVzdGVkIHBsdWdpbi5cbiAgICovXG5cbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdQbGF5ZXInLCBQbGF5ZXIpO1xuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBwbHVnaW4gbmFtZS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQGNvbnN0YW50XG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuXG4gIHZhciBCQVNFX1BMVUdJTl9OQU1FID0gJ3BsdWdpbic7XG4gIC8qKlxuICAgKiBUaGUga2V5IG9uIHdoaWNoIGEgcGxheWVyJ3MgYWN0aXZlIHBsdWdpbnMgY2FjaGUgaXMgc3RvcmVkLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAY29uc3RhbnRcbiAgICogQHR5cGUgICAgIHtzdHJpbmd9XG4gICAqL1xuXG4gIHZhciBQTFVHSU5fQ0FDSEVfS0VZID0gJ2FjdGl2ZVBsdWdpbnNfJztcbiAgLyoqXG4gICAqIFN0b3JlcyByZWdpc3RlcmVkIHBsdWdpbnMgaW4gYSBwcml2YXRlIHNwYWNlLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSAgICB7T2JqZWN0fVxuICAgKi9cblxuICB2YXIgcGx1Z2luU3RvcmFnZSA9IHt9O1xuICAvKipcbiAgICogUmVwb3J0cyB3aGV0aGVyIG9yIG5vdCBhIHBsdWdpbiBoYXMgYmVlbiByZWdpc3RlcmVkLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0gICB7c3RyaW5nfSBuYW1lXG4gICAqICAgICAgICAgIFRoZSBuYW1lIG9mIGEgcGx1Z2luLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgICBXaGV0aGVyIG9yIG5vdCB0aGUgcGx1Z2luIGhhcyBiZWVuIHJlZ2lzdGVyZWQuXG4gICAqL1xuXG4gIHZhciBwbHVnaW5FeGlzdHMgPSBmdW5jdGlvbiBwbHVnaW5FeGlzdHMobmFtZSkge1xuICAgIHJldHVybiBwbHVnaW5TdG9yYWdlLmhhc093blByb3BlcnR5KG5hbWUpO1xuICB9O1xuICAvKipcbiAgICogR2V0IGEgc2luZ2xlIHJlZ2lzdGVyZWQgcGx1Z2luIGJ5IG5hbWUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSAgIHtzdHJpbmd9IG5hbWVcbiAgICogICAgICAgICAgVGhlIG5hbWUgb2YgYSBwbHVnaW4uXG4gICAqXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAgICogICAgICAgICAgVGhlIHBsdWdpbiAob3IgdW5kZWZpbmVkKS5cbiAgICovXG5cblxuICB2YXIgZ2V0UGx1Z2luID0gZnVuY3Rpb24gZ2V0UGx1Z2luKG5hbWUpIHtcbiAgICByZXR1cm4gcGx1Z2luRXhpc3RzKG5hbWUpID8gcGx1Z2luU3RvcmFnZVtuYW1lXSA6IHVuZGVmaW5lZDtcbiAgfTtcbiAgLyoqXG4gICAqIE1hcmtzIGEgcGx1Z2luIGFzIFwiYWN0aXZlXCIgb24gYSBwbGF5ZXIuXG4gICAqXG4gICAqIEFsc28sIGVuc3VyZXMgdGhhdCB0aGUgcGxheWVyIGhhcyBhbiBvYmplY3QgZm9yIHRyYWNraW5nIGFjdGl2ZSBwbHVnaW5zLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0gICB7UGxheWVyfSBwbGF5ZXJcbiAgICogICAgICAgICAgQSBWaWRlby5qcyBwbGF5ZXIgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSAgIHtzdHJpbmd9IG5hbWVcbiAgICogICAgICAgICAgVGhlIG5hbWUgb2YgYSBwbHVnaW4uXG4gICAqL1xuXG5cbiAgdmFyIG1hcmtQbHVnaW5Bc0FjdGl2ZSA9IGZ1bmN0aW9uIG1hcmtQbHVnaW5Bc0FjdGl2ZShwbGF5ZXIsIG5hbWUpIHtcbiAgICBwbGF5ZXJbUExVR0lOX0NBQ0hFX0tFWV0gPSBwbGF5ZXJbUExVR0lOX0NBQ0hFX0tFWV0gfHwge307XG4gICAgcGxheWVyW1BMVUdJTl9DQUNIRV9LRVldW25hbWVdID0gdHJ1ZTtcbiAgfTtcbiAgLyoqXG4gICAqIFRyaWdnZXJzIGEgcGFpciBvZiBwbHVnaW4gc2V0dXAgZXZlbnRzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0gIHtQbGF5ZXJ9IHBsYXllclxuICAgKiAgICAgICAgIEEgVmlkZW8uanMgcGxheWVyIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0gIHtQbHVnaW5+UGx1Z2luRXZlbnRIYXNofSBoYXNoXG4gICAqICAgICAgICAgQSBwbHVnaW4gZXZlbnQgaGFzaC5cbiAgICpcbiAgICogQHBhcmFtICB7Ym9vbGVhbn0gW2JlZm9yZV1cbiAgICogICAgICAgICBJZiB0cnVlLCBwcmVmaXhlcyB0aGUgZXZlbnQgbmFtZSB3aXRoIFwiYmVmb3JlXCIuIEluIG90aGVyIHdvcmRzLFxuICAgKiAgICAgICAgIHVzZSB0aGlzIHRvIHRyaWdnZXIgXCJiZWZvcmVwbHVnaW5zZXR1cFwiIGluc3RlYWQgb2YgXCJwbHVnaW5zZXR1cFwiLlxuICAgKi9cblxuXG4gIHZhciB0cmlnZ2VyU2V0dXBFdmVudCA9IGZ1bmN0aW9uIHRyaWdnZXJTZXR1cEV2ZW50KHBsYXllciwgaGFzaCwgYmVmb3JlKSB7XG4gICAgdmFyIGV2ZW50TmFtZSA9IChiZWZvcmUgPyAnYmVmb3JlJyA6ICcnKSArICdwbHVnaW5zZXR1cCc7XG4gICAgcGxheWVyLnRyaWdnZXIoZXZlbnROYW1lLCBoYXNoKTtcbiAgICBwbGF5ZXIudHJpZ2dlcihldmVudE5hbWUgKyAnOicgKyBoYXNoLm5hbWUsIGhhc2gpO1xuICB9O1xuICAvKipcbiAgICogVGFrZXMgYSBiYXNpYyBwbHVnaW4gZnVuY3Rpb24gYW5kIHJldHVybnMgYSB3cmFwcGVyIGZ1bmN0aW9uIHdoaWNoIG1hcmtzXG4gICAqIG9uIHRoZSBwbGF5ZXIgdGhhdCB0aGUgcGx1Z2luIGhhcyBiZWVuIGFjdGl2YXRlZC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtICAge3N0cmluZ30gbmFtZVxuICAgKiAgICAgICAgICBUaGUgbmFtZSBvZiB0aGUgcGx1Z2luLlxuICAgKlxuICAgKiBAcGFyYW0gICB7RnVuY3Rpb259IHBsdWdpblxuICAgKiAgICAgICAgICBUaGUgYmFzaWMgcGx1Z2luLlxuICAgKlxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICogICAgICAgICAgQSB3cmFwcGVyIGZ1bmN0aW9uIGZvciB0aGUgZ2l2ZW4gcGx1Z2luLlxuICAgKi9cblxuXG4gIHZhciBjcmVhdGVCYXNpY1BsdWdpbiA9IGZ1bmN0aW9uIGNyZWF0ZUJhc2ljUGx1Z2luKG5hbWUsIHBsdWdpbikge1xuICAgIHZhciBiYXNpY1BsdWdpbldyYXBwZXIgPSBmdW5jdGlvbiBiYXNpY1BsdWdpbldyYXBwZXIoKSB7XG4gICAgICAvLyBXZSB0cmlnZ2VyIHRoZSBcImJlZm9yZXBsdWdpbnNldHVwXCIgYW5kIFwicGx1Z2luc2V0dXBcIiBldmVudHMgb24gdGhlIHBsYXllclxuICAgICAgLy8gcmVnYXJkbGVzcywgYnV0IHdlIHdhbnQgdGhlIGhhc2ggdG8gYmUgY29uc2lzdGVudCB3aXRoIHRoZSBoYXNoIHByb3ZpZGVkXG4gICAgICAvLyBmb3IgYWR2YW5jZWQgcGx1Z2lucy5cbiAgICAgIC8vXG4gICAgICAvLyBUaGUgb25seSBwb3RlbnRpYWxseSBjb3VudGVyLWludHVpdGl2ZSB0aGluZyBoZXJlIGlzIHRoZSBgaW5zdGFuY2VgIGluXG4gICAgICAvLyB0aGUgXCJwbHVnaW5zZXR1cFwiIGV2ZW50IGlzIHRoZSB2YWx1ZSByZXR1cm5lZCBieSB0aGUgYHBsdWdpbmAgZnVuY3Rpb24uXG4gICAgICB0cmlnZ2VyU2V0dXBFdmVudCh0aGlzLCB7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIHBsdWdpbjogcGx1Z2luLFxuICAgICAgICBpbnN0YW5jZTogbnVsbFxuICAgICAgfSwgdHJ1ZSk7XG4gICAgICB2YXIgaW5zdGFuY2UgPSBwbHVnaW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIG1hcmtQbHVnaW5Bc0FjdGl2ZSh0aGlzLCBuYW1lKTtcbiAgICAgIHRyaWdnZXJTZXR1cEV2ZW50KHRoaXMsIHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgcGx1Z2luOiBwbHVnaW4sXG4gICAgICAgIGluc3RhbmNlOiBpbnN0YW5jZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfTtcblxuICAgIE9iamVjdC5rZXlzKHBsdWdpbikuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgYmFzaWNQbHVnaW5XcmFwcGVyW3Byb3BdID0gcGx1Z2luW3Byb3BdO1xuICAgIH0pO1xuICAgIHJldHVybiBiYXNpY1BsdWdpbldyYXBwZXI7XG4gIH07XG4gIC8qKlxuICAgKiBUYWtlcyBhIHBsdWdpbiBzdWItY2xhc3MgYW5kIHJldHVybnMgYSBmYWN0b3J5IGZ1bmN0aW9uIGZvciBnZW5lcmF0aW5nXG4gICAqIGluc3RhbmNlcyBvZiBpdC5cbiAgICpcbiAgICogVGhpcyBmYWN0b3J5IGZ1bmN0aW9uIHdpbGwgcmVwbGFjZSBpdHNlbGYgd2l0aCBhbiBpbnN0YW5jZSBvZiB0aGUgcmVxdWVzdGVkXG4gICAqIHN1Yi1jbGFzcyBvZiBQbHVnaW4uXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSAgIHtzdHJpbmd9IG5hbWVcbiAgICogICAgICAgICAgVGhlIG5hbWUgb2YgdGhlIHBsdWdpbi5cbiAgICpcbiAgICogQHBhcmFtICAge1BsdWdpbn0gUGx1Z2luU3ViQ2xhc3NcbiAgICogICAgICAgICAgVGhlIGFkdmFuY2VkIHBsdWdpbi5cbiAgICpcbiAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAqL1xuXG5cbiAgdmFyIGNyZWF0ZVBsdWdpbkZhY3RvcnkgPSBmdW5jdGlvbiBjcmVhdGVQbHVnaW5GYWN0b3J5KG5hbWUsIFBsdWdpblN1YkNsYXNzKSB7XG4gICAgLy8gQWRkIGEgYG5hbWVgIHByb3BlcnR5IHRvIHRoZSBwbHVnaW4gcHJvdG90eXBlIHNvIHRoYXQgZWFjaCBwbHVnaW4gY2FuXG4gICAgLy8gcmVmZXIgdG8gaXRzZWxmIGJ5IG5hbWUuXG4gICAgUGx1Z2luU3ViQ2xhc3MucHJvdG90eXBlLm5hbWUgPSBuYW1lO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB0cmlnZ2VyU2V0dXBFdmVudCh0aGlzLCB7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIHBsdWdpbjogUGx1Z2luU3ViQ2xhc3MsXG4gICAgICAgIGluc3RhbmNlOiBudWxsXG4gICAgICB9LCB0cnVlKTtcblxuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICB9XG5cbiAgICAgIHZhciBpbnN0YW5jZSA9IF9jb25zdHJ1Y3QoUGx1Z2luU3ViQ2xhc3MsIFt0aGlzXS5jb25jYXQoYXJncykpOyAvLyBUaGUgcGx1Z2luIGlzIHJlcGxhY2VkIGJ5IGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBjdXJyZW50IGluc3RhbmNlLlxuXG5cbiAgICAgIHRoaXNbbmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICAgIH07XG5cbiAgICAgIHRyaWdnZXJTZXR1cEV2ZW50KHRoaXMsIGluc3RhbmNlLmdldEV2ZW50SGFzaCgpKTtcbiAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9O1xuICB9O1xuICAvKipcbiAgICogUGFyZW50IGNsYXNzIGZvciBhbGwgYWR2YW5jZWQgcGx1Z2lucy5cbiAgICpcbiAgICogQG1peGVzICAgbW9kdWxlOmV2ZW50ZWR+RXZlbnRlZE1peGluXG4gICAqIEBtaXhlcyAgIG1vZHVsZTpzdGF0ZWZ1bH5TdGF0ZWZ1bE1peGluXG4gICAqIEBmaXJlcyAgIFBsYXllciNiZWZvcmVwbHVnaW5zZXR1cFxuICAgKiBAZmlyZXMgICBQbGF5ZXIjYmVmb3JlcGx1Z2luc2V0dXA6JG5hbWVcbiAgICogQGZpcmVzICAgUGxheWVyI3BsdWdpbnNldHVwXG4gICAqIEBmaXJlcyAgIFBsYXllciNwbHVnaW5zZXR1cDokbmFtZVxuICAgKiBAbGlzdGVucyBQbGF5ZXIjZGlzcG9zZVxuICAgKiBAdGhyb3dzICB7RXJyb3J9XG4gICAqICAgICAgICAgIElmIGF0dGVtcHRpbmcgdG8gaW5zdGFudGlhdGUgdGhlIGJhc2Uge0BsaW5rIFBsdWdpbn0gY2xhc3NcbiAgICogICAgICAgICAgZGlyZWN0bHkgaW5zdGVhZCBvZiB2aWEgYSBzdWItY2xhc3MuXG4gICAqL1xuXG5cbiAgdmFyIFBsdWdpbiA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKlxuICAgICAqIFN1Yi1jbGFzc2VzIHNob3VsZCBjYWxsIGBzdXBlcmAgdG8gZW5zdXJlIHBsdWdpbnMgYXJlIHByb3Blcmx5IGluaXRpYWxpemVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgICAqICAgICAgICBBIFZpZGVvLmpzIHBsYXllciBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQbHVnaW4ocGxheWVyKSB7XG4gICAgICBpZiAodGhpcy5jb25zdHJ1Y3RvciA9PT0gUGx1Z2luKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUGx1Z2luIG11c3QgYmUgc3ViLWNsYXNzZWQ7IG5vdCBkaXJlY3RseSBpbnN0YW50aWF0ZWQuJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucGxheWVyID0gcGxheWVyOyAvLyBNYWtlIHRoaXMgb2JqZWN0IGV2ZW50ZWQsIGJ1dCByZW1vdmUgdGhlIGFkZGVkIGB0cmlnZ2VyYCBtZXRob2Qgc28gd2VcbiAgICAgIC8vIHVzZSB0aGUgcHJvdG90eXBlIHZlcnNpb24gaW5zdGVhZC5cblxuICAgICAgZXZlbnRlZCh0aGlzKTtcbiAgICAgIGRlbGV0ZSB0aGlzLnRyaWdnZXI7XG4gICAgICBzdGF0ZWZ1bCh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRTdGF0ZSk7XG4gICAgICBtYXJrUGx1Z2luQXNBY3RpdmUocGxheWVyLCB0aGlzLm5hbWUpOyAvLyBBdXRvLWJpbmQgdGhlIGRpc3Bvc2UgbWV0aG9kIHNvIHdlIGNhbiB1c2UgaXQgYXMgYSBsaXN0ZW5lciBhbmQgdW5iaW5kXG4gICAgICAvLyBpdCBsYXRlciBlYXNpbHkuXG5cbiAgICAgIHRoaXMuZGlzcG9zZSA9IGJpbmQodGhpcywgdGhpcy5kaXNwb3NlKTsgLy8gSWYgdGhlIHBsYXllciBpcyBkaXNwb3NlZCwgZGlzcG9zZSB0aGUgcGx1Z2luLlxuXG4gICAgICBwbGF5ZXIub24oJ2Rpc3Bvc2UnLCB0aGlzLmRpc3Bvc2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZlcnNpb24gb2YgdGhlIHBsdWdpbiB0aGF0IHdhcyBzZXQgb24gPHBsdWdpbk5hbWU+LlZFUlNJT05cbiAgICAgKi9cblxuXG4gICAgdmFyIF9wcm90byA9IFBsdWdpbi5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8udmVyc2lvbiA9IGZ1bmN0aW9uIHZlcnNpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5WRVJTSU9OO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFYWNoIGV2ZW50IHRyaWdnZXJlZCBieSBwbHVnaW5zIGluY2x1ZGVzIGEgaGFzaCBvZiBhZGRpdGlvbmFsIGRhdGEgd2l0aFxuICAgICAqIGNvbnZlbnRpb25hbCBwcm9wZXJ0aWVzLlxuICAgICAqXG4gICAgICogVGhpcyByZXR1cm5zIHRoYXQgb2JqZWN0IG9yIG11dGF0ZXMgYW4gZXhpc3RpbmcgaGFzaC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAgIHtPYmplY3R9IFtoYXNoPXt9XVxuICAgICAqICAgICAgICAgIEFuIG9iamVjdCB0byBiZSB1c2VkIGFzIGV2ZW50IGFuIGV2ZW50IGhhc2guXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQbHVnaW5+UGx1Z2luRXZlbnRIYXNofVxuICAgICAqICAgICAgICAgIEFuIGV2ZW50IGhhc2ggb2JqZWN0IHdpdGggcHJvdmlkZWQgcHJvcGVydGllcyBtaXhlZC1pbi5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBfcHJvdG8uZ2V0RXZlbnRIYXNoID0gZnVuY3Rpb24gZ2V0RXZlbnRIYXNoKGhhc2gpIHtcbiAgICAgIGlmIChoYXNoID09PSB2b2lkIDApIHtcbiAgICAgICAgaGFzaCA9IHt9O1xuICAgICAgfVxuXG4gICAgICBoYXNoLm5hbWUgPSB0aGlzLm5hbWU7XG4gICAgICBoYXNoLnBsdWdpbiA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICBoYXNoLmluc3RhbmNlID0gdGhpcztcbiAgICAgIHJldHVybiBoYXNoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VycyBhbiBldmVudCBvbiB0aGUgcGx1Z2luIG9iamVjdCBhbmQgb3ZlcnJpZGVzXG4gICAgICoge0BsaW5rIG1vZHVsZTpldmVudGVkfkV2ZW50ZWRNaXhpbi50cmlnZ2VyfEV2ZW50ZWRNaXhpbi50cmlnZ2VyfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAgIHtzdHJpbmd8T2JqZWN0fSBldmVudFxuICAgICAqICAgICAgICAgIEFuIGV2ZW50IHR5cGUgb3IgYW4gb2JqZWN0IHdpdGggYSB0eXBlIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtICAge09iamVjdH0gW2hhc2g9e31dXG4gICAgICogICAgICAgICAgQWRkaXRpb25hbCBkYXRhIGhhc2ggdG8gbWVyZ2Ugd2l0aCBhXG4gICAgICogICAgICAgICAge0BsaW5rIFBsdWdpbn5QbHVnaW5FdmVudEhhc2h8UGx1Z2luRXZlbnRIYXNofS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICogICAgICAgICAgV2hldGhlciBvciBub3QgZGVmYXVsdCB3YXMgcHJldmVudGVkLlxuICAgICAqL1xuICAgIDtcblxuICAgIF9wcm90by50cmlnZ2VyID0gZnVuY3Rpb24gdHJpZ2dlciQkMShldmVudCwgaGFzaCkge1xuICAgICAgaWYgKGhhc2ggPT09IHZvaWQgMCkge1xuICAgICAgICBoYXNoID0ge307XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cmlnZ2VyKHRoaXMuZXZlbnRCdXNFbF8sIGV2ZW50LCB0aGlzLmdldEV2ZW50SGFzaChoYXNoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgXCJzdGF0ZWNoYW5nZWRcIiBldmVudHMgb24gdGhlIHBsdWdpbi4gTm8tb3AgYnkgZGVmYXVsdCwgb3ZlcnJpZGUgYnlcbiAgICAgKiBzdWJjbGFzc2luZy5cbiAgICAgKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSAgICB7RXZlbnR9IGVcbiAgICAgKiAgICAgICAgICAgQW4gZXZlbnQgb2JqZWN0IHByb3ZpZGVkIGJ5IGEgXCJzdGF0ZWNoYW5nZWRcIiBldmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAgICB7T2JqZWN0fSBlLmNoYW5nZXNcbiAgICAgKiAgICAgICAgICAgQW4gb2JqZWN0IGRlc2NyaWJpbmcgY2hhbmdlcyB0aGF0IG9jY3VycmVkIHdpdGggdGhlIFwic3RhdGVjaGFuZ2VkXCJcbiAgICAgKiAgICAgICAgICAgZXZlbnQuXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmhhbmRsZVN0YXRlQ2hhbmdlZCA9IGZ1bmN0aW9uIGhhbmRsZVN0YXRlQ2hhbmdlZChlKSB7fVxuICAgIC8qKlxuICAgICAqIERpc3Bvc2VzIGEgcGx1Z2luLlxuICAgICAqXG4gICAgICogU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGUgdGhpcyBpZiB0aGV5IHdhbnQsIGJ1dCBmb3IgdGhlIHNha2Ugb2Ygc2FmZXR5LFxuICAgICAqIGl0J3MgcHJvYmFibHkgYmVzdCB0byBzdWJzY3JpYmUgdGhlIFwiZGlzcG9zZVwiIGV2ZW50LlxuICAgICAqXG4gICAgICogQGZpcmVzIFBsdWdpbiNkaXNwb3NlXG4gICAgICovXG4gICAgO1xuXG4gICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgdmFyIG5hbWUgPSB0aGlzLm5hbWUsXG4gICAgICAgICAgcGxheWVyID0gdGhpcy5wbGF5ZXI7XG4gICAgICAvKipcbiAgICAgICAqIFNpZ25hbHMgdGhhdCBhIGFkdmFuY2VkIHBsdWdpbiBpcyBhYm91dCB0byBiZSBkaXNwb3NlZC5cbiAgICAgICAqXG4gICAgICAgKiBAZXZlbnQgUGx1Z2luI2Rpc3Bvc2VcbiAgICAgICAqIEB0eXBlICB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgKi9cblxuICAgICAgdGhpcy50cmlnZ2VyKCdkaXNwb3NlJyk7XG4gICAgICB0aGlzLm9mZigpO1xuICAgICAgcGxheWVyLm9mZignZGlzcG9zZScsIHRoaXMuZGlzcG9zZSk7IC8vIEVsaW1pbmF0ZSBhbnkgcG9zc2libGUgc291cmNlcyBvZiBsZWFraW5nIG1lbW9yeSBieSBjbGVhcmluZyB1cFxuICAgICAgLy8gcmVmZXJlbmNlcyBiZXR3ZWVuIHRoZSBwbGF5ZXIgYW5kIHRoZSBwbHVnaW4gaW5zdGFuY2UgYW5kIG51bGxpbmcgb3V0XG4gICAgICAvLyB0aGUgcGx1Z2luJ3Mgc3RhdGUgYW5kIHJlcGxhY2luZyBtZXRob2RzIHdpdGggYSBmdW5jdGlvbiB0aGF0IHRocm93cy5cblxuICAgICAgcGxheWVyW1BMVUdJTl9DQUNIRV9LRVldW25hbWVdID0gZmFsc2U7XG4gICAgICB0aGlzLnBsYXllciA9IHRoaXMuc3RhdGUgPSBudWxsOyAvLyBGaW5hbGx5LCByZXBsYWNlIHRoZSBwbHVnaW4gbmFtZSBvbiB0aGUgcGxheWVyIHdpdGggYSBuZXcgZmFjdG9yeVxuICAgICAgLy8gZnVuY3Rpb24sIHNvIHRoYXQgdGhlIHBsdWdpbiBpcyByZWFkeSB0byBiZSBzZXQgdXAgYWdhaW4uXG5cbiAgICAgIHBsYXllcltuYW1lXSA9IGNyZWF0ZVBsdWdpbkZhY3RvcnkobmFtZSwgcGx1Z2luU3RvcmFnZVtuYW1lXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgYSBwbHVnaW4gaXMgYSBiYXNpYyBwbHVnaW4gKGkuZS4gbm90IGEgc3ViLWNsYXNzIG9mIGBQbHVnaW5gKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAgIHtzdHJpbmd8RnVuY3Rpb259IHBsdWdpblxuICAgICAqICAgICAgICAgIElmIGEgc3RyaW5nLCBtYXRjaGVzIHRoZSBuYW1lIG9mIGEgcGx1Z2luLiBJZiBhIGZ1bmN0aW9uLCB3aWxsIGJlXG4gICAgICogICAgICAgICAgdGVzdGVkIGRpcmVjdGx5LlxuICAgICAqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKiAgICAgICAgICBXaGV0aGVyIG9yIG5vdCBhIHBsdWdpbiBpcyBhIGJhc2ljIHBsdWdpbi5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBQbHVnaW4uaXNCYXNpYyA9IGZ1bmN0aW9uIGlzQmFzaWMocGx1Z2luKSB7XG4gICAgICB2YXIgcCA9IHR5cGVvZiBwbHVnaW4gPT09ICdzdHJpbmcnID8gZ2V0UGx1Z2luKHBsdWdpbikgOiBwbHVnaW47XG4gICAgICByZXR1cm4gdHlwZW9mIHAgPT09ICdmdW5jdGlvbicgJiYgIVBsdWdpbi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihwLnByb3RvdHlwZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgVmlkZW8uanMgcGx1Z2luLlxuICAgICAqXG4gICAgICogQHBhcmFtICAge3N0cmluZ30gbmFtZVxuICAgICAqICAgICAgICAgIFRoZSBuYW1lIG9mIHRoZSBwbHVnaW4gdG8gYmUgcmVnaXN0ZXJlZC4gTXVzdCBiZSBhIHN0cmluZyBhbmRcbiAgICAgKiAgICAgICAgICBtdXN0IG5vdCBtYXRjaCBhbiBleGlzdGluZyBwbHVnaW4gb3IgYSBtZXRob2Qgb24gdGhlIGBQbGF5ZXJgXG4gICAgICogICAgICAgICAgcHJvdG90eXBlLlxuICAgICAqXG4gICAgICogQHBhcmFtICAge0Z1bmN0aW9ufSBwbHVnaW5cbiAgICAgKiAgICAgICAgICBBIHN1Yi1jbGFzcyBvZiBgUGx1Z2luYCBvciBhIGZ1bmN0aW9uIGZvciBiYXNpYyBwbHVnaW5zLlxuICAgICAqXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICogICAgICAgICAgRm9yIGFkdmFuY2VkIHBsdWdpbnMsIGEgZmFjdG9yeSBmdW5jdGlvbiBmb3IgdGhhdCBwbHVnaW4uIEZvclxuICAgICAqICAgICAgICAgIGJhc2ljIHBsdWdpbnMsIGEgd3JhcHBlciBmdW5jdGlvbiB0aGF0IGluaXRpYWxpemVzIHRoZSBwbHVnaW4uXG4gICAgICovXG4gICAgO1xuXG4gICAgUGx1Z2luLnJlZ2lzdGVyUGx1Z2luID0gZnVuY3Rpb24gcmVnaXN0ZXJQbHVnaW4obmFtZSwgcGx1Z2luKSB7XG4gICAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIklsbGVnYWwgcGx1Z2luIG5hbWUsIFxcXCJcIiArIG5hbWUgKyBcIlxcXCIsIG11c3QgYmUgYSBzdHJpbmcsIHdhcyBcIiArIHR5cGVvZiBuYW1lICsgXCIuXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAocGx1Z2luRXhpc3RzKG5hbWUpKSB7XG4gICAgICAgIGxvZy53YXJuKFwiQSBwbHVnaW4gbmFtZWQgXFxcIlwiICsgbmFtZSArIFwiXFxcIiBhbHJlYWR5IGV4aXN0cy4gWW91IG1heSB3YW50IHRvIGF2b2lkIHJlLXJlZ2lzdGVyaW5nIHBsdWdpbnMhXCIpO1xuICAgICAgfSBlbHNlIGlmIChQbGF5ZXIucHJvdG90eXBlLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIklsbGVnYWwgcGx1Z2luIG5hbWUsIFxcXCJcIiArIG5hbWUgKyBcIlxcXCIsIGNhbm5vdCBzaGFyZSBhIG5hbWUgd2l0aCBhbiBleGlzdGluZyBwbGF5ZXIgbWV0aG9kIVwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBwbHVnaW4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSWxsZWdhbCBwbHVnaW4gZm9yIFxcXCJcIiArIG5hbWUgKyBcIlxcXCIsIG11c3QgYmUgYSBmdW5jdGlvbiwgd2FzIFwiICsgdHlwZW9mIHBsdWdpbiArIFwiLlwiKTtcbiAgICAgIH1cblxuICAgICAgcGx1Z2luU3RvcmFnZVtuYW1lXSA9IHBsdWdpbjsgLy8gQWRkIGEgcGxheWVyIHByb3RvdHlwZSBtZXRob2QgZm9yIGFsbCBzdWItY2xhc3NlZCBwbHVnaW5zIChidXQgbm90IGZvclxuICAgICAgLy8gdGhlIGJhc2UgUGx1Z2luIGNsYXNzKS5cblxuICAgICAgaWYgKG5hbWUgIT09IEJBU0VfUExVR0lOX05BTUUpIHtcbiAgICAgICAgaWYgKFBsdWdpbi5pc0Jhc2ljKHBsdWdpbikpIHtcbiAgICAgICAgICBQbGF5ZXIucHJvdG90eXBlW25hbWVdID0gY3JlYXRlQmFzaWNQbHVnaW4obmFtZSwgcGx1Z2luKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBQbGF5ZXIucHJvdG90eXBlW25hbWVdID0gY3JlYXRlUGx1Z2luRmFjdG9yeShuYW1lLCBwbHVnaW4pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwbHVnaW47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlLXJlZ2lzdGVyIGEgVmlkZW8uanMgcGx1Z2luLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBuYW1lXG4gICAgICogICAgICAgICBUaGUgbmFtZSBvZiB0aGUgcGx1Z2luIHRvIGJlIGRlLXJlZ2lzdGVyZWQuIE11c3QgYmUgYSBzdHJpbmcgdGhhdFxuICAgICAqICAgICAgICAgbWF0Y2hlcyBhbiBleGlzdGluZyBwbHVnaW4uXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn1cbiAgICAgKiAgICAgICAgIElmIGFuIGF0dGVtcHQgaXMgbWFkZSB0byBkZS1yZWdpc3RlciB0aGUgYmFzZSBwbHVnaW4uXG4gICAgICovXG4gICAgO1xuXG4gICAgUGx1Z2luLmRlcmVnaXN0ZXJQbHVnaW4gPSBmdW5jdGlvbiBkZXJlZ2lzdGVyUGx1Z2luKG5hbWUpIHtcbiAgICAgIGlmIChuYW1lID09PSBCQVNFX1BMVUdJTl9OQU1FKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGRlLXJlZ2lzdGVyIGJhc2UgcGx1Z2luLicpO1xuICAgICAgfVxuXG4gICAgICBpZiAocGx1Z2luRXhpc3RzKG5hbWUpKSB7XG4gICAgICAgIGRlbGV0ZSBwbHVnaW5TdG9yYWdlW25hbWVdO1xuICAgICAgICBkZWxldGUgUGxheWVyLnByb3RvdHlwZVtuYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBhbiBvYmplY3QgY29udGFpbmluZyBtdWx0aXBsZSBWaWRlby5qcyBwbHVnaW5zLlxuICAgICAqXG4gICAgICogQHBhcmFtICAge0FycmF5fSBbbmFtZXNdXG4gICAgICogICAgICAgICAgSWYgcHJvdmlkZWQsIHNob3VsZCBiZSBhbiBhcnJheSBvZiBwbHVnaW4gbmFtZXMuIERlZmF1bHRzIHRvIF9hbGxfXG4gICAgICogICAgICAgICAgcGx1Z2luIG5hbWVzLlxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cbiAgICAgKiAgICAgICAgICBBbiBvYmplY3QgY29udGFpbmluZyBwbHVnaW4ocykgYXNzb2NpYXRlZCB3aXRoIHRoZWlyIG5hbWUocykgb3JcbiAgICAgKiAgICAgICAgICBgdW5kZWZpbmVkYCBpZiBubyBtYXRjaGluZyBwbHVnaW5zIGV4aXN0KS5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBQbHVnaW4uZ2V0UGx1Z2lucyA9IGZ1bmN0aW9uIGdldFBsdWdpbnMobmFtZXMpIHtcbiAgICAgIGlmIChuYW1lcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIG5hbWVzID0gT2JqZWN0LmtleXMocGx1Z2luU3RvcmFnZSk7XG4gICAgICB9XG5cbiAgICAgIHZhciByZXN1bHQ7XG4gICAgICBuYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBwbHVnaW4gPSBnZXRQbHVnaW4obmFtZSk7XG5cbiAgICAgICAgaWYgKHBsdWdpbikge1xuICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCB8fCB7fTtcbiAgICAgICAgICByZXN1bHRbbmFtZV0gPSBwbHVnaW47XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBhIHBsdWdpbidzIHZlcnNpb24sIGlmIGF2YWlsYWJsZVxuICAgICAqXG4gICAgICogQHBhcmFtICAge3N0cmluZ30gbmFtZVxuICAgICAqICAgICAgICAgIFRoZSBuYW1lIG9mIGEgcGx1Z2luLlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqICAgICAgICAgIFRoZSBwbHVnaW4ncyB2ZXJzaW9uIG9yIGFuIGVtcHR5IHN0cmluZy5cbiAgICAgKi9cbiAgICA7XG5cbiAgICBQbHVnaW4uZ2V0UGx1Z2luVmVyc2lvbiA9IGZ1bmN0aW9uIGdldFBsdWdpblZlcnNpb24obmFtZSkge1xuICAgICAgdmFyIHBsdWdpbiA9IGdldFBsdWdpbihuYW1lKTtcbiAgICAgIHJldHVybiBwbHVnaW4gJiYgcGx1Z2luLlZFUlNJT04gfHwgJyc7XG4gICAgfTtcblxuICAgIHJldHVybiBQbHVnaW47XG4gIH0oKTtcbiAgLyoqXG4gICAqIEdldHMgYSBwbHVnaW4gYnkgbmFtZSBpZiBpdCBleGlzdHMuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1ldGhvZCAgIGdldFBsdWdpblxuICAgKiBAbWVtYmVyT2YgUGx1Z2luXG4gICAqIEBwYXJhbSAgICB7c3RyaW5nfSBuYW1lXG4gICAqICAgICAgICAgICBUaGUgbmFtZSBvZiBhIHBsdWdpbi5cbiAgICpcbiAgICogQHJldHVybnMgIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gICAqICAgICAgICAgICBUaGUgcGx1Z2luIChvciBgdW5kZWZpbmVkYCkuXG4gICAqL1xuXG5cbiAgUGx1Z2luLmdldFBsdWdpbiA9IGdldFBsdWdpbjtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBiYXNlIHBsdWdpbiBjbGFzcyBhcyBpdCBpcyByZWdpc3RlcmVkLlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cblxuICBQbHVnaW4uQkFTRV9QTFVHSU5fTkFNRSA9IEJBU0VfUExVR0lOX05BTUU7XG4gIFBsdWdpbi5yZWdpc3RlclBsdWdpbihCQVNFX1BMVUdJTl9OQU1FLCBQbHVnaW4pO1xuICAvKipcbiAgICogRG9jdW1lbnRlZCBpbiBwbGF5ZXIuanNcbiAgICpcbiAgICogQGlnbm9yZVxuICAgKi9cblxuICBQbGF5ZXIucHJvdG90eXBlLnVzaW5nUGx1Z2luID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICByZXR1cm4gISF0aGlzW1BMVUdJTl9DQUNIRV9LRVldICYmIHRoaXNbUExVR0lOX0NBQ0hFX0tFWV1bbmFtZV0gPT09IHRydWU7XG4gIH07XG4gIC8qKlxuICAgKiBEb2N1bWVudGVkIGluIHBsYXllci5qc1xuICAgKlxuICAgKiBAaWdub3JlXG4gICAqL1xuXG5cbiAgUGxheWVyLnByb3RvdHlwZS5oYXNQbHVnaW4gPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHJldHVybiAhIXBsdWdpbkV4aXN0cyhuYW1lKTtcbiAgfTtcbiAgLyoqXG4gICAqIFNpZ25hbHMgdGhhdCBhIHBsdWdpbiBpcyBhYm91dCB0byBiZSBzZXQgdXAgb24gYSBwbGF5ZXIuXG4gICAqXG4gICAqIEBldmVudCAgICBQbGF5ZXIjYmVmb3JlcGx1Z2luc2V0dXBcbiAgICogQHR5cGUgICAgIHtQbHVnaW5+UGx1Z2luRXZlbnRIYXNofVxuICAgKi9cblxuICAvKipcbiAgICogU2lnbmFscyB0aGF0IGEgcGx1Z2luIGlzIGFib3V0IHRvIGJlIHNldCB1cCBvbiBhIHBsYXllciAtIGJ5IG5hbWUuIFRoZSBuYW1lXG4gICAqIGlzIHRoZSBuYW1lIG9mIHRoZSBwbHVnaW4uXG4gICAqXG4gICAqIEBldmVudCAgICBQbGF5ZXIjYmVmb3JlcGx1Z2luc2V0dXA6JG5hbWVcbiAgICogQHR5cGUgICAgIHtQbHVnaW5+UGx1Z2luRXZlbnRIYXNofVxuICAgKi9cblxuICAvKipcbiAgICogU2lnbmFscyB0aGF0IGEgcGx1Z2luIGhhcyBqdXN0IGJlZW4gc2V0IHVwIG9uIGEgcGxheWVyLlxuICAgKlxuICAgKiBAZXZlbnQgICAgUGxheWVyI3BsdWdpbnNldHVwXG4gICAqIEB0eXBlICAgICB7UGx1Z2luflBsdWdpbkV2ZW50SGFzaH1cbiAgICovXG5cbiAgLyoqXG4gICAqIFNpZ25hbHMgdGhhdCBhIHBsdWdpbiBoYXMganVzdCBiZWVuIHNldCB1cCBvbiBhIHBsYXllciAtIGJ5IG5hbWUuIFRoZSBuYW1lXG4gICAqIGlzIHRoZSBuYW1lIG9mIHRoZSBwbHVnaW4uXG4gICAqXG4gICAqIEBldmVudCAgICBQbGF5ZXIjcGx1Z2luc2V0dXA6JG5hbWVcbiAgICogQHR5cGUgICAgIHtQbHVnaW5+UGx1Z2luRXZlbnRIYXNofVxuICAgKi9cblxuICAvKipcbiAgICogQHR5cGVkZWYgIHtPYmplY3R9IFBsdWdpbn5QbHVnaW5FdmVudEhhc2hcbiAgICpcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IGluc3RhbmNlXG4gICAqICAgICAgICAgICBGb3IgYmFzaWMgcGx1Z2lucywgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgcGx1Z2luIGZ1bmN0aW9uLiBGb3JcbiAgICogICAgICAgICAgIGFkdmFuY2VkIHBsdWdpbnMsIHRoZSBwbHVnaW4gaW5zdGFuY2Ugb24gd2hpY2ggdGhlIGV2ZW50IGlzIGZpcmVkLlxuICAgKlxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gbmFtZVxuICAgKiAgICAgICAgICAgVGhlIG5hbWUgb2YgdGhlIHBsdWdpbi5cbiAgICpcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IHBsdWdpblxuICAgKiAgICAgICAgICAgRm9yIGJhc2ljIHBsdWdpbnMsIHRoZSBwbHVnaW4gZnVuY3Rpb24uIEZvciBhZHZhbmNlZCBwbHVnaW5zLCB0aGVcbiAgICogICAgICAgICAgIHBsdWdpbiBjbGFzcy9jb25zdHJ1Y3Rvci5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBmaWxlIGV4dGVuZC5qc1xuICAgKiBAbW9kdWxlIGV4dGVuZFxuICAgKi9cblxuICAvKipcbiAgICogQSBjb21iaW5hdGlvbiBvZiBub2RlIGluaGVyaXRzIGFuZCBiYWJlbCdzIGluaGVyaXRzIChhZnRlciB0cmFuc3BpbGUpLlxuICAgKiBCb3RoIHdvcmsgdGhlIHNhbWUgYnV0IG5vZGUgYWRkcyBgc3VwZXJfYCB0byB0aGUgc3ViQ2xhc3NcbiAgICogYW5kIEJhYmxlIGFkZHMgdGhlIHN1cGVyQ2xhc3MgYXMgX19wcm90b19fLiBCb3RoIHNlZW0gdXNlZnVsLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gc3ViQ2xhc3NcbiAgICogICAgICAgIFRoZSBjbGFzcyB0byBpbmhlcml0IHRvXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzdXBlckNsYXNzXG4gICAqICAgICAgICBUaGUgY2xhc3MgdG8gaW5oZXJpdCBmcm9tXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB2YXIgX2luaGVyaXRzJDEgPSBmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpO1xuICAgIH1cblxuICAgIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHN1cGVyQ2xhc3MpIHtcbiAgICAgIC8vIG5vZGVcbiAgICAgIHN1YkNsYXNzLnN1cGVyXyA9IHN1cGVyQ2xhc3M7XG4gICAgfVxuICB9O1xuICAvKipcbiAgICogVXNlZCB0byBzdWJjbGFzcyBhbiBleGlzdGluZyBjbGFzcyBieSBlbXVsYXRpbmcgRVMgc3ViY2xhc3NpbmcgdXNpbmcgdGhlXG4gICAqIGBleHRlbmRzYCBrZXl3b3JkLlxuICAgKlxuICAgKiBAZnVuY3Rpb25cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIE15Q29tcG9uZW50ID0gdmlkZW9qcy5leHRlbmQodmlkZW9qcy5nZXRDb21wb25lbnQoJ0NvbXBvbmVudCcpLCB7XG4gICAqICAgbXlDdXN0b21NZXRob2Q6IGZ1bmN0aW9uKCkge1xuICAgKiAgICAgLy8gRG8gdGhpbmdzIGluIG15IG1ldGhvZC5cbiAgICogICB9XG4gICAqIH0pO1xuICAgKlxuICAgKiBAcGFyYW0gICAge0Z1bmN0aW9ufSBzdXBlckNsYXNzXG4gICAqICAgICAgICAgICBUaGUgY2xhc3MgdG8gaW5oZXJpdCBmcm9tXG4gICAqXG4gICAqIEBwYXJhbSAgICB7T2JqZWN0fSAgIFtzdWJDbGFzc01ldGhvZHM9e31dXG4gICAqICAgICAgICAgICBNZXRob2RzIG9mIHRoZSBuZXcgY2xhc3NcbiAgICpcbiAgICogQHJldHVybiAgIHtGdW5jdGlvbn1cbiAgICogICAgICAgICAgIFRoZSBuZXcgY2xhc3Mgd2l0aCBzdWJDbGFzc01ldGhvZHMgdGhhdCBpbmhlcml0ZWQgc3VwZXJDbGFzcy5cbiAgICovXG5cblxuICB2YXIgZXh0ZW5kJDEgPSBmdW5jdGlvbiBleHRlbmQoc3VwZXJDbGFzcywgc3ViQ2xhc3NNZXRob2RzKSB7XG4gICAgaWYgKHN1YkNsYXNzTWV0aG9kcyA9PT0gdm9pZCAwKSB7XG4gICAgICBzdWJDbGFzc01ldGhvZHMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgc3ViQ2xhc3MgPSBmdW5jdGlvbiBzdWJDbGFzcygpIHtcbiAgICAgIHN1cGVyQ2xhc3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgdmFyIG1ldGhvZHMgPSB7fTtcblxuICAgIGlmICh0eXBlb2Ygc3ViQ2xhc3NNZXRob2RzID09PSAnb2JqZWN0Jykge1xuICAgICAgaWYgKHN1YkNsYXNzTWV0aG9kcy5jb25zdHJ1Y3RvciAhPT0gT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcikge1xuICAgICAgICBzdWJDbGFzcyA9IHN1YkNsYXNzTWV0aG9kcy5jb25zdHJ1Y3RvcjtcbiAgICAgIH1cblxuICAgICAgbWV0aG9kcyA9IHN1YkNsYXNzTWV0aG9kcztcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzdWJDbGFzc01ldGhvZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHN1YkNsYXNzID0gc3ViQ2xhc3NNZXRob2RzO1xuICAgIH1cblxuICAgIF9pbmhlcml0cyQxKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgLy8gRXh0ZW5kIHN1Yk9iaidzIHByb3RvdHlwZSB3aXRoIGZ1bmN0aW9ucyBhbmQgb3RoZXIgcHJvcGVydGllcyBmcm9tIHByb3BzXG5cblxuICAgIGZvciAodmFyIG5hbWUgaW4gbWV0aG9kcykge1xuICAgICAgaWYgKG1ldGhvZHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgc3ViQ2xhc3MucHJvdG90eXBlW25hbWVdID0gbWV0aG9kc1tuYW1lXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3ViQ2xhc3M7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBmaWxlIHZpZGVvLmpzXG4gICAqIEBtb2R1bGUgdmlkZW9qc1xuICAgKi9cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZSBhbiBgaWRgIHZhbHVlIGJ5IHRyaW1taW5nIG9mZiBhIGxlYWRpbmcgYCNgXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSAgIHtzdHJpbmd9IGlkXG4gICAqICAgICAgICAgIEEgc3RyaW5nLCBtYXliZSB3aXRoIGEgbGVhZGluZyBgI2AuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICAgVGhlIHN0cmluZywgd2l0aG91dCBhbnkgbGVhZGluZyBgI2AuXG4gICAqL1xuXG4gIHZhciBub3JtYWxpemVJZCA9IGZ1bmN0aW9uIG5vcm1hbGl6ZUlkKGlkKSB7XG4gICAgcmV0dXJuIGlkLmluZGV4T2YoJyMnKSA9PT0gMCA/IGlkLnNsaWNlKDEpIDogaWQ7XG4gIH07XG4gIC8qKlxuICAgKiBUaGUgYHZpZGVvanMoKWAgZnVuY3Rpb24gZG91YmxlcyBhcyB0aGUgbWFpbiBmdW5jdGlvbiBmb3IgdXNlcnMgdG8gY3JlYXRlIGFcbiAgICoge0BsaW5rIFBsYXllcn0gaW5zdGFuY2UgYXMgd2VsbCBhcyB0aGUgbWFpbiBsaWJyYXJ5IG5hbWVzcGFjZS5cbiAgICpcbiAgICogSXQgY2FuIGFsc28gYmUgdXNlZCBhcyBhIGdldHRlciBmb3IgYSBwcmUtZXhpc3Rpbmcge0BsaW5rIFBsYXllcn0gaW5zdGFuY2UuXG4gICAqIEhvd2V2ZXIsIHdlIF9zdHJvbmdseV8gcmVjb21tZW5kIHVzaW5nIGB2aWRlb2pzLmdldFBsYXllcigpYCBmb3IgdGhpc1xuICAgKiBwdXJwb3NlIGJlY2F1c2UgaXQgYXZvaWRzIGFueSBwb3RlbnRpYWwgZm9yIHVuaW50ZW5kZWQgaW5pdGlhbGl6YXRpb24uXG4gICAqXG4gICAqIER1ZSB0byBbbGltaXRhdGlvbnNdKGh0dHBzOi8vZ2l0aHViLmNvbS9qc2RvYzMvanNkb2MvaXNzdWVzLzk1NSNpc3N1ZWNvbW1lbnQtMzEzODI5MTQ5KVxuICAgKiBvZiBvdXIgSlNEb2MgdGVtcGxhdGUsIHdlIGNhbm5vdCBwcm9wZXJseSBkb2N1bWVudCB0aGlzIGFzIGJvdGggYSBmdW5jdGlvblxuICAgKiBhbmQgYSBuYW1lc3BhY2UsIHNvIGl0cyBmdW5jdGlvbiBzaWduYXR1cmUgaXMgZG9jdW1lbnRlZCBoZXJlLlxuICAgKlxuICAgKiAjIyMjIEFyZ3VtZW50c1xuICAgKiAjIyMjIyBpZFxuICAgKiBzdHJpbmd8RWxlbWVudCwgKipyZXF1aXJlZCoqXG4gICAqXG4gICAqIFZpZGVvIGVsZW1lbnQgb3IgdmlkZW8gZWxlbWVudCBJRC5cbiAgICpcbiAgICogIyMjIyMgb3B0aW9uc1xuICAgKiBPYmplY3QsIG9wdGlvbmFsXG4gICAqXG4gICAqIE9wdGlvbnMgb2JqZWN0IGZvciBwcm92aWRpbmcgc2V0dGluZ3MuXG4gICAqIFNlZTogW09wdGlvbnMgR3VpZGVdKGh0dHBzOi8vZG9jcy52aWRlb2pzLmNvbS90dXRvcmlhbC1vcHRpb25zLmh0bWwpLlxuICAgKlxuICAgKiAjIyMjIyByZWFkeVxuICAgKiB7QGxpbmsgQ29tcG9uZW50flJlYWR5Q2FsbGJhY2t9LCBvcHRpb25hbFxuICAgKlxuICAgKiBBIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSB7QGxpbmsgUGxheWVyfSBhbmQge0BsaW5rIFRlY2h9IGFyZSByZWFkeS5cbiAgICpcbiAgICogIyMjIyBSZXR1cm4gVmFsdWVcbiAgICpcbiAgICogVGhlIGB2aWRlb2pzKClgIGZ1bmN0aW9uIHJldHVybnMgYSB7QGxpbmsgUGxheWVyfSBpbnN0YW5jZS5cbiAgICpcbiAgICogQG5hbWVzcGFjZVxuICAgKlxuICAgKiBAYm9ycm93cyBBdWRpb1RyYWNrIGFzIEF1ZGlvVHJhY2tcbiAgICogQGJvcnJvd3MgQ29tcG9uZW50LmdldENvbXBvbmVudCBhcyBnZXRDb21wb25lbnRcbiAgICogQGJvcnJvd3MgbW9kdWxlOmNvbXB1dGVkLXN0eWxlfmNvbXB1dGVkU3R5bGUgYXMgY29tcHV0ZWRTdHlsZVxuICAgKiBAYm9ycm93cyBtb2R1bGU6ZXZlbnRzLm9uIGFzIG9uXG4gICAqIEBib3Jyb3dzIG1vZHVsZTpldmVudHMub25lIGFzIG9uZVxuICAgKiBAYm9ycm93cyBtb2R1bGU6ZXZlbnRzLm9mZiBhcyBvZmZcbiAgICogQGJvcnJvd3MgbW9kdWxlOmV2ZW50cy50cmlnZ2VyIGFzIHRyaWdnZXJcbiAgICogQGJvcnJvd3MgRXZlbnRUYXJnZXQgYXMgRXZlbnRUYXJnZXRcbiAgICogQGJvcnJvd3MgbW9kdWxlOmV4dGVuZH5leHRlbmQgYXMgZXh0ZW5kXG4gICAqIEBib3Jyb3dzIG1vZHVsZTpmbi5iaW5kIGFzIGJpbmRcbiAgICogQGJvcnJvd3MgbW9kdWxlOmZvcm1hdC10aW1lLmZvcm1hdFRpbWUgYXMgZm9ybWF0VGltZVxuICAgKiBAYm9ycm93cyBtb2R1bGU6Zm9ybWF0LXRpbWUucmVzZXRGb3JtYXRUaW1lIGFzIHJlc2V0Rm9ybWF0VGltZVxuICAgKiBAYm9ycm93cyBtb2R1bGU6Zm9ybWF0LXRpbWUuc2V0Rm9ybWF0VGltZSBhcyBzZXRGb3JtYXRUaW1lXG4gICAqIEBib3Jyb3dzIG1vZHVsZTptZXJnZS1vcHRpb25zLm1lcmdlT3B0aW9ucyBhcyBtZXJnZU9wdGlvbnNcbiAgICogQGJvcnJvd3MgbW9kdWxlOm1pZGRsZXdhcmUudXNlIGFzIHVzZVxuICAgKiBAYm9ycm93cyBQbGF5ZXIucGxheWVycyBhcyBwbGF5ZXJzXG4gICAqIEBib3Jyb3dzIFBsdWdpbi5yZWdpc3RlclBsdWdpbiBhcyByZWdpc3RlclBsdWdpblxuICAgKiBAYm9ycm93cyBQbHVnaW4uZGVyZWdpc3RlclBsdWdpbiBhcyBkZXJlZ2lzdGVyUGx1Z2luXG4gICAqIEBib3Jyb3dzIFBsdWdpbi5nZXRQbHVnaW5zIGFzIGdldFBsdWdpbnNcbiAgICogQGJvcnJvd3MgUGx1Z2luLmdldFBsdWdpbiBhcyBnZXRQbHVnaW5cbiAgICogQGJvcnJvd3MgUGx1Z2luLmdldFBsdWdpblZlcnNpb24gYXMgZ2V0UGx1Z2luVmVyc2lvblxuICAgKiBAYm9ycm93cyBUZWNoLmdldFRlY2ggYXMgZ2V0VGVjaFxuICAgKiBAYm9ycm93cyBUZWNoLnJlZ2lzdGVyVGVjaCBhcyByZWdpc3RlclRlY2hcbiAgICogQGJvcnJvd3MgVGV4dFRyYWNrIGFzIFRleHRUcmFja1xuICAgKiBAYm9ycm93cyBtb2R1bGU6dGltZS1yYW5nZXMuY3JlYXRlVGltZVJhbmdlcyBhcyBjcmVhdGVUaW1lUmFuZ2VcbiAgICogQGJvcnJvd3MgbW9kdWxlOnRpbWUtcmFuZ2VzLmNyZWF0ZVRpbWVSYW5nZXMgYXMgY3JlYXRlVGltZVJhbmdlc1xuICAgKiBAYm9ycm93cyBtb2R1bGU6dXJsLmlzQ3Jvc3NPcmlnaW4gYXMgaXNDcm9zc09yaWdpblxuICAgKiBAYm9ycm93cyBtb2R1bGU6dXJsLnBhcnNlVXJsIGFzIHBhcnNlVXJsXG4gICAqIEBib3Jyb3dzIFZpZGVvVHJhY2sgYXMgVmlkZW9UcmFja1xuICAgKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd8RWxlbWVudH0gaWRcbiAgICogICAgICAgICBWaWRlbyBlbGVtZW50IG9yIHZpZGVvIGVsZW1lbnQgSUQuXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gW29wdGlvbnNdXG4gICAqICAgICAgICAgT3B0aW9ucyBvYmplY3QgZm9yIHByb3ZpZGluZyBzZXR0aW5ncy5cbiAgICogICAgICAgICBTZWU6IFtPcHRpb25zIEd1aWRlXShodHRwczovL2RvY3MudmlkZW9qcy5jb20vdHV0b3JpYWwtb3B0aW9ucy5odG1sKS5cbiAgICpcbiAgICogQHBhcmFtICB7Q29tcG9uZW50flJlYWR5Q2FsbGJhY2t9IFtyZWFkeV1cbiAgICogICAgICAgICBBIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSB7QGxpbmsgUGxheWVyfSBhbmQge0BsaW5rIFRlY2h9IGFyZVxuICAgKiAgICAgICAgIHJlYWR5LlxuICAgKlxuICAgKiBAcmV0dXJuIHtQbGF5ZXJ9XG4gICAqICAgICAgICAgVGhlIGB2aWRlb2pzKClgIGZ1bmN0aW9uIHJldHVybnMgYSB7QGxpbmsgUGxheWVyfFBsYXllcn0gaW5zdGFuY2UuXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gdmlkZW9qcyQxKGlkLCBvcHRpb25zLCByZWFkeSkge1xuICAgIHZhciBwbGF5ZXIgPSB2aWRlb2pzJDEuZ2V0UGxheWVyKGlkKTtcblxuICAgIGlmIChwbGF5ZXIpIHtcbiAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgIGxvZy53YXJuKFwiUGxheWVyIFxcXCJcIiArIGlkICsgXCJcXFwiIGlzIGFscmVhZHkgaW5pdGlhbGlzZWQuIE9wdGlvbnMgd2lsbCBub3QgYmUgYXBwbGllZC5cIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWFkeSkge1xuICAgICAgICBwbGF5ZXIucmVhZHkocmVhZHkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGxheWVyO1xuICAgIH1cblxuICAgIHZhciBlbCA9IHR5cGVvZiBpZCA9PT0gJ3N0cmluZycgPyAkKCcjJyArIG5vcm1hbGl6ZUlkKGlkKSkgOiBpZDtcblxuICAgIGlmICghaXNFbChlbCkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBlbGVtZW50IG9yIElEIHN1cHBsaWVkIGlzIG5vdCB2YWxpZC4gKHZpZGVvanMpJyk7XG4gICAgfSAvLyBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGVsKSB3aWxsIG9ubHkgY2hlY2sgaWYgZWwgaXMgY29udGFpbmVkIHdpdGhpbiB0aGF0IG9uZSBkb2N1bWVudC5cbiAgICAvLyBUaGlzIGNhdXNlcyBwcm9ibGVtcyBmb3IgZWxlbWVudHMgaW4gaWZyYW1lcy5cbiAgICAvLyBJbnN0ZWFkLCB1c2UgdGhlIGVsZW1lbnQncyBvd25lckRvY3VtZW50IGluc3RlYWQgb2YgdGhlIGdsb2JhbCBkb2N1bWVudC5cbiAgICAvLyBUaGlzIHdpbGwgbWFrZSBzdXJlIHRoYXQgdGhlIGVsZW1lbnQgaXMgaW5kZWVkIGluIHRoZSBkb20gb2YgdGhhdCBkb2N1bWVudC5cbiAgICAvLyBBZGRpdGlvbmFsbHksIGNoZWNrIHRoYXQgdGhlIGRvY3VtZW50IGluIHF1ZXN0aW9uIGhhcyBhIGRlZmF1bHQgdmlldy5cbiAgICAvLyBJZiB0aGUgZG9jdW1lbnQgaXMgbm8gbG9uZ2VyIGF0dGFjaGVkIHRvIHRoZSBkb20sIHRoZSBkZWZhdWx0VmlldyBvZiB0aGUgZG9jdW1lbnQgd2lsbCBiZSBudWxsLlxuXG5cbiAgICBpZiAoIWVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgfHwgIWVsLm93bmVyRG9jdW1lbnQuYm9keS5jb250YWlucyhlbCkpIHtcbiAgICAgIGxvZy53YXJuKCdUaGUgZWxlbWVudCBzdXBwbGllZCBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIERPTScpO1xuICAgIH1cblxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHZpZGVvanMkMS5ob29rcygnYmVmb3Jlc2V0dXAnKS5mb3JFYWNoKGZ1bmN0aW9uIChob29rRnVuY3Rpb24pIHtcbiAgICAgIHZhciBvcHRzID0gaG9va0Z1bmN0aW9uKGVsLCBtZXJnZU9wdGlvbnMob3B0aW9ucykpO1xuXG4gICAgICBpZiAoIWlzT2JqZWN0KG9wdHMpIHx8IEFycmF5LmlzQXJyYXkob3B0cykpIHtcbiAgICAgICAgbG9nLmVycm9yKCdwbGVhc2UgcmV0dXJuIGFuIG9iamVjdCBpbiBiZWZvcmVzZXR1cCBob29rcycpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMgPSBtZXJnZU9wdGlvbnMob3B0aW9ucywgb3B0cyk7XG4gICAgfSk7IC8vIFdlIGdldCB0aGUgY3VycmVudCBcIlBsYXllclwiIGNvbXBvbmVudCBoZXJlIGluIGNhc2UgYW4gaW50ZWdyYXRpb24gaGFzXG4gICAgLy8gcmVwbGFjZWQgaXQgd2l0aCBhIGN1c3RvbSBwbGF5ZXIuXG5cbiAgICB2YXIgUGxheWVyQ29tcG9uZW50ID0gQ29tcG9uZW50LmdldENvbXBvbmVudCgnUGxheWVyJyk7XG4gICAgcGxheWVyID0gbmV3IFBsYXllckNvbXBvbmVudChlbCwgb3B0aW9ucywgcmVhZHkpO1xuICAgIHZpZGVvanMkMS5ob29rcygnc2V0dXAnKS5mb3JFYWNoKGZ1bmN0aW9uIChob29rRnVuY3Rpb24pIHtcbiAgICAgIHJldHVybiBob29rRnVuY3Rpb24ocGxheWVyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcGxheWVyO1xuICB9XG4gIC8qKlxuICAgKiBBbiBPYmplY3QgdGhhdCBjb250YWlucyBsaWZlY3ljbGUgaG9va3MgYXMga2V5cyB3aGljaCBwb2ludCB0byBhbiBhcnJheVxuICAgKiBvZiBmdW5jdGlvbnMgdGhhdCBhcmUgcnVuIHdoZW4gYSBsaWZlY3ljbGUgaXMgdHJpZ2dlcmVkXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgdmlkZW9qcyQxLmhvb2tzXyA9IHt9O1xuICAvKipcbiAgICogR2V0IGEgbGlzdCBvZiBob29rcyBmb3IgYSBzcGVjaWZpYyBsaWZlY3ljbGVcbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSB0eXBlXG4gICAqICAgICAgICAgdGhlIGxpZmVjeWxlIHRvIGdldCBob29rcyBmcm9tXG4gICAqXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufEZ1bmN0aW9uW119IFtmbl1cbiAgICogICAgICAgICBPcHRpb25hbGx5IGFkZCBhIGhvb2sgKG9yIGhvb2tzKSB0byB0aGUgbGlmZWN5Y2xlIHRoYXQgeW91ciBhcmUgZ2V0dGluZy5cbiAgICpcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqICAgICAgICAgYW4gYXJyYXkgb2YgaG9va3MsIG9yIGFuIGVtcHR5IGFycmF5IGlmIHRoZXJlIGFyZSBub25lLlxuICAgKi9cblxuICB2aWRlb2pzJDEuaG9va3MgPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICB2aWRlb2pzJDEuaG9va3NfW3R5cGVdID0gdmlkZW9qcyQxLmhvb2tzX1t0eXBlXSB8fCBbXTtcblxuICAgIGlmIChmbikge1xuICAgICAgdmlkZW9qcyQxLmhvb2tzX1t0eXBlXSA9IHZpZGVvanMkMS5ob29rc19bdHlwZV0uY29uY2F0KGZuKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmlkZW9qcyQxLmhvb2tzX1t0eXBlXTtcbiAgfTtcbiAgLyoqXG4gICAqIEFkZCBhIGZ1bmN0aW9uIGhvb2sgdG8gYSBzcGVjaWZpYyB2aWRlb2pzIGxpZmVjeWNsZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICogICAgICAgIHRoZSBsaWZlY3ljbGUgdG8gaG9vayB0aGUgZnVuY3Rpb24gdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb258RnVuY3Rpb25bXX1cbiAgICogICAgICAgIFRoZSBmdW5jdGlvbiBvciBhcnJheSBvZiBmdW5jdGlvbnMgdG8gYXR0YWNoLlxuICAgKi9cblxuXG4gIHZpZGVvanMkMS5ob29rID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgdmlkZW9qcyQxLmhvb2tzKHR5cGUsIGZuKTtcbiAgfTtcbiAgLyoqXG4gICAqIEFkZCBhIGZ1bmN0aW9uIGhvb2sgdGhhdCB3aWxsIG9ubHkgcnVuIG9uY2UgdG8gYSBzcGVjaWZpYyB2aWRlb2pzIGxpZmVjeWNsZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICogICAgICAgIHRoZSBsaWZlY3ljbGUgdG8gaG9vayB0aGUgZnVuY3Rpb24gdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb258RnVuY3Rpb25bXX1cbiAgICogICAgICAgIFRoZSBmdW5jdGlvbiBvciBhcnJheSBvZiBmdW5jdGlvbnMgdG8gYXR0YWNoLlxuICAgKi9cblxuXG4gIHZpZGVvanMkMS5ob29rT25jZSA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xuICAgIHZpZGVvanMkMS5ob29rcyh0eXBlLCBbXS5jb25jYXQoZm4pLm1hcChmdW5jdGlvbiAob3JpZ2luYWwpIHtcbiAgICAgIHZhciB3cmFwcGVyID0gZnVuY3Rpb24gd3JhcHBlcigpIHtcbiAgICAgICAgdmlkZW9qcyQxLnJlbW92ZUhvb2sodHlwZSwgd3JhcHBlcik7XG4gICAgICAgIHJldHVybiBvcmlnaW5hbC5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gd3JhcHBlcjtcbiAgICB9KSk7XG4gIH07XG4gIC8qKlxuICAgKiBSZW1vdmUgYSBob29rIGZyb20gYSBzcGVjaWZpYyB2aWRlb2pzIGxpZmVjeWNsZS5cbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSB0eXBlXG4gICAqICAgICAgICAgdGhlIGxpZmVjeWNsZSB0aGF0IHRoZSBmdW5jdGlvbiBob29rZWQgdG9cbiAgICpcbiAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuXG4gICAqICAgICAgICAgVGhlIGhvb2tlZCBmdW5jdGlvbiB0byByZW1vdmVcbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICBUaGUgZnVuY3Rpb24gdGhhdCB3YXMgcmVtb3ZlZCBvciB1bmRlZlxuICAgKi9cblxuXG4gIHZpZGVvanMkMS5yZW1vdmVIb29rID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgdmFyIGluZGV4ID0gdmlkZW9qcyQxLmhvb2tzKHR5cGUpLmluZGV4T2YoZm4pO1xuXG4gICAgaWYgKGluZGV4IDw9IC0xKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmlkZW9qcyQxLmhvb2tzX1t0eXBlXSA9IHZpZGVvanMkMS5ob29rc19bdHlwZV0uc2xpY2UoKTtcbiAgICB2aWRlb2pzJDEuaG9va3NfW3R5cGVdLnNwbGljZShpbmRleCwgMSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07IC8vIEFkZCBkZWZhdWx0IHN0eWxlc1xuXG5cbiAgaWYgKHdpbmRvdyQxLlZJREVPSlNfTk9fRFlOQU1JQ19TVFlMRSAhPT0gdHJ1ZSAmJiBpc1JlYWwoKSkge1xuICAgIHZhciBzdHlsZSQxID0gJCgnLnZqcy1zdHlsZXMtZGVmYXVsdHMnKTtcblxuICAgIGlmICghc3R5bGUkMSkge1xuICAgICAgc3R5bGUkMSA9IGNyZWF0ZVN0eWxlRWxlbWVudCgndmpzLXN0eWxlcy1kZWZhdWx0cycpO1xuICAgICAgdmFyIGhlYWQgPSAkKCdoZWFkJyk7XG5cbiAgICAgIGlmIChoZWFkKSB7XG4gICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlJDEsIGhlYWQuZmlyc3RDaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIHNldFRleHRDb250ZW50KHN0eWxlJDEsIFwiXFxuICAgICAgLnZpZGVvLWpzIHtcXG4gICAgICAgIHdpZHRoOiAzMDBweDtcXG4gICAgICAgIGhlaWdodDogMTUwcHg7XFxuICAgICAgfVxcblxcbiAgICAgIC52anMtZmx1aWQge1xcbiAgICAgICAgcGFkZGluZy10b3A6IDU2LjI1JVxcbiAgICAgIH1cXG4gICAgXCIpO1xuICAgIH1cbiAgfSAvLyBSdW4gQXV0by1sb2FkIHBsYXllcnNcbiAgLy8gWW91IGhhdmUgdG8gd2FpdCBhdCBsZWFzdCBvbmNlIGluIGNhc2UgdGhpcyBzY3JpcHQgaXMgbG9hZGVkIGFmdGVyIHlvdXJcbiAgLy8gdmlkZW8gaW4gdGhlIERPTSAod2VpcmQgYmVoYXZpb3Igb25seSB3aXRoIG1pbmlmaWVkIHZlcnNpb24pXG5cblxuICBhdXRvU2V0dXBUaW1lb3V0KDEsIHZpZGVvanMkMSk7XG4gIC8qKlxuICAgKiBDdXJyZW50IFZpZGVvLmpzIHZlcnNpb24uIEZvbGxvd3MgW3NlbWFudGljIHZlcnNpb25pbmddKGh0dHBzOi8vc2VtdmVyLm9yZy8pLlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cblxuICB2aWRlb2pzJDEuVkVSU0lPTiA9IHZlcnNpb247XG4gIC8qKlxuICAgKiBUaGUgZ2xvYmFsIG9wdGlvbnMgb2JqZWN0LiBUaGVzZSBhcmUgdGhlIHNldHRpbmdzIHRoYXQgdGFrZSBlZmZlY3RcbiAgICogaWYgbm8gb3ZlcnJpZGVzIGFyZSBzcGVjaWZpZWQgd2hlbiB0aGUgcGxheWVyIGlzIGNyZWF0ZWQuXG4gICAqXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuXG4gIHZpZGVvanMkMS5vcHRpb25zID0gUGxheWVyLnByb3RvdHlwZS5vcHRpb25zXztcbiAgLyoqXG4gICAqIEdldCBhbiBvYmplY3Qgd2l0aCB0aGUgY3VycmVudGx5IGNyZWF0ZWQgcGxheWVycywga2V5ZWQgYnkgcGxheWVyIElEXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICogICAgICAgICBUaGUgY3JlYXRlZCBwbGF5ZXJzXG4gICAqL1xuXG4gIHZpZGVvanMkMS5nZXRQbGF5ZXJzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBQbGF5ZXIucGxheWVycztcbiAgfTtcbiAgLyoqXG4gICAqIEdldCBhIHNpbmdsZSBwbGF5ZXIgYmFzZWQgb24gYW4gSUQgb3IgRE9NIGVsZW1lbnQuXG4gICAqXG4gICAqIFRoaXMgaXMgdXNlZnVsIGlmIHlvdSB3YW50IHRvIGNoZWNrIGlmIGFuIGVsZW1lbnQgb3IgSUQgaGFzIGFuIGFzc29jaWF0ZWRcbiAgICogVmlkZW8uanMgcGxheWVyLCBidXQgbm90IGNyZWF0ZSBvbmUgaWYgaXQgZG9lc24ndC5cbiAgICpcbiAgICogQHBhcmFtICAge3N0cmluZ3xFbGVtZW50fSBpZFxuICAgKiAgICAgICAgICBBbiBIVE1MIGVsZW1lbnQgLSBgPHZpZGVvPmAsIGA8YXVkaW8+YCwgb3IgYDx2aWRlby1qcz5gIC1cbiAgICogICAgICAgICAgb3IgYSBzdHJpbmcgbWF0Y2hpbmcgdGhlIGBpZGAgb2Ygc3VjaCBhbiBlbGVtZW50LlxuICAgKlxuICAgKiBAcmV0dXJuIHtQbGF5ZXJ8dW5kZWZpbmVkfVxuICAgKiAgICAgICAgICBBIHBsYXllciBpbnN0YW5jZSBvciBgdW5kZWZpbmVkYCBpZiB0aGVyZSBpcyBubyBwbGF5ZXIgaW5zdGFuY2VcbiAgICogICAgICAgICAgbWF0Y2hpbmcgdGhlIGFyZ3VtZW50LlxuICAgKi9cblxuXG4gIHZpZGVvanMkMS5nZXRQbGF5ZXIgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICB2YXIgcGxheWVycyA9IFBsYXllci5wbGF5ZXJzO1xuICAgIHZhciB0YWc7XG5cbiAgICBpZiAodHlwZW9mIGlkID09PSAnc3RyaW5nJykge1xuICAgICAgdmFyIG5JZCA9IG5vcm1hbGl6ZUlkKGlkKTtcbiAgICAgIHZhciBwbGF5ZXIgPSBwbGF5ZXJzW25JZF07XG5cbiAgICAgIGlmIChwbGF5ZXIpIHtcbiAgICAgICAgcmV0dXJuIHBsYXllcjtcbiAgICAgIH1cblxuICAgICAgdGFnID0gJCgnIycgKyBuSWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YWcgPSBpZDtcbiAgICB9XG5cbiAgICBpZiAoaXNFbCh0YWcpKSB7XG4gICAgICB2YXIgX3RhZyA9IHRhZyxcbiAgICAgICAgICBfcGxheWVyID0gX3RhZy5wbGF5ZXIsXG4gICAgICAgICAgcGxheWVySWQgPSBfdGFnLnBsYXllcklkOyAvLyBFbGVtZW50IG1heSBoYXZlIGEgYHBsYXllcmAgcHJvcGVydHkgcmVmZXJyaW5nIHRvIGFuIGFscmVhZHkgY3JlYXRlZFxuICAgICAgLy8gcGxheWVyIGluc3RhbmNlLiBJZiBzbywgcmV0dXJuIHRoYXQuXG5cbiAgICAgIGlmIChfcGxheWVyIHx8IHBsYXllcnNbcGxheWVySWRdKSB7XG4gICAgICAgIHJldHVybiBfcGxheWVyIHx8IHBsYXllcnNbcGxheWVySWRdO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFJldHVybnMgYW4gYXJyYXkgb2YgYWxsIGN1cnJlbnQgcGxheWVycy5cbiAgICpcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqICAgICAgICAgQW4gYXJyYXkgb2YgYWxsIHBsYXllcnMuIFRoZSBhcnJheSB3aWxsIGJlIGluIHRoZSBvcmRlciB0aGF0XG4gICAqICAgICAgICAgYE9iamVjdC5rZXlzYCBwcm92aWRlcywgd2hpY2ggY291bGQgcG90ZW50aWFsbHkgdmFyeSBiZXR3ZWVuXG4gICAqICAgICAgICAgSmF2YVNjcmlwdCBlbmdpbmVzLlxuICAgKlxuICAgKi9cblxuXG4gIHZpZGVvanMkMS5nZXRBbGxQbGF5ZXJzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAoLy8gRGlzcG9zZWQgcGxheWVycyBsZWF2ZSBhIGtleSB3aXRoIGEgYG51bGxgIHZhbHVlLCBzbyB3ZSBuZWVkIHRvIG1ha2Ugc3VyZVxuICAgICAgLy8gd2UgZmlsdGVyIHRob3NlIG91dC5cbiAgICAgIE9iamVjdC5rZXlzKFBsYXllci5wbGF5ZXJzKS5tYXAoZnVuY3Rpb24gKGspIHtcbiAgICAgICAgcmV0dXJuIFBsYXllci5wbGF5ZXJzW2tdO1xuICAgICAgfSkuZmlsdGVyKEJvb2xlYW4pXG4gICAgKTtcbiAgfTtcblxuICB2aWRlb2pzJDEucGxheWVycyA9IFBsYXllci5wbGF5ZXJzO1xuICB2aWRlb2pzJDEuZ2V0Q29tcG9uZW50ID0gQ29tcG9uZW50LmdldENvbXBvbmVudDtcbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgY29tcG9uZW50IHNvIGl0IGNhbiByZWZlcnJlZCB0byBieSBuYW1lLiBVc2VkIHdoZW4gYWRkaW5nIHRvIG90aGVyXG4gICAqIGNvbXBvbmVudHMsIGVpdGhlciB0aHJvdWdoIGFkZENoaWxkIGBjb21wb25lbnQuYWRkQ2hpbGQoJ215Q29tcG9uZW50JylgIG9yIHRocm91Z2hcbiAgICogZGVmYXVsdCBjaGlsZHJlbiBvcHRpb25zICBgeyBjaGlsZHJlbjogWydteUNvbXBvbmVudCddIH1gLlxuICAgKlxuICAgKiA+IE5PVEU6IFlvdSBjb3VsZCBhbHNvIGp1c3QgaW5pdGlhbGl6ZSB0aGUgY29tcG9uZW50IGJlZm9yZSBhZGRpbmcuXG4gICAqIGBjb21wb25lbnQuYWRkQ2hpbGQobmV3IE15Q29tcG9uZW50KCkpO2BcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogICAgICAgIFRoZSBjbGFzcyBuYW1lIG9mIHRoZSBjb21wb25lbnRcbiAgICpcbiAgICogQHBhcmFtIHtDb21wb25lbnR9IGNvbXBcbiAgICogICAgICAgIFRoZSBjb21wb25lbnQgY2xhc3NcbiAgICpcbiAgICogQHJldHVybiB7Q29tcG9uZW50fVxuICAgKiAgICAgICAgIFRoZSBuZXdseSByZWdpc3RlcmVkIGNvbXBvbmVudFxuICAgKi9cblxuICB2aWRlb2pzJDEucmVnaXN0ZXJDb21wb25lbnQgPSBmdW5jdGlvbiAobmFtZSQkMSwgY29tcCkge1xuICAgIGlmIChUZWNoLmlzVGVjaChjb21wKSkge1xuICAgICAgbG9nLndhcm4oXCJUaGUgXCIgKyBuYW1lJCQxICsgXCIgdGVjaCB3YXMgcmVnaXN0ZXJlZCBhcyBhIGNvbXBvbmVudC4gSXQgc2hvdWxkIGluc3RlYWQgYmUgcmVnaXN0ZXJlZCB1c2luZyB2aWRlb2pzLnJlZ2lzdGVyVGVjaChuYW1lLCB0ZWNoKVwiKTtcbiAgICB9XG5cbiAgICBDb21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQuY2FsbChDb21wb25lbnQsIG5hbWUkJDEsIGNvbXApO1xuICB9O1xuXG4gIHZpZGVvanMkMS5nZXRUZWNoID0gVGVjaC5nZXRUZWNoO1xuICB2aWRlb2pzJDEucmVnaXN0ZXJUZWNoID0gVGVjaC5yZWdpc3RlclRlY2g7XG4gIHZpZGVvanMkMS51c2UgPSB1c2U7XG4gIC8qKlxuICAgKiBBbiBvYmplY3QgdGhhdCBjYW4gYmUgcmV0dXJuZWQgYnkgYSBtaWRkbGV3YXJlIHRvIHNpZ25pZnlcbiAgICogdGhhdCB0aGUgbWlkZGxld2FyZSBpcyBiZWluZyB0ZXJtaW5hdGVkLlxuICAgKlxuICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgKiBAcHJvcGVydHkge29iamVjdH0gbWlkZGxld2FyZS5URVJNSU5BVE9SXG4gICAqL1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2aWRlb2pzJDEsICdtaWRkbGV3YXJlJywge1xuICAgIHZhbHVlOiB7fSxcbiAgICB3cml0ZWFibGU6IGZhbHNlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2aWRlb2pzJDEubWlkZGxld2FyZSwgJ1RFUk1JTkFUT1InLCB7XG4gICAgdmFsdWU6IFRFUk1JTkFUT1IsXG4gICAgd3JpdGVhYmxlOiBmYWxzZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0pO1xuICAvKipcbiAgICogQSByZWZlcmVuY2UgdG8gdGhlIHtAbGluayBtb2R1bGU6YnJvd3Nlcnxicm93c2VyIHV0aWxpdHkgbW9kdWxlfSBhcyBhbiBvYmplY3QuXG4gICAqXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqIEBzZWUgIHtAbGluayBtb2R1bGU6YnJvd3Nlcnxicm93c2VyfVxuICAgKi9cblxuICB2aWRlb2pzJDEuYnJvd3NlciA9IGJyb3dzZXI7XG4gIC8qKlxuICAgKiBVc2Uge0BsaW5rIG1vZHVsZTpicm93c2VyLlRPVUNIX0VOQUJMRUR8YnJvd3Nlci5UT1VDSF9FTkFCTEVEfSBpbnN0ZWFkOyBvbmx5XG4gICAqIGluY2x1ZGVkIGZvciBiYWNrd2FyZC1jb21wYXRpYmlsaXR5IHdpdGggNC54LlxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCBTaW5jZSB2ZXJzaW9uIDUuMCwgdXNlIHtAbGluayBtb2R1bGU6YnJvd3Nlci5UT1VDSF9FTkFCTEVEfGJyb3dzZXIuVE9VQ0hfRU5BQkxFRCBpbnN0ZWFkLlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG5cbiAgdmlkZW9qcyQxLlRPVUNIX0VOQUJMRUQgPSBUT1VDSF9FTkFCTEVEO1xuICB2aWRlb2pzJDEuZXh0ZW5kID0gZXh0ZW5kJDE7XG4gIHZpZGVvanMkMS5tZXJnZU9wdGlvbnMgPSBtZXJnZU9wdGlvbnM7XG4gIHZpZGVvanMkMS5iaW5kID0gYmluZDtcbiAgdmlkZW9qcyQxLnJlZ2lzdGVyUGx1Z2luID0gUGx1Z2luLnJlZ2lzdGVyUGx1Z2luO1xuICB2aWRlb2pzJDEuZGVyZWdpc3RlclBsdWdpbiA9IFBsdWdpbi5kZXJlZ2lzdGVyUGx1Z2luO1xuICAvKipcbiAgICogRGVwcmVjYXRlZCBtZXRob2QgdG8gcmVnaXN0ZXIgYSBwbHVnaW4gd2l0aCBWaWRlby5qc1xuICAgKlxuICAgKiBAZGVwcmVjYXRlZCB2aWRlb2pzLnBsdWdpbigpIGlzIGRlcHJlY2F0ZWQ7IHVzZSB2aWRlb2pzLnJlZ2lzdGVyUGx1Z2luKCkgaW5zdGVhZFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiAgICAgICAgVGhlIHBsdWdpbiBuYW1lXG4gICAqXG4gICAqIEBwYXJhbSB7UGx1Z2lufEZ1bmN0aW9ufSBwbHVnaW5cbiAgICogICAgICAgICBUaGUgcGx1Z2luIHN1Yi1jbGFzcyBvciBmdW5jdGlvblxuICAgKi9cblxuICB2aWRlb2pzJDEucGx1Z2luID0gZnVuY3Rpb24gKG5hbWUkJDEsIHBsdWdpbikge1xuICAgIGxvZy53YXJuKCd2aWRlb2pzLnBsdWdpbigpIGlzIGRlcHJlY2F0ZWQ7IHVzZSB2aWRlb2pzLnJlZ2lzdGVyUGx1Z2luKCkgaW5zdGVhZCcpO1xuICAgIHJldHVybiBQbHVnaW4ucmVnaXN0ZXJQbHVnaW4obmFtZSQkMSwgcGx1Z2luKTtcbiAgfTtcblxuICB2aWRlb2pzJDEuZ2V0UGx1Z2lucyA9IFBsdWdpbi5nZXRQbHVnaW5zO1xuICB2aWRlb2pzJDEuZ2V0UGx1Z2luID0gUGx1Z2luLmdldFBsdWdpbjtcbiAgdmlkZW9qcyQxLmdldFBsdWdpblZlcnNpb24gPSBQbHVnaW4uZ2V0UGx1Z2luVmVyc2lvbjtcbiAgLyoqXG4gICAqIEFkZGluZyBsYW5ndWFnZXMgc28gdGhhdCB0aGV5J3JlIGF2YWlsYWJsZSB0byBhbGwgcGxheWVycy5cbiAgICogRXhhbXBsZTogYHZpZGVvanMuYWRkTGFuZ3VhZ2UoJ2VzJywgeyAnSGVsbG8nOiAnSG9sYScgfSk7YFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29kZVxuICAgKiAgICAgICAgVGhlIGxhbmd1YWdlIGNvZGUgb3IgZGljdGlvbmFyeSBwcm9wZXJ0eVxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgKiAgICAgICAgVGhlIGRhdGEgdmFsdWVzIHRvIGJlIHRyYW5zbGF0ZWRcbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKiAgICAgICAgIFRoZSByZXN1bHRpbmcgbGFuZ3VhZ2UgZGljdGlvbmFyeSBvYmplY3RcbiAgICovXG5cbiAgdmlkZW9qcyQxLmFkZExhbmd1YWdlID0gZnVuY3Rpb24gKGNvZGUsIGRhdGEpIHtcbiAgICB2YXIgX21lcmdlT3B0aW9ucztcblxuICAgIGNvZGUgPSAoJycgKyBjb2RlKS50b0xvd2VyQ2FzZSgpO1xuICAgIHZpZGVvanMkMS5vcHRpb25zLmxhbmd1YWdlcyA9IG1lcmdlT3B0aW9ucyh2aWRlb2pzJDEub3B0aW9ucy5sYW5ndWFnZXMsIChfbWVyZ2VPcHRpb25zID0ge30sIF9tZXJnZU9wdGlvbnNbY29kZV0gPSBkYXRhLCBfbWVyZ2VPcHRpb25zKSk7XG4gICAgcmV0dXJuIHZpZGVvanMkMS5vcHRpb25zLmxhbmd1YWdlc1tjb2RlXTtcbiAgfTtcbiAgLyoqXG4gICAqIEEgcmVmZXJlbmNlIHRvIHRoZSB7QGxpbmsgbW9kdWxlOmxvZ3xsb2cgdXRpbGl0eSBtb2R1bGV9IGFzIGFuIG9iamVjdC5cbiAgICpcbiAgICogQHR5cGUge0Z1bmN0aW9ufVxuICAgKiBAc2VlICB7QGxpbmsgbW9kdWxlOmxvZ3xsb2d9XG4gICAqL1xuXG5cbiAgdmlkZW9qcyQxLmxvZyA9IGxvZztcbiAgdmlkZW9qcyQxLmNyZWF0ZUxvZ2dlciA9IGNyZWF0ZUxvZ2dlciQxO1xuICB2aWRlb2pzJDEuY3JlYXRlVGltZVJhbmdlID0gdmlkZW9qcyQxLmNyZWF0ZVRpbWVSYW5nZXMgPSBjcmVhdGVUaW1lUmFuZ2VzO1xuICB2aWRlb2pzJDEuZm9ybWF0VGltZSA9IGZvcm1hdFRpbWU7XG4gIHZpZGVvanMkMS5zZXRGb3JtYXRUaW1lID0gc2V0Rm9ybWF0VGltZTtcbiAgdmlkZW9qcyQxLnJlc2V0Rm9ybWF0VGltZSA9IHJlc2V0Rm9ybWF0VGltZTtcbiAgdmlkZW9qcyQxLnBhcnNlVXJsID0gcGFyc2VVcmw7XG4gIHZpZGVvanMkMS5pc0Nyb3NzT3JpZ2luID0gaXNDcm9zc09yaWdpbjtcbiAgdmlkZW9qcyQxLkV2ZW50VGFyZ2V0ID0gRXZlbnRUYXJnZXQ7XG4gIHZpZGVvanMkMS5vbiA9IG9uO1xuICB2aWRlb2pzJDEub25lID0gb25lO1xuICB2aWRlb2pzJDEub2ZmID0gb2ZmO1xuICB2aWRlb2pzJDEudHJpZ2dlciA9IHRyaWdnZXI7XG4gIC8qKlxuICAgKiBBIGNyb3NzLWJyb3dzZXIgWE1MSHR0cFJlcXVlc3Qgd3JhcHBlci5cbiAgICpcbiAgICogQGZ1bmN0aW9uXG4gICAqIEBwYXJhbSAgICB7T2JqZWN0fSBvcHRpb25zXG4gICAqICAgICAgICAgICBTZXR0aW5ncyBmb3IgdGhlIHJlcXVlc3QuXG4gICAqXG4gICAqIEByZXR1cm4gICB7WE1MSHR0cFJlcXVlc3R8WERvbWFpblJlcXVlc3R9XG4gICAqICAgICAgICAgICBUaGUgcmVxdWVzdCBvYmplY3QuXG4gICAqXG4gICAqIEBzZWUgICAgICBodHRwczovL2dpdGh1Yi5jb20vUmF5bm9zL3hoclxuICAgKi9cblxuICB2aWRlb2pzJDEueGhyID0geGhyO1xuICB2aWRlb2pzJDEuVGV4dFRyYWNrID0gVGV4dFRyYWNrO1xuICB2aWRlb2pzJDEuQXVkaW9UcmFjayA9IEF1ZGlvVHJhY2s7XG4gIHZpZGVvanMkMS5WaWRlb1RyYWNrID0gVmlkZW9UcmFjaztcbiAgWydpc0VsJywgJ2lzVGV4dE5vZGUnLCAnY3JlYXRlRWwnLCAnaGFzQ2xhc3MnLCAnYWRkQ2xhc3MnLCAncmVtb3ZlQ2xhc3MnLCAndG9nZ2xlQ2xhc3MnLCAnc2V0QXR0cmlidXRlcycsICdnZXRBdHRyaWJ1dGVzJywgJ2VtcHR5RWwnLCAnYXBwZW5kQ29udGVudCcsICdpbnNlcnRDb250ZW50J10uZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgIHZpZGVvanMkMVtrXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGxvZy53YXJuKFwidmlkZW9qcy5cIiArIGsgKyBcIigpIGlzIGRlcHJlY2F0ZWQ7IHVzZSB2aWRlb2pzLmRvbS5cIiArIGsgKyBcIigpIGluc3RlYWRcIik7XG4gICAgICByZXR1cm4gRG9tW2tdLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfSk7XG4gIHZpZGVvanMkMS5jb21wdXRlZFN0eWxlID0gY29tcHV0ZWRTdHlsZTtcbiAgLyoqXG4gICAqIEEgcmVmZXJlbmNlIHRvIHRoZSB7QGxpbmsgbW9kdWxlOmRvbXxET00gdXRpbGl0eSBtb2R1bGV9IGFzIGFuIG9iamVjdC5cbiAgICpcbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQHNlZSAge0BsaW5rIG1vZHVsZTpkb218ZG9tfVxuICAgKi9cblxuICB2aWRlb2pzJDEuZG9tID0gRG9tO1xuICAvKipcbiAgICogQSByZWZlcmVuY2UgdG8gdGhlIHtAbGluayBtb2R1bGU6dXJsfFVSTCB1dGlsaXR5IG1vZHVsZX0gYXMgYW4gb2JqZWN0LlxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAc2VlICB7QGxpbmsgbW9kdWxlOnVybHx1cmx9XG4gICAqL1xuXG4gIHZpZGVvanMkMS51cmwgPSBVcmw7XG5cbiAgcmV0dXJuIHZpZGVvanMkMTtcblxufSkpO1xuIl19