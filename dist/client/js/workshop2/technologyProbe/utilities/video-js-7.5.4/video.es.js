'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};/**
 * @license
 * Video.js 7.5.4 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */var _window=require('global/window');var _window2=_interopRequireDefault(_window);var _document=require('global/document');var _document2=_interopRequireDefault(_document);var _tsml=require('tsml');var _tsml2=_interopRequireDefault(_tsml);var _tuple=require('safe-json-parse/tuple');var _tuple2=_interopRequireDefault(_tuple);var _keycode=require('keycode');var _keycode2=_interopRequireDefault(_keycode);var _xhr=require('xhr');var _xhr2=_interopRequireDefault(_xhr);var _videojsVtt=require('videojs-vtt.js');var _videojsVtt2=_interopRequireDefault(_videojsVtt);var _urlToolkit=require('url-toolkit');var _urlToolkit2=_interopRequireDefault(_urlToolkit);var _m3u8Parser=require('m3u8-parser');var _mpdParser=require('mpd-parser');var _probe=require('mux.js/lib/mp4/probe');var _probe2=_interopRequireDefault(_probe);var _mp=require('mux.js/lib/mp4');var _tsInspector=require('mux.js/lib/tools/ts-inspector.js');var _tsInspector2=_interopRequireDefault(_tsInspector);var _aesDecrypter=require('aes-decrypter');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var version="7.5.4";function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass;}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct;}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor();if(Class)_setPrototypeOf(instance,Class.prototype);return instance;};}return _construct.apply(null,arguments);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _taggedTemplateLiteralLoose(strings,raw){if(!raw){raw=strings.slice(0);}strings.raw=raw;return strings;}/**
 * @file create-logger.js
 * @module create-logger
 */var history=[];/**
 * Log messages to the console and history based on the type of message
 *
 * @private
 * @param  {string} type
 *         The name of the console method to use.
 *
 * @param  {Array} args
 *         The arguments to be passed to the matching console method.
 */var LogByTypeFactory=function LogByTypeFactory(name,log){return function(type,level,args){var lvl=log.levels[level];var lvlRegExp=new RegExp("^("+lvl+")$");if(type!=='log'){// Add the type to the front of the message when it's not "log".
args.unshift(type.toUpperCase()+':');}// Add console prefix after adding to history.
args.unshift(name+':');// Add a clone of the args at this point to history.
if(history){history.push([].concat(args));}// If there's no console then don't try to output messages, but they will
// still be stored in history.
if(!_window2.default.console){return;}// Was setting these once outside of this function, but containing them
// in the function makes it easier to test cases where console doesn't exist
// when the module is executed.
var fn=_window2.default.console[type];if(!fn&&type==='debug'){// Certain browsers don't have support for console.debug. For those, we
// should default to the closest comparable log.
fn=_window2.default.console.info||_window2.default.console.log;}// Bail out if there's no console or if this type is not allowed by the
// current logging level.
if(!fn||!lvl||!lvlRegExp.test(type)){return;}fn[Array.isArray(args)?'apply':'call'](_window2.default.console,args);};};function createLogger(name){// This is the private tracking variable for logging level.
var level='info';// the curried logByType bound to the specific log and history
var logByType;/**
   * Logs plain debug messages. Similar to `console.log`.
   *
   * Due to [limitations](https://github.com/jsdoc3/jsdoc/issues/955#issuecomment-313829149)
   * of our JSDoc template, we cannot properly document this as both a function
   * and a namespace, so its function signature is documented here.
   *
   * #### Arguments
   * ##### *args
   * Mixed[]
   *
   * Any combination of values that could be passed to `console.log()`.
   *
   * #### Return Value
   *
   * `undefined`
   *
   * @namespace
   * @param    {Mixed[]} args
   *           One or more messages or objects that should be logged.
   */var log=function log(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}logByType('log',level,args);};// This is the logByType helper that the logging methods below use
logByType=LogByTypeFactory(name,log);/**
   * Create a new sublogger which chains the old name to the new name.
   *
   * For example, doing `videojs.log.createLogger('player')` and then using that logger will log the following:
   * ```js
   *  mylogger('foo');
   *  // > VIDEOJS: player: foo
   * ```
   *
   * @param {string} name
   *        The name to add call the new logger
   * @return {Object}
   */log.createLogger=function(subname){return createLogger(name+': '+subname);};/**
   * Enumeration of available logging levels, where the keys are the level names
   * and the values are `|`-separated strings containing logging methods allowed
   * in that logging level. These strings are used to create a regular expression
   * matching the function name being called.
   *
   * Levels provided by Video.js are:
   *
   * - `off`: Matches no calls. Any value that can be cast to `false` will have
   *   this effect. The most restrictive.
   * - `all`: Matches only Video.js-provided functions (`debug`, `log`,
   *   `log.warn`, and `log.error`).
   * - `debug`: Matches `log.debug`, `log`, `log.warn`, and `log.error` calls.
   * - `info` (default): Matches `log`, `log.warn`, and `log.error` calls.
   * - `warn`: Matches `log.warn` and `log.error` calls.
   * - `error`: Matches only `log.error` calls.
   *
   * @type {Object}
   */log.levels={all:'debug|log|warn|error',off:'',debug:'debug|log|warn|error',info:'log|warn|error',warn:'warn|error',error:'error',DEFAULT:level};/**
   * Get or set the current logging level.
   *
   * If a string matching a key from {@link module:log.levels} is provided, acts
   * as a setter.
   *
   * @param  {string} [lvl]
   *         Pass a valid level to set a new logging level.
   *
   * @return {string}
   *         The current logging level.
   */log.level=function(lvl){if(typeof lvl==='string'){if(!log.levels.hasOwnProperty(lvl)){throw new Error("\""+lvl+"\" in not a valid log level");}level=lvl;}return level;};/**
   * Returns an array containing everything that has been logged to the history.
   *
   * This array is a shallow clone of the internal history record. However, its
   * contents are _not_ cloned; so, mutating objects inside this array will
   * mutate them in history.
   *
   * @return {Array}
   */log.history=function(){return history?[].concat(history):[];};/**
   * Allows you to filter the history by the given logger name
   *
   * @param {string} fname
   *        The name to filter by
   *
   * @return {Array}
   *         The filtered list to return
   */log.history.filter=function(fname){return(history||[]).filter(function(historyItem){// if the first item in each historyItem includes `fname`, then it's a match
return new RegExp(".*"+fname+".*").test(historyItem[0]);});};/**
   * Clears the internal history tracking, but does not prevent further history
   * tracking.
   */log.history.clear=function(){if(history){history.length=0;}};/**
   * Disable history tracking if it is currently enabled.
   */log.history.disable=function(){if(history!==null){history.length=0;history=null;}};/**
   * Enable history tracking if it is currently disabled.
   */log.history.enable=function(){if(history===null){history=[];}};/**
   * Logs error messages. Similar to `console.error`.
   *
   * @param {Mixed[]} args
   *        One or more messages or objects that should be logged as an error
   */log.error=function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}return logByType('error',level,args);};/**
   * Logs warning messages. Similar to `console.warn`.
   *
   * @param {Mixed[]} args
   *        One or more messages or objects that should be logged as a warning.
   */log.warn=function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}return logByType('warn',level,args);};/**
   * Logs debug messages. Similar to `console.debug`, but may also act as a comparable
   * log if `console.debug` is not available
   *
   * @param {Mixed[]} args
   *        One or more messages or objects that should be logged as debug.
   */log.debug=function(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}return logByType('debug',level,args);};return log;}/**
 * @file log.js
 * @module log
 */var log=createLogger('VIDEOJS');var createLogger$1=log.createLogger;/**
 * @file obj.js
 * @module obj
 *//**
 * @callback obj:EachCallback
 *
 * @param {Mixed} value
 *        The current key for the object that is being iterated over.
 *
 * @param {string} key
 *        The current key-value for object that is being iterated over
 *//**
 * @callback obj:ReduceCallback
 *
 * @param {Mixed} accum
 *        The value that is accumulating over the reduce loop.
 *
 * @param {Mixed} value
 *        The current key for the object that is being iterated over.
 *
 * @param {string} key
 *        The current key-value for object that is being iterated over
 *
 * @return {Mixed}
 *         The new accumulated value.
 */var toString=Object.prototype.toString;/**
 * Get the keys of an Object
 *
 * @param {Object}
 *        The Object to get the keys from
 *
 * @return {string[]}
 *         An array of the keys from the object. Returns an empty array if the
 *         object passed in was invalid or had no keys.
 *
 * @private
 */var keys=function keys(object){return isObject(object)?Object.keys(object):[];};/**
 * Array-like iteration for objects.
 *
 * @param {Object} object
 *        The object to iterate over
 *
 * @param {obj:EachCallback} fn
 *        The callback function which is called for each key in the object.
 */function each(object,fn){keys(object).forEach(function(key){return fn(object[key],key);});}/**
 * Array-like reduce for objects.
 *
 * @param {Object} object
 *        The Object that you want to reduce.
 *
 * @param {Function} fn
 *         A callback function which is called for each key in the object. It
 *         receives the accumulated value and the per-iteration value and key
 *         as arguments.
 *
 * @param {Mixed} [initial = 0]
 *        Starting value
 *
 * @return {Mixed}
 *         The final accumulated value.
 */function reduce(object,fn,initial){if(initial===void 0){initial=0;}return keys(object).reduce(function(accum,key){return fn(accum,object[key],key);},initial);}/**
 * Object.assign-style object shallow merge/extend.
 *
 * @param  {Object} target
 * @param  {Object} ...sources
 * @return {Object}
 */function assign(target){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){sources[_key-1]=arguments[_key];}if(Object.assign){return Object.assign.apply(Object,[target].concat(sources));}sources.forEach(function(source){if(!source){return;}each(source,function(value,key){target[key]=value;});});return target;}/**
 * Returns whether a value is an object of any kind - including DOM nodes,
 * arrays, regular expressions, etc. Not functions, though.
 *
 * This avoids the gotcha where using `typeof` on a `null` value
 * results in `'object'`.
 *
 * @param  {Object} value
 * @return {boolean}
 */function isObject(value){return!!value&&(typeof value==='undefined'?'undefined':_typeof(value))==='object';}/**
 * Returns whether an object appears to be a "plain" object - that is, a
 * direct instance of `Object`.
 *
 * @param  {Object} value
 * @return {boolean}
 */function isPlain(value){return isObject(value)&&toString.call(value)==='[object Object]'&&value.constructor===Object;}/**
 * @file computed-style.js
 * @module computed-style
 *//**
 * A safe getComputedStyle.
 *
 * This is needed because in Firefox, if the player is loaded in an iframe with
 * `display:none`, then `getComputedStyle` returns `null`, so, we do a
 * null-check to make sure that the player doesn't break in these cases.
 *
 * @function
 * @param    {Element} el
 *           The element you want the computed style of
 *
 * @param    {string} prop
 *           The property name you want
 *
 * @see      https://bugzilla.mozilla.org/show_bug.cgi?id=548397
 */function computedStyle(el,prop){if(!el||!prop){return'';}if(typeof _window2.default.getComputedStyle==='function'){var cs=_window2.default.getComputedStyle(el);return cs?cs[prop]:'';}return'';}function _templateObject(){var data=_taggedTemplateLiteralLoose(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);_templateObject=function _templateObject(){return data;};return data;}/**
 * Detect if a value is a string with any non-whitespace characters.
 *
 * @private
 * @param  {string} str
 *         The string to check
 *
 * @return {boolean}
 *         Will be `true` if the string is non-blank, `false` otherwise.
 *
 */function isNonBlankString(str){return typeof str==='string'&&/\S/.test(str);}/**
 * Throws an error if the passed string has whitespace. This is used by
 * class methods to be relatively consistent with the classList API.
 *
 * @private
 * @param  {string} str
 *         The string to check for whitespace.
 *
 * @throws {Error}
 *         Throws an error if there is whitespace in the string.
 */function throwIfWhitespace(str){if(/\s/.test(str)){throw new Error('class has illegal whitespace characters');}}/**
 * Produce a regular expression for matching a className within an elements className.
 *
 * @private
 * @param  {string} className
 *         The className to generate the RegExp for.
 *
 * @return {RegExp}
 *         The RegExp that will check for a specific `className` in an elements
 *         className.
 */function classRegExp(className){return new RegExp('(^|\\s)'+className+'($|\\s)');}/**
 * Whether the current DOM interface appears to be real (i.e. not simulated).
 *
 * @return {boolean}
 *         Will be `true` if the DOM appears to be real, `false` otherwise.
 */function isReal(){// Both document and window will never be undefined thanks to `global`.
return _document2.default===_window2.default.document;}/**
 * Determines, via duck typing, whether or not a value is a DOM element.
 *
 * @param  {Mixed} value
 *         The value to check.
 *
 * @return {boolean}
 *         Will be `true` if the value is a DOM element, `false` otherwise.
 */function isEl(value){return isObject(value)&&value.nodeType===1;}/**
 * Determines if the current DOM is embedded in an iframe.
 *
 * @return {boolean}
 *         Will be `true` if the DOM is embedded in an iframe, `false`
 *         otherwise.
 */function isInFrame(){// We need a try/catch here because Safari will throw errors when attempting
// to get either `parent` or `self`
try{return _window2.default.parent!==_window2.default.self;}catch(x){return true;}}/**
 * Creates functions to query the DOM using a given method.
 *
 * @private
 * @param   {string} method
 *          The method to create the query with.
 *
 * @return  {Function}
 *          The query method
 */function createQuerier(method){return function(selector,context){if(!isNonBlankString(selector)){return _document2.default[method](null);}if(isNonBlankString(context)){context=_document2.default.querySelector(context);}var ctx=isEl(context)?context:_document2.default;return ctx[method]&&ctx[method](selector);};}/**
 * Creates an element and applies properties, attributes, and inserts content.
 *
 * @param  {string} [tagName='div']
 *         Name of tag to be created.
 *
 * @param  {Object} [properties={}]
 *         Element properties to be applied.
 *
 * @param  {Object} [attributes={}]
 *         Element attributes to be applied.
 *
 * @param {module:dom~ContentDescriptor} content
 *        A content descriptor object.
 *
 * @return {Element}
 *         The element that was created.
 */function createEl(tagName,properties,attributes,content){if(tagName===void 0){tagName='div';}if(properties===void 0){properties={};}if(attributes===void 0){attributes={};}var el=_document2.default.createElement(tagName);Object.getOwnPropertyNames(properties).forEach(function(propName){var val=properties[propName];// See #2176
// We originally were accepting both properties and attributes in the
// same object, but that doesn't work so well.
if(propName.indexOf('aria-')!==-1||propName==='role'||propName==='type'){log.warn((0,_tsml2.default)(_templateObject(),propName,val));el.setAttribute(propName,val);// Handle textContent since it's not supported everywhere and we have a
// method for it.
}else if(propName==='textContent'){textContent(el,val);}else{el[propName]=val;}});Object.getOwnPropertyNames(attributes).forEach(function(attrName){el.setAttribute(attrName,attributes[attrName]);});if(content){appendContent(el,content);}return el;}/**
 * Injects text into an element, replacing any existing contents entirely.
 *
 * @param  {Element} el
 *         The element to add text content into
 *
 * @param  {string} text
 *         The text content to add.
 *
 * @return {Element}
 *         The element with added text content.
 */function textContent(el,text){if(typeof el.textContent==='undefined'){el.innerText=text;}else{el.textContent=text;}return el;}/**
 * Insert an element as the first child node of another
 *
 * @param {Element} child
 *        Element to insert
 *
 * @param {Element} parent
 *        Element to insert child into
 */function prependTo(child,parent){if(parent.firstChild){parent.insertBefore(child,parent.firstChild);}else{parent.appendChild(child);}}/**
 * Check if an element has a class name.
 *
 * @param  {Element} element
 *         Element to check
 *
 * @param  {string} classToCheck
 *         Class name to check for
 *
 * @return {boolean}
 *         Will be `true` if the element has a class, `false` otherwise.
 *
 * @throws {Error}
 *         Throws an error if `classToCheck` has white space.
 */function hasClass(element,classToCheck){throwIfWhitespace(classToCheck);if(element.classList){return element.classList.contains(classToCheck);}return classRegExp(classToCheck).test(element.className);}/**
 * Add a class name to an element.
 *
 * @param  {Element} element
 *         Element to add class name to.
 *
 * @param  {string} classToAdd
 *         Class name to add.
 *
 * @return {Element}
 *         The DOM element with the added class name.
 */function addClass(element,classToAdd){if(element.classList){element.classList.add(classToAdd);// Don't need to `throwIfWhitespace` here because `hasElClass` will do it
// in the case of classList not being supported.
}else if(!hasClass(element,classToAdd)){element.className=(element.className+' '+classToAdd).trim();}return element;}/**
 * Remove a class name from an element.
 *
 * @param  {Element} element
 *         Element to remove a class name from.
 *
 * @param  {string} classToRemove
 *         Class name to remove
 *
 * @return {Element}
 *         The DOM element with class name removed.
 */function removeClass(element,classToRemove){if(element.classList){element.classList.remove(classToRemove);}else{throwIfWhitespace(classToRemove);element.className=element.className.split(/\s+/).filter(function(c){return c!==classToRemove;}).join(' ');}return element;}/**
 * The callback definition for toggleClass.
 *
 * @callback module:dom~PredicateCallback
 * @param    {Element} element
 *           The DOM element of the Component.
 *
 * @param    {string} classToToggle
 *           The `className` that wants to be toggled
 *
 * @return   {boolean|undefined}
 *           If `true` is returned, the `classToToggle` will be added to the
 *           `element`. If `false`, the `classToToggle` will be removed from
 *           the `element`. If `undefined`, the callback will be ignored.
 *//**
 * Adds or removes a class name to/from an element depending on an optional
 * condition or the presence/absence of the class name.
 *
 * @param  {Element} element
 *         The element to toggle a class name on.
 *
 * @param  {string} classToToggle
 *         The class that should be toggled.
 *
 * @param  {boolean|module:dom~PredicateCallback} [predicate]
 *         See the return value for {@link module:dom~PredicateCallback}
 *
 * @return {Element}
 *         The element with a class that has been toggled.
 */function toggleClass(element,classToToggle,predicate){// This CANNOT use `classList` internally because IE11 does not support the
// second parameter to the `classList.toggle()` method! Which is fine because
// `classList` will be used by the add/remove functions.
var has=hasClass(element,classToToggle);if(typeof predicate==='function'){predicate=predicate(element,classToToggle);}if(typeof predicate!=='boolean'){predicate=!has;}// If the necessary class operation matches the current state of the
// element, no action is required.
if(predicate===has){return;}if(predicate){addClass(element,classToToggle);}else{removeClass(element,classToToggle);}return element;}/**
 * Apply attributes to an HTML element.
 *
 * @param {Element} el
 *        Element to add attributes to.
 *
 * @param {Object} [attributes]
 *        Attributes to be applied.
 */function setAttributes(el,attributes){Object.getOwnPropertyNames(attributes).forEach(function(attrName){var attrValue=attributes[attrName];if(attrValue===null||typeof attrValue==='undefined'||attrValue===false){el.removeAttribute(attrName);}else{el.setAttribute(attrName,attrValue===true?'':attrValue);}});}/**
 * Get an element's attribute values, as defined on the HTML tag.
 *
 * Attributes are not the same as properties. They're defined on the tag
 * or with setAttribute.
 *
 * @param  {Element} tag
 *         Element from which to get tag attributes.
 *
 * @return {Object}
 *         All attributes of the element. Boolean attributes will be `true` or
 *         `false`, others will be strings.
 */function getAttributes(tag){var obj={};// known boolean attributes
// we can check for matching boolean properties, but not all browsers
// and not all tags know about these attributes, so, we still want to check them manually
var knownBooleans=','+'autoplay,controls,playsinline,loop,muted,default,defaultMuted'+',';if(tag&&tag.attributes&&tag.attributes.length>0){var attrs=tag.attributes;for(var i=attrs.length-1;i>=0;i--){var attrName=attrs[i].name;var attrVal=attrs[i].value;// check for known booleans
// the matching element property will return a value for typeof
if(typeof tag[attrName]==='boolean'||knownBooleans.indexOf(','+attrName+',')!==-1){// the value of an included boolean attribute is typically an empty
// string ('') which would equal false if we just check for a false value.
// we also don't want support bad code like autoplay='false'
attrVal=attrVal!==null?true:false;}obj[attrName]=attrVal;}}return obj;}/**
 * Get the value of an element's attribute.
 *
 * @param {Element} el
 *        A DOM element.
 *
 * @param {string} attribute
 *        Attribute to get the value of.
 *
 * @return {string}
 *         The value of the attribute.
 */function getAttribute(el,attribute){return el.getAttribute(attribute);}/**
 * Set the value of an element's attribute.
 *
 * @param {Element} el
 *        A DOM element.
 *
 * @param {string} attribute
 *        Attribute to set.
 *
 * @param {string} value
 *        Value to set the attribute to.
 */function setAttribute(el,attribute,value){el.setAttribute(attribute,value);}/**
 * Remove an element's attribute.
 *
 * @param {Element} el
 *        A DOM element.
 *
 * @param {string} attribute
 *        Attribute to remove.
 */function removeAttribute(el,attribute){el.removeAttribute(attribute);}/**
 * Attempt to block the ability to select text.
 */function blockTextSelection(){_document2.default.body.focus();_document2.default.onselectstart=function(){return false;};}/**
 * Turn off text selection blocking.
 */function unblockTextSelection(){_document2.default.onselectstart=function(){return true;};}/**
 * Identical to the native `getBoundingClientRect` function, but ensures that
 * the method is supported at all (it is in all browsers we claim to support)
 * and that the element is in the DOM before continuing.
 *
 * This wrapper function also shims properties which are not provided by some
 * older browsers (namely, IE8).
 *
 * Additionally, some browsers do not support adding properties to a
 * `ClientRect`/`DOMRect` object; so, we shallow-copy it with the standard
 * properties (except `x` and `y` which are not widely supported). This helps
 * avoid implementations where keys are non-enumerable.
 *
 * @param  {Element} el
 *         Element whose `ClientRect` we want to calculate.
 *
 * @return {Object|undefined}
 *         Always returns a plain object - or `undefined` if it cannot.
 */function getBoundingClientRect(el){if(el&&el.getBoundingClientRect&&el.parentNode){var rect=el.getBoundingClientRect();var result={};['bottom','height','left','right','top','width'].forEach(function(k){if(rect[k]!==undefined){result[k]=rect[k];}});if(!result.height){result.height=parseFloat(computedStyle(el,'height'));}if(!result.width){result.width=parseFloat(computedStyle(el,'width'));}return result;}}/**
 * Represents the position of a DOM element on the page.
 *
 * @typedef  {Object} module:dom~Position
 *
 * @property {number} left
 *           Pixels to the left.
 *
 * @property {number} top
 *           Pixels from the top.
 *//**
 * Get the position of an element in the DOM.
 *
 * Uses `getBoundingClientRect` technique from John Resig.
 *
 * @see http://ejohn.org/blog/getboundingclientrect-is-awesome/
 *
 * @param  {Element} el
 *         Element from which to get offset.
 *
 * @return {module:dom~Position}
 *         The position of the element that was passed in.
 */function findPosition(el){var box;if(el.getBoundingClientRect&&el.parentNode){box=el.getBoundingClientRect();}if(!box){return{left:0,top:0};}var docEl=_document2.default.documentElement;var body=_document2.default.body;var clientLeft=docEl.clientLeft||body.clientLeft||0;var scrollLeft=_window2.default.pageXOffset||body.scrollLeft;var left=box.left+scrollLeft-clientLeft;var clientTop=docEl.clientTop||body.clientTop||0;var scrollTop=_window2.default.pageYOffset||body.scrollTop;var top=box.top+scrollTop-clientTop;// Android sometimes returns slightly off decimal values, so need to round
return{left:Math.round(left),top:Math.round(top)};}/**
 * Represents x and y coordinates for a DOM element or mouse pointer.
 *
 * @typedef  {Object} module:dom~Coordinates
 *
 * @property {number} x
 *           x coordinate in pixels
 *
 * @property {number} y
 *           y coordinate in pixels
 *//**
 * Get the pointer position within an element.
 *
 * The base on the coordinates are the bottom left of the element.
 *
 * @param  {Element} el
 *         Element on which to get the pointer position on.
 *
 * @param  {EventTarget~Event} event
 *         Event object.
 *
 * @return {module:dom~Coordinates}
 *         A coordinates object corresponding to the mouse position.
 *
 */function getPointerPosition(el,event){var position={};var box=findPosition(el);var boxW=el.offsetWidth;var boxH=el.offsetHeight;var boxY=box.top;var boxX=box.left;var pageY=event.pageY;var pageX=event.pageX;if(event.changedTouches){pageX=event.changedTouches[0].pageX;pageY=event.changedTouches[0].pageY;}position.y=Math.max(0,Math.min(1,(boxY-pageY+boxH)/boxH));position.x=Math.max(0,Math.min(1,(pageX-boxX)/boxW));return position;}/**
 * Determines, via duck typing, whether or not a value is a text node.
 *
 * @param  {Mixed} value
 *         Check if this value is a text node.
 *
 * @return {boolean}
 *         Will be `true` if the value is a text node, `false` otherwise.
 */function isTextNode(value){return isObject(value)&&value.nodeType===3;}/**
 * Empties the contents of an element.
 *
 * @param  {Element} el
 *         The element to empty children from
 *
 * @return {Element}
 *         The element with no children
 */function emptyEl(el){while(el.firstChild){el.removeChild(el.firstChild);}return el;}/**
 * This is a mixed value that describes content to be injected into the DOM
 * via some method. It can be of the following types:
 *
 * Type       | Description
 * -----------|-------------
 * `string`   | The value will be normalized into a text node.
 * `Element`  | The value will be accepted as-is.
 * `TextNode` | The value will be accepted as-is.
 * `Array`    | A one-dimensional array of strings, elements, text nodes, or functions. These functions should return a string, element, or text node (any other return value, like an array, will be ignored).
 * `Function` | A function, which is expected to return a string, element, text node, or array - any of the other possible values described above. This means that a content descriptor could be a function that returns an array of functions, but those second-level functions must return strings, elements, or text nodes.
 *
 * @typedef {string|Element|TextNode|Array|Function} module:dom~ContentDescriptor
 *//**
 * Normalizes content for eventual insertion into the DOM.
 *
 * This allows a wide range of content definition methods, but helps protect
 * from falling into the trap of simply writing to `innerHTML`, which could
 * be an XSS concern.
 *
 * The content for an element can be passed in multiple types and
 * combinations, whose behavior is as follows:
 *
 * @param {module:dom~ContentDescriptor} content
 *        A content descriptor value.
 *
 * @return {Array}
 *         All of the content that was passed in, normalized to an array of
 *         elements or text nodes.
 */function normalizeContent(content){// First, invoke content if it is a function. If it produces an array,
// that needs to happen before normalization.
if(typeof content==='function'){content=content();}// Next up, normalize to an array, so one or many items can be normalized,
// filtered, and returned.
return(Array.isArray(content)?content:[content]).map(function(value){// First, invoke value if it is a function to produce a new value,
// which will be subsequently normalized to a Node of some kind.
if(typeof value==='function'){value=value();}if(isEl(value)||isTextNode(value)){return value;}if(typeof value==='string'&&/\S/.test(value)){return _document2.default.createTextNode(value);}}).filter(function(value){return value;});}/**
 * Normalizes and appends content to an element.
 *
 * @param  {Element} el
 *         Element to append normalized content to.
 *
 * @param {module:dom~ContentDescriptor} content
 *        A content descriptor value.
 *
 * @return {Element}
 *         The element with appended normalized content.
 */function appendContent(el,content){normalizeContent(content).forEach(function(node){return el.appendChild(node);});return el;}/**
 * Normalizes and inserts content into an element; this is identical to
 * `appendContent()`, except it empties the element first.
 *
 * @param {Element} el
 *        Element to insert normalized content into.
 *
 * @param {module:dom~ContentDescriptor} content
 *        A content descriptor value.
 *
 * @return {Element}
 *         The element with inserted normalized content.
 */function insertContent(el,content){return appendContent(emptyEl(el),content);}/**
 * Check if an event was a single left click.
 *
 * @param  {EventTarget~Event} event
 *         Event object.
 *
 * @return {boolean}
 *         Will be `true` if a single left click, `false` otherwise.
 */function isSingleLeftClick(event){// Note: if you create something draggable, be sure to
// call it on both `mousedown` and `mousemove` event,
// otherwise `mousedown` should be enough for a button
if(event.button===undefined&&event.buttons===undefined){// Why do we need `buttons` ?
// Because, middle mouse sometimes have this:
// e.button === 0 and e.buttons === 4
// Furthermore, we want to prevent combination click, something like
// HOLD middlemouse then left click, that would be
// e.button === 0, e.buttons === 5
// just `button` is not gonna work
// Alright, then what this block does ?
// this is for chrome `simulate mobile devices`
// I want to support this as well
return true;}if(event.button===0&&event.buttons===undefined){// Touch screen, sometimes on some specific device, `buttons`
// doesn't have anything (safari on ios, blackberry...)
return true;}if(event.button!==0||event.buttons!==1){// This is the reason we have those if else block above
// if any special case we can catch and let it slide
// we do it above, when get to here, this definitely
// is-not-left-click
return false;}return true;}/**
 * Finds a single DOM element matching `selector` within the optional
 * `context` of another DOM element (defaulting to `document`).
 *
 * @param  {string} selector
 *         A valid CSS selector, which will be passed to `querySelector`.
 *
 * @param  {Element|String} [context=document]
 *         A DOM element within which to query. Can also be a selector
 *         string in which case the first matching element will be used
 *         as context. If missing (or no element matches selector), falls
 *         back to `document`.
 *
 * @return {Element|null}
 *         The element that was found or null.
 */var $=createQuerier('querySelector');/**
 * Finds a all DOM elements matching `selector` within the optional
 * `context` of another DOM element (defaulting to `document`).
 *
 * @param  {string} selector
 *         A valid CSS selector, which will be passed to `querySelectorAll`.
 *
 * @param  {Element|String} [context=document]
 *         A DOM element within which to query. Can also be a selector
 *         string in which case the first matching element will be used
 *         as context. If missing (or no element matches selector), falls
 *         back to `document`.
 *
 * @return {NodeList}
 *         A element list of elements that were found. Will be empty if none
 *         were found.
 *
 */var $$=createQuerier('querySelectorAll');var Dom=/*#__PURE__*/Object.freeze({isReal:isReal,isEl:isEl,isInFrame:isInFrame,createEl:createEl,textContent:textContent,prependTo:prependTo,hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,setAttributes:setAttributes,getAttributes:getAttributes,getAttribute:getAttribute,setAttribute:setAttribute,removeAttribute:removeAttribute,blockTextSelection:blockTextSelection,unblockTextSelection:unblockTextSelection,getBoundingClientRect:getBoundingClientRect,findPosition:findPosition,getPointerPosition:getPointerPosition,isTextNode:isTextNode,emptyEl:emptyEl,normalizeContent:normalizeContent,appendContent:appendContent,insertContent:insertContent,isSingleLeftClick:isSingleLeftClick,$:$,$$:$$});/**
 * @file guid.js
 * @module guid
 *//**
 * Unique ID for an element or function
 * @type {Number}
 */var _guid=1;/**
 * Get a unique auto-incrementing ID by number that has not been returned before.
 *
 * @return {number}
 *         A new unique ID.
 */function newGUID(){return _guid++;}/**
 * @file dom-data.js
 * @module dom-data
 *//**
 * Element Data Store.
 *
 * Allows for binding data to an element without putting it directly on the
 * element. Ex. Event listeners are stored here.
 * (also from jsninja.com, slightly modified and updated for closure compiler)
 *
 * @type {Object}
 * @private
 */var elData={};/*
 * Unique attribute name to store an element's guid in
 *
 * @type {String}
 * @constant
 * @private
 */var elIdAttr='vdata'+new Date().getTime();/**
 * Returns the cache object where data for an element is stored
 *
 * @param {Element} el
 *        Element to store data for.
 *
 * @return {Object}
 *         The cache object for that el that was passed in.
 */function getData(el){var id=el[elIdAttr];if(!id){id=el[elIdAttr]=newGUID();}if(!elData[id]){elData[id]={};}return elData[id];}/**
 * Returns whether or not an element has cached data
 *
 * @param {Element} el
 *        Check if this element has cached data.
 *
 * @return {boolean}
 *         - True if the DOM element has cached data.
 *         - False otherwise.
 */function hasData(el){var id=el[elIdAttr];if(!id){return false;}return!!Object.getOwnPropertyNames(elData[id]).length;}/**
 * Delete data for the element from the cache and the guid attr from getElementById
 *
 * @param {Element} el
 *        Remove cached data for this element.
 */function removeData(el){var id=el[elIdAttr];if(!id){return;}// Remove all stored data
delete elData[id];// Remove the elIdAttr property from the DOM node
try{delete el[elIdAttr];}catch(e){if(el.removeAttribute){el.removeAttribute(elIdAttr);}else{// IE doesn't appear to support removeAttribute on the document element
el[elIdAttr]=null;}}}/**
 * @file events.js. An Event System (John Resig - Secrets of a JS Ninja http://jsninja.com/)
 * (Original book version wasn't completely usable, so fixed some things and made Closure Compiler compatible)
 * This should work very similarly to jQuery's events, however it's based off the book version which isn't as
 * robust as jquery's, so there's probably some differences.
 *
 * @file events.js
 * @module events
 *//**
 * Clean up the listener cache and dispatchers
 *
 * @param {Element|Object} elem
 *        Element to clean up
 *
 * @param {string} type
 *        Type of event to clean up
 */function _cleanUpEvents(elem,type){var data=getData(elem);// Remove the events of a particular type if there are none left
if(data.handlers[type].length===0){delete data.handlers[type];// data.handlers[type] = null;
// Setting to null was causing an error with data.handlers
// Remove the meta-handler from the element
if(elem.removeEventListener){elem.removeEventListener(type,data.dispatcher,false);}else if(elem.detachEvent){elem.detachEvent('on'+type,data.dispatcher);}}// Remove the events object if there are no types left
if(Object.getOwnPropertyNames(data.handlers).length<=0){delete data.handlers;delete data.dispatcher;delete data.disabled;}// Finally remove the element data if there is no data left
if(Object.getOwnPropertyNames(data).length===0){removeData(elem);}}/**
 * Loops through an array of event types and calls the requested method for each type.
 *
 * @param {Function} fn
 *        The event method we want to use.
 *
 * @param {Element|Object} elem
 *        Element or object to bind listeners to
 *
 * @param {string} type
 *        Type of event to bind to.
 *
 * @param {EventTarget~EventListener} callback
 *        Event listener.
 */function _handleMultipleEvents(fn,elem,types,callback){types.forEach(function(type){// Call the event method for each one of the types
fn(elem,type,callback);});}/**
 * Fix a native event to have standard property values
 *
 * @param {Object} event
 *        Event object to fix.
 *
 * @return {Object}
 *         Fixed event object.
 */function fixEvent(event){function returnTrue(){return true;}function returnFalse(){return false;}// Test if fixing up is needed
// Used to check if !event.stopPropagation instead of isPropagationStopped
// But native events return true for stopPropagation, but don't have
// other expected methods like isPropagationStopped. Seems to be a problem
// with the Javascript Ninja code. So we're just overriding all events now.
if(!event||!event.isPropagationStopped){var old=event||_window2.default.event;event={};// Clone the old object so that we can modify the values event = {};
// IE8 Doesn't like when you mess with native event properties
// Firefox returns false for event.hasOwnProperty('type') and other props
//  which makes copying more difficult.
// TODO: Probably best to create a whitelist of event props
for(var key in old){// Safari 6.0.3 warns you if you try to copy deprecated layerX/Y
// Chrome warns you if you try to copy deprecated keyboardEvent.keyLocation
// and webkitMovementX/Y
if(key!=='layerX'&&key!=='layerY'&&key!=='keyLocation'&&key!=='webkitMovementX'&&key!=='webkitMovementY'){// Chrome 32+ warns if you try to copy deprecated returnValue, but
// we still want to if preventDefault isn't supported (IE8).
if(!(key==='returnValue'&&old.preventDefault)){event[key]=old[key];}}}// The event occurred on this element
if(!event.target){event.target=event.srcElement||_document2.default;}// Handle which other element the event is related to
if(!event.relatedTarget){event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement;}// Stop the default browser action
event.preventDefault=function(){if(old.preventDefault){old.preventDefault();}event.returnValue=false;old.returnValue=false;event.defaultPrevented=true;};event.defaultPrevented=false;// Stop the event from bubbling
event.stopPropagation=function(){if(old.stopPropagation){old.stopPropagation();}event.cancelBubble=true;old.cancelBubble=true;event.isPropagationStopped=returnTrue;};event.isPropagationStopped=returnFalse;// Stop the event from bubbling and executing other handlers
event.stopImmediatePropagation=function(){if(old.stopImmediatePropagation){old.stopImmediatePropagation();}event.isImmediatePropagationStopped=returnTrue;event.stopPropagation();};event.isImmediatePropagationStopped=returnFalse;// Handle mouse position
if(event.clientX!==null&&event.clientX!==undefined){var doc=_document2.default.documentElement;var body=_document2.default.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}// Handle key presses
event.which=event.charCode||event.keyCode;// Fix button for mouse clicks:
// 0 == left; 1 == middle; 2 == right
if(event.button!==null&&event.button!==undefined){// The following is disabled because it does not pass videojs-standard
// and... yikes.
/* eslint-disable */event.button=event.button&1?0:event.button&4?1:event.button&2?2:0;/* eslint-enable */}}// Returns fixed-up instance
return event;}/**
 * Whether passive event listeners are supported
 */var _supportsPassive=false;(function(){try{var opts=Object.defineProperty({},'passive',{get:function get(){_supportsPassive=true;}});_window2.default.addEventListener('test',null,opts);_window2.default.removeEventListener('test',null,opts);}catch(e){// disregard
}})();/**
 * Touch events Chrome expects to be passive
 */var passiveEvents=['touchstart','touchmove'];/**
 * Add an event listener to element
 * It stores the handler function in a separate cache object
 * and adds a generic handler to the element's event,
 * along with a unique id (guid) to the element.
 *
 * @param {Element|Object} elem
 *        Element or object to bind listeners to
 *
 * @param {string|string[]} type
 *        Type of event to bind to.
 *
 * @param {EventTarget~EventListener} fn
 *        Event listener.
 */function on(elem,type,fn){if(Array.isArray(type)){return _handleMultipleEvents(on,elem,type,fn);}var data=getData(elem);// We need a place to store all our handler data
if(!data.handlers){data.handlers={};}if(!data.handlers[type]){data.handlers[type]=[];}if(!fn.guid){fn.guid=newGUID();}data.handlers[type].push(fn);if(!data.dispatcher){data.disabled=false;data.dispatcher=function(event,hash){if(data.disabled){return;}event=fixEvent(event);var handlers=data.handlers[event.type];if(handlers){// Copy handlers so if handlers are added/removed during the process it doesn't throw everything off.
var handlersCopy=handlers.slice(0);for(var m=0,n=handlersCopy.length;m<n;m++){if(event.isImmediatePropagationStopped()){break;}else{try{handlersCopy[m].call(elem,event,hash);}catch(e){log.error(e);}}}}};}if(data.handlers[type].length===1){if(elem.addEventListener){var options=false;if(_supportsPassive&&passiveEvents.indexOf(type)>-1){options={passive:true};}elem.addEventListener(type,data.dispatcher,options);}else if(elem.attachEvent){elem.attachEvent('on'+type,data.dispatcher);}}}/**
 * Removes event listeners from an element
 *
 * @param {Element|Object} elem
 *        Object to remove listeners from.
 *
 * @param {string|string[]} [type]
 *        Type of listener to remove. Don't include to remove all events from element.
 *
 * @param {EventTarget~EventListener} [fn]
 *        Specific listener to remove. Don't include to remove listeners for an event
 *        type.
 */function off(elem,type,fn){// Don't want to add a cache object through getElData if not needed
if(!hasData(elem)){return;}var data=getData(elem);// If no events exist, nothing to unbind
if(!data.handlers){return;}if(Array.isArray(type)){return _handleMultipleEvents(off,elem,type,fn);}// Utility function
var removeType=function removeType(el,t){data.handlers[t]=[];_cleanUpEvents(el,t);};// Are we removing all bound events?
if(type===undefined){for(var t in data.handlers){if(Object.prototype.hasOwnProperty.call(data.handlers||{},t)){removeType(elem,t);}}return;}var handlers=data.handlers[type];// If no handlers exist, nothing to unbind
if(!handlers){return;}// If no listener was provided, remove all listeners for type
if(!fn){removeType(elem,type);return;}// We're only removing a single handler
if(fn.guid){for(var n=0;n<handlers.length;n++){if(handlers[n].guid===fn.guid){handlers.splice(n--,1);}}}_cleanUpEvents(elem,type);}/**
 * Trigger an event for an element
 *
 * @param {Element|Object} elem
 *        Element to trigger an event on
 *
 * @param {EventTarget~Event|string} event
 *        A string (the type) or an event object with a type attribute
 *
 * @param {Object} [hash]
 *        data hash to pass along with the event
 *
 * @return {boolean|undefined}
 *         Returns the opposite of `defaultPrevented` if default was
 *         prevented. Otherwise, returns `undefined`
 */function trigger(elem,event,hash){// Fetches element data and a reference to the parent (for bubbling).
// Don't want to add a data object to cache for every parent,
// so checking hasElData first.
var elemData=hasData(elem)?getData(elem):{};var parent=elem.parentNode||elem.ownerDocument;// type = event.type || event,
// handler;
// If an event name was passed as a string, creates an event out of it
if(typeof event==='string'){event={type:event,target:elem};}else if(!event.target){event.target=elem;}// Normalizes the event properties.
event=fixEvent(event);// If the passed element has a dispatcher, executes the established handlers.
if(elemData.dispatcher){elemData.dispatcher.call(elem,event,hash);}// Unless explicitly stopped or the event does not bubble (e.g. media events)
// recursively calls this function to bubble the event up the DOM.
if(parent&&!event.isPropagationStopped()&&event.bubbles===true){trigger.call(null,parent,event,hash);// If at the top of the DOM, triggers the default action unless disabled.
}else if(!parent&&!event.defaultPrevented&&event.target&&event.target[event.type]){var targetData=getData(event.target);// Checks if the target has a default action for this event.
if(event.target[event.type]){// Temporarily disables event dispatching on the target as we have already executed the handler.
targetData.disabled=true;// Executes the default action.
if(typeof event.target[event.type]==='function'){event.target[event.type]();}// Re-enables event dispatching.
targetData.disabled=false;}}// Inform the triggerer if the default was prevented by returning false
return!event.defaultPrevented;}/**
 * Trigger a listener only once for an event.
 *
 * @param {Element|Object} elem
 *        Element or object to bind to.
 *
 * @param {string|string[]} type
 *        Name/type of event
 *
 * @param {Event~EventListener} fn
 *        Event listener function
 */function one(elem,type,fn){if(Array.isArray(type)){return _handleMultipleEvents(one,elem,type,fn);}var func=function func(){off(elem,type,func);fn.apply(this,arguments);};// copy the guid to the new function so it can removed using the original function's ID
func.guid=fn.guid=fn.guid||newGUID();on(elem,type,func);}var Events=/*#__PURE__*/Object.freeze({fixEvent:fixEvent,on:on,off:off,trigger:trigger,one:one});/**
 * @file setup.js - Functions for setting up a player without
 * user interaction based on the data-setup `attribute` of the video tag.
 *
 * @module setup
 */var _windowLoaded=false;var videojs;/**
 * Set up any tags that have a data-setup `attribute` when the player is started.
 */var autoSetup=function autoSetup(){// Protect against breakage in non-browser environments and check global autoSetup option.
if(!isReal()||videojs.options.autoSetup===false){return;}var vids=Array.prototype.slice.call(_document2.default.getElementsByTagName('video'));var audios=Array.prototype.slice.call(_document2.default.getElementsByTagName('audio'));var divs=Array.prototype.slice.call(_document2.default.getElementsByTagName('video-js'));var mediaEls=vids.concat(audios,divs);// Check if any media elements exist
if(mediaEls&&mediaEls.length>0){for(var i=0,e=mediaEls.length;i<e;i++){var mediaEl=mediaEls[i];// Check if element exists, has getAttribute func.
if(mediaEl&&mediaEl.getAttribute){// Make sure this player hasn't already been set up.
if(mediaEl.player===undefined){var options=mediaEl.getAttribute('data-setup');// Check if data-setup attr exists.
// We only auto-setup if they've added the data-setup attr.
if(options!==null){// Create new video.js instance.
videojs(mediaEl);}}// If getAttribute isn't defined, we need to wait for the DOM.
}else{autoSetupTimeout(1);break;}}// No videos were found, so keep looping unless page is finished loading.
}else if(!_windowLoaded){autoSetupTimeout(1);}};/**
 * Wait until the page is loaded before running autoSetup. This will be called in
 * autoSetup if `hasLoaded` returns false.
 *
 * @param {number} wait
 *        How long to wait in ms
 *
 * @param {module:videojs} [vjs]
 *        The videojs library function
 */function autoSetupTimeout(wait,vjs){if(vjs){videojs=vjs;}_window2.default.setTimeout(autoSetup,wait);}if(isReal()&&_document2.default.readyState==='complete'){_windowLoaded=true;}else{/**
   * Listen for the load event on window, and set _windowLoaded to true.
   *
   * @listens load
   */one(_window2.default,'load',function(){_windowLoaded=true;});}/**
 * @file stylesheet.js
 * @module stylesheet
 *//**
 * Create a DOM syle element given a className for it.
 *
 * @param {string} className
 *        The className to add to the created style element.
 *
 * @return {Element}
 *         The element that was created.
 */var createStyleElement=function createStyleElement(className){var style=_document2.default.createElement('style');style.className=className;return style;};/**
 * Add text to a DOM element.
 *
 * @param {Element} el
 *        The Element to add text content to.
 *
 * @param {string} content
 *        The text to add to the element.
 */var setTextContent=function setTextContent(el,content){if(el.styleSheet){el.styleSheet.cssText=content;}else{el.textContent=content;}};/**
 * @file fn.js
 * @module fn
 *//**
 * Bind (a.k.a proxy or context). A simple method for changing the context of
 * a function.
 *
 * It also stores a unique id on the function so it can be easily removed from
 * events.
 *
 * @function
 * @param    {Mixed} context
 *           The object to bind as scope.
 *
 * @param    {Function} fn
 *           The function to be bound to a scope.
 *
 * @param    {number} [uid]
 *           An optional unique ID for the function to be set
 *
 * @return   {Function}
 *           The new function that will be bound into the context given
 */var bind=function bind(context,fn,uid){// Make sure the function has a unique ID
if(!fn.guid){fn.guid=newGUID();}// Create the new function that changes the context
var bound=function bound(){return fn.apply(context,arguments);};// Allow for the ability to individualize this function
// Needed in the case where multiple objects might share the same prototype
// IF both items add an event listener with the same function, then you try to remove just one
// it will remove both because they both have the same guid.
// when using this, you need to use the bind method when you remove the listener as well.
// currently used in text tracks
bound.guid=uid?uid+'_'+fn.guid:fn.guid;return bound;};/**
 * Wraps the given function, `fn`, with a new function that only invokes `fn`
 * at most once per every `wait` milliseconds.
 *
 * @function
 * @param    {Function} fn
 *           The function to be throttled.
 *
 * @param    {number}   wait
 *           The number of milliseconds by which to throttle.
 *
 * @return   {Function}
 */var throttle=function throttle(fn,wait){var last=Date.now();var throttled=function throttled(){var now=Date.now();if(now-last>=wait){fn.apply(void 0,arguments);last=now;}};return throttled;};/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked.
 *
 * Inspired by lodash and underscore implementations.
 *
 * @function
 * @param    {Function} func
 *           The function to wrap with debounce behavior.
 *
 * @param    {number} wait
 *           The number of milliseconds to wait after the last invocation.
 *
 * @param    {boolean} [immediate]
 *           Whether or not to invoke the function immediately upon creation.
 *
 * @param    {Object} [context=window]
 *           The "context" in which the debounced function should debounce. For
 *           example, if this function should be tied to a Video.js player,
 *           the player can be passed here. Alternatively, defaults to the
 *           global `window` object.
 *
 * @return   {Function}
 *           A debounced function.
 */var debounce=function debounce(func,wait,immediate,context){if(context===void 0){context=_window2.default;}var timeout;var cancel=function cancel(){context.clearTimeout(timeout);timeout=null;};/* eslint-disable consistent-this */var debounced=function debounced(){var self=this;var args=arguments;var _later=function later(){timeout=null;_later=null;if(!immediate){func.apply(self,args);}};if(!timeout&&immediate){func.apply(self,args);}context.clearTimeout(timeout);timeout=context.setTimeout(_later,wait);};/* eslint-enable consistent-this */debounced.cancel=cancel;return debounced;};/**
 * @file src/js/event-target.js
 *//**
 * `EventTarget` is a class that can have the same API as the DOM `EventTarget`. It
 * adds shorthand functions that wrap around lengthy functions. For example:
 * the `on` function is a wrapper around `addEventListener`.
 *
 * @see [EventTarget Spec]{@link https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget}
 * @class EventTarget
 */var EventTarget=function EventTarget(){};/**
 * A Custom DOM event.
 *
 * @typedef {Object} EventTarget~Event
 * @see [Properties]{@link https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent}
 *//**
 * All event listeners should follow the following format.
 *
 * @callback EventTarget~EventListener
 * @this {EventTarget}
 *
 * @param {EventTarget~Event} event
 *        the event that triggered this function
 *
 * @param {Object} [hash]
 *        hash of data sent during the event
 *//**
 * An object containing event names as keys and booleans as values.
 *
 * > NOTE: If an event name is set to a true value here {@link EventTarget#trigger}
 *         will have extra functionality. See that function for more information.
 *
 * @property EventTarget.prototype.allowedEvents_
 * @private
 */EventTarget.prototype.allowedEvents_={};/**
 * Adds an `event listener` to an instance of an `EventTarget`. An `event listener` is a
 * function that will get called when an event with a certain name gets triggered.
 *
 * @param {string|string[]} type
 *        An event name or an array of event names.
 *
 * @param {EventTarget~EventListener} fn
 *        The function to call with `EventTarget`s
 */EventTarget.prototype.on=function(type,fn){// Remove the addEventListener alias before calling Events.on
// so we don't get into an infinite type loop
var ael=this.addEventListener;this.addEventListener=function(){};on(this,type,fn);this.addEventListener=ael;};/**
 * An alias of {@link EventTarget#on}. Allows `EventTarget` to mimic
 * the standard DOM API.
 *
 * @function
 * @see {@link EventTarget#on}
 */EventTarget.prototype.addEventListener=EventTarget.prototype.on;/**
 * Removes an `event listener` for a specific event from an instance of `EventTarget`.
 * This makes it so that the `event listener` will no longer get called when the
 * named event happens.
 *
 * @param {string|string[]} type
 *        An event name or an array of event names.
 *
 * @param {EventTarget~EventListener} fn
 *        The function to remove.
 */EventTarget.prototype.off=function(type,fn){off(this,type,fn);};/**
 * An alias of {@link EventTarget#off}. Allows `EventTarget` to mimic
 * the standard DOM API.
 *
 * @function
 * @see {@link EventTarget#off}
 */EventTarget.prototype.removeEventListener=EventTarget.prototype.off;/**
 * This function will add an `event listener` that gets triggered only once. After the
 * first trigger it will get removed. This is like adding an `event listener`
 * with {@link EventTarget#on} that calls {@link EventTarget#off} on itself.
 *
 * @param {string|string[]} type
 *        An event name or an array of event names.
 *
 * @param {EventTarget~EventListener} fn
 *        The function to be called once for each event name.
 */EventTarget.prototype.one=function(type,fn){// Remove the addEventListener alialing Events.on
// so we don't get into an infinite type loop
var ael=this.addEventListener;this.addEventListener=function(){};one(this,type,fn);this.addEventListener=ael;};/**
 * This function causes an event to happen. This will then cause any `event listeners`
 * that are waiting for that event, to get called. If there are no `event listeners`
 * for an event then nothing will happen.
 *
 * If the name of the `Event` that is being triggered is in `EventTarget.allowedEvents_`.
 * Trigger will also call the `on` + `uppercaseEventName` function.
 *
 * Example:
 * 'click' is in `EventTarget.allowedEvents_`, so, trigger will attempt to call
 * `onClick` if it exists.
 *
 * @param {string|EventTarget~Event|Object} event
 *        The name of the event, an `Event`, or an object with a key of type set to
 *        an event name.
 */EventTarget.prototype.trigger=function(event){var type=event.type||event;// deprecation
// In a future version we should default target to `this`
// similar to how we default the target to `elem` in
// `Events.trigger`. Right now the default `target` will be
// `document` due to the `Event.fixEvent` call.
if(typeof event==='string'){event={type:type};}event=fixEvent(event);if(this.allowedEvents_[type]&&this['on'+type]){this['on'+type](event);}trigger(this,event);};/**
 * An alias of {@link EventTarget#trigger}. Allows `EventTarget` to mimic
 * the standard DOM API.
 *
 * @function
 * @see {@link EventTarget#trigger}
 */EventTarget.prototype.dispatchEvent=EventTarget.prototype.trigger;var EVENT_MAP;EventTarget.prototype.queueTrigger=function(event){var _this=this;// only set up EVENT_MAP if it'll be used
if(!EVENT_MAP){EVENT_MAP=new Map();}var type=event.type||event;var map=EVENT_MAP.get(this);if(!map){map=new Map();EVENT_MAP.set(this,map);}var oldTimeout=map.get(type);map.delete(type);_window2.default.clearTimeout(oldTimeout);var timeout=_window2.default.setTimeout(function(){// if we cleared out all timeouts for the current target, delete its map
if(map.size===0){map=null;EVENT_MAP.delete(_this);}_this.trigger(event);},0);map.set(type,timeout);};/**
 * @file mixins/evented.js
 * @module evented
 *//**
 * Returns whether or not an object has had the evented mixin applied.
 *
 * @param  {Object} object
 *         An object to test.
 *
 * @return {boolean}
 *         Whether or not the object appears to be evented.
 */var isEvented=function isEvented(object){return object instanceof EventTarget||!!object.eventBusEl_&&['on','one','off','trigger'].every(function(k){return typeof object[k]==='function';});};/**
 * Adds a callback to run after the evented mixin applied.
 *
 * @param  {Object} object
 *         An object to Add
 * @param  {Function} callback
 *         The callback to run.
 */var addEventedCallback=function addEventedCallback(target,callback){if(isEvented(target)){callback();}else{if(!target.eventedCallbacks){target.eventedCallbacks=[];}target.eventedCallbacks.push(callback);}};/**
 * Whether a value is a valid event type - non-empty string or array.
 *
 * @private
 * @param  {string|Array} type
 *         The type value to test.
 *
 * @return {boolean}
 *         Whether or not the type is a valid event type.
 */var isValidEventType=function isValidEventType(type){return(// The regex here verifies that the `type` contains at least one non-
// whitespace character.
typeof type==='string'&&/\S/.test(type)||Array.isArray(type)&&!!type.length);};/**
 * Validates a value to determine if it is a valid event target. Throws if not.
 *
 * @private
 * @throws {Error}
 *         If the target does not appear to be a valid event target.
 *
 * @param  {Object} target
 *         The object to test.
 */var validateTarget=function validateTarget(target){if(!target.nodeName&&!isEvented(target)){throw new Error('Invalid target; must be a DOM node or evented object.');}};/**
 * Validates a value to determine if it is a valid event target. Throws if not.
 *
 * @private
 * @throws {Error}
 *         If the type does not appear to be a valid event type.
 *
 * @param  {string|Array} type
 *         The type to test.
 */var validateEventType=function validateEventType(type){if(!isValidEventType(type)){throw new Error('Invalid event type; must be a non-empty string or array.');}};/**
 * Validates a value to determine if it is a valid listener. Throws if not.
 *
 * @private
 * @throws {Error}
 *         If the listener is not a function.
 *
 * @param  {Function} listener
 *         The listener to test.
 */var validateListener=function validateListener(listener){if(typeof listener!=='function'){throw new Error('Invalid listener; must be a function.');}};/**
 * Takes an array of arguments given to `on()` or `one()`, validates them, and
 * normalizes them into an object.
 *
 * @private
 * @param  {Object} self
 *         The evented object on which `on()` or `one()` was called. This
 *         object will be bound as the `this` value for the listener.
 *
 * @param  {Array} args
 *         An array of arguments passed to `on()` or `one()`.
 *
 * @return {Object}
 *         An object containing useful values for `on()` or `one()` calls.
 */var normalizeListenArgs=function normalizeListenArgs(self,args){// If the number of arguments is less than 3, the target is always the
// evented object itself.
var isTargetingSelf=args.length<3||args[0]===self||args[0]===self.eventBusEl_;var target;var type;var listener;if(isTargetingSelf){target=self.eventBusEl_;// Deal with cases where we got 3 arguments, but we are still listening to
// the evented object itself.
if(args.length>=3){args.shift();}type=args[0];listener=args[1];}else{target=args[0];type=args[1];listener=args[2];}validateTarget(target);validateEventType(type);validateListener(listener);listener=bind(self,listener);return{isTargetingSelf:isTargetingSelf,target:target,type:type,listener:listener};};/**
 * Adds the listener to the event type(s) on the target, normalizing for
 * the type of target.
 *
 * @private
 * @param  {Element|Object} target
 *         A DOM node or evented object.
 *
 * @param  {string} method
 *         The event binding method to use ("on" or "one").
 *
 * @param  {string|Array} type
 *         One or more event type(s).
 *
 * @param  {Function} listener
 *         A listener function.
 */var listen=function listen(target,method,type,listener){validateTarget(target);if(target.nodeName){Events[method](target,type,listener);}else{target[method](type,listener);}};/**
 * Contains methods that provide event capabilities to an object which is passed
 * to {@link module:evented|evented}.
 *
 * @mixin EventedMixin
 */var EventedMixin={/**
   * Add a listener to an event (or events) on this object or another evented
   * object.
   *
   * @param  {string|Array|Element|Object} targetOrType
   *         If this is a string or array, it represents the event type(s)
   *         that will trigger the listener.
   *
   *         Another evented object can be passed here instead, which will
   *         cause the listener to listen for events on _that_ object.
   *
   *         In either case, the listener's `this` value will be bound to
   *         this object.
   *
   * @param  {string|Array|Function} typeOrListener
   *         If the first argument was a string or array, this should be the
   *         listener function. Otherwise, this is a string or array of event
   *         type(s).
   *
   * @param  {Function} [listener]
   *         If the first argument was another evented object, this will be
   *         the listener function.
   */on:function on$$1(){var _this=this;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var _normalizeListenArgs=normalizeListenArgs(this,args),isTargetingSelf=_normalizeListenArgs.isTargetingSelf,target=_normalizeListenArgs.target,type=_normalizeListenArgs.type,listener=_normalizeListenArgs.listener;listen(target,'on',type,listener);// If this object is listening to another evented object.
if(!isTargetingSelf){// If this object is disposed, remove the listener.
var removeListenerOnDispose=function removeListenerOnDispose(){return _this.off(target,type,listener);};// Use the same function ID as the listener so we can remove it later it
// using the ID of the original listener.
removeListenerOnDispose.guid=listener.guid;// Add a listener to the target's dispose event as well. This ensures
// that if the target is disposed BEFORE this object, we remove the
// removal listener that was just added. Otherwise, we create a memory leak.
var removeRemoverOnTargetDispose=function removeRemoverOnTargetDispose(){return _this.off('dispose',removeListenerOnDispose);};// Use the same function ID as the listener so we can remove it later
// it using the ID of the original listener.
removeRemoverOnTargetDispose.guid=listener.guid;listen(this,'on','dispose',removeListenerOnDispose);listen(target,'on','dispose',removeRemoverOnTargetDispose);}},/**
   * Add a listener to an event (or events) on this object or another evented
   * object. The listener will only be called once and then removed.
   *
   * @param  {string|Array|Element|Object} targetOrType
   *         If this is a string or array, it represents the event type(s)
   *         that will trigger the listener.
   *
   *         Another evented object can be passed here instead, which will
   *         cause the listener to listen for events on _that_ object.
   *
   *         In either case, the listener's `this` value will be bound to
   *         this object.
   *
   * @param  {string|Array|Function} typeOrListener
   *         If the first argument was a string or array, this should be the
   *         listener function. Otherwise, this is a string or array of event
   *         type(s).
   *
   * @param  {Function} [listener]
   *         If the first argument was another evented object, this will be
   *         the listener function.
   */one:function one$$1(){var _this2=this;for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}var _normalizeListenArgs2=normalizeListenArgs(this,args),isTargetingSelf=_normalizeListenArgs2.isTargetingSelf,target=_normalizeListenArgs2.target,type=_normalizeListenArgs2.type,listener=_normalizeListenArgs2.listener;// Targeting this evented object.
if(isTargetingSelf){listen(target,'one',type,listener);// Targeting another evented object.
}else{var wrapper=function wrapper(){_this2.off(target,type,wrapper);for(var _len3=arguments.length,largs=new Array(_len3),_key3=0;_key3<_len3;_key3++){largs[_key3]=arguments[_key3];}listener.apply(null,largs);};// Use the same function ID as the listener so we can remove it later
// it using the ID of the original listener.
wrapper.guid=listener.guid;listen(target,'one',type,wrapper);}},/**
   * Removes listener(s) from event(s) on an evented object.
   *
   * @param  {string|Array|Element|Object} [targetOrType]
   *         If this is a string or array, it represents the event type(s).
   *
   *         Another evented object can be passed here instead, in which case
   *         ALL 3 arguments are _required_.
   *
   * @param  {string|Array|Function} [typeOrListener]
   *         If the first argument was a string or array, this may be the
   *         listener function. Otherwise, this is a string or array of event
   *         type(s).
   *
   * @param  {Function} [listener]
   *         If the first argument was another evented object, this will be
   *         the listener function; otherwise, _all_ listeners bound to the
   *         event type(s) will be removed.
   */off:function off$$1(targetOrType,typeOrListener,listener){// Targeting this evented object.
if(!targetOrType||isValidEventType(targetOrType)){off(this.eventBusEl_,targetOrType,typeOrListener);// Targeting another evented object.
}else{var target=targetOrType;var type=typeOrListener;// Fail fast and in a meaningful way!
validateTarget(target);validateEventType(type);validateListener(listener);// Ensure there's at least a guid, even if the function hasn't been used
listener=bind(this,listener);// Remove the dispose listener on this evented object, which was given
// the same guid as the event listener in on().
this.off('dispose',listener);if(target.nodeName){off(target,type,listener);off(target,'dispose',listener);}else if(isEvented(target)){target.off(type,listener);target.off('dispose',listener);}}},/**
   * Fire an event on this evented object, causing its listeners to be called.
   *
   * @param   {string|Object} event
   *          An event type or an object with a type property.
   *
   * @param   {Object} [hash]
   *          An additional object to pass along to listeners.
   *
   * @return {boolean}
   *          Whether or not the default behavior was prevented.
   */trigger:function trigger$$1(event,hash){return trigger(this.eventBusEl_,event,hash);}};/**
 * Applies {@link module:evented~EventedMixin|EventedMixin} to a target object.
 *
 * @param  {Object} target
 *         The object to which to add event methods.
 *
 * @param  {Object} [options={}]
 *         Options for customizing the mixin behavior.
 *
 * @param  {string} [options.eventBusKey]
 *         By default, adds a `eventBusEl_` DOM element to the target object,
 *         which is used as an event bus. If the target object already has a
 *         DOM element that should be used, pass its key here.
 *
 * @return {Object}
 *         The target object.
 */function evented(target,options){if(options===void 0){options={};}var _options=options,eventBusKey=_options.eventBusKey;// Set or create the eventBusEl_.
if(eventBusKey){if(!target[eventBusKey].nodeName){throw new Error("The eventBusKey \""+eventBusKey+"\" does not refer to an element.");}target.eventBusEl_=target[eventBusKey];}else{target.eventBusEl_=createEl('span',{className:'vjs-event-bus'});}assign(target,EventedMixin);if(target.eventedCallbacks){target.eventedCallbacks.forEach(function(callback){callback();});}// When any evented object is disposed, it removes all its listeners.
target.on('dispose',function(){target.off();_window2.default.setTimeout(function(){target.eventBusEl_=null;},0);});return target;}/**
 * @file mixins/stateful.js
 * @module stateful
 *//**
 * Contains methods that provide statefulness to an object which is passed
 * to {@link module:stateful}.
 *
 * @mixin StatefulMixin
 */var StatefulMixin={/**
   * A hash containing arbitrary keys and values representing the state of
   * the object.
   *
   * @type {Object}
   */state:{},/**
   * Set the state of an object by mutating its
   * {@link module:stateful~StatefulMixin.state|state} object in place.
   *
   * @fires   module:stateful~StatefulMixin#statechanged
   * @param   {Object|Function} stateUpdates
   *          A new set of properties to shallow-merge into the plugin state.
   *          Can be a plain object or a function returning a plain object.
   *
   * @return {Object|undefined}
   *          An object containing changes that occurred. If no changes
   *          occurred, returns `undefined`.
   */setState:function setState(stateUpdates){var _this=this;// Support providing the `stateUpdates` state as a function.
if(typeof stateUpdates==='function'){stateUpdates=stateUpdates();}var changes;each(stateUpdates,function(value,key){// Record the change if the value is different from what's in the
// current state.
if(_this.state[key]!==value){changes=changes||{};changes[key]={from:_this.state[key],to:value};}_this.state[key]=value;});// Only trigger "statechange" if there were changes AND we have a trigger
// function. This allows us to not require that the target object be an
// evented object.
if(changes&&isEvented(this)){/**
       * An event triggered on an object that is both
       * {@link module:stateful|stateful} and {@link module:evented|evented}
       * indicating that its state has changed.
       *
       * @event    module:stateful~StatefulMixin#statechanged
       * @type     {Object}
       * @property {Object} changes
       *           A hash containing the properties that were changed and
       *           the values they were changed `from` and `to`.
       */this.trigger({changes:changes,type:'statechanged'});}return changes;}};/**
 * Applies {@link module:stateful~StatefulMixin|StatefulMixin} to a target
 * object.
 *
 * If the target object is {@link module:evented|evented} and has a
 * `handleStateChanged` method, that method will be automatically bound to the
 * `statechanged` event on itself.
 *
 * @param   {Object} target
 *          The object to be made stateful.
 *
 * @param   {Object} [defaultState]
 *          A default set of properties to populate the newly-stateful object's
 *          `state` property.
 *
 * @return {Object}
 *          Returns the `target`.
 */function stateful(target,defaultState){assign(target,StatefulMixin);// This happens after the mixing-in because we need to replace the `state`
// added in that step.
target.state=assign({},target.state,defaultState);// Auto-bind the `handleStateChanged` method of the target object if it exists.
if(typeof target.handleStateChanged==='function'&&isEvented(target)){target.on('statechanged',target.handleStateChanged);}return target;}/**
 * @file to-title-case.js
 * @module to-title-case
 *//**
 * Uppercase the first letter of a string.
 *
 * @param {string} string
 *        String to be uppercased
 *
 * @return {string}
 *         The string with an uppercased first letter
 */function toTitleCase(string){if(typeof string!=='string'){return string;}return string.charAt(0).toUpperCase()+string.slice(1);}/**
 * Compares the TitleCase versions of the two strings for equality.
 *
 * @param {string} str1
 *        The first string to compare
 *
 * @param {string} str2
 *        The second string to compare
 *
 * @return {boolean}
 *         Whether the TitleCase versions of the strings are equal
 */function titleCaseEquals(str1,str2){return toTitleCase(str1)===toTitleCase(str2);}/**
 * @file merge-options.js
 * @module merge-options
 *//**
 * Merge two objects recursively.
 *
 * Performs a deep merge like
 * {@link https://lodash.com/docs/4.17.10#merge|lodash.merge}, but only merges
 * plain objects (not arrays, elements, or anything else).
 *
 * Non-plain object values will be copied directly from the right-most
 * argument.
 *
 * @static
 * @param   {Object[]} sources
 *          One or more objects to merge into a new object.
 *
 * @return {Object}
 *          A new object that is the merged result of all sources.
 */function mergeOptions(){var result={};for(var _len=arguments.length,sources=new Array(_len),_key=0;_key<_len;_key++){sources[_key]=arguments[_key];}sources.forEach(function(source){if(!source){return;}each(source,function(value,key){if(!isPlain(value)){result[key]=value;return;}if(!isPlain(result[key])){result[key]={};}result[key]=mergeOptions(result[key],value);});});return result;}/**
 * Player Component - Base class for all UI objects
 *
 * @file component.js
 *//**
 * Base class for all UI Components.
 * Components are UI objects which represent both a javascript object and an element
 * in the DOM. They can be children of other components, and can have
 * children themselves.
 *
 * Components can also use methods from {@link EventTarget}
 */var Component=/*#__PURE__*/function(){/**
   * A callback that is called when a component is ready. Does not have any
   * paramters and any callback value will be ignored.
   *
   * @callback Component~ReadyCallback
   * @this Component
   *//**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   *
   * @param {Object[]} [options.children]
   *        An array of children objects to intialize this component with. Children objects have
   *        a name property that will be used if more than one component of the same type needs to be
   *        added.
   *
   * @param {Component~ReadyCallback} [ready]
   *        Function that gets called when the `Component` is ready.
   */function Component(player,options,ready){// The component might be the player itself and we can't pass `this` to super
if(!player&&this.play){this.player_=player=this;// eslint-disable-line
}else{this.player_=player;}// Hold the reference to the parent component via `addChild` method
this.parentComponent_=null;// Make a copy of prototype.options_ to protect against overriding defaults
this.options_=mergeOptions({},this.options_);// Updated options with supplied options
options=this.options_=mergeOptions(this.options_,options);// Get ID from options or options element if one is supplied
this.id_=options.id||options.el&&options.el.id;// If there was no ID from the options, generate one
if(!this.id_){// Don't require the player ID function in the case of mock players
var id=player&&player.id&&player.id()||'no_player';this.id_=id+"_component_"+newGUID();}this.name_=options.name||null;// Create element if one wasn't provided in options
if(options.el){this.el_=options.el;}else if(options.createEl!==false){this.el_=this.createEl();}// if evented is anything except false, we want to mixin in evented
if(options.evented!==false){// Make this an evented object and use `el_`, if available, as its event bus
evented(this,{eventBusKey:this.el_?'el_':null});}stateful(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};// Add any child components in options
if(options.initChildren!==false){this.initChildren();}this.ready(ready);// Don't want to trigger ready here or it will before init is actually
// finished for all children that run this constructor
if(options.reportTouchActivity!==false){this.enableTouchActivity();}}/**
   * Dispose of the `Component` and all child components.
   *
   * @fires Component#dispose
   */var _proto=Component.prototype;_proto.dispose=function dispose(){/**
     * Triggered when a `Component` is disposed.
     *
     * @event Component#dispose
     * @type {EventTarget~Event}
     *
     * @property {boolean} [bubbles=false]
     *           set to false so that the close event does not
     *           bubble up
     */this.trigger({type:'dispose',bubbles:false});// Dispose all children.
if(this.children_){for(var i=this.children_.length-1;i>=0;i--){if(this.children_[i].dispose){this.children_[i].dispose();}}}// Delete child references
this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.parentComponent_=null;if(this.el_){// Remove element from DOM
if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_);}removeData(this.el_);this.el_=null;}// remove reference to the player after disposing of the element
this.player_=null;}/**
   * Return the {@link Player} that the `Component` has attached to.
   *
   * @return {Player}
   *         The player that this `Component` has attached to.
   */;_proto.player=function player(){return this.player_;}/**
   * Deep merge of options objects with new options.
   * > Note: When both `obj` and `options` contain properties whose values are objects.
   *         The two properties get merged using {@link module:mergeOptions}
   *
   * @param {Object} obj
   *        The object that contains new options.
   *
   * @return {Object}
   *         A new object of `this.options_` and `obj` merged together.
   *
   * @deprecated since version 5
   */;_proto.options=function options(obj){log.warn('this.options() has been deprecated and will be moved to the constructor in 6.0');if(!obj){return this.options_;}this.options_=mergeOptions(this.options_,obj);return this.options_;}/**
   * Get the `Component`s DOM element
   *
   * @return {Element}
   *         The DOM element for this `Component`.
   */;_proto.el=function el(){return this.el_;}/**
   * Create the `Component`s DOM element.
   *
   * @param {string} [tagName]
   *        Element's DOM node type. e.g. 'div'
   *
   * @param {Object} [properties]
   *        An object of properties that should be set.
   *
   * @param {Object} [attributes]
   *        An object of attributes that should be set.
   *
   * @return {Element}
   *         The element that gets created.
   */;_proto.createEl=function createEl$$1(tagName,properties,attributes){return createEl(tagName,properties,attributes);}/**
   * Localize a string given the string in english.
   *
   * If tokens are provided, it'll try and run a simple token replacement on the provided string.
   * The tokens it looks for look like `{1}` with the index being 1-indexed into the tokens array.
   *
   * If a `defaultValue` is provided, it'll use that over `string`,
   * if a value isn't found in provided language files.
   * This is useful if you want to have a descriptive key for token replacement
   * but have a succinct localized string and not require `en.json` to be included.
   *
   * Currently, it is used for the progress bar timing.
   * ```js
   * {
   *   "progress bar timing: currentTime={1} duration={2}": "{1} of {2}"
   * }
   * ```
   * It is then used like so:
   * ```js
   * this.localize('progress bar timing: currentTime={1} duration{2}',
   *               [this.player_.currentTime(), this.player_.duration()],
   *               '{1} of {2}');
   * ```
   *
   * Which outputs something like: `01:23 of 24:56`.
   *
   *
   * @param {string} string
   *        The string to localize and the key to lookup in the language files.
   * @param {string[]} [tokens]
   *        If the current item has token replacements, provide the tokens here.
   * @param {string} [defaultValue]
   *        Defaults to `string`. Can be a default value to use for token replacement
   *        if the lookup key is needed to be separate.
   *
   * @return {string}
   *         The localized string or if no localization exists the english string.
   */;_proto.localize=function localize(string,tokens,defaultValue){if(defaultValue===void 0){defaultValue=string;}var code=this.player_.language&&this.player_.language();var languages=this.player_.languages&&this.player_.languages();var language=languages&&languages[code];var primaryCode=code&&code.split('-')[0];var primaryLang=languages&&languages[primaryCode];var localizedString=defaultValue;if(language&&language[string]){localizedString=language[string];}else if(primaryLang&&primaryLang[string]){localizedString=primaryLang[string];}if(tokens){localizedString=localizedString.replace(/\{(\d+)\}/g,function(match,index){var value=tokens[index-1];var ret=value;if(typeof value==='undefined'){ret=match;}return ret;});}return localizedString;}/**
   * Return the `Component`s DOM element. This is where children get inserted.
   * This will usually be the the same as the element returned in {@link Component#el}.
   *
   * @return {Element}
   *         The content element for this `Component`.
   */;_proto.contentEl=function contentEl(){return this.contentEl_||this.el_;}/**
   * Get this `Component`s ID
   *
   * @return {string}
   *         The id of this `Component`
   */;_proto.id=function id(){return this.id_;}/**
   * Get the `Component`s name. The name gets used to reference the `Component`
   * and is set during registration.
   *
   * @return {string}
   *         The name of this `Component`.
   */;_proto.name=function name(){return this.name_;}/**
   * Get an array of all child components
   *
   * @return {Array}
   *         The children
   */;_proto.children=function children(){return this.children_;}/**
   * Returns the child `Component` with the given `id`.
   *
   * @param {string} id
   *        The id of the child `Component` to get.
   *
   * @return {Component|undefined}
   *         The child `Component` with the given `id` or undefined.
   */;_proto.getChildById=function getChildById(id){return this.childIndex_[id];}/**
   * Returns the child `Component` with the given `name`.
   *
   * @param {string} name
   *        The name of the child `Component` to get.
   *
   * @return {Component|undefined}
   *         The child `Component` with the given `name` or undefined.
   */;_proto.getChild=function getChild(name){if(!name){return;}name=toTitleCase(name);return this.childNameIndex_[name];}/**
   * Add a child `Component` inside the current `Component`.
   *
   *
   * @param {string|Component} child
   *        The name or instance of a child to add.
   *
   * @param {Object} [options={}]
   *        The key/value store of options that will get passed to children of
   *        the child.
   *
   * @param {number} [index=this.children_.length]
   *        The index to attempt to add a child into.
   *
   * @return {Component}
   *         The `Component` that gets added as a child. When using a string the
   *         `Component` will get created by this process.
   */;_proto.addChild=function addChild(child,options,index){if(options===void 0){options={};}if(index===void 0){index=this.children_.length;}var component;var componentName;// If child is a string, create component with options
if(typeof child==='string'){componentName=toTitleCase(child);var componentClassName=options.componentClass||componentName;// Set name through options
options.name=componentName;// Create a new object & element for this controls set
// If there's no .player_, this is a player
var ComponentClass=Component.getComponent(componentClassName);if(!ComponentClass){throw new Error("Component "+componentClassName+" does not exist");}// data stored directly on the videojs object may be
// misidentified as a component to retain
// backwards-compatibility with 4.x. check to make sure the
// component class can be instantiated.
if(typeof ComponentClass!=='function'){return null;}component=new ComponentClass(this.player_||this,options);// child is a component instance
}else{component=child;}if(component.parentComponent_){component.parentComponent_.removeChild(component);}this.children_.splice(index,0,component);component.parentComponent_=this;if(typeof component.id==='function'){this.childIndex_[component.id()]=component;}// If a name wasn't used to create the component, check if we can use the
// name function of the component
componentName=componentName||component.name&&toTitleCase(component.name());if(componentName){this.childNameIndex_[componentName]=component;}// Add the UI object's element to the container div (box)
// Having an element is not required
if(typeof component.el==='function'&&component.el()){var childNodes=this.contentEl().children;var refNode=childNodes[index]||null;this.contentEl().insertBefore(component.el(),refNode);}// Return so it can stored on parent object if desired.
return component;}/**
   * Remove a child `Component` from this `Component`s list of children. Also removes
   * the child `Component`s element from this `Component`s element.
   *
   * @param {Component} component
   *        The child `Component` to remove.
   */;_proto.removeChild=function removeChild(component){if(typeof component==='string'){component=this.getChild(component);}if(!component||!this.children_){return;}var childFound=false;for(var i=this.children_.length-1;i>=0;i--){if(this.children_[i]===component){childFound=true;this.children_.splice(i,1);break;}}if(!childFound){return;}component.parentComponent_=null;this.childIndex_[component.id()]=null;this.childNameIndex_[component.name()]=null;var compEl=component.el();if(compEl&&compEl.parentNode===this.contentEl()){this.contentEl().removeChild(component.el());}}/**
   * Add and initialize default child `Component`s based upon options.
   */;_proto.initChildren=function initChildren(){var _this=this;var children=this.options_.children;if(children){// `this` is `parent`
var parentOptions=this.options_;var handleAdd=function handleAdd(child){var name=child.name;var opts=child.opts;// Allow options for children to be set at the parent options
// e.g. videojs(id, { controlBar: false });
// instead of videojs(id, { children: { controlBar: false });
if(parentOptions[name]!==undefined){opts=parentOptions[name];}// Allow for disabling default components
// e.g. options['children']['posterImage'] = false
if(opts===false){return;}// Allow options to be passed as a simple boolean if no configuration
// is necessary.
if(opts===true){opts={};}// We also want to pass the original player options
// to each component as well so they don't need to
// reach back into the player for options later.
opts.playerOptions=_this.options_.playerOptions;// Create and add the child component.
// Add a direct reference to the child by name on the parent instance.
// If two of the same component are used, different names should be supplied
// for each
var newChild=_this.addChild(name,opts);if(newChild){_this[name]=newChild;}};// Allow for an array of children details to passed in the options
var workingChildren;var Tech=Component.getComponent('Tech');if(Array.isArray(children)){workingChildren=children;}else{workingChildren=Object.keys(children);}workingChildren// children that are in this.options_ but also in workingChildren  would
// give us extra children we do not want. So, we want to filter them out.
.concat(Object.keys(this.options_).filter(function(child){return!workingChildren.some(function(wchild){if(typeof wchild==='string'){return child===wchild;}return child===wchild.name;});})).map(function(child){var name;var opts;if(typeof child==='string'){name=child;opts=children[name]||_this.options_[name]||{};}else{name=child.name;opts=child;}return{name:name,opts:opts};}).filter(function(child){// we have to make sure that child.name isn't in the techOrder since
// techs are registerd as Components but can't aren't compatible
// See https://github.com/videojs/video.js/issues/2772
var c=Component.getComponent(child.opts.componentClass||toTitleCase(child.name));return c&&!Tech.isTech(c);}).forEach(handleAdd);}}/**
   * Builds the default DOM class name. Should be overriden by sub-components.
   *
   * @return {string}
   *         The DOM class name for this object.
   *
   * @abstract
   */;_proto.buildCSSClass=function buildCSSClass(){// Child classes can include a function that does:
// return 'CLASS NAME' + this._super();
return'';}/**
   * Bind a listener to the component's ready state.
   * Different from event listeners in that if the ready event has already happened
   * it will trigger the function immediately.
   *
   * @return {Component}
   *         Returns itself; method can be chained.
   */;_proto.ready=function ready(fn,sync){if(sync===void 0){sync=false;}if(!fn){return;}if(!this.isReady_){this.readyQueue_=this.readyQueue_||[];this.readyQueue_.push(fn);return;}if(sync){fn.call(this);}else{// Call the function asynchronously by default for consistency
this.setTimeout(fn,1);}}/**
   * Trigger all the ready listeners for this `Component`.
   *
   * @fires Component#ready
   */;_proto.triggerReady=function triggerReady(){this.isReady_=true;// Ensure ready is triggered asynchronously
this.setTimeout(function(){var readyQueue=this.readyQueue_;// Reset Ready Queue
this.readyQueue_=[];if(readyQueue&&readyQueue.length>0){readyQueue.forEach(function(fn){fn.call(this);},this);}// Allow for using event listeners also
/**
       * Triggered when a `Component` is ready.
       *
       * @event Component#ready
       * @type {EventTarget~Event}
       */this.trigger('ready');},1);}/**
   * Find a single DOM element matching a `selector`. This can be within the `Component`s
   * `contentEl()` or another custom context.
   *
   * @param {string} selector
   *        A valid CSS selector, which will be passed to `querySelector`.
   *
   * @param {Element|string} [context=this.contentEl()]
   *        A DOM element within which to query. Can also be a selector string in
   *        which case the first matching element will get used as context. If
   *        missing `this.contentEl()` gets used. If  `this.contentEl()` returns
   *        nothing it falls back to `document`.
   *
   * @return {Element|null}
   *         the dom element that was found, or null
   *
   * @see [Information on CSS Selectors](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_Started/Selectors)
   */;_proto.$=function $$$1(selector,context){return $(selector,context||this.contentEl());}/**
   * Finds all DOM element matching a `selector`. This can be within the `Component`s
   * `contentEl()` or another custom context.
   *
   * @param {string} selector
   *        A valid CSS selector, which will be passed to `querySelectorAll`.
   *
   * @param {Element|string} [context=this.contentEl()]
   *        A DOM element within which to query. Can also be a selector string in
   *        which case the first matching element will get used as context. If
   *        missing `this.contentEl()` gets used. If  `this.contentEl()` returns
   *        nothing it falls back to `document`.
   *
   * @return {NodeList}
   *         a list of dom elements that were found
   *
   * @see [Information on CSS Selectors](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_Started/Selectors)
   */;_proto.$$=function $$$$1(selector,context){return $$(selector,context||this.contentEl());}/**
   * Check if a component's element has a CSS class name.
   *
   * @param {string} classToCheck
   *        CSS class name to check.
   *
   * @return {boolean}
   *         - True if the `Component` has the class.
   *         - False if the `Component` does not have the class`
   */;_proto.hasClass=function hasClass$$1(classToCheck){return hasClass(this.el_,classToCheck);}/**
   * Add a CSS class name to the `Component`s element.
   *
   * @param {string} classToAdd
   *        CSS class name to add
   */;_proto.addClass=function addClass$$1(classToAdd){addClass(this.el_,classToAdd);}/**
   * Remove a CSS class name from the `Component`s element.
   *
   * @param {string} classToRemove
   *        CSS class name to remove
   */;_proto.removeClass=function removeClass$$1(classToRemove){removeClass(this.el_,classToRemove);}/**
   * Add or remove a CSS class name from the component's element.
   * - `classToToggle` gets added when {@link Component#hasClass} would return false.
   * - `classToToggle` gets removed when {@link Component#hasClass} would return true.
   *
   * @param  {string} classToToggle
   *         The class to add or remove based on (@link Component#hasClass}
   *
   * @param  {boolean|Dom~predicate} [predicate]
   *         An {@link Dom~predicate} function or a boolean
   */;_proto.toggleClass=function toggleClass$$1(classToToggle,predicate){toggleClass(this.el_,classToToggle,predicate);}/**
   * Show the `Component`s element if it is hidden by removing the
   * 'vjs-hidden' class name from it.
   */;_proto.show=function show(){this.removeClass('vjs-hidden');}/**
   * Hide the `Component`s element if it is currently showing by adding the
   * 'vjs-hidden` class name to it.
   */;_proto.hide=function hide(){this.addClass('vjs-hidden');}/**
   * Lock a `Component`s element in its visible state by adding the 'vjs-lock-showing'
   * class name to it. Used during fadeIn/fadeOut.
   *
   * @private
   */;_proto.lockShowing=function lockShowing(){this.addClass('vjs-lock-showing');}/**
   * Unlock a `Component`s element from its visible state by removing the 'vjs-lock-showing'
   * class name from it. Used during fadeIn/fadeOut.
   *
   * @private
   */;_proto.unlockShowing=function unlockShowing(){this.removeClass('vjs-lock-showing');}/**
   * Get the value of an attribute on the `Component`s element.
   *
   * @param {string} attribute
   *        Name of the attribute to get the value from.
   *
   * @return {string|null}
   *         - The value of the attribute that was asked for.
   *         - Can be an empty string on some browsers if the attribute does not exist
   *           or has no value
   *         - Most browsers will return null if the attibute does not exist or has
   *           no value.
   *
   * @see [DOM API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute}
   */;_proto.getAttribute=function getAttribute$$1(attribute){return getAttribute(this.el_,attribute);}/**
   * Set the value of an attribute on the `Component`'s element
   *
   * @param {string} attribute
   *        Name of the attribute to set.
   *
   * @param {string} value
   *        Value to set the attribute to.
   *
   * @see [DOM API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute}
   */;_proto.setAttribute=function setAttribute$$1(attribute,value){setAttribute(this.el_,attribute,value);}/**
   * Remove an attribute from the `Component`s element.
   *
   * @param {string} attribute
   *        Name of the attribute to remove.
   *
   * @see [DOM API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute}
   */;_proto.removeAttribute=function removeAttribute$$1(attribute){removeAttribute(this.el_,attribute);}/**
   * Get or set the width of the component based upon the CSS styles.
   * See {@link Component#dimension} for more detailed information.
   *
   * @param {number|string} [num]
   *        The width that you want to set postfixed with '%', 'px' or nothing.
   *
   * @param {boolean} [skipListeners]
   *        Skip the componentresize event trigger
   *
   * @return {number|string}
   *         The width when getting, zero if there is no width. Can be a string
   *           postpixed with '%' or 'px'.
   */;_proto.width=function width(num,skipListeners){return this.dimension('width',num,skipListeners);}/**
   * Get or set the height of the component based upon the CSS styles.
   * See {@link Component#dimension} for more detailed information.
   *
   * @param {number|string} [num]
   *        The height that you want to set postfixed with '%', 'px' or nothing.
   *
   * @param {boolean} [skipListeners]
   *        Skip the componentresize event trigger
   *
   * @return {number|string}
   *         The width when getting, zero if there is no width. Can be a string
   *         postpixed with '%' or 'px'.
   */;_proto.height=function height(num,skipListeners){return this.dimension('height',num,skipListeners);}/**
   * Set both the width and height of the `Component` element at the same time.
   *
   * @param  {number|string} width
   *         Width to set the `Component`s element to.
   *
   * @param  {number|string} height
   *         Height to set the `Component`s element to.
   */;_proto.dimensions=function dimensions(width,height){// Skip componentresize listeners on width for optimization
this.width(width,true);this.height(height);}/**
   * Get or set width or height of the `Component` element. This is the shared code
   * for the {@link Component#width} and {@link Component#height}.
   *
   * Things to know:
   * - If the width or height in an number this will return the number postfixed with 'px'.
   * - If the width/height is a percent this will return the percent postfixed with '%'
   * - Hidden elements have a width of 0 with `window.getComputedStyle`. This function
   *   defaults to the `Component`s `style.width` and falls back to `window.getComputedStyle`.
   *   See [this]{@link http://www.foliotek.com/devblog/getting-the-width-of-a-hidden-element-with-jquery-using-width/}
   *   for more information
   * - If you want the computed style of the component, use {@link Component#currentWidth}
   *   and {@link {Component#currentHeight}
   *
   * @fires Component#componentresize
   *
   * @param {string} widthOrHeight
   8        'width' or 'height'
   *
   * @param  {number|string} [num]
   8         New dimension
   *
   * @param  {boolean} [skipListeners]
   *         Skip componentresize event trigger
   *
   * @return {number}
   *         The dimension when getting or 0 if unset
   */;_proto.dimension=function dimension(widthOrHeight,num,skipListeners){if(num!==undefined){// Set to zero if null or literally NaN (NaN !== NaN)
if(num===null||num!==num){num=0;}// Check if using css width/height (% or px) and adjust
if((''+num).indexOf('%')!==-1||(''+num).indexOf('px')!==-1){this.el_.style[widthOrHeight]=num;}else if(num==='auto'){this.el_.style[widthOrHeight]='';}else{this.el_.style[widthOrHeight]=num+'px';}// skipListeners allows us to avoid triggering the resize event when setting both width and height
if(!skipListeners){/**
         * Triggered when a component is resized.
         *
         * @event Component#componentresize
         * @type {EventTarget~Event}
         */this.trigger('componentresize');}return;}// Not setting a value, so getting it
// Make sure element exists
if(!this.el_){return 0;}// Get dimension value from style
var val=this.el_.style[widthOrHeight];var pxIndex=val.indexOf('px');if(pxIndex!==-1){// Return the pixel value with no 'px'
return parseInt(val.slice(0,pxIndex),10);}// No px so using % or no style was set, so falling back to offsetWidth/height
// If component has display:none, offset will return 0
// TODO: handle display:none and no dimension style using px
return parseInt(this.el_['offset'+toTitleCase(widthOrHeight)],10);}/**
   * Get the computed width or the height of the component's element.
   *
   * Uses `window.getComputedStyle`.
   *
   * @param {string} widthOrHeight
   *        A string containing 'width' or 'height'. Whichever one you want to get.
   *
   * @return {number}
   *         The dimension that gets asked for or 0 if nothing was set
   *         for that dimension.
   */;_proto.currentDimension=function currentDimension(widthOrHeight){var computedWidthOrHeight=0;if(widthOrHeight!=='width'&&widthOrHeight!=='height'){throw new Error('currentDimension only accepts width or height value');}if(typeof _window2.default.getComputedStyle==='function'){var computedStyle=_window2.default.getComputedStyle(this.el_);computedWidthOrHeight=computedStyle.getPropertyValue(widthOrHeight)||computedStyle[widthOrHeight];}// remove 'px' from variable and parse as integer
computedWidthOrHeight=parseFloat(computedWidthOrHeight);// if the computed value is still 0, it's possible that the browser is lying
// and we want to check the offset values.
// This code also runs wherever getComputedStyle doesn't exist.
if(computedWidthOrHeight===0){var rule="offset"+toTitleCase(widthOrHeight);computedWidthOrHeight=this.el_[rule];}return computedWidthOrHeight;}/**
   * An object that contains width and height values of the `Component`s
   * computed style. Uses `window.getComputedStyle`.
   *
   * @typedef {Object} Component~DimensionObject
   *
   * @property {number} width
   *           The width of the `Component`s computed style.
   *
   * @property {number} height
   *           The height of the `Component`s computed style.
   *//**
   * Get an object that contains computed width and height values of the
   * component's element.
   *
   * Uses `window.getComputedStyle`.
   *
   * @return {Component~DimensionObject}
   *         The computed dimensions of the component's element.
   */;_proto.currentDimensions=function currentDimensions(){return{width:this.currentDimension('width'),height:this.currentDimension('height')};}/**
   * Get the computed width of the component's element.
   *
   * Uses `window.getComputedStyle`.
   *
   * @return {number}
   *         The computed width of the component's element.
   */;_proto.currentWidth=function currentWidth(){return this.currentDimension('width');}/**
   * Get the computed height of the component's element.
   *
   * Uses `window.getComputedStyle`.
   *
   * @return {number}
   *         The computed height of the component's element.
   */;_proto.currentHeight=function currentHeight(){return this.currentDimension('height');}/**
   * Set the focus to this component
   */;_proto.focus=function focus(){this.el_.focus();}/**
   * Remove the focus from this component
   */;_proto.blur=function blur(){this.el_.blur();}/**
   * When this Component receives a keydown event which it does not process,
   *  it passes the event to the Player for handling.
   *
   * @param {EventTarget~Event} event
   *        The `keydown` event that caused this function to be called.
   */;_proto.handleKeyPress=function handleKeyPress(event){if(this.player_){this.player_.handleKeyPress(event);}}/**
   * Emit a 'tap' events when touch event support gets detected. This gets used to
   * support toggling the controls through a tap on the video. They get enabled
   * because every sub-component would have extra overhead otherwise.
   *
   * @private
   * @fires Component#tap
   * @listens Component#touchstart
   * @listens Component#touchmove
   * @listens Component#touchleave
   * @listens Component#touchcancel
   * @listens Component#touchend
    */;_proto.emitTapEvents=function emitTapEvents(){// Track the start time so we can determine how long the touch lasted
var touchStart=0;var firstTouch=null;// Maximum movement allowed during a touch event to still be considered a tap
// Other popular libs use anywhere from 2 (hammer.js) to 15,
// so 10 seems like a nice, round number.
var tapMovementThreshold=10;// The maximum length a touch can be while still being considered a tap
var touchTimeThreshold=200;var couldBeTap;this.on('touchstart',function(event){// If more than one finger, don't consider treating this as a click
if(event.touches.length===1){// Copy pageX/pageY from the object
firstTouch={pageX:event.touches[0].pageX,pageY:event.touches[0].pageY};// Record start time so we can detect a tap vs. "touch and hold"
touchStart=new Date().getTime();// Reset couldBeTap tracking
couldBeTap=true;}});this.on('touchmove',function(event){// If more than one finger, don't consider treating this as a click
if(event.touches.length>1){couldBeTap=false;}else if(firstTouch){// Some devices will throw touchmoves for all but the slightest of taps.
// So, if we moved only a small distance, this could still be a tap
var xdiff=event.touches[0].pageX-firstTouch.pageX;var ydiff=event.touches[0].pageY-firstTouch.pageY;var touchDistance=Math.sqrt(xdiff*xdiff+ydiff*ydiff);if(touchDistance>tapMovementThreshold){couldBeTap=false;}}});var noTap=function noTap(){couldBeTap=false;};// TODO: Listen to the original target. http://youtu.be/DujfpXOKUp8?t=13m8s
this.on('touchleave',noTap);this.on('touchcancel',noTap);// When the touch ends, measure how long it took and trigger the appropriate
// event
this.on('touchend',function(event){firstTouch=null;// Proceed only if the touchmove/leave/cancel event didn't happen
if(couldBeTap===true){// Measure how long the touch lasted
var touchTime=new Date().getTime()-touchStart;// Make sure the touch was less than the threshold to be considered a tap
if(touchTime<touchTimeThreshold){// Don't let browser turn this into a click
event.preventDefault();/**
           * Triggered when a `Component` is tapped.
           *
           * @event Component#tap
           * @type {EventTarget~Event}
           */this.trigger('tap');// It may be good to copy the touchend event object and change the
// type to tap, if the other event properties aren't exact after
// Events.fixEvent runs (e.g. event.target)
}}});}/**
   * This function reports user activity whenever touch events happen. This can get
   * turned off by any sub-components that wants touch events to act another way.
   *
   * Report user touch activity when touch events occur. User activity gets used to
   * determine when controls should show/hide. It is simple when it comes to mouse
   * events, because any mouse event should show the controls. So we capture mouse
   * events that bubble up to the player and report activity when that happens.
   * With touch events it isn't as easy as `touchstart` and `touchend` toggle player
   * controls. So touch events can't help us at the player level either.
   *
   * User activity gets checked asynchronously. So what could happen is a tap event
   * on the video turns the controls off. Then the `touchend` event bubbles up to
   * the player. Which, if it reported user activity, would turn the controls right
   * back on. We also don't want to completely block touch events from bubbling up.
   * Furthermore a `touchmove` event and anything other than a tap, should not turn
   * controls back on.
   *
   * @listens Component#touchstart
   * @listens Component#touchmove
   * @listens Component#touchend
   * @listens Component#touchcancel
   */;_proto.enableTouchActivity=function enableTouchActivity(){// Don't continue if the root player doesn't support reporting user activity
if(!this.player()||!this.player().reportUserActivity){return;}// listener for reporting that the user is active
var report=bind(this.player(),this.player().reportUserActivity);var touchHolding;this.on('touchstart',function(){report();// For as long as the they are touching the device or have their mouse down,
// we consider them active even if they're not moving their finger or mouse.
// So we want to continue to update that they are active
this.clearInterval(touchHolding);// report at the same interval as activityCheck
touchHolding=this.setInterval(report,250);});var touchEnd=function touchEnd(event){report();// stop the interval that maintains activity if the touch is holding
this.clearInterval(touchHolding);};this.on('touchmove',report);this.on('touchend',touchEnd);this.on('touchcancel',touchEnd);}/**
   * A callback that has no parameters and is bound into `Component`s context.
   *
   * @callback Component~GenericCallback
   * @this Component
   *//**
   * Creates a function that runs after an `x` millisecond timeout. This function is a
   * wrapper around `window.setTimeout`. There are a few reasons to use this one
   * instead though:
   * 1. It gets cleared via  {@link Component#clearTimeout} when
   *    {@link Component#dispose} gets called.
   * 2. The function callback will gets turned into a {@link Component~GenericCallback}
   *
   * > Note: You can't use `window.clearTimeout` on the id returned by this function. This
   *         will cause its dispose listener not to get cleaned up! Please use
   *         {@link Component#clearTimeout} or {@link Component#dispose} instead.
   *
   * @param {Component~GenericCallback} fn
   *        The function that will be run after `timeout`.
   *
   * @param {number} timeout
   *        Timeout in milliseconds to delay before executing the specified function.
   *
   * @return {number}
   *         Returns a timeout ID that gets used to identify the timeout. It can also
   *         get used in {@link Component#clearTimeout} to clear the timeout that
   *         was set.
   *
   * @listens Component#dispose
   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setTimeout}
   */;_proto.setTimeout=function setTimeout(fn,timeout){var _this2=this;// declare as variables so they are properly available in timeout function
// eslint-disable-next-line
var timeoutId,disposeFn;fn=bind(this,fn);timeoutId=_window2.default.setTimeout(function(){_this2.off('dispose',disposeFn);fn();},timeout);disposeFn=function disposeFn(){return _this2.clearTimeout(timeoutId);};disposeFn.guid="vjs-timeout-"+timeoutId;this.on('dispose',disposeFn);return timeoutId;}/**
   * Clears a timeout that gets created via `window.setTimeout` or
   * {@link Component#setTimeout}. If you set a timeout via {@link Component#setTimeout}
   * use this function instead of `window.clearTimout`. If you don't your dispose
   * listener will not get cleaned up until {@link Component#dispose}!
   *
   * @param {number} timeoutId
   *        The id of the timeout to clear. The return value of
   *        {@link Component#setTimeout} or `window.setTimeout`.
   *
   * @return {number}
   *         Returns the timeout id that was cleared.
   *
   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/clearTimeout}
   */;_proto.clearTimeout=function clearTimeout(timeoutId){_window2.default.clearTimeout(timeoutId);var disposeFn=function disposeFn(){};disposeFn.guid="vjs-timeout-"+timeoutId;this.off('dispose',disposeFn);return timeoutId;}/**
   * Creates a function that gets run every `x` milliseconds. This function is a wrapper
   * around `window.setInterval`. There are a few reasons to use this one instead though.
   * 1. It gets cleared via  {@link Component#clearInterval} when
   *    {@link Component#dispose} gets called.
   * 2. The function callback will be a {@link Component~GenericCallback}
   *
   * @param {Component~GenericCallback} fn
   *        The function to run every `x` seconds.
   *
   * @param {number} interval
   *        Execute the specified function every `x` milliseconds.
   *
   * @return {number}
   *         Returns an id that can be used to identify the interval. It can also be be used in
   *         {@link Component#clearInterval} to clear the interval.
   *
   * @listens Component#dispose
   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setInterval}
   */;_proto.setInterval=function setInterval(fn,interval){var _this3=this;fn=bind(this,fn);var intervalId=_window2.default.setInterval(fn,interval);var disposeFn=function disposeFn(){return _this3.clearInterval(intervalId);};disposeFn.guid="vjs-interval-"+intervalId;this.on('dispose',disposeFn);return intervalId;}/**
   * Clears an interval that gets created via `window.setInterval` or
   * {@link Component#setInterval}. If you set an inteval via {@link Component#setInterval}
   * use this function instead of `window.clearInterval`. If you don't your dispose
   * listener will not get cleaned up until {@link Component#dispose}!
   *
   * @param {number} intervalId
   *        The id of the interval to clear. The return value of
   *        {@link Component#setInterval} or `window.setInterval`.
   *
   * @return {number}
   *         Returns the interval id that was cleared.
   *
   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/clearInterval}
   */;_proto.clearInterval=function clearInterval(intervalId){_window2.default.clearInterval(intervalId);var disposeFn=function disposeFn(){};disposeFn.guid="vjs-interval-"+intervalId;this.off('dispose',disposeFn);return intervalId;}/**
   * Queues up a callback to be passed to requestAnimationFrame (rAF), but
   * with a few extra bonuses:
   *
   * - Supports browsers that do not support rAF by falling back to
   *   {@link Component#setTimeout}.
   *
   * - The callback is turned into a {@link Component~GenericCallback} (i.e.
   *   bound to the component).
   *
   * - Automatic cancellation of the rAF callback is handled if the component
   *   is disposed before it is called.
   *
   * @param  {Component~GenericCallback} fn
   *         A function that will be bound to this component and executed just
   *         before the browser's next repaint.
   *
   * @return {number}
   *         Returns an rAF ID that gets used to identify the timeout. It can
   *         also be used in {@link Component#cancelAnimationFrame} to cancel
   *         the animation frame callback.
   *
   * @listens Component#dispose
   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame}
   */;_proto.requestAnimationFrame=function requestAnimationFrame(fn){var _this4=this;// declare as variables so they are properly available in rAF function
// eslint-disable-next-line
var id,disposeFn;if(this.supportsRaf_){fn=bind(this,fn);id=_window2.default.requestAnimationFrame(function(){_this4.off('dispose',disposeFn);fn();});disposeFn=function disposeFn(){return _this4.cancelAnimationFrame(id);};disposeFn.guid="vjs-raf-"+id;this.on('dispose',disposeFn);return id;}// Fall back to using a timer.
return this.setTimeout(fn,1000/60);}/**
   * Cancels a queued callback passed to {@link Component#requestAnimationFrame}
   * (rAF).
   *
   * If you queue an rAF callback via {@link Component#requestAnimationFrame},
   * use this function instead of `window.cancelAnimationFrame`. If you don't,
   * your dispose listener will not get cleaned up until {@link Component#dispose}!
   *
   * @param {number} id
   *        The rAF ID to clear. The return value of {@link Component#requestAnimationFrame}.
   *
   * @return {number}
   *         Returns the rAF ID that was cleared.
   *
   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/window/cancelAnimationFrame}
   */;_proto.cancelAnimationFrame=function cancelAnimationFrame(id){if(this.supportsRaf_){_window2.default.cancelAnimationFrame(id);var disposeFn=function disposeFn(){};disposeFn.guid="vjs-raf-"+id;this.off('dispose',disposeFn);return id;}// Fall back to using a timer.
return this.clearTimeout(id);}/**
   * Register a `Component` with `videojs` given the name and the component.
   *
   * > NOTE: {@link Tech}s should not be registered as a `Component`. {@link Tech}s
   *         should be registered using {@link Tech.registerTech} or
   *         {@link videojs:videojs.registerTech}.
   *
   * > NOTE: This function can also be seen on videojs as
   *         {@link videojs:videojs.registerComponent}.
   *
   * @param {string} name
   *        The name of the `Component` to register.
   *
   * @param {Component} ComponentToRegister
   *        The `Component` class to register.
   *
   * @return {Component}
   *         The `Component` that was registered.
   */;Component.registerComponent=function registerComponent(name,ComponentToRegister){if(typeof name!=='string'||!name){throw new Error("Illegal component name, \""+name+"\"; must be a non-empty string.");}var Tech=Component.getComponent('Tech');// We need to make sure this check is only done if Tech has been registered.
var isTech=Tech&&Tech.isTech(ComponentToRegister);var isComp=Component===ComponentToRegister||Component.prototype.isPrototypeOf(ComponentToRegister.prototype);if(isTech||!isComp){var reason;if(isTech){reason='techs must be registered using Tech.registerTech()';}else{reason='must be a Component subclass';}throw new Error("Illegal component, \""+name+"\"; "+reason+".");}name=toTitleCase(name);if(!Component.components_){Component.components_={};}var Player=Component.getComponent('Player');if(name==='Player'&&Player&&Player.players){var players=Player.players;var playerNames=Object.keys(players);// If we have players that were disposed, then their name will still be
// in Players.players. So, we must loop through and verify that the value
// for each item is not null. This allows registration of the Player component
// after all players have been disposed or before any were created.
if(players&&playerNames.length>0&&playerNames.map(function(pname){return players[pname];}).every(Boolean)){throw new Error('Can not register Player component after player has been created.');}}Component.components_[name]=ComponentToRegister;return ComponentToRegister;}/**
   * Get a `Component` based on the name it was registered with.
   *
   * @param {string} name
   *        The Name of the component to get.
   *
   * @return {Component}
   *         The `Component` that got registered under the given name.
   *
   * @deprecated In `videojs` 6 this will not return `Component`s that were not
   *             registered using {@link Component.registerComponent}. Currently we
   *             check the global `videojs` object for a `Component` name and
   *             return that if it exists.
   */;Component.getComponent=function getComponent(name){if(!name){return;}name=toTitleCase(name);if(Component.components_&&Component.components_[name]){return Component.components_[name];}};return Component;}();/**
 * Whether or not this component supports `requestAnimationFrame`.
 *
 * This is exposed primarily for testing purposes.
 *
 * @private
 * @type {Boolean}
 */Component.prototype.supportsRaf_=typeof _window2.default.requestAnimationFrame==='function'&&typeof _window2.default.cancelAnimationFrame==='function';Component.registerComponent('Component',Component);/**
 * @file browser.js
 * @module browser
 */var USER_AGENT=_window2.default.navigator&&_window2.default.navigator.userAgent||'';var webkitVersionMap=/AppleWebKit\/([\d.]+)/i.exec(USER_AGENT);var appleWebkitVersion=webkitVersionMap?parseFloat(webkitVersionMap.pop()):null;/**
 * Whether or not this device is an iPad.
 *
 * @static
 * @const
 * @type {Boolean}
 */var IS_IPAD=/iPad/i.test(USER_AGENT);/**
 * Whether or not this device is an iPhone.
 *
 * @static
 * @const
 * @type {Boolean}
 */// The Facebook app's UIWebView identifies as both an iPhone and iPad, so
// to identify iPhones, we need to exclude iPads.
// http://artsy.github.io/blog/2012/10/18/the-perils-of-ios-user-agent-sniffing/
var IS_IPHONE=/iPhone/i.test(USER_AGENT)&&!IS_IPAD;/**
 * Whether or not this device is an iPod.
 *
 * @static
 * @const
 * @type {Boolean}
 */var IS_IPOD=/iPod/i.test(USER_AGENT);/**
 * Whether or not this is an iOS device.
 *
 * @static
 * @const
 * @type {Boolean}
 */var IS_IOS=IS_IPHONE||IS_IPAD||IS_IPOD;/**
 * The detected iOS version - or `null`.
 *
 * @static
 * @const
 * @type {string|null}
 */var IOS_VERSION=function(){var match=USER_AGENT.match(/OS (\d+)_/i);if(match&&match[1]){return match[1];}return null;}();/**
 * Whether or not this is an Android device.
 *
 * @static
 * @const
 * @type {Boolean}
 */var IS_ANDROID=/Android/i.test(USER_AGENT);/**
 * The detected Android version - or `null`.
 *
 * @static
 * @const
 * @type {number|string|null}
 */var ANDROID_VERSION=function(){// This matches Android Major.Minor.Patch versions
// ANDROID_VERSION is Major.Minor as a Number, if Minor isn't available, then only Major is returned
var match=USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!match){return null;}var major=match[1]&&parseFloat(match[1]);var minor=match[2]&&parseFloat(match[2]);if(major&&minor){return parseFloat(match[1]+'.'+match[2]);}else if(major){return major;}return null;}();/**
 * Whether or not this is a native Android browser.
 *
 * @static
 * @const
 * @type {Boolean}
 */var IS_NATIVE_ANDROID=IS_ANDROID&&ANDROID_VERSION<5&&appleWebkitVersion<537;/**
 * Whether or not this is Mozilla Firefox.
 *
 * @static
 * @const
 * @type {Boolean}
 */var IS_FIREFOX=/Firefox/i.test(USER_AGENT);/**
 * Whether or not this is Microsoft Edge.
 *
 * @static
 * @const
 * @type {Boolean}
 */var IS_EDGE=/Edge/i.test(USER_AGENT);/**
 * Whether or not this is Google Chrome.
 *
 * This will also be `true` for Chrome on iOS, which will have different support
 * as it is actually Safari under the hood.
 *
 * @static
 * @const
 * @type {Boolean}
 */var IS_CHROME=!IS_EDGE&&(/Chrome/i.test(USER_AGENT)||/CriOS/i.test(USER_AGENT));/**
 * The detected Google Chrome version - or `null`.
 *
 * @static
 * @const
 * @type {number|null}
 */var CHROME_VERSION=function(){var match=USER_AGENT.match(/(Chrome|CriOS)\/(\d+)/);if(match&&match[2]){return parseFloat(match[2]);}return null;}();/**
 * The detected Internet Explorer version - or `null`.
 *
 * @static
 * @const
 * @type {number|null}
 */var IE_VERSION=function(){var result=/MSIE\s(\d+)\.\d/.exec(USER_AGENT);var version=result&&parseFloat(result[1]);if(!version&&/Trident\/7.0/i.test(USER_AGENT)&&/rv:11.0/.test(USER_AGENT)){// IE 11 has a different user agent string than other IE versions
version=11.0;}return version;}();/**
 * Whether or not this is desktop Safari.
 *
 * @static
 * @const
 * @type {Boolean}
 */var IS_SAFARI=/Safari/i.test(USER_AGENT)&&!IS_CHROME&&!IS_ANDROID&&!IS_EDGE;/**
 * Whether or not this is any flavor of Safari - including iOS.
 *
 * @static
 * @const
 * @type {Boolean}
 */var IS_ANY_SAFARI=(IS_SAFARI||IS_IOS)&&!IS_CHROME;/**
 * Whether or not this device is touch-enabled.
 *
 * @static
 * @const
 * @type {Boolean}
 */var TOUCH_ENABLED=isReal()&&('ontouchstart'in _window2.default||_window2.default.navigator.maxTouchPoints||_window2.default.DocumentTouch&&_window2.default.document instanceof _window2.default.DocumentTouch);var browser=/*#__PURE__*/Object.freeze({IS_IPAD:IS_IPAD,IS_IPHONE:IS_IPHONE,IS_IPOD:IS_IPOD,IS_IOS:IS_IOS,IOS_VERSION:IOS_VERSION,IS_ANDROID:IS_ANDROID,ANDROID_VERSION:ANDROID_VERSION,IS_NATIVE_ANDROID:IS_NATIVE_ANDROID,IS_FIREFOX:IS_FIREFOX,IS_EDGE:IS_EDGE,IS_CHROME:IS_CHROME,CHROME_VERSION:CHROME_VERSION,IE_VERSION:IE_VERSION,IS_SAFARI:IS_SAFARI,IS_ANY_SAFARI:IS_ANY_SAFARI,TOUCH_ENABLED:TOUCH_ENABLED});/**
 * @file time-ranges.js
 * @module time-ranges
 *//**
 * Returns the time for the specified index at the start or end
 * of a TimeRange object.
 *
 * @typedef    {Function} TimeRangeIndex
 *
 * @param      {number} [index=0]
 *             The range number to return the time for.
 *
 * @return     {number}
 *             The time offset at the specified index.
 *
 * @deprecated The index argument must be provided.
 *             In the future, leaving it out will throw an error.
 *//**
 * An object that contains ranges of time.
 *
 * @typedef  {Object} TimeRange
 *
 * @property {number} length
 *           The number of time ranges represented by this object.
 *
 * @property {module:time-ranges~TimeRangeIndex} start
 *           Returns the time offset at which a specified time range begins.
 *
 * @property {module:time-ranges~TimeRangeIndex} end
 *           Returns the time offset at which a specified time range ends.
 *
 * @see https://developer.mozilla.org/en-US/docs/Web/API/TimeRanges
 *//**
 * Check if any of the time ranges are over the maximum index.
 *
 * @private
 * @param   {string} fnName
 *          The function name to use for logging
 *
 * @param   {number} index
 *          The index to check
 *
 * @param   {number} maxIndex
 *          The maximum possible index
 *
 * @throws  {Error} if the timeRanges provided are over the maxIndex
 */function rangeCheck(fnName,index,maxIndex){if(typeof index!=='number'||index<0||index>maxIndex){throw new Error("Failed to execute '"+fnName+"' on 'TimeRanges': The index provided ("+index+") is non-numeric or out of bounds (0-"+maxIndex+").");}}/**
 * Get the time for the specified index at the start or end
 * of a TimeRange object.
 *
 * @private
 * @param      {string} fnName
 *             The function name to use for logging
 *
 * @param      {string} valueIndex
 *             The property that should be used to get the time. should be
 *             'start' or 'end'
 *
 * @param      {Array} ranges
 *             An array of time ranges
 *
 * @param      {Array} [rangeIndex=0]
 *             The index to start the search at
 *
 * @return     {number}
 *             The time that offset at the specified index.
 *
 * @deprecated rangeIndex must be set to a value, in the future this will throw an error.
 * @throws     {Error} if rangeIndex is more than the length of ranges
 */function getRange(fnName,valueIndex,ranges,rangeIndex){rangeCheck(fnName,rangeIndex,ranges.length-1);return ranges[rangeIndex][valueIndex];}/**
 * Create a time range object given ranges of time.
 *
 * @private
 * @param   {Array} [ranges]
 *          An array of time ranges.
 */function createTimeRangesObj(ranges){if(ranges===undefined||ranges.length===0){return{length:0,start:function start(){throw new Error('This TimeRanges object is empty');},end:function end(){throw new Error('This TimeRanges object is empty');}};}return{length:ranges.length,start:getRange.bind(null,'start',0,ranges),end:getRange.bind(null,'end',1,ranges)};}/**
 * Create a `TimeRange` object which mimics an
 * {@link https://developer.mozilla.org/en-US/docs/Web/API/TimeRanges|HTML5 TimeRanges instance}.
 *
 * @param {number|Array[]} start
 *        The start of a single range (a number) or an array of ranges (an
 *        array of arrays of two numbers each).
 *
 * @param {number} end
 *        The end of a single range. Cannot be used with the array form of
 *        the `start` argument.
 */function createTimeRanges(start,end){if(Array.isArray(start)){return createTimeRangesObj(start);}else if(start===undefined||end===undefined){return createTimeRangesObj();}return createTimeRangesObj([[start,end]]);}/**
 * @file buffer.js
 * @module buffer
 *//**
 * Compute the percentage of the media that has been buffered.
 *
 * @param {TimeRange} buffered
 *        The current `TimeRange` object representing buffered time ranges
 *
 * @param {number} duration
 *        Total duration of the media
 *
 * @return {number}
 *         Percent buffered of the total duration in decimal form.
 */function bufferedPercent(buffered,duration){var bufferedDuration=0;var start;var end;if(!duration){return 0;}if(!buffered||!buffered.length){buffered=createTimeRanges(0,0);}for(var i=0;i<buffered.length;i++){start=buffered.start(i);end=buffered.end(i);// buffered end can be bigger than duration by a very small fraction
if(end>duration){end=duration;}bufferedDuration+=end-start;}return bufferedDuration/duration;}/**
 * @file fullscreen-api.js
 * @module fullscreen-api
 * @private
 *//**
 * Store the browser-specific methods for the fullscreen API.
 *
 * @type {Object}
 * @see [Specification]{@link https://fullscreen.spec.whatwg.org}
 * @see [Map Approach From Screenfull.js]{@link https://github.com/sindresorhus/screenfull.js}
 */var FullscreenApi={};// browser API methods
var apiMap=[['requestFullscreen','exitFullscreen','fullscreenElement','fullscreenEnabled','fullscreenchange','fullscreenerror','fullscreen'],// WebKit
['webkitRequestFullscreen','webkitExitFullscreen','webkitFullscreenElement','webkitFullscreenEnabled','webkitfullscreenchange','webkitfullscreenerror','-webkit-full-screen'],// Mozilla
['mozRequestFullScreen','mozCancelFullScreen','mozFullScreenElement','mozFullScreenEnabled','mozfullscreenchange','mozfullscreenerror','-moz-full-screen'],// Microsoft
['msRequestFullscreen','msExitFullscreen','msFullscreenElement','msFullscreenEnabled','MSFullscreenChange','MSFullscreenError','-ms-fullscreen']];var specApi=apiMap[0];var browserApi;var prefixedAPI=false;// determine the supported set of functions
for(var i=0;i<apiMap.length;i++){// check for exitFullscreen function
if(apiMap[i][1]in _document2.default){browserApi=apiMap[i];break;}}// map the browser API names to the spec API names
if(browserApi){for(var _i=0;_i<browserApi.length;_i++){FullscreenApi[specApi[_i]]=browserApi[_i];}prefixedAPI=browserApi[0]===specApi[0];}/**
 * @file media-error.js
 *//**
 * A Custom `MediaError` class which mimics the standard HTML5 `MediaError` class.
 *
 * @param {number|string|Object|MediaError} value
 *        This can be of multiple types:
 *        - number: should be a standard error code
 *        - string: an error message (the code will be 0)
 *        - Object: arbitrary properties
 *        - `MediaError` (native): used to populate a video.js `MediaError` object
 *        - `MediaError` (video.js): will return itself if it's already a
 *          video.js `MediaError` object.
 *
 * @see [MediaError Spec]{@link https://dev.w3.org/html5/spec-author-view/video.html#mediaerror}
 * @see [Encrypted MediaError Spec]{@link https://www.w3.org/TR/2013/WD-encrypted-media-20130510/#error-codes}
 *
 * @class MediaError
 */function MediaError(value){// Allow redundant calls to this constructor to avoid having `instanceof`
// checks peppered around the code.
if(value instanceof MediaError){return value;}if(typeof value==='number'){this.code=value;}else if(typeof value==='string'){// default code is zero, so this is a custom error
this.message=value;}else if(isObject(value)){// We assign the `code` property manually because native `MediaError` objects
// do not expose it as an own/enumerable property of the object.
if(typeof value.code==='number'){this.code=value.code;}assign(this,value);}if(!this.message){this.message=MediaError.defaultMessages[this.code]||'';}}/**
 * The error code that refers two one of the defined `MediaError` types
 *
 * @type {Number}
 */MediaError.prototype.code=0;/**
 * An optional message that to show with the error. Message is not part of the HTML5
 * video spec but allows for more informative custom errors.
 *
 * @type {String}
 */MediaError.prototype.message='';/**
 * An optional status code that can be set by plugins to allow even more detail about
 * the error. For example a plugin might provide a specific HTTP status code and an
 * error message for that code. Then when the plugin gets that error this class will
 * know how to display an error message for it. This allows a custom message to show
 * up on the `Player` error overlay.
 *
 * @type {Array}
 */MediaError.prototype.status=null;/**
 * Errors indexed by the W3C standard. The order **CANNOT CHANGE**! See the
 * specification listed under {@link MediaError} for more information.
 *
 * @enum {array}
 * @readonly
 * @property {string} 0 - MEDIA_ERR_CUSTOM
 * @property {string} 1 - MEDIA_ERR_ABORTED
 * @property {string} 2 - MEDIA_ERR_NETWORK
 * @property {string} 3 - MEDIA_ERR_DECODE
 * @property {string} 4 - MEDIA_ERR_SRC_NOT_SUPPORTED
 * @property {string} 5 - MEDIA_ERR_ENCRYPTED
 */MediaError.errorTypes=['MEDIA_ERR_CUSTOM','MEDIA_ERR_ABORTED','MEDIA_ERR_NETWORK','MEDIA_ERR_DECODE','MEDIA_ERR_SRC_NOT_SUPPORTED','MEDIA_ERR_ENCRYPTED'];/**
 * The default `MediaError` messages based on the {@link MediaError.errorTypes}.
 *
 * @type {Array}
 * @constant
 */MediaError.defaultMessages={1:'You aborted the media playback',2:'A network error caused the media download to fail part-way.',3:'The media playback was aborted due to a corruption problem or because the media used features your browser did not support.',4:'The media could not be loaded, either because the server or network failed or because the format is not supported.',5:'The media is encrypted and we do not have the keys to decrypt it.'};// Add types as properties on MediaError
// e.g. MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED = 4;
for(var errNum=0;errNum<MediaError.errorTypes.length;errNum++){MediaError[MediaError.errorTypes[errNum]]=errNum;// values should be accessible on both the class and instance
MediaError.prototype[MediaError.errorTypes[errNum]]=errNum;}// jsdocs for instance/static members added above
/**
 * Returns whether an object is `Promise`-like (i.e. has a `then` method).
 *
 * @param  {Object}  value
 *         An object that may or may not be `Promise`-like.
 *
 * @return {boolean}
 *         Whether or not the object is `Promise`-like.
 */function isPromise(value){return value!==undefined&&value!==null&&typeof value.then==='function';}/**
 * Silence a Promise-like object.
 *
 * This is useful for avoiding non-harmful, but potentially confusing "uncaught
 * play promise" rejection error messages.
 *
 * @param  {Object} value
 *         An object that may or may not be `Promise`-like.
 */function silencePromise(value){if(isPromise(value)){value.then(null,function(e){});}}/**
 * @file text-track-list-converter.js Utilities for capturing text track state and
 * re-creating tracks based on a capture.
 *
 * @module text-track-list-converter
 *//**
 * Examine a single {@link TextTrack} and return a JSON-compatible javascript object that
 * represents the {@link TextTrack}'s state.
 *
 * @param {TextTrack} track
 *        The text track to query.
 *
 * @return {Object}
 *         A serializable javascript representation of the TextTrack.
 * @private
 */var trackToJson_=function trackToJson_(track){var ret=['kind','label','language','id','inBandMetadataTrackDispatchType','mode','src'].reduce(function(acc,prop,i){if(track[prop]){acc[prop]=track[prop];}return acc;},{cues:track.cues&&Array.prototype.map.call(track.cues,function(cue){return{startTime:cue.startTime,endTime:cue.endTime,text:cue.text,id:cue.id};})});return ret;};/**
 * Examine a {@link Tech} and return a JSON-compatible javascript array that represents the
 * state of all {@link TextTrack}s currently configured. The return array is compatible with
 * {@link text-track-list-converter:jsonToTextTracks}.
 *
 * @param {Tech} tech
 *        The tech object to query
 *
 * @return {Array}
 *         A serializable javascript representation of the {@link Tech}s
 *         {@link TextTrackList}.
 */var textTracksToJson=function textTracksToJson(tech){var trackEls=tech.$$('track');var trackObjs=Array.prototype.map.call(trackEls,function(t){return t.track;});var tracks=Array.prototype.map.call(trackEls,function(trackEl){var json=trackToJson_(trackEl.track);if(trackEl.src){json.src=trackEl.src;}return json;});return tracks.concat(Array.prototype.filter.call(tech.textTracks(),function(track){return trackObjs.indexOf(track)===-1;}).map(trackToJson_));};/**
 * Create a set of remote {@link TextTrack}s on a {@link Tech} based on an array of javascript
 * object {@link TextTrack} representations.
 *
 * @param {Array} json
 *        An array of `TextTrack` representation objects, like those that would be
 *        produced by `textTracksToJson`.
 *
 * @param {Tech} tech
 *        The `Tech` to create the `TextTrack`s on.
 */var jsonToTextTracks=function jsonToTextTracks(json,tech){json.forEach(function(track){var addedTrack=tech.addRemoteTextTrack(track).track;if(!track.src&&track.cues){track.cues.forEach(function(cue){return addedTrack.addCue(cue);});}});return tech.textTracks();};var textTrackConverter={textTracksToJson:textTracksToJson,jsonToTextTracks:jsonToTextTracks,trackToJson_:trackToJson_};var MODAL_CLASS_NAME='vjs-modal-dialog';/**
 * The `ModalDialog` displays over the video and its controls, which blocks
 * interaction with the player until it is closed.
 *
 * Modal dialogs include a "Close" button and will close when that button
 * is activated - or when ESC is pressed anywhere.
 *
 * @extends Component
 */var ModalDialog=/*#__PURE__*/function(_Component){_inheritsLoose(ModalDialog,_Component);/**
   * Create an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   *
   * @param {Mixed} [options.content=undefined]
   *        Provide customized content for this modal.
   *
   * @param {string} [options.description]
   *        A text description for the modal, primarily for accessibility.
   *
   * @param {boolean} [options.fillAlways=false]
   *        Normally, modals are automatically filled only the first time
   *        they open. This tells the modal to refresh its content
   *        every time it opens.
   *
   * @param {string} [options.label]
   *        A text label for the modal, primarily for accessibility.
   *
   * @param {boolean} [options.pauseOnOpen=true]
   *        If `true`, playback will will be paused if playing when
   *        the modal opens, and resumed when it closes.
   *
   * @param {boolean} [options.temporary=true]
   *        If `true`, the modal can only be opened once; it will be
   *        disposed as soon as it's closed.
   *
   * @param {boolean} [options.uncloseable=false]
   *        If `true`, the user will not be able to close the modal
   *        through the UI in the normal ways. Programmatic closing is
   *        still possible.
   */function ModalDialog(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.opened_=_this.hasBeenOpened_=_this.hasBeenFilled_=false;_this.closeable(!_this.options_.uncloseable);_this.content(_this.options_.content);// Make sure the contentEl is defined AFTER any children are initialized
// because we only want the contents of the modal in the contentEl
// (not the UI elements like the close button).
_this.contentEl_=createEl('div',{className:MODAL_CLASS_NAME+"-content"},{role:'document'});_this.descEl_=createEl('p',{className:MODAL_CLASS_NAME+"-description vjs-control-text",id:_this.el().getAttribute('aria-describedby')});textContent(_this.descEl_,_this.description());_this.el_.appendChild(_this.descEl_);_this.el_.appendChild(_this.contentEl_);return _this;}/**
   * Create the `ModalDialog`'s DOM element
   *
   * @return {Element}
   *         The DOM element that gets created.
   */var _proto=ModalDialog.prototype;_proto.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,'div',{className:this.buildCSSClass(),tabIndex:-1},{'aria-describedby':this.id()+"_description",'aria-hidden':'true','aria-label':this.label(),'role':'dialog'});};_proto.dispose=function dispose(){this.contentEl_=null;this.descEl_=null;this.previouslyActiveEl_=null;_Component.prototype.dispose.call(this);}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */;_proto.buildCSSClass=function buildCSSClass(){return MODAL_CLASS_NAME+" vjs-hidden "+_Component.prototype.buildCSSClass.call(this);}/**
   * Handles `keydown` events on the document, looking for ESC, which closes
   * the modal.
   *
   * @param {EventTarget~Event} event
   *        The keypress that triggered this event.
   *
   * @listens keydown
   */;_proto.handleKeyPress=function handleKeyPress(event){if(_keycode2.default.isEventKey(event,'Escape')&&this.closeable()){this.close();}}/**
   * Returns the label string for this modal. Primarily used for accessibility.
   *
   * @return {string}
   *         the localized or raw label of this modal.
   */;_proto.label=function label(){return this.localize(this.options_.label||'Modal Window');}/**
   * Returns the description string for this modal. Primarily used for
   * accessibility.
   *
   * @return {string}
   *         The localized or raw description of this modal.
   */;_proto.description=function description(){var desc=this.options_.description||this.localize('This is a modal window.');// Append a universal closeability message if the modal is closeable.
if(this.closeable()){desc+=' '+this.localize('This modal can be closed by pressing the Escape key or activating the close button.');}return desc;}/**
   * Opens the modal.
   *
   * @fires ModalDialog#beforemodalopen
   * @fires ModalDialog#modalopen
   */;_proto.open=function open(){if(!this.opened_){var player=this.player();/**
        * Fired just before a `ModalDialog` is opened.
        *
        * @event ModalDialog#beforemodalopen
        * @type {EventTarget~Event}
        */this.trigger('beforemodalopen');this.opened_=true;// Fill content if the modal has never opened before and
// never been filled.
if(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_){this.fill();}// If the player was playing, pause it and take note of its previously
// playing state.
this.wasPlaying_=!player.paused();if(this.options_.pauseOnOpen&&this.wasPlaying_){player.pause();}if(this.closeable()){this.on(this.el_.ownerDocument,'keydown',bind(this,this.handleKeyPress));}// Hide controls and note if they were enabled.
this.hadControls_=player.controls();player.controls(false);this.show();this.conditionalFocus_();this.el().setAttribute('aria-hidden','false');/**
        * Fired just after a `ModalDialog` is opened.
        *
        * @event ModalDialog#modalopen
        * @type {EventTarget~Event}
        */this.trigger('modalopen');this.hasBeenOpened_=true;}}/**
   * If the `ModalDialog` is currently open or closed.
   *
   * @param  {boolean} [value]
   *         If given, it will open (`true`) or close (`false`) the modal.
   *
   * @return {boolean}
   *         the current open state of the modaldialog
   */;_proto.opened=function opened(value){if(typeof value==='boolean'){this[value?'open':'close']();}return this.opened_;}/**
   * Closes the modal, does nothing if the `ModalDialog` is
   * not open.
   *
   * @fires ModalDialog#beforemodalclose
   * @fires ModalDialog#modalclose
   */;_proto.close=function close(){if(!this.opened_){return;}var player=this.player();/**
      * Fired just before a `ModalDialog` is closed.
      *
      * @event ModalDialog#beforemodalclose
      * @type {EventTarget~Event}
      */this.trigger('beforemodalclose');this.opened_=false;if(this.wasPlaying_&&this.options_.pauseOnOpen){player.play();}if(this.closeable()){this.off(this.el_.ownerDocument,'keydown',bind(this,this.handleKeyPress));}if(this.hadControls_){player.controls(true);}this.hide();this.el().setAttribute('aria-hidden','true');/**
      * Fired just after a `ModalDialog` is closed.
      *
      * @event ModalDialog#modalclose
      * @type {EventTarget~Event}
      */this.trigger('modalclose');this.conditionalBlur_();if(this.options_.temporary){this.dispose();}}/**
   * Check to see if the `ModalDialog` is closeable via the UI.
   *
   * @param  {boolean} [value]
   *         If given as a boolean, it will set the `closeable` option.
   *
   * @return {boolean}
   *         Returns the final value of the closable option.
   */;_proto.closeable=function closeable(value){if(typeof value==='boolean'){var closeable=this.closeable_=!!value;var close=this.getChild('closeButton');// If this is being made closeable and has no close button, add one.
if(closeable&&!close){// The close button should be a child of the modal - not its
// content element, so temporarily change the content element.
var temp=this.contentEl_;this.contentEl_=this.el_;close=this.addChild('closeButton',{controlText:'Close Modal Dialog'});this.contentEl_=temp;this.on(close,'close',this.close);}// If this is being made uncloseable and has a close button, remove it.
if(!closeable&&close){this.off(close,'close',this.close);this.removeChild(close);close.dispose();}}return this.closeable_;}/**
   * Fill the modal's content element with the modal's "content" option.
   * The content element will be emptied before this change takes place.
   */;_proto.fill=function fill(){this.fillWith(this.content());}/**
   * Fill the modal's content element with arbitrary content.
   * The content element will be emptied before this change takes place.
   *
   * @fires ModalDialog#beforemodalfill
   * @fires ModalDialog#modalfill
   *
   * @param {Mixed} [content]
   *        The same rules apply to this as apply to the `content` option.
   */;_proto.fillWith=function fillWith(content){var contentEl=this.contentEl();var parentEl=contentEl.parentNode;var nextSiblingEl=contentEl.nextSibling;/**
      * Fired just before a `ModalDialog` is filled with content.
      *
      * @event ModalDialog#beforemodalfill
      * @type {EventTarget~Event}
      */this.trigger('beforemodalfill');this.hasBeenFilled_=true;// Detach the content element from the DOM before performing
// manipulation to avoid modifying the live DOM multiple times.
parentEl.removeChild(contentEl);this.empty();insertContent(contentEl,content);/**
     * Fired just after a `ModalDialog` is filled with content.
     *
     * @event ModalDialog#modalfill
     * @type {EventTarget~Event}
     */this.trigger('modalfill');// Re-inject the re-filled content element.
if(nextSiblingEl){parentEl.insertBefore(contentEl,nextSiblingEl);}else{parentEl.appendChild(contentEl);}// make sure that the close button is last in the dialog DOM
var closeButton=this.getChild('closeButton');if(closeButton){parentEl.appendChild(closeButton.el_);}}/**
   * Empties the content element. This happens anytime the modal is filled.
   *
   * @fires ModalDialog#beforemodalempty
   * @fires ModalDialog#modalempty
   */;_proto.empty=function empty(){/**
    * Fired just before a `ModalDialog` is emptied.
    *
    * @event ModalDialog#beforemodalempty
    * @type {EventTarget~Event}
    */this.trigger('beforemodalempty');emptyEl(this.contentEl());/**
    * Fired just after a `ModalDialog` is emptied.
    *
    * @event ModalDialog#modalempty
    * @type {EventTarget~Event}
    */this.trigger('modalempty');}/**
   * Gets or sets the modal content, which gets normalized before being
   * rendered into the DOM.
   *
   * This does not update the DOM or fill the modal, but it is called during
   * that process.
   *
   * @param  {Mixed} [value]
   *         If defined, sets the internal content value to be used on the
   *         next call(s) to `fill`. This value is normalized before being
   *         inserted. To "clear" the internal content value, pass `null`.
   *
   * @return {Mixed}
   *         The current content of the modal dialog
   */;_proto.content=function content(value){if(typeof value!=='undefined'){this.content_=value;}return this.content_;}/**
   * conditionally focus the modal dialog if focus was previously on the player.
   *
   * @private
   */;_proto.conditionalFocus_=function conditionalFocus_(){var activeEl=_document2.default.activeElement;var playerEl=this.player_.el_;this.previouslyActiveEl_=null;if(playerEl.contains(activeEl)||playerEl===activeEl){this.previouslyActiveEl_=activeEl;this.focus();this.on(_document2.default,'keydown',this.handleKeyDown);}}/**
   * conditionally blur the element and refocus the last focused element
   *
   * @private
   */;_proto.conditionalBlur_=function conditionalBlur_(){if(this.previouslyActiveEl_){this.previouslyActiveEl_.focus();this.previouslyActiveEl_=null;}this.off(_document2.default,'keydown',this.handleKeyDown);}/**
   * Keydown handler. Attached when modal is focused.
   *
   * @listens keydown
   */;_proto.handleKeyDown=function handleKeyDown(event){// exit early if it isn't a tab key
if(!_keycode2.default.isEventKey(event,'Tab')){return;}var focusableEls=this.focusableEls_();var activeEl=this.el_.querySelector(':focus');var focusIndex;for(var i=0;i<focusableEls.length;i++){if(activeEl===focusableEls[i]){focusIndex=i;break;}}if(_document2.default.activeElement===this.el_){focusIndex=0;}if(event.shiftKey&&focusIndex===0){focusableEls[focusableEls.length-1].focus();event.preventDefault();}else if(!event.shiftKey&&focusIndex===focusableEls.length-1){focusableEls[0].focus();event.preventDefault();}}/**
   * get all focusable elements
   *
   * @private
   */;_proto.focusableEls_=function focusableEls_(){var allChildren=this.el_.querySelectorAll('*');return Array.prototype.filter.call(allChildren,function(child){return(child instanceof _window2.default.HTMLAnchorElement||child instanceof _window2.default.HTMLAreaElement)&&child.hasAttribute('href')||(child instanceof _window2.default.HTMLInputElement||child instanceof _window2.default.HTMLSelectElement||child instanceof _window2.default.HTMLTextAreaElement||child instanceof _window2.default.HTMLButtonElement)&&!child.hasAttribute('disabled')||child instanceof _window2.default.HTMLIFrameElement||child instanceof _window2.default.HTMLObjectElement||child instanceof _window2.default.HTMLEmbedElement||child.hasAttribute('tabindex')&&child.getAttribute('tabindex')!==-1||child.hasAttribute('contenteditable');});};return ModalDialog;}(Component);/**
 * Default options for `ModalDialog` default options.
 *
 * @type {Object}
 * @private
 */ModalDialog.prototype.options_={pauseOnOpen:true,temporary:true};Component.registerComponent('ModalDialog',ModalDialog);/**
 * Common functionaliy between {@link TextTrackList}, {@link AudioTrackList}, and
 * {@link VideoTrackList}
 *
 * @extends EventTarget
 */var TrackList=/*#__PURE__*/function(_EventTarget){_inheritsLoose(TrackList,_EventTarget);/**
   * Create an instance of this class
   *
   * @param {Track[]} tracks
   *        A list of tracks to initialize the list with.
   *
   * @abstract
   */function TrackList(tracks){var _this;if(tracks===void 0){tracks=[];}_this=_EventTarget.call(this)||this;_this.tracks_=[];/**
     * @memberof TrackList
     * @member {number} length
     *         The current number of `Track`s in the this Trackist.
     * @instance
     */Object.defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),'length',{get:function get(){return this.tracks_.length;}});for(var i=0;i<tracks.length;i++){_this.addTrack(tracks[i]);}return _this;}/**
   * Add a {@link Track} to the `TrackList`
   *
   * @param {Track} track
   *        The audio, video, or text track to add to the list.
   *
   * @fires TrackList#addtrack
   */var _proto=TrackList.prototype;_proto.addTrack=function addTrack(track){var index=this.tracks_.length;if(!(''+index in this)){Object.defineProperty(this,index,{get:function get(){return this.tracks_[index];}});}// Do not add duplicate tracks
if(this.tracks_.indexOf(track)===-1){this.tracks_.push(track);/**
       * Triggered when a track is added to a track list.
       *
       * @event TrackList#addtrack
       * @type {EventTarget~Event}
       * @property {Track} track
       *           A reference to track that was added.
       */this.trigger({track:track,type:'addtrack',target:this});}}/**
   * Remove a {@link Track} from the `TrackList`
   *
   * @param {Track} rtrack
   *        The audio, video, or text track to remove from the list.
   *
   * @fires TrackList#removetrack
   */;_proto.removeTrack=function removeTrack(rtrack){var track;for(var i=0,l=this.length;i<l;i++){if(this[i]===rtrack){track=this[i];if(track.off){track.off();}this.tracks_.splice(i,1);break;}}if(!track){return;}/**
     * Triggered when a track is removed from track list.
     *
     * @event TrackList#removetrack
     * @type {EventTarget~Event}
     * @property {Track} track
     *           A reference to track that was removed.
     */this.trigger({track:track,type:'removetrack',target:this});}/**
   * Get a Track from the TrackList by a tracks id
   *
   * @param {string} id - the id of the track to get
   * @method getTrackById
   * @return {Track}
   * @private
   */;_proto.getTrackById=function getTrackById(id){var result=null;for(var i=0,l=this.length;i<l;i++){var track=this[i];if(track.id===id){result=track;break;}}return result;};return TrackList;}(EventTarget);/**
 * Triggered when a different track is selected/enabled.
 *
 * @event TrackList#change
 * @type {EventTarget~Event}
 *//**
 * Events that can be called with on + eventName. See {@link EventHandler}.
 *
 * @property {Object} TrackList#allowedEvents_
 * @private
 */TrackList.prototype.allowedEvents_={change:'change',addtrack:'addtrack',removetrack:'removetrack'};// emulate attribute EventHandler support to allow for feature detection
for(var event in TrackList.prototype.allowedEvents_){TrackList.prototype['on'+event]=null;}/**
 * Anywhere we call this function we diverge from the spec
 * as we only support one enabled audiotrack at a time
 *
 * @param {AudioTrackList} list
 *        list to work on
 *
 * @param {AudioTrack} track
 *        The track to skip
 *
 * @private
 */var disableOthers=function disableOthers(list,track){for(var i=0;i<list.length;i++){if(!Object.keys(list[i]).length||track.id===list[i].id){continue;}// another audio track is enabled, disable it
list[i].enabled=false;}};/**
 * The current list of {@link AudioTrack} for a media file.
 *
 * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#audiotracklist}
 * @extends TrackList
 */var AudioTrackList=/*#__PURE__*/function(_TrackList){_inheritsLoose(AudioTrackList,_TrackList);/**
   * Create an instance of this class.
   *
   * @param {AudioTrack[]} [tracks=[]]
   *        A list of `AudioTrack` to instantiate the list with.
   */function AudioTrackList(tracks){var _this;if(tracks===void 0){tracks=[];}// make sure only 1 track is enabled
// sorted from last index to first index
for(var i=tracks.length-1;i>=0;i--){if(tracks[i].enabled){disableOthers(tracks,tracks[i]);break;}}_this=_TrackList.call(this,tracks)||this;_this.changing_=false;return _this;}/**
   * Add an {@link AudioTrack} to the `AudioTrackList`.
   *
   * @param {AudioTrack} track
   *        The AudioTrack to add to the list
   *
   * @fires TrackList#addtrack
   */var _proto=AudioTrackList.prototype;_proto.addTrack=function addTrack(track){var _this2=this;if(track.enabled){disableOthers(this,track);}_TrackList.prototype.addTrack.call(this,track);// native tracks don't have this
if(!track.addEventListener){return;}track.enabledChange_=function(){// when we are disabling other tracks (since we don't support
// more than one track at a time) we will set changing_
// to true so that we don't trigger additional change events
if(_this2.changing_){return;}_this2.changing_=true;disableOthers(_this2,track);_this2.changing_=false;_this2.trigger('change');};/**
     * @listens AudioTrack#enabledchange
     * @fires TrackList#change
     */track.addEventListener('enabledchange',track.enabledChange_);};_proto.removeTrack=function removeTrack(rtrack){_TrackList.prototype.removeTrack.call(this,rtrack);if(rtrack.removeEventListener&&rtrack.enabledChange_){rtrack.removeEventListener('enabledchange',rtrack.enabledChange_);rtrack.enabledChange_=null;}};return AudioTrackList;}(TrackList);/**
 * Un-select all other {@link VideoTrack}s that are selected.
 *
 * @param {VideoTrackList} list
 *        list to work on
 *
 * @param {VideoTrack} track
 *        The track to skip
 *
 * @private
 */var disableOthers$1=function disableOthers(list,track){for(var i=0;i<list.length;i++){if(!Object.keys(list[i]).length||track.id===list[i].id){continue;}// another video track is enabled, disable it
list[i].selected=false;}};/**
 * The current list of {@link VideoTrack} for a video.
 *
 * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#videotracklist}
 * @extends TrackList
 */var VideoTrackList=/*#__PURE__*/function(_TrackList){_inheritsLoose(VideoTrackList,_TrackList);/**
   * Create an instance of this class.
   *
   * @param {VideoTrack[]} [tracks=[]]
   *        A list of `VideoTrack` to instantiate the list with.
   */function VideoTrackList(tracks){var _this;if(tracks===void 0){tracks=[];}// make sure only 1 track is enabled
// sorted from last index to first index
for(var i=tracks.length-1;i>=0;i--){if(tracks[i].selected){disableOthers$1(tracks,tracks[i]);break;}}_this=_TrackList.call(this,tracks)||this;_this.changing_=false;/**
     * @member {number} VideoTrackList#selectedIndex
     *         The current index of the selected {@link VideoTrack`}.
     */Object.defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),'selectedIndex',{get:function get(){for(var _i=0;_i<this.length;_i++){if(this[_i].selected){return _i;}}return-1;},set:function set(){}});return _this;}/**
   * Add a {@link VideoTrack} to the `VideoTrackList`.
   *
   * @param {VideoTrack} track
   *        The VideoTrack to add to the list
   *
   * @fires TrackList#addtrack
   */var _proto=VideoTrackList.prototype;_proto.addTrack=function addTrack(track){var _this2=this;if(track.selected){disableOthers$1(this,track);}_TrackList.prototype.addTrack.call(this,track);// native tracks don't have this
if(!track.addEventListener){return;}track.selectedChange_=function(){if(_this2.changing_){return;}_this2.changing_=true;disableOthers$1(_this2,track);_this2.changing_=false;_this2.trigger('change');};/**
     * @listens VideoTrack#selectedchange
     * @fires TrackList#change
     */track.addEventListener('selectedchange',track.selectedChange_);};_proto.removeTrack=function removeTrack(rtrack){_TrackList.prototype.removeTrack.call(this,rtrack);if(rtrack.removeEventListener&&rtrack.selectedChange_){rtrack.removeEventListener('selectedchange',rtrack.selectedChange_);rtrack.selectedChange_=null;}};return VideoTrackList;}(TrackList);/**
 * The current list of {@link TextTrack} for a media file.
 *
 * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttracklist}
 * @extends TrackList
 */var TextTrackList=/*#__PURE__*/function(_TrackList){_inheritsLoose(TextTrackList,_TrackList);function TextTrackList(){return _TrackList.apply(this,arguments)||this;}var _proto=TextTrackList.prototype;/**
   * Add a {@link TextTrack} to the `TextTrackList`
   *
   * @param {TextTrack} track
   *        The text track to add to the list.
   *
   * @fires TrackList#addtrack
   */_proto.addTrack=function addTrack(track){var _this=this;_TrackList.prototype.addTrack.call(this,track);if(!this.queueChange_){this.queueChange_=function(){return _this.queueTrigger('change');};}if(!this.triggerSelectedlanguagechange){this.triggerSelectedlanguagechange_=function(){return _this.trigger('selectedlanguagechange');};}/**
     * @listens TextTrack#modechange
     * @fires TrackList#change
     */track.addEventListener('modechange',this.queueChange_);var nonLanguageTextTrackKind=['metadata','chapters'];if(nonLanguageTextTrackKind.indexOf(track.kind)===-1){track.addEventListener('modechange',this.triggerSelectedlanguagechange_);}};_proto.removeTrack=function removeTrack(rtrack){_TrackList.prototype.removeTrack.call(this,rtrack);// manually remove the event handlers we added
if(rtrack.removeEventListener){if(this.queueChange_){rtrack.removeEventListener('modechange',this.queueChange_);}if(this.selectedlanguagechange_){rtrack.removeEventListener('modechange',this.triggerSelectedlanguagechange_);}}};return TextTrackList;}(TrackList);/**
 * @file html-track-element-list.js
 *//**
 * The current list of {@link HtmlTrackElement}s.
 */var HtmlTrackElementList=/*#__PURE__*/function(){/**
   * Create an instance of this class.
   *
   * @param {HtmlTrackElement[]} [tracks=[]]
   *        A list of `HtmlTrackElement` to instantiate the list with.
   */function HtmlTrackElementList(trackElements){if(trackElements===void 0){trackElements=[];}this.trackElements_=[];/**
     * @memberof HtmlTrackElementList
     * @member {number} length
     *         The current number of `Track`s in the this Trackist.
     * @instance
     */Object.defineProperty(this,'length',{get:function get(){return this.trackElements_.length;}});for(var i=0,length=trackElements.length;i<length;i++){this.addTrackElement_(trackElements[i]);}}/**
   * Add an {@link HtmlTrackElement} to the `HtmlTrackElementList`
   *
   * @param {HtmlTrackElement} trackElement
   *        The track element to add to the list.
   *
   * @private
   */var _proto=HtmlTrackElementList.prototype;_proto.addTrackElement_=function addTrackElement_(trackElement){var index=this.trackElements_.length;if(!(''+index in this)){Object.defineProperty(this,index,{get:function get(){return this.trackElements_[index];}});}// Do not add duplicate elements
if(this.trackElements_.indexOf(trackElement)===-1){this.trackElements_.push(trackElement);}}/**
   * Get an {@link HtmlTrackElement} from the `HtmlTrackElementList` given an
   * {@link TextTrack}.
   *
   * @param {TextTrack} track
   *        The track associated with a track element.
   *
   * @return {HtmlTrackElement|undefined}
   *         The track element that was found or undefined.
   *
   * @private
   */;_proto.getTrackElementByTrack_=function getTrackElementByTrack_(track){var trackElement_;for(var i=0,length=this.trackElements_.length;i<length;i++){if(track===this.trackElements_[i].track){trackElement_=this.trackElements_[i];break;}}return trackElement_;}/**
   * Remove a {@link HtmlTrackElement} from the `HtmlTrackElementList`
   *
   * @param {HtmlTrackElement} trackElement
   *        The track element to remove from the list.
   *
   * @private
   */;_proto.removeTrackElement_=function removeTrackElement_(trackElement){for(var i=0,length=this.trackElements_.length;i<length;i++){if(trackElement===this.trackElements_[i]){if(this.trackElements_[i].track&&typeof this.trackElements_[i].track.off==='function'){this.trackElements_[i].track.off();}if(typeof this.trackElements_[i].off==='function'){this.trackElements_[i].off();}this.trackElements_.splice(i,1);break;}}};return HtmlTrackElementList;}();/**
 * @file text-track-cue-list.js
 *//**
 * @typedef {Object} TextTrackCueList~TextTrackCue
 *
 * @property {string} id
 *           The unique id for this text track cue
 *
 * @property {number} startTime
 *           The start time for this text track cue
 *
 * @property {number} endTime
 *           The end time for this text track cue
 *
 * @property {boolean} pauseOnExit
 *           Pause when the end time is reached if true.
 *
 * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackcue}
 *//**
 * A List of TextTrackCues.
 *
 * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackcuelist}
 */var TextTrackCueList=/*#__PURE__*/function(){/**
   * Create an instance of this class..
   *
   * @param {Array} cues
   *        A list of cues to be initialized with
   */function TextTrackCueList(cues){TextTrackCueList.prototype.setCues_.call(this,cues);/**
     * @memberof TextTrackCueList
     * @member {number} length
     *         The current number of `TextTrackCue`s in the TextTrackCueList.
     * @instance
     */Object.defineProperty(this,'length',{get:function get(){return this.length_;}});}/**
   * A setter for cues in this list. Creates getters
   * an an index for the cues.
   *
   * @param {Array} cues
   *        An array of cues to set
   *
   * @private
   */var _proto=TextTrackCueList.prototype;_proto.setCues_=function setCues_(cues){var oldLength=this.length||0;var i=0;var l=cues.length;this.cues_=cues;this.length_=cues.length;var defineProp=function defineProp(index){if(!(''+index in this)){Object.defineProperty(this,''+index,{get:function get(){return this.cues_[index];}});}};if(oldLength<l){i=oldLength;for(;i<l;i++){defineProp.call(this,i);}}}/**
   * Get a `TextTrackCue` that is currently in the `TextTrackCueList` by id.
   *
   * @param {string} id
   *        The id of the cue that should be searched for.
   *
   * @return {TextTrackCueList~TextTrackCue|null}
   *         A single cue or null if none was found.
   */;_proto.getCueById=function getCueById(id){var result=null;for(var i=0,l=this.length;i<l;i++){var cue=this[i];if(cue.id===id){result=cue;break;}}return result;};return TextTrackCueList;}();/**
 * @file track-kinds.js
 *//**
 * All possible `VideoTrackKind`s
 *
 * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-videotrack-kind
 * @typedef VideoTrack~Kind
 * @enum
 */var VideoTrackKind={alternative:'alternative',captions:'captions',main:'main',sign:'sign',subtitles:'subtitles',commentary:'commentary'};/**
 * All possible `AudioTrackKind`s
 *
 * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-audiotrack-kind
 * @typedef AudioTrack~Kind
 * @enum
 */var AudioTrackKind={'alternative':'alternative','descriptions':'descriptions','main':'main','main-desc':'main-desc','translation':'translation','commentary':'commentary'};/**
 * All possible `TextTrackKind`s
 *
 * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-texttrack-kind
 * @typedef TextTrack~Kind
 * @enum
 */var TextTrackKind={subtitles:'subtitles',captions:'captions',descriptions:'descriptions',chapters:'chapters',metadata:'metadata'};/**
 * All possible `TextTrackMode`s
 *
 * @see https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackmode
 * @typedef TextTrack~Mode
 * @enum
 */var TextTrackMode={disabled:'disabled',hidden:'hidden',showing:'showing'};/**
 * A Track class that contains all of the common functionality for {@link AudioTrack},
 * {@link VideoTrack}, and {@link TextTrack}.
 *
 * > Note: This class should not be used directly
 *
 * @see {@link https://html.spec.whatwg.org/multipage/embedded-content.html}
 * @extends EventTarget
 * @abstract
 */var Track=/*#__PURE__*/function(_EventTarget){_inheritsLoose(Track,_EventTarget);/**
   * Create an instance of this class.
   *
   * @param {Object} [options={}]
   *        Object of option names and values
   *
   * @param {string} [options.kind='']
   *        A valid kind for the track type you are creating.
   *
   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]
   *        A unique id for this AudioTrack.
   *
   * @param {string} [options.label='']
   *        The menu label for this track.
   *
   * @param {string} [options.language='']
   *        A valid two character language code.
   *
   * @abstract
   */function Track(options){var _this;if(options===void 0){options={};}_this=_EventTarget.call(this)||this;var trackProps={id:options.id||'vjs_track_'+newGUID(),kind:options.kind||'',label:options.label||'',language:options.language||''};/**
     * @memberof Track
     * @member {string} id
     *         The id of this track. Cannot be changed after creation.
     * @instance
     *
     * @readonly
     *//**
     * @memberof Track
     * @member {string} kind
     *         The kind of track that this is. Cannot be changed after creation.
     * @instance
     *
     * @readonly
     *//**
     * @memberof Track
     * @member {string} label
     *         The label of this track. Cannot be changed after creation.
     * @instance
     *
     * @readonly
     *//**
     * @memberof Track
     * @member {string} language
     *         The two letter language code for this track. Cannot be changed after
     *         creation.
     * @instance
     *
     * @readonly
     */var _loop=function _loop(key){Object.defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),key,{get:function get(){return trackProps[key];},set:function set(){}});};for(var key in trackProps){_loop(key);}return _this;}return Track;}(EventTarget);/**
 * @file url.js
 * @module url
 *//**
 * @typedef {Object} url:URLObject
 *
 * @property {string} protocol
 *           The protocol of the url that was parsed.
 *
 * @property {string} hostname
 *           The hostname of the url that was parsed.
 *
 * @property {string} port
 *           The port of the url that was parsed.
 *
 * @property {string} pathname
 *           The pathname of the url that was parsed.
 *
 * @property {string} search
 *           The search query of the url that was parsed.
 *
 * @property {string} hash
 *           The hash of the url that was parsed.
 *
 * @property {string} host
 *           The host of the url that was parsed.
 *//**
 * Resolve and parse the elements of a URL.
 *
 * @function
 * @param    {String} url
 *           The url to parse
 *
 * @return   {url:URLObject}
 *           An object of url details
 */var parseUrl=function parseUrl(url){var props=['protocol','hostname','port','pathname','search','hash','host'];// add the url to an anchor and let the browser parse the URL
var a=_document2.default.createElement('a');a.href=url;// IE8 (and 9?) Fix
// ie8 doesn't parse the URL correctly until the anchor is actually
// added to the body, and an innerHTML is needed to trigger the parsing
var addToBody=a.host===''&&a.protocol!=='file:';var div;if(addToBody){div=_document2.default.createElement('div');div.innerHTML="<a href=\""+url+"\"></a>";a=div.firstChild;// prevent the div from affecting layout
div.setAttribute('style','display:none; position:absolute;');_document2.default.body.appendChild(div);}// Copy the specific URL properties to a new object
// This is also needed for IE8 because the anchor loses its
// properties when it's removed from the dom
var details={};for(var i=0;i<props.length;i++){details[props[i]]=a[props[i]];}// IE9 adds the port to the host property unlike everyone else. If
// a port identifier is added for standard ports, strip it.
if(details.protocol==='http:'){details.host=details.host.replace(/:80$/,'');}if(details.protocol==='https:'){details.host=details.host.replace(/:443$/,'');}if(!details.protocol){details.protocol=_window2.default.location.protocol;}if(addToBody){_document2.default.body.removeChild(div);}return details;};/**
 * Get absolute version of relative URL. Used to tell Flash the correct URL.
 *
 * @function
 * @param    {string} url
 *           URL to make absolute
 *
 * @return   {string}
 *           Absolute URL
 *
 * @see      http://stackoverflow.com/questions/470832/getting-an-absolute-url-from-a-relative-one-ie6-issue
 */var getAbsoluteURL=function getAbsoluteURL(url){// Check if absolute URL
if(!url.match(/^https?:\/\//)){// Convert to absolute URL. Flash hosted off-site needs an absolute URL.
var div=_document2.default.createElement('div');div.innerHTML="<a href=\""+url+"\">x</a>";url=div.firstChild.href;}return url;};/**
 * Returns the extension of the passed file name. It will return an empty string
 * if passed an invalid path.
 *
 * @function
 * @param    {string} path
 *           The fileName path like '/path/to/file.mp4'
 *
 * @return  {string}
 *           The extension in lower case or an empty string if no
 *           extension could be found.
 */var getFileExtension=function getFileExtension(path){if(typeof path==='string'){var splitPathRe=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i;var pathParts=splitPathRe.exec(path);if(pathParts){return pathParts.pop().toLowerCase();}}return'';};/**
 * Returns whether the url passed is a cross domain request or not.
 *
 * @function
 * @param    {string} url
 *           The url to check.
 *
 * @return   {boolean}
 *           Whether it is a cross domain request or not.
 */var isCrossOrigin=function isCrossOrigin(url){var winLoc=_window2.default.location;var urlInfo=parseUrl(url);// IE8 protocol relative urls will return ':' for protocol
var srcProtocol=urlInfo.protocol===':'?winLoc.protocol:urlInfo.protocol;// Check if url is for another domain/origin
// IE8 doesn't know location.origin, so we won't rely on it here
var crossOrigin=srcProtocol+urlInfo.host!==winLoc.protocol+winLoc.host;return crossOrigin;};var Url=/*#__PURE__*/Object.freeze({parseUrl:parseUrl,getAbsoluteURL:getAbsoluteURL,getFileExtension:getFileExtension,isCrossOrigin:isCrossOrigin});/**
 * Takes a webvtt file contents and parses it into cues
 *
 * @param {string} srcContent
 *        webVTT file contents
 *
 * @param {TextTrack} track
 *        TextTrack to add cues to. Cues come from the srcContent.
 *
 * @private
 */var parseCues=function parseCues(srcContent,track){var parser=new _window2.default.WebVTT.Parser(_window2.default,_window2.default.vttjs,_window2.default.WebVTT.StringDecoder());var errors=[];parser.oncue=function(cue){track.addCue(cue);};parser.onparsingerror=function(error){errors.push(error);};parser.onflush=function(){track.trigger({type:'loadeddata',target:track});};parser.parse(srcContent);if(errors.length>0){if(_window2.default.console&&_window2.default.console.groupCollapsed){_window2.default.console.groupCollapsed("Text Track parsing errors for "+track.src);}errors.forEach(function(error){return log.error(error);});if(_window2.default.console&&_window2.default.console.groupEnd){_window2.default.console.groupEnd();}}parser.flush();};/**
 * Load a `TextTrack` from a specified url.
 *
 * @param {string} src
 *        Url to load track from.
 *
 * @param {TextTrack} track
 *        Track to add cues to. Comes from the content at the end of `url`.
 *
 * @private
 */var loadTrack=function loadTrack(src,track){var opts={uri:src};var crossOrigin=isCrossOrigin(src);if(crossOrigin){opts.cors=crossOrigin;}(0,_xhr2.default)(opts,bind(this,function(err,response,responseBody){if(err){return log.error(err,response);}track.loaded_=true;// Make sure that vttjs has loaded, otherwise, wait till it finished loading
// NOTE: this is only used for the alt/video.novtt.js build
if(typeof _window2.default.WebVTT!=='function'){if(track.tech_){// to prevent use before define eslint error, we define loadHandler
// as a let here
var loadHandler;var errorHandler=function errorHandler(){log.error("vttjs failed to load, stopping trying to process "+track.src);track.tech_.off('vttjsloaded',loadHandler);};loadHandler=function loadHandler(){track.tech_.off('vttjserror',errorHandler);return parseCues(responseBody,track);};track.tech_.one('vttjsloaded',loadHandler);track.tech_.one('vttjserror',errorHandler);}}else{parseCues(responseBody,track);}}));};/**
 * A representation of a single `TextTrack`.
 *
 * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttrack}
 * @extends Track
 */var TextTrack=/*#__PURE__*/function(_Track){_inheritsLoose(TextTrack,_Track);/**
   * Create an instance of this class.
   *
   * @param {Object} options={}
   *        Object of option names and values
   *
   * @param {Tech} options.tech
   *        A reference to the tech that owns this TextTrack.
   *
   * @param {TextTrack~Kind} [options.kind='subtitles']
   *        A valid text track kind.
   *
   * @param {TextTrack~Mode} [options.mode='disabled']
   *        A valid text track mode.
   *
   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]
   *        A unique id for this TextTrack.
   *
   * @param {string} [options.label='']
   *        The menu label for this track.
   *
   * @param {string} [options.language='']
   *        A valid two character language code.
   *
   * @param {string} [options.srclang='']
   *        A valid two character language code. An alternative, but deprioritized
   *        version of `options.language`
   *
   * @param {string} [options.src]
   *        A url to TextTrack cues.
   *
   * @param {boolean} [options.default]
   *        If this track should default to on or off.
   */function TextTrack(options){var _this;if(options===void 0){options={};}if(!options.tech){throw new Error('A tech was not provided.');}var settings=mergeOptions(options,{kind:TextTrackKind[options.kind]||'subtitles',language:options.language||options.srclang||''});var mode=TextTrackMode[settings.mode]||'disabled';var default_=settings.default;if(settings.kind==='metadata'||settings.kind==='chapters'){mode='hidden';}_this=_Track.call(this,settings)||this;_this.tech_=settings.tech;_this.cues_=[];_this.activeCues_=[];var cues=new TextTrackCueList(_this.cues_);var activeCues=new TextTrackCueList(_this.activeCues_);var changed=false;var timeupdateHandler=bind(_assertThisInitialized(_assertThisInitialized(_this)),function(){// Accessing this.activeCues for the side-effects of updating itself
// due to its nature as a getter function. Do not remove or cues will
// stop updating!
// Use the setter to prevent deletion from uglify (pure_getters rule)
this.activeCues=this.activeCues;if(changed){this.trigger('cuechange');changed=false;}});if(mode!=='disabled'){_this.tech_.ready(function(){_this.tech_.on('timeupdate',timeupdateHandler);},true);}Object.defineProperties(_assertThisInitialized(_assertThisInitialized(_this)),{/**
       * @memberof TextTrack
       * @member {boolean} default
       *         If this track was set to be on or off by default. Cannot be changed after
       *         creation.
       * @instance
       *
       * @readonly
       */default:{get:function get(){return default_;},set:function set(){}},/**
       * @memberof TextTrack
       * @member {string} mode
       *         Set the mode of this TextTrack to a valid {@link TextTrack~Mode}. Will
       *         not be set if setting to an invalid mode.
       * @instance
       *
       * @fires TextTrack#modechange
       */mode:{get:function get(){return mode;},set:function set(newMode){var _this2=this;if(!TextTrackMode[newMode]){return;}mode=newMode;if(mode!=='disabled'){this.tech_.ready(function(){_this2.tech_.on('timeupdate',timeupdateHandler);},true);}else{this.tech_.off('timeupdate',timeupdateHandler);}/**
           * An event that fires when mode changes on this track. This allows
           * the TextTrackList that holds this track to act accordingly.
           *
           * > Note: This is not part of the spec!
           *
           * @event TextTrack#modechange
           * @type {EventTarget~Event}
           */this.trigger('modechange');}},/**
       * @memberof TextTrack
       * @member {TextTrackCueList} cues
       *         The text track cue list for this TextTrack.
       * @instance
       */cues:{get:function get(){if(!this.loaded_){return null;}return cues;},set:function set(){}},/**
       * @memberof TextTrack
       * @member {TextTrackCueList} activeCues
       *         The list text track cues that are currently active for this TextTrack.
       * @instance
       */activeCues:{get:function get(){if(!this.loaded_){return null;}// nothing to do
if(this.cues.length===0){return activeCues;}var ct=this.tech_.currentTime();var active=[];for(var i=0,l=this.cues.length;i<l;i++){var cue=this.cues[i];if(cue.startTime<=ct&&cue.endTime>=ct){active.push(cue);}else if(cue.startTime===cue.endTime&&cue.startTime<=ct&&cue.startTime+0.5>=ct){active.push(cue);}}changed=false;if(active.length!==this.activeCues_.length){changed=true;}else{for(var _i=0;_i<active.length;_i++){if(this.activeCues_.indexOf(active[_i])===-1){changed=true;}}}this.activeCues_=active;activeCues.setCues_(this.activeCues_);return activeCues;},// /!\ Keep this setter empty (see the timeupdate handler above)
set:function set(){}}});if(settings.src){_this.src=settings.src;loadTrack(settings.src,_assertThisInitialized(_assertThisInitialized(_this)));}else{_this.loaded_=true;}return _this;}/**
   * Add a cue to the internal list of cues.
   *
   * @param {TextTrack~Cue} cue
   *        The cue to add to our internal list
   */var _proto=TextTrack.prototype;_proto.addCue=function addCue(originalCue){var cue=originalCue;if(_window2.default.vttjs&&!(originalCue instanceof _window2.default.vttjs.VTTCue)){cue=new _window2.default.vttjs.VTTCue(originalCue.startTime,originalCue.endTime,originalCue.text);for(var prop in originalCue){if(!(prop in cue)){cue[prop]=originalCue[prop];}}// make sure that `id` is copied over
cue.id=originalCue.id;cue.originalCue_=originalCue;}var tracks=this.tech_.textTracks();for(var i=0;i<tracks.length;i++){if(tracks[i]!==this){tracks[i].removeCue(cue);}}this.cues_.push(cue);this.cues.setCues_(this.cues_);}/**
   * Remove a cue from our internal list
   *
   * @param {TextTrack~Cue} removeCue
   *        The cue to remove from our internal list
   */;_proto.removeCue=function removeCue(_removeCue){var i=this.cues_.length;while(i--){var cue=this.cues_[i];if(cue===_removeCue||cue.originalCue_&&cue.originalCue_===_removeCue){this.cues_.splice(i,1);this.cues.setCues_(this.cues_);break;}}};return TextTrack;}(Track);/**
 * cuechange - One or more cues in the track have become active or stopped being active.
 */TextTrack.prototype.allowedEvents_={cuechange:'cuechange'};/**
 * A representation of a single `AudioTrack`. If it is part of an {@link AudioTrackList}
 * only one `AudioTrack` in the list will be enabled at a time.
 *
 * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#audiotrack}
 * @extends Track
 */var AudioTrack=/*#__PURE__*/function(_Track){_inheritsLoose(AudioTrack,_Track);/**
   * Create an instance of this class.
   *
   * @param {Object} [options={}]
   *        Object of option names and values
   *
   * @param {AudioTrack~Kind} [options.kind='']
   *        A valid audio track kind
   *
   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]
   *        A unique id for this AudioTrack.
   *
   * @param {string} [options.label='']
   *        The menu label for this track.
   *
   * @param {string} [options.language='']
   *        A valid two character language code.
   *
   * @param {boolean} [options.enabled]
   *        If this track is the one that is currently playing. If this track is part of
   *        an {@link AudioTrackList}, only one {@link AudioTrack} will be enabled.
   */function AudioTrack(options){var _this;if(options===void 0){options={};}var settings=mergeOptions(options,{kind:AudioTrackKind[options.kind]||''});_this=_Track.call(this,settings)||this;var enabled=false;/**
     * @memberof AudioTrack
     * @member {boolean} enabled
     *         If this `AudioTrack` is enabled or not. When setting this will
     *         fire {@link AudioTrack#enabledchange} if the state of enabled is changed.
     * @instance
     *
     * @fires VideoTrack#selectedchange
     */Object.defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),'enabled',{get:function get(){return enabled;},set:function set(newEnabled){// an invalid or unchanged value
if(typeof newEnabled!=='boolean'||newEnabled===enabled){return;}enabled=newEnabled;/**
         * An event that fires when enabled changes on this track. This allows
         * the AudioTrackList that holds this track to act accordingly.
         *
         * > Note: This is not part of the spec! Native tracks will do
         *         this internally without an event.
         *
         * @event AudioTrack#enabledchange
         * @type {EventTarget~Event}
         */this.trigger('enabledchange');}});// if the user sets this track to selected then
// set selected to that true value otherwise
// we keep it false
if(settings.enabled){_this.enabled=settings.enabled;}_this.loaded_=true;return _this;}return AudioTrack;}(Track);/**
 * A representation of a single `VideoTrack`.
 *
 * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#videotrack}
 * @extends Track
 */var VideoTrack=/*#__PURE__*/function(_Track){_inheritsLoose(VideoTrack,_Track);/**
   * Create an instance of this class.
   *
   * @param {Object} [options={}]
   *        Object of option names and values
   *
   * @param {string} [options.kind='']
   *        A valid {@link VideoTrack~Kind}
   *
   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]
   *        A unique id for this AudioTrack.
   *
   * @param {string} [options.label='']
   *        The menu label for this track.
   *
   * @param {string} [options.language='']
   *        A valid two character language code.
   *
   * @param {boolean} [options.selected]
   *        If this track is the one that is currently playing.
   */function VideoTrack(options){var _this;if(options===void 0){options={};}var settings=mergeOptions(options,{kind:VideoTrackKind[options.kind]||''});_this=_Track.call(this,settings)||this;var selected=false;/**
     * @memberof VideoTrack
     * @member {boolean} selected
     *         If this `VideoTrack` is selected or not. When setting this will
     *         fire {@link VideoTrack#selectedchange} if the state of selected changed.
     * @instance
     *
     * @fires VideoTrack#selectedchange
     */Object.defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),'selected',{get:function get(){return selected;},set:function set(newSelected){// an invalid or unchanged value
if(typeof newSelected!=='boolean'||newSelected===selected){return;}selected=newSelected;/**
         * An event that fires when selected changes on this track. This allows
         * the VideoTrackList that holds this track to act accordingly.
         *
         * > Note: This is not part of the spec! Native tracks will do
         *         this internally without an event.
         *
         * @event VideoTrack#selectedchange
         * @type {EventTarget~Event}
         */this.trigger('selectedchange');}});// if the user sets this track to selected then
// set selected to that true value otherwise
// we keep it false
if(settings.selected){_this.selected=settings.selected;}return _this;}return VideoTrack;}(Track);/**
 * @memberof HTMLTrackElement
 * @typedef {HTMLTrackElement~ReadyState}
 * @enum {number}
 */var NONE=0;var LOADING=1;var LOADED=2;var ERROR=3;/**
 * A single track represented in the DOM.
 *
 * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#htmltrackelement}
 * @extends EventTarget
 */var HTMLTrackElement=/*#__PURE__*/function(_EventTarget){_inheritsLoose(HTMLTrackElement,_EventTarget);/**
   * Create an instance of this class.
   *
   * @param {Object} options={}
   *        Object of option names and values
   *
   * @param {Tech} options.tech
   *        A reference to the tech that owns this HTMLTrackElement.
   *
   * @param {TextTrack~Kind} [options.kind='subtitles']
   *        A valid text track kind.
   *
   * @param {TextTrack~Mode} [options.mode='disabled']
   *        A valid text track mode.
   *
   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]
   *        A unique id for this TextTrack.
   *
   * @param {string} [options.label='']
   *        The menu label for this track.
   *
   * @param {string} [options.language='']
   *        A valid two character language code.
   *
   * @param {string} [options.srclang='']
   *        A valid two character language code. An alternative, but deprioritized
   *        vesion of `options.language`
   *
   * @param {string} [options.src]
   *        A url to TextTrack cues.
   *
   * @param {boolean} [options.default]
   *        If this track should default to on or off.
   */function HTMLTrackElement(options){var _this;if(options===void 0){options={};}_this=_EventTarget.call(this)||this;var readyState;var track=new TextTrack(options);_this.kind=track.kind;_this.src=track.src;_this.srclang=track.language;_this.label=track.label;_this.default=track.default;Object.defineProperties(_assertThisInitialized(_assertThisInitialized(_this)),{/**
       * @memberof HTMLTrackElement
       * @member {HTMLTrackElement~ReadyState} readyState
       *         The current ready state of the track element.
       * @instance
       */readyState:{get:function get(){return readyState;}},/**
       * @memberof HTMLTrackElement
       * @member {TextTrack} track
       *         The underlying TextTrack object.
       * @instance
       *
       */track:{get:function get(){return track;}}});readyState=NONE;/**
     * @listens TextTrack#loadeddata
     * @fires HTMLTrackElement#load
     */track.addEventListener('loadeddata',function(){readyState=LOADED;_this.trigger({type:'load',target:_assertThisInitialized(_assertThisInitialized(_this))});});return _this;}return HTMLTrackElement;}(EventTarget);HTMLTrackElement.prototype.allowedEvents_={load:'load'};HTMLTrackElement.NONE=NONE;HTMLTrackElement.LOADING=LOADING;HTMLTrackElement.LOADED=LOADED;HTMLTrackElement.ERROR=ERROR;/*
 * This file contains all track properties that are used in
 * player.js, tech.js, html5.js and possibly other techs in the future.
 */var NORMAL={audio:{ListClass:AudioTrackList,TrackClass:AudioTrack,capitalName:'Audio'},video:{ListClass:VideoTrackList,TrackClass:VideoTrack,capitalName:'Video'},text:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:'Text'}};Object.keys(NORMAL).forEach(function(type){NORMAL[type].getterName=type+"Tracks";NORMAL[type].privateName=type+"Tracks_";});var REMOTE={remoteText:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:'RemoteText',getterName:'remoteTextTracks',privateName:'remoteTextTracks_'},remoteTextEl:{ListClass:HtmlTrackElementList,TrackClass:HTMLTrackElement,capitalName:'RemoteTextTrackEls',getterName:'remoteTextTrackEls',privateName:'remoteTextTrackEls_'}};var ALL=mergeOptions(NORMAL,REMOTE);REMOTE.names=Object.keys(REMOTE);NORMAL.names=Object.keys(NORMAL);ALL.names=[].concat(REMOTE.names).concat(NORMAL.names);/**
 * An Object containing a structure like: `{src: 'url', type: 'mimetype'}` or string
 * that just contains the src url alone.
 * * `var SourceObject = {src: 'http://ex.com/video.mp4', type: 'video/mp4'};`
   * `var SourceString = 'http://example.com/some-video.mp4';`
 *
 * @typedef {Object|string} Tech~SourceObject
 *
 * @property {string} src
 *           The url to the source
 *
 * @property {string} type
 *           The mime type of the source
 *//**
 * A function used by {@link Tech} to create a new {@link TextTrack}.
 *
 * @private
 *
 * @param {Tech} self
 *        An instance of the Tech class.
 *
 * @param {string} kind
 *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata)
 *
 * @param {string} [label]
 *        Label to identify the text track
 *
 * @param {string} [language]
 *        Two letter language abbreviation
 *
 * @param {Object} [options={}]
 *        An object with additional text track options
 *
 * @return {TextTrack}
 *          The text track that was created.
 */function createTrackHelper(self,kind,label,language,options){if(options===void 0){options={};}var tracks=self.textTracks();options.kind=kind;if(label){options.label=label;}if(language){options.language=language;}options.tech=self;var track=new ALL.text.TrackClass(options);tracks.addTrack(track);return track;}/**
 * This is the base class for media playback technology controllers, such as
 * {@link Flash} and {@link HTML5}
 *
 * @extends Component
 */var Tech=/*#__PURE__*/function(_Component){_inheritsLoose(Tech,_Component);/**
  * Create an instance of this Tech.
  *
  * @param {Object} [options]
  *        The key/value store of player options.
  *
  * @param {Component~ReadyCallback} ready
  *        Callback function to call when the `HTML5` Tech is ready.
  */function Tech(options,ready){var _this;if(options===void 0){options={};}if(ready===void 0){ready=function ready(){};}// we don't want the tech to report user activity automatically.
// This is done manually in addControlsListeners
options.reportTouchActivity=false;_this=_Component.call(this,null,options,ready)||this;// keep track of whether the current source has played at all to
// implement a very limited played()
_this.hasStarted_=false;_this.on('playing',function(){this.hasStarted_=true;});_this.on('loadstart',function(){this.hasStarted_=false;});ALL.names.forEach(function(name){var props=ALL[name];if(options&&options[props.getterName]){_this[props.privateName]=options[props.getterName];}});// Manually track progress in cases where the browser/flash player doesn't report it.
if(!_this.featuresProgressEvents){_this.manualProgressOn();}// Manually track timeupdates in cases where the browser/flash player doesn't report it.
if(!_this.featuresTimeupdateEvents){_this.manualTimeUpdatesOn();}['Text','Audio','Video'].forEach(function(track){if(options["native"+track+"Tracks"]===false){_this["featuresNative"+track+"Tracks"]=false;}});if(options.nativeCaptions===false||options.nativeTextTracks===false){_this.featuresNativeTextTracks=false;}else if(options.nativeCaptions===true||options.nativeTextTracks===true){_this.featuresNativeTextTracks=true;}if(!_this.featuresNativeTextTracks){_this.emulateTextTracks();}_this.autoRemoteTextTracks_=new ALL.text.ListClass();_this.initTrackListeners();// Turn on component tap events only if not using native controls
if(!options.nativeControlsForTouch){_this.emitTapEvents();}if(_this.constructor){_this.name_=_this.constructor.name||'Unknown Tech';}return _this;}/**
   * A special function to trigger source set in a way that will allow player
   * to re-trigger if the player or tech are not ready yet.
   *
   * @fires Tech#sourceset
   * @param {string} src The source string at the time of the source changing.
   */var _proto=Tech.prototype;_proto.triggerSourceset=function triggerSourceset(src){var _this2=this;if(!this.isReady_){// on initial ready we have to trigger source set
// 1ms after ready so that player can watch for it.
this.one('ready',function(){return _this2.setTimeout(function(){return _this2.triggerSourceset(src);},1);});}/**
     * Fired when the source is set on the tech causing the media element
     * to reload.
     *
     * @see {@link Player#event:sourceset}
     * @event Tech#sourceset
     * @type {EventTarget~Event}
     */this.trigger({src:src,type:'sourceset'});}/* Fallbacks for unsupported event types
  ================================================================================ *//**
   * Polyfill the `progress` event for browsers that don't support it natively.
   *
   * @see {@link Tech#trackProgress}
   */;_proto.manualProgressOn=function manualProgressOn(){this.on('durationchange',this.onDurationChange);this.manualProgress=true;// Trigger progress watching when a source begins loading
this.one('ready',this.trackProgress);}/**
   * Turn off the polyfill for `progress` events that was created in
   * {@link Tech#manualProgressOn}
   */;_proto.manualProgressOff=function manualProgressOff(){this.manualProgress=false;this.stopTrackingProgress();this.off('durationchange',this.onDurationChange);}/**
   * This is used to trigger a `progress` event when the buffered percent changes. It
   * sets an interval function that will be called every 500 milliseconds to check if the
   * buffer end percent has changed.
   *
   * > This function is called by {@link Tech#manualProgressOn}
   *
   * @param {EventTarget~Event} event
   *        The `ready` event that caused this to run.
   *
   * @listens Tech#ready
   * @fires Tech#progress
   */;_proto.trackProgress=function trackProgress(event){this.stopTrackingProgress();this.progressInterval=this.setInterval(bind(this,function(){// Don't trigger unless buffered amount is greater than last time
var numBufferedPercent=this.bufferedPercent();if(this.bufferedPercent_!==numBufferedPercent){/**
         * See {@link Player#progress}
         *
         * @event Tech#progress
         * @type {EventTarget~Event}
         */this.trigger('progress');}this.bufferedPercent_=numBufferedPercent;if(numBufferedPercent===1){this.stopTrackingProgress();}}),500);}/**
   * Update our internal duration on a `durationchange` event by calling
   * {@link Tech#duration}.
   *
   * @param {EventTarget~Event} event
   *        The `durationchange` event that caused this to run.
   *
   * @listens Tech#durationchange
   */;_proto.onDurationChange=function onDurationChange(event){this.duration_=this.duration();}/**
   * Get and create a `TimeRange` object for buffering.
   *
   * @return {TimeRange}
   *         The time range object that was created.
   */;_proto.buffered=function buffered(){return createTimeRanges(0,0);}/**
   * Get the percentage of the current video that is currently buffered.
   *
   * @return {number}
   *         A number from 0 to 1 that represents the decimal percentage of the
   *         video that is buffered.
   *
   */;_proto.bufferedPercent=function bufferedPercent$$1(){return bufferedPercent(this.buffered(),this.duration_);}/**
   * Turn off the polyfill for `progress` events that was created in
   * {@link Tech#manualProgressOn}
   * Stop manually tracking progress events by clearing the interval that was set in
   * {@link Tech#trackProgress}.
   */;_proto.stopTrackingProgress=function stopTrackingProgress(){this.clearInterval(this.progressInterval);}/**
   * Polyfill the `timeupdate` event for browsers that don't support it.
   *
   * @see {@link Tech#trackCurrentTime}
   */;_proto.manualTimeUpdatesOn=function manualTimeUpdatesOn(){this.manualTimeUpdates=true;this.on('play',this.trackCurrentTime);this.on('pause',this.stopTrackingCurrentTime);}/**
   * Turn off the polyfill for `timeupdate` events that was created in
   * {@link Tech#manualTimeUpdatesOn}
   */;_proto.manualTimeUpdatesOff=function manualTimeUpdatesOff(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off('play',this.trackCurrentTime);this.off('pause',this.stopTrackingCurrentTime);}/**
   * Sets up an interval function to track current time and trigger `timeupdate` every
   * 250 milliseconds.
   *
   * @listens Tech#play
   * @triggers Tech#timeupdate
   */;_proto.trackCurrentTime=function trackCurrentTime(){if(this.currentTimeInterval){this.stopTrackingCurrentTime();}this.currentTimeInterval=this.setInterval(function(){/**
       * Triggered at an interval of 250ms to indicated that time is passing in the video.
       *
       * @event Tech#timeupdate
       * @type {EventTarget~Event}
       */this.trigger({type:'timeupdate',target:this,manuallyTriggered:true});// 42 = 24 fps // 250 is what Webkit uses // FF uses 15
},250);}/**
   * Stop the interval function created in {@link Tech#trackCurrentTime} so that the
   * `timeupdate` event is no longer triggered.
   *
   * @listens {Tech#pause}
   */;_proto.stopTrackingCurrentTime=function stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval);// #1002 - if the video ends right before the next timeupdate would happen,
// the progress bar won't make it all the way to the end
this.trigger({type:'timeupdate',target:this,manuallyTriggered:true});}/**
   * Turn off all event polyfills, clear the `Tech`s {@link AudioTrackList},
   * {@link VideoTrackList}, and {@link TextTrackList}, and dispose of this Tech.
   *
   * @fires Component#dispose
   */;_proto.dispose=function dispose(){// clear out all tracks because we can't reuse them between techs
this.clearTracks(NORMAL.names);// Turn off any manual progress or timeupdate tracking
if(this.manualProgress){this.manualProgressOff();}if(this.manualTimeUpdates){this.manualTimeUpdatesOff();}_Component.prototype.dispose.call(this);}/**
   * Clear out a single `TrackList` or an array of `TrackLists` given their names.
   *
   * > Note: Techs without source handlers should call this between sources for `video`
   *         & `audio` tracks. You don't want to use them between tracks!
   *
   * @param {string[]|string} types
   *        TrackList names to clear, valid names are `video`, `audio`, and
   *        `text`.
   */;_proto.clearTracks=function clearTracks(types){var _this3=this;types=[].concat(types);// clear out all tracks because we can't reuse them between techs
types.forEach(function(type){var list=_this3[type+"Tracks"]()||[];var i=list.length;while(i--){var track=list[i];if(type==='text'){_this3.removeRemoteTextTrack(track);}list.removeTrack(track);}});}/**
   * Remove any TextTracks added via addRemoteTextTrack that are
   * flagged for automatic garbage collection
   */;_proto.cleanupAutoTextTracks=function cleanupAutoTextTracks(){var list=this.autoRemoteTextTracks_||[];var i=list.length;while(i--){var track=list[i];this.removeRemoteTextTrack(track);}}/**
   * Reset the tech, which will removes all sources and reset the internal readyState.
   *
   * @abstract
   */;_proto.reset=function reset(){}/**
   * Get or set an error on the Tech.
   *
   * @param {MediaError} [err]
   *        Error to set on the Tech
   *
   * @return {MediaError|null}
   *         The current error object on the tech, or null if there isn't one.
   */;_proto.error=function error(err){if(err!==undefined){this.error_=new MediaError(err);this.trigger('error');}return this.error_;}/**
   * Returns the `TimeRange`s that have been played through for the current source.
   *
   * > NOTE: This implementation is incomplete. It does not track the played `TimeRange`.
   *         It only checks whether the source has played at all or not.
   *
   * @return {TimeRange}
   *         - A single time range if this video has played
   *         - An empty set of ranges if not.
   */;_proto.played=function played(){if(this.hasStarted_){return createTimeRanges(0,0);}return createTimeRanges();}/**
   * Causes a manual time update to occur if {@link Tech#manualTimeUpdatesOn} was
   * previously called.
   *
   * @fires Tech#timeupdate
   */;_proto.setCurrentTime=function setCurrentTime(){// improve the accuracy of manual timeupdates
if(this.manualTimeUpdates){/**
       * A manual `timeupdate` event.
       *
       * @event Tech#timeupdate
       * @type {EventTarget~Event}
       */this.trigger({type:'timeupdate',target:this,manuallyTriggered:true});}}/**
   * Turn on listeners for {@link VideoTrackList}, {@link {AudioTrackList}, and
   * {@link TextTrackList} events.
   *
   * This adds {@link EventTarget~EventListeners} for `addtrack`, and  `removetrack`.
   *
   * @fires Tech#audiotrackchange
   * @fires Tech#videotrackchange
   * @fires Tech#texttrackchange
   */;_proto.initTrackListeners=function initTrackListeners(){var _this4=this;/**
      * Triggered when tracks are added or removed on the Tech {@link AudioTrackList}
      *
      * @event Tech#audiotrackchange
      * @type {EventTarget~Event}
      *//**
      * Triggered when tracks are added or removed on the Tech {@link VideoTrackList}
      *
      * @event Tech#videotrackchange
      * @type {EventTarget~Event}
      *//**
      * Triggered when tracks are added or removed on the Tech {@link TextTrackList}
      *
      * @event Tech#texttrackchange
      * @type {EventTarget~Event}
      */NORMAL.names.forEach(function(name){var props=NORMAL[name];var trackListChanges=function trackListChanges(){_this4.trigger(name+"trackchange");};var tracks=_this4[props.getterName]();tracks.addEventListener('removetrack',trackListChanges);tracks.addEventListener('addtrack',trackListChanges);_this4.on('dispose',function(){tracks.removeEventListener('removetrack',trackListChanges);tracks.removeEventListener('addtrack',trackListChanges);});});}/**
   * Emulate TextTracks using vtt.js if necessary
   *
   * @fires Tech#vttjsloaded
   * @fires Tech#vttjserror
   */;_proto.addWebVttScript_=function addWebVttScript_(){var _this5=this;if(_window2.default.WebVTT){return;}// Initially, Tech.el_ is a child of a dummy-div wait until the Component system
// signals that the Tech is ready at which point Tech.el_ is part of the DOM
// before inserting the WebVTT script
if(_document2.default.body.contains(this.el())){// load via require if available and vtt.js script location was not passed in
// as an option. novtt builds will turn the above require call into an empty object
// which will cause this if check to always fail.
if(!this.options_['vtt.js']&&isPlain(_videojsVtt2.default)&&Object.keys(_videojsVtt2.default).length>0){this.trigger('vttjsloaded');return;}// load vtt.js via the script location option or the cdn of no location was
// passed in
var script=_document2.default.createElement('script');script.src=this.options_['vtt.js']||'https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js';script.onload=function(){/**
         * Fired when vtt.js is loaded.
         *
         * @event Tech#vttjsloaded
         * @type {EventTarget~Event}
         */_this5.trigger('vttjsloaded');};script.onerror=function(){/**
         * Fired when vtt.js was not loaded due to an error
         *
         * @event Tech#vttjsloaded
         * @type {EventTarget~Event}
         */_this5.trigger('vttjserror');};this.on('dispose',function(){script.onload=null;script.onerror=null;});// but have not loaded yet and we set it to true before the inject so that
// we don't overwrite the injected window.WebVTT if it loads right away
_window2.default.WebVTT=true;this.el().parentNode.appendChild(script);}else{this.ready(this.addWebVttScript_);}}/**
   * Emulate texttracks
   *
   */;_proto.emulateTextTracks=function emulateTextTracks(){var _this6=this;var tracks=this.textTracks();var remoteTracks=this.remoteTextTracks();var handleAddTrack=function handleAddTrack(e){return tracks.addTrack(e.track);};var handleRemoveTrack=function handleRemoveTrack(e){return tracks.removeTrack(e.track);};remoteTracks.on('addtrack',handleAddTrack);remoteTracks.on('removetrack',handleRemoveTrack);this.addWebVttScript_();var updateDisplay=function updateDisplay(){return _this6.trigger('texttrackchange');};var textTracksChanges=function textTracksChanges(){updateDisplay();for(var i=0;i<tracks.length;i++){var track=tracks[i];track.removeEventListener('cuechange',updateDisplay);if(track.mode==='showing'){track.addEventListener('cuechange',updateDisplay);}}};textTracksChanges();tracks.addEventListener('change',textTracksChanges);tracks.addEventListener('addtrack',textTracksChanges);tracks.addEventListener('removetrack',textTracksChanges);this.on('dispose',function(){remoteTracks.off('addtrack',handleAddTrack);remoteTracks.off('removetrack',handleRemoveTrack);tracks.removeEventListener('change',textTracksChanges);tracks.removeEventListener('addtrack',textTracksChanges);tracks.removeEventListener('removetrack',textTracksChanges);for(var i=0;i<tracks.length;i++){var track=tracks[i];track.removeEventListener('cuechange',updateDisplay);}});}/**
   * Create and returns a remote {@link TextTrack} object.
   *
   * @param {string} kind
   *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata)
   *
   * @param {string} [label]
   *        Label to identify the text track
   *
   * @param {string} [language]
   *        Two letter language abbreviation
   *
   * @return {TextTrack}
   *         The TextTrack that gets created.
   */;_proto.addTextTrack=function addTextTrack(kind,label,language){if(!kind){throw new Error('TextTrack kind is required but was not provided');}return createTrackHelper(this,kind,label,language);}/**
   * Create an emulated TextTrack for use by addRemoteTextTrack
   *
   * This is intended to be overridden by classes that inherit from
   * Tech in order to create native or custom TextTracks.
   *
   * @param {Object} options
   *        The object should contain the options to initialize the TextTrack with.
   *
   * @param {string} [options.kind]
   *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata).
   *
   * @param {string} [options.label].
   *        Label to identify the text track
   *
   * @param {string} [options.language]
   *        Two letter language abbreviation.
   *
   * @return {HTMLTrackElement}
   *         The track element that gets created.
   */;_proto.createRemoteTextTrack=function createRemoteTextTrack(options){var track=mergeOptions(options,{tech:this});return new REMOTE.remoteTextEl.TrackClass(track);}/**
   * Creates a remote text track object and returns an html track element.
   *
   * > Note: This can be an emulated {@link HTMLTrackElement} or a native one.
   *
   * @param {Object} options
   *        See {@link Tech#createRemoteTextTrack} for more detailed properties.
   *
   * @param {boolean} [manualCleanup=true]
   *        - When false: the TextTrack will be automatically removed from the video
   *          element whenever the source changes
   *        - When True: The TextTrack will have to be cleaned up manually
   *
   * @return {HTMLTrackElement}
   *         An Html Track Element.
   *
   * @deprecated The default functionality for this function will be equivalent
   *             to "manualCleanup=false" in the future. The manualCleanup parameter will
   *             also be removed.
   */;_proto.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){var _this7=this;if(options===void 0){options={};}var htmlTrackElement=this.createRemoteTextTrack(options);if(manualCleanup!==true&&manualCleanup!==false){// deprecation warning
log.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js');manualCleanup=true;}// store HTMLTrackElement and TextTrack to remote list
this.remoteTextTrackEls().addTrackElement_(htmlTrackElement);this.remoteTextTracks().addTrack(htmlTrackElement.track);if(manualCleanup!==true){// create the TextTrackList if it doesn't exist
this.ready(function(){return _this7.autoRemoteTextTracks_.addTrack(htmlTrackElement.track);});}return htmlTrackElement;}/**
   * Remove a remote text track from the remote `TextTrackList`.
   *
   * @param {TextTrack} track
   *        `TextTrack` to remove from the `TextTrackList`
   */;_proto.removeRemoteTextTrack=function removeRemoteTextTrack(track){var trackElement=this.remoteTextTrackEls().getTrackElementByTrack_(track);// remove HTMLTrackElement and TextTrack from remote list
this.remoteTextTrackEls().removeTrackElement_(trackElement);this.remoteTextTracks().removeTrack(track);this.autoRemoteTextTracks_.removeTrack(track);}/**
   * Gets available media playback quality metrics as specified by the W3C's Media
   * Playback Quality API.
   *
   * @see [Spec]{@link https://wicg.github.io/media-playback-quality}
   *
   * @return {Object}
   *         An object with supported media playback quality metrics
   *
   * @abstract
   */;_proto.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return{};}/**
   * A method to set a poster from a `Tech`.
   *
   * @abstract
   */;_proto.setPoster=function setPoster(){}/**
   * A method to check for the presence of the 'playsinline' <video> attribute.
   *
   * @abstract
   */;_proto.playsinline=function playsinline(){}/**
   * A method to set or unset the 'playsinline' <video> attribute.
   *
   * @abstract
   */;_proto.setPlaysinline=function setPlaysinline(){}/**
   * Attempt to force override of native audio tracks.
   *
   * @param {boolean} override - If set to true native audio will be overridden,
   * otherwise native audio will potentially be used.
   *
   * @abstract
   */;_proto.overrideNativeAudioTracks=function overrideNativeAudioTracks(){}/**
   * Attempt to force override of native video tracks.
   *
   * @param {boolean} override - If set to true native video will be overridden,
   * otherwise native video will potentially be used.
   *
   * @abstract
   */;_proto.overrideNativeVideoTracks=function overrideNativeVideoTracks(){}/*
   * Check if the tech can support the given mime-type.
   *
   * The base tech does not support any type, but source handlers might
   * overwrite this.
   *
   * @param  {string} type
   *         The mimetype to check for support
   *
   * @return {string}
   *         'probably', 'maybe', or empty string
   *
   * @see [Spec]{@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/canPlayType}
   *
   * @abstract
   */;_proto.canPlayType=function canPlayType(){return'';}/**
   * Check if the type is supported by this tech.
   *
   * The base tech does not support any type, but source handlers might
   * overwrite this.
   *
   * @param {string} type
   *        The media type to check
   * @return {string} Returns the native video element's response
   */;Tech.canPlayType=function canPlayType(){return'';}/**
   * Check if the tech can support the given source
   *
   * @param {Object} srcObj
   *        The source object
   * @param {Object} options
   *        The options passed to the tech
   * @return {string} 'probably', 'maybe', or '' (empty string)
   */;Tech.canPlaySource=function canPlaySource(srcObj,options){return Tech.canPlayType(srcObj.type);}/*
   * Return whether the argument is a Tech or not.
   * Can be passed either a Class like `Html5` or a instance like `player.tech_`
   *
   * @param {Object} component
   *        The item to check
   *
   * @return {boolean}
   *         Whether it is a tech or not
   *         - True if it is a tech
   *         - False if it is not
   */;Tech.isTech=function isTech(component){return component.prototype instanceof Tech||component instanceof Tech||component===Tech;}/**
   * Registers a `Tech` into a shared list for videojs.
   *
   * @param {string} name
   *        Name of the `Tech` to register.
   *
   * @param {Object} tech
   *        The `Tech` class to register.
   */;Tech.registerTech=function registerTech(name,tech){if(!Tech.techs_){Tech.techs_={};}if(!Tech.isTech(tech)){throw new Error("Tech "+name+" must be a Tech");}if(!Tech.canPlayType){throw new Error('Techs must have a static canPlayType method on them');}if(!Tech.canPlaySource){throw new Error('Techs must have a static canPlaySource method on them');}name=toTitleCase(name);Tech.techs_[name]=tech;if(name!=='Tech'){// camel case the techName for use in techOrder
Tech.defaultTechOrder_.push(name);}return tech;}/**
   * Get a `Tech` from the shared list by name.
   *
   * @param {string} name
   *        `camelCase` or `TitleCase` name of the Tech to get
   *
   * @return {Tech|undefined}
   *         The `Tech` or undefined if there was no tech with the name requested.
   */;Tech.getTech=function getTech(name){if(!name){return;}name=toTitleCase(name);if(Tech.techs_&&Tech.techs_[name]){return Tech.techs_[name];}if(_window2.default&&_window2.default.videojs&&_window2.default.videojs[name]){log.warn("The "+name+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)");return _window2.default.videojs[name];}};return Tech;}(Component);/**
 * Get the {@link VideoTrackList}
 *
 * @returns {VideoTrackList}
 * @method Tech.prototype.videoTracks
 *//**
 * Get the {@link AudioTrackList}
 *
 * @returns {AudioTrackList}
 * @method Tech.prototype.audioTracks
 *//**
 * Get the {@link TextTrackList}
 *
 * @returns {TextTrackList}
 * @method Tech.prototype.textTracks
 *//**
 * Get the remote element {@link TextTrackList}
 *
 * @returns {TextTrackList}
 * @method Tech.prototype.remoteTextTracks
 *//**
 * Get the remote element {@link HtmlTrackElementList}
 *
 * @returns {HtmlTrackElementList}
 * @method Tech.prototype.remoteTextTrackEls
 */ALL.names.forEach(function(name){var props=ALL[name];Tech.prototype[props.getterName]=function(){this[props.privateName]=this[props.privateName]||new props.ListClass();return this[props.privateName];};});/**
 * List of associated text tracks
 *
 * @type {TextTrackList}
 * @private
 * @property Tech#textTracks_
 *//**
 * List of associated audio tracks.
 *
 * @type {AudioTrackList}
 * @private
 * @property Tech#audioTracks_
 *//**
 * List of associated video tracks.
 *
 * @type {VideoTrackList}
 * @private
 * @property Tech#videoTracks_
 *//**
 * Boolean indicating whether the `Tech` supports volume control.
 *
 * @type {boolean}
 * @default
 */Tech.prototype.featuresVolumeControl=true;/**
 * Boolean indicating whether the `Tech` supports muting volume.
 *
 * @type {bolean}
 * @default
 */Tech.prototype.featuresMuteControl=true;/**
 * Boolean indicating whether the `Tech` supports fullscreen resize control.
 * Resizing plugins using request fullscreen reloads the plugin
 *
 * @type {boolean}
 * @default
 */Tech.prototype.featuresFullscreenResize=false;/**
 * Boolean indicating whether the `Tech` supports changing the speed at which the video
 * plays. Examples:
 *   - Set player to play 2x (twice) as fast
 *   - Set player to play 0.5x (half) as fast
 *
 * @type {boolean}
 * @default
 */Tech.prototype.featuresPlaybackRate=false;/**
 * Boolean indicating whether the `Tech` supports the `progress` event. This is currently
 * not triggered by video-js-swf. This will be used to determine if
 * {@link Tech#manualProgressOn} should be called.
 *
 * @type {boolean}
 * @default
 */Tech.prototype.featuresProgressEvents=false;/**
 * Boolean indicating whether the `Tech` supports the `sourceset` event.
 *
 * A tech should set this to `true` and then use {@link Tech#triggerSourceset}
 * to trigger a {@link Tech#event:sourceset} at the earliest time after getting
 * a new source.
 *
 * @type {boolean}
 * @default
 */Tech.prototype.featuresSourceset=false;/**
 * Boolean indicating whether the `Tech` supports the `timeupdate` event. This is currently
 * not triggered by video-js-swf. This will be used to determine if
 * {@link Tech#manualTimeUpdates} should be called.
 *
 * @type {boolean}
 * @default
 */Tech.prototype.featuresTimeupdateEvents=false;/**
 * Boolean indicating whether the `Tech` supports the native `TextTrack`s.
 * This will help us integrate with native `TextTrack`s if the browser supports them.
 *
 * @type {boolean}
 * @default
 */Tech.prototype.featuresNativeTextTracks=false;/**
 * A functional mixin for techs that want to use the Source Handler pattern.
 * Source handlers are scripts for handling specific formats.
 * The source handler pattern is used for adaptive formats (HLS, DASH) that
 * manually load video data and feed it into a Source Buffer (Media Source Extensions)
 * Example: `Tech.withSourceHandlers.call(MyTech);`
 *
 * @param {Tech} _Tech
 *        The tech to add source handler functions to.
 *
 * @mixes Tech~SourceHandlerAdditions
 */Tech.withSourceHandlers=function(_Tech){/**
   * Register a source handler
   *
   * @param {Function} handler
   *        The source handler class
   *
   * @param {number} [index]
   *        Register it at the following index
   */_Tech.registerSourceHandler=function(handler,index){var handlers=_Tech.sourceHandlers;if(!handlers){handlers=_Tech.sourceHandlers=[];}if(index===undefined){// add to the end of the list
index=handlers.length;}handlers.splice(index,0,handler);};/**
   * Check if the tech can support the given type. Also checks the
   * Techs sourceHandlers.
   *
   * @param {string} type
   *         The mimetype to check.
   *
   * @return {string}
   *         'probably', 'maybe', or '' (empty string)
   */_Tech.canPlayType=function(type){var handlers=_Tech.sourceHandlers||[];var can;for(var i=0;i<handlers.length;i++){can=handlers[i].canPlayType(type);if(can){return can;}}return'';};/**
   * Returns the first source handler that supports the source.
   *
   * TODO: Answer question: should 'probably' be prioritized over 'maybe'
   *
   * @param {Tech~SourceObject} source
   *        The source object
   *
   * @param {Object} options
   *        The options passed to the tech
   *
   * @return {SourceHandler|null}
   *          The first source handler that supports the source or null if
   *          no SourceHandler supports the source
   */_Tech.selectSourceHandler=function(source,options){var handlers=_Tech.sourceHandlers||[];var can;for(var i=0;i<handlers.length;i++){can=handlers[i].canHandleSource(source,options);if(can){return handlers[i];}}return null;};/**
   * Check if the tech can support the given source.
   *
   * @param {Tech~SourceObject} srcObj
   *        The source object
   *
   * @param {Object} options
   *        The options passed to the tech
   *
   * @return {string}
   *         'probably', 'maybe', or '' (empty string)
   */_Tech.canPlaySource=function(srcObj,options){var sh=_Tech.selectSourceHandler(srcObj,options);if(sh){return sh.canHandleSource(srcObj,options);}return'';};/**
   * When using a source handler, prefer its implementation of
   * any function normally provided by the tech.
   */var deferrable=['seekable','seeking','duration'];/**
   * A wrapper around {@link Tech#seekable} that will call a `SourceHandler`s seekable
   * function if it exists, with a fallback to the Techs seekable function.
   *
   * @method _Tech.seekable
   *//**
   * A wrapper around {@link Tech#duration} that will call a `SourceHandler`s duration
   * function if it exists, otherwise it will fallback to the techs duration function.
   *
   * @method _Tech.duration
   */deferrable.forEach(function(fnName){var originalFn=this[fnName];if(typeof originalFn!=='function'){return;}this[fnName]=function(){if(this.sourceHandler_&&this.sourceHandler_[fnName]){return this.sourceHandler_[fnName].apply(this.sourceHandler_,arguments);}return originalFn.apply(this,arguments);};},_Tech.prototype);/**
   * Create a function for setting the source using a source object
   * and source handlers.
   * Should never be called unless a source handler was found.
   *
   * @param {Tech~SourceObject} source
   *        A source object with src and type keys
   */_Tech.prototype.setSource=function(source){var sh=_Tech.selectSourceHandler(source,this.options_);if(!sh){// Fall back to a native source hander when unsupported sources are
// deliberately set
if(_Tech.nativeSourceHandler){sh=_Tech.nativeSourceHandler;}else{log.error('No source handler found for the current source.');}}// Dispose any existing source handler
this.disposeSourceHandler();this.off('dispose',this.disposeSourceHandler);if(sh!==_Tech.nativeSourceHandler){this.currentSource_=source;}this.sourceHandler_=sh.handleSource(source,this,this.options_);this.one('dispose',this.disposeSourceHandler);};/**
   * Clean up any existing SourceHandlers and listeners when the Tech is disposed.
   *
   * @listens Tech#dispose
   */_Tech.prototype.disposeSourceHandler=function(){// if we have a source and get another one
// then we are loading something new
// than clear all of our current tracks
if(this.currentSource_){this.clearTracks(['audio','video']);this.currentSource_=null;}// always clean up auto-text tracks
this.cleanupAutoTextTracks();if(this.sourceHandler_){if(this.sourceHandler_.dispose){this.sourceHandler_.dispose();}this.sourceHandler_=null;}};};// The base Tech class needs to be registered as a Component. It is the only
// Tech that can be registered as a Component.
Component.registerComponent('Tech',Tech);Tech.registerTech('Tech',Tech);/**
 * A list of techs that should be added to techOrder on Players
 *
 * @private
 */Tech.defaultTechOrder_=[];/**
 * @file middleware.js
 * @module middleware
 */var middlewares={};var middlewareInstances={};var TERMINATOR={};/**
 * A middleware object is a plain JavaScript object that has methods that
 * match the {@link Tech} methods found in the lists of allowed
 * {@link module:middleware.allowedGetters|getters},
 * {@link module:middleware.allowedSetters|setters}, and
 * {@link module:middleware.allowedMediators|mediators}.
 *
 * @typedef {Object} MiddlewareObject
 *//**
 * A middleware factory function that should return a
 * {@link module:middleware~MiddlewareObject|MiddlewareObject}.
 *
 * This factory will be called for each player when needed, with the player
 * passed in as an argument.
 *
 * @callback MiddlewareFactory
 * @param {Player} player
 *        A Video.js player.
 *//**
 * Define a middleware that the player should use by way of a factory function
 * that returns a middleware object.
 *
 * @param  {string} type
 *         The MIME type to match or `"*"` for all MIME types.
 *
 * @param  {MiddlewareFactory} middleware
 *         A middleware factory function that will be executed for
 *         matching types.
 */function use(type,middleware){middlewares[type]=middlewares[type]||[];middlewares[type].push(middleware);}/**
 * Asynchronously sets a source using middleware by recursing through any
 * matching middlewares and calling `setSource` on each, passing along the
 * previous returned value each time.
 *
 * @param  {Player} player
 *         A {@link Player} instance.
 *
 * @param  {Tech~SourceObject} src
 *         A source object.
 *
 * @param  {Function}
 *         The next middleware to run.
 */function setSource(player,src,next){player.setTimeout(function(){return setSourceHelper(src,middlewares[src.type],next,player);},1);}/**
 * When the tech is set, passes the tech to each middleware's `setTech` method.
 *
 * @param {Object[]} middleware
 *        An array of middleware instances.
 *
 * @param {Tech} tech
 *        A Video.js tech.
 */function setTech(middleware,tech){middleware.forEach(function(mw){return mw.setTech&&mw.setTech(tech);});}/**
 * Calls a getter on the tech first, through each middleware
 * from right to left to the player.
 *
 * @param  {Object[]} middleware
 *         An array of middleware instances.
 *
 * @param  {Tech} tech
 *         The current tech.
 *
 * @param  {string} method
 *         A method name.
 *
 * @return {Mixed}
 *         The final value from the tech after middleware has intercepted it.
 */function get(middleware,tech,method){return middleware.reduceRight(middlewareIterator(method),tech[method]());}/**
 * Takes the argument given to the player and calls the setter method on each
 * middleware from left to right to the tech.
 *
 * @param  {Object[]} middleware
 *         An array of middleware instances.
 *
 * @param  {Tech} tech
 *         The current tech.
 *
 * @param  {string} method
 *         A method name.
 *
 * @param  {Mixed} arg
 *         The value to set on the tech.
 *
 * @return {Mixed}
 *         The return value of the `method` of the `tech`.
 */function set$1(middleware,tech,method,arg){return tech[method](middleware.reduce(middlewareIterator(method),arg));}/**
 * Takes the argument given to the player and calls the `call` version of the
 * method on each middleware from left to right.
 *
 * Then, call the passed in method on the tech and return the result unchanged
 * back to the player, through middleware, this time from right to left.
 *
 * @param  {Object[]} middleware
 *         An array of middleware instances.
 *
 * @param  {Tech} tech
 *         The current tech.
 *
 * @param  {string} method
 *         A method name.
 *
 * @param  {Mixed} arg
 *         The value to set on the tech.
 *
 * @return {Mixed}
 *         The return value of the `method` of the `tech`, regardless of the
 *         return values of middlewares.
 */function mediate(middleware,tech,method,arg){if(arg===void 0){arg=null;}var callMethod='call'+toTitleCase(method);var middlewareValue=middleware.reduce(middlewareIterator(callMethod),arg);var terminated=middlewareValue===TERMINATOR;// deprecated. The `null` return value should instead return TERMINATOR to
// prevent confusion if a techs method actually returns null.
var returnValue=terminated?null:tech[method](middlewareValue);executeRight(middleware,method,returnValue,terminated);return returnValue;}/**
 * Enumeration of allowed getters where the keys are method names.
 *
 * @type {Object}
 */var allowedGetters={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1};/**
 * Enumeration of allowed setters where the keys are method names.
 *
 * @type {Object}
 */var allowedSetters={setCurrentTime:1};/**
 * Enumeration of allowed mediators where the keys are method names.
 *
 * @type {Object}
 */var allowedMediators={play:1,pause:1};function middlewareIterator(method){return function(value,mw){// if the previous middleware terminated, pass along the termination
if(value===TERMINATOR){return TERMINATOR;}if(mw[method]){return mw[method](value);}return value;};}function executeRight(mws,method,value,terminated){for(var i=mws.length-1;i>=0;i--){var mw=mws[i];if(mw[method]){mw[method](terminated,value);}}}/**
 * Clear the middleware cache for a player.
 *
 * @param  {Player} player
 *         A {@link Player} instance.
 */function clearCacheForPlayer(player){middlewareInstances[player.id()]=null;}/**
 * {
 *  [playerId]: [[mwFactory, mwInstance], ...]
 * }
 *
 * @private
 */function getOrCreateFactory(player,mwFactory){var mws=middlewareInstances[player.id()];var mw=null;if(mws===undefined||mws===null){mw=mwFactory(player);middlewareInstances[player.id()]=[[mwFactory,mw]];return mw;}for(var i=0;i<mws.length;i++){var _mws$i=mws[i],mwf=_mws$i[0],mwi=_mws$i[1];if(mwf!==mwFactory){continue;}mw=mwi;}if(mw===null){mw=mwFactory(player);mws.push([mwFactory,mw]);}return mw;}function setSourceHelper(src,middleware,next,player,acc,lastRun){if(src===void 0){src={};}if(middleware===void 0){middleware=[];}if(acc===void 0){acc=[];}if(lastRun===void 0){lastRun=false;}var _middleware=middleware,mwFactory=_middleware[0],mwrest=_middleware.slice(1);// if mwFactory is a string, then we're at a fork in the road
if(typeof mwFactory==='string'){setSourceHelper(src,middlewares[mwFactory],next,player,acc,lastRun);// if we have an mwFactory, call it with the player to get the mw,
// then call the mw's setSource method
}else if(mwFactory){var mw=getOrCreateFactory(player,mwFactory);// if setSource isn't present, implicitly select this middleware
if(!mw.setSource){acc.push(mw);return setSourceHelper(src,mwrest,next,player,acc,lastRun);}mw.setSource(assign({},src),function(err,_src){// something happened, try the next middleware on the current level
// make sure to use the old src
if(err){return setSourceHelper(src,mwrest,next,player,acc,lastRun);}// we've succeeded, now we need to go deeper
acc.push(mw);// if it's the same type, continue down the current chain
// otherwise, we want to go down the new chain
setSourceHelper(_src,src.type===_src.type?mwrest:middlewares[_src.type],next,player,acc,lastRun);});}else if(mwrest.length){setSourceHelper(src,mwrest,next,player,acc,lastRun);}else if(lastRun){next(src,acc);}else{setSourceHelper(src,middlewares['*'],next,player,acc,true);}}/**
 * Mimetypes
 *
 * @see http://hul.harvard.edu/ois/////systems/wax/wax-public-help/mimetypes.htm
 * @typedef Mimetypes~Kind
 * @enum
 */var MimetypesKind={opus:'video/ogg',ogv:'video/ogg',mp4:'video/mp4',mov:'video/mp4',m4v:'video/mp4',mkv:'video/x-matroska',mp3:'audio/mpeg',aac:'audio/aac',oga:'audio/ogg',m3u8:'application/x-mpegURL',jpg:'image/jpeg',jpeg:'image/jpeg',gif:'image/gif',png:'image/png',svg:'image/svg+xml',webp:'image/webp'};/**
 * Get the mimetype of a given src url if possible
 *
 * @param {string} src
 *        The url to the src
 *
 * @return {string}
 *         return the mimetype if it was known or empty string otherwise
 */var getMimetype=function getMimetype(src){if(src===void 0){src='';}var ext=getFileExtension(src);var mimetype=MimetypesKind[ext.toLowerCase()];return mimetype||'';};/**
 * Find the mime type of a given source string if possible. Uses the player
 * source cache.
 *
 * @param {Player} player
 *        The player object
 *
 * @param {string} src
 *        The source string
 *
 * @return {string}
 *         The type that was found
 */var findMimetype=function findMimetype(player,src){if(!src){return'';}// 1. check for the type in the `source` cache
if(player.cache_.source.src===src&&player.cache_.source.type){return player.cache_.source.type;}// 2. see if we have this source in our `currentSources` cache
var matchingSources=player.cache_.sources.filter(function(s){return s.src===src;});if(matchingSources.length){return matchingSources[0].type;}// 3. look for the src url in source elements and use the type there
var sources=player.$$('source');for(var i=0;i<sources.length;i++){var s=sources[i];if(s.type&&s.src&&s.src===src){return s.type;}}// 4. finally fallback to our list of mime types based on src url extension
return getMimetype(src);};/**
 * @module filter-source
 *//**
 * Filter out single bad source objects or multiple source objects in an
 * array. Also flattens nested source object arrays into a 1 dimensional
 * array of source objects.
 *
 * @param {Tech~SourceObject|Tech~SourceObject[]} src
 *        The src object to filter
 *
 * @return {Tech~SourceObject[]}
 *         An array of sourceobjects containing only valid sources
 *
 * @private
 */var filterSource=function filterSource(src){// traverse array
if(Array.isArray(src)){var newsrc=[];src.forEach(function(srcobj){srcobj=filterSource(srcobj);if(Array.isArray(srcobj)){newsrc=newsrc.concat(srcobj);}else if(isObject(srcobj)){newsrc.push(srcobj);}});src=newsrc;}else if(typeof src==='string'&&src.trim()){// convert string into object
src=[fixSource({src:src})];}else if(isObject(src)&&typeof src.src==='string'&&src.src&&src.src.trim()){// src is already valid
src=[fixSource(src)];}else{// invalid source, turn it into an empty array
src=[];}return src;};/**
 * Checks src mimetype, adding it when possible
 *
 * @param {Tech~SourceObject} src
 *        The src object to check
 * @return {Tech~SourceObject}
 *        src Object with known type
 */function fixSource(src){var mimetype=getMimetype(src.src);if(!src.type&&mimetype){src.type=mimetype;}return src;}/**
 * The `MediaLoader` is the `Component` that decides which playback technology to load
 * when a player is initialized.
 *
 * @extends Component
 */var MediaLoader=/*#__PURE__*/function(_Component){_inheritsLoose(MediaLoader,_Component);/**
   * Create an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should attach to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   *
   * @param {Component~ReadyCallback} [ready]
   *        The function that is run when this component is ready.
   */function MediaLoader(player,options,ready){var _this;// MediaLoader has no element
var options_=mergeOptions({createEl:false},options);_this=_Component.call(this,player,options_,ready)||this;// If there are no sources when the player is initialized,
// load the first supported playback technology.
if(!options.playerOptions.sources||options.playerOptions.sources.length===0){for(var i=0,j=options.playerOptions.techOrder;i<j.length;i++){var techName=toTitleCase(j[i]);var tech=Tech.getTech(techName);// Support old behavior of techs being registered as components.
// Remove once that deprecated behavior is removed.
if(!techName){tech=Component.getComponent(techName);}// Check if the browser supports this technology
if(tech&&tech.isSupported()){player.loadTech_(techName);break;}}}else{// Loop through playback technologies (HTML5, Flash) and check for support.
// Then load the best source.
// A few assumptions here:
//   All playback technologies respect preload false.
player.src(options.playerOptions.sources);}return _this;}return MediaLoader;}(Component);Component.registerComponent('MediaLoader',MediaLoader);/**
 * Clickable Component which is clickable or keyboard actionable,
 * but is not a native HTML button.
 *
 * @extends Component
 */var ClickableComponent=/*#__PURE__*/function(_Component){_inheritsLoose(ClickableComponent,_Component);/**
   * Creates an instance of this class.
   *
   * @param  {Player} player
   *         The `Player` that this class should be attached to.
   *
   * @param  {Object} [options]
   *         The key/value store of player options.
   */function ClickableComponent(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.emitTapEvents();_this.enable();return _this;}/**
   * Create the `Component`s DOM element.
   *
   * @param {string} [tag=div]
   *        The element's node type.
   *
   * @param {Object} [props={}]
   *        An object of properties that should be set on the element.
   *
   * @param {Object} [attributes={}]
   *        An object of attributes that should be set on the element.
   *
   * @return {Element}
   *         The element that gets created.
   */var _proto=ClickableComponent.prototype;_proto.createEl=function createEl$$1(tag,props,attributes){if(tag===void 0){tag='div';}if(props===void 0){props={};}if(attributes===void 0){attributes={};}props=assign({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},props);if(tag==='button'){log.error("Creating a ClickableComponent with an HTML element of "+tag+" is not supported; use a Button instead.");}// Add ARIA attributes for clickable element which is not a native HTML button
attributes=assign({role:'button'},attributes);this.tabIndex_=props.tabIndex;var el=_Component.prototype.createEl.call(this,tag,props,attributes);this.createControlTextEl(el);return el;};_proto.dispose=function dispose(){// remove controlTextEl_ on dispose
this.controlTextEl_=null;_Component.prototype.dispose.call(this);}/**
   * Create a control text element on this `Component`
   *
   * @param {Element} [el]
   *        Parent element for the control text.
   *
   * @return {Element}
   *         The control text element that gets created.
   */;_proto.createControlTextEl=function createControlTextEl(el){this.controlTextEl_=createEl('span',{className:'vjs-control-text'},{// let the screen reader user know that the text of the element may change
'aria-live':'polite'});if(el){el.appendChild(this.controlTextEl_);}this.controlText(this.controlText_,el);return this.controlTextEl_;}/**
   * Get or set the localize text to use for the controls on the `Component`.
   *
   * @param {string} [text]
   *        Control text for element.
   *
   * @param {Element} [el=this.el()]
   *        Element to set the title on.
   *
   * @return {string}
   *         - The control text when getting
   */;_proto.controlText=function controlText(text,el){if(el===void 0){el=this.el();}if(text===undefined){return this.controlText_||'Need Text';}var localizedText=this.localize(text);this.controlText_=text;textContent(this.controlTextEl_,localizedText);if(!this.nonIconControl){// Set title attribute if only an icon is shown
el.setAttribute('title',localizedText);}}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */;_proto.buildCSSClass=function buildCSSClass(){return"vjs-control vjs-button "+_Component.prototype.buildCSSClass.call(this);}/**
   * Enable this `Component`s element.
   */;_proto.enable=function enable(){if(!this.enabled_){this.enabled_=true;this.removeClass('vjs-disabled');this.el_.setAttribute('aria-disabled','false');if(typeof this.tabIndex_!=='undefined'){this.el_.setAttribute('tabIndex',this.tabIndex_);}this.on(['tap','click'],this.handleClick);this.on('focus',this.handleFocus);this.on('blur',this.handleBlur);}}/**
   * Disable this `Component`s element.
   */;_proto.disable=function disable(){this.enabled_=false;this.addClass('vjs-disabled');this.el_.setAttribute('aria-disabled','true');if(typeof this.tabIndex_!=='undefined'){this.el_.removeAttribute('tabIndex');}this.off(['tap','click'],this.handleClick);this.off('focus',this.handleFocus);this.off('blur',this.handleBlur);}/**
   * This gets called when a `ClickableComponent` gets:
   * - Clicked (via the `click` event, listening starts in the constructor)
   * - Tapped (via the `tap` event, listening starts in the constructor)
   * - The following things happen in order:
   *   1. {@link ClickableComponent#handleFocus} is called via a `focus` event on the
   *      `ClickableComponent`.
   *   2. {@link ClickableComponent#handleFocus} adds a listener for `keydown` on using
   *      {@link ClickableComponent#handleKeyPress}.
   *   3. `ClickableComponent` has not had a `blur` event (`blur` means that focus was lost). The user presses
   *      the space or enter key.
   *   4. {@link ClickableComponent#handleKeyPress} calls this function with the `keydown`
   *      event as a parameter.
   *
   * @param {EventTarget~Event} event
   *        The `keydown`, `tap`, or `click` event that caused this function to be
   *        called.
   *
   * @listens tap
   * @listens click
   * @abstract
   */;_proto.handleClick=function handleClick(event){}/**
   * This gets called when a `ClickableComponent` gains focus via a `focus` event.
   * Turns on listening for `keydown` events. When they happen it
   * calls `this.handleKeyPress`.
   *
   * @param {EventTarget~Event} event
   *        The `focus` event that caused this function to be called.
   *
   * @listens focus
   */;_proto.handleFocus=function handleFocus(event){on(_document2.default,'keydown',bind(this,this.handleKeyPress));}/**
   * Called when this ClickableComponent has focus and a key gets pressed down. By
   * default it will call `this.handleClick` when the key is space or enter.
   *
   * @param {EventTarget~Event} event
   *        The `keydown` event that caused this function to be called.
   *
   * @listens keydown
   */;_proto.handleKeyPress=function handleKeyPress(event){// Support Space or Enter key operation to fire a click event
if(_keycode2.default.isEventKey(event,'Space')||_keycode2.default.isEventKey(event,'Enter')){event.preventDefault();this.trigger('click');}else{// Pass keypress handling up for unsupported keys
_Component.prototype.handleKeyPress.call(this,event);}}/**
   * Called when a `ClickableComponent` loses focus. Turns off the listener for
   * `keydown` events. Which Stops `this.handleKeyPress` from getting called.
   *
   * @param {EventTarget~Event} event
   *        The `blur` event that caused this function to be called.
   *
   * @listens blur
   */;_proto.handleBlur=function handleBlur(event){off(_document2.default,'keydown',bind(this,this.handleKeyPress));};return ClickableComponent;}(Component);Component.registerComponent('ClickableComponent',ClickableComponent);/**
 * A `ClickableComponent` that handles showing the poster image for the player.
 *
 * @extends ClickableComponent
 */var PosterImage=/*#__PURE__*/function(_ClickableComponent){_inheritsLoose(PosterImage,_ClickableComponent);/**
   * Create an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should attach to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function PosterImage(player,options){var _this;_this=_ClickableComponent.call(this,player,options)||this;_this.update();player.on('posterchange',bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.update));return _this;}/**
   * Clean up and dispose of the `PosterImage`.
   */var _proto=PosterImage.prototype;_proto.dispose=function dispose(){this.player().off('posterchange',this.update);_ClickableComponent.prototype.dispose.call(this);}/**
   * Create the `PosterImage`s DOM element.
   *
   * @return {Element}
   *         The element that gets created.
   */;_proto.createEl=function createEl$$1(){var el=createEl('div',{className:'vjs-poster',// Don't want poster to be tabbable.
tabIndex:-1});return el;}/**
   * An {@link EventTarget~EventListener} for {@link Player#posterchange} events.
   *
   * @listens Player#posterchange
   *
   * @param {EventTarget~Event} [event]
   *        The `Player#posterchange` event that triggered this function.
   */;_proto.update=function update(event){var url=this.player().poster();this.setSrc(url);// If there's no poster source we should display:none on this component
// so it's not still clickable or right-clickable
if(url){this.show();}else{this.hide();}}/**
   * Set the source of the `PosterImage` depending on the display method.
   *
   * @param {string} url
   *        The URL to the source for the `PosterImage`.
   */;_proto.setSrc=function setSrc(url){var backgroundImage='';// Any falsy value should stay as an empty string, otherwise
// this will throw an extra error
if(url){backgroundImage="url(\""+url+"\")";}this.el_.style.backgroundImage=backgroundImage;}/**
   * An {@link EventTarget~EventListener} for clicks on the `PosterImage`. See
   * {@link ClickableComponent#handleClick} for instances where this will be triggered.
   *
   * @listens tap
   * @listens click
   * @listens keydown
   *
   * @param {EventTarget~Event} event
   +        The `click`, `tap` or `keydown` event that caused this function to be called.
   */;_proto.handleClick=function handleClick(event){// We don't want a click to trigger playback when controls are disabled
if(!this.player_.controls()){return;}if(this.player_.paused()){silencePromise(this.player_.play());}else{this.player_.pause();}// call handleFocus manually to get hotkeys working
this.player_.handleFocus({});};return PosterImage;}(ClickableComponent);Component.registerComponent('PosterImage',PosterImage);var darkGray='#222';var lightGray='#ccc';var fontMap={monospace:'monospace',sansSerif:'sans-serif',serif:'serif',monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:'sans-serif',proportionalSerif:'serif',casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};/**
 * Construct an rgba color from a given hex color code.
 *
 * @param {number} color
 *        Hex number for color, like #f0e or #f604e2.
 *
 * @param {number} opacity
 *        Value for opacity, 0.0 - 1.0.
 *
 * @return {string}
 *         The rgba color that was created, like 'rgba(255, 0, 0, 0.3)'.
 */function constructColor(color,opacity){var hex;if(color.length===4){// color looks like "#f0e"
hex=color[1]+color[1]+color[2]+color[2]+color[3]+color[3];}else if(color.length===7){// color looks like "#f604e2"
hex=color.slice(1);}else{throw new Error('Invalid color code provided, '+color+'; must be formatted as e.g. #f0e or #f604e2.');}return'rgba('+parseInt(hex.slice(0,2),16)+','+parseInt(hex.slice(2,4),16)+','+parseInt(hex.slice(4,6),16)+','+opacity+')';}/**
 * Try to update the style of a DOM element. Some style changes will throw an error,
 * particularly in IE8. Those should be noops.
 *
 * @param {Element} el
 *        The DOM element to be styled.
 *
 * @param {string} style
 *        The CSS property on the element that should be styled.
 *
 * @param {string} rule
 *        The style rule that should be applied to the property.
 *
 * @private
 */function tryUpdateStyle(el,style,rule){try{el.style[style]=rule;}catch(e){// Satisfies linter.
return;}}/**
 * The component for displaying text track cues.
 *
 * @extends Component
 */var TextTrackDisplay=/*#__PURE__*/function(_Component){_inheritsLoose(TextTrackDisplay,_Component);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   *
   * @param {Component~ReadyCallback} [ready]
   *        The function to call when `TextTrackDisplay` is ready.
   */function TextTrackDisplay(player,options,ready){var _this;_this=_Component.call(this,player,options,ready)||this;var updateDisplayHandler=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.updateDisplay);player.on('loadstart',bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.toggleDisplay));player.on('texttrackchange',updateDisplayHandler);player.on('loadedmetadata',bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.preselectTrack));// This used to be called during player init, but was causing an error
// if a track should show by default and the display hadn't loaded yet.
// Should probably be moved to an external track loader when we support
// tracks that don't need a display.
player.ready(bind(_assertThisInitialized(_assertThisInitialized(_this)),function(){if(player.tech_&&player.tech_.featuresNativeTextTracks){this.hide();return;}player.on('fullscreenchange',updateDisplayHandler);player.on('playerresize',updateDisplayHandler);_window2.default.addEventListener('orientationchange',updateDisplayHandler);player.on('dispose',function(){return _window2.default.removeEventListener('orientationchange',updateDisplayHandler);});var tracks=this.options_.playerOptions.tracks||[];for(var i=0;i<tracks.length;i++){this.player_.addRemoteTextTrack(tracks[i],true);}this.preselectTrack();}));return _this;}/**
  * Preselect a track following this precedence:
  * - matches the previously selected {@link TextTrack}'s language and kind
  * - matches the previously selected {@link TextTrack}'s language only
  * - is the first default captions track
  * - is the first default descriptions track
  *
  * @listens Player#loadstart
  */var _proto=TextTrackDisplay.prototype;_proto.preselectTrack=function preselectTrack(){var modes={captions:1,subtitles:1};var trackList=this.player_.textTracks();var userPref=this.player_.cache_.selectedLanguage;var firstDesc;var firstCaptions;var preferredTrack;for(var i=0;i<trackList.length;i++){var track=trackList[i];if(userPref&&userPref.enabled&&userPref.language&&userPref.language===track.language&&track.kind in modes){// Always choose the track that matches both language and kind
if(track.kind===userPref.kind){preferredTrack=track;// or choose the first track that matches language
}else if(!preferredTrack){preferredTrack=track;}// clear everything if offTextTrackMenuItem was clicked
}else if(userPref&&!userPref.enabled){preferredTrack=null;firstDesc=null;firstCaptions=null;}else if(track.default){if(track.kind==='descriptions'&&!firstDesc){firstDesc=track;}else if(track.kind in modes&&!firstCaptions){firstCaptions=track;}}}// The preferredTrack matches the user preference and takes
// precedence over all the other tracks.
// So, display the preferredTrack before the first default track
// and the subtitles/captions track before the descriptions track
if(preferredTrack){preferredTrack.mode='showing';}else if(firstCaptions){firstCaptions.mode='showing';}else if(firstDesc){firstDesc.mode='showing';}}/**
   * Turn display of {@link TextTrack}'s from the current state into the other state.
   * There are only two states:
   * - 'shown'
   * - 'hidden'
   *
   * @listens Player#loadstart
   */;_proto.toggleDisplay=function toggleDisplay(){if(this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks){this.hide();}else{this.show();}}/**
   * Create the {@link Component}'s DOM element.
   *
   * @return {Element}
   *         The element that was created.
   */;_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-text-track-display'},{'aria-live':'off','aria-atomic':'true'});}/**
   * Clear all displayed {@link TextTrack}s.
   */;_proto.clearDisplay=function clearDisplay(){if(typeof _window2.default.WebVTT==='function'){_window2.default.WebVTT.processCues(_window2.default,[],this.el_);}}/**
   * Update the displayed TextTrack when a either a {@link Player#texttrackchange} or
   * a {@link Player#fullscreenchange} is fired.
   *
   * @listens Player#texttrackchange
   * @listens Player#fullscreenchange
   */;_proto.updateDisplay=function updateDisplay(){var tracks=this.player_.textTracks();this.clearDisplay();// Track display prioritization model: if multiple tracks are 'showing',
//  display the first 'subtitles' or 'captions' track which is 'showing',
//  otherwise display the first 'descriptions' track which is 'showing'
var descriptionsTrack=null;var captionsSubtitlesTrack=null;var i=tracks.length;while(i--){var track=tracks[i];if(track.mode==='showing'){if(track.kind==='descriptions'){descriptionsTrack=track;}else{captionsSubtitlesTrack=track;}}}if(captionsSubtitlesTrack){if(this.getAttribute('aria-live')!=='off'){this.setAttribute('aria-live','off');}this.updateForTrack(captionsSubtitlesTrack);}else if(descriptionsTrack){if(this.getAttribute('aria-live')!=='assertive'){this.setAttribute('aria-live','assertive');}this.updateForTrack(descriptionsTrack);}}/**
   * Add an {@link TextTrack} to to the {@link Tech}s {@link TextTrackList}.
   *
   * @param {TextTrack} track
   *        Text track object to be added to the list.
   */;_proto.updateForTrack=function updateForTrack(track){if(typeof _window2.default.WebVTT!=='function'||!track.activeCues){return;}var cues=[];for(var _i=0;_i<track.activeCues.length;_i++){cues.push(track.activeCues[_i]);}_window2.default.WebVTT.processCues(_window2.default,cues,this.el_);if(!this.player_.textTrackSettings){return;}var overrides=this.player_.textTrackSettings.getValues();var i=cues.length;while(i--){var cue=cues[i];if(!cue){continue;}var cueDiv=cue.displayState;if(overrides.color){cueDiv.firstChild.style.color=overrides.color;}if(overrides.textOpacity){tryUpdateStyle(cueDiv.firstChild,'color',constructColor(overrides.color||'#fff',overrides.textOpacity));}if(overrides.backgroundColor){cueDiv.firstChild.style.backgroundColor=overrides.backgroundColor;}if(overrides.backgroundOpacity){tryUpdateStyle(cueDiv.firstChild,'backgroundColor',constructColor(overrides.backgroundColor||'#000',overrides.backgroundOpacity));}if(overrides.windowColor){if(overrides.windowOpacity){tryUpdateStyle(cueDiv,'backgroundColor',constructColor(overrides.windowColor,overrides.windowOpacity));}else{cueDiv.style.backgroundColor=overrides.windowColor;}}if(overrides.edgeStyle){if(overrides.edgeStyle==='dropshadow'){cueDiv.firstChild.style.textShadow="2px 2px 3px "+darkGray+", 2px 2px 4px "+darkGray+", 2px 2px 5px "+darkGray;}else if(overrides.edgeStyle==='raised'){cueDiv.firstChild.style.textShadow="1px 1px "+darkGray+", 2px 2px "+darkGray+", 3px 3px "+darkGray;}else if(overrides.edgeStyle==='depressed'){cueDiv.firstChild.style.textShadow="1px 1px "+lightGray+", 0 1px "+lightGray+", -1px -1px "+darkGray+", 0 -1px "+darkGray;}else if(overrides.edgeStyle==='uniform'){cueDiv.firstChild.style.textShadow="0 0 4px "+darkGray+", 0 0 4px "+darkGray+", 0 0 4px "+darkGray+", 0 0 4px "+darkGray;}}if(overrides.fontPercent&&overrides.fontPercent!==1){var fontSize=_window2.default.parseFloat(cueDiv.style.fontSize);cueDiv.style.fontSize=fontSize*overrides.fontPercent+'px';cueDiv.style.height='auto';cueDiv.style.top='auto';cueDiv.style.bottom='2px';}if(overrides.fontFamily&&overrides.fontFamily!=='default'){if(overrides.fontFamily==='small-caps'){cueDiv.firstChild.style.fontVariant='small-caps';}else{cueDiv.firstChild.style.fontFamily=fontMap[overrides.fontFamily];}}}};return TextTrackDisplay;}(Component);Component.registerComponent('TextTrackDisplay',TextTrackDisplay);/**
 * A loading spinner for use during waiting/loading events.
 *
 * @extends Component
 */var LoadingSpinner=/*#__PURE__*/function(_Component){_inheritsLoose(LoadingSpinner,_Component);function LoadingSpinner(){return _Component.apply(this,arguments)||this;}var _proto=LoadingSpinner.prototype;/**
   * Create the `LoadingSpinner`s DOM element.
   *
   * @return {Element}
   *         The dom element that gets created.
   */_proto.createEl=function createEl$$1(){var isAudio=this.player_.isAudio();var playerType=this.localize(isAudio?'Audio Player':'Video Player');var controlText=createEl('span',{className:'vjs-control-text',innerHTML:this.localize('{1} is loading.',[playerType])});var el=_Component.prototype.createEl.call(this,'div',{className:'vjs-loading-spinner',dir:'ltr'});el.appendChild(controlText);return el;};return LoadingSpinner;}(Component);Component.registerComponent('LoadingSpinner',LoadingSpinner);/**
 * Base class for all buttons.
 *
 * @extends ClickableComponent
 */var Button=/*#__PURE__*/function(_ClickableComponent){_inheritsLoose(Button,_ClickableComponent);function Button(){return _ClickableComponent.apply(this,arguments)||this;}var _proto=Button.prototype;/**
   * Create the `Button`s DOM element.
   *
   * @param {string} [tag="button"]
   *        The element's node type. This argument is IGNORED: no matter what
   *        is passed, it will always create a `button` element.
   *
   * @param {Object} [props={}]
   *        An object of properties that should be set on the element.
   *
   * @param {Object} [attributes={}]
   *        An object of attributes that should be set on the element.
   *
   * @return {Element}
   *         The element that gets created.
   */_proto.createEl=function createEl(tag,props,attributes){if(props===void 0){props={};}if(attributes===void 0){attributes={};}tag='button';props=assign({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},props);// Add attributes for button element
attributes=assign({// Necessary since the default button type is "submit"
type:'button'},attributes);var el=Component.prototype.createEl.call(this,tag,props,attributes);this.createControlTextEl(el);return el;}/**
   * Add a child `Component` inside of this `Button`.
   *
   * @param {string|Component} child
   *        The name or instance of a child to add.
   *
   * @param {Object} [options={}]
   *        The key/value store of options that will get passed to children of
   *        the child.
   *
   * @return {Component}
   *         The `Component` that gets added as a child. When using a string the
   *         `Component` will get created by this process.
   *
   * @deprecated since version 5
   */;_proto.addChild=function addChild(child,options){if(options===void 0){options={};}var className=this.constructor.name;log.warn("Adding an actionable (user controllable) child to a Button ("+className+") is not supported; use a ClickableComponent instead.");// Avoid the error message generated by ClickableComponent's addChild method
return Component.prototype.addChild.call(this,child,options);}/**
   * Enable the `Button` element so that it can be activated or clicked. Use this with
   * {@link Button#disable}.
   */;_proto.enable=function enable(){_ClickableComponent.prototype.enable.call(this);this.el_.removeAttribute('disabled');}/**
   * Disable the `Button` element so that it cannot be activated or clicked. Use this with
   * {@link Button#enable}.
   */;_proto.disable=function disable(){_ClickableComponent.prototype.disable.call(this);this.el_.setAttribute('disabled','disabled');}/**
   * This gets called when a `Button` has focus and `keydown` is triggered via a key
   * press.
   *
   * @param {EventTarget~Event} event
   *        The event that caused this function to get called.
   *
   * @listens keydown
   */;_proto.handleKeyPress=function handleKeyPress(event){// Ignore Space or Enter key operation, which is handled by the browser for a button.
if(!(_keycode2.default.isEventKey(event,'Space')||_keycode2.default.isEventKey(event,'Enter'))){// Pass keypress handling up for unsupported keys
_ClickableComponent.prototype.handleKeyPress.call(this,event);}};return Button;}(ClickableComponent);Component.registerComponent('Button',Button);/**
 * The initial play button that shows before the video has played. The hiding of the
 * `BigPlayButton` get done via CSS and `Player` states.
 *
 * @extends Button
 */var BigPlayButton=/*#__PURE__*/function(_Button){_inheritsLoose(BigPlayButton,_Button);function BigPlayButton(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.mouseused_=false;_this.on('mousedown',_this.handleMouseDown);return _this;}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object. Always returns 'vjs-big-play-button'.
   */var _proto=BigPlayButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return'vjs-big-play-button';}/**
   * This gets called when a `BigPlayButton` "clicked". See {@link ClickableComponent}
   * for more detailed information on what a click can be.
   *
   * @param {EventTarget~Event} event
   *        The `keydown`, `tap`, or `click` event that caused this function to be
   *        called.
   *
   * @listens tap
   * @listens click
   */;_proto.handleClick=function handleClick(event){var playPromise=this.player_.play();// exit early if clicked via the mouse
if(this.mouseused_&&event.clientX&&event.clientY){silencePromise(playPromise);// call handleFocus manually to get hotkeys working
this.player_.handleFocus({});return;}var cb=this.player_.getChild('controlBar');var playToggle=cb&&cb.getChild('playToggle');if(!playToggle){this.player_.focus();return;}var playFocus=function playFocus(){return playToggle.focus();};if(isPromise(playPromise)){playPromise.then(playFocus,function(){});}else{this.setTimeout(playFocus,1);}};_proto.handleKeyPress=function handleKeyPress(event){this.mouseused_=false;_Button.prototype.handleKeyPress.call(this,event);};_proto.handleMouseDown=function handleMouseDown(event){this.mouseused_=true;};return BigPlayButton;}(Button);/**
 * The text that should display over the `BigPlayButton`s controls. Added to for localization.
 *
 * @type {string}
 * @private
 */BigPlayButton.prototype.controlText_='Play Video';Component.registerComponent('BigPlayButton',BigPlayButton);/**
 * The `CloseButton` is a `{@link Button}` that fires a `close` event when
 * it gets clicked.
 *
 * @extends Button
 */var CloseButton=/*#__PURE__*/function(_Button){_inheritsLoose(CloseButton,_Button);/**
  * Creates an instance of the this class.
  *
  * @param  {Player} player
  *         The `Player` that this class should be attached to.
  *
  * @param  {Object} [options]
  *         The key/value store of player options.
  */function CloseButton(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.controlText(options&&options.controlText||_this.localize('Close'));return _this;}/**
  * Builds the default DOM `className`.
  *
  * @return {string}
  *         The DOM `className` for this object.
  */var _proto=CloseButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-close-button "+_Button.prototype.buildCSSClass.call(this);}/**
   * This gets called when a `CloseButton` has focus and `keydown` is triggered via a key
   * press.
   *
   * @param {EventTarget~Event} event
   *        The event that caused this function to get called.
   *
   * @listens keydown
   */;_proto.handleKeyPress=function handleKeyPress(event){}// Override the default `Button` behavior, and don't pass the keypress event
//  up to the player because this button is part of a `ModalDialog`, which
//  doesn't pass keypresses to the player either.
/**
   * This gets called when a `CloseButton` gets clicked. See
   * {@link ClickableComponent#handleClick} for more information on when this will be
   * triggered
   *
   * @param {EventTarget~Event} event
   *        The `keydown`, `tap`, or `click` event that caused this function to be
   *        called.
   *
   * @listens tap
   * @listens click
   * @fires CloseButton#close
   */;_proto.handleClick=function handleClick(event){/**
     * Triggered when the a `CloseButton` is clicked.
     *
     * @event CloseButton#close
     * @type {EventTarget~Event}
     *
     * @property {boolean} [bubbles=false]
     *           set to false so that the close event does not
     *           bubble up to parents if there is no listener
     */this.trigger({type:'close',bubbles:false});};return CloseButton;}(Button);Component.registerComponent('CloseButton',CloseButton);/**
 * Button to toggle between play and pause.
 *
 * @extends Button
 */var PlayToggle=/*#__PURE__*/function(_Button){_inheritsLoose(PlayToggle,_Button);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options={}]
   *        The key/value store of player options.
   */function PlayToggle(player,options){var _this;if(options===void 0){options={};}_this=_Button.call(this,player,options)||this;// show or hide replay icon
options.replay=options.replay===undefined||options.replay;_this.on(player,'play',_this.handlePlay);_this.on(player,'pause',_this.handlePause);if(options.replay){_this.on(player,'ended',_this.handleEnded);}return _this;}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */var _proto=PlayToggle.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-play-control "+_Button.prototype.buildCSSClass.call(this);}/**
   * This gets called when an `PlayToggle` is "clicked". See
   * {@link ClickableComponent} for more detailed information on what a click can be.
   *
   * @param {EventTarget~Event} [event]
   *        The `keydown`, `tap`, or `click` event that caused this function to be
   *        called.
   *
   * @listens tap
   * @listens click
   */;_proto.handleClick=function handleClick(event){if(this.player_.paused()){this.player_.play();}else{this.player_.pause();}}/**
   * This gets called once after the video has ended and the user seeks so that
   * we can change the replay button back to a play button.
   *
   * @param {EventTarget~Event} [event]
   *        The event that caused this function to run.
   *
   * @listens Player#seeked
   */;_proto.handleSeeked=function handleSeeked(event){this.removeClass('vjs-ended');if(this.player_.paused()){this.handlePause(event);}else{this.handlePlay(event);}}/**
   * Add the vjs-playing class to the element so it can change appearance.
   *
   * @param {EventTarget~Event} [event]
   *        The event that caused this function to run.
   *
   * @listens Player#play
   */;_proto.handlePlay=function handlePlay(event){this.removeClass('vjs-ended');this.removeClass('vjs-paused');this.addClass('vjs-playing');// change the button text to "Pause"
this.controlText('Pause');}/**
   * Add the vjs-paused class to the element so it can change appearance.
   *
   * @param {EventTarget~Event} [event]
   *        The event that caused this function to run.
   *
   * @listens Player#pause
   */;_proto.handlePause=function handlePause(event){this.removeClass('vjs-playing');this.addClass('vjs-paused');// change the button text to "Play"
this.controlText('Play');}/**
   * Add the vjs-ended class to the element so it can change appearance
   *
   * @param {EventTarget~Event} [event]
   *        The event that caused this function to run.
   *
   * @listens Player#ended
   */;_proto.handleEnded=function handleEnded(event){this.removeClass('vjs-playing');this.addClass('vjs-ended');// change the button text to "Replay"
this.controlText('Replay');// on the next seek remove the replay button
this.one(this.player_,'seeked',this.handleSeeked);};return PlayToggle;}(Button);/**
 * The text that should display over the `PlayToggle`s controls. Added for localization.
 *
 * @type {string}
 * @private
 */PlayToggle.prototype.controlText_='Play';Component.registerComponent('PlayToggle',PlayToggle);/**
 * @file format-time.js
 * @module format-time
 *//**
 * Format seconds as a time string, H:MM:SS or M:SS. Supplying a guide (in
 * seconds) will force a number of leading zeros to cover the length of the
 * guide.
 *
 * @private
 * @param  {number} seconds
 *         Number of seconds to be turned into a string
 *
 * @param  {number} guide
 *         Number (in seconds) to model the string after
 *
 * @return {string}
 *         Time formatted as H:MM:SS or M:SS
 */var defaultImplementation=function defaultImplementation(seconds,guide){seconds=seconds<0?0:seconds;var s=Math.floor(seconds%60);var m=Math.floor(seconds/60%60);var h=Math.floor(seconds/3600);var gm=Math.floor(guide/60%60);var gh=Math.floor(guide/3600);// handle invalid times
if(isNaN(seconds)||seconds===Infinity){// '-' is false for all relational operators (e.g. <, >=) so this setting
// will add the minimum number of fields specified by the guide
h=m=s='-';}// Check if we need to show hours
h=h>0||gh>0?h+':':'';// If hours are showing, we may need to add a leading zero.
// Always show at least one digit of minutes.
m=((h||gm>=10)&&m<10?'0'+m:m)+':';// Check if leading zero is need for seconds
s=s<10?'0'+s:s;return h+m+s;};// Internal pointer to the current implementation.
var implementation=defaultImplementation;/**
 * Replaces the default formatTime implementation with a custom implementation.
 *
 * @param {Function} customImplementation
 *        A function which will be used in place of the default formatTime
 *        implementation. Will receive the current time in seconds and the
 *        guide (in seconds) as arguments.
 */function setFormatTime(customImplementation){implementation=customImplementation;}/**
 * Resets formatTime to the default implementation.
 */function resetFormatTime(){implementation=defaultImplementation;}/**
 * Delegates to either the default time formatting function or a custom
 * function supplied via `setFormatTime`.
 *
 * Formats seconds as a time string (H:MM:SS or M:SS). Supplying a
 * guide (in seconds) will force a number of leading zeros to cover the
 * length of the guide.
 *
 * @static
 * @example  formatTime(125, 600) === "02:05"
 * @param    {number} seconds
 *           Number of seconds to be turned into a string
 *
 * @param    {number} guide
 *           Number (in seconds) to model the string after
 *
 * @return   {string}
 *           Time formatted as H:MM:SS or M:SS
 */function formatTime(seconds,guide){if(guide===void 0){guide=seconds;}return implementation(seconds,guide);}/**
 * Displays time information about the video
 *
 * @extends Component
 */var TimeDisplay=/*#__PURE__*/function(_Component){_inheritsLoose(TimeDisplay,_Component);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function TimeDisplay(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.throttledUpdateContent=throttle(bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.updateContent),25);_this.on(player,'timeupdate',_this.throttledUpdateContent);return _this;}/**
   * Create the `Component`'s DOM element
   *
   * @return {Element}
   *         The element that was created.
   */var _proto=TimeDisplay.prototype;_proto.createEl=function createEl$$1(){var className=this.buildCSSClass();var el=_Component.prototype.createEl.call(this,'div',{className:className+" vjs-time-control vjs-control",innerHTML:"<span class=\"vjs-control-text\" role=\"presentation\">"+this.localize(this.labelText_)+"\xA0</span>"});this.contentEl_=createEl('span',{className:className+"-display"},{// tell screen readers not to automatically read the time as it changes
'aria-live':'off',// span elements have no implicit role, but some screen readers (notably VoiceOver)
// treat them as a break between items in the DOM when using arrow keys
// (or left-to-right swipes on iOS) to read contents of a page. Using
// role='presentation' causes VoiceOver to NOT treat this span as a break.
'role':'presentation'});this.updateTextNode_();el.appendChild(this.contentEl_);return el;};_proto.dispose=function dispose(){this.contentEl_=null;this.textNode_=null;_Component.prototype.dispose.call(this);}/**
   * Updates the "remaining time" text node with new content using the
   * contents of the `formattedTime_` property.
   *
   * @private
   */;_proto.updateTextNode_=function updateTextNode_(){if(!this.contentEl_){return;}while(this.contentEl_.firstChild){this.contentEl_.removeChild(this.contentEl_.firstChild);}this.textNode_=_document2.default.createTextNode(this.formattedTime_||this.formatTime_(0));this.contentEl_.appendChild(this.textNode_);}/**
   * Generates a formatted time for this component to use in display.
   *
   * @param  {number} time
   *         A numeric time, in seconds.
   *
   * @return {string}
   *         A formatted time
   *
   * @private
   */;_proto.formatTime_=function formatTime_(time){return formatTime(time);}/**
   * Updates the time display text node if it has what was passed in changed
   * the formatted time.
   *
   * @param {number} time
   *        The time to update to
   *
   * @private
   */;_proto.updateFormattedTime_=function updateFormattedTime_(time){var formattedTime=this.formatTime_(time);if(formattedTime===this.formattedTime_){return;}this.formattedTime_=formattedTime;this.requestAnimationFrame(this.updateTextNode_);}/**
   * To be filled out in the child class, should update the displayed time
   * in accordance with the fact that the current time has changed.
   *
   * @param {EventTarget~Event} [event]
   *        The `timeupdate`  event that caused this to run.
   *
   * @listens Player#timeupdate
   */;_proto.updateContent=function updateContent(event){};return TimeDisplay;}(Component);/**
 * The text that is added to the `TimeDisplay` for screen reader users.
 *
 * @type {string}
 * @private
 */TimeDisplay.prototype.labelText_='Time';/**
 * The text that should display over the `TimeDisplay`s controls. Added to for localization.
 *
 * @type {string}
 * @private
 *
 * @deprecated in v7; controlText_ is not used in non-active display Components
 */TimeDisplay.prototype.controlText_='Time';Component.registerComponent('TimeDisplay',TimeDisplay);/**
 * Displays the current time
 *
 * @extends Component
 */var CurrentTimeDisplay=/*#__PURE__*/function(_TimeDisplay){_inheritsLoose(CurrentTimeDisplay,_TimeDisplay);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function CurrentTimeDisplay(player,options){var _this;_this=_TimeDisplay.call(this,player,options)||this;_this.on(player,'ended',_this.handleEnded);return _this;}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */var _proto=CurrentTimeDisplay.prototype;_proto.buildCSSClass=function buildCSSClass(){return'vjs-current-time';}/**
   * Update current time display
   *
   * @param {EventTarget~Event} [event]
   *        The `timeupdate` event that caused this function to run.
   *
   * @listens Player#timeupdate
   */;_proto.updateContent=function updateContent(event){// Allows for smooth scrubbing, when player can't keep up.
var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(time);}/**
   * When the player fires ended there should be no time left. Sadly
   * this is not always the case, lets make it seem like that is the case
   * for users.
   *
   * @param {EventTarget~Event} [event]
   *        The `ended` event that caused this to run.
   *
   * @listens Player#ended
   */;_proto.handleEnded=function handleEnded(event){if(!this.player_.duration()){return;}this.updateFormattedTime_(this.player_.duration());};return CurrentTimeDisplay;}(TimeDisplay);/**
 * The text that is added to the `CurrentTimeDisplay` for screen reader users.
 *
 * @type {string}
 * @private
 */CurrentTimeDisplay.prototype.labelText_='Current Time';/**
 * The text that should display over the `CurrentTimeDisplay`s controls. Added to for localization.
 *
 * @type {string}
 * @private
 *
 * @deprecated in v7; controlText_ is not used in non-active display Components
 */CurrentTimeDisplay.prototype.controlText_='Current Time';Component.registerComponent('CurrentTimeDisplay',CurrentTimeDisplay);/**
 * Displays the duration
 *
 * @extends Component
 */var DurationDisplay=/*#__PURE__*/function(_TimeDisplay){_inheritsLoose(DurationDisplay,_TimeDisplay);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function DurationDisplay(player,options){var _this;_this=_TimeDisplay.call(this,player,options)||this;// we do not want to/need to throttle duration changes,
// as they should always display the changed duration as
// it has changed
_this.on(player,'durationchange',_this.updateContent);// Listen to loadstart because the player duration is reset when a new media element is loaded,
// but the durationchange on the user agent will not fire.
// @see [Spec]{@link https://www.w3.org/TR/2011/WD-html5-20110113/video.html#media-element-load-algorithm}
_this.on(player,'loadstart',_this.updateContent);// Also listen for timeupdate (in the parent) and loadedmetadata because removing those
// listeners could have broken dependent applications/libraries. These
// can likely be removed for 7.0.
_this.on(player,'loadedmetadata',_this.throttledUpdateContent);return _this;}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */var _proto=DurationDisplay.prototype;_proto.buildCSSClass=function buildCSSClass(){return'vjs-duration';}/**
   * Update duration time display.
   *
   * @param {EventTarget~Event} [event]
   *        The `durationchange`, `timeupdate`, or `loadedmetadata` event that caused
   *        this function to be called.
   *
   * @listens Player#durationchange
   * @listens Player#timeupdate
   * @listens Player#loadedmetadata
   */;_proto.updateContent=function updateContent(event){var duration=this.player_.duration();if(this.duration_!==duration){this.duration_=duration;this.updateFormattedTime_(duration);}};return DurationDisplay;}(TimeDisplay);/**
 * The text that is added to the `DurationDisplay` for screen reader users.
 *
 * @type {string}
 * @private
 */DurationDisplay.prototype.labelText_='Duration';/**
 * The text that should display over the `DurationDisplay`s controls. Added to for localization.
 *
 * @type {string}
 * @private
 *
 * @deprecated in v7; controlText_ is not used in non-active display Components
 */DurationDisplay.prototype.controlText_='Duration';Component.registerComponent('DurationDisplay',DurationDisplay);/**
 * The separator between the current time and duration.
 * Can be hidden if it's not needed in the design.
 *
 * @extends Component
 */var TimeDivider=/*#__PURE__*/function(_Component){_inheritsLoose(TimeDivider,_Component);function TimeDivider(){return _Component.apply(this,arguments)||this;}var _proto=TimeDivider.prototype;/**
   * Create the component's DOM element
   *
   * @return {Element}
   *         The element that was created.
   */_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-time-control vjs-time-divider',innerHTML:'<div><span>/</span></div>'},{// this element and its contents can be hidden from assistive techs since
// it is made extraneous by the announcement of the control text
// for the current time and duration displays
'aria-hidden':true});};return TimeDivider;}(Component);Component.registerComponent('TimeDivider',TimeDivider);/**
 * Displays the time left in the video
 *
 * @extends Component
 */var RemainingTimeDisplay=/*#__PURE__*/function(_TimeDisplay){_inheritsLoose(RemainingTimeDisplay,_TimeDisplay);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function RemainingTimeDisplay(player,options){var _this;_this=_TimeDisplay.call(this,player,options)||this;_this.on(player,'durationchange',_this.throttledUpdateContent);_this.on(player,'ended',_this.handleEnded);return _this;}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */var _proto=RemainingTimeDisplay.prototype;_proto.buildCSSClass=function buildCSSClass(){return'vjs-remaining-time';}/**
   * Create the `Component`'s DOM element with the "minus" characted prepend to the time
   *
   * @return {Element}
   *         The element that was created.
   */;_proto.createEl=function createEl$$1(){var el=_TimeDisplay.prototype.createEl.call(this);el.insertBefore(createEl('span',{},{'aria-hidden':true},'-'),this.contentEl_);return el;}/**
   * Update remaining time display.
   *
   * @param {EventTarget~Event} [event]
   *        The `timeupdate` or `durationchange` event that caused this to run.
   *
   * @listens Player#timeupdate
   * @listens Player#durationchange
   */;_proto.updateContent=function updateContent(event){if(typeof this.player_.duration()!=='number'){return;}// @deprecated We should only use remainingTimeDisplay
// as of video.js 7
if(this.player_.remainingTimeDisplay){this.updateFormattedTime_(this.player_.remainingTimeDisplay());}else{this.updateFormattedTime_(this.player_.remainingTime());}}/**
   * When the player fires ended there should be no time left. Sadly
   * this is not always the case, lets make it seem like that is the case
   * for users.
   *
   * @param {EventTarget~Event} [event]
   *        The `ended` event that caused this to run.
   *
   * @listens Player#ended
   */;_proto.handleEnded=function handleEnded(event){if(!this.player_.duration()){return;}this.updateFormattedTime_(0);};return RemainingTimeDisplay;}(TimeDisplay);/**
 * The text that is added to the `RemainingTimeDisplay` for screen reader users.
 *
 * @type {string}
 * @private
 */RemainingTimeDisplay.prototype.labelText_='Remaining Time';/**
 * The text that should display over the `RemainingTimeDisplay`s controls. Added to for localization.
 *
 * @type {string}
 * @private
 *
 * @deprecated in v7; controlText_ is not used in non-active display Components
 */RemainingTimeDisplay.prototype.controlText_='Remaining Time';Component.registerComponent('RemainingTimeDisplay',RemainingTimeDisplay);/**
 * Displays the live indicator when duration is Infinity.
 *
 * @extends Component
 */var LiveDisplay=/*#__PURE__*/function(_Component){_inheritsLoose(LiveDisplay,_Component);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function LiveDisplay(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.updateShowing();_this.on(_this.player(),'durationchange',_this.updateShowing);return _this;}/**
   * Create the `Component`'s DOM element
   *
   * @return {Element}
   *         The element that was created.
   */var _proto=LiveDisplay.prototype;_proto.createEl=function createEl$$1(){var el=_Component.prototype.createEl.call(this,'div',{className:'vjs-live-control vjs-control'});this.contentEl_=createEl('div',{className:'vjs-live-display',innerHTML:"<span class=\"vjs-control-text\">"+this.localize('Stream Type')+"\xA0</span>"+this.localize('LIVE')},{'aria-live':'off'});el.appendChild(this.contentEl_);return el;};_proto.dispose=function dispose(){this.contentEl_=null;_Component.prototype.dispose.call(this);}/**
   * Check the duration to see if the LiveDisplay should be showing or not. Then show/hide
   * it accordingly
   *
   * @param {EventTarget~Event} [event]
   *        The {@link Player#durationchange} event that caused this function to run.
   *
   * @listens Player#durationchange
   */;_proto.updateShowing=function updateShowing(event){if(this.player().duration()===Infinity){this.show();}else{this.hide();}};return LiveDisplay;}(Component);Component.registerComponent('LiveDisplay',LiveDisplay);/**
 * Displays the live indicator when duration is Infinity.
 *
 * @extends Component
 */var SeekToLive=/*#__PURE__*/function(_Button){_inheritsLoose(SeekToLive,_Button);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function SeekToLive(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.updateLiveEdgeStatus();if(_this.player_.liveTracker){_this.on(_this.player_.liveTracker,'liveedgechange',_this.updateLiveEdgeStatus);}return _this;}/**
   * Create the `Component`'s DOM element
   *
   * @return {Element}
   *         The element that was created.
   */var _proto=SeekToLive.prototype;_proto.createEl=function createEl$$1(){var el=_Button.prototype.createEl.call(this,'button',{className:'vjs-seek-to-live-control vjs-control'});this.textEl_=createEl('span',{className:'vjs-seek-to-live-text',innerHTML:this.localize('LIVE')},{'aria-hidden':'true'});el.appendChild(this.textEl_);return el;}/**
   * Update the state of this button if we are at the live edge
   * or not
   */;_proto.updateLiveEdgeStatus=function updateLiveEdgeStatus(e){// default to live edge
if(!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()){this.setAttribute('aria-disabled',true);this.addClass('vjs-at-live-edge');this.controlText('Seek to live, currently playing live');}else{this.setAttribute('aria-disabled',false);this.removeClass('vjs-at-live-edge');this.controlText('Seek to live, currently behind live');}}/**
   * On click bring us as near to the live point as possible.
   * This requires that we wait for the next `live-seekable-change`
   * event which will happen every segment length seconds.
   */;_proto.handleClick=function handleClick(){this.player_.liveTracker.seekToLiveEdge();}/**
   * Dispose of the element and stop tracking
   */;_proto.dispose=function dispose(){if(this.player_.liveTracker){this.off(this.player_.liveTracker,'liveedgechange',this.updateLiveEdgeStatus);}this.textEl_=null;_Button.prototype.dispose.call(this);};return SeekToLive;}(Button);SeekToLive.prototype.controlText_='Seek to live, currently playing live';Component.registerComponent('SeekToLive',SeekToLive);/**
 * The base functionality for a slider. Can be vertical or horizontal.
 * For instance the volume bar or the seek bar on a video is a slider.
 *
 * @extends Component
 */var Slider=/*#__PURE__*/function(_Component){_inheritsLoose(Slider,_Component);/**
  * Create an instance of this class
  *
  * @param {Player} player
  *        The `Player` that this class should be attached to.
  *
  * @param {Object} [options]
  *        The key/value store of player options.
  */function Slider(player,options){var _this;_this=_Component.call(this,player,options)||this;// Set property names to bar to match with the child Slider class is looking for
_this.bar=_this.getChild(_this.options_.barName);// Set a horizontal or vertical class on the slider depending on the slider type
_this.vertical(!!_this.options_.vertical);_this.enable();return _this;}/**
   * Are controls are currently enabled for this slider or not.
   *
   * @return {boolean}
   *         true if controls are enabled, false otherwise
   */var _proto=Slider.prototype;_proto.enabled=function enabled(){return this.enabled_;}/**
   * Enable controls for this slider if they are disabled
   */;_proto.enable=function enable(){if(this.enabled()){return;}this.on('mousedown',this.handleMouseDown);this.on('touchstart',this.handleMouseDown);this.on('focus',this.handleFocus);this.on('blur',this.handleBlur);this.on('click',this.handleClick);this.on(this.player_,'controlsvisible',this.update);if(this.playerEvent){this.on(this.player_,this.playerEvent,this.update);}this.removeClass('disabled');this.setAttribute('tabindex',0);this.enabled_=true;}/**
   * Disable controls for this slider if they are enabled
   */;_proto.disable=function disable(){if(!this.enabled()){return;}var doc=this.bar.el_.ownerDocument;this.off('mousedown',this.handleMouseDown);this.off('touchstart',this.handleMouseDown);this.off('focus',this.handleFocus);this.off('blur',this.handleBlur);this.off('click',this.handleClick);this.off(this.player_,'controlsvisible',this.update);this.off(doc,'mousemove',this.handleMouseMove);this.off(doc,'mouseup',this.handleMouseUp);this.off(doc,'touchmove',this.handleMouseMove);this.off(doc,'touchend',this.handleMouseUp);this.removeAttribute('tabindex');this.addClass('disabled');if(this.playerEvent){this.off(this.player_,this.playerEvent,this.update);}this.enabled_=false;}/**
   * Create the `Slider`s DOM element.
   *
   * @param {string} type
   *        Type of element to create.
   *
   * @param {Object} [props={}]
   *        List of properties in Object form.
   *
   * @param {Object} [attributes={}]
   *        list of attributes in Object form.
   *
   * @return {Element}
   *         The element that gets created.
   */;_proto.createEl=function createEl$$1(type,props,attributes){if(props===void 0){props={};}if(attributes===void 0){attributes={};}// Add the slider element class to all sub classes
props.className=props.className+' vjs-slider';props=assign({tabIndex:0},props);attributes=assign({'role':'slider','aria-valuenow':0,'aria-valuemin':0,'aria-valuemax':100,'tabIndex':0},attributes);return _Component.prototype.createEl.call(this,type,props,attributes);}/**
   * Handle `mousedown` or `touchstart` events on the `Slider`.
   *
   * @param {EventTarget~Event} event
   *        `mousedown` or `touchstart` event that triggered this function
   *
   * @listens mousedown
   * @listens touchstart
   * @fires Slider#slideractive
   */;_proto.handleMouseDown=function handleMouseDown(event){var doc=this.bar.el_.ownerDocument;if(event.type==='mousedown'){event.preventDefault();}// Do not call preventDefault() on touchstart in Chrome
// to avoid console warnings. Use a 'touch-action: none' style
// instead to prevent unintented scrolling.
// https://developers.google.com/web/updates/2017/01/scrolling-intervention
if(event.type==='touchstart'&&!IS_CHROME){event.preventDefault();}blockTextSelection();this.addClass('vjs-sliding');/**
     * Triggered when the slider is in an active state
     *
     * @event Slider#slideractive
     * @type {EventTarget~Event}
     */this.trigger('slideractive');this.on(doc,'mousemove',this.handleMouseMove);this.on(doc,'mouseup',this.handleMouseUp);this.on(doc,'touchmove',this.handleMouseMove);this.on(doc,'touchend',this.handleMouseUp);this.handleMouseMove(event);}/**
   * Handle the `mousemove`, `touchmove`, and `mousedown` events on this `Slider`.
   * The `mousemove` and `touchmove` events will only only trigger this function during
   * `mousedown` and `touchstart`. This is due to {@link Slider#handleMouseDown} and
   * {@link Slider#handleMouseUp}.
   *
   * @param {EventTarget~Event} event
   *        `mousedown`, `mousemove`, `touchstart`, or `touchmove` event that triggered
   *        this function
   *
   * @listens mousemove
   * @listens touchmove
   */;_proto.handleMouseMove=function handleMouseMove(event){}/**
   * Handle `mouseup` or `touchend` events on the `Slider`.
   *
   * @param {EventTarget~Event} event
   *        `mouseup` or `touchend` event that triggered this function.
   *
   * @listens touchend
   * @listens mouseup
   * @fires Slider#sliderinactive
   */;_proto.handleMouseUp=function handleMouseUp(){var doc=this.bar.el_.ownerDocument;unblockTextSelection();this.removeClass('vjs-sliding');/**
     * Triggered when the slider is no longer in an active state.
     *
     * @event Slider#sliderinactive
     * @type {EventTarget~Event}
     */this.trigger('sliderinactive');this.off(doc,'mousemove',this.handleMouseMove);this.off(doc,'mouseup',this.handleMouseUp);this.off(doc,'touchmove',this.handleMouseMove);this.off(doc,'touchend',this.handleMouseUp);this.update();}/**
   * Update the progress bar of the `Slider`.
   *
   * @return {number}
   *          The percentage of progress the progress bar represents as a
   *          number from 0 to 1.
   */;_proto.update=function update(){// In VolumeBar init we have a setTimeout for update that pops and update
// to the end of the execution stack. The player is destroyed before then
// update will cause an error
if(!this.el_){return;}// If scrubbing, we could use a cached value to make the handle keep up
// with the user's mouse. On HTML5 browsers scrubbing is really smooth, but
// some flash players are slow, so we might want to utilize this later.
// var progress =  (this.player_.scrubbing()) ? this.player_.getCache().currentTime / this.player_.duration() : this.player_.currentTime() / this.player_.duration();
var progress=this.getPercent();var bar=this.bar;// If there's no bar...
if(!bar){return;}// Protect against no duration and other division issues
if(typeof progress!=='number'||progress!==progress||progress<0||progress===Infinity){progress=0;}// Convert to a percentage for setting
var percentage=(progress*100).toFixed(2)+'%';var style=bar.el().style;// Set the new bar width or height
if(this.vertical()){style.height=percentage;}else{style.width=percentage;}return progress;}/**
   * Calculate distance for slider
   *
   * @param {EventTarget~Event} event
   *        The event that caused this function to run.
   *
   * @return {number}
   *         The current position of the Slider.
   *         - position.x for vertical `Slider`s
   *         - position.y for horizontal `Slider`s
   */;_proto.calculateDistance=function calculateDistance(event){var position=getPointerPosition(this.el_,event);if(this.vertical()){return position.y;}return position.x;}/**
   * Handle a `focus` event on this `Slider`.
   *
   * @param {EventTarget~Event} event
   *        The `focus` event that caused this function to run.
   *
   * @listens focus
   */;_proto.handleFocus=function handleFocus(){this.on(this.bar.el_.ownerDocument,'keydown',this.handleKeyPress);}/**
   * Handle a `keydown` event on the `Slider`. Watches for left, rigth, up, and down
   * arrow keys. This function will only be called when the slider has focus. See
   * {@link Slider#handleFocus} and {@link Slider#handleBlur}.
   *
   * @param {EventTarget~Event} event
   *        the `keydown` event that caused this function to run.
   *
   * @listens keydown
   */;_proto.handleKeyPress=function handleKeyPress(event){// Left and Down Arrows
if(_keycode2.default.isEventKey(event,'Left')||_keycode2.default.isEventKey(event,'Down')){event.preventDefault();this.stepBack();// Up and Right Arrows
}else if(_keycode2.default.isEventKey(event,'Right')||_keycode2.default.isEventKey(event,'Up')){event.preventDefault();this.stepForward();}else{// Pass keypress handling up for unsupported keys
_Component.prototype.handleKeyPress.call(this,event);}}/**
   * Handle a `blur` event on this `Slider`.
   *
   * @param {EventTarget~Event} event
   *        The `blur` event that caused this function to run.
   *
   * @listens blur
   */;_proto.handleBlur=function handleBlur(){this.off(this.bar.el_.ownerDocument,'keydown',this.handleKeyPress);}/**
   * Listener for click events on slider, used to prevent clicks
   *   from bubbling up to parent elements like button menus.
   *
   * @param {Object} event
   *        Event that caused this object to run
   */;_proto.handleClick=function handleClick(event){event.stopImmediatePropagation();event.preventDefault();}/**
   * Get/set if slider is horizontal for vertical
   *
   * @param {boolean} [bool]
   *        - true if slider is vertical,
   *        - false is horizontal
   *
   * @return {boolean}
   *         - true if slider is vertical, and getting
   *         - false if the slider is horizontal, and getting
   */;_proto.vertical=function vertical(bool){if(bool===undefined){return this.vertical_||false;}this.vertical_=!!bool;if(this.vertical_){this.addClass('vjs-slider-vertical');}else{this.addClass('vjs-slider-horizontal');}};return Slider;}(Component);Component.registerComponent('Slider',Slider);/**
 * Shows loading progress
 *
 * @extends Component
 */var LoadProgressBar=/*#__PURE__*/function(_Component){_inheritsLoose(LoadProgressBar,_Component);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function LoadProgressBar(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.partEls_=[];_this.on(player,'progress',_this.update);return _this;}/**
   * Create the `Component`'s DOM element
   *
   * @return {Element}
   *         The element that was created.
   */var _proto=LoadProgressBar.prototype;_proto.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-load-progress',innerHTML:"<span class=\"vjs-control-text\"><span>"+this.localize('Loaded')+"</span>: <span class=\"vjs-control-text-loaded-percentage\">0%</span></span>"});};_proto.dispose=function dispose(){this.partEls_=null;_Component.prototype.dispose.call(this);}/**
   * Update progress bar
   *
   * @param {EventTarget~Event} [event]
   *        The `progress` event that caused this function to run.
   *
   * @listens Player#progress
   */;_proto.update=function update(event){var liveTracker=this.player_.liveTracker;var buffered=this.player_.buffered();var duration=liveTracker&&liveTracker.isLive()?liveTracker.seekableEnd():this.player_.duration();var bufferedEnd=this.player_.bufferedEnd();var children=this.partEls_;var controlTextPercentage=this.$('.vjs-control-text-loaded-percentage');// get the percent width of a time compared to the total end
var percentify=function percentify(time,end,rounded){// no NaN
var percent=time/end||0;percent=(percent>=1?1:percent)*100;if(rounded){percent=percent.toFixed(2);}return percent+'%';};// update the width of the progress bar
this.el_.style.width=percentify(bufferedEnd,duration);// update the control-text
textContent(controlTextPercentage,percentify(bufferedEnd,duration,true));// add child elements to represent the individual buffered time ranges
for(var i=0;i<buffered.length;i++){var start=buffered.start(i);var end=buffered.end(i);var part=children[i];if(!part){part=this.el_.appendChild(createEl());children[i]=part;}// set the percent based on the width of the progress bar (bufferedEnd)
part.style.left=percentify(start,bufferedEnd);part.style.width=percentify(end-start,bufferedEnd);}// remove unused buffered range elements
for(var _i=children.length;_i>buffered.length;_i--){this.el_.removeChild(children[_i-1]);}children.length=buffered.length;};return LoadProgressBar;}(Component);Component.registerComponent('LoadProgressBar',LoadProgressBar);/**
 * Time tooltips display a time above the progress bar.
 *
 * @extends Component
 */var TimeTooltip=/*#__PURE__*/function(_Component){_inheritsLoose(TimeTooltip,_Component);function TimeTooltip(){return _Component.apply(this,arguments)||this;}var _proto=TimeTooltip.prototype;/**
   * Create the time tooltip DOM element
   *
   * @return {Element}
   *         The element that was created.
   */_proto.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-time-tooltip'},{'aria-hidden':'true'});}/**
   * Updates the position of the time tooltip relative to the `SeekBar`.
   *
   * @param {Object} seekBarRect
   *        The `ClientRect` for the {@link SeekBar} element.
   *
   * @param {number} seekBarPoint
   *        A number from 0 to 1, representing a horizontal reference point
   *        from the left edge of the {@link SeekBar}
   */;_proto.update=function update(seekBarRect,seekBarPoint,content){var tooltipRect=getBoundingClientRect(this.el_);var playerRect=getBoundingClientRect(this.player_.el());var seekBarPointPx=seekBarRect.width*seekBarPoint;// do nothing if either rect isn't available
// for example, if the player isn't in the DOM for testing
if(!playerRect||!tooltipRect){return;}// This is the space left of the `seekBarPoint` available within the bounds
// of the player. We calculate any gap between the left edge of the player
// and the left edge of the `SeekBar` and add the number of pixels in the
// `SeekBar` before hitting the `seekBarPoint`
var spaceLeftOfPoint=seekBarRect.left-playerRect.left+seekBarPointPx;// This is the space right of the `seekBarPoint` available within the bounds
// of the player. We calculate the number of pixels from the `seekBarPoint`
// to the right edge of the `SeekBar` and add to that any gap between the
// right edge of the `SeekBar` and the player.
var spaceRightOfPoint=seekBarRect.width-seekBarPointPx+(playerRect.right-seekBarRect.right);// This is the number of pixels by which the tooltip will need to be pulled
// further to the right to center it over the `seekBarPoint`.
var pullTooltipBy=tooltipRect.width/2;// Adjust the `pullTooltipBy` distance to the left or right depending on
// the results of the space calculations above.
if(spaceLeftOfPoint<pullTooltipBy){pullTooltipBy+=pullTooltipBy-spaceLeftOfPoint;}else if(spaceRightOfPoint<pullTooltipBy){pullTooltipBy=spaceRightOfPoint;}// Due to the imprecision of decimal/ratio based calculations and varying
// rounding behaviors, there are cases where the spacing adjustment is off
// by a pixel or two. This adds insurance to these calculations.
if(pullTooltipBy<0){pullTooltipBy=0;}else if(pullTooltipBy>tooltipRect.width){pullTooltipBy=tooltipRect.width;}this.el_.style.right="-"+pullTooltipBy+"px";textContent(this.el_,content);}/**
   * Updates the position of the time tooltip relative to the `SeekBar`.
   *
   * @param {Object} seekBarRect
   *        The `ClientRect` for the {@link SeekBar} element.
   *
   * @param {number} seekBarPoint
   *        A number from 0 to 1, representing a horizontal reference point
   *        from the left edge of the {@link SeekBar}
   *
   * @param {number} time
   *        The time to update the tooltip to, not used during live playback
   *
   * @param {Function} cb
   *        A function that will be called during the request animation frame
   *        for tooltips that need to do additional animations from the default
   */;_proto.updateTime=function updateTime(seekBarRect,seekBarPoint,time,cb){var _this=this;// If there is an existing rAF ID, cancel it so we don't over-queue.
if(this.rafId_){this.cancelAnimationFrame(this.rafId_);}this.rafId_=this.requestAnimationFrame(function(){var content;var duration=_this.player_.duration();if(_this.player_.liveTracker&&_this.player_.liveTracker.isLive()){var liveWindow=_this.player_.liveTracker.liveWindow();var secondsBehind=liveWindow-seekBarPoint*liveWindow;content=(secondsBehind<1?'':'-')+formatTime(secondsBehind,liveWindow);}else{content=formatTime(time,duration);}_this.update(seekBarRect,seekBarPoint,content);if(cb){cb();}});};return TimeTooltip;}(Component);Component.registerComponent('TimeTooltip',TimeTooltip);/**
 * Used by {@link SeekBar} to display media playback progress as part of the
 * {@link ProgressControl}.
 *
 * @extends Component
 */var PlayProgressBar=/*#__PURE__*/function(_Component){_inheritsLoose(PlayProgressBar,_Component);function PlayProgressBar(){return _Component.apply(this,arguments)||this;}var _proto=PlayProgressBar.prototype;/**
   * Create the the DOM element for this class.
   *
   * @return {Element}
   *         The element that was created.
   */_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-play-progress vjs-slider-bar'},{'aria-hidden':'true'});}/**
   * Enqueues updates to its own DOM as well as the DOM of its
   * {@link TimeTooltip} child.
   *
   * @param {Object} seekBarRect
   *        The `ClientRect` for the {@link SeekBar} element.
   *
   * @param {number} seekBarPoint
   *        A number from 0 to 1, representing a horizontal reference point
   *        from the left edge of the {@link SeekBar}
   */;_proto.update=function update(seekBarRect,seekBarPoint){var timeTooltip=this.getChild('timeTooltip');if(!timeTooltip){return;}var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();timeTooltip.updateTime(seekBarRect,seekBarPoint,time);};return PlayProgressBar;}(Component);/**
 * Default options for {@link PlayProgressBar}.
 *
 * @type {Object}
 * @private
 */PlayProgressBar.prototype.options_={children:[]};// Time tooltips should not be added to a player on mobile devices
if(!IS_IOS&&!IS_ANDROID){PlayProgressBar.prototype.options_.children.push('timeTooltip');}Component.registerComponent('PlayProgressBar',PlayProgressBar);/**
 * The {@link MouseTimeDisplay} component tracks mouse movement over the
 * {@link ProgressControl}. It displays an indicator and a {@link TimeTooltip}
 * indicating the time which is represented by a given point in the
 * {@link ProgressControl}.
 *
 * @extends Component
 */var MouseTimeDisplay=/*#__PURE__*/function(_Component){_inheritsLoose(MouseTimeDisplay,_Component);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The {@link Player} that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function MouseTimeDisplay(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.update=throttle(bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.update),25);return _this;}/**
   * Create the DOM element for this class.
   *
   * @return {Element}
   *         The element that was created.
   */var _proto=MouseTimeDisplay.prototype;_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-mouse-display'});}/**
   * Enqueues updates to its own DOM as well as the DOM of its
   * {@link TimeTooltip} child.
   *
   * @param {Object} seekBarRect
   *        The `ClientRect` for the {@link SeekBar} element.
   *
   * @param {number} seekBarPoint
   *        A number from 0 to 1, representing a horizontal reference point
   *        from the left edge of the {@link SeekBar}
   */;_proto.update=function update(seekBarRect,seekBarPoint){var _this2=this;var time=seekBarPoint*this.player_.duration();this.getChild('timeTooltip').updateTime(seekBarRect,seekBarPoint,time,function(){_this2.el_.style.left=seekBarRect.width*seekBarPoint+"px";});};return MouseTimeDisplay;}(Component);/**
 * Default options for `MouseTimeDisplay`
 *
 * @type {Object}
 * @private
 */MouseTimeDisplay.prototype.options_={children:['timeTooltip']};Component.registerComponent('MouseTimeDisplay',MouseTimeDisplay);var STEP_SECONDS=5;// The multiplier of STEP_SECONDS that PgUp/PgDown move the timeline.
var PAGE_KEY_MULTIPLIER=12;// The interval at which the bar should update as it progresses.
var UPDATE_REFRESH_INTERVAL=30;/**
 * Seek bar and container for the progress bars. Uses {@link PlayProgressBar}
 * as its `bar`.
 *
 * @extends Slider
 */var SeekBar=/*#__PURE__*/function(_Slider){_inheritsLoose(SeekBar,_Slider);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function SeekBar(player,options){var _this;_this=_Slider.call(this,player,options)||this;_this.setEventHandlers_();return _this;}/**
   * Sets the event handlers
   *
   * @private
   */var _proto=SeekBar.prototype;_proto.setEventHandlers_=function setEventHandlers_(){this.update=throttle(bind(this,this.update),UPDATE_REFRESH_INTERVAL);this.on(this.player_,'timeupdate',this.update);this.on(this.player_,'ended',this.handleEnded);this.on(this.player_,'durationchange',this.update);if(this.player_.liveTracker){this.on(this.player_.liveTracker,'liveedgechange',this.update);}// when playing, let's ensure we smoothly update the play progress bar
// via an interval
this.updateInterval=null;this.on(this.player_,['playing'],this.enableInterval_);this.on(this.player_,['ended','pause','waiting'],this.disableInterval_);// we don't need to update the play progress if the document is hidden,
// also, this causes the CPU to spike and eventually crash the page on IE11.
if('hidden'in _document2.default&&'visibilityState'in _document2.default){this.on(_document2.default,'visibilitychange',this.toggleVisibility_);}};_proto.toggleVisibility_=function toggleVisibility_(e){if(_document2.default.hidden){this.disableInterval_(e);}else{this.enableInterval_();// we just switched back to the page and someone may be looking, so, update ASAP
this.requestAnimationFrame(this.update);}};_proto.enableInterval_=function enableInterval_(){var _this2=this;this.clearInterval(this.updateInterval);this.updateInterval=this.setInterval(function(){_this2.requestAnimationFrame(_this2.update);},UPDATE_REFRESH_INTERVAL);};_proto.disableInterval_=function disableInterval_(e){if(this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e.type!=='ended'){return;}this.clearInterval(this.updateInterval);}/**
   * Create the `Component`'s DOM element
   *
   * @return {Element}
   *         The element that was created.
   */;_proto.createEl=function createEl$$1(){return _Slider.prototype.createEl.call(this,'div',{className:'vjs-progress-holder'},{'aria-label':this.localize('Progress Bar')});}/**
   * This function updates the play progress bar and accessibility
   * attributes to whatever is passed in.
   *
   * @param {number} currentTime
   *        The currentTime value that should be used for accessibility
   *
   * @param {number} percent
   *        The percentage as a decimal that the bar should be filled from 0-1.
   *
   * @private
   */;_proto.update_=function update_(currentTime,percent){var liveTracker=this.player_.liveTracker;var duration=this.player_.duration();if(liveTracker&&liveTracker.isLive()){duration=this.player_.liveTracker.liveCurrentTime();}// machine readable value of progress bar (percentage complete)
this.el_.setAttribute('aria-valuenow',(percent*100).toFixed(2));// human readable value of progress bar (time complete)
this.el_.setAttribute('aria-valuetext',this.localize('progress bar timing: currentTime={1} duration={2}',[formatTime(currentTime,duration),formatTime(duration,duration)],'{1} of {2}'));// Update the `PlayProgressBar`.
if(this.bar){this.bar.update(getBoundingClientRect(this.el_),percent);}}/**
   * Update the seek bar's UI.
   *
   * @param {EventTarget~Event} [event]
   *        The `timeupdate` or `ended` event that caused this to run.
   *
   * @listens Player#timeupdate
   *
   * @return {number}
   *          The current percent at a number from 0-1
   */;_proto.update=function update(event){// if the offsetParent is null, then this element is hidden, in which case
// we don't need to update it.
if(this.el().offsetParent===null){return;}var percent=_Slider.prototype.update.call(this);this.update_(this.getCurrentTime_(),percent);return percent;}/**
   * Get the value of current time but allows for smooth scrubbing,
   * when player can't keep up.
   *
   * @return {number}
   *         The current time value to display
   *
   * @private
   */;_proto.getCurrentTime_=function getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();}/**
   * We want the seek bar to be full on ended
   * no matter what the actual internal values are. so we force it.
   *
   * @param {EventTarget~Event} [event]
   *        The `timeupdate` or `ended` event that caused this to run.
   *
   * @listens Player#ended
   */;_proto.handleEnded=function handleEnded(event){this.update_(this.player_.duration(),1);}/**
   * Get the percentage of media played so far.
   *
   * @return {number}
   *         The percentage of media played so far (0 to 1).
   */;_proto.getPercent=function getPercent(){var currentTime=this.getCurrentTime_();var percent;var liveTracker=this.player_.liveTracker;if(liveTracker&&liveTracker.isLive()){percent=(currentTime-liveTracker.seekableStart())/liveTracker.liveWindow();// prevent the percent from changing at the live edge
if(liveTracker.atLiveEdge()){percent=1;}}else{percent=currentTime/this.player_.duration();}return percent>=1?1:percent||0;}/**
   * Handle mouse down on seek bar
   *
   * @param {EventTarget~Event} event
   *        The `mousedown` event that caused this to run.
   *
   * @listens mousedown
   */;_proto.handleMouseDown=function handleMouseDown(event){if(!isSingleLeftClick(event)){return;}// Stop event propagation to prevent double fire in progress-control.js
event.stopPropagation();this.player_.scrubbing(true);this.videoWasPlaying=!this.player_.paused();this.player_.pause();_Slider.prototype.handleMouseDown.call(this,event);}/**
   * Handle mouse move on seek bar
   *
   * @param {EventTarget~Event} event
   *        The `mousemove` event that caused this to run.
   *
   * @listens mousemove
   */;_proto.handleMouseMove=function handleMouseMove(event){if(!isSingleLeftClick(event)){return;}var newTime;var distance=this.calculateDistance(event);var liveTracker=this.player_.liveTracker;if(!liveTracker||!liveTracker.isLive()){newTime=distance*this.player_.duration();// Don't let video end while scrubbing.
if(newTime===this.player_.duration()){newTime=newTime-0.1;}}else{var seekableStart=liveTracker.seekableStart();var seekableEnd=liveTracker.liveCurrentTime();newTime=seekableStart+distance*liveTracker.liveWindow();// Don't let video end while scrubbing.
if(newTime>=seekableEnd){newTime=seekableEnd;}// Compensate for precision differences so that currentTime is not less
// than seekable start
if(newTime<=seekableStart){newTime=seekableStart+0.1;}// On android seekableEnd can be Infinity sometimes,
// this will cause newTime to be Infinity, which is
// not a valid currentTime.
if(newTime===Infinity){return;}}// Set new time (tell player to seek to new time)
this.player_.currentTime(newTime);};_proto.enable=function enable(){_Slider.prototype.enable.call(this);var mouseTimeDisplay=this.getChild('mouseTimeDisplay');if(!mouseTimeDisplay){return;}mouseTimeDisplay.show();};_proto.disable=function disable(){_Slider.prototype.disable.call(this);var mouseTimeDisplay=this.getChild('mouseTimeDisplay');if(!mouseTimeDisplay){return;}mouseTimeDisplay.hide();}/**
   * Handle mouse up on seek bar
   *
   * @param {EventTarget~Event} event
   *        The `mouseup` event that caused this to run.
   *
   * @listens mouseup
   */;_proto.handleMouseUp=function handleMouseUp(event){_Slider.prototype.handleMouseUp.call(this,event);// Stop event propagation to prevent double fire in progress-control.js
if(event){event.stopPropagation();}this.player_.scrubbing(false);/**
     * Trigger timeupdate because we're done seeking and the time has changed.
     * This is particularly useful for if the player is paused to time the time displays.
     *
     * @event Tech#timeupdate
     * @type {EventTarget~Event}
     */this.player_.trigger({type:'timeupdate',target:this,manuallyTriggered:true});if(this.videoWasPlaying){silencePromise(this.player_.play());}}/**
   * Move more quickly fast forward for keyboard-only users
   */;_proto.stepForward=function stepForward(){this.player_.currentTime(this.player_.currentTime()+STEP_SECONDS);}/**
   * Move more quickly rewind for keyboard-only users
   */;_proto.stepBack=function stepBack(){this.player_.currentTime(this.player_.currentTime()-STEP_SECONDS);}/**
   * Toggles the playback state of the player
   * This gets called when enter or space is used on the seekbar
   *
   * @param {EventTarget~Event} event
   *        The `keydown` event that caused this function to be called
   *
   */;_proto.handleAction=function handleAction(event){if(this.player_.paused()){this.player_.play();}else{this.player_.pause();}}/**
   * Called when this SeekBar has focus and a key gets pressed down.
   * Supports the following keys:
   *
   *   Space or Enter key fire a click event
   *   Home key moves to start of the timeline
   *   End key moves to end of the timeline
   *   Digit "0" through "9" keys move to 0%, 10% ... 80%, 90% of the timeline
   *   PageDown key moves back a larger step than ArrowDown
   *   PageUp key moves forward a large step
   *
   * @param {EventTarget~Event} event
   *        The `keydown` event that caused this function to be called.
   *
   * @listens keydown
   */;_proto.handleKeyPress=function handleKeyPress(event){if(_keycode2.default.isEventKey(event,'Space')||_keycode2.default.isEventKey(event,'Enter')){event.preventDefault();this.handleAction(event);}else if(_keycode2.default.isEventKey(event,'Home')){event.preventDefault();this.player_.currentTime(0);}else if(_keycode2.default.isEventKey(event,'End')){event.preventDefault();this.player_.currentTime(this.player_.duration());}else if(/^[0-9]$/.test((0,_keycode2.default)(event))){event.preventDefault();var gotoFraction=(_keycode2.default.codes[(0,_keycode2.default)(event)]-_keycode2.default.codes['0'])*10.0/100.0;this.player_.currentTime(this.player_.duration()*gotoFraction);}else if(_keycode2.default.isEventKey(event,'PgDn')){event.preventDefault();this.player_.currentTime(this.player_.currentTime()-STEP_SECONDS*PAGE_KEY_MULTIPLIER);}else if(_keycode2.default.isEventKey(event,'PgUp')){event.preventDefault();this.player_.currentTime(this.player_.currentTime()+STEP_SECONDS*PAGE_KEY_MULTIPLIER);}else{// Pass keypress handling up for unsupported keys
_Slider.prototype.handleKeyPress.call(this,event);}};return SeekBar;}(Slider);/**
 * Default options for the `SeekBar`
 *
 * @type {Object}
 * @private
 */SeekBar.prototype.options_={children:['loadProgressBar','playProgressBar'],barName:'playProgressBar'};// MouseTimeDisplay tooltips should not be added to a player on mobile devices
if(!IS_IOS&&!IS_ANDROID){SeekBar.prototype.options_.children.splice(1,0,'mouseTimeDisplay');}Component.registerComponent('SeekBar',SeekBar);/**
 * The Progress Control component contains the seek bar, load progress,
 * and play progress.
 *
 * @extends Component
 */var ProgressControl=/*#__PURE__*/function(_Component){_inheritsLoose(ProgressControl,_Component);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function ProgressControl(player,options){var _this;_this=_Component.call(this,player,options)||this;_this.handleMouseMove=throttle(bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.handleMouseMove),25);_this.throttledHandleMouseSeek=throttle(bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.handleMouseSeek),25);_this.enable();return _this;}/**
   * Create the `Component`'s DOM element
   *
   * @return {Element}
   *         The element that was created.
   */var _proto=ProgressControl.prototype;_proto.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-progress-control vjs-control'});}/**
   * When the mouse moves over the `ProgressControl`, the pointer position
   * gets passed down to the `MouseTimeDisplay` component.
   *
   * @param {EventTarget~Event} event
   *        The `mousemove` event that caused this function to run.
   *
   * @listen mousemove
   */;_proto.handleMouseMove=function handleMouseMove(event){var seekBar=this.getChild('seekBar');if(seekBar){var mouseTimeDisplay=seekBar.getChild('mouseTimeDisplay');var seekBarEl=seekBar.el();var seekBarRect=getBoundingClientRect(seekBarEl);var seekBarPoint=getPointerPosition(seekBarEl,event).x;// The default skin has a gap on either side of the `SeekBar`. This means
// that it's possible to trigger this behavior outside the boundaries of
// the `SeekBar`. This ensures we stay within it at all times.
if(seekBarPoint>1){seekBarPoint=1;}else if(seekBarPoint<0){seekBarPoint=0;}if(mouseTimeDisplay){mouseTimeDisplay.update(seekBarRect,seekBarPoint);}}}/**
   * A throttled version of the {@link ProgressControl#handleMouseSeek} listener.
   *
   * @method ProgressControl#throttledHandleMouseSeek
   * @param {EventTarget~Event} event
   *        The `mousemove` event that caused this function to run.
   *
   * @listen mousemove
   * @listen touchmove
   *//**
   * Handle `mousemove` or `touchmove` events on the `ProgressControl`.
   *
   * @param {EventTarget~Event} event
   *        `mousedown` or `touchstart` event that triggered this function
   *
   * @listens mousemove
   * @listens touchmove
   */;_proto.handleMouseSeek=function handleMouseSeek(event){var seekBar=this.getChild('seekBar');if(seekBar){seekBar.handleMouseMove(event);}}/**
   * Are controls are currently enabled for this progress control.
   *
   * @return {boolean}
   *         true if controls are enabled, false otherwise
   */;_proto.enabled=function enabled(){return this.enabled_;}/**
   * Disable all controls on the progress control and its children
   */;_proto.disable=function disable(){this.children().forEach(function(child){return child.disable&&child.disable();});if(!this.enabled()){return;}this.off(['mousedown','touchstart'],this.handleMouseDown);this.off(this.el_,'mousemove',this.handleMouseMove);this.handleMouseUp();this.addClass('disabled');this.enabled_=false;}/**
   * Enable all controls on the progress control and its children
   */;_proto.enable=function enable(){this.children().forEach(function(child){return child.enable&&child.enable();});if(this.enabled()){return;}this.on(['mousedown','touchstart'],this.handleMouseDown);this.on(this.el_,'mousemove',this.handleMouseMove);this.removeClass('disabled');this.enabled_=true;}/**
   * Handle `mousedown` or `touchstart` events on the `ProgressControl`.
   *
   * @param {EventTarget~Event} event
   *        `mousedown` or `touchstart` event that triggered this function
   *
   * @listens mousedown
   * @listens touchstart
   */;_proto.handleMouseDown=function handleMouseDown(event){var doc=this.el_.ownerDocument;var seekBar=this.getChild('seekBar');if(seekBar){seekBar.handleMouseDown(event);}this.on(doc,'mousemove',this.throttledHandleMouseSeek);this.on(doc,'touchmove',this.throttledHandleMouseSeek);this.on(doc,'mouseup',this.handleMouseUp);this.on(doc,'touchend',this.handleMouseUp);}/**
   * Handle `mouseup` or `touchend` events on the `ProgressControl`.
   *
   * @param {EventTarget~Event} event
   *        `mouseup` or `touchend` event that triggered this function.
   *
   * @listens touchend
   * @listens mouseup
   */;_proto.handleMouseUp=function handleMouseUp(event){var doc=this.el_.ownerDocument;var seekBar=this.getChild('seekBar');if(seekBar){seekBar.handleMouseUp(event);}this.off(doc,'mousemove',this.throttledHandleMouseSeek);this.off(doc,'touchmove',this.throttledHandleMouseSeek);this.off(doc,'mouseup',this.handleMouseUp);this.off(doc,'touchend',this.handleMouseUp);};return ProgressControl;}(Component);/**
 * Default options for `ProgressControl`
 *
 * @type {Object}
 * @private
 */ProgressControl.prototype.options_={children:['seekBar']};Component.registerComponent('ProgressControl',ProgressControl);/**
 * Toggle fullscreen video
 *
 * @extends Button
 */var FullscreenToggle=/*#__PURE__*/function(_Button){_inheritsLoose(FullscreenToggle,_Button);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function FullscreenToggle(player,options){var _this;_this=_Button.call(this,player,options)||this;_this.on(player,'fullscreenchange',_this.handleFullscreenChange);if(_document2.default[FullscreenApi.fullscreenEnabled]===false){_this.disable();}return _this;}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */var _proto=FullscreenToggle.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-fullscreen-control "+_Button.prototype.buildCSSClass.call(this);}/**
   * Handles fullscreenchange on the player and change control text accordingly.
   *
   * @param {EventTarget~Event} [event]
   *        The {@link Player#fullscreenchange} event that caused this function to be
   *        called.
   *
   * @listens Player#fullscreenchange
   */;_proto.handleFullscreenChange=function handleFullscreenChange(event){if(this.player_.isFullscreen()){this.controlText('Non-Fullscreen');}else{this.controlText('Fullscreen');}}/**
   * This gets called when an `FullscreenToggle` is "clicked". See
   * {@link ClickableComponent} for more detailed information on what a click can be.
   *
   * @param {EventTarget~Event} [event]
   *        The `keydown`, `tap`, or `click` event that caused this function to be
   *        called.
   *
   * @listens tap
   * @listens click
   */;_proto.handleClick=function handleClick(event){if(!this.player_.isFullscreen()){this.player_.requestFullscreen();}else{this.player_.exitFullscreen();}};return FullscreenToggle;}(Button);/**
 * The text that should display over the `FullscreenToggle`s controls. Added for localization.
 *
 * @type {string}
 * @private
 */FullscreenToggle.prototype.controlText_='Fullscreen';Component.registerComponent('FullscreenToggle',FullscreenToggle);/**
 * Check if volume control is supported and if it isn't hide the
 * `Component` that was passed  using the `vjs-hidden` class.
 *
 * @param {Component} self
 *        The component that should be hidden if volume is unsupported
 *
 * @param {Player} player
 *        A reference to the player
 *
 * @private
 */var checkVolumeSupport=function checkVolumeSupport(self,player){// hide volume controls when they're not supported by the current tech
if(player.tech_&&!player.tech_.featuresVolumeControl){self.addClass('vjs-hidden');}self.on(player,'loadstart',function(){if(!player.tech_.featuresVolumeControl){self.addClass('vjs-hidden');}else{self.removeClass('vjs-hidden');}});};/**
 * Shows volume level
 *
 * @extends Component
 */var VolumeLevel=/*#__PURE__*/function(_Component){_inheritsLoose(VolumeLevel,_Component);function VolumeLevel(){return _Component.apply(this,arguments)||this;}var _proto=VolumeLevel.prototype;/**
   * Create the `Component`'s DOM element
   *
   * @return {Element}
   *         The element that was created.
   */_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-volume-level',innerHTML:'<span class="vjs-control-text"></span>'});};return VolumeLevel;}(Component);Component.registerComponent('VolumeLevel',VolumeLevel);/**
 * The bar that contains the volume level and can be clicked on to adjust the level
 *
 * @extends Slider
 */var VolumeBar=/*#__PURE__*/function(_Slider){_inheritsLoose(VolumeBar,_Slider);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function VolumeBar(player,options){var _this;_this=_Slider.call(this,player,options)||this;_this.on('slideractive',_this.updateLastVolume_);_this.on(player,'volumechange',_this.updateARIAAttributes);player.ready(function(){return _this.updateARIAAttributes();});return _this;}/**
   * Create the `Component`'s DOM element
   *
   * @return {Element}
   *         The element that was created.
   */var _proto=VolumeBar.prototype;_proto.createEl=function createEl$$1(){return _Slider.prototype.createEl.call(this,'div',{className:'vjs-volume-bar vjs-slider-bar'},{'aria-label':this.localize('Volume Level'),'aria-live':'polite'});}/**
   * Handle mouse down on volume bar
   *
   * @param {EventTarget~Event} event
   *        The `mousedown` event that caused this to run.
   *
   * @listens mousedown
   */;_proto.handleMouseDown=function handleMouseDown(event){if(!isSingleLeftClick(event)){return;}_Slider.prototype.handleMouseDown.call(this,event);}/**
   * Handle movement events on the {@link VolumeMenuButton}.
   *
   * @param {EventTarget~Event} event
   *        The event that caused this function to run.
   *
   * @listens mousemove
   */;_proto.handleMouseMove=function handleMouseMove(event){if(!isSingleLeftClick(event)){return;}this.checkMuted();this.player_.volume(this.calculateDistance(event));}/**
   * If the player is muted unmute it.
   */;_proto.checkMuted=function checkMuted(){if(this.player_.muted()){this.player_.muted(false);}}/**
   * Get percent of volume level
   *
   * @return {number}
   *         Volume level percent as a decimal number.
   */;_proto.getPercent=function getPercent(){if(this.player_.muted()){return 0;}return this.player_.volume();}/**
   * Increase volume level for keyboard users
   */;_proto.stepForward=function stepForward(){this.checkMuted();this.player_.volume(this.player_.volume()+0.1);}/**
   * Decrease volume level for keyboard users
   */;_proto.stepBack=function stepBack(){this.checkMuted();this.player_.volume(this.player_.volume()-0.1);}/**
   * Update ARIA accessibility attributes
   *
   * @param {EventTarget~Event} [event]
   *        The `volumechange` event that caused this function to run.
   *
   * @listens Player#volumechange
   */;_proto.updateARIAAttributes=function updateARIAAttributes(event){var ariaValue=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute('aria-valuenow',ariaValue);this.el_.setAttribute('aria-valuetext',ariaValue+'%');}/**
   * Returns the current value of the player volume as a percentage
   *
   * @private
   */;_proto.volumeAsPercentage_=function volumeAsPercentage_(){return Math.round(this.player_.volume()*100);}/**
   * When user starts dragging the VolumeBar, store the volume and listen for
   * the end of the drag. When the drag ends, if the volume was set to zero,
   * set lastVolume to the stored volume.
   *
   * @listens slideractive
   * @private
   */;_proto.updateLastVolume_=function updateLastVolume_(){var _this2=this;var volumeBeforeDrag=this.player_.volume();this.one('sliderinactive',function(){if(_this2.player_.volume()===0){_this2.player_.lastVolume_(volumeBeforeDrag);}});};return VolumeBar;}(Slider);/**
 * Default options for the `VolumeBar`
 *
 * @type {Object}
 * @private
 */VolumeBar.prototype.options_={children:['volumeLevel'],barName:'volumeLevel'};/**
 * Call the update event for this Slider when this event happens on the player.
 *
 * @type {string}
 */VolumeBar.prototype.playerEvent='volumechange';Component.registerComponent('VolumeBar',VolumeBar);/**
 * The component for controlling the volume level
 *
 * @extends Component
 */var VolumeControl=/*#__PURE__*/function(_Component){_inheritsLoose(VolumeControl,_Component);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options={}]
   *        The key/value store of player options.
   */function VolumeControl(player,options){var _this;if(options===void 0){options={};}options.vertical=options.vertical||false;// Pass the vertical option down to the VolumeBar if
// the VolumeBar is turned on.
if(typeof options.volumeBar==='undefined'||isPlain(options.volumeBar)){options.volumeBar=options.volumeBar||{};options.volumeBar.vertical=options.vertical;}_this=_Component.call(this,player,options)||this;// hide this control if volume support is missing
checkVolumeSupport(_assertThisInitialized(_assertThisInitialized(_this)),player);_this.throttledHandleMouseMove=throttle(bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.handleMouseMove),25);_this.on('mousedown',_this.handleMouseDown);_this.on('touchstart',_this.handleMouseDown);// while the slider is active (the mouse has been pressed down and
// is dragging) or in focus we do not want to hide the VolumeBar
_this.on(_this.volumeBar,['focus','slideractive'],function(){_this.volumeBar.addClass('vjs-slider-active');_this.addClass('vjs-slider-active');_this.trigger('slideractive');});_this.on(_this.volumeBar,['blur','sliderinactive'],function(){_this.volumeBar.removeClass('vjs-slider-active');_this.removeClass('vjs-slider-active');_this.trigger('sliderinactive');});return _this;}/**
   * Create the `Component`'s DOM element
   *
   * @return {Element}
   *         The element that was created.
   */var _proto=VolumeControl.prototype;_proto.createEl=function createEl(){var orientationClass='vjs-volume-horizontal';if(this.options_.vertical){orientationClass='vjs-volume-vertical';}return _Component.prototype.createEl.call(this,'div',{className:"vjs-volume-control vjs-control "+orientationClass});}/**
   * Handle `mousedown` or `touchstart` events on the `VolumeControl`.
   *
   * @param {EventTarget~Event} event
   *        `mousedown` or `touchstart` event that triggered this function
   *
   * @listens mousedown
   * @listens touchstart
   */;_proto.handleMouseDown=function handleMouseDown(event){var doc=this.el_.ownerDocument;this.on(doc,'mousemove',this.throttledHandleMouseMove);this.on(doc,'touchmove',this.throttledHandleMouseMove);this.on(doc,'mouseup',this.handleMouseUp);this.on(doc,'touchend',this.handleMouseUp);}/**
   * Handle `mouseup` or `touchend` events on the `VolumeControl`.
   *
   * @param {EventTarget~Event} event
   *        `mouseup` or `touchend` event that triggered this function.
   *
   * @listens touchend
   * @listens mouseup
   */;_proto.handleMouseUp=function handleMouseUp(event){var doc=this.el_.ownerDocument;this.off(doc,'mousemove',this.throttledHandleMouseMove);this.off(doc,'touchmove',this.throttledHandleMouseMove);this.off(doc,'mouseup',this.handleMouseUp);this.off(doc,'touchend',this.handleMouseUp);}/**
   * Handle `mousedown` or `touchstart` events on the `VolumeControl`.
   *
   * @param {EventTarget~Event} event
   *        `mousedown` or `touchstart` event that triggered this function
   *
   * @listens mousedown
   * @listens touchstart
   */;_proto.handleMouseMove=function handleMouseMove(event){this.volumeBar.handleMouseMove(event);};return VolumeControl;}(Component);/**
 * Default options for the `VolumeControl`
 *
 * @type {Object}
 * @private
 */VolumeControl.prototype.options_={children:['volumeBar']};Component.registerComponent('VolumeControl',VolumeControl);/**
 * Check if muting volume is supported and if it isn't hide the mute toggle
 * button.
 *
 * @param {Component} self
 *        A reference to the mute toggle button
 *
 * @param {Player} player
 *        A reference to the player
 *
 * @private
 */var checkMuteSupport=function checkMuteSupport(self,player){// hide mute toggle button if it's not supported by the current tech
if(player.tech_&&!player.tech_.featuresMuteControl){self.addClass('vjs-hidden');}self.on(player,'loadstart',function(){if(!player.tech_.featuresMuteControl){self.addClass('vjs-hidden');}else{self.removeClass('vjs-hidden');}});};/**
 * A button component for muting the audio.
 *
 * @extends Button
 */var MuteToggle=/*#__PURE__*/function(_Button){_inheritsLoose(MuteToggle,_Button);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function MuteToggle(player,options){var _this;_this=_Button.call(this,player,options)||this;// hide this control if volume support is missing
checkMuteSupport(_assertThisInitialized(_assertThisInitialized(_this)),player);_this.on(player,['loadstart','volumechange'],_this.update);return _this;}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */var _proto=MuteToggle.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-mute-control "+_Button.prototype.buildCSSClass.call(this);}/**
   * This gets called when an `MuteToggle` is "clicked". See
   * {@link ClickableComponent} for more detailed information on what a click can be.
   *
   * @param {EventTarget~Event} [event]
   *        The `keydown`, `tap`, or `click` event that caused this function to be
   *        called.
   *
   * @listens tap
   * @listens click
   */;_proto.handleClick=function handleClick(event){var vol=this.player_.volume();var lastVolume=this.player_.lastVolume_();if(vol===0){var volumeToSet=lastVolume<0.1?0.1:lastVolume;this.player_.volume(volumeToSet);this.player_.muted(false);}else{this.player_.muted(this.player_.muted()?false:true);}}/**
   * Update the `MuteToggle` button based on the state of `volume` and `muted`
   * on the player.
   *
   * @param {EventTarget~Event} [event]
   *        The {@link Player#loadstart} event if this function was called
   *        through an event.
   *
   * @listens Player#loadstart
   * @listens Player#volumechange
   */;_proto.update=function update(event){this.updateIcon_();this.updateControlText_();}/**
   * Update the appearance of the `MuteToggle` icon.
   *
   * Possible states (given `level` variable below):
   * - 0: crossed out
   * - 1: zero bars of volume
   * - 2: one bar of volume
   * - 3: two bars of volume
   *
   * @private
   */;_proto.updateIcon_=function updateIcon_(){var vol=this.player_.volume();var level=3;// in iOS when a player is loaded with muted attribute
// and volume is changed with a native mute button
// we want to make sure muted state is updated
if(IS_IOS&&this.player_.tech_&&this.player_.tech_.el_){this.player_.muted(this.player_.tech_.el_.muted);}if(vol===0||this.player_.muted()){level=0;}else if(vol<0.33){level=1;}else if(vol<0.67){level=2;}// TODO improve muted icon classes
for(var i=0;i<4;i++){removeClass(this.el_,"vjs-vol-"+i);}addClass(this.el_,"vjs-vol-"+level);}/**
   * If `muted` has changed on the player, update the control text
   * (`title` attribute on `vjs-mute-control` element and content of
   * `vjs-control-text` element).
   *
   * @private
   */;_proto.updateControlText_=function updateControlText_(){var soundOff=this.player_.muted()||this.player_.volume()===0;var text=soundOff?'Unmute':'Mute';if(this.controlText()!==text){this.controlText(text);}};return MuteToggle;}(Button);/**
 * The text that should display over the `MuteToggle`s controls. Added for localization.
 *
 * @type {string}
 * @private
 */MuteToggle.prototype.controlText_='Mute';Component.registerComponent('MuteToggle',MuteToggle);/**
 * A Component to contain the MuteToggle and VolumeControl so that
 * they can work together.
 *
 * @extends Component
 */var VolumePanel=/*#__PURE__*/function(_Component){_inheritsLoose(VolumePanel,_Component);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options={}]
   *        The key/value store of player options.
   */function VolumePanel(player,options){var _this;if(options===void 0){options={};}if(typeof options.inline!=='undefined'){options.inline=options.inline;}else{options.inline=true;}// pass the inline option down to the VolumeControl as vertical if
// the VolumeControl is on.
if(typeof options.volumeControl==='undefined'||isPlain(options.volumeControl)){options.volumeControl=options.volumeControl||{};options.volumeControl.vertical=!options.inline;}_this=_Component.call(this,player,options)||this;_this.on(player,['loadstart'],_this.volumePanelState_);// while the slider is active (the mouse has been pressed down and
// is dragging) we do not want to hide the VolumeBar
_this.on(_this.volumeControl,['slideractive'],_this.sliderActive_);_this.on(_this.volumeControl,['sliderinactive'],_this.sliderInactive_);return _this;}/**
   * Add vjs-slider-active class to the VolumePanel
   *
   * @listens VolumeControl#slideractive
   * @private
   */var _proto=VolumePanel.prototype;_proto.sliderActive_=function sliderActive_(){this.addClass('vjs-slider-active');}/**
   * Removes vjs-slider-active class to the VolumePanel
   *
   * @listens VolumeControl#sliderinactive
   * @private
   */;_proto.sliderInactive_=function sliderInactive_(){this.removeClass('vjs-slider-active');}/**
   * Adds vjs-hidden or vjs-mute-toggle-only to the VolumePanel
   * depending on MuteToggle and VolumeControl state
   *
   * @listens Player#loadstart
   * @private
   */;_proto.volumePanelState_=function volumePanelState_(){// hide volume panel if neither volume control or mute toggle
// are displayed
if(this.volumeControl.hasClass('vjs-hidden')&&this.muteToggle.hasClass('vjs-hidden')){this.addClass('vjs-hidden');}// if only mute toggle is visible we don't want
// volume panel expanding when hovered or active
if(this.volumeControl.hasClass('vjs-hidden')&&!this.muteToggle.hasClass('vjs-hidden')){this.addClass('vjs-mute-toggle-only');}}/**
   * Create the `Component`'s DOM element
   *
   * @return {Element}
   *         The element that was created.
   */;_proto.createEl=function createEl(){var orientationClass='vjs-volume-panel-horizontal';if(!this.options_.inline){orientationClass='vjs-volume-panel-vertical';}return _Component.prototype.createEl.call(this,'div',{className:"vjs-volume-panel vjs-control "+orientationClass});};return VolumePanel;}(Component);/**
 * Default options for the `VolumeControl`
 *
 * @type {Object}
 * @private
 */VolumePanel.prototype.options_={children:['muteToggle','volumeControl']};Component.registerComponent('VolumePanel',VolumePanel);/**
 * The Menu component is used to build popup menus, including subtitle and
 * captions selection menus.
 *
 * @extends Component
 */var Menu=/*#__PURE__*/function(_Component){_inheritsLoose(Menu,_Component);/**
   * Create an instance of this class.
   *
   * @param {Player} player
   *        the player that this component should attach to
   *
   * @param {Object} [options]
   *        Object of option names and values
   *
   */function Menu(player,options){var _this;_this=_Component.call(this,player,options)||this;if(options){_this.menuButton_=options.menuButton;}_this.focusedChild_=-1;_this.on('keydown',_this.handleKeyPress);// All the menu item instances share the same blur handler provided by the menu container.
_this.boundHandleBlur_=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.handleBlur);_this.boundHandleTapClick_=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.handleTapClick);return _this;}/**
   * Add event listeners to the {@link MenuItem}.
   *
   * @param {Object} component
   *        The instance of the `MenuItem` to add listeners to.
   *
   */var _proto=Menu.prototype;_proto.addEventListenerForItem=function addEventListenerForItem(component){if(!(component instanceof Component)){return;}this.on(component,'blur',this.boundHandleBlur_);this.on(component,['tap','click'],this.boundHandleTapClick_);}/**
   * Remove event listeners from the {@link MenuItem}.
   *
   * @param {Object} component
   *        The instance of the `MenuItem` to remove listeners.
   *
   */;_proto.removeEventListenerForItem=function removeEventListenerForItem(component){if(!(component instanceof Component)){return;}this.off(component,'blur',this.boundHandleBlur_);this.off(component,['tap','click'],this.boundHandleTapClick_);}/**
   * This method will be called indirectly when the component has been added
   * before the component adds to the new menu instance by `addItem`.
   * In this case, the original menu instance will remove the component
   * by calling `removeChild`.
   *
   * @param {Object} component
   *        The instance of the `MenuItem`
   */;_proto.removeChild=function removeChild(component){if(typeof component==='string'){component=this.getChild(component);}this.removeEventListenerForItem(component);_Component.prototype.removeChild.call(this,component);}/**
   * Add a {@link MenuItem} to the menu.
   *
   * @param {Object|string} component
   *        The name or instance of the `MenuItem` to add.
   *
   */;_proto.addItem=function addItem(component){var childComponent=this.addChild(component);if(childComponent){this.addEventListenerForItem(childComponent);}}/**
   * Create the `Menu`s DOM element.
   *
   * @return {Element}
   *         the element that was created
   */;_proto.createEl=function createEl$$1(){var contentElType=this.options_.contentElType||'ul';this.contentEl_=createEl(contentElType,{className:'vjs-menu-content'});this.contentEl_.setAttribute('role','menu');var el=_Component.prototype.createEl.call(this,'div',{append:this.contentEl_,className:'vjs-menu'});el.appendChild(this.contentEl_);// Prevent clicks from bubbling up. Needed for Menu Buttons,
// where a click on the parent is significant
on(el,'click',function(event){event.preventDefault();event.stopImmediatePropagation();});return el;};_proto.dispose=function dispose(){this.contentEl_=null;this.boundHandleBlur_=null;this.boundHandleTapClick_=null;_Component.prototype.dispose.call(this);}/**
   * Called when a `MenuItem` loses focus.
   *
   * @param {EventTarget~Event} event
   *        The `blur` event that caused this function to be called.
   *
   * @listens blur
   */;_proto.handleBlur=function handleBlur(event){var relatedTarget=event.relatedTarget||_document2.default.activeElement;// Close menu popup when a user clicks outside the menu
if(!this.children().some(function(element){return element.el()===relatedTarget;})){var btn=this.menuButton_;if(btn&&btn.buttonPressed_&&relatedTarget!==btn.el().firstChild){btn.unpressButton();}}}/**
   * Called when a `MenuItem` gets clicked or tapped.
   *
   * @param {EventTarget~Event} event
   *        The `click` or `tap` event that caused this function to be called.
   *
   * @listens click,tap
   */;_proto.handleTapClick=function handleTapClick(event){// Unpress the associated MenuButton, and move focus back to it
if(this.menuButton_){this.menuButton_.unpressButton();var childComponents=this.children();if(!Array.isArray(childComponents)){return;}var foundComponent=childComponents.filter(function(component){return component.el()===event.target;})[0];if(!foundComponent){return;}// don't focus menu button if item is a caption settings item
// because focus will move elsewhere
if(foundComponent.name()!=='CaptionSettingsMenuItem'){this.menuButton_.focus();}}}/**
   * Handle a `keydown` event on this menu. This listener is added in the constructor.
   *
   * @param {EventTarget~Event} event
   *        A `keydown` event that happened on the menu.
   *
   * @listens keydown
   */;_proto.handleKeyPress=function handleKeyPress(event){// Left and Down Arrows
if(_keycode2.default.isEventKey(event,'Left')||_keycode2.default.isEventKey(event,'Down')){event.preventDefault();this.stepForward();// Up and Right Arrows
}else if(_keycode2.default.isEventKey(event,'Right')||_keycode2.default.isEventKey(event,'Up')){event.preventDefault();this.stepBack();}}/**
   * Move to next (lower) menu item for keyboard users.
   */;_proto.stepForward=function stepForward(){var stepChild=0;if(this.focusedChild_!==undefined){stepChild=this.focusedChild_+1;}this.focus(stepChild);}/**
   * Move to previous (higher) menu item for keyboard users.
   */;_proto.stepBack=function stepBack(){var stepChild=0;if(this.focusedChild_!==undefined){stepChild=this.focusedChild_-1;}this.focus(stepChild);}/**
   * Set focus on a {@link MenuItem} in the `Menu`.
   *
   * @param {Object|string} [item=0]
   *        Index of child item set focus on.
   */;_proto.focus=function focus(item){if(item===void 0){item=0;}var children=this.children().slice();var haveTitle=children.length&&children[0].className&&/vjs-menu-title/.test(children[0].className);if(haveTitle){children.shift();}if(children.length>0){if(item<0){item=0;}else if(item>=children.length){item=children.length-1;}this.focusedChild_=item;children[item].el_.focus();}};return Menu;}(Component);Component.registerComponent('Menu',Menu);/**
 * A `MenuButton` class for any popup {@link Menu}.
 *
 * @extends Component
 */var MenuButton=/*#__PURE__*/function(_Component){_inheritsLoose(MenuButton,_Component);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options={}]
   *        The key/value store of player options.
   */function MenuButton(player,options){var _this;if(options===void 0){options={};}_this=_Component.call(this,player,options)||this;_this.menuButton_=new Button(player,options);_this.menuButton_.controlText(_this.controlText_);_this.menuButton_.el_.setAttribute('aria-haspopup','true');// Add buildCSSClass values to the button, not the wrapper
var buttonClass=Button.prototype.buildCSSClass();_this.menuButton_.el_.className=_this.buildCSSClass()+' '+buttonClass;_this.menuButton_.removeClass('vjs-control');_this.addChild(_this.menuButton_);_this.update();_this.enabled_=true;_this.on(_this.menuButton_,'tap',_this.handleClick);_this.on(_this.menuButton_,'click',_this.handleClick);_this.on(_this.menuButton_,'focus',_this.handleFocus);_this.on(_this.menuButton_,'blur',_this.handleBlur);_this.on(_this.menuButton_,'mouseenter',function(){_this.menu.show();});_this.on('keydown',_this.handleSubmenuKeyPress);return _this;}/**
   * Update the menu based on the current state of its items.
   */var _proto=MenuButton.prototype;_proto.update=function update(){var menu=this.createMenu();if(this.menu){this.menu.dispose();this.removeChild(this.menu);}this.menu=menu;this.addChild(menu);/**
     * Track the state of the menu button
     *
     * @type {Boolean}
     * @private
     */this.buttonPressed_=false;this.menuButton_.el_.setAttribute('aria-expanded','false');if(this.items&&this.items.length<=this.hideThreshold_){this.hide();}else{this.show();}}/**
   * Create the menu and add all items to it.
   *
   * @return {Menu}
   *         The constructed menu
   */;_proto.createMenu=function createMenu(){var menu=new Menu(this.player_,{menuButton:this});/**
     * Hide the menu if the number of items is less than or equal to this threshold. This defaults
     * to 0 and whenever we add items which can be hidden to the menu we'll increment it. We list
     * it here because every time we run `createMenu` we need to reset the value.
     *
     * @protected
     * @type {Number}
     */this.hideThreshold_=0;// Add a title list item to the top
if(this.options_.title){var titleEl=createEl('li',{className:'vjs-menu-title',innerHTML:toTitleCase(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var titleComponent=new Component(this.player_,{el:titleEl});menu.addItem(titleComponent);}this.items=this.createItems();if(this.items){// Add menu items to the menu
for(var i=0;i<this.items.length;i++){menu.addItem(this.items[i]);}}return menu;}/**
   * Create the list of menu items. Specific to each subclass.
   *
   * @abstract
   */;_proto.createItems=function createItems(){}/**
   * Create the `MenuButtons`s DOM element.
   *
   * @return {Element}
   *         The element that gets created.
   */;_proto.createEl=function createEl$$1(){return _Component.prototype.createEl.call(this,'div',{className:this.buildWrapperCSSClass()},{});}/**
   * Allow sub components to stack CSS class names for the wrapper element
   *
   * @return {string}
   *         The constructed wrapper DOM `className`
   */;_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){var menuButtonClass='vjs-menu-button';// If the inline option is passed, we want to use different styles altogether.
if(this.options_.inline===true){menuButtonClass+='-inline';}else{menuButtonClass+='-popup';}// TODO: Fix the CSS so that this isn't necessary
var buttonClass=Button.prototype.buildCSSClass();return"vjs-menu-button "+menuButtonClass+" "+buttonClass+" "+_Component.prototype.buildCSSClass.call(this);}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */;_proto.buildCSSClass=function buildCSSClass(){var menuButtonClass='vjs-menu-button';// If the inline option is passed, we want to use different styles altogether.
if(this.options_.inline===true){menuButtonClass+='-inline';}else{menuButtonClass+='-popup';}return"vjs-menu-button "+menuButtonClass+" "+_Component.prototype.buildCSSClass.call(this);}/**
   * Get or set the localized control text that will be used for accessibility.
   *
   * > NOTE: This will come from the internal `menuButton_` element.
   *
   * @param {string} [text]
   *        Control text for element.
   *
   * @param {Element} [el=this.menuButton_.el()]
   *        Element to set the title on.
   *
   * @return {string}
   *         - The control text when getting
   */;_proto.controlText=function controlText(text,el){if(el===void 0){el=this.menuButton_.el();}return this.menuButton_.controlText(text,el);}/**
   * Handle a click on a `MenuButton`.
   * See {@link ClickableComponent#handleClick} for instances where this is called.
   *
   * @param {EventTarget~Event} event
   *        The `keydown`, `tap`, or `click` event that caused this function to be
   *        called.
   *
   * @listens tap
   * @listens click
   */;_proto.handleClick=function handleClick(event){if(this.buttonPressed_){this.unpressButton();}else{this.pressButton();}}/**
   * Set the focus to the actual button, not to this element
   */;_proto.focus=function focus(){this.menuButton_.focus();}/**
   * Remove the focus from the actual button, not this element
   */;_proto.blur=function blur(){this.menuButton_.blur();}/**
   * This gets called when a `MenuButton` gains focus via a `focus` event.
   * Turns on listening for `keydown` events. When they happen it
   * calls `this.handleKeyPress`.
   *
   * @param {EventTarget~Event} event
   *        The `focus` event that caused this function to be called.
   *
   * @listens focus
   */;_proto.handleFocus=function handleFocus(){on(_document2.default,'keydown',bind(this,this.handleKeyPress));}/**
   * Called when a `MenuButton` loses focus. Turns off the listener for
   * `keydown` events. Which Stops `this.handleKeyPress` from getting called.
   *
   * @param {EventTarget~Event} event
   *        The `blur` event that caused this function to be called.
   *
   * @listens blur
   */;_proto.handleBlur=function handleBlur(){off(_document2.default,'keydown',bind(this,this.handleKeyPress));}/**
   * Handle tab, escape, down arrow, and up arrow keys for `MenuButton`. See
   * {@link ClickableComponent#handleKeyPress} for instances where this is called.
   *
   * @param {EventTarget~Event} event
   *        The `keydown` event that caused this function to be called.
   *
   * @listens keydown
   */;_proto.handleKeyPress=function handleKeyPress(event){// Escape or Tab unpress the 'button'
if(_keycode2.default.isEventKey(event,'Esc')||_keycode2.default.isEventKey(event,'Tab')){if(this.buttonPressed_){this.unpressButton();}// Don't preventDefault for Tab key - we still want to lose focus
if(!_keycode2.default.isEventKey(event,'Tab')){event.preventDefault();// Set focus back to the menu button's button
this.menuButton_.focus();}// Up Arrow or Down Arrow also 'press' the button to open the menu
}else if(_keycode2.default.isEventKey(event,'Up')||_keycode2.default.isEventKey(event,'Down')){if(!this.buttonPressed_){event.preventDefault();this.pressButton();}}}/**
   * Handle a `keydown` event on a sub-menu. The listener for this is added in
   * the constructor.
   *
   * @param {EventTarget~Event} event
   *        Key press event
   *
   * @listens keydown
   */;_proto.handleSubmenuKeyPress=function handleSubmenuKeyPress(event){// Escape or Tab unpress the 'button'
if(_keycode2.default.isEventKey(event,'Esc')||_keycode2.default.isEventKey(event,'Tab')){if(this.buttonPressed_){this.unpressButton();}// Don't preventDefault for Tab key - we still want to lose focus
if(!_keycode2.default.isEventKey(event,'Tab')){event.preventDefault();// Set focus back to the menu button's button
this.menuButton_.focus();}}}/**
   * Put the current `MenuButton` into a pressed state.
   */;_proto.pressButton=function pressButton(){if(this.enabled_){this.buttonPressed_=true;this.menu.show();this.menu.lockShowing();this.menuButton_.el_.setAttribute('aria-expanded','true');// set the focus into the submenu, except on iOS where it is resulting in
// undesired scrolling behavior when the player is in an iframe
if(IS_IOS&&isInFrame()){// Return early so that the menu isn't focused
return;}this.menu.focus();}}/**
   * Take the current `MenuButton` out of a pressed state.
   */;_proto.unpressButton=function unpressButton(){if(this.enabled_){this.buttonPressed_=false;this.menu.unlockShowing();this.menu.hide();this.menuButton_.el_.setAttribute('aria-expanded','false');}}/**
   * Disable the `MenuButton`. Don't allow it to be clicked.
   */;_proto.disable=function disable(){this.unpressButton();this.enabled_=false;this.addClass('vjs-disabled');this.menuButton_.disable();}/**
   * Enable the `MenuButton`. Allow it to be clicked.
   */;_proto.enable=function enable(){this.enabled_=true;this.removeClass('vjs-disabled');this.menuButton_.enable();};return MenuButton;}(Component);Component.registerComponent('MenuButton',MenuButton);/**
 * The base class for buttons that toggle specific  track types (e.g. subtitles).
 *
 * @extends MenuButton
 */var TrackButton=/*#__PURE__*/function(_MenuButton){_inheritsLoose(TrackButton,_MenuButton);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function TrackButton(player,options){var _this;var tracks=options.tracks;_this=_MenuButton.call(this,player,options)||this;if(_this.items.length<=1){_this.hide();}if(!tracks){return _assertThisInitialized(_this);}var updateHandler=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.update);tracks.addEventListener('removetrack',updateHandler);tracks.addEventListener('addtrack',updateHandler);_this.player_.on('ready',updateHandler);_this.player_.on('dispose',function(){tracks.removeEventListener('removetrack',updateHandler);tracks.removeEventListener('addtrack',updateHandler);});return _this;}return TrackButton;}(MenuButton);Component.registerComponent('TrackButton',TrackButton);/**
 * @file menu-keys.js
 *//**
  * All keys used for operation of a menu (`MenuButton`, `Menu`, and `MenuItem`)
  * Note that 'Enter' and 'Space' are not included here (otherwise they would
  * prevent the `MenuButton` and `MenuItem` from being keyboard-clickable)
  * @typedef MenuKeys
  * @array
  */var MenuKeys=['Tab','Esc','Up','Down','Right','Left'];/**
 * The component for a menu item. `<li>`
 *
 * @extends ClickableComponent
 */var MenuItem=/*#__PURE__*/function(_ClickableComponent){_inheritsLoose(MenuItem,_ClickableComponent);/**
   * Creates an instance of the this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options={}]
   *        The key/value store of player options.
   *
   */function MenuItem(player,options){var _this;_this=_ClickableComponent.call(this,player,options)||this;_this.selectable=options.selectable;_this.isSelected_=options.selected||false;_this.multiSelectable=options.multiSelectable;_this.selected(_this.isSelected_);if(_this.selectable){if(_this.multiSelectable){_this.el_.setAttribute('role','menuitemcheckbox');}else{_this.el_.setAttribute('role','menuitemradio');}}else{_this.el_.setAttribute('role','menuitem');}return _this;}/**
   * Create the `MenuItem's DOM element
   *
   * @param {string} [type=li]
   *        Element's node type, not actually used, always set to `li`.
   *
   * @param {Object} [props={}]
   *        An object of properties that should be set on the element
   *
   * @param {Object} [attrs={}]
   *        An object of attributes that should be set on the element
   *
   * @return {Element}
   *         The element that gets created.
   */var _proto=MenuItem.prototype;_proto.createEl=function createEl(type,props,attrs){// The control is textual, not just an icon
this.nonIconControl=true;return _ClickableComponent.prototype.createEl.call(this,'li',assign({className:'vjs-menu-item',innerHTML:"<span class=\"vjs-menu-item-text\">"+this.localize(this.options_.label)+"</span>",tabIndex:-1},props),attrs);}/**
   * Ignore keys which are used by the menu, but pass any other ones up. See
   * {@link ClickableComponent#handleKeyPress} for instances where this is called.
   *
   * @param {EventTarget~Event} event
   *        The `keydown` event that caused this function to be called.
   *
   * @listens keydown
   */;_proto.handleKeyPress=function handleKeyPress(event){if(!MenuKeys.some(function(key){return _keycode2.default.isEventKey(event,key);})){// Pass keypress handling up for unused keys
_ClickableComponent.prototype.handleKeyPress.call(this,event);}}/**
   * Any click on a `MenuItem` puts it into the selected state.
   * See {@link ClickableComponent#handleClick} for instances where this is called.
   *
   * @param {EventTarget~Event} event
   *        The `keydown`, `tap`, or `click` event that caused this function to be
   *        called.
   *
   * @listens tap
   * @listens click
   */;_proto.handleClick=function handleClick(event){this.selected(true);}/**
   * Set the state for this menu item as selected or not.
   *
   * @param {boolean} selected
   *        if the menu item is selected or not
   */;_proto.selected=function selected(_selected){if(this.selectable){if(_selected){this.addClass('vjs-selected');this.el_.setAttribute('aria-checked','true');// aria-checked isn't fully supported by browsers/screen readers,
// so indicate selected state to screen reader in the control text.
this.controlText(', selected');this.isSelected_=true;}else{this.removeClass('vjs-selected');this.el_.setAttribute('aria-checked','false');// Indicate un-selected state to screen reader
this.controlText('');this.isSelected_=false;}}};return MenuItem;}(ClickableComponent);Component.registerComponent('MenuItem',MenuItem);/**
 * The specific menu item type for selecting a language within a text track kind
 *
 * @extends MenuItem
 */var TextTrackMenuItem=/*#__PURE__*/function(_MenuItem){_inheritsLoose(TextTrackMenuItem,_MenuItem);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function TextTrackMenuItem(player,options){var _this;var track=options.track;var tracks=player.textTracks();// Modify options for parent MenuItem class's init.
options.label=track.label||track.language||'Unknown';options.selected=track.mode==='showing';_this=_MenuItem.call(this,player,options)||this;_this.track=track;var changeHandler=function changeHandler(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this.handleTracksChange.apply(_assertThisInitialized(_assertThisInitialized(_this)),args);};var selectedLanguageChangeHandler=function selectedLanguageChangeHandler(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this.handleSelectedLanguageChange.apply(_assertThisInitialized(_assertThisInitialized(_this)),args);};player.on(['loadstart','texttrackchange'],changeHandler);tracks.addEventListener('change',changeHandler);tracks.addEventListener('selectedlanguagechange',selectedLanguageChangeHandler);_this.on('dispose',function(){player.off(['loadstart','texttrackchange'],changeHandler);tracks.removeEventListener('change',changeHandler);tracks.removeEventListener('selectedlanguagechange',selectedLanguageChangeHandler);});// iOS7 doesn't dispatch change events to TextTrackLists when an
// associated track's mode changes. Without something like
// Object.observe() (also not present on iOS7), it's not
// possible to detect changes to the mode attribute and polyfill
// the change event. As a poor substitute, we manually dispatch
// change events whenever the controls modify the mode.
if(tracks.onchange===undefined){var event;_this.on(['tap','click'],function(){if(_typeof(_window2.default.Event)!=='object'){// Android 2.3 throws an Illegal Constructor error for window.Event
try{event=new _window2.default.Event('change');}catch(err){// continue regardless of error
}}if(!event){event=_document2.default.createEvent('Event');event.initEvent('change',true,true);}tracks.dispatchEvent(event);});}// set the default state based on current tracks
_this.handleTracksChange();return _this;}/**
   * This gets called when an `TextTrackMenuItem` is "clicked". See
   * {@link ClickableComponent} for more detailed information on what a click can be.
   *
   * @param {EventTarget~Event} event
   *        The `keydown`, `tap`, or `click` event that caused this function to be
   *        called.
   *
   * @listens tap
   * @listens click
   */var _proto=TextTrackMenuItem.prototype;_proto.handleClick=function handleClick(event){var referenceTrack=this.track;var tracks=this.player_.textTracks();_MenuItem.prototype.handleClick.call(this,event);if(!tracks){return;}// Determine the relevant kind(s) of tracks for this component and filter
// out empty kinds.
var kinds=(referenceTrack.kinds||[referenceTrack.kind]).filter(Boolean);for(var i=0;i<tracks.length;i++){var track=tracks[i];// If the track from the text tracks list is not of the right kind,
// skip it. We do not want to affect tracks of incompatible kind(s).
if(kinds.indexOf(track.kind)===-1){continue;}// If this text track is the component's track and it is not showing,
// set it to showing.
if(track===referenceTrack){if(track.mode!=='showing'){track.mode='showing';}// If this text track is not the component's track and it is not
// disabled, set it to disabled.
}else if(track.mode!=='disabled'){track.mode='disabled';}}}/**
   * Handle text track list change
   *
   * @param {EventTarget~Event} event
   *        The `change` event that caused this function to be called.
   *
   * @listens TextTrackList#change
   */;_proto.handleTracksChange=function handleTracksChange(event){var shouldBeSelected=this.track.mode==='showing';// Prevent redundant selected() calls because they may cause
// screen readers to read the appended control text unnecessarily
if(shouldBeSelected!==this.isSelected_){this.selected(shouldBeSelected);}};_proto.handleSelectedLanguageChange=function handleSelectedLanguageChange(event){if(this.track.mode==='showing'){var selectedLanguage=this.player_.cache_.selectedLanguage;// Don't replace the kind of track across the same language
if(selectedLanguage&&selectedLanguage.enabled&&selectedLanguage.language===this.track.language&&selectedLanguage.kind!==this.track.kind){return;}this.player_.cache_.selectedLanguage={enabled:true,language:this.track.language,kind:this.track.kind};}};_proto.dispose=function dispose(){// remove reference to track object on dispose
this.track=null;_MenuItem.prototype.dispose.call(this);};return TextTrackMenuItem;}(MenuItem);Component.registerComponent('TextTrackMenuItem',TextTrackMenuItem);/**
 * A special menu item for turning of a specific type of text track
 *
 * @extends TextTrackMenuItem
 */var OffTextTrackMenuItem=/*#__PURE__*/function(_TextTrackMenuItem){_inheritsLoose(OffTextTrackMenuItem,_TextTrackMenuItem);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function OffTextTrackMenuItem(player,options){// Create pseudo track info
// Requires options['kind']
options.track={player:player,kind:options.kind,kinds:options.kinds,default:false,mode:'disabled'};if(!options.kinds){options.kinds=[options.kind];}if(options.label){options.track.label=options.label;}else{options.track.label=options.kinds.join(' and ')+' off';}// MenuItem is selectable
options.selectable=true;// MenuItem is NOT multiSelectable (i.e. only one can be marked "selected" at a time)
options.multiSelectable=false;return _TextTrackMenuItem.call(this,player,options)||this;}/**
   * Handle text track change
   *
   * @param {EventTarget~Event} event
   *        The event that caused this function to run
   */var _proto=OffTextTrackMenuItem.prototype;_proto.handleTracksChange=function handleTracksChange(event){var tracks=this.player().textTracks();var shouldBeSelected=true;for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(this.options_.kinds.indexOf(track.kind)>-1&&track.mode==='showing'){shouldBeSelected=false;break;}}// Prevent redundant selected() calls because they may cause
// screen readers to read the appended control text unnecessarily
if(shouldBeSelected!==this.isSelected_){this.selected(shouldBeSelected);}};_proto.handleSelectedLanguageChange=function handleSelectedLanguageChange(event){var tracks=this.player().textTracks();var allHidden=true;for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(['captions','descriptions','subtitles'].indexOf(track.kind)>-1&&track.mode==='showing'){allHidden=false;break;}}if(allHidden){this.player_.cache_.selectedLanguage={enabled:false};}};return OffTextTrackMenuItem;}(TextTrackMenuItem);Component.registerComponent('OffTextTrackMenuItem',OffTextTrackMenuItem);/**
 * The base class for buttons that toggle specific text track types (e.g. subtitles)
 *
 * @extends MenuButton
 */var TextTrackButton=/*#__PURE__*/function(_TrackButton){_inheritsLoose(TextTrackButton,_TrackButton);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options={}]
   *        The key/value store of player options.
   */function TextTrackButton(player,options){if(options===void 0){options={};}options.tracks=player.textTracks();return _TrackButton.call(this,player,options)||this;}/**
   * Create a menu item for each text track
   *
   * @param {TextTrackMenuItem[]} [items=[]]
   *        Existing array of items to use during creation
   *
   * @return {TextTrackMenuItem[]}
   *         Array of menu items that were created
   */var _proto=TextTrackButton.prototype;_proto.createItems=function createItems(items,TrackMenuItem){if(items===void 0){items=[];}if(TrackMenuItem===void 0){TrackMenuItem=TextTrackMenuItem;}// Label is an override for the [track] off label
// USed to localise captions/subtitles
var label;if(this.label_){label=this.label_+" off";}// Add an OFF menu item to turn all tracks off
items.push(new OffTextTrackMenuItem(this.player_,{kinds:this.kinds_,kind:this.kind_,label:label}));this.hideThreshold_+=1;var tracks=this.player_.textTracks();if(!Array.isArray(this.kinds_)){this.kinds_=[this.kind_];}for(var i=0;i<tracks.length;i++){var track=tracks[i];// only add tracks that are of an appropriate kind and have a label
if(this.kinds_.indexOf(track.kind)>-1){var item=new TrackMenuItem(this.player_,{track:track,// MenuItem is selectable
selectable:true,// MenuItem is NOT multiSelectable (i.e. only one can be marked "selected" at a time)
multiSelectable:false});item.addClass("vjs-"+track.kind+"-menu-item");items.push(item);}}return items;};return TextTrackButton;}(TrackButton);Component.registerComponent('TextTrackButton',TextTrackButton);/**
 * The chapter track menu item
 *
 * @extends MenuItem
 */var ChaptersTrackMenuItem=/*#__PURE__*/function(_MenuItem){_inheritsLoose(ChaptersTrackMenuItem,_MenuItem);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function ChaptersTrackMenuItem(player,options){var _this;var track=options.track;var cue=options.cue;var currentTime=player.currentTime();// Modify options for parent MenuItem class's init.
options.selectable=true;options.multiSelectable=false;options.label=cue.text;options.selected=cue.startTime<=currentTime&&currentTime<cue.endTime;_this=_MenuItem.call(this,player,options)||this;_this.track=track;_this.cue=cue;track.addEventListener('cuechange',bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.update));return _this;}/**
   * This gets called when an `ChaptersTrackMenuItem` is "clicked". See
   * {@link ClickableComponent} for more detailed information on what a click can be.
   *
   * @param {EventTarget~Event} [event]
   *        The `keydown`, `tap`, or `click` event that caused this function to be
   *        called.
   *
   * @listens tap
   * @listens click
   */var _proto=ChaptersTrackMenuItem.prototype;_proto.handleClick=function handleClick(event){_MenuItem.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime);}/**
   * Update chapter menu item
   *
   * @param {EventTarget~Event} [event]
   *        The `cuechange` event that caused this function to run.
   *
   * @listens TextTrack#cuechange
   */;_proto.update=function update(event){var cue=this.cue;var currentTime=this.player_.currentTime();// vjs.log(currentTime, cue.startTime);
this.selected(cue.startTime<=currentTime&&currentTime<cue.endTime);};return ChaptersTrackMenuItem;}(MenuItem);Component.registerComponent('ChaptersTrackMenuItem',ChaptersTrackMenuItem);/**
 * The button component for toggling and selecting chapters
 * Chapters act much differently than other text tracks
 * Cues are navigation vs. other tracks of alternative languages
 *
 * @extends TextTrackButton
 */var ChaptersButton=/*#__PURE__*/function(_TextTrackButton){_inheritsLoose(ChaptersButton,_TextTrackButton);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   *
   * @param {Component~ReadyCallback} [ready]
   *        The function to call when this function is ready.
   */function ChaptersButton(player,options,ready){return _TextTrackButton.call(this,player,options,ready)||this;}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */var _proto=ChaptersButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-chapters-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-chapters-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);}/**
   * Update the menu based on the current state of its items.
   *
   * @param {EventTarget~Event} [event]
   *        An event that triggered this function to run.
   *
   * @listens TextTrackList#addtrack
   * @listens TextTrackList#removetrack
   * @listens TextTrackList#change
   */;_proto.update=function update(event){if(!this.track_||event&&(event.type==='addtrack'||event.type==='removetrack')){this.setTrack(this.findChaptersTrack());}_TextTrackButton.prototype.update.call(this);}/**
   * Set the currently selected track for the chapters button.
   *
   * @param {TextTrack} track
   *        The new track to select. Nothing will change if this is the currently selected
   *        track.
   */;_proto.setTrack=function setTrack(track){if(this.track_===track){return;}if(!this.updateHandler_){this.updateHandler_=this.update.bind(this);}// here this.track_ refers to the old track instance
if(this.track_){var remoteTextTrackEl=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(remoteTextTrackEl){remoteTextTrackEl.removeEventListener('load',this.updateHandler_);}this.track_=null;}this.track_=track;// here this.track_ refers to the new track instance
if(this.track_){this.track_.mode='hidden';var _remoteTextTrackEl=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(_remoteTextTrackEl){_remoteTextTrackEl.addEventListener('load',this.updateHandler_);}}}/**
   * Find the track object that is currently in use by this ChaptersButton
   *
   * @return {TextTrack|undefined}
   *         The current track or undefined if none was found.
   */;_proto.findChaptersTrack=function findChaptersTrack(){var tracks=this.player_.textTracks()||[];for(var i=tracks.length-1;i>=0;i--){// We will always choose the last track as our chaptersTrack
var track=tracks[i];if(track.kind===this.kind_){return track;}}}/**
   * Get the caption for the ChaptersButton based on the track label. This will also
   * use the current tracks localized kind as a fallback if a label does not exist.
   *
   * @return {string}
   *         The tracks current label or the localized track kind.
   */;_proto.getMenuCaption=function getMenuCaption(){if(this.track_&&this.track_.label){return this.track_.label;}return this.localize(toTitleCase(this.kind_));}/**
   * Create menu from chapter track
   *
   * @return {Menu}
   *         New menu for the chapter buttons
   */;_proto.createMenu=function createMenu(){this.options_.title=this.getMenuCaption();return _TextTrackButton.prototype.createMenu.call(this);}/**
   * Create a menu item for each text track
   *
   * @return {TextTrackMenuItem[]}
   *         Array of menu items
   */;_proto.createItems=function createItems(){var items=[];if(!this.track_){return items;}var cues=this.track_.cues;if(!cues){return items;}for(var i=0,l=cues.length;i<l;i++){var cue=cues[i];var mi=new ChaptersTrackMenuItem(this.player_,{track:this.track_,cue:cue});items.push(mi);}return items;};return ChaptersButton;}(TextTrackButton);/**
 * `kind` of TextTrack to look for to associate it with this menu.
 *
 * @type {string}
 * @private
 */ChaptersButton.prototype.kind_='chapters';/**
 * The text that should display over the `ChaptersButton`s controls. Added for localization.
 *
 * @type {string}
 * @private
 */ChaptersButton.prototype.controlText_='Chapters';Component.registerComponent('ChaptersButton',ChaptersButton);/**
 * The button component for toggling and selecting descriptions
 *
 * @extends TextTrackButton
 */var DescriptionsButton=/*#__PURE__*/function(_TextTrackButton){_inheritsLoose(DescriptionsButton,_TextTrackButton);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   *
   * @param {Component~ReadyCallback} [ready]
   *        The function to call when this component is ready.
   */function DescriptionsButton(player,options,ready){var _this;_this=_TextTrackButton.call(this,player,options,ready)||this;var tracks=player.textTracks();var changeHandler=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.handleTracksChange);tracks.addEventListener('change',changeHandler);_this.on('dispose',function(){tracks.removeEventListener('change',changeHandler);});return _this;}/**
   * Handle text track change
   *
   * @param {EventTarget~Event} event
   *        The event that caused this function to run
   *
   * @listens TextTrackList#change
   */var _proto=DescriptionsButton.prototype;_proto.handleTracksChange=function handleTracksChange(event){var tracks=this.player().textTracks();var disabled=false;// Check whether a track of a different kind is showing
for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(track.kind!==this.kind_&&track.mode==='showing'){disabled=true;break;}}// If another track is showing, disable this menu button
if(disabled){this.disable();}else{this.enable();}}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */;_proto.buildCSSClass=function buildCSSClass(){return"vjs-descriptions-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-descriptions-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};return DescriptionsButton;}(TextTrackButton);/**
 * `kind` of TextTrack to look for to associate it with this menu.
 *
 * @type {string}
 * @private
 */DescriptionsButton.prototype.kind_='descriptions';/**
 * The text that should display over the `DescriptionsButton`s controls. Added for localization.
 *
 * @type {string}
 * @private
 */DescriptionsButton.prototype.controlText_='Descriptions';Component.registerComponent('DescriptionsButton',DescriptionsButton);/**
 * The button component for toggling and selecting subtitles
 *
 * @extends TextTrackButton
 */var SubtitlesButton=/*#__PURE__*/function(_TextTrackButton){_inheritsLoose(SubtitlesButton,_TextTrackButton);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   *
   * @param {Component~ReadyCallback} [ready]
   *        The function to call when this component is ready.
   */function SubtitlesButton(player,options,ready){return _TextTrackButton.call(this,player,options,ready)||this;}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */var _proto=SubtitlesButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-subtitles-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-subtitles-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};return SubtitlesButton;}(TextTrackButton);/**
 * `kind` of TextTrack to look for to associate it with this menu.
 *
 * @type {string}
 * @private
 */SubtitlesButton.prototype.kind_='subtitles';/**
 * The text that should display over the `SubtitlesButton`s controls. Added for localization.
 *
 * @type {string}
 * @private
 */SubtitlesButton.prototype.controlText_='Subtitles';Component.registerComponent('SubtitlesButton',SubtitlesButton);/**
 * The menu item for caption track settings menu
 *
 * @extends TextTrackMenuItem
 */var CaptionSettingsMenuItem=/*#__PURE__*/function(_TextTrackMenuItem){_inheritsLoose(CaptionSettingsMenuItem,_TextTrackMenuItem);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function CaptionSettingsMenuItem(player,options){var _this;options.track={player:player,kind:options.kind,label:options.kind+' settings',selectable:false,default:false,mode:'disabled'};// CaptionSettingsMenuItem has no concept of 'selected'
options.selectable=false;options.name='CaptionSettingsMenuItem';_this=_TextTrackMenuItem.call(this,player,options)||this;_this.addClass('vjs-texttrack-settings');_this.controlText(', opens '+options.kind+' settings dialog');return _this;}/**
   * This gets called when an `CaptionSettingsMenuItem` is "clicked". See
   * {@link ClickableComponent} for more detailed information on what a click can be.
   *
   * @param {EventTarget~Event} [event]
   *        The `keydown`, `tap`, or `click` event that caused this function to be
   *        called.
   *
   * @listens tap
   * @listens click
   */var _proto=CaptionSettingsMenuItem.prototype;_proto.handleClick=function handleClick(event){this.player().getChild('textTrackSettings').open();};return CaptionSettingsMenuItem;}(TextTrackMenuItem);Component.registerComponent('CaptionSettingsMenuItem',CaptionSettingsMenuItem);/**
 * The button component for toggling and selecting captions
 *
 * @extends TextTrackButton
 */var CaptionsButton=/*#__PURE__*/function(_TextTrackButton){_inheritsLoose(CaptionsButton,_TextTrackButton);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   *
   * @param {Component~ReadyCallback} [ready]
   *        The function to call when this component is ready.
   */function CaptionsButton(player,options,ready){return _TextTrackButton.call(this,player,options,ready)||this;}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */var _proto=CaptionsButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-captions-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-captions-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);}/**
   * Create caption menu items
   *
   * @return {CaptionSettingsMenuItem[]}
   *         The array of current menu items.
   */;_proto.createItems=function createItems(){var items=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild('textTrackSettings')){items.push(new CaptionSettingsMenuItem(this.player_,{kind:this.kind_}));this.hideThreshold_+=1;}return _TextTrackButton.prototype.createItems.call(this,items);};return CaptionsButton;}(TextTrackButton);/**
 * `kind` of TextTrack to look for to associate it with this menu.
 *
 * @type {string}
 * @private
 */CaptionsButton.prototype.kind_='captions';/**
 * The text that should display over the `CaptionsButton`s controls. Added for localization.
 *
 * @type {string}
 * @private
 */CaptionsButton.prototype.controlText_='Captions';Component.registerComponent('CaptionsButton',CaptionsButton);/**
 * SubsCapsMenuItem has an [cc] icon to distinguish captions from subtitles
 * in the SubsCapsMenu.
 *
 * @extends TextTrackMenuItem
 */var SubsCapsMenuItem=/*#__PURE__*/function(_TextTrackMenuItem){_inheritsLoose(SubsCapsMenuItem,_TextTrackMenuItem);function SubsCapsMenuItem(){return _TextTrackMenuItem.apply(this,arguments)||this;}var _proto=SubsCapsMenuItem.prototype;_proto.createEl=function createEl(type,props,attrs){var innerHTML="<span class=\"vjs-menu-item-text\">"+this.localize(this.options_.label);if(this.options_.track.kind==='captions'){innerHTML+="\n        <span aria-hidden=\"true\" class=\"vjs-icon-placeholder\"></span>\n        <span class=\"vjs-control-text\"> "+this.localize('Captions')+"</span>\n      ";}innerHTML+='</span>';var el=_TextTrackMenuItem.prototype.createEl.call(this,type,assign({innerHTML:innerHTML},props),attrs);return el;};return SubsCapsMenuItem;}(TextTrackMenuItem);Component.registerComponent('SubsCapsMenuItem',SubsCapsMenuItem);/**
 * The button component for toggling and selecting captions and/or subtitles
 *
 * @extends TextTrackButton
 */var SubsCapsButton=/*#__PURE__*/function(_TextTrackButton){_inheritsLoose(SubsCapsButton,_TextTrackButton);function SubsCapsButton(player,options){var _this;if(options===void 0){options={};}_this=_TextTrackButton.call(this,player,options)||this;// Although North America uses "captions" in most cases for
// "captions and subtitles" other locales use "subtitles"
_this.label_='subtitles';if(['en','en-us','en-ca','fr-ca'].indexOf(_this.player_.language_)>-1){_this.label_='captions';}_this.menuButton_.controlText(toTitleCase(_this.label_));return _this;}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */var _proto=SubsCapsButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-subs-caps-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-subs-caps-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);}/**
   * Create caption/subtitles menu items
   *
   * @return {CaptionSettingsMenuItem[]}
   *         The array of current menu items.
   */;_proto.createItems=function createItems(){var items=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild('textTrackSettings')){items.push(new CaptionSettingsMenuItem(this.player_,{kind:this.label_}));this.hideThreshold_+=1;}items=_TextTrackButton.prototype.createItems.call(this,items,SubsCapsMenuItem);return items;};return SubsCapsButton;}(TextTrackButton);/**
 * `kind`s of TextTrack to look for to associate it with this menu.
 *
 * @type {array}
 * @private
 */SubsCapsButton.prototype.kinds_=['captions','subtitles'];/**
 * The text that should display over the `SubsCapsButton`s controls.
 *
 *
 * @type {string}
 * @private
 */SubsCapsButton.prototype.controlText_='Subtitles';Component.registerComponent('SubsCapsButton',SubsCapsButton);/**
 * An {@link AudioTrack} {@link MenuItem}
 *
 * @extends MenuItem
 */var AudioTrackMenuItem=/*#__PURE__*/function(_MenuItem){_inheritsLoose(AudioTrackMenuItem,_MenuItem);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function AudioTrackMenuItem(player,options){var _this;var track=options.track;var tracks=player.audioTracks();// Modify options for parent MenuItem class's init.
options.label=track.label||track.language||'Unknown';options.selected=track.enabled;_this=_MenuItem.call(this,player,options)||this;_this.track=track;_this.addClass("vjs-"+track.kind+"-menu-item");var changeHandler=function changeHandler(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this.handleTracksChange.apply(_assertThisInitialized(_assertThisInitialized(_this)),args);};tracks.addEventListener('change',changeHandler);_this.on('dispose',function(){tracks.removeEventListener('change',changeHandler);});return _this;}var _proto=AudioTrackMenuItem.prototype;_proto.createEl=function createEl(type,props,attrs){var innerHTML="<span class=\"vjs-menu-item-text\">"+this.localize(this.options_.label);if(this.options_.track.kind==='main-desc'){innerHTML+="\n        <span aria-hidden=\"true\" class=\"vjs-icon-placeholder\"></span>\n        <span class=\"vjs-control-text\"> "+this.localize('Descriptions')+"</span>\n      ";}innerHTML+='</span>';var el=_MenuItem.prototype.createEl.call(this,type,assign({innerHTML:innerHTML},props),attrs);return el;}/**
   * This gets called when an `AudioTrackMenuItem is "clicked". See {@link ClickableComponent}
   * for more detailed information on what a click can be.
   *
   * @param {EventTarget~Event} [event]
   *        The `keydown`, `tap`, or `click` event that caused this function to be
   *        called.
   *
   * @listens tap
   * @listens click
   */;_proto.handleClick=function handleClick(event){var tracks=this.player_.audioTracks();_MenuItem.prototype.handleClick.call(this,event);for(var i=0;i<tracks.length;i++){var track=tracks[i];track.enabled=track===this.track;}}/**
   * Handle any {@link AudioTrack} change.
   *
   * @param {EventTarget~Event} [event]
   *        The {@link AudioTrackList#change} event that caused this to run.
   *
   * @listens AudioTrackList#change
   */;_proto.handleTracksChange=function handleTracksChange(event){this.selected(this.track.enabled);};return AudioTrackMenuItem;}(MenuItem);Component.registerComponent('AudioTrackMenuItem',AudioTrackMenuItem);/**
 * The base class for buttons that toggle specific {@link AudioTrack} types.
 *
 * @extends TrackButton
 */var AudioTrackButton=/*#__PURE__*/function(_TrackButton){_inheritsLoose(AudioTrackButton,_TrackButton);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options={}]
   *        The key/value store of player options.
   */function AudioTrackButton(player,options){if(options===void 0){options={};}options.tracks=player.audioTracks();return _TrackButton.call(this,player,options)||this;}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */var _proto=AudioTrackButton.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-audio-button "+_TrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-audio-button "+_TrackButton.prototype.buildWrapperCSSClass.call(this);}/**
   * Create a menu item for each audio track
   *
   * @param {AudioTrackMenuItem[]} [items=[]]
   *        An array of existing menu items to use.
   *
   * @return {AudioTrackMenuItem[]}
   *         An array of menu items
   */;_proto.createItems=function createItems(items){if(items===void 0){items=[];}// if there's only one audio track, there no point in showing it
this.hideThreshold_=1;var tracks=this.player_.audioTracks();for(var i=0;i<tracks.length;i++){var track=tracks[i];items.push(new AudioTrackMenuItem(this.player_,{track:track,// MenuItem is selectable
selectable:true,// MenuItem is NOT multiSelectable (i.e. only one can be marked "selected" at a time)
multiSelectable:false}));}return items;};return AudioTrackButton;}(TrackButton);/**
 * The text that should display over the `AudioTrackButton`s controls. Added for localization.
 *
 * @type {string}
 * @private
 */AudioTrackButton.prototype.controlText_='Audio Track';Component.registerComponent('AudioTrackButton',AudioTrackButton);/**
 * The specific menu item type for selecting a playback rate.
 *
 * @extends MenuItem
 */var PlaybackRateMenuItem=/*#__PURE__*/function(_MenuItem){_inheritsLoose(PlaybackRateMenuItem,_MenuItem);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function PlaybackRateMenuItem(player,options){var _this;var label=options.rate;var rate=parseFloat(label,10);// Modify options for parent MenuItem class's init.
options.label=label;options.selected=rate===1;options.selectable=true;options.multiSelectable=false;_this=_MenuItem.call(this,player,options)||this;_this.label=label;_this.rate=rate;_this.on(player,'ratechange',_this.update);return _this;}/**
   * This gets called when an `PlaybackRateMenuItem` is "clicked". See
   * {@link ClickableComponent} for more detailed information on what a click can be.
   *
   * @param {EventTarget~Event} [event]
   *        The `keydown`, `tap`, or `click` event that caused this function to be
   *        called.
   *
   * @listens tap
   * @listens click
   */var _proto=PlaybackRateMenuItem.prototype;_proto.handleClick=function handleClick(event){_MenuItem.prototype.handleClick.call(this);this.player().playbackRate(this.rate);}/**
   * Update the PlaybackRateMenuItem when the playbackrate changes.
   *
   * @param {EventTarget~Event} [event]
   *        The `ratechange` event that caused this function to run.
   *
   * @listens Player#ratechange
   */;_proto.update=function update(event){this.selected(this.player().playbackRate()===this.rate);};return PlaybackRateMenuItem;}(MenuItem);/**
 * The text that should display over the `PlaybackRateMenuItem`s controls. Added for localization.
 *
 * @type {string}
 * @private
 */PlaybackRateMenuItem.prototype.contentElType='button';Component.registerComponent('PlaybackRateMenuItem',PlaybackRateMenuItem);/**
 * The component for controlling the playback rate.
 *
 * @extends MenuButton
 */var PlaybackRateMenuButton=/*#__PURE__*/function(_MenuButton){_inheritsLoose(PlaybackRateMenuButton,_MenuButton);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of player options.
   */function PlaybackRateMenuButton(player,options){var _this;_this=_MenuButton.call(this,player,options)||this;_this.updateVisibility();_this.updateLabel();_this.on(player,'loadstart',_this.updateVisibility);_this.on(player,'ratechange',_this.updateLabel);return _this;}/**
   * Create the `Component`'s DOM element
   *
   * @return {Element}
   *         The element that was created.
   */var _proto=PlaybackRateMenuButton.prototype;_proto.createEl=function createEl$$1(){var el=_MenuButton.prototype.createEl.call(this);this.labelEl_=createEl('div',{className:'vjs-playback-rate-value',innerHTML:'1x'});el.appendChild(this.labelEl_);return el;};_proto.dispose=function dispose(){this.labelEl_=null;_MenuButton.prototype.dispose.call(this);}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */;_proto.buildCSSClass=function buildCSSClass(){return"vjs-playback-rate "+_MenuButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-playback-rate "+_MenuButton.prototype.buildWrapperCSSClass.call(this);}/**
   * Create the playback rate menu
   *
   * @return {Menu}
   *         Menu object populated with {@link PlaybackRateMenuItem}s
   */;_proto.createMenu=function createMenu(){var menu=new Menu(this.player());var rates=this.playbackRates();if(rates){for(var i=rates.length-1;i>=0;i--){menu.addChild(new PlaybackRateMenuItem(this.player(),{rate:rates[i]+'x'}));}}return menu;}/**
   * Updates ARIA accessibility attributes
   */;_proto.updateARIAAttributes=function updateARIAAttributes(){// Current playback rate
this.el().setAttribute('aria-valuenow',this.player().playbackRate());}/**
   * This gets called when an `PlaybackRateMenuButton` is "clicked". See
   * {@link ClickableComponent} for more detailed information on what a click can be.
   *
   * @param {EventTarget~Event} [event]
   *        The `keydown`, `tap`, or `click` event that caused this function to be
   *        called.
   *
   * @listens tap
   * @listens click
   */;_proto.handleClick=function handleClick(event){// select next rate option
var currentRate=this.player().playbackRate();var rates=this.playbackRates();// this will select first one if the last one currently selected
var newRate=rates[0];for(var i=0;i<rates.length;i++){if(rates[i]>currentRate){newRate=rates[i];break;}}this.player().playbackRate(newRate);}/**
   * Get possible playback rates
   *
   * @return {Array}
   *         All possible playback rates
   */;_proto.playbackRates=function playbackRates(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates;}/**
   * Get whether playback rates is supported by the tech
   * and an array of playback rates exists
   *
   * @return {boolean}
   *         Whether changing playback rate is supported
   */;_proto.playbackRateSupported=function playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0;}/**
   * Hide playback rate controls when they're no playback rate options to select
   *
   * @param {EventTarget~Event} [event]
   *        The event that caused this function to run.
   *
   * @listens Player#loadstart
   */;_proto.updateVisibility=function updateVisibility(event){if(this.playbackRateSupported()){this.removeClass('vjs-hidden');}else{this.addClass('vjs-hidden');}}/**
   * Update button label when rate changed
   *
   * @param {EventTarget~Event} [event]
   *        The event that caused this function to run.
   *
   * @listens Player#ratechange
   */;_proto.updateLabel=function updateLabel(event){if(this.playbackRateSupported()){this.labelEl_.innerHTML=this.player().playbackRate()+'x';}};return PlaybackRateMenuButton;}(MenuButton);/**
 * The text that should display over the `FullscreenToggle`s controls. Added for localization.
 *
 * @type {string}
 * @private
 */PlaybackRateMenuButton.prototype.controlText_='Playback Rate';Component.registerComponent('PlaybackRateMenuButton',PlaybackRateMenuButton);/**
 * Just an empty spacer element that can be used as an append point for plugins, etc.
 * Also can be used to create space between elements when necessary.
 *
 * @extends Component
 */var Spacer=/*#__PURE__*/function(_Component){_inheritsLoose(Spacer,_Component);function Spacer(){return _Component.apply(this,arguments)||this;}var _proto=Spacer.prototype;/**
  * Builds the default DOM `className`.
  *
  * @return {string}
  *         The DOM `className` for this object.
  */_proto.buildCSSClass=function buildCSSClass(){return"vjs-spacer "+_Component.prototype.buildCSSClass.call(this);}/**
   * Create the `Component`'s DOM element
   *
   * @return {Element}
   *         The element that was created.
   */;_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:this.buildCSSClass()});};return Spacer;}(Component);Component.registerComponent('Spacer',Spacer);/**
 * Spacer specifically meant to be used as an insertion point for new plugins, etc.
 *
 * @extends Spacer
 */var CustomControlSpacer=/*#__PURE__*/function(_Spacer){_inheritsLoose(CustomControlSpacer,_Spacer);function CustomControlSpacer(){return _Spacer.apply(this,arguments)||this;}var _proto=CustomControlSpacer.prototype;/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   */_proto.buildCSSClass=function buildCSSClass(){return"vjs-custom-control-spacer "+_Spacer.prototype.buildCSSClass.call(this);}/**
   * Create the `Component`'s DOM element
   *
   * @return {Element}
   *         The element that was created.
   */;_proto.createEl=function createEl(){var el=_Spacer.prototype.createEl.call(this,{className:this.buildCSSClass()});// No-flex/table-cell mode requires there be some content
// in the cell to fill the remaining space of the table.
el.innerHTML="\xA0";return el;};return CustomControlSpacer;}(Spacer);Component.registerComponent('CustomControlSpacer',CustomControlSpacer);/**
 * Container of main controls.
 *
 * @extends Component
 */var ControlBar=/*#__PURE__*/function(_Component){_inheritsLoose(ControlBar,_Component);function ControlBar(){return _Component.apply(this,arguments)||this;}var _proto=ControlBar.prototype;/**
   * Create the `Component`'s DOM element
   *
   * @return {Element}
   *         The element that was created.
   */_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,'div',{className:'vjs-control-bar',dir:'ltr'});};return ControlBar;}(Component);/**
 * Default options for `ControlBar`
 *
 * @type {Object}
 * @private
 */ControlBar.prototype.options_={children:['playToggle','volumePanel','currentTimeDisplay','timeDivider','durationDisplay','progressControl','liveDisplay','seekToLive','remainingTimeDisplay','customControlSpacer','playbackRateMenuButton','chaptersButton','descriptionsButton','subsCapsButton','audioTrackButton','fullscreenToggle']};Component.registerComponent('ControlBar',ControlBar);/**
 * A display that indicates an error has occurred. This means that the video
 * is unplayable.
 *
 * @extends ModalDialog
 */var ErrorDisplay=/*#__PURE__*/function(_ModalDialog){_inheritsLoose(ErrorDisplay,_ModalDialog);/**
   * Creates an instance of this class.
   *
   * @param  {Player} player
   *         The `Player` that this class should be attached to.
   *
   * @param  {Object} [options]
   *         The key/value store of player options.
   */function ErrorDisplay(player,options){var _this;_this=_ModalDialog.call(this,player,options)||this;_this.on(player,'error',_this.open);return _this;}/**
   * Builds the default DOM `className`.
   *
   * @return {string}
   *         The DOM `className` for this object.
   *
   * @deprecated Since version 5.
   */var _proto=ErrorDisplay.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-error-display "+_ModalDialog.prototype.buildCSSClass.call(this);}/**
   * Gets the localized error message based on the `Player`s error.
   *
   * @return {string}
   *         The `Player`s error message localized or an empty string.
   */;_proto.content=function content(){var error=this.player().error();return error?this.localize(error.message):'';};return ErrorDisplay;}(ModalDialog);/**
 * The default options for an `ErrorDisplay`.
 *
 * @private
 */ErrorDisplay.prototype.options_=mergeOptions(ModalDialog.prototype.options_,{pauseOnOpen:false,fillAlways:true,temporary:false,uncloseable:true});Component.registerComponent('ErrorDisplay',ErrorDisplay);var LOCAL_STORAGE_KEY='vjs-text-track-settings';var COLOR_BLACK=['#000','Black'];var COLOR_BLUE=['#00F','Blue'];var COLOR_CYAN=['#0FF','Cyan'];var COLOR_GREEN=['#0F0','Green'];var COLOR_MAGENTA=['#F0F','Magenta'];var COLOR_RED=['#F00','Red'];var COLOR_WHITE=['#FFF','White'];var COLOR_YELLOW=['#FF0','Yellow'];var OPACITY_OPAQUE=['1','Opaque'];var OPACITY_SEMI=['0.5','Semi-Transparent'];var OPACITY_TRANS=['0','Transparent'];// Configuration for the various <select> elements in the DOM of this component.
//
// Possible keys include:
//
// `default`:
//   The default option index. Only needs to be provided if not zero.
// `parser`:
//   A function which is used to parse the value from the selected option in
//   a customized way.
// `selector`:
//   The selector used to find the associated <select> element.
var selectConfigs={backgroundColor:{selector:'.vjs-bg-color > select',id:'captions-background-color-%s',label:'Color',options:[COLOR_BLACK,COLOR_WHITE,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN]},backgroundOpacity:{selector:'.vjs-bg-opacity > select',id:'captions-background-opacity-%s',label:'Transparency',options:[OPACITY_OPAQUE,OPACITY_SEMI,OPACITY_TRANS]},color:{selector:'.vjs-fg-color > select',id:'captions-foreground-color-%s',label:'Color',options:[COLOR_WHITE,COLOR_BLACK,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN]},edgeStyle:{selector:'.vjs-edge-style > select',id:'%s',label:'Text Edge Style',options:[['none','None'],['raised','Raised'],['depressed','Depressed'],['uniform','Uniform'],['dropshadow','Dropshadow']]},fontFamily:{selector:'.vjs-font-family > select',id:'captions-font-family-%s',label:'Font Family',options:[['proportionalSansSerif','Proportional Sans-Serif'],['monospaceSansSerif','Monospace Sans-Serif'],['proportionalSerif','Proportional Serif'],['monospaceSerif','Monospace Serif'],['casual','Casual'],['script','Script'],['small-caps','Small Caps']]},fontPercent:{selector:'.vjs-font-percent > select',id:'captions-font-size-%s',label:'Font Size',options:[['0.50','50%'],['0.75','75%'],['1.00','100%'],['1.25','125%'],['1.50','150%'],['1.75','175%'],['2.00','200%'],['3.00','300%'],['4.00','400%']],default:2,parser:function parser(v){return v==='1.00'?null:Number(v);}},textOpacity:{selector:'.vjs-text-opacity > select',id:'captions-foreground-opacity-%s',label:'Transparency',options:[OPACITY_OPAQUE,OPACITY_SEMI]},// Options for this object are defined below.
windowColor:{selector:'.vjs-window-color > select',id:'captions-window-color-%s',label:'Color'},// Options for this object are defined below.
windowOpacity:{selector:'.vjs-window-opacity > select',id:'captions-window-opacity-%s',label:'Transparency',options:[OPACITY_TRANS,OPACITY_SEMI,OPACITY_OPAQUE]}};selectConfigs.windowColor.options=selectConfigs.backgroundColor.options;/**
 * Get the actual value of an option.
 *
 * @param  {string} value
 *         The value to get
 *
 * @param  {Function} [parser]
 *         Optional function to adjust the value.
 *
 * @return {Mixed}
 *         - Will be `undefined` if no value exists
 *         - Will be `undefined` if the given value is "none".
 *         - Will be the actual value otherwise.
 *
 * @private
 */function parseOptionValue(value,parser){if(parser){value=parser(value);}if(value&&value!=='none'){return value;}}/**
 * Gets the value of the selected <option> element within a <select> element.
 *
 * @param  {Element} el
 *         the element to look in
 *
 * @param  {Function} [parser]
 *         Optional function to adjust the value.
 *
 * @return {Mixed}
 *         - Will be `undefined` if no value exists
 *         - Will be `undefined` if the given value is "none".
 *         - Will be the actual value otherwise.
 *
 * @private
 */function getSelectedOptionValue(el,parser){var value=el.options[el.options.selectedIndex].value;return parseOptionValue(value,parser);}/**
 * Sets the selected <option> element within a <select> element based on a
 * given value.
 *
 * @param {Element} el
 *        The element to look in.
 *
 * @param {string} value
 *        the property to look on.
 *
 * @param {Function} [parser]
 *        Optional function to adjust the value before comparing.
 *
 * @private
 */function setSelectedOption(el,value,parser){if(!value){return;}for(var i=0;i<el.options.length;i++){if(parseOptionValue(el.options[i].value,parser)===value){el.selectedIndex=i;break;}}}/**
 * Manipulate Text Tracks settings.
 *
 * @extends ModalDialog
 */var TextTrackSettings=/*#__PURE__*/function(_ModalDialog){_inheritsLoose(TextTrackSettings,_ModalDialog);/**
   * Creates an instance of this class.
   *
   * @param {Player} player
   *         The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *         The key/value store of player options.
   */function TextTrackSettings(player,options){var _this;options.temporary=false;_this=_ModalDialog.call(this,player,options)||this;_this.updateDisplay=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.updateDisplay);// fill the modal and pretend we have opened it
_this.fill();_this.hasBeenOpened_=_this.hasBeenFilled_=true;_this.endDialog=createEl('p',{className:'vjs-control-text',textContent:_this.localize('End of dialog window.')});_this.el().appendChild(_this.endDialog);_this.setDefaults();// Grab `persistTextTrackSettings` from the player options if not passed in child options
if(options.persistTextTrackSettings===undefined){_this.options_.persistTextTrackSettings=_this.options_.playerOptions.persistTextTrackSettings;}_this.on(_this.$('.vjs-done-button'),'click',function(){_this.saveSettings();_this.close();});_this.on(_this.$('.vjs-default-button'),'click',function(){_this.setDefaults();_this.updateDisplay();});each(selectConfigs,function(config){_this.on(_this.$(config.selector),'change',_this.updateDisplay);});if(_this.options_.persistTextTrackSettings){_this.restoreSettings();}return _this;}var _proto=TextTrackSettings.prototype;_proto.dispose=function dispose(){this.endDialog=null;_ModalDialog.prototype.dispose.call(this);}/**
   * Create a <select> element with configured options.
   *
   * @param {string} key
   *        Configuration key to use during creation.
   *
   * @return {string}
   *         An HTML string.
   *
   * @private
   */;_proto.createElSelect_=function createElSelect_(key,legendId,type){var _this2=this;if(legendId===void 0){legendId='';}if(type===void 0){type='label';}var config=selectConfigs[key];var id=config.id.replace('%s',this.id_);var selectLabelledbyIds=[legendId,id].join(' ').trim();return["<"+type+" id=\""+id+"\" class=\""+(type==='label'?'vjs-label':'')+"\">",this.localize(config.label),"</"+type+">","<select aria-labelledby=\""+selectLabelledbyIds+"\">"].concat(config.options.map(function(o){var optionId=id+'-'+o[1].replace(/\W+/g,'');return["<option id=\""+optionId+"\" value=\""+o[0]+"\" ","aria-labelledby=\""+selectLabelledbyIds+" "+optionId+"\">",_this2.localize(o[1]),'</option>'].join('');})).concat('</select>').join('');}/**
   * Create foreground color element for the component
   *
   * @return {string}
   *         An HTML string.
   *
   * @private
   */;_proto.createElFgColor_=function createElFgColor_(){var legendId="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">',"<legend id=\""+legendId+"\">",this.localize('Text'),'</legend>',this.createElSelect_('color',legendId),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_('textOpacity',legendId),'</span>','</fieldset>'].join('');}/**
   * Create background color element for the component
   *
   * @return {string}
   *         An HTML string.
   *
   * @private
   */;_proto.createElBgColor_=function createElBgColor_(){var legendId="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">',"<legend id=\""+legendId+"\">",this.localize('Background'),'</legend>',this.createElSelect_('backgroundColor',legendId),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_('backgroundOpacity',legendId),'</span>','</fieldset>'].join('');}/**
   * Create window color element for the component
   *
   * @return {string}
   *         An HTML string.
   *
   * @private
   */;_proto.createElWinColor_=function createElWinColor_(){var legendId="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">',"<legend id=\""+legendId+"\">",this.localize('Window'),'</legend>',this.createElSelect_('windowColor',legendId),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_('windowOpacity',legendId),'</span>','</fieldset>'].join('');}/**
   * Create color elements for the component
   *
   * @return {Element}
   *         The element that was created
   *
   * @private
   */;_proto.createElColors_=function createElColors_(){return createEl('div',{className:'vjs-track-settings-colors',innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join('')});}/**
   * Create font elements for the component
   *
   * @return {Element}
   *         The element that was created.
   *
   * @private
   */;_proto.createElFont_=function createElFont_(){return createEl('div',{className:'vjs-track-settings-font',innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_('fontPercent','','legend'),'</fieldset>','<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_('edgeStyle','','legend'),'</fieldset>','<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_('fontFamily','','legend'),'</fieldset>'].join('')});}/**
   * Create controls for the component
   *
   * @return {Element}
   *         The element that was created.
   *
   * @private
   */;_proto.createElControls_=function createElControls_(){var defaultsDescription=this.localize('restore all settings to the default values');return createEl('div',{className:'vjs-track-settings-controls',innerHTML:["<button type=\"button\" class=\"vjs-default-button\" title=\""+defaultsDescription+"\">",this.localize('Reset'),"<span class=\"vjs-control-text\"> "+defaultsDescription+"</span>",'</button>',"<button type=\"button\" class=\"vjs-done-button\">"+this.localize('Done')+"</button>"].join('')});};_proto.content=function content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()];};_proto.label=function label(){return this.localize('Caption Settings Dialog');};_proto.description=function description(){return this.localize('Beginning of dialog window. Escape will cancel and close the window.');};_proto.buildCSSClass=function buildCSSClass(){return _ModalDialog.prototype.buildCSSClass.call(this)+' vjs-text-track-settings';}/**
   * Gets an object of text track settings (or null).
   *
   * @return {Object}
   *         An object with config values parsed from the DOM or localStorage.
   */;_proto.getValues=function getValues(){var _this3=this;return reduce(selectConfigs,function(accum,config,key){var value=getSelectedOptionValue(_this3.$(config.selector),config.parser);if(value!==undefined){accum[key]=value;}return accum;},{});}/**
   * Sets text track settings from an object of values.
   *
   * @param {Object} values
   *        An object with config values parsed from the DOM or localStorage.
   */;_proto.setValues=function setValues(values){var _this4=this;each(selectConfigs,function(config,key){setSelectedOption(_this4.$(config.selector),values[key],config.parser);});}/**
   * Sets all `<select>` elements to their default values.
   */;_proto.setDefaults=function setDefaults(){var _this5=this;each(selectConfigs,function(config){var index=config.hasOwnProperty('default')?config.default:0;_this5.$(config.selector).selectedIndex=index;});}/**
   * Restore texttrack settings from localStorage
   */;_proto.restoreSettings=function restoreSettings(){var values;try{values=JSON.parse(_window2.default.localStorage.getItem(LOCAL_STORAGE_KEY));}catch(err){log.warn(err);}if(values){this.setValues(values);}}/**
   * Save text track settings to localStorage
   */;_proto.saveSettings=function saveSettings(){if(!this.options_.persistTextTrackSettings){return;}var values=this.getValues();try{if(Object.keys(values).length){_window2.default.localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(values));}else{_window2.default.localStorage.removeItem(LOCAL_STORAGE_KEY);}}catch(err){log.warn(err);}}/**
   * Update display of text track settings
   */;_proto.updateDisplay=function updateDisplay(){var ttDisplay=this.player_.getChild('textTrackDisplay');if(ttDisplay){ttDisplay.updateDisplay();}}/**
   * conditionally blur the element and refocus the captions button
   *
   * @private
   */;_proto.conditionalBlur_=function conditionalBlur_(){this.previouslyActiveEl_=null;this.off(_document2.default,'keydown',this.handleKeyDown);var cb=this.player_.controlBar;var subsCapsBtn=cb&&cb.subsCapsButton;var ccBtn=cb&&cb.captionsButton;if(subsCapsBtn){subsCapsBtn.focus();}else if(ccBtn){ccBtn.focus();}};return TextTrackSettings;}(ModalDialog);Component.registerComponent('TextTrackSettings',TextTrackSettings);/**
 * A Resize Manager. It is in charge of triggering `playerresize` on the player in the right conditions.
 *
 * It'll either create an iframe and use a debounced resize handler on it or use the new {@link https://wicg.github.io/ResizeObserver/|ResizeObserver}.
 *
 * If the ResizeObserver is available natively, it will be used. A polyfill can be passed in as an option.
 * If a `playerresize` event is not needed, the ResizeManager component can be removed from the player, see the example below.
 * @example <caption>How to disable the resize manager</caption>
 * const player = videojs('#vid', {
 *   resizeManager: false
 * });
 *
 * @see {@link https://wicg.github.io/ResizeObserver/|ResizeObserver specification}
 *
 * @extends Component
 */var ResizeManager=/*#__PURE__*/function(_Component){_inheritsLoose(ResizeManager,_Component);/**
   * Create the ResizeManager.
   *
   * @param {Object} player
   *        The `Player` that this class should be attached to.
   *
   * @param {Object} [options]
   *        The key/value store of ResizeManager options.
   *
   * @param {Object} [options.ResizeObserver]
   *        A polyfill for ResizeObserver can be passed in here.
   *        If this is set to null it will ignore the native ResizeObserver and fall back to the iframe fallback.
   */function ResizeManager(player,options){var _this;var RESIZE_OBSERVER_AVAILABLE=options.ResizeObserver||_window2.default.ResizeObserver;// if `null` was passed, we want to disable the ResizeObserver
if(options.ResizeObserver===null){RESIZE_OBSERVER_AVAILABLE=false;}// Only create an element when ResizeObserver isn't available
var options_=mergeOptions({createEl:!RESIZE_OBSERVER_AVAILABLE,reportTouchActivity:false},options);_this=_Component.call(this,player,options_)||this;_this.ResizeObserver=options.ResizeObserver||_window2.default.ResizeObserver;_this.loadListener_=null;_this.resizeObserver_=null;_this.debouncedHandler_=debounce(function(){_this.resizeHandler();},100,false,_assertThisInitialized(_assertThisInitialized(_this)));if(RESIZE_OBSERVER_AVAILABLE){_this.resizeObserver_=new _this.ResizeObserver(_this.debouncedHandler_);_this.resizeObserver_.observe(player.el());}else{_this.loadListener_=function(){if(!_this.el_||!_this.el_.contentWindow){return;}var debouncedHandler_=_this.debouncedHandler_;var unloadListener_=_this.unloadListener_=function(){off(this,'resize',debouncedHandler_);off(this,'unload',unloadListener_);unloadListener_=null;};// safari and edge can unload the iframe before resizemanager dispose
// we have to dispose of event handlers correctly before that happens
on(_this.el_.contentWindow,'unload',unloadListener_);on(_this.el_.contentWindow,'resize',debouncedHandler_);};_this.one('load',_this.loadListener_);}return _this;}var _proto=ResizeManager.prototype;_proto.createEl=function createEl(){return _Component.prototype.createEl.call(this,'iframe',{className:'vjs-resize-manager',tabIndex:-1},{'aria-hidden':'true'});}/**
   * Called when a resize is triggered on the iframe or a resize is observed via the ResizeObserver
   *
   * @fires Player#playerresize
   */;_proto.resizeHandler=function resizeHandler(){/**
     * Called when the player size has changed
     *
     * @event Player#playerresize
     * @type {EventTarget~Event}
     */// make sure player is still around to trigger
// prevents this from causing an error after dispose
if(!this.player_||!this.player_.trigger){return;}this.player_.trigger('playerresize');};_proto.dispose=function dispose(){if(this.debouncedHandler_){this.debouncedHandler_.cancel();}if(this.resizeObserver_){if(this.player_.el()){this.resizeObserver_.unobserve(this.player_.el());}this.resizeObserver_.disconnect();}if(this.loadListener_){this.off('load',this.loadListener_);}if(this.el_&&this.el_.contentWindow&&this.unloadListener_){this.unloadListener_.call(this.el_.contentWindow);}this.ResizeObserver=null;this.resizeObserver=null;this.debouncedHandler_=null;this.loadListener_=null;_Component.prototype.dispose.call(this);};return ResizeManager;}(Component);Component.registerComponent('ResizeManager',ResizeManager);/* track when we are at the live edge, and other helpers for live playback */var LiveTracker=/*#__PURE__*/function(_Component){_inheritsLoose(LiveTracker,_Component);function LiveTracker(player,options){var _this;// LiveTracker does not need an element
var options_=mergeOptions({createEl:false},options);_this=_Component.call(this,player,options_)||this;_this.reset_();_this.on(_this.player_,'durationchange',_this.handleDurationchange);// we don't need to track live playback if the document is hidden,
// also, tracking when the document is hidden can
// cause the CPU to spike and eventually crash the page on IE11.
if(IE_VERSION&&'hidden'in _document2.default&&'visibilityState'in _document2.default){_this.on(_document2.default,'visibilitychange',_this.handleVisibilityChange);}return _this;}var _proto=LiveTracker.prototype;_proto.handleVisibilityChange=function handleVisibilityChange(){if(this.player_.duration()!==Infinity){return;}if(_document2.default.hidden){this.stopTracking();}else{this.startTracking();}};_proto.isBehind_=function isBehind_(){// don't report that we are behind until a timeupdate has been seen
if(!this.timeupdateSeen_){return false;}var liveCurrentTime=this.liveCurrentTime();var currentTime=this.player_.currentTime();var seekableIncrement=this.seekableIncrement_;// the live edge window is the amount of seconds away from live
// that a player can be, but still be considered live.
// we add 0.07 because the live tracking happens every 30ms
// and we want some wiggle room for short segment live playback
var liveEdgeWindow=seekableIncrement*2+0.07;// on Android liveCurrentTime can bee Infinity, because seekableEnd
// can be Infinity, so we handle that case.
return liveCurrentTime!==Infinity&&liveCurrentTime-liveEdgeWindow>=currentTime;}// all the functionality for tracking when seek end changes
// and for tracking how far past seek end we should be
;_proto.trackLive_=function trackLive_(){this.pastSeekEnd_=this.pastSeekEnd_;var seekable=this.player_.seekable();// skip undefined seekable
if(!seekable||!seekable.length){return;}var newSeekEnd=this.seekableEnd();// we can only tell if we are behind live, when seekable changes
// once we detect that seekable has changed we check the new seek
// end against current time, with a fudge value of half a second.
if(newSeekEnd!==this.lastSeekEnd_){if(this.lastSeekEnd_){this.seekableIncrement_=Math.abs(newSeekEnd-this.lastSeekEnd_);}this.pastSeekEnd_=0;this.lastSeekEnd_=newSeekEnd;this.trigger('seekableendchange');}this.pastSeekEnd_=this.pastSeekEnd()+0.03;if(this.isBehind_()!==this.behindLiveEdge()){this.behindLiveEdge_=this.isBehind_();this.trigger('liveedgechange');}}/**
   * handle a durationchange event on the player
   * and start/stop tracking accordingly.
   */;_proto.handleDurationchange=function handleDurationchange(){if(this.player_.duration()===Infinity){this.startTracking();}else{this.stopTracking();}}/**
   * start tracking live playback
   */;_proto.startTracking=function startTracking(){var _this2=this;if(this.isTracking()){return;}this.trackingInterval_=this.setInterval(this.trackLive_,30);this.trackLive_();this.on(this.player_,'play',this.trackLive_);this.on(this.player_,'pause',this.trackLive_);this.one(this.player_,'play',this.handlePlay);// this is to prevent showing that we are not live
// before a video starts to play
if(!this.timeupdateSeen_){this.handleTimeupdate=function(){_this2.timeupdateSeen_=true;_this2.handleTimeupdate=null;};this.one(this.player_,'timeupdate',this.handleTimeupdate);}};_proto.handlePlay=function handlePlay(){this.one(this.player_,'timeupdate',this.seekToLiveEdge);}/**
   * Stop tracking, and set all internal variables to
   * their initial value.
   */;_proto.reset_=function reset_(){this.pastSeekEnd_=0;this.lastSeekEnd_=null;this.behindLiveEdge_=null;this.timeupdateSeen_=false;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.seekableIncrement_=12;this.off(this.player_,'play',this.trackLive_);this.off(this.player_,'pause',this.trackLive_);this.off(this.player_,'play',this.handlePlay);this.off(this.player_,'timeupdate',this.seekToLiveEdge);if(this.handleTimeupdate){this.off(this.player_,'timeupdate',this.handleTimeupdate);this.handleTimeupdate=null;}}/**
   * stop tracking live playback
   */;_proto.stopTracking=function stopTracking(){if(!this.isTracking()){return;}this.reset_();}/**
   * A helper to get the player seekable end
   * so that we don't have to null check everywhere
   */;_proto.seekableEnd=function seekableEnd(){var seekable=this.player_.seekable();var seekableEnds=[];var i=seekable?seekable.length:0;while(i--){seekableEnds.push(seekable.end(i));}// grab the furthest seekable end after sorting, or if there are none
// default to Infinity
return seekableEnds.length?seekableEnds.sort()[seekableEnds.length-1]:Infinity;}/**
   * A helper to get the player seekable start
   * so that we don't have to null check everywhere
   */;_proto.seekableStart=function seekableStart(){var seekable=this.player_.seekable();var seekableStarts=[];var i=seekable?seekable.length:0;while(i--){seekableStarts.push(seekable.start(i));}// grab the first seekable start after sorting, or if there are none
// default to 0
return seekableStarts.length?seekableStarts.sort()[0]:0;}/**
   * Get the live time window
   */;_proto.liveWindow=function liveWindow(){var liveCurrentTime=this.liveCurrentTime();if(liveCurrentTime===Infinity){return Infinity;}return liveCurrentTime-this.seekableStart();}/**
   * Determines if the player is live, only checks if this component
   * is tracking live playback or not
   */;_proto.isLive=function isLive(){return this.isTracking();}/**
   * Determines if currentTime is at the live edge and won't fall behind
   * on each seekableendchange
   */;_proto.atLiveEdge=function atLiveEdge(){return!this.behindLiveEdge();}/**
   * get what we expect the live current time to be
   */;_proto.liveCurrentTime=function liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd();}/**
   * Returns how far past seek end we expect current time to be
   */;_proto.pastSeekEnd=function pastSeekEnd(){return this.pastSeekEnd_;}/**
   * If we are currently behind the live edge, aka currentTime will be
   * behind on a seekableendchange
   */;_proto.behindLiveEdge=function behindLiveEdge(){return this.behindLiveEdge_;};_proto.isTracking=function isTracking(){return typeof this.trackingInterval_==='number';}/**
   * Seek to the live edge if we are behind the live edge
   */;_proto.seekToLiveEdge=function seekToLiveEdge(){if(this.atLiveEdge()){return;}this.player_.currentTime(this.liveCurrentTime());if(this.player_.paused()){this.player_.play();}};_proto.dispose=function dispose(){this.stopTracking();_Component.prototype.dispose.call(this);};return LiveTracker;}(Component);Component.registerComponent('LiveTracker',LiveTracker);/**
 * This function is used to fire a sourceset when there is something
 * similar to `mediaEl.load()` being called. It will try to find the source via
 * the `src` attribute and then the `<source>` elements. It will then fire `sourceset`
 * with the source that was found or empty string if we cannot know. If it cannot
 * find a source then `sourceset` will not be fired.
 *
 * @param {Html5} tech
 *        The tech object that sourceset was setup on
 *
 * @return {boolean}
 *         returns false if the sourceset was not fired and true otherwise.
 */var sourcesetLoad=function sourcesetLoad(tech){var el=tech.el();// if `el.src` is set, that source will be loaded.
if(el.hasAttribute('src')){tech.triggerSourceset(el.src);return true;}/**
   * Since there isn't a src property on the media element, source elements will be used for
   * implementing the source selection algorithm. This happens asynchronously and
   * for most cases were there is more than one source we cannot tell what source will
   * be loaded, without re-implementing the source selection algorithm. At this time we are not
   * going to do that. There are three special cases that we do handle here though:
   *
   * 1. If there are no sources, do not fire `sourceset`.
   * 2. If there is only one `<source>` with a `src` property/attribute that is our `src`
   * 3. If there is more than one `<source>` but all of them have the same `src` url.
   *    That will be our src.
   */var sources=tech.$$('source');var srcUrls=[];var src='';// if there are no sources, do not fire sourceset
if(!sources.length){return false;}// only count valid/non-duplicate source elements
for(var i=0;i<sources.length;i++){var url=sources[i].src;if(url&&srcUrls.indexOf(url)===-1){srcUrls.push(url);}}// there were no valid sources
if(!srcUrls.length){return false;}// there is only one valid source element url
// use that
if(srcUrls.length===1){src=srcUrls[0];}tech.triggerSourceset(src);return true;};/**
 * our implementation of an `innerHTML` descriptor for browsers
 * that do not have one.
 */var innerHTMLDescriptorPolyfill=Object.defineProperty({},'innerHTML',{get:function get(){return this.cloneNode(true).innerHTML;},set:function set(v){// make a dummy node to use innerHTML on
var dummy=_document2.default.createElement(this.nodeName.toLowerCase());// set innerHTML to the value provided
dummy.innerHTML=v;// make a document fragment to hold the nodes from dummy
var docFrag=_document2.default.createDocumentFragment();// copy all of the nodes created by the innerHTML on dummy
// to the document fragment
while(dummy.childNodes.length){docFrag.appendChild(dummy.childNodes[0]);}// remove content
this.innerText='';// now we add all of that html in one by appending the
// document fragment. This is how innerHTML does it.
_window2.default.Element.prototype.appendChild.call(this,docFrag);// then return the result that innerHTML's setter would
return this.innerHTML;}});/**
 * Get a property descriptor given a list of priorities and the
 * property to get.
 */var getDescriptor=function getDescriptor(priority,prop){var descriptor={};for(var i=0;i<priority.length;i++){descriptor=Object.getOwnPropertyDescriptor(priority[i],prop);if(descriptor&&descriptor.set&&descriptor.get){break;}}descriptor.enumerable=true;descriptor.configurable=true;return descriptor;};var getInnerHTMLDescriptor=function getInnerHTMLDescriptor(tech){return getDescriptor([tech.el(),_window2.default.HTMLMediaElement.prototype,_window2.default.Element.prototype,innerHTMLDescriptorPolyfill],'innerHTML');};/**
 * Patches browser internal functions so that we can tell synchronously
 * if a `<source>` was appended to the media element. For some reason this
 * causes a `sourceset` if the the media element is ready and has no source.
 * This happens when:
 * - The page has just loaded and the media element does not have a source.
 * - The media element was emptied of all sources, then `load()` was called.
 *
 * It does this by patching the following functions/properties when they are supported:
 *
 * - `append()` - can be used to add a `<source>` element to the media element
 * - `appendChild()` - can be used to add a `<source>` element to the media element
 * - `insertAdjacentHTML()` -  can be used to add a `<source>` element to the media element
 * - `innerHTML` -  can be used to add a `<source>` element to the media element
 *
 * @param {Html5} tech
 *        The tech object that sourceset is being setup on.
 */var firstSourceWatch=function firstSourceWatch(tech){var el=tech.el();// make sure firstSourceWatch isn't setup twice.
if(el.resetSourceWatch_){return;}var old={};var innerDescriptor=getInnerHTMLDescriptor(tech);var appendWrapper=function appendWrapper(appendFn){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var retval=appendFn.apply(el,args);sourcesetLoad(tech);return retval;};};['append','appendChild','insertAdjacentHTML'].forEach(function(k){if(!el[k]){return;}// store the old function
old[k]=el[k];// call the old function with a sourceset if a source
// was loaded
el[k]=appendWrapper(old[k]);});Object.defineProperty(el,'innerHTML',mergeOptions(innerDescriptor,{set:appendWrapper(innerDescriptor.set)}));el.resetSourceWatch_=function(){el.resetSourceWatch_=null;Object.keys(old).forEach(function(k){el[k]=old[k];});Object.defineProperty(el,'innerHTML',innerDescriptor);};// on the first sourceset, we need to revert our changes
tech.one('sourceset',el.resetSourceWatch_);};/**
 * our implementation of a `src` descriptor for browsers
 * that do not have one.
 */var srcDescriptorPolyfill=Object.defineProperty({},'src',{get:function get(){if(this.hasAttribute('src')){return getAbsoluteURL(_window2.default.Element.prototype.getAttribute.call(this,'src'));}return'';},set:function set(v){_window2.default.Element.prototype.setAttribute.call(this,'src',v);return v;}});var getSrcDescriptor=function getSrcDescriptor(tech){return getDescriptor([tech.el(),_window2.default.HTMLMediaElement.prototype,srcDescriptorPolyfill],'src');};/**
 * setup `sourceset` handling on the `Html5` tech. This function
 * patches the following element properties/functions:
 *
 * - `src` - to determine when `src` is set
 * - `setAttribute()` - to determine when `src` is set
 * - `load()` - this re-triggers the source selection algorithm, and can
 *              cause a sourceset.
 *
 * If there is no source when we are adding `sourceset` support or during a `load()`
 * we also patch the functions listed in `firstSourceWatch`.
 *
 * @param {Html5} tech
 *        The tech to patch
 */var setupSourceset=function setupSourceset(tech){if(!tech.featuresSourceset){return;}var el=tech.el();// make sure sourceset isn't setup twice.
if(el.resetSourceset_){return;}var srcDescriptor=getSrcDescriptor(tech);var oldSetAttribute=el.setAttribute;var oldLoad=el.load;Object.defineProperty(el,'src',mergeOptions(srcDescriptor,{set:function set(v){var retval=srcDescriptor.set.call(el,v);// we use the getter here to get the actual value set on src
tech.triggerSourceset(el.src);return retval;}}));el.setAttribute=function(n,v){var retval=oldSetAttribute.call(el,n,v);if(/src/i.test(n)){tech.triggerSourceset(el.src);}return retval;};el.load=function(){var retval=oldLoad.call(el);// if load was called, but there was no source to fire
// sourceset on. We have to watch for a source append
// as that can trigger a `sourceset` when the media element
// has no source
if(!sourcesetLoad(tech)){tech.triggerSourceset('');firstSourceWatch(tech);}return retval;};if(el.currentSrc){tech.triggerSourceset(el.currentSrc);}else if(!sourcesetLoad(tech)){firstSourceWatch(tech);}el.resetSourceset_=function(){el.resetSourceset_=null;el.load=oldLoad;el.setAttribute=oldSetAttribute;Object.defineProperty(el,'src',srcDescriptor);if(el.resetSourceWatch_){el.resetSourceWatch_();}};};function _templateObject$1(){var data=_taggedTemplateLiteralLoose(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);_templateObject$1=function _templateObject(){return data;};return data;}/**
 * HTML5 Media Controller - Wrapper for HTML5 Media API
 *
 * @mixes Tech~SourceHandlerAdditions
 * @extends Tech
 */var Html5=/*#__PURE__*/function(_Tech){_inheritsLoose(Html5,_Tech);/**
  * Create an instance of this Tech.
  *
  * @param {Object} [options]
  *        The key/value store of player options.
  *
  * @param {Component~ReadyCallback} ready
  *        Callback function to call when the `HTML5` Tech is ready.
  */function Html5(options,ready){var _this;_this=_Tech.call(this,options,ready)||this;var source=options.source;var crossoriginTracks=false;// Set the source if one is provided
// 1) Check if the source is new (if not, we want to keep the original so playback isn't interrupted)
// 2) Check to see if the network state of the tag was failed at init, and if so, reset the source
// anyway so the error gets fired.
if(source&&(_this.el_.currentSrc!==source.src||options.tag&&options.tag.initNetworkState_===3)){_this.setSource(source);}else{_this.handleLateInit_(_this.el_);}// setup sourceset after late sourceset/init
if(options.enableSourceset){_this.setupSourcesetHandling_();}if(_this.el_.hasChildNodes()){var nodes=_this.el_.childNodes;var nodesLength=nodes.length;var removeNodes=[];while(nodesLength--){var node=nodes[nodesLength];var nodeName=node.nodeName.toLowerCase();if(nodeName==='track'){if(!_this.featuresNativeTextTracks){// Empty video tag tracks so the built-in player doesn't use them also.
// This may not be fast enough to stop HTML5 browsers from reading the tags
// so we'll need to turn off any default tracks if we're manually doing
// captions and subtitles. videoElement.textTracks
removeNodes.push(node);}else{// store HTMLTrackElement and TextTrack to remote list
_this.remoteTextTrackEls().addTrackElement_(node);_this.remoteTextTracks().addTrack(node.track);_this.textTracks().addTrack(node.track);if(!crossoriginTracks&&!_this.el_.hasAttribute('crossorigin')&&isCrossOrigin(node.src)){crossoriginTracks=true;}}}}for(var i=0;i<removeNodes.length;i++){_this.el_.removeChild(removeNodes[i]);}}_this.proxyNativeTracks_();if(_this.featuresNativeTextTracks&&crossoriginTracks){log.warn((0,_tsml2.default)(_templateObject$1()));}// prevent iOS Safari from disabling metadata text tracks during native playback
_this.restoreMetadataTracksInIOSNativePlayer_();// Determine if native controls should be used
// Our goal should be to get the custom controls on mobile solid everywhere
// so we can remove this all together. Right now this will block custom
// controls on touch enabled laptops like the Chrome Pixel
if((TOUCH_ENABLED||IS_IPHONE||IS_NATIVE_ANDROID)&&options.nativeControlsForTouch===true){_this.setControls(true);}// on iOS, we want to proxy `webkitbeginfullscreen` and `webkitendfullscreen`
// into a `fullscreenchange` event
_this.proxyWebkitFullscreen_();_this.triggerReady();return _this;}/**
   * Dispose of `HTML5` media element and remove all tracks.
   */var _proto=Html5.prototype;_proto.dispose=function dispose(){if(this.el_&&this.el_.resetSourceset_){this.el_.resetSourceset_();}Html5.disposeMediaElement(this.el_);this.options_=null;// tech will handle clearing of the emulated track list
_Tech.prototype.dispose.call(this);}/**
   * Modify the media element so that we can detect when
   * the source is changed. Fires `sourceset` just after the source has changed
   */;_proto.setupSourcesetHandling_=function setupSourcesetHandling_(){setupSourceset(this);}/**
   * When a captions track is enabled in the iOS Safari native player, all other
   * tracks are disabled (including metadata tracks), which nulls all of their
   * associated cue points. This will restore metadata tracks to their pre-fullscreen
   * state in those cases so that cue points are not needlessly lost.
   *
   * @private
   */;_proto.restoreMetadataTracksInIOSNativePlayer_=function restoreMetadataTracksInIOSNativePlayer_(){var textTracks=this.textTracks();var metadataTracksPreFullscreenState;// captures a snapshot of every metadata track's current state
var takeMetadataTrackSnapshot=function takeMetadataTrackSnapshot(){metadataTracksPreFullscreenState=[];for(var i=0;i<textTracks.length;i++){var track=textTracks[i];if(track.kind==='metadata'){metadataTracksPreFullscreenState.push({track:track,storedMode:track.mode});}}};// snapshot each metadata track's initial state, and update the snapshot
// each time there is a track 'change' event
takeMetadataTrackSnapshot();textTracks.addEventListener('change',takeMetadataTrackSnapshot);this.on('dispose',function(){return textTracks.removeEventListener('change',takeMetadataTrackSnapshot);});var restoreTrackMode=function restoreTrackMode(){for(var i=0;i<metadataTracksPreFullscreenState.length;i++){var storedTrack=metadataTracksPreFullscreenState[i];if(storedTrack.track.mode==='disabled'&&storedTrack.track.mode!==storedTrack.storedMode){storedTrack.track.mode=storedTrack.storedMode;}}// we only want this handler to be executed on the first 'change' event
textTracks.removeEventListener('change',restoreTrackMode);};// when we enter fullscreen playback, stop updating the snapshot and
// restore all track modes to their pre-fullscreen state
this.on('webkitbeginfullscreen',function(){textTracks.removeEventListener('change',takeMetadataTrackSnapshot);// remove the listener before adding it just in case it wasn't previously removed
textTracks.removeEventListener('change',restoreTrackMode);textTracks.addEventListener('change',restoreTrackMode);});// start updating the snapshot again after leaving fullscreen
this.on('webkitendfullscreen',function(){// remove the listener before adding it just in case it wasn't previously removed
textTracks.removeEventListener('change',takeMetadataTrackSnapshot);textTracks.addEventListener('change',takeMetadataTrackSnapshot);// remove the restoreTrackMode handler in case it wasn't triggered during fullscreen playback
textTracks.removeEventListener('change',restoreTrackMode);});}/**
   * Attempt to force override of tracks for the given type
   *
   * @param {string} type - Track type to override, possible values include 'Audio',
   * 'Video', and 'Text'.
   * @param {boolean} override - If set to true native audio/video will be overridden,
   * otherwise native audio/video will potentially be used.
   * @private
   */;_proto.overrideNative_=function overrideNative_(type,override){var _this2=this;// If there is no behavioral change don't add/remove listeners
if(override!==this["featuresNative"+type+"Tracks"]){return;}var lowerCaseType=type.toLowerCase();if(this[lowerCaseType+"TracksListeners_"]){Object.keys(this[lowerCaseType+"TracksListeners_"]).forEach(function(eventName){var elTracks=_this2.el()[lowerCaseType+"Tracks"];elTracks.removeEventListener(eventName,_this2[lowerCaseType+"TracksListeners_"][eventName]);});}this["featuresNative"+type+"Tracks"]=!override;this[lowerCaseType+"TracksListeners_"]=null;this.proxyNativeTracksForType_(lowerCaseType);}/**
   * Attempt to force override of native audio tracks.
   *
   * @param {boolean} override - If set to true native audio will be overridden,
   * otherwise native audio will potentially be used.
   */;_proto.overrideNativeAudioTracks=function overrideNativeAudioTracks(override){this.overrideNative_('Audio',override);}/**
   * Attempt to force override of native video tracks.
   *
   * @param {boolean} override - If set to true native video will be overridden,
   * otherwise native video will potentially be used.
   */;_proto.overrideNativeVideoTracks=function overrideNativeVideoTracks(override){this.overrideNative_('Video',override);}/**
   * Proxy native track list events for the given type to our track
   * lists if the browser we are playing in supports that type of track list.
   *
   * @param {string} name - Track type; values include 'audio', 'video', and 'text'
   * @private
   */;_proto.proxyNativeTracksForType_=function proxyNativeTracksForType_(name){var _this3=this;var props=NORMAL[name];var elTracks=this.el()[props.getterName];var techTracks=this[props.getterName]();if(!this["featuresNative"+props.capitalName+"Tracks"]||!elTracks||!elTracks.addEventListener){return;}var listeners={change:function change(e){techTracks.trigger({type:'change',target:techTracks,currentTarget:techTracks,srcElement:techTracks});},addtrack:function addtrack(e){techTracks.addTrack(e.track);},removetrack:function removetrack(e){techTracks.removeTrack(e.track);}};var removeOldTracks=function removeOldTracks(){var removeTracks=[];for(var i=0;i<techTracks.length;i++){var found=false;for(var j=0;j<elTracks.length;j++){if(elTracks[j]===techTracks[i]){found=true;break;}}if(!found){removeTracks.push(techTracks[i]);}}while(removeTracks.length){techTracks.removeTrack(removeTracks.shift());}};this[props.getterName+'Listeners_']=listeners;Object.keys(listeners).forEach(function(eventName){var listener=listeners[eventName];elTracks.addEventListener(eventName,listener);_this3.on('dispose',function(e){return elTracks.removeEventListener(eventName,listener);});});// Remove (native) tracks that are not used anymore
this.on('loadstart',removeOldTracks);this.on('dispose',function(e){return _this3.off('loadstart',removeOldTracks);});}/**
   * Proxy all native track list events to our track lists if the browser we are playing
   * in supports that type of track list.
   *
   * @private
   */;_proto.proxyNativeTracks_=function proxyNativeTracks_(){var _this4=this;NORMAL.names.forEach(function(name){_this4.proxyNativeTracksForType_(name);});}/**
   * Create the `Html5` Tech's DOM element.
   *
   * @return {Element}
   *         The element that gets created.
   */;_proto.createEl=function createEl$$1(){var el=this.options_.tag;// Check if this browser supports moving the element into the box.
// On the iPhone video will break if you move the element,
// So we have to create a brand new element.
// If we ingested the player div, we do not need to move the media element.
if(!el||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){// If the original tag is still there, clone and remove it.
if(el){var clone=el.cloneNode(true);if(el.parentNode){el.parentNode.insertBefore(clone,el);}Html5.disposeMediaElement(el);el=clone;}else{el=_document2.default.createElement('video');// determine if native controls should be used
var tagAttributes=this.options_.tag&&getAttributes(this.options_.tag);var attributes=mergeOptions({},tagAttributes);if(!TOUCH_ENABLED||this.options_.nativeControlsForTouch!==true){delete attributes.controls;}setAttributes(el,assign(attributes,{id:this.options_.techId,class:'vjs-tech'}));}el.playerId=this.options_.playerId;}if(typeof this.options_.preload!=='undefined'){setAttribute(el,'preload',this.options_.preload);}// Update specific tag settings, in case they were overridden
// `autoplay` has to be *last* so that `muted` and `playsinline` are present
// when iOS/Safari or other browsers attempt to autoplay.
var settingsAttrs=['loop','muted','playsinline','autoplay'];for(var i=0;i<settingsAttrs.length;i++){var attr=settingsAttrs[i];var value=this.options_[attr];if(typeof value!=='undefined'){if(value){setAttribute(el,attr,attr);}else{removeAttribute(el,attr);}el[attr]=value;}}return el;}/**
   * This will be triggered if the loadstart event has already fired, before videojs was
   * ready. Two known examples of when this can happen are:
   * 1. If we're loading the playback object after it has started loading
   * 2. The media is already playing the (often with autoplay on) then
   *
   * This function will fire another loadstart so that videojs can catchup.
   *
   * @fires Tech#loadstart
   *
   * @return {undefined}
   *         returns nothing.
   */;_proto.handleLateInit_=function handleLateInit_(el){if(el.networkState===0||el.networkState===3){// The video element hasn't started loading the source yet
// or didn't find a source
return;}if(el.readyState===0){// NetworkState is set synchronously BUT loadstart is fired at the
// end of the current stack, usually before setInterval(fn, 0).
// So at this point we know loadstart may have already fired or is
// about to fire, and either way the player hasn't seen it yet.
// We don't want to fire loadstart prematurely here and cause a
// double loadstart so we'll wait and see if it happens between now
// and the next loop, and fire it if not.
// HOWEVER, we also want to make sure it fires before loadedmetadata
// which could also happen between now and the next loop, so we'll
// watch for that also.
var loadstartFired=false;var setLoadstartFired=function setLoadstartFired(){loadstartFired=true;};this.on('loadstart',setLoadstartFired);var triggerLoadstart=function triggerLoadstart(){// We did miss the original loadstart. Make sure the player
// sees loadstart before loadedmetadata
if(!loadstartFired){this.trigger('loadstart');}};this.on('loadedmetadata',triggerLoadstart);this.ready(function(){this.off('loadstart',setLoadstartFired);this.off('loadedmetadata',triggerLoadstart);if(!loadstartFired){// We did miss the original native loadstart. Fire it now.
this.trigger('loadstart');}});return;}// From here on we know that loadstart already fired and we missed it.
// The other readyState events aren't as much of a problem if we double
// them, so not going to go to as much trouble as loadstart to prevent
// that unless we find reason to.
var eventsToTrigger=['loadstart'];// loadedmetadata: newly equal to HAVE_METADATA (1) or greater
eventsToTrigger.push('loadedmetadata');// loadeddata: newly increased to HAVE_CURRENT_DATA (2) or greater
if(el.readyState>=2){eventsToTrigger.push('loadeddata');}// canplay: newly increased to HAVE_FUTURE_DATA (3) or greater
if(el.readyState>=3){eventsToTrigger.push('canplay');}// canplaythrough: newly equal to HAVE_ENOUGH_DATA (4)
if(el.readyState>=4){eventsToTrigger.push('canplaythrough');}// We still need to give the player time to add event listeners
this.ready(function(){eventsToTrigger.forEach(function(type){this.trigger(type);},this);});}/**
   * Set current time for the `HTML5` tech.
   *
   * @param {number} seconds
   *        Set the current time of the media to this.
   */;_proto.setCurrentTime=function setCurrentTime(seconds){try{this.el_.currentTime=seconds;}catch(e){log(e,'Video is not ready. (Video.js)');// this.warning(VideoJS.warnings.videoNotReady);
}}/**
   * Get the current duration of the HTML5 media element.
   *
   * @return {number}
   *         The duration of the media or 0 if there is no duration.
   */;_proto.duration=function duration(){var _this5=this;// Android Chrome will report duration as Infinity for VOD HLS until after
// playback has started, which triggers the live display erroneously.
// Return NaN if playback has not started and trigger a durationupdate once
// the duration can be reliably known.
if(this.el_.duration===Infinity&&IS_ANDROID&&IS_CHROME&&this.el_.currentTime===0){// Wait for the first `timeupdate` with currentTime > 0 - there may be
// several with 0
var checkProgress=function checkProgress(){if(_this5.el_.currentTime>0){// Trigger durationchange for genuinely live video
if(_this5.el_.duration===Infinity){_this5.trigger('durationchange');}_this5.off('timeupdate',checkProgress);}};this.on('timeupdate',checkProgress);return NaN;}return this.el_.duration||NaN;}/**
   * Get the current width of the HTML5 media element.
   *
   * @return {number}
   *         The width of the HTML5 media element.
   */;_proto.width=function width(){return this.el_.offsetWidth;}/**
   * Get the current height of the HTML5 media element.
   *
   * @return {number}
   *         The height of the HTML5 media element.
   */;_proto.height=function height(){return this.el_.offsetHeight;}/**
   * Proxy iOS `webkitbeginfullscreen` and `webkitendfullscreen` into
   * `fullscreenchange` event.
   *
   * @private
   * @fires fullscreenchange
   * @listens webkitendfullscreen
   * @listens webkitbeginfullscreen
   * @listens webkitbeginfullscreen
   */;_proto.proxyWebkitFullscreen_=function proxyWebkitFullscreen_(){var _this6=this;if(!('webkitDisplayingFullscreen'in this.el_)){return;}var endFn=function endFn(){this.trigger('fullscreenchange',{isFullscreen:false});};var beginFn=function beginFn(){if('webkitPresentationMode'in this.el_&&this.el_.webkitPresentationMode!=='picture-in-picture'){this.one('webkitendfullscreen',endFn);this.trigger('fullscreenchange',{isFullscreen:true});}};this.on('webkitbeginfullscreen',beginFn);this.on('dispose',function(){_this6.off('webkitbeginfullscreen',beginFn);_this6.off('webkitendfullscreen',endFn);});}/**
   * Check if fullscreen is supported on the current playback device.
   *
   * @return {boolean}
   *         - True if fullscreen is supported.
   *         - False if fullscreen is not supported.
   */;_proto.supportsFullScreen=function supportsFullScreen(){if(typeof this.el_.webkitEnterFullScreen==='function'){var userAgent=_window2.default.navigator&&_window2.default.navigator.userAgent||'';// Seems to be broken in Chromium/Chrome && Safari in Leopard
if(/Android/.test(userAgent)||!/Chrome|Mac OS X 10.5/.test(userAgent)){return true;}}return false;}/**
   * Request that the `HTML5` Tech enter fullscreen.
   */;_proto.enterFullScreen=function enterFullScreen(){var video=this.el_;if(video.paused&&video.networkState<=video.HAVE_METADATA){// attempt to prime the video element for programmatic access
// this isn't necessary on the desktop but shouldn't hurt
this.el_.play();// playing and pausing synchronously during the transition to fullscreen
// can get iOS ~6.1 devices into a play/pause loop
this.setTimeout(function(){video.pause();video.webkitEnterFullScreen();},0);}else{video.webkitEnterFullScreen();}}/**
   * Request that the `HTML5` Tech exit fullscreen.
   */;_proto.exitFullScreen=function exitFullScreen(){this.el_.webkitExitFullScreen();}/**
   * A getter/setter for the `Html5` Tech's source object.
   * > Note: Please use {@link Html5#setSource}
   *
   * @param {Tech~SourceObject} [src]
   *        The source object you want to set on the `HTML5` techs element.
   *
   * @return {Tech~SourceObject|undefined}
   *         - The current source object when a source is not passed in.
   *         - undefined when setting
   *
   * @deprecated Since version 5.
   */;_proto.src=function src(_src){if(_src===undefined){return this.el_.src;}// Setting src through `src` instead of `setSrc` will be deprecated
this.setSrc(_src);}/**
   * Reset the tech by removing all sources and then calling
   * {@link Html5.resetMediaElement}.
   */;_proto.reset=function reset(){Html5.resetMediaElement(this.el_);}/**
   * Get the current source on the `HTML5` Tech. Falls back to returning the source from
   * the HTML5 media element.
   *
   * @return {Tech~SourceObject}
   *         The current source object from the HTML5 tech. With a fallback to the
   *         elements source.
   */;_proto.currentSrc=function currentSrc(){if(this.currentSource_){return this.currentSource_.src;}return this.el_.currentSrc;}/**
   * Set controls attribute for the HTML5 media Element.
   *
   * @param {string} val
   *        Value to set the controls attribute to
   */;_proto.setControls=function setControls(val){this.el_.controls=!!val;}/**
   * Create and returns a remote {@link TextTrack} object.
   *
   * @param {string} kind
   *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata)
   *
   * @param {string} [label]
   *        Label to identify the text track
   *
   * @param {string} [language]
   *        Two letter language abbreviation
   *
   * @return {TextTrack}
   *         The TextTrack that gets created.
   */;_proto.addTextTrack=function addTextTrack(kind,label,language){if(!this.featuresNativeTextTracks){return _Tech.prototype.addTextTrack.call(this,kind,label,language);}return this.el_.addTextTrack(kind,label,language);}/**
   * Creates either native TextTrack or an emulated TextTrack depending
   * on the value of `featuresNativeTextTracks`
   *
   * @param {Object} options
   *        The object should contain the options to initialize the TextTrack with.
   *
   * @param {string} [options.kind]
   *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata).
   *
   * @param {string} [options.label]
   *        Label to identify the text track
   *
   * @param {string} [options.language]
   *        Two letter language abbreviation.
   *
   * @param {boolean} [options.default]
   *        Default this track to on.
   *
   * @param {string} [options.id]
   *        The internal id to assign this track.
   *
   * @param {string} [options.src]
   *        A source url for the track.
   *
   * @return {HTMLTrackElement}
   *         The track element that gets created.
   */;_proto.createRemoteTextTrack=function createRemoteTextTrack(options){if(!this.featuresNativeTextTracks){return _Tech.prototype.createRemoteTextTrack.call(this,options);}var htmlTrackElement=_document2.default.createElement('track');if(options.kind){htmlTrackElement.kind=options.kind;}if(options.label){htmlTrackElement.label=options.label;}if(options.language||options.srclang){htmlTrackElement.srclang=options.language||options.srclang;}if(options.default){htmlTrackElement.default=options.default;}if(options.id){htmlTrackElement.id=options.id;}if(options.src){htmlTrackElement.src=options.src;}return htmlTrackElement;}/**
   * Creates a remote text track object and returns an html track element.
   *
   * @param {Object} options The object should contain values for
   * kind, language, label, and src (location of the WebVTT file)
   * @param {boolean} [manualCleanup=true] if set to false, the TextTrack will be
   * automatically removed from the video element whenever the source changes
   * @return {HTMLTrackElement} An Html Track Element.
   * This can be an emulated {@link HTMLTrackElement} or a native one.
   * @deprecated The default value of the "manualCleanup" parameter will default
   * to "false" in upcoming versions of Video.js
   */;_proto.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){var htmlTrackElement=_Tech.prototype.addRemoteTextTrack.call(this,options,manualCleanup);if(this.featuresNativeTextTracks){this.el().appendChild(htmlTrackElement);}return htmlTrackElement;}/**
   * Remove remote `TextTrack` from `TextTrackList` object
   *
   * @param {TextTrack} track
   *        `TextTrack` object to remove
   */;_proto.removeRemoteTextTrack=function removeRemoteTextTrack(track){_Tech.prototype.removeRemoteTextTrack.call(this,track);if(this.featuresNativeTextTracks){var tracks=this.$$('track');var i=tracks.length;while(i--){if(track===tracks[i]||track===tracks[i].track){this.el().removeChild(tracks[i]);}}}}/**
   * Gets available media playback quality metrics as specified by the W3C's Media
   * Playback Quality API.
   *
   * @see [Spec]{@link https://wicg.github.io/media-playback-quality}
   *
   * @return {Object}
   *         An object with supported media playback quality metrics
   */;_proto.getVideoPlaybackQuality=function getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality==='function'){return this.el().getVideoPlaybackQuality();}var videoPlaybackQuality={};if(typeof this.el().webkitDroppedFrameCount!=='undefined'&&typeof this.el().webkitDecodedFrameCount!=='undefined'){videoPlaybackQuality.droppedVideoFrames=this.el().webkitDroppedFrameCount;videoPlaybackQuality.totalVideoFrames=this.el().webkitDecodedFrameCount;}if(_window2.default.performance&&typeof _window2.default.performance.now==='function'){videoPlaybackQuality.creationTime=_window2.default.performance.now();}else if(_window2.default.performance&&_window2.default.performance.timing&&typeof _window2.default.performance.timing.navigationStart==='number'){videoPlaybackQuality.creationTime=_window2.default.Date.now()-_window2.default.performance.timing.navigationStart;}return videoPlaybackQuality;};return Html5;}(Tech);/* HTML5 Support Testing ---------------------------------------------------- */if(isReal()){/**
   * Element for testing browser HTML5 media capabilities
   *
   * @type {Element}
   * @constant
   * @private
   */Html5.TEST_VID=_document2.default.createElement('video');var track=_document2.default.createElement('track');track.kind='captions';track.srclang='en';track.label='English';Html5.TEST_VID.appendChild(track);}/**
 * Check if HTML5 media is supported by this browser/device.
 *
 * @return {boolean}
 *         - True if HTML5 media is supported.
 *         - False if HTML5 media is not supported.
 */Html5.isSupported=function(){// IE with no Media Player is a LIAR! (#984)
try{Html5.TEST_VID.volume=0.5;}catch(e){return false;}return!!(Html5.TEST_VID&&Html5.TEST_VID.canPlayType);};/**
 * Check if the tech can support the given type
 *
 * @param {string} type
 *        The mimetype to check
 * @return {string} 'probably', 'maybe', or '' (empty string)
 */Html5.canPlayType=function(type){return Html5.TEST_VID.canPlayType(type);};/**
 * Check if the tech can support the given source
 *
 * @param {Object} srcObj
 *        The source object
 * @param {Object} options
 *        The options passed to the tech
 * @return {string} 'probably', 'maybe', or '' (empty string)
 */Html5.canPlaySource=function(srcObj,options){return Html5.canPlayType(srcObj.type);};/**
 * Check if the volume can be changed in this browser/device.
 * Volume cannot be changed in a lot of mobile devices.
 * Specifically, it can't be changed from 1 on iOS.
 *
 * @return {boolean}
 *         - True if volume can be controlled
 *         - False otherwise
 */Html5.canControlVolume=function(){// IE will error if Windows Media Player not installed #3315
try{var volume=Html5.TEST_VID.volume;Html5.TEST_VID.volume=volume/2+0.1;return volume!==Html5.TEST_VID.volume;}catch(e){return false;}};/**
 * Check if the volume can be muted in this browser/device.
 * Some devices, e.g. iOS, don't allow changing volume
 * but permits muting/unmuting.
 *
 * @return {bolean}
 *      - True if volume can be muted
 *      - False otherwise
 */Html5.canMuteVolume=function(){try{var muted=Html5.TEST_VID.muted;// in some versions of iOS muted property doesn't always
// work, so we want to set both property and attribute
Html5.TEST_VID.muted=!muted;if(Html5.TEST_VID.muted){setAttribute(Html5.TEST_VID,'muted','muted');}else{removeAttribute(Html5.TEST_VID,'muted','muted');}return muted!==Html5.TEST_VID.muted;}catch(e){return false;}};/**
 * Check if the playback rate can be changed in this browser/device.
 *
 * @return {boolean}
 *         - True if playback rate can be controlled
 *         - False otherwise
 */Html5.canControlPlaybackRate=function(){// Playback rate API is implemented in Android Chrome, but doesn't do anything
// https://github.com/videojs/video.js/issues/3180
if(IS_ANDROID&&IS_CHROME&&CHROME_VERSION<58){return false;}// IE will error if Windows Media Player not installed #3315
try{var playbackRate=Html5.TEST_VID.playbackRate;Html5.TEST_VID.playbackRate=playbackRate/2+0.1;return playbackRate!==Html5.TEST_VID.playbackRate;}catch(e){return false;}};/**
 * Check if we can override a video/audio elements attributes, with
 * Object.defineProperty.
 *
 * @return {boolean}
 *         - True if builtin attributes can be overridden
 *         - False otherwise
 */Html5.canOverrideAttributes=function(){// if we cannot overwrite the src/innerHTML property, there is no support
// iOS 7 safari for instance cannot do this.
try{var noop=function noop(){};Object.defineProperty(_document2.default.createElement('video'),'src',{get:noop,set:noop});Object.defineProperty(_document2.default.createElement('audio'),'src',{get:noop,set:noop});Object.defineProperty(_document2.default.createElement('video'),'innerHTML',{get:noop,set:noop});Object.defineProperty(_document2.default.createElement('audio'),'innerHTML',{get:noop,set:noop});}catch(e){return false;}return true;};/**
 * Check to see if native `TextTrack`s are supported by this browser/device.
 *
 * @return {boolean}
 *         - True if native `TextTrack`s are supported.
 *         - False otherwise
 */Html5.supportsNativeTextTracks=function(){return IS_ANY_SAFARI||IS_IOS&&IS_CHROME;};/**
 * Check to see if native `VideoTrack`s are supported by this browser/device
 *
 * @return {boolean}
 *        - True if native `VideoTrack`s are supported.
 *        - False otherwise
 */Html5.supportsNativeVideoTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.videoTracks);};/**
 * Check to see if native `AudioTrack`s are supported by this browser/device
 *
 * @return {boolean}
 *        - True if native `AudioTrack`s are supported.
 *        - False otherwise
 */Html5.supportsNativeAudioTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.audioTracks);};/**
 * An array of events available on the Html5 tech.
 *
 * @private
 * @type {Array}
 */Html5.Events=['loadstart','suspend','abort','error','emptied','stalled','loadedmetadata','loadeddata','canplay','canplaythrough','playing','waiting','seeking','seeked','ended','durationchange','timeupdate','progress','play','pause','ratechange','resize','volumechange'];/**
 * Boolean indicating whether the `Tech` supports volume control.
 *
 * @type {boolean}
 * @default {@link Html5.canControlVolume}
 */Html5.prototype.featuresVolumeControl=Html5.canControlVolume();/**
 * Boolean indicating whether the `Tech` supports muting volume.
 *
 * @type {bolean}
 * @default {@link Html5.canMuteVolume}
 */Html5.prototype.featuresMuteControl=Html5.canMuteVolume();/**
 * Boolean indicating whether the `Tech` supports changing the speed at which the media
 * plays. Examples:
 *   - Set player to play 2x (twice) as fast
 *   - Set player to play 0.5x (half) as fast
 *
 * @type {boolean}
 * @default {@link Html5.canControlPlaybackRate}
 */Html5.prototype.featuresPlaybackRate=Html5.canControlPlaybackRate();/**
 * Boolean indicating whether the `Tech` supports the `sourceset` event.
 *
 * @type {boolean}
 * @default
 */Html5.prototype.featuresSourceset=Html5.canOverrideAttributes();/**
 * Boolean indicating whether the `HTML5` tech currently supports the media element
 * moving in the DOM. iOS breaks if you move the media element, so this is set this to
 * false there. Everywhere else this should be true.
 *
 * @type {boolean}
 * @default
 */Html5.prototype.movingMediaElementInDOM=!IS_IOS;// TODO: Previous comment: No longer appears to be used. Can probably be removed.
//       Is this true?
/**
 * Boolean indicating whether the `HTML5` tech currently supports automatic media resize
 * when going into fullscreen.
 *
 * @type {boolean}
 * @default
 */Html5.prototype.featuresFullscreenResize=true;/**
 * Boolean indicating whether the `HTML5` tech currently supports the progress event.
 * If this is false, manual `progress` events will be triggered instead.
 *
 * @type {boolean}
 * @default
 */Html5.prototype.featuresProgressEvents=true;/**
 * Boolean indicating whether the `HTML5` tech currently supports the timeupdate event.
 * If this is false, manual `timeupdate` events will be triggered instead.
 *
 * @default
 */Html5.prototype.featuresTimeupdateEvents=true;/**
 * Boolean indicating whether the `HTML5` tech currently supports native `TextTrack`s.
 *
 * @type {boolean}
 * @default {@link Html5.supportsNativeTextTracks}
 */Html5.prototype.featuresNativeTextTracks=Html5.supportsNativeTextTracks();/**
 * Boolean indicating whether the `HTML5` tech currently supports native `VideoTrack`s.
 *
 * @type {boolean}
 * @default {@link Html5.supportsNativeVideoTracks}
 */Html5.prototype.featuresNativeVideoTracks=Html5.supportsNativeVideoTracks();/**
 * Boolean indicating whether the `HTML5` tech currently supports native `AudioTrack`s.
 *
 * @type {boolean}
 * @default {@link Html5.supportsNativeAudioTracks}
 */Html5.prototype.featuresNativeAudioTracks=Html5.supportsNativeAudioTracks();// HTML5 Feature detection and Device Fixes --------------------------------- //
var canPlayType=Html5.TEST_VID&&Html5.TEST_VID.constructor.prototype.canPlayType;var mpegurlRE=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;Html5.patchCanPlayType=function(){// Android 4.0 and above can play HLS to some extent but it reports being unable to do so
// Firefox and Chrome report correctly
if(ANDROID_VERSION>=4.0&&!IS_FIREFOX&&!IS_CHROME){Html5.TEST_VID.constructor.prototype.canPlayType=function(type){if(type&&mpegurlRE.test(type)){return'maybe';}return canPlayType.call(this,type);};}};Html5.unpatchCanPlayType=function(){var r=Html5.TEST_VID.constructor.prototype.canPlayType;Html5.TEST_VID.constructor.prototype.canPlayType=canPlayType;return r;};// by default, patch the media element
Html5.patchCanPlayType();Html5.disposeMediaElement=function(el){if(!el){return;}if(el.parentNode){el.parentNode.removeChild(el);}// remove any child track or source nodes to prevent their loading
while(el.hasChildNodes()){el.removeChild(el.firstChild);}// remove any src reference. not setting `src=''` because that causes a warning
// in firefox
el.removeAttribute('src');// force the media element to update its loading state by calling load()
// however IE on Windows 7N has a bug that throws an error so need a try/catch (#793)
if(typeof el.load==='function'){// wrapping in an iife so it's not deoptimized (#1060#discussion_r10324473)
(function(){try{el.load();}catch(e){// not supported
}})();}};Html5.resetMediaElement=function(el){if(!el){return;}var sources=el.querySelectorAll('source');var i=sources.length;while(i--){el.removeChild(sources[i]);}// remove any src reference.
// not setting `src=''` because that throws an error
el.removeAttribute('src');if(typeof el.load==='function'){// wrapping in an iife so it's not deoptimized (#1060#discussion_r10324473)
(function(){try{el.load();}catch(e){// satisfy linter
}})();}};/* Native HTML5 element property wrapping ----------------------------------- */// Wrap native boolean attributes with getters that check both property and attribute
// The list is as followed:
// muted, defaultMuted, autoplay, controls, loop, playsinline
[/**
 * Get the value of `muted` from the media element. `muted` indicates
 * that the volume for the media should be set to silent. This does not actually change
 * the `volume` attribute.
 *
 * @method Html5#muted
 * @return {boolean}
 *         - True if the value of `volume` should be ignored and the audio set to silent.
 *         - False if the value of `volume` should be used.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-muted}
 */'muted',/**
 * Get the value of `defaultMuted` from the media element. `defaultMuted` indicates
 * whether the media should start muted or not. Only changes the default state of the
 * media. `muted` and `defaultMuted` can have different values. {@link Html5#muted} indicates the
 * current state.
 *
 * @method Html5#defaultMuted
 * @return {boolean}
 *         - The value of `defaultMuted` from the media element.
 *         - True indicates that the media should start muted.
 *         - False indicates that the media should not start muted
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-defaultmuted}
 */'defaultMuted',/**
 * Get the value of `autoplay` from the media element. `autoplay` indicates
 * that the media should start to play as soon as the page is ready.
 *
 * @method Html5#autoplay
 * @return {boolean}
 *         - The value of `autoplay` from the media element.
 *         - True indicates that the media should start as soon as the page loads.
 *         - False indicates that the media should not start as soon as the page loads.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-autoplay}
 */'autoplay',/**
 * Get the value of `controls` from the media element. `controls` indicates
 * whether the native media controls should be shown or hidden.
 *
 * @method Html5#controls
 * @return {boolean}
 *         - The value of `controls` from the media element.
 *         - True indicates that native controls should be showing.
 *         - False indicates that native controls should be hidden.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-controls}
 */'controls',/**
 * Get the value of `loop` from the media element. `loop` indicates
 * that the media should return to the start of the media and continue playing once
 * it reaches the end.
 *
 * @method Html5#loop
 * @return {boolean}
 *         - The value of `loop` from the media element.
 *         - True indicates that playback should seek back to start once
 *           the end of a media is reached.
 *         - False indicates that playback should not loop back to the start when the
 *           end of the media is reached.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-loop}
 */'loop',/**
 * Get the value of `playsinline` from the media element. `playsinline` indicates
 * to the browser that non-fullscreen playback is preferred when fullscreen
 * playback is the native default, such as in iOS Safari.
 *
 * @method Html5#playsinline
 * @return {boolean}
 *         - The value of `playsinline` from the media element.
 *         - True indicates that the media should play inline.
 *         - False indicates that the media should not play inline.
 *
 * @see [Spec]{@link https://html.spec.whatwg.org/#attr-video-playsinline}
 */'playsinline'].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop]||this.el_.hasAttribute(prop);};});// Wrap native boolean attributes with setters that set both property and attribute
// The list is as followed:
// setMuted, setDefaultMuted, setAutoplay, setLoop, setPlaysinline
// setControls is special-cased above
[/**
 * Set the value of `muted` on the media element. `muted` indicates that the current
 * audio level should be silent.
 *
 * @method Html5#setMuted
 * @param {boolean} muted
 *        - True if the audio should be set to silent
 *        - False otherwise
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-muted}
 */'muted',/**
 * Set the value of `defaultMuted` on the media element. `defaultMuted` indicates that the current
 * audio level should be silent, but will only effect the muted level on intial playback..
 *
 * @method Html5.prototype.setDefaultMuted
 * @param {boolean} defaultMuted
 *        - True if the audio should be set to silent
 *        - False otherwise
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-defaultmuted}
 */'defaultMuted',/**
 * Set the value of `autoplay` on the media element. `autoplay` indicates
 * that the media should start to play as soon as the page is ready.
 *
 * @method Html5#setAutoplay
 * @param {boolean} autoplay
 *         - True indicates that the media should start as soon as the page loads.
 *         - False indicates that the media should not start as soon as the page loads.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-autoplay}
 */'autoplay',/**
 * Set the value of `loop` on the media element. `loop` indicates
 * that the media should return to the start of the media and continue playing once
 * it reaches the end.
 *
 * @method Html5#setLoop
 * @param {boolean} loop
 *         - True indicates that playback should seek back to start once
 *           the end of a media is reached.
 *         - False indicates that playback should not loop back to the start when the
 *           end of the media is reached.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-loop}
 */'loop',/**
 * Set the value of `playsinline` from the media element. `playsinline` indicates
 * to the browser that non-fullscreen playback is preferred when fullscreen
 * playback is the native default, such as in iOS Safari.
 *
 * @method Html5#setPlaysinline
 * @param {boolean} playsinline
 *         - True indicates that the media should play inline.
 *         - False indicates that the media should not play inline.
 *
 * @see [Spec]{@link https://html.spec.whatwg.org/#attr-video-playsinline}
 */'playsinline'].forEach(function(prop){Html5.prototype['set'+toTitleCase(prop)]=function(v){this.el_[prop]=v;if(v){this.el_.setAttribute(prop,prop);}else{this.el_.removeAttribute(prop);}};});// Wrap native properties with a getter
// The list is as followed
// paused, currentTime, buffered, volume, poster, preload, error, seeking
// seekable, ended, playbackRate, defaultPlaybackRate, played, networkState
// readyState, videoWidth, videoHeight
[/**
 * Get the value of `paused` from the media element. `paused` indicates whether the media element
 * is currently paused or not.
 *
 * @method Html5#paused
 * @return {boolean}
 *         The value of `paused` from the media element.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-paused}
 */'paused',/**
 * Get the value of `currentTime` from the media element. `currentTime` indicates
 * the current second that the media is at in playback.
 *
 * @method Html5#currentTime
 * @return {number}
 *         The value of `currentTime` from the media element.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-currenttime}
 */'currentTime',/**
 * Get the value of `buffered` from the media element. `buffered` is a `TimeRange`
 * object that represents the parts of the media that are already downloaded and
 * available for playback.
 *
 * @method Html5#buffered
 * @return {TimeRange}
 *         The value of `buffered` from the media element.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-buffered}
 */'buffered',/**
 * Get the value of `volume` from the media element. `volume` indicates
 * the current playback volume of audio for a media. `volume` will be a value from 0
 * (silent) to 1 (loudest and default).
 *
 * @method Html5#volume
 * @return {number}
 *         The value of `volume` from the media element. Value will be between 0-1.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-a-volume}
 */'volume',/**
 * Get the value of `poster` from the media element. `poster` indicates
 * that the url of an image file that can/will be shown when no media data is available.
 *
 * @method Html5#poster
 * @return {string}
 *         The value of `poster` from the media element. Value will be a url to an
 *         image.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-video-poster}
 */'poster',/**
 * Get the value of `preload` from the media element. `preload` indicates
 * what should download before the media is interacted with. It can have the following
 * values:
 * - none: nothing should be downloaded
 * - metadata: poster and the first few frames of the media may be downloaded to get
 *   media dimensions and other metadata
 * - auto: allow the media and metadata for the media to be downloaded before
 *    interaction
 *
 * @method Html5#preload
 * @return {string}
 *         The value of `preload` from the media element. Will be 'none', 'metadata',
 *         or 'auto'.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-preload}
 */'preload',/**
 * Get the value of the `error` from the media element. `error` indicates any
 * MediaError that may have occurred during playback. If error returns null there is no
 * current error.
 *
 * @method Html5#error
 * @return {MediaError|null}
 *         The value of `error` from the media element. Will be `MediaError` if there
 *         is a current error and null otherwise.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-error}
 */'error',/**
 * Get the value of `seeking` from the media element. `seeking` indicates whether the
 * media is currently seeking to a new position or not.
 *
 * @method Html5#seeking
 * @return {boolean}
 *         - The value of `seeking` from the media element.
 *         - True indicates that the media is currently seeking to a new position.
 *         - False indicates that the media is not seeking to a new position at this time.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-seeking}
 */'seeking',/**
 * Get the value of `seekable` from the media element. `seekable` returns a
 * `TimeRange` object indicating ranges of time that can currently be `seeked` to.
 *
 * @method Html5#seekable
 * @return {TimeRange}
 *         The value of `seekable` from the media element. A `TimeRange` object
 *         indicating the current ranges of time that can be seeked to.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-seekable}
 */'seekable',/**
 * Get the value of `ended` from the media element. `ended` indicates whether
 * the media has reached the end or not.
 *
 * @method Html5#ended
 * @return {boolean}
 *         - The value of `ended` from the media element.
 *         - True indicates that the media has ended.
 *         - False indicates that the media has not ended.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-ended}
 */'ended',/**
 * Get the value of `playbackRate` from the media element. `playbackRate` indicates
 * the rate at which the media is currently playing back. Examples:
 *   - if playbackRate is set to 2, media will play twice as fast.
 *   - if playbackRate is set to 0.5, media will play half as fast.
 *
 * @method Html5#playbackRate
 * @return {number}
 *         The value of `playbackRate` from the media element. A number indicating
 *         the current playback speed of the media, where 1 is normal speed.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate}
 */'playbackRate',/**
 * Get the value of `defaultPlaybackRate` from the media element. `defaultPlaybackRate` indicates
 * the rate at which the media is currently playing back. This value will not indicate the current
 * `playbackRate` after playback has started, use {@link Html5#playbackRate} for that.
 *
 * Examples:
 *   - if defaultPlaybackRate is set to 2, media will play twice as fast.
 *   - if defaultPlaybackRate is set to 0.5, media will play half as fast.
 *
 * @method Html5.prototype.defaultPlaybackRate
 * @return {number}
 *         The value of `defaultPlaybackRate` from the media element. A number indicating
 *         the current playback speed of the media, where 1 is normal speed.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate}
 */'defaultPlaybackRate',/**
 * Get the value of `played` from the media element. `played` returns a `TimeRange`
 * object representing points in the media timeline that have been played.
 *
 * @method Html5#played
 * @return {TimeRange}
 *         The value of `played` from the media element. A `TimeRange` object indicating
 *         the ranges of time that have been played.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-played}
 */'played',/**
 * Get the value of `networkState` from the media element. `networkState` indicates
 * the current network state. It returns an enumeration from the following list:
 * - 0: NETWORK_EMPTY
 * - 1: NETWORK_IDLE
 * - 2: NETWORK_LOADING
 * - 3: NETWORK_NO_SOURCE
 *
 * @method Html5#networkState
 * @return {number}
 *         The value of `networkState` from the media element. This will be a number
 *         from the list in the description.
 *
 * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-networkstate}
 */'networkState',/**
 * Get the value of `readyState` from the media element. `readyState` indicates
 * the current state of the media element. It returns an enumeration from the
 * following list:
 * - 0: HAVE_NOTHING
 * - 1: HAVE_METADATA
 * - 2: HAVE_CURRENT_DATA
 * - 3: HAVE_FUTURE_DATA
 * - 4: HAVE_ENOUGH_DATA
 *
 * @method Html5#readyState
 * @return {number}
 *         The value of `readyState` from the media element. This will be a number
 *         from the list in the description.
 *
 * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#ready-states}
 */'readyState',/**
 * Get the value of `videoWidth` from the video element. `videoWidth` indicates
 * the current width of the video in css pixels.
 *
 * @method Html5#videoWidth
 * @return {number}
 *         The value of `videoWidth` from the video element. This will be a number
 *         in css pixels.
 *
 * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-video-videowidth}
 */'videoWidth',/**
 * Get the value of `videoHeight` from the video element. `videoHeight` indicates
 * the current height of the video in css pixels.
 *
 * @method Html5#videoHeight
 * @return {number}
 *         The value of `videoHeight` from the video element. This will be a number
 *         in css pixels.
 *
 * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-video-videowidth}
 */'videoHeight'].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop];};});// Wrap native properties with a setter in this format:
// set + toTitleCase(name)
// The list is as follows:
// setVolume, setSrc, setPoster, setPreload, setPlaybackRate, setDefaultPlaybackRate
[/**
 * Set the value of `volume` on the media element. `volume` indicates the current
 * audio level as a percentage in decimal form. This means that 1 is 100%, 0.5 is 50%, and
 * so on.
 *
 * @method Html5#setVolume
 * @param {number} percentAsDecimal
 *        The volume percent as a decimal. Valid range is from 0-1.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-a-volume}
 */'volume',/**
 * Set the value of `src` on the media element. `src` indicates the current
 * {@link Tech~SourceObject} for the media.
 *
 * @method Html5#setSrc
 * @param {Tech~SourceObject} src
 *        The source object to set as the current source.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-src}
 */'src',/**
 * Set the value of `poster` on the media element. `poster` is the url to
 * an image file that can/will be shown when no media data is available.
 *
 * @method Html5#setPoster
 * @param {string} poster
 *        The url to an image that should be used as the `poster` for the media
 *        element.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-poster}
 */'poster',/**
 * Set the value of `preload` on the media element. `preload` indicates
 * what should download before the media is interacted with. It can have the following
 * values:
 * - none: nothing should be downloaded
 * - metadata: poster and the first few frames of the media may be downloaded to get
 *   media dimensions and other metadata
 * - auto: allow the media and metadata for the media to be downloaded before
 *    interaction
 *
 * @method Html5#setPreload
 * @param {string} preload
 *         The value of `preload` to set on the media element. Must be 'none', 'metadata',
 *         or 'auto'.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-preload}
 */'preload',/**
 * Set the value of `playbackRate` on the media element. `playbackRate` indicates
 * the rate at which the media should play back. Examples:
 *   - if playbackRate is set to 2, media will play twice as fast.
 *   - if playbackRate is set to 0.5, media will play half as fast.
 *
 * @method Html5#setPlaybackRate
 * @return {number}
 *         The value of `playbackRate` from the media element. A number indicating
 *         the current playback speed of the media, where 1 is normal speed.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate}
 */'playbackRate',/**
 * Set the value of `defaultPlaybackRate` on the media element. `defaultPlaybackRate` indicates
 * the rate at which the media should play back upon initial startup. Changing this value
 * after a video has started will do nothing. Instead you should used {@link Html5#setPlaybackRate}.
 *
 * Example Values:
 *   - if playbackRate is set to 2, media will play twice as fast.
 *   - if playbackRate is set to 0.5, media will play half as fast.
 *
 * @method Html5.prototype.setDefaultPlaybackRate
 * @return {number}
 *         The value of `defaultPlaybackRate` from the media element. A number indicating
 *         the current playback speed of the media, where 1 is normal speed.
 *
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-defaultplaybackrate}
 */'defaultPlaybackRate'].forEach(function(prop){Html5.prototype['set'+toTitleCase(prop)]=function(v){this.el_[prop]=v;};});// wrap native functions with a function
// The list is as follows:
// pause, load, play
[/**
 * A wrapper around the media elements `pause` function. This will call the `HTML5`
 * media elements `pause` function.
 *
 * @method Html5#pause
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-pause}
 */'pause',/**
 * A wrapper around the media elements `load` function. This will call the `HTML5`s
 * media element `load` function.
 *
 * @method Html5#load
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-load}
 */'load',/**
 * A wrapper around the media elements `play` function. This will call the `HTML5`s
 * media element `play` function.
 *
 * @method Html5#play
 * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-play}
 */'play'].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop]();};});Tech.withSourceHandlers(Html5);/**
 * Native source handler for Html5, simply passes the source to the media element.
 *
 * @property {Tech~SourceObject} source
 *        The source object
 *
 * @property {Html5} tech
 *        The instance of the HTML5 tech.
 */Html5.nativeSourceHandler={};/**
 * Check if the media element can play the given mime type.
 *
 * @param {string} type
 *        The mimetype to check
 *
 * @return {string}
 *         'probably', 'maybe', or '' (empty string)
 */Html5.nativeSourceHandler.canPlayType=function(type){// IE without MediaPlayer throws an error (#519)
try{return Html5.TEST_VID.canPlayType(type);}catch(e){return'';}};/**
 * Check if the media element can handle a source natively.
 *
 * @param {Tech~SourceObject} source
 *         The source object
 *
 * @param {Object} [options]
 *         Options to be passed to the tech.
 *
 * @return {string}
 *         'probably', 'maybe', or '' (empty string).
 */Html5.nativeSourceHandler.canHandleSource=function(source,options){// If a type was provided we should rely on that
if(source.type){return Html5.nativeSourceHandler.canPlayType(source.type);// If no type, fall back to checking 'video/[EXTENSION]'
}else if(source.src){var ext=getFileExtension(source.src);return Html5.nativeSourceHandler.canPlayType("video/"+ext);}return'';};/**
 * Pass the source to the native media element.
 *
 * @param {Tech~SourceObject} source
 *        The source object
 *
 * @param {Html5} tech
 *        The instance of the Html5 tech
 *
 * @param {Object} [options]
 *        The options to pass to the source
 */Html5.nativeSourceHandler.handleSource=function(source,tech,options){tech.setSrc(source.src);};/**
 * A noop for the native dispose function, as cleanup is not needed.
 */Html5.nativeSourceHandler.dispose=function(){};// Register the native source handler
Html5.registerSourceHandler(Html5.nativeSourceHandler);Tech.registerTech('Html5',Html5);function _templateObject$2(){var data=_taggedTemplateLiteralLoose(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]);_templateObject$2=function _templateObject(){return data;};return data;}// on the player when they happen
var TECH_EVENTS_RETRIGGER=[/**
 * Fired while the user agent is downloading media data.
 *
 * @event Player#progress
 * @type {EventTarget~Event}
 *//**
 * Retrigger the `progress` event that was triggered by the {@link Tech}.
 *
 * @private
 * @method Player#handleTechProgress_
 * @fires Player#progress
 * @listens Tech#progress
 */'progress',/**
 * Fires when the loading of an audio/video is aborted.
 *
 * @event Player#abort
 * @type {EventTarget~Event}
 *//**
 * Retrigger the `abort` event that was triggered by the {@link Tech}.
 *
 * @private
 * @method Player#handleTechAbort_
 * @fires Player#abort
 * @listens Tech#abort
 */'abort',/**
 * Fires when the browser is intentionally not getting media data.
 *
 * @event Player#suspend
 * @type {EventTarget~Event}
 *//**
 * Retrigger the `suspend` event that was triggered by the {@link Tech}.
 *
 * @private
 * @method Player#handleTechSuspend_
 * @fires Player#suspend
 * @listens Tech#suspend
 */'suspend',/**
 * Fires when the current playlist is empty.
 *
 * @event Player#emptied
 * @type {EventTarget~Event}
 *//**
 * Retrigger the `emptied` event that was triggered by the {@link Tech}.
 *
 * @private
 * @method Player#handleTechEmptied_
 * @fires Player#emptied
 * @listens Tech#emptied
 */'emptied',/**
 * Fires when the browser is trying to get media data, but data is not available.
 *
 * @event Player#stalled
 * @type {EventTarget~Event}
 *//**
 * Retrigger the `stalled` event that was triggered by the {@link Tech}.
 *
 * @private
 * @method Player#handleTechStalled_
 * @fires Player#stalled
 * @listens Tech#stalled
 */'stalled',/**
 * Fires when the browser has loaded meta data for the audio/video.
 *
 * @event Player#loadedmetadata
 * @type {EventTarget~Event}
 *//**
 * Retrigger the `stalled` event that was triggered by the {@link Tech}.
 *
 * @private
 * @method Player#handleTechLoadedmetadata_
 * @fires Player#loadedmetadata
 * @listens Tech#loadedmetadata
 */'loadedmetadata',/**
 * Fires when the browser has loaded the current frame of the audio/video.
 *
 * @event Player#loadeddata
 * @type {event}
 *//**
 * Retrigger the `loadeddata` event that was triggered by the {@link Tech}.
 *
 * @private
 * @method Player#handleTechLoaddeddata_
 * @fires Player#loadeddata
 * @listens Tech#loadeddata
 */'loadeddata',/**
 * Fires when the current playback position has changed.
 *
 * @event Player#timeupdate
 * @type {event}
 *//**
 * Retrigger the `timeupdate` event that was triggered by the {@link Tech}.
 *
 * @private
 * @method Player#handleTechTimeUpdate_
 * @fires Player#timeupdate
 * @listens Tech#timeupdate
 */'timeupdate',/**
 * Fires when the video's intrinsic dimensions change
 *
 * @event Player#resize
 * @type {event}
 *//**
 * Retrigger the `resize` event that was triggered by the {@link Tech}.
 *
 * @private
 * @method Player#handleTechResize_
 * @fires Player#resize
 * @listens Tech#resize
 */'resize',/**
 * Fires when the volume has been changed
 *
 * @event Player#volumechange
 * @type {event}
 *//**
 * Retrigger the `volumechange` event that was triggered by the {@link Tech}.
 *
 * @private
 * @method Player#handleTechVolumechange_
 * @fires Player#volumechange
 * @listens Tech#volumechange
 */'volumechange',/**
 * Fires when the text track has been changed
 *
 * @event Player#texttrackchange
 * @type {event}
 *//**
 * Retrigger the `texttrackchange` event that was triggered by the {@link Tech}.
 *
 * @private
 * @method Player#handleTechTexttrackchange_
 * @fires Player#texttrackchange
 * @listens Tech#texttrackchange
 */'texttrackchange'];// events to queue when playback rate is zero
// this is a hash for the sole purpose of mapping non-camel-cased event names
// to camel-cased function names
var TECH_EVENTS_QUEUE={canplay:'CanPlay',canplaythrough:'CanPlayThrough',playing:'Playing',seeked:'Seeked'};var BREAKPOINT_ORDER=['tiny','xsmall','small','medium','large','xlarge','huge'];var BREAKPOINT_CLASSES={};// grep: vjs-layout-tiny
// grep: vjs-layout-x-small
// grep: vjs-layout-small
// grep: vjs-layout-medium
// grep: vjs-layout-large
// grep: vjs-layout-x-large
// grep: vjs-layout-huge
BREAKPOINT_ORDER.forEach(function(k){var v=k.charAt(0)==='x'?"x-"+k.substring(1):k;BREAKPOINT_CLASSES[k]="vjs-layout-"+v;});var DEFAULT_BREAKPOINTS={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity};/**
 * An instance of the `Player` class is created when any of the Video.js setup methods
 * are used to initialize a video.
 *
 * After an instance has been created it can be accessed globally in two ways:
 * 1. By calling `videojs('example_video_1');`
 * 2. By using it directly via  `videojs.players.example_video_1;`
 *
 * @extends Component
 */var Player=/*#__PURE__*/function(_Component){_inheritsLoose(Player,_Component);/**
   * Create an instance of this class.
   *
   * @param {Element} tag
   *        The original video DOM element used for configuring options.
   *
   * @param {Object} [options]
   *        Object of option names and values.
   *
   * @param {Component~ReadyCallback} [ready]
   *        Ready callback function.
   */function Player(tag,options,ready){var _this;// Make sure tag ID exists
tag.id=tag.id||options.id||"vjs_video_"+newGUID();// Set Options
// The options argument overrides options set in the video tag
// which overrides globally set options.
// This latter part coincides with the load order
// (tag must exist before Player)
options=assign(Player.getTagSettings(tag),options);// Delay the initialization of children because we need to set up
// player properties first, and can't use `this` before `super()`
options.initChildren=false;// Same with creating the element
options.createEl=false;// don't auto mixin the evented mixin
options.evented=false;// we don't want the player to report touch activity on itself
// see enableTouchActivity in Component
options.reportTouchActivity=false;// If language is not set, get the closest lang attribute
if(!options.language){if(typeof tag.closest==='function'){var closest=tag.closest('[lang]');if(closest&&closest.getAttribute){options.language=closest.getAttribute('lang');}}else{var element=tag;while(element&&element.nodeType===1){if(getAttributes(element).hasOwnProperty('lang')){options.language=element.getAttribute('lang');break;}element=element.parentNode;}}}// Run base component initializing with new options
_this=_Component.call(this,null,options,ready)||this;// Create bound methods for document listeners.
_this.boundDocumentFullscreenChange_=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.documentFullscreenChange_);_this.boundFullWindowOnEscKey_=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.fullWindowOnEscKey);_this.boundHandleKeyPress_=bind(_assertThisInitialized(_assertThisInitialized(_this)),_this.handleKeyPress);// create logger
_this.log=createLogger$1(_this.id_);// Tracks when a tech changes the poster
_this.isPosterFromTech_=false;// Holds callback info that gets queued when playback rate is zero
// and a seek is happening
_this.queuedCallbacks_=[];// Turn off API access because we're loading a new tech that might load asynchronously
_this.isReady_=false;// Init state hasStarted_
_this.hasStarted_=false;// Init state userActive_
_this.userActive_=false;// if the global option object was accidentally blown away by
// someone, bail early with an informative error
if(!_this.options_||!_this.options_.techOrder||!_this.options_.techOrder.length){throw new Error('No techOrder specified. Did you overwrite '+'videojs.options instead of just changing the '+'properties you want to override?');}// Store the original tag used to set options
_this.tag=tag;// Store the tag attributes used to restore html5 element
_this.tagAttributes=tag&&getAttributes(tag);// Update current language
_this.language(_this.options_.language);// Update Supported Languages
if(options.languages){// Normalise player option languages to lowercase
var languagesToLower={};Object.getOwnPropertyNames(options.languages).forEach(function(name$$1){languagesToLower[name$$1.toLowerCase()]=options.languages[name$$1];});_this.languages_=languagesToLower;}else{_this.languages_=Player.prototype.options_.languages;}_this.resetCache_();// Set poster
_this.poster_=options.poster||'';// Set controls
_this.controls_=!!options.controls;// Original tag settings stored in options
// now remove immediately so native controls don't flash.
// May be turned back on by HTML5 tech if nativeControlsForTouch is true
tag.controls=false;tag.removeAttribute('controls');_this.changingSrc_=false;_this.playCallbacks_=[];_this.playTerminatedQueue_=[];// the attribute overrides the option
if(tag.hasAttribute('autoplay')){_this.autoplay(true);}else{// otherwise use the setter to validate and
// set the correct value.
_this.autoplay(_this.options_.autoplay);}// check plugins
if(options.plugins){Object.keys(options.plugins).forEach(function(name$$1){if(typeof _this[name$$1]!=='function'){throw new Error("plugin \""+name$$1+"\" does not exist");}});}/*
     * Store the internal state of scrubbing
     *
     * @private
     * @return {Boolean} True if the user is scrubbing
     */_this.scrubbing_=false;_this.el_=_this.createEl();// Make this an evented object and use `el_` as its event bus.
evented(_assertThisInitialized(_assertThisInitialized(_this)),{eventBusKey:'el_'});if(_this.fluid_){_this.on('playerreset',_this.updateStyleEl_);}// We also want to pass the original player options to each component and plugin
// as well so they don't need to reach back into the player for options later.
// We also need to do another copy of this.options_ so we don't end up with
// an infinite loop.
var playerOptionsCopy=mergeOptions(_this.options_);// Load plugins
if(options.plugins){Object.keys(options.plugins).forEach(function(name$$1){_this[name$$1](options.plugins[name$$1]);});}_this.options_.playerOptions=playerOptionsCopy;_this.middleware_=[];_this.initChildren();// Set isAudio based on whether or not an audio tag was used
_this.isAudio(tag.nodeName.toLowerCase()==='audio');// Update controls className. Can't do this when the controls are initially
// set because the element doesn't exist yet.
if(_this.controls()){_this.addClass('vjs-controls-enabled');}else{_this.addClass('vjs-controls-disabled');}// Set ARIA label and region role depending on player type
_this.el_.setAttribute('role','region');if(_this.isAudio()){_this.el_.setAttribute('aria-label',_this.localize('Audio Player'));}else{_this.el_.setAttribute('aria-label',_this.localize('Video Player'));}if(_this.isAudio()){_this.addClass('vjs-audio');}if(_this.flexNotSupported_()){_this.addClass('vjs-no-flex');}// TODO: Make this smarter. Toggle user state between touching/mousing
// using events, since devices can have both touch and mouse events.
// TODO: Make this check be performed again when the window switches between monitors
// (See https://github.com/videojs/video.js/issues/5683)
if(TOUCH_ENABLED){_this.addClass('vjs-touch-enabled');}// iOS Safari has broken hover handling
if(!IS_IOS){_this.addClass('vjs-workinghover');}// Make player easily findable by ID
Player.players[_this.id_]=_assertThisInitialized(_assertThisInitialized(_this));// Add a major version class to aid css in plugins
var majorVersion=version.split('.')[0];_this.addClass("vjs-v"+majorVersion);// When the player is first initialized, trigger activity so components
// like the control bar show themselves if needed
_this.userActive(true);_this.reportUserActivity();_this.one('play',_this.listenForUserActivity_);_this.on('focus',_this.handleFocus);_this.on('blur',_this.handleBlur);_this.on('stageclick',_this.handleStageClick_);_this.breakpoints(_this.options_.breakpoints);_this.responsive(_this.options_.responsive);return _this;}/**
   * Destroys the video player and does any necessary cleanup.
   *
   * This is especially helpful if you are dynamically adding and removing videos
   * to/from the DOM.
   *
   * @fires Player#dispose
   */var _proto=Player.prototype;_proto.dispose=function dispose(){var _this2=this;/**
     * Called when the player is being disposed of.
     *
     * @event Player#dispose
     * @type {EventTarget~Event}
     */this.trigger('dispose');// prevent dispose from being called twice
this.off('dispose');// Make sure all player-specific document listeners are unbound. This is
off(_document2.default,FullscreenApi.fullscreenchange,this.boundDocumentFullscreenChange_);off(_document2.default,'keydown',this.boundFullWindowOnEscKey_);off(_document2.default,'keydown',this.boundHandleKeyPress_);if(this.styleEl_&&this.styleEl_.parentNode){this.styleEl_.parentNode.removeChild(this.styleEl_);this.styleEl_=null;}// Kill reference to this player
Player.players[this.id_]=null;if(this.tag&&this.tag.player){this.tag.player=null;}if(this.el_&&this.el_.player){this.el_.player=null;}if(this.tech_){this.tech_.dispose();this.isPosterFromTech_=false;this.poster_='';}if(this.playerElIngest_){this.playerElIngest_=null;}if(this.tag){this.tag=null;}clearCacheForPlayer(this);// remove all event handlers for track lists
// all tracks and track listeners are removed on
// tech dispose
ALL.names.forEach(function(name$$1){var props=ALL[name$$1];var list=_this2[props.getterName]();// if it is not a native list
// we have to manually remove event listeners
if(list&&list.off){list.off();}});// the actual .el_ is removed here
_Component.prototype.dispose.call(this);}/**
   * Create the `Player`'s DOM element.
   *
   * @return {Element}
   *         The DOM element that gets created.
   */;_proto.createEl=function createEl$$1(){var tag=this.tag;var el;var playerElIngest=this.playerElIngest_=tag.parentNode&&tag.parentNode.hasAttribute&&tag.parentNode.hasAttribute('data-vjs-player');var divEmbed=this.tag.tagName.toLowerCase()==='video-js';if(playerElIngest){el=this.el_=tag.parentNode;}else if(!divEmbed){el=this.el_=_Component.prototype.createEl.call(this,'div');}// Copy over all the attributes from the tag, including ID and class
// ID will now reference player box, not the video tag
var attrs=getAttributes(tag);if(divEmbed){el=this.el_=tag;tag=this.tag=_document2.default.createElement('video');while(el.children.length){tag.appendChild(el.firstChild);}if(!hasClass(el,'video-js')){addClass(el,'video-js');}el.appendChild(tag);playerElIngest=this.playerElIngest_=el;// move properties over from our custom `video-js` element
// to our new `video` element. This will move things like
// `src` or `controls` that were set via js before the player
// was initialized.
Object.keys(el).forEach(function(k){tag[k]=el[k];});}// set tabindex to -1 to remove the video element from the focus order
tag.setAttribute('tabindex','-1');attrs.tabindex='-1';// Workaround for #4583 (JAWS+IE doesn't announce BPB or play button)
// See https://github.com/FreedomScientific/VFO-standards-support/issues/78
// Note that we can't detect if JAWS is being used, but this ARIA attribute
//  doesn't change behavior of IE11 if JAWS is not being used
if(IE_VERSION){tag.setAttribute('role','application');attrs.role='application';}// Remove width/height attrs from tag so CSS can make it 100% width/height
tag.removeAttribute('width');tag.removeAttribute('height');if('width'in attrs){delete attrs.width;}if('height'in attrs){delete attrs.height;}Object.getOwnPropertyNames(attrs).forEach(function(attr){// don't copy over the class attribute to the player element when we're in a div embed
// the class is already set up properly in the divEmbed case
// and we want to make sure that the `video-js` class doesn't get lost
if(!(divEmbed&&attr==='class')){el.setAttribute(attr,attrs[attr]);}if(divEmbed){tag.setAttribute(attr,attrs[attr]);}});// Update tag id/class for use as HTML5 playback tech
// Might think we should do this after embedding in container so .vjs-tech class
// doesn't flash 100% width/height, but class only applies with .video-js parent
tag.playerId=tag.id;tag.id+='_html5_api';tag.className='vjs-tech';// Make player findable on elements
tag.player=el.player=this;// Default state of video is paused
this.addClass('vjs-paused');// Add a style element in the player that we'll use to set the width/height
// of the player in a way that's still overrideable by CSS, just like the
// video element
if(_window2.default.VIDEOJS_NO_DYNAMIC_STYLE!==true){this.styleEl_=createStyleElement('vjs-styles-dimensions');var defaultsStyleEl=$('.vjs-styles-defaults');var head=$('head');head.insertBefore(this.styleEl_,defaultsStyleEl?defaultsStyleEl.nextSibling:head.firstChild);}this.fill_=false;this.fluid_=false;// Pass in the width/height/aspectRatio options which will update the style el
this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);// Hide any links within the video/audio tag,
// because IE doesn't hide them completely from screen readers.
var links=tag.getElementsByTagName('a');for(var i=0;i<links.length;i++){var linkEl=links.item(i);addClass(linkEl,'vjs-hidden');linkEl.setAttribute('hidden','hidden');}// insertElFirst seems to cause the networkState to flicker from 3 to 2, so
// keep track of the original for later so we can know if the source originally failed
tag.initNetworkState_=tag.networkState;// Wrap video tag in div (el/box) container
if(tag.parentNode&&!playerElIngest){tag.parentNode.insertBefore(el,tag);}// insert the tag as the first child of the player element
// then manually add it to the children array so that this.addChild
// will work properly for other components
//
// Breaks iPhone, fixed in HTML5 setup.
prependTo(tag,el);this.children_.unshift(tag);// Set lang attr on player to ensure CSS :lang() in consistent with player
// if it's been set to something different to the doc
this.el_.setAttribute('lang',this.language_);this.el_=el;return el;}/**
   * A getter/setter for the `Player`'s width. Returns the player's configured value.
   * To get the current width use `currentWidth()`.
   *
   * @param {number} [value]
   *        The value to set the `Player`'s width to.
   *
   * @return {number}
   *         The current width of the `Player` when getting.
   */;_proto.width=function width(value){return this.dimension('width',value);}/**
   * A getter/setter for the `Player`'s height. Returns the player's configured value.
   * To get the current height use `currentheight()`.
   *
   * @param {number} [value]
   *        The value to set the `Player`'s heigth to.
   *
   * @return {number}
   *         The current height of the `Player` when getting.
   */;_proto.height=function height(value){return this.dimension('height',value);}/**
   * A getter/setter for the `Player`'s width & height.
   *
   * @param {string} dimension
   *        This string can be:
   *        - 'width'
   *        - 'height'
   *
   * @param {number} [value]
   *        Value for dimension specified in the first argument.
   *
   * @return {number}
   *         The dimension arguments value when getting (width/height).
   */;_proto.dimension=function dimension(_dimension,value){var privDimension=_dimension+'_';if(value===undefined){return this[privDimension]||0;}if(value===''){// If an empty string is given, reset the dimension to be automatic
this[privDimension]=undefined;this.updateStyleEl_();return;}var parsedVal=parseFloat(value);if(isNaN(parsedVal)){log.error("Improper value \""+value+"\" supplied for for "+_dimension);return;}this[privDimension]=parsedVal;this.updateStyleEl_();}/**
   * A getter/setter/toggler for the vjs-fluid `className` on the `Player`.
   *
   * Turning this on will turn off fill mode.
   *
   * @param {boolean} [bool]
   *        - A value of true adds the class.
   *        - A value of false removes the class.
   *        - No value will be a getter.
   *
   * @return {boolean|undefined}
   *         - The value of fluid when getting.
   *         - `undefined` when setting.
   */;_proto.fluid=function fluid(bool){if(bool===undefined){return!!this.fluid_;}this.fluid_=!!bool;if(isEvented(this)){this.off('playerreset',this.updateStyleEl_);}if(bool){this.addClass('vjs-fluid');this.fill(false);addEventedCallback(function(){this.on('playerreset',this.updateStyleEl_);});}else{this.removeClass('vjs-fluid');}this.updateStyleEl_();}/**
   * A getter/setter/toggler for the vjs-fill `className` on the `Player`.
   *
   * Turning this on will turn off fluid mode.
   *
   * @param {boolean} [bool]
   *        - A value of true adds the class.
   *        - A value of false removes the class.
   *        - No value will be a getter.
   *
   * @return {boolean|undefined}
   *         - The value of fluid when getting.
   *         - `undefined` when setting.
   */;_proto.fill=function fill(bool){if(bool===undefined){return!!this.fill_;}this.fill_=!!bool;if(bool){this.addClass('vjs-fill');this.fluid(false);}else{this.removeClass('vjs-fill');}}/**
   * Get/Set the aspect ratio
   *
   * @param {string} [ratio]
   *        Aspect ratio for player
   *
   * @return {string|undefined}
   *         returns the current aspect ratio when getting
   *//**
   * A getter/setter for the `Player`'s aspect ratio.
   *
   * @param {string} [ratio]
   *        The value to set the `Player's aspect ratio to.
   *
   * @return {string|undefined}
   *         - The current aspect ratio of the `Player` when getting.
   *         - undefined when setting
   */;_proto.aspectRatio=function aspectRatio(ratio){if(ratio===undefined){return this.aspectRatio_;}// Check for width:height format
if(!/^\d+\:\d+$/.test(ratio)){throw new Error('Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.');}this.aspectRatio_=ratio;// We're assuming if you set an aspect ratio you want fluid mode,
// because in fixed mode you could calculate width and height yourself.
this.fluid(true);this.updateStyleEl_();}/**
   * Update styles of the `Player` element (height, width and aspect ratio).
   *
   * @private
   * @listens Tech#loadedmetadata
   */;_proto.updateStyleEl_=function updateStyleEl_(){if(_window2.default.VIDEOJS_NO_DYNAMIC_STYLE===true){var _width=typeof this.width_==='number'?this.width_:this.options_.width;var _height=typeof this.height_==='number'?this.height_:this.options_.height;var techEl=this.tech_&&this.tech_.el();if(techEl){if(_width>=0){techEl.width=_width;}if(_height>=0){techEl.height=_height;}}return;}var width;var height;var aspectRatio;var idClass;// The aspect ratio is either used directly or to calculate width and height.
if(this.aspectRatio_!==undefined&&this.aspectRatio_!=='auto'){// Use any aspectRatio that's been specifically set
aspectRatio=this.aspectRatio_;}else if(this.videoWidth()>0){// Otherwise try to get the aspect ratio from the video metadata
aspectRatio=this.videoWidth()+':'+this.videoHeight();}else{// Or use a default. The video element's is 2:1, but 16:9 is more common.
aspectRatio='16:9';}// Get the ratio as a decimal we can use to calculate dimensions
var ratioParts=aspectRatio.split(':');var ratioMultiplier=ratioParts[1]/ratioParts[0];if(this.width_!==undefined){// Use any width that's been specifically set
width=this.width_;}else if(this.height_!==undefined){// Or calulate the width from the aspect ratio if a height has been set
width=this.height_/ratioMultiplier;}else{// Or use the video's metadata, or use the video el's default of 300
width=this.videoWidth()||300;}if(this.height_!==undefined){// Use any height that's been specifically set
height=this.height_;}else{// Otherwise calculate the height from the ratio and the width
height=width*ratioMultiplier;}// Ensure the CSS class is valid by starting with an alpha character
if(/^[^a-zA-Z]/.test(this.id())){idClass='dimensions-'+this.id();}else{idClass=this.id()+'-dimensions';}// Ensure the right class is still on the player for the style element
this.addClass(idClass);setTextContent(this.styleEl_,"\n      ."+idClass+" {\n        width: "+width+"px;\n        height: "+height+"px;\n      }\n\n      ."+idClass+".vjs-fluid {\n        padding-top: "+ratioMultiplier*100+"%;\n      }\n    ");}/**
   * Load/Create an instance of playback {@link Tech} including element
   * and API methods. Then append the `Tech` element in `Player` as a child.
   *
   * @param {string} techName
   *        name of the playback technology
   *
   * @param {string} source
   *        video source
   *
   * @private
   */;_proto.loadTech_=function loadTech_(techName,source){var _this3=this;// Pause and remove current playback technology
if(this.tech_){this.unloadTech_();}var titleTechName=toTitleCase(techName);var camelTechName=techName.charAt(0).toLowerCase()+techName.slice(1);// get rid of the HTML5 video tag as soon as we are using another tech
if(titleTechName!=='Html5'&&this.tag){Tech.getTech('Html5').disposeMediaElement(this.tag);this.tag.player=null;this.tag=null;}this.techName_=titleTechName;// Turn off API access because we're loading a new tech that might load asynchronously
this.isReady_=false;// if autoplay is a string we pass false to the tech
// because the player is going to handle autoplay on `loadstart`
var autoplay=typeof this.autoplay()==='string'?false:this.autoplay();// Grab tech-specific options from player options and add source and parent element to use.
var techOptions={source:source,autoplay:autoplay,'nativeControlsForTouch':this.options_.nativeControlsForTouch,'playerId':this.id(),'techId':this.id()+"_"+camelTechName+"_api",'playsinline':this.options_.playsinline,'preload':this.options_.preload,'loop':this.options_.loop,'muted':this.options_.muted,'poster':this.poster(),'language':this.language(),'playerElIngest':this.playerElIngest_||false,'vtt.js':this.options_['vtt.js'],'canOverridePoster':!!this.options_.techCanOverridePoster,'enableSourceset':this.options_.enableSourceset};ALL.names.forEach(function(name$$1){var props=ALL[name$$1];techOptions[props.getterName]=_this3[props.privateName];});assign(techOptions,this.options_[titleTechName]);assign(techOptions,this.options_[camelTechName]);assign(techOptions,this.options_[techName.toLowerCase()]);if(this.tag){techOptions.tag=this.tag;}if(source&&source.src===this.cache_.src&&this.cache_.currentTime>0){techOptions.startTime=this.cache_.currentTime;}// Initialize tech instance
var TechClass=Tech.getTech(techName);if(!TechClass){throw new Error("No Tech named '"+titleTechName+"' exists! '"+titleTechName+"' should be registered using videojs.registerTech()'");}this.tech_=new TechClass(techOptions);// player.triggerReady is always async, so don't need this to be async
this.tech_.ready(bind(this,this.handleTechReady_),true);textTrackConverter.jsonToTextTracks(this.textTracksJson_||[],this.tech_);// Listen to all HTML5-defined events and trigger them on the player
TECH_EVENTS_RETRIGGER.forEach(function(event){_this3.on(_this3.tech_,event,_this3["handleTech"+toTitleCase(event)+"_"]);});Object.keys(TECH_EVENTS_QUEUE).forEach(function(event){_this3.on(_this3.tech_,event,function(eventObj){if(_this3.tech_.playbackRate()===0&&_this3.tech_.seeking()){_this3.queuedCallbacks_.push({callback:_this3["handleTech"+TECH_EVENTS_QUEUE[event]+"_"].bind(_this3),event:eventObj});return;}_this3["handleTech"+TECH_EVENTS_QUEUE[event]+"_"](eventObj);});});this.on(this.tech_,'loadstart',this.handleTechLoadStart_);this.on(this.tech_,'sourceset',this.handleTechSourceset_);this.on(this.tech_,'waiting',this.handleTechWaiting_);this.on(this.tech_,'ended',this.handleTechEnded_);this.on(this.tech_,'seeking',this.handleTechSeeking_);this.on(this.tech_,'play',this.handleTechPlay_);this.on(this.tech_,'firstplay',this.handleTechFirstPlay_);this.on(this.tech_,'pause',this.handleTechPause_);this.on(this.tech_,'durationchange',this.handleTechDurationChange_);this.on(this.tech_,'fullscreenchange',this.handleTechFullscreenChange_);this.on(this.tech_,'error',this.handleTechError_);this.on(this.tech_,'loadedmetadata',this.updateStyleEl_);this.on(this.tech_,'posterchange',this.handleTechPosterChange_);this.on(this.tech_,'textdata',this.handleTechTextData_);this.on(this.tech_,'ratechange',this.handleTechRateChange_);this.usingNativeControls(this.techGet_('controls'));if(this.controls()&&!this.usingNativeControls()){this.addTechControlsListeners_();}// Add the tech element in the DOM if it was not already there
// Make sure to not insert the original video element if using Html5
if(this.tech_.el().parentNode!==this.el()&&(titleTechName!=='Html5'||!this.tag)){prependTo(this.tech_.el(),this.el());}// Get rid of the original video tag reference after the first tech is loaded
if(this.tag){this.tag.player=null;this.tag=null;}}/**
   * Unload and dispose of the current playback {@link Tech}.
   *
   * @private
   */;_proto.unloadTech_=function unloadTech_(){var _this4=this;// Save the current text tracks so that we can reuse the same text tracks with the next tech
ALL.names.forEach(function(name$$1){var props=ALL[name$$1];_this4[props.privateName]=_this4[props.getterName]();});this.textTracksJson_=textTrackConverter.textTracksToJson(this.tech_);this.isReady_=false;this.tech_.dispose();this.tech_=false;if(this.isPosterFromTech_){this.poster_='';this.trigger('posterchange');}this.isPosterFromTech_=false;}/**
   * Return a reference to the current {@link Tech}.
   * It will print a warning by default about the danger of using the tech directly
   * but any argument that is passed in will silence the warning.
   *
   * @param {*} [safety]
   *        Anything passed in to silence the warning
   *
   * @return {Tech}
   *         The Tech
   */;_proto.tech=function tech(safety){if(safety===undefined){log.warn((0,_tsml2.default)(_templateObject$2()));}return this.tech_;}/**
   * Set up click and touch listeners for the playback element
   *
   * - On desktops: a click on the video itself will toggle playback
   * - On mobile devices: a click on the video toggles controls
   *   which is done by toggling the user state between active and
   *   inactive
   * - A tap can signal that a user has become active or has become inactive
   *   e.g. a quick tap on an iPhone movie should reveal the controls. Another
   *   quick tap should hide them again (signaling the user is in an inactive
   *   viewing state)
   * - In addition to this, we still want the user to be considered inactive after
   *   a few seconds of inactivity.
   *
   * > Note: the only part of iOS interaction we can't mimic with this setup
   * is a touch and hold on the video element counting as activity in order to
   * keep the controls showing, but that shouldn't be an issue. A touch and hold
   * on any controls will still keep the user active
   *
   * @private
   */;_proto.addTechControlsListeners_=function addTechControlsListeners_(){// Make sure to remove all the previous listeners in case we are called multiple times.
this.removeTechControlsListeners_();// Some browsers (Chrome & IE) don't trigger a click on a flash swf, but do
// trigger mousedown/up.
// http://stackoverflow.com/questions/1444562/javascript-onclick-event-over-flash-object
// Any touch events are set to block the mousedown event from happening
this.on(this.tech_,'mousedown',this.handleTechClick_);this.on(this.tech_,'dblclick',this.handleTechDoubleClick_);// If the controls were hidden we don't want that to change without a tap event
// so we'll check if the controls were already showing before reporting user
// activity
this.on(this.tech_,'touchstart',this.handleTechTouchStart_);this.on(this.tech_,'touchmove',this.handleTechTouchMove_);this.on(this.tech_,'touchend',this.handleTechTouchEnd_);// The tap listener needs to come after the touchend listener because the tap
// listener cancels out any reportedUserActivity when setting userActive(false)
this.on(this.tech_,'tap',this.handleTechTap_);}/**
   * Remove the listeners used for click and tap controls. This is needed for
   * toggling to controls disabled, where a tap/touch should do nothing.
   *
   * @private
   */;_proto.removeTechControlsListeners_=function removeTechControlsListeners_(){// We don't want to just use `this.off()` because there might be other needed
// listeners added by techs that extend this.
this.off(this.tech_,'tap',this.handleTechTap_);this.off(this.tech_,'touchstart',this.handleTechTouchStart_);this.off(this.tech_,'touchmove',this.handleTechTouchMove_);this.off(this.tech_,'touchend',this.handleTechTouchEnd_);this.off(this.tech_,'mousedown',this.handleTechClick_);this.off(this.tech_,'dblclick',this.handleTechDoubleClick_);}/**
   * Player waits for the tech to be ready
   *
   * @private
   */;_proto.handleTechReady_=function handleTechReady_(){this.triggerReady();// Keep the same volume as before
if(this.cache_.volume){this.techCall_('setVolume',this.cache_.volume);}// Look if the tech found a higher resolution poster while loading
this.handleTechPosterChange_();// Update the duration if available
this.handleTechDurationChange_();}/**
   * Retrigger the `loadstart` event that was triggered by the {@link Tech}. This
   * function will also trigger {@link Player#firstplay} if it is the first loadstart
   * for a video.
   *
   * @fires Player#loadstart
   * @fires Player#firstplay
   * @listens Tech#loadstart
   * @private
   */;_proto.handleTechLoadStart_=function handleTechLoadStart_(){// TODO: Update to use `emptied` event instead. See #1277.
this.removeClass('vjs-ended');this.removeClass('vjs-seeking');// reset the error state
this.error(null);// Update the duration
this.handleTechDurationChange_();// If it's already playing we want to trigger a firstplay event now.
// The firstplay event relies on both the play and loadstart events
// which can happen in any order for a new source
if(!this.paused()){/**
       * Fired when the user agent begins looking for media data
       *
       * @event Player#loadstart
       * @type {EventTarget~Event}
       */this.trigger('loadstart');this.trigger('firstplay');}else{// reset the hasStarted state
this.hasStarted(false);this.trigger('loadstart');}// autoplay happens after loadstart for the browser,
// so we mimic that behavior
this.manualAutoplay_(this.autoplay());}/**
   * Handle autoplay string values, rather than the typical boolean
   * values that should be handled by the tech. Note that this is not
   * part of any specification. Valid values and what they do can be
   * found on the autoplay getter at Player#autoplay()
   */;_proto.manualAutoplay_=function manualAutoplay_(type){var _this5=this;if(!this.tech_||typeof type!=='string'){return;}var muted=function muted(){var previouslyMuted=_this5.muted();_this5.muted(true);var restoreMuted=function restoreMuted(){_this5.muted(previouslyMuted);};// restore muted on play terminatation
_this5.playTerminatedQueue_.push(restoreMuted);var mutedPromise=_this5.play();if(!isPromise(mutedPromise)){return;}return mutedPromise.catch(restoreMuted);};var promise;// if muted defaults to true
// the only thing we can do is call play
if(type==='any'&&this.muted()!==true){promise=this.play();if(isPromise(promise)){promise=promise.catch(muted);}}else if(type==='muted'&&this.muted()!==true){promise=muted();}else{promise=this.play();}if(!isPromise(promise)){return;}return promise.then(function(){_this5.trigger({type:'autoplay-success',autoplay:type});}).catch(function(e){_this5.trigger({type:'autoplay-failure',autoplay:type});});}/**
   * Update the internal source caches so that we return the correct source from
   * `src()`, `currentSource()`, and `currentSources()`.
   *
   * > Note: `currentSources` will not be updated if the source that is passed in exists
   *         in the current `currentSources` cache.
   *
   *
   * @param {Tech~SourceObject} srcObj
   *        A string or object source to update our caches to.
   */;_proto.updateSourceCaches_=function updateSourceCaches_(srcObj){if(srcObj===void 0){srcObj='';}var src=srcObj;var type='';if(typeof src!=='string'){src=srcObj.src;type=srcObj.type;}// make sure all the caches are set to default values
// to prevent null checking
this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];// try to get the type of the src that was passed in
if(src&&!type){type=findMimetype(this,src);}// update `currentSource` cache always
this.cache_.source=mergeOptions({},srcObj,{src:src,type:type});var matchingSources=this.cache_.sources.filter(function(s){return s.src&&s.src===src;});var sourceElSources=[];var sourceEls=this.$$('source');var matchingSourceEls=[];for(var i=0;i<sourceEls.length;i++){var sourceObj=getAttributes(sourceEls[i]);sourceElSources.push(sourceObj);if(sourceObj.src&&sourceObj.src===src){matchingSourceEls.push(sourceObj.src);}}// if we have matching source els but not matching sources
// the current source cache is not up to date
if(matchingSourceEls.length&&!matchingSources.length){this.cache_.sources=sourceElSources;// if we don't have matching source or source els set the
// sources cache to the `currentSource` cache
}else if(!matchingSources.length){this.cache_.sources=[this.cache_.source];}// update the tech `src` cache
this.cache_.src=src;}/**
   * *EXPERIMENTAL* Fired when the source is set or changed on the {@link Tech}
   * causing the media element to reload.
   *
   * It will fire for the initial source and each subsequent source.
   * This event is a custom event from Video.js and is triggered by the {@link Tech}.
   *
   * The event object for this event contains a `src` property that will contain the source
   * that was available when the event was triggered. This is generally only necessary if Video.js
   * is switching techs while the source was being changed.
   *
   * It is also fired when `load` is called on the player (or media element)
   * because the {@link https://html.spec.whatwg.org/multipage/media.html#dom-media-load|specification for `load`}
   * says that the resource selection algorithm needs to be aborted and restarted.
   * In this case, it is very likely that the `src` property will be set to the
   * empty string `""` to indicate we do not know what the source will be but
   * that it is changing.
   *
   * *This event is currently still experimental and may change in minor releases.*
   * __To use this, pass `enableSourceset` option to the player.__
   *
   * @event Player#sourceset
   * @type {EventTarget~Event}
   * @prop {string} src
   *                The source url available when the `sourceset` was triggered.
   *                It will be an empty string if we cannot know what the source is
   *                but know that the source will change.
   *//**
   * Retrigger the `sourceset` event that was triggered by the {@link Tech}.
   *
   * @fires Player#sourceset
   * @listens Tech#sourceset
   * @private
   */;_proto.handleTechSourceset_=function handleTechSourceset_(event){var _this6=this;// only update the source cache when the source
// was not updated using the player api
if(!this.changingSrc_){var updateSourceCaches=function updateSourceCaches(src){return _this6.updateSourceCaches_(src);};var playerSrc=this.currentSource().src;var eventSrc=event.src;// if we have a playerSrc that is not a blob, and a tech src that is a blob
if(playerSrc&&!/^blob:/.test(playerSrc)&&/^blob:/.test(eventSrc)){// if both the tech source and the player source were updated we assume
// something like @videojs/http-streaming did the sourceset and skip updating the source cache.
if(!this.lastSource_||this.lastSource_.tech!==eventSrc&&this.lastSource_.player!==playerSrc){updateSourceCaches=function updateSourceCaches(){};}}// update the source to the intial source right away
// in some cases this will be empty string
updateSourceCaches(eventSrc);// if the `sourceset` `src` was an empty string
// wait for a `loadstart` to update the cache to `currentSrc`.
// If a sourceset happens before a `loadstart`, we reset the state
// as this function will be called again.
if(!event.src){var updateCache=function updateCache(e){if(e.type!=='sourceset'){var techSrc=_this6.techGet('currentSrc');_this6.lastSource_.tech=techSrc;_this6.updateSourceCaches_(techSrc);}_this6.tech_.off(['sourceset','loadstart'],updateCache);};this.tech_.one(['sourceset','loadstart'],updateCache);}}this.lastSource_={player:this.currentSource().src,tech:event.src};this.trigger({src:event.src,type:'sourceset'});}/**
   * Add/remove the vjs-has-started class
   *
   * @fires Player#firstplay
   *
   * @param {boolean} request
   *        - true: adds the class
   *        - false: remove the class
   *
   * @return {boolean}
   *         the boolean value of hasStarted_
   */;_proto.hasStarted=function hasStarted(request){if(request===undefined){// act as getter, if we have no request to change
return this.hasStarted_;}if(request===this.hasStarted_){return;}this.hasStarted_=request;if(this.hasStarted_){this.addClass('vjs-has-started');this.trigger('firstplay');}else{this.removeClass('vjs-has-started');}}/**
   * Fired whenever the media begins or resumes playback
   *
   * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-play}
   * @fires Player#play
   * @listens Tech#play
   * @private
   */;_proto.handleTechPlay_=function handleTechPlay_(){this.removeClass('vjs-ended');this.removeClass('vjs-paused');this.addClass('vjs-playing');// hide the poster when the user hits play
this.hasStarted(true);/**
     * Triggered whenever an {@link Tech#play} event happens. Indicates that
     * playback has started or resumed.
     *
     * @event Player#play
     * @type {EventTarget~Event}
     */this.trigger('play');}/**
   * Retrigger the `ratechange` event that was triggered by the {@link Tech}.
   *
   * If there were any events queued while the playback rate was zero, fire
   * those events now.
   *
   * @private
   * @method Player#handleTechRateChange_
   * @fires Player#ratechange
   * @listens Tech#ratechange
   */;_proto.handleTechRateChange_=function handleTechRateChange_(){if(this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0){this.queuedCallbacks_.forEach(function(queued){return queued.callback(queued.event);});this.queuedCallbacks_=[];}this.cache_.lastPlaybackRate=this.tech_.playbackRate();/**
     * Fires when the playing speed of the audio/video is changed
     *
     * @event Player#ratechange
     * @type {event}
     */this.trigger('ratechange');}/**
   * Retrigger the `waiting` event that was triggered by the {@link Tech}.
   *
   * @fires Player#waiting
   * @listens Tech#waiting
   * @private
   */;_proto.handleTechWaiting_=function handleTechWaiting_(){var _this7=this;this.addClass('vjs-waiting');/**
     * A readyState change on the DOM element has caused playback to stop.
     *
     * @event Player#waiting
     * @type {EventTarget~Event}
     */this.trigger('waiting');// Browsers may emit a timeupdate event after a waiting event. In order to prevent
// premature removal of the waiting class, wait for the time to change.
var timeWhenWaiting=this.currentTime();var timeUpdateListener=function timeUpdateListener(){if(timeWhenWaiting!==_this7.currentTime()){_this7.removeClass('vjs-waiting');_this7.off('timeupdate',timeUpdateListener);}};this.on('timeupdate',timeUpdateListener);}/**
   * Retrigger the `canplay` event that was triggered by the {@link Tech}.
   * > Note: This is not consistent between browsers. See #1351
   *
   * @fires Player#canplay
   * @listens Tech#canplay
   * @private
   */;_proto.handleTechCanPlay_=function handleTechCanPlay_(){this.removeClass('vjs-waiting');/**
     * The media has a readyState of HAVE_FUTURE_DATA or greater.
     *
     * @event Player#canplay
     * @type {EventTarget~Event}
     */this.trigger('canplay');}/**
   * Retrigger the `canplaythrough` event that was triggered by the {@link Tech}.
   *
   * @fires Player#canplaythrough
   * @listens Tech#canplaythrough
   * @private
   */;_proto.handleTechCanPlayThrough_=function handleTechCanPlayThrough_(){this.removeClass('vjs-waiting');/**
     * The media has a readyState of HAVE_ENOUGH_DATA or greater. This means that the
     * entire media file can be played without buffering.
     *
     * @event Player#canplaythrough
     * @type {EventTarget~Event}
     */this.trigger('canplaythrough');}/**
   * Retrigger the `playing` event that was triggered by the {@link Tech}.
   *
   * @fires Player#playing
   * @listens Tech#playing
   * @private
   */;_proto.handleTechPlaying_=function handleTechPlaying_(){this.removeClass('vjs-waiting');/**
     * The media is no longer blocked from playback, and has started playing.
     *
     * @event Player#playing
     * @type {EventTarget~Event}
     */this.trigger('playing');}/**
   * Retrigger the `seeking` event that was triggered by the {@link Tech}.
   *
   * @fires Player#seeking
   * @listens Tech#seeking
   * @private
   */;_proto.handleTechSeeking_=function handleTechSeeking_(){this.addClass('vjs-seeking');/**
     * Fired whenever the player is jumping to a new time
     *
     * @event Player#seeking
     * @type {EventTarget~Event}
     */this.trigger('seeking');}/**
   * Retrigger the `seeked` event that was triggered by the {@link Tech}.
   *
   * @fires Player#seeked
   * @listens Tech#seeked
   * @private
   */;_proto.handleTechSeeked_=function handleTechSeeked_(){this.removeClass('vjs-seeking');this.removeClass('vjs-ended');/**
     * Fired when the player has finished jumping to a new time
     *
     * @event Player#seeked
     * @type {EventTarget~Event}
     */this.trigger('seeked');}/**
   * Retrigger the `firstplay` event that was triggered by the {@link Tech}.
   *
   * @fires Player#firstplay
   * @listens Tech#firstplay
   * @deprecated As of 6.0 firstplay event is deprecated.
   *             As of 6.0 passing the `starttime` option to the player and the firstplay event are deprecated.
   * @private
   */;_proto.handleTechFirstPlay_=function handleTechFirstPlay_(){// If the first starttime attribute is specified
// then we will start at the given offset in seconds
if(this.options_.starttime){log.warn('Passing the `starttime` option to the player will be deprecated in 6.0');this.currentTime(this.options_.starttime);}this.addClass('vjs-has-started');/**
     * Fired the first time a video is played. Not part of the HLS spec, and this is
     * probably not the best implementation yet, so use sparingly. If you don't have a
     * reason to prevent playback, use `myPlayer.one('play');` instead.
     *
     * @event Player#firstplay
     * @deprecated As of 6.0 firstplay event is deprecated.
     * @type {EventTarget~Event}
     */this.trigger('firstplay');}/**
   * Retrigger the `pause` event that was triggered by the {@link Tech}.
   *
   * @fires Player#pause
   * @listens Tech#pause
   * @private
   */;_proto.handleTechPause_=function handleTechPause_(){this.removeClass('vjs-playing');this.addClass('vjs-paused');/**
     * Fired whenever the media has been paused
     *
     * @event Player#pause
     * @type {EventTarget~Event}
     */this.trigger('pause');}/**
   * Retrigger the `ended` event that was triggered by the {@link Tech}.
   *
   * @fires Player#ended
   * @listens Tech#ended
   * @private
   */;_proto.handleTechEnded_=function handleTechEnded_(){this.addClass('vjs-ended');if(this.options_.loop){this.currentTime(0);this.play();}else if(!this.paused()){this.pause();}/**
     * Fired when the end of the media resource is reached (currentTime == duration)
     *
     * @event Player#ended
     * @type {EventTarget~Event}
     */this.trigger('ended');}/**
   * Fired when the duration of the media resource is first known or changed
   *
   * @listens Tech#durationchange
   * @private
   */;_proto.handleTechDurationChange_=function handleTechDurationChange_(){this.duration(this.techGet_('duration'));}/**
   * Handle a click on the media element to play/pause
   *
   * @param {EventTarget~Event} event
   *        the event that caused this function to trigger
   *
   * @listens Tech#mousedown
   * @private
   */;_proto.handleTechClick_=function handleTechClick_(event){if(!isSingleLeftClick(event)){return;}// When controls are disabled a click should not toggle playback because
// the click is considered a control
if(!this.controls_){return;}if(this.paused()){silencePromise(this.play());}else{this.pause();}}/**
   * Handle a double-click on the media element to enter/exit fullscreen
   *
   * @param {EventTarget~Event} event
   *        the event that caused this function to trigger
   *
   * @listens Tech#dblclick
   * @private
   */;_proto.handleTechDoubleClick_=function handleTechDoubleClick_(event){if(!this.controls_){return;}// we do not want to toggle fullscreen state
// when double-clicking inside a control bar or a modal
var inAllowedEls=Array.prototype.some.call(this.$$('.vjs-control-bar, .vjs-modal-dialog'),function(el){return el.contains(event.target);});if(!inAllowedEls){/*
       * options.userActions.doubleClick
       *
       * If `undefined` or `true`, double-click toggles fullscreen if controls are present
       * Set to `false` to disable double-click handling
       * Set to a function to substitute an external double-click handler
       */if(this.options_===undefined||this.options_.userActions===undefined||this.options_.userActions.doubleClick===undefined||this.options_.userActions.doubleClick!==false){if(this.options_!==undefined&&this.options_.userActions!==undefined&&typeof this.options_.userActions.doubleClick==='function'){this.options_.userActions.doubleClick.call(this,event);}else if(this.isFullscreen()){this.exitFullscreen();}else{this.requestFullscreen();}}}}/**
   * Handle a tap on the media element. It will toggle the user
   * activity state, which hides and shows the controls.
   *
   * @listens Tech#tap
   * @private
   */;_proto.handleTechTap_=function handleTechTap_(){this.userActive(!this.userActive());}/**
   * Handle touch to start
   *
   * @listens Tech#touchstart
   * @private
   */;_proto.handleTechTouchStart_=function handleTechTouchStart_(){this.userWasActive=this.userActive();}/**
   * Handle touch to move
   *
   * @listens Tech#touchmove
   * @private
   */;_proto.handleTechTouchMove_=function handleTechTouchMove_(){if(this.userWasActive){this.reportUserActivity();}}/**
   * Handle touch to end
   *
   * @param {EventTarget~Event} event
   *        the touchend event that triggered
   *        this function
   *
   * @listens Tech#touchend
   * @private
   */;_proto.handleTechTouchEnd_=function handleTechTouchEnd_(event){// Stop the mouse events from also happening
event.preventDefault();}/**
   * native click events on the SWF aren't triggered on IE11, Win8.1RT
   * use stageclick events triggered from inside the SWF instead
   *
   * @private
   * @listens stageclick
   */;_proto.handleStageClick_=function handleStageClick_(){this.reportUserActivity();}/**
   * @private
   */;_proto.toggleFullscreenClass_=function toggleFullscreenClass_(){if(this.isFullscreen()){this.addClass('vjs-fullscreen');}else{this.removeClass('vjs-fullscreen');}}/**
   * when the document fschange event triggers it calls this
   */;_proto.documentFullscreenChange_=function documentFullscreenChange_(e){var fsApi=FullscreenApi;this.isFullscreen(_document2.default[fsApi.fullscreenElement]===this.el()||this.el().matches(':'+fsApi.fullscreen));// If cancelling fullscreen, remove event listener.
if(this.isFullscreen()===false){off(_document2.default,fsApi.fullscreenchange,this.boundDocumentFullscreenChange_);}if(!prefixedAPI){/**
       * @event Player#fullscreenchange
       * @type {EventTarget~Event}
       */this.trigger('fullscreenchange');}}/**
   * Handle Tech Fullscreen Change
   *
   * @param {EventTarget~Event} event
   *        the fullscreenchange event that triggered this function
   *
   * @param {Object} data
   *        the data that was sent with the event
   *
   * @private
   * @listens Tech#fullscreenchange
   * @fires Player#fullscreenchange
   */;_proto.handleTechFullscreenChange_=function handleTechFullscreenChange_(event,data){if(data){this.isFullscreen(data.isFullscreen);}/**
     * Fired when going in and out of fullscreen.
     *
     * @event Player#fullscreenchange
     * @type {EventTarget~Event}
     */this.trigger('fullscreenchange');}/**
   * Fires when an error occurred during the loading of an audio/video.
   *
   * @private
   * @listens Tech#error
   */;_proto.handleTechError_=function handleTechError_(){var error=this.tech_.error();this.error(error);}/**
   * Retrigger the `textdata` event that was triggered by the {@link Tech}.
   *
   * @fires Player#textdata
   * @listens Tech#textdata
   * @private
   */;_proto.handleTechTextData_=function handleTechTextData_(){var data=null;if(arguments.length>1){data=arguments[1];}/**
     * Fires when we get a textdata event from tech
     *
     * @event Player#textdata
     * @type {EventTarget~Event}
     */this.trigger('textdata',data);}/**
   * Get object for cached values.
   *
   * @return {Object}
   *         get the current object cache
   */;_proto.getCache=function getCache(){return this.cache_;}/**
   * Resets the internal cache object.
   *
   * Using this function outside the player constructor or reset method may
   * have unintended side-effects.
   *
   * @private
   */;_proto.resetCache_=function resetCache_(){this.cache_={// Right now, the currentTime is not _really_ cached because it is always
// retrieved from the tech (see: currentTime). However, for completeness,
// we set it to zero here to ensure that if we do start actually caching
// it, we reset it along with everything else.
currentTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:'',source:{},sources:[],volume:1};}/**
   * Pass values to the playback tech
   *
   * @param {string} [method]
   *        the method to call
   *
   * @param {Object} arg
   *        the argument to pass
   *
   * @private
   */;_proto.techCall_=function techCall_(method,arg){// If it's not ready yet, call method when it is
this.ready(function(){if(method in allowedSetters){return set$1(this.middleware_,this.tech_,method,arg);}else if(method in allowedMediators){return mediate(this.middleware_,this.tech_,method,arg);}try{if(this.tech_){this.tech_[method](arg);}}catch(e){log(e);throw e;}},true);}/**
   * Get calls can't wait for the tech, and sometimes don't need to.
   *
   * @param {string} method
   *        Tech method
   *
   * @return {Function|undefined}
   *         the method or undefined
   *
   * @private
   */;_proto.techGet_=function techGet_(method){if(!this.tech_||!this.tech_.isReady_){return;}if(method in allowedGetters){return get(this.middleware_,this.tech_,method);}else if(method in allowedMediators){return mediate(this.middleware_,this.tech_,method);}// Flash likes to die and reload when you hide or reposition it.
// In these cases the object methods go away and we get errors.
// When that happens we'll catch the errors and inform tech that it's not ready any more.
try{return this.tech_[method]();}catch(e){// When building additional tech libs, an expected method may not be defined yet
if(this.tech_[method]===undefined){log("Video.js: "+method+" method not defined for "+this.techName_+" playback technology.",e);throw e;}// When a method isn't available on the object it throws a TypeError
if(e.name==='TypeError'){log("Video.js: "+method+" unavailable on "+this.techName_+" playback technology element.",e);this.tech_.isReady_=false;throw e;}// If error unknown, just log and throw
log(e);throw e;}}/**
   * Attempt to begin playback at the first opportunity.
   *
   * @return {Promise|undefined}
   *         Returns a promise if the browser supports Promises (or one
   *         was passed in as an option). This promise will be resolved on
   *         the return value of play. If this is undefined it will fulfill the
   *         promise chain otherwise the promise chain will be fulfilled when
   *         the promise from play is fulfilled.
   */;_proto.play=function play(){var _this8=this;var PromiseClass=this.options_.Promise||_window2.default.Promise;if(PromiseClass){return new PromiseClass(function(resolve){_this8.play_(resolve);});}return this.play_();}/**
   * The actual logic for play, takes a callback that will be resolved on the
   * return value of play. This allows us to resolve to the play promise if there
   * is one on modern browsers.
   *
   * @private
   * @param {Function} [callback]
   *        The callback that should be called when the techs play is actually called
   */;_proto.play_=function play_(callback){var _this9=this;if(callback===void 0){callback=silencePromise;}this.playCallbacks_.push(callback);var isSrcReady=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));// treat calls to play_ somewhat like the `one` event function
if(this.waitToPlay_){this.off(['ready','loadstart'],this.waitToPlay_);this.waitToPlay_=null;}// if the player/tech is not ready or the src itself is not ready
// queue up a call to play on `ready` or `loadstart`
if(!this.isReady_||!isSrcReady){this.waitToPlay_=function(e){_this9.play_();};this.one(['ready','loadstart'],this.waitToPlay_);// if we are in Safari, there is a high chance that loadstart will trigger after the gesture timeperiod
// in that case, we need to prime the video element by calling load so it'll be ready in time
if(!isSrcReady&&(IS_ANY_SAFARI||IS_IOS)){this.load();}return;}// If the player/tech is ready and we have a source, we can attempt playback.
var val=this.techGet_('play');// play was terminated if the returned value is null
if(val===null){this.runPlayTerminatedQueue_();}else{this.runPlayCallbacks_(val);}}/**
   * These functions will be run when if play is terminated. If play
   * runPlayCallbacks_ is run these function will not be run. This allows us
   * to differenciate between a terminated play and an actual call to play.
   */;_proto.runPlayTerminatedQueue_=function runPlayTerminatedQueue_(){var queue=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];queue.forEach(function(q){q();});}/**
   * When a callback to play is delayed we have to run these
   * callbacks when play is actually called on the tech. This function
   * runs the callbacks that were delayed and accepts the return value
   * from the tech.
   *
   * @param {undefined|Promise} val
   *        The return value from the tech.
   */;_proto.runPlayCallbacks_=function runPlayCallbacks_(val){var callbacks=this.playCallbacks_.slice(0);this.playCallbacks_=[];// clear play terminatedQueue since we finished a real play
this.playTerminatedQueue_=[];callbacks.forEach(function(cb){cb(val);});}/**
   * Pause the video playback
   *
   * @return {Player}
   *         A reference to the player object this function was called on
   */;_proto.pause=function pause(){this.techCall_('pause');}/**
   * Check if the player is paused or has yet to play
   *
   * @return {boolean}
   *         - false: if the media is currently playing
   *         - true: if media is not currently playing
   */;_proto.paused=function paused(){// The initial state of paused should be true (in Safari it's actually false)
return this.techGet_('paused')===false?false:true;}/**
   * Get a TimeRange object representing the current ranges of time that the user
   * has played.
   *
   * @return {TimeRange}
   *         A time range object that represents all the increments of time that have
   *         been played.
   */;_proto.played=function played(){return this.techGet_('played')||createTimeRanges(0,0);}/**
   * Returns whether or not the user is "scrubbing". Scrubbing is
   * when the user has clicked the progress bar handle and is
   * dragging it along the progress bar.
   *
   * @param {boolean} [isScrubbing]
   *        whether the user is or is not scrubbing
   *
   * @return {boolean}
   *         The value of scrubbing when getting
   */;_proto.scrubbing=function scrubbing(isScrubbing){if(typeof isScrubbing==='undefined'){return this.scrubbing_;}this.scrubbing_=!!isScrubbing;if(isScrubbing){this.addClass('vjs-scrubbing');}else{this.removeClass('vjs-scrubbing');}}/**
   * Get or set the current time (in seconds)
   *
   * @param {number|string} [seconds]
   *        The time to seek to in seconds
   *
   * @return {number}
   *         - the current time in seconds when getting
   */;_proto.currentTime=function currentTime(seconds){if(typeof seconds!=='undefined'){if(seconds<0){seconds=0;}this.techCall_('setCurrentTime',seconds);return;}// cache last currentTime and return. default to 0 seconds
//
// Caching the currentTime is meant to prevent a massive amount of reads on the tech's
// currentTime when scrubbing, but may not provide much performance benefit afterall.
// Should be tested. Also something has to read the actual current time or the cache will
// never get updated.
this.cache_.currentTime=this.techGet_('currentTime')||0;return this.cache_.currentTime;}/**
   * Normally gets the length in time of the video in seconds;
   * in all but the rarest use cases an argument will NOT be passed to the method
   *
   * > **NOTE**: The video must have started loading before the duration can be
   * known, and in the case of Flash, may not be known until the video starts
   * playing.
   *
   * @fires Player#durationchange
   *
   * @param {number} [seconds]
   *        The duration of the video to set in seconds
   *
   * @return {number}
   *         - The duration of the video in seconds when getting
   */;_proto.duration=function duration(seconds){if(seconds===undefined){// return NaN if the duration is not known
return this.cache_.duration!==undefined?this.cache_.duration:NaN;}seconds=parseFloat(seconds);// Standardize on Infinity for signaling video is live
if(seconds<0){seconds=Infinity;}if(seconds!==this.cache_.duration){// Cache the last set value for optimized scrubbing (esp. Flash)
this.cache_.duration=seconds;if(seconds===Infinity){this.addClass('vjs-live');if(this.options_.liveui&&this.player_.liveTracker){this.addClass('vjs-liveui');}}else{this.removeClass('vjs-live');this.removeClass('vjs-liveui');}if(!isNaN(seconds)){// Do not fire durationchange unless the duration value is known.
// @see [Spec]{@link https://www.w3.org/TR/2011/WD-html5-20110113/video.html#media-element-load-algorithm}
/**
         * @event Player#durationchange
         * @type {EventTarget~Event}
         */this.trigger('durationchange');}}}/**
   * Calculates how much time is left in the video. Not part
   * of the native video API.
   *
   * @return {number}
   *         The time remaining in seconds
   */;_proto.remainingTime=function remainingTime(){return this.duration()-this.currentTime();}/**
   * A remaining time function that is intented to be used when
   * the time is to be displayed directly to the user.
   *
   * @return {number}
   *         The rounded time remaining in seconds
   */;_proto.remainingTimeDisplay=function remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime());}//
// Kind of like an array of portions of the video that have been downloaded.
/**
   * Get a TimeRange object with an array of the times of the video
   * that have been downloaded. If you just want the percent of the
   * video that's been downloaded, use bufferedPercent.
   *
   * @see [Buffered Spec]{@link http://dev.w3.org/html5/spec/video.html#dom-media-buffered}
   *
   * @return {TimeRange}
   *         A mock TimeRange object (following HTML spec)
   */;_proto.buffered=function buffered(){var buffered=this.techGet_('buffered');if(!buffered||!buffered.length){buffered=createTimeRanges(0,0);}return buffered;}/**
   * Get the percent (as a decimal) of the video that's been downloaded.
   * This method is not a part of the native HTML video API.
   *
   * @return {number}
   *         A decimal between 0 and 1 representing the percent
   *         that is buffered 0 being 0% and 1 being 100%
   */;_proto.bufferedPercent=function bufferedPercent$$1(){return bufferedPercent(this.buffered(),this.duration());}/**
   * Get the ending time of the last buffered time range
   * This is used in the progress bar to encapsulate all time ranges.
   *
   * @return {number}
   *         The end of the last buffered time range
   */;_proto.bufferedEnd=function bufferedEnd(){var buffered=this.buffered();var duration=this.duration();var end=buffered.end(buffered.length-1);if(end>duration){end=duration;}return end;}/**
   * Get or set the current volume of the media
   *
   * @param  {number} [percentAsDecimal]
   *         The new volume as a decimal percent:
   *         - 0 is muted/0%/off
   *         - 1.0 is 100%/full
   *         - 0.5 is half volume or 50%
   *
   * @return {number}
   *         The current volume as a percent when getting
   */;_proto.volume=function volume(percentAsDecimal){var vol;if(percentAsDecimal!==undefined){// Force value to between 0 and 1
vol=Math.max(0,Math.min(1,parseFloat(percentAsDecimal)));this.cache_.volume=vol;this.techCall_('setVolume',vol);if(vol>0){this.lastVolume_(vol);}return;}// Default to 1 when returning current volume.
vol=parseFloat(this.techGet_('volume'));return isNaN(vol)?1:vol;}/**
   * Get the current muted state, or turn mute on or off
   *
   * @param {boolean} [muted]
   *        - true to mute
   *        - false to unmute
   *
   * @return {boolean}
   *         - true if mute is on and getting
   *         - false if mute is off and getting
   */;_proto.muted=function muted(_muted){if(_muted!==undefined){this.techCall_('setMuted',_muted);return;}return this.techGet_('muted')||false;}/**
   * Get the current defaultMuted state, or turn defaultMuted on or off. defaultMuted
   * indicates the state of muted on initial playback.
   *
   * ```js
   *   var myPlayer = videojs('some-player-id');
   *
   *   myPlayer.src("http://www.example.com/path/to/video.mp4");
   *
   *   // get, should be false
   *   console.log(myPlayer.defaultMuted());
   *   // set to true
   *   myPlayer.defaultMuted(true);
   *   // get should be true
   *   console.log(myPlayer.defaultMuted());
   * ```
   *
   * @param {boolean} [defaultMuted]
   *        - true to mute
   *        - false to unmute
   *
   * @return {boolean|Player}
   *         - true if defaultMuted is on and getting
   *         - false if defaultMuted is off and getting
   *         - A reference to the current player when setting
   */;_proto.defaultMuted=function defaultMuted(_defaultMuted){if(_defaultMuted!==undefined){return this.techCall_('setDefaultMuted',_defaultMuted);}return this.techGet_('defaultMuted')||false;}/**
   * Get the last volume, or set it
   *
   * @param  {number} [percentAsDecimal]
   *         The new last volume as a decimal percent:
   *         - 0 is muted/0%/off
   *         - 1.0 is 100%/full
   *         - 0.5 is half volume or 50%
   *
   * @return {number}
   *         the current value of lastVolume as a percent when getting
   *
   * @private
   */;_proto.lastVolume_=function lastVolume_(percentAsDecimal){if(percentAsDecimal!==undefined&&percentAsDecimal!==0){this.cache_.lastVolume=percentAsDecimal;return;}return this.cache_.lastVolume;}/**
   * Check if current tech can support native fullscreen
   * (e.g. with built in controls like iOS, so not our flash swf)
   *
   * @return {boolean}
   *         if native fullscreen is supported
   */;_proto.supportsFullScreen=function supportsFullScreen(){return this.techGet_('supportsFullScreen')||false;}/**
   * Check if the player is in fullscreen mode or tell the player that it
   * is or is not in fullscreen mode.
   *
   * > NOTE: As of the latest HTML5 spec, isFullscreen is no longer an official
   * property and instead document.fullscreenElement is used. But isFullscreen is
   * still a valuable property for internal player workings.
   *
   * @param  {boolean} [isFS]
   *         Set the players current fullscreen state
   *
   * @return {boolean}
   *         - true if fullscreen is on and getting
   *         - false if fullscreen is off and getting
   */;_proto.isFullscreen=function isFullscreen(isFS){if(isFS!==undefined){this.isFullscreen_=!!isFS;this.toggleFullscreenClass_();return;}return!!this.isFullscreen_;}/**
   * Increase the size of the video to full screen
   * In some browsers, full screen is not supported natively, so it enters
   * "full window mode", where the video fills the browser window.
   * In browsers and devices that support native full screen, sometimes the
   * browser's default controls will be shown, and not the Video.js custom skin.
   * This includes most mobile devices (iOS, Android) and older versions of
   * Safari.
   *
   * @fires Player#fullscreenchange
   */;_proto.requestFullscreen=function requestFullscreen(){var fsApi=FullscreenApi;this.isFullscreen(true);if(fsApi.requestFullscreen){// the browser supports going fullscreen at the element level so we can
// take the controls fullscreen as well as the video
// Trigger fullscreenchange event after change
// We have to specifically add this each time, and remove
// when canceling fullscreen. Otherwise if there's multiple
// players on a page, they would all be reacting to the same fullscreen
// events
on(_document2.default,fsApi.fullscreenchange,this.boundDocumentFullscreenChange_);this.el_[fsApi.requestFullscreen]();}else if(this.tech_.supportsFullScreen()){// we can't take the video.js controls fullscreen but we can go fullscreen
// with native controls
this.techCall_('enterFullScreen');}else{// fullscreen isn't supported so we'll just stretch the video element to
// fill the viewport
this.enterFullWindow();/**
       * @event Player#fullscreenchange
       * @type {EventTarget~Event}
       */this.trigger('fullscreenchange');}}/**
   * Return the video to its normal size after having been in full screen mode
   *
   * @fires Player#fullscreenchange
   */;_proto.exitFullscreen=function exitFullscreen(){var fsApi=FullscreenApi;this.isFullscreen(false);// Check for browser element fullscreen support
if(fsApi.requestFullscreen){_document2.default[fsApi.exitFullscreen]();}else if(this.tech_.supportsFullScreen()){this.techCall_('exitFullScreen');}else{this.exitFullWindow();/**
       * @event Player#fullscreenchange
       * @type {EventTarget~Event}
       */this.trigger('fullscreenchange');}}/**
   * When fullscreen isn't supported we can stretch the
   * video container to as wide as the browser will let us.
   *
   * @fires Player#enterFullWindow
   */;_proto.enterFullWindow=function enterFullWindow(){this.isFullWindow=true;// Storing original doc overflow value to return to when fullscreen is off
this.docOrigOverflow=_document2.default.documentElement.style.overflow;// Add listener for esc key to exit fullscreen
on(_document2.default,'keydown',this.boundFullWindowOnEscKey_);// Hide any scroll bars
_document2.default.documentElement.style.overflow='hidden';// Apply fullscreen styles
addClass(_document2.default.body,'vjs-full-window');/**
     * @event Player#enterFullWindow
     * @type {EventTarget~Event}
     */this.trigger('enterFullWindow');}/**
   * Check for call to either exit full window or
   * full screen on ESC key
   *
   * @param {string} event
   *        Event to check for key press
   */;_proto.fullWindowOnEscKey=function fullWindowOnEscKey(event){if(_keycode2.default.isEventKey(event,'Esc')){if(this.isFullscreen()===true){this.exitFullscreen();}else{this.exitFullWindow();}}}/**
   * Exit full window
   *
   * @fires Player#exitFullWindow
   */;_proto.exitFullWindow=function exitFullWindow(){this.isFullWindow=false;off(_document2.default,'keydown',this.boundFullWindowOnEscKey_);// Unhide scroll bars.
_document2.default.documentElement.style.overflow=this.docOrigOverflow;// Remove fullscreen styles
removeClass(_document2.default.body,'vjs-full-window');// Resize the box, controller, and poster to original sizes
// this.positionAll();
/**
     * @event Player#exitFullWindow
     * @type {EventTarget~Event}
     */this.trigger('exitFullWindow');}/**
   * This gets called when a `Player` gains focus via a `focus` event.
   * Turns on listening for `keydown` events. When they happen it
   * calls `this.handleKeyPress`.
   *
   * @param {EventTarget~Event} event
   *        The `focus` event that caused this function to be called.
   *
   * @listens focus
   */;_proto.handleFocus=function handleFocus(event){// call off first to make sure we don't keep adding keydown handlers
off(_document2.default,'keydown',this.boundHandleKeyPress_);on(_document2.default,'keydown',this.boundHandleKeyPress_);}/**
   * Called when a `Player` loses focus. Turns off the listener for
   * `keydown` events. Which Stops `this.handleKeyPress` from getting called.
   *
   * @param {EventTarget~Event} event
   *        The `blur` event that caused this function to be called.
   *
   * @listens blur
   */;_proto.handleBlur=function handleBlur(event){off(_document2.default,'keydown',this.boundHandleKeyPress_);}/**
   * Called when this Player has focus and a key gets pressed down, or when
   * any Component of this player receives a key press that it doesn't handle.
   * This allows player-wide hotkeys (either as defined below, or optionally
   * by an external function).
   *
   * @param {EventTarget~Event} event
   *        The `keydown` event that caused this function to be called.
   *
   * @listens keydown
   */;_proto.handleKeyPress=function handleKeyPress(event){if(this.options_.userActions&&this.options_.userActions.hotkeys&&this.options_.userActions.hotkeys!==false){if(typeof this.options_.userActions.hotkeys==='function'){this.options_.userActions.hotkeys.call(this,event);}else{this.handleHotkeys(event);}}}/**
   * Called when this Player receives a hotkey keydown event.
   * Supported player-wide hotkeys are:
   *
   *   f          - toggle fullscreen
   *   m          - toggle mute
   *   k or Space - toggle play/pause
   *
   * @param {EventTarget~Event} event
   *        The `keydown` event that caused this function to be called.
   */;_proto.handleHotkeys=function handleHotkeys(event){var hotkeys=this.options_.userActions?this.options_.userActions.hotkeys:{};// set fullscreenKey, muteKey, playPauseKey from `hotkeys`, use defaults if not set
var _hotkeys$fullscreenKe=hotkeys.fullscreenKey,fullscreenKey=_hotkeys$fullscreenKe===void 0?function(keydownEvent){return _keycode2.default.isEventKey(keydownEvent,'f');}:_hotkeys$fullscreenKe,_hotkeys$muteKey=hotkeys.muteKey,muteKey=_hotkeys$muteKey===void 0?function(keydownEvent){return _keycode2.default.isEventKey(keydownEvent,'m');}:_hotkeys$muteKey,_hotkeys$playPauseKey=hotkeys.playPauseKey,playPauseKey=_hotkeys$playPauseKey===void 0?function(keydownEvent){return _keycode2.default.isEventKey(keydownEvent,'k')||_keycode2.default.isEventKey(keydownEvent,'Space');}:_hotkeys$playPauseKey;if(fullscreenKey.call(this,event)){event.preventDefault();var FSToggle=Component.getComponent('FullscreenToggle');if(_document2.default[FullscreenApi.fullscreenEnabled]!==false){FSToggle.prototype.handleClick.call(this);}}else if(muteKey.call(this,event)){event.preventDefault();var MuteToggle=Component.getComponent('MuteToggle');MuteToggle.prototype.handleClick.call(this);}else if(playPauseKey.call(this,event)){event.preventDefault();var PlayToggle=Component.getComponent('PlayToggle');PlayToggle.prototype.handleClick.call(this);}}/**
   * Check whether the player can play a given mimetype
   *
   * @see https://www.w3.org/TR/2011/WD-html5-20110113/video.html#dom-navigator-canplaytype
   *
   * @param {string} type
   *        The mimetype to check
   *
   * @return {string}
   *         'probably', 'maybe', or '' (empty string)
   */;_proto.canPlayType=function canPlayType(type){var can;// Loop through each playback technology in the options order
for(var i=0,j=this.options_.techOrder;i<j.length;i++){var techName=j[i];var tech=Tech.getTech(techName);// Support old behavior of techs being registered as components.
// Remove once that deprecated behavior is removed.
if(!tech){tech=Component.getComponent(techName);}// Check if the current tech is defined before continuing
if(!tech){log.error("The \""+techName+"\" tech is undefined. Skipped browser support check for that tech.");continue;}// Check if the browser supports this technology
if(tech.isSupported()){can=tech.canPlayType(type);if(can){return can;}}}return'';}/**
   * Select source based on tech-order or source-order
   * Uses source-order selection if `options.sourceOrder` is truthy. Otherwise,
   * defaults to tech-order selection
   *
   * @param {Array} sources
   *        The sources for a media asset
   *
   * @return {Object|boolean}
   *         Object of source and tech order or false
   */;_proto.selectSource=function selectSource(sources){var _this10=this;// Get only the techs specified in `techOrder` that exist and are supported by the
// current platform
var techs=this.options_.techOrder.map(function(techName){return[techName,Tech.getTech(techName)];}).filter(function(_ref){var techName=_ref[0],tech=_ref[1];// Check if the current tech is defined before continuing
if(tech){// Check if the browser supports this technology
return tech.isSupported();}log.error("The \""+techName+"\" tech is undefined. Skipped browser support check for that tech.");return false;});// Iterate over each `innerArray` element once per `outerArray` element and execute
// `tester` with both. If `tester` returns a non-falsy value, exit early and return
// that value.
var findFirstPassingTechSourcePair=function findFirstPassingTechSourcePair(outerArray,innerArray,tester){var found;outerArray.some(function(outerChoice){return innerArray.some(function(innerChoice){found=tester(outerChoice,innerChoice);if(found){return true;}});});return found;};var foundSourceAndTech;var flip=function flip(fn){return function(a,b){return fn(b,a);};};var finder=function finder(_ref2,source){var techName=_ref2[0],tech=_ref2[1];if(tech.canPlaySource(source,_this10.options_[techName.toLowerCase()])){return{source:source,tech:techName};}};// Depending on the truthiness of `options.sourceOrder`, we swap the order of techs and sources
// to select from them based on their priority.
if(this.options_.sourceOrder){// Source-first ordering
foundSourceAndTech=findFirstPassingTechSourcePair(sources,techs,flip(finder));}else{// Tech-first ordering
foundSourceAndTech=findFirstPassingTechSourcePair(techs,sources,finder);}return foundSourceAndTech||false;}/**
   * Get or set the video source.
   *
   * @param {Tech~SourceObject|Tech~SourceObject[]|string} [source]
   *        A SourceObject, an array of SourceObjects, or a string referencing
   *        a URL to a media source. It is _highly recommended_ that an object
   *        or array of objects is used here, so that source selection
   *        algorithms can take the `type` into account.
   *
   *        If not provided, this method acts as a getter.
   *
   * @return {string|undefined}
   *         If the `source` argument is missing, returns the current source
   *         URL. Otherwise, returns nothing/undefined.
   */;_proto.src=function src(source){var _this11=this;// getter usage
if(typeof source==='undefined'){return this.cache_.src||'';}// filter out invalid sources and turn our source into
// an array of source objects
var sources=filterSource(source);// if a source was passed in then it is invalid because
// it was filtered to a zero length Array. So we have to
// show an error
if(!sources.length){this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)});},0);return;}// intial sources
this.changingSrc_=true;this.cache_.sources=sources;this.updateSourceCaches_(sources[0]);// middlewareSource is the source after it has been changed by middleware
setSource(this,sources[0],function(middlewareSource,mws){_this11.middleware_=mws;// since sourceSet is async we have to update the cache again after we select a source since
// the source that is selected could be out of order from the cache update above this callback.
_this11.cache_.sources=sources;_this11.updateSourceCaches_(middlewareSource);var err=_this11.src_(middlewareSource);if(err){if(sources.length>1){return _this11.src(sources.slice(1));}_this11.changingSrc_=false;// We need to wrap this in a timeout to give folks a chance to add error event handlers
_this11.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)});},0);// we could not find an appropriate tech, but let's still notify the delegate that this is it
// this needs a better comment about why this is needed
_this11.triggerReady();return;}setTech(mws,_this11.tech_);});}/**
   * Set the source object on the tech, returns a boolean that indicates whether
   * there is a tech that can play the source or not
   *
   * @param {Tech~SourceObject} source
   *        The source object to set on the Tech
   *
   * @return {boolean}
   *         - True if there is no Tech to playback this source
   *         - False otherwise
   *
   * @private
   */;_proto.src_=function src_(source){var _this12=this;var sourceTech=this.selectSource([source]);if(!sourceTech){return true;}if(!titleCaseEquals(sourceTech.tech,this.techName_)){this.changingSrc_=true;// load this technology with the chosen source
this.loadTech_(sourceTech.tech,sourceTech.source);this.tech_.ready(function(){_this12.changingSrc_=false;});return false;}// wait until the tech is ready to set the source
// and set it synchronously if possible (#2326)
this.ready(function(){// The setSource tech method was added with source handlers
// so older techs won't support it
// We need to check the direct prototype for the case where subclasses
// of the tech do not support source handlers
if(this.tech_.constructor.prototype.hasOwnProperty('setSource')){this.techCall_('setSource',source);}else{this.techCall_('src',source.src);}this.changingSrc_=false;},true);return false;}/**
   * Begin loading the src data.
   */;_proto.load=function load(){this.techCall_('load');}/**
   * Reset the player. Loads the first tech in the techOrder,
   * removes all the text tracks in the existing `tech`,
   * and calls `reset` on the `tech`.
   */;_proto.reset=function reset(){var _this13=this;var PromiseClass=this.options_.Promise||_window2.default.Promise;if(this.paused()||!PromiseClass){this.doReset_();}else{var playPromise=this.play();silencePromise(playPromise.then(function(){return _this13.doReset_();}));}};_proto.doReset_=function doReset_(){if(this.tech_){this.tech_.clearTracks('text');}this.resetCache_();this.poster('');this.loadTech_(this.options_.techOrder[0],null);this.techCall_('reset');this.resetControlBarUI_();if(isEvented(this)){this.trigger('playerreset');}}/**
   * Reset Control Bar's UI by calling sub-methods that reset
   * all of Control Bar's components
   */;_proto.resetControlBarUI_=function resetControlBarUI_(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_();}/**
   * Reset tech's progress so progress bar is reset in the UI
   */;_proto.resetProgressBar_=function resetProgressBar_(){this.currentTime(0);var _this$controlBar=this.controlBar,durationDisplay=_this$controlBar.durationDisplay,remainingTimeDisplay=_this$controlBar.remainingTimeDisplay;if(durationDisplay){durationDisplay.updateContent();}if(remainingTimeDisplay){remainingTimeDisplay.updateContent();}}/**
   * Reset Playback ratio
   */;_proto.resetPlaybackRate_=function resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_();}/**
   * Reset Volume bar
   */;_proto.resetVolumeBar_=function resetVolumeBar_(){this.volume(1.0);this.trigger('volumechange');}/**
   * Returns all of the current source objects.
   *
   * @return {Tech~SourceObject[]}
   *         The current source objects
   */;_proto.currentSources=function currentSources(){var source=this.currentSource();var sources=[];// assume `{}` or `{ src }`
if(Object.keys(source).length!==0){sources.push(source);}return this.cache_.sources||sources;}/**
   * Returns the current source object.
   *
   * @return {Tech~SourceObject}
   *         The current source object
   */;_proto.currentSource=function currentSource(){return this.cache_.source||{};}/**
   * Returns the fully qualified URL of the current source value e.g. http://mysite.com/video.mp4
   * Can be used in conjunction with `currentType` to assist in rebuilding the current source object.
   *
   * @return {string}
   *         The current source
   */;_proto.currentSrc=function currentSrc(){return this.currentSource()&&this.currentSource().src||'';}/**
   * Get the current source type e.g. video/mp4
   * This can allow you rebuild the current source object so that you could load the same
   * source and tech later
   *
   * @return {string}
   *         The source MIME type
   */;_proto.currentType=function currentType(){return this.currentSource()&&this.currentSource().type||'';}/**
   * Get or set the preload attribute
   *
   * @param {boolean} [value]
   *        - true means that we should preload
   *        - false means that we should not preload
   *
   * @return {string}
   *         The preload attribute value when getting
   */;_proto.preload=function preload(value){if(value!==undefined){this.techCall_('setPreload',value);this.options_.preload=value;return;}return this.techGet_('preload');}/**
   * Get or set the autoplay option. When this is a boolean it will
   * modify the attribute on the tech. When this is a string the attribute on
   * the tech will be removed and `Player` will handle autoplay on loadstarts.
   *
   * @param {boolean|string} [value]
   *        - true: autoplay using the browser behavior
   *        - false: do not autoplay
   *        - 'play': call play() on every loadstart
   *        - 'muted': call muted() then play() on every loadstart
   *        - 'any': call play() on every loadstart. if that fails call muted() then play().
   *        - *: values other than those listed here will be set `autoplay` to true
   *
   * @return {boolean|string}
   *         The current value of autoplay when getting
   */;_proto.autoplay=function autoplay(value){// getter usage
if(value===undefined){return this.options_.autoplay||false;}var techAutoplay;// if the value is a valid string set it to that
if(typeof value==='string'&&/(any|play|muted)/.test(value)){this.options_.autoplay=value;this.manualAutoplay_(value);techAutoplay=false;// any falsy value sets autoplay to false in the browser,
// lets do the same
}else if(!value){this.options_.autoplay=false;// any other value (ie truthy) sets autoplay to true
}else{this.options_.autoplay=true;}techAutoplay=typeof techAutoplay==='undefined'?this.options_.autoplay:techAutoplay;// if we don't have a tech then we do not queue up
// a setAutoplay call on tech ready. We do this because the
// autoplay option will be passed in the constructor and we
// do not need to set it twice
if(this.tech_){this.techCall_('setAutoplay',techAutoplay);}}/**
   * Set or unset the playsinline attribute.
   * Playsinline tells the browser that non-fullscreen playback is preferred.
   *
   * @param {boolean} [value]
   *        - true means that we should try to play inline by default
   *        - false means that we should use the browser's default playback mode,
   *          which in most cases is inline. iOS Safari is a notable exception
   *          and plays fullscreen by default.
   *
   * @return {string|Player}
   *         - the current value of playsinline
   *         - the player when setting
   *
   * @see [Spec]{@link https://html.spec.whatwg.org/#attr-video-playsinline}
   */;_proto.playsinline=function playsinline(value){if(value!==undefined){this.techCall_('setPlaysinline',value);this.options_.playsinline=value;return this;}return this.techGet_('playsinline');}/**
   * Get or set the loop attribute on the video element.
   *
   * @param {boolean} [value]
   *        - true means that we should loop the video
   *        - false means that we should not loop the video
   *
   * @return {boolean}
   *         The current value of loop when getting
   */;_proto.loop=function loop(value){if(value!==undefined){this.techCall_('setLoop',value);this.options_.loop=value;return;}return this.techGet_('loop');}/**
   * Get or set the poster image source url
   *
   * @fires Player#posterchange
   *
   * @param {string} [src]
   *        Poster image source URL
   *
   * @return {string}
   *         The current value of poster when getting
   */;_proto.poster=function poster(src){if(src===undefined){return this.poster_;}// The correct way to remove a poster is to set as an empty string
// other falsey values will throw errors
if(!src){src='';}if(src===this.poster_){return;}// update the internal poster variable
this.poster_=src;// update the tech's poster
this.techCall_('setPoster',src);this.isPosterFromTech_=false;// alert components that the poster has been set
/**
     * This event fires when the poster image is changed on the player.
     *
     * @event Player#posterchange
     * @type {EventTarget~Event}
     */this.trigger('posterchange');}/**
   * Some techs (e.g. YouTube) can provide a poster source in an
   * asynchronous way. We want the poster component to use this
   * poster source so that it covers up the tech's controls.
   * (YouTube's play button). However we only want to use this
   * source if the player user hasn't set a poster through
   * the normal APIs.
   *
   * @fires Player#posterchange
   * @listens Tech#posterchange
   * @private
   */;_proto.handleTechPosterChange_=function handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var newPoster=this.tech_.poster()||'';if(newPoster!==this.poster_){this.poster_=newPoster;this.isPosterFromTech_=true;// Let components know the poster has changed
this.trigger('posterchange');}}}/**
   * Get or set whether or not the controls are showing.
   *
   * @fires Player#controlsenabled
   *
   * @param {boolean} [bool]
   *        - true to turn controls on
   *        - false to turn controls off
   *
   * @return {boolean}
   *         The current value of controls when getting
   */;_proto.controls=function controls(bool){if(bool===undefined){return!!this.controls_;}bool=!!bool;// Don't trigger a change event unless it actually changed
if(this.controls_===bool){return;}this.controls_=bool;if(this.usingNativeControls()){this.techCall_('setControls',bool);}if(this.controls_){this.removeClass('vjs-controls-disabled');this.addClass('vjs-controls-enabled');/**
       * @event Player#controlsenabled
       * @type {EventTarget~Event}
       */this.trigger('controlsenabled');if(!this.usingNativeControls()){this.addTechControlsListeners_();}}else{this.removeClass('vjs-controls-enabled');this.addClass('vjs-controls-disabled');/**
       * @event Player#controlsdisabled
       * @type {EventTarget~Event}
       */this.trigger('controlsdisabled');if(!this.usingNativeControls()){this.removeTechControlsListeners_();}}}/**
   * Toggle native controls on/off. Native controls are the controls built into
   * devices (e.g. default iPhone controls), Flash, or other techs
   * (e.g. Vimeo Controls)
   * **This should only be set by the current tech, because only the tech knows
   * if it can support native controls**
   *
   * @fires Player#usingnativecontrols
   * @fires Player#usingcustomcontrols
   *
   * @param {boolean} [bool]
   *        - true to turn native controls on
   *        - false to turn native controls off
   *
   * @return {boolean}
   *         The current value of native controls when getting
   */;_proto.usingNativeControls=function usingNativeControls(bool){if(bool===undefined){return!!this.usingNativeControls_;}bool=!!bool;// Don't trigger a change event unless it actually changed
if(this.usingNativeControls_===bool){return;}this.usingNativeControls_=bool;if(this.usingNativeControls_){this.addClass('vjs-using-native-controls');/**
       * player is using the native device controls
       *
       * @event Player#usingnativecontrols
       * @type {EventTarget~Event}
       */this.trigger('usingnativecontrols');}else{this.removeClass('vjs-using-native-controls');/**
       * player is using the custom HTML controls
       *
       * @event Player#usingcustomcontrols
       * @type {EventTarget~Event}
       */this.trigger('usingcustomcontrols');}}/**
   * Set or get the current MediaError
   *
   * @fires Player#error
   *
   * @param  {MediaError|string|number} [err]
   *         A MediaError or a string/number to be turned
   *         into a MediaError
   *
   * @return {MediaError|null}
   *         The current MediaError when getting (or null)
   */;_proto.error=function error(err){if(err===undefined){return this.error_||null;}// restoring to default
if(err===null){this.error_=err;this.removeClass('vjs-error');if(this.errorDisplay){this.errorDisplay.close();}return;}this.error_=new MediaError(err);// add the vjs-error classname to the player
this.addClass('vjs-error');// log the name of the error type and any message
// IE11 logs "[object object]" and required you to expand message to see error object
log.error("(CODE:"+this.error_.code+" "+MediaError.errorTypes[this.error_.code]+")",this.error_.message,this.error_);/**
     * @event Player#error
     * @type {EventTarget~Event}
     */this.trigger('error');return;}/**
   * Report user activity
   *
   * @param {Object} event
   *        Event object
   */;_proto.reportUserActivity=function reportUserActivity(event){this.userActivity_=true;}/**
   * Get/set if user is active
   *
   * @fires Player#useractive
   * @fires Player#userinactive
   *
   * @param {boolean} [bool]
   *        - true if the user is active
   *        - false if the user is inactive
   *
   * @return {boolean}
   *         The current value of userActive when getting
   */;_proto.userActive=function userActive(bool){if(bool===undefined){return this.userActive_;}bool=!!bool;if(bool===this.userActive_){return;}this.userActive_=bool;if(this.userActive_){this.userActivity_=true;this.removeClass('vjs-user-inactive');this.addClass('vjs-user-active');/**
       * @event Player#useractive
       * @type {EventTarget~Event}
       */this.trigger('useractive');return;}// Chrome/Safari/IE have bugs where when you change the cursor it can
// trigger a mousemove event. This causes an issue when you're hiding
// the cursor when the user is inactive, and a mousemove signals user
// activity. Making it impossible to go into inactive mode. Specifically
// this happens in fullscreen when we really need to hide the cursor.
//
// When this gets resolved in ALL browsers it can be removed
// https://code.google.com/p/chromium/issues/detail?id=103041
if(this.tech_){this.tech_.one('mousemove',function(e){e.stopPropagation();e.preventDefault();});}this.userActivity_=false;this.removeClass('vjs-user-active');this.addClass('vjs-user-inactive');/**
     * @event Player#userinactive
     * @type {EventTarget~Event}
     */this.trigger('userinactive');}/**
   * Listen for user activity based on timeout value
   *
   * @private
   */;_proto.listenForUserActivity_=function listenForUserActivity_(){var mouseInProgress;var lastMoveX;var lastMoveY;var handleActivity=bind(this,this.reportUserActivity);var handleMouseMove=function handleMouseMove(e){// #1068 - Prevent mousemove spamming
// Chrome Bug: https://code.google.com/p/chromium/issues/detail?id=366970
if(e.screenX!==lastMoveX||e.screenY!==lastMoveY){lastMoveX=e.screenX;lastMoveY=e.screenY;handleActivity();}};var handleMouseDown=function handleMouseDown(){handleActivity();// For as long as the they are touching the device or have their mouse down,
// we consider them active even if they're not moving their finger or mouse.
// So we want to continue to update that they are active
this.clearInterval(mouseInProgress);// Setting userActivity=true now and setting the interval to the same time
// as the activityCheck interval (250) should ensure we never miss the
// next activityCheck
mouseInProgress=this.setInterval(handleActivity,250);};var handleMouseUp=function handleMouseUp(event){handleActivity();// Stop the interval that maintains activity if the mouse/touch is down
this.clearInterval(mouseInProgress);};// Any mouse movement will be considered user activity
this.on('mousedown',handleMouseDown);this.on('mousemove',handleMouseMove);this.on('mouseup',handleMouseUp);var controlBar=this.getChild('controlBar');// Fixes bug on Android & iOS where when tapping progressBar (when control bar is displayed)
// controlBar would no longer be hidden by default timeout.
if(controlBar&&!IS_IOS&&!IS_ANDROID){controlBar.on('mouseenter',function(event){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;this.player().options_.inactivityTimeout=0;});controlBar.on('mouseleave',function(event){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout;});}// Listen for keyboard navigation
// Shouldn't need to use inProgress interval because of key repeat
this.on('keydown',handleActivity);this.on('keyup',handleActivity);// Run an interval every 250 milliseconds instead of stuffing everything into
// the mousemove/touchmove function itself, to prevent performance degradation.
// `this.reportUserActivity` simply sets this.userActivity_ to true, which
// then gets picked up by this loop
// http://ejohn.org/blog/learning-from-twitter/
var inactivityTimeout;this.setInterval(function(){// Check to see if mouse/touch activity has happened
if(!this.userActivity_){return;}// Reset the activity tracker
this.userActivity_=false;// If the user state was inactive, set the state to active
this.userActive(true);// Clear any existing inactivity timeout to start the timer over
this.clearTimeout(inactivityTimeout);var timeout=this.options_.inactivityTimeout;if(timeout<=0){return;}// In <timeout> milliseconds, if no more activity has occurred the
// user will be considered inactive
inactivityTimeout=this.setTimeout(function(){// Protect against the case where the inactivityTimeout can trigger just
// before the next user activity is picked up by the activity check loop
// causing a flicker
if(!this.userActivity_){this.userActive(false);}},timeout);},250);}/**
   * Gets or sets the current playback rate. A playback rate of
   * 1.0 represents normal speed and 0.5 would indicate half-speed
   * playback, for instance.
   *
   * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-playbackrate
   *
   * @param {number} [rate]
   *       New playback rate to set.
   *
   * @return {number}
   *         The current playback rate when getting or 1.0
   */;_proto.playbackRate=function playbackRate(rate){if(rate!==undefined){// NOTE: this.cache_.lastPlaybackRate is set from the tech handler
// that is registered above
this.techCall_('setPlaybackRate',rate);return;}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.cache_.lastPlaybackRate||this.techGet_('playbackRate');}return 1.0;}/**
   * Gets or sets the current default playback rate. A default playback rate of
   * 1.0 represents normal speed and 0.5 would indicate half-speed playback, for instance.
   * defaultPlaybackRate will only represent what the initial playbackRate of a video was, not
   * not the current playbackRate.
   *
   * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-defaultplaybackrate
   *
   * @param {number} [rate]
   *       New default playback rate to set.
   *
   * @return {number|Player}
   *         - The default playback rate when getting or 1.0
   *         - the player when setting
   */;_proto.defaultPlaybackRate=function defaultPlaybackRate(rate){if(rate!==undefined){return this.techCall_('setDefaultPlaybackRate',rate);}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.techGet_('defaultPlaybackRate');}return 1.0;}/**
   * Gets or sets the audio flag
   *
   * @param {boolean} bool
   *        - true signals that this is an audio player
   *        - false signals that this is not an audio player
   *
   * @return {boolean}
   *         The current value of isAudio when getting
   */;_proto.isAudio=function isAudio(bool){if(bool!==undefined){this.isAudio_=!!bool;return;}return!!this.isAudio_;}/**
   * A helper method for adding a {@link TextTrack} to our
   * {@link TextTrackList}.
   *
   * In addition to the W3C settings we allow adding additional info through options.
   *
   * @see http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-addtexttrack
   *
   * @param {string} [kind]
   *        the kind of TextTrack you are adding
   *
   * @param {string} [label]
   *        the label to give the TextTrack label
   *
   * @param {string} [language]
   *        the language to set on the TextTrack
   *
   * @return {TextTrack|undefined}
   *         the TextTrack that was added or undefined
   *         if there is no tech
   */;_proto.addTextTrack=function addTextTrack(kind,label,language){if(this.tech_){return this.tech_.addTextTrack(kind,label,language);}}/**
   * Create a remote {@link TextTrack} and an {@link HTMLTrackElement}. It will
   * automatically removed from the video element whenever the source changes, unless
   * manualCleanup is set to false.
   *
   * @param {Object} options
   *        Options to pass to {@link HTMLTrackElement} during creation. See
   *        {@link HTMLTrackElement} for object properties that you should use.
   *
   * @param {boolean} [manualCleanup=true] if set to false, the TextTrack will be
   *
   * @return {HtmlTrackElement}
   *         the HTMLTrackElement that was created and added
   *         to the HtmlTrackElementList and the remote
   *         TextTrackList
   *
   * @deprecated The default value of the "manualCleanup" parameter will default
   *             to "false" in upcoming versions of Video.js
   */;_proto.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){if(this.tech_){return this.tech_.addRemoteTextTrack(options,manualCleanup);}}/**
   * Remove a remote {@link TextTrack} from the respective
   * {@link TextTrackList} and {@link HtmlTrackElementList}.
   *
   * @param {Object} track
   *        Remote {@link TextTrack} to remove
   *
   * @return {undefined}
   *         does not return anything
   */;_proto.removeRemoteTextTrack=function removeRemoteTextTrack(obj){if(obj===void 0){obj={};}var _obj=obj,track=_obj.track;if(!track){track=obj;}// destructure the input into an object with a track argument, defaulting to arguments[0]
// default the whole argument to an empty object if nothing was passed in
if(this.tech_){return this.tech_.removeRemoteTextTrack(track);}}/**
   * Gets available media playback quality metrics as specified by the W3C's Media
   * Playback Quality API.
   *
   * @see [Spec]{@link https://wicg.github.io/media-playback-quality}
   *
   * @return {Object|undefined}
   *         An object with supported media playback quality metrics or undefined if there
   *         is no tech or the tech does not support it.
   */;_proto.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return this.techGet_('getVideoPlaybackQuality');}/**
   * Get video width
   *
   * @return {number}
   *         current video width
   */;_proto.videoWidth=function videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0;}/**
   * Get video height
   *
   * @return {number}
   *         current video height
   */;_proto.videoHeight=function videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0;}/**
   * The player's language code
   * NOTE: The language should be set in the player options if you want the
   * the controls to be built with a specific language. Changing the language
   * later will not update controls text.
   *
   * @param {string} [code]
   *        the language code to set the player to
   *
   * @return {string}
   *         The current language code when getting
   */;_proto.language=function language(code){if(code===undefined){return this.language_;}this.language_=String(code).toLowerCase();}/**
   * Get the player's language dictionary
   * Merge every time, because a newly added plugin might call videojs.addLanguage() at any time
   * Languages specified directly in the player options have precedence
   *
   * @return {Array}
   *         An array of of supported languages
   */;_proto.languages=function languages(){return mergeOptions(Player.prototype.options_.languages,this.languages_);}/**
   * returns a JavaScript object reperesenting the current track
   * information. **DOES not return it as JSON**
   *
   * @return {Object}
   *         Object representing the current of track info
   */;_proto.toJSON=function toJSON(){var options=mergeOptions(this.options_);var tracks=options.tracks;options.tracks=[];for(var i=0;i<tracks.length;i++){var track=tracks[i];// deep merge tracks and null out player so no circular references
track=mergeOptions(track);track.player=undefined;options.tracks[i]=track;}return options;}/**
   * Creates a simple modal dialog (an instance of the {@link ModalDialog}
   * component) that immediately overlays the player with arbitrary
   * content and removes itself when closed.
   *
   * @param {string|Function|Element|Array|null} content
   *        Same as {@link ModalDialog#content}'s param of the same name.
   *        The most straight-forward usage is to provide a string or DOM
   *        element.
   *
   * @param {Object} [options]
   *        Extra options which will be passed on to the {@link ModalDialog}.
   *
   * @return {ModalDialog}
   *         the {@link ModalDialog} that was created
   */;_proto.createModal=function createModal(content,options){var _this14=this;options=options||{};options.content=content||'';var modal=new ModalDialog(this,options);this.addChild(modal);modal.on('dispose',function(){_this14.removeChild(modal);});modal.open();return modal;}/**
   * Change breakpoint classes when the player resizes.
   *
   * @private
   */;_proto.updateCurrentBreakpoint_=function updateCurrentBreakpoint_(){if(!this.responsive()){return;}var currentBreakpoint=this.currentBreakpoint();var currentWidth=this.currentWidth();for(var i=0;i<BREAKPOINT_ORDER.length;i++){var candidateBreakpoint=BREAKPOINT_ORDER[i];var maxWidth=this.breakpoints_[candidateBreakpoint];if(currentWidth<=maxWidth){// The current breakpoint did not change, nothing to do.
if(currentBreakpoint===candidateBreakpoint){return;}// Only remove a class if there is a current breakpoint.
if(currentBreakpoint){this.removeClass(BREAKPOINT_CLASSES[currentBreakpoint]);}this.addClass(BREAKPOINT_CLASSES[candidateBreakpoint]);this.breakpoint_=candidateBreakpoint;break;}}}/**
   * Removes the current breakpoint.
   *
   * @private
   */;_proto.removeCurrentBreakpoint_=function removeCurrentBreakpoint_(){var className=this.currentBreakpointClass();this.breakpoint_='';if(className){this.removeClass(className);}}/**
   * Get or set breakpoints on the player.
   *
   * Calling this method with an object or `true` will remove any previous
   * custom breakpoints and start from the defaults again.
   *
   * @param  {Object|boolean} [breakpoints]
   *         If an object is given, it can be used to provide custom
   *         breakpoints. If `true` is given, will set default breakpoints.
   *         If this argument is not given, will simply return the current
   *         breakpoints.
   *
   * @param  {number} [breakpoints.tiny]
   *         The maximum width for the "vjs-layout-tiny" class.
   *
   * @param  {number} [breakpoints.xsmall]
   *         The maximum width for the "vjs-layout-x-small" class.
   *
   * @param  {number} [breakpoints.small]
   *         The maximum width for the "vjs-layout-small" class.
   *
   * @param  {number} [breakpoints.medium]
   *         The maximum width for the "vjs-layout-medium" class.
   *
   * @param  {number} [breakpoints.large]
   *         The maximum width for the "vjs-layout-large" class.
   *
   * @param  {number} [breakpoints.xlarge]
   *         The maximum width for the "vjs-layout-x-large" class.
   *
   * @param  {number} [breakpoints.huge]
   *         The maximum width for the "vjs-layout-huge" class.
   *
   * @return {Object}
   *         An object mapping breakpoint names to maximum width values.
   */;_proto.breakpoints=function breakpoints(_breakpoints){// Used as a getter.
if(_breakpoints===undefined){return assign(this.breakpoints_);}this.breakpoint_='';this.breakpoints_=assign({},DEFAULT_BREAKPOINTS,_breakpoints);// When breakpoint definitions change, we need to update the currently
// selected breakpoint.
this.updateCurrentBreakpoint_();// Clone the breakpoints before returning.
return assign(this.breakpoints_);}/**
   * Get or set a flag indicating whether or not this player should adjust
   * its UI based on its dimensions.
   *
   * @param  {boolean} value
   *         Should be `true` if the player should adjust its UI based on its
   *         dimensions; otherwise, should be `false`.
   *
   * @return {boolean}
   *         Will be `true` if this player should adjust its UI based on its
   *         dimensions; otherwise, will be `false`.
   */;_proto.responsive=function responsive(value){// Used as a getter.
if(value===undefined){return this.responsive_;}value=Boolean(value);var current=this.responsive_;// Nothing changed.
if(value===current){return;}// The value actually changed, set it.
this.responsive_=value;// Start listening for breakpoints and set the initial breakpoint if the
// player is now responsive.
if(value){this.on('playerresize',this.updateCurrentBreakpoint_);this.updateCurrentBreakpoint_();// Stop listening for breakpoints if the player is no longer responsive.
}else{this.off('playerresize',this.updateCurrentBreakpoint_);this.removeCurrentBreakpoint_();}return value;}/**
   * Get current breakpoint name, if any.
   *
   * @return {string}
   *         If there is currently a breakpoint set, returns a the key from the
   *         breakpoints object matching it. Otherwise, returns an empty string.
   */;_proto.currentBreakpoint=function currentBreakpoint(){return this.breakpoint_;}/**
   * Get the current breakpoint class name.
   *
   * @return {string}
   *         The matching class name (e.g. `"vjs-layout-tiny"` or
   *         `"vjs-layout-large"`) for the current breakpoint. Empty string if
   *         there is no current breakpoint.
   */;_proto.currentBreakpointClass=function currentBreakpointClass(){return BREAKPOINT_CLASSES[this.breakpoint_]||'';}/**
   * An object that describes a single piece of media.
   *
   * Properties that are not part of this type description will be retained; so,
   * this can be viewed as a generic metadata storage mechanism as well.
   *
   * @see      {@link https://wicg.github.io/mediasession/#the-mediametadata-interface}
   * @typedef  {Object} Player~MediaObject
   *
   * @property {string} [album]
   *           Unused, except if this object is passed to the `MediaSession`
   *           API.
   *
   * @property {string} [artist]
   *           Unused, except if this object is passed to the `MediaSession`
   *           API.
   *
   * @property {Object[]} [artwork]
   *           Unused, except if this object is passed to the `MediaSession`
   *           API. If not specified, will be populated via the `poster`, if
   *           available.
   *
   * @property {string} [poster]
   *           URL to an image that will display before playback.
   *
   * @property {Tech~SourceObject|Tech~SourceObject[]|string} [src]
   *           A single source object, an array of source objects, or a string
   *           referencing a URL to a media source. It is _highly recommended_
   *           that an object or array of objects is used here, so that source
   *           selection algorithms can take the `type` into account.
   *
   * @property {string} [title]
   *           Unused, except if this object is passed to the `MediaSession`
   *           API.
   *
   * @property {Object[]} [textTracks]
   *           An array of objects to be used to create text tracks, following
   *           the {@link https://www.w3.org/TR/html50/embedded-content-0.html#the-track-element|native track element format}.
   *           For ease of removal, these will be created as "remote" text
   *           tracks and set to automatically clean up on source changes.
   *
   *           These objects may have properties like `src`, `kind`, `label`,
   *           and `language`, see {@link Tech#createRemoteTextTrack}.
   *//**
   * Populate the player using a {@link Player~MediaObject|MediaObject}.
   *
   * @param  {Player~MediaObject} media
   *         A media object.
   *
   * @param  {Function} ready
   *         A callback to be called when the player is ready.
   */;_proto.loadMedia=function loadMedia(media,ready){var _this15=this;if(!media||(typeof media==='undefined'?'undefined':_typeof(media))!=='object'){return;}this.reset();// Clone the media object so it cannot be mutated from outside.
this.cache_.media=mergeOptions(media);var _this$cache_$media=this.cache_.media,artwork=_this$cache_$media.artwork,poster=_this$cache_$media.poster,src=_this$cache_$media.src,textTracks=_this$cache_$media.textTracks;// If `artwork` is not given, create it using `poster`.
if(!artwork&&poster){this.cache_.media.artwork=[{src:poster,type:getMimetype(poster)}];}if(src){this.src(src);}if(poster){this.poster(poster);}if(Array.isArray(textTracks)){textTracks.forEach(function(tt){return _this15.addRemoteTextTrack(tt,false);});}this.ready(ready);}/**
   * Get a clone of the current {@link Player~MediaObject} for this player.
   *
   * If the `loadMedia` method has not been used, will attempt to return a
   * {@link Player~MediaObject} based on the current state of the player.
   *
   * @return {Player~MediaObject}
   */;_proto.getMedia=function getMedia(){if(!this.cache_.media){var poster=this.poster();var src=this.currentSources();var textTracks=Array.prototype.map.call(this.remoteTextTracks(),function(tt){return{kind:tt.kind,label:tt.label,language:tt.language,src:tt.src};});var media={src:src,textTracks:textTracks};if(poster){media.poster=poster;media.artwork=[{src:media.poster,type:getMimetype(media.poster)}];}return media;}return mergeOptions(this.cache_.media);}/**
   * Gets tag settings
   *
   * @param {Element} tag
   *        The player tag
   *
   * @return {Object}
   *         An object containing all of the settings
   *         for a player tag
   */;Player.getTagSettings=function getTagSettings(tag){var baseOptions={sources:[],tracks:[]};var tagOptions=getAttributes(tag);var dataSetup=tagOptions['data-setup'];if(hasClass(tag,'vjs-fill')){tagOptions.fill=true;}if(hasClass(tag,'vjs-fluid')){tagOptions.fluid=true;}// Check if data-setup attr exists.
if(dataSetup!==null){// Parse options JSON
// If empty string, make it a parsable json object.
var _safeParseTuple=(0,_tuple2.default)(dataSetup||'{}'),err=_safeParseTuple[0],data=_safeParseTuple[1];if(err){log.error(err);}assign(tagOptions,data);}assign(baseOptions,tagOptions);// Get tag children settings
if(tag.hasChildNodes()){var children=tag.childNodes;for(var i=0,j=children.length;i<j;i++){var child=children[i];// Change case needed: http://ejohn.org/blog/nodename-case-sensitivity/
var childName=child.nodeName.toLowerCase();if(childName==='source'){baseOptions.sources.push(getAttributes(child));}else if(childName==='track'){baseOptions.tracks.push(getAttributes(child));}}}return baseOptions;}/**
   * Determine whether or not flexbox is supported
   *
   * @return {boolean}
   *         - true if flexbox is supported
   *         - false if flexbox is not supported
   */;_proto.flexNotSupported_=function flexNotSupported_(){var elem=_document2.default.createElement('i');// Note: We don't actually use flexBasis (or flexOrder), but it's one of the more
// common flex features that we can rely on when checking for flex support.
return!('flexBasis'in elem.style||'webkitFlexBasis'in elem.style||'mozFlexBasis'in elem.style||'msFlexBasis'in elem.style||// IE10-specific (2012 flex spec), available for completeness
'msFlexOrder'in elem.style);};return Player;}(Component);/**
 * Get the {@link VideoTrackList}
 * @link https://html.spec.whatwg.org/multipage/embedded-content.html#videotracklist
 *
 * @return {VideoTrackList}
 *         the current video track list
 *
 * @method Player.prototype.videoTracks
 *//**
 * Get the {@link AudioTrackList}
 * @link https://html.spec.whatwg.org/multipage/embedded-content.html#audiotracklist
 *
 * @return {AudioTrackList}
 *         the current audio track list
 *
 * @method Player.prototype.audioTracks
 *//**
 * Get the {@link TextTrackList}
 *
 * @link http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-texttracks
 *
 * @return {TextTrackList}
 *         the current text track list
 *
 * @method Player.prototype.textTracks
 *//**
 * Get the remote {@link TextTrackList}
 *
 * @return {TextTrackList}
 *         The current remote text track list
 *
 * @method Player.prototype.remoteTextTracks
 *//**
 * Get the remote {@link HtmlTrackElementList} tracks.
 *
 * @return {HtmlTrackElementList}
 *         The current remote text track element list
 *
 * @method Player.prototype.remoteTextTrackEls
 */ALL.names.forEach(function(name$$1){var props=ALL[name$$1];Player.prototype[props.getterName]=function(){if(this.tech_){return this.tech_[props.getterName]();}// if we have not yet loadTech_, we create {video,audio,text}Tracks_
// these will be passed to the tech during loading
this[props.privateName]=this[props.privateName]||new props.ListClass();return this[props.privateName];};});/**
 * Global enumeration of players.
 *
 * The keys are the player IDs and the values are either the {@link Player}
 * instance or `null` for disposed players.
 *
 * @type {Object}
 */Player.players={};var navigator=_window2.default.navigator;/*
 * Player instance options, surfaced using options
 * options = Player.prototype.options_
 * Make changes in options, not here.
 *
 * @type {Object}
 * @private
 */Player.prototype.options_={// Default order of fallback technology
techOrder:Tech.defaultTechOrder_,html5:{},flash:{},// default inactivity timeout
inactivityTimeout:2000,// default playback rates
playbackRates:[],// Add playback rate selection by adding rates
// 'playbackRates': [0.5, 1, 1.5, 2],
liveui:false,// Included control sets
children:['mediaLoader','posterImage','textTrackDisplay','loadingSpinner','bigPlayButton','liveTracker','controlBar','errorDisplay','textTrackSettings','resizeManager'],language:navigator&&(navigator.languages&&navigator.languages[0]||navigator.userLanguage||navigator.language)||'en',// locales and their language translations
languages:{},// Default message to show when a video cannot be played.
notSupportedMessage:'No compatible source was found for this media.',breakpoints:{},responsive:false};[/**
 * Returns whether or not the player is in the "ended" state.
 *
 * @return {Boolean} True if the player is in the ended state, false if not.
 * @method Player#ended
 */'ended',/**
 * Returns whether or not the player is in the "seeking" state.
 *
 * @return {Boolean} True if the player is in the seeking state, false if not.
 * @method Player#seeking
 */'seeking',/**
 * Returns the TimeRanges of the media that are currently available
 * for seeking to.
 *
 * @return {TimeRanges} the seekable intervals of the media timeline
 * @method Player#seekable
 */'seekable',/**
 * Returns the current state of network activity for the element, from
 * the codes in the list below.
 * - NETWORK_EMPTY (numeric value 0)
 *   The element has not yet been initialised. All attributes are in
 *   their initial states.
 * - NETWORK_IDLE (numeric value 1)
 *   The element's resource selection algorithm is active and has
 *   selected a resource, but it is not actually using the network at
 *   this time.
 * - NETWORK_LOADING (numeric value 2)
 *   The user agent is actively trying to download data.
 * - NETWORK_NO_SOURCE (numeric value 3)
 *   The element's resource selection algorithm is active, but it has
 *   not yet found a resource to use.
 *
 * @see https://html.spec.whatwg.org/multipage/embedded-content.html#network-states
 * @return {number} the current network activity state
 * @method Player#networkState
 */'networkState',/**
 * Returns a value that expresses the current state of the element
 * with respect to rendering the current playback position, from the
 * codes in the list below.
 * - HAVE_NOTHING (numeric value 0)
 *   No information regarding the media resource is available.
 * - HAVE_METADATA (numeric value 1)
 *   Enough of the resource has been obtained that the duration of the
 *   resource is available.
 * - HAVE_CURRENT_DATA (numeric value 2)
 *   Data for the immediate current playback position is available.
 * - HAVE_FUTURE_DATA (numeric value 3)
 *   Data for the immediate current playback position is available, as
 *   well as enough data for the user agent to advance the current
 *   playback position in the direction of playback.
 * - HAVE_ENOUGH_DATA (numeric value 4)
 *   The user agent estimates that enough data is available for
 *   playback to proceed uninterrupted.
 *
 * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-readystate
 * @return {number} the current playback rendering state
 * @method Player#readyState
 */'readyState'].forEach(function(fn){Player.prototype[fn]=function(){return this.techGet_(fn);};});TECH_EVENTS_RETRIGGER.forEach(function(event){Player.prototype["handleTech"+toTitleCase(event)+"_"]=function(){return this.trigger(event);};});/**
 * Fired when the player has initial duration and dimension information
 *
 * @event Player#loadedmetadata
 * @type {EventTarget~Event}
 *//**
 * Fired when the player has downloaded data at the current playback position
 *
 * @event Player#loadeddata
 * @type {EventTarget~Event}
 *//**
 * Fired when the current playback position has changed *
 * During playback this is fired every 15-250 milliseconds, depending on the
 * playback technology in use.
 *
 * @event Player#timeupdate
 * @type {EventTarget~Event}
 *//**
 * Fired when the volume changes
 *
 * @event Player#volumechange
 * @type {EventTarget~Event}
 *//**
 * Reports whether or not a player has a plugin available.
 *
 * This does not report whether or not the plugin has ever been initialized
 * on this player. For that, [usingPlugin]{@link Player#usingPlugin}.
 *
 * @method Player#hasPlugin
 * @param  {string}  name
 *         The name of a plugin.
 *
 * @return {boolean}
 *         Whether or not this player has the requested plugin available.
 *//**
 * Reports whether or not a player is using a plugin by name.
 *
 * For basic plugins, this only reports whether the plugin has _ever_ been
 * initialized on this player.
 *
 * @method Player#usingPlugin
 * @param  {string} name
 *         The name of a plugin.
 *
 * @return {boolean}
 *         Whether or not this player is using the requested plugin.
 */Component.registerComponent('Player',Player);/**
 * The base plugin name.
 *
 * @private
 * @constant
 * @type {string}
 */var BASE_PLUGIN_NAME='plugin';/**
 * The key on which a player's active plugins cache is stored.
 *
 * @private
 * @constant
 * @type     {string}
 */var PLUGIN_CACHE_KEY='activePlugins_';/**
 * Stores registered plugins in a private space.
 *
 * @private
 * @type    {Object}
 */var pluginStorage={};/**
 * Reports whether or not a plugin has been registered.
 *
 * @private
 * @param   {string} name
 *          The name of a plugin.
 *
 * @return {boolean}
 *          Whether or not the plugin has been registered.
 */var pluginExists=function pluginExists(name){return pluginStorage.hasOwnProperty(name);};/**
 * Get a single registered plugin by name.
 *
 * @private
 * @param   {string} name
 *          The name of a plugin.
 *
 * @return {Function|undefined}
 *          The plugin (or undefined).
 */var getPlugin=function getPlugin(name){return pluginExists(name)?pluginStorage[name]:undefined;};/**
 * Marks a plugin as "active" on a player.
 *
 * Also, ensures that the player has an object for tracking active plugins.
 *
 * @private
 * @param   {Player} player
 *          A Video.js player instance.
 *
 * @param   {string} name
 *          The name of a plugin.
 */var markPluginAsActive=function markPluginAsActive(player,name){player[PLUGIN_CACHE_KEY]=player[PLUGIN_CACHE_KEY]||{};player[PLUGIN_CACHE_KEY][name]=true;};/**
 * Triggers a pair of plugin setup events.
 *
 * @private
 * @param  {Player} player
 *         A Video.js player instance.
 *
 * @param  {Plugin~PluginEventHash} hash
 *         A plugin event hash.
 *
 * @param  {boolean} [before]
 *         If true, prefixes the event name with "before". In other words,
 *         use this to trigger "beforepluginsetup" instead of "pluginsetup".
 */var triggerSetupEvent=function triggerSetupEvent(player,hash,before){var eventName=(before?'before':'')+'pluginsetup';player.trigger(eventName,hash);player.trigger(eventName+':'+hash.name,hash);};/**
 * Takes a basic plugin function and returns a wrapper function which marks
 * on the player that the plugin has been activated.
 *
 * @private
 * @param   {string} name
 *          The name of the plugin.
 *
 * @param   {Function} plugin
 *          The basic plugin.
 *
 * @return {Function}
 *          A wrapper function for the given plugin.
 */var createBasicPlugin=function createBasicPlugin(name,plugin){var basicPluginWrapper=function basicPluginWrapper(){// We trigger the "beforepluginsetup" and "pluginsetup" events on the player
// regardless, but we want the hash to be consistent with the hash provided
// for advanced plugins.
//
// The only potentially counter-intuitive thing here is the `instance` in
// the "pluginsetup" event is the value returned by the `plugin` function.
triggerSetupEvent(this,{name:name,plugin:plugin,instance:null},true);var instance=plugin.apply(this,arguments);markPluginAsActive(this,name);triggerSetupEvent(this,{name:name,plugin:plugin,instance:instance});return instance;};Object.keys(plugin).forEach(function(prop){basicPluginWrapper[prop]=plugin[prop];});return basicPluginWrapper;};/**
 * Takes a plugin sub-class and returns a factory function for generating
 * instances of it.
 *
 * This factory function will replace itself with an instance of the requested
 * sub-class of Plugin.
 *
 * @private
 * @param   {string} name
 *          The name of the plugin.
 *
 * @param   {Plugin} PluginSubClass
 *          The advanced plugin.
 *
 * @return {Function}
 */var createPluginFactory=function createPluginFactory(name,PluginSubClass){// Add a `name` property to the plugin prototype so that each plugin can
// refer to itself by name.
PluginSubClass.prototype.name=name;return function(){triggerSetupEvent(this,{name:name,plugin:PluginSubClass,instance:null},true);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var instance=_construct(PluginSubClass,[this].concat(args));// The plugin is replaced by a function that returns the current instance.
this[name]=function(){return instance;};triggerSetupEvent(this,instance.getEventHash());return instance;};};/**
 * Parent class for all advanced plugins.
 *
 * @mixes   module:evented~EventedMixin
 * @mixes   module:stateful~StatefulMixin
 * @fires   Player#beforepluginsetup
 * @fires   Player#beforepluginsetup:$name
 * @fires   Player#pluginsetup
 * @fires   Player#pluginsetup:$name
 * @listens Player#dispose
 * @throws  {Error}
 *          If attempting to instantiate the base {@link Plugin} class
 *          directly instead of via a sub-class.
 */var Plugin=/*#__PURE__*/function(){/**
   * Creates an instance of this class.
   *
   * Sub-classes should call `super` to ensure plugins are properly initialized.
   *
   * @param {Player} player
   *        A Video.js player instance.
   */function Plugin(player){if(this.constructor===Plugin){throw new Error('Plugin must be sub-classed; not directly instantiated.');}this.player=player;// Make this object evented, but remove the added `trigger` method so we
// use the prototype version instead.
evented(this);delete this.trigger;stateful(this,this.constructor.defaultState);markPluginAsActive(player,this.name);// Auto-bind the dispose method so we can use it as a listener and unbind
// it later easily.
this.dispose=bind(this,this.dispose);// If the player is disposed, dispose the plugin.
player.on('dispose',this.dispose);}/**
   * Get the version of the plugin that was set on <pluginName>.VERSION
   */var _proto=Plugin.prototype;_proto.version=function version(){return this.constructor.VERSION;}/**
   * Each event triggered by plugins includes a hash of additional data with
   * conventional properties.
   *
   * This returns that object or mutates an existing hash.
   *
   * @param   {Object} [hash={}]
   *          An object to be used as event an event hash.
   *
   * @return {Plugin~PluginEventHash}
   *          An event hash object with provided properties mixed-in.
   */;_proto.getEventHash=function getEventHash(hash){if(hash===void 0){hash={};}hash.name=this.name;hash.plugin=this.constructor;hash.instance=this;return hash;}/**
   * Triggers an event on the plugin object and overrides
   * {@link module:evented~EventedMixin.trigger|EventedMixin.trigger}.
   *
   * @param   {string|Object} event
   *          An event type or an object with a type property.
   *
   * @param   {Object} [hash={}]
   *          Additional data hash to merge with a
   *          {@link Plugin~PluginEventHash|PluginEventHash}.
   *
   * @return {boolean}
   *          Whether or not default was prevented.
   */;_proto.trigger=function trigger$$1(event,hash){if(hash===void 0){hash={};}return trigger(this.eventBusEl_,event,this.getEventHash(hash));}/**
   * Handles "statechanged" events on the plugin. No-op by default, override by
   * subclassing.
   *
   * @abstract
   * @param    {Event} e
   *           An event object provided by a "statechanged" event.
   *
   * @param    {Object} e.changes
   *           An object describing changes that occurred with the "statechanged"
   *           event.
   */;_proto.handleStateChanged=function handleStateChanged(e){}/**
   * Disposes a plugin.
   *
   * Subclasses can override this if they want, but for the sake of safety,
   * it's probably best to subscribe the "dispose" event.
   *
   * @fires Plugin#dispose
   */;_proto.dispose=function dispose(){var name=this.name,player=this.player;/**
     * Signals that a advanced plugin is about to be disposed.
     *
     * @event Plugin#dispose
     * @type  {EventTarget~Event}
     */this.trigger('dispose');this.off();player.off('dispose',this.dispose);// Eliminate any possible sources of leaking memory by clearing up
// references between the player and the plugin instance and nulling out
// the plugin's state and replacing methods with a function that throws.
player[PLUGIN_CACHE_KEY][name]=false;this.player=this.state=null;// Finally, replace the plugin name on the player with a new factory
// function, so that the plugin is ready to be set up again.
player[name]=createPluginFactory(name,pluginStorage[name]);}/**
   * Determines if a plugin is a basic plugin (i.e. not a sub-class of `Plugin`).
   *
   * @param   {string|Function} plugin
   *          If a string, matches the name of a plugin. If a function, will be
   *          tested directly.
   *
   * @return {boolean}
   *          Whether or not a plugin is a basic plugin.
   */;Plugin.isBasic=function isBasic(plugin){var p=typeof plugin==='string'?getPlugin(plugin):plugin;return typeof p==='function'&&!Plugin.prototype.isPrototypeOf(p.prototype);}/**
   * Register a Video.js plugin.
   *
   * @param   {string} name
   *          The name of the plugin to be registered. Must be a string and
   *          must not match an existing plugin or a method on the `Player`
   *          prototype.
   *
   * @param   {Function} plugin
   *          A sub-class of `Plugin` or a function for basic plugins.
   *
   * @return {Function}
   *          For advanced plugins, a factory function for that plugin. For
   *          basic plugins, a wrapper function that initializes the plugin.
   */;Plugin.registerPlugin=function registerPlugin(name,plugin){if(typeof name!=='string'){throw new Error("Illegal plugin name, \""+name+"\", must be a string, was "+(typeof name==='undefined'?'undefined':_typeof(name))+".");}if(pluginExists(name)){log.warn("A plugin named \""+name+"\" already exists. You may want to avoid re-registering plugins!");}else if(Player.prototype.hasOwnProperty(name)){throw new Error("Illegal plugin name, \""+name+"\", cannot share a name with an existing player method!");}if(typeof plugin!=='function'){throw new Error("Illegal plugin for \""+name+"\", must be a function, was "+(typeof plugin==='undefined'?'undefined':_typeof(plugin))+".");}pluginStorage[name]=plugin;// Add a player prototype method for all sub-classed plugins (but not for
// the base Plugin class).
if(name!==BASE_PLUGIN_NAME){if(Plugin.isBasic(plugin)){Player.prototype[name]=createBasicPlugin(name,plugin);}else{Player.prototype[name]=createPluginFactory(name,plugin);}}return plugin;}/**
   * De-register a Video.js plugin.
   *
   * @param  {string} name
   *         The name of the plugin to be de-registered. Must be a string that
   *         matches an existing plugin.
   *
   * @throws {Error}
   *         If an attempt is made to de-register the base plugin.
   */;Plugin.deregisterPlugin=function deregisterPlugin(name){if(name===BASE_PLUGIN_NAME){throw new Error('Cannot de-register base plugin.');}if(pluginExists(name)){delete pluginStorage[name];delete Player.prototype[name];}}/**
   * Gets an object containing multiple Video.js plugins.
   *
   * @param   {Array} [names]
   *          If provided, should be an array of plugin names. Defaults to _all_
   *          plugin names.
   *
   * @return {Object|undefined}
   *          An object containing plugin(s) associated with their name(s) or
   *          `undefined` if no matching plugins exist).
   */;Plugin.getPlugins=function getPlugins(names){if(names===void 0){names=Object.keys(pluginStorage);}var result;names.forEach(function(name){var plugin=getPlugin(name);if(plugin){result=result||{};result[name]=plugin;}});return result;}/**
   * Gets a plugin's version, if available
   *
   * @param   {string} name
   *          The name of a plugin.
   *
   * @return {string}
   *          The plugin's version or an empty string.
   */;Plugin.getPluginVersion=function getPluginVersion(name){var plugin=getPlugin(name);return plugin&&plugin.VERSION||'';};return Plugin;}();/**
 * Gets a plugin by name if it exists.
 *
 * @static
 * @method   getPlugin
 * @memberOf Plugin
 * @param    {string} name
 *           The name of a plugin.
 *
 * @returns  {Function|undefined}
 *           The plugin (or `undefined`).
 */Plugin.getPlugin=getPlugin;/**
 * The name of the base plugin class as it is registered.
 *
 * @type {string}
 */Plugin.BASE_PLUGIN_NAME=BASE_PLUGIN_NAME;Plugin.registerPlugin(BASE_PLUGIN_NAME,Plugin);/**
 * Documented in player.js
 *
 * @ignore
 */Player.prototype.usingPlugin=function(name){return!!this[PLUGIN_CACHE_KEY]&&this[PLUGIN_CACHE_KEY][name]===true;};/**
 * Documented in player.js
 *
 * @ignore
 */Player.prototype.hasPlugin=function(name){return!!pluginExists(name);};/**
 * Signals that a plugin is about to be set up on a player.
 *
 * @event    Player#beforepluginsetup
 * @type     {Plugin~PluginEventHash}
 *//**
 * Signals that a plugin is about to be set up on a player - by name. The name
 * is the name of the plugin.
 *
 * @event    Player#beforepluginsetup:$name
 * @type     {Plugin~PluginEventHash}
 *//**
 * Signals that a plugin has just been set up on a player.
 *
 * @event    Player#pluginsetup
 * @type     {Plugin~PluginEventHash}
 *//**
 * Signals that a plugin has just been set up on a player - by name. The name
 * is the name of the plugin.
 *
 * @event    Player#pluginsetup:$name
 * @type     {Plugin~PluginEventHash}
 *//**
 * @typedef  {Object} Plugin~PluginEventHash
 *
 * @property {string} instance
 *           For basic plugins, the return value of the plugin function. For
 *           advanced plugins, the plugin instance on which the event is fired.
 *
 * @property {string} name
 *           The name of the plugin.
 *
 * @property {string} plugin
 *           For basic plugins, the plugin function. For advanced plugins, the
 *           plugin class/constructor.
 *//**
 * @file extend.js
 * @module extend
 *//**
 * A combination of node inherits and babel's inherits (after transpile).
 * Both work the same but node adds `super_` to the subClass
 * and Bable adds the superClass as __proto__. Both seem useful.
 *
 * @param {Object} subClass
 *        The class to inherit to
 *
 * @param {Object} superClass
 *        The class to inherit from
 *
 * @private
 */var _inherits$1=function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+(typeof superClass==='undefined'?'undefined':_typeof(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass){// node
subClass.super_=superClass;}};/**
 * Used to subclass an existing class by emulating ES subclassing using the
 * `extends` keyword.
 *
 * @function
 * @example
 * var MyComponent = videojs.extend(videojs.getComponent('Component'), {
 *   myCustomMethod: function() {
 *     // Do things in my method.
 *   }
 * });
 *
 * @param    {Function} superClass
 *           The class to inherit from
 *
 * @param    {Object}   [subClassMethods={}]
 *           Methods of the new class
 *
 * @return   {Function}
 *           The new class with subClassMethods that inherited superClass.
 */var extend=function extend(superClass,subClassMethods){if(subClassMethods===void 0){subClassMethods={};}var subClass=function subClass(){superClass.apply(this,arguments);};var methods={};if((typeof subClassMethods==='undefined'?'undefined':_typeof(subClassMethods))==='object'){if(subClassMethods.constructor!==Object.prototype.constructor){subClass=subClassMethods.constructor;}methods=subClassMethods;}else if(typeof subClassMethods==='function'){subClass=subClassMethods;}_inherits$1(subClass,superClass);// Extend subObj's prototype with functions and other properties from props
for(var name in methods){if(methods.hasOwnProperty(name)){subClass.prototype[name]=methods[name];}}return subClass;};/**
 * @file video.js
 * @module videojs
 *//**
 * Normalize an `id` value by trimming off a leading `#`
 *
 * @private
 * @param   {string} id
 *          A string, maybe with a leading `#`.
 *
 * @return {string}
 *          The string, without any leading `#`.
 */var normalizeId=function normalizeId(id){return id.indexOf('#')===0?id.slice(1):id;};/**
 * The `videojs()` function doubles as the main function for users to create a
 * {@link Player} instance as well as the main library namespace.
 *
 * It can also be used as a getter for a pre-existing {@link Player} instance.
 * However, we _strongly_ recommend using `videojs.getPlayer()` for this
 * purpose because it avoids any potential for unintended initialization.
 *
 * Due to [limitations](https://github.com/jsdoc3/jsdoc/issues/955#issuecomment-313829149)
 * of our JSDoc template, we cannot properly document this as both a function
 * and a namespace, so its function signature is documented here.
 *
 * #### Arguments
 * ##### id
 * string|Element, **required**
 *
 * Video element or video element ID.
 *
 * ##### options
 * Object, optional
 *
 * Options object for providing settings.
 * See: [Options Guide](https://docs.videojs.com/tutorial-options.html).
 *
 * ##### ready
 * {@link Component~ReadyCallback}, optional
 *
 * A function to be called when the {@link Player} and {@link Tech} are ready.
 *
 * #### Return Value
 *
 * The `videojs()` function returns a {@link Player} instance.
 *
 * @namespace
 *
 * @borrows AudioTrack as AudioTrack
 * @borrows Component.getComponent as getComponent
 * @borrows module:computed-style~computedStyle as computedStyle
 * @borrows module:events.on as on
 * @borrows module:events.one as one
 * @borrows module:events.off as off
 * @borrows module:events.trigger as trigger
 * @borrows EventTarget as EventTarget
 * @borrows module:extend~extend as extend
 * @borrows module:fn.bind as bind
 * @borrows module:format-time.formatTime as formatTime
 * @borrows module:format-time.resetFormatTime as resetFormatTime
 * @borrows module:format-time.setFormatTime as setFormatTime
 * @borrows module:merge-options.mergeOptions as mergeOptions
 * @borrows module:middleware.use as use
 * @borrows Player.players as players
 * @borrows Plugin.registerPlugin as registerPlugin
 * @borrows Plugin.deregisterPlugin as deregisterPlugin
 * @borrows Plugin.getPlugins as getPlugins
 * @borrows Plugin.getPlugin as getPlugin
 * @borrows Plugin.getPluginVersion as getPluginVersion
 * @borrows Tech.getTech as getTech
 * @borrows Tech.registerTech as registerTech
 * @borrows TextTrack as TextTrack
 * @borrows module:time-ranges.createTimeRanges as createTimeRange
 * @borrows module:time-ranges.createTimeRanges as createTimeRanges
 * @borrows module:url.isCrossOrigin as isCrossOrigin
 * @borrows module:url.parseUrl as parseUrl
 * @borrows VideoTrack as VideoTrack
 *
 * @param  {string|Element} id
 *         Video element or video element ID.
 *
 * @param  {Object} [options]
 *         Options object for providing settings.
 *         See: [Options Guide](https://docs.videojs.com/tutorial-options.html).
 *
 * @param  {Component~ReadyCallback} [ready]
 *         A function to be called when the {@link Player} and {@link Tech} are
 *         ready.
 *
 * @return {Player}
 *         The `videojs()` function returns a {@link Player|Player} instance.
 */function videojs$1(id,options,ready){var player=videojs$1.getPlayer(id);if(player){if(options){log.warn("Player \""+id+"\" is already initialised. Options will not be applied.");}if(ready){player.ready(ready);}return player;}var el=typeof id==='string'?$('#'+normalizeId(id)):id;if(!isEl(el)){throw new TypeError('The element or ID supplied is not valid. (videojs)');}// document.body.contains(el) will only check if el is contained within that one document.
// This causes problems for elements in iframes.
// Instead, use the element's ownerDocument instead of the global document.
// This will make sure that the element is indeed in the dom of that document.
// Additionally, check that the document in question has a default view.
// If the document is no longer attached to the dom, the defaultView of the document will be null.
if(!el.ownerDocument.defaultView||!el.ownerDocument.body.contains(el)){log.warn('The element supplied is not included in the DOM');}options=options||{};videojs$1.hooks('beforesetup').forEach(function(hookFunction){var opts=hookFunction(el,mergeOptions(options));if(!isObject(opts)||Array.isArray(opts)){log.error('please return an object in beforesetup hooks');return;}options=mergeOptions(options,opts);});// We get the current "Player" component here in case an integration has
// replaced it with a custom player.
var PlayerComponent=Component.getComponent('Player');player=new PlayerComponent(el,options,ready);videojs$1.hooks('setup').forEach(function(hookFunction){return hookFunction(player);});return player;}/**
 * An Object that contains lifecycle hooks as keys which point to an array
 * of functions that are run when a lifecycle is triggered
 *
 * @private
 */videojs$1.hooks_={};/**
 * Get a list of hooks for a specific lifecycle
 *
 * @param  {string} type
 *         the lifecyle to get hooks from
 *
 * @param  {Function|Function[]} [fn]
 *         Optionally add a hook (or hooks) to the lifecycle that your are getting.
 *
 * @return {Array}
 *         an array of hooks, or an empty array if there are none.
 */videojs$1.hooks=function(type,fn){videojs$1.hooks_[type]=videojs$1.hooks_[type]||[];if(fn){videojs$1.hooks_[type]=videojs$1.hooks_[type].concat(fn);}return videojs$1.hooks_[type];};/**
 * Add a function hook to a specific videojs lifecycle.
 *
 * @param {string} type
 *        the lifecycle to hook the function to.
 *
 * @param {Function|Function[]}
 *        The function or array of functions to attach.
 */videojs$1.hook=function(type,fn){videojs$1.hooks(type,fn);};/**
 * Add a function hook that will only run once to a specific videojs lifecycle.
 *
 * @param {string} type
 *        the lifecycle to hook the function to.
 *
 * @param {Function|Function[]}
 *        The function or array of functions to attach.
 */videojs$1.hookOnce=function(type,fn){videojs$1.hooks(type,[].concat(fn).map(function(original){var wrapper=function wrapper(){videojs$1.removeHook(type,wrapper);return original.apply(void 0,arguments);};return wrapper;}));};/**
 * Remove a hook from a specific videojs lifecycle.
 *
 * @param  {string} type
 *         the lifecycle that the function hooked to
 *
 * @param  {Function} fn
 *         The hooked function to remove
 *
 * @return {boolean}
 *         The function that was removed or undef
 */videojs$1.removeHook=function(type,fn){var index=videojs$1.hooks(type).indexOf(fn);if(index<=-1){return false;}videojs$1.hooks_[type]=videojs$1.hooks_[type].slice();videojs$1.hooks_[type].splice(index,1);return true;};// Add default styles
if(_window2.default.VIDEOJS_NO_DYNAMIC_STYLE!==true&&isReal()){var style$1=$('.vjs-styles-defaults');if(!style$1){style$1=createStyleElement('vjs-styles-defaults');var head=$('head');if(head){head.insertBefore(style$1,head.firstChild);}setTextContent(style$1,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ");}}// Run Auto-load players
// You have to wait at least once in case this script is loaded after your
// video in the DOM (weird behavior only with minified version)
autoSetupTimeout(1,videojs$1);/**
 * Current Video.js version. Follows [semantic versioning](https://semver.org/).
 *
 * @type {string}
 */videojs$1.VERSION=version;/**
 * The global options object. These are the settings that take effect
 * if no overrides are specified when the player is created.
 *
 * @type {Object}
 */videojs$1.options=Player.prototype.options_;/**
 * Get an object with the currently created players, keyed by player ID
 *
 * @return {Object}
 *         The created players
 */videojs$1.getPlayers=function(){return Player.players;};/**
 * Get a single player based on an ID or DOM element.
 *
 * This is useful if you want to check if an element or ID has an associated
 * Video.js player, but not create one if it doesn't.
 *
 * @param   {string|Element} id
 *          An HTML element - `<video>`, `<audio>`, or `<video-js>` -
 *          or a string matching the `id` of such an element.
 *
 * @return {Player|undefined}
 *          A player instance or `undefined` if there is no player instance
 *          matching the argument.
 */videojs$1.getPlayer=function(id){var players=Player.players;var tag;if(typeof id==='string'){var nId=normalizeId(id);var player=players[nId];if(player){return player;}tag=$('#'+nId);}else{tag=id;}if(isEl(tag)){var _tag=tag,_player=_tag.player,playerId=_tag.playerId;// Element may have a `player` property referring to an already created
// player instance. If so, return that.
if(_player||players[playerId]){return _player||players[playerId];}}};/**
 * Returns an array of all current players.
 *
 * @return {Array}
 *         An array of all players. The array will be in the order that
 *         `Object.keys` provides, which could potentially vary between
 *         JavaScript engines.
 *
 */videojs$1.getAllPlayers=function(){return(// Disposed players leave a key with a `null` value, so we need to make sure
// we filter those out.
Object.keys(Player.players).map(function(k){return Player.players[k];}).filter(Boolean));};videojs$1.players=Player.players;videojs$1.getComponent=Component.getComponent;/**
 * Register a component so it can referred to by name. Used when adding to other
 * components, either through addChild `component.addChild('myComponent')` or through
 * default children options  `{ children: ['myComponent'] }`.
 *
 * > NOTE: You could also just initialize the component before adding.
 * `component.addChild(new MyComponent());`
 *
 * @param {string} name
 *        The class name of the component
 *
 * @param {Component} comp
 *        The component class
 *
 * @return {Component}
 *         The newly registered component
 */videojs$1.registerComponent=function(name$$1,comp){if(Tech.isTech(comp)){log.warn("The "+name$$1+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");}Component.registerComponent.call(Component,name$$1,comp);};videojs$1.getTech=Tech.getTech;videojs$1.registerTech=Tech.registerTech;videojs$1.use=use;/**
 * An object that can be returned by a middleware to signify
 * that the middleware is being terminated.
 *
 * @type {object}
 * @property {object} middleware.TERMINATOR
 */Object.defineProperty(videojs$1,'middleware',{value:{},writeable:false,enumerable:true});Object.defineProperty(videojs$1.middleware,'TERMINATOR',{value:TERMINATOR,writeable:false,enumerable:true});/**
 * A reference to the {@link module:browser|browser utility module} as an object.
 *
 * @type {Object}
 * @see  {@link module:browser|browser}
 */videojs$1.browser=browser;/**
 * Use {@link module:browser.TOUCH_ENABLED|browser.TOUCH_ENABLED} instead; only
 * included for backward-compatibility with 4.x.
 *
 * @deprecated Since version 5.0, use {@link module:browser.TOUCH_ENABLED|browser.TOUCH_ENABLED instead.
 * @type {boolean}
 */videojs$1.TOUCH_ENABLED=TOUCH_ENABLED;videojs$1.extend=extend;videojs$1.mergeOptions=mergeOptions;videojs$1.bind=bind;videojs$1.registerPlugin=Plugin.registerPlugin;videojs$1.deregisterPlugin=Plugin.deregisterPlugin;/**
 * Deprecated method to register a plugin with Video.js
 *
 * @deprecated videojs.plugin() is deprecated; use videojs.registerPlugin() instead
 *
 * @param {string} name
 *        The plugin name
 *
 * @param {Plugin|Function} plugin
 *         The plugin sub-class or function
 */videojs$1.plugin=function(name$$1,plugin){log.warn('videojs.plugin() is deprecated; use videojs.registerPlugin() instead');return Plugin.registerPlugin(name$$1,plugin);};videojs$1.getPlugins=Plugin.getPlugins;videojs$1.getPlugin=Plugin.getPlugin;videojs$1.getPluginVersion=Plugin.getPluginVersion;/**
 * Adding languages so that they're available to all players.
 * Example: `videojs.addLanguage('es', { 'Hello': 'Hola' });`
 *
 * @param {string} code
 *        The language code or dictionary property
 *
 * @param {Object} data
 *        The data values to be translated
 *
 * @return {Object}
 *         The resulting language dictionary object
 */videojs$1.addLanguage=function(code,data){var _mergeOptions;code=(''+code).toLowerCase();videojs$1.options.languages=mergeOptions(videojs$1.options.languages,(_mergeOptions={},_mergeOptions[code]=data,_mergeOptions));return videojs$1.options.languages[code];};/**
 * A reference to the {@link module:log|log utility module} as an object.
 *
 * @type {Function}
 * @see  {@link module:log|log}
 */videojs$1.log=log;videojs$1.createLogger=createLogger$1;videojs$1.createTimeRange=videojs$1.createTimeRanges=createTimeRanges;videojs$1.formatTime=formatTime;videojs$1.setFormatTime=setFormatTime;videojs$1.resetFormatTime=resetFormatTime;videojs$1.parseUrl=parseUrl;videojs$1.isCrossOrigin=isCrossOrigin;videojs$1.EventTarget=EventTarget;videojs$1.on=on;videojs$1.one=one;videojs$1.off=off;videojs$1.trigger=trigger;/**
 * A cross-browser XMLHttpRequest wrapper.
 *
 * @function
 * @param    {Object} options
 *           Settings for the request.
 *
 * @return   {XMLHttpRequest|XDomainRequest}
 *           The request object.
 *
 * @see      https://github.com/Raynos/xhr
 */videojs$1.xhr=_xhr2.default;videojs$1.TextTrack=TextTrack;videojs$1.AudioTrack=AudioTrack;videojs$1.VideoTrack=VideoTrack;['isEl','isTextNode','createEl','hasClass','addClass','removeClass','toggleClass','setAttributes','getAttributes','emptyEl','appendContent','insertContent'].forEach(function(k){videojs$1[k]=function(){log.warn("videojs."+k+"() is deprecated; use videojs.dom."+k+"() instead");return Dom[k].apply(null,arguments);};});videojs$1.computedStyle=computedStyle;/**
 * A reference to the {@link module:dom|DOM utility module} as an object.
 *
 * @type {Object}
 * @see  {@link module:dom|dom}
 */videojs$1.dom=Dom;/**
 * A reference to the {@link module:url|URL utility module} as an object.
 *
 * @type {Object}
 * @see  {@link module:url|url}
 */videojs$1.url=Url;/**
 * @videojs/http-streaming
 * @version 1.9.3
 * @copyright 2019 Brightcove, Inc
 * @license Apache-2.0
 *//**
 * @file resolve-url.js - Handling how URLs are resolved and manipulated
 */var resolveUrl=function resolveUrl(baseURL,relativeURL){// return early if we don't need to resolve
if(/^[a-z]+:/i.test(relativeURL)){return relativeURL;}// if the base URL is relative then combine with the current location
if(!/\/\//i.test(baseURL)){baseURL=_urlToolkit2.default.buildAbsoluteURL(_window2.default.location.href,baseURL);}return _urlToolkit2.default.buildAbsoluteURL(baseURL,relativeURL);};/**
 * Checks whether xhr request was redirected and returns correct url depending
 * on `handleManifestRedirects` option
 *
 * @api private
 *
 * @param  {String} url - an url being requested
 * @param  {XMLHttpRequest} req - xhr request result
 *
 * @return {String}
 */var resolveManifestRedirect=function resolveManifestRedirect(handleManifestRedirect,url,req){// To understand how the responseURL below is set and generated:
// - https://fetch.spec.whatwg.org/#concept-response-url
// - https://fetch.spec.whatwg.org/#atomic-http-redirect-handling
if(handleManifestRedirect&&req.responseURL&&url!==req.responseURL){return req.responseURL;}return url;};var classCallCheck=function classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}};var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var get$1=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var inherits=function inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;};var possibleConstructorReturn=function possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof(call))==="object"||typeof call==="function")?call:self;};var slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"])_i["return"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();/**
 * @file playlist-loader.js
 *
 * A state machine that manages the loading, caching, and updating of
 * M3U8 playlists.
 *
 */var mergeOptions$1=videojs$1.mergeOptions,EventTarget$1=videojs$1.EventTarget,log$1=videojs$1.log;/**
 * Loops through all supported media groups in master and calls the provided
 * callback for each group
 *
 * @param {Object} master
 *        The parsed master manifest object
 * @param {Function} callback
 *        Callback to call for each media group
 */var forEachMediaGroup=function forEachMediaGroup(master,callback){['AUDIO','SUBTITLES'].forEach(function(mediaType){for(var groupKey in master.mediaGroups[mediaType]){for(var labelKey in master.mediaGroups[mediaType][groupKey]){var mediaProperties=master.mediaGroups[mediaType][groupKey][labelKey];callback(mediaProperties,mediaType,groupKey,labelKey);}}});};/**
  * Returns a new array of segments that is the result of merging
  * properties from an older list of segments onto an updated
  * list. No properties on the updated playlist will be overridden.
  *
  * @param {Array} original the outdated list of segments
  * @param {Array} update the updated list of segments
  * @param {Number=} offset the index of the first update
  * segment in the original segment list. For non-live playlists,
  * this should always be zero and does not need to be
  * specified. For live playlists, it should be the difference
  * between the media sequence numbers in the original and updated
  * playlists.
  * @return a list of merged segment objects
  */var updateSegments=function updateSegments(original,update,offset){var result=update.slice();offset=offset||0;var length=Math.min(original.length,update.length+offset);for(var i=offset;i<length;i++){result[i-offset]=mergeOptions$1(original[i],result[i-offset]);}return result;};var resolveSegmentUris=function resolveSegmentUris(segment,baseUri){if(!segment.resolvedUri){segment.resolvedUri=resolveUrl(baseUri,segment.uri);}if(segment.key&&!segment.key.resolvedUri){segment.key.resolvedUri=resolveUrl(baseUri,segment.key.uri);}if(segment.map&&!segment.map.resolvedUri){segment.map.resolvedUri=resolveUrl(baseUri,segment.map.uri);}};/**
  * Returns a new master playlist that is the result of merging an
  * updated media playlist into the original version. If the
  * updated media playlist does not match any of the playlist
  * entries in the original master playlist, null is returned.
  *
  * @param {Object} master a parsed master M3U8 object
  * @param {Object} media a parsed media M3U8 object
  * @return {Object} a new object that represents the original
  * master playlist with the updated media playlist merged in, or
  * null if the merge produced no change.
  */var updateMaster=function updateMaster(master,media){var result=mergeOptions$1(master,{});var playlist=result.playlists[media.uri];if(!playlist){return null;}// consider the playlist unchanged if the number of segments is equal, the media
// sequence number is unchanged, and this playlist hasn't become the end of the playlist
if(playlist.segments&&media.segments&&playlist.segments.length===media.segments.length&&playlist.endList===media.endList&&playlist.mediaSequence===media.mediaSequence){return null;}var mergedPlaylist=mergeOptions$1(playlist,media);// if the update could overlap existing segment information, merge the two segment lists
if(playlist.segments){mergedPlaylist.segments=updateSegments(playlist.segments,media.segments,media.mediaSequence-playlist.mediaSequence);}// resolve any segment URIs to prevent us from having to do it later
mergedPlaylist.segments.forEach(function(segment){resolveSegmentUris(segment,mergedPlaylist.resolvedUri);});// TODO Right now in the playlists array there are two references to each playlist, one
// that is referenced by index, and one by URI. The index reference may no longer be
// necessary.
for(var i=0;i<result.playlists.length;i++){if(result.playlists[i].uri===media.uri){result.playlists[i]=mergedPlaylist;}}result.playlists[media.uri]=mergedPlaylist;return result;};var setupMediaPlaylists=function setupMediaPlaylists(master){// setup by-URI lookups and resolve media playlist URIs
var i=master.playlists.length;while(i--){var playlist=master.playlists[i];master.playlists[playlist.uri]=playlist;playlist.resolvedUri=resolveUrl(master.uri,playlist.uri);playlist.id=i;if(!playlist.attributes){// Although the spec states an #EXT-X-STREAM-INF tag MUST have a
// BANDWIDTH attribute, we can play the stream without it. This means a poorly
// formatted master playlist may not have an attribute list. An attributes
// property is added here to prevent undefined references when we encounter
// this scenario.
playlist.attributes={};log$1.warn('Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.');}}};var resolveMediaGroupUris=function resolveMediaGroupUris(master){forEachMediaGroup(master,function(properties){if(properties.uri){properties.resolvedUri=resolveUrl(master.uri,properties.uri);}});};/**
 * Calculates the time to wait before refreshing a live playlist
 *
 * @param {Object} media
 *        The current media
 * @param {Boolean} update
 *        True if there were any updates from the last refresh, false otherwise
 * @return {Number}
 *         The time in ms to wait before refreshing the live playlist
 */var refreshDelay=function refreshDelay(media,update){var lastSegment=media.segments[media.segments.length-1];var delay=void 0;if(update&&lastSegment&&lastSegment.duration){delay=lastSegment.duration*1000;}else{// if the playlist is unchanged since the last reload or last segment duration
// cannot be determined, try again after half the target duration
delay=(media.targetDuration||10)*500;}return delay;};/**
 * Load a playlist from a remote location
 *
 * @class PlaylistLoader
 * @extends Stream
 * @param {String} srcUrl the url to start with
 * @param {Boolean} withCredentials the withCredentials xhr option
 * @constructor
 */var PlaylistLoader=function(_EventTarget){inherits(PlaylistLoader,_EventTarget);function PlaylistLoader(srcUrl,hls){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};classCallCheck(this,PlaylistLoader);var _this=possibleConstructorReturn(this,(PlaylistLoader.__proto__||Object.getPrototypeOf(PlaylistLoader)).call(this));var _options$withCredenti=options.withCredentials,withCredentials=_options$withCredenti===undefined?false:_options$withCredenti,_options$handleManife=options.handleManifestRedirects,handleManifestRedirects=_options$handleManife===undefined?false:_options$handleManife;_this.srcUrl=srcUrl;_this.hls_=hls;_this.withCredentials=withCredentials;_this.handleManifestRedirects=handleManifestRedirects;var hlsOptions=hls.options_;_this.customTagParsers=hlsOptions&&hlsOptions.customTagParsers||[];_this.customTagMappers=hlsOptions&&hlsOptions.customTagMappers||[];if(!_this.srcUrl){throw new Error('A non-empty playlist URL is required');}// initialize the loader state
_this.state='HAVE_NOTHING';// live playlist staleness timeout
_this.on('mediaupdatetimeout',function(){if(_this.state!=='HAVE_METADATA'){// only refresh the media playlist if no other activity is going on
return;}_this.state='HAVE_CURRENT_METADATA';_this.request=_this.hls_.xhr({uri:resolveUrl(_this.master.uri,_this.media().uri),withCredentials:_this.withCredentials},function(error,req){// disposed
if(!_this.request){return;}if(error){return _this.playlistRequestError(_this.request,_this.media().uri,'HAVE_METADATA');}_this.haveMetadata(_this.request,_this.media().uri);});});return _this;}createClass(PlaylistLoader,[{key:'playlistRequestError',value:function playlistRequestError(xhr$$1,url,startingState){// any in-flight request is now finished
this.request=null;if(startingState){this.state=startingState;}this.error={playlist:this.master.playlists[url],status:xhr$$1.status,message:'HLS playlist request error at URL: '+url,responseText:xhr$$1.responseText,code:xhr$$1.status>=500?4:2};this.trigger('error');}// update the playlist loader's state in response to a new or
// updated playlist.
},{key:'haveMetadata',value:function haveMetadata(xhr$$1,url){var _this2=this;// any in-flight request is now finished
this.request=null;this.state='HAVE_METADATA';var parser=new _m3u8Parser.Parser();// adding custom tag parsers
this.customTagParsers.forEach(function(customParser){return parser.addParser(customParser);});// adding custom tag mappers
this.customTagMappers.forEach(function(mapper){return parser.addTagMapper(mapper);});parser.push(xhr$$1.responseText);parser.end();parser.manifest.uri=url;// m3u8-parser does not attach an attributes property to media playlists so make
// sure that the property is attached to avoid undefined reference errors
parser.manifest.attributes=parser.manifest.attributes||{};// merge this playlist into the master
var update=updateMaster(this.master,parser.manifest);this.targetDuration=parser.manifest.targetDuration;if(update){this.master=update;this.media_=this.master.playlists[parser.manifest.uri];}else{this.trigger('playlistunchanged');}// refresh live playlists after a target duration passes
if(!this.media().endList){_window2.default.clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=_window2.default.setTimeout(function(){_this2.trigger('mediaupdatetimeout');},refreshDelay(this.media(),!!update));}this.trigger('loadedplaylist');}/**
     * Abort any outstanding work and clean up.
     */},{key:'dispose',value:function dispose(){this.stopRequest();_window2.default.clearTimeout(this.mediaUpdateTimeout);}},{key:'stopRequest',value:function stopRequest(){if(this.request){var oldRequest=this.request;this.request=null;oldRequest.onreadystatechange=null;oldRequest.abort();}}/**
     * When called without any arguments, returns the currently
     * active media playlist. When called with a single argument,
     * triggers the playlist loader to asynchronously switch to the
     * specified media playlist. Calling this method while the
     * loader is in the HAVE_NOTHING causes an error to be emitted
     * but otherwise has no effect.
     *
     * @param {Object=} playlist the parsed media playlist
     * object to switch to
     * @return {Playlist} the current loaded media
     */},{key:'media',value:function media(playlist){var _this3=this;// getter
if(!playlist){return this.media_;}// setter
if(this.state==='HAVE_NOTHING'){throw new Error('Cannot switch media playlist from '+this.state);}var startingState=this.state;// find the playlist object if the target playlist has been
// specified by URI
if(typeof playlist==='string'){if(!this.master.playlists[playlist]){throw new Error('Unknown playlist URI: '+playlist);}playlist=this.master.playlists[playlist];}var mediaChange=!this.media_||playlist.uri!==this.media_.uri;// switch to fully loaded playlists immediately
if(this.master.playlists[playlist.uri].endList){// abort outstanding playlist requests
if(this.request){this.request.onreadystatechange=null;this.request.abort();this.request=null;}this.state='HAVE_METADATA';this.media_=playlist;// trigger media change if the active media has been updated
if(mediaChange){this.trigger('mediachanging');this.trigger('mediachange');}return;}// switching to the active playlist is a no-op
if(!mediaChange){return;}this.state='SWITCHING_MEDIA';// there is already an outstanding playlist request
if(this.request){if(playlist.resolvedUri===this.request.url){// requesting to switch to the same playlist multiple times
// has no effect after the first
return;}this.request.onreadystatechange=null;this.request.abort();this.request=null;}// request the new playlist
if(this.media_){this.trigger('mediachanging');}this.request=this.hls_.xhr({uri:playlist.resolvedUri,withCredentials:this.withCredentials},function(error,req){// disposed
if(!_this3.request){return;}playlist.resolvedUri=resolveManifestRedirect(_this3.handleManifestRedirects,playlist.resolvedUri,req);if(error){return _this3.playlistRequestError(_this3.request,playlist.uri,startingState);}_this3.haveMetadata(req,playlist.uri);// fire loadedmetadata the first time a media playlist is loaded
if(startingState==='HAVE_MASTER'){_this3.trigger('loadedmetadata');}else{_this3.trigger('mediachange');}});}/**
     * pause loading of the playlist
     */},{key:'pause',value:function pause(){this.stopRequest();_window2.default.clearTimeout(this.mediaUpdateTimeout);if(this.state==='HAVE_NOTHING'){// If we pause the loader before any data has been retrieved, its as if we never
// started, so reset to an unstarted state.
this.started=false;}// Need to restore state now that no activity is happening
if(this.state==='SWITCHING_MEDIA'){// if the loader was in the process of switching media, it should either return to
// HAVE_MASTER or HAVE_METADATA depending on if the loader has loaded a media
// playlist yet. This is determined by the existence of loader.media_
if(this.media_){this.state='HAVE_METADATA';}else{this.state='HAVE_MASTER';}}else if(this.state==='HAVE_CURRENT_METADATA'){this.state='HAVE_METADATA';}}/**
     * start loading of the playlist
     */},{key:'load',value:function load(isFinalRendition){var _this4=this;_window2.default.clearTimeout(this.mediaUpdateTimeout);var media=this.media();if(isFinalRendition){var delay=media?media.targetDuration/2*1000:5*1000;this.mediaUpdateTimeout=_window2.default.setTimeout(function(){return _this4.load();},delay);return;}if(!this.started){this.start();return;}if(media&&!media.endList){this.trigger('mediaupdatetimeout');}else{this.trigger('loadedplaylist');}}/**
     * start loading of the playlist
     */},{key:'start',value:function start(){var _this5=this;this.started=true;// request the specified URL
this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(error,req){// disposed
if(!_this5.request){return;}// clear the loader's request reference
_this5.request=null;if(error){_this5.error={status:req.status,message:'HLS playlist request error at URL: '+_this5.srcUrl,responseText:req.responseText,// MEDIA_ERR_NETWORK
code:2};if(_this5.state==='HAVE_NOTHING'){_this5.started=false;}return _this5.trigger('error');}var parser=new _m3u8Parser.Parser();// adding custom tag parsers
_this5.customTagParsers.forEach(function(customParser){return parser.addParser(customParser);});// adding custom tag mappers
_this5.customTagMappers.forEach(function(mapper){return parser.addTagMapper(mapper);});parser.push(req.responseText);parser.end();_this5.state='HAVE_MASTER';_this5.srcUrl=resolveManifestRedirect(_this5.handleManifestRedirects,_this5.srcUrl,req);parser.manifest.uri=_this5.srcUrl;// loaded a master playlist
if(parser.manifest.playlists){_this5.master=parser.manifest;setupMediaPlaylists(_this5.master);resolveMediaGroupUris(_this5.master);_this5.trigger('loadedplaylist');if(!_this5.request){// no media playlist was specifically selected so start
// from the first listed one
_this5.media(parser.manifest.playlists[0]);}return;}// loaded a media playlist
// infer a master playlist if none was previously requested
_this5.master={mediaGroups:{'AUDIO':{},'VIDEO':{},'CLOSED-CAPTIONS':{},'SUBTITLES':{}},uri:_window2.default.location.href,playlists:[{uri:_this5.srcUrl,id:0,resolvedUri:_this5.srcUrl,// m3u8-parser does not attach an attributes property to media playlists so make
// sure that the property is attached to avoid undefined reference errors
attributes:{}}]};_this5.master.playlists[_this5.srcUrl]=_this5.master.playlists[0];_this5.haveMetadata(req,_this5.srcUrl);return _this5.trigger('loadedmetadata');});}}]);return PlaylistLoader;}(EventTarget$1);/**
 * @file playlist.js
 *
 * Playlist related utilities.
 */var createTimeRange=videojs$1.createTimeRange;/**
 * walk backward until we find a duration we can use
 * or return a failure
 *
 * @param {Playlist} playlist the playlist to walk through
 * @param {Number} endSequence the mediaSequence to stop walking on
 */var backwardDuration=function backwardDuration(playlist,endSequence){var result=0;var i=endSequence-playlist.mediaSequence;// if a start time is available for segment immediately following
// the interval, use it
var segment=playlist.segments[i];// Walk backward until we find the latest segment with timeline
// information that is earlier than endSequence
if(segment){if(typeof segment.start!=='undefined'){return{result:segment.start,precise:true};}if(typeof segment.end!=='undefined'){return{result:segment.end-segment.duration,precise:true};}}while(i--){segment=playlist.segments[i];if(typeof segment.end!=='undefined'){return{result:result+segment.end,precise:true};}result+=segment.duration;if(typeof segment.start!=='undefined'){return{result:result+segment.start,precise:true};}}return{result:result,precise:false};};/**
 * walk forward until we find a duration we can use
 * or return a failure
 *
 * @param {Playlist} playlist the playlist to walk through
 * @param {Number} endSequence the mediaSequence to stop walking on
 */var forwardDuration=function forwardDuration(playlist,endSequence){var result=0;var segment=void 0;var i=endSequence-playlist.mediaSequence;// Walk forward until we find the earliest segment with timeline
// information
for(;i<playlist.segments.length;i++){segment=playlist.segments[i];if(typeof segment.start!=='undefined'){return{result:segment.start-result,precise:true};}result+=segment.duration;if(typeof segment.end!=='undefined'){return{result:segment.end-result,precise:true};}}// indicate we didn't find a useful duration estimate
return{result:-1,precise:false};};/**
  * Calculate the media duration from the segments associated with a
  * playlist. The duration of a subinterval of the available segments
  * may be calculated by specifying an end index.
  *
  * @param {Object} playlist a media playlist object
  * @param {Number=} endSequence an exclusive upper boundary
  * for the playlist.  Defaults to playlist length.
  * @param {Number} expired the amount of time that has dropped
  * off the front of the playlist in a live scenario
  * @return {Number} the duration between the first available segment
  * and end index.
  */var intervalDuration=function intervalDuration(playlist,endSequence,expired){var backward=void 0;var forward=void 0;if(typeof endSequence==='undefined'){endSequence=playlist.mediaSequence+playlist.segments.length;}if(endSequence<playlist.mediaSequence){return 0;}// do a backward walk to estimate the duration
backward=backwardDuration(playlist,endSequence);if(backward.precise){// if we were able to base our duration estimate on timing
// information provided directly from the Media Source, return
// it
return backward.result;}// walk forward to see if a precise duration estimate can be made
// that way
forward=forwardDuration(playlist,endSequence);if(forward.precise){// we found a segment that has been buffered and so it's
// position is known precisely
return forward.result;}// return the less-precise, playlist-based duration estimate
return backward.result+expired;};/**
  * Calculates the duration of a playlist. If a start and end index
  * are specified, the duration will be for the subset of the media
  * timeline between those two indices. The total duration for live
  * playlists is always Infinity.
  *
  * @param {Object} playlist a media playlist object
  * @param {Number=} endSequence an exclusive upper
  * boundary for the playlist. Defaults to the playlist media
  * sequence number plus its length.
  * @param {Number=} expired the amount of time that has
  * dropped off the front of the playlist in a live scenario
  * @return {Number} the duration between the start index and end
  * index.
  */var duration=function duration(playlist,endSequence,expired){if(!playlist){return 0;}if(typeof expired!=='number'){expired=0;}// if a slice of the total duration is not requested, use
// playlist-level duration indicators when they're present
if(typeof endSequence==='undefined'){// if present, use the duration specified in the playlist
if(playlist.totalDuration){return playlist.totalDuration;}// duration should be Infinity for live playlists
if(!playlist.endList){return _window2.default.Infinity;}}// calculate the total duration based on the segment durations
return intervalDuration(playlist,endSequence,expired);};/**
  * Calculate the time between two indexes in the current playlist
  * neight the start- nor the end-index need to be within the current
  * playlist in which case, the targetDuration of the playlist is used
  * to approximate the durations of the segments
  *
  * @param {Object} playlist a media playlist object
  * @param {Number} startIndex
  * @param {Number} endIndex
  * @return {Number} the number of seconds between startIndex and endIndex
  */var sumDurations=function sumDurations(playlist,startIndex,endIndex){var durations=0;if(startIndex>endIndex){var _ref=[endIndex,startIndex];startIndex=_ref[0];endIndex=_ref[1];}if(startIndex<0){for(var i=startIndex;i<Math.min(0,endIndex);i++){durations+=playlist.targetDuration;}startIndex=0;}for(var _i=startIndex;_i<endIndex;_i++){durations+=playlist.segments[_i].duration;}return durations;};/**
 * Determines the media index of the segment corresponding to the safe edge of the live
 * window which is the duration of the last segment plus 2 target durations from the end
 * of the playlist.
 *
 * @param {Object} playlist
 *        a media playlist object
 * @return {Number}
 *         The media index of the segment at the safe live point. 0 if there is no "safe"
 *         point.
 * @function safeLiveIndex
 */var safeLiveIndex=function safeLiveIndex(playlist){if(!playlist.segments.length){return 0;}var i=playlist.segments.length-1;var distanceFromEnd=playlist.segments[i].duration||playlist.targetDuration;var safeDistance=distanceFromEnd+playlist.targetDuration*2;while(i--){distanceFromEnd+=playlist.segments[i].duration;if(distanceFromEnd>=safeDistance){break;}}return Math.max(0,i);};/**
 * Calculates the playlist end time
 *
 * @param {Object} playlist a media playlist object
 * @param {Number=} expired the amount of time that has
 *                  dropped off the front of the playlist in a live scenario
 * @param {Boolean|false} useSafeLiveEnd a boolean value indicating whether or not the
 *                        playlist end calculation should consider the safe live end
 *                        (truncate the playlist end by three segments). This is normally
 *                        used for calculating the end of the playlist's seekable range.
 * @returns {Number} the end time of playlist
 * @function playlistEnd
 */var playlistEnd=function playlistEnd(playlist,expired,useSafeLiveEnd){if(!playlist||!playlist.segments){return null;}if(playlist.endList){return duration(playlist);}if(expired===null){return null;}expired=expired||0;var endSequence=useSafeLiveEnd?safeLiveIndex(playlist):playlist.segments.length;return intervalDuration(playlist,playlist.mediaSequence+endSequence,expired);};/**
  * Calculates the interval of time that is currently seekable in a
  * playlist. The returned time ranges are relative to the earliest
  * moment in the specified playlist that is still available. A full
  * seekable implementation for live streams would need to offset
  * these values by the duration of content that has expired from the
  * stream.
  *
  * @param {Object} playlist a media playlist object
  * dropped off the front of the playlist in a live scenario
  * @param {Number=} expired the amount of time that has
  * dropped off the front of the playlist in a live scenario
  * @return {TimeRanges} the periods of time that are valid targets
  * for seeking
  */var seekable=function seekable(playlist,expired){var useSafeLiveEnd=true;var seekableStart=expired||0;var seekableEnd=playlistEnd(playlist,expired,useSafeLiveEnd);if(seekableEnd===null){return createTimeRange();}return createTimeRange(seekableStart,seekableEnd);};var isWholeNumber=function isWholeNumber(num){return num-Math.floor(num)===0;};var roundSignificantDigit=function roundSignificantDigit(increment,num){// If we have a whole number, just add 1 to it
if(isWholeNumber(num)){return num+increment*0.1;}var numDecimalDigits=num.toString().split('.')[1].length;for(var i=1;i<=numDecimalDigits;i++){var scale=Math.pow(10,i);var temp=num*scale;if(isWholeNumber(temp)||i===numDecimalDigits){return(temp+increment)/scale;}}};var ceilLeastSignificantDigit=roundSignificantDigit.bind(null,1);var floorLeastSignificantDigit=roundSignificantDigit.bind(null,-1);/**
 * Determine the index and estimated starting time of the segment that
 * contains a specified playback position in a media playlist.
 *
 * @param {Object} playlist the media playlist to query
 * @param {Number} currentTime The number of seconds since the earliest
 * possible position to determine the containing segment for
 * @param {Number} startIndex
 * @param {Number} startTime
 * @return {Object}
 */var getMediaInfoForTime=function getMediaInfoForTime(playlist,currentTime,startIndex,startTime){var i=void 0;var segment=void 0;var numSegments=playlist.segments.length;var time=currentTime-startTime;if(time<0){// Walk backward from startIndex in the playlist, adding durations
// until we find a segment that contains `time` and return it
if(startIndex>0){for(i=startIndex-1;i>=0;i--){segment=playlist.segments[i];time+=floorLeastSignificantDigit(segment.duration);if(time>0){return{mediaIndex:i,startTime:startTime-sumDurations(playlist,startIndex,i)};}}}// We were unable to find a good segment within the playlist
// so select the first segment
return{mediaIndex:0,startTime:currentTime};}// When startIndex is negative, we first walk forward to first segment
// adding target durations. If we "run out of time" before getting to
// the first segment, return the first segment
if(startIndex<0){for(i=startIndex;i<0;i++){time-=playlist.targetDuration;if(time<0){return{mediaIndex:0,startTime:currentTime};}}startIndex=0;}// Walk forward from startIndex in the playlist, subtracting durations
// until we find a segment that contains `time` and return it
for(i=startIndex;i<numSegments;i++){segment=playlist.segments[i];time-=ceilLeastSignificantDigit(segment.duration);if(time<0){return{mediaIndex:i,startTime:startTime+sumDurations(playlist,startIndex,i)};}}// We are out of possible candidates so load the last one...
return{mediaIndex:numSegments-1,startTime:currentTime};};/**
 * Check whether the playlist is blacklisted or not.
 *
 * @param {Object} playlist the media playlist object
 * @return {boolean} whether the playlist is blacklisted or not
 * @function isBlacklisted
 */var isBlacklisted=function isBlacklisted(playlist){return playlist.excludeUntil&&playlist.excludeUntil>Date.now();};/**
 * Check whether the playlist is compatible with current playback configuration or has
 * been blacklisted permanently for being incompatible.
 *
 * @param {Object} playlist the media playlist object
 * @return {boolean} whether the playlist is incompatible or not
 * @function isIncompatible
 */var isIncompatible=function isIncompatible(playlist){return playlist.excludeUntil&&playlist.excludeUntil===Infinity;};/**
 * Check whether the playlist is enabled or not.
 *
 * @param {Object} playlist the media playlist object
 * @return {boolean} whether the playlist is enabled or not
 * @function isEnabled
 */var isEnabled=function isEnabled(playlist){var blacklisted=isBlacklisted(playlist);return!playlist.disabled&&!blacklisted;};/**
 * Check whether the playlist has been manually disabled through the representations api.
 *
 * @param {Object} playlist the media playlist object
 * @return {boolean} whether the playlist is disabled manually or not
 * @function isDisabled
 */var isDisabled=function isDisabled(playlist){return playlist.disabled;};/**
 * Returns whether the current playlist is an AES encrypted HLS stream
 *
 * @return {Boolean} true if it's an AES encrypted HLS stream
 */var isAes=function isAes(media){for(var i=0;i<media.segments.length;i++){if(media.segments[i].key){return true;}}return false;};/**
 * Returns whether the current playlist contains fMP4
 *
 * @return {Boolean} true if the playlist contains fMP4
 */var isFmp4=function isFmp4(media){for(var i=0;i<media.segments.length;i++){if(media.segments[i].map){return true;}}return false;};/**
 * Checks if the playlist has a value for the specified attribute
 *
 * @param {String} attr
 *        Attribute to check for
 * @param {Object} playlist
 *        The media playlist object
 * @return {Boolean}
 *         Whether the playlist contains a value for the attribute or not
 * @function hasAttribute
 */var hasAttribute=function hasAttribute(attr,playlist){return playlist.attributes&&playlist.attributes[attr];};/**
 * Estimates the time required to complete a segment download from the specified playlist
 *
 * @param {Number} segmentDuration
 *        Duration of requested segment
 * @param {Number} bandwidth
 *        Current measured bandwidth of the player
 * @param {Object} playlist
 *        The media playlist object
 * @param {Number=} bytesReceived
 *        Number of bytes already received for the request. Defaults to 0
 * @return {Number|NaN}
 *         The estimated time to request the segment. NaN if bandwidth information for
 *         the given playlist is unavailable
 * @function estimateSegmentRequestTime
 */var estimateSegmentRequestTime=function estimateSegmentRequestTime(segmentDuration,bandwidth,playlist){var bytesReceived=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;if(!hasAttribute('BANDWIDTH',playlist)){return NaN;}var size=segmentDuration*playlist.attributes.BANDWIDTH;return(size-bytesReceived*8)/bandwidth;};/*
 * Returns whether the current playlist is the lowest rendition
 *
 * @return {Boolean} true if on lowest rendition
 */var isLowestEnabledRendition=function isLowestEnabledRendition(master,media){if(master.playlists.length===1){return true;}var currentBandwidth=media.attributes.BANDWIDTH||Number.MAX_VALUE;return master.playlists.filter(function(playlist){if(!isEnabled(playlist)){return false;}return(playlist.attributes.BANDWIDTH||0)<currentBandwidth;}).length===0;};// exports
var Playlist={duration:duration,seekable:seekable,safeLiveIndex:safeLiveIndex,getMediaInfoForTime:getMediaInfoForTime,isEnabled:isEnabled,isDisabled:isDisabled,isBlacklisted:isBlacklisted,isIncompatible:isIncompatible,playlistEnd:playlistEnd,isAes:isAes,isFmp4:isFmp4,hasAttribute:hasAttribute,estimateSegmentRequestTime:estimateSegmentRequestTime,isLowestEnabledRendition:isLowestEnabledRendition};/**
 * @file xhr.js
 */var videojsXHR=videojs$1.xhr,mergeOptions$1$1=videojs$1.mergeOptions;var xhrFactory=function xhrFactory(){var xhr$$1=function XhrFunction(options,callback){// Add a default timeout for all hls requests
options=mergeOptions$1$1({timeout:45e3},options);// Allow an optional user-specified function to modify the option
// object before we construct the xhr request
var beforeRequest=XhrFunction.beforeRequest||videojs$1.Hls.xhr.beforeRequest;if(beforeRequest&&typeof beforeRequest==='function'){var newOptions=beforeRequest(options);if(newOptions){options=newOptions;}}var request=videojsXHR(options,function(error,response){var reqResponse=request.response;if(!error&&reqResponse){request.responseTime=Date.now();request.roundTripTime=request.responseTime-request.requestTime;request.bytesReceived=reqResponse.byteLength||reqResponse.length;if(!request.bandwidth){request.bandwidth=Math.floor(request.bytesReceived/request.roundTripTime*8*1000);}}if(response.headers){request.responseHeaders=response.headers;}// videojs.xhr now uses a specific code on the error
// object to signal that a request has timed out instead
// of setting a boolean on the request object
if(error&&error.code==='ETIMEDOUT'){request.timedout=true;}// videojs.xhr no longer considers status codes outside of 200 and 0
// (for file uris) to be errors, but the old XHR did, so emulate that
// behavior. Status 206 may be used in response to byterange requests.
if(!error&&!request.aborted&&response.statusCode!==200&&response.statusCode!==206&&response.statusCode!==0){error=new Error('XHR Failed with a response of: '+(request&&(reqResponse||request.responseText)));}callback(error,request);});var originalAbort=request.abort;request.abort=function(){request.aborted=true;return originalAbort.apply(request,arguments);};request.uri=options.uri;request.requestTime=Date.now();return request;};return xhr$$1;};/**
 * @file bin-utils.js
 *//**
 * convert a TimeRange to text
 *
 * @param {TimeRange} range the timerange to use for conversion
 * @param {Number} i the iterator on the range to convert
 */var textRange=function textRange(range,i){return range.start(i)+'-'+range.end(i);};/**
 * format a number as hex string
 *
 * @param {Number} e The number
 * @param {Number} i the iterator
 */var formatHexString=function formatHexString(e,i){var value=e.toString(16);return'00'.substring(0,2-value.length)+value+(i%2?' ':'');};var formatAsciiString=function formatAsciiString(e){if(e>=0x20&&e<0x7e){return String.fromCharCode(e);}return'.';};/**
 * Creates an object for sending to a web worker modifying properties that are TypedArrays
 * into a new object with seperated properties for the buffer, byteOffset, and byteLength.
 *
 * @param {Object} message
 *        Object of properties and values to send to the web worker
 * @return {Object}
 *         Modified message with TypedArray values expanded
 * @function createTransferableMessage
 */var createTransferableMessage=function createTransferableMessage(message){var transferable={};Object.keys(message).forEach(function(key){var value=message[key];if(ArrayBuffer.isView(value)){transferable[key]={bytes:value.buffer,byteOffset:value.byteOffset,byteLength:value.byteLength};}else{transferable[key]=value;}});return transferable;};/**
 * Returns a unique string identifier for a media initialization
 * segment.
 */var initSegmentId=function initSegmentId(initSegment){var byterange=initSegment.byterange||{length:Infinity,offset:0};return[byterange.length,byterange.offset,initSegment.resolvedUri].join(',');};/**
 * utils to help dump binary data to the console
 */var hexDump=function hexDump(data){var bytes=Array.prototype.slice.call(data);var step=16;var result='';var hex=void 0;var ascii=void 0;for(var j=0;j<bytes.length/step;j++){hex=bytes.slice(j*step,j*step+step).map(formatHexString).join('');ascii=bytes.slice(j*step,j*step+step).map(formatAsciiString).join('');result+=hex+' '+ascii+'\n';}return result;};var tagDump=function tagDump(_ref){var bytes=_ref.bytes;return hexDump(bytes);};var textRanges=function textRanges(ranges){var result='';var i=void 0;for(i=0;i<ranges.length;i++){result+=textRange(ranges,i)+' ';}return result;};var utils=/*#__PURE__*/Object.freeze({createTransferableMessage:createTransferableMessage,initSegmentId:initSegmentId,hexDump:hexDump,tagDump:tagDump,textRanges:textRanges});// TODO handle fmp4 case where the timing info is accurate and doesn't involve transmux
// Add 25% to the segment duration to account for small discrepencies in segment timing.
// 25% was arbitrarily chosen, and may need to be refined over time.
var SEGMENT_END_FUDGE_PERCENT=0.25;/**
 * Converts a player time (any time that can be gotten/set from player.currentTime(),
 * e.g., any time within player.seekable().start(0) to player.seekable().end(0)) to a
 * program time (any time referencing the real world (e.g., EXT-X-PROGRAM-DATE-TIME)).
 *
 * The containing segment is required as the EXT-X-PROGRAM-DATE-TIME serves as an "anchor
 * point" (a point where we have a mapping from program time to player time, with player
 * time being the post transmux start of the segment).
 *
 * For more details, see [this doc](../../docs/program-time-from-player-time.md).
 *
 * @param {Number} playerTime the player time
 * @param {Object} segment the segment which contains the player time
 * @return {Date} program time
 */var playerTimeToProgramTime=function playerTimeToProgramTime(playerTime,segment){if(!segment.dateTimeObject){// Can't convert without an "anchor point" for the program time (i.e., a time that can
// be used to map the start of a segment with a real world time).
return null;}var transmuxerPrependedSeconds=segment.videoTimingInfo.transmuxerPrependedSeconds;var transmuxedStart=segment.videoTimingInfo.transmuxedPresentationStart;// get the start of the content from before old content is prepended
var startOfSegment=transmuxedStart+transmuxerPrependedSeconds;var offsetFromSegmentStart=playerTime-startOfSegment;return new Date(segment.dateTimeObject.getTime()+offsetFromSegmentStart*1000);};var originalSegmentVideoDuration=function originalSegmentVideoDuration(videoTimingInfo){return videoTimingInfo.transmuxedPresentationEnd-videoTimingInfo.transmuxedPresentationStart-videoTimingInfo.transmuxerPrependedSeconds;};/**
 * Finds a segment that contains the time requested given as an ISO-8601 string. The
 * returned segment might be an estimate or an accurate match.
 *
 * @param {String} programTime The ISO-8601 programTime to find a match for
 * @param {Object} playlist A playlist object to search within
 */var findSegmentForProgramTime=function findSegmentForProgramTime(programTime,playlist){// Assumptions:
//  - verifyProgramDateTimeTags has already been run
//  - live streams have been started
var dateTimeObject=void 0;try{dateTimeObject=new Date(programTime);}catch(e){return null;}if(!playlist||!playlist.segments||playlist.segments.length===0){return null;}var segment=playlist.segments[0];if(dateTimeObject<segment.dateTimeObject){// Requested time is before stream start.
return null;}for(var i=0;i<playlist.segments.length-1;i++){segment=playlist.segments[i];var nextSegmentStart=playlist.segments[i+1].dateTimeObject;if(dateTimeObject<nextSegmentStart){break;}}var lastSegment=playlist.segments[playlist.segments.length-1];var lastSegmentStart=lastSegment.dateTimeObject;var lastSegmentDuration=lastSegment.videoTimingInfo?originalSegmentVideoDuration(lastSegment.videoTimingInfo):lastSegment.duration+lastSegment.duration*SEGMENT_END_FUDGE_PERCENT;var lastSegmentEnd=new Date(lastSegmentStart.getTime()+lastSegmentDuration*1000);if(dateTimeObject>lastSegmentEnd){// Beyond the end of the stream, or our best guess of the end of the stream.
return null;}if(dateTimeObject>lastSegmentStart){segment=lastSegment;}return{segment:segment,estimatedStart:segment.videoTimingInfo?segment.videoTimingInfo.transmuxedPresentationStart:Playlist.duration(playlist,playlist.mediaSequence+playlist.segments.indexOf(segment)),// Although, given that all segments have accurate date time objects, the segment
// selected should be accurate, unless the video has been transmuxed at some point
// (determined by the presence of the videoTimingInfo object), the segment's "player
// time" (the start time in the player) can't be considered accurate.
type:segment.videoTimingInfo?'accurate':'estimate'};};/**
 * Finds a segment that contains the given player time(in seconds).
 *
 * @param {Number} time The player time to find a match for
 * @param {Object} playlist A playlist object to search within
 */var findSegmentForPlayerTime=function findSegmentForPlayerTime(time,playlist){// Assumptions:
// - there will always be a segment.duration
// - we can start from zero
// - segments are in time order
if(!playlist||!playlist.segments||playlist.segments.length===0){return null;}var segmentEnd=0;var segment=void 0;for(var i=0;i<playlist.segments.length;i++){segment=playlist.segments[i];// videoTimingInfo is set after the segment is downloaded and transmuxed, and
// should contain the most accurate values we have for the segment's player times.
//
// Use the accurate transmuxedPresentationEnd value if it is available, otherwise fall
// back to an estimate based on the manifest derived (inaccurate) segment.duration, to
// calculate an end value.
segmentEnd=segment.videoTimingInfo?segment.videoTimingInfo.transmuxedPresentationEnd:segmentEnd+segment.duration;if(time<=segmentEnd){break;}}var lastSegment=playlist.segments[playlist.segments.length-1];if(lastSegment.videoTimingInfo&&lastSegment.videoTimingInfo.transmuxedPresentationEnd<time){// The time requested is beyond the stream end.
return null;}if(time>segmentEnd){// The time is within or beyond the last segment.
//
// Check to see if the time is beyond a reasonable guess of the end of the stream.
if(time>segmentEnd+lastSegment.duration*SEGMENT_END_FUDGE_PERCENT){// Technically, because the duration value is only an estimate, the time may still
// exist in the last segment, however, there isn't enough information to make even
// a reasonable estimate.
return null;}segment=lastSegment;}return{segment:segment,estimatedStart:segment.videoTimingInfo?segment.videoTimingInfo.transmuxedPresentationStart:segmentEnd-segment.duration,// Because videoTimingInfo is only set after transmux, it is the only way to get
// accurate timing values.
type:segment.videoTimingInfo?'accurate':'estimate'};};/**
 * Gives the offset of the comparisonTimestamp from the programTime timestamp in seconds.
 * If the offset returned is positive, the programTime occurs after the
 * comparisonTimestamp.
 * If the offset is negative, the programTime occurs before the comparisonTimestamp.
 *
 * @param {String} comparisonTimeStamp An ISO-8601 timestamp to compare against
 * @param {String} programTime The programTime as an ISO-8601 string
 * @return {Number} offset
 */var getOffsetFromTimestamp=function getOffsetFromTimestamp(comparisonTimeStamp,programTime){var segmentDateTime=void 0;var programDateTime=void 0;try{segmentDateTime=new Date(comparisonTimeStamp);programDateTime=new Date(programTime);}catch(e){// TODO handle error
}var segmentTimeEpoch=segmentDateTime.getTime();var programTimeEpoch=programDateTime.getTime();return(programTimeEpoch-segmentTimeEpoch)/1000;};/**
 * Checks that all segments in this playlist have programDateTime tags.
 *
 * @param {Object} playlist A playlist object
 */var verifyProgramDateTimeTags=function verifyProgramDateTimeTags(playlist){if(!playlist.segments||playlist.segments.length===0){return false;}for(var i=0;i<playlist.segments.length;i++){var segment=playlist.segments[i];if(!segment.dateTimeObject){return false;}}return true;};/**
 * Returns the programTime of the media given a playlist and a playerTime.
 * The playlist must have programDateTime tags for a programDateTime tag to be returned.
 * If the segments containing the time requested have not been buffered yet, an estimate
 * may be returned to the callback.
 *
 * @param {Object} args
 * @param {Object} args.playlist A playlist object to search within
 * @param {Number} time A playerTime in seconds
 * @param {Function} callback(err, programTime)
 * @returns {String} err.message A detailed error message
 * @returns {Object} programTime
 * @returns {Number} programTime.mediaSeconds The streamTime in seconds
 * @returns {String} programTime.programDateTime The programTime as an ISO-8601 String
 */var getProgramTime=function getProgramTime(_ref){var playlist=_ref.playlist,_ref$time=_ref.time,time=_ref$time===undefined?undefined:_ref$time,callback=_ref.callback;if(!callback){throw new Error('getProgramTime: callback must be provided');}if(!playlist||time===undefined){return callback({message:'getProgramTime: playlist and time must be provided'});}var matchedSegment=findSegmentForPlayerTime(time,playlist);if(!matchedSegment){return callback({message:'valid programTime was not found'});}if(matchedSegment.type==='estimate'){return callback({message:'Accurate programTime could not be determined.'+' Please seek to e.seekTime and try again',seekTime:matchedSegment.estimatedStart});}var programTimeObject={mediaSeconds:time};var programTime=playerTimeToProgramTime(time,matchedSegment.segment);if(programTime){programTimeObject.programDateTime=programTime.toISOString();}return callback(null,programTimeObject);};/**
 * Seeks in the player to a time that matches the given programTime ISO-8601 string.
 *
 * @param {Object} args
 * @param {String} args.programTime A programTime to seek to as an ISO-8601 String
 * @param {Object} args.playlist A playlist to look within
 * @param {Number} args.retryCount The number of times to try for an accurate seek. Default is 2.
 * @param {Function} args.seekTo A method to perform a seek
 * @param {Boolean} args.pauseAfterSeek Whether to end in a paused state after seeking. Default is true.
 * @param {Object} args.tech The tech to seek on
 * @param {Function} args.callback(err, newTime) A callback to return the new time to
 * @returns {String} err.message A detailed error message
 * @returns {Number} newTime The exact time that was seeked to in seconds
 */var seekToProgramTime=function seekToProgramTime(_ref2){var programTime=_ref2.programTime,playlist=_ref2.playlist,_ref2$retryCount=_ref2.retryCount,retryCount=_ref2$retryCount===undefined?2:_ref2$retryCount,seekTo=_ref2.seekTo,_ref2$pauseAfterSeek=_ref2.pauseAfterSeek,pauseAfterSeek=_ref2$pauseAfterSeek===undefined?true:_ref2$pauseAfterSeek,tech=_ref2.tech,callback=_ref2.callback;if(!callback){throw new Error('seekToProgramTime: callback must be provided');}if(typeof programTime==='undefined'||!playlist||!seekTo){return callback({message:'seekToProgramTime: programTime, seekTo and playlist must be provided'});}if(!playlist.endList&&!tech.hasStarted_){return callback({message:'player must be playing a live stream to start buffering'});}if(!verifyProgramDateTimeTags(playlist)){return callback({message:'programDateTime tags must be provided in the manifest '+playlist.resolvedUri});}var matchedSegment=findSegmentForProgramTime(programTime,playlist);// no match
if(!matchedSegment){return callback({message:programTime+' was not found in the stream'});}var segment=matchedSegment.segment;var mediaOffset=getOffsetFromTimestamp(segment.dateTimeObject,programTime);if(matchedSegment.type==='estimate'){// we've run out of retries
if(retryCount===0){return callback({message:programTime+' is not buffered yet. Try again'});}seekTo(matchedSegment.estimatedStart+mediaOffset);tech.one('seeked',function(){seekToProgramTime({programTime:programTime,playlist:playlist,retryCount:retryCount-1,seekTo:seekTo,pauseAfterSeek:pauseAfterSeek,tech:tech,callback:callback});});return;}// Since the segment.start value is determined from the buffered end or ending time
// of the prior segment, the seekToTime doesn't need to account for any transmuxer
// modifications.
var seekToTime=segment.start+mediaOffset;var seekedCallback=function seekedCallback(){return callback(null,tech.currentTime());};// listen for seeked event
tech.one('seeked',seekedCallback);// pause before seeking as video.js will restore this state
if(pauseAfterSeek){tech.pause();}seekTo(seekToTime);};/**
 * ranges
 *
 * Utilities for working with TimeRanges.
 *
 */// Fudge factor to account for TimeRanges rounding
var TIME_FUDGE_FACTOR=1/30;// Comparisons between time values such as current time and the end of the buffered range
// can be misleading because of precision differences or when the current media has poorly
// aligned audio and video, which can cause values to be slightly off from what you would
// expect. This value is what we consider to be safe to use in such comparisons to account
// for these scenarios.
var SAFE_TIME_DELTA=TIME_FUDGE_FACTOR*3;var filterRanges=function filterRanges(timeRanges,predicate){var results=[];var i=void 0;if(timeRanges&&timeRanges.length){// Search for ranges that match the predicate
for(i=0;i<timeRanges.length;i++){if(predicate(timeRanges.start(i),timeRanges.end(i))){results.push([timeRanges.start(i),timeRanges.end(i)]);}}}return videojs$1.createTimeRanges(results);};/**
 * Attempts to find the buffered TimeRange that contains the specified
 * time.
 * @param {TimeRanges} buffered - the TimeRanges object to query
 * @param {number} time  - the time to filter on.
 * @returns {TimeRanges} a new TimeRanges object
 */var findRange=function findRange(buffered,time){return filterRanges(buffered,function(start,end){return start-TIME_FUDGE_FACTOR<=time&&end+TIME_FUDGE_FACTOR>=time;});};/**
 * Returns the TimeRanges that begin later than the specified time.
 * @param {TimeRanges} timeRanges - the TimeRanges object to query
 * @param {number} time - the time to filter on.
 * @returns {TimeRanges} a new TimeRanges object.
 */var findNextRange=function findNextRange(timeRanges,time){return filterRanges(timeRanges,function(start){return start-TIME_FUDGE_FACTOR>=time;});};/**
 * Returns gaps within a list of TimeRanges
 * @param {TimeRanges} buffered - the TimeRanges object
 * @return {TimeRanges} a TimeRanges object of gaps
 */var findGaps=function findGaps(buffered){if(buffered.length<2){return videojs$1.createTimeRanges();}var ranges=[];for(var i=1;i<buffered.length;i++){var start=buffered.end(i-1);var end=buffered.start(i);ranges.push([start,end]);}return videojs$1.createTimeRanges(ranges);};/**
 * Gets a human readable string for a TimeRange
 *
 * @param {TimeRange} range
 * @returns {String} a human readable string
 */var printableRange=function printableRange(range){var strArr=[];if(!range||!range.length){return'';}for(var i=0;i<range.length;i++){strArr.push(range.start(i)+' => '+range.end(i));}return strArr.join(', ');};/**
 * Calculates the amount of time left in seconds until the player hits the end of the
 * buffer and causes a rebuffer
 *
 * @param {TimeRange} buffered
 *        The state of the buffer
 * @param {Numnber} currentTime
 *        The current time of the player
 * @param {Number} playbackRate
 *        The current playback rate of the player. Defaults to 1.
 * @return {Number}
 *         Time until the player has to start rebuffering in seconds.
 * @function timeUntilRebuffer
 */var timeUntilRebuffer=function timeUntilRebuffer(buffered,currentTime){var playbackRate=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var bufferedEnd=buffered.length?buffered.end(buffered.length-1):0;return(bufferedEnd-currentTime)/playbackRate;};/**
 * Converts a TimeRanges object into an array representation
 * @param {TimeRanges} timeRanges
 * @returns {Array}
 */var timeRangesToArray=function timeRangesToArray(timeRanges){var timeRangesList=[];for(var i=0;i<timeRanges.length;i++){timeRangesList.push({start:timeRanges.start(i),end:timeRanges.end(i)});}return timeRangesList;};/**
 * @file create-text-tracks-if-necessary.js
 *//**
 * Create text tracks on video.js if they exist on a segment.
 *
 * @param {Object} sourceBuffer the VSB or FSB
 * @param {Object} mediaSource the HTML media source
 * @param {Object} segment the segment that may contain the text track
 * @private
 */var createTextTracksIfNecessary=function createTextTracksIfNecessary(sourceBuffer,mediaSource,segment){var player=mediaSource.player_;// create an in-band caption track if one is present in the segment
if(segment.captions&&segment.captions.length){if(!sourceBuffer.inbandTextTracks_){sourceBuffer.inbandTextTracks_={};}for(var trackId in segment.captionStreams){if(!sourceBuffer.inbandTextTracks_[trackId]){player.tech_.trigger({type:'usage',name:'hls-608'});var track=player.textTracks().getTrackById(trackId);if(track){// Resuse an existing track with a CC# id because this was
// very likely created by videojs-contrib-hls from information
// in the m3u8 for us to use
sourceBuffer.inbandTextTracks_[trackId]=track;}else{// Otherwise, create a track with the default `CC#` label and
// without a language
sourceBuffer.inbandTextTracks_[trackId]=player.addRemoteTextTrack({kind:'captions',id:trackId,label:trackId},false).track;}}}}if(segment.metadata&&segment.metadata.length&&!sourceBuffer.metadataTrack_){sourceBuffer.metadataTrack_=player.addRemoteTextTrack({kind:'metadata',label:'Timed Metadata'},false).track;sourceBuffer.metadataTrack_.inBandMetadataTrackDispatchType=segment.metadata.dispatchType;}};/**
 * @file remove-cues-from-track.js
 *//**
 * Remove cues from a track on video.js.
 *
 * @param {Double} start start of where we should remove the cue
 * @param {Double} end end of where the we should remove the cue
 * @param {Object} track the text track to remove the cues from
 * @private
 */var removeCuesFromTrack=function removeCuesFromTrack(start,end,track){var i=void 0;var cue=void 0;if(!track){return;}if(!track.cues){return;}i=track.cues.length;while(i--){cue=track.cues[i];// Remove any overlapping cue
if(cue.startTime<=end&&cue.endTime>=start){track.removeCue(cue);}}};/**
 * @file add-text-track-data.js
 *//**
 * Define properties on a cue for backwards compatability,
 * but warn the user that the way that they are using it
 * is depricated and will be removed at a later date.
 *
 * @param {Cue} cue the cue to add the properties on
 * @private
 */var deprecateOldCue=function deprecateOldCue(cue){Object.defineProperties(cue.frame,{id:{get:function get(){videojs$1.log.warn('cue.frame.id is deprecated. Use cue.value.key instead.');return cue.value.key;}},value:{get:function get(){videojs$1.log.warn('cue.frame.value is deprecated. Use cue.value.data instead.');return cue.value.data;}},privateData:{get:function get(){videojs$1.log.warn('cue.frame.privateData is deprecated. Use cue.value.data instead.');return cue.value.data;}}});};var durationOfVideo=function durationOfVideo(duration){var dur=void 0;if(isNaN(duration)||Math.abs(duration)===Infinity){dur=Number.MAX_VALUE;}else{dur=duration;}return dur;};/**
 * Add text track data to a source handler given the captions and
 * metadata from the buffer.
 *
 * @param {Object} sourceHandler the virtual source buffer
 * @param {Array} captionArray an array of caption data
 * @param {Array} metadataArray an array of meta data
 * @private
 */var addTextTrackData=function addTextTrackData(sourceHandler,captionArray,metadataArray){var Cue=_window2.default.WebKitDataCue||_window2.default.VTTCue;if(captionArray){captionArray.forEach(function(caption){var track=caption.stream;this.inbandTextTracks_[track].addCue(new Cue(caption.startTime+this.timestampOffset,caption.endTime+this.timestampOffset,caption.text));},sourceHandler);}if(metadataArray){var videoDuration=durationOfVideo(sourceHandler.mediaSource_.duration);metadataArray.forEach(function(metadata){var time=metadata.cueTime+this.timestampOffset;// if time isn't a finite number between 0 and Infinity, like NaN,
// ignore this bit of metadata.
// This likely occurs when you have an non-timed ID3 tag like TIT2,
// which is the "Title/Songname/Content description" frame
if(typeof time!=='number'||_window2.default.isNaN(time)||time<0||!(time<Infinity)){return;}metadata.frames.forEach(function(frame){var cue=new Cue(time,time,frame.value||frame.url||frame.data||'');cue.frame=frame;cue.value=frame;deprecateOldCue(cue);this.metadataTrack_.addCue(cue);},this);},sourceHandler);// Updating the metadeta cues so that
// the endTime of each cue is the startTime of the next cue
// the endTime of last cue is the duration of the video
if(sourceHandler.metadataTrack_&&sourceHandler.metadataTrack_.cues&&sourceHandler.metadataTrack_.cues.length){var cues=sourceHandler.metadataTrack_.cues;var cuesArray=[];// Create a copy of the TextTrackCueList...
// ...disregarding cues with a falsey value
for(var i=0;i<cues.length;i++){if(cues[i]){cuesArray.push(cues[i]);}}// Group cues by their startTime value
var cuesGroupedByStartTime=cuesArray.reduce(function(obj,cue){var timeSlot=obj[cue.startTime]||[];timeSlot.push(cue);obj[cue.startTime]=timeSlot;return obj;},{});// Sort startTimes by ascending order
var sortedStartTimes=Object.keys(cuesGroupedByStartTime).sort(function(a,b){return Number(a)-Number(b);});// Map each cue group's endTime to the next group's startTime
sortedStartTimes.forEach(function(startTime,idx){var cueGroup=cuesGroupedByStartTime[startTime];var nextTime=Number(sortedStartTimes[idx+1])||videoDuration;// Map each cue's endTime the next group's startTime
cueGroup.forEach(function(cue){cue.endTime=nextTime;});});}}};var win=typeof window!=='undefined'?window:{},TARGET=typeof Symbol==='undefined'?'__target':Symbol(),SCRIPT_TYPE='application/javascript',BlobBuilder=win.BlobBuilder||win.WebKitBlobBuilder||win.MozBlobBuilder||win.MSBlobBuilder,URL=win.URL||win.webkitURL||URL&&URL.msURL,Worker=win.Worker;/**
 * Returns a wrapper around Web Worker code that is constructible.
 *
 * @function shimWorker
 *
 * @param { String }    filename    The name of the file
 * @param { Function }  fn          Function wrapping the code of the worker
 */function shimWorker(filename,fn){return function ShimWorker(forceFallback){var o=this;if(!fn){return new Worker(filename);}else if(Worker&&!forceFallback){// Convert the function's inner code to a string to construct the worker
var source=fn.toString().replace(/^function.+?{/,'').slice(0,-1),objURL=createSourceObject(source);this[TARGET]=new Worker(objURL);wrapTerminate(this[TARGET],objURL);return this[TARGET];}else{var selfShim={postMessage:function postMessage(m){if(o.onmessage){setTimeout(function(){o.onmessage({data:m,target:selfShim});});}}};fn.call(selfShim);this.postMessage=function(m){setTimeout(function(){selfShim.onmessage({data:m,target:o});});};this.isThisThread=true;}};}// Test Worker capabilities
if(Worker){var testWorker,objURL=createSourceObject('self.onmessage = function () {}'),testArray=new Uint8Array(1);try{testWorker=new Worker(objURL);// Native browser on some Samsung devices throws for transferables, let's detect it
testWorker.postMessage(testArray,[testArray.buffer]);}catch(e){Worker=null;}finally{URL.revokeObjectURL(objURL);if(testWorker){testWorker.terminate();}}}function createSourceObject(str){try{return URL.createObjectURL(new Blob([str],{type:SCRIPT_TYPE}));}catch(e){var blob=new BlobBuilder();blob.append(str);return URL.createObjectURL(blob.getBlob(type));}}function wrapTerminate(worker,objURL){if(!worker||!objURL)return;var term=worker.terminate;worker.objURL=objURL;worker.terminate=function(){if(worker.objURL)URL.revokeObjectURL(worker.objURL);term.call(worker);};}var TransmuxWorker=new shimWorker("./transmuxer-worker.worker.js",function(window,document$$1){var self=this;var transmuxerWorker=function(){/**
     * mux.js
     *
     * Copyright (c) 2015 Brightcove
     * All rights reserved.
     *
     * Functions that generate fragmented MP4s suitable for use with Media
     * Source Extensions.
     */var UINT32_MAX=Math.pow(2,32)-1;var box,dinf,esds,ftyp,mdat,mfhd,minf,moof,moov,mvex,mvhd,trak,tkhd,mdia,mdhd,hdlr,sdtp,stbl,stsd,traf,trex,trun,types,MAJOR_BRAND,MINOR_VERSION,AVC1_BRAND,VIDEO_HDLR,AUDIO_HDLR,HDLR_TYPES,VMHD,SMHD,DREF,STCO,STSC,STSZ,STTS;// pre-calculate constants
(function(){var i;types={avc1:[],// codingname
avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],// codingname
mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};// In environments where Uint8Array is undefined (e.g., IE8), skip set up so that we
// don't throw an error
if(typeof Uint8Array==='undefined'){return;}for(i in types){if(types.hasOwnProperty(i)){types[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)];}}MAJOR_BRAND=new Uint8Array(['i'.charCodeAt(0),'s'.charCodeAt(0),'o'.charCodeAt(0),'m'.charCodeAt(0)]);AVC1_BRAND=new Uint8Array(['a'.charCodeAt(0),'v'.charCodeAt(0),'c'.charCodeAt(0),'1'.charCodeAt(0)]);MINOR_VERSION=new Uint8Array([0,0,0,1]);VIDEO_HDLR=new Uint8Array([0x00,// version 0
0x00,0x00,0x00,// flags
0x00,0x00,0x00,0x00,// pre_defined
0x76,0x69,0x64,0x65,// handler_type: 'vide'
0x00,0x00,0x00,0x00,// reserved
0x00,0x00,0x00,0x00,// reserved
0x00,0x00,0x00,0x00,// reserved
0x56,0x69,0x64,0x65,0x6f,0x48,0x61,0x6e,0x64,0x6c,0x65,0x72,0x00// name: 'VideoHandler'
]);AUDIO_HDLR=new Uint8Array([0x00,// version 0
0x00,0x00,0x00,// flags
0x00,0x00,0x00,0x00,// pre_defined
0x73,0x6f,0x75,0x6e,// handler_type: 'soun'
0x00,0x00,0x00,0x00,// reserved
0x00,0x00,0x00,0x00,// reserved
0x00,0x00,0x00,0x00,// reserved
0x53,0x6f,0x75,0x6e,0x64,0x48,0x61,0x6e,0x64,0x6c,0x65,0x72,0x00// name: 'SoundHandler'
]);HDLR_TYPES={video:VIDEO_HDLR,audio:AUDIO_HDLR};DREF=new Uint8Array([0x00,// version 0
0x00,0x00,0x00,// flags
0x00,0x00,0x00,0x01,// entry_count
0x00,0x00,0x00,0x0c,// entry_size
0x75,0x72,0x6c,0x20,// 'url' type
0x00,// version 0
0x00,0x00,0x01// entry_flags
]);SMHD=new Uint8Array([0x00,// version
0x00,0x00,0x00,// flags
0x00,0x00,// balance, 0 means centered
0x00,0x00// reserved
]);STCO=new Uint8Array([0x00,// version
0x00,0x00,0x00,// flags
0x00,0x00,0x00,0x00// entry_count
]);STSC=STCO;STSZ=new Uint8Array([0x00,// version
0x00,0x00,0x00,// flags
0x00,0x00,0x00,0x00,// sample_size
0x00,0x00,0x00,0x00// sample_count
]);STTS=STCO;VMHD=new Uint8Array([0x00,// version
0x00,0x00,0x01,// flags
0x00,0x00,// graphicsmode
0x00,0x00,0x00,0x00,0x00,0x00// opcolor
]);})();box=function box(type){var payload=[],size=0,i,result,view;for(i=1;i<arguments.length;i++){payload.push(arguments[i]);}i=payload.length;// calculate the total size we need to allocate
while(i--){size+=payload[i].byteLength;}result=new Uint8Array(size+8);view=new DataView(result.buffer,result.byteOffset,result.byteLength);view.setUint32(0,result.byteLength);result.set(type,4);// copy the payload into the result
for(i=0,size=8;i<payload.length;i++){result.set(payload[i],size);size+=payload[i].byteLength;}return result;};dinf=function dinf(){return box(types.dinf,box(types.dref,DREF));};esds=function esds(track){return box(types.esds,new Uint8Array([0x00,// version
0x00,0x00,0x00,// flags
// ES_Descriptor
0x03,// tag, ES_DescrTag
0x19,// length
0x00,0x00,// ES_ID
0x00,// streamDependenceFlag, URL_flag, reserved, streamPriority
// DecoderConfigDescriptor
0x04,// tag, DecoderConfigDescrTag
0x11,// length
0x40,// object type
0x15,// streamType
0x00,0x06,0x00,// bufferSizeDB
0x00,0x00,0xda,0xc0,// maxBitrate
0x00,0x00,0xda,0xc0,// avgBitrate
// DecoderSpecificInfo
0x05,// tag, DecoderSpecificInfoTag
0x02,// length
// ISO/IEC 14496-3, AudioSpecificConfig
// for samplingFrequencyIndex see ISO/IEC 13818-7:2006, 8.1.3.2.2, Table 35
track.audioobjecttype<<3|track.samplingfrequencyindex>>>1,track.samplingfrequencyindex<<7|track.channelcount<<3,0x06,0x01,0x02// GASpecificConfig
]));};ftyp=function ftyp(){return box(types.ftyp,MAJOR_BRAND,MINOR_VERSION,MAJOR_BRAND,AVC1_BRAND);};hdlr=function hdlr(type){return box(types.hdlr,HDLR_TYPES[type]);};mdat=function mdat(data){return box(types.mdat,data);};mdhd=function mdhd(track){var result=new Uint8Array([0x00,// version 0
0x00,0x00,0x00,// flags
0x00,0x00,0x00,0x02,// creation_time
0x00,0x00,0x00,0x03,// modification_time
0x00,0x01,0x5f,0x90,// timescale, 90,000 "ticks" per second
track.duration>>>24&0xFF,track.duration>>>16&0xFF,track.duration>>>8&0xFF,track.duration&0xFF,// duration
0x55,0xc4,// 'und' language (undetermined)
0x00,0x00]);// Use the sample rate from the track metadata, when it is
// defined. The sample rate can be parsed out of an ADTS header, for
// instance.
if(track.samplerate){result[12]=track.samplerate>>>24&0xFF;result[13]=track.samplerate>>>16&0xFF;result[14]=track.samplerate>>>8&0xFF;result[15]=track.samplerate&0xFF;}return box(types.mdhd,result);};mdia=function mdia(track){return box(types.mdia,mdhd(track),hdlr(track.type),minf(track));};mfhd=function mfhd(sequenceNumber){return box(types.mfhd,new Uint8Array([0x00,0x00,0x00,0x00,// flags
(sequenceNumber&0xFF000000)>>24,(sequenceNumber&0xFF0000)>>16,(sequenceNumber&0xFF00)>>8,sequenceNumber&0xFF// sequence_number
]));};minf=function minf(track){return box(types.minf,track.type==='video'?box(types.vmhd,VMHD):box(types.smhd,SMHD),dinf(),stbl(track));};moof=function moof(sequenceNumber,tracks){var trackFragments=[],i=tracks.length;// build traf boxes for each track fragment
while(i--){trackFragments[i]=traf(tracks[i]);}return box.apply(null,[types.moof,mfhd(sequenceNumber)].concat(trackFragments));};/**
     * Returns a movie box.
     * @param tracks {array} the tracks associated with this movie
     * @see ISO/IEC 14496-12:2012(E), section 8.2.1
     */moov=function moov(tracks){var i=tracks.length,boxes=[];while(i--){boxes[i]=trak(tracks[i]);}return box.apply(null,[types.moov,mvhd(0xffffffff)].concat(boxes).concat(mvex(tracks)));};mvex=function mvex(tracks){var i=tracks.length,boxes=[];while(i--){boxes[i]=trex(tracks[i]);}return box.apply(null,[types.mvex].concat(boxes));};mvhd=function mvhd(duration){var bytes=new Uint8Array([0x00,// version 0
0x00,0x00,0x00,// flags
0x00,0x00,0x00,0x01,// creation_time
0x00,0x00,0x00,0x02,// modification_time
0x00,0x01,0x5f,0x90,// timescale, 90,000 "ticks" per second
(duration&0xFF000000)>>24,(duration&0xFF0000)>>16,(duration&0xFF00)>>8,duration&0xFF,// duration
0x00,0x01,0x00,0x00,// 1.0 rate
0x01,0x00,// 1.0 volume
0x00,0x00,// reserved
0x00,0x00,0x00,0x00,// reserved
0x00,0x00,0x00,0x00,// reserved
0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0x00,// transformation: unity matrix
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,// pre_defined
0xff,0xff,0xff,0xff// next_track_ID
]);return box(types.mvhd,bytes);};sdtp=function sdtp(track){var samples=track.samples||[],bytes=new Uint8Array(4+samples.length),flags,i;// leave the full box header (4 bytes) all zero
// write the sample table
for(i=0;i<samples.length;i++){flags=samples[i].flags;bytes[i+4]=flags.dependsOn<<4|flags.isDependedOn<<2|flags.hasRedundancy;}return box(types.sdtp,bytes);};stbl=function stbl(track){return box(types.stbl,stsd(track),box(types.stts,STTS),box(types.stsc,STSC),box(types.stsz,STSZ),box(types.stco,STCO));};(function(){var videoSample,audioSample;stsd=function stsd(track){return box(types.stsd,new Uint8Array([0x00,// version 0
0x00,0x00,0x00,// flags
0x00,0x00,0x00,0x01]),track.type==='video'?videoSample(track):audioSample(track));};videoSample=function videoSample(track){var sps=track.sps||[],pps=track.pps||[],sequenceParameterSets=[],pictureParameterSets=[],i;// assemble the SPSs
for(i=0;i<sps.length;i++){sequenceParameterSets.push((sps[i].byteLength&0xFF00)>>>8);sequenceParameterSets.push(sps[i].byteLength&0xFF);// sequenceParameterSetLength
sequenceParameterSets=sequenceParameterSets.concat(Array.prototype.slice.call(sps[i]));// SPS
}// assemble the PPSs
for(i=0;i<pps.length;i++){pictureParameterSets.push((pps[i].byteLength&0xFF00)>>>8);pictureParameterSets.push(pps[i].byteLength&0xFF);pictureParameterSets=pictureParameterSets.concat(Array.prototype.slice.call(pps[i]));}return box(types.avc1,new Uint8Array([0x00,0x00,0x00,0x00,0x00,0x00,// reserved
0x00,0x01,// data_reference_index
0x00,0x00,// pre_defined
0x00,0x00,// reserved
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,// pre_defined
(track.width&0xff00)>>8,track.width&0xff,// width
(track.height&0xff00)>>8,track.height&0xff,// height
0x00,0x48,0x00,0x00,// horizresolution
0x00,0x48,0x00,0x00,// vertresolution
0x00,0x00,0x00,0x00,// reserved
0x00,0x01,// frame_count
0x13,0x76,0x69,0x64,0x65,0x6f,0x6a,0x73,0x2d,0x63,0x6f,0x6e,0x74,0x72,0x69,0x62,0x2d,0x68,0x6c,0x73,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,// compressorname
0x00,0x18,// depth = 24
0x11,0x11// pre_defined = -1
]),box(types.avcC,new Uint8Array([0x01,// configurationVersion
track.profileIdc,// AVCProfileIndication
track.profileCompatibility,// profile_compatibility
track.levelIdc,// AVCLevelIndication
0xff// lengthSizeMinusOne, hard-coded to 4 bytes
].concat([sps.length// numOfSequenceParameterSets
]).concat(sequenceParameterSets).concat([pps.length// numOfPictureParameterSets
]).concat(pictureParameterSets))),// "PPS"
box(types.btrt,new Uint8Array([0x00,0x1c,0x9c,0x80,// bufferSizeDB
0x00,0x2d,0xc6,0xc0,// maxBitrate
0x00,0x2d,0xc6,0xc0]))// avgBitrate
);};audioSample=function audioSample(track){return box(types.mp4a,new Uint8Array([// SampleEntry, ISO/IEC 14496-12
0x00,0x00,0x00,0x00,0x00,0x00,// reserved
0x00,0x01,// data_reference_index
// AudioSampleEntry, ISO/IEC 14496-12
0x00,0x00,0x00,0x00,// reserved
0x00,0x00,0x00,0x00,// reserved
(track.channelcount&0xff00)>>8,track.channelcount&0xff,// channelcount
(track.samplesize&0xff00)>>8,track.samplesize&0xff,// samplesize
0x00,0x00,// pre_defined
0x00,0x00,// reserved
(track.samplerate&0xff00)>>8,track.samplerate&0xff,0x00,0x00// samplerate, 16.16
// MP4AudioSampleEntry, ISO/IEC 14496-14
]),esds(track));};})();tkhd=function tkhd(track){var result=new Uint8Array([0x00,// version 0
0x00,0x00,0x07,// flags
0x00,0x00,0x00,0x00,// creation_time
0x00,0x00,0x00,0x00,// modification_time
(track.id&0xFF000000)>>24,(track.id&0xFF0000)>>16,(track.id&0xFF00)>>8,track.id&0xFF,// track_ID
0x00,0x00,0x00,0x00,// reserved
(track.duration&0xFF000000)>>24,(track.duration&0xFF0000)>>16,(track.duration&0xFF00)>>8,track.duration&0xFF,// duration
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,// reserved
0x00,0x00,// layer
0x00,0x00,// alternate_group
0x01,0x00,// non-audio track volume
0x00,0x00,// reserved
0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0x00,// transformation: unity matrix
(track.width&0xFF00)>>8,track.width&0xFF,0x00,0x00,// width
(track.height&0xFF00)>>8,track.height&0xFF,0x00,0x00// height
]);return box(types.tkhd,result);};/**
     * Generate a track fragment (traf) box. A traf box collects metadata
     * about tracks in a movie fragment (moof) box.
     */traf=function traf(track){var trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun,sampleDependencyTable,dataOffset,upperWordBaseMediaDecodeTime,lowerWordBaseMediaDecodeTime;trackFragmentHeader=box(types.tfhd,new Uint8Array([0x00,// version 0
0x00,0x00,0x3a,// flags
(track.id&0xFF000000)>>24,(track.id&0xFF0000)>>16,(track.id&0xFF00)>>8,track.id&0xFF,// track_ID
0x00,0x00,0x00,0x01,// sample_description_index
0x00,0x00,0x00,0x00,// default_sample_duration
0x00,0x00,0x00,0x00,// default_sample_size
0x00,0x00,0x00,0x00// default_sample_flags
]));upperWordBaseMediaDecodeTime=Math.floor(track.baseMediaDecodeTime/(UINT32_MAX+1));lowerWordBaseMediaDecodeTime=Math.floor(track.baseMediaDecodeTime%(UINT32_MAX+1));trackFragmentDecodeTime=box(types.tfdt,new Uint8Array([0x01,// version 1
0x00,0x00,0x00,// flags
// baseMediaDecodeTime
upperWordBaseMediaDecodeTime>>>24&0xFF,upperWordBaseMediaDecodeTime>>>16&0xFF,upperWordBaseMediaDecodeTime>>>8&0xFF,upperWordBaseMediaDecodeTime&0xFF,lowerWordBaseMediaDecodeTime>>>24&0xFF,lowerWordBaseMediaDecodeTime>>>16&0xFF,lowerWordBaseMediaDecodeTime>>>8&0xFF,lowerWordBaseMediaDecodeTime&0xFF]));// the data offset specifies the number of bytes from the start of
// the containing moof to the first payload byte of the associated
// mdat
dataOffset=32+// tfhd
20+// tfdt
8+// traf header
16+// mfhd
8+// moof header
8;// mdat header
// audio tracks require less metadata
if(track.type==='audio'){trackFragmentRun=trun(track,dataOffset);return box(types.traf,trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun);}// video tracks should contain an independent and disposable samples
// box (sdtp)
// generate one and adjust offsets to match
sampleDependencyTable=sdtp(track);trackFragmentRun=trun(track,sampleDependencyTable.length+dataOffset);return box(types.traf,trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun,sampleDependencyTable);};/**
     * Generate a track box.
     * @param track {object} a track definition
     * @return {Uint8Array} the track box
     */trak=function trak(track){track.duration=track.duration||0xffffffff;return box(types.trak,tkhd(track),mdia(track));};trex=function trex(track){var result=new Uint8Array([0x00,// version 0
0x00,0x00,0x00,// flags
(track.id&0xFF000000)>>24,(track.id&0xFF0000)>>16,(track.id&0xFF00)>>8,track.id&0xFF,// track_ID
0x00,0x00,0x00,0x01,// default_sample_description_index
0x00,0x00,0x00,0x00,// default_sample_duration
0x00,0x00,0x00,0x00,// default_sample_size
0x00,0x01,0x00,0x01// default_sample_flags
]);// the last two bytes of default_sample_flags is the sample
// degradation priority, a hint about the importance of this sample
// relative to others. Lower the degradation priority for all sample
// types other than video.
if(track.type!=='video'){result[result.length-1]=0x00;}return box(types.trex,result);};(function(){var audioTrun,videoTrun,trunHeader;// This method assumes all samples are uniform. That is, if a
// duration is present for the first sample, it will be present for
// all subsequent samples.
// see ISO/IEC 14496-12:2012, Section 8.8.8.1
trunHeader=function trunHeader(samples,offset){var durationPresent=0,sizePresent=0,flagsPresent=0,compositionTimeOffset=0;// trun flag constants
if(samples.length){if(samples[0].duration!==undefined){durationPresent=0x1;}if(samples[0].size!==undefined){sizePresent=0x2;}if(samples[0].flags!==undefined){flagsPresent=0x4;}if(samples[0].compositionTimeOffset!==undefined){compositionTimeOffset=0x8;}}return[0x00,// version 0
0x00,durationPresent|sizePresent|flagsPresent|compositionTimeOffset,0x01,// flags
(samples.length&0xFF000000)>>>24,(samples.length&0xFF0000)>>>16,(samples.length&0xFF00)>>>8,samples.length&0xFF,// sample_count
(offset&0xFF000000)>>>24,(offset&0xFF0000)>>>16,(offset&0xFF00)>>>8,offset&0xFF// data_offset
];};videoTrun=function videoTrun(track,offset){var bytes,samples,sample,i;samples=track.samples||[];offset+=8+12+16*samples.length;bytes=trunHeader(samples,offset);for(i=0;i<samples.length;i++){sample=samples[i];bytes=bytes.concat([(sample.duration&0xFF000000)>>>24,(sample.duration&0xFF0000)>>>16,(sample.duration&0xFF00)>>>8,sample.duration&0xFF,// sample_duration
(sample.size&0xFF000000)>>>24,(sample.size&0xFF0000)>>>16,(sample.size&0xFF00)>>>8,sample.size&0xFF,// sample_size
sample.flags.isLeading<<2|sample.flags.dependsOn,sample.flags.isDependedOn<<6|sample.flags.hasRedundancy<<4|sample.flags.paddingValue<<1|sample.flags.isNonSyncSample,sample.flags.degradationPriority&0xF0<<8,sample.flags.degradationPriority&0x0F,// sample_flags
(sample.compositionTimeOffset&0xFF000000)>>>24,(sample.compositionTimeOffset&0xFF0000)>>>16,(sample.compositionTimeOffset&0xFF00)>>>8,sample.compositionTimeOffset&0xFF// sample_composition_time_offset
]);}return box(types.trun,new Uint8Array(bytes));};audioTrun=function audioTrun(track,offset){var bytes,samples,sample,i;samples=track.samples||[];offset+=8+12+8*samples.length;bytes=trunHeader(samples,offset);for(i=0;i<samples.length;i++){sample=samples[i];bytes=bytes.concat([(sample.duration&0xFF000000)>>>24,(sample.duration&0xFF0000)>>>16,(sample.duration&0xFF00)>>>8,sample.duration&0xFF,// sample_duration
(sample.size&0xFF000000)>>>24,(sample.size&0xFF0000)>>>16,(sample.size&0xFF00)>>>8,sample.size&0xFF]);// sample_size
}return box(types.trun,new Uint8Array(bytes));};trun=function trun(track,offset){if(track.type==='audio'){return audioTrun(track,offset);}return videoTrun(track,offset);};})();var mp4Generator={ftyp:ftyp,mdat:mdat,moof:moof,moov:moov,initSegment:function initSegment(tracks){var fileType=ftyp(),movie=moov(tracks),result;result=new Uint8Array(fileType.byteLength+movie.byteLength);result.set(fileType);result.set(movie,fileType.byteLength);return result;}};var toUnsigned=function toUnsigned(value){return value>>>0;};var bin={toUnsigned:toUnsigned};var toUnsigned$1=bin.toUnsigned;var _findBox,parseType,timescale,startTime,getVideoTrackIds;// Find the data for a box specified by its path
_findBox=function findBox(data,path){var results=[],i,size,type,end,subresults;if(!path.length){// short-circuit the search for empty paths
return null;}for(i=0;i<data.byteLength;){size=toUnsigned$1(data[i]<<24|data[i+1]<<16|data[i+2]<<8|data[i+3]);type=parseType(data.subarray(i+4,i+8));end=size>1?i+size:data.byteLength;if(type===path[0]){if(path.length===1){// this is the end of the path and we've found the box we were
// looking for
results.push(data.subarray(i+8,end));}else{// recursively search for the next box along the path
subresults=_findBox(data.subarray(i+8,end),path.slice(1));if(subresults.length){results=results.concat(subresults);}}}i=end;}// we've finished searching all of data
return results;};/**
     * Returns the string representation of an ASCII encoded four byte buffer.
     * @param buffer {Uint8Array} a four-byte buffer to translate
     * @return {string} the corresponding string
     */parseType=function parseType(buffer){var result='';result+=String.fromCharCode(buffer[0]);result+=String.fromCharCode(buffer[1]);result+=String.fromCharCode(buffer[2]);result+=String.fromCharCode(buffer[3]);return result;};/**
     * Parses an MP4 initialization segment and extracts the timescale
     * values for any declared tracks. Timescale values indicate the
     * number of clock ticks per second to assume for time-based values
     * elsewhere in the MP4.
     *
     * To determine the start time of an MP4, you need two pieces of
     * information: the timescale unit and the earliest base media decode
     * time. Multiple timescales can be specified within an MP4 but the
     * base media decode time is always expressed in the timescale from
     * the media header box for the track:
     * ```
     * moov > trak > mdia > mdhd.timescale
     * ```
     * @param init {Uint8Array} the bytes of the init segment
     * @return {object} a hash of track ids to timescale values or null if
     * the init segment is malformed.
     */timescale=function timescale(init){var result={},traks=_findBox(init,['moov','trak']);// mdhd timescale
return traks.reduce(function(result,trak){var tkhd,version,index,id,mdhd;tkhd=_findBox(trak,['tkhd'])[0];if(!tkhd){return null;}version=tkhd[0];index=version===0?12:20;id=toUnsigned$1(tkhd[index]<<24|tkhd[index+1]<<16|tkhd[index+2]<<8|tkhd[index+3]);mdhd=_findBox(trak,['mdia','mdhd'])[0];if(!mdhd){return null;}version=mdhd[0];index=version===0?12:20;result[id]=toUnsigned$1(mdhd[index]<<24|mdhd[index+1]<<16|mdhd[index+2]<<8|mdhd[index+3]);return result;},result);};/**
     * Determine the base media decode start time, in seconds, for an MP4
     * fragment. If multiple fragments are specified, the earliest time is
     * returned.
     *
     * The base media decode time can be parsed from track fragment
     * metadata:
     * ```
     * moof > traf > tfdt.baseMediaDecodeTime
     * ```
     * It requires the timescale value from the mdhd to interpret.
     *
     * @param timescale {object} a hash of track ids to timescale values.
     * @return {number} the earliest base media decode start time for the
     * fragment, in seconds
     */startTime=function startTime(timescale,fragment){var trafs,baseTimes,result;// we need info from two childrend of each track fragment box
trafs=_findBox(fragment,['moof','traf']);// determine the start times for each track
baseTimes=[].concat.apply([],trafs.map(function(traf){return _findBox(traf,['tfhd']).map(function(tfhd){var id,scale,baseTime;// get the track id from the tfhd
id=toUnsigned$1(tfhd[4]<<24|tfhd[5]<<16|tfhd[6]<<8|tfhd[7]);// assume a 90kHz clock if no timescale was specified
scale=timescale[id]||90e3;// get the base media decode time from the tfdt
baseTime=_findBox(traf,['tfdt']).map(function(tfdt){var version,result;version=tfdt[0];result=toUnsigned$1(tfdt[4]<<24|tfdt[5]<<16|tfdt[6]<<8|tfdt[7]);if(version===1){result*=Math.pow(2,32);result+=toUnsigned$1(tfdt[8]<<24|tfdt[9]<<16|tfdt[10]<<8|tfdt[11]);}return result;})[0];baseTime=baseTime||Infinity;// convert base time to seconds
return baseTime/scale;});}));// return the minimum
result=Math.min.apply(null,baseTimes);return isFinite(result)?result:0;};/**
      * Find the trackIds of the video tracks in this source.
      * Found by parsing the Handler Reference and Track Header Boxes:
      *   moov > trak > mdia > hdlr
      *   moov > trak > tkhd
      *
      * @param {Uint8Array} init - The bytes of the init segment for this source
      * @return {Number[]} A list of trackIds
      *
      * @see ISO-BMFF-12/2015, Section 8.4.3
     **/getVideoTrackIds=function getVideoTrackIds(init){var traks=_findBox(init,['moov','trak']);var videoTrackIds=[];traks.forEach(function(trak){var hdlrs=_findBox(trak,['mdia','hdlr']);var tkhds=_findBox(trak,['tkhd']);hdlrs.forEach(function(hdlr,index){var handlerType=parseType(hdlr.subarray(8,12));var tkhd=tkhds[index];var view;var version;var trackId;if(handlerType==='vide'){view=new DataView(tkhd.buffer,tkhd.byteOffset,tkhd.byteLength);version=view.getUint8(0);trackId=version===0?view.getUint32(12):view.getUint32(20);videoTrackIds.push(trackId);}});});return videoTrackIds;};var probe={findBox:_findBox,parseType:parseType,timescale:timescale,startTime:startTime,videoTrackIds:getVideoTrackIds};/**
     * mux.js
     *
     * Copyright (c) 2014 Brightcove
     * All rights reserved.
     *
     * A lightweight readable stream implemention that handles event dispatching.
     * Objects that inherit from streams should call init in their constructors.
     */var Stream=function Stream(){this.init=function(){var listeners={};/**
         * Add a listener for a specified event type.
         * @param type {string} the event name
         * @param listener {function} the callback to be invoked when an event of
         * the specified type occurs
         */this.on=function(type,listener){if(!listeners[type]){listeners[type]=[];}listeners[type]=listeners[type].concat(listener);};/**
         * Remove a listener for a specified event type.
         * @param type {string} the event name
         * @param listener {function} a function previously registered for this
         * type of event through `on`
         */this.off=function(type,listener){var index;if(!listeners[type]){return false;}index=listeners[type].indexOf(listener);listeners[type]=listeners[type].slice();listeners[type].splice(index,1);return index>-1;};/**
         * Trigger an event of the specified type on this stream. Any additional
         * arguments to this function are passed as parameters to event listeners.
         * @param type {string} the event name
         */this.trigger=function(type){var callbacks,i,length,args;callbacks=listeners[type];if(!callbacks){return;}// Slicing the arguments on every invocation of this method
// can add a significant amount of overhead. Avoid the
// intermediate object creation for the common case of a
// single callback argument
if(arguments.length===2){length=callbacks.length;for(i=0;i<length;++i){callbacks[i].call(this,arguments[1]);}}else{args=[];i=arguments.length;for(i=1;i<arguments.length;++i){args.push(arguments[i]);}length=callbacks.length;for(i=0;i<length;++i){callbacks[i].apply(this,args);}}};/**
         * Destroys the stream and cleans up.
         */this.dispose=function(){listeners={};};};};/**
     * Forwards all `data` events on this stream to the destination stream. The
     * destination stream should provide a method `push` to receive the data
     * events as they arrive.
     * @param destination {stream} the stream that will receive all `data` events
     * @param autoFlush {boolean} if false, we will not call `flush` on the destination
     *                            when the current stream emits a 'done' event
     * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options
     */Stream.prototype.pipe=function(destination){this.on('data',function(data){destination.push(data);});this.on('done',function(flushSource){destination.flush(flushSource);});return destination;};// Default stream functions that are expected to be overridden to perform
// actual work. These are provided by the prototype as a sort of no-op
// implementation so that we don't have to check for their existence in the
// `pipe` function above.
Stream.prototype.push=function(data){this.trigger('data',data);};Stream.prototype.flush=function(flushSource){this.trigger('done',flushSource);};var stream=Stream;// Convert an array of nal units into an array of frames with each frame being
// composed of the nal units that make up that frame
// Also keep track of cummulative data about the frame from the nal units such
// as the frame duration, starting pts, etc.
var groupNalsIntoFrames=function groupNalsIntoFrames(nalUnits){var i,currentNal,currentFrame=[],frames=[];currentFrame.byteLength=0;for(i=0;i<nalUnits.length;i++){currentNal=nalUnits[i];// Split on 'aud'-type nal units
if(currentNal.nalUnitType==='access_unit_delimiter_rbsp'){// Since the very first nal unit is expected to be an AUD
// only push to the frames array when currentFrame is not empty
if(currentFrame.length){currentFrame.duration=currentNal.dts-currentFrame.dts;frames.push(currentFrame);}currentFrame=[currentNal];currentFrame.byteLength=currentNal.data.byteLength;currentFrame.pts=currentNal.pts;currentFrame.dts=currentNal.dts;}else{// Specifically flag key frames for ease of use later
if(currentNal.nalUnitType==='slice_layer_without_partitioning_rbsp_idr'){currentFrame.keyFrame=true;}currentFrame.duration=currentNal.dts-currentFrame.dts;currentFrame.byteLength+=currentNal.data.byteLength;currentFrame.push(currentNal);}}// For the last frame, use the duration of the previous frame if we
// have nothing better to go on
if(frames.length&&(!currentFrame.duration||currentFrame.duration<=0)){currentFrame.duration=frames[frames.length-1].duration;}// Push the final frame
frames.push(currentFrame);return frames;};// Convert an array of frames into an array of Gop with each Gop being composed
// of the frames that make up that Gop
// Also keep track of cummulative data about the Gop from the frames such as the
// Gop duration, starting pts, etc.
var groupFramesIntoGops=function groupFramesIntoGops(frames){var i,currentFrame,currentGop=[],gops=[];// We must pre-set some of the values on the Gop since we
// keep running totals of these values
currentGop.byteLength=0;currentGop.nalCount=0;currentGop.duration=0;currentGop.pts=frames[0].pts;currentGop.dts=frames[0].dts;// store some metadata about all the Gops
gops.byteLength=0;gops.nalCount=0;gops.duration=0;gops.pts=frames[0].pts;gops.dts=frames[0].dts;for(i=0;i<frames.length;i++){currentFrame=frames[i];if(currentFrame.keyFrame){// Since the very first frame is expected to be an keyframe
// only push to the gops array when currentGop is not empty
if(currentGop.length){gops.push(currentGop);gops.byteLength+=currentGop.byteLength;gops.nalCount+=currentGop.nalCount;gops.duration+=currentGop.duration;}currentGop=[currentFrame];currentGop.nalCount=currentFrame.length;currentGop.byteLength=currentFrame.byteLength;currentGop.pts=currentFrame.pts;currentGop.dts=currentFrame.dts;currentGop.duration=currentFrame.duration;}else{currentGop.duration+=currentFrame.duration;currentGop.nalCount+=currentFrame.length;currentGop.byteLength+=currentFrame.byteLength;currentGop.push(currentFrame);}}if(gops.length&&currentGop.duration<=0){currentGop.duration=gops[gops.length-1].duration;}gops.byteLength+=currentGop.byteLength;gops.nalCount+=currentGop.nalCount;gops.duration+=currentGop.duration;// push the final Gop
gops.push(currentGop);return gops;};/*
     * Search for the first keyframe in the GOPs and throw away all frames
     * until that keyframe. Then extend the duration of the pulled keyframe
     * and pull the PTS and DTS of the keyframe so that it covers the time
     * range of the frames that were disposed.
     *
     * @param {Array} gops video GOPs
     * @returns {Array} modified video GOPs
     */var extendFirstKeyFrame=function extendFirstKeyFrame(gops){var currentGop;if(!gops[0][0].keyFrame&&gops.length>1){// Remove the first GOP
currentGop=gops.shift();gops.byteLength-=currentGop.byteLength;gops.nalCount-=currentGop.nalCount;// Extend the first frame of what is now the
// first gop to cover the time period of the
// frames we just removed
gops[0][0].dts=currentGop.dts;gops[0][0].pts=currentGop.pts;gops[0][0].duration+=currentGop.duration;}return gops;};/**
     * Default sample object
     * see ISO/IEC 14496-12:2012, section 8.6.4.3
     */var createDefaultSample=function createDefaultSample(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};};/*
     * Collates information from a video frame into an object for eventual
     * entry into an MP4 sample table.
     *
     * @param {Object} frame the video frame
     * @param {Number} dataOffset the byte offset to position the sample
     * @return {Object} object containing sample table info for a frame
     */var sampleForFrame=function sampleForFrame(frame,dataOffset){var sample=createDefaultSample();sample.dataOffset=dataOffset;sample.compositionTimeOffset=frame.pts-frame.dts;sample.duration=frame.duration;sample.size=4*frame.length;// Space for nal unit size
sample.size+=frame.byteLength;if(frame.keyFrame){sample.flags.dependsOn=2;sample.flags.isNonSyncSample=0;}return sample;};// generate the track's sample table from an array of gops
var generateSampleTable=function generateSampleTable(gops,baseDataOffset){var h,i,sample,currentGop,currentFrame,dataOffset=baseDataOffset||0,samples=[];for(h=0;h<gops.length;h++){currentGop=gops[h];for(i=0;i<currentGop.length;i++){currentFrame=currentGop[i];sample=sampleForFrame(currentFrame,dataOffset);dataOffset+=sample.size;samples.push(sample);}}return samples;};// generate the track's raw mdat data from an array of gops
var concatenateNalData=function concatenateNalData(gops){var h,i,j,currentGop,currentFrame,currentNal,dataOffset=0,nalsByteLength=gops.byteLength,numberOfNals=gops.nalCount,totalByteLength=nalsByteLength+4*numberOfNals,data=new Uint8Array(totalByteLength),view=new DataView(data.buffer);// For each Gop..
for(h=0;h<gops.length;h++){currentGop=gops[h];// For each Frame..
for(i=0;i<currentGop.length;i++){currentFrame=currentGop[i];// For each NAL..
for(j=0;j<currentFrame.length;j++){currentNal=currentFrame[j];view.setUint32(dataOffset,currentNal.data.byteLength);dataOffset+=4;data.set(currentNal.data,dataOffset);dataOffset+=currentNal.data.byteLength;}}}return data;};var frameUtils={groupNalsIntoFrames:groupNalsIntoFrames,groupFramesIntoGops:groupFramesIntoGops,extendFirstKeyFrame:extendFirstKeyFrame,generateSampleTable:generateSampleTable,concatenateNalData:concatenateNalData};var highPrefix=[33,16,5,32,164,27];var lowPrefix=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var zeroFill=function zeroFill(count){var a=[];while(count--){a.push(0);}return a;};var makeTable=function makeTable(metaTable){return Object.keys(metaTable).reduce(function(obj,key){obj[key]=new Uint8Array(metaTable[key].reduce(function(arr,part){return arr.concat(part);},[]));return obj;},{});};// Frames-of-silence to use for filling in missing AAC frames
var coneOfSilence={96000:[highPrefix,[227,64],zeroFill(154),[56]],88200:[highPrefix,[231],zeroFill(170),[56]],64000:[highPrefix,[248,192],zeroFill(240),[56]],48000:[highPrefix,[255,192],zeroFill(268),[55,148,128],zeroFill(54),[112]],44100:[highPrefix,[255,192],zeroFill(268),[55,163,128],zeroFill(84),[112]],32000:[highPrefix,[255,192],zeroFill(268),[55,234],zeroFill(226),[112]],24000:[highPrefix,[255,192],zeroFill(268),[55,255,128],zeroFill(268),[111,112],zeroFill(126),[224]],16000:[highPrefix,[255,192],zeroFill(268),[55,255,128],zeroFill(268),[111,255],zeroFill(269),[223,108],zeroFill(195),[1,192]],12000:[lowPrefix,zeroFill(268),[3,127,248],zeroFill(268),[6,255,240],zeroFill(268),[13,255,224],zeroFill(268),[27,253,128],zeroFill(259),[56]],11025:[lowPrefix,zeroFill(268),[3,127,248],zeroFill(268),[6,255,240],zeroFill(268),[13,255,224],zeroFill(268),[27,255,192],zeroFill(268),[55,175,128],zeroFill(108),[112]],8000:[lowPrefix,zeroFill(268),[3,121,16],zeroFill(47),[7]]};var silence=makeTable(coneOfSilence);var ONE_SECOND_IN_TS=90000,// 90kHz clock
secondsToVideoTs,secondsToAudioTs,videoTsToSeconds,audioTsToSeconds,audioTsToVideoTs,videoTsToAudioTs;secondsToVideoTs=function secondsToVideoTs(seconds){return seconds*ONE_SECOND_IN_TS;};secondsToAudioTs=function secondsToAudioTs(seconds,sampleRate){return seconds*sampleRate;};videoTsToSeconds=function videoTsToSeconds(timestamp){return timestamp/ONE_SECOND_IN_TS;};audioTsToSeconds=function audioTsToSeconds(timestamp,sampleRate){return timestamp/sampleRate;};audioTsToVideoTs=function audioTsToVideoTs(timestamp,sampleRate){return secondsToVideoTs(audioTsToSeconds(timestamp,sampleRate));};videoTsToAudioTs=function videoTsToAudioTs(timestamp,sampleRate){return secondsToAudioTs(videoTsToSeconds(timestamp),sampleRate);};var clock={secondsToVideoTs:secondsToVideoTs,secondsToAudioTs:secondsToAudioTs,videoTsToSeconds:videoTsToSeconds,audioTsToSeconds:audioTsToSeconds,audioTsToVideoTs:audioTsToVideoTs,videoTsToAudioTs:videoTsToAudioTs};var ONE_SECOND_IN_TS$1=90000;// 90kHz clock
/**
     * Sum the `byteLength` properties of the data in each AAC frame
     */var sumFrameByteLengths=function sumFrameByteLengths(array){var i,currentObj,sum=0;// sum the byteLength's all each nal unit in the frame
for(i=0;i<array.length;i++){currentObj=array[i];sum+=currentObj.data.byteLength;}return sum;};// Possibly pad (prefix) the audio track with silence if appending this track
// would lead to the introduction of a gap in the audio buffer
var prefixWithSilence=function prefixWithSilence(track,frames,audioAppendStartTs,videoBaseMediaDecodeTime){var baseMediaDecodeTimeTs,frameDuration=0,audioGapDuration=0,audioFillFrameCount=0,audioFillDuration=0,silentFrame,i;if(!frames.length){return;}baseMediaDecodeTimeTs=clock.audioTsToVideoTs(track.baseMediaDecodeTime,track.samplerate);// determine frame clock duration based on sample rate, round up to avoid overfills
frameDuration=Math.ceil(ONE_SECOND_IN_TS$1/(track.samplerate/1024));if(audioAppendStartTs&&videoBaseMediaDecodeTime){// insert the shortest possible amount (audio gap or audio to video gap)
audioGapDuration=baseMediaDecodeTimeTs-Math.max(audioAppendStartTs,videoBaseMediaDecodeTime);// number of full frames in the audio gap
audioFillFrameCount=Math.floor(audioGapDuration/frameDuration);audioFillDuration=audioFillFrameCount*frameDuration;}// don't attempt to fill gaps smaller than a single frame or larger
// than a half second
if(audioFillFrameCount<1||audioFillDuration>ONE_SECOND_IN_TS$1/2){return;}silentFrame=silence[track.samplerate];if(!silentFrame){// we don't have a silent frame pregenerated for the sample rate, so use a frame
// from the content instead
silentFrame=frames[0].data;}for(i=0;i<audioFillFrameCount;i++){frames.splice(i,0,{data:silentFrame});}track.baseMediaDecodeTime-=Math.floor(clock.videoTsToAudioTs(audioFillDuration,track.samplerate));};// If the audio segment extends before the earliest allowed dts
// value, remove AAC frames until starts at or after the earliest
// allowed DTS so that we don't end up with a negative baseMedia-
// DecodeTime for the audio track
var trimAdtsFramesByEarliestDts=function trimAdtsFramesByEarliestDts(adtsFrames,track,earliestAllowedDts){if(track.minSegmentDts>=earliestAllowedDts){return adtsFrames;}// We will need to recalculate the earliest segment Dts
track.minSegmentDts=Infinity;return adtsFrames.filter(function(currentFrame){// If this is an allowed frame, keep it and record it's Dts
if(currentFrame.dts>=earliestAllowedDts){track.minSegmentDts=Math.min(track.minSegmentDts,currentFrame.dts);track.minSegmentPts=track.minSegmentDts;return true;}// Otherwise, discard it
return false;});};// generate the track's raw mdat data from an array of frames
var generateSampleTable$1=function generateSampleTable(frames){var i,currentFrame,samples=[];for(i=0;i<frames.length;i++){currentFrame=frames[i];samples.push({size:currentFrame.data.byteLength,duration:1024// For AAC audio, all samples contain 1024 samples
});}return samples;};// generate the track's sample table from an array of frames
var concatenateFrameData=function concatenateFrameData(frames){var i,currentFrame,dataOffset=0,data=new Uint8Array(sumFrameByteLengths(frames));for(i=0;i<frames.length;i++){currentFrame=frames[i];data.set(currentFrame.data,dataOffset);dataOffset+=currentFrame.data.byteLength;}return data;};var audioFrameUtils={prefixWithSilence:prefixWithSilence,trimAdtsFramesByEarliestDts:trimAdtsFramesByEarliestDts,generateSampleTable:generateSampleTable$1,concatenateFrameData:concatenateFrameData};var ONE_SECOND_IN_TS$2=90000;// 90kHz clock
/**
     * Store information about the start and end of the track and the
     * duration for each frame/sample we process in order to calculate
     * the baseMediaDecodeTime
     */var collectDtsInfo=function collectDtsInfo(track,data){if(typeof data.pts==='number'){if(track.timelineStartInfo.pts===undefined){track.timelineStartInfo.pts=data.pts;}if(track.minSegmentPts===undefined){track.minSegmentPts=data.pts;}else{track.minSegmentPts=Math.min(track.minSegmentPts,data.pts);}if(track.maxSegmentPts===undefined){track.maxSegmentPts=data.pts;}else{track.maxSegmentPts=Math.max(track.maxSegmentPts,data.pts);}}if(typeof data.dts==='number'){if(track.timelineStartInfo.dts===undefined){track.timelineStartInfo.dts=data.dts;}if(track.minSegmentDts===undefined){track.minSegmentDts=data.dts;}else{track.minSegmentDts=Math.min(track.minSegmentDts,data.dts);}if(track.maxSegmentDts===undefined){track.maxSegmentDts=data.dts;}else{track.maxSegmentDts=Math.max(track.maxSegmentDts,data.dts);}}};/**
     * Clear values used to calculate the baseMediaDecodeTime between
     * tracks
     */var clearDtsInfo=function clearDtsInfo(track){delete track.minSegmentDts;delete track.maxSegmentDts;delete track.minSegmentPts;delete track.maxSegmentPts;};/**
     * Calculate the track's baseMediaDecodeTime based on the earliest
     * DTS the transmuxer has ever seen and the minimum DTS for the
     * current track
     * @param track {object} track metadata configuration
     * @param keepOriginalTimestamps {boolean} If true, keep the timestamps
     *        in the source; false to adjust the first segment to start at 0.
     */var calculateTrackBaseMediaDecodeTime=function calculateTrackBaseMediaDecodeTime(track,keepOriginalTimestamps){var baseMediaDecodeTime,scale,minSegmentDts=track.minSegmentDts;// Optionally adjust the time so the first segment starts at zero.
if(!keepOriginalTimestamps){minSegmentDts-=track.timelineStartInfo.dts;}// track.timelineStartInfo.baseMediaDecodeTime is the location, in time, where
// we want the start of the first segment to be placed
baseMediaDecodeTime=track.timelineStartInfo.baseMediaDecodeTime;// Add to that the distance this segment is from the very first
baseMediaDecodeTime+=minSegmentDts;// baseMediaDecodeTime must not become negative
baseMediaDecodeTime=Math.max(0,baseMediaDecodeTime);if(track.type==='audio'){// Audio has a different clock equal to the sampling_rate so we need to
// scale the PTS values into the clock rate of the track
scale=track.samplerate/ONE_SECOND_IN_TS$2;baseMediaDecodeTime*=scale;baseMediaDecodeTime=Math.floor(baseMediaDecodeTime);}return baseMediaDecodeTime;};var trackDecodeInfo={clearDtsInfo:clearDtsInfo,calculateTrackBaseMediaDecodeTime:calculateTrackBaseMediaDecodeTime,collectDtsInfo:collectDtsInfo};/**
     * mux.js
     *
     * Copyright (c) 2015 Brightcove
     * All rights reserved.
     *
     * Reads in-band caption information from a video elementary
     * stream. Captions must follow the CEA-708 standard for injection
     * into an MPEG-2 transport streams.
     * @see https://en.wikipedia.org/wiki/CEA-708
     * @see https://www.gpo.gov/fdsys/pkg/CFR-2007-title47-vol1/pdf/CFR-2007-title47-vol1-sec15-119.pdf
     */// Supplemental enhancement information (SEI) NAL units have a
// payload type field to indicate how they are to be
// interpreted. CEAS-708 caption content is always transmitted with
// payload type 0x04.
var USER_DATA_REGISTERED_ITU_T_T35=4,RBSP_TRAILING_BITS=128;/**
      * Parse a supplemental enhancement information (SEI) NAL unit.
      * Stops parsing once a message of type ITU T T35 has been found.
      *
      * @param bytes {Uint8Array} the bytes of a SEI NAL unit
      * @return {object} the parsed SEI payload
      * @see Rec. ITU-T H.264, 7.3.2.3.1
      */var parseSei=function parseSei(bytes){var i=0,result={payloadType:-1,payloadSize:0},payloadType=0,payloadSize=0;// go through the sei_rbsp parsing each each individual sei_message
while(i<bytes.byteLength){// stop once we have hit the end of the sei_rbsp
if(bytes[i]===RBSP_TRAILING_BITS){break;}// Parse payload type
while(bytes[i]===0xFF){payloadType+=255;i++;}payloadType+=bytes[i++];// Parse payload size
while(bytes[i]===0xFF){payloadSize+=255;i++;}payloadSize+=bytes[i++];// this sei_message is a 608/708 caption so save it and break
// there can only ever be one caption message in a frame's sei
if(!result.payload&&payloadType===USER_DATA_REGISTERED_ITU_T_T35){result.payloadType=payloadType;result.payloadSize=payloadSize;result.payload=bytes.subarray(i,i+payloadSize);break;}// skip the payload and parse the next message
i+=payloadSize;payloadType=0;payloadSize=0;}return result;};// see ANSI/SCTE 128-1 (2013), section 8.1
var parseUserData=function parseUserData(sei){// itu_t_t35_contry_code must be 181 (United States) for
// captions
if(sei.payload[0]!==181){return null;}// itu_t_t35_provider_code should be 49 (ATSC) for captions
if((sei.payload[1]<<8|sei.payload[2])!==49){return null;}// the user_identifier should be "GA94" to indicate ATSC1 data
if(String.fromCharCode(sei.payload[3],sei.payload[4],sei.payload[5],sei.payload[6])!=='GA94'){return null;}// finally, user_data_type_code should be 0x03 for caption data
if(sei.payload[7]!==0x03){return null;}// return the user_data_type_structure and strip the trailing
// marker bits
return sei.payload.subarray(8,sei.payload.length-1);};// see CEA-708-D, section 4.4
var parseCaptionPackets=function parseCaptionPackets(pts,userData){var results=[],i,count,offset,data;// if this is just filler, return immediately
if(!(userData[0]&0x40)){return results;}// parse out the cc_data_1 and cc_data_2 fields
count=userData[0]&0x1f;for(i=0;i<count;i++){offset=i*3;data={type:userData[offset+2]&0x03,pts:pts};// capture cc data when cc_valid is 1
if(userData[offset+2]&0x04){data.ccData=userData[offset+3]<<8|userData[offset+4];results.push(data);}}return results;};var discardEmulationPreventionBytes=function discardEmulationPreventionBytes(data){var length=data.byteLength,emulationPreventionBytesPositions=[],i=1,newLength,newData;// Find all `Emulation Prevention Bytes`
while(i<length-2){if(data[i]===0&&data[i+1]===0&&data[i+2]===0x03){emulationPreventionBytesPositions.push(i+2);i+=2;}else{i++;}}// If no Emulation Prevention Bytes were found just return the original
// array
if(emulationPreventionBytesPositions.length===0){return data;}// Create a new array to hold the NAL unit data
newLength=length-emulationPreventionBytesPositions.length;newData=new Uint8Array(newLength);var sourceIndex=0;for(i=0;i<newLength;sourceIndex++,i++){if(sourceIndex===emulationPreventionBytesPositions[0]){// Skip this byte
sourceIndex++;// Remove this position index
emulationPreventionBytesPositions.shift();}newData[i]=data[sourceIndex];}return newData;};// exports
var captionPacketParser={parseSei:parseSei,parseUserData:parseUserData,parseCaptionPackets:parseCaptionPackets,discardEmulationPreventionBytes:discardEmulationPreventionBytes,USER_DATA_REGISTERED_ITU_T_T35:USER_DATA_REGISTERED_ITU_T_T35};// -----------------
// Link To Transport
// -----------------
var CaptionStream=function CaptionStream(){CaptionStream.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new Cea608Stream(0,0),// eslint-disable-line no-use-before-define
new Cea608Stream(0,1),// eslint-disable-line no-use-before-define
new Cea608Stream(1,0),// eslint-disable-line no-use-before-define
new Cea608Stream(1,1)// eslint-disable-line no-use-before-define
];this.reset();// forward data and done events from CCs to this CaptionStream
this.ccStreams_.forEach(function(cc){cc.on('data',this.trigger.bind(this,'data'));cc.on('done',this.trigger.bind(this,'done'));},this);};CaptionStream.prototype=new stream();CaptionStream.prototype.push=function(event){var sei,userData,newCaptionPackets;// only examine SEI NALs
if(event.nalUnitType!=='sei_rbsp'){return;}// parse the sei
sei=captionPacketParser.parseSei(event.escapedRBSP);// ignore everything but user_data_registered_itu_t_t35
if(sei.payloadType!==captionPacketParser.USER_DATA_REGISTERED_ITU_T_T35){return;}// parse out the user data payload
userData=captionPacketParser.parseUserData(sei);// ignore unrecognized userData
if(!userData){return;}// Sometimes, the same segment # will be downloaded twice. To stop the
// caption data from being processed twice, we track the latest dts we've
// received and ignore everything with a dts before that. However, since
// data for a specific dts can be split across packets on either side of
// a segment boundary, we need to make sure we *don't* ignore the packets
// from the *next* segment that have dts === this.latestDts_. By constantly
// tracking the number of packets received with dts === this.latestDts_, we
// know how many should be ignored once we start receiving duplicates.
if(event.dts<this.latestDts_){// We've started getting older data, so set the flag.
this.ignoreNextEqualDts_=true;return;}else if(event.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--;if(!this.numSameDts_){// We've received the last duplicate packet, time to start processing again
this.ignoreNextEqualDts_=false;}return;}// parse out CC data packets and save them for later
newCaptionPackets=captionPacketParser.parseCaptionPackets(event.pts,userData);this.captionPackets_=this.captionPackets_.concat(newCaptionPackets);if(this.latestDts_!==event.dts){this.numSameDts_=0;}this.numSameDts_++;this.latestDts_=event.dts;};CaptionStream.prototype.flush=function(){// make sure we actually parsed captions before proceeding
if(!this.captionPackets_.length){this.ccStreams_.forEach(function(cc){cc.flush();},this);return;}// In Chrome, the Array#sort function is not stable so add a
// presortIndex that we can use to ensure we get a stable-sort
this.captionPackets_.forEach(function(elem,idx){elem.presortIndex=idx;});// sort caption byte-pairs based on their PTS values
this.captionPackets_.sort(function(a,b){if(a.pts===b.pts){return a.presortIndex-b.presortIndex;}return a.pts-b.pts;});this.captionPackets_.forEach(function(packet){if(packet.type<2){// Dispatch packet to the right Cea608Stream
this.dispatchCea608Packet(packet);}// this is where an 'else' would go for a dispatching packets
// to a theoretical Cea708Stream that handles SERVICEn data
},this);this.captionPackets_.length=0;this.ccStreams_.forEach(function(cc){cc.flush();},this);return;};CaptionStream.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(ccStream){ccStream.reset();});};CaptionStream.prototype.dispatchCea608Packet=function(packet){// NOTE: packet.type is the CEA608 field
if(this.setsChannel1Active(packet)){this.activeCea608Channel_[packet.type]=0;}else if(this.setsChannel2Active(packet)){this.activeCea608Channel_[packet.type]=1;}if(this.activeCea608Channel_[packet.type]===null){// If we haven't received anything to set the active channel, discard the
// data; we don't want jumbled captions
return;}this.ccStreams_[(packet.type<<1)+this.activeCea608Channel_[packet.type]].push(packet);};CaptionStream.prototype.setsChannel1Active=function(packet){return(packet.ccData&0x7800)===0x1000;};CaptionStream.prototype.setsChannel2Active=function(packet){return(packet.ccData&0x7800)===0x1800;};// ----------------------
// Session to Application
// ----------------------
// This hash maps non-ASCII, special, and extended character codes to their
// proper Unicode equivalent. The first keys that are only a single byte
// are the non-standard ASCII characters, which simply map the CEA608 byte
// to the standard ASCII/Unicode. The two-byte keys that follow are the CEA608
// character codes, but have their MSB bitmasked with 0x03 so that a lookup
// can be performed regardless of the field and data channel on which the
// character code was received.
var CHARACTER_TRANSLATION={0x2a:0xe1,// 
0x5c:0xe9,// 
0x5e:0xed,// 
0x5f:0xf3,// 
0x60:0xfa,// 
0x7b:0xe7,// 
0x7c:0xf7,// 
0x7d:0xd1,// 
0x7e:0xf1,// 
0x7f:0x2588,// 
0x0130:0xae,// 
0x0131:0xb0,// 
0x0132:0xbd,// 
0x0133:0xbf,// 
0x0134:0x2122,// 
0x0135:0xa2,// 
0x0136:0xa3,// 
0x0137:0x266a,// 
0x0138:0xe0,// 
0x0139:0xa0,//
0x013a:0xe8,// 
0x013b:0xe2,// 
0x013c:0xea,// 
0x013d:0xee,// 
0x013e:0xf4,// 
0x013f:0xfb,// 
0x0220:0xc1,// 
0x0221:0xc9,// 
0x0222:0xd3,// 
0x0223:0xda,// 
0x0224:0xdc,// 
0x0225:0xfc,// 
0x0226:0x2018,// 
0x0227:0xa1,// 
0x0228:0x2a,// *
0x0229:0x27,// '
0x022a:0x2014,// 
0x022b:0xa9,// 
0x022c:0x2120,// 
0x022d:0x2022,// 
0x022e:0x201c,// 
0x022f:0x201d,// 
0x0230:0xc0,// 
0x0231:0xc2,// 
0x0232:0xc7,// 
0x0233:0xc8,// 
0x0234:0xca,// 
0x0235:0xcb,// 
0x0236:0xeb,// 
0x0237:0xce,// 
0x0238:0xcf,// 
0x0239:0xef,// 
0x023a:0xd4,// 
0x023b:0xd9,// 
0x023c:0xf9,// 
0x023d:0xdb,// 
0x023e:0xab,// 
0x023f:0xbb,// 
0x0320:0xc3,// 
0x0321:0xe3,// 
0x0322:0xcd,// 
0x0323:0xcc,// 
0x0324:0xec,// 
0x0325:0xd2,// 
0x0326:0xf2,// 
0x0327:0xd5,// 
0x0328:0xf5,// 
0x0329:0x7b,// {
0x032a:0x7d,// }
0x032b:0x5c,// \
0x032c:0x5e,// ^
0x032d:0x5f,// _
0x032e:0x7c,// |
0x032f:0x7e,// ~
0x0330:0xc4,// 
0x0331:0xe4,// 
0x0332:0xd6,// 
0x0333:0xf6,// 
0x0334:0xdf,// 
0x0335:0xa5,// 
0x0336:0xa4,// 
0x0337:0x2502,// 
0x0338:0xc5,// 
0x0339:0xe5,// 
0x033a:0xd8,// 
0x033b:0xf8,// 
0x033c:0x250c,// 
0x033d:0x2510,// 
0x033e:0x2514,// 
0x033f:0x2518// 
};var getCharFromCode=function getCharFromCode(code){if(code===null){return'';}code=CHARACTER_TRANSLATION[code]||code;return String.fromCharCode(code);};// the index of the last row in a CEA-608 display buffer
var BOTTOM_ROW=14;// This array is used for mapping PACs -> row #, since there's no way of
// getting it through bit logic.
var ROWS=[0x1100,0x1120,0x1200,0x1220,0x1500,0x1520,0x1600,0x1620,0x1700,0x1720,0x1000,0x1300,0x1320,0x1400,0x1420];// CEA-608 captions are rendered onto a 34x15 matrix of character
// cells. The "bottom" row is the last element in the outer array.
var createDisplayBuffer=function createDisplayBuffer(){var result=[],i=BOTTOM_ROW+1;while(i--){result.push('');}return result;};var Cea608Stream=function Cea608Stream(field,dataChannel){Cea608Stream.prototype.init.call(this);this.field_=field||0;this.dataChannel_=dataChannel||0;this.name_='CC'+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(packet){var data,swap,char0,char1,text;// remove the parity bits
data=packet.ccData&0x7f7f;// ignore duplicate control codes; the spec demands they're sent twice
if(data===this.lastControlCode_){this.lastControlCode_=null;return;}// Store control codes
if((data&0xf000)===0x1000){this.lastControlCode_=data;}else if(data!==this.PADDING_){this.lastControlCode_=null;}char0=data>>>8;char1=data&0xff;if(data===this.PADDING_){return;}else if(data===this.RESUME_CAPTION_LOADING_){this.mode_='popOn';}else if(data===this.END_OF_CAPTION_){// If an EOC is received while in paint-on mode, the displayed caption
// text should be swapped to non-displayed memory as if it was a pop-on
// caption. Because of that, we should explicitly switch back to pop-on
// mode
this.mode_='popOn';this.clearFormatting(packet.pts);// if a caption was being displayed, it's gone now
this.flushDisplayed(packet.pts);// flip memory
swap=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=swap;// start measuring the time to display the caption
this.startPts_=packet.pts;}else if(data===this.ROLL_UP_2_ROWS_){this.rollUpRows_=2;this.setRollUp(packet.pts);}else if(data===this.ROLL_UP_3_ROWS_){this.rollUpRows_=3;this.setRollUp(packet.pts);}else if(data===this.ROLL_UP_4_ROWS_){this.rollUpRows_=4;this.setRollUp(packet.pts);}else if(data===this.CARRIAGE_RETURN_){this.clearFormatting(packet.pts);this.flushDisplayed(packet.pts);this.shiftRowsUp_();this.startPts_=packet.pts;}else if(data===this.BACKSPACE_){if(this.mode_==='popOn'){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1);}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);}}else if(data===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(packet.pts);this.displayed_=createDisplayBuffer();}else if(data===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=createDisplayBuffer();}else if(data===this.RESUME_DIRECT_CAPTIONING_){if(this.mode_!=='paintOn'){// NOTE: This should be removed when proper caption positioning is
// implemented
this.flushDisplayed(packet.pts);this.displayed_=createDisplayBuffer();}this.mode_='paintOn';this.startPts_=packet.pts;// Append special characters to caption text
}else if(this.isSpecialCharacter(char0,char1)){// Bitmask char0 so that we can apply character transformations
// regardless of field and data channel.
// Then byte-shift to the left and OR with char1 so we can pass the
// entire character code to `getCharFromCode`.
char0=(char0&0x03)<<8;text=getCharFromCode(char0|char1);this[this.mode_](packet.pts,text);this.column_++;// Append extended characters to caption text
}else if(this.isExtCharacter(char0,char1)){// Extended characters always follow their "non-extended" equivalents.
// IE if a "" is desired, you'll always receive "e"; non-compliant
// decoders are supposed to drop the "", while compliant decoders
// backspace the "e" and insert "".
// Delete the previous character
if(this.mode_==='popOn'){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1);}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);}// Bitmask char0 so that we can apply character transformations
// regardless of field and data channel.
// Then byte-shift to the left and OR with char1 so we can pass the
// entire character code to `getCharFromCode`.
char0=(char0&0x03)<<8;text=getCharFromCode(char0|char1);this[this.mode_](packet.pts,text);this.column_++;// Process mid-row codes
}else if(this.isMidRowCode(char0,char1)){// Attributes are not additive, so clear all formatting
this.clearFormatting(packet.pts);// According to the standard, mid-row codes
// should be replaced with spaces, so add one now
this[this.mode_](packet.pts,' ');this.column_++;if((char1&0xe)===0xe){this.addFormatting(packet.pts,['i']);}if((char1&0x1)===0x1){this.addFormatting(packet.pts,['u']);}// Detect offset control codes and adjust cursor
}else if(this.isOffsetControlCode(char0,char1)){// Cursor position is set by indent PAC (see below) in 4-column
// increments, with an additional offset code of 1-3 to reach any
// of the 32 columns specified by CEA-608. So all we need to do
// here is increment the column cursor by the given offset.
this.column_+=char1&0x03;// Detect PACs (Preamble Address Codes)
}else if(this.isPAC(char0,char1)){// There's no logic for PAC -> row mapping, so we have to just
// find the row code in an array and use its index :(
var row=ROWS.indexOf(data&0x1f20);// Configure the caption window if we're in roll-up mode
if(this.mode_==='rollUp'){// This implies that the base row is incorrectly set.
// As per the recommendation in CEA-608(Base Row Implementation), defer to the number
// of roll-up rows set.
if(row-this.rollUpRows_+1<0){row=this.rollUpRows_-1;}this.setRollUp(packet.pts,row);}if(row!==this.row_){// formatting is only persistent for current row
this.clearFormatting(packet.pts);this.row_=row;}// All PACs can apply underline, so detect and apply
// (All odd-numbered second bytes set underline)
if(char1&0x1&&this.formatting_.indexOf('u')===-1){this.addFormatting(packet.pts,['u']);}if((data&0x10)===0x10){// We've got an indent level code. Each successive even number
// increments the column cursor by 4, so we can get the desired
// column position by bit-shifting to the right (to get n/2)
// and multiplying by 4.
this.column_=((data&0xe)>>1)*4;}if(this.isColorPAC(char1)){// it's a color code, though we only support white, which
// can be either normal or italicized. white italics can be
// either 0x4e or 0x6e depending on the row, so we just
// bitwise-and with 0xe to see if italics should be turned on
if((char1&0xe)===0xe){this.addFormatting(packet.pts,['i']);}}// We have a normal character in char0, and possibly one in char1
}else if(this.isNormalChar(char0)){if(char1===0x00){char1=null;}text=getCharFromCode(char0);text+=getCharFromCode(char1);this[this.mode_](packet.pts,text);this.column_+=text.length;}// finish data processing
};};Cea608Stream.prototype=new stream();// Trigger a cue point that captures the current state of the
// display buffer
Cea608Stream.prototype.flushDisplayed=function(pts){var content=this.displayed_// remove spaces from the start and end of the string
.map(function(row){try{return row.trim();}catch(e){// Ordinarily, this shouldn't happen. However, caption
// parsing errors should not throw exceptions and
// break playback.
// eslint-disable-next-line no-console
console.error('Skipping malformed caption.');return'';}})// combine all text rows to display in one cue
.join('\n')// and remove blank rows from the start and end, but not the middle
.replace(/^\n+|\n+$/g,'');if(content.length){this.trigger('data',{startPts:this.startPts_,endPts:pts,text:content,stream:this.name_});}};/**
     * Zero out the data, used for startup and on seek
     */Cea608Stream.prototype.reset=function(){this.mode_='popOn';// When in roll-up mode, the index of the last row that will
// actually display captions. If a caption is shifted to a row
// with a lower index than this, it is cleared from the display
// buffer
this.topRow_=0;this.startPts_=0;this.displayed_=createDisplayBuffer();this.nonDisplayed_=createDisplayBuffer();this.lastControlCode_=null;// Track row and column for proper line-breaking and spacing
this.column_=0;this.row_=BOTTOM_ROW;this.rollUpRows_=2;// This variable holds currently-applied formatting
this.formatting_=[];};/**
     * Sets up control code and related constants for this instance
     */Cea608Stream.prototype.setConstants=function(){// The following attributes have these uses:
// ext_ :    char0 for mid-row codes, and the base for extended
//           chars (ext_+0, ext_+1, and ext_+2 are char0s for
//           extended codes)
// control_: char0 for control codes, except byte-shifted to the
//           left so that we can do this.control_ | CONTROL_CODE
// offset_:  char0 for tab offset codes
//
// It's also worth noting that control codes, and _only_ control codes,
// differ between field 1 and field2. Field 2 control codes are always
// their field 1 value plus 1. That's why there's the "| field" on the
// control value.
if(this.dataChannel_===0){this.BASE_=0x10;this.EXT_=0x11;this.CONTROL_=(0x14|this.field_)<<8;this.OFFSET_=0x17;}else if(this.dataChannel_===1){this.BASE_=0x18;this.EXT_=0x19;this.CONTROL_=(0x1c|this.field_)<<8;this.OFFSET_=0x1f;}// Constants for the LSByte command codes recognized by Cea608Stream. This
// list is not exhaustive. For a more comprehensive listing and semantics see
// http://www.gpo.gov/fdsys/pkg/CFR-2010-title47-vol1/pdf/CFR-2010-title47-vol1-sec15-119.pdf
// Padding
this.PADDING_=0x0000;// Pop-on Mode
this.RESUME_CAPTION_LOADING_=this.CONTROL_|0x20;this.END_OF_CAPTION_=this.CONTROL_|0x2f;// Roll-up Mode
this.ROLL_UP_2_ROWS_=this.CONTROL_|0x25;this.ROLL_UP_3_ROWS_=this.CONTROL_|0x26;this.ROLL_UP_4_ROWS_=this.CONTROL_|0x27;this.CARRIAGE_RETURN_=this.CONTROL_|0x2d;// paint-on mode
this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|0x29;// Erasure
this.BACKSPACE_=this.CONTROL_|0x21;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|0x2c;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|0x2e;};/**
     * Detects if the 2-byte packet data is a special character
     *
     * Special characters have a second byte in the range 0x30 to 0x3f,
     * with the first byte being 0x11 (for data channel 1) or 0x19 (for
     * data channel 2).
     *
     * @param  {Integer} char0 The first byte
     * @param  {Integer} char1 The second byte
     * @return {Boolean}       Whether the 2 bytes are an special character
     */Cea608Stream.prototype.isSpecialCharacter=function(char0,char1){return char0===this.EXT_&&char1>=0x30&&char1<=0x3f;};/**
     * Detects if the 2-byte packet data is an extended character
     *
     * Extended characters have a second byte in the range 0x20 to 0x3f,
     * with the first byte being 0x12 or 0x13 (for data channel 1) or
     * 0x1a or 0x1b (for data channel 2).
     *
     * @param  {Integer} char0 The first byte
     * @param  {Integer} char1 The second byte
     * @return {Boolean}       Whether the 2 bytes are an extended character
     */Cea608Stream.prototype.isExtCharacter=function(char0,char1){return(char0===this.EXT_+1||char0===this.EXT_+2)&&char1>=0x20&&char1<=0x3f;};/**
     * Detects if the 2-byte packet is a mid-row code
     *
     * Mid-row codes have a second byte in the range 0x20 to 0x2f, with
     * the first byte being 0x11 (for data channel 1) or 0x19 (for data
     * channel 2).
     *
     * @param  {Integer} char0 The first byte
     * @param  {Integer} char1 The second byte
     * @return {Boolean}       Whether the 2 bytes are a mid-row code
     */Cea608Stream.prototype.isMidRowCode=function(char0,char1){return char0===this.EXT_&&char1>=0x20&&char1<=0x2f;};/**
     * Detects if the 2-byte packet is an offset control code
     *
     * Offset control codes have a second byte in the range 0x21 to 0x23,
     * with the first byte being 0x17 (for data channel 1) or 0x1f (for
     * data channel 2).
     *
     * @param  {Integer} char0 The first byte
     * @param  {Integer} char1 The second byte
     * @return {Boolean}       Whether the 2 bytes are an offset control code
     */Cea608Stream.prototype.isOffsetControlCode=function(char0,char1){return char0===this.OFFSET_&&char1>=0x21&&char1<=0x23;};/**
     * Detects if the 2-byte packet is a Preamble Address Code
     *
     * PACs have a first byte in the range 0x10 to 0x17 (for data channel 1)
     * or 0x18 to 0x1f (for data channel 2), with the second byte in the
     * range 0x40 to 0x7f.
     *
     * @param  {Integer} char0 The first byte
     * @param  {Integer} char1 The second byte
     * @return {Boolean}       Whether the 2 bytes are a PAC
     */Cea608Stream.prototype.isPAC=function(char0,char1){return char0>=this.BASE_&&char0<this.BASE_+8&&char1>=0x40&&char1<=0x7f;};/**
     * Detects if a packet's second byte is in the range of a PAC color code
     *
     * PAC color codes have the second byte be in the range 0x40 to 0x4f, or
     * 0x60 to 0x6f.
     *
     * @param  {Integer} char1 The second byte
     * @return {Boolean}       Whether the byte is a color PAC
     */Cea608Stream.prototype.isColorPAC=function(char1){return char1>=0x40&&char1<=0x4f||char1>=0x60&&char1<=0x7f;};/**
     * Detects if a single byte is in the range of a normal character
     *
     * Normal text bytes are in the range 0x20 to 0x7f.
     *
     * @param  {Integer} char  The byte
     * @return {Boolean}       Whether the byte is a normal character
     */Cea608Stream.prototype.isNormalChar=function(char){return char>=0x20&&char<=0x7f;};/**
     * Configures roll-up
     *
     * @param  {Integer} pts         Current PTS
     * @param  {Integer} newBaseRow  Used by PACs to slide the current window to
     *                               a new position
     */Cea608Stream.prototype.setRollUp=function(pts,newBaseRow){// Reset the base row to the bottom row when switching modes
if(this.mode_!=='rollUp'){this.row_=BOTTOM_ROW;this.mode_='rollUp';// Spec says to wipe memories when switching to roll-up
this.flushDisplayed(pts);this.nonDisplayed_=createDisplayBuffer();this.displayed_=createDisplayBuffer();}if(newBaseRow!==undefined&&newBaseRow!==this.row_){// move currently displayed captions (up or down) to the new base row
for(var i=0;i<this.rollUpRows_;i++){this.displayed_[newBaseRow-i]=this.displayed_[this.row_-i];this.displayed_[this.row_-i]='';}}if(newBaseRow===undefined){newBaseRow=this.row_;}this.topRow_=newBaseRow-this.rollUpRows_+1;};// Adds the opening HTML tag for the passed character to the caption text,
// and keeps track of it for later closing
Cea608Stream.prototype.addFormatting=function(pts,format){this.formatting_=this.formatting_.concat(format);var text=format.reduce(function(text,format){return text+'<'+format+'>';},'');this[this.mode_](pts,text);};// Adds HTML closing tags for current formatting to caption text and
// clears remembered formatting
Cea608Stream.prototype.clearFormatting=function(pts){if(!this.formatting_.length){return;}var text=this.formatting_.reverse().reduce(function(text,format){return text+'</'+format+'>';},'');this.formatting_=[];this[this.mode_](pts,text);};// Mode Implementations
Cea608Stream.prototype.popOn=function(pts,text){var baseRow=this.nonDisplayed_[this.row_];// buffer characters
baseRow+=text;this.nonDisplayed_[this.row_]=baseRow;};Cea608Stream.prototype.rollUp=function(pts,text){var baseRow=this.displayed_[this.row_];baseRow+=text;this.displayed_[this.row_]=baseRow;};Cea608Stream.prototype.shiftRowsUp_=function(){var i;// clear out inactive rows
for(i=0;i<this.topRow_;i++){this.displayed_[i]='';}for(i=this.row_+1;i<BOTTOM_ROW+1;i++){this.displayed_[i]='';}// shift displayed rows up
for(i=this.topRow_;i<this.row_;i++){this.displayed_[i]=this.displayed_[i+1];}// clear out the bottom row
this.displayed_[this.row_]='';};Cea608Stream.prototype.paintOn=function(pts,text){var baseRow=this.displayed_[this.row_];baseRow+=text;this.displayed_[this.row_]=baseRow;};// exports
var captionStream={CaptionStream:CaptionStream,Cea608Stream:Cea608Stream};var streamTypes={H264_STREAM_TYPE:0x1B,ADTS_STREAM_TYPE:0x0F,METADATA_STREAM_TYPE:0x15};var MAX_TS=8589934592;var RO_THRESH=4294967296;var handleRollover=function handleRollover(value,reference){var direction=1;if(value>reference){// If the current timestamp value is greater than our reference timestamp and we detect a
// timestamp rollover, this means the roll over is happening in the opposite direction.
// Example scenario: Enter a long stream/video just after a rollover occurred. The reference
// point will be set to a small number, e.g. 1. The user then seeks backwards over the
// rollover point. In loading this segment, the timestamp values will be very large,
// e.g. 2^33 - 1. Since this comes before the data we loaded previously, we want to adjust
// the time stamp to be `value - 2^33`.
direction=-1;}// Note: A seek forwards or back that is greater than the RO_THRESH (2^32, ~13 hours) will
// cause an incorrect adjustment.
while(Math.abs(reference-value)>RO_THRESH){value+=direction*MAX_TS;}return value;};var TimestampRolloverStream=function TimestampRolloverStream(type){var lastDTS,referenceDTS;TimestampRolloverStream.prototype.init.call(this);this.type_=type;this.push=function(data){if(data.type!==this.type_){return;}if(referenceDTS===undefined){referenceDTS=data.dts;}data.dts=handleRollover(data.dts,referenceDTS);data.pts=handleRollover(data.pts,referenceDTS);lastDTS=data.dts;this.trigger('data',data);};this.flush=function(){referenceDTS=lastDTS;this.trigger('done');};this.discontinuity=function(){referenceDTS=void 0;lastDTS=void 0;};};TimestampRolloverStream.prototype=new stream();var timestampRolloverStream={TimestampRolloverStream:TimestampRolloverStream,handleRollover:handleRollover};var percentEncode=function percentEncode(bytes,start,end){var i,result='';for(i=start;i<end;i++){result+='%'+('00'+bytes[i].toString(16)).slice(-2);}return result;},// return the string representation of the specified byte range,
// interpreted as UTf-8.
parseUtf8=function parseUtf8(bytes,start,end){return decodeURIComponent(percentEncode(bytes,start,end));},// return the string representation of the specified byte range,
// interpreted as ISO-8859-1.
parseIso88591=function parseIso88591(bytes,start,end){return unescape(percentEncode(bytes,start,end));// jshint ignore:line
},parseSyncSafeInteger=function parseSyncSafeInteger(data){return data[0]<<21|data[1]<<14|data[2]<<7|data[3];},tagParsers={TXXX:function TXXX(tag){var i;if(tag.data[0]!==3){// ignore frames with unrecognized character encodings
return;}for(i=1;i<tag.data.length;i++){if(tag.data[i]===0){// parse the text fields
tag.description=parseUtf8(tag.data,1,i);// do not include the null terminator in the tag value
tag.value=parseUtf8(tag.data,i+1,tag.data.length).replace(/\0*$/,'');break;}}tag.data=tag.value;},WXXX:function WXXX(tag){var i;if(tag.data[0]!==3){// ignore frames with unrecognized character encodings
return;}for(i=1;i<tag.data.length;i++){if(tag.data[i]===0){// parse the description and URL fields
tag.description=parseUtf8(tag.data,1,i);tag.url=parseUtf8(tag.data,i+1,tag.data.length);break;}}},PRIV:function PRIV(tag){var i;for(i=0;i<tag.data.length;i++){if(tag.data[i]===0){// parse the description and URL fields
tag.owner=parseIso88591(tag.data,0,i);break;}}tag.privateData=tag.data.subarray(i+1);tag.data=tag.privateData;}},_MetadataStream;_MetadataStream=function MetadataStream(options){var settings={debug:!!(options&&options.debug),// the bytes of the program-level descriptor field in MP2T
// see ISO/IEC 13818-1:2013 (E), section 2.6 "Program and
// program element descriptors"
descriptor:options&&options.descriptor},// the total size in bytes of the ID3 tag being parsed
tagSize=0,// tag data that is not complete enough to be parsed
buffer=[],// the total number of bytes currently in the buffer
bufferSize=0,i;_MetadataStream.prototype.init.call(this);// calculate the text track in-band metadata track dispatch type
// https://html.spec.whatwg.org/multipage/embedded-content.html#steps-to-expose-a-media-resource-specific-text-track
this.dispatchType=streamTypes.METADATA_STREAM_TYPE.toString(16);if(settings.descriptor){for(i=0;i<settings.descriptor.length;i++){this.dispatchType+=('00'+settings.descriptor[i].toString(16)).slice(-2);}}this.push=function(chunk){var tag,frameStart,frameSize,frame,i,frameHeader;if(chunk.type!=='timed-metadata'){return;}// if data_alignment_indicator is set in the PES header,
// we must have the start of a new ID3 tag. Assume anything
// remaining in the buffer was malformed and throw it out
if(chunk.dataAlignmentIndicator){bufferSize=0;buffer.length=0;}// ignore events that don't look like ID3 data
if(buffer.length===0&&(chunk.data.length<10||chunk.data[0]!=='I'.charCodeAt(0)||chunk.data[1]!=='D'.charCodeAt(0)||chunk.data[2]!=='3'.charCodeAt(0))){if(settings.debug){// eslint-disable-next-line no-console
console.log('Skipping unrecognized metadata packet');}return;}// add this chunk to the data we've collected so far
buffer.push(chunk);bufferSize+=chunk.data.byteLength;// grab the size of the entire frame from the ID3 header
if(buffer.length===1){// the frame size is transmitted as a 28-bit integer in the
// last four bytes of the ID3 header.
// The most significant bit of each byte is dropped and the
// results concatenated to recover the actual value.
tagSize=parseSyncSafeInteger(chunk.data.subarray(6,10));// ID3 reports the tag size excluding the header but it's more
// convenient for our comparisons to include it
tagSize+=10;}// if the entire frame has not arrived, wait for more data
if(bufferSize<tagSize){return;}// collect the entire frame so it can be parsed
tag={data:new Uint8Array(tagSize),frames:[],pts:buffer[0].pts,dts:buffer[0].dts};for(i=0;i<tagSize;){tag.data.set(buffer[0].data.subarray(0,tagSize-i),i);i+=buffer[0].data.byteLength;bufferSize-=buffer[0].data.byteLength;buffer.shift();}// find the start of the first frame and the end of the tag
frameStart=10;if(tag.data[5]&0x40){// advance the frame start past the extended header
frameStart+=4;// header size field
frameStart+=parseSyncSafeInteger(tag.data.subarray(10,14));// clip any padding off the end
tagSize-=parseSyncSafeInteger(tag.data.subarray(16,20));}// parse one or more ID3 frames
// http://id3.org/id3v2.3.0#ID3v2_frame_overview
do{// determine the number of bytes in this frame
frameSize=parseSyncSafeInteger(tag.data.subarray(frameStart+4,frameStart+8));if(frameSize<1){// eslint-disable-next-line no-console
return console.log('Malformed ID3 frame encountered. Skipping metadata parsing.');}frameHeader=String.fromCharCode(tag.data[frameStart],tag.data[frameStart+1],tag.data[frameStart+2],tag.data[frameStart+3]);frame={id:frameHeader,data:tag.data.subarray(frameStart+10,frameStart+frameSize+10)};frame.key=frame.id;if(tagParsers[frame.id]){tagParsers[frame.id](frame);// handle the special PRIV frame used to indicate the start
// time for raw AAC data
if(frame.owner==='com.apple.streaming.transportStreamTimestamp'){var d=frame.data,size=(d[3]&0x01)<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;size*=4;size+=d[7]&0x03;frame.timeStamp=size;// in raw AAC, all subsequent data will be timestamped based
// on the value of this frame
// we couldn't have known the appropriate pts and dts before
// parsing this ID3 tag so set those values now
if(tag.pts===undefined&&tag.dts===undefined){tag.pts=frame.timeStamp;tag.dts=frame.timeStamp;}this.trigger('timestamp',frame);}}tag.frames.push(frame);frameStart+=10;// advance past the frame header
frameStart+=frameSize;// advance past the frame body
}while(frameStart<tagSize);this.trigger('data',tag);};};_MetadataStream.prototype=new stream();var metadataStream=_MetadataStream;var TimestampRolloverStream$1=timestampRolloverStream.TimestampRolloverStream;// object types
var _TransportPacketStream,_TransportParseStream,_ElementaryStream;// constants
var MP2T_PACKET_LENGTH=188,// bytes
SYNC_BYTE=0x47;/**
     * Splits an incoming stream of binary data into MPEG-2 Transport
     * Stream packets.
     */_TransportPacketStream=function TransportPacketStream(){var buffer=new Uint8Array(MP2T_PACKET_LENGTH),bytesInBuffer=0;_TransportPacketStream.prototype.init.call(this);// Deliver new bytes to the stream.
/**
       * Split a stream of data into M2TS packets
      **/this.push=function(bytes){var startIndex=0,endIndex=MP2T_PACKET_LENGTH,everything;// If there are bytes remaining from the last segment, prepend them to the
// bytes that were pushed in
if(bytesInBuffer){everything=new Uint8Array(bytes.byteLength+bytesInBuffer);everything.set(buffer.subarray(0,bytesInBuffer));everything.set(bytes,bytesInBuffer);bytesInBuffer=0;}else{everything=bytes;}// While we have enough data for a packet
while(endIndex<everything.byteLength){// Look for a pair of start and end sync bytes in the data..
if(everything[startIndex]===SYNC_BYTE&&everything[endIndex]===SYNC_BYTE){// We found a packet so emit it and jump one whole packet forward in
// the stream
this.trigger('data',everything.subarray(startIndex,endIndex));startIndex+=MP2T_PACKET_LENGTH;endIndex+=MP2T_PACKET_LENGTH;continue;}// If we get here, we have somehow become de-synchronized and we need to step
// forward one byte at a time until we find a pair of sync bytes that denote
// a packet
startIndex++;endIndex++;}// If there was some data left over at the end of the segment that couldn't
// possibly be a whole packet, keep it because it might be the start of a packet
// that continues in the next segment
if(startIndex<everything.byteLength){buffer.set(everything.subarray(startIndex),0);bytesInBuffer=everything.byteLength-startIndex;}};/**
       * Passes identified M2TS packets to the TransportParseStream to be parsed
      **/this.flush=function(){// If the buffer contains a whole packet when we are being flushed, emit it
// and empty the buffer. Otherwise hold onto the data because it may be
// important for decoding the next segment
if(bytesInBuffer===MP2T_PACKET_LENGTH&&buffer[0]===SYNC_BYTE){this.trigger('data',buffer);bytesInBuffer=0;}this.trigger('done');};};_TransportPacketStream.prototype=new stream();/**
     * Accepts an MP2T TransportPacketStream and emits data events with parsed
     * forms of the individual transport stream packets.
     */_TransportParseStream=function TransportParseStream(){var parsePsi,parsePat,parsePmt,self;_TransportParseStream.prototype.init.call(this);self=this;this.packetsWaitingForPmt=[];this.programMapTable=undefined;parsePsi=function parsePsi(payload,psi){var offset=0;// PSI packets may be split into multiple sections and those
// sections may be split into multiple packets. If a PSI
// section starts in this packet, the payload_unit_start_indicator
// will be true and the first byte of the payload will indicate
// the offset from the current position to the start of the
// section.
if(psi.payloadUnitStartIndicator){offset+=payload[offset]+1;}if(psi.type==='pat'){parsePat(payload.subarray(offset),psi);}else{parsePmt(payload.subarray(offset),psi);}};parsePat=function parsePat(payload,pat){pat.section_number=payload[7];// eslint-disable-line camelcase
pat.last_section_number=payload[8];// eslint-disable-line camelcase
// skip the PSI header and parse the first PMT entry
self.pmtPid=(payload[10]&0x1F)<<8|payload[11];pat.pmtPid=self.pmtPid;};/**
       * Parse out the relevant fields of a Program Map Table (PMT).
       * @param payload {Uint8Array} the PMT-specific portion of an MP2T
       * packet. The first byte in this array should be the table_id
       * field.
       * @param pmt {object} the object that should be decorated with
       * fields parsed from the PMT.
       */parsePmt=function parsePmt(payload,pmt){var sectionLength,tableEnd,programInfoLength,offset;// PMTs can be sent ahead of the time when they should actually
// take effect. We don't believe this should ever be the case
// for HLS but we'll ignore "forward" PMT declarations if we see
// them. Future PMT declarations have the current_next_indicator
// set to zero.
if(!(payload[5]&0x01)){return;}// overwrite any existing program map table
self.programMapTable={video:null,audio:null,'timed-metadata':{}};// the mapping table ends at the end of the current section
sectionLength=(payload[1]&0x0f)<<8|payload[2];tableEnd=3+sectionLength-4;// to determine where the table is, we have to figure out how
// long the program info descriptors are
programInfoLength=(payload[10]&0x0f)<<8|payload[11];// advance the offset to the first entry in the mapping table
offset=12+programInfoLength;while(offset<tableEnd){var streamType=payload[offset];var pid=(payload[offset+1]&0x1F)<<8|payload[offset+2];// only map a single elementary_pid for audio and video stream types
// TODO: should this be done for metadata too? for now maintain behavior of
//       multiple metadata streams
if(streamType===streamTypes.H264_STREAM_TYPE&&self.programMapTable.video===null){self.programMapTable.video=pid;}else if(streamType===streamTypes.ADTS_STREAM_TYPE&&self.programMapTable.audio===null){self.programMapTable.audio=pid;}else if(streamType===streamTypes.METADATA_STREAM_TYPE){// map pid to stream type for metadata streams
self.programMapTable['timed-metadata'][pid]=streamType;}// move to the next table entry
// skip past the elementary stream descriptors, if present
offset+=((payload[offset+3]&0x0F)<<8|payload[offset+4])+5;}// record the map on the packet as well
pmt.programMapTable=self.programMapTable;};/**
       * Deliver a new MP2T packet to the next stream in the pipeline.
       */this.push=function(packet){var result={},offset=4;result.payloadUnitStartIndicator=!!(packet[1]&0x40);// pid is a 13-bit field starting at the last bit of packet[1]
result.pid=packet[1]&0x1f;result.pid<<=8;result.pid|=packet[2];// if an adaption field is present, its length is specified by the
// fifth byte of the TS packet header. The adaptation field is
// used to add stuffing to PES packets that don't fill a complete
// TS packet, and to specify some forms of timing and control data
// that we do not currently use.
if((packet[3]&0x30)>>>4>0x01){offset+=packet[offset]+1;}// parse the rest of the packet based on the type
if(result.pid===0){result.type='pat';parsePsi(packet.subarray(offset),result);this.trigger('data',result);}else if(result.pid===this.pmtPid){result.type='pmt';parsePsi(packet.subarray(offset),result);this.trigger('data',result);// if there are any packets waiting for a PMT to be found, process them now
while(this.packetsWaitingForPmt.length){this.processPes_.apply(this,this.packetsWaitingForPmt.shift());}}else if(this.programMapTable===undefined){// When we have not seen a PMT yet, defer further processing of
// PES packets until one has been parsed
this.packetsWaitingForPmt.push([packet,offset,result]);}else{this.processPes_(packet,offset,result);}};this.processPes_=function(packet,offset,result){// set the appropriate stream type
if(result.pid===this.programMapTable.video){result.streamType=streamTypes.H264_STREAM_TYPE;}else if(result.pid===this.programMapTable.audio){result.streamType=streamTypes.ADTS_STREAM_TYPE;}else{// if not video or audio, it is timed-metadata or unknown
// if unknown, streamType will be undefined
result.streamType=this.programMapTable['timed-metadata'][result.pid];}result.type='pes';result.data=packet.subarray(offset);this.trigger('data',result);};};_TransportParseStream.prototype=new stream();_TransportParseStream.STREAM_TYPES={h264:0x1b,adts:0x0f};/**
     * Reconsistutes program elementary stream (PES) packets from parsed
     * transport stream packets. That is, if you pipe an
     * mp2t.TransportParseStream into a mp2t.ElementaryStream, the output
     * events will be events which capture the bytes for individual PES
     * packets plus relevant metadata that has been extracted from the
     * container.
     */_ElementaryStream=function ElementaryStream(){var self=this,// PES packet fragments
video={data:[],size:0},audio={data:[],size:0},timedMetadata={data:[],size:0},parsePes=function parsePes(payload,pes){var ptsDtsFlags;// get the packet length, this will be 0 for video
pes.packetLength=6+(payload[4]<<8|payload[5]);// find out if this packets starts a new keyframe
pes.dataAlignmentIndicator=(payload[6]&0x04)!==0;// PES packets may be annotated with a PTS value, or a PTS value
// and a DTS value. Determine what combination of values is
// available to work with.
ptsDtsFlags=payload[7];// PTS and DTS are normally stored as a 33-bit number.  Javascript
// performs all bitwise operations on 32-bit integers but javascript
// supports a much greater range (52-bits) of integer using standard
// mathematical operations.
// We construct a 31-bit value using bitwise operators over the 31
// most significant bits and then multiply by 4 (equal to a left-shift
// of 2) before we add the final 2 least significant bits of the
// timestamp (equal to an OR.)
if(ptsDtsFlags&0xC0){// the PTS and DTS are not written out directly. For information
// on how they are encoded, see
// http://dvd.sourceforge.net/dvdinfo/pes-hdr.html
pes.pts=(payload[9]&0x0E)<<27|(payload[10]&0xFF)<<20|(payload[11]&0xFE)<<12|(payload[12]&0xFF)<<5|(payload[13]&0xFE)>>>3;pes.pts*=4;// Left shift by 2
pes.pts+=(payload[13]&0x06)>>>1;// OR by the two LSBs
pes.dts=pes.pts;if(ptsDtsFlags&0x40){pes.dts=(payload[14]&0x0E)<<27|(payload[15]&0xFF)<<20|(payload[16]&0xFE)<<12|(payload[17]&0xFF)<<5|(payload[18]&0xFE)>>>3;pes.dts*=4;// Left shift by 2
pes.dts+=(payload[18]&0x06)>>>1;// OR by the two LSBs
}}// the data section starts immediately after the PES header.
// pes_header_data_length specifies the number of header bytes
// that follow the last byte of the field.
pes.data=payload.subarray(9+payload[8]);},/**
        * Pass completely parsed PES packets to the next stream in the pipeline
       **/flushStream=function flushStream(stream$$1,type,forceFlush){var packetData=new Uint8Array(stream$$1.size),event={type:type},i=0,offset=0,packetFlushable=false,fragment;// do nothing if there is not enough buffered data for a complete
// PES header
if(!stream$$1.data.length||stream$$1.size<9){return;}event.trackId=stream$$1.data[0].pid;// reassemble the packet
for(i=0;i<stream$$1.data.length;i++){fragment=stream$$1.data[i];packetData.set(fragment.data,offset);offset+=fragment.data.byteLength;}// parse assembled packet's PES header
parsePes(packetData,event);// non-video PES packets MUST have a non-zero PES_packet_length
// check that there is enough stream data to fill the packet
packetFlushable=type==='video'||event.packetLength<=stream$$1.size;// flush pending packets if the conditions are right
if(forceFlush||packetFlushable){stream$$1.size=0;stream$$1.data.length=0;}// only emit packets that are complete. this is to avoid assembling
// incomplete PES packets due to poor segmentation
if(packetFlushable){self.trigger('data',event);}};_ElementaryStream.prototype.init.call(this);/**
       * Identifies M2TS packet types and parses PES packets using metadata
       * parsed from the PMT
       **/this.push=function(data){({pat:function pat(){// we have to wait for the PMT to arrive as well before we
// have any meaningful metadata
},pes:function pes(){var stream$$1,streamType;switch(data.streamType){case streamTypes.H264_STREAM_TYPE:case streamTypes.H264_STREAM_TYPE:stream$$1=video;streamType='video';break;case streamTypes.ADTS_STREAM_TYPE:stream$$1=audio;streamType='audio';break;case streamTypes.METADATA_STREAM_TYPE:stream$$1=timedMetadata;streamType='timed-metadata';break;default:// ignore unknown stream types
return;}// if a new packet is starting, we can flush the completed
// packet
if(data.payloadUnitStartIndicator){flushStream(stream$$1,streamType,true);}// buffer this fragment until we are sure we've received the
// complete payload
stream$$1.data.push(data);stream$$1.size+=data.data.byteLength;},pmt:function pmt(){var event={type:'metadata',tracks:[]},programMapTable=data.programMapTable;// translate audio and video streams to tracks
if(programMapTable.video!==null){event.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+programMapTable.video,codec:'avc',type:'video'});}if(programMapTable.audio!==null){event.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+programMapTable.audio,codec:'adts',type:'audio'});}self.trigger('data',event);}})[data.type]();};/**
       * Flush any remaining input. Video PES packets may be of variable
       * length. Normally, the start of a new video packet can trigger the
       * finalization of the previous packet. That is not possible if no
       * more video is forthcoming, however. In that case, some other
       * mechanism (like the end of the file) has to be employed. When it is
       * clear that no additional data is forthcoming, calling this method
       * will flush the buffered packets.
       */this.flush=function(){// !!THIS ORDER IS IMPORTANT!!
// video first then audio
flushStream(video,'video');flushStream(audio,'audio');flushStream(timedMetadata,'timed-metadata');this.trigger('done');};};_ElementaryStream.prototype=new stream();var m2ts={PAT_PID:0x0000,MP2T_PACKET_LENGTH:MP2T_PACKET_LENGTH,TransportPacketStream:_TransportPacketStream,TransportParseStream:_TransportParseStream,ElementaryStream:_ElementaryStream,TimestampRolloverStream:TimestampRolloverStream$1,CaptionStream:captionStream.CaptionStream,Cea608Stream:captionStream.Cea608Stream,MetadataStream:metadataStream};for(var type in streamTypes){if(streamTypes.hasOwnProperty(type)){m2ts[type]=streamTypes[type];}}var m2ts_1=m2ts;var _AdtsStream;var ADTS_SAMPLING_FREQUENCIES=[96000,88200,64000,48000,44100,32000,24000,22050,16000,12000,11025,8000,7350];/*
     * Accepts a ElementaryStream and emits data events with parsed
     * AAC Audio Frames of the individual packets. Input audio in ADTS
     * format is unpacked and re-emitted as AAC frames.
     *
     * @see http://wiki.multimedia.cx/index.php?title=ADTS
     * @see http://wiki.multimedia.cx/?title=Understanding_AAC
     */_AdtsStream=function AdtsStream(){var buffer;_AdtsStream.prototype.init.call(this);this.push=function(packet){var i=0,frameNum=0,frameLength,protectionSkipBytes,frameEnd,oldBuffer,sampleCount,adtsFrameDuration;if(packet.type!=='audio'){// ignore non-audio data
return;}// Prepend any data in the buffer to the input data so that we can parse
// aac frames the cross a PES packet boundary
if(buffer){oldBuffer=buffer;buffer=new Uint8Array(oldBuffer.byteLength+packet.data.byteLength);buffer.set(oldBuffer);buffer.set(packet.data,oldBuffer.byteLength);}else{buffer=packet.data;}// unpack any ADTS frames which have been fully received
// for details on the ADTS header, see http://wiki.multimedia.cx/index.php?title=ADTS
while(i+5<buffer.length){// Loook for the start of an ADTS header..
if(buffer[i]!==0xFF||(buffer[i+1]&0xF6)!==0xF0){// If a valid header was not found,  jump one forward and attempt to
// find a valid ADTS header starting at the next byte
i++;continue;}// The protection skip bit tells us if we have 2 bytes of CRC data at the
// end of the ADTS header
protectionSkipBytes=(~buffer[i+1]&0x01)*2;// Frame length is a 13 bit integer starting 16 bits from the
// end of the sync sequence
frameLength=(buffer[i+3]&0x03)<<11|buffer[i+4]<<3|(buffer[i+5]&0xe0)>>5;sampleCount=((buffer[i+6]&0x03)+1)*1024;adtsFrameDuration=sampleCount*90000/ADTS_SAMPLING_FREQUENCIES[(buffer[i+2]&0x3c)>>>2];frameEnd=i+frameLength;// If we don't have enough data to actually finish this ADTS frame, return
// and wait for more data
if(buffer.byteLength<frameEnd){return;}// Otherwise, deliver the complete AAC frame
this.trigger('data',{pts:packet.pts+frameNum*adtsFrameDuration,dts:packet.dts+frameNum*adtsFrameDuration,sampleCount:sampleCount,audioobjecttype:(buffer[i+2]>>>6&0x03)+1,channelcount:(buffer[i+2]&1)<<2|(buffer[i+3]&0xc0)>>>6,samplerate:ADTS_SAMPLING_FREQUENCIES[(buffer[i+2]&0x3c)>>>2],samplingfrequencyindex:(buffer[i+2]&0x3c)>>>2,// assume ISO/IEC 14496-12 AudioSampleEntry default of 16
samplesize:16,data:buffer.subarray(i+7+protectionSkipBytes,frameEnd)});// If the buffer is empty, clear it and return
if(buffer.byteLength===frameEnd){buffer=undefined;return;}frameNum++;// Remove the finished frame from the buffer and start the process again
buffer=buffer.subarray(frameEnd);}};this.flush=function(){this.trigger('done');};};_AdtsStream.prototype=new stream();var adts=_AdtsStream;var ExpGolomb;/**
     * Parser for exponential Golomb codes, a variable-bitwidth number encoding
     * scheme used by h264.
     */ExpGolomb=function ExpGolomb(workingData){var// the number of bytes left to examine in workingData
workingBytesAvailable=workingData.byteLength,// the current word being examined
workingWord=0,// :uint
// the number of bits left to examine in the current word
workingBitsAvailable=0;// :uint;
// ():uint
this.length=function(){return 8*workingBytesAvailable;};// ():uint
this.bitsAvailable=function(){return 8*workingBytesAvailable+workingBitsAvailable;};// ():void
this.loadWord=function(){var position=workingData.byteLength-workingBytesAvailable,workingBytes=new Uint8Array(4),availableBytes=Math.min(4,workingBytesAvailable);if(availableBytes===0){throw new Error('no bytes available');}workingBytes.set(workingData.subarray(position,position+availableBytes));workingWord=new DataView(workingBytes.buffer).getUint32(0);// track the amount of workingData that has been processed
workingBitsAvailable=availableBytes*8;workingBytesAvailable-=availableBytes;};// (count:int):void
this.skipBits=function(count){var skipBytes;// :int
if(workingBitsAvailable>count){workingWord<<=count;workingBitsAvailable-=count;}else{count-=workingBitsAvailable;skipBytes=Math.floor(count/8);count-=skipBytes*8;workingBytesAvailable-=skipBytes;this.loadWord();workingWord<<=count;workingBitsAvailable-=count;}};// (size:int):uint
this.readBits=function(size){var bits=Math.min(workingBitsAvailable,size),// :uint
valu=workingWord>>>32-bits;// :uint
// if size > 31, handle error
workingBitsAvailable-=bits;if(workingBitsAvailable>0){workingWord<<=bits;}else if(workingBytesAvailable>0){this.loadWord();}bits=size-bits;if(bits>0){return valu<<bits|this.readBits(bits);}return valu;};// ():uint
this.skipLeadingZeros=function(){var leadingZeroCount;// :uint
for(leadingZeroCount=0;leadingZeroCount<workingBitsAvailable;++leadingZeroCount){if((workingWord&0x80000000>>>leadingZeroCount)!==0){// the first bit of working word is 1
workingWord<<=leadingZeroCount;workingBitsAvailable-=leadingZeroCount;return leadingZeroCount;}}// we exhausted workingWord and still have not found a 1
this.loadWord();return leadingZeroCount+this.skipLeadingZeros();};// ():void
this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros());};// ():void
this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros());};// ():uint
this.readUnsignedExpGolomb=function(){var clz=this.skipLeadingZeros();// :uint
return this.readBits(clz+1)-1;};// ():int
this.readExpGolomb=function(){var valu=this.readUnsignedExpGolomb();// :int
if(0x01&valu){// the number is odd if the low order bit is set
return 1+valu>>>1;// add 1 to make it even, and divide by 2
}return-1*(valu>>>1);// divide by two then make it negative
};// Some convenience functions
// :Boolean
this.readBoolean=function(){return this.readBits(1)===1;};// ():int
this.readUnsignedByte=function(){return this.readBits(8);};this.loadWord();};var expGolomb=ExpGolomb;var _H264Stream,_NalByteStream;var PROFILES_WITH_OPTIONAL_SPS_DATA;/**
     * Accepts a NAL unit byte stream and unpacks the embedded NAL units.
     */_NalByteStream=function NalByteStream(){var syncPoint=0,i,buffer;_NalByteStream.prototype.init.call(this);/*
       * Scans a byte stream and triggers a data event with the NAL units found.
       * @param {Object} data Event received from H264Stream
       * @param {Uint8Array} data.data The h264 byte stream to be scanned
       *
       * @see H264Stream.push
       */this.push=function(data){var swapBuffer;if(!buffer){buffer=data.data;}else{swapBuffer=new Uint8Array(buffer.byteLength+data.data.byteLength);swapBuffer.set(buffer);swapBuffer.set(data.data,buffer.byteLength);buffer=swapBuffer;}// Rec. ITU-T H.264, Annex B
// scan for NAL unit boundaries
// a match looks like this:
// 0 0 1 .. NAL .. 0 0 1
// ^ sync point        ^ i
// or this:
// 0 0 1 .. NAL .. 0 0 0
// ^ sync point        ^ i
// advance the sync point to a NAL start, if necessary
for(;syncPoint<buffer.byteLength-3;syncPoint++){if(buffer[syncPoint+2]===1){// the sync point is properly aligned
i=syncPoint+5;break;}}while(i<buffer.byteLength){// look at the current byte to determine if we've hit the end of
// a NAL unit boundary
switch(buffer[i]){case 0:// skip past non-sync sequences
if(buffer[i-1]!==0){i+=2;break;}else if(buffer[i-2]!==0){i++;break;}// deliver the NAL unit if it isn't empty
if(syncPoint+3!==i-2){this.trigger('data',buffer.subarray(syncPoint+3,i-2));}// drop trailing zeroes
do{i++;}while(buffer[i]!==1&&i<buffer.length);syncPoint=i-2;i+=3;break;case 1:// skip past non-sync sequences
if(buffer[i-1]!==0||buffer[i-2]!==0){i+=3;break;}// deliver the NAL unit
this.trigger('data',buffer.subarray(syncPoint+3,i-2));syncPoint=i-2;i+=3;break;default:// the current byte isn't a one or zero, so it cannot be part
// of a sync sequence
i+=3;break;}}// filter out the NAL units that were delivered
buffer=buffer.subarray(syncPoint);i-=syncPoint;syncPoint=0;};this.flush=function(){// deliver the last buffered NAL unit
if(buffer&&buffer.byteLength>3){this.trigger('data',buffer.subarray(syncPoint+3));}// reset the stream state
buffer=null;syncPoint=0;this.trigger('done');};};_NalByteStream.prototype=new stream();// values of profile_idc that indicate additional fields are included in the SPS
// see Recommendation ITU-T H.264 (4/2013),
// 7.3.2.1.1 Sequence parameter set data syntax
PROFILES_WITH_OPTIONAL_SPS_DATA={100:true,110:true,122:true,244:true,44:true,83:true,86:true,118:true,128:true,138:true,139:true,134:true};/**
     * Accepts input from a ElementaryStream and produces H.264 NAL unit data
     * events.
     */_H264Stream=function H264Stream(){var nalByteStream=new _NalByteStream(),self,trackId,currentPts,currentDts,discardEmulationPreventionBytes,readSequenceParameterSet,skipScalingList;_H264Stream.prototype.init.call(this);self=this;/*
       * Pushes a packet from a stream onto the NalByteStream
       *
       * @param {Object} packet - A packet received from a stream
       * @param {Uint8Array} packet.data - The raw bytes of the packet
       * @param {Number} packet.dts - Decode timestamp of the packet
       * @param {Number} packet.pts - Presentation timestamp of the packet
       * @param {Number} packet.trackId - The id of the h264 track this packet came from
       * @param {('video'|'audio')} packet.type - The type of packet
       *
       */this.push=function(packet){if(packet.type!=='video'){return;}trackId=packet.trackId;currentPts=packet.pts;currentDts=packet.dts;nalByteStream.push(packet);};/*
       * Identify NAL unit types and pass on the NALU, trackId, presentation and decode timestamps
       * for the NALUs to the next stream component.
       * Also, preprocess caption and sequence parameter NALUs.
       *
       * @param {Uint8Array} data - A NAL unit identified by `NalByteStream.push`
       * @see NalByteStream.push
       */nalByteStream.on('data',function(data){var event={trackId:trackId,pts:currentPts,dts:currentDts,data:data};switch(data[0]&0x1f){case 0x05:event.nalUnitType='slice_layer_without_partitioning_rbsp_idr';break;case 0x06:event.nalUnitType='sei_rbsp';event.escapedRBSP=discardEmulationPreventionBytes(data.subarray(1));break;case 0x07:event.nalUnitType='seq_parameter_set_rbsp';event.escapedRBSP=discardEmulationPreventionBytes(data.subarray(1));event.config=readSequenceParameterSet(event.escapedRBSP);break;case 0x08:event.nalUnitType='pic_parameter_set_rbsp';break;case 0x09:event.nalUnitType='access_unit_delimiter_rbsp';break;default:break;}// This triggers data on the H264Stream
self.trigger('data',event);});nalByteStream.on('done',function(){self.trigger('done');});this.flush=function(){nalByteStream.flush();};/**
       * Advance the ExpGolomb decoder past a scaling list. The scaling
       * list is optionally transmitted as part of a sequence parameter
       * set and is not relevant to transmuxing.
       * @param count {number} the number of entries in this scaling list
       * @param expGolombDecoder {object} an ExpGolomb pointed to the
       * start of a scaling list
       * @see Recommendation ITU-T H.264, Section 7.3.2.1.1.1
       */skipScalingList=function skipScalingList(count,expGolombDecoder){var lastScale=8,nextScale=8,j,deltaScale;for(j=0;j<count;j++){if(nextScale!==0){deltaScale=expGolombDecoder.readExpGolomb();nextScale=(lastScale+deltaScale+256)%256;}lastScale=nextScale===0?lastScale:nextScale;}};/**
       * Expunge any "Emulation Prevention" bytes from a "Raw Byte
       * Sequence Payload"
       * @param data {Uint8Array} the bytes of a RBSP from a NAL
       * unit
       * @return {Uint8Array} the RBSP without any Emulation
       * Prevention Bytes
       */discardEmulationPreventionBytes=function discardEmulationPreventionBytes(data){var length=data.byteLength,emulationPreventionBytesPositions=[],i=1,newLength,newData;// Find all `Emulation Prevention Bytes`
while(i<length-2){if(data[i]===0&&data[i+1]===0&&data[i+2]===0x03){emulationPreventionBytesPositions.push(i+2);i+=2;}else{i++;}}// If no Emulation Prevention Bytes were found just return the original
// array
if(emulationPreventionBytesPositions.length===0){return data;}// Create a new array to hold the NAL unit data
newLength=length-emulationPreventionBytesPositions.length;newData=new Uint8Array(newLength);var sourceIndex=0;for(i=0;i<newLength;sourceIndex++,i++){if(sourceIndex===emulationPreventionBytesPositions[0]){// Skip this byte
sourceIndex++;// Remove this position index
emulationPreventionBytesPositions.shift();}newData[i]=data[sourceIndex];}return newData;};/**
       * Read a sequence parameter set and return some interesting video
       * properties. A sequence parameter set is the H264 metadata that
       * describes the properties of upcoming video frames.
       * @param data {Uint8Array} the bytes of a sequence parameter set
       * @return {object} an object with configuration parsed from the
       * sequence parameter set, including the dimensions of the
       * associated video frames.
       */readSequenceParameterSet=function readSequenceParameterSet(data){var frameCropLeftOffset=0,frameCropRightOffset=0,frameCropTopOffset=0,frameCropBottomOffset=0,sarScale=1,expGolombDecoder,profileIdc,levelIdc,profileCompatibility,chromaFormatIdc,picOrderCntType,numRefFramesInPicOrderCntCycle,picWidthInMbsMinus1,picHeightInMapUnitsMinus1,frameMbsOnlyFlag,scalingListCount,sarRatio,aspectRatioIdc,i;expGolombDecoder=new expGolomb(data);profileIdc=expGolombDecoder.readUnsignedByte();// profile_idc
profileCompatibility=expGolombDecoder.readUnsignedByte();// constraint_set[0-5]_flag
levelIdc=expGolombDecoder.readUnsignedByte();// level_idc u(8)
expGolombDecoder.skipUnsignedExpGolomb();// seq_parameter_set_id
// some profiles have more optional data we don't need
if(PROFILES_WITH_OPTIONAL_SPS_DATA[profileIdc]){chromaFormatIdc=expGolombDecoder.readUnsignedExpGolomb();if(chromaFormatIdc===3){expGolombDecoder.skipBits(1);// separate_colour_plane_flag
}expGolombDecoder.skipUnsignedExpGolomb();// bit_depth_luma_minus8
expGolombDecoder.skipUnsignedExpGolomb();// bit_depth_chroma_minus8
expGolombDecoder.skipBits(1);// qpprime_y_zero_transform_bypass_flag
if(expGolombDecoder.readBoolean()){// seq_scaling_matrix_present_flag
scalingListCount=chromaFormatIdc!==3?8:12;for(i=0;i<scalingListCount;i++){if(expGolombDecoder.readBoolean()){// seq_scaling_list_present_flag[ i ]
if(i<6){skipScalingList(16,expGolombDecoder);}else{skipScalingList(64,expGolombDecoder);}}}}}expGolombDecoder.skipUnsignedExpGolomb();// log2_max_frame_num_minus4
picOrderCntType=expGolombDecoder.readUnsignedExpGolomb();if(picOrderCntType===0){expGolombDecoder.readUnsignedExpGolomb();// log2_max_pic_order_cnt_lsb_minus4
}else if(picOrderCntType===1){expGolombDecoder.skipBits(1);// delta_pic_order_always_zero_flag
expGolombDecoder.skipExpGolomb();// offset_for_non_ref_pic
expGolombDecoder.skipExpGolomb();// offset_for_top_to_bottom_field
numRefFramesInPicOrderCntCycle=expGolombDecoder.readUnsignedExpGolomb();for(i=0;i<numRefFramesInPicOrderCntCycle;i++){expGolombDecoder.skipExpGolomb();// offset_for_ref_frame[ i ]
}}expGolombDecoder.skipUnsignedExpGolomb();// max_num_ref_frames
expGolombDecoder.skipBits(1);// gaps_in_frame_num_value_allowed_flag
picWidthInMbsMinus1=expGolombDecoder.readUnsignedExpGolomb();picHeightInMapUnitsMinus1=expGolombDecoder.readUnsignedExpGolomb();frameMbsOnlyFlag=expGolombDecoder.readBits(1);if(frameMbsOnlyFlag===0){expGolombDecoder.skipBits(1);// mb_adaptive_frame_field_flag
}expGolombDecoder.skipBits(1);// direct_8x8_inference_flag
if(expGolombDecoder.readBoolean()){// frame_cropping_flag
frameCropLeftOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropRightOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropTopOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropBottomOffset=expGolombDecoder.readUnsignedExpGolomb();}if(expGolombDecoder.readBoolean()){// vui_parameters_present_flag
if(expGolombDecoder.readBoolean()){// aspect_ratio_info_present_flag
aspectRatioIdc=expGolombDecoder.readUnsignedByte();switch(aspectRatioIdc){case 1:sarRatio=[1,1];break;case 2:sarRatio=[12,11];break;case 3:sarRatio=[10,11];break;case 4:sarRatio=[16,11];break;case 5:sarRatio=[40,33];break;case 6:sarRatio=[24,11];break;case 7:sarRatio=[20,11];break;case 8:sarRatio=[32,11];break;case 9:sarRatio=[80,33];break;case 10:sarRatio=[18,11];break;case 11:sarRatio=[15,11];break;case 12:sarRatio=[64,33];break;case 13:sarRatio=[160,99];break;case 14:sarRatio=[4,3];break;case 15:sarRatio=[3,2];break;case 16:sarRatio=[2,1];break;case 255:{sarRatio=[expGolombDecoder.readUnsignedByte()<<8|expGolombDecoder.readUnsignedByte(),expGolombDecoder.readUnsignedByte()<<8|expGolombDecoder.readUnsignedByte()];break;}}if(sarRatio){sarScale=sarRatio[0]/sarRatio[1];}}}return{profileIdc:profileIdc,levelIdc:levelIdc,profileCompatibility:profileCompatibility,width:Math.ceil(((picWidthInMbsMinus1+1)*16-frameCropLeftOffset*2-frameCropRightOffset*2)*sarScale),height:(2-frameMbsOnlyFlag)*(picHeightInMapUnitsMinus1+1)*16-frameCropTopOffset*2-frameCropBottomOffset*2};};};_H264Stream.prototype=new stream();var h264={H264Stream:_H264Stream,NalByteStream:_NalByteStream};/**
     * mux.js
     *
     * Copyright (c) 2016 Brightcove
     * All rights reserved.
     *
     * Utilities to detect basic properties and metadata about Aac data.
     */var ADTS_SAMPLING_FREQUENCIES$1=[96000,88200,64000,48000,44100,32000,24000,22050,16000,12000,11025,8000,7350];var isLikelyAacData=function isLikelyAacData(data){if(data[0]==='I'.charCodeAt(0)&&data[1]==='D'.charCodeAt(0)&&data[2]==='3'.charCodeAt(0)){return true;}return false;};var parseSyncSafeInteger$1=function parseSyncSafeInteger(data){return data[0]<<21|data[1]<<14|data[2]<<7|data[3];};// return a percent-encoded representation of the specified byte range
// @see http://en.wikipedia.org/wiki/Percent-encoding
var percentEncode$1=function percentEncode(bytes,start,end){var i,result='';for(i=start;i<end;i++){result+='%'+('00'+bytes[i].toString(16)).slice(-2);}return result;};// return the string representation of the specified byte range,
// interpreted as ISO-8859-1.
var parseIso88591$1=function parseIso88591(bytes,start,end){return unescape(percentEncode$1(bytes,start,end));// jshint ignore:line
};var parseId3TagSize=function parseId3TagSize(header,byteIndex){var returnSize=header[byteIndex+6]<<21|header[byteIndex+7]<<14|header[byteIndex+8]<<7|header[byteIndex+9],flags=header[byteIndex+5],footerPresent=(flags&16)>>4;if(footerPresent){return returnSize+20;}return returnSize+10;};var parseAdtsSize=function parseAdtsSize(header,byteIndex){var lowThree=(header[byteIndex+5]&0xE0)>>5,middle=header[byteIndex+4]<<3,highTwo=header[byteIndex+3]&0x3<<11;return highTwo|middle|lowThree;};var parseType$1=function parseType(header,byteIndex){if(header[byteIndex]==='I'.charCodeAt(0)&&header[byteIndex+1]==='D'.charCodeAt(0)&&header[byteIndex+2]==='3'.charCodeAt(0)){return'timed-metadata';}else if(header[byteIndex]&0xff===0xff&&(header[byteIndex+1]&0xf0)===0xf0){return'audio';}return null;};var parseSampleRate=function parseSampleRate(packet){var i=0;while(i+5<packet.length){if(packet[i]!==0xFF||(packet[i+1]&0xF6)!==0xF0){// If a valid header was not found,  jump one forward and attempt to
// find a valid ADTS header starting at the next byte
i++;continue;}return ADTS_SAMPLING_FREQUENCIES$1[(packet[i+2]&0x3c)>>>2];}return null;};var parseAacTimestamp=function parseAacTimestamp(packet){var frameStart,frameSize,frame,frameHeader;// find the start of the first frame and the end of the tag
frameStart=10;if(packet[5]&0x40){// advance the frame start past the extended header
frameStart+=4;// header size field
frameStart+=parseSyncSafeInteger$1(packet.subarray(10,14));}// parse one or more ID3 frames
// http://id3.org/id3v2.3.0#ID3v2_frame_overview
do{// determine the number of bytes in this frame
frameSize=parseSyncSafeInteger$1(packet.subarray(frameStart+4,frameStart+8));if(frameSize<1){return null;}frameHeader=String.fromCharCode(packet[frameStart],packet[frameStart+1],packet[frameStart+2],packet[frameStart+3]);if(frameHeader==='PRIV'){frame=packet.subarray(frameStart+10,frameStart+frameSize+10);for(var i=0;i<frame.byteLength;i++){if(frame[i]===0){var owner=parseIso88591$1(frame,0,i);if(owner==='com.apple.streaming.transportStreamTimestamp'){var d=frame.subarray(i+1);var size=(d[3]&0x01)<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;size*=4;size+=d[7]&0x03;return size;}break;}}}frameStart+=10;// advance past the frame header
frameStart+=frameSize;// advance past the frame body
}while(frameStart<packet.byteLength);return null;};var utils={isLikelyAacData:isLikelyAacData,parseId3TagSize:parseId3TagSize,parseAdtsSize:parseAdtsSize,parseType:parseType$1,parseSampleRate:parseSampleRate,parseAacTimestamp:parseAacTimestamp};// Constants
var _AacStream;/**
     * Splits an incoming stream of binary data into ADTS and ID3 Frames.
     */_AacStream=function AacStream(){var everything=new Uint8Array(),timeStamp=0;_AacStream.prototype.init.call(this);this.setTimestamp=function(timestamp){timeStamp=timestamp;};this.push=function(bytes){var frameSize=0,byteIndex=0,bytesLeft,chunk,packet,tempLength;// If there are bytes remaining from the last segment, prepend them to the
// bytes that were pushed in
if(everything.length){tempLength=everything.length;everything=new Uint8Array(bytes.byteLength+tempLength);everything.set(everything.subarray(0,tempLength));everything.set(bytes,tempLength);}else{everything=bytes;}while(everything.length-byteIndex>=3){if(everything[byteIndex]==='I'.charCodeAt(0)&&everything[byteIndex+1]==='D'.charCodeAt(0)&&everything[byteIndex+2]==='3'.charCodeAt(0)){// Exit early because we don't have enough to parse
// the ID3 tag header
if(everything.length-byteIndex<10){break;}// check framesize
frameSize=utils.parseId3TagSize(everything,byteIndex);// Exit early if we don't have enough in the buffer
// to emit a full packet
// Add to byteIndex to support multiple ID3 tags in sequence
if(byteIndex+frameSize>everything.length){break;}chunk={type:'timed-metadata',data:everything.subarray(byteIndex,byteIndex+frameSize)};this.trigger('data',chunk);byteIndex+=frameSize;continue;}else if((everything[byteIndex]&0xff)===0xff&&(everything[byteIndex+1]&0xf0)===0xf0){// Exit early because we don't have enough to parse
// the ADTS frame header
if(everything.length-byteIndex<7){break;}frameSize=utils.parseAdtsSize(everything,byteIndex);// Exit early if we don't have enough in the buffer
// to emit a full packet
if(byteIndex+frameSize>everything.length){break;}packet={type:'audio',data:everything.subarray(byteIndex,byteIndex+frameSize),pts:timeStamp,dts:timeStamp};this.trigger('data',packet);byteIndex+=frameSize;continue;}byteIndex++;}bytesLeft=everything.length-byteIndex;if(bytesLeft>0){everything=everything.subarray(byteIndex);}else{everything=new Uint8Array();}};};_AacStream.prototype=new stream();var aac=_AacStream;var H264Stream=h264.H264Stream;var isLikelyAacData$1=utils.isLikelyAacData;// constants
var AUDIO_PROPERTIES=['audioobjecttype','channelcount','samplerate','samplingfrequencyindex','samplesize'];var VIDEO_PROPERTIES=['width','height','profileIdc','levelIdc','profileCompatibility'];// object types
var _VideoSegmentStream,_AudioSegmentStream,_Transmuxer,_CoalesceStream;/**
     * Compare two arrays (even typed) for same-ness
     */var arrayEquals=function arrayEquals(a,b){var i;if(a.length!==b.length){return false;}// compare the value of each element in the array
for(i=0;i<a.length;i++){if(a[i]!==b[i]){return false;}}return true;};var generateVideoSegmentTimingInfo=function generateVideoSegmentTimingInfo(baseMediaDecodeTime,startDts,startPts,endDts,endPts,prependedContentDuration){var ptsOffsetFromDts=startPts-startDts,decodeDuration=endDts-startDts,presentationDuration=endPts-startPts;// The PTS and DTS values are based on the actual stream times from the segment,
// however, the player time values will reflect a start from the baseMediaDecodeTime.
// In order to provide relevant values for the player times, base timing info on the
// baseMediaDecodeTime and the DTS and PTS durations of the segment.
return{start:{dts:baseMediaDecodeTime,pts:baseMediaDecodeTime+ptsOffsetFromDts},end:{dts:baseMediaDecodeTime+decodeDuration,pts:baseMediaDecodeTime+presentationDuration},prependedContentDuration:prependedContentDuration,baseMediaDecodeTime:baseMediaDecodeTime};};/**
     * Constructs a single-track, ISO BMFF media segment from AAC data
     * events. The output of this stream can be fed to a SourceBuffer
     * configured with a suitable initialization segment.
     * @param track {object} track metadata configuration
     * @param options {object} transmuxer options object
     * @param options.keepOriginalTimestamps {boolean} If true, keep the timestamps
     *        in the source; false to adjust the first segment to start at 0.
     */_AudioSegmentStream=function AudioSegmentStream(track,options){var adtsFrames=[],sequenceNumber=0,earliestAllowedDts=0,audioAppendStartTs=0,videoBaseMediaDecodeTime=Infinity;options=options||{};_AudioSegmentStream.prototype.init.call(this);this.push=function(data){trackDecodeInfo.collectDtsInfo(track,data);if(track){AUDIO_PROPERTIES.forEach(function(prop){track[prop]=data[prop];});}// buffer audio data until end() is called
adtsFrames.push(data);};this.setEarliestDts=function(earliestDts){earliestAllowedDts=earliestDts-track.timelineStartInfo.baseMediaDecodeTime;};this.setVideoBaseMediaDecodeTime=function(baseMediaDecodeTime){videoBaseMediaDecodeTime=baseMediaDecodeTime;};this.setAudioAppendStart=function(timestamp){audioAppendStartTs=timestamp;};this.flush=function(){var frames,moof,mdat,boxes;// return early if no audio data has been observed
if(adtsFrames.length===0){this.trigger('done','AudioSegmentStream');return;}frames=audioFrameUtils.trimAdtsFramesByEarliestDts(adtsFrames,track,earliestAllowedDts);track.baseMediaDecodeTime=trackDecodeInfo.calculateTrackBaseMediaDecodeTime(track,options.keepOriginalTimestamps);audioFrameUtils.prefixWithSilence(track,frames,audioAppendStartTs,videoBaseMediaDecodeTime);// we have to build the index from byte locations to
// samples (that is, adts frames) in the audio data
track.samples=audioFrameUtils.generateSampleTable(frames);// concatenate the audio data to constuct the mdat
mdat=mp4Generator.mdat(audioFrameUtils.concatenateFrameData(frames));adtsFrames=[];moof=mp4Generator.moof(sequenceNumber,[track]);boxes=new Uint8Array(moof.byteLength+mdat.byteLength);// bump the sequence number for next time
sequenceNumber++;boxes.set(moof);boxes.set(mdat,moof.byteLength);trackDecodeInfo.clearDtsInfo(track);this.trigger('data',{track:track,boxes:boxes});this.trigger('done','AudioSegmentStream');};};_AudioSegmentStream.prototype=new stream();/**
     * Constructs a single-track, ISO BMFF media segment from H264 data
     * events. The output of this stream can be fed to a SourceBuffer
     * configured with a suitable initialization segment.
     * @param track {object} track metadata configuration
     * @param options {object} transmuxer options object
     * @param options.alignGopsAtEnd {boolean} If true, start from the end of the
     *        gopsToAlignWith list when attempting to align gop pts
     * @param options.keepOriginalTimestamps {boolean} If true, keep the timestamps
     *        in the source; false to adjust the first segment to start at 0.
     */_VideoSegmentStream=function VideoSegmentStream(track,options){var sequenceNumber=0,nalUnits=[],gopsToAlignWith=[],config,pps;options=options||{};_VideoSegmentStream.prototype.init.call(this);delete track.minPTS;this.gopCache_=[];/**
        * Constructs a ISO BMFF segment given H264 nalUnits
        * @param {Object} nalUnit A data event representing a nalUnit
        * @param {String} nalUnit.nalUnitType
        * @param {Object} nalUnit.config Properties for a mp4 track
        * @param {Uint8Array} nalUnit.data The nalUnit bytes
        * @see lib/codecs/h264.js
       **/this.push=function(nalUnit){trackDecodeInfo.collectDtsInfo(track,nalUnit);// record the track config
if(nalUnit.nalUnitType==='seq_parameter_set_rbsp'&&!config){config=nalUnit.config;track.sps=[nalUnit.data];VIDEO_PROPERTIES.forEach(function(prop){track[prop]=config[prop];},this);}if(nalUnit.nalUnitType==='pic_parameter_set_rbsp'&&!pps){pps=nalUnit.data;track.pps=[nalUnit.data];}// buffer video until flush() is called
nalUnits.push(nalUnit);};/**
        * Pass constructed ISO BMFF track and boxes on to the
        * next stream in the pipeline
       **/this.flush=function(){var frames,gopForFusion,gops,moof,mdat,boxes,prependedContentDuration=0,firstGop,lastGop;// Throw away nalUnits at the start of the byte stream until
// we find the first AUD
while(nalUnits.length){if(nalUnits[0].nalUnitType==='access_unit_delimiter_rbsp'){break;}nalUnits.shift();}// Return early if no video data has been observed
if(nalUnits.length===0){this.resetStream_();this.trigger('done','VideoSegmentStream');return;}// Organize the raw nal-units into arrays that represent
// higher-level constructs such as frames and gops
// (group-of-pictures)
frames=frameUtils.groupNalsIntoFrames(nalUnits);gops=frameUtils.groupFramesIntoGops(frames);// If the first frame of this fragment is not a keyframe we have
// a problem since MSE (on Chrome) requires a leading keyframe.
//
// We have two approaches to repairing this situation:
// 1) GOP-FUSION:
//    This is where we keep track of the GOPS (group-of-pictures)
//    from previous fragments and attempt to find one that we can
//    prepend to the current fragment in order to create a valid
//    fragment.
// 2) KEYFRAME-PULLING:
//    Here we search for the first keyframe in the fragment and
//    throw away all the frames between the start of the fragment
//    and that keyframe. We then extend the duration and pull the
//    PTS of the keyframe forward so that it covers the time range
//    of the frames that were disposed of.
//
// #1 is far prefereable over #2 which can cause "stuttering" but
// requires more things to be just right.
if(!gops[0][0].keyFrame){// Search for a gop for fusion from our gopCache
gopForFusion=this.getGopForFusion_(nalUnits[0],track);if(gopForFusion){// in order to provide more accurate timing information about the segment, save
// the number of seconds prepended to the original segment due to GOP fusion
prependedContentDuration=gopForFusion.duration;gops.unshift(gopForFusion);// Adjust Gops' metadata to account for the inclusion of the
// new gop at the beginning
gops.byteLength+=gopForFusion.byteLength;gops.nalCount+=gopForFusion.nalCount;gops.pts=gopForFusion.pts;gops.dts=gopForFusion.dts;gops.duration+=gopForFusion.duration;}else{// If we didn't find a candidate gop fall back to keyframe-pulling
gops=frameUtils.extendFirstKeyFrame(gops);}}// Trim gops to align with gopsToAlignWith
if(gopsToAlignWith.length){var alignedGops;if(options.alignGopsAtEnd){alignedGops=this.alignGopsAtEnd_(gops);}else{alignedGops=this.alignGopsAtStart_(gops);}if(!alignedGops){// save all the nals in the last GOP into the gop cache
this.gopCache_.unshift({gop:gops.pop(),pps:track.pps,sps:track.sps});// Keep a maximum of 6 GOPs in the cache
this.gopCache_.length=Math.min(6,this.gopCache_.length);// Clear nalUnits
nalUnits=[];// return early no gops can be aligned with desired gopsToAlignWith
this.resetStream_();this.trigger('done','VideoSegmentStream');return;}// Some gops were trimmed. clear dts info so minSegmentDts and pts are correct
// when recalculated before sending off to CoalesceStream
trackDecodeInfo.clearDtsInfo(track);gops=alignedGops;}trackDecodeInfo.collectDtsInfo(track,gops);// First, we have to build the index from byte locations to
// samples (that is, frames) in the video data
track.samples=frameUtils.generateSampleTable(gops);// Concatenate the video data and construct the mdat
mdat=mp4Generator.mdat(frameUtils.concatenateNalData(gops));track.baseMediaDecodeTime=trackDecodeInfo.calculateTrackBaseMediaDecodeTime(track,options.keepOriginalTimestamps);this.trigger('processedGopsInfo',gops.map(function(gop){return{pts:gop.pts,dts:gop.dts,byteLength:gop.byteLength};}));firstGop=gops[0];lastGop=gops[gops.length-1];this.trigger('segmentTimingInfo',generateVideoSegmentTimingInfo(track.baseMediaDecodeTime,firstGop.dts,firstGop.pts,lastGop.dts+lastGop.duration,lastGop.pts+lastGop.duration,prependedContentDuration));// save all the nals in the last GOP into the gop cache
this.gopCache_.unshift({gop:gops.pop(),pps:track.pps,sps:track.sps});// Keep a maximum of 6 GOPs in the cache
this.gopCache_.length=Math.min(6,this.gopCache_.length);// Clear nalUnits
nalUnits=[];this.trigger('baseMediaDecodeTime',track.baseMediaDecodeTime);this.trigger('timelineStartInfo',track.timelineStartInfo);moof=mp4Generator.moof(sequenceNumber,[track]);// it would be great to allocate this array up front instead of
// throwing away hundreds of media segment fragments
boxes=new Uint8Array(moof.byteLength+mdat.byteLength);// Bump the sequence number for next time
sequenceNumber++;boxes.set(moof);boxes.set(mdat,moof.byteLength);this.trigger('data',{track:track,boxes:boxes});this.resetStream_();// Continue with the flush process now
this.trigger('done','VideoSegmentStream');};this.resetStream_=function(){trackDecodeInfo.clearDtsInfo(track);// reset config and pps because they may differ across segments
// for instance, when we are rendition switching
config=undefined;pps=undefined;};// Search for a candidate Gop for gop-fusion from the gop cache and
// return it or return null if no good candidate was found
this.getGopForFusion_=function(nalUnit){var halfSecond=45000,// Half-a-second in a 90khz clock
allowableOverlap=10000,// About 3 frames @ 30fps
nearestDistance=Infinity,dtsDistance,nearestGopObj,currentGop,currentGopObj,i;// Search for the GOP nearest to the beginning of this nal unit
for(i=0;i<this.gopCache_.length;i++){currentGopObj=this.gopCache_[i];currentGop=currentGopObj.gop;// Reject Gops with different SPS or PPS
if(!(track.pps&&arrayEquals(track.pps[0],currentGopObj.pps[0]))||!(track.sps&&arrayEquals(track.sps[0],currentGopObj.sps[0]))){continue;}// Reject Gops that would require a negative baseMediaDecodeTime
if(currentGop.dts<track.timelineStartInfo.dts){continue;}// The distance between the end of the gop and the start of the nalUnit
dtsDistance=nalUnit.dts-currentGop.dts-currentGop.duration;// Only consider GOPS that start before the nal unit and end within
// a half-second of the nal unit
if(dtsDistance>=-allowableOverlap&&dtsDistance<=halfSecond){// Always use the closest GOP we found if there is more than
// one candidate
if(!nearestGopObj||nearestDistance>dtsDistance){nearestGopObj=currentGopObj;nearestDistance=dtsDistance;}}}if(nearestGopObj){return nearestGopObj.gop;}return null;};// trim gop list to the first gop found that has a matching pts with a gop in the list
// of gopsToAlignWith starting from the START of the list
this.alignGopsAtStart_=function(gops){var alignIndex,gopIndex,align,gop,byteLength,nalCount,duration,alignedGops;byteLength=gops.byteLength;nalCount=gops.nalCount;duration=gops.duration;alignIndex=gopIndex=0;while(alignIndex<gopsToAlignWith.length&&gopIndex<gops.length){align=gopsToAlignWith[alignIndex];gop=gops[gopIndex];if(align.pts===gop.pts){break;}if(gop.pts>align.pts){// this current gop starts after the current gop we want to align on, so increment
// align index
alignIndex++;continue;}// current gop starts before the current gop we want to align on. so increment gop
// index
gopIndex++;byteLength-=gop.byteLength;nalCount-=gop.nalCount;duration-=gop.duration;}if(gopIndex===0){// no gops to trim
return gops;}if(gopIndex===gops.length){// all gops trimmed, skip appending all gops
return null;}alignedGops=gops.slice(gopIndex);alignedGops.byteLength=byteLength;alignedGops.duration=duration;alignedGops.nalCount=nalCount;alignedGops.pts=alignedGops[0].pts;alignedGops.dts=alignedGops[0].dts;return alignedGops;};// trim gop list to the first gop found that has a matching pts with a gop in the list
// of gopsToAlignWith starting from the END of the list
this.alignGopsAtEnd_=function(gops){var alignIndex,gopIndex,align,gop,alignEndIndex,matchFound;alignIndex=gopsToAlignWith.length-1;gopIndex=gops.length-1;alignEndIndex=null;matchFound=false;while(alignIndex>=0&&gopIndex>=0){align=gopsToAlignWith[alignIndex];gop=gops[gopIndex];if(align.pts===gop.pts){matchFound=true;break;}if(align.pts>gop.pts){alignIndex--;continue;}if(alignIndex===gopsToAlignWith.length-1){// gop.pts is greater than the last alignment candidate. If no match is found
// by the end of this loop, we still want to append gops that come after this
// point
alignEndIndex=gopIndex;}gopIndex--;}if(!matchFound&&alignEndIndex===null){return null;}var trimIndex;if(matchFound){trimIndex=gopIndex;}else{trimIndex=alignEndIndex;}if(trimIndex===0){return gops;}var alignedGops=gops.slice(trimIndex);var metadata=alignedGops.reduce(function(total,gop){total.byteLength+=gop.byteLength;total.duration+=gop.duration;total.nalCount+=gop.nalCount;return total;},{byteLength:0,duration:0,nalCount:0});alignedGops.byteLength=metadata.byteLength;alignedGops.duration=metadata.duration;alignedGops.nalCount=metadata.nalCount;alignedGops.pts=alignedGops[0].pts;alignedGops.dts=alignedGops[0].dts;return alignedGops;};this.alignGopsWith=function(newGopsToAlignWith){gopsToAlignWith=newGopsToAlignWith;};};_VideoSegmentStream.prototype=new stream();/**
     * A Stream that can combine multiple streams (ie. audio & video)
     * into a single output segment for MSE. Also supports audio-only
     * and video-only streams.
     * @param options {object} transmuxer options object
     * @param options.keepOriginalTimestamps {boolean} If true, keep the timestamps
     *        in the source; false to adjust the first segment to start at media timeline start.
     */_CoalesceStream=function CoalesceStream(options,metadataStream){// Number of Tracks per output segment
// If greater than 1, we combine multiple
// tracks into a single segment
this.numberOfTracks=0;this.metadataStream=metadataStream;options=options||{};if(typeof options.remux!=='undefined'){this.remuxTracks=!!options.remux;}else{this.remuxTracks=true;}if(typeof options.keepOriginalTimestamps==='boolean'){this.keepOriginalTimestamps=options.keepOriginalTimestamps;}this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.pendingBytes=0;this.emittedTracks=0;_CoalesceStream.prototype.init.call(this);// Take output from multiple
this.push=function(output){// buffer incoming captions until the associated video segment
// finishes
if(output.text){return this.pendingCaptions.push(output);}// buffer incoming id3 tags until the final flush
if(output.frames){return this.pendingMetadata.push(output);}// Add this track to the list of pending tracks and store
// important information required for the construction of
// the final segment
this.pendingTracks.push(output.track);this.pendingBoxes.push(output.boxes);this.pendingBytes+=output.boxes.byteLength;if(output.track.type==='video'){this.videoTrack=output.track;}if(output.track.type==='audio'){this.audioTrack=output.track;}};};_CoalesceStream.prototype=new stream();_CoalesceStream.prototype.flush=function(flushSource){var offset=0,event={captions:[],captionStreams:{},metadata:[],info:{}},caption,id3,initSegment,timelineStartPts=0,i;if(this.pendingTracks.length<this.numberOfTracks){if(flushSource!=='VideoSegmentStream'&&flushSource!=='AudioSegmentStream'){// Return because we haven't received a flush from a data-generating
// portion of the segment (meaning that we have only recieved meta-data
// or captions.)
return;}else if(this.remuxTracks){// Return until we have enough tracks from the pipeline to remux (if we
// are remuxing audio and video into a single MP4)
return;}else if(this.pendingTracks.length===0){// In the case where we receive a flush without any data having been
// received we consider it an emitted track for the purposes of coalescing
// `done` events.
// We do this for the case where there is an audio and video track in the
// segment but no audio data. (seen in several playlists with alternate
// audio tracks and no audio present in the main TS segments.)
this.emittedTracks++;if(this.emittedTracks>=this.numberOfTracks){this.trigger('done');this.emittedTracks=0;}return;}}if(this.videoTrack){timelineStartPts=this.videoTrack.timelineStartInfo.pts;VIDEO_PROPERTIES.forEach(function(prop){event.info[prop]=this.videoTrack[prop];},this);}else if(this.audioTrack){timelineStartPts=this.audioTrack.timelineStartInfo.pts;AUDIO_PROPERTIES.forEach(function(prop){event.info[prop]=this.audioTrack[prop];},this);}if(this.pendingTracks.length===1){event.type=this.pendingTracks[0].type;}else{event.type='combined';}this.emittedTracks+=this.pendingTracks.length;initSegment=mp4Generator.initSegment(this.pendingTracks);// Create a new typed array to hold the init segment
event.initSegment=new Uint8Array(initSegment.byteLength);// Create an init segment containing a moov
// and track definitions
event.initSegment.set(initSegment);// Create a new typed array to hold the moof+mdats
event.data=new Uint8Array(this.pendingBytes);// Append each moof+mdat (one per track) together
for(i=0;i<this.pendingBoxes.length;i++){event.data.set(this.pendingBoxes[i],offset);offset+=this.pendingBoxes[i].byteLength;}// Translate caption PTS times into second offsets to match the
// video timeline for the segment, and add track info
for(i=0;i<this.pendingCaptions.length;i++){caption=this.pendingCaptions[i];caption.startTime=caption.startPts;if(!this.keepOriginalTimestamps){caption.startTime-=timelineStartPts;}caption.startTime/=90e3;caption.endTime=caption.endPts;if(!this.keepOriginalTimestamps){caption.endTime-=timelineStartPts;}caption.endTime/=90e3;event.captionStreams[caption.stream]=true;event.captions.push(caption);}// Translate ID3 frame PTS times into second offsets to match the
// video timeline for the segment
for(i=0;i<this.pendingMetadata.length;i++){id3=this.pendingMetadata[i];id3.cueTime=id3.pts;if(!this.keepOriginalTimestamps){id3.cueTime-=timelineStartPts;}id3.cueTime/=90e3;event.metadata.push(id3);}// We add this to every single emitted segment even though we only need
// it for the first
event.metadata.dispatchType=this.metadataStream.dispatchType;// Reset stream state
this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingCaptions.length=0;this.pendingBytes=0;this.pendingMetadata.length=0;// Emit the built segment
this.trigger('data',event);// Only emit `done` if all tracks have been flushed and emitted
if(this.emittedTracks>=this.numberOfTracks){this.trigger('done');this.emittedTracks=0;}};/**
     * A Stream that expects MP2T binary data as input and produces
     * corresponding media segments, suitable for use with Media Source
     * Extension (MSE) implementations that support the ISO BMFF byte
     * stream format, like Chrome.
     */_Transmuxer=function Transmuxer(options){var self=this,hasFlushed=true,videoTrack,audioTrack;_Transmuxer.prototype.init.call(this);options=options||{};this.baseMediaDecodeTime=options.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var pipeline={};this.transmuxPipeline_=pipeline;pipeline.type='aac';pipeline.metadataStream=new m2ts_1.MetadataStream();// set up the parsing pipeline
pipeline.aacStream=new aac();pipeline.audioTimestampRolloverStream=new m2ts_1.TimestampRolloverStream('audio');pipeline.timedMetadataTimestampRolloverStream=new m2ts_1.TimestampRolloverStream('timed-metadata');pipeline.adtsStream=new adts();pipeline.coalesceStream=new _CoalesceStream(options,pipeline.metadataStream);pipeline.headOfPipeline=pipeline.aacStream;pipeline.aacStream.pipe(pipeline.audioTimestampRolloverStream).pipe(pipeline.adtsStream);pipeline.aacStream.pipe(pipeline.timedMetadataTimestampRolloverStream).pipe(pipeline.metadataStream).pipe(pipeline.coalesceStream);pipeline.metadataStream.on('timestamp',function(frame){pipeline.aacStream.setTimestamp(frame.timeStamp);});pipeline.aacStream.on('data',function(data){if(data.type==='timed-metadata'&&!pipeline.audioSegmentStream){audioTrack=audioTrack||{timelineStartInfo:{baseMediaDecodeTime:self.baseMediaDecodeTime},codec:'adts',type:'audio'};// hook up the audio segment stream to the first track with aac data
pipeline.coalesceStream.numberOfTracks++;pipeline.audioSegmentStream=new _AudioSegmentStream(audioTrack,options);// Set up the final part of the audio pipeline
pipeline.adtsStream.pipe(pipeline.audioSegmentStream).pipe(pipeline.coalesceStream);}});// Re-emit any data coming from the coalesce stream to the outside world
pipeline.coalesceStream.on('data',this.trigger.bind(this,'data'));// Let the consumer know we have finished flushing the entire pipeline
pipeline.coalesceStream.on('done',this.trigger.bind(this,'done'));};this.setupTsPipeline=function(){var pipeline={};this.transmuxPipeline_=pipeline;pipeline.type='ts';pipeline.metadataStream=new m2ts_1.MetadataStream();// set up the parsing pipeline
pipeline.packetStream=new m2ts_1.TransportPacketStream();pipeline.parseStream=new m2ts_1.TransportParseStream();pipeline.elementaryStream=new m2ts_1.ElementaryStream();pipeline.videoTimestampRolloverStream=new m2ts_1.TimestampRolloverStream('video');pipeline.audioTimestampRolloverStream=new m2ts_1.TimestampRolloverStream('audio');pipeline.timedMetadataTimestampRolloverStream=new m2ts_1.TimestampRolloverStream('timed-metadata');pipeline.adtsStream=new adts();pipeline.h264Stream=new H264Stream();pipeline.captionStream=new m2ts_1.CaptionStream();pipeline.coalesceStream=new _CoalesceStream(options,pipeline.metadataStream);pipeline.headOfPipeline=pipeline.packetStream;// disassemble MPEG2-TS packets into elementary streams
pipeline.packetStream.pipe(pipeline.parseStream).pipe(pipeline.elementaryStream);// !!THIS ORDER IS IMPORTANT!!
// demux the streams
pipeline.elementaryStream.pipe(pipeline.videoTimestampRolloverStream).pipe(pipeline.h264Stream);pipeline.elementaryStream.pipe(pipeline.audioTimestampRolloverStream).pipe(pipeline.adtsStream);pipeline.elementaryStream.pipe(pipeline.timedMetadataTimestampRolloverStream).pipe(pipeline.metadataStream).pipe(pipeline.coalesceStream);// Hook up CEA-608/708 caption stream
pipeline.h264Stream.pipe(pipeline.captionStream).pipe(pipeline.coalesceStream);pipeline.elementaryStream.on('data',function(data){var i;if(data.type==='metadata'){i=data.tracks.length;// scan the tracks listed in the metadata
while(i--){if(!videoTrack&&data.tracks[i].type==='video'){videoTrack=data.tracks[i];videoTrack.timelineStartInfo.baseMediaDecodeTime=self.baseMediaDecodeTime;}else if(!audioTrack&&data.tracks[i].type==='audio'){audioTrack=data.tracks[i];audioTrack.timelineStartInfo.baseMediaDecodeTime=self.baseMediaDecodeTime;}}// hook up the video segment stream to the first track with h264 data
if(videoTrack&&!pipeline.videoSegmentStream){pipeline.coalesceStream.numberOfTracks++;pipeline.videoSegmentStream=new _VideoSegmentStream(videoTrack,options);pipeline.videoSegmentStream.on('timelineStartInfo',function(timelineStartInfo){// When video emits timelineStartInfo data after a flush, we forward that
// info to the AudioSegmentStream, if it exists, because video timeline
// data takes precedence.
if(audioTrack){audioTrack.timelineStartInfo=timelineStartInfo;// On the first segment we trim AAC frames that exist before the
// very earliest DTS we have seen in video because Chrome will
// interpret any video track with a baseMediaDecodeTime that is
// non-zero as a gap.
pipeline.audioSegmentStream.setEarliestDts(timelineStartInfo.dts);}});pipeline.videoSegmentStream.on('processedGopsInfo',self.trigger.bind(self,'gopInfo'));pipeline.videoSegmentStream.on('segmentTimingInfo',self.trigger.bind(self,'videoSegmentTimingInfo'));pipeline.videoSegmentStream.on('baseMediaDecodeTime',function(baseMediaDecodeTime){if(audioTrack){pipeline.audioSegmentStream.setVideoBaseMediaDecodeTime(baseMediaDecodeTime);}});// Set up the final part of the video pipeline
pipeline.h264Stream.pipe(pipeline.videoSegmentStream).pipe(pipeline.coalesceStream);}if(audioTrack&&!pipeline.audioSegmentStream){// hook up the audio segment stream to the first track with aac data
pipeline.coalesceStream.numberOfTracks++;pipeline.audioSegmentStream=new _AudioSegmentStream(audioTrack,options);// Set up the final part of the audio pipeline
pipeline.adtsStream.pipe(pipeline.audioSegmentStream).pipe(pipeline.coalesceStream);}}});// Re-emit any data coming from the coalesce stream to the outside world
pipeline.coalesceStream.on('data',this.trigger.bind(this,'data'));// Let the consumer know we have finished flushing the entire pipeline
pipeline.coalesceStream.on('done',this.trigger.bind(this,'done'));};// hook up the segment streams once track metadata is delivered
this.setBaseMediaDecodeTime=function(baseMediaDecodeTime){var pipeline=this.transmuxPipeline_;if(!options.keepOriginalTimestamps){this.baseMediaDecodeTime=baseMediaDecodeTime;}if(audioTrack){audioTrack.timelineStartInfo.dts=undefined;audioTrack.timelineStartInfo.pts=undefined;trackDecodeInfo.clearDtsInfo(audioTrack);if(!options.keepOriginalTimestamps){audioTrack.timelineStartInfo.baseMediaDecodeTime=baseMediaDecodeTime;}if(pipeline.audioTimestampRolloverStream){pipeline.audioTimestampRolloverStream.discontinuity();}}if(videoTrack){if(pipeline.videoSegmentStream){pipeline.videoSegmentStream.gopCache_=[];pipeline.videoTimestampRolloverStream.discontinuity();}videoTrack.timelineStartInfo.dts=undefined;videoTrack.timelineStartInfo.pts=undefined;trackDecodeInfo.clearDtsInfo(videoTrack);pipeline.captionStream.reset();if(!options.keepOriginalTimestamps){videoTrack.timelineStartInfo.baseMediaDecodeTime=baseMediaDecodeTime;}}if(pipeline.timedMetadataTimestampRolloverStream){pipeline.timedMetadataTimestampRolloverStream.discontinuity();}};this.setAudioAppendStart=function(timestamp){if(audioTrack){this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(timestamp);}};this.alignGopsWith=function(gopsToAlignWith){if(videoTrack&&this.transmuxPipeline_.videoSegmentStream){this.transmuxPipeline_.videoSegmentStream.alignGopsWith(gopsToAlignWith);}};// feed incoming data to the front of the parsing pipeline
this.push=function(data){if(hasFlushed){var isAac=isLikelyAacData$1(data);if(isAac&&this.transmuxPipeline_.type!=='aac'){this.setupAacPipeline();}else if(!isAac&&this.transmuxPipeline_.type!=='ts'){this.setupTsPipeline();}hasFlushed=false;}this.transmuxPipeline_.headOfPipeline.push(data);};// flush any buffered data
this.flush=function(){hasFlushed=true;// Start at the top of the pipeline and flush all pending work
this.transmuxPipeline_.headOfPipeline.flush();};// Caption data has to be reset when seeking outside buffered range
this.resetCaptions=function(){if(this.transmuxPipeline_.captionStream){this.transmuxPipeline_.captionStream.reset();}};};_Transmuxer.prototype=new stream();var transmuxer={Transmuxer:_Transmuxer,VideoSegmentStream:_VideoSegmentStream,AudioSegmentStream:_AudioSegmentStream,AUDIO_PROPERTIES:AUDIO_PROPERTIES,VIDEO_PROPERTIES:VIDEO_PROPERTIES,// exported for testing
generateVideoSegmentTimingInfo:generateVideoSegmentTimingInfo};var inspectMp4,_textifyMp,parseType$2=probe.parseType,parseMp4Date=function parseMp4Date(seconds){return new Date(seconds*1000-2082844800000);},parseSampleFlags=function parseSampleFlags(flags){return{isLeading:(flags[0]&0x0c)>>>2,dependsOn:flags[0]&0x03,isDependedOn:(flags[1]&0xc0)>>>6,hasRedundancy:(flags[1]&0x30)>>>4,paddingValue:(flags[1]&0x0e)>>>1,isNonSyncSample:flags[1]&0x01,degradationPriority:flags[2]<<8|flags[3]};},nalParse=function nalParse(avcStream){var avcView=new DataView(avcStream.buffer,avcStream.byteOffset,avcStream.byteLength),result=[],i,length;for(i=0;i+4<avcStream.length;i+=length){length=avcView.getUint32(i);i+=4;// bail if this doesn't appear to be an H264 stream
if(length<=0){result.push('<span style=\'color:red;\'>MALFORMED DATA</span>');continue;}switch(avcStream[i]&0x1F){case 0x01:result.push('slice_layer_without_partitioning_rbsp');break;case 0x05:result.push('slice_layer_without_partitioning_rbsp_idr');break;case 0x06:result.push('sei_rbsp');break;case 0x07:result.push('seq_parameter_set_rbsp');break;case 0x08:result.push('pic_parameter_set_rbsp');break;case 0x09:result.push('access_unit_delimiter_rbsp');break;default:result.push('UNKNOWN NAL - '+avcStream[i]&0x1F);break;}}return result;},// registry of handlers for individual mp4 box types
parse$$1={// codingname, not a first-class box type. stsd entries share the
// same format as real boxes so the parsing infrastructure can be
// shared
avc1:function avc1(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{dataReferenceIndex:view.getUint16(6),width:view.getUint16(24),height:view.getUint16(26),horizresolution:view.getUint16(28)+view.getUint16(30)/16,vertresolution:view.getUint16(32)+view.getUint16(34)/16,frameCount:view.getUint16(40),depth:view.getUint16(74),config:inspectMp4(data.subarray(78,data.byteLength))};},avcC:function avcC(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={configurationVersion:data[0],avcProfileIndication:data[1],profileCompatibility:data[2],avcLevelIndication:data[3],lengthSizeMinusOne:data[4]&0x03,sps:[],pps:[]},numOfSequenceParameterSets=data[5]&0x1f,numOfPictureParameterSets,nalSize,offset,i;// iterate past any SPSs
offset=6;for(i=0;i<numOfSequenceParameterSets;i++){nalSize=view.getUint16(offset);offset+=2;result.sps.push(new Uint8Array(data.subarray(offset,offset+nalSize)));offset+=nalSize;}// iterate past any PPSs
numOfPictureParameterSets=data[offset];offset++;for(i=0;i<numOfPictureParameterSets;i++){nalSize=view.getUint16(offset);offset+=2;result.pps.push(new Uint8Array(data.subarray(offset,offset+nalSize)));offset+=nalSize;}return result;},btrt:function btrt(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{bufferSizeDB:view.getUint32(0),maxBitrate:view.getUint32(4),avgBitrate:view.getUint32(8)};},esds:function esds(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),esId:data[6]<<8|data[7],streamPriority:data[8]&0x1f,decoderConfig:{objectProfileIndication:data[11],streamType:data[12]>>>2&0x3f,bufferSize:data[13]<<16|data[14]<<8|data[15],maxBitrate:data[16]<<24|data[17]<<16|data[18]<<8|data[19],avgBitrate:data[20]<<24|data[21]<<16|data[22]<<8|data[23],decoderConfigDescriptor:{tag:data[24],length:data[25],audioObjectType:data[26]>>>3&0x1f,samplingFrequencyIndex:(data[26]&0x07)<<1|data[27]>>>7&0x01,channelConfiguration:data[27]>>>3&0x0f}}};},ftyp:function ftyp(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={majorBrand:parseType$2(data.subarray(0,4)),minorVersion:view.getUint32(4),compatibleBrands:[]},i=8;while(i<data.byteLength){result.compatibleBrands.push(parseType$2(data.subarray(i,i+4)));i+=4;}return result;},dinf:function dinf(data){return{boxes:inspectMp4(data)};},dref:function dref(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),dataReferences:inspectMp4(data.subarray(8))};},hdlr:function hdlr(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4)),handlerType:parseType$2(data.subarray(8,12)),name:''},i=8;// parse out the name field
for(i=24;i<data.byteLength;i++){if(data[i]===0x00){// the name field is null-terminated
i++;break;}result.name+=String.fromCharCode(data[i]);}// decode UTF-8 to javascript's internal representation
// see http://ecmanaut.blogspot.com/2006/07/encoding-decoding-utf8-in-javascript.html
result.name=decodeURIComponent(escape(result.name));return result;},mdat:function mdat(data){return{byteLength:data.byteLength,nals:nalParse(data)};},mdhd:function mdhd(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),i=4,language,result={version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4)),language:''};if(result.version===1){i+=4;result.creationTime=parseMp4Date(view.getUint32(i));// truncating top 4 bytes
i+=8;result.modificationTime=parseMp4Date(view.getUint32(i));// truncating top 4 bytes
i+=4;result.timescale=view.getUint32(i);i+=8;result.duration=view.getUint32(i);// truncating top 4 bytes
}else{result.creationTime=parseMp4Date(view.getUint32(i));i+=4;result.modificationTime=parseMp4Date(view.getUint32(i));i+=4;result.timescale=view.getUint32(i);i+=4;result.duration=view.getUint32(i);}i+=4;// language is stored as an ISO-639-2/T code in an array of three 5-bit fields
// each field is the packed difference between its ASCII value and 0x60
language=view.getUint16(i);result.language+=String.fromCharCode((language>>10)+0x60);result.language+=String.fromCharCode(((language&0x03e0)>>5)+0x60);result.language+=String.fromCharCode((language&0x1f)+0x60);return result;},mdia:function mdia(data){return{boxes:inspectMp4(data)};},mfhd:function mfhd(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),sequenceNumber:data[4]<<24|data[5]<<16|data[6]<<8|data[7]};},minf:function minf(data){return{boxes:inspectMp4(data)};},// codingname, not a first-class box type. stsd entries share the
// same format as real boxes so the parsing infrastructure can be
// shared
mp4a:function mp4a(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={// 6 bytes reserved
dataReferenceIndex:view.getUint16(6),// 4 + 4 bytes reserved
channelcount:view.getUint16(16),samplesize:view.getUint16(18),// 2 bytes pre_defined
// 2 bytes reserved
samplerate:view.getUint16(24)+view.getUint16(26)/65536};// if there are more bytes to process, assume this is an ISO/IEC
// 14496-14 MP4AudioSampleEntry and parse the ESDBox
if(data.byteLength>28){result.streamDescriptor=inspectMp4(data.subarray(28))[0];}return result;},moof:function moof(data){return{boxes:inspectMp4(data)};},moov:function moov(data){return{boxes:inspectMp4(data)};},mvex:function mvex(data){return{boxes:inspectMp4(data)};},mvhd:function mvhd(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),i=4,result={version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4))};if(result.version===1){i+=4;result.creationTime=parseMp4Date(view.getUint32(i));// truncating top 4 bytes
i+=8;result.modificationTime=parseMp4Date(view.getUint32(i));// truncating top 4 bytes
i+=4;result.timescale=view.getUint32(i);i+=8;result.duration=view.getUint32(i);// truncating top 4 bytes
}else{result.creationTime=parseMp4Date(view.getUint32(i));i+=4;result.modificationTime=parseMp4Date(view.getUint32(i));i+=4;result.timescale=view.getUint32(i);i+=4;result.duration=view.getUint32(i);}i+=4;// convert fixed-point, base 16 back to a number
result.rate=view.getUint16(i)+view.getUint16(i+2)/16;i+=4;result.volume=view.getUint8(i)+view.getUint8(i+1)/8;i+=2;i+=2;i+=2*4;result.matrix=new Uint32Array(data.subarray(i,i+9*4));i+=9*4;i+=6*4;result.nextTrackId=view.getUint32(i);return result;},pdin:function pdin(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4)),rate:view.getUint32(4),initialDelay:view.getUint32(8)};},sdtp:function sdtp(data){var result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),samples:[]},i;for(i=4;i<data.byteLength;i++){result.samples.push({dependsOn:(data[i]&0x30)>>4,isDependedOn:(data[i]&0x0c)>>2,hasRedundancy:data[i]&0x03});}return result;},sidx:function sidx(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),references:[],referenceId:view.getUint32(4),timescale:view.getUint32(8),earliestPresentationTime:view.getUint32(12),firstOffset:view.getUint32(16)},referenceCount=view.getUint16(22),i;for(i=24;referenceCount;i+=12,referenceCount--){result.references.push({referenceType:(data[i]&0x80)>>>7,referencedSize:view.getUint32(i)&0x7FFFFFFF,subsegmentDuration:view.getUint32(i+4),startsWithSap:!!(data[i+8]&0x80),sapType:(data[i+8]&0x70)>>>4,sapDeltaTime:view.getUint32(i+8)&0x0FFFFFFF});}return result;},smhd:function smhd(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),balance:data[4]+data[5]/256};},stbl:function stbl(data){return{boxes:inspectMp4(data)};},stco:function stco(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),chunkOffsets:[]},entryCount=view.getUint32(4),i;for(i=8;entryCount;i+=4,entryCount--){result.chunkOffsets.push(view.getUint32(i));}return result;},stsc:function stsc(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),entryCount=view.getUint32(4),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),sampleToChunks:[]},i;for(i=8;entryCount;i+=12,entryCount--){result.sampleToChunks.push({firstChunk:view.getUint32(i),samplesPerChunk:view.getUint32(i+4),sampleDescriptionIndex:view.getUint32(i+8)});}return result;},stsd:function stsd(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),sampleDescriptions:inspectMp4(data.subarray(8))};},stsz:function stsz(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),sampleSize:view.getUint32(4),entries:[]},i;for(i=12;i<data.byteLength;i+=4){result.entries.push(view.getUint32(i));}return result;},stts:function stts(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),timeToSamples:[]},entryCount=view.getUint32(4),i;for(i=8;entryCount;i+=8,entryCount--){result.timeToSamples.push({sampleCount:view.getUint32(i),sampleDelta:view.getUint32(i+4)});}return result;},styp:function styp(data){return parse$$1.ftyp(data);},tfdt:function tfdt(data){var result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),baseMediaDecodeTime:data[4]<<24|data[5]<<16|data[6]<<8|data[7]};if(result.version===1){result.baseMediaDecodeTime*=Math.pow(2,32);result.baseMediaDecodeTime+=data[8]<<24|data[9]<<16|data[10]<<8|data[11];}return result;},tfhd:function tfhd(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),trackId:view.getUint32(4)},baseDataOffsetPresent=result.flags[2]&0x01,sampleDescriptionIndexPresent=result.flags[2]&0x02,defaultSampleDurationPresent=result.flags[2]&0x08,defaultSampleSizePresent=result.flags[2]&0x10,defaultSampleFlagsPresent=result.flags[2]&0x20,durationIsEmpty=result.flags[0]&0x010000,defaultBaseIsMoof=result.flags[0]&0x020000,i;i=8;if(baseDataOffsetPresent){i+=4;// truncate top 4 bytes
// FIXME: should we read the full 64 bits?
result.baseDataOffset=view.getUint32(12);i+=4;}if(sampleDescriptionIndexPresent){result.sampleDescriptionIndex=view.getUint32(i);i+=4;}if(defaultSampleDurationPresent){result.defaultSampleDuration=view.getUint32(i);i+=4;}if(defaultSampleSizePresent){result.defaultSampleSize=view.getUint32(i);i+=4;}if(defaultSampleFlagsPresent){result.defaultSampleFlags=view.getUint32(i);}if(durationIsEmpty){result.durationIsEmpty=true;}if(!baseDataOffsetPresent&&defaultBaseIsMoof){result.baseDataOffsetIsMoof=true;}return result;},tkhd:function tkhd(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),i=4,result={version:view.getUint8(0),flags:new Uint8Array(data.subarray(1,4))};if(result.version===1){i+=4;result.creationTime=parseMp4Date(view.getUint32(i));// truncating top 4 bytes
i+=8;result.modificationTime=parseMp4Date(view.getUint32(i));// truncating top 4 bytes
i+=4;result.trackId=view.getUint32(i);i+=4;i+=8;result.duration=view.getUint32(i);// truncating top 4 bytes
}else{result.creationTime=parseMp4Date(view.getUint32(i));i+=4;result.modificationTime=parseMp4Date(view.getUint32(i));i+=4;result.trackId=view.getUint32(i);i+=4;i+=4;result.duration=view.getUint32(i);}i+=4;i+=2*4;result.layer=view.getUint16(i);i+=2;result.alternateGroup=view.getUint16(i);i+=2;// convert fixed-point, base 16 back to a number
result.volume=view.getUint8(i)+view.getUint8(i+1)/8;i+=2;i+=2;result.matrix=new Uint32Array(data.subarray(i,i+9*4));i+=9*4;result.width=view.getUint16(i)+view.getUint16(i+2)/16;i+=4;result.height=view.getUint16(i)+view.getUint16(i+2)/16;return result;},traf:function traf(data){return{boxes:inspectMp4(data)};},trak:function trak(data){return{boxes:inspectMp4(data)};},trex:function trex(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),trackId:view.getUint32(4),defaultSampleDescriptionIndex:view.getUint32(8),defaultSampleDuration:view.getUint32(12),defaultSampleSize:view.getUint32(16),sampleDependsOn:data[20]&0x03,sampleIsDependedOn:(data[21]&0xc0)>>6,sampleHasRedundancy:(data[21]&0x30)>>4,samplePaddingValue:(data[21]&0x0e)>>1,sampleIsDifferenceSample:!!(data[21]&0x01),sampleDegradationPriority:view.getUint16(22)};},trun:function trun(data){var result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),samples:[]},view=new DataView(data.buffer,data.byteOffset,data.byteLength),// Flag interpretation
dataOffsetPresent=result.flags[2]&0x01,// compare with 2nd byte of 0x1
firstSampleFlagsPresent=result.flags[2]&0x04,// compare with 2nd byte of 0x4
sampleDurationPresent=result.flags[1]&0x01,// compare with 2nd byte of 0x100
sampleSizePresent=result.flags[1]&0x02,// compare with 2nd byte of 0x200
sampleFlagsPresent=result.flags[1]&0x04,// compare with 2nd byte of 0x400
sampleCompositionTimeOffsetPresent=result.flags[1]&0x08,// compare with 2nd byte of 0x800
sampleCount=view.getUint32(4),offset=8,sample;if(dataOffsetPresent){// 32 bit signed integer
result.dataOffset=view.getInt32(offset);offset+=4;}// Overrides the flags for the first sample only. The order of
// optional values will be: duration, size, compositionTimeOffset
if(firstSampleFlagsPresent&&sampleCount){sample={flags:parseSampleFlags(data.subarray(offset,offset+4))};offset+=4;if(sampleDurationPresent){sample.duration=view.getUint32(offset);offset+=4;}if(sampleSizePresent){sample.size=view.getUint32(offset);offset+=4;}if(sampleCompositionTimeOffsetPresent){// Note: this should be a signed int if version is 1
sample.compositionTimeOffset=view.getUint32(offset);offset+=4;}result.samples.push(sample);sampleCount--;}while(sampleCount--){sample={};if(sampleDurationPresent){sample.duration=view.getUint32(offset);offset+=4;}if(sampleSizePresent){sample.size=view.getUint32(offset);offset+=4;}if(sampleFlagsPresent){sample.flags=parseSampleFlags(data.subarray(offset,offset+4));offset+=4;}if(sampleCompositionTimeOffsetPresent){// Note: this should be a signed int if version is 1
sample.compositionTimeOffset=view.getUint32(offset);offset+=4;}result.samples.push(sample);}return result;},'url ':function url(data){return{version:data[0],flags:new Uint8Array(data.subarray(1,4))};},vmhd:function vmhd(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength);return{version:data[0],flags:new Uint8Array(data.subarray(1,4)),graphicsmode:view.getUint16(4),opcolor:new Uint16Array([view.getUint16(6),view.getUint16(8),view.getUint16(10)])};}};/**
     * Return a javascript array of box objects parsed from an ISO base
     * media file.
     * @param data {Uint8Array} the binary data of the media to be inspected
     * @return {array} a javascript array of potentially nested box objects
     */inspectMp4=function inspectMp4(data){var i=0,result=[],view,size,type,end,box;// Convert data from Uint8Array to ArrayBuffer, to follow Dataview API
var ab=new ArrayBuffer(data.length);var v=new Uint8Array(ab);for(var z=0;z<data.length;++z){v[z]=data[z];}view=new DataView(ab);while(i<data.byteLength){// parse box data
size=view.getUint32(i);type=parseType$2(data.subarray(i+4,i+8));end=size>1?i+size:data.byteLength;// parse type-specific data
box=(parse$$1[type]||function(data){return{data:data};})(data.subarray(i+8,end));box.size=size;box.type=type;// store this box and move to the next
result.push(box);i=end;}return result;};/**
     * Returns a textual representation of the javascript represtentation
     * of an MP4 file. You can use it as an alternative to
     * JSON.stringify() to compare inspected MP4s.
     * @param inspectedMp4 {array} the parsed array of boxes in an MP4
     * file
     * @param depth {number} (optional) the number of ancestor boxes of
     * the elements of inspectedMp4. Assumed to be zero if unspecified.
     * @return {string} a text representation of the parsed MP4
     */_textifyMp=function textifyMp4(inspectedMp4,depth){var indent;depth=depth||0;indent=new Array(depth*2+1).join(' ');// iterate over all the boxes
return inspectedMp4.map(function(box,index){// list the box type first at the current indentation level
return indent+box.type+'\n'+// the type is already included and handle child boxes separately
Object.keys(box).filter(function(key){return key!=='type'&&key!=='boxes';// output all the box properties
}).map(function(key){var prefix=indent+'  '+key+': ',value=box[key];// print out raw bytes as hexademical
if(value instanceof Uint8Array||value instanceof Uint32Array){var bytes=Array.prototype.slice.call(new Uint8Array(value.buffer,value.byteOffset,value.byteLength)).map(function(byte){return' '+('00'+byte.toString(16)).slice(-2);}).join('').match(/.{1,24}/g);if(!bytes){return prefix+'<>';}if(bytes.length===1){return prefix+'<'+bytes.join('').slice(1)+'>';}return prefix+'<\n'+bytes.map(function(line){return indent+'  '+line;}).join('\n')+'\n'+indent+'  >';}// stringify generic objects
return prefix+JSON.stringify(value,null,2).split('\n').map(function(line,index){if(index===0){return line;}return indent+'  '+line;}).join('\n');}).join('\n')+(// recursively textify the child boxes
box.boxes?'\n'+_textifyMp(box.boxes,depth+1):'');}).join('\n');};var mp4Inspector={inspect:inspectMp4,textify:_textifyMp,parseTfdt:parse$$1.tfdt,parseHdlr:parse$$1.hdlr,parseTfhd:parse$$1.tfhd,parseTrun:parse$$1.trun,parseSidx:parse$$1.sidx};var discardEmulationPreventionBytes$1=captionPacketParser.discardEmulationPreventionBytes;var CaptionStream$1=captionStream.CaptionStream;/**
      * Maps an offset in the mdat to a sample based on the the size of the samples.
      * Assumes that `parseSamples` has been called first.
      *
      * @param {Number} offset - The offset into the mdat
      * @param {Object[]} samples - An array of samples, parsed using `parseSamples`
      * @return {?Object} The matching sample, or null if no match was found.
      *
      * @see ISO-BMFF-12/2015, Section 8.8.8
     **/var mapToSample=function mapToSample(offset,samples){var approximateOffset=offset;for(var i=0;i<samples.length;i++){var sample=samples[i];if(approximateOffset<sample.size){return sample;}approximateOffset-=sample.size;}return null;};/**
      * Finds SEI nal units contained in a Media Data Box.
      * Assumes that `parseSamples` has been called first.
      *
      * @param {Uint8Array} avcStream - The bytes of the mdat
      * @param {Object[]} samples - The samples parsed out by `parseSamples`
      * @param {Number} trackId - The trackId of this video track
      * @return {Object[]} seiNals - the parsed SEI NALUs found.
      *   The contents of the seiNal should match what is expected by
      *   CaptionStream.push (nalUnitType, size, data, escapedRBSP, pts, dts)
      *
      * @see ISO-BMFF-12/2015, Section 8.1.1
      * @see Rec. ITU-T H.264, 7.3.2.3.1
     **/var findSeiNals=function findSeiNals(avcStream,samples,trackId){var avcView=new DataView(avcStream.buffer,avcStream.byteOffset,avcStream.byteLength),result=[],seiNal,i,length,lastMatchedSample;for(i=0;i+4<avcStream.length;i+=length){length=avcView.getUint32(i);i+=4;// Bail if this doesn't appear to be an H264 stream
if(length<=0){continue;}switch(avcStream[i]&0x1F){case 0x06:var data=avcStream.subarray(i+1,i+1+length);var matchingSample=mapToSample(i,samples);seiNal={nalUnitType:'sei_rbsp',size:length,data:data,escapedRBSP:discardEmulationPreventionBytes$1(data),trackId:trackId};if(matchingSample){seiNal.pts=matchingSample.pts;seiNal.dts=matchingSample.dts;lastMatchedSample=matchingSample;}else{// If a matching sample cannot be found, use the last
// sample's values as they should be as close as possible
seiNal.pts=lastMatchedSample.pts;seiNal.dts=lastMatchedSample.dts;}result.push(seiNal);break;default:break;}}return result;};/**
      * Parses sample information out of Track Run Boxes and calculates
      * the absolute presentation and decode timestamps of each sample.
      *
      * @param {Array<Uint8Array>} truns - The Trun Run boxes to be parsed
      * @param {Number} baseMediaDecodeTime - base media decode time from tfdt
          @see ISO-BMFF-12/2015, Section 8.8.12
      * @param {Object} tfhd - The parsed Track Fragment Header
      *   @see inspect.parseTfhd
      * @return {Object[]} the parsed samples
      *
      * @see ISO-BMFF-12/2015, Section 8.8.8
     **/var parseSamples=function parseSamples(truns,baseMediaDecodeTime,tfhd){var currentDts=baseMediaDecodeTime;var defaultSampleDuration=tfhd.defaultSampleDuration||0;var defaultSampleSize=tfhd.defaultSampleSize||0;var trackId=tfhd.trackId;var allSamples=[];truns.forEach(function(trun){// Note: We currently do not parse the sample table as well
// as the trun. It's possible some sources will require this.
// moov > trak > mdia > minf > stbl
var trackRun=mp4Inspector.parseTrun(trun);var samples=trackRun.samples;samples.forEach(function(sample){if(sample.duration===undefined){sample.duration=defaultSampleDuration;}if(sample.size===undefined){sample.size=defaultSampleSize;}sample.trackId=trackId;sample.dts=currentDts;if(sample.compositionTimeOffset===undefined){sample.compositionTimeOffset=0;}sample.pts=currentDts+sample.compositionTimeOffset;currentDts+=sample.duration;});allSamples=allSamples.concat(samples);});return allSamples;};/**
      * Parses out caption nals from an FMP4 segment's video tracks.
      *
      * @param {Uint8Array} segment - The bytes of a single segment
      * @param {Number} videoTrackId - The trackId of a video track in the segment
      * @return {Object.<Number, Object[]>} A mapping of video trackId to
      *   a list of seiNals found in that track
     **/var parseCaptionNals=function parseCaptionNals(segment,videoTrackId){// To get the samples
var trafs=probe.findBox(segment,['moof','traf']);// To get SEI NAL units
var mdats=probe.findBox(segment,['mdat']);var captionNals={};var mdatTrafPairs=[];// Pair up each traf with a mdat as moofs and mdats are in pairs
mdats.forEach(function(mdat,index){var matchingTraf=trafs[index];mdatTrafPairs.push({mdat:mdat,traf:matchingTraf});});mdatTrafPairs.forEach(function(pair){var mdat=pair.mdat;var traf=pair.traf;var tfhd=probe.findBox(traf,['tfhd']);// Exactly 1 tfhd per traf
var headerInfo=mp4Inspector.parseTfhd(tfhd[0]);var trackId=headerInfo.trackId;var tfdt=probe.findBox(traf,['tfdt']);// Either 0 or 1 tfdt per traf
var baseMediaDecodeTime=tfdt.length>0?mp4Inspector.parseTfdt(tfdt[0]).baseMediaDecodeTime:0;var truns=probe.findBox(traf,['trun']);var samples;var seiNals;// Only parse video data for the chosen video track
if(videoTrackId===trackId&&truns.length>0){samples=parseSamples(truns,baseMediaDecodeTime,headerInfo);seiNals=findSeiNals(mdat,samples,trackId);if(!captionNals[trackId]){captionNals[trackId]=[];}captionNals[trackId]=captionNals[trackId].concat(seiNals);}});return captionNals;};/**
      * Parses out inband captions from an MP4 container and returns
      * caption objects that can be used by WebVTT and the TextTrack API.
      * @see https://developer.mozilla.org/en-US/docs/Web/API/VTTCue
      * @see https://developer.mozilla.org/en-US/docs/Web/API/TextTrack
      * Assumes that `probe.getVideoTrackIds` and `probe.timescale` have been called first
      *
      * @param {Uint8Array} segment - The fmp4 segment containing embedded captions
      * @param {Number} trackId - The id of the video track to parse
      * @param {Number} timescale - The timescale for the video track from the init segment
      *
      * @return {?Object[]} parsedCaptions - A list of captions or null if no video tracks
      * @return {Number} parsedCaptions[].startTime - The time to show the caption in seconds
      * @return {Number} parsedCaptions[].endTime - The time to stop showing the caption in seconds
      * @return {String} parsedCaptions[].text - The visible content of the caption
     **/var parseEmbeddedCaptions=function parseEmbeddedCaptions(segment,trackId,timescale){var seiNals;if(!trackId){return null;}seiNals=parseCaptionNals(segment,trackId);return{seiNals:seiNals[trackId],timescale:timescale};};/**
      * Converts SEI NALUs into captions that can be used by video.js
     **/var CaptionParser$$1=function CaptionParser$$1(){var isInitialized=false;var captionStream$$1;// Stores segments seen before trackId and timescale are set
var segmentCache;// Stores video track ID of the track being parsed
var trackId;// Stores the timescale of the track being parsed
var timescale;// Stores captions parsed so far
var parsedCaptions;/**
        * A method to indicate whether a CaptionParser has been initalized
        * @returns {Boolean}
       **/this.isInitialized=function(){return isInitialized;};/**
        * Initializes the underlying CaptionStream, SEI NAL parsing
        * and management, and caption collection
       **/this.init=function(){captionStream$$1=new CaptionStream$1();isInitialized=true;// Collect dispatched captions
captionStream$$1.on('data',function(event){// Convert to seconds in the source's timescale
event.startTime=event.startPts/timescale;event.endTime=event.endPts/timescale;parsedCaptions.captions.push(event);parsedCaptions.captionStreams[event.stream]=true;});};/**
        * Determines if a new video track will be selected
        * or if the timescale changed
        * @return {Boolean}
       **/this.isNewInit=function(videoTrackIds,timescales){if(videoTrackIds&&videoTrackIds.length===0||timescales&&(typeof timescales==='undefined'?'undefined':_typeof(timescales))==='object'&&Object.keys(timescales).length===0){return false;}return trackId!==videoTrackIds[0]||timescale!==timescales[trackId];};/**
        * Parses out SEI captions and interacts with underlying
        * CaptionStream to return dispatched captions
        *
        * @param {Uint8Array} segment - The fmp4 segment containing embedded captions
        * @param {Number[]} videoTrackIds - A list of video tracks found in the init segment
        * @param {Object.<Number, Number>} timescales - The timescales found in the init segment
        * @see parseEmbeddedCaptions
        * @see m2ts/caption-stream.js
       **/this.parse=function(segment,videoTrackIds,timescales){var parsedData;if(!this.isInitialized()){return null;// This is not likely to be a video segment
}else if(!videoTrackIds||!timescales){return null;}else if(this.isNewInit(videoTrackIds,timescales)){// Use the first video track only as there is no
// mechanism to switch to other video tracks
trackId=videoTrackIds[0];timescale=timescales[trackId];// If an init segment has not been seen yet, hold onto segment
// data until we have one
}else if(!trackId||!timescale){segmentCache.push(segment);return null;}// Now that a timescale and trackId is set, parse cached segments
while(segmentCache.length>0){var cachedSegment=segmentCache.shift();this.parse(cachedSegment,videoTrackIds,timescales);}parsedData=parseEmbeddedCaptions(segment,trackId,timescale);if(parsedData===null||!parsedData.seiNals){return null;}this.pushNals(parsedData.seiNals);// Force the parsed captions to be dispatched
this.flushStream();return parsedCaptions;};/**
        * Pushes SEI NALUs onto CaptionStream
        * @param {Object[]} nals - A list of SEI nals parsed using `parseCaptionNals`
        * Assumes that `parseCaptionNals` has been called first
        * @see m2ts/caption-stream.js
        **/this.pushNals=function(nals){if(!this.isInitialized()||!nals||nals.length===0){return null;}nals.forEach(function(nal){captionStream$$1.push(nal);});};/**
        * Flushes underlying CaptionStream to dispatch processed, displayable captions
        * @see m2ts/caption-stream.js
       **/this.flushStream=function(){if(!this.isInitialized()){return null;}captionStream$$1.flush();};/**
        * Reset caption buckets for new data
       **/this.clearParsedCaptions=function(){parsedCaptions.captions=[];parsedCaptions.captionStreams={};};/**
        * Resets underlying CaptionStream
        * @see m2ts/caption-stream.js
       **/this.resetCaptionStream=function(){if(!this.isInitialized()){return null;}captionStream$$1.reset();};/**
        * Convenience method to clear all captions flushed from the
        * CaptionStream and still being parsed
        * @see m2ts/caption-stream.js
       **/this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream();};/**
        * Reset caption parser
       **/this.reset=function(){segmentCache=[];trackId=null;timescale=null;if(!parsedCaptions){parsedCaptions={captions:[],// CC1, CC2, CC3, CC4
captionStreams:{}};}else{this.clearParsedCaptions();}this.resetCaptionStream();};this.reset();};var captionParser=CaptionParser$$1;var mp4={generator:mp4Generator,probe:probe,Transmuxer:transmuxer.Transmuxer,AudioSegmentStream:transmuxer.AudioSegmentStream,VideoSegmentStream:transmuxer.VideoSegmentStream,CaptionParser:captionParser};var classCallCheck=function classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}};var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();/**
     * @file transmuxer-worker.js
     *//**
     * Re-emits transmuxer events by converting them into messages to the
     * world outside the worker.
     *
     * @param {Object} transmuxer the transmuxer to wire events on
     * @private
     */var wireTransmuxerEvents=function wireTransmuxerEvents(self,transmuxer){transmuxer.on('data',function(segment){// transfer ownership of the underlying ArrayBuffer
// instead of doing a copy to save memory
// ArrayBuffers are transferable but generic TypedArrays are not
// @link https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers#Passing_data_by_transferring_ownership_(transferable_objects)
var initArray=segment.initSegment;segment.initSegment={data:initArray.buffer,byteOffset:initArray.byteOffset,byteLength:initArray.byteLength};var typedArray=segment.data;segment.data=typedArray.buffer;self.postMessage({action:'data',segment:segment,byteOffset:typedArray.byteOffset,byteLength:typedArray.byteLength},[segment.data]);});if(transmuxer.captionStream){transmuxer.captionStream.on('data',function(caption){self.postMessage({action:'caption',data:caption});});}transmuxer.on('done',function(data){self.postMessage({action:'done'});});transmuxer.on('gopInfo',function(gopInfo){self.postMessage({action:'gopInfo',gopInfo:gopInfo});});transmuxer.on('videoSegmentTimingInfo',function(videoSegmentTimingInfo){self.postMessage({action:'videoSegmentTimingInfo',videoSegmentTimingInfo:videoSegmentTimingInfo});});};/**
     * All incoming messages route through this hash. If no function exists
     * to handle an incoming message, then we ignore the message.
     *
     * @class MessageHandlers
     * @param {Object} options the options to initialize with
     */var MessageHandlers=function(){function MessageHandlers(self,options){classCallCheck(this,MessageHandlers);this.options=options||{};this.self=self;this.init();}/**
       * initialize our web worker and wire all the events.
       */createClass(MessageHandlers,[{key:'init',value:function init(){if(this.transmuxer){this.transmuxer.dispose();}this.transmuxer=new mp4.Transmuxer(this.options);wireTransmuxerEvents(this.self,this.transmuxer);}/**
         * Adds data (a ts segment) to the start of the transmuxer pipeline for
         * processing.
         *
         * @param {ArrayBuffer} data data to push into the muxer
         */},{key:'push',value:function push(data){// Cast array buffer to correct type for transmuxer
var segment=new Uint8Array(data.data,data.byteOffset,data.byteLength);this.transmuxer.push(segment);}/**
         * Recreate the transmuxer so that the next segment added via `push`
         * start with a fresh transmuxer.
         */},{key:'reset',value:function reset(){this.init();}/**
         * Set the value that will be used as the `baseMediaDecodeTime` time for the
         * next segment pushed in. Subsequent segments will have their `baseMediaDecodeTime`
         * set relative to the first based on the PTS values.
         *
         * @param {Object} data used to set the timestamp offset in the muxer
         */},{key:'setTimestampOffset',value:function setTimestampOffset(data){var timestampOffset=data.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(timestampOffset*90000));}},{key:'setAudioAppendStart',value:function setAudioAppendStart(data){this.transmuxer.setAudioAppendStart(Math.ceil(data.appendStart*90000));}/**
         * Forces the pipeline to finish processing the last segment and emit it's
         * results.
         *
         * @param {Object} data event data, not really used
         */},{key:'flush',value:function flush(data){this.transmuxer.flush();}},{key:'resetCaptions',value:function resetCaptions(){this.transmuxer.resetCaptions();}},{key:'alignGopsWith',value:function alignGopsWith(data){this.transmuxer.alignGopsWith(data.gopsToAlignWith.slice());}}]);return MessageHandlers;}();/**
     * Our web wroker interface so that things can talk to mux.js
     * that will be running in a web worker. the scope is passed to this by
     * webworkify.
     *
     * @param {Object} self the scope for the web worker
     */var TransmuxerWorker=function TransmuxerWorker(self){self.onmessage=function(event){if(event.data.action==='init'&&event.data.options){this.messageHandlers=new MessageHandlers(self,event.data.options);return;}if(!this.messageHandlers){this.messageHandlers=new MessageHandlers(self);}if(event.data&&event.data.action&&event.data.action!=='init'){if(this.messageHandlers[event.data.action]){this.messageHandlers[event.data.action](event.data);}}};};var transmuxerWorker=new TransmuxerWorker(self);return transmuxerWorker;}();});/**
 * @file - codecs.js - Handles tasks regarding codec strings such as translating them to
 * codec strings, or translating codec strings into objects that can be examined.
 */// Default codec parameters if none were provided for video and/or audio
var defaultCodecs={videoCodec:'avc1',videoObjectTypeIndicator:'.4d400d',// AAC-LC
audioProfile:'2'};/**
 * Replace the old apple-style `avc1.<dd>.<dd>` codec string with the standard
 * `avc1.<hhhhhh>`
 *
 * @param {Array} codecs an array of codec strings to fix
 * @return {Array} the translated codec array
 * @private
 */var translateLegacyCodecs=function translateLegacyCodecs(codecs){return codecs.map(function(codec){return codec.replace(/avc1\.(\d+)\.(\d+)/i,function(orig,profile,avcLevel){var profileHex=('00'+Number(profile).toString(16)).slice(-2);var avcLevelHex=('00'+Number(avcLevel).toString(16)).slice(-2);return'avc1.'+profileHex+'00'+avcLevelHex;});});};/**
 * Parses a codec string to retrieve the number of codecs specified,
 * the video codec and object type indicator, and the audio profile.
 */var parseCodecs=function parseCodecs(){var codecs=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var result={codecCount:0};var parsed=void 0;result.codecCount=codecs.split(',').length;result.codecCount=result.codecCount||2;// parse the video codec
parsed=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(codecs);if(parsed){result.videoCodec=parsed[2];result.videoObjectTypeIndicator=parsed[3];}// parse the last field of the audio codec
result.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(codecs);result.audioProfile=result.audioProfile&&result.audioProfile[2];return result;};/**
 * Replace codecs in the codec string with the old apple-style `avc1.<dd>.<dd>` to the
 * standard `avc1.<hhhhhh>`.
 *
 * @param codecString {String} the codec string
 * @return {String} the codec string with old apple-style codecs replaced
 *
 * @private
 */var mapLegacyAvcCodecs=function mapLegacyAvcCodecs(codecString){return codecString.replace(/avc1\.(\d+)\.(\d+)/i,function(match){return translateLegacyCodecs([match])[0];});};/**
 * Build a media mime-type string from a set of parameters
 * @param {String} type either 'audio' or 'video'
 * @param {String} container either 'mp2t' or 'mp4'
 * @param {Array} codecs an array of codec strings to add
 * @return {String} a valid media mime-type
 */var makeMimeTypeString=function makeMimeTypeString(type,container,codecs){// The codecs array is filtered so that falsey values are
// dropped and don't cause Array#join to create spurious
// commas
return type+'/'+container+'; codecs="'+codecs.filter(function(c){return!!c;}).join(', ')+'"';};/**
 * Returns the type container based on information in the playlist
 * @param {Playlist} media the current media playlist
 * @return {String} a valid media container type
 */var getContainerType=function getContainerType(media){// An initialization segment means the media playlist is an iframe
// playlist or is using the mp4 container. We don't currently
// support iframe playlists, so assume this is signalling mp4
// fragments.
if(media.segments&&media.segments.length&&media.segments[0].map){return'mp4';}return'mp2t';};/**
 * Returns a set of codec strings parsed from the playlist or the default
 * codec strings if no codecs were specified in the playlist
 * @param {Playlist} media the current media playlist
 * @return {Object} an object with the video and audio codecs
 */var getCodecs=function getCodecs(media){// if the codecs were explicitly specified, use them instead of the
// defaults
var mediaAttributes=media.attributes||{};if(mediaAttributes.CODECS){return parseCodecs(mediaAttributes.CODECS);}return defaultCodecs;};var audioProfileFromDefault=function audioProfileFromDefault(master,audioGroupId){if(!master.mediaGroups.AUDIO||!audioGroupId){return null;}var audioGroup=master.mediaGroups.AUDIO[audioGroupId];if(!audioGroup){return null;}for(var name in audioGroup){var audioType=audioGroup[name];if(audioType.default&&audioType.playlists){// codec should be the same for all playlists within the audio type
return parseCodecs(audioType.playlists[0].attributes.CODECS).audioProfile;}}return null;};/**
 * Calculates the MIME type strings for a working configuration of
 * SourceBuffers to play variant streams in a master playlist. If
 * there is no possible working configuration, an empty array will be
 * returned.
 *
 * @param master {Object} the m3u8 object for the master playlist
 * @param media {Object} the m3u8 object for the variant playlist
 * @return {Array} the MIME type strings. If the array has more than
 * one entry, the first element should be applied to the video
 * SourceBuffer and the second to the audio SourceBuffer.
 *
 * @private
 */var mimeTypesForPlaylist=function mimeTypesForPlaylist(master,media){var containerType=getContainerType(media);var codecInfo=getCodecs(media);var mediaAttributes=media.attributes||{};// Default condition for a traditional HLS (no demuxed audio/video)
var isMuxed=true;var isMaat=false;if(!media){// Not enough information
return[];}if(master.mediaGroups.AUDIO&&mediaAttributes.AUDIO){var audioGroup=master.mediaGroups.AUDIO[mediaAttributes.AUDIO];// Handle the case where we are in a multiple-audio track scenario
if(audioGroup){isMaat=true;// Start with the everything demuxed then...
isMuxed=false;// ...check to see if any audio group tracks are muxed (ie. lacking a uri)
for(var groupId in audioGroup){// either a uri is present (if the case of HLS and an external playlist), or
// playlists is present (in the case of DASH where we don't have external audio
// playlists)
if(!audioGroup[groupId].uri&&!audioGroup[groupId].playlists){isMuxed=true;break;}}}}// HLS with multiple-audio tracks must always get an audio codec.
// Put another way, there is no way to have a video-only multiple-audio HLS!
if(isMaat&&!codecInfo.audioProfile){if(!isMuxed){// It is possible for codecs to be specified on the audio media group playlist but
// not on the rendition playlist. This is mostly the case for DASH, where audio and
// video are always separate (and separately specified).
codecInfo.audioProfile=audioProfileFromDefault(master,mediaAttributes.AUDIO);}if(!codecInfo.audioProfile){videojs$1.log.warn('Multiple audio tracks present but no audio codec string is specified. '+'Attempting to use the default audio codec (mp4a.40.2)');codecInfo.audioProfile=defaultCodecs.audioProfile;}}// Generate the final codec strings from the codec object generated above
var codecStrings={};if(codecInfo.videoCodec){codecStrings.video=''+codecInfo.videoCodec+codecInfo.videoObjectTypeIndicator;}if(codecInfo.audioProfile){codecStrings.audio='mp4a.40.'+codecInfo.audioProfile;}// Finally, make and return an array with proper mime-types depending on
// the configuration
var justAudio=makeMimeTypeString('audio',containerType,[codecStrings.audio]);var justVideo=makeMimeTypeString('video',containerType,[codecStrings.video]);var bothVideoAudio=makeMimeTypeString('video',containerType,[codecStrings.video,codecStrings.audio]);if(isMaat){if(!isMuxed&&codecStrings.video){return[justVideo,justAudio];}if(!isMuxed&&!codecStrings.video){// There is no muxed content and no video codec string, so this is an audio only
// stream with alternate audio.
return[justAudio,justAudio];}// There exists the possiblity that this will return a `video/container`
// mime-type for the first entry in the array even when there is only audio.
// This doesn't appear to be a problem and simplifies the code.
return[bothVideoAudio,justAudio];}// If there is no video codec at all, always just return a single
// audio/<container> mime-type
if(!codecStrings.video){return[justAudio];}// When not using separate audio media groups, audio and video is
// *always* muxed
return[bothVideoAudio];};/**
 * Parse a content type header into a type and parameters
 * object
 *
 * @param {String} type the content type header
 * @return {Object} the parsed content-type
 * @private
 */var parseContentType=function parseContentType(type){var object={type:'',parameters:{}};var parameters=type.trim().split(';');// first parameter should always be content-type
object.type=parameters.shift().trim();parameters.forEach(function(parameter){var pair=parameter.trim().split('=');if(pair.length>1){var name=pair[0].replace(/"/g,'').trim();var value=pair[1].replace(/"/g,'').trim();object.parameters[name]=value;}});return object;};/**
 * Check if a codec string refers to an audio codec.
 *
 * @param {String} codec codec string to check
 * @return {Boolean} if this is an audio codec
 * @private
 */var isAudioCodec=function isAudioCodec(codec){return /mp4a\.\d+.\d+/i.test(codec);};/**
 * Check if a codec string refers to a video codec.
 *
 * @param {String} codec codec string to check
 * @return {Boolean} if this is a video codec
 * @private
 */var isVideoCodec=function isVideoCodec(codec){return /avc1\.[\da-f]+/i.test(codec);};/**
 * Returns a list of gops in the buffer that have a pts value of 3 seconds or more in
 * front of current time.
 *
 * @param {Array} buffer
 *        The current buffer of gop information
 * @param {Number} currentTime
 *        The current time
 * @param {Double} mapping
 *        Offset to map display time to stream presentation time
 * @return {Array}
 *         List of gops considered safe to append over
 */var gopsSafeToAlignWith=function gopsSafeToAlignWith(buffer,currentTime,mapping){if(typeof currentTime==='undefined'||currentTime===null||!buffer.length){return[];}// pts value for current time + 3 seconds to give a bit more wiggle room
var currentTimePts=Math.ceil((currentTime-mapping+3)*90000);var i=void 0;for(i=0;i<buffer.length;i++){if(buffer[i].pts>currentTimePts){break;}}return buffer.slice(i);};/**
 * Appends gop information (timing and byteLength) received by the transmuxer for the
 * gops appended in the last call to appendBuffer
 *
 * @param {Array} buffer
 *        The current buffer of gop information
 * @param {Array} gops
 *        List of new gop information
 * @param {boolean} replace
 *        If true, replace the buffer with the new gop information. If false, append the
 *        new gop information to the buffer in the right location of time.
 * @return {Array}
 *         Updated list of gop information
 */var updateGopBuffer=function updateGopBuffer(buffer,gops,replace){if(!gops.length){return buffer;}if(replace){// If we are in safe append mode, then completely overwrite the gop buffer
// with the most recent appeneded data. This will make sure that when appending
// future segments, we only try to align with gops that are both ahead of current
// time and in the last segment appended.
return gops.slice();}var start=gops[0].pts;var i=0;for(i;i<buffer.length;i++){if(buffer[i].pts>=start){break;}}return buffer.slice(0,i).concat(gops);};/**
 * Removes gop information in buffer that overlaps with provided start and end
 *
 * @param {Array} buffer
 *        The current buffer of gop information
 * @param {Double} start
 *        position to start the remove at
 * @param {Double} end
 *        position to end the remove at
 * @param {Double} mapping
 *        Offset to map display time to stream presentation time
 */var removeGopBuffer=function removeGopBuffer(buffer,start,end,mapping){var startPts=Math.ceil((start-mapping)*90000);var endPts=Math.ceil((end-mapping)*90000);var updatedBuffer=buffer.slice();var i=buffer.length;while(i--){if(buffer[i].pts<=endPts){break;}}if(i===-1){// no removal because end of remove range is before start of buffer
return updatedBuffer;}var j=i+1;while(j--){if(buffer[j].pts<=startPts){break;}}// clamp remove range start to 0 index
j=Math.max(j,0);updatedBuffer.splice(j,i-j+1);return updatedBuffer;};var buffered=function buffered(videoBuffer,audioBuffer,audioDisabled){var start=null;var end=null;var arity=0;var extents=[];var ranges=[];// neither buffer has been created yet
if(!videoBuffer&&!audioBuffer){return videojs$1.createTimeRange();}// only one buffer is configured
if(!videoBuffer){return audioBuffer.buffered;}if(!audioBuffer){return videoBuffer.buffered;}// both buffers are configured
if(audioDisabled){return videoBuffer.buffered;}// both buffers are empty
if(videoBuffer.buffered.length===0&&audioBuffer.buffered.length===0){return videojs$1.createTimeRange();}// Handle the case where we have both buffers and create an
// intersection of the two
var videoBuffered=videoBuffer.buffered;var audioBuffered=audioBuffer.buffered;var count=videoBuffered.length;// A) Gather up all start and end times
while(count--){extents.push({time:videoBuffered.start(count),type:'start'});extents.push({time:videoBuffered.end(count),type:'end'});}count=audioBuffered.length;while(count--){extents.push({time:audioBuffered.start(count),type:'start'});extents.push({time:audioBuffered.end(count),type:'end'});}// B) Sort them by time
extents.sort(function(a,b){return a.time-b.time;});// C) Go along one by one incrementing arity for start and decrementing
//    arity for ends
for(count=0;count<extents.length;count++){if(extents[count].type==='start'){arity++;// D) If arity is ever incremented to 2 we are entering an
//    overlapping range
if(arity===2){start=extents[count].time;}}else if(extents[count].type==='end'){arity--;// E) If arity is ever decremented to 1 we leaving an
//    overlapping range
if(arity===1){end=extents[count].time;}}// F) Record overlapping ranges
if(start!==null&&end!==null){ranges.push([start,end]);start=null;end=null;}}return videojs$1.createTimeRanges(ranges);};/**
 * @file virtual-source-buffer.js
 */var ONE_SECOND_IN_TS=90000;// We create a wrapper around the SourceBuffer so that we can manage the
// state of the `updating` property manually. We have to do this because
// Firefox changes `updating` to false long before triggering `updateend`
// events and that was causing strange problems in videojs-contrib-hls
var makeWrappedSourceBuffer=function makeWrappedSourceBuffer(mediaSource,mimeType){var sourceBuffer=mediaSource.addSourceBuffer(mimeType);var wrapper=Object.create(null);wrapper.updating=false;wrapper.realBuffer_=sourceBuffer;var _loop=function _loop(key){if(typeof sourceBuffer[key]==='function'){wrapper[key]=function(){return sourceBuffer[key].apply(sourceBuffer,arguments);};}else if(typeof wrapper[key]==='undefined'){Object.defineProperty(wrapper,key,{get:function get$$1(){return sourceBuffer[key];},set:function set$$1(v){return sourceBuffer[key]=v;}});}};for(var key in sourceBuffer){_loop(key);}return wrapper;};/**
 * VirtualSourceBuffers exist so that we can transmux non native formats
 * into a native format, but keep the same api as a native source buffer.
 * It creates a transmuxer, that works in its own thread (a web worker) and
 * that transmuxer muxes the data into a native format. VirtualSourceBuffer will
 * then send all of that data to the naive sourcebuffer so that it is
 * indestinguishable from a natively supported format.
 *
 * @param {HtmlMediaSource} mediaSource the parent mediaSource
 * @param {Array} codecs array of codecs that we will be dealing with
 * @class VirtualSourceBuffer
 * @extends video.js.EventTarget
 */var VirtualSourceBuffer=function(_videojs$EventTarget){inherits(VirtualSourceBuffer,_videojs$EventTarget);function VirtualSourceBuffer(mediaSource,codecs){classCallCheck(this,VirtualSourceBuffer);var _this=possibleConstructorReturn(this,(VirtualSourceBuffer.__proto__||Object.getPrototypeOf(VirtualSourceBuffer)).call(this,videojs$1.EventTarget));_this.timestampOffset_=0;_this.pendingBuffers_=[];_this.bufferUpdating_=false;_this.mediaSource_=mediaSource;_this.codecs_=codecs;_this.audioCodec_=null;_this.videoCodec_=null;_this.audioDisabled_=false;_this.appendAudioInitSegment_=true;_this.gopBuffer_=[];_this.timeMapping_=0;_this.safeAppend_=videojs$1.browser.IE_VERSION>=11;var options={remux:false,alignGopsAtEnd:_this.safeAppend_};_this.codecs_.forEach(function(codec){if(isAudioCodec(codec)){_this.audioCodec_=codec;}else if(isVideoCodec(codec)){_this.videoCodec_=codec;}});// append muxed segments to their respective native buffers as
// soon as they are available
_this.transmuxer_=new TransmuxWorker();_this.transmuxer_.postMessage({action:'init',options:options});_this.transmuxer_.onmessage=function(event){if(event.data.action==='data'){return _this.data_(event);}if(event.data.action==='done'){return _this.done_(event);}if(event.data.action==='gopInfo'){return _this.appendGopInfo_(event);}if(event.data.action==='videoSegmentTimingInfo'){return _this.videoSegmentTimingInfo_(event.data.videoSegmentTimingInfo);}};// this timestampOffset is a property with the side-effect of resetting
// baseMediaDecodeTime in the transmuxer on the setter
Object.defineProperty(_this,'timestampOffset',{get:function get$$1(){return this.timestampOffset_;},set:function set$$1(val){if(typeof val==='number'&&val>=0){this.timestampOffset_=val;this.appendAudioInitSegment_=true;// reset gop buffer on timestampoffset as this signals a change in timeline
this.gopBuffer_.length=0;this.timeMapping_=0;// We have to tell the transmuxer to set the baseMediaDecodeTime to
// the desired timestampOffset for the next segment
this.transmuxer_.postMessage({action:'setTimestampOffset',timestampOffset:val});}}});// setting the append window affects both source buffers
Object.defineProperty(_this,'appendWindowStart',{get:function get$$1(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart;},set:function set$$1(start){if(this.videoBuffer_){this.videoBuffer_.appendWindowStart=start;}if(this.audioBuffer_){this.audioBuffer_.appendWindowStart=start;}}});// this buffer is "updating" if either of its native buffers are
Object.defineProperty(_this,'updating',{get:function get$$1(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating);}});// the buffered property is the intersection of the buffered
// ranges of the native source buffers
Object.defineProperty(_this,'buffered',{get:function get$$1(){return buffered(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_);}});return _this;}/**
   * When we get a data event from the transmuxer
   * we call this function and handle the data that
   * was sent to us
   *
   * @private
   * @param {Event} event the data event from the transmuxer
   */createClass(VirtualSourceBuffer,[{key:'data_',value:function data_(event){var segment=event.data.segment;// Cast ArrayBuffer to TypedArray
segment.data=new Uint8Array(segment.data,event.data.byteOffset,event.data.byteLength);segment.initSegment=new Uint8Array(segment.initSegment.data,segment.initSegment.byteOffset,segment.initSegment.byteLength);createTextTracksIfNecessary(this,this.mediaSource_,segment);// Add the segments to the pendingBuffers array
this.pendingBuffers_.push(segment);return;}/**
     * When we get a done event from the transmuxer
     * we call this function and we process all
     * of the pending data that we have been saving in the
     * data_ function
     *
     * @private
     * @param {Event} event the done event from the transmuxer
     */},{key:'done_',value:function done_(event){// Don't process and append data if the mediaSource is closed
if(this.mediaSource_.readyState==='closed'){this.pendingBuffers_.length=0;return;}// All buffers should have been flushed from the muxer
// start processing anything we have received
this.processPendingSegments_();return;}},{key:'videoSegmentTimingInfo_',value:function videoSegmentTimingInfo_(timingInfo){var timingInfoInSeconds={start:{decode:timingInfo.start.dts/ONE_SECOND_IN_TS,presentation:timingInfo.start.pts/ONE_SECOND_IN_TS},end:{decode:timingInfo.end.dts/ONE_SECOND_IN_TS,presentation:timingInfo.end.pts/ONE_SECOND_IN_TS},baseMediaDecodeTime:timingInfo.baseMediaDecodeTime/ONE_SECOND_IN_TS};if(timingInfo.prependedContentDuration){timingInfoInSeconds.prependedContentDuration=timingInfo.prependedContentDuration/ONE_SECOND_IN_TS;}this.trigger({type:'videoSegmentTimingInfo',videoSegmentTimingInfo:timingInfoInSeconds});}/**
     * Create our internal native audio/video source buffers and add
     * event handlers to them with the following conditions:
     * 1. they do not already exist on the mediaSource
     * 2. this VSB has a codec for them
     *
     * @private
     */},{key:'createRealSourceBuffers_',value:function createRealSourceBuffers_(){var _this2=this;var types=['audio','video'];types.forEach(function(type){// Don't create a SourceBuffer of this type if we don't have a
// codec for it
if(!_this2[type+'Codec_']){return;}// Do nothing if a SourceBuffer of this type already exists
if(_this2[type+'Buffer_']){return;}var buffer=null;// If the mediasource already has a SourceBuffer for the codec
// use that
if(_this2.mediaSource_[type+'Buffer_']){buffer=_this2.mediaSource_[type+'Buffer_'];// In multiple audio track cases, the audio source buffer is disabled
// on the main VirtualSourceBuffer by the HTMLMediaSource much earlier
// than createRealSourceBuffers_ is called to create the second
// VirtualSourceBuffer because that happens as a side-effect of
// videojs-contrib-hls starting the audioSegmentLoader. As a result,
// the audioBuffer is essentially "ownerless" and no one will toggle
// the `updating` state back to false once the `updateend` event is received
//
// Setting `updating` to false manually will work around this
// situation and allow work to continue
buffer.updating=false;}else{var codecProperty=type+'Codec_';var mimeType=type+'/mp4;codecs="'+_this2[codecProperty]+'"';buffer=makeWrappedSourceBuffer(_this2.mediaSource_.nativeMediaSource_,mimeType);_this2.mediaSource_[type+'Buffer_']=buffer;}_this2[type+'Buffer_']=buffer;// Wire up the events to the SourceBuffer
['update','updatestart','updateend'].forEach(function(event){buffer.addEventListener(event,function(){// if audio is disabled
if(type==='audio'&&_this2.audioDisabled_){return;}if(event==='updateend'){_this2[type+'Buffer_'].updating=false;}var shouldTrigger=types.every(function(t){// skip checking audio's updating status if audio
// is not enabled
if(t==='audio'&&_this2.audioDisabled_){return true;}// if the other type if updating we don't trigger
if(type!==t&&_this2[t+'Buffer_']&&_this2[t+'Buffer_'].updating){return false;}return true;});if(shouldTrigger){return _this2.trigger(event);}});});});}/**
     * Emulate the native mediasource function, but our function will
     * send all of the proposed segments to the transmuxer so that we
     * can transmux them before we append them to our internal
     * native source buffers in the correct format.
     *
     * @link https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/appendBuffer
     * @param {Uint8Array} segment the segment to append to the buffer
     */},{key:'appendBuffer',value:function appendBuffer(segment){// Start the internal "updating" state
this.bufferUpdating_=true;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var audioBuffered=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:'setAudioAppendStart',appendStart:audioBuffered.end(audioBuffered.length-1)});}if(this.videoBuffer_){this.transmuxer_.postMessage({action:'alignGopsWith',gopsToAlignWith:gopsSafeToAlignWith(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)});}this.transmuxer_.postMessage({action:'push',// Send the typed-array of data as an ArrayBuffer so that
// it can be sent as a "Transferable" and avoid the costly
// memory copy
data:segment.buffer,// To recreate the original typed-array, we need information
// about what portion of the ArrayBuffer it was a view into
byteOffset:segment.byteOffset,byteLength:segment.byteLength},[segment.buffer]);this.transmuxer_.postMessage({action:'flush'});}/**
     * Appends gop information (timing and byteLength) received by the transmuxer for the
     * gops appended in the last call to appendBuffer
     *
     * @param {Event} event
     *        The gopInfo event from the transmuxer
     * @param {Array} event.data.gopInfo
     *        List of gop info to append
     */},{key:'appendGopInfo_',value:function appendGopInfo_(event){this.gopBuffer_=updateGopBuffer(this.gopBuffer_,event.data.gopInfo,this.safeAppend_);}/**
     * Emulate the native mediasource function and remove parts
     * of the buffer from any of our internal buffers that exist
     *
     * @link https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/remove
     * @param {Double} start position to start the remove at
     * @param {Double} end position to end the remove at
     */},{key:'remove',value:function remove(start,end){if(this.videoBuffer_){this.videoBuffer_.updating=true;this.videoBuffer_.remove(start,end);this.gopBuffer_=removeGopBuffer(this.gopBuffer_,start,end,this.timeMapping_);}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.updating=true;this.audioBuffer_.remove(start,end);}// Remove Metadata Cues (id3)
removeCuesFromTrack(start,end,this.metadataTrack_);// Remove Any Captions
if(this.inbandTextTracks_){for(var track in this.inbandTextTracks_){removeCuesFromTrack(start,end,this.inbandTextTracks_[track]);}}}/**
     * Process any segments that the muxer has output
     * Concatenate segments together based on type and append them into
     * their respective sourceBuffers
     *
     * @private
     */},{key:'processPendingSegments_',value:function processPendingSegments_(){var sortedSegments={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};// Sort segments into separate video/audio arrays and
// keep track of their total byte lengths
sortedSegments=this.pendingBuffers_.reduce(function(segmentObj,segment){var type=segment.type;var data=segment.data;var initSegment=segment.initSegment;segmentObj[type].segments.push(data);segmentObj[type].bytes+=data.byteLength;segmentObj[type].initSegment=initSegment;// Gather any captions into a single array
if(segment.captions){segmentObj.captions=segmentObj.captions.concat(segment.captions);}if(segment.info){segmentObj[type].info=segment.info;}// Gather any metadata into a single array
if(segment.metadata){segmentObj.metadata=segmentObj.metadata.concat(segment.metadata);}return segmentObj;},sortedSegments);// Create the real source buffers if they don't exist by now since we
// finally are sure what tracks are contained in the source
if(!this.videoBuffer_&&!this.audioBuffer_){// Remove any codecs that may have been specified by default but
// are no longer applicable now
if(sortedSegments.video.bytes===0){this.videoCodec_=null;}if(sortedSegments.audio.bytes===0){this.audioCodec_=null;}this.createRealSourceBuffers_();}if(sortedSegments.audio.info){this.mediaSource_.trigger({type:'audioinfo',info:sortedSegments.audio.info});}if(sortedSegments.video.info){this.mediaSource_.trigger({type:'videoinfo',info:sortedSegments.video.info});}if(this.appendAudioInitSegment_){if(!this.audioDisabled_&&this.audioBuffer_){sortedSegments.audio.segments.unshift(sortedSegments.audio.initSegment);sortedSegments.audio.bytes+=sortedSegments.audio.initSegment.byteLength;}this.appendAudioInitSegment_=false;}var triggerUpdateend=false;// Merge multiple video and audio segments into one and append
if(this.videoBuffer_&&sortedSegments.video.bytes){sortedSegments.video.segments.unshift(sortedSegments.video.initSegment);sortedSegments.video.bytes+=sortedSegments.video.initSegment.byteLength;this.concatAndAppendSegments_(sortedSegments.video,this.videoBuffer_);}else if(this.videoBuffer_&&(this.audioDisabled_||!this.audioBuffer_)){// The transmuxer did not return any bytes of video, meaning it was all trimmed
// for gop alignment. Since we have a video buffer and audio is disabled, updateend
// will never be triggered by this source buffer, which will cause contrib-hls
// to be stuck forever waiting for updateend. If audio is not disabled, updateend
// will be triggered by the audio buffer, which will be sent upwards since the video
// buffer will not be in an updating state.
triggerUpdateend=true;}// Add text-track data for all
addTextTrackData(this,sortedSegments.captions,sortedSegments.metadata);if(!this.audioDisabled_&&this.audioBuffer_){this.concatAndAppendSegments_(sortedSegments.audio,this.audioBuffer_);}this.pendingBuffers_.length=0;if(triggerUpdateend){this.trigger('updateend');}// We are no longer in the internal "updating" state
this.bufferUpdating_=false;}/**
     * Combine all segments into a single Uint8Array and then append them
     * to the destination buffer
     *
     * @param {Object} segmentObj
     * @param {SourceBuffer} destinationBuffer native source buffer to append data to
     * @private
     */},{key:'concatAndAppendSegments_',value:function concatAndAppendSegments_(segmentObj,destinationBuffer){var offset=0;var tempBuffer=void 0;if(segmentObj.bytes){tempBuffer=new Uint8Array(segmentObj.bytes);// Combine the individual segments into one large typed-array
segmentObj.segments.forEach(function(segment){tempBuffer.set(segment,offset);offset+=segment.byteLength;});try{destinationBuffer.updating=true;destinationBuffer.appendBuffer(tempBuffer);}catch(error){if(this.mediaSource_.player_){this.mediaSource_.player_.error({code:-3,type:'APPEND_BUFFER_ERR',message:error.message,originalError:error});}}}}/**
     * Emulate the native mediasource function. abort any soureBuffer
     * actions and throw out any un-appended data.
     *
     * @link https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/abort
     */},{key:'abort',value:function abort(){if(this.videoBuffer_){this.videoBuffer_.abort();}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.abort();}if(this.transmuxer_){this.transmuxer_.postMessage({action:'reset'});}this.pendingBuffers_.length=0;this.bufferUpdating_=false;}}]);return VirtualSourceBuffer;}(videojs$1.EventTarget);/**
 * @file html-media-source.js
 *//**
 * Our MediaSource implementation in HTML, mimics native
 * MediaSource where/if possible.
 *
 * @link https://developer.mozilla.org/en-US/docs/Web/API/MediaSource
 * @class HtmlMediaSource
 * @extends videojs.EventTarget
 */var HtmlMediaSource=function(_videojs$EventTarget){inherits(HtmlMediaSource,_videojs$EventTarget);function HtmlMediaSource(){classCallCheck(this,HtmlMediaSource);var _this=possibleConstructorReturn(this,(HtmlMediaSource.__proto__||Object.getPrototypeOf(HtmlMediaSource)).call(this));var property=void 0;_this.nativeMediaSource_=new _window2.default.MediaSource();// delegate to the native MediaSource's methods by default
for(property in _this.nativeMediaSource_){if(!(property in HtmlMediaSource.prototype)&&typeof _this.nativeMediaSource_[property]==='function'){_this[property]=_this.nativeMediaSource_[property].bind(_this.nativeMediaSource_);}}// emulate `duration` and `seekable` until seeking can be
// handled uniformly for live streams
// see https://github.com/w3c/media-source/issues/5
_this.duration_=NaN;Object.defineProperty(_this,'duration',{get:function get$$1(){if(this.duration_===Infinity){return this.duration_;}return this.nativeMediaSource_.duration;},set:function set$$1(duration){this.duration_=duration;if(duration!==Infinity){this.nativeMediaSource_.duration=duration;return;}}});Object.defineProperty(_this,'seekable',{get:function get$$1(){if(this.duration_===Infinity){return videojs$1.createTimeRanges([[0,this.nativeMediaSource_.duration]]);}return this.nativeMediaSource_.seekable;}});Object.defineProperty(_this,'readyState',{get:function get$$1(){return this.nativeMediaSource_.readyState;}});Object.defineProperty(_this,'activeSourceBuffers',{get:function get$$1(){return this.activeSourceBuffers_;}});// the list of virtual and native SourceBuffers created by this
// MediaSource
_this.sourceBuffers=[];_this.activeSourceBuffers_=[];/**
     * update the list of active source buffers based upon various
     * imformation from HLS and video.js
     *
     * @private
     */_this.updateActiveSourceBuffers_=function(){// Retain the reference but empty the array
_this.activeSourceBuffers_.length=0;// If there is only one source buffer, then it will always be active and audio will
// be disabled based on the codec of the source buffer
if(_this.sourceBuffers.length===1){var sourceBuffer=_this.sourceBuffers[0];sourceBuffer.appendAudioInitSegment_=true;sourceBuffer.audioDisabled_=!sourceBuffer.audioCodec_;_this.activeSourceBuffers_.push(sourceBuffer);return;}// There are 2 source buffers, a combined (possibly video only) source buffer and
// and an audio only source buffer.
// By default, the audio in the combined virtual source buffer is enabled
// and the audio-only source buffer (if it exists) is disabled.
var disableCombined=false;var disableAudioOnly=true;// TODO: maybe we can store the sourcebuffers on the track objects?
// safari may do something like this
for(var i=0;i<_this.player_.audioTracks().length;i++){var track=_this.player_.audioTracks()[i];if(track.enabled&&track.kind!=='main'){// The enabled track is an alternate audio track so disable the audio in
// the combined source buffer and enable the audio-only source buffer.
disableCombined=true;disableAudioOnly=false;break;}}_this.sourceBuffers.forEach(function(sourceBuffer,index){/* eslinst-disable */// TODO once codecs are required, we can switch to using the codecs to determine
//      what stream is the video stream, rather than relying on videoTracks
/* eslinst-enable */sourceBuffer.appendAudioInitSegment_=true;if(sourceBuffer.videoCodec_&&sourceBuffer.audioCodec_){// combined
sourceBuffer.audioDisabled_=disableCombined;}else if(sourceBuffer.videoCodec_&&!sourceBuffer.audioCodec_){// If the "combined" source buffer is video only, then we do not want
// disable the audio-only source buffer (this is mostly for demuxed
// audio and video hls)
sourceBuffer.audioDisabled_=true;disableAudioOnly=false;}else if(!sourceBuffer.videoCodec_&&sourceBuffer.audioCodec_){// audio only
// In the case of audio only with alternate audio and disableAudioOnly is true
// this means we want to disable the audio on the alternate audio sourcebuffer
// but not the main "combined" source buffer. The "combined" source buffer is
// always at index 0, so this ensures audio won't be disabled in both source
// buffers.
sourceBuffer.audioDisabled_=index?disableAudioOnly:!disableAudioOnly;if(sourceBuffer.audioDisabled_){return;}}_this.activeSourceBuffers_.push(sourceBuffer);});};_this.onPlayerMediachange_=function(){_this.sourceBuffers.forEach(function(sourceBuffer){sourceBuffer.appendAudioInitSegment_=true;});};_this.onHlsReset_=function(){_this.sourceBuffers.forEach(function(sourceBuffer){if(sourceBuffer.transmuxer_){sourceBuffer.transmuxer_.postMessage({action:'resetCaptions'});}});};_this.onHlsSegmentTimeMapping_=function(event){_this.sourceBuffers.forEach(function(buffer){return buffer.timeMapping_=event.mapping;});};// Re-emit MediaSource events on the polyfill
['sourceopen','sourceclose','sourceended'].forEach(function(eventName){this.nativeMediaSource_.addEventListener(eventName,this.trigger.bind(this));},_this);// capture the associated player when the MediaSource is
// successfully attached
_this.on('sourceopen',function(event){// Get the player this MediaSource is attached to
var video=_document2.default.querySelector('[src="'+_this.url_+'"]');if(!video){return;}_this.player_=videojs$1(video.parentNode);if(!_this.player_){return;}// hls-reset is fired by videojs.Hls on to the tech after the main SegmentLoader
// resets its state and flushes the buffer
_this.player_.tech_.on('hls-reset',_this.onHlsReset_);// hls-segment-time-mapping is fired by videojs.Hls on to the tech after the main
// SegmentLoader inspects an MTS segment and has an accurate stream to display
// time mapping
_this.player_.tech_.on('hls-segment-time-mapping',_this.onHlsSegmentTimeMapping_);if(_this.player_.audioTracks&&_this.player_.audioTracks()){_this.player_.audioTracks().on('change',_this.updateActiveSourceBuffers_);_this.player_.audioTracks().on('addtrack',_this.updateActiveSourceBuffers_);_this.player_.audioTracks().on('removetrack',_this.updateActiveSourceBuffers_);}_this.player_.on('mediachange',_this.onPlayerMediachange_);});_this.on('sourceended',function(event){var duration=durationOfVideo(_this.duration);for(var i=0;i<_this.sourceBuffers.length;i++){var sourcebuffer=_this.sourceBuffers[i];var cues=sourcebuffer.metadataTrack_&&sourcebuffer.metadataTrack_.cues;if(cues&&cues.length){cues[cues.length-1].endTime=duration;}}});// explicitly terminate any WebWorkers that were created
// by SourceHandlers
_this.on('sourceclose',function(event){this.sourceBuffers.forEach(function(sourceBuffer){if(sourceBuffer.transmuxer_){sourceBuffer.transmuxer_.terminate();}});this.sourceBuffers.length=0;if(!this.player_){return;}if(this.player_.audioTracks&&this.player_.audioTracks()){this.player_.audioTracks().off('change',this.updateActiveSourceBuffers_);this.player_.audioTracks().off('addtrack',this.updateActiveSourceBuffers_);this.player_.audioTracks().off('removetrack',this.updateActiveSourceBuffers_);}// We can only change this if the player hasn't been disposed of yet
// because `off` eventually tries to use the el_ property. If it has
// been disposed of, then don't worry about it because there are no
// event handlers left to unbind anyway
if(this.player_.el_){this.player_.off('mediachange',this.onPlayerMediachange_);}if(this.player_.tech_&&this.player_.tech_.el_){this.player_.tech_.off('hls-reset',this.onHlsReset_);this.player_.tech_.off('hls-segment-time-mapping',this.onHlsSegmentTimeMapping_);}});return _this;}/**
   * Add a range that that can now be seeked to.
   *
   * @param {Double} start where to start the addition
   * @param {Double} end where to end the addition
   * @private
   */createClass(HtmlMediaSource,[{key:'addSeekableRange_',value:function addSeekableRange_(start,end){var error=void 0;if(this.duration!==Infinity){error=new Error('MediaSource.addSeekableRange() can only be invoked '+'when the duration is Infinity');error.name='InvalidStateError';error.code=11;throw error;}if(end>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration)){this.nativeMediaSource_.duration=end;}}/**
     * Add a source buffer to the media source.
     *
     * @link https://developer.mozilla.org/en-US/docs/Web/API/MediaSource/addSourceBuffer
     * @param {String} type the content-type of the content
     * @return {Object} the created source buffer
     */},{key:'addSourceBuffer',value:function addSourceBuffer(type){var buffer=void 0;var parsedType=parseContentType(type);// Create a VirtualSourceBuffer to transmux MPEG-2 transport
// stream segments into fragmented MP4s
if(/^(video|audio)\/mp2t$/i.test(parsedType.type)){var codecs=[];if(parsedType.parameters&&parsedType.parameters.codecs){codecs=parsedType.parameters.codecs.split(',');codecs=translateLegacyCodecs(codecs);codecs=codecs.filter(function(codec){return isAudioCodec(codec)||isVideoCodec(codec);});}if(codecs.length===0){codecs=['avc1.4d400d','mp4a.40.2'];}buffer=new VirtualSourceBuffer(this,codecs);if(this.sourceBuffers.length!==0){// If another VirtualSourceBuffer already exists, then we are creating a
// SourceBuffer for an alternate audio track and therefore we know that
// the source has both an audio and video track.
// That means we should trigger the manual creation of the real
// SourceBuffers instead of waiting for the transmuxer to return data
this.sourceBuffers[0].createRealSourceBuffers_();buffer.createRealSourceBuffers_();// Automatically disable the audio on the first source buffer if
// a second source buffer is ever created
this.sourceBuffers[0].audioDisabled_=true;}}else{// delegate to the native implementation
buffer=this.nativeMediaSource_.addSourceBuffer(type);}this.sourceBuffers.push(buffer);return buffer;}}]);return HtmlMediaSource;}(videojs$1.EventTarget);/**
 * @file videojs-contrib-media-sources.js
 */var urlCount=0;// ------------
// Media Source
// ------------
// store references to the media sources so they can be connected
// to a video element (a swf object)
// TODO: can we store this somewhere local to this module?
videojs$1.mediaSources={};/**
 * Provide a method for a swf object to notify JS that a
 * media source is now open.
 *
 * @param {String} msObjectURL string referencing the MSE Object URL
 * @param {String} swfId the swf id
 */var open=function open(msObjectURL,swfId){var mediaSource=videojs$1.mediaSources[msObjectURL];if(mediaSource){mediaSource.trigger({type:'sourceopen',swfId:swfId});}else{throw new Error('Media Source not found (Video.js)');}};/**
 * Check to see if the native MediaSource object exists and supports
 * an MP4 container with both H.264 video and AAC-LC audio.
 *
 * @return {Boolean} if  native media sources are supported
 */var supportsNativeMediaSources=function supportsNativeMediaSources(){return!!_window2.default.MediaSource&&!!_window2.default.MediaSource.isTypeSupported&&_window2.default.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"');};/**
 * An emulation of the MediaSource API so that we can support
 * native and non-native functionality. returns an instance of
 * HtmlMediaSource.
 *
 * @link https://developer.mozilla.org/en-US/docs/Web/API/MediaSource/MediaSource
 */var MediaSource=function MediaSource(){this.MediaSource={open:open,supportsNativeMediaSources:supportsNativeMediaSources};if(supportsNativeMediaSources()){return new HtmlMediaSource();}throw new Error('Cannot use create a virtual MediaSource for this video');};MediaSource.open=open;MediaSource.supportsNativeMediaSources=supportsNativeMediaSources;/**
 * A wrapper around the native URL for our MSE object
 * implementation, this object is exposed under videojs.URL
 *
 * @link https://developer.mozilla.org/en-US/docs/Web/API/URL/URL
 */var URL$1={/**
   * A wrapper around the native createObjectURL for our objects.
   * This function maps a native or emulated mediaSource to a blob
   * url so that it can be loaded into video.js
   *
   * @link https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL
   * @param {MediaSource} object the object to create a blob url to
   */createObjectURL:function createObjectURL(object){var objectUrlPrefix='blob:vjs-media-source/';var url=void 0;// use the native MediaSource to generate an object URL
if(object instanceof HtmlMediaSource){url=_window2.default.URL.createObjectURL(object.nativeMediaSource_);object.url_=url;return url;}// if the object isn't an emulated MediaSource, delegate to the
// native implementation
if(!(object instanceof HtmlMediaSource)){url=_window2.default.URL.createObjectURL(object);object.url_=url;return url;}// build a URL that can be used to map back to the emulated
// MediaSource
url=objectUrlPrefix+urlCount;urlCount++;// setup the mapping back to object
videojs$1.mediaSources[url]=object;return url;}};videojs$1.MediaSource=MediaSource;videojs$1.URL=URL$1;var EventTarget$1$1=videojs$1.EventTarget,mergeOptions$2=videojs$1.mergeOptions;/**
 * Returns a new master manifest that is the result of merging an updated master manifest
 * into the original version.
 *
 * @param {Object} oldMaster
 *        The old parsed mpd object
 * @param {Object} newMaster
 *        The updated parsed mpd object
 * @return {Object}
 *         A new object representing the original master manifest with the updated media
 *         playlists merged in
 */var updateMaster$1=function updateMaster$$1(oldMaster,newMaster){var noChanges=void 0;var update=mergeOptions$2(oldMaster,{// These are top level properties that can be updated
duration:newMaster.duration,minimumUpdatePeriod:newMaster.minimumUpdatePeriod});// First update the playlists in playlist list
for(var i=0;i<newMaster.playlists.length;i++){var playlistUpdate=updateMaster(update,newMaster.playlists[i]);if(playlistUpdate){update=playlistUpdate;}else{noChanges=true;}}// Then update media group playlists
forEachMediaGroup(newMaster,function(properties,type,group,label){if(properties.playlists&&properties.playlists.length){var uri=properties.playlists[0].uri;var _playlistUpdate=updateMaster(update,properties.playlists[0]);if(_playlistUpdate){update=_playlistUpdate;// update the playlist reference within media groups
update.mediaGroups[type][group][label].playlists[0]=update.playlists[uri];noChanges=false;}}});if(noChanges){return null;}return update;};var DashPlaylistLoader=function(_EventTarget){inherits(DashPlaylistLoader,_EventTarget);// DashPlaylistLoader must accept either a src url or a playlist because subsequent
// playlist loader setups from media groups will expect to be able to pass a playlist
// (since there aren't external URLs to media playlists with DASH)
function DashPlaylistLoader(srcUrlOrPlaylist,hls){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var masterPlaylistLoader=arguments[3];classCallCheck(this,DashPlaylistLoader);var _this=possibleConstructorReturn(this,(DashPlaylistLoader.__proto__||Object.getPrototypeOf(DashPlaylistLoader)).call(this));var _options$withCredenti=options.withCredentials,withCredentials=_options$withCredenti===undefined?false:_options$withCredenti,_options$handleManife=options.handleManifestRedirects,handleManifestRedirects=_options$handleManife===undefined?false:_options$handleManife;_this.hls_=hls;_this.withCredentials=withCredentials;_this.handleManifestRedirects=handleManifestRedirects;if(!srcUrlOrPlaylist){throw new Error('A non-empty playlist URL or playlist is required');}// event naming?
_this.on('minimumUpdatePeriod',function(){_this.refreshXml_();});// live playlist staleness timeout
_this.on('mediaupdatetimeout',function(){_this.refreshMedia_();});_this.state='HAVE_NOTHING';_this.loadedPlaylists_={};// initialize the loader state
// The masterPlaylistLoader will be created with a string
if(typeof srcUrlOrPlaylist==='string'){_this.srcUrl=srcUrlOrPlaylist;return possibleConstructorReturn(_this);}_this.setupChildLoader(masterPlaylistLoader,srcUrlOrPlaylist);return _this;}createClass(DashPlaylistLoader,[{key:'setupChildLoader',value:function setupChildLoader(masterPlaylistLoader,playlist){this.masterPlaylistLoader_=masterPlaylistLoader;this.childPlaylist_=playlist;}},{key:'dispose',value:function dispose(){this.stopRequest();this.loadedPlaylists_={};_window2.default.clearTimeout(this.mediaUpdateTimeout);}},{key:'hasPendingRequest',value:function hasPendingRequest(){return this.request||this.mediaRequest_;}},{key:'stopRequest',value:function stopRequest(){if(this.request){var oldRequest=this.request;this.request=null;oldRequest.onreadystatechange=null;oldRequest.abort();}}},{key:'media',value:function media(playlist){// getter
if(!playlist){return this.media_;}// setter
if(this.state==='HAVE_NOTHING'){throw new Error('Cannot switch media playlist from '+this.state);}var startingState=this.state;// find the playlist object if the target playlist has been specified by URI
if(typeof playlist==='string'){if(!this.master.playlists[playlist]){throw new Error('Unknown playlist URI: '+playlist);}playlist=this.master.playlists[playlist];}var mediaChange=!this.media_||playlist.uri!==this.media_.uri;// switch to previously loaded playlists immediately
if(mediaChange&&this.loadedPlaylists_[playlist.uri]&&this.loadedPlaylists_[playlist.uri].endList){this.state='HAVE_METADATA';this.media_=playlist;// trigger media change if the active media has been updated
if(mediaChange){this.trigger('mediachanging');this.trigger('mediachange');}return;}// switching to the active playlist is a no-op
if(!mediaChange){return;}// switching from an already loaded playlist
if(this.media_){this.trigger('mediachanging');}// TODO: check for sidx here
// Continue asynchronously if there is no sidx
// wait one tick to allow haveMaster to run first on a child loader
this.mediaRequest_=_window2.default.setTimeout(this.haveMetadata.bind(this,{startingState:startingState,playlist:playlist}),0);}},{key:'haveMetadata',value:function haveMetadata(_ref){var startingState=_ref.startingState,playlist=_ref.playlist;this.state='HAVE_METADATA';this.media_=playlist;this.loadedPlaylists_[playlist.uri]=playlist;this.mediaRequest_=null;// This will trigger loadedplaylist
this.refreshMedia_();// fire loadedmetadata the first time a media playlist is loaded
// to resolve setup of media groups
if(startingState==='HAVE_MASTER'){this.trigger('loadedmetadata');}else{// trigger media change if the active media has been updated
this.trigger('mediachange');}}},{key:'pause',value:function pause(){this.stopRequest();_window2.default.clearTimeout(this.mediaUpdateTimeout);if(this.state==='HAVE_NOTHING'){// If we pause the loader before any data has been retrieved, its as if we never
// started, so reset to an unstarted state.
this.started=false;}}},{key:'load',value:function load(isFinalRendition){var _this2=this;_window2.default.clearTimeout(this.mediaUpdateTimeout);var media=this.media();if(isFinalRendition){var delay=media?media.targetDuration/2*1000:5*1000;this.mediaUpdateTimeout=_window2.default.setTimeout(function(){return _this2.load();},delay);return;}// because the playlists are internal to the manifest, load should either load the
// main manifest, or do nothing but trigger an event
if(!this.started){this.start();return;}this.trigger('loadedplaylist');}/**
     * Parses the master xml string and updates playlist uri references
     *
     * @return {Object}
     *         The parsed mpd manifest object
     */},{key:'parseMasterXml',value:function parseMasterXml(){var master=(0,_mpdParser.parse)(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});master.uri=this.srcUrl;// Set up phony URIs for the playlists since we won't have external URIs for DASH
// but reference playlists by their URI throughout the project
// TODO: Should we create the dummy uris in mpd-parser as well (leaning towards yes).
for(var i=0;i<master.playlists.length;i++){var phonyUri='placeholder-uri-'+i;master.playlists[i].uri=phonyUri;// set up by URI references
master.playlists[phonyUri]=master.playlists[i];}// set up phony URIs for the media group playlists since we won't have external
// URIs for DASH but reference playlists by their URI throughout the project
forEachMediaGroup(master,function(properties,mediaType,groupKey,labelKey){if(properties.playlists&&properties.playlists.length){var _phonyUri='placeholder-uri-'+mediaType+'-'+groupKey+'-'+labelKey;properties.playlists[0].uri=_phonyUri;// setup URI references
master.playlists[_phonyUri]=properties.playlists[0];}});setupMediaPlaylists(master);resolveMediaGroupUris(master);return master;}},{key:'start',value:function start(){var _this3=this;this.started=true;// We don't need to request the master manifest again
// Call this asynchronously to match the xhr request behavior below
if(this.masterPlaylistLoader_){this.mediaRequest_=_window2.default.setTimeout(this.haveMaster_.bind(this),0);return;}// request the specified URL
this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(error,req){// disposed
if(!_this3.request){return;}// clear the loader's request reference
_this3.request=null;if(error){_this3.error={status:req.status,message:'DASH playlist request error at URL: '+_this3.srcUrl,responseText:req.responseText,// MEDIA_ERR_NETWORK
code:2};if(_this3.state==='HAVE_NOTHING'){_this3.started=false;}return _this3.trigger('error');}_this3.masterXml_=req.responseText;if(req.responseHeaders&&req.responseHeaders.date){_this3.masterLoaded_=Date.parse(req.responseHeaders.date);}else{_this3.masterLoaded_=Date.now();}_this3.srcUrl=resolveManifestRedirect(_this3.handleManifestRedirects,_this3.srcUrl,req);_this3.syncClientServerClock_(_this3.onClientServerClockSync_.bind(_this3));});}/**
     * Parses the master xml for UTCTiming node to sync the client clock to the server
     * clock. If the UTCTiming node requires a HEAD or GET request, that request is made.
     *
     * @param {Function} done
     *        Function to call when clock sync has completed
     */},{key:'syncClientServerClock_',value:function syncClientServerClock_(done){var _this4=this;var utcTiming=(0,_mpdParser.parseUTCTiming)(this.masterXml_);// No UTCTiming element found in the mpd. Use Date header from mpd request as the
// server clock
if(utcTiming===null){this.clientOffset_=this.masterLoaded_-Date.now();return done();}if(utcTiming.method==='DIRECT'){this.clientOffset_=utcTiming.value-Date.now();return done();}this.request=this.hls_.xhr({uri:resolveUrl(this.srcUrl,utcTiming.value),method:utcTiming.method,withCredentials:this.withCredentials},function(error,req){// disposed
if(!_this4.request){return;}if(error){// sync request failed, fall back to using date header from mpd
// TODO: log warning
_this4.clientOffset_=_this4.masterLoaded_-Date.now();return done();}var serverTime=void 0;if(utcTiming.method==='HEAD'){if(!req.responseHeaders||!req.responseHeaders.date){// expected date header not preset, fall back to using date header from mpd
// TODO: log warning
serverTime=_this4.masterLoaded_;}else{serverTime=Date.parse(req.responseHeaders.date);}}else{serverTime=Date.parse(req.responseText);}_this4.clientOffset_=serverTime-Date.now();done();});}},{key:'haveMaster_',value:function haveMaster_(){this.state='HAVE_MASTER';// clear media request
this.mediaRequest_=null;if(!this.masterPlaylistLoader_){this.master=this.parseMasterXml();// We have the master playlist at this point, so
// trigger this to allow MasterPlaylistController
// to make an initial playlist selection
this.trigger('loadedplaylist');}else if(!this.media_){// no media playlist was specifically selected so select
// the one the child playlist loader was created with
this.media(this.childPlaylist_);}}/**
     * Handler for after client/server clock synchronization has happened. Sets up
     * xml refresh timer if specificed by the manifest.
     */},{key:'onClientServerClockSync_',value:function onClientServerClockSync_(){var _this5=this;this.haveMaster_();if(!this.hasPendingRequest()&&!this.media_){this.media(this.master.playlists[0]);}// TODO: minimumUpdatePeriod can have a value of 0. Currently the manifest will not
// be refreshed when this is the case. The inter-op guide says that when the
// minimumUpdatePeriod is 0, the manifest should outline all currently available
// segments, but future segments may require an update. I think a good solution
// would be to update the manifest at the same rate that the media playlists
// are "refreshed", i.e. every targetDuration.
if(this.master&&this.master.minimumUpdatePeriod){_window2.default.setTimeout(function(){_this5.trigger('minimumUpdatePeriod');},this.master.minimumUpdatePeriod);}}/**
     * Sends request to refresh the master xml and updates the parsed master manifest
     * TODO: Does the client offset need to be recalculated when the xml is refreshed?
     */},{key:'refreshXml_',value:function refreshXml_(){var _this6=this;// The srcUrl here *may* need to pass through handleManifestsRedirects when
// sidx is implemented
this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(error,req){// disposed
if(!_this6.request){return;}// clear the loader's request reference
_this6.request=null;if(error){_this6.error={status:req.status,message:'DASH playlist request error at URL: '+_this6.srcUrl,responseText:req.responseText,// MEDIA_ERR_NETWORK
code:2};if(_this6.state==='HAVE_NOTHING'){_this6.started=false;}return _this6.trigger('error');}_this6.masterXml_=req.responseText;var newMaster=_this6.parseMasterXml();var updatedMaster=updateMaster$1(_this6.master,newMaster);if(updatedMaster){_this6.master=updatedMaster;}_window2.default.setTimeout(function(){_this6.trigger('minimumUpdatePeriod');},_this6.master.minimumUpdatePeriod);});}/**
     * Refreshes the media playlist by re-parsing the master xml and updating playlist
     * references. If this is an alternate loader, the updated parsed manifest is retrieved
     * from the master loader.
     */},{key:'refreshMedia_',value:function refreshMedia_(){var _this7=this;var oldMaster=void 0;var newMaster=void 0;if(this.masterPlaylistLoader_){oldMaster=this.masterPlaylistLoader_.master;newMaster=this.masterPlaylistLoader_.parseMasterXml();}else{oldMaster=this.master;newMaster=this.parseMasterXml();}var updatedMaster=updateMaster$1(oldMaster,newMaster);if(updatedMaster){if(this.masterPlaylistLoader_){this.masterPlaylistLoader_.master=updatedMaster;}else{this.master=updatedMaster;}this.media_=updatedMaster.playlists[this.media_.uri];}else{this.trigger('playlistunchanged');}if(!this.media().endList){this.mediaUpdateTimeout=_window2.default.setTimeout(function(){_this7.trigger('mediaupdatetimeout');},refreshDelay(this.media(),!!updatedMaster));}this.trigger('loadedplaylist');}}]);return DashPlaylistLoader;}(EventTarget$1$1);var logger=function logger(source){if(videojs$1.log.debug){return videojs$1.log.debug.bind(videojs$1,'VHS:',source+' >');}return function(){};};function noop(){}/**
 * @file source-updater.js
 *//**
 * A queue of callbacks to be serialized and applied when a
 * MediaSource and its associated SourceBuffers are not in the
 * updating state. It is used by the segment loader to update the
 * underlying SourceBuffers when new data is loaded, for instance.
 *
 * @class SourceUpdater
 * @param {MediaSource} mediaSource the MediaSource to create the
 * SourceBuffer from
 * @param {String} mimeType the desired MIME type of the underlying
 * SourceBuffer
 * @param {Object} sourceBufferEmitter an event emitter that fires when a source buffer is
 * added to the media source
 */var SourceUpdater=function(){function SourceUpdater(mediaSource,mimeType,type,sourceBufferEmitter){classCallCheck(this,SourceUpdater);this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=mediaSource;this.processedAppend_=false;this.type_=type;this.mimeType_=mimeType;this.logger_=logger('SourceUpdater['+type+']['+mimeType+']');if(mediaSource.readyState==='closed'){mediaSource.addEventListener('sourceopen',this.createSourceBuffer_.bind(this,mimeType,sourceBufferEmitter));}else{this.createSourceBuffer_(mimeType,sourceBufferEmitter);}}createClass(SourceUpdater,[{key:'createSourceBuffer_',value:function createSourceBuffer_(mimeType,sourceBufferEmitter){var _this=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(mimeType);this.logger_('created SourceBuffer');if(sourceBufferEmitter){sourceBufferEmitter.trigger('sourcebufferadded');if(this.mediaSource.sourceBuffers.length<2){// There's another source buffer we must wait for before we can start updating
// our own (or else we can get into a bad state, i.e., appending video/audio data
// before the other video/audio source buffer is available and leading to a video
// or audio only buffer).
sourceBufferEmitter.on('sourcebufferadded',function(){_this.start_();});return;}}this.start_();}},{key:'start_',value:function start_(){var _this2=this;this.started_=true;// run completion handlers and process callbacks as updateend
// events fire
this.onUpdateendCallback_=function(){var pendingCallback=_this2.pendingCallback_;_this2.pendingCallback_=null;_this2.logger_('buffered ['+printableRange(_this2.buffered())+']');if(pendingCallback){pendingCallback();}_this2.runCallback_();};this.sourceBuffer_.addEventListener('updateend',this.onUpdateendCallback_);this.runCallback_();}/**
     * Aborts the current segment and resets the segment parser.
     *
     * @param {Function} done function to call when done
     * @see http://w3c.github.io/media-source/#widl-SourceBuffer-abort-void
     */},{key:'abort',value:function abort(done){var _this3=this;if(this.processedAppend_){this.queueCallback_(function(){_this3.sourceBuffer_.abort();},done);}}/**
     * Queue an update to append an ArrayBuffer.
     *
     * @param {ArrayBuffer} bytes
     * @param {Function} done the function to call when done
     * @see http://www.w3.org/TR/media-source/#widl-SourceBuffer-appendBuffer-void-ArrayBuffer-data
     */},{key:'appendBuffer',value:function appendBuffer(config,done){var _this4=this;this.processedAppend_=true;this.queueCallback_(function(){if(config.videoSegmentTimingInfoCallback){_this4.sourceBuffer_.addEventListener('videoSegmentTimingInfo',config.videoSegmentTimingInfoCallback);}_this4.sourceBuffer_.appendBuffer(config.bytes);},function(){if(config.videoSegmentTimingInfoCallback){_this4.sourceBuffer_.removeEventListener('videoSegmentTimingInfo',config.videoSegmentTimingInfoCallback);}done();});}/**
     * Indicates what TimeRanges are buffered in the managed SourceBuffer.
     *
     * @see http://www.w3.org/TR/media-source/#widl-SourceBuffer-buffered
     */},{key:'buffered',value:function buffered(){if(!this.sourceBuffer_){return videojs$1.createTimeRanges();}return this.sourceBuffer_.buffered;}/**
     * Queue an update to remove a time range from the buffer.
     *
     * @param {Number} start where to start the removal
     * @param {Number} end where to end the removal
     * @param {Function} [done=noop] optional callback to be executed when the remove
     * operation is complete
     * @see http://www.w3.org/TR/media-source/#widl-SourceBuffer-remove-void-double-start-unrestricted-double-end
     */},{key:'remove',value:function remove(start,end){var _this5=this;var done=arguments.length>2&&arguments[2]!==undefined?arguments[2]:noop;if(this.processedAppend_){this.queueCallback_(function(){_this5.logger_('remove ['+start+' => '+end+']');_this5.sourceBuffer_.remove(start,end);},done);}}/**
     * Whether the underlying sourceBuffer is updating or not
     *
     * @return {Boolean} the updating status of the SourceBuffer
     */},{key:'updating',value:function updating(){// we are updating if the sourcebuffer is updating or
return!this.sourceBuffer_||this.sourceBuffer_.updating||// if we have a pending callback that is not our internal noop
!!this.pendingCallback_&&this.pendingCallback_!==noop;}/**
     * Set/get the timestampoffset on the SourceBuffer
     *
     * @return {Number} the timestamp offset
     */},{key:'timestampOffset',value:function timestampOffset(offset){var _this6=this;if(typeof offset!=='undefined'){this.queueCallback_(function(){_this6.sourceBuffer_.timestampOffset=offset;});this.timestampOffset_=offset;}return this.timestampOffset_;}/**
     * Queue a callback to run
     */},{key:'queueCallback_',value:function queueCallback_(callback,done){this.callbacks_.push([callback.bind(this),done]);this.runCallback_();}/**
     * Run a queued callback
     */},{key:'runCallback_',value:function runCallback_(){var callbacks=void 0;if(!this.updating()&&this.callbacks_.length&&this.started_){callbacks=this.callbacks_.shift();this.pendingCallback_=callbacks[1];callbacks[0]();}}/**
     * dispose of the source updater and the underlying sourceBuffer
     */},{key:'dispose',value:function dispose(){this.sourceBuffer_.removeEventListener('updateend',this.onUpdateendCallback_);if(this.sourceBuffer_&&this.mediaSource.readyState==='open'){this.sourceBuffer_.abort();}}}]);return SourceUpdater;}();var Config={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,// 0.5 MB/s
INITIAL_BANDWIDTH:4194304,// A fudge factor to apply to advertised playlist bitrates to account for
// temporary flucations in client bandwidth
BANDWIDTH_VARIANCE:1.2,// How much of the buffer must be filled before we consider upswitching
BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1};var REQUEST_ERRORS={FAILURE:2,TIMEOUT:-101,ABORTED:-102};/**
 * Turns segment byterange into a string suitable for use in
 * HTTP Range requests
 *
 * @param {Object} byterange - an object with two values defining the start and end
 *                             of a byte-range
 */var byterangeStr=function byterangeStr(byterange){var byterangeStart=void 0;var byterangeEnd=void 0;// `byterangeEnd` is one less than `offset + length` because the HTTP range
// header uses inclusive ranges
byterangeEnd=byterange.offset+byterange.length-1;byterangeStart=byterange.offset;return'bytes='+byterangeStart+'-'+byterangeEnd;};/**
 * Defines headers for use in the xhr request for a particular segment.
 *
 * @param {Object} segment - a simplified copy of the segmentInfo object
 *                           from SegmentLoader
 */var segmentXhrHeaders=function segmentXhrHeaders(segment){var headers={};if(segment.byterange){headers.Range=byterangeStr(segment.byterange);}return headers;};/**
 * Abort all requests
 *
 * @param {Object} activeXhrs - an object that tracks all XHR requests
 */var abortAll=function abortAll(activeXhrs){activeXhrs.forEach(function(xhr$$1){xhr$$1.abort();});};/**
 * Gather important bandwidth stats once a request has completed
 *
 * @param {Object} request - the XHR request from which to gather stats
 */var getRequestStats=function getRequestStats(request){return{bandwidth:request.bandwidth,bytesReceived:request.bytesReceived||0,roundTripTime:request.roundTripTime||0};};/**
 * If possible gather bandwidth stats as a request is in
 * progress
 *
 * @param {Event} progressEvent - an event object from an XHR's progress event
 */var getProgressStats=function getProgressStats(progressEvent){var request=progressEvent.target;var roundTripTime=Date.now()-request.requestTime;var stats={bandwidth:Infinity,bytesReceived:0,roundTripTime:roundTripTime||0};stats.bytesReceived=progressEvent.loaded;// This can result in Infinity if stats.roundTripTime is 0 but that is ok
// because we should only use bandwidth stats on progress to determine when
// abort a request early due to insufficient bandwidth
stats.bandwidth=Math.floor(stats.bytesReceived/stats.roundTripTime*8*1000);return stats;};/**
 * Handle all error conditions in one place and return an object
 * with all the information
 *
 * @param {Error|null} error - if non-null signals an error occured with the XHR
 * @param {Object} request -  the XHR request that possibly generated the error
 */var handleErrors=function handleErrors(error,request){if(request.timedout){return{status:request.status,message:'HLS request timed-out at URL: '+request.uri,code:REQUEST_ERRORS.TIMEOUT,xhr:request};}if(request.aborted){return{status:request.status,message:'HLS request aborted at URL: '+request.uri,code:REQUEST_ERRORS.ABORTED,xhr:request};}if(error){return{status:request.status,message:'HLS request errored at URL: '+request.uri,code:REQUEST_ERRORS.FAILURE,xhr:request};}return null;};/**
 * Handle responses for key data and convert the key data to the correct format
 * for the decryption step later
 *
 * @param {Object} segment - a simplified copy of the segmentInfo object
 *                           from SegmentLoader
 * @param {Function} finishProcessingFn - a callback to execute to continue processing
 *                                        this request
 */var handleKeyResponse=function handleKeyResponse(segment,finishProcessingFn){return function(error,request){var response=request.response;var errorObj=handleErrors(error,request);if(errorObj){return finishProcessingFn(errorObj,segment);}if(response.byteLength!==16){return finishProcessingFn({status:request.status,message:'Invalid HLS key at URL: '+request.uri,code:REQUEST_ERRORS.FAILURE,xhr:request},segment);}var view=new DataView(response);segment.key.bytes=new Uint32Array([view.getUint32(0),view.getUint32(4),view.getUint32(8),view.getUint32(12)]);return finishProcessingFn(null,segment);};};/**
 * Handle init-segment responses
 *
 * @param {Object} segment - a simplified copy of the segmentInfo object
 *                           from SegmentLoader
 * @param {Function} finishProcessingFn - a callback to execute to continue processing
 *                                        this request
 */var handleInitSegmentResponse=function handleInitSegmentResponse(segment,captionParser,finishProcessingFn){return function(error,request){var response=request.response;var errorObj=handleErrors(error,request);if(errorObj){return finishProcessingFn(errorObj,segment);}// stop processing if received empty content
if(response.byteLength===0){return finishProcessingFn({status:request.status,message:'Empty HLS segment content at URL: '+request.uri,code:REQUEST_ERRORS.FAILURE,xhr:request},segment);}segment.map.bytes=new Uint8Array(request.response);// Initialize CaptionParser if it hasn't been yet
if(!captionParser.isInitialized()){captionParser.init();}segment.map.timescales=_probe2.default.timescale(segment.map.bytes);segment.map.videoTrackIds=_probe2.default.videoTrackIds(segment.map.bytes);return finishProcessingFn(null,segment);};};/**
 * Response handler for segment-requests being sure to set the correct
 * property depending on whether the segment is encryped or not
 * Also records and keeps track of stats that are used for ABR purposes
 *
 * @param {Object} segment - a simplified copy of the segmentInfo object
 *                           from SegmentLoader
 * @param {Function} finishProcessingFn - a callback to execute to continue processing
 *                                        this request
 */var handleSegmentResponse=function handleSegmentResponse(segment,captionParser,finishProcessingFn){return function(error,request){var response=request.response;var errorObj=handleErrors(error,request);var parsed=void 0;if(errorObj){return finishProcessingFn(errorObj,segment);}// stop processing if received empty content
if(response.byteLength===0){return finishProcessingFn({status:request.status,message:'Empty HLS segment content at URL: '+request.uri,code:REQUEST_ERRORS.FAILURE,xhr:request},segment);}segment.stats=getRequestStats(request);if(segment.key){segment.encryptedBytes=new Uint8Array(request.response);}else{segment.bytes=new Uint8Array(request.response);}// This is likely an FMP4 and has the init segment.
// Run through the CaptionParser in case there are captions.
if(segment.map&&segment.map.bytes){// Initialize CaptionParser if it hasn't been yet
if(!captionParser.isInitialized()){captionParser.init();}parsed=captionParser.parse(segment.bytes,segment.map.videoTrackIds,segment.map.timescales);if(parsed&&parsed.captions){segment.captionStreams=parsed.captionStreams;segment.fmp4Captions=parsed.captions;}}return finishProcessingFn(null,segment);};};/**
 * Decrypt the segment via the decryption web worker
 *
 * @param {WebWorker} decrypter - a WebWorker interface to AES-128 decryption routines
 * @param {Object} segment - a simplified copy of the segmentInfo object
 *                           from SegmentLoader
 * @param {Function} doneFn - a callback that is executed after decryption has completed
 */var decryptSegment=function decryptSegment(decrypter,segment,doneFn){var decryptionHandler=function decryptionHandler(event){if(event.data.source===segment.requestId){decrypter.removeEventListener('message',decryptionHandler);var decrypted=event.data.decrypted;segment.bytes=new Uint8Array(decrypted.bytes,decrypted.byteOffset,decrypted.byteLength);return doneFn(null,segment);}};decrypter.addEventListener('message',decryptionHandler);// this is an encrypted segment
// incrementally decrypt the segment
decrypter.postMessage(createTransferableMessage({source:segment.requestId,encrypted:segment.encryptedBytes,key:segment.key.bytes,iv:segment.key.iv}),[segment.encryptedBytes.buffer,segment.key.bytes.buffer]);};/**
 * This function waits for all XHRs to finish (with either success or failure)
 * before continueing processing via it's callback. The function gathers errors
 * from each request into a single errors array so that the error status for
 * each request can be examined later.
 *
 * @param {Object} activeXhrs - an object that tracks all XHR requests
 * @param {WebWorker} decrypter - a WebWorker interface to AES-128 decryption routines
 * @param {Function} doneFn - a callback that is executed after all resources have been
 *                            downloaded and any decryption completed
 */var waitForCompletion=function waitForCompletion(activeXhrs,decrypter,doneFn){var count=0;var didError=false;return function(error,segment){if(didError){return;}if(error){didError=true;// If there are errors, we have to abort any outstanding requests
abortAll(activeXhrs);// Even though the requests above are aborted, and in theory we could wait until we
// handle the aborted events from those requests, there are some cases where we may
// never get an aborted event. For instance, if the network connection is lost and
// there were two requests, the first may have triggered an error immediately, while
// the second request remains unsent. In that case, the aborted algorithm will not
// trigger an abort: see https://xhr.spec.whatwg.org/#the-abort()-method
//
// We also can't rely on the ready state of the XHR, since the request that
// triggered the connection error may also show as a ready state of 0 (unsent).
// Therefore, we have to finish this group of requests immediately after the first
// seen error.
return doneFn(error,segment);}count+=1;if(count===activeXhrs.length){// Keep track of when *all* of the requests have completed
segment.endOfAllRequests=Date.now();if(segment.encryptedBytes){return decryptSegment(decrypter,segment,doneFn);}// Otherwise, everything is ready just continue
return doneFn(null,segment);}};};/**
 * Simple progress event callback handler that gathers some stats before
 * executing a provided callback with the `segment` object
 *
 * @param {Object} segment - a simplified copy of the segmentInfo object
 *                           from SegmentLoader
 * @param {Function} progressFn - a callback that is executed each time a progress event
 *                                is received
 * @param {Event} event - the progress event object from XMLHttpRequest
 */var handleProgress=function handleProgress(segment,progressFn){return function(event){segment.stats=videojs$1.mergeOptions(segment.stats,getProgressStats(event));// record the time that we receive the first byte of data
if(!segment.stats.firstBytesReceivedAt&&segment.stats.bytesReceived){segment.stats.firstBytesReceivedAt=Date.now();}return progressFn(event,segment);};};/**
 * Load all resources and does any processing necessary for a media-segment
 *
 * Features:
 *   decrypts the media-segment if it has a key uri and an iv
 *   aborts *all* requests if *any* one request fails
 *
 * The segment object, at minimum, has the following format:
 * {
 *   resolvedUri: String,
 *   [byterange]: {
 *     offset: Number,
 *     length: Number
 *   },
 *   [key]: {
 *     resolvedUri: String
 *     [byterange]: {
 *       offset: Number,
 *       length: Number
 *     },
 *     iv: {
 *       bytes: Uint32Array
 *     }
 *   },
 *   [map]: {
 *     resolvedUri: String,
 *     [byterange]: {
 *       offset: Number,
 *       length: Number
 *     },
 *     [bytes]: Uint8Array
 *   }
 * }
 * ...where [name] denotes optional properties
 *
 * @param {Function} xhr - an instance of the xhr wrapper in xhr.js
 * @param {Object} xhrOptions - the base options to provide to all xhr requests
 * @param {WebWorker} decryptionWorker - a WebWorker interface to AES-128
 *                                       decryption routines
 * @param {Object} segment - a simplified copy of the segmentInfo object
 *                           from SegmentLoader
 * @param {Function} progressFn - a callback that receives progress events from the main
 *                                segment's xhr request
 * @param {Function} doneFn - a callback that is executed only once all requests have
 *                            succeeded or failed
 * @returns {Function} a function that, when invoked, immediately aborts all
 *                     outstanding requests
 */var mediaSegmentRequest=function mediaSegmentRequest(xhr$$1,xhrOptions,decryptionWorker,captionParser,segment,progressFn,doneFn){var activeXhrs=[];var finishProcessingFn=waitForCompletion(activeXhrs,decryptionWorker,doneFn);// optionally, request the decryption key
if(segment.key){var keyRequestOptions=videojs$1.mergeOptions(xhrOptions,{uri:segment.key.resolvedUri,responseType:'arraybuffer'});var keyRequestCallback=handleKeyResponse(segment,finishProcessingFn);var keyXhr=xhr$$1(keyRequestOptions,keyRequestCallback);activeXhrs.push(keyXhr);}// optionally, request the associated media init segment
if(segment.map&&!segment.map.bytes){var initSegmentOptions=videojs$1.mergeOptions(xhrOptions,{uri:segment.map.resolvedUri,responseType:'arraybuffer',headers:segmentXhrHeaders(segment.map)});var initSegmentRequestCallback=handleInitSegmentResponse(segment,captionParser,finishProcessingFn);var initSegmentXhr=xhr$$1(initSegmentOptions,initSegmentRequestCallback);activeXhrs.push(initSegmentXhr);}var segmentRequestOptions=videojs$1.mergeOptions(xhrOptions,{uri:segment.resolvedUri,responseType:'arraybuffer',headers:segmentXhrHeaders(segment)});var segmentRequestCallback=handleSegmentResponse(segment,captionParser,finishProcessingFn);var segmentXhr=xhr$$1(segmentRequestOptions,segmentRequestCallback);segmentXhr.addEventListener('progress',handleProgress(segment,progressFn));activeXhrs.push(segmentXhr);return function(){return abortAll(activeXhrs);};};// Utilities
/**
 * Returns the CSS value for the specified property on an element
 * using `getComputedStyle`. Firefox has a long-standing issue where
 * getComputedStyle() may return null when running in an iframe with
 * `display: none`.
 *
 * @see https://bugzilla.mozilla.org/show_bug.cgi?id=548397
 * @param {HTMLElement} el the htmlelement to work on
 * @param {string} the proprety to get the style for
 */var safeGetComputedStyle=function safeGetComputedStyle(el,property){var result=void 0;if(!el){return'';}result=_window2.default.getComputedStyle(el);if(!result){return'';}return result[property];};/**
 * Resuable stable sort function
 *
 * @param {Playlists} array
 * @param {Function} sortFn Different comparators
 * @function stableSort
 */var stableSort=function stableSort(array,sortFn){var newArray=array.slice();array.sort(function(left,right){var cmp=sortFn(left,right);if(cmp===0){return newArray.indexOf(left)-newArray.indexOf(right);}return cmp;});};/**
 * A comparator function to sort two playlist object by bandwidth.
 *
 * @param {Object} left a media playlist object
 * @param {Object} right a media playlist object
 * @return {Number} Greater than zero if the bandwidth attribute of
 * left is greater than the corresponding attribute of right. Less
 * than zero if the bandwidth of right is greater than left and
 * exactly zero if the two are equal.
 */var comparePlaylistBandwidth=function comparePlaylistBandwidth(left,right){var leftBandwidth=void 0;var rightBandwidth=void 0;if(left.attributes.BANDWIDTH){leftBandwidth=left.attributes.BANDWIDTH;}leftBandwidth=leftBandwidth||_window2.default.Number.MAX_VALUE;if(right.attributes.BANDWIDTH){rightBandwidth=right.attributes.BANDWIDTH;}rightBandwidth=rightBandwidth||_window2.default.Number.MAX_VALUE;return leftBandwidth-rightBandwidth;};/**
 * A comparator function to sort two playlist object by resolution (width).
 * @param {Object} left a media playlist object
 * @param {Object} right a media playlist object
 * @return {Number} Greater than zero if the resolution.width attribute of
 * left is greater than the corresponding attribute of right. Less
 * than zero if the resolution.width of right is greater than left and
 * exactly zero if the two are equal.
 */var comparePlaylistResolution=function comparePlaylistResolution(left,right){var leftWidth=void 0;var rightWidth=void 0;if(left.attributes.RESOLUTION&&left.attributes.RESOLUTION.width){leftWidth=left.attributes.RESOLUTION.width;}leftWidth=leftWidth||_window2.default.Number.MAX_VALUE;if(right.attributes.RESOLUTION&&right.attributes.RESOLUTION.width){rightWidth=right.attributes.RESOLUTION.width;}rightWidth=rightWidth||_window2.default.Number.MAX_VALUE;// NOTE - Fallback to bandwidth sort as appropriate in cases where multiple renditions
// have the same media dimensions/ resolution
if(leftWidth===rightWidth&&left.attributes.BANDWIDTH&&right.attributes.BANDWIDTH){return left.attributes.BANDWIDTH-right.attributes.BANDWIDTH;}return leftWidth-rightWidth;};/**
 * Chooses the appropriate media playlist based on bandwidth and player size
 *
 * @param {Object} master
 *        Object representation of the master manifest
 * @param {Number} playerBandwidth
 *        Current calculated bandwidth of the player
 * @param {Number} playerWidth
 *        Current width of the player element
 * @param {Number} playerHeight
 *        Current height of the player element
 * @param {Boolean} limitRenditionByPlayerDimensions
 *        True if the player width and height should be used during the selection, false otherwise
 * @return {Playlist} the highest bitrate playlist less than the
 * currently detected bandwidth, accounting for some amount of
 * bandwidth variance
 */var simpleSelector=function simpleSelector(master,playerBandwidth,playerWidth,playerHeight,limitRenditionByPlayerDimensions){// convert the playlists to an intermediary representation to make comparisons easier
var sortedPlaylistReps=master.playlists.map(function(playlist){var width=void 0;var height=void 0;var bandwidth=void 0;width=playlist.attributes.RESOLUTION&&playlist.attributes.RESOLUTION.width;height=playlist.attributes.RESOLUTION&&playlist.attributes.RESOLUTION.height;bandwidth=playlist.attributes.BANDWIDTH;bandwidth=bandwidth||_window2.default.Number.MAX_VALUE;return{bandwidth:bandwidth,width:width,height:height,playlist:playlist};});stableSort(sortedPlaylistReps,function(left,right){return left.bandwidth-right.bandwidth;});// filter out any playlists that have been excluded due to
// incompatible configurations
sortedPlaylistReps=sortedPlaylistReps.filter(function(rep){return!Playlist.isIncompatible(rep.playlist);});// filter out any playlists that have been disabled manually through the representations
// api or blacklisted temporarily due to playback errors.
var enabledPlaylistReps=sortedPlaylistReps.filter(function(rep){return Playlist.isEnabled(rep.playlist);});if(!enabledPlaylistReps.length){// if there are no enabled playlists, then they have all been blacklisted or disabled
// by the user through the representations api. In this case, ignore blacklisting and
// fallback to what the user wants by using playlists the user has not disabled.
enabledPlaylistReps=sortedPlaylistReps.filter(function(rep){return!Playlist.isDisabled(rep.playlist);});}// filter out any variant that has greater effective bitrate
// than the current estimated bandwidth
var bandwidthPlaylistReps=enabledPlaylistReps.filter(function(rep){return rep.bandwidth*Config.BANDWIDTH_VARIANCE<playerBandwidth;});var highestRemainingBandwidthRep=bandwidthPlaylistReps[bandwidthPlaylistReps.length-1];// get all of the renditions with the same (highest) bandwidth
// and then taking the very first element
var bandwidthBestRep=bandwidthPlaylistReps.filter(function(rep){return rep.bandwidth===highestRemainingBandwidthRep.bandwidth;})[0];// if we're not going to limit renditions by player size, make an early decision.
if(limitRenditionByPlayerDimensions===false){var _chosenRep=bandwidthBestRep||enabledPlaylistReps[0]||sortedPlaylistReps[0];return _chosenRep?_chosenRep.playlist:null;}// filter out playlists without resolution information
var haveResolution=bandwidthPlaylistReps.filter(function(rep){return rep.width&&rep.height;});// sort variants by resolution
stableSort(haveResolution,function(left,right){return left.width-right.width;});// if we have the exact resolution as the player use it
var resolutionBestRepList=haveResolution.filter(function(rep){return rep.width===playerWidth&&rep.height===playerHeight;});highestRemainingBandwidthRep=resolutionBestRepList[resolutionBestRepList.length-1];// ensure that we pick the highest bandwidth variant that have exact resolution
var resolutionBestRep=resolutionBestRepList.filter(function(rep){return rep.bandwidth===highestRemainingBandwidthRep.bandwidth;})[0];var resolutionPlusOneList=void 0;var resolutionPlusOneSmallest=void 0;var resolutionPlusOneRep=void 0;// find the smallest variant that is larger than the player
// if there is no match of exact resolution
if(!resolutionBestRep){resolutionPlusOneList=haveResolution.filter(function(rep){return rep.width>playerWidth||rep.height>playerHeight;});// find all the variants have the same smallest resolution
resolutionPlusOneSmallest=resolutionPlusOneList.filter(function(rep){return rep.width===resolutionPlusOneList[0].width&&rep.height===resolutionPlusOneList[0].height;});// ensure that we also pick the highest bandwidth variant that
// is just-larger-than the video player
highestRemainingBandwidthRep=resolutionPlusOneSmallest[resolutionPlusOneSmallest.length-1];resolutionPlusOneRep=resolutionPlusOneSmallest.filter(function(rep){return rep.bandwidth===highestRemainingBandwidthRep.bandwidth;})[0];}// fallback chain of variants
var chosenRep=resolutionPlusOneRep||resolutionBestRep||bandwidthBestRep||enabledPlaylistReps[0]||sortedPlaylistReps[0];return chosenRep?chosenRep.playlist:null;};// Playlist Selectors
/**
 * Chooses the appropriate media playlist based on the most recent
 * bandwidth estimate and the player size.
 *
 * Expects to be called within the context of an instance of HlsHandler
 *
 * @return {Playlist} the highest bitrate playlist less than the
 * currently detected bandwidth, accounting for some amount of
 * bandwidth variance
 */var lastBandwidthSelector=function lastBandwidthSelector(){return simpleSelector(this.playlists.master,this.systemBandwidth,parseInt(safeGetComputedStyle(this.tech_.el(),'width'),10),parseInt(safeGetComputedStyle(this.tech_.el(),'height'),10),this.limitRenditionByPlayerDimensions);};/**
 * Chooses the appropriate media playlist based on the potential to rebuffer
 *
 * @param {Object} settings
 *        Object of information required to use this selector
 * @param {Object} settings.master
 *        Object representation of the master manifest
 * @param {Number} settings.currentTime
 *        The current time of the player
 * @param {Number} settings.bandwidth
 *        Current measured bandwidth
 * @param {Number} settings.duration
 *        Duration of the media
 * @param {Number} settings.segmentDuration
 *        Segment duration to be used in round trip time calculations
 * @param {Number} settings.timeUntilRebuffer
 *        Time left in seconds until the player has to rebuffer
 * @param {Number} settings.currentTimeline
 *        The current timeline segments are being loaded from
 * @param {SyncController} settings.syncController
 *        SyncController for determining if we have a sync point for a given playlist
 * @return {Object|null}
 *         {Object} return.playlist
 *         The highest bandwidth playlist with the least amount of rebuffering
 *         {Number} return.rebufferingImpact
 *         The amount of time in seconds switching to this playlist will rebuffer. A
 *         negative value means that switching will cause zero rebuffering.
 */var minRebufferMaxBandwidthSelector=function minRebufferMaxBandwidthSelector(settings){var master=settings.master,currentTime=settings.currentTime,bandwidth=settings.bandwidth,duration$$1=settings.duration,segmentDuration=settings.segmentDuration,timeUntilRebuffer=settings.timeUntilRebuffer,currentTimeline=settings.currentTimeline,syncController=settings.syncController;// filter out any playlists that have been excluded due to
// incompatible configurations
var compatiblePlaylists=master.playlists.filter(function(playlist){return!Playlist.isIncompatible(playlist);});// filter out any playlists that have been disabled manually through the representations
// api or blacklisted temporarily due to playback errors.
var enabledPlaylists=compatiblePlaylists.filter(Playlist.isEnabled);if(!enabledPlaylists.length){// if there are no enabled playlists, then they have all been blacklisted or disabled
// by the user through the representations api. In this case, ignore blacklisting and
// fallback to what the user wants by using playlists the user has not disabled.
enabledPlaylists=compatiblePlaylists.filter(function(playlist){return!Playlist.isDisabled(playlist);});}var bandwidthPlaylists=enabledPlaylists.filter(Playlist.hasAttribute.bind(null,'BANDWIDTH'));var rebufferingEstimates=bandwidthPlaylists.map(function(playlist){var syncPoint=syncController.getSyncPoint(playlist,duration$$1,currentTimeline,currentTime);// If there is no sync point for this playlist, switching to it will require a
// sync request first. This will double the request time
var numRequests=syncPoint?1:2;var requestTimeEstimate=Playlist.estimateSegmentRequestTime(segmentDuration,bandwidth,playlist);var rebufferingImpact=requestTimeEstimate*numRequests-timeUntilRebuffer;return{playlist:playlist,rebufferingImpact:rebufferingImpact};});var noRebufferingPlaylists=rebufferingEstimates.filter(function(estimate){return estimate.rebufferingImpact<=0;});// Sort by bandwidth DESC
stableSort(noRebufferingPlaylists,function(a,b){return comparePlaylistBandwidth(b.playlist,a.playlist);});if(noRebufferingPlaylists.length){return noRebufferingPlaylists[0];}stableSort(rebufferingEstimates,function(a,b){return a.rebufferingImpact-b.rebufferingImpact;});return rebufferingEstimates[0]||null;};/**
 * Chooses the appropriate media playlist, which in this case is the lowest bitrate
 * one with video.  If no renditions with video exist, return the lowest audio rendition.
 *
 * Expects to be called within the context of an instance of HlsHandler
 *
 * @return {Object|null}
 *         {Object} return.playlist
 *         The lowest bitrate playlist that contains a video codec.  If no such rendition
 *         exists pick the lowest audio rendition.
 */var lowestBitrateCompatibleVariantSelector=function lowestBitrateCompatibleVariantSelector(){// filter out any playlists that have been excluded due to
// incompatible configurations or playback errors
var playlists=this.playlists.master.playlists.filter(Playlist.isEnabled);// Sort ascending by bitrate
stableSort(playlists,function(a,b){return comparePlaylistBandwidth(a,b);});// Parse and assume that playlists with no video codec have no video
// (this is not necessarily true, although it is generally true).
//
// If an entire manifest has no valid videos everything will get filtered
// out.
var playlistsWithVideo=playlists.filter(function(playlist){return parseCodecs(playlist.attributes.CODECS).videoCodec;});return playlistsWithVideo[0]||null;};/**
 * Create captions text tracks on video.js if they do not exist
 *
 * @param {Object} inbandTextTracks a reference to current inbandTextTracks
 * @param {Object} tech the video.js tech
 * @param {Object} captionStreams the caption streams to create
 * @private
 */var createCaptionsTrackIfNotExists=function createCaptionsTrackIfNotExists(inbandTextTracks,tech,captionStreams){for(var trackId in captionStreams){if(!inbandTextTracks[trackId]){tech.trigger({type:'usage',name:'hls-608'});var track=tech.textTracks().getTrackById(trackId);if(track){// Resuse an existing track with a CC# id because this was
// very likely created by videojs-contrib-hls from information
// in the m3u8 for us to use
inbandTextTracks[trackId]=track;}else{// Otherwise, create a track with the default `CC#` label and
// without a language
inbandTextTracks[trackId]=tech.addRemoteTextTrack({kind:'captions',id:trackId,label:trackId},false).track;}}}};var addCaptionData=function addCaptionData(_ref){var inbandTextTracks=_ref.inbandTextTracks,captionArray=_ref.captionArray,timestampOffset=_ref.timestampOffset;if(!captionArray){return;}var Cue=window.WebKitDataCue||window.VTTCue;captionArray.forEach(function(caption){var track=caption.stream;var startTime=caption.startTime;var endTime=caption.endTime;if(!inbandTextTracks[track]){return;}startTime+=timestampOffset;endTime+=timestampOffset;inbandTextTracks[track].addCue(new Cue(startTime,endTime,caption.text));});};/**
 * @file segment-loader.js
 */// in ms
var CHECK_BUFFER_DELAY=500;/**
 * Determines if we should call endOfStream on the media source based
 * on the state of the buffer or if appened segment was the final
 * segment in the playlist.
 *
 * @param {Object} playlist a media playlist object
 * @param {Object} mediaSource the MediaSource object
 * @param {Number} segmentIndex the index of segment we last appended
 * @returns {Boolean} do we need to call endOfStream on the MediaSource
 */var detectEndOfStream=function detectEndOfStream(playlist,mediaSource,segmentIndex){if(!playlist||!mediaSource){return false;}var segments=playlist.segments;// determine a few boolean values to help make the branch below easier
// to read
var appendedLastSegment=segmentIndex===segments.length;// if we've buffered to the end of the video, we need to call endOfStream
// so that MediaSources can trigger the `ended` event when it runs out of
// buffered data instead of waiting for me
return playlist.endList&&mediaSource.readyState==='open'&&appendedLastSegment;};var finite=function finite(num){return typeof num==='number'&&isFinite(num);};var illegalMediaSwitch=function illegalMediaSwitch(loaderType,startingMedia,newSegmentMedia){// Although these checks should most likely cover non 'main' types, for now it narrows
// the scope of our checks.
if(loaderType!=='main'||!startingMedia||!newSegmentMedia){return null;}if(!newSegmentMedia.containsAudio&&!newSegmentMedia.containsVideo){return'Neither audio nor video found in segment.';}if(startingMedia.containsVideo&&!newSegmentMedia.containsVideo){return'Only audio found in segment when we expected video.'+' We can\'t switch to audio only from a stream that had video.'+' To get rid of this message, please add codec information to the manifest.';}if(!startingMedia.containsVideo&&newSegmentMedia.containsVideo){return'Video found in segment when we expected only audio.'+' We can\'t switch to a stream with video from an audio only stream.'+' To get rid of this message, please add codec information to the manifest.';}return null;};/**
 * Calculates a time value that is safe to remove from the back buffer without interupting
 * playback.
 *
 * @param {TimeRange} seekable
 *        The current seekable range
 * @param {Number} currentTime
 *        The current time of the player
 * @param {Number} targetDuration
 *        The target duration of the current playlist
 * @return {Number}
 *         Time that is safe to remove from the back buffer without interupting playback
 */var safeBackBufferTrimTime=function safeBackBufferTrimTime(seekable$$1,currentTime,targetDuration){var removeToTime=void 0;if(seekable$$1.length&&seekable$$1.start(0)>0&&seekable$$1.start(0)<currentTime){// If we have a seekable range use that as the limit for what can be removed safely
removeToTime=seekable$$1.start(0);}else{// otherwise remove anything older than 30 seconds before the current play head
removeToTime=currentTime-30;}// Don't allow removing from the buffer within target duration of current time
// to avoid the possibility of removing the GOP currently being played which could
// cause playback stalls.
return Math.min(removeToTime,currentTime-targetDuration);};var segmentInfoString=function segmentInfoString(segmentInfo){var _segmentInfo$segment=segmentInfo.segment,start=_segmentInfo$segment.start,end=_segmentInfo$segment.end,_segmentInfo$playlist=segmentInfo.playlist,seq=_segmentInfo$playlist.mediaSequence,id=_segmentInfo$playlist.id,_segmentInfo$playlist2=_segmentInfo$playlist.segments,segments=_segmentInfo$playlist2===undefined?[]:_segmentInfo$playlist2,index=segmentInfo.mediaIndex,timeline=segmentInfo.timeline;return['appending ['+index+'] of ['+seq+', '+(seq+segments.length)+'] from playlist ['+id+']','['+start+' => '+end+'] in timeline ['+timeline+']'].join(' ');};/**
 * An object that manages segment loading and appending.
 *
 * @class SegmentLoader
 * @param {Object} options required and optional options
 * @extends videojs.EventTarget
 */var SegmentLoader=function(_videojs$EventTarget){inherits(SegmentLoader,_videojs$EventTarget);function SegmentLoader(settings){classCallCheck(this,SegmentLoader);// check pre-conditions
var _this=possibleConstructorReturn(this,(SegmentLoader.__proto__||Object.getPrototypeOf(SegmentLoader)).call(this));if(!settings){throw new TypeError('Initialization settings are required');}if(typeof settings.currentTime!=='function'){throw new TypeError('No currentTime getter specified');}if(!settings.mediaSource){throw new TypeError('No MediaSource specified');}// public properties
_this.bandwidth=settings.bandwidth;_this.throughput={rate:0,count:0};_this.roundTrip=NaN;_this.resetStats_();_this.mediaIndex=null;// private settings
_this.hasPlayed_=settings.hasPlayed;_this.currentTime_=settings.currentTime;_this.seekable_=settings.seekable;_this.seeking_=settings.seeking;_this.duration_=settings.duration;_this.mediaSource_=settings.mediaSource;_this.hls_=settings.hls;_this.loaderType_=settings.loaderType;_this.startingMedia_=void 0;_this.segmentMetadataTrack_=settings.segmentMetadataTrack;_this.goalBufferLength_=settings.goalBufferLength;_this.sourceType_=settings.sourceType;_this.inbandTextTracks_=settings.inbandTextTracks;_this.state_='INIT';// private instance variables
_this.checkBufferTimeout_=null;_this.error_=void 0;_this.currentTimeline_=-1;_this.pendingSegment_=null;_this.mimeType_=null;_this.sourceUpdater_=null;_this.xhrOptions_=null;// Fragmented mp4 playback
_this.activeInitSegmentId_=null;_this.initSegments_={};// Fmp4 CaptionParser
_this.captionParser_=new _mp.CaptionParser();_this.decrypter_=settings.decrypter;// Manages the tracking and generation of sync-points, mappings
// between a time in the display time and a segment index within
// a playlist
_this.syncController_=settings.syncController;_this.syncPoint_={segmentIndex:0,time:0};_this.syncController_.on('syncinfoupdate',function(){return _this.trigger('syncinfoupdate');});_this.mediaSource_.addEventListener('sourceopen',function(){return _this.ended_=false;});// ...for determining the fetch location
_this.fetchAtBuffer_=false;_this.logger_=logger('SegmentLoader['+_this.loaderType_+']');Object.defineProperty(_this,'state',{get:function get$$1(){return this.state_;},set:function set$$1(newState){if(newState!==this.state_){this.logger_(this.state_+' -> '+newState);this.state_=newState;}}});return _this;}/**
   * reset all of our media stats
   *
   * @private
   */createClass(SegmentLoader,[{key:'resetStats_',value:function resetStats_(){this.mediaBytesTransferred=0;this.mediaRequests=0;this.mediaRequestsAborted=0;this.mediaRequestsTimedout=0;this.mediaRequestsErrored=0;this.mediaTransferDuration=0;this.mediaSecondsLoaded=0;}/**
     * dispose of the SegmentLoader and reset to the default state
     */},{key:'dispose',value:function dispose(){this.state='DISPOSED';this.pause();this.abort_();if(this.sourceUpdater_){this.sourceUpdater_.dispose();}this.resetStats_();this.captionParser_.reset();}/**
     * abort anything that is currently doing on with the SegmentLoader
     * and reset to a default state
     */},{key:'abort',value:function abort(){if(this.state!=='WAITING'){if(this.pendingSegment_){this.pendingSegment_=null;}return;}this.abort_();// We aborted the requests we were waiting on, so reset the loader's state to READY
// since we are no longer "waiting" on any requests. XHR callback is not always run
// when the request is aborted. This will prevent the loader from being stuck in the
// WAITING state indefinitely.
this.state='READY';// don't wait for buffer check timeouts to begin fetching the
// next segment
if(!this.paused()){this.monitorBuffer_();}}/**
     * abort all pending xhr requests and null any pending segements
     *
     * @private
     */},{key:'abort_',value:function abort_(){if(this.pendingSegment_){this.pendingSegment_.abortRequests();}// clear out the segment being processed
this.pendingSegment_=null;}/**
     * set an error on the segment loader and null out any pending segements
     *
     * @param {Error} error the error to set on the SegmentLoader
     * @return {Error} the error that was set or that is currently set
     */},{key:'error',value:function error(_error){if(typeof _error!=='undefined'){this.error_=_error;}this.pendingSegment_=null;return this.error_;}},{key:'endOfStream',value:function endOfStream(){this.ended_=true;this.pause();this.trigger('ended');}/**
     * Indicates which time ranges are buffered
     *
     * @return {TimeRange}
     *         TimeRange object representing the current buffered ranges
     */},{key:'buffered_',value:function buffered_(){if(!this.sourceUpdater_){return videojs$1.createTimeRanges();}return this.sourceUpdater_.buffered();}/**
     * Gets and sets init segment for the provided map
     *
     * @param {Object} map
     *        The map object representing the init segment to get or set
     * @param {Boolean=} set
     *        If true, the init segment for the provided map should be saved
     * @return {Object}
     *         map object for desired init segment
     */},{key:'initSegment',value:function initSegment(map){var set$$1=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!map){return null;}var id=initSegmentId(map);var storedMap=this.initSegments_[id];if(set$$1&&!storedMap&&map.bytes){this.initSegments_[id]=storedMap={resolvedUri:map.resolvedUri,byterange:map.byterange,bytes:map.bytes,timescales:map.timescales,videoTrackIds:map.videoTrackIds};}return storedMap||map;}/**
     * Returns true if all configuration required for loading is present, otherwise false.
     *
     * @return {Boolean} True if the all configuration is ready for loading
     * @private
     */},{key:'couldBeginLoading_',value:function couldBeginLoading_(){return this.playlist_&&(// the source updater is created when init_ is called, so either having a
// source updater or being in the INIT state with a mimeType is enough
// to say we have all the needed configuration to start loading.
this.sourceUpdater_||this.mimeType_&&this.state==='INIT')&&!this.paused();}/**
     * load a playlist and start to fill the buffer
     */},{key:'load',value:function load(){// un-pause
this.monitorBuffer_();// if we don't have a playlist yet, keep waiting for one to be
// specified
if(!this.playlist_){return;}// not sure if this is the best place for this
this.syncController_.setDateTimeMapping(this.playlist_);// if all the configuration is ready, initialize and begin loading
if(this.state==='INIT'&&this.couldBeginLoading_()){return this.init_();}// if we're in the middle of processing a segment already, don't
// kick off an additional segment request
if(!this.couldBeginLoading_()||this.state!=='READY'&&this.state!=='INIT'){return;}this.state='READY';}/**
     * Once all the starting parameters have been specified, begin
     * operation. This method should only be invoked from the INIT
     * state.
     *
     * @private
     */},{key:'init_',value:function init_(){this.state='READY';this.sourceUpdater_=new SourceUpdater(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_);this.resetEverything();return this.monitorBuffer_();}/**
     * set a playlist on the segment loader
     *
     * @param {PlaylistLoader} media the playlist to set on the segment loader
     */},{key:'playlist',value:function playlist(newPlaylist){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!newPlaylist){return;}var oldPlaylist=this.playlist_;var segmentInfo=this.pendingSegment_;this.playlist_=newPlaylist;this.xhrOptions_=options;// when we haven't started playing yet, the start of a live playlist
// is always our zero-time so force a sync update each time the playlist
// is refreshed from the server
if(!this.hasPlayed_()){newPlaylist.syncInfo={mediaSequence:newPlaylist.mediaSequence,time:0};}var oldId=null;if(oldPlaylist){if(oldPlaylist.id){oldId=oldPlaylist.id;}else if(oldPlaylist.uri){oldId=oldPlaylist.uri;}}this.logger_('playlist update ['+oldId+' => '+(newPlaylist.id||newPlaylist.uri)+']');// in VOD, this is always a rendition switch (or we updated our syncInfo above)
// in LIVE, we always want to update with new playlists (including refreshes)
this.trigger('syncinfoupdate');// if we were unpaused but waiting for a playlist, start
// buffering now
if(this.state==='INIT'&&this.couldBeginLoading_()){return this.init_();}if(!oldPlaylist||oldPlaylist.uri!==newPlaylist.uri){if(this.mediaIndex!==null){// we must "resync" the segment loader when we switch renditions and
// the segment loader is already synced to the previous rendition
this.resyncLoader();}// the rest of this function depends on `oldPlaylist` being defined
return;}// we reloaded the same playlist so we are in a live scenario
// and we will likely need to adjust the mediaIndex
var mediaSequenceDiff=newPlaylist.mediaSequence-oldPlaylist.mediaSequence;this.logger_('live window shift ['+mediaSequenceDiff+']');// update the mediaIndex on the SegmentLoader
// this is important because we can abort a request and this value must be
// equal to the last appended mediaIndex
if(this.mediaIndex!==null){this.mediaIndex-=mediaSequenceDiff;}// update the mediaIndex on the SegmentInfo object
// this is important because we will update this.mediaIndex with this value
// in `handleUpdateEnd_` after the segment has been successfully appended
if(segmentInfo){segmentInfo.mediaIndex-=mediaSequenceDiff;// we need to update the referenced segment so that timing information is
// saved for the new playlist's segment, however, if the segment fell off the
// playlist, we can leave the old reference and just lose the timing info
if(segmentInfo.mediaIndex>=0){segmentInfo.segment=newPlaylist.segments[segmentInfo.mediaIndex];}}this.syncController_.saveExpiredSegmentInfo(oldPlaylist,newPlaylist);}/**
     * Prevent the loader from fetching additional segments. If there
     * is a segment request outstanding, it will finish processing
     * before the loader halts. A segment loader can be unpaused by
     * calling load().
     */},{key:'pause',value:function pause(){if(this.checkBufferTimeout_){_window2.default.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=null;}}/**
     * Returns whether the segment loader is fetching additional
     * segments when given the opportunity. This property can be
     * modified through calls to pause() and load().
     */},{key:'paused',value:function paused(){return this.checkBufferTimeout_===null;}/**
     * create/set the following mimetype on the SourceBuffer through a
     * SourceUpdater
     *
     * @param {String} mimeType the mime type string to use
     * @param {Object} sourceBufferEmitter an event emitter that fires when a source buffer
     * is added to the media source
     */},{key:'mimeType',value:function mimeType(_mimeType,sourceBufferEmitter){if(this.mimeType_){return;}this.mimeType_=_mimeType;this.sourceBufferEmitter_=sourceBufferEmitter;// if we were unpaused but waiting for a sourceUpdater, start
// buffering now
if(this.state==='INIT'&&this.couldBeginLoading_()){this.init_();}}/**
     * Delete all the buffered data and reset the SegmentLoader
     * @param {Function} [done] an optional callback to be executed when the remove
     * operation is complete
     */},{key:'resetEverything',value:function resetEverything(done){this.ended_=false;this.resetLoader();this.remove(0,this.duration_(),done);// clears fmp4 captions
this.captionParser_.clearAllCaptions();this.trigger('reseteverything');}/**
     * Force the SegmentLoader to resync and start loading around the currentTime instead
     * of starting at the end of the buffer
     *
     * Useful for fast quality changes
     */},{key:'resetLoader',value:function resetLoader(){this.fetchAtBuffer_=false;this.resyncLoader();}/**
     * Force the SegmentLoader to restart synchronization and make a conservative guess
     * before returning to the simple walk-forward method
     */},{key:'resyncLoader',value:function resyncLoader(){this.mediaIndex=null;this.syncPoint_=null;this.abort();}/**
     * Remove any data in the source buffer between start and end times
     * @param {Number} start - the start time of the region to remove from the buffer
     * @param {Number} end - the end time of the region to remove from the buffer
     * @param {Function} [done] - an optional callback to be executed when the remove
     * operation is complete
     */},{key:'remove',value:function remove(start,end,done){if(this.sourceUpdater_){this.sourceUpdater_.remove(start,end,done);}removeCuesFromTrack(start,end,this.segmentMetadataTrack_);if(this.inbandTextTracks_){for(var id in this.inbandTextTracks_){removeCuesFromTrack(start,end,this.inbandTextTracks_[id]);}}}/**
     * (re-)schedule monitorBufferTick_ to run as soon as possible
     *
     * @private
     */},{key:'monitorBuffer_',value:function monitorBuffer_(){if(this.checkBufferTimeout_){_window2.default.clearTimeout(this.checkBufferTimeout_);}this.checkBufferTimeout_=_window2.default.setTimeout(this.monitorBufferTick_.bind(this),1);}/**
     * As long as the SegmentLoader is in the READY state, periodically
     * invoke fillBuffer_().
     *
     * @private
     */},{key:'monitorBufferTick_',value:function monitorBufferTick_(){if(this.state==='READY'){this.fillBuffer_();}if(this.checkBufferTimeout_){_window2.default.clearTimeout(this.checkBufferTimeout_);}this.checkBufferTimeout_=_window2.default.setTimeout(this.monitorBufferTick_.bind(this),CHECK_BUFFER_DELAY);}/**
     * fill the buffer with segements unless the sourceBuffers are
     * currently updating
     *
     * Note: this function should only ever be called by monitorBuffer_
     * and never directly
     *
     * @private
     */},{key:'fillBuffer_',value:function fillBuffer_(){if(this.sourceUpdater_.updating()){return;}if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());}// see if we need to begin loading immediately
var segmentInfo=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(!segmentInfo){return;}if(this.isEndOfStream_(segmentInfo.mediaIndex)){this.endOfStream();return;}if(segmentInfo.mediaIndex===this.playlist_.segments.length-1&&this.mediaSource_.readyState==='ended'&&!this.seeking_()){return;}// We will need to change timestampOffset of the sourceBuffer if either of
// the following conditions are true:
// - The segment.timeline !== this.currentTimeline
//   (we are crossing a discontinuity somehow)
// - The "timestampOffset" for the start of this segment is less than
//   the currently set timestampOffset
// Also, clear captions if we are crossing a discontinuity boundary
if(segmentInfo.timeline!==this.currentTimeline_||segmentInfo.startOfSegment!==null&&segmentInfo.startOfSegment<this.sourceUpdater_.timestampOffset()){this.syncController_.reset();segmentInfo.timestampOffset=segmentInfo.startOfSegment;this.captionParser_.clearAllCaptions();}this.loadSegment_(segmentInfo);}/**
     * Determines if this segment loader is at the end of it's stream.
     *
     * @param {Number} mediaIndex the index of segment we last appended
     * @param {Object} [playlist=this.playlist_] a media playlist object
     * @returns {Boolean} true if at end of stream, false otherwise.
     */},{key:'isEndOfStream_',value:function isEndOfStream_(mediaIndex){var playlist=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.playlist_;return detectEndOfStream(playlist,this.mediaSource_,mediaIndex)&&!this.sourceUpdater_.updating();}/**
     * Determines what segment request should be made, given current playback
     * state.
     *
     * @param {TimeRanges} buffered - the state of the buffer
     * @param {Object} playlist - the playlist object to fetch segments from
     * @param {Number} mediaIndex - the previous mediaIndex fetched or null
     * @param {Boolean} hasPlayed - a flag indicating whether we have played or not
     * @param {Number} currentTime - the playback position in seconds
     * @param {Object} syncPoint - a segment info object that describes the
     * @returns {Object} a segment request object that describes the segment to load
     */},{key:'checkBuffer_',value:function checkBuffer_(buffered,playlist,mediaIndex,hasPlayed,currentTime,syncPoint){var lastBufferedEnd=0;var startOfSegment=void 0;if(buffered.length){lastBufferedEnd=buffered.end(buffered.length-1);}var bufferedTime=Math.max(0,lastBufferedEnd-currentTime);if(!playlist.segments.length){return null;}// if there is plenty of content buffered, and the video has
// been played before relax for awhile
if(bufferedTime>=this.goalBufferLength_()){return null;}// if the video has not yet played once, and we already have
// one segment downloaded do nothing
if(!hasPlayed&&bufferedTime>=1){return null;}// When the syncPoint is null, there is no way of determining a good
// conservative segment index to fetch from
// The best thing to do here is to get the kind of sync-point data by
// making a request
if(syncPoint===null){mediaIndex=this.getSyncSegmentCandidate_(playlist);return this.generateSegmentInfo_(playlist,mediaIndex,null,true);}// Under normal playback conditions fetching is a simple walk forward
if(mediaIndex!==null){var segment=playlist.segments[mediaIndex];if(segment&&segment.end){startOfSegment=segment.end;}else{startOfSegment=lastBufferedEnd;}return this.generateSegmentInfo_(playlist,mediaIndex+1,startOfSegment,false);}// There is a sync-point but the lack of a mediaIndex indicates that
// we need to make a good conservative guess about which segment to
// fetch
if(this.fetchAtBuffer_){// Find the segment containing the end of the buffer
var mediaSourceInfo=Playlist.getMediaInfoForTime(playlist,lastBufferedEnd,syncPoint.segmentIndex,syncPoint.time);mediaIndex=mediaSourceInfo.mediaIndex;startOfSegment=mediaSourceInfo.startTime;}else{// Find the segment containing currentTime
var _mediaSourceInfo=Playlist.getMediaInfoForTime(playlist,currentTime,syncPoint.segmentIndex,syncPoint.time);mediaIndex=_mediaSourceInfo.mediaIndex;startOfSegment=_mediaSourceInfo.startTime;}return this.generateSegmentInfo_(playlist,mediaIndex,startOfSegment,false);}/**
     * The segment loader has no recourse except to fetch a segment in the
     * current playlist and use the internal timestamps in that segment to
     * generate a syncPoint. This function returns a good candidate index
     * for that process.
     *
     * @param {Object} playlist - the playlist object to look for a
     * @returns {Number} An index of a segment from the playlist to load
     */},{key:'getSyncSegmentCandidate_',value:function getSyncSegmentCandidate_(playlist){var _this2=this;if(this.currentTimeline_===-1){return 0;}var segmentIndexArray=playlist.segments.map(function(s,i){return{timeline:s.timeline,segmentIndex:i};}).filter(function(s){return s.timeline===_this2.currentTimeline_;});if(segmentIndexArray.length){return segmentIndexArray[Math.min(segmentIndexArray.length-1,1)].segmentIndex;}return Math.max(playlist.segments.length-1,0);}},{key:'generateSegmentInfo_',value:function generateSegmentInfo_(playlist,mediaIndex,startOfSegment,isSyncRequest){if(mediaIndex<0||mediaIndex>=playlist.segments.length){return null;}var segment=playlist.segments[mediaIndex];return{requestId:'segment-loader-'+Math.random(),// resolve the segment URL relative to the playlist
uri:segment.resolvedUri,// the segment's mediaIndex at the time it was requested
mediaIndex:mediaIndex,// whether or not to update the SegmentLoader's state with this
// segment's mediaIndex
isSyncRequest:isSyncRequest,startOfSegment:startOfSegment,// the segment's playlist
playlist:playlist,// unencrypted bytes of the segment
bytes:null,// when a key is defined for this segment, the encrypted bytes
encryptedBytes:null,// The target timestampOffset for this segment when we append it
// to the source buffer
timestampOffset:null,// The timeline that the segment is in
timeline:segment.timeline,// The expected duration of the segment in seconds
duration:segment.duration,// retain the segment in case the playlist updates while doing an async process
segment:segment};}/**
     * Determines if the network has enough bandwidth to complete the current segment
     * request in a timely manner. If not, the request will be aborted early and bandwidth
     * updated to trigger a playlist switch.
     *
     * @param {Object} stats
     *        Object containing stats about the request timing and size
     * @return {Boolean} True if the request was aborted, false otherwise
     * @private
     */},{key:'abortRequestEarly_',value:function abortRequestEarly_(stats){if(this.hls_.tech_.paused()||// Don't abort if the current playlist is on the lowestEnabledRendition
// TODO: Replace using timeout with a boolean indicating whether this playlist is
//       the lowestEnabledRendition.
!this.xhrOptions_.timeout||// Don't abort if we have no bandwidth information to estimate segment sizes
!this.playlist_.attributes.BANDWIDTH){return false;}// Wait at least 1 second since the first byte of data has been received before
// using the calculated bandwidth from the progress event to allow the bitrate
// to stabilize
if(Date.now()-(stats.firstBytesReceivedAt||Date.now())<1000){return false;}var currentTime=this.currentTime_();var measuredBandwidth=stats.bandwidth;var segmentDuration=this.pendingSegment_.duration;var requestTimeRemaining=Playlist.estimateSegmentRequestTime(segmentDuration,measuredBandwidth,this.playlist_,stats.bytesReceived);// Subtract 1 from the timeUntilRebuffer so we still consider an early abort
// if we are only left with less than 1 second when the request completes.
// A negative timeUntilRebuffering indicates we are already rebuffering
var timeUntilRebuffer$$1=timeUntilRebuffer(this.buffered_(),currentTime,this.hls_.tech_.playbackRate())-1;// Only consider aborting early if the estimated time to finish the download
// is larger than the estimated time until the player runs out of forward buffer
if(requestTimeRemaining<=timeUntilRebuffer$$1){return false;}var switchCandidate=minRebufferMaxBandwidthSelector({master:this.hls_.playlists.master,currentTime:currentTime,bandwidth:measuredBandwidth,duration:this.duration_(),segmentDuration:segmentDuration,timeUntilRebuffer:timeUntilRebuffer$$1,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!switchCandidate){return;}var rebufferingImpact=requestTimeRemaining-timeUntilRebuffer$$1;var timeSavedBySwitching=rebufferingImpact-switchCandidate.rebufferingImpact;var minimumTimeSaving=0.5;// If we are already rebuffering, increase the amount of variance we add to the
// potential round trip time of the new request so that we are not too aggressive
// with switching to a playlist that might save us a fraction of a second.
if(timeUntilRebuffer$$1<=TIME_FUDGE_FACTOR){minimumTimeSaving=1;}if(!switchCandidate.playlist||switchCandidate.playlist.uri===this.playlist_.uri||timeSavedBySwitching<minimumTimeSaving){return false;}// set the bandwidth to that of the desired playlist being sure to scale by
// BANDWIDTH_VARIANCE and add one so the playlist selector does not exclude it
// don't trigger a bandwidthupdate as the bandwidth is artifial
this.bandwidth=switchCandidate.playlist.attributes.BANDWIDTH*Config.BANDWIDTH_VARIANCE+1;this.abort();this.trigger('earlyabort');return true;}/**
     * XHR `progress` event handler
     *
     * @param {Event}
     *        The XHR `progress` event
     * @param {Object} simpleSegment
     *        A simplified segment object copy
     * @private
     */},{key:'handleProgress_',value:function handleProgress_(event,simpleSegment){if(!this.pendingSegment_||simpleSegment.requestId!==this.pendingSegment_.requestId||this.abortRequestEarly_(simpleSegment.stats)){return;}this.trigger('progress');}/**
     * load a specific segment from a request into the buffer
     *
     * @private
     */},{key:'loadSegment_',value:function loadSegment_(segmentInfo){this.state='WAITING';this.pendingSegment_=segmentInfo;this.trimBackBuffer_(segmentInfo);segmentInfo.abortRequests=mediaSegmentRequest(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(segmentInfo),// progress callback
this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this));}/**
     * trim the back buffer so that we don't have too much data
     * in the source buffer
     *
     * @private
     *
     * @param {Object} segmentInfo - the current segment
     */},{key:'trimBackBuffer_',value:function trimBackBuffer_(segmentInfo){var removeToTime=safeBackBufferTrimTime(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);// Chrome has a hard limit of 150MB of
// buffer and a very conservative "garbage collector"
// We manually clear out the old buffer to ensure
// we don't trigger the QuotaExceeded error
// on the source buffer during subsequent appends
if(removeToTime>0){this.remove(0,removeToTime);}}/**
     * created a simplified copy of the segment object with just the
     * information necessary to perform the XHR and decryption
     *
     * @private
     *
     * @param {Object} segmentInfo - the current segment
     * @returns {Object} a simplified segment object copy
     */},{key:'createSimplifiedSegmentObj_',value:function createSimplifiedSegmentObj_(segmentInfo){var segment=segmentInfo.segment;var simpleSegment={resolvedUri:segment.resolvedUri,byterange:segment.byterange,requestId:segmentInfo.requestId};if(segment.key){// if the media sequence is greater than 2^32, the IV will be incorrect
// assuming 10s segments, that would be about 1300 years
var iv=segment.key.iv||new Uint32Array([0,0,0,segmentInfo.mediaIndex+segmentInfo.playlist.mediaSequence]);simpleSegment.key={resolvedUri:segment.key.resolvedUri,iv:iv};}if(segment.map){simpleSegment.map=this.initSegment(segment.map);}return simpleSegment;}/**
     * Handle the callback from the segmentRequest function and set the
     * associated SegmentLoader state and errors if necessary
     *
     * @private
     */},{key:'segmentRequestFinished_',value:function segmentRequestFinished_(error,simpleSegment){// every request counts as a media request even if it has been aborted
// or canceled due to a timeout
this.mediaRequests+=1;if(simpleSegment.stats){this.mediaBytesTransferred+=simpleSegment.stats.bytesReceived;this.mediaTransferDuration+=simpleSegment.stats.roundTripTime;}// The request was aborted and the SegmentLoader has already been reset
if(!this.pendingSegment_){this.mediaRequestsAborted+=1;return;}// the request was aborted and the SegmentLoader has already started
// another request. this can happen when the timeout for an aborted
// request triggers due to a limitation in the XHR library
// do not count this as any sort of request or we risk double-counting
if(simpleSegment.requestId!==this.pendingSegment_.requestId){return;}// an error occurred from the active pendingSegment_ so reset everything
if(error){this.pendingSegment_=null;this.state='READY';// the requests were aborted just record the aborted stat and exit
// this is not a true error condition and nothing corrective needs
// to be done
if(error.code===REQUEST_ERRORS.ABORTED){this.mediaRequestsAborted+=1;return;}this.pause();// the error is really just that at least one of the requests timed-out
// set the bandwidth to a very low value and trigger an ABR switch to
// take emergency action
if(error.code===REQUEST_ERRORS.TIMEOUT){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger('bandwidthupdate');return;}// if control-flow has arrived here, then the error is real
// emit an error event to blacklist the current playlist
this.mediaRequestsErrored+=1;this.error(error);this.trigger('error');return;}// the response was a success so set any bandwidth stats the request
// generated for ABR purposes
this.bandwidth=simpleSegment.stats.bandwidth;this.roundTrip=simpleSegment.stats.roundTripTime;// if this request included an initialization segment, save that data
// to the initSegment cache
if(simpleSegment.map){simpleSegment.map=this.initSegment(simpleSegment.map,true);}this.processSegmentResponse_(simpleSegment);}/**
     * Move any important data from the simplified segment object
     * back to the real segment object for future phases
     *
     * @private
     */},{key:'processSegmentResponse_',value:function processSegmentResponse_(simpleSegment){var segmentInfo=this.pendingSegment_;segmentInfo.bytes=simpleSegment.bytes;if(simpleSegment.map){segmentInfo.segment.map.bytes=simpleSegment.map.bytes;}segmentInfo.endOfAllRequests=simpleSegment.endOfAllRequests;// This has fmp4 captions, add them to text tracks
if(simpleSegment.fmp4Captions){createCaptionsTrackIfNotExists(this.inbandTextTracks_,this.hls_.tech_,simpleSegment.captionStreams);addCaptionData({inbandTextTracks:this.inbandTextTracks_,captionArray:simpleSegment.fmp4Captions,// fmp4s will not have a timestamp offset
timestampOffset:0});// Reset stored captions since we added parsed
// captions to a text track at this point
this.captionParser_.clearParsedCaptions();}this.handleSegment_();}/**
     * append a decrypted segement to the SourceBuffer through a SourceUpdater
     *
     * @private
     */},{key:'handleSegment_',value:function handleSegment_(){var _this3=this;if(!this.pendingSegment_){this.state='READY';return;}var segmentInfo=this.pendingSegment_;var segment=segmentInfo.segment;var timingInfo=this.syncController_.probeSegmentInfo(segmentInfo);// When we have our first timing info, determine what media types this loader is
// dealing with. Although we're maintaining extra state, it helps to preserve the
// separation of segment loader from the actual source buffers.
if(typeof this.startingMedia_==='undefined'&&timingInfo&&(// Guard against cases where we're not getting timing info at all until we are
// certain that all streams will provide it.
timingInfo.containsAudio||timingInfo.containsVideo)){this.startingMedia_={containsAudio:timingInfo.containsAudio,containsVideo:timingInfo.containsVideo};}var illegalMediaSwitchError=illegalMediaSwitch(this.loaderType_,this.startingMedia_,timingInfo);if(illegalMediaSwitchError){this.error({message:illegalMediaSwitchError,blacklistDuration:Infinity});this.trigger('error');return;}if(segmentInfo.isSyncRequest){this.trigger('syncinfoupdate');this.pendingSegment_=null;this.state='READY';return;}if(segmentInfo.timestampOffset!==null&&segmentInfo.timestampOffset!==this.sourceUpdater_.timestampOffset()){this.sourceUpdater_.timestampOffset(segmentInfo.timestampOffset);// fired when a timestamp offset is set in HLS (can also identify discontinuities)
this.trigger('timestampoffset');}var timelineMapping=this.syncController_.mappingForTimeline(segmentInfo.timeline);if(timelineMapping!==null){this.trigger({type:'segmenttimemapping',mapping:timelineMapping});}this.state='APPENDING';// if the media initialization segment is changing, append it
// before the content segment
if(segment.map){var initId=initSegmentId(segment.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==initId){var initSegment=this.initSegment(segment.map);this.sourceUpdater_.appendBuffer({bytes:initSegment.bytes},function(){_this3.activeInitSegmentId_=initId;});}}segmentInfo.byteLength=segmentInfo.bytes.byteLength;if(typeof segment.start==='number'&&typeof segment.end==='number'){this.mediaSecondsLoaded+=segment.end-segment.start;}else{this.mediaSecondsLoaded+=segment.duration;}this.logger_(segmentInfoString(segmentInfo));this.sourceUpdater_.appendBuffer({bytes:segmentInfo.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,segmentInfo.requestId)},this.handleUpdateEnd_.bind(this));}},{key:'handleVideoSegmentTimingInfo_',value:function handleVideoSegmentTimingInfo_(requestId,event){if(!this.pendingSegment_||requestId!==this.pendingSegment_.requestId){return;}var segment=this.pendingSegment_.segment;if(!segment.videoTimingInfo){segment.videoTimingInfo={};}segment.videoTimingInfo.transmuxerPrependedSeconds=event.videoSegmentTimingInfo.prependedContentDuration||0;segment.videoTimingInfo.transmuxedPresentationStart=event.videoSegmentTimingInfo.start.presentation;segment.videoTimingInfo.transmuxedPresentationEnd=event.videoSegmentTimingInfo.end.presentation;// mainly used as a reference for debugging
segment.videoTimingInfo.baseMediaDecodeTime=event.videoSegmentTimingInfo.baseMediaDecodeTime;}/**
     * callback to run when appendBuffer is finished. detects if we are
     * in a good state to do things with the data we got, or if we need
     * to wait for more
     *
     * @private
     */},{key:'handleUpdateEnd_',value:function handleUpdateEnd_(){if(!this.pendingSegment_){this.state='READY';if(!this.paused()){this.monitorBuffer_();}return;}var segmentInfo=this.pendingSegment_;var segment=segmentInfo.segment;var isWalkingForward=this.mediaIndex!==null;this.pendingSegment_=null;this.recordThroughput_(segmentInfo);this.addSegmentMetadataCue_(segmentInfo);this.state='READY';this.mediaIndex=segmentInfo.mediaIndex;this.fetchAtBuffer_=true;this.currentTimeline_=segmentInfo.timeline;// We must update the syncinfo to recalculate the seekable range before
// the following conditional otherwise it may consider this a bad "guess"
// and attempt to resync when the post-update seekable window and live
// point would mean that this was the perfect segment to fetch
this.trigger('syncinfoupdate');// If we previously appended a segment that ends more than 3 targetDurations before
// the currentTime_ that means that our conservative guess was too conservative.
// In that case, reset the loader state so that we try to use any information gained
// from the previous request to create a new, more accurate, sync-point.
if(segment.end&&this.currentTime_()-segment.end>segmentInfo.playlist.targetDuration*3){this.resetEverything();return;}// Don't do a rendition switch unless we have enough time to get a sync segment
// and conservatively guess
if(isWalkingForward){this.trigger('bandwidthupdate');}this.trigger('progress');// any time an update finishes and the last segment is in the
// buffer, end the stream. this ensures the "ended" event will
// fire if playback reaches that point.
if(this.isEndOfStream_(segmentInfo.mediaIndex+1,segmentInfo.playlist)){this.endOfStream();}if(!this.paused()){this.monitorBuffer_();}}/**
     * Records the current throughput of the decrypt, transmux, and append
     * portion of the semgment pipeline. `throughput.rate` is a the cumulative
     * moving average of the throughput. `throughput.count` is the number of
     * data points in the average.
     *
     * @private
     * @param {Object} segmentInfo the object returned by loadSegment
     */},{key:'recordThroughput_',value:function recordThroughput_(segmentInfo){var rate=this.throughput.rate;// Add one to the time to ensure that we don't accidentally attempt to divide
// by zero in the case where the throughput is ridiculously high
var segmentProcessingTime=Date.now()-segmentInfo.endOfAllRequests+1;// Multiply by 8000 to convert from bytes/millisecond to bits/second
var segmentProcessingThroughput=Math.floor(segmentInfo.byteLength/segmentProcessingTime*8*1000);// This is just a cumulative moving average calculation:
//   newAvg = oldAvg + (sample - oldAvg) / (sampleCount + 1)
this.throughput.rate+=(segmentProcessingThroughput-rate)/++this.throughput.count;}/**
     * Adds a cue to the segment-metadata track with some metadata information about the
     * segment
     *
     * @private
     * @param {Object} segmentInfo
     *        the object returned by loadSegment
     * @method addSegmentMetadataCue_
     */},{key:'addSegmentMetadataCue_',value:function addSegmentMetadataCue_(segmentInfo){if(!this.segmentMetadataTrack_){return;}var segment=segmentInfo.segment;var start=segment.start;var end=segment.end;// Do not try adding the cue if the start and end times are invalid.
if(!finite(start)||!finite(end)){return;}removeCuesFromTrack(start,end,this.segmentMetadataTrack_);var Cue=_window2.default.WebKitDataCue||_window2.default.VTTCue;var value={custom:segment.custom,dateTimeObject:segment.dateTimeObject,dateTimeString:segment.dateTimeString,bandwidth:segmentInfo.playlist.attributes.BANDWIDTH,resolution:segmentInfo.playlist.attributes.RESOLUTION,codecs:segmentInfo.playlist.attributes.CODECS,byteLength:segmentInfo.byteLength,uri:segmentInfo.uri,timeline:segmentInfo.timeline,playlist:segmentInfo.playlist.uri,start:start,end:end};var data=JSON.stringify(value);var cue=new Cue(start,end,data);// Attach the metadata to the value property of the cue to keep consistency between
// the differences of WebKitDataCue in safari and VTTCue in other browsers
cue.value=value;this.segmentMetadataTrack_.addCue(cue);}}]);return SegmentLoader;}(videojs$1.EventTarget);var uint8ToUtf8=function uint8ToUtf8(uintArray){return decodeURIComponent(escape(String.fromCharCode.apply(null,uintArray)));};/**
 * @file vtt-segment-loader.js
 */var VTT_LINE_TERMINATORS=new Uint8Array('\n\n'.split('').map(function(char){return char.charCodeAt(0);}));/**
 * An object that manages segment loading and appending.
 *
 * @class VTTSegmentLoader
 * @param {Object} options required and optional options
 * @extends videojs.EventTarget
 */var VTTSegmentLoader=function(_SegmentLoader){inherits(VTTSegmentLoader,_SegmentLoader);function VTTSegmentLoader(settings){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};classCallCheck(this,VTTSegmentLoader);// SegmentLoader requires a MediaSource be specified or it will throw an error;
// however, VTTSegmentLoader has no need of a media source, so delete the reference
var _this=possibleConstructorReturn(this,(VTTSegmentLoader.__proto__||Object.getPrototypeOf(VTTSegmentLoader)).call(this,settings,options));_this.mediaSource_=null;_this.subtitlesTrack_=null;return _this;}/**
   * Indicates which time ranges are buffered
   *
   * @return {TimeRange}
   *         TimeRange object representing the current buffered ranges
   */createClass(VTTSegmentLoader,[{key:'buffered_',value:function buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length){return videojs$1.createTimeRanges();}var cues=this.subtitlesTrack_.cues;var start=cues[0].startTime;var end=cues[cues.length-1].startTime;return videojs$1.createTimeRanges([[start,end]]);}/**
     * Gets and sets init segment for the provided map
     *
     * @param {Object} map
     *        The map object representing the init segment to get or set
     * @param {Boolean=} set
     *        If true, the init segment for the provided map should be saved
     * @return {Object}
     *         map object for desired init segment
     */},{key:'initSegment',value:function initSegment(map){var set$$1=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!map){return null;}var id=initSegmentId(map);var storedMap=this.initSegments_[id];if(set$$1&&!storedMap&&map.bytes){// append WebVTT line terminators to the media initialization segment if it exists
// to follow the WebVTT spec (https://w3c.github.io/webvtt/#file-structure) that
// requires two or more WebVTT line terminators between the WebVTT header and the
// rest of the file
var combinedByteLength=VTT_LINE_TERMINATORS.byteLength+map.bytes.byteLength;var combinedSegment=new Uint8Array(combinedByteLength);combinedSegment.set(map.bytes);combinedSegment.set(VTT_LINE_TERMINATORS,map.bytes.byteLength);this.initSegments_[id]=storedMap={resolvedUri:map.resolvedUri,byterange:map.byterange,bytes:combinedSegment};}return storedMap||map;}/**
     * Returns true if all configuration required for loading is present, otherwise false.
     *
     * @return {Boolean} True if the all configuration is ready for loading
     * @private
     */},{key:'couldBeginLoading_',value:function couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused();}/**
     * Once all the starting parameters have been specified, begin
     * operation. This method should only be invoked from the INIT
     * state.
     *
     * @private
     */},{key:'init_',value:function init_(){this.state='READY';this.resetEverything();return this.monitorBuffer_();}/**
     * Set a subtitle track on the segment loader to add subtitles to
     *
     * @param {TextTrack=} track
     *        The text track to add loaded subtitles to
     * @return {TextTrack}
     *        Returns the subtitles track
     */},{key:'track',value:function track(_track){if(typeof _track==='undefined'){return this.subtitlesTrack_;}this.subtitlesTrack_=_track;// if we were unpaused but waiting for a sourceUpdater, start
// buffering now
if(this.state==='INIT'&&this.couldBeginLoading_()){this.init_();}return this.subtitlesTrack_;}/**
     * Remove any data in the source buffer between start and end times
     * @param {Number} start - the start time of the region to remove from the buffer
     * @param {Number} end - the end time of the region to remove from the buffer
     */},{key:'remove',value:function remove(start,end){removeCuesFromTrack(start,end,this.subtitlesTrack_);}/**
     * fill the buffer with segements unless the sourceBuffers are
     * currently updating
     *
     * Note: this function should only ever be called by monitorBuffer_
     * and never directly
     *
     * @private
     */},{key:'fillBuffer_',value:function fillBuffer_(){var _this2=this;if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());}// see if we need to begin loading immediately
var segmentInfo=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);segmentInfo=this.skipEmptySegments_(segmentInfo);if(!segmentInfo){return;}if(this.syncController_.timestampOffsetForTimeline(segmentInfo.timeline)===null){// We don't have the timestamp offset that we need to sync subtitles.
// Rerun on a timestamp offset or user interaction.
var checkTimestampOffset=function checkTimestampOffset(){_this2.state='READY';if(!_this2.paused()){// if not paused, queue a buffer check as soon as possible
_this2.monitorBuffer_();}};this.syncController_.one('timestampoffset',checkTimestampOffset);this.state='WAITING_ON_TIMELINE';return;}this.loadSegment_(segmentInfo);}/**
     * Prevents the segment loader from requesting segments we know contain no subtitles
     * by walking forward until we find the next segment that we don't know whether it is
     * empty or not.
     *
     * @param {Object} segmentInfo
     *        a segment info object that describes the current segment
     * @return {Object}
     *         a segment info object that describes the current segment
     */},{key:'skipEmptySegments_',value:function skipEmptySegments_(segmentInfo){while(segmentInfo&&segmentInfo.segment.empty){segmentInfo=this.generateSegmentInfo_(segmentInfo.playlist,segmentInfo.mediaIndex+1,segmentInfo.startOfSegment+segmentInfo.duration,segmentInfo.isSyncRequest);}return segmentInfo;}/**
     * append a decrypted segement to the SourceBuffer through a SourceUpdater
     *
     * @private
     */},{key:'handleSegment_',value:function handleSegment_(){var _this3=this;if(!this.pendingSegment_||!this.subtitlesTrack_){this.state='READY';return;}this.state='APPENDING';var segmentInfo=this.pendingSegment_;var segment=segmentInfo.segment;// Make sure that vttjs has loaded, otherwise, wait till it finished loading
if(typeof _window2.default.WebVTT!=='function'&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var loadHandler=function loadHandler(){_this3.handleSegment_();};this.state='WAITING_ON_VTTJS';this.subtitlesTrack_.tech_.one('vttjsloaded',loadHandler);this.subtitlesTrack_.tech_.one('vttjserror',function(){_this3.subtitlesTrack_.tech_.off('vttjsloaded',loadHandler);_this3.error({message:'Error loading vtt.js'});_this3.state='READY';_this3.pause();_this3.trigger('error');});return;}segment.requested=true;try{this.parseVTTCues_(segmentInfo);}catch(e){this.error({message:e.message});this.state='READY';this.pause();return this.trigger('error');}this.updateTimeMapping_(segmentInfo,this.syncController_.timelines[segmentInfo.timeline],this.playlist_);if(segmentInfo.isSyncRequest){this.trigger('syncinfoupdate');this.pendingSegment_=null;this.state='READY';return;}segmentInfo.byteLength=segmentInfo.bytes.byteLength;this.mediaSecondsLoaded+=segment.duration;if(segmentInfo.cues.length){// remove any overlapping cues to prevent doubling
this.remove(segmentInfo.cues[0].endTime,segmentInfo.cues[segmentInfo.cues.length-1].endTime);}segmentInfo.cues.forEach(function(cue){_this3.subtitlesTrack_.addCue(cue);});this.handleUpdateEnd_();}/**
     * Uses the WebVTT parser to parse the segment response
     *
     * @param {Object} segmentInfo
     *        a segment info object that describes the current segment
     * @private
     */},{key:'parseVTTCues_',value:function parseVTTCues_(segmentInfo){var decoder=void 0;var decodeBytesToString=false;if(typeof _window2.default.TextDecoder==='function'){decoder=new _window2.default.TextDecoder('utf8');}else{decoder=_window2.default.WebVTT.StringDecoder();decodeBytesToString=true;}var parser=new _window2.default.WebVTT.Parser(_window2.default,_window2.default.vttjs,decoder);segmentInfo.cues=[];segmentInfo.timestampmap={MPEGTS:0,LOCAL:0};parser.oncue=segmentInfo.cues.push.bind(segmentInfo.cues);parser.ontimestampmap=function(map){return segmentInfo.timestampmap=map;};parser.onparsingerror=function(error){videojs$1.log.warn('Error encountered when parsing cues: '+error.message);};if(segmentInfo.segment.map){var mapData=segmentInfo.segment.map.bytes;if(decodeBytesToString){mapData=uint8ToUtf8(mapData);}parser.parse(mapData);}var segmentData=segmentInfo.bytes;if(decodeBytesToString){segmentData=uint8ToUtf8(segmentData);}parser.parse(segmentData);parser.flush();}/**
     * Updates the start and end times of any cues parsed by the WebVTT parser using
     * the information parsed from the X-TIMESTAMP-MAP header and a TS to media time mapping
     * from the SyncController
     *
     * @param {Object} segmentInfo
     *        a segment info object that describes the current segment
     * @param {Object} mappingObj
     *        object containing a mapping from TS to media time
     * @param {Object} playlist
     *        the playlist object containing the segment
     * @private
     */},{key:'updateTimeMapping_',value:function updateTimeMapping_(segmentInfo,mappingObj,playlist){var segment=segmentInfo.segment;if(!mappingObj){// If the sync controller does not have a mapping of TS to Media Time for the
// timeline, then we don't have enough information to update the cue
// start/end times
return;}if(!segmentInfo.cues.length){// If there are no cues, we also do not have enough information to figure out
// segment timing. Mark that the segment contains no cues so we don't re-request
// an empty segment.
segment.empty=true;return;}var timestampmap=segmentInfo.timestampmap;var diff=timestampmap.MPEGTS/90000-timestampmap.LOCAL+mappingObj.mapping;segmentInfo.cues.forEach(function(cue){// First convert cue time to TS time using the timestamp-map provided within the vtt
cue.startTime+=diff;cue.endTime+=diff;});if(!playlist.syncInfo){var firstStart=segmentInfo.cues[0].startTime;var lastStart=segmentInfo.cues[segmentInfo.cues.length-1].startTime;playlist.syncInfo={mediaSequence:playlist.mediaSequence+segmentInfo.mediaIndex,time:Math.min(firstStart,lastStart-segment.duration)};}}}]);return VTTSegmentLoader;}(SegmentLoader);/**
 * @file ad-cue-tags.js
 *//**
 * Searches for an ad cue that overlaps with the given mediaTime
 */var findAdCue=function findAdCue(track,mediaTime){var cues=track.cues;for(var i=0;i<cues.length;i++){var cue=cues[i];if(mediaTime>=cue.adStartTime&&mediaTime<=cue.adEndTime){return cue;}}return null;};var updateAdCues=function updateAdCues(media,track){var offset=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(!media.segments){return;}var mediaTime=offset;var cue=void 0;for(var i=0;i<media.segments.length;i++){var segment=media.segments[i];if(!cue){// Since the cues will span for at least the segment duration, adding a fudge
// factor of half segment duration will prevent duplicate cues from being
// created when timing info is not exact (e.g. cue start time initialized
// at 10.006677, but next call mediaTime is 10.003332 )
cue=findAdCue(track,mediaTime+segment.duration/2);}if(cue){if('cueIn'in segment){// Found a CUE-IN so end the cue
cue.endTime=mediaTime;cue.adEndTime=mediaTime;mediaTime+=segment.duration;cue=null;continue;}if(mediaTime<cue.endTime){// Already processed this mediaTime for this cue
mediaTime+=segment.duration;continue;}// otherwise extend cue until a CUE-IN is found
cue.endTime+=segment.duration;}else{if('cueOut'in segment){cue=new _window2.default.VTTCue(mediaTime,mediaTime+segment.duration,segment.cueOut);cue.adStartTime=mediaTime;// Assumes tag format to be
// #EXT-X-CUE-OUT:30
cue.adEndTime=mediaTime+parseFloat(segment.cueOut);track.addCue(cue);}if('cueOutCont'in segment){// Entered into the middle of an ad cue
var adOffset=void 0;var adTotal=void 0;// Assumes tag formate to be
// #EXT-X-CUE-OUT-CONT:10/30
var _segment$cueOutCont$s=segment.cueOutCont.split('/').map(parseFloat);var _segment$cueOutCont$s2=slicedToArray(_segment$cueOutCont$s,2);adOffset=_segment$cueOutCont$s2[0];adTotal=_segment$cueOutCont$s2[1];cue=new _window2.default.VTTCue(mediaTime,mediaTime+segment.duration,'');cue.adStartTime=mediaTime-adOffset;cue.adEndTime=cue.adStartTime+adTotal;track.addCue(cue);}}mediaTime+=segment.duration;}};/**
 * @file sync-controller.js
 */var tsprobe=_tsInspector2.default.inspect;var syncPointStrategies=[// Stategy "VOD": Handle the VOD-case where the sync-point is *always*
//                the equivalence display-time 0 === segment-index 0
{name:'VOD',run:function run(syncController,playlist,duration$$1,currentTimeline,currentTime){if(duration$$1!==Infinity){var syncPoint={time:0,segmentIndex:0};return syncPoint;}return null;}},// Stategy "ProgramDateTime": We have a program-date-time tag in this playlist
{name:'ProgramDateTime',run:function run(syncController,playlist,duration$$1,currentTimeline,currentTime){if(!syncController.datetimeToDisplayTime){return null;}var segments=playlist.segments||[];var syncPoint=null;var lastDistance=null;currentTime=currentTime||0;for(var i=0;i<segments.length;i++){var segment=segments[i];if(segment.dateTimeObject){var segmentTime=segment.dateTimeObject.getTime()/1000;var segmentStart=segmentTime+syncController.datetimeToDisplayTime;var distance=Math.abs(currentTime-segmentStart);// Once the distance begins to increase, we have passed
// currentTime and can stop looking for better candidates
if(lastDistance!==null&&lastDistance<distance){break;}lastDistance=distance;syncPoint={time:segmentStart,segmentIndex:i};}}return syncPoint;}},// Stategy "Segment": We have a known time mapping for a timeline and a
//                    segment in the current timeline with timing data
{name:'Segment',run:function run(syncController,playlist,duration$$1,currentTimeline,currentTime){var segments=playlist.segments||[];var syncPoint=null;var lastDistance=null;currentTime=currentTime||0;for(var i=0;i<segments.length;i++){var segment=segments[i];if(segment.timeline===currentTimeline&&typeof segment.start!=='undefined'){var distance=Math.abs(currentTime-segment.start);// Once the distance begins to increase, we have passed
// currentTime and can stop looking for better candidates
if(lastDistance!==null&&lastDistance<distance){break;}if(!syncPoint||lastDistance===null||lastDistance>=distance){lastDistance=distance;syncPoint={time:segment.start,segmentIndex:i};}}}return syncPoint;}},// Stategy "Discontinuity": We have a discontinuity with a known
//                          display-time
{name:'Discontinuity',run:function run(syncController,playlist,duration$$1,currentTimeline,currentTime){var syncPoint=null;currentTime=currentTime||0;if(playlist.discontinuityStarts&&playlist.discontinuityStarts.length){var lastDistance=null;for(var i=0;i<playlist.discontinuityStarts.length;i++){var segmentIndex=playlist.discontinuityStarts[i];var discontinuity=playlist.discontinuitySequence+i+1;var discontinuitySync=syncController.discontinuities[discontinuity];if(discontinuitySync){var distance=Math.abs(currentTime-discontinuitySync.time);// Once the distance begins to increase, we have passed
// currentTime and can stop looking for better candidates
if(lastDistance!==null&&lastDistance<distance){break;}if(!syncPoint||lastDistance===null||lastDistance>=distance){lastDistance=distance;syncPoint={time:discontinuitySync.time,segmentIndex:segmentIndex};}}}}return syncPoint;}},// Stategy "Playlist": We have a playlist with a known mapping of
//                     segment index to display time
{name:'Playlist',run:function run(syncController,playlist,duration$$1,currentTimeline,currentTime){if(playlist.syncInfo){var syncPoint={time:playlist.syncInfo.time,segmentIndex:playlist.syncInfo.mediaSequence-playlist.mediaSequence};return syncPoint;}return null;}}];var SyncController=function(_videojs$EventTarget){inherits(SyncController,_videojs$EventTarget);function SyncController(){classCallCheck(this,SyncController);// Segment Loader state variables...
// ...for synching across variants
var _this=possibleConstructorReturn(this,(SyncController.__proto__||Object.getPrototypeOf(SyncController)).call(this));_this.inspectCache_=undefined;// ...for synching across variants
_this.timelines=[];_this.discontinuities=[];_this.datetimeToDisplayTime=null;_this.logger_=logger('SyncController');return _this;}/**
   * Find a sync-point for the playlist specified
   *
   * A sync-point is defined as a known mapping from display-time to
   * a segment-index in the current playlist.
   *
   * @param {Playlist} playlist
   *        The playlist that needs a sync-point
   * @param {Number} duration
   *        Duration of the MediaSource (Infinite if playing a live source)
   * @param {Number} currentTimeline
   *        The last timeline from which a segment was loaded
   * @returns {Object}
   *          A sync-point object
   */createClass(SyncController,[{key:'getSyncPoint',value:function getSyncPoint(playlist,duration$$1,currentTimeline,currentTime){var syncPoints=this.runStrategies_(playlist,duration$$1,currentTimeline,currentTime);if(!syncPoints.length){// Signal that we need to attempt to get a sync-point manually
// by fetching a segment in the playlist and constructing
// a sync-point from that information
return null;}// Now find the sync-point that is closest to the currentTime because
// that should result in the most accurate guess about which segment
// to fetch
return this.selectSyncPoint_(syncPoints,{key:'time',value:currentTime});}/**
     * Calculate the amount of time that has expired off the playlist during playback
     *
     * @param {Playlist} playlist
     *        Playlist object to calculate expired from
     * @param {Number} duration
     *        Duration of the MediaSource (Infinity if playling a live source)
     * @returns {Number|null}
     *          The amount of time that has expired off the playlist during playback. Null
     *          if no sync-points for the playlist can be found.
     */},{key:'getExpiredTime',value:function getExpiredTime(playlist,duration$$1){if(!playlist||!playlist.segments){return null;}var syncPoints=this.runStrategies_(playlist,duration$$1,playlist.discontinuitySequence,0);// Without sync-points, there is not enough information to determine the expired time
if(!syncPoints.length){return null;}var syncPoint=this.selectSyncPoint_(syncPoints,{key:'segmentIndex',value:0});// If the sync-point is beyond the start of the playlist, we want to subtract the
// duration from index 0 to syncPoint.segmentIndex instead of adding.
if(syncPoint.segmentIndex>0){syncPoint.time*=-1;}return Math.abs(syncPoint.time+sumDurations(playlist,syncPoint.segmentIndex,0));}/**
     * Runs each sync-point strategy and returns a list of sync-points returned by the
     * strategies
     *
     * @private
     * @param {Playlist} playlist
     *        The playlist that needs a sync-point
     * @param {Number} duration
     *        Duration of the MediaSource (Infinity if playing a live source)
     * @param {Number} currentTimeline
     *        The last timeline from which a segment was loaded
     * @returns {Array}
     *          A list of sync-point objects
     */},{key:'runStrategies_',value:function runStrategies_(playlist,duration$$1,currentTimeline,currentTime){var syncPoints=[];// Try to find a sync-point in by utilizing various strategies...
for(var i=0;i<syncPointStrategies.length;i++){var strategy=syncPointStrategies[i];var syncPoint=strategy.run(this,playlist,duration$$1,currentTimeline,currentTime);if(syncPoint){syncPoint.strategy=strategy.name;syncPoints.push({strategy:strategy.name,syncPoint:syncPoint});}}return syncPoints;}/**
     * Selects the sync-point nearest the specified target
     *
     * @private
     * @param {Array} syncPoints
     *        List of sync-points to select from
     * @param {Object} target
     *        Object specifying the property and value we are targeting
     * @param {String} target.key
     *        Specifies the property to target. Must be either 'time' or 'segmentIndex'
     * @param {Number} target.value
     *        The value to target for the specified key.
     * @returns {Object}
     *          The sync-point nearest the target
     */},{key:'selectSyncPoint_',value:function selectSyncPoint_(syncPoints,target){var bestSyncPoint=syncPoints[0].syncPoint;var bestDistance=Math.abs(syncPoints[0].syncPoint[target.key]-target.value);var bestStrategy=syncPoints[0].strategy;for(var i=1;i<syncPoints.length;i++){var newDistance=Math.abs(syncPoints[i].syncPoint[target.key]-target.value);if(newDistance<bestDistance){bestDistance=newDistance;bestSyncPoint=syncPoints[i].syncPoint;bestStrategy=syncPoints[i].strategy;}}this.logger_('syncPoint for ['+target.key+': '+target.value+'] chosen with strategy'+(' ['+bestStrategy+']: [time:'+bestSyncPoint.time+',')+(' segmentIndex:'+bestSyncPoint.segmentIndex+']'));return bestSyncPoint;}/**
     * Save any meta-data present on the segments when segments leave
     * the live window to the playlist to allow for synchronization at the
     * playlist level later.
     *
     * @param {Playlist} oldPlaylist - The previous active playlist
     * @param {Playlist} newPlaylist - The updated and most current playlist
     */},{key:'saveExpiredSegmentInfo',value:function saveExpiredSegmentInfo(oldPlaylist,newPlaylist){var mediaSequenceDiff=newPlaylist.mediaSequence-oldPlaylist.mediaSequence;// When a segment expires from the playlist and it has a start time
// save that information as a possible sync-point reference in future
for(var i=mediaSequenceDiff-1;i>=0;i--){var lastRemovedSegment=oldPlaylist.segments[i];if(lastRemovedSegment&&typeof lastRemovedSegment.start!=='undefined'){newPlaylist.syncInfo={mediaSequence:oldPlaylist.mediaSequence+i,time:lastRemovedSegment.start};this.logger_('playlist refresh sync: [time:'+newPlaylist.syncInfo.time+','+(' mediaSequence: '+newPlaylist.syncInfo.mediaSequence+']'));this.trigger('syncinfoupdate');break;}}}/**
     * Save the mapping from playlist's ProgramDateTime to display. This should
     * only ever happen once at the start of playback.
     *
     * @param {Playlist} playlist - The currently active playlist
     */},{key:'setDateTimeMapping',value:function setDateTimeMapping(playlist){if(!this.datetimeToDisplayTime&&playlist.segments&&playlist.segments.length&&playlist.segments[0].dateTimeObject){var playlistTimestamp=playlist.segments[0].dateTimeObject.getTime()/1000;this.datetimeToDisplayTime=-playlistTimestamp;}}/**
     * Reset the state of the inspection cache when we do a rendition
     * switch
     */},{key:'reset',value:function reset(){this.inspectCache_=undefined;}/**
     * Probe or inspect a fmp4 or an mpeg2-ts segment to determine the start
     * and end of the segment in it's internal "media time". Used to generate
     * mappings from that internal "media time" to the display time that is
     * shown on the player.
     *
     * @param {SegmentInfo} segmentInfo - The current active request information
     */},{key:'probeSegmentInfo',value:function probeSegmentInfo(segmentInfo){var segment=segmentInfo.segment;var playlist=segmentInfo.playlist;var timingInfo=void 0;if(segment.map){timingInfo=this.probeMp4Segment_(segmentInfo);}else{timingInfo=this.probeTsSegment_(segmentInfo);}if(timingInfo){if(this.calculateSegmentTimeMapping_(segmentInfo,timingInfo)){this.saveDiscontinuitySyncInfo_(segmentInfo);// If the playlist does not have sync information yet, record that information
// now with segment timing information
if(!playlist.syncInfo){playlist.syncInfo={mediaSequence:playlist.mediaSequence+segmentInfo.mediaIndex,time:segment.start};}}}return timingInfo;}/**
     * Probe an fmp4 or an mpeg2-ts segment to determine the start of the segment
     * in it's internal "media time".
     *
     * @private
     * @param {SegmentInfo} segmentInfo - The current active request information
     * @return {object} The start and end time of the current segment in "media time"
     */},{key:'probeMp4Segment_',value:function probeMp4Segment_(segmentInfo){var segment=segmentInfo.segment;var timescales=_probe2.default.timescale(segment.map.bytes);var startTime=_probe2.default.startTime(timescales,segmentInfo.bytes);if(segmentInfo.timestampOffset!==null){segmentInfo.timestampOffset-=startTime;}return{start:startTime,end:startTime+segment.duration};}/**
     * Probe an mpeg2-ts segment to determine the start and end of the segment
     * in it's internal "media time".
     *
     * @private
     * @param {SegmentInfo} segmentInfo - The current active request information
     * @return {object} The start and end time of the current segment in "media time"
     */},{key:'probeTsSegment_',value:function probeTsSegment_(segmentInfo){var timeInfo=tsprobe(segmentInfo.bytes,this.inspectCache_);var segmentStartTime=void 0;var segmentEndTime=void 0;if(!timeInfo){return null;}if(timeInfo.video&&timeInfo.video.length===2){this.inspectCache_=timeInfo.video[1].dts;segmentStartTime=timeInfo.video[0].dtsTime;segmentEndTime=timeInfo.video[1].dtsTime;}else if(timeInfo.audio&&timeInfo.audio.length===2){this.inspectCache_=timeInfo.audio[1].dts;segmentStartTime=timeInfo.audio[0].dtsTime;segmentEndTime=timeInfo.audio[1].dtsTime;}var probedInfo={start:segmentStartTime,end:segmentEndTime,containsVideo:timeInfo.video&&timeInfo.video.length===2,containsAudio:timeInfo.audio&&timeInfo.audio.length===2};return probedInfo;}},{key:'timestampOffsetForTimeline',value:function timestampOffsetForTimeline(timeline){if(typeof this.timelines[timeline]==='undefined'){return null;}return this.timelines[timeline].time;}},{key:'mappingForTimeline',value:function mappingForTimeline(timeline){if(typeof this.timelines[timeline]==='undefined'){return null;}return this.timelines[timeline].mapping;}/**
     * Use the "media time" for a segment to generate a mapping to "display time" and
     * save that display time to the segment.
     *
     * @private
     * @param {SegmentInfo} segmentInfo
     *        The current active request information
     * @param {object} timingInfo
     *        The start and end time of the current segment in "media time"
     * @returns {Boolean}
     *          Returns false if segment time mapping could not be calculated
     */},{key:'calculateSegmentTimeMapping_',value:function calculateSegmentTimeMapping_(segmentInfo,timingInfo){var segment=segmentInfo.segment;var mappingObj=this.timelines[segmentInfo.timeline];if(segmentInfo.timestampOffset!==null){mappingObj={time:segmentInfo.startOfSegment,mapping:segmentInfo.startOfSegment-timingInfo.start};this.timelines[segmentInfo.timeline]=mappingObj;this.trigger('timestampoffset');this.logger_('time mapping for timeline '+segmentInfo.timeline+': '+('[time: '+mappingObj.time+'] [mapping: '+mappingObj.mapping+']'));segment.start=segmentInfo.startOfSegment;segment.end=timingInfo.end+mappingObj.mapping;}else if(mappingObj){segment.start=timingInfo.start+mappingObj.mapping;segment.end=timingInfo.end+mappingObj.mapping;}else{return false;}return true;}/**
     * Each time we have discontinuity in the playlist, attempt to calculate the location
     * in display of the start of the discontinuity and save that. We also save an accuracy
     * value so that we save values with the most accuracy (closest to 0.)
     *
     * @private
     * @param {SegmentInfo} segmentInfo - The current active request information
     */},{key:'saveDiscontinuitySyncInfo_',value:function saveDiscontinuitySyncInfo_(segmentInfo){var playlist=segmentInfo.playlist;var segment=segmentInfo.segment;// If the current segment is a discontinuity then we know exactly where
// the start of the range and it's accuracy is 0 (greater accuracy values
// mean more approximation)
if(segment.discontinuity){this.discontinuities[segment.timeline]={time:segment.start,accuracy:0};}else if(playlist.discontinuityStarts&&playlist.discontinuityStarts.length){// Search for future discontinuities that we can provide better timing
// information for and save that information for sync purposes
for(var i=0;i<playlist.discontinuityStarts.length;i++){var segmentIndex=playlist.discontinuityStarts[i];var discontinuity=playlist.discontinuitySequence+i+1;var mediaIndexDiff=segmentIndex-segmentInfo.mediaIndex;var accuracy=Math.abs(mediaIndexDiff);if(!this.discontinuities[discontinuity]||this.discontinuities[discontinuity].accuracy>accuracy){var time=void 0;if(mediaIndexDiff<0){time=segment.start-sumDurations(playlist,segmentInfo.mediaIndex,segmentIndex);}else{time=segment.end+sumDurations(playlist,segmentInfo.mediaIndex+1,segmentIndex);}this.discontinuities[discontinuity]={time:time,accuracy:accuracy};}}}}}]);return SyncController;}(videojs$1.EventTarget);var Decrypter$1=new shimWorker("./decrypter-worker.worker.js",function(window,document$$1){var self=this;var decrypterWorker=function(){/*
     * pkcs7.pad
     * https://github.com/brightcove/pkcs7
     *
     * Copyright (c) 2014 Brightcove
     * Licensed under the apache2 license.
     *//**
     * Returns the subarray of a Uint8Array without PKCS#7 padding.
     * @param padded {Uint8Array} unencrypted bytes that have been padded
     * @return {Uint8Array} the unpadded bytes
     * @see http://tools.ietf.org/html/rfc5652
     */function unpad(padded){return padded.subarray(0,padded.byteLength-padded[padded.byteLength-1]);}var classCallCheck=function classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}};var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var inherits=function inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==='undefined'?'undefined':_typeof(superClass)));}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;};var possibleConstructorReturn=function possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&((typeof call==='undefined'?'undefined':_typeof(call))==="object"||typeof call==="function")?call:self;};/**
     * @file aes.js
     *
     * This file contains an adaptation of the AES decryption algorithm
     * from the Standford Javascript Cryptography Library. That work is
     * covered by the following copyright and permissions notice:
     *
     * Copyright 2009-2010 Emily Stark, Mike Hamburg, Dan Boneh.
     * All rights reserved.
     *
     * Redistribution and use in source and binary forms, with or without
     * modification, are permitted provided that the following conditions are
     * met:
     *
     * 1. Redistributions of source code must retain the above copyright
     *    notice, this list of conditions and the following disclaimer.
     *
     * 2. Redistributions in binary form must reproduce the above
     *    copyright notice, this list of conditions and the following
     *    disclaimer in the documentation and/or other materials provided
     *    with the distribution.
     *
     * THIS SOFTWARE IS PROVIDED BY THE AUTHORS ``AS IS'' AND ANY EXPRESS OR
     * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
     * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
     * DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR CONTRIBUTORS BE
     * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
     * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
     * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
     * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
     * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
     * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN
     * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
     *
     * The views and conclusions contained in the software and documentation
     * are those of the authors and should not be interpreted as representing
     * official policies, either expressed or implied, of the authors.
     *//**
     * Expand the S-box tables.
     *
     * @private
     */var precompute=function precompute(){var tables=[[[],[],[],[],[]],[[],[],[],[],[]]];var encTable=tables[0];var decTable=tables[1];var sbox=encTable[4];var sboxInv=decTable[4];var i=void 0;var x=void 0;var xInv=void 0;var d=[];var th=[];var x2=void 0;var x4=void 0;var x8=void 0;var s=void 0;var tEnc=void 0;var tDec=void 0;// Compute double and third tables
for(i=0;i<256;i++){th[(d[i]=i<<1^(i>>7)*283)^i]=i;}for(x=xInv=0;!sbox[x];x^=x2||1,xInv=th[xInv]||1){// Compute sbox
s=xInv^xInv<<1^xInv<<2^xInv<<3^xInv<<4;s=s>>8^s&255^99;sbox[x]=s;sboxInv[s]=x;// Compute MixColumns
x8=d[x4=d[x2=d[x]]];tDec=x8*0x1010101^x4*0x10001^x2*0x101^x*0x1010100;tEnc=d[s]*0x101^s*0x1010100;for(i=0;i<4;i++){encTable[i][x]=tEnc=tEnc<<24^tEnc>>>8;decTable[i][s]=tDec=tDec<<24^tDec>>>8;}}// Compactify. Considerable speedup on Firefox.
for(i=0;i<5;i++){encTable[i]=encTable[i].slice(0);decTable[i]=decTable[i].slice(0);}return tables;};var aesTables=null;/**
     * Schedule out an AES key for both encryption and decryption. This
     * is a low-level class. Use a cipher mode to do bulk encryption.
     *
     * @class AES
     * @param key {Array} The key as an array of 4, 6 or 8 words.
     */var AES=function(){function AES(key){classCallCheck(this,AES);/**
         * The expanded S-box and inverse S-box tables. These will be computed
         * on the client so that we don't have to send them down the wire.
         *
         * There are two tables, _tables[0] is for encryption and
         * _tables[1] is for decryption.
         *
         * The first 4 sub-tables are the expanded S-box with MixColumns. The
         * last (_tables[01][4]) is the S-box itself.
         *
         * @private
         */// if we have yet to precompute the S-box tables
// do so now
if(!aesTables){aesTables=precompute();}// then make a copy of that object for use
this._tables=[[aesTables[0][0].slice(),aesTables[0][1].slice(),aesTables[0][2].slice(),aesTables[0][3].slice(),aesTables[0][4].slice()],[aesTables[1][0].slice(),aesTables[1][1].slice(),aesTables[1][2].slice(),aesTables[1][3].slice(),aesTables[1][4].slice()]];var i=void 0;var j=void 0;var tmp=void 0;var encKey=void 0;var decKey=void 0;var sbox=this._tables[0][4];var decTable=this._tables[1];var keyLen=key.length;var rcon=1;if(keyLen!==4&&keyLen!==6&&keyLen!==8){throw new Error('Invalid aes key size');}encKey=key.slice(0);decKey=[];this._key=[encKey,decKey];// schedule encryption keys
for(i=keyLen;i<4*keyLen+28;i++){tmp=encKey[i-1];// apply sbox
if(i%keyLen===0||keyLen===8&&i%keyLen===4){tmp=sbox[tmp>>>24]<<24^sbox[tmp>>16&255]<<16^sbox[tmp>>8&255]<<8^sbox[tmp&255];// shift rows and add rcon
if(i%keyLen===0){tmp=tmp<<8^tmp>>>24^rcon<<24;rcon=rcon<<1^(rcon>>7)*283;}}encKey[i]=encKey[i-keyLen]^tmp;}// schedule decryption keys
for(j=0;i;j++,i--){tmp=encKey[j&3?i:i-4];if(i<=4||j<4){decKey[j]=tmp;}else{decKey[j]=decTable[0][sbox[tmp>>>24]]^decTable[1][sbox[tmp>>16&255]]^decTable[2][sbox[tmp>>8&255]]^decTable[3][sbox[tmp&255]];}}}/**
       * Decrypt 16 bytes, specified as four 32-bit words.
       *
       * @param {Number} encrypted0 the first word to decrypt
       * @param {Number} encrypted1 the second word to decrypt
       * @param {Number} encrypted2 the third word to decrypt
       * @param {Number} encrypted3 the fourth word to decrypt
       * @param {Int32Array} out the array to write the decrypted words
       * into
       * @param {Number} offset the offset into the output array to start
       * writing results
       * @return {Array} The plaintext.
       */AES.prototype.decrypt=function decrypt$$1(encrypted0,encrypted1,encrypted2,encrypted3,out,offset){var key=this._key[1];// state variables a,b,c,d are loaded with pre-whitened data
var a=encrypted0^key[0];var b=encrypted3^key[1];var c=encrypted2^key[2];var d=encrypted1^key[3];var a2=void 0;var b2=void 0;var c2=void 0;// key.length === 2 ?
var nInnerRounds=key.length/4-2;var i=void 0;var kIndex=4;var table=this._tables[1];// load up the tables
var table0=table[0];var table1=table[1];var table2=table[2];var table3=table[3];var sbox=table[4];// Inner rounds. Cribbed from OpenSSL.
for(i=0;i<nInnerRounds;i++){a2=table0[a>>>24]^table1[b>>16&255]^table2[c>>8&255]^table3[d&255]^key[kIndex];b2=table0[b>>>24]^table1[c>>16&255]^table2[d>>8&255]^table3[a&255]^key[kIndex+1];c2=table0[c>>>24]^table1[d>>16&255]^table2[a>>8&255]^table3[b&255]^key[kIndex+2];d=table0[d>>>24]^table1[a>>16&255]^table2[b>>8&255]^table3[c&255]^key[kIndex+3];kIndex+=4;a=a2;b=b2;c=c2;}// Last round.
for(i=0;i<4;i++){out[(3&-i)+offset]=sbox[a>>>24]<<24^sbox[b>>16&255]<<16^sbox[c>>8&255]<<8^sbox[d&255]^key[kIndex++];a2=a;a=b;b=c;c=d;d=a2;}};return AES;}();/**
     * @file stream.js
     *//**
     * A lightweight readable stream implemention that handles event dispatching.
     *
     * @class Stream
     */var Stream=function(){function Stream(){classCallCheck(this,Stream);this.listeners={};}/**
       * Add a listener for a specified event type.
       *
       * @param {String} type the event name
       * @param {Function} listener the callback to be invoked when an event of
       * the specified type occurs
       */Stream.prototype.on=function on(type,listener){if(!this.listeners[type]){this.listeners[type]=[];}this.listeners[type].push(listener);};/**
       * Remove a listener for a specified event type.
       *
       * @param {String} type the event name
       * @param {Function} listener  a function previously registered for this
       * type of event through `on`
       * @return {Boolean} if we could turn it off or not
       */Stream.prototype.off=function off(type,listener){if(!this.listeners[type]){return false;}var index=this.listeners[type].indexOf(listener);this.listeners[type].splice(index,1);return index>-1;};/**
       * Trigger an event of the specified type on this stream. Any additional
       * arguments to this function are passed as parameters to event listeners.
       *
       * @param {String} type the event name
       */Stream.prototype.trigger=function trigger(type){var callbacks=this.listeners[type];if(!callbacks){return;}// Slicing the arguments on every invocation of this method
// can add a significant amount of overhead. Avoid the
// intermediate object creation for the common case of a
// single callback argument
if(arguments.length===2){var length=callbacks.length;for(var i=0;i<length;++i){callbacks[i].call(this,arguments[1]);}}else{var args=Array.prototype.slice.call(arguments,1);var _length=callbacks.length;for(var _i=0;_i<_length;++_i){callbacks[_i].apply(this,args);}}};/**
       * Destroys the stream and cleans up.
       */Stream.prototype.dispose=function dispose(){this.listeners={};};/**
       * Forwards all `data` events on this stream to the destination stream. The
       * destination stream should provide a method `push` to receive the data
       * events as they arrive.
       *
       * @param {Stream} destination the stream that will receive all `data` events
       * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options
       */Stream.prototype.pipe=function pipe(destination){this.on('data',function(data){destination.push(data);});};return Stream;}();/**
     * @file async-stream.js
     *//**
     * A wrapper around the Stream class to use setTiemout
     * and run stream "jobs" Asynchronously
     *
     * @class AsyncStream
     * @extends Stream
     */var AsyncStream$$1=function(_Stream){inherits(AsyncStream$$1,_Stream);function AsyncStream$$1(){classCallCheck(this,AsyncStream$$1);var _this=possibleConstructorReturn(this,_Stream.call(this,Stream));_this.jobs=[];_this.delay=1;_this.timeout_=null;return _this;}/**
       * process an async job
       *
       * @private
       */AsyncStream$$1.prototype.processJob_=function processJob_(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay);}else{this.timeout_=null;}};/**
       * push a job into the stream
       *
       * @param {Function} job the job to push into the stream
       */AsyncStream$$1.prototype.push=function push(job){this.jobs.push(job);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay);}};return AsyncStream$$1;}(Stream);/**
     * @file decrypter.js
     *
     * An asynchronous implementation of AES-128 CBC decryption with
     * PKCS#7 padding.
     *//**
     * Convert network-order (big-endian) bytes into their little-endian
     * representation.
     */var ntoh=function ntoh(word){return word<<24|(word&0xff00)<<8|(word&0xff0000)>>8|word>>>24;};/**
     * Decrypt bytes using AES-128 with CBC and PKCS#7 padding.
     *
     * @param {Uint8Array} encrypted the encrypted bytes
     * @param {Uint32Array} key the bytes of the decryption key
     * @param {Uint32Array} initVector the initialization vector (IV) to
     * use for the first round of CBC.
     * @return {Uint8Array} the decrypted bytes
     *
     * @see http://en.wikipedia.org/wiki/Advanced_Encryption_Standard
     * @see http://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_Block_Chaining_.28CBC.29
     * @see https://tools.ietf.org/html/rfc2315
     */var decrypt$$1=function decrypt$$1(encrypted,key,initVector){// word-level access to the encrypted bytes
var encrypted32=new Int32Array(encrypted.buffer,encrypted.byteOffset,encrypted.byteLength>>2);var decipher=new AES(Array.prototype.slice.call(key));// byte and word-level access for the decrypted output
var decrypted=new Uint8Array(encrypted.byteLength);var decrypted32=new Int32Array(decrypted.buffer);// temporary variables for working with the IV, encrypted, and
// decrypted data
var init0=void 0;var init1=void 0;var init2=void 0;var init3=void 0;var encrypted0=void 0;var encrypted1=void 0;var encrypted2=void 0;var encrypted3=void 0;// iteration variable
var wordIx=void 0;// pull out the words of the IV to ensure we don't modify the
// passed-in reference and easier access
init0=initVector[0];init1=initVector[1];init2=initVector[2];init3=initVector[3];// decrypt four word sequences, applying cipher-block chaining (CBC)
// to each decrypted block
for(wordIx=0;wordIx<encrypted32.length;wordIx+=4){// convert big-endian (network order) words into little-endian
// (javascript order)
encrypted0=ntoh(encrypted32[wordIx]);encrypted1=ntoh(encrypted32[wordIx+1]);encrypted2=ntoh(encrypted32[wordIx+2]);encrypted3=ntoh(encrypted32[wordIx+3]);// decrypt the block
decipher.decrypt(encrypted0,encrypted1,encrypted2,encrypted3,decrypted32,wordIx);// XOR with the IV, and restore network byte-order to obtain the
// plaintext
decrypted32[wordIx]=ntoh(decrypted32[wordIx]^init0);decrypted32[wordIx+1]=ntoh(decrypted32[wordIx+1]^init1);decrypted32[wordIx+2]=ntoh(decrypted32[wordIx+2]^init2);decrypted32[wordIx+3]=ntoh(decrypted32[wordIx+3]^init3);// setup the IV for the next round
init0=encrypted0;init1=encrypted1;init2=encrypted2;init3=encrypted3;}return decrypted;};/**
     * The `Decrypter` class that manages decryption of AES
     * data through `AsyncStream` objects and the `decrypt`
     * function
     *
     * @param {Uint8Array} encrypted the encrypted bytes
     * @param {Uint32Array} key the bytes of the decryption key
     * @param {Uint32Array} initVector the initialization vector (IV) to
     * @param {Function} done the function to run when done
     * @class Decrypter
     */var Decrypter$$1=function(){function Decrypter$$1(encrypted,key,initVector,done){classCallCheck(this,Decrypter$$1);var step=Decrypter$$1.STEP;var encrypted32=new Int32Array(encrypted.buffer);var decrypted=new Uint8Array(encrypted.byteLength);var i=0;this.asyncStream_=new AsyncStream$$1();// split up the encryption job and do the individual chunks asynchronously
this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i,i+step),key,initVector,decrypted));for(i=step;i<encrypted32.length;i+=step){initVector=new Uint32Array([ntoh(encrypted32[i-4]),ntoh(encrypted32[i-3]),ntoh(encrypted32[i-2]),ntoh(encrypted32[i-1])]);this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i,i+step),key,initVector,decrypted));}// invoke the done() callback when everything is finished
this.asyncStream_.push(function(){// remove pkcs#7 padding from the decrypted bytes
done(null,unpad(decrypted));});}/**
       * a getter for step the maximum number of bytes to process at one time
       *
       * @return {Number} the value of step 32000
       *//**
       * @private
       */Decrypter$$1.prototype.decryptChunk_=function decryptChunk_(encrypted,key,initVector,decrypted){return function(){var bytes=decrypt$$1(encrypted,key,initVector);decrypted.set(bytes,encrypted.byteOffset);};};createClass(Decrypter$$1,null,[{key:'STEP',get:function get$$1(){// 4 * 8000;
return 32000;}}]);return Decrypter$$1;}();/**
     * @file bin-utils.js
     *//**
     * Creates an object for sending to a web worker modifying properties that are TypedArrays
     * into a new object with seperated properties for the buffer, byteOffset, and byteLength.
     *
     * @param {Object} message
     *        Object of properties and values to send to the web worker
     * @return {Object}
     *         Modified message with TypedArray values expanded
     * @function createTransferableMessage
     */var createTransferableMessage=function createTransferableMessage(message){var transferable={};Object.keys(message).forEach(function(key){var value=message[key];if(ArrayBuffer.isView(value)){transferable[key]={bytes:value.buffer,byteOffset:value.byteOffset,byteLength:value.byteLength};}else{transferable[key]=value;}});return transferable;};/**
     * Our web worker interface so that things can talk to aes-decrypter
     * that will be running in a web worker. the scope is passed to this by
     * webworkify.
     *
     * @param {Object} self
     *        the scope for the web worker
     */var DecrypterWorker=function DecrypterWorker(self){self.onmessage=function(event){var data=event.data;var encrypted=new Uint8Array(data.encrypted.bytes,data.encrypted.byteOffset,data.encrypted.byteLength);var key=new Uint32Array(data.key.bytes,data.key.byteOffset,data.key.byteLength/4);var iv=new Uint32Array(data.iv.bytes,data.iv.byteOffset,data.iv.byteLength/4);/* eslint-disable no-new, handle-callback-err */new Decrypter$$1(encrypted,key,iv,function(err,bytes){self.postMessage(createTransferableMessage({source:data.source,decrypted:bytes}),[bytes.buffer]);});/* eslint-enable */};};var decrypterWorker=new DecrypterWorker(self);return decrypterWorker;}();});/**
 * Convert the properties of an HLS track into an audioTrackKind.
 *
 * @private
 */var audioTrackKind_=function audioTrackKind_(properties){var kind=properties.default?'main':'alternative';if(properties.characteristics&&properties.characteristics.indexOf('public.accessibility.describes-video')>=0){kind='main-desc';}return kind;};/**
 * Pause provided segment loader and playlist loader if active
 *
 * @param {SegmentLoader} segmentLoader
 *        SegmentLoader to pause
 * @param {Object} mediaType
 *        Active media type
 * @function stopLoaders
 */var stopLoaders=function stopLoaders(segmentLoader,mediaType){segmentLoader.abort();segmentLoader.pause();if(mediaType&&mediaType.activePlaylistLoader){mediaType.activePlaylistLoader.pause();mediaType.activePlaylistLoader=null;}};/**
 * Start loading provided segment loader and playlist loader
 *
 * @param {PlaylistLoader} playlistLoader
 *        PlaylistLoader to start loading
 * @param {Object} mediaType
 *        Active media type
 * @function startLoaders
 */var startLoaders=function startLoaders(playlistLoader,mediaType){// Segment loader will be started after `loadedmetadata` or `loadedplaylist` from the
// playlist loader
mediaType.activePlaylistLoader=playlistLoader;playlistLoader.load();};/**
 * Returns a function to be called when the media group changes. It performs a
 * non-destructive (preserve the buffer) resync of the SegmentLoader. This is because a
 * change of group is merely a rendition switch of the same content at another encoding,
 * rather than a change of content, such as switching audio from English to Spanish.
 *
 * @param {String} type
 *        MediaGroup type
 * @param {Object} settings
 *        Object containing required information for media groups
 * @return {Function}
 *         Handler for a non-destructive resync of SegmentLoader when the active media
 *         group changes.
 * @function onGroupChanged
 */var onGroupChanged=function onGroupChanged(type,settings){return function(){var _settings$segmentLoad=settings.segmentLoaders,segmentLoader=_settings$segmentLoad[type],mainSegmentLoader=_settings$segmentLoad.main,mediaType=settings.mediaTypes[type];var activeTrack=mediaType.activeTrack();var activeGroup=mediaType.activeGroup(activeTrack);var previousActiveLoader=mediaType.activePlaylistLoader;stopLoaders(segmentLoader,mediaType);if(!activeGroup){// there is no group active
return;}if(!activeGroup.playlistLoader){if(previousActiveLoader){// The previous group had a playlist loader but the new active group does not
// this means we are switching from demuxed to muxed audio. In this case we want to
// do a destructive reset of the main segment loader and not restart the audio
// loaders.
mainSegmentLoader.resetEverything();}return;}// Non-destructive resync
segmentLoader.resyncLoader();startLoaders(activeGroup.playlistLoader,mediaType);};};/**
 * Returns a function to be called when the media track changes. It performs a
 * destructive reset of the SegmentLoader to ensure we start loading as close to
 * currentTime as possible.
 *
 * @param {String} type
 *        MediaGroup type
 * @param {Object} settings
 *        Object containing required information for media groups
 * @return {Function}
 *         Handler for a destructive reset of SegmentLoader when the active media
 *         track changes.
 * @function onTrackChanged
 */var onTrackChanged=function onTrackChanged(type,settings){return function(){var _settings$segmentLoad2=settings.segmentLoaders,segmentLoader=_settings$segmentLoad2[type],mainSegmentLoader=_settings$segmentLoad2.main,mediaType=settings.mediaTypes[type];var activeTrack=mediaType.activeTrack();var activeGroup=mediaType.activeGroup(activeTrack);var previousActiveLoader=mediaType.activePlaylistLoader;stopLoaders(segmentLoader,mediaType);if(!activeGroup){// there is no group active so we do not want to restart loaders
return;}if(!activeGroup.playlistLoader){// when switching from demuxed audio/video to muxed audio/video (noted by no playlist
// loader for the audio group), we want to do a destructive reset of the main segment
// loader and not restart the audio loaders
mainSegmentLoader.resetEverything();return;}if(previousActiveLoader===activeGroup.playlistLoader){// Nothing has actually changed. This can happen because track change events can fire
// multiple times for a "single" change. One for enabling the new active track, and
// one for disabling the track that was active
startLoaders(activeGroup.playlistLoader,mediaType);return;}if(segmentLoader.track){// For WebVTT, set the new text track in the segmentloader
segmentLoader.track(activeTrack);}// destructive reset
segmentLoader.resetEverything();startLoaders(activeGroup.playlistLoader,mediaType);};};var onError={/**
   * Returns a function to be called when a SegmentLoader or PlaylistLoader encounters
   * an error.
   *
   * @param {String} type
   *        MediaGroup type
   * @param {Object} settings
   *        Object containing required information for media groups
   * @return {Function}
   *         Error handler. Logs warning (or error if the playlist is blacklisted) to
   *         console and switches back to default audio track.
   * @function onError.AUDIO
   */AUDIO:function AUDIO(type,settings){return function(){var segmentLoader=settings.segmentLoaders[type],mediaType=settings.mediaTypes[type],blacklistCurrentPlaylist=settings.blacklistCurrentPlaylist;stopLoaders(segmentLoader,mediaType);// switch back to default audio track
var activeTrack=mediaType.activeTrack();var activeGroup=mediaType.activeGroup();var id=(activeGroup.filter(function(group){return group.default;})[0]||activeGroup[0]).id;var defaultTrack=mediaType.tracks[id];if(activeTrack===defaultTrack){// Default track encountered an error. All we can do now is blacklist the current
// rendition and hope another will switch audio groups
blacklistCurrentPlaylist({message:'Problem encountered loading the default audio track.'});return;}videojs$1.log.warn('Problem encountered loading the alternate audio track.'+'Switching back to default.');for(var trackId in mediaType.tracks){mediaType.tracks[trackId].enabled=mediaType.tracks[trackId]===defaultTrack;}mediaType.onTrackChanged();};},/**
   * Returns a function to be called when a SegmentLoader or PlaylistLoader encounters
   * an error.
   *
   * @param {String} type
   *        MediaGroup type
   * @param {Object} settings
   *        Object containing required information for media groups
   * @return {Function}
   *         Error handler. Logs warning to console and disables the active subtitle track
   * @function onError.SUBTITLES
   */SUBTITLES:function SUBTITLES(type,settings){return function(){var segmentLoader=settings.segmentLoaders[type],mediaType=settings.mediaTypes[type];videojs$1.log.warn('Problem encountered loading the subtitle track.'+'Disabling subtitle track.');stopLoaders(segmentLoader,mediaType);var track=mediaType.activeTrack();if(track){track.mode='disabled';}mediaType.onTrackChanged();};}};var setupListeners={/**
   * Setup event listeners for audio playlist loader
   *
   * @param {String} type
   *        MediaGroup type
   * @param {PlaylistLoader|null} playlistLoader
   *        PlaylistLoader to register listeners on
   * @param {Object} settings
   *        Object containing required information for media groups
   * @function setupListeners.AUDIO
   */AUDIO:function AUDIO(type,playlistLoader,settings){if(!playlistLoader){// no playlist loader means audio will be muxed with the video
return;}var tech=settings.tech,requestOptions=settings.requestOptions,segmentLoader=settings.segmentLoaders[type];playlistLoader.on('loadedmetadata',function(){var media=playlistLoader.media();segmentLoader.playlist(media,requestOptions);// if the video is already playing, or if this isn't a live video and preload
// permits, start downloading segments
if(!tech.paused()||media.endList&&tech.preload()!=='none'){segmentLoader.load();}});playlistLoader.on('loadedplaylist',function(){segmentLoader.playlist(playlistLoader.media(),requestOptions);// If the player isn't paused, ensure that the segment loader is running
if(!tech.paused()){segmentLoader.load();}});playlistLoader.on('error',onError[type](type,settings));},/**
   * Setup event listeners for subtitle playlist loader
   *
   * @param {String} type
   *        MediaGroup type
   * @param {PlaylistLoader|null} playlistLoader
   *        PlaylistLoader to register listeners on
   * @param {Object} settings
   *        Object containing required information for media groups
   * @function setupListeners.SUBTITLES
   */SUBTITLES:function SUBTITLES(type,playlistLoader,settings){var tech=settings.tech,requestOptions=settings.requestOptions,segmentLoader=settings.segmentLoaders[type],mediaType=settings.mediaTypes[type];playlistLoader.on('loadedmetadata',function(){var media=playlistLoader.media();segmentLoader.playlist(media,requestOptions);segmentLoader.track(mediaType.activeTrack());// if the video is already playing, or if this isn't a live video and preload
// permits, start downloading segments
if(!tech.paused()||media.endList&&tech.preload()!=='none'){segmentLoader.load();}});playlistLoader.on('loadedplaylist',function(){segmentLoader.playlist(playlistLoader.media(),requestOptions);// If the player isn't paused, ensure that the segment loader is running
if(!tech.paused()){segmentLoader.load();}});playlistLoader.on('error',onError[type](type,settings));}};var byGroupId=function byGroupId(type,groupId){return function(playlist){return playlist.attributes[type]===groupId;};};var byResolvedUri=function byResolvedUri(resolvedUri){return function(playlist){return playlist.resolvedUri===resolvedUri;};};var initialize={/**
   * Setup PlaylistLoaders and AudioTracks for the audio groups
   *
   * @param {String} type
   *        MediaGroup type
   * @param {Object} settings
   *        Object containing required information for media groups
   * @function initialize.AUDIO
   */'AUDIO':function AUDIO(type,settings){var hls=settings.hls,sourceType=settings.sourceType,segmentLoader=settings.segmentLoaders[type],requestOptions=settings.requestOptions,_settings$master=settings.master,mediaGroups=_settings$master.mediaGroups,playlists=_settings$master.playlists,_settings$mediaTypes$=settings.mediaTypes[type],groups=_settings$mediaTypes$.groups,tracks=_settings$mediaTypes$.tracks,masterPlaylistLoader=settings.masterPlaylistLoader;// force a default if we have none
if(!mediaGroups[type]||Object.keys(mediaGroups[type]).length===0){mediaGroups[type]={main:{default:{default:true}}};}for(var groupId in mediaGroups[type]){if(!groups[groupId]){groups[groupId]=[];}// List of playlists that have an AUDIO attribute value matching the current
// group ID
var groupPlaylists=playlists.filter(byGroupId(type,groupId));for(var variantLabel in mediaGroups[type][groupId]){var properties=mediaGroups[type][groupId][variantLabel];// List of playlists for the current group ID that have a matching uri with
// this alternate audio variant
var matchingPlaylists=groupPlaylists.filter(byResolvedUri(properties.resolvedUri));if(matchingPlaylists.length){// If there is a playlist that has the same uri as this audio variant, assume
// that the playlist is audio only. We delete the resolvedUri property here
// to prevent a playlist loader from being created so that we don't have
// both the main and audio segment loaders loading the same audio segments
// from the same playlist.
delete properties.resolvedUri;}var playlistLoader=void 0;if(properties.resolvedUri){playlistLoader=new PlaylistLoader(properties.resolvedUri,hls,requestOptions);}else if(properties.playlists&&sourceType==='dash'){playlistLoader=new DashPlaylistLoader(properties.playlists[0],hls,requestOptions,masterPlaylistLoader);}else{// no resolvedUri means the audio is muxed with the video when using this
// audio track
playlistLoader=null;}properties=videojs$1.mergeOptions({id:variantLabel,playlistLoader:playlistLoader},properties);setupListeners[type](type,properties.playlistLoader,settings);groups[groupId].push(properties);if(typeof tracks[variantLabel]==='undefined'){var track=new videojs$1.AudioTrack({id:variantLabel,kind:audioTrackKind_(properties),enabled:false,language:properties.language,default:properties.default,label:variantLabel});tracks[variantLabel]=track;}}}// setup single error event handler for the segment loader
segmentLoader.on('error',onError[type](type,settings));},/**
   * Setup PlaylistLoaders and TextTracks for the subtitle groups
   *
   * @param {String} type
   *        MediaGroup type
   * @param {Object} settings
   *        Object containing required information for media groups
   * @function initialize.SUBTITLES
   */'SUBTITLES':function SUBTITLES(type,settings){var tech=settings.tech,hls=settings.hls,sourceType=settings.sourceType,segmentLoader=settings.segmentLoaders[type],requestOptions=settings.requestOptions,mediaGroups=settings.master.mediaGroups,_settings$mediaTypes$2=settings.mediaTypes[type],groups=_settings$mediaTypes$2.groups,tracks=_settings$mediaTypes$2.tracks,masterPlaylistLoader=settings.masterPlaylistLoader;for(var groupId in mediaGroups[type]){if(!groups[groupId]){groups[groupId]=[];}for(var variantLabel in mediaGroups[type][groupId]){if(mediaGroups[type][groupId][variantLabel].forced){// Subtitle playlists with the forced attribute are not selectable in Safari.
// According to Apple's HLS Authoring Specification:
//   If content has forced subtitles and regular subtitles in a given language,
//   the regular subtitles track in that language MUST contain both the forced
//   subtitles and the regular subtitles for that language.
// Because of this requirement and that Safari does not add forced subtitles,
// forced subtitles are skipped here to maintain consistent experience across
// all platforms
continue;}var properties=mediaGroups[type][groupId][variantLabel];var playlistLoader=void 0;if(sourceType==='hls'){playlistLoader=new PlaylistLoader(properties.resolvedUri,hls,requestOptions);}else if(sourceType==='dash'){playlistLoader=new DashPlaylistLoader(properties.playlists[0],hls,requestOptions,masterPlaylistLoader);}properties=videojs$1.mergeOptions({id:variantLabel,playlistLoader:playlistLoader},properties);setupListeners[type](type,properties.playlistLoader,settings);groups[groupId].push(properties);if(typeof tracks[variantLabel]==='undefined'){var track=tech.addRemoteTextTrack({id:variantLabel,kind:'subtitles',default:properties.default&&properties.autoselect,language:properties.language,label:variantLabel},false).track;tracks[variantLabel]=track;}}}// setup single error event handler for the segment loader
segmentLoader.on('error',onError[type](type,settings));},/**
   * Setup TextTracks for the closed-caption groups
   *
   * @param {String} type
   *        MediaGroup type
   * @param {Object} settings
   *        Object containing required information for media groups
   * @function initialize['CLOSED-CAPTIONS']
   */'CLOSED-CAPTIONS':function CLOSEDCAPTIONS(type,settings){var tech=settings.tech,mediaGroups=settings.master.mediaGroups,_settings$mediaTypes$3=settings.mediaTypes[type],groups=_settings$mediaTypes$3.groups,tracks=_settings$mediaTypes$3.tracks;for(var groupId in mediaGroups[type]){if(!groups[groupId]){groups[groupId]=[];}for(var variantLabel in mediaGroups[type][groupId]){var properties=mediaGroups[type][groupId][variantLabel];// We only support CEA608 captions for now, so ignore anything that
// doesn't use a CCx INSTREAM-ID
if(!properties.instreamId.match(/CC\d/)){continue;}// No PlaylistLoader is required for Closed-Captions because the captions are
// embedded within the video stream
groups[groupId].push(videojs$1.mergeOptions({id:variantLabel},properties));if(typeof tracks[variantLabel]==='undefined'){var track=tech.addRemoteTextTrack({id:properties.instreamId,kind:'captions',default:properties.default&&properties.autoselect,language:properties.language,label:variantLabel},false).track;tracks[variantLabel]=track;}}}}};/**
 * Returns a function used to get the active group of the provided type
 *
 * @param {String} type
 *        MediaGroup type
 * @param {Object} settings
 *        Object containing required information for media groups
 * @return {Function}
 *         Function that returns the active media group for the provided type. Takes an
 *         optional parameter {TextTrack} track. If no track is provided, a list of all
 *         variants in the group, otherwise the variant corresponding to the provided
 *         track is returned.
 * @function activeGroup
 */var activeGroup=function activeGroup(type,settings){return function(track){var masterPlaylistLoader=settings.masterPlaylistLoader,groups=settings.mediaTypes[type].groups;var media=masterPlaylistLoader.media();if(!media){return null;}var variants=null;if(media.attributes[type]){variants=groups[media.attributes[type]];}variants=variants||groups.main;if(typeof track==='undefined'){return variants;}if(track===null){// An active track was specified so a corresponding group is expected. track === null
// means no track is currently active so there is no corresponding group
return null;}return variants.filter(function(props){return props.id===track.id;})[0]||null;};};var activeTrack={/**
   * Returns a function used to get the active track of type provided
   *
   * @param {String} type
   *        MediaGroup type
   * @param {Object} settings
   *        Object containing required information for media groups
   * @return {Function}
   *         Function that returns the active media track for the provided type. Returns
   *         null if no track is active
   * @function activeTrack.AUDIO
   */AUDIO:function AUDIO(type,settings){return function(){var tracks=settings.mediaTypes[type].tracks;for(var id in tracks){if(tracks[id].enabled){return tracks[id];}}return null;};},/**
   * Returns a function used to get the active track of type provided
   *
   * @param {String} type
   *        MediaGroup type
   * @param {Object} settings
   *        Object containing required information for media groups
   * @return {Function}
   *         Function that returns the active media track for the provided type. Returns
   *         null if no track is active
   * @function activeTrack.SUBTITLES
   */SUBTITLES:function SUBTITLES(type,settings){return function(){var tracks=settings.mediaTypes[type].tracks;for(var id in tracks){if(tracks[id].mode==='showing'){return tracks[id];}}return null;};}};/**
 * Setup PlaylistLoaders and Tracks for media groups (Audio, Subtitles,
 * Closed-Captions) specified in the master manifest.
 *
 * @param {Object} settings
 *        Object containing required information for setting up the media groups
 * @param {SegmentLoader} settings.segmentLoaders.AUDIO
 *        Audio segment loader
 * @param {SegmentLoader} settings.segmentLoaders.SUBTITLES
 *        Subtitle segment loader
 * @param {SegmentLoader} settings.segmentLoaders.main
 *        Main segment loader
 * @param {Tech} settings.tech
 *        The tech of the player
 * @param {Object} settings.requestOptions
 *        XHR request options used by the segment loaders
 * @param {PlaylistLoader} settings.masterPlaylistLoader
 *        PlaylistLoader for the master source
 * @param {HlsHandler} settings.hls
 *        HLS SourceHandler
 * @param {Object} settings.master
 *        The parsed master manifest
 * @param {Object} settings.mediaTypes
 *        Object to store the loaders, tracks, and utility methods for each media type
 * @param {Function} settings.blacklistCurrentPlaylist
 *        Blacklists the current rendition and forces a rendition switch.
 * @function setupMediaGroups
 */var setupMediaGroups=function setupMediaGroups(settings){['AUDIO','SUBTITLES','CLOSED-CAPTIONS'].forEach(function(type){initialize[type](type,settings);});var mediaTypes=settings.mediaTypes,masterPlaylistLoader=settings.masterPlaylistLoader,tech=settings.tech,hls=settings.hls;// setup active group and track getters and change event handlers
['AUDIO','SUBTITLES'].forEach(function(type){mediaTypes[type].activeGroup=activeGroup(type,settings);mediaTypes[type].activeTrack=activeTrack[type](type,settings);mediaTypes[type].onGroupChanged=onGroupChanged(type,settings);mediaTypes[type].onTrackChanged=onTrackChanged(type,settings);});// DO NOT enable the default subtitle or caption track.
// DO enable the default audio track
var audioGroup=mediaTypes.AUDIO.activeGroup();var groupId=(audioGroup.filter(function(group){return group.default;})[0]||audioGroup[0]).id;mediaTypes.AUDIO.tracks[groupId].enabled=true;mediaTypes.AUDIO.onTrackChanged();masterPlaylistLoader.on('mediachange',function(){['AUDIO','SUBTITLES'].forEach(function(type){return mediaTypes[type].onGroupChanged();});});// custom audio track change event handler for usage event
var onAudioTrackChanged=function onAudioTrackChanged(){mediaTypes.AUDIO.onTrackChanged();tech.trigger({type:'usage',name:'hls-audio-change'});};tech.audioTracks().addEventListener('change',onAudioTrackChanged);tech.remoteTextTracks().addEventListener('change',mediaTypes.SUBTITLES.onTrackChanged);hls.on('dispose',function(){tech.audioTracks().removeEventListener('change',onAudioTrackChanged);tech.remoteTextTracks().removeEventListener('change',mediaTypes.SUBTITLES.onTrackChanged);});// clear existing audio tracks and add the ones we just created
tech.clearTracks('audio');for(var id in mediaTypes.AUDIO.tracks){tech.audioTracks().addTrack(mediaTypes.AUDIO.tracks[id]);}};/**
 * Creates skeleton object used to store the loaders, tracks, and utility methods for each
 * media type
 *
 * @return {Object}
 *         Object to store the loaders, tracks, and utility methods for each media type
 * @function createMediaTypes
 */var createMediaTypes=function createMediaTypes(){var mediaTypes={};['AUDIO','SUBTITLES','CLOSED-CAPTIONS'].forEach(function(type){mediaTypes[type]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:noop,activeTrack:noop,onGroupChanged:noop,onTrackChanged:noop};});return mediaTypes;};/**
 * @file master-playlist-controller.js
 */var ABORT_EARLY_BLACKLIST_SECONDS=60*2;var Hls=void 0;// SegmentLoader stats that need to have each loader's
// values summed to calculate the final value
var loaderStats=['mediaRequests','mediaRequestsAborted','mediaRequestsTimedout','mediaRequestsErrored','mediaTransferDuration','mediaBytesTransferred'];var sumLoaderStat=function sumLoaderStat(stat){return this.audioSegmentLoader_[stat]+this.mainSegmentLoader_[stat];};/**
 * the master playlist controller controller all interactons
 * between playlists and segmentloaders. At this time this mainly
 * involves a master playlist and a series of audio playlists
 * if they are available
 *
 * @class MasterPlaylistController
 * @extends videojs.EventTarget
 */var MasterPlaylistController=function(_videojs$EventTarget){inherits(MasterPlaylistController,_videojs$EventTarget);function MasterPlaylistController(options){classCallCheck(this,MasterPlaylistController);var _this=possibleConstructorReturn(this,(MasterPlaylistController.__proto__||Object.getPrototypeOf(MasterPlaylistController)).call(this));var url=options.url,handleManifestRedirects=options.handleManifestRedirects,withCredentials=options.withCredentials,tech=options.tech,bandwidth=options.bandwidth,externHls=options.externHls,useCueTags=options.useCueTags,blacklistDuration=options.blacklistDuration,enableLowInitialPlaylist=options.enableLowInitialPlaylist,sourceType=options.sourceType,seekTo=options.seekTo;if(!url){throw new Error('A non-empty playlist URL is required');}Hls=externHls;_this.withCredentials=withCredentials;_this.tech_=tech;_this.hls_=tech.hls;_this.seekTo_=seekTo;_this.sourceType_=sourceType;_this.useCueTags_=useCueTags;_this.blacklistDuration=blacklistDuration;_this.enableLowInitialPlaylist=enableLowInitialPlaylist;if(_this.useCueTags_){_this.cueTagsTrack_=_this.tech_.addTextTrack('metadata','ad-cues');_this.cueTagsTrack_.inBandMetadataTrackDispatchType='';}_this.requestOptions_={withCredentials:withCredentials,handleManifestRedirects:handleManifestRedirects,timeout:null};_this.mediaTypes_=createMediaTypes();_this.mediaSource=new videojs$1.MediaSource();// load the media source into the player
_this.mediaSource.addEventListener('sourceopen',_this.handleSourceOpen_.bind(_this));_this.seekable_=videojs$1.createTimeRanges();_this.hasPlayed_=function(){return false;};_this.syncController_=new SyncController(options);_this.segmentMetadataTrack_=tech.addRemoteTextTrack({kind:'metadata',label:'segment-metadata'},false).track;_this.decrypter_=new Decrypter$1();_this.inbandTextTracks_={};var segmentLoaderSettings={hls:_this.hls_,mediaSource:_this.mediaSource,currentTime:_this.tech_.currentTime.bind(_this.tech_),seekable:function seekable$$1(){return _this.seekable();},seeking:function seeking(){return _this.tech_.seeking();},duration:function duration$$1(){return _this.mediaSource.duration;},hasPlayed:function hasPlayed(){return _this.hasPlayed_();},goalBufferLength:function goalBufferLength(){return _this.goalBufferLength();},bandwidth:bandwidth,syncController:_this.syncController_,decrypter:_this.decrypter_,sourceType:_this.sourceType_,inbandTextTracks:_this.inbandTextTracks_};_this.masterPlaylistLoader_=_this.sourceType_==='dash'?new DashPlaylistLoader(url,_this.hls_,_this.requestOptions_):new PlaylistLoader(url,_this.hls_,_this.requestOptions_);_this.setupMasterPlaylistLoaderListeners_();// setup segment loaders
// combined audio/video or just video when alternate audio track is selected
_this.mainSegmentLoader_=new SegmentLoader(videojs$1.mergeOptions(segmentLoaderSettings,{segmentMetadataTrack:_this.segmentMetadataTrack_,loaderType:'main'}),options);// alternate audio track
_this.audioSegmentLoader_=new SegmentLoader(videojs$1.mergeOptions(segmentLoaderSettings,{loaderType:'audio'}),options);_this.subtitleSegmentLoader_=new VTTSegmentLoader(videojs$1.mergeOptions(segmentLoaderSettings,{loaderType:'vtt'}),options);_this.setupSegmentLoaderListeners_();// Create SegmentLoader stat-getters
loaderStats.forEach(function(stat){_this[stat+'_']=sumLoaderStat.bind(_this,stat);});_this.logger_=logger('MPC');_this.masterPlaylistLoader_.load();return _this;}/**
   * Register event handlers on the master playlist loader. A helper
   * function for construction time.
   *
   * @private
   */createClass(MasterPlaylistController,[{key:'setupMasterPlaylistLoaderListeners_',value:function setupMasterPlaylistLoaderListeners_(){var _this2=this;this.masterPlaylistLoader_.on('loadedmetadata',function(){var media=_this2.masterPlaylistLoader_.media();var requestTimeout=media.targetDuration*1.5*1000;// If we don't have any more available playlists, we don't want to
// timeout the request.
if(isLowestEnabledRendition(_this2.masterPlaylistLoader_.master,_this2.masterPlaylistLoader_.media())){_this2.requestOptions_.timeout=0;}else{_this2.requestOptions_.timeout=requestTimeout;}// if this isn't a live video and preload permits, start
// downloading segments
if(media.endList&&_this2.tech_.preload()!=='none'){_this2.mainSegmentLoader_.playlist(media,_this2.requestOptions_);_this2.mainSegmentLoader_.load();}setupMediaGroups({sourceType:_this2.sourceType_,segmentLoaders:{AUDIO:_this2.audioSegmentLoader_,SUBTITLES:_this2.subtitleSegmentLoader_,main:_this2.mainSegmentLoader_},tech:_this2.tech_,requestOptions:_this2.requestOptions_,masterPlaylistLoader:_this2.masterPlaylistLoader_,hls:_this2.hls_,master:_this2.master(),mediaTypes:_this2.mediaTypes_,blacklistCurrentPlaylist:_this2.blacklistCurrentPlaylist.bind(_this2)});_this2.triggerPresenceUsage_(_this2.master(),media);try{_this2.setupSourceBuffers_();}catch(e){videojs$1.log.warn('Failed to create SourceBuffers',e);return _this2.mediaSource.endOfStream('decode');}_this2.setupFirstPlay();if(!_this2.mediaTypes_.AUDIO.activePlaylistLoader||_this2.mediaTypes_.AUDIO.activePlaylistLoader.media()){_this2.trigger('selectedinitialmedia');}else{// We must wait for the active audio playlist loader to
// finish setting up before triggering this event so the
// representations API and EME setup is correct
_this2.mediaTypes_.AUDIO.activePlaylistLoader.one('loadedmetadata',function(){_this2.trigger('selectedinitialmedia');});}});this.masterPlaylistLoader_.on('loadedplaylist',function(){var updatedPlaylist=_this2.masterPlaylistLoader_.media();if(!updatedPlaylist){// blacklist any variants that are not supported by the browser before selecting
// an initial media as the playlist selectors do not consider browser support
_this2.excludeUnsupportedVariants_();var selectedMedia=void 0;if(_this2.enableLowInitialPlaylist){selectedMedia=_this2.selectInitialPlaylist();}if(!selectedMedia){selectedMedia=_this2.selectPlaylist();}_this2.initialMedia_=selectedMedia;_this2.masterPlaylistLoader_.media(_this2.initialMedia_);return;}if(_this2.useCueTags_){_this2.updateAdCues_(updatedPlaylist);}// TODO: Create a new event on the PlaylistLoader that signals
// that the segments have changed in some way and use that to
// update the SegmentLoader instead of doing it twice here and
// on `mediachange`
_this2.mainSegmentLoader_.playlist(updatedPlaylist,_this2.requestOptions_);_this2.updateDuration();// If the player isn't paused, ensure that the segment loader is running,
// as it is possible that it was temporarily stopped while waiting for
// a playlist (e.g., in case the playlist errored and we re-requested it).
if(!_this2.tech_.paused()){_this2.mainSegmentLoader_.load();if(_this2.audioSegmentLoader_){_this2.audioSegmentLoader_.load();}}if(!updatedPlaylist.endList){var addSeekableRange=function addSeekableRange(){var seekable$$1=_this2.seekable();if(seekable$$1.length!==0){_this2.mediaSource.addSeekableRange_(seekable$$1.start(0),seekable$$1.end(0));}};if(_this2.duration()!==Infinity){var onDurationchange=function onDurationchange(){if(_this2.duration()===Infinity){addSeekableRange();}else{_this2.tech_.one('durationchange',onDurationchange);}};_this2.tech_.one('durationchange',onDurationchange);}else{addSeekableRange();}}});this.masterPlaylistLoader_.on('error',function(){_this2.blacklistCurrentPlaylist(_this2.masterPlaylistLoader_.error);});this.masterPlaylistLoader_.on('mediachanging',function(){_this2.mainSegmentLoader_.abort();_this2.mainSegmentLoader_.pause();});this.masterPlaylistLoader_.on('mediachange',function(){var media=_this2.masterPlaylistLoader_.media();var requestTimeout=media.targetDuration*1.5*1000;// If we don't have any more available playlists, we don't want to
// timeout the request.
if(isLowestEnabledRendition(_this2.masterPlaylistLoader_.master,_this2.masterPlaylistLoader_.media())){_this2.requestOptions_.timeout=0;}else{_this2.requestOptions_.timeout=requestTimeout;}// TODO: Create a new event on the PlaylistLoader that signals
// that the segments have changed in some way and use that to
// update the SegmentLoader instead of doing it twice here and
// on `loadedplaylist`
_this2.mainSegmentLoader_.playlist(media,_this2.requestOptions_);_this2.mainSegmentLoader_.load();_this2.tech_.trigger({type:'mediachange',bubbles:true});});this.masterPlaylistLoader_.on('playlistunchanged',function(){var updatedPlaylist=_this2.masterPlaylistLoader_.media();var playlistOutdated=_this2.stuckAtPlaylistEnd_(updatedPlaylist);if(playlistOutdated){// Playlist has stopped updating and we're stuck at its end. Try to
// blacklist it and switch to another playlist in the hope that that
// one is updating (and give the player a chance to re-adjust to the
// safe live point).
_this2.blacklistCurrentPlaylist({message:'Playlist no longer updating.'});// useful for monitoring QoS
_this2.tech_.trigger('playliststuck');}});this.masterPlaylistLoader_.on('renditiondisabled',function(){_this2.tech_.trigger({type:'usage',name:'hls-rendition-disabled'});});this.masterPlaylistLoader_.on('renditionenabled',function(){_this2.tech_.trigger({type:'usage',name:'hls-rendition-enabled'});});}/**
     * A helper function for triggerring presence usage events once per source
     *
     * @private
     */},{key:'triggerPresenceUsage_',value:function triggerPresenceUsage_(master,media){var mediaGroups=master.mediaGroups||{};var defaultDemuxed=true;var audioGroupKeys=Object.keys(mediaGroups.AUDIO);for(var mediaGroup in mediaGroups.AUDIO){for(var label in mediaGroups.AUDIO[mediaGroup]){var properties=mediaGroups.AUDIO[mediaGroup][label];if(!properties.uri){defaultDemuxed=false;}}}if(defaultDemuxed){this.tech_.trigger({type:'usage',name:'hls-demuxed'});}if(Object.keys(mediaGroups.SUBTITLES).length){this.tech_.trigger({type:'usage',name:'hls-webvtt'});}if(Hls.Playlist.isAes(media)){this.tech_.trigger({type:'usage',name:'hls-aes'});}if(Hls.Playlist.isFmp4(media)){this.tech_.trigger({type:'usage',name:'hls-fmp4'});}if(audioGroupKeys.length&&Object.keys(mediaGroups.AUDIO[audioGroupKeys[0]]).length>1){this.tech_.trigger({type:'usage',name:'hls-alternate-audio'});}if(this.useCueTags_){this.tech_.trigger({type:'usage',name:'hls-playlist-cue-tags'});}}/**
     * Register event handlers on the segment loaders. A helper function
     * for construction time.
     *
     * @private
     */},{key:'setupSegmentLoaderListeners_',value:function setupSegmentLoaderListeners_(){var _this3=this;this.mainSegmentLoader_.on('bandwidthupdate',function(){var nextPlaylist=_this3.selectPlaylist();var currentPlaylist=_this3.masterPlaylistLoader_.media();var buffered=_this3.tech_.buffered();var forwardBuffer=buffered.length?buffered.end(buffered.length-1)-_this3.tech_.currentTime():0;var bufferLowWaterLine=_this3.bufferLowWaterLine();// If the playlist is live, then we want to not take low water line into account.
// This is because in LIVE, the player plays 3 segments from the end of the
// playlist, and if `BUFFER_LOW_WATER_LINE` is greater than the duration availble
// in those segments, a viewer will never experience a rendition upswitch.
if(!currentPlaylist.endList||// For the same reason as LIVE, we ignore the low water line when the VOD
// duration is below the max potential low water line
_this3.duration()<Config.MAX_BUFFER_LOW_WATER_LINE||// we want to switch down to lower resolutions quickly to continue playback, but
nextPlaylist.attributes.BANDWIDTH<currentPlaylist.attributes.BANDWIDTH||// ensure we have some buffer before we switch up to prevent us running out of
// buffer while loading a higher rendition.
forwardBuffer>=bufferLowWaterLine){_this3.masterPlaylistLoader_.media(nextPlaylist);}_this3.tech_.trigger('bandwidthupdate');});this.mainSegmentLoader_.on('progress',function(){_this3.trigger('progress');});this.mainSegmentLoader_.on('error',function(){_this3.blacklistCurrentPlaylist(_this3.mainSegmentLoader_.error());});this.mainSegmentLoader_.on('syncinfoupdate',function(){_this3.onSyncInfoUpdate_();});this.mainSegmentLoader_.on('timestampoffset',function(){_this3.tech_.trigger({type:'usage',name:'hls-timestamp-offset'});});this.audioSegmentLoader_.on('syncinfoupdate',function(){_this3.onSyncInfoUpdate_();});this.mainSegmentLoader_.on('ended',function(){_this3.onEndOfStream();});this.mainSegmentLoader_.on('earlyabort',function(){_this3.blacklistCurrentPlaylist({message:'Aborted early because there isn\'t enough bandwidth to complete the '+'request without rebuffering.'},ABORT_EARLY_BLACKLIST_SECONDS);});this.mainSegmentLoader_.on('reseteverything',function(){// If playing an MTS stream, a videojs.MediaSource is listening for
// hls-reset to reset caption parsing state in the transmuxer
_this3.tech_.trigger('hls-reset');});this.mainSegmentLoader_.on('segmenttimemapping',function(event){// If playing an MTS stream in html, a videojs.MediaSource is listening for
// hls-segment-time-mapping update its internal mapping of stream to display time
_this3.tech_.trigger({type:'hls-segment-time-mapping',mapping:event.mapping});});this.audioSegmentLoader_.on('ended',function(){_this3.onEndOfStream();});}},{key:'mediaSecondsLoaded_',value:function mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded);}/**
     * Call load on our SegmentLoaders
     */},{key:'load',value:function load(){this.mainSegmentLoader_.load();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.load();}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.load();}}/**
     * Re-tune playback quality level for the current player
     * conditions without performing destructive actions, like
     * removing already buffered content
     *
     * @private
     */},{key:'smoothQualityChange_',value:function smoothQualityChange_(){var media=this.selectPlaylist();if(media!==this.masterPlaylistLoader_.media()){this.masterPlaylistLoader_.media(media);this.mainSegmentLoader_.resetLoader();// don't need to reset audio as it is reset when media changes
}}/**
     * Re-tune playback quality level for the current player
     * conditions. This method will perform destructive actions like removing
     * already buffered content in order to readjust the currently active
     * playlist quickly. This is good for manual quality changes
     *
     * @private
     */},{key:'fastQualityChange_',value:function fastQualityChange_(){var _this4=this;var media=this.selectPlaylist();if(media===this.masterPlaylistLoader_.media()){return;}this.masterPlaylistLoader_.media(media);// Delete all buffered data to allow an immediate quality switch, then seek to give
// the browser a kick to remove any cached frames from the previous rendtion (.04 seconds
// ahead is roughly the minimum that will accomplish this across a variety of content
// in IE and Edge, but seeking in place is sufficient on all other browsers)
// Edge/IE bug: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/14600375/
// Chrome bug: https://bugs.chromium.org/p/chromium/issues/detail?id=651904
this.mainSegmentLoader_.resetEverything(function(){// Since this is not a typical seek, we avoid the seekTo method which can cause segments
// from the previously enabled rendition to load before the new playlist has finished loading
if(videojs$1.browser.IE_VERSION||videojs$1.browser.IS_EDGE){_this4.tech_.setCurrentTime(_this4.tech_.currentTime()+0.04);}else{_this4.tech_.setCurrentTime(_this4.tech_.currentTime());}});// don't need to reset audio as it is reset when media changes
}/**
     * Begin playback.
     */},{key:'play',value:function play(){if(this.setupFirstPlay()){return;}if(this.tech_.ended()){this.seekTo_(0);}if(this.hasPlayed_()){this.load();}var seekable$$1=this.tech_.seekable();// if the viewer has paused and we fell out of the live window,
// seek forward to the live point
if(this.tech_.duration()===Infinity){if(this.tech_.currentTime()<seekable$$1.start(0)){return this.seekTo_(seekable$$1.end(seekable$$1.length-1));}}}/**
     * Seek to the latest media position if this is a live video and the
     * player and video are loaded and initialized.
     */},{key:'setupFirstPlay',value:function setupFirstPlay(){var _this5=this;var media=this.masterPlaylistLoader_.media();// Check that everything is ready to begin buffering for the first call to play
//  If 1) there is no active media
//     2) the player is paused
//     3) the first play has already been setup
// then exit early
if(!media||this.tech_.paused()||this.hasPlayed_()){return false;}// when the video is a live stream
if(!media.endList){var seekable$$1=this.seekable();if(!seekable$$1.length){// without a seekable range, the player cannot seek to begin buffering at the live
// point
return false;}if(videojs$1.browser.IE_VERSION&&this.tech_.readyState()===0){// IE11 throws an InvalidStateError if you try to set currentTime while the
// readyState is 0, so it must be delayed until the tech fires loadedmetadata.
this.tech_.one('loadedmetadata',function(){_this5.trigger('firstplay');_this5.seekTo_(seekable$$1.end(0));_this5.hasPlayed_=function(){return true;};});return false;}// trigger firstplay to inform the source handler to ignore the next seek event
this.trigger('firstplay');// seek to the live point
this.seekTo_(seekable$$1.end(0));}this.hasPlayed_=function(){return true;};// we can begin loading now that everything is ready
this.load();return true;}/**
     * handle the sourceopen event on the MediaSource
     *
     * @private
     */},{key:'handleSourceOpen_',value:function handleSourceOpen_(){// Only attempt to create the source buffer if none already exist.
// handleSourceOpen is also called when we are "re-opening" a source buffer
// after `endOfStream` has been called (in response to a seek for instance)
try{this.setupSourceBuffers_();}catch(e){videojs$1.log.warn('Failed to create Source Buffers',e);return this.mediaSource.endOfStream('decode');}// if autoplay is enabled, begin playback. This is duplicative of
// code in video.js but is required because play() must be invoked
// *after* the media source has opened.
if(this.tech_.autoplay()){var playPromise=this.tech_.play();// Catch/silence error when a pause interrupts a play request
// on browsers which return a promise
if(typeof playPromise!=='undefined'&&typeof playPromise.then==='function'){playPromise.then(null,function(e){});}}this.trigger('sourceopen');}/**
     * Calls endOfStream on the media source when all active stream types have called
     * endOfStream
     *
     * @param {string} streamType
     *        Stream type of the segment loader that called endOfStream
     * @private
     */},{key:'onEndOfStream',value:function onEndOfStream(){var isEndOfStream=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){// if the audio playlist loader exists, then alternate audio is active
if(!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo){// if we do not know if the main segment loader contains video yet or if we
// definitively know the main segment loader contains video, then we need to wait
// for both main and audio segment loaders to call endOfStream
isEndOfStream=isEndOfStream&&this.audioSegmentLoader_.ended_;}else{// otherwise just rely on the audio loader
isEndOfStream=this.audioSegmentLoader_.ended_;}}if(!isEndOfStream){return;}this.logger_('calling mediaSource.endOfStream()');// on chrome calling endOfStream can sometimes cause an exception,
// even when the media source is in a valid state.
try{this.mediaSource.endOfStream();}catch(e){videojs$1.log.warn('Failed to call media source endOfStream',e);}}/**
     * Check if a playlist has stopped being updated
     * @param {Object} playlist the media playlist object
     * @return {boolean} whether the playlist has stopped being updated or not
     */},{key:'stuckAtPlaylistEnd_',value:function stuckAtPlaylistEnd_(playlist){var seekable$$1=this.seekable();if(!seekable$$1.length){// playlist doesn't have enough information to determine whether we are stuck
return false;}var expired=this.syncController_.getExpiredTime(playlist,this.mediaSource.duration);if(expired===null){return false;}// does not use the safe live end to calculate playlist end, since we
// don't want to say we are stuck while there is still content
var absolutePlaylistEnd=Hls.Playlist.playlistEnd(playlist,expired);var currentTime=this.tech_.currentTime();var buffered=this.tech_.buffered();if(!buffered.length){// return true if the playhead reached the absolute end of the playlist
return absolutePlaylistEnd-currentTime<=SAFE_TIME_DELTA;}var bufferedEnd=buffered.end(buffered.length-1);// return true if there is too little buffer left and buffer has reached absolute
// end of playlist
return bufferedEnd-currentTime<=SAFE_TIME_DELTA&&absolutePlaylistEnd-bufferedEnd<=SAFE_TIME_DELTA;}/**
     * Blacklists a playlist when an error occurs for a set amount of time
     * making it unavailable for selection by the rendition selection algorithm
     * and then forces a new playlist (rendition) selection.
     *
     * @param {Object=} error an optional error that may include the playlist
     * to blacklist
     * @param {Number=} blacklistDuration an optional number of seconds to blacklist the
     * playlist
     */},{key:'blacklistCurrentPlaylist',value:function blacklistCurrentPlaylist(){var error=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var blacklistDuration=arguments[1];var currentPlaylist=void 0;var nextPlaylist=void 0;// If the `error` was generated by the playlist loader, it will contain
// the playlist we were trying to load (but failed) and that should be
// blacklisted instead of the currently selected playlist which is likely
// out-of-date in this scenario
currentPlaylist=error.playlist||this.masterPlaylistLoader_.media();blacklistDuration=blacklistDuration||error.blacklistDuration||this.blacklistDuration;// If there is no current playlist, then an error occurred while we were
// trying to load the master OR while we were disposing of the tech
if(!currentPlaylist){this.error=error;try{return this.mediaSource.endOfStream('network');}catch(e){return this.trigger('error');}}var isFinalRendition=this.masterPlaylistLoader_.master.playlists.filter(isEnabled).length===1;if(isFinalRendition){// Never blacklisting this playlist because it's final rendition
videojs$1.log.warn('Problem encountered with the current '+'HLS playlist. Trying again since it is the final playlist.');this.tech_.trigger('retryplaylist');return this.masterPlaylistLoader_.load(isFinalRendition);}// Blacklist this playlist
currentPlaylist.excludeUntil=Date.now()+blacklistDuration*1000;this.tech_.trigger('blacklistplaylist');this.tech_.trigger({type:'usage',name:'hls-rendition-blacklisted'});// Select a new playlist
nextPlaylist=this.selectPlaylist();videojs$1.log.warn('Problem encountered with the current HLS playlist.'+(error.message?' '+error.message:'')+' Switching to another playlist.');return this.masterPlaylistLoader_.media(nextPlaylist);}/**
     * Pause all segment loaders
     */},{key:'pauseLoading',value:function pauseLoading(){this.mainSegmentLoader_.pause();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.pause();}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.pause();}}/**
     * set the current time on all segment loaders
     *
     * @param {TimeRange} currentTime the current time to set
     * @return {TimeRange} the current time
     */},{key:'setCurrentTime',value:function setCurrentTime(currentTime){var buffered=findRange(this.tech_.buffered(),currentTime);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())){// return immediately if the metadata is not ready yet
return 0;}// it's clearly an edge-case but don't thrown an error if asked to
// seek within an empty playlist
if(!this.masterPlaylistLoader_.media().segments){return 0;}// In flash playback, the segment loaders should be reset on every seek, even
// in buffer seeks. If the seek location is already buffered, continue buffering as
// usual
// TODO: redo this comment
if(buffered&&buffered.length){return currentTime;}// cancel outstanding requests so we begin buffering at the new
// location
this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.resetEverything();this.audioSegmentLoader_.abort();}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.resetEverything();this.subtitleSegmentLoader_.abort();}// start segment loader loading in case they are paused
this.load();}/**
     * get the current duration
     *
     * @return {TimeRange} the duration
     */},{key:'duration',value:function duration$$1(){if(!this.masterPlaylistLoader_){return 0;}if(this.mediaSource){return this.mediaSource.duration;}return Hls.Playlist.duration(this.masterPlaylistLoader_.media());}/**
     * check the seekable range
     *
     * @return {TimeRange} the seekable range
     */},{key:'seekable',value:function seekable$$1(){return this.seekable_;}},{key:'onSyncInfoUpdate_',value:function onSyncInfoUpdate_(){var mainSeekable=void 0;var audioSeekable=void 0;if(!this.masterPlaylistLoader_){return;}var media=this.masterPlaylistLoader_.media();if(!media){return;}var expired=this.syncController_.getExpiredTime(media,this.mediaSource.duration);if(expired===null){// not enough information to update seekable
return;}mainSeekable=Hls.Playlist.seekable(media,expired);if(mainSeekable.length===0){return;}if(this.mediaTypes_.AUDIO.activePlaylistLoader){media=this.mediaTypes_.AUDIO.activePlaylistLoader.media();expired=this.syncController_.getExpiredTime(media,this.mediaSource.duration);if(expired===null){return;}audioSeekable=Hls.Playlist.seekable(media,expired);if(audioSeekable.length===0){return;}}var oldEnd=void 0;var oldStart=void 0;if(this.seekable_&&this.seekable_.length){oldEnd=this.seekable_.end(0);oldStart=this.seekable_.start(0);}if(!audioSeekable){// seekable has been calculated based on buffering video data so it
// can be returned directly
this.seekable_=mainSeekable;}else if(audioSeekable.start(0)>mainSeekable.end(0)||mainSeekable.start(0)>audioSeekable.end(0)){// seekables are pretty far off, rely on main
this.seekable_=mainSeekable;}else{this.seekable_=videojs$1.createTimeRanges([[audioSeekable.start(0)>mainSeekable.start(0)?audioSeekable.start(0):mainSeekable.start(0),audioSeekable.end(0)<mainSeekable.end(0)?audioSeekable.end(0):mainSeekable.end(0)]]);}// seekable is the same as last time
if(this.seekable_&&this.seekable_.length){if(this.seekable_.end(0)===oldEnd&&this.seekable_.start(0)===oldStart){return;}}this.logger_('seekable updated ['+printableRange(this.seekable_)+']');this.tech_.trigger('seekablechanged');}/**
     * Update the player duration
     */},{key:'updateDuration',value:function updateDuration(){var _this6=this;var oldDuration=this.mediaSource.duration;var newDuration=Hls.Playlist.duration(this.masterPlaylistLoader_.media());var buffered=this.tech_.buffered();var setDuration=function setDuration(){// on firefox setting the duration may sometimes cause an exception
// even if the media source is open and source buffers are not
// updating, something about the media source being in an invalid state.
_this6.logger_('Setting duration from '+_this6.mediaSource.duration+' => '+newDuration);try{_this6.mediaSource.duration=newDuration;}catch(e){videojs$1.log.warn('Failed to set media source duration',e);}_this6.tech_.trigger('durationchange');_this6.mediaSource.removeEventListener('sourceopen',setDuration);};if(buffered.length>0){newDuration=Math.max(newDuration,buffered.end(buffered.length-1));}// if the duration has changed, invalidate the cached value
if(oldDuration!==newDuration){// update the duration
if(this.mediaSource.readyState!=='open'){this.mediaSource.addEventListener('sourceopen',setDuration);}else{setDuration();}}}/**
     * dispose of the MasterPlaylistController and everything
     * that it controls
     */},{key:'dispose',value:function dispose(){var _this7=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();['AUDIO','SUBTITLES'].forEach(function(type){var groups=_this7.mediaTypes_[type].groups;for(var id in groups){groups[id].forEach(function(group){if(group.playlistLoader){group.playlistLoader.dispose();}});}});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose();}/**
     * return the master playlist object if we have one
     *
     * @return {Object} the master playlist object that we parsed
     */},{key:'master',value:function master(){return this.masterPlaylistLoader_.master;}/**
     * return the currently selected playlist
     *
     * @return {Object} the currently selected playlist object that we parsed
     */},{key:'media',value:function media(){// playlist loader will not return media if it has not been fully loaded
return this.masterPlaylistLoader_.media()||this.initialMedia_;}/**
     * setup our internal source buffers on our segment Loaders
     *
     * @private
     */},{key:'setupSourceBuffers_',value:function setupSourceBuffers_(){var media=this.masterPlaylistLoader_.media();var mimeTypes=void 0;// wait until a media playlist is available and the Media Source is
// attached
if(!media||this.mediaSource.readyState!=='open'){return;}mimeTypes=mimeTypesForPlaylist(this.masterPlaylistLoader_.master,media);if(mimeTypes.length<1){this.error='No compatible SourceBuffer configuration for the variant stream:'+media.resolvedUri;return this.mediaSource.endOfStream('decode');}this.configureLoaderMimeTypes_(mimeTypes);// exclude any incompatible variant streams from future playlist
// selection
this.excludeIncompatibleVariants_(media);}},{key:'configureLoaderMimeTypes_',value:function configureLoaderMimeTypes_(mimeTypes){// If the content is demuxed, we can't start appending segments to a source buffer
// until both source buffers are set up, or else the browser may not let us add the
// second source buffer (it will assume we are playing either audio only or video
// only).
var sourceBufferEmitter=// If there is more than one mime type
mimeTypes.length>1&&// and the first mime type does not have muxed video and audio
mimeTypes[0].indexOf(',')===-1&&// and the two mime types are different (they can be the same in the case of audio
// only with alternate audio)
mimeTypes[0]!==mimeTypes[1]?// then we want to wait on the second source buffer
new videojs$1.EventTarget():// otherwise there is no need to wait as the content is either audio only,
// video only, or muxed content.
null;this.mainSegmentLoader_.mimeType(mimeTypes[0],sourceBufferEmitter);if(mimeTypes[1]){this.audioSegmentLoader_.mimeType(mimeTypes[1],sourceBufferEmitter);}}/**
     * Blacklists playlists with codecs that are unsupported by the browser.
     */},{key:'excludeUnsupportedVariants_',value:function excludeUnsupportedVariants_(){this.master().playlists.forEach(function(variant){if(variant.attributes.CODECS&&_window2.default.MediaSource&&_window2.default.MediaSource.isTypeSupported&&!_window2.default.MediaSource.isTypeSupported('video/mp4; codecs="'+mapLegacyAvcCodecs(variant.attributes.CODECS)+'"')){variant.excludeUntil=Infinity;}});}/**
     * Blacklist playlists that are known to be codec or
     * stream-incompatible with the SourceBuffer configuration. For
     * instance, Media Source Extensions would cause the video element to
     * stall waiting for video data if you switched from a variant with
     * video and audio to an audio-only one.
     *
     * @param {Object} media a media playlist compatible with the current
     * set of SourceBuffers. Variants in the current master playlist that
     * do not appear to have compatible codec or stream configurations
     * will be excluded from the default playlist selection algorithm
     * indefinitely.
     * @private
     */},{key:'excludeIncompatibleVariants_',value:function excludeIncompatibleVariants_(media){var codecCount=2;var videoCodec=null;var codecs=void 0;if(media.attributes.CODECS){codecs=parseCodecs(media.attributes.CODECS);videoCodec=codecs.videoCodec;codecCount=codecs.codecCount;}this.master().playlists.forEach(function(variant){var variantCodecs={codecCount:2,videoCodec:null};if(variant.attributes.CODECS){variantCodecs=parseCodecs(variant.attributes.CODECS);}// if the streams differ in the presence or absence of audio or
// video, they are incompatible
if(variantCodecs.codecCount!==codecCount){variant.excludeUntil=Infinity;}// if h.264 is specified on the current playlist, some flavor of
// it must be specified on all compatible variants
if(variantCodecs.videoCodec!==videoCodec){variant.excludeUntil=Infinity;}});}},{key:'updateAdCues_',value:function updateAdCues_(media){var offset=0;var seekable$$1=this.seekable();if(seekable$$1.length){offset=seekable$$1.start(0);}updateAdCues(media,this.cueTagsTrack_,offset);}/**
     * Calculates the desired forward buffer length based on current time
     *
     * @return {Number} Desired forward buffer length in seconds
     */},{key:'goalBufferLength',value:function goalBufferLength(){var currentTime=this.tech_.currentTime();var initial=Config.GOAL_BUFFER_LENGTH;var rate=Config.GOAL_BUFFER_LENGTH_RATE;var max=Math.max(initial,Config.MAX_GOAL_BUFFER_LENGTH);return Math.min(initial+currentTime*rate,max);}/**
     * Calculates the desired buffer low water line based on current time
     *
     * @return {Number} Desired buffer low water line in seconds
     */},{key:'bufferLowWaterLine',value:function bufferLowWaterLine(){var currentTime=this.tech_.currentTime();var initial=Config.BUFFER_LOW_WATER_LINE;var rate=Config.BUFFER_LOW_WATER_LINE_RATE;var max=Math.max(initial,Config.MAX_BUFFER_LOW_WATER_LINE);return Math.min(initial+currentTime*rate,max);}}]);return MasterPlaylistController;}(videojs$1.EventTarget);/**
 * Returns a function that acts as the Enable/disable playlist function.
 *
 * @param {PlaylistLoader} loader - The master playlist loader
 * @param {String} playlistUri - uri of the playlist
 * @param {Function} changePlaylistFn - A function to be called after a
 * playlist's enabled-state has been changed. Will NOT be called if a
 * playlist's enabled-state is unchanged
 * @param {Boolean=} enable - Value to set the playlist enabled-state to
 * or if undefined returns the current enabled-state for the playlist
 * @return {Function} Function for setting/getting enabled
 */var enableFunction=function enableFunction(loader,playlistUri,changePlaylistFn){return function(enable){var playlist=loader.master.playlists[playlistUri];var incompatible=isIncompatible(playlist);var currentlyEnabled=isEnabled(playlist);if(typeof enable==='undefined'){return currentlyEnabled;}if(enable){delete playlist.disabled;}else{playlist.disabled=true;}if(enable!==currentlyEnabled&&!incompatible){// Ensure the outside world knows about our changes
changePlaylistFn();if(enable){loader.trigger('renditionenabled');}else{loader.trigger('renditiondisabled');}}return enable;};};/**
 * The representation object encapsulates the publicly visible information
 * in a media playlist along with a setter/getter-type function (enabled)
 * for changing the enabled-state of a particular playlist entry
 *
 * @class Representation
 */var Representation=function Representation(hlsHandler,playlist,id){classCallCheck(this,Representation);var mpc=hlsHandler.masterPlaylistController_,smoothQualityChange=hlsHandler.options_.smoothQualityChange;// Get a reference to a bound version of the quality change function
var changeType=smoothQualityChange?'smooth':'fast';var qualityChangeFunction=mpc[changeType+'QualityChange_'].bind(mpc);// some playlist attributes are optional
if(playlist.attributes.RESOLUTION){var resolution=playlist.attributes.RESOLUTION;this.width=resolution.width;this.height=resolution.height;}this.bandwidth=playlist.attributes.BANDWIDTH;// The id is simply the ordinality of the media playlist
// within the master playlist
this.id=id;// Partially-apply the enableFunction to create a playlist-
// specific variant
this.enabled=enableFunction(hlsHandler.playlists,playlist.uri,qualityChangeFunction);};/**
 * A mixin function that adds the `representations` api to an instance
 * of the HlsHandler class
 * @param {HlsHandler} hlsHandler - An instance of HlsHandler to add the
 * representation API into
 */var renditionSelectionMixin=function renditionSelectionMixin(hlsHandler){var playlists=hlsHandler.playlists;// Add a single API-specific function to the HlsHandler instance
hlsHandler.representations=function(){return playlists.master.playlists.filter(function(media){return!isIncompatible(media);}).map(function(e,i){return new Representation(hlsHandler,e,e.uri);});};};/**
 * @file playback-watcher.js
 *
 * Playback starts, and now my watch begins. It shall not end until my death. I shall
 * take no wait, hold no uncleared timeouts, father no bad seeks. I shall wear no crowns
 * and win no glory. I shall live and die at my post. I am the corrector of the underflow.
 * I am the watcher of gaps. I am the shield that guards the realms of seekable. I pledge
 * my life and honor to the Playback Watch, for this Player and all the Players to come.
 */// Set of events that reset the playback-watcher time check logic and clear the timeout
var timerCancelEvents=['seeking','seeked','pause','playing','error'];/**
 * @class PlaybackWatcher
 */var PlaybackWatcher=function(){/**
   * Represents an PlaybackWatcher object.
   * @constructor
   * @param {object} options an object that includes the tech and settings
   */function PlaybackWatcher(options){var _this=this;classCallCheck(this,PlaybackWatcher);this.tech_=options.tech;this.seekable=options.seekable;this.seekTo=options.seekTo;this.allowSeeksWithinUnsafeLiveWindow=options.allowSeeksWithinUnsafeLiveWindow;this.media=options.media;this.consecutiveUpdates=0;this.lastRecordedTime=null;this.timer_=null;this.checkCurrentTimeTimeout_=null;this.logger_=logger('PlaybackWatcher');this.logger_('initialize');var canPlayHandler=function canPlayHandler(){return _this.monitorCurrentTime_();};var waitingHandler=function waitingHandler(){return _this.techWaiting_();};var cancelTimerHandler=function cancelTimerHandler(){return _this.cancelTimer_();};var fixesBadSeeksHandler=function fixesBadSeeksHandler(){return _this.fixesBadSeeks_();};this.tech_.on('seekablechanged',fixesBadSeeksHandler);this.tech_.on('waiting',waitingHandler);this.tech_.on(timerCancelEvents,cancelTimerHandler);this.tech_.on('canplay',canPlayHandler);// Define the dispose function to clean up our events
this.dispose=function(){_this.logger_('dispose');_this.tech_.off('seekablechanged',fixesBadSeeksHandler);_this.tech_.off('waiting',waitingHandler);_this.tech_.off(timerCancelEvents,cancelTimerHandler);_this.tech_.off('canplay',canPlayHandler);if(_this.checkCurrentTimeTimeout_){_window2.default.clearTimeout(_this.checkCurrentTimeTimeout_);}_this.cancelTimer_();};}/**
   * Periodically check current time to see if playback stopped
   *
   * @private
   */createClass(PlaybackWatcher,[{key:'monitorCurrentTime_',value:function monitorCurrentTime_(){this.checkCurrentTime_();if(this.checkCurrentTimeTimeout_){_window2.default.clearTimeout(this.checkCurrentTimeTimeout_);}// 42 = 24 fps // 250 is what Webkit uses // FF uses 15
this.checkCurrentTimeTimeout_=_window2.default.setTimeout(this.monitorCurrentTime_.bind(this),250);}/**
     * The purpose of this function is to emulate the "waiting" event on
     * browsers that do not emit it when they are waiting for more
     * data to continue playback
     *
     * @private
     */},{key:'checkCurrentTime_',value:function checkCurrentTime_(){if(this.tech_.seeking()&&this.fixesBadSeeks_()){this.consecutiveUpdates=0;this.lastRecordedTime=this.tech_.currentTime();return;}if(this.tech_.paused()||this.tech_.seeking()){return;}var currentTime=this.tech_.currentTime();var buffered=this.tech_.buffered();if(this.lastRecordedTime===currentTime&&(!buffered.length||currentTime+SAFE_TIME_DELTA>=buffered.end(buffered.length-1))){// If current time is at the end of the final buffered region, then any playback
// stall is most likely caused by buffering in a low bandwidth environment. The tech
// should fire a `waiting` event in this scenario, but due to browser and tech
// inconsistencies. Calling `techWaiting_` here allows us to simulate
// responding to a native `waiting` event when the tech fails to emit one.
return this.techWaiting_();}if(this.consecutiveUpdates>=5&&currentTime===this.lastRecordedTime){this.consecutiveUpdates++;this.waiting_();}else if(currentTime===this.lastRecordedTime){this.consecutiveUpdates++;}else{this.consecutiveUpdates=0;this.lastRecordedTime=currentTime;}}/**
     * Cancels any pending timers and resets the 'timeupdate' mechanism
     * designed to detect that we are stalled
     *
     * @private
     */},{key:'cancelTimer_',value:function cancelTimer_(){this.consecutiveUpdates=0;if(this.timer_){this.logger_('cancelTimer_');clearTimeout(this.timer_);}this.timer_=null;}/**
     * Fixes situations where there's a bad seek
     *
     * @return {Boolean} whether an action was taken to fix the seek
     * @private
     */},{key:'fixesBadSeeks_',value:function fixesBadSeeks_(){var seeking=this.tech_.seeking();if(!seeking){return false;}var seekable=this.seekable();var currentTime=this.tech_.currentTime();var isAfterSeekableRange=this.afterSeekableWindow_(seekable,currentTime,this.media(),this.allowSeeksWithinUnsafeLiveWindow);var seekTo=void 0;if(isAfterSeekableRange){var seekableEnd=seekable.end(seekable.length-1);// sync to live point (if VOD, our seekable was updated and we're simply adjusting)
seekTo=seekableEnd;}if(this.beforeSeekableWindow_(seekable,currentTime)){var seekableStart=seekable.start(0);// sync to the beginning of the live window
// provide a buffer of .1 seconds to handle rounding/imprecise numbers
seekTo=seekableStart+SAFE_TIME_DELTA;}if(typeof seekTo!=='undefined'){this.logger_('Trying to seek outside of seekable at time '+currentTime+' with '+('seekable range '+printableRange(seekable)+'. Seeking to ')+(seekTo+'.'));this.seekTo(seekTo);return true;}return false;}/**
     * Handler for situations when we determine the player is waiting.
     *
     * @private
     */},{key:'waiting_',value:function waiting_(){if(this.techWaiting_()){return;}// All tech waiting checks failed. Use last resort correction
var currentTime=this.tech_.currentTime();var buffered=this.tech_.buffered();var currentRange=findRange(buffered,currentTime);// Sometimes the player can stall for unknown reasons within a contiguous buffered
// region with no indication that anything is amiss (seen in Firefox). Seeking to
// currentTime is usually enough to kickstart the player. This checks that the player
// is currently within a buffered region before attempting a corrective seek.
// Chrome does not appear to continue `timeupdate` events after a `waiting` event
// until there is ~ 3 seconds of forward buffer available. PlaybackWatcher should also
// make sure there is ~3 seconds of forward buffer before taking any corrective action
// to avoid triggering an `unknownwaiting` event when the network is slow.
if(currentRange.length&&currentTime+3<=currentRange.end(0)){this.cancelTimer_();this.seekTo(currentTime);this.logger_('Stopped at '+currentTime+' while inside a buffered region '+('['+currentRange.start(0)+' -> '+currentRange.end(0)+']. Attempting to resume ')+'playback by seeking to the current time.');// unknown waiting corrections may be useful for monitoring QoS
this.tech_.trigger({type:'usage',name:'hls-unknown-waiting'});return;}}/**
     * Handler for situations when the tech fires a `waiting` event
     *
     * @return {Boolean}
     *         True if an action (or none) was needed to correct the waiting. False if no
     *         checks passed
     * @private
     */},{key:'techWaiting_',value:function techWaiting_(){var seekable=this.seekable();var currentTime=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()){// Tech is seeking or bad seek fixed, no action needed
return true;}if(this.tech_.seeking()||this.timer_!==null){// Tech is seeking or already waiting on another action, no action needed
return true;}if(this.beforeSeekableWindow_(seekable,currentTime)){var livePoint=seekable.end(seekable.length-1);this.logger_('Fell out of live window at time '+currentTime+'. Seeking to '+('live point (seekable end) '+livePoint));this.cancelTimer_();this.seekTo(livePoint);// live window resyncs may be useful for monitoring QoS
this.tech_.trigger({type:'usage',name:'hls-live-resync'});return true;}var buffered=this.tech_.buffered();var nextRange=findNextRange(buffered,currentTime);if(this.videoUnderflow_(nextRange,buffered,currentTime)){// Even though the video underflowed and was stuck in a gap, the audio overplayed
// the gap, leading currentTime into a buffered range. Seeking to currentTime
// allows the video to catch up to the audio position without losing any audio
// (only suffering ~3 seconds of frozen video and a pause in audio playback).
this.cancelTimer_();this.seekTo(currentTime);// video underflow may be useful for monitoring QoS
this.tech_.trigger({type:'usage',name:'hls-video-underflow'});return true;}// check for gap
if(nextRange.length>0){var difference=nextRange.start(0)-currentTime;this.logger_('Stopped at '+currentTime+', setting timer for '+difference+', seeking '+('to '+nextRange.start(0)));this.timer_=setTimeout(this.skipTheGap_.bind(this),difference*1000,currentTime);return true;}// All checks failed. Returning false to indicate failure to correct waiting
return false;}},{key:'afterSeekableWindow_',value:function afterSeekableWindow_(seekable,currentTime,playlist){var allowSeeksWithinUnsafeLiveWindow=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(!seekable.length){// we can't make a solid case if there's no seekable, default to false
return false;}var allowedEnd=seekable.end(seekable.length-1)+SAFE_TIME_DELTA;var isLive=!playlist.endList;if(isLive&&allowSeeksWithinUnsafeLiveWindow){allowedEnd=seekable.end(seekable.length-1)+playlist.targetDuration*3;}if(currentTime>allowedEnd){return true;}return false;}},{key:'beforeSeekableWindow_',value:function beforeSeekableWindow_(seekable,currentTime){if(seekable.length&&// can't fall before 0 and 0 seekable start identifies VOD stream
seekable.start(0)>0&&currentTime<seekable.start(0)-SAFE_TIME_DELTA){return true;}return false;}},{key:'videoUnderflow_',value:function videoUnderflow_(nextRange,buffered,currentTime){if(nextRange.length===0){// Even if there is no available next range, there is still a possibility we are
// stuck in a gap due to video underflow.
var gap=this.gapFromVideoUnderflow_(buffered,currentTime);if(gap){this.logger_('Encountered a gap in video from '+gap.start+' to '+gap.end+'. '+('Seeking to current time '+currentTime));return true;}}return false;}/**
     * Timer callback. If playback still has not proceeded, then we seek
     * to the start of the next buffered region.
     *
     * @private
     */},{key:'skipTheGap_',value:function skipTheGap_(scheduledCurrentTime){var buffered=this.tech_.buffered();var currentTime=this.tech_.currentTime();var nextRange=findNextRange(buffered,currentTime);this.cancelTimer_();if(nextRange.length===0||currentTime!==scheduledCurrentTime){return;}this.logger_('skipTheGap_:','currentTime:',currentTime,'scheduled currentTime:',scheduledCurrentTime,'nextRange start:',nextRange.start(0));// only seek if we still have not played
this.seekTo(nextRange.start(0)+TIME_FUDGE_FACTOR);this.tech_.trigger({type:'usage',name:'hls-gap-skip'});}},{key:'gapFromVideoUnderflow_',value:function gapFromVideoUnderflow_(buffered,currentTime){// At least in Chrome, if there is a gap in the video buffer, the audio will continue
// playing for ~3 seconds after the video gap starts. This is done to account for
// video buffer underflow/underrun (note that this is not done when there is audio
// buffer underflow/underrun -- in that case the video will stop as soon as it
// encounters the gap, as audio stalls are more noticeable/jarring to a user than
// video stalls). The player's time will reflect the playthrough of audio, so the
// time will appear as if we are in a buffered region, even if we are stuck in a
// "gap."
//
// Example:
// video buffer:   0 => 10.1, 10.2 => 20
// audio buffer:   0 => 20
// overall buffer: 0 => 10.1, 10.2 => 20
// current time: 13
//
// Chrome's video froze at 10 seconds, where the video buffer encountered the gap,
// however, the audio continued playing until it reached ~3 seconds past the gap
// (13 seconds), at which point it stops as well. Since current time is past the
// gap, findNextRange will return no ranges.
//
// To check for this issue, we see if there is a gap that starts somewhere within
// a 3 second range (3 seconds +/- 1 second) back from our current time.
var gaps=findGaps(buffered);for(var i=0;i<gaps.length;i++){var start=gaps.start(i);var end=gaps.end(i);// gap is starts no more than 4 seconds back
if(currentTime-start<4&&currentTime-start>2){return{start:start,end:end};}}return null;}}]);return PlaybackWatcher;}();var defaultOptions={errorInterval:30,getSource:function getSource(next){var tech=this.tech({IWillNotUseThisInPlugins:true});var sourceObj=tech.currentSource_;return next(sourceObj);}};/**
 * Main entry point for the plugin
 *
 * @param {Player} player a reference to a videojs Player instance
 * @param {Object} [options] an object with plugin options
 * @private
 */var initPlugin=function initPlugin(player,options){var lastCalled=0;var seekTo=0;var localOptions=videojs$1.mergeOptions(defaultOptions,options);player.ready(function(){player.trigger({type:'usage',name:'hls-error-reload-initialized'});});/**
   * Player modifications to perform that must wait until `loadedmetadata`
   * has been triggered
   *
   * @private
   */var loadedMetadataHandler=function loadedMetadataHandler(){if(seekTo){player.currentTime(seekTo);}};/**
   * Set the source on the player element, play, and seek if necessary
   *
   * @param {Object} sourceObj An object specifying the source url and mime-type to play
   * @private
   */var setSource=function setSource(sourceObj){if(sourceObj===null||sourceObj===undefined){return;}seekTo=player.duration()!==Infinity&&player.currentTime()||0;player.one('loadedmetadata',loadedMetadataHandler);player.src(sourceObj);player.trigger({type:'usage',name:'hls-error-reload'});player.play();};/**
   * Attempt to get a source from either the built-in getSource function
   * or a custom function provided via the options
   *
   * @private
   */var errorHandler=function errorHandler(){// Do not attempt to reload the source if a source-reload occurred before
// 'errorInterval' time has elapsed since the last source-reload
if(Date.now()-lastCalled<localOptions.errorInterval*1000){player.trigger({type:'usage',name:'hls-error-reload-canceled'});return;}if(!localOptions.getSource||typeof localOptions.getSource!=='function'){videojs$1.log.error('ERROR: reloadSourceOnError - The option getSource must be a function!');return;}lastCalled=Date.now();return localOptions.getSource.call(player,setSource);};/**
   * Unbind any event handlers that were bound by the plugin
   *
   * @private
   */var cleanupEvents=function cleanupEvents(){player.off('loadedmetadata',loadedMetadataHandler);player.off('error',errorHandler);player.off('dispose',cleanupEvents);};/**
   * Cleanup before re-initializing the plugin
   *
   * @param {Object} [newOptions] an object with plugin options
   * @private
   */var reinitPlugin=function reinitPlugin(newOptions){cleanupEvents();initPlugin(player,newOptions);};player.on('error',errorHandler);player.on('dispose',cleanupEvents);// Overwrite the plugin function so that we can correctly cleanup before
// initializing the plugin
player.reloadSourceOnError=reinitPlugin;};/**
 * Reload the source when an error is detected as long as there
 * wasn't an error previously within the last 30 seconds
 *
 * @param {Object} [options] an object with plugin options
 */var reloadSourceOnError=function reloadSourceOnError(options){initPlugin(this,options);};var version$1="1.9.3";// since VHS handles HLS and DASH (and in the future, more types), use * to capture all
videojs$1.use('*',function(player){return{setSource:function setSource(srcObj,next){// pass null as the first argument to indicate that the source is not rejected
next(null,srcObj);},// VHS needs to know when seeks happen. For external seeks (generated at the player
// level), this middleware will capture the action. For internal seeks (generated at
// the tech level), we use a wrapped function so that we can handle it on our own
// (specified elsewhere).
setCurrentTime:function setCurrentTime(time){if(player.vhs&&player.currentSource().src===player.vhs.source_.src){player.vhs.setCurrentTime(time);}return time;},// Sync VHS after play requests.
// This specifically handles replay where the order of actions is
// play, video element will seek to 0 (skipping the setCurrentTime middleware)
// then triggers a play event.
play:function play(){if(player.vhs&&player.currentSource().src===player.vhs.source_.src){player.vhs.setCurrentTime(player.tech_.currentTime());}}};});/**
 * @file videojs-http-streaming.js
 *
 * The main file for the HLS project.
 * License: https://github.com/videojs/videojs-http-streaming/blob/master/LICENSE
 */var Hls$1={PlaylistLoader:PlaylistLoader,Playlist:Playlist,Decrypter:_aesDecrypter.Decrypter,AsyncStream:_aesDecrypter.AsyncStream,decrypt:_aesDecrypter.decrypt,utils:utils,STANDARD_PLAYLIST_SELECTOR:lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:lowestBitrateCompatibleVariantSelector,comparePlaylistBandwidth:comparePlaylistBandwidth,comparePlaylistResolution:comparePlaylistResolution,xhr:xhrFactory()};// Define getter/setters for config properites
['GOAL_BUFFER_LENGTH','MAX_GOAL_BUFFER_LENGTH','GOAL_BUFFER_LENGTH_RATE','BUFFER_LOW_WATER_LINE','MAX_BUFFER_LOW_WATER_LINE','BUFFER_LOW_WATER_LINE_RATE','BANDWIDTH_VARIANCE'].forEach(function(prop){Object.defineProperty(Hls$1,prop,{get:function get$$1(){videojs$1.log.warn('using Hls.'+prop+' is UNSAFE be sure you know what you are doing');return Config[prop];},set:function set$$1(value){videojs$1.log.warn('using Hls.'+prop+' is UNSAFE be sure you know what you are doing');if(typeof value!=='number'||value<0){videojs$1.log.warn('value of Hls.'+prop+' must be greater than or equal to 0');return;}Config[prop]=value;}});});var LOCAL_STORAGE_KEY$1='videojs-vhs';var simpleTypeFromSourceType=function simpleTypeFromSourceType(type){var mpegurlRE=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;if(mpegurlRE.test(type)){return'hls';}var dashRE=/^application\/dash\+xml/i;if(dashRE.test(type)){return'dash';}return null;};/**
 * Updates the selectedIndex of the QualityLevelList when a mediachange happens in hls.
 *
 * @param {QualityLevelList} qualityLevels The QualityLevelList to update.
 * @param {PlaylistLoader} playlistLoader PlaylistLoader containing the new media info.
 * @function handleHlsMediaChange
 */var handleHlsMediaChange=function handleHlsMediaChange(qualityLevels,playlistLoader){var newPlaylist=playlistLoader.media();var selectedIndex=-1;for(var i=0;i<qualityLevels.length;i++){if(qualityLevels[i].id===newPlaylist.uri){selectedIndex=i;break;}}qualityLevels.selectedIndex_=selectedIndex;qualityLevels.trigger({selectedIndex:selectedIndex,type:'change'});};/**
 * Adds quality levels to list once playlist metadata is available
 *
 * @param {QualityLevelList} qualityLevels The QualityLevelList to attach events to.
 * @param {Object} hls Hls object to listen to for media events.
 * @function handleHlsLoadedMetadata
 */var handleHlsLoadedMetadata=function handleHlsLoadedMetadata(qualityLevels,hls){hls.representations().forEach(function(rep){qualityLevels.addQualityLevel(rep);});handleHlsMediaChange(qualityLevels,hls.playlists);};// HLS is a source handler, not a tech. Make sure attempts to use it
// as one do not cause exceptions.
Hls$1.canPlaySource=function(){return videojs$1.log.warn('HLS is no longer a tech. Please remove it from '+'your player\'s techOrder.');};var emeKeySystems=function emeKeySystems(keySystemOptions,videoPlaylist,audioPlaylist){if(!keySystemOptions){return keySystemOptions;}// upsert the content types based on the selected playlist
var keySystemContentTypes={};for(var keySystem in keySystemOptions){keySystemContentTypes[keySystem]={audioContentType:'audio/mp4; codecs="'+audioPlaylist.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+videoPlaylist.attributes.CODECS+'"'};if(videoPlaylist.contentProtection&&videoPlaylist.contentProtection[keySystem]&&videoPlaylist.contentProtection[keySystem].pssh){keySystemContentTypes[keySystem].pssh=videoPlaylist.contentProtection[keySystem].pssh;}// videojs-contrib-eme accepts the option of specifying: 'com.some.cdm': 'url'
// so we need to prevent overwriting the URL entirely
if(typeof keySystemOptions[keySystem]==='string'){keySystemContentTypes[keySystem].url=keySystemOptions[keySystem];}}return videojs$1.mergeOptions(keySystemOptions,keySystemContentTypes);};var setupEmeOptions=function setupEmeOptions(hlsHandler){if(hlsHandler.options_.sourceType!=='dash'){return;}var player=videojs$1.players[hlsHandler.tech_.options_.playerId];if(player.eme){var sourceOptions=emeKeySystems(hlsHandler.source_.keySystems,hlsHandler.playlists.media(),hlsHandler.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());if(sourceOptions){player.currentSource().keySystems=sourceOptions;// works around https://bugs.chromium.org/p/chromium/issues/detail?id=895449
if(player.eme.initializeMediaKeys){player.eme.initializeMediaKeys();}}}};var getVhsLocalStorage=function getVhsLocalStorage(){if(!window.localStorage){return null;}var storedObject=window.localStorage.getItem(LOCAL_STORAGE_KEY$1);if(!storedObject){return null;}try{return JSON.parse(storedObject);}catch(e){// someone may have tampered with the value
return null;}};var updateVhsLocalStorage=function updateVhsLocalStorage(options){if(!window.localStorage){return false;}var objectToStore=getVhsLocalStorage();objectToStore=objectToStore?videojs$1.mergeOptions(objectToStore,options):options;try{window.localStorage.setItem(LOCAL_STORAGE_KEY$1,JSON.stringify(objectToStore));}catch(e){// Throws if storage is full (e.g., always on iOS 5+ Safari private mode, where
// storage is set to 0).
// https://developer.mozilla.org/en-US/docs/Web/API/Storage/setItem#Exceptions
// No need to perform any operation.
return false;}return objectToStore;};/**
 * Whether the browser has built-in HLS support.
 */Hls$1.supportsNativeHls=function(){var video=_document2.default.createElement('video');// native HLS is definitely not supported if HTML5 video isn't
if(!videojs$1.getTech('Html5').isSupported()){return false;}// HLS manifests can go by many mime-types
var canPlay=[// Apple santioned
'application/vnd.apple.mpegurl',// Apple sanctioned for backwards compatibility
'audio/mpegurl',// Very common
'audio/x-mpegurl',// Very common
'application/x-mpegurl',// Included for completeness
'video/x-mpegurl','video/mpegurl','application/mpegurl'];return canPlay.some(function(canItPlay){return /maybe|probably/i.test(video.canPlayType(canItPlay));});}();Hls$1.supportsNativeDash=function(){if(!videojs$1.getTech('Html5').isSupported()){return false;}return /maybe|probably/i.test(_document2.default.createElement('video').canPlayType('application/dash+xml'));}();Hls$1.supportsTypeNatively=function(type){if(type==='hls'){return Hls$1.supportsNativeHls;}if(type==='dash'){return Hls$1.supportsNativeDash;}return false;};/**
 * HLS is a source handler, not a tech. Make sure attempts to use it
 * as one do not cause exceptions.
 */Hls$1.isSupported=function(){return videojs$1.log.warn('HLS is no longer a tech. Please remove it from '+'your player\'s techOrder.');};var Component$1=videojs$1.getComponent('Component');/**
 * The Hls Handler object, where we orchestrate all of the parts
 * of HLS to interact with video.js
 *
 * @class HlsHandler
 * @extends videojs.Component
 * @param {Object} source the soruce object
 * @param {Tech} tech the parent tech object
 * @param {Object} options optional and required options
 */var HlsHandler=function(_Component){inherits(HlsHandler,_Component);function HlsHandler(source,tech,options){classCallCheck(this,HlsHandler);// tech.player() is deprecated but setup a reference to HLS for
// backwards-compatibility
var _this=possibleConstructorReturn(this,(HlsHandler.__proto__||Object.getPrototypeOf(HlsHandler)).call(this,tech,options.hls));if(tech.options_&&tech.options_.playerId){var _player=videojs$1(tech.options_.playerId);if(!_player.hasOwnProperty('hls')){Object.defineProperty(_player,'hls',{get:function get$$1(){videojs$1.log.warn('player.hls is deprecated. Use player.tech().hls instead.');tech.trigger({type:'usage',name:'hls-player-access'});return _this;},configurable:true});}// Set up a reference to the HlsHandler from player.vhs. This allows users to start
// migrating from player.tech_.hls... to player.vhs... for API access. Although this
// isn't the most appropriate form of reference for video.js (since all APIs should
// be provided through core video.js), it is a common pattern for plugins, and vhs
// will act accordingly.
_player.vhs=_this;// deprecated, for backwards compatibility
_player.dash=_this;_this.player_=_player;}_this.tech_=tech;_this.source_=source;_this.stats={};_this.setOptions_();if(_this.options_.overrideNative&&tech.overrideNativeAudioTracks&&tech.overrideNativeVideoTracks){tech.overrideNativeAudioTracks(true);tech.overrideNativeVideoTracks(true);}else if(_this.options_.overrideNative&&(tech.featuresNativeVideoTracks||tech.featuresNativeAudioTracks)){// overriding native HLS only works if audio tracks have been emulated
// error early if we're misconfigured
throw new Error('Overriding native HLS requires emulated tracks. '+'See https://git.io/vMpjB');}// listen for fullscreenchange events for this player so that we
// can adjust our quality selection quickly
_this.on(_document2.default,['fullscreenchange','webkitfullscreenchange','mozfullscreenchange','MSFullscreenChange'],function(event){var fullscreenElement=_document2.default.fullscreenElement||_document2.default.webkitFullscreenElement||_document2.default.mozFullScreenElement||_document2.default.msFullscreenElement;if(fullscreenElement&&fullscreenElement.contains(_this.tech_.el())){_this.masterPlaylistController_.smoothQualityChange_();}});// Handle seeking when looping - middleware doesn't handle this seek event from the tech
_this.on(_this.tech_,'seeking',function(){if(this.tech_.currentTime()===0&&this.tech_.player_.loop()){this.setCurrentTime(0);}});_this.on(_this.tech_,'error',function(){if(this.masterPlaylistController_){this.masterPlaylistController_.pauseLoading();}});_this.on(_this.tech_,'play',_this.play);return _this;}createClass(HlsHandler,[{key:'setOptions_',value:function setOptions_(){var _this2=this;// defaults
this.options_.withCredentials=this.options_.withCredentials||false;this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||false;this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions===false?false:true;this.options_.smoothQualityChange=this.options_.smoothQualityChange||false;this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage!=='undefined'?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||false;this.options_.customTagParsers=this.options_.customTagParsers||[];this.options_.customTagMappers=this.options_.customTagMappers||[];if(typeof this.options_.blacklistDuration!=='number'){this.options_.blacklistDuration=5*60;}if(typeof this.options_.bandwidth!=='number'){if(this.options_.useBandwidthFromLocalStorage){var storedObject=getVhsLocalStorage();if(storedObject&&storedObject.bandwidth){this.options_.bandwidth=storedObject.bandwidth;this.tech_.trigger({type:'usage',name:'hls-bandwidth-from-local-storage'});}if(storedObject&&storedObject.throughput){this.options_.throughput=storedObject.throughput;this.tech_.trigger({type:'usage',name:'hls-throughput-from-local-storage'});}}}// if bandwidth was not set by options or pulled from local storage, start playlist
// selection at a reasonable bandwidth
if(typeof this.options_.bandwidth!=='number'){this.options_.bandwidth=Config.INITIAL_BANDWIDTH;}// If the bandwidth number is unchanged from the initial setting
// then this takes precedence over the enableLowInitialPlaylist option
this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Config.INITIAL_BANDWIDTH;// grab options passed to player.src
['withCredentials','limitRenditionByPlayerDimensions','bandwidth','smoothQualityChange','customTagParsers','customTagMappers','handleManifestRedirects'].forEach(function(option){if(typeof _this2.source_[option]!=='undefined'){_this2.options_[option]=_this2.source_[option];}});this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions;}/**
     * called when player.src gets called, handle a new source
     *
     * @param {Object} src the source object to handle
     */},{key:'src',value:function src(_src,type){var _this3=this;// do nothing if the src is falsey
if(!_src){return;}this.setOptions_();// add master playlist controller options
this.options_.url=this.source_.src;this.options_.tech=this.tech_;this.options_.externHls=Hls$1;this.options_.sourceType=simpleTypeFromSourceType(type);// Whenever we seek internally, we should update both the tech and call our own
// setCurrentTime function. This is needed because "seeking" events aren't always
// reliable. External seeks (via the player object) are handled via middleware.
this.options_.seekTo=function(time){_this3.tech_.setCurrentTime(time);_this3.setCurrentTime(time);};this.masterPlaylistController_=new MasterPlaylistController(this.options_);this.playbackWatcher_=new PlaybackWatcher(videojs$1.mergeOptions(this.options_,{seekable:function seekable$$1(){return _this3.seekable();},media:function media(){return _this3.masterPlaylistController_.media();}}));this.masterPlaylistController_.on('error',function(){var player=videojs$1.players[_this3.tech_.options_.playerId];player.error(_this3.masterPlaylistController_.error);});// `this` in selectPlaylist should be the HlsHandler for backwards
// compatibility with < v2
this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Hls$1.STANDARD_PLAYLIST_SELECTOR.bind(this);this.masterPlaylistController_.selectInitialPlaylist=Hls$1.INITIAL_PLAYLIST_SELECTOR.bind(this);// re-expose some internal objects for backwards compatibility with < v2
this.playlists=this.masterPlaylistController_.masterPlaylistLoader_;this.mediaSource=this.masterPlaylistController_.mediaSource;// Proxy assignment of some properties to the master playlist
// controller. Using a custom property for backwards compatibility
// with < v2
Object.defineProperties(this,{selectPlaylist:{get:function get$$1(){return this.masterPlaylistController_.selectPlaylist;},set:function set$$1(selectPlaylist){this.masterPlaylistController_.selectPlaylist=selectPlaylist.bind(this);}},throughput:{get:function get$$1(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate;},set:function set$$1(throughput){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=throughput;// By setting `count` to 1 the throughput value becomes the starting value
// for the cumulative average
this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1;}},bandwidth:{get:function get$$1(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth;},set:function set$$1(bandwidth){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=bandwidth;// setting the bandwidth manually resets the throughput counter
// `count` is set to zero that current value of `rate` isn't included
// in the cumulative average
this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0};}},/**
         * `systemBandwidth` is a combination of two serial processes bit-rates. The first
         * is the network bitrate provided by `bandwidth` and the second is the bitrate of
         * the entire process after that - decryption, transmuxing, and appending - provided
         * by `throughput`.
         *
         * Since the two process are serial, the overall system bandwidth is given by:
         *   sysBandwidth = 1 / (1 / bandwidth + 1 / throughput)
         */systemBandwidth:{get:function get$$1(){var invBandwidth=1/(this.bandwidth||1);var invThroughput=void 0;if(this.throughput>0){invThroughput=1/this.throughput;}else{invThroughput=0;}var systemBitrate=Math.floor(1/(invBandwidth+invThroughput));return systemBitrate;},set:function set$$1(){videojs$1.log.error('The "systemBandwidth" property is read-only');}}});if(this.options_.bandwidth){this.bandwidth=this.options_.bandwidth;}if(this.options_.throughput){this.throughput=this.options_.throughput;}Object.defineProperties(this.stats,{bandwidth:{get:function get$$1(){return _this3.bandwidth||0;},enumerable:true},mediaRequests:{get:function get$$1(){return _this3.masterPlaylistController_.mediaRequests_()||0;},enumerable:true},mediaRequestsAborted:{get:function get$$1(){return _this3.masterPlaylistController_.mediaRequestsAborted_()||0;},enumerable:true},mediaRequestsTimedout:{get:function get$$1(){return _this3.masterPlaylistController_.mediaRequestsTimedout_()||0;},enumerable:true},mediaRequestsErrored:{get:function get$$1(){return _this3.masterPlaylistController_.mediaRequestsErrored_()||0;},enumerable:true},mediaTransferDuration:{get:function get$$1(){return _this3.masterPlaylistController_.mediaTransferDuration_()||0;},enumerable:true},mediaBytesTransferred:{get:function get$$1(){return _this3.masterPlaylistController_.mediaBytesTransferred_()||0;},enumerable:true},mediaSecondsLoaded:{get:function get$$1(){return _this3.masterPlaylistController_.mediaSecondsLoaded_()||0;},enumerable:true},buffered:{get:function get$$1(){return timeRangesToArray(_this3.tech_.buffered());},enumerable:true},currentTime:{get:function get$$1(){return _this3.tech_.currentTime();},enumerable:true},currentSource:{get:function get$$1(){return _this3.tech_.currentSource_;},enumerable:true},currentTech:{get:function get$$1(){return _this3.tech_.name_;},enumerable:true},duration:{get:function get$$1(){return _this3.tech_.duration();},enumerable:true},master:{get:function get$$1(){return _this3.playlists.master;},enumerable:true},playerDimensions:{get:function get$$1(){return _this3.tech_.currentDimensions();},enumerable:true},seekable:{get:function get$$1(){return timeRangesToArray(_this3.tech_.seekable());},enumerable:true},timestamp:{get:function get$$1(){return Date.now();},enumerable:true},videoPlaybackQuality:{get:function get$$1(){return _this3.tech_.getVideoPlaybackQuality();},enumerable:true}});this.tech_.one('canplay',this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_));this.tech_.on('bandwidthupdate',function(){if(_this3.options_.useBandwidthFromLocalStorage){updateVhsLocalStorage({bandwidth:_this3.bandwidth,throughput:Math.round(_this3.throughput)});}});this.masterPlaylistController_.on('selectedinitialmedia',function(){// Add the manual rendition mix-in to HlsHandler
renditionSelectionMixin(_this3);setupEmeOptions(_this3);});// the bandwidth of the primary segment loader is our best
// estimate of overall bandwidth
this.on(this.masterPlaylistController_,'progress',function(){this.tech_.trigger('progress');});this.tech_.ready(function(){return _this3.setupQualityLevels_();});// do nothing if the tech has been disposed already
// this can occur if someone sets the src in player.ready(), for instance
if(!this.tech_.el()){return;}this.tech_.src(videojs$1.URL.createObjectURL(this.masterPlaylistController_.mediaSource));}/**
     * Initializes the quality levels and sets listeners to update them.
     *
     * @method setupQualityLevels_
     * @private
     */},{key:'setupQualityLevels_',value:function setupQualityLevels_(){var _this4=this;var player=videojs$1.players[this.tech_.options_.playerId];if(player&&player.qualityLevels){this.qualityLevels_=player.qualityLevels();this.masterPlaylistController_.on('selectedinitialmedia',function(){handleHlsLoadedMetadata(_this4.qualityLevels_,_this4);});this.playlists.on('mediachange',function(){handleHlsMediaChange(_this4.qualityLevels_,_this4.playlists);});}}/**
     * Begin playing the video.
     */},{key:'play',value:function play(){this.masterPlaylistController_.play();}/**
     * a wrapper around the function in MasterPlaylistController
     */},{key:'setCurrentTime',value:function setCurrentTime(currentTime){this.masterPlaylistController_.setCurrentTime(currentTime);}/**
     * a wrapper around the function in MasterPlaylistController
     */},{key:'duration',value:function duration$$1(){return this.masterPlaylistController_.duration();}/**
     * a wrapper around the function in MasterPlaylistController
     */},{key:'seekable',value:function seekable$$1(){return this.masterPlaylistController_.seekable();}/**
     * Abort all outstanding work and cleanup.
     */},{key:'dispose',value:function dispose(){if(this.playbackWatcher_){this.playbackWatcher_.dispose();}if(this.masterPlaylistController_){this.masterPlaylistController_.dispose();}if(this.qualityLevels_){this.qualityLevels_.dispose();}if(this.player_){delete this.player_.vhs;delete this.player_.dash;delete this.player_.hls;}if(this.tech_&&this.tech_.hls){delete this.tech_.hls;}get$1(HlsHandler.prototype.__proto__||Object.getPrototypeOf(HlsHandler.prototype),'dispose',this).call(this);}},{key:'convertToProgramTime',value:function convertToProgramTime(time,callback){return getProgramTime({playlist:this.masterPlaylistController_.media(),time:time,callback:callback});}// the player must be playing before calling this
},{key:'seekToProgramTime',value:function seekToProgramTime$$1(programTime,callback){var pauseAfterSeek=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var retryCount=arguments.length>3&&arguments[3]!==undefined?arguments[3]:2;return seekToProgramTime({programTime:programTime,playlist:this.masterPlaylistController_.media(),retryCount:retryCount,pauseAfterSeek:pauseAfterSeek,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:callback});}}]);return HlsHandler;}(Component$1);/**
 * The Source Handler object, which informs video.js what additional
 * MIME types are supported and sets up playback. It is registered
 * automatically to the appropriate tech based on the capabilities of
 * the browser it is running in. It is not necessary to use or modify
 * this object in normal usage.
 */var HlsSourceHandler={name:'videojs-http-streaming',VERSION:version$1,canHandleSource:function canHandleSource(srcObj){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var localOptions=videojs$1.mergeOptions(videojs$1.options,options);return HlsSourceHandler.canPlayType(srcObj.type,localOptions);},handleSource:function handleSource(source,tech){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var localOptions=videojs$1.mergeOptions(videojs$1.options,options);tech.hls=new HlsHandler(source,tech,localOptions);tech.hls.xhr=xhrFactory();tech.hls.src(source.src,source.type);return tech.hls;},canPlayType:function canPlayType(type){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var _videojs$mergeOptions=videojs$1.mergeOptions(videojs$1.options,options),overrideNative=_videojs$mergeOptions.hls.overrideNative;var supportedType=simpleTypeFromSourceType(type);var canUseMsePlayback=supportedType&&(!Hls$1.supportsTypeNatively(supportedType)||overrideNative);return canUseMsePlayback?'maybe':'';}};if(typeof videojs$1.MediaSource==='undefined'||typeof videojs$1.URL==='undefined'){videojs$1.MediaSource=MediaSource;videojs$1.URL=URL$1;}// register source handlers with the appropriate techs
if(MediaSource.supportsNativeMediaSources()){videojs$1.getTech('Html5').registerSourceHandler(HlsSourceHandler,0);}videojs$1.HlsHandler=HlsHandler;videojs$1.HlsSourceHandler=HlsSourceHandler;videojs$1.Hls=Hls$1;if(!videojs$1.use){videojs$1.registerComponent('Hls',Hls$1);}videojs$1.options.hls=videojs$1.options.hls||{};if(videojs$1.registerPlugin){videojs$1.registerPlugin('reloadSourceOnError',reloadSourceOnError);}else{videojs$1.plugin('reloadSourceOnError',reloadSourceOnError);}exports.default=videojs$1;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZGVvLmVzLmpzIl0sIm5hbWVzIjpbInZlcnNpb24iLCJfaW5oZXJpdHNMb29zZSIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsInByb3RvdHlwZSIsIk9iamVjdCIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwiX19wcm90b19fIiwiX3NldFByb3RvdHlwZU9mIiwibyIsInAiLCJzZXRQcm90b3R5cGVPZiIsImlzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIlJlZmxlY3QiLCJjb25zdHJ1Y3QiLCJzaGFtIiwiUHJveHkiLCJEYXRlIiwidG9TdHJpbmciLCJjYWxsIiwiZSIsIl9jb25zdHJ1Y3QiLCJQYXJlbnQiLCJhcmdzIiwiQ2xhc3MiLCJhIiwicHVzaCIsImFwcGx5IiwiQ29uc3RydWN0b3IiLCJGdW5jdGlvbiIsImJpbmQiLCJpbnN0YW5jZSIsImFyZ3VtZW50cyIsIl9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiLCJzZWxmIiwiUmVmZXJlbmNlRXJyb3IiLCJfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsTG9vc2UiLCJzdHJpbmdzIiwicmF3Iiwic2xpY2UiLCJoaXN0b3J5IiwiTG9nQnlUeXBlRmFjdG9yeSIsIm5hbWUiLCJsb2ciLCJ0eXBlIiwibGV2ZWwiLCJsdmwiLCJsZXZlbHMiLCJsdmxSZWdFeHAiLCJSZWdFeHAiLCJ1bnNoaWZ0IiwidG9VcHBlckNhc2UiLCJjb25jYXQiLCJjb25zb2xlIiwiZm4iLCJpbmZvIiwidGVzdCIsIkFycmF5IiwiaXNBcnJheSIsImNyZWF0ZUxvZ2dlciIsImxvZ0J5VHlwZSIsIl9sZW4iLCJsZW5ndGgiLCJfa2V5Iiwic3VibmFtZSIsImFsbCIsIm9mZiIsImRlYnVnIiwid2FybiIsImVycm9yIiwiREVGQVVMVCIsImhhc093blByb3BlcnR5IiwiRXJyb3IiLCJmaWx0ZXIiLCJmbmFtZSIsImhpc3RvcnlJdGVtIiwiY2xlYXIiLCJkaXNhYmxlIiwiZW5hYmxlIiwiX2xlbjIiLCJfa2V5MiIsIl9sZW4zIiwiX2tleTMiLCJfbGVuNCIsIl9rZXk0IiwiY3JlYXRlTG9nZ2VyJDEiLCJrZXlzIiwib2JqZWN0IiwiaXNPYmplY3QiLCJlYWNoIiwiZm9yRWFjaCIsImtleSIsInJlZHVjZSIsImluaXRpYWwiLCJhY2N1bSIsImFzc2lnbiIsInRhcmdldCIsInNvdXJjZXMiLCJzb3VyY2UiLCJ2YWx1ZSIsImlzUGxhaW4iLCJjb21wdXRlZFN0eWxlIiwiZWwiLCJwcm9wIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImNzIiwiX3RlbXBsYXRlT2JqZWN0IiwiZGF0YSIsImlzTm9uQmxhbmtTdHJpbmciLCJzdHIiLCJ0aHJvd0lmV2hpdGVzcGFjZSIsImNsYXNzUmVnRXhwIiwiY2xhc3NOYW1lIiwiaXNSZWFsIiwiZG9jdW1lbnQiLCJpc0VsIiwibm9kZVR5cGUiLCJpc0luRnJhbWUiLCJwYXJlbnQiLCJ4IiwiY3JlYXRlUXVlcmllciIsIm1ldGhvZCIsInNlbGVjdG9yIiwiY29udGV4dCIsInF1ZXJ5U2VsZWN0b3IiLCJjdHgiLCJjcmVhdGVFbCIsInRhZ05hbWUiLCJwcm9wZXJ0aWVzIiwiYXR0cmlidXRlcyIsImNvbnRlbnQiLCJjcmVhdGVFbGVtZW50IiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsInByb3BOYW1lIiwidmFsIiwiaW5kZXhPZiIsInNldEF0dHJpYnV0ZSIsInRleHRDb250ZW50IiwiYXR0ck5hbWUiLCJhcHBlbmRDb250ZW50IiwidGV4dCIsImlubmVyVGV4dCIsInByZXBlbmRUbyIsImNoaWxkIiwiZmlyc3RDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGVuZENoaWxkIiwiaGFzQ2xhc3MiLCJlbGVtZW50IiwiY2xhc3NUb0NoZWNrIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJhZGRDbGFzcyIsImNsYXNzVG9BZGQiLCJhZGQiLCJ0cmltIiwicmVtb3ZlQ2xhc3MiLCJjbGFzc1RvUmVtb3ZlIiwicmVtb3ZlIiwic3BsaXQiLCJjIiwiam9pbiIsInRvZ2dsZUNsYXNzIiwiY2xhc3NUb1RvZ2dsZSIsInByZWRpY2F0ZSIsImhhcyIsInNldEF0dHJpYnV0ZXMiLCJhdHRyVmFsdWUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGVzIiwidGFnIiwib2JqIiwia25vd25Cb29sZWFucyIsImF0dHJzIiwiaSIsImF0dHJWYWwiLCJnZXRBdHRyaWJ1dGUiLCJhdHRyaWJ1dGUiLCJibG9ja1RleHRTZWxlY3Rpb24iLCJib2R5IiwiZm9jdXMiLCJvbnNlbGVjdHN0YXJ0IiwidW5ibG9ja1RleHRTZWxlY3Rpb24iLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJwYXJlbnROb2RlIiwicmVjdCIsInJlc3VsdCIsImsiLCJ1bmRlZmluZWQiLCJoZWlnaHQiLCJwYXJzZUZsb2F0Iiwid2lkdGgiLCJmaW5kUG9zaXRpb24iLCJib3giLCJsZWZ0IiwidG9wIiwiZG9jRWwiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRMZWZ0Iiwic2Nyb2xsTGVmdCIsInBhZ2VYT2Zmc2V0IiwiY2xpZW50VG9wIiwic2Nyb2xsVG9wIiwicGFnZVlPZmZzZXQiLCJNYXRoIiwicm91bmQiLCJnZXRQb2ludGVyUG9zaXRpb24iLCJldmVudCIsInBvc2l0aW9uIiwiYm94VyIsIm9mZnNldFdpZHRoIiwiYm94SCIsIm9mZnNldEhlaWdodCIsImJveFkiLCJib3hYIiwicGFnZVkiLCJwYWdlWCIsImNoYW5nZWRUb3VjaGVzIiwieSIsIm1heCIsIm1pbiIsImlzVGV4dE5vZGUiLCJlbXB0eUVsIiwicmVtb3ZlQ2hpbGQiLCJub3JtYWxpemVDb250ZW50IiwibWFwIiwiY3JlYXRlVGV4dE5vZGUiLCJub2RlIiwiaW5zZXJ0Q29udGVudCIsImlzU2luZ2xlTGVmdENsaWNrIiwiYnV0dG9uIiwiYnV0dG9ucyIsIiQiLCIkJCIsIkRvbSIsImZyZWV6ZSIsIl9ndWlkIiwibmV3R1VJRCIsImVsRGF0YSIsImVsSWRBdHRyIiwiZ2V0VGltZSIsImdldERhdGEiLCJpZCIsImhhc0RhdGEiLCJyZW1vdmVEYXRhIiwiX2NsZWFuVXBFdmVudHMiLCJlbGVtIiwiaGFuZGxlcnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hlciIsImRldGFjaEV2ZW50IiwiZGlzYWJsZWQiLCJfaGFuZGxlTXVsdGlwbGVFdmVudHMiLCJ0eXBlcyIsImNhbGxiYWNrIiwiZml4RXZlbnQiLCJyZXR1cm5UcnVlIiwicmV0dXJuRmFsc2UiLCJpc1Byb3BhZ2F0aW9uU3RvcHBlZCIsIm9sZCIsInByZXZlbnREZWZhdWx0Iiwic3JjRWxlbWVudCIsInJlbGF0ZWRUYXJnZXQiLCJmcm9tRWxlbWVudCIsInRvRWxlbWVudCIsInJldHVyblZhbHVlIiwiZGVmYXVsdFByZXZlbnRlZCIsInN0b3BQcm9wYWdhdGlvbiIsImNhbmNlbEJ1YmJsZSIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsImlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkIiwiY2xpZW50WCIsImRvYyIsImNsaWVudFkiLCJ3aGljaCIsImNoYXJDb2RlIiwia2V5Q29kZSIsIl9zdXBwb3J0c1Bhc3NpdmUiLCJvcHRzIiwiZGVmaW5lUHJvcGVydHkiLCJnZXQiLCJhZGRFdmVudExpc3RlbmVyIiwicGFzc2l2ZUV2ZW50cyIsIm9uIiwiZ3VpZCIsImhhc2giLCJoYW5kbGVyc0NvcHkiLCJtIiwibiIsIm9wdGlvbnMiLCJwYXNzaXZlIiwiYXR0YWNoRXZlbnQiLCJyZW1vdmVUeXBlIiwidCIsInNwbGljZSIsInRyaWdnZXIiLCJlbGVtRGF0YSIsIm93bmVyRG9jdW1lbnQiLCJidWJibGVzIiwidGFyZ2V0RGF0YSIsIm9uZSIsImZ1bmMiLCJFdmVudHMiLCJfd2luZG93TG9hZGVkIiwidmlkZW9qcyIsImF1dG9TZXR1cCIsInZpZHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImF1ZGlvcyIsImRpdnMiLCJtZWRpYUVscyIsIm1lZGlhRWwiLCJwbGF5ZXIiLCJhdXRvU2V0dXBUaW1lb3V0Iiwid2FpdCIsInZqcyIsInNldFRpbWVvdXQiLCJyZWFkeVN0YXRlIiwiY3JlYXRlU3R5bGVFbGVtZW50Iiwic3R5bGUiLCJzZXRUZXh0Q29udGVudCIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwidWlkIiwiYm91bmQiLCJ0aHJvdHRsZSIsImxhc3QiLCJub3ciLCJ0aHJvdHRsZWQiLCJkZWJvdW5jZSIsImltbWVkaWF0ZSIsInRpbWVvdXQiLCJjYW5jZWwiLCJjbGVhclRpbWVvdXQiLCJkZWJvdW5jZWQiLCJfbGF0ZXIiLCJsYXRlciIsIkV2ZW50VGFyZ2V0IiwiYWxsb3dlZEV2ZW50c18iLCJhZWwiLCJkaXNwYXRjaEV2ZW50IiwiRVZFTlRfTUFQIiwicXVldWVUcmlnZ2VyIiwiX3RoaXMiLCJNYXAiLCJzZXQiLCJvbGRUaW1lb3V0IiwiZGVsZXRlIiwic2l6ZSIsImlzRXZlbnRlZCIsImV2ZW50QnVzRWxfIiwiZXZlcnkiLCJhZGRFdmVudGVkQ2FsbGJhY2siLCJldmVudGVkQ2FsbGJhY2tzIiwiaXNWYWxpZEV2ZW50VHlwZSIsInZhbGlkYXRlVGFyZ2V0Iiwibm9kZU5hbWUiLCJ2YWxpZGF0ZUV2ZW50VHlwZSIsInZhbGlkYXRlTGlzdGVuZXIiLCJsaXN0ZW5lciIsIm5vcm1hbGl6ZUxpc3RlbkFyZ3MiLCJpc1RhcmdldGluZ1NlbGYiLCJzaGlmdCIsImxpc3RlbiIsIkV2ZW50ZWRNaXhpbiIsIm9uJCQxIiwiX25vcm1hbGl6ZUxpc3RlbkFyZ3MiLCJyZW1vdmVMaXN0ZW5lck9uRGlzcG9zZSIsInJlbW92ZVJlbW92ZXJPblRhcmdldERpc3Bvc2UiLCJvbmUkJDEiLCJfdGhpczIiLCJfbm9ybWFsaXplTGlzdGVuQXJnczIiLCJ3cmFwcGVyIiwibGFyZ3MiLCJvZmYkJDEiLCJ0YXJnZXRPclR5cGUiLCJ0eXBlT3JMaXN0ZW5lciIsInRyaWdnZXIkJDEiLCJldmVudGVkIiwiX29wdGlvbnMiLCJldmVudEJ1c0tleSIsIlN0YXRlZnVsTWl4aW4iLCJzdGF0ZSIsInNldFN0YXRlIiwic3RhdGVVcGRhdGVzIiwiY2hhbmdlcyIsImZyb20iLCJ0byIsInN0YXRlZnVsIiwiZGVmYXVsdFN0YXRlIiwiaGFuZGxlU3RhdGVDaGFuZ2VkIiwidG9UaXRsZUNhc2UiLCJzdHJpbmciLCJjaGFyQXQiLCJ0aXRsZUNhc2VFcXVhbHMiLCJzdHIxIiwic3RyMiIsIm1lcmdlT3B0aW9ucyIsIkNvbXBvbmVudCIsInJlYWR5IiwicGxheSIsInBsYXllcl8iLCJwYXJlbnRDb21wb25lbnRfIiwib3B0aW9uc18iLCJpZF8iLCJuYW1lXyIsImVsXyIsImNoaWxkcmVuXyIsImNoaWxkSW5kZXhfIiwiY2hpbGROYW1lSW5kZXhfIiwiaW5pdENoaWxkcmVuIiwicmVwb3J0VG91Y2hBY3Rpdml0eSIsImVuYWJsZVRvdWNoQWN0aXZpdHkiLCJfcHJvdG8iLCJkaXNwb3NlIiwiY3JlYXRlRWwkJDEiLCJsb2NhbGl6ZSIsInRva2VucyIsImRlZmF1bHRWYWx1ZSIsImNvZGUiLCJsYW5ndWFnZSIsImxhbmd1YWdlcyIsInByaW1hcnlDb2RlIiwicHJpbWFyeUxhbmciLCJsb2NhbGl6ZWRTdHJpbmciLCJyZXBsYWNlIiwibWF0Y2giLCJpbmRleCIsInJldCIsImNvbnRlbnRFbCIsImNvbnRlbnRFbF8iLCJjaGlsZHJlbiIsImdldENoaWxkQnlJZCIsImdldENoaWxkIiwiYWRkQ2hpbGQiLCJjb21wb25lbnQiLCJjb21wb25lbnROYW1lIiwiY29tcG9uZW50Q2xhc3NOYW1lIiwiY29tcG9uZW50Q2xhc3MiLCJDb21wb25lbnRDbGFzcyIsImdldENvbXBvbmVudCIsImNoaWxkTm9kZXMiLCJyZWZOb2RlIiwiY2hpbGRGb3VuZCIsImNvbXBFbCIsInBhcmVudE9wdGlvbnMiLCJoYW5kbGVBZGQiLCJwbGF5ZXJPcHRpb25zIiwibmV3Q2hpbGQiLCJ3b3JraW5nQ2hpbGRyZW4iLCJUZWNoIiwic29tZSIsIndjaGlsZCIsImlzVGVjaCIsImJ1aWxkQ1NTQ2xhc3MiLCJzeW5jIiwiaXNSZWFkeV8iLCJyZWFkeVF1ZXVlXyIsInRyaWdnZXJSZWFkeSIsInJlYWR5UXVldWUiLCIkJCQxIiwiJCQkJDEiLCJoYXNDbGFzcyQkMSIsImFkZENsYXNzJCQxIiwicmVtb3ZlQ2xhc3MkJDEiLCJ0b2dnbGVDbGFzcyQkMSIsInNob3ciLCJoaWRlIiwibG9ja1Nob3dpbmciLCJ1bmxvY2tTaG93aW5nIiwiZ2V0QXR0cmlidXRlJCQxIiwic2V0QXR0cmlidXRlJCQxIiwicmVtb3ZlQXR0cmlidXRlJCQxIiwibnVtIiwic2tpcExpc3RlbmVycyIsImRpbWVuc2lvbiIsImRpbWVuc2lvbnMiLCJ3aWR0aE9ySGVpZ2h0IiwicHhJbmRleCIsInBhcnNlSW50IiwiY3VycmVudERpbWVuc2lvbiIsImNvbXB1dGVkV2lkdGhPckhlaWdodCIsImdldFByb3BlcnR5VmFsdWUiLCJydWxlIiwiY3VycmVudERpbWVuc2lvbnMiLCJjdXJyZW50V2lkdGgiLCJjdXJyZW50SGVpZ2h0IiwiYmx1ciIsImhhbmRsZUtleVByZXNzIiwiZW1pdFRhcEV2ZW50cyIsInRvdWNoU3RhcnQiLCJmaXJzdFRvdWNoIiwidGFwTW92ZW1lbnRUaHJlc2hvbGQiLCJ0b3VjaFRpbWVUaHJlc2hvbGQiLCJjb3VsZEJlVGFwIiwidG91Y2hlcyIsInhkaWZmIiwieWRpZmYiLCJ0b3VjaERpc3RhbmNlIiwic3FydCIsIm5vVGFwIiwidG91Y2hUaW1lIiwicmVwb3J0VXNlckFjdGl2aXR5IiwicmVwb3J0IiwidG91Y2hIb2xkaW5nIiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwidG91Y2hFbmQiLCJ0aW1lb3V0SWQiLCJkaXNwb3NlRm4iLCJpbnRlcnZhbCIsIl90aGlzMyIsImludGVydmFsSWQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJfdGhpczQiLCJzdXBwb3J0c1JhZl8iLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsInJlZ2lzdGVyQ29tcG9uZW50IiwiQ29tcG9uZW50VG9SZWdpc3RlciIsImlzQ29tcCIsImlzUHJvdG90eXBlT2YiLCJyZWFzb24iLCJjb21wb25lbnRzXyIsIlBsYXllciIsInBsYXllcnMiLCJwbGF5ZXJOYW1lcyIsInBuYW1lIiwiQm9vbGVhbiIsIlVTRVJfQUdFTlQiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ3ZWJraXRWZXJzaW9uTWFwIiwiZXhlYyIsImFwcGxlV2Via2l0VmVyc2lvbiIsInBvcCIsIklTX0lQQUQiLCJJU19JUEhPTkUiLCJJU19JUE9EIiwiSVNfSU9TIiwiSU9TX1ZFUlNJT04iLCJJU19BTkRST0lEIiwiQU5EUk9JRF9WRVJTSU9OIiwibWFqb3IiLCJtaW5vciIsIklTX05BVElWRV9BTkRST0lEIiwiSVNfRklSRUZPWCIsIklTX0VER0UiLCJJU19DSFJPTUUiLCJDSFJPTUVfVkVSU0lPTiIsIklFX1ZFUlNJT04iLCJJU19TQUZBUkkiLCJJU19BTllfU0FGQVJJIiwiVE9VQ0hfRU5BQkxFRCIsIm1heFRvdWNoUG9pbnRzIiwiRG9jdW1lbnRUb3VjaCIsImJyb3dzZXIiLCJyYW5nZUNoZWNrIiwiZm5OYW1lIiwibWF4SW5kZXgiLCJnZXRSYW5nZSIsInZhbHVlSW5kZXgiLCJyYW5nZXMiLCJyYW5nZUluZGV4IiwiY3JlYXRlVGltZVJhbmdlc09iaiIsInN0YXJ0IiwiZW5kIiwiY3JlYXRlVGltZVJhbmdlcyIsImJ1ZmZlcmVkUGVyY2VudCIsImJ1ZmZlcmVkIiwiZHVyYXRpb24iLCJidWZmZXJlZER1cmF0aW9uIiwiRnVsbHNjcmVlbkFwaSIsImFwaU1hcCIsInNwZWNBcGkiLCJicm93c2VyQXBpIiwicHJlZml4ZWRBUEkiLCJfaSIsIk1lZGlhRXJyb3IiLCJtZXNzYWdlIiwiZGVmYXVsdE1lc3NhZ2VzIiwic3RhdHVzIiwiZXJyb3JUeXBlcyIsImVyck51bSIsImlzUHJvbWlzZSIsInRoZW4iLCJzaWxlbmNlUHJvbWlzZSIsInRyYWNrVG9Kc29uXyIsInRyYWNrIiwiYWNjIiwiY3VlcyIsImN1ZSIsInN0YXJ0VGltZSIsImVuZFRpbWUiLCJ0ZXh0VHJhY2tzVG9Kc29uIiwidGVjaCIsInRyYWNrRWxzIiwidHJhY2tPYmpzIiwidHJhY2tzIiwidHJhY2tFbCIsImpzb24iLCJzcmMiLCJ0ZXh0VHJhY2tzIiwianNvblRvVGV4dFRyYWNrcyIsImFkZGVkVHJhY2siLCJhZGRSZW1vdGVUZXh0VHJhY2siLCJhZGRDdWUiLCJ0ZXh0VHJhY2tDb252ZXJ0ZXIiLCJNT0RBTF9DTEFTU19OQU1FIiwiTW9kYWxEaWFsb2ciLCJfQ29tcG9uZW50Iiwib3BlbmVkXyIsImhhc0JlZW5PcGVuZWRfIiwiaGFzQmVlbkZpbGxlZF8iLCJjbG9zZWFibGUiLCJ1bmNsb3NlYWJsZSIsInJvbGUiLCJkZXNjRWxfIiwiZGVzY3JpcHRpb24iLCJ0YWJJbmRleCIsImxhYmVsIiwicHJldmlvdXNseUFjdGl2ZUVsXyIsImlzRXZlbnRLZXkiLCJjbG9zZSIsImRlc2MiLCJvcGVuIiwiZmlsbEFsd2F5cyIsImZpbGwiLCJ3YXNQbGF5aW5nXyIsInBhdXNlZCIsInBhdXNlT25PcGVuIiwicGF1c2UiLCJoYWRDb250cm9sc18iLCJjb250cm9scyIsImNvbmRpdGlvbmFsRm9jdXNfIiwib3BlbmVkIiwiY29uZGl0aW9uYWxCbHVyXyIsInRlbXBvcmFyeSIsImNsb3NlYWJsZV8iLCJ0ZW1wIiwiY29udHJvbFRleHQiLCJmaWxsV2l0aCIsInBhcmVudEVsIiwibmV4dFNpYmxpbmdFbCIsIm5leHRTaWJsaW5nIiwiZW1wdHkiLCJjbG9zZUJ1dHRvbiIsImNvbnRlbnRfIiwiYWN0aXZlRWwiLCJhY3RpdmVFbGVtZW50IiwicGxheWVyRWwiLCJoYW5kbGVLZXlEb3duIiwiZm9jdXNhYmxlRWxzIiwiZm9jdXNhYmxlRWxzXyIsImZvY3VzSW5kZXgiLCJzaGlmdEtleSIsImFsbENoaWxkcmVuIiwicXVlcnlTZWxlY3RvckFsbCIsIkhUTUxBbmNob3JFbGVtZW50IiwiSFRNTEFyZWFFbGVtZW50IiwiaGFzQXR0cmlidXRlIiwiSFRNTElucHV0RWxlbWVudCIsIkhUTUxTZWxlY3RFbGVtZW50IiwiSFRNTFRleHRBcmVhRWxlbWVudCIsIkhUTUxCdXR0b25FbGVtZW50IiwiSFRNTElGcmFtZUVsZW1lbnQiLCJIVE1MT2JqZWN0RWxlbWVudCIsIkhUTUxFbWJlZEVsZW1lbnQiLCJUcmFja0xpc3QiLCJfRXZlbnRUYXJnZXQiLCJ0cmFja3NfIiwiYWRkVHJhY2siLCJyZW1vdmVUcmFjayIsInJ0cmFjayIsImwiLCJnZXRUcmFja0J5SWQiLCJjaGFuZ2UiLCJhZGR0cmFjayIsInJlbW92ZXRyYWNrIiwiZGlzYWJsZU90aGVycyIsImxpc3QiLCJlbmFibGVkIiwiQXVkaW9UcmFja0xpc3QiLCJfVHJhY2tMaXN0IiwiY2hhbmdpbmdfIiwiZW5hYmxlZENoYW5nZV8iLCJkaXNhYmxlT3RoZXJzJDEiLCJzZWxlY3RlZCIsIlZpZGVvVHJhY2tMaXN0Iiwic2VsZWN0ZWRDaGFuZ2VfIiwiVGV4dFRyYWNrTGlzdCIsInF1ZXVlQ2hhbmdlXyIsInRyaWdnZXJTZWxlY3RlZGxhbmd1YWdlY2hhbmdlIiwidHJpZ2dlclNlbGVjdGVkbGFuZ3VhZ2VjaGFuZ2VfIiwibm9uTGFuZ3VhZ2VUZXh0VHJhY2tLaW5kIiwia2luZCIsInNlbGVjdGVkbGFuZ3VhZ2VjaGFuZ2VfIiwiSHRtbFRyYWNrRWxlbWVudExpc3QiLCJ0cmFja0VsZW1lbnRzIiwidHJhY2tFbGVtZW50c18iLCJhZGRUcmFja0VsZW1lbnRfIiwidHJhY2tFbGVtZW50IiwiZ2V0VHJhY2tFbGVtZW50QnlUcmFja18iLCJ0cmFja0VsZW1lbnRfIiwicmVtb3ZlVHJhY2tFbGVtZW50XyIsIlRleHRUcmFja0N1ZUxpc3QiLCJzZXRDdWVzXyIsImxlbmd0aF8iLCJvbGRMZW5ndGgiLCJjdWVzXyIsImRlZmluZVByb3AiLCJnZXRDdWVCeUlkIiwiVmlkZW9UcmFja0tpbmQiLCJhbHRlcm5hdGl2ZSIsImNhcHRpb25zIiwibWFpbiIsInNpZ24iLCJzdWJ0aXRsZXMiLCJjb21tZW50YXJ5IiwiQXVkaW9UcmFja0tpbmQiLCJUZXh0VHJhY2tLaW5kIiwiZGVzY3JpcHRpb25zIiwiY2hhcHRlcnMiLCJtZXRhZGF0YSIsIlRleHRUcmFja01vZGUiLCJoaWRkZW4iLCJzaG93aW5nIiwiVHJhY2siLCJ0cmFja1Byb3BzIiwiX2xvb3AiLCJwYXJzZVVybCIsInVybCIsInByb3BzIiwiaHJlZiIsImFkZFRvQm9keSIsImhvc3QiLCJwcm90b2NvbCIsImRpdiIsImlubmVySFRNTCIsImRldGFpbHMiLCJsb2NhdGlvbiIsImdldEFic29sdXRlVVJMIiwiZ2V0RmlsZUV4dGVuc2lvbiIsInBhdGgiLCJzcGxpdFBhdGhSZSIsInBhdGhQYXJ0cyIsInRvTG93ZXJDYXNlIiwiaXNDcm9zc09yaWdpbiIsIndpbkxvYyIsInVybEluZm8iLCJzcmNQcm90b2NvbCIsImNyb3NzT3JpZ2luIiwiVXJsIiwicGFyc2VDdWVzIiwic3JjQ29udGVudCIsInBhcnNlciIsIldlYlZUVCIsIlBhcnNlciIsInZ0dGpzIiwiU3RyaW5nRGVjb2RlciIsImVycm9ycyIsIm9uY3VlIiwib25wYXJzaW5nZXJyb3IiLCJvbmZsdXNoIiwicGFyc2UiLCJncm91cENvbGxhcHNlZCIsImdyb3VwRW5kIiwiZmx1c2giLCJsb2FkVHJhY2siLCJ1cmkiLCJjb3JzIiwiZXJyIiwicmVzcG9uc2UiLCJyZXNwb25zZUJvZHkiLCJsb2FkZWRfIiwidGVjaF8iLCJsb2FkSGFuZGxlciIsImVycm9ySGFuZGxlciIsIlRleHRUcmFjayIsIl9UcmFjayIsInNldHRpbmdzIiwic3JjbGFuZyIsIm1vZGUiLCJkZWZhdWx0XyIsImRlZmF1bHQiLCJhY3RpdmVDdWVzXyIsImFjdGl2ZUN1ZXMiLCJjaGFuZ2VkIiwidGltZXVwZGF0ZUhhbmRsZXIiLCJkZWZpbmVQcm9wZXJ0aWVzIiwibmV3TW9kZSIsImN0IiwiY3VycmVudFRpbWUiLCJhY3RpdmUiLCJvcmlnaW5hbEN1ZSIsIlZUVEN1ZSIsIm9yaWdpbmFsQ3VlXyIsInJlbW92ZUN1ZSIsIl9yZW1vdmVDdWUiLCJjdWVjaGFuZ2UiLCJBdWRpb1RyYWNrIiwibmV3RW5hYmxlZCIsIlZpZGVvVHJhY2siLCJuZXdTZWxlY3RlZCIsIk5PTkUiLCJMT0FESU5HIiwiTE9BREVEIiwiRVJST1IiLCJIVE1MVHJhY2tFbGVtZW50IiwibG9hZCIsIk5PUk1BTCIsImF1ZGlvIiwiTGlzdENsYXNzIiwiVHJhY2tDbGFzcyIsImNhcGl0YWxOYW1lIiwidmlkZW8iLCJnZXR0ZXJOYW1lIiwicHJpdmF0ZU5hbWUiLCJSRU1PVEUiLCJyZW1vdGVUZXh0IiwicmVtb3RlVGV4dEVsIiwiQUxMIiwibmFtZXMiLCJjcmVhdGVUcmFja0hlbHBlciIsImhhc1N0YXJ0ZWRfIiwiZmVhdHVyZXNQcm9ncmVzc0V2ZW50cyIsIm1hbnVhbFByb2dyZXNzT24iLCJmZWF0dXJlc1RpbWV1cGRhdGVFdmVudHMiLCJtYW51YWxUaW1lVXBkYXRlc09uIiwibmF0aXZlQ2FwdGlvbnMiLCJuYXRpdmVUZXh0VHJhY2tzIiwiZmVhdHVyZXNOYXRpdmVUZXh0VHJhY2tzIiwiZW11bGF0ZVRleHRUcmFja3MiLCJhdXRvUmVtb3RlVGV4dFRyYWNrc18iLCJpbml0VHJhY2tMaXN0ZW5lcnMiLCJuYXRpdmVDb250cm9sc0ZvclRvdWNoIiwidHJpZ2dlclNvdXJjZXNldCIsIm9uRHVyYXRpb25DaGFuZ2UiLCJtYW51YWxQcm9ncmVzcyIsInRyYWNrUHJvZ3Jlc3MiLCJtYW51YWxQcm9ncmVzc09mZiIsInN0b3BUcmFja2luZ1Byb2dyZXNzIiwicHJvZ3Jlc3NJbnRlcnZhbCIsIm51bUJ1ZmZlcmVkUGVyY2VudCIsImJ1ZmZlcmVkUGVyY2VudF8iLCJkdXJhdGlvbl8iLCJidWZmZXJlZFBlcmNlbnQkJDEiLCJtYW51YWxUaW1lVXBkYXRlcyIsInRyYWNrQ3VycmVudFRpbWUiLCJzdG9wVHJhY2tpbmdDdXJyZW50VGltZSIsIm1hbnVhbFRpbWVVcGRhdGVzT2ZmIiwiY3VycmVudFRpbWVJbnRlcnZhbCIsIm1hbnVhbGx5VHJpZ2dlcmVkIiwiY2xlYXJUcmFja3MiLCJyZW1vdmVSZW1vdGVUZXh0VHJhY2siLCJjbGVhbnVwQXV0b1RleHRUcmFja3MiLCJyZXNldCIsImVycm9yXyIsInBsYXllZCIsInNldEN1cnJlbnRUaW1lIiwidHJhY2tMaXN0Q2hhbmdlcyIsImFkZFdlYlZ0dFNjcmlwdF8iLCJfdGhpczUiLCJzY3JpcHQiLCJvbmxvYWQiLCJvbmVycm9yIiwiX3RoaXM2IiwicmVtb3RlVHJhY2tzIiwicmVtb3RlVGV4dFRyYWNrcyIsImhhbmRsZUFkZFRyYWNrIiwiaGFuZGxlUmVtb3ZlVHJhY2siLCJ1cGRhdGVEaXNwbGF5IiwidGV4dFRyYWNrc0NoYW5nZXMiLCJhZGRUZXh0VHJhY2siLCJjcmVhdGVSZW1vdGVUZXh0VHJhY2siLCJtYW51YWxDbGVhbnVwIiwiX3RoaXM3IiwiaHRtbFRyYWNrRWxlbWVudCIsInJlbW90ZVRleHRUcmFja0VscyIsImdldFZpZGVvUGxheWJhY2tRdWFsaXR5Iiwic2V0UG9zdGVyIiwicGxheXNpbmxpbmUiLCJzZXRQbGF5c2lubGluZSIsIm92ZXJyaWRlTmF0aXZlQXVkaW9UcmFja3MiLCJvdmVycmlkZU5hdGl2ZVZpZGVvVHJhY2tzIiwiY2FuUGxheVR5cGUiLCJjYW5QbGF5U291cmNlIiwic3JjT2JqIiwicmVnaXN0ZXJUZWNoIiwidGVjaHNfIiwiZGVmYXVsdFRlY2hPcmRlcl8iLCJnZXRUZWNoIiwiZmVhdHVyZXNWb2x1bWVDb250cm9sIiwiZmVhdHVyZXNNdXRlQ29udHJvbCIsImZlYXR1cmVzRnVsbHNjcmVlblJlc2l6ZSIsImZlYXR1cmVzUGxheWJhY2tSYXRlIiwiZmVhdHVyZXNTb3VyY2VzZXQiLCJ3aXRoU291cmNlSGFuZGxlcnMiLCJfVGVjaCIsInJlZ2lzdGVyU291cmNlSGFuZGxlciIsImhhbmRsZXIiLCJzb3VyY2VIYW5kbGVycyIsImNhbiIsInNlbGVjdFNvdXJjZUhhbmRsZXIiLCJjYW5IYW5kbGVTb3VyY2UiLCJzaCIsImRlZmVycmFibGUiLCJvcmlnaW5hbEZuIiwic291cmNlSGFuZGxlcl8iLCJzZXRTb3VyY2UiLCJuYXRpdmVTb3VyY2VIYW5kbGVyIiwiZGlzcG9zZVNvdXJjZUhhbmRsZXIiLCJjdXJyZW50U291cmNlXyIsImhhbmRsZVNvdXJjZSIsIm1pZGRsZXdhcmVzIiwibWlkZGxld2FyZUluc3RhbmNlcyIsIlRFUk1JTkFUT1IiLCJ1c2UiLCJtaWRkbGV3YXJlIiwibmV4dCIsInNldFNvdXJjZUhlbHBlciIsInNldFRlY2giLCJtdyIsInJlZHVjZVJpZ2h0IiwibWlkZGxld2FyZUl0ZXJhdG9yIiwic2V0JDEiLCJhcmciLCJtZWRpYXRlIiwiY2FsbE1ldGhvZCIsIm1pZGRsZXdhcmVWYWx1ZSIsInRlcm1pbmF0ZWQiLCJleGVjdXRlUmlnaHQiLCJhbGxvd2VkR2V0dGVycyIsInNlZWthYmxlIiwiYWxsb3dlZFNldHRlcnMiLCJhbGxvd2VkTWVkaWF0b3JzIiwibXdzIiwiY2xlYXJDYWNoZUZvclBsYXllciIsImdldE9yQ3JlYXRlRmFjdG9yeSIsIm13RmFjdG9yeSIsIl9td3MkaSIsIm13ZiIsIm13aSIsImxhc3RSdW4iLCJfbWlkZGxld2FyZSIsIm13cmVzdCIsIl9zcmMiLCJNaW1ldHlwZXNLaW5kIiwib3B1cyIsIm9ndiIsIm1wNCIsIm1vdiIsIm00diIsIm1rdiIsIm1wMyIsImFhYyIsIm9nYSIsIm0zdTgiLCJqcGciLCJqcGVnIiwiZ2lmIiwicG5nIiwic3ZnIiwid2VicCIsImdldE1pbWV0eXBlIiwiZXh0IiwibWltZXR5cGUiLCJmaW5kTWltZXR5cGUiLCJjYWNoZV8iLCJtYXRjaGluZ1NvdXJjZXMiLCJzIiwiZmlsdGVyU291cmNlIiwibmV3c3JjIiwic3Jjb2JqIiwiZml4U291cmNlIiwiTWVkaWFMb2FkZXIiLCJqIiwidGVjaE9yZGVyIiwidGVjaE5hbWUiLCJpc1N1cHBvcnRlZCIsImxvYWRUZWNoXyIsIkNsaWNrYWJsZUNvbXBvbmVudCIsInRhYkluZGV4XyIsImNyZWF0ZUNvbnRyb2xUZXh0RWwiLCJjb250cm9sVGV4dEVsXyIsImNvbnRyb2xUZXh0XyIsImxvY2FsaXplZFRleHQiLCJub25JY29uQ29udHJvbCIsImVuYWJsZWRfIiwiaGFuZGxlQ2xpY2siLCJoYW5kbGVGb2N1cyIsImhhbmRsZUJsdXIiLCJQb3N0ZXJJbWFnZSIsIl9DbGlja2FibGVDb21wb25lbnQiLCJ1cGRhdGUiLCJwb3N0ZXIiLCJzZXRTcmMiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJkYXJrR3JheSIsImxpZ2h0R3JheSIsImZvbnRNYXAiLCJtb25vc3BhY2UiLCJzYW5zU2VyaWYiLCJzZXJpZiIsIm1vbm9zcGFjZVNhbnNTZXJpZiIsIm1vbm9zcGFjZVNlcmlmIiwicHJvcG9ydGlvbmFsU2Fuc1NlcmlmIiwicHJvcG9ydGlvbmFsU2VyaWYiLCJjYXN1YWwiLCJzbWFsbGNhcHMiLCJjb25zdHJ1Y3RDb2xvciIsImNvbG9yIiwib3BhY2l0eSIsImhleCIsInRyeVVwZGF0ZVN0eWxlIiwiVGV4dFRyYWNrRGlzcGxheSIsInVwZGF0ZURpc3BsYXlIYW5kbGVyIiwidG9nZ2xlRGlzcGxheSIsInByZXNlbGVjdFRyYWNrIiwibW9kZXMiLCJ0cmFja0xpc3QiLCJ1c2VyUHJlZiIsInNlbGVjdGVkTGFuZ3VhZ2UiLCJmaXJzdERlc2MiLCJmaXJzdENhcHRpb25zIiwicHJlZmVycmVkVHJhY2siLCJjbGVhckRpc3BsYXkiLCJwcm9jZXNzQ3VlcyIsImRlc2NyaXB0aW9uc1RyYWNrIiwiY2FwdGlvbnNTdWJ0aXRsZXNUcmFjayIsInVwZGF0ZUZvclRyYWNrIiwidGV4dFRyYWNrU2V0dGluZ3MiLCJvdmVycmlkZXMiLCJnZXRWYWx1ZXMiLCJjdWVEaXYiLCJkaXNwbGF5U3RhdGUiLCJ0ZXh0T3BhY2l0eSIsImJhY2tncm91bmRDb2xvciIsImJhY2tncm91bmRPcGFjaXR5Iiwid2luZG93Q29sb3IiLCJ3aW5kb3dPcGFjaXR5IiwiZWRnZVN0eWxlIiwidGV4dFNoYWRvdyIsImZvbnRQZXJjZW50IiwiZm9udFNpemUiLCJib3R0b20iLCJmb250RmFtaWx5IiwiZm9udFZhcmlhbnQiLCJMb2FkaW5nU3Bpbm5lciIsImlzQXVkaW8iLCJwbGF5ZXJUeXBlIiwiZGlyIiwiQnV0dG9uIiwiQmlnUGxheUJ1dHRvbiIsIl9CdXR0b24iLCJtb3VzZXVzZWRfIiwiaGFuZGxlTW91c2VEb3duIiwicGxheVByb21pc2UiLCJjYiIsInBsYXlUb2dnbGUiLCJwbGF5Rm9jdXMiLCJDbG9zZUJ1dHRvbiIsIlBsYXlUb2dnbGUiLCJyZXBsYXkiLCJoYW5kbGVQbGF5IiwiaGFuZGxlUGF1c2UiLCJoYW5kbGVFbmRlZCIsImhhbmRsZVNlZWtlZCIsImRlZmF1bHRJbXBsZW1lbnRhdGlvbiIsInNlY29uZHMiLCJndWlkZSIsImZsb29yIiwiaCIsImdtIiwiZ2giLCJpc05hTiIsIkluZmluaXR5IiwiaW1wbGVtZW50YXRpb24iLCJzZXRGb3JtYXRUaW1lIiwiY3VzdG9tSW1wbGVtZW50YXRpb24iLCJyZXNldEZvcm1hdFRpbWUiLCJmb3JtYXRUaW1lIiwiVGltZURpc3BsYXkiLCJ0aHJvdHRsZWRVcGRhdGVDb250ZW50IiwidXBkYXRlQ29udGVudCIsImxhYmVsVGV4dF8iLCJ1cGRhdGVUZXh0Tm9kZV8iLCJ0ZXh0Tm9kZV8iLCJmb3JtYXR0ZWRUaW1lXyIsImZvcm1hdFRpbWVfIiwidGltZSIsInVwZGF0ZUZvcm1hdHRlZFRpbWVfIiwiZm9ybWF0dGVkVGltZSIsIkN1cnJlbnRUaW1lRGlzcGxheSIsIl9UaW1lRGlzcGxheSIsInNjcnViYmluZyIsImdldENhY2hlIiwiRHVyYXRpb25EaXNwbGF5IiwiVGltZURpdmlkZXIiLCJSZW1haW5pbmdUaW1lRGlzcGxheSIsInJlbWFpbmluZ1RpbWVEaXNwbGF5IiwicmVtYWluaW5nVGltZSIsIkxpdmVEaXNwbGF5IiwidXBkYXRlU2hvd2luZyIsIlNlZWtUb0xpdmUiLCJ1cGRhdGVMaXZlRWRnZVN0YXR1cyIsImxpdmVUcmFja2VyIiwidGV4dEVsXyIsImF0TGl2ZUVkZ2UiLCJzZWVrVG9MaXZlRWRnZSIsIlNsaWRlciIsImJhciIsImJhck5hbWUiLCJ2ZXJ0aWNhbCIsInBsYXllckV2ZW50IiwiaGFuZGxlTW91c2VNb3ZlIiwiaGFuZGxlTW91c2VVcCIsInByb2dyZXNzIiwiZ2V0UGVyY2VudCIsInBlcmNlbnRhZ2UiLCJ0b0ZpeGVkIiwiY2FsY3VsYXRlRGlzdGFuY2UiLCJzdGVwQmFjayIsInN0ZXBGb3J3YXJkIiwiYm9vbCIsInZlcnRpY2FsXyIsIkxvYWRQcm9ncmVzc0JhciIsInBhcnRFbHNfIiwiaXNMaXZlIiwic2Vla2FibGVFbmQiLCJidWZmZXJlZEVuZCIsImNvbnRyb2xUZXh0UGVyY2VudGFnZSIsInBlcmNlbnRpZnkiLCJyb3VuZGVkIiwicGVyY2VudCIsInBhcnQiLCJUaW1lVG9vbHRpcCIsInNlZWtCYXJSZWN0Iiwic2Vla0JhclBvaW50IiwidG9vbHRpcFJlY3QiLCJwbGF5ZXJSZWN0Iiwic2Vla0JhclBvaW50UHgiLCJzcGFjZUxlZnRPZlBvaW50Iiwic3BhY2VSaWdodE9mUG9pbnQiLCJyaWdodCIsInB1bGxUb29sdGlwQnkiLCJ1cGRhdGVUaW1lIiwicmFmSWRfIiwibGl2ZVdpbmRvdyIsInNlY29uZHNCZWhpbmQiLCJQbGF5UHJvZ3Jlc3NCYXIiLCJ0aW1lVG9vbHRpcCIsIk1vdXNlVGltZURpc3BsYXkiLCJTVEVQX1NFQ09ORFMiLCJQQUdFX0tFWV9NVUxUSVBMSUVSIiwiVVBEQVRFX1JFRlJFU0hfSU5URVJWQUwiLCJTZWVrQmFyIiwiX1NsaWRlciIsInNldEV2ZW50SGFuZGxlcnNfIiwidXBkYXRlSW50ZXJ2YWwiLCJlbmFibGVJbnRlcnZhbF8iLCJkaXNhYmxlSW50ZXJ2YWxfIiwidG9nZ2xlVmlzaWJpbGl0eV8iLCJ1cGRhdGVfIiwibGl2ZUN1cnJlbnRUaW1lIiwib2Zmc2V0UGFyZW50IiwiZ2V0Q3VycmVudFRpbWVfIiwic2Vla2FibGVTdGFydCIsInZpZGVvV2FzUGxheWluZyIsIm5ld1RpbWUiLCJkaXN0YW5jZSIsIm1vdXNlVGltZURpc3BsYXkiLCJoYW5kbGVBY3Rpb24iLCJnb3RvRnJhY3Rpb24iLCJjb2RlcyIsIlByb2dyZXNzQ29udHJvbCIsInRocm90dGxlZEhhbmRsZU1vdXNlU2VlayIsImhhbmRsZU1vdXNlU2VlayIsInNlZWtCYXIiLCJzZWVrQmFyRWwiLCJGdWxsc2NyZWVuVG9nZ2xlIiwiaGFuZGxlRnVsbHNjcmVlbkNoYW5nZSIsImZ1bGxzY3JlZW5FbmFibGVkIiwiaXNGdWxsc2NyZWVuIiwicmVxdWVzdEZ1bGxzY3JlZW4iLCJleGl0RnVsbHNjcmVlbiIsImNoZWNrVm9sdW1lU3VwcG9ydCIsIlZvbHVtZUxldmVsIiwiVm9sdW1lQmFyIiwidXBkYXRlTGFzdFZvbHVtZV8iLCJ1cGRhdGVBUklBQXR0cmlidXRlcyIsImNoZWNrTXV0ZWQiLCJ2b2x1bWUiLCJtdXRlZCIsImFyaWFWYWx1ZSIsInZvbHVtZUFzUGVyY2VudGFnZV8iLCJ2b2x1bWVCZWZvcmVEcmFnIiwibGFzdFZvbHVtZV8iLCJWb2x1bWVDb250cm9sIiwidm9sdW1lQmFyIiwidGhyb3R0bGVkSGFuZGxlTW91c2VNb3ZlIiwib3JpZW50YXRpb25DbGFzcyIsImNoZWNrTXV0ZVN1cHBvcnQiLCJNdXRlVG9nZ2xlIiwidm9sIiwibGFzdFZvbHVtZSIsInZvbHVtZVRvU2V0IiwidXBkYXRlSWNvbl8iLCJ1cGRhdGVDb250cm9sVGV4dF8iLCJzb3VuZE9mZiIsIlZvbHVtZVBhbmVsIiwiaW5saW5lIiwidm9sdW1lQ29udHJvbCIsInZvbHVtZVBhbmVsU3RhdGVfIiwic2xpZGVyQWN0aXZlXyIsInNsaWRlckluYWN0aXZlXyIsIm11dGVUb2dnbGUiLCJNZW51IiwibWVudUJ1dHRvbl8iLCJtZW51QnV0dG9uIiwiZm9jdXNlZENoaWxkXyIsImJvdW5kSGFuZGxlQmx1cl8iLCJib3VuZEhhbmRsZVRhcENsaWNrXyIsImhhbmRsZVRhcENsaWNrIiwiYWRkRXZlbnRMaXN0ZW5lckZvckl0ZW0iLCJyZW1vdmVFdmVudExpc3RlbmVyRm9ySXRlbSIsImFkZEl0ZW0iLCJjaGlsZENvbXBvbmVudCIsImNvbnRlbnRFbFR5cGUiLCJhcHBlbmQiLCJidG4iLCJidXR0b25QcmVzc2VkXyIsInVucHJlc3NCdXR0b24iLCJjaGlsZENvbXBvbmVudHMiLCJmb3VuZENvbXBvbmVudCIsInN0ZXBDaGlsZCIsIml0ZW0iLCJoYXZlVGl0bGUiLCJNZW51QnV0dG9uIiwiYnV0dG9uQ2xhc3MiLCJtZW51IiwiaGFuZGxlU3VibWVudUtleVByZXNzIiwiY3JlYXRlTWVudSIsIml0ZW1zIiwiaGlkZVRocmVzaG9sZF8iLCJ0aXRsZSIsInRpdGxlRWwiLCJ0aXRsZUNvbXBvbmVudCIsImNyZWF0ZUl0ZW1zIiwiYnVpbGRXcmFwcGVyQ1NTQ2xhc3MiLCJtZW51QnV0dG9uQ2xhc3MiLCJwcmVzc0J1dHRvbiIsIlRyYWNrQnV0dG9uIiwiX01lbnVCdXR0b24iLCJ1cGRhdGVIYW5kbGVyIiwiTWVudUtleXMiLCJNZW51SXRlbSIsInNlbGVjdGFibGUiLCJpc1NlbGVjdGVkXyIsIm11bHRpU2VsZWN0YWJsZSIsIl9zZWxlY3RlZCIsIlRleHRUcmFja01lbnVJdGVtIiwiX01lbnVJdGVtIiwiY2hhbmdlSGFuZGxlciIsImhhbmRsZVRyYWNrc0NoYW5nZSIsInNlbGVjdGVkTGFuZ3VhZ2VDaGFuZ2VIYW5kbGVyIiwiaGFuZGxlU2VsZWN0ZWRMYW5ndWFnZUNoYW5nZSIsIm9uY2hhbmdlIiwiRXZlbnQiLCJjcmVhdGVFdmVudCIsImluaXRFdmVudCIsInJlZmVyZW5jZVRyYWNrIiwia2luZHMiLCJzaG91bGRCZVNlbGVjdGVkIiwiT2ZmVGV4dFRyYWNrTWVudUl0ZW0iLCJfVGV4dFRyYWNrTWVudUl0ZW0iLCJhbGxIaWRkZW4iLCJUZXh0VHJhY2tCdXR0b24iLCJfVHJhY2tCdXR0b24iLCJUcmFja01lbnVJdGVtIiwibGFiZWxfIiwia2luZHNfIiwia2luZF8iLCJDaGFwdGVyc1RyYWNrTWVudUl0ZW0iLCJDaGFwdGVyc0J1dHRvbiIsIl9UZXh0VHJhY2tCdXR0b24iLCJ0cmFja18iLCJzZXRUcmFjayIsImZpbmRDaGFwdGVyc1RyYWNrIiwidXBkYXRlSGFuZGxlcl8iLCJyZW1vdGVUZXh0VHJhY2tFbCIsIl9yZW1vdGVUZXh0VHJhY2tFbCIsImdldE1lbnVDYXB0aW9uIiwibWkiLCJEZXNjcmlwdGlvbnNCdXR0b24iLCJTdWJ0aXRsZXNCdXR0b24iLCJDYXB0aW9uU2V0dGluZ3NNZW51SXRlbSIsIkNhcHRpb25zQnV0dG9uIiwiU3Vic0NhcHNNZW51SXRlbSIsIlN1YnNDYXBzQnV0dG9uIiwibGFuZ3VhZ2VfIiwiQXVkaW9UcmFja01lbnVJdGVtIiwiYXVkaW9UcmFja3MiLCJBdWRpb1RyYWNrQnV0dG9uIiwiUGxheWJhY2tSYXRlTWVudUl0ZW0iLCJyYXRlIiwicGxheWJhY2tSYXRlIiwiUGxheWJhY2tSYXRlTWVudUJ1dHRvbiIsInVwZGF0ZVZpc2liaWxpdHkiLCJ1cGRhdGVMYWJlbCIsImxhYmVsRWxfIiwicmF0ZXMiLCJwbGF5YmFja1JhdGVzIiwiY3VycmVudFJhdGUiLCJuZXdSYXRlIiwicGxheWJhY2tSYXRlU3VwcG9ydGVkIiwiU3BhY2VyIiwiQ3VzdG9tQ29udHJvbFNwYWNlciIsIl9TcGFjZXIiLCJDb250cm9sQmFyIiwiRXJyb3JEaXNwbGF5IiwiX01vZGFsRGlhbG9nIiwiTE9DQUxfU1RPUkFHRV9LRVkiLCJDT0xPUl9CTEFDSyIsIkNPTE9SX0JMVUUiLCJDT0xPUl9DWUFOIiwiQ09MT1JfR1JFRU4iLCJDT0xPUl9NQUdFTlRBIiwiQ09MT1JfUkVEIiwiQ09MT1JfV0hJVEUiLCJDT0xPUl9ZRUxMT1ciLCJPUEFDSVRZX09QQVFVRSIsIk9QQUNJVFlfU0VNSSIsIk9QQUNJVFlfVFJBTlMiLCJzZWxlY3RDb25maWdzIiwidiIsIk51bWJlciIsInBhcnNlT3B0aW9uVmFsdWUiLCJnZXRTZWxlY3RlZE9wdGlvblZhbHVlIiwic2VsZWN0ZWRJbmRleCIsInNldFNlbGVjdGVkT3B0aW9uIiwiVGV4dFRyYWNrU2V0dGluZ3MiLCJlbmREaWFsb2ciLCJzZXREZWZhdWx0cyIsInBlcnNpc3RUZXh0VHJhY2tTZXR0aW5ncyIsInNhdmVTZXR0aW5ncyIsImNvbmZpZyIsInJlc3RvcmVTZXR0aW5ncyIsImNyZWF0ZUVsU2VsZWN0XyIsImxlZ2VuZElkIiwic2VsZWN0TGFiZWxsZWRieUlkcyIsIm9wdGlvbklkIiwiY3JlYXRlRWxGZ0NvbG9yXyIsImNyZWF0ZUVsQmdDb2xvcl8iLCJjcmVhdGVFbFdpbkNvbG9yXyIsImNyZWF0ZUVsQ29sb3JzXyIsImNyZWF0ZUVsRm9udF8iLCJjcmVhdGVFbENvbnRyb2xzXyIsImRlZmF1bHRzRGVzY3JpcHRpb24iLCJzZXRWYWx1ZXMiLCJ2YWx1ZXMiLCJKU09OIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJyZW1vdmVJdGVtIiwidHREaXNwbGF5IiwiY29udHJvbEJhciIsInN1YnNDYXBzQnRuIiwic3Vic0NhcHNCdXR0b24iLCJjY0J0biIsImNhcHRpb25zQnV0dG9uIiwiUmVzaXplTWFuYWdlciIsIlJFU0laRV9PQlNFUlZFUl9BVkFJTEFCTEUiLCJSZXNpemVPYnNlcnZlciIsImxvYWRMaXN0ZW5lcl8iLCJyZXNpemVPYnNlcnZlcl8iLCJkZWJvdW5jZWRIYW5kbGVyXyIsInJlc2l6ZUhhbmRsZXIiLCJvYnNlcnZlIiwiY29udGVudFdpbmRvdyIsInVubG9hZExpc3RlbmVyXyIsInVub2JzZXJ2ZSIsImRpc2Nvbm5lY3QiLCJyZXNpemVPYnNlcnZlciIsIkxpdmVUcmFja2VyIiwicmVzZXRfIiwiaGFuZGxlRHVyYXRpb25jaGFuZ2UiLCJoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlIiwic3RvcFRyYWNraW5nIiwic3RhcnRUcmFja2luZyIsImlzQmVoaW5kXyIsInRpbWV1cGRhdGVTZWVuXyIsInNlZWthYmxlSW5jcmVtZW50Iiwic2Vla2FibGVJbmNyZW1lbnRfIiwibGl2ZUVkZ2VXaW5kb3ciLCJ0cmFja0xpdmVfIiwicGFzdFNlZWtFbmRfIiwibmV3U2Vla0VuZCIsImxhc3RTZWVrRW5kXyIsImFicyIsInBhc3RTZWVrRW5kIiwiYmVoaW5kTGl2ZUVkZ2UiLCJiZWhpbmRMaXZlRWRnZV8iLCJpc1RyYWNraW5nIiwidHJhY2tpbmdJbnRlcnZhbF8iLCJoYW5kbGVUaW1ldXBkYXRlIiwic2Vla2FibGVFbmRzIiwic29ydCIsInNlZWthYmxlU3RhcnRzIiwic291cmNlc2V0TG9hZCIsInNyY1VybHMiLCJpbm5lckhUTUxEZXNjcmlwdG9yUG9seWZpbGwiLCJjbG9uZU5vZGUiLCJkdW1teSIsImRvY0ZyYWciLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiRWxlbWVudCIsImdldERlc2NyaXB0b3IiLCJwcmlvcml0eSIsImRlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiZ2V0SW5uZXJIVE1MRGVzY3JpcHRvciIsIkhUTUxNZWRpYUVsZW1lbnQiLCJmaXJzdFNvdXJjZVdhdGNoIiwicmVzZXRTb3VyY2VXYXRjaF8iLCJpbm5lckRlc2NyaXB0b3IiLCJhcHBlbmRXcmFwcGVyIiwiYXBwZW5kRm4iLCJyZXR2YWwiLCJzcmNEZXNjcmlwdG9yUG9seWZpbGwiLCJnZXRTcmNEZXNjcmlwdG9yIiwic2V0dXBTb3VyY2VzZXQiLCJyZXNldFNvdXJjZXNldF8iLCJzcmNEZXNjcmlwdG9yIiwib2xkU2V0QXR0cmlidXRlIiwib2xkTG9hZCIsImN1cnJlbnRTcmMiLCJfdGVtcGxhdGVPYmplY3QkMSIsIkh0bWw1IiwiY3Jvc3NvcmlnaW5UcmFja3MiLCJpbml0TmV0d29ya1N0YXRlXyIsImhhbmRsZUxhdGVJbml0XyIsImVuYWJsZVNvdXJjZXNldCIsInNldHVwU291cmNlc2V0SGFuZGxpbmdfIiwiaGFzQ2hpbGROb2RlcyIsIm5vZGVzIiwibm9kZXNMZW5ndGgiLCJyZW1vdmVOb2RlcyIsInByb3h5TmF0aXZlVHJhY2tzXyIsInJlc3RvcmVNZXRhZGF0YVRyYWNrc0luSU9TTmF0aXZlUGxheWVyXyIsInNldENvbnRyb2xzIiwicHJveHlXZWJraXRGdWxsc2NyZWVuXyIsImRpc3Bvc2VNZWRpYUVsZW1lbnQiLCJtZXRhZGF0YVRyYWNrc1ByZUZ1bGxzY3JlZW5TdGF0ZSIsInRha2VNZXRhZGF0YVRyYWNrU25hcHNob3QiLCJzdG9yZWRNb2RlIiwicmVzdG9yZVRyYWNrTW9kZSIsInN0b3JlZFRyYWNrIiwib3ZlcnJpZGVOYXRpdmVfIiwib3ZlcnJpZGUiLCJsb3dlckNhc2VUeXBlIiwiZXZlbnROYW1lIiwiZWxUcmFja3MiLCJwcm94eU5hdGl2ZVRyYWNrc0ZvclR5cGVfIiwidGVjaFRyYWNrcyIsImxpc3RlbmVycyIsImN1cnJlbnRUYXJnZXQiLCJyZW1vdmVPbGRUcmFja3MiLCJyZW1vdmVUcmFja3MiLCJmb3VuZCIsInBsYXllckVsSW5nZXN0IiwibW92aW5nTWVkaWFFbGVtZW50SW5ET00iLCJjbG9uZSIsInRhZ0F0dHJpYnV0ZXMiLCJ0ZWNoSWQiLCJjbGFzcyIsInBsYXllcklkIiwicHJlbG9hZCIsInNldHRpbmdzQXR0cnMiLCJhdHRyIiwibmV0d29ya1N0YXRlIiwibG9hZHN0YXJ0RmlyZWQiLCJzZXRMb2Fkc3RhcnRGaXJlZCIsInRyaWdnZXJMb2Fkc3RhcnQiLCJldmVudHNUb1RyaWdnZXIiLCJjaGVja1Byb2dyZXNzIiwiTmFOIiwiZW5kRm4iLCJiZWdpbkZuIiwid2Via2l0UHJlc2VudGF0aW9uTW9kZSIsInN1cHBvcnRzRnVsbFNjcmVlbiIsIndlYmtpdEVudGVyRnVsbFNjcmVlbiIsImVudGVyRnVsbFNjcmVlbiIsIkhBVkVfTUVUQURBVEEiLCJleGl0RnVsbFNjcmVlbiIsIndlYmtpdEV4aXRGdWxsU2NyZWVuIiwicmVzZXRNZWRpYUVsZW1lbnQiLCJ2aWRlb1BsYXliYWNrUXVhbGl0eSIsIndlYmtpdERyb3BwZWRGcmFtZUNvdW50Iiwid2Via2l0RGVjb2RlZEZyYW1lQ291bnQiLCJkcm9wcGVkVmlkZW9GcmFtZXMiLCJ0b3RhbFZpZGVvRnJhbWVzIiwicGVyZm9ybWFuY2UiLCJjcmVhdGlvblRpbWUiLCJ0aW1pbmciLCJuYXZpZ2F0aW9uU3RhcnQiLCJURVNUX1ZJRCIsImNhbkNvbnRyb2xWb2x1bWUiLCJjYW5NdXRlVm9sdW1lIiwiY2FuQ29udHJvbFBsYXliYWNrUmF0ZSIsImNhbk92ZXJyaWRlQXR0cmlidXRlcyIsIm5vb3AiLCJzdXBwb3J0c05hdGl2ZVRleHRUcmFja3MiLCJzdXBwb3J0c05hdGl2ZVZpZGVvVHJhY2tzIiwidmlkZW9UcmFja3MiLCJzdXBwb3J0c05hdGl2ZUF1ZGlvVHJhY2tzIiwiZmVhdHVyZXNOYXRpdmVWaWRlb1RyYWNrcyIsImZlYXR1cmVzTmF0aXZlQXVkaW9UcmFja3MiLCJtcGVndXJsUkUiLCJwYXRjaENhblBsYXlUeXBlIiwidW5wYXRjaENhblBsYXlUeXBlIiwiciIsIl90ZW1wbGF0ZU9iamVjdCQyIiwiVEVDSF9FVkVOVFNfUkVUUklHR0VSIiwiVEVDSF9FVkVOVFNfUVVFVUUiLCJjYW5wbGF5IiwiY2FucGxheXRocm91Z2giLCJwbGF5aW5nIiwic2Vla2VkIiwiQlJFQUtQT0lOVF9PUkRFUiIsIkJSRUFLUE9JTlRfQ0xBU1NFUyIsInN1YnN0cmluZyIsIkRFRkFVTFRfQlJFQUtQT0lOVFMiLCJ0aW55IiwieHNtYWxsIiwic21hbGwiLCJtZWRpdW0iLCJsYXJnZSIsInhsYXJnZSIsImh1Z2UiLCJnZXRUYWdTZXR0aW5ncyIsImNsb3Nlc3QiLCJib3VuZERvY3VtZW50RnVsbHNjcmVlbkNoYW5nZV8iLCJkb2N1bWVudEZ1bGxzY3JlZW5DaGFuZ2VfIiwiYm91bmRGdWxsV2luZG93T25Fc2NLZXlfIiwiZnVsbFdpbmRvd09uRXNjS2V5IiwiYm91bmRIYW5kbGVLZXlQcmVzc18iLCJpc1Bvc3RlckZyb21UZWNoXyIsInF1ZXVlZENhbGxiYWNrc18iLCJ1c2VyQWN0aXZlXyIsImxhbmd1YWdlc1RvTG93ZXIiLCJuYW1lJCQxIiwibGFuZ3VhZ2VzXyIsInJlc2V0Q2FjaGVfIiwicG9zdGVyXyIsImNvbnRyb2xzXyIsImNoYW5naW5nU3JjXyIsInBsYXlDYWxsYmFja3NfIiwicGxheVRlcm1pbmF0ZWRRdWV1ZV8iLCJhdXRvcGxheSIsInBsdWdpbnMiLCJzY3J1YmJpbmdfIiwiZmx1aWRfIiwidXBkYXRlU3R5bGVFbF8iLCJwbGF5ZXJPcHRpb25zQ29weSIsIm1pZGRsZXdhcmVfIiwiZmxleE5vdFN1cHBvcnRlZF8iLCJtYWpvclZlcnNpb24iLCJ1c2VyQWN0aXZlIiwibGlzdGVuRm9yVXNlckFjdGl2aXR5XyIsImhhbmRsZVN0YWdlQ2xpY2tfIiwiYnJlYWtwb2ludHMiLCJyZXNwb25zaXZlIiwiZnVsbHNjcmVlbmNoYW5nZSIsInN0eWxlRWxfIiwicGxheWVyRWxJbmdlc3RfIiwiZGl2RW1iZWQiLCJ0YWJpbmRleCIsIlZJREVPSlNfTk9fRFlOQU1JQ19TVFlMRSIsImRlZmF1bHRzU3R5bGVFbCIsImhlYWQiLCJmaWxsXyIsImZsdWlkIiwiYXNwZWN0UmF0aW8iLCJsaW5rcyIsImxpbmtFbCIsIl9kaW1lbnNpb24iLCJwcml2RGltZW5zaW9uIiwicGFyc2VkVmFsIiwicmF0aW8iLCJhc3BlY3RSYXRpb18iLCJfd2lkdGgiLCJ3aWR0aF8iLCJfaGVpZ2h0IiwiaGVpZ2h0XyIsInRlY2hFbCIsImlkQ2xhc3MiLCJ2aWRlb1dpZHRoIiwidmlkZW9IZWlnaHQiLCJyYXRpb1BhcnRzIiwicmF0aW9NdWx0aXBsaWVyIiwidW5sb2FkVGVjaF8iLCJ0aXRsZVRlY2hOYW1lIiwiY2FtZWxUZWNoTmFtZSIsInRlY2hOYW1lXyIsInRlY2hPcHRpb25zIiwibG9vcCIsInRlY2hDYW5PdmVycmlkZVBvc3RlciIsIlRlY2hDbGFzcyIsImhhbmRsZVRlY2hSZWFkeV8iLCJ0ZXh0VHJhY2tzSnNvbl8iLCJldmVudE9iaiIsInNlZWtpbmciLCJoYW5kbGVUZWNoTG9hZFN0YXJ0XyIsImhhbmRsZVRlY2hTb3VyY2VzZXRfIiwiaGFuZGxlVGVjaFdhaXRpbmdfIiwiaGFuZGxlVGVjaEVuZGVkXyIsImhhbmRsZVRlY2hTZWVraW5nXyIsImhhbmRsZVRlY2hQbGF5XyIsImhhbmRsZVRlY2hGaXJzdFBsYXlfIiwiaGFuZGxlVGVjaFBhdXNlXyIsImhhbmRsZVRlY2hEdXJhdGlvbkNoYW5nZV8iLCJoYW5kbGVUZWNoRnVsbHNjcmVlbkNoYW5nZV8iLCJoYW5kbGVUZWNoRXJyb3JfIiwiaGFuZGxlVGVjaFBvc3RlckNoYW5nZV8iLCJoYW5kbGVUZWNoVGV4dERhdGFfIiwiaGFuZGxlVGVjaFJhdGVDaGFuZ2VfIiwidXNpbmdOYXRpdmVDb250cm9scyIsInRlY2hHZXRfIiwiYWRkVGVjaENvbnRyb2xzTGlzdGVuZXJzXyIsInNhZmV0eSIsInJlbW92ZVRlY2hDb250cm9sc0xpc3RlbmVyc18iLCJoYW5kbGVUZWNoQ2xpY2tfIiwiaGFuZGxlVGVjaERvdWJsZUNsaWNrXyIsImhhbmRsZVRlY2hUb3VjaFN0YXJ0XyIsImhhbmRsZVRlY2hUb3VjaE1vdmVfIiwiaGFuZGxlVGVjaFRvdWNoRW5kXyIsImhhbmRsZVRlY2hUYXBfIiwidGVjaENhbGxfIiwiaGFzU3RhcnRlZCIsIm1hbnVhbEF1dG9wbGF5XyIsInByZXZpb3VzbHlNdXRlZCIsInJlc3RvcmVNdXRlZCIsIm11dGVkUHJvbWlzZSIsImNhdGNoIiwicHJvbWlzZSIsInVwZGF0ZVNvdXJjZUNhY2hlc18iLCJzb3VyY2VFbFNvdXJjZXMiLCJzb3VyY2VFbHMiLCJtYXRjaGluZ1NvdXJjZUVscyIsInNvdXJjZU9iaiIsInVwZGF0ZVNvdXJjZUNhY2hlcyIsInBsYXllclNyYyIsImN1cnJlbnRTb3VyY2UiLCJldmVudFNyYyIsImxhc3RTb3VyY2VfIiwidXBkYXRlQ2FjaGUiLCJ0ZWNoU3JjIiwidGVjaEdldCIsInJlcXVlc3QiLCJsYXN0UGxheWJhY2tSYXRlIiwicXVldWVkIiwidGltZVdoZW5XYWl0aW5nIiwidGltZVVwZGF0ZUxpc3RlbmVyIiwiaGFuZGxlVGVjaENhblBsYXlfIiwiaGFuZGxlVGVjaENhblBsYXlUaHJvdWdoXyIsImhhbmRsZVRlY2hQbGF5aW5nXyIsImhhbmRsZVRlY2hTZWVrZWRfIiwic3RhcnR0aW1lIiwiaW5BbGxvd2VkRWxzIiwidXNlckFjdGlvbnMiLCJkb3VibGVDbGljayIsInVzZXJXYXNBY3RpdmUiLCJ0b2dnbGVGdWxsc2NyZWVuQ2xhc3NfIiwiZnNBcGkiLCJmdWxsc2NyZWVuRWxlbWVudCIsIm1hdGNoZXMiLCJmdWxsc2NyZWVuIiwiaW5hY3Rpdml0eVRpbWVvdXQiLCJkZWZhdWx0UGxheWJhY2tSYXRlIiwibWVkaWEiLCJfdGhpczgiLCJQcm9taXNlQ2xhc3MiLCJQcm9taXNlIiwicmVzb2x2ZSIsInBsYXlfIiwiX3RoaXM5IiwiaXNTcmNSZWFkeSIsIndhaXRUb1BsYXlfIiwicnVuUGxheVRlcm1pbmF0ZWRRdWV1ZV8iLCJydW5QbGF5Q2FsbGJhY2tzXyIsInF1ZXVlIiwicSIsImNhbGxiYWNrcyIsImlzU2NydWJiaW5nIiwibGl2ZXVpIiwicGVyY2VudEFzRGVjaW1hbCIsIl9tdXRlZCIsImRlZmF1bHRNdXRlZCIsIl9kZWZhdWx0TXV0ZWQiLCJpc0ZTIiwiaXNGdWxsc2NyZWVuXyIsImVudGVyRnVsbFdpbmRvdyIsImV4aXRGdWxsV2luZG93IiwiaXNGdWxsV2luZG93IiwiZG9jT3JpZ092ZXJmbG93Iiwib3ZlcmZsb3ciLCJob3RrZXlzIiwiaGFuZGxlSG90a2V5cyIsIl9ob3RrZXlzJGZ1bGxzY3JlZW5LZSIsImZ1bGxzY3JlZW5LZXkiLCJrZXlkb3duRXZlbnQiLCJfaG90a2V5cyRtdXRlS2V5IiwibXV0ZUtleSIsIl9ob3RrZXlzJHBsYXlQYXVzZUtleSIsInBsYXlQYXVzZUtleSIsIkZTVG9nZ2xlIiwic2VsZWN0U291cmNlIiwiX3RoaXMxMCIsInRlY2hzIiwiX3JlZiIsImZpbmRGaXJzdFBhc3NpbmdUZWNoU291cmNlUGFpciIsIm91dGVyQXJyYXkiLCJpbm5lckFycmF5IiwidGVzdGVyIiwib3V0ZXJDaG9pY2UiLCJpbm5lckNob2ljZSIsImZvdW5kU291cmNlQW5kVGVjaCIsImZsaXAiLCJiIiwiZmluZGVyIiwiX3JlZjIiLCJzb3VyY2VPcmRlciIsIl90aGlzMTEiLCJub3RTdXBwb3J0ZWRNZXNzYWdlIiwibWlkZGxld2FyZVNvdXJjZSIsInNyY18iLCJfdGhpczEyIiwic291cmNlVGVjaCIsIl90aGlzMTMiLCJkb1Jlc2V0XyIsInJlc2V0Q29udHJvbEJhclVJXyIsInJlc2V0UHJvZ3Jlc3NCYXJfIiwicmVzZXRQbGF5YmFja1JhdGVfIiwicmVzZXRWb2x1bWVCYXJfIiwiX3RoaXMkY29udHJvbEJhciIsImR1cmF0aW9uRGlzcGxheSIsImN1cnJlbnRTb3VyY2VzIiwiY3VycmVudFR5cGUiLCJ0ZWNoQXV0b3BsYXkiLCJuZXdQb3N0ZXIiLCJ1c2luZ05hdGl2ZUNvbnRyb2xzXyIsImVycm9yRGlzcGxheSIsInVzZXJBY3Rpdml0eV8iLCJtb3VzZUluUHJvZ3Jlc3MiLCJsYXN0TW92ZVgiLCJsYXN0TW92ZVkiLCJoYW5kbGVBY3Rpdml0eSIsInNjcmVlblgiLCJzY3JlZW5ZIiwiaXNBdWRpb18iLCJfb2JqIiwiU3RyaW5nIiwidG9KU09OIiwiY3JlYXRlTW9kYWwiLCJfdGhpczE0IiwibW9kYWwiLCJ1cGRhdGVDdXJyZW50QnJlYWtwb2ludF8iLCJjdXJyZW50QnJlYWtwb2ludCIsImNhbmRpZGF0ZUJyZWFrcG9pbnQiLCJtYXhXaWR0aCIsImJyZWFrcG9pbnRzXyIsImJyZWFrcG9pbnRfIiwicmVtb3ZlQ3VycmVudEJyZWFrcG9pbnRfIiwiY3VycmVudEJyZWFrcG9pbnRDbGFzcyIsIl9icmVha3BvaW50cyIsInJlc3BvbnNpdmVfIiwiY3VycmVudCIsImxvYWRNZWRpYSIsIl90aGlzMTUiLCJfdGhpcyRjYWNoZV8kbWVkaWEiLCJhcnR3b3JrIiwidHQiLCJnZXRNZWRpYSIsImJhc2VPcHRpb25zIiwidGFnT3B0aW9ucyIsImRhdGFTZXR1cCIsIl9zYWZlUGFyc2VUdXBsZSIsImNoaWxkTmFtZSIsImh0bWw1IiwiZmxhc2giLCJ1c2VyTGFuZ3VhZ2UiLCJCQVNFX1BMVUdJTl9OQU1FIiwiUExVR0lOX0NBQ0hFX0tFWSIsInBsdWdpblN0b3JhZ2UiLCJwbHVnaW5FeGlzdHMiLCJnZXRQbHVnaW4iLCJtYXJrUGx1Z2luQXNBY3RpdmUiLCJ0cmlnZ2VyU2V0dXBFdmVudCIsImJlZm9yZSIsImNyZWF0ZUJhc2ljUGx1Z2luIiwicGx1Z2luIiwiYmFzaWNQbHVnaW5XcmFwcGVyIiwiY3JlYXRlUGx1Z2luRmFjdG9yeSIsIlBsdWdpblN1YkNsYXNzIiwiZ2V0RXZlbnRIYXNoIiwiUGx1Z2luIiwiVkVSU0lPTiIsImlzQmFzaWMiLCJyZWdpc3RlclBsdWdpbiIsImRlcmVnaXN0ZXJQbHVnaW4iLCJnZXRQbHVnaW5zIiwiZ2V0UGx1Z2luVmVyc2lvbiIsInVzaW5nUGx1Z2luIiwiaGFzUGx1Z2luIiwiX2luaGVyaXRzJDEiLCJfaW5oZXJpdHMiLCJUeXBlRXJyb3IiLCJ3cml0YWJsZSIsInN1cGVyXyIsImV4dGVuZCIsInN1YkNsYXNzTWV0aG9kcyIsIm1ldGhvZHMiLCJub3JtYWxpemVJZCIsInZpZGVvanMkMSIsImdldFBsYXllciIsImRlZmF1bHRWaWV3IiwiaG9va3MiLCJob29rRnVuY3Rpb24iLCJQbGF5ZXJDb21wb25lbnQiLCJob29rc18iLCJob29rIiwiaG9va09uY2UiLCJvcmlnaW5hbCIsInJlbW92ZUhvb2siLCJzdHlsZSQxIiwiZ2V0UGxheWVycyIsIm5JZCIsIl90YWciLCJfcGxheWVyIiwiZ2V0QWxsUGxheWVycyIsImNvbXAiLCJ3cml0ZWFibGUiLCJhZGRMYW5ndWFnZSIsIl9tZXJnZU9wdGlvbnMiLCJjcmVhdGVUaW1lUmFuZ2UiLCJ4aHIiLCJkb20iLCJyZXNvbHZlVXJsIiwiYmFzZVVSTCIsInJlbGF0aXZlVVJMIiwiYnVpbGRBYnNvbHV0ZVVSTCIsInJlc29sdmVNYW5pZmVzdFJlZGlyZWN0IiwiaGFuZGxlTWFuaWZlc3RSZWRpcmVjdCIsInJlcSIsInJlc3BvbnNlVVJMIiwiY2xhc3NDYWxsQ2hlY2siLCJjcmVhdGVDbGFzcyIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsImdldCQxIiwicHJvcGVydHkiLCJyZWNlaXZlciIsImdldFByb3RvdHlwZU9mIiwiZ2V0dGVyIiwiaW5oZXJpdHMiLCJwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2xpY2VkVG9BcnJheSIsInNsaWNlSXRlcmF0b3IiLCJhcnIiLCJfYXJyIiwiX24iLCJfZCIsIl9lIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJfcyIsImRvbmUiLCJtZXJnZU9wdGlvbnMkMSIsIkV2ZW50VGFyZ2V0JDEiLCJsb2ckMSIsImZvckVhY2hNZWRpYUdyb3VwIiwibWFzdGVyIiwibWVkaWFUeXBlIiwiZ3JvdXBLZXkiLCJtZWRpYUdyb3VwcyIsImxhYmVsS2V5IiwibWVkaWFQcm9wZXJ0aWVzIiwidXBkYXRlU2VnbWVudHMiLCJvZmZzZXQiLCJyZXNvbHZlU2VnbWVudFVyaXMiLCJzZWdtZW50IiwiYmFzZVVyaSIsInJlc29sdmVkVXJpIiwidXBkYXRlTWFzdGVyIiwicGxheWxpc3QiLCJwbGF5bGlzdHMiLCJzZWdtZW50cyIsImVuZExpc3QiLCJtZWRpYVNlcXVlbmNlIiwibWVyZ2VkUGxheWxpc3QiLCJzZXR1cE1lZGlhUGxheWxpc3RzIiwicmVzb2x2ZU1lZGlhR3JvdXBVcmlzIiwicmVmcmVzaERlbGF5IiwibGFzdFNlZ21lbnQiLCJkZWxheSIsInRhcmdldER1cmF0aW9uIiwiUGxheWxpc3RMb2FkZXIiLCJzcmNVcmwiLCJobHMiLCJfb3B0aW9ucyR3aXRoQ3JlZGVudGkiLCJ3aXRoQ3JlZGVudGlhbHMiLCJfb3B0aW9ucyRoYW5kbGVNYW5pZmUiLCJoYW5kbGVNYW5pZmVzdFJlZGlyZWN0cyIsImhsc18iLCJobHNPcHRpb25zIiwiY3VzdG9tVGFnUGFyc2VycyIsImN1c3RvbVRhZ01hcHBlcnMiLCJwbGF5bGlzdFJlcXVlc3RFcnJvciIsImhhdmVNZXRhZGF0YSIsInhociQkMSIsInN0YXJ0aW5nU3RhdGUiLCJyZXNwb25zZVRleHQiLCJjdXN0b21QYXJzZXIiLCJhZGRQYXJzZXIiLCJtYXBwZXIiLCJhZGRUYWdNYXBwZXIiLCJtYW5pZmVzdCIsIm1lZGlhXyIsIm1lZGlhVXBkYXRlVGltZW91dCIsInN0b3BSZXF1ZXN0Iiwib2xkUmVxdWVzdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsImFib3J0IiwibWVkaWFDaGFuZ2UiLCJzdGFydGVkIiwiaXNGaW5hbFJlbmRpdGlvbiIsImJhY2t3YXJkRHVyYXRpb24iLCJlbmRTZXF1ZW5jZSIsInByZWNpc2UiLCJmb3J3YXJkRHVyYXRpb24iLCJpbnRlcnZhbER1cmF0aW9uIiwiZXhwaXJlZCIsImJhY2t3YXJkIiwiZm9yd2FyZCIsInRvdGFsRHVyYXRpb24iLCJzdW1EdXJhdGlvbnMiLCJzdGFydEluZGV4IiwiZW5kSW5kZXgiLCJkdXJhdGlvbnMiLCJzYWZlTGl2ZUluZGV4IiwiZGlzdGFuY2VGcm9tRW5kIiwic2FmZURpc3RhbmNlIiwicGxheWxpc3RFbmQiLCJ1c2VTYWZlTGl2ZUVuZCIsImlzV2hvbGVOdW1iZXIiLCJyb3VuZFNpZ25pZmljYW50RGlnaXQiLCJpbmNyZW1lbnQiLCJudW1EZWNpbWFsRGlnaXRzIiwic2NhbGUiLCJwb3ciLCJjZWlsTGVhc3RTaWduaWZpY2FudERpZ2l0IiwiZmxvb3JMZWFzdFNpZ25pZmljYW50RGlnaXQiLCJnZXRNZWRpYUluZm9Gb3JUaW1lIiwibnVtU2VnbWVudHMiLCJtZWRpYUluZGV4IiwiaXNCbGFja2xpc3RlZCIsImV4Y2x1ZGVVbnRpbCIsImlzSW5jb21wYXRpYmxlIiwiaXNFbmFibGVkIiwiYmxhY2tsaXN0ZWQiLCJpc0Rpc2FibGVkIiwiaXNBZXMiLCJpc0ZtcDQiLCJlc3RpbWF0ZVNlZ21lbnRSZXF1ZXN0VGltZSIsInNlZ21lbnREdXJhdGlvbiIsImJhbmR3aWR0aCIsImJ5dGVzUmVjZWl2ZWQiLCJCQU5EV0lEVEgiLCJpc0xvd2VzdEVuYWJsZWRSZW5kaXRpb24iLCJjdXJyZW50QmFuZHdpZHRoIiwiTUFYX1ZBTFVFIiwiUGxheWxpc3QiLCJ2aWRlb2pzWEhSIiwibWVyZ2VPcHRpb25zJDEkMSIsInhockZhY3RvcnkiLCJYaHJGdW5jdGlvbiIsImJlZm9yZVJlcXVlc3QiLCJIbHMiLCJuZXdPcHRpb25zIiwicmVxUmVzcG9uc2UiLCJyZXNwb25zZVRpbWUiLCJyb3VuZFRyaXBUaW1lIiwicmVxdWVzdFRpbWUiLCJieXRlTGVuZ3RoIiwiaGVhZGVycyIsInJlc3BvbnNlSGVhZGVycyIsInRpbWVkb3V0IiwiYWJvcnRlZCIsInN0YXR1c0NvZGUiLCJvcmlnaW5hbEFib3J0IiwidGV4dFJhbmdlIiwicmFuZ2UiLCJmb3JtYXRIZXhTdHJpbmciLCJmb3JtYXRBc2NpaVN0cmluZyIsImZyb21DaGFyQ29kZSIsImNyZWF0ZVRyYW5zZmVyYWJsZU1lc3NhZ2UiLCJ0cmFuc2ZlcmFibGUiLCJBcnJheUJ1ZmZlciIsImlzVmlldyIsImJ5dGVzIiwiYnVmZmVyIiwiYnl0ZU9mZnNldCIsImluaXRTZWdtZW50SWQiLCJpbml0U2VnbWVudCIsImJ5dGVyYW5nZSIsImhleER1bXAiLCJzdGVwIiwiYXNjaWkiLCJ0YWdEdW1wIiwidGV4dFJhbmdlcyIsInV0aWxzIiwiU0VHTUVOVF9FTkRfRlVER0VfUEVSQ0VOVCIsInBsYXllclRpbWVUb1Byb2dyYW1UaW1lIiwicGxheWVyVGltZSIsImRhdGVUaW1lT2JqZWN0IiwidHJhbnNtdXhlclByZXBlbmRlZFNlY29uZHMiLCJ2aWRlb1RpbWluZ0luZm8iLCJ0cmFuc211eGVkU3RhcnQiLCJ0cmFuc211eGVkUHJlc2VudGF0aW9uU3RhcnQiLCJzdGFydE9mU2VnbWVudCIsIm9mZnNldEZyb21TZWdtZW50U3RhcnQiLCJvcmlnaW5hbFNlZ21lbnRWaWRlb0R1cmF0aW9uIiwidHJhbnNtdXhlZFByZXNlbnRhdGlvbkVuZCIsImZpbmRTZWdtZW50Rm9yUHJvZ3JhbVRpbWUiLCJwcm9ncmFtVGltZSIsIm5leHRTZWdtZW50U3RhcnQiLCJsYXN0U2VnbWVudFN0YXJ0IiwibGFzdFNlZ21lbnREdXJhdGlvbiIsImxhc3RTZWdtZW50RW5kIiwiZXN0aW1hdGVkU3RhcnQiLCJmaW5kU2VnbWVudEZvclBsYXllclRpbWUiLCJzZWdtZW50RW5kIiwiZ2V0T2Zmc2V0RnJvbVRpbWVzdGFtcCIsImNvbXBhcmlzb25UaW1lU3RhbXAiLCJzZWdtZW50RGF0ZVRpbWUiLCJwcm9ncmFtRGF0ZVRpbWUiLCJzZWdtZW50VGltZUVwb2NoIiwicHJvZ3JhbVRpbWVFcG9jaCIsInZlcmlmeVByb2dyYW1EYXRlVGltZVRhZ3MiLCJnZXRQcm9ncmFtVGltZSIsIl9yZWYkdGltZSIsIm1hdGNoZWRTZWdtZW50Iiwic2Vla1RpbWUiLCJwcm9ncmFtVGltZU9iamVjdCIsIm1lZGlhU2Vjb25kcyIsInRvSVNPU3RyaW5nIiwic2Vla1RvUHJvZ3JhbVRpbWUiLCJfcmVmMiRyZXRyeUNvdW50IiwicmV0cnlDb3VudCIsInNlZWtUbyIsIl9yZWYyJHBhdXNlQWZ0ZXJTZWVrIiwicGF1c2VBZnRlclNlZWsiLCJtZWRpYU9mZnNldCIsInNlZWtUb1RpbWUiLCJzZWVrZWRDYWxsYmFjayIsIlRJTUVfRlVER0VfRkFDVE9SIiwiU0FGRV9USU1FX0RFTFRBIiwiZmlsdGVyUmFuZ2VzIiwidGltZVJhbmdlcyIsInJlc3VsdHMiLCJmaW5kUmFuZ2UiLCJmaW5kTmV4dFJhbmdlIiwiZmluZEdhcHMiLCJwcmludGFibGVSYW5nZSIsInN0ckFyciIsInRpbWVVbnRpbFJlYnVmZmVyIiwidGltZVJhbmdlc1RvQXJyYXkiLCJ0aW1lUmFuZ2VzTGlzdCIsImNyZWF0ZVRleHRUcmFja3NJZk5lY2Vzc2FyeSIsInNvdXJjZUJ1ZmZlciIsIm1lZGlhU291cmNlIiwiaW5iYW5kVGV4dFRyYWNrc18iLCJ0cmFja0lkIiwiY2FwdGlvblN0cmVhbXMiLCJtZXRhZGF0YVRyYWNrXyIsImluQmFuZE1ldGFkYXRhVHJhY2tEaXNwYXRjaFR5cGUiLCJkaXNwYXRjaFR5cGUiLCJyZW1vdmVDdWVzRnJvbVRyYWNrIiwiZGVwcmVjYXRlT2xkQ3VlIiwiZnJhbWUiLCJwcml2YXRlRGF0YSIsImR1cmF0aW9uT2ZWaWRlbyIsImR1ciIsImFkZFRleHRUcmFja0RhdGEiLCJzb3VyY2VIYW5kbGVyIiwiY2FwdGlvbkFycmF5IiwibWV0YWRhdGFBcnJheSIsIkN1ZSIsIldlYktpdERhdGFDdWUiLCJjYXB0aW9uIiwic3RyZWFtIiwidGltZXN0YW1wT2Zmc2V0IiwidmlkZW9EdXJhdGlvbiIsIm1lZGlhU291cmNlXyIsImN1ZVRpbWUiLCJmcmFtZXMiLCJjdWVzQXJyYXkiLCJjdWVzR3JvdXBlZEJ5U3RhcnRUaW1lIiwidGltZVNsb3QiLCJzb3J0ZWRTdGFydFRpbWVzIiwiaWR4IiwiY3VlR3JvdXAiLCJuZXh0VGltZSIsIndpbiIsIndpbmRvdyIsIlRBUkdFVCIsIlNDUklQVF9UWVBFIiwiQmxvYkJ1aWxkZXIiLCJXZWJLaXRCbG9iQnVpbGRlciIsIk1vekJsb2JCdWlsZGVyIiwiTVNCbG9iQnVpbGRlciIsIlVSTCIsIndlYmtpdFVSTCIsIm1zVVJMIiwiV29ya2VyIiwic2hpbVdvcmtlciIsImZpbGVuYW1lIiwiU2hpbVdvcmtlciIsImZvcmNlRmFsbGJhY2siLCJvYmpVUkwiLCJjcmVhdGVTb3VyY2VPYmplY3QiLCJ3cmFwVGVybWluYXRlIiwic2VsZlNoaW0iLCJwb3N0TWVzc2FnZSIsIm9ubWVzc2FnZSIsImlzVGhpc1RocmVhZCIsInRlc3RXb3JrZXIiLCJ0ZXN0QXJyYXkiLCJVaW50OEFycmF5IiwicmV2b2tlT2JqZWN0VVJMIiwidGVybWluYXRlIiwiY3JlYXRlT2JqZWN0VVJMIiwiQmxvYiIsImJsb2IiLCJnZXRCbG9iIiwid29ya2VyIiwidGVybSIsIlRyYW5zbXV4V29ya2VyIiwiZG9jdW1lbnQkJDEiLCJ0cmFuc211eGVyV29ya2VyIiwiVUlOVDMyX01BWCIsImRpbmYiLCJlc2RzIiwiZnR5cCIsIm1kYXQiLCJtZmhkIiwibWluZiIsIm1vb2YiLCJtb292IiwibXZleCIsIm12aGQiLCJ0cmFrIiwidGtoZCIsIm1kaWEiLCJtZGhkIiwiaGRsciIsInNkdHAiLCJzdGJsIiwic3RzZCIsInRyYWYiLCJ0cmV4IiwidHJ1biIsIk1BSk9SX0JSQU5EIiwiTUlOT1JfVkVSU0lPTiIsIkFWQzFfQlJBTkQiLCJWSURFT19IRExSIiwiQVVESU9fSERMUiIsIkhETFJfVFlQRVMiLCJWTUhEIiwiU01IRCIsIkRSRUYiLCJTVENPIiwiU1RTQyIsIlNUU1oiLCJTVFRTIiwiYXZjMSIsImF2Y0MiLCJidHJ0IiwiZHJlZiIsIm1wNGEiLCJzbWhkIiwic3RjbyIsInN0c2MiLCJzdHN6Iiwic3R0cyIsInN0eXAiLCJ0ZmR0IiwidGZoZCIsInZtaGQiLCJjaGFyQ29kZUF0IiwicGF5bG9hZCIsInZpZXciLCJEYXRhVmlldyIsInNldFVpbnQzMiIsImF1ZGlvb2JqZWN0dHlwZSIsInNhbXBsaW5nZnJlcXVlbmN5aW5kZXgiLCJjaGFubmVsY291bnQiLCJzYW1wbGVyYXRlIiwic2VxdWVuY2VOdW1iZXIiLCJ0cmFja0ZyYWdtZW50cyIsImJveGVzIiwic2FtcGxlcyIsImZsYWdzIiwiZGVwZW5kc09uIiwiaXNEZXBlbmRlZE9uIiwiaGFzUmVkdW5kYW5jeSIsInZpZGVvU2FtcGxlIiwiYXVkaW9TYW1wbGUiLCJzcHMiLCJwcHMiLCJzZXF1ZW5jZVBhcmFtZXRlclNldHMiLCJwaWN0dXJlUGFyYW1ldGVyU2V0cyIsInByb2ZpbGVJZGMiLCJwcm9maWxlQ29tcGF0aWJpbGl0eSIsImxldmVsSWRjIiwic2FtcGxlc2l6ZSIsInRyYWNrRnJhZ21lbnRIZWFkZXIiLCJ0cmFja0ZyYWdtZW50RGVjb2RlVGltZSIsInRyYWNrRnJhZ21lbnRSdW4iLCJzYW1wbGVEZXBlbmRlbmN5VGFibGUiLCJkYXRhT2Zmc2V0IiwidXBwZXJXb3JkQmFzZU1lZGlhRGVjb2RlVGltZSIsImxvd2VyV29yZEJhc2VNZWRpYURlY29kZVRpbWUiLCJiYXNlTWVkaWFEZWNvZGVUaW1lIiwiYXVkaW9UcnVuIiwidmlkZW9UcnVuIiwidHJ1bkhlYWRlciIsImR1cmF0aW9uUHJlc2VudCIsInNpemVQcmVzZW50IiwiZmxhZ3NQcmVzZW50IiwiY29tcG9zaXRpb25UaW1lT2Zmc2V0Iiwic2FtcGxlIiwiaXNMZWFkaW5nIiwicGFkZGluZ1ZhbHVlIiwiaXNOb25TeW5jU2FtcGxlIiwiZGVncmFkYXRpb25Qcmlvcml0eSIsIm1wNEdlbmVyYXRvciIsImZpbGVUeXBlIiwibW92aWUiLCJ0b1Vuc2lnbmVkIiwiYmluIiwidG9VbnNpZ25lZCQxIiwiX2ZpbmRCb3giLCJwYXJzZVR5cGUiLCJ0aW1lc2NhbGUiLCJnZXRWaWRlb1RyYWNrSWRzIiwiZmluZEJveCIsInN1YnJlc3VsdHMiLCJzdWJhcnJheSIsImluaXQiLCJ0cmFrcyIsImZyYWdtZW50IiwidHJhZnMiLCJiYXNlVGltZXMiLCJiYXNlVGltZSIsImlzRmluaXRlIiwidmlkZW9UcmFja0lkcyIsImhkbHJzIiwidGtoZHMiLCJoYW5kbGVyVHlwZSIsImdldFVpbnQ4IiwiZ2V0VWludDMyIiwicHJvYmUiLCJTdHJlYW0iLCJwaXBlIiwiZGVzdGluYXRpb24iLCJmbHVzaFNvdXJjZSIsImdyb3VwTmFsc0ludG9GcmFtZXMiLCJuYWxVbml0cyIsImN1cnJlbnROYWwiLCJjdXJyZW50RnJhbWUiLCJuYWxVbml0VHlwZSIsImR0cyIsInB0cyIsImtleUZyYW1lIiwiZ3JvdXBGcmFtZXNJbnRvR29wcyIsImN1cnJlbnRHb3AiLCJnb3BzIiwibmFsQ291bnQiLCJleHRlbmRGaXJzdEtleUZyYW1lIiwiY3JlYXRlRGVmYXVsdFNhbXBsZSIsInNhbXBsZUZvckZyYW1lIiwiZ2VuZXJhdGVTYW1wbGVUYWJsZSIsImJhc2VEYXRhT2Zmc2V0IiwiY29uY2F0ZW5hdGVOYWxEYXRhIiwibmFsc0J5dGVMZW5ndGgiLCJudW1iZXJPZk5hbHMiLCJ0b3RhbEJ5dGVMZW5ndGgiLCJmcmFtZVV0aWxzIiwiaGlnaFByZWZpeCIsImxvd1ByZWZpeCIsInplcm9GaWxsIiwiY291bnQiLCJtYWtlVGFibGUiLCJtZXRhVGFibGUiLCJjb25lT2ZTaWxlbmNlIiwic2lsZW5jZSIsIk9ORV9TRUNPTkRfSU5fVFMiLCJzZWNvbmRzVG9WaWRlb1RzIiwic2Vjb25kc1RvQXVkaW9UcyIsInZpZGVvVHNUb1NlY29uZHMiLCJhdWRpb1RzVG9TZWNvbmRzIiwiYXVkaW9Uc1RvVmlkZW9UcyIsInZpZGVvVHNUb0F1ZGlvVHMiLCJzYW1wbGVSYXRlIiwidGltZXN0YW1wIiwiY2xvY2siLCJPTkVfU0VDT05EX0lOX1RTJDEiLCJzdW1GcmFtZUJ5dGVMZW5ndGhzIiwiYXJyYXkiLCJjdXJyZW50T2JqIiwic3VtIiwicHJlZml4V2l0aFNpbGVuY2UiLCJhdWRpb0FwcGVuZFN0YXJ0VHMiLCJ2aWRlb0Jhc2VNZWRpYURlY29kZVRpbWUiLCJiYXNlTWVkaWFEZWNvZGVUaW1lVHMiLCJmcmFtZUR1cmF0aW9uIiwiYXVkaW9HYXBEdXJhdGlvbiIsImF1ZGlvRmlsbEZyYW1lQ291bnQiLCJhdWRpb0ZpbGxEdXJhdGlvbiIsInNpbGVudEZyYW1lIiwiY2VpbCIsInRyaW1BZHRzRnJhbWVzQnlFYXJsaWVzdER0cyIsImFkdHNGcmFtZXMiLCJlYXJsaWVzdEFsbG93ZWREdHMiLCJtaW5TZWdtZW50RHRzIiwibWluU2VnbWVudFB0cyIsImdlbmVyYXRlU2FtcGxlVGFibGUkMSIsImNvbmNhdGVuYXRlRnJhbWVEYXRhIiwiYXVkaW9GcmFtZVV0aWxzIiwiT05FX1NFQ09ORF9JTl9UUyQyIiwiY29sbGVjdER0c0luZm8iLCJ0aW1lbGluZVN0YXJ0SW5mbyIsIm1heFNlZ21lbnRQdHMiLCJtYXhTZWdtZW50RHRzIiwiY2xlYXJEdHNJbmZvIiwiY2FsY3VsYXRlVHJhY2tCYXNlTWVkaWFEZWNvZGVUaW1lIiwia2VlcE9yaWdpbmFsVGltZXN0YW1wcyIsInRyYWNrRGVjb2RlSW5mbyIsIlVTRVJfREFUQV9SRUdJU1RFUkVEX0lUVV9UX1QzNSIsIlJCU1BfVFJBSUxJTkdfQklUUyIsInBhcnNlU2VpIiwicGF5bG9hZFR5cGUiLCJwYXlsb2FkU2l6ZSIsInBhcnNlVXNlckRhdGEiLCJzZWkiLCJwYXJzZUNhcHRpb25QYWNrZXRzIiwidXNlckRhdGEiLCJjY0RhdGEiLCJkaXNjYXJkRW11bGF0aW9uUHJldmVudGlvbkJ5dGVzIiwiZW11bGF0aW9uUHJldmVudGlvbkJ5dGVzUG9zaXRpb25zIiwibmV3TGVuZ3RoIiwibmV3RGF0YSIsInNvdXJjZUluZGV4IiwiY2FwdGlvblBhY2tldFBhcnNlciIsIkNhcHRpb25TdHJlYW0iLCJjYXB0aW9uUGFja2V0c18iLCJjY1N0cmVhbXNfIiwiQ2VhNjA4U3RyZWFtIiwiY2MiLCJuZXdDYXB0aW9uUGFja2V0cyIsImVzY2FwZWRSQlNQIiwibGF0ZXN0RHRzXyIsImlnbm9yZU5leHRFcXVhbER0c18iLCJudW1TYW1lRHRzXyIsInByZXNvcnRJbmRleCIsInBhY2tldCIsImRpc3BhdGNoQ2VhNjA4UGFja2V0IiwiYWN0aXZlQ2VhNjA4Q2hhbm5lbF8iLCJjY1N0cmVhbSIsInNldHNDaGFubmVsMUFjdGl2ZSIsInNldHNDaGFubmVsMkFjdGl2ZSIsIkNIQVJBQ1RFUl9UUkFOU0xBVElPTiIsImdldENoYXJGcm9tQ29kZSIsIkJPVFRPTV9ST1ciLCJST1dTIiwiY3JlYXRlRGlzcGxheUJ1ZmZlciIsImZpZWxkIiwiZGF0YUNoYW5uZWwiLCJmaWVsZF8iLCJkYXRhQ2hhbm5lbF8iLCJzZXRDb25zdGFudHMiLCJzd2FwIiwiY2hhcjAiLCJjaGFyMSIsImxhc3RDb250cm9sQ29kZV8iLCJQQURESU5HXyIsIlJFU1VNRV9DQVBUSU9OX0xPQURJTkdfIiwibW9kZV8iLCJFTkRfT0ZfQ0FQVElPTl8iLCJjbGVhckZvcm1hdHRpbmciLCJmbHVzaERpc3BsYXllZCIsImRpc3BsYXllZF8iLCJub25EaXNwbGF5ZWRfIiwic3RhcnRQdHNfIiwiUk9MTF9VUF8yX1JPV1NfIiwicm9sbFVwUm93c18iLCJzZXRSb2xsVXAiLCJST0xMX1VQXzNfUk9XU18iLCJST0xMX1VQXzRfUk9XU18iLCJDQVJSSUFHRV9SRVRVUk5fIiwic2hpZnRSb3dzVXBfIiwiQkFDS1NQQUNFXyIsInJvd18iLCJFUkFTRV9ESVNQTEFZRURfTUVNT1JZXyIsIkVSQVNFX05PTl9ESVNQTEFZRURfTUVNT1JZXyIsIlJFU1VNRV9ESVJFQ1RfQ0FQVElPTklOR18iLCJpc1NwZWNpYWxDaGFyYWN0ZXIiLCJjb2x1bW5fIiwiaXNFeHRDaGFyYWN0ZXIiLCJpc01pZFJvd0NvZGUiLCJhZGRGb3JtYXR0aW5nIiwiaXNPZmZzZXRDb250cm9sQ29kZSIsImlzUEFDIiwicm93IiwiZm9ybWF0dGluZ18iLCJpc0NvbG9yUEFDIiwiaXNOb3JtYWxDaGFyIiwic3RhcnRQdHMiLCJlbmRQdHMiLCJ0b3BSb3dfIiwiQkFTRV8iLCJFWFRfIiwiQ09OVFJPTF8iLCJPRkZTRVRfIiwiY2hhciIsIm5ld0Jhc2VSb3ciLCJmb3JtYXQiLCJyZXZlcnNlIiwicG9wT24iLCJiYXNlUm93Iiwicm9sbFVwIiwicGFpbnRPbiIsImNhcHRpb25TdHJlYW0iLCJzdHJlYW1UeXBlcyIsIkgyNjRfU1RSRUFNX1RZUEUiLCJBRFRTX1NUUkVBTV9UWVBFIiwiTUVUQURBVEFfU1RSRUFNX1RZUEUiLCJNQVhfVFMiLCJST19USFJFU0giLCJoYW5kbGVSb2xsb3ZlciIsInJlZmVyZW5jZSIsImRpcmVjdGlvbiIsIlRpbWVzdGFtcFJvbGxvdmVyU3RyZWFtIiwibGFzdERUUyIsInJlZmVyZW5jZURUUyIsInR5cGVfIiwiZGlzY29udGludWl0eSIsInRpbWVzdGFtcFJvbGxvdmVyU3RyZWFtIiwicGVyY2VudEVuY29kZSIsInBhcnNlVXRmOCIsImRlY29kZVVSSUNvbXBvbmVudCIsInBhcnNlSXNvODg1OTEiLCJ1bmVzY2FwZSIsInBhcnNlU3luY1NhZmVJbnRlZ2VyIiwidGFnUGFyc2VycyIsIlRYWFgiLCJXWFhYIiwiUFJJViIsIm93bmVyIiwiX01ldGFkYXRhU3RyZWFtIiwiTWV0YWRhdGFTdHJlYW0iLCJ0YWdTaXplIiwiYnVmZmVyU2l6ZSIsImNodW5rIiwiZnJhbWVTdGFydCIsImZyYW1lU2l6ZSIsImZyYW1lSGVhZGVyIiwiZGF0YUFsaWdubWVudEluZGljYXRvciIsImQiLCJ0aW1lU3RhbXAiLCJtZXRhZGF0YVN0cmVhbSIsIlRpbWVzdGFtcFJvbGxvdmVyU3RyZWFtJDEiLCJfVHJhbnNwb3J0UGFja2V0U3RyZWFtIiwiX1RyYW5zcG9ydFBhcnNlU3RyZWFtIiwiX0VsZW1lbnRhcnlTdHJlYW0iLCJNUDJUX1BBQ0tFVF9MRU5HVEgiLCJTWU5DX0JZVEUiLCJUcmFuc3BvcnRQYWNrZXRTdHJlYW0iLCJieXRlc0luQnVmZmVyIiwiZXZlcnl0aGluZyIsIlRyYW5zcG9ydFBhcnNlU3RyZWFtIiwicGFyc2VQc2kiLCJwYXJzZVBhdCIsInBhcnNlUG10IiwicGFja2V0c1dhaXRpbmdGb3JQbXQiLCJwcm9ncmFtTWFwVGFibGUiLCJwc2kiLCJwYXlsb2FkVW5pdFN0YXJ0SW5kaWNhdG9yIiwicGF0Iiwic2VjdGlvbl9udW1iZXIiLCJsYXN0X3NlY3Rpb25fbnVtYmVyIiwicG10UGlkIiwicG10Iiwic2VjdGlvbkxlbmd0aCIsInRhYmxlRW5kIiwicHJvZ3JhbUluZm9MZW5ndGgiLCJzdHJlYW1UeXBlIiwicGlkIiwicHJvY2Vzc1Blc18iLCJTVFJFQU1fVFlQRVMiLCJoMjY0IiwiYWR0cyIsIkVsZW1lbnRhcnlTdHJlYW0iLCJ0aW1lZE1ldGFkYXRhIiwicGFyc2VQZXMiLCJwZXMiLCJwdHNEdHNGbGFncyIsInBhY2tldExlbmd0aCIsImZsdXNoU3RyZWFtIiwic3RyZWFtJCQxIiwiZm9yY2VGbHVzaCIsInBhY2tldERhdGEiLCJwYWNrZXRGbHVzaGFibGUiLCJjb2RlYyIsIm0ydHMiLCJQQVRfUElEIiwibTJ0c18xIiwiX0FkdHNTdHJlYW0iLCJBRFRTX1NBTVBMSU5HX0ZSRVFVRU5DSUVTIiwiQWR0c1N0cmVhbSIsImZyYW1lTnVtIiwiZnJhbWVMZW5ndGgiLCJwcm90ZWN0aW9uU2tpcEJ5dGVzIiwiZnJhbWVFbmQiLCJvbGRCdWZmZXIiLCJzYW1wbGVDb3VudCIsImFkdHNGcmFtZUR1cmF0aW9uIiwiRXhwR29sb21iIiwid29ya2luZ0RhdGEiLCJ3b3JraW5nQnl0ZXNBdmFpbGFibGUiLCJ3b3JraW5nV29yZCIsIndvcmtpbmdCaXRzQXZhaWxhYmxlIiwiYml0c0F2YWlsYWJsZSIsImxvYWRXb3JkIiwid29ya2luZ0J5dGVzIiwiYXZhaWxhYmxlQnl0ZXMiLCJza2lwQml0cyIsInNraXBCeXRlcyIsInJlYWRCaXRzIiwiYml0cyIsInZhbHUiLCJza2lwTGVhZGluZ1plcm9zIiwibGVhZGluZ1plcm9Db3VudCIsInNraXBVbnNpZ25lZEV4cEdvbG9tYiIsInNraXBFeHBHb2xvbWIiLCJyZWFkVW5zaWduZWRFeHBHb2xvbWIiLCJjbHoiLCJyZWFkRXhwR29sb21iIiwicmVhZEJvb2xlYW4iLCJyZWFkVW5zaWduZWRCeXRlIiwiZXhwR29sb21iIiwiX0gyNjRTdHJlYW0iLCJfTmFsQnl0ZVN0cmVhbSIsIlBST0ZJTEVTX1dJVEhfT1BUSU9OQUxfU1BTX0RBVEEiLCJOYWxCeXRlU3RyZWFtIiwic3luY1BvaW50Iiwic3dhcEJ1ZmZlciIsIkgyNjRTdHJlYW0iLCJuYWxCeXRlU3RyZWFtIiwiY3VycmVudFB0cyIsImN1cnJlbnREdHMiLCJyZWFkU2VxdWVuY2VQYXJhbWV0ZXJTZXQiLCJza2lwU2NhbGluZ0xpc3QiLCJleHBHb2xvbWJEZWNvZGVyIiwibGFzdFNjYWxlIiwibmV4dFNjYWxlIiwiZGVsdGFTY2FsZSIsImZyYW1lQ3JvcExlZnRPZmZzZXQiLCJmcmFtZUNyb3BSaWdodE9mZnNldCIsImZyYW1lQ3JvcFRvcE9mZnNldCIsImZyYW1lQ3JvcEJvdHRvbU9mZnNldCIsInNhclNjYWxlIiwiY2hyb21hRm9ybWF0SWRjIiwicGljT3JkZXJDbnRUeXBlIiwibnVtUmVmRnJhbWVzSW5QaWNPcmRlckNudEN5Y2xlIiwicGljV2lkdGhJbk1ic01pbnVzMSIsInBpY0hlaWdodEluTWFwVW5pdHNNaW51czEiLCJmcmFtZU1ic09ubHlGbGFnIiwic2NhbGluZ0xpc3RDb3VudCIsInNhclJhdGlvIiwiYXNwZWN0UmF0aW9JZGMiLCJBRFRTX1NBTVBMSU5HX0ZSRVFVRU5DSUVTJDEiLCJpc0xpa2VseUFhY0RhdGEiLCJwYXJzZVN5bmNTYWZlSW50ZWdlciQxIiwicGVyY2VudEVuY29kZSQxIiwicGFyc2VJc284ODU5MSQxIiwicGFyc2VJZDNUYWdTaXplIiwiaGVhZGVyIiwiYnl0ZUluZGV4IiwicmV0dXJuU2l6ZSIsImZvb3RlclByZXNlbnQiLCJwYXJzZUFkdHNTaXplIiwibG93VGhyZWUiLCJtaWRkbGUiLCJoaWdoVHdvIiwicGFyc2VUeXBlJDEiLCJwYXJzZVNhbXBsZVJhdGUiLCJwYXJzZUFhY1RpbWVzdGFtcCIsIl9BYWNTdHJlYW0iLCJBYWNTdHJlYW0iLCJzZXRUaW1lc3RhbXAiLCJieXRlc0xlZnQiLCJ0ZW1wTGVuZ3RoIiwiaXNMaWtlbHlBYWNEYXRhJDEiLCJBVURJT19QUk9QRVJUSUVTIiwiVklERU9fUFJPUEVSVElFUyIsIl9WaWRlb1NlZ21lbnRTdHJlYW0iLCJfQXVkaW9TZWdtZW50U3RyZWFtIiwiX1RyYW5zbXV4ZXIiLCJfQ29hbGVzY2VTdHJlYW0iLCJhcnJheUVxdWFscyIsImdlbmVyYXRlVmlkZW9TZWdtZW50VGltaW5nSW5mbyIsInN0YXJ0RHRzIiwiZW5kRHRzIiwicHJlcGVuZGVkQ29udGVudER1cmF0aW9uIiwicHRzT2Zmc2V0RnJvbUR0cyIsImRlY29kZUR1cmF0aW9uIiwicHJlc2VudGF0aW9uRHVyYXRpb24iLCJBdWRpb1NlZ21lbnRTdHJlYW0iLCJzZXRFYXJsaWVzdER0cyIsImVhcmxpZXN0RHRzIiwic2V0VmlkZW9CYXNlTWVkaWFEZWNvZGVUaW1lIiwic2V0QXVkaW9BcHBlbmRTdGFydCIsIlZpZGVvU2VnbWVudFN0cmVhbSIsImdvcHNUb0FsaWduV2l0aCIsIm1pblBUUyIsImdvcENhY2hlXyIsIm5hbFVuaXQiLCJnb3BGb3JGdXNpb24iLCJmaXJzdEdvcCIsImxhc3RHb3AiLCJyZXNldFN0cmVhbV8iLCJnZXRHb3BGb3JGdXNpb25fIiwiYWxpZ25lZEdvcHMiLCJhbGlnbkdvcHNBdEVuZCIsImFsaWduR29wc0F0RW5kXyIsImFsaWduR29wc0F0U3RhcnRfIiwiZ29wIiwiaGFsZlNlY29uZCIsImFsbG93YWJsZU92ZXJsYXAiLCJuZWFyZXN0RGlzdGFuY2UiLCJkdHNEaXN0YW5jZSIsIm5lYXJlc3RHb3BPYmoiLCJjdXJyZW50R29wT2JqIiwiYWxpZ25JbmRleCIsImdvcEluZGV4IiwiYWxpZ24iLCJhbGlnbkVuZEluZGV4IiwibWF0Y2hGb3VuZCIsInRyaW1JbmRleCIsInRvdGFsIiwiYWxpZ25Hb3BzV2l0aCIsIm5ld0dvcHNUb0FsaWduV2l0aCIsIkNvYWxlc2NlU3RyZWFtIiwibnVtYmVyT2ZUcmFja3MiLCJyZW11eCIsInJlbXV4VHJhY2tzIiwicGVuZGluZ1RyYWNrcyIsInZpZGVvVHJhY2siLCJwZW5kaW5nQm94ZXMiLCJwZW5kaW5nQ2FwdGlvbnMiLCJwZW5kaW5nTWV0YWRhdGEiLCJwZW5kaW5nQnl0ZXMiLCJlbWl0dGVkVHJhY2tzIiwib3V0cHV0IiwiYXVkaW9UcmFjayIsImlkMyIsInRpbWVsaW5lU3RhcnRQdHMiLCJUcmFuc211eGVyIiwiaGFzRmx1c2hlZCIsInRyYW5zbXV4UGlwZWxpbmVfIiwic2V0dXBBYWNQaXBlbGluZSIsInBpcGVsaW5lIiwiYWFjU3RyZWFtIiwiYXVkaW9UaW1lc3RhbXBSb2xsb3ZlclN0cmVhbSIsInRpbWVkTWV0YWRhdGFUaW1lc3RhbXBSb2xsb3ZlclN0cmVhbSIsImFkdHNTdHJlYW0iLCJjb2FsZXNjZVN0cmVhbSIsImhlYWRPZlBpcGVsaW5lIiwiYXVkaW9TZWdtZW50U3RyZWFtIiwic2V0dXBUc1BpcGVsaW5lIiwicGFja2V0U3RyZWFtIiwicGFyc2VTdHJlYW0iLCJlbGVtZW50YXJ5U3RyZWFtIiwidmlkZW9UaW1lc3RhbXBSb2xsb3ZlclN0cmVhbSIsImgyNjRTdHJlYW0iLCJ2aWRlb1NlZ21lbnRTdHJlYW0iLCJzZXRCYXNlTWVkaWFEZWNvZGVUaW1lIiwiaXNBYWMiLCJyZXNldENhcHRpb25zIiwidHJhbnNtdXhlciIsImluc3BlY3RNcDQiLCJfdGV4dGlmeU1wIiwicGFyc2VUeXBlJDIiLCJwYXJzZU1wNERhdGUiLCJwYXJzZVNhbXBsZUZsYWdzIiwibmFsUGFyc2UiLCJhdmNTdHJlYW0iLCJhdmNWaWV3IiwicGFyc2UkJDEiLCJkYXRhUmVmZXJlbmNlSW5kZXgiLCJnZXRVaW50MTYiLCJob3JpenJlc29sdXRpb24iLCJ2ZXJ0cmVzb2x1dGlvbiIsImZyYW1lQ291bnQiLCJkZXB0aCIsImNvbmZpZ3VyYXRpb25WZXJzaW9uIiwiYXZjUHJvZmlsZUluZGljYXRpb24iLCJhdmNMZXZlbEluZGljYXRpb24iLCJsZW5ndGhTaXplTWludXNPbmUiLCJudW1PZlNlcXVlbmNlUGFyYW1ldGVyU2V0cyIsIm51bU9mUGljdHVyZVBhcmFtZXRlclNldHMiLCJuYWxTaXplIiwiYnVmZmVyU2l6ZURCIiwibWF4Qml0cmF0ZSIsImF2Z0JpdHJhdGUiLCJlc0lkIiwic3RyZWFtUHJpb3JpdHkiLCJkZWNvZGVyQ29uZmlnIiwib2JqZWN0UHJvZmlsZUluZGljYXRpb24iLCJkZWNvZGVyQ29uZmlnRGVzY3JpcHRvciIsImF1ZGlvT2JqZWN0VHlwZSIsInNhbXBsaW5nRnJlcXVlbmN5SW5kZXgiLCJjaGFubmVsQ29uZmlndXJhdGlvbiIsIm1ham9yQnJhbmQiLCJtaW5vclZlcnNpb24iLCJjb21wYXRpYmxlQnJhbmRzIiwiZGF0YVJlZmVyZW5jZXMiLCJlc2NhcGUiLCJuYWxzIiwibW9kaWZpY2F0aW9uVGltZSIsInN0cmVhbURlc2NyaXB0b3IiLCJtYXRyaXgiLCJVaW50MzJBcnJheSIsIm5leHRUcmFja0lkIiwicGRpbiIsImluaXRpYWxEZWxheSIsInNpZHgiLCJyZWZlcmVuY2VzIiwicmVmZXJlbmNlSWQiLCJlYXJsaWVzdFByZXNlbnRhdGlvblRpbWUiLCJmaXJzdE9mZnNldCIsInJlZmVyZW5jZUNvdW50IiwicmVmZXJlbmNlVHlwZSIsInJlZmVyZW5jZWRTaXplIiwic3Vic2VnbWVudER1cmF0aW9uIiwic3RhcnRzV2l0aFNhcCIsInNhcFR5cGUiLCJzYXBEZWx0YVRpbWUiLCJiYWxhbmNlIiwiY2h1bmtPZmZzZXRzIiwiZW50cnlDb3VudCIsInNhbXBsZVRvQ2h1bmtzIiwiZmlyc3RDaHVuayIsInNhbXBsZXNQZXJDaHVuayIsInNhbXBsZURlc2NyaXB0aW9uSW5kZXgiLCJzYW1wbGVEZXNjcmlwdGlvbnMiLCJzYW1wbGVTaXplIiwiZW50cmllcyIsInRpbWVUb1NhbXBsZXMiLCJzYW1wbGVEZWx0YSIsImJhc2VEYXRhT2Zmc2V0UHJlc2VudCIsInNhbXBsZURlc2NyaXB0aW9uSW5kZXhQcmVzZW50IiwiZGVmYXVsdFNhbXBsZUR1cmF0aW9uUHJlc2VudCIsImRlZmF1bHRTYW1wbGVTaXplUHJlc2VudCIsImRlZmF1bHRTYW1wbGVGbGFnc1ByZXNlbnQiLCJkdXJhdGlvbklzRW1wdHkiLCJkZWZhdWx0QmFzZUlzTW9vZiIsImRlZmF1bHRTYW1wbGVEdXJhdGlvbiIsImRlZmF1bHRTYW1wbGVTaXplIiwiZGVmYXVsdFNhbXBsZUZsYWdzIiwiYmFzZURhdGFPZmZzZXRJc01vb2YiLCJsYXllciIsImFsdGVybmF0ZUdyb3VwIiwiZGVmYXVsdFNhbXBsZURlc2NyaXB0aW9uSW5kZXgiLCJzYW1wbGVEZXBlbmRzT24iLCJzYW1wbGVJc0RlcGVuZGVkT24iLCJzYW1wbGVIYXNSZWR1bmRhbmN5Iiwic2FtcGxlUGFkZGluZ1ZhbHVlIiwic2FtcGxlSXNEaWZmZXJlbmNlU2FtcGxlIiwic2FtcGxlRGVncmFkYXRpb25Qcmlvcml0eSIsImRhdGFPZmZzZXRQcmVzZW50IiwiZmlyc3RTYW1wbGVGbGFnc1ByZXNlbnQiLCJzYW1wbGVEdXJhdGlvblByZXNlbnQiLCJzYW1wbGVTaXplUHJlc2VudCIsInNhbXBsZUZsYWdzUHJlc2VudCIsInNhbXBsZUNvbXBvc2l0aW9uVGltZU9mZnNldFByZXNlbnQiLCJnZXRJbnQzMiIsImdyYXBoaWNzbW9kZSIsIm9wY29sb3IiLCJVaW50MTZBcnJheSIsImFiIiwieiIsInRleHRpZnlNcDQiLCJpbnNwZWN0ZWRNcDQiLCJpbmRlbnQiLCJwcmVmaXgiLCJieXRlIiwibGluZSIsIm1wNEluc3BlY3RvciIsImluc3BlY3QiLCJ0ZXh0aWZ5IiwicGFyc2VUZmR0IiwicGFyc2VIZGxyIiwicGFyc2VUZmhkIiwicGFyc2VUcnVuIiwicGFyc2VTaWR4IiwiZGlzY2FyZEVtdWxhdGlvblByZXZlbnRpb25CeXRlcyQxIiwiQ2FwdGlvblN0cmVhbSQxIiwibWFwVG9TYW1wbGUiLCJhcHByb3hpbWF0ZU9mZnNldCIsImZpbmRTZWlOYWxzIiwic2VpTmFsIiwibGFzdE1hdGNoZWRTYW1wbGUiLCJtYXRjaGluZ1NhbXBsZSIsInBhcnNlU2FtcGxlcyIsInRydW5zIiwiYWxsU2FtcGxlcyIsInRyYWNrUnVuIiwicGFyc2VDYXB0aW9uTmFscyIsInZpZGVvVHJhY2tJZCIsIm1kYXRzIiwiY2FwdGlvbk5hbHMiLCJtZGF0VHJhZlBhaXJzIiwibWF0Y2hpbmdUcmFmIiwicGFpciIsImhlYWRlckluZm8iLCJzZWlOYWxzIiwicGFyc2VFbWJlZGRlZENhcHRpb25zIiwiQ2FwdGlvblBhcnNlciQkMSIsImlzSW5pdGlhbGl6ZWQiLCJjYXB0aW9uU3RyZWFtJCQxIiwic2VnbWVudENhY2hlIiwicGFyc2VkQ2FwdGlvbnMiLCJpc05ld0luaXQiLCJ0aW1lc2NhbGVzIiwicGFyc2VkRGF0YSIsImNhY2hlZFNlZ21lbnQiLCJwdXNoTmFscyIsIm5hbCIsImNsZWFyUGFyc2VkQ2FwdGlvbnMiLCJyZXNldENhcHRpb25TdHJlYW0iLCJjbGVhckFsbENhcHRpb25zIiwiY2FwdGlvblBhcnNlciIsImdlbmVyYXRvciIsIkNhcHRpb25QYXJzZXIiLCJ3aXJlVHJhbnNtdXhlckV2ZW50cyIsImluaXRBcnJheSIsInR5cGVkQXJyYXkiLCJhY3Rpb24iLCJnb3BJbmZvIiwidmlkZW9TZWdtZW50VGltaW5nSW5mbyIsIk1lc3NhZ2VIYW5kbGVycyIsInNldFRpbWVzdGFtcE9mZnNldCIsImFwcGVuZFN0YXJ0IiwiVHJhbnNtdXhlcldvcmtlciIsIm1lc3NhZ2VIYW5kbGVycyIsImRlZmF1bHRDb2RlY3MiLCJ2aWRlb0NvZGVjIiwidmlkZW9PYmplY3RUeXBlSW5kaWNhdG9yIiwiYXVkaW9Qcm9maWxlIiwidHJhbnNsYXRlTGVnYWN5Q29kZWNzIiwiY29kZWNzIiwib3JpZyIsInByb2ZpbGUiLCJhdmNMZXZlbCIsInByb2ZpbGVIZXgiLCJhdmNMZXZlbEhleCIsInBhcnNlQ29kZWNzIiwiY29kZWNDb3VudCIsInBhcnNlZCIsIm1hcExlZ2FjeUF2Y0NvZGVjcyIsImNvZGVjU3RyaW5nIiwibWFrZU1pbWVUeXBlU3RyaW5nIiwiY29udGFpbmVyIiwiZ2V0Q29udGFpbmVyVHlwZSIsImdldENvZGVjcyIsIm1lZGlhQXR0cmlidXRlcyIsIkNPREVDUyIsImF1ZGlvUHJvZmlsZUZyb21EZWZhdWx0IiwiYXVkaW9Hcm91cElkIiwiQVVESU8iLCJhdWRpb0dyb3VwIiwiYXVkaW9UeXBlIiwibWltZVR5cGVzRm9yUGxheWxpc3QiLCJjb250YWluZXJUeXBlIiwiY29kZWNJbmZvIiwiaXNNdXhlZCIsImlzTWFhdCIsImdyb3VwSWQiLCJjb2RlY1N0cmluZ3MiLCJqdXN0QXVkaW8iLCJqdXN0VmlkZW8iLCJib3RoVmlkZW9BdWRpbyIsInBhcnNlQ29udGVudFR5cGUiLCJwYXJhbWV0ZXJzIiwicGFyYW1ldGVyIiwiaXNBdWRpb0NvZGVjIiwiaXNWaWRlb0NvZGVjIiwiZ29wc1NhZmVUb0FsaWduV2l0aCIsIm1hcHBpbmciLCJjdXJyZW50VGltZVB0cyIsInVwZGF0ZUdvcEJ1ZmZlciIsInJlbW92ZUdvcEJ1ZmZlciIsInVwZGF0ZWRCdWZmZXIiLCJ2aWRlb0J1ZmZlciIsImF1ZGlvQnVmZmVyIiwiYXVkaW9EaXNhYmxlZCIsImFyaXR5IiwiZXh0ZW50cyIsInZpZGVvQnVmZmVyZWQiLCJhdWRpb0J1ZmZlcmVkIiwibWFrZVdyYXBwZWRTb3VyY2VCdWZmZXIiLCJtaW1lVHlwZSIsImFkZFNvdXJjZUJ1ZmZlciIsInVwZGF0aW5nIiwicmVhbEJ1ZmZlcl8iLCJnZXQkJDEiLCJzZXQkJDEiLCJWaXJ0dWFsU291cmNlQnVmZmVyIiwiX3ZpZGVvanMkRXZlbnRUYXJnZXQiLCJ0aW1lc3RhbXBPZmZzZXRfIiwicGVuZGluZ0J1ZmZlcnNfIiwiYnVmZmVyVXBkYXRpbmdfIiwiY29kZWNzXyIsImF1ZGlvQ29kZWNfIiwidmlkZW9Db2RlY18iLCJhdWRpb0Rpc2FibGVkXyIsImFwcGVuZEF1ZGlvSW5pdFNlZ21lbnRfIiwiZ29wQnVmZmVyXyIsInRpbWVNYXBwaW5nXyIsInNhZmVBcHBlbmRfIiwidHJhbnNtdXhlcl8iLCJkYXRhXyIsImRvbmVfIiwiYXBwZW5kR29wSW5mb18iLCJ2aWRlb1NlZ21lbnRUaW1pbmdJbmZvXyIsInZpZGVvQnVmZmVyXyIsImF1ZGlvQnVmZmVyXyIsImFwcGVuZFdpbmRvd1N0YXJ0IiwicHJvY2Vzc1BlbmRpbmdTZWdtZW50c18iLCJ0aW1pbmdJbmZvIiwidGltaW5nSW5mb0luU2Vjb25kcyIsImRlY29kZSIsInByZXNlbnRhdGlvbiIsImNyZWF0ZVJlYWxTb3VyY2VCdWZmZXJzXyIsImNvZGVjUHJvcGVydHkiLCJuYXRpdmVNZWRpYVNvdXJjZV8iLCJzaG91bGRUcmlnZ2VyIiwiYXBwZW5kQnVmZmVyIiwic29ydGVkU2VnbWVudHMiLCJzZWdtZW50T2JqIiwidHJpZ2dlclVwZGF0ZWVuZCIsImNvbmNhdEFuZEFwcGVuZFNlZ21lbnRzXyIsImRlc3RpbmF0aW9uQnVmZmVyIiwidGVtcEJ1ZmZlciIsIm9yaWdpbmFsRXJyb3IiLCJIdG1sTWVkaWFTb3VyY2UiLCJNZWRpYVNvdXJjZSIsImFjdGl2ZVNvdXJjZUJ1ZmZlcnNfIiwic291cmNlQnVmZmVycyIsInVwZGF0ZUFjdGl2ZVNvdXJjZUJ1ZmZlcnNfIiwiZGlzYWJsZUNvbWJpbmVkIiwiZGlzYWJsZUF1ZGlvT25seSIsIm9uUGxheWVyTWVkaWFjaGFuZ2VfIiwib25IbHNSZXNldF8iLCJvbkhsc1NlZ21lbnRUaW1lTWFwcGluZ18iLCJ1cmxfIiwic291cmNlYnVmZmVyIiwiYWRkU2Vla2FibGVSYW5nZV8iLCJwYXJzZWRUeXBlIiwidXJsQ291bnQiLCJtZWRpYVNvdXJjZXMiLCJtc09iamVjdFVSTCIsInN3ZklkIiwic3VwcG9ydHNOYXRpdmVNZWRpYVNvdXJjZXMiLCJpc1R5cGVTdXBwb3J0ZWQiLCJVUkwkMSIsIm9iamVjdFVybFByZWZpeCIsIkV2ZW50VGFyZ2V0JDEkMSIsIm1lcmdlT3B0aW9ucyQyIiwidXBkYXRlTWFzdGVyJDEiLCJ1cGRhdGVNYXN0ZXIkJDEiLCJvbGRNYXN0ZXIiLCJuZXdNYXN0ZXIiLCJub0NoYW5nZXMiLCJtaW5pbXVtVXBkYXRlUGVyaW9kIiwicGxheWxpc3RVcGRhdGUiLCJncm91cCIsIl9wbGF5bGlzdFVwZGF0ZSIsIkRhc2hQbGF5bGlzdExvYWRlciIsInNyY1VybE9yUGxheWxpc3QiLCJtYXN0ZXJQbGF5bGlzdExvYWRlciIsInJlZnJlc2hYbWxfIiwicmVmcmVzaE1lZGlhXyIsImxvYWRlZFBsYXlsaXN0c18iLCJzZXR1cENoaWxkTG9hZGVyIiwibWFzdGVyUGxheWxpc3RMb2FkZXJfIiwiY2hpbGRQbGF5bGlzdF8iLCJoYXNQZW5kaW5nUmVxdWVzdCIsIm1lZGlhUmVxdWVzdF8iLCJwYXJzZU1hc3RlclhtbCIsIm1hc3RlclhtbF8iLCJtYW5pZmVzdFVyaSIsImNsaWVudE9mZnNldCIsImNsaWVudE9mZnNldF8iLCJwaG9ueVVyaSIsIl9waG9ueVVyaSIsImhhdmVNYXN0ZXJfIiwiZGF0ZSIsIm1hc3RlckxvYWRlZF8iLCJzeW5jQ2xpZW50U2VydmVyQ2xvY2tfIiwib25DbGllbnRTZXJ2ZXJDbG9ja1N5bmNfIiwidXRjVGltaW5nIiwic2VydmVyVGltZSIsInVwZGF0ZWRNYXN0ZXIiLCJsb2dnZXIiLCJTb3VyY2VVcGRhdGVyIiwic291cmNlQnVmZmVyRW1pdHRlciIsImNhbGxiYWNrc18iLCJwZW5kaW5nQ2FsbGJhY2tfIiwicHJvY2Vzc2VkQXBwZW5kXyIsIm1pbWVUeXBlXyIsImxvZ2dlcl8iLCJjcmVhdGVTb3VyY2VCdWZmZXJfIiwic291cmNlQnVmZmVyXyIsInN0YXJ0XyIsInN0YXJ0ZWRfIiwib25VcGRhdGVlbmRDYWxsYmFja18iLCJwZW5kaW5nQ2FsbGJhY2siLCJydW5DYWxsYmFja18iLCJxdWV1ZUNhbGxiYWNrXyIsInZpZGVvU2VnbWVudFRpbWluZ0luZm9DYWxsYmFjayIsIkNvbmZpZyIsIkdPQUxfQlVGRkVSX0xFTkdUSCIsIk1BWF9HT0FMX0JVRkZFUl9MRU5HVEgiLCJHT0FMX0JVRkZFUl9MRU5HVEhfUkFURSIsIklOSVRJQUxfQkFORFdJRFRIIiwiQkFORFdJRFRIX1ZBUklBTkNFIiwiQlVGRkVSX0xPV19XQVRFUl9MSU5FIiwiTUFYX0JVRkZFUl9MT1dfV0FURVJfTElORSIsIkJVRkZFUl9MT1dfV0FURVJfTElORV9SQVRFIiwiUkVRVUVTVF9FUlJPUlMiLCJGQUlMVVJFIiwiVElNRU9VVCIsIkFCT1JURUQiLCJieXRlcmFuZ2VTdHIiLCJieXRlcmFuZ2VTdGFydCIsImJ5dGVyYW5nZUVuZCIsInNlZ21lbnRYaHJIZWFkZXJzIiwiUmFuZ2UiLCJhYm9ydEFsbCIsImFjdGl2ZVhocnMiLCJnZXRSZXF1ZXN0U3RhdHMiLCJnZXRQcm9ncmVzc1N0YXRzIiwicHJvZ3Jlc3NFdmVudCIsInN0YXRzIiwibG9hZGVkIiwiaGFuZGxlRXJyb3JzIiwiaGFuZGxlS2V5UmVzcG9uc2UiLCJmaW5pc2hQcm9jZXNzaW5nRm4iLCJlcnJvck9iaiIsImhhbmRsZUluaXRTZWdtZW50UmVzcG9uc2UiLCJoYW5kbGVTZWdtZW50UmVzcG9uc2UiLCJlbmNyeXB0ZWRCeXRlcyIsImZtcDRDYXB0aW9ucyIsImRlY3J5cHRTZWdtZW50IiwiZGVjcnlwdGVyIiwiZG9uZUZuIiwiZGVjcnlwdGlvbkhhbmRsZXIiLCJyZXF1ZXN0SWQiLCJkZWNyeXB0ZWQiLCJlbmNyeXB0ZWQiLCJpdiIsIndhaXRGb3JDb21wbGV0aW9uIiwiZGlkRXJyb3IiLCJlbmRPZkFsbFJlcXVlc3RzIiwiaGFuZGxlUHJvZ3Jlc3MiLCJwcm9ncmVzc0ZuIiwiZmlyc3RCeXRlc1JlY2VpdmVkQXQiLCJtZWRpYVNlZ21lbnRSZXF1ZXN0IiwieGhyT3B0aW9ucyIsImRlY3J5cHRpb25Xb3JrZXIiLCJrZXlSZXF1ZXN0T3B0aW9ucyIsInJlc3BvbnNlVHlwZSIsImtleVJlcXVlc3RDYWxsYmFjayIsImtleVhociIsImluaXRTZWdtZW50T3B0aW9ucyIsImluaXRTZWdtZW50UmVxdWVzdENhbGxiYWNrIiwiaW5pdFNlZ21lbnRYaHIiLCJzZWdtZW50UmVxdWVzdE9wdGlvbnMiLCJzZWdtZW50UmVxdWVzdENhbGxiYWNrIiwic2VnbWVudFhociIsInNhZmVHZXRDb21wdXRlZFN0eWxlIiwic3RhYmxlU29ydCIsInNvcnRGbiIsIm5ld0FycmF5IiwiY21wIiwiY29tcGFyZVBsYXlsaXN0QmFuZHdpZHRoIiwibGVmdEJhbmR3aWR0aCIsInJpZ2h0QmFuZHdpZHRoIiwiY29tcGFyZVBsYXlsaXN0UmVzb2x1dGlvbiIsImxlZnRXaWR0aCIsInJpZ2h0V2lkdGgiLCJSRVNPTFVUSU9OIiwic2ltcGxlU2VsZWN0b3IiLCJwbGF5ZXJCYW5kd2lkdGgiLCJwbGF5ZXJXaWR0aCIsInBsYXllckhlaWdodCIsImxpbWl0UmVuZGl0aW9uQnlQbGF5ZXJEaW1lbnNpb25zIiwic29ydGVkUGxheWxpc3RSZXBzIiwicmVwIiwiZW5hYmxlZFBsYXlsaXN0UmVwcyIsImJhbmR3aWR0aFBsYXlsaXN0UmVwcyIsImhpZ2hlc3RSZW1haW5pbmdCYW5kd2lkdGhSZXAiLCJiYW5kd2lkdGhCZXN0UmVwIiwiX2Nob3NlblJlcCIsImhhdmVSZXNvbHV0aW9uIiwicmVzb2x1dGlvbkJlc3RSZXBMaXN0IiwicmVzb2x1dGlvbkJlc3RSZXAiLCJyZXNvbHV0aW9uUGx1c09uZUxpc3QiLCJyZXNvbHV0aW9uUGx1c09uZVNtYWxsZXN0IiwicmVzb2x1dGlvblBsdXNPbmVSZXAiLCJjaG9zZW5SZXAiLCJsYXN0QmFuZHdpZHRoU2VsZWN0b3IiLCJzeXN0ZW1CYW5kd2lkdGgiLCJtaW5SZWJ1ZmZlck1heEJhbmR3aWR0aFNlbGVjdG9yIiwiZHVyYXRpb24kJDEiLCJjdXJyZW50VGltZWxpbmUiLCJzeW5jQ29udHJvbGxlciIsImNvbXBhdGlibGVQbGF5bGlzdHMiLCJlbmFibGVkUGxheWxpc3RzIiwiYmFuZHdpZHRoUGxheWxpc3RzIiwicmVidWZmZXJpbmdFc3RpbWF0ZXMiLCJnZXRTeW5jUG9pbnQiLCJudW1SZXF1ZXN0cyIsInJlcXVlc3RUaW1lRXN0aW1hdGUiLCJyZWJ1ZmZlcmluZ0ltcGFjdCIsIm5vUmVidWZmZXJpbmdQbGF5bGlzdHMiLCJlc3RpbWF0ZSIsImxvd2VzdEJpdHJhdGVDb21wYXRpYmxlVmFyaWFudFNlbGVjdG9yIiwicGxheWxpc3RzV2l0aFZpZGVvIiwiY3JlYXRlQ2FwdGlvbnNUcmFja0lmTm90RXhpc3RzIiwiaW5iYW5kVGV4dFRyYWNrcyIsImFkZENhcHRpb25EYXRhIiwiQ0hFQ0tfQlVGRkVSX0RFTEFZIiwiZGV0ZWN0RW5kT2ZTdHJlYW0iLCJzZWdtZW50SW5kZXgiLCJhcHBlbmRlZExhc3RTZWdtZW50IiwiZmluaXRlIiwiaWxsZWdhbE1lZGlhU3dpdGNoIiwibG9hZGVyVHlwZSIsInN0YXJ0aW5nTWVkaWEiLCJuZXdTZWdtZW50TWVkaWEiLCJjb250YWluc0F1ZGlvIiwiY29udGFpbnNWaWRlbyIsInNhZmVCYWNrQnVmZmVyVHJpbVRpbWUiLCJzZWVrYWJsZSQkMSIsInJlbW92ZVRvVGltZSIsInNlZ21lbnRJbmZvU3RyaW5nIiwic2VnbWVudEluZm8iLCJfc2VnbWVudEluZm8kc2VnbWVudCIsIl9zZWdtZW50SW5mbyRwbGF5bGlzdCIsInNlcSIsIl9zZWdtZW50SW5mbyRwbGF5bGlzdDIiLCJ0aW1lbGluZSIsIlNlZ21lbnRMb2FkZXIiLCJ0aHJvdWdocHV0Iiwicm91bmRUcmlwIiwicmVzZXRTdGF0c18iLCJoYXNQbGF5ZWRfIiwiaGFzUGxheWVkIiwiY3VycmVudFRpbWVfIiwic2Vla2FibGVfIiwic2Vla2luZ18iLCJsb2FkZXJUeXBlXyIsInN0YXJ0aW5nTWVkaWFfIiwic2VnbWVudE1ldGFkYXRhVHJhY2tfIiwic2VnbWVudE1ldGFkYXRhVHJhY2siLCJnb2FsQnVmZmVyTGVuZ3RoXyIsImdvYWxCdWZmZXJMZW5ndGgiLCJzb3VyY2VUeXBlXyIsInNvdXJjZVR5cGUiLCJzdGF0ZV8iLCJjaGVja0J1ZmZlclRpbWVvdXRfIiwiY3VycmVudFRpbWVsaW5lXyIsInBlbmRpbmdTZWdtZW50XyIsInNvdXJjZVVwZGF0ZXJfIiwieGhyT3B0aW9uc18iLCJhY3RpdmVJbml0U2VnbWVudElkXyIsImluaXRTZWdtZW50c18iLCJjYXB0aW9uUGFyc2VyXyIsImRlY3J5cHRlcl8iLCJzeW5jQ29udHJvbGxlcl8iLCJzeW5jUG9pbnRfIiwiZW5kZWRfIiwiZmV0Y2hBdEJ1ZmZlcl8iLCJuZXdTdGF0ZSIsIm1lZGlhQnl0ZXNUcmFuc2ZlcnJlZCIsIm1lZGlhUmVxdWVzdHMiLCJtZWRpYVJlcXVlc3RzQWJvcnRlZCIsIm1lZGlhUmVxdWVzdHNUaW1lZG91dCIsIm1lZGlhUmVxdWVzdHNFcnJvcmVkIiwibWVkaWFUcmFuc2ZlckR1cmF0aW9uIiwibWVkaWFTZWNvbmRzTG9hZGVkIiwiYWJvcnRfIiwibW9uaXRvckJ1ZmZlcl8iLCJhYm9ydFJlcXVlc3RzIiwiX2Vycm9yIiwiZW5kT2ZTdHJlYW0iLCJidWZmZXJlZF8iLCJzdG9yZWRNYXAiLCJjb3VsZEJlZ2luTG9hZGluZ18iLCJwbGF5bGlzdF8iLCJzZXREYXRlVGltZU1hcHBpbmciLCJpbml0XyIsInNvdXJjZUJ1ZmZlckVtaXR0ZXJfIiwicmVzZXRFdmVyeXRoaW5nIiwibmV3UGxheWxpc3QiLCJvbGRQbGF5bGlzdCIsInN5bmNJbmZvIiwib2xkSWQiLCJyZXN5bmNMb2FkZXIiLCJtZWRpYVNlcXVlbmNlRGlmZiIsInNhdmVFeHBpcmVkU2VnbWVudEluZm8iLCJfbWltZVR5cGUiLCJyZXNldExvYWRlciIsIm1vbml0b3JCdWZmZXJUaWNrXyIsImZpbGxCdWZmZXJfIiwiY2hlY2tCdWZmZXJfIiwiaXNFbmRPZlN0cmVhbV8iLCJsb2FkU2VnbWVudF8iLCJsYXN0QnVmZmVyZWRFbmQiLCJidWZmZXJlZFRpbWUiLCJnZXRTeW5jU2VnbWVudENhbmRpZGF0ZV8iLCJnZW5lcmF0ZVNlZ21lbnRJbmZvXyIsIm1lZGlhU291cmNlSW5mbyIsIl9tZWRpYVNvdXJjZUluZm8iLCJzZWdtZW50SW5kZXhBcnJheSIsImlzU3luY1JlcXVlc3QiLCJyYW5kb20iLCJhYm9ydFJlcXVlc3RFYXJseV8iLCJtZWFzdXJlZEJhbmR3aWR0aCIsInJlcXVlc3RUaW1lUmVtYWluaW5nIiwidGltZVVudGlsUmVidWZmZXIkJDEiLCJzd2l0Y2hDYW5kaWRhdGUiLCJ0aW1lU2F2ZWRCeVN3aXRjaGluZyIsIm1pbmltdW1UaW1lU2F2aW5nIiwiaGFuZGxlUHJvZ3Jlc3NfIiwic2ltcGxlU2VnbWVudCIsInRyaW1CYWNrQnVmZmVyXyIsImNyZWF0ZVNpbXBsaWZpZWRTZWdtZW50T2JqXyIsInNlZ21lbnRSZXF1ZXN0RmluaXNoZWRfIiwicHJvY2Vzc1NlZ21lbnRSZXNwb25zZV8iLCJoYW5kbGVTZWdtZW50XyIsInByb2JlU2VnbWVudEluZm8iLCJpbGxlZ2FsTWVkaWFTd2l0Y2hFcnJvciIsImJsYWNrbGlzdER1cmF0aW9uIiwidGltZWxpbmVNYXBwaW5nIiwibWFwcGluZ0ZvclRpbWVsaW5lIiwiaW5pdElkIiwiaGFuZGxlVmlkZW9TZWdtZW50VGltaW5nSW5mb18iLCJoYW5kbGVVcGRhdGVFbmRfIiwiaXNXYWxraW5nRm9yd2FyZCIsInJlY29yZFRocm91Z2hwdXRfIiwiYWRkU2VnbWVudE1ldGFkYXRhQ3VlXyIsInNlZ21lbnRQcm9jZXNzaW5nVGltZSIsInNlZ21lbnRQcm9jZXNzaW5nVGhyb3VnaHB1dCIsImN1c3RvbSIsImRhdGVUaW1lU3RyaW5nIiwicmVzb2x1dGlvbiIsInVpbnQ4VG9VdGY4IiwidWludEFycmF5IiwiVlRUX0xJTkVfVEVSTUlOQVRPUlMiLCJWVFRTZWdtZW50TG9hZGVyIiwiX1NlZ21lbnRMb2FkZXIiLCJzdWJ0aXRsZXNUcmFja18iLCJjb21iaW5lZEJ5dGVMZW5ndGgiLCJjb21iaW5lZFNlZ21lbnQiLCJfdHJhY2siLCJza2lwRW1wdHlTZWdtZW50c18iLCJ0aW1lc3RhbXBPZmZzZXRGb3JUaW1lbGluZSIsImNoZWNrVGltZXN0YW1wT2Zmc2V0IiwicmVxdWVzdGVkIiwicGFyc2VWVFRDdWVzXyIsInVwZGF0ZVRpbWVNYXBwaW5nXyIsInRpbWVsaW5lcyIsImRlY29kZXIiLCJkZWNvZGVCeXRlc1RvU3RyaW5nIiwiVGV4dERlY29kZXIiLCJ0aW1lc3RhbXBtYXAiLCJNUEVHVFMiLCJMT0NBTCIsIm9udGltZXN0YW1wbWFwIiwibWFwRGF0YSIsInNlZ21lbnREYXRhIiwibWFwcGluZ09iaiIsImRpZmYiLCJmaXJzdFN0YXJ0IiwibGFzdFN0YXJ0IiwiZmluZEFkQ3VlIiwibWVkaWFUaW1lIiwiYWRTdGFydFRpbWUiLCJhZEVuZFRpbWUiLCJ1cGRhdGVBZEN1ZXMiLCJjdWVPdXQiLCJhZE9mZnNldCIsImFkVG90YWwiLCJfc2VnbWVudCRjdWVPdXRDb250JHMiLCJjdWVPdXRDb250IiwiX3NlZ21lbnQkY3VlT3V0Q29udCRzMiIsInRzcHJvYmUiLCJzeW5jUG9pbnRTdHJhdGVnaWVzIiwicnVuIiwiZGF0ZXRpbWVUb0Rpc3BsYXlUaW1lIiwibGFzdERpc3RhbmNlIiwic2VnbWVudFRpbWUiLCJzZWdtZW50U3RhcnQiLCJkaXNjb250aW51aXR5U3RhcnRzIiwiZGlzY29udGludWl0eVNlcXVlbmNlIiwiZGlzY29udGludWl0eVN5bmMiLCJkaXNjb250aW51aXRpZXMiLCJTeW5jQ29udHJvbGxlciIsImluc3BlY3RDYWNoZV8iLCJzeW5jUG9pbnRzIiwicnVuU3RyYXRlZ2llc18iLCJzZWxlY3RTeW5jUG9pbnRfIiwiZ2V0RXhwaXJlZFRpbWUiLCJzdHJhdGVneSIsImJlc3RTeW5jUG9pbnQiLCJiZXN0RGlzdGFuY2UiLCJiZXN0U3RyYXRlZ3kiLCJuZXdEaXN0YW5jZSIsImxhc3RSZW1vdmVkU2VnbWVudCIsInBsYXlsaXN0VGltZXN0YW1wIiwicHJvYmVNcDRTZWdtZW50XyIsInByb2JlVHNTZWdtZW50XyIsImNhbGN1bGF0ZVNlZ21lbnRUaW1lTWFwcGluZ18iLCJzYXZlRGlzY29udGludWl0eVN5bmNJbmZvXyIsInRpbWVJbmZvIiwic2VnbWVudFN0YXJ0VGltZSIsInNlZ21lbnRFbmRUaW1lIiwiZHRzVGltZSIsInByb2JlZEluZm8iLCJhY2N1cmFjeSIsIm1lZGlhSW5kZXhEaWZmIiwiRGVjcnlwdGVyJDEiLCJkZWNyeXB0ZXJXb3JrZXIiLCJ1bnBhZCIsInBhZGRlZCIsInByZWNvbXB1dGUiLCJ0YWJsZXMiLCJlbmNUYWJsZSIsImRlY1RhYmxlIiwic2JveCIsInNib3hJbnYiLCJ4SW52IiwidGgiLCJ4MiIsIng0IiwieDgiLCJ0RW5jIiwidERlYyIsImFlc1RhYmxlcyIsIkFFUyIsIl90YWJsZXMiLCJ0bXAiLCJlbmNLZXkiLCJkZWNLZXkiLCJrZXlMZW4iLCJyY29uIiwiZGVjcnlwdCIsImRlY3J5cHQkJDEiLCJlbmNyeXB0ZWQwIiwiZW5jcnlwdGVkMSIsImVuY3J5cHRlZDIiLCJlbmNyeXB0ZWQzIiwib3V0IiwiYTIiLCJiMiIsImMyIiwibklubmVyUm91bmRzIiwia0luZGV4IiwidGFibGUiLCJ0YWJsZTAiLCJ0YWJsZTEiLCJ0YWJsZTIiLCJ0YWJsZTMiLCJfbGVuZ3RoIiwiQXN5bmNTdHJlYW0kJDEiLCJfU3RyZWFtIiwiam9icyIsInRpbWVvdXRfIiwicHJvY2Vzc0pvYl8iLCJqb2IiLCJudG9oIiwid29yZCIsImluaXRWZWN0b3IiLCJlbmNyeXB0ZWQzMiIsIkludDMyQXJyYXkiLCJkZWNpcGhlciIsImRlY3J5cHRlZDMyIiwiaW5pdDAiLCJpbml0MSIsImluaXQyIiwiaW5pdDMiLCJ3b3JkSXgiLCJEZWNyeXB0ZXIkJDEiLCJTVEVQIiwiYXN5bmNTdHJlYW1fIiwiZGVjcnlwdENodW5rXyIsIkRlY3J5cHRlcldvcmtlciIsImF1ZGlvVHJhY2tLaW5kXyIsImNoYXJhY3RlcmlzdGljcyIsInN0b3BMb2FkZXJzIiwic2VnbWVudExvYWRlciIsImFjdGl2ZVBsYXlsaXN0TG9hZGVyIiwic3RhcnRMb2FkZXJzIiwicGxheWxpc3RMb2FkZXIiLCJvbkdyb3VwQ2hhbmdlZCIsIl9zZXR0aW5ncyRzZWdtZW50TG9hZCIsInNlZ21lbnRMb2FkZXJzIiwibWFpblNlZ21lbnRMb2FkZXIiLCJtZWRpYVR5cGVzIiwiYWN0aXZlVHJhY2siLCJhY3RpdmVHcm91cCIsInByZXZpb3VzQWN0aXZlTG9hZGVyIiwib25UcmFja0NoYW5nZWQiLCJfc2V0dGluZ3Mkc2VnbWVudExvYWQyIiwib25FcnJvciIsImJsYWNrbGlzdEN1cnJlbnRQbGF5bGlzdCIsImRlZmF1bHRUcmFjayIsIlNVQlRJVExFUyIsInNldHVwTGlzdGVuZXJzIiwicmVxdWVzdE9wdGlvbnMiLCJieUdyb3VwSWQiLCJieVJlc29sdmVkVXJpIiwiaW5pdGlhbGl6ZSIsIl9zZXR0aW5ncyRtYXN0ZXIiLCJfc2V0dGluZ3MkbWVkaWFUeXBlcyQiLCJncm91cHMiLCJncm91cFBsYXlsaXN0cyIsInZhcmlhbnRMYWJlbCIsIm1hdGNoaW5nUGxheWxpc3RzIiwiX3NldHRpbmdzJG1lZGlhVHlwZXMkMiIsImZvcmNlZCIsImF1dG9zZWxlY3QiLCJDTE9TRURDQVBUSU9OUyIsIl9zZXR0aW5ncyRtZWRpYVR5cGVzJDMiLCJpbnN0cmVhbUlkIiwidmFyaWFudHMiLCJzZXR1cE1lZGlhR3JvdXBzIiwib25BdWRpb1RyYWNrQ2hhbmdlZCIsImNyZWF0ZU1lZGlhVHlwZXMiLCJBQk9SVF9FQVJMWV9CTEFDS0xJU1RfU0VDT05EUyIsImxvYWRlclN0YXRzIiwic3VtTG9hZGVyU3RhdCIsInN0YXQiLCJhdWRpb1NlZ21lbnRMb2FkZXJfIiwibWFpblNlZ21lbnRMb2FkZXJfIiwiTWFzdGVyUGxheWxpc3RDb250cm9sbGVyIiwiZXh0ZXJuSGxzIiwidXNlQ3VlVGFncyIsImVuYWJsZUxvd0luaXRpYWxQbGF5bGlzdCIsInNlZWtUb18iLCJ1c2VDdWVUYWdzXyIsImN1ZVRhZ3NUcmFja18iLCJyZXF1ZXN0T3B0aW9uc18iLCJtZWRpYVR5cGVzXyIsImhhbmRsZVNvdXJjZU9wZW5fIiwic2VnbWVudExvYWRlclNldHRpbmdzIiwic2V0dXBNYXN0ZXJQbGF5bGlzdExvYWRlckxpc3RlbmVyc18iLCJzdWJ0aXRsZVNlZ21lbnRMb2FkZXJfIiwic2V0dXBTZWdtZW50TG9hZGVyTGlzdGVuZXJzXyIsInJlcXVlc3RUaW1lb3V0IiwidHJpZ2dlclByZXNlbmNlVXNhZ2VfIiwic2V0dXBTb3VyY2VCdWZmZXJzXyIsInNldHVwRmlyc3RQbGF5IiwidXBkYXRlZFBsYXlsaXN0IiwiZXhjbHVkZVVuc3VwcG9ydGVkVmFyaWFudHNfIiwic2VsZWN0ZWRNZWRpYSIsInNlbGVjdEluaXRpYWxQbGF5bGlzdCIsInNlbGVjdFBsYXlsaXN0IiwiaW5pdGlhbE1lZGlhXyIsInVwZGF0ZUFkQ3Vlc18iLCJ1cGRhdGVEdXJhdGlvbiIsImFkZFNlZWthYmxlUmFuZ2UiLCJvbkR1cmF0aW9uY2hhbmdlIiwicGxheWxpc3RPdXRkYXRlZCIsInN0dWNrQXRQbGF5bGlzdEVuZF8iLCJkZWZhdWx0RGVtdXhlZCIsImF1ZGlvR3JvdXBLZXlzIiwibWVkaWFHcm91cCIsIm5leHRQbGF5bGlzdCIsImN1cnJlbnRQbGF5bGlzdCIsImZvcndhcmRCdWZmZXIiLCJidWZmZXJMb3dXYXRlckxpbmUiLCJvblN5bmNJbmZvVXBkYXRlXyIsIm9uRW5kT2ZTdHJlYW0iLCJtZWRpYVNlY29uZHNMb2FkZWRfIiwic21vb3RoUXVhbGl0eUNoYW5nZV8iLCJmYXN0UXVhbGl0eUNoYW5nZV8iLCJlbmRlZCIsImlzRW5kT2ZTdHJlYW0iLCJhYnNvbHV0ZVBsYXlsaXN0RW5kIiwicGF1c2VMb2FkaW5nIiwibWFpblNlZWthYmxlIiwiYXVkaW9TZWVrYWJsZSIsIm9sZEVuZCIsIm9sZFN0YXJ0Iiwib2xkRHVyYXRpb24iLCJuZXdEdXJhdGlvbiIsInNldER1cmF0aW9uIiwibWltZVR5cGVzIiwiY29uZmlndXJlTG9hZGVyTWltZVR5cGVzXyIsImV4Y2x1ZGVJbmNvbXBhdGlibGVWYXJpYW50c18iLCJ2YXJpYW50IiwidmFyaWFudENvZGVjcyIsImVuYWJsZUZ1bmN0aW9uIiwibG9hZGVyIiwicGxheWxpc3RVcmkiLCJjaGFuZ2VQbGF5bGlzdEZuIiwiaW5jb21wYXRpYmxlIiwiY3VycmVudGx5RW5hYmxlZCIsIlJlcHJlc2VudGF0aW9uIiwiaGxzSGFuZGxlciIsIm1wYyIsIm1hc3RlclBsYXlsaXN0Q29udHJvbGxlcl8iLCJzbW9vdGhRdWFsaXR5Q2hhbmdlIiwiY2hhbmdlVHlwZSIsInF1YWxpdHlDaGFuZ2VGdW5jdGlvbiIsInJlbmRpdGlvblNlbGVjdGlvbk1peGluIiwicmVwcmVzZW50YXRpb25zIiwidGltZXJDYW5jZWxFdmVudHMiLCJQbGF5YmFja1dhdGNoZXIiLCJhbGxvd1NlZWtzV2l0aGluVW5zYWZlTGl2ZVdpbmRvdyIsImNvbnNlY3V0aXZlVXBkYXRlcyIsImxhc3RSZWNvcmRlZFRpbWUiLCJ0aW1lcl8iLCJjaGVja0N1cnJlbnRUaW1lVGltZW91dF8iLCJjYW5QbGF5SGFuZGxlciIsIm1vbml0b3JDdXJyZW50VGltZV8iLCJ3YWl0aW5nSGFuZGxlciIsInRlY2hXYWl0aW5nXyIsImNhbmNlbFRpbWVySGFuZGxlciIsImNhbmNlbFRpbWVyXyIsImZpeGVzQmFkU2Vla3NIYW5kbGVyIiwiZml4ZXNCYWRTZWVrc18iLCJjaGVja0N1cnJlbnRUaW1lXyIsIndhaXRpbmdfIiwiaXNBZnRlclNlZWthYmxlUmFuZ2UiLCJhZnRlclNlZWthYmxlV2luZG93XyIsImJlZm9yZVNlZWthYmxlV2luZG93XyIsImN1cnJlbnRSYW5nZSIsImxpdmVQb2ludCIsIm5leHRSYW5nZSIsInZpZGVvVW5kZXJmbG93XyIsImRpZmZlcmVuY2UiLCJza2lwVGhlR2FwXyIsImFsbG93ZWRFbmQiLCJnYXAiLCJnYXBGcm9tVmlkZW9VbmRlcmZsb3dfIiwic2NoZWR1bGVkQ3VycmVudFRpbWUiLCJnYXBzIiwiZGVmYXVsdE9wdGlvbnMiLCJlcnJvckludGVydmFsIiwiZ2V0U291cmNlIiwiSVdpbGxOb3RVc2VUaGlzSW5QbHVnaW5zIiwiaW5pdFBsdWdpbiIsImxhc3RDYWxsZWQiLCJsb2NhbE9wdGlvbnMiLCJsb2FkZWRNZXRhZGF0YUhhbmRsZXIiLCJjbGVhbnVwRXZlbnRzIiwicmVpbml0UGx1Z2luIiwicmVsb2FkU291cmNlT25FcnJvciIsInZlcnNpb24kMSIsInZocyIsInNvdXJjZV8iLCJIbHMkMSIsIkRlY3J5cHRlciIsIkFzeW5jU3RyZWFtIiwiU1RBTkRBUkRfUExBWUxJU1RfU0VMRUNUT1IiLCJJTklUSUFMX1BMQVlMSVNUX1NFTEVDVE9SIiwiTE9DQUxfU1RPUkFHRV9LRVkkMSIsInNpbXBsZVR5cGVGcm9tU291cmNlVHlwZSIsImRhc2hSRSIsImhhbmRsZUhsc01lZGlhQ2hhbmdlIiwicXVhbGl0eUxldmVscyIsInNlbGVjdGVkSW5kZXhfIiwiaGFuZGxlSGxzTG9hZGVkTWV0YWRhdGEiLCJhZGRRdWFsaXR5TGV2ZWwiLCJlbWVLZXlTeXN0ZW1zIiwia2V5U3lzdGVtT3B0aW9ucyIsInZpZGVvUGxheWxpc3QiLCJhdWRpb1BsYXlsaXN0Iiwia2V5U3lzdGVtQ29udGVudFR5cGVzIiwia2V5U3lzdGVtIiwiYXVkaW9Db250ZW50VHlwZSIsInZpZGVvQ29udGVudFR5cGUiLCJjb250ZW50UHJvdGVjdGlvbiIsInBzc2giLCJzZXR1cEVtZU9wdGlvbnMiLCJlbWUiLCJzb3VyY2VPcHRpb25zIiwia2V5U3lzdGVtcyIsImluaXRpYWxpemVNZWRpYUtleXMiLCJnZXRWaHNMb2NhbFN0b3JhZ2UiLCJzdG9yZWRPYmplY3QiLCJ1cGRhdGVWaHNMb2NhbFN0b3JhZ2UiLCJvYmplY3RUb1N0b3JlIiwic3VwcG9ydHNOYXRpdmVIbHMiLCJjYW5QbGF5IiwiY2FuSXRQbGF5Iiwic3VwcG9ydHNOYXRpdmVEYXNoIiwic3VwcG9ydHNUeXBlTmF0aXZlbHkiLCJDb21wb25lbnQkMSIsIkhsc0hhbmRsZXIiLCJkYXNoIiwic2V0T3B0aW9uc18iLCJvdmVycmlkZU5hdGl2ZSIsIndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50IiwibW96RnVsbFNjcmVlbkVsZW1lbnQiLCJtc0Z1bGxzY3JlZW5FbGVtZW50IiwidXNlQmFuZHdpZHRoRnJvbUxvY2FsU3RvcmFnZSIsIm9wdGlvbiIsInBsYXliYWNrV2F0Y2hlcl8iLCJpbnZCYW5kd2lkdGgiLCJpbnZUaHJvdWdocHV0Iiwic3lzdGVtQml0cmF0ZSIsIm1lZGlhUmVxdWVzdHNfIiwibWVkaWFSZXF1ZXN0c0Fib3J0ZWRfIiwibWVkaWFSZXF1ZXN0c1RpbWVkb3V0XyIsIm1lZGlhUmVxdWVzdHNFcnJvcmVkXyIsIm1lZGlhVHJhbnNmZXJEdXJhdGlvbl8iLCJtZWRpYUJ5dGVzVHJhbnNmZXJyZWRfIiwiY3VycmVudFRlY2giLCJwbGF5ZXJEaW1lbnNpb25zIiwic2V0dXBRdWFsaXR5TGV2ZWxzXyIsInF1YWxpdHlMZXZlbHNfIiwiY29udmVydFRvUHJvZ3JhbVRpbWUiLCJzZWVrVG9Qcm9ncmFtVGltZSQkMSIsIkhsc1NvdXJjZUhhbmRsZXIiLCJfdmlk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T0FBUSxJQS9Ca0IsQ0FnQzFCO0FBQ0EsT0FBUSxJQWpDa0IsQ0FrQzFCO0FBQ0EsT0FBUSxNQW5Da0IsQ0FvQzFCO0FBQ0EsT0FBUSxJQXJDa0IsQ0FzQzFCO0FBQ0EsT0FBUSxJQXZDa0IsQ0F3QzFCO0FBQ0EsT0FBUSxJQXpDa0IsQ0EwQzFCO0FBQ0EsT0FBUSxJQTNDa0IsQ0E0QzFCO0FBQ0EsT0FBUSxJQTdDa0IsQ0E4QzFCO0FBQ0EsT0FBUSxJQS9Da0IsQ0FnRDFCO0FBQ0EsT0FBUSxJQWpEa0IsQ0FrRDFCO0FBQ0EsT0FBUSxJQW5Ea0IsQ0FvRDFCO0FBQ0EsT0FBUSxJQXJEa0IsQ0FzRDFCO0FBQ0EsT0FBUSxJQXZEa0IsQ0F3RDFCO0FBQ0EsT0FBUSxJQXpEa0IsQ0EwRDFCO0FBQ0EsT0FBUSxJQTNEa0IsQ0E0RDFCO0FBQ0EsT0FBUSxJQTdEa0IsQ0E4RDFCO0FBQ0EsT0FBUSxJQS9Ea0IsQ0FnRTFCO0FBQ0EsT0FBUSxNQWpFa0IsQ0FrRTFCO0FBQ0EsT0FBUSxJQW5Fa0IsQ0FvRTFCO0FBQ0EsT0FBUSxJQXJFa0IsQ0FzRTFCO0FBQ0EsT0FBUSxJQXZFa0IsQ0F3RTFCO0FBQ0EsT0FBUSxNQXpFa0IsQ0EwRTFCO0FBQ0EsT0FBUSxJQTNFa0IsQ0E0RTFCO0FBQ0EsT0FBUSxNQTdFa0IsQ0E4RTFCO0FBQ0EsT0FBUSxNQS9Fa0IsQ0FnRjFCO0FBQ0EsT0FBUSxNQWpGa0IsQ0FrRjFCO0FBQ0EsT0FBUSxNQW5Ga0IsQ0FvRjFCO0FBQ0EsT0FBUSxJQXJGa0IsQ0FzRjFCO0FBQ0EsT0FBUSxJQXZGa0IsQ0F3RjFCO0FBQ0EsT0FBUSxJQXpGa0IsQ0EwRjFCO0FBQ0EsT0FBUSxJQTNGa0IsQ0E0RjFCO0FBQ0EsT0FBUSxJQTdGa0IsQ0E4RjFCO0FBQ0EsT0FBUSxJQS9Ga0IsQ0FnRzFCO0FBQ0EsT0FBUSxJQWpHa0IsQ0FrRzFCO0FBQ0EsT0FBUSxJQW5Ha0IsQ0FvRzFCO0FBQ0EsT0FBUSxJQXJHa0IsQ0FzRzFCO0FBQ0EsT0FBUSxJQXZHa0IsQ0F3RzFCO0FBQ0EsT0FBUSxJQXpHa0Is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Q0FDRCxDQUFDO0FBR0YsR0FBSW5CLFlBQVlpQiwwQkFBWixFQUFKLENBQThDLENBQzVDM29DLFVBQVV6NkIsT0FBVixDQUFrQixPQUFsQixFQUEyQlEscUJBQTNCLENBQWlEc3NGLGdCQUFqRCxDQUFtRSxDQUFuRSxFQUNELENBRURyeUQsVUFBVTR3RCxVQUFWLENBQXVCQSxVQUF2QixDQUNBNXdELFVBQVVxeUQsZ0JBQVYsQ0FBNkJBLGdCQUE3QixDQUNBcnlELFVBQVVvSyxHQUFWLENBQWdCa2tELEtBQWhCLENBRUEsR0FBSSxDQUFDdHVELFVBQVUvNEIsR0FBZixDQUFvQixDQUNsQis0QixVQUFVOXhDLGlCQUFWLENBQTRCLEtBQTVCLENBQW1Db2dHLEtBQW5DLEVBQ0QsQ0FFRHR1RCxVQUFVbGdELE9BQVYsQ0FBa0J1bEQsR0FBbEIsQ0FBd0JyRixVQUFVbGdELE9BQVYsQ0FBa0J1bEQsR0FBbEIsRUFBeUIsRUFBakQsQ0FFQSxHQUFJckYsVUFBVWYsY0FBZCxDQUE4QixDQUM1QmUsVUFBVWYsY0FBVixDQUF5QixxQkFBekIsQ0FBZ0RpdkQsbUJBQWhELEVBQ0QsQ0FGRCxJQUVPLENBQ0xsdUQsVUFBVXZCLE1BQVYsQ0FBaUIscUJBQWpCLENBQXdDeXZELG1CQUF4QyxFQUNELEMsZ0JBRWNsdUQsUyIsImZpbGUiOiJ2aWRlby5lcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIFZpZGVvLmpzIDcuNS40IDxodHRwOi8vdmlkZW9qcy5jb20vPlxuICogQ29weXJpZ2h0IEJyaWdodGNvdmUsIEluYy4gPGh0dHBzOi8vd3d3LmJyaWdodGNvdmUuY29tLz5cbiAqIEF2YWlsYWJsZSB1bmRlciBBcGFjaGUgTGljZW5zZSBWZXJzaW9uIDIuMFxuICogPGh0dHBzOi8vZ2l0aHViLmNvbS92aWRlb2pzL3ZpZGVvLmpzL2Jsb2IvbWFzdGVyL0xJQ0VOU0U+XG4gKlxuICogSW5jbHVkZXMgdnR0LmpzIDxodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYS92dHQuanM+XG4gKiBBdmFpbGFibGUgdW5kZXIgQXBhY2hlIExpY2Vuc2UgVmVyc2lvbiAyLjBcbiAqIDxodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYS92dHQuanMvYmxvYi9tYXN0ZXIvTElDRU5TRT5cbiAqL1xuXG5pbXBvcnQgd2luZG93JDEgZnJvbSAnZ2xvYmFsL3dpbmRvdyc7XG5pbXBvcnQgZG9jdW1lbnQgZnJvbSAnZ2xvYmFsL2RvY3VtZW50JztcbmltcG9ydCB0c21sIGZyb20gJ3RzbWwnO1xuaW1wb3J0IHNhZmVQYXJzZVR1cGxlIGZyb20gJ3NhZmUtanNvbi1wYXJzZS90dXBsZSc7XG5pbXBvcnQga2V5Y29kZSBmcm9tICdrZXljb2RlJztcbmltcG9ydCB4aHIgZnJvbSAneGhyJztcbmltcG9ydCB2dHQgZnJvbSAndmlkZW9qcy12dHQuanMnO1xuaW1wb3J0IFVSTFRvb2xraXQgZnJvbSAndXJsLXRvb2xraXQnO1xuaW1wb3J0IHsgUGFyc2VyIH0gZnJvbSAnbTN1OC1wYXJzZXInO1xuaW1wb3J0IHsgcGFyc2UsIHBhcnNlVVRDVGltaW5nIH0gZnJvbSAnbXBkLXBhcnNlcic7XG5pbXBvcnQgbXA0cHJvYmUgZnJvbSAnbXV4LmpzL2xpYi9tcDQvcHJvYmUnO1xuaW1wb3J0IHsgQ2FwdGlvblBhcnNlciB9IGZyb20gJ211eC5qcy9saWIvbXA0JztcbmltcG9ydCB0c0luc3BlY3RvciBmcm9tICdtdXguanMvbGliL3Rvb2xzL3RzLWluc3BlY3Rvci5qcyc7XG5pbXBvcnQgeyBEZWNyeXB0ZXIsIEFzeW5jU3RyZWFtLCBkZWNyeXB0IH0gZnJvbSAnYWVzLWRlY3J5cHRlcic7XG5cbnZhciB2ZXJzaW9uID0gXCI3LjUuNFwiO1xuXG5mdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTtcbiAgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7XG4gIHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG59XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICAgIG8uX19wcm90b19fID0gcDtcbiAgICByZXR1cm4gbztcbiAgfTtcblxuICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApO1xufVxuXG5mdW5jdGlvbiBpc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTtcbiAgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTtcbiAgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTtcblxuICB0cnkge1xuICAgIERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoRGF0ZSwgW10sIGZ1bmN0aW9uICgpIHt9KSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2NvbnN0cnVjdChQYXJlbnQsIGFyZ3MsIENsYXNzKSB7XG4gIGlmIChpc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSkge1xuICAgIF9jb25zdHJ1Y3QgPSBSZWZsZWN0LmNvbnN0cnVjdDtcbiAgfSBlbHNlIHtcbiAgICBfY29uc3RydWN0ID0gZnVuY3Rpb24gX2NvbnN0cnVjdChQYXJlbnQsIGFyZ3MsIENsYXNzKSB7XG4gICAgICB2YXIgYSA9IFtudWxsXTtcbiAgICAgIGEucHVzaC5hcHBseShhLCBhcmdzKTtcbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IEZ1bmN0aW9uLmJpbmQuYXBwbHkoUGFyZW50LCBhKTtcbiAgICAgIHZhciBpbnN0YW5jZSA9IG5ldyBDb25zdHJ1Y3RvcigpO1xuICAgICAgaWYgKENsYXNzKSBfc2V0UHJvdG90eXBlT2YoaW5zdGFuY2UsIENsYXNzLnByb3RvdHlwZSk7XG4gICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBfY29uc3RydWN0LmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG59XG5cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikge1xuICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIHNlbGY7XG59XG5cbmZ1bmN0aW9uIF90YWdnZWRUZW1wbGF0ZUxpdGVyYWxMb29zZShzdHJpbmdzLCByYXcpIHtcbiAgaWYgKCFyYXcpIHtcbiAgICByYXcgPSBzdHJpbmdzLnNsaWNlKDApO1xuICB9XG5cbiAgc3RyaW5ncy5yYXcgPSByYXc7XG4gIHJldHVybiBzdHJpbmdzO1xufVxuXG4vKipcbiAqIEBmaWxlIGNyZWF0ZS1sb2dnZXIuanNcbiAqIEBtb2R1bGUgY3JlYXRlLWxvZ2dlclxuICovXG5cbnZhciBoaXN0b3J5ID0gW107XG4vKipcbiAqIExvZyBtZXNzYWdlcyB0byB0aGUgY29uc29sZSBhbmQgaGlzdG9yeSBiYXNlZCBvbiB0aGUgdHlwZSBvZiBtZXNzYWdlXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSAge3N0cmluZ30gdHlwZVxuICogICAgICAgICBUaGUgbmFtZSBvZiB0aGUgY29uc29sZSBtZXRob2QgdG8gdXNlLlxuICpcbiAqIEBwYXJhbSAge0FycmF5fSBhcmdzXG4gKiAgICAgICAgIFRoZSBhcmd1bWVudHMgdG8gYmUgcGFzc2VkIHRvIHRoZSBtYXRjaGluZyBjb25zb2xlIG1ldGhvZC5cbiAqL1xuXG52YXIgTG9nQnlUeXBlRmFjdG9yeSA9IGZ1bmN0aW9uIExvZ0J5VHlwZUZhY3RvcnkobmFtZSwgbG9nKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodHlwZSwgbGV2ZWwsIGFyZ3MpIHtcbiAgICB2YXIgbHZsID0gbG9nLmxldmVsc1tsZXZlbF07XG4gICAgdmFyIGx2bFJlZ0V4cCA9IG5ldyBSZWdFeHAoXCJeKFwiICsgbHZsICsgXCIpJFwiKTtcblxuICAgIGlmICh0eXBlICE9PSAnbG9nJykge1xuICAgICAgLy8gQWRkIHRoZSB0eXBlIHRvIHRoZSBmcm9udCBvZiB0aGUgbWVzc2FnZSB3aGVuIGl0J3Mgbm90IFwibG9nXCIuXG4gICAgICBhcmdzLnVuc2hpZnQodHlwZS50b1VwcGVyQ2FzZSgpICsgJzonKTtcbiAgICB9IC8vIEFkZCBjb25zb2xlIHByZWZpeCBhZnRlciBhZGRpbmcgdG8gaGlzdG9yeS5cblxuXG4gICAgYXJncy51bnNoaWZ0KG5hbWUgKyAnOicpOyAvLyBBZGQgYSBjbG9uZSBvZiB0aGUgYXJncyBhdCB0aGlzIHBvaW50IHRvIGhpc3RvcnkuXG5cbiAgICBpZiAoaGlzdG9yeSkge1xuICAgICAgaGlzdG9yeS5wdXNoKFtdLmNvbmNhdChhcmdzKSk7XG4gICAgfSAvLyBJZiB0aGVyZSdzIG5vIGNvbnNvbGUgdGhlbiBkb24ndCB0cnkgdG8gb3V0cHV0IG1lc3NhZ2VzLCBidXQgdGhleSB3aWxsXG4gICAgLy8gc3RpbGwgYmUgc3RvcmVkIGluIGhpc3RvcnkuXG5cblxuICAgIGlmICghd2luZG93JDEuY29uc29sZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gV2FzIHNldHRpbmcgdGhlc2Ugb25jZSBvdXRzaWRlIG9mIHRoaXMgZnVuY3Rpb24sIGJ1dCBjb250YWluaW5nIHRoZW1cbiAgICAvLyBpbiB0aGUgZnVuY3Rpb24gbWFrZXMgaXQgZWFzaWVyIHRvIHRlc3QgY2FzZXMgd2hlcmUgY29uc29sZSBkb2Vzbid0IGV4aXN0XG4gICAgLy8gd2hlbiB0aGUgbW9kdWxlIGlzIGV4ZWN1dGVkLlxuXG5cbiAgICB2YXIgZm4gPSB3aW5kb3ckMS5jb25zb2xlW3R5cGVdO1xuXG4gICAgaWYgKCFmbiAmJiB0eXBlID09PSAnZGVidWcnKSB7XG4gICAgICAvLyBDZXJ0YWluIGJyb3dzZXJzIGRvbid0IGhhdmUgc3VwcG9ydCBmb3IgY29uc29sZS5kZWJ1Zy4gRm9yIHRob3NlLCB3ZVxuICAgICAgLy8gc2hvdWxkIGRlZmF1bHQgdG8gdGhlIGNsb3Nlc3QgY29tcGFyYWJsZSBsb2cuXG4gICAgICBmbiA9IHdpbmRvdyQxLmNvbnNvbGUuaW5mbyB8fCB3aW5kb3ckMS5jb25zb2xlLmxvZztcbiAgICB9IC8vIEJhaWwgb3V0IGlmIHRoZXJlJ3Mgbm8gY29uc29sZSBvciBpZiB0aGlzIHR5cGUgaXMgbm90IGFsbG93ZWQgYnkgdGhlXG4gICAgLy8gY3VycmVudCBsb2dnaW5nIGxldmVsLlxuXG5cbiAgICBpZiAoIWZuIHx8ICFsdmwgfHwgIWx2bFJlZ0V4cC50ZXN0KHR5cGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm5bQXJyYXkuaXNBcnJheShhcmdzKSA/ICdhcHBseScgOiAnY2FsbCddKHdpbmRvdyQxLmNvbnNvbGUsIGFyZ3MpO1xuICB9O1xufTtcblxuZnVuY3Rpb24gY3JlYXRlTG9nZ2VyKG5hbWUpIHtcbiAgLy8gVGhpcyBpcyB0aGUgcHJpdmF0ZSB0cmFja2luZyB2YXJpYWJsZSBmb3IgbG9nZ2luZyBsZXZlbC5cbiAgdmFyIGxldmVsID0gJ2luZm8nOyAvLyB0aGUgY3VycmllZCBsb2dCeVR5cGUgYm91bmQgdG8gdGhlIHNwZWNpZmljIGxvZyBhbmQgaGlzdG9yeVxuXG4gIHZhciBsb2dCeVR5cGU7XG4gIC8qKlxuICAgKiBMb2dzIHBsYWluIGRlYnVnIG1lc3NhZ2VzLiBTaW1pbGFyIHRvIGBjb25zb2xlLmxvZ2AuXG4gICAqXG4gICAqIER1ZSB0byBbbGltaXRhdGlvbnNdKGh0dHBzOi8vZ2l0aHViLmNvbS9qc2RvYzMvanNkb2MvaXNzdWVzLzk1NSNpc3N1ZWNvbW1lbnQtMzEzODI5MTQ5KVxuICAgKiBvZiBvdXIgSlNEb2MgdGVtcGxhdGUsIHdlIGNhbm5vdCBwcm9wZXJseSBkb2N1bWVudCB0aGlzIGFzIGJvdGggYSBmdW5jdGlvblxuICAgKiBhbmQgYSBuYW1lc3BhY2UsIHNvIGl0cyBmdW5jdGlvbiBzaWduYXR1cmUgaXMgZG9jdW1lbnRlZCBoZXJlLlxuICAgKlxuICAgKiAjIyMjIEFyZ3VtZW50c1xuICAgKiAjIyMjIyAqYXJnc1xuICAgKiBNaXhlZFtdXG4gICAqXG4gICAqIEFueSBjb21iaW5hdGlvbiBvZiB2YWx1ZXMgdGhhdCBjb3VsZCBiZSBwYXNzZWQgdG8gYGNvbnNvbGUubG9nKClgLlxuICAgKlxuICAgKiAjIyMjIFJldHVybiBWYWx1ZVxuICAgKlxuICAgKiBgdW5kZWZpbmVkYFxuICAgKlxuICAgKiBAbmFtZXNwYWNlXG4gICAqIEBwYXJhbSAgICB7TWl4ZWRbXX0gYXJnc1xuICAgKiAgICAgICAgICAgT25lIG9yIG1vcmUgbWVzc2FnZXMgb3Igb2JqZWN0cyB0aGF0IHNob3VsZCBiZSBsb2dnZWQuXG4gICAqL1xuXG4gIHZhciBsb2cgPSBmdW5jdGlvbiBsb2coKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIGxvZ0J5VHlwZSgnbG9nJywgbGV2ZWwsIGFyZ3MpO1xuICB9OyAvLyBUaGlzIGlzIHRoZSBsb2dCeVR5cGUgaGVscGVyIHRoYXQgdGhlIGxvZ2dpbmcgbWV0aG9kcyBiZWxvdyB1c2VcblxuXG4gIGxvZ0J5VHlwZSA9IExvZ0J5VHlwZUZhY3RvcnkobmFtZSwgbG9nKTtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBzdWJsb2dnZXIgd2hpY2ggY2hhaW5zIHRoZSBvbGQgbmFtZSB0byB0aGUgbmV3IG5hbWUuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBkb2luZyBgdmlkZW9qcy5sb2cuY3JlYXRlTG9nZ2VyKCdwbGF5ZXInKWAgYW5kIHRoZW4gdXNpbmcgdGhhdCBsb2dnZXIgd2lsbCBsb2cgdGhlIGZvbGxvd2luZzpcbiAgICogYGBganNcbiAgICogIG15bG9nZ2VyKCdmb28nKTtcbiAgICogIC8vID4gVklERU9KUzogcGxheWVyOiBmb29cbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqICAgICAgICBUaGUgbmFtZSB0byBhZGQgY2FsbCB0aGUgbmV3IGxvZ2dlclxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuXG4gIGxvZy5jcmVhdGVMb2dnZXIgPSBmdW5jdGlvbiAoc3VibmFtZSkge1xuICAgIHJldHVybiBjcmVhdGVMb2dnZXIobmFtZSArICc6ICcgKyBzdWJuYW1lKTtcbiAgfTtcbiAgLyoqXG4gICAqIEVudW1lcmF0aW9uIG9mIGF2YWlsYWJsZSBsb2dnaW5nIGxldmVscywgd2hlcmUgdGhlIGtleXMgYXJlIHRoZSBsZXZlbCBuYW1lc1xuICAgKiBhbmQgdGhlIHZhbHVlcyBhcmUgYHxgLXNlcGFyYXRlZCBzdHJpbmdzIGNvbnRhaW5pbmcgbG9nZ2luZyBtZXRob2RzIGFsbG93ZWRcbiAgICogaW4gdGhhdCBsb2dnaW5nIGxldmVsLiBUaGVzZSBzdHJpbmdzIGFyZSB1c2VkIHRvIGNyZWF0ZSBhIHJlZ3VsYXIgZXhwcmVzc2lvblxuICAgKiBtYXRjaGluZyB0aGUgZnVuY3Rpb24gbmFtZSBiZWluZyBjYWxsZWQuXG4gICAqXG4gICAqIExldmVscyBwcm92aWRlZCBieSBWaWRlby5qcyBhcmU6XG4gICAqXG4gICAqIC0gYG9mZmA6IE1hdGNoZXMgbm8gY2FsbHMuIEFueSB2YWx1ZSB0aGF0IGNhbiBiZSBjYXN0IHRvIGBmYWxzZWAgd2lsbCBoYXZlXG4gICAqICAgdGhpcyBlZmZlY3QuIFRoZSBtb3N0IHJlc3RyaWN0aXZlLlxuICAgKiAtIGBhbGxgOiBNYXRjaGVzIG9ubHkgVmlkZW8uanMtcHJvdmlkZWQgZnVuY3Rpb25zIChgZGVidWdgLCBgbG9nYCxcbiAgICogICBgbG9nLndhcm5gLCBhbmQgYGxvZy5lcnJvcmApLlxuICAgKiAtIGBkZWJ1Z2A6IE1hdGNoZXMgYGxvZy5kZWJ1Z2AsIGBsb2dgLCBgbG9nLndhcm5gLCBhbmQgYGxvZy5lcnJvcmAgY2FsbHMuXG4gICAqIC0gYGluZm9gIChkZWZhdWx0KTogTWF0Y2hlcyBgbG9nYCwgYGxvZy53YXJuYCwgYW5kIGBsb2cuZXJyb3JgIGNhbGxzLlxuICAgKiAtIGB3YXJuYDogTWF0Y2hlcyBgbG9nLndhcm5gIGFuZCBgbG9nLmVycm9yYCBjYWxscy5cbiAgICogLSBgZXJyb3JgOiBNYXRjaGVzIG9ubHkgYGxvZy5lcnJvcmAgY2FsbHMuXG4gICAqXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuXG5cbiAgbG9nLmxldmVscyA9IHtcbiAgICBhbGw6ICdkZWJ1Z3xsb2d8d2FybnxlcnJvcicsXG4gICAgb2ZmOiAnJyxcbiAgICBkZWJ1ZzogJ2RlYnVnfGxvZ3x3YXJufGVycm9yJyxcbiAgICBpbmZvOiAnbG9nfHdhcm58ZXJyb3InLFxuICAgIHdhcm46ICd3YXJufGVycm9yJyxcbiAgICBlcnJvcjogJ2Vycm9yJyxcbiAgICBERUZBVUxUOiBsZXZlbFxuICB9O1xuICAvKipcbiAgICogR2V0IG9yIHNldCB0aGUgY3VycmVudCBsb2dnaW5nIGxldmVsLlxuICAgKlxuICAgKiBJZiBhIHN0cmluZyBtYXRjaGluZyBhIGtleSBmcm9tIHtAbGluayBtb2R1bGU6bG9nLmxldmVsc30gaXMgcHJvdmlkZWQsIGFjdHNcbiAgICogYXMgYSBzZXR0ZXIuXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gW2x2bF1cbiAgICogICAgICAgICBQYXNzIGEgdmFsaWQgbGV2ZWwgdG8gc2V0IGEgbmV3IGxvZ2dpbmcgbGV2ZWwuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBUaGUgY3VycmVudCBsb2dnaW5nIGxldmVsLlxuICAgKi9cblxuICBsb2cubGV2ZWwgPSBmdW5jdGlvbiAobHZsKSB7XG4gICAgaWYgKHR5cGVvZiBsdmwgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoIWxvZy5sZXZlbHMuaGFzT3duUHJvcGVydHkobHZsKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcXFwiXCIgKyBsdmwgKyBcIlxcXCIgaW4gbm90IGEgdmFsaWQgbG9nIGxldmVsXCIpO1xuICAgICAgfVxuXG4gICAgICBsZXZlbCA9IGx2bDtcbiAgICB9XG5cbiAgICByZXR1cm4gbGV2ZWw7XG4gIH07XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IGNvbnRhaW5pbmcgZXZlcnl0aGluZyB0aGF0IGhhcyBiZWVuIGxvZ2dlZCB0byB0aGUgaGlzdG9yeS5cbiAgICpcbiAgICogVGhpcyBhcnJheSBpcyBhIHNoYWxsb3cgY2xvbmUgb2YgdGhlIGludGVybmFsIGhpc3RvcnkgcmVjb3JkLiBIb3dldmVyLCBpdHNcbiAgICogY29udGVudHMgYXJlIF9ub3RfIGNsb25lZDsgc28sIG11dGF0aW5nIG9iamVjdHMgaW5zaWRlIHRoaXMgYXJyYXkgd2lsbFxuICAgKiBtdXRhdGUgdGhlbSBpbiBoaXN0b3J5LlxuICAgKlxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG5cblxuICBsb2cuaGlzdG9yeSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gaGlzdG9yeSA/IFtdLmNvbmNhdChoaXN0b3J5KSA6IFtdO1xuICB9O1xuICAvKipcbiAgICogQWxsb3dzIHlvdSB0byBmaWx0ZXIgdGhlIGhpc3RvcnkgYnkgdGhlIGdpdmVuIGxvZ2dlciBuYW1lXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbmFtZVxuICAgKiAgICAgICAgVGhlIG5hbWUgdG8gZmlsdGVyIGJ5XG4gICAqXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKiAgICAgICAgIFRoZSBmaWx0ZXJlZCBsaXN0IHRvIHJldHVyblxuICAgKi9cblxuXG4gIGxvZy5oaXN0b3J5LmZpbHRlciA9IGZ1bmN0aW9uIChmbmFtZSkge1xuICAgIHJldHVybiAoaGlzdG9yeSB8fCBbXSkuZmlsdGVyKGZ1bmN0aW9uIChoaXN0b3J5SXRlbSkge1xuICAgICAgLy8gaWYgdGhlIGZpcnN0IGl0ZW0gaW4gZWFjaCBoaXN0b3J5SXRlbSBpbmNsdWRlcyBgZm5hbWVgLCB0aGVuIGl0J3MgYSBtYXRjaFxuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoXCIuKlwiICsgZm5hbWUgKyBcIi4qXCIpLnRlc3QoaGlzdG9yeUl0ZW1bMF0pO1xuICAgIH0pO1xuICB9O1xuICAvKipcbiAgICogQ2xlYXJzIHRoZSBpbnRlcm5hbCBoaXN0b3J5IHRyYWNraW5nLCBidXQgZG9lcyBub3QgcHJldmVudCBmdXJ0aGVyIGhpc3RvcnlcbiAgICogdHJhY2tpbmcuXG4gICAqL1xuXG5cbiAgbG9nLmhpc3RvcnkuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGhpc3RvcnkpIHtcbiAgICAgIGhpc3RvcnkubGVuZ3RoID0gMDtcbiAgICB9XG4gIH07XG4gIC8qKlxuICAgKiBEaXNhYmxlIGhpc3RvcnkgdHJhY2tpbmcgaWYgaXQgaXMgY3VycmVudGx5IGVuYWJsZWQuXG4gICAqL1xuXG5cbiAgbG9nLmhpc3RvcnkuZGlzYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaGlzdG9yeSAhPT0gbnVsbCkge1xuICAgICAgaGlzdG9yeS5sZW5ndGggPSAwO1xuICAgICAgaGlzdG9yeSA9IG51bGw7XG4gICAgfVxuICB9O1xuICAvKipcbiAgICogRW5hYmxlIGhpc3RvcnkgdHJhY2tpbmcgaWYgaXQgaXMgY3VycmVudGx5IGRpc2FibGVkLlxuICAgKi9cblxuXG4gIGxvZy5oaXN0b3J5LmVuYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaGlzdG9yeSA9PT0gbnVsbCkge1xuICAgICAgaGlzdG9yeSA9IFtdO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIExvZ3MgZXJyb3IgbWVzc2FnZXMuIFNpbWlsYXIgdG8gYGNvbnNvbGUuZXJyb3JgLlxuICAgKlxuICAgKiBAcGFyYW0ge01peGVkW119IGFyZ3NcbiAgICogICAgICAgIE9uZSBvciBtb3JlIG1lc3NhZ2VzIG9yIG9iamVjdHMgdGhhdCBzaG91bGQgYmUgbG9nZ2VkIGFzIGFuIGVycm9yXG4gICAqL1xuXG5cbiAgbG9nLmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgIH1cblxuICAgIHJldHVybiBsb2dCeVR5cGUoJ2Vycm9yJywgbGV2ZWwsIGFyZ3MpO1xuICB9O1xuICAvKipcbiAgICogTG9ncyB3YXJuaW5nIG1lc3NhZ2VzLiBTaW1pbGFyIHRvIGBjb25zb2xlLndhcm5gLlxuICAgKlxuICAgKiBAcGFyYW0ge01peGVkW119IGFyZ3NcbiAgICogICAgICAgIE9uZSBvciBtb3JlIG1lc3NhZ2VzIG9yIG9iamVjdHMgdGhhdCBzaG91bGQgYmUgbG9nZ2VkIGFzIGEgd2FybmluZy5cbiAgICovXG5cblxuICBsb2cud2FybiA9IGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjMpLCBfa2V5MyA9IDA7IF9rZXkzIDwgX2xlbjM7IF9rZXkzKyspIHtcbiAgICAgIGFyZ3NbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbG9nQnlUeXBlKCd3YXJuJywgbGV2ZWwsIGFyZ3MpO1xuICB9O1xuICAvKipcbiAgICogTG9ncyBkZWJ1ZyBtZXNzYWdlcy4gU2ltaWxhciB0byBgY29uc29sZS5kZWJ1Z2AsIGJ1dCBtYXkgYWxzbyBhY3QgYXMgYSBjb21wYXJhYmxlXG4gICAqIGxvZyBpZiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGF2YWlsYWJsZVxuICAgKlxuICAgKiBAcGFyYW0ge01peGVkW119IGFyZ3NcbiAgICogICAgICAgIE9uZSBvciBtb3JlIG1lc3NhZ2VzIG9yIG9iamVjdHMgdGhhdCBzaG91bGQgYmUgbG9nZ2VkIGFzIGRlYnVnLlxuICAgKi9cblxuXG4gIGxvZy5kZWJ1ZyA9IGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBfbGVuNCA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjQpLCBfa2V5NCA9IDA7IF9rZXk0IDwgX2xlbjQ7IF9rZXk0KyspIHtcbiAgICAgIGFyZ3NbX2tleTRdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgICB9XG5cbiAgICByZXR1cm4gbG9nQnlUeXBlKCdkZWJ1ZycsIGxldmVsLCBhcmdzKTtcbiAgfTtcblxuICByZXR1cm4gbG9nO1xufVxuXG4vKipcbiAqIEBmaWxlIGxvZy5qc1xuICogQG1vZHVsZSBsb2dcbiAqL1xudmFyIGxvZyA9IGNyZWF0ZUxvZ2dlcignVklERU9KUycpO1xudmFyIGNyZWF0ZUxvZ2dlciQxID0gbG9nLmNyZWF0ZUxvZ2dlcjtcblxuLyoqXG4gKiBAZmlsZSBvYmouanNcbiAqIEBtb2R1bGUgb2JqXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgb2JqOkVhY2hDYWxsYmFja1xuICpcbiAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gKiAgICAgICAgVGhlIGN1cnJlbnQga2V5IGZvciB0aGUgb2JqZWN0IHRoYXQgaXMgYmVpbmcgaXRlcmF0ZWQgb3Zlci5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gKiAgICAgICAgVGhlIGN1cnJlbnQga2V5LXZhbHVlIGZvciBvYmplY3QgdGhhdCBpcyBiZWluZyBpdGVyYXRlZCBvdmVyXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgb2JqOlJlZHVjZUNhbGxiYWNrXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gYWNjdW1cbiAqICAgICAgICBUaGUgdmFsdWUgdGhhdCBpcyBhY2N1bXVsYXRpbmcgb3ZlciB0aGUgcmVkdWNlIGxvb3AuXG4gKlxuICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAqICAgICAgICBUaGUgY3VycmVudCBrZXkgZm9yIHRoZSBvYmplY3QgdGhhdCBpcyBiZWluZyBpdGVyYXRlZCBvdmVyLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqICAgICAgICBUaGUgY3VycmVudCBrZXktdmFsdWUgZm9yIG9iamVjdCB0aGF0IGlzIGJlaW5nIGl0ZXJhdGVkIG92ZXJcbiAqXG4gKiBAcmV0dXJuIHtNaXhlZH1cbiAqICAgICAgICAgVGhlIG5ldyBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAqL1xudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbi8qKlxuICogR2V0IHRoZSBrZXlzIG9mIGFuIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fVxuICogICAgICAgIFRoZSBPYmplY3QgdG8gZ2V0IHRoZSBrZXlzIGZyb21cbiAqXG4gKiBAcmV0dXJuIHtzdHJpbmdbXX1cbiAqICAgICAgICAgQW4gYXJyYXkgb2YgdGhlIGtleXMgZnJvbSB0aGUgb2JqZWN0LiBSZXR1cm5zIGFuIGVtcHR5IGFycmF5IGlmIHRoZVxuICogICAgICAgICBvYmplY3QgcGFzc2VkIGluIHdhcyBpbnZhbGlkIG9yIGhhZCBubyBrZXlzLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cblxudmFyIGtleXMgPSBmdW5jdGlvbiBrZXlzKG9iamVjdCkge1xuICByZXR1cm4gaXNPYmplY3Qob2JqZWN0KSA/IE9iamVjdC5rZXlzKG9iamVjdCkgOiBbXTtcbn07XG4vKipcbiAqIEFycmF5LWxpa2UgaXRlcmF0aW9uIGZvciBvYmplY3RzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAqICAgICAgICBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3ZlclxuICpcbiAqIEBwYXJhbSB7b2JqOkVhY2hDYWxsYmFja30gZm5cbiAqICAgICAgICBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gd2hpY2ggaXMgY2FsbGVkIGZvciBlYWNoIGtleSBpbiB0aGUgb2JqZWN0LlxuICovXG5cblxuZnVuY3Rpb24gZWFjaChvYmplY3QsIGZuKSB7XG4gIGtleXMob2JqZWN0KS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gZm4ob2JqZWN0W2tleV0sIGtleSk7XG4gIH0pO1xufVxuLyoqXG4gKiBBcnJheS1saWtlIHJlZHVjZSBmb3Igb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gKiAgICAgICAgVGhlIE9iamVjdCB0aGF0IHlvdSB3YW50IHRvIHJlZHVjZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogICAgICAgICBBIGNhbGxiYWNrIGZ1bmN0aW9uIHdoaWNoIGlzIGNhbGxlZCBmb3IgZWFjaCBrZXkgaW4gdGhlIG9iamVjdC4gSXRcbiAqICAgICAgICAgcmVjZWl2ZXMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlIGFuZCB0aGUgcGVyLWl0ZXJhdGlvbiB2YWx1ZSBhbmQga2V5XG4gKiAgICAgICAgIGFzIGFyZ3VtZW50cy5cbiAqXG4gKiBAcGFyYW0ge01peGVkfSBbaW5pdGlhbCA9IDBdXG4gKiAgICAgICAgU3RhcnRpbmcgdmFsdWVcbiAqXG4gKiBAcmV0dXJuIHtNaXhlZH1cbiAqICAgICAgICAgVGhlIGZpbmFsIGFjY3VtdWxhdGVkIHZhbHVlLlxuICovXG5cbmZ1bmN0aW9uIHJlZHVjZShvYmplY3QsIGZuLCBpbml0aWFsKSB7XG4gIGlmIChpbml0aWFsID09PSB2b2lkIDApIHtcbiAgICBpbml0aWFsID0gMDtcbiAgfVxuXG4gIHJldHVybiBrZXlzKG9iamVjdCkucmVkdWNlKGZ1bmN0aW9uIChhY2N1bSwga2V5KSB7XG4gICAgcmV0dXJuIGZuKGFjY3VtLCBvYmplY3Rba2V5XSwga2V5KTtcbiAgfSwgaW5pdGlhbCk7XG59XG4vKipcbiAqIE9iamVjdC5hc3NpZ24tc3R5bGUgb2JqZWN0IHNoYWxsb3cgbWVyZ2UvZXh0ZW5kLlxuICpcbiAqIEBwYXJhbSAge09iamVjdH0gdGFyZ2V0XG4gKiBAcGFyYW0gIHtPYmplY3R9IC4uLnNvdXJjZXNcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBhc3NpZ24odGFyZ2V0KSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBzb3VyY2VzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBzb3VyY2VzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIGlmIChPYmplY3QuYXNzaWduKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24uYXBwbHkoT2JqZWN0LCBbdGFyZ2V0XS5jb25jYXQoc291cmNlcykpO1xuICB9XG5cbiAgc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGVhY2goc291cmNlLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgdGFyZ2V0W2tleV0gPSB2YWx1ZTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiB0YXJnZXQ7XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBhIHZhbHVlIGlzIGFuIG9iamVjdCBvZiBhbnkga2luZCAtIGluY2x1ZGluZyBET00gbm9kZXMsXG4gKiBhcnJheXMsIHJlZ3VsYXIgZXhwcmVzc2lvbnMsIGV0Yy4gTm90IGZ1bmN0aW9ucywgdGhvdWdoLlxuICpcbiAqIFRoaXMgYXZvaWRzIHRoZSBnb3RjaGEgd2hlcmUgdXNpbmcgYHR5cGVvZmAgb24gYSBgbnVsbGAgdmFsdWVcbiAqIHJlc3VsdHMgaW4gYCdvYmplY3QnYC5cbiAqXG4gKiBAcGFyYW0gIHtPYmplY3R9IHZhbHVlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCc7XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBhbiBvYmplY3QgYXBwZWFycyB0byBiZSBhIFwicGxhaW5cIiBvYmplY3QgLSB0aGF0IGlzLCBhXG4gKiBkaXJlY3QgaW5zdGFuY2Ugb2YgYE9iamVjdGAuXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc1BsYWluKHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdCh2YWx1ZSkgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IE9iamVjdF0nICYmIHZhbHVlLmNvbnN0cnVjdG9yID09PSBPYmplY3Q7XG59XG5cbi8qKlxuICogQGZpbGUgY29tcHV0ZWQtc3R5bGUuanNcbiAqIEBtb2R1bGUgY29tcHV0ZWQtc3R5bGVcbiAqL1xuLyoqXG4gKiBBIHNhZmUgZ2V0Q29tcHV0ZWRTdHlsZS5cbiAqXG4gKiBUaGlzIGlzIG5lZWRlZCBiZWNhdXNlIGluIEZpcmVmb3gsIGlmIHRoZSBwbGF5ZXIgaXMgbG9hZGVkIGluIGFuIGlmcmFtZSB3aXRoXG4gKiBgZGlzcGxheTpub25lYCwgdGhlbiBgZ2V0Q29tcHV0ZWRTdHlsZWAgcmV0dXJucyBgbnVsbGAsIHNvLCB3ZSBkbyBhXG4gKiBudWxsLWNoZWNrIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBwbGF5ZXIgZG9lc24ndCBicmVhayBpbiB0aGVzZSBjYXNlcy5cbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAgICB7RWxlbWVudH0gZWxcbiAqICAgICAgICAgICBUaGUgZWxlbWVudCB5b3Ugd2FudCB0aGUgY29tcHV0ZWQgc3R5bGUgb2ZcbiAqXG4gKiBAcGFyYW0gICAge3N0cmluZ30gcHJvcFxuICogICAgICAgICAgIFRoZSBwcm9wZXJ0eSBuYW1lIHlvdSB3YW50XG4gKlxuICogQHNlZSAgICAgIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTU0ODM5N1xuICovXG5cbmZ1bmN0aW9uIGNvbXB1dGVkU3R5bGUoZWwsIHByb3ApIHtcbiAgaWYgKCFlbCB8fCAhcHJvcCkge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIGlmICh0eXBlb2Ygd2luZG93JDEuZ2V0Q29tcHV0ZWRTdHlsZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHZhciBjcyA9IHdpbmRvdyQxLmdldENvbXB1dGVkU3R5bGUoZWwpO1xuICAgIHJldHVybiBjcyA/IGNzW3Byb3BdIDogJyc7XG4gIH1cblxuICByZXR1cm4gJyc7XG59XG5cbmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdCgpIHtcbiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsTG9vc2UoW1wiU2V0dGluZyBhdHRyaWJ1dGVzIGluIHRoZSBzZWNvbmQgYXJndW1lbnQgb2YgY3JlYXRlRWwoKVxcbiAgICAgICAgICAgICAgICBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgdGhlIHRoaXJkIGFyZ3VtZW50IGluc3RlYWQuXFxuICAgICAgICAgICAgICAgIGNyZWF0ZUVsKHR5cGUsIHByb3BlcnRpZXMsIGF0dHJpYnV0ZXMpLiBBdHRlbXB0aW5nIHRvIHNldCBcIiwgXCIgdG8gXCIsIFwiLlwiXSk7XG5cbiAgX3RlbXBsYXRlT2JqZWN0ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkge1xuICAgIHJldHVybiBkYXRhO1xuICB9O1xuXG4gIHJldHVybiBkYXRhO1xufVxuLyoqXG4gKiBEZXRlY3QgaWYgYSB2YWx1ZSBpcyBhIHN0cmluZyB3aXRoIGFueSBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHN0clxuICogICAgICAgICBUaGUgc3RyaW5nIHRvIGNoZWNrXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqICAgICAgICAgV2lsbCBiZSBgdHJ1ZWAgaWYgdGhlIHN0cmluZyBpcyBub24tYmxhbmssIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqL1xuXG5mdW5jdGlvbiBpc05vbkJsYW5rU3RyaW5nKHN0cikge1xuICByZXR1cm4gdHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgL1xcUy8udGVzdChzdHIpO1xufVxuLyoqXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIHBhc3NlZCBzdHJpbmcgaGFzIHdoaXRlc3BhY2UuIFRoaXMgaXMgdXNlZCBieVxuICogY2xhc3MgbWV0aG9kcyB0byBiZSByZWxhdGl2ZWx5IGNvbnNpc3RlbnQgd2l0aCB0aGUgY2xhc3NMaXN0IEFQSS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtICB7c3RyaW5nfSBzdHJcbiAqICAgICAgICAgVGhlIHN0cmluZyB0byBjaGVjayBmb3Igd2hpdGVzcGFjZS5cbiAqXG4gKiBAdGhyb3dzIHtFcnJvcn1cbiAqICAgICAgICAgVGhyb3dzIGFuIGVycm9yIGlmIHRoZXJlIGlzIHdoaXRlc3BhY2UgaW4gdGhlIHN0cmluZy5cbiAqL1xuXG5cbmZ1bmN0aW9uIHRocm93SWZXaGl0ZXNwYWNlKHN0cikge1xuICBpZiAoL1xccy8udGVzdChzdHIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGFzcyBoYXMgaWxsZWdhbCB3aGl0ZXNwYWNlIGNoYXJhY3RlcnMnKTtcbiAgfVxufVxuLyoqXG4gKiBQcm9kdWNlIGEgcmVndWxhciBleHByZXNzaW9uIGZvciBtYXRjaGluZyBhIGNsYXNzTmFtZSB3aXRoaW4gYW4gZWxlbWVudHMgY2xhc3NOYW1lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0gIHtzdHJpbmd9IGNsYXNzTmFtZVxuICogICAgICAgICBUaGUgY2xhc3NOYW1lIHRvIGdlbmVyYXRlIHRoZSBSZWdFeHAgZm9yLlxuICpcbiAqIEByZXR1cm4ge1JlZ0V4cH1cbiAqICAgICAgICAgVGhlIFJlZ0V4cCB0aGF0IHdpbGwgY2hlY2sgZm9yIGEgc3BlY2lmaWMgYGNsYXNzTmFtZWAgaW4gYW4gZWxlbWVudHNcbiAqICAgICAgICAgY2xhc3NOYW1lLlxuICovXG5cblxuZnVuY3Rpb24gY2xhc3NSZWdFeHAoY2xhc3NOYW1lKSB7XG4gIHJldHVybiBuZXcgUmVnRXhwKCcoXnxcXFxccyknICsgY2xhc3NOYW1lICsgJygkfFxcXFxzKScpO1xufVxuLyoqXG4gKiBXaGV0aGVyIHRoZSBjdXJyZW50IERPTSBpbnRlcmZhY2UgYXBwZWFycyB0byBiZSByZWFsIChpLmUuIG5vdCBzaW11bGF0ZWQpLlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiAgICAgICAgIFdpbGwgYmUgYHRydWVgIGlmIHRoZSBET00gYXBwZWFycyB0byBiZSByZWFsLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqL1xuXG5cbmZ1bmN0aW9uIGlzUmVhbCgpIHtcbiAgLy8gQm90aCBkb2N1bWVudCBhbmQgd2luZG93IHdpbGwgbmV2ZXIgYmUgdW5kZWZpbmVkIHRoYW5rcyB0byBgZ2xvYmFsYC5cbiAgcmV0dXJuIGRvY3VtZW50ID09PSB3aW5kb3ckMS5kb2N1bWVudDtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcywgdmlhIGR1Y2sgdHlwaW5nLCB3aGV0aGVyIG9yIG5vdCBhIHZhbHVlIGlzIGEgRE9NIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtICB7TWl4ZWR9IHZhbHVlXG4gKiAgICAgICAgIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogICAgICAgICBXaWxsIGJlIGB0cnVlYCBpZiB0aGUgdmFsdWUgaXMgYSBET00gZWxlbWVudCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cblxuZnVuY3Rpb24gaXNFbCh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3QodmFsdWUpICYmIHZhbHVlLm5vZGVUeXBlID09PSAxO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSBjdXJyZW50IERPTSBpcyBlbWJlZGRlZCBpbiBhbiBpZnJhbWUuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqICAgICAgICAgV2lsbCBiZSBgdHJ1ZWAgaWYgdGhlIERPTSBpcyBlbWJlZGRlZCBpbiBhbiBpZnJhbWUsIGBmYWxzZWBcbiAqICAgICAgICAgb3RoZXJ3aXNlLlxuICovXG5cbmZ1bmN0aW9uIGlzSW5GcmFtZSgpIHtcbiAgLy8gV2UgbmVlZCBhIHRyeS9jYXRjaCBoZXJlIGJlY2F1c2UgU2FmYXJpIHdpbGwgdGhyb3cgZXJyb3JzIHdoZW4gYXR0ZW1wdGluZ1xuICAvLyB0byBnZXQgZWl0aGVyIGBwYXJlbnRgIG9yIGBzZWxmYFxuICB0cnkge1xuICAgIHJldHVybiB3aW5kb3ckMS5wYXJlbnQgIT09IHdpbmRvdyQxLnNlbGY7XG4gIH0gY2F0Y2ggKHgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGZ1bmN0aW9ucyB0byBxdWVyeSB0aGUgRE9NIHVzaW5nIGEgZ2l2ZW4gbWV0aG9kLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0gICB7c3RyaW5nfSBtZXRob2RcbiAqICAgICAgICAgIFRoZSBtZXRob2QgdG8gY3JlYXRlIHRoZSBxdWVyeSB3aXRoLlxuICpcbiAqIEByZXR1cm4gIHtGdW5jdGlvbn1cbiAqICAgICAgICAgIFRoZSBxdWVyeSBtZXRob2RcbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVRdWVyaWVyKG1ldGhvZCkge1xuICByZXR1cm4gZnVuY3Rpb24gKHNlbGVjdG9yLCBjb250ZXh0KSB7XG4gICAgaWYgKCFpc05vbkJsYW5rU3RyaW5nKHNlbGVjdG9yKSkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50W21ldGhvZF0obnVsbCk7XG4gICAgfVxuXG4gICAgaWYgKGlzTm9uQmxhbmtTdHJpbmcoY29udGV4dCkpIHtcbiAgICAgIGNvbnRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRleHQpO1xuICAgIH1cblxuICAgIHZhciBjdHggPSBpc0VsKGNvbnRleHQpID8gY29udGV4dCA6IGRvY3VtZW50O1xuICAgIHJldHVybiBjdHhbbWV0aG9kXSAmJiBjdHhbbWV0aG9kXShzZWxlY3Rvcik7XG4gIH07XG59XG4vKipcbiAqIENyZWF0ZXMgYW4gZWxlbWVudCBhbmQgYXBwbGllcyBwcm9wZXJ0aWVzLCBhdHRyaWJ1dGVzLCBhbmQgaW5zZXJ0cyBjb250ZW50LlxuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gW3RhZ05hbWU9J2RpdiddXG4gKiAgICAgICAgIE5hbWUgb2YgdGFnIHRvIGJlIGNyZWF0ZWQuXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fSBbcHJvcGVydGllcz17fV1cbiAqICAgICAgICAgRWxlbWVudCBwcm9wZXJ0aWVzIHRvIGJlIGFwcGxpZWQuXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fSBbYXR0cmlidXRlcz17fV1cbiAqICAgICAgICAgRWxlbWVudCBhdHRyaWJ1dGVzIHRvIGJlIGFwcGxpZWQuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6ZG9tfkNvbnRlbnREZXNjcmlwdG9yfSBjb250ZW50XG4gKiAgICAgICAgQSBjb250ZW50IGRlc2NyaXB0b3Igb2JqZWN0LlxuICpcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQuXG4gKi9cblxuXG5mdW5jdGlvbiBjcmVhdGVFbCh0YWdOYW1lLCBwcm9wZXJ0aWVzLCBhdHRyaWJ1dGVzLCBjb250ZW50KSB7XG4gIGlmICh0YWdOYW1lID09PSB2b2lkIDApIHtcbiAgICB0YWdOYW1lID0gJ2Rpdic7XG4gIH1cblxuICBpZiAocHJvcGVydGllcyA9PT0gdm9pZCAwKSB7XG4gICAgcHJvcGVydGllcyA9IHt9O1xuICB9XG5cbiAgaWYgKGF0dHJpYnV0ZXMgPT09IHZvaWQgMCkge1xuICAgIGF0dHJpYnV0ZXMgPSB7fTtcbiAgfVxuXG4gIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG4gIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3BlcnRpZXMpLmZvckVhY2goZnVuY3Rpb24gKHByb3BOYW1lKSB7XG4gICAgdmFyIHZhbCA9IHByb3BlcnRpZXNbcHJvcE5hbWVdOyAvLyBTZWUgIzIxNzZcbiAgICAvLyBXZSBvcmlnaW5hbGx5IHdlcmUgYWNjZXB0aW5nIGJvdGggcHJvcGVydGllcyBhbmQgYXR0cmlidXRlcyBpbiB0aGVcbiAgICAvLyBzYW1lIG9iamVjdCwgYnV0IHRoYXQgZG9lc24ndCB3b3JrIHNvIHdlbGwuXG5cbiAgICBpZiAocHJvcE5hbWUuaW5kZXhPZignYXJpYS0nKSAhPT0gLTEgfHwgcHJvcE5hbWUgPT09ICdyb2xlJyB8fCBwcm9wTmFtZSA9PT0gJ3R5cGUnKSB7XG4gICAgICBsb2cud2Fybih0c21sKF90ZW1wbGF0ZU9iamVjdCgpLCBwcm9wTmFtZSwgdmFsKSk7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUocHJvcE5hbWUsIHZhbCk7IC8vIEhhbmRsZSB0ZXh0Q29udGVudCBzaW5jZSBpdCdzIG5vdCBzdXBwb3J0ZWQgZXZlcnl3aGVyZSBhbmQgd2UgaGF2ZSBhXG4gICAgICAvLyBtZXRob2QgZm9yIGl0LlxuICAgIH0gZWxzZSBpZiAocHJvcE5hbWUgPT09ICd0ZXh0Q29udGVudCcpIHtcbiAgICAgIHRleHRDb250ZW50KGVsLCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbFtwcm9wTmFtZV0gPSB2YWw7XG4gICAgfVxuICB9KTtcbiAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoYXR0ck5hbWUpIHtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIGF0dHJpYnV0ZXNbYXR0ck5hbWVdKTtcbiAgfSk7XG5cbiAgaWYgKGNvbnRlbnQpIHtcbiAgICBhcHBlbmRDb250ZW50KGVsLCBjb250ZW50KTtcbiAgfVxuXG4gIHJldHVybiBlbDtcbn1cbi8qKlxuICogSW5qZWN0cyB0ZXh0IGludG8gYW4gZWxlbWVudCwgcmVwbGFjaW5nIGFueSBleGlzdGluZyBjb250ZW50cyBlbnRpcmVseS5cbiAqXG4gKiBAcGFyYW0gIHtFbGVtZW50fSBlbFxuICogICAgICAgICBUaGUgZWxlbWVudCB0byBhZGQgdGV4dCBjb250ZW50IGludG9cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHRleHRcbiAqICAgICAgICAgVGhlIHRleHQgY29udGVudCB0byBhZGQuXG4gKlxuICogQHJldHVybiB7RWxlbWVudH1cbiAqICAgICAgICAgVGhlIGVsZW1lbnQgd2l0aCBhZGRlZCB0ZXh0IGNvbnRlbnQuXG4gKi9cblxuZnVuY3Rpb24gdGV4dENvbnRlbnQoZWwsIHRleHQpIHtcbiAgaWYgKHR5cGVvZiBlbC50ZXh0Q29udGVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBlbC5pbm5lclRleHQgPSB0ZXh0O1xuICB9IGVsc2Uge1xuICAgIGVsLnRleHRDb250ZW50ID0gdGV4dDtcbiAgfVxuXG4gIHJldHVybiBlbDtcbn1cbi8qKlxuICogSW5zZXJ0IGFuIGVsZW1lbnQgYXMgdGhlIGZpcnN0IGNoaWxkIG5vZGUgb2YgYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gY2hpbGRcbiAqICAgICAgICBFbGVtZW50IHRvIGluc2VydFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gcGFyZW50XG4gKiAgICAgICAgRWxlbWVudCB0byBpbnNlcnQgY2hpbGQgaW50b1xuICovXG5cbmZ1bmN0aW9uIHByZXBlbmRUbyhjaGlsZCwgcGFyZW50KSB7XG4gIGlmIChwYXJlbnQuZmlyc3RDaGlsZCkge1xuICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIHBhcmVudC5maXJzdENoaWxkKTtcbiAgfSBlbHNlIHtcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICB9XG59XG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaGFzIGEgY2xhc3MgbmFtZS5cbiAqXG4gKiBAcGFyYW0gIHtFbGVtZW50fSBlbGVtZW50XG4gKiAgICAgICAgIEVsZW1lbnQgdG8gY2hlY2tcbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IGNsYXNzVG9DaGVja1xuICogICAgICAgICBDbGFzcyBuYW1lIHRvIGNoZWNrIGZvclxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiAgICAgICAgIFdpbGwgYmUgYHRydWVgIGlmIHRoZSBlbGVtZW50IGhhcyBhIGNsYXNzLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAdGhyb3dzIHtFcnJvcn1cbiAqICAgICAgICAgVGhyb3dzIGFuIGVycm9yIGlmIGBjbGFzc1RvQ2hlY2tgIGhhcyB3aGl0ZSBzcGFjZS5cbiAqL1xuXG5mdW5jdGlvbiBoYXNDbGFzcyhlbGVtZW50LCBjbGFzc1RvQ2hlY2spIHtcbiAgdGhyb3dJZldoaXRlc3BhY2UoY2xhc3NUb0NoZWNrKTtcblxuICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcbiAgICByZXR1cm4gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NUb0NoZWNrKTtcbiAgfVxuXG4gIHJldHVybiBjbGFzc1JlZ0V4cChjbGFzc1RvQ2hlY2spLnRlc3QoZWxlbWVudC5jbGFzc05hbWUpO1xufVxuLyoqXG4gKiBBZGQgYSBjbGFzcyBuYW1lIHRvIGFuIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtICB7RWxlbWVudH0gZWxlbWVudFxuICogICAgICAgICBFbGVtZW50IHRvIGFkZCBjbGFzcyBuYW1lIHRvLlxuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gY2xhc3NUb0FkZFxuICogICAgICAgICBDbGFzcyBuYW1lIHRvIGFkZC5cbiAqXG4gKiBAcmV0dXJuIHtFbGVtZW50fVxuICogICAgICAgICBUaGUgRE9NIGVsZW1lbnQgd2l0aCB0aGUgYWRkZWQgY2xhc3MgbmFtZS5cbiAqL1xuXG5mdW5jdGlvbiBhZGRDbGFzcyhlbGVtZW50LCBjbGFzc1RvQWRkKSB7XG4gIGlmIChlbGVtZW50LmNsYXNzTGlzdCkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc1RvQWRkKTsgLy8gRG9uJ3QgbmVlZCB0byBgdGhyb3dJZldoaXRlc3BhY2VgIGhlcmUgYmVjYXVzZSBgaGFzRWxDbGFzc2Agd2lsbCBkbyBpdFxuICAgIC8vIGluIHRoZSBjYXNlIG9mIGNsYXNzTGlzdCBub3QgYmVpbmcgc3VwcG9ydGVkLlxuICB9IGVsc2UgaWYgKCFoYXNDbGFzcyhlbGVtZW50LCBjbGFzc1RvQWRkKSkge1xuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gKGVsZW1lbnQuY2xhc3NOYW1lICsgJyAnICsgY2xhc3NUb0FkZCkudHJpbSgpO1xuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG4vKipcbiAqIFJlbW92ZSBhIGNsYXNzIG5hbWUgZnJvbSBhbiBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSAge0VsZW1lbnR9IGVsZW1lbnRcbiAqICAgICAgICAgRWxlbWVudCB0byByZW1vdmUgYSBjbGFzcyBuYW1lIGZyb20uXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBjbGFzc1RvUmVtb3ZlXG4gKiAgICAgICAgIENsYXNzIG5hbWUgdG8gcmVtb3ZlXG4gKlxuICogQHJldHVybiB7RWxlbWVudH1cbiAqICAgICAgICAgVGhlIERPTSBlbGVtZW50IHdpdGggY2xhc3MgbmFtZSByZW1vdmVkLlxuICovXG5cbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsZW1lbnQsIGNsYXNzVG9SZW1vdmUpIHtcbiAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzVG9SZW1vdmUpO1xuICB9IGVsc2Uge1xuICAgIHRocm93SWZXaGl0ZXNwYWNlKGNsYXNzVG9SZW1vdmUpO1xuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoL1xccysvKS5maWx0ZXIoZnVuY3Rpb24gKGMpIHtcbiAgICAgIHJldHVybiBjICE9PSBjbGFzc1RvUmVtb3ZlO1xuICAgIH0pLmpvaW4oJyAnKTtcbiAgfVxuXG4gIHJldHVybiBlbGVtZW50O1xufVxuLyoqXG4gKiBUaGUgY2FsbGJhY2sgZGVmaW5pdGlvbiBmb3IgdG9nZ2xlQ2xhc3MuXG4gKlxuICogQGNhbGxiYWNrIG1vZHVsZTpkb21+UHJlZGljYXRlQ2FsbGJhY2tcbiAqIEBwYXJhbSAgICB7RWxlbWVudH0gZWxlbWVudFxuICogICAgICAgICAgIFRoZSBET00gZWxlbWVudCBvZiB0aGUgQ29tcG9uZW50LlxuICpcbiAqIEBwYXJhbSAgICB7c3RyaW5nfSBjbGFzc1RvVG9nZ2xlXG4gKiAgICAgICAgICAgVGhlIGBjbGFzc05hbWVgIHRoYXQgd2FudHMgdG8gYmUgdG9nZ2xlZFxuICpcbiAqIEByZXR1cm4gICB7Ym9vbGVhbnx1bmRlZmluZWR9XG4gKiAgICAgICAgICAgSWYgYHRydWVgIGlzIHJldHVybmVkLCB0aGUgYGNsYXNzVG9Ub2dnbGVgIHdpbGwgYmUgYWRkZWQgdG8gdGhlXG4gKiAgICAgICAgICAgYGVsZW1lbnRgLiBJZiBgZmFsc2VgLCB0aGUgYGNsYXNzVG9Ub2dnbGVgIHdpbGwgYmUgcmVtb3ZlZCBmcm9tXG4gKiAgICAgICAgICAgdGhlIGBlbGVtZW50YC4gSWYgYHVuZGVmaW5lZGAsIHRoZSBjYWxsYmFjayB3aWxsIGJlIGlnbm9yZWQuXG4gKi9cblxuLyoqXG4gKiBBZGRzIG9yIHJlbW92ZXMgYSBjbGFzcyBuYW1lIHRvL2Zyb20gYW4gZWxlbWVudCBkZXBlbmRpbmcgb24gYW4gb3B0aW9uYWxcbiAqIGNvbmRpdGlvbiBvciB0aGUgcHJlc2VuY2UvYWJzZW5jZSBvZiB0aGUgY2xhc3MgbmFtZS5cbiAqXG4gKiBAcGFyYW0gIHtFbGVtZW50fSBlbGVtZW50XG4gKiAgICAgICAgIFRoZSBlbGVtZW50IHRvIHRvZ2dsZSBhIGNsYXNzIG5hbWUgb24uXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBjbGFzc1RvVG9nZ2xlXG4gKiAgICAgICAgIFRoZSBjbGFzcyB0aGF0IHNob3VsZCBiZSB0b2dnbGVkLlxuICpcbiAqIEBwYXJhbSAge2Jvb2xlYW58bW9kdWxlOmRvbX5QcmVkaWNhdGVDYWxsYmFja30gW3ByZWRpY2F0ZV1cbiAqICAgICAgICAgU2VlIHRoZSByZXR1cm4gdmFsdWUgZm9yIHtAbGluayBtb2R1bGU6ZG9tflByZWRpY2F0ZUNhbGxiYWNrfVxuICpcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKiAgICAgICAgIFRoZSBlbGVtZW50IHdpdGggYSBjbGFzcyB0aGF0IGhhcyBiZWVuIHRvZ2dsZWQuXG4gKi9cblxuZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxlbWVudCwgY2xhc3NUb1RvZ2dsZSwgcHJlZGljYXRlKSB7XG4gIC8vIFRoaXMgQ0FOTk9UIHVzZSBgY2xhc3NMaXN0YCBpbnRlcm5hbGx5IGJlY2F1c2UgSUUxMSBkb2VzIG5vdCBzdXBwb3J0IHRoZVxuICAvLyBzZWNvbmQgcGFyYW1ldGVyIHRvIHRoZSBgY2xhc3NMaXN0LnRvZ2dsZSgpYCBtZXRob2QhIFdoaWNoIGlzIGZpbmUgYmVjYXVzZVxuICAvLyBgY2xhc3NMaXN0YCB3aWxsIGJlIHVzZWQgYnkgdGhlIGFkZC9yZW1vdmUgZnVuY3Rpb25zLlxuICB2YXIgaGFzID0gaGFzQ2xhc3MoZWxlbWVudCwgY2xhc3NUb1RvZ2dsZSk7XG5cbiAgaWYgKHR5cGVvZiBwcmVkaWNhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBwcmVkaWNhdGUgPSBwcmVkaWNhdGUoZWxlbWVudCwgY2xhc3NUb1RvZ2dsZSk7XG4gIH1cblxuICBpZiAodHlwZW9mIHByZWRpY2F0ZSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgcHJlZGljYXRlID0gIWhhcztcbiAgfSAvLyBJZiB0aGUgbmVjZXNzYXJ5IGNsYXNzIG9wZXJhdGlvbiBtYXRjaGVzIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZVxuICAvLyBlbGVtZW50LCBubyBhY3Rpb24gaXMgcmVxdWlyZWQuXG5cblxuICBpZiAocHJlZGljYXRlID09PSBoYXMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAocHJlZGljYXRlKSB7XG4gICAgYWRkQ2xhc3MoZWxlbWVudCwgY2xhc3NUb1RvZ2dsZSk7XG4gIH0gZWxzZSB7XG4gICAgcmVtb3ZlQ2xhc3MoZWxlbWVudCwgY2xhc3NUb1RvZ2dsZSk7XG4gIH1cblxuICByZXR1cm4gZWxlbWVudDtcbn1cbi8qKlxuICogQXBwbHkgYXR0cmlidXRlcyB0byBhbiBIVE1MIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogICAgICAgIEVsZW1lbnQgdG8gYWRkIGF0dHJpYnV0ZXMgdG8uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFthdHRyaWJ1dGVzXVxuICogICAgICAgIEF0dHJpYnV0ZXMgdG8gYmUgYXBwbGllZC5cbiAqL1xuXG5mdW5jdGlvbiBzZXRBdHRyaWJ1dGVzKGVsLCBhdHRyaWJ1dGVzKSB7XG4gIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGF0dHJOYW1lKSB7XG4gICAgdmFyIGF0dHJWYWx1ZSA9IGF0dHJpYnV0ZXNbYXR0ck5hbWVdO1xuXG4gICAgaWYgKGF0dHJWYWx1ZSA9PT0gbnVsbCB8fCB0eXBlb2YgYXR0clZhbHVlID09PSAndW5kZWZpbmVkJyB8fCBhdHRyVmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0ck5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIGF0dHJWYWx1ZSA9PT0gdHJ1ZSA/ICcnIDogYXR0clZhbHVlKTtcbiAgICB9XG4gIH0pO1xufVxuLyoqXG4gKiBHZXQgYW4gZWxlbWVudCdzIGF0dHJpYnV0ZSB2YWx1ZXMsIGFzIGRlZmluZWQgb24gdGhlIEhUTUwgdGFnLlxuICpcbiAqIEF0dHJpYnV0ZXMgYXJlIG5vdCB0aGUgc2FtZSBhcyBwcm9wZXJ0aWVzLiBUaGV5J3JlIGRlZmluZWQgb24gdGhlIHRhZ1xuICogb3Igd2l0aCBzZXRBdHRyaWJ1dGUuXG4gKlxuICogQHBhcmFtICB7RWxlbWVudH0gdGFnXG4gKiAgICAgICAgIEVsZW1lbnQgZnJvbSB3aGljaCB0byBnZXQgdGFnIGF0dHJpYnV0ZXMuXG4gKlxuICogQHJldHVybiB7T2JqZWN0fVxuICogICAgICAgICBBbGwgYXR0cmlidXRlcyBvZiB0aGUgZWxlbWVudC4gQm9vbGVhbiBhdHRyaWJ1dGVzIHdpbGwgYmUgYHRydWVgIG9yXG4gKiAgICAgICAgIGBmYWxzZWAsIG90aGVycyB3aWxsIGJlIHN0cmluZ3MuXG4gKi9cblxuZnVuY3Rpb24gZ2V0QXR0cmlidXRlcyh0YWcpIHtcbiAgdmFyIG9iaiA9IHt9OyAvLyBrbm93biBib29sZWFuIGF0dHJpYnV0ZXNcbiAgLy8gd2UgY2FuIGNoZWNrIGZvciBtYXRjaGluZyBib29sZWFuIHByb3BlcnRpZXMsIGJ1dCBub3QgYWxsIGJyb3dzZXJzXG4gIC8vIGFuZCBub3QgYWxsIHRhZ3Mga25vdyBhYm91dCB0aGVzZSBhdHRyaWJ1dGVzLCBzbywgd2Ugc3RpbGwgd2FudCB0byBjaGVjayB0aGVtIG1hbnVhbGx5XG5cbiAgdmFyIGtub3duQm9vbGVhbnMgPSAnLCcgKyAnYXV0b3BsYXksY29udHJvbHMscGxheXNpbmxpbmUsbG9vcCxtdXRlZCxkZWZhdWx0LGRlZmF1bHRNdXRlZCcgKyAnLCc7XG5cbiAgaWYgKHRhZyAmJiB0YWcuYXR0cmlidXRlcyAmJiB0YWcuYXR0cmlidXRlcy5sZW5ndGggPiAwKSB7XG4gICAgdmFyIGF0dHJzID0gdGFnLmF0dHJpYnV0ZXM7XG5cbiAgICBmb3IgKHZhciBpID0gYXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBhdHRyTmFtZSA9IGF0dHJzW2ldLm5hbWU7XG4gICAgICB2YXIgYXR0clZhbCA9IGF0dHJzW2ldLnZhbHVlOyAvLyBjaGVjayBmb3Iga25vd24gYm9vbGVhbnNcbiAgICAgIC8vIHRoZSBtYXRjaGluZyBlbGVtZW50IHByb3BlcnR5IHdpbGwgcmV0dXJuIGEgdmFsdWUgZm9yIHR5cGVvZlxuXG4gICAgICBpZiAodHlwZW9mIHRhZ1thdHRyTmFtZV0gPT09ICdib29sZWFuJyB8fCBrbm93bkJvb2xlYW5zLmluZGV4T2YoJywnICsgYXR0ck5hbWUgKyAnLCcpICE9PSAtMSkge1xuICAgICAgICAvLyB0aGUgdmFsdWUgb2YgYW4gaW5jbHVkZWQgYm9vbGVhbiBhdHRyaWJ1dGUgaXMgdHlwaWNhbGx5IGFuIGVtcHR5XG4gICAgICAgIC8vIHN0cmluZyAoJycpIHdoaWNoIHdvdWxkIGVxdWFsIGZhbHNlIGlmIHdlIGp1c3QgY2hlY2sgZm9yIGEgZmFsc2UgdmFsdWUuXG4gICAgICAgIC8vIHdlIGFsc28gZG9uJ3Qgd2FudCBzdXBwb3J0IGJhZCBjb2RlIGxpa2UgYXV0b3BsYXk9J2ZhbHNlJ1xuICAgICAgICBhdHRyVmFsID0gYXR0clZhbCAhPT0gbnVsbCA/IHRydWUgOiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgb2JqW2F0dHJOYW1lXSA9IGF0dHJWYWw7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cbi8qKlxuICogR2V0IHRoZSB2YWx1ZSBvZiBhbiBlbGVtZW50J3MgYXR0cmlidXRlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqICAgICAgICBBIERPTSBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVcbiAqICAgICAgICBBdHRyaWJ1dGUgdG8gZ2V0IHRoZSB2YWx1ZSBvZi5cbiAqXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiAgICAgICAgIFRoZSB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlLlxuICovXG5cbmZ1bmN0aW9uIGdldEF0dHJpYnV0ZShlbCwgYXR0cmlidXRlKSB7XG4gIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbn1cbi8qKlxuICogU2V0IHRoZSB2YWx1ZSBvZiBhbiBlbGVtZW50J3MgYXR0cmlidXRlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqICAgICAgICBBIERPTSBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVcbiAqICAgICAgICBBdHRyaWJ1dGUgdG8gc2V0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogICAgICAgIFZhbHVlIHRvIHNldCB0aGUgYXR0cmlidXRlIHRvLlxuICovXG5cbmZ1bmN0aW9uIHNldEF0dHJpYnV0ZShlbCwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICBlbC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCB2YWx1ZSk7XG59XG4vKipcbiAqIFJlbW92ZSBhbiBlbGVtZW50J3MgYXR0cmlidXRlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqICAgICAgICBBIERPTSBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVcbiAqICAgICAgICBBdHRyaWJ1dGUgdG8gcmVtb3ZlLlxuICovXG5cbmZ1bmN0aW9uIHJlbW92ZUF0dHJpYnV0ZShlbCwgYXR0cmlidXRlKSB7XG4gIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xufVxuLyoqXG4gKiBBdHRlbXB0IHRvIGJsb2NrIHRoZSBhYmlsaXR5IHRvIHNlbGVjdCB0ZXh0LlxuICovXG5cbmZ1bmN0aW9uIGJsb2NrVGV4dFNlbGVjdGlvbigpIHtcbiAgZG9jdW1lbnQuYm9keS5mb2N1cygpO1xuXG4gIGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xufVxuLyoqXG4gKiBUdXJuIG9mZiB0ZXh0IHNlbGVjdGlvbiBibG9ja2luZy5cbiAqL1xuXG5mdW5jdGlvbiB1bmJsb2NrVGV4dFNlbGVjdGlvbigpIHtcbiAgZG9jdW1lbnQub25zZWxlY3RzdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbn1cbi8qKlxuICogSWRlbnRpY2FsIHRvIHRoZSBuYXRpdmUgYGdldEJvdW5kaW5nQ2xpZW50UmVjdGAgZnVuY3Rpb24sIGJ1dCBlbnN1cmVzIHRoYXRcbiAqIHRoZSBtZXRob2QgaXMgc3VwcG9ydGVkIGF0IGFsbCAoaXQgaXMgaW4gYWxsIGJyb3dzZXJzIHdlIGNsYWltIHRvIHN1cHBvcnQpXG4gKiBhbmQgdGhhdCB0aGUgZWxlbWVudCBpcyBpbiB0aGUgRE9NIGJlZm9yZSBjb250aW51aW5nLlxuICpcbiAqIFRoaXMgd3JhcHBlciBmdW5jdGlvbiBhbHNvIHNoaW1zIHByb3BlcnRpZXMgd2hpY2ggYXJlIG5vdCBwcm92aWRlZCBieSBzb21lXG4gKiBvbGRlciBicm93c2VycyAobmFtZWx5LCBJRTgpLlxuICpcbiAqIEFkZGl0aW9uYWxseSwgc29tZSBicm93c2VycyBkbyBub3Qgc3VwcG9ydCBhZGRpbmcgcHJvcGVydGllcyB0byBhXG4gKiBgQ2xpZW50UmVjdGAvYERPTVJlY3RgIG9iamVjdDsgc28sIHdlIHNoYWxsb3ctY29weSBpdCB3aXRoIHRoZSBzdGFuZGFyZFxuICogcHJvcGVydGllcyAoZXhjZXB0IGB4YCBhbmQgYHlgIHdoaWNoIGFyZSBub3Qgd2lkZWx5IHN1cHBvcnRlZCkuIFRoaXMgaGVscHNcbiAqIGF2b2lkIGltcGxlbWVudGF0aW9ucyB3aGVyZSBrZXlzIGFyZSBub24tZW51bWVyYWJsZS5cbiAqXG4gKiBAcGFyYW0gIHtFbGVtZW50fSBlbFxuICogICAgICAgICBFbGVtZW50IHdob3NlIGBDbGllbnRSZWN0YCB3ZSB3YW50IHRvIGNhbGN1bGF0ZS5cbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuICogICAgICAgICBBbHdheXMgcmV0dXJucyBhIHBsYWluIG9iamVjdCAtIG9yIGB1bmRlZmluZWRgIGlmIGl0IGNhbm5vdC5cbiAqL1xuXG5mdW5jdGlvbiBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWwpIHtcbiAgaWYgKGVsICYmIGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCAmJiBlbC5wYXJlbnROb2RlKSB7XG4gICAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgWydib3R0b20nLCAnaGVpZ2h0JywgJ2xlZnQnLCAncmlnaHQnLCAndG9wJywgJ3dpZHRoJ10uZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgaWYgKHJlY3Rba10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXN1bHRba10gPSByZWN0W2tdO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXN1bHQuaGVpZ2h0KSB7XG4gICAgICByZXN1bHQuaGVpZ2h0ID0gcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlKGVsLCAnaGVpZ2h0JykpO1xuICAgIH1cblxuICAgIGlmICghcmVzdWx0LndpZHRoKSB7XG4gICAgICByZXN1bHQud2lkdGggPSBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGUoZWwsICd3aWR0aCcpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIHBvc2l0aW9uIG9mIGEgRE9NIGVsZW1lbnQgb24gdGhlIHBhZ2UuXG4gKlxuICogQHR5cGVkZWYgIHtPYmplY3R9IG1vZHVsZTpkb21+UG9zaXRpb25cbiAqXG4gKiBAcHJvcGVydHkge251bWJlcn0gbGVmdFxuICogICAgICAgICAgIFBpeGVscyB0byB0aGUgbGVmdC5cbiAqXG4gKiBAcHJvcGVydHkge251bWJlcn0gdG9wXG4gKiAgICAgICAgICAgUGl4ZWxzIGZyb20gdGhlIHRvcC5cbiAqL1xuXG4vKipcbiAqIEdldCB0aGUgcG9zaXRpb24gb2YgYW4gZWxlbWVudCBpbiB0aGUgRE9NLlxuICpcbiAqIFVzZXMgYGdldEJvdW5kaW5nQ2xpZW50UmVjdGAgdGVjaG5pcXVlIGZyb20gSm9obiBSZXNpZy5cbiAqXG4gKiBAc2VlIGh0dHA6Ly9lam9obi5vcmcvYmxvZy9nZXRib3VuZGluZ2NsaWVudHJlY3QtaXMtYXdlc29tZS9cbiAqXG4gKiBAcGFyYW0gIHtFbGVtZW50fSBlbFxuICogICAgICAgICBFbGVtZW50IGZyb20gd2hpY2ggdG8gZ2V0IG9mZnNldC5cbiAqXG4gKiBAcmV0dXJuIHttb2R1bGU6ZG9tflBvc2l0aW9ufVxuICogICAgICAgICBUaGUgcG9zaXRpb24gb2YgdGhlIGVsZW1lbnQgdGhhdCB3YXMgcGFzc2VkIGluLlxuICovXG5cbmZ1bmN0aW9uIGZpbmRQb3NpdGlvbihlbCkge1xuICB2YXIgYm94O1xuXG4gIGlmIChlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QgJiYgZWwucGFyZW50Tm9kZSkge1xuICAgIGJveCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB9XG5cbiAgaWYgKCFib3gpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGVmdDogMCxcbiAgICAgIHRvcDogMFxuICAgIH07XG4gIH1cblxuICB2YXIgZG9jRWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcbiAgdmFyIGNsaWVudExlZnQgPSBkb2NFbC5jbGllbnRMZWZ0IHx8IGJvZHkuY2xpZW50TGVmdCB8fCAwO1xuICB2YXIgc2Nyb2xsTGVmdCA9IHdpbmRvdyQxLnBhZ2VYT2Zmc2V0IHx8IGJvZHkuc2Nyb2xsTGVmdDtcbiAgdmFyIGxlZnQgPSBib3gubGVmdCArIHNjcm9sbExlZnQgLSBjbGllbnRMZWZ0O1xuICB2YXIgY2xpZW50VG9wID0gZG9jRWwuY2xpZW50VG9wIHx8IGJvZHkuY2xpZW50VG9wIHx8IDA7XG4gIHZhciBzY3JvbGxUb3AgPSB3aW5kb3ckMS5wYWdlWU9mZnNldCB8fCBib2R5LnNjcm9sbFRvcDtcbiAgdmFyIHRvcCA9IGJveC50b3AgKyBzY3JvbGxUb3AgLSBjbGllbnRUb3A7IC8vIEFuZHJvaWQgc29tZXRpbWVzIHJldHVybnMgc2xpZ2h0bHkgb2ZmIGRlY2ltYWwgdmFsdWVzLCBzbyBuZWVkIHRvIHJvdW5kXG5cbiAgcmV0dXJuIHtcbiAgICBsZWZ0OiBNYXRoLnJvdW5kKGxlZnQpLFxuICAgIHRvcDogTWF0aC5yb3VuZCh0b3ApXG4gIH07XG59XG4vKipcbiAqIFJlcHJlc2VudHMgeCBhbmQgeSBjb29yZGluYXRlcyBmb3IgYSBET00gZWxlbWVudCBvciBtb3VzZSBwb2ludGVyLlxuICpcbiAqIEB0eXBlZGVmICB7T2JqZWN0fSBtb2R1bGU6ZG9tfkNvb3JkaW5hdGVzXG4gKlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHhcbiAqICAgICAgICAgICB4IGNvb3JkaW5hdGUgaW4gcGl4ZWxzXG4gKlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHlcbiAqICAgICAgICAgICB5IGNvb3JkaW5hdGUgaW4gcGl4ZWxzXG4gKi9cblxuLyoqXG4gKiBHZXQgdGhlIHBvaW50ZXIgcG9zaXRpb24gd2l0aGluIGFuIGVsZW1lbnQuXG4gKlxuICogVGhlIGJhc2Ugb24gdGhlIGNvb3JkaW5hdGVzIGFyZSB0aGUgYm90dG9tIGxlZnQgb2YgdGhlIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtICB7RWxlbWVudH0gZWxcbiAqICAgICAgICAgRWxlbWVudCBvbiB3aGljaCB0byBnZXQgdGhlIHBvaW50ZXIgcG9zaXRpb24gb24uXG4gKlxuICogQHBhcmFtICB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gKiAgICAgICAgIEV2ZW50IG9iamVjdC5cbiAqXG4gKiBAcmV0dXJuIHttb2R1bGU6ZG9tfkNvb3JkaW5hdGVzfVxuICogICAgICAgICBBIGNvb3JkaW5hdGVzIG9iamVjdCBjb3JyZXNwb25kaW5nIHRvIHRoZSBtb3VzZSBwb3NpdGlvbi5cbiAqXG4gKi9cblxuZnVuY3Rpb24gZ2V0UG9pbnRlclBvc2l0aW9uKGVsLCBldmVudCkge1xuICB2YXIgcG9zaXRpb24gPSB7fTtcbiAgdmFyIGJveCA9IGZpbmRQb3NpdGlvbihlbCk7XG4gIHZhciBib3hXID0gZWwub2Zmc2V0V2lkdGg7XG4gIHZhciBib3hIID0gZWwub2Zmc2V0SGVpZ2h0O1xuICB2YXIgYm94WSA9IGJveC50b3A7XG4gIHZhciBib3hYID0gYm94LmxlZnQ7XG4gIHZhciBwYWdlWSA9IGV2ZW50LnBhZ2VZO1xuICB2YXIgcGFnZVggPSBldmVudC5wYWdlWDtcblxuICBpZiAoZXZlbnQuY2hhbmdlZFRvdWNoZXMpIHtcbiAgICBwYWdlWCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYO1xuICAgIHBhZ2VZID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVk7XG4gIH1cblxuICBwb3NpdGlvbi55ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgKGJveFkgLSBwYWdlWSArIGJveEgpIC8gYm94SCkpO1xuICBwb3NpdGlvbi54ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgKHBhZ2VYIC0gYm94WCkgLyBib3hXKSk7XG4gIHJldHVybiBwb3NpdGlvbjtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcywgdmlhIGR1Y2sgdHlwaW5nLCB3aGV0aGVyIG9yIG5vdCBhIHZhbHVlIGlzIGEgdGV4dCBub2RlLlxuICpcbiAqIEBwYXJhbSAge01peGVkfSB2YWx1ZVxuICogICAgICAgICBDaGVjayBpZiB0aGlzIHZhbHVlIGlzIGEgdGV4dCBub2RlLlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiAgICAgICAgIFdpbGwgYmUgYHRydWVgIGlmIHRoZSB2YWx1ZSBpcyBhIHRleHQgbm9kZSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cblxuZnVuY3Rpb24gaXNUZXh0Tm9kZSh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3QodmFsdWUpICYmIHZhbHVlLm5vZGVUeXBlID09PSAzO1xufVxuLyoqXG4gKiBFbXB0aWVzIHRoZSBjb250ZW50cyBvZiBhbiBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSAge0VsZW1lbnR9IGVsXG4gKiAgICAgICAgIFRoZSBlbGVtZW50IHRvIGVtcHR5IGNoaWxkcmVuIGZyb21cbiAqXG4gKiBAcmV0dXJuIHtFbGVtZW50fVxuICogICAgICAgICBUaGUgZWxlbWVudCB3aXRoIG5vIGNoaWxkcmVuXG4gKi9cblxuZnVuY3Rpb24gZW1wdHlFbChlbCkge1xuICB3aGlsZSAoZWwuZmlyc3RDaGlsZCkge1xuICAgIGVsLnJlbW92ZUNoaWxkKGVsLmZpcnN0Q2hpbGQpO1xuICB9XG5cbiAgcmV0dXJuIGVsO1xufVxuLyoqXG4gKiBUaGlzIGlzIGEgbWl4ZWQgdmFsdWUgdGhhdCBkZXNjcmliZXMgY29udGVudCB0byBiZSBpbmplY3RlZCBpbnRvIHRoZSBET01cbiAqIHZpYSBzb21lIG1ldGhvZC4gSXQgY2FuIGJlIG9mIHRoZSBmb2xsb3dpbmcgdHlwZXM6XG4gKlxuICogVHlwZSAgICAgICB8IERlc2NyaXB0aW9uXG4gKiAtLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tXG4gKiBgc3RyaW5nYCAgIHwgVGhlIHZhbHVlIHdpbGwgYmUgbm9ybWFsaXplZCBpbnRvIGEgdGV4dCBub2RlLlxuICogYEVsZW1lbnRgICB8IFRoZSB2YWx1ZSB3aWxsIGJlIGFjY2VwdGVkIGFzLWlzLlxuICogYFRleHROb2RlYCB8IFRoZSB2YWx1ZSB3aWxsIGJlIGFjY2VwdGVkIGFzLWlzLlxuICogYEFycmF5YCAgICB8IEEgb25lLWRpbWVuc2lvbmFsIGFycmF5IG9mIHN0cmluZ3MsIGVsZW1lbnRzLCB0ZXh0IG5vZGVzLCBvciBmdW5jdGlvbnMuIFRoZXNlIGZ1bmN0aW9ucyBzaG91bGQgcmV0dXJuIGEgc3RyaW5nLCBlbGVtZW50LCBvciB0ZXh0IG5vZGUgKGFueSBvdGhlciByZXR1cm4gdmFsdWUsIGxpa2UgYW4gYXJyYXksIHdpbGwgYmUgaWdub3JlZCkuXG4gKiBgRnVuY3Rpb25gIHwgQSBmdW5jdGlvbiwgd2hpY2ggaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIGEgc3RyaW5nLCBlbGVtZW50LCB0ZXh0IG5vZGUsIG9yIGFycmF5IC0gYW55IG9mIHRoZSBvdGhlciBwb3NzaWJsZSB2YWx1ZXMgZGVzY3JpYmVkIGFib3ZlLiBUaGlzIG1lYW5zIHRoYXQgYSBjb250ZW50IGRlc2NyaXB0b3IgY291bGQgYmUgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gYXJyYXkgb2YgZnVuY3Rpb25zLCBidXQgdGhvc2Ugc2Vjb25kLWxldmVsIGZ1bmN0aW9ucyBtdXN0IHJldHVybiBzdHJpbmdzLCBlbGVtZW50cywgb3IgdGV4dCBub2Rlcy5cbiAqXG4gKiBAdHlwZWRlZiB7c3RyaW5nfEVsZW1lbnR8VGV4dE5vZGV8QXJyYXl8RnVuY3Rpb259IG1vZHVsZTpkb21+Q29udGVudERlc2NyaXB0b3JcbiAqL1xuXG4vKipcbiAqIE5vcm1hbGl6ZXMgY29udGVudCBmb3IgZXZlbnR1YWwgaW5zZXJ0aW9uIGludG8gdGhlIERPTS5cbiAqXG4gKiBUaGlzIGFsbG93cyBhIHdpZGUgcmFuZ2Ugb2YgY29udGVudCBkZWZpbml0aW9uIG1ldGhvZHMsIGJ1dCBoZWxwcyBwcm90ZWN0XG4gKiBmcm9tIGZhbGxpbmcgaW50byB0aGUgdHJhcCBvZiBzaW1wbHkgd3JpdGluZyB0byBgaW5uZXJIVE1MYCwgd2hpY2ggY291bGRcbiAqIGJlIGFuIFhTUyBjb25jZXJuLlxuICpcbiAqIFRoZSBjb250ZW50IGZvciBhbiBlbGVtZW50IGNhbiBiZSBwYXNzZWQgaW4gbXVsdGlwbGUgdHlwZXMgYW5kXG4gKiBjb21iaW5hdGlvbnMsIHdob3NlIGJlaGF2aW9yIGlzIGFzIGZvbGxvd3M6XG4gKlxuICogQHBhcmFtIHttb2R1bGU6ZG9tfkNvbnRlbnREZXNjcmlwdG9yfSBjb250ZW50XG4gKiAgICAgICAgQSBjb250ZW50IGRlc2NyaXB0b3IgdmFsdWUuXG4gKlxuICogQHJldHVybiB7QXJyYXl9XG4gKiAgICAgICAgIEFsbCBvZiB0aGUgY29udGVudCB0aGF0IHdhcyBwYXNzZWQgaW4sIG5vcm1hbGl6ZWQgdG8gYW4gYXJyYXkgb2ZcbiAqICAgICAgICAgZWxlbWVudHMgb3IgdGV4dCBub2Rlcy5cbiAqL1xuXG5mdW5jdGlvbiBub3JtYWxpemVDb250ZW50KGNvbnRlbnQpIHtcbiAgLy8gRmlyc3QsIGludm9rZSBjb250ZW50IGlmIGl0IGlzIGEgZnVuY3Rpb24uIElmIGl0IHByb2R1Y2VzIGFuIGFycmF5LFxuICAvLyB0aGF0IG5lZWRzIHRvIGhhcHBlbiBiZWZvcmUgbm9ybWFsaXphdGlvbi5cbiAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY29udGVudCA9IGNvbnRlbnQoKTtcbiAgfSAvLyBOZXh0IHVwLCBub3JtYWxpemUgdG8gYW4gYXJyYXksIHNvIG9uZSBvciBtYW55IGl0ZW1zIGNhbiBiZSBub3JtYWxpemVkLFxuICAvLyBmaWx0ZXJlZCwgYW5kIHJldHVybmVkLlxuXG5cbiAgcmV0dXJuIChBcnJheS5pc0FycmF5KGNvbnRlbnQpID8gY29udGVudCA6IFtjb250ZW50XSkubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIC8vIEZpcnN0LCBpbnZva2UgdmFsdWUgaWYgaXQgaXMgYSBmdW5jdGlvbiB0byBwcm9kdWNlIGEgbmV3IHZhbHVlLFxuICAgIC8vIHdoaWNoIHdpbGwgYmUgc3Vic2VxdWVudGx5IG5vcm1hbGl6ZWQgdG8gYSBOb2RlIG9mIHNvbWUga2luZC5cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlKCk7XG4gICAgfVxuXG4gICAgaWYgKGlzRWwodmFsdWUpIHx8IGlzVGV4dE5vZGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgL1xcUy8udGVzdCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh2YWx1ZSk7XG4gICAgfVxuICB9KS5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9KTtcbn1cbi8qKlxuICogTm9ybWFsaXplcyBhbmQgYXBwZW5kcyBjb250ZW50IHRvIGFuIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtICB7RWxlbWVudH0gZWxcbiAqICAgICAgICAgRWxlbWVudCB0byBhcHBlbmQgbm9ybWFsaXplZCBjb250ZW50IHRvLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOmRvbX5Db250ZW50RGVzY3JpcHRvcn0gY29udGVudFxuICogICAgICAgIEEgY29udGVudCBkZXNjcmlwdG9yIHZhbHVlLlxuICpcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKiAgICAgICAgIFRoZSBlbGVtZW50IHdpdGggYXBwZW5kZWQgbm9ybWFsaXplZCBjb250ZW50LlxuICovXG5cbmZ1bmN0aW9uIGFwcGVuZENvbnRlbnQoZWwsIGNvbnRlbnQpIHtcbiAgbm9ybWFsaXplQ29udGVudChjb250ZW50KS5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgcmV0dXJuIGVsLmFwcGVuZENoaWxkKG5vZGUpO1xuICB9KTtcbiAgcmV0dXJuIGVsO1xufVxuLyoqXG4gKiBOb3JtYWxpemVzIGFuZCBpbnNlcnRzIGNvbnRlbnQgaW50byBhbiBlbGVtZW50OyB0aGlzIGlzIGlkZW50aWNhbCB0b1xuICogYGFwcGVuZENvbnRlbnQoKWAsIGV4Y2VwdCBpdCBlbXB0aWVzIHRoZSBlbGVtZW50IGZpcnN0LlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqICAgICAgICBFbGVtZW50IHRvIGluc2VydCBub3JtYWxpemVkIGNvbnRlbnQgaW50by5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpkb21+Q29udGVudERlc2NyaXB0b3J9IGNvbnRlbnRcbiAqICAgICAgICBBIGNvbnRlbnQgZGVzY3JpcHRvciB2YWx1ZS5cbiAqXG4gKiBAcmV0dXJuIHtFbGVtZW50fVxuICogICAgICAgICBUaGUgZWxlbWVudCB3aXRoIGluc2VydGVkIG5vcm1hbGl6ZWQgY29udGVudC5cbiAqL1xuXG5mdW5jdGlvbiBpbnNlcnRDb250ZW50KGVsLCBjb250ZW50KSB7XG4gIHJldHVybiBhcHBlbmRDb250ZW50KGVtcHR5RWwoZWwpLCBjb250ZW50KTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgYW4gZXZlbnQgd2FzIGEgc2luZ2xlIGxlZnQgY2xpY2suXG4gKlxuICogQHBhcmFtICB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gKiAgICAgICAgIEV2ZW50IG9iamVjdC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogICAgICAgICBXaWxsIGJlIGB0cnVlYCBpZiBhIHNpbmdsZSBsZWZ0IGNsaWNrLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqL1xuXG5mdW5jdGlvbiBpc1NpbmdsZUxlZnRDbGljayhldmVudCkge1xuICAvLyBOb3RlOiBpZiB5b3UgY3JlYXRlIHNvbWV0aGluZyBkcmFnZ2FibGUsIGJlIHN1cmUgdG9cbiAgLy8gY2FsbCBpdCBvbiBib3RoIGBtb3VzZWRvd25gIGFuZCBgbW91c2Vtb3ZlYCBldmVudCxcbiAgLy8gb3RoZXJ3aXNlIGBtb3VzZWRvd25gIHNob3VsZCBiZSBlbm91Z2ggZm9yIGEgYnV0dG9uXG4gIGlmIChldmVudC5idXR0b24gPT09IHVuZGVmaW5lZCAmJiBldmVudC5idXR0b25zID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBXaHkgZG8gd2UgbmVlZCBgYnV0dG9uc2AgP1xuICAgIC8vIEJlY2F1c2UsIG1pZGRsZSBtb3VzZSBzb21ldGltZXMgaGF2ZSB0aGlzOlxuICAgIC8vIGUuYnV0dG9uID09PSAwIGFuZCBlLmJ1dHRvbnMgPT09IDRcbiAgICAvLyBGdXJ0aGVybW9yZSwgd2Ugd2FudCB0byBwcmV2ZW50IGNvbWJpbmF0aW9uIGNsaWNrLCBzb21ldGhpbmcgbGlrZVxuICAgIC8vIEhPTEQgbWlkZGxlbW91c2UgdGhlbiBsZWZ0IGNsaWNrLCB0aGF0IHdvdWxkIGJlXG4gICAgLy8gZS5idXR0b24gPT09IDAsIGUuYnV0dG9ucyA9PT0gNVxuICAgIC8vIGp1c3QgYGJ1dHRvbmAgaXMgbm90IGdvbm5hIHdvcmtcbiAgICAvLyBBbHJpZ2h0LCB0aGVuIHdoYXQgdGhpcyBibG9jayBkb2VzID9cbiAgICAvLyB0aGlzIGlzIGZvciBjaHJvbWUgYHNpbXVsYXRlIG1vYmlsZSBkZXZpY2VzYFxuICAgIC8vIEkgd2FudCB0byBzdXBwb3J0IHRoaXMgYXMgd2VsbFxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMCAmJiBldmVudC5idXR0b25zID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBUb3VjaCBzY3JlZW4sIHNvbWV0aW1lcyBvbiBzb21lIHNwZWNpZmljIGRldmljZSwgYGJ1dHRvbnNgXG4gICAgLy8gZG9lc24ndCBoYXZlIGFueXRoaW5nIChzYWZhcmkgb24gaW9zLCBibGFja2JlcnJ5Li4uKVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKGV2ZW50LmJ1dHRvbiAhPT0gMCB8fCBldmVudC5idXR0b25zICE9PSAxKSB7XG4gICAgLy8gVGhpcyBpcyB0aGUgcmVhc29uIHdlIGhhdmUgdGhvc2UgaWYgZWxzZSBibG9jayBhYm92ZVxuICAgIC8vIGlmIGFueSBzcGVjaWFsIGNhc2Ugd2UgY2FuIGNhdGNoIGFuZCBsZXQgaXQgc2xpZGVcbiAgICAvLyB3ZSBkbyBpdCBhYm92ZSwgd2hlbiBnZXQgdG8gaGVyZSwgdGhpcyBkZWZpbml0ZWx5XG4gICAgLy8gaXMtbm90LWxlZnQtY2xpY2tcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogRmluZHMgYSBzaW5nbGUgRE9NIGVsZW1lbnQgbWF0Y2hpbmcgYHNlbGVjdG9yYCB3aXRoaW4gdGhlIG9wdGlvbmFsXG4gKiBgY29udGV4dGAgb2YgYW5vdGhlciBET00gZWxlbWVudCAoZGVmYXVsdGluZyB0byBgZG9jdW1lbnRgKS5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHNlbGVjdG9yXG4gKiAgICAgICAgIEEgdmFsaWQgQ1NTIHNlbGVjdG9yLCB3aGljaCB3aWxsIGJlIHBhc3NlZCB0byBgcXVlcnlTZWxlY3RvcmAuXG4gKlxuICogQHBhcmFtICB7RWxlbWVudHxTdHJpbmd9IFtjb250ZXh0PWRvY3VtZW50XVxuICogICAgICAgICBBIERPTSBlbGVtZW50IHdpdGhpbiB3aGljaCB0byBxdWVyeS4gQ2FuIGFsc28gYmUgYSBzZWxlY3RvclxuICogICAgICAgICBzdHJpbmcgaW4gd2hpY2ggY2FzZSB0aGUgZmlyc3QgbWF0Y2hpbmcgZWxlbWVudCB3aWxsIGJlIHVzZWRcbiAqICAgICAgICAgYXMgY29udGV4dC4gSWYgbWlzc2luZyAob3Igbm8gZWxlbWVudCBtYXRjaGVzIHNlbGVjdG9yKSwgZmFsbHNcbiAqICAgICAgICAgYmFjayB0byBgZG9jdW1lbnRgLlxuICpcbiAqIEByZXR1cm4ge0VsZW1lbnR8bnVsbH1cbiAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgZm91bmQgb3IgbnVsbC5cbiAqL1xuXG52YXIgJCA9IGNyZWF0ZVF1ZXJpZXIoJ3F1ZXJ5U2VsZWN0b3InKTtcbi8qKlxuICogRmluZHMgYSBhbGwgRE9NIGVsZW1lbnRzIG1hdGNoaW5nIGBzZWxlY3RvcmAgd2l0aGluIHRoZSBvcHRpb25hbFxuICogYGNvbnRleHRgIG9mIGFub3RoZXIgRE9NIGVsZW1lbnQgKGRlZmF1bHRpbmcgdG8gYGRvY3VtZW50YCkuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBzZWxlY3RvclxuICogICAgICAgICBBIHZhbGlkIENTUyBzZWxlY3Rvciwgd2hpY2ggd2lsbCBiZSBwYXNzZWQgdG8gYHF1ZXJ5U2VsZWN0b3JBbGxgLlxuICpcbiAqIEBwYXJhbSAge0VsZW1lbnR8U3RyaW5nfSBbY29udGV4dD1kb2N1bWVudF1cbiAqICAgICAgICAgQSBET00gZWxlbWVudCB3aXRoaW4gd2hpY2ggdG8gcXVlcnkuIENhbiBhbHNvIGJlIGEgc2VsZWN0b3JcbiAqICAgICAgICAgc3RyaW5nIGluIHdoaWNoIGNhc2UgdGhlIGZpcnN0IG1hdGNoaW5nIGVsZW1lbnQgd2lsbCBiZSB1c2VkXG4gKiAgICAgICAgIGFzIGNvbnRleHQuIElmIG1pc3NpbmcgKG9yIG5vIGVsZW1lbnQgbWF0Y2hlcyBzZWxlY3RvciksIGZhbGxzXG4gKiAgICAgICAgIGJhY2sgdG8gYGRvY3VtZW50YC5cbiAqXG4gKiBAcmV0dXJuIHtOb2RlTGlzdH1cbiAqICAgICAgICAgQSBlbGVtZW50IGxpc3Qgb2YgZWxlbWVudHMgdGhhdCB3ZXJlIGZvdW5kLiBXaWxsIGJlIGVtcHR5IGlmIG5vbmVcbiAqICAgICAgICAgd2VyZSBmb3VuZC5cbiAqXG4gKi9cblxudmFyICQkID0gY3JlYXRlUXVlcmllcigncXVlcnlTZWxlY3RvckFsbCcpO1xuXG52YXIgRG9tID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBpc1JlYWw6IGlzUmVhbCxcbiAgaXNFbDogaXNFbCxcbiAgaXNJbkZyYW1lOiBpc0luRnJhbWUsXG4gIGNyZWF0ZUVsOiBjcmVhdGVFbCxcbiAgdGV4dENvbnRlbnQ6IHRleHRDb250ZW50LFxuICBwcmVwZW5kVG86IHByZXBlbmRUbyxcbiAgaGFzQ2xhc3M6IGhhc0NsYXNzLFxuICBhZGRDbGFzczogYWRkQ2xhc3MsXG4gIHJlbW92ZUNsYXNzOiByZW1vdmVDbGFzcyxcbiAgdG9nZ2xlQ2xhc3M6IHRvZ2dsZUNsYXNzLFxuICBzZXRBdHRyaWJ1dGVzOiBzZXRBdHRyaWJ1dGVzLFxuICBnZXRBdHRyaWJ1dGVzOiBnZXRBdHRyaWJ1dGVzLFxuICBnZXRBdHRyaWJ1dGU6IGdldEF0dHJpYnV0ZSxcbiAgc2V0QXR0cmlidXRlOiBzZXRBdHRyaWJ1dGUsXG4gIHJlbW92ZUF0dHJpYnV0ZTogcmVtb3ZlQXR0cmlidXRlLFxuICBibG9ja1RleHRTZWxlY3Rpb246IGJsb2NrVGV4dFNlbGVjdGlvbixcbiAgdW5ibG9ja1RleHRTZWxlY3Rpb246IHVuYmxvY2tUZXh0U2VsZWN0aW9uLFxuICBnZXRCb3VuZGluZ0NsaWVudFJlY3Q6IGdldEJvdW5kaW5nQ2xpZW50UmVjdCxcbiAgZmluZFBvc2l0aW9uOiBmaW5kUG9zaXRpb24sXG4gIGdldFBvaW50ZXJQb3NpdGlvbjogZ2V0UG9pbnRlclBvc2l0aW9uLFxuICBpc1RleHROb2RlOiBpc1RleHROb2RlLFxuICBlbXB0eUVsOiBlbXB0eUVsLFxuICBub3JtYWxpemVDb250ZW50OiBub3JtYWxpemVDb250ZW50LFxuICBhcHBlbmRDb250ZW50OiBhcHBlbmRDb250ZW50LFxuICBpbnNlcnRDb250ZW50OiBpbnNlcnRDb250ZW50LFxuICBpc1NpbmdsZUxlZnRDbGljazogaXNTaW5nbGVMZWZ0Q2xpY2ssXG4gICQ6ICQsXG4gICQkOiAkJFxufSk7XG5cbi8qKlxuICogQGZpbGUgZ3VpZC5qc1xuICogQG1vZHVsZSBndWlkXG4gKi9cblxuLyoqXG4gKiBVbmlxdWUgSUQgZm9yIGFuIGVsZW1lbnQgb3IgZnVuY3Rpb25cbiAqIEB0eXBlIHtOdW1iZXJ9XG4gKi9cbnZhciBfZ3VpZCA9IDE7XG4vKipcbiAqIEdldCBhIHVuaXF1ZSBhdXRvLWluY3JlbWVudGluZyBJRCBieSBudW1iZXIgdGhhdCBoYXMgbm90IGJlZW4gcmV0dXJuZWQgYmVmb3JlLlxuICpcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqICAgICAgICAgQSBuZXcgdW5pcXVlIElELlxuICovXG5cbmZ1bmN0aW9uIG5ld0dVSUQoKSB7XG4gIHJldHVybiBfZ3VpZCsrO1xufVxuXG4vKipcbiAqIEBmaWxlIGRvbS1kYXRhLmpzXG4gKiBAbW9kdWxlIGRvbS1kYXRhXG4gKi9cbi8qKlxuICogRWxlbWVudCBEYXRhIFN0b3JlLlxuICpcbiAqIEFsbG93cyBmb3IgYmluZGluZyBkYXRhIHRvIGFuIGVsZW1lbnQgd2l0aG91dCBwdXR0aW5nIGl0IGRpcmVjdGx5IG9uIHRoZVxuICogZWxlbWVudC4gRXguIEV2ZW50IGxpc3RlbmVycyBhcmUgc3RvcmVkIGhlcmUuXG4gKiAoYWxzbyBmcm9tIGpzbmluamEuY29tLCBzbGlnaHRseSBtb2RpZmllZCBhbmQgdXBkYXRlZCBmb3IgY2xvc3VyZSBjb21waWxlcilcbiAqXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuXG52YXIgZWxEYXRhID0ge307XG4vKlxuICogVW5pcXVlIGF0dHJpYnV0ZSBuYW1lIHRvIHN0b3JlIGFuIGVsZW1lbnQncyBndWlkIGluXG4gKlxuICogQHR5cGUge1N0cmluZ31cbiAqIEBjb25zdGFudFxuICogQHByaXZhdGVcbiAqL1xuXG52YXIgZWxJZEF0dHIgPSAndmRhdGEnICsgbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4vKipcbiAqIFJldHVybnMgdGhlIGNhY2hlIG9iamVjdCB3aGVyZSBkYXRhIGZvciBhbiBlbGVtZW50IGlzIHN0b3JlZFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqICAgICAgICBFbGVtZW50IHRvIHN0b3JlIGRhdGEgZm9yLlxuICpcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqICAgICAgICAgVGhlIGNhY2hlIG9iamVjdCBmb3IgdGhhdCBlbCB0aGF0IHdhcyBwYXNzZWQgaW4uXG4gKi9cblxuZnVuY3Rpb24gZ2V0RGF0YShlbCkge1xuICB2YXIgaWQgPSBlbFtlbElkQXR0cl07XG5cbiAgaWYgKCFpZCkge1xuICAgIGlkID0gZWxbZWxJZEF0dHJdID0gbmV3R1VJRCgpO1xuICB9XG5cbiAgaWYgKCFlbERhdGFbaWRdKSB7XG4gICAgZWxEYXRhW2lkXSA9IHt9O1xuICB9XG5cbiAgcmV0dXJuIGVsRGF0YVtpZF07XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgYW4gZWxlbWVudCBoYXMgY2FjaGVkIGRhdGFcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiAgICAgICAgQ2hlY2sgaWYgdGhpcyBlbGVtZW50IGhhcyBjYWNoZWQgZGF0YS5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogICAgICAgICAtIFRydWUgaWYgdGhlIERPTSBlbGVtZW50IGhhcyBjYWNoZWQgZGF0YS5cbiAqICAgICAgICAgLSBGYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZnVuY3Rpb24gaGFzRGF0YShlbCkge1xuICB2YXIgaWQgPSBlbFtlbElkQXR0cl07XG5cbiAgaWYgKCFpZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiAhIU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGVsRGF0YVtpZF0pLmxlbmd0aDtcbn1cbi8qKlxuICogRGVsZXRlIGRhdGEgZm9yIHRoZSBlbGVtZW50IGZyb20gdGhlIGNhY2hlIGFuZCB0aGUgZ3VpZCBhdHRyIGZyb20gZ2V0RWxlbWVudEJ5SWRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiAgICAgICAgUmVtb3ZlIGNhY2hlZCBkYXRhIGZvciB0aGlzIGVsZW1lbnQuXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlRGF0YShlbCkge1xuICB2YXIgaWQgPSBlbFtlbElkQXR0cl07XG5cbiAgaWYgKCFpZCkge1xuICAgIHJldHVybjtcbiAgfSAvLyBSZW1vdmUgYWxsIHN0b3JlZCBkYXRhXG5cblxuICBkZWxldGUgZWxEYXRhW2lkXTsgLy8gUmVtb3ZlIHRoZSBlbElkQXR0ciBwcm9wZXJ0eSBmcm9tIHRoZSBET00gbm9kZVxuXG4gIHRyeSB7XG4gICAgZGVsZXRlIGVsW2VsSWRBdHRyXTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChlbC5yZW1vdmVBdHRyaWJ1dGUpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShlbElkQXR0cik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElFIGRvZXNuJ3QgYXBwZWFyIHRvIHN1cHBvcnQgcmVtb3ZlQXR0cmlidXRlIG9uIHRoZSBkb2N1bWVudCBlbGVtZW50XG4gICAgICBlbFtlbElkQXR0cl0gPSBudWxsO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBmaWxlIGV2ZW50cy5qcy4gQW4gRXZlbnQgU3lzdGVtIChKb2huIFJlc2lnIC0gU2VjcmV0cyBvZiBhIEpTIE5pbmphIGh0dHA6Ly9qc25pbmphLmNvbS8pXG4gKiAoT3JpZ2luYWwgYm9vayB2ZXJzaW9uIHdhc24ndCBjb21wbGV0ZWx5IHVzYWJsZSwgc28gZml4ZWQgc29tZSB0aGluZ3MgYW5kIG1hZGUgQ2xvc3VyZSBDb21waWxlciBjb21wYXRpYmxlKVxuICogVGhpcyBzaG91bGQgd29yayB2ZXJ5IHNpbWlsYXJseSB0byBqUXVlcnkncyBldmVudHMsIGhvd2V2ZXIgaXQncyBiYXNlZCBvZmYgdGhlIGJvb2sgdmVyc2lvbiB3aGljaCBpc24ndCBhc1xuICogcm9idXN0IGFzIGpxdWVyeSdzLCBzbyB0aGVyZSdzIHByb2JhYmx5IHNvbWUgZGlmZmVyZW5jZXMuXG4gKlxuICogQGZpbGUgZXZlbnRzLmpzXG4gKiBAbW9kdWxlIGV2ZW50c1xuICovXG4vKipcbiAqIENsZWFuIHVwIHRoZSBsaXN0ZW5lciBjYWNoZSBhbmQgZGlzcGF0Y2hlcnNcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtXG4gKiAgICAgICAgRWxlbWVudCB0byBjbGVhbiB1cFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gKiAgICAgICAgVHlwZSBvZiBldmVudCB0byBjbGVhbiB1cFxuICovXG5cbmZ1bmN0aW9uIF9jbGVhblVwRXZlbnRzKGVsZW0sIHR5cGUpIHtcbiAgdmFyIGRhdGEgPSBnZXREYXRhKGVsZW0pOyAvLyBSZW1vdmUgdGhlIGV2ZW50cyBvZiBhIHBhcnRpY3VsYXIgdHlwZSBpZiB0aGVyZSBhcmUgbm9uZSBsZWZ0XG5cbiAgaWYgKGRhdGEuaGFuZGxlcnNbdHlwZV0ubGVuZ3RoID09PSAwKSB7XG4gICAgZGVsZXRlIGRhdGEuaGFuZGxlcnNbdHlwZV07IC8vIGRhdGEuaGFuZGxlcnNbdHlwZV0gPSBudWxsO1xuICAgIC8vIFNldHRpbmcgdG8gbnVsbCB3YXMgY2F1c2luZyBhbiBlcnJvciB3aXRoIGRhdGEuaGFuZGxlcnNcbiAgICAvLyBSZW1vdmUgdGhlIG1ldGEtaGFuZGxlciBmcm9tIHRoZSBlbGVtZW50XG5cbiAgICBpZiAoZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgICBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZGF0YS5kaXNwYXRjaGVyLCBmYWxzZSk7XG4gICAgfSBlbHNlIGlmIChlbGVtLmRldGFjaEV2ZW50KSB7XG4gICAgICBlbGVtLmRldGFjaEV2ZW50KCdvbicgKyB0eXBlLCBkYXRhLmRpc3BhdGNoZXIpO1xuICAgIH1cbiAgfSAvLyBSZW1vdmUgdGhlIGV2ZW50cyBvYmplY3QgaWYgdGhlcmUgYXJlIG5vIHR5cGVzIGxlZnRcblxuXG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhkYXRhLmhhbmRsZXJzKS5sZW5ndGggPD0gMCkge1xuICAgIGRlbGV0ZSBkYXRhLmhhbmRsZXJzO1xuICAgIGRlbGV0ZSBkYXRhLmRpc3BhdGNoZXI7XG4gICAgZGVsZXRlIGRhdGEuZGlzYWJsZWQ7XG4gIH0gLy8gRmluYWxseSByZW1vdmUgdGhlIGVsZW1lbnQgZGF0YSBpZiB0aGVyZSBpcyBubyBkYXRhIGxlZnRcblxuXG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhkYXRhKS5sZW5ndGggPT09IDApIHtcbiAgICByZW1vdmVEYXRhKGVsZW0pO1xuICB9XG59XG4vKipcbiAqIExvb3BzIHRocm91Z2ggYW4gYXJyYXkgb2YgZXZlbnQgdHlwZXMgYW5kIGNhbGxzIHRoZSByZXF1ZXN0ZWQgbWV0aG9kIGZvciBlYWNoIHR5cGUuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqICAgICAgICBUaGUgZXZlbnQgbWV0aG9kIHdlIHdhbnQgdG8gdXNlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsZW1cbiAqICAgICAgICBFbGVtZW50IG9yIG9iamVjdCB0byBiaW5kIGxpc3RlbmVycyB0b1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gKiAgICAgICAgVHlwZSBvZiBldmVudCB0byBiaW5kIHRvLlxuICpcbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnRMaXN0ZW5lcn0gY2FsbGJhY2tcbiAqICAgICAgICBFdmVudCBsaXN0ZW5lci5cbiAqL1xuXG5cbmZ1bmN0aW9uIF9oYW5kbGVNdWx0aXBsZUV2ZW50cyhmbiwgZWxlbSwgdHlwZXMsIGNhbGxiYWNrKSB7XG4gIHR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAvLyBDYWxsIHRoZSBldmVudCBtZXRob2QgZm9yIGVhY2ggb25lIG9mIHRoZSB0eXBlc1xuICAgIGZuKGVsZW0sIHR5cGUsIGNhbGxiYWNrKTtcbiAgfSk7XG59XG4vKipcbiAqIEZpeCBhIG5hdGl2ZSBldmVudCB0byBoYXZlIHN0YW5kYXJkIHByb3BlcnR5IHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBldmVudFxuICogICAgICAgIEV2ZW50IG9iamVjdCB0byBmaXguXG4gKlxuICogQHJldHVybiB7T2JqZWN0fVxuICogICAgICAgICBGaXhlZCBldmVudCBvYmplY3QuXG4gKi9cblxuXG5mdW5jdGlvbiBmaXhFdmVudChldmVudCkge1xuICBmdW5jdGlvbiByZXR1cm5UcnVlKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gcmV0dXJuRmFsc2UoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IC8vIFRlc3QgaWYgZml4aW5nIHVwIGlzIG5lZWRlZFxuICAvLyBVc2VkIHRvIGNoZWNrIGlmICFldmVudC5zdG9wUHJvcGFnYXRpb24gaW5zdGVhZCBvZiBpc1Byb3BhZ2F0aW9uU3RvcHBlZFxuICAvLyBCdXQgbmF0aXZlIGV2ZW50cyByZXR1cm4gdHJ1ZSBmb3Igc3RvcFByb3BhZ2F0aW9uLCBidXQgZG9uJ3QgaGF2ZVxuICAvLyBvdGhlciBleHBlY3RlZCBtZXRob2RzIGxpa2UgaXNQcm9wYWdhdGlvblN0b3BwZWQuIFNlZW1zIHRvIGJlIGEgcHJvYmxlbVxuICAvLyB3aXRoIHRoZSBKYXZhc2NyaXB0IE5pbmphIGNvZGUuIFNvIHdlJ3JlIGp1c3Qgb3ZlcnJpZGluZyBhbGwgZXZlbnRzIG5vdy5cblxuXG4gIGlmICghZXZlbnQgfHwgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKSB7XG4gICAgdmFyIG9sZCA9IGV2ZW50IHx8IHdpbmRvdyQxLmV2ZW50O1xuICAgIGV2ZW50ID0ge307IC8vIENsb25lIHRoZSBvbGQgb2JqZWN0IHNvIHRoYXQgd2UgY2FuIG1vZGlmeSB0aGUgdmFsdWVzIGV2ZW50ID0ge307XG4gICAgLy8gSUU4IERvZXNuJ3QgbGlrZSB3aGVuIHlvdSBtZXNzIHdpdGggbmF0aXZlIGV2ZW50IHByb3BlcnRpZXNcbiAgICAvLyBGaXJlZm94IHJldHVybnMgZmFsc2UgZm9yIGV2ZW50Lmhhc093blByb3BlcnR5KCd0eXBlJykgYW5kIG90aGVyIHByb3BzXG4gICAgLy8gIHdoaWNoIG1ha2VzIGNvcHlpbmcgbW9yZSBkaWZmaWN1bHQuXG4gICAgLy8gVE9ETzogUHJvYmFibHkgYmVzdCB0byBjcmVhdGUgYSB3aGl0ZWxpc3Qgb2YgZXZlbnQgcHJvcHNcblxuICAgIGZvciAodmFyIGtleSBpbiBvbGQpIHtcbiAgICAgIC8vIFNhZmFyaSA2LjAuMyB3YXJucyB5b3UgaWYgeW91IHRyeSB0byBjb3B5IGRlcHJlY2F0ZWQgbGF5ZXJYL1lcbiAgICAgIC8vIENocm9tZSB3YXJucyB5b3UgaWYgeW91IHRyeSB0byBjb3B5IGRlcHJlY2F0ZWQga2V5Ym9hcmRFdmVudC5rZXlMb2NhdGlvblxuICAgICAgLy8gYW5kIHdlYmtpdE1vdmVtZW50WC9ZXG4gICAgICBpZiAoa2V5ICE9PSAnbGF5ZXJYJyAmJiBrZXkgIT09ICdsYXllclknICYmIGtleSAhPT0gJ2tleUxvY2F0aW9uJyAmJiBrZXkgIT09ICd3ZWJraXRNb3ZlbWVudFgnICYmIGtleSAhPT0gJ3dlYmtpdE1vdmVtZW50WScpIHtcbiAgICAgICAgLy8gQ2hyb21lIDMyKyB3YXJucyBpZiB5b3UgdHJ5IHRvIGNvcHkgZGVwcmVjYXRlZCByZXR1cm5WYWx1ZSwgYnV0XG4gICAgICAgIC8vIHdlIHN0aWxsIHdhbnQgdG8gaWYgcHJldmVudERlZmF1bHQgaXNuJ3Qgc3VwcG9ydGVkIChJRTgpLlxuICAgICAgICBpZiAoIShrZXkgPT09ICdyZXR1cm5WYWx1ZScgJiYgb2xkLnByZXZlbnREZWZhdWx0KSkge1xuICAgICAgICAgIGV2ZW50W2tleV0gPSBvbGRba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gVGhlIGV2ZW50IG9jY3VycmVkIG9uIHRoaXMgZWxlbWVudFxuXG5cbiAgICBpZiAoIWV2ZW50LnRhcmdldCkge1xuICAgICAgZXZlbnQudGFyZ2V0ID0gZXZlbnQuc3JjRWxlbWVudCB8fCBkb2N1bWVudDtcbiAgICB9IC8vIEhhbmRsZSB3aGljaCBvdGhlciBlbGVtZW50IHRoZSBldmVudCBpcyByZWxhdGVkIHRvXG5cblxuICAgIGlmICghZXZlbnQucmVsYXRlZFRhcmdldCkge1xuICAgICAgZXZlbnQucmVsYXRlZFRhcmdldCA9IGV2ZW50LmZyb21FbGVtZW50ID09PSBldmVudC50YXJnZXQgPyBldmVudC50b0VsZW1lbnQgOiBldmVudC5mcm9tRWxlbWVudDtcbiAgICB9IC8vIFN0b3AgdGhlIGRlZmF1bHQgYnJvd3NlciBhY3Rpb25cblxuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAob2xkLnByZXZlbnREZWZhdWx0KSB7XG4gICAgICAgIG9sZC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuXG4gICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgb2xkLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICBldmVudC5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgZXZlbnQuZGVmYXVsdFByZXZlbnRlZCA9IGZhbHNlOyAvLyBTdG9wIHRoZSBldmVudCBmcm9tIGJ1YmJsaW5nXG5cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAob2xkLnN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICBvbGQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9XG5cbiAgICAgIGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICBvbGQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgIGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcbiAgICB9O1xuXG4gICAgZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5GYWxzZTsgLy8gU3RvcCB0aGUgZXZlbnQgZnJvbSBidWJibGluZyBhbmQgZXhlY3V0aW5nIG90aGVyIGhhbmRsZXJzXG5cbiAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAob2xkLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbikge1xuICAgICAgICBvbGQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICB9XG5cbiAgICAgIGV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH07XG5cbiAgICBldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVybkZhbHNlOyAvLyBIYW5kbGUgbW91c2UgcG9zaXRpb25cblxuICAgIGlmIChldmVudC5jbGllbnRYICE9PSBudWxsICYmIGV2ZW50LmNsaWVudFggIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIGRvYyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgIGV2ZW50LnBhZ2VYID0gZXZlbnQuY2xpZW50WCArIChkb2MgJiYgZG9jLnNjcm9sbExlZnQgfHwgYm9keSAmJiBib2R5LnNjcm9sbExlZnQgfHwgMCkgLSAoZG9jICYmIGRvYy5jbGllbnRMZWZ0IHx8IGJvZHkgJiYgYm9keS5jbGllbnRMZWZ0IHx8IDApO1xuICAgICAgZXZlbnQucGFnZVkgPSBldmVudC5jbGllbnRZICsgKGRvYyAmJiBkb2Muc2Nyb2xsVG9wIHx8IGJvZHkgJiYgYm9keS5zY3JvbGxUb3AgfHwgMCkgLSAoZG9jICYmIGRvYy5jbGllbnRUb3AgfHwgYm9keSAmJiBib2R5LmNsaWVudFRvcCB8fCAwKTtcbiAgICB9IC8vIEhhbmRsZSBrZXkgcHJlc3Nlc1xuXG5cbiAgICBldmVudC53aGljaCA9IGV2ZW50LmNoYXJDb2RlIHx8IGV2ZW50LmtleUNvZGU7IC8vIEZpeCBidXR0b24gZm9yIG1vdXNlIGNsaWNrczpcbiAgICAvLyAwID09IGxlZnQ7IDEgPT0gbWlkZGxlOyAyID09IHJpZ2h0XG5cbiAgICBpZiAoZXZlbnQuYnV0dG9uICE9PSBudWxsICYmIGV2ZW50LmJ1dHRvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBUaGUgZm9sbG93aW5nIGlzIGRpc2FibGVkIGJlY2F1c2UgaXQgZG9lcyBub3QgcGFzcyB2aWRlb2pzLXN0YW5kYXJkXG4gICAgICAvLyBhbmQuLi4geWlrZXMuXG5cbiAgICAgIC8qIGVzbGludC1kaXNhYmxlICovXG4gICAgICBldmVudC5idXR0b24gPSBldmVudC5idXR0b24gJiAxID8gMCA6IGV2ZW50LmJ1dHRvbiAmIDQgPyAxIDogZXZlbnQuYnV0dG9uICYgMiA/IDIgOiAwO1xuICAgICAgLyogZXNsaW50LWVuYWJsZSAqL1xuICAgIH1cbiAgfSAvLyBSZXR1cm5zIGZpeGVkLXVwIGluc3RhbmNlXG5cblxuICByZXR1cm4gZXZlbnQ7XG59XG4vKipcbiAqIFdoZXRoZXIgcGFzc2l2ZSBldmVudCBsaXN0ZW5lcnMgYXJlIHN1cHBvcnRlZFxuICovXG5cbnZhciBfc3VwcG9ydHNQYXNzaXZlID0gZmFsc2U7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIG9wdHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdwYXNzaXZlJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIF9zdXBwb3J0c1Bhc3NpdmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHdpbmRvdyQxLmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBudWxsLCBvcHRzKTtcbiAgICB3aW5kb3ckMS5yZW1vdmVFdmVudExpc3RlbmVyKCd0ZXN0JywgbnVsbCwgb3B0cyk7XG4gIH0gY2F0Y2ggKGUpIHsvLyBkaXNyZWdhcmRcbiAgfVxufSkoKTtcbi8qKlxuICogVG91Y2ggZXZlbnRzIENocm9tZSBleHBlY3RzIHRvIGJlIHBhc3NpdmVcbiAqL1xuXG5cbnZhciBwYXNzaXZlRXZlbnRzID0gWyd0b3VjaHN0YXJ0JywgJ3RvdWNobW92ZSddO1xuLyoqXG4gKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXIgdG8gZWxlbWVudFxuICogSXQgc3RvcmVzIHRoZSBoYW5kbGVyIGZ1bmN0aW9uIGluIGEgc2VwYXJhdGUgY2FjaGUgb2JqZWN0XG4gKiBhbmQgYWRkcyBhIGdlbmVyaWMgaGFuZGxlciB0byB0aGUgZWxlbWVudCdzIGV2ZW50LFxuICogYWxvbmcgd2l0aCBhIHVuaXF1ZSBpZCAoZ3VpZCkgdG8gdGhlIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gZWxlbVxuICogICAgICAgIEVsZW1lbnQgb3Igb2JqZWN0IHRvIGJpbmQgbGlzdGVuZXJzIHRvXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IHR5cGVcbiAqICAgICAgICBUeXBlIG9mIGV2ZW50IHRvIGJpbmQgdG8uXG4gKlxuICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudExpc3RlbmVyfSBmblxuICogICAgICAgIEV2ZW50IGxpc3RlbmVyLlxuICovXG5cbmZ1bmN0aW9uIG9uKGVsZW0sIHR5cGUsIGZuKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgcmV0dXJuIF9oYW5kbGVNdWx0aXBsZUV2ZW50cyhvbiwgZWxlbSwgdHlwZSwgZm4pO1xuICB9XG5cbiAgdmFyIGRhdGEgPSBnZXREYXRhKGVsZW0pOyAvLyBXZSBuZWVkIGEgcGxhY2UgdG8gc3RvcmUgYWxsIG91ciBoYW5kbGVyIGRhdGFcblxuICBpZiAoIWRhdGEuaGFuZGxlcnMpIHtcbiAgICBkYXRhLmhhbmRsZXJzID0ge307XG4gIH1cblxuICBpZiAoIWRhdGEuaGFuZGxlcnNbdHlwZV0pIHtcbiAgICBkYXRhLmhhbmRsZXJzW3R5cGVdID0gW107XG4gIH1cblxuICBpZiAoIWZuLmd1aWQpIHtcbiAgICBmbi5ndWlkID0gbmV3R1VJRCgpO1xuICB9XG5cbiAgZGF0YS5oYW5kbGVyc1t0eXBlXS5wdXNoKGZuKTtcblxuICBpZiAoIWRhdGEuZGlzcGF0Y2hlcikge1xuICAgIGRhdGEuZGlzYWJsZWQgPSBmYWxzZTtcblxuICAgIGRhdGEuZGlzcGF0Y2hlciA9IGZ1bmN0aW9uIChldmVudCwgaGFzaCkge1xuICAgICAgaWYgKGRhdGEuZGlzYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBldmVudCA9IGZpeEV2ZW50KGV2ZW50KTtcbiAgICAgIHZhciBoYW5kbGVycyA9IGRhdGEuaGFuZGxlcnNbZXZlbnQudHlwZV07XG5cbiAgICAgIGlmIChoYW5kbGVycykge1xuICAgICAgICAvLyBDb3B5IGhhbmRsZXJzIHNvIGlmIGhhbmRsZXJzIGFyZSBhZGRlZC9yZW1vdmVkIGR1cmluZyB0aGUgcHJvY2VzcyBpdCBkb2Vzbid0IHRocm93IGV2ZXJ5dGhpbmcgb2ZmLlxuICAgICAgICB2YXIgaGFuZGxlcnNDb3B5ID0gaGFuZGxlcnMuc2xpY2UoMCk7XG5cbiAgICAgICAgZm9yICh2YXIgbSA9IDAsIG4gPSBoYW5kbGVyc0NvcHkubGVuZ3RoOyBtIDwgbjsgbSsrKSB7XG4gICAgICAgICAgaWYgKGV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBoYW5kbGVyc0NvcHlbbV0uY2FsbChlbGVtLCBldmVudCwgaGFzaCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGxvZy5lcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgaWYgKGRhdGEuaGFuZGxlcnNbdHlwZV0ubGVuZ3RoID09PSAxKSB7XG4gICAgaWYgKGVsZW0uYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgdmFyIG9wdGlvbnMgPSBmYWxzZTtcblxuICAgICAgaWYgKF9zdXBwb3J0c1Bhc3NpdmUgJiYgcGFzc2l2ZUV2ZW50cy5pbmRleE9mKHR5cGUpID4gLTEpIHtcbiAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICBwYXNzaXZlOiB0cnVlXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBkYXRhLmRpc3BhdGNoZXIsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAoZWxlbS5hdHRhY2hFdmVudCkge1xuICAgICAgZWxlbS5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgZGF0YS5kaXNwYXRjaGVyKTtcbiAgICB9XG4gIH1cbn1cbi8qKlxuICogUmVtb3ZlcyBldmVudCBsaXN0ZW5lcnMgZnJvbSBhbiBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gZWxlbVxuICogICAgICAgIE9iamVjdCB0byByZW1vdmUgbGlzdGVuZXJzIGZyb20uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IFt0eXBlXVxuICogICAgICAgIFR5cGUgb2YgbGlzdGVuZXIgdG8gcmVtb3ZlLiBEb24ndCBpbmNsdWRlIHRvIHJlbW92ZSBhbGwgZXZlbnRzIGZyb20gZWxlbWVudC5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50TGlzdGVuZXJ9IFtmbl1cbiAqICAgICAgICBTcGVjaWZpYyBsaXN0ZW5lciB0byByZW1vdmUuIERvbid0IGluY2x1ZGUgdG8gcmVtb3ZlIGxpc3RlbmVycyBmb3IgYW4gZXZlbnRcbiAqICAgICAgICB0eXBlLlxuICovXG5cbmZ1bmN0aW9uIG9mZihlbGVtLCB0eXBlLCBmbikge1xuICAvLyBEb24ndCB3YW50IHRvIGFkZCBhIGNhY2hlIG9iamVjdCB0aHJvdWdoIGdldEVsRGF0YSBpZiBub3QgbmVlZGVkXG4gIGlmICghaGFzRGF0YShlbGVtKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBkYXRhID0gZ2V0RGF0YShlbGVtKTsgLy8gSWYgbm8gZXZlbnRzIGV4aXN0LCBub3RoaW5nIHRvIHVuYmluZFxuXG4gIGlmICghZGF0YS5oYW5kbGVycykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgcmV0dXJuIF9oYW5kbGVNdWx0aXBsZUV2ZW50cyhvZmYsIGVsZW0sIHR5cGUsIGZuKTtcbiAgfSAvLyBVdGlsaXR5IGZ1bmN0aW9uXG5cblxuICB2YXIgcmVtb3ZlVHlwZSA9IGZ1bmN0aW9uIHJlbW92ZVR5cGUoZWwsIHQpIHtcbiAgICBkYXRhLmhhbmRsZXJzW3RdID0gW107XG5cbiAgICBfY2xlYW5VcEV2ZW50cyhlbCwgdCk7XG4gIH07IC8vIEFyZSB3ZSByZW1vdmluZyBhbGwgYm91bmQgZXZlbnRzP1xuXG5cbiAgaWYgKHR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgIGZvciAodmFyIHQgaW4gZGF0YS5oYW5kbGVycykge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLmhhbmRsZXJzIHx8IHt9LCB0KSkge1xuICAgICAgICByZW1vdmVUeXBlKGVsZW0sIHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBoYW5kbGVycyA9IGRhdGEuaGFuZGxlcnNbdHlwZV07IC8vIElmIG5vIGhhbmRsZXJzIGV4aXN0LCBub3RoaW5nIHRvIHVuYmluZFxuXG4gIGlmICghaGFuZGxlcnMpIHtcbiAgICByZXR1cm47XG4gIH0gLy8gSWYgbm8gbGlzdGVuZXIgd2FzIHByb3ZpZGVkLCByZW1vdmUgYWxsIGxpc3RlbmVycyBmb3IgdHlwZVxuXG5cbiAgaWYgKCFmbikge1xuICAgIHJlbW92ZVR5cGUoZWxlbSwgdHlwZSk7XG4gICAgcmV0dXJuO1xuICB9IC8vIFdlJ3JlIG9ubHkgcmVtb3ZpbmcgYSBzaW5nbGUgaGFuZGxlclxuXG5cbiAgaWYgKGZuLmd1aWQpIHtcbiAgICBmb3IgKHZhciBuID0gMDsgbiA8IGhhbmRsZXJzLmxlbmd0aDsgbisrKSB7XG4gICAgICBpZiAoaGFuZGxlcnNbbl0uZ3VpZCA9PT0gZm4uZ3VpZCkge1xuICAgICAgICBoYW5kbGVycy5zcGxpY2Uobi0tLCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfY2xlYW5VcEV2ZW50cyhlbGVtLCB0eXBlKTtcbn1cbi8qKlxuICogVHJpZ2dlciBhbiBldmVudCBmb3IgYW4gZWxlbWVudFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsZW1cbiAqICAgICAgICBFbGVtZW50IHRvIHRyaWdnZXIgYW4gZXZlbnQgb25cbiAqXG4gKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fHN0cmluZ30gZXZlbnRcbiAqICAgICAgICBBIHN0cmluZyAodGhlIHR5cGUpIG9yIGFuIGV2ZW50IG9iamVjdCB3aXRoIGEgdHlwZSBhdHRyaWJ1dGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW2hhc2hdXG4gKiAgICAgICAgZGF0YSBoYXNoIHRvIHBhc3MgYWxvbmcgd2l0aCB0aGUgZXZlbnRcbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufHVuZGVmaW5lZH1cbiAqICAgICAgICAgUmV0dXJucyB0aGUgb3Bwb3NpdGUgb2YgYGRlZmF1bHRQcmV2ZW50ZWRgIGlmIGRlZmF1bHQgd2FzXG4gKiAgICAgICAgIHByZXZlbnRlZC4gT3RoZXJ3aXNlLCByZXR1cm5zIGB1bmRlZmluZWRgXG4gKi9cblxuZnVuY3Rpb24gdHJpZ2dlcihlbGVtLCBldmVudCwgaGFzaCkge1xuICAvLyBGZXRjaGVzIGVsZW1lbnQgZGF0YSBhbmQgYSByZWZlcmVuY2UgdG8gdGhlIHBhcmVudCAoZm9yIGJ1YmJsaW5nKS5cbiAgLy8gRG9uJ3Qgd2FudCB0byBhZGQgYSBkYXRhIG9iamVjdCB0byBjYWNoZSBmb3IgZXZlcnkgcGFyZW50LFxuICAvLyBzbyBjaGVja2luZyBoYXNFbERhdGEgZmlyc3QuXG4gIHZhciBlbGVtRGF0YSA9IGhhc0RhdGEoZWxlbSkgPyBnZXREYXRhKGVsZW0pIDoge307XG4gIHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGUgfHwgZWxlbS5vd25lckRvY3VtZW50OyAvLyB0eXBlID0gZXZlbnQudHlwZSB8fCBldmVudCxcbiAgLy8gaGFuZGxlcjtcbiAgLy8gSWYgYW4gZXZlbnQgbmFtZSB3YXMgcGFzc2VkIGFzIGEgc3RyaW5nLCBjcmVhdGVzIGFuIGV2ZW50IG91dCBvZiBpdFxuXG4gIGlmICh0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgZXZlbnQgPSB7XG4gICAgICB0eXBlOiBldmVudCxcbiAgICAgIHRhcmdldDogZWxlbVxuICAgIH07XG4gIH0gZWxzZSBpZiAoIWV2ZW50LnRhcmdldCkge1xuICAgIGV2ZW50LnRhcmdldCA9IGVsZW07XG4gIH0gLy8gTm9ybWFsaXplcyB0aGUgZXZlbnQgcHJvcGVydGllcy5cblxuXG4gIGV2ZW50ID0gZml4RXZlbnQoZXZlbnQpOyAvLyBJZiB0aGUgcGFzc2VkIGVsZW1lbnQgaGFzIGEgZGlzcGF0Y2hlciwgZXhlY3V0ZXMgdGhlIGVzdGFibGlzaGVkIGhhbmRsZXJzLlxuXG4gIGlmIChlbGVtRGF0YS5kaXNwYXRjaGVyKSB7XG4gICAgZWxlbURhdGEuZGlzcGF0Y2hlci5jYWxsKGVsZW0sIGV2ZW50LCBoYXNoKTtcbiAgfSAvLyBVbmxlc3MgZXhwbGljaXRseSBzdG9wcGVkIG9yIHRoZSBldmVudCBkb2VzIG5vdCBidWJibGUgKGUuZy4gbWVkaWEgZXZlbnRzKVxuICAvLyByZWN1cnNpdmVseSBjYWxscyB0aGlzIGZ1bmN0aW9uIHRvIGJ1YmJsZSB0aGUgZXZlbnQgdXAgdGhlIERPTS5cblxuXG4gIGlmIChwYXJlbnQgJiYgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgJiYgZXZlbnQuYnViYmxlcyA9PT0gdHJ1ZSkge1xuICAgIHRyaWdnZXIuY2FsbChudWxsLCBwYXJlbnQsIGV2ZW50LCBoYXNoKTsgLy8gSWYgYXQgdGhlIHRvcCBvZiB0aGUgRE9NLCB0cmlnZ2VycyB0aGUgZGVmYXVsdCBhY3Rpb24gdW5sZXNzIGRpc2FibGVkLlxuICB9IGVsc2UgaWYgKCFwYXJlbnQgJiYgIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgJiYgZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldFtldmVudC50eXBlXSkge1xuICAgIHZhciB0YXJnZXREYXRhID0gZ2V0RGF0YShldmVudC50YXJnZXQpOyAvLyBDaGVja3MgaWYgdGhlIHRhcmdldCBoYXMgYSBkZWZhdWx0IGFjdGlvbiBmb3IgdGhpcyBldmVudC5cblxuICAgIGlmIChldmVudC50YXJnZXRbZXZlbnQudHlwZV0pIHtcbiAgICAgIC8vIFRlbXBvcmFyaWx5IGRpc2FibGVzIGV2ZW50IGRpc3BhdGNoaW5nIG9uIHRoZSB0YXJnZXQgYXMgd2UgaGF2ZSBhbHJlYWR5IGV4ZWN1dGVkIHRoZSBoYW5kbGVyLlxuICAgICAgdGFyZ2V0RGF0YS5kaXNhYmxlZCA9IHRydWU7IC8vIEV4ZWN1dGVzIHRoZSBkZWZhdWx0IGFjdGlvbi5cblxuICAgICAgaWYgKHR5cGVvZiBldmVudC50YXJnZXRbZXZlbnQudHlwZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0W2V2ZW50LnR5cGVdKCk7XG4gICAgICB9IC8vIFJlLWVuYWJsZXMgZXZlbnQgZGlzcGF0Y2hpbmcuXG5cblxuICAgICAgdGFyZ2V0RGF0YS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfSAvLyBJbmZvcm0gdGhlIHRyaWdnZXJlciBpZiB0aGUgZGVmYXVsdCB3YXMgcHJldmVudGVkIGJ5IHJldHVybmluZyBmYWxzZVxuXG5cbiAgcmV0dXJuICFldmVudC5kZWZhdWx0UHJldmVudGVkO1xufVxuLyoqXG4gKiBUcmlnZ2VyIGEgbGlzdGVuZXIgb25seSBvbmNlIGZvciBhbiBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtXG4gKiAgICAgICAgRWxlbWVudCBvciBvYmplY3QgdG8gYmluZCB0by5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gdHlwZVxuICogICAgICAgIE5hbWUvdHlwZSBvZiBldmVudFxuICpcbiAqIEBwYXJhbSB7RXZlbnR+RXZlbnRMaXN0ZW5lcn0gZm5cbiAqICAgICAgICBFdmVudCBsaXN0ZW5lciBmdW5jdGlvblxuICovXG5cbmZ1bmN0aW9uIG9uZShlbGVtLCB0eXBlLCBmbikge1xuICBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgIHJldHVybiBfaGFuZGxlTXVsdGlwbGVFdmVudHMob25lLCBlbGVtLCB0eXBlLCBmbik7XG4gIH1cblxuICB2YXIgZnVuYyA9IGZ1bmN0aW9uIGZ1bmMoKSB7XG4gICAgb2ZmKGVsZW0sIHR5cGUsIGZ1bmMpO1xuICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07IC8vIGNvcHkgdGhlIGd1aWQgdG8gdGhlIG5ldyBmdW5jdGlvbiBzbyBpdCBjYW4gcmVtb3ZlZCB1c2luZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24ncyBJRFxuXG5cbiAgZnVuYy5ndWlkID0gZm4uZ3VpZCA9IGZuLmd1aWQgfHwgbmV3R1VJRCgpO1xuICBvbihlbGVtLCB0eXBlLCBmdW5jKTtcbn1cblxudmFyIEV2ZW50cyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgZml4RXZlbnQ6IGZpeEV2ZW50LFxuICBvbjogb24sXG4gIG9mZjogb2ZmLFxuICB0cmlnZ2VyOiB0cmlnZ2VyLFxuICBvbmU6IG9uZVxufSk7XG5cbi8qKlxuICogQGZpbGUgc2V0dXAuanMgLSBGdW5jdGlvbnMgZm9yIHNldHRpbmcgdXAgYSBwbGF5ZXIgd2l0aG91dFxuICogdXNlciBpbnRlcmFjdGlvbiBiYXNlZCBvbiB0aGUgZGF0YS1zZXR1cCBgYXR0cmlidXRlYCBvZiB0aGUgdmlkZW8gdGFnLlxuICpcbiAqIEBtb2R1bGUgc2V0dXBcbiAqL1xudmFyIF93aW5kb3dMb2FkZWQgPSBmYWxzZTtcbnZhciB2aWRlb2pzO1xuLyoqXG4gKiBTZXQgdXAgYW55IHRhZ3MgdGhhdCBoYXZlIGEgZGF0YS1zZXR1cCBgYXR0cmlidXRlYCB3aGVuIHRoZSBwbGF5ZXIgaXMgc3RhcnRlZC5cbiAqL1xuXG52YXIgYXV0b1NldHVwID0gZnVuY3Rpb24gYXV0b1NldHVwKCkge1xuICAvLyBQcm90ZWN0IGFnYWluc3QgYnJlYWthZ2UgaW4gbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRzIGFuZCBjaGVjayBnbG9iYWwgYXV0b1NldHVwIG9wdGlvbi5cbiAgaWYgKCFpc1JlYWwoKSB8fCB2aWRlb2pzLm9wdGlvbnMuYXV0b1NldHVwID09PSBmYWxzZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciB2aWRzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3ZpZGVvJykpO1xuICB2YXIgYXVkaW9zID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2F1ZGlvJykpO1xuICB2YXIgZGl2cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlby1qcycpKTtcbiAgdmFyIG1lZGlhRWxzID0gdmlkcy5jb25jYXQoYXVkaW9zLCBkaXZzKTsgLy8gQ2hlY2sgaWYgYW55IG1lZGlhIGVsZW1lbnRzIGV4aXN0XG5cbiAgaWYgKG1lZGlhRWxzICYmIG1lZGlhRWxzLmxlbmd0aCA+IDApIHtcbiAgICBmb3IgKHZhciBpID0gMCwgZSA9IG1lZGlhRWxzLmxlbmd0aDsgaSA8IGU7IGkrKykge1xuICAgICAgdmFyIG1lZGlhRWwgPSBtZWRpYUVsc1tpXTsgLy8gQ2hlY2sgaWYgZWxlbWVudCBleGlzdHMsIGhhcyBnZXRBdHRyaWJ1dGUgZnVuYy5cblxuICAgICAgaWYgKG1lZGlhRWwgJiYgbWVkaWFFbC5nZXRBdHRyaWJ1dGUpIHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoaXMgcGxheWVyIGhhc24ndCBhbHJlYWR5IGJlZW4gc2V0IHVwLlxuICAgICAgICBpZiAobWVkaWFFbC5wbGF5ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHZhciBvcHRpb25zID0gbWVkaWFFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2V0dXAnKTsgLy8gQ2hlY2sgaWYgZGF0YS1zZXR1cCBhdHRyIGV4aXN0cy5cbiAgICAgICAgICAvLyBXZSBvbmx5IGF1dG8tc2V0dXAgaWYgdGhleSd2ZSBhZGRlZCB0aGUgZGF0YS1zZXR1cCBhdHRyLlxuXG4gICAgICAgICAgaWYgKG9wdGlvbnMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBuZXcgdmlkZW8uanMgaW5zdGFuY2UuXG4gICAgICAgICAgICB2aWRlb2pzKG1lZGlhRWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBJZiBnZXRBdHRyaWJ1dGUgaXNuJ3QgZGVmaW5lZCwgd2UgbmVlZCB0byB3YWl0IGZvciB0aGUgRE9NLlxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhdXRvU2V0dXBUaW1lb3V0KDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IC8vIE5vIHZpZGVvcyB3ZXJlIGZvdW5kLCBzbyBrZWVwIGxvb3BpbmcgdW5sZXNzIHBhZ2UgaXMgZmluaXNoZWQgbG9hZGluZy5cblxuICB9IGVsc2UgaWYgKCFfd2luZG93TG9hZGVkKSB7XG4gICAgYXV0b1NldHVwVGltZW91dCgxKTtcbiAgfVxufTtcbi8qKlxuICogV2FpdCB1bnRpbCB0aGUgcGFnZSBpcyBsb2FkZWQgYmVmb3JlIHJ1bm5pbmcgYXV0b1NldHVwLiBUaGlzIHdpbGwgYmUgY2FsbGVkIGluXG4gKiBhdXRvU2V0dXAgaWYgYGhhc0xvYWRlZGAgcmV0dXJucyBmYWxzZS5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gd2FpdFxuICogICAgICAgIEhvdyBsb25nIHRvIHdhaXQgaW4gbXNcbiAqXG4gKiBAcGFyYW0ge21vZHVsZTp2aWRlb2pzfSBbdmpzXVxuICogICAgICAgIFRoZSB2aWRlb2pzIGxpYnJhcnkgZnVuY3Rpb25cbiAqL1xuXG5cbmZ1bmN0aW9uIGF1dG9TZXR1cFRpbWVvdXQod2FpdCwgdmpzKSB7XG4gIGlmICh2anMpIHtcbiAgICB2aWRlb2pzID0gdmpzO1xuICB9XG5cbiAgd2luZG93JDEuc2V0VGltZW91dChhdXRvU2V0dXAsIHdhaXQpO1xufVxuXG5pZiAoaXNSZWFsKCkgJiYgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICBfd2luZG93TG9hZGVkID0gdHJ1ZTtcbn0gZWxzZSB7XG4gIC8qKlxuICAgKiBMaXN0ZW4gZm9yIHRoZSBsb2FkIGV2ZW50IG9uIHdpbmRvdywgYW5kIHNldCBfd2luZG93TG9hZGVkIHRvIHRydWUuXG4gICAqXG4gICAqIEBsaXN0ZW5zIGxvYWRcbiAgICovXG4gIG9uZSh3aW5kb3ckMSwgJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgX3dpbmRvd0xvYWRlZCA9IHRydWU7XG4gIH0pO1xufVxuXG4vKipcbiAqIEBmaWxlIHN0eWxlc2hlZXQuanNcbiAqIEBtb2R1bGUgc3R5bGVzaGVldFxuICovXG4vKipcbiAqIENyZWF0ZSBhIERPTSBzeWxlIGVsZW1lbnQgZ2l2ZW4gYSBjbGFzc05hbWUgZm9yIGl0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWVcbiAqICAgICAgICBUaGUgY2xhc3NOYW1lIHRvIGFkZCB0byB0aGUgY3JlYXRlZCBzdHlsZSBlbGVtZW50LlxuICpcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQuXG4gKi9cblxudmFyIGNyZWF0ZVN0eWxlRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudChjbGFzc05hbWUpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgc3R5bGUuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICByZXR1cm4gc3R5bGU7XG59O1xuLyoqXG4gKiBBZGQgdGV4dCB0byBhIERPTSBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqICAgICAgICBUaGUgRWxlbWVudCB0byBhZGQgdGV4dCBjb250ZW50IHRvLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50XG4gKiAgICAgICAgVGhlIHRleHQgdG8gYWRkIHRvIHRoZSBlbGVtZW50LlxuICovXG5cbnZhciBzZXRUZXh0Q29udGVudCA9IGZ1bmN0aW9uIHNldFRleHRDb250ZW50KGVsLCBjb250ZW50KSB7XG4gIGlmIChlbC5zdHlsZVNoZWV0KSB7XG4gICAgZWwuc3R5bGVTaGVldC5jc3NUZXh0ID0gY29udGVudDtcbiAgfSBlbHNlIHtcbiAgICBlbC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gIH1cbn07XG5cbi8qKlxuICogQGZpbGUgZm4uanNcbiAqIEBtb2R1bGUgZm5cbiAqL1xuLyoqXG4gKiBCaW5kIChhLmsuYSBwcm94eSBvciBjb250ZXh0KS4gQSBzaW1wbGUgbWV0aG9kIGZvciBjaGFuZ2luZyB0aGUgY29udGV4dCBvZlxuICogYSBmdW5jdGlvbi5cbiAqXG4gKiBJdCBhbHNvIHN0b3JlcyBhIHVuaXF1ZSBpZCBvbiB0aGUgZnVuY3Rpb24gc28gaXQgY2FuIGJlIGVhc2lseSByZW1vdmVkIGZyb21cbiAqIGV2ZW50cy5cbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAgICB7TWl4ZWR9IGNvbnRleHRcbiAqICAgICAgICAgICBUaGUgb2JqZWN0IHRvIGJpbmQgYXMgc2NvcGUuXG4gKlxuICogQHBhcmFtICAgIHtGdW5jdGlvbn0gZm5cbiAqICAgICAgICAgICBUaGUgZnVuY3Rpb24gdG8gYmUgYm91bmQgdG8gYSBzY29wZS5cbiAqXG4gKiBAcGFyYW0gICAge251bWJlcn0gW3VpZF1cbiAqICAgICAgICAgICBBbiBvcHRpb25hbCB1bmlxdWUgSUQgZm9yIHRoZSBmdW5jdGlvbiB0byBiZSBzZXRcbiAqXG4gKiBAcmV0dXJuICAge0Z1bmN0aW9ufVxuICogICAgICAgICAgIFRoZSBuZXcgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGJvdW5kIGludG8gdGhlIGNvbnRleHQgZ2l2ZW5cbiAqL1xuXG52YXIgYmluZCA9IGZ1bmN0aW9uIGJpbmQoY29udGV4dCwgZm4sIHVpZCkge1xuICAvLyBNYWtlIHN1cmUgdGhlIGZ1bmN0aW9uIGhhcyBhIHVuaXF1ZSBJRFxuICBpZiAoIWZuLmd1aWQpIHtcbiAgICBmbi5ndWlkID0gbmV3R1VJRCgpO1xuICB9IC8vIENyZWF0ZSB0aGUgbmV3IGZ1bmN0aW9uIHRoYXQgY2hhbmdlcyB0aGUgY29udGV4dFxuXG5cbiAgdmFyIGJvdW5kID0gZnVuY3Rpb24gYm91bmQoKSB7XG4gICAgcmV0dXJuIGZuLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gIH07IC8vIEFsbG93IGZvciB0aGUgYWJpbGl0eSB0byBpbmRpdmlkdWFsaXplIHRoaXMgZnVuY3Rpb25cbiAgLy8gTmVlZGVkIGluIHRoZSBjYXNlIHdoZXJlIG11bHRpcGxlIG9iamVjdHMgbWlnaHQgc2hhcmUgdGhlIHNhbWUgcHJvdG90eXBlXG4gIC8vIElGIGJvdGggaXRlbXMgYWRkIGFuIGV2ZW50IGxpc3RlbmVyIHdpdGggdGhlIHNhbWUgZnVuY3Rpb24sIHRoZW4geW91IHRyeSB0byByZW1vdmUganVzdCBvbmVcbiAgLy8gaXQgd2lsbCByZW1vdmUgYm90aCBiZWNhdXNlIHRoZXkgYm90aCBoYXZlIHRoZSBzYW1lIGd1aWQuXG4gIC8vIHdoZW4gdXNpbmcgdGhpcywgeW91IG5lZWQgdG8gdXNlIHRoZSBiaW5kIG1ldGhvZCB3aGVuIHlvdSByZW1vdmUgdGhlIGxpc3RlbmVyIGFzIHdlbGwuXG4gIC8vIGN1cnJlbnRseSB1c2VkIGluIHRleHQgdHJhY2tzXG5cblxuICBib3VuZC5ndWlkID0gdWlkID8gdWlkICsgJ18nICsgZm4uZ3VpZCA6IGZuLmd1aWQ7XG4gIHJldHVybiBib3VuZDtcbn07XG4vKipcbiAqIFdyYXBzIHRoZSBnaXZlbiBmdW5jdGlvbiwgYGZuYCwgd2l0aCBhIG5ldyBmdW5jdGlvbiB0aGF0IG9ubHkgaW52b2tlcyBgZm5gXG4gKiBhdCBtb3N0IG9uY2UgcGVyIGV2ZXJ5IGB3YWl0YCBtaWxsaXNlY29uZHMuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gICAge0Z1bmN0aW9ufSBmblxuICogICAgICAgICAgIFRoZSBmdW5jdGlvbiB0byBiZSB0aHJvdHRsZWQuXG4gKlxuICogQHBhcmFtICAgIHtudW1iZXJ9ICAgd2FpdFxuICogICAgICAgICAgIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJ5IHdoaWNoIHRvIHRocm90dGxlLlxuICpcbiAqIEByZXR1cm4gICB7RnVuY3Rpb259XG4gKi9cblxudmFyIHRocm90dGxlID0gZnVuY3Rpb24gdGhyb3R0bGUoZm4sIHdhaXQpIHtcbiAgdmFyIGxhc3QgPSBEYXRlLm5vdygpO1xuXG4gIHZhciB0aHJvdHRsZWQgPSBmdW5jdGlvbiB0aHJvdHRsZWQoKSB7XG4gICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG5cbiAgICBpZiAobm93IC0gbGFzdCA+PSB3YWl0KSB7XG4gICAgICBmbi5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cyk7XG4gICAgICBsYXN0ID0gbm93O1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gdGhyb3R0bGVkO1xufTtcbi8qKlxuICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG4gKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcbiAqIGludm9rZWQuXG4gKlxuICogSW5zcGlyZWQgYnkgbG9kYXNoIGFuZCB1bmRlcnNjb3JlIGltcGxlbWVudGF0aW9ucy5cbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAgICB7RnVuY3Rpb259IGZ1bmNcbiAqICAgICAgICAgICBUaGUgZnVuY3Rpb24gdG8gd3JhcCB3aXRoIGRlYm91bmNlIGJlaGF2aW9yLlxuICpcbiAqIEBwYXJhbSAgICB7bnVtYmVyfSB3YWl0XG4gKiAgICAgICAgICAgVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdCBhZnRlciB0aGUgbGFzdCBpbnZvY2F0aW9uLlxuICpcbiAqIEBwYXJhbSAgICB7Ym9vbGVhbn0gW2ltbWVkaWF0ZV1cbiAqICAgICAgICAgICBXaGV0aGVyIG9yIG5vdCB0byBpbnZva2UgdGhlIGZ1bmN0aW9uIGltbWVkaWF0ZWx5IHVwb24gY3JlYXRpb24uXG4gKlxuICogQHBhcmFtICAgIHtPYmplY3R9IFtjb250ZXh0PXdpbmRvd11cbiAqICAgICAgICAgICBUaGUgXCJjb250ZXh0XCIgaW4gd2hpY2ggdGhlIGRlYm91bmNlZCBmdW5jdGlvbiBzaG91bGQgZGVib3VuY2UuIEZvclxuICogICAgICAgICAgIGV4YW1wbGUsIGlmIHRoaXMgZnVuY3Rpb24gc2hvdWxkIGJlIHRpZWQgdG8gYSBWaWRlby5qcyBwbGF5ZXIsXG4gKiAgICAgICAgICAgdGhlIHBsYXllciBjYW4gYmUgcGFzc2VkIGhlcmUuIEFsdGVybmF0aXZlbHksIGRlZmF1bHRzIHRvIHRoZVxuICogICAgICAgICAgIGdsb2JhbCBgd2luZG93YCBvYmplY3QuXG4gKlxuICogQHJldHVybiAgIHtGdW5jdGlvbn1cbiAqICAgICAgICAgICBBIGRlYm91bmNlZCBmdW5jdGlvbi5cbiAqL1xuXG52YXIgZGVib3VuY2UgPSBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUsIGNvbnRleHQpIHtcbiAgaWYgKGNvbnRleHQgPT09IHZvaWQgMCkge1xuICAgIGNvbnRleHQgPSB3aW5kb3ckMTtcbiAgfVxuXG4gIHZhciB0aW1lb3V0O1xuXG4gIHZhciBjYW5jZWwgPSBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgY29udGV4dC5jbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgdGltZW91dCA9IG51bGw7XG4gIH07XG4gIC8qIGVzbGludC1kaXNhYmxlIGNvbnNpc3RlbnQtdGhpcyAqL1xuXG5cbiAgdmFyIGRlYm91bmNlZCA9IGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgICB2YXIgX2xhdGVyID0gZnVuY3Rpb24gbGF0ZXIoKSB7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIF9sYXRlciA9IG51bGw7XG5cbiAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgIGZ1bmMuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmICghdGltZW91dCAmJiBpbW1lZGlhdGUpIHtcbiAgICAgIGZ1bmMuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgfVxuXG4gICAgY29udGV4dC5jbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgdGltZW91dCA9IGNvbnRleHQuc2V0VGltZW91dChfbGF0ZXIsIHdhaXQpO1xuICB9O1xuICAvKiBlc2xpbnQtZW5hYmxlIGNvbnNpc3RlbnQtdGhpcyAqL1xuXG5cbiAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgcmV0dXJuIGRlYm91bmNlZDtcbn07XG5cbi8qKlxuICogQGZpbGUgc3JjL2pzL2V2ZW50LXRhcmdldC5qc1xuICovXG4vKipcbiAqIGBFdmVudFRhcmdldGAgaXMgYSBjbGFzcyB0aGF0IGNhbiBoYXZlIHRoZSBzYW1lIEFQSSBhcyB0aGUgRE9NIGBFdmVudFRhcmdldGAuIEl0XG4gKiBhZGRzIHNob3J0aGFuZCBmdW5jdGlvbnMgdGhhdCB3cmFwIGFyb3VuZCBsZW5ndGh5IGZ1bmN0aW9ucy4gRm9yIGV4YW1wbGU6XG4gKiB0aGUgYG9uYCBmdW5jdGlvbiBpcyBhIHdyYXBwZXIgYXJvdW5kIGBhZGRFdmVudExpc3RlbmVyYC5cbiAqXG4gKiBAc2VlIFtFdmVudFRhcmdldCBTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTItRXZlbnRzL2V2ZW50cy5odG1sI0V2ZW50cy1FdmVudFRhcmdldH1cbiAqIEBjbGFzcyBFdmVudFRhcmdldFxuICovXG5cbnZhciBFdmVudFRhcmdldCA9IGZ1bmN0aW9uIEV2ZW50VGFyZ2V0KCkge307XG4vKipcbiAqIEEgQ3VzdG9tIERPTSBldmVudC5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBFdmVudFRhcmdldH5FdmVudFxuICogQHNlZSBbUHJvcGVydGllc117QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0N1c3RvbUV2ZW50fVxuICovXG5cbi8qKlxuICogQWxsIGV2ZW50IGxpc3RlbmVycyBzaG91bGQgZm9sbG93IHRoZSBmb2xsb3dpbmcgZm9ybWF0LlxuICpcbiAqIEBjYWxsYmFjayBFdmVudFRhcmdldH5FdmVudExpc3RlbmVyXG4gKiBAdGhpcyB7RXZlbnRUYXJnZXR9XG4gKlxuICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAqICAgICAgICB0aGUgZXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhpcyBmdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbaGFzaF1cbiAqICAgICAgICBoYXNoIG9mIGRhdGEgc2VudCBkdXJpbmcgdGhlIGV2ZW50XG4gKi9cblxuLyoqXG4gKiBBbiBvYmplY3QgY29udGFpbmluZyBldmVudCBuYW1lcyBhcyBrZXlzIGFuZCBib29sZWFucyBhcyB2YWx1ZXMuXG4gKlxuICogPiBOT1RFOiBJZiBhbiBldmVudCBuYW1lIGlzIHNldCB0byBhIHRydWUgdmFsdWUgaGVyZSB7QGxpbmsgRXZlbnRUYXJnZXQjdHJpZ2dlcn1cbiAqICAgICAgICAgd2lsbCBoYXZlIGV4dHJhIGZ1bmN0aW9uYWxpdHkuIFNlZSB0aGF0IGZ1bmN0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqIEBwcm9wZXJ0eSBFdmVudFRhcmdldC5wcm90b3R5cGUuYWxsb3dlZEV2ZW50c19cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5FdmVudFRhcmdldC5wcm90b3R5cGUuYWxsb3dlZEV2ZW50c18gPSB7fTtcbi8qKlxuICogQWRkcyBhbiBgZXZlbnQgbGlzdGVuZXJgIHRvIGFuIGluc3RhbmNlIG9mIGFuIGBFdmVudFRhcmdldGAuIEFuIGBldmVudCBsaXN0ZW5lcmAgaXMgYVxuICogZnVuY3Rpb24gdGhhdCB3aWxsIGdldCBjYWxsZWQgd2hlbiBhbiBldmVudCB3aXRoIGEgY2VydGFpbiBuYW1lIGdldHMgdHJpZ2dlcmVkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSB0eXBlXG4gKiAgICAgICAgQW4gZXZlbnQgbmFtZSBvciBhbiBhcnJheSBvZiBldmVudCBuYW1lcy5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50TGlzdGVuZXJ9IGZuXG4gKiAgICAgICAgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2l0aCBgRXZlbnRUYXJnZXRgc1xuICovXG5cbkV2ZW50VGFyZ2V0LnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xuICAvLyBSZW1vdmUgdGhlIGFkZEV2ZW50TGlzdGVuZXIgYWxpYXMgYmVmb3JlIGNhbGxpbmcgRXZlbnRzLm9uXG4gIC8vIHNvIHdlIGRvbid0IGdldCBpbnRvIGFuIGluZmluaXRlIHR5cGUgbG9vcFxuICB2YXIgYWVsID0gdGhpcy5hZGRFdmVudExpc3RlbmVyO1xuXG4gIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gIG9uKHRoaXMsIHR5cGUsIGZuKTtcbiAgdGhpcy5hZGRFdmVudExpc3RlbmVyID0gYWVsO1xufTtcbi8qKlxuICogQW4gYWxpYXMgb2Yge0BsaW5rIEV2ZW50VGFyZ2V0I29ufS4gQWxsb3dzIGBFdmVudFRhcmdldGAgdG8gbWltaWNcbiAqIHRoZSBzdGFuZGFyZCBET00gQVBJLlxuICpcbiAqIEBmdW5jdGlvblxuICogQHNlZSB7QGxpbmsgRXZlbnRUYXJnZXQjb259XG4gKi9cblxuXG5FdmVudFRhcmdldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5vbjtcbi8qKlxuICogUmVtb3ZlcyBhbiBgZXZlbnQgbGlzdGVuZXJgIGZvciBhIHNwZWNpZmljIGV2ZW50IGZyb20gYW4gaW5zdGFuY2Ugb2YgYEV2ZW50VGFyZ2V0YC5cbiAqIFRoaXMgbWFrZXMgaXQgc28gdGhhdCB0aGUgYGV2ZW50IGxpc3RlbmVyYCB3aWxsIG5vIGxvbmdlciBnZXQgY2FsbGVkIHdoZW4gdGhlXG4gKiBuYW1lZCBldmVudCBoYXBwZW5zLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSB0eXBlXG4gKiAgICAgICAgQW4gZXZlbnQgbmFtZSBvciBhbiBhcnJheSBvZiBldmVudCBuYW1lcy5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50TGlzdGVuZXJ9IGZuXG4gKiAgICAgICAgVGhlIGZ1bmN0aW9uIHRvIHJlbW92ZS5cbiAqL1xuXG5FdmVudFRhcmdldC5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gIG9mZih0aGlzLCB0eXBlLCBmbik7XG59O1xuLyoqXG4gKiBBbiBhbGlhcyBvZiB7QGxpbmsgRXZlbnRUYXJnZXQjb2ZmfS4gQWxsb3dzIGBFdmVudFRhcmdldGAgdG8gbWltaWNcbiAqIHRoZSBzdGFuZGFyZCBET00gQVBJLlxuICpcbiAqIEBmdW5jdGlvblxuICogQHNlZSB7QGxpbmsgRXZlbnRUYXJnZXQjb2ZmfVxuICovXG5cblxuRXZlbnRUYXJnZXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBFdmVudFRhcmdldC5wcm90b3R5cGUub2ZmO1xuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYWRkIGFuIGBldmVudCBsaXN0ZW5lcmAgdGhhdCBnZXRzIHRyaWdnZXJlZCBvbmx5IG9uY2UuIEFmdGVyIHRoZVxuICogZmlyc3QgdHJpZ2dlciBpdCB3aWxsIGdldCByZW1vdmVkLiBUaGlzIGlzIGxpa2UgYWRkaW5nIGFuIGBldmVudCBsaXN0ZW5lcmBcbiAqIHdpdGgge0BsaW5rIEV2ZW50VGFyZ2V0I29ufSB0aGF0IGNhbGxzIHtAbGluayBFdmVudFRhcmdldCNvZmZ9IG9uIGl0c2VsZi5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gdHlwZVxuICogICAgICAgIEFuIGV2ZW50IG5hbWUgb3IgYW4gYXJyYXkgb2YgZXZlbnQgbmFtZXMuXG4gKlxuICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudExpc3RlbmVyfSBmblxuICogICAgICAgIFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb25jZSBmb3IgZWFjaCBldmVudCBuYW1lLlxuICovXG5cbkV2ZW50VGFyZ2V0LnByb3RvdHlwZS5vbmUgPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgLy8gUmVtb3ZlIHRoZSBhZGRFdmVudExpc3RlbmVyIGFsaWFsaW5nIEV2ZW50cy5vblxuICAvLyBzbyB3ZSBkb24ndCBnZXQgaW50byBhbiBpbmZpbml0ZSB0eXBlIGxvb3BcbiAgdmFyIGFlbCA9IHRoaXMuYWRkRXZlbnRMaXN0ZW5lcjtcblxuICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7fTtcblxuICBvbmUodGhpcywgdHlwZSwgZm4pO1xuICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIgPSBhZWw7XG59O1xuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGNhdXNlcyBhbiBldmVudCB0byBoYXBwZW4uIFRoaXMgd2lsbCB0aGVuIGNhdXNlIGFueSBgZXZlbnQgbGlzdGVuZXJzYFxuICogdGhhdCBhcmUgd2FpdGluZyBmb3IgdGhhdCBldmVudCwgdG8gZ2V0IGNhbGxlZC4gSWYgdGhlcmUgYXJlIG5vIGBldmVudCBsaXN0ZW5lcnNgXG4gKiBmb3IgYW4gZXZlbnQgdGhlbiBub3RoaW5nIHdpbGwgaGFwcGVuLlxuICpcbiAqIElmIHRoZSBuYW1lIG9mIHRoZSBgRXZlbnRgIHRoYXQgaXMgYmVpbmcgdHJpZ2dlcmVkIGlzIGluIGBFdmVudFRhcmdldC5hbGxvd2VkRXZlbnRzX2AuXG4gKiBUcmlnZ2VyIHdpbGwgYWxzbyBjYWxsIHRoZSBgb25gICsgYHVwcGVyY2FzZUV2ZW50TmFtZWAgZnVuY3Rpb24uXG4gKlxuICogRXhhbXBsZTpcbiAqICdjbGljaycgaXMgaW4gYEV2ZW50VGFyZ2V0LmFsbG93ZWRFdmVudHNfYCwgc28sIHRyaWdnZXIgd2lsbCBhdHRlbXB0IHRvIGNhbGxcbiAqIGBvbkNsaWNrYCBpZiBpdCBleGlzdHMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8RXZlbnRUYXJnZXR+RXZlbnR8T2JqZWN0fSBldmVudFxuICogICAgICAgIFRoZSBuYW1lIG9mIHRoZSBldmVudCwgYW4gYEV2ZW50YCwgb3IgYW4gb2JqZWN0IHdpdGggYSBrZXkgb2YgdHlwZSBzZXQgdG9cbiAqICAgICAgICBhbiBldmVudCBuYW1lLlxuICovXG5cblxuRXZlbnRUYXJnZXQucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgdmFyIHR5cGUgPSBldmVudC50eXBlIHx8IGV2ZW50OyAvLyBkZXByZWNhdGlvblxuICAvLyBJbiBhIGZ1dHVyZSB2ZXJzaW9uIHdlIHNob3VsZCBkZWZhdWx0IHRhcmdldCB0byBgdGhpc2BcbiAgLy8gc2ltaWxhciB0byBob3cgd2UgZGVmYXVsdCB0aGUgdGFyZ2V0IHRvIGBlbGVtYCBpblxuICAvLyBgRXZlbnRzLnRyaWdnZXJgLiBSaWdodCBub3cgdGhlIGRlZmF1bHQgYHRhcmdldGAgd2lsbCBiZVxuICAvLyBgZG9jdW1lbnRgIGR1ZSB0byB0aGUgYEV2ZW50LmZpeEV2ZW50YCBjYWxsLlxuXG4gIGlmICh0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgZXZlbnQgPSB7XG4gICAgICB0eXBlOiB0eXBlXG4gICAgfTtcbiAgfVxuXG4gIGV2ZW50ID0gZml4RXZlbnQoZXZlbnQpO1xuXG4gIGlmICh0aGlzLmFsbG93ZWRFdmVudHNfW3R5cGVdICYmIHRoaXNbJ29uJyArIHR5cGVdKSB7XG4gICAgdGhpc1snb24nICsgdHlwZV0oZXZlbnQpO1xuICB9XG5cbiAgdHJpZ2dlcih0aGlzLCBldmVudCk7XG59O1xuLyoqXG4gKiBBbiBhbGlhcyBvZiB7QGxpbmsgRXZlbnRUYXJnZXQjdHJpZ2dlcn0uIEFsbG93cyBgRXZlbnRUYXJnZXRgIHRvIG1pbWljXG4gKiB0aGUgc3RhbmRhcmQgRE9NIEFQSS5cbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBzZWUge0BsaW5rIEV2ZW50VGFyZ2V0I3RyaWdnZXJ9XG4gKi9cblxuXG5FdmVudFRhcmdldC5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudCA9IEV2ZW50VGFyZ2V0LnByb3RvdHlwZS50cmlnZ2VyO1xudmFyIEVWRU5UX01BUDtcblxuRXZlbnRUYXJnZXQucHJvdG90eXBlLnF1ZXVlVHJpZ2dlciA9IGZ1bmN0aW9uIChldmVudCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIC8vIG9ubHkgc2V0IHVwIEVWRU5UX01BUCBpZiBpdCdsbCBiZSB1c2VkXG4gIGlmICghRVZFTlRfTUFQKSB7XG4gICAgRVZFTlRfTUFQID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgdmFyIHR5cGUgPSBldmVudC50eXBlIHx8IGV2ZW50O1xuICB2YXIgbWFwID0gRVZFTlRfTUFQLmdldCh0aGlzKTtcblxuICBpZiAoIW1hcCkge1xuICAgIG1hcCA9IG5ldyBNYXAoKTtcbiAgICBFVkVOVF9NQVAuc2V0KHRoaXMsIG1hcCk7XG4gIH1cblxuICB2YXIgb2xkVGltZW91dCA9IG1hcC5nZXQodHlwZSk7XG4gIG1hcC5kZWxldGUodHlwZSk7XG4gIHdpbmRvdyQxLmNsZWFyVGltZW91dChvbGRUaW1lb3V0KTtcbiAgdmFyIHRpbWVvdXQgPSB3aW5kb3ckMS5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAvLyBpZiB3ZSBjbGVhcmVkIG91dCBhbGwgdGltZW91dHMgZm9yIHRoZSBjdXJyZW50IHRhcmdldCwgZGVsZXRlIGl0cyBtYXBcbiAgICBpZiAobWFwLnNpemUgPT09IDApIHtcbiAgICAgIG1hcCA9IG51bGw7XG4gICAgICBFVkVOVF9NQVAuZGVsZXRlKF90aGlzKTtcbiAgICB9XG5cbiAgICBfdGhpcy50cmlnZ2VyKGV2ZW50KTtcbiAgfSwgMCk7XG4gIG1hcC5zZXQodHlwZSwgdGltZW91dCk7XG59O1xuXG4vKipcbiAqIEBmaWxlIG1peGlucy9ldmVudGVkLmpzXG4gKiBAbW9kdWxlIGV2ZW50ZWRcbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IGFuIG9iamVjdCBoYXMgaGFkIHRoZSBldmVudGVkIG1peGluIGFwcGxpZWQuXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fSBvYmplY3RcbiAqICAgICAgICAgQW4gb2JqZWN0IHRvIHRlc3QuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqICAgICAgICAgV2hldGhlciBvciBub3QgdGhlIG9iamVjdCBhcHBlYXJzIHRvIGJlIGV2ZW50ZWQuXG4gKi9cblxudmFyIGlzRXZlbnRlZCA9IGZ1bmN0aW9uIGlzRXZlbnRlZChvYmplY3QpIHtcbiAgcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIEV2ZW50VGFyZ2V0IHx8ICEhb2JqZWN0LmV2ZW50QnVzRWxfICYmIFsnb24nLCAnb25lJywgJ29mZicsICd0cmlnZ2VyJ10uZXZlcnkoZnVuY3Rpb24gKGspIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iamVjdFtrXSA9PT0gJ2Z1bmN0aW9uJztcbiAgfSk7XG59O1xuLyoqXG4gKiBBZGRzIGEgY2FsbGJhY2sgdG8gcnVuIGFmdGVyIHRoZSBldmVudGVkIG1peGluIGFwcGxpZWQuXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fSBvYmplY3RcbiAqICAgICAgICAgQW4gb2JqZWN0IHRvIEFkZFxuICogQHBhcmFtICB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiAgICAgICAgIFRoZSBjYWxsYmFjayB0byBydW4uXG4gKi9cblxuXG52YXIgYWRkRXZlbnRlZENhbGxiYWNrID0gZnVuY3Rpb24gYWRkRXZlbnRlZENhbGxiYWNrKHRhcmdldCwgY2FsbGJhY2spIHtcbiAgaWYgKGlzRXZlbnRlZCh0YXJnZXQpKSB7XG4gICAgY2FsbGJhY2soKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIXRhcmdldC5ldmVudGVkQ2FsbGJhY2tzKSB7XG4gICAgICB0YXJnZXQuZXZlbnRlZENhbGxiYWNrcyA9IFtdO1xuICAgIH1cblxuICAgIHRhcmdldC5ldmVudGVkQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICB9XG59O1xuLyoqXG4gKiBXaGV0aGVyIGEgdmFsdWUgaXMgYSB2YWxpZCBldmVudCB0eXBlIC0gbm9uLWVtcHR5IHN0cmluZyBvciBhcnJheS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtICB7c3RyaW5nfEFycmF5fSB0eXBlXG4gKiAgICAgICAgIFRoZSB0eXBlIHZhbHVlIHRvIHRlc3QuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqICAgICAgICAgV2hldGhlciBvciBub3QgdGhlIHR5cGUgaXMgYSB2YWxpZCBldmVudCB0eXBlLlxuICovXG5cblxudmFyIGlzVmFsaWRFdmVudFR5cGUgPSBmdW5jdGlvbiBpc1ZhbGlkRXZlbnRUeXBlKHR5cGUpIHtcbiAgcmV0dXJuICgvLyBUaGUgcmVnZXggaGVyZSB2ZXJpZmllcyB0aGF0IHRoZSBgdHlwZWAgY29udGFpbnMgYXQgbGVhc3Qgb25lIG5vbi1cbiAgICAvLyB3aGl0ZXNwYWNlIGNoYXJhY3Rlci5cbiAgICB0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycgJiYgL1xcUy8udGVzdCh0eXBlKSB8fCBBcnJheS5pc0FycmF5KHR5cGUpICYmICEhdHlwZS5sZW5ndGhcbiAgKTtcbn07XG4vKipcbiAqIFZhbGlkYXRlcyBhIHZhbHVlIHRvIGRldGVybWluZSBpZiBpdCBpcyBhIHZhbGlkIGV2ZW50IHRhcmdldC4gVGhyb3dzIGlmIG5vdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHRocm93cyB7RXJyb3J9XG4gKiAgICAgICAgIElmIHRoZSB0YXJnZXQgZG9lcyBub3QgYXBwZWFyIHRvIGJlIGEgdmFsaWQgZXZlbnQgdGFyZ2V0LlxuICpcbiAqIEBwYXJhbSAge09iamVjdH0gdGFyZ2V0XG4gKiAgICAgICAgIFRoZSBvYmplY3QgdG8gdGVzdC5cbiAqL1xuXG5cbnZhciB2YWxpZGF0ZVRhcmdldCA9IGZ1bmN0aW9uIHZhbGlkYXRlVGFyZ2V0KHRhcmdldCkge1xuICBpZiAoIXRhcmdldC5ub2RlTmFtZSAmJiAhaXNFdmVudGVkKHRhcmdldCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdGFyZ2V0OyBtdXN0IGJlIGEgRE9NIG5vZGUgb3IgZXZlbnRlZCBvYmplY3QuJyk7XG4gIH1cbn07XG4vKipcbiAqIFZhbGlkYXRlcyBhIHZhbHVlIHRvIGRldGVybWluZSBpZiBpdCBpcyBhIHZhbGlkIGV2ZW50IHRhcmdldC4gVGhyb3dzIGlmIG5vdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHRocm93cyB7RXJyb3J9XG4gKiAgICAgICAgIElmIHRoZSB0eXBlIGRvZXMgbm90IGFwcGVhciB0byBiZSBhIHZhbGlkIGV2ZW50IHR5cGUuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfEFycmF5fSB0eXBlXG4gKiAgICAgICAgIFRoZSB0eXBlIHRvIHRlc3QuXG4gKi9cblxuXG52YXIgdmFsaWRhdGVFdmVudFR5cGUgPSBmdW5jdGlvbiB2YWxpZGF0ZUV2ZW50VHlwZSh0eXBlKSB7XG4gIGlmICghaXNWYWxpZEV2ZW50VHlwZSh0eXBlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBldmVudCB0eXBlOyBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyBvciBhcnJheS4nKTtcbiAgfVxufTtcbi8qKlxuICogVmFsaWRhdGVzIGEgdmFsdWUgdG8gZGV0ZXJtaW5lIGlmIGl0IGlzIGEgdmFsaWQgbGlzdGVuZXIuIFRocm93cyBpZiBub3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEB0aHJvd3Mge0Vycm9yfVxuICogICAgICAgICBJZiB0aGUgbGlzdGVuZXIgaXMgbm90IGEgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtICB7RnVuY3Rpb259IGxpc3RlbmVyXG4gKiAgICAgICAgIFRoZSBsaXN0ZW5lciB0byB0ZXN0LlxuICovXG5cblxudmFyIHZhbGlkYXRlTGlzdGVuZXIgPSBmdW5jdGlvbiB2YWxpZGF0ZUxpc3RlbmVyKGxpc3RlbmVyKSB7XG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbGlzdGVuZXI7IG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgfVxufTtcbi8qKlxuICogVGFrZXMgYW4gYXJyYXkgb2YgYXJndW1lbnRzIGdpdmVuIHRvIGBvbigpYCBvciBgb25lKClgLCB2YWxpZGF0ZXMgdGhlbSwgYW5kXG4gKiBub3JtYWxpemVzIHRoZW0gaW50byBhbiBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSAge09iamVjdH0gc2VsZlxuICogICAgICAgICBUaGUgZXZlbnRlZCBvYmplY3Qgb24gd2hpY2ggYG9uKClgIG9yIGBvbmUoKWAgd2FzIGNhbGxlZC4gVGhpc1xuICogICAgICAgICBvYmplY3Qgd2lsbCBiZSBib3VuZCBhcyB0aGUgYHRoaXNgIHZhbHVlIGZvciB0aGUgbGlzdGVuZXIuXG4gKlxuICogQHBhcmFtICB7QXJyYXl9IGFyZ3NcbiAqICAgICAgICAgQW4gYXJyYXkgb2YgYXJndW1lbnRzIHBhc3NlZCB0byBgb24oKWAgb3IgYG9uZSgpYC5cbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiAgICAgICAgIEFuIG9iamVjdCBjb250YWluaW5nIHVzZWZ1bCB2YWx1ZXMgZm9yIGBvbigpYCBvciBgb25lKClgIGNhbGxzLlxuICovXG5cblxudmFyIG5vcm1hbGl6ZUxpc3RlbkFyZ3MgPSBmdW5jdGlvbiBub3JtYWxpemVMaXN0ZW5BcmdzKHNlbGYsIGFyZ3MpIHtcbiAgLy8gSWYgdGhlIG51bWJlciBvZiBhcmd1bWVudHMgaXMgbGVzcyB0aGFuIDMsIHRoZSB0YXJnZXQgaXMgYWx3YXlzIHRoZVxuICAvLyBldmVudGVkIG9iamVjdCBpdHNlbGYuXG4gIHZhciBpc1RhcmdldGluZ1NlbGYgPSBhcmdzLmxlbmd0aCA8IDMgfHwgYXJnc1swXSA9PT0gc2VsZiB8fCBhcmdzWzBdID09PSBzZWxmLmV2ZW50QnVzRWxfO1xuICB2YXIgdGFyZ2V0O1xuICB2YXIgdHlwZTtcbiAgdmFyIGxpc3RlbmVyO1xuXG4gIGlmIChpc1RhcmdldGluZ1NlbGYpIHtcbiAgICB0YXJnZXQgPSBzZWxmLmV2ZW50QnVzRWxfOyAvLyBEZWFsIHdpdGggY2FzZXMgd2hlcmUgd2UgZ290IDMgYXJndW1lbnRzLCBidXQgd2UgYXJlIHN0aWxsIGxpc3RlbmluZyB0b1xuICAgIC8vIHRoZSBldmVudGVkIG9iamVjdCBpdHNlbGYuXG5cbiAgICBpZiAoYXJncy5sZW5ndGggPj0gMykge1xuICAgICAgYXJncy5zaGlmdCgpO1xuICAgIH1cblxuICAgIHR5cGUgPSBhcmdzWzBdO1xuICAgIGxpc3RlbmVyID0gYXJnc1sxXTtcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQgPSBhcmdzWzBdO1xuICAgIHR5cGUgPSBhcmdzWzFdO1xuICAgIGxpc3RlbmVyID0gYXJnc1syXTtcbiAgfVxuXG4gIHZhbGlkYXRlVGFyZ2V0KHRhcmdldCk7XG4gIHZhbGlkYXRlRXZlbnRUeXBlKHR5cGUpO1xuICB2YWxpZGF0ZUxpc3RlbmVyKGxpc3RlbmVyKTtcbiAgbGlzdGVuZXIgPSBiaW5kKHNlbGYsIGxpc3RlbmVyKTtcbiAgcmV0dXJuIHtcbiAgICBpc1RhcmdldGluZ1NlbGY6IGlzVGFyZ2V0aW5nU2VsZixcbiAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICB0eXBlOiB0eXBlLFxuICAgIGxpc3RlbmVyOiBsaXN0ZW5lclxuICB9O1xufTtcbi8qKlxuICogQWRkcyB0aGUgbGlzdGVuZXIgdG8gdGhlIGV2ZW50IHR5cGUocykgb24gdGhlIHRhcmdldCwgbm9ybWFsaXppbmcgZm9yXG4gKiB0aGUgdHlwZSBvZiB0YXJnZXQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSAge0VsZW1lbnR8T2JqZWN0fSB0YXJnZXRcbiAqICAgICAgICAgQSBET00gbm9kZSBvciBldmVudGVkIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IG1ldGhvZFxuICogICAgICAgICBUaGUgZXZlbnQgYmluZGluZyBtZXRob2QgdG8gdXNlIChcIm9uXCIgb3IgXCJvbmVcIikuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfEFycmF5fSB0eXBlXG4gKiAgICAgICAgIE9uZSBvciBtb3JlIGV2ZW50IHR5cGUocykuXG4gKlxuICogQHBhcmFtICB7RnVuY3Rpb259IGxpc3RlbmVyXG4gKiAgICAgICAgIEEgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKi9cblxuXG52YXIgbGlzdGVuID0gZnVuY3Rpb24gbGlzdGVuKHRhcmdldCwgbWV0aG9kLCB0eXBlLCBsaXN0ZW5lcikge1xuICB2YWxpZGF0ZVRhcmdldCh0YXJnZXQpO1xuXG4gIGlmICh0YXJnZXQubm9kZU5hbWUpIHtcbiAgICBFdmVudHNbbWV0aG9kXSh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyKTtcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXRbbWV0aG9kXSh0eXBlLCBsaXN0ZW5lcik7XG4gIH1cbn07XG4vKipcbiAqIENvbnRhaW5zIG1ldGhvZHMgdGhhdCBwcm92aWRlIGV2ZW50IGNhcGFiaWxpdGllcyB0byBhbiBvYmplY3Qgd2hpY2ggaXMgcGFzc2VkXG4gKiB0byB7QGxpbmsgbW9kdWxlOmV2ZW50ZWR8ZXZlbnRlZH0uXG4gKlxuICogQG1peGluIEV2ZW50ZWRNaXhpblxuICovXG5cblxudmFyIEV2ZW50ZWRNaXhpbiA9IHtcbiAgLyoqXG4gICAqIEFkZCBhIGxpc3RlbmVyIHRvIGFuIGV2ZW50IChvciBldmVudHMpIG9uIHRoaXMgb2JqZWN0IG9yIGFub3RoZXIgZXZlbnRlZFxuICAgKiBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ3xBcnJheXxFbGVtZW50fE9iamVjdH0gdGFyZ2V0T3JUeXBlXG4gICAqICAgICAgICAgSWYgdGhpcyBpcyBhIHN0cmluZyBvciBhcnJheSwgaXQgcmVwcmVzZW50cyB0aGUgZXZlbnQgdHlwZShzKVxuICAgKiAgICAgICAgIHRoYXQgd2lsbCB0cmlnZ2VyIHRoZSBsaXN0ZW5lci5cbiAgICpcbiAgICogICAgICAgICBBbm90aGVyIGV2ZW50ZWQgb2JqZWN0IGNhbiBiZSBwYXNzZWQgaGVyZSBpbnN0ZWFkLCB3aGljaCB3aWxsXG4gICAqICAgICAgICAgY2F1c2UgdGhlIGxpc3RlbmVyIHRvIGxpc3RlbiBmb3IgZXZlbnRzIG9uIF90aGF0XyBvYmplY3QuXG4gICAqXG4gICAqICAgICAgICAgSW4gZWl0aGVyIGNhc2UsIHRoZSBsaXN0ZW5lcidzIGB0aGlzYCB2YWx1ZSB3aWxsIGJlIGJvdW5kIHRvXG4gICAqICAgICAgICAgdGhpcyBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ3xBcnJheXxGdW5jdGlvbn0gdHlwZU9yTGlzdGVuZXJcbiAgICogICAgICAgICBJZiB0aGUgZmlyc3QgYXJndW1lbnQgd2FzIGEgc3RyaW5nIG9yIGFycmF5LCB0aGlzIHNob3VsZCBiZSB0aGVcbiAgICogICAgICAgICBsaXN0ZW5lciBmdW5jdGlvbi4gT3RoZXJ3aXNlLCB0aGlzIGlzIGEgc3RyaW5nIG9yIGFycmF5IG9mIGV2ZW50XG4gICAqICAgICAgICAgdHlwZShzKS5cbiAgICpcbiAgICogQHBhcmFtICB7RnVuY3Rpb259IFtsaXN0ZW5lcl1cbiAgICogICAgICAgICBJZiB0aGUgZmlyc3QgYXJndW1lbnQgd2FzIGFub3RoZXIgZXZlbnRlZCBvYmplY3QsIHRoaXMgd2lsbCBiZVxuICAgKiAgICAgICAgIHRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAgICovXG4gIG9uOiBmdW5jdGlvbiBvbiQkMSgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHZhciBfbm9ybWFsaXplTGlzdGVuQXJncyA9IG5vcm1hbGl6ZUxpc3RlbkFyZ3ModGhpcywgYXJncyksXG4gICAgICAgIGlzVGFyZ2V0aW5nU2VsZiA9IF9ub3JtYWxpemVMaXN0ZW5BcmdzLmlzVGFyZ2V0aW5nU2VsZixcbiAgICAgICAgdGFyZ2V0ID0gX25vcm1hbGl6ZUxpc3RlbkFyZ3MudGFyZ2V0LFxuICAgICAgICB0eXBlID0gX25vcm1hbGl6ZUxpc3RlbkFyZ3MudHlwZSxcbiAgICAgICAgbGlzdGVuZXIgPSBfbm9ybWFsaXplTGlzdGVuQXJncy5saXN0ZW5lcjtcblxuICAgIGxpc3Rlbih0YXJnZXQsICdvbicsIHR5cGUsIGxpc3RlbmVyKTsgLy8gSWYgdGhpcyBvYmplY3QgaXMgbGlzdGVuaW5nIHRvIGFub3RoZXIgZXZlbnRlZCBvYmplY3QuXG5cbiAgICBpZiAoIWlzVGFyZ2V0aW5nU2VsZikge1xuICAgICAgLy8gSWYgdGhpcyBvYmplY3QgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgbGlzdGVuZXIuXG4gICAgICB2YXIgcmVtb3ZlTGlzdGVuZXJPbkRpc3Bvc2UgPSBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lck9uRGlzcG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLm9mZih0YXJnZXQsIHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgIH07IC8vIFVzZSB0aGUgc2FtZSBmdW5jdGlvbiBJRCBhcyB0aGUgbGlzdGVuZXIgc28gd2UgY2FuIHJlbW92ZSBpdCBsYXRlciBpdFxuICAgICAgLy8gdXNpbmcgdGhlIElEIG9mIHRoZSBvcmlnaW5hbCBsaXN0ZW5lci5cblxuXG4gICAgICByZW1vdmVMaXN0ZW5lck9uRGlzcG9zZS5ndWlkID0gbGlzdGVuZXIuZ3VpZDsgLy8gQWRkIGEgbGlzdGVuZXIgdG8gdGhlIHRhcmdldCdzIGRpc3Bvc2UgZXZlbnQgYXMgd2VsbC4gVGhpcyBlbnN1cmVzXG4gICAgICAvLyB0aGF0IGlmIHRoZSB0YXJnZXQgaXMgZGlzcG9zZWQgQkVGT1JFIHRoaXMgb2JqZWN0LCB3ZSByZW1vdmUgdGhlXG4gICAgICAvLyByZW1vdmFsIGxpc3RlbmVyIHRoYXQgd2FzIGp1c3QgYWRkZWQuIE90aGVyd2lzZSwgd2UgY3JlYXRlIGEgbWVtb3J5IGxlYWsuXG5cbiAgICAgIHZhciByZW1vdmVSZW1vdmVyT25UYXJnZXREaXNwb3NlID0gZnVuY3Rpb24gcmVtb3ZlUmVtb3Zlck9uVGFyZ2V0RGlzcG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLm9mZignZGlzcG9zZScsIHJlbW92ZUxpc3RlbmVyT25EaXNwb3NlKTtcbiAgICAgIH07IC8vIFVzZSB0aGUgc2FtZSBmdW5jdGlvbiBJRCBhcyB0aGUgbGlzdGVuZXIgc28gd2UgY2FuIHJlbW92ZSBpdCBsYXRlclxuICAgICAgLy8gaXQgdXNpbmcgdGhlIElEIG9mIHRoZSBvcmlnaW5hbCBsaXN0ZW5lci5cblxuXG4gICAgICByZW1vdmVSZW1vdmVyT25UYXJnZXREaXNwb3NlLmd1aWQgPSBsaXN0ZW5lci5ndWlkO1xuICAgICAgbGlzdGVuKHRoaXMsICdvbicsICdkaXNwb3NlJywgcmVtb3ZlTGlzdGVuZXJPbkRpc3Bvc2UpO1xuICAgICAgbGlzdGVuKHRhcmdldCwgJ29uJywgJ2Rpc3Bvc2UnLCByZW1vdmVSZW1vdmVyT25UYXJnZXREaXNwb3NlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFkZCBhIGxpc3RlbmVyIHRvIGFuIGV2ZW50IChvciBldmVudHMpIG9uIHRoaXMgb2JqZWN0IG9yIGFub3RoZXIgZXZlbnRlZFxuICAgKiBvYmplY3QuIFRoZSBsaXN0ZW5lciB3aWxsIG9ubHkgYmUgY2FsbGVkIG9uY2UgYW5kIHRoZW4gcmVtb3ZlZC5cbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfEFycmF5fEVsZW1lbnR8T2JqZWN0fSB0YXJnZXRPclR5cGVcbiAgICogICAgICAgICBJZiB0aGlzIGlzIGEgc3RyaW5nIG9yIGFycmF5LCBpdCByZXByZXNlbnRzIHRoZSBldmVudCB0eXBlKHMpXG4gICAqICAgICAgICAgdGhhdCB3aWxsIHRyaWdnZXIgdGhlIGxpc3RlbmVyLlxuICAgKlxuICAgKiAgICAgICAgIEFub3RoZXIgZXZlbnRlZCBvYmplY3QgY2FuIGJlIHBhc3NlZCBoZXJlIGluc3RlYWQsIHdoaWNoIHdpbGxcbiAgICogICAgICAgICBjYXVzZSB0aGUgbGlzdGVuZXIgdG8gbGlzdGVuIGZvciBldmVudHMgb24gX3RoYXRfIG9iamVjdC5cbiAgICpcbiAgICogICAgICAgICBJbiBlaXRoZXIgY2FzZSwgdGhlIGxpc3RlbmVyJ3MgYHRoaXNgIHZhbHVlIHdpbGwgYmUgYm91bmQgdG9cbiAgICogICAgICAgICB0aGlzIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfEFycmF5fEZ1bmN0aW9ufSB0eXBlT3JMaXN0ZW5lclxuICAgKiAgICAgICAgIElmIHRoZSBmaXJzdCBhcmd1bWVudCB3YXMgYSBzdHJpbmcgb3IgYXJyYXksIHRoaXMgc2hvdWxkIGJlIHRoZVxuICAgKiAgICAgICAgIGxpc3RlbmVyIGZ1bmN0aW9uLiBPdGhlcndpc2UsIHRoaXMgaXMgYSBzdHJpbmcgb3IgYXJyYXkgb2YgZXZlbnRcbiAgICogICAgICAgICB0eXBlKHMpLlxuICAgKlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gW2xpc3RlbmVyXVxuICAgKiAgICAgICAgIElmIHRoZSBmaXJzdCBhcmd1bWVudCB3YXMgYW5vdGhlciBldmVudGVkIG9iamVjdCwgdGhpcyB3aWxsIGJlXG4gICAqICAgICAgICAgdGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICAgKi9cbiAgb25lOiBmdW5jdGlvbiBvbmUkJDEoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICB9XG5cbiAgICB2YXIgX25vcm1hbGl6ZUxpc3RlbkFyZ3MyID0gbm9ybWFsaXplTGlzdGVuQXJncyh0aGlzLCBhcmdzKSxcbiAgICAgICAgaXNUYXJnZXRpbmdTZWxmID0gX25vcm1hbGl6ZUxpc3RlbkFyZ3MyLmlzVGFyZ2V0aW5nU2VsZixcbiAgICAgICAgdGFyZ2V0ID0gX25vcm1hbGl6ZUxpc3RlbkFyZ3MyLnRhcmdldCxcbiAgICAgICAgdHlwZSA9IF9ub3JtYWxpemVMaXN0ZW5BcmdzMi50eXBlLFxuICAgICAgICBsaXN0ZW5lciA9IF9ub3JtYWxpemVMaXN0ZW5BcmdzMi5saXN0ZW5lcjsgLy8gVGFyZ2V0aW5nIHRoaXMgZXZlbnRlZCBvYmplY3QuXG5cblxuICAgIGlmIChpc1RhcmdldGluZ1NlbGYpIHtcbiAgICAgIGxpc3Rlbih0YXJnZXQsICdvbmUnLCB0eXBlLCBsaXN0ZW5lcik7IC8vIFRhcmdldGluZyBhbm90aGVyIGV2ZW50ZWQgb2JqZWN0LlxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgd3JhcHBlciA9IGZ1bmN0aW9uIHdyYXBwZXIoKSB7XG4gICAgICAgIF90aGlzMi5vZmYodGFyZ2V0LCB0eXBlLCB3cmFwcGVyKTtcblxuICAgICAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGxhcmdzID0gbmV3IEFycmF5KF9sZW4zKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgICAgICAgbGFyZ3NbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxpc3RlbmVyLmFwcGx5KG51bGwsIGxhcmdzKTtcbiAgICAgIH07IC8vIFVzZSB0aGUgc2FtZSBmdW5jdGlvbiBJRCBhcyB0aGUgbGlzdGVuZXIgc28gd2UgY2FuIHJlbW92ZSBpdCBsYXRlclxuICAgICAgLy8gaXQgdXNpbmcgdGhlIElEIG9mIHRoZSBvcmlnaW5hbCBsaXN0ZW5lci5cblxuXG4gICAgICB3cmFwcGVyLmd1aWQgPSBsaXN0ZW5lci5ndWlkO1xuICAgICAgbGlzdGVuKHRhcmdldCwgJ29uZScsIHR5cGUsIHdyYXBwZXIpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlcyBsaXN0ZW5lcihzKSBmcm9tIGV2ZW50KHMpIG9uIGFuIGV2ZW50ZWQgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd8QXJyYXl8RWxlbWVudHxPYmplY3R9IFt0YXJnZXRPclR5cGVdXG4gICAqICAgICAgICAgSWYgdGhpcyBpcyBhIHN0cmluZyBvciBhcnJheSwgaXQgcmVwcmVzZW50cyB0aGUgZXZlbnQgdHlwZShzKS5cbiAgICpcbiAgICogICAgICAgICBBbm90aGVyIGV2ZW50ZWQgb2JqZWN0IGNhbiBiZSBwYXNzZWQgaGVyZSBpbnN0ZWFkLCBpbiB3aGljaCBjYXNlXG4gICAqICAgICAgICAgQUxMIDMgYXJndW1lbnRzIGFyZSBfcmVxdWlyZWRfLlxuICAgKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd8QXJyYXl8RnVuY3Rpb259IFt0eXBlT3JMaXN0ZW5lcl1cbiAgICogICAgICAgICBJZiB0aGUgZmlyc3QgYXJndW1lbnQgd2FzIGEgc3RyaW5nIG9yIGFycmF5LCB0aGlzIG1heSBiZSB0aGVcbiAgICogICAgICAgICBsaXN0ZW5lciBmdW5jdGlvbi4gT3RoZXJ3aXNlLCB0aGlzIGlzIGEgc3RyaW5nIG9yIGFycmF5IG9mIGV2ZW50XG4gICAqICAgICAgICAgdHlwZShzKS5cbiAgICpcbiAgICogQHBhcmFtICB7RnVuY3Rpb259IFtsaXN0ZW5lcl1cbiAgICogICAgICAgICBJZiB0aGUgZmlyc3QgYXJndW1lbnQgd2FzIGFub3RoZXIgZXZlbnRlZCBvYmplY3QsIHRoaXMgd2lsbCBiZVxuICAgKiAgICAgICAgIHRoZSBsaXN0ZW5lciBmdW5jdGlvbjsgb3RoZXJ3aXNlLCBfYWxsXyBsaXN0ZW5lcnMgYm91bmQgdG8gdGhlXG4gICAqICAgICAgICAgZXZlbnQgdHlwZShzKSB3aWxsIGJlIHJlbW92ZWQuXG4gICAqL1xuICBvZmY6IGZ1bmN0aW9uIG9mZiQkMSh0YXJnZXRPclR5cGUsIHR5cGVPckxpc3RlbmVyLCBsaXN0ZW5lcikge1xuICAgIC8vIFRhcmdldGluZyB0aGlzIGV2ZW50ZWQgb2JqZWN0LlxuICAgIGlmICghdGFyZ2V0T3JUeXBlIHx8IGlzVmFsaWRFdmVudFR5cGUodGFyZ2V0T3JUeXBlKSkge1xuICAgICAgb2ZmKHRoaXMuZXZlbnRCdXNFbF8sIHRhcmdldE9yVHlwZSwgdHlwZU9yTGlzdGVuZXIpOyAvLyBUYXJnZXRpbmcgYW5vdGhlciBldmVudGVkIG9iamVjdC5cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHRhcmdldCA9IHRhcmdldE9yVHlwZTtcbiAgICAgIHZhciB0eXBlID0gdHlwZU9yTGlzdGVuZXI7IC8vIEZhaWwgZmFzdCBhbmQgaW4gYSBtZWFuaW5nZnVsIHdheSFcblxuICAgICAgdmFsaWRhdGVUYXJnZXQodGFyZ2V0KTtcbiAgICAgIHZhbGlkYXRlRXZlbnRUeXBlKHR5cGUpO1xuICAgICAgdmFsaWRhdGVMaXN0ZW5lcihsaXN0ZW5lcik7IC8vIEVuc3VyZSB0aGVyZSdzIGF0IGxlYXN0IGEgZ3VpZCwgZXZlbiBpZiB0aGUgZnVuY3Rpb24gaGFzbid0IGJlZW4gdXNlZFxuXG4gICAgICBsaXN0ZW5lciA9IGJpbmQodGhpcywgbGlzdGVuZXIpOyAvLyBSZW1vdmUgdGhlIGRpc3Bvc2UgbGlzdGVuZXIgb24gdGhpcyBldmVudGVkIG9iamVjdCwgd2hpY2ggd2FzIGdpdmVuXG4gICAgICAvLyB0aGUgc2FtZSBndWlkIGFzIHRoZSBldmVudCBsaXN0ZW5lciBpbiBvbigpLlxuXG4gICAgICB0aGlzLm9mZignZGlzcG9zZScsIGxpc3RlbmVyKTtcblxuICAgICAgaWYgKHRhcmdldC5ub2RlTmFtZSkge1xuICAgICAgICBvZmYodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lcik7XG4gICAgICAgIG9mZih0YXJnZXQsICdkaXNwb3NlJywgbGlzdGVuZXIpO1xuICAgICAgfSBlbHNlIGlmIChpc0V2ZW50ZWQodGFyZ2V0KSkge1xuICAgICAgICB0YXJnZXQub2ZmKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgdGFyZ2V0Lm9mZignZGlzcG9zZScsIGxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpcmUgYW4gZXZlbnQgb24gdGhpcyBldmVudGVkIG9iamVjdCwgY2F1c2luZyBpdHMgbGlzdGVuZXJzIHRvIGJlIGNhbGxlZC5cbiAgICpcbiAgICogQHBhcmFtICAge3N0cmluZ3xPYmplY3R9IGV2ZW50XG4gICAqICAgICAgICAgIEFuIGV2ZW50IHR5cGUgb3IgYW4gb2JqZWN0IHdpdGggYSB0eXBlIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0gICB7T2JqZWN0fSBbaGFzaF1cbiAgICogICAgICAgICAgQW4gYWRkaXRpb25hbCBvYmplY3QgdG8gcGFzcyBhbG9uZyB0byBsaXN0ZW5lcnMuXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqICAgICAgICAgIFdoZXRoZXIgb3Igbm90IHRoZSBkZWZhdWx0IGJlaGF2aW9yIHdhcyBwcmV2ZW50ZWQuXG4gICAqL1xuICB0cmlnZ2VyOiBmdW5jdGlvbiB0cmlnZ2VyJCQxKGV2ZW50LCBoYXNoKSB7XG4gICAgcmV0dXJuIHRyaWdnZXIodGhpcy5ldmVudEJ1c0VsXywgZXZlbnQsIGhhc2gpO1xuICB9XG59O1xuLyoqXG4gKiBBcHBsaWVzIHtAbGluayBtb2R1bGU6ZXZlbnRlZH5FdmVudGVkTWl4aW58RXZlbnRlZE1peGlufSB0byBhIHRhcmdldCBvYmplY3QuXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fSB0YXJnZXRcbiAqICAgICAgICAgVGhlIG9iamVjdCB0byB3aGljaCB0byBhZGQgZXZlbnQgbWV0aG9kcy5cbiAqXG4gKiBAcGFyYW0gIHtPYmplY3R9IFtvcHRpb25zPXt9XVxuICogICAgICAgICBPcHRpb25zIGZvciBjdXN0b21pemluZyB0aGUgbWl4aW4gYmVoYXZpb3IuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBbb3B0aW9ucy5ldmVudEJ1c0tleV1cbiAqICAgICAgICAgQnkgZGVmYXVsdCwgYWRkcyBhIGBldmVudEJ1c0VsX2AgRE9NIGVsZW1lbnQgdG8gdGhlIHRhcmdldCBvYmplY3QsXG4gKiAgICAgICAgIHdoaWNoIGlzIHVzZWQgYXMgYW4gZXZlbnQgYnVzLiBJZiB0aGUgdGFyZ2V0IG9iamVjdCBhbHJlYWR5IGhhcyBhXG4gKiAgICAgICAgIERPTSBlbGVtZW50IHRoYXQgc2hvdWxkIGJlIHVzZWQsIHBhc3MgaXRzIGtleSBoZXJlLlxuICpcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqICAgICAgICAgVGhlIHRhcmdldCBvYmplY3QuXG4gKi9cblxuZnVuY3Rpb24gZXZlbnRlZCh0YXJnZXQsIG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIHZhciBfb3B0aW9ucyA9IG9wdGlvbnMsXG4gICAgICBldmVudEJ1c0tleSA9IF9vcHRpb25zLmV2ZW50QnVzS2V5OyAvLyBTZXQgb3IgY3JlYXRlIHRoZSBldmVudEJ1c0VsXy5cblxuICBpZiAoZXZlbnRCdXNLZXkpIHtcbiAgICBpZiAoIXRhcmdldFtldmVudEJ1c0tleV0ubm9kZU5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBldmVudEJ1c0tleSBcXFwiXCIgKyBldmVudEJ1c0tleSArIFwiXFxcIiBkb2VzIG5vdCByZWZlciB0byBhbiBlbGVtZW50LlwiKTtcbiAgICB9XG5cbiAgICB0YXJnZXQuZXZlbnRCdXNFbF8gPSB0YXJnZXRbZXZlbnRCdXNLZXldO1xuICB9IGVsc2Uge1xuICAgIHRhcmdldC5ldmVudEJ1c0VsXyA9IGNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgY2xhc3NOYW1lOiAndmpzLWV2ZW50LWJ1cydcbiAgICB9KTtcbiAgfVxuXG4gIGFzc2lnbih0YXJnZXQsIEV2ZW50ZWRNaXhpbik7XG5cbiAgaWYgKHRhcmdldC5ldmVudGVkQ2FsbGJhY2tzKSB7XG4gICAgdGFyZ2V0LmV2ZW50ZWRDYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfSk7XG4gIH0gLy8gV2hlbiBhbnkgZXZlbnRlZCBvYmplY3QgaXMgZGlzcG9zZWQsIGl0IHJlbW92ZXMgYWxsIGl0cyBsaXN0ZW5lcnMuXG5cblxuICB0YXJnZXQub24oJ2Rpc3Bvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgdGFyZ2V0Lm9mZigpO1xuICAgIHdpbmRvdyQxLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgdGFyZ2V0LmV2ZW50QnVzRWxfID0gbnVsbDtcbiAgICB9LCAwKTtcbiAgfSk7XG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbi8qKlxuICogQGZpbGUgbWl4aW5zL3N0YXRlZnVsLmpzXG4gKiBAbW9kdWxlIHN0YXRlZnVsXG4gKi9cbi8qKlxuICogQ29udGFpbnMgbWV0aG9kcyB0aGF0IHByb3ZpZGUgc3RhdGVmdWxuZXNzIHRvIGFuIG9iamVjdCB3aGljaCBpcyBwYXNzZWRcbiAqIHRvIHtAbGluayBtb2R1bGU6c3RhdGVmdWx9LlxuICpcbiAqIEBtaXhpbiBTdGF0ZWZ1bE1peGluXG4gKi9cblxudmFyIFN0YXRlZnVsTWl4aW4gPSB7XG4gIC8qKlxuICAgKiBBIGhhc2ggY29udGFpbmluZyBhcmJpdHJhcnkga2V5cyBhbmQgdmFsdWVzIHJlcHJlc2VudGluZyB0aGUgc3RhdGUgb2ZcbiAgICogdGhlIG9iamVjdC5cbiAgICpcbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRlOiB7fSxcblxuICAvKipcbiAgICogU2V0IHRoZSBzdGF0ZSBvZiBhbiBvYmplY3QgYnkgbXV0YXRpbmcgaXRzXG4gICAqIHtAbGluayBtb2R1bGU6c3RhdGVmdWx+U3RhdGVmdWxNaXhpbi5zdGF0ZXxzdGF0ZX0gb2JqZWN0IGluIHBsYWNlLlxuICAgKlxuICAgKiBAZmlyZXMgICBtb2R1bGU6c3RhdGVmdWx+U3RhdGVmdWxNaXhpbiNzdGF0ZWNoYW5nZWRcbiAgICogQHBhcmFtICAge09iamVjdHxGdW5jdGlvbn0gc3RhdGVVcGRhdGVzXG4gICAqICAgICAgICAgIEEgbmV3IHNldCBvZiBwcm9wZXJ0aWVzIHRvIHNoYWxsb3ctbWVyZ2UgaW50byB0aGUgcGx1Z2luIHN0YXRlLlxuICAgKiAgICAgICAgICBDYW4gYmUgYSBwbGFpbiBvYmplY3Qgb3IgYSBmdW5jdGlvbiByZXR1cm5pbmcgYSBwbGFpbiBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG4gICAqICAgICAgICAgIEFuIG9iamVjdCBjb250YWluaW5nIGNoYW5nZXMgdGhhdCBvY2N1cnJlZC4gSWYgbm8gY2hhbmdlc1xuICAgKiAgICAgICAgICBvY2N1cnJlZCwgcmV0dXJucyBgdW5kZWZpbmVkYC5cbiAgICovXG4gIHNldFN0YXRlOiBmdW5jdGlvbiBzZXRTdGF0ZShzdGF0ZVVwZGF0ZXMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgLy8gU3VwcG9ydCBwcm92aWRpbmcgdGhlIGBzdGF0ZVVwZGF0ZXNgIHN0YXRlIGFzIGEgZnVuY3Rpb24uXG4gICAgaWYgKHR5cGVvZiBzdGF0ZVVwZGF0ZXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHN0YXRlVXBkYXRlcyA9IHN0YXRlVXBkYXRlcygpO1xuICAgIH1cblxuICAgIHZhciBjaGFuZ2VzO1xuICAgIGVhY2goc3RhdGVVcGRhdGVzLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgLy8gUmVjb3JkIHRoZSBjaGFuZ2UgaWYgdGhlIHZhbHVlIGlzIGRpZmZlcmVudCBmcm9tIHdoYXQncyBpbiB0aGVcbiAgICAgIC8vIGN1cnJlbnQgc3RhdGUuXG4gICAgICBpZiAoX3RoaXMuc3RhdGVba2V5XSAhPT0gdmFsdWUpIHtcbiAgICAgICAgY2hhbmdlcyA9IGNoYW5nZXMgfHwge307XG4gICAgICAgIGNoYW5nZXNba2V5XSA9IHtcbiAgICAgICAgICBmcm9tOiBfdGhpcy5zdGF0ZVtrZXldLFxuICAgICAgICAgIHRvOiB2YWx1ZVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5zdGF0ZVtrZXldID0gdmFsdWU7XG4gICAgfSk7IC8vIE9ubHkgdHJpZ2dlciBcInN0YXRlY2hhbmdlXCIgaWYgdGhlcmUgd2VyZSBjaGFuZ2VzIEFORCB3ZSBoYXZlIGEgdHJpZ2dlclxuICAgIC8vIGZ1bmN0aW9uLiBUaGlzIGFsbG93cyB1cyB0byBub3QgcmVxdWlyZSB0aGF0IHRoZSB0YXJnZXQgb2JqZWN0IGJlIGFuXG4gICAgLy8gZXZlbnRlZCBvYmplY3QuXG5cbiAgICBpZiAoY2hhbmdlcyAmJiBpc0V2ZW50ZWQodGhpcykpIHtcbiAgICAgIC8qKlxuICAgICAgICogQW4gZXZlbnQgdHJpZ2dlcmVkIG9uIGFuIG9iamVjdCB0aGF0IGlzIGJvdGhcbiAgICAgICAqIHtAbGluayBtb2R1bGU6c3RhdGVmdWx8c3RhdGVmdWx9IGFuZCB7QGxpbmsgbW9kdWxlOmV2ZW50ZWR8ZXZlbnRlZH1cbiAgICAgICAqIGluZGljYXRpbmcgdGhhdCBpdHMgc3RhdGUgaGFzIGNoYW5nZWQuXG4gICAgICAgKlxuICAgICAgICogQGV2ZW50ICAgIG1vZHVsZTpzdGF0ZWZ1bH5TdGF0ZWZ1bE1peGluI3N0YXRlY2hhbmdlZFxuICAgICAgICogQHR5cGUgICAgIHtPYmplY3R9XG4gICAgICAgKiBAcHJvcGVydHkge09iamVjdH0gY2hhbmdlc1xuICAgICAgICogICAgICAgICAgIEEgaGFzaCBjb250YWluaW5nIHRoZSBwcm9wZXJ0aWVzIHRoYXQgd2VyZSBjaGFuZ2VkIGFuZFxuICAgICAgICogICAgICAgICAgIHRoZSB2YWx1ZXMgdGhleSB3ZXJlIGNoYW5nZWQgYGZyb21gIGFuZCBgdG9gLlxuICAgICAgICovXG4gICAgICB0aGlzLnRyaWdnZXIoe1xuICAgICAgICBjaGFuZ2VzOiBjaGFuZ2VzLFxuICAgICAgICB0eXBlOiAnc3RhdGVjaGFuZ2VkJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYW5nZXM7XG4gIH1cbn07XG4vKipcbiAqIEFwcGxpZXMge0BsaW5rIG1vZHVsZTpzdGF0ZWZ1bH5TdGF0ZWZ1bE1peGlufFN0YXRlZnVsTWl4aW59IHRvIGEgdGFyZ2V0XG4gKiBvYmplY3QuXG4gKlxuICogSWYgdGhlIHRhcmdldCBvYmplY3QgaXMge0BsaW5rIG1vZHVsZTpldmVudGVkfGV2ZW50ZWR9IGFuZCBoYXMgYVxuICogYGhhbmRsZVN0YXRlQ2hhbmdlZGAgbWV0aG9kLCB0aGF0IG1ldGhvZCB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgYm91bmQgdG8gdGhlXG4gKiBgc3RhdGVjaGFuZ2VkYCBldmVudCBvbiBpdHNlbGYuXG4gKlxuICogQHBhcmFtICAge09iamVjdH0gdGFyZ2V0XG4gKiAgICAgICAgICBUaGUgb2JqZWN0IHRvIGJlIG1hZGUgc3RhdGVmdWwuXG4gKlxuICogQHBhcmFtICAge09iamVjdH0gW2RlZmF1bHRTdGF0ZV1cbiAqICAgICAgICAgIEEgZGVmYXVsdCBzZXQgb2YgcHJvcGVydGllcyB0byBwb3B1bGF0ZSB0aGUgbmV3bHktc3RhdGVmdWwgb2JqZWN0J3NcbiAqICAgICAgICAgIGBzdGF0ZWAgcHJvcGVydHkuXG4gKlxuICogQHJldHVybiB7T2JqZWN0fVxuICogICAgICAgICAgUmV0dXJucyB0aGUgYHRhcmdldGAuXG4gKi9cblxuZnVuY3Rpb24gc3RhdGVmdWwodGFyZ2V0LCBkZWZhdWx0U3RhdGUpIHtcbiAgYXNzaWduKHRhcmdldCwgU3RhdGVmdWxNaXhpbik7IC8vIFRoaXMgaGFwcGVucyBhZnRlciB0aGUgbWl4aW5nLWluIGJlY2F1c2Ugd2UgbmVlZCB0byByZXBsYWNlIHRoZSBgc3RhdGVgXG4gIC8vIGFkZGVkIGluIHRoYXQgc3RlcC5cblxuICB0YXJnZXQuc3RhdGUgPSBhc3NpZ24oe30sIHRhcmdldC5zdGF0ZSwgZGVmYXVsdFN0YXRlKTsgLy8gQXV0by1iaW5kIHRoZSBgaGFuZGxlU3RhdGVDaGFuZ2VkYCBtZXRob2Qgb2YgdGhlIHRhcmdldCBvYmplY3QgaWYgaXQgZXhpc3RzLlxuXG4gIGlmICh0eXBlb2YgdGFyZ2V0LmhhbmRsZVN0YXRlQ2hhbmdlZCA9PT0gJ2Z1bmN0aW9uJyAmJiBpc0V2ZW50ZWQodGFyZ2V0KSkge1xuICAgIHRhcmdldC5vbignc3RhdGVjaGFuZ2VkJywgdGFyZ2V0LmhhbmRsZVN0YXRlQ2hhbmdlZCk7XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG4vKipcbiAqIEBmaWxlIHRvLXRpdGxlLWNhc2UuanNcbiAqIEBtb2R1bGUgdG8tdGl0bGUtY2FzZVxuICovXG5cbi8qKlxuICogVXBwZXJjYXNlIHRoZSBmaXJzdCBsZXR0ZXIgb2YgYSBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogICAgICAgIFN0cmluZyB0byBiZSB1cHBlcmNhc2VkXG4gKlxuICogQHJldHVybiB7c3RyaW5nfVxuICogICAgICAgICBUaGUgc3RyaW5nIHdpdGggYW4gdXBwZXJjYXNlZCBmaXJzdCBsZXR0ZXJcbiAqL1xuZnVuY3Rpb24gdG9UaXRsZUNhc2Uoc3RyaW5nKSB7XG4gIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBzdHJpbmc7XG4gIH1cblxuICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpO1xufVxuLyoqXG4gKiBDb21wYXJlcyB0aGUgVGl0bGVDYXNlIHZlcnNpb25zIG9mIHRoZSB0d28gc3RyaW5ncyBmb3IgZXF1YWxpdHkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cjFcbiAqICAgICAgICBUaGUgZmlyc3Qgc3RyaW5nIHRvIGNvbXBhcmVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyMlxuICogICAgICAgIFRoZSBzZWNvbmQgc3RyaW5nIHRvIGNvbXBhcmVcbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogICAgICAgICBXaGV0aGVyIHRoZSBUaXRsZUNhc2UgdmVyc2lvbnMgb2YgdGhlIHN0cmluZ3MgYXJlIGVxdWFsXG4gKi9cblxuZnVuY3Rpb24gdGl0bGVDYXNlRXF1YWxzKHN0cjEsIHN0cjIpIHtcbiAgcmV0dXJuIHRvVGl0bGVDYXNlKHN0cjEpID09PSB0b1RpdGxlQ2FzZShzdHIyKTtcbn1cblxuLyoqXG4gKiBAZmlsZSBtZXJnZS1vcHRpb25zLmpzXG4gKiBAbW9kdWxlIG1lcmdlLW9wdGlvbnNcbiAqL1xuLyoqXG4gKiBNZXJnZSB0d28gb2JqZWN0cyByZWN1cnNpdmVseS5cbiAqXG4gKiBQZXJmb3JtcyBhIGRlZXAgbWVyZ2UgbGlrZVxuICoge0BsaW5rIGh0dHBzOi8vbG9kYXNoLmNvbS9kb2NzLzQuMTcuMTAjbWVyZ2V8bG9kYXNoLm1lcmdlfSwgYnV0IG9ubHkgbWVyZ2VzXG4gKiBwbGFpbiBvYmplY3RzIChub3QgYXJyYXlzLCBlbGVtZW50cywgb3IgYW55dGhpbmcgZWxzZSkuXG4gKlxuICogTm9uLXBsYWluIG9iamVjdCB2YWx1ZXMgd2lsbCBiZSBjb3BpZWQgZGlyZWN0bHkgZnJvbSB0aGUgcmlnaHQtbW9zdFxuICogYXJndW1lbnQuXG4gKlxuICogQHN0YXRpY1xuICogQHBhcmFtICAge09iamVjdFtdfSBzb3VyY2VzXG4gKiAgICAgICAgICBPbmUgb3IgbW9yZSBvYmplY3RzIHRvIG1lcmdlIGludG8gYSBuZXcgb2JqZWN0LlxuICpcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqICAgICAgICAgIEEgbmV3IG9iamVjdCB0aGF0IGlzIHRoZSBtZXJnZWQgcmVzdWx0IG9mIGFsbCBzb3VyY2VzLlxuICovXG5cbmZ1bmN0aW9uIG1lcmdlT3B0aW9ucygpIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuXG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBzb3VyY2VzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIHNvdXJjZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgIGlmICghc291cmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZWFjaChzb3VyY2UsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICBpZiAoIWlzUGxhaW4odmFsdWUpKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc1BsYWluKHJlc3VsdFtrZXldKSkge1xuICAgICAgICByZXN1bHRba2V5XSA9IHt9O1xuICAgICAgfVxuXG4gICAgICByZXN1bHRba2V5XSA9IG1lcmdlT3B0aW9ucyhyZXN1bHRba2V5XSwgdmFsdWUpO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBQbGF5ZXIgQ29tcG9uZW50IC0gQmFzZSBjbGFzcyBmb3IgYWxsIFVJIG9iamVjdHNcbiAqXG4gKiBAZmlsZSBjb21wb25lbnQuanNcbiAqL1xuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgVUkgQ29tcG9uZW50cy5cbiAqIENvbXBvbmVudHMgYXJlIFVJIG9iamVjdHMgd2hpY2ggcmVwcmVzZW50IGJvdGggYSBqYXZhc2NyaXB0IG9iamVjdCBhbmQgYW4gZWxlbWVudFxuICogaW4gdGhlIERPTS4gVGhleSBjYW4gYmUgY2hpbGRyZW4gb2Ygb3RoZXIgY29tcG9uZW50cywgYW5kIGNhbiBoYXZlXG4gKiBjaGlsZHJlbiB0aGVtc2VsdmVzLlxuICpcbiAqIENvbXBvbmVudHMgY2FuIGFsc28gdXNlIG1ldGhvZHMgZnJvbSB7QGxpbmsgRXZlbnRUYXJnZXR9XG4gKi9cblxudmFyIENvbXBvbmVudCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBBIGNhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHdoZW4gYSBjb21wb25lbnQgaXMgcmVhZHkuIERvZXMgbm90IGhhdmUgYW55XG4gICAqIHBhcmFtdGVycyBhbmQgYW55IGNhbGxiYWNrIHZhbHVlIHdpbGwgYmUgaWdub3JlZC5cbiAgICpcbiAgICogQGNhbGxiYWNrIENvbXBvbmVudH5SZWFkeUNhbGxiYWNrXG4gICAqIEB0aGlzIENvbXBvbmVudFxuICAgKi9cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3RbXX0gW29wdGlvbnMuY2hpbGRyZW5dXG4gICAqICAgICAgICBBbiBhcnJheSBvZiBjaGlsZHJlbiBvYmplY3RzIHRvIGludGlhbGl6ZSB0aGlzIGNvbXBvbmVudCB3aXRoLiBDaGlsZHJlbiBvYmplY3RzIGhhdmVcbiAgICogICAgICAgIGEgbmFtZSBwcm9wZXJ0eSB0aGF0IHdpbGwgYmUgdXNlZCBpZiBtb3JlIHRoYW4gb25lIGNvbXBvbmVudCBvZiB0aGUgc2FtZSB0eXBlIG5lZWRzIHRvIGJlXG4gICAqICAgICAgICBhZGRlZC5cbiAgICpcbiAgICogQHBhcmFtIHtDb21wb25lbnR+UmVhZHlDYWxsYmFja30gW3JlYWR5XVxuICAgKiAgICAgICAgRnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBgQ29tcG9uZW50YCBpcyByZWFkeS5cbiAgICovXG4gIGZ1bmN0aW9uIENvbXBvbmVudChwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KSB7XG4gICAgLy8gVGhlIGNvbXBvbmVudCBtaWdodCBiZSB0aGUgcGxheWVyIGl0c2VsZiBhbmQgd2UgY2FuJ3QgcGFzcyBgdGhpc2AgdG8gc3VwZXJcbiAgICBpZiAoIXBsYXllciAmJiB0aGlzLnBsYXkpIHtcbiAgICAgIHRoaXMucGxheWVyXyA9IHBsYXllciA9IHRoaXM7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wbGF5ZXJfID0gcGxheWVyO1xuICAgIH0gLy8gSG9sZCB0aGUgcmVmZXJlbmNlIHRvIHRoZSBwYXJlbnQgY29tcG9uZW50IHZpYSBgYWRkQ2hpbGRgIG1ldGhvZFxuXG5cbiAgICB0aGlzLnBhcmVudENvbXBvbmVudF8gPSBudWxsOyAvLyBNYWtlIGEgY29weSBvZiBwcm90b3R5cGUub3B0aW9uc18gdG8gcHJvdGVjdCBhZ2FpbnN0IG92ZXJyaWRpbmcgZGVmYXVsdHNcblxuICAgIHRoaXMub3B0aW9uc18gPSBtZXJnZU9wdGlvbnMoe30sIHRoaXMub3B0aW9uc18pOyAvLyBVcGRhdGVkIG9wdGlvbnMgd2l0aCBzdXBwbGllZCBvcHRpb25zXG5cbiAgICBvcHRpb25zID0gdGhpcy5vcHRpb25zXyA9IG1lcmdlT3B0aW9ucyh0aGlzLm9wdGlvbnNfLCBvcHRpb25zKTsgLy8gR2V0IElEIGZyb20gb3B0aW9ucyBvciBvcHRpb25zIGVsZW1lbnQgaWYgb25lIGlzIHN1cHBsaWVkXG5cbiAgICB0aGlzLmlkXyA9IG9wdGlvbnMuaWQgfHwgb3B0aW9ucy5lbCAmJiBvcHRpb25zLmVsLmlkOyAvLyBJZiB0aGVyZSB3YXMgbm8gSUQgZnJvbSB0aGUgb3B0aW9ucywgZ2VuZXJhdGUgb25lXG5cbiAgICBpZiAoIXRoaXMuaWRfKSB7XG4gICAgICAvLyBEb24ndCByZXF1aXJlIHRoZSBwbGF5ZXIgSUQgZnVuY3Rpb24gaW4gdGhlIGNhc2Ugb2YgbW9jayBwbGF5ZXJzXG4gICAgICB2YXIgaWQgPSBwbGF5ZXIgJiYgcGxheWVyLmlkICYmIHBsYXllci5pZCgpIHx8ICdub19wbGF5ZXInO1xuICAgICAgdGhpcy5pZF8gPSBpZCArIFwiX2NvbXBvbmVudF9cIiArIG5ld0dVSUQoKTtcbiAgICB9XG5cbiAgICB0aGlzLm5hbWVfID0gb3B0aW9ucy5uYW1lIHx8IG51bGw7IC8vIENyZWF0ZSBlbGVtZW50IGlmIG9uZSB3YXNuJ3QgcHJvdmlkZWQgaW4gb3B0aW9uc1xuXG4gICAgaWYgKG9wdGlvbnMuZWwpIHtcbiAgICAgIHRoaXMuZWxfID0gb3B0aW9ucy5lbDtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuY3JlYXRlRWwgIT09IGZhbHNlKSB7XG4gICAgICB0aGlzLmVsXyA9IHRoaXMuY3JlYXRlRWwoKTtcbiAgICB9IC8vIGlmIGV2ZW50ZWQgaXMgYW55dGhpbmcgZXhjZXB0IGZhbHNlLCB3ZSB3YW50IHRvIG1peGluIGluIGV2ZW50ZWRcblxuXG4gICAgaWYgKG9wdGlvbnMuZXZlbnRlZCAhPT0gZmFsc2UpIHtcbiAgICAgIC8vIE1ha2UgdGhpcyBhbiBldmVudGVkIG9iamVjdCBhbmQgdXNlIGBlbF9gLCBpZiBhdmFpbGFibGUsIGFzIGl0cyBldmVudCBidXNcbiAgICAgIGV2ZW50ZWQodGhpcywge1xuICAgICAgICBldmVudEJ1c0tleTogdGhpcy5lbF8gPyAnZWxfJyA6IG51bGxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRlZnVsKHRoaXMsIHRoaXMuY29uc3RydWN0b3IuZGVmYXVsdFN0YXRlKTtcbiAgICB0aGlzLmNoaWxkcmVuXyA9IFtdO1xuICAgIHRoaXMuY2hpbGRJbmRleF8gPSB7fTtcbiAgICB0aGlzLmNoaWxkTmFtZUluZGV4XyA9IHt9OyAvLyBBZGQgYW55IGNoaWxkIGNvbXBvbmVudHMgaW4gb3B0aW9uc1xuXG4gICAgaWYgKG9wdGlvbnMuaW5pdENoaWxkcmVuICE9PSBmYWxzZSkge1xuICAgICAgdGhpcy5pbml0Q2hpbGRyZW4oKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlYWR5KHJlYWR5KTsgLy8gRG9uJ3Qgd2FudCB0byB0cmlnZ2VyIHJlYWR5IGhlcmUgb3IgaXQgd2lsbCBiZWZvcmUgaW5pdCBpcyBhY3R1YWxseVxuICAgIC8vIGZpbmlzaGVkIGZvciBhbGwgY2hpbGRyZW4gdGhhdCBydW4gdGhpcyBjb25zdHJ1Y3RvclxuXG4gICAgaWYgKG9wdGlvbnMucmVwb3J0VG91Y2hBY3Rpdml0eSAhPT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuZW5hYmxlVG91Y2hBY3Rpdml0eSgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRGlzcG9zZSBvZiB0aGUgYENvbXBvbmVudGAgYW5kIGFsbCBjaGlsZCBjb21wb25lbnRzLlxuICAgKlxuICAgKiBAZmlyZXMgQ29tcG9uZW50I2Rpc3Bvc2VcbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gQ29tcG9uZW50LnByb3RvdHlwZTtcblxuICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSBgQ29tcG9uZW50YCBpcyBkaXNwb3NlZC5cbiAgICAgKlxuICAgICAqIEBldmVudCBDb21wb25lbnQjZGlzcG9zZVxuICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2J1YmJsZXM9ZmFsc2VdXG4gICAgICogICAgICAgICAgIHNldCB0byBmYWxzZSBzbyB0aGF0IHRoZSBjbG9zZSBldmVudCBkb2VzIG5vdFxuICAgICAqICAgICAgICAgICBidWJibGUgdXBcbiAgICAgKi9cbiAgICB0aGlzLnRyaWdnZXIoe1xuICAgICAgdHlwZTogJ2Rpc3Bvc2UnLFxuICAgICAgYnViYmxlczogZmFsc2VcbiAgICB9KTsgLy8gRGlzcG9zZSBhbGwgY2hpbGRyZW4uXG5cbiAgICBpZiAodGhpcy5jaGlsZHJlbl8pIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLmNoaWxkcmVuXy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAodGhpcy5jaGlsZHJlbl9baV0uZGlzcG9zZSkge1xuICAgICAgICAgIHRoaXMuY2hpbGRyZW5fW2ldLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gRGVsZXRlIGNoaWxkIHJlZmVyZW5jZXNcblxuXG4gICAgdGhpcy5jaGlsZHJlbl8gPSBudWxsO1xuICAgIHRoaXMuY2hpbGRJbmRleF8gPSBudWxsO1xuICAgIHRoaXMuY2hpbGROYW1lSW5kZXhfID0gbnVsbDtcbiAgICB0aGlzLnBhcmVudENvbXBvbmVudF8gPSBudWxsO1xuXG4gICAgaWYgKHRoaXMuZWxfKSB7XG4gICAgICAvLyBSZW1vdmUgZWxlbWVudCBmcm9tIERPTVxuICAgICAgaWYgKHRoaXMuZWxfLnBhcmVudE5vZGUpIHtcbiAgICAgICAgdGhpcy5lbF8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsXyk7XG4gICAgICB9XG5cbiAgICAgIHJlbW92ZURhdGEodGhpcy5lbF8pO1xuICAgICAgdGhpcy5lbF8gPSBudWxsO1xuICAgIH0gLy8gcmVtb3ZlIHJlZmVyZW5jZSB0byB0aGUgcGxheWVyIGFmdGVyIGRpc3Bvc2luZyBvZiB0aGUgZWxlbWVudFxuXG5cbiAgICB0aGlzLnBsYXllcl8gPSBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHtAbGluayBQbGF5ZXJ9IHRoYXQgdGhlIGBDb21wb25lbnRgIGhhcyBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHJldHVybiB7UGxheWVyfVxuICAgKiAgICAgICAgIFRoZSBwbGF5ZXIgdGhhdCB0aGlzIGBDb21wb25lbnRgIGhhcyBhdHRhY2hlZCB0by5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGxheWVyID0gZnVuY3Rpb24gcGxheWVyKCkge1xuICAgIHJldHVybiB0aGlzLnBsYXllcl87XG4gIH1cbiAgLyoqXG4gICAqIERlZXAgbWVyZ2Ugb2Ygb3B0aW9ucyBvYmplY3RzIHdpdGggbmV3IG9wdGlvbnMuXG4gICAqID4gTm90ZTogV2hlbiBib3RoIGBvYmpgIGFuZCBgb3B0aW9uc2AgY29udGFpbiBwcm9wZXJ0aWVzIHdob3NlIHZhbHVlcyBhcmUgb2JqZWN0cy5cbiAgICogICAgICAgICBUaGUgdHdvIHByb3BlcnRpZXMgZ2V0IG1lcmdlZCB1c2luZyB7QGxpbmsgbW9kdWxlOm1lcmdlT3B0aW9uc31cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAgKiAgICAgICAgVGhlIG9iamVjdCB0aGF0IGNvbnRhaW5zIG5ldyBvcHRpb25zLlxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqICAgICAgICAgQSBuZXcgb2JqZWN0IG9mIGB0aGlzLm9wdGlvbnNfYCBhbmQgYG9iamAgbWVyZ2VkIHRvZ2V0aGVyLlxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCBzaW5jZSB2ZXJzaW9uIDVcbiAgICovXG4gIDtcblxuICBfcHJvdG8ub3B0aW9ucyA9IGZ1bmN0aW9uIG9wdGlvbnMob2JqKSB7XG4gICAgbG9nLndhcm4oJ3RoaXMub3B0aW9ucygpIGhhcyBiZWVuIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgbW92ZWQgdG8gdGhlIGNvbnN0cnVjdG9yIGluIDYuMCcpO1xuXG4gICAgaWYgKCFvYmopIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNfO1xuICAgIH1cblxuICAgIHRoaXMub3B0aW9uc18gPSBtZXJnZU9wdGlvbnModGhpcy5vcHRpb25zXywgb2JqKTtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zXztcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBgQ29tcG9uZW50YHMgRE9NIGVsZW1lbnRcbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICBUaGUgRE9NIGVsZW1lbnQgZm9yIHRoaXMgYENvbXBvbmVudGAuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmVsID0gZnVuY3Rpb24gZWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxfO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgcyBET00gZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IFt0YWdOYW1lXVxuICAgKiAgICAgICAgRWxlbWVudCdzIERPTSBub2RlIHR5cGUuIGUuZy4gJ2RpdidcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzXVxuICAgKiAgICAgICAgQW4gb2JqZWN0IG9mIHByb3BlcnRpZXMgdGhhdCBzaG91bGQgYmUgc2V0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW2F0dHJpYnV0ZXNdXG4gICAqICAgICAgICBBbiBvYmplY3Qgb2YgYXR0cmlidXRlcyB0aGF0IHNob3VsZCBiZSBzZXQuXG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCBnZXRzIGNyZWF0ZWQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwkJDEodGFnTmFtZSwgcHJvcGVydGllcywgYXR0cmlidXRlcykge1xuICAgIHJldHVybiBjcmVhdGVFbCh0YWdOYW1lLCBwcm9wZXJ0aWVzLCBhdHRyaWJ1dGVzKTtcbiAgfVxuICAvKipcbiAgICogTG9jYWxpemUgYSBzdHJpbmcgZ2l2ZW4gdGhlIHN0cmluZyBpbiBlbmdsaXNoLlxuICAgKlxuICAgKiBJZiB0b2tlbnMgYXJlIHByb3ZpZGVkLCBpdCdsbCB0cnkgYW5kIHJ1biBhIHNpbXBsZSB0b2tlbiByZXBsYWNlbWVudCBvbiB0aGUgcHJvdmlkZWQgc3RyaW5nLlxuICAgKiBUaGUgdG9rZW5zIGl0IGxvb2tzIGZvciBsb29rIGxpa2UgYHsxfWAgd2l0aCB0aGUgaW5kZXggYmVpbmcgMS1pbmRleGVkIGludG8gdGhlIHRva2VucyBhcnJheS5cbiAgICpcbiAgICogSWYgYSBgZGVmYXVsdFZhbHVlYCBpcyBwcm92aWRlZCwgaXQnbGwgdXNlIHRoYXQgb3ZlciBgc3RyaW5nYCxcbiAgICogaWYgYSB2YWx1ZSBpc24ndCBmb3VuZCBpbiBwcm92aWRlZCBsYW5ndWFnZSBmaWxlcy5cbiAgICogVGhpcyBpcyB1c2VmdWwgaWYgeW91IHdhbnQgdG8gaGF2ZSBhIGRlc2NyaXB0aXZlIGtleSBmb3IgdG9rZW4gcmVwbGFjZW1lbnRcbiAgICogYnV0IGhhdmUgYSBzdWNjaW5jdCBsb2NhbGl6ZWQgc3RyaW5nIGFuZCBub3QgcmVxdWlyZSBgZW4uanNvbmAgdG8gYmUgaW5jbHVkZWQuXG4gICAqXG4gICAqIEN1cnJlbnRseSwgaXQgaXMgdXNlZCBmb3IgdGhlIHByb2dyZXNzIGJhciB0aW1pbmcuXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBcInByb2dyZXNzIGJhciB0aW1pbmc6IGN1cnJlbnRUaW1lPXsxfSBkdXJhdGlvbj17Mn1cIjogXCJ7MX0gb2YgezJ9XCJcbiAgICogfVxuICAgKiBgYGBcbiAgICogSXQgaXMgdGhlbiB1c2VkIGxpa2Ugc286XG4gICAqIGBgYGpzXG4gICAqIHRoaXMubG9jYWxpemUoJ3Byb2dyZXNzIGJhciB0aW1pbmc6IGN1cnJlbnRUaW1lPXsxfSBkdXJhdGlvbnsyfScsXG4gICAqICAgICAgICAgICAgICAgW3RoaXMucGxheWVyXy5jdXJyZW50VGltZSgpLCB0aGlzLnBsYXllcl8uZHVyYXRpb24oKV0sXG4gICAqICAgICAgICAgICAgICAgJ3sxfSBvZiB7Mn0nKTtcbiAgICogYGBgXG4gICAqXG4gICAqIFdoaWNoIG91dHB1dHMgc29tZXRoaW5nIGxpa2U6IGAwMToyMyBvZiAyNDo1NmAuXG4gICAqXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAgICogICAgICAgIFRoZSBzdHJpbmcgdG8gbG9jYWxpemUgYW5kIHRoZSBrZXkgdG8gbG9va3VwIGluIHRoZSBsYW5ndWFnZSBmaWxlcy5cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gW3Rva2Vuc11cbiAgICogICAgICAgIElmIHRoZSBjdXJyZW50IGl0ZW0gaGFzIHRva2VuIHJlcGxhY2VtZW50cywgcHJvdmlkZSB0aGUgdG9rZW5zIGhlcmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZGVmYXVsdFZhbHVlXVxuICAgKiAgICAgICAgRGVmYXVsdHMgdG8gYHN0cmluZ2AuIENhbiBiZSBhIGRlZmF1bHQgdmFsdWUgdG8gdXNlIGZvciB0b2tlbiByZXBsYWNlbWVudFxuICAgKiAgICAgICAgaWYgdGhlIGxvb2t1cCBrZXkgaXMgbmVlZGVkIHRvIGJlIHNlcGFyYXRlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIGxvY2FsaXplZCBzdHJpbmcgb3IgaWYgbm8gbG9jYWxpemF0aW9uIGV4aXN0cyB0aGUgZW5nbGlzaCBzdHJpbmcuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmxvY2FsaXplID0gZnVuY3Rpb24gbG9jYWxpemUoc3RyaW5nLCB0b2tlbnMsIGRlZmF1bHRWYWx1ZSkge1xuICAgIGlmIChkZWZhdWx0VmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgZGVmYXVsdFZhbHVlID0gc3RyaW5nO1xuICAgIH1cblxuICAgIHZhciBjb2RlID0gdGhpcy5wbGF5ZXJfLmxhbmd1YWdlICYmIHRoaXMucGxheWVyXy5sYW5ndWFnZSgpO1xuICAgIHZhciBsYW5ndWFnZXMgPSB0aGlzLnBsYXllcl8ubGFuZ3VhZ2VzICYmIHRoaXMucGxheWVyXy5sYW5ndWFnZXMoKTtcbiAgICB2YXIgbGFuZ3VhZ2UgPSBsYW5ndWFnZXMgJiYgbGFuZ3VhZ2VzW2NvZGVdO1xuICAgIHZhciBwcmltYXJ5Q29kZSA9IGNvZGUgJiYgY29kZS5zcGxpdCgnLScpWzBdO1xuICAgIHZhciBwcmltYXJ5TGFuZyA9IGxhbmd1YWdlcyAmJiBsYW5ndWFnZXNbcHJpbWFyeUNvZGVdO1xuICAgIHZhciBsb2NhbGl6ZWRTdHJpbmcgPSBkZWZhdWx0VmFsdWU7XG5cbiAgICBpZiAobGFuZ3VhZ2UgJiYgbGFuZ3VhZ2Vbc3RyaW5nXSkge1xuICAgICAgbG9jYWxpemVkU3RyaW5nID0gbGFuZ3VhZ2Vbc3RyaW5nXTtcbiAgICB9IGVsc2UgaWYgKHByaW1hcnlMYW5nICYmIHByaW1hcnlMYW5nW3N0cmluZ10pIHtcbiAgICAgIGxvY2FsaXplZFN0cmluZyA9IHByaW1hcnlMYW5nW3N0cmluZ107XG4gICAgfVxuXG4gICAgaWYgKHRva2Vucykge1xuICAgICAgbG9jYWxpemVkU3RyaW5nID0gbG9jYWxpemVkU3RyaW5nLnJlcGxhY2UoL1xceyhcXGQrKVxcfS9nLCBmdW5jdGlvbiAobWF0Y2gsIGluZGV4KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHRva2Vuc1tpbmRleCAtIDFdO1xuICAgICAgICB2YXIgcmV0ID0gdmFsdWU7XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICByZXQgPSBtYXRjaDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbG9jYWxpemVkU3RyaW5nO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGBDb21wb25lbnRgcyBET00gZWxlbWVudC4gVGhpcyBpcyB3aGVyZSBjaGlsZHJlbiBnZXQgaW5zZXJ0ZWQuXG4gICAqIFRoaXMgd2lsbCB1c3VhbGx5IGJlIHRoZSB0aGUgc2FtZSBhcyB0aGUgZWxlbWVudCByZXR1cm5lZCBpbiB7QGxpbmsgQ29tcG9uZW50I2VsfS5cbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICBUaGUgY29udGVudCBlbGVtZW50IGZvciB0aGlzIGBDb21wb25lbnRgLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jb250ZW50RWwgPSBmdW5jdGlvbiBjb250ZW50RWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGVudEVsXyB8fCB0aGlzLmVsXztcbiAgfVxuICAvKipcbiAgICogR2V0IHRoaXMgYENvbXBvbmVudGBzIElEXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBUaGUgaWQgb2YgdGhpcyBgQ29tcG9uZW50YFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5pZCA9IGZ1bmN0aW9uIGlkKCkge1xuICAgIHJldHVybiB0aGlzLmlkXztcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBgQ29tcG9uZW50YHMgbmFtZS4gVGhlIG5hbWUgZ2V0cyB1c2VkIHRvIHJlZmVyZW5jZSB0aGUgYENvbXBvbmVudGBcbiAgICogYW5kIGlzIHNldCBkdXJpbmcgcmVnaXN0cmF0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIG5hbWUgb2YgdGhpcyBgQ29tcG9uZW50YC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ubmFtZSA9IGZ1bmN0aW9uIG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMubmFtZV87XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbiBhcnJheSBvZiBhbGwgY2hpbGQgY29tcG9uZW50c1xuICAgKlxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICogICAgICAgICBUaGUgY2hpbGRyZW5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uY2hpbGRyZW4gPSBmdW5jdGlvbiBjaGlsZHJlbigpIHtcbiAgICByZXR1cm4gdGhpcy5jaGlsZHJlbl87XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGNoaWxkIGBDb21wb25lbnRgIHdpdGggdGhlIGdpdmVuIGBpZGAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICAgKiAgICAgICAgVGhlIGlkIG9mIHRoZSBjaGlsZCBgQ29tcG9uZW50YCB0byBnZXQuXG4gICAqXG4gICAqIEByZXR1cm4ge0NvbXBvbmVudHx1bmRlZmluZWR9XG4gICAqICAgICAgICAgVGhlIGNoaWxkIGBDb21wb25lbnRgIHdpdGggdGhlIGdpdmVuIGBpZGAgb3IgdW5kZWZpbmVkLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5nZXRDaGlsZEJ5SWQgPSBmdW5jdGlvbiBnZXRDaGlsZEJ5SWQoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5jaGlsZEluZGV4X1tpZF07XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGNoaWxkIGBDb21wb25lbnRgIHdpdGggdGhlIGdpdmVuIGBuYW1lYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogICAgICAgIFRoZSBuYW1lIG9mIHRoZSBjaGlsZCBgQ29tcG9uZW50YCB0byBnZXQuXG4gICAqXG4gICAqIEByZXR1cm4ge0NvbXBvbmVudHx1bmRlZmluZWR9XG4gICAqICAgICAgICAgVGhlIGNoaWxkIGBDb21wb25lbnRgIHdpdGggdGhlIGdpdmVuIGBuYW1lYCBvciB1bmRlZmluZWQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmdldENoaWxkID0gZnVuY3Rpb24gZ2V0Q2hpbGQobmFtZSkge1xuICAgIGlmICghbmFtZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG5hbWUgPSB0b1RpdGxlQ2FzZShuYW1lKTtcbiAgICByZXR1cm4gdGhpcy5jaGlsZE5hbWVJbmRleF9bbmFtZV07XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIGNoaWxkIGBDb21wb25lbnRgIGluc2lkZSB0aGUgY3VycmVudCBgQ29tcG9uZW50YC5cbiAgICpcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8Q29tcG9uZW50fSBjaGlsZFxuICAgKiAgICAgICAgVGhlIG5hbWUgb3IgaW5zdGFuY2Ugb2YgYSBjaGlsZCB0byBhZGQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV1cbiAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2Ygb3B0aW9ucyB0aGF0IHdpbGwgZ2V0IHBhc3NlZCB0byBjaGlsZHJlbiBvZlxuICAgKiAgICAgICAgdGhlIGNoaWxkLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2luZGV4PXRoaXMuY2hpbGRyZW5fLmxlbmd0aF1cbiAgICogICAgICAgIFRoZSBpbmRleCB0byBhdHRlbXB0IHRvIGFkZCBhIGNoaWxkIGludG8uXG4gICAqXG4gICAqIEByZXR1cm4ge0NvbXBvbmVudH1cbiAgICogICAgICAgICBUaGUgYENvbXBvbmVudGAgdGhhdCBnZXRzIGFkZGVkIGFzIGEgY2hpbGQuIFdoZW4gdXNpbmcgYSBzdHJpbmcgdGhlXG4gICAqICAgICAgICAgYENvbXBvbmVudGAgd2lsbCBnZXQgY3JlYXRlZCBieSB0aGlzIHByb2Nlc3MuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmFkZENoaWxkID0gZnVuY3Rpb24gYWRkQ2hpbGQoY2hpbGQsIG9wdGlvbnMsIGluZGV4KSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbmRleCA9IHRoaXMuY2hpbGRyZW5fLmxlbmd0aDtcbiAgICB9XG5cbiAgICB2YXIgY29tcG9uZW50O1xuICAgIHZhciBjb21wb25lbnROYW1lOyAvLyBJZiBjaGlsZCBpcyBhIHN0cmluZywgY3JlYXRlIGNvbXBvbmVudCB3aXRoIG9wdGlvbnNcblxuICAgIGlmICh0eXBlb2YgY2hpbGQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb21wb25lbnROYW1lID0gdG9UaXRsZUNhc2UoY2hpbGQpO1xuICAgICAgdmFyIGNvbXBvbmVudENsYXNzTmFtZSA9IG9wdGlvbnMuY29tcG9uZW50Q2xhc3MgfHwgY29tcG9uZW50TmFtZTsgLy8gU2V0IG5hbWUgdGhyb3VnaCBvcHRpb25zXG5cbiAgICAgIG9wdGlvbnMubmFtZSA9IGNvbXBvbmVudE5hbWU7IC8vIENyZWF0ZSBhIG5ldyBvYmplY3QgJiBlbGVtZW50IGZvciB0aGlzIGNvbnRyb2xzIHNldFxuICAgICAgLy8gSWYgdGhlcmUncyBubyAucGxheWVyXywgdGhpcyBpcyBhIHBsYXllclxuXG4gICAgICB2YXIgQ29tcG9uZW50Q2xhc3MgPSBDb21wb25lbnQuZ2V0Q29tcG9uZW50KGNvbXBvbmVudENsYXNzTmFtZSk7XG5cbiAgICAgIGlmICghQ29tcG9uZW50Q2xhc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29tcG9uZW50IFwiICsgY29tcG9uZW50Q2xhc3NOYW1lICsgXCIgZG9lcyBub3QgZXhpc3RcIik7XG4gICAgICB9IC8vIGRhdGEgc3RvcmVkIGRpcmVjdGx5IG9uIHRoZSB2aWRlb2pzIG9iamVjdCBtYXkgYmVcbiAgICAgIC8vIG1pc2lkZW50aWZpZWQgYXMgYSBjb21wb25lbnQgdG8gcmV0YWluXG4gICAgICAvLyBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSB3aXRoIDQueC4gY2hlY2sgdG8gbWFrZSBzdXJlIHRoZVxuICAgICAgLy8gY29tcG9uZW50IGNsYXNzIGNhbiBiZSBpbnN0YW50aWF0ZWQuXG5cblxuICAgICAgaWYgKHR5cGVvZiBDb21wb25lbnRDbGFzcyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgY29tcG9uZW50ID0gbmV3IENvbXBvbmVudENsYXNzKHRoaXMucGxheWVyXyB8fCB0aGlzLCBvcHRpb25zKTsgLy8gY2hpbGQgaXMgYSBjb21wb25lbnQgaW5zdGFuY2VcbiAgICB9IGVsc2Uge1xuICAgICAgY29tcG9uZW50ID0gY2hpbGQ7XG4gICAgfVxuXG4gICAgaWYgKGNvbXBvbmVudC5wYXJlbnRDb21wb25lbnRfKSB7XG4gICAgICBjb21wb25lbnQucGFyZW50Q29tcG9uZW50Xy5yZW1vdmVDaGlsZChjb21wb25lbnQpO1xuICAgIH1cblxuICAgIHRoaXMuY2hpbGRyZW5fLnNwbGljZShpbmRleCwgMCwgY29tcG9uZW50KTtcbiAgICBjb21wb25lbnQucGFyZW50Q29tcG9uZW50XyA9IHRoaXM7XG5cbiAgICBpZiAodHlwZW9mIGNvbXBvbmVudC5pZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5jaGlsZEluZGV4X1tjb21wb25lbnQuaWQoKV0gPSBjb21wb25lbnQ7XG4gICAgfSAvLyBJZiBhIG5hbWUgd2Fzbid0IHVzZWQgdG8gY3JlYXRlIHRoZSBjb21wb25lbnQsIGNoZWNrIGlmIHdlIGNhbiB1c2UgdGhlXG4gICAgLy8gbmFtZSBmdW5jdGlvbiBvZiB0aGUgY29tcG9uZW50XG5cblxuICAgIGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnROYW1lIHx8IGNvbXBvbmVudC5uYW1lICYmIHRvVGl0bGVDYXNlKGNvbXBvbmVudC5uYW1lKCkpO1xuXG4gICAgaWYgKGNvbXBvbmVudE5hbWUpIHtcbiAgICAgIHRoaXMuY2hpbGROYW1lSW5kZXhfW2NvbXBvbmVudE5hbWVdID0gY29tcG9uZW50O1xuICAgIH0gLy8gQWRkIHRoZSBVSSBvYmplY3QncyBlbGVtZW50IHRvIHRoZSBjb250YWluZXIgZGl2IChib3gpXG4gICAgLy8gSGF2aW5nIGFuIGVsZW1lbnQgaXMgbm90IHJlcXVpcmVkXG5cblxuICAgIGlmICh0eXBlb2YgY29tcG9uZW50LmVsID09PSAnZnVuY3Rpb24nICYmIGNvbXBvbmVudC5lbCgpKSB7XG4gICAgICB2YXIgY2hpbGROb2RlcyA9IHRoaXMuY29udGVudEVsKCkuY2hpbGRyZW47XG4gICAgICB2YXIgcmVmTm9kZSA9IGNoaWxkTm9kZXNbaW5kZXhdIHx8IG51bGw7XG4gICAgICB0aGlzLmNvbnRlbnRFbCgpLmluc2VydEJlZm9yZShjb21wb25lbnQuZWwoKSwgcmVmTm9kZSk7XG4gICAgfSAvLyBSZXR1cm4gc28gaXQgY2FuIHN0b3JlZCBvbiBwYXJlbnQgb2JqZWN0IGlmIGRlc2lyZWQuXG5cblxuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGNoaWxkIGBDb21wb25lbnRgIGZyb20gdGhpcyBgQ29tcG9uZW50YHMgbGlzdCBvZiBjaGlsZHJlbi4gQWxzbyByZW1vdmVzXG4gICAqIHRoZSBjaGlsZCBgQ29tcG9uZW50YHMgZWxlbWVudCBmcm9tIHRoaXMgYENvbXBvbmVudGBzIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBjb21wb25lbnRcbiAgICogICAgICAgIFRoZSBjaGlsZCBgQ29tcG9uZW50YCB0byByZW1vdmUuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlbW92ZUNoaWxkID0gZnVuY3Rpb24gcmVtb3ZlQ2hpbGQoY29tcG9uZW50KSB7XG4gICAgaWYgKHR5cGVvZiBjb21wb25lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb21wb25lbnQgPSB0aGlzLmdldENoaWxkKGNvbXBvbmVudCk7XG4gICAgfVxuXG4gICAgaWYgKCFjb21wb25lbnQgfHwgIXRoaXMuY2hpbGRyZW5fKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNoaWxkRm91bmQgPSBmYWxzZTtcblxuICAgIGZvciAodmFyIGkgPSB0aGlzLmNoaWxkcmVuXy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgaWYgKHRoaXMuY2hpbGRyZW5fW2ldID09PSBjb21wb25lbnQpIHtcbiAgICAgICAgY2hpbGRGb3VuZCA9IHRydWU7XG4gICAgICAgIHRoaXMuY2hpbGRyZW5fLnNwbGljZShpLCAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFjaGlsZEZvdW5kKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29tcG9uZW50LnBhcmVudENvbXBvbmVudF8gPSBudWxsO1xuICAgIHRoaXMuY2hpbGRJbmRleF9bY29tcG9uZW50LmlkKCldID0gbnVsbDtcbiAgICB0aGlzLmNoaWxkTmFtZUluZGV4X1tjb21wb25lbnQubmFtZSgpXSA9IG51bGw7XG4gICAgdmFyIGNvbXBFbCA9IGNvbXBvbmVudC5lbCgpO1xuXG4gICAgaWYgKGNvbXBFbCAmJiBjb21wRWwucGFyZW50Tm9kZSA9PT0gdGhpcy5jb250ZW50RWwoKSkge1xuICAgICAgdGhpcy5jb250ZW50RWwoKS5yZW1vdmVDaGlsZChjb21wb25lbnQuZWwoKSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBBZGQgYW5kIGluaXRpYWxpemUgZGVmYXVsdCBjaGlsZCBgQ29tcG9uZW50YHMgYmFzZWQgdXBvbiBvcHRpb25zLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5pbml0Q2hpbGRyZW4gPSBmdW5jdGlvbiBpbml0Q2hpbGRyZW4oKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBjaGlsZHJlbiA9IHRoaXMub3B0aW9uc18uY2hpbGRyZW47XG5cbiAgICBpZiAoY2hpbGRyZW4pIHtcbiAgICAgIC8vIGB0aGlzYCBpcyBgcGFyZW50YFxuICAgICAgdmFyIHBhcmVudE9wdGlvbnMgPSB0aGlzLm9wdGlvbnNfO1xuXG4gICAgICB2YXIgaGFuZGxlQWRkID0gZnVuY3Rpb24gaGFuZGxlQWRkKGNoaWxkKSB7XG4gICAgICAgIHZhciBuYW1lID0gY2hpbGQubmFtZTtcbiAgICAgICAgdmFyIG9wdHMgPSBjaGlsZC5vcHRzOyAvLyBBbGxvdyBvcHRpb25zIGZvciBjaGlsZHJlbiB0byBiZSBzZXQgYXQgdGhlIHBhcmVudCBvcHRpb25zXG4gICAgICAgIC8vIGUuZy4gdmlkZW9qcyhpZCwgeyBjb250cm9sQmFyOiBmYWxzZSB9KTtcbiAgICAgICAgLy8gaW5zdGVhZCBvZiB2aWRlb2pzKGlkLCB7IGNoaWxkcmVuOiB7IGNvbnRyb2xCYXI6IGZhbHNlIH0pO1xuXG4gICAgICAgIGlmIChwYXJlbnRPcHRpb25zW25hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBvcHRzID0gcGFyZW50T3B0aW9uc1tuYW1lXTtcbiAgICAgICAgfSAvLyBBbGxvdyBmb3IgZGlzYWJsaW5nIGRlZmF1bHQgY29tcG9uZW50c1xuICAgICAgICAvLyBlLmcuIG9wdGlvbnNbJ2NoaWxkcmVuJ11bJ3Bvc3RlckltYWdlJ10gPSBmYWxzZVxuXG5cbiAgICAgICAgaWYgKG9wdHMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIEFsbG93IG9wdGlvbnMgdG8gYmUgcGFzc2VkIGFzIGEgc2ltcGxlIGJvb2xlYW4gaWYgbm8gY29uZmlndXJhdGlvblxuICAgICAgICAvLyBpcyBuZWNlc3NhcnkuXG5cblxuICAgICAgICBpZiAob3B0cyA9PT0gdHJ1ZSkge1xuICAgICAgICAgIG9wdHMgPSB7fTtcbiAgICAgICAgfSAvLyBXZSBhbHNvIHdhbnQgdG8gcGFzcyB0aGUgb3JpZ2luYWwgcGxheWVyIG9wdGlvbnNcbiAgICAgICAgLy8gdG8gZWFjaCBjb21wb25lbnQgYXMgd2VsbCBzbyB0aGV5IGRvbid0IG5lZWQgdG9cbiAgICAgICAgLy8gcmVhY2ggYmFjayBpbnRvIHRoZSBwbGF5ZXIgZm9yIG9wdGlvbnMgbGF0ZXIuXG5cblxuICAgICAgICBvcHRzLnBsYXllck9wdGlvbnMgPSBfdGhpcy5vcHRpb25zXy5wbGF5ZXJPcHRpb25zOyAvLyBDcmVhdGUgYW5kIGFkZCB0aGUgY2hpbGQgY29tcG9uZW50LlxuICAgICAgICAvLyBBZGQgYSBkaXJlY3QgcmVmZXJlbmNlIHRvIHRoZSBjaGlsZCBieSBuYW1lIG9uIHRoZSBwYXJlbnQgaW5zdGFuY2UuXG4gICAgICAgIC8vIElmIHR3byBvZiB0aGUgc2FtZSBjb21wb25lbnQgYXJlIHVzZWQsIGRpZmZlcmVudCBuYW1lcyBzaG91bGQgYmUgc3VwcGxpZWRcbiAgICAgICAgLy8gZm9yIGVhY2hcblxuICAgICAgICB2YXIgbmV3Q2hpbGQgPSBfdGhpcy5hZGRDaGlsZChuYW1lLCBvcHRzKTtcblxuICAgICAgICBpZiAobmV3Q2hpbGQpIHtcbiAgICAgICAgICBfdGhpc1tuYW1lXSA9IG5ld0NoaWxkO1xuICAgICAgICB9XG4gICAgICB9OyAvLyBBbGxvdyBmb3IgYW4gYXJyYXkgb2YgY2hpbGRyZW4gZGV0YWlscyB0byBwYXNzZWQgaW4gdGhlIG9wdGlvbnNcblxuXG4gICAgICB2YXIgd29ya2luZ0NoaWxkcmVuO1xuICAgICAgdmFyIFRlY2ggPSBDb21wb25lbnQuZ2V0Q29tcG9uZW50KCdUZWNoJyk7XG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkge1xuICAgICAgICB3b3JraW5nQ2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdvcmtpbmdDaGlsZHJlbiA9IE9iamVjdC5rZXlzKGNoaWxkcmVuKTtcbiAgICAgIH1cblxuICAgICAgd29ya2luZ0NoaWxkcmVuIC8vIGNoaWxkcmVuIHRoYXQgYXJlIGluIHRoaXMub3B0aW9uc18gYnV0IGFsc28gaW4gd29ya2luZ0NoaWxkcmVuICB3b3VsZFxuICAgICAgLy8gZ2l2ZSB1cyBleHRyYSBjaGlsZHJlbiB3ZSBkbyBub3Qgd2FudC4gU28sIHdlIHdhbnQgdG8gZmlsdGVyIHRoZW0gb3V0LlxuICAgICAgLmNvbmNhdChPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnNfKS5maWx0ZXIoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgIHJldHVybiAhd29ya2luZ0NoaWxkcmVuLnNvbWUoZnVuY3Rpb24gKHdjaGlsZCkge1xuICAgICAgICAgIGlmICh0eXBlb2Ygd2NoaWxkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIGNoaWxkID09PSB3Y2hpbGQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIGNoaWxkID09PSB3Y2hpbGQubmFtZTtcbiAgICAgICAgfSk7XG4gICAgICB9KSkubWFwKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICB2YXIgbmFtZTtcbiAgICAgICAgdmFyIG9wdHM7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjaGlsZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBuYW1lID0gY2hpbGQ7XG4gICAgICAgICAgb3B0cyA9IGNoaWxkcmVuW25hbWVdIHx8IF90aGlzLm9wdGlvbnNfW25hbWVdIHx8IHt9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5hbWUgPSBjaGlsZC5uYW1lO1xuICAgICAgICAgIG9wdHMgPSBjaGlsZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICBvcHRzOiBvcHRzXG4gICAgICAgIH07XG4gICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgIC8vIHdlIGhhdmUgdG8gbWFrZSBzdXJlIHRoYXQgY2hpbGQubmFtZSBpc24ndCBpbiB0aGUgdGVjaE9yZGVyIHNpbmNlXG4gICAgICAgIC8vIHRlY2hzIGFyZSByZWdpc3RlcmQgYXMgQ29tcG9uZW50cyBidXQgY2FuJ3QgYXJlbid0IGNvbXBhdGlibGVcbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92aWRlb2pzL3ZpZGVvLmpzL2lzc3Vlcy8yNzcyXG4gICAgICAgIHZhciBjID0gQ29tcG9uZW50LmdldENvbXBvbmVudChjaGlsZC5vcHRzLmNvbXBvbmVudENsYXNzIHx8IHRvVGl0bGVDYXNlKGNoaWxkLm5hbWUpKTtcbiAgICAgICAgcmV0dXJuIGMgJiYgIVRlY2guaXNUZWNoKGMpO1xuICAgICAgfSkuZm9yRWFjaChoYW5kbGVBZGQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQnVpbGRzIHRoZSBkZWZhdWx0IERPTSBjbGFzcyBuYW1lLiBTaG91bGQgYmUgb3ZlcnJpZGVuIGJ5IHN1Yi1jb21wb25lbnRzLlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIERPTSBjbGFzcyBuYW1lIGZvciB0aGlzIG9iamVjdC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgIC8vIENoaWxkIGNsYXNzZXMgY2FuIGluY2x1ZGUgYSBmdW5jdGlvbiB0aGF0IGRvZXM6XG4gICAgLy8gcmV0dXJuICdDTEFTUyBOQU1FJyArIHRoaXMuX3N1cGVyKCk7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIC8qKlxuICAgKiBCaW5kIGEgbGlzdGVuZXIgdG8gdGhlIGNvbXBvbmVudCdzIHJlYWR5IHN0YXRlLlxuICAgKiBEaWZmZXJlbnQgZnJvbSBldmVudCBsaXN0ZW5lcnMgaW4gdGhhdCBpZiB0aGUgcmVhZHkgZXZlbnQgaGFzIGFscmVhZHkgaGFwcGVuZWRcbiAgICogaXQgd2lsbCB0cmlnZ2VyIHRoZSBmdW5jdGlvbiBpbW1lZGlhdGVseS5cbiAgICpcbiAgICogQHJldHVybiB7Q29tcG9uZW50fVxuICAgKiAgICAgICAgIFJldHVybnMgaXRzZWxmOyBtZXRob2QgY2FuIGJlIGNoYWluZWQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlYWR5ID0gZnVuY3Rpb24gcmVhZHkoZm4sIHN5bmMpIHtcbiAgICBpZiAoc3luYyA9PT0gdm9pZCAwKSB7XG4gICAgICBzeW5jID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCFmbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc1JlYWR5Xykge1xuICAgICAgdGhpcy5yZWFkeVF1ZXVlXyA9IHRoaXMucmVhZHlRdWV1ZV8gfHwgW107XG4gICAgICB0aGlzLnJlYWR5UXVldWVfLnB1c2goZm4pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChzeW5jKSB7XG4gICAgICBmbi5jYWxsKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDYWxsIHRoZSBmdW5jdGlvbiBhc3luY2hyb25vdXNseSBieSBkZWZhdWx0IGZvciBjb25zaXN0ZW5jeVxuICAgICAgdGhpcy5zZXRUaW1lb3V0KGZuLCAxKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFRyaWdnZXIgYWxsIHRoZSByZWFkeSBsaXN0ZW5lcnMgZm9yIHRoaXMgYENvbXBvbmVudGAuXG4gICAqXG4gICAqIEBmaXJlcyBDb21wb25lbnQjcmVhZHlcbiAgICovXG4gIDtcblxuICBfcHJvdG8udHJpZ2dlclJlYWR5ID0gZnVuY3Rpb24gdHJpZ2dlclJlYWR5KCkge1xuICAgIHRoaXMuaXNSZWFkeV8gPSB0cnVlOyAvLyBFbnN1cmUgcmVhZHkgaXMgdHJpZ2dlcmVkIGFzeW5jaHJvbm91c2x5XG5cbiAgICB0aGlzLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHJlYWR5UXVldWUgPSB0aGlzLnJlYWR5UXVldWVfOyAvLyBSZXNldCBSZWFkeSBRdWV1ZVxuXG4gICAgICB0aGlzLnJlYWR5UXVldWVfID0gW107XG5cbiAgICAgIGlmIChyZWFkeVF1ZXVlICYmIHJlYWR5UXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICByZWFkeVF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgZm4uY2FsbCh0aGlzKTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICB9IC8vIEFsbG93IGZvciB1c2luZyBldmVudCBsaXN0ZW5lcnMgYWxzb1xuXG4gICAgICAvKipcbiAgICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgYENvbXBvbmVudGAgaXMgcmVhZHkuXG4gICAgICAgKlxuICAgICAgICogQGV2ZW50IENvbXBvbmVudCNyZWFkeVxuICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICovXG5cblxuICAgICAgdGhpcy50cmlnZ2VyKCdyZWFkeScpO1xuICAgIH0sIDEpO1xuICB9XG4gIC8qKlxuICAgKiBGaW5kIGEgc2luZ2xlIERPTSBlbGVtZW50IG1hdGNoaW5nIGEgYHNlbGVjdG9yYC4gVGhpcyBjYW4gYmUgd2l0aGluIHRoZSBgQ29tcG9uZW50YHNcbiAgICogYGNvbnRlbnRFbCgpYCBvciBhbm90aGVyIGN1c3RvbSBjb250ZXh0LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3JcbiAgICogICAgICAgIEEgdmFsaWQgQ1NTIHNlbGVjdG9yLCB3aGljaCB3aWxsIGJlIHBhc3NlZCB0byBgcXVlcnlTZWxlY3RvcmAuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudHxzdHJpbmd9IFtjb250ZXh0PXRoaXMuY29udGVudEVsKCldXG4gICAqICAgICAgICBBIERPTSBlbGVtZW50IHdpdGhpbiB3aGljaCB0byBxdWVyeS4gQ2FuIGFsc28gYmUgYSBzZWxlY3RvciBzdHJpbmcgaW5cbiAgICogICAgICAgIHdoaWNoIGNhc2UgdGhlIGZpcnN0IG1hdGNoaW5nIGVsZW1lbnQgd2lsbCBnZXQgdXNlZCBhcyBjb250ZXh0LiBJZlxuICAgKiAgICAgICAgbWlzc2luZyBgdGhpcy5jb250ZW50RWwoKWAgZ2V0cyB1c2VkLiBJZiAgYHRoaXMuY29udGVudEVsKClgIHJldHVybnNcbiAgICogICAgICAgIG5vdGhpbmcgaXQgZmFsbHMgYmFjayB0byBgZG9jdW1lbnRgLlxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fG51bGx9XG4gICAqICAgICAgICAgdGhlIGRvbSBlbGVtZW50IHRoYXQgd2FzIGZvdW5kLCBvciBudWxsXG4gICAqXG4gICAqIEBzZWUgW0luZm9ybWF0aW9uIG9uIENTUyBTZWxlY3RvcnNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0d1aWRlL0NTUy9HZXR0aW5nX1N0YXJ0ZWQvU2VsZWN0b3JzKVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by4kID0gZnVuY3Rpb24gJCQkMShzZWxlY3RvciwgY29udGV4dCkge1xuICAgIHJldHVybiAkKHNlbGVjdG9yLCBjb250ZXh0IHx8IHRoaXMuY29udGVudEVsKCkpO1xuICB9XG4gIC8qKlxuICAgKiBGaW5kcyBhbGwgRE9NIGVsZW1lbnQgbWF0Y2hpbmcgYSBgc2VsZWN0b3JgLiBUaGlzIGNhbiBiZSB3aXRoaW4gdGhlIGBDb21wb25lbnRgc1xuICAgKiBgY29udGVudEVsKClgIG9yIGFub3RoZXIgY3VzdG9tIGNvbnRleHQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvclxuICAgKiAgICAgICAgQSB2YWxpZCBDU1Mgc2VsZWN0b3IsIHdoaWNoIHdpbGwgYmUgcGFzc2VkIHRvIGBxdWVyeVNlbGVjdG9yQWxsYC5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fHN0cmluZ30gW2NvbnRleHQ9dGhpcy5jb250ZW50RWwoKV1cbiAgICogICAgICAgIEEgRE9NIGVsZW1lbnQgd2l0aGluIHdoaWNoIHRvIHF1ZXJ5LiBDYW4gYWxzbyBiZSBhIHNlbGVjdG9yIHN0cmluZyBpblxuICAgKiAgICAgICAgd2hpY2ggY2FzZSB0aGUgZmlyc3QgbWF0Y2hpbmcgZWxlbWVudCB3aWxsIGdldCB1c2VkIGFzIGNvbnRleHQuIElmXG4gICAqICAgICAgICBtaXNzaW5nIGB0aGlzLmNvbnRlbnRFbCgpYCBnZXRzIHVzZWQuIElmICBgdGhpcy5jb250ZW50RWwoKWAgcmV0dXJuc1xuICAgKiAgICAgICAgbm90aGluZyBpdCBmYWxscyBiYWNrIHRvIGBkb2N1bWVudGAuXG4gICAqXG4gICAqIEByZXR1cm4ge05vZGVMaXN0fVxuICAgKiAgICAgICAgIGEgbGlzdCBvZiBkb20gZWxlbWVudHMgdGhhdCB3ZXJlIGZvdW5kXG4gICAqXG4gICAqIEBzZWUgW0luZm9ybWF0aW9uIG9uIENTUyBTZWxlY3RvcnNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0d1aWRlL0NTUy9HZXR0aW5nX1N0YXJ0ZWQvU2VsZWN0b3JzKVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by4kJCA9IGZ1bmN0aW9uICQkJCQxKHNlbGVjdG9yLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuICQkKHNlbGVjdG9yLCBjb250ZXh0IHx8IHRoaXMuY29udGVudEVsKCkpO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGNvbXBvbmVudCdzIGVsZW1lbnQgaGFzIGEgQ1NTIGNsYXNzIG5hbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc1RvQ2hlY2tcbiAgICogICAgICAgIENTUyBjbGFzcyBuYW1lIHRvIGNoZWNrLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIC0gVHJ1ZSBpZiB0aGUgYENvbXBvbmVudGAgaGFzIHRoZSBjbGFzcy5cbiAgICogICAgICAgICAtIEZhbHNlIGlmIHRoZSBgQ29tcG9uZW50YCBkb2VzIG5vdCBoYXZlIHRoZSBjbGFzc2BcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFzQ2xhc3MgPSBmdW5jdGlvbiBoYXNDbGFzcyQkMShjbGFzc1RvQ2hlY2spIHtcbiAgICByZXR1cm4gaGFzQ2xhc3ModGhpcy5lbF8sIGNsYXNzVG9DaGVjayk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIENTUyBjbGFzcyBuYW1lIHRvIHRoZSBgQ29tcG9uZW50YHMgZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzVG9BZGRcbiAgICogICAgICAgIENTUyBjbGFzcyBuYW1lIHRvIGFkZFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5hZGRDbGFzcyA9IGZ1bmN0aW9uIGFkZENsYXNzJCQxKGNsYXNzVG9BZGQpIHtcbiAgICBhZGRDbGFzcyh0aGlzLmVsXywgY2xhc3NUb0FkZCk7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSBhIENTUyBjbGFzcyBuYW1lIGZyb20gdGhlIGBDb21wb25lbnRgcyBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NUb1JlbW92ZVxuICAgKiAgICAgICAgQ1NTIGNsYXNzIG5hbWUgdG8gcmVtb3ZlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlbW92ZUNsYXNzID0gZnVuY3Rpb24gcmVtb3ZlQ2xhc3MkJDEoY2xhc3NUb1JlbW92ZSkge1xuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWxfLCBjbGFzc1RvUmVtb3ZlKTtcbiAgfVxuICAvKipcbiAgICogQWRkIG9yIHJlbW92ZSBhIENTUyBjbGFzcyBuYW1lIGZyb20gdGhlIGNvbXBvbmVudCdzIGVsZW1lbnQuXG4gICAqIC0gYGNsYXNzVG9Ub2dnbGVgIGdldHMgYWRkZWQgd2hlbiB7QGxpbmsgQ29tcG9uZW50I2hhc0NsYXNzfSB3b3VsZCByZXR1cm4gZmFsc2UuXG4gICAqIC0gYGNsYXNzVG9Ub2dnbGVgIGdldHMgcmVtb3ZlZCB3aGVuIHtAbGluayBDb21wb25lbnQjaGFzQ2xhc3N9IHdvdWxkIHJldHVybiB0cnVlLlxuICAgKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGNsYXNzVG9Ub2dnbGVcbiAgICogICAgICAgICBUaGUgY2xhc3MgdG8gYWRkIG9yIHJlbW92ZSBiYXNlZCBvbiAoQGxpbmsgQ29tcG9uZW50I2hhc0NsYXNzfVxuICAgKlxuICAgKiBAcGFyYW0gIHtib29sZWFufERvbX5wcmVkaWNhdGV9IFtwcmVkaWNhdGVdXG4gICAqICAgICAgICAgQW4ge0BsaW5rIERvbX5wcmVkaWNhdGV9IGZ1bmN0aW9uIG9yIGEgYm9vbGVhblxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b2dnbGVDbGFzcyA9IGZ1bmN0aW9uIHRvZ2dsZUNsYXNzJCQxKGNsYXNzVG9Ub2dnbGUsIHByZWRpY2F0ZSkge1xuICAgIHRvZ2dsZUNsYXNzKHRoaXMuZWxfLCBjbGFzc1RvVG9nZ2xlLCBwcmVkaWNhdGUpO1xuICB9XG4gIC8qKlxuICAgKiBTaG93IHRoZSBgQ29tcG9uZW50YHMgZWxlbWVudCBpZiBpdCBpcyBoaWRkZW4gYnkgcmVtb3ZpbmcgdGhlXG4gICAqICd2anMtaGlkZGVuJyBjbGFzcyBuYW1lIGZyb20gaXQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnNob3cgPSBmdW5jdGlvbiBzaG93KCkge1xuICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgfVxuICAvKipcbiAgICogSGlkZSB0aGUgYENvbXBvbmVudGBzIGVsZW1lbnQgaWYgaXQgaXMgY3VycmVudGx5IHNob3dpbmcgYnkgYWRkaW5nIHRoZVxuICAgKiAndmpzLWhpZGRlbmAgY2xhc3MgbmFtZSB0byBpdC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGlkZSA9IGZ1bmN0aW9uIGhpZGUoKSB7XG4gICAgdGhpcy5hZGRDbGFzcygndmpzLWhpZGRlbicpO1xuICB9XG4gIC8qKlxuICAgKiBMb2NrIGEgYENvbXBvbmVudGBzIGVsZW1lbnQgaW4gaXRzIHZpc2libGUgc3RhdGUgYnkgYWRkaW5nIHRoZSAndmpzLWxvY2stc2hvd2luZydcbiAgICogY2xhc3MgbmFtZSB0byBpdC4gVXNlZCBkdXJpbmcgZmFkZUluL2ZhZGVPdXQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmxvY2tTaG93aW5nID0gZnVuY3Rpb24gbG9ja1Nob3dpbmcoKSB7XG4gICAgdGhpcy5hZGRDbGFzcygndmpzLWxvY2stc2hvd2luZycpO1xuICB9XG4gIC8qKlxuICAgKiBVbmxvY2sgYSBgQ29tcG9uZW50YHMgZWxlbWVudCBmcm9tIGl0cyB2aXNpYmxlIHN0YXRlIGJ5IHJlbW92aW5nIHRoZSAndmpzLWxvY2stc2hvd2luZydcbiAgICogY2xhc3MgbmFtZSBmcm9tIGl0LiBVc2VkIGR1cmluZyBmYWRlSW4vZmFkZU91dC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8udW5sb2NrU2hvd2luZyA9IGZ1bmN0aW9uIHVubG9ja1Nob3dpbmcoKSB7XG4gICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWxvY2stc2hvd2luZycpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGFuIGF0dHJpYnV0ZSBvbiB0aGUgYENvbXBvbmVudGBzIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVcbiAgICogICAgICAgIE5hbWUgb2YgdGhlIGF0dHJpYnV0ZSB0byBnZXQgdGhlIHZhbHVlIGZyb20uXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ3xudWxsfVxuICAgKiAgICAgICAgIC0gVGhlIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgdGhhdCB3YXMgYXNrZWQgZm9yLlxuICAgKiAgICAgICAgIC0gQ2FuIGJlIGFuIGVtcHR5IHN0cmluZyBvbiBzb21lIGJyb3dzZXJzIGlmIHRoZSBhdHRyaWJ1dGUgZG9lcyBub3QgZXhpc3RcbiAgICogICAgICAgICAgIG9yIGhhcyBubyB2YWx1ZVxuICAgKiAgICAgICAgIC0gTW9zdCBicm93c2VycyB3aWxsIHJldHVybiBudWxsIGlmIHRoZSBhdHRpYnV0ZSBkb2VzIG5vdCBleGlzdCBvciBoYXNcbiAgICogICAgICAgICAgIG5vIHZhbHVlLlxuICAgKlxuICAgKiBAc2VlIFtET00gQVBJXXtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRWxlbWVudC9nZXRBdHRyaWJ1dGV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmdldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIGdldEF0dHJpYnV0ZSQkMShhdHRyaWJ1dGUpIHtcbiAgICByZXR1cm4gZ2V0QXR0cmlidXRlKHRoaXMuZWxfLCBhdHRyaWJ1dGUpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlIG9mIGFuIGF0dHJpYnV0ZSBvbiB0aGUgYENvbXBvbmVudGAncyBlbGVtZW50XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVcbiAgICogICAgICAgIE5hbWUgb2YgdGhlIGF0dHJpYnV0ZSB0byBzZXQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgKiAgICAgICAgVmFsdWUgdG8gc2V0IHRoZSBhdHRyaWJ1dGUgdG8uXG4gICAqXG4gICAqIEBzZWUgW0RPTSBBUElde0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L3NldEF0dHJpYnV0ZX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uc2V0QXR0cmlidXRlID0gZnVuY3Rpb24gc2V0QXR0cmlidXRlJCQxKGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBzZXRBdHRyaWJ1dGUodGhpcy5lbF8sIGF0dHJpYnV0ZSwgdmFsdWUpO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gYXR0cmlidXRlIGZyb20gdGhlIGBDb21wb25lbnRgcyBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlXG4gICAqICAgICAgICBOYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdG8gcmVtb3ZlLlxuICAgKlxuICAgKiBAc2VlIFtET00gQVBJXXtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRWxlbWVudC9yZW1vdmVBdHRyaWJ1dGV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlbW92ZUF0dHJpYnV0ZSA9IGZ1bmN0aW9uIHJlbW92ZUF0dHJpYnV0ZSQkMShhdHRyaWJ1dGUpIHtcbiAgICByZW1vdmVBdHRyaWJ1dGUodGhpcy5lbF8sIGF0dHJpYnV0ZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBvciBzZXQgdGhlIHdpZHRoIG9mIHRoZSBjb21wb25lbnQgYmFzZWQgdXBvbiB0aGUgQ1NTIHN0eWxlcy5cbiAgICogU2VlIHtAbGluayBDb21wb25lbnQjZGltZW5zaW9ufSBmb3IgbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBbbnVtXVxuICAgKiAgICAgICAgVGhlIHdpZHRoIHRoYXQgeW91IHdhbnQgdG8gc2V0IHBvc3RmaXhlZCB3aXRoICclJywgJ3B4JyBvciBub3RoaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtza2lwTGlzdGVuZXJzXVxuICAgKiAgICAgICAgU2tpcCB0aGUgY29tcG9uZW50cmVzaXplIGV2ZW50IHRyaWdnZXJcbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfHN0cmluZ31cbiAgICogICAgICAgICBUaGUgd2lkdGggd2hlbiBnZXR0aW5nLCB6ZXJvIGlmIHRoZXJlIGlzIG5vIHdpZHRoLiBDYW4gYmUgYSBzdHJpbmdcbiAgICogICAgICAgICAgIHBvc3RwaXhlZCB3aXRoICclJyBvciAncHgnLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by53aWR0aCA9IGZ1bmN0aW9uIHdpZHRoKG51bSwgc2tpcExpc3RlbmVycykge1xuICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbignd2lkdGgnLCBudW0sIHNraXBMaXN0ZW5lcnMpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgb3Igc2V0IHRoZSBoZWlnaHQgb2YgdGhlIGNvbXBvbmVudCBiYXNlZCB1cG9uIHRoZSBDU1Mgc3R5bGVzLlxuICAgKiBTZWUge0BsaW5rIENvbXBvbmVudCNkaW1lbnNpb259IGZvciBtb3JlIGRldGFpbGVkIGluZm9ybWF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IFtudW1dXG4gICAqICAgICAgICBUaGUgaGVpZ2h0IHRoYXQgeW91IHdhbnQgdG8gc2V0IHBvc3RmaXhlZCB3aXRoICclJywgJ3B4JyBvciBub3RoaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtza2lwTGlzdGVuZXJzXVxuICAgKiAgICAgICAgU2tpcCB0aGUgY29tcG9uZW50cmVzaXplIGV2ZW50IHRyaWdnZXJcbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfHN0cmluZ31cbiAgICogICAgICAgICBUaGUgd2lkdGggd2hlbiBnZXR0aW5nLCB6ZXJvIGlmIHRoZXJlIGlzIG5vIHdpZHRoLiBDYW4gYmUgYSBzdHJpbmdcbiAgICogICAgICAgICBwb3N0cGl4ZWQgd2l0aCAnJScgb3IgJ3B4Jy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGVpZ2h0ID0gZnVuY3Rpb24gaGVpZ2h0KG51bSwgc2tpcExpc3RlbmVycykge1xuICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbignaGVpZ2h0JywgbnVtLCBza2lwTGlzdGVuZXJzKTtcbiAgfVxuICAvKipcbiAgICogU2V0IGJvdGggdGhlIHdpZHRoIGFuZCBoZWlnaHQgb2YgdGhlIGBDb21wb25lbnRgIGVsZW1lbnQgYXQgdGhlIHNhbWUgdGltZS5cbiAgICpcbiAgICogQHBhcmFtICB7bnVtYmVyfHN0cmluZ30gd2lkdGhcbiAgICogICAgICAgICBXaWR0aCB0byBzZXQgdGhlIGBDb21wb25lbnRgcyBlbGVtZW50IHRvLlxuICAgKlxuICAgKiBAcGFyYW0gIHtudW1iZXJ8c3RyaW5nfSBoZWlnaHRcbiAgICogICAgICAgICBIZWlnaHQgdG8gc2V0IHRoZSBgQ29tcG9uZW50YHMgZWxlbWVudCB0by5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGltZW5zaW9ucyA9IGZ1bmN0aW9uIGRpbWVuc2lvbnMod2lkdGgsIGhlaWdodCkge1xuICAgIC8vIFNraXAgY29tcG9uZW50cmVzaXplIGxpc3RlbmVycyBvbiB3aWR0aCBmb3Igb3B0aW1pemF0aW9uXG4gICAgdGhpcy53aWR0aCh3aWR0aCwgdHJ1ZSk7XG4gICAgdGhpcy5oZWlnaHQoaGVpZ2h0KTtcbiAgfVxuICAvKipcbiAgICogR2V0IG9yIHNldCB3aWR0aCBvciBoZWlnaHQgb2YgdGhlIGBDb21wb25lbnRgIGVsZW1lbnQuIFRoaXMgaXMgdGhlIHNoYXJlZCBjb2RlXG4gICAqIGZvciB0aGUge0BsaW5rIENvbXBvbmVudCN3aWR0aH0gYW5kIHtAbGluayBDb21wb25lbnQjaGVpZ2h0fS5cbiAgICpcbiAgICogVGhpbmdzIHRvIGtub3c6XG4gICAqIC0gSWYgdGhlIHdpZHRoIG9yIGhlaWdodCBpbiBhbiBudW1iZXIgdGhpcyB3aWxsIHJldHVybiB0aGUgbnVtYmVyIHBvc3RmaXhlZCB3aXRoICdweCcuXG4gICAqIC0gSWYgdGhlIHdpZHRoL2hlaWdodCBpcyBhIHBlcmNlbnQgdGhpcyB3aWxsIHJldHVybiB0aGUgcGVyY2VudCBwb3N0Zml4ZWQgd2l0aCAnJSdcbiAgICogLSBIaWRkZW4gZWxlbWVudHMgaGF2ZSBhIHdpZHRoIG9mIDAgd2l0aCBgd2luZG93LmdldENvbXB1dGVkU3R5bGVgLiBUaGlzIGZ1bmN0aW9uXG4gICAqICAgZGVmYXVsdHMgdG8gdGhlIGBDb21wb25lbnRgcyBgc3R5bGUud2lkdGhgIGFuZCBmYWxscyBiYWNrIHRvIGB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZWAuXG4gICAqICAgU2VlIFt0aGlzXXtAbGluayBodHRwOi8vd3d3LmZvbGlvdGVrLmNvbS9kZXZibG9nL2dldHRpbmctdGhlLXdpZHRoLW9mLWEtaGlkZGVuLWVsZW1lbnQtd2l0aC1qcXVlcnktdXNpbmctd2lkdGgvfVxuICAgKiAgIGZvciBtb3JlIGluZm9ybWF0aW9uXG4gICAqIC0gSWYgeW91IHdhbnQgdGhlIGNvbXB1dGVkIHN0eWxlIG9mIHRoZSBjb21wb25lbnQsIHVzZSB7QGxpbmsgQ29tcG9uZW50I2N1cnJlbnRXaWR0aH1cbiAgICogICBhbmQge0BsaW5rIHtDb21wb25lbnQjY3VycmVudEhlaWdodH1cbiAgICpcbiAgICogQGZpcmVzIENvbXBvbmVudCNjb21wb25lbnRyZXNpemVcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHdpZHRoT3JIZWlnaHRcbiAgIDggICAgICAgICd3aWR0aCcgb3IgJ2hlaWdodCdcbiAgICpcbiAgICogQHBhcmFtICB7bnVtYmVyfHN0cmluZ30gW251bV1cbiAgIDggICAgICAgICBOZXcgZGltZW5zaW9uXG4gICAqXG4gICAqIEBwYXJhbSAge2Jvb2xlYW59IFtza2lwTGlzdGVuZXJzXVxuICAgKiAgICAgICAgIFNraXAgY29tcG9uZW50cmVzaXplIGV2ZW50IHRyaWdnZXJcbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIFRoZSBkaW1lbnNpb24gd2hlbiBnZXR0aW5nIG9yIDAgaWYgdW5zZXRcbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGltZW5zaW9uID0gZnVuY3Rpb24gZGltZW5zaW9uKHdpZHRoT3JIZWlnaHQsIG51bSwgc2tpcExpc3RlbmVycykge1xuICAgIGlmIChudW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gU2V0IHRvIHplcm8gaWYgbnVsbCBvciBsaXRlcmFsbHkgTmFOIChOYU4gIT09IE5hTilcbiAgICAgIGlmIChudW0gPT09IG51bGwgfHwgbnVtICE9PSBudW0pIHtcbiAgICAgICAgbnVtID0gMDtcbiAgICAgIH0gLy8gQ2hlY2sgaWYgdXNpbmcgY3NzIHdpZHRoL2hlaWdodCAoJSBvciBweCkgYW5kIGFkanVzdFxuXG5cbiAgICAgIGlmICgoJycgKyBudW0pLmluZGV4T2YoJyUnKSAhPT0gLTEgfHwgKCcnICsgbnVtKS5pbmRleE9mKCdweCcpICE9PSAtMSkge1xuICAgICAgICB0aGlzLmVsXy5zdHlsZVt3aWR0aE9ySGVpZ2h0XSA9IG51bTtcbiAgICAgIH0gZWxzZSBpZiAobnVtID09PSAnYXV0bycpIHtcbiAgICAgICAgdGhpcy5lbF8uc3R5bGVbd2lkdGhPckhlaWdodF0gPSAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWxfLnN0eWxlW3dpZHRoT3JIZWlnaHRdID0gbnVtICsgJ3B4JztcbiAgICAgIH0gLy8gc2tpcExpc3RlbmVycyBhbGxvd3MgdXMgdG8gYXZvaWQgdHJpZ2dlcmluZyB0aGUgcmVzaXplIGV2ZW50IHdoZW4gc2V0dGluZyBib3RoIHdpZHRoIGFuZCBoZWlnaHRcblxuXG4gICAgICBpZiAoIXNraXBMaXN0ZW5lcnMpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgY29tcG9uZW50IGlzIHJlc2l6ZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBDb21wb25lbnQjY29tcG9uZW50cmVzaXplXG4gICAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJpZ2dlcignY29tcG9uZW50cmVzaXplJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9IC8vIE5vdCBzZXR0aW5nIGEgdmFsdWUsIHNvIGdldHRpbmcgaXRcbiAgICAvLyBNYWtlIHN1cmUgZWxlbWVudCBleGlzdHNcblxuXG4gICAgaWYgKCF0aGlzLmVsXykge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSAvLyBHZXQgZGltZW5zaW9uIHZhbHVlIGZyb20gc3R5bGVcblxuXG4gICAgdmFyIHZhbCA9IHRoaXMuZWxfLnN0eWxlW3dpZHRoT3JIZWlnaHRdO1xuICAgIHZhciBweEluZGV4ID0gdmFsLmluZGV4T2YoJ3B4Jyk7XG5cbiAgICBpZiAocHhJbmRleCAhPT0gLTEpIHtcbiAgICAgIC8vIFJldHVybiB0aGUgcGl4ZWwgdmFsdWUgd2l0aCBubyAncHgnXG4gICAgICByZXR1cm4gcGFyc2VJbnQodmFsLnNsaWNlKDAsIHB4SW5kZXgpLCAxMCk7XG4gICAgfSAvLyBObyBweCBzbyB1c2luZyAlIG9yIG5vIHN0eWxlIHdhcyBzZXQsIHNvIGZhbGxpbmcgYmFjayB0byBvZmZzZXRXaWR0aC9oZWlnaHRcbiAgICAvLyBJZiBjb21wb25lbnQgaGFzIGRpc3BsYXk6bm9uZSwgb2Zmc2V0IHdpbGwgcmV0dXJuIDBcbiAgICAvLyBUT0RPOiBoYW5kbGUgZGlzcGxheTpub25lIGFuZCBubyBkaW1lbnNpb24gc3R5bGUgdXNpbmcgcHhcblxuXG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZWxfWydvZmZzZXQnICsgdG9UaXRsZUNhc2Uod2lkdGhPckhlaWdodCldLCAxMCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY29tcHV0ZWQgd2lkdGggb3IgdGhlIGhlaWdodCBvZiB0aGUgY29tcG9uZW50J3MgZWxlbWVudC5cbiAgICpcbiAgICogVXNlcyBgd2luZG93LmdldENvbXB1dGVkU3R5bGVgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gd2lkdGhPckhlaWdodFxuICAgKiAgICAgICAgQSBzdHJpbmcgY29udGFpbmluZyAnd2lkdGgnIG9yICdoZWlnaHQnLiBXaGljaGV2ZXIgb25lIHlvdSB3YW50IHRvIGdldC5cbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIFRoZSBkaW1lbnNpb24gdGhhdCBnZXRzIGFza2VkIGZvciBvciAwIGlmIG5vdGhpbmcgd2FzIHNldFxuICAgKiAgICAgICAgIGZvciB0aGF0IGRpbWVuc2lvbi5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3VycmVudERpbWVuc2lvbiA9IGZ1bmN0aW9uIGN1cnJlbnREaW1lbnNpb24od2lkdGhPckhlaWdodCkge1xuICAgIHZhciBjb21wdXRlZFdpZHRoT3JIZWlnaHQgPSAwO1xuXG4gICAgaWYgKHdpZHRoT3JIZWlnaHQgIT09ICd3aWR0aCcgJiYgd2lkdGhPckhlaWdodCAhPT0gJ2hlaWdodCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY3VycmVudERpbWVuc2lvbiBvbmx5IGFjY2VwdHMgd2lkdGggb3IgaGVpZ2h0IHZhbHVlJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3ckMS5nZXRDb21wdXRlZFN0eWxlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdyQxLmdldENvbXB1dGVkU3R5bGUodGhpcy5lbF8pO1xuICAgICAgY29tcHV0ZWRXaWR0aE9ySGVpZ2h0ID0gY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKHdpZHRoT3JIZWlnaHQpIHx8IGNvbXB1dGVkU3R5bGVbd2lkdGhPckhlaWdodF07XG4gICAgfSAvLyByZW1vdmUgJ3B4JyBmcm9tIHZhcmlhYmxlIGFuZCBwYXJzZSBhcyBpbnRlZ2VyXG5cblxuICAgIGNvbXB1dGVkV2lkdGhPckhlaWdodCA9IHBhcnNlRmxvYXQoY29tcHV0ZWRXaWR0aE9ySGVpZ2h0KTsgLy8gaWYgdGhlIGNvbXB1dGVkIHZhbHVlIGlzIHN0aWxsIDAsIGl0J3MgcG9zc2libGUgdGhhdCB0aGUgYnJvd3NlciBpcyBseWluZ1xuICAgIC8vIGFuZCB3ZSB3YW50IHRvIGNoZWNrIHRoZSBvZmZzZXQgdmFsdWVzLlxuICAgIC8vIFRoaXMgY29kZSBhbHNvIHJ1bnMgd2hlcmV2ZXIgZ2V0Q29tcHV0ZWRTdHlsZSBkb2Vzbid0IGV4aXN0LlxuXG4gICAgaWYgKGNvbXB1dGVkV2lkdGhPckhlaWdodCA9PT0gMCkge1xuICAgICAgdmFyIHJ1bGUgPSBcIm9mZnNldFwiICsgdG9UaXRsZUNhc2Uod2lkdGhPckhlaWdodCk7XG4gICAgICBjb21wdXRlZFdpZHRoT3JIZWlnaHQgPSB0aGlzLmVsX1tydWxlXTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29tcHV0ZWRXaWR0aE9ySGVpZ2h0O1xuICB9XG4gIC8qKlxuICAgKiBBbiBvYmplY3QgdGhhdCBjb250YWlucyB3aWR0aCBhbmQgaGVpZ2h0IHZhbHVlcyBvZiB0aGUgYENvbXBvbmVudGBzXG4gICAqIGNvbXB1dGVkIHN0eWxlLiBVc2VzIGB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZWAuXG4gICAqXG4gICAqIEB0eXBlZGVmIHtPYmplY3R9IENvbXBvbmVudH5EaW1lbnNpb25PYmplY3RcbiAgICpcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHdpZHRoXG4gICAqICAgICAgICAgICBUaGUgd2lkdGggb2YgdGhlIGBDb21wb25lbnRgcyBjb21wdXRlZCBzdHlsZS5cbiAgICpcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IGhlaWdodFxuICAgKiAgICAgICAgICAgVGhlIGhlaWdodCBvZiB0aGUgYENvbXBvbmVudGBzIGNvbXB1dGVkIHN0eWxlLlxuICAgKi9cblxuICAvKipcbiAgICogR2V0IGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGNvbXB1dGVkIHdpZHRoIGFuZCBoZWlnaHQgdmFsdWVzIG9mIHRoZVxuICAgKiBjb21wb25lbnQncyBlbGVtZW50LlxuICAgKlxuICAgKiBVc2VzIGB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZWAuXG4gICAqXG4gICAqIEByZXR1cm4ge0NvbXBvbmVudH5EaW1lbnNpb25PYmplY3R9XG4gICAqICAgICAgICAgVGhlIGNvbXB1dGVkIGRpbWVuc2lvbnMgb2YgdGhlIGNvbXBvbmVudCdzIGVsZW1lbnQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmN1cnJlbnREaW1lbnNpb25zID0gZnVuY3Rpb24gY3VycmVudERpbWVuc2lvbnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoOiB0aGlzLmN1cnJlbnREaW1lbnNpb24oJ3dpZHRoJyksXG4gICAgICBoZWlnaHQ6IHRoaXMuY3VycmVudERpbWVuc2lvbignaGVpZ2h0JylcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvbXB1dGVkIHdpZHRoIG9mIHRoZSBjb21wb25lbnQncyBlbGVtZW50LlxuICAgKlxuICAgKiBVc2VzIGB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZWAuXG4gICAqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICBUaGUgY29tcHV0ZWQgd2lkdGggb2YgdGhlIGNvbXBvbmVudCdzIGVsZW1lbnQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmN1cnJlbnRXaWR0aCA9IGZ1bmN0aW9uIGN1cnJlbnRXaWR0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RGltZW5zaW9uKCd3aWR0aCcpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvbXB1dGVkIGhlaWdodCBvZiB0aGUgY29tcG9uZW50J3MgZWxlbWVudC5cbiAgICpcbiAgICogVXNlcyBgd2luZG93LmdldENvbXB1dGVkU3R5bGVgLlxuICAgKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqICAgICAgICAgVGhlIGNvbXB1dGVkIGhlaWdodCBvZiB0aGUgY29tcG9uZW50J3MgZWxlbWVudC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3VycmVudEhlaWdodCA9IGZ1bmN0aW9uIGN1cnJlbnRIZWlnaHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudERpbWVuc2lvbignaGVpZ2h0Jyk7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgZm9jdXMgdG8gdGhpcyBjb21wb25lbnRcbiAgICovXG4gIDtcblxuICBfcHJvdG8uZm9jdXMgPSBmdW5jdGlvbiBmb2N1cygpIHtcbiAgICB0aGlzLmVsXy5mb2N1cygpO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGZvY3VzIGZyb20gdGhpcyBjb21wb25lbnRcbiAgICovXG4gIDtcblxuICBfcHJvdG8uYmx1ciA9IGZ1bmN0aW9uIGJsdXIoKSB7XG4gICAgdGhpcy5lbF8uYmx1cigpO1xuICB9XG4gIC8qKlxuICAgKiBXaGVuIHRoaXMgQ29tcG9uZW50IHJlY2VpdmVzIGEga2V5ZG93biBldmVudCB3aGljaCBpdCBkb2VzIG5vdCBwcm9jZXNzLFxuICAgKiAgaXQgcGFzc2VzIHRoZSBldmVudCB0byB0aGUgUGxheWVyIGZvciBoYW5kbGluZy5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIFRoZSBga2V5ZG93bmAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZSBjYWxsZWQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZUtleVByZXNzID0gZnVuY3Rpb24gaGFuZGxlS2V5UHJlc3MoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5wbGF5ZXJfKSB7XG4gICAgICB0aGlzLnBsYXllcl8uaGFuZGxlS2V5UHJlc3MoZXZlbnQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRW1pdCBhICd0YXAnIGV2ZW50cyB3aGVuIHRvdWNoIGV2ZW50IHN1cHBvcnQgZ2V0cyBkZXRlY3RlZC4gVGhpcyBnZXRzIHVzZWQgdG9cbiAgICogc3VwcG9ydCB0b2dnbGluZyB0aGUgY29udHJvbHMgdGhyb3VnaCBhIHRhcCBvbiB0aGUgdmlkZW8uIFRoZXkgZ2V0IGVuYWJsZWRcbiAgICogYmVjYXVzZSBldmVyeSBzdWItY29tcG9uZW50IHdvdWxkIGhhdmUgZXh0cmEgb3ZlcmhlYWQgb3RoZXJ3aXNlLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAZmlyZXMgQ29tcG9uZW50I3RhcFxuICAgKiBAbGlzdGVucyBDb21wb25lbnQjdG91Y2hzdGFydFxuICAgKiBAbGlzdGVucyBDb21wb25lbnQjdG91Y2htb3ZlXG4gICAqIEBsaXN0ZW5zIENvbXBvbmVudCN0b3VjaGxlYXZlXG4gICAqIEBsaXN0ZW5zIENvbXBvbmVudCN0b3VjaGNhbmNlbFxuICAgKiBAbGlzdGVucyBDb21wb25lbnQjdG91Y2hlbmRcbiAgICAqL1xuICA7XG5cbiAgX3Byb3RvLmVtaXRUYXBFdmVudHMgPSBmdW5jdGlvbiBlbWl0VGFwRXZlbnRzKCkge1xuICAgIC8vIFRyYWNrIHRoZSBzdGFydCB0aW1lIHNvIHdlIGNhbiBkZXRlcm1pbmUgaG93IGxvbmcgdGhlIHRvdWNoIGxhc3RlZFxuICAgIHZhciB0b3VjaFN0YXJ0ID0gMDtcbiAgICB2YXIgZmlyc3RUb3VjaCA9IG51bGw7IC8vIE1heGltdW0gbW92ZW1lbnQgYWxsb3dlZCBkdXJpbmcgYSB0b3VjaCBldmVudCB0byBzdGlsbCBiZSBjb25zaWRlcmVkIGEgdGFwXG4gICAgLy8gT3RoZXIgcG9wdWxhciBsaWJzIHVzZSBhbnl3aGVyZSBmcm9tIDIgKGhhbW1lci5qcykgdG8gMTUsXG4gICAgLy8gc28gMTAgc2VlbXMgbGlrZSBhIG5pY2UsIHJvdW5kIG51bWJlci5cblxuICAgIHZhciB0YXBNb3ZlbWVudFRocmVzaG9sZCA9IDEwOyAvLyBUaGUgbWF4aW11bSBsZW5ndGggYSB0b3VjaCBjYW4gYmUgd2hpbGUgc3RpbGwgYmVpbmcgY29uc2lkZXJlZCBhIHRhcFxuXG4gICAgdmFyIHRvdWNoVGltZVRocmVzaG9sZCA9IDIwMDtcbiAgICB2YXIgY291bGRCZVRhcDtcbiAgICB0aGlzLm9uKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAvLyBJZiBtb3JlIHRoYW4gb25lIGZpbmdlciwgZG9uJ3QgY29uc2lkZXIgdHJlYXRpbmcgdGhpcyBhcyBhIGNsaWNrXG4gICAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gQ29weSBwYWdlWC9wYWdlWSBmcm9tIHRoZSBvYmplY3RcbiAgICAgICAgZmlyc3RUb3VjaCA9IHtcbiAgICAgICAgICBwYWdlWDogZXZlbnQudG91Y2hlc1swXS5wYWdlWCxcbiAgICAgICAgICBwYWdlWTogZXZlbnQudG91Y2hlc1swXS5wYWdlWVxuICAgICAgICB9OyAvLyBSZWNvcmQgc3RhcnQgdGltZSBzbyB3ZSBjYW4gZGV0ZWN0IGEgdGFwIHZzLiBcInRvdWNoIGFuZCBob2xkXCJcblxuICAgICAgICB0b3VjaFN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7IC8vIFJlc2V0IGNvdWxkQmVUYXAgdHJhY2tpbmdcblxuICAgICAgICBjb3VsZEJlVGFwID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLm9uKCd0b3VjaG1vdmUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIC8vIElmIG1vcmUgdGhhbiBvbmUgZmluZ2VyLCBkb24ndCBjb25zaWRlciB0cmVhdGluZyB0aGlzIGFzIGEgY2xpY2tcbiAgICAgIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgY291bGRCZVRhcCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChmaXJzdFRvdWNoKSB7XG4gICAgICAgIC8vIFNvbWUgZGV2aWNlcyB3aWxsIHRocm93IHRvdWNobW92ZXMgZm9yIGFsbCBidXQgdGhlIHNsaWdodGVzdCBvZiB0YXBzLlxuICAgICAgICAvLyBTbywgaWYgd2UgbW92ZWQgb25seSBhIHNtYWxsIGRpc3RhbmNlLCB0aGlzIGNvdWxkIHN0aWxsIGJlIGEgdGFwXG4gICAgICAgIHZhciB4ZGlmZiA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVggLSBmaXJzdFRvdWNoLnBhZ2VYO1xuICAgICAgICB2YXIgeWRpZmYgPSBldmVudC50b3VjaGVzWzBdLnBhZ2VZIC0gZmlyc3RUb3VjaC5wYWdlWTtcbiAgICAgICAgdmFyIHRvdWNoRGlzdGFuY2UgPSBNYXRoLnNxcnQoeGRpZmYgKiB4ZGlmZiArIHlkaWZmICogeWRpZmYpO1xuXG4gICAgICAgIGlmICh0b3VjaERpc3RhbmNlID4gdGFwTW92ZW1lbnRUaHJlc2hvbGQpIHtcbiAgICAgICAgICBjb3VsZEJlVGFwID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBub1RhcCA9IGZ1bmN0aW9uIG5vVGFwKCkge1xuICAgICAgY291bGRCZVRhcCA9IGZhbHNlO1xuICAgIH07IC8vIFRPRE86IExpc3RlbiB0byB0aGUgb3JpZ2luYWwgdGFyZ2V0LiBodHRwOi8veW91dHUuYmUvRHVqZnBYT0tVcDg/dD0xM204c1xuXG5cbiAgICB0aGlzLm9uKCd0b3VjaGxlYXZlJywgbm9UYXApO1xuICAgIHRoaXMub24oJ3RvdWNoY2FuY2VsJywgbm9UYXApOyAvLyBXaGVuIHRoZSB0b3VjaCBlbmRzLCBtZWFzdXJlIGhvdyBsb25nIGl0IHRvb2sgYW5kIHRyaWdnZXIgdGhlIGFwcHJvcHJpYXRlXG4gICAgLy8gZXZlbnRcblxuICAgIHRoaXMub24oJ3RvdWNoZW5kJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBmaXJzdFRvdWNoID0gbnVsbDsgLy8gUHJvY2VlZCBvbmx5IGlmIHRoZSB0b3VjaG1vdmUvbGVhdmUvY2FuY2VsIGV2ZW50IGRpZG4ndCBoYXBwZW5cblxuICAgICAgaWYgKGNvdWxkQmVUYXAgPT09IHRydWUpIHtcbiAgICAgICAgLy8gTWVhc3VyZSBob3cgbG9uZyB0aGUgdG91Y2ggbGFzdGVkXG4gICAgICAgIHZhciB0b3VjaFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRvdWNoU3RhcnQ7IC8vIE1ha2Ugc3VyZSB0aGUgdG91Y2ggd2FzIGxlc3MgdGhhbiB0aGUgdGhyZXNob2xkIHRvIGJlIGNvbnNpZGVyZWQgYSB0YXBcblxuICAgICAgICBpZiAodG91Y2hUaW1lIDwgdG91Y2hUaW1lVGhyZXNob2xkKSB7XG4gICAgICAgICAgLy8gRG9uJ3QgbGV0IGJyb3dzZXIgdHVybiB0aGlzIGludG8gYSBjbGlja1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogVHJpZ2dlcmVkIHdoZW4gYSBgQ29tcG9uZW50YCBpcyB0YXBwZWQuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZXZlbnQgQ29tcG9uZW50I3RhcFxuICAgICAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAgICAgKi9cblxuICAgICAgICAgIHRoaXMudHJpZ2dlcigndGFwJyk7IC8vIEl0IG1heSBiZSBnb29kIHRvIGNvcHkgdGhlIHRvdWNoZW5kIGV2ZW50IG9iamVjdCBhbmQgY2hhbmdlIHRoZVxuICAgICAgICAgIC8vIHR5cGUgdG8gdGFwLCBpZiB0aGUgb3RoZXIgZXZlbnQgcHJvcGVydGllcyBhcmVuJ3QgZXhhY3QgYWZ0ZXJcbiAgICAgICAgICAvLyBFdmVudHMuZml4RXZlbnQgcnVucyAoZS5nLiBldmVudC50YXJnZXQpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiByZXBvcnRzIHVzZXIgYWN0aXZpdHkgd2hlbmV2ZXIgdG91Y2ggZXZlbnRzIGhhcHBlbi4gVGhpcyBjYW4gZ2V0XG4gICAqIHR1cm5lZCBvZmYgYnkgYW55IHN1Yi1jb21wb25lbnRzIHRoYXQgd2FudHMgdG91Y2ggZXZlbnRzIHRvIGFjdCBhbm90aGVyIHdheS5cbiAgICpcbiAgICogUmVwb3J0IHVzZXIgdG91Y2ggYWN0aXZpdHkgd2hlbiB0b3VjaCBldmVudHMgb2NjdXIuIFVzZXIgYWN0aXZpdHkgZ2V0cyB1c2VkIHRvXG4gICAqIGRldGVybWluZSB3aGVuIGNvbnRyb2xzIHNob3VsZCBzaG93L2hpZGUuIEl0IGlzIHNpbXBsZSB3aGVuIGl0IGNvbWVzIHRvIG1vdXNlXG4gICAqIGV2ZW50cywgYmVjYXVzZSBhbnkgbW91c2UgZXZlbnQgc2hvdWxkIHNob3cgdGhlIGNvbnRyb2xzLiBTbyB3ZSBjYXB0dXJlIG1vdXNlXG4gICAqIGV2ZW50cyB0aGF0IGJ1YmJsZSB1cCB0byB0aGUgcGxheWVyIGFuZCByZXBvcnQgYWN0aXZpdHkgd2hlbiB0aGF0IGhhcHBlbnMuXG4gICAqIFdpdGggdG91Y2ggZXZlbnRzIGl0IGlzbid0IGFzIGVhc3kgYXMgYHRvdWNoc3RhcnRgIGFuZCBgdG91Y2hlbmRgIHRvZ2dsZSBwbGF5ZXJcbiAgICogY29udHJvbHMuIFNvIHRvdWNoIGV2ZW50cyBjYW4ndCBoZWxwIHVzIGF0IHRoZSBwbGF5ZXIgbGV2ZWwgZWl0aGVyLlxuICAgKlxuICAgKiBVc2VyIGFjdGl2aXR5IGdldHMgY2hlY2tlZCBhc3luY2hyb25vdXNseS4gU28gd2hhdCBjb3VsZCBoYXBwZW4gaXMgYSB0YXAgZXZlbnRcbiAgICogb24gdGhlIHZpZGVvIHR1cm5zIHRoZSBjb250cm9scyBvZmYuIFRoZW4gdGhlIGB0b3VjaGVuZGAgZXZlbnQgYnViYmxlcyB1cCB0b1xuICAgKiB0aGUgcGxheWVyLiBXaGljaCwgaWYgaXQgcmVwb3J0ZWQgdXNlciBhY3Rpdml0eSwgd291bGQgdHVybiB0aGUgY29udHJvbHMgcmlnaHRcbiAgICogYmFjayBvbi4gV2UgYWxzbyBkb24ndCB3YW50IHRvIGNvbXBsZXRlbHkgYmxvY2sgdG91Y2ggZXZlbnRzIGZyb20gYnViYmxpbmcgdXAuXG4gICAqIEZ1cnRoZXJtb3JlIGEgYHRvdWNobW92ZWAgZXZlbnQgYW5kIGFueXRoaW5nIG90aGVyIHRoYW4gYSB0YXAsIHNob3VsZCBub3QgdHVyblxuICAgKiBjb250cm9scyBiYWNrIG9uLlxuICAgKlxuICAgKiBAbGlzdGVucyBDb21wb25lbnQjdG91Y2hzdGFydFxuICAgKiBAbGlzdGVucyBDb21wb25lbnQjdG91Y2htb3ZlXG4gICAqIEBsaXN0ZW5zIENvbXBvbmVudCN0b3VjaGVuZFxuICAgKiBAbGlzdGVucyBDb21wb25lbnQjdG91Y2hjYW5jZWxcbiAgICovXG4gIDtcblxuICBfcHJvdG8uZW5hYmxlVG91Y2hBY3Rpdml0eSA9IGZ1bmN0aW9uIGVuYWJsZVRvdWNoQWN0aXZpdHkoKSB7XG4gICAgLy8gRG9uJ3QgY29udGludWUgaWYgdGhlIHJvb3QgcGxheWVyIGRvZXNuJ3Qgc3VwcG9ydCByZXBvcnRpbmcgdXNlciBhY3Rpdml0eVxuICAgIGlmICghdGhpcy5wbGF5ZXIoKSB8fCAhdGhpcy5wbGF5ZXIoKS5yZXBvcnRVc2VyQWN0aXZpdHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIGxpc3RlbmVyIGZvciByZXBvcnRpbmcgdGhhdCB0aGUgdXNlciBpcyBhY3RpdmVcblxuXG4gICAgdmFyIHJlcG9ydCA9IGJpbmQodGhpcy5wbGF5ZXIoKSwgdGhpcy5wbGF5ZXIoKS5yZXBvcnRVc2VyQWN0aXZpdHkpO1xuICAgIHZhciB0b3VjaEhvbGRpbmc7XG4gICAgdGhpcy5vbigndG91Y2hzdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlcG9ydCgpOyAvLyBGb3IgYXMgbG9uZyBhcyB0aGUgdGhleSBhcmUgdG91Y2hpbmcgdGhlIGRldmljZSBvciBoYXZlIHRoZWlyIG1vdXNlIGRvd24sXG4gICAgICAvLyB3ZSBjb25zaWRlciB0aGVtIGFjdGl2ZSBldmVuIGlmIHRoZXkncmUgbm90IG1vdmluZyB0aGVpciBmaW5nZXIgb3IgbW91c2UuXG4gICAgICAvLyBTbyB3ZSB3YW50IHRvIGNvbnRpbnVlIHRvIHVwZGF0ZSB0aGF0IHRoZXkgYXJlIGFjdGl2ZVxuXG4gICAgICB0aGlzLmNsZWFySW50ZXJ2YWwodG91Y2hIb2xkaW5nKTsgLy8gcmVwb3J0IGF0IHRoZSBzYW1lIGludGVydmFsIGFzIGFjdGl2aXR5Q2hlY2tcblxuICAgICAgdG91Y2hIb2xkaW5nID0gdGhpcy5zZXRJbnRlcnZhbChyZXBvcnQsIDI1MCk7XG4gICAgfSk7XG5cbiAgICB2YXIgdG91Y2hFbmQgPSBmdW5jdGlvbiB0b3VjaEVuZChldmVudCkge1xuICAgICAgcmVwb3J0KCk7IC8vIHN0b3AgdGhlIGludGVydmFsIHRoYXQgbWFpbnRhaW5zIGFjdGl2aXR5IGlmIHRoZSB0b3VjaCBpcyBob2xkaW5nXG5cbiAgICAgIHRoaXMuY2xlYXJJbnRlcnZhbCh0b3VjaEhvbGRpbmcpO1xuICAgIH07XG5cbiAgICB0aGlzLm9uKCd0b3VjaG1vdmUnLCByZXBvcnQpO1xuICAgIHRoaXMub24oJ3RvdWNoZW5kJywgdG91Y2hFbmQpO1xuICAgIHRoaXMub24oJ3RvdWNoY2FuY2VsJywgdG91Y2hFbmQpO1xuICB9XG4gIC8qKlxuICAgKiBBIGNhbGxiYWNrIHRoYXQgaGFzIG5vIHBhcmFtZXRlcnMgYW5kIGlzIGJvdW5kIGludG8gYENvbXBvbmVudGBzIGNvbnRleHQuXG4gICAqXG4gICAqIEBjYWxsYmFjayBDb21wb25lbnR+R2VuZXJpY0NhbGxiYWNrXG4gICAqIEB0aGlzIENvbXBvbmVudFxuICAgKi9cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcnVucyBhZnRlciBhbiBgeGAgbWlsbGlzZWNvbmQgdGltZW91dC4gVGhpcyBmdW5jdGlvbiBpcyBhXG4gICAqIHdyYXBwZXIgYXJvdW5kIGB3aW5kb3cuc2V0VGltZW91dGAuIFRoZXJlIGFyZSBhIGZldyByZWFzb25zIHRvIHVzZSB0aGlzIG9uZVxuICAgKiBpbnN0ZWFkIHRob3VnaDpcbiAgICogMS4gSXQgZ2V0cyBjbGVhcmVkIHZpYSAge0BsaW5rIENvbXBvbmVudCNjbGVhclRpbWVvdXR9IHdoZW5cbiAgICogICAge0BsaW5rIENvbXBvbmVudCNkaXNwb3NlfSBnZXRzIGNhbGxlZC5cbiAgICogMi4gVGhlIGZ1bmN0aW9uIGNhbGxiYWNrIHdpbGwgZ2V0cyB0dXJuZWQgaW50byBhIHtAbGluayBDb21wb25lbnR+R2VuZXJpY0NhbGxiYWNrfVxuICAgKlxuICAgKiA+IE5vdGU6IFlvdSBjYW4ndCB1c2UgYHdpbmRvdy5jbGVhclRpbWVvdXRgIG9uIHRoZSBpZCByZXR1cm5lZCBieSB0aGlzIGZ1bmN0aW9uLiBUaGlzXG4gICAqICAgICAgICAgd2lsbCBjYXVzZSBpdHMgZGlzcG9zZSBsaXN0ZW5lciBub3QgdG8gZ2V0IGNsZWFuZWQgdXAhIFBsZWFzZSB1c2VcbiAgICogICAgICAgICB7QGxpbmsgQ29tcG9uZW50I2NsZWFyVGltZW91dH0gb3Ige0BsaW5rIENvbXBvbmVudCNkaXNwb3NlfSBpbnN0ZWFkLlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudH5HZW5lcmljQ2FsbGJhY2t9IGZuXG4gICAqICAgICAgICBUaGUgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIHJ1biBhZnRlciBgdGltZW91dGAuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lb3V0XG4gICAqICAgICAgICBUaW1lb3V0IGluIG1pbGxpc2Vjb25kcyB0byBkZWxheSBiZWZvcmUgZXhlY3V0aW5nIHRoZSBzcGVjaWZpZWQgZnVuY3Rpb24uXG4gICAqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICBSZXR1cm5zIGEgdGltZW91dCBJRCB0aGF0IGdldHMgdXNlZCB0byBpZGVudGlmeSB0aGUgdGltZW91dC4gSXQgY2FuIGFsc29cbiAgICogICAgICAgICBnZXQgdXNlZCBpbiB7QGxpbmsgQ29tcG9uZW50I2NsZWFyVGltZW91dH0gdG8gY2xlYXIgdGhlIHRpbWVvdXQgdGhhdFxuICAgKiAgICAgICAgIHdhcyBzZXQuXG4gICAqXG4gICAqIEBsaXN0ZW5zIENvbXBvbmVudCNkaXNwb3NlXG4gICAqIEBzZWUgW1NpbWlsYXIgdG9de0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaW5kb3dUaW1lcnMvc2V0VGltZW91dH1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uc2V0VGltZW91dCA9IGZ1bmN0aW9uIHNldFRpbWVvdXQoZm4sIHRpbWVvdXQpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIC8vIGRlY2xhcmUgYXMgdmFyaWFibGVzIHNvIHRoZXkgYXJlIHByb3Blcmx5IGF2YWlsYWJsZSBpbiB0aW1lb3V0IGZ1bmN0aW9uXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgdmFyIHRpbWVvdXRJZCwgZGlzcG9zZUZuO1xuICAgIGZuID0gYmluZCh0aGlzLCBmbik7XG4gICAgdGltZW91dElkID0gd2luZG93JDEuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpczIub2ZmKCdkaXNwb3NlJywgZGlzcG9zZUZuKTtcblxuICAgICAgZm4oKTtcbiAgICB9LCB0aW1lb3V0KTtcblxuICAgIGRpc3Bvc2VGbiA9IGZ1bmN0aW9uIGRpc3Bvc2VGbigpIHtcbiAgICAgIHJldHVybiBfdGhpczIuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgfTtcblxuICAgIGRpc3Bvc2VGbi5ndWlkID0gXCJ2anMtdGltZW91dC1cIiArIHRpbWVvdXRJZDtcbiAgICB0aGlzLm9uKCdkaXNwb3NlJywgZGlzcG9zZUZuKTtcbiAgICByZXR1cm4gdGltZW91dElkO1xuICB9XG4gIC8qKlxuICAgKiBDbGVhcnMgYSB0aW1lb3V0IHRoYXQgZ2V0cyBjcmVhdGVkIHZpYSBgd2luZG93LnNldFRpbWVvdXRgIG9yXG4gICAqIHtAbGluayBDb21wb25lbnQjc2V0VGltZW91dH0uIElmIHlvdSBzZXQgYSB0aW1lb3V0IHZpYSB7QGxpbmsgQ29tcG9uZW50I3NldFRpbWVvdXR9XG4gICAqIHVzZSB0aGlzIGZ1bmN0aW9uIGluc3RlYWQgb2YgYHdpbmRvdy5jbGVhclRpbW91dGAuIElmIHlvdSBkb24ndCB5b3VyIGRpc3Bvc2VcbiAgICogbGlzdGVuZXIgd2lsbCBub3QgZ2V0IGNsZWFuZWQgdXAgdW50aWwge0BsaW5rIENvbXBvbmVudCNkaXNwb3NlfSFcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVvdXRJZFxuICAgKiAgICAgICAgVGhlIGlkIG9mIHRoZSB0aW1lb3V0IHRvIGNsZWFyLiBUaGUgcmV0dXJuIHZhbHVlIG9mXG4gICAqICAgICAgICB7QGxpbmsgQ29tcG9uZW50I3NldFRpbWVvdXR9IG9yIGB3aW5kb3cuc2V0VGltZW91dGAuXG4gICAqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICBSZXR1cm5zIHRoZSB0aW1lb3V0IGlkIHRoYXQgd2FzIGNsZWFyZWQuXG4gICAqXG4gICAqIEBzZWUgW1NpbWlsYXIgdG9de0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaW5kb3dUaW1lcnMvY2xlYXJUaW1lb3V0fVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jbGVhclRpbWVvdXQgPSBmdW5jdGlvbiBjbGVhclRpbWVvdXQodGltZW91dElkKSB7XG4gICAgd2luZG93JDEuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG5cbiAgICB2YXIgZGlzcG9zZUZuID0gZnVuY3Rpb24gZGlzcG9zZUZuKCkge307XG5cbiAgICBkaXNwb3NlRm4uZ3VpZCA9IFwidmpzLXRpbWVvdXQtXCIgKyB0aW1lb3V0SWQ7XG4gICAgdGhpcy5vZmYoJ2Rpc3Bvc2UnLCBkaXNwb3NlRm4pO1xuICAgIHJldHVybiB0aW1lb3V0SWQ7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGdldHMgcnVuIGV2ZXJ5IGB4YCBtaWxsaXNlY29uZHMuIFRoaXMgZnVuY3Rpb24gaXMgYSB3cmFwcGVyXG4gICAqIGFyb3VuZCBgd2luZG93LnNldEludGVydmFsYC4gVGhlcmUgYXJlIGEgZmV3IHJlYXNvbnMgdG8gdXNlIHRoaXMgb25lIGluc3RlYWQgdGhvdWdoLlxuICAgKiAxLiBJdCBnZXRzIGNsZWFyZWQgdmlhICB7QGxpbmsgQ29tcG9uZW50I2NsZWFySW50ZXJ2YWx9IHdoZW5cbiAgICogICAge0BsaW5rIENvbXBvbmVudCNkaXNwb3NlfSBnZXRzIGNhbGxlZC5cbiAgICogMi4gVGhlIGZ1bmN0aW9uIGNhbGxiYWNrIHdpbGwgYmUgYSB7QGxpbmsgQ29tcG9uZW50fkdlbmVyaWNDYWxsYmFja31cbiAgICpcbiAgICogQHBhcmFtIHtDb21wb25lbnR+R2VuZXJpY0NhbGxiYWNrfSBmblxuICAgKiAgICAgICAgVGhlIGZ1bmN0aW9uIHRvIHJ1biBldmVyeSBgeGAgc2Vjb25kcy5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGludGVydmFsXG4gICAqICAgICAgICBFeGVjdXRlIHRoZSBzcGVjaWZpZWQgZnVuY3Rpb24gZXZlcnkgYHhgIG1pbGxpc2Vjb25kcy5cbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIFJldHVybnMgYW4gaWQgdGhhdCBjYW4gYmUgdXNlZCB0byBpZGVudGlmeSB0aGUgaW50ZXJ2YWwuIEl0IGNhbiBhbHNvIGJlIGJlIHVzZWQgaW5cbiAgICogICAgICAgICB7QGxpbmsgQ29tcG9uZW50I2NsZWFySW50ZXJ2YWx9IHRvIGNsZWFyIHRoZSBpbnRlcnZhbC5cbiAgICpcbiAgICogQGxpc3RlbnMgQ29tcG9uZW50I2Rpc3Bvc2VcbiAgICogQHNlZSBbU2ltaWxhciB0b117QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvd1RpbWVycy9zZXRJbnRlcnZhbH1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbiBzZXRJbnRlcnZhbChmbiwgaW50ZXJ2YWwpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIGZuID0gYmluZCh0aGlzLCBmbik7XG4gICAgdmFyIGludGVydmFsSWQgPSB3aW5kb3ckMS5zZXRJbnRlcnZhbChmbiwgaW50ZXJ2YWwpO1xuXG4gICAgdmFyIGRpc3Bvc2VGbiA9IGZ1bmN0aW9uIGRpc3Bvc2VGbigpIHtcbiAgICAgIHJldHVybiBfdGhpczMuY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTtcbiAgICB9O1xuXG4gICAgZGlzcG9zZUZuLmd1aWQgPSBcInZqcy1pbnRlcnZhbC1cIiArIGludGVydmFsSWQ7XG4gICAgdGhpcy5vbignZGlzcG9zZScsIGRpc3Bvc2VGbik7XG4gICAgcmV0dXJuIGludGVydmFsSWQ7XG4gIH1cbiAgLyoqXG4gICAqIENsZWFycyBhbiBpbnRlcnZhbCB0aGF0IGdldHMgY3JlYXRlZCB2aWEgYHdpbmRvdy5zZXRJbnRlcnZhbGAgb3JcbiAgICoge0BsaW5rIENvbXBvbmVudCNzZXRJbnRlcnZhbH0uIElmIHlvdSBzZXQgYW4gaW50ZXZhbCB2aWEge0BsaW5rIENvbXBvbmVudCNzZXRJbnRlcnZhbH1cbiAgICogdXNlIHRoaXMgZnVuY3Rpb24gaW5zdGVhZCBvZiBgd2luZG93LmNsZWFySW50ZXJ2YWxgLiBJZiB5b3UgZG9uJ3QgeW91ciBkaXNwb3NlXG4gICAqIGxpc3RlbmVyIHdpbGwgbm90IGdldCBjbGVhbmVkIHVwIHVudGlsIHtAbGluayBDb21wb25lbnQjZGlzcG9zZX0hXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbnRlcnZhbElkXG4gICAqICAgICAgICBUaGUgaWQgb2YgdGhlIGludGVydmFsIHRvIGNsZWFyLiBUaGUgcmV0dXJuIHZhbHVlIG9mXG4gICAqICAgICAgICB7QGxpbmsgQ29tcG9uZW50I3NldEludGVydmFsfSBvciBgd2luZG93LnNldEludGVydmFsYC5cbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIFJldHVybnMgdGhlIGludGVydmFsIGlkIHRoYXQgd2FzIGNsZWFyZWQuXG4gICAqXG4gICAqIEBzZWUgW1NpbWlsYXIgdG9de0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaW5kb3dUaW1lcnMvY2xlYXJJbnRlcnZhbH1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCkge1xuICAgIHdpbmRvdyQxLmNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7XG5cbiAgICB2YXIgZGlzcG9zZUZuID0gZnVuY3Rpb24gZGlzcG9zZUZuKCkge307XG5cbiAgICBkaXNwb3NlRm4uZ3VpZCA9IFwidmpzLWludGVydmFsLVwiICsgaW50ZXJ2YWxJZDtcbiAgICB0aGlzLm9mZignZGlzcG9zZScsIGRpc3Bvc2VGbik7XG4gICAgcmV0dXJuIGludGVydmFsSWQ7XG4gIH1cbiAgLyoqXG4gICAqIFF1ZXVlcyB1cCBhIGNhbGxiYWNrIHRvIGJlIHBhc3NlZCB0byByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgKHJBRiksIGJ1dFxuICAgKiB3aXRoIGEgZmV3IGV4dHJhIGJvbnVzZXM6XG4gICAqXG4gICAqIC0gU3VwcG9ydHMgYnJvd3NlcnMgdGhhdCBkbyBub3Qgc3VwcG9ydCByQUYgYnkgZmFsbGluZyBiYWNrIHRvXG4gICAqICAge0BsaW5rIENvbXBvbmVudCNzZXRUaW1lb3V0fS5cbiAgICpcbiAgICogLSBUaGUgY2FsbGJhY2sgaXMgdHVybmVkIGludG8gYSB7QGxpbmsgQ29tcG9uZW50fkdlbmVyaWNDYWxsYmFja30gKGkuZS5cbiAgICogICBib3VuZCB0byB0aGUgY29tcG9uZW50KS5cbiAgICpcbiAgICogLSBBdXRvbWF0aWMgY2FuY2VsbGF0aW9uIG9mIHRoZSByQUYgY2FsbGJhY2sgaXMgaGFuZGxlZCBpZiB0aGUgY29tcG9uZW50XG4gICAqICAgaXMgZGlzcG9zZWQgYmVmb3JlIGl0IGlzIGNhbGxlZC5cbiAgICpcbiAgICogQHBhcmFtICB7Q29tcG9uZW50fkdlbmVyaWNDYWxsYmFja30gZm5cbiAgICogICAgICAgICBBIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBib3VuZCB0byB0aGlzIGNvbXBvbmVudCBhbmQgZXhlY3V0ZWQganVzdFxuICAgKiAgICAgICAgIGJlZm9yZSB0aGUgYnJvd3NlcidzIG5leHQgcmVwYWludC5cbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIFJldHVybnMgYW4gckFGIElEIHRoYXQgZ2V0cyB1c2VkIHRvIGlkZW50aWZ5IHRoZSB0aW1lb3V0LiBJdCBjYW5cbiAgICogICAgICAgICBhbHNvIGJlIHVzZWQgaW4ge0BsaW5rIENvbXBvbmVudCNjYW5jZWxBbmltYXRpb25GcmFtZX0gdG8gY2FuY2VsXG4gICAqICAgICAgICAgdGhlIGFuaW1hdGlvbiBmcmFtZSBjYWxsYmFjay5cbiAgICpcbiAgICogQGxpc3RlbnMgQ29tcG9uZW50I2Rpc3Bvc2VcbiAgICogQHNlZSBbU2ltaWxhciB0b117QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL3dpbmRvdy9yZXF1ZXN0QW5pbWF0aW9uRnJhbWV9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uIHJlcXVlc3RBbmltYXRpb25GcmFtZShmbikge1xuICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgLy8gZGVjbGFyZSBhcyB2YXJpYWJsZXMgc28gdGhleSBhcmUgcHJvcGVybHkgYXZhaWxhYmxlIGluIHJBRiBmdW5jdGlvblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIHZhciBpZCwgZGlzcG9zZUZuO1xuXG4gICAgaWYgKHRoaXMuc3VwcG9ydHNSYWZfKSB7XG4gICAgICBmbiA9IGJpbmQodGhpcywgZm4pO1xuICAgICAgaWQgPSB3aW5kb3ckMS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczQub2ZmKCdkaXNwb3NlJywgZGlzcG9zZUZuKTtcblxuICAgICAgICBmbigpO1xuICAgICAgfSk7XG5cbiAgICAgIGRpc3Bvc2VGbiA9IGZ1bmN0aW9uIGRpc3Bvc2VGbigpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzNC5jYW5jZWxBbmltYXRpb25GcmFtZShpZCk7XG4gICAgICB9O1xuXG4gICAgICBkaXNwb3NlRm4uZ3VpZCA9IFwidmpzLXJhZi1cIiArIGlkO1xuICAgICAgdGhpcy5vbignZGlzcG9zZScsIGRpc3Bvc2VGbik7XG4gICAgICByZXR1cm4gaWQ7XG4gICAgfSAvLyBGYWxsIGJhY2sgdG8gdXNpbmcgYSB0aW1lci5cblxuXG4gICAgcmV0dXJuIHRoaXMuc2V0VGltZW91dChmbiwgMTAwMCAvIDYwKTtcbiAgfVxuICAvKipcbiAgICogQ2FuY2VscyBhIHF1ZXVlZCBjYWxsYmFjayBwYXNzZWQgdG8ge0BsaW5rIENvbXBvbmVudCNyZXF1ZXN0QW5pbWF0aW9uRnJhbWV9XG4gICAqIChyQUYpLlxuICAgKlxuICAgKiBJZiB5b3UgcXVldWUgYW4gckFGIGNhbGxiYWNrIHZpYSB7QGxpbmsgQ29tcG9uZW50I3JlcXVlc3RBbmltYXRpb25GcmFtZX0sXG4gICAqIHVzZSB0aGlzIGZ1bmN0aW9uIGluc3RlYWQgb2YgYHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZWAuIElmIHlvdSBkb24ndCxcbiAgICogeW91ciBkaXNwb3NlIGxpc3RlbmVyIHdpbGwgbm90IGdldCBjbGVhbmVkIHVwIHVudGlsIHtAbGluayBDb21wb25lbnQjZGlzcG9zZX0hXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZFxuICAgKiAgICAgICAgVGhlIHJBRiBJRCB0byBjbGVhci4gVGhlIHJldHVybiB2YWx1ZSBvZiB7QGxpbmsgQ29tcG9uZW50I3JlcXVlc3RBbmltYXRpb25GcmFtZX0uXG4gICAqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICBSZXR1cm5zIHRoZSByQUYgSUQgdGhhdCB3YXMgY2xlYXJlZC5cbiAgICpcbiAgICogQHNlZSBbU2ltaWxhciB0b117QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL3dpbmRvdy9jYW5jZWxBbmltYXRpb25GcmFtZX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8uY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiBjYW5jZWxBbmltYXRpb25GcmFtZShpZCkge1xuICAgIGlmICh0aGlzLnN1cHBvcnRzUmFmXykge1xuICAgICAgd2luZG93JDEuY2FuY2VsQW5pbWF0aW9uRnJhbWUoaWQpO1xuXG4gICAgICB2YXIgZGlzcG9zZUZuID0gZnVuY3Rpb24gZGlzcG9zZUZuKCkge307XG5cbiAgICAgIGRpc3Bvc2VGbi5ndWlkID0gXCJ2anMtcmFmLVwiICsgaWQ7XG4gICAgICB0aGlzLm9mZignZGlzcG9zZScsIGRpc3Bvc2VGbik7XG4gICAgICByZXR1cm4gaWQ7XG4gICAgfSAvLyBGYWxsIGJhY2sgdG8gdXNpbmcgYSB0aW1lci5cblxuXG4gICAgcmV0dXJuIHRoaXMuY2xlYXJUaW1lb3V0KGlkKTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBgQ29tcG9uZW50YCB3aXRoIGB2aWRlb2pzYCBnaXZlbiB0aGUgbmFtZSBhbmQgdGhlIGNvbXBvbmVudC5cbiAgICpcbiAgICogPiBOT1RFOiB7QGxpbmsgVGVjaH1zIHNob3VsZCBub3QgYmUgcmVnaXN0ZXJlZCBhcyBhIGBDb21wb25lbnRgLiB7QGxpbmsgVGVjaH1zXG4gICAqICAgICAgICAgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgdXNpbmcge0BsaW5rIFRlY2gucmVnaXN0ZXJUZWNofSBvclxuICAgKiAgICAgICAgIHtAbGluayB2aWRlb2pzOnZpZGVvanMucmVnaXN0ZXJUZWNofS5cbiAgICpcbiAgICogPiBOT1RFOiBUaGlzIGZ1bmN0aW9uIGNhbiBhbHNvIGJlIHNlZW4gb24gdmlkZW9qcyBhc1xuICAgKiAgICAgICAgIHtAbGluayB2aWRlb2pzOnZpZGVvanMucmVnaXN0ZXJDb21wb25lbnR9LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiAgICAgICAgVGhlIG5hbWUgb2YgdGhlIGBDb21wb25lbnRgIHRvIHJlZ2lzdGVyLlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudH0gQ29tcG9uZW50VG9SZWdpc3RlclxuICAgKiAgICAgICAgVGhlIGBDb21wb25lbnRgIGNsYXNzIHRvIHJlZ2lzdGVyLlxuICAgKlxuICAgKiBAcmV0dXJuIHtDb21wb25lbnR9XG4gICAqICAgICAgICAgVGhlIGBDb21wb25lbnRgIHRoYXQgd2FzIHJlZ2lzdGVyZWQuXG4gICAqL1xuICA7XG5cbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50ID0gZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnQobmFtZSwgQ29tcG9uZW50VG9SZWdpc3Rlcikge1xuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgIW5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIklsbGVnYWwgY29tcG9uZW50IG5hbWUsIFxcXCJcIiArIG5hbWUgKyBcIlxcXCI7IG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLlwiKTtcbiAgICB9XG5cbiAgICB2YXIgVGVjaCA9IENvbXBvbmVudC5nZXRDb21wb25lbnQoJ1RlY2gnKTsgLy8gV2UgbmVlZCB0byBtYWtlIHN1cmUgdGhpcyBjaGVjayBpcyBvbmx5IGRvbmUgaWYgVGVjaCBoYXMgYmVlbiByZWdpc3RlcmVkLlxuXG4gICAgdmFyIGlzVGVjaCA9IFRlY2ggJiYgVGVjaC5pc1RlY2goQ29tcG9uZW50VG9SZWdpc3Rlcik7XG4gICAgdmFyIGlzQ29tcCA9IENvbXBvbmVudCA9PT0gQ29tcG9uZW50VG9SZWdpc3RlciB8fCBDb21wb25lbnQucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoQ29tcG9uZW50VG9SZWdpc3Rlci5wcm90b3R5cGUpO1xuXG4gICAgaWYgKGlzVGVjaCB8fCAhaXNDb21wKSB7XG4gICAgICB2YXIgcmVhc29uO1xuXG4gICAgICBpZiAoaXNUZWNoKSB7XG4gICAgICAgIHJlYXNvbiA9ICd0ZWNocyBtdXN0IGJlIHJlZ2lzdGVyZWQgdXNpbmcgVGVjaC5yZWdpc3RlclRlY2goKSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWFzb24gPSAnbXVzdCBiZSBhIENvbXBvbmVudCBzdWJjbGFzcyc7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcIklsbGVnYWwgY29tcG9uZW50LCBcXFwiXCIgKyBuYW1lICsgXCJcXFwiOyBcIiArIHJlYXNvbiArIFwiLlwiKTtcbiAgICB9XG5cbiAgICBuYW1lID0gdG9UaXRsZUNhc2UobmFtZSk7XG5cbiAgICBpZiAoIUNvbXBvbmVudC5jb21wb25lbnRzXykge1xuICAgICAgQ29tcG9uZW50LmNvbXBvbmVudHNfID0ge307XG4gICAgfVxuXG4gICAgdmFyIFBsYXllciA9IENvbXBvbmVudC5nZXRDb21wb25lbnQoJ1BsYXllcicpO1xuXG4gICAgaWYgKG5hbWUgPT09ICdQbGF5ZXInICYmIFBsYXllciAmJiBQbGF5ZXIucGxheWVycykge1xuICAgICAgdmFyIHBsYXllcnMgPSBQbGF5ZXIucGxheWVycztcbiAgICAgIHZhciBwbGF5ZXJOYW1lcyA9IE9iamVjdC5rZXlzKHBsYXllcnMpOyAvLyBJZiB3ZSBoYXZlIHBsYXllcnMgdGhhdCB3ZXJlIGRpc3Bvc2VkLCB0aGVuIHRoZWlyIG5hbWUgd2lsbCBzdGlsbCBiZVxuICAgICAgLy8gaW4gUGxheWVycy5wbGF5ZXJzLiBTbywgd2UgbXVzdCBsb29wIHRocm91Z2ggYW5kIHZlcmlmeSB0aGF0IHRoZSB2YWx1ZVxuICAgICAgLy8gZm9yIGVhY2ggaXRlbSBpcyBub3QgbnVsbC4gVGhpcyBhbGxvd3MgcmVnaXN0cmF0aW9uIG9mIHRoZSBQbGF5ZXIgY29tcG9uZW50XG4gICAgICAvLyBhZnRlciBhbGwgcGxheWVycyBoYXZlIGJlZW4gZGlzcG9zZWQgb3IgYmVmb3JlIGFueSB3ZXJlIGNyZWF0ZWQuXG5cbiAgICAgIGlmIChwbGF5ZXJzICYmIHBsYXllck5hbWVzLmxlbmd0aCA+IDAgJiYgcGxheWVyTmFtZXMubWFwKGZ1bmN0aW9uIChwbmFtZSkge1xuICAgICAgICByZXR1cm4gcGxheWVyc1twbmFtZV07XG4gICAgICB9KS5ldmVyeShCb29sZWFuKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbiBub3QgcmVnaXN0ZXIgUGxheWVyIGNvbXBvbmVudCBhZnRlciBwbGF5ZXIgaGFzIGJlZW4gY3JlYXRlZC4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBDb21wb25lbnQuY29tcG9uZW50c19bbmFtZV0gPSBDb21wb25lbnRUb1JlZ2lzdGVyO1xuICAgIHJldHVybiBDb21wb25lbnRUb1JlZ2lzdGVyO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBgQ29tcG9uZW50YCBiYXNlZCBvbiB0aGUgbmFtZSBpdCB3YXMgcmVnaXN0ZXJlZCB3aXRoLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiAgICAgICAgVGhlIE5hbWUgb2YgdGhlIGNvbXBvbmVudCB0byBnZXQuXG4gICAqXG4gICAqIEByZXR1cm4ge0NvbXBvbmVudH1cbiAgICogICAgICAgICBUaGUgYENvbXBvbmVudGAgdGhhdCBnb3QgcmVnaXN0ZXJlZCB1bmRlciB0aGUgZ2l2ZW4gbmFtZS5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgSW4gYHZpZGVvanNgIDYgdGhpcyB3aWxsIG5vdCByZXR1cm4gYENvbXBvbmVudGBzIHRoYXQgd2VyZSBub3RcbiAgICogICAgICAgICAgICAgcmVnaXN0ZXJlZCB1c2luZyB7QGxpbmsgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50fS4gQ3VycmVudGx5IHdlXG4gICAqICAgICAgICAgICAgIGNoZWNrIHRoZSBnbG9iYWwgYHZpZGVvanNgIG9iamVjdCBmb3IgYSBgQ29tcG9uZW50YCBuYW1lIGFuZFxuICAgKiAgICAgICAgICAgICByZXR1cm4gdGhhdCBpZiBpdCBleGlzdHMuXG4gICAqL1xuICA7XG5cbiAgQ29tcG9uZW50LmdldENvbXBvbmVudCA9IGZ1bmN0aW9uIGdldENvbXBvbmVudChuYW1lKSB7XG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbmFtZSA9IHRvVGl0bGVDYXNlKG5hbWUpO1xuXG4gICAgaWYgKENvbXBvbmVudC5jb21wb25lbnRzXyAmJiBDb21wb25lbnQuY29tcG9uZW50c19bbmFtZV0pIHtcbiAgICAgIHJldHVybiBDb21wb25lbnQuY29tcG9uZW50c19bbmFtZV07XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBDb21wb25lbnQ7XG59KCk7XG4vKipcbiAqIFdoZXRoZXIgb3Igbm90IHRoaXMgY29tcG9uZW50IHN1cHBvcnRzIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgLlxuICpcbiAqIFRoaXMgaXMgZXhwb3NlZCBwcmltYXJpbHkgZm9yIHRlc3RpbmcgcHVycG9zZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEB0eXBlIHtCb29sZWFufVxuICovXG5cblxuQ29tcG9uZW50LnByb3RvdHlwZS5zdXBwb3J0c1JhZl8gPSB0eXBlb2Ygd2luZG93JDEucmVxdWVzdEFuaW1hdGlvbkZyYW1lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiB3aW5kb3ckMS5jYW5jZWxBbmltYXRpb25GcmFtZSA9PT0gJ2Z1bmN0aW9uJztcbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnQ29tcG9uZW50JywgQ29tcG9uZW50KTtcblxuLyoqXG4gKiBAZmlsZSBicm93c2VyLmpzXG4gKiBAbW9kdWxlIGJyb3dzZXJcbiAqL1xudmFyIFVTRVJfQUdFTlQgPSB3aW5kb3ckMS5uYXZpZ2F0b3IgJiYgd2luZG93JDEubmF2aWdhdG9yLnVzZXJBZ2VudCB8fCAnJztcbnZhciB3ZWJraXRWZXJzaW9uTWFwID0gL0FwcGxlV2ViS2l0XFwvKFtcXGQuXSspL2kuZXhlYyhVU0VSX0FHRU5UKTtcbnZhciBhcHBsZVdlYmtpdFZlcnNpb24gPSB3ZWJraXRWZXJzaW9uTWFwID8gcGFyc2VGbG9hdCh3ZWJraXRWZXJzaW9uTWFwLnBvcCgpKSA6IG51bGw7XG4vKipcbiAqIFdoZXRoZXIgb3Igbm90IHRoaXMgZGV2aWNlIGlzIGFuIGlQYWQuXG4gKlxuICogQHN0YXRpY1xuICogQGNvbnN0XG4gKiBAdHlwZSB7Qm9vbGVhbn1cbiAqL1xuXG52YXIgSVNfSVBBRCA9IC9pUGFkL2kudGVzdChVU0VSX0FHRU5UKTtcbi8qKlxuICogV2hldGhlciBvciBub3QgdGhpcyBkZXZpY2UgaXMgYW4gaVBob25lLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBjb25zdFxuICogQHR5cGUge0Jvb2xlYW59XG4gKi9cbi8vIFRoZSBGYWNlYm9vayBhcHAncyBVSVdlYlZpZXcgaWRlbnRpZmllcyBhcyBib3RoIGFuIGlQaG9uZSBhbmQgaVBhZCwgc29cbi8vIHRvIGlkZW50aWZ5IGlQaG9uZXMsIHdlIG5lZWQgdG8gZXhjbHVkZSBpUGFkcy5cbi8vIGh0dHA6Ly9hcnRzeS5naXRodWIuaW8vYmxvZy8yMDEyLzEwLzE4L3RoZS1wZXJpbHMtb2YtaW9zLXVzZXItYWdlbnQtc25pZmZpbmcvXG5cbnZhciBJU19JUEhPTkUgPSAvaVBob25lL2kudGVzdChVU0VSX0FHRU5UKSAmJiAhSVNfSVBBRDtcbi8qKlxuICogV2hldGhlciBvciBub3QgdGhpcyBkZXZpY2UgaXMgYW4gaVBvZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtCb29sZWFufVxuICovXG5cbnZhciBJU19JUE9EID0gL2lQb2QvaS50ZXN0KFVTRVJfQUdFTlQpO1xuLyoqXG4gKiBXaGV0aGVyIG9yIG5vdCB0aGlzIGlzIGFuIGlPUyBkZXZpY2UuXG4gKlxuICogQHN0YXRpY1xuICogQGNvbnN0XG4gKiBAdHlwZSB7Qm9vbGVhbn1cbiAqL1xuXG52YXIgSVNfSU9TID0gSVNfSVBIT05FIHx8IElTX0lQQUQgfHwgSVNfSVBPRDtcbi8qKlxuICogVGhlIGRldGVjdGVkIGlPUyB2ZXJzaW9uIC0gb3IgYG51bGxgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ3xudWxsfVxuICovXG5cbnZhciBJT1NfVkVSU0lPTiA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG1hdGNoID0gVVNFUl9BR0VOVC5tYXRjaCgvT1MgKFxcZCspXy9pKTtcblxuICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICByZXR1cm4gbWF0Y2hbMV07XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn0oKTtcbi8qKlxuICogV2hldGhlciBvciBub3QgdGhpcyBpcyBhbiBBbmRyb2lkIGRldmljZS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtCb29sZWFufVxuICovXG5cbnZhciBJU19BTkRST0lEID0gL0FuZHJvaWQvaS50ZXN0KFVTRVJfQUdFTlQpO1xuLyoqXG4gKiBUaGUgZGV0ZWN0ZWQgQW5kcm9pZCB2ZXJzaW9uIC0gb3IgYG51bGxgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcnxzdHJpbmd8bnVsbH1cbiAqL1xuXG52YXIgQU5EUk9JRF9WRVJTSU9OID0gZnVuY3Rpb24gKCkge1xuICAvLyBUaGlzIG1hdGNoZXMgQW5kcm9pZCBNYWpvci5NaW5vci5QYXRjaCB2ZXJzaW9uc1xuICAvLyBBTkRST0lEX1ZFUlNJT04gaXMgTWFqb3IuTWlub3IgYXMgYSBOdW1iZXIsIGlmIE1pbm9yIGlzbid0IGF2YWlsYWJsZSwgdGhlbiBvbmx5IE1ham9yIGlzIHJldHVybmVkXG4gIHZhciBtYXRjaCA9IFVTRVJfQUdFTlQubWF0Y2goL0FuZHJvaWQgKFxcZCspKD86XFwuKFxcZCspKT8oPzpcXC4oXFxkKykpKi9pKTtcblxuICBpZiAoIW1hdGNoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgbWFqb3IgPSBtYXRjaFsxXSAmJiBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcbiAgdmFyIG1pbm9yID0gbWF0Y2hbMl0gJiYgcGFyc2VGbG9hdChtYXRjaFsyXSk7XG5cbiAgaWYgKG1ham9yICYmIG1pbm9yKSB7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQobWF0Y2hbMV0gKyAnLicgKyBtYXRjaFsyXSk7XG4gIH0gZWxzZSBpZiAobWFqb3IpIHtcbiAgICByZXR1cm4gbWFqb3I7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn0oKTtcbi8qKlxuICogV2hldGhlciBvciBub3QgdGhpcyBpcyBhIG5hdGl2ZSBBbmRyb2lkIGJyb3dzZXIuXG4gKlxuICogQHN0YXRpY1xuICogQGNvbnN0XG4gKiBAdHlwZSB7Qm9vbGVhbn1cbiAqL1xuXG52YXIgSVNfTkFUSVZFX0FORFJPSUQgPSBJU19BTkRST0lEICYmIEFORFJPSURfVkVSU0lPTiA8IDUgJiYgYXBwbGVXZWJraXRWZXJzaW9uIDwgNTM3O1xuLyoqXG4gKiBXaGV0aGVyIG9yIG5vdCB0aGlzIGlzIE1vemlsbGEgRmlyZWZveC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtCb29sZWFufVxuICovXG5cbnZhciBJU19GSVJFRk9YID0gL0ZpcmVmb3gvaS50ZXN0KFVTRVJfQUdFTlQpO1xuLyoqXG4gKiBXaGV0aGVyIG9yIG5vdCB0aGlzIGlzIE1pY3Jvc29mdCBFZGdlLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBjb25zdFxuICogQHR5cGUge0Jvb2xlYW59XG4gKi9cblxudmFyIElTX0VER0UgPSAvRWRnZS9pLnRlc3QoVVNFUl9BR0VOVCk7XG4vKipcbiAqIFdoZXRoZXIgb3Igbm90IHRoaXMgaXMgR29vZ2xlIENocm9tZS5cbiAqXG4gKiBUaGlzIHdpbGwgYWxzbyBiZSBgdHJ1ZWAgZm9yIENocm9tZSBvbiBpT1MsIHdoaWNoIHdpbGwgaGF2ZSBkaWZmZXJlbnQgc3VwcG9ydFxuICogYXMgaXQgaXMgYWN0dWFsbHkgU2FmYXJpIHVuZGVyIHRoZSBob29kLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBjb25zdFxuICogQHR5cGUge0Jvb2xlYW59XG4gKi9cblxudmFyIElTX0NIUk9NRSA9ICFJU19FREdFICYmICgvQ2hyb21lL2kudGVzdChVU0VSX0FHRU5UKSB8fCAvQ3JpT1MvaS50ZXN0KFVTRVJfQUdFTlQpKTtcbi8qKlxuICogVGhlIGRldGVjdGVkIEdvb2dsZSBDaHJvbWUgdmVyc2lvbiAtIG9yIGBudWxsYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ8bnVsbH1cbiAqL1xuXG52YXIgQ0hST01FX1ZFUlNJT04gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBtYXRjaCA9IFVTRVJfQUdFTlQubWF0Y2goLyhDaHJvbWV8Q3JpT1MpXFwvKFxcZCspLyk7XG5cbiAgaWYgKG1hdGNoICYmIG1hdGNoWzJdKSB7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQobWF0Y2hbMl0pO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59KCk7XG4vKipcbiAqIFRoZSBkZXRlY3RlZCBJbnRlcm5ldCBFeHBsb3JlciB2ZXJzaW9uIC0gb3IgYG51bGxgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcnxudWxsfVxuICovXG5cbnZhciBJRV9WRVJTSU9OID0gZnVuY3Rpb24gKCkge1xuICB2YXIgcmVzdWx0ID0gL01TSUVcXHMoXFxkKylcXC5cXGQvLmV4ZWMoVVNFUl9BR0VOVCk7XG4gIHZhciB2ZXJzaW9uID0gcmVzdWx0ICYmIHBhcnNlRmxvYXQocmVzdWx0WzFdKTtcblxuICBpZiAoIXZlcnNpb24gJiYgL1RyaWRlbnRcXC83LjAvaS50ZXN0KFVTRVJfQUdFTlQpICYmIC9ydjoxMS4wLy50ZXN0KFVTRVJfQUdFTlQpKSB7XG4gICAgLy8gSUUgMTEgaGFzIGEgZGlmZmVyZW50IHVzZXIgYWdlbnQgc3RyaW5nIHRoYW4gb3RoZXIgSUUgdmVyc2lvbnNcbiAgICB2ZXJzaW9uID0gMTEuMDtcbiAgfVxuXG4gIHJldHVybiB2ZXJzaW9uO1xufSgpO1xuLyoqXG4gKiBXaGV0aGVyIG9yIG5vdCB0aGlzIGlzIGRlc2t0b3AgU2FmYXJpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBjb25zdFxuICogQHR5cGUge0Jvb2xlYW59XG4gKi9cblxudmFyIElTX1NBRkFSSSA9IC9TYWZhcmkvaS50ZXN0KFVTRVJfQUdFTlQpICYmICFJU19DSFJPTUUgJiYgIUlTX0FORFJPSUQgJiYgIUlTX0VER0U7XG4vKipcbiAqIFdoZXRoZXIgb3Igbm90IHRoaXMgaXMgYW55IGZsYXZvciBvZiBTYWZhcmkgLSBpbmNsdWRpbmcgaU9TLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBjb25zdFxuICogQHR5cGUge0Jvb2xlYW59XG4gKi9cblxudmFyIElTX0FOWV9TQUZBUkkgPSAoSVNfU0FGQVJJIHx8IElTX0lPUykgJiYgIUlTX0NIUk9NRTtcbi8qKlxuICogV2hldGhlciBvciBub3QgdGhpcyBkZXZpY2UgaXMgdG91Y2gtZW5hYmxlZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtCb29sZWFufVxuICovXG5cbnZhciBUT1VDSF9FTkFCTEVEID0gaXNSZWFsKCkgJiYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyQxIHx8IHdpbmRvdyQxLm5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyB8fCB3aW5kb3ckMS5Eb2N1bWVudFRvdWNoICYmIHdpbmRvdyQxLmRvY3VtZW50IGluc3RhbmNlb2Ygd2luZG93JDEuRG9jdW1lbnRUb3VjaCk7XG5cbnZhciBicm93c2VyID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBJU19JUEFEOiBJU19JUEFELFxuICBJU19JUEhPTkU6IElTX0lQSE9ORSxcbiAgSVNfSVBPRDogSVNfSVBPRCxcbiAgSVNfSU9TOiBJU19JT1MsXG4gIElPU19WRVJTSU9OOiBJT1NfVkVSU0lPTixcbiAgSVNfQU5EUk9JRDogSVNfQU5EUk9JRCxcbiAgQU5EUk9JRF9WRVJTSU9OOiBBTkRST0lEX1ZFUlNJT04sXG4gIElTX05BVElWRV9BTkRST0lEOiBJU19OQVRJVkVfQU5EUk9JRCxcbiAgSVNfRklSRUZPWDogSVNfRklSRUZPWCxcbiAgSVNfRURHRTogSVNfRURHRSxcbiAgSVNfQ0hST01FOiBJU19DSFJPTUUsXG4gIENIUk9NRV9WRVJTSU9OOiBDSFJPTUVfVkVSU0lPTixcbiAgSUVfVkVSU0lPTjogSUVfVkVSU0lPTixcbiAgSVNfU0FGQVJJOiBJU19TQUZBUkksXG4gIElTX0FOWV9TQUZBUkk6IElTX0FOWV9TQUZBUkksXG4gIFRPVUNIX0VOQUJMRUQ6IFRPVUNIX0VOQUJMRURcbn0pO1xuXG4vKipcbiAqIEBmaWxlIHRpbWUtcmFuZ2VzLmpzXG4gKiBAbW9kdWxlIHRpbWUtcmFuZ2VzXG4gKi9cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB0aW1lIGZvciB0aGUgc3BlY2lmaWVkIGluZGV4IGF0IHRoZSBzdGFydCBvciBlbmRcbiAqIG9mIGEgVGltZVJhbmdlIG9iamVjdC5cbiAqXG4gKiBAdHlwZWRlZiAgICB7RnVuY3Rpb259IFRpbWVSYW5nZUluZGV4XG4gKlxuICogQHBhcmFtICAgICAge251bWJlcn0gW2luZGV4PTBdXG4gKiAgICAgICAgICAgICBUaGUgcmFuZ2UgbnVtYmVyIHRvIHJldHVybiB0aGUgdGltZSBmb3IuXG4gKlxuICogQHJldHVybiAgICAge251bWJlcn1cbiAqICAgICAgICAgICAgIFRoZSB0aW1lIG9mZnNldCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LlxuICpcbiAqIEBkZXByZWNhdGVkIFRoZSBpbmRleCBhcmd1bWVudCBtdXN0IGJlIHByb3ZpZGVkLlxuICogICAgICAgICAgICAgSW4gdGhlIGZ1dHVyZSwgbGVhdmluZyBpdCBvdXQgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAqL1xuXG4vKipcbiAqIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHJhbmdlcyBvZiB0aW1lLlxuICpcbiAqIEB0eXBlZGVmICB7T2JqZWN0fSBUaW1lUmFuZ2VcbiAqXG4gKiBAcHJvcGVydHkge251bWJlcn0gbGVuZ3RoXG4gKiAgICAgICAgICAgVGhlIG51bWJlciBvZiB0aW1lIHJhbmdlcyByZXByZXNlbnRlZCBieSB0aGlzIG9iamVjdC5cbiAqXG4gKiBAcHJvcGVydHkge21vZHVsZTp0aW1lLXJhbmdlc35UaW1lUmFuZ2VJbmRleH0gc3RhcnRcbiAqICAgICAgICAgICBSZXR1cm5zIHRoZSB0aW1lIG9mZnNldCBhdCB3aGljaCBhIHNwZWNpZmllZCB0aW1lIHJhbmdlIGJlZ2lucy5cbiAqXG4gKiBAcHJvcGVydHkge21vZHVsZTp0aW1lLXJhbmdlc35UaW1lUmFuZ2VJbmRleH0gZW5kXG4gKiAgICAgICAgICAgUmV0dXJucyB0aGUgdGltZSBvZmZzZXQgYXQgd2hpY2ggYSBzcGVjaWZpZWQgdGltZSByYW5nZSBlbmRzLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1RpbWVSYW5nZXNcbiAqL1xuXG4vKipcbiAqIENoZWNrIGlmIGFueSBvZiB0aGUgdGltZSByYW5nZXMgYXJlIG92ZXIgdGhlIG1heGltdW0gaW5kZXguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSAgIHtzdHJpbmd9IGZuTmFtZVxuICogICAgICAgICAgVGhlIGZ1bmN0aW9uIG5hbWUgdG8gdXNlIGZvciBsb2dnaW5nXG4gKlxuICogQHBhcmFtICAge251bWJlcn0gaW5kZXhcbiAqICAgICAgICAgIFRoZSBpbmRleCB0byBjaGVja1xuICpcbiAqIEBwYXJhbSAgIHtudW1iZXJ9IG1heEluZGV4XG4gKiAgICAgICAgICBUaGUgbWF4aW11bSBwb3NzaWJsZSBpbmRleFxuICpcbiAqIEB0aHJvd3MgIHtFcnJvcn0gaWYgdGhlIHRpbWVSYW5nZXMgcHJvdmlkZWQgYXJlIG92ZXIgdGhlIG1heEluZGV4XG4gKi9cbmZ1bmN0aW9uIHJhbmdlQ2hlY2soZm5OYW1lLCBpbmRleCwgbWF4SW5kZXgpIHtcbiAgaWYgKHR5cGVvZiBpbmRleCAhPT0gJ251bWJlcicgfHwgaW5kZXggPCAwIHx8IGluZGV4ID4gbWF4SW5kZXgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZXhlY3V0ZSAnXCIgKyBmbk5hbWUgKyBcIicgb24gJ1RpbWVSYW5nZXMnOiBUaGUgaW5kZXggcHJvdmlkZWQgKFwiICsgaW5kZXggKyBcIikgaXMgbm9uLW51bWVyaWMgb3Igb3V0IG9mIGJvdW5kcyAoMC1cIiArIG1heEluZGV4ICsgXCIpLlwiKTtcbiAgfVxufVxuLyoqXG4gKiBHZXQgdGhlIHRpbWUgZm9yIHRoZSBzcGVjaWZpZWQgaW5kZXggYXQgdGhlIHN0YXJ0IG9yIGVuZFxuICogb2YgYSBUaW1lUmFuZ2Ugb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0gICAgICB7c3RyaW5nfSBmbk5hbWVcbiAqICAgICAgICAgICAgIFRoZSBmdW5jdGlvbiBuYW1lIHRvIHVzZSBmb3IgbG9nZ2luZ1xuICpcbiAqIEBwYXJhbSAgICAgIHtzdHJpbmd9IHZhbHVlSW5kZXhcbiAqICAgICAgICAgICAgIFRoZSBwcm9wZXJ0eSB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIGdldCB0aGUgdGltZS4gc2hvdWxkIGJlXG4gKiAgICAgICAgICAgICAnc3RhcnQnIG9yICdlbmQnXG4gKlxuICogQHBhcmFtICAgICAge0FycmF5fSByYW5nZXNcbiAqICAgICAgICAgICAgIEFuIGFycmF5IG9mIHRpbWUgcmFuZ2VzXG4gKlxuICogQHBhcmFtICAgICAge0FycmF5fSBbcmFuZ2VJbmRleD0wXVxuICogICAgICAgICAgICAgVGhlIGluZGV4IHRvIHN0YXJ0IHRoZSBzZWFyY2ggYXRcbiAqXG4gKiBAcmV0dXJuICAgICB7bnVtYmVyfVxuICogICAgICAgICAgICAgVGhlIHRpbWUgdGhhdCBvZmZzZXQgYXQgdGhlIHNwZWNpZmllZCBpbmRleC5cbiAqXG4gKiBAZGVwcmVjYXRlZCByYW5nZUluZGV4IG11c3QgYmUgc2V0IHRvIGEgdmFsdWUsIGluIHRoZSBmdXR1cmUgdGhpcyB3aWxsIHRocm93IGFuIGVycm9yLlxuICogQHRocm93cyAgICAge0Vycm9yfSBpZiByYW5nZUluZGV4IGlzIG1vcmUgdGhhbiB0aGUgbGVuZ3RoIG9mIHJhbmdlc1xuICovXG5cblxuZnVuY3Rpb24gZ2V0UmFuZ2UoZm5OYW1lLCB2YWx1ZUluZGV4LCByYW5nZXMsIHJhbmdlSW5kZXgpIHtcbiAgcmFuZ2VDaGVjayhmbk5hbWUsIHJhbmdlSW5kZXgsIHJhbmdlcy5sZW5ndGggLSAxKTtcbiAgcmV0dXJuIHJhbmdlc1tyYW5nZUluZGV4XVt2YWx1ZUluZGV4XTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgdGltZSByYW5nZSBvYmplY3QgZ2l2ZW4gcmFuZ2VzIG9mIHRpbWUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSAgIHtBcnJheX0gW3Jhbmdlc11cbiAqICAgICAgICAgIEFuIGFycmF5IG9mIHRpbWUgcmFuZ2VzLlxuICovXG5cblxuZnVuY3Rpb24gY3JlYXRlVGltZVJhbmdlc09iaihyYW5nZXMpIHtcbiAgaWYgKHJhbmdlcyA9PT0gdW5kZWZpbmVkIHx8IHJhbmdlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGVuZ3RoOiAwLFxuICAgICAgc3RhcnQ6IGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgVGltZVJhbmdlcyBvYmplY3QgaXMgZW1wdHknKTtcbiAgICAgIH0sXG4gICAgICBlbmQ6IGZ1bmN0aW9uIGVuZCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIFRpbWVSYW5nZXMgb2JqZWN0IGlzIGVtcHR5Jyk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbGVuZ3RoOiByYW5nZXMubGVuZ3RoLFxuICAgIHN0YXJ0OiBnZXRSYW5nZS5iaW5kKG51bGwsICdzdGFydCcsIDAsIHJhbmdlcyksXG4gICAgZW5kOiBnZXRSYW5nZS5iaW5kKG51bGwsICdlbmQnLCAxLCByYW5nZXMpXG4gIH07XG59XG4vKipcbiAqIENyZWF0ZSBhIGBUaW1lUmFuZ2VgIG9iamVjdCB3aGljaCBtaW1pY3MgYW5cbiAqIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvVGltZVJhbmdlc3xIVE1MNSBUaW1lUmFuZ2VzIGluc3RhbmNlfS5cbiAqXG4gKiBAcGFyYW0ge251bWJlcnxBcnJheVtdfSBzdGFydFxuICogICAgICAgIFRoZSBzdGFydCBvZiBhIHNpbmdsZSByYW5nZSAoYSBudW1iZXIpIG9yIGFuIGFycmF5IG9mIHJhbmdlcyAoYW5cbiAqICAgICAgICBhcnJheSBvZiBhcnJheXMgb2YgdHdvIG51bWJlcnMgZWFjaCkuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZFxuICogICAgICAgIFRoZSBlbmQgb2YgYSBzaW5nbGUgcmFuZ2UuIENhbm5vdCBiZSB1c2VkIHdpdGggdGhlIGFycmF5IGZvcm0gb2ZcbiAqICAgICAgICB0aGUgYHN0YXJ0YCBhcmd1bWVudC5cbiAqL1xuXG5cbmZ1bmN0aW9uIGNyZWF0ZVRpbWVSYW5nZXMoc3RhcnQsIGVuZCkge1xuICBpZiAoQXJyYXkuaXNBcnJheShzdGFydCkpIHtcbiAgICByZXR1cm4gY3JlYXRlVGltZVJhbmdlc09iaihzdGFydCk7XG4gIH0gZWxzZSBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBjcmVhdGVUaW1lUmFuZ2VzT2JqKCk7XG4gIH1cblxuICByZXR1cm4gY3JlYXRlVGltZVJhbmdlc09iaihbW3N0YXJ0LCBlbmRdXSk7XG59XG5cbi8qKlxuICogQGZpbGUgYnVmZmVyLmpzXG4gKiBAbW9kdWxlIGJ1ZmZlclxuICovXG4vKipcbiAqIENvbXB1dGUgdGhlIHBlcmNlbnRhZ2Ugb2YgdGhlIG1lZGlhIHRoYXQgaGFzIGJlZW4gYnVmZmVyZWQuXG4gKlxuICogQHBhcmFtIHtUaW1lUmFuZ2V9IGJ1ZmZlcmVkXG4gKiAgICAgICAgVGhlIGN1cnJlbnQgYFRpbWVSYW5nZWAgb2JqZWN0IHJlcHJlc2VudGluZyBidWZmZXJlZCB0aW1lIHJhbmdlc1xuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvblxuICogICAgICAgIFRvdGFsIGR1cmF0aW9uIG9mIHRoZSBtZWRpYVxuICpcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqICAgICAgICAgUGVyY2VudCBidWZmZXJlZCBvZiB0aGUgdG90YWwgZHVyYXRpb24gaW4gZGVjaW1hbCBmb3JtLlxuICovXG5cbmZ1bmN0aW9uIGJ1ZmZlcmVkUGVyY2VudChidWZmZXJlZCwgZHVyYXRpb24pIHtcbiAgdmFyIGJ1ZmZlcmVkRHVyYXRpb24gPSAwO1xuICB2YXIgc3RhcnQ7XG4gIHZhciBlbmQ7XG5cbiAgaWYgKCFkdXJhdGlvbikge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgaWYgKCFidWZmZXJlZCB8fCAhYnVmZmVyZWQubGVuZ3RoKSB7XG4gICAgYnVmZmVyZWQgPSBjcmVhdGVUaW1lUmFuZ2VzKDAsIDApO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWZmZXJlZC5sZW5ndGg7IGkrKykge1xuICAgIHN0YXJ0ID0gYnVmZmVyZWQuc3RhcnQoaSk7XG4gICAgZW5kID0gYnVmZmVyZWQuZW5kKGkpOyAvLyBidWZmZXJlZCBlbmQgY2FuIGJlIGJpZ2dlciB0aGFuIGR1cmF0aW9uIGJ5IGEgdmVyeSBzbWFsbCBmcmFjdGlvblxuXG4gICAgaWYgKGVuZCA+IGR1cmF0aW9uKSB7XG4gICAgICBlbmQgPSBkdXJhdGlvbjtcbiAgICB9XG5cbiAgICBidWZmZXJlZER1cmF0aW9uICs9IGVuZCAtIHN0YXJ0O1xuICB9XG5cbiAgcmV0dXJuIGJ1ZmZlcmVkRHVyYXRpb24gLyBkdXJhdGlvbjtcbn1cblxuLyoqXG4gKiBAZmlsZSBmdWxsc2NyZWVuLWFwaS5qc1xuICogQG1vZHVsZSBmdWxsc2NyZWVuLWFwaVxuICogQHByaXZhdGVcbiAqL1xuLyoqXG4gKiBTdG9yZSB0aGUgYnJvd3Nlci1zcGVjaWZpYyBtZXRob2RzIGZvciB0aGUgZnVsbHNjcmVlbiBBUEkuXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqIEBzZWUgW1NwZWNpZmljYXRpb25de0BsaW5rIGh0dHBzOi8vZnVsbHNjcmVlbi5zcGVjLndoYXR3Zy5vcmd9XG4gKiBAc2VlIFtNYXAgQXBwcm9hY2ggRnJvbSBTY3JlZW5mdWxsLmpzXXtAbGluayBodHRwczovL2dpdGh1Yi5jb20vc2luZHJlc29yaHVzL3NjcmVlbmZ1bGwuanN9XG4gKi9cblxudmFyIEZ1bGxzY3JlZW5BcGkgPSB7fTsgLy8gYnJvd3NlciBBUEkgbWV0aG9kc1xuXG52YXIgYXBpTWFwID0gW1sncmVxdWVzdEZ1bGxzY3JlZW4nLCAnZXhpdEZ1bGxzY3JlZW4nLCAnZnVsbHNjcmVlbkVsZW1lbnQnLCAnZnVsbHNjcmVlbkVuYWJsZWQnLCAnZnVsbHNjcmVlbmNoYW5nZScsICdmdWxsc2NyZWVuZXJyb3InLCAnZnVsbHNjcmVlbiddLCAvLyBXZWJLaXRcblsnd2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4nLCAnd2Via2l0RXhpdEZ1bGxzY3JlZW4nLCAnd2Via2l0RnVsbHNjcmVlbkVsZW1lbnQnLCAnd2Via2l0RnVsbHNjcmVlbkVuYWJsZWQnLCAnd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsICd3ZWJraXRmdWxsc2NyZWVuZXJyb3InLCAnLXdlYmtpdC1mdWxsLXNjcmVlbiddLCAvLyBNb3ppbGxhXG5bJ21velJlcXVlc3RGdWxsU2NyZWVuJywgJ21vekNhbmNlbEZ1bGxTY3JlZW4nLCAnbW96RnVsbFNjcmVlbkVsZW1lbnQnLCAnbW96RnVsbFNjcmVlbkVuYWJsZWQnLCAnbW96ZnVsbHNjcmVlbmNoYW5nZScsICdtb3pmdWxsc2NyZWVuZXJyb3InLCAnLW1vei1mdWxsLXNjcmVlbiddLCAvLyBNaWNyb3NvZnRcblsnbXNSZXF1ZXN0RnVsbHNjcmVlbicsICdtc0V4aXRGdWxsc2NyZWVuJywgJ21zRnVsbHNjcmVlbkVsZW1lbnQnLCAnbXNGdWxsc2NyZWVuRW5hYmxlZCcsICdNU0Z1bGxzY3JlZW5DaGFuZ2UnLCAnTVNGdWxsc2NyZWVuRXJyb3InLCAnLW1zLWZ1bGxzY3JlZW4nXV07XG52YXIgc3BlY0FwaSA9IGFwaU1hcFswXTtcbnZhciBicm93c2VyQXBpO1xudmFyIHByZWZpeGVkQVBJID0gZmFsc2U7IC8vIGRldGVybWluZSB0aGUgc3VwcG9ydGVkIHNldCBvZiBmdW5jdGlvbnNcblxuZm9yICh2YXIgaSA9IDA7IGkgPCBhcGlNYXAubGVuZ3RoOyBpKyspIHtcbiAgLy8gY2hlY2sgZm9yIGV4aXRGdWxsc2NyZWVuIGZ1bmN0aW9uXG4gIGlmIChhcGlNYXBbaV1bMV0gaW4gZG9jdW1lbnQpIHtcbiAgICBicm93c2VyQXBpID0gYXBpTWFwW2ldO1xuICAgIGJyZWFrO1xuICB9XG59IC8vIG1hcCB0aGUgYnJvd3NlciBBUEkgbmFtZXMgdG8gdGhlIHNwZWMgQVBJIG5hbWVzXG5cblxuaWYgKGJyb3dzZXJBcGkpIHtcbiAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGJyb3dzZXJBcGkubGVuZ3RoOyBfaSsrKSB7XG4gICAgRnVsbHNjcmVlbkFwaVtzcGVjQXBpW19pXV0gPSBicm93c2VyQXBpW19pXTtcbiAgfVxuXG4gIHByZWZpeGVkQVBJID0gYnJvd3NlckFwaVswXSA9PT0gc3BlY0FwaVswXTtcbn1cblxuLyoqXG4gKiBAZmlsZSBtZWRpYS1lcnJvci5qc1xuICovXG4vKipcbiAqIEEgQ3VzdG9tIGBNZWRpYUVycm9yYCBjbGFzcyB3aGljaCBtaW1pY3MgdGhlIHN0YW5kYXJkIEhUTUw1IGBNZWRpYUVycm9yYCBjbGFzcy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcnxzdHJpbmd8T2JqZWN0fE1lZGlhRXJyb3J9IHZhbHVlXG4gKiAgICAgICAgVGhpcyBjYW4gYmUgb2YgbXVsdGlwbGUgdHlwZXM6XG4gKiAgICAgICAgLSBudW1iZXI6IHNob3VsZCBiZSBhIHN0YW5kYXJkIGVycm9yIGNvZGVcbiAqICAgICAgICAtIHN0cmluZzogYW4gZXJyb3IgbWVzc2FnZSAodGhlIGNvZGUgd2lsbCBiZSAwKVxuICogICAgICAgIC0gT2JqZWN0OiBhcmJpdHJhcnkgcHJvcGVydGllc1xuICogICAgICAgIC0gYE1lZGlhRXJyb3JgIChuYXRpdmUpOiB1c2VkIHRvIHBvcHVsYXRlIGEgdmlkZW8uanMgYE1lZGlhRXJyb3JgIG9iamVjdFxuICogICAgICAgIC0gYE1lZGlhRXJyb3JgICh2aWRlby5qcyk6IHdpbGwgcmV0dXJuIGl0c2VsZiBpZiBpdCdzIGFscmVhZHkgYVxuICogICAgICAgICAgdmlkZW8uanMgYE1lZGlhRXJyb3JgIG9iamVjdC5cbiAqXG4gKiBAc2VlIFtNZWRpYUVycm9yIFNwZWNde0BsaW5rIGh0dHBzOi8vZGV2LnczLm9yZy9odG1sNS9zcGVjLWF1dGhvci12aWV3L3ZpZGVvLmh0bWwjbWVkaWFlcnJvcn1cbiAqIEBzZWUgW0VuY3J5cHRlZCBNZWRpYUVycm9yIFNwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDEzL1dELWVuY3J5cHRlZC1tZWRpYS0yMDEzMDUxMC8jZXJyb3ItY29kZXN9XG4gKlxuICogQGNsYXNzIE1lZGlhRXJyb3JcbiAqL1xuXG5mdW5jdGlvbiBNZWRpYUVycm9yKHZhbHVlKSB7XG4gIC8vIEFsbG93IHJlZHVuZGFudCBjYWxscyB0byB0aGlzIGNvbnN0cnVjdG9yIHRvIGF2b2lkIGhhdmluZyBgaW5zdGFuY2VvZmBcbiAgLy8gY2hlY2tzIHBlcHBlcmVkIGFyb3VuZCB0aGUgY29kZS5cbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgTWVkaWFFcnJvcikge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgdGhpcy5jb2RlID0gdmFsdWU7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIC8vIGRlZmF1bHQgY29kZSBpcyB6ZXJvLCBzbyB0aGlzIGlzIGEgY3VzdG9tIGVycm9yXG4gICAgdGhpcy5tZXNzYWdlID0gdmFsdWU7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgLy8gV2UgYXNzaWduIHRoZSBgY29kZWAgcHJvcGVydHkgbWFudWFsbHkgYmVjYXVzZSBuYXRpdmUgYE1lZGlhRXJyb3JgIG9iamVjdHNcbiAgICAvLyBkbyBub3QgZXhwb3NlIGl0IGFzIGFuIG93bi9lbnVtZXJhYmxlIHByb3BlcnR5IG9mIHRoZSBvYmplY3QuXG4gICAgaWYgKHR5cGVvZiB2YWx1ZS5jb2RlID09PSAnbnVtYmVyJykge1xuICAgICAgdGhpcy5jb2RlID0gdmFsdWUuY29kZTtcbiAgICB9XG5cbiAgICBhc3NpZ24odGhpcywgdmFsdWUpO1xuICB9XG5cbiAgaWYgKCF0aGlzLm1lc3NhZ2UpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBNZWRpYUVycm9yLmRlZmF1bHRNZXNzYWdlc1t0aGlzLmNvZGVdIHx8ICcnO1xuICB9XG59XG4vKipcbiAqIFRoZSBlcnJvciBjb2RlIHRoYXQgcmVmZXJzIHR3byBvbmUgb2YgdGhlIGRlZmluZWQgYE1lZGlhRXJyb3JgIHR5cGVzXG4gKlxuICogQHR5cGUge051bWJlcn1cbiAqL1xuXG5cbk1lZGlhRXJyb3IucHJvdG90eXBlLmNvZGUgPSAwO1xuLyoqXG4gKiBBbiBvcHRpb25hbCBtZXNzYWdlIHRoYXQgdG8gc2hvdyB3aXRoIHRoZSBlcnJvci4gTWVzc2FnZSBpcyBub3QgcGFydCBvZiB0aGUgSFRNTDVcbiAqIHZpZGVvIHNwZWMgYnV0IGFsbG93cyBmb3IgbW9yZSBpbmZvcm1hdGl2ZSBjdXN0b20gZXJyb3JzLlxuICpcbiAqIEB0eXBlIHtTdHJpbmd9XG4gKi9cblxuTWVkaWFFcnJvci5wcm90b3R5cGUubWVzc2FnZSA9ICcnO1xuLyoqXG4gKiBBbiBvcHRpb25hbCBzdGF0dXMgY29kZSB0aGF0IGNhbiBiZSBzZXQgYnkgcGx1Z2lucyB0byBhbGxvdyBldmVuIG1vcmUgZGV0YWlsIGFib3V0XG4gKiB0aGUgZXJyb3IuIEZvciBleGFtcGxlIGEgcGx1Z2luIG1pZ2h0IHByb3ZpZGUgYSBzcGVjaWZpYyBIVFRQIHN0YXR1cyBjb2RlIGFuZCBhblxuICogZXJyb3IgbWVzc2FnZSBmb3IgdGhhdCBjb2RlLiBUaGVuIHdoZW4gdGhlIHBsdWdpbiBnZXRzIHRoYXQgZXJyb3IgdGhpcyBjbGFzcyB3aWxsXG4gKiBrbm93IGhvdyB0byBkaXNwbGF5IGFuIGVycm9yIG1lc3NhZ2UgZm9yIGl0LiBUaGlzIGFsbG93cyBhIGN1c3RvbSBtZXNzYWdlIHRvIHNob3dcbiAqIHVwIG9uIHRoZSBgUGxheWVyYCBlcnJvciBvdmVybGF5LlxuICpcbiAqIEB0eXBlIHtBcnJheX1cbiAqL1xuXG5NZWRpYUVycm9yLnByb3RvdHlwZS5zdGF0dXMgPSBudWxsO1xuLyoqXG4gKiBFcnJvcnMgaW5kZXhlZCBieSB0aGUgVzNDIHN0YW5kYXJkLiBUaGUgb3JkZXIgKipDQU5OT1QgQ0hBTkdFKiohIFNlZSB0aGVcbiAqIHNwZWNpZmljYXRpb24gbGlzdGVkIHVuZGVyIHtAbGluayBNZWRpYUVycm9yfSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqXG4gKiBAZW51bSB7YXJyYXl9XG4gKiBAcmVhZG9ubHlcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSAwIC0gTUVESUFfRVJSX0NVU1RPTVxuICogQHByb3BlcnR5IHtzdHJpbmd9IDEgLSBNRURJQV9FUlJfQUJPUlRFRFxuICogQHByb3BlcnR5IHtzdHJpbmd9IDIgLSBNRURJQV9FUlJfTkVUV09SS1xuICogQHByb3BlcnR5IHtzdHJpbmd9IDMgLSBNRURJQV9FUlJfREVDT0RFXG4gKiBAcHJvcGVydHkge3N0cmluZ30gNCAtIE1FRElBX0VSUl9TUkNfTk9UX1NVUFBPUlRFRFxuICogQHByb3BlcnR5IHtzdHJpbmd9IDUgLSBNRURJQV9FUlJfRU5DUllQVEVEXG4gKi9cblxuTWVkaWFFcnJvci5lcnJvclR5cGVzID0gWydNRURJQV9FUlJfQ1VTVE9NJywgJ01FRElBX0VSUl9BQk9SVEVEJywgJ01FRElBX0VSUl9ORVRXT1JLJywgJ01FRElBX0VSUl9ERUNPREUnLCAnTUVESUFfRVJSX1NSQ19OT1RfU1VQUE9SVEVEJywgJ01FRElBX0VSUl9FTkNSWVBURUQnXTtcbi8qKlxuICogVGhlIGRlZmF1bHQgYE1lZGlhRXJyb3JgIG1lc3NhZ2VzIGJhc2VkIG9uIHRoZSB7QGxpbmsgTWVkaWFFcnJvci5lcnJvclR5cGVzfS5cbiAqXG4gKiBAdHlwZSB7QXJyYXl9XG4gKiBAY29uc3RhbnRcbiAqL1xuXG5NZWRpYUVycm9yLmRlZmF1bHRNZXNzYWdlcyA9IHtcbiAgMTogJ1lvdSBhYm9ydGVkIHRoZSBtZWRpYSBwbGF5YmFjaycsXG4gIDI6ICdBIG5ldHdvcmsgZXJyb3IgY2F1c2VkIHRoZSBtZWRpYSBkb3dubG9hZCB0byBmYWlsIHBhcnQtd2F5LicsXG4gIDM6ICdUaGUgbWVkaWEgcGxheWJhY2sgd2FzIGFib3J0ZWQgZHVlIHRvIGEgY29ycnVwdGlvbiBwcm9ibGVtIG9yIGJlY2F1c2UgdGhlIG1lZGlhIHVzZWQgZmVhdHVyZXMgeW91ciBicm93c2VyIGRpZCBub3Qgc3VwcG9ydC4nLFxuICA0OiAnVGhlIG1lZGlhIGNvdWxkIG5vdCBiZSBsb2FkZWQsIGVpdGhlciBiZWNhdXNlIHRoZSBzZXJ2ZXIgb3IgbmV0d29yayBmYWlsZWQgb3IgYmVjYXVzZSB0aGUgZm9ybWF0IGlzIG5vdCBzdXBwb3J0ZWQuJyxcbiAgNTogJ1RoZSBtZWRpYSBpcyBlbmNyeXB0ZWQgYW5kIHdlIGRvIG5vdCBoYXZlIHRoZSBrZXlzIHRvIGRlY3J5cHQgaXQuJ1xufTsgLy8gQWRkIHR5cGVzIGFzIHByb3BlcnRpZXMgb24gTWVkaWFFcnJvclxuLy8gZS5nLiBNZWRpYUVycm9yLk1FRElBX0VSUl9TUkNfTk9UX1NVUFBPUlRFRCA9IDQ7XG5cbmZvciAodmFyIGVyck51bSA9IDA7IGVyck51bSA8IE1lZGlhRXJyb3IuZXJyb3JUeXBlcy5sZW5ndGg7IGVyck51bSsrKSB7XG4gIE1lZGlhRXJyb3JbTWVkaWFFcnJvci5lcnJvclR5cGVzW2Vyck51bV1dID0gZXJyTnVtOyAvLyB2YWx1ZXMgc2hvdWxkIGJlIGFjY2Vzc2libGUgb24gYm90aCB0aGUgY2xhc3MgYW5kIGluc3RhbmNlXG5cbiAgTWVkaWFFcnJvci5wcm90b3R5cGVbTWVkaWFFcnJvci5lcnJvclR5cGVzW2Vyck51bV1dID0gZXJyTnVtO1xufSAvLyBqc2RvY3MgZm9yIGluc3RhbmNlL3N0YXRpYyBtZW1iZXJzIGFkZGVkIGFib3ZlXG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGFuIG9iamVjdCBpcyBgUHJvbWlzZWAtbGlrZSAoaS5lLiBoYXMgYSBgdGhlbmAgbWV0aG9kKS5cbiAqXG4gKiBAcGFyYW0gIHtPYmplY3R9ICB2YWx1ZVxuICogICAgICAgICBBbiBvYmplY3QgdGhhdCBtYXkgb3IgbWF5IG5vdCBiZSBgUHJvbWlzZWAtbGlrZS5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogICAgICAgICBXaGV0aGVyIG9yIG5vdCB0aGUgb2JqZWN0IGlzIGBQcm9taXNlYC1saWtlLlxuICovXG5mdW5jdGlvbiBpc1Byb21pc2UodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbic7XG59XG4vKipcbiAqIFNpbGVuY2UgYSBQcm9taXNlLWxpa2Ugb2JqZWN0LlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIGZvciBhdm9pZGluZyBub24taGFybWZ1bCwgYnV0IHBvdGVudGlhbGx5IGNvbmZ1c2luZyBcInVuY2F1Z2h0XG4gKiBwbGF5IHByb21pc2VcIiByZWplY3Rpb24gZXJyb3IgbWVzc2FnZXMuXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fSB2YWx1ZVxuICogICAgICAgICBBbiBvYmplY3QgdGhhdCBtYXkgb3IgbWF5IG5vdCBiZSBgUHJvbWlzZWAtbGlrZS5cbiAqL1xuXG5mdW5jdGlvbiBzaWxlbmNlUHJvbWlzZSh2YWx1ZSkge1xuICBpZiAoaXNQcm9taXNlKHZhbHVlKSkge1xuICAgIHZhbHVlLnRoZW4obnVsbCwgZnVuY3Rpb24gKGUpIHt9KTtcbiAgfVxufVxuXG4vKipcbiAqIEBmaWxlIHRleHQtdHJhY2stbGlzdC1jb252ZXJ0ZXIuanMgVXRpbGl0aWVzIGZvciBjYXB0dXJpbmcgdGV4dCB0cmFjayBzdGF0ZSBhbmRcbiAqIHJlLWNyZWF0aW5nIHRyYWNrcyBiYXNlZCBvbiBhIGNhcHR1cmUuXG4gKlxuICogQG1vZHVsZSB0ZXh0LXRyYWNrLWxpc3QtY29udmVydGVyXG4gKi9cblxuLyoqXG4gKiBFeGFtaW5lIGEgc2luZ2xlIHtAbGluayBUZXh0VHJhY2t9IGFuZCByZXR1cm4gYSBKU09OLWNvbXBhdGlibGUgamF2YXNjcmlwdCBvYmplY3QgdGhhdFxuICogcmVwcmVzZW50cyB0aGUge0BsaW5rIFRleHRUcmFja30ncyBzdGF0ZS5cbiAqXG4gKiBAcGFyYW0ge1RleHRUcmFja30gdHJhY2tcbiAqICAgICAgICBUaGUgdGV4dCB0cmFjayB0byBxdWVyeS5cbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiAgICAgICAgIEEgc2VyaWFsaXphYmxlIGphdmFzY3JpcHQgcmVwcmVzZW50YXRpb24gb2YgdGhlIFRleHRUcmFjay5cbiAqIEBwcml2YXRlXG4gKi9cbnZhciB0cmFja1RvSnNvbl8gPSBmdW5jdGlvbiB0cmFja1RvSnNvbl8odHJhY2spIHtcbiAgdmFyIHJldCA9IFsna2luZCcsICdsYWJlbCcsICdsYW5ndWFnZScsICdpZCcsICdpbkJhbmRNZXRhZGF0YVRyYWNrRGlzcGF0Y2hUeXBlJywgJ21vZGUnLCAnc3JjJ10ucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHByb3AsIGkpIHtcbiAgICBpZiAodHJhY2tbcHJvcF0pIHtcbiAgICAgIGFjY1twcm9wXSA9IHRyYWNrW3Byb3BdO1xuICAgIH1cblxuICAgIHJldHVybiBhY2M7XG4gIH0sIHtcbiAgICBjdWVzOiB0cmFjay5jdWVzICYmIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbCh0cmFjay5jdWVzLCBmdW5jdGlvbiAoY3VlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGFydFRpbWU6IGN1ZS5zdGFydFRpbWUsXG4gICAgICAgIGVuZFRpbWU6IGN1ZS5lbmRUaW1lLFxuICAgICAgICB0ZXh0OiBjdWUudGV4dCxcbiAgICAgICAgaWQ6IGN1ZS5pZFxuICAgICAgfTtcbiAgICB9KVxuICB9KTtcbiAgcmV0dXJuIHJldDtcbn07XG4vKipcbiAqIEV4YW1pbmUgYSB7QGxpbmsgVGVjaH0gYW5kIHJldHVybiBhIEpTT04tY29tcGF0aWJsZSBqYXZhc2NyaXB0IGFycmF5IHRoYXQgcmVwcmVzZW50cyB0aGVcbiAqIHN0YXRlIG9mIGFsbCB7QGxpbmsgVGV4dFRyYWNrfXMgY3VycmVudGx5IGNvbmZpZ3VyZWQuIFRoZSByZXR1cm4gYXJyYXkgaXMgY29tcGF0aWJsZSB3aXRoXG4gKiB7QGxpbmsgdGV4dC10cmFjay1saXN0LWNvbnZlcnRlcjpqc29uVG9UZXh0VHJhY2tzfS5cbiAqXG4gKiBAcGFyYW0ge1RlY2h9IHRlY2hcbiAqICAgICAgICBUaGUgdGVjaCBvYmplY3QgdG8gcXVlcnlcbiAqXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqICAgICAgICAgQSBzZXJpYWxpemFibGUgamF2YXNjcmlwdCByZXByZXNlbnRhdGlvbiBvZiB0aGUge0BsaW5rIFRlY2h9c1xuICogICAgICAgICB7QGxpbmsgVGV4dFRyYWNrTGlzdH0uXG4gKi9cblxuXG52YXIgdGV4dFRyYWNrc1RvSnNvbiA9IGZ1bmN0aW9uIHRleHRUcmFja3NUb0pzb24odGVjaCkge1xuICB2YXIgdHJhY2tFbHMgPSB0ZWNoLiQkKCd0cmFjaycpO1xuICB2YXIgdHJhY2tPYmpzID0gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKHRyYWNrRWxzLCBmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiB0LnRyYWNrO1xuICB9KTtcbiAgdmFyIHRyYWNrcyA9IEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbCh0cmFja0VscywgZnVuY3Rpb24gKHRyYWNrRWwpIHtcbiAgICB2YXIganNvbiA9IHRyYWNrVG9Kc29uXyh0cmFja0VsLnRyYWNrKTtcblxuICAgIGlmICh0cmFja0VsLnNyYykge1xuICAgICAganNvbi5zcmMgPSB0cmFja0VsLnNyYztcbiAgICB9XG5cbiAgICByZXR1cm4ganNvbjtcbiAgfSk7XG4gIHJldHVybiB0cmFja3MuY29uY2F0KEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0ZWNoLnRleHRUcmFja3MoKSwgZnVuY3Rpb24gKHRyYWNrKSB7XG4gICAgcmV0dXJuIHRyYWNrT2Jqcy5pbmRleE9mKHRyYWNrKSA9PT0gLTE7XG4gIH0pLm1hcCh0cmFja1RvSnNvbl8pKTtcbn07XG4vKipcbiAqIENyZWF0ZSBhIHNldCBvZiByZW1vdGUge0BsaW5rIFRleHRUcmFja31zIG9uIGEge0BsaW5rIFRlY2h9IGJhc2VkIG9uIGFuIGFycmF5IG9mIGphdmFzY3JpcHRcbiAqIG9iamVjdCB7QGxpbmsgVGV4dFRyYWNrfSByZXByZXNlbnRhdGlvbnMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0ganNvblxuICogICAgICAgIEFuIGFycmF5IG9mIGBUZXh0VHJhY2tgIHJlcHJlc2VudGF0aW9uIG9iamVjdHMsIGxpa2UgdGhvc2UgdGhhdCB3b3VsZCBiZVxuICogICAgICAgIHByb2R1Y2VkIGJ5IGB0ZXh0VHJhY2tzVG9Kc29uYC5cbiAqXG4gKiBAcGFyYW0ge1RlY2h9IHRlY2hcbiAqICAgICAgICBUaGUgYFRlY2hgIHRvIGNyZWF0ZSB0aGUgYFRleHRUcmFja2BzIG9uLlxuICovXG5cblxudmFyIGpzb25Ub1RleHRUcmFja3MgPSBmdW5jdGlvbiBqc29uVG9UZXh0VHJhY2tzKGpzb24sIHRlY2gpIHtcbiAganNvbi5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykge1xuICAgIHZhciBhZGRlZFRyYWNrID0gdGVjaC5hZGRSZW1vdGVUZXh0VHJhY2sodHJhY2spLnRyYWNrO1xuXG4gICAgaWYgKCF0cmFjay5zcmMgJiYgdHJhY2suY3Vlcykge1xuICAgICAgdHJhY2suY3Vlcy5mb3JFYWNoKGZ1bmN0aW9uIChjdWUpIHtcbiAgICAgICAgcmV0dXJuIGFkZGVkVHJhY2suYWRkQ3VlKGN1ZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gdGVjaC50ZXh0VHJhY2tzKCk7XG59O1xuXG52YXIgdGV4dFRyYWNrQ29udmVydGVyID0ge1xuICB0ZXh0VHJhY2tzVG9Kc29uOiB0ZXh0VHJhY2tzVG9Kc29uLFxuICBqc29uVG9UZXh0VHJhY2tzOiBqc29uVG9UZXh0VHJhY2tzLFxuICB0cmFja1RvSnNvbl86IHRyYWNrVG9Kc29uX1xufTtcblxudmFyIE1PREFMX0NMQVNTX05BTUUgPSAndmpzLW1vZGFsLWRpYWxvZyc7XG4vKipcbiAqIFRoZSBgTW9kYWxEaWFsb2dgIGRpc3BsYXlzIG92ZXIgdGhlIHZpZGVvIGFuZCBpdHMgY29udHJvbHMsIHdoaWNoIGJsb2Nrc1xuICogaW50ZXJhY3Rpb24gd2l0aCB0aGUgcGxheWVyIHVudGlsIGl0IGlzIGNsb3NlZC5cbiAqXG4gKiBNb2RhbCBkaWFsb2dzIGluY2x1ZGUgYSBcIkNsb3NlXCIgYnV0dG9uIGFuZCB3aWxsIGNsb3NlIHdoZW4gdGhhdCBidXR0b25cbiAqIGlzIGFjdGl2YXRlZCAtIG9yIHdoZW4gRVNDIGlzIHByZXNzZWQgYW55d2hlcmUuXG4gKlxuICogQGV4dGVuZHMgQ29tcG9uZW50XG4gKi9cblxudmFyIE1vZGFsRGlhbG9nID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0c0xvb3NlKE1vZGFsRGlhbG9nLCBfQ29tcG9uZW50KTtcblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgKlxuICAgKiBAcGFyYW0ge01peGVkfSBbb3B0aW9ucy5jb250ZW50PXVuZGVmaW5lZF1cbiAgICogICAgICAgIFByb3ZpZGUgY3VzdG9taXplZCBjb250ZW50IGZvciB0aGlzIG1vZGFsLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuZGVzY3JpcHRpb25dXG4gICAqICAgICAgICBBIHRleHQgZGVzY3JpcHRpb24gZm9yIHRoZSBtb2RhbCwgcHJpbWFyaWx5IGZvciBhY2Nlc3NpYmlsaXR5LlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmZpbGxBbHdheXM9ZmFsc2VdXG4gICAqICAgICAgICBOb3JtYWxseSwgbW9kYWxzIGFyZSBhdXRvbWF0aWNhbGx5IGZpbGxlZCBvbmx5IHRoZSBmaXJzdCB0aW1lXG4gICAqICAgICAgICB0aGV5IG9wZW4uIFRoaXMgdGVsbHMgdGhlIG1vZGFsIHRvIHJlZnJlc2ggaXRzIGNvbnRlbnRcbiAgICogICAgICAgIGV2ZXJ5IHRpbWUgaXQgb3BlbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYWJlbF1cbiAgICogICAgICAgIEEgdGV4dCBsYWJlbCBmb3IgdGhlIG1vZGFsLCBwcmltYXJpbHkgZm9yIGFjY2Vzc2liaWxpdHkuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMucGF1c2VPbk9wZW49dHJ1ZV1cbiAgICogICAgICAgIElmIGB0cnVlYCwgcGxheWJhY2sgd2lsbCB3aWxsIGJlIHBhdXNlZCBpZiBwbGF5aW5nIHdoZW5cbiAgICogICAgICAgIHRoZSBtb2RhbCBvcGVucywgYW5kIHJlc3VtZWQgd2hlbiBpdCBjbG9zZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudGVtcG9yYXJ5PXRydWVdXG4gICAqICAgICAgICBJZiBgdHJ1ZWAsIHRoZSBtb2RhbCBjYW4gb25seSBiZSBvcGVuZWQgb25jZTsgaXQgd2lsbCBiZVxuICAgKiAgICAgICAgZGlzcG9zZWQgYXMgc29vbiBhcyBpdCdzIGNsb3NlZC5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy51bmNsb3NlYWJsZT1mYWxzZV1cbiAgICogICAgICAgIElmIGB0cnVlYCwgdGhlIHVzZXIgd2lsbCBub3QgYmUgYWJsZSB0byBjbG9zZSB0aGUgbW9kYWxcbiAgICogICAgICAgIHRocm91Z2ggdGhlIFVJIGluIHRoZSBub3JtYWwgd2F5cy4gUHJvZ3JhbW1hdGljIGNsb3NpbmcgaXNcbiAgICogICAgICAgIHN0aWxsIHBvc3NpYmxlLlxuICAgKi9cbiAgZnVuY3Rpb24gTW9kYWxEaWFsb2cocGxheWVyLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgIF90aGlzLm9wZW5lZF8gPSBfdGhpcy5oYXNCZWVuT3BlbmVkXyA9IF90aGlzLmhhc0JlZW5GaWxsZWRfID0gZmFsc2U7XG5cbiAgICBfdGhpcy5jbG9zZWFibGUoIV90aGlzLm9wdGlvbnNfLnVuY2xvc2VhYmxlKTtcblxuICAgIF90aGlzLmNvbnRlbnQoX3RoaXMub3B0aW9uc18uY29udGVudCk7IC8vIE1ha2Ugc3VyZSB0aGUgY29udGVudEVsIGlzIGRlZmluZWQgQUZURVIgYW55IGNoaWxkcmVuIGFyZSBpbml0aWFsaXplZFxuICAgIC8vIGJlY2F1c2Ugd2Ugb25seSB3YW50IHRoZSBjb250ZW50cyBvZiB0aGUgbW9kYWwgaW4gdGhlIGNvbnRlbnRFbFxuICAgIC8vIChub3QgdGhlIFVJIGVsZW1lbnRzIGxpa2UgdGhlIGNsb3NlIGJ1dHRvbikuXG5cblxuICAgIF90aGlzLmNvbnRlbnRFbF8gPSBjcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiBNT0RBTF9DTEFTU19OQU1FICsgXCItY29udGVudFwiXG4gICAgfSwge1xuICAgICAgcm9sZTogJ2RvY3VtZW50J1xuICAgIH0pO1xuICAgIF90aGlzLmRlc2NFbF8gPSBjcmVhdGVFbCgncCcsIHtcbiAgICAgIGNsYXNzTmFtZTogTU9EQUxfQ0xBU1NfTkFNRSArIFwiLWRlc2NyaXB0aW9uIHZqcy1jb250cm9sLXRleHRcIixcbiAgICAgIGlkOiBfdGhpcy5lbCgpLmdldEF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScpXG4gICAgfSk7XG4gICAgdGV4dENvbnRlbnQoX3RoaXMuZGVzY0VsXywgX3RoaXMuZGVzY3JpcHRpb24oKSk7XG5cbiAgICBfdGhpcy5lbF8uYXBwZW5kQ2hpbGQoX3RoaXMuZGVzY0VsXyk7XG5cbiAgICBfdGhpcy5lbF8uYXBwZW5kQ2hpbGQoX3RoaXMuY29udGVudEVsXyk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgYE1vZGFsRGlhbG9nYCdzIERPTSBlbGVtZW50XG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIERPTSBlbGVtZW50IHRoYXQgZ2V0cyBjcmVhdGVkLlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBNb2RhbERpYWxvZy5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwkJDEoKSB7XG4gICAgcmV0dXJuIF9Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogdGhpcy5idWlsZENTU0NsYXNzKCksXG4gICAgICB0YWJJbmRleDogLTFcbiAgICB9LCB7XG4gICAgICAnYXJpYS1kZXNjcmliZWRieSc6IHRoaXMuaWQoKSArIFwiX2Rlc2NyaXB0aW9uXCIsXG4gICAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZScsXG4gICAgICAnYXJpYS1sYWJlbCc6IHRoaXMubGFiZWwoKSxcbiAgICAgICdyb2xlJzogJ2RpYWxvZydcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5jb250ZW50RWxfID0gbnVsbDtcbiAgICB0aGlzLmRlc2NFbF8gPSBudWxsO1xuICAgIHRoaXMucHJldmlvdXNseUFjdGl2ZUVsXyA9IG51bGw7XG5cbiAgICBfQ29tcG9uZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIEJ1aWxkcyB0aGUgZGVmYXVsdCBET00gYGNsYXNzTmFtZWAuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBUaGUgRE9NIGBjbGFzc05hbWVgIGZvciB0aGlzIG9iamVjdC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkQ1NTQ2xhc3MoKSB7XG4gICAgcmV0dXJuIE1PREFMX0NMQVNTX05BTUUgKyBcIiB2anMtaGlkZGVuIFwiICsgX0NvbXBvbmVudC5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBIYW5kbGVzIGBrZXlkb3duYCBldmVudHMgb24gdGhlIGRvY3VtZW50LCBsb29raW5nIGZvciBFU0MsIHdoaWNoIGNsb3Nlc1xuICAgKiB0aGUgbW9kYWwuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUga2V5cHJlc3MgdGhhdCB0cmlnZ2VyZWQgdGhpcyBldmVudC5cbiAgICpcbiAgICogQGxpc3RlbnMga2V5ZG93blxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVLZXlQcmVzcyA9IGZ1bmN0aW9uIGhhbmRsZUtleVByZXNzKGV2ZW50KSB7XG4gICAgaWYgKGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ0VzY2FwZScpICYmIHRoaXMuY2xvc2VhYmxlKCkpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxhYmVsIHN0cmluZyBmb3IgdGhpcyBtb2RhbC4gUHJpbWFyaWx5IHVzZWQgZm9yIGFjY2Vzc2liaWxpdHkuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICB0aGUgbG9jYWxpemVkIG9yIHJhdyBsYWJlbCBvZiB0aGlzIG1vZGFsLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5sYWJlbCA9IGZ1bmN0aW9uIGxhYmVsKCkge1xuICAgIHJldHVybiB0aGlzLmxvY2FsaXplKHRoaXMub3B0aW9uc18ubGFiZWwgfHwgJ01vZGFsIFdpbmRvdycpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBkZXNjcmlwdGlvbiBzdHJpbmcgZm9yIHRoaXMgbW9kYWwuIFByaW1hcmlseSB1c2VkIGZvclxuICAgKiBhY2Nlc3NpYmlsaXR5LlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIGxvY2FsaXplZCBvciByYXcgZGVzY3JpcHRpb24gb2YgdGhpcyBtb2RhbC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGVzY3JpcHRpb24gPSBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHtcbiAgICB2YXIgZGVzYyA9IHRoaXMub3B0aW9uc18uZGVzY3JpcHRpb24gfHwgdGhpcy5sb2NhbGl6ZSgnVGhpcyBpcyBhIG1vZGFsIHdpbmRvdy4nKTsgLy8gQXBwZW5kIGEgdW5pdmVyc2FsIGNsb3NlYWJpbGl0eSBtZXNzYWdlIGlmIHRoZSBtb2RhbCBpcyBjbG9zZWFibGUuXG5cbiAgICBpZiAodGhpcy5jbG9zZWFibGUoKSkge1xuICAgICAgZGVzYyArPSAnICcgKyB0aGlzLmxvY2FsaXplKCdUaGlzIG1vZGFsIGNhbiBiZSBjbG9zZWQgYnkgcHJlc3NpbmcgdGhlIEVzY2FwZSBrZXkgb3IgYWN0aXZhdGluZyB0aGUgY2xvc2UgYnV0dG9uLicpO1xuICAgIH1cblxuICAgIHJldHVybiBkZXNjO1xuICB9XG4gIC8qKlxuICAgKiBPcGVucyB0aGUgbW9kYWwuXG4gICAqXG4gICAqIEBmaXJlcyBNb2RhbERpYWxvZyNiZWZvcmVtb2RhbG9wZW5cbiAgICogQGZpcmVzIE1vZGFsRGlhbG9nI21vZGFsb3BlblxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5vcGVuID0gZnVuY3Rpb24gb3BlbigpIHtcbiAgICBpZiAoIXRoaXMub3BlbmVkXykge1xuICAgICAgdmFyIHBsYXllciA9IHRoaXMucGxheWVyKCk7XG4gICAgICAvKipcbiAgICAgICAgKiBGaXJlZCBqdXN0IGJlZm9yZSBhIGBNb2RhbERpYWxvZ2AgaXMgb3BlbmVkLlxuICAgICAgICAqXG4gICAgICAgICogQGV2ZW50IE1vZGFsRGlhbG9nI2JlZm9yZW1vZGFsb3BlblxuICAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAgKi9cblxuICAgICAgdGhpcy50cmlnZ2VyKCdiZWZvcmVtb2RhbG9wZW4nKTtcbiAgICAgIHRoaXMub3BlbmVkXyA9IHRydWU7IC8vIEZpbGwgY29udGVudCBpZiB0aGUgbW9kYWwgaGFzIG5ldmVyIG9wZW5lZCBiZWZvcmUgYW5kXG4gICAgICAvLyBuZXZlciBiZWVuIGZpbGxlZC5cblxuICAgICAgaWYgKHRoaXMub3B0aW9uc18uZmlsbEFsd2F5cyB8fCAhdGhpcy5oYXNCZWVuT3BlbmVkXyAmJiAhdGhpcy5oYXNCZWVuRmlsbGVkXykge1xuICAgICAgICB0aGlzLmZpbGwoKTtcbiAgICAgIH0gLy8gSWYgdGhlIHBsYXllciB3YXMgcGxheWluZywgcGF1c2UgaXQgYW5kIHRha2Ugbm90ZSBvZiBpdHMgcHJldmlvdXNseVxuICAgICAgLy8gcGxheWluZyBzdGF0ZS5cblxuXG4gICAgICB0aGlzLndhc1BsYXlpbmdfID0gIXBsYXllci5wYXVzZWQoKTtcblxuICAgICAgaWYgKHRoaXMub3B0aW9uc18ucGF1c2VPbk9wZW4gJiYgdGhpcy53YXNQbGF5aW5nXykge1xuICAgICAgICBwbGF5ZXIucGF1c2UoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuY2xvc2VhYmxlKCkpIHtcbiAgICAgICAgdGhpcy5vbih0aGlzLmVsXy5vd25lckRvY3VtZW50LCAna2V5ZG93bicsIGJpbmQodGhpcywgdGhpcy5oYW5kbGVLZXlQcmVzcykpO1xuICAgICAgfSAvLyBIaWRlIGNvbnRyb2xzIGFuZCBub3RlIGlmIHRoZXkgd2VyZSBlbmFibGVkLlxuXG5cbiAgICAgIHRoaXMuaGFkQ29udHJvbHNfID0gcGxheWVyLmNvbnRyb2xzKCk7XG4gICAgICBwbGF5ZXIuY29udHJvbHMoZmFsc2UpO1xuICAgICAgdGhpcy5zaG93KCk7XG4gICAgICB0aGlzLmNvbmRpdGlvbmFsRm9jdXNfKCk7XG4gICAgICB0aGlzLmVsKCkuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xuICAgICAgLyoqXG4gICAgICAgICogRmlyZWQganVzdCBhZnRlciBhIGBNb2RhbERpYWxvZ2AgaXMgb3BlbmVkLlxuICAgICAgICAqXG4gICAgICAgICogQGV2ZW50IE1vZGFsRGlhbG9nI21vZGFsb3BlblxuICAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAgKi9cblxuICAgICAgdGhpcy50cmlnZ2VyKCdtb2RhbG9wZW4nKTtcbiAgICAgIHRoaXMuaGFzQmVlbk9wZW5lZF8gPSB0cnVlO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogSWYgdGhlIGBNb2RhbERpYWxvZ2AgaXMgY3VycmVudGx5IG9wZW4gb3IgY2xvc2VkLlxuICAgKlxuICAgKiBAcGFyYW0gIHtib29sZWFufSBbdmFsdWVdXG4gICAqICAgICAgICAgSWYgZ2l2ZW4sIGl0IHdpbGwgb3BlbiAoYHRydWVgKSBvciBjbG9zZSAoYGZhbHNlYCkgdGhlIG1vZGFsLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIHRoZSBjdXJyZW50IG9wZW4gc3RhdGUgb2YgdGhlIG1vZGFsZGlhbG9nXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLm9wZW5lZCA9IGZ1bmN0aW9uIG9wZW5lZCh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgICAgdGhpc1t2YWx1ZSA/ICdvcGVuJyA6ICdjbG9zZSddKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMub3BlbmVkXztcbiAgfVxuICAvKipcbiAgICogQ2xvc2VzIHRoZSBtb2RhbCwgZG9lcyBub3RoaW5nIGlmIHRoZSBgTW9kYWxEaWFsb2dgIGlzXG4gICAqIG5vdCBvcGVuLlxuICAgKlxuICAgKiBAZmlyZXMgTW9kYWxEaWFsb2cjYmVmb3JlbW9kYWxjbG9zZVxuICAgKiBAZmlyZXMgTW9kYWxEaWFsb2cjbW9kYWxjbG9zZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jbG9zZSA9IGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgIGlmICghdGhpcy5vcGVuZWRfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHBsYXllciA9IHRoaXMucGxheWVyKCk7XG4gICAgLyoqXG4gICAgICAqIEZpcmVkIGp1c3QgYmVmb3JlIGEgYE1vZGFsRGlhbG9nYCBpcyBjbG9zZWQuXG4gICAgICAqXG4gICAgICAqIEBldmVudCBNb2RhbERpYWxvZyNiZWZvcmVtb2RhbGNsb3NlXG4gICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICovXG5cbiAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZW1vZGFsY2xvc2UnKTtcbiAgICB0aGlzLm9wZW5lZF8gPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLndhc1BsYXlpbmdfICYmIHRoaXMub3B0aW9uc18ucGF1c2VPbk9wZW4pIHtcbiAgICAgIHBsYXllci5wbGF5KCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2xvc2VhYmxlKCkpIHtcbiAgICAgIHRoaXMub2ZmKHRoaXMuZWxfLm93bmVyRG9jdW1lbnQsICdrZXlkb3duJywgYmluZCh0aGlzLCB0aGlzLmhhbmRsZUtleVByZXNzKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFkQ29udHJvbHNfKSB7XG4gICAgICBwbGF5ZXIuY29udHJvbHModHJ1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5oaWRlKCk7XG4gICAgdGhpcy5lbCgpLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIC8qKlxuICAgICAgKiBGaXJlZCBqdXN0IGFmdGVyIGEgYE1vZGFsRGlhbG9nYCBpcyBjbG9zZWQuXG4gICAgICAqXG4gICAgICAqIEBldmVudCBNb2RhbERpYWxvZyNtb2RhbGNsb3NlXG4gICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICovXG5cbiAgICB0aGlzLnRyaWdnZXIoJ21vZGFsY2xvc2UnKTtcbiAgICB0aGlzLmNvbmRpdGlvbmFsQmx1cl8oKTtcblxuICAgIGlmICh0aGlzLm9wdGlvbnNfLnRlbXBvcmFyeSkge1xuICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDaGVjayB0byBzZWUgaWYgdGhlIGBNb2RhbERpYWxvZ2AgaXMgY2xvc2VhYmxlIHZpYSB0aGUgVUkuXG4gICAqXG4gICAqIEBwYXJhbSAge2Jvb2xlYW59IFt2YWx1ZV1cbiAgICogICAgICAgICBJZiBnaXZlbiBhcyBhIGJvb2xlYW4sIGl0IHdpbGwgc2V0IHRoZSBgY2xvc2VhYmxlYCBvcHRpb24uXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqICAgICAgICAgUmV0dXJucyB0aGUgZmluYWwgdmFsdWUgb2YgdGhlIGNsb3NhYmxlIG9wdGlvbi5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uY2xvc2VhYmxlID0gZnVuY3Rpb24gY2xvc2VhYmxlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICB2YXIgY2xvc2VhYmxlID0gdGhpcy5jbG9zZWFibGVfID0gISF2YWx1ZTtcbiAgICAgIHZhciBjbG9zZSA9IHRoaXMuZ2V0Q2hpbGQoJ2Nsb3NlQnV0dG9uJyk7IC8vIElmIHRoaXMgaXMgYmVpbmcgbWFkZSBjbG9zZWFibGUgYW5kIGhhcyBubyBjbG9zZSBidXR0b24sIGFkZCBvbmUuXG5cbiAgICAgIGlmIChjbG9zZWFibGUgJiYgIWNsb3NlKSB7XG4gICAgICAgIC8vIFRoZSBjbG9zZSBidXR0b24gc2hvdWxkIGJlIGEgY2hpbGQgb2YgdGhlIG1vZGFsIC0gbm90IGl0c1xuICAgICAgICAvLyBjb250ZW50IGVsZW1lbnQsIHNvIHRlbXBvcmFyaWx5IGNoYW5nZSB0aGUgY29udGVudCBlbGVtZW50LlxuICAgICAgICB2YXIgdGVtcCA9IHRoaXMuY29udGVudEVsXztcbiAgICAgICAgdGhpcy5jb250ZW50RWxfID0gdGhpcy5lbF87XG4gICAgICAgIGNsb3NlID0gdGhpcy5hZGRDaGlsZCgnY2xvc2VCdXR0b24nLCB7XG4gICAgICAgICAgY29udHJvbFRleHQ6ICdDbG9zZSBNb2RhbCBEaWFsb2cnXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbnRlbnRFbF8gPSB0ZW1wO1xuICAgICAgICB0aGlzLm9uKGNsb3NlLCAnY2xvc2UnLCB0aGlzLmNsb3NlKTtcbiAgICAgIH0gLy8gSWYgdGhpcyBpcyBiZWluZyBtYWRlIHVuY2xvc2VhYmxlIGFuZCBoYXMgYSBjbG9zZSBidXR0b24sIHJlbW92ZSBpdC5cblxuXG4gICAgICBpZiAoIWNsb3NlYWJsZSAmJiBjbG9zZSkge1xuICAgICAgICB0aGlzLm9mZihjbG9zZSwgJ2Nsb3NlJywgdGhpcy5jbG9zZSk7XG4gICAgICAgIHRoaXMucmVtb3ZlQ2hpbGQoY2xvc2UpO1xuICAgICAgICBjbG9zZS5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY2xvc2VhYmxlXztcbiAgfVxuICAvKipcbiAgICogRmlsbCB0aGUgbW9kYWwncyBjb250ZW50IGVsZW1lbnQgd2l0aCB0aGUgbW9kYWwncyBcImNvbnRlbnRcIiBvcHRpb24uXG4gICAqIFRoZSBjb250ZW50IGVsZW1lbnQgd2lsbCBiZSBlbXB0aWVkIGJlZm9yZSB0aGlzIGNoYW5nZSB0YWtlcyBwbGFjZS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZmlsbCA9IGZ1bmN0aW9uIGZpbGwoKSB7XG4gICAgdGhpcy5maWxsV2l0aCh0aGlzLmNvbnRlbnQoKSk7XG4gIH1cbiAgLyoqXG4gICAqIEZpbGwgdGhlIG1vZGFsJ3MgY29udGVudCBlbGVtZW50IHdpdGggYXJiaXRyYXJ5IGNvbnRlbnQuXG4gICAqIFRoZSBjb250ZW50IGVsZW1lbnQgd2lsbCBiZSBlbXB0aWVkIGJlZm9yZSB0aGlzIGNoYW5nZSB0YWtlcyBwbGFjZS5cbiAgICpcbiAgICogQGZpcmVzIE1vZGFsRGlhbG9nI2JlZm9yZW1vZGFsZmlsbFxuICAgKiBAZmlyZXMgTW9kYWxEaWFsb2cjbW9kYWxmaWxsXG4gICAqXG4gICAqIEBwYXJhbSB7TWl4ZWR9IFtjb250ZW50XVxuICAgKiAgICAgICAgVGhlIHNhbWUgcnVsZXMgYXBwbHkgdG8gdGhpcyBhcyBhcHBseSB0byB0aGUgYGNvbnRlbnRgIG9wdGlvbi5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZmlsbFdpdGggPSBmdW5jdGlvbiBmaWxsV2l0aChjb250ZW50KSB7XG4gICAgdmFyIGNvbnRlbnRFbCA9IHRoaXMuY29udGVudEVsKCk7XG4gICAgdmFyIHBhcmVudEVsID0gY29udGVudEVsLnBhcmVudE5vZGU7XG4gICAgdmFyIG5leHRTaWJsaW5nRWwgPSBjb250ZW50RWwubmV4dFNpYmxpbmc7XG4gICAgLyoqXG4gICAgICAqIEZpcmVkIGp1c3QgYmVmb3JlIGEgYE1vZGFsRGlhbG9nYCBpcyBmaWxsZWQgd2l0aCBjb250ZW50LlxuICAgICAgKlxuICAgICAgKiBAZXZlbnQgTW9kYWxEaWFsb2cjYmVmb3JlbW9kYWxmaWxsXG4gICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICovXG5cbiAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZW1vZGFsZmlsbCcpO1xuICAgIHRoaXMuaGFzQmVlbkZpbGxlZF8gPSB0cnVlOyAvLyBEZXRhY2ggdGhlIGNvbnRlbnQgZWxlbWVudCBmcm9tIHRoZSBET00gYmVmb3JlIHBlcmZvcm1pbmdcbiAgICAvLyBtYW5pcHVsYXRpb24gdG8gYXZvaWQgbW9kaWZ5aW5nIHRoZSBsaXZlIERPTSBtdWx0aXBsZSB0aW1lcy5cblxuICAgIHBhcmVudEVsLnJlbW92ZUNoaWxkKGNvbnRlbnRFbCk7XG4gICAgdGhpcy5lbXB0eSgpO1xuICAgIGluc2VydENvbnRlbnQoY29udGVudEVsLCBjb250ZW50KTtcbiAgICAvKipcbiAgICAgKiBGaXJlZCBqdXN0IGFmdGVyIGEgYE1vZGFsRGlhbG9nYCBpcyBmaWxsZWQgd2l0aCBjb250ZW50LlxuICAgICAqXG4gICAgICogQGV2ZW50IE1vZGFsRGlhbG9nI21vZGFsZmlsbFxuICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgKi9cblxuICAgIHRoaXMudHJpZ2dlcignbW9kYWxmaWxsJyk7IC8vIFJlLWluamVjdCB0aGUgcmUtZmlsbGVkIGNvbnRlbnQgZWxlbWVudC5cblxuICAgIGlmIChuZXh0U2libGluZ0VsKSB7XG4gICAgICBwYXJlbnRFbC5pbnNlcnRCZWZvcmUoY29udGVudEVsLCBuZXh0U2libGluZ0VsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFyZW50RWwuYXBwZW5kQ2hpbGQoY29udGVudEVsKTtcbiAgICB9IC8vIG1ha2Ugc3VyZSB0aGF0IHRoZSBjbG9zZSBidXR0b24gaXMgbGFzdCBpbiB0aGUgZGlhbG9nIERPTVxuXG5cbiAgICB2YXIgY2xvc2VCdXR0b24gPSB0aGlzLmdldENoaWxkKCdjbG9zZUJ1dHRvbicpO1xuXG4gICAgaWYgKGNsb3NlQnV0dG9uKSB7XG4gICAgICBwYXJlbnRFbC5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbi5lbF8pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRW1wdGllcyB0aGUgY29udGVudCBlbGVtZW50LiBUaGlzIGhhcHBlbnMgYW55dGltZSB0aGUgbW9kYWwgaXMgZmlsbGVkLlxuICAgKlxuICAgKiBAZmlyZXMgTW9kYWxEaWFsb2cjYmVmb3JlbW9kYWxlbXB0eVxuICAgKiBAZmlyZXMgTW9kYWxEaWFsb2cjbW9kYWxlbXB0eVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5lbXB0eSA9IGZ1bmN0aW9uIGVtcHR5KCkge1xuICAgIC8qKlxuICAgICogRmlyZWQganVzdCBiZWZvcmUgYSBgTW9kYWxEaWFsb2dgIGlzIGVtcHRpZWQuXG4gICAgKlxuICAgICogQGV2ZW50IE1vZGFsRGlhbG9nI2JlZm9yZW1vZGFsZW1wdHlcbiAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAqL1xuICAgIHRoaXMudHJpZ2dlcignYmVmb3JlbW9kYWxlbXB0eScpO1xuICAgIGVtcHR5RWwodGhpcy5jb250ZW50RWwoKSk7XG4gICAgLyoqXG4gICAgKiBGaXJlZCBqdXN0IGFmdGVyIGEgYE1vZGFsRGlhbG9nYCBpcyBlbXB0aWVkLlxuICAgICpcbiAgICAqIEBldmVudCBNb2RhbERpYWxvZyNtb2RhbGVtcHR5XG4gICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgKi9cblxuICAgIHRoaXMudHJpZ2dlcignbW9kYWxlbXB0eScpO1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIG1vZGFsIGNvbnRlbnQsIHdoaWNoIGdldHMgbm9ybWFsaXplZCBiZWZvcmUgYmVpbmdcbiAgICogcmVuZGVyZWQgaW50byB0aGUgRE9NLlxuICAgKlxuICAgKiBUaGlzIGRvZXMgbm90IHVwZGF0ZSB0aGUgRE9NIG9yIGZpbGwgdGhlIG1vZGFsLCBidXQgaXQgaXMgY2FsbGVkIGR1cmluZ1xuICAgKiB0aGF0IHByb2Nlc3MuXG4gICAqXG4gICAqIEBwYXJhbSAge01peGVkfSBbdmFsdWVdXG4gICAqICAgICAgICAgSWYgZGVmaW5lZCwgc2V0cyB0aGUgaW50ZXJuYWwgY29udGVudCB2YWx1ZSB0byBiZSB1c2VkIG9uIHRoZVxuICAgKiAgICAgICAgIG5leHQgY2FsbChzKSB0byBgZmlsbGAuIFRoaXMgdmFsdWUgaXMgbm9ybWFsaXplZCBiZWZvcmUgYmVpbmdcbiAgICogICAgICAgICBpbnNlcnRlZC4gVG8gXCJjbGVhclwiIHRoZSBpbnRlcm5hbCBjb250ZW50IHZhbHVlLCBwYXNzIGBudWxsYC5cbiAgICpcbiAgICogQHJldHVybiB7TWl4ZWR9XG4gICAqICAgICAgICAgVGhlIGN1cnJlbnQgY29udGVudCBvZiB0aGUgbW9kYWwgZGlhbG9nXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNvbnRlbnQgPSBmdW5jdGlvbiBjb250ZW50KHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuY29udGVudF8gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jb250ZW50XztcbiAgfVxuICAvKipcbiAgICogY29uZGl0aW9uYWxseSBmb2N1cyB0aGUgbW9kYWwgZGlhbG9nIGlmIGZvY3VzIHdhcyBwcmV2aW91c2x5IG9uIHRoZSBwbGF5ZXIuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNvbmRpdGlvbmFsRm9jdXNfID0gZnVuY3Rpb24gY29uZGl0aW9uYWxGb2N1c18oKSB7XG4gICAgdmFyIGFjdGl2ZUVsID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICB2YXIgcGxheWVyRWwgPSB0aGlzLnBsYXllcl8uZWxfO1xuICAgIHRoaXMucHJldmlvdXNseUFjdGl2ZUVsXyA9IG51bGw7XG5cbiAgICBpZiAocGxheWVyRWwuY29udGFpbnMoYWN0aXZlRWwpIHx8IHBsYXllckVsID09PSBhY3RpdmVFbCkge1xuICAgICAgdGhpcy5wcmV2aW91c2x5QWN0aXZlRWxfID0gYWN0aXZlRWw7XG4gICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICB0aGlzLm9uKGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5RG93bik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBjb25kaXRpb25hbGx5IGJsdXIgdGhlIGVsZW1lbnQgYW5kIHJlZm9jdXMgdGhlIGxhc3QgZm9jdXNlZCBlbGVtZW50XG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNvbmRpdGlvbmFsQmx1cl8gPSBmdW5jdGlvbiBjb25kaXRpb25hbEJsdXJfKCkge1xuICAgIGlmICh0aGlzLnByZXZpb3VzbHlBY3RpdmVFbF8pIHtcbiAgICAgIHRoaXMucHJldmlvdXNseUFjdGl2ZUVsXy5mb2N1cygpO1xuICAgICAgdGhpcy5wcmV2aW91c2x5QWN0aXZlRWxfID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLm9mZihkb2N1bWVudCwgJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleURvd24pO1xuICB9XG4gIC8qKlxuICAgKiBLZXlkb3duIGhhbmRsZXIuIEF0dGFjaGVkIHdoZW4gbW9kYWwgaXMgZm9jdXNlZC5cbiAgICpcbiAgICogQGxpc3RlbnMga2V5ZG93blxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVLZXlEb3duID0gZnVuY3Rpb24gaGFuZGxlS2V5RG93bihldmVudCkge1xuICAgIC8vIGV4aXQgZWFybHkgaWYgaXQgaXNuJ3QgYSB0YWIga2V5XG4gICAgaWYgKCFrZXljb2RlLmlzRXZlbnRLZXkoZXZlbnQsICdUYWInKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBmb2N1c2FibGVFbHMgPSB0aGlzLmZvY3VzYWJsZUVsc18oKTtcbiAgICB2YXIgYWN0aXZlRWwgPSB0aGlzLmVsXy5xdWVyeVNlbGVjdG9yKCc6Zm9jdXMnKTtcbiAgICB2YXIgZm9jdXNJbmRleDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm9jdXNhYmxlRWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoYWN0aXZlRWwgPT09IGZvY3VzYWJsZUVsc1tpXSkge1xuICAgICAgICBmb2N1c0luZGV4ID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHRoaXMuZWxfKSB7XG4gICAgICBmb2N1c0luZGV4ID0gMDtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuc2hpZnRLZXkgJiYgZm9jdXNJbmRleCA9PT0gMCkge1xuICAgICAgZm9jdXNhYmxlRWxzW2ZvY3VzYWJsZUVscy5sZW5ndGggLSAxXS5mb2N1cygpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9IGVsc2UgaWYgKCFldmVudC5zaGlmdEtleSAmJiBmb2N1c0luZGV4ID09PSBmb2N1c2FibGVFbHMubGVuZ3RoIC0gMSkge1xuICAgICAgZm9jdXNhYmxlRWxzWzBdLmZvY3VzKCk7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogZ2V0IGFsbCBmb2N1c2FibGUgZWxlbWVudHNcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uZm9jdXNhYmxlRWxzXyA9IGZ1bmN0aW9uIGZvY3VzYWJsZUVsc18oKSB7XG4gICAgdmFyIGFsbENoaWxkcmVuID0gdGhpcy5lbF8ucXVlcnlTZWxlY3RvckFsbCgnKicpO1xuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYWxsQ2hpbGRyZW4sIGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgcmV0dXJuIChjaGlsZCBpbnN0YW5jZW9mIHdpbmRvdyQxLkhUTUxBbmNob3JFbGVtZW50IHx8IGNoaWxkIGluc3RhbmNlb2Ygd2luZG93JDEuSFRNTEFyZWFFbGVtZW50KSAmJiBjaGlsZC5oYXNBdHRyaWJ1dGUoJ2hyZWYnKSB8fCAoY2hpbGQgaW5zdGFuY2VvZiB3aW5kb3ckMS5IVE1MSW5wdXRFbGVtZW50IHx8IGNoaWxkIGluc3RhbmNlb2Ygd2luZG93JDEuSFRNTFNlbGVjdEVsZW1lbnQgfHwgY2hpbGQgaW5zdGFuY2VvZiB3aW5kb3ckMS5IVE1MVGV4dEFyZWFFbGVtZW50IHx8IGNoaWxkIGluc3RhbmNlb2Ygd2luZG93JDEuSFRNTEJ1dHRvbkVsZW1lbnQpICYmICFjaGlsZC5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykgfHwgY2hpbGQgaW5zdGFuY2VvZiB3aW5kb3ckMS5IVE1MSUZyYW1lRWxlbWVudCB8fCBjaGlsZCBpbnN0YW5jZW9mIHdpbmRvdyQxLkhUTUxPYmplY3RFbGVtZW50IHx8IGNoaWxkIGluc3RhbmNlb2Ygd2luZG93JDEuSFRNTEVtYmVkRWxlbWVudCB8fCBjaGlsZC5oYXNBdHRyaWJ1dGUoJ3RhYmluZGV4JykgJiYgY2hpbGQuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpICE9PSAtMSB8fCBjaGlsZC5oYXNBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScpO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBNb2RhbERpYWxvZztcbn0oQ29tcG9uZW50KTtcbi8qKlxuICogRGVmYXVsdCBvcHRpb25zIGZvciBgTW9kYWxEaWFsb2dgIGRlZmF1bHQgb3B0aW9ucy5cbiAqXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuXG5cbk1vZGFsRGlhbG9nLnByb3RvdHlwZS5vcHRpb25zXyA9IHtcbiAgcGF1c2VPbk9wZW46IHRydWUsXG4gIHRlbXBvcmFyeTogdHJ1ZVxufTtcbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnTW9kYWxEaWFsb2cnLCBNb2RhbERpYWxvZyk7XG5cbi8qKlxuICogQ29tbW9uIGZ1bmN0aW9uYWxpeSBiZXR3ZWVuIHtAbGluayBUZXh0VHJhY2tMaXN0fSwge0BsaW5rIEF1ZGlvVHJhY2tMaXN0fSwgYW5kXG4gKiB7QGxpbmsgVmlkZW9UcmFja0xpc3R9XG4gKlxuICogQGV4dGVuZHMgRXZlbnRUYXJnZXRcbiAqL1xuXG52YXIgVHJhY2tMaXN0ID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfRXZlbnRUYXJnZXQpIHtcbiAgX2luaGVyaXRzTG9vc2UoVHJhY2tMaXN0LCBfRXZlbnRUYXJnZXQpO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzc1xuICAgKlxuICAgKiBAcGFyYW0ge1RyYWNrW119IHRyYWNrc1xuICAgKiAgICAgICAgQSBsaXN0IG9mIHRyYWNrcyB0byBpbml0aWFsaXplIHRoZSBsaXN0IHdpdGguXG4gICAqXG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgZnVuY3Rpb24gVHJhY2tMaXN0KHRyYWNrcykge1xuICAgIHZhciBfdGhpcztcblxuICAgIGlmICh0cmFja3MgPT09IHZvaWQgMCkge1xuICAgICAgdHJhY2tzID0gW107XG4gICAgfVxuXG4gICAgX3RoaXMgPSBfRXZlbnRUYXJnZXQuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIF90aGlzLnRyYWNrc18gPSBbXTtcbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2tMaXN0XG4gICAgICogQG1lbWJlciB7bnVtYmVyfSBsZW5ndGhcbiAgICAgKiAgICAgICAgIFRoZSBjdXJyZW50IG51bWJlciBvZiBgVHJhY2tgcyBpbiB0aGUgdGhpcyBUcmFja2lzdC5cbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgJ2xlbmd0aCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFja3NfLmxlbmd0aDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBfdGhpcy5hZGRUcmFjayh0cmFja3NbaV0pO1xuICAgIH1cblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKipcbiAgICogQWRkIGEge0BsaW5rIFRyYWNrfSB0byB0aGUgYFRyYWNrTGlzdGBcbiAgICpcbiAgICogQHBhcmFtIHtUcmFja30gdHJhY2tcbiAgICogICAgICAgIFRoZSBhdWRpbywgdmlkZW8sIG9yIHRleHQgdHJhY2sgdG8gYWRkIHRvIHRoZSBsaXN0LlxuICAgKlxuICAgKiBAZmlyZXMgVHJhY2tMaXN0I2FkZHRyYWNrXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IFRyYWNrTGlzdC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmFkZFRyYWNrID0gZnVuY3Rpb24gYWRkVHJhY2sodHJhY2spIHtcbiAgICB2YXIgaW5kZXggPSB0aGlzLnRyYWNrc18ubGVuZ3RoO1xuXG4gICAgaWYgKCEoJycgKyBpbmRleCBpbiB0aGlzKSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGluZGV4LCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnRyYWNrc19baW5kZXhdO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IC8vIERvIG5vdCBhZGQgZHVwbGljYXRlIHRyYWNrc1xuXG5cbiAgICBpZiAodGhpcy50cmFja3NfLmluZGV4T2YodHJhY2spID09PSAtMSkge1xuICAgICAgdGhpcy50cmFja3NfLnB1c2godHJhY2spO1xuICAgICAgLyoqXG4gICAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHRyYWNrIGlzIGFkZGVkIHRvIGEgdHJhY2sgbGlzdC5cbiAgICAgICAqXG4gICAgICAgKiBAZXZlbnQgVHJhY2tMaXN0I2FkZHRyYWNrXG4gICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgKiBAcHJvcGVydHkge1RyYWNrfSB0cmFja1xuICAgICAgICogICAgICAgICAgIEEgcmVmZXJlbmNlIHRvIHRyYWNrIHRoYXQgd2FzIGFkZGVkLlxuICAgICAgICovXG5cbiAgICAgIHRoaXMudHJpZ2dlcih7XG4gICAgICAgIHRyYWNrOiB0cmFjayxcbiAgICAgICAgdHlwZTogJ2FkZHRyYWNrJyxcbiAgICAgICAgdGFyZ2V0OiB0aGlzXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSBhIHtAbGluayBUcmFja30gZnJvbSB0aGUgYFRyYWNrTGlzdGBcbiAgICpcbiAgICogQHBhcmFtIHtUcmFja30gcnRyYWNrXG4gICAqICAgICAgICBUaGUgYXVkaW8sIHZpZGVvLCBvciB0ZXh0IHRyYWNrIHRvIHJlbW92ZSBmcm9tIHRoZSBsaXN0LlxuICAgKlxuICAgKiBAZmlyZXMgVHJhY2tMaXN0I3JlbW92ZXRyYWNrXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlbW92ZVRyYWNrID0gZnVuY3Rpb24gcmVtb3ZlVHJhY2socnRyYWNrKSB7XG4gICAgdmFyIHRyYWNrO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgaWYgKHRoaXNbaV0gPT09IHJ0cmFjaykge1xuICAgICAgICB0cmFjayA9IHRoaXNbaV07XG5cbiAgICAgICAgaWYgKHRyYWNrLm9mZikge1xuICAgICAgICAgIHRyYWNrLm9mZigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cmFja3NfLnNwbGljZShpLCAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0cmFjaykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHRyYWNrIGlzIHJlbW92ZWQgZnJvbSB0cmFjayBsaXN0LlxuICAgICAqXG4gICAgICogQGV2ZW50IFRyYWNrTGlzdCNyZW1vdmV0cmFja1xuICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgKiBAcHJvcGVydHkge1RyYWNrfSB0cmFja1xuICAgICAqICAgICAgICAgICBBIHJlZmVyZW5jZSB0byB0cmFjayB0aGF0IHdhcyByZW1vdmVkLlxuICAgICAqL1xuXG5cbiAgICB0aGlzLnRyaWdnZXIoe1xuICAgICAgdHJhY2s6IHRyYWNrLFxuICAgICAgdHlwZTogJ3JlbW92ZXRyYWNrJyxcbiAgICAgIHRhcmdldDogdGhpc1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBUcmFjayBmcm9tIHRoZSBUcmFja0xpc3QgYnkgYSB0cmFja3MgaWRcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gdGhlIGlkIG9mIHRoZSB0cmFjayB0byBnZXRcbiAgICogQG1ldGhvZCBnZXRUcmFja0J5SWRcbiAgICogQHJldHVybiB7VHJhY2t9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmdldFRyYWNrQnlJZCA9IGZ1bmN0aW9uIGdldFRyYWNrQnlJZChpZCkge1xuICAgIHZhciByZXN1bHQgPSBudWxsO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIHRyYWNrID0gdGhpc1tpXTtcblxuICAgICAgaWYgKHRyYWNrLmlkID09PSBpZCkge1xuICAgICAgICByZXN1bHQgPSB0cmFjaztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICByZXR1cm4gVHJhY2tMaXN0O1xufShFdmVudFRhcmdldCk7XG4vKipcbiAqIFRyaWdnZXJlZCB3aGVuIGEgZGlmZmVyZW50IHRyYWNrIGlzIHNlbGVjdGVkL2VuYWJsZWQuXG4gKlxuICogQGV2ZW50IFRyYWNrTGlzdCNjaGFuZ2VcbiAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAqL1xuXG4vKipcbiAqIEV2ZW50cyB0aGF0IGNhbiBiZSBjYWxsZWQgd2l0aCBvbiArIGV2ZW50TmFtZS4gU2VlIHtAbGluayBFdmVudEhhbmRsZXJ9LlxuICpcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBUcmFja0xpc3QjYWxsb3dlZEV2ZW50c19cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5UcmFja0xpc3QucHJvdG90eXBlLmFsbG93ZWRFdmVudHNfID0ge1xuICBjaGFuZ2U6ICdjaGFuZ2UnLFxuICBhZGR0cmFjazogJ2FkZHRyYWNrJyxcbiAgcmVtb3ZldHJhY2s6ICdyZW1vdmV0cmFjaydcbn07IC8vIGVtdWxhdGUgYXR0cmlidXRlIEV2ZW50SGFuZGxlciBzdXBwb3J0IHRvIGFsbG93IGZvciBmZWF0dXJlIGRldGVjdGlvblxuXG5mb3IgKHZhciBldmVudCBpbiBUcmFja0xpc3QucHJvdG90eXBlLmFsbG93ZWRFdmVudHNfKSB7XG4gIFRyYWNrTGlzdC5wcm90b3R5cGVbJ29uJyArIGV2ZW50XSA9IG51bGw7XG59XG5cbi8qKlxuICogQW55d2hlcmUgd2UgY2FsbCB0aGlzIGZ1bmN0aW9uIHdlIGRpdmVyZ2UgZnJvbSB0aGUgc3BlY1xuICogYXMgd2Ugb25seSBzdXBwb3J0IG9uZSBlbmFibGVkIGF1ZGlvdHJhY2sgYXQgYSB0aW1lXG4gKlxuICogQHBhcmFtIHtBdWRpb1RyYWNrTGlzdH0gbGlzdFxuICogICAgICAgIGxpc3QgdG8gd29yayBvblxuICpcbiAqIEBwYXJhbSB7QXVkaW9UcmFja30gdHJhY2tcbiAqICAgICAgICBUaGUgdHJhY2sgdG8gc2tpcFxuICpcbiAqIEBwcml2YXRlXG4gKi9cblxudmFyIGRpc2FibGVPdGhlcnMgPSBmdW5jdGlvbiBkaXNhYmxlT3RoZXJzKGxpc3QsIHRyYWNrKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIGlmICghT2JqZWN0LmtleXMobGlzdFtpXSkubGVuZ3RoIHx8IHRyYWNrLmlkID09PSBsaXN0W2ldLmlkKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9IC8vIGFub3RoZXIgYXVkaW8gdHJhY2sgaXMgZW5hYmxlZCwgZGlzYWJsZSBpdFxuXG5cbiAgICBsaXN0W2ldLmVuYWJsZWQgPSBmYWxzZTtcbiAgfVxufTtcbi8qKlxuICogVGhlIGN1cnJlbnQgbGlzdCBvZiB7QGxpbmsgQXVkaW9UcmFja30gZm9yIGEgbWVkaWEgZmlsZS5cbiAqXG4gKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9lbWJlZGRlZC1jb250ZW50Lmh0bWwjYXVkaW90cmFja2xpc3R9XG4gKiBAZXh0ZW5kcyBUcmFja0xpc3RcbiAqL1xuXG5cbnZhciBBdWRpb1RyYWNrTGlzdCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX1RyYWNrTGlzdCkge1xuICBfaW5oZXJpdHNMb29zZShBdWRpb1RyYWNrTGlzdCwgX1RyYWNrTGlzdCk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge0F1ZGlvVHJhY2tbXX0gW3RyYWNrcz1bXV1cbiAgICogICAgICAgIEEgbGlzdCBvZiBgQXVkaW9UcmFja2AgdG8gaW5zdGFudGlhdGUgdGhlIGxpc3Qgd2l0aC5cbiAgICovXG4gIGZ1bmN0aW9uIEF1ZGlvVHJhY2tMaXN0KHRyYWNrcykge1xuICAgIHZhciBfdGhpcztcblxuICAgIGlmICh0cmFja3MgPT09IHZvaWQgMCkge1xuICAgICAgdHJhY2tzID0gW107XG4gICAgfVxuXG4gICAgLy8gbWFrZSBzdXJlIG9ubHkgMSB0cmFjayBpcyBlbmFibGVkXG4gICAgLy8gc29ydGVkIGZyb20gbGFzdCBpbmRleCB0byBmaXJzdCBpbmRleFxuICAgIGZvciAodmFyIGkgPSB0cmFja3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGlmICh0cmFja3NbaV0uZW5hYmxlZCkge1xuICAgICAgICBkaXNhYmxlT3RoZXJzKHRyYWNrcywgdHJhY2tzW2ldKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX3RoaXMgPSBfVHJhY2tMaXN0LmNhbGwodGhpcywgdHJhY2tzKSB8fCB0aGlzO1xuICAgIF90aGlzLmNoYW5naW5nXyA9IGZhbHNlO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKipcbiAgICogQWRkIGFuIHtAbGluayBBdWRpb1RyYWNrfSB0byB0aGUgYEF1ZGlvVHJhY2tMaXN0YC5cbiAgICpcbiAgICogQHBhcmFtIHtBdWRpb1RyYWNrfSB0cmFja1xuICAgKiAgICAgICAgVGhlIEF1ZGlvVHJhY2sgdG8gYWRkIHRvIHRoZSBsaXN0XG4gICAqXG4gICAqIEBmaXJlcyBUcmFja0xpc3QjYWRkdHJhY2tcbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gQXVkaW9UcmFja0xpc3QucHJvdG90eXBlO1xuXG4gIF9wcm90by5hZGRUcmFjayA9IGZ1bmN0aW9uIGFkZFRyYWNrKHRyYWNrKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBpZiAodHJhY2suZW5hYmxlZCkge1xuICAgICAgZGlzYWJsZU90aGVycyh0aGlzLCB0cmFjayk7XG4gICAgfVxuXG4gICAgX1RyYWNrTGlzdC5wcm90b3R5cGUuYWRkVHJhY2suY2FsbCh0aGlzLCB0cmFjayk7IC8vIG5hdGl2ZSB0cmFja3MgZG9uJ3QgaGF2ZSB0aGlzXG5cblxuICAgIGlmICghdHJhY2suYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyYWNrLmVuYWJsZWRDaGFuZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gd2hlbiB3ZSBhcmUgZGlzYWJsaW5nIG90aGVyIHRyYWNrcyAoc2luY2Ugd2UgZG9uJ3Qgc3VwcG9ydFxuICAgICAgLy8gbW9yZSB0aGFuIG9uZSB0cmFjayBhdCBhIHRpbWUpIHdlIHdpbGwgc2V0IGNoYW5naW5nX1xuICAgICAgLy8gdG8gdHJ1ZSBzbyB0aGF0IHdlIGRvbid0IHRyaWdnZXIgYWRkaXRpb25hbCBjaGFuZ2UgZXZlbnRzXG4gICAgICBpZiAoX3RoaXMyLmNoYW5naW5nXykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIF90aGlzMi5jaGFuZ2luZ18gPSB0cnVlO1xuICAgICAgZGlzYWJsZU90aGVycyhfdGhpczIsIHRyYWNrKTtcbiAgICAgIF90aGlzMi5jaGFuZ2luZ18gPSBmYWxzZTtcblxuICAgICAgX3RoaXMyLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGxpc3RlbnMgQXVkaW9UcmFjayNlbmFibGVkY2hhbmdlXG4gICAgICogQGZpcmVzIFRyYWNrTGlzdCNjaGFuZ2VcbiAgICAgKi9cblxuXG4gICAgdHJhY2suYWRkRXZlbnRMaXN0ZW5lcignZW5hYmxlZGNoYW5nZScsIHRyYWNrLmVuYWJsZWRDaGFuZ2VfKTtcbiAgfTtcblxuICBfcHJvdG8ucmVtb3ZlVHJhY2sgPSBmdW5jdGlvbiByZW1vdmVUcmFjayhydHJhY2spIHtcbiAgICBfVHJhY2tMaXN0LnByb3RvdHlwZS5yZW1vdmVUcmFjay5jYWxsKHRoaXMsIHJ0cmFjayk7XG5cbiAgICBpZiAocnRyYWNrLnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgcnRyYWNrLmVuYWJsZWRDaGFuZ2VfKSB7XG4gICAgICBydHJhY2sucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5hYmxlZGNoYW5nZScsIHJ0cmFjay5lbmFibGVkQ2hhbmdlXyk7XG4gICAgICBydHJhY2suZW5hYmxlZENoYW5nZV8gPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQXVkaW9UcmFja0xpc3Q7XG59KFRyYWNrTGlzdCk7XG5cbi8qKlxuICogVW4tc2VsZWN0IGFsbCBvdGhlciB7QGxpbmsgVmlkZW9UcmFja31zIHRoYXQgYXJlIHNlbGVjdGVkLlxuICpcbiAqIEBwYXJhbSB7VmlkZW9UcmFja0xpc3R9IGxpc3RcbiAqICAgICAgICBsaXN0IHRvIHdvcmsgb25cbiAqXG4gKiBAcGFyYW0ge1ZpZGVvVHJhY2t9IHRyYWNrXG4gKiAgICAgICAgVGhlIHRyYWNrIHRvIHNraXBcbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5cbnZhciBkaXNhYmxlT3RoZXJzJDEgPSBmdW5jdGlvbiBkaXNhYmxlT3RoZXJzKGxpc3QsIHRyYWNrKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIGlmICghT2JqZWN0LmtleXMobGlzdFtpXSkubGVuZ3RoIHx8IHRyYWNrLmlkID09PSBsaXN0W2ldLmlkKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9IC8vIGFub3RoZXIgdmlkZW8gdHJhY2sgaXMgZW5hYmxlZCwgZGlzYWJsZSBpdFxuXG5cbiAgICBsaXN0W2ldLnNlbGVjdGVkID0gZmFsc2U7XG4gIH1cbn07XG4vKipcbiAqIFRoZSBjdXJyZW50IGxpc3Qgb2Yge0BsaW5rIFZpZGVvVHJhY2t9IGZvciBhIHZpZGVvLlxuICpcbiAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCN2aWRlb3RyYWNrbGlzdH1cbiAqIEBleHRlbmRzIFRyYWNrTGlzdFxuICovXG5cblxudmFyIFZpZGVvVHJhY2tMaXN0ID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfVHJhY2tMaXN0KSB7XG4gIF9pbmhlcml0c0xvb3NlKFZpZGVvVHJhY2tMaXN0LCBfVHJhY2tMaXN0KTtcblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7VmlkZW9UcmFja1tdfSBbdHJhY2tzPVtdXVxuICAgKiAgICAgICAgQSBsaXN0IG9mIGBWaWRlb1RyYWNrYCB0byBpbnN0YW50aWF0ZSB0aGUgbGlzdCB3aXRoLlxuICAgKi9cbiAgZnVuY3Rpb24gVmlkZW9UcmFja0xpc3QodHJhY2tzKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgaWYgKHRyYWNrcyA9PT0gdm9pZCAwKSB7XG4gICAgICB0cmFja3MgPSBbXTtcbiAgICB9XG5cbiAgICAvLyBtYWtlIHN1cmUgb25seSAxIHRyYWNrIGlzIGVuYWJsZWRcbiAgICAvLyBzb3J0ZWQgZnJvbSBsYXN0IGluZGV4IHRvIGZpcnN0IGluZGV4XG4gICAgZm9yICh2YXIgaSA9IHRyYWNrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgaWYgKHRyYWNrc1tpXS5zZWxlY3RlZCkge1xuICAgICAgICBkaXNhYmxlT3RoZXJzJDEodHJhY2tzLCB0cmFja3NbaV0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfdGhpcyA9IF9UcmFja0xpc3QuY2FsbCh0aGlzLCB0cmFja3MpIHx8IHRoaXM7XG4gICAgX3RoaXMuY2hhbmdpbmdfID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogQG1lbWJlciB7bnVtYmVyfSBWaWRlb1RyYWNrTGlzdCNzZWxlY3RlZEluZGV4XG4gICAgICogICAgICAgICBUaGUgY3VycmVudCBpbmRleCBvZiB0aGUgc2VsZWN0ZWQge0BsaW5rIFZpZGVvVHJhY2tgfS5cbiAgICAgKi9cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgJ3NlbGVjdGVkSW5kZXgnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHRoaXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgaWYgKHRoaXNbX2ldLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gX2k7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0KCkge31cbiAgICB9KTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIHtAbGluayBWaWRlb1RyYWNrfSB0byB0aGUgYFZpZGVvVHJhY2tMaXN0YC5cbiAgICpcbiAgICogQHBhcmFtIHtWaWRlb1RyYWNrfSB0cmFja1xuICAgKiAgICAgICAgVGhlIFZpZGVvVHJhY2sgdG8gYWRkIHRvIHRoZSBsaXN0XG4gICAqXG4gICAqIEBmaXJlcyBUcmFja0xpc3QjYWRkdHJhY2tcbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gVmlkZW9UcmFja0xpc3QucHJvdG90eXBlO1xuXG4gIF9wcm90by5hZGRUcmFjayA9IGZ1bmN0aW9uIGFkZFRyYWNrKHRyYWNrKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBpZiAodHJhY2suc2VsZWN0ZWQpIHtcbiAgICAgIGRpc2FibGVPdGhlcnMkMSh0aGlzLCB0cmFjayk7XG4gICAgfVxuXG4gICAgX1RyYWNrTGlzdC5wcm90b3R5cGUuYWRkVHJhY2suY2FsbCh0aGlzLCB0cmFjayk7IC8vIG5hdGl2ZSB0cmFja3MgZG9uJ3QgaGF2ZSB0aGlzXG5cblxuICAgIGlmICghdHJhY2suYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyYWNrLnNlbGVjdGVkQ2hhbmdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfdGhpczIuY2hhbmdpbmdfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgX3RoaXMyLmNoYW5naW5nXyA9IHRydWU7XG4gICAgICBkaXNhYmxlT3RoZXJzJDEoX3RoaXMyLCB0cmFjayk7XG4gICAgICBfdGhpczIuY2hhbmdpbmdfID0gZmFsc2U7XG5cbiAgICAgIF90aGlzMi50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBsaXN0ZW5zIFZpZGVvVHJhY2sjc2VsZWN0ZWRjaGFuZ2VcbiAgICAgKiBAZmlyZXMgVHJhY2tMaXN0I2NoYW5nZVxuICAgICAqL1xuXG5cbiAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3RlZGNoYW5nZScsIHRyYWNrLnNlbGVjdGVkQ2hhbmdlXyk7XG4gIH07XG5cbiAgX3Byb3RvLnJlbW92ZVRyYWNrID0gZnVuY3Rpb24gcmVtb3ZlVHJhY2socnRyYWNrKSB7XG4gICAgX1RyYWNrTGlzdC5wcm90b3R5cGUucmVtb3ZlVHJhY2suY2FsbCh0aGlzLCBydHJhY2spO1xuXG4gICAgaWYgKHJ0cmFjay5yZW1vdmVFdmVudExpc3RlbmVyICYmIHJ0cmFjay5zZWxlY3RlZENoYW5nZV8pIHtcbiAgICAgIHJ0cmFjay5yZW1vdmVFdmVudExpc3RlbmVyKCdzZWxlY3RlZGNoYW5nZScsIHJ0cmFjay5zZWxlY3RlZENoYW5nZV8pO1xuICAgICAgcnRyYWNrLnNlbGVjdGVkQ2hhbmdlXyA9IG51bGw7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBWaWRlb1RyYWNrTGlzdDtcbn0oVHJhY2tMaXN0KTtcblxuLyoqXG4gKiBUaGUgY3VycmVudCBsaXN0IG9mIHtAbGluayBUZXh0VHJhY2t9IGZvciBhIG1lZGlhIGZpbGUuXG4gKlxuICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZW1iZWRkZWQtY29udGVudC5odG1sI3RleHR0cmFja2xpc3R9XG4gKiBAZXh0ZW5kcyBUcmFja0xpc3RcbiAqL1xuXG52YXIgVGV4dFRyYWNrTGlzdCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX1RyYWNrTGlzdCkge1xuICBfaW5oZXJpdHNMb29zZShUZXh0VHJhY2tMaXN0LCBfVHJhY2tMaXN0KTtcblxuICBmdW5jdGlvbiBUZXh0VHJhY2tMaXN0KCkge1xuICAgIHJldHVybiBfVHJhY2tMaXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBUZXh0VHJhY2tMaXN0LnByb3RvdHlwZTtcblxuICAvKipcbiAgICogQWRkIGEge0BsaW5rIFRleHRUcmFja30gdG8gdGhlIGBUZXh0VHJhY2tMaXN0YFxuICAgKlxuICAgKiBAcGFyYW0ge1RleHRUcmFja30gdHJhY2tcbiAgICogICAgICAgIFRoZSB0ZXh0IHRyYWNrIHRvIGFkZCB0byB0aGUgbGlzdC5cbiAgICpcbiAgICogQGZpcmVzIFRyYWNrTGlzdCNhZGR0cmFja1xuICAgKi9cbiAgX3Byb3RvLmFkZFRyYWNrID0gZnVuY3Rpb24gYWRkVHJhY2sodHJhY2spIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgX1RyYWNrTGlzdC5wcm90b3R5cGUuYWRkVHJhY2suY2FsbCh0aGlzLCB0cmFjayk7XG5cbiAgICBpZiAoIXRoaXMucXVldWVDaGFuZ2VfKSB7XG4gICAgICB0aGlzLnF1ZXVlQ2hhbmdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnF1ZXVlVHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmICghdGhpcy50cmlnZ2VyU2VsZWN0ZWRsYW5ndWFnZWNoYW5nZSkge1xuICAgICAgdGhpcy50cmlnZ2VyU2VsZWN0ZWRsYW5ndWFnZWNoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy50cmlnZ2VyKCdzZWxlY3RlZGxhbmd1YWdlY2hhbmdlJyk7XG4gICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbGlzdGVucyBUZXh0VHJhY2sjbW9kZWNoYW5nZVxuICAgICAqIEBmaXJlcyBUcmFja0xpc3QjY2hhbmdlXG4gICAgICovXG5cblxuICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ21vZGVjaGFuZ2UnLCB0aGlzLnF1ZXVlQ2hhbmdlXyk7XG4gICAgdmFyIG5vbkxhbmd1YWdlVGV4dFRyYWNrS2luZCA9IFsnbWV0YWRhdGEnLCAnY2hhcHRlcnMnXTtcblxuICAgIGlmIChub25MYW5ndWFnZVRleHRUcmFja0tpbmQuaW5kZXhPZih0cmFjay5raW5kKSA9PT0gLTEpIHtcbiAgICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ21vZGVjaGFuZ2UnLCB0aGlzLnRyaWdnZXJTZWxlY3RlZGxhbmd1YWdlY2hhbmdlXyk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5yZW1vdmVUcmFjayA9IGZ1bmN0aW9uIHJlbW92ZVRyYWNrKHJ0cmFjaykge1xuICAgIF9UcmFja0xpc3QucHJvdG90eXBlLnJlbW92ZVRyYWNrLmNhbGwodGhpcywgcnRyYWNrKTsgLy8gbWFudWFsbHkgcmVtb3ZlIHRoZSBldmVudCBoYW5kbGVycyB3ZSBhZGRlZFxuXG5cbiAgICBpZiAocnRyYWNrLnJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIGlmICh0aGlzLnF1ZXVlQ2hhbmdlXykge1xuICAgICAgICBydHJhY2sucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW9kZWNoYW5nZScsIHRoaXMucXVldWVDaGFuZ2VfKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRsYW5ndWFnZWNoYW5nZV8pIHtcbiAgICAgICAgcnRyYWNrLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vZGVjaGFuZ2UnLCB0aGlzLnRyaWdnZXJTZWxlY3RlZGxhbmd1YWdlY2hhbmdlXyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBUZXh0VHJhY2tMaXN0O1xufShUcmFja0xpc3QpO1xuXG4vKipcbiAqIEBmaWxlIGh0bWwtdHJhY2stZWxlbWVudC1saXN0LmpzXG4gKi9cblxuLyoqXG4gKiBUaGUgY3VycmVudCBsaXN0IG9mIHtAbGluayBIdG1sVHJhY2tFbGVtZW50fXMuXG4gKi9cbnZhciBIdG1sVHJhY2tFbGVtZW50TGlzdCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtIHtIdG1sVHJhY2tFbGVtZW50W119IFt0cmFja3M9W11dXG4gICAqICAgICAgICBBIGxpc3Qgb2YgYEh0bWxUcmFja0VsZW1lbnRgIHRvIGluc3RhbnRpYXRlIHRoZSBsaXN0IHdpdGguXG4gICAqL1xuICBmdW5jdGlvbiBIdG1sVHJhY2tFbGVtZW50TGlzdCh0cmFja0VsZW1lbnRzKSB7XG4gICAgaWYgKHRyYWNrRWxlbWVudHMgPT09IHZvaWQgMCkge1xuICAgICAgdHJhY2tFbGVtZW50cyA9IFtdO1xuICAgIH1cblxuICAgIHRoaXMudHJhY2tFbGVtZW50c18gPSBbXTtcbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgSHRtbFRyYWNrRWxlbWVudExpc3RcbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGxlbmd0aFxuICAgICAqICAgICAgICAgVGhlIGN1cnJlbnQgbnVtYmVyIG9mIGBUcmFja2BzIGluIHRoZSB0aGlzIFRyYWNraXN0LlxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdsZW5ndGgnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhY2tFbGVtZW50c18ubGVuZ3RoO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHRyYWNrRWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuYWRkVHJhY2tFbGVtZW50Xyh0cmFja0VsZW1lbnRzW2ldKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhbiB7QGxpbmsgSHRtbFRyYWNrRWxlbWVudH0gdG8gdGhlIGBIdG1sVHJhY2tFbGVtZW50TGlzdGBcbiAgICpcbiAgICogQHBhcmFtIHtIdG1sVHJhY2tFbGVtZW50fSB0cmFja0VsZW1lbnRcbiAgICogICAgICAgIFRoZSB0cmFjayBlbGVtZW50IHRvIGFkZCB0byB0aGUgbGlzdC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gSHRtbFRyYWNrRWxlbWVudExpc3QucHJvdG90eXBlO1xuXG4gIF9wcm90by5hZGRUcmFja0VsZW1lbnRfID0gZnVuY3Rpb24gYWRkVHJhY2tFbGVtZW50Xyh0cmFja0VsZW1lbnQpIHtcbiAgICB2YXIgaW5kZXggPSB0aGlzLnRyYWNrRWxlbWVudHNfLmxlbmd0aDtcblxuICAgIGlmICghKCcnICsgaW5kZXggaW4gdGhpcykpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBpbmRleCwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy50cmFja0VsZW1lbnRzX1tpbmRleF07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gLy8gRG8gbm90IGFkZCBkdXBsaWNhdGUgZWxlbWVudHNcblxuXG4gICAgaWYgKHRoaXMudHJhY2tFbGVtZW50c18uaW5kZXhPZih0cmFja0VsZW1lbnQpID09PSAtMSkge1xuICAgICAgdGhpcy50cmFja0VsZW1lbnRzXy5wdXNoKHRyYWNrRWxlbWVudCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgYW4ge0BsaW5rIEh0bWxUcmFja0VsZW1lbnR9IGZyb20gdGhlIGBIdG1sVHJhY2tFbGVtZW50TGlzdGAgZ2l2ZW4gYW5cbiAgICoge0BsaW5rIFRleHRUcmFja30uXG4gICAqXG4gICAqIEBwYXJhbSB7VGV4dFRyYWNrfSB0cmFja1xuICAgKiAgICAgICAgVGhlIHRyYWNrIGFzc29jaWF0ZWQgd2l0aCBhIHRyYWNrIGVsZW1lbnQuXG4gICAqXG4gICAqIEByZXR1cm4ge0h0bWxUcmFja0VsZW1lbnR8dW5kZWZpbmVkfVxuICAgKiAgICAgICAgIFRoZSB0cmFjayBlbGVtZW50IHRoYXQgd2FzIGZvdW5kIG9yIHVuZGVmaW5lZC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uZ2V0VHJhY2tFbGVtZW50QnlUcmFja18gPSBmdW5jdGlvbiBnZXRUcmFja0VsZW1lbnRCeVRyYWNrXyh0cmFjaykge1xuICAgIHZhciB0cmFja0VsZW1lbnRfO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHRoaXMudHJhY2tFbGVtZW50c18ubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0cmFjayA9PT0gdGhpcy50cmFja0VsZW1lbnRzX1tpXS50cmFjaykge1xuICAgICAgICB0cmFja0VsZW1lbnRfID0gdGhpcy50cmFja0VsZW1lbnRzX1tpXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRyYWNrRWxlbWVudF87XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSBhIHtAbGluayBIdG1sVHJhY2tFbGVtZW50fSBmcm9tIHRoZSBgSHRtbFRyYWNrRWxlbWVudExpc3RgXG4gICAqXG4gICAqIEBwYXJhbSB7SHRtbFRyYWNrRWxlbWVudH0gdHJhY2tFbGVtZW50XG4gICAqICAgICAgICBUaGUgdHJhY2sgZWxlbWVudCB0byByZW1vdmUgZnJvbSB0aGUgbGlzdC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVtb3ZlVHJhY2tFbGVtZW50XyA9IGZ1bmN0aW9uIHJlbW92ZVRyYWNrRWxlbWVudF8odHJhY2tFbGVtZW50KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHRoaXMudHJhY2tFbGVtZW50c18ubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0cmFja0VsZW1lbnQgPT09IHRoaXMudHJhY2tFbGVtZW50c19baV0pIHtcbiAgICAgICAgaWYgKHRoaXMudHJhY2tFbGVtZW50c19baV0udHJhY2sgJiYgdHlwZW9mIHRoaXMudHJhY2tFbGVtZW50c19baV0udHJhY2sub2ZmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy50cmFja0VsZW1lbnRzX1tpXS50cmFjay5vZmYoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy50cmFja0VsZW1lbnRzX1tpXS5vZmYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLnRyYWNrRWxlbWVudHNfW2ldLm9mZigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cmFja0VsZW1lbnRzXy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gSHRtbFRyYWNrRWxlbWVudExpc3Q7XG59KCk7XG5cbi8qKlxuICogQGZpbGUgdGV4dC10cmFjay1jdWUtbGlzdC5qc1xuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gVGV4dFRyYWNrQ3VlTGlzdH5UZXh0VHJhY2tDdWVcbiAqXG4gKiBAcHJvcGVydHkge3N0cmluZ30gaWRcbiAqICAgICAgICAgICBUaGUgdW5pcXVlIGlkIGZvciB0aGlzIHRleHQgdHJhY2sgY3VlXG4gKlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHN0YXJ0VGltZVxuICogICAgICAgICAgIFRoZSBzdGFydCB0aW1lIGZvciB0aGlzIHRleHQgdHJhY2sgY3VlXG4gKlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGVuZFRpbWVcbiAqICAgICAgICAgICBUaGUgZW5kIHRpbWUgZm9yIHRoaXMgdGV4dCB0cmFjayBjdWVcbiAqXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHBhdXNlT25FeGl0XG4gKiAgICAgICAgICAgUGF1c2Ugd2hlbiB0aGUgZW5kIHRpbWUgaXMgcmVhY2hlZCBpZiB0cnVlLlxuICpcbiAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCN0ZXh0dHJhY2tjdWV9XG4gKi9cblxuLyoqXG4gKiBBIExpc3Qgb2YgVGV4dFRyYWNrQ3Vlcy5cbiAqXG4gKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9lbWJlZGRlZC1jb250ZW50Lmh0bWwjdGV4dHRyYWNrY3VlbGlzdH1cbiAqL1xudmFyIFRleHRUcmFja0N1ZUxpc3QgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBjdWVzXG4gICAqICAgICAgICBBIGxpc3Qgb2YgY3VlcyB0byBiZSBpbml0aWFsaXplZCB3aXRoXG4gICAqL1xuICBmdW5jdGlvbiBUZXh0VHJhY2tDdWVMaXN0KGN1ZXMpIHtcbiAgICBUZXh0VHJhY2tDdWVMaXN0LnByb3RvdHlwZS5zZXRDdWVzXy5jYWxsKHRoaXMsIGN1ZXMpO1xuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBUZXh0VHJhY2tDdWVMaXN0XG4gICAgICogQG1lbWJlciB7bnVtYmVyfSBsZW5ndGhcbiAgICAgKiAgICAgICAgIFRoZSBjdXJyZW50IG51bWJlciBvZiBgVGV4dFRyYWNrQ3VlYHMgaW4gdGhlIFRleHRUcmFja0N1ZUxpc3QuXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2xlbmd0aCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZW5ndGhfO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBBIHNldHRlciBmb3IgY3VlcyBpbiB0aGlzIGxpc3QuIENyZWF0ZXMgZ2V0dGVyc1xuICAgKiBhbiBhbiBpbmRleCBmb3IgdGhlIGN1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGN1ZXNcbiAgICogICAgICAgIEFuIGFycmF5IG9mIGN1ZXMgdG8gc2V0XG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IFRleHRUcmFja0N1ZUxpc3QucHJvdG90eXBlO1xuXG4gIF9wcm90by5zZXRDdWVzXyA9IGZ1bmN0aW9uIHNldEN1ZXNfKGN1ZXMpIHtcbiAgICB2YXIgb2xkTGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMDtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGwgPSBjdWVzLmxlbmd0aDtcbiAgICB0aGlzLmN1ZXNfID0gY3VlcztcbiAgICB0aGlzLmxlbmd0aF8gPSBjdWVzLmxlbmd0aDtcblxuICAgIHZhciBkZWZpbmVQcm9wID0gZnVuY3Rpb24gZGVmaW5lUHJvcChpbmRleCkge1xuICAgICAgaWYgKCEoJycgKyBpbmRleCBpbiB0aGlzKSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJycgKyBpbmRleCwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3Vlc19baW5kZXhdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmIChvbGRMZW5ndGggPCBsKSB7XG4gICAgICBpID0gb2xkTGVuZ3RoO1xuXG4gICAgICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgICAgICBkZWZpbmVQcm9wLmNhbGwodGhpcywgaSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBgVGV4dFRyYWNrQ3VlYCB0aGF0IGlzIGN1cnJlbnRseSBpbiB0aGUgYFRleHRUcmFja0N1ZUxpc3RgIGJ5IGlkLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAgICogICAgICAgIFRoZSBpZCBvZiB0aGUgY3VlIHRoYXQgc2hvdWxkIGJlIHNlYXJjaGVkIGZvci5cbiAgICpcbiAgICogQHJldHVybiB7VGV4dFRyYWNrQ3VlTGlzdH5UZXh0VHJhY2tDdWV8bnVsbH1cbiAgICogICAgICAgICBBIHNpbmdsZSBjdWUgb3IgbnVsbCBpZiBub25lIHdhcyBmb3VuZC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZ2V0Q3VlQnlJZCA9IGZ1bmN0aW9uIGdldEN1ZUJ5SWQoaWQpIHtcbiAgICB2YXIgcmVzdWx0ID0gbnVsbDtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBjdWUgPSB0aGlzW2ldO1xuXG4gICAgICBpZiAoY3VlLmlkID09PSBpZCkge1xuICAgICAgICByZXN1bHQgPSBjdWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgcmV0dXJuIFRleHRUcmFja0N1ZUxpc3Q7XG59KCk7XG5cbi8qKlxuICogQGZpbGUgdHJhY2sta2luZHMuanNcbiAqL1xuXG4vKipcbiAqIEFsbCBwb3NzaWJsZSBgVmlkZW9UcmFja0tpbmRgc1xuICpcbiAqIEBzZWUgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZW1iZWRkZWQtY29udGVudC5odG1sI2RvbS12aWRlb3RyYWNrLWtpbmRcbiAqIEB0eXBlZGVmIFZpZGVvVHJhY2t+S2luZFxuICogQGVudW1cbiAqL1xudmFyIFZpZGVvVHJhY2tLaW5kID0ge1xuICBhbHRlcm5hdGl2ZTogJ2FsdGVybmF0aXZlJyxcbiAgY2FwdGlvbnM6ICdjYXB0aW9ucycsXG4gIG1haW46ICdtYWluJyxcbiAgc2lnbjogJ3NpZ24nLFxuICBzdWJ0aXRsZXM6ICdzdWJ0aXRsZXMnLFxuICBjb21tZW50YXJ5OiAnY29tbWVudGFyeSdcbn07XG4vKipcbiAqIEFsbCBwb3NzaWJsZSBgQXVkaW9UcmFja0tpbmRgc1xuICpcbiAqIEBzZWUgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZW1iZWRkZWQtY29udGVudC5odG1sI2RvbS1hdWRpb3RyYWNrLWtpbmRcbiAqIEB0eXBlZGVmIEF1ZGlvVHJhY2t+S2luZFxuICogQGVudW1cbiAqL1xuXG52YXIgQXVkaW9UcmFja0tpbmQgPSB7XG4gICdhbHRlcm5hdGl2ZSc6ICdhbHRlcm5hdGl2ZScsXG4gICdkZXNjcmlwdGlvbnMnOiAnZGVzY3JpcHRpb25zJyxcbiAgJ21haW4nOiAnbWFpbicsXG4gICdtYWluLWRlc2MnOiAnbWFpbi1kZXNjJyxcbiAgJ3RyYW5zbGF0aW9uJzogJ3RyYW5zbGF0aW9uJyxcbiAgJ2NvbW1lbnRhcnknOiAnY29tbWVudGFyeSdcbn07XG4vKipcbiAqIEFsbCBwb3NzaWJsZSBgVGV4dFRyYWNrS2luZGBzXG4gKlxuICogQHNlZSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9lbWJlZGRlZC1jb250ZW50Lmh0bWwjZG9tLXRleHR0cmFjay1raW5kXG4gKiBAdHlwZWRlZiBUZXh0VHJhY2t+S2luZFxuICogQGVudW1cbiAqL1xuXG52YXIgVGV4dFRyYWNrS2luZCA9IHtcbiAgc3VidGl0bGVzOiAnc3VidGl0bGVzJyxcbiAgY2FwdGlvbnM6ICdjYXB0aW9ucycsXG4gIGRlc2NyaXB0aW9uczogJ2Rlc2NyaXB0aW9ucycsXG4gIGNoYXB0ZXJzOiAnY2hhcHRlcnMnLFxuICBtZXRhZGF0YTogJ21ldGFkYXRhJ1xufTtcbi8qKlxuICogQWxsIHBvc3NpYmxlIGBUZXh0VHJhY2tNb2RlYHNcbiAqXG4gKiBAc2VlIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCN0ZXh0dHJhY2ttb2RlXG4gKiBAdHlwZWRlZiBUZXh0VHJhY2t+TW9kZVxuICogQGVudW1cbiAqL1xuXG52YXIgVGV4dFRyYWNrTW9kZSA9IHtcbiAgZGlzYWJsZWQ6ICdkaXNhYmxlZCcsXG4gIGhpZGRlbjogJ2hpZGRlbicsXG4gIHNob3dpbmc6ICdzaG93aW5nJ1xufTtcblxuLyoqXG4gKiBBIFRyYWNrIGNsYXNzIHRoYXQgY29udGFpbnMgYWxsIG9mIHRoZSBjb21tb24gZnVuY3Rpb25hbGl0eSBmb3Ige0BsaW5rIEF1ZGlvVHJhY2t9LFxuICoge0BsaW5rIFZpZGVvVHJhY2t9LCBhbmQge0BsaW5rIFRleHRUcmFja30uXG4gKlxuICogPiBOb3RlOiBUaGlzIGNsYXNzIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseVxuICpcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbH1cbiAqIEBleHRlbmRzIEV2ZW50VGFyZ2V0XG4gKiBAYWJzdHJhY3RcbiAqL1xuXG52YXIgVHJhY2sgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9FdmVudFRhcmdldCkge1xuICBfaW5oZXJpdHNMb29zZShUcmFjaywgX0V2ZW50VGFyZ2V0KTtcblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV1cbiAgICogICAgICAgIE9iamVjdCBvZiBvcHRpb24gbmFtZXMgYW5kIHZhbHVlc1xuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMua2luZD0nJ11cbiAgICogICAgICAgIEEgdmFsaWQga2luZCBmb3IgdGhlIHRyYWNrIHR5cGUgeW91IGFyZSBjcmVhdGluZy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmlkPSd2anNfdHJhY2tfJyArIEd1aWQubmV3R1VJRCgpXVxuICAgKiAgICAgICAgQSB1bmlxdWUgaWQgZm9yIHRoaXMgQXVkaW9UcmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxhYmVsPScnXVxuICAgKiAgICAgICAgVGhlIG1lbnUgbGFiZWwgZm9yIHRoaXMgdHJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYW5ndWFnZT0nJ11cbiAgICogICAgICAgIEEgdmFsaWQgdHdvIGNoYXJhY3RlciBsYW5ndWFnZSBjb2RlLlxuICAgKlxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIGZ1bmN0aW9uIFRyYWNrKG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgX3RoaXMgPSBfRXZlbnRUYXJnZXQuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIHZhciB0cmFja1Byb3BzID0ge1xuICAgICAgaWQ6IG9wdGlvbnMuaWQgfHwgJ3Zqc190cmFja18nICsgbmV3R1VJRCgpLFxuICAgICAga2luZDogb3B0aW9ucy5raW5kIHx8ICcnLFxuICAgICAgbGFiZWw6IG9wdGlvbnMubGFiZWwgfHwgJycsXG4gICAgICBsYW5ndWFnZTogb3B0aW9ucy5sYW5ndWFnZSB8fCAnJ1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFRyYWNrXG4gICAgICogQG1lbWJlciB7c3RyaW5nfSBpZFxuICAgICAqICAgICAgICAgVGhlIGlkIG9mIHRoaXMgdHJhY2suIENhbm5vdCBiZSBjaGFuZ2VkIGFmdGVyIGNyZWF0aW9uLlxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqXG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgVHJhY2tcbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGtpbmRcbiAgICAgKiAgICAgICAgIFRoZSBraW5kIG9mIHRyYWNrIHRoYXQgdGhpcyBpcy4gQ2Fubm90IGJlIGNoYW5nZWQgYWZ0ZXIgY3JlYXRpb24uXG4gICAgICogQGluc3RhbmNlXG4gICAgICpcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBUcmFja1xuICAgICAqIEBtZW1iZXIge3N0cmluZ30gbGFiZWxcbiAgICAgKiAgICAgICAgIFRoZSBsYWJlbCBvZiB0aGlzIHRyYWNrLiBDYW5ub3QgYmUgY2hhbmdlZCBhZnRlciBjcmVhdGlvbi5cbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKlxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFRyYWNrXG4gICAgICogQG1lbWJlciB7c3RyaW5nfSBsYW5ndWFnZVxuICAgICAqICAgICAgICAgVGhlIHR3byBsZXR0ZXIgbGFuZ3VhZ2UgY29kZSBmb3IgdGhpcyB0cmFjay4gQ2Fubm90IGJlIGNoYW5nZWQgYWZ0ZXJcbiAgICAgKiAgICAgICAgIGNyZWF0aW9uLlxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqXG4gICAgICogQHJlYWRvbmx5XG4gICAgICovXG5cbiAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChrZXkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwga2V5LCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgIHJldHVybiB0cmFja1Byb3BzW2tleV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gc2V0KCkge31cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gdHJhY2tQcm9wcykge1xuICAgICAgX2xvb3Aoa2V5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICByZXR1cm4gVHJhY2s7XG59KEV2ZW50VGFyZ2V0KTtcblxuLyoqXG4gKiBAZmlsZSB1cmwuanNcbiAqIEBtb2R1bGUgdXJsXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gdXJsOlVSTE9iamVjdFxuICpcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwcm90b2NvbFxuICogICAgICAgICAgIFRoZSBwcm90b2NvbCBvZiB0aGUgdXJsIHRoYXQgd2FzIHBhcnNlZC5cbiAqXG4gKiBAcHJvcGVydHkge3N0cmluZ30gaG9zdG5hbWVcbiAqICAgICAgICAgICBUaGUgaG9zdG5hbWUgb2YgdGhlIHVybCB0aGF0IHdhcyBwYXJzZWQuXG4gKlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHBvcnRcbiAqICAgICAgICAgICBUaGUgcG9ydCBvZiB0aGUgdXJsIHRoYXQgd2FzIHBhcnNlZC5cbiAqXG4gKiBAcHJvcGVydHkge3N0cmluZ30gcGF0aG5hbWVcbiAqICAgICAgICAgICBUaGUgcGF0aG5hbWUgb2YgdGhlIHVybCB0aGF0IHdhcyBwYXJzZWQuXG4gKlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHNlYXJjaFxuICogICAgICAgICAgIFRoZSBzZWFyY2ggcXVlcnkgb2YgdGhlIHVybCB0aGF0IHdhcyBwYXJzZWQuXG4gKlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGhhc2hcbiAqICAgICAgICAgICBUaGUgaGFzaCBvZiB0aGUgdXJsIHRoYXQgd2FzIHBhcnNlZC5cbiAqXG4gKiBAcHJvcGVydHkge3N0cmluZ30gaG9zdFxuICogICAgICAgICAgIFRoZSBob3N0IG9mIHRoZSB1cmwgdGhhdCB3YXMgcGFyc2VkLlxuICovXG5cbi8qKlxuICogUmVzb2x2ZSBhbmQgcGFyc2UgdGhlIGVsZW1lbnRzIG9mIGEgVVJMLlxuICpcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICAgIHtTdHJpbmd9IHVybFxuICogICAgICAgICAgIFRoZSB1cmwgdG8gcGFyc2VcbiAqXG4gKiBAcmV0dXJuICAge3VybDpVUkxPYmplY3R9XG4gKiAgICAgICAgICAgQW4gb2JqZWN0IG9mIHVybCBkZXRhaWxzXG4gKi9cblxudmFyIHBhcnNlVXJsID0gZnVuY3Rpb24gcGFyc2VVcmwodXJsKSB7XG4gIHZhciBwcm9wcyA9IFsncHJvdG9jb2wnLCAnaG9zdG5hbWUnLCAncG9ydCcsICdwYXRobmFtZScsICdzZWFyY2gnLCAnaGFzaCcsICdob3N0J107IC8vIGFkZCB0aGUgdXJsIHRvIGFuIGFuY2hvciBhbmQgbGV0IHRoZSBicm93c2VyIHBhcnNlIHRoZSBVUkxcblxuICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgYS5ocmVmID0gdXJsOyAvLyBJRTggKGFuZCA5PykgRml4XG4gIC8vIGllOCBkb2Vzbid0IHBhcnNlIHRoZSBVUkwgY29ycmVjdGx5IHVudGlsIHRoZSBhbmNob3IgaXMgYWN0dWFsbHlcbiAgLy8gYWRkZWQgdG8gdGhlIGJvZHksIGFuZCBhbiBpbm5lckhUTUwgaXMgbmVlZGVkIHRvIHRyaWdnZXIgdGhlIHBhcnNpbmdcblxuICB2YXIgYWRkVG9Cb2R5ID0gYS5ob3N0ID09PSAnJyAmJiBhLnByb3RvY29sICE9PSAnZmlsZTonO1xuICB2YXIgZGl2O1xuXG4gIGlmIChhZGRUb0JvZHkpIHtcbiAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaXYuaW5uZXJIVE1MID0gXCI8YSBocmVmPVxcXCJcIiArIHVybCArIFwiXFxcIj48L2E+XCI7XG4gICAgYSA9IGRpdi5maXJzdENoaWxkOyAvLyBwcmV2ZW50IHRoZSBkaXYgZnJvbSBhZmZlY3RpbmcgbGF5b3V0XG5cbiAgICBkaXYuc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5Om5vbmU7IHBvc2l0aW9uOmFic29sdXRlOycpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgfSAvLyBDb3B5IHRoZSBzcGVjaWZpYyBVUkwgcHJvcGVydGllcyB0byBhIG5ldyBvYmplY3RcbiAgLy8gVGhpcyBpcyBhbHNvIG5lZWRlZCBmb3IgSUU4IGJlY2F1c2UgdGhlIGFuY2hvciBsb3NlcyBpdHNcbiAgLy8gcHJvcGVydGllcyB3aGVuIGl0J3MgcmVtb3ZlZCBmcm9tIHRoZSBkb21cblxuXG4gIHZhciBkZXRhaWxzID0ge307XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIGRldGFpbHNbcHJvcHNbaV1dID0gYVtwcm9wc1tpXV07XG4gIH0gLy8gSUU5IGFkZHMgdGhlIHBvcnQgdG8gdGhlIGhvc3QgcHJvcGVydHkgdW5saWtlIGV2ZXJ5b25lIGVsc2UuIElmXG4gIC8vIGEgcG9ydCBpZGVudGlmaWVyIGlzIGFkZGVkIGZvciBzdGFuZGFyZCBwb3J0cywgc3RyaXAgaXQuXG5cblxuICBpZiAoZGV0YWlscy5wcm90b2NvbCA9PT0gJ2h0dHA6Jykge1xuICAgIGRldGFpbHMuaG9zdCA9IGRldGFpbHMuaG9zdC5yZXBsYWNlKC86ODAkLywgJycpO1xuICB9XG5cbiAgaWYgKGRldGFpbHMucHJvdG9jb2wgPT09ICdodHRwczonKSB7XG4gICAgZGV0YWlscy5ob3N0ID0gZGV0YWlscy5ob3N0LnJlcGxhY2UoLzo0NDMkLywgJycpO1xuICB9XG5cbiAgaWYgKCFkZXRhaWxzLnByb3RvY29sKSB7XG4gICAgZGV0YWlscy5wcm90b2NvbCA9IHdpbmRvdyQxLmxvY2F0aW9uLnByb3RvY29sO1xuICB9XG5cbiAgaWYgKGFkZFRvQm9keSkge1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGl2KTtcbiAgfVxuXG4gIHJldHVybiBkZXRhaWxzO1xufTtcbi8qKlxuICogR2V0IGFic29sdXRlIHZlcnNpb24gb2YgcmVsYXRpdmUgVVJMLiBVc2VkIHRvIHRlbGwgRmxhc2ggdGhlIGNvcnJlY3QgVVJMLlxuICpcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICAgIHtzdHJpbmd9IHVybFxuICogICAgICAgICAgIFVSTCB0byBtYWtlIGFic29sdXRlXG4gKlxuICogQHJldHVybiAgIHtzdHJpbmd9XG4gKiAgICAgICAgICAgQWJzb2x1dGUgVVJMXG4gKlxuICogQHNlZSAgICAgIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDcwODMyL2dldHRpbmctYW4tYWJzb2x1dGUtdXJsLWZyb20tYS1yZWxhdGl2ZS1vbmUtaWU2LWlzc3VlXG4gKi9cblxudmFyIGdldEFic29sdXRlVVJMID0gZnVuY3Rpb24gZ2V0QWJzb2x1dGVVUkwodXJsKSB7XG4gIC8vIENoZWNrIGlmIGFic29sdXRlIFVSTFxuICBpZiAoIXVybC5tYXRjaCgvXmh0dHBzPzpcXC9cXC8vKSkge1xuICAgIC8vIENvbnZlcnQgdG8gYWJzb2x1dGUgVVJMLiBGbGFzaCBob3N0ZWQgb2ZmLXNpdGUgbmVlZHMgYW4gYWJzb2x1dGUgVVJMLlxuICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaXYuaW5uZXJIVE1MID0gXCI8YSBocmVmPVxcXCJcIiArIHVybCArIFwiXFxcIj54PC9hPlwiO1xuICAgIHVybCA9IGRpdi5maXJzdENoaWxkLmhyZWY7XG4gIH1cblxuICByZXR1cm4gdXJsO1xufTtcbi8qKlxuICogUmV0dXJucyB0aGUgZXh0ZW5zaW9uIG9mIHRoZSBwYXNzZWQgZmlsZSBuYW1lLiBJdCB3aWxsIHJldHVybiBhbiBlbXB0eSBzdHJpbmdcbiAqIGlmIHBhc3NlZCBhbiBpbnZhbGlkIHBhdGguXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gICAge3N0cmluZ30gcGF0aFxuICogICAgICAgICAgIFRoZSBmaWxlTmFtZSBwYXRoIGxpa2UgJy9wYXRoL3RvL2ZpbGUubXA0J1xuICpcbiAqIEByZXR1cm4gIHtzdHJpbmd9XG4gKiAgICAgICAgICAgVGhlIGV4dGVuc2lvbiBpbiBsb3dlciBjYXNlIG9yIGFuIGVtcHR5IHN0cmluZyBpZiBub1xuICogICAgICAgICAgIGV4dGVuc2lvbiBjb3VsZCBiZSBmb3VuZC5cbiAqL1xuXG52YXIgZ2V0RmlsZUV4dGVuc2lvbiA9IGZ1bmN0aW9uIGdldEZpbGVFeHRlbnNpb24ocGF0aCkge1xuICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIHNwbGl0UGF0aFJlID0gL14oXFwvPykoW1xcc1xcU10qPykoKD86XFwuezEsMn18W15cXC9dKz8pKFxcLihbXlxcLlxcL1xcP10rKSkpKD86W1xcL10qfFtcXD9dLiopJC9pO1xuICAgIHZhciBwYXRoUGFydHMgPSBzcGxpdFBhdGhSZS5leGVjKHBhdGgpO1xuXG4gICAgaWYgKHBhdGhQYXJ0cykge1xuICAgICAgcmV0dXJuIHBhdGhQYXJ0cy5wb3AoKS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAnJztcbn07XG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgdXJsIHBhc3NlZCBpcyBhIGNyb3NzIGRvbWFpbiByZXF1ZXN0IG9yIG5vdC5cbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAgICB7c3RyaW5nfSB1cmxcbiAqICAgICAgICAgICBUaGUgdXJsIHRvIGNoZWNrLlxuICpcbiAqIEByZXR1cm4gICB7Ym9vbGVhbn1cbiAqICAgICAgICAgICBXaGV0aGVyIGl0IGlzIGEgY3Jvc3MgZG9tYWluIHJlcXVlc3Qgb3Igbm90LlxuICovXG5cbnZhciBpc0Nyb3NzT3JpZ2luID0gZnVuY3Rpb24gaXNDcm9zc09yaWdpbih1cmwpIHtcbiAgdmFyIHdpbkxvYyA9IHdpbmRvdyQxLmxvY2F0aW9uO1xuICB2YXIgdXJsSW5mbyA9IHBhcnNlVXJsKHVybCk7IC8vIElFOCBwcm90b2NvbCByZWxhdGl2ZSB1cmxzIHdpbGwgcmV0dXJuICc6JyBmb3IgcHJvdG9jb2xcblxuICB2YXIgc3JjUHJvdG9jb2wgPSB1cmxJbmZvLnByb3RvY29sID09PSAnOicgPyB3aW5Mb2MucHJvdG9jb2wgOiB1cmxJbmZvLnByb3RvY29sOyAvLyBDaGVjayBpZiB1cmwgaXMgZm9yIGFub3RoZXIgZG9tYWluL29yaWdpblxuICAvLyBJRTggZG9lc24ndCBrbm93IGxvY2F0aW9uLm9yaWdpbiwgc28gd2Ugd29uJ3QgcmVseSBvbiBpdCBoZXJlXG5cbiAgdmFyIGNyb3NzT3JpZ2luID0gc3JjUHJvdG9jb2wgKyB1cmxJbmZvLmhvc3QgIT09IHdpbkxvYy5wcm90b2NvbCArIHdpbkxvYy5ob3N0O1xuICByZXR1cm4gY3Jvc3NPcmlnaW47XG59O1xuXG52YXIgVXJsID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBwYXJzZVVybDogcGFyc2VVcmwsXG4gIGdldEFic29sdXRlVVJMOiBnZXRBYnNvbHV0ZVVSTCxcbiAgZ2V0RmlsZUV4dGVuc2lvbjogZ2V0RmlsZUV4dGVuc2lvbixcbiAgaXNDcm9zc09yaWdpbjogaXNDcm9zc09yaWdpblxufSk7XG5cbi8qKlxuICogVGFrZXMgYSB3ZWJ2dHQgZmlsZSBjb250ZW50cyBhbmQgcGFyc2VzIGl0IGludG8gY3Vlc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmNDb250ZW50XG4gKiAgICAgICAgd2ViVlRUIGZpbGUgY29udGVudHNcbiAqXG4gKiBAcGFyYW0ge1RleHRUcmFja30gdHJhY2tcbiAqICAgICAgICBUZXh0VHJhY2sgdG8gYWRkIGN1ZXMgdG8uIEN1ZXMgY29tZSBmcm9tIHRoZSBzcmNDb250ZW50LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cblxudmFyIHBhcnNlQ3VlcyA9IGZ1bmN0aW9uIHBhcnNlQ3VlcyhzcmNDb250ZW50LCB0cmFjaykge1xuICB2YXIgcGFyc2VyID0gbmV3IHdpbmRvdyQxLldlYlZUVC5QYXJzZXIod2luZG93JDEsIHdpbmRvdyQxLnZ0dGpzLCB3aW5kb3ckMS5XZWJWVFQuU3RyaW5nRGVjb2RlcigpKTtcbiAgdmFyIGVycm9ycyA9IFtdO1xuXG4gIHBhcnNlci5vbmN1ZSA9IGZ1bmN0aW9uIChjdWUpIHtcbiAgICB0cmFjay5hZGRDdWUoY3VlKTtcbiAgfTtcblxuICBwYXJzZXIub25wYXJzaW5nZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICBlcnJvcnMucHVzaChlcnJvcik7XG4gIH07XG5cbiAgcGFyc2VyLm9uZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgdHJhY2sudHJpZ2dlcih7XG4gICAgICB0eXBlOiAnbG9hZGVkZGF0YScsXG4gICAgICB0YXJnZXQ6IHRyYWNrXG4gICAgfSk7XG4gIH07XG5cbiAgcGFyc2VyLnBhcnNlKHNyY0NvbnRlbnQpO1xuXG4gIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xuICAgIGlmICh3aW5kb3ckMS5jb25zb2xlICYmIHdpbmRvdyQxLmNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQpIHtcbiAgICAgIHdpbmRvdyQxLmNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQoXCJUZXh0IFRyYWNrIHBhcnNpbmcgZXJyb3JzIGZvciBcIiArIHRyYWNrLnNyYyk7XG4gICAgfVxuXG4gICAgZXJyb3JzLmZvckVhY2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICByZXR1cm4gbG9nLmVycm9yKGVycm9yKTtcbiAgICB9KTtcblxuICAgIGlmICh3aW5kb3ckMS5jb25zb2xlICYmIHdpbmRvdyQxLmNvbnNvbGUuZ3JvdXBFbmQpIHtcbiAgICAgIHdpbmRvdyQxLmNvbnNvbGUuZ3JvdXBFbmQoKTtcbiAgICB9XG4gIH1cblxuICBwYXJzZXIuZmx1c2goKTtcbn07XG4vKipcbiAqIExvYWQgYSBgVGV4dFRyYWNrYCBmcm9tIGEgc3BlY2lmaWVkIHVybC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3JjXG4gKiAgICAgICAgVXJsIHRvIGxvYWQgdHJhY2sgZnJvbS5cbiAqXG4gKiBAcGFyYW0ge1RleHRUcmFja30gdHJhY2tcbiAqICAgICAgICBUcmFjayB0byBhZGQgY3VlcyB0by4gQ29tZXMgZnJvbSB0aGUgY29udGVudCBhdCB0aGUgZW5kIG9mIGB1cmxgLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cblxuXG52YXIgbG9hZFRyYWNrID0gZnVuY3Rpb24gbG9hZFRyYWNrKHNyYywgdHJhY2spIHtcbiAgdmFyIG9wdHMgPSB7XG4gICAgdXJpOiBzcmNcbiAgfTtcbiAgdmFyIGNyb3NzT3JpZ2luID0gaXNDcm9zc09yaWdpbihzcmMpO1xuXG4gIGlmIChjcm9zc09yaWdpbikge1xuICAgIG9wdHMuY29ycyA9IGNyb3NzT3JpZ2luO1xuICB9XG5cbiAgeGhyKG9wdHMsIGJpbmQodGhpcywgZnVuY3Rpb24gKGVyciwgcmVzcG9uc2UsIHJlc3BvbnNlQm9keSkge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHJldHVybiBsb2cuZXJyb3IoZXJyLCByZXNwb25zZSk7XG4gICAgfVxuXG4gICAgdHJhY2subG9hZGVkXyA9IHRydWU7IC8vIE1ha2Ugc3VyZSB0aGF0IHZ0dGpzIGhhcyBsb2FkZWQsIG90aGVyd2lzZSwgd2FpdCB0aWxsIGl0IGZpbmlzaGVkIGxvYWRpbmdcbiAgICAvLyBOT1RFOiB0aGlzIGlzIG9ubHkgdXNlZCBmb3IgdGhlIGFsdC92aWRlby5ub3Z0dC5qcyBidWlsZFxuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3ckMS5XZWJWVFQgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGlmICh0cmFjay50ZWNoXykge1xuICAgICAgICAvLyB0byBwcmV2ZW50IHVzZSBiZWZvcmUgZGVmaW5lIGVzbGludCBlcnJvciwgd2UgZGVmaW5lIGxvYWRIYW5kbGVyXG4gICAgICAgIC8vIGFzIGEgbGV0IGhlcmVcbiAgICAgICAgdmFyIGxvYWRIYW5kbGVyO1xuXG4gICAgICAgIHZhciBlcnJvckhhbmRsZXIgPSBmdW5jdGlvbiBlcnJvckhhbmRsZXIoKSB7XG4gICAgICAgICAgbG9nLmVycm9yKFwidnR0anMgZmFpbGVkIHRvIGxvYWQsIHN0b3BwaW5nIHRyeWluZyB0byBwcm9jZXNzIFwiICsgdHJhY2suc3JjKTtcbiAgICAgICAgICB0cmFjay50ZWNoXy5vZmYoJ3Z0dGpzbG9hZGVkJywgbG9hZEhhbmRsZXIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGxvYWRIYW5kbGVyID0gZnVuY3Rpb24gbG9hZEhhbmRsZXIoKSB7XG4gICAgICAgICAgdHJhY2sudGVjaF8ub2ZmKCd2dHRqc2Vycm9yJywgZXJyb3JIYW5kbGVyKTtcbiAgICAgICAgICByZXR1cm4gcGFyc2VDdWVzKHJlc3BvbnNlQm9keSwgdHJhY2spO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRyYWNrLnRlY2hfLm9uZSgndnR0anNsb2FkZWQnLCBsb2FkSGFuZGxlcik7XG4gICAgICAgIHRyYWNrLnRlY2hfLm9uZSgndnR0anNlcnJvcicsIGVycm9ySGFuZGxlcik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcnNlQ3VlcyhyZXNwb25zZUJvZHksIHRyYWNrKTtcbiAgICB9XG4gIH0pKTtcbn07XG4vKipcbiAqIEEgcmVwcmVzZW50YXRpb24gb2YgYSBzaW5nbGUgYFRleHRUcmFja2AuXG4gKlxuICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZW1iZWRkZWQtY29udGVudC5odG1sI3RleHR0cmFja31cbiAqIEBleHRlbmRzIFRyYWNrXG4gKi9cblxuXG52YXIgVGV4dFRyYWNrID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfVHJhY2spIHtcbiAgX2luaGVyaXRzTG9vc2UoVGV4dFRyYWNrLCBfVHJhY2spO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnM9e31cbiAgICogICAgICAgIE9iamVjdCBvZiBvcHRpb24gbmFtZXMgYW5kIHZhbHVlc1xuICAgKlxuICAgKiBAcGFyYW0ge1RlY2h9IG9wdGlvbnMudGVjaFxuICAgKiAgICAgICAgQSByZWZlcmVuY2UgdG8gdGhlIHRlY2ggdGhhdCBvd25zIHRoaXMgVGV4dFRyYWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge1RleHRUcmFja35LaW5kfSBbb3B0aW9ucy5raW5kPSdzdWJ0aXRsZXMnXVxuICAgKiAgICAgICAgQSB2YWxpZCB0ZXh0IHRyYWNrIGtpbmQuXG4gICAqXG4gICAqIEBwYXJhbSB7VGV4dFRyYWNrfk1vZGV9IFtvcHRpb25zLm1vZGU9J2Rpc2FibGVkJ11cbiAgICogICAgICAgIEEgdmFsaWQgdGV4dCB0cmFjayBtb2RlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuaWQ9J3Zqc190cmFja18nICsgR3VpZC5uZXdHVUlEKCldXG4gICAqICAgICAgICBBIHVuaXF1ZSBpZCBmb3IgdGhpcyBUZXh0VHJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYWJlbD0nJ11cbiAgICogICAgICAgIFRoZSBtZW51IGxhYmVsIGZvciB0aGlzIHRyYWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubGFuZ3VhZ2U9JyddXG4gICAqICAgICAgICBBIHZhbGlkIHR3byBjaGFyYWN0ZXIgbGFuZ3VhZ2UgY29kZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnNyY2xhbmc9JyddXG4gICAqICAgICAgICBBIHZhbGlkIHR3byBjaGFyYWN0ZXIgbGFuZ3VhZ2UgY29kZS4gQW4gYWx0ZXJuYXRpdmUsIGJ1dCBkZXByaW9yaXRpemVkXG4gICAqICAgICAgICB2ZXJzaW9uIG9mIGBvcHRpb25zLmxhbmd1YWdlYFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuc3JjXVxuICAgKiAgICAgICAgQSB1cmwgdG8gVGV4dFRyYWNrIGN1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuZGVmYXVsdF1cbiAgICogICAgICAgIElmIHRoaXMgdHJhY2sgc2hvdWxkIGRlZmF1bHQgdG8gb24gb3Igb2ZmLlxuICAgKi9cbiAgZnVuY3Rpb24gVGV4dFRyYWNrKG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgaWYgKCFvcHRpb25zLnRlY2gpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQSB0ZWNoIHdhcyBub3QgcHJvdmlkZWQuJyk7XG4gICAgfVxuXG4gICAgdmFyIHNldHRpbmdzID0gbWVyZ2VPcHRpb25zKG9wdGlvbnMsIHtcbiAgICAgIGtpbmQ6IFRleHRUcmFja0tpbmRbb3B0aW9ucy5raW5kXSB8fCAnc3VidGl0bGVzJyxcbiAgICAgIGxhbmd1YWdlOiBvcHRpb25zLmxhbmd1YWdlIHx8IG9wdGlvbnMuc3JjbGFuZyB8fCAnJ1xuICAgIH0pO1xuICAgIHZhciBtb2RlID0gVGV4dFRyYWNrTW9kZVtzZXR0aW5ncy5tb2RlXSB8fCAnZGlzYWJsZWQnO1xuICAgIHZhciBkZWZhdWx0XyA9IHNldHRpbmdzLmRlZmF1bHQ7XG5cbiAgICBpZiAoc2V0dGluZ3Mua2luZCA9PT0gJ21ldGFkYXRhJyB8fCBzZXR0aW5ncy5raW5kID09PSAnY2hhcHRlcnMnKSB7XG4gICAgICBtb2RlID0gJ2hpZGRlbic7XG4gICAgfVxuXG4gICAgX3RoaXMgPSBfVHJhY2suY2FsbCh0aGlzLCBzZXR0aW5ncykgfHwgdGhpcztcbiAgICBfdGhpcy50ZWNoXyA9IHNldHRpbmdzLnRlY2g7XG4gICAgX3RoaXMuY3Vlc18gPSBbXTtcbiAgICBfdGhpcy5hY3RpdmVDdWVzXyA9IFtdO1xuICAgIHZhciBjdWVzID0gbmV3IFRleHRUcmFja0N1ZUxpc3QoX3RoaXMuY3Vlc18pO1xuICAgIHZhciBhY3RpdmVDdWVzID0gbmV3IFRleHRUcmFja0N1ZUxpc3QoX3RoaXMuYWN0aXZlQ3Vlc18pO1xuICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XG4gICAgdmFyIHRpbWV1cGRhdGVIYW5kbGVyID0gYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gQWNjZXNzaW5nIHRoaXMuYWN0aXZlQ3VlcyBmb3IgdGhlIHNpZGUtZWZmZWN0cyBvZiB1cGRhdGluZyBpdHNlbGZcbiAgICAgIC8vIGR1ZSB0byBpdHMgbmF0dXJlIGFzIGEgZ2V0dGVyIGZ1bmN0aW9uLiBEbyBub3QgcmVtb3ZlIG9yIGN1ZXMgd2lsbFxuICAgICAgLy8gc3RvcCB1cGRhdGluZyFcbiAgICAgIC8vIFVzZSB0aGUgc2V0dGVyIHRvIHByZXZlbnQgZGVsZXRpb24gZnJvbSB1Z2xpZnkgKHB1cmVfZ2V0dGVycyBydWxlKVxuICAgICAgdGhpcy5hY3RpdmVDdWVzID0gdGhpcy5hY3RpdmVDdWVzO1xuXG4gICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2N1ZWNoYW5nZScpO1xuICAgICAgICBjaGFuZ2VkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAobW9kZSAhPT0gJ2Rpc2FibGVkJykge1xuICAgICAgX3RoaXMudGVjaF8ucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy50ZWNoXy5vbigndGltZXVwZGF0ZScsIHRpbWV1cGRhdGVIYW5kbGVyKTtcbiAgICAgIH0sIHRydWUpO1xuICAgIH1cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCB7XG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBUZXh0VHJhY2tcbiAgICAgICAqIEBtZW1iZXIge2Jvb2xlYW59IGRlZmF1bHRcbiAgICAgICAqICAgICAgICAgSWYgdGhpcyB0cmFjayB3YXMgc2V0IHRvIGJlIG9uIG9yIG9mZiBieSBkZWZhdWx0LiBDYW5ub3QgYmUgY2hhbmdlZCBhZnRlclxuICAgICAgICogICAgICAgICBjcmVhdGlvbi5cbiAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICpcbiAgICAgICAqIEByZWFkb25seVxuICAgICAgICovXG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgIHJldHVybiBkZWZhdWx0XztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoKSB7fVxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgVGV4dFRyYWNrXG4gICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IG1vZGVcbiAgICAgICAqICAgICAgICAgU2V0IHRoZSBtb2RlIG9mIHRoaXMgVGV4dFRyYWNrIHRvIGEgdmFsaWQge0BsaW5rIFRleHRUcmFja35Nb2RlfS4gV2lsbFxuICAgICAgICogICAgICAgICBub3QgYmUgc2V0IGlmIHNldHRpbmcgdG8gYW4gaW52YWxpZCBtb2RlLlxuICAgICAgICogQGluc3RhbmNlXG4gICAgICAgKlxuICAgICAgICogQGZpcmVzIFRleHRUcmFjayNtb2RlY2hhbmdlXG4gICAgICAgKi9cbiAgICAgIG1vZGU6IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIG1vZGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld01vZGUpIHtcbiAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgIGlmICghVGV4dFRyYWNrTW9kZVtuZXdNb2RlXSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1vZGUgPSBuZXdNb2RlO1xuXG4gICAgICAgICAgaWYgKG1vZGUgIT09ICdkaXNhYmxlZCcpIHtcbiAgICAgICAgICAgIHRoaXMudGVjaF8ucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBfdGhpczIudGVjaF8ub24oJ3RpbWV1cGRhdGUnLCB0aW1ldXBkYXRlSGFuZGxlcik7XG4gICAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50ZWNoXy5vZmYoJ3RpbWV1cGRhdGUnLCB0aW1ldXBkYXRlSGFuZGxlcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEFuIGV2ZW50IHRoYXQgZmlyZXMgd2hlbiBtb2RlIGNoYW5nZXMgb24gdGhpcyB0cmFjay4gVGhpcyBhbGxvd3NcbiAgICAgICAgICAgKiB0aGUgVGV4dFRyYWNrTGlzdCB0aGF0IGhvbGRzIHRoaXMgdHJhY2sgdG8gYWN0IGFjY29yZGluZ2x5LlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogPiBOb3RlOiBUaGlzIGlzIG5vdCBwYXJ0IG9mIHRoZSBzcGVjIVxuICAgICAgICAgICAqXG4gICAgICAgICAgICogQGV2ZW50IFRleHRUcmFjayNtb2RlY2hhbmdlXG4gICAgICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICAgICAqL1xuXG5cbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ21vZGVjaGFuZ2UnKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgVGV4dFRyYWNrXG4gICAgICAgKiBAbWVtYmVyIHtUZXh0VHJhY2tDdWVMaXN0fSBjdWVzXG4gICAgICAgKiAgICAgICAgIFRoZSB0ZXh0IHRyYWNrIGN1ZSBsaXN0IGZvciB0aGlzIFRleHRUcmFjay5cbiAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICovXG4gICAgICBjdWVzOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgIGlmICghdGhpcy5sb2FkZWRfKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gY3VlcztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoKSB7fVxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgVGV4dFRyYWNrXG4gICAgICAgKiBAbWVtYmVyIHtUZXh0VHJhY2tDdWVMaXN0fSBhY3RpdmVDdWVzXG4gICAgICAgKiAgICAgICAgIFRoZSBsaXN0IHRleHQgdHJhY2sgY3VlcyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlIGZvciB0aGlzIFRleHRUcmFjay5cbiAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICovXG4gICAgICBhY3RpdmVDdWVzOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgIGlmICghdGhpcy5sb2FkZWRfKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9IC8vIG5vdGhpbmcgdG8gZG9cblxuXG4gICAgICAgICAgaWYgKHRoaXMuY3Vlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBhY3RpdmVDdWVzO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBjdCA9IHRoaXMudGVjaF8uY3VycmVudFRpbWUoKTtcbiAgICAgICAgICB2YXIgYWN0aXZlID0gW107XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMuY3Vlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjdWUgPSB0aGlzLmN1ZXNbaV07XG5cbiAgICAgICAgICAgIGlmIChjdWUuc3RhcnRUaW1lIDw9IGN0ICYmIGN1ZS5lbmRUaW1lID49IGN0KSB7XG4gICAgICAgICAgICAgIGFjdGl2ZS5wdXNoKGN1ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1ZS5zdGFydFRpbWUgPT09IGN1ZS5lbmRUaW1lICYmIGN1ZS5zdGFydFRpbWUgPD0gY3QgJiYgY3VlLnN0YXJ0VGltZSArIDAuNSA+PSBjdCkge1xuICAgICAgICAgICAgICBhY3RpdmUucHVzaChjdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNoYW5nZWQgPSBmYWxzZTtcblxuICAgICAgICAgIGlmIChhY3RpdmUubGVuZ3RoICE9PSB0aGlzLmFjdGl2ZUN1ZXNfLmxlbmd0aCkge1xuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhY3RpdmUubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUN1ZXNfLmluZGV4T2YoYWN0aXZlW19pXSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmFjdGl2ZUN1ZXNfID0gYWN0aXZlO1xuICAgICAgICAgIGFjdGl2ZUN1ZXMuc2V0Q3Vlc18odGhpcy5hY3RpdmVDdWVzXyk7XG4gICAgICAgICAgcmV0dXJuIGFjdGl2ZUN1ZXM7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIC8hXFwgS2VlcCB0aGlzIHNldHRlciBlbXB0eSAoc2VlIHRoZSB0aW1ldXBkYXRlIGhhbmRsZXIgYWJvdmUpXG4gICAgICAgIHNldDogZnVuY3Rpb24gc2V0KCkge31cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChzZXR0aW5ncy5zcmMpIHtcbiAgICAgIF90aGlzLnNyYyA9IHNldHRpbmdzLnNyYztcbiAgICAgIGxvYWRUcmFjayhzZXR0aW5ncy5zcmMsIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgX3RoaXMubG9hZGVkXyA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgYSBjdWUgdG8gdGhlIGludGVybmFsIGxpc3Qgb2YgY3Vlcy5cbiAgICpcbiAgICogQHBhcmFtIHtUZXh0VHJhY2t+Q3VlfSBjdWVcbiAgICogICAgICAgIFRoZSBjdWUgdG8gYWRkIHRvIG91ciBpbnRlcm5hbCBsaXN0XG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IFRleHRUcmFjay5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmFkZEN1ZSA9IGZ1bmN0aW9uIGFkZEN1ZShvcmlnaW5hbEN1ZSkge1xuICAgIHZhciBjdWUgPSBvcmlnaW5hbEN1ZTtcblxuICAgIGlmICh3aW5kb3ckMS52dHRqcyAmJiAhKG9yaWdpbmFsQ3VlIGluc3RhbmNlb2Ygd2luZG93JDEudnR0anMuVlRUQ3VlKSkge1xuICAgICAgY3VlID0gbmV3IHdpbmRvdyQxLnZ0dGpzLlZUVEN1ZShvcmlnaW5hbEN1ZS5zdGFydFRpbWUsIG9yaWdpbmFsQ3VlLmVuZFRpbWUsIG9yaWdpbmFsQ3VlLnRleHQpO1xuXG4gICAgICBmb3IgKHZhciBwcm9wIGluIG9yaWdpbmFsQ3VlKSB7XG4gICAgICAgIGlmICghKHByb3AgaW4gY3VlKSkge1xuICAgICAgICAgIGN1ZVtwcm9wXSA9IG9yaWdpbmFsQ3VlW3Byb3BdO1xuICAgICAgICB9XG4gICAgICB9IC8vIG1ha2Ugc3VyZSB0aGF0IGBpZGAgaXMgY29waWVkIG92ZXJcblxuXG4gICAgICBjdWUuaWQgPSBvcmlnaW5hbEN1ZS5pZDtcbiAgICAgIGN1ZS5vcmlnaW5hbEN1ZV8gPSBvcmlnaW5hbEN1ZTtcbiAgICB9XG5cbiAgICB2YXIgdHJhY2tzID0gdGhpcy50ZWNoXy50ZXh0VHJhY2tzKCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRyYWNrc1tpXSAhPT0gdGhpcykge1xuICAgICAgICB0cmFja3NbaV0ucmVtb3ZlQ3VlKGN1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5jdWVzXy5wdXNoKGN1ZSk7XG4gICAgdGhpcy5jdWVzLnNldEN1ZXNfKHRoaXMuY3Vlc18pO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYSBjdWUgZnJvbSBvdXIgaW50ZXJuYWwgbGlzdFxuICAgKlxuICAgKiBAcGFyYW0ge1RleHRUcmFja35DdWV9IHJlbW92ZUN1ZVxuICAgKiAgICAgICAgVGhlIGN1ZSB0byByZW1vdmUgZnJvbSBvdXIgaW50ZXJuYWwgbGlzdFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5yZW1vdmVDdWUgPSBmdW5jdGlvbiByZW1vdmVDdWUoX3JlbW92ZUN1ZSkge1xuICAgIHZhciBpID0gdGhpcy5jdWVzXy5sZW5ndGg7XG5cbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YXIgY3VlID0gdGhpcy5jdWVzX1tpXTtcblxuICAgICAgaWYgKGN1ZSA9PT0gX3JlbW92ZUN1ZSB8fCBjdWUub3JpZ2luYWxDdWVfICYmIGN1ZS5vcmlnaW5hbEN1ZV8gPT09IF9yZW1vdmVDdWUpIHtcbiAgICAgICAgdGhpcy5jdWVzXy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHRoaXMuY3Vlcy5zZXRDdWVzXyh0aGlzLmN1ZXNfKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBUZXh0VHJhY2s7XG59KFRyYWNrKTtcbi8qKlxuICogY3VlY2hhbmdlIC0gT25lIG9yIG1vcmUgY3VlcyBpbiB0aGUgdHJhY2sgaGF2ZSBiZWNvbWUgYWN0aXZlIG9yIHN0b3BwZWQgYmVpbmcgYWN0aXZlLlxuICovXG5cblxuVGV4dFRyYWNrLnByb3RvdHlwZS5hbGxvd2VkRXZlbnRzXyA9IHtcbiAgY3VlY2hhbmdlOiAnY3VlY2hhbmdlJ1xufTtcblxuLyoqXG4gKiBBIHJlcHJlc2VudGF0aW9uIG9mIGEgc2luZ2xlIGBBdWRpb1RyYWNrYC4gSWYgaXQgaXMgcGFydCBvZiBhbiB7QGxpbmsgQXVkaW9UcmFja0xpc3R9XG4gKiBvbmx5IG9uZSBgQXVkaW9UcmFja2AgaW4gdGhlIGxpc3Qgd2lsbCBiZSBlbmFibGVkIGF0IGEgdGltZS5cbiAqXG4gKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9lbWJlZGRlZC1jb250ZW50Lmh0bWwjYXVkaW90cmFja31cbiAqIEBleHRlbmRzIFRyYWNrXG4gKi9cblxudmFyIEF1ZGlvVHJhY2sgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9UcmFjaykge1xuICBfaW5oZXJpdHNMb29zZShBdWRpb1RyYWNrLCBfVHJhY2spO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XVxuICAgKiAgICAgICAgT2JqZWN0IG9mIG9wdGlvbiBuYW1lcyBhbmQgdmFsdWVzXG4gICAqXG4gICAqIEBwYXJhbSB7QXVkaW9UcmFja35LaW5kfSBbb3B0aW9ucy5raW5kPScnXVxuICAgKiAgICAgICAgQSB2YWxpZCBhdWRpbyB0cmFjayBraW5kXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5pZD0ndmpzX3RyYWNrXycgKyBHdWlkLm5ld0dVSUQoKV1cbiAgICogICAgICAgIEEgdW5pcXVlIGlkIGZvciB0aGlzIEF1ZGlvVHJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYWJlbD0nJ11cbiAgICogICAgICAgIFRoZSBtZW51IGxhYmVsIGZvciB0aGlzIHRyYWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubGFuZ3VhZ2U9JyddXG4gICAqICAgICAgICBBIHZhbGlkIHR3byBjaGFyYWN0ZXIgbGFuZ3VhZ2UgY29kZS5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5lbmFibGVkXVxuICAgKiAgICAgICAgSWYgdGhpcyB0cmFjayBpcyB0aGUgb25lIHRoYXQgaXMgY3VycmVudGx5IHBsYXlpbmcuIElmIHRoaXMgdHJhY2sgaXMgcGFydCBvZlxuICAgKiAgICAgICAgYW4ge0BsaW5rIEF1ZGlvVHJhY2tMaXN0fSwgb25seSBvbmUge0BsaW5rIEF1ZGlvVHJhY2t9IHdpbGwgYmUgZW5hYmxlZC5cbiAgICovXG4gIGZ1bmN0aW9uIEF1ZGlvVHJhY2sob3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgc2V0dGluZ3MgPSBtZXJnZU9wdGlvbnMob3B0aW9ucywge1xuICAgICAga2luZDogQXVkaW9UcmFja0tpbmRbb3B0aW9ucy5raW5kXSB8fCAnJ1xuICAgIH0pO1xuICAgIF90aGlzID0gX1RyYWNrLmNhbGwodGhpcywgc2V0dGluZ3MpIHx8IHRoaXM7XG4gICAgdmFyIGVuYWJsZWQgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgQXVkaW9UcmFja1xuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59IGVuYWJsZWRcbiAgICAgKiAgICAgICAgIElmIHRoaXMgYEF1ZGlvVHJhY2tgIGlzIGVuYWJsZWQgb3Igbm90LiBXaGVuIHNldHRpbmcgdGhpcyB3aWxsXG4gICAgICogICAgICAgICBmaXJlIHtAbGluayBBdWRpb1RyYWNrI2VuYWJsZWRjaGFuZ2V9IGlmIHRoZSBzdGF0ZSBvZiBlbmFibGVkIGlzIGNoYW5nZWQuXG4gICAgICogQGluc3RhbmNlXG4gICAgICpcbiAgICAgKiBAZmlyZXMgVmlkZW9UcmFjayNzZWxlY3RlZGNoYW5nZVxuICAgICAqL1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCAnZW5hYmxlZCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gZW5hYmxlZDtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdFbmFibGVkKSB7XG4gICAgICAgIC8vIGFuIGludmFsaWQgb3IgdW5jaGFuZ2VkIHZhbHVlXG4gICAgICAgIGlmICh0eXBlb2YgbmV3RW5hYmxlZCAhPT0gJ2Jvb2xlYW4nIHx8IG5ld0VuYWJsZWQgPT09IGVuYWJsZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBlbmFibGVkID0gbmV3RW5hYmxlZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGV2ZW50IHRoYXQgZmlyZXMgd2hlbiBlbmFibGVkIGNoYW5nZXMgb24gdGhpcyB0cmFjay4gVGhpcyBhbGxvd3NcbiAgICAgICAgICogdGhlIEF1ZGlvVHJhY2tMaXN0IHRoYXQgaG9sZHMgdGhpcyB0cmFjayB0byBhY3QgYWNjb3JkaW5nbHkuXG4gICAgICAgICAqXG4gICAgICAgICAqID4gTm90ZTogVGhpcyBpcyBub3QgcGFydCBvZiB0aGUgc3BlYyEgTmF0aXZlIHRyYWNrcyB3aWxsIGRvXG4gICAgICAgICAqICAgICAgICAgdGhpcyBpbnRlcm5hbGx5IHdpdGhvdXQgYW4gZXZlbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBBdWRpb1RyYWNrI2VuYWJsZWRjaGFuZ2VcbiAgICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICAgKi9cblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2VuYWJsZWRjaGFuZ2UnKTtcbiAgICAgIH1cbiAgICB9KTsgLy8gaWYgdGhlIHVzZXIgc2V0cyB0aGlzIHRyYWNrIHRvIHNlbGVjdGVkIHRoZW5cbiAgICAvLyBzZXQgc2VsZWN0ZWQgdG8gdGhhdCB0cnVlIHZhbHVlIG90aGVyd2lzZVxuICAgIC8vIHdlIGtlZXAgaXQgZmFsc2VcblxuICAgIGlmIChzZXR0aW5ncy5lbmFibGVkKSB7XG4gICAgICBfdGhpcy5lbmFibGVkID0gc2V0dGluZ3MuZW5hYmxlZDtcbiAgICB9XG5cbiAgICBfdGhpcy5sb2FkZWRfID0gdHJ1ZTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICByZXR1cm4gQXVkaW9UcmFjaztcbn0oVHJhY2spO1xuXG4vKipcbiAqIEEgcmVwcmVzZW50YXRpb24gb2YgYSBzaW5nbGUgYFZpZGVvVHJhY2tgLlxuICpcbiAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCN2aWRlb3RyYWNrfVxuICogQGV4dGVuZHMgVHJhY2tcbiAqL1xuXG52YXIgVmlkZW9UcmFjayA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX1RyYWNrKSB7XG4gIF9pbmhlcml0c0xvb3NlKFZpZGVvVHJhY2ssIF9UcmFjayk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dXG4gICAqICAgICAgICBPYmplY3Qgb2Ygb3B0aW9uIG5hbWVzIGFuZCB2YWx1ZXNcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmtpbmQ9JyddXG4gICAqICAgICAgICBBIHZhbGlkIHtAbGluayBWaWRlb1RyYWNrfktpbmR9XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5pZD0ndmpzX3RyYWNrXycgKyBHdWlkLm5ld0dVSUQoKV1cbiAgICogICAgICAgIEEgdW5pcXVlIGlkIGZvciB0aGlzIEF1ZGlvVHJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYWJlbD0nJ11cbiAgICogICAgICAgIFRoZSBtZW51IGxhYmVsIGZvciB0aGlzIHRyYWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubGFuZ3VhZ2U9JyddXG4gICAqICAgICAgICBBIHZhbGlkIHR3byBjaGFyYWN0ZXIgbGFuZ3VhZ2UgY29kZS5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5zZWxlY3RlZF1cbiAgICogICAgICAgIElmIHRoaXMgdHJhY2sgaXMgdGhlIG9uZSB0aGF0IGlzIGN1cnJlbnRseSBwbGF5aW5nLlxuICAgKi9cbiAgZnVuY3Rpb24gVmlkZW9UcmFjayhvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIHZhciBzZXR0aW5ncyA9IG1lcmdlT3B0aW9ucyhvcHRpb25zLCB7XG4gICAgICBraW5kOiBWaWRlb1RyYWNrS2luZFtvcHRpb25zLmtpbmRdIHx8ICcnXG4gICAgfSk7XG4gICAgX3RoaXMgPSBfVHJhY2suY2FsbCh0aGlzLCBzZXR0aW5ncykgfHwgdGhpcztcbiAgICB2YXIgc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgVmlkZW9UcmFja1xuICAgICAqIEBtZW1iZXIge2Jvb2xlYW59IHNlbGVjdGVkXG4gICAgICogICAgICAgICBJZiB0aGlzIGBWaWRlb1RyYWNrYCBpcyBzZWxlY3RlZCBvciBub3QuIFdoZW4gc2V0dGluZyB0aGlzIHdpbGxcbiAgICAgKiAgICAgICAgIGZpcmUge0BsaW5rIFZpZGVvVHJhY2sjc2VsZWN0ZWRjaGFuZ2V9IGlmIHRoZSBzdGF0ZSBvZiBzZWxlY3RlZCBjaGFuZ2VkLlxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqXG4gICAgICogQGZpcmVzIFZpZGVvVHJhY2sjc2VsZWN0ZWRjaGFuZ2VcbiAgICAgKi9cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgJ3NlbGVjdGVkJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBzZWxlY3RlZDtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdTZWxlY3RlZCkge1xuICAgICAgICAvLyBhbiBpbnZhbGlkIG9yIHVuY2hhbmdlZCB2YWx1ZVxuICAgICAgICBpZiAodHlwZW9mIG5ld1NlbGVjdGVkICE9PSAnYm9vbGVhbicgfHwgbmV3U2VsZWN0ZWQgPT09IHNlbGVjdGVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZWN0ZWQgPSBuZXdTZWxlY3RlZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGV2ZW50IHRoYXQgZmlyZXMgd2hlbiBzZWxlY3RlZCBjaGFuZ2VzIG9uIHRoaXMgdHJhY2suIFRoaXMgYWxsb3dzXG4gICAgICAgICAqIHRoZSBWaWRlb1RyYWNrTGlzdCB0aGF0IGhvbGRzIHRoaXMgdHJhY2sgdG8gYWN0IGFjY29yZGluZ2x5LlxuICAgICAgICAgKlxuICAgICAgICAgKiA+IE5vdGU6IFRoaXMgaXMgbm90IHBhcnQgb2YgdGhlIHNwZWMhIE5hdGl2ZSB0cmFja3Mgd2lsbCBkb1xuICAgICAgICAgKiAgICAgICAgIHRoaXMgaW50ZXJuYWxseSB3aXRob3V0IGFuIGV2ZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgVmlkZW9UcmFjayNzZWxlY3RlZGNoYW5nZVxuICAgICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgICAqL1xuXG4gICAgICAgIHRoaXMudHJpZ2dlcignc2VsZWN0ZWRjaGFuZ2UnKTtcbiAgICAgIH1cbiAgICB9KTsgLy8gaWYgdGhlIHVzZXIgc2V0cyB0aGlzIHRyYWNrIHRvIHNlbGVjdGVkIHRoZW5cbiAgICAvLyBzZXQgc2VsZWN0ZWQgdG8gdGhhdCB0cnVlIHZhbHVlIG90aGVyd2lzZVxuICAgIC8vIHdlIGtlZXAgaXQgZmFsc2VcblxuICAgIGlmIChzZXR0aW5ncy5zZWxlY3RlZCkge1xuICAgICAgX3RoaXMuc2VsZWN0ZWQgPSBzZXR0aW5ncy5zZWxlY3RlZDtcbiAgICB9XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICByZXR1cm4gVmlkZW9UcmFjaztcbn0oVHJhY2spO1xuXG4vKipcbiAqIEBtZW1iZXJvZiBIVE1MVHJhY2tFbGVtZW50XG4gKiBAdHlwZWRlZiB7SFRNTFRyYWNrRWxlbWVudH5SZWFkeVN0YXRlfVxuICogQGVudW0ge251bWJlcn1cbiAqL1xuXG52YXIgTk9ORSA9IDA7XG52YXIgTE9BRElORyA9IDE7XG52YXIgTE9BREVEID0gMjtcbnZhciBFUlJPUiA9IDM7XG4vKipcbiAqIEEgc2luZ2xlIHRyYWNrIHJlcHJlc2VudGVkIGluIHRoZSBET00uXG4gKlxuICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZW1iZWRkZWQtY29udGVudC5odG1sI2h0bWx0cmFja2VsZW1lbnR9XG4gKiBAZXh0ZW5kcyBFdmVudFRhcmdldFxuICovXG5cbnZhciBIVE1MVHJhY2tFbGVtZW50ID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfRXZlbnRUYXJnZXQpIHtcbiAgX2luaGVyaXRzTG9vc2UoSFRNTFRyYWNrRWxlbWVudCwgX0V2ZW50VGFyZ2V0KTtcblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zPXt9XG4gICAqICAgICAgICBPYmplY3Qgb2Ygb3B0aW9uIG5hbWVzIGFuZCB2YWx1ZXNcbiAgICpcbiAgICogQHBhcmFtIHtUZWNofSBvcHRpb25zLnRlY2hcbiAgICogICAgICAgIEEgcmVmZXJlbmNlIHRvIHRoZSB0ZWNoIHRoYXQgb3ducyB0aGlzIEhUTUxUcmFja0VsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7VGV4dFRyYWNrfktpbmR9IFtvcHRpb25zLmtpbmQ9J3N1YnRpdGxlcyddXG4gICAqICAgICAgICBBIHZhbGlkIHRleHQgdHJhY2sga2luZC5cbiAgICpcbiAgICogQHBhcmFtIHtUZXh0VHJhY2t+TW9kZX0gW29wdGlvbnMubW9kZT0nZGlzYWJsZWQnXVxuICAgKiAgICAgICAgQSB2YWxpZCB0ZXh0IHRyYWNrIG1vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5pZD0ndmpzX3RyYWNrXycgKyBHdWlkLm5ld0dVSUQoKV1cbiAgICogICAgICAgIEEgdW5pcXVlIGlkIGZvciB0aGlzIFRleHRUcmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxhYmVsPScnXVxuICAgKiAgICAgICAgVGhlIG1lbnUgbGFiZWwgZm9yIHRoaXMgdHJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYW5ndWFnZT0nJ11cbiAgICogICAgICAgIEEgdmFsaWQgdHdvIGNoYXJhY3RlciBsYW5ndWFnZSBjb2RlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuc3JjbGFuZz0nJ11cbiAgICogICAgICAgIEEgdmFsaWQgdHdvIGNoYXJhY3RlciBsYW5ndWFnZSBjb2RlLiBBbiBhbHRlcm5hdGl2ZSwgYnV0IGRlcHJpb3JpdGl6ZWRcbiAgICogICAgICAgIHZlc2lvbiBvZiBgb3B0aW9ucy5sYW5ndWFnZWBcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnNyY11cbiAgICogICAgICAgIEEgdXJsIHRvIFRleHRUcmFjayBjdWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmRlZmF1bHRdXG4gICAqICAgICAgICBJZiB0aGlzIHRyYWNrIHNob3VsZCBkZWZhdWx0IHRvIG9uIG9yIG9mZi5cbiAgICovXG4gIGZ1bmN0aW9uIEhUTUxUcmFja0VsZW1lbnQob3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICBfdGhpcyA9IF9FdmVudFRhcmdldC5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgdmFyIHJlYWR5U3RhdGU7XG4gICAgdmFyIHRyYWNrID0gbmV3IFRleHRUcmFjayhvcHRpb25zKTtcbiAgICBfdGhpcy5raW5kID0gdHJhY2sua2luZDtcbiAgICBfdGhpcy5zcmMgPSB0cmFjay5zcmM7XG4gICAgX3RoaXMuc3JjbGFuZyA9IHRyYWNrLmxhbmd1YWdlO1xuICAgIF90aGlzLmxhYmVsID0gdHJhY2subGFiZWw7XG4gICAgX3RoaXMuZGVmYXVsdCA9IHRyYWNrLmRlZmF1bHQ7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIHtcbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIEhUTUxUcmFja0VsZW1lbnRcbiAgICAgICAqIEBtZW1iZXIge0hUTUxUcmFja0VsZW1lbnR+UmVhZHlTdGF0ZX0gcmVhZHlTdGF0ZVxuICAgICAgICogICAgICAgICBUaGUgY3VycmVudCByZWFkeSBzdGF0ZSBvZiB0aGUgdHJhY2sgZWxlbWVudC5cbiAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICovXG4gICAgICByZWFkeVN0YXRlOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgIHJldHVybiByZWFkeVN0YXRlO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBIVE1MVHJhY2tFbGVtZW50XG4gICAgICAgKiBAbWVtYmVyIHtUZXh0VHJhY2t9IHRyYWNrXG4gICAgICAgKiAgICAgICAgIFRoZSB1bmRlcmx5aW5nIFRleHRUcmFjayBvYmplY3QuXG4gICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAqXG4gICAgICAgKi9cbiAgICAgIHRyYWNrOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgIHJldHVybiB0cmFjaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJlYWR5U3RhdGUgPSBOT05FO1xuICAgIC8qKlxuICAgICAqIEBsaXN0ZW5zIFRleHRUcmFjayNsb2FkZWRkYXRhXG4gICAgICogQGZpcmVzIEhUTUxUcmFja0VsZW1lbnQjbG9hZFxuICAgICAqL1xuXG4gICAgdHJhY2suYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkZGF0YScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlYWR5U3RhdGUgPSBMT0FERUQ7XG5cbiAgICAgIF90aGlzLnRyaWdnZXIoe1xuICAgICAgICB0eXBlOiAnbG9hZCcsXG4gICAgICAgIHRhcmdldDogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSlcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHJldHVybiBIVE1MVHJhY2tFbGVtZW50O1xufShFdmVudFRhcmdldCk7XG5cbkhUTUxUcmFja0VsZW1lbnQucHJvdG90eXBlLmFsbG93ZWRFdmVudHNfID0ge1xuICBsb2FkOiAnbG9hZCdcbn07XG5IVE1MVHJhY2tFbGVtZW50Lk5PTkUgPSBOT05FO1xuSFRNTFRyYWNrRWxlbWVudC5MT0FESU5HID0gTE9BRElORztcbkhUTUxUcmFja0VsZW1lbnQuTE9BREVEID0gTE9BREVEO1xuSFRNTFRyYWNrRWxlbWVudC5FUlJPUiA9IEVSUk9SO1xuXG4vKlxuICogVGhpcyBmaWxlIGNvbnRhaW5zIGFsbCB0cmFjayBwcm9wZXJ0aWVzIHRoYXQgYXJlIHVzZWQgaW5cbiAqIHBsYXllci5qcywgdGVjaC5qcywgaHRtbDUuanMgYW5kIHBvc3NpYmx5IG90aGVyIHRlY2hzIGluIHRoZSBmdXR1cmUuXG4gKi9cblxudmFyIE5PUk1BTCA9IHtcbiAgYXVkaW86IHtcbiAgICBMaXN0Q2xhc3M6IEF1ZGlvVHJhY2tMaXN0LFxuICAgIFRyYWNrQ2xhc3M6IEF1ZGlvVHJhY2ssXG4gICAgY2FwaXRhbE5hbWU6ICdBdWRpbydcbiAgfSxcbiAgdmlkZW86IHtcbiAgICBMaXN0Q2xhc3M6IFZpZGVvVHJhY2tMaXN0LFxuICAgIFRyYWNrQ2xhc3M6IFZpZGVvVHJhY2ssXG4gICAgY2FwaXRhbE5hbWU6ICdWaWRlbydcbiAgfSxcbiAgdGV4dDoge1xuICAgIExpc3RDbGFzczogVGV4dFRyYWNrTGlzdCxcbiAgICBUcmFja0NsYXNzOiBUZXh0VHJhY2ssXG4gICAgY2FwaXRhbE5hbWU6ICdUZXh0J1xuICB9XG59O1xuT2JqZWN0LmtleXMoTk9STUFMKS5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gIE5PUk1BTFt0eXBlXS5nZXR0ZXJOYW1lID0gdHlwZSArIFwiVHJhY2tzXCI7XG4gIE5PUk1BTFt0eXBlXS5wcml2YXRlTmFtZSA9IHR5cGUgKyBcIlRyYWNrc19cIjtcbn0pO1xudmFyIFJFTU9URSA9IHtcbiAgcmVtb3RlVGV4dDoge1xuICAgIExpc3RDbGFzczogVGV4dFRyYWNrTGlzdCxcbiAgICBUcmFja0NsYXNzOiBUZXh0VHJhY2ssXG4gICAgY2FwaXRhbE5hbWU6ICdSZW1vdGVUZXh0JyxcbiAgICBnZXR0ZXJOYW1lOiAncmVtb3RlVGV4dFRyYWNrcycsXG4gICAgcHJpdmF0ZU5hbWU6ICdyZW1vdGVUZXh0VHJhY2tzXydcbiAgfSxcbiAgcmVtb3RlVGV4dEVsOiB7XG4gICAgTGlzdENsYXNzOiBIdG1sVHJhY2tFbGVtZW50TGlzdCxcbiAgICBUcmFja0NsYXNzOiBIVE1MVHJhY2tFbGVtZW50LFxuICAgIGNhcGl0YWxOYW1lOiAnUmVtb3RlVGV4dFRyYWNrRWxzJyxcbiAgICBnZXR0ZXJOYW1lOiAncmVtb3RlVGV4dFRyYWNrRWxzJyxcbiAgICBwcml2YXRlTmFtZTogJ3JlbW90ZVRleHRUcmFja0Vsc18nXG4gIH1cbn07XG52YXIgQUxMID0gbWVyZ2VPcHRpb25zKE5PUk1BTCwgUkVNT1RFKTtcblJFTU9URS5uYW1lcyA9IE9iamVjdC5rZXlzKFJFTU9URSk7XG5OT1JNQUwubmFtZXMgPSBPYmplY3Qua2V5cyhOT1JNQUwpO1xuQUxMLm5hbWVzID0gW10uY29uY2F0KFJFTU9URS5uYW1lcykuY29uY2F0KE5PUk1BTC5uYW1lcyk7XG5cbi8qKlxuICogQW4gT2JqZWN0IGNvbnRhaW5pbmcgYSBzdHJ1Y3R1cmUgbGlrZTogYHtzcmM6ICd1cmwnLCB0eXBlOiAnbWltZXR5cGUnfWAgb3Igc3RyaW5nXG4gKiB0aGF0IGp1c3QgY29udGFpbnMgdGhlIHNyYyB1cmwgYWxvbmUuXG4gKiAqIGB2YXIgU291cmNlT2JqZWN0ID0ge3NyYzogJ2h0dHA6Ly9leC5jb20vdmlkZW8ubXA0JywgdHlwZTogJ3ZpZGVvL21wNCd9O2BcbiAgICogYHZhciBTb3VyY2VTdHJpbmcgPSAnaHR0cDovL2V4YW1wbGUuY29tL3NvbWUtdmlkZW8ubXA0JztgXG4gKlxuICogQHR5cGVkZWYge09iamVjdHxzdHJpbmd9IFRlY2h+U291cmNlT2JqZWN0XG4gKlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHNyY1xuICogICAgICAgICAgIFRoZSB1cmwgdG8gdGhlIHNvdXJjZVxuICpcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlXG4gKiAgICAgICAgICAgVGhlIG1pbWUgdHlwZSBvZiB0aGUgc291cmNlXG4gKi9cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHVzZWQgYnkge0BsaW5rIFRlY2h9IHRvIGNyZWF0ZSBhIG5ldyB7QGxpbmsgVGV4dFRyYWNrfS5cbiAqXG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSB7VGVjaH0gc2VsZlxuICogICAgICAgIEFuIGluc3RhbmNlIG9mIHRoZSBUZWNoIGNsYXNzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBraW5kXG4gKiAgICAgICAgYFRleHRUcmFja2Aga2luZCAoc3VidGl0bGVzLCBjYXB0aW9ucywgZGVzY3JpcHRpb25zLCBjaGFwdGVycywgb3IgbWV0YWRhdGEpXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IFtsYWJlbF1cbiAqICAgICAgICBMYWJlbCB0byBpZGVudGlmeSB0aGUgdGV4dCB0cmFja1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBbbGFuZ3VhZ2VdXG4gKiAgICAgICAgVHdvIGxldHRlciBsYW5ndWFnZSBhYmJyZXZpYXRpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dXG4gKiAgICAgICAgQW4gb2JqZWN0IHdpdGggYWRkaXRpb25hbCB0ZXh0IHRyYWNrIG9wdGlvbnNcbiAqXG4gKiBAcmV0dXJuIHtUZXh0VHJhY2t9XG4gKiAgICAgICAgICBUaGUgdGV4dCB0cmFjayB0aGF0IHdhcyBjcmVhdGVkLlxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZVRyYWNrSGVscGVyKHNlbGYsIGtpbmQsIGxhYmVsLCBsYW5ndWFnZSwgb3B0aW9ucykge1xuICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG5cbiAgdmFyIHRyYWNrcyA9IHNlbGYudGV4dFRyYWNrcygpO1xuICBvcHRpb25zLmtpbmQgPSBraW5kO1xuXG4gIGlmIChsYWJlbCkge1xuICAgIG9wdGlvbnMubGFiZWwgPSBsYWJlbDtcbiAgfVxuXG4gIGlmIChsYW5ndWFnZSkge1xuICAgIG9wdGlvbnMubGFuZ3VhZ2UgPSBsYW5ndWFnZTtcbiAgfVxuXG4gIG9wdGlvbnMudGVjaCA9IHNlbGY7XG4gIHZhciB0cmFjayA9IG5ldyBBTEwudGV4dC5UcmFja0NsYXNzKG9wdGlvbnMpO1xuICB0cmFja3MuYWRkVHJhY2sodHJhY2spO1xuICByZXR1cm4gdHJhY2s7XG59XG4vKipcbiAqIFRoaXMgaXMgdGhlIGJhc2UgY2xhc3MgZm9yIG1lZGlhIHBsYXliYWNrIHRlY2hub2xvZ3kgY29udHJvbGxlcnMsIHN1Y2ggYXNcbiAqIHtAbGluayBGbGFzaH0gYW5kIHtAbGluayBIVE1MNX1cbiAqXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuXG5cbnZhciBUZWNoID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0c0xvb3NlKFRlY2gsIF9Db21wb25lbnQpO1xuXG4gIC8qKlxuICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIFRlY2guXG4gICpcbiAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICpcbiAgKiBAcGFyYW0ge0NvbXBvbmVudH5SZWFkeUNhbGxiYWNrfSByZWFkeVxuICAqICAgICAgICBDYWxsYmFjayBmdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIGBIVE1MNWAgVGVjaCBpcyByZWFkeS5cbiAgKi9cbiAgZnVuY3Rpb24gVGVjaChvcHRpb25zLCByZWFkeSkge1xuICAgIHZhciBfdGhpcztcblxuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAocmVhZHkgPT09IHZvaWQgMCkge1xuICAgICAgcmVhZHkgPSBmdW5jdGlvbiByZWFkeSgpIHt9O1xuICAgIH1cblxuICAgIC8vIHdlIGRvbid0IHdhbnQgdGhlIHRlY2ggdG8gcmVwb3J0IHVzZXIgYWN0aXZpdHkgYXV0b21hdGljYWxseS5cbiAgICAvLyBUaGlzIGlzIGRvbmUgbWFudWFsbHkgaW4gYWRkQ29udHJvbHNMaXN0ZW5lcnNcbiAgICBvcHRpb25zLnJlcG9ydFRvdWNoQWN0aXZpdHkgPSBmYWxzZTtcbiAgICBfdGhpcyA9IF9Db21wb25lbnQuY2FsbCh0aGlzLCBudWxsLCBvcHRpb25zLCByZWFkeSkgfHwgdGhpczsgLy8ga2VlcCB0cmFjayBvZiB3aGV0aGVyIHRoZSBjdXJyZW50IHNvdXJjZSBoYXMgcGxheWVkIGF0IGFsbCB0b1xuICAgIC8vIGltcGxlbWVudCBhIHZlcnkgbGltaXRlZCBwbGF5ZWQoKVxuXG4gICAgX3RoaXMuaGFzU3RhcnRlZF8gPSBmYWxzZTtcblxuICAgIF90aGlzLm9uKCdwbGF5aW5nJywgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5oYXNTdGFydGVkXyA9IHRydWU7XG4gICAgfSk7XG5cbiAgICBfdGhpcy5vbignbG9hZHN0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5oYXNTdGFydGVkXyA9IGZhbHNlO1xuICAgIH0pO1xuXG4gICAgQUxMLm5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHZhciBwcm9wcyA9IEFMTFtuYW1lXTtcblxuICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9uc1twcm9wcy5nZXR0ZXJOYW1lXSkge1xuICAgICAgICBfdGhpc1twcm9wcy5wcml2YXRlTmFtZV0gPSBvcHRpb25zW3Byb3BzLmdldHRlck5hbWVdO1xuICAgICAgfVxuICAgIH0pOyAvLyBNYW51YWxseSB0cmFjayBwcm9ncmVzcyBpbiBjYXNlcyB3aGVyZSB0aGUgYnJvd3Nlci9mbGFzaCBwbGF5ZXIgZG9lc24ndCByZXBvcnQgaXQuXG5cbiAgICBpZiAoIV90aGlzLmZlYXR1cmVzUHJvZ3Jlc3NFdmVudHMpIHtcbiAgICAgIF90aGlzLm1hbnVhbFByb2dyZXNzT24oKTtcbiAgICB9IC8vIE1hbnVhbGx5IHRyYWNrIHRpbWV1cGRhdGVzIGluIGNhc2VzIHdoZXJlIHRoZSBicm93c2VyL2ZsYXNoIHBsYXllciBkb2Vzbid0IHJlcG9ydCBpdC5cblxuXG4gICAgaWYgKCFfdGhpcy5mZWF0dXJlc1RpbWV1cGRhdGVFdmVudHMpIHtcbiAgICAgIF90aGlzLm1hbnVhbFRpbWVVcGRhdGVzT24oKTtcbiAgICB9XG5cbiAgICBbJ1RleHQnLCAnQXVkaW8nLCAnVmlkZW8nXS5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykge1xuICAgICAgaWYgKG9wdGlvbnNbXCJuYXRpdmVcIiArIHRyYWNrICsgXCJUcmFja3NcIl0gPT09IGZhbHNlKSB7XG4gICAgICAgIF90aGlzW1wiZmVhdHVyZXNOYXRpdmVcIiArIHRyYWNrICsgXCJUcmFja3NcIl0gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChvcHRpb25zLm5hdGl2ZUNhcHRpb25zID09PSBmYWxzZSB8fCBvcHRpb25zLm5hdGl2ZVRleHRUcmFja3MgPT09IGZhbHNlKSB7XG4gICAgICBfdGhpcy5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMubmF0aXZlQ2FwdGlvbnMgPT09IHRydWUgfHwgb3B0aW9ucy5uYXRpdmVUZXh0VHJhY2tzID09PSB0cnVlKSB7XG4gICAgICBfdGhpcy5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICghX3RoaXMuZmVhdHVyZXNOYXRpdmVUZXh0VHJhY2tzKSB7XG4gICAgICBfdGhpcy5lbXVsYXRlVGV4dFRyYWNrcygpO1xuICAgIH1cblxuICAgIF90aGlzLmF1dG9SZW1vdGVUZXh0VHJhY2tzXyA9IG5ldyBBTEwudGV4dC5MaXN0Q2xhc3MoKTtcblxuICAgIF90aGlzLmluaXRUcmFja0xpc3RlbmVycygpOyAvLyBUdXJuIG9uIGNvbXBvbmVudCB0YXAgZXZlbnRzIG9ubHkgaWYgbm90IHVzaW5nIG5hdGl2ZSBjb250cm9sc1xuXG5cbiAgICBpZiAoIW9wdGlvbnMubmF0aXZlQ29udHJvbHNGb3JUb3VjaCkge1xuICAgICAgX3RoaXMuZW1pdFRhcEV2ZW50cygpO1xuICAgIH1cblxuICAgIGlmIChfdGhpcy5jb25zdHJ1Y3Rvcikge1xuICAgICAgX3RoaXMubmFtZV8gPSBfdGhpcy5jb25zdHJ1Y3Rvci5uYW1lIHx8ICdVbmtub3duIFRlY2gnO1xuICAgIH1cblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKipcbiAgICogQSBzcGVjaWFsIGZ1bmN0aW9uIHRvIHRyaWdnZXIgc291cmNlIHNldCBpbiBhIHdheSB0aGF0IHdpbGwgYWxsb3cgcGxheWVyXG4gICAqIHRvIHJlLXRyaWdnZXIgaWYgdGhlIHBsYXllciBvciB0ZWNoIGFyZSBub3QgcmVhZHkgeWV0LlxuICAgKlxuICAgKiBAZmlyZXMgVGVjaCNzb3VyY2VzZXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNyYyBUaGUgc291cmNlIHN0cmluZyBhdCB0aGUgdGltZSBvZiB0aGUgc291cmNlIGNoYW5naW5nLlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBUZWNoLnByb3RvdHlwZTtcblxuICBfcHJvdG8udHJpZ2dlclNvdXJjZXNldCA9IGZ1bmN0aW9uIHRyaWdnZXJTb3VyY2VzZXQoc3JjKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBpZiAoIXRoaXMuaXNSZWFkeV8pIHtcbiAgICAgIC8vIG9uIGluaXRpYWwgcmVhZHkgd2UgaGF2ZSB0byB0cmlnZ2VyIHNvdXJjZSBzZXRcbiAgICAgIC8vIDFtcyBhZnRlciByZWFkeSBzbyB0aGF0IHBsYXllciBjYW4gd2F0Y2ggZm9yIGl0LlxuICAgICAgdGhpcy5vbmUoJ3JlYWR5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMyLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczIudHJpZ2dlclNvdXJjZXNldChzcmMpO1xuICAgICAgICB9LCAxKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIHRoZSBzb3VyY2UgaXMgc2V0IG9uIHRoZSB0ZWNoIGNhdXNpbmcgdGhlIG1lZGlhIGVsZW1lbnRcbiAgICAgKiB0byByZWxvYWQuXG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBQbGF5ZXIjZXZlbnQ6c291cmNlc2V0fVxuICAgICAqIEBldmVudCBUZWNoI3NvdXJjZXNldFxuICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgKi9cblxuXG4gICAgdGhpcy50cmlnZ2VyKHtcbiAgICAgIHNyYzogc3JjLFxuICAgICAgdHlwZTogJ3NvdXJjZXNldCdcbiAgICB9KTtcbiAgfVxuICAvKiBGYWxsYmFja3MgZm9yIHVuc3VwcG9ydGVkIGV2ZW50IHR5cGVzXG4gID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbiAgLyoqXG4gICAqIFBvbHlmaWxsIHRoZSBgcHJvZ3Jlc3NgIGV2ZW50IGZvciBicm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgaXQgbmF0aXZlbHkuXG4gICAqXG4gICAqIEBzZWUge0BsaW5rIFRlY2gjdHJhY2tQcm9ncmVzc31cbiAgICovXG4gIDtcblxuICBfcHJvdG8ubWFudWFsUHJvZ3Jlc3NPbiA9IGZ1bmN0aW9uIG1hbnVhbFByb2dyZXNzT24oKSB7XG4gICAgdGhpcy5vbignZHVyYXRpb25jaGFuZ2UnLCB0aGlzLm9uRHVyYXRpb25DaGFuZ2UpO1xuICAgIHRoaXMubWFudWFsUHJvZ3Jlc3MgPSB0cnVlOyAvLyBUcmlnZ2VyIHByb2dyZXNzIHdhdGNoaW5nIHdoZW4gYSBzb3VyY2UgYmVnaW5zIGxvYWRpbmdcblxuICAgIHRoaXMub25lKCdyZWFkeScsIHRoaXMudHJhY2tQcm9ncmVzcyk7XG4gIH1cbiAgLyoqXG4gICAqIFR1cm4gb2ZmIHRoZSBwb2x5ZmlsbCBmb3IgYHByb2dyZXNzYCBldmVudHMgdGhhdCB3YXMgY3JlYXRlZCBpblxuICAgKiB7QGxpbmsgVGVjaCNtYW51YWxQcm9ncmVzc09ufVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5tYW51YWxQcm9ncmVzc09mZiA9IGZ1bmN0aW9uIG1hbnVhbFByb2dyZXNzT2ZmKCkge1xuICAgIHRoaXMubWFudWFsUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICB0aGlzLnN0b3BUcmFja2luZ1Byb2dyZXNzKCk7XG4gICAgdGhpcy5vZmYoJ2R1cmF0aW9uY2hhbmdlJywgdGhpcy5vbkR1cmF0aW9uQ2hhbmdlKTtcbiAgfVxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIHRyaWdnZXIgYSBgcHJvZ3Jlc3NgIGV2ZW50IHdoZW4gdGhlIGJ1ZmZlcmVkIHBlcmNlbnQgY2hhbmdlcy4gSXRcbiAgICogc2V0cyBhbiBpbnRlcnZhbCBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIGV2ZXJ5IDUwMCBtaWxsaXNlY29uZHMgdG8gY2hlY2sgaWYgdGhlXG4gICAqIGJ1ZmZlciBlbmQgcGVyY2VudCBoYXMgY2hhbmdlZC5cbiAgICpcbiAgICogPiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBieSB7QGxpbmsgVGVjaCNtYW51YWxQcm9ncmVzc09ufVxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKiAgICAgICAgVGhlIGByZWFkeWAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyB0byBydW4uXG4gICAqXG4gICAqIEBsaXN0ZW5zIFRlY2gjcmVhZHlcbiAgICogQGZpcmVzIFRlY2gjcHJvZ3Jlc3NcbiAgICovXG4gIDtcblxuICBfcHJvdG8udHJhY2tQcm9ncmVzcyA9IGZ1bmN0aW9uIHRyYWNrUHJvZ3Jlc3MoZXZlbnQpIHtcbiAgICB0aGlzLnN0b3BUcmFja2luZ1Byb2dyZXNzKCk7XG4gICAgdGhpcy5wcm9ncmVzc0ludGVydmFsID0gdGhpcy5zZXRJbnRlcnZhbChiaW5kKHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIERvbid0IHRyaWdnZXIgdW5sZXNzIGJ1ZmZlcmVkIGFtb3VudCBpcyBncmVhdGVyIHRoYW4gbGFzdCB0aW1lXG4gICAgICB2YXIgbnVtQnVmZmVyZWRQZXJjZW50ID0gdGhpcy5idWZmZXJlZFBlcmNlbnQoKTtcblxuICAgICAgaWYgKHRoaXMuYnVmZmVyZWRQZXJjZW50XyAhPT0gbnVtQnVmZmVyZWRQZXJjZW50KSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZWUge0BsaW5rIFBsYXllciNwcm9ncmVzc31cbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFRlY2gjcHJvZ3Jlc3NcbiAgICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdwcm9ncmVzcycpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmJ1ZmZlcmVkUGVyY2VudF8gPSBudW1CdWZmZXJlZFBlcmNlbnQ7XG5cbiAgICAgIGlmIChudW1CdWZmZXJlZFBlcmNlbnQgPT09IDEpIHtcbiAgICAgICAgdGhpcy5zdG9wVHJhY2tpbmdQcm9ncmVzcygpO1xuICAgICAgfVxuICAgIH0pLCA1MDApO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgb3VyIGludGVybmFsIGR1cmF0aW9uIG9uIGEgYGR1cmF0aW9uY2hhbmdlYCBldmVudCBieSBjYWxsaW5nXG4gICAqIHtAbGluayBUZWNoI2R1cmF0aW9ufS5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIFRoZSBgZHVyYXRpb25jaGFuZ2VgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgdG8gcnVuLlxuICAgKlxuICAgKiBAbGlzdGVucyBUZWNoI2R1cmF0aW9uY2hhbmdlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLm9uRHVyYXRpb25DaGFuZ2UgPSBmdW5jdGlvbiBvbkR1cmF0aW9uQ2hhbmdlKGV2ZW50KSB7XG4gICAgdGhpcy5kdXJhdGlvbl8gPSB0aGlzLmR1cmF0aW9uKCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbmQgY3JlYXRlIGEgYFRpbWVSYW5nZWAgb2JqZWN0IGZvciBidWZmZXJpbmcuXG4gICAqXG4gICAqIEByZXR1cm4ge1RpbWVSYW5nZX1cbiAgICogICAgICAgICBUaGUgdGltZSByYW5nZSBvYmplY3QgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uYnVmZmVyZWQgPSBmdW5jdGlvbiBidWZmZXJlZCgpIHtcbiAgICByZXR1cm4gY3JlYXRlVGltZVJhbmdlcygwLCAwKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBwZXJjZW50YWdlIG9mIHRoZSBjdXJyZW50IHZpZGVvIHRoYXQgaXMgY3VycmVudGx5IGJ1ZmZlcmVkLlxuICAgKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqICAgICAgICAgQSBudW1iZXIgZnJvbSAwIHRvIDEgdGhhdCByZXByZXNlbnRzIHRoZSBkZWNpbWFsIHBlcmNlbnRhZ2Ugb2YgdGhlXG4gICAqICAgICAgICAgdmlkZW8gdGhhdCBpcyBidWZmZXJlZC5cbiAgICpcbiAgICovXG4gIDtcblxuICBfcHJvdG8uYnVmZmVyZWRQZXJjZW50ID0gZnVuY3Rpb24gYnVmZmVyZWRQZXJjZW50JCQxKCkge1xuICAgIHJldHVybiBidWZmZXJlZFBlcmNlbnQodGhpcy5idWZmZXJlZCgpLCB0aGlzLmR1cmF0aW9uXyk7XG4gIH1cbiAgLyoqXG4gICAqIFR1cm4gb2ZmIHRoZSBwb2x5ZmlsbCBmb3IgYHByb2dyZXNzYCBldmVudHMgdGhhdCB3YXMgY3JlYXRlZCBpblxuICAgKiB7QGxpbmsgVGVjaCNtYW51YWxQcm9ncmVzc09ufVxuICAgKiBTdG9wIG1hbnVhbGx5IHRyYWNraW5nIHByb2dyZXNzIGV2ZW50cyBieSBjbGVhcmluZyB0aGUgaW50ZXJ2YWwgdGhhdCB3YXMgc2V0IGluXG4gICAqIHtAbGluayBUZWNoI3RyYWNrUHJvZ3Jlc3N9LlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zdG9wVHJhY2tpbmdQcm9ncmVzcyA9IGZ1bmN0aW9uIHN0b3BUcmFja2luZ1Byb2dyZXNzKCkge1xuICAgIHRoaXMuY2xlYXJJbnRlcnZhbCh0aGlzLnByb2dyZXNzSW50ZXJ2YWwpO1xuICB9XG4gIC8qKlxuICAgKiBQb2x5ZmlsbCB0aGUgYHRpbWV1cGRhdGVgIGV2ZW50IGZvciBicm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgaXQuXG4gICAqXG4gICAqIEBzZWUge0BsaW5rIFRlY2gjdHJhY2tDdXJyZW50VGltZX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ubWFudWFsVGltZVVwZGF0ZXNPbiA9IGZ1bmN0aW9uIG1hbnVhbFRpbWVVcGRhdGVzT24oKSB7XG4gICAgdGhpcy5tYW51YWxUaW1lVXBkYXRlcyA9IHRydWU7XG4gICAgdGhpcy5vbigncGxheScsIHRoaXMudHJhY2tDdXJyZW50VGltZSk7XG4gICAgdGhpcy5vbigncGF1c2UnLCB0aGlzLnN0b3BUcmFja2luZ0N1cnJlbnRUaW1lKTtcbiAgfVxuICAvKipcbiAgICogVHVybiBvZmYgdGhlIHBvbHlmaWxsIGZvciBgdGltZXVwZGF0ZWAgZXZlbnRzIHRoYXQgd2FzIGNyZWF0ZWQgaW5cbiAgICoge0BsaW5rIFRlY2gjbWFudWFsVGltZVVwZGF0ZXNPbn1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ubWFudWFsVGltZVVwZGF0ZXNPZmYgPSBmdW5jdGlvbiBtYW51YWxUaW1lVXBkYXRlc09mZigpIHtcbiAgICB0aGlzLm1hbnVhbFRpbWVVcGRhdGVzID0gZmFsc2U7XG4gICAgdGhpcy5zdG9wVHJhY2tpbmdDdXJyZW50VGltZSgpO1xuICAgIHRoaXMub2ZmKCdwbGF5JywgdGhpcy50cmFja0N1cnJlbnRUaW1lKTtcbiAgICB0aGlzLm9mZigncGF1c2UnLCB0aGlzLnN0b3BUcmFja2luZ0N1cnJlbnRUaW1lKTtcbiAgfVxuICAvKipcbiAgICogU2V0cyB1cCBhbiBpbnRlcnZhbCBmdW5jdGlvbiB0byB0cmFjayBjdXJyZW50IHRpbWUgYW5kIHRyaWdnZXIgYHRpbWV1cGRhdGVgIGV2ZXJ5XG4gICAqIDI1MCBtaWxsaXNlY29uZHMuXG4gICAqXG4gICAqIEBsaXN0ZW5zIFRlY2gjcGxheVxuICAgKiBAdHJpZ2dlcnMgVGVjaCN0aW1ldXBkYXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRyYWNrQ3VycmVudFRpbWUgPSBmdW5jdGlvbiB0cmFja0N1cnJlbnRUaW1lKCkge1xuICAgIGlmICh0aGlzLmN1cnJlbnRUaW1lSW50ZXJ2YWwpIHtcbiAgICAgIHRoaXMuc3RvcFRyYWNraW5nQ3VycmVudFRpbWUoKTtcbiAgICB9XG5cbiAgICB0aGlzLmN1cnJlbnRUaW1lSW50ZXJ2YWwgPSB0aGlzLnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgIC8qKlxuICAgICAgICogVHJpZ2dlcmVkIGF0IGFuIGludGVydmFsIG9mIDI1MG1zIHRvIGluZGljYXRlZCB0aGF0IHRpbWUgaXMgcGFzc2luZyBpbiB0aGUgdmlkZW8uXG4gICAgICAgKlxuICAgICAgICogQGV2ZW50IFRlY2gjdGltZXVwZGF0ZVxuICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICovXG4gICAgICB0aGlzLnRyaWdnZXIoe1xuICAgICAgICB0eXBlOiAndGltZXVwZGF0ZScsXG4gICAgICAgIHRhcmdldDogdGhpcyxcbiAgICAgICAgbWFudWFsbHlUcmlnZ2VyZWQ6IHRydWVcbiAgICAgIH0pOyAvLyA0MiA9IDI0IGZwcyAvLyAyNTAgaXMgd2hhdCBXZWJraXQgdXNlcyAvLyBGRiB1c2VzIDE1XG4gICAgfSwgMjUwKTtcbiAgfVxuICAvKipcbiAgICogU3RvcCB0aGUgaW50ZXJ2YWwgZnVuY3Rpb24gY3JlYXRlZCBpbiB7QGxpbmsgVGVjaCN0cmFja0N1cnJlbnRUaW1lfSBzbyB0aGF0IHRoZVxuICAgKiBgdGltZXVwZGF0ZWAgZXZlbnQgaXMgbm8gbG9uZ2VyIHRyaWdnZXJlZC5cbiAgICpcbiAgICogQGxpc3RlbnMge1RlY2gjcGF1c2V9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnN0b3BUcmFja2luZ0N1cnJlbnRUaW1lID0gZnVuY3Rpb24gc3RvcFRyYWNraW5nQ3VycmVudFRpbWUoKSB7XG4gICAgdGhpcy5jbGVhckludGVydmFsKHRoaXMuY3VycmVudFRpbWVJbnRlcnZhbCk7IC8vICMxMDAyIC0gaWYgdGhlIHZpZGVvIGVuZHMgcmlnaHQgYmVmb3JlIHRoZSBuZXh0IHRpbWV1cGRhdGUgd291bGQgaGFwcGVuLFxuICAgIC8vIHRoZSBwcm9ncmVzcyBiYXIgd29uJ3QgbWFrZSBpdCBhbGwgdGhlIHdheSB0byB0aGUgZW5kXG5cbiAgICB0aGlzLnRyaWdnZXIoe1xuICAgICAgdHlwZTogJ3RpbWV1cGRhdGUnLFxuICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgbWFudWFsbHlUcmlnZ2VyZWQ6IHRydWVcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogVHVybiBvZmYgYWxsIGV2ZW50IHBvbHlmaWxscywgY2xlYXIgdGhlIGBUZWNoYHMge0BsaW5rIEF1ZGlvVHJhY2tMaXN0fSxcbiAgICoge0BsaW5rIFZpZGVvVHJhY2tMaXN0fSwgYW5kIHtAbGluayBUZXh0VHJhY2tMaXN0fSwgYW5kIGRpc3Bvc2Ugb2YgdGhpcyBUZWNoLlxuICAgKlxuICAgKiBAZmlyZXMgQ29tcG9uZW50I2Rpc3Bvc2VcbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgLy8gY2xlYXIgb3V0IGFsbCB0cmFja3MgYmVjYXVzZSB3ZSBjYW4ndCByZXVzZSB0aGVtIGJldHdlZW4gdGVjaHNcbiAgICB0aGlzLmNsZWFyVHJhY2tzKE5PUk1BTC5uYW1lcyk7IC8vIFR1cm4gb2ZmIGFueSBtYW51YWwgcHJvZ3Jlc3Mgb3IgdGltZXVwZGF0ZSB0cmFja2luZ1xuXG4gICAgaWYgKHRoaXMubWFudWFsUHJvZ3Jlc3MpIHtcbiAgICAgIHRoaXMubWFudWFsUHJvZ3Jlc3NPZmYoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5tYW51YWxUaW1lVXBkYXRlcykge1xuICAgICAgdGhpcy5tYW51YWxUaW1lVXBkYXRlc09mZigpO1xuICAgIH1cblxuICAgIF9Db21wb25lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgfVxuICAvKipcbiAgICogQ2xlYXIgb3V0IGEgc2luZ2xlIGBUcmFja0xpc3RgIG9yIGFuIGFycmF5IG9mIGBUcmFja0xpc3RzYCBnaXZlbiB0aGVpciBuYW1lcy5cbiAgICpcbiAgICogPiBOb3RlOiBUZWNocyB3aXRob3V0IHNvdXJjZSBoYW5kbGVycyBzaG91bGQgY2FsbCB0aGlzIGJldHdlZW4gc291cmNlcyBmb3IgYHZpZGVvYFxuICAgKiAgICAgICAgICYgYGF1ZGlvYCB0cmFja3MuIFlvdSBkb24ndCB3YW50IHRvIHVzZSB0aGVtIGJldHdlZW4gdHJhY2tzIVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfHN0cmluZ30gdHlwZXNcbiAgICogICAgICAgIFRyYWNrTGlzdCBuYW1lcyB0byBjbGVhciwgdmFsaWQgbmFtZXMgYXJlIGB2aWRlb2AsIGBhdWRpb2AsIGFuZFxuICAgKiAgICAgICAgYHRleHRgLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jbGVhclRyYWNrcyA9IGZ1bmN0aW9uIGNsZWFyVHJhY2tzKHR5cGVzKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICB0eXBlcyA9IFtdLmNvbmNhdCh0eXBlcyk7IC8vIGNsZWFyIG91dCBhbGwgdHJhY2tzIGJlY2F1c2Ugd2UgY2FuJ3QgcmV1c2UgdGhlbSBiZXR3ZWVuIHRlY2hzXG5cbiAgICB0eXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICB2YXIgbGlzdCA9IF90aGlzM1t0eXBlICsgXCJUcmFja3NcIl0oKSB8fCBbXTtcbiAgICAgIHZhciBpID0gbGlzdC5sZW5ndGg7XG5cbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdmFyIHRyYWNrID0gbGlzdFtpXTtcblxuICAgICAgICBpZiAodHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgX3RoaXMzLnJlbW92ZVJlbW90ZVRleHRUcmFjayh0cmFjayk7XG4gICAgICAgIH1cblxuICAgICAgICBsaXN0LnJlbW92ZVRyYWNrKHRyYWNrKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIGFueSBUZXh0VHJhY2tzIGFkZGVkIHZpYSBhZGRSZW1vdGVUZXh0VHJhY2sgdGhhdCBhcmVcbiAgICogZmxhZ2dlZCBmb3IgYXV0b21hdGljIGdhcmJhZ2UgY29sbGVjdGlvblxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jbGVhbnVwQXV0b1RleHRUcmFja3MgPSBmdW5jdGlvbiBjbGVhbnVwQXV0b1RleHRUcmFja3MoKSB7XG4gICAgdmFyIGxpc3QgPSB0aGlzLmF1dG9SZW1vdGVUZXh0VHJhY2tzXyB8fCBbXTtcbiAgICB2YXIgaSA9IGxpc3QubGVuZ3RoO1xuXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIHRyYWNrID0gbGlzdFtpXTtcbiAgICAgIHRoaXMucmVtb3ZlUmVtb3RlVGV4dFRyYWNrKHRyYWNrKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJlc2V0IHRoZSB0ZWNoLCB3aGljaCB3aWxsIHJlbW92ZXMgYWxsIHNvdXJjZXMgYW5kIHJlc2V0IHRoZSBpbnRlcm5hbCByZWFkeVN0YXRlLlxuICAgKlxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHt9XG4gIC8qKlxuICAgKiBHZXQgb3Igc2V0IGFuIGVycm9yIG9uIHRoZSBUZWNoLlxuICAgKlxuICAgKiBAcGFyYW0ge01lZGlhRXJyb3J9IFtlcnJdXG4gICAqICAgICAgICBFcnJvciB0byBzZXQgb24gdGhlIFRlY2hcbiAgICpcbiAgICogQHJldHVybiB7TWVkaWFFcnJvcnxudWxsfVxuICAgKiAgICAgICAgIFRoZSBjdXJyZW50IGVycm9yIG9iamVjdCBvbiB0aGUgdGVjaCwgb3IgbnVsbCBpZiB0aGVyZSBpc24ndCBvbmUuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmVycm9yID0gZnVuY3Rpb24gZXJyb3IoZXJyKSB7XG4gICAgaWYgKGVyciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmVycm9yXyA9IG5ldyBNZWRpYUVycm9yKGVycik7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2Vycm9yJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZXJyb3JfO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBgVGltZVJhbmdlYHMgdGhhdCBoYXZlIGJlZW4gcGxheWVkIHRocm91Z2ggZm9yIHRoZSBjdXJyZW50IHNvdXJjZS5cbiAgICpcbiAgICogPiBOT1RFOiBUaGlzIGltcGxlbWVudGF0aW9uIGlzIGluY29tcGxldGUuIEl0IGRvZXMgbm90IHRyYWNrIHRoZSBwbGF5ZWQgYFRpbWVSYW5nZWAuXG4gICAqICAgICAgICAgSXQgb25seSBjaGVja3Mgd2hldGhlciB0aGUgc291cmNlIGhhcyBwbGF5ZWQgYXQgYWxsIG9yIG5vdC5cbiAgICpcbiAgICogQHJldHVybiB7VGltZVJhbmdlfVxuICAgKiAgICAgICAgIC0gQSBzaW5nbGUgdGltZSByYW5nZSBpZiB0aGlzIHZpZGVvIGhhcyBwbGF5ZWRcbiAgICogICAgICAgICAtIEFuIGVtcHR5IHNldCBvZiByYW5nZXMgaWYgbm90LlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wbGF5ZWQgPSBmdW5jdGlvbiBwbGF5ZWQoKSB7XG4gICAgaWYgKHRoaXMuaGFzU3RhcnRlZF8pIHtcbiAgICAgIHJldHVybiBjcmVhdGVUaW1lUmFuZ2VzKDAsIDApO1xuICAgIH1cblxuICAgIHJldHVybiBjcmVhdGVUaW1lUmFuZ2VzKCk7XG4gIH1cbiAgLyoqXG4gICAqIENhdXNlcyBhIG1hbnVhbCB0aW1lIHVwZGF0ZSB0byBvY2N1ciBpZiB7QGxpbmsgVGVjaCNtYW51YWxUaW1lVXBkYXRlc09ufSB3YXNcbiAgICogcHJldmlvdXNseSBjYWxsZWQuXG4gICAqXG4gICAqIEBmaXJlcyBUZWNoI3RpbWV1cGRhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uc2V0Q3VycmVudFRpbWUgPSBmdW5jdGlvbiBzZXRDdXJyZW50VGltZSgpIHtcbiAgICAvLyBpbXByb3ZlIHRoZSBhY2N1cmFjeSBvZiBtYW51YWwgdGltZXVwZGF0ZXNcbiAgICBpZiAodGhpcy5tYW51YWxUaW1lVXBkYXRlcykge1xuICAgICAgLyoqXG4gICAgICAgKiBBIG1hbnVhbCBgdGltZXVwZGF0ZWAgZXZlbnQuXG4gICAgICAgKlxuICAgICAgICogQGV2ZW50IFRlY2gjdGltZXVwZGF0ZVxuICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICovXG4gICAgICB0aGlzLnRyaWdnZXIoe1xuICAgICAgICB0eXBlOiAndGltZXVwZGF0ZScsXG4gICAgICAgIHRhcmdldDogdGhpcyxcbiAgICAgICAgbWFudWFsbHlUcmlnZ2VyZWQ6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVHVybiBvbiBsaXN0ZW5lcnMgZm9yIHtAbGluayBWaWRlb1RyYWNrTGlzdH0sIHtAbGluayB7QXVkaW9UcmFja0xpc3R9LCBhbmRcbiAgICoge0BsaW5rIFRleHRUcmFja0xpc3R9IGV2ZW50cy5cbiAgICpcbiAgICogVGhpcyBhZGRzIHtAbGluayBFdmVudFRhcmdldH5FdmVudExpc3RlbmVyc30gZm9yIGBhZGR0cmFja2AsIGFuZCAgYHJlbW92ZXRyYWNrYC5cbiAgICpcbiAgICogQGZpcmVzIFRlY2gjYXVkaW90cmFja2NoYW5nZVxuICAgKiBAZmlyZXMgVGVjaCN2aWRlb3RyYWNrY2hhbmdlXG4gICAqIEBmaXJlcyBUZWNoI3RleHR0cmFja2NoYW5nZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5pbml0VHJhY2tMaXN0ZW5lcnMgPSBmdW5jdGlvbiBpbml0VHJhY2tMaXN0ZW5lcnMoKSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAvKipcbiAgICAgICogVHJpZ2dlcmVkIHdoZW4gdHJhY2tzIGFyZSBhZGRlZCBvciByZW1vdmVkIG9uIHRoZSBUZWNoIHtAbGluayBBdWRpb1RyYWNrTGlzdH1cbiAgICAgICpcbiAgICAgICogQGV2ZW50IFRlY2gjYXVkaW90cmFja2NoYW5nZVxuICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAqL1xuXG4gICAgLyoqXG4gICAgICAqIFRyaWdnZXJlZCB3aGVuIHRyYWNrcyBhcmUgYWRkZWQgb3IgcmVtb3ZlZCBvbiB0aGUgVGVjaCB7QGxpbmsgVmlkZW9UcmFja0xpc3R9XG4gICAgICAqXG4gICAgICAqIEBldmVudCBUZWNoI3ZpZGVvdHJhY2tjaGFuZ2VcbiAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgKi9cblxuICAgIC8qKlxuICAgICAgKiBUcmlnZ2VyZWQgd2hlbiB0cmFja3MgYXJlIGFkZGVkIG9yIHJlbW92ZWQgb24gdGhlIFRlY2gge0BsaW5rIFRleHRUcmFja0xpc3R9XG4gICAgICAqXG4gICAgICAqIEBldmVudCBUZWNoI3RleHR0cmFja2NoYW5nZVxuICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAqL1xuICAgIE5PUk1BTC5uYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICB2YXIgcHJvcHMgPSBOT1JNQUxbbmFtZV07XG5cbiAgICAgIHZhciB0cmFja0xpc3RDaGFuZ2VzID0gZnVuY3Rpb24gdHJhY2tMaXN0Q2hhbmdlcygpIHtcbiAgICAgICAgX3RoaXM0LnRyaWdnZXIobmFtZSArIFwidHJhY2tjaGFuZ2VcIik7XG4gICAgICB9O1xuXG4gICAgICB2YXIgdHJhY2tzID0gX3RoaXM0W3Byb3BzLmdldHRlck5hbWVdKCk7XG5cbiAgICAgIHRyYWNrcy5hZGRFdmVudExpc3RlbmVyKCdyZW1vdmV0cmFjaycsIHRyYWNrTGlzdENoYW5nZXMpO1xuICAgICAgdHJhY2tzLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHRyYWNrJywgdHJhY2tMaXN0Q2hhbmdlcyk7XG5cbiAgICAgIF90aGlzNC5vbignZGlzcG9zZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJhY2tzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3JlbW92ZXRyYWNrJywgdHJhY2tMaXN0Q2hhbmdlcyk7XG4gICAgICAgIHRyYWNrcy5yZW1vdmVFdmVudExpc3RlbmVyKCdhZGR0cmFjaycsIHRyYWNrTGlzdENoYW5nZXMpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEVtdWxhdGUgVGV4dFRyYWNrcyB1c2luZyB2dHQuanMgaWYgbmVjZXNzYXJ5XG4gICAqXG4gICAqIEBmaXJlcyBUZWNoI3Z0dGpzbG9hZGVkXG4gICAqIEBmaXJlcyBUZWNoI3Z0dGpzZXJyb3JcbiAgICovXG4gIDtcblxuICBfcHJvdG8uYWRkV2ViVnR0U2NyaXB0XyA9IGZ1bmN0aW9uIGFkZFdlYlZ0dFNjcmlwdF8oKSB7XG4gICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICBpZiAod2luZG93JDEuV2ViVlRUKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBJbml0aWFsbHksIFRlY2guZWxfIGlzIGEgY2hpbGQgb2YgYSBkdW1teS1kaXYgd2FpdCB1bnRpbCB0aGUgQ29tcG9uZW50IHN5c3RlbVxuICAgIC8vIHNpZ25hbHMgdGhhdCB0aGUgVGVjaCBpcyByZWFkeSBhdCB3aGljaCBwb2ludCBUZWNoLmVsXyBpcyBwYXJ0IG9mIHRoZSBET01cbiAgICAvLyBiZWZvcmUgaW5zZXJ0aW5nIHRoZSBXZWJWVFQgc2NyaXB0XG5cblxuICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRoaXMuZWwoKSkpIHtcbiAgICAgIC8vIGxvYWQgdmlhIHJlcXVpcmUgaWYgYXZhaWxhYmxlIGFuZCB2dHQuanMgc2NyaXB0IGxvY2F0aW9uIHdhcyBub3QgcGFzc2VkIGluXG4gICAgICAvLyBhcyBhbiBvcHRpb24uIG5vdnR0IGJ1aWxkcyB3aWxsIHR1cm4gdGhlIGFib3ZlIHJlcXVpcmUgY2FsbCBpbnRvIGFuIGVtcHR5IG9iamVjdFxuICAgICAgLy8gd2hpY2ggd2lsbCBjYXVzZSB0aGlzIGlmIGNoZWNrIHRvIGFsd2F5cyBmYWlsLlxuICAgICAgaWYgKCF0aGlzLm9wdGlvbnNfWyd2dHQuanMnXSAmJiBpc1BsYWluKHZ0dCkgJiYgT2JqZWN0LmtleXModnR0KS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcigndnR0anNsb2FkZWQnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBsb2FkIHZ0dC5qcyB2aWEgdGhlIHNjcmlwdCBsb2NhdGlvbiBvcHRpb24gb3IgdGhlIGNkbiBvZiBubyBsb2NhdGlvbiB3YXNcbiAgICAgIC8vIHBhc3NlZCBpblxuXG5cbiAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgIHNjcmlwdC5zcmMgPSB0aGlzLm9wdGlvbnNfWyd2dHQuanMnXSB8fCAnaHR0cHM6Ly92anMuemVuY2RuLm5ldC92dHRqcy8wLjE0LjEvdnR0Lm1pbi5qcyc7XG5cbiAgICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIHZ0dC5qcyBpcyBsb2FkZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCBUZWNoI3Z0dGpzbG9hZGVkXG4gICAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzNS50cmlnZ2VyKCd2dHRqc2xvYWRlZCcpO1xuICAgICAgfTtcblxuICAgICAgc2NyaXB0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlZCB3aGVuIHZ0dC5qcyB3YXMgbm90IGxvYWRlZCBkdWUgdG8gYW4gZXJyb3JcbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IFRlY2gjdnR0anNsb2FkZWRcbiAgICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXM1LnRyaWdnZXIoJ3Z0dGpzZXJyb3InKTtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMub24oJ2Rpc3Bvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNjcmlwdC5vbmxvYWQgPSBudWxsO1xuICAgICAgICBzY3JpcHQub25lcnJvciA9IG51bGw7XG4gICAgICB9KTsgLy8gYnV0IGhhdmUgbm90IGxvYWRlZCB5ZXQgYW5kIHdlIHNldCBpdCB0byB0cnVlIGJlZm9yZSB0aGUgaW5qZWN0IHNvIHRoYXRcbiAgICAgIC8vIHdlIGRvbid0IG92ZXJ3cml0ZSB0aGUgaW5qZWN0ZWQgd2luZG93LldlYlZUVCBpZiBpdCBsb2FkcyByaWdodCBhd2F5XG5cbiAgICAgIHdpbmRvdyQxLldlYlZUVCA9IHRydWU7XG4gICAgICB0aGlzLmVsKCkucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlYWR5KHRoaXMuYWRkV2ViVnR0U2NyaXB0Xyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBFbXVsYXRlIHRleHR0cmFja3NcbiAgICpcbiAgICovXG4gIDtcblxuICBfcHJvdG8uZW11bGF0ZVRleHRUcmFja3MgPSBmdW5jdGlvbiBlbXVsYXRlVGV4dFRyYWNrcygpIHtcbiAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgIHZhciB0cmFja3MgPSB0aGlzLnRleHRUcmFja3MoKTtcbiAgICB2YXIgcmVtb3RlVHJhY2tzID0gdGhpcy5yZW1vdGVUZXh0VHJhY2tzKCk7XG5cbiAgICB2YXIgaGFuZGxlQWRkVHJhY2sgPSBmdW5jdGlvbiBoYW5kbGVBZGRUcmFjayhlKSB7XG4gICAgICByZXR1cm4gdHJhY2tzLmFkZFRyYWNrKGUudHJhY2spO1xuICAgIH07XG5cbiAgICB2YXIgaGFuZGxlUmVtb3ZlVHJhY2sgPSBmdW5jdGlvbiBoYW5kbGVSZW1vdmVUcmFjayhlKSB7XG4gICAgICByZXR1cm4gdHJhY2tzLnJlbW92ZVRyYWNrKGUudHJhY2spO1xuICAgIH07XG5cbiAgICByZW1vdGVUcmFja3Mub24oJ2FkZHRyYWNrJywgaGFuZGxlQWRkVHJhY2spO1xuICAgIHJlbW90ZVRyYWNrcy5vbigncmVtb3ZldHJhY2snLCBoYW5kbGVSZW1vdmVUcmFjayk7XG4gICAgdGhpcy5hZGRXZWJWdHRTY3JpcHRfKCk7XG5cbiAgICB2YXIgdXBkYXRlRGlzcGxheSA9IGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXkoKSB7XG4gICAgICByZXR1cm4gX3RoaXM2LnRyaWdnZXIoJ3RleHR0cmFja2NoYW5nZScpO1xuICAgIH07XG5cbiAgICB2YXIgdGV4dFRyYWNrc0NoYW5nZXMgPSBmdW5jdGlvbiB0ZXh0VHJhY2tzQ2hhbmdlcygpIHtcbiAgICAgIHVwZGF0ZURpc3BsYXkoKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRyYWNrID0gdHJhY2tzW2ldO1xuICAgICAgICB0cmFjay5yZW1vdmVFdmVudExpc3RlbmVyKCdjdWVjaGFuZ2UnLCB1cGRhdGVEaXNwbGF5KTtcblxuICAgICAgICBpZiAodHJhY2subW9kZSA9PT0gJ3Nob3dpbmcnKSB7XG4gICAgICAgICAgdHJhY2suYWRkRXZlbnRMaXN0ZW5lcignY3VlY2hhbmdlJywgdXBkYXRlRGlzcGxheSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGV4dFRyYWNrc0NoYW5nZXMoKTtcbiAgICB0cmFja3MuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGV4dFRyYWNrc0NoYW5nZXMpO1xuICAgIHRyYWNrcy5hZGRFdmVudExpc3RlbmVyKCdhZGR0cmFjaycsIHRleHRUcmFja3NDaGFuZ2VzKTtcbiAgICB0cmFja3MuYWRkRXZlbnRMaXN0ZW5lcigncmVtb3ZldHJhY2snLCB0ZXh0VHJhY2tzQ2hhbmdlcyk7XG4gICAgdGhpcy5vbignZGlzcG9zZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlbW90ZVRyYWNrcy5vZmYoJ2FkZHRyYWNrJywgaGFuZGxlQWRkVHJhY2spO1xuICAgICAgcmVtb3RlVHJhY2tzLm9mZigncmVtb3ZldHJhY2snLCBoYW5kbGVSZW1vdmVUcmFjayk7XG4gICAgICB0cmFja3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGV4dFRyYWNrc0NoYW5nZXMpO1xuICAgICAgdHJhY2tzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FkZHRyYWNrJywgdGV4dFRyYWNrc0NoYW5nZXMpO1xuICAgICAgdHJhY2tzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3JlbW92ZXRyYWNrJywgdGV4dFRyYWNrc0NoYW5nZXMpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdHJhY2sgPSB0cmFja3NbaV07XG4gICAgICAgIHRyYWNrLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2N1ZWNoYW5nZScsIHVwZGF0ZURpc3BsYXkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYW5kIHJldHVybnMgYSByZW1vdGUge0BsaW5rIFRleHRUcmFja30gb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2luZFxuICAgKiAgICAgICAgYFRleHRUcmFja2Aga2luZCAoc3VidGl0bGVzLCBjYXB0aW9ucywgZGVzY3JpcHRpb25zLCBjaGFwdGVycywgb3IgbWV0YWRhdGEpXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbGFiZWxdXG4gICAqICAgICAgICBMYWJlbCB0byBpZGVudGlmeSB0aGUgdGV4dCB0cmFja1xuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xhbmd1YWdlXVxuICAgKiAgICAgICAgVHdvIGxldHRlciBsYW5ndWFnZSBhYmJyZXZpYXRpb25cbiAgICpcbiAgICogQHJldHVybiB7VGV4dFRyYWNrfVxuICAgKiAgICAgICAgIFRoZSBUZXh0VHJhY2sgdGhhdCBnZXRzIGNyZWF0ZWQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmFkZFRleHRUcmFjayA9IGZ1bmN0aW9uIGFkZFRleHRUcmFjayhraW5kLCBsYWJlbCwgbGFuZ3VhZ2UpIHtcbiAgICBpZiAoIWtpbmQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGV4dFRyYWNrIGtpbmQgaXMgcmVxdWlyZWQgYnV0IHdhcyBub3QgcHJvdmlkZWQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlVHJhY2tIZWxwZXIodGhpcywga2luZCwgbGFiZWwsIGxhbmd1YWdlKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGFuIGVtdWxhdGVkIFRleHRUcmFjayBmb3IgdXNlIGJ5IGFkZFJlbW90ZVRleHRUcmFja1xuICAgKlxuICAgKiBUaGlzIGlzIGludGVuZGVkIHRvIGJlIG92ZXJyaWRkZW4gYnkgY2xhc3NlcyB0aGF0IGluaGVyaXQgZnJvbVxuICAgKiBUZWNoIGluIG9yZGVyIHRvIGNyZWF0ZSBuYXRpdmUgb3IgY3VzdG9tIFRleHRUcmFja3MuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqICAgICAgICBUaGUgb2JqZWN0IHNob3VsZCBjb250YWluIHRoZSBvcHRpb25zIHRvIGluaXRpYWxpemUgdGhlIFRleHRUcmFjayB3aXRoLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMua2luZF1cbiAgICogICAgICAgIGBUZXh0VHJhY2tgIGtpbmQgKHN1YnRpdGxlcywgY2FwdGlvbnMsIGRlc2NyaXB0aW9ucywgY2hhcHRlcnMsIG9yIG1ldGFkYXRhKS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxhYmVsXS5cbiAgICogICAgICAgIExhYmVsIHRvIGlkZW50aWZ5IHRoZSB0ZXh0IHRyYWNrXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYW5ndWFnZV1cbiAgICogICAgICAgIFR3byBsZXR0ZXIgbGFuZ3VhZ2UgYWJicmV2aWF0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJuIHtIVE1MVHJhY2tFbGVtZW50fVxuICAgKiAgICAgICAgIFRoZSB0cmFjayBlbGVtZW50IHRoYXQgZ2V0cyBjcmVhdGVkLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jcmVhdGVSZW1vdGVUZXh0VHJhY2sgPSBmdW5jdGlvbiBjcmVhdGVSZW1vdGVUZXh0VHJhY2sob3B0aW9ucykge1xuICAgIHZhciB0cmFjayA9IG1lcmdlT3B0aW9ucyhvcHRpb25zLCB7XG4gICAgICB0ZWNoOiB0aGlzXG4gICAgfSk7XG4gICAgcmV0dXJuIG5ldyBSRU1PVEUucmVtb3RlVGV4dEVsLlRyYWNrQ2xhc3ModHJhY2spO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgcmVtb3RlIHRleHQgdHJhY2sgb2JqZWN0IGFuZCByZXR1cm5zIGFuIGh0bWwgdHJhY2sgZWxlbWVudC5cbiAgICpcbiAgICogPiBOb3RlOiBUaGlzIGNhbiBiZSBhbiBlbXVsYXRlZCB7QGxpbmsgSFRNTFRyYWNrRWxlbWVudH0gb3IgYSBuYXRpdmUgb25lLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiAgICAgICAgU2VlIHtAbGluayBUZWNoI2NyZWF0ZVJlbW90ZVRleHRUcmFja30gZm9yIG1vcmUgZGV0YWlsZWQgcHJvcGVydGllcy5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbbWFudWFsQ2xlYW51cD10cnVlXVxuICAgKiAgICAgICAgLSBXaGVuIGZhbHNlOiB0aGUgVGV4dFRyYWNrIHdpbGwgYmUgYXV0b21hdGljYWxseSByZW1vdmVkIGZyb20gdGhlIHZpZGVvXG4gICAqICAgICAgICAgIGVsZW1lbnQgd2hlbmV2ZXIgdGhlIHNvdXJjZSBjaGFuZ2VzXG4gICAqICAgICAgICAtIFdoZW4gVHJ1ZTogVGhlIFRleHRUcmFjayB3aWxsIGhhdmUgdG8gYmUgY2xlYW5lZCB1cCBtYW51YWxseVxuICAgKlxuICAgKiBAcmV0dXJuIHtIVE1MVHJhY2tFbGVtZW50fVxuICAgKiAgICAgICAgIEFuIEh0bWwgVHJhY2sgRWxlbWVudC5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgVGhlIGRlZmF1bHQgZnVuY3Rpb25hbGl0eSBmb3IgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGVxdWl2YWxlbnRcbiAgICogICAgICAgICAgICAgdG8gXCJtYW51YWxDbGVhbnVwPWZhbHNlXCIgaW4gdGhlIGZ1dHVyZS4gVGhlIG1hbnVhbENsZWFudXAgcGFyYW1ldGVyIHdpbGxcbiAgICogICAgICAgICAgICAgYWxzbyBiZSByZW1vdmVkLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5hZGRSZW1vdGVUZXh0VHJhY2sgPSBmdW5jdGlvbiBhZGRSZW1vdGVUZXh0VHJhY2sob3B0aW9ucywgbWFudWFsQ2xlYW51cCkge1xuICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIHZhciBodG1sVHJhY2tFbGVtZW50ID0gdGhpcy5jcmVhdGVSZW1vdGVUZXh0VHJhY2sob3B0aW9ucyk7XG5cbiAgICBpZiAobWFudWFsQ2xlYW51cCAhPT0gdHJ1ZSAmJiBtYW51YWxDbGVhbnVwICE9PSBmYWxzZSkge1xuICAgICAgLy8gZGVwcmVjYXRpb24gd2FybmluZ1xuICAgICAgbG9nLndhcm4oJ0NhbGxpbmcgYWRkUmVtb3RlVGV4dFRyYWNrIHdpdGhvdXQgZXhwbGljaXRseSBzZXR0aW5nIHRoZSBcIm1hbnVhbENsZWFudXBcIiBwYXJhbWV0ZXIgdG8gYHRydWVgIGlzIGRlcHJlY2F0ZWQgYW5kIGRlZmF1bHQgdG8gYGZhbHNlYCBpbiBmdXR1cmUgdmVyc2lvbiBvZiB2aWRlby5qcycpO1xuICAgICAgbWFudWFsQ2xlYW51cCA9IHRydWU7XG4gICAgfSAvLyBzdG9yZSBIVE1MVHJhY2tFbGVtZW50IGFuZCBUZXh0VHJhY2sgdG8gcmVtb3RlIGxpc3RcblxuXG4gICAgdGhpcy5yZW1vdGVUZXh0VHJhY2tFbHMoKS5hZGRUcmFja0VsZW1lbnRfKGh0bWxUcmFja0VsZW1lbnQpO1xuICAgIHRoaXMucmVtb3RlVGV4dFRyYWNrcygpLmFkZFRyYWNrKGh0bWxUcmFja0VsZW1lbnQudHJhY2spO1xuXG4gICAgaWYgKG1hbnVhbENsZWFudXAgIT09IHRydWUpIHtcbiAgICAgIC8vIGNyZWF0ZSB0aGUgVGV4dFRyYWNrTGlzdCBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICB0aGlzLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzNy5hdXRvUmVtb3RlVGV4dFRyYWNrc18uYWRkVHJhY2soaHRtbFRyYWNrRWxlbWVudC50cmFjayk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbFRyYWNrRWxlbWVudDtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIGEgcmVtb3RlIHRleHQgdHJhY2sgZnJvbSB0aGUgcmVtb3RlIGBUZXh0VHJhY2tMaXN0YC5cbiAgICpcbiAgICogQHBhcmFtIHtUZXh0VHJhY2t9IHRyYWNrXG4gICAqICAgICAgICBgVGV4dFRyYWNrYCB0byByZW1vdmUgZnJvbSB0aGUgYFRleHRUcmFja0xpc3RgXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlbW92ZVJlbW90ZVRleHRUcmFjayA9IGZ1bmN0aW9uIHJlbW92ZVJlbW90ZVRleHRUcmFjayh0cmFjaykge1xuICAgIHZhciB0cmFja0VsZW1lbnQgPSB0aGlzLnJlbW90ZVRleHRUcmFja0VscygpLmdldFRyYWNrRWxlbWVudEJ5VHJhY2tfKHRyYWNrKTsgLy8gcmVtb3ZlIEhUTUxUcmFja0VsZW1lbnQgYW5kIFRleHRUcmFjayBmcm9tIHJlbW90ZSBsaXN0XG5cbiAgICB0aGlzLnJlbW90ZVRleHRUcmFja0VscygpLnJlbW92ZVRyYWNrRWxlbWVudF8odHJhY2tFbGVtZW50KTtcbiAgICB0aGlzLnJlbW90ZVRleHRUcmFja3MoKS5yZW1vdmVUcmFjayh0cmFjayk7XG4gICAgdGhpcy5hdXRvUmVtb3RlVGV4dFRyYWNrc18ucmVtb3ZlVHJhY2sodHJhY2spO1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIGF2YWlsYWJsZSBtZWRpYSBwbGF5YmFjayBxdWFsaXR5IG1ldHJpY3MgYXMgc3BlY2lmaWVkIGJ5IHRoZSBXM0MncyBNZWRpYVxuICAgKiBQbGF5YmFjayBRdWFsaXR5IEFQSS5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93aWNnLmdpdGh1Yi5pby9tZWRpYS1wbGF5YmFjay1xdWFsaXR5fVxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqICAgICAgICAgQW4gb2JqZWN0IHdpdGggc3VwcG9ydGVkIG1lZGlhIHBsYXliYWNrIHF1YWxpdHkgbWV0cmljc1xuICAgKlxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIDtcblxuICBfcHJvdG8uZ2V0VmlkZW9QbGF5YmFja1F1YWxpdHkgPSBmdW5jdGlvbiBnZXRWaWRlb1BsYXliYWNrUXVhbGl0eSgpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgLyoqXG4gICAqIEEgbWV0aG9kIHRvIHNldCBhIHBvc3RlciBmcm9tIGEgYFRlY2hgLlxuICAgKlxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIDtcblxuICBfcHJvdG8uc2V0UG9zdGVyID0gZnVuY3Rpb24gc2V0UG9zdGVyKCkge31cbiAgLyoqXG4gICAqIEEgbWV0aG9kIHRvIGNoZWNrIGZvciB0aGUgcHJlc2VuY2Ugb2YgdGhlICdwbGF5c2lubGluZScgPHZpZGVvPiBhdHRyaWJ1dGUuXG4gICAqXG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wbGF5c2lubGluZSA9IGZ1bmN0aW9uIHBsYXlzaW5saW5lKCkge31cbiAgLyoqXG4gICAqIEEgbWV0aG9kIHRvIHNldCBvciB1bnNldCB0aGUgJ3BsYXlzaW5saW5lJyA8dmlkZW8+IGF0dHJpYnV0ZS5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnNldFBsYXlzaW5saW5lID0gZnVuY3Rpb24gc2V0UGxheXNpbmxpbmUoKSB7fVxuICAvKipcbiAgICogQXR0ZW1wdCB0byBmb3JjZSBvdmVycmlkZSBvZiBuYXRpdmUgYXVkaW8gdHJhY2tzLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IG92ZXJyaWRlIC0gSWYgc2V0IHRvIHRydWUgbmF0aXZlIGF1ZGlvIHdpbGwgYmUgb3ZlcnJpZGRlbixcbiAgICogb3RoZXJ3aXNlIG5hdGl2ZSBhdWRpbyB3aWxsIHBvdGVudGlhbGx5IGJlIHVzZWQuXG4gICAqXG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5vdmVycmlkZU5hdGl2ZUF1ZGlvVHJhY2tzID0gZnVuY3Rpb24gb3ZlcnJpZGVOYXRpdmVBdWRpb1RyYWNrcygpIHt9XG4gIC8qKlxuICAgKiBBdHRlbXB0IHRvIGZvcmNlIG92ZXJyaWRlIG9mIG5hdGl2ZSB2aWRlbyB0cmFja3MuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3ZlcnJpZGUgLSBJZiBzZXQgdG8gdHJ1ZSBuYXRpdmUgdmlkZW8gd2lsbCBiZSBvdmVycmlkZGVuLFxuICAgKiBvdGhlcndpc2UgbmF0aXZlIHZpZGVvIHdpbGwgcG90ZW50aWFsbHkgYmUgdXNlZC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLm92ZXJyaWRlTmF0aXZlVmlkZW9UcmFja3MgPSBmdW5jdGlvbiBvdmVycmlkZU5hdGl2ZVZpZGVvVHJhY2tzKCkge31cbiAgLypcbiAgICogQ2hlY2sgaWYgdGhlIHRlY2ggY2FuIHN1cHBvcnQgdGhlIGdpdmVuIG1pbWUtdHlwZS5cbiAgICpcbiAgICogVGhlIGJhc2UgdGVjaCBkb2VzIG5vdCBzdXBwb3J0IGFueSB0eXBlLCBidXQgc291cmNlIGhhbmRsZXJzIG1pZ2h0XG4gICAqIG92ZXJ3cml0ZSB0aGlzLlxuICAgKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHR5cGVcbiAgICogICAgICAgICBUaGUgbWltZXR5cGUgdG8gY2hlY2sgZm9yIHN1cHBvcnRcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiAgICAgICAgICdwcm9iYWJseScsICdtYXliZScsIG9yIGVtcHR5IHN0cmluZ1xuICAgKlxuICAgKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSFRNTE1lZGlhRWxlbWVudC9jYW5QbGF5VHlwZX1cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNhblBsYXlUeXBlID0gZnVuY3Rpb24gY2FuUGxheVR5cGUoKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgdHlwZSBpcyBzdXBwb3J0ZWQgYnkgdGhpcyB0ZWNoLlxuICAgKlxuICAgKiBUaGUgYmFzZSB0ZWNoIGRvZXMgbm90IHN1cHBvcnQgYW55IHR5cGUsIGJ1dCBzb3VyY2UgaGFuZGxlcnMgbWlnaHRcbiAgICogb3ZlcndyaXRlIHRoaXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gICAqICAgICAgICBUaGUgbWVkaWEgdHlwZSB0byBjaGVja1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFJldHVybnMgdGhlIG5hdGl2ZSB2aWRlbyBlbGVtZW50J3MgcmVzcG9uc2VcbiAgICovXG4gIDtcblxuICBUZWNoLmNhblBsYXlUeXBlID0gZnVuY3Rpb24gY2FuUGxheVR5cGUoKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgdGVjaCBjYW4gc3VwcG9ydCB0aGUgZ2l2ZW4gc291cmNlXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzcmNPYmpcbiAgICogICAgICAgIFRoZSBzb3VyY2Ugb2JqZWN0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqICAgICAgICBUaGUgb3B0aW9ucyBwYXNzZWQgdG8gdGhlIHRlY2hcbiAgICogQHJldHVybiB7c3RyaW5nfSAncHJvYmFibHknLCAnbWF5YmUnLCBvciAnJyAoZW1wdHkgc3RyaW5nKVxuICAgKi9cbiAgO1xuXG4gIFRlY2guY2FuUGxheVNvdXJjZSA9IGZ1bmN0aW9uIGNhblBsYXlTb3VyY2Uoc3JjT2JqLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIFRlY2guY2FuUGxheVR5cGUoc3JjT2JqLnR5cGUpO1xuICB9XG4gIC8qXG4gICAqIFJldHVybiB3aGV0aGVyIHRoZSBhcmd1bWVudCBpcyBhIFRlY2ggb3Igbm90LlxuICAgKiBDYW4gYmUgcGFzc2VkIGVpdGhlciBhIENsYXNzIGxpa2UgYEh0bWw1YCBvciBhIGluc3RhbmNlIGxpa2UgYHBsYXllci50ZWNoX2BcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbXBvbmVudFxuICAgKiAgICAgICAgVGhlIGl0ZW0gdG8gY2hlY2tcbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICBXaGV0aGVyIGl0IGlzIGEgdGVjaCBvciBub3RcbiAgICogICAgICAgICAtIFRydWUgaWYgaXQgaXMgYSB0ZWNoXG4gICAqICAgICAgICAgLSBGYWxzZSBpZiBpdCBpcyBub3RcbiAgICovXG4gIDtcblxuICBUZWNoLmlzVGVjaCA9IGZ1bmN0aW9uIGlzVGVjaChjb21wb25lbnQpIHtcbiAgICByZXR1cm4gY29tcG9uZW50LnByb3RvdHlwZSBpbnN0YW5jZW9mIFRlY2ggfHwgY29tcG9uZW50IGluc3RhbmNlb2YgVGVjaCB8fCBjb21wb25lbnQgPT09IFRlY2g7XG4gIH1cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGBUZWNoYCBpbnRvIGEgc2hhcmVkIGxpc3QgZm9yIHZpZGVvanMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqICAgICAgICBOYW1lIG9mIHRoZSBgVGVjaGAgdG8gcmVnaXN0ZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0ZWNoXG4gICAqICAgICAgICBUaGUgYFRlY2hgIGNsYXNzIHRvIHJlZ2lzdGVyLlxuICAgKi9cbiAgO1xuXG4gIFRlY2gucmVnaXN0ZXJUZWNoID0gZnVuY3Rpb24gcmVnaXN0ZXJUZWNoKG5hbWUsIHRlY2gpIHtcbiAgICBpZiAoIVRlY2gudGVjaHNfKSB7XG4gICAgICBUZWNoLnRlY2hzXyA9IHt9O1xuICAgIH1cblxuICAgIGlmICghVGVjaC5pc1RlY2godGVjaCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRlY2ggXCIgKyBuYW1lICsgXCIgbXVzdCBiZSBhIFRlY2hcIik7XG4gICAgfVxuXG4gICAgaWYgKCFUZWNoLmNhblBsYXlUeXBlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RlY2hzIG11c3QgaGF2ZSBhIHN0YXRpYyBjYW5QbGF5VHlwZSBtZXRob2Qgb24gdGhlbScpO1xuICAgIH1cblxuICAgIGlmICghVGVjaC5jYW5QbGF5U291cmNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RlY2hzIG11c3QgaGF2ZSBhIHN0YXRpYyBjYW5QbGF5U291cmNlIG1ldGhvZCBvbiB0aGVtJyk7XG4gICAgfVxuXG4gICAgbmFtZSA9IHRvVGl0bGVDYXNlKG5hbWUpO1xuICAgIFRlY2gudGVjaHNfW25hbWVdID0gdGVjaDtcblxuICAgIGlmIChuYW1lICE9PSAnVGVjaCcpIHtcbiAgICAgIC8vIGNhbWVsIGNhc2UgdGhlIHRlY2hOYW1lIGZvciB1c2UgaW4gdGVjaE9yZGVyXG4gICAgICBUZWNoLmRlZmF1bHRUZWNoT3JkZXJfLnB1c2gobmFtZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRlY2g7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIGBUZWNoYCBmcm9tIHRoZSBzaGFyZWQgbGlzdCBieSBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiAgICAgICAgYGNhbWVsQ2FzZWAgb3IgYFRpdGxlQ2FzZWAgbmFtZSBvZiB0aGUgVGVjaCB0byBnZXRcbiAgICpcbiAgICogQHJldHVybiB7VGVjaHx1bmRlZmluZWR9XG4gICAqICAgICAgICAgVGhlIGBUZWNoYCBvciB1bmRlZmluZWQgaWYgdGhlcmUgd2FzIG5vIHRlY2ggd2l0aCB0aGUgbmFtZSByZXF1ZXN0ZWQuXG4gICAqL1xuICA7XG5cbiAgVGVjaC5nZXRUZWNoID0gZnVuY3Rpb24gZ2V0VGVjaChuYW1lKSB7XG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbmFtZSA9IHRvVGl0bGVDYXNlKG5hbWUpO1xuXG4gICAgaWYgKFRlY2gudGVjaHNfICYmIFRlY2gudGVjaHNfW25hbWVdKSB7XG4gICAgICByZXR1cm4gVGVjaC50ZWNoc19bbmFtZV07XG4gICAgfVxuXG4gICAgaWYgKHdpbmRvdyQxICYmIHdpbmRvdyQxLnZpZGVvanMgJiYgd2luZG93JDEudmlkZW9qc1tuYW1lXSkge1xuICAgICAgbG9nLndhcm4oXCJUaGUgXCIgKyBuYW1lICsgXCIgdGVjaCB3YXMgYWRkZWQgdG8gdGhlIHZpZGVvanMgb2JqZWN0IHdoZW4gaXQgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgdXNpbmcgdmlkZW9qcy5yZWdpc3RlclRlY2gobmFtZSwgdGVjaClcIik7XG4gICAgICByZXR1cm4gd2luZG93JDEudmlkZW9qc1tuYW1lXTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFRlY2g7XG59KENvbXBvbmVudCk7XG4vKipcbiAqIEdldCB0aGUge0BsaW5rIFZpZGVvVHJhY2tMaXN0fVxuICpcbiAqIEByZXR1cm5zIHtWaWRlb1RyYWNrTGlzdH1cbiAqIEBtZXRob2QgVGVjaC5wcm90b3R5cGUudmlkZW9UcmFja3NcbiAqL1xuXG4vKipcbiAqIEdldCB0aGUge0BsaW5rIEF1ZGlvVHJhY2tMaXN0fVxuICpcbiAqIEByZXR1cm5zIHtBdWRpb1RyYWNrTGlzdH1cbiAqIEBtZXRob2QgVGVjaC5wcm90b3R5cGUuYXVkaW9UcmFja3NcbiAqL1xuXG4vKipcbiAqIEdldCB0aGUge0BsaW5rIFRleHRUcmFja0xpc3R9XG4gKlxuICogQHJldHVybnMge1RleHRUcmFja0xpc3R9XG4gKiBAbWV0aG9kIFRlY2gucHJvdG90eXBlLnRleHRUcmFja3NcbiAqL1xuXG4vKipcbiAqIEdldCB0aGUgcmVtb3RlIGVsZW1lbnQge0BsaW5rIFRleHRUcmFja0xpc3R9XG4gKlxuICogQHJldHVybnMge1RleHRUcmFja0xpc3R9XG4gKiBAbWV0aG9kIFRlY2gucHJvdG90eXBlLnJlbW90ZVRleHRUcmFja3NcbiAqL1xuXG4vKipcbiAqIEdldCB0aGUgcmVtb3RlIGVsZW1lbnQge0BsaW5rIEh0bWxUcmFja0VsZW1lbnRMaXN0fVxuICpcbiAqIEByZXR1cm5zIHtIdG1sVHJhY2tFbGVtZW50TGlzdH1cbiAqIEBtZXRob2QgVGVjaC5wcm90b3R5cGUucmVtb3RlVGV4dFRyYWNrRWxzXG4gKi9cblxuXG5BTEwubmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICB2YXIgcHJvcHMgPSBBTExbbmFtZV07XG5cbiAgVGVjaC5wcm90b3R5cGVbcHJvcHMuZ2V0dGVyTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpc1twcm9wcy5wcml2YXRlTmFtZV0gPSB0aGlzW3Byb3BzLnByaXZhdGVOYW1lXSB8fCBuZXcgcHJvcHMuTGlzdENsYXNzKCk7XG4gICAgcmV0dXJuIHRoaXNbcHJvcHMucHJpdmF0ZU5hbWVdO1xuICB9O1xufSk7XG4vKipcbiAqIExpc3Qgb2YgYXNzb2NpYXRlZCB0ZXh0IHRyYWNrc1xuICpcbiAqIEB0eXBlIHtUZXh0VHJhY2tMaXN0fVxuICogQHByaXZhdGVcbiAqIEBwcm9wZXJ0eSBUZWNoI3RleHRUcmFja3NfXG4gKi9cblxuLyoqXG4gKiBMaXN0IG9mIGFzc29jaWF0ZWQgYXVkaW8gdHJhY2tzLlxuICpcbiAqIEB0eXBlIHtBdWRpb1RyYWNrTGlzdH1cbiAqIEBwcml2YXRlXG4gKiBAcHJvcGVydHkgVGVjaCNhdWRpb1RyYWNrc19cbiAqL1xuXG4vKipcbiAqIExpc3Qgb2YgYXNzb2NpYXRlZCB2aWRlbyB0cmFja3MuXG4gKlxuICogQHR5cGUge1ZpZGVvVHJhY2tMaXN0fVxuICogQHByaXZhdGVcbiAqIEBwcm9wZXJ0eSBUZWNoI3ZpZGVvVHJhY2tzX1xuICovXG5cbi8qKlxuICogQm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGBUZWNoYCBzdXBwb3J0cyB2b2x1bWUgY29udHJvbC5cbiAqXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuVGVjaC5wcm90b3R5cGUuZmVhdHVyZXNWb2x1bWVDb250cm9sID0gdHJ1ZTtcbi8qKlxuICogQm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGBUZWNoYCBzdXBwb3J0cyBtdXRpbmcgdm9sdW1lLlxuICpcbiAqIEB0eXBlIHtib2xlYW59XG4gKiBAZGVmYXVsdFxuICovXG5cblRlY2gucHJvdG90eXBlLmZlYXR1cmVzTXV0ZUNvbnRyb2wgPSB0cnVlO1xuLyoqXG4gKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYFRlY2hgIHN1cHBvcnRzIGZ1bGxzY3JlZW4gcmVzaXplIGNvbnRyb2wuXG4gKiBSZXNpemluZyBwbHVnaW5zIHVzaW5nIHJlcXVlc3QgZnVsbHNjcmVlbiByZWxvYWRzIHRoZSBwbHVnaW5cbiAqXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuVGVjaC5wcm90b3R5cGUuZmVhdHVyZXNGdWxsc2NyZWVuUmVzaXplID0gZmFsc2U7XG4vKipcbiAqIEJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBgVGVjaGAgc3VwcG9ydHMgY2hhbmdpbmcgdGhlIHNwZWVkIGF0IHdoaWNoIHRoZSB2aWRlb1xuICogcGxheXMuIEV4YW1wbGVzOlxuICogICAtIFNldCBwbGF5ZXIgdG8gcGxheSAyeCAodHdpY2UpIGFzIGZhc3RcbiAqICAgLSBTZXQgcGxheWVyIHRvIHBsYXkgMC41eCAoaGFsZikgYXMgZmFzdFxuICpcbiAqIEB0eXBlIHtib29sZWFufVxuICogQGRlZmF1bHRcbiAqL1xuXG5UZWNoLnByb3RvdHlwZS5mZWF0dXJlc1BsYXliYWNrUmF0ZSA9IGZhbHNlO1xuLyoqXG4gKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYFRlY2hgIHN1cHBvcnRzIHRoZSBgcHJvZ3Jlc3NgIGV2ZW50LiBUaGlzIGlzIGN1cnJlbnRseVxuICogbm90IHRyaWdnZXJlZCBieSB2aWRlby1qcy1zd2YuIFRoaXMgd2lsbCBiZSB1c2VkIHRvIGRldGVybWluZSBpZlxuICoge0BsaW5rIFRlY2gjbWFudWFsUHJvZ3Jlc3NPbn0gc2hvdWxkIGJlIGNhbGxlZC5cbiAqXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuVGVjaC5wcm90b3R5cGUuZmVhdHVyZXNQcm9ncmVzc0V2ZW50cyA9IGZhbHNlO1xuLyoqXG4gKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYFRlY2hgIHN1cHBvcnRzIHRoZSBgc291cmNlc2V0YCBldmVudC5cbiAqXG4gKiBBIHRlY2ggc2hvdWxkIHNldCB0aGlzIHRvIGB0cnVlYCBhbmQgdGhlbiB1c2Uge0BsaW5rIFRlY2gjdHJpZ2dlclNvdXJjZXNldH1cbiAqIHRvIHRyaWdnZXIgYSB7QGxpbmsgVGVjaCNldmVudDpzb3VyY2VzZXR9IGF0IHRoZSBlYXJsaWVzdCB0aW1lIGFmdGVyIGdldHRpbmdcbiAqIGEgbmV3IHNvdXJjZS5cbiAqXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuVGVjaC5wcm90b3R5cGUuZmVhdHVyZXNTb3VyY2VzZXQgPSBmYWxzZTtcbi8qKlxuICogQm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGBUZWNoYCBzdXBwb3J0cyB0aGUgYHRpbWV1cGRhdGVgIGV2ZW50LiBUaGlzIGlzIGN1cnJlbnRseVxuICogbm90IHRyaWdnZXJlZCBieSB2aWRlby1qcy1zd2YuIFRoaXMgd2lsbCBiZSB1c2VkIHRvIGRldGVybWluZSBpZlxuICoge0BsaW5rIFRlY2gjbWFudWFsVGltZVVwZGF0ZXN9IHNob3VsZCBiZSBjYWxsZWQuXG4gKlxuICogQHR5cGUge2Jvb2xlYW59XG4gKiBAZGVmYXVsdFxuICovXG5cblRlY2gucHJvdG90eXBlLmZlYXR1cmVzVGltZXVwZGF0ZUV2ZW50cyA9IGZhbHNlO1xuLyoqXG4gKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYFRlY2hgIHN1cHBvcnRzIHRoZSBuYXRpdmUgYFRleHRUcmFja2BzLlxuICogVGhpcyB3aWxsIGhlbHAgdXMgaW50ZWdyYXRlIHdpdGggbmF0aXZlIGBUZXh0VHJhY2tgcyBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0aGVtLlxuICpcbiAqIEB0eXBlIHtib29sZWFufVxuICogQGRlZmF1bHRcbiAqL1xuXG5UZWNoLnByb3RvdHlwZS5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MgPSBmYWxzZTtcbi8qKlxuICogQSBmdW5jdGlvbmFsIG1peGluIGZvciB0ZWNocyB0aGF0IHdhbnQgdG8gdXNlIHRoZSBTb3VyY2UgSGFuZGxlciBwYXR0ZXJuLlxuICogU291cmNlIGhhbmRsZXJzIGFyZSBzY3JpcHRzIGZvciBoYW5kbGluZyBzcGVjaWZpYyBmb3JtYXRzLlxuICogVGhlIHNvdXJjZSBoYW5kbGVyIHBhdHRlcm4gaXMgdXNlZCBmb3IgYWRhcHRpdmUgZm9ybWF0cyAoSExTLCBEQVNIKSB0aGF0XG4gKiBtYW51YWxseSBsb2FkIHZpZGVvIGRhdGEgYW5kIGZlZWQgaXQgaW50byBhIFNvdXJjZSBCdWZmZXIgKE1lZGlhIFNvdXJjZSBFeHRlbnNpb25zKVxuICogRXhhbXBsZTogYFRlY2gud2l0aFNvdXJjZUhhbmRsZXJzLmNhbGwoTXlUZWNoKTtgXG4gKlxuICogQHBhcmFtIHtUZWNofSBfVGVjaFxuICogICAgICAgIFRoZSB0ZWNoIHRvIGFkZCBzb3VyY2UgaGFuZGxlciBmdW5jdGlvbnMgdG8uXG4gKlxuICogQG1peGVzIFRlY2h+U291cmNlSGFuZGxlckFkZGl0aW9uc1xuICovXG5cblRlY2gud2l0aFNvdXJjZUhhbmRsZXJzID0gZnVuY3Rpb24gKF9UZWNoKSB7XG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIHNvdXJjZSBoYW5kbGVyXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAgICogICAgICAgIFRoZSBzb3VyY2UgaGFuZGxlciBjbGFzc1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2luZGV4XVxuICAgKiAgICAgICAgUmVnaXN0ZXIgaXQgYXQgdGhlIGZvbGxvd2luZyBpbmRleFxuICAgKi9cbiAgX1RlY2gucmVnaXN0ZXJTb3VyY2VIYW5kbGVyID0gZnVuY3Rpb24gKGhhbmRsZXIsIGluZGV4KSB7XG4gICAgdmFyIGhhbmRsZXJzID0gX1RlY2guc291cmNlSGFuZGxlcnM7XG5cbiAgICBpZiAoIWhhbmRsZXJzKSB7XG4gICAgICBoYW5kbGVycyA9IF9UZWNoLnNvdXJjZUhhbmRsZXJzID0gW107XG4gICAgfVxuXG4gICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIGFkZCB0byB0aGUgZW5kIG9mIHRoZSBsaXN0XG4gICAgICBpbmRleCA9IGhhbmRsZXJzLmxlbmd0aDtcbiAgICB9XG5cbiAgICBoYW5kbGVycy5zcGxpY2UoaW5kZXgsIDAsIGhhbmRsZXIpO1xuICB9O1xuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIHRlY2ggY2FuIHN1cHBvcnQgdGhlIGdpdmVuIHR5cGUuIEFsc28gY2hlY2tzIHRoZVxuICAgKiBUZWNocyBzb3VyY2VIYW5kbGVycy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICogICAgICAgICBUaGUgbWltZXR5cGUgdG8gY2hlY2suXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICAncHJvYmFibHknLCAnbWF5YmUnLCBvciAnJyAoZW1wdHkgc3RyaW5nKVxuICAgKi9cblxuXG4gIF9UZWNoLmNhblBsYXlUeXBlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICB2YXIgaGFuZGxlcnMgPSBfVGVjaC5zb3VyY2VIYW5kbGVycyB8fCBbXTtcbiAgICB2YXIgY2FuO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoYW5kbGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgY2FuID0gaGFuZGxlcnNbaV0uY2FuUGxheVR5cGUodHlwZSk7XG5cbiAgICAgIGlmIChjYW4pIHtcbiAgICAgICAgcmV0dXJuIGNhbjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gJyc7XG4gIH07XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBzb3VyY2UgaGFuZGxlciB0aGF0IHN1cHBvcnRzIHRoZSBzb3VyY2UuXG4gICAqXG4gICAqIFRPRE86IEFuc3dlciBxdWVzdGlvbjogc2hvdWxkICdwcm9iYWJseScgYmUgcHJpb3JpdGl6ZWQgb3ZlciAnbWF5YmUnXG4gICAqXG4gICAqIEBwYXJhbSB7VGVjaH5Tb3VyY2VPYmplY3R9IHNvdXJjZVxuICAgKiAgICAgICAgVGhlIHNvdXJjZSBvYmplY3RcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogICAgICAgIFRoZSBvcHRpb25zIHBhc3NlZCB0byB0aGUgdGVjaFxuICAgKlxuICAgKiBAcmV0dXJuIHtTb3VyY2VIYW5kbGVyfG51bGx9XG4gICAqICAgICAgICAgIFRoZSBmaXJzdCBzb3VyY2UgaGFuZGxlciB0aGF0IHN1cHBvcnRzIHRoZSBzb3VyY2Ugb3IgbnVsbCBpZlxuICAgKiAgICAgICAgICBubyBTb3VyY2VIYW5kbGVyIHN1cHBvcnRzIHRoZSBzb3VyY2VcbiAgICovXG5cblxuICBfVGVjaC5zZWxlY3RTb3VyY2VIYW5kbGVyID0gZnVuY3Rpb24gKHNvdXJjZSwgb3B0aW9ucykge1xuICAgIHZhciBoYW5kbGVycyA9IF9UZWNoLnNvdXJjZUhhbmRsZXJzIHx8IFtdO1xuICAgIHZhciBjYW47XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhhbmRsZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjYW4gPSBoYW5kbGVyc1tpXS5jYW5IYW5kbGVTb3VyY2Uoc291cmNlLCBvcHRpb25zKTtcblxuICAgICAgaWYgKGNhbikge1xuICAgICAgICByZXR1cm4gaGFuZGxlcnNbaV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgdGVjaCBjYW4gc3VwcG9ydCB0aGUgZ2l2ZW4gc291cmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge1RlY2h+U291cmNlT2JqZWN0fSBzcmNPYmpcbiAgICogICAgICAgIFRoZSBzb3VyY2Ugb2JqZWN0XG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqICAgICAgICBUaGUgb3B0aW9ucyBwYXNzZWQgdG8gdGhlIHRlY2hcbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiAgICAgICAgICdwcm9iYWJseScsICdtYXliZScsIG9yICcnIChlbXB0eSBzdHJpbmcpXG4gICAqL1xuXG5cbiAgX1RlY2guY2FuUGxheVNvdXJjZSA9IGZ1bmN0aW9uIChzcmNPYmosIG9wdGlvbnMpIHtcbiAgICB2YXIgc2ggPSBfVGVjaC5zZWxlY3RTb3VyY2VIYW5kbGVyKHNyY09iaiwgb3B0aW9ucyk7XG5cbiAgICBpZiAoc2gpIHtcbiAgICAgIHJldHVybiBzaC5jYW5IYW5kbGVTb3VyY2Uoc3JjT2JqLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICByZXR1cm4gJyc7XG4gIH07XG4gIC8qKlxuICAgKiBXaGVuIHVzaW5nIGEgc291cmNlIGhhbmRsZXIsIHByZWZlciBpdHMgaW1wbGVtZW50YXRpb24gb2ZcbiAgICogYW55IGZ1bmN0aW9uIG5vcm1hbGx5IHByb3ZpZGVkIGJ5IHRoZSB0ZWNoLlxuICAgKi9cblxuXG4gIHZhciBkZWZlcnJhYmxlID0gWydzZWVrYWJsZScsICdzZWVraW5nJywgJ2R1cmF0aW9uJ107XG4gIC8qKlxuICAgKiBBIHdyYXBwZXIgYXJvdW5kIHtAbGluayBUZWNoI3NlZWthYmxlfSB0aGF0IHdpbGwgY2FsbCBhIGBTb3VyY2VIYW5kbGVyYHMgc2Vla2FibGVcbiAgICogZnVuY3Rpb24gaWYgaXQgZXhpc3RzLCB3aXRoIGEgZmFsbGJhY2sgdG8gdGhlIFRlY2hzIHNlZWthYmxlIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAbWV0aG9kIF9UZWNoLnNlZWthYmxlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBIHdyYXBwZXIgYXJvdW5kIHtAbGluayBUZWNoI2R1cmF0aW9ufSB0aGF0IHdpbGwgY2FsbCBhIGBTb3VyY2VIYW5kbGVyYHMgZHVyYXRpb25cbiAgICogZnVuY3Rpb24gaWYgaXQgZXhpc3RzLCBvdGhlcndpc2UgaXQgd2lsbCBmYWxsYmFjayB0byB0aGUgdGVjaHMgZHVyYXRpb24gZnVuY3Rpb24uXG4gICAqXG4gICAqIEBtZXRob2QgX1RlY2guZHVyYXRpb25cbiAgICovXG5cbiAgZGVmZXJyYWJsZS5mb3JFYWNoKGZ1bmN0aW9uIChmbk5hbWUpIHtcbiAgICB2YXIgb3JpZ2luYWxGbiA9IHRoaXNbZm5OYW1lXTtcblxuICAgIGlmICh0eXBlb2Ygb3JpZ2luYWxGbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXNbZm5OYW1lXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLnNvdXJjZUhhbmRsZXJfICYmIHRoaXMuc291cmNlSGFuZGxlcl9bZm5OYW1lXSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2VIYW5kbGVyX1tmbk5hbWVdLmFwcGx5KHRoaXMuc291cmNlSGFuZGxlcl8sIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvcmlnaW5hbEZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfSwgX1RlY2gucHJvdG90eXBlKTtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIGZ1bmN0aW9uIGZvciBzZXR0aW5nIHRoZSBzb3VyY2UgdXNpbmcgYSBzb3VyY2Ugb2JqZWN0XG4gICAqIGFuZCBzb3VyY2UgaGFuZGxlcnMuXG4gICAqIFNob3VsZCBuZXZlciBiZSBjYWxsZWQgdW5sZXNzIGEgc291cmNlIGhhbmRsZXIgd2FzIGZvdW5kLlxuICAgKlxuICAgKiBAcGFyYW0ge1RlY2h+U291cmNlT2JqZWN0fSBzb3VyY2VcbiAgICogICAgICAgIEEgc291cmNlIG9iamVjdCB3aXRoIHNyYyBhbmQgdHlwZSBrZXlzXG4gICAqL1xuXG4gIF9UZWNoLnByb3RvdHlwZS5zZXRTb3VyY2UgPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgdmFyIHNoID0gX1RlY2guc2VsZWN0U291cmNlSGFuZGxlcihzb3VyY2UsIHRoaXMub3B0aW9uc18pO1xuXG4gICAgaWYgKCFzaCkge1xuICAgICAgLy8gRmFsbCBiYWNrIHRvIGEgbmF0aXZlIHNvdXJjZSBoYW5kZXIgd2hlbiB1bnN1cHBvcnRlZCBzb3VyY2VzIGFyZVxuICAgICAgLy8gZGVsaWJlcmF0ZWx5IHNldFxuICAgICAgaWYgKF9UZWNoLm5hdGl2ZVNvdXJjZUhhbmRsZXIpIHtcbiAgICAgICAgc2ggPSBfVGVjaC5uYXRpdmVTb3VyY2VIYW5kbGVyO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nLmVycm9yKCdObyBzb3VyY2UgaGFuZGxlciBmb3VuZCBmb3IgdGhlIGN1cnJlbnQgc291cmNlLicpO1xuICAgICAgfVxuICAgIH0gLy8gRGlzcG9zZSBhbnkgZXhpc3Rpbmcgc291cmNlIGhhbmRsZXJcblxuXG4gICAgdGhpcy5kaXNwb3NlU291cmNlSGFuZGxlcigpO1xuICAgIHRoaXMub2ZmKCdkaXNwb3NlJywgdGhpcy5kaXNwb3NlU291cmNlSGFuZGxlcik7XG5cbiAgICBpZiAoc2ggIT09IF9UZWNoLm5hdGl2ZVNvdXJjZUhhbmRsZXIpIHtcbiAgICAgIHRoaXMuY3VycmVudFNvdXJjZV8gPSBzb3VyY2U7XG4gICAgfVxuXG4gICAgdGhpcy5zb3VyY2VIYW5kbGVyXyA9IHNoLmhhbmRsZVNvdXJjZShzb3VyY2UsIHRoaXMsIHRoaXMub3B0aW9uc18pO1xuICAgIHRoaXMub25lKCdkaXNwb3NlJywgdGhpcy5kaXNwb3NlU291cmNlSGFuZGxlcik7XG4gIH07XG4gIC8qKlxuICAgKiBDbGVhbiB1cCBhbnkgZXhpc3RpbmcgU291cmNlSGFuZGxlcnMgYW5kIGxpc3RlbmVycyB3aGVuIHRoZSBUZWNoIGlzIGRpc3Bvc2VkLlxuICAgKlxuICAgKiBAbGlzdGVucyBUZWNoI2Rpc3Bvc2VcbiAgICovXG5cblxuICBfVGVjaC5wcm90b3R5cGUuZGlzcG9zZVNvdXJjZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gaWYgd2UgaGF2ZSBhIHNvdXJjZSBhbmQgZ2V0IGFub3RoZXIgb25lXG4gICAgLy8gdGhlbiB3ZSBhcmUgbG9hZGluZyBzb21ldGhpbmcgbmV3XG4gICAgLy8gdGhhbiBjbGVhciBhbGwgb2Ygb3VyIGN1cnJlbnQgdHJhY2tzXG4gICAgaWYgKHRoaXMuY3VycmVudFNvdXJjZV8pIHtcbiAgICAgIHRoaXMuY2xlYXJUcmFja3MoWydhdWRpbycsICd2aWRlbyddKTtcbiAgICAgIHRoaXMuY3VycmVudFNvdXJjZV8gPSBudWxsO1xuICAgIH0gLy8gYWx3YXlzIGNsZWFuIHVwIGF1dG8tdGV4dCB0cmFja3NcblxuXG4gICAgdGhpcy5jbGVhbnVwQXV0b1RleHRUcmFja3MoKTtcblxuICAgIGlmICh0aGlzLnNvdXJjZUhhbmRsZXJfKSB7XG4gICAgICBpZiAodGhpcy5zb3VyY2VIYW5kbGVyXy5kaXNwb3NlKSB7XG4gICAgICAgIHRoaXMuc291cmNlSGFuZGxlcl8uZGlzcG9zZSgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNvdXJjZUhhbmRsZXJfID0gbnVsbDtcbiAgICB9XG4gIH07XG59OyAvLyBUaGUgYmFzZSBUZWNoIGNsYXNzIG5lZWRzIHRvIGJlIHJlZ2lzdGVyZWQgYXMgYSBDb21wb25lbnQuIEl0IGlzIHRoZSBvbmx5XG4vLyBUZWNoIHRoYXQgY2FuIGJlIHJlZ2lzdGVyZWQgYXMgYSBDb21wb25lbnQuXG5cblxuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdUZWNoJywgVGVjaCk7XG5UZWNoLnJlZ2lzdGVyVGVjaCgnVGVjaCcsIFRlY2gpO1xuLyoqXG4gKiBBIGxpc3Qgb2YgdGVjaHMgdGhhdCBzaG91bGQgYmUgYWRkZWQgdG8gdGVjaE9yZGVyIG9uIFBsYXllcnNcbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5cblRlY2guZGVmYXVsdFRlY2hPcmRlcl8gPSBbXTtcblxuLyoqXG4gKiBAZmlsZSBtaWRkbGV3YXJlLmpzXG4gKiBAbW9kdWxlIG1pZGRsZXdhcmVcbiAqL1xudmFyIG1pZGRsZXdhcmVzID0ge307XG52YXIgbWlkZGxld2FyZUluc3RhbmNlcyA9IHt9O1xudmFyIFRFUk1JTkFUT1IgPSB7fTtcbi8qKlxuICogQSBtaWRkbGV3YXJlIG9iamVjdCBpcyBhIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0IHRoYXQgaGFzIG1ldGhvZHMgdGhhdFxuICogbWF0Y2ggdGhlIHtAbGluayBUZWNofSBtZXRob2RzIGZvdW5kIGluIHRoZSBsaXN0cyBvZiBhbGxvd2VkXG4gKiB7QGxpbmsgbW9kdWxlOm1pZGRsZXdhcmUuYWxsb3dlZEdldHRlcnN8Z2V0dGVyc30sXG4gKiB7QGxpbmsgbW9kdWxlOm1pZGRsZXdhcmUuYWxsb3dlZFNldHRlcnN8c2V0dGVyc30sIGFuZFxuICoge0BsaW5rIG1vZHVsZTptaWRkbGV3YXJlLmFsbG93ZWRNZWRpYXRvcnN8bWVkaWF0b3JzfS5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNaWRkbGV3YXJlT2JqZWN0XG4gKi9cblxuLyoqXG4gKiBBIG1pZGRsZXdhcmUgZmFjdG9yeSBmdW5jdGlvbiB0aGF0IHNob3VsZCByZXR1cm4gYVxuICoge0BsaW5rIG1vZHVsZTptaWRkbGV3YXJlfk1pZGRsZXdhcmVPYmplY3R8TWlkZGxld2FyZU9iamVjdH0uXG4gKlxuICogVGhpcyBmYWN0b3J5IHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoIHBsYXllciB3aGVuIG5lZWRlZCwgd2l0aCB0aGUgcGxheWVyXG4gKiBwYXNzZWQgaW4gYXMgYW4gYXJndW1lbnQuXG4gKlxuICogQGNhbGxiYWNrIE1pZGRsZXdhcmVGYWN0b3J5XG4gKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gKiAgICAgICAgQSBWaWRlby5qcyBwbGF5ZXIuXG4gKi9cblxuLyoqXG4gKiBEZWZpbmUgYSBtaWRkbGV3YXJlIHRoYXQgdGhlIHBsYXllciBzaG91bGQgdXNlIGJ5IHdheSBvZiBhIGZhY3RvcnkgZnVuY3Rpb25cbiAqIHRoYXQgcmV0dXJucyBhIG1pZGRsZXdhcmUgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gdHlwZVxuICogICAgICAgICBUaGUgTUlNRSB0eXBlIHRvIG1hdGNoIG9yIGBcIipcImAgZm9yIGFsbCBNSU1FIHR5cGVzLlxuICpcbiAqIEBwYXJhbSAge01pZGRsZXdhcmVGYWN0b3J5fSBtaWRkbGV3YXJlXG4gKiAgICAgICAgIEEgbWlkZGxld2FyZSBmYWN0b3J5IGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBmb3JcbiAqICAgICAgICAgbWF0Y2hpbmcgdHlwZXMuXG4gKi9cblxuZnVuY3Rpb24gdXNlKHR5cGUsIG1pZGRsZXdhcmUpIHtcbiAgbWlkZGxld2FyZXNbdHlwZV0gPSBtaWRkbGV3YXJlc1t0eXBlXSB8fCBbXTtcbiAgbWlkZGxld2FyZXNbdHlwZV0ucHVzaChtaWRkbGV3YXJlKTtcbn1cbi8qKlxuICogQXN5bmNocm9ub3VzbHkgc2V0cyBhIHNvdXJjZSB1c2luZyBtaWRkbGV3YXJlIGJ5IHJlY3Vyc2luZyB0aHJvdWdoIGFueVxuICogbWF0Y2hpbmcgbWlkZGxld2FyZXMgYW5kIGNhbGxpbmcgYHNldFNvdXJjZWAgb24gZWFjaCwgcGFzc2luZyBhbG9uZyB0aGVcbiAqIHByZXZpb3VzIHJldHVybmVkIHZhbHVlIGVhY2ggdGltZS5cbiAqXG4gKiBAcGFyYW0gIHtQbGF5ZXJ9IHBsYXllclxuICogICAgICAgICBBIHtAbGluayBQbGF5ZXJ9IGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSAge1RlY2h+U291cmNlT2JqZWN0fSBzcmNcbiAqICAgICAgICAgQSBzb3VyY2Ugb2JqZWN0LlxuICpcbiAqIEBwYXJhbSAge0Z1bmN0aW9ufVxuICogICAgICAgICBUaGUgbmV4dCBtaWRkbGV3YXJlIHRvIHJ1bi5cbiAqL1xuXG5mdW5jdGlvbiBzZXRTb3VyY2UocGxheWVyLCBzcmMsIG5leHQpIHtcbiAgcGxheWVyLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBzZXRTb3VyY2VIZWxwZXIoc3JjLCBtaWRkbGV3YXJlc1tzcmMudHlwZV0sIG5leHQsIHBsYXllcik7XG4gIH0sIDEpO1xufVxuLyoqXG4gKiBXaGVuIHRoZSB0ZWNoIGlzIHNldCwgcGFzc2VzIHRoZSB0ZWNoIHRvIGVhY2ggbWlkZGxld2FyZSdzIGBzZXRUZWNoYCBtZXRob2QuXG4gKlxuICogQHBhcmFtIHtPYmplY3RbXX0gbWlkZGxld2FyZVxuICogICAgICAgIEFuIGFycmF5IG9mIG1pZGRsZXdhcmUgaW5zdGFuY2VzLlxuICpcbiAqIEBwYXJhbSB7VGVjaH0gdGVjaFxuICogICAgICAgIEEgVmlkZW8uanMgdGVjaC5cbiAqL1xuXG5mdW5jdGlvbiBzZXRUZWNoKG1pZGRsZXdhcmUsIHRlY2gpIHtcbiAgbWlkZGxld2FyZS5mb3JFYWNoKGZ1bmN0aW9uIChtdykge1xuICAgIHJldHVybiBtdy5zZXRUZWNoICYmIG13LnNldFRlY2godGVjaCk7XG4gIH0pO1xufVxuLyoqXG4gKiBDYWxscyBhIGdldHRlciBvbiB0aGUgdGVjaCBmaXJzdCwgdGhyb3VnaCBlYWNoIG1pZGRsZXdhcmVcbiAqIGZyb20gcmlnaHQgdG8gbGVmdCB0byB0aGUgcGxheWVyLlxuICpcbiAqIEBwYXJhbSAge09iamVjdFtdfSBtaWRkbGV3YXJlXG4gKiAgICAgICAgIEFuIGFycmF5IG9mIG1pZGRsZXdhcmUgaW5zdGFuY2VzLlxuICpcbiAqIEBwYXJhbSAge1RlY2h9IHRlY2hcbiAqICAgICAgICAgVGhlIGN1cnJlbnQgdGVjaC5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IG1ldGhvZFxuICogICAgICAgICBBIG1ldGhvZCBuYW1lLlxuICpcbiAqIEByZXR1cm4ge01peGVkfVxuICogICAgICAgICBUaGUgZmluYWwgdmFsdWUgZnJvbSB0aGUgdGVjaCBhZnRlciBtaWRkbGV3YXJlIGhhcyBpbnRlcmNlcHRlZCBpdC5cbiAqL1xuXG5mdW5jdGlvbiBnZXQobWlkZGxld2FyZSwgdGVjaCwgbWV0aG9kKSB7XG4gIHJldHVybiBtaWRkbGV3YXJlLnJlZHVjZVJpZ2h0KG1pZGRsZXdhcmVJdGVyYXRvcihtZXRob2QpLCB0ZWNoW21ldGhvZF0oKSk7XG59XG4vKipcbiAqIFRha2VzIHRoZSBhcmd1bWVudCBnaXZlbiB0byB0aGUgcGxheWVyIGFuZCBjYWxscyB0aGUgc2V0dGVyIG1ldGhvZCBvbiBlYWNoXG4gKiBtaWRkbGV3YXJlIGZyb20gbGVmdCB0byByaWdodCB0byB0aGUgdGVjaC5cbiAqXG4gKiBAcGFyYW0gIHtPYmplY3RbXX0gbWlkZGxld2FyZVxuICogICAgICAgICBBbiBhcnJheSBvZiBtaWRkbGV3YXJlIGluc3RhbmNlcy5cbiAqXG4gKiBAcGFyYW0gIHtUZWNofSB0ZWNoXG4gKiAgICAgICAgIFRoZSBjdXJyZW50IHRlY2guXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBtZXRob2RcbiAqICAgICAgICAgQSBtZXRob2QgbmFtZS5cbiAqXG4gKiBAcGFyYW0gIHtNaXhlZH0gYXJnXG4gKiAgICAgICAgIFRoZSB2YWx1ZSB0byBzZXQgb24gdGhlIHRlY2guXG4gKlxuICogQHJldHVybiB7TWl4ZWR9XG4gKiAgICAgICAgIFRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGBtZXRob2RgIG9mIHRoZSBgdGVjaGAuXG4gKi9cblxuZnVuY3Rpb24gc2V0JDEobWlkZGxld2FyZSwgdGVjaCwgbWV0aG9kLCBhcmcpIHtcbiAgcmV0dXJuIHRlY2hbbWV0aG9kXShtaWRkbGV3YXJlLnJlZHVjZShtaWRkbGV3YXJlSXRlcmF0b3IobWV0aG9kKSwgYXJnKSk7XG59XG4vKipcbiAqIFRha2VzIHRoZSBhcmd1bWVudCBnaXZlbiB0byB0aGUgcGxheWVyIGFuZCBjYWxscyB0aGUgYGNhbGxgIHZlcnNpb24gb2YgdGhlXG4gKiBtZXRob2Qgb24gZWFjaCBtaWRkbGV3YXJlIGZyb20gbGVmdCB0byByaWdodC5cbiAqXG4gKiBUaGVuLCBjYWxsIHRoZSBwYXNzZWQgaW4gbWV0aG9kIG9uIHRoZSB0ZWNoIGFuZCByZXR1cm4gdGhlIHJlc3VsdCB1bmNoYW5nZWRcbiAqIGJhY2sgdG8gdGhlIHBsYXllciwgdGhyb3VnaCBtaWRkbGV3YXJlLCB0aGlzIHRpbWUgZnJvbSByaWdodCB0byBsZWZ0LlxuICpcbiAqIEBwYXJhbSAge09iamVjdFtdfSBtaWRkbGV3YXJlXG4gKiAgICAgICAgIEFuIGFycmF5IG9mIG1pZGRsZXdhcmUgaW5zdGFuY2VzLlxuICpcbiAqIEBwYXJhbSAge1RlY2h9IHRlY2hcbiAqICAgICAgICAgVGhlIGN1cnJlbnQgdGVjaC5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IG1ldGhvZFxuICogICAgICAgICBBIG1ldGhvZCBuYW1lLlxuICpcbiAqIEBwYXJhbSAge01peGVkfSBhcmdcbiAqICAgICAgICAgVGhlIHZhbHVlIHRvIHNldCBvbiB0aGUgdGVjaC5cbiAqXG4gKiBAcmV0dXJuIHtNaXhlZH1cbiAqICAgICAgICAgVGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgYG1ldGhvZGAgb2YgdGhlIGB0ZWNoYCwgcmVnYXJkbGVzcyBvZiB0aGVcbiAqICAgICAgICAgcmV0dXJuIHZhbHVlcyBvZiBtaWRkbGV3YXJlcy5cbiAqL1xuXG5mdW5jdGlvbiBtZWRpYXRlKG1pZGRsZXdhcmUsIHRlY2gsIG1ldGhvZCwgYXJnKSB7XG4gIGlmIChhcmcgPT09IHZvaWQgMCkge1xuICAgIGFyZyA9IG51bGw7XG4gIH1cblxuICB2YXIgY2FsbE1ldGhvZCA9ICdjYWxsJyArIHRvVGl0bGVDYXNlKG1ldGhvZCk7XG4gIHZhciBtaWRkbGV3YXJlVmFsdWUgPSBtaWRkbGV3YXJlLnJlZHVjZShtaWRkbGV3YXJlSXRlcmF0b3IoY2FsbE1ldGhvZCksIGFyZyk7XG4gIHZhciB0ZXJtaW5hdGVkID0gbWlkZGxld2FyZVZhbHVlID09PSBURVJNSU5BVE9SOyAvLyBkZXByZWNhdGVkLiBUaGUgYG51bGxgIHJldHVybiB2YWx1ZSBzaG91bGQgaW5zdGVhZCByZXR1cm4gVEVSTUlOQVRPUiB0b1xuICAvLyBwcmV2ZW50IGNvbmZ1c2lvbiBpZiBhIHRlY2hzIG1ldGhvZCBhY3R1YWxseSByZXR1cm5zIG51bGwuXG5cbiAgdmFyIHJldHVyblZhbHVlID0gdGVybWluYXRlZCA/IG51bGwgOiB0ZWNoW21ldGhvZF0obWlkZGxld2FyZVZhbHVlKTtcbiAgZXhlY3V0ZVJpZ2h0KG1pZGRsZXdhcmUsIG1ldGhvZCwgcmV0dXJuVmFsdWUsIHRlcm1pbmF0ZWQpO1xuICByZXR1cm4gcmV0dXJuVmFsdWU7XG59XG4vKipcbiAqIEVudW1lcmF0aW9uIG9mIGFsbG93ZWQgZ2V0dGVycyB3aGVyZSB0aGUga2V5cyBhcmUgbWV0aG9kIG5hbWVzLlxuICpcbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cblxudmFyIGFsbG93ZWRHZXR0ZXJzID0ge1xuICBidWZmZXJlZDogMSxcbiAgY3VycmVudFRpbWU6IDEsXG4gIGR1cmF0aW9uOiAxLFxuICBzZWVrYWJsZTogMSxcbiAgcGxheWVkOiAxLFxuICBwYXVzZWQ6IDFcbn07XG4vKipcbiAqIEVudW1lcmF0aW9uIG9mIGFsbG93ZWQgc2V0dGVycyB3aGVyZSB0aGUga2V5cyBhcmUgbWV0aG9kIG5hbWVzLlxuICpcbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cblxudmFyIGFsbG93ZWRTZXR0ZXJzID0ge1xuICBzZXRDdXJyZW50VGltZTogMVxufTtcbi8qKlxuICogRW51bWVyYXRpb24gb2YgYWxsb3dlZCBtZWRpYXRvcnMgd2hlcmUgdGhlIGtleXMgYXJlIG1ldGhvZCBuYW1lcy5cbiAqXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5cbnZhciBhbGxvd2VkTWVkaWF0b3JzID0ge1xuICBwbGF5OiAxLFxuICBwYXVzZTogMVxufTtcblxuZnVuY3Rpb24gbWlkZGxld2FyZUl0ZXJhdG9yKG1ldGhvZCkge1xuICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlLCBtdykge1xuICAgIC8vIGlmIHRoZSBwcmV2aW91cyBtaWRkbGV3YXJlIHRlcm1pbmF0ZWQsIHBhc3MgYWxvbmcgdGhlIHRlcm1pbmF0aW9uXG4gICAgaWYgKHZhbHVlID09PSBURVJNSU5BVE9SKSB7XG4gICAgICByZXR1cm4gVEVSTUlOQVRPUjtcbiAgICB9XG5cbiAgICBpZiAobXdbbWV0aG9kXSkge1xuICAgICAgcmV0dXJuIG13W21ldGhvZF0odmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZXhlY3V0ZVJpZ2h0KG13cywgbWV0aG9kLCB2YWx1ZSwgdGVybWluYXRlZCkge1xuICBmb3IgKHZhciBpID0gbXdzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgdmFyIG13ID0gbXdzW2ldO1xuXG4gICAgaWYgKG13W21ldGhvZF0pIHtcbiAgICAgIG13W21ldGhvZF0odGVybWluYXRlZCwgdmFsdWUpO1xuICAgIH1cbiAgfVxufVxuLyoqXG4gKiBDbGVhciB0aGUgbWlkZGxld2FyZSBjYWNoZSBmb3IgYSBwbGF5ZXIuXG4gKlxuICogQHBhcmFtICB7UGxheWVyfSBwbGF5ZXJcbiAqICAgICAgICAgQSB7QGxpbmsgUGxheWVyfSBpbnN0YW5jZS5cbiAqL1xuXG5cbmZ1bmN0aW9uIGNsZWFyQ2FjaGVGb3JQbGF5ZXIocGxheWVyKSB7XG4gIG1pZGRsZXdhcmVJbnN0YW5jZXNbcGxheWVyLmlkKCldID0gbnVsbDtcbn1cbi8qKlxuICoge1xuICogIFtwbGF5ZXJJZF06IFtbbXdGYWN0b3J5LCBtd0luc3RhbmNlXSwgLi4uXVxuICogfVxuICpcbiAqIEBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZ2V0T3JDcmVhdGVGYWN0b3J5KHBsYXllciwgbXdGYWN0b3J5KSB7XG4gIHZhciBtd3MgPSBtaWRkbGV3YXJlSW5zdGFuY2VzW3BsYXllci5pZCgpXTtcbiAgdmFyIG13ID0gbnVsbDtcblxuICBpZiAobXdzID09PSB1bmRlZmluZWQgfHwgbXdzID09PSBudWxsKSB7XG4gICAgbXcgPSBtd0ZhY3RvcnkocGxheWVyKTtcbiAgICBtaWRkbGV3YXJlSW5zdGFuY2VzW3BsYXllci5pZCgpXSA9IFtbbXdGYWN0b3J5LCBtd11dO1xuICAgIHJldHVybiBtdztcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbXdzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIF9td3MkaSA9IG13c1tpXSxcbiAgICAgICAgbXdmID0gX213cyRpWzBdLFxuICAgICAgICBtd2kgPSBfbXdzJGlbMV07XG5cbiAgICBpZiAobXdmICE9PSBtd0ZhY3RvcnkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIG13ID0gbXdpO1xuICB9XG5cbiAgaWYgKG13ID09PSBudWxsKSB7XG4gICAgbXcgPSBtd0ZhY3RvcnkocGxheWVyKTtcbiAgICBtd3MucHVzaChbbXdGYWN0b3J5LCBtd10pO1xuICB9XG5cbiAgcmV0dXJuIG13O1xufVxuXG5mdW5jdGlvbiBzZXRTb3VyY2VIZWxwZXIoc3JjLCBtaWRkbGV3YXJlLCBuZXh0LCBwbGF5ZXIsIGFjYywgbGFzdFJ1bikge1xuICBpZiAoc3JjID09PSB2b2lkIDApIHtcbiAgICBzcmMgPSB7fTtcbiAgfVxuXG4gIGlmIChtaWRkbGV3YXJlID09PSB2b2lkIDApIHtcbiAgICBtaWRkbGV3YXJlID0gW107XG4gIH1cblxuICBpZiAoYWNjID09PSB2b2lkIDApIHtcbiAgICBhY2MgPSBbXTtcbiAgfVxuXG4gIGlmIChsYXN0UnVuID09PSB2b2lkIDApIHtcbiAgICBsYXN0UnVuID0gZmFsc2U7XG4gIH1cblxuICB2YXIgX21pZGRsZXdhcmUgPSBtaWRkbGV3YXJlLFxuICAgICAgbXdGYWN0b3J5ID0gX21pZGRsZXdhcmVbMF0sXG4gICAgICBtd3Jlc3QgPSBfbWlkZGxld2FyZS5zbGljZSgxKTsgLy8gaWYgbXdGYWN0b3J5IGlzIGEgc3RyaW5nLCB0aGVuIHdlJ3JlIGF0IGEgZm9yayBpbiB0aGUgcm9hZFxuXG5cbiAgaWYgKHR5cGVvZiBtd0ZhY3RvcnkgPT09ICdzdHJpbmcnKSB7XG4gICAgc2V0U291cmNlSGVscGVyKHNyYywgbWlkZGxld2FyZXNbbXdGYWN0b3J5XSwgbmV4dCwgcGxheWVyLCBhY2MsIGxhc3RSdW4pOyAvLyBpZiB3ZSBoYXZlIGFuIG13RmFjdG9yeSwgY2FsbCBpdCB3aXRoIHRoZSBwbGF5ZXIgdG8gZ2V0IHRoZSBtdyxcbiAgICAvLyB0aGVuIGNhbGwgdGhlIG13J3Mgc2V0U291cmNlIG1ldGhvZFxuICB9IGVsc2UgaWYgKG13RmFjdG9yeSkge1xuICAgIHZhciBtdyA9IGdldE9yQ3JlYXRlRmFjdG9yeShwbGF5ZXIsIG13RmFjdG9yeSk7IC8vIGlmIHNldFNvdXJjZSBpc24ndCBwcmVzZW50LCBpbXBsaWNpdGx5IHNlbGVjdCB0aGlzIG1pZGRsZXdhcmVcblxuICAgIGlmICghbXcuc2V0U291cmNlKSB7XG4gICAgICBhY2MucHVzaChtdyk7XG4gICAgICByZXR1cm4gc2V0U291cmNlSGVscGVyKHNyYywgbXdyZXN0LCBuZXh0LCBwbGF5ZXIsIGFjYywgbGFzdFJ1bik7XG4gICAgfVxuXG4gICAgbXcuc2V0U291cmNlKGFzc2lnbih7fSwgc3JjKSwgZnVuY3Rpb24gKGVyciwgX3NyYykge1xuICAgICAgLy8gc29tZXRoaW5nIGhhcHBlbmVkLCB0cnkgdGhlIG5leHQgbWlkZGxld2FyZSBvbiB0aGUgY3VycmVudCBsZXZlbFxuICAgICAgLy8gbWFrZSBzdXJlIHRvIHVzZSB0aGUgb2xkIHNyY1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gc2V0U291cmNlSGVscGVyKHNyYywgbXdyZXN0LCBuZXh0LCBwbGF5ZXIsIGFjYywgbGFzdFJ1bik7XG4gICAgICB9IC8vIHdlJ3ZlIHN1Y2NlZWRlZCwgbm93IHdlIG5lZWQgdG8gZ28gZGVlcGVyXG5cblxuICAgICAgYWNjLnB1c2gobXcpOyAvLyBpZiBpdCdzIHRoZSBzYW1lIHR5cGUsIGNvbnRpbnVlIGRvd24gdGhlIGN1cnJlbnQgY2hhaW5cbiAgICAgIC8vIG90aGVyd2lzZSwgd2Ugd2FudCB0byBnbyBkb3duIHRoZSBuZXcgY2hhaW5cblxuICAgICAgc2V0U291cmNlSGVscGVyKF9zcmMsIHNyYy50eXBlID09PSBfc3JjLnR5cGUgPyBtd3Jlc3QgOiBtaWRkbGV3YXJlc1tfc3JjLnR5cGVdLCBuZXh0LCBwbGF5ZXIsIGFjYywgbGFzdFJ1bik7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAobXdyZXN0Lmxlbmd0aCkge1xuICAgIHNldFNvdXJjZUhlbHBlcihzcmMsIG13cmVzdCwgbmV4dCwgcGxheWVyLCBhY2MsIGxhc3RSdW4pO1xuICB9IGVsc2UgaWYgKGxhc3RSdW4pIHtcbiAgICBuZXh0KHNyYywgYWNjKTtcbiAgfSBlbHNlIHtcbiAgICBzZXRTb3VyY2VIZWxwZXIoc3JjLCBtaWRkbGV3YXJlc1snKiddLCBuZXh0LCBwbGF5ZXIsIGFjYywgdHJ1ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBNaW1ldHlwZXNcbiAqXG4gKiBAc2VlIGh0dHA6Ly9odWwuaGFydmFyZC5lZHUvb2lzLy8vLy9zeXN0ZW1zL3dheC93YXgtcHVibGljLWhlbHAvbWltZXR5cGVzLmh0bVxuICogQHR5cGVkZWYgTWltZXR5cGVzfktpbmRcbiAqIEBlbnVtXG4gKi9cblxudmFyIE1pbWV0eXBlc0tpbmQgPSB7XG4gIG9wdXM6ICd2aWRlby9vZ2cnLFxuICBvZ3Y6ICd2aWRlby9vZ2cnLFxuICBtcDQ6ICd2aWRlby9tcDQnLFxuICBtb3Y6ICd2aWRlby9tcDQnLFxuICBtNHY6ICd2aWRlby9tcDQnLFxuICBta3Y6ICd2aWRlby94LW1hdHJvc2thJyxcbiAgbXAzOiAnYXVkaW8vbXBlZycsXG4gIGFhYzogJ2F1ZGlvL2FhYycsXG4gIG9nYTogJ2F1ZGlvL29nZycsXG4gIG0zdTg6ICdhcHBsaWNhdGlvbi94LW1wZWdVUkwnLFxuICBqcGc6ICdpbWFnZS9qcGVnJyxcbiAganBlZzogJ2ltYWdlL2pwZWcnLFxuICBnaWY6ICdpbWFnZS9naWYnLFxuICBwbmc6ICdpbWFnZS9wbmcnLFxuICBzdmc6ICdpbWFnZS9zdmcreG1sJyxcbiAgd2VicDogJ2ltYWdlL3dlYnAnXG59O1xuLyoqXG4gKiBHZXQgdGhlIG1pbWV0eXBlIG9mIGEgZ2l2ZW4gc3JjIHVybCBpZiBwb3NzaWJsZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmNcbiAqICAgICAgICBUaGUgdXJsIHRvIHRoZSBzcmNcbiAqXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiAgICAgICAgIHJldHVybiB0aGUgbWltZXR5cGUgaWYgaXQgd2FzIGtub3duIG9yIGVtcHR5IHN0cmluZyBvdGhlcndpc2VcbiAqL1xuXG52YXIgZ2V0TWltZXR5cGUgPSBmdW5jdGlvbiBnZXRNaW1ldHlwZShzcmMpIHtcbiAgaWYgKHNyYyA9PT0gdm9pZCAwKSB7XG4gICAgc3JjID0gJyc7XG4gIH1cblxuICB2YXIgZXh0ID0gZ2V0RmlsZUV4dGVuc2lvbihzcmMpO1xuICB2YXIgbWltZXR5cGUgPSBNaW1ldHlwZXNLaW5kW2V4dC50b0xvd2VyQ2FzZSgpXTtcbiAgcmV0dXJuIG1pbWV0eXBlIHx8ICcnO1xufTtcbi8qKlxuICogRmluZCB0aGUgbWltZSB0eXBlIG9mIGEgZ2l2ZW4gc291cmNlIHN0cmluZyBpZiBwb3NzaWJsZS4gVXNlcyB0aGUgcGxheWVyXG4gKiBzb3VyY2UgY2FjaGUuXG4gKlxuICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICogICAgICAgIFRoZSBwbGF5ZXIgb2JqZWN0XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHNyY1xuICogICAgICAgIFRoZSBzb3VyY2Ugc3RyaW5nXG4gKlxuICogQHJldHVybiB7c3RyaW5nfVxuICogICAgICAgICBUaGUgdHlwZSB0aGF0IHdhcyBmb3VuZFxuICovXG5cbnZhciBmaW5kTWltZXR5cGUgPSBmdW5jdGlvbiBmaW5kTWltZXR5cGUocGxheWVyLCBzcmMpIHtcbiAgaWYgKCFzcmMpIHtcbiAgICByZXR1cm4gJyc7XG4gIH0gLy8gMS4gY2hlY2sgZm9yIHRoZSB0eXBlIGluIHRoZSBgc291cmNlYCBjYWNoZVxuXG5cbiAgaWYgKHBsYXllci5jYWNoZV8uc291cmNlLnNyYyA9PT0gc3JjICYmIHBsYXllci5jYWNoZV8uc291cmNlLnR5cGUpIHtcbiAgICByZXR1cm4gcGxheWVyLmNhY2hlXy5zb3VyY2UudHlwZTtcbiAgfSAvLyAyLiBzZWUgaWYgd2UgaGF2ZSB0aGlzIHNvdXJjZSBpbiBvdXIgYGN1cnJlbnRTb3VyY2VzYCBjYWNoZVxuXG5cbiAgdmFyIG1hdGNoaW5nU291cmNlcyA9IHBsYXllci5jYWNoZV8uc291cmNlcy5maWx0ZXIoZnVuY3Rpb24gKHMpIHtcbiAgICByZXR1cm4gcy5zcmMgPT09IHNyYztcbiAgfSk7XG5cbiAgaWYgKG1hdGNoaW5nU291cmNlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbWF0Y2hpbmdTb3VyY2VzWzBdLnR5cGU7XG4gIH0gLy8gMy4gbG9vayBmb3IgdGhlIHNyYyB1cmwgaW4gc291cmNlIGVsZW1lbnRzIGFuZCB1c2UgdGhlIHR5cGUgdGhlcmVcblxuXG4gIHZhciBzb3VyY2VzID0gcGxheWVyLiQkKCdzb3VyY2UnKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHNvdXJjZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcyA9IHNvdXJjZXNbaV07XG5cbiAgICBpZiAocy50eXBlICYmIHMuc3JjICYmIHMuc3JjID09PSBzcmMpIHtcbiAgICAgIHJldHVybiBzLnR5cGU7XG4gICAgfVxuICB9IC8vIDQuIGZpbmFsbHkgZmFsbGJhY2sgdG8gb3VyIGxpc3Qgb2YgbWltZSB0eXBlcyBiYXNlZCBvbiBzcmMgdXJsIGV4dGVuc2lvblxuXG5cbiAgcmV0dXJuIGdldE1pbWV0eXBlKHNyYyk7XG59O1xuXG4vKipcbiAqIEBtb2R1bGUgZmlsdGVyLXNvdXJjZVxuICovXG4vKipcbiAqIEZpbHRlciBvdXQgc2luZ2xlIGJhZCBzb3VyY2Ugb2JqZWN0cyBvciBtdWx0aXBsZSBzb3VyY2Ugb2JqZWN0cyBpbiBhblxuICogYXJyYXkuIEFsc28gZmxhdHRlbnMgbmVzdGVkIHNvdXJjZSBvYmplY3QgYXJyYXlzIGludG8gYSAxIGRpbWVuc2lvbmFsXG4gKiBhcnJheSBvZiBzb3VyY2Ugb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0ge1RlY2h+U291cmNlT2JqZWN0fFRlY2h+U291cmNlT2JqZWN0W119IHNyY1xuICogICAgICAgIFRoZSBzcmMgb2JqZWN0IHRvIGZpbHRlclxuICpcbiAqIEByZXR1cm4ge1RlY2h+U291cmNlT2JqZWN0W119XG4gKiAgICAgICAgIEFuIGFycmF5IG9mIHNvdXJjZW9iamVjdHMgY29udGFpbmluZyBvbmx5IHZhbGlkIHNvdXJjZXNcbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5cbnZhciBmaWx0ZXJTb3VyY2UgPSBmdW5jdGlvbiBmaWx0ZXJTb3VyY2Uoc3JjKSB7XG4gIC8vIHRyYXZlcnNlIGFycmF5XG4gIGlmIChBcnJheS5pc0FycmF5KHNyYykpIHtcbiAgICB2YXIgbmV3c3JjID0gW107XG4gICAgc3JjLmZvckVhY2goZnVuY3Rpb24gKHNyY29iaikge1xuICAgICAgc3Jjb2JqID0gZmlsdGVyU291cmNlKHNyY29iaik7XG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNyY29iaikpIHtcbiAgICAgICAgbmV3c3JjID0gbmV3c3JjLmNvbmNhdChzcmNvYmopO1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChzcmNvYmopKSB7XG4gICAgICAgIG5ld3NyYy5wdXNoKHNyY29iaik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgc3JjID0gbmV3c3JjO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzcmMgPT09ICdzdHJpbmcnICYmIHNyYy50cmltKCkpIHtcbiAgICAvLyBjb252ZXJ0IHN0cmluZyBpbnRvIG9iamVjdFxuICAgIHNyYyA9IFtmaXhTb3VyY2Uoe1xuICAgICAgc3JjOiBzcmNcbiAgICB9KV07XG4gIH0gZWxzZSBpZiAoaXNPYmplY3Qoc3JjKSAmJiB0eXBlb2Ygc3JjLnNyYyA9PT0gJ3N0cmluZycgJiYgc3JjLnNyYyAmJiBzcmMuc3JjLnRyaW0oKSkge1xuICAgIC8vIHNyYyBpcyBhbHJlYWR5IHZhbGlkXG4gICAgc3JjID0gW2ZpeFNvdXJjZShzcmMpXTtcbiAgfSBlbHNlIHtcbiAgICAvLyBpbnZhbGlkIHNvdXJjZSwgdHVybiBpdCBpbnRvIGFuIGVtcHR5IGFycmF5XG4gICAgc3JjID0gW107XG4gIH1cblxuICByZXR1cm4gc3JjO1xufTtcbi8qKlxuICogQ2hlY2tzIHNyYyBtaW1ldHlwZSwgYWRkaW5nIGl0IHdoZW4gcG9zc2libGVcbiAqXG4gKiBAcGFyYW0ge1RlY2h+U291cmNlT2JqZWN0fSBzcmNcbiAqICAgICAgICBUaGUgc3JjIG9iamVjdCB0byBjaGVja1xuICogQHJldHVybiB7VGVjaH5Tb3VyY2VPYmplY3R9XG4gKiAgICAgICAgc3JjIE9iamVjdCB3aXRoIGtub3duIHR5cGVcbiAqL1xuXG5cbmZ1bmN0aW9uIGZpeFNvdXJjZShzcmMpIHtcbiAgdmFyIG1pbWV0eXBlID0gZ2V0TWltZXR5cGUoc3JjLnNyYyk7XG5cbiAgaWYgKCFzcmMudHlwZSAmJiBtaW1ldHlwZSkge1xuICAgIHNyYy50eXBlID0gbWltZXR5cGU7XG4gIH1cblxuICByZXR1cm4gc3JjO1xufVxuXG4vKipcbiAqIFRoZSBgTWVkaWFMb2FkZXJgIGlzIHRoZSBgQ29tcG9uZW50YCB0aGF0IGRlY2lkZXMgd2hpY2ggcGxheWJhY2sgdGVjaG5vbG9neSB0byBsb2FkXG4gKiB3aGVuIGEgcGxheWVyIGlzIGluaXRpYWxpemVkLlxuICpcbiAqIEBleHRlbmRzIENvbXBvbmVudFxuICovXG5cbnZhciBNZWRpYUxvYWRlciA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHNMb29zZShNZWRpYUxvYWRlciwgX0NvbXBvbmVudCk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBhdHRhY2ggdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50flJlYWR5Q2FsbGJhY2t9IFtyZWFkeV1cbiAgICogICAgICAgIFRoZSBmdW5jdGlvbiB0aGF0IGlzIHJ1biB3aGVuIHRoaXMgY29tcG9uZW50IGlzIHJlYWR5LlxuICAgKi9cbiAgZnVuY3Rpb24gTWVkaWFMb2FkZXIocGxheWVyLCBvcHRpb25zLCByZWFkeSkge1xuICAgIHZhciBfdGhpcztcblxuICAgIC8vIE1lZGlhTG9hZGVyIGhhcyBubyBlbGVtZW50XG4gICAgdmFyIG9wdGlvbnNfID0gbWVyZ2VPcHRpb25zKHtcbiAgICAgIGNyZWF0ZUVsOiBmYWxzZVxuICAgIH0sIG9wdGlvbnMpO1xuICAgIF90aGlzID0gX0NvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9uc18sIHJlYWR5KSB8fCB0aGlzOyAvLyBJZiB0aGVyZSBhcmUgbm8gc291cmNlcyB3aGVuIHRoZSBwbGF5ZXIgaXMgaW5pdGlhbGl6ZWQsXG4gICAgLy8gbG9hZCB0aGUgZmlyc3Qgc3VwcG9ydGVkIHBsYXliYWNrIHRlY2hub2xvZ3kuXG5cbiAgICBpZiAoIW9wdGlvbnMucGxheWVyT3B0aW9ucy5zb3VyY2VzIHx8IG9wdGlvbnMucGxheWVyT3B0aW9ucy5zb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBvcHRpb25zLnBsYXllck9wdGlvbnMudGVjaE9yZGVyOyBpIDwgai5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdGVjaE5hbWUgPSB0b1RpdGxlQ2FzZShqW2ldKTtcbiAgICAgICAgdmFyIHRlY2ggPSBUZWNoLmdldFRlY2godGVjaE5hbWUpOyAvLyBTdXBwb3J0IG9sZCBiZWhhdmlvciBvZiB0ZWNocyBiZWluZyByZWdpc3RlcmVkIGFzIGNvbXBvbmVudHMuXG4gICAgICAgIC8vIFJlbW92ZSBvbmNlIHRoYXQgZGVwcmVjYXRlZCBiZWhhdmlvciBpcyByZW1vdmVkLlxuXG4gICAgICAgIGlmICghdGVjaE5hbWUpIHtcbiAgICAgICAgICB0ZWNoID0gQ29tcG9uZW50LmdldENvbXBvbmVudCh0ZWNoTmFtZSk7XG4gICAgICAgIH0gLy8gQ2hlY2sgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhpcyB0ZWNobm9sb2d5XG5cblxuICAgICAgICBpZiAodGVjaCAmJiB0ZWNoLmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgICBwbGF5ZXIubG9hZFRlY2hfKHRlY2hOYW1lKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMb29wIHRocm91Z2ggcGxheWJhY2sgdGVjaG5vbG9naWVzIChIVE1MNSwgRmxhc2gpIGFuZCBjaGVjayBmb3Igc3VwcG9ydC5cbiAgICAgIC8vIFRoZW4gbG9hZCB0aGUgYmVzdCBzb3VyY2UuXG4gICAgICAvLyBBIGZldyBhc3N1bXB0aW9ucyBoZXJlOlxuICAgICAgLy8gICBBbGwgcGxheWJhY2sgdGVjaG5vbG9naWVzIHJlc3BlY3QgcHJlbG9hZCBmYWxzZS5cbiAgICAgIHBsYXllci5zcmMob3B0aW9ucy5wbGF5ZXJPcHRpb25zLnNvdXJjZXMpO1xuICAgIH1cblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHJldHVybiBNZWRpYUxvYWRlcjtcbn0oQ29tcG9uZW50KTtcblxuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdNZWRpYUxvYWRlcicsIE1lZGlhTG9hZGVyKTtcblxuLyoqXG4gKiBDbGlja2FibGUgQ29tcG9uZW50IHdoaWNoIGlzIGNsaWNrYWJsZSBvciBrZXlib2FyZCBhY3Rpb25hYmxlLFxuICogYnV0IGlzIG5vdCBhIG5hdGl2ZSBIVE1MIGJ1dHRvbi5cbiAqXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuXG52YXIgQ2xpY2thYmxlQ29tcG9uZW50ID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0c0xvb3NlKENsaWNrYWJsZUNvbXBvbmVudCwgX0NvbXBvbmVudCk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtICB7UGxheWVyfSBwbGF5ZXJcbiAgICogICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtICB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgKi9cbiAgZnVuY3Rpb24gQ2xpY2thYmxlQ29tcG9uZW50KHBsYXllciwgb3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX0NvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcblxuICAgIF90aGlzLmVtaXRUYXBFdmVudHMoKTtcblxuICAgIF90aGlzLmVuYWJsZSgpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgcyBET00gZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IFt0YWc9ZGl2XVxuICAgKiAgICAgICAgVGhlIGVsZW1lbnQncyBub2RlIHR5cGUuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcHM9e31dXG4gICAqICAgICAgICBBbiBvYmplY3Qgb2YgcHJvcGVydGllcyB0aGF0IHNob3VsZCBiZSBzZXQgb24gdGhlIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbYXR0cmlidXRlcz17fV1cbiAgICogICAgICAgIEFuIG9iamVjdCBvZiBhdHRyaWJ1dGVzIHRoYXQgc2hvdWxkIGJlIHNldCBvbiB0aGUgZWxlbWVudC5cbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IGdldHMgY3JlYXRlZC5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gQ2xpY2thYmxlQ29tcG9uZW50LnByb3RvdHlwZTtcblxuICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSh0YWcsIHByb3BzLCBhdHRyaWJ1dGVzKSB7XG4gICAgaWYgKHRhZyA9PT0gdm9pZCAwKSB7XG4gICAgICB0YWcgPSAnZGl2JztcbiAgICB9XG5cbiAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkge1xuICAgICAgcHJvcHMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoYXR0cmlidXRlcyA9PT0gdm9pZCAwKSB7XG4gICAgICBhdHRyaWJ1dGVzID0ge307XG4gICAgfVxuXG4gICAgcHJvcHMgPSBhc3NpZ24oe1xuICAgICAgaW5uZXJIVE1MOiAnPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCIgY2xhc3M9XCJ2anMtaWNvbi1wbGFjZWhvbGRlclwiPjwvc3Bhbj4nLFxuICAgICAgY2xhc3NOYW1lOiB0aGlzLmJ1aWxkQ1NTQ2xhc3MoKSxcbiAgICAgIHRhYkluZGV4OiAwXG4gICAgfSwgcHJvcHMpO1xuXG4gICAgaWYgKHRhZyA9PT0gJ2J1dHRvbicpIHtcbiAgICAgIGxvZy5lcnJvcihcIkNyZWF0aW5nIGEgQ2xpY2thYmxlQ29tcG9uZW50IHdpdGggYW4gSFRNTCBlbGVtZW50IG9mIFwiICsgdGFnICsgXCIgaXMgbm90IHN1cHBvcnRlZDsgdXNlIGEgQnV0dG9uIGluc3RlYWQuXCIpO1xuICAgIH0gLy8gQWRkIEFSSUEgYXR0cmlidXRlcyBmb3IgY2xpY2thYmxlIGVsZW1lbnQgd2hpY2ggaXMgbm90IGEgbmF0aXZlIEhUTUwgYnV0dG9uXG5cblxuICAgIGF0dHJpYnV0ZXMgPSBhc3NpZ24oe1xuICAgICAgcm9sZTogJ2J1dHRvbidcbiAgICB9LCBhdHRyaWJ1dGVzKTtcbiAgICB0aGlzLnRhYkluZGV4XyA9IHByb3BzLnRhYkluZGV4O1xuXG4gICAgdmFyIGVsID0gX0NvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCB0YWcsIHByb3BzLCBhdHRyaWJ1dGVzKTtcblxuICAgIHRoaXMuY3JlYXRlQ29udHJvbFRleHRFbChlbCk7XG4gICAgcmV0dXJuIGVsO1xuICB9O1xuXG4gIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAvLyByZW1vdmUgY29udHJvbFRleHRFbF8gb24gZGlzcG9zZVxuICAgIHRoaXMuY29udHJvbFRleHRFbF8gPSBudWxsO1xuXG4gICAgX0NvbXBvbmVudC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBjb250cm9sIHRleHQgZWxlbWVudCBvbiB0aGlzIGBDb21wb25lbnRgXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gW2VsXVxuICAgKiAgICAgICAgUGFyZW50IGVsZW1lbnQgZm9yIHRoZSBjb250cm9sIHRleHQuXG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIGNvbnRyb2wgdGV4dCBlbGVtZW50IHRoYXQgZ2V0cyBjcmVhdGVkLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jcmVhdGVDb250cm9sVGV4dEVsID0gZnVuY3Rpb24gY3JlYXRlQ29udHJvbFRleHRFbChlbCkge1xuICAgIHRoaXMuY29udHJvbFRleHRFbF8gPSBjcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Zqcy1jb250cm9sLXRleHQnXG4gICAgfSwge1xuICAgICAgLy8gbGV0IHRoZSBzY3JlZW4gcmVhZGVyIHVzZXIga25vdyB0aGF0IHRoZSB0ZXh0IG9mIHRoZSBlbGVtZW50IG1heSBjaGFuZ2VcbiAgICAgICdhcmlhLWxpdmUnOiAncG9saXRlJ1xuICAgIH0pO1xuXG4gICAgaWYgKGVsKSB7XG4gICAgICBlbC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRyb2xUZXh0RWxfKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRyb2xUZXh0KHRoaXMuY29udHJvbFRleHRfLCBlbCk7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbFRleHRFbF87XG4gIH1cbiAgLyoqXG4gICAqIEdldCBvciBzZXQgdGhlIGxvY2FsaXplIHRleHQgdG8gdXNlIGZvciB0aGUgY29udHJvbHMgb24gdGhlIGBDb21wb25lbnRgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3RleHRdXG4gICAqICAgICAgICBDb250cm9sIHRleHQgZm9yIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gW2VsPXRoaXMuZWwoKV1cbiAgICogICAgICAgIEVsZW1lbnQgdG8gc2V0IHRoZSB0aXRsZSBvbi5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiAgICAgICAgIC0gVGhlIGNvbnRyb2wgdGV4dCB3aGVuIGdldHRpbmdcbiAgICovXG4gIDtcblxuICBfcHJvdG8uY29udHJvbFRleHQgPSBmdW5jdGlvbiBjb250cm9sVGV4dCh0ZXh0LCBlbCkge1xuICAgIGlmIChlbCA9PT0gdm9pZCAwKSB7XG4gICAgICBlbCA9IHRoaXMuZWwoKTtcbiAgICB9XG5cbiAgICBpZiAodGV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250cm9sVGV4dF8gfHwgJ05lZWQgVGV4dCc7XG4gICAgfVxuXG4gICAgdmFyIGxvY2FsaXplZFRleHQgPSB0aGlzLmxvY2FsaXplKHRleHQpO1xuICAgIHRoaXMuY29udHJvbFRleHRfID0gdGV4dDtcbiAgICB0ZXh0Q29udGVudCh0aGlzLmNvbnRyb2xUZXh0RWxfLCBsb2NhbGl6ZWRUZXh0KTtcblxuICAgIGlmICghdGhpcy5ub25JY29uQ29udHJvbCkge1xuICAgICAgLy8gU2V0IHRpdGxlIGF0dHJpYnV0ZSBpZiBvbmx5IGFuIGljb24gaXMgc2hvd25cbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBsb2NhbGl6ZWRUZXh0KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEJ1aWxkcyB0aGUgZGVmYXVsdCBET00gYGNsYXNzTmFtZWAuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBUaGUgRE9NIGBjbGFzc05hbWVgIGZvciB0aGlzIG9iamVjdC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkQ1NTQ2xhc3MoKSB7XG4gICAgcmV0dXJuIFwidmpzLWNvbnRyb2wgdmpzLWJ1dHRvbiBcIiArIF9Db21wb25lbnQucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgfVxuICAvKipcbiAgICogRW5hYmxlIHRoaXMgYENvbXBvbmVudGBzIGVsZW1lbnQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmVuYWJsZSA9IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZF8pIHtcbiAgICAgIHRoaXMuZW5hYmxlZF8gPSB0cnVlO1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWRpc2FibGVkJyk7XG4gICAgICB0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCAnZmFsc2UnKTtcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLnRhYkluZGV4XyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5lbF8uc2V0QXR0cmlidXRlKCd0YWJJbmRleCcsIHRoaXMudGFiSW5kZXhfKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5vbihbJ3RhcCcsICdjbGljayddLCB0aGlzLmhhbmRsZUNsaWNrKTtcbiAgICAgIHRoaXMub24oJ2ZvY3VzJywgdGhpcy5oYW5kbGVGb2N1cyk7XG4gICAgICB0aGlzLm9uKCdibHVyJywgdGhpcy5oYW5kbGVCbHVyKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIERpc2FibGUgdGhpcyBgQ29tcG9uZW50YHMgZWxlbWVudC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGlzYWJsZSA9IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgdGhpcy5lbmFibGVkXyA9IGZhbHNlO1xuICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1kaXNhYmxlZCcpO1xuICAgIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsICd0cnVlJyk7XG5cbiAgICBpZiAodHlwZW9mIHRoaXMudGFiSW5kZXhfICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5lbF8ucmVtb3ZlQXR0cmlidXRlKCd0YWJJbmRleCcpO1xuICAgIH1cblxuICAgIHRoaXMub2ZmKFsndGFwJywgJ2NsaWNrJ10sIHRoaXMuaGFuZGxlQ2xpY2spO1xuICAgIHRoaXMub2ZmKCdmb2N1cycsIHRoaXMuaGFuZGxlRm9jdXMpO1xuICAgIHRoaXMub2ZmKCdibHVyJywgdGhpcy5oYW5kbGVCbHVyKTtcbiAgfVxuICAvKipcbiAgICogVGhpcyBnZXRzIGNhbGxlZCB3aGVuIGEgYENsaWNrYWJsZUNvbXBvbmVudGAgZ2V0czpcbiAgICogLSBDbGlja2VkICh2aWEgdGhlIGBjbGlja2AgZXZlbnQsIGxpc3RlbmluZyBzdGFydHMgaW4gdGhlIGNvbnN0cnVjdG9yKVxuICAgKiAtIFRhcHBlZCAodmlhIHRoZSBgdGFwYCBldmVudCwgbGlzdGVuaW5nIHN0YXJ0cyBpbiB0aGUgY29uc3RydWN0b3IpXG4gICAqIC0gVGhlIGZvbGxvd2luZyB0aGluZ3MgaGFwcGVuIGluIG9yZGVyOlxuICAgKiAgIDEuIHtAbGluayBDbGlja2FibGVDb21wb25lbnQjaGFuZGxlRm9jdXN9IGlzIGNhbGxlZCB2aWEgYSBgZm9jdXNgIGV2ZW50IG9uIHRoZVxuICAgKiAgICAgIGBDbGlja2FibGVDb21wb25lbnRgLlxuICAgKiAgIDIuIHtAbGluayBDbGlja2FibGVDb21wb25lbnQjaGFuZGxlRm9jdXN9IGFkZHMgYSBsaXN0ZW5lciBmb3IgYGtleWRvd25gIG9uIHVzaW5nXG4gICAqICAgICAge0BsaW5rIENsaWNrYWJsZUNvbXBvbmVudCNoYW5kbGVLZXlQcmVzc30uXG4gICAqICAgMy4gYENsaWNrYWJsZUNvbXBvbmVudGAgaGFzIG5vdCBoYWQgYSBgYmx1cmAgZXZlbnQgKGBibHVyYCBtZWFucyB0aGF0IGZvY3VzIHdhcyBsb3N0KS4gVGhlIHVzZXIgcHJlc3Nlc1xuICAgKiAgICAgIHRoZSBzcGFjZSBvciBlbnRlciBrZXkuXG4gICAqICAgNC4ge0BsaW5rIENsaWNrYWJsZUNvbXBvbmVudCNoYW5kbGVLZXlQcmVzc30gY2FsbHMgdGhpcyBmdW5jdGlvbiB3aXRoIHRoZSBga2V5ZG93bmBcbiAgICogICAgICBldmVudCBhcyBhIHBhcmFtZXRlci5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIFRoZSBga2V5ZG93bmAsIGB0YXBgLCBvciBgY2xpY2tgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmVcbiAgICogICAgICAgIGNhbGxlZC5cbiAgICpcbiAgICogQGxpc3RlbnMgdGFwXG4gICAqIEBsaXN0ZW5zIGNsaWNrXG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7fVxuICAvKipcbiAgICogVGhpcyBnZXRzIGNhbGxlZCB3aGVuIGEgYENsaWNrYWJsZUNvbXBvbmVudGAgZ2FpbnMgZm9jdXMgdmlhIGEgYGZvY3VzYCBldmVudC5cbiAgICogVHVybnMgb24gbGlzdGVuaW5nIGZvciBga2V5ZG93bmAgZXZlbnRzLiBXaGVuIHRoZXkgaGFwcGVuIGl0XG4gICAqIGNhbGxzIGB0aGlzLmhhbmRsZUtleVByZXNzYC5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIFRoZSBgZm9jdXNgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmUgY2FsbGVkLlxuICAgKlxuICAgKiBAbGlzdGVucyBmb2N1c1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVGb2N1cyA9IGZ1bmN0aW9uIGhhbmRsZUZvY3VzKGV2ZW50KSB7XG4gICAgb24oZG9jdW1lbnQsICdrZXlkb3duJywgYmluZCh0aGlzLCB0aGlzLmhhbmRsZUtleVByZXNzKSk7XG4gIH1cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRoaXMgQ2xpY2thYmxlQ29tcG9uZW50IGhhcyBmb2N1cyBhbmQgYSBrZXkgZ2V0cyBwcmVzc2VkIGRvd24uIEJ5XG4gICAqIGRlZmF1bHQgaXQgd2lsbCBjYWxsIGB0aGlzLmhhbmRsZUNsaWNrYCB3aGVuIHRoZSBrZXkgaXMgc3BhY2Ugb3IgZW50ZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYGtleWRvd25gIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmUgY2FsbGVkLlxuICAgKlxuICAgKiBAbGlzdGVucyBrZXlkb3duXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZUtleVByZXNzID0gZnVuY3Rpb24gaGFuZGxlS2V5UHJlc3MoZXZlbnQpIHtcbiAgICAvLyBTdXBwb3J0IFNwYWNlIG9yIEVudGVyIGtleSBvcGVyYXRpb24gdG8gZmlyZSBhIGNsaWNrIGV2ZW50XG4gICAgaWYgKGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ1NwYWNlJykgfHwga2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnRW50ZXInKSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMudHJpZ2dlcignY2xpY2snKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUGFzcyBrZXlwcmVzcyBoYW5kbGluZyB1cCBmb3IgdW5zdXBwb3J0ZWQga2V5c1xuICAgICAgX0NvbXBvbmVudC5wcm90b3R5cGUuaGFuZGxlS2V5UHJlc3MuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhIGBDbGlja2FibGVDb21wb25lbnRgIGxvc2VzIGZvY3VzLiBUdXJucyBvZmYgdGhlIGxpc3RlbmVyIGZvclxuICAgKiBga2V5ZG93bmAgZXZlbnRzLiBXaGljaCBTdG9wcyBgdGhpcy5oYW5kbGVLZXlQcmVzc2AgZnJvbSBnZXR0aW5nIGNhbGxlZC5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIFRoZSBgYmx1cmAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZSBjYWxsZWQuXG4gICAqXG4gICAqIEBsaXN0ZW5zIGJsdXJcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlQmx1ciA9IGZ1bmN0aW9uIGhhbmRsZUJsdXIoZXZlbnQpIHtcbiAgICBvZmYoZG9jdW1lbnQsICdrZXlkb3duJywgYmluZCh0aGlzLCB0aGlzLmhhbmRsZUtleVByZXNzKSk7XG4gIH07XG5cbiAgcmV0dXJuIENsaWNrYWJsZUNvbXBvbmVudDtcbn0oQ29tcG9uZW50KTtcblxuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdDbGlja2FibGVDb21wb25lbnQnLCBDbGlja2FibGVDb21wb25lbnQpO1xuXG4vKipcbiAqIEEgYENsaWNrYWJsZUNvbXBvbmVudGAgdGhhdCBoYW5kbGVzIHNob3dpbmcgdGhlIHBvc3RlciBpbWFnZSBmb3IgdGhlIHBsYXllci5cbiAqXG4gKiBAZXh0ZW5kcyBDbGlja2FibGVDb21wb25lbnRcbiAqL1xuXG52YXIgUG9zdGVySW1hZ2UgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9DbGlja2FibGVDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzTG9vc2UoUG9zdGVySW1hZ2UsIF9DbGlja2FibGVDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgKiAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYXR0YWNoIHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgKi9cbiAgZnVuY3Rpb24gUG9zdGVySW1hZ2UocGxheWVyLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfQ2xpY2thYmxlQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuXG4gICAgX3RoaXMudXBkYXRlKCk7XG5cbiAgICBwbGF5ZXIub24oJ3Bvc3RlcmNoYW5nZScsIGJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIF90aGlzLnVwZGF0ZSkpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKipcbiAgICogQ2xlYW4gdXAgYW5kIGRpc3Bvc2Ugb2YgdGhlIGBQb3N0ZXJJbWFnZWAuXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IFBvc3RlckltYWdlLnByb3RvdHlwZTtcblxuICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5wbGF5ZXIoKS5vZmYoJ3Bvc3RlcmNoYW5nZScsIHRoaXMudXBkYXRlKTtcblxuICAgIF9DbGlja2FibGVDb21wb25lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBgUG9zdGVySW1hZ2VgcyBET00gZWxlbWVudC5cbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IGdldHMgY3JlYXRlZC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSgpIHtcbiAgICB2YXIgZWwgPSBjcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAndmpzLXBvc3RlcicsXG4gICAgICAvLyBEb24ndCB3YW50IHBvc3RlciB0byBiZSB0YWJiYWJsZS5cbiAgICAgIHRhYkluZGV4OiAtMVxuICAgIH0pO1xuICAgIHJldHVybiBlbDtcbiAgfVxuICAvKipcbiAgICogQW4ge0BsaW5rIEV2ZW50VGFyZ2V0fkV2ZW50TGlzdGVuZXJ9IGZvciB7QGxpbmsgUGxheWVyI3Bvc3RlcmNoYW5nZX0gZXZlbnRzLlxuICAgKlxuICAgKiBAbGlzdGVucyBQbGF5ZXIjcG9zdGVyY2hhbmdlXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IFtldmVudF1cbiAgICogICAgICAgIFRoZSBgUGxheWVyI3Bvc3RlcmNoYW5nZWAgZXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhpcyBmdW5jdGlvbi5cbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGV2ZW50KSB7XG4gICAgdmFyIHVybCA9IHRoaXMucGxheWVyKCkucG9zdGVyKCk7XG4gICAgdGhpcy5zZXRTcmModXJsKTsgLy8gSWYgdGhlcmUncyBubyBwb3N0ZXIgc291cmNlIHdlIHNob3VsZCBkaXNwbGF5Om5vbmUgb24gdGhpcyBjb21wb25lbnRcbiAgICAvLyBzbyBpdCdzIG5vdCBzdGlsbCBjbGlja2FibGUgb3IgcmlnaHQtY2xpY2thYmxlXG5cbiAgICBpZiAodXJsKSB7XG4gICAgICB0aGlzLnNob3coKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHNvdXJjZSBvZiB0aGUgYFBvc3RlckltYWdlYCBkZXBlbmRpbmcgb24gdGhlIGRpc3BsYXkgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAqICAgICAgICBUaGUgVVJMIHRvIHRoZSBzb3VyY2UgZm9yIHRoZSBgUG9zdGVySW1hZ2VgLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zZXRTcmMgPSBmdW5jdGlvbiBzZXRTcmModXJsKSB7XG4gICAgdmFyIGJhY2tncm91bmRJbWFnZSA9ICcnOyAvLyBBbnkgZmFsc3kgdmFsdWUgc2hvdWxkIHN0YXkgYXMgYW4gZW1wdHkgc3RyaW5nLCBvdGhlcndpc2VcbiAgICAvLyB0aGlzIHdpbGwgdGhyb3cgYW4gZXh0cmEgZXJyb3JcblxuICAgIGlmICh1cmwpIHtcbiAgICAgIGJhY2tncm91bmRJbWFnZSA9IFwidXJsKFxcXCJcIiArIHVybCArIFwiXFxcIilcIjtcbiAgICB9XG5cbiAgICB0aGlzLmVsXy5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBiYWNrZ3JvdW5kSW1hZ2U7XG4gIH1cbiAgLyoqXG4gICAqIEFuIHtAbGluayBFdmVudFRhcmdldH5FdmVudExpc3RlbmVyfSBmb3IgY2xpY2tzIG9uIHRoZSBgUG9zdGVySW1hZ2VgLiBTZWVcbiAgICoge0BsaW5rIENsaWNrYWJsZUNvbXBvbmVudCNoYW5kbGVDbGlja30gZm9yIGluc3RhbmNlcyB3aGVyZSB0aGlzIHdpbGwgYmUgdHJpZ2dlcmVkLlxuICAgKlxuICAgKiBAbGlzdGVucyB0YXBcbiAgICogQGxpc3RlbnMgY2xpY2tcbiAgICogQGxpc3RlbnMga2V5ZG93blxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKyAgICAgICAgVGhlIGBjbGlja2AsIGB0YXBgIG9yIGBrZXlkb3duYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljayhldmVudCkge1xuICAgIC8vIFdlIGRvbid0IHdhbnQgYSBjbGljayB0byB0cmlnZ2VyIHBsYXliYWNrIHdoZW4gY29udHJvbHMgYXJlIGRpc2FibGVkXG4gICAgaWYgKCF0aGlzLnBsYXllcl8uY29udHJvbHMoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBsYXllcl8ucGF1c2VkKCkpIHtcbiAgICAgIHNpbGVuY2VQcm9taXNlKHRoaXMucGxheWVyXy5wbGF5KCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBsYXllcl8ucGF1c2UoKTtcbiAgICB9IC8vIGNhbGwgaGFuZGxlRm9jdXMgbWFudWFsbHkgdG8gZ2V0IGhvdGtleXMgd29ya2luZ1xuXG5cbiAgICB0aGlzLnBsYXllcl8uaGFuZGxlRm9jdXMoe30pO1xuICB9O1xuXG4gIHJldHVybiBQb3N0ZXJJbWFnZTtcbn0oQ2xpY2thYmxlQ29tcG9uZW50KTtcblxuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdQb3N0ZXJJbWFnZScsIFBvc3RlckltYWdlKTtcblxudmFyIGRhcmtHcmF5ID0gJyMyMjInO1xudmFyIGxpZ2h0R3JheSA9ICcjY2NjJztcbnZhciBmb250TWFwID0ge1xuICBtb25vc3BhY2U6ICdtb25vc3BhY2UnLFxuICBzYW5zU2VyaWY6ICdzYW5zLXNlcmlmJyxcbiAgc2VyaWY6ICdzZXJpZicsXG4gIG1vbm9zcGFjZVNhbnNTZXJpZjogJ1wiQW5kYWxlIE1vbm9cIiwgXCJMdWNpZGEgQ29uc29sZVwiLCBtb25vc3BhY2UnLFxuICBtb25vc3BhY2VTZXJpZjogJ1wiQ291cmllciBOZXdcIiwgbW9ub3NwYWNlJyxcbiAgcHJvcG9ydGlvbmFsU2Fuc1NlcmlmOiAnc2Fucy1zZXJpZicsXG4gIHByb3BvcnRpb25hbFNlcmlmOiAnc2VyaWYnLFxuICBjYXN1YWw6ICdcIkNvbWljIFNhbnMgTVNcIiwgSW1wYWN0LCBmYW50YXN5JyxcbiAgc2NyaXB0OiAnXCJNb25vdHlwZSBDb3JzaXZhXCIsIGN1cnNpdmUnLFxuICBzbWFsbGNhcHM6ICdcIkFuZGFsZSBNb25vXCIsIFwiTHVjaWRhIENvbnNvbGVcIiwgbW9ub3NwYWNlLCBzYW5zLXNlcmlmJ1xufTtcbi8qKlxuICogQ29uc3RydWN0IGFuIHJnYmEgY29sb3IgZnJvbSBhIGdpdmVuIGhleCBjb2xvciBjb2RlLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb2xvclxuICogICAgICAgIEhleCBudW1iZXIgZm9yIGNvbG9yLCBsaWtlICNmMGUgb3IgI2Y2MDRlMi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eVxuICogICAgICAgIFZhbHVlIGZvciBvcGFjaXR5LCAwLjAgLSAxLjAuXG4gKlxuICogQHJldHVybiB7c3RyaW5nfVxuICogICAgICAgICBUaGUgcmdiYSBjb2xvciB0aGF0IHdhcyBjcmVhdGVkLCBsaWtlICdyZ2JhKDI1NSwgMCwgMCwgMC4zKScuXG4gKi9cblxuZnVuY3Rpb24gY29uc3RydWN0Q29sb3IoY29sb3IsIG9wYWNpdHkpIHtcbiAgdmFyIGhleDtcblxuICBpZiAoY29sb3IubGVuZ3RoID09PSA0KSB7XG4gICAgLy8gY29sb3IgbG9va3MgbGlrZSBcIiNmMGVcIlxuICAgIGhleCA9IGNvbG9yWzFdICsgY29sb3JbMV0gKyBjb2xvclsyXSArIGNvbG9yWzJdICsgY29sb3JbM10gKyBjb2xvclszXTtcbiAgfSBlbHNlIGlmIChjb2xvci5sZW5ndGggPT09IDcpIHtcbiAgICAvLyBjb2xvciBsb29rcyBsaWtlIFwiI2Y2MDRlMlwiXG4gICAgaGV4ID0gY29sb3Iuc2xpY2UoMSk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvbG9yIGNvZGUgcHJvdmlkZWQsICcgKyBjb2xvciArICc7IG11c3QgYmUgZm9ybWF0dGVkIGFzIGUuZy4gI2YwZSBvciAjZjYwNGUyLicpO1xuICB9XG5cbiAgcmV0dXJuICdyZ2JhKCcgKyBwYXJzZUludChoZXguc2xpY2UoMCwgMiksIDE2KSArICcsJyArIHBhcnNlSW50KGhleC5zbGljZSgyLCA0KSwgMTYpICsgJywnICsgcGFyc2VJbnQoaGV4LnNsaWNlKDQsIDYpLCAxNikgKyAnLCcgKyBvcGFjaXR5ICsgJyknO1xufVxuLyoqXG4gKiBUcnkgdG8gdXBkYXRlIHRoZSBzdHlsZSBvZiBhIERPTSBlbGVtZW50LiBTb21lIHN0eWxlIGNoYW5nZXMgd2lsbCB0aHJvdyBhbiBlcnJvcixcbiAqIHBhcnRpY3VsYXJseSBpbiBJRTguIFRob3NlIHNob3VsZCBiZSBub29wcy5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiAgICAgICAgVGhlIERPTSBlbGVtZW50IHRvIGJlIHN0eWxlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3R5bGVcbiAqICAgICAgICBUaGUgQ1NTIHByb3BlcnR5IG9uIHRoZSBlbGVtZW50IHRoYXQgc2hvdWxkIGJlIHN0eWxlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcnVsZVxuICogICAgICAgIFRoZSBzdHlsZSBydWxlIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gdGhlIHByb3BlcnR5LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gdHJ5VXBkYXRlU3R5bGUoZWwsIHN0eWxlLCBydWxlKSB7XG4gIHRyeSB7XG4gICAgZWwuc3R5bGVbc3R5bGVdID0gcnVsZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIFNhdGlzZmllcyBsaW50ZXIuXG4gICAgcmV0dXJuO1xuICB9XG59XG4vKipcbiAqIFRoZSBjb21wb25lbnQgZm9yIGRpc3BsYXlpbmcgdGV4dCB0cmFjayBjdWVzLlxuICpcbiAqIEBleHRlbmRzIENvbXBvbmVudFxuICovXG5cblxudmFyIFRleHRUcmFja0Rpc3BsYXkgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzTG9vc2UoVGV4dFRyYWNrRGlzcGxheSwgX0NvbXBvbmVudCk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgKiAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50flJlYWR5Q2FsbGJhY2t9IFtyZWFkeV1cbiAgICogICAgICAgIFRoZSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gYFRleHRUcmFja0Rpc3BsYXlgIGlzIHJlYWR5LlxuICAgKi9cbiAgZnVuY3Rpb24gVGV4dFRyYWNrRGlzcGxheShwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zLCByZWFkeSkgfHwgdGhpcztcbiAgICB2YXIgdXBkYXRlRGlzcGxheUhhbmRsZXIgPSBiaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBfdGhpcy51cGRhdGVEaXNwbGF5KTtcbiAgICBwbGF5ZXIub24oJ2xvYWRzdGFydCcsIGJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIF90aGlzLnRvZ2dsZURpc3BsYXkpKTtcbiAgICBwbGF5ZXIub24oJ3RleHR0cmFja2NoYW5nZScsIHVwZGF0ZURpc3BsYXlIYW5kbGVyKTtcbiAgICBwbGF5ZXIub24oJ2xvYWRlZG1ldGFkYXRhJywgYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMucHJlc2VsZWN0VHJhY2spKTsgLy8gVGhpcyB1c2VkIHRvIGJlIGNhbGxlZCBkdXJpbmcgcGxheWVyIGluaXQsIGJ1dCB3YXMgY2F1c2luZyBhbiBlcnJvclxuICAgIC8vIGlmIGEgdHJhY2sgc2hvdWxkIHNob3cgYnkgZGVmYXVsdCBhbmQgdGhlIGRpc3BsYXkgaGFkbid0IGxvYWRlZCB5ZXQuXG4gICAgLy8gU2hvdWxkIHByb2JhYmx5IGJlIG1vdmVkIHRvIGFuIGV4dGVybmFsIHRyYWNrIGxvYWRlciB3aGVuIHdlIHN1cHBvcnRcbiAgICAvLyB0cmFja3MgdGhhdCBkb24ndCBuZWVkIGEgZGlzcGxheS5cblxuICAgIHBsYXllci5yZWFkeShiaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocGxheWVyLnRlY2hfICYmIHBsYXllci50ZWNoXy5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MpIHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcGxheWVyLm9uKCdmdWxsc2NyZWVuY2hhbmdlJywgdXBkYXRlRGlzcGxheUhhbmRsZXIpO1xuICAgICAgcGxheWVyLm9uKCdwbGF5ZXJyZXNpemUnLCB1cGRhdGVEaXNwbGF5SGFuZGxlcik7XG4gICAgICB3aW5kb3ckMS5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIHVwZGF0ZURpc3BsYXlIYW5kbGVyKTtcbiAgICAgIHBsYXllci5vbignZGlzcG9zZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdyQxLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgdXBkYXRlRGlzcGxheUhhbmRsZXIpO1xuICAgICAgfSk7XG4gICAgICB2YXIgdHJhY2tzID0gdGhpcy5vcHRpb25zXy5wbGF5ZXJPcHRpb25zLnRyYWNrcyB8fCBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5wbGF5ZXJfLmFkZFJlbW90ZVRleHRUcmFjayh0cmFja3NbaV0sIHRydWUpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnByZXNlbGVjdFRyYWNrKCk7XG4gICAgfSkpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKipcbiAgKiBQcmVzZWxlY3QgYSB0cmFjayBmb2xsb3dpbmcgdGhpcyBwcmVjZWRlbmNlOlxuICAqIC0gbWF0Y2hlcyB0aGUgcHJldmlvdXNseSBzZWxlY3RlZCB7QGxpbmsgVGV4dFRyYWNrfSdzIGxhbmd1YWdlIGFuZCBraW5kXG4gICogLSBtYXRjaGVzIHRoZSBwcmV2aW91c2x5IHNlbGVjdGVkIHtAbGluayBUZXh0VHJhY2t9J3MgbGFuZ3VhZ2Ugb25seVxuICAqIC0gaXMgdGhlIGZpcnN0IGRlZmF1bHQgY2FwdGlvbnMgdHJhY2tcbiAgKiAtIGlzIHRoZSBmaXJzdCBkZWZhdWx0IGRlc2NyaXB0aW9ucyB0cmFja1xuICAqXG4gICogQGxpc3RlbnMgUGxheWVyI2xvYWRzdGFydFxuICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IFRleHRUcmFja0Rpc3BsYXkucHJvdG90eXBlO1xuXG4gIF9wcm90by5wcmVzZWxlY3RUcmFjayA9IGZ1bmN0aW9uIHByZXNlbGVjdFRyYWNrKCkge1xuICAgIHZhciBtb2RlcyA9IHtcbiAgICAgIGNhcHRpb25zOiAxLFxuICAgICAgc3VidGl0bGVzOiAxXG4gICAgfTtcbiAgICB2YXIgdHJhY2tMaXN0ID0gdGhpcy5wbGF5ZXJfLnRleHRUcmFja3MoKTtcbiAgICB2YXIgdXNlclByZWYgPSB0aGlzLnBsYXllcl8uY2FjaGVfLnNlbGVjdGVkTGFuZ3VhZ2U7XG4gICAgdmFyIGZpcnN0RGVzYztcbiAgICB2YXIgZmlyc3RDYXB0aW9ucztcbiAgICB2YXIgcHJlZmVycmVkVHJhY2s7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYWNrTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHRyYWNrID0gdHJhY2tMaXN0W2ldO1xuXG4gICAgICBpZiAodXNlclByZWYgJiYgdXNlclByZWYuZW5hYmxlZCAmJiB1c2VyUHJlZi5sYW5ndWFnZSAmJiB1c2VyUHJlZi5sYW5ndWFnZSA9PT0gdHJhY2subGFuZ3VhZ2UgJiYgdHJhY2sua2luZCBpbiBtb2Rlcykge1xuICAgICAgICAvLyBBbHdheXMgY2hvb3NlIHRoZSB0cmFjayB0aGF0IG1hdGNoZXMgYm90aCBsYW5ndWFnZSBhbmQga2luZFxuICAgICAgICBpZiAodHJhY2sua2luZCA9PT0gdXNlclByZWYua2luZCkge1xuICAgICAgICAgIHByZWZlcnJlZFRyYWNrID0gdHJhY2s7IC8vIG9yIGNob29zZSB0aGUgZmlyc3QgdHJhY2sgdGhhdCBtYXRjaGVzIGxhbmd1YWdlXG4gICAgICAgIH0gZWxzZSBpZiAoIXByZWZlcnJlZFRyYWNrKSB7XG4gICAgICAgICAgcHJlZmVycmVkVHJhY2sgPSB0cmFjaztcbiAgICAgICAgfSAvLyBjbGVhciBldmVyeXRoaW5nIGlmIG9mZlRleHRUcmFja01lbnVJdGVtIHdhcyBjbGlja2VkXG5cbiAgICAgIH0gZWxzZSBpZiAodXNlclByZWYgJiYgIXVzZXJQcmVmLmVuYWJsZWQpIHtcbiAgICAgICAgcHJlZmVycmVkVHJhY2sgPSBudWxsO1xuICAgICAgICBmaXJzdERlc2MgPSBudWxsO1xuICAgICAgICBmaXJzdENhcHRpb25zID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAodHJhY2suZGVmYXVsdCkge1xuICAgICAgICBpZiAodHJhY2sua2luZCA9PT0gJ2Rlc2NyaXB0aW9ucycgJiYgIWZpcnN0RGVzYykge1xuICAgICAgICAgIGZpcnN0RGVzYyA9IHRyYWNrO1xuICAgICAgICB9IGVsc2UgaWYgKHRyYWNrLmtpbmQgaW4gbW9kZXMgJiYgIWZpcnN0Q2FwdGlvbnMpIHtcbiAgICAgICAgICBmaXJzdENhcHRpb25zID0gdHJhY2s7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIFRoZSBwcmVmZXJyZWRUcmFjayBtYXRjaGVzIHRoZSB1c2VyIHByZWZlcmVuY2UgYW5kIHRha2VzXG4gICAgLy8gcHJlY2VkZW5jZSBvdmVyIGFsbCB0aGUgb3RoZXIgdHJhY2tzLlxuICAgIC8vIFNvLCBkaXNwbGF5IHRoZSBwcmVmZXJyZWRUcmFjayBiZWZvcmUgdGhlIGZpcnN0IGRlZmF1bHQgdHJhY2tcbiAgICAvLyBhbmQgdGhlIHN1YnRpdGxlcy9jYXB0aW9ucyB0cmFjayBiZWZvcmUgdGhlIGRlc2NyaXB0aW9ucyB0cmFja1xuXG5cbiAgICBpZiAocHJlZmVycmVkVHJhY2spIHtcbiAgICAgIHByZWZlcnJlZFRyYWNrLm1vZGUgPSAnc2hvd2luZyc7XG4gICAgfSBlbHNlIGlmIChmaXJzdENhcHRpb25zKSB7XG4gICAgICBmaXJzdENhcHRpb25zLm1vZGUgPSAnc2hvd2luZyc7XG4gICAgfSBlbHNlIGlmIChmaXJzdERlc2MpIHtcbiAgICAgIGZpcnN0RGVzYy5tb2RlID0gJ3Nob3dpbmcnO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVHVybiBkaXNwbGF5IG9mIHtAbGluayBUZXh0VHJhY2t9J3MgZnJvbSB0aGUgY3VycmVudCBzdGF0ZSBpbnRvIHRoZSBvdGhlciBzdGF0ZS5cbiAgICogVGhlcmUgYXJlIG9ubHkgdHdvIHN0YXRlczpcbiAgICogLSAnc2hvd24nXG4gICAqIC0gJ2hpZGRlbidcbiAgICpcbiAgICogQGxpc3RlbnMgUGxheWVyI2xvYWRzdGFydFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b2dnbGVEaXNwbGF5ID0gZnVuY3Rpb24gdG9nZ2xlRGlzcGxheSgpIHtcbiAgICBpZiAodGhpcy5wbGF5ZXJfLnRlY2hfICYmIHRoaXMucGxheWVyXy50ZWNoXy5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MpIHtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNob3coKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUge0BsaW5rIENvbXBvbmVudH0ncyBET00gZWxlbWVudC5cbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsKCkge1xuICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICd2anMtdGV4dC10cmFjay1kaXNwbGF5J1xuICAgIH0sIHtcbiAgICAgICdhcmlhLWxpdmUnOiAnb2ZmJyxcbiAgICAgICdhcmlhLWF0b21pYyc6ICd0cnVlJ1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBDbGVhciBhbGwgZGlzcGxheWVkIHtAbGluayBUZXh0VHJhY2t9cy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uY2xlYXJEaXNwbGF5ID0gZnVuY3Rpb24gY2xlYXJEaXNwbGF5KCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93JDEuV2ViVlRUID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB3aW5kb3ckMS5XZWJWVFQucHJvY2Vzc0N1ZXMod2luZG93JDEsIFtdLCB0aGlzLmVsXyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGRpc3BsYXllZCBUZXh0VHJhY2sgd2hlbiBhIGVpdGhlciBhIHtAbGluayBQbGF5ZXIjdGV4dHRyYWNrY2hhbmdlfSBvclxuICAgKiBhIHtAbGluayBQbGF5ZXIjZnVsbHNjcmVlbmNoYW5nZX0gaXMgZmlyZWQuXG4gICAqXG4gICAqIEBsaXN0ZW5zIFBsYXllciN0ZXh0dHJhY2tjaGFuZ2VcbiAgICogQGxpc3RlbnMgUGxheWVyI2Z1bGxzY3JlZW5jaGFuZ2VcbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlRGlzcGxheSA9IGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXkoKSB7XG4gICAgdmFyIHRyYWNrcyA9IHRoaXMucGxheWVyXy50ZXh0VHJhY2tzKCk7XG4gICAgdGhpcy5jbGVhckRpc3BsYXkoKTsgLy8gVHJhY2sgZGlzcGxheSBwcmlvcml0aXphdGlvbiBtb2RlbDogaWYgbXVsdGlwbGUgdHJhY2tzIGFyZSAnc2hvd2luZycsXG4gICAgLy8gIGRpc3BsYXkgdGhlIGZpcnN0ICdzdWJ0aXRsZXMnIG9yICdjYXB0aW9ucycgdHJhY2sgd2hpY2ggaXMgJ3Nob3dpbmcnLFxuICAgIC8vICBvdGhlcndpc2UgZGlzcGxheSB0aGUgZmlyc3QgJ2Rlc2NyaXB0aW9ucycgdHJhY2sgd2hpY2ggaXMgJ3Nob3dpbmcnXG5cbiAgICB2YXIgZGVzY3JpcHRpb25zVHJhY2sgPSBudWxsO1xuICAgIHZhciBjYXB0aW9uc1N1YnRpdGxlc1RyYWNrID0gbnVsbDtcbiAgICB2YXIgaSA9IHRyYWNrcy5sZW5ndGg7XG5cbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YXIgdHJhY2sgPSB0cmFja3NbaV07XG5cbiAgICAgIGlmICh0cmFjay5tb2RlID09PSAnc2hvd2luZycpIHtcbiAgICAgICAgaWYgKHRyYWNrLmtpbmQgPT09ICdkZXNjcmlwdGlvbnMnKSB7XG4gICAgICAgICAgZGVzY3JpcHRpb25zVHJhY2sgPSB0cmFjaztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYXB0aW9uc1N1YnRpdGxlc1RyYWNrID0gdHJhY2s7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2FwdGlvbnNTdWJ0aXRsZXNUcmFjaykge1xuICAgICAgaWYgKHRoaXMuZ2V0QXR0cmlidXRlKCdhcmlhLWxpdmUnKSAhPT0gJ29mZicpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScsICdvZmYnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy51cGRhdGVGb3JUcmFjayhjYXB0aW9uc1N1YnRpdGxlc1RyYWNrKTtcbiAgICB9IGVsc2UgaWYgKGRlc2NyaXB0aW9uc1RyYWNrKSB7XG4gICAgICBpZiAodGhpcy5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScpICE9PSAnYXNzZXJ0aXZlJykge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnYXJpYS1saXZlJywgJ2Fzc2VydGl2ZScpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnVwZGF0ZUZvclRyYWNrKGRlc2NyaXB0aW9uc1RyYWNrKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhbiB7QGxpbmsgVGV4dFRyYWNrfSB0byB0byB0aGUge0BsaW5rIFRlY2h9cyB7QGxpbmsgVGV4dFRyYWNrTGlzdH0uXG4gICAqXG4gICAqIEBwYXJhbSB7VGV4dFRyYWNrfSB0cmFja1xuICAgKiAgICAgICAgVGV4dCB0cmFjayBvYmplY3QgdG8gYmUgYWRkZWQgdG8gdGhlIGxpc3QuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVwZGF0ZUZvclRyYWNrID0gZnVuY3Rpb24gdXBkYXRlRm9yVHJhY2sodHJhY2spIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyQxLldlYlZUVCAhPT0gJ2Z1bmN0aW9uJyB8fCAhdHJhY2suYWN0aXZlQ3Vlcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBjdWVzID0gW107XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgdHJhY2suYWN0aXZlQ3Vlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIGN1ZXMucHVzaCh0cmFjay5hY3RpdmVDdWVzW19pXSk7XG4gICAgfVxuXG4gICAgd2luZG93JDEuV2ViVlRULnByb2Nlc3NDdWVzKHdpbmRvdyQxLCBjdWVzLCB0aGlzLmVsXyk7XG5cbiAgICBpZiAoIXRoaXMucGxheWVyXy50ZXh0VHJhY2tTZXR0aW5ncykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBvdmVycmlkZXMgPSB0aGlzLnBsYXllcl8udGV4dFRyYWNrU2V0dGluZ3MuZ2V0VmFsdWVzKCk7XG4gICAgdmFyIGkgPSBjdWVzLmxlbmd0aDtcblxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciBjdWUgPSBjdWVzW2ldO1xuXG4gICAgICBpZiAoIWN1ZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGN1ZURpdiA9IGN1ZS5kaXNwbGF5U3RhdGU7XG5cbiAgICAgIGlmIChvdmVycmlkZXMuY29sb3IpIHtcbiAgICAgICAgY3VlRGl2LmZpcnN0Q2hpbGQuc3R5bGUuY29sb3IgPSBvdmVycmlkZXMuY29sb3I7XG4gICAgICB9XG5cbiAgICAgIGlmIChvdmVycmlkZXMudGV4dE9wYWNpdHkpIHtcbiAgICAgICAgdHJ5VXBkYXRlU3R5bGUoY3VlRGl2LmZpcnN0Q2hpbGQsICdjb2xvcicsIGNvbnN0cnVjdENvbG9yKG92ZXJyaWRlcy5jb2xvciB8fCAnI2ZmZicsIG92ZXJyaWRlcy50ZXh0T3BhY2l0eSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAob3ZlcnJpZGVzLmJhY2tncm91bmRDb2xvcikge1xuICAgICAgICBjdWVEaXYuZmlyc3RDaGlsZC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBvdmVycmlkZXMuYmFja2dyb3VuZENvbG9yO1xuICAgICAgfVxuXG4gICAgICBpZiAob3ZlcnJpZGVzLmJhY2tncm91bmRPcGFjaXR5KSB7XG4gICAgICAgIHRyeVVwZGF0ZVN0eWxlKGN1ZURpdi5maXJzdENoaWxkLCAnYmFja2dyb3VuZENvbG9yJywgY29uc3RydWN0Q29sb3Iob3ZlcnJpZGVzLmJhY2tncm91bmRDb2xvciB8fCAnIzAwMCcsIG92ZXJyaWRlcy5iYWNrZ3JvdW5kT3BhY2l0eSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAob3ZlcnJpZGVzLndpbmRvd0NvbG9yKSB7XG4gICAgICAgIGlmIChvdmVycmlkZXMud2luZG93T3BhY2l0eSkge1xuICAgICAgICAgIHRyeVVwZGF0ZVN0eWxlKGN1ZURpdiwgJ2JhY2tncm91bmRDb2xvcicsIGNvbnN0cnVjdENvbG9yKG92ZXJyaWRlcy53aW5kb3dDb2xvciwgb3ZlcnJpZGVzLndpbmRvd09wYWNpdHkpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdWVEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gb3ZlcnJpZGVzLndpbmRvd0NvbG9yO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChvdmVycmlkZXMuZWRnZVN0eWxlKSB7XG4gICAgICAgIGlmIChvdmVycmlkZXMuZWRnZVN0eWxlID09PSAnZHJvcHNoYWRvdycpIHtcbiAgICAgICAgICBjdWVEaXYuZmlyc3RDaGlsZC5zdHlsZS50ZXh0U2hhZG93ID0gXCIycHggMnB4IDNweCBcIiArIGRhcmtHcmF5ICsgXCIsIDJweCAycHggNHB4IFwiICsgZGFya0dyYXkgKyBcIiwgMnB4IDJweCA1cHggXCIgKyBkYXJrR3JheTtcbiAgICAgICAgfSBlbHNlIGlmIChvdmVycmlkZXMuZWRnZVN0eWxlID09PSAncmFpc2VkJykge1xuICAgICAgICAgIGN1ZURpdi5maXJzdENoaWxkLnN0eWxlLnRleHRTaGFkb3cgPSBcIjFweCAxcHggXCIgKyBkYXJrR3JheSArIFwiLCAycHggMnB4IFwiICsgZGFya0dyYXkgKyBcIiwgM3B4IDNweCBcIiArIGRhcmtHcmF5O1xuICAgICAgICB9IGVsc2UgaWYgKG92ZXJyaWRlcy5lZGdlU3R5bGUgPT09ICdkZXByZXNzZWQnKSB7XG4gICAgICAgICAgY3VlRGl2LmZpcnN0Q2hpbGQuc3R5bGUudGV4dFNoYWRvdyA9IFwiMXB4IDFweCBcIiArIGxpZ2h0R3JheSArIFwiLCAwIDFweCBcIiArIGxpZ2h0R3JheSArIFwiLCAtMXB4IC0xcHggXCIgKyBkYXJrR3JheSArIFwiLCAwIC0xcHggXCIgKyBkYXJrR3JheTtcbiAgICAgICAgfSBlbHNlIGlmIChvdmVycmlkZXMuZWRnZVN0eWxlID09PSAndW5pZm9ybScpIHtcbiAgICAgICAgICBjdWVEaXYuZmlyc3RDaGlsZC5zdHlsZS50ZXh0U2hhZG93ID0gXCIwIDAgNHB4IFwiICsgZGFya0dyYXkgKyBcIiwgMCAwIDRweCBcIiArIGRhcmtHcmF5ICsgXCIsIDAgMCA0cHggXCIgKyBkYXJrR3JheSArIFwiLCAwIDAgNHB4IFwiICsgZGFya0dyYXk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG92ZXJyaWRlcy5mb250UGVyY2VudCAmJiBvdmVycmlkZXMuZm9udFBlcmNlbnQgIT09IDEpIHtcbiAgICAgICAgdmFyIGZvbnRTaXplID0gd2luZG93JDEucGFyc2VGbG9hdChjdWVEaXYuc3R5bGUuZm9udFNpemUpO1xuICAgICAgICBjdWVEaXYuc3R5bGUuZm9udFNpemUgPSBmb250U2l6ZSAqIG92ZXJyaWRlcy5mb250UGVyY2VudCArICdweCc7XG4gICAgICAgIGN1ZURpdi5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgIGN1ZURpdi5zdHlsZS50b3AgPSAnYXV0byc7XG4gICAgICAgIGN1ZURpdi5zdHlsZS5ib3R0b20gPSAnMnB4JztcbiAgICAgIH1cblxuICAgICAgaWYgKG92ZXJyaWRlcy5mb250RmFtaWx5ICYmIG92ZXJyaWRlcy5mb250RmFtaWx5ICE9PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgaWYgKG92ZXJyaWRlcy5mb250RmFtaWx5ID09PSAnc21hbGwtY2FwcycpIHtcbiAgICAgICAgICBjdWVEaXYuZmlyc3RDaGlsZC5zdHlsZS5mb250VmFyaWFudCA9ICdzbWFsbC1jYXBzJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdWVEaXYuZmlyc3RDaGlsZC5zdHlsZS5mb250RmFtaWx5ID0gZm9udE1hcFtvdmVycmlkZXMuZm9udEZhbWlseV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFRleHRUcmFja0Rpc3BsYXk7XG59KENvbXBvbmVudCk7XG5cbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnVGV4dFRyYWNrRGlzcGxheScsIFRleHRUcmFja0Rpc3BsYXkpO1xuXG4vKipcbiAqIEEgbG9hZGluZyBzcGlubmVyIGZvciB1c2UgZHVyaW5nIHdhaXRpbmcvbG9hZGluZyBldmVudHMuXG4gKlxuICogQGV4dGVuZHMgQ29tcG9uZW50XG4gKi9cblxudmFyIExvYWRpbmdTcGlubmVyID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0c0xvb3NlKExvYWRpbmdTcGlubmVyLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBMb2FkaW5nU3Bpbm5lcigpIHtcbiAgICByZXR1cm4gX0NvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gTG9hZGluZ1NwaW5uZXIucHJvdG90eXBlO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGBMb2FkaW5nU3Bpbm5lcmBzIERPTSBlbGVtZW50LlxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKiAgICAgICAgIFRoZSBkb20gZWxlbWVudCB0aGF0IGdldHMgY3JlYXRlZC5cbiAgICovXG4gIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsJCQxKCkge1xuICAgIHZhciBpc0F1ZGlvID0gdGhpcy5wbGF5ZXJfLmlzQXVkaW8oKTtcbiAgICB2YXIgcGxheWVyVHlwZSA9IHRoaXMubG9jYWxpemUoaXNBdWRpbyA/ICdBdWRpbyBQbGF5ZXInIDogJ1ZpZGVvIFBsYXllcicpO1xuICAgIHZhciBjb250cm9sVGV4dCA9IGNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgY2xhc3NOYW1lOiAndmpzLWNvbnRyb2wtdGV4dCcsXG4gICAgICBpbm5lckhUTUw6IHRoaXMubG9jYWxpemUoJ3sxfSBpcyBsb2FkaW5nLicsIFtwbGF5ZXJUeXBlXSlcbiAgICB9KTtcblxuICAgIHZhciBlbCA9IF9Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Zqcy1sb2FkaW5nLXNwaW5uZXInLFxuICAgICAgZGlyOiAnbHRyJ1xuICAgIH0pO1xuXG4gICAgZWwuYXBwZW5kQ2hpbGQoY29udHJvbFRleHQpO1xuICAgIHJldHVybiBlbDtcbiAgfTtcblxuICByZXR1cm4gTG9hZGluZ1NwaW5uZXI7XG59KENvbXBvbmVudCk7XG5cbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnTG9hZGluZ1NwaW5uZXInLCBMb2FkaW5nU3Bpbm5lcik7XG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgYWxsIGJ1dHRvbnMuXG4gKlxuICogQGV4dGVuZHMgQ2xpY2thYmxlQ29tcG9uZW50XG4gKi9cblxudmFyIEJ1dHRvbiA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0NsaWNrYWJsZUNvbXBvbmVudCkge1xuICBfaW5oZXJpdHNMb29zZShCdXR0b24sIF9DbGlja2FibGVDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEJ1dHRvbigpIHtcbiAgICByZXR1cm4gX0NsaWNrYWJsZUNvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gQnV0dG9uLnByb3RvdHlwZTtcblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBgQnV0dG9uYHMgRE9NIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdGFnPVwiYnV0dG9uXCJdXG4gICAqICAgICAgICBUaGUgZWxlbWVudCdzIG5vZGUgdHlwZS4gVGhpcyBhcmd1bWVudCBpcyBJR05PUkVEOiBubyBtYXR0ZXIgd2hhdFxuICAgKiAgICAgICAgaXMgcGFzc2VkLCBpdCB3aWxsIGFsd2F5cyBjcmVhdGUgYSBgYnV0dG9uYCBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW3Byb3BzPXt9XVxuICAgKiAgICAgICAgQW4gb2JqZWN0IG9mIHByb3BlcnRpZXMgdGhhdCBzaG91bGQgYmUgc2V0IG9uIHRoZSBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW2F0dHJpYnV0ZXM9e31dXG4gICAqICAgICAgICBBbiBvYmplY3Qgb2YgYXR0cmlidXRlcyB0aGF0IHNob3VsZCBiZSBzZXQgb24gdGhlIGVsZW1lbnQuXG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCBnZXRzIGNyZWF0ZWQuXG4gICAqL1xuICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCh0YWcsIHByb3BzLCBhdHRyaWJ1dGVzKSB7XG4gICAgaWYgKHByb3BzID09PSB2b2lkIDApIHtcbiAgICAgIHByb3BzID0ge307XG4gICAgfVxuXG4gICAgaWYgKGF0dHJpYnV0ZXMgPT09IHZvaWQgMCkge1xuICAgICAgYXR0cmlidXRlcyA9IHt9O1xuICAgIH1cblxuICAgIHRhZyA9ICdidXR0b24nO1xuICAgIHByb3BzID0gYXNzaWduKHtcbiAgICAgIGlubmVySFRNTDogJzxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIGNsYXNzPVwidmpzLWljb24tcGxhY2Vob2xkZXJcIj48L3NwYW4+JyxcbiAgICAgIGNsYXNzTmFtZTogdGhpcy5idWlsZENTU0NsYXNzKClcbiAgICB9LCBwcm9wcyk7IC8vIEFkZCBhdHRyaWJ1dGVzIGZvciBidXR0b24gZWxlbWVudFxuXG4gICAgYXR0cmlidXRlcyA9IGFzc2lnbih7XG4gICAgICAvLyBOZWNlc3Nhcnkgc2luY2UgdGhlIGRlZmF1bHQgYnV0dG9uIHR5cGUgaXMgXCJzdWJtaXRcIlxuICAgICAgdHlwZTogJ2J1dHRvbidcbiAgICB9LCBhdHRyaWJ1dGVzKTtcbiAgICB2YXIgZWwgPSBDb21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgdGFnLCBwcm9wcywgYXR0cmlidXRlcyk7XG4gICAgdGhpcy5jcmVhdGVDb250cm9sVGV4dEVsKGVsKTtcbiAgICByZXR1cm4gZWw7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIGNoaWxkIGBDb21wb25lbnRgIGluc2lkZSBvZiB0aGlzIGBCdXR0b25gLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xDb21wb25lbnR9IGNoaWxkXG4gICAqICAgICAgICBUaGUgbmFtZSBvciBpbnN0YW5jZSBvZiBhIGNoaWxkIHRvIGFkZC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBvcHRpb25zIHRoYXQgd2lsbCBnZXQgcGFzc2VkIHRvIGNoaWxkcmVuIG9mXG4gICAqICAgICAgICB0aGUgY2hpbGQuXG4gICAqXG4gICAqIEByZXR1cm4ge0NvbXBvbmVudH1cbiAgICogICAgICAgICBUaGUgYENvbXBvbmVudGAgdGhhdCBnZXRzIGFkZGVkIGFzIGEgY2hpbGQuIFdoZW4gdXNpbmcgYSBzdHJpbmcgdGhlXG4gICAqICAgICAgICAgYENvbXBvbmVudGAgd2lsbCBnZXQgY3JlYXRlZCBieSB0aGlzIHByb2Nlc3MuXG4gICAqXG4gICAqIEBkZXByZWNhdGVkIHNpbmNlIHZlcnNpb24gNVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5hZGRDaGlsZCA9IGZ1bmN0aW9uIGFkZENoaWxkKGNoaWxkLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIHZhciBjbGFzc05hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgbG9nLndhcm4oXCJBZGRpbmcgYW4gYWN0aW9uYWJsZSAodXNlciBjb250cm9sbGFibGUpIGNoaWxkIHRvIGEgQnV0dG9uIChcIiArIGNsYXNzTmFtZSArIFwiKSBpcyBub3Qgc3VwcG9ydGVkOyB1c2UgYSBDbGlja2FibGVDb21wb25lbnQgaW5zdGVhZC5cIik7IC8vIEF2b2lkIHRoZSBlcnJvciBtZXNzYWdlIGdlbmVyYXRlZCBieSBDbGlja2FibGVDb21wb25lbnQncyBhZGRDaGlsZCBtZXRob2RcblxuICAgIHJldHVybiBDb21wb25lbnQucHJvdG90eXBlLmFkZENoaWxkLmNhbGwodGhpcywgY2hpbGQsIG9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBFbmFibGUgdGhlIGBCdXR0b25gIGVsZW1lbnQgc28gdGhhdCBpdCBjYW4gYmUgYWN0aXZhdGVkIG9yIGNsaWNrZWQuIFVzZSB0aGlzIHdpdGhcbiAgICoge0BsaW5rIEJ1dHRvbiNkaXNhYmxlfS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZW5hYmxlID0gZnVuY3Rpb24gZW5hYmxlKCkge1xuICAgIF9DbGlja2FibGVDb21wb25lbnQucHJvdG90eXBlLmVuYWJsZS5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy5lbF8ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICB9XG4gIC8qKlxuICAgKiBEaXNhYmxlIHRoZSBgQnV0dG9uYCBlbGVtZW50IHNvIHRoYXQgaXQgY2Fubm90IGJlIGFjdGl2YXRlZCBvciBjbGlja2VkLiBVc2UgdGhpcyB3aXRoXG4gICAqIHtAbGluayBCdXR0b24jZW5hYmxlfS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGlzYWJsZSA9IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgX0NsaWNrYWJsZUNvbXBvbmVudC5wcm90b3R5cGUuZGlzYWJsZS5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICB9XG4gIC8qKlxuICAgKiBUaGlzIGdldHMgY2FsbGVkIHdoZW4gYSBgQnV0dG9uYCBoYXMgZm9jdXMgYW5kIGBrZXlkb3duYCBpcyB0cmlnZ2VyZWQgdmlhIGEga2V5XG4gICAqIHByZXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKiAgICAgICAgVGhlIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gZ2V0IGNhbGxlZC5cbiAgICpcbiAgICogQGxpc3RlbnMga2V5ZG93blxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVLZXlQcmVzcyA9IGZ1bmN0aW9uIGhhbmRsZUtleVByZXNzKGV2ZW50KSB7XG4gICAgLy8gSWdub3JlIFNwYWNlIG9yIEVudGVyIGtleSBvcGVyYXRpb24sIHdoaWNoIGlzIGhhbmRsZWQgYnkgdGhlIGJyb3dzZXIgZm9yIGEgYnV0dG9uLlxuICAgIGlmICghKGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ1NwYWNlJykgfHwga2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnRW50ZXInKSkpIHtcbiAgICAgIC8vIFBhc3Mga2V5cHJlc3MgaGFuZGxpbmcgdXAgZm9yIHVuc3VwcG9ydGVkIGtleXNcbiAgICAgIF9DbGlja2FibGVDb21wb25lbnQucHJvdG90eXBlLmhhbmRsZUtleVByZXNzLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQnV0dG9uO1xufShDbGlja2FibGVDb21wb25lbnQpO1xuXG5Db21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ0J1dHRvbicsIEJ1dHRvbik7XG5cbi8qKlxuICogVGhlIGluaXRpYWwgcGxheSBidXR0b24gdGhhdCBzaG93cyBiZWZvcmUgdGhlIHZpZGVvIGhhcyBwbGF5ZWQuIFRoZSBoaWRpbmcgb2YgdGhlXG4gKiBgQmlnUGxheUJ1dHRvbmAgZ2V0IGRvbmUgdmlhIENTUyBhbmQgYFBsYXllcmAgc3RhdGVzLlxuICpcbiAqIEBleHRlbmRzIEJ1dHRvblxuICovXG5cbnZhciBCaWdQbGF5QnV0dG9uID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQnV0dG9uKSB7XG4gIF9pbmhlcml0c0xvb3NlKEJpZ1BsYXlCdXR0b24sIF9CdXR0b24pO1xuXG4gIGZ1bmN0aW9uIEJpZ1BsYXlCdXR0b24ocGxheWVyLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgIF90aGlzLm1vdXNldXNlZF8gPSBmYWxzZTtcblxuICAgIF90aGlzLm9uKCdtb3VzZWRvd24nLCBfdGhpcy5oYW5kbGVNb3VzZURvd24pO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBCdWlsZHMgdGhlIGRlZmF1bHQgRE9NIGBjbGFzc05hbWVgLlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIERPTSBgY2xhc3NOYW1lYCBmb3IgdGhpcyBvYmplY3QuIEFsd2F5cyByZXR1cm5zICd2anMtYmlnLXBsYXktYnV0dG9uJy5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gQmlnUGxheUJ1dHRvbi5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgIHJldHVybiAndmpzLWJpZy1wbGF5LWJ1dHRvbic7XG4gIH1cbiAgLyoqXG4gICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhIGBCaWdQbGF5QnV0dG9uYCBcImNsaWNrZWRcIi4gU2VlIHtAbGluayBDbGlja2FibGVDb21wb25lbnR9XG4gICAqIGZvciBtb3JlIGRldGFpbGVkIGluZm9ybWF0aW9uIG9uIHdoYXQgYSBjbGljayBjYW4gYmUuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYGtleWRvd25gLCBgdGFwYCwgb3IgYGNsaWNrYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlXG4gICAqICAgICAgICBjYWxsZWQuXG4gICAqXG4gICAqIEBsaXN0ZW5zIHRhcFxuICAgKiBAbGlzdGVucyBjbGlja1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XG4gICAgdmFyIHBsYXlQcm9taXNlID0gdGhpcy5wbGF5ZXJfLnBsYXkoKTsgLy8gZXhpdCBlYXJseSBpZiBjbGlja2VkIHZpYSB0aGUgbW91c2VcblxuICAgIGlmICh0aGlzLm1vdXNldXNlZF8gJiYgZXZlbnQuY2xpZW50WCAmJiBldmVudC5jbGllbnRZKSB7XG4gICAgICBzaWxlbmNlUHJvbWlzZShwbGF5UHJvbWlzZSk7IC8vIGNhbGwgaGFuZGxlRm9jdXMgbWFudWFsbHkgdG8gZ2V0IGhvdGtleXMgd29ya2luZ1xuXG4gICAgICB0aGlzLnBsYXllcl8uaGFuZGxlRm9jdXMoe30pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBjYiA9IHRoaXMucGxheWVyXy5nZXRDaGlsZCgnY29udHJvbEJhcicpO1xuICAgIHZhciBwbGF5VG9nZ2xlID0gY2IgJiYgY2IuZ2V0Q2hpbGQoJ3BsYXlUb2dnbGUnKTtcblxuICAgIGlmICghcGxheVRvZ2dsZSkge1xuICAgICAgdGhpcy5wbGF5ZXJfLmZvY3VzKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHBsYXlGb2N1cyA9IGZ1bmN0aW9uIHBsYXlGb2N1cygpIHtcbiAgICAgIHJldHVybiBwbGF5VG9nZ2xlLmZvY3VzKCk7XG4gICAgfTtcblxuICAgIGlmIChpc1Byb21pc2UocGxheVByb21pc2UpKSB7XG4gICAgICBwbGF5UHJvbWlzZS50aGVuKHBsYXlGb2N1cywgZnVuY3Rpb24gKCkge30pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFRpbWVvdXQocGxheUZvY3VzLCAxKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZUtleVByZXNzID0gZnVuY3Rpb24gaGFuZGxlS2V5UHJlc3MoZXZlbnQpIHtcbiAgICB0aGlzLm1vdXNldXNlZF8gPSBmYWxzZTtcblxuICAgIF9CdXR0b24ucHJvdG90eXBlLmhhbmRsZUtleVByZXNzLmNhbGwodGhpcywgZXZlbnQpO1xuICB9O1xuXG4gIF9wcm90by5oYW5kbGVNb3VzZURvd24gPSBmdW5jdGlvbiBoYW5kbGVNb3VzZURvd24oZXZlbnQpIHtcbiAgICB0aGlzLm1vdXNldXNlZF8gPSB0cnVlO1xuICB9O1xuXG4gIHJldHVybiBCaWdQbGF5QnV0dG9uO1xufShCdXR0b24pO1xuLyoqXG4gKiBUaGUgdGV4dCB0aGF0IHNob3VsZCBkaXNwbGF5IG92ZXIgdGhlIGBCaWdQbGF5QnV0dG9uYHMgY29udHJvbHMuIEFkZGVkIHRvIGZvciBsb2NhbGl6YXRpb24uXG4gKlxuICogQHR5cGUge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5CaWdQbGF5QnV0dG9uLnByb3RvdHlwZS5jb250cm9sVGV4dF8gPSAnUGxheSBWaWRlbyc7XG5Db21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ0JpZ1BsYXlCdXR0b24nLCBCaWdQbGF5QnV0dG9uKTtcblxuLyoqXG4gKiBUaGUgYENsb3NlQnV0dG9uYCBpcyBhIGB7QGxpbmsgQnV0dG9ufWAgdGhhdCBmaXJlcyBhIGBjbG9zZWAgZXZlbnQgd2hlblxuICogaXQgZ2V0cyBjbGlja2VkLlxuICpcbiAqIEBleHRlbmRzIEJ1dHRvblxuICovXG5cbnZhciBDbG9zZUJ1dHRvbiA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0J1dHRvbikge1xuICBfaW5oZXJpdHNMb29zZShDbG9zZUJ1dHRvbiwgX0J1dHRvbik7XG5cbiAgLyoqXG4gICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgdGhpcyBjbGFzcy5cbiAgKlxuICAqIEBwYXJhbSAge1BsYXllcn0gcGxheWVyXG4gICogICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgKlxuICAqIEBwYXJhbSAge09iamVjdH0gW29wdGlvbnNdXG4gICogICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAqL1xuICBmdW5jdGlvbiBDbG9zZUJ1dHRvbihwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9CdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG5cbiAgICBfdGhpcy5jb250cm9sVGV4dChvcHRpb25zICYmIG9wdGlvbnMuY29udHJvbFRleHQgfHwgX3RoaXMubG9jYWxpemUoJ0Nsb3NlJykpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAqIEJ1aWxkcyB0aGUgZGVmYXVsdCBET00gYGNsYXNzTmFtZWAuXG4gICpcbiAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICogICAgICAgICBUaGUgRE9NIGBjbGFzc05hbWVgIGZvciB0aGlzIG9iamVjdC5cbiAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBDbG9zZUJ1dHRvbi5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgIHJldHVybiBcInZqcy1jbG9zZS1idXR0b24gXCIgKyBfQnV0dG9uLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhIGBDbG9zZUJ1dHRvbmAgaGFzIGZvY3VzIGFuZCBga2V5ZG93bmAgaXMgdHJpZ2dlcmVkIHZpYSBhIGtleVxuICAgKiBwcmVzcy5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIFRoZSBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGdldCBjYWxsZWQuXG4gICAqXG4gICAqIEBsaXN0ZW5zIGtleWRvd25cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlS2V5UHJlc3MgPSBmdW5jdGlvbiBoYW5kbGVLZXlQcmVzcyhldmVudCkge30gLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgYEJ1dHRvbmAgYmVoYXZpb3IsIGFuZCBkb24ndCBwYXNzIHRoZSBrZXlwcmVzcyBldmVudFxuICAvLyAgdXAgdG8gdGhlIHBsYXllciBiZWNhdXNlIHRoaXMgYnV0dG9uIGlzIHBhcnQgb2YgYSBgTW9kYWxEaWFsb2dgLCB3aGljaFxuICAvLyAgZG9lc24ndCBwYXNzIGtleXByZXNzZXMgdG8gdGhlIHBsYXllciBlaXRoZXIuXG5cbiAgLyoqXG4gICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhIGBDbG9zZUJ1dHRvbmAgZ2V0cyBjbGlja2VkLiBTZWVcbiAgICoge0BsaW5rIENsaWNrYWJsZUNvbXBvbmVudCNoYW5kbGVDbGlja30gZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gd2hlbiB0aGlzIHdpbGwgYmVcbiAgICogdHJpZ2dlcmVkXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYGtleWRvd25gLCBgdGFwYCwgb3IgYGNsaWNrYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlXG4gICAqICAgICAgICBjYWxsZWQuXG4gICAqXG4gICAqIEBsaXN0ZW5zIHRhcFxuICAgKiBAbGlzdGVucyBjbGlja1xuICAgKiBAZmlyZXMgQ2xvc2VCdXR0b24jY2xvc2VcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljayhldmVudCkge1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIHRoZSBhIGBDbG9zZUJ1dHRvbmAgaXMgY2xpY2tlZC5cbiAgICAgKlxuICAgICAqIEBldmVudCBDbG9zZUJ1dHRvbiNjbG9zZVxuICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2J1YmJsZXM9ZmFsc2VdXG4gICAgICogICAgICAgICAgIHNldCB0byBmYWxzZSBzbyB0aGF0IHRoZSBjbG9zZSBldmVudCBkb2VzIG5vdFxuICAgICAqICAgICAgICAgICBidWJibGUgdXAgdG8gcGFyZW50cyBpZiB0aGVyZSBpcyBubyBsaXN0ZW5lclxuICAgICAqL1xuICAgIHRoaXMudHJpZ2dlcih7XG4gICAgICB0eXBlOiAnY2xvc2UnLFxuICAgICAgYnViYmxlczogZmFsc2VcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gQ2xvc2VCdXR0b247XG59KEJ1dHRvbik7XG5cbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnQ2xvc2VCdXR0b24nLCBDbG9zZUJ1dHRvbik7XG5cbi8qKlxuICogQnV0dG9uIHRvIHRvZ2dsZSBiZXR3ZWVuIHBsYXkgYW5kIHBhdXNlLlxuICpcbiAqIEBleHRlbmRzIEJ1dHRvblxuICovXG5cbnZhciBQbGF5VG9nZ2xlID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQnV0dG9uKSB7XG4gIF9pbmhlcml0c0xvb3NlKFBsYXlUb2dnbGUsIF9CdXR0b24pO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dXG4gICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgKi9cbiAgZnVuY3Rpb24gUGxheVRvZ2dsZShwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgX3RoaXMgPSBfQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzOyAvLyBzaG93IG9yIGhpZGUgcmVwbGF5IGljb25cblxuICAgIG9wdGlvbnMucmVwbGF5ID0gb3B0aW9ucy5yZXBsYXkgPT09IHVuZGVmaW5lZCB8fCBvcHRpb25zLnJlcGxheTtcblxuICAgIF90aGlzLm9uKHBsYXllciwgJ3BsYXknLCBfdGhpcy5oYW5kbGVQbGF5KTtcblxuICAgIF90aGlzLm9uKHBsYXllciwgJ3BhdXNlJywgX3RoaXMuaGFuZGxlUGF1c2UpO1xuXG4gICAgaWYgKG9wdGlvbnMucmVwbGF5KSB7XG4gICAgICBfdGhpcy5vbihwbGF5ZXIsICdlbmRlZCcsIF90aGlzLmhhbmRsZUVuZGVkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEJ1aWxkcyB0aGUgZGVmYXVsdCBET00gYGNsYXNzTmFtZWAuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBUaGUgRE9NIGBjbGFzc05hbWVgIGZvciB0aGlzIG9iamVjdC5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gUGxheVRvZ2dsZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgIHJldHVybiBcInZqcy1wbGF5LWNvbnRyb2wgXCIgKyBfQnV0dG9uLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhbiBgUGxheVRvZ2dsZWAgaXMgXCJjbGlja2VkXCIuIFNlZVxuICAgKiB7QGxpbmsgQ2xpY2thYmxlQ29tcG9uZW50fSBmb3IgbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiBvbiB3aGF0IGEgY2xpY2sgY2FuIGJlLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAqICAgICAgICBUaGUgYGtleWRvd25gLCBgdGFwYCwgb3IgYGNsaWNrYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlXG4gICAqICAgICAgICBjYWxsZWQuXG4gICAqXG4gICAqIEBsaXN0ZW5zIHRhcFxuICAgKiBAbGlzdGVucyBjbGlja1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMucGxheWVyXy5wYXVzZWQoKSkge1xuICAgICAgdGhpcy5wbGF5ZXJfLnBsYXkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wbGF5ZXJfLnBhdXNlKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBUaGlzIGdldHMgY2FsbGVkIG9uY2UgYWZ0ZXIgdGhlIHZpZGVvIGhhcyBlbmRlZCBhbmQgdGhlIHVzZXIgc2Vla3Mgc28gdGhhdFxuICAgKiB3ZSBjYW4gY2hhbmdlIHRoZSByZXBsYXkgYnV0dG9uIGJhY2sgdG8gYSBwbGF5IGJ1dHRvbi5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgKiAgICAgICAgVGhlIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gcnVuLlxuICAgKlxuICAgKiBAbGlzdGVucyBQbGF5ZXIjc2Vla2VkXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZVNlZWtlZCA9IGZ1bmN0aW9uIGhhbmRsZVNlZWtlZChldmVudCkge1xuICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1lbmRlZCcpO1xuXG4gICAgaWYgKHRoaXMucGxheWVyXy5wYXVzZWQoKSkge1xuICAgICAgdGhpcy5oYW5kbGVQYXVzZShldmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGFuZGxlUGxheShldmVudCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBBZGQgdGhlIHZqcy1wbGF5aW5nIGNsYXNzIHRvIHRoZSBlbGVtZW50IHNvIGl0IGNhbiBjaGFuZ2UgYXBwZWFyYW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgKiAgICAgICAgVGhlIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gcnVuLlxuICAgKlxuICAgKiBAbGlzdGVucyBQbGF5ZXIjcGxheVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVQbGF5ID0gZnVuY3Rpb24gaGFuZGxlUGxheShldmVudCkge1xuICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1lbmRlZCcpO1xuICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1wYXVzZWQnKTtcbiAgICB0aGlzLmFkZENsYXNzKCd2anMtcGxheWluZycpOyAvLyBjaGFuZ2UgdGhlIGJ1dHRvbiB0ZXh0IHRvIFwiUGF1c2VcIlxuXG4gICAgdGhpcy5jb250cm9sVGV4dCgnUGF1c2UnKTtcbiAgfVxuICAvKipcbiAgICogQWRkIHRoZSB2anMtcGF1c2VkIGNsYXNzIHRvIHRoZSBlbGVtZW50IHNvIGl0IGNhbiBjaGFuZ2UgYXBwZWFyYW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgKiAgICAgICAgVGhlIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gcnVuLlxuICAgKlxuICAgKiBAbGlzdGVucyBQbGF5ZXIjcGF1c2VcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlUGF1c2UgPSBmdW5jdGlvbiBoYW5kbGVQYXVzZShldmVudCkge1xuICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1wbGF5aW5nJyk7XG4gICAgdGhpcy5hZGRDbGFzcygndmpzLXBhdXNlZCcpOyAvLyBjaGFuZ2UgdGhlIGJ1dHRvbiB0ZXh0IHRvIFwiUGxheVwiXG5cbiAgICB0aGlzLmNvbnRyb2xUZXh0KCdQbGF5Jyk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCB0aGUgdmpzLWVuZGVkIGNsYXNzIHRvIHRoZSBlbGVtZW50IHNvIGl0IGNhbiBjaGFuZ2UgYXBwZWFyYW5jZVxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAqICAgICAgICBUaGUgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBydW4uXG4gICAqXG4gICAqIEBsaXN0ZW5zIFBsYXllciNlbmRlZFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVFbmRlZCA9IGZ1bmN0aW9uIGhhbmRsZUVuZGVkKGV2ZW50KSB7XG4gICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLXBsYXlpbmcnKTtcbiAgICB0aGlzLmFkZENsYXNzKCd2anMtZW5kZWQnKTsgLy8gY2hhbmdlIHRoZSBidXR0b24gdGV4dCB0byBcIlJlcGxheVwiXG5cbiAgICB0aGlzLmNvbnRyb2xUZXh0KCdSZXBsYXknKTsgLy8gb24gdGhlIG5leHQgc2VlayByZW1vdmUgdGhlIHJlcGxheSBidXR0b25cblxuICAgIHRoaXMub25lKHRoaXMucGxheWVyXywgJ3NlZWtlZCcsIHRoaXMuaGFuZGxlU2Vla2VkKTtcbiAgfTtcblxuICByZXR1cm4gUGxheVRvZ2dsZTtcbn0oQnV0dG9uKTtcbi8qKlxuICogVGhlIHRleHQgdGhhdCBzaG91bGQgZGlzcGxheSBvdmVyIHRoZSBgUGxheVRvZ2dsZWBzIGNvbnRyb2xzLiBBZGRlZCBmb3IgbG9jYWxpemF0aW9uLlxuICpcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG5cblxuUGxheVRvZ2dsZS5wcm90b3R5cGUuY29udHJvbFRleHRfID0gJ1BsYXknO1xuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdQbGF5VG9nZ2xlJywgUGxheVRvZ2dsZSk7XG5cbi8qKlxuICogQGZpbGUgZm9ybWF0LXRpbWUuanNcbiAqIEBtb2R1bGUgZm9ybWF0LXRpbWVcbiAqL1xuXG4vKipcbiAqIEZvcm1hdCBzZWNvbmRzIGFzIGEgdGltZSBzdHJpbmcsIEg6TU06U1Mgb3IgTTpTUy4gU3VwcGx5aW5nIGEgZ3VpZGUgKGluXG4gKiBzZWNvbmRzKSB3aWxsIGZvcmNlIGEgbnVtYmVyIG9mIGxlYWRpbmcgemVyb3MgdG8gY292ZXIgdGhlIGxlbmd0aCBvZiB0aGVcbiAqIGd1aWRlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0gIHtudW1iZXJ9IHNlY29uZHNcbiAqICAgICAgICAgTnVtYmVyIG9mIHNlY29uZHMgdG8gYmUgdHVybmVkIGludG8gYSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0gIHtudW1iZXJ9IGd1aWRlXG4gKiAgICAgICAgIE51bWJlciAoaW4gc2Vjb25kcykgdG8gbW9kZWwgdGhlIHN0cmluZyBhZnRlclxuICpcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqICAgICAgICAgVGltZSBmb3JtYXR0ZWQgYXMgSDpNTTpTUyBvciBNOlNTXG4gKi9cbnZhciBkZWZhdWx0SW1wbGVtZW50YXRpb24gPSBmdW5jdGlvbiBkZWZhdWx0SW1wbGVtZW50YXRpb24oc2Vjb25kcywgZ3VpZGUpIHtcbiAgc2Vjb25kcyA9IHNlY29uZHMgPCAwID8gMCA6IHNlY29uZHM7XG4gIHZhciBzID0gTWF0aC5mbG9vcihzZWNvbmRzICUgNjApO1xuICB2YXIgbSA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwICUgNjApO1xuICB2YXIgaCA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDM2MDApO1xuICB2YXIgZ20gPSBNYXRoLmZsb29yKGd1aWRlIC8gNjAgJSA2MCk7XG4gIHZhciBnaCA9IE1hdGguZmxvb3IoZ3VpZGUgLyAzNjAwKTsgLy8gaGFuZGxlIGludmFsaWQgdGltZXNcblxuICBpZiAoaXNOYU4oc2Vjb25kcykgfHwgc2Vjb25kcyA9PT0gSW5maW5pdHkpIHtcbiAgICAvLyAnLScgaXMgZmFsc2UgZm9yIGFsbCByZWxhdGlvbmFsIG9wZXJhdG9ycyAoZS5nLiA8LCA+PSkgc28gdGhpcyBzZXR0aW5nXG4gICAgLy8gd2lsbCBhZGQgdGhlIG1pbmltdW0gbnVtYmVyIG9mIGZpZWxkcyBzcGVjaWZpZWQgYnkgdGhlIGd1aWRlXG4gICAgaCA9IG0gPSBzID0gJy0nO1xuICB9IC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gc2hvdyBob3Vyc1xuXG5cbiAgaCA9IGggPiAwIHx8IGdoID4gMCA/IGggKyAnOicgOiAnJzsgLy8gSWYgaG91cnMgYXJlIHNob3dpbmcsIHdlIG1heSBuZWVkIHRvIGFkZCBhIGxlYWRpbmcgemVyby5cbiAgLy8gQWx3YXlzIHNob3cgYXQgbGVhc3Qgb25lIGRpZ2l0IG9mIG1pbnV0ZXMuXG5cbiAgbSA9ICgoaCB8fCBnbSA+PSAxMCkgJiYgbSA8IDEwID8gJzAnICsgbSA6IG0pICsgJzonOyAvLyBDaGVjayBpZiBsZWFkaW5nIHplcm8gaXMgbmVlZCBmb3Igc2Vjb25kc1xuXG4gIHMgPSBzIDwgMTAgPyAnMCcgKyBzIDogcztcbiAgcmV0dXJuIGggKyBtICsgcztcbn07IC8vIEludGVybmFsIHBvaW50ZXIgdG8gdGhlIGN1cnJlbnQgaW1wbGVtZW50YXRpb24uXG5cblxudmFyIGltcGxlbWVudGF0aW9uID0gZGVmYXVsdEltcGxlbWVudGF0aW9uO1xuLyoqXG4gKiBSZXBsYWNlcyB0aGUgZGVmYXVsdCBmb3JtYXRUaW1lIGltcGxlbWVudGF0aW9uIHdpdGggYSBjdXN0b20gaW1wbGVtZW50YXRpb24uXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9tSW1wbGVtZW50YXRpb25cbiAqICAgICAgICBBIGZ1bmN0aW9uIHdoaWNoIHdpbGwgYmUgdXNlZCBpbiBwbGFjZSBvZiB0aGUgZGVmYXVsdCBmb3JtYXRUaW1lXG4gKiAgICAgICAgaW1wbGVtZW50YXRpb24uIFdpbGwgcmVjZWl2ZSB0aGUgY3VycmVudCB0aW1lIGluIHNlY29uZHMgYW5kIHRoZVxuICogICAgICAgIGd1aWRlIChpbiBzZWNvbmRzKSBhcyBhcmd1bWVudHMuXG4gKi9cblxuZnVuY3Rpb24gc2V0Rm9ybWF0VGltZShjdXN0b21JbXBsZW1lbnRhdGlvbikge1xuICBpbXBsZW1lbnRhdGlvbiA9IGN1c3RvbUltcGxlbWVudGF0aW9uO1xufVxuLyoqXG4gKiBSZXNldHMgZm9ybWF0VGltZSB0byB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuXG5mdW5jdGlvbiByZXNldEZvcm1hdFRpbWUoKSB7XG4gIGltcGxlbWVudGF0aW9uID0gZGVmYXVsdEltcGxlbWVudGF0aW9uO1xufVxuLyoqXG4gKiBEZWxlZ2F0ZXMgdG8gZWl0aGVyIHRoZSBkZWZhdWx0IHRpbWUgZm9ybWF0dGluZyBmdW5jdGlvbiBvciBhIGN1c3RvbVxuICogZnVuY3Rpb24gc3VwcGxpZWQgdmlhIGBzZXRGb3JtYXRUaW1lYC5cbiAqXG4gKiBGb3JtYXRzIHNlY29uZHMgYXMgYSB0aW1lIHN0cmluZyAoSDpNTTpTUyBvciBNOlNTKS4gU3VwcGx5aW5nIGFcbiAqIGd1aWRlIChpbiBzZWNvbmRzKSB3aWxsIGZvcmNlIGEgbnVtYmVyIG9mIGxlYWRpbmcgemVyb3MgdG8gY292ZXIgdGhlXG4gKiBsZW5ndGggb2YgdGhlIGd1aWRlLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBleGFtcGxlICBmb3JtYXRUaW1lKDEyNSwgNjAwKSA9PT0gXCIwMjowNVwiXG4gKiBAcGFyYW0gICAge251bWJlcn0gc2Vjb25kc1xuICogICAgICAgICAgIE51bWJlciBvZiBzZWNvbmRzIHRvIGJlIHR1cm5lZCBpbnRvIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtICAgIHtudW1iZXJ9IGd1aWRlXG4gKiAgICAgICAgICAgTnVtYmVyIChpbiBzZWNvbmRzKSB0byBtb2RlbCB0aGUgc3RyaW5nIGFmdGVyXG4gKlxuICogQHJldHVybiAgIHtzdHJpbmd9XG4gKiAgICAgICAgICAgVGltZSBmb3JtYXR0ZWQgYXMgSDpNTTpTUyBvciBNOlNTXG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0VGltZShzZWNvbmRzLCBndWlkZSkge1xuICBpZiAoZ3VpZGUgPT09IHZvaWQgMCkge1xuICAgIGd1aWRlID0gc2Vjb25kcztcbiAgfVxuXG4gIHJldHVybiBpbXBsZW1lbnRhdGlvbihzZWNvbmRzLCBndWlkZSk7XG59XG5cbi8qKlxuICogRGlzcGxheXMgdGltZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdmlkZW9cbiAqXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuXG52YXIgVGltZURpc3BsYXkgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzTG9vc2UoVGltZURpc3BsYXksIF9Db21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgKi9cbiAgZnVuY3Rpb24gVGltZURpc3BsYXkocGxheWVyLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgIF90aGlzLnRocm90dGxlZFVwZGF0ZUNvbnRlbnQgPSB0aHJvdHRsZShiaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBfdGhpcy51cGRhdGVDb250ZW50KSwgMjUpO1xuXG4gICAgX3RoaXMub24ocGxheWVyLCAndGltZXVwZGF0ZScsIF90aGlzLnRocm90dGxlZFVwZGF0ZUNvbnRlbnQpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgJ3MgRE9NIGVsZW1lbnRcbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBUaW1lRGlzcGxheS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwkJDEoKSB7XG4gICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMuYnVpbGRDU1NDbGFzcygpO1xuXG4gICAgdmFyIGVsID0gX0NvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyBcIiB2anMtdGltZS1jb250cm9sIHZqcy1jb250cm9sXCIsXG4gICAgICBpbm5lckhUTUw6IFwiPHNwYW4gY2xhc3M9XFxcInZqcy1jb250cm9sLXRleHRcXFwiIHJvbGU9XFxcInByZXNlbnRhdGlvblxcXCI+XCIgKyB0aGlzLmxvY2FsaXplKHRoaXMubGFiZWxUZXh0XykgKyBcIlxceEEwPC9zcGFuPlwiXG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRlbnRFbF8gPSBjcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lICsgXCItZGlzcGxheVwiXG4gICAgfSwge1xuICAgICAgLy8gdGVsbCBzY3JlZW4gcmVhZGVycyBub3QgdG8gYXV0b21hdGljYWxseSByZWFkIHRoZSB0aW1lIGFzIGl0IGNoYW5nZXNcbiAgICAgICdhcmlhLWxpdmUnOiAnb2ZmJyxcbiAgICAgIC8vIHNwYW4gZWxlbWVudHMgaGF2ZSBubyBpbXBsaWNpdCByb2xlLCBidXQgc29tZSBzY3JlZW4gcmVhZGVycyAobm90YWJseSBWb2ljZU92ZXIpXG4gICAgICAvLyB0cmVhdCB0aGVtIGFzIGEgYnJlYWsgYmV0d2VlbiBpdGVtcyBpbiB0aGUgRE9NIHdoZW4gdXNpbmcgYXJyb3cga2V5c1xuICAgICAgLy8gKG9yIGxlZnQtdG8tcmlnaHQgc3dpcGVzIG9uIGlPUykgdG8gcmVhZCBjb250ZW50cyBvZiBhIHBhZ2UuIFVzaW5nXG4gICAgICAvLyByb2xlPSdwcmVzZW50YXRpb24nIGNhdXNlcyBWb2ljZU92ZXIgdG8gTk9UIHRyZWF0IHRoaXMgc3BhbiBhcyBhIGJyZWFrLlxuICAgICAgJ3JvbGUnOiAncHJlc2VudGF0aW9uJ1xuICAgIH0pO1xuICAgIHRoaXMudXBkYXRlVGV4dE5vZGVfKCk7XG4gICAgZWwuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50RWxfKTtcbiAgICByZXR1cm4gZWw7XG4gIH07XG5cbiAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgIHRoaXMuY29udGVudEVsXyA9IG51bGw7XG4gICAgdGhpcy50ZXh0Tm9kZV8gPSBudWxsO1xuXG4gICAgX0NvbXBvbmVudC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBcInJlbWFpbmluZyB0aW1lXCIgdGV4dCBub2RlIHdpdGggbmV3IGNvbnRlbnQgdXNpbmcgdGhlXG4gICAqIGNvbnRlbnRzIG9mIHRoZSBgZm9ybWF0dGVkVGltZV9gIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by51cGRhdGVUZXh0Tm9kZV8gPSBmdW5jdGlvbiB1cGRhdGVUZXh0Tm9kZV8oKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRlbnRFbF8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3aGlsZSAodGhpcy5jb250ZW50RWxfLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHRoaXMuY29udGVudEVsXy5yZW1vdmVDaGlsZCh0aGlzLmNvbnRlbnRFbF8uZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgdGhpcy50ZXh0Tm9kZV8gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLmZvcm1hdHRlZFRpbWVfIHx8IHRoaXMuZm9ybWF0VGltZV8oMCkpO1xuICAgIHRoaXMuY29udGVudEVsXy5hcHBlbmRDaGlsZCh0aGlzLnRleHROb2RlXyk7XG4gIH1cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIGZvcm1hdHRlZCB0aW1lIGZvciB0aGlzIGNvbXBvbmVudCB0byB1c2UgaW4gZGlzcGxheS5cbiAgICpcbiAgICogQHBhcmFtICB7bnVtYmVyfSB0aW1lXG4gICAqICAgICAgICAgQSBudW1lcmljIHRpbWUsIGluIHNlY29uZHMuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBBIGZvcm1hdHRlZCB0aW1lXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmZvcm1hdFRpbWVfID0gZnVuY3Rpb24gZm9ybWF0VGltZV8odGltZSkge1xuICAgIHJldHVybiBmb3JtYXRUaW1lKHRpbWUpO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSB0aW1lIGRpc3BsYXkgdGV4dCBub2RlIGlmIGl0IGhhcyB3aGF0IHdhcyBwYXNzZWQgaW4gY2hhbmdlZFxuICAgKiB0aGUgZm9ybWF0dGVkIHRpbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lXG4gICAqICAgICAgICBUaGUgdGltZSB0byB1cGRhdGUgdG9cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlRm9ybWF0dGVkVGltZV8gPSBmdW5jdGlvbiB1cGRhdGVGb3JtYXR0ZWRUaW1lXyh0aW1lKSB7XG4gICAgdmFyIGZvcm1hdHRlZFRpbWUgPSB0aGlzLmZvcm1hdFRpbWVfKHRpbWUpO1xuXG4gICAgaWYgKGZvcm1hdHRlZFRpbWUgPT09IHRoaXMuZm9ybWF0dGVkVGltZV8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmZvcm1hdHRlZFRpbWVfID0gZm9ybWF0dGVkVGltZTtcbiAgICB0aGlzLnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZVRleHROb2RlXyk7XG4gIH1cbiAgLyoqXG4gICAqIFRvIGJlIGZpbGxlZCBvdXQgaW4gdGhlIGNoaWxkIGNsYXNzLCBzaG91bGQgdXBkYXRlIHRoZSBkaXNwbGF5ZWQgdGltZVxuICAgKiBpbiBhY2NvcmRhbmNlIHdpdGggdGhlIGZhY3QgdGhhdCB0aGUgY3VycmVudCB0aW1lIGhhcyBjaGFuZ2VkLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAqICAgICAgICBUaGUgYHRpbWV1cGRhdGVgICBldmVudCB0aGF0IGNhdXNlZCB0aGlzIHRvIHJ1bi5cbiAgICpcbiAgICogQGxpc3RlbnMgUGxheWVyI3RpbWV1cGRhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlQ29udGVudCA9IGZ1bmN0aW9uIHVwZGF0ZUNvbnRlbnQoZXZlbnQpIHt9O1xuXG4gIHJldHVybiBUaW1lRGlzcGxheTtcbn0oQ29tcG9uZW50KTtcbi8qKlxuICogVGhlIHRleHQgdGhhdCBpcyBhZGRlZCB0byB0aGUgYFRpbWVEaXNwbGF5YCBmb3Igc2NyZWVuIHJlYWRlciB1c2Vycy5cbiAqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuXG5cblRpbWVEaXNwbGF5LnByb3RvdHlwZS5sYWJlbFRleHRfID0gJ1RpbWUnO1xuLyoqXG4gKiBUaGUgdGV4dCB0aGF0IHNob3VsZCBkaXNwbGF5IG92ZXIgdGhlIGBUaW1lRGlzcGxheWBzIGNvbnRyb2xzLiBBZGRlZCB0byBmb3IgbG9jYWxpemF0aW9uLlxuICpcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBkZXByZWNhdGVkIGluIHY3OyBjb250cm9sVGV4dF8gaXMgbm90IHVzZWQgaW4gbm9uLWFjdGl2ZSBkaXNwbGF5IENvbXBvbmVudHNcbiAqL1xuXG5UaW1lRGlzcGxheS5wcm90b3R5cGUuY29udHJvbFRleHRfID0gJ1RpbWUnO1xuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdUaW1lRGlzcGxheScsIFRpbWVEaXNwbGF5KTtcblxuLyoqXG4gKiBEaXNwbGF5cyB0aGUgY3VycmVudCB0aW1lXG4gKlxuICogQGV4dGVuZHMgQ29tcG9uZW50XG4gKi9cblxudmFyIEN1cnJlbnRUaW1lRGlzcGxheSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX1RpbWVEaXNwbGF5KSB7XG4gIF9pbmhlcml0c0xvb3NlKEN1cnJlbnRUaW1lRGlzcGxheSwgX1RpbWVEaXNwbGF5KTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICovXG4gIGZ1bmN0aW9uIEN1cnJlbnRUaW1lRGlzcGxheShwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9UaW1lRGlzcGxheS5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcblxuICAgIF90aGlzLm9uKHBsYXllciwgJ2VuZGVkJywgX3RoaXMuaGFuZGxlRW5kZWQpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBCdWlsZHMgdGhlIGRlZmF1bHQgRE9NIGBjbGFzc05hbWVgLlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIERPTSBgY2xhc3NOYW1lYCBmb3IgdGhpcyBvYmplY3QuXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IEN1cnJlbnRUaW1lRGlzcGxheS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgIHJldHVybiAndmpzLWN1cnJlbnQtdGltZSc7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSBjdXJyZW50IHRpbWUgZGlzcGxheVxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAqICAgICAgICBUaGUgYHRpbWV1cGRhdGVgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gcnVuLlxuICAgKlxuICAgKiBAbGlzdGVucyBQbGF5ZXIjdGltZXVwZGF0ZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by51cGRhdGVDb250ZW50ID0gZnVuY3Rpb24gdXBkYXRlQ29udGVudChldmVudCkge1xuICAgIC8vIEFsbG93cyBmb3Igc21vb3RoIHNjcnViYmluZywgd2hlbiBwbGF5ZXIgY2FuJ3Qga2VlcCB1cC5cbiAgICB2YXIgdGltZSA9IHRoaXMucGxheWVyXy5zY3J1YmJpbmcoKSA/IHRoaXMucGxheWVyXy5nZXRDYWNoZSgpLmN1cnJlbnRUaW1lIDogdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCk7XG4gICAgdGhpcy51cGRhdGVGb3JtYXR0ZWRUaW1lXyh0aW1lKTtcbiAgfVxuICAvKipcbiAgICogV2hlbiB0aGUgcGxheWVyIGZpcmVzIGVuZGVkIHRoZXJlIHNob3VsZCBiZSBubyB0aW1lIGxlZnQuIFNhZGx5XG4gICAqIHRoaXMgaXMgbm90IGFsd2F5cyB0aGUgY2FzZSwgbGV0cyBtYWtlIGl0IHNlZW0gbGlrZSB0aGF0IGlzIHRoZSBjYXNlXG4gICAqIGZvciB1c2Vycy5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgKiAgICAgICAgVGhlIGBlbmRlZGAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyB0byBydW4uXG4gICAqXG4gICAqIEBsaXN0ZW5zIFBsYXllciNlbmRlZFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVFbmRlZCA9IGZ1bmN0aW9uIGhhbmRsZUVuZGVkKGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLnBsYXllcl8uZHVyYXRpb24oKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlRm9ybWF0dGVkVGltZV8odGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCkpO1xuICB9O1xuXG4gIHJldHVybiBDdXJyZW50VGltZURpc3BsYXk7XG59KFRpbWVEaXNwbGF5KTtcbi8qKlxuICogVGhlIHRleHQgdGhhdCBpcyBhZGRlZCB0byB0aGUgYEN1cnJlbnRUaW1lRGlzcGxheWAgZm9yIHNjcmVlbiByZWFkZXIgdXNlcnMuXG4gKlxuICogQHR5cGUge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5DdXJyZW50VGltZURpc3BsYXkucHJvdG90eXBlLmxhYmVsVGV4dF8gPSAnQ3VycmVudCBUaW1lJztcbi8qKlxuICogVGhlIHRleHQgdGhhdCBzaG91bGQgZGlzcGxheSBvdmVyIHRoZSBgQ3VycmVudFRpbWVEaXNwbGF5YHMgY29udHJvbHMuIEFkZGVkIHRvIGZvciBsb2NhbGl6YXRpb24uXG4gKlxuICogQHR5cGUge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKlxuICogQGRlcHJlY2F0ZWQgaW4gdjc7IGNvbnRyb2xUZXh0XyBpcyBub3QgdXNlZCBpbiBub24tYWN0aXZlIGRpc3BsYXkgQ29tcG9uZW50c1xuICovXG5cbkN1cnJlbnRUaW1lRGlzcGxheS5wcm90b3R5cGUuY29udHJvbFRleHRfID0gJ0N1cnJlbnQgVGltZSc7XG5Db21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ0N1cnJlbnRUaW1lRGlzcGxheScsIEN1cnJlbnRUaW1lRGlzcGxheSk7XG5cbi8qKlxuICogRGlzcGxheXMgdGhlIGR1cmF0aW9uXG4gKlxuICogQGV4dGVuZHMgQ29tcG9uZW50XG4gKi9cblxudmFyIER1cmF0aW9uRGlzcGxheSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX1RpbWVEaXNwbGF5KSB7XG4gIF9pbmhlcml0c0xvb3NlKER1cmF0aW9uRGlzcGxheSwgX1RpbWVEaXNwbGF5KTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICovXG4gIGZ1bmN0aW9uIER1cmF0aW9uRGlzcGxheShwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9UaW1lRGlzcGxheS5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpczsgLy8gd2UgZG8gbm90IHdhbnQgdG8vbmVlZCB0byB0aHJvdHRsZSBkdXJhdGlvbiBjaGFuZ2VzLFxuICAgIC8vIGFzIHRoZXkgc2hvdWxkIGFsd2F5cyBkaXNwbGF5IHRoZSBjaGFuZ2VkIGR1cmF0aW9uIGFzXG4gICAgLy8gaXQgaGFzIGNoYW5nZWRcblxuICAgIF90aGlzLm9uKHBsYXllciwgJ2R1cmF0aW9uY2hhbmdlJywgX3RoaXMudXBkYXRlQ29udGVudCk7IC8vIExpc3RlbiB0byBsb2Fkc3RhcnQgYmVjYXVzZSB0aGUgcGxheWVyIGR1cmF0aW9uIGlzIHJlc2V0IHdoZW4gYSBuZXcgbWVkaWEgZWxlbWVudCBpcyBsb2FkZWQsXG4gICAgLy8gYnV0IHRoZSBkdXJhdGlvbmNoYW5nZSBvbiB0aGUgdXNlciBhZ2VudCB3aWxsIG5vdCBmaXJlLlxuICAgIC8vIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDExL1dELWh0bWw1LTIwMTEwMTEzL3ZpZGVvLmh0bWwjbWVkaWEtZWxlbWVudC1sb2FkLWFsZ29yaXRobX1cblxuXG4gICAgX3RoaXMub24ocGxheWVyLCAnbG9hZHN0YXJ0JywgX3RoaXMudXBkYXRlQ29udGVudCk7IC8vIEFsc28gbGlzdGVuIGZvciB0aW1ldXBkYXRlIChpbiB0aGUgcGFyZW50KSBhbmQgbG9hZGVkbWV0YWRhdGEgYmVjYXVzZSByZW1vdmluZyB0aG9zZVxuICAgIC8vIGxpc3RlbmVycyBjb3VsZCBoYXZlIGJyb2tlbiBkZXBlbmRlbnQgYXBwbGljYXRpb25zL2xpYnJhcmllcy4gVGhlc2VcbiAgICAvLyBjYW4gbGlrZWx5IGJlIHJlbW92ZWQgZm9yIDcuMC5cblxuXG4gICAgX3RoaXMub24ocGxheWVyLCAnbG9hZGVkbWV0YWRhdGEnLCBfdGhpcy50aHJvdHRsZWRVcGRhdGVDb250ZW50KTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKipcbiAgICogQnVpbGRzIHRoZSBkZWZhdWx0IERPTSBgY2xhc3NOYW1lYC5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiAgICAgICAgIFRoZSBET00gYGNsYXNzTmFtZWAgZm9yIHRoaXMgb2JqZWN0LlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBEdXJhdGlvbkRpc3BsYXkucHJvdG90eXBlO1xuXG4gIF9wcm90by5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRDU1NDbGFzcygpIHtcbiAgICByZXR1cm4gJ3Zqcy1kdXJhdGlvbic7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSBkdXJhdGlvbiB0aW1lIGRpc3BsYXkuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IFtldmVudF1cbiAgICogICAgICAgIFRoZSBgZHVyYXRpb25jaGFuZ2VgLCBgdGltZXVwZGF0ZWAsIG9yIGBsb2FkZWRtZXRhZGF0YWAgZXZlbnQgdGhhdCBjYXVzZWRcbiAgICogICAgICAgIHRoaXMgZnVuY3Rpb24gdG8gYmUgY2FsbGVkLlxuICAgKlxuICAgKiBAbGlzdGVucyBQbGF5ZXIjZHVyYXRpb25jaGFuZ2VcbiAgICogQGxpc3RlbnMgUGxheWVyI3RpbWV1cGRhdGVcbiAgICogQGxpc3RlbnMgUGxheWVyI2xvYWRlZG1ldGFkYXRhXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVwZGF0ZUNvbnRlbnQgPSBmdW5jdGlvbiB1cGRhdGVDb250ZW50KGV2ZW50KSB7XG4gICAgdmFyIGR1cmF0aW9uID0gdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCk7XG5cbiAgICBpZiAodGhpcy5kdXJhdGlvbl8gIT09IGR1cmF0aW9uKSB7XG4gICAgICB0aGlzLmR1cmF0aW9uXyA9IGR1cmF0aW9uO1xuICAgICAgdGhpcy51cGRhdGVGb3JtYXR0ZWRUaW1lXyhkdXJhdGlvbik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBEdXJhdGlvbkRpc3BsYXk7XG59KFRpbWVEaXNwbGF5KTtcbi8qKlxuICogVGhlIHRleHQgdGhhdCBpcyBhZGRlZCB0byB0aGUgYER1cmF0aW9uRGlzcGxheWAgZm9yIHNjcmVlbiByZWFkZXIgdXNlcnMuXG4gKlxuICogQHR5cGUge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5EdXJhdGlvbkRpc3BsYXkucHJvdG90eXBlLmxhYmVsVGV4dF8gPSAnRHVyYXRpb24nO1xuLyoqXG4gKiBUaGUgdGV4dCB0aGF0IHNob3VsZCBkaXNwbGF5IG92ZXIgdGhlIGBEdXJhdGlvbkRpc3BsYXlgcyBjb250cm9scy4gQWRkZWQgdG8gZm9yIGxvY2FsaXphdGlvbi5cbiAqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqXG4gKiBAZGVwcmVjYXRlZCBpbiB2NzsgY29udHJvbFRleHRfIGlzIG5vdCB1c2VkIGluIG5vbi1hY3RpdmUgZGlzcGxheSBDb21wb25lbnRzXG4gKi9cblxuRHVyYXRpb25EaXNwbGF5LnByb3RvdHlwZS5jb250cm9sVGV4dF8gPSAnRHVyYXRpb24nO1xuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdEdXJhdGlvbkRpc3BsYXknLCBEdXJhdGlvbkRpc3BsYXkpO1xuXG4vKipcbiAqIFRoZSBzZXBhcmF0b3IgYmV0d2VlbiB0aGUgY3VycmVudCB0aW1lIGFuZCBkdXJhdGlvbi5cbiAqIENhbiBiZSBoaWRkZW4gaWYgaXQncyBub3QgbmVlZGVkIGluIHRoZSBkZXNpZ24uXG4gKlxuICogQGV4dGVuZHMgQ29tcG9uZW50XG4gKi9cblxudmFyIFRpbWVEaXZpZGVyID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0c0xvb3NlKFRpbWVEaXZpZGVyLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBUaW1lRGl2aWRlcigpIHtcbiAgICByZXR1cm4gX0NvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gVGltZURpdmlkZXIucHJvdG90eXBlO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGNvbXBvbmVudCdzIERPTSBlbGVtZW50XG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICovXG4gIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsKCkge1xuICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICd2anMtdGltZS1jb250cm9sIHZqcy10aW1lLWRpdmlkZXInLFxuICAgICAgaW5uZXJIVE1MOiAnPGRpdj48c3Bhbj4vPC9zcGFuPjwvZGl2PidcbiAgICB9LCB7XG4gICAgICAvLyB0aGlzIGVsZW1lbnQgYW5kIGl0cyBjb250ZW50cyBjYW4gYmUgaGlkZGVuIGZyb20gYXNzaXN0aXZlIHRlY2hzIHNpbmNlXG4gICAgICAvLyBpdCBpcyBtYWRlIGV4dHJhbmVvdXMgYnkgdGhlIGFubm91bmNlbWVudCBvZiB0aGUgY29udHJvbCB0ZXh0XG4gICAgICAvLyBmb3IgdGhlIGN1cnJlbnQgdGltZSBhbmQgZHVyYXRpb24gZGlzcGxheXNcbiAgICAgICdhcmlhLWhpZGRlbic6IHRydWVcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gVGltZURpdmlkZXI7XG59KENvbXBvbmVudCk7XG5cbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnVGltZURpdmlkZXInLCBUaW1lRGl2aWRlcik7XG5cbi8qKlxuICogRGlzcGxheXMgdGhlIHRpbWUgbGVmdCBpbiB0aGUgdmlkZW9cbiAqXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuXG52YXIgUmVtYWluaW5nVGltZURpc3BsYXkgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9UaW1lRGlzcGxheSkge1xuICBfaW5oZXJpdHNMb29zZShSZW1haW5pbmdUaW1lRGlzcGxheSwgX1RpbWVEaXNwbGF5KTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICovXG4gIGZ1bmN0aW9uIFJlbWFpbmluZ1RpbWVEaXNwbGF5KHBsYXllciwgb3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX1RpbWVEaXNwbGF5LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuXG4gICAgX3RoaXMub24ocGxheWVyLCAnZHVyYXRpb25jaGFuZ2UnLCBfdGhpcy50aHJvdHRsZWRVcGRhdGVDb250ZW50KTtcblxuICAgIF90aGlzLm9uKHBsYXllciwgJ2VuZGVkJywgX3RoaXMuaGFuZGxlRW5kZWQpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBCdWlsZHMgdGhlIGRlZmF1bHQgRE9NIGBjbGFzc05hbWVgLlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIERPTSBgY2xhc3NOYW1lYCBmb3IgdGhpcyBvYmplY3QuXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IFJlbWFpbmluZ1RpbWVEaXNwbGF5LnByb3RvdHlwZTtcblxuICBfcHJvdG8uYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkQ1NTQ2xhc3MoKSB7XG4gICAgcmV0dXJuICd2anMtcmVtYWluaW5nLXRpbWUnO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgJ3MgRE9NIGVsZW1lbnQgd2l0aCB0aGUgXCJtaW51c1wiIGNoYXJhY3RlZCBwcmVwZW5kIHRvIHRoZSB0aW1lXG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSgpIHtcbiAgICB2YXIgZWwgPSBfVGltZURpc3BsYXkucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcyk7XG5cbiAgICBlbC5pbnNlcnRCZWZvcmUoY3JlYXRlRWwoJ3NwYW4nLCB7fSwge1xuICAgICAgJ2FyaWEtaGlkZGVuJzogdHJ1ZVxuICAgIH0sICctJyksIHRoaXMuY29udGVudEVsXyk7XG4gICAgcmV0dXJuIGVsO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgcmVtYWluaW5nIHRpbWUgZGlzcGxheS5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgKiAgICAgICAgVGhlIGB0aW1ldXBkYXRlYCBvciBgZHVyYXRpb25jaGFuZ2VgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgdG8gcnVuLlxuICAgKlxuICAgKiBAbGlzdGVucyBQbGF5ZXIjdGltZXVwZGF0ZVxuICAgKiBAbGlzdGVucyBQbGF5ZXIjZHVyYXRpb25jaGFuZ2VcbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlQ29udGVudCA9IGZ1bmN0aW9uIHVwZGF0ZUNvbnRlbnQoZXZlbnQpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMucGxheWVyXy5kdXJhdGlvbigpICE9PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gQGRlcHJlY2F0ZWQgV2Ugc2hvdWxkIG9ubHkgdXNlIHJlbWFpbmluZ1RpbWVEaXNwbGF5XG4gICAgLy8gYXMgb2YgdmlkZW8uanMgN1xuXG5cbiAgICBpZiAodGhpcy5wbGF5ZXJfLnJlbWFpbmluZ1RpbWVEaXNwbGF5KSB7XG4gICAgICB0aGlzLnVwZGF0ZUZvcm1hdHRlZFRpbWVfKHRoaXMucGxheWVyXy5yZW1haW5pbmdUaW1lRGlzcGxheSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cGRhdGVGb3JtYXR0ZWRUaW1lXyh0aGlzLnBsYXllcl8ucmVtYWluaW5nVGltZSgpKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFdoZW4gdGhlIHBsYXllciBmaXJlcyBlbmRlZCB0aGVyZSBzaG91bGQgYmUgbm8gdGltZSBsZWZ0LiBTYWRseVxuICAgKiB0aGlzIGlzIG5vdCBhbHdheXMgdGhlIGNhc2UsIGxldHMgbWFrZSBpdCBzZWVtIGxpa2UgdGhhdCBpcyB0aGUgY2FzZVxuICAgKiBmb3IgdXNlcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IFtldmVudF1cbiAgICogICAgICAgIFRoZSBgZW5kZWRgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgdG8gcnVuLlxuICAgKlxuICAgKiBAbGlzdGVucyBQbGF5ZXIjZW5kZWRcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlRW5kZWQgPSBmdW5jdGlvbiBoYW5kbGVFbmRlZChldmVudCkge1xuICAgIGlmICghdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUZvcm1hdHRlZFRpbWVfKDApO1xuICB9O1xuXG4gIHJldHVybiBSZW1haW5pbmdUaW1lRGlzcGxheTtcbn0oVGltZURpc3BsYXkpO1xuLyoqXG4gKiBUaGUgdGV4dCB0aGF0IGlzIGFkZGVkIHRvIHRoZSBgUmVtYWluaW5nVGltZURpc3BsYXlgIGZvciBzY3JlZW4gcmVhZGVyIHVzZXJzLlxuICpcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG5cblxuUmVtYWluaW5nVGltZURpc3BsYXkucHJvdG90eXBlLmxhYmVsVGV4dF8gPSAnUmVtYWluaW5nIFRpbWUnO1xuLyoqXG4gKiBUaGUgdGV4dCB0aGF0IHNob3VsZCBkaXNwbGF5IG92ZXIgdGhlIGBSZW1haW5pbmdUaW1lRGlzcGxheWBzIGNvbnRyb2xzLiBBZGRlZCB0byBmb3IgbG9jYWxpemF0aW9uLlxuICpcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBkZXByZWNhdGVkIGluIHY3OyBjb250cm9sVGV4dF8gaXMgbm90IHVzZWQgaW4gbm9uLWFjdGl2ZSBkaXNwbGF5IENvbXBvbmVudHNcbiAqL1xuXG5SZW1haW5pbmdUaW1lRGlzcGxheS5wcm90b3R5cGUuY29udHJvbFRleHRfID0gJ1JlbWFpbmluZyBUaW1lJztcbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnUmVtYWluaW5nVGltZURpc3BsYXknLCBSZW1haW5pbmdUaW1lRGlzcGxheSk7XG5cbi8qKlxuICogRGlzcGxheXMgdGhlIGxpdmUgaW5kaWNhdG9yIHdoZW4gZHVyYXRpb24gaXMgSW5maW5pdHkuXG4gKlxuICogQGV4dGVuZHMgQ29tcG9uZW50XG4gKi9cblxudmFyIExpdmVEaXNwbGF5ID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0c0xvb3NlKExpdmVEaXNwbGF5LCBfQ29tcG9uZW50KTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICovXG4gIGZ1bmN0aW9uIExpdmVEaXNwbGF5KHBsYXllciwgb3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX0NvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcblxuICAgIF90aGlzLnVwZGF0ZVNob3dpbmcoKTtcblxuICAgIF90aGlzLm9uKF90aGlzLnBsYXllcigpLCAnZHVyYXRpb25jaGFuZ2UnLCBfdGhpcy51cGRhdGVTaG93aW5nKTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBgQ29tcG9uZW50YCdzIERPTSBlbGVtZW50XG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gTGl2ZURpc3BsYXkucHJvdG90eXBlO1xuXG4gIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsJCQxKCkge1xuICAgIHZhciBlbCA9IF9Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Zqcy1saXZlLWNvbnRyb2wgdmpzLWNvbnRyb2wnXG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRlbnRFbF8gPSBjcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAndmpzLWxpdmUtZGlzcGxheScsXG4gICAgICBpbm5lckhUTUw6IFwiPHNwYW4gY2xhc3M9XFxcInZqcy1jb250cm9sLXRleHRcXFwiPlwiICsgdGhpcy5sb2NhbGl6ZSgnU3RyZWFtIFR5cGUnKSArIFwiXFx4QTA8L3NwYW4+XCIgKyB0aGlzLmxvY2FsaXplKCdMSVZFJylcbiAgICB9LCB7XG4gICAgICAnYXJpYS1saXZlJzogJ29mZidcbiAgICB9KTtcbiAgICBlbC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnRFbF8pO1xuICAgIHJldHVybiBlbDtcbiAgfTtcblxuICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5jb250ZW50RWxfID0gbnVsbDtcblxuICAgIF9Db21wb25lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgdGhlIGR1cmF0aW9uIHRvIHNlZSBpZiB0aGUgTGl2ZURpc3BsYXkgc2hvdWxkIGJlIHNob3dpbmcgb3Igbm90LiBUaGVuIHNob3cvaGlkZVxuICAgKiBpdCBhY2NvcmRpbmdseVxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAqICAgICAgICBUaGUge0BsaW5rIFBsYXllciNkdXJhdGlvbmNoYW5nZX0gZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBydW4uXG4gICAqXG4gICAqIEBsaXN0ZW5zIFBsYXllciNkdXJhdGlvbmNoYW5nZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by51cGRhdGVTaG93aW5nID0gZnVuY3Rpb24gdXBkYXRlU2hvd2luZyhldmVudCkge1xuICAgIGlmICh0aGlzLnBsYXllcigpLmR1cmF0aW9uKCkgPT09IEluZmluaXR5KSB7XG4gICAgICB0aGlzLnNob3coKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBMaXZlRGlzcGxheTtcbn0oQ29tcG9uZW50KTtcblxuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdMaXZlRGlzcGxheScsIExpdmVEaXNwbGF5KTtcblxuLyoqXG4gKiBEaXNwbGF5cyB0aGUgbGl2ZSBpbmRpY2F0b3Igd2hlbiBkdXJhdGlvbiBpcyBJbmZpbml0eS5cbiAqXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuXG52YXIgU2Vla1RvTGl2ZSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0J1dHRvbikge1xuICBfaW5oZXJpdHNMb29zZShTZWVrVG9MaXZlLCBfQnV0dG9uKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICovXG4gIGZ1bmN0aW9uIFNlZWtUb0xpdmUocGxheWVyLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuXG4gICAgX3RoaXMudXBkYXRlTGl2ZUVkZ2VTdGF0dXMoKTtcblxuICAgIGlmIChfdGhpcy5wbGF5ZXJfLmxpdmVUcmFja2VyKSB7XG4gICAgICBfdGhpcy5vbihfdGhpcy5wbGF5ZXJfLmxpdmVUcmFja2VyLCAnbGl2ZWVkZ2VjaGFuZ2UnLCBfdGhpcy51cGRhdGVMaXZlRWRnZVN0YXR1cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgJ3MgRE9NIGVsZW1lbnRcbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBTZWVrVG9MaXZlLnByb3RvdHlwZTtcblxuICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSgpIHtcbiAgICB2YXIgZWwgPSBfQnV0dG9uLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdidXR0b24nLCB7XG4gICAgICBjbGFzc05hbWU6ICd2anMtc2Vlay10by1saXZlLWNvbnRyb2wgdmpzLWNvbnRyb2wnXG4gICAgfSk7XG5cbiAgICB0aGlzLnRleHRFbF8gPSBjcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Zqcy1zZWVrLXRvLWxpdmUtdGV4dCcsXG4gICAgICBpbm5lckhUTUw6IHRoaXMubG9jYWxpemUoJ0xJVkUnKVxuICAgIH0sIHtcbiAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJ1xuICAgIH0pO1xuICAgIGVsLmFwcGVuZENoaWxkKHRoaXMudGV4dEVsXyk7XG4gICAgcmV0dXJuIGVsO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHN0YXRlIG9mIHRoaXMgYnV0dG9uIGlmIHdlIGFyZSBhdCB0aGUgbGl2ZSBlZGdlXG4gICAqIG9yIG5vdFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by51cGRhdGVMaXZlRWRnZVN0YXR1cyA9IGZ1bmN0aW9uIHVwZGF0ZUxpdmVFZGdlU3RhdHVzKGUpIHtcbiAgICAvLyBkZWZhdWx0IHRvIGxpdmUgZWRnZVxuICAgIGlmICghdGhpcy5wbGF5ZXJfLmxpdmVUcmFja2VyIHx8IHRoaXMucGxheWVyXy5saXZlVHJhY2tlci5hdExpdmVFZGdlKCkpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgdHJ1ZSk7XG4gICAgICB0aGlzLmFkZENsYXNzKCd2anMtYXQtbGl2ZS1lZGdlJyk7XG4gICAgICB0aGlzLmNvbnRyb2xUZXh0KCdTZWVrIHRvIGxpdmUsIGN1cnJlbnRseSBwbGF5aW5nIGxpdmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtYXQtbGl2ZS1lZGdlJyk7XG4gICAgICB0aGlzLmNvbnRyb2xUZXh0KCdTZWVrIHRvIGxpdmUsIGN1cnJlbnRseSBiZWhpbmQgbGl2ZScpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogT24gY2xpY2sgYnJpbmcgdXMgYXMgbmVhciB0byB0aGUgbGl2ZSBwb2ludCBhcyBwb3NzaWJsZS5cbiAgICogVGhpcyByZXF1aXJlcyB0aGF0IHdlIHdhaXQgZm9yIHRoZSBuZXh0IGBsaXZlLXNlZWthYmxlLWNoYW5nZWBcbiAgICogZXZlbnQgd2hpY2ggd2lsbCBoYXBwZW4gZXZlcnkgc2VnbWVudCBsZW5ndGggc2Vjb25kcy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljaygpIHtcbiAgICB0aGlzLnBsYXllcl8ubGl2ZVRyYWNrZXIuc2Vla1RvTGl2ZUVkZ2UoKTtcbiAgfVxuICAvKipcbiAgICogRGlzcG9zZSBvZiB0aGUgZWxlbWVudCBhbmQgc3RvcCB0cmFja2luZ1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICBpZiAodGhpcy5wbGF5ZXJfLmxpdmVUcmFja2VyKSB7XG4gICAgICB0aGlzLm9mZih0aGlzLnBsYXllcl8ubGl2ZVRyYWNrZXIsICdsaXZlZWRnZWNoYW5nZScsIHRoaXMudXBkYXRlTGl2ZUVkZ2VTdGF0dXMpO1xuICAgIH1cblxuICAgIHRoaXMudGV4dEVsXyA9IG51bGw7XG5cbiAgICBfQnV0dG9uLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gIH07XG5cbiAgcmV0dXJuIFNlZWtUb0xpdmU7XG59KEJ1dHRvbik7XG5cblNlZWtUb0xpdmUucHJvdG90eXBlLmNvbnRyb2xUZXh0XyA9ICdTZWVrIHRvIGxpdmUsIGN1cnJlbnRseSBwbGF5aW5nIGxpdmUnO1xuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdTZWVrVG9MaXZlJywgU2Vla1RvTGl2ZSk7XG5cbi8qKlxuICogVGhlIGJhc2UgZnVuY3Rpb25hbGl0eSBmb3IgYSBzbGlkZXIuIENhbiBiZSB2ZXJ0aWNhbCBvciBob3Jpem9udGFsLlxuICogRm9yIGluc3RhbmNlIHRoZSB2b2x1bWUgYmFyIG9yIHRoZSBzZWVrIGJhciBvbiBhIHZpZGVvIGlzIGEgc2xpZGVyLlxuICpcbiAqIEBleHRlbmRzIENvbXBvbmVudFxuICovXG5cbnZhciBTbGlkZXIgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzTG9vc2UoU2xpZGVyLCBfQ29tcG9uZW50KTtcblxuICAvKipcbiAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzc1xuICAqXG4gICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgKlxuICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgKi9cbiAgZnVuY3Rpb24gU2xpZGVyKHBsYXllciwgb3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX0NvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpczsgLy8gU2V0IHByb3BlcnR5IG5hbWVzIHRvIGJhciB0byBtYXRjaCB3aXRoIHRoZSBjaGlsZCBTbGlkZXIgY2xhc3MgaXMgbG9va2luZyBmb3JcblxuICAgIF90aGlzLmJhciA9IF90aGlzLmdldENoaWxkKF90aGlzLm9wdGlvbnNfLmJhck5hbWUpOyAvLyBTZXQgYSBob3Jpem9udGFsIG9yIHZlcnRpY2FsIGNsYXNzIG9uIHRoZSBzbGlkZXIgZGVwZW5kaW5nIG9uIHRoZSBzbGlkZXIgdHlwZVxuXG4gICAgX3RoaXMudmVydGljYWwoISFfdGhpcy5vcHRpb25zXy52ZXJ0aWNhbCk7XG5cbiAgICBfdGhpcy5lbmFibGUoKTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKipcbiAgICogQXJlIGNvbnRyb2xzIGFyZSBjdXJyZW50bHkgZW5hYmxlZCBmb3IgdGhpcyBzbGlkZXIgb3Igbm90LlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIHRydWUgaWYgY29udHJvbHMgYXJlIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZVxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBTbGlkZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5lbmFibGVkID0gZnVuY3Rpb24gZW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbmFibGVkXztcbiAgfVxuICAvKipcbiAgICogRW5hYmxlIGNvbnRyb2xzIGZvciB0aGlzIHNsaWRlciBpZiB0aGV5IGFyZSBkaXNhYmxlZFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5lbmFibGUgPSBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgaWYgKHRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5vbignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVNb3VzZURvd24pO1xuICAgIHRoaXMub24oJ3RvdWNoc3RhcnQnLCB0aGlzLmhhbmRsZU1vdXNlRG93bik7XG4gICAgdGhpcy5vbignZm9jdXMnLCB0aGlzLmhhbmRsZUZvY3VzKTtcbiAgICB0aGlzLm9uKCdibHVyJywgdGhpcy5oYW5kbGVCbHVyKTtcbiAgICB0aGlzLm9uKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2spO1xuICAgIHRoaXMub24odGhpcy5wbGF5ZXJfLCAnY29udHJvbHN2aXNpYmxlJywgdGhpcy51cGRhdGUpO1xuXG4gICAgaWYgKHRoaXMucGxheWVyRXZlbnQpIHtcbiAgICAgIHRoaXMub24odGhpcy5wbGF5ZXJfLCB0aGlzLnBsYXllckV2ZW50LCB0aGlzLnVwZGF0ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAwKTtcbiAgICB0aGlzLmVuYWJsZWRfID0gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogRGlzYWJsZSBjb250cm9scyBmb3IgdGhpcyBzbGlkZXIgaWYgdGhleSBhcmUgZW5hYmxlZFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5kaXNhYmxlID0gZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGRvYyA9IHRoaXMuYmFyLmVsXy5vd25lckRvY3VtZW50O1xuICAgIHRoaXMub2ZmKCdtb3VzZWRvd24nLCB0aGlzLmhhbmRsZU1vdXNlRG93bik7XG4gICAgdGhpcy5vZmYoJ3RvdWNoc3RhcnQnLCB0aGlzLmhhbmRsZU1vdXNlRG93bik7XG4gICAgdGhpcy5vZmYoJ2ZvY3VzJywgdGhpcy5oYW5kbGVGb2N1cyk7XG4gICAgdGhpcy5vZmYoJ2JsdXInLCB0aGlzLmhhbmRsZUJsdXIpO1xuICAgIHRoaXMub2ZmKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2spO1xuICAgIHRoaXMub2ZmKHRoaXMucGxheWVyXywgJ2NvbnRyb2xzdmlzaWJsZScsIHRoaXMudXBkYXRlKTtcbiAgICB0aGlzLm9mZihkb2MsICdtb3VzZW1vdmUnLCB0aGlzLmhhbmRsZU1vdXNlTW92ZSk7XG4gICAgdGhpcy5vZmYoZG9jLCAnbW91c2V1cCcsIHRoaXMuaGFuZGxlTW91c2VVcCk7XG4gICAgdGhpcy5vZmYoZG9jLCAndG91Y2htb3ZlJywgdGhpcy5oYW5kbGVNb3VzZU1vdmUpO1xuICAgIHRoaXMub2ZmKGRvYywgJ3RvdWNoZW5kJywgdGhpcy5oYW5kbGVNb3VzZVVwKTtcbiAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICB0aGlzLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuXG4gICAgaWYgKHRoaXMucGxheWVyRXZlbnQpIHtcbiAgICAgIHRoaXMub2ZmKHRoaXMucGxheWVyXywgdGhpcy5wbGF5ZXJFdmVudCwgdGhpcy51cGRhdGUpO1xuICAgIH1cblxuICAgIHRoaXMuZW5hYmxlZF8gPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBgU2xpZGVyYHMgRE9NIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gICAqICAgICAgICBUeXBlIG9mIGVsZW1lbnQgdG8gY3JlYXRlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW3Byb3BzPXt9XVxuICAgKiAgICAgICAgTGlzdCBvZiBwcm9wZXJ0aWVzIGluIE9iamVjdCBmb3JtLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW2F0dHJpYnV0ZXM9e31dXG4gICAqICAgICAgICBsaXN0IG9mIGF0dHJpYnV0ZXMgaW4gT2JqZWN0IGZvcm0uXG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCBnZXRzIGNyZWF0ZWQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwkJDEodHlwZSwgcHJvcHMsIGF0dHJpYnV0ZXMpIHtcbiAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkge1xuICAgICAgcHJvcHMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoYXR0cmlidXRlcyA9PT0gdm9pZCAwKSB7XG4gICAgICBhdHRyaWJ1dGVzID0ge307XG4gICAgfVxuXG4gICAgLy8gQWRkIHRoZSBzbGlkZXIgZWxlbWVudCBjbGFzcyB0byBhbGwgc3ViIGNsYXNzZXNcbiAgICBwcm9wcy5jbGFzc05hbWUgPSBwcm9wcy5jbGFzc05hbWUgKyAnIHZqcy1zbGlkZXInO1xuICAgIHByb3BzID0gYXNzaWduKHtcbiAgICAgIHRhYkluZGV4OiAwXG4gICAgfSwgcHJvcHMpO1xuICAgIGF0dHJpYnV0ZXMgPSBhc3NpZ24oe1xuICAgICAgJ3JvbGUnOiAnc2xpZGVyJyxcbiAgICAgICdhcmlhLXZhbHVlbm93JzogMCxcbiAgICAgICdhcmlhLXZhbHVlbWluJzogMCxcbiAgICAgICdhcmlhLXZhbHVlbWF4JzogMTAwLFxuICAgICAgJ3RhYkluZGV4JzogMFxuICAgIH0sIGF0dHJpYnV0ZXMpO1xuICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsIHR5cGUsIHByb3BzLCBhdHRyaWJ1dGVzKTtcbiAgfVxuICAvKipcbiAgICogSGFuZGxlIGBtb3VzZWRvd25gIG9yIGB0b3VjaHN0YXJ0YCBldmVudHMgb24gdGhlIGBTbGlkZXJgLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKiAgICAgICAgYG1vdXNlZG93bmAgb3IgYHRvdWNoc3RhcnRgIGV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoaXMgZnVuY3Rpb25cbiAgICpcbiAgICogQGxpc3RlbnMgbW91c2Vkb3duXG4gICAqIEBsaXN0ZW5zIHRvdWNoc3RhcnRcbiAgICogQGZpcmVzIFNsaWRlciNzbGlkZXJhY3RpdmVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlTW91c2VEb3duID0gZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duKGV2ZW50KSB7XG4gICAgdmFyIGRvYyA9IHRoaXMuYmFyLmVsXy5vd25lckRvY3VtZW50O1xuXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdtb3VzZWRvd24nKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0gLy8gRG8gbm90IGNhbGwgcHJldmVudERlZmF1bHQoKSBvbiB0b3VjaHN0YXJ0IGluIENocm9tZVxuICAgIC8vIHRvIGF2b2lkIGNvbnNvbGUgd2FybmluZ3MuIFVzZSBhICd0b3VjaC1hY3Rpb246IG5vbmUnIHN0eWxlXG4gICAgLy8gaW5zdGVhZCB0byBwcmV2ZW50IHVuaW50ZW50ZWQgc2Nyb2xsaW5nLlxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3dlYi91cGRhdGVzLzIwMTcvMDEvc2Nyb2xsaW5nLWludGVydmVudGlvblxuXG5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3RvdWNoc3RhcnQnICYmICFJU19DSFJPTUUpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgYmxvY2tUZXh0U2VsZWN0aW9uKCk7XG4gICAgdGhpcy5hZGRDbGFzcygndmpzLXNsaWRpbmcnKTtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiB0aGUgc2xpZGVyIGlzIGluIGFuIGFjdGl2ZSBzdGF0ZVxuICAgICAqXG4gICAgICogQGV2ZW50IFNsaWRlciNzbGlkZXJhY3RpdmVcbiAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICovXG5cbiAgICB0aGlzLnRyaWdnZXIoJ3NsaWRlcmFjdGl2ZScpO1xuICAgIHRoaXMub24oZG9jLCAnbW91c2Vtb3ZlJywgdGhpcy5oYW5kbGVNb3VzZU1vdmUpO1xuICAgIHRoaXMub24oZG9jLCAnbW91c2V1cCcsIHRoaXMuaGFuZGxlTW91c2VVcCk7XG4gICAgdGhpcy5vbihkb2MsICd0b3VjaG1vdmUnLCB0aGlzLmhhbmRsZU1vdXNlTW92ZSk7XG4gICAgdGhpcy5vbihkb2MsICd0b3VjaGVuZCcsIHRoaXMuaGFuZGxlTW91c2VVcCk7XG4gICAgdGhpcy5oYW5kbGVNb3VzZU1vdmUoZXZlbnQpO1xuICB9XG4gIC8qKlxuICAgKiBIYW5kbGUgdGhlIGBtb3VzZW1vdmVgLCBgdG91Y2htb3ZlYCwgYW5kIGBtb3VzZWRvd25gIGV2ZW50cyBvbiB0aGlzIGBTbGlkZXJgLlxuICAgKiBUaGUgYG1vdXNlbW92ZWAgYW5kIGB0b3VjaG1vdmVgIGV2ZW50cyB3aWxsIG9ubHkgb25seSB0cmlnZ2VyIHRoaXMgZnVuY3Rpb24gZHVyaW5nXG4gICAqIGBtb3VzZWRvd25gIGFuZCBgdG91Y2hzdGFydGAuIFRoaXMgaXMgZHVlIHRvIHtAbGluayBTbGlkZXIjaGFuZGxlTW91c2VEb3dufSBhbmRcbiAgICoge0BsaW5rIFNsaWRlciNoYW5kbGVNb3VzZVVwfS5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIGBtb3VzZWRvd25gLCBgbW91c2Vtb3ZlYCwgYHRvdWNoc3RhcnRgLCBvciBgdG91Y2htb3ZlYCBldmVudCB0aGF0IHRyaWdnZXJlZFxuICAgKiAgICAgICAgdGhpcyBmdW5jdGlvblxuICAgKlxuICAgKiBAbGlzdGVucyBtb3VzZW1vdmVcbiAgICogQGxpc3RlbnMgdG91Y2htb3ZlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZU1vdXNlTW92ZSA9IGZ1bmN0aW9uIGhhbmRsZU1vdXNlTW92ZShldmVudCkge31cbiAgLyoqXG4gICAqIEhhbmRsZSBgbW91c2V1cGAgb3IgYHRvdWNoZW5kYCBldmVudHMgb24gdGhlIGBTbGlkZXJgLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKiAgICAgICAgYG1vdXNldXBgIG9yIGB0b3VjaGVuZGAgZXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhpcyBmdW5jdGlvbi5cbiAgICpcbiAgICogQGxpc3RlbnMgdG91Y2hlbmRcbiAgICogQGxpc3RlbnMgbW91c2V1cFxuICAgKiBAZmlyZXMgU2xpZGVyI3NsaWRlcmluYWN0aXZlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZU1vdXNlVXAgPSBmdW5jdGlvbiBoYW5kbGVNb3VzZVVwKCkge1xuICAgIHZhciBkb2MgPSB0aGlzLmJhci5lbF8ub3duZXJEb2N1bWVudDtcbiAgICB1bmJsb2NrVGV4dFNlbGVjdGlvbigpO1xuICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1zbGlkaW5nJyk7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gdGhlIHNsaWRlciBpcyBubyBsb25nZXIgaW4gYW4gYWN0aXZlIHN0YXRlLlxuICAgICAqXG4gICAgICogQGV2ZW50IFNsaWRlciNzbGlkZXJpbmFjdGl2ZVxuICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgKi9cblxuICAgIHRoaXMudHJpZ2dlcignc2xpZGVyaW5hY3RpdmUnKTtcbiAgICB0aGlzLm9mZihkb2MsICdtb3VzZW1vdmUnLCB0aGlzLmhhbmRsZU1vdXNlTW92ZSk7XG4gICAgdGhpcy5vZmYoZG9jLCAnbW91c2V1cCcsIHRoaXMuaGFuZGxlTW91c2VVcCk7XG4gICAgdGhpcy5vZmYoZG9jLCAndG91Y2htb3ZlJywgdGhpcy5oYW5kbGVNb3VzZU1vdmUpO1xuICAgIHRoaXMub2ZmKGRvYywgJ3RvdWNoZW5kJywgdGhpcy5oYW5kbGVNb3VzZVVwKTtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHByb2dyZXNzIGJhciBvZiB0aGUgYFNsaWRlcmAuXG4gICAqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICAgVGhlIHBlcmNlbnRhZ2Ugb2YgcHJvZ3Jlc3MgdGhlIHByb2dyZXNzIGJhciByZXByZXNlbnRzIGFzIGFcbiAgICogICAgICAgICAgbnVtYmVyIGZyb20gMCB0byAxLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgLy8gSW4gVm9sdW1lQmFyIGluaXQgd2UgaGF2ZSBhIHNldFRpbWVvdXQgZm9yIHVwZGF0ZSB0aGF0IHBvcHMgYW5kIHVwZGF0ZVxuICAgIC8vIHRvIHRoZSBlbmQgb2YgdGhlIGV4ZWN1dGlvbiBzdGFjay4gVGhlIHBsYXllciBpcyBkZXN0cm95ZWQgYmVmb3JlIHRoZW5cbiAgICAvLyB1cGRhdGUgd2lsbCBjYXVzZSBhbiBlcnJvclxuICAgIGlmICghdGhpcy5lbF8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIElmIHNjcnViYmluZywgd2UgY291bGQgdXNlIGEgY2FjaGVkIHZhbHVlIHRvIG1ha2UgdGhlIGhhbmRsZSBrZWVwIHVwXG4gICAgLy8gd2l0aCB0aGUgdXNlcidzIG1vdXNlLiBPbiBIVE1MNSBicm93c2VycyBzY3J1YmJpbmcgaXMgcmVhbGx5IHNtb290aCwgYnV0XG4gICAgLy8gc29tZSBmbGFzaCBwbGF5ZXJzIGFyZSBzbG93LCBzbyB3ZSBtaWdodCB3YW50IHRvIHV0aWxpemUgdGhpcyBsYXRlci5cbiAgICAvLyB2YXIgcHJvZ3Jlc3MgPSAgKHRoaXMucGxheWVyXy5zY3J1YmJpbmcoKSkgPyB0aGlzLnBsYXllcl8uZ2V0Q2FjaGUoKS5jdXJyZW50VGltZSAvIHRoaXMucGxheWVyXy5kdXJhdGlvbigpIDogdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCkgLyB0aGlzLnBsYXllcl8uZHVyYXRpb24oKTtcblxuXG4gICAgdmFyIHByb2dyZXNzID0gdGhpcy5nZXRQZXJjZW50KCk7XG4gICAgdmFyIGJhciA9IHRoaXMuYmFyOyAvLyBJZiB0aGVyZSdzIG5vIGJhci4uLlxuXG4gICAgaWYgKCFiYXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIFByb3RlY3QgYWdhaW5zdCBubyBkdXJhdGlvbiBhbmQgb3RoZXIgZGl2aXNpb24gaXNzdWVzXG5cblxuICAgIGlmICh0eXBlb2YgcHJvZ3Jlc3MgIT09ICdudW1iZXInIHx8IHByb2dyZXNzICE9PSBwcm9ncmVzcyB8fCBwcm9ncmVzcyA8IDAgfHwgcHJvZ3Jlc3MgPT09IEluZmluaXR5KSB7XG4gICAgICBwcm9ncmVzcyA9IDA7XG4gICAgfSAvLyBDb252ZXJ0IHRvIGEgcGVyY2VudGFnZSBmb3Igc2V0dGluZ1xuXG5cbiAgICB2YXIgcGVyY2VudGFnZSA9IChwcm9ncmVzcyAqIDEwMCkudG9GaXhlZCgyKSArICclJztcbiAgICB2YXIgc3R5bGUgPSBiYXIuZWwoKS5zdHlsZTsgLy8gU2V0IHRoZSBuZXcgYmFyIHdpZHRoIG9yIGhlaWdodFxuXG4gICAgaWYgKHRoaXMudmVydGljYWwoKSkge1xuICAgICAgc3R5bGUuaGVpZ2h0ID0gcGVyY2VudGFnZTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUud2lkdGggPSBwZXJjZW50YWdlO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9ncmVzcztcbiAgfVxuICAvKipcbiAgICogQ2FsY3VsYXRlIGRpc3RhbmNlIGZvciBzbGlkZXJcbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIFRoZSBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIHJ1bi5cbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIFRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIHRoZSBTbGlkZXIuXG4gICAqICAgICAgICAgLSBwb3NpdGlvbi54IGZvciB2ZXJ0aWNhbCBgU2xpZGVyYHNcbiAgICogICAgICAgICAtIHBvc2l0aW9uLnkgZm9yIGhvcml6b250YWwgYFNsaWRlcmBzXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNhbGN1bGF0ZURpc3RhbmNlID0gZnVuY3Rpb24gY2FsY3VsYXRlRGlzdGFuY2UoZXZlbnQpIHtcbiAgICB2YXIgcG9zaXRpb24gPSBnZXRQb2ludGVyUG9zaXRpb24odGhpcy5lbF8sIGV2ZW50KTtcblxuICAgIGlmICh0aGlzLnZlcnRpY2FsKCkpIHtcbiAgICAgIHJldHVybiBwb3NpdGlvbi55O1xuICAgIH1cblxuICAgIHJldHVybiBwb3NpdGlvbi54O1xuICB9XG4gIC8qKlxuICAgKiBIYW5kbGUgYSBgZm9jdXNgIGV2ZW50IG9uIHRoaXMgYFNsaWRlcmAuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYGZvY3VzYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIHJ1bi5cbiAgICpcbiAgICogQGxpc3RlbnMgZm9jdXNcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlRm9jdXMgPSBmdW5jdGlvbiBoYW5kbGVGb2N1cygpIHtcbiAgICB0aGlzLm9uKHRoaXMuYmFyLmVsXy5vd25lckRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5UHJlc3MpO1xuICB9XG4gIC8qKlxuICAgKiBIYW5kbGUgYSBga2V5ZG93bmAgZXZlbnQgb24gdGhlIGBTbGlkZXJgLiBXYXRjaGVzIGZvciBsZWZ0LCByaWd0aCwgdXAsIGFuZCBkb3duXG4gICAqIGFycm93IGtleXMuIFRoaXMgZnVuY3Rpb24gd2lsbCBvbmx5IGJlIGNhbGxlZCB3aGVuIHRoZSBzbGlkZXIgaGFzIGZvY3VzLiBTZWVcbiAgICoge0BsaW5rIFNsaWRlciNoYW5kbGVGb2N1c30gYW5kIHtAbGluayBTbGlkZXIjaGFuZGxlQmx1cn0uXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICB0aGUgYGtleWRvd25gIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gcnVuLlxuICAgKlxuICAgKiBAbGlzdGVucyBrZXlkb3duXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZUtleVByZXNzID0gZnVuY3Rpb24gaGFuZGxlS2V5UHJlc3MoZXZlbnQpIHtcbiAgICAvLyBMZWZ0IGFuZCBEb3duIEFycm93c1xuICAgIGlmIChrZXljb2RlLmlzRXZlbnRLZXkoZXZlbnQsICdMZWZ0JykgfHwga2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnRG93bicpKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5zdGVwQmFjaygpOyAvLyBVcCBhbmQgUmlnaHQgQXJyb3dzXG4gICAgfSBlbHNlIGlmIChrZXljb2RlLmlzRXZlbnRLZXkoZXZlbnQsICdSaWdodCcpIHx8IGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ1VwJykpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnN0ZXBGb3J3YXJkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFBhc3Mga2V5cHJlc3MgaGFuZGxpbmcgdXAgZm9yIHVuc3VwcG9ydGVkIGtleXNcbiAgICAgIF9Db21wb25lbnQucHJvdG90eXBlLmhhbmRsZUtleVByZXNzLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogSGFuZGxlIGEgYGJsdXJgIGV2ZW50IG9uIHRoaXMgYFNsaWRlcmAuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYGJsdXJgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gcnVuLlxuICAgKlxuICAgKiBAbGlzdGVucyBibHVyXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZUJsdXIgPSBmdW5jdGlvbiBoYW5kbGVCbHVyKCkge1xuICAgIHRoaXMub2ZmKHRoaXMuYmFyLmVsXy5vd25lckRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5UHJlc3MpO1xuICB9XG4gIC8qKlxuICAgKiBMaXN0ZW5lciBmb3IgY2xpY2sgZXZlbnRzIG9uIHNsaWRlciwgdXNlZCB0byBwcmV2ZW50IGNsaWNrc1xuICAgKiAgIGZyb20gYnViYmxpbmcgdXAgdG8gcGFyZW50IGVsZW1lbnRzIGxpa2UgYnV0dG9uIG1lbnVzLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcbiAgICogICAgICAgIEV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgb2JqZWN0IHRvIHJ1blxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfVxuICAvKipcbiAgICogR2V0L3NldCBpZiBzbGlkZXIgaXMgaG9yaXpvbnRhbCBmb3IgdmVydGljYWxcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbYm9vbF1cbiAgICogICAgICAgIC0gdHJ1ZSBpZiBzbGlkZXIgaXMgdmVydGljYWwsXG4gICAqICAgICAgICAtIGZhbHNlIGlzIGhvcml6b250YWxcbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICAtIHRydWUgaWYgc2xpZGVyIGlzIHZlcnRpY2FsLCBhbmQgZ2V0dGluZ1xuICAgKiAgICAgICAgIC0gZmFsc2UgaWYgdGhlIHNsaWRlciBpcyBob3Jpem9udGFsLCBhbmQgZ2V0dGluZ1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by52ZXJ0aWNhbCA9IGZ1bmN0aW9uIHZlcnRpY2FsKGJvb2wpIHtcbiAgICBpZiAoYm9vbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy52ZXJ0aWNhbF8gfHwgZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy52ZXJ0aWNhbF8gPSAhIWJvb2w7XG5cbiAgICBpZiAodGhpcy52ZXJ0aWNhbF8pIHtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1zbGlkZXItdmVydGljYWwnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hZGRDbGFzcygndmpzLXNsaWRlci1ob3Jpem9udGFsJyk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBTbGlkZXI7XG59KENvbXBvbmVudCk7XG5cbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnU2xpZGVyJywgU2xpZGVyKTtcblxuLyoqXG4gKiBTaG93cyBsb2FkaW5nIHByb2dyZXNzXG4gKlxuICogQGV4dGVuZHMgQ29tcG9uZW50XG4gKi9cblxudmFyIExvYWRQcm9ncmVzc0JhciA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHNMb29zZShMb2FkUHJvZ3Jlc3NCYXIsIF9Db21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgKi9cbiAgZnVuY3Rpb24gTG9hZFByb2dyZXNzQmFyKHBsYXllciwgb3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX0NvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcbiAgICBfdGhpcy5wYXJ0RWxzXyA9IFtdO1xuXG4gICAgX3RoaXMub24ocGxheWVyLCAncHJvZ3Jlc3MnLCBfdGhpcy51cGRhdGUpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgJ3MgRE9NIGVsZW1lbnRcbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBMb2FkUHJvZ3Jlc3NCYXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsJCQxKCkge1xuICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICd2anMtbG9hZC1wcm9ncmVzcycsXG4gICAgICBpbm5lckhUTUw6IFwiPHNwYW4gY2xhc3M9XFxcInZqcy1jb250cm9sLXRleHRcXFwiPjxzcGFuPlwiICsgdGhpcy5sb2NhbGl6ZSgnTG9hZGVkJykgKyBcIjwvc3Bhbj46IDxzcGFuIGNsYXNzPVxcXCJ2anMtY29udHJvbC10ZXh0LWxvYWRlZC1wZXJjZW50YWdlXFxcIj4wJTwvc3Bhbj48L3NwYW4+XCJcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5wYXJ0RWxzXyA9IG51bGw7XG5cbiAgICBfQ29tcG9uZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSBwcm9ncmVzcyBiYXJcbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgKiAgICAgICAgVGhlIGBwcm9ncmVzc2AgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBydW4uXG4gICAqXG4gICAqIEBsaXN0ZW5zIFBsYXllciNwcm9ncmVzc1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZXZlbnQpIHtcbiAgICB2YXIgbGl2ZVRyYWNrZXIgPSB0aGlzLnBsYXllcl8ubGl2ZVRyYWNrZXI7XG4gICAgdmFyIGJ1ZmZlcmVkID0gdGhpcy5wbGF5ZXJfLmJ1ZmZlcmVkKCk7XG4gICAgdmFyIGR1cmF0aW9uID0gbGl2ZVRyYWNrZXIgJiYgbGl2ZVRyYWNrZXIuaXNMaXZlKCkgPyBsaXZlVHJhY2tlci5zZWVrYWJsZUVuZCgpIDogdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCk7XG4gICAgdmFyIGJ1ZmZlcmVkRW5kID0gdGhpcy5wbGF5ZXJfLmJ1ZmZlcmVkRW5kKCk7XG4gICAgdmFyIGNoaWxkcmVuID0gdGhpcy5wYXJ0RWxzXztcbiAgICB2YXIgY29udHJvbFRleHRQZXJjZW50YWdlID0gdGhpcy4kKCcudmpzLWNvbnRyb2wtdGV4dC1sb2FkZWQtcGVyY2VudGFnZScpOyAvLyBnZXQgdGhlIHBlcmNlbnQgd2lkdGggb2YgYSB0aW1lIGNvbXBhcmVkIHRvIHRoZSB0b3RhbCBlbmRcblxuICAgIHZhciBwZXJjZW50aWZ5ID0gZnVuY3Rpb24gcGVyY2VudGlmeSh0aW1lLCBlbmQsIHJvdW5kZWQpIHtcbiAgICAgIC8vIG5vIE5hTlxuICAgICAgdmFyIHBlcmNlbnQgPSB0aW1lIC8gZW5kIHx8IDA7XG4gICAgICBwZXJjZW50ID0gKHBlcmNlbnQgPj0gMSA/IDEgOiBwZXJjZW50KSAqIDEwMDtcblxuICAgICAgaWYgKHJvdW5kZWQpIHtcbiAgICAgICAgcGVyY2VudCA9IHBlcmNlbnQudG9GaXhlZCgyKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBlcmNlbnQgKyAnJSc7XG4gICAgfTsgLy8gdXBkYXRlIHRoZSB3aWR0aCBvZiB0aGUgcHJvZ3Jlc3MgYmFyXG5cblxuICAgIHRoaXMuZWxfLnN0eWxlLndpZHRoID0gcGVyY2VudGlmeShidWZmZXJlZEVuZCwgZHVyYXRpb24pOyAvLyB1cGRhdGUgdGhlIGNvbnRyb2wtdGV4dFxuXG4gICAgdGV4dENvbnRlbnQoY29udHJvbFRleHRQZXJjZW50YWdlLCBwZXJjZW50aWZ5KGJ1ZmZlcmVkRW5kLCBkdXJhdGlvbiwgdHJ1ZSkpOyAvLyBhZGQgY2hpbGQgZWxlbWVudHMgdG8gcmVwcmVzZW50IHRoZSBpbmRpdmlkdWFsIGJ1ZmZlcmVkIHRpbWUgcmFuZ2VzXG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1ZmZlcmVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc3RhcnQgPSBidWZmZXJlZC5zdGFydChpKTtcbiAgICAgIHZhciBlbmQgPSBidWZmZXJlZC5lbmQoaSk7XG4gICAgICB2YXIgcGFydCA9IGNoaWxkcmVuW2ldO1xuXG4gICAgICBpZiAoIXBhcnQpIHtcbiAgICAgICAgcGFydCA9IHRoaXMuZWxfLmFwcGVuZENoaWxkKGNyZWF0ZUVsKCkpO1xuICAgICAgICBjaGlsZHJlbltpXSA9IHBhcnQ7XG4gICAgICB9IC8vIHNldCB0aGUgcGVyY2VudCBiYXNlZCBvbiB0aGUgd2lkdGggb2YgdGhlIHByb2dyZXNzIGJhciAoYnVmZmVyZWRFbmQpXG5cblxuICAgICAgcGFydC5zdHlsZS5sZWZ0ID0gcGVyY2VudGlmeShzdGFydCwgYnVmZmVyZWRFbmQpO1xuICAgICAgcGFydC5zdHlsZS53aWR0aCA9IHBlcmNlbnRpZnkoZW5kIC0gc3RhcnQsIGJ1ZmZlcmVkRW5kKTtcbiAgICB9IC8vIHJlbW92ZSB1bnVzZWQgYnVmZmVyZWQgcmFuZ2UgZWxlbWVudHNcblxuXG4gICAgZm9yICh2YXIgX2kgPSBjaGlsZHJlbi5sZW5ndGg7IF9pID4gYnVmZmVyZWQubGVuZ3RoOyBfaS0tKSB7XG4gICAgICB0aGlzLmVsXy5yZW1vdmVDaGlsZChjaGlsZHJlbltfaSAtIDFdKTtcbiAgICB9XG5cbiAgICBjaGlsZHJlbi5sZW5ndGggPSBidWZmZXJlZC5sZW5ndGg7XG4gIH07XG5cbiAgcmV0dXJuIExvYWRQcm9ncmVzc0Jhcjtcbn0oQ29tcG9uZW50KTtcblxuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdMb2FkUHJvZ3Jlc3NCYXInLCBMb2FkUHJvZ3Jlc3NCYXIpO1xuXG4vKipcbiAqIFRpbWUgdG9vbHRpcHMgZGlzcGxheSBhIHRpbWUgYWJvdmUgdGhlIHByb2dyZXNzIGJhci5cbiAqXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuXG52YXIgVGltZVRvb2x0aXAgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzTG9vc2UoVGltZVRvb2x0aXAsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFRpbWVUb29sdGlwKCkge1xuICAgIHJldHVybiBfQ29tcG9uZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBUaW1lVG9vbHRpcC5wcm90b3R5cGU7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgdGltZSB0b29sdGlwIERPTSBlbGVtZW50XG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICovXG4gIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsJCQxKCkge1xuICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICd2anMtdGltZS10b29sdGlwJ1xuICAgIH0sIHtcbiAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJ1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBwb3NpdGlvbiBvZiB0aGUgdGltZSB0b29sdGlwIHJlbGF0aXZlIHRvIHRoZSBgU2Vla0JhcmAuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzZWVrQmFyUmVjdFxuICAgKiAgICAgICAgVGhlIGBDbGllbnRSZWN0YCBmb3IgdGhlIHtAbGluayBTZWVrQmFyfSBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc2Vla0JhclBvaW50XG4gICAqICAgICAgICBBIG51bWJlciBmcm9tIDAgdG8gMSwgcmVwcmVzZW50aW5nIGEgaG9yaXpvbnRhbCByZWZlcmVuY2UgcG9pbnRcbiAgICogICAgICAgIGZyb20gdGhlIGxlZnQgZWRnZSBvZiB0aGUge0BsaW5rIFNlZWtCYXJ9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShzZWVrQmFyUmVjdCwgc2Vla0JhclBvaW50LCBjb250ZW50KSB7XG4gICAgdmFyIHRvb2x0aXBSZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KHRoaXMuZWxfKTtcbiAgICB2YXIgcGxheWVyUmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdCh0aGlzLnBsYXllcl8uZWwoKSk7XG4gICAgdmFyIHNlZWtCYXJQb2ludFB4ID0gc2Vla0JhclJlY3Qud2lkdGggKiBzZWVrQmFyUG9pbnQ7IC8vIGRvIG5vdGhpbmcgaWYgZWl0aGVyIHJlY3QgaXNuJ3QgYXZhaWxhYmxlXG4gICAgLy8gZm9yIGV4YW1wbGUsIGlmIHRoZSBwbGF5ZXIgaXNuJ3QgaW4gdGhlIERPTSBmb3IgdGVzdGluZ1xuXG4gICAgaWYgKCFwbGF5ZXJSZWN0IHx8ICF0b29sdGlwUmVjdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gVGhpcyBpcyB0aGUgc3BhY2UgbGVmdCBvZiB0aGUgYHNlZWtCYXJQb2ludGAgYXZhaWxhYmxlIHdpdGhpbiB0aGUgYm91bmRzXG4gICAgLy8gb2YgdGhlIHBsYXllci4gV2UgY2FsY3VsYXRlIGFueSBnYXAgYmV0d2VlbiB0aGUgbGVmdCBlZGdlIG9mIHRoZSBwbGF5ZXJcbiAgICAvLyBhbmQgdGhlIGxlZnQgZWRnZSBvZiB0aGUgYFNlZWtCYXJgIGFuZCBhZGQgdGhlIG51bWJlciBvZiBwaXhlbHMgaW4gdGhlXG4gICAgLy8gYFNlZWtCYXJgIGJlZm9yZSBoaXR0aW5nIHRoZSBgc2Vla0JhclBvaW50YFxuXG5cbiAgICB2YXIgc3BhY2VMZWZ0T2ZQb2ludCA9IHNlZWtCYXJSZWN0LmxlZnQgLSBwbGF5ZXJSZWN0LmxlZnQgKyBzZWVrQmFyUG9pbnRQeDsgLy8gVGhpcyBpcyB0aGUgc3BhY2UgcmlnaHQgb2YgdGhlIGBzZWVrQmFyUG9pbnRgIGF2YWlsYWJsZSB3aXRoaW4gdGhlIGJvdW5kc1xuICAgIC8vIG9mIHRoZSBwbGF5ZXIuIFdlIGNhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIHBpeGVscyBmcm9tIHRoZSBgc2Vla0JhclBvaW50YFxuICAgIC8vIHRvIHRoZSByaWdodCBlZGdlIG9mIHRoZSBgU2Vla0JhcmAgYW5kIGFkZCB0byB0aGF0IGFueSBnYXAgYmV0d2VlbiB0aGVcbiAgICAvLyByaWdodCBlZGdlIG9mIHRoZSBgU2Vla0JhcmAgYW5kIHRoZSBwbGF5ZXIuXG5cbiAgICB2YXIgc3BhY2VSaWdodE9mUG9pbnQgPSBzZWVrQmFyUmVjdC53aWR0aCAtIHNlZWtCYXJQb2ludFB4ICsgKHBsYXllclJlY3QucmlnaHQgLSBzZWVrQmFyUmVjdC5yaWdodCk7IC8vIFRoaXMgaXMgdGhlIG51bWJlciBvZiBwaXhlbHMgYnkgd2hpY2ggdGhlIHRvb2x0aXAgd2lsbCBuZWVkIHRvIGJlIHB1bGxlZFxuICAgIC8vIGZ1cnRoZXIgdG8gdGhlIHJpZ2h0IHRvIGNlbnRlciBpdCBvdmVyIHRoZSBgc2Vla0JhclBvaW50YC5cblxuICAgIHZhciBwdWxsVG9vbHRpcEJ5ID0gdG9vbHRpcFJlY3Qud2lkdGggLyAyOyAvLyBBZGp1c3QgdGhlIGBwdWxsVG9vbHRpcEJ5YCBkaXN0YW5jZSB0byB0aGUgbGVmdCBvciByaWdodCBkZXBlbmRpbmcgb25cbiAgICAvLyB0aGUgcmVzdWx0cyBvZiB0aGUgc3BhY2UgY2FsY3VsYXRpb25zIGFib3ZlLlxuXG4gICAgaWYgKHNwYWNlTGVmdE9mUG9pbnQgPCBwdWxsVG9vbHRpcEJ5KSB7XG4gICAgICBwdWxsVG9vbHRpcEJ5ICs9IHB1bGxUb29sdGlwQnkgLSBzcGFjZUxlZnRPZlBvaW50O1xuICAgIH0gZWxzZSBpZiAoc3BhY2VSaWdodE9mUG9pbnQgPCBwdWxsVG9vbHRpcEJ5KSB7XG4gICAgICBwdWxsVG9vbHRpcEJ5ID0gc3BhY2VSaWdodE9mUG9pbnQ7XG4gICAgfSAvLyBEdWUgdG8gdGhlIGltcHJlY2lzaW9uIG9mIGRlY2ltYWwvcmF0aW8gYmFzZWQgY2FsY3VsYXRpb25zIGFuZCB2YXJ5aW5nXG4gICAgLy8gcm91bmRpbmcgYmVoYXZpb3JzLCB0aGVyZSBhcmUgY2FzZXMgd2hlcmUgdGhlIHNwYWNpbmcgYWRqdXN0bWVudCBpcyBvZmZcbiAgICAvLyBieSBhIHBpeGVsIG9yIHR3by4gVGhpcyBhZGRzIGluc3VyYW5jZSB0byB0aGVzZSBjYWxjdWxhdGlvbnMuXG5cblxuICAgIGlmIChwdWxsVG9vbHRpcEJ5IDwgMCkge1xuICAgICAgcHVsbFRvb2x0aXBCeSA9IDA7XG4gICAgfSBlbHNlIGlmIChwdWxsVG9vbHRpcEJ5ID4gdG9vbHRpcFJlY3Qud2lkdGgpIHtcbiAgICAgIHB1bGxUb29sdGlwQnkgPSB0b29sdGlwUmVjdC53aWR0aDtcbiAgICB9XG5cbiAgICB0aGlzLmVsXy5zdHlsZS5yaWdodCA9IFwiLVwiICsgcHVsbFRvb2x0aXBCeSArIFwicHhcIjtcbiAgICB0ZXh0Q29udGVudCh0aGlzLmVsXywgY29udGVudCk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSB0aW1lIHRvb2x0aXAgcmVsYXRpdmUgdG8gdGhlIGBTZWVrQmFyYC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHNlZWtCYXJSZWN0XG4gICAqICAgICAgICBUaGUgYENsaWVudFJlY3RgIGZvciB0aGUge0BsaW5rIFNlZWtCYXJ9IGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzZWVrQmFyUG9pbnRcbiAgICogICAgICAgIEEgbnVtYmVyIGZyb20gMCB0byAxLCByZXByZXNlbnRpbmcgYSBob3Jpem9udGFsIHJlZmVyZW5jZSBwb2ludFxuICAgKiAgICAgICAgZnJvbSB0aGUgbGVmdCBlZGdlIG9mIHRoZSB7QGxpbmsgU2Vla0Jhcn1cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVcbiAgICogICAgICAgIFRoZSB0aW1lIHRvIHVwZGF0ZSB0aGUgdG9vbHRpcCB0bywgbm90IHVzZWQgZHVyaW5nIGxpdmUgcGxheWJhY2tcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICogICAgICAgIEEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBkdXJpbmcgdGhlIHJlcXVlc3QgYW5pbWF0aW9uIGZyYW1lXG4gICAqICAgICAgICBmb3IgdG9vbHRpcHMgdGhhdCBuZWVkIHRvIGRvIGFkZGl0aW9uYWwgYW5pbWF0aW9ucyBmcm9tIHRoZSBkZWZhdWx0XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVwZGF0ZVRpbWUgPSBmdW5jdGlvbiB1cGRhdGVUaW1lKHNlZWtCYXJSZWN0LCBzZWVrQmFyUG9pbnQsIHRpbWUsIGNiKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIC8vIElmIHRoZXJlIGlzIGFuIGV4aXN0aW5nIHJBRiBJRCwgY2FuY2VsIGl0IHNvIHdlIGRvbid0IG92ZXItcXVldWUuXG4gICAgaWYgKHRoaXMucmFmSWRfKSB7XG4gICAgICB0aGlzLmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmFmSWRfKTtcbiAgICB9XG5cbiAgICB0aGlzLnJhZklkXyA9IHRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjb250ZW50O1xuXG4gICAgICB2YXIgZHVyYXRpb24gPSBfdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCk7XG5cbiAgICAgIGlmIChfdGhpcy5wbGF5ZXJfLmxpdmVUcmFja2VyICYmIF90aGlzLnBsYXllcl8ubGl2ZVRyYWNrZXIuaXNMaXZlKCkpIHtcbiAgICAgICAgdmFyIGxpdmVXaW5kb3cgPSBfdGhpcy5wbGF5ZXJfLmxpdmVUcmFja2VyLmxpdmVXaW5kb3coKTtcblxuICAgICAgICB2YXIgc2Vjb25kc0JlaGluZCA9IGxpdmVXaW5kb3cgLSBzZWVrQmFyUG9pbnQgKiBsaXZlV2luZG93O1xuICAgICAgICBjb250ZW50ID0gKHNlY29uZHNCZWhpbmQgPCAxID8gJycgOiAnLScpICsgZm9ybWF0VGltZShzZWNvbmRzQmVoaW5kLCBsaXZlV2luZG93KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQgPSBmb3JtYXRUaW1lKHRpbWUsIGR1cmF0aW9uKTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMudXBkYXRlKHNlZWtCYXJSZWN0LCBzZWVrQmFyUG9pbnQsIGNvbnRlbnQpO1xuXG4gICAgICBpZiAoY2IpIHtcbiAgICAgICAgY2IoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gVGltZVRvb2x0aXA7XG59KENvbXBvbmVudCk7XG5cbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnVGltZVRvb2x0aXAnLCBUaW1lVG9vbHRpcCk7XG5cbi8qKlxuICogVXNlZCBieSB7QGxpbmsgU2Vla0Jhcn0gdG8gZGlzcGxheSBtZWRpYSBwbGF5YmFjayBwcm9ncmVzcyBhcyBwYXJ0IG9mIHRoZVxuICoge0BsaW5rIFByb2dyZXNzQ29udHJvbH0uXG4gKlxuICogQGV4dGVuZHMgQ29tcG9uZW50XG4gKi9cblxudmFyIFBsYXlQcm9ncmVzc0JhciA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHNMb29zZShQbGF5UHJvZ3Jlc3NCYXIsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFBsYXlQcm9ncmVzc0JhcigpIHtcbiAgICByZXR1cm4gX0NvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gUGxheVByb2dyZXNzQmFyLnByb3RvdHlwZTtcblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSB0aGUgRE9NIGVsZW1lbnQgZm9yIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICovXG4gIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsKCkge1xuICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICd2anMtcGxheS1wcm9ncmVzcyB2anMtc2xpZGVyLWJhcidcbiAgICB9LCB7XG4gICAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZSdcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogRW5xdWV1ZXMgdXBkYXRlcyB0byBpdHMgb3duIERPTSBhcyB3ZWxsIGFzIHRoZSBET00gb2YgaXRzXG4gICAqIHtAbGluayBUaW1lVG9vbHRpcH0gY2hpbGQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzZWVrQmFyUmVjdFxuICAgKiAgICAgICAgVGhlIGBDbGllbnRSZWN0YCBmb3IgdGhlIHtAbGluayBTZWVrQmFyfSBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc2Vla0JhclBvaW50XG4gICAqICAgICAgICBBIG51bWJlciBmcm9tIDAgdG8gMSwgcmVwcmVzZW50aW5nIGEgaG9yaXpvbnRhbCByZWZlcmVuY2UgcG9pbnRcbiAgICogICAgICAgIGZyb20gdGhlIGxlZnQgZWRnZSBvZiB0aGUge0BsaW5rIFNlZWtCYXJ9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShzZWVrQmFyUmVjdCwgc2Vla0JhclBvaW50KSB7XG4gICAgdmFyIHRpbWVUb29sdGlwID0gdGhpcy5nZXRDaGlsZCgndGltZVRvb2x0aXAnKTtcblxuICAgIGlmICghdGltZVRvb2x0aXApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdGltZSA9IHRoaXMucGxheWVyXy5zY3J1YmJpbmcoKSA/IHRoaXMucGxheWVyXy5nZXRDYWNoZSgpLmN1cnJlbnRUaW1lIDogdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCk7XG4gICAgdGltZVRvb2x0aXAudXBkYXRlVGltZShzZWVrQmFyUmVjdCwgc2Vla0JhclBvaW50LCB0aW1lKTtcbiAgfTtcblxuICByZXR1cm4gUGxheVByb2dyZXNzQmFyO1xufShDb21wb25lbnQpO1xuLyoqXG4gKiBEZWZhdWx0IG9wdGlvbnMgZm9yIHtAbGluayBQbGF5UHJvZ3Jlc3NCYXJ9LlxuICpcbiAqIEB0eXBlIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5cblxuUGxheVByb2dyZXNzQmFyLnByb3RvdHlwZS5vcHRpb25zXyA9IHtcbiAgY2hpbGRyZW46IFtdXG59OyAvLyBUaW1lIHRvb2x0aXBzIHNob3VsZCBub3QgYmUgYWRkZWQgdG8gYSBwbGF5ZXIgb24gbW9iaWxlIGRldmljZXNcblxuaWYgKCFJU19JT1MgJiYgIUlTX0FORFJPSUQpIHtcbiAgUGxheVByb2dyZXNzQmFyLnByb3RvdHlwZS5vcHRpb25zXy5jaGlsZHJlbi5wdXNoKCd0aW1lVG9vbHRpcCcpO1xufVxuXG5Db21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ1BsYXlQcm9ncmVzc0JhcicsIFBsYXlQcm9ncmVzc0Jhcik7XG5cbi8qKlxuICogVGhlIHtAbGluayBNb3VzZVRpbWVEaXNwbGF5fSBjb21wb25lbnQgdHJhY2tzIG1vdXNlIG1vdmVtZW50IG92ZXIgdGhlXG4gKiB7QGxpbmsgUHJvZ3Jlc3NDb250cm9sfS4gSXQgZGlzcGxheXMgYW4gaW5kaWNhdG9yIGFuZCBhIHtAbGluayBUaW1lVG9vbHRpcH1cbiAqIGluZGljYXRpbmcgdGhlIHRpbWUgd2hpY2ggaXMgcmVwcmVzZW50ZWQgYnkgYSBnaXZlbiBwb2ludCBpbiB0aGVcbiAqIHtAbGluayBQcm9ncmVzc0NvbnRyb2x9LlxuICpcbiAqIEBleHRlbmRzIENvbXBvbmVudFxuICovXG5cbnZhciBNb3VzZVRpbWVEaXNwbGF5ID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0c0xvb3NlKE1vdXNlVGltZURpc3BsYXksIF9Db21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICogICAgICAgIFRoZSB7QGxpbmsgUGxheWVyfSB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgKi9cbiAgZnVuY3Rpb24gTW91c2VUaW1lRGlzcGxheShwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgX3RoaXMudXBkYXRlID0gdGhyb3R0bGUoYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMudXBkYXRlKSwgMjUpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBET00gZWxlbWVudCBmb3IgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBNb3VzZVRpbWVEaXNwbGF5LnByb3RvdHlwZTtcblxuICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCgpIHtcbiAgICByZXR1cm4gX0NvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAndmpzLW1vdXNlLWRpc3BsYXknXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEVucXVldWVzIHVwZGF0ZXMgdG8gaXRzIG93biBET00gYXMgd2VsbCBhcyB0aGUgRE9NIG9mIGl0c1xuICAgKiB7QGxpbmsgVGltZVRvb2x0aXB9IGNoaWxkLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gc2Vla0JhclJlY3RcbiAgICogICAgICAgIFRoZSBgQ2xpZW50UmVjdGAgZm9yIHRoZSB7QGxpbmsgU2Vla0Jhcn0gZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNlZWtCYXJQb2ludFxuICAgKiAgICAgICAgQSBudW1iZXIgZnJvbSAwIHRvIDEsIHJlcHJlc2VudGluZyBhIGhvcml6b250YWwgcmVmZXJlbmNlIHBvaW50XG4gICAqICAgICAgICBmcm9tIHRoZSBsZWZ0IGVkZ2Ugb2YgdGhlIHtAbGluayBTZWVrQmFyfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoc2Vla0JhclJlY3QsIHNlZWtCYXJQb2ludCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIHRpbWUgPSBzZWVrQmFyUG9pbnQgKiB0aGlzLnBsYXllcl8uZHVyYXRpb24oKTtcbiAgICB0aGlzLmdldENoaWxkKCd0aW1lVG9vbHRpcCcpLnVwZGF0ZVRpbWUoc2Vla0JhclJlY3QsIHNlZWtCYXJQb2ludCwgdGltZSwgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMyLmVsXy5zdHlsZS5sZWZ0ID0gc2Vla0JhclJlY3Qud2lkdGggKiBzZWVrQmFyUG9pbnQgKyBcInB4XCI7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIE1vdXNlVGltZURpc3BsYXk7XG59KENvbXBvbmVudCk7XG4vKipcbiAqIERlZmF1bHQgb3B0aW9ucyBmb3IgYE1vdXNlVGltZURpc3BsYXlgXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5Nb3VzZVRpbWVEaXNwbGF5LnByb3RvdHlwZS5vcHRpb25zXyA9IHtcbiAgY2hpbGRyZW46IFsndGltZVRvb2x0aXAnXVxufTtcbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnTW91c2VUaW1lRGlzcGxheScsIE1vdXNlVGltZURpc3BsYXkpO1xuXG52YXIgU1RFUF9TRUNPTkRTID0gNTsgLy8gVGhlIG11bHRpcGxpZXIgb2YgU1RFUF9TRUNPTkRTIHRoYXQgUGdVcC9QZ0Rvd24gbW92ZSB0aGUgdGltZWxpbmUuXG5cbnZhciBQQUdFX0tFWV9NVUxUSVBMSUVSID0gMTI7IC8vIFRoZSBpbnRlcnZhbCBhdCB3aGljaCB0aGUgYmFyIHNob3VsZCB1cGRhdGUgYXMgaXQgcHJvZ3Jlc3Nlcy5cblxudmFyIFVQREFURV9SRUZSRVNIX0lOVEVSVkFMID0gMzA7XG4vKipcbiAqIFNlZWsgYmFyIGFuZCBjb250YWluZXIgZm9yIHRoZSBwcm9ncmVzcyBiYXJzLiBVc2VzIHtAbGluayBQbGF5UHJvZ3Jlc3NCYXJ9XG4gKiBhcyBpdHMgYGJhcmAuXG4gKlxuICogQGV4dGVuZHMgU2xpZGVyXG4gKi9cblxudmFyIFNlZWtCYXIgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9TbGlkZXIpIHtcbiAgX2luaGVyaXRzTG9vc2UoU2Vla0JhciwgX1NsaWRlcik7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgKiAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAqL1xuICBmdW5jdGlvbiBTZWVrQmFyKHBsYXllciwgb3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX1NsaWRlci5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcblxuICAgIF90aGlzLnNldEV2ZW50SGFuZGxlcnNfKCk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFNldHMgdGhlIGV2ZW50IGhhbmRsZXJzXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IFNlZWtCYXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5zZXRFdmVudEhhbmRsZXJzXyA9IGZ1bmN0aW9uIHNldEV2ZW50SGFuZGxlcnNfKCkge1xuICAgIHRoaXMudXBkYXRlID0gdGhyb3R0bGUoYmluZCh0aGlzLCB0aGlzLnVwZGF0ZSksIFVQREFURV9SRUZSRVNIX0lOVEVSVkFMKTtcbiAgICB0aGlzLm9uKHRoaXMucGxheWVyXywgJ3RpbWV1cGRhdGUnLCB0aGlzLnVwZGF0ZSk7XG4gICAgdGhpcy5vbih0aGlzLnBsYXllcl8sICdlbmRlZCcsIHRoaXMuaGFuZGxlRW5kZWQpO1xuICAgIHRoaXMub24odGhpcy5wbGF5ZXJfLCAnZHVyYXRpb25jaGFuZ2UnLCB0aGlzLnVwZGF0ZSk7XG5cbiAgICBpZiAodGhpcy5wbGF5ZXJfLmxpdmVUcmFja2VyKSB7XG4gICAgICB0aGlzLm9uKHRoaXMucGxheWVyXy5saXZlVHJhY2tlciwgJ2xpdmVlZGdlY2hhbmdlJywgdGhpcy51cGRhdGUpO1xuICAgIH0gLy8gd2hlbiBwbGF5aW5nLCBsZXQncyBlbnN1cmUgd2Ugc21vb3RobHkgdXBkYXRlIHRoZSBwbGF5IHByb2dyZXNzIGJhclxuICAgIC8vIHZpYSBhbiBpbnRlcnZhbFxuXG5cbiAgICB0aGlzLnVwZGF0ZUludGVydmFsID0gbnVsbDtcbiAgICB0aGlzLm9uKHRoaXMucGxheWVyXywgWydwbGF5aW5nJ10sIHRoaXMuZW5hYmxlSW50ZXJ2YWxfKTtcbiAgICB0aGlzLm9uKHRoaXMucGxheWVyXywgWydlbmRlZCcsICdwYXVzZScsICd3YWl0aW5nJ10sIHRoaXMuZGlzYWJsZUludGVydmFsXyk7IC8vIHdlIGRvbid0IG5lZWQgdG8gdXBkYXRlIHRoZSBwbGF5IHByb2dyZXNzIGlmIHRoZSBkb2N1bWVudCBpcyBoaWRkZW4sXG4gICAgLy8gYWxzbywgdGhpcyBjYXVzZXMgdGhlIENQVSB0byBzcGlrZSBhbmQgZXZlbnR1YWxseSBjcmFzaCB0aGUgcGFnZSBvbiBJRTExLlxuXG4gICAgaWYgKCdoaWRkZW4nIGluIGRvY3VtZW50ICYmICd2aXNpYmlsaXR5U3RhdGUnIGluIGRvY3VtZW50KSB7XG4gICAgICB0aGlzLm9uKGRvY3VtZW50LCAndmlzaWJpbGl0eWNoYW5nZScsIHRoaXMudG9nZ2xlVmlzaWJpbGl0eV8pO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8udG9nZ2xlVmlzaWJpbGl0eV8gPSBmdW5jdGlvbiB0b2dnbGVWaXNpYmlsaXR5XyhlKSB7XG4gICAgaWYgKGRvY3VtZW50LmhpZGRlbikge1xuICAgICAgdGhpcy5kaXNhYmxlSW50ZXJ2YWxfKGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVuYWJsZUludGVydmFsXygpOyAvLyB3ZSBqdXN0IHN3aXRjaGVkIGJhY2sgdG8gdGhlIHBhZ2UgYW5kIHNvbWVvbmUgbWF5IGJlIGxvb2tpbmcsIHNvLCB1cGRhdGUgQVNBUFxuXG4gICAgICB0aGlzLnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5lbmFibGVJbnRlcnZhbF8gPSBmdW5jdGlvbiBlbmFibGVJbnRlcnZhbF8oKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB0aGlzLmNsZWFySW50ZXJ2YWwodGhpcy51cGRhdGVJbnRlcnZhbCk7XG4gICAgdGhpcy51cGRhdGVJbnRlcnZhbCA9IHRoaXMuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMyLnJlcXVlc3RBbmltYXRpb25GcmFtZShfdGhpczIudXBkYXRlKTtcbiAgICB9LCBVUERBVEVfUkVGUkVTSF9JTlRFUlZBTCk7XG4gIH07XG5cbiAgX3Byb3RvLmRpc2FibGVJbnRlcnZhbF8gPSBmdW5jdGlvbiBkaXNhYmxlSW50ZXJ2YWxfKGUpIHtcbiAgICBpZiAodGhpcy5wbGF5ZXJfLmxpdmVUcmFja2VyICYmIHRoaXMucGxheWVyXy5saXZlVHJhY2tlci5pc0xpdmUoKSAmJiBlLnR5cGUgIT09ICdlbmRlZCcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmNsZWFySW50ZXJ2YWwodGhpcy51cGRhdGVJbnRlcnZhbCk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgYENvbXBvbmVudGAncyBET00gZWxlbWVudFxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwkJDEoKSB7XG4gICAgcmV0dXJuIF9TbGlkZXIucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Zqcy1wcm9ncmVzcy1ob2xkZXInXG4gICAgfSwge1xuICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLmxvY2FsaXplKCdQcm9ncmVzcyBCYXInKVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIHVwZGF0ZXMgdGhlIHBsYXkgcHJvZ3Jlc3MgYmFyIGFuZCBhY2Nlc3NpYmlsaXR5XG4gICAqIGF0dHJpYnV0ZXMgdG8gd2hhdGV2ZXIgaXMgcGFzc2VkIGluLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gY3VycmVudFRpbWVcbiAgICogICAgICAgIFRoZSBjdXJyZW50VGltZSB2YWx1ZSB0aGF0IHNob3VsZCBiZSB1c2VkIGZvciBhY2Nlc3NpYmlsaXR5XG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwZXJjZW50XG4gICAqICAgICAgICBUaGUgcGVyY2VudGFnZSBhcyBhIGRlY2ltYWwgdGhhdCB0aGUgYmFyIHNob3VsZCBiZSBmaWxsZWQgZnJvbSAwLTEuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVwZGF0ZV8gPSBmdW5jdGlvbiB1cGRhdGVfKGN1cnJlbnRUaW1lLCBwZXJjZW50KSB7XG4gICAgdmFyIGxpdmVUcmFja2VyID0gdGhpcy5wbGF5ZXJfLmxpdmVUcmFja2VyO1xuICAgIHZhciBkdXJhdGlvbiA9IHRoaXMucGxheWVyXy5kdXJhdGlvbigpO1xuXG4gICAgaWYgKGxpdmVUcmFja2VyICYmIGxpdmVUcmFja2VyLmlzTGl2ZSgpKSB7XG4gICAgICBkdXJhdGlvbiA9IHRoaXMucGxheWVyXy5saXZlVHJhY2tlci5saXZlQ3VycmVudFRpbWUoKTtcbiAgICB9IC8vIG1hY2hpbmUgcmVhZGFibGUgdmFsdWUgb2YgcHJvZ3Jlc3MgYmFyIChwZXJjZW50YWdlIGNvbXBsZXRlKVxuXG5cbiAgICB0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVub3cnLCAocGVyY2VudCAqIDEwMCkudG9GaXhlZCgyKSk7IC8vIGh1bWFuIHJlYWRhYmxlIHZhbHVlIG9mIHByb2dyZXNzIGJhciAodGltZSBjb21wbGV0ZSlcblxuICAgIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZXRleHQnLCB0aGlzLmxvY2FsaXplKCdwcm9ncmVzcyBiYXIgdGltaW5nOiBjdXJyZW50VGltZT17MX0gZHVyYXRpb249ezJ9JywgW2Zvcm1hdFRpbWUoY3VycmVudFRpbWUsIGR1cmF0aW9uKSwgZm9ybWF0VGltZShkdXJhdGlvbiwgZHVyYXRpb24pXSwgJ3sxfSBvZiB7Mn0nKSk7IC8vIFVwZGF0ZSB0aGUgYFBsYXlQcm9ncmVzc0JhcmAuXG5cbiAgICBpZiAodGhpcy5iYXIpIHtcbiAgICAgIHRoaXMuYmFyLnVwZGF0ZShnZXRCb3VuZGluZ0NsaWVudFJlY3QodGhpcy5lbF8pLCBwZXJjZW50KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgc2VlayBiYXIncyBVSS5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgKiAgICAgICAgVGhlIGB0aW1ldXBkYXRlYCBvciBgZW5kZWRgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgdG8gcnVuLlxuICAgKlxuICAgKiBAbGlzdGVucyBQbGF5ZXIjdGltZXVwZGF0ZVxuICAgKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqICAgICAgICAgIFRoZSBjdXJyZW50IHBlcmNlbnQgYXQgYSBudW1iZXIgZnJvbSAwLTFcbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGV2ZW50KSB7XG4gICAgLy8gaWYgdGhlIG9mZnNldFBhcmVudCBpcyBudWxsLCB0aGVuIHRoaXMgZWxlbWVudCBpcyBoaWRkZW4sIGluIHdoaWNoIGNhc2VcbiAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIHVwZGF0ZSBpdC5cbiAgICBpZiAodGhpcy5lbCgpLm9mZnNldFBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBwZXJjZW50ID0gX1NsaWRlci5wcm90b3R5cGUudXBkYXRlLmNhbGwodGhpcyk7XG5cbiAgICB0aGlzLnVwZGF0ZV8odGhpcy5nZXRDdXJyZW50VGltZV8oKSwgcGVyY2VudCk7XG4gICAgcmV0dXJuIHBlcmNlbnQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb2YgY3VycmVudCB0aW1lIGJ1dCBhbGxvd3MgZm9yIHNtb290aCBzY3J1YmJpbmcsXG4gICAqIHdoZW4gcGxheWVyIGNhbid0IGtlZXAgdXAuXG4gICAqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICBUaGUgY3VycmVudCB0aW1lIHZhbHVlIHRvIGRpc3BsYXlcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uZ2V0Q3VycmVudFRpbWVfID0gZnVuY3Rpb24gZ2V0Q3VycmVudFRpbWVfKCkge1xuICAgIHJldHVybiB0aGlzLnBsYXllcl8uc2NydWJiaW5nKCkgPyB0aGlzLnBsYXllcl8uZ2V0Q2FjaGUoKS5jdXJyZW50VGltZSA6IHRoaXMucGxheWVyXy5jdXJyZW50VGltZSgpO1xuICB9XG4gIC8qKlxuICAgKiBXZSB3YW50IHRoZSBzZWVrIGJhciB0byBiZSBmdWxsIG9uIGVuZGVkXG4gICAqIG5vIG1hdHRlciB3aGF0IHRoZSBhY3R1YWwgaW50ZXJuYWwgdmFsdWVzIGFyZS4gc28gd2UgZm9yY2UgaXQuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IFtldmVudF1cbiAgICogICAgICAgIFRoZSBgdGltZXVwZGF0ZWAgb3IgYGVuZGVkYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIHRvIHJ1bi5cbiAgICpcbiAgICogQGxpc3RlbnMgUGxheWVyI2VuZGVkXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZUVuZGVkID0gZnVuY3Rpb24gaGFuZGxlRW5kZWQoZXZlbnQpIHtcbiAgICB0aGlzLnVwZGF0ZV8odGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCksIDEpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHBlcmNlbnRhZ2Ugb2YgbWVkaWEgcGxheWVkIHNvIGZhci5cbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIFRoZSBwZXJjZW50YWdlIG9mIG1lZGlhIHBsYXllZCBzbyBmYXIgKDAgdG8gMSkuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmdldFBlcmNlbnQgPSBmdW5jdGlvbiBnZXRQZXJjZW50KCkge1xuICAgIHZhciBjdXJyZW50VGltZSA9IHRoaXMuZ2V0Q3VycmVudFRpbWVfKCk7XG4gICAgdmFyIHBlcmNlbnQ7XG4gICAgdmFyIGxpdmVUcmFja2VyID0gdGhpcy5wbGF5ZXJfLmxpdmVUcmFja2VyO1xuXG4gICAgaWYgKGxpdmVUcmFja2VyICYmIGxpdmVUcmFja2VyLmlzTGl2ZSgpKSB7XG4gICAgICBwZXJjZW50ID0gKGN1cnJlbnRUaW1lIC0gbGl2ZVRyYWNrZXIuc2Vla2FibGVTdGFydCgpKSAvIGxpdmVUcmFja2VyLmxpdmVXaW5kb3coKTsgLy8gcHJldmVudCB0aGUgcGVyY2VudCBmcm9tIGNoYW5naW5nIGF0IHRoZSBsaXZlIGVkZ2VcblxuICAgICAgaWYgKGxpdmVUcmFja2VyLmF0TGl2ZUVkZ2UoKSkge1xuICAgICAgICBwZXJjZW50ID0gMTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcGVyY2VudCA9IGN1cnJlbnRUaW1lIC8gdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBlcmNlbnQgPj0gMSA/IDEgOiBwZXJjZW50IHx8IDA7XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSBtb3VzZSBkb3duIG9uIHNlZWsgYmFyXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYG1vdXNlZG93bmAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyB0byBydW4uXG4gICAqXG4gICAqIEBsaXN0ZW5zIG1vdXNlZG93blxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVNb3VzZURvd24gPSBmdW5jdGlvbiBoYW5kbGVNb3VzZURvd24oZXZlbnQpIHtcbiAgICBpZiAoIWlzU2luZ2xlTGVmdENsaWNrKGV2ZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gU3RvcCBldmVudCBwcm9wYWdhdGlvbiB0byBwcmV2ZW50IGRvdWJsZSBmaXJlIGluIHByb2dyZXNzLWNvbnRyb2wuanNcblxuXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5wbGF5ZXJfLnNjcnViYmluZyh0cnVlKTtcbiAgICB0aGlzLnZpZGVvV2FzUGxheWluZyA9ICF0aGlzLnBsYXllcl8ucGF1c2VkKCk7XG4gICAgdGhpcy5wbGF5ZXJfLnBhdXNlKCk7XG5cbiAgICBfU2xpZGVyLnByb3RvdHlwZS5oYW5kbGVNb3VzZURvd24uY2FsbCh0aGlzLCBldmVudCk7XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSBtb3VzZSBtb3ZlIG9uIHNlZWsgYmFyXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYG1vdXNlbW92ZWAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyB0byBydW4uXG4gICAqXG4gICAqIEBsaXN0ZW5zIG1vdXNlbW92ZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVNb3VzZU1vdmUgPSBmdW5jdGlvbiBoYW5kbGVNb3VzZU1vdmUoZXZlbnQpIHtcbiAgICBpZiAoIWlzU2luZ2xlTGVmdENsaWNrKGV2ZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXdUaW1lO1xuICAgIHZhciBkaXN0YW5jZSA9IHRoaXMuY2FsY3VsYXRlRGlzdGFuY2UoZXZlbnQpO1xuICAgIHZhciBsaXZlVHJhY2tlciA9IHRoaXMucGxheWVyXy5saXZlVHJhY2tlcjtcblxuICAgIGlmICghbGl2ZVRyYWNrZXIgfHwgIWxpdmVUcmFja2VyLmlzTGl2ZSgpKSB7XG4gICAgICBuZXdUaW1lID0gZGlzdGFuY2UgKiB0aGlzLnBsYXllcl8uZHVyYXRpb24oKTsgLy8gRG9uJ3QgbGV0IHZpZGVvIGVuZCB3aGlsZSBzY3J1YmJpbmcuXG5cbiAgICAgIGlmIChuZXdUaW1lID09PSB0aGlzLnBsYXllcl8uZHVyYXRpb24oKSkge1xuICAgICAgICBuZXdUaW1lID0gbmV3VGltZSAtIDAuMTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHNlZWthYmxlU3RhcnQgPSBsaXZlVHJhY2tlci5zZWVrYWJsZVN0YXJ0KCk7XG4gICAgICB2YXIgc2Vla2FibGVFbmQgPSBsaXZlVHJhY2tlci5saXZlQ3VycmVudFRpbWUoKTtcbiAgICAgIG5ld1RpbWUgPSBzZWVrYWJsZVN0YXJ0ICsgZGlzdGFuY2UgKiBsaXZlVHJhY2tlci5saXZlV2luZG93KCk7IC8vIERvbid0IGxldCB2aWRlbyBlbmQgd2hpbGUgc2NydWJiaW5nLlxuXG4gICAgICBpZiAobmV3VGltZSA+PSBzZWVrYWJsZUVuZCkge1xuICAgICAgICBuZXdUaW1lID0gc2Vla2FibGVFbmQ7XG4gICAgICB9IC8vIENvbXBlbnNhdGUgZm9yIHByZWNpc2lvbiBkaWZmZXJlbmNlcyBzbyB0aGF0IGN1cnJlbnRUaW1lIGlzIG5vdCBsZXNzXG4gICAgICAvLyB0aGFuIHNlZWthYmxlIHN0YXJ0XG5cblxuICAgICAgaWYgKG5ld1RpbWUgPD0gc2Vla2FibGVTdGFydCkge1xuICAgICAgICBuZXdUaW1lID0gc2Vla2FibGVTdGFydCArIDAuMTtcbiAgICAgIH0gLy8gT24gYW5kcm9pZCBzZWVrYWJsZUVuZCBjYW4gYmUgSW5maW5pdHkgc29tZXRpbWVzLFxuICAgICAgLy8gdGhpcyB3aWxsIGNhdXNlIG5ld1RpbWUgdG8gYmUgSW5maW5pdHksIHdoaWNoIGlzXG4gICAgICAvLyBub3QgYSB2YWxpZCBjdXJyZW50VGltZS5cblxuXG4gICAgICBpZiAobmV3VGltZSA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gLy8gU2V0IG5ldyB0aW1lICh0ZWxsIHBsYXllciB0byBzZWVrIHRvIG5ldyB0aW1lKVxuXG5cbiAgICB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUobmV3VGltZSk7XG4gIH07XG5cbiAgX3Byb3RvLmVuYWJsZSA9IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICBfU2xpZGVyLnByb3RvdHlwZS5lbmFibGUuY2FsbCh0aGlzKTtcblxuICAgIHZhciBtb3VzZVRpbWVEaXNwbGF5ID0gdGhpcy5nZXRDaGlsZCgnbW91c2VUaW1lRGlzcGxheScpO1xuXG4gICAgaWYgKCFtb3VzZVRpbWVEaXNwbGF5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbW91c2VUaW1lRGlzcGxheS5zaG93KCk7XG4gIH07XG5cbiAgX3Byb3RvLmRpc2FibGUgPSBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgIF9TbGlkZXIucHJvdG90eXBlLmRpc2FibGUuY2FsbCh0aGlzKTtcblxuICAgIHZhciBtb3VzZVRpbWVEaXNwbGF5ID0gdGhpcy5nZXRDaGlsZCgnbW91c2VUaW1lRGlzcGxheScpO1xuXG4gICAgaWYgKCFtb3VzZVRpbWVEaXNwbGF5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbW91c2VUaW1lRGlzcGxheS5oaWRlKCk7XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSBtb3VzZSB1cCBvbiBzZWVrIGJhclxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKiAgICAgICAgVGhlIGBtb3VzZXVwYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIHRvIHJ1bi5cbiAgICpcbiAgICogQGxpc3RlbnMgbW91c2V1cFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVNb3VzZVVwID0gZnVuY3Rpb24gaGFuZGxlTW91c2VVcChldmVudCkge1xuICAgIF9TbGlkZXIucHJvdG90eXBlLmhhbmRsZU1vdXNlVXAuY2FsbCh0aGlzLCBldmVudCk7IC8vIFN0b3AgZXZlbnQgcHJvcGFnYXRpb24gdG8gcHJldmVudCBkb3VibGUgZmlyZSBpbiBwcm9ncmVzcy1jb250cm9sLmpzXG5cblxuICAgIGlmIChldmVudCkge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuXG4gICAgdGhpcy5wbGF5ZXJfLnNjcnViYmluZyhmYWxzZSk7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlciB0aW1ldXBkYXRlIGJlY2F1c2Ugd2UncmUgZG9uZSBzZWVraW5nIGFuZCB0aGUgdGltZSBoYXMgY2hhbmdlZC5cbiAgICAgKiBUaGlzIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIGlmIHRoZSBwbGF5ZXIgaXMgcGF1c2VkIHRvIHRpbWUgdGhlIHRpbWUgZGlzcGxheXMuXG4gICAgICpcbiAgICAgKiBAZXZlbnQgVGVjaCN0aW1ldXBkYXRlXG4gICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAqL1xuXG4gICAgdGhpcy5wbGF5ZXJfLnRyaWdnZXIoe1xuICAgICAgdHlwZTogJ3RpbWV1cGRhdGUnLFxuICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgbWFudWFsbHlUcmlnZ2VyZWQ6IHRydWVcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLnZpZGVvV2FzUGxheWluZykge1xuICAgICAgc2lsZW5jZVByb21pc2UodGhpcy5wbGF5ZXJfLnBsYXkoKSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBNb3ZlIG1vcmUgcXVpY2tseSBmYXN0IGZvcndhcmQgZm9yIGtleWJvYXJkLW9ubHkgdXNlcnNcbiAgICovXG4gIDtcblxuICBfcHJvdG8uc3RlcEZvcndhcmQgPSBmdW5jdGlvbiBzdGVwRm9yd2FyZCgpIHtcbiAgICB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUodGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCkgKyBTVEVQX1NFQ09ORFMpO1xuICB9XG4gIC8qKlxuICAgKiBNb3ZlIG1vcmUgcXVpY2tseSByZXdpbmQgZm9yIGtleWJvYXJkLW9ubHkgdXNlcnNcbiAgICovXG4gIDtcblxuICBfcHJvdG8uc3RlcEJhY2sgPSBmdW5jdGlvbiBzdGVwQmFjaygpIHtcbiAgICB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUodGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCkgLSBTVEVQX1NFQ09ORFMpO1xuICB9XG4gIC8qKlxuICAgKiBUb2dnbGVzIHRoZSBwbGF5YmFjayBzdGF0ZSBvZiB0aGUgcGxheWVyXG4gICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBlbnRlciBvciBzcGFjZSBpcyB1c2VkIG9uIHRoZSBzZWVrYmFyXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYGtleWRvd25gIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXG4gICAqXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZUFjdGlvbiA9IGZ1bmN0aW9uIGhhbmRsZUFjdGlvbihldmVudCkge1xuICAgIGlmICh0aGlzLnBsYXllcl8ucGF1c2VkKCkpIHtcbiAgICAgIHRoaXMucGxheWVyXy5wbGF5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGxheWVyXy5wYXVzZSgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gdGhpcyBTZWVrQmFyIGhhcyBmb2N1cyBhbmQgYSBrZXkgZ2V0cyBwcmVzc2VkIGRvd24uXG4gICAqIFN1cHBvcnRzIHRoZSBmb2xsb3dpbmcga2V5czpcbiAgICpcbiAgICogICBTcGFjZSBvciBFbnRlciBrZXkgZmlyZSBhIGNsaWNrIGV2ZW50XG4gICAqICAgSG9tZSBrZXkgbW92ZXMgdG8gc3RhcnQgb2YgdGhlIHRpbWVsaW5lXG4gICAqICAgRW5kIGtleSBtb3ZlcyB0byBlbmQgb2YgdGhlIHRpbWVsaW5lXG4gICAqICAgRGlnaXQgXCIwXCIgdGhyb3VnaCBcIjlcIiBrZXlzIG1vdmUgdG8gMCUsIDEwJSAuLi4gODAlLCA5MCUgb2YgdGhlIHRpbWVsaW5lXG4gICAqICAgUGFnZURvd24ga2V5IG1vdmVzIGJhY2sgYSBsYXJnZXIgc3RlcCB0aGFuIEFycm93RG93blxuICAgKiAgIFBhZ2VVcCBrZXkgbW92ZXMgZm9yd2FyZCBhIGxhcmdlIHN0ZXBcbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIFRoZSBga2V5ZG93bmAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZSBjYWxsZWQuXG4gICAqXG4gICAqIEBsaXN0ZW5zIGtleWRvd25cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlS2V5UHJlc3MgPSBmdW5jdGlvbiBoYW5kbGVLZXlQcmVzcyhldmVudCkge1xuICAgIGlmIChrZXljb2RlLmlzRXZlbnRLZXkoZXZlbnQsICdTcGFjZScpIHx8IGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ0VudGVyJykpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLmhhbmRsZUFjdGlvbihldmVudCk7XG4gICAgfSBlbHNlIGlmIChrZXljb2RlLmlzRXZlbnRLZXkoZXZlbnQsICdIb21lJykpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUoMCk7XG4gICAgfSBlbHNlIGlmIChrZXljb2RlLmlzRXZlbnRLZXkoZXZlbnQsICdFbmQnKSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMucGxheWVyXy5jdXJyZW50VGltZSh0aGlzLnBsYXllcl8uZHVyYXRpb24oKSk7XG4gICAgfSBlbHNlIGlmICgvXlswLTldJC8udGVzdChrZXljb2RlKGV2ZW50KSkpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgZ290b0ZyYWN0aW9uID0gKGtleWNvZGUuY29kZXNba2V5Y29kZShldmVudCldIC0ga2V5Y29kZS5jb2Rlc1snMCddKSAqIDEwLjAgLyAxMDAuMDtcbiAgICAgIHRoaXMucGxheWVyXy5jdXJyZW50VGltZSh0aGlzLnBsYXllcl8uZHVyYXRpb24oKSAqIGdvdG9GcmFjdGlvbik7XG4gICAgfSBlbHNlIGlmIChrZXljb2RlLmlzRXZlbnRLZXkoZXZlbnQsICdQZ0RuJykpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUodGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCkgLSBTVEVQX1NFQ09ORFMgKiBQQUdFX0tFWV9NVUxUSVBMSUVSKTtcbiAgICB9IGVsc2UgaWYgKGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ1BnVXAnKSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMucGxheWVyXy5jdXJyZW50VGltZSh0aGlzLnBsYXllcl8uY3VycmVudFRpbWUoKSArIFNURVBfU0VDT05EUyAqIFBBR0VfS0VZX01VTFRJUExJRVIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBQYXNzIGtleXByZXNzIGhhbmRsaW5nIHVwIGZvciB1bnN1cHBvcnRlZCBrZXlzXG4gICAgICBfU2xpZGVyLnByb3RvdHlwZS5oYW5kbGVLZXlQcmVzcy5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFNlZWtCYXI7XG59KFNsaWRlcik7XG4vKipcbiAqIERlZmF1bHQgb3B0aW9ucyBmb3IgdGhlIGBTZWVrQmFyYFxuICpcbiAqIEB0eXBlIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5cblxuU2Vla0Jhci5wcm90b3R5cGUub3B0aW9uc18gPSB7XG4gIGNoaWxkcmVuOiBbJ2xvYWRQcm9ncmVzc0JhcicsICdwbGF5UHJvZ3Jlc3NCYXInXSxcbiAgYmFyTmFtZTogJ3BsYXlQcm9ncmVzc0Jhcidcbn07IC8vIE1vdXNlVGltZURpc3BsYXkgdG9vbHRpcHMgc2hvdWxkIG5vdCBiZSBhZGRlZCB0byBhIHBsYXllciBvbiBtb2JpbGUgZGV2aWNlc1xuXG5pZiAoIUlTX0lPUyAmJiAhSVNfQU5EUk9JRCkge1xuICBTZWVrQmFyLnByb3RvdHlwZS5vcHRpb25zXy5jaGlsZHJlbi5zcGxpY2UoMSwgMCwgJ21vdXNlVGltZURpc3BsYXknKTtcbn1cblxuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdTZWVrQmFyJywgU2Vla0Jhcik7XG5cbi8qKlxuICogVGhlIFByb2dyZXNzIENvbnRyb2wgY29tcG9uZW50IGNvbnRhaW5zIHRoZSBzZWVrIGJhciwgbG9hZCBwcm9ncmVzcyxcbiAqIGFuZCBwbGF5IHByb2dyZXNzLlxuICpcbiAqIEBleHRlbmRzIENvbXBvbmVudFxuICovXG5cbnZhciBQcm9ncmVzc0NvbnRyb2wgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzTG9vc2UoUHJvZ3Jlc3NDb250cm9sLCBfQ29tcG9uZW50KTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICovXG4gIGZ1bmN0aW9uIFByb2dyZXNzQ29udHJvbChwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgX3RoaXMuaGFuZGxlTW91c2VNb3ZlID0gdGhyb3R0bGUoYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMuaGFuZGxlTW91c2VNb3ZlKSwgMjUpO1xuICAgIF90aGlzLnRocm90dGxlZEhhbmRsZU1vdXNlU2VlayA9IHRocm90dGxlKGJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIF90aGlzLmhhbmRsZU1vdXNlU2VlayksIDI1KTtcblxuICAgIF90aGlzLmVuYWJsZSgpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgJ3MgRE9NIGVsZW1lbnRcbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBQcm9ncmVzc0NvbnRyb2wucHJvdG90eXBlO1xuXG4gIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsJCQxKCkge1xuICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICd2anMtcHJvZ3Jlc3MtY29udHJvbCB2anMtY29udHJvbCdcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogV2hlbiB0aGUgbW91c2UgbW92ZXMgb3ZlciB0aGUgYFByb2dyZXNzQ29udHJvbGAsIHRoZSBwb2ludGVyIHBvc2l0aW9uXG4gICAqIGdldHMgcGFzc2VkIGRvd24gdG8gdGhlIGBNb3VzZVRpbWVEaXNwbGF5YCBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYG1vdXNlbW92ZWAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBydW4uXG4gICAqXG4gICAqIEBsaXN0ZW4gbW91c2Vtb3ZlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZU1vdXNlTW92ZSA9IGZ1bmN0aW9uIGhhbmRsZU1vdXNlTW92ZShldmVudCkge1xuICAgIHZhciBzZWVrQmFyID0gdGhpcy5nZXRDaGlsZCgnc2Vla0JhcicpO1xuXG4gICAgaWYgKHNlZWtCYXIpIHtcbiAgICAgIHZhciBtb3VzZVRpbWVEaXNwbGF5ID0gc2Vla0Jhci5nZXRDaGlsZCgnbW91c2VUaW1lRGlzcGxheScpO1xuICAgICAgdmFyIHNlZWtCYXJFbCA9IHNlZWtCYXIuZWwoKTtcbiAgICAgIHZhciBzZWVrQmFyUmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChzZWVrQmFyRWwpO1xuICAgICAgdmFyIHNlZWtCYXJQb2ludCA9IGdldFBvaW50ZXJQb3NpdGlvbihzZWVrQmFyRWwsIGV2ZW50KS54OyAvLyBUaGUgZGVmYXVsdCBza2luIGhhcyBhIGdhcCBvbiBlaXRoZXIgc2lkZSBvZiB0aGUgYFNlZWtCYXJgLiBUaGlzIG1lYW5zXG4gICAgICAvLyB0aGF0IGl0J3MgcG9zc2libGUgdG8gdHJpZ2dlciB0aGlzIGJlaGF2aW9yIG91dHNpZGUgdGhlIGJvdW5kYXJpZXMgb2ZcbiAgICAgIC8vIHRoZSBgU2Vla0JhcmAuIFRoaXMgZW5zdXJlcyB3ZSBzdGF5IHdpdGhpbiBpdCBhdCBhbGwgdGltZXMuXG5cbiAgICAgIGlmIChzZWVrQmFyUG9pbnQgPiAxKSB7XG4gICAgICAgIHNlZWtCYXJQb2ludCA9IDE7XG4gICAgICB9IGVsc2UgaWYgKHNlZWtCYXJQb2ludCA8IDApIHtcbiAgICAgICAgc2Vla0JhclBvaW50ID0gMDtcbiAgICAgIH1cblxuICAgICAgaWYgKG1vdXNlVGltZURpc3BsYXkpIHtcbiAgICAgICAgbW91c2VUaW1lRGlzcGxheS51cGRhdGUoc2Vla0JhclJlY3QsIHNlZWtCYXJQb2ludCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBBIHRocm90dGxlZCB2ZXJzaW9uIG9mIHRoZSB7QGxpbmsgUHJvZ3Jlc3NDb250cm9sI2hhbmRsZU1vdXNlU2Vla30gbGlzdGVuZXIuXG4gICAqXG4gICAqIEBtZXRob2QgUHJvZ3Jlc3NDb250cm9sI3Rocm90dGxlZEhhbmRsZU1vdXNlU2Vla1xuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKiAgICAgICAgVGhlIGBtb3VzZW1vdmVgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gcnVuLlxuICAgKlxuICAgKiBAbGlzdGVuIG1vdXNlbW92ZVxuICAgKiBAbGlzdGVuIHRvdWNobW92ZVxuICAgKi9cblxuICAvKipcbiAgICogSGFuZGxlIGBtb3VzZW1vdmVgIG9yIGB0b3VjaG1vdmVgIGV2ZW50cyBvbiB0aGUgYFByb2dyZXNzQ29udHJvbGAuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBgbW91c2Vkb3duYCBvciBgdG91Y2hzdGFydGAgZXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhpcyBmdW5jdGlvblxuICAgKlxuICAgKiBAbGlzdGVucyBtb3VzZW1vdmVcbiAgICogQGxpc3RlbnMgdG91Y2htb3ZlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZU1vdXNlU2VlayA9IGZ1bmN0aW9uIGhhbmRsZU1vdXNlU2VlayhldmVudCkge1xuICAgIHZhciBzZWVrQmFyID0gdGhpcy5nZXRDaGlsZCgnc2Vla0JhcicpO1xuXG4gICAgaWYgKHNlZWtCYXIpIHtcbiAgICAgIHNlZWtCYXIuaGFuZGxlTW91c2VNb3ZlKGV2ZW50KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEFyZSBjb250cm9scyBhcmUgY3VycmVudGx5IGVuYWJsZWQgZm9yIHRoaXMgcHJvZ3Jlc3MgY29udHJvbC5cbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICB0cnVlIGlmIGNvbnRyb2xzIGFyZSBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2VcbiAgICovXG4gIDtcblxuICBfcHJvdG8uZW5hYmxlZCA9IGZ1bmN0aW9uIGVuYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW5hYmxlZF87XG4gIH1cbiAgLyoqXG4gICAqIERpc2FibGUgYWxsIGNvbnRyb2xzIG9uIHRoZSBwcm9ncmVzcyBjb250cm9sIGFuZCBpdHMgY2hpbGRyZW5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGlzYWJsZSA9IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgdGhpcy5jaGlsZHJlbigpLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICByZXR1cm4gY2hpbGQuZGlzYWJsZSAmJiBjaGlsZC5kaXNhYmxlKCk7XG4gICAgfSk7XG5cbiAgICBpZiAoIXRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5vZmYoWydtb3VzZWRvd24nLCAndG91Y2hzdGFydCddLCB0aGlzLmhhbmRsZU1vdXNlRG93bik7XG4gICAgdGhpcy5vZmYodGhpcy5lbF8sICdtb3VzZW1vdmUnLCB0aGlzLmhhbmRsZU1vdXNlTW92ZSk7XG4gICAgdGhpcy5oYW5kbGVNb3VzZVVwKCk7XG4gICAgdGhpcy5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICB0aGlzLmVuYWJsZWRfID0gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIEVuYWJsZSBhbGwgY29udHJvbHMgb24gdGhlIHByb2dyZXNzIGNvbnRyb2wgYW5kIGl0cyBjaGlsZHJlblxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5lbmFibGUgPSBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgdGhpcy5jaGlsZHJlbigpLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICByZXR1cm4gY2hpbGQuZW5hYmxlICYmIGNoaWxkLmVuYWJsZSgpO1xuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5vbihbJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0J10sIHRoaXMuaGFuZGxlTW91c2VEb3duKTtcbiAgICB0aGlzLm9uKHRoaXMuZWxfLCAnbW91c2Vtb3ZlJywgdGhpcy5oYW5kbGVNb3VzZU1vdmUpO1xuICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgdGhpcy5lbmFibGVkXyA9IHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSBgbW91c2Vkb3duYCBvciBgdG91Y2hzdGFydGAgZXZlbnRzIG9uIHRoZSBgUHJvZ3Jlc3NDb250cm9sYC5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIGBtb3VzZWRvd25gIG9yIGB0b3VjaHN0YXJ0YCBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGlzIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBsaXN0ZW5zIG1vdXNlZG93blxuICAgKiBAbGlzdGVucyB0b3VjaHN0YXJ0XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZU1vdXNlRG93biA9IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bihldmVudCkge1xuICAgIHZhciBkb2MgPSB0aGlzLmVsXy5vd25lckRvY3VtZW50O1xuICAgIHZhciBzZWVrQmFyID0gdGhpcy5nZXRDaGlsZCgnc2Vla0JhcicpO1xuXG4gICAgaWYgKHNlZWtCYXIpIHtcbiAgICAgIHNlZWtCYXIuaGFuZGxlTW91c2VEb3duKGV2ZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLm9uKGRvYywgJ21vdXNlbW92ZScsIHRoaXMudGhyb3R0bGVkSGFuZGxlTW91c2VTZWVrKTtcbiAgICB0aGlzLm9uKGRvYywgJ3RvdWNobW92ZScsIHRoaXMudGhyb3R0bGVkSGFuZGxlTW91c2VTZWVrKTtcbiAgICB0aGlzLm9uKGRvYywgJ21vdXNldXAnLCB0aGlzLmhhbmRsZU1vdXNlVXApO1xuICAgIHRoaXMub24oZG9jLCAndG91Y2hlbmQnLCB0aGlzLmhhbmRsZU1vdXNlVXApO1xuICB9XG4gIC8qKlxuICAgKiBIYW5kbGUgYG1vdXNldXBgIG9yIGB0b3VjaGVuZGAgZXZlbnRzIG9uIHRoZSBgUHJvZ3Jlc3NDb250cm9sYC5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIGBtb3VzZXVwYCBvciBgdG91Y2hlbmRgIGV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoaXMgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBsaXN0ZW5zIHRvdWNoZW5kXG4gICAqIEBsaXN0ZW5zIG1vdXNldXBcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlTW91c2VVcCA9IGZ1bmN0aW9uIGhhbmRsZU1vdXNlVXAoZXZlbnQpIHtcbiAgICB2YXIgZG9jID0gdGhpcy5lbF8ub3duZXJEb2N1bWVudDtcbiAgICB2YXIgc2Vla0JhciA9IHRoaXMuZ2V0Q2hpbGQoJ3NlZWtCYXInKTtcblxuICAgIGlmIChzZWVrQmFyKSB7XG4gICAgICBzZWVrQmFyLmhhbmRsZU1vdXNlVXAoZXZlbnQpO1xuICAgIH1cblxuICAgIHRoaXMub2ZmKGRvYywgJ21vdXNlbW92ZScsIHRoaXMudGhyb3R0bGVkSGFuZGxlTW91c2VTZWVrKTtcbiAgICB0aGlzLm9mZihkb2MsICd0b3VjaG1vdmUnLCB0aGlzLnRocm90dGxlZEhhbmRsZU1vdXNlU2Vlayk7XG4gICAgdGhpcy5vZmYoZG9jLCAnbW91c2V1cCcsIHRoaXMuaGFuZGxlTW91c2VVcCk7XG4gICAgdGhpcy5vZmYoZG9jLCAndG91Y2hlbmQnLCB0aGlzLmhhbmRsZU1vdXNlVXApO1xuICB9O1xuXG4gIHJldHVybiBQcm9ncmVzc0NvbnRyb2w7XG59KENvbXBvbmVudCk7XG4vKipcbiAqIERlZmF1bHQgb3B0aW9ucyBmb3IgYFByb2dyZXNzQ29udHJvbGBcbiAqXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuXG5cblByb2dyZXNzQ29udHJvbC5wcm90b3R5cGUub3B0aW9uc18gPSB7XG4gIGNoaWxkcmVuOiBbJ3NlZWtCYXInXVxufTtcbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnUHJvZ3Jlc3NDb250cm9sJywgUHJvZ3Jlc3NDb250cm9sKTtcblxuLyoqXG4gKiBUb2dnbGUgZnVsbHNjcmVlbiB2aWRlb1xuICpcbiAqIEBleHRlbmRzIEJ1dHRvblxuICovXG5cbnZhciBGdWxsc2NyZWVuVG9nZ2xlID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQnV0dG9uKSB7XG4gIF9pbmhlcml0c0xvb3NlKEZ1bGxzY3JlZW5Ub2dnbGUsIF9CdXR0b24pO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgKi9cbiAgZnVuY3Rpb24gRnVsbHNjcmVlblRvZ2dsZShwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9CdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG5cbiAgICBfdGhpcy5vbihwbGF5ZXIsICdmdWxsc2NyZWVuY2hhbmdlJywgX3RoaXMuaGFuZGxlRnVsbHNjcmVlbkNoYW5nZSk7XG5cbiAgICBpZiAoZG9jdW1lbnRbRnVsbHNjcmVlbkFwaS5mdWxsc2NyZWVuRW5hYmxlZF0gPT09IGZhbHNlKSB7XG4gICAgICBfdGhpcy5kaXNhYmxlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBCdWlsZHMgdGhlIGRlZmF1bHQgRE9NIGBjbGFzc05hbWVgLlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIERPTSBgY2xhc3NOYW1lYCBmb3IgdGhpcyBvYmplY3QuXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IEZ1bGxzY3JlZW5Ub2dnbGUucHJvdG90eXBlO1xuXG4gIF9wcm90by5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRDU1NDbGFzcygpIHtcbiAgICByZXR1cm4gXCJ2anMtZnVsbHNjcmVlbi1jb250cm9sIFwiICsgX0J1dHRvbi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBIYW5kbGVzIGZ1bGxzY3JlZW5jaGFuZ2Ugb24gdGhlIHBsYXllciBhbmQgY2hhbmdlIGNvbnRyb2wgdGV4dCBhY2NvcmRpbmdseS5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgKiAgICAgICAgVGhlIHtAbGluayBQbGF5ZXIjZnVsbHNjcmVlbmNoYW5nZX0gZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZVxuICAgKiAgICAgICAgY2FsbGVkLlxuICAgKlxuICAgKiBAbGlzdGVucyBQbGF5ZXIjZnVsbHNjcmVlbmNoYW5nZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVGdWxsc2NyZWVuQ2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlRnVsbHNjcmVlbkNoYW5nZShldmVudCkge1xuICAgIGlmICh0aGlzLnBsYXllcl8uaXNGdWxsc2NyZWVuKCkpIHtcbiAgICAgIHRoaXMuY29udHJvbFRleHQoJ05vbi1GdWxsc2NyZWVuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29udHJvbFRleHQoJ0Z1bGxzY3JlZW4nKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhbiBgRnVsbHNjcmVlblRvZ2dsZWAgaXMgXCJjbGlja2VkXCIuIFNlZVxuICAgKiB7QGxpbmsgQ2xpY2thYmxlQ29tcG9uZW50fSBmb3IgbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiBvbiB3aGF0IGEgY2xpY2sgY2FuIGJlLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAqICAgICAgICBUaGUgYGtleWRvd25gLCBgdGFwYCwgb3IgYGNsaWNrYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlXG4gICAqICAgICAgICBjYWxsZWQuXG4gICAqXG4gICAqIEBsaXN0ZW5zIHRhcFxuICAgKiBAbGlzdGVucyBjbGlja1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLnBsYXllcl8uaXNGdWxsc2NyZWVuKCkpIHtcbiAgICAgIHRoaXMucGxheWVyXy5yZXF1ZXN0RnVsbHNjcmVlbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBsYXllcl8uZXhpdEZ1bGxzY3JlZW4oKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIEZ1bGxzY3JlZW5Ub2dnbGU7XG59KEJ1dHRvbik7XG4vKipcbiAqIFRoZSB0ZXh0IHRoYXQgc2hvdWxkIGRpc3BsYXkgb3ZlciB0aGUgYEZ1bGxzY3JlZW5Ub2dnbGVgcyBjb250cm9scy4gQWRkZWQgZm9yIGxvY2FsaXphdGlvbi5cbiAqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuXG5cbkZ1bGxzY3JlZW5Ub2dnbGUucHJvdG90eXBlLmNvbnRyb2xUZXh0XyA9ICdGdWxsc2NyZWVuJztcbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnRnVsbHNjcmVlblRvZ2dsZScsIEZ1bGxzY3JlZW5Ub2dnbGUpO1xuXG4vKipcbiAqIENoZWNrIGlmIHZvbHVtZSBjb250cm9sIGlzIHN1cHBvcnRlZCBhbmQgaWYgaXQgaXNuJ3QgaGlkZSB0aGVcbiAqIGBDb21wb25lbnRgIHRoYXQgd2FzIHBhc3NlZCAgdXNpbmcgdGhlIGB2anMtaGlkZGVuYCBjbGFzcy5cbiAqXG4gKiBAcGFyYW0ge0NvbXBvbmVudH0gc2VsZlxuICogICAgICAgIFRoZSBjb21wb25lbnQgdGhhdCBzaG91bGQgYmUgaGlkZGVuIGlmIHZvbHVtZSBpcyB1bnN1cHBvcnRlZFxuICpcbiAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAqICAgICAgICBBIHJlZmVyZW5jZSB0byB0aGUgcGxheWVyXG4gKlxuICogQHByaXZhdGVcbiAqL1xudmFyIGNoZWNrVm9sdW1lU3VwcG9ydCA9IGZ1bmN0aW9uIGNoZWNrVm9sdW1lU3VwcG9ydChzZWxmLCBwbGF5ZXIpIHtcbiAgLy8gaGlkZSB2b2x1bWUgY29udHJvbHMgd2hlbiB0aGV5J3JlIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGN1cnJlbnQgdGVjaFxuICBpZiAocGxheWVyLnRlY2hfICYmICFwbGF5ZXIudGVjaF8uZmVhdHVyZXNWb2x1bWVDb250cm9sKSB7XG4gICAgc2VsZi5hZGRDbGFzcygndmpzLWhpZGRlbicpO1xuICB9XG5cbiAgc2VsZi5vbihwbGF5ZXIsICdsb2Fkc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFwbGF5ZXIudGVjaF8uZmVhdHVyZXNWb2x1bWVDb250cm9sKSB7XG4gICAgICBzZWxmLmFkZENsYXNzKCd2anMtaGlkZGVuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYucmVtb3ZlQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgICB9XG4gIH0pO1xufTtcblxuLyoqXG4gKiBTaG93cyB2b2x1bWUgbGV2ZWxcbiAqXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuXG52YXIgVm9sdW1lTGV2ZWwgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzTG9vc2UoVm9sdW1lTGV2ZWwsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFZvbHVtZUxldmVsKCkge1xuICAgIHJldHVybiBfQ29tcG9uZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBWb2x1bWVMZXZlbC5wcm90b3R5cGU7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgYENvbXBvbmVudGAncyBET00gZWxlbWVudFxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAqL1xuICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCgpIHtcbiAgICByZXR1cm4gX0NvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAndmpzLXZvbHVtZS1sZXZlbCcsXG4gICAgICBpbm5lckhUTUw6ICc8c3BhbiBjbGFzcz1cInZqcy1jb250cm9sLXRleHRcIj48L3NwYW4+J1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBWb2x1bWVMZXZlbDtcbn0oQ29tcG9uZW50KTtcblxuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdWb2x1bWVMZXZlbCcsIFZvbHVtZUxldmVsKTtcblxuLyoqXG4gKiBUaGUgYmFyIHRoYXQgY29udGFpbnMgdGhlIHZvbHVtZSBsZXZlbCBhbmQgY2FuIGJlIGNsaWNrZWQgb24gdG8gYWRqdXN0IHRoZSBsZXZlbFxuICpcbiAqIEBleHRlbmRzIFNsaWRlclxuICovXG5cbnZhciBWb2x1bWVCYXIgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9TbGlkZXIpIHtcbiAgX2luaGVyaXRzTG9vc2UoVm9sdW1lQmFyLCBfU2xpZGVyKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICovXG4gIGZ1bmN0aW9uIFZvbHVtZUJhcihwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9TbGlkZXIuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG5cbiAgICBfdGhpcy5vbignc2xpZGVyYWN0aXZlJywgX3RoaXMudXBkYXRlTGFzdFZvbHVtZV8pO1xuXG4gICAgX3RoaXMub24ocGxheWVyLCAndm9sdW1lY2hhbmdlJywgX3RoaXMudXBkYXRlQVJJQUF0dHJpYnV0ZXMpO1xuXG4gICAgcGxheWVyLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfdGhpcy51cGRhdGVBUklBQXR0cmlidXRlcygpO1xuICAgIH0pO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBgQ29tcG9uZW50YCdzIERPTSBlbGVtZW50XG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gVm9sdW1lQmFyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSgpIHtcbiAgICByZXR1cm4gX1NsaWRlci5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAndmpzLXZvbHVtZS1iYXIgdmpzLXNsaWRlci1iYXInXG4gICAgfSwge1xuICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLmxvY2FsaXplKCdWb2x1bWUgTGV2ZWwnKSxcbiAgICAgICdhcmlhLWxpdmUnOiAncG9saXRlJ1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBIYW5kbGUgbW91c2UgZG93biBvbiB2b2x1bWUgYmFyXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYG1vdXNlZG93bmAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyB0byBydW4uXG4gICAqXG4gICAqIEBsaXN0ZW5zIG1vdXNlZG93blxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVNb3VzZURvd24gPSBmdW5jdGlvbiBoYW5kbGVNb3VzZURvd24oZXZlbnQpIHtcbiAgICBpZiAoIWlzU2luZ2xlTGVmdENsaWNrKGV2ZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIF9TbGlkZXIucHJvdG90eXBlLmhhbmRsZU1vdXNlRG93bi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgfVxuICAvKipcbiAgICogSGFuZGxlIG1vdmVtZW50IGV2ZW50cyBvbiB0aGUge0BsaW5rIFZvbHVtZU1lbnVCdXR0b259LlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKiAgICAgICAgVGhlIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gcnVuLlxuICAgKlxuICAgKiBAbGlzdGVucyBtb3VzZW1vdmVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlTW91c2VNb3ZlID0gZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlKGV2ZW50KSB7XG4gICAgaWYgKCFpc1NpbmdsZUxlZnRDbGljayhldmVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmNoZWNrTXV0ZWQoKTtcbiAgICB0aGlzLnBsYXllcl8udm9sdW1lKHRoaXMuY2FsY3VsYXRlRGlzdGFuY2UoZXZlbnQpKTtcbiAgfVxuICAvKipcbiAgICogSWYgdGhlIHBsYXllciBpcyBtdXRlZCB1bm11dGUgaXQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNoZWNrTXV0ZWQgPSBmdW5jdGlvbiBjaGVja011dGVkKCkge1xuICAgIGlmICh0aGlzLnBsYXllcl8ubXV0ZWQoKSkge1xuICAgICAgdGhpcy5wbGF5ZXJfLm11dGVkKGZhbHNlKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCBwZXJjZW50IG9mIHZvbHVtZSBsZXZlbFxuICAgKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqICAgICAgICAgVm9sdW1lIGxldmVsIHBlcmNlbnQgYXMgYSBkZWNpbWFsIG51bWJlci5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZ2V0UGVyY2VudCA9IGZ1bmN0aW9uIGdldFBlcmNlbnQoKSB7XG4gICAgaWYgKHRoaXMucGxheWVyXy5tdXRlZCgpKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wbGF5ZXJfLnZvbHVtZSgpO1xuICB9XG4gIC8qKlxuICAgKiBJbmNyZWFzZSB2b2x1bWUgbGV2ZWwgZm9yIGtleWJvYXJkIHVzZXJzXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnN0ZXBGb3J3YXJkID0gZnVuY3Rpb24gc3RlcEZvcndhcmQoKSB7XG4gICAgdGhpcy5jaGVja011dGVkKCk7XG4gICAgdGhpcy5wbGF5ZXJfLnZvbHVtZSh0aGlzLnBsYXllcl8udm9sdW1lKCkgKyAwLjEpO1xuICB9XG4gIC8qKlxuICAgKiBEZWNyZWFzZSB2b2x1bWUgbGV2ZWwgZm9yIGtleWJvYXJkIHVzZXJzXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnN0ZXBCYWNrID0gZnVuY3Rpb24gc3RlcEJhY2soKSB7XG4gICAgdGhpcy5jaGVja011dGVkKCk7XG4gICAgdGhpcy5wbGF5ZXJfLnZvbHVtZSh0aGlzLnBsYXllcl8udm9sdW1lKCkgLSAwLjEpO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgQVJJQSBhY2Nlc3NpYmlsaXR5IGF0dHJpYnV0ZXNcbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgKiAgICAgICAgVGhlIGB2b2x1bWVjaGFuZ2VgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gcnVuLlxuICAgKlxuICAgKiBAbGlzdGVucyBQbGF5ZXIjdm9sdW1lY2hhbmdlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVwZGF0ZUFSSUFBdHRyaWJ1dGVzID0gZnVuY3Rpb24gdXBkYXRlQVJJQUF0dHJpYnV0ZXMoZXZlbnQpIHtcbiAgICB2YXIgYXJpYVZhbHVlID0gdGhpcy5wbGF5ZXJfLm11dGVkKCkgPyAwIDogdGhpcy52b2x1bWVBc1BlcmNlbnRhZ2VfKCk7XG4gICAgdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbm93JywgYXJpYVZhbHVlKTtcbiAgICB0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWV0ZXh0JywgYXJpYVZhbHVlICsgJyUnKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgcGxheWVyIHZvbHVtZSBhcyBhIHBlcmNlbnRhZ2VcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8udm9sdW1lQXNQZXJjZW50YWdlXyA9IGZ1bmN0aW9uIHZvbHVtZUFzUGVyY2VudGFnZV8oKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQodGhpcy5wbGF5ZXJfLnZvbHVtZSgpICogMTAwKTtcbiAgfVxuICAvKipcbiAgICogV2hlbiB1c2VyIHN0YXJ0cyBkcmFnZ2luZyB0aGUgVm9sdW1lQmFyLCBzdG9yZSB0aGUgdm9sdW1lIGFuZCBsaXN0ZW4gZm9yXG4gICAqIHRoZSBlbmQgb2YgdGhlIGRyYWcuIFdoZW4gdGhlIGRyYWcgZW5kcywgaWYgdGhlIHZvbHVtZSB3YXMgc2V0IHRvIHplcm8sXG4gICAqIHNldCBsYXN0Vm9sdW1lIHRvIHRoZSBzdG9yZWQgdm9sdW1lLlxuICAgKlxuICAgKiBAbGlzdGVucyBzbGlkZXJhY3RpdmVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlTGFzdFZvbHVtZV8gPSBmdW5jdGlvbiB1cGRhdGVMYXN0Vm9sdW1lXygpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHZhciB2b2x1bWVCZWZvcmVEcmFnID0gdGhpcy5wbGF5ZXJfLnZvbHVtZSgpO1xuICAgIHRoaXMub25lKCdzbGlkZXJpbmFjdGl2ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfdGhpczIucGxheWVyXy52b2x1bWUoKSA9PT0gMCkge1xuICAgICAgICBfdGhpczIucGxheWVyXy5sYXN0Vm9sdW1lXyh2b2x1bWVCZWZvcmVEcmFnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gVm9sdW1lQmFyO1xufShTbGlkZXIpO1xuLyoqXG4gKiBEZWZhdWx0IG9wdGlvbnMgZm9yIHRoZSBgVm9sdW1lQmFyYFxuICpcbiAqIEB0eXBlIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5cblxuVm9sdW1lQmFyLnByb3RvdHlwZS5vcHRpb25zXyA9IHtcbiAgY2hpbGRyZW46IFsndm9sdW1lTGV2ZWwnXSxcbiAgYmFyTmFtZTogJ3ZvbHVtZUxldmVsJ1xufTtcbi8qKlxuICogQ2FsbCB0aGUgdXBkYXRlIGV2ZW50IGZvciB0aGlzIFNsaWRlciB3aGVuIHRoaXMgZXZlbnQgaGFwcGVucyBvbiB0aGUgcGxheWVyLlxuICpcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cblxuVm9sdW1lQmFyLnByb3RvdHlwZS5wbGF5ZXJFdmVudCA9ICd2b2x1bWVjaGFuZ2UnO1xuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdWb2x1bWVCYXInLCBWb2x1bWVCYXIpO1xuXG4vKipcbiAqIFRoZSBjb21wb25lbnQgZm9yIGNvbnRyb2xsaW5nIHRoZSB2b2x1bWUgbGV2ZWxcbiAqXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuXG52YXIgVm9sdW1lQ29udHJvbCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHNMb29zZShWb2x1bWVDb250cm9sLCBfQ29tcG9uZW50KTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICovXG4gIGZ1bmN0aW9uIFZvbHVtZUNvbnRyb2wocGxheWVyLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIG9wdGlvbnMudmVydGljYWwgPSBvcHRpb25zLnZlcnRpY2FsIHx8IGZhbHNlOyAvLyBQYXNzIHRoZSB2ZXJ0aWNhbCBvcHRpb24gZG93biB0byB0aGUgVm9sdW1lQmFyIGlmXG4gICAgLy8gdGhlIFZvbHVtZUJhciBpcyB0dXJuZWQgb24uXG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMudm9sdW1lQmFyID09PSAndW5kZWZpbmVkJyB8fCBpc1BsYWluKG9wdGlvbnMudm9sdW1lQmFyKSkge1xuICAgICAgb3B0aW9ucy52b2x1bWVCYXIgPSBvcHRpb25zLnZvbHVtZUJhciB8fCB7fTtcbiAgICAgIG9wdGlvbnMudm9sdW1lQmFyLnZlcnRpY2FsID0gb3B0aW9ucy52ZXJ0aWNhbDtcbiAgICB9XG5cbiAgICBfdGhpcyA9IF9Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7IC8vIGhpZGUgdGhpcyBjb250cm9sIGlmIHZvbHVtZSBzdXBwb3J0IGlzIG1pc3NpbmdcblxuICAgIGNoZWNrVm9sdW1lU3VwcG9ydChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgcGxheWVyKTtcbiAgICBfdGhpcy50aHJvdHRsZWRIYW5kbGVNb3VzZU1vdmUgPSB0aHJvdHRsZShiaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBfdGhpcy5oYW5kbGVNb3VzZU1vdmUpLCAyNSk7XG5cbiAgICBfdGhpcy5vbignbW91c2Vkb3duJywgX3RoaXMuaGFuZGxlTW91c2VEb3duKTtcblxuICAgIF90aGlzLm9uKCd0b3VjaHN0YXJ0JywgX3RoaXMuaGFuZGxlTW91c2VEb3duKTsgLy8gd2hpbGUgdGhlIHNsaWRlciBpcyBhY3RpdmUgKHRoZSBtb3VzZSBoYXMgYmVlbiBwcmVzc2VkIGRvd24gYW5kXG4gICAgLy8gaXMgZHJhZ2dpbmcpIG9yIGluIGZvY3VzIHdlIGRvIG5vdCB3YW50IHRvIGhpZGUgdGhlIFZvbHVtZUJhclxuXG5cbiAgICBfdGhpcy5vbihfdGhpcy52b2x1bWVCYXIsIFsnZm9jdXMnLCAnc2xpZGVyYWN0aXZlJ10sIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnZvbHVtZUJhci5hZGRDbGFzcygndmpzLXNsaWRlci1hY3RpdmUnKTtcblxuICAgICAgX3RoaXMuYWRkQ2xhc3MoJ3Zqcy1zbGlkZXItYWN0aXZlJyk7XG5cbiAgICAgIF90aGlzLnRyaWdnZXIoJ3NsaWRlcmFjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgX3RoaXMub24oX3RoaXMudm9sdW1lQmFyLCBbJ2JsdXInLCAnc2xpZGVyaW5hY3RpdmUnXSwgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMudm9sdW1lQmFyLnJlbW92ZUNsYXNzKCd2anMtc2xpZGVyLWFjdGl2ZScpO1xuXG4gICAgICBfdGhpcy5yZW1vdmVDbGFzcygndmpzLXNsaWRlci1hY3RpdmUnKTtcblxuICAgICAgX3RoaXMudHJpZ2dlcignc2xpZGVyaW5hY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBgQ29tcG9uZW50YCdzIERPTSBlbGVtZW50XG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gVm9sdW1lQ29udHJvbC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwoKSB7XG4gICAgdmFyIG9yaWVudGF0aW9uQ2xhc3MgPSAndmpzLXZvbHVtZS1ob3Jpem9udGFsJztcblxuICAgIGlmICh0aGlzLm9wdGlvbnNfLnZlcnRpY2FsKSB7XG4gICAgICBvcmllbnRhdGlvbkNsYXNzID0gJ3Zqcy12b2x1bWUtdmVydGljYWwnO1xuICAgIH1cblxuICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6IFwidmpzLXZvbHVtZS1jb250cm9sIHZqcy1jb250cm9sIFwiICsgb3JpZW50YXRpb25DbGFzc1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBIYW5kbGUgYG1vdXNlZG93bmAgb3IgYHRvdWNoc3RhcnRgIGV2ZW50cyBvbiB0aGUgYFZvbHVtZUNvbnRyb2xgLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKiAgICAgICAgYG1vdXNlZG93bmAgb3IgYHRvdWNoc3RhcnRgIGV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoaXMgZnVuY3Rpb25cbiAgICpcbiAgICogQGxpc3RlbnMgbW91c2Vkb3duXG4gICAqIEBsaXN0ZW5zIHRvdWNoc3RhcnRcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlTW91c2VEb3duID0gZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duKGV2ZW50KSB7XG4gICAgdmFyIGRvYyA9IHRoaXMuZWxfLm93bmVyRG9jdW1lbnQ7XG4gICAgdGhpcy5vbihkb2MsICdtb3VzZW1vdmUnLCB0aGlzLnRocm90dGxlZEhhbmRsZU1vdXNlTW92ZSk7XG4gICAgdGhpcy5vbihkb2MsICd0b3VjaG1vdmUnLCB0aGlzLnRocm90dGxlZEhhbmRsZU1vdXNlTW92ZSk7XG4gICAgdGhpcy5vbihkb2MsICdtb3VzZXVwJywgdGhpcy5oYW5kbGVNb3VzZVVwKTtcbiAgICB0aGlzLm9uKGRvYywgJ3RvdWNoZW5kJywgdGhpcy5oYW5kbGVNb3VzZVVwKTtcbiAgfVxuICAvKipcbiAgICogSGFuZGxlIGBtb3VzZXVwYCBvciBgdG91Y2hlbmRgIGV2ZW50cyBvbiB0aGUgYFZvbHVtZUNvbnRyb2xgLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKiAgICAgICAgYG1vdXNldXBgIG9yIGB0b3VjaGVuZGAgZXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhpcyBmdW5jdGlvbi5cbiAgICpcbiAgICogQGxpc3RlbnMgdG91Y2hlbmRcbiAgICogQGxpc3RlbnMgbW91c2V1cFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVNb3VzZVVwID0gZnVuY3Rpb24gaGFuZGxlTW91c2VVcChldmVudCkge1xuICAgIHZhciBkb2MgPSB0aGlzLmVsXy5vd25lckRvY3VtZW50O1xuICAgIHRoaXMub2ZmKGRvYywgJ21vdXNlbW92ZScsIHRoaXMudGhyb3R0bGVkSGFuZGxlTW91c2VNb3ZlKTtcbiAgICB0aGlzLm9mZihkb2MsICd0b3VjaG1vdmUnLCB0aGlzLnRocm90dGxlZEhhbmRsZU1vdXNlTW92ZSk7XG4gICAgdGhpcy5vZmYoZG9jLCAnbW91c2V1cCcsIHRoaXMuaGFuZGxlTW91c2VVcCk7XG4gICAgdGhpcy5vZmYoZG9jLCAndG91Y2hlbmQnLCB0aGlzLmhhbmRsZU1vdXNlVXApO1xuICB9XG4gIC8qKlxuICAgKiBIYW5kbGUgYG1vdXNlZG93bmAgb3IgYHRvdWNoc3RhcnRgIGV2ZW50cyBvbiB0aGUgYFZvbHVtZUNvbnRyb2xgLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKiAgICAgICAgYG1vdXNlZG93bmAgb3IgYHRvdWNoc3RhcnRgIGV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoaXMgZnVuY3Rpb25cbiAgICpcbiAgICogQGxpc3RlbnMgbW91c2Vkb3duXG4gICAqIEBsaXN0ZW5zIHRvdWNoc3RhcnRcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlTW91c2VNb3ZlID0gZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlKGV2ZW50KSB7XG4gICAgdGhpcy52b2x1bWVCYXIuaGFuZGxlTW91c2VNb3ZlKGV2ZW50KTtcbiAgfTtcblxuICByZXR1cm4gVm9sdW1lQ29udHJvbDtcbn0oQ29tcG9uZW50KTtcbi8qKlxuICogRGVmYXVsdCBvcHRpb25zIGZvciB0aGUgYFZvbHVtZUNvbnRyb2xgXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5Wb2x1bWVDb250cm9sLnByb3RvdHlwZS5vcHRpb25zXyA9IHtcbiAgY2hpbGRyZW46IFsndm9sdW1lQmFyJ11cbn07XG5Db21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ1ZvbHVtZUNvbnRyb2wnLCBWb2x1bWVDb250cm9sKTtcblxuLyoqXG4gKiBDaGVjayBpZiBtdXRpbmcgdm9sdW1lIGlzIHN1cHBvcnRlZCBhbmQgaWYgaXQgaXNuJ3QgaGlkZSB0aGUgbXV0ZSB0b2dnbGVcbiAqIGJ1dHRvbi5cbiAqXG4gKiBAcGFyYW0ge0NvbXBvbmVudH0gc2VsZlxuICogICAgICAgIEEgcmVmZXJlbmNlIHRvIHRoZSBtdXRlIHRvZ2dsZSBidXR0b25cbiAqXG4gKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gKiAgICAgICAgQSByZWZlcmVuY2UgdG8gdGhlIHBsYXllclxuICpcbiAqIEBwcml2YXRlXG4gKi9cbnZhciBjaGVja011dGVTdXBwb3J0ID0gZnVuY3Rpb24gY2hlY2tNdXRlU3VwcG9ydChzZWxmLCBwbGF5ZXIpIHtcbiAgLy8gaGlkZSBtdXRlIHRvZ2dsZSBidXR0b24gaWYgaXQncyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IHRlY2hcbiAgaWYgKHBsYXllci50ZWNoXyAmJiAhcGxheWVyLnRlY2hfLmZlYXR1cmVzTXV0ZUNvbnRyb2wpIHtcbiAgICBzZWxmLmFkZENsYXNzKCd2anMtaGlkZGVuJyk7XG4gIH1cblxuICBzZWxmLm9uKHBsYXllciwgJ2xvYWRzdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXBsYXllci50ZWNoXy5mZWF0dXJlc011dGVDb250cm9sKSB7XG4gICAgICBzZWxmLmFkZENsYXNzKCd2anMtaGlkZGVuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYucmVtb3ZlQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgICB9XG4gIH0pO1xufTtcblxuLyoqXG4gKiBBIGJ1dHRvbiBjb21wb25lbnQgZm9yIG11dGluZyB0aGUgYXVkaW8uXG4gKlxuICogQGV4dGVuZHMgQnV0dG9uXG4gKi9cblxudmFyIE11dGVUb2dnbGUgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9CdXR0b24pIHtcbiAgX2luaGVyaXRzTG9vc2UoTXV0ZVRvZ2dsZSwgX0J1dHRvbik7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgKiAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAqL1xuICBmdW5jdGlvbiBNdXRlVG9nZ2xlKHBsYXllciwgb3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX0J1dHRvbi5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpczsgLy8gaGlkZSB0aGlzIGNvbnRyb2wgaWYgdm9sdW1lIHN1cHBvcnQgaXMgbWlzc2luZ1xuXG4gICAgY2hlY2tNdXRlU3VwcG9ydChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgcGxheWVyKTtcblxuICAgIF90aGlzLm9uKHBsYXllciwgWydsb2Fkc3RhcnQnLCAndm9sdW1lY2hhbmdlJ10sIF90aGlzLnVwZGF0ZSk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEJ1aWxkcyB0aGUgZGVmYXVsdCBET00gYGNsYXNzTmFtZWAuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBUaGUgRE9NIGBjbGFzc05hbWVgIGZvciB0aGlzIG9iamVjdC5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gTXV0ZVRvZ2dsZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgIHJldHVybiBcInZqcy1tdXRlLWNvbnRyb2wgXCIgKyBfQnV0dG9uLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhbiBgTXV0ZVRvZ2dsZWAgaXMgXCJjbGlja2VkXCIuIFNlZVxuICAgKiB7QGxpbmsgQ2xpY2thYmxlQ29tcG9uZW50fSBmb3IgbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiBvbiB3aGF0IGEgY2xpY2sgY2FuIGJlLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAqICAgICAgICBUaGUgYGtleWRvd25gLCBgdGFwYCwgb3IgYGNsaWNrYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlXG4gICAqICAgICAgICBjYWxsZWQuXG4gICAqXG4gICAqIEBsaXN0ZW5zIHRhcFxuICAgKiBAbGlzdGVucyBjbGlja1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XG4gICAgdmFyIHZvbCA9IHRoaXMucGxheWVyXy52b2x1bWUoKTtcbiAgICB2YXIgbGFzdFZvbHVtZSA9IHRoaXMucGxheWVyXy5sYXN0Vm9sdW1lXygpO1xuXG4gICAgaWYgKHZvbCA9PT0gMCkge1xuICAgICAgdmFyIHZvbHVtZVRvU2V0ID0gbGFzdFZvbHVtZSA8IDAuMSA/IDAuMSA6IGxhc3RWb2x1bWU7XG4gICAgICB0aGlzLnBsYXllcl8udm9sdW1lKHZvbHVtZVRvU2V0KTtcbiAgICAgIHRoaXMucGxheWVyXy5tdXRlZChmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGxheWVyXy5tdXRlZCh0aGlzLnBsYXllcl8ubXV0ZWQoKSA/IGZhbHNlIDogdHJ1ZSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGBNdXRlVG9nZ2xlYCBidXR0b24gYmFzZWQgb24gdGhlIHN0YXRlIG9mIGB2b2x1bWVgIGFuZCBgbXV0ZWRgXG4gICAqIG9uIHRoZSBwbGF5ZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IFtldmVudF1cbiAgICogICAgICAgIFRoZSB7QGxpbmsgUGxheWVyI2xvYWRzdGFydH0gZXZlbnQgaWYgdGhpcyBmdW5jdGlvbiB3YXMgY2FsbGVkXG4gICAqICAgICAgICB0aHJvdWdoIGFuIGV2ZW50LlxuICAgKlxuICAgKiBAbGlzdGVucyBQbGF5ZXIjbG9hZHN0YXJ0XG4gICAqIEBsaXN0ZW5zIFBsYXllciN2b2x1bWVjaGFuZ2VcbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGV2ZW50KSB7XG4gICAgdGhpcy51cGRhdGVJY29uXygpO1xuICAgIHRoaXMudXBkYXRlQ29udHJvbFRleHRfKCk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgYXBwZWFyYW5jZSBvZiB0aGUgYE11dGVUb2dnbGVgIGljb24uXG4gICAqXG4gICAqIFBvc3NpYmxlIHN0YXRlcyAoZ2l2ZW4gYGxldmVsYCB2YXJpYWJsZSBiZWxvdyk6XG4gICAqIC0gMDogY3Jvc3NlZCBvdXRcbiAgICogLSAxOiB6ZXJvIGJhcnMgb2Ygdm9sdW1lXG4gICAqIC0gMjogb25lIGJhciBvZiB2b2x1bWVcbiAgICogLSAzOiB0d28gYmFycyBvZiB2b2x1bWVcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlSWNvbl8gPSBmdW5jdGlvbiB1cGRhdGVJY29uXygpIHtcbiAgICB2YXIgdm9sID0gdGhpcy5wbGF5ZXJfLnZvbHVtZSgpO1xuICAgIHZhciBsZXZlbCA9IDM7IC8vIGluIGlPUyB3aGVuIGEgcGxheWVyIGlzIGxvYWRlZCB3aXRoIG11dGVkIGF0dHJpYnV0ZVxuICAgIC8vIGFuZCB2b2x1bWUgaXMgY2hhbmdlZCB3aXRoIGEgbmF0aXZlIG11dGUgYnV0dG9uXG4gICAgLy8gd2Ugd2FudCB0byBtYWtlIHN1cmUgbXV0ZWQgc3RhdGUgaXMgdXBkYXRlZFxuXG4gICAgaWYgKElTX0lPUyAmJiB0aGlzLnBsYXllcl8udGVjaF8gJiYgdGhpcy5wbGF5ZXJfLnRlY2hfLmVsXykge1xuICAgICAgdGhpcy5wbGF5ZXJfLm11dGVkKHRoaXMucGxheWVyXy50ZWNoXy5lbF8ubXV0ZWQpO1xuICAgIH1cblxuICAgIGlmICh2b2wgPT09IDAgfHwgdGhpcy5wbGF5ZXJfLm11dGVkKCkpIHtcbiAgICAgIGxldmVsID0gMDtcbiAgICB9IGVsc2UgaWYgKHZvbCA8IDAuMzMpIHtcbiAgICAgIGxldmVsID0gMTtcbiAgICB9IGVsc2UgaWYgKHZvbCA8IDAuNjcpIHtcbiAgICAgIGxldmVsID0gMjtcbiAgICB9IC8vIFRPRE8gaW1wcm92ZSBtdXRlZCBpY29uIGNsYXNzZXNcblxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWxfLCBcInZqcy12b2wtXCIgKyBpKTtcbiAgICB9XG5cbiAgICBhZGRDbGFzcyh0aGlzLmVsXywgXCJ2anMtdm9sLVwiICsgbGV2ZWwpO1xuICB9XG4gIC8qKlxuICAgKiBJZiBgbXV0ZWRgIGhhcyBjaGFuZ2VkIG9uIHRoZSBwbGF5ZXIsIHVwZGF0ZSB0aGUgY29udHJvbCB0ZXh0XG4gICAqIChgdGl0bGVgIGF0dHJpYnV0ZSBvbiBgdmpzLW11dGUtY29udHJvbGAgZWxlbWVudCBhbmQgY29udGVudCBvZlxuICAgKiBgdmpzLWNvbnRyb2wtdGV4dGAgZWxlbWVudCkuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVwZGF0ZUNvbnRyb2xUZXh0XyA9IGZ1bmN0aW9uIHVwZGF0ZUNvbnRyb2xUZXh0XygpIHtcbiAgICB2YXIgc291bmRPZmYgPSB0aGlzLnBsYXllcl8ubXV0ZWQoKSB8fCB0aGlzLnBsYXllcl8udm9sdW1lKCkgPT09IDA7XG4gICAgdmFyIHRleHQgPSBzb3VuZE9mZiA/ICdVbm11dGUnIDogJ011dGUnO1xuXG4gICAgaWYgKHRoaXMuY29udHJvbFRleHQoKSAhPT0gdGV4dCkge1xuICAgICAgdGhpcy5jb250cm9sVGV4dCh0ZXh0KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIE11dGVUb2dnbGU7XG59KEJ1dHRvbik7XG4vKipcbiAqIFRoZSB0ZXh0IHRoYXQgc2hvdWxkIGRpc3BsYXkgb3ZlciB0aGUgYE11dGVUb2dnbGVgcyBjb250cm9scy4gQWRkZWQgZm9yIGxvY2FsaXphdGlvbi5cbiAqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuXG5cbk11dGVUb2dnbGUucHJvdG90eXBlLmNvbnRyb2xUZXh0XyA9ICdNdXRlJztcbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnTXV0ZVRvZ2dsZScsIE11dGVUb2dnbGUpO1xuXG4vKipcbiAqIEEgQ29tcG9uZW50IHRvIGNvbnRhaW4gdGhlIE11dGVUb2dnbGUgYW5kIFZvbHVtZUNvbnRyb2wgc28gdGhhdFxuICogdGhleSBjYW4gd29yayB0b2dldGhlci5cbiAqXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuXG52YXIgVm9sdW1lUGFuZWwgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzTG9vc2UoVm9sdW1lUGFuZWwsIF9Db21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dXG4gICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgKi9cbiAgZnVuY3Rpb24gVm9sdW1lUGFuZWwocGxheWVyLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5pbmxpbmUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBvcHRpb25zLmlubGluZSA9IG9wdGlvbnMuaW5saW5lO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zLmlubGluZSA9IHRydWU7XG4gICAgfSAvLyBwYXNzIHRoZSBpbmxpbmUgb3B0aW9uIGRvd24gdG8gdGhlIFZvbHVtZUNvbnRyb2wgYXMgdmVydGljYWwgaWZcbiAgICAvLyB0aGUgVm9sdW1lQ29udHJvbCBpcyBvbi5cblxuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnZvbHVtZUNvbnRyb2wgPT09ICd1bmRlZmluZWQnIHx8IGlzUGxhaW4ob3B0aW9ucy52b2x1bWVDb250cm9sKSkge1xuICAgICAgb3B0aW9ucy52b2x1bWVDb250cm9sID0gb3B0aW9ucy52b2x1bWVDb250cm9sIHx8IHt9O1xuICAgICAgb3B0aW9ucy52b2x1bWVDb250cm9sLnZlcnRpY2FsID0gIW9wdGlvbnMuaW5saW5lO1xuICAgIH1cblxuICAgIF90aGlzID0gX0NvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcblxuICAgIF90aGlzLm9uKHBsYXllciwgWydsb2Fkc3RhcnQnXSwgX3RoaXMudm9sdW1lUGFuZWxTdGF0ZV8pOyAvLyB3aGlsZSB0aGUgc2xpZGVyIGlzIGFjdGl2ZSAodGhlIG1vdXNlIGhhcyBiZWVuIHByZXNzZWQgZG93biBhbmRcbiAgICAvLyBpcyBkcmFnZ2luZykgd2UgZG8gbm90IHdhbnQgdG8gaGlkZSB0aGUgVm9sdW1lQmFyXG5cblxuICAgIF90aGlzLm9uKF90aGlzLnZvbHVtZUNvbnRyb2wsIFsnc2xpZGVyYWN0aXZlJ10sIF90aGlzLnNsaWRlckFjdGl2ZV8pO1xuXG4gICAgX3RoaXMub24oX3RoaXMudm9sdW1lQ29udHJvbCwgWydzbGlkZXJpbmFjdGl2ZSddLCBfdGhpcy5zbGlkZXJJbmFjdGl2ZV8pO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgdmpzLXNsaWRlci1hY3RpdmUgY2xhc3MgdG8gdGhlIFZvbHVtZVBhbmVsXG4gICAqXG4gICAqIEBsaXN0ZW5zIFZvbHVtZUNvbnRyb2wjc2xpZGVyYWN0aXZlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IFZvbHVtZVBhbmVsLnByb3RvdHlwZTtcblxuICBfcHJvdG8uc2xpZGVyQWN0aXZlXyA9IGZ1bmN0aW9uIHNsaWRlckFjdGl2ZV8oKSB7XG4gICAgdGhpcy5hZGRDbGFzcygndmpzLXNsaWRlci1hY3RpdmUnKTtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlcyB2anMtc2xpZGVyLWFjdGl2ZSBjbGFzcyB0byB0aGUgVm9sdW1lUGFuZWxcbiAgICpcbiAgICogQGxpc3RlbnMgVm9sdW1lQ29udHJvbCNzbGlkZXJpbmFjdGl2ZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zbGlkZXJJbmFjdGl2ZV8gPSBmdW5jdGlvbiBzbGlkZXJJbmFjdGl2ZV8oKSB7XG4gICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLXNsaWRlci1hY3RpdmUnKTtcbiAgfVxuICAvKipcbiAgICogQWRkcyB2anMtaGlkZGVuIG9yIHZqcy1tdXRlLXRvZ2dsZS1vbmx5IHRvIHRoZSBWb2x1bWVQYW5lbFxuICAgKiBkZXBlbmRpbmcgb24gTXV0ZVRvZ2dsZSBhbmQgVm9sdW1lQ29udHJvbCBzdGF0ZVxuICAgKlxuICAgKiBAbGlzdGVucyBQbGF5ZXIjbG9hZHN0YXJ0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnZvbHVtZVBhbmVsU3RhdGVfID0gZnVuY3Rpb24gdm9sdW1lUGFuZWxTdGF0ZV8oKSB7XG4gICAgLy8gaGlkZSB2b2x1bWUgcGFuZWwgaWYgbmVpdGhlciB2b2x1bWUgY29udHJvbCBvciBtdXRlIHRvZ2dsZVxuICAgIC8vIGFyZSBkaXNwbGF5ZWRcbiAgICBpZiAodGhpcy52b2x1bWVDb250cm9sLmhhc0NsYXNzKCd2anMtaGlkZGVuJykgJiYgdGhpcy5tdXRlVG9nZ2xlLmhhc0NsYXNzKCd2anMtaGlkZGVuJykpIHtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgICB9IC8vIGlmIG9ubHkgbXV0ZSB0b2dnbGUgaXMgdmlzaWJsZSB3ZSBkb24ndCB3YW50XG4gICAgLy8gdm9sdW1lIHBhbmVsIGV4cGFuZGluZyB3aGVuIGhvdmVyZWQgb3IgYWN0aXZlXG5cblxuICAgIGlmICh0aGlzLnZvbHVtZUNvbnRyb2wuaGFzQ2xhc3MoJ3Zqcy1oaWRkZW4nKSAmJiAhdGhpcy5tdXRlVG9nZ2xlLmhhc0NsYXNzKCd2anMtaGlkZGVuJykpIHtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1tdXRlLXRvZ2dsZS1vbmx5Jyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgJ3MgRE9NIGVsZW1lbnRcbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsKCkge1xuICAgIHZhciBvcmllbnRhdGlvbkNsYXNzID0gJ3Zqcy12b2x1bWUtcGFuZWwtaG9yaXpvbnRhbCc7XG5cbiAgICBpZiAoIXRoaXMub3B0aW9uc18uaW5saW5lKSB7XG4gICAgICBvcmllbnRhdGlvbkNsYXNzID0gJ3Zqcy12b2x1bWUtcGFuZWwtdmVydGljYWwnO1xuICAgIH1cblxuICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6IFwidmpzLXZvbHVtZS1wYW5lbCB2anMtY29udHJvbCBcIiArIG9yaWVudGF0aW9uQ2xhc3NcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gVm9sdW1lUGFuZWw7XG59KENvbXBvbmVudCk7XG4vKipcbiAqIERlZmF1bHQgb3B0aW9ucyBmb3IgdGhlIGBWb2x1bWVDb250cm9sYFxuICpcbiAqIEB0eXBlIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5cblxuVm9sdW1lUGFuZWwucHJvdG90eXBlLm9wdGlvbnNfID0ge1xuICBjaGlsZHJlbjogWydtdXRlVG9nZ2xlJywgJ3ZvbHVtZUNvbnRyb2wnXVxufTtcbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnVm9sdW1lUGFuZWwnLCBWb2x1bWVQYW5lbCk7XG5cbi8qKlxuICogVGhlIE1lbnUgY29tcG9uZW50IGlzIHVzZWQgdG8gYnVpbGQgcG9wdXAgbWVudXMsIGluY2x1ZGluZyBzdWJ0aXRsZSBhbmRcbiAqIGNhcHRpb25zIHNlbGVjdGlvbiBtZW51cy5cbiAqXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuXG52YXIgTWVudSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHNMb29zZShNZW51LCBfQ29tcG9uZW50KTtcblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICogICAgICAgIHRoZSBwbGF5ZXIgdGhhdCB0aGlzIGNvbXBvbmVudCBzaG91bGQgYXR0YWNoIHRvXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgIE9iamVjdCBvZiBvcHRpb24gbmFtZXMgYW5kIHZhbHVlc1xuICAgKlxuICAgKi9cbiAgZnVuY3Rpb24gTWVudShwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG5cbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgX3RoaXMubWVudUJ1dHRvbl8gPSBvcHRpb25zLm1lbnVCdXR0b247XG4gICAgfVxuXG4gICAgX3RoaXMuZm9jdXNlZENoaWxkXyA9IC0xO1xuXG4gICAgX3RoaXMub24oJ2tleWRvd24nLCBfdGhpcy5oYW5kbGVLZXlQcmVzcyk7IC8vIEFsbCB0aGUgbWVudSBpdGVtIGluc3RhbmNlcyBzaGFyZSB0aGUgc2FtZSBibHVyIGhhbmRsZXIgcHJvdmlkZWQgYnkgdGhlIG1lbnUgY29udGFpbmVyLlxuXG5cbiAgICBfdGhpcy5ib3VuZEhhbmRsZUJsdXJfID0gYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMuaGFuZGxlQmx1cik7XG4gICAgX3RoaXMuYm91bmRIYW5kbGVUYXBDbGlja18gPSBiaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBfdGhpcy5oYW5kbGVUYXBDbGljayk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgZXZlbnQgbGlzdGVuZXJzIHRvIHRoZSB7QGxpbmsgTWVudUl0ZW19LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29tcG9uZW50XG4gICAqICAgICAgICBUaGUgaW5zdGFuY2Ugb2YgdGhlIGBNZW51SXRlbWAgdG8gYWRkIGxpc3RlbmVycyB0by5cbiAgICpcbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gTWVudS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmFkZEV2ZW50TGlzdGVuZXJGb3JJdGVtID0gZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lckZvckl0ZW0oY29tcG9uZW50KSB7XG4gICAgaWYgKCEoY29tcG9uZW50IGluc3RhbmNlb2YgQ29tcG9uZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMub24oY29tcG9uZW50LCAnYmx1cicsIHRoaXMuYm91bmRIYW5kbGVCbHVyXyk7XG4gICAgdGhpcy5vbihjb21wb25lbnQsIFsndGFwJywgJ2NsaWNrJ10sIHRoaXMuYm91bmRIYW5kbGVUYXBDbGlja18pO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzIGZyb20gdGhlIHtAbGluayBNZW51SXRlbX0uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb21wb25lbnRcbiAgICogICAgICAgIFRoZSBpbnN0YW5jZSBvZiB0aGUgYE1lbnVJdGVtYCB0byByZW1vdmUgbGlzdGVuZXJzLlxuICAgKlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5yZW1vdmVFdmVudExpc3RlbmVyRm9ySXRlbSA9IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXJGb3JJdGVtKGNvbXBvbmVudCkge1xuICAgIGlmICghKGNvbXBvbmVudCBpbnN0YW5jZW9mIENvbXBvbmVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm9mZihjb21wb25lbnQsICdibHVyJywgdGhpcy5ib3VuZEhhbmRsZUJsdXJfKTtcbiAgICB0aGlzLm9mZihjb21wb25lbnQsIFsndGFwJywgJ2NsaWNrJ10sIHRoaXMuYm91bmRIYW5kbGVUYXBDbGlja18pO1xuICB9XG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCBpbmRpcmVjdGx5IHdoZW4gdGhlIGNvbXBvbmVudCBoYXMgYmVlbiBhZGRlZFxuICAgKiBiZWZvcmUgdGhlIGNvbXBvbmVudCBhZGRzIHRvIHRoZSBuZXcgbWVudSBpbnN0YW5jZSBieSBgYWRkSXRlbWAuXG4gICAqIEluIHRoaXMgY2FzZSwgdGhlIG9yaWdpbmFsIG1lbnUgaW5zdGFuY2Ugd2lsbCByZW1vdmUgdGhlIGNvbXBvbmVudFxuICAgKiBieSBjYWxsaW5nIGByZW1vdmVDaGlsZGAuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb21wb25lbnRcbiAgICogICAgICAgIFRoZSBpbnN0YW5jZSBvZiB0aGUgYE1lbnVJdGVtYFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5yZW1vdmVDaGlsZCA9IGZ1bmN0aW9uIHJlbW92ZUNoaWxkKGNvbXBvbmVudCkge1xuICAgIGlmICh0eXBlb2YgY29tcG9uZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgY29tcG9uZW50ID0gdGhpcy5nZXRDaGlsZChjb21wb25lbnQpO1xuICAgIH1cblxuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lckZvckl0ZW0oY29tcG9uZW50KTtcblxuICAgIF9Db21wb25lbnQucHJvdG90eXBlLnJlbW92ZUNoaWxkLmNhbGwodGhpcywgY29tcG9uZW50KTtcbiAgfVxuICAvKipcbiAgICogQWRkIGEge0BsaW5rIE1lbnVJdGVtfSB0byB0aGUgbWVudS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R8c3RyaW5nfSBjb21wb25lbnRcbiAgICogICAgICAgIFRoZSBuYW1lIG9yIGluc3RhbmNlIG9mIHRoZSBgTWVudUl0ZW1gIHRvIGFkZC5cbiAgICpcbiAgICovXG4gIDtcblxuICBfcHJvdG8uYWRkSXRlbSA9IGZ1bmN0aW9uIGFkZEl0ZW0oY29tcG9uZW50KSB7XG4gICAgdmFyIGNoaWxkQ29tcG9uZW50ID0gdGhpcy5hZGRDaGlsZChjb21wb25lbnQpO1xuXG4gICAgaWYgKGNoaWxkQ29tcG9uZW50KSB7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJGb3JJdGVtKGNoaWxkQ29tcG9uZW50KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgYE1lbnVgcyBET00gZWxlbWVudC5cbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICB0aGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwkJDEoKSB7XG4gICAgdmFyIGNvbnRlbnRFbFR5cGUgPSB0aGlzLm9wdGlvbnNfLmNvbnRlbnRFbFR5cGUgfHwgJ3VsJztcbiAgICB0aGlzLmNvbnRlbnRFbF8gPSBjcmVhdGVFbChjb250ZW50RWxUeXBlLCB7XG4gICAgICBjbGFzc05hbWU6ICd2anMtbWVudS1jb250ZW50J1xuICAgIH0pO1xuICAgIHRoaXMuY29udGVudEVsXy5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnbWVudScpO1xuXG4gICAgdmFyIGVsID0gX0NvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgICAgYXBwZW5kOiB0aGlzLmNvbnRlbnRFbF8sXG4gICAgICBjbGFzc05hbWU6ICd2anMtbWVudSdcbiAgICB9KTtcblxuICAgIGVsLmFwcGVuZENoaWxkKHRoaXMuY29udGVudEVsXyk7IC8vIFByZXZlbnQgY2xpY2tzIGZyb20gYnViYmxpbmcgdXAuIE5lZWRlZCBmb3IgTWVudSBCdXR0b25zLFxuICAgIC8vIHdoZXJlIGEgY2xpY2sgb24gdGhlIHBhcmVudCBpcyBzaWduaWZpY2FudFxuXG4gICAgb24oZWwsICdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuICAgIHJldHVybiBlbDtcbiAgfTtcblxuICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5jb250ZW50RWxfID0gbnVsbDtcbiAgICB0aGlzLmJvdW5kSGFuZGxlQmx1cl8gPSBudWxsO1xuICAgIHRoaXMuYm91bmRIYW5kbGVUYXBDbGlja18gPSBudWxsO1xuXG4gICAgX0NvbXBvbmVudC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhIGBNZW51SXRlbWAgbG9zZXMgZm9jdXMuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYGJsdXJgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmUgY2FsbGVkLlxuICAgKlxuICAgKiBAbGlzdGVucyBibHVyXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZUJsdXIgPSBmdW5jdGlvbiBoYW5kbGVCbHVyKGV2ZW50KSB7XG4gICAgdmFyIHJlbGF0ZWRUYXJnZXQgPSBldmVudC5yZWxhdGVkVGFyZ2V0IHx8IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7IC8vIENsb3NlIG1lbnUgcG9wdXAgd2hlbiBhIHVzZXIgY2xpY2tzIG91dHNpZGUgdGhlIG1lbnVcblxuICAgIGlmICghdGhpcy5jaGlsZHJlbigpLnNvbWUoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBlbGVtZW50LmVsKCkgPT09IHJlbGF0ZWRUYXJnZXQ7XG4gICAgfSkpIHtcbiAgICAgIHZhciBidG4gPSB0aGlzLm1lbnVCdXR0b25fO1xuXG4gICAgICBpZiAoYnRuICYmIGJ0bi5idXR0b25QcmVzc2VkXyAmJiByZWxhdGVkVGFyZ2V0ICE9PSBidG4uZWwoKS5maXJzdENoaWxkKSB7XG4gICAgICAgIGJ0bi51bnByZXNzQnV0dG9uKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhIGBNZW51SXRlbWAgZ2V0cyBjbGlja2VkIG9yIHRhcHBlZC5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIFRoZSBgY2xpY2tgIG9yIGB0YXBgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmUgY2FsbGVkLlxuICAgKlxuICAgKiBAbGlzdGVucyBjbGljayx0YXBcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlVGFwQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVUYXBDbGljayhldmVudCkge1xuICAgIC8vIFVucHJlc3MgdGhlIGFzc29jaWF0ZWQgTWVudUJ1dHRvbiwgYW5kIG1vdmUgZm9jdXMgYmFjayB0byBpdFxuICAgIGlmICh0aGlzLm1lbnVCdXR0b25fKSB7XG4gICAgICB0aGlzLm1lbnVCdXR0b25fLnVucHJlc3NCdXR0b24oKTtcbiAgICAgIHZhciBjaGlsZENvbXBvbmVudHMgPSB0aGlzLmNoaWxkcmVuKCk7XG5cbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShjaGlsZENvbXBvbmVudHMpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGZvdW5kQ29tcG9uZW50ID0gY2hpbGRDb21wb25lbnRzLmZpbHRlcihmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQuZWwoKSA9PT0gZXZlbnQudGFyZ2V0O1xuICAgICAgfSlbMF07XG5cbiAgICAgIGlmICghZm91bmRDb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBkb24ndCBmb2N1cyBtZW51IGJ1dHRvbiBpZiBpdGVtIGlzIGEgY2FwdGlvbiBzZXR0aW5ncyBpdGVtXG4gICAgICAvLyBiZWNhdXNlIGZvY3VzIHdpbGwgbW92ZSBlbHNld2hlcmVcblxuXG4gICAgICBpZiAoZm91bmRDb21wb25lbnQubmFtZSgpICE9PSAnQ2FwdGlvblNldHRpbmdzTWVudUl0ZW0nKSB7XG4gICAgICAgIHRoaXMubWVudUJ1dHRvbl8uZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSBhIGBrZXlkb3duYCBldmVudCBvbiB0aGlzIG1lbnUuIFRoaXMgbGlzdGVuZXIgaXMgYWRkZWQgaW4gdGhlIGNvbnN0cnVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKiAgICAgICAgQSBga2V5ZG93bmAgZXZlbnQgdGhhdCBoYXBwZW5lZCBvbiB0aGUgbWVudS5cbiAgICpcbiAgICogQGxpc3RlbnMga2V5ZG93blxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVLZXlQcmVzcyA9IGZ1bmN0aW9uIGhhbmRsZUtleVByZXNzKGV2ZW50KSB7XG4gICAgLy8gTGVmdCBhbmQgRG93biBBcnJvd3NcbiAgICBpZiAoa2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnTGVmdCcpIHx8IGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ0Rvd24nKSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuc3RlcEZvcndhcmQoKTsgLy8gVXAgYW5kIFJpZ2h0IEFycm93c1xuICAgIH0gZWxzZSBpZiAoa2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnUmlnaHQnKSB8fCBrZXljb2RlLmlzRXZlbnRLZXkoZXZlbnQsICdVcCcpKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5zdGVwQmFjaygpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogTW92ZSB0byBuZXh0IChsb3dlcikgbWVudSBpdGVtIGZvciBrZXlib2FyZCB1c2Vycy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uc3RlcEZvcndhcmQgPSBmdW5jdGlvbiBzdGVwRm9yd2FyZCgpIHtcbiAgICB2YXIgc3RlcENoaWxkID0gMDtcblxuICAgIGlmICh0aGlzLmZvY3VzZWRDaGlsZF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgc3RlcENoaWxkID0gdGhpcy5mb2N1c2VkQ2hpbGRfICsgMTtcbiAgICB9XG5cbiAgICB0aGlzLmZvY3VzKHN0ZXBDaGlsZCk7XG4gIH1cbiAgLyoqXG4gICAqIE1vdmUgdG8gcHJldmlvdXMgKGhpZ2hlcikgbWVudSBpdGVtIGZvciBrZXlib2FyZCB1c2Vycy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uc3RlcEJhY2sgPSBmdW5jdGlvbiBzdGVwQmFjaygpIHtcbiAgICB2YXIgc3RlcENoaWxkID0gMDtcblxuICAgIGlmICh0aGlzLmZvY3VzZWRDaGlsZF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgc3RlcENoaWxkID0gdGhpcy5mb2N1c2VkQ2hpbGRfIC0gMTtcbiAgICB9XG5cbiAgICB0aGlzLmZvY3VzKHN0ZXBDaGlsZCk7XG4gIH1cbiAgLyoqXG4gICAqIFNldCBmb2N1cyBvbiBhIHtAbGluayBNZW51SXRlbX0gaW4gdGhlIGBNZW51YC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R8c3RyaW5nfSBbaXRlbT0wXVxuICAgKiAgICAgICAgSW5kZXggb2YgY2hpbGQgaXRlbSBzZXQgZm9jdXMgb24uXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmZvY3VzID0gZnVuY3Rpb24gZm9jdXMoaXRlbSkge1xuICAgIGlmIChpdGVtID09PSB2b2lkIDApIHtcbiAgICAgIGl0ZW0gPSAwO1xuICAgIH1cblxuICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW4oKS5zbGljZSgpO1xuICAgIHZhciBoYXZlVGl0bGUgPSBjaGlsZHJlbi5sZW5ndGggJiYgY2hpbGRyZW5bMF0uY2xhc3NOYW1lICYmIC92anMtbWVudS10aXRsZS8udGVzdChjaGlsZHJlblswXS5jbGFzc05hbWUpO1xuXG4gICAgaWYgKGhhdmVUaXRsZSkge1xuICAgICAgY2hpbGRyZW4uc2hpZnQoKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKGl0ZW0gPCAwKSB7XG4gICAgICAgIGl0ZW0gPSAwO1xuICAgICAgfSBlbHNlIGlmIChpdGVtID49IGNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICBpdGVtID0gY2hpbGRyZW4ubGVuZ3RoIC0gMTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5mb2N1c2VkQ2hpbGRfID0gaXRlbTtcbiAgICAgIGNoaWxkcmVuW2l0ZW1dLmVsXy5mb2N1cygpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gTWVudTtcbn0oQ29tcG9uZW50KTtcblxuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdNZW51JywgTWVudSk7XG5cbi8qKlxuICogQSBgTWVudUJ1dHRvbmAgY2xhc3MgZm9yIGFueSBwb3B1cCB7QGxpbmsgTWVudX0uXG4gKlxuICogQGV4dGVuZHMgQ29tcG9uZW50XG4gKi9cblxudmFyIE1lbnVCdXR0b24gPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzTG9vc2UoTWVudUJ1dHRvbiwgX0NvbXBvbmVudCk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgKiAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV1cbiAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAqL1xuICBmdW5jdGlvbiBNZW51QnV0dG9uKHBsYXllciwgb3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICBfdGhpcyA9IF9Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgX3RoaXMubWVudUJ1dHRvbl8gPSBuZXcgQnV0dG9uKHBsYXllciwgb3B0aW9ucyk7XG5cbiAgICBfdGhpcy5tZW51QnV0dG9uXy5jb250cm9sVGV4dChfdGhpcy5jb250cm9sVGV4dF8pO1xuXG4gICAgX3RoaXMubWVudUJ1dHRvbl8uZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS1oYXNwb3B1cCcsICd0cnVlJyk7IC8vIEFkZCBidWlsZENTU0NsYXNzIHZhbHVlcyB0byB0aGUgYnV0dG9uLCBub3QgdGhlIHdyYXBwZXJcblxuXG4gICAgdmFyIGJ1dHRvbkNsYXNzID0gQnV0dG9uLnByb3RvdHlwZS5idWlsZENTU0NsYXNzKCk7XG4gICAgX3RoaXMubWVudUJ1dHRvbl8uZWxfLmNsYXNzTmFtZSA9IF90aGlzLmJ1aWxkQ1NTQ2xhc3MoKSArICcgJyArIGJ1dHRvbkNsYXNzO1xuXG4gICAgX3RoaXMubWVudUJ1dHRvbl8ucmVtb3ZlQ2xhc3MoJ3Zqcy1jb250cm9sJyk7XG5cbiAgICBfdGhpcy5hZGRDaGlsZChfdGhpcy5tZW51QnV0dG9uXyk7XG5cbiAgICBfdGhpcy51cGRhdGUoKTtcblxuICAgIF90aGlzLmVuYWJsZWRfID0gdHJ1ZTtcblxuICAgIF90aGlzLm9uKF90aGlzLm1lbnVCdXR0b25fLCAndGFwJywgX3RoaXMuaGFuZGxlQ2xpY2spO1xuXG4gICAgX3RoaXMub24oX3RoaXMubWVudUJ1dHRvbl8sICdjbGljaycsIF90aGlzLmhhbmRsZUNsaWNrKTtcblxuICAgIF90aGlzLm9uKF90aGlzLm1lbnVCdXR0b25fLCAnZm9jdXMnLCBfdGhpcy5oYW5kbGVGb2N1cyk7XG5cbiAgICBfdGhpcy5vbihfdGhpcy5tZW51QnV0dG9uXywgJ2JsdXInLCBfdGhpcy5oYW5kbGVCbHVyKTtcblxuICAgIF90aGlzLm9uKF90aGlzLm1lbnVCdXR0b25fLCAnbW91c2VlbnRlcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLm1lbnUuc2hvdygpO1xuICAgIH0pO1xuXG4gICAgX3RoaXMub24oJ2tleWRvd24nLCBfdGhpcy5oYW5kbGVTdWJtZW51S2V5UHJlc3MpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIG1lbnUgYmFzZWQgb24gdGhlIGN1cnJlbnQgc3RhdGUgb2YgaXRzIGl0ZW1zLlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBNZW51QnV0dG9uLnByb3RvdHlwZTtcblxuICBfcHJvdG8udXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIHZhciBtZW51ID0gdGhpcy5jcmVhdGVNZW51KCk7XG5cbiAgICBpZiAodGhpcy5tZW51KSB7XG4gICAgICB0aGlzLm1lbnUuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5yZW1vdmVDaGlsZCh0aGlzLm1lbnUpO1xuICAgIH1cblxuICAgIHRoaXMubWVudSA9IG1lbnU7XG4gICAgdGhpcy5hZGRDaGlsZChtZW51KTtcbiAgICAvKipcbiAgICAgKiBUcmFjayB0aGUgc3RhdGUgb2YgdGhlIG1lbnUgYnV0dG9uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgdGhpcy5idXR0b25QcmVzc2VkXyA9IGZhbHNlO1xuICAgIHRoaXMubWVudUJ1dHRvbl8uZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuXG4gICAgaWYgKHRoaXMuaXRlbXMgJiYgdGhpcy5pdGVtcy5sZW5ndGggPD0gdGhpcy5oaWRlVGhyZXNob2xkXykge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2hvdygpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBtZW51IGFuZCBhZGQgYWxsIGl0ZW1zIHRvIGl0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtNZW51fVxuICAgKiAgICAgICAgIFRoZSBjb25zdHJ1Y3RlZCBtZW51XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNyZWF0ZU1lbnUgPSBmdW5jdGlvbiBjcmVhdGVNZW51KCkge1xuICAgIHZhciBtZW51ID0gbmV3IE1lbnUodGhpcy5wbGF5ZXJfLCB7XG4gICAgICBtZW51QnV0dG9uOiB0aGlzXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogSGlkZSB0aGUgbWVudSBpZiB0aGUgbnVtYmVyIG9mIGl0ZW1zIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGlzIHRocmVzaG9sZC4gVGhpcyBkZWZhdWx0c1xuICAgICAqIHRvIDAgYW5kIHdoZW5ldmVyIHdlIGFkZCBpdGVtcyB3aGljaCBjYW4gYmUgaGlkZGVuIHRvIHRoZSBtZW51IHdlJ2xsIGluY3JlbWVudCBpdC4gV2UgbGlzdFxuICAgICAqIGl0IGhlcmUgYmVjYXVzZSBldmVyeSB0aW1lIHdlIHJ1biBgY3JlYXRlTWVudWAgd2UgbmVlZCB0byByZXNldCB0aGUgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge051bWJlcn1cbiAgICAgKi9cblxuICAgIHRoaXMuaGlkZVRocmVzaG9sZF8gPSAwOyAvLyBBZGQgYSB0aXRsZSBsaXN0IGl0ZW0gdG8gdGhlIHRvcFxuXG4gICAgaWYgKHRoaXMub3B0aW9uc18udGl0bGUpIHtcbiAgICAgIHZhciB0aXRsZUVsID0gY3JlYXRlRWwoJ2xpJywge1xuICAgICAgICBjbGFzc05hbWU6ICd2anMtbWVudS10aXRsZScsXG4gICAgICAgIGlubmVySFRNTDogdG9UaXRsZUNhc2UodGhpcy5vcHRpb25zXy50aXRsZSksXG4gICAgICAgIHRhYkluZGV4OiAtMVxuICAgICAgfSk7XG4gICAgICB0aGlzLmhpZGVUaHJlc2hvbGRfICs9IDE7XG4gICAgICB2YXIgdGl0bGVDb21wb25lbnQgPSBuZXcgQ29tcG9uZW50KHRoaXMucGxheWVyXywge1xuICAgICAgICBlbDogdGl0bGVFbFxuICAgICAgfSk7XG4gICAgICBtZW51LmFkZEl0ZW0odGl0bGVDb21wb25lbnQpO1xuICAgIH1cblxuICAgIHRoaXMuaXRlbXMgPSB0aGlzLmNyZWF0ZUl0ZW1zKCk7XG5cbiAgICBpZiAodGhpcy5pdGVtcykge1xuICAgICAgLy8gQWRkIG1lbnUgaXRlbXMgdG8gdGhlIG1lbnVcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBtZW51LmFkZEl0ZW0odGhpcy5pdGVtc1tpXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbnU7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgbGlzdCBvZiBtZW51IGl0ZW1zLiBTcGVjaWZpYyB0byBlYWNoIHN1YmNsYXNzLlxuICAgKlxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3JlYXRlSXRlbXMgPSBmdW5jdGlvbiBjcmVhdGVJdGVtcygpIHt9XG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGBNZW51QnV0dG9uc2BzIERPTSBlbGVtZW50LlxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgZ2V0cyBjcmVhdGVkLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsJCQxKCkge1xuICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6IHRoaXMuYnVpbGRXcmFwcGVyQ1NTQ2xhc3MoKVxuICAgIH0sIHt9KTtcbiAgfVxuICAvKipcbiAgICogQWxsb3cgc3ViIGNvbXBvbmVudHMgdG8gc3RhY2sgQ1NTIGNsYXNzIG5hbWVzIGZvciB0aGUgd3JhcHBlciBlbGVtZW50XG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBUaGUgY29uc3RydWN0ZWQgd3JhcHBlciBET00gYGNsYXNzTmFtZWBcbiAgICovXG4gIDtcblxuICBfcHJvdG8uYnVpbGRXcmFwcGVyQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZFdyYXBwZXJDU1NDbGFzcygpIHtcbiAgICB2YXIgbWVudUJ1dHRvbkNsYXNzID0gJ3Zqcy1tZW51LWJ1dHRvbic7IC8vIElmIHRoZSBpbmxpbmUgb3B0aW9uIGlzIHBhc3NlZCwgd2Ugd2FudCB0byB1c2UgZGlmZmVyZW50IHN0eWxlcyBhbHRvZ2V0aGVyLlxuXG4gICAgaWYgKHRoaXMub3B0aW9uc18uaW5saW5lID09PSB0cnVlKSB7XG4gICAgICBtZW51QnV0dG9uQ2xhc3MgKz0gJy1pbmxpbmUnO1xuICAgIH0gZWxzZSB7XG4gICAgICBtZW51QnV0dG9uQ2xhc3MgKz0gJy1wb3B1cCc7XG4gICAgfSAvLyBUT0RPOiBGaXggdGhlIENTUyBzbyB0aGF0IHRoaXMgaXNuJ3QgbmVjZXNzYXJ5XG5cblxuICAgIHZhciBidXR0b25DbGFzcyA9IEJ1dHRvbi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcygpO1xuICAgIHJldHVybiBcInZqcy1tZW51LWJ1dHRvbiBcIiArIG1lbnVCdXR0b25DbGFzcyArIFwiIFwiICsgYnV0dG9uQ2xhc3MgKyBcIiBcIiArIF9Db21wb25lbnQucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgfVxuICAvKipcbiAgICogQnVpbGRzIHRoZSBkZWZhdWx0IERPTSBgY2xhc3NOYW1lYC5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiAgICAgICAgIFRoZSBET00gYGNsYXNzTmFtZWAgZm9yIHRoaXMgb2JqZWN0LlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRDU1NDbGFzcygpIHtcbiAgICB2YXIgbWVudUJ1dHRvbkNsYXNzID0gJ3Zqcy1tZW51LWJ1dHRvbic7IC8vIElmIHRoZSBpbmxpbmUgb3B0aW9uIGlzIHBhc3NlZCwgd2Ugd2FudCB0byB1c2UgZGlmZmVyZW50IHN0eWxlcyBhbHRvZ2V0aGVyLlxuXG4gICAgaWYgKHRoaXMub3B0aW9uc18uaW5saW5lID09PSB0cnVlKSB7XG4gICAgICBtZW51QnV0dG9uQ2xhc3MgKz0gJy1pbmxpbmUnO1xuICAgIH0gZWxzZSB7XG4gICAgICBtZW51QnV0dG9uQ2xhc3MgKz0gJy1wb3B1cCc7XG4gICAgfVxuXG4gICAgcmV0dXJuIFwidmpzLW1lbnUtYnV0dG9uIFwiICsgbWVudUJ1dHRvbkNsYXNzICsgXCIgXCIgKyBfQ29tcG9uZW50LnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBvciBzZXQgdGhlIGxvY2FsaXplZCBjb250cm9sIHRleHQgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGFjY2Vzc2liaWxpdHkuXG4gICAqXG4gICAqID4gTk9URTogVGhpcyB3aWxsIGNvbWUgZnJvbSB0aGUgaW50ZXJuYWwgYG1lbnVCdXR0b25fYCBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3RleHRdXG4gICAqICAgICAgICBDb250cm9sIHRleHQgZm9yIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gW2VsPXRoaXMubWVudUJ1dHRvbl8uZWwoKV1cbiAgICogICAgICAgIEVsZW1lbnQgdG8gc2V0IHRoZSB0aXRsZSBvbi5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiAgICAgICAgIC0gVGhlIGNvbnRyb2wgdGV4dCB3aGVuIGdldHRpbmdcbiAgICovXG4gIDtcblxuICBfcHJvdG8uY29udHJvbFRleHQgPSBmdW5jdGlvbiBjb250cm9sVGV4dCh0ZXh0LCBlbCkge1xuICAgIGlmIChlbCA9PT0gdm9pZCAwKSB7XG4gICAgICBlbCA9IHRoaXMubWVudUJ1dHRvbl8uZWwoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5tZW51QnV0dG9uXy5jb250cm9sVGV4dCh0ZXh0LCBlbCk7XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSBhIGNsaWNrIG9uIGEgYE1lbnVCdXR0b25gLlxuICAgKiBTZWUge0BsaW5rIENsaWNrYWJsZUNvbXBvbmVudCNoYW5kbGVDbGlja30gZm9yIGluc3RhbmNlcyB3aGVyZSB0aGlzIGlzIGNhbGxlZC5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIFRoZSBga2V5ZG93bmAsIGB0YXBgLCBvciBgY2xpY2tgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmVcbiAgICogICAgICAgIGNhbGxlZC5cbiAgICpcbiAgICogQGxpc3RlbnMgdGFwXG4gICAqIEBsaXN0ZW5zIGNsaWNrXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZUNsaWNrID0gZnVuY3Rpb24gaGFuZGxlQ2xpY2soZXZlbnQpIHtcbiAgICBpZiAodGhpcy5idXR0b25QcmVzc2VkXykge1xuICAgICAgdGhpcy51bnByZXNzQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucHJlc3NCdXR0b24oKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgZm9jdXMgdG8gdGhlIGFjdHVhbCBidXR0b24sIG5vdCB0byB0aGlzIGVsZW1lbnRcbiAgICovXG4gIDtcblxuICBfcHJvdG8uZm9jdXMgPSBmdW5jdGlvbiBmb2N1cygpIHtcbiAgICB0aGlzLm1lbnVCdXR0b25fLmZvY3VzKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgZm9jdXMgZnJvbSB0aGUgYWN0dWFsIGJ1dHRvbiwgbm90IHRoaXMgZWxlbWVudFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5ibHVyID0gZnVuY3Rpb24gYmx1cigpIHtcbiAgICB0aGlzLm1lbnVCdXR0b25fLmJsdXIoKTtcbiAgfVxuICAvKipcbiAgICogVGhpcyBnZXRzIGNhbGxlZCB3aGVuIGEgYE1lbnVCdXR0b25gIGdhaW5zIGZvY3VzIHZpYSBhIGBmb2N1c2AgZXZlbnQuXG4gICAqIFR1cm5zIG9uIGxpc3RlbmluZyBmb3IgYGtleWRvd25gIGV2ZW50cy4gV2hlbiB0aGV5IGhhcHBlbiBpdFxuICAgKiBjYWxscyBgdGhpcy5oYW5kbGVLZXlQcmVzc2AuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYGZvY3VzYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZC5cbiAgICpcbiAgICogQGxpc3RlbnMgZm9jdXNcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlRm9jdXMgPSBmdW5jdGlvbiBoYW5kbGVGb2N1cygpIHtcbiAgICBvbihkb2N1bWVudCwgJ2tleWRvd24nLCBiaW5kKHRoaXMsIHRoaXMuaGFuZGxlS2V5UHJlc3MpKTtcbiAgfVxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gYSBgTWVudUJ1dHRvbmAgbG9zZXMgZm9jdXMuIFR1cm5zIG9mZiB0aGUgbGlzdGVuZXIgZm9yXG4gICAqIGBrZXlkb3duYCBldmVudHMuIFdoaWNoIFN0b3BzIGB0aGlzLmhhbmRsZUtleVByZXNzYCBmcm9tIGdldHRpbmcgY2FsbGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKiAgICAgICAgVGhlIGBibHVyYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZC5cbiAgICpcbiAgICogQGxpc3RlbnMgYmx1clxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVCbHVyID0gZnVuY3Rpb24gaGFuZGxlQmx1cigpIHtcbiAgICBvZmYoZG9jdW1lbnQsICdrZXlkb3duJywgYmluZCh0aGlzLCB0aGlzLmhhbmRsZUtleVByZXNzKSk7XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSB0YWIsIGVzY2FwZSwgZG93biBhcnJvdywgYW5kIHVwIGFycm93IGtleXMgZm9yIGBNZW51QnV0dG9uYC4gU2VlXG4gICAqIHtAbGluayBDbGlja2FibGVDb21wb25lbnQjaGFuZGxlS2V5UHJlc3N9IGZvciBpbnN0YW5jZXMgd2hlcmUgdGhpcyBpcyBjYWxsZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYGtleWRvd25gIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmUgY2FsbGVkLlxuICAgKlxuICAgKiBAbGlzdGVucyBrZXlkb3duXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZUtleVByZXNzID0gZnVuY3Rpb24gaGFuZGxlS2V5UHJlc3MoZXZlbnQpIHtcbiAgICAvLyBFc2NhcGUgb3IgVGFiIHVucHJlc3MgdGhlICdidXR0b24nXG4gICAgaWYgKGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ0VzYycpIHx8IGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ1RhYicpKSB7XG4gICAgICBpZiAodGhpcy5idXR0b25QcmVzc2VkXykge1xuICAgICAgICB0aGlzLnVucHJlc3NCdXR0b24oKTtcbiAgICAgIH0gLy8gRG9uJ3QgcHJldmVudERlZmF1bHQgZm9yIFRhYiBrZXkgLSB3ZSBzdGlsbCB3YW50IHRvIGxvc2UgZm9jdXNcblxuXG4gICAgICBpZiAoIWtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ1RhYicpKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIFNldCBmb2N1cyBiYWNrIHRvIHRoZSBtZW51IGJ1dHRvbidzIGJ1dHRvblxuXG4gICAgICAgIHRoaXMubWVudUJ1dHRvbl8uZm9jdXMoKTtcbiAgICAgIH0gLy8gVXAgQXJyb3cgb3IgRG93biBBcnJvdyBhbHNvICdwcmVzcycgdGhlIGJ1dHRvbiB0byBvcGVuIHRoZSBtZW51XG5cbiAgICB9IGVsc2UgaWYgKGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ1VwJykgfHwga2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnRG93bicpKSB7XG4gICAgICBpZiAoIXRoaXMuYnV0dG9uUHJlc3NlZF8pIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5wcmVzc0J1dHRvbigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogSGFuZGxlIGEgYGtleWRvd25gIGV2ZW50IG9uIGEgc3ViLW1lbnUuIFRoZSBsaXN0ZW5lciBmb3IgdGhpcyBpcyBhZGRlZCBpblxuICAgKiB0aGUgY29uc3RydWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBLZXkgcHJlc3MgZXZlbnRcbiAgICpcbiAgICogQGxpc3RlbnMga2V5ZG93blxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVTdWJtZW51S2V5UHJlc3MgPSBmdW5jdGlvbiBoYW5kbGVTdWJtZW51S2V5UHJlc3MoZXZlbnQpIHtcbiAgICAvLyBFc2NhcGUgb3IgVGFiIHVucHJlc3MgdGhlICdidXR0b24nXG4gICAgaWYgKGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ0VzYycpIHx8IGtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ1RhYicpKSB7XG4gICAgICBpZiAodGhpcy5idXR0b25QcmVzc2VkXykge1xuICAgICAgICB0aGlzLnVucHJlc3NCdXR0b24oKTtcbiAgICAgIH0gLy8gRG9uJ3QgcHJldmVudERlZmF1bHQgZm9yIFRhYiBrZXkgLSB3ZSBzdGlsbCB3YW50IHRvIGxvc2UgZm9jdXNcblxuXG4gICAgICBpZiAoIWtleWNvZGUuaXNFdmVudEtleShldmVudCwgJ1RhYicpKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIFNldCBmb2N1cyBiYWNrIHRvIHRoZSBtZW51IGJ1dHRvbidzIGJ1dHRvblxuXG4gICAgICAgIHRoaXMubWVudUJ1dHRvbl8uZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFB1dCB0aGUgY3VycmVudCBgTWVudUJ1dHRvbmAgaW50byBhIHByZXNzZWQgc3RhdGUuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnByZXNzQnV0dG9uID0gZnVuY3Rpb24gcHJlc3NCdXR0b24oKSB7XG4gICAgaWYgKHRoaXMuZW5hYmxlZF8pIHtcbiAgICAgIHRoaXMuYnV0dG9uUHJlc3NlZF8gPSB0cnVlO1xuICAgICAgdGhpcy5tZW51LnNob3coKTtcbiAgICAgIHRoaXMubWVudS5sb2NrU2hvd2luZygpO1xuICAgICAgdGhpcy5tZW51QnV0dG9uXy5lbF8uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTsgLy8gc2V0IHRoZSBmb2N1cyBpbnRvIHRoZSBzdWJtZW51LCBleGNlcHQgb24gaU9TIHdoZXJlIGl0IGlzIHJlc3VsdGluZyBpblxuICAgICAgLy8gdW5kZXNpcmVkIHNjcm9sbGluZyBiZWhhdmlvciB3aGVuIHRoZSBwbGF5ZXIgaXMgaW4gYW4gaWZyYW1lXG5cbiAgICAgIGlmIChJU19JT1MgJiYgaXNJbkZyYW1lKCkpIHtcbiAgICAgICAgLy8gUmV0dXJuIGVhcmx5IHNvIHRoYXQgdGhlIG1lbnUgaXNuJ3QgZm9jdXNlZFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMubWVudS5mb2N1cygpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVGFrZSB0aGUgY3VycmVudCBgTWVudUJ1dHRvbmAgb3V0IG9mIGEgcHJlc3NlZCBzdGF0ZS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8udW5wcmVzc0J1dHRvbiA9IGZ1bmN0aW9uIHVucHJlc3NCdXR0b24oKSB7XG4gICAgaWYgKHRoaXMuZW5hYmxlZF8pIHtcbiAgICAgIHRoaXMuYnV0dG9uUHJlc3NlZF8gPSBmYWxzZTtcbiAgICAgIHRoaXMubWVudS51bmxvY2tTaG93aW5nKCk7XG4gICAgICB0aGlzLm1lbnUuaGlkZSgpO1xuICAgICAgdGhpcy5tZW51QnV0dG9uXy5lbF8uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBEaXNhYmxlIHRoZSBgTWVudUJ1dHRvbmAuIERvbid0IGFsbG93IGl0IHRvIGJlIGNsaWNrZWQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmRpc2FibGUgPSBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgIHRoaXMudW5wcmVzc0J1dHRvbigpO1xuICAgIHRoaXMuZW5hYmxlZF8gPSBmYWxzZTtcbiAgICB0aGlzLmFkZENsYXNzKCd2anMtZGlzYWJsZWQnKTtcbiAgICB0aGlzLm1lbnVCdXR0b25fLmRpc2FibGUoKTtcbiAgfVxuICAvKipcbiAgICogRW5hYmxlIHRoZSBgTWVudUJ1dHRvbmAuIEFsbG93IGl0IHRvIGJlIGNsaWNrZWQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmVuYWJsZSA9IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICB0aGlzLmVuYWJsZWRfID0gdHJ1ZTtcbiAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtZGlzYWJsZWQnKTtcbiAgICB0aGlzLm1lbnVCdXR0b25fLmVuYWJsZSgpO1xuICB9O1xuXG4gIHJldHVybiBNZW51QnV0dG9uO1xufShDb21wb25lbnQpO1xuXG5Db21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ01lbnVCdXR0b24nLCBNZW51QnV0dG9uKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBjbGFzcyBmb3IgYnV0dG9ucyB0aGF0IHRvZ2dsZSBzcGVjaWZpYyAgdHJhY2sgdHlwZXMgKGUuZy4gc3VidGl0bGVzKS5cbiAqXG4gKiBAZXh0ZW5kcyBNZW51QnV0dG9uXG4gKi9cblxudmFyIFRyYWNrQnV0dG9uID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfTWVudUJ1dHRvbikge1xuICBfaW5oZXJpdHNMb29zZShUcmFja0J1dHRvbiwgX01lbnVCdXR0b24pO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgKi9cbiAgZnVuY3Rpb24gVHJhY2tCdXR0b24ocGxheWVyLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgdmFyIHRyYWNrcyA9IG9wdGlvbnMudHJhY2tzO1xuICAgIF90aGlzID0gX01lbnVCdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG5cbiAgICBpZiAoX3RoaXMuaXRlbXMubGVuZ3RoIDw9IDEpIHtcbiAgICAgIF90aGlzLmhpZGUoKTtcbiAgICB9XG5cbiAgICBpZiAoIXRyYWNrcykge1xuICAgICAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpO1xuICAgIH1cblxuICAgIHZhciB1cGRhdGVIYW5kbGVyID0gYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMudXBkYXRlKTtcbiAgICB0cmFja3MuYWRkRXZlbnRMaXN0ZW5lcigncmVtb3ZldHJhY2snLCB1cGRhdGVIYW5kbGVyKTtcbiAgICB0cmFja3MuYWRkRXZlbnRMaXN0ZW5lcignYWRkdHJhY2snLCB1cGRhdGVIYW5kbGVyKTtcblxuICAgIF90aGlzLnBsYXllcl8ub24oJ3JlYWR5JywgdXBkYXRlSGFuZGxlcik7XG5cbiAgICBfdGhpcy5wbGF5ZXJfLm9uKCdkaXNwb3NlJywgZnVuY3Rpb24gKCkge1xuICAgICAgdHJhY2tzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3JlbW92ZXRyYWNrJywgdXBkYXRlSGFuZGxlcik7XG4gICAgICB0cmFja3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkdHJhY2snLCB1cGRhdGVIYW5kbGVyKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHJldHVybiBUcmFja0J1dHRvbjtcbn0oTWVudUJ1dHRvbik7XG5cbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnVHJhY2tCdXR0b24nLCBUcmFja0J1dHRvbik7XG5cbi8qKlxuICogQGZpbGUgbWVudS1rZXlzLmpzXG4gKi9cblxuLyoqXG4gICogQWxsIGtleXMgdXNlZCBmb3Igb3BlcmF0aW9uIG9mIGEgbWVudSAoYE1lbnVCdXR0b25gLCBgTWVudWAsIGFuZCBgTWVudUl0ZW1gKVxuICAqIE5vdGUgdGhhdCAnRW50ZXInIGFuZCAnU3BhY2UnIGFyZSBub3QgaW5jbHVkZWQgaGVyZSAob3RoZXJ3aXNlIHRoZXkgd291bGRcbiAgKiBwcmV2ZW50IHRoZSBgTWVudUJ1dHRvbmAgYW5kIGBNZW51SXRlbWAgZnJvbSBiZWluZyBrZXlib2FyZC1jbGlja2FibGUpXG4gICogQHR5cGVkZWYgTWVudUtleXNcbiAgKiBAYXJyYXlcbiAgKi9cbnZhciBNZW51S2V5cyA9IFsnVGFiJywgJ0VzYycsICdVcCcsICdEb3duJywgJ1JpZ2h0JywgJ0xlZnQnXTtcblxuLyoqXG4gKiBUaGUgY29tcG9uZW50IGZvciBhIG1lbnUgaXRlbS4gYDxsaT5gXG4gKlxuICogQGV4dGVuZHMgQ2xpY2thYmxlQ29tcG9uZW50XG4gKi9cblxudmFyIE1lbnVJdGVtID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ2xpY2thYmxlQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0c0xvb3NlKE1lbnVJdGVtLCBfQ2xpY2thYmxlQ29tcG9uZW50KTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgKiAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV1cbiAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAqXG4gICAqL1xuICBmdW5jdGlvbiBNZW51SXRlbShwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9DbGlja2FibGVDb21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgX3RoaXMuc2VsZWN0YWJsZSA9IG9wdGlvbnMuc2VsZWN0YWJsZTtcbiAgICBfdGhpcy5pc1NlbGVjdGVkXyA9IG9wdGlvbnMuc2VsZWN0ZWQgfHwgZmFsc2U7XG4gICAgX3RoaXMubXVsdGlTZWxlY3RhYmxlID0gb3B0aW9ucy5tdWx0aVNlbGVjdGFibGU7XG5cbiAgICBfdGhpcy5zZWxlY3RlZChfdGhpcy5pc1NlbGVjdGVkXyk7XG5cbiAgICBpZiAoX3RoaXMuc2VsZWN0YWJsZSkge1xuICAgICAgaWYgKF90aGlzLm11bHRpU2VsZWN0YWJsZSkge1xuICAgICAgICBfdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdyb2xlJywgJ21lbnVpdGVtY2hlY2tib3gnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnbWVudWl0ZW1yYWRpbycpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBfdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdyb2xlJywgJ21lbnVpdGVtJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGBNZW51SXRlbSdzIERPTSBlbGVtZW50XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdHlwZT1saV1cbiAgICogICAgICAgIEVsZW1lbnQncyBub2RlIHR5cGUsIG5vdCBhY3R1YWxseSB1c2VkLCBhbHdheXMgc2V0IHRvIGBsaWAuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcHM9e31dXG4gICAqICAgICAgICBBbiBvYmplY3Qgb2YgcHJvcGVydGllcyB0aGF0IHNob3VsZCBiZSBzZXQgb24gdGhlIGVsZW1lbnRcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFthdHRycz17fV1cbiAgICogICAgICAgIEFuIG9iamVjdCBvZiBhdHRyaWJ1dGVzIHRoYXQgc2hvdWxkIGJlIHNldCBvbiB0aGUgZWxlbWVudFxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgZ2V0cyBjcmVhdGVkLlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBNZW51SXRlbS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwodHlwZSwgcHJvcHMsIGF0dHJzKSB7XG4gICAgLy8gVGhlIGNvbnRyb2wgaXMgdGV4dHVhbCwgbm90IGp1c3QgYW4gaWNvblxuICAgIHRoaXMubm9uSWNvbkNvbnRyb2wgPSB0cnVlO1xuICAgIHJldHVybiBfQ2xpY2thYmxlQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdsaScsIGFzc2lnbih7XG4gICAgICBjbGFzc05hbWU6ICd2anMtbWVudS1pdGVtJyxcbiAgICAgIGlubmVySFRNTDogXCI8c3BhbiBjbGFzcz1cXFwidmpzLW1lbnUtaXRlbS10ZXh0XFxcIj5cIiArIHRoaXMubG9jYWxpemUodGhpcy5vcHRpb25zXy5sYWJlbCkgKyBcIjwvc3Bhbj5cIixcbiAgICAgIHRhYkluZGV4OiAtMVxuICAgIH0sIHByb3BzKSwgYXR0cnMpO1xuICB9XG4gIC8qKlxuICAgKiBJZ25vcmUga2V5cyB3aGljaCBhcmUgdXNlZCBieSB0aGUgbWVudSwgYnV0IHBhc3MgYW55IG90aGVyIG9uZXMgdXAuIFNlZVxuICAgKiB7QGxpbmsgQ2xpY2thYmxlQ29tcG9uZW50I2hhbmRsZUtleVByZXNzfSBmb3IgaW5zdGFuY2VzIHdoZXJlIHRoaXMgaXMgY2FsbGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKiAgICAgICAgVGhlIGBrZXlkb3duYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZC5cbiAgICpcbiAgICogQGxpc3RlbnMga2V5ZG93blxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVLZXlQcmVzcyA9IGZ1bmN0aW9uIGhhbmRsZUtleVByZXNzKGV2ZW50KSB7XG4gICAgaWYgKCFNZW51S2V5cy5zb21lKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiBrZXljb2RlLmlzRXZlbnRLZXkoZXZlbnQsIGtleSk7XG4gICAgfSkpIHtcbiAgICAgIC8vIFBhc3Mga2V5cHJlc3MgaGFuZGxpbmcgdXAgZm9yIHVudXNlZCBrZXlzXG4gICAgICBfQ2xpY2thYmxlQ29tcG9uZW50LnByb3RvdHlwZS5oYW5kbGVLZXlQcmVzcy5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEFueSBjbGljayBvbiBhIGBNZW51SXRlbWAgcHV0cyBpdCBpbnRvIHRoZSBzZWxlY3RlZCBzdGF0ZS5cbiAgICogU2VlIHtAbGluayBDbGlja2FibGVDb21wb25lbnQjaGFuZGxlQ2xpY2t9IGZvciBpbnN0YW5jZXMgd2hlcmUgdGhpcyBpcyBjYWxsZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYGtleWRvd25gLCBgdGFwYCwgb3IgYGNsaWNrYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlXG4gICAqICAgICAgICBjYWxsZWQuXG4gICAqXG4gICAqIEBsaXN0ZW5zIHRhcFxuICAgKiBAbGlzdGVucyBjbGlja1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XG4gICAgdGhpcy5zZWxlY3RlZCh0cnVlKTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBzdGF0ZSBmb3IgdGhpcyBtZW51IGl0ZW0gYXMgc2VsZWN0ZWQgb3Igbm90LlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNlbGVjdGVkXG4gICAqICAgICAgICBpZiB0aGUgbWVudSBpdGVtIGlzIHNlbGVjdGVkIG9yIG5vdFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zZWxlY3RlZCA9IGZ1bmN0aW9uIHNlbGVjdGVkKF9zZWxlY3RlZCkge1xuICAgIGlmICh0aGlzLnNlbGVjdGFibGUpIHtcbiAgICAgIGlmIChfc2VsZWN0ZWQpIHtcbiAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLXNlbGVjdGVkJyk7XG4gICAgICAgIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS1jaGVja2VkJywgJ3RydWUnKTsgLy8gYXJpYS1jaGVja2VkIGlzbid0IGZ1bGx5IHN1cHBvcnRlZCBieSBicm93c2Vycy9zY3JlZW4gcmVhZGVycyxcbiAgICAgICAgLy8gc28gaW5kaWNhdGUgc2VsZWN0ZWQgc3RhdGUgdG8gc2NyZWVuIHJlYWRlciBpbiB0aGUgY29udHJvbCB0ZXh0LlxuXG4gICAgICAgIHRoaXMuY29udHJvbFRleHQoJywgc2VsZWN0ZWQnKTtcbiAgICAgICAgdGhpcy5pc1NlbGVjdGVkXyA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtc2VsZWN0ZWQnKTtcbiAgICAgICAgdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdhcmlhLWNoZWNrZWQnLCAnZmFsc2UnKTsgLy8gSW5kaWNhdGUgdW4tc2VsZWN0ZWQgc3RhdGUgdG8gc2NyZWVuIHJlYWRlclxuXG4gICAgICAgIHRoaXMuY29udHJvbFRleHQoJycpO1xuICAgICAgICB0aGlzLmlzU2VsZWN0ZWRfID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBNZW51SXRlbTtcbn0oQ2xpY2thYmxlQ29tcG9uZW50KTtcblxuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdNZW51SXRlbScsIE1lbnVJdGVtKTtcblxuLyoqXG4gKiBUaGUgc3BlY2lmaWMgbWVudSBpdGVtIHR5cGUgZm9yIHNlbGVjdGluZyBhIGxhbmd1YWdlIHdpdGhpbiBhIHRleHQgdHJhY2sga2luZFxuICpcbiAqIEBleHRlbmRzIE1lbnVJdGVtXG4gKi9cblxudmFyIFRleHRUcmFja01lbnVJdGVtID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfTWVudUl0ZW0pIHtcbiAgX2luaGVyaXRzTG9vc2UoVGV4dFRyYWNrTWVudUl0ZW0sIF9NZW51SXRlbSk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgKiAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAqL1xuICBmdW5jdGlvbiBUZXh0VHJhY2tNZW51SXRlbShwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICB2YXIgdHJhY2sgPSBvcHRpb25zLnRyYWNrO1xuICAgIHZhciB0cmFja3MgPSBwbGF5ZXIudGV4dFRyYWNrcygpOyAvLyBNb2RpZnkgb3B0aW9ucyBmb3IgcGFyZW50IE1lbnVJdGVtIGNsYXNzJ3MgaW5pdC5cblxuICAgIG9wdGlvbnMubGFiZWwgPSB0cmFjay5sYWJlbCB8fCB0cmFjay5sYW5ndWFnZSB8fCAnVW5rbm93bic7XG4gICAgb3B0aW9ucy5zZWxlY3RlZCA9IHRyYWNrLm1vZGUgPT09ICdzaG93aW5nJztcbiAgICBfdGhpcyA9IF9NZW51SXRlbS5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcbiAgICBfdGhpcy50cmFjayA9IHRyYWNrO1xuXG4gICAgdmFyIGNoYW5nZUhhbmRsZXIgPSBmdW5jdGlvbiBjaGFuZ2VIYW5kbGVyKCkge1xuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICB9XG5cbiAgICAgIF90aGlzLmhhbmRsZVRyYWNrc0NoYW5nZS5hcHBseShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgYXJncyk7XG4gICAgfTtcblxuICAgIHZhciBzZWxlY3RlZExhbmd1YWdlQ2hhbmdlSGFuZGxlciA9IGZ1bmN0aW9uIHNlbGVjdGVkTGFuZ3VhZ2VDaGFuZ2VIYW5kbGVyKCkge1xuICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMuaGFuZGxlU2VsZWN0ZWRMYW5ndWFnZUNoYW5nZS5hcHBseShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgYXJncyk7XG4gICAgfTtcblxuICAgIHBsYXllci5vbihbJ2xvYWRzdGFydCcsICd0ZXh0dHJhY2tjaGFuZ2UnXSwgY2hhbmdlSGFuZGxlcik7XG4gICAgdHJhY2tzLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGNoYW5nZUhhbmRsZXIpO1xuICAgIHRyYWNrcy5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3RlZGxhbmd1YWdlY2hhbmdlJywgc2VsZWN0ZWRMYW5ndWFnZUNoYW5nZUhhbmRsZXIpO1xuXG4gICAgX3RoaXMub24oJ2Rpc3Bvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBwbGF5ZXIub2ZmKFsnbG9hZHN0YXJ0JywgJ3RleHR0cmFja2NoYW5nZSddLCBjaGFuZ2VIYW5kbGVyKTtcbiAgICAgIHRyYWNrcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBjaGFuZ2VIYW5kbGVyKTtcbiAgICAgIHRyYWNrcy5yZW1vdmVFdmVudExpc3RlbmVyKCdzZWxlY3RlZGxhbmd1YWdlY2hhbmdlJywgc2VsZWN0ZWRMYW5ndWFnZUNoYW5nZUhhbmRsZXIpO1xuICAgIH0pOyAvLyBpT1M3IGRvZXNuJ3QgZGlzcGF0Y2ggY2hhbmdlIGV2ZW50cyB0byBUZXh0VHJhY2tMaXN0cyB3aGVuIGFuXG4gICAgLy8gYXNzb2NpYXRlZCB0cmFjaydzIG1vZGUgY2hhbmdlcy4gV2l0aG91dCBzb21ldGhpbmcgbGlrZVxuICAgIC8vIE9iamVjdC5vYnNlcnZlKCkgKGFsc28gbm90IHByZXNlbnQgb24gaU9TNyksIGl0J3Mgbm90XG4gICAgLy8gcG9zc2libGUgdG8gZGV0ZWN0IGNoYW5nZXMgdG8gdGhlIG1vZGUgYXR0cmlidXRlIGFuZCBwb2x5ZmlsbFxuICAgIC8vIHRoZSBjaGFuZ2UgZXZlbnQuIEFzIGEgcG9vciBzdWJzdGl0dXRlLCB3ZSBtYW51YWxseSBkaXNwYXRjaFxuICAgIC8vIGNoYW5nZSBldmVudHMgd2hlbmV2ZXIgdGhlIGNvbnRyb2xzIG1vZGlmeSB0aGUgbW9kZS5cblxuXG4gICAgaWYgKHRyYWNrcy5vbmNoYW5nZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YXIgZXZlbnQ7XG5cbiAgICAgIF90aGlzLm9uKFsndGFwJywgJ2NsaWNrJ10sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3ckMS5FdmVudCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAvLyBBbmRyb2lkIDIuMyB0aHJvd3MgYW4gSWxsZWdhbCBDb25zdHJ1Y3RvciBlcnJvciBmb3Igd2luZG93LkV2ZW50XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGV2ZW50ID0gbmV3IHdpbmRvdyQxLkV2ZW50KCdjaGFuZ2UnKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsvLyBjb250aW51ZSByZWdhcmRsZXNzIG9mIGVycm9yXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICAgIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICAgICAgZXZlbnQuaW5pdEV2ZW50KCdjaGFuZ2UnLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyYWNrcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgIH0pO1xuICAgIH0gLy8gc2V0IHRoZSBkZWZhdWx0IHN0YXRlIGJhc2VkIG9uIGN1cnJlbnQgdHJhY2tzXG5cblxuICAgIF90aGlzLmhhbmRsZVRyYWNrc0NoYW5nZSgpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBUaGlzIGdldHMgY2FsbGVkIHdoZW4gYW4gYFRleHRUcmFja01lbnVJdGVtYCBpcyBcImNsaWNrZWRcIi4gU2VlXG4gICAqIHtAbGluayBDbGlja2FibGVDb21wb25lbnR9IGZvciBtb3JlIGRldGFpbGVkIGluZm9ybWF0aW9uIG9uIHdoYXQgYSBjbGljayBjYW4gYmUuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYGtleWRvd25gLCBgdGFwYCwgb3IgYGNsaWNrYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlXG4gICAqICAgICAgICBjYWxsZWQuXG4gICAqXG4gICAqIEBsaXN0ZW5zIHRhcFxuICAgKiBAbGlzdGVucyBjbGlja1xuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBUZXh0VHJhY2tNZW51SXRlbS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmhhbmRsZUNsaWNrID0gZnVuY3Rpb24gaGFuZGxlQ2xpY2soZXZlbnQpIHtcbiAgICB2YXIgcmVmZXJlbmNlVHJhY2sgPSB0aGlzLnRyYWNrO1xuICAgIHZhciB0cmFja3MgPSB0aGlzLnBsYXllcl8udGV4dFRyYWNrcygpO1xuXG4gICAgX01lbnVJdGVtLnByb3RvdHlwZS5oYW5kbGVDbGljay5jYWxsKHRoaXMsIGV2ZW50KTtcblxuICAgIGlmICghdHJhY2tzKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBEZXRlcm1pbmUgdGhlIHJlbGV2YW50IGtpbmQocykgb2YgdHJhY2tzIGZvciB0aGlzIGNvbXBvbmVudCBhbmQgZmlsdGVyXG4gICAgLy8gb3V0IGVtcHR5IGtpbmRzLlxuXG5cbiAgICB2YXIga2luZHMgPSAocmVmZXJlbmNlVHJhY2sua2luZHMgfHwgW3JlZmVyZW5jZVRyYWNrLmtpbmRdKS5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHRyYWNrID0gdHJhY2tzW2ldOyAvLyBJZiB0aGUgdHJhY2sgZnJvbSB0aGUgdGV4dCB0cmFja3MgbGlzdCBpcyBub3Qgb2YgdGhlIHJpZ2h0IGtpbmQsXG4gICAgICAvLyBza2lwIGl0LiBXZSBkbyBub3Qgd2FudCB0byBhZmZlY3QgdHJhY2tzIG9mIGluY29tcGF0aWJsZSBraW5kKHMpLlxuXG4gICAgICBpZiAoa2luZHMuaW5kZXhPZih0cmFjay5raW5kKSA9PT0gLTEpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IC8vIElmIHRoaXMgdGV4dCB0cmFjayBpcyB0aGUgY29tcG9uZW50J3MgdHJhY2sgYW5kIGl0IGlzIG5vdCBzaG93aW5nLFxuICAgICAgLy8gc2V0IGl0IHRvIHNob3dpbmcuXG5cblxuICAgICAgaWYgKHRyYWNrID09PSByZWZlcmVuY2VUcmFjaykge1xuICAgICAgICBpZiAodHJhY2subW9kZSAhPT0gJ3Nob3dpbmcnKSB7XG4gICAgICAgICAgdHJhY2subW9kZSA9ICdzaG93aW5nJztcbiAgICAgICAgfSAvLyBJZiB0aGlzIHRleHQgdHJhY2sgaXMgbm90IHRoZSBjb21wb25lbnQncyB0cmFjayBhbmQgaXQgaXMgbm90XG4gICAgICAgIC8vIGRpc2FibGVkLCBzZXQgaXQgdG8gZGlzYWJsZWQuXG5cbiAgICAgIH0gZWxzZSBpZiAodHJhY2subW9kZSAhPT0gJ2Rpc2FibGVkJykge1xuICAgICAgICB0cmFjay5tb2RlID0gJ2Rpc2FibGVkJztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSB0ZXh0IHRyYWNrIGxpc3QgY2hhbmdlXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYGNoYW5nZWAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZSBjYWxsZWQuXG4gICAqXG4gICAqIEBsaXN0ZW5zIFRleHRUcmFja0xpc3QjY2hhbmdlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZVRyYWNrc0NoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZVRyYWNrc0NoYW5nZShldmVudCkge1xuICAgIHZhciBzaG91bGRCZVNlbGVjdGVkID0gdGhpcy50cmFjay5tb2RlID09PSAnc2hvd2luZyc7IC8vIFByZXZlbnQgcmVkdW5kYW50IHNlbGVjdGVkKCkgY2FsbHMgYmVjYXVzZSB0aGV5IG1heSBjYXVzZVxuICAgIC8vIHNjcmVlbiByZWFkZXJzIHRvIHJlYWQgdGhlIGFwcGVuZGVkIGNvbnRyb2wgdGV4dCB1bm5lY2Vzc2FyaWx5XG5cbiAgICBpZiAoc2hvdWxkQmVTZWxlY3RlZCAhPT0gdGhpcy5pc1NlbGVjdGVkXykge1xuICAgICAgdGhpcy5zZWxlY3RlZChzaG91bGRCZVNlbGVjdGVkKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZVNlbGVjdGVkTGFuZ3VhZ2VDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVTZWxlY3RlZExhbmd1YWdlQ2hhbmdlKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMudHJhY2subW9kZSA9PT0gJ3Nob3dpbmcnKSB7XG4gICAgICB2YXIgc2VsZWN0ZWRMYW5ndWFnZSA9IHRoaXMucGxheWVyXy5jYWNoZV8uc2VsZWN0ZWRMYW5ndWFnZTsgLy8gRG9uJ3QgcmVwbGFjZSB0aGUga2luZCBvZiB0cmFjayBhY3Jvc3MgdGhlIHNhbWUgbGFuZ3VhZ2VcblxuICAgICAgaWYgKHNlbGVjdGVkTGFuZ3VhZ2UgJiYgc2VsZWN0ZWRMYW5ndWFnZS5lbmFibGVkICYmIHNlbGVjdGVkTGFuZ3VhZ2UubGFuZ3VhZ2UgPT09IHRoaXMudHJhY2subGFuZ3VhZ2UgJiYgc2VsZWN0ZWRMYW5ndWFnZS5raW5kICE9PSB0aGlzLnRyYWNrLmtpbmQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnBsYXllcl8uY2FjaGVfLnNlbGVjdGVkTGFuZ3VhZ2UgPSB7XG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgIGxhbmd1YWdlOiB0aGlzLnRyYWNrLmxhbmd1YWdlLFxuICAgICAgICBraW5kOiB0aGlzLnRyYWNrLmtpbmRcbiAgICAgIH07XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAvLyByZW1vdmUgcmVmZXJlbmNlIHRvIHRyYWNrIG9iamVjdCBvbiBkaXNwb3NlXG4gICAgdGhpcy50cmFjayA9IG51bGw7XG5cbiAgICBfTWVudUl0ZW0ucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgfTtcblxuICByZXR1cm4gVGV4dFRyYWNrTWVudUl0ZW07XG59KE1lbnVJdGVtKTtcblxuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdUZXh0VHJhY2tNZW51SXRlbScsIFRleHRUcmFja01lbnVJdGVtKTtcblxuLyoqXG4gKiBBIHNwZWNpYWwgbWVudSBpdGVtIGZvciB0dXJuaW5nIG9mIGEgc3BlY2lmaWMgdHlwZSBvZiB0ZXh0IHRyYWNrXG4gKlxuICogQGV4dGVuZHMgVGV4dFRyYWNrTWVudUl0ZW1cbiAqL1xuXG52YXIgT2ZmVGV4dFRyYWNrTWVudUl0ZW0gPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9UZXh0VHJhY2tNZW51SXRlbSkge1xuICBfaW5oZXJpdHNMb29zZShPZmZUZXh0VHJhY2tNZW51SXRlbSwgX1RleHRUcmFja01lbnVJdGVtKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICovXG4gIGZ1bmN0aW9uIE9mZlRleHRUcmFja01lbnVJdGVtKHBsYXllciwgb3B0aW9ucykge1xuICAgIC8vIENyZWF0ZSBwc2V1ZG8gdHJhY2sgaW5mb1xuICAgIC8vIFJlcXVpcmVzIG9wdGlvbnNbJ2tpbmQnXVxuICAgIG9wdGlvbnMudHJhY2sgPSB7XG4gICAgICBwbGF5ZXI6IHBsYXllcixcbiAgICAgIGtpbmQ6IG9wdGlvbnMua2luZCxcbiAgICAgIGtpbmRzOiBvcHRpb25zLmtpbmRzLFxuICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgICBtb2RlOiAnZGlzYWJsZWQnXG4gICAgfTtcblxuICAgIGlmICghb3B0aW9ucy5raW5kcykge1xuICAgICAgb3B0aW9ucy5raW5kcyA9IFtvcHRpb25zLmtpbmRdO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmxhYmVsKSB7XG4gICAgICBvcHRpb25zLnRyYWNrLmxhYmVsID0gb3B0aW9ucy5sYWJlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0aW9ucy50cmFjay5sYWJlbCA9IG9wdGlvbnMua2luZHMuam9pbignIGFuZCAnKSArICcgb2ZmJztcbiAgICB9IC8vIE1lbnVJdGVtIGlzIHNlbGVjdGFibGVcblxuXG4gICAgb3B0aW9ucy5zZWxlY3RhYmxlID0gdHJ1ZTsgLy8gTWVudUl0ZW0gaXMgTk9UIG11bHRpU2VsZWN0YWJsZSAoaS5lLiBvbmx5IG9uZSBjYW4gYmUgbWFya2VkIFwic2VsZWN0ZWRcIiBhdCBhIHRpbWUpXG5cbiAgICBvcHRpb25zLm11bHRpU2VsZWN0YWJsZSA9IGZhbHNlO1xuICAgIHJldHVybiBfVGV4dFRyYWNrTWVudUl0ZW0uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSB0ZXh0IHRyYWNrIGNoYW5nZVxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKiAgICAgICAgVGhlIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gcnVuXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IE9mZlRleHRUcmFja01lbnVJdGVtLnByb3RvdHlwZTtcblxuICBfcHJvdG8uaGFuZGxlVHJhY2tzQ2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlVHJhY2tzQ2hhbmdlKGV2ZW50KSB7XG4gICAgdmFyIHRyYWNrcyA9IHRoaXMucGxheWVyKCkudGV4dFRyYWNrcygpO1xuICAgIHZhciBzaG91bGRCZVNlbGVjdGVkID0gdHJ1ZTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdHJhY2tzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIHRyYWNrID0gdHJhY2tzW2ldO1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zXy5raW5kcy5pbmRleE9mKHRyYWNrLmtpbmQpID4gLTEgJiYgdHJhY2subW9kZSA9PT0gJ3Nob3dpbmcnKSB7XG4gICAgICAgIHNob3VsZEJlU2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSAvLyBQcmV2ZW50IHJlZHVuZGFudCBzZWxlY3RlZCgpIGNhbGxzIGJlY2F1c2UgdGhleSBtYXkgY2F1c2VcbiAgICAvLyBzY3JlZW4gcmVhZGVycyB0byByZWFkIHRoZSBhcHBlbmRlZCBjb250cm9sIHRleHQgdW5uZWNlc3NhcmlseVxuXG5cbiAgICBpZiAoc2hvdWxkQmVTZWxlY3RlZCAhPT0gdGhpcy5pc1NlbGVjdGVkXykge1xuICAgICAgdGhpcy5zZWxlY3RlZChzaG91bGRCZVNlbGVjdGVkKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZVNlbGVjdGVkTGFuZ3VhZ2VDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVTZWxlY3RlZExhbmd1YWdlQ2hhbmdlKGV2ZW50KSB7XG4gICAgdmFyIHRyYWNrcyA9IHRoaXMucGxheWVyKCkudGV4dFRyYWNrcygpO1xuICAgIHZhciBhbGxIaWRkZW4gPSB0cnVlO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0cmFja3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgdHJhY2sgPSB0cmFja3NbaV07XG5cbiAgICAgIGlmIChbJ2NhcHRpb25zJywgJ2Rlc2NyaXB0aW9ucycsICdzdWJ0aXRsZXMnXS5pbmRleE9mKHRyYWNrLmtpbmQpID4gLTEgJiYgdHJhY2subW9kZSA9PT0gJ3Nob3dpbmcnKSB7XG4gICAgICAgIGFsbEhpZGRlbiA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYWxsSGlkZGVuKSB7XG4gICAgICB0aGlzLnBsYXllcl8uY2FjaGVfLnNlbGVjdGVkTGFuZ3VhZ2UgPSB7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gT2ZmVGV4dFRyYWNrTWVudUl0ZW07XG59KFRleHRUcmFja01lbnVJdGVtKTtcblxuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdPZmZUZXh0VHJhY2tNZW51SXRlbScsIE9mZlRleHRUcmFja01lbnVJdGVtKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBjbGFzcyBmb3IgYnV0dG9ucyB0aGF0IHRvZ2dsZSBzcGVjaWZpYyB0ZXh0IHRyYWNrIHR5cGVzIChlLmcuIHN1YnRpdGxlcylcbiAqXG4gKiBAZXh0ZW5kcyBNZW51QnV0dG9uXG4gKi9cblxudmFyIFRleHRUcmFja0J1dHRvbiA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX1RyYWNrQnV0dG9uKSB7XG4gIF9pbmhlcml0c0xvb3NlKFRleHRUcmFja0J1dHRvbiwgX1RyYWNrQnV0dG9uKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICovXG4gIGZ1bmN0aW9uIFRleHRUcmFja0J1dHRvbihwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgb3B0aW9ucy50cmFja3MgPSBwbGF5ZXIudGV4dFRyYWNrcygpO1xuICAgIHJldHVybiBfVHJhY2tCdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG1lbnUgaXRlbSBmb3IgZWFjaCB0ZXh0IHRyYWNrXG4gICAqXG4gICAqIEBwYXJhbSB7VGV4dFRyYWNrTWVudUl0ZW1bXX0gW2l0ZW1zPVtdXVxuICAgKiAgICAgICAgRXhpc3RpbmcgYXJyYXkgb2YgaXRlbXMgdG8gdXNlIGR1cmluZyBjcmVhdGlvblxuICAgKlxuICAgKiBAcmV0dXJuIHtUZXh0VHJhY2tNZW51SXRlbVtdfVxuICAgKiAgICAgICAgIEFycmF5IG9mIG1lbnUgaXRlbXMgdGhhdCB3ZXJlIGNyZWF0ZWRcbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gVGV4dFRyYWNrQnV0dG9uLnByb3RvdHlwZTtcblxuICBfcHJvdG8uY3JlYXRlSXRlbXMgPSBmdW5jdGlvbiBjcmVhdGVJdGVtcyhpdGVtcywgVHJhY2tNZW51SXRlbSkge1xuICAgIGlmIChpdGVtcyA9PT0gdm9pZCAwKSB7XG4gICAgICBpdGVtcyA9IFtdO1xuICAgIH1cblxuICAgIGlmIChUcmFja01lbnVJdGVtID09PSB2b2lkIDApIHtcbiAgICAgIFRyYWNrTWVudUl0ZW0gPSBUZXh0VHJhY2tNZW51SXRlbTtcbiAgICB9XG5cbiAgICAvLyBMYWJlbCBpcyBhbiBvdmVycmlkZSBmb3IgdGhlIFt0cmFja10gb2ZmIGxhYmVsXG4gICAgLy8gVVNlZCB0byBsb2NhbGlzZSBjYXB0aW9ucy9zdWJ0aXRsZXNcbiAgICB2YXIgbGFiZWw7XG5cbiAgICBpZiAodGhpcy5sYWJlbF8pIHtcbiAgICAgIGxhYmVsID0gdGhpcy5sYWJlbF8gKyBcIiBvZmZcIjtcbiAgICB9IC8vIEFkZCBhbiBPRkYgbWVudSBpdGVtIHRvIHR1cm4gYWxsIHRyYWNrcyBvZmZcblxuXG4gICAgaXRlbXMucHVzaChuZXcgT2ZmVGV4dFRyYWNrTWVudUl0ZW0odGhpcy5wbGF5ZXJfLCB7XG4gICAgICBraW5kczogdGhpcy5raW5kc18sXG4gICAgICBraW5kOiB0aGlzLmtpbmRfLFxuICAgICAgbGFiZWw6IGxhYmVsXG4gICAgfSkpO1xuICAgIHRoaXMuaGlkZVRocmVzaG9sZF8gKz0gMTtcbiAgICB2YXIgdHJhY2tzID0gdGhpcy5wbGF5ZXJfLnRleHRUcmFja3MoKTtcblxuICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLmtpbmRzXykpIHtcbiAgICAgIHRoaXMua2luZHNfID0gW3RoaXMua2luZF9dO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdHJhY2sgPSB0cmFja3NbaV07IC8vIG9ubHkgYWRkIHRyYWNrcyB0aGF0IGFyZSBvZiBhbiBhcHByb3ByaWF0ZSBraW5kIGFuZCBoYXZlIGEgbGFiZWxcblxuICAgICAgaWYgKHRoaXMua2luZHNfLmluZGV4T2YodHJhY2sua2luZCkgPiAtMSkge1xuICAgICAgICB2YXIgaXRlbSA9IG5ldyBUcmFja01lbnVJdGVtKHRoaXMucGxheWVyXywge1xuICAgICAgICAgIHRyYWNrOiB0cmFjayxcbiAgICAgICAgICAvLyBNZW51SXRlbSBpcyBzZWxlY3RhYmxlXG4gICAgICAgICAgc2VsZWN0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAvLyBNZW51SXRlbSBpcyBOT1QgbXVsdGlTZWxlY3RhYmxlIChpLmUuIG9ubHkgb25lIGNhbiBiZSBtYXJrZWQgXCJzZWxlY3RlZFwiIGF0IGEgdGltZSlcbiAgICAgICAgICBtdWx0aVNlbGVjdGFibGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBpdGVtLmFkZENsYXNzKFwidmpzLVwiICsgdHJhY2sua2luZCArIFwiLW1lbnUtaXRlbVwiKTtcbiAgICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaXRlbXM7XG4gIH07XG5cbiAgcmV0dXJuIFRleHRUcmFja0J1dHRvbjtcbn0oVHJhY2tCdXR0b24pO1xuXG5Db21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ1RleHRUcmFja0J1dHRvbicsIFRleHRUcmFja0J1dHRvbik7XG5cbi8qKlxuICogVGhlIGNoYXB0ZXIgdHJhY2sgbWVudSBpdGVtXG4gKlxuICogQGV4dGVuZHMgTWVudUl0ZW1cbiAqL1xuXG52YXIgQ2hhcHRlcnNUcmFja01lbnVJdGVtID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfTWVudUl0ZW0pIHtcbiAgX2luaGVyaXRzTG9vc2UoQ2hhcHRlcnNUcmFja01lbnVJdGVtLCBfTWVudUl0ZW0pO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgKi9cbiAgZnVuY3Rpb24gQ2hhcHRlcnNUcmFja01lbnVJdGVtKHBsYXllciwgb3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIHZhciB0cmFjayA9IG9wdGlvbnMudHJhY2s7XG4gICAgdmFyIGN1ZSA9IG9wdGlvbnMuY3VlO1xuICAgIHZhciBjdXJyZW50VGltZSA9IHBsYXllci5jdXJyZW50VGltZSgpOyAvLyBNb2RpZnkgb3B0aW9ucyBmb3IgcGFyZW50IE1lbnVJdGVtIGNsYXNzJ3MgaW5pdC5cblxuICAgIG9wdGlvbnMuc2VsZWN0YWJsZSA9IHRydWU7XG4gICAgb3B0aW9ucy5tdWx0aVNlbGVjdGFibGUgPSBmYWxzZTtcbiAgICBvcHRpb25zLmxhYmVsID0gY3VlLnRleHQ7XG4gICAgb3B0aW9ucy5zZWxlY3RlZCA9IGN1ZS5zdGFydFRpbWUgPD0gY3VycmVudFRpbWUgJiYgY3VycmVudFRpbWUgPCBjdWUuZW5kVGltZTtcbiAgICBfdGhpcyA9IF9NZW51SXRlbS5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcbiAgICBfdGhpcy50cmFjayA9IHRyYWNrO1xuICAgIF90aGlzLmN1ZSA9IGN1ZTtcbiAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKCdjdWVjaGFuZ2UnLCBiaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBfdGhpcy51cGRhdGUpKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhbiBgQ2hhcHRlcnNUcmFja01lbnVJdGVtYCBpcyBcImNsaWNrZWRcIi4gU2VlXG4gICAqIHtAbGluayBDbGlja2FibGVDb21wb25lbnR9IGZvciBtb3JlIGRldGFpbGVkIGluZm9ybWF0aW9uIG9uIHdoYXQgYSBjbGljayBjYW4gYmUuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IFtldmVudF1cbiAgICogICAgICAgIFRoZSBga2V5ZG93bmAsIGB0YXBgLCBvciBgY2xpY2tgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmVcbiAgICogICAgICAgIGNhbGxlZC5cbiAgICpcbiAgICogQGxpc3RlbnMgdGFwXG4gICAqIEBsaXN0ZW5zIGNsaWNrXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IENoYXB0ZXJzVHJhY2tNZW51SXRlbS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmhhbmRsZUNsaWNrID0gZnVuY3Rpb24gaGFuZGxlQ2xpY2soZXZlbnQpIHtcbiAgICBfTWVudUl0ZW0ucHJvdG90eXBlLmhhbmRsZUNsaWNrLmNhbGwodGhpcyk7XG5cbiAgICB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUodGhpcy5jdWUuc3RhcnRUaW1lKTtcbiAgICB0aGlzLnVwZGF0ZSh0aGlzLmN1ZS5zdGFydFRpbWUpO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgY2hhcHRlciBtZW51IGl0ZW1cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgKiAgICAgICAgVGhlIGBjdWVjaGFuZ2VgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gcnVuLlxuICAgKlxuICAgKiBAbGlzdGVucyBUZXh0VHJhY2sjY3VlY2hhbmdlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShldmVudCkge1xuICAgIHZhciBjdWUgPSB0aGlzLmN1ZTtcbiAgICB2YXIgY3VycmVudFRpbWUgPSB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUoKTsgLy8gdmpzLmxvZyhjdXJyZW50VGltZSwgY3VlLnN0YXJ0VGltZSk7XG5cbiAgICB0aGlzLnNlbGVjdGVkKGN1ZS5zdGFydFRpbWUgPD0gY3VycmVudFRpbWUgJiYgY3VycmVudFRpbWUgPCBjdWUuZW5kVGltZSk7XG4gIH07XG5cbiAgcmV0dXJuIENoYXB0ZXJzVHJhY2tNZW51SXRlbTtcbn0oTWVudUl0ZW0pO1xuXG5Db21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ0NoYXB0ZXJzVHJhY2tNZW51SXRlbScsIENoYXB0ZXJzVHJhY2tNZW51SXRlbSk7XG5cbi8qKlxuICogVGhlIGJ1dHRvbiBjb21wb25lbnQgZm9yIHRvZ2dsaW5nIGFuZCBzZWxlY3RpbmcgY2hhcHRlcnNcbiAqIENoYXB0ZXJzIGFjdCBtdWNoIGRpZmZlcmVudGx5IHRoYW4gb3RoZXIgdGV4dCB0cmFja3NcbiAqIEN1ZXMgYXJlIG5hdmlnYXRpb24gdnMuIG90aGVyIHRyYWNrcyBvZiBhbHRlcm5hdGl2ZSBsYW5ndWFnZXNcbiAqXG4gKiBAZXh0ZW5kcyBUZXh0VHJhY2tCdXR0b25cbiAqL1xuXG52YXIgQ2hhcHRlcnNCdXR0b24gPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9UZXh0VHJhY2tCdXR0b24pIHtcbiAgX2luaGVyaXRzTG9vc2UoQ2hhcHRlcnNCdXR0b24sIF9UZXh0VHJhY2tCdXR0b24pO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBvbmVudH5SZWFkeUNhbGxiYWNrfSBbcmVhZHldXG4gICAqICAgICAgICBUaGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoaXMgZnVuY3Rpb24gaXMgcmVhZHkuXG4gICAqL1xuICBmdW5jdGlvbiBDaGFwdGVyc0J1dHRvbihwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KSB7XG4gICAgcmV0dXJuIF9UZXh0VHJhY2tCdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KSB8fCB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBCdWlsZHMgdGhlIGRlZmF1bHQgRE9NIGBjbGFzc05hbWVgLlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIERPTSBgY2xhc3NOYW1lYCBmb3IgdGhpcyBvYmplY3QuXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IENoYXB0ZXJzQnV0dG9uLnByb3RvdHlwZTtcblxuICBfcHJvdG8uYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkQ1NTQ2xhc3MoKSB7XG4gICAgcmV0dXJuIFwidmpzLWNoYXB0ZXJzLWJ1dHRvbiBcIiArIF9UZXh0VHJhY2tCdXR0b24ucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgfTtcblxuICBfcHJvdG8uYnVpbGRXcmFwcGVyQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZFdyYXBwZXJDU1NDbGFzcygpIHtcbiAgICByZXR1cm4gXCJ2anMtY2hhcHRlcnMtYnV0dG9uIFwiICsgX1RleHRUcmFja0J1dHRvbi5wcm90b3R5cGUuYnVpbGRXcmFwcGVyQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBtZW51IGJhc2VkIG9uIHRoZSBjdXJyZW50IHN0YXRlIG9mIGl0cyBpdGVtcy5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgKiAgICAgICAgQW4gZXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhpcyBmdW5jdGlvbiB0byBydW4uXG4gICAqXG4gICAqIEBsaXN0ZW5zIFRleHRUcmFja0xpc3QjYWRkdHJhY2tcbiAgICogQGxpc3RlbnMgVGV4dFRyYWNrTGlzdCNyZW1vdmV0cmFja1xuICAgKiBAbGlzdGVucyBUZXh0VHJhY2tMaXN0I2NoYW5nZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZXZlbnQpIHtcbiAgICBpZiAoIXRoaXMudHJhY2tfIHx8IGV2ZW50ICYmIChldmVudC50eXBlID09PSAnYWRkdHJhY2snIHx8IGV2ZW50LnR5cGUgPT09ICdyZW1vdmV0cmFjaycpKSB7XG4gICAgICB0aGlzLnNldFRyYWNrKHRoaXMuZmluZENoYXB0ZXJzVHJhY2soKSk7XG4gICAgfVxuXG4gICAgX1RleHRUcmFja0J1dHRvbi5wcm90b3R5cGUudXBkYXRlLmNhbGwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHRyYWNrIGZvciB0aGUgY2hhcHRlcnMgYnV0dG9uLlxuICAgKlxuICAgKiBAcGFyYW0ge1RleHRUcmFja30gdHJhY2tcbiAgICogICAgICAgIFRoZSBuZXcgdHJhY2sgdG8gc2VsZWN0LiBOb3RoaW5nIHdpbGwgY2hhbmdlIGlmIHRoaXMgaXMgdGhlIGN1cnJlbnRseSBzZWxlY3RlZFxuICAgKiAgICAgICAgdHJhY2suXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnNldFRyYWNrID0gZnVuY3Rpb24gc2V0VHJhY2sodHJhY2spIHtcbiAgICBpZiAodGhpcy50cmFja18gPT09IHRyYWNrKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnVwZGF0ZUhhbmRsZXJfKSB7XG4gICAgICB0aGlzLnVwZGF0ZUhhbmRsZXJfID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKTtcbiAgICB9IC8vIGhlcmUgdGhpcy50cmFja18gcmVmZXJzIHRvIHRoZSBvbGQgdHJhY2sgaW5zdGFuY2VcblxuXG4gICAgaWYgKHRoaXMudHJhY2tfKSB7XG4gICAgICB2YXIgcmVtb3RlVGV4dFRyYWNrRWwgPSB0aGlzLnBsYXllcl8ucmVtb3RlVGV4dFRyYWNrRWxzKCkuZ2V0VHJhY2tFbGVtZW50QnlUcmFja18odGhpcy50cmFja18pO1xuXG4gICAgICBpZiAocmVtb3RlVGV4dFRyYWNrRWwpIHtcbiAgICAgICAgcmVtb3RlVGV4dFRyYWNrRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMudXBkYXRlSGFuZGxlcl8pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRyYWNrXyA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy50cmFja18gPSB0cmFjazsgLy8gaGVyZSB0aGlzLnRyYWNrXyByZWZlcnMgdG8gdGhlIG5ldyB0cmFjayBpbnN0YW5jZVxuXG4gICAgaWYgKHRoaXMudHJhY2tfKSB7XG4gICAgICB0aGlzLnRyYWNrXy5tb2RlID0gJ2hpZGRlbic7XG5cbiAgICAgIHZhciBfcmVtb3RlVGV4dFRyYWNrRWwgPSB0aGlzLnBsYXllcl8ucmVtb3RlVGV4dFRyYWNrRWxzKCkuZ2V0VHJhY2tFbGVtZW50QnlUcmFja18odGhpcy50cmFja18pO1xuXG4gICAgICBpZiAoX3JlbW90ZVRleHRUcmFja0VsKSB7XG4gICAgICAgIF9yZW1vdGVUZXh0VHJhY2tFbC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgdGhpcy51cGRhdGVIYW5kbGVyXyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBGaW5kIHRoZSB0cmFjayBvYmplY3QgdGhhdCBpcyBjdXJyZW50bHkgaW4gdXNlIGJ5IHRoaXMgQ2hhcHRlcnNCdXR0b25cbiAgICpcbiAgICogQHJldHVybiB7VGV4dFRyYWNrfHVuZGVmaW5lZH1cbiAgICogICAgICAgICBUaGUgY3VycmVudCB0cmFjayBvciB1bmRlZmluZWQgaWYgbm9uZSB3YXMgZm91bmQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmZpbmRDaGFwdGVyc1RyYWNrID0gZnVuY3Rpb24gZmluZENoYXB0ZXJzVHJhY2soKSB7XG4gICAgdmFyIHRyYWNrcyA9IHRoaXMucGxheWVyXy50ZXh0VHJhY2tzKCkgfHwgW107XG5cbiAgICBmb3IgKHZhciBpID0gdHJhY2tzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAvLyBXZSB3aWxsIGFsd2F5cyBjaG9vc2UgdGhlIGxhc3QgdHJhY2sgYXMgb3VyIGNoYXB0ZXJzVHJhY2tcbiAgICAgIHZhciB0cmFjayA9IHRyYWNrc1tpXTtcblxuICAgICAgaWYgKHRyYWNrLmtpbmQgPT09IHRoaXMua2luZF8pIHtcbiAgICAgICAgcmV0dXJuIHRyYWNrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBjYXB0aW9uIGZvciB0aGUgQ2hhcHRlcnNCdXR0b24gYmFzZWQgb24gdGhlIHRyYWNrIGxhYmVsLiBUaGlzIHdpbGwgYWxzb1xuICAgKiB1c2UgdGhlIGN1cnJlbnQgdHJhY2tzIGxvY2FsaXplZCBraW5kIGFzIGEgZmFsbGJhY2sgaWYgYSBsYWJlbCBkb2VzIG5vdCBleGlzdC5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiAgICAgICAgIFRoZSB0cmFja3MgY3VycmVudCBsYWJlbCBvciB0aGUgbG9jYWxpemVkIHRyYWNrIGtpbmQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmdldE1lbnVDYXB0aW9uID0gZnVuY3Rpb24gZ2V0TWVudUNhcHRpb24oKSB7XG4gICAgaWYgKHRoaXMudHJhY2tfICYmIHRoaXMudHJhY2tfLmxhYmVsKSB7XG4gICAgICByZXR1cm4gdGhpcy50cmFja18ubGFiZWw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubG9jYWxpemUodG9UaXRsZUNhc2UodGhpcy5raW5kXykpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgbWVudSBmcm9tIGNoYXB0ZXIgdHJhY2tcbiAgICpcbiAgICogQHJldHVybiB7TWVudX1cbiAgICogICAgICAgICBOZXcgbWVudSBmb3IgdGhlIGNoYXB0ZXIgYnV0dG9uc1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jcmVhdGVNZW51ID0gZnVuY3Rpb24gY3JlYXRlTWVudSgpIHtcbiAgICB0aGlzLm9wdGlvbnNfLnRpdGxlID0gdGhpcy5nZXRNZW51Q2FwdGlvbigpO1xuICAgIHJldHVybiBfVGV4dFRyYWNrQnV0dG9uLnByb3RvdHlwZS5jcmVhdGVNZW51LmNhbGwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG1lbnUgaXRlbSBmb3IgZWFjaCB0ZXh0IHRyYWNrXG4gICAqXG4gICAqIEByZXR1cm4ge1RleHRUcmFja01lbnVJdGVtW119XG4gICAqICAgICAgICAgQXJyYXkgb2YgbWVudSBpdGVtc1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jcmVhdGVJdGVtcyA9IGZ1bmN0aW9uIGNyZWF0ZUl0ZW1zKCkge1xuICAgIHZhciBpdGVtcyA9IFtdO1xuXG4gICAgaWYgKCF0aGlzLnRyYWNrXykge1xuICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgIH1cblxuICAgIHZhciBjdWVzID0gdGhpcy50cmFja18uY3VlcztcblxuICAgIGlmICghY3Vlcykge1xuICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY3Vlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBjdWUgPSBjdWVzW2ldO1xuICAgICAgdmFyIG1pID0gbmV3IENoYXB0ZXJzVHJhY2tNZW51SXRlbSh0aGlzLnBsYXllcl8sIHtcbiAgICAgICAgdHJhY2s6IHRoaXMudHJhY2tfLFxuICAgICAgICBjdWU6IGN1ZVxuICAgICAgfSk7XG4gICAgICBpdGVtcy5wdXNoKG1pKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaXRlbXM7XG4gIH07XG5cbiAgcmV0dXJuIENoYXB0ZXJzQnV0dG9uO1xufShUZXh0VHJhY2tCdXR0b24pO1xuLyoqXG4gKiBga2luZGAgb2YgVGV4dFRyYWNrIHRvIGxvb2sgZm9yIHRvIGFzc29jaWF0ZSBpdCB3aXRoIHRoaXMgbWVudS5cbiAqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuXG5cbkNoYXB0ZXJzQnV0dG9uLnByb3RvdHlwZS5raW5kXyA9ICdjaGFwdGVycyc7XG4vKipcbiAqIFRoZSB0ZXh0IHRoYXQgc2hvdWxkIGRpc3BsYXkgb3ZlciB0aGUgYENoYXB0ZXJzQnV0dG9uYHMgY29udHJvbHMuIEFkZGVkIGZvciBsb2NhbGl6YXRpb24uXG4gKlxuICogQHR5cGUge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cblxuQ2hhcHRlcnNCdXR0b24ucHJvdG90eXBlLmNvbnRyb2xUZXh0XyA9ICdDaGFwdGVycyc7XG5Db21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ0NoYXB0ZXJzQnV0dG9uJywgQ2hhcHRlcnNCdXR0b24pO1xuXG4vKipcbiAqIFRoZSBidXR0b24gY29tcG9uZW50IGZvciB0b2dnbGluZyBhbmQgc2VsZWN0aW5nIGRlc2NyaXB0aW9uc1xuICpcbiAqIEBleHRlbmRzIFRleHRUcmFja0J1dHRvblxuICovXG5cbnZhciBEZXNjcmlwdGlvbnNCdXR0b24gPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9UZXh0VHJhY2tCdXR0b24pIHtcbiAgX2luaGVyaXRzTG9vc2UoRGVzY3JpcHRpb25zQnV0dG9uLCBfVGV4dFRyYWNrQnV0dG9uKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtDb21wb25lbnR+UmVhZHlDYWxsYmFja30gW3JlYWR5XVxuICAgKiAgICAgICAgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGlzIGNvbXBvbmVudCBpcyByZWFkeS5cbiAgICovXG4gIGZ1bmN0aW9uIERlc2NyaXB0aW9uc0J1dHRvbihwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfVGV4dFRyYWNrQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zLCByZWFkeSkgfHwgdGhpcztcbiAgICB2YXIgdHJhY2tzID0gcGxheWVyLnRleHRUcmFja3MoKTtcbiAgICB2YXIgY2hhbmdlSGFuZGxlciA9IGJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIF90aGlzLmhhbmRsZVRyYWNrc0NoYW5nZSk7XG4gICAgdHJhY2tzLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGNoYW5nZUhhbmRsZXIpO1xuXG4gICAgX3RoaXMub24oJ2Rpc3Bvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0cmFja3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgY2hhbmdlSGFuZGxlcik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSB0ZXh0IHRyYWNrIGNoYW5nZVxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBldmVudFxuICAgKiAgICAgICAgVGhlIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gcnVuXG4gICAqXG4gICAqIEBsaXN0ZW5zIFRleHRUcmFja0xpc3QjY2hhbmdlXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IERlc2NyaXB0aW9uc0J1dHRvbi5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmhhbmRsZVRyYWNrc0NoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZVRyYWNrc0NoYW5nZShldmVudCkge1xuICAgIHZhciB0cmFja3MgPSB0aGlzLnBsYXllcigpLnRleHRUcmFja3MoKTtcbiAgICB2YXIgZGlzYWJsZWQgPSBmYWxzZTsgLy8gQ2hlY2sgd2hldGhlciBhIHRyYWNrIG9mIGEgZGlmZmVyZW50IGtpbmQgaXMgc2hvd2luZ1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0cmFja3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgdHJhY2sgPSB0cmFja3NbaV07XG5cbiAgICAgIGlmICh0cmFjay5raW5kICE9PSB0aGlzLmtpbmRfICYmIHRyYWNrLm1vZGUgPT09ICdzaG93aW5nJykge1xuICAgICAgICBkaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gLy8gSWYgYW5vdGhlciB0cmFjayBpcyBzaG93aW5nLCBkaXNhYmxlIHRoaXMgbWVudSBidXR0b25cblxuXG4gICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbmFibGUoKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEJ1aWxkcyB0aGUgZGVmYXVsdCBET00gYGNsYXNzTmFtZWAuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBUaGUgRE9NIGBjbGFzc05hbWVgIGZvciB0aGlzIG9iamVjdC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkQ1NTQ2xhc3MoKSB7XG4gICAgcmV0dXJuIFwidmpzLWRlc2NyaXB0aW9ucy1idXR0b24gXCIgKyBfVGV4dFRyYWNrQnV0dG9uLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyk7XG4gIH07XG5cbiAgX3Byb3RvLmJ1aWxkV3JhcHBlckNTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRXcmFwcGVyQ1NTQ2xhc3MoKSB7XG4gICAgcmV0dXJuIFwidmpzLWRlc2NyaXB0aW9ucy1idXR0b24gXCIgKyBfVGV4dFRyYWNrQnV0dG9uLnByb3RvdHlwZS5idWlsZFdyYXBwZXJDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICB9O1xuXG4gIHJldHVybiBEZXNjcmlwdGlvbnNCdXR0b247XG59KFRleHRUcmFja0J1dHRvbik7XG4vKipcbiAqIGBraW5kYCBvZiBUZXh0VHJhY2sgdG8gbG9vayBmb3IgdG8gYXNzb2NpYXRlIGl0IHdpdGggdGhpcyBtZW51LlxuICpcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG5cblxuRGVzY3JpcHRpb25zQnV0dG9uLnByb3RvdHlwZS5raW5kXyA9ICdkZXNjcmlwdGlvbnMnO1xuLyoqXG4gKiBUaGUgdGV4dCB0aGF0IHNob3VsZCBkaXNwbGF5IG92ZXIgdGhlIGBEZXNjcmlwdGlvbnNCdXR0b25gcyBjb250cm9scy4gQWRkZWQgZm9yIGxvY2FsaXphdGlvbi5cbiAqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuXG5EZXNjcmlwdGlvbnNCdXR0b24ucHJvdG90eXBlLmNvbnRyb2xUZXh0XyA9ICdEZXNjcmlwdGlvbnMnO1xuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdEZXNjcmlwdGlvbnNCdXR0b24nLCBEZXNjcmlwdGlvbnNCdXR0b24pO1xuXG4vKipcbiAqIFRoZSBidXR0b24gY29tcG9uZW50IGZvciB0b2dnbGluZyBhbmQgc2VsZWN0aW5nIHN1YnRpdGxlc1xuICpcbiAqIEBleHRlbmRzIFRleHRUcmFja0J1dHRvblxuICovXG5cbnZhciBTdWJ0aXRsZXNCdXR0b24gPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9UZXh0VHJhY2tCdXR0b24pIHtcbiAgX2luaGVyaXRzTG9vc2UoU3VidGl0bGVzQnV0dG9uLCBfVGV4dFRyYWNrQnV0dG9uKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtDb21wb25lbnR+UmVhZHlDYWxsYmFja30gW3JlYWR5XVxuICAgKiAgICAgICAgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGlzIGNvbXBvbmVudCBpcyByZWFkeS5cbiAgICovXG4gIGZ1bmN0aW9uIFN1YnRpdGxlc0J1dHRvbihwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KSB7XG4gICAgcmV0dXJuIF9UZXh0VHJhY2tCdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KSB8fCB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBCdWlsZHMgdGhlIGRlZmF1bHQgRE9NIGBjbGFzc05hbWVgLlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIERPTSBgY2xhc3NOYW1lYCBmb3IgdGhpcyBvYmplY3QuXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IFN1YnRpdGxlc0J1dHRvbi5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgIHJldHVybiBcInZqcy1zdWJ0aXRsZXMtYnV0dG9uIFwiICsgX1RleHRUcmFja0J1dHRvbi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICB9O1xuXG4gIF9wcm90by5idWlsZFdyYXBwZXJDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkV3JhcHBlckNTU0NsYXNzKCkge1xuICAgIHJldHVybiBcInZqcy1zdWJ0aXRsZXMtYnV0dG9uIFwiICsgX1RleHRUcmFja0J1dHRvbi5wcm90b3R5cGUuYnVpbGRXcmFwcGVyQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgfTtcblxuICByZXR1cm4gU3VidGl0bGVzQnV0dG9uO1xufShUZXh0VHJhY2tCdXR0b24pO1xuLyoqXG4gKiBga2luZGAgb2YgVGV4dFRyYWNrIHRvIGxvb2sgZm9yIHRvIGFzc29jaWF0ZSBpdCB3aXRoIHRoaXMgbWVudS5cbiAqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuXG5cblN1YnRpdGxlc0J1dHRvbi5wcm90b3R5cGUua2luZF8gPSAnc3VidGl0bGVzJztcbi8qKlxuICogVGhlIHRleHQgdGhhdCBzaG91bGQgZGlzcGxheSBvdmVyIHRoZSBgU3VidGl0bGVzQnV0dG9uYHMgY29udHJvbHMuIEFkZGVkIGZvciBsb2NhbGl6YXRpb24uXG4gKlxuICogQHR5cGUge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cblxuU3VidGl0bGVzQnV0dG9uLnByb3RvdHlwZS5jb250cm9sVGV4dF8gPSAnU3VidGl0bGVzJztcbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnU3VidGl0bGVzQnV0dG9uJywgU3VidGl0bGVzQnV0dG9uKTtcblxuLyoqXG4gKiBUaGUgbWVudSBpdGVtIGZvciBjYXB0aW9uIHRyYWNrIHNldHRpbmdzIG1lbnVcbiAqXG4gKiBAZXh0ZW5kcyBUZXh0VHJhY2tNZW51SXRlbVxuICovXG5cbnZhciBDYXB0aW9uU2V0dGluZ3NNZW51SXRlbSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX1RleHRUcmFja01lbnVJdGVtKSB7XG4gIF9pbmhlcml0c0xvb3NlKENhcHRpb25TZXR0aW5nc01lbnVJdGVtLCBfVGV4dFRyYWNrTWVudUl0ZW0pO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJcbiAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgKi9cbiAgZnVuY3Rpb24gQ2FwdGlvblNldHRpbmdzTWVudUl0ZW0ocGxheWVyLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgb3B0aW9ucy50cmFjayA9IHtcbiAgICAgIHBsYXllcjogcGxheWVyLFxuICAgICAga2luZDogb3B0aW9ucy5raW5kLFxuICAgICAgbGFiZWw6IG9wdGlvbnMua2luZCArICcgc2V0dGluZ3MnLFxuICAgICAgc2VsZWN0YWJsZTogZmFsc2UsXG4gICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICAgIG1vZGU6ICdkaXNhYmxlZCdcbiAgICB9OyAvLyBDYXB0aW9uU2V0dGluZ3NNZW51SXRlbSBoYXMgbm8gY29uY2VwdCBvZiAnc2VsZWN0ZWQnXG5cbiAgICBvcHRpb25zLnNlbGVjdGFibGUgPSBmYWxzZTtcbiAgICBvcHRpb25zLm5hbWUgPSAnQ2FwdGlvblNldHRpbmdzTWVudUl0ZW0nO1xuICAgIF90aGlzID0gX1RleHRUcmFja01lbnVJdGVtLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuXG4gICAgX3RoaXMuYWRkQ2xhc3MoJ3Zqcy10ZXh0dHJhY2stc2V0dGluZ3MnKTtcblxuICAgIF90aGlzLmNvbnRyb2xUZXh0KCcsIG9wZW5zICcgKyBvcHRpb25zLmtpbmQgKyAnIHNldHRpbmdzIGRpYWxvZycpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBUaGlzIGdldHMgY2FsbGVkIHdoZW4gYW4gYENhcHRpb25TZXR0aW5nc01lbnVJdGVtYCBpcyBcImNsaWNrZWRcIi4gU2VlXG4gICAqIHtAbGluayBDbGlja2FibGVDb21wb25lbnR9IGZvciBtb3JlIGRldGFpbGVkIGluZm9ybWF0aW9uIG9uIHdoYXQgYSBjbGljayBjYW4gYmUuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IFtldmVudF1cbiAgICogICAgICAgIFRoZSBga2V5ZG93bmAsIGB0YXBgLCBvciBgY2xpY2tgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmVcbiAgICogICAgICAgIGNhbGxlZC5cbiAgICpcbiAgICogQGxpc3RlbnMgdGFwXG4gICAqIEBsaXN0ZW5zIGNsaWNrXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IENhcHRpb25TZXR0aW5nc01lbnVJdGVtLnByb3RvdHlwZTtcblxuICBfcHJvdG8uaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljayhldmVudCkge1xuICAgIHRoaXMucGxheWVyKCkuZ2V0Q2hpbGQoJ3RleHRUcmFja1NldHRpbmdzJykub3BlbigpO1xuICB9O1xuXG4gIHJldHVybiBDYXB0aW9uU2V0dGluZ3NNZW51SXRlbTtcbn0oVGV4dFRyYWNrTWVudUl0ZW0pO1xuXG5Db21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ0NhcHRpb25TZXR0aW5nc01lbnVJdGVtJywgQ2FwdGlvblNldHRpbmdzTWVudUl0ZW0pO1xuXG4vKipcbiAqIFRoZSBidXR0b24gY29tcG9uZW50IGZvciB0b2dnbGluZyBhbmQgc2VsZWN0aW5nIGNhcHRpb25zXG4gKlxuICogQGV4dGVuZHMgVGV4dFRyYWNrQnV0dG9uXG4gKi9cblxudmFyIENhcHRpb25zQnV0dG9uID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfVGV4dFRyYWNrQnV0dG9uKSB7XG4gIF9pbmhlcml0c0xvb3NlKENhcHRpb25zQnV0dG9uLCBfVGV4dFRyYWNrQnV0dG9uKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtDb21wb25lbnR+UmVhZHlDYWxsYmFja30gW3JlYWR5XVxuICAgKiAgICAgICAgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGlzIGNvbXBvbmVudCBpcyByZWFkeS5cbiAgICovXG4gIGZ1bmN0aW9uIENhcHRpb25zQnV0dG9uKHBsYXllciwgb3B0aW9ucywgcmVhZHkpIHtcbiAgICByZXR1cm4gX1RleHRUcmFja0J1dHRvbi5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucywgcmVhZHkpIHx8IHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEJ1aWxkcyB0aGUgZGVmYXVsdCBET00gYGNsYXNzTmFtZWAuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBUaGUgRE9NIGBjbGFzc05hbWVgIGZvciB0aGlzIG9iamVjdC5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gQ2FwdGlvbnNCdXR0b24ucHJvdG90eXBlO1xuXG4gIF9wcm90by5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRDU1NDbGFzcygpIHtcbiAgICByZXR1cm4gXCJ2anMtY2FwdGlvbnMtYnV0dG9uIFwiICsgX1RleHRUcmFja0J1dHRvbi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICB9O1xuXG4gIF9wcm90by5idWlsZFdyYXBwZXJDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkV3JhcHBlckNTU0NsYXNzKCkge1xuICAgIHJldHVybiBcInZqcy1jYXB0aW9ucy1idXR0b24gXCIgKyBfVGV4dFRyYWNrQnV0dG9uLnByb3RvdHlwZS5idWlsZFdyYXBwZXJDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgY2FwdGlvbiBtZW51IGl0ZW1zXG4gICAqXG4gICAqIEByZXR1cm4ge0NhcHRpb25TZXR0aW5nc01lbnVJdGVtW119XG4gICAqICAgICAgICAgVGhlIGFycmF5IG9mIGN1cnJlbnQgbWVudSBpdGVtcy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3JlYXRlSXRlbXMgPSBmdW5jdGlvbiBjcmVhdGVJdGVtcygpIHtcbiAgICB2YXIgaXRlbXMgPSBbXTtcblxuICAgIGlmICghKHRoaXMucGxheWVyKCkudGVjaF8gJiYgdGhpcy5wbGF5ZXIoKS50ZWNoXy5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MpICYmIHRoaXMucGxheWVyKCkuZ2V0Q2hpbGQoJ3RleHRUcmFja1NldHRpbmdzJykpIHtcbiAgICAgIGl0ZW1zLnB1c2gobmV3IENhcHRpb25TZXR0aW5nc01lbnVJdGVtKHRoaXMucGxheWVyXywge1xuICAgICAgICBraW5kOiB0aGlzLmtpbmRfXG4gICAgICB9KSk7XG4gICAgICB0aGlzLmhpZGVUaHJlc2hvbGRfICs9IDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIF9UZXh0VHJhY2tCdXR0b24ucHJvdG90eXBlLmNyZWF0ZUl0ZW1zLmNhbGwodGhpcywgaXRlbXMpO1xuICB9O1xuXG4gIHJldHVybiBDYXB0aW9uc0J1dHRvbjtcbn0oVGV4dFRyYWNrQnV0dG9uKTtcbi8qKlxuICogYGtpbmRgIG9mIFRleHRUcmFjayB0byBsb29rIGZvciB0byBhc3NvY2lhdGUgaXQgd2l0aCB0aGlzIG1lbnUuXG4gKlxuICogQHR5cGUge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5DYXB0aW9uc0J1dHRvbi5wcm90b3R5cGUua2luZF8gPSAnY2FwdGlvbnMnO1xuLyoqXG4gKiBUaGUgdGV4dCB0aGF0IHNob3VsZCBkaXNwbGF5IG92ZXIgdGhlIGBDYXB0aW9uc0J1dHRvbmBzIGNvbnRyb2xzLiBBZGRlZCBmb3IgbG9jYWxpemF0aW9uLlxuICpcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG5cbkNhcHRpb25zQnV0dG9uLnByb3RvdHlwZS5jb250cm9sVGV4dF8gPSAnQ2FwdGlvbnMnO1xuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdDYXB0aW9uc0J1dHRvbicsIENhcHRpb25zQnV0dG9uKTtcblxuLyoqXG4gKiBTdWJzQ2Fwc01lbnVJdGVtIGhhcyBhbiBbY2NdIGljb24gdG8gZGlzdGluZ3Vpc2ggY2FwdGlvbnMgZnJvbSBzdWJ0aXRsZXNcbiAqIGluIHRoZSBTdWJzQ2Fwc01lbnUuXG4gKlxuICogQGV4dGVuZHMgVGV4dFRyYWNrTWVudUl0ZW1cbiAqL1xuXG52YXIgU3Vic0NhcHNNZW51SXRlbSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX1RleHRUcmFja01lbnVJdGVtKSB7XG4gIF9pbmhlcml0c0xvb3NlKFN1YnNDYXBzTWVudUl0ZW0sIF9UZXh0VHJhY2tNZW51SXRlbSk7XG5cbiAgZnVuY3Rpb24gU3Vic0NhcHNNZW51SXRlbSgpIHtcbiAgICByZXR1cm4gX1RleHRUcmFja01lbnVJdGVtLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBTdWJzQ2Fwc01lbnVJdGVtLnByb3RvdHlwZTtcblxuICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCh0eXBlLCBwcm9wcywgYXR0cnMpIHtcbiAgICB2YXIgaW5uZXJIVE1MID0gXCI8c3BhbiBjbGFzcz1cXFwidmpzLW1lbnUtaXRlbS10ZXh0XFxcIj5cIiArIHRoaXMubG9jYWxpemUodGhpcy5vcHRpb25zXy5sYWJlbCk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zXy50cmFjay5raW5kID09PSAnY2FwdGlvbnMnKSB7XG4gICAgICBpbm5lckhUTUwgKz0gXCJcXG4gICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIiBjbGFzcz1cXFwidmpzLWljb24tcGxhY2Vob2xkZXJcXFwiPjwvc3Bhbj5cXG4gICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ2anMtY29udHJvbC10ZXh0XFxcIj4gXCIgKyB0aGlzLmxvY2FsaXplKCdDYXB0aW9ucycpICsgXCI8L3NwYW4+XFxuICAgICAgXCI7XG4gICAgfVxuXG4gICAgaW5uZXJIVE1MICs9ICc8L3NwYW4+JztcblxuICAgIHZhciBlbCA9IF9UZXh0VHJhY2tNZW51SXRlbS5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCB0eXBlLCBhc3NpZ24oe1xuICAgICAgaW5uZXJIVE1MOiBpbm5lckhUTUxcbiAgICB9LCBwcm9wcyksIGF0dHJzKTtcblxuICAgIHJldHVybiBlbDtcbiAgfTtcblxuICByZXR1cm4gU3Vic0NhcHNNZW51SXRlbTtcbn0oVGV4dFRyYWNrTWVudUl0ZW0pO1xuXG5Db21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ1N1YnNDYXBzTWVudUl0ZW0nLCBTdWJzQ2Fwc01lbnVJdGVtKTtcblxuLyoqXG4gKiBUaGUgYnV0dG9uIGNvbXBvbmVudCBmb3IgdG9nZ2xpbmcgYW5kIHNlbGVjdGluZyBjYXB0aW9ucyBhbmQvb3Igc3VidGl0bGVzXG4gKlxuICogQGV4dGVuZHMgVGV4dFRyYWNrQnV0dG9uXG4gKi9cblxudmFyIFN1YnNDYXBzQnV0dG9uID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfVGV4dFRyYWNrQnV0dG9uKSB7XG4gIF9pbmhlcml0c0xvb3NlKFN1YnNDYXBzQnV0dG9uLCBfVGV4dFRyYWNrQnV0dG9uKTtcblxuICBmdW5jdGlvbiBTdWJzQ2Fwc0J1dHRvbihwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgX3RoaXMgPSBfVGV4dFRyYWNrQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzOyAvLyBBbHRob3VnaCBOb3J0aCBBbWVyaWNhIHVzZXMgXCJjYXB0aW9uc1wiIGluIG1vc3QgY2FzZXMgZm9yXG4gICAgLy8gXCJjYXB0aW9ucyBhbmQgc3VidGl0bGVzXCIgb3RoZXIgbG9jYWxlcyB1c2UgXCJzdWJ0aXRsZXNcIlxuXG4gICAgX3RoaXMubGFiZWxfID0gJ3N1YnRpdGxlcyc7XG5cbiAgICBpZiAoWydlbicsICdlbi11cycsICdlbi1jYScsICdmci1jYSddLmluZGV4T2YoX3RoaXMucGxheWVyXy5sYW5ndWFnZV8pID4gLTEpIHtcbiAgICAgIF90aGlzLmxhYmVsXyA9ICdjYXB0aW9ucyc7XG4gICAgfVxuXG4gICAgX3RoaXMubWVudUJ1dHRvbl8uY29udHJvbFRleHQodG9UaXRsZUNhc2UoX3RoaXMubGFiZWxfKSk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEJ1aWxkcyB0aGUgZGVmYXVsdCBET00gYGNsYXNzTmFtZWAuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBUaGUgRE9NIGBjbGFzc05hbWVgIGZvciB0aGlzIG9iamVjdC5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gU3Vic0NhcHNCdXR0b24ucHJvdG90eXBlO1xuXG4gIF9wcm90by5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24gYnVpbGRDU1NDbGFzcygpIHtcbiAgICByZXR1cm4gXCJ2anMtc3Vicy1jYXBzLWJ1dHRvbiBcIiArIF9UZXh0VHJhY2tCdXR0b24ucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgfTtcblxuICBfcHJvdG8uYnVpbGRXcmFwcGVyQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZFdyYXBwZXJDU1NDbGFzcygpIHtcbiAgICByZXR1cm4gXCJ2anMtc3Vicy1jYXBzLWJ1dHRvbiBcIiArIF9UZXh0VHJhY2tCdXR0b24ucHJvdG90eXBlLmJ1aWxkV3JhcHBlckNTU0NsYXNzLmNhbGwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBjYXB0aW9uL3N1YnRpdGxlcyBtZW51IGl0ZW1zXG4gICAqXG4gICAqIEByZXR1cm4ge0NhcHRpb25TZXR0aW5nc01lbnVJdGVtW119XG4gICAqICAgICAgICAgVGhlIGFycmF5IG9mIGN1cnJlbnQgbWVudSBpdGVtcy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3JlYXRlSXRlbXMgPSBmdW5jdGlvbiBjcmVhdGVJdGVtcygpIHtcbiAgICB2YXIgaXRlbXMgPSBbXTtcblxuICAgIGlmICghKHRoaXMucGxheWVyKCkudGVjaF8gJiYgdGhpcy5wbGF5ZXIoKS50ZWNoXy5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MpICYmIHRoaXMucGxheWVyKCkuZ2V0Q2hpbGQoJ3RleHRUcmFja1NldHRpbmdzJykpIHtcbiAgICAgIGl0ZW1zLnB1c2gobmV3IENhcHRpb25TZXR0aW5nc01lbnVJdGVtKHRoaXMucGxheWVyXywge1xuICAgICAgICBraW5kOiB0aGlzLmxhYmVsX1xuICAgICAgfSkpO1xuICAgICAgdGhpcy5oaWRlVGhyZXNob2xkXyArPSAxO1xuICAgIH1cblxuICAgIGl0ZW1zID0gX1RleHRUcmFja0J1dHRvbi5wcm90b3R5cGUuY3JlYXRlSXRlbXMuY2FsbCh0aGlzLCBpdGVtcywgU3Vic0NhcHNNZW51SXRlbSk7XG4gICAgcmV0dXJuIGl0ZW1zO1xuICB9O1xuXG4gIHJldHVybiBTdWJzQ2Fwc0J1dHRvbjtcbn0oVGV4dFRyYWNrQnV0dG9uKTtcbi8qKlxuICogYGtpbmRgcyBvZiBUZXh0VHJhY2sgdG8gbG9vayBmb3IgdG8gYXNzb2NpYXRlIGl0IHdpdGggdGhpcyBtZW51LlxuICpcbiAqIEB0eXBlIHthcnJheX1cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5TdWJzQ2Fwc0J1dHRvbi5wcm90b3R5cGUua2luZHNfID0gWydjYXB0aW9ucycsICdzdWJ0aXRsZXMnXTtcbi8qKlxuICogVGhlIHRleHQgdGhhdCBzaG91bGQgZGlzcGxheSBvdmVyIHRoZSBgU3Vic0NhcHNCdXR0b25gcyBjb250cm9scy5cbiAqXG4gKlxuICogQHR5cGUge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cblxuU3Vic0NhcHNCdXR0b24ucHJvdG90eXBlLmNvbnRyb2xUZXh0XyA9ICdTdWJ0aXRsZXMnO1xuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdTdWJzQ2Fwc0J1dHRvbicsIFN1YnNDYXBzQnV0dG9uKTtcblxuLyoqXG4gKiBBbiB7QGxpbmsgQXVkaW9UcmFja30ge0BsaW5rIE1lbnVJdGVtfVxuICpcbiAqIEBleHRlbmRzIE1lbnVJdGVtXG4gKi9cblxudmFyIEF1ZGlvVHJhY2tNZW51SXRlbSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX01lbnVJdGVtKSB7XG4gIF9pbmhlcml0c0xvb3NlKEF1ZGlvVHJhY2tNZW51SXRlbSwgX01lbnVJdGVtKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICovXG4gIGZ1bmN0aW9uIEF1ZGlvVHJhY2tNZW51SXRlbShwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICB2YXIgdHJhY2sgPSBvcHRpb25zLnRyYWNrO1xuICAgIHZhciB0cmFja3MgPSBwbGF5ZXIuYXVkaW9UcmFja3MoKTsgLy8gTW9kaWZ5IG9wdGlvbnMgZm9yIHBhcmVudCBNZW51SXRlbSBjbGFzcydzIGluaXQuXG5cbiAgICBvcHRpb25zLmxhYmVsID0gdHJhY2subGFiZWwgfHwgdHJhY2subGFuZ3VhZ2UgfHwgJ1Vua25vd24nO1xuICAgIG9wdGlvbnMuc2VsZWN0ZWQgPSB0cmFjay5lbmFibGVkO1xuICAgIF90aGlzID0gX01lbnVJdGVtLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgIF90aGlzLnRyYWNrID0gdHJhY2s7XG5cbiAgICBfdGhpcy5hZGRDbGFzcyhcInZqcy1cIiArIHRyYWNrLmtpbmQgKyBcIi1tZW51LWl0ZW1cIik7XG5cbiAgICB2YXIgY2hhbmdlSGFuZGxlciA9IGZ1bmN0aW9uIGNoYW5nZUhhbmRsZXIoKSB7XG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMuaGFuZGxlVHJhY2tzQ2hhbmdlLmFwcGx5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBhcmdzKTtcbiAgICB9O1xuXG4gICAgdHJhY2tzLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGNoYW5nZUhhbmRsZXIpO1xuXG4gICAgX3RoaXMub24oJ2Rpc3Bvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0cmFja3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgY2hhbmdlSGFuZGxlcik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gQXVkaW9UcmFja01lbnVJdGVtLnByb3RvdHlwZTtcblxuICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCh0eXBlLCBwcm9wcywgYXR0cnMpIHtcbiAgICB2YXIgaW5uZXJIVE1MID0gXCI8c3BhbiBjbGFzcz1cXFwidmpzLW1lbnUtaXRlbS10ZXh0XFxcIj5cIiArIHRoaXMubG9jYWxpemUodGhpcy5vcHRpb25zXy5sYWJlbCk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zXy50cmFjay5raW5kID09PSAnbWFpbi1kZXNjJykge1xuICAgICAgaW5uZXJIVE1MICs9IFwiXFxuICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCIgY2xhc3M9XFxcInZqcy1pY29uLXBsYWNlaG9sZGVyXFxcIj48L3NwYW4+XFxuICAgICAgICA8c3BhbiBjbGFzcz1cXFwidmpzLWNvbnRyb2wtdGV4dFxcXCI+IFwiICsgdGhpcy5sb2NhbGl6ZSgnRGVzY3JpcHRpb25zJykgKyBcIjwvc3Bhbj5cXG4gICAgICBcIjtcbiAgICB9XG5cbiAgICBpbm5lckhUTUwgKz0gJzwvc3Bhbj4nO1xuXG4gICAgdmFyIGVsID0gX01lbnVJdGVtLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsIHR5cGUsIGFzc2lnbih7XG4gICAgICBpbm5lckhUTUw6IGlubmVySFRNTFxuICAgIH0sIHByb3BzKSwgYXR0cnMpO1xuXG4gICAgcmV0dXJuIGVsO1xuICB9XG4gIC8qKlxuICAgKiBUaGlzIGdldHMgY2FsbGVkIHdoZW4gYW4gYEF1ZGlvVHJhY2tNZW51SXRlbSBpcyBcImNsaWNrZWRcIi4gU2VlIHtAbGluayBDbGlja2FibGVDb21wb25lbnR9XG4gICAqIGZvciBtb3JlIGRldGFpbGVkIGluZm9ybWF0aW9uIG9uIHdoYXQgYSBjbGljayBjYW4gYmUuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IFtldmVudF1cbiAgICogICAgICAgIFRoZSBga2V5ZG93bmAsIGB0YXBgLCBvciBgY2xpY2tgIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmVcbiAgICogICAgICAgIGNhbGxlZC5cbiAgICpcbiAgICogQGxpc3RlbnMgdGFwXG4gICAqIEBsaXN0ZW5zIGNsaWNrXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZUNsaWNrID0gZnVuY3Rpb24gaGFuZGxlQ2xpY2soZXZlbnQpIHtcbiAgICB2YXIgdHJhY2tzID0gdGhpcy5wbGF5ZXJfLmF1ZGlvVHJhY2tzKCk7XG5cbiAgICBfTWVudUl0ZW0ucHJvdG90eXBlLmhhbmRsZUNsaWNrLmNhbGwodGhpcywgZXZlbnQpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB0cmFjayA9IHRyYWNrc1tpXTtcbiAgICAgIHRyYWNrLmVuYWJsZWQgPSB0cmFjayA9PT0gdGhpcy50cmFjaztcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSBhbnkge0BsaW5rIEF1ZGlvVHJhY2t9IGNoYW5nZS5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgKiAgICAgICAgVGhlIHtAbGluayBBdWRpb1RyYWNrTGlzdCNjaGFuZ2V9IGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgdG8gcnVuLlxuICAgKlxuICAgKiBAbGlzdGVucyBBdWRpb1RyYWNrTGlzdCNjaGFuZ2VcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlVHJhY2tzQ2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlVHJhY2tzQ2hhbmdlKGV2ZW50KSB7XG4gICAgdGhpcy5zZWxlY3RlZCh0aGlzLnRyYWNrLmVuYWJsZWQpO1xuICB9O1xuXG4gIHJldHVybiBBdWRpb1RyYWNrTWVudUl0ZW07XG59KE1lbnVJdGVtKTtcblxuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdBdWRpb1RyYWNrTWVudUl0ZW0nLCBBdWRpb1RyYWNrTWVudUl0ZW0pO1xuXG4vKipcbiAqIFRoZSBiYXNlIGNsYXNzIGZvciBidXR0b25zIHRoYXQgdG9nZ2xlIHNwZWNpZmljIHtAbGluayBBdWRpb1RyYWNrfSB0eXBlcy5cbiAqXG4gKiBAZXh0ZW5kcyBUcmFja0J1dHRvblxuICovXG5cbnZhciBBdWRpb1RyYWNrQnV0dG9uID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfVHJhY2tCdXR0b24pIHtcbiAgX2luaGVyaXRzTG9vc2UoQXVkaW9UcmFja0J1dHRvbiwgX1RyYWNrQnV0dG9uKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBUaGUgYFBsYXllcmAgdGhhdCB0aGlzIGNsYXNzIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XVxuICAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgICovXG4gIGZ1bmN0aW9uIEF1ZGlvVHJhY2tCdXR0b24ocGxheWVyLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIG9wdGlvbnMudHJhY2tzID0gcGxheWVyLmF1ZGlvVHJhY2tzKCk7XG4gICAgcmV0dXJuIF9UcmFja0J1dHRvbi5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcbiAgfVxuICAvKipcbiAgICogQnVpbGRzIHRoZSBkZWZhdWx0IERPTSBgY2xhc3NOYW1lYC5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiAgICAgICAgIFRoZSBET00gYGNsYXNzTmFtZWAgZm9yIHRoaXMgb2JqZWN0LlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBBdWRpb1RyYWNrQnV0dG9uLnByb3RvdHlwZTtcblxuICBfcHJvdG8uYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkQ1NTQ2xhc3MoKSB7XG4gICAgcmV0dXJuIFwidmpzLWF1ZGlvLWJ1dHRvbiBcIiArIF9UcmFja0J1dHRvbi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICB9O1xuXG4gIF9wcm90by5idWlsZFdyYXBwZXJDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkV3JhcHBlckNTU0NsYXNzKCkge1xuICAgIHJldHVybiBcInZqcy1hdWRpby1idXR0b24gXCIgKyBfVHJhY2tCdXR0b24ucHJvdG90eXBlLmJ1aWxkV3JhcHBlckNTU0NsYXNzLmNhbGwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG1lbnUgaXRlbSBmb3IgZWFjaCBhdWRpbyB0cmFja1xuICAgKlxuICAgKiBAcGFyYW0ge0F1ZGlvVHJhY2tNZW51SXRlbVtdfSBbaXRlbXM9W11dXG4gICAqICAgICAgICBBbiBhcnJheSBvZiBleGlzdGluZyBtZW51IGl0ZW1zIHRvIHVzZS5cbiAgICpcbiAgICogQHJldHVybiB7QXVkaW9UcmFja01lbnVJdGVtW119XG4gICAqICAgICAgICAgQW4gYXJyYXkgb2YgbWVudSBpdGVtc1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jcmVhdGVJdGVtcyA9IGZ1bmN0aW9uIGNyZWF0ZUl0ZW1zKGl0ZW1zKSB7XG4gICAgaWYgKGl0ZW1zID09PSB2b2lkIDApIHtcbiAgICAgIGl0ZW1zID0gW107XG4gICAgfVxuXG4gICAgLy8gaWYgdGhlcmUncyBvbmx5IG9uZSBhdWRpbyB0cmFjaywgdGhlcmUgbm8gcG9pbnQgaW4gc2hvd2luZyBpdFxuICAgIHRoaXMuaGlkZVRocmVzaG9sZF8gPSAxO1xuICAgIHZhciB0cmFja3MgPSB0aGlzLnBsYXllcl8uYXVkaW9UcmFja3MoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdHJhY2sgPSB0cmFja3NbaV07XG4gICAgICBpdGVtcy5wdXNoKG5ldyBBdWRpb1RyYWNrTWVudUl0ZW0odGhpcy5wbGF5ZXJfLCB7XG4gICAgICAgIHRyYWNrOiB0cmFjayxcbiAgICAgICAgLy8gTWVudUl0ZW0gaXMgc2VsZWN0YWJsZVxuICAgICAgICBzZWxlY3RhYmxlOiB0cnVlLFxuICAgICAgICAvLyBNZW51SXRlbSBpcyBOT1QgbXVsdGlTZWxlY3RhYmxlIChpLmUuIG9ubHkgb25lIGNhbiBiZSBtYXJrZWQgXCJzZWxlY3RlZFwiIGF0IGEgdGltZSlcbiAgICAgICAgbXVsdGlTZWxlY3RhYmxlOiBmYWxzZVxuICAgICAgfSkpO1xuICAgIH1cblxuICAgIHJldHVybiBpdGVtcztcbiAgfTtcblxuICByZXR1cm4gQXVkaW9UcmFja0J1dHRvbjtcbn0oVHJhY2tCdXR0b24pO1xuLyoqXG4gKiBUaGUgdGV4dCB0aGF0IHNob3VsZCBkaXNwbGF5IG92ZXIgdGhlIGBBdWRpb1RyYWNrQnV0dG9uYHMgY29udHJvbHMuIEFkZGVkIGZvciBsb2NhbGl6YXRpb24uXG4gKlxuICogQHR5cGUge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5BdWRpb1RyYWNrQnV0dG9uLnByb3RvdHlwZS5jb250cm9sVGV4dF8gPSAnQXVkaW8gVHJhY2snO1xuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdBdWRpb1RyYWNrQnV0dG9uJywgQXVkaW9UcmFja0J1dHRvbik7XG5cbi8qKlxuICogVGhlIHNwZWNpZmljIG1lbnUgaXRlbSB0eXBlIGZvciBzZWxlY3RpbmcgYSBwbGF5YmFjayByYXRlLlxuICpcbiAqIEBleHRlbmRzIE1lbnVJdGVtXG4gKi9cblxudmFyIFBsYXliYWNrUmF0ZU1lbnVJdGVtID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfTWVudUl0ZW0pIHtcbiAgX2luaGVyaXRzTG9vc2UoUGxheWJhY2tSYXRlTWVudUl0ZW0sIF9NZW51SXRlbSk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgKiAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAqL1xuICBmdW5jdGlvbiBQbGF5YmFja1JhdGVNZW51SXRlbShwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICB2YXIgbGFiZWwgPSBvcHRpb25zLnJhdGU7XG4gICAgdmFyIHJhdGUgPSBwYXJzZUZsb2F0KGxhYmVsLCAxMCk7IC8vIE1vZGlmeSBvcHRpb25zIGZvciBwYXJlbnQgTWVudUl0ZW0gY2xhc3MncyBpbml0LlxuXG4gICAgb3B0aW9ucy5sYWJlbCA9IGxhYmVsO1xuICAgIG9wdGlvbnMuc2VsZWN0ZWQgPSByYXRlID09PSAxO1xuICAgIG9wdGlvbnMuc2VsZWN0YWJsZSA9IHRydWU7XG4gICAgb3B0aW9ucy5tdWx0aVNlbGVjdGFibGUgPSBmYWxzZTtcbiAgICBfdGhpcyA9IF9NZW51SXRlbS5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcbiAgICBfdGhpcy5sYWJlbCA9IGxhYmVsO1xuICAgIF90aGlzLnJhdGUgPSByYXRlO1xuXG4gICAgX3RoaXMub24ocGxheWVyLCAncmF0ZWNoYW5nZScsIF90aGlzLnVwZGF0ZSk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhbiBgUGxheWJhY2tSYXRlTWVudUl0ZW1gIGlzIFwiY2xpY2tlZFwiLiBTZWVcbiAgICoge0BsaW5rIENsaWNrYWJsZUNvbXBvbmVudH0gZm9yIG1vcmUgZGV0YWlsZWQgaW5mb3JtYXRpb24gb24gd2hhdCBhIGNsaWNrIGNhbiBiZS5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgKiAgICAgICAgVGhlIGBrZXlkb3duYCwgYHRhcGAsIG9yIGBjbGlja2AgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZVxuICAgKiAgICAgICAgY2FsbGVkLlxuICAgKlxuICAgKiBAbGlzdGVucyB0YXBcbiAgICogQGxpc3RlbnMgY2xpY2tcbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gUGxheWJhY2tSYXRlTWVudUl0ZW0ucHJvdG90eXBlO1xuXG4gIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XG4gICAgX01lbnVJdGVtLnByb3RvdHlwZS5oYW5kbGVDbGljay5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy5wbGF5ZXIoKS5wbGF5YmFja1JhdGUodGhpcy5yYXRlKTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBQbGF5YmFja1JhdGVNZW51SXRlbSB3aGVuIHRoZSBwbGF5YmFja3JhdGUgY2hhbmdlcy5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gW2V2ZW50XVxuICAgKiAgICAgICAgVGhlIGByYXRlY2hhbmdlYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIHJ1bi5cbiAgICpcbiAgICogQGxpc3RlbnMgUGxheWVyI3JhdGVjaGFuZ2VcbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGV2ZW50KSB7XG4gICAgdGhpcy5zZWxlY3RlZCh0aGlzLnBsYXllcigpLnBsYXliYWNrUmF0ZSgpID09PSB0aGlzLnJhdGUpO1xuICB9O1xuXG4gIHJldHVybiBQbGF5YmFja1JhdGVNZW51SXRlbTtcbn0oTWVudUl0ZW0pO1xuLyoqXG4gKiBUaGUgdGV4dCB0aGF0IHNob3VsZCBkaXNwbGF5IG92ZXIgdGhlIGBQbGF5YmFja1JhdGVNZW51SXRlbWBzIGNvbnRyb2xzLiBBZGRlZCBmb3IgbG9jYWxpemF0aW9uLlxuICpcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG5cblxuUGxheWJhY2tSYXRlTWVudUl0ZW0ucHJvdG90eXBlLmNvbnRlbnRFbFR5cGUgPSAnYnV0dG9uJztcbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnUGxheWJhY2tSYXRlTWVudUl0ZW0nLCBQbGF5YmFja1JhdGVNZW51SXRlbSk7XG5cbi8qKlxuICogVGhlIGNvbXBvbmVudCBmb3IgY29udHJvbGxpbmcgdGhlIHBsYXliYWNrIHJhdGUuXG4gKlxuICogQGV4dGVuZHMgTWVudUJ1dHRvblxuICovXG5cbnZhciBQbGF5YmFja1JhdGVNZW51QnV0dG9uID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfTWVudUJ1dHRvbikge1xuICBfaW5oZXJpdHNMb29zZShQbGF5YmFja1JhdGVNZW51QnV0dG9uLCBfTWVudUJ1dHRvbik7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHBhcmFtIHtQbGF5ZXJ9IHBsYXllclxuICAgKiAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAqL1xuICBmdW5jdGlvbiBQbGF5YmFja1JhdGVNZW51QnV0dG9uKHBsYXllciwgb3B0aW9ucykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX01lbnVCdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG5cbiAgICBfdGhpcy51cGRhdGVWaXNpYmlsaXR5KCk7XG5cbiAgICBfdGhpcy51cGRhdGVMYWJlbCgpO1xuXG4gICAgX3RoaXMub24ocGxheWVyLCAnbG9hZHN0YXJ0JywgX3RoaXMudXBkYXRlVmlzaWJpbGl0eSk7XG5cbiAgICBfdGhpcy5vbihwbGF5ZXIsICdyYXRlY2hhbmdlJywgX3RoaXMudXBkYXRlTGFiZWwpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgJ3MgRE9NIGVsZW1lbnRcbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBQbGF5YmFja1JhdGVNZW51QnV0dG9uLnByb3RvdHlwZTtcblxuICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSgpIHtcbiAgICB2YXIgZWwgPSBfTWVudUJ1dHRvbi5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzKTtcblxuICAgIHRoaXMubGFiZWxFbF8gPSBjcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAndmpzLXBsYXliYWNrLXJhdGUtdmFsdWUnLFxuICAgICAgaW5uZXJIVE1MOiAnMXgnXG4gICAgfSk7XG4gICAgZWwuYXBwZW5kQ2hpbGQodGhpcy5sYWJlbEVsXyk7XG4gICAgcmV0dXJuIGVsO1xuICB9O1xuXG4gIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICB0aGlzLmxhYmVsRWxfID0gbnVsbDtcblxuICAgIF9NZW51QnV0dG9uLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIEJ1aWxkcyB0aGUgZGVmYXVsdCBET00gYGNsYXNzTmFtZWAuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBUaGUgRE9NIGBjbGFzc05hbWVgIGZvciB0aGlzIG9iamVjdC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkQ1NTQ2xhc3MoKSB7XG4gICAgcmV0dXJuIFwidmpzLXBsYXliYWNrLXJhdGUgXCIgKyBfTWVudUJ1dHRvbi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpO1xuICB9O1xuXG4gIF9wcm90by5idWlsZFdyYXBwZXJDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkV3JhcHBlckNTU0NsYXNzKCkge1xuICAgIHJldHVybiBcInZqcy1wbGF5YmFjay1yYXRlIFwiICsgX01lbnVCdXR0b24ucHJvdG90eXBlLmJ1aWxkV3JhcHBlckNTU0NsYXNzLmNhbGwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgcGxheWJhY2sgcmF0ZSBtZW51XG4gICAqXG4gICAqIEByZXR1cm4ge01lbnV9XG4gICAqICAgICAgICAgTWVudSBvYmplY3QgcG9wdWxhdGVkIHdpdGgge0BsaW5rIFBsYXliYWNrUmF0ZU1lbnVJdGVtfXNcbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3JlYXRlTWVudSA9IGZ1bmN0aW9uIGNyZWF0ZU1lbnUoKSB7XG4gICAgdmFyIG1lbnUgPSBuZXcgTWVudSh0aGlzLnBsYXllcigpKTtcbiAgICB2YXIgcmF0ZXMgPSB0aGlzLnBsYXliYWNrUmF0ZXMoKTtcblxuICAgIGlmIChyYXRlcykge1xuICAgICAgZm9yICh2YXIgaSA9IHJhdGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIG1lbnUuYWRkQ2hpbGQobmV3IFBsYXliYWNrUmF0ZU1lbnVJdGVtKHRoaXMucGxheWVyKCksIHtcbiAgICAgICAgICByYXRlOiByYXRlc1tpXSArICd4J1xuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbnU7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgQVJJQSBhY2Nlc3NpYmlsaXR5IGF0dHJpYnV0ZXNcbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlQVJJQUF0dHJpYnV0ZXMgPSBmdW5jdGlvbiB1cGRhdGVBUklBQXR0cmlidXRlcygpIHtcbiAgICAvLyBDdXJyZW50IHBsYXliYWNrIHJhdGVcbiAgICB0aGlzLmVsKCkuc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbm93JywgdGhpcy5wbGF5ZXIoKS5wbGF5YmFja1JhdGUoKSk7XG4gIH1cbiAgLyoqXG4gICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhbiBgUGxheWJhY2tSYXRlTWVudUJ1dHRvbmAgaXMgXCJjbGlja2VkXCIuIFNlZVxuICAgKiB7QGxpbmsgQ2xpY2thYmxlQ29tcG9uZW50fSBmb3IgbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiBvbiB3aGF0IGEgY2xpY2sgY2FuIGJlLlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAqICAgICAgICBUaGUgYGtleWRvd25gLCBgdGFwYCwgb3IgYGNsaWNrYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlXG4gICAqICAgICAgICBjYWxsZWQuXG4gICAqXG4gICAqIEBsaXN0ZW5zIHRhcFxuICAgKiBAbGlzdGVucyBjbGlja1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XG4gICAgLy8gc2VsZWN0IG5leHQgcmF0ZSBvcHRpb25cbiAgICB2YXIgY3VycmVudFJhdGUgPSB0aGlzLnBsYXllcigpLnBsYXliYWNrUmF0ZSgpO1xuICAgIHZhciByYXRlcyA9IHRoaXMucGxheWJhY2tSYXRlcygpOyAvLyB0aGlzIHdpbGwgc2VsZWN0IGZpcnN0IG9uZSBpZiB0aGUgbGFzdCBvbmUgY3VycmVudGx5IHNlbGVjdGVkXG5cbiAgICB2YXIgbmV3UmF0ZSA9IHJhdGVzWzBdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHJhdGVzW2ldID4gY3VycmVudFJhdGUpIHtcbiAgICAgICAgbmV3UmF0ZSA9IHJhdGVzW2ldO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnBsYXllcigpLnBsYXliYWNrUmF0ZShuZXdSYXRlKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHBvc3NpYmxlIHBsYXliYWNrIHJhdGVzXG4gICAqXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKiAgICAgICAgIEFsbCBwb3NzaWJsZSBwbGF5YmFjayByYXRlc1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wbGF5YmFja1JhdGVzID0gZnVuY3Rpb24gcGxheWJhY2tSYXRlcygpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zXy5wbGF5YmFja1JhdGVzIHx8IHRoaXMub3B0aW9uc18ucGxheWVyT3B0aW9ucyAmJiB0aGlzLm9wdGlvbnNfLnBsYXllck9wdGlvbnMucGxheWJhY2tSYXRlcztcbiAgfVxuICAvKipcbiAgICogR2V0IHdoZXRoZXIgcGxheWJhY2sgcmF0ZXMgaXMgc3VwcG9ydGVkIGJ5IHRoZSB0ZWNoXG4gICAqIGFuZCBhbiBhcnJheSBvZiBwbGF5YmFjayByYXRlcyBleGlzdHNcbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICBXaGV0aGVyIGNoYW5naW5nIHBsYXliYWNrIHJhdGUgaXMgc3VwcG9ydGVkXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBsYXliYWNrUmF0ZVN1cHBvcnRlZCA9IGZ1bmN0aW9uIHBsYXliYWNrUmF0ZVN1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5wbGF5ZXIoKS50ZWNoXyAmJiB0aGlzLnBsYXllcigpLnRlY2hfLmZlYXR1cmVzUGxheWJhY2tSYXRlICYmIHRoaXMucGxheWJhY2tSYXRlcygpICYmIHRoaXMucGxheWJhY2tSYXRlcygpLmxlbmd0aCA+IDA7XG4gIH1cbiAgLyoqXG4gICAqIEhpZGUgcGxheWJhY2sgcmF0ZSBjb250cm9scyB3aGVuIHRoZXkncmUgbm8gcGxheWJhY2sgcmF0ZSBvcHRpb25zIHRvIHNlbGVjdFxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fkV2ZW50fSBbZXZlbnRdXG4gICAqICAgICAgICBUaGUgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBydW4uXG4gICAqXG4gICAqIEBsaXN0ZW5zIFBsYXllciNsb2Fkc3RhcnRcbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlVmlzaWJpbGl0eSA9IGZ1bmN0aW9uIHVwZGF0ZVZpc2liaWxpdHkoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5wbGF5YmFja1JhdGVTdXBwb3J0ZWQoKSkge1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWhpZGRlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFkZENsYXNzKCd2anMtaGlkZGVuJyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgYnV0dG9uIGxhYmVsIHdoZW4gcmF0ZSBjaGFuZ2VkXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IFtldmVudF1cbiAgICogICAgICAgIFRoZSBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIHJ1bi5cbiAgICpcbiAgICogQGxpc3RlbnMgUGxheWVyI3JhdGVjaGFuZ2VcbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlTGFiZWwgPSBmdW5jdGlvbiB1cGRhdGVMYWJlbChldmVudCkge1xuICAgIGlmICh0aGlzLnBsYXliYWNrUmF0ZVN1cHBvcnRlZCgpKSB7XG4gICAgICB0aGlzLmxhYmVsRWxfLmlubmVySFRNTCA9IHRoaXMucGxheWVyKCkucGxheWJhY2tSYXRlKCkgKyAneCc7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBQbGF5YmFja1JhdGVNZW51QnV0dG9uO1xufShNZW51QnV0dG9uKTtcbi8qKlxuICogVGhlIHRleHQgdGhhdCBzaG91bGQgZGlzcGxheSBvdmVyIHRoZSBgRnVsbHNjcmVlblRvZ2dsZWBzIGNvbnRyb2xzLiBBZGRlZCBmb3IgbG9jYWxpemF0aW9uLlxuICpcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG5cblxuUGxheWJhY2tSYXRlTWVudUJ1dHRvbi5wcm90b3R5cGUuY29udHJvbFRleHRfID0gJ1BsYXliYWNrIFJhdGUnO1xuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdQbGF5YmFja1JhdGVNZW51QnV0dG9uJywgUGxheWJhY2tSYXRlTWVudUJ1dHRvbik7XG5cbi8qKlxuICogSnVzdCBhbiBlbXB0eSBzcGFjZXIgZWxlbWVudCB0aGF0IGNhbiBiZSB1c2VkIGFzIGFuIGFwcGVuZCBwb2ludCBmb3IgcGx1Z2lucywgZXRjLlxuICogQWxzbyBjYW4gYmUgdXNlZCB0byBjcmVhdGUgc3BhY2UgYmV0d2VlbiBlbGVtZW50cyB3aGVuIG5lY2Vzc2FyeS5cbiAqXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuXG52YXIgU3BhY2VyID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0c0xvb3NlKFNwYWNlciwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gU3BhY2VyKCkge1xuICAgIHJldHVybiBfQ29tcG9uZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBTcGFjZXIucHJvdG90eXBlO1xuXG4gIC8qKlxuICAqIEJ1aWxkcyB0aGUgZGVmYXVsdCBET00gYGNsYXNzTmFtZWAuXG4gICpcbiAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICogICAgICAgICBUaGUgRE9NIGBjbGFzc05hbWVgIGZvciB0aGlzIG9iamVjdC5cbiAgKi9cbiAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgIHJldHVybiBcInZqcy1zcGFjZXIgXCIgKyBfQ29tcG9uZW50LnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgYENvbXBvbmVudGAncyBET00gZWxlbWVudFxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwoKSB7XG4gICAgcmV0dXJuIF9Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogdGhpcy5idWlsZENTU0NsYXNzKClcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gU3BhY2VyO1xufShDb21wb25lbnQpO1xuXG5Db21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ1NwYWNlcicsIFNwYWNlcik7XG5cbi8qKlxuICogU3BhY2VyIHNwZWNpZmljYWxseSBtZWFudCB0byBiZSB1c2VkIGFzIGFuIGluc2VydGlvbiBwb2ludCBmb3IgbmV3IHBsdWdpbnMsIGV0Yy5cbiAqXG4gKiBAZXh0ZW5kcyBTcGFjZXJcbiAqL1xuXG52YXIgQ3VzdG9tQ29udHJvbFNwYWNlciA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX1NwYWNlcikge1xuICBfaW5oZXJpdHNMb29zZShDdXN0b21Db250cm9sU3BhY2VyLCBfU3BhY2VyKTtcblxuICBmdW5jdGlvbiBDdXN0b21Db250cm9sU3BhY2VyKCkge1xuICAgIHJldHVybiBfU3BhY2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBDdXN0b21Db250cm9sU3BhY2VyLnByb3RvdHlwZTtcblxuICAvKipcbiAgICogQnVpbGRzIHRoZSBkZWZhdWx0IERPTSBgY2xhc3NOYW1lYC5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiAgICAgICAgIFRoZSBET00gYGNsYXNzTmFtZWAgZm9yIHRoaXMgb2JqZWN0LlxuICAgKi9cbiAgX3Byb3RvLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbiBidWlsZENTU0NsYXNzKCkge1xuICAgIHJldHVybiBcInZqcy1jdXN0b20tY29udHJvbC1zcGFjZXIgXCIgKyBfU3BhY2VyLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgYENvbXBvbmVudGAncyBET00gZWxlbWVudFxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwoKSB7XG4gICAgdmFyIGVsID0gX1NwYWNlci5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCB7XG4gICAgICBjbGFzc05hbWU6IHRoaXMuYnVpbGRDU1NDbGFzcygpXG4gICAgfSk7IC8vIE5vLWZsZXgvdGFibGUtY2VsbCBtb2RlIHJlcXVpcmVzIHRoZXJlIGJlIHNvbWUgY29udGVudFxuICAgIC8vIGluIHRoZSBjZWxsIHRvIGZpbGwgdGhlIHJlbWFpbmluZyBzcGFjZSBvZiB0aGUgdGFibGUuXG5cblxuICAgIGVsLmlubmVySFRNTCA9IFwiXFx4QTBcIjtcbiAgICByZXR1cm4gZWw7XG4gIH07XG5cbiAgcmV0dXJuIEN1c3RvbUNvbnRyb2xTcGFjZXI7XG59KFNwYWNlcik7XG5cbkNvbXBvbmVudC5yZWdpc3RlckNvbXBvbmVudCgnQ3VzdG9tQ29udHJvbFNwYWNlcicsIEN1c3RvbUNvbnRyb2xTcGFjZXIpO1xuXG4vKipcbiAqIENvbnRhaW5lciBvZiBtYWluIGNvbnRyb2xzLlxuICpcbiAqIEBleHRlbmRzIENvbXBvbmVudFxuICovXG5cbnZhciBDb250cm9sQmFyID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0c0xvb3NlKENvbnRyb2xCYXIsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIENvbnRyb2xCYXIoKSB7XG4gICAgcmV0dXJuIF9Db21wb25lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IENvbnRyb2xCYXIucHJvdG90eXBlO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGBDb21wb25lbnRgJ3MgRE9NIGVsZW1lbnRcbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgKi9cbiAgX3Byb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24gY3JlYXRlRWwoKSB7XG4gICAgcmV0dXJuIF9Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Zqcy1jb250cm9sLWJhcicsXG4gICAgICBkaXI6ICdsdHInXG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIENvbnRyb2xCYXI7XG59KENvbXBvbmVudCk7XG4vKipcbiAqIERlZmF1bHQgb3B0aW9ucyBmb3IgYENvbnRyb2xCYXJgXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cblxuXG5Db250cm9sQmFyLnByb3RvdHlwZS5vcHRpb25zXyA9IHtcbiAgY2hpbGRyZW46IFsncGxheVRvZ2dsZScsICd2b2x1bWVQYW5lbCcsICdjdXJyZW50VGltZURpc3BsYXknLCAndGltZURpdmlkZXInLCAnZHVyYXRpb25EaXNwbGF5JywgJ3Byb2dyZXNzQ29udHJvbCcsICdsaXZlRGlzcGxheScsICdzZWVrVG9MaXZlJywgJ3JlbWFpbmluZ1RpbWVEaXNwbGF5JywgJ2N1c3RvbUNvbnRyb2xTcGFjZXInLCAncGxheWJhY2tSYXRlTWVudUJ1dHRvbicsICdjaGFwdGVyc0J1dHRvbicsICdkZXNjcmlwdGlvbnNCdXR0b24nLCAnc3Vic0NhcHNCdXR0b24nLCAnYXVkaW9UcmFja0J1dHRvbicsICdmdWxsc2NyZWVuVG9nZ2xlJ11cbn07XG5Db21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ0NvbnRyb2xCYXInLCBDb250cm9sQmFyKTtcblxuLyoqXG4gKiBBIGRpc3BsYXkgdGhhdCBpbmRpY2F0ZXMgYW4gZXJyb3IgaGFzIG9jY3VycmVkLiBUaGlzIG1lYW5zIHRoYXQgdGhlIHZpZGVvXG4gKiBpcyB1bnBsYXlhYmxlLlxuICpcbiAqIEBleHRlbmRzIE1vZGFsRGlhbG9nXG4gKi9cblxudmFyIEVycm9yRGlzcGxheSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX01vZGFsRGlhbG9nKSB7XG4gIF9pbmhlcml0c0xvb3NlKEVycm9yRGlzcGxheSwgX01vZGFsRGlhbG9nKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0gIHtQbGF5ZXJ9IHBsYXllclxuICAgKiAgICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgKlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgIFRoZSBrZXkvdmFsdWUgc3RvcmUgb2YgcGxheWVyIG9wdGlvbnMuXG4gICAqL1xuICBmdW5jdGlvbiBFcnJvckRpc3BsYXkocGxheWVyLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfTW9kYWxEaWFsb2cuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpIHx8IHRoaXM7XG5cbiAgICBfdGhpcy5vbihwbGF5ZXIsICdlcnJvcicsIF90aGlzLm9wZW4pO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBCdWlsZHMgdGhlIGRlZmF1bHQgRE9NIGBjbGFzc05hbWVgLlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIERPTSBgY2xhc3NOYW1lYCBmb3IgdGhpcyBvYmplY3QuXG4gICAqXG4gICAqIEBkZXByZWNhdGVkIFNpbmNlIHZlcnNpb24gNS5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gRXJyb3JEaXNwbGF5LnByb3RvdHlwZTtcblxuICBfcHJvdG8uYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkQ1NTQ2xhc3MoKSB7XG4gICAgcmV0dXJuIFwidmpzLWVycm9yLWRpc3BsYXkgXCIgKyBfTW9kYWxEaWFsb2cucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbiAgfVxuICAvKipcbiAgICogR2V0cyB0aGUgbG9jYWxpemVkIGVycm9yIG1lc3NhZ2UgYmFzZWQgb24gdGhlIGBQbGF5ZXJgcyBlcnJvci5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiAgICAgICAgIFRoZSBgUGxheWVyYHMgZXJyb3IgbWVzc2FnZSBsb2NhbGl6ZWQgb3IgYW4gZW1wdHkgc3RyaW5nLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jb250ZW50ID0gZnVuY3Rpb24gY29udGVudCgpIHtcbiAgICB2YXIgZXJyb3IgPSB0aGlzLnBsYXllcigpLmVycm9yKCk7XG4gICAgcmV0dXJuIGVycm9yID8gdGhpcy5sb2NhbGl6ZShlcnJvci5tZXNzYWdlKSA6ICcnO1xuICB9O1xuXG4gIHJldHVybiBFcnJvckRpc3BsYXk7XG59KE1vZGFsRGlhbG9nKTtcbi8qKlxuICogVGhlIGRlZmF1bHQgb3B0aW9ucyBmb3IgYW4gYEVycm9yRGlzcGxheWAuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuXG5cbkVycm9yRGlzcGxheS5wcm90b3R5cGUub3B0aW9uc18gPSBtZXJnZU9wdGlvbnMoTW9kYWxEaWFsb2cucHJvdG90eXBlLm9wdGlvbnNfLCB7XG4gIHBhdXNlT25PcGVuOiBmYWxzZSxcbiAgZmlsbEFsd2F5czogdHJ1ZSxcbiAgdGVtcG9yYXJ5OiBmYWxzZSxcbiAgdW5jbG9zZWFibGU6IHRydWVcbn0pO1xuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdFcnJvckRpc3BsYXknLCBFcnJvckRpc3BsYXkpO1xuXG52YXIgTE9DQUxfU1RPUkFHRV9LRVkgPSAndmpzLXRleHQtdHJhY2stc2V0dGluZ3MnO1xudmFyIENPTE9SX0JMQUNLID0gWycjMDAwJywgJ0JsYWNrJ107XG52YXIgQ09MT1JfQkxVRSA9IFsnIzAwRicsICdCbHVlJ107XG52YXIgQ09MT1JfQ1lBTiA9IFsnIzBGRicsICdDeWFuJ107XG52YXIgQ09MT1JfR1JFRU4gPSBbJyMwRjAnLCAnR3JlZW4nXTtcbnZhciBDT0xPUl9NQUdFTlRBID0gWycjRjBGJywgJ01hZ2VudGEnXTtcbnZhciBDT0xPUl9SRUQgPSBbJyNGMDAnLCAnUmVkJ107XG52YXIgQ09MT1JfV0hJVEUgPSBbJyNGRkYnLCAnV2hpdGUnXTtcbnZhciBDT0xPUl9ZRUxMT1cgPSBbJyNGRjAnLCAnWWVsbG93J107XG52YXIgT1BBQ0lUWV9PUEFRVUUgPSBbJzEnLCAnT3BhcXVlJ107XG52YXIgT1BBQ0lUWV9TRU1JID0gWycwLjUnLCAnU2VtaS1UcmFuc3BhcmVudCddO1xudmFyIE9QQUNJVFlfVFJBTlMgPSBbJzAnLCAnVHJhbnNwYXJlbnQnXTsgLy8gQ29uZmlndXJhdGlvbiBmb3IgdGhlIHZhcmlvdXMgPHNlbGVjdD4gZWxlbWVudHMgaW4gdGhlIERPTSBvZiB0aGlzIGNvbXBvbmVudC5cbi8vXG4vLyBQb3NzaWJsZSBrZXlzIGluY2x1ZGU6XG4vL1xuLy8gYGRlZmF1bHRgOlxuLy8gICBUaGUgZGVmYXVsdCBvcHRpb24gaW5kZXguIE9ubHkgbmVlZHMgdG8gYmUgcHJvdmlkZWQgaWYgbm90IHplcm8uXG4vLyBgcGFyc2VyYDpcbi8vICAgQSBmdW5jdGlvbiB3aGljaCBpcyB1c2VkIHRvIHBhcnNlIHRoZSB2YWx1ZSBmcm9tIHRoZSBzZWxlY3RlZCBvcHRpb24gaW5cbi8vICAgYSBjdXN0b21pemVkIHdheS5cbi8vIGBzZWxlY3RvcmA6XG4vLyAgIFRoZSBzZWxlY3RvciB1c2VkIHRvIGZpbmQgdGhlIGFzc29jaWF0ZWQgPHNlbGVjdD4gZWxlbWVudC5cblxudmFyIHNlbGVjdENvbmZpZ3MgPSB7XG4gIGJhY2tncm91bmRDb2xvcjoge1xuICAgIHNlbGVjdG9yOiAnLnZqcy1iZy1jb2xvciA+IHNlbGVjdCcsXG4gICAgaWQ6ICdjYXB0aW9ucy1iYWNrZ3JvdW5kLWNvbG9yLSVzJyxcbiAgICBsYWJlbDogJ0NvbG9yJyxcbiAgICBvcHRpb25zOiBbQ09MT1JfQkxBQ0ssIENPTE9SX1dISVRFLCBDT0xPUl9SRUQsIENPTE9SX0dSRUVOLCBDT0xPUl9CTFVFLCBDT0xPUl9ZRUxMT1csIENPTE9SX01BR0VOVEEsIENPTE9SX0NZQU5dXG4gIH0sXG4gIGJhY2tncm91bmRPcGFjaXR5OiB7XG4gICAgc2VsZWN0b3I6ICcudmpzLWJnLW9wYWNpdHkgPiBzZWxlY3QnLFxuICAgIGlkOiAnY2FwdGlvbnMtYmFja2dyb3VuZC1vcGFjaXR5LSVzJyxcbiAgICBsYWJlbDogJ1RyYW5zcGFyZW5jeScsXG4gICAgb3B0aW9uczogW09QQUNJVFlfT1BBUVVFLCBPUEFDSVRZX1NFTUksIE9QQUNJVFlfVFJBTlNdXG4gIH0sXG4gIGNvbG9yOiB7XG4gICAgc2VsZWN0b3I6ICcudmpzLWZnLWNvbG9yID4gc2VsZWN0JyxcbiAgICBpZDogJ2NhcHRpb25zLWZvcmVncm91bmQtY29sb3ItJXMnLFxuICAgIGxhYmVsOiAnQ29sb3InLFxuICAgIG9wdGlvbnM6IFtDT0xPUl9XSElURSwgQ09MT1JfQkxBQ0ssIENPTE9SX1JFRCwgQ09MT1JfR1JFRU4sIENPTE9SX0JMVUUsIENPTE9SX1lFTExPVywgQ09MT1JfTUFHRU5UQSwgQ09MT1JfQ1lBTl1cbiAgfSxcbiAgZWRnZVN0eWxlOiB7XG4gICAgc2VsZWN0b3I6ICcudmpzLWVkZ2Utc3R5bGUgPiBzZWxlY3QnLFxuICAgIGlkOiAnJXMnLFxuICAgIGxhYmVsOiAnVGV4dCBFZGdlIFN0eWxlJyxcbiAgICBvcHRpb25zOiBbWydub25lJywgJ05vbmUnXSwgWydyYWlzZWQnLCAnUmFpc2VkJ10sIFsnZGVwcmVzc2VkJywgJ0RlcHJlc3NlZCddLCBbJ3VuaWZvcm0nLCAnVW5pZm9ybSddLCBbJ2Ryb3BzaGFkb3cnLCAnRHJvcHNoYWRvdyddXVxuICB9LFxuICBmb250RmFtaWx5OiB7XG4gICAgc2VsZWN0b3I6ICcudmpzLWZvbnQtZmFtaWx5ID4gc2VsZWN0JyxcbiAgICBpZDogJ2NhcHRpb25zLWZvbnQtZmFtaWx5LSVzJyxcbiAgICBsYWJlbDogJ0ZvbnQgRmFtaWx5JyxcbiAgICBvcHRpb25zOiBbWydwcm9wb3J0aW9uYWxTYW5zU2VyaWYnLCAnUHJvcG9ydGlvbmFsIFNhbnMtU2VyaWYnXSwgWydtb25vc3BhY2VTYW5zU2VyaWYnLCAnTW9ub3NwYWNlIFNhbnMtU2VyaWYnXSwgWydwcm9wb3J0aW9uYWxTZXJpZicsICdQcm9wb3J0aW9uYWwgU2VyaWYnXSwgWydtb25vc3BhY2VTZXJpZicsICdNb25vc3BhY2UgU2VyaWYnXSwgWydjYXN1YWwnLCAnQ2FzdWFsJ10sIFsnc2NyaXB0JywgJ1NjcmlwdCddLCBbJ3NtYWxsLWNhcHMnLCAnU21hbGwgQ2FwcyddXVxuICB9LFxuICBmb250UGVyY2VudDoge1xuICAgIHNlbGVjdG9yOiAnLnZqcy1mb250LXBlcmNlbnQgPiBzZWxlY3QnLFxuICAgIGlkOiAnY2FwdGlvbnMtZm9udC1zaXplLSVzJyxcbiAgICBsYWJlbDogJ0ZvbnQgU2l6ZScsXG4gICAgb3B0aW9uczogW1snMC41MCcsICc1MCUnXSwgWycwLjc1JywgJzc1JSddLCBbJzEuMDAnLCAnMTAwJSddLCBbJzEuMjUnLCAnMTI1JSddLCBbJzEuNTAnLCAnMTUwJSddLCBbJzEuNzUnLCAnMTc1JSddLCBbJzIuMDAnLCAnMjAwJSddLCBbJzMuMDAnLCAnMzAwJSddLCBbJzQuMDAnLCAnNDAwJSddXSxcbiAgICBkZWZhdWx0OiAyLFxuICAgIHBhcnNlcjogZnVuY3Rpb24gcGFyc2VyKHYpIHtcbiAgICAgIHJldHVybiB2ID09PSAnMS4wMCcgPyBudWxsIDogTnVtYmVyKHYpO1xuICAgIH1cbiAgfSxcbiAgdGV4dE9wYWNpdHk6IHtcbiAgICBzZWxlY3RvcjogJy52anMtdGV4dC1vcGFjaXR5ID4gc2VsZWN0JyxcbiAgICBpZDogJ2NhcHRpb25zLWZvcmVncm91bmQtb3BhY2l0eS0lcycsXG4gICAgbGFiZWw6ICdUcmFuc3BhcmVuY3knLFxuICAgIG9wdGlvbnM6IFtPUEFDSVRZX09QQVFVRSwgT1BBQ0lUWV9TRU1JXVxuICB9LFxuICAvLyBPcHRpb25zIGZvciB0aGlzIG9iamVjdCBhcmUgZGVmaW5lZCBiZWxvdy5cbiAgd2luZG93Q29sb3I6IHtcbiAgICBzZWxlY3RvcjogJy52anMtd2luZG93LWNvbG9yID4gc2VsZWN0JyxcbiAgICBpZDogJ2NhcHRpb25zLXdpbmRvdy1jb2xvci0lcycsXG4gICAgbGFiZWw6ICdDb2xvcidcbiAgfSxcbiAgLy8gT3B0aW9ucyBmb3IgdGhpcyBvYmplY3QgYXJlIGRlZmluZWQgYmVsb3cuXG4gIHdpbmRvd09wYWNpdHk6IHtcbiAgICBzZWxlY3RvcjogJy52anMtd2luZG93LW9wYWNpdHkgPiBzZWxlY3QnLFxuICAgIGlkOiAnY2FwdGlvbnMtd2luZG93LW9wYWNpdHktJXMnLFxuICAgIGxhYmVsOiAnVHJhbnNwYXJlbmN5JyxcbiAgICBvcHRpb25zOiBbT1BBQ0lUWV9UUkFOUywgT1BBQ0lUWV9TRU1JLCBPUEFDSVRZX09QQVFVRV1cbiAgfVxufTtcbnNlbGVjdENvbmZpZ3Mud2luZG93Q29sb3Iub3B0aW9ucyA9IHNlbGVjdENvbmZpZ3MuYmFja2dyb3VuZENvbG9yLm9wdGlvbnM7XG4vKipcbiAqIEdldCB0aGUgYWN0dWFsIHZhbHVlIG9mIGFuIG9wdGlvbi5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHZhbHVlXG4gKiAgICAgICAgIFRoZSB2YWx1ZSB0byBnZXRcbiAqXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gW3BhcnNlcl1cbiAqICAgICAgICAgT3B0aW9uYWwgZnVuY3Rpb24gdG8gYWRqdXN0IHRoZSB2YWx1ZS5cbiAqXG4gKiBAcmV0dXJuIHtNaXhlZH1cbiAqICAgICAgICAgLSBXaWxsIGJlIGB1bmRlZmluZWRgIGlmIG5vIHZhbHVlIGV4aXN0c1xuICogICAgICAgICAtIFdpbGwgYmUgYHVuZGVmaW5lZGAgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIFwibm9uZVwiLlxuICogICAgICAgICAtIFdpbGwgYmUgdGhlIGFjdHVhbCB2YWx1ZSBvdGhlcndpc2UuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZU9wdGlvblZhbHVlKHZhbHVlLCBwYXJzZXIpIHtcbiAgaWYgKHBhcnNlcikge1xuICAgIHZhbHVlID0gcGFyc2VyKHZhbHVlKTtcbiAgfVxuXG4gIGlmICh2YWx1ZSAmJiB2YWx1ZSAhPT0gJ25vbmUnKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG4vKipcbiAqIEdldHMgdGhlIHZhbHVlIG9mIHRoZSBzZWxlY3RlZCA8b3B0aW9uPiBlbGVtZW50IHdpdGhpbiBhIDxzZWxlY3Q+IGVsZW1lbnQuXG4gKlxuICogQHBhcmFtICB7RWxlbWVudH0gZWxcbiAqICAgICAgICAgdGhlIGVsZW1lbnQgdG8gbG9vayBpblxuICpcbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBbcGFyc2VyXVxuICogICAgICAgICBPcHRpb25hbCBmdW5jdGlvbiB0byBhZGp1c3QgdGhlIHZhbHVlLlxuICpcbiAqIEByZXR1cm4ge01peGVkfVxuICogICAgICAgICAtIFdpbGwgYmUgYHVuZGVmaW5lZGAgaWYgbm8gdmFsdWUgZXhpc3RzXG4gKiAgICAgICAgIC0gV2lsbCBiZSBgdW5kZWZpbmVkYCBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgXCJub25lXCIuXG4gKiAgICAgICAgIC0gV2lsbCBiZSB0aGUgYWN0dWFsIHZhbHVlIG90aGVyd2lzZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5cblxuZnVuY3Rpb24gZ2V0U2VsZWN0ZWRPcHRpb25WYWx1ZShlbCwgcGFyc2VyKSB7XG4gIHZhciB2YWx1ZSA9IGVsLm9wdGlvbnNbZWwub3B0aW9ucy5zZWxlY3RlZEluZGV4XS52YWx1ZTtcbiAgcmV0dXJuIHBhcnNlT3B0aW9uVmFsdWUodmFsdWUsIHBhcnNlcik7XG59XG4vKipcbiAqIFNldHMgdGhlIHNlbGVjdGVkIDxvcHRpb24+IGVsZW1lbnQgd2l0aGluIGEgPHNlbGVjdD4gZWxlbWVudCBiYXNlZCBvbiBhXG4gKiBnaXZlbiB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiAgICAgICAgVGhlIGVsZW1lbnQgdG8gbG9vayBpbi5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqICAgICAgICB0aGUgcHJvcGVydHkgdG8gbG9vayBvbi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcGFyc2VyXVxuICogICAgICAgIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGFkanVzdCB0aGUgdmFsdWUgYmVmb3JlIGNvbXBhcmluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5cblxuZnVuY3Rpb24gc2V0U2VsZWN0ZWRPcHRpb24oZWwsIHZhbHVlLCBwYXJzZXIpIHtcbiAgaWYgKCF2YWx1ZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZWwub3B0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChwYXJzZU9wdGlvblZhbHVlKGVsLm9wdGlvbnNbaV0udmFsdWUsIHBhcnNlcikgPT09IHZhbHVlKSB7XG4gICAgICBlbC5zZWxlY3RlZEluZGV4ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufVxuLyoqXG4gKiBNYW5pcHVsYXRlIFRleHQgVHJhY2tzIHNldHRpbmdzLlxuICpcbiAqIEBleHRlbmRzIE1vZGFsRGlhbG9nXG4gKi9cblxuXG52YXIgVGV4dFRyYWNrU2V0dGluZ3MgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9Nb2RhbERpYWxvZykge1xuICBfaW5oZXJpdHNMb29zZShUZXh0VHJhY2tTZXR0aW5ncywgX01vZGFsRGlhbG9nKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICAgVGhlIGBQbGF5ZXJgIHRoYXQgdGhpcyBjbGFzcyBzaG91bGQgYmUgYXR0YWNoZWQgdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIHBsYXllciBvcHRpb25zLlxuICAgKi9cbiAgZnVuY3Rpb24gVGV4dFRyYWNrU2V0dGluZ3MocGxheWVyLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgb3B0aW9ucy50ZW1wb3JhcnkgPSBmYWxzZTtcbiAgICBfdGhpcyA9IF9Nb2RhbERpYWxvZy5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucykgfHwgdGhpcztcbiAgICBfdGhpcy51cGRhdGVEaXNwbGF5ID0gYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMudXBkYXRlRGlzcGxheSk7IC8vIGZpbGwgdGhlIG1vZGFsIGFuZCBwcmV0ZW5kIHdlIGhhdmUgb3BlbmVkIGl0XG5cbiAgICBfdGhpcy5maWxsKCk7XG5cbiAgICBfdGhpcy5oYXNCZWVuT3BlbmVkXyA9IF90aGlzLmhhc0JlZW5GaWxsZWRfID0gdHJ1ZTtcbiAgICBfdGhpcy5lbmREaWFsb2cgPSBjcmVhdGVFbCgncCcsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Zqcy1jb250cm9sLXRleHQnLFxuICAgICAgdGV4dENvbnRlbnQ6IF90aGlzLmxvY2FsaXplKCdFbmQgb2YgZGlhbG9nIHdpbmRvdy4nKVxuICAgIH0pO1xuXG4gICAgX3RoaXMuZWwoKS5hcHBlbmRDaGlsZChfdGhpcy5lbmREaWFsb2cpO1xuXG4gICAgX3RoaXMuc2V0RGVmYXVsdHMoKTsgLy8gR3JhYiBgcGVyc2lzdFRleHRUcmFja1NldHRpbmdzYCBmcm9tIHRoZSBwbGF5ZXIgb3B0aW9ucyBpZiBub3QgcGFzc2VkIGluIGNoaWxkIG9wdGlvbnNcblxuXG4gICAgaWYgKG9wdGlvbnMucGVyc2lzdFRleHRUcmFja1NldHRpbmdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIF90aGlzLm9wdGlvbnNfLnBlcnNpc3RUZXh0VHJhY2tTZXR0aW5ncyA9IF90aGlzLm9wdGlvbnNfLnBsYXllck9wdGlvbnMucGVyc2lzdFRleHRUcmFja1NldHRpbmdzO1xuICAgIH1cblxuICAgIF90aGlzLm9uKF90aGlzLiQoJy52anMtZG9uZS1idXR0b24nKSwgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgIF90aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICBfdGhpcy5vbihfdGhpcy4kKCcudmpzLWRlZmF1bHQtYnV0dG9uJyksICdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnNldERlZmF1bHRzKCk7XG5cbiAgICAgIF90aGlzLnVwZGF0ZURpc3BsYXkoKTtcbiAgICB9KTtcblxuICAgIGVhY2goc2VsZWN0Q29uZmlncywgZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgX3RoaXMub24oX3RoaXMuJChjb25maWcuc2VsZWN0b3IpLCAnY2hhbmdlJywgX3RoaXMudXBkYXRlRGlzcGxheSk7XG4gICAgfSk7XG5cbiAgICBpZiAoX3RoaXMub3B0aW9uc18ucGVyc2lzdFRleHRUcmFja1NldHRpbmdzKSB7XG4gICAgICBfdGhpcy5yZXN0b3JlU2V0dGluZ3MoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gVGV4dFRyYWNrU2V0dGluZ3MucHJvdG90eXBlO1xuXG4gIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICB0aGlzLmVuZERpYWxvZyA9IG51bGw7XG5cbiAgICBfTW9kYWxEaWFsb2cucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgPHNlbGVjdD4gZWxlbWVudCB3aXRoIGNvbmZpZ3VyZWQgb3B0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICAgKiAgICAgICAgQ29uZmlndXJhdGlvbiBrZXkgdG8gdXNlIGR1cmluZyBjcmVhdGlvbi5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiAgICAgICAgIEFuIEhUTUwgc3RyaW5nLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jcmVhdGVFbFNlbGVjdF8gPSBmdW5jdGlvbiBjcmVhdGVFbFNlbGVjdF8oa2V5LCBsZWdlbmRJZCwgdHlwZSkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgaWYgKGxlZ2VuZElkID09PSB2b2lkIDApIHtcbiAgICAgIGxlZ2VuZElkID0gJyc7XG4gICAgfVxuXG4gICAgaWYgKHR5cGUgPT09IHZvaWQgMCkge1xuICAgICAgdHlwZSA9ICdsYWJlbCc7XG4gICAgfVxuXG4gICAgdmFyIGNvbmZpZyA9IHNlbGVjdENvbmZpZ3Nba2V5XTtcbiAgICB2YXIgaWQgPSBjb25maWcuaWQucmVwbGFjZSgnJXMnLCB0aGlzLmlkXyk7XG4gICAgdmFyIHNlbGVjdExhYmVsbGVkYnlJZHMgPSBbbGVnZW5kSWQsIGlkXS5qb2luKCcgJykudHJpbSgpO1xuICAgIHJldHVybiBbXCI8XCIgKyB0eXBlICsgXCIgaWQ9XFxcIlwiICsgaWQgKyBcIlxcXCIgY2xhc3M9XFxcIlwiICsgKHR5cGUgPT09ICdsYWJlbCcgPyAndmpzLWxhYmVsJyA6ICcnKSArIFwiXFxcIj5cIiwgdGhpcy5sb2NhbGl6ZShjb25maWcubGFiZWwpLCBcIjwvXCIgKyB0eXBlICsgXCI+XCIsIFwiPHNlbGVjdCBhcmlhLWxhYmVsbGVkYnk9XFxcIlwiICsgc2VsZWN0TGFiZWxsZWRieUlkcyArIFwiXFxcIj5cIl0uY29uY2F0KGNvbmZpZy5vcHRpb25zLm1hcChmdW5jdGlvbiAobykge1xuICAgICAgdmFyIG9wdGlvbklkID0gaWQgKyAnLScgKyBvWzFdLnJlcGxhY2UoL1xcVysvZywgJycpO1xuICAgICAgcmV0dXJuIFtcIjxvcHRpb24gaWQ9XFxcIlwiICsgb3B0aW9uSWQgKyBcIlxcXCIgdmFsdWU9XFxcIlwiICsgb1swXSArIFwiXFxcIiBcIiwgXCJhcmlhLWxhYmVsbGVkYnk9XFxcIlwiICsgc2VsZWN0TGFiZWxsZWRieUlkcyArIFwiIFwiICsgb3B0aW9uSWQgKyBcIlxcXCI+XCIsIF90aGlzMi5sb2NhbGl6ZShvWzFdKSwgJzwvb3B0aW9uPiddLmpvaW4oJycpO1xuICAgIH0pKS5jb25jYXQoJzwvc2VsZWN0PicpLmpvaW4oJycpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgZm9yZWdyb3VuZCBjb2xvciBlbGVtZW50IGZvciB0aGUgY29tcG9uZW50XG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBBbiBIVE1MIHN0cmluZy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3JlYXRlRWxGZ0NvbG9yXyA9IGZ1bmN0aW9uIGNyZWF0ZUVsRmdDb2xvcl8oKSB7XG4gICAgdmFyIGxlZ2VuZElkID0gXCJjYXB0aW9ucy10ZXh0LWxlZ2VuZC1cIiArIHRoaXMuaWRfO1xuICAgIHJldHVybiBbJzxmaWVsZHNldCBjbGFzcz1cInZqcy1mZy1jb2xvciB2anMtdHJhY2stc2V0dGluZ1wiPicsIFwiPGxlZ2VuZCBpZD1cXFwiXCIgKyBsZWdlbmRJZCArIFwiXFxcIj5cIiwgdGhpcy5sb2NhbGl6ZSgnVGV4dCcpLCAnPC9sZWdlbmQ+JywgdGhpcy5jcmVhdGVFbFNlbGVjdF8oJ2NvbG9yJywgbGVnZW5kSWQpLCAnPHNwYW4gY2xhc3M9XCJ2anMtdGV4dC1vcGFjaXR5IHZqcy1vcGFjaXR5XCI+JywgdGhpcy5jcmVhdGVFbFNlbGVjdF8oJ3RleHRPcGFjaXR5JywgbGVnZW5kSWQpLCAnPC9zcGFuPicsICc8L2ZpZWxkc2V0PiddLmpvaW4oJycpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYmFja2dyb3VuZCBjb2xvciBlbGVtZW50IGZvciB0aGUgY29tcG9uZW50XG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBBbiBIVE1MIHN0cmluZy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3JlYXRlRWxCZ0NvbG9yXyA9IGZ1bmN0aW9uIGNyZWF0ZUVsQmdDb2xvcl8oKSB7XG4gICAgdmFyIGxlZ2VuZElkID0gXCJjYXB0aW9ucy1iYWNrZ3JvdW5kLVwiICsgdGhpcy5pZF87XG4gICAgcmV0dXJuIFsnPGZpZWxkc2V0IGNsYXNzPVwidmpzLWJnLWNvbG9yIHZqcy10cmFjay1zZXR0aW5nXCI+JywgXCI8bGVnZW5kIGlkPVxcXCJcIiArIGxlZ2VuZElkICsgXCJcXFwiPlwiLCB0aGlzLmxvY2FsaXplKCdCYWNrZ3JvdW5kJyksICc8L2xlZ2VuZD4nLCB0aGlzLmNyZWF0ZUVsU2VsZWN0XygnYmFja2dyb3VuZENvbG9yJywgbGVnZW5kSWQpLCAnPHNwYW4gY2xhc3M9XCJ2anMtYmctb3BhY2l0eSB2anMtb3BhY2l0eVwiPicsIHRoaXMuY3JlYXRlRWxTZWxlY3RfKCdiYWNrZ3JvdW5kT3BhY2l0eScsIGxlZ2VuZElkKSwgJzwvc3Bhbj4nLCAnPC9maWVsZHNldD4nXS5qb2luKCcnKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIHdpbmRvdyBjb2xvciBlbGVtZW50IGZvciB0aGUgY29tcG9uZW50XG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBBbiBIVE1MIHN0cmluZy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3JlYXRlRWxXaW5Db2xvcl8gPSBmdW5jdGlvbiBjcmVhdGVFbFdpbkNvbG9yXygpIHtcbiAgICB2YXIgbGVnZW5kSWQgPSBcImNhcHRpb25zLXdpbmRvdy1cIiArIHRoaXMuaWRfO1xuICAgIHJldHVybiBbJzxmaWVsZHNldCBjbGFzcz1cInZqcy13aW5kb3ctY29sb3IgdmpzLXRyYWNrLXNldHRpbmdcIj4nLCBcIjxsZWdlbmQgaWQ9XFxcIlwiICsgbGVnZW5kSWQgKyBcIlxcXCI+XCIsIHRoaXMubG9jYWxpemUoJ1dpbmRvdycpLCAnPC9sZWdlbmQ+JywgdGhpcy5jcmVhdGVFbFNlbGVjdF8oJ3dpbmRvd0NvbG9yJywgbGVnZW5kSWQpLCAnPHNwYW4gY2xhc3M9XCJ2anMtd2luZG93LW9wYWNpdHkgdmpzLW9wYWNpdHlcIj4nLCB0aGlzLmNyZWF0ZUVsU2VsZWN0Xygnd2luZG93T3BhY2l0eScsIGxlZ2VuZElkKSwgJzwvc3Bhbj4nLCAnPC9maWVsZHNldD4nXS5qb2luKCcnKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGNvbG9yIGVsZW1lbnRzIGZvciB0aGUgY29tcG9uZW50XG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgY3JlYXRlZFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jcmVhdGVFbENvbG9yc18gPSBmdW5jdGlvbiBjcmVhdGVFbENvbG9yc18oKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICd2anMtdHJhY2stc2V0dGluZ3MtY29sb3JzJyxcbiAgICAgIGlubmVySFRNTDogW3RoaXMuY3JlYXRlRWxGZ0NvbG9yXygpLCB0aGlzLmNyZWF0ZUVsQmdDb2xvcl8oKSwgdGhpcy5jcmVhdGVFbFdpbkNvbG9yXygpXS5qb2luKCcnKVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgZm9udCBlbGVtZW50cyBmb3IgdGhlIGNvbXBvbmVudFxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKiAgICAgICAgIFRoZSBlbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNyZWF0ZUVsRm9udF8gPSBmdW5jdGlvbiBjcmVhdGVFbEZvbnRfKCkge1xuICAgIHJldHVybiBjcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAndmpzLXRyYWNrLXNldHRpbmdzLWZvbnQnLFxuICAgICAgaW5uZXJIVE1MOiBbJzxmaWVsZHNldCBjbGFzcz1cInZqcy1mb250LXBlcmNlbnQgdmpzLXRyYWNrLXNldHRpbmdcIj4nLCB0aGlzLmNyZWF0ZUVsU2VsZWN0XygnZm9udFBlcmNlbnQnLCAnJywgJ2xlZ2VuZCcpLCAnPC9maWVsZHNldD4nLCAnPGZpZWxkc2V0IGNsYXNzPVwidmpzLWVkZ2Utc3R5bGUgdmpzLXRyYWNrLXNldHRpbmdcIj4nLCB0aGlzLmNyZWF0ZUVsU2VsZWN0XygnZWRnZVN0eWxlJywgJycsICdsZWdlbmQnKSwgJzwvZmllbGRzZXQ+JywgJzxmaWVsZHNldCBjbGFzcz1cInZqcy1mb250LWZhbWlseSB2anMtdHJhY2stc2V0dGluZ1wiPicsIHRoaXMuY3JlYXRlRWxTZWxlY3RfKCdmb250RmFtaWx5JywgJycsICdsZWdlbmQnKSwgJzwvZmllbGRzZXQ+J10uam9pbignJylcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGNvbnRyb2xzIGZvciB0aGUgY29tcG9uZW50XG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqICAgICAgICAgVGhlIGVsZW1lbnQgdGhhdCB3YXMgY3JlYXRlZC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3JlYXRlRWxDb250cm9sc18gPSBmdW5jdGlvbiBjcmVhdGVFbENvbnRyb2xzXygpIHtcbiAgICB2YXIgZGVmYXVsdHNEZXNjcmlwdGlvbiA9IHRoaXMubG9jYWxpemUoJ3Jlc3RvcmUgYWxsIHNldHRpbmdzIHRvIHRoZSBkZWZhdWx0IHZhbHVlcycpO1xuICAgIHJldHVybiBjcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAndmpzLXRyYWNrLXNldHRpbmdzLWNvbnRyb2xzJyxcbiAgICAgIGlubmVySFRNTDogW1wiPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJ2anMtZGVmYXVsdC1idXR0b25cXFwiIHRpdGxlPVxcXCJcIiArIGRlZmF1bHRzRGVzY3JpcHRpb24gKyBcIlxcXCI+XCIsIHRoaXMubG9jYWxpemUoJ1Jlc2V0JyksIFwiPHNwYW4gY2xhc3M9XFxcInZqcy1jb250cm9sLXRleHRcXFwiPiBcIiArIGRlZmF1bHRzRGVzY3JpcHRpb24gKyBcIjwvc3Bhbj5cIiwgJzwvYnV0dG9uPicsIFwiPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJ2anMtZG9uZS1idXR0b25cXFwiPlwiICsgdGhpcy5sb2NhbGl6ZSgnRG9uZScpICsgXCI8L2J1dHRvbj5cIl0uam9pbignJylcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8uY29udGVudCA9IGZ1bmN0aW9uIGNvbnRlbnQoKSB7XG4gICAgcmV0dXJuIFt0aGlzLmNyZWF0ZUVsQ29sb3JzXygpLCB0aGlzLmNyZWF0ZUVsRm9udF8oKSwgdGhpcy5jcmVhdGVFbENvbnRyb2xzXygpXTtcbiAgfTtcblxuICBfcHJvdG8ubGFiZWwgPSBmdW5jdGlvbiBsYWJlbCgpIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhbGl6ZSgnQ2FwdGlvbiBTZXR0aW5ncyBEaWFsb2cnKTtcbiAgfTtcblxuICBfcHJvdG8uZGVzY3JpcHRpb24gPSBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhbGl6ZSgnQmVnaW5uaW5nIG9mIGRpYWxvZyB3aW5kb3cuIEVzY2FwZSB3aWxsIGNhbmNlbCBhbmQgY2xvc2UgdGhlIHdpbmRvdy4nKTtcbiAgfTtcblxuICBfcHJvdG8uYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uIGJ1aWxkQ1NTQ2xhc3MoKSB7XG4gICAgcmV0dXJuIF9Nb2RhbERpYWxvZy5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpICsgJyB2anMtdGV4dC10cmFjay1zZXR0aW5ncyc7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgYW4gb2JqZWN0IG9mIHRleHQgdHJhY2sgc2V0dGluZ3MgKG9yIG51bGwpLlxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqICAgICAgICAgQW4gb2JqZWN0IHdpdGggY29uZmlnIHZhbHVlcyBwYXJzZWQgZnJvbSB0aGUgRE9NIG9yIGxvY2FsU3RvcmFnZS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZ2V0VmFsdWVzID0gZnVuY3Rpb24gZ2V0VmFsdWVzKCkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgcmV0dXJuIHJlZHVjZShzZWxlY3RDb25maWdzLCBmdW5jdGlvbiAoYWNjdW0sIGNvbmZpZywga2V5KSB7XG4gICAgICB2YXIgdmFsdWUgPSBnZXRTZWxlY3RlZE9wdGlvblZhbHVlKF90aGlzMy4kKGNvbmZpZy5zZWxlY3RvciksIGNvbmZpZy5wYXJzZXIpO1xuXG4gICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhY2N1bVtrZXldID0gdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhY2N1bTtcbiAgICB9LCB7fSk7XG4gIH1cbiAgLyoqXG4gICAqIFNldHMgdGV4dCB0cmFjayBzZXR0aW5ncyBmcm9tIGFuIG9iamVjdCBvZiB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZXNcbiAgICogICAgICAgIEFuIG9iamVjdCB3aXRoIGNvbmZpZyB2YWx1ZXMgcGFyc2VkIGZyb20gdGhlIERPTSBvciBsb2NhbFN0b3JhZ2UuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnNldFZhbHVlcyA9IGZ1bmN0aW9uIHNldFZhbHVlcyh2YWx1ZXMpIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIGVhY2goc2VsZWN0Q29uZmlncywgZnVuY3Rpb24gKGNvbmZpZywga2V5KSB7XG4gICAgICBzZXRTZWxlY3RlZE9wdGlvbihfdGhpczQuJChjb25maWcuc2VsZWN0b3IpLCB2YWx1ZXNba2V5XSwgY29uZmlnLnBhcnNlcik7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFNldHMgYWxsIGA8c2VsZWN0PmAgZWxlbWVudHMgdG8gdGhlaXIgZGVmYXVsdCB2YWx1ZXMuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnNldERlZmF1bHRzID0gZnVuY3Rpb24gc2V0RGVmYXVsdHMoKSB7XG4gICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICBlYWNoKHNlbGVjdENvbmZpZ3MsIGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgIHZhciBpbmRleCA9IGNvbmZpZy5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpID8gY29uZmlnLmRlZmF1bHQgOiAwO1xuICAgICAgX3RoaXM1LiQoY29uZmlnLnNlbGVjdG9yKS5zZWxlY3RlZEluZGV4ID0gaW5kZXg7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFJlc3RvcmUgdGV4dHRyYWNrIHNldHRpbmdzIGZyb20gbG9jYWxTdG9yYWdlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlc3RvcmVTZXR0aW5ncyA9IGZ1bmN0aW9uIHJlc3RvcmVTZXR0aW5ncygpIHtcbiAgICB2YXIgdmFsdWVzO1xuXG4gICAgdHJ5IHtcbiAgICAgIHZhbHVlcyA9IEpTT04ucGFyc2Uod2luZG93JDEubG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfU1RPUkFHRV9LRVkpKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGxvZy53YXJuKGVycik7XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlcykge1xuICAgICAgdGhpcy5zZXRWYWx1ZXModmFsdWVzKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFNhdmUgdGV4dCB0cmFjayBzZXR0aW5ncyB0byBsb2NhbFN0b3JhZ2VcbiAgICovXG4gIDtcblxuICBfcHJvdG8uc2F2ZVNldHRpbmdzID0gZnVuY3Rpb24gc2F2ZVNldHRpbmdzKCkge1xuICAgIGlmICghdGhpcy5vcHRpb25zXy5wZXJzaXN0VGV4dFRyYWNrU2V0dGluZ3MpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdmFsdWVzID0gdGhpcy5nZXRWYWx1ZXMoKTtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoT2JqZWN0LmtleXModmFsdWVzKS5sZW5ndGgpIHtcbiAgICAgICAgd2luZG93JDEubG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KHZhbHVlcykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93JDEubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTE9DQUxfU1RPUkFHRV9LRVkpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgbG9nLndhcm4oZXJyKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSBkaXNwbGF5IG9mIHRleHQgdHJhY2sgc2V0dGluZ3NcbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlRGlzcGxheSA9IGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXkoKSB7XG4gICAgdmFyIHR0RGlzcGxheSA9IHRoaXMucGxheWVyXy5nZXRDaGlsZCgndGV4dFRyYWNrRGlzcGxheScpO1xuXG4gICAgaWYgKHR0RGlzcGxheSkge1xuICAgICAgdHREaXNwbGF5LnVwZGF0ZURpc3BsYXkoKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIGNvbmRpdGlvbmFsbHkgYmx1ciB0aGUgZWxlbWVudCBhbmQgcmVmb2N1cyB0aGUgY2FwdGlvbnMgYnV0dG9uXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNvbmRpdGlvbmFsQmx1cl8gPSBmdW5jdGlvbiBjb25kaXRpb25hbEJsdXJfKCkge1xuICAgIHRoaXMucHJldmlvdXNseUFjdGl2ZUVsXyA9IG51bGw7XG4gICAgdGhpcy5vZmYoZG9jdW1lbnQsICdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlEb3duKTtcbiAgICB2YXIgY2IgPSB0aGlzLnBsYXllcl8uY29udHJvbEJhcjtcbiAgICB2YXIgc3Vic0NhcHNCdG4gPSBjYiAmJiBjYi5zdWJzQ2Fwc0J1dHRvbjtcbiAgICB2YXIgY2NCdG4gPSBjYiAmJiBjYi5jYXB0aW9uc0J1dHRvbjtcblxuICAgIGlmIChzdWJzQ2Fwc0J0bikge1xuICAgICAgc3Vic0NhcHNCdG4uZm9jdXMoKTtcbiAgICB9IGVsc2UgaWYgKGNjQnRuKSB7XG4gICAgICBjY0J0bi5mb2N1cygpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gVGV4dFRyYWNrU2V0dGluZ3M7XG59KE1vZGFsRGlhbG9nKTtcblxuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdUZXh0VHJhY2tTZXR0aW5ncycsIFRleHRUcmFja1NldHRpbmdzKTtcblxuLyoqXG4gKiBBIFJlc2l6ZSBNYW5hZ2VyLiBJdCBpcyBpbiBjaGFyZ2Ugb2YgdHJpZ2dlcmluZyBgcGxheWVycmVzaXplYCBvbiB0aGUgcGxheWVyIGluIHRoZSByaWdodCBjb25kaXRpb25zLlxuICpcbiAqIEl0J2xsIGVpdGhlciBjcmVhdGUgYW4gaWZyYW1lIGFuZCB1c2UgYSBkZWJvdW5jZWQgcmVzaXplIGhhbmRsZXIgb24gaXQgb3IgdXNlIHRoZSBuZXcge0BsaW5rIGh0dHBzOi8vd2ljZy5naXRodWIuaW8vUmVzaXplT2JzZXJ2ZXIvfFJlc2l6ZU9ic2VydmVyfS5cbiAqXG4gKiBJZiB0aGUgUmVzaXplT2JzZXJ2ZXIgaXMgYXZhaWxhYmxlIG5hdGl2ZWx5LCBpdCB3aWxsIGJlIHVzZWQuIEEgcG9seWZpbGwgY2FuIGJlIHBhc3NlZCBpbiBhcyBhbiBvcHRpb24uXG4gKiBJZiBhIGBwbGF5ZXJyZXNpemVgIGV2ZW50IGlzIG5vdCBuZWVkZWQsIHRoZSBSZXNpemVNYW5hZ2VyIGNvbXBvbmVudCBjYW4gYmUgcmVtb3ZlZCBmcm9tIHRoZSBwbGF5ZXIsIHNlZSB0aGUgZXhhbXBsZSBiZWxvdy5cbiAqIEBleGFtcGxlIDxjYXB0aW9uPkhvdyB0byBkaXNhYmxlIHRoZSByZXNpemUgbWFuYWdlcjwvY2FwdGlvbj5cbiAqIGNvbnN0IHBsYXllciA9IHZpZGVvanMoJyN2aWQnLCB7XG4gKiAgIHJlc2l6ZU1hbmFnZXI6IGZhbHNlXG4gKiB9KTtcbiAqXG4gKiBAc2VlIHtAbGluayBodHRwczovL3dpY2cuZ2l0aHViLmlvL1Jlc2l6ZU9ic2VydmVyL3xSZXNpemVPYnNlcnZlciBzcGVjaWZpY2F0aW9ufVxuICpcbiAqIEBleHRlbmRzIENvbXBvbmVudFxuICovXG5cbnZhciBSZXNpemVNYW5hZ2VyID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0c0xvb3NlKFJlc2l6ZU1hbmFnZXIsIF9Db21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIFJlc2l6ZU1hbmFnZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwbGF5ZXJcbiAgICogICAgICAgIFRoZSBgUGxheWVyYCB0aGF0IHRoaXMgY2xhc3Mgc2hvdWxkIGJlIGF0dGFjaGVkIHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqICAgICAgICBUaGUga2V5L3ZhbHVlIHN0b3JlIG9mIFJlc2l6ZU1hbmFnZXIgb3B0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLlJlc2l6ZU9ic2VydmVyXVxuICAgKiAgICAgICAgQSBwb2x5ZmlsbCBmb3IgUmVzaXplT2JzZXJ2ZXIgY2FuIGJlIHBhc3NlZCBpbiBoZXJlLlxuICAgKiAgICAgICAgSWYgdGhpcyBpcyBzZXQgdG8gbnVsbCBpdCB3aWxsIGlnbm9yZSB0aGUgbmF0aXZlIFJlc2l6ZU9ic2VydmVyIGFuZCBmYWxsIGJhY2sgdG8gdGhlIGlmcmFtZSBmYWxsYmFjay5cbiAgICovXG4gIGZ1bmN0aW9uIFJlc2l6ZU1hbmFnZXIocGxheWVyLCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgdmFyIFJFU0laRV9PQlNFUlZFUl9BVkFJTEFCTEUgPSBvcHRpb25zLlJlc2l6ZU9ic2VydmVyIHx8IHdpbmRvdyQxLlJlc2l6ZU9ic2VydmVyOyAvLyBpZiBgbnVsbGAgd2FzIHBhc3NlZCwgd2Ugd2FudCB0byBkaXNhYmxlIHRoZSBSZXNpemVPYnNlcnZlclxuXG4gICAgaWYgKG9wdGlvbnMuUmVzaXplT2JzZXJ2ZXIgPT09IG51bGwpIHtcbiAgICAgIFJFU0laRV9PQlNFUlZFUl9BVkFJTEFCTEUgPSBmYWxzZTtcbiAgICB9IC8vIE9ubHkgY3JlYXRlIGFuIGVsZW1lbnQgd2hlbiBSZXNpemVPYnNlcnZlciBpc24ndCBhdmFpbGFibGVcblxuXG4gICAgdmFyIG9wdGlvbnNfID0gbWVyZ2VPcHRpb25zKHtcbiAgICAgIGNyZWF0ZUVsOiAhUkVTSVpFX09CU0VSVkVSX0FWQUlMQUJMRSxcbiAgICAgIHJlcG9ydFRvdWNoQWN0aXZpdHk6IGZhbHNlXG4gICAgfSwgb3B0aW9ucyk7XG4gICAgX3RoaXMgPSBfQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zXykgfHwgdGhpcztcbiAgICBfdGhpcy5SZXNpemVPYnNlcnZlciA9IG9wdGlvbnMuUmVzaXplT2JzZXJ2ZXIgfHwgd2luZG93JDEuUmVzaXplT2JzZXJ2ZXI7XG4gICAgX3RoaXMubG9hZExpc3RlbmVyXyA9IG51bGw7XG4gICAgX3RoaXMucmVzaXplT2JzZXJ2ZXJfID0gbnVsbDtcbiAgICBfdGhpcy5kZWJvdW5jZWRIYW5kbGVyXyA9IGRlYm91bmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnJlc2l6ZUhhbmRsZXIoKTtcbiAgICB9LCAxMDAsIGZhbHNlLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSk7XG5cbiAgICBpZiAoUkVTSVpFX09CU0VSVkVSX0FWQUlMQUJMRSkge1xuICAgICAgX3RoaXMucmVzaXplT2JzZXJ2ZXJfID0gbmV3IF90aGlzLlJlc2l6ZU9ic2VydmVyKF90aGlzLmRlYm91bmNlZEhhbmRsZXJfKTtcblxuICAgICAgX3RoaXMucmVzaXplT2JzZXJ2ZXJfLm9ic2VydmUocGxheWVyLmVsKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfdGhpcy5sb2FkTGlzdGVuZXJfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIV90aGlzLmVsXyB8fCAhX3RoaXMuZWxfLmNvbnRlbnRXaW5kb3cpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGVib3VuY2VkSGFuZGxlcl8gPSBfdGhpcy5kZWJvdW5jZWRIYW5kbGVyXztcblxuICAgICAgICB2YXIgdW5sb2FkTGlzdGVuZXJfID0gX3RoaXMudW5sb2FkTGlzdGVuZXJfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG9mZih0aGlzLCAncmVzaXplJywgZGVib3VuY2VkSGFuZGxlcl8pO1xuICAgICAgICAgIG9mZih0aGlzLCAndW5sb2FkJywgdW5sb2FkTGlzdGVuZXJfKTtcbiAgICAgICAgICB1bmxvYWRMaXN0ZW5lcl8gPSBudWxsO1xuICAgICAgICB9OyAvLyBzYWZhcmkgYW5kIGVkZ2UgY2FuIHVubG9hZCB0aGUgaWZyYW1lIGJlZm9yZSByZXNpemVtYW5hZ2VyIGRpc3Bvc2VcbiAgICAgICAgLy8gd2UgaGF2ZSB0byBkaXNwb3NlIG9mIGV2ZW50IGhhbmRsZXJzIGNvcnJlY3RseSBiZWZvcmUgdGhhdCBoYXBwZW5zXG5cblxuICAgICAgICBvbihfdGhpcy5lbF8uY29udGVudFdpbmRvdywgJ3VubG9hZCcsIHVubG9hZExpc3RlbmVyXyk7XG4gICAgICAgIG9uKF90aGlzLmVsXy5jb250ZW50V2luZG93LCAncmVzaXplJywgZGVib3VuY2VkSGFuZGxlcl8pO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMub25lKCdsb2FkJywgX3RoaXMubG9hZExpc3RlbmVyXyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IFJlc2l6ZU1hbmFnZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5jcmVhdGVFbCA9IGZ1bmN0aW9uIGNyZWF0ZUVsKCkge1xuICAgIHJldHVybiBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdpZnJhbWUnLCB7XG4gICAgICBjbGFzc05hbWU6ICd2anMtcmVzaXplLW1hbmFnZXInLFxuICAgICAgdGFiSW5kZXg6IC0xXG4gICAgfSwge1xuICAgICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGEgcmVzaXplIGlzIHRyaWdnZXJlZCBvbiB0aGUgaWZyYW1lIG9yIGEgcmVzaXplIGlzIG9ic2VydmVkIHZpYSB0aGUgUmVzaXplT2JzZXJ2ZXJcbiAgICpcbiAgICogQGZpcmVzIFBsYXllciNwbGF5ZXJyZXNpemVcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVzaXplSGFuZGxlciA9IGZ1bmN0aW9uIHJlc2l6ZUhhbmRsZXIoKSB7XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gdGhlIHBsYXllciBzaXplIGhhcyBjaGFuZ2VkXG4gICAgICpcbiAgICAgKiBAZXZlbnQgUGxheWVyI3BsYXllcnJlc2l6ZVxuICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgKi9cbiAgICAvLyBtYWtlIHN1cmUgcGxheWVyIGlzIHN0aWxsIGFyb3VuZCB0byB0cmlnZ2VyXG4gICAgLy8gcHJldmVudHMgdGhpcyBmcm9tIGNhdXNpbmcgYW4gZXJyb3IgYWZ0ZXIgZGlzcG9zZVxuICAgIGlmICghdGhpcy5wbGF5ZXJfIHx8ICF0aGlzLnBsYXllcl8udHJpZ2dlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucGxheWVyXy50cmlnZ2VyKCdwbGF5ZXJyZXNpemUnKTtcbiAgfTtcblxuICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgaWYgKHRoaXMuZGVib3VuY2VkSGFuZGxlcl8pIHtcbiAgICAgIHRoaXMuZGVib3VuY2VkSGFuZGxlcl8uY2FuY2VsKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmVzaXplT2JzZXJ2ZXJfKSB7XG4gICAgICBpZiAodGhpcy5wbGF5ZXJfLmVsKCkpIHtcbiAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlcl8udW5vYnNlcnZlKHRoaXMucGxheWVyXy5lbCgpKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZXNpemVPYnNlcnZlcl8uZGlzY29ubmVjdCgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmxvYWRMaXN0ZW5lcl8pIHtcbiAgICAgIHRoaXMub2ZmKCdsb2FkJywgdGhpcy5sb2FkTGlzdGVuZXJfKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5lbF8gJiYgdGhpcy5lbF8uY29udGVudFdpbmRvdyAmJiB0aGlzLnVubG9hZExpc3RlbmVyXykge1xuICAgICAgdGhpcy51bmxvYWRMaXN0ZW5lcl8uY2FsbCh0aGlzLmVsXy5jb250ZW50V2luZG93KTtcbiAgICB9XG5cbiAgICB0aGlzLlJlc2l6ZU9ic2VydmVyID0gbnVsbDtcbiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gbnVsbDtcbiAgICB0aGlzLmRlYm91bmNlZEhhbmRsZXJfID0gbnVsbDtcbiAgICB0aGlzLmxvYWRMaXN0ZW5lcl8gPSBudWxsO1xuXG4gICAgX0NvbXBvbmVudC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICB9O1xuXG4gIHJldHVybiBSZXNpemVNYW5hZ2VyO1xufShDb21wb25lbnQpO1xuXG5Db21wb25lbnQucmVnaXN0ZXJDb21wb25lbnQoJ1Jlc2l6ZU1hbmFnZXInLCBSZXNpemVNYW5hZ2VyKTtcblxuLyogdHJhY2sgd2hlbiB3ZSBhcmUgYXQgdGhlIGxpdmUgZWRnZSwgYW5kIG90aGVyIGhlbHBlcnMgZm9yIGxpdmUgcGxheWJhY2sgKi9cblxudmFyIExpdmVUcmFja2VyID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0c0xvb3NlKExpdmVUcmFja2VyLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBMaXZlVHJhY2tlcihwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICAvLyBMaXZlVHJhY2tlciBkb2VzIG5vdCBuZWVkIGFuIGVsZW1lbnRcbiAgICB2YXIgb3B0aW9uc18gPSBtZXJnZU9wdGlvbnMoe1xuICAgICAgY3JlYXRlRWw6IGZhbHNlXG4gICAgfSwgb3B0aW9ucyk7XG4gICAgX3RoaXMgPSBfQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zXykgfHwgdGhpcztcblxuICAgIF90aGlzLnJlc2V0XygpO1xuXG4gICAgX3RoaXMub24oX3RoaXMucGxheWVyXywgJ2R1cmF0aW9uY2hhbmdlJywgX3RoaXMuaGFuZGxlRHVyYXRpb25jaGFuZ2UpOyAvLyB3ZSBkb24ndCBuZWVkIHRvIHRyYWNrIGxpdmUgcGxheWJhY2sgaWYgdGhlIGRvY3VtZW50IGlzIGhpZGRlbixcbiAgICAvLyBhbHNvLCB0cmFja2luZyB3aGVuIHRoZSBkb2N1bWVudCBpcyBoaWRkZW4gY2FuXG4gICAgLy8gY2F1c2UgdGhlIENQVSB0byBzcGlrZSBhbmQgZXZlbnR1YWxseSBjcmFzaCB0aGUgcGFnZSBvbiBJRTExLlxuXG5cbiAgICBpZiAoSUVfVkVSU0lPTiAmJiAnaGlkZGVuJyBpbiBkb2N1bWVudCAmJiAndmlzaWJpbGl0eVN0YXRlJyBpbiBkb2N1bWVudCkge1xuICAgICAgX3RoaXMub24oZG9jdW1lbnQsICd2aXNpYmlsaXR5Y2hhbmdlJywgX3RoaXMuaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IExpdmVUcmFja2VyLnByb3RvdHlwZTtcblxuICBfcHJvdG8uaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UoKSB7XG4gICAgaWYgKHRoaXMucGxheWVyXy5kdXJhdGlvbigpICE9PSBJbmZpbml0eSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChkb2N1bWVudC5oaWRkZW4pIHtcbiAgICAgIHRoaXMuc3RvcFRyYWNraW5nKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhcnRUcmFja2luZygpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uaXNCZWhpbmRfID0gZnVuY3Rpb24gaXNCZWhpbmRfKCkge1xuICAgIC8vIGRvbid0IHJlcG9ydCB0aGF0IHdlIGFyZSBiZWhpbmQgdW50aWwgYSB0aW1ldXBkYXRlIGhhcyBiZWVuIHNlZW5cbiAgICBpZiAoIXRoaXMudGltZXVwZGF0ZVNlZW5fKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGxpdmVDdXJyZW50VGltZSA9IHRoaXMubGl2ZUN1cnJlbnRUaW1lKCk7XG4gICAgdmFyIGN1cnJlbnRUaW1lID0gdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCk7XG4gICAgdmFyIHNlZWthYmxlSW5jcmVtZW50ID0gdGhpcy5zZWVrYWJsZUluY3JlbWVudF87IC8vIHRoZSBsaXZlIGVkZ2Ugd2luZG93IGlzIHRoZSBhbW91bnQgb2Ygc2Vjb25kcyBhd2F5IGZyb20gbGl2ZVxuICAgIC8vIHRoYXQgYSBwbGF5ZXIgY2FuIGJlLCBidXQgc3RpbGwgYmUgY29uc2lkZXJlZCBsaXZlLlxuICAgIC8vIHdlIGFkZCAwLjA3IGJlY2F1c2UgdGhlIGxpdmUgdHJhY2tpbmcgaGFwcGVucyBldmVyeSAzMG1zXG4gICAgLy8gYW5kIHdlIHdhbnQgc29tZSB3aWdnbGUgcm9vbSBmb3Igc2hvcnQgc2VnbWVudCBsaXZlIHBsYXliYWNrXG5cbiAgICB2YXIgbGl2ZUVkZ2VXaW5kb3cgPSBzZWVrYWJsZUluY3JlbWVudCAqIDIgKyAwLjA3OyAvLyBvbiBBbmRyb2lkIGxpdmVDdXJyZW50VGltZSBjYW4gYmVlIEluZmluaXR5LCBiZWNhdXNlIHNlZWthYmxlRW5kXG4gICAgLy8gY2FuIGJlIEluZmluaXR5LCBzbyB3ZSBoYW5kbGUgdGhhdCBjYXNlLlxuXG4gICAgcmV0dXJuIGxpdmVDdXJyZW50VGltZSAhPT0gSW5maW5pdHkgJiYgbGl2ZUN1cnJlbnRUaW1lIC0gbGl2ZUVkZ2VXaW5kb3cgPj0gY3VycmVudFRpbWU7XG4gIH0gLy8gYWxsIHRoZSBmdW5jdGlvbmFsaXR5IGZvciB0cmFja2luZyB3aGVuIHNlZWsgZW5kIGNoYW5nZXNcbiAgLy8gYW5kIGZvciB0cmFja2luZyBob3cgZmFyIHBhc3Qgc2VlayBlbmQgd2Ugc2hvdWxkIGJlXG4gIDtcblxuICBfcHJvdG8udHJhY2tMaXZlXyA9IGZ1bmN0aW9uIHRyYWNrTGl2ZV8oKSB7XG4gICAgdGhpcy5wYXN0U2Vla0VuZF8gPSB0aGlzLnBhc3RTZWVrRW5kXztcbiAgICB2YXIgc2Vla2FibGUgPSB0aGlzLnBsYXllcl8uc2Vla2FibGUoKTsgLy8gc2tpcCB1bmRlZmluZWQgc2Vla2FibGVcblxuICAgIGlmICghc2Vla2FibGUgfHwgIXNlZWthYmxlLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXdTZWVrRW5kID0gdGhpcy5zZWVrYWJsZUVuZCgpOyAvLyB3ZSBjYW4gb25seSB0ZWxsIGlmIHdlIGFyZSBiZWhpbmQgbGl2ZSwgd2hlbiBzZWVrYWJsZSBjaGFuZ2VzXG4gICAgLy8gb25jZSB3ZSBkZXRlY3QgdGhhdCBzZWVrYWJsZSBoYXMgY2hhbmdlZCB3ZSBjaGVjayB0aGUgbmV3IHNlZWtcbiAgICAvLyBlbmQgYWdhaW5zdCBjdXJyZW50IHRpbWUsIHdpdGggYSBmdWRnZSB2YWx1ZSBvZiBoYWxmIGEgc2Vjb25kLlxuXG4gICAgaWYgKG5ld1NlZWtFbmQgIT09IHRoaXMubGFzdFNlZWtFbmRfKSB7XG4gICAgICBpZiAodGhpcy5sYXN0U2Vla0VuZF8pIHtcbiAgICAgICAgdGhpcy5zZWVrYWJsZUluY3JlbWVudF8gPSBNYXRoLmFicyhuZXdTZWVrRW5kIC0gdGhpcy5sYXN0U2Vla0VuZF8pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnBhc3RTZWVrRW5kXyA9IDA7XG4gICAgICB0aGlzLmxhc3RTZWVrRW5kXyA9IG5ld1NlZWtFbmQ7XG4gICAgICB0aGlzLnRyaWdnZXIoJ3NlZWthYmxlZW5kY2hhbmdlJyk7XG4gICAgfVxuXG4gICAgdGhpcy5wYXN0U2Vla0VuZF8gPSB0aGlzLnBhc3RTZWVrRW5kKCkgKyAwLjAzO1xuXG4gICAgaWYgKHRoaXMuaXNCZWhpbmRfKCkgIT09IHRoaXMuYmVoaW5kTGl2ZUVkZ2UoKSkge1xuICAgICAgdGhpcy5iZWhpbmRMaXZlRWRnZV8gPSB0aGlzLmlzQmVoaW5kXygpO1xuICAgICAgdGhpcy50cmlnZ2VyKCdsaXZlZWRnZWNoYW5nZScpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogaGFuZGxlIGEgZHVyYXRpb25jaGFuZ2UgZXZlbnQgb24gdGhlIHBsYXllclxuICAgKiBhbmQgc3RhcnQvc3RvcCB0cmFja2luZyBhY2NvcmRpbmdseS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlRHVyYXRpb25jaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVEdXJhdGlvbmNoYW5nZSgpIHtcbiAgICBpZiAodGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCkgPT09IEluZmluaXR5KSB7XG4gICAgICB0aGlzLnN0YXJ0VHJhY2tpbmcoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdG9wVHJhY2tpbmcoKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIHN0YXJ0IHRyYWNraW5nIGxpdmUgcGxheWJhY2tcbiAgICovXG4gIDtcblxuICBfcHJvdG8uc3RhcnRUcmFja2luZyA9IGZ1bmN0aW9uIHN0YXJ0VHJhY2tpbmcoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBpZiAodGhpcy5pc1RyYWNraW5nKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnRyYWNraW5nSW50ZXJ2YWxfID0gdGhpcy5zZXRJbnRlcnZhbCh0aGlzLnRyYWNrTGl2ZV8sIDMwKTtcbiAgICB0aGlzLnRyYWNrTGl2ZV8oKTtcbiAgICB0aGlzLm9uKHRoaXMucGxheWVyXywgJ3BsYXknLCB0aGlzLnRyYWNrTGl2ZV8pO1xuICAgIHRoaXMub24odGhpcy5wbGF5ZXJfLCAncGF1c2UnLCB0aGlzLnRyYWNrTGl2ZV8pO1xuICAgIHRoaXMub25lKHRoaXMucGxheWVyXywgJ3BsYXknLCB0aGlzLmhhbmRsZVBsYXkpOyAvLyB0aGlzIGlzIHRvIHByZXZlbnQgc2hvd2luZyB0aGF0IHdlIGFyZSBub3QgbGl2ZVxuICAgIC8vIGJlZm9yZSBhIHZpZGVvIHN0YXJ0cyB0byBwbGF5XG5cbiAgICBpZiAoIXRoaXMudGltZXVwZGF0ZVNlZW5fKSB7XG4gICAgICB0aGlzLmhhbmRsZVRpbWV1cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMi50aW1ldXBkYXRlU2Vlbl8gPSB0cnVlO1xuICAgICAgICBfdGhpczIuaGFuZGxlVGltZXVwZGF0ZSA9IG51bGw7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLm9uZSh0aGlzLnBsYXllcl8sICd0aW1ldXBkYXRlJywgdGhpcy5oYW5kbGVUaW1ldXBkYXRlKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLmhhbmRsZVBsYXkgPSBmdW5jdGlvbiBoYW5kbGVQbGF5KCkge1xuICAgIHRoaXMub25lKHRoaXMucGxheWVyXywgJ3RpbWV1cGRhdGUnLCB0aGlzLnNlZWtUb0xpdmVFZGdlKTtcbiAgfVxuICAvKipcbiAgICogU3RvcCB0cmFja2luZywgYW5kIHNldCBhbGwgaW50ZXJuYWwgdmFyaWFibGVzIHRvXG4gICAqIHRoZWlyIGluaXRpYWwgdmFsdWUuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlc2V0XyA9IGZ1bmN0aW9uIHJlc2V0XygpIHtcbiAgICB0aGlzLnBhc3RTZWVrRW5kXyA9IDA7XG4gICAgdGhpcy5sYXN0U2Vla0VuZF8gPSBudWxsO1xuICAgIHRoaXMuYmVoaW5kTGl2ZUVkZ2VfID0gbnVsbDtcbiAgICB0aGlzLnRpbWV1cGRhdGVTZWVuXyA9IGZhbHNlO1xuICAgIHRoaXMuY2xlYXJJbnRlcnZhbCh0aGlzLnRyYWNraW5nSW50ZXJ2YWxfKTtcbiAgICB0aGlzLnRyYWNraW5nSW50ZXJ2YWxfID0gbnVsbDtcbiAgICB0aGlzLnNlZWthYmxlSW5jcmVtZW50XyA9IDEyO1xuICAgIHRoaXMub2ZmKHRoaXMucGxheWVyXywgJ3BsYXknLCB0aGlzLnRyYWNrTGl2ZV8pO1xuICAgIHRoaXMub2ZmKHRoaXMucGxheWVyXywgJ3BhdXNlJywgdGhpcy50cmFja0xpdmVfKTtcbiAgICB0aGlzLm9mZih0aGlzLnBsYXllcl8sICdwbGF5JywgdGhpcy5oYW5kbGVQbGF5KTtcbiAgICB0aGlzLm9mZih0aGlzLnBsYXllcl8sICd0aW1ldXBkYXRlJywgdGhpcy5zZWVrVG9MaXZlRWRnZSk7XG5cbiAgICBpZiAodGhpcy5oYW5kbGVUaW1ldXBkYXRlKSB7XG4gICAgICB0aGlzLm9mZih0aGlzLnBsYXllcl8sICd0aW1ldXBkYXRlJywgdGhpcy5oYW5kbGVUaW1ldXBkYXRlKTtcbiAgICAgIHRoaXMuaGFuZGxlVGltZXVwZGF0ZSA9IG51bGw7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBzdG9wIHRyYWNraW5nIGxpdmUgcGxheWJhY2tcbiAgICovXG4gIDtcblxuICBfcHJvdG8uc3RvcFRyYWNraW5nID0gZnVuY3Rpb24gc3RvcFRyYWNraW5nKCkge1xuICAgIGlmICghdGhpcy5pc1RyYWNraW5nKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnJlc2V0XygpO1xuICB9XG4gIC8qKlxuICAgKiBBIGhlbHBlciB0byBnZXQgdGhlIHBsYXllciBzZWVrYWJsZSBlbmRcbiAgICogc28gdGhhdCB3ZSBkb24ndCBoYXZlIHRvIG51bGwgY2hlY2sgZXZlcnl3aGVyZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zZWVrYWJsZUVuZCA9IGZ1bmN0aW9uIHNlZWthYmxlRW5kKCkge1xuICAgIHZhciBzZWVrYWJsZSA9IHRoaXMucGxheWVyXy5zZWVrYWJsZSgpO1xuICAgIHZhciBzZWVrYWJsZUVuZHMgPSBbXTtcbiAgICB2YXIgaSA9IHNlZWthYmxlID8gc2Vla2FibGUubGVuZ3RoIDogMDtcblxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHNlZWthYmxlRW5kcy5wdXNoKHNlZWthYmxlLmVuZChpKSk7XG4gICAgfSAvLyBncmFiIHRoZSBmdXJ0aGVzdCBzZWVrYWJsZSBlbmQgYWZ0ZXIgc29ydGluZywgb3IgaWYgdGhlcmUgYXJlIG5vbmVcbiAgICAvLyBkZWZhdWx0IHRvIEluZmluaXR5XG5cblxuICAgIHJldHVybiBzZWVrYWJsZUVuZHMubGVuZ3RoID8gc2Vla2FibGVFbmRzLnNvcnQoKVtzZWVrYWJsZUVuZHMubGVuZ3RoIC0gMV0gOiBJbmZpbml0eTtcbiAgfVxuICAvKipcbiAgICogQSBoZWxwZXIgdG8gZ2V0IHRoZSBwbGF5ZXIgc2Vla2FibGUgc3RhcnRcbiAgICogc28gdGhhdCB3ZSBkb24ndCBoYXZlIHRvIG51bGwgY2hlY2sgZXZlcnl3aGVyZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zZWVrYWJsZVN0YXJ0ID0gZnVuY3Rpb24gc2Vla2FibGVTdGFydCgpIHtcbiAgICB2YXIgc2Vla2FibGUgPSB0aGlzLnBsYXllcl8uc2Vla2FibGUoKTtcbiAgICB2YXIgc2Vla2FibGVTdGFydHMgPSBbXTtcbiAgICB2YXIgaSA9IHNlZWthYmxlID8gc2Vla2FibGUubGVuZ3RoIDogMDtcblxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHNlZWthYmxlU3RhcnRzLnB1c2goc2Vla2FibGUuc3RhcnQoaSkpO1xuICAgIH0gLy8gZ3JhYiB0aGUgZmlyc3Qgc2Vla2FibGUgc3RhcnQgYWZ0ZXIgc29ydGluZywgb3IgaWYgdGhlcmUgYXJlIG5vbmVcbiAgICAvLyBkZWZhdWx0IHRvIDBcblxuXG4gICAgcmV0dXJuIHNlZWthYmxlU3RhcnRzLmxlbmd0aCA/IHNlZWthYmxlU3RhcnRzLnNvcnQoKVswXSA6IDA7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgbGl2ZSB0aW1lIHdpbmRvd1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5saXZlV2luZG93ID0gZnVuY3Rpb24gbGl2ZVdpbmRvdygpIHtcbiAgICB2YXIgbGl2ZUN1cnJlbnRUaW1lID0gdGhpcy5saXZlQ3VycmVudFRpbWUoKTtcblxuICAgIGlmIChsaXZlQ3VycmVudFRpbWUgPT09IEluZmluaXR5KSB7XG4gICAgICByZXR1cm4gSW5maW5pdHk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpdmVDdXJyZW50VGltZSAtIHRoaXMuc2Vla2FibGVTdGFydCgpO1xuICB9XG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBwbGF5ZXIgaXMgbGl2ZSwgb25seSBjaGVja3MgaWYgdGhpcyBjb21wb25lbnRcbiAgICogaXMgdHJhY2tpbmcgbGl2ZSBwbGF5YmFjayBvciBub3RcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaXNMaXZlID0gZnVuY3Rpb24gaXNMaXZlKCkge1xuICAgIHJldHVybiB0aGlzLmlzVHJhY2tpbmcoKTtcbiAgfVxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiBjdXJyZW50VGltZSBpcyBhdCB0aGUgbGl2ZSBlZGdlIGFuZCB3b24ndCBmYWxsIGJlaGluZFxuICAgKiBvbiBlYWNoIHNlZWthYmxlZW5kY2hhbmdlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmF0TGl2ZUVkZ2UgPSBmdW5jdGlvbiBhdExpdmVFZGdlKCkge1xuICAgIHJldHVybiAhdGhpcy5iZWhpbmRMaXZlRWRnZSgpO1xuICB9XG4gIC8qKlxuICAgKiBnZXQgd2hhdCB3ZSBleHBlY3QgdGhlIGxpdmUgY3VycmVudCB0aW1lIHRvIGJlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmxpdmVDdXJyZW50VGltZSA9IGZ1bmN0aW9uIGxpdmVDdXJyZW50VGltZSgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXN0U2Vla0VuZCgpICsgdGhpcy5zZWVrYWJsZUVuZCgpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGhvdyBmYXIgcGFzdCBzZWVrIGVuZCB3ZSBleHBlY3QgY3VycmVudCB0aW1lIHRvIGJlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhc3RTZWVrRW5kID0gZnVuY3Rpb24gcGFzdFNlZWtFbmQoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFzdFNlZWtFbmRfO1xuICB9XG4gIC8qKlxuICAgKiBJZiB3ZSBhcmUgY3VycmVudGx5IGJlaGluZCB0aGUgbGl2ZSBlZGdlLCBha2EgY3VycmVudFRpbWUgd2lsbCBiZVxuICAgKiBiZWhpbmQgb24gYSBzZWVrYWJsZWVuZGNoYW5nZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5iZWhpbmRMaXZlRWRnZSA9IGZ1bmN0aW9uIGJlaGluZExpdmVFZGdlKCkge1xuICAgIHJldHVybiB0aGlzLmJlaGluZExpdmVFZGdlXztcbiAgfTtcblxuICBfcHJvdG8uaXNUcmFja2luZyA9IGZ1bmN0aW9uIGlzVHJhY2tpbmcoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLnRyYWNraW5nSW50ZXJ2YWxfID09PSAnbnVtYmVyJztcbiAgfVxuICAvKipcbiAgICogU2VlayB0byB0aGUgbGl2ZSBlZGdlIGlmIHdlIGFyZSBiZWhpbmQgdGhlIGxpdmUgZWRnZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zZWVrVG9MaXZlRWRnZSA9IGZ1bmN0aW9uIHNlZWtUb0xpdmVFZGdlKCkge1xuICAgIGlmICh0aGlzLmF0TGl2ZUVkZ2UoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucGxheWVyXy5jdXJyZW50VGltZSh0aGlzLmxpdmVDdXJyZW50VGltZSgpKTtcblxuICAgIGlmICh0aGlzLnBsYXllcl8ucGF1c2VkKCkpIHtcbiAgICAgIHRoaXMucGxheWVyXy5wbGF5KCk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICB0aGlzLnN0b3BUcmFja2luZygpO1xuXG4gICAgX0NvbXBvbmVudC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICB9O1xuXG4gIHJldHVybiBMaXZlVHJhY2tlcjtcbn0oQ29tcG9uZW50KTtcblxuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdMaXZlVHJhY2tlcicsIExpdmVUcmFja2VyKTtcblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gZmlyZSBhIHNvdXJjZXNldCB3aGVuIHRoZXJlIGlzIHNvbWV0aGluZ1xuICogc2ltaWxhciB0byBgbWVkaWFFbC5sb2FkKClgIGJlaW5nIGNhbGxlZC4gSXQgd2lsbCB0cnkgdG8gZmluZCB0aGUgc291cmNlIHZpYVxuICogdGhlIGBzcmNgIGF0dHJpYnV0ZSBhbmQgdGhlbiB0aGUgYDxzb3VyY2U+YCBlbGVtZW50cy4gSXQgd2lsbCB0aGVuIGZpcmUgYHNvdXJjZXNldGBcbiAqIHdpdGggdGhlIHNvdXJjZSB0aGF0IHdhcyBmb3VuZCBvciBlbXB0eSBzdHJpbmcgaWYgd2UgY2Fubm90IGtub3cuIElmIGl0IGNhbm5vdFxuICogZmluZCBhIHNvdXJjZSB0aGVuIGBzb3VyY2VzZXRgIHdpbGwgbm90IGJlIGZpcmVkLlxuICpcbiAqIEBwYXJhbSB7SHRtbDV9IHRlY2hcbiAqICAgICAgICBUaGUgdGVjaCBvYmplY3QgdGhhdCBzb3VyY2VzZXQgd2FzIHNldHVwIG9uXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqICAgICAgICAgcmV0dXJucyBmYWxzZSBpZiB0aGUgc291cmNlc2V0IHdhcyBub3QgZmlyZWQgYW5kIHRydWUgb3RoZXJ3aXNlLlxuICovXG5cbnZhciBzb3VyY2VzZXRMb2FkID0gZnVuY3Rpb24gc291cmNlc2V0TG9hZCh0ZWNoKSB7XG4gIHZhciBlbCA9IHRlY2guZWwoKTsgLy8gaWYgYGVsLnNyY2AgaXMgc2V0LCB0aGF0IHNvdXJjZSB3aWxsIGJlIGxvYWRlZC5cblxuICBpZiAoZWwuaGFzQXR0cmlidXRlKCdzcmMnKSkge1xuICAgIHRlY2gudHJpZ2dlclNvdXJjZXNldChlbC5zcmMpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBTaW5jZSB0aGVyZSBpc24ndCBhIHNyYyBwcm9wZXJ0eSBvbiB0aGUgbWVkaWEgZWxlbWVudCwgc291cmNlIGVsZW1lbnRzIHdpbGwgYmUgdXNlZCBmb3JcbiAgICogaW1wbGVtZW50aW5nIHRoZSBzb3VyY2Ugc2VsZWN0aW9uIGFsZ29yaXRobS4gVGhpcyBoYXBwZW5zIGFzeW5jaHJvbm91c2x5IGFuZFxuICAgKiBmb3IgbW9zdCBjYXNlcyB3ZXJlIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmUgc291cmNlIHdlIGNhbm5vdCB0ZWxsIHdoYXQgc291cmNlIHdpbGxcbiAgICogYmUgbG9hZGVkLCB3aXRob3V0IHJlLWltcGxlbWVudGluZyB0aGUgc291cmNlIHNlbGVjdGlvbiBhbGdvcml0aG0uIEF0IHRoaXMgdGltZSB3ZSBhcmUgbm90XG4gICAqIGdvaW5nIHRvIGRvIHRoYXQuIFRoZXJlIGFyZSB0aHJlZSBzcGVjaWFsIGNhc2VzIHRoYXQgd2UgZG8gaGFuZGxlIGhlcmUgdGhvdWdoOlxuICAgKlxuICAgKiAxLiBJZiB0aGVyZSBhcmUgbm8gc291cmNlcywgZG8gbm90IGZpcmUgYHNvdXJjZXNldGAuXG4gICAqIDIuIElmIHRoZXJlIGlzIG9ubHkgb25lIGA8c291cmNlPmAgd2l0aCBhIGBzcmNgIHByb3BlcnR5L2F0dHJpYnV0ZSB0aGF0IGlzIG91ciBgc3JjYFxuICAgKiAzLiBJZiB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIGA8c291cmNlPmAgYnV0IGFsbCBvZiB0aGVtIGhhdmUgdGhlIHNhbWUgYHNyY2AgdXJsLlxuICAgKiAgICBUaGF0IHdpbGwgYmUgb3VyIHNyYy5cbiAgICovXG5cblxuICB2YXIgc291cmNlcyA9IHRlY2guJCQoJ3NvdXJjZScpO1xuICB2YXIgc3JjVXJscyA9IFtdO1xuICB2YXIgc3JjID0gJyc7IC8vIGlmIHRoZXJlIGFyZSBubyBzb3VyY2VzLCBkbyBub3QgZmlyZSBzb3VyY2VzZXRcblxuICBpZiAoIXNvdXJjZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IC8vIG9ubHkgY291bnQgdmFsaWQvbm9uLWR1cGxpY2F0ZSBzb3VyY2UgZWxlbWVudHNcblxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc291cmNlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciB1cmwgPSBzb3VyY2VzW2ldLnNyYztcblxuICAgIGlmICh1cmwgJiYgc3JjVXJscy5pbmRleE9mKHVybCkgPT09IC0xKSB7XG4gICAgICBzcmNVcmxzLnB1c2godXJsKTtcbiAgICB9XG4gIH0gLy8gdGhlcmUgd2VyZSBubyB2YWxpZCBzb3VyY2VzXG5cblxuICBpZiAoIXNyY1VybHMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IC8vIHRoZXJlIGlzIG9ubHkgb25lIHZhbGlkIHNvdXJjZSBlbGVtZW50IHVybFxuICAvLyB1c2UgdGhhdFxuXG5cbiAgaWYgKHNyY1VybHMubGVuZ3RoID09PSAxKSB7XG4gICAgc3JjID0gc3JjVXJsc1swXTtcbiAgfVxuXG4gIHRlY2gudHJpZ2dlclNvdXJjZXNldChzcmMpO1xuICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbiAqIG91ciBpbXBsZW1lbnRhdGlvbiBvZiBhbiBgaW5uZXJIVE1MYCBkZXNjcmlwdG9yIGZvciBicm93c2Vyc1xuICogdGhhdCBkbyBub3QgaGF2ZSBvbmUuXG4gKi9cblxuXG52YXIgaW5uZXJIVE1MRGVzY3JpcHRvclBvbHlmaWxsID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAnaW5uZXJIVE1MJywge1xuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gdGhpcy5jbG9uZU5vZGUodHJ1ZSkuaW5uZXJIVE1MO1xuICB9LFxuICBzZXQ6IGZ1bmN0aW9uIHNldCh2KSB7XG4gICAgLy8gbWFrZSBhIGR1bW15IG5vZGUgdG8gdXNlIGlubmVySFRNTCBvblxuICAgIHZhciBkdW1teSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKTsgLy8gc2V0IGlubmVySFRNTCB0byB0aGUgdmFsdWUgcHJvdmlkZWRcblxuICAgIGR1bW15LmlubmVySFRNTCA9IHY7IC8vIG1ha2UgYSBkb2N1bWVudCBmcmFnbWVudCB0byBob2xkIHRoZSBub2RlcyBmcm9tIGR1bW15XG5cbiAgICB2YXIgZG9jRnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsgLy8gY29weSBhbGwgb2YgdGhlIG5vZGVzIGNyZWF0ZWQgYnkgdGhlIGlubmVySFRNTCBvbiBkdW1teVxuICAgIC8vIHRvIHRoZSBkb2N1bWVudCBmcmFnbWVudFxuXG4gICAgd2hpbGUgKGR1bW15LmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBkb2NGcmFnLmFwcGVuZENoaWxkKGR1bW15LmNoaWxkTm9kZXNbMF0pO1xuICAgIH0gLy8gcmVtb3ZlIGNvbnRlbnRcblxuXG4gICAgdGhpcy5pbm5lclRleHQgPSAnJzsgLy8gbm93IHdlIGFkZCBhbGwgb2YgdGhhdCBodG1sIGluIG9uZSBieSBhcHBlbmRpbmcgdGhlXG4gICAgLy8gZG9jdW1lbnQgZnJhZ21lbnQuIFRoaXMgaXMgaG93IGlubmVySFRNTCBkb2VzIGl0LlxuXG4gICAgd2luZG93JDEuRWxlbWVudC5wcm90b3R5cGUuYXBwZW5kQ2hpbGQuY2FsbCh0aGlzLCBkb2NGcmFnKTsgLy8gdGhlbiByZXR1cm4gdGhlIHJlc3VsdCB0aGF0IGlubmVySFRNTCdzIHNldHRlciB3b3VsZFxuXG4gICAgcmV0dXJuIHRoaXMuaW5uZXJIVE1MO1xuICB9XG59KTtcbi8qKlxuICogR2V0IGEgcHJvcGVydHkgZGVzY3JpcHRvciBnaXZlbiBhIGxpc3Qgb2YgcHJpb3JpdGllcyBhbmQgdGhlXG4gKiBwcm9wZXJ0eSB0byBnZXQuXG4gKi9cblxudmFyIGdldERlc2NyaXB0b3IgPSBmdW5jdGlvbiBnZXREZXNjcmlwdG9yKHByaW9yaXR5LCBwcm9wKSB7XG4gIHZhciBkZXNjcmlwdG9yID0ge307XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmlvcml0eS5sZW5ndGg7IGkrKykge1xuICAgIGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByaW9yaXR5W2ldLCBwcm9wKTtcblxuICAgIGlmIChkZXNjcmlwdG9yICYmIGRlc2NyaXB0b3Iuc2V0ICYmIGRlc2NyaXB0b3IuZ2V0KSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSB0cnVlO1xuICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gIHJldHVybiBkZXNjcmlwdG9yO1xufTtcblxudmFyIGdldElubmVySFRNTERlc2NyaXB0b3IgPSBmdW5jdGlvbiBnZXRJbm5lckhUTUxEZXNjcmlwdG9yKHRlY2gpIHtcbiAgcmV0dXJuIGdldERlc2NyaXB0b3IoW3RlY2guZWwoKSwgd2luZG93JDEuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUsIHdpbmRvdyQxLkVsZW1lbnQucHJvdG90eXBlLCBpbm5lckhUTUxEZXNjcmlwdG9yUG9seWZpbGxdLCAnaW5uZXJIVE1MJyk7XG59O1xuLyoqXG4gKiBQYXRjaGVzIGJyb3dzZXIgaW50ZXJuYWwgZnVuY3Rpb25zIHNvIHRoYXQgd2UgY2FuIHRlbGwgc3luY2hyb25vdXNseVxuICogaWYgYSBgPHNvdXJjZT5gIHdhcyBhcHBlbmRlZCB0byB0aGUgbWVkaWEgZWxlbWVudC4gRm9yIHNvbWUgcmVhc29uIHRoaXNcbiAqIGNhdXNlcyBhIGBzb3VyY2VzZXRgIGlmIHRoZSB0aGUgbWVkaWEgZWxlbWVudCBpcyByZWFkeSBhbmQgaGFzIG5vIHNvdXJjZS5cbiAqIFRoaXMgaGFwcGVucyB3aGVuOlxuICogLSBUaGUgcGFnZSBoYXMganVzdCBsb2FkZWQgYW5kIHRoZSBtZWRpYSBlbGVtZW50IGRvZXMgbm90IGhhdmUgYSBzb3VyY2UuXG4gKiAtIFRoZSBtZWRpYSBlbGVtZW50IHdhcyBlbXB0aWVkIG9mIGFsbCBzb3VyY2VzLCB0aGVuIGBsb2FkKClgIHdhcyBjYWxsZWQuXG4gKlxuICogSXQgZG9lcyB0aGlzIGJ5IHBhdGNoaW5nIHRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zL3Byb3BlcnRpZXMgd2hlbiB0aGV5IGFyZSBzdXBwb3J0ZWQ6XG4gKlxuICogLSBgYXBwZW5kKClgIC0gY2FuIGJlIHVzZWQgdG8gYWRkIGEgYDxzb3VyY2U+YCBlbGVtZW50IHRvIHRoZSBtZWRpYSBlbGVtZW50XG4gKiAtIGBhcHBlbmRDaGlsZCgpYCAtIGNhbiBiZSB1c2VkIHRvIGFkZCBhIGA8c291cmNlPmAgZWxlbWVudCB0byB0aGUgbWVkaWEgZWxlbWVudFxuICogLSBgaW5zZXJ0QWRqYWNlbnRIVE1MKClgIC0gIGNhbiBiZSB1c2VkIHRvIGFkZCBhIGA8c291cmNlPmAgZWxlbWVudCB0byB0aGUgbWVkaWEgZWxlbWVudFxuICogLSBgaW5uZXJIVE1MYCAtICBjYW4gYmUgdXNlZCB0byBhZGQgYSBgPHNvdXJjZT5gIGVsZW1lbnQgdG8gdGhlIG1lZGlhIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0h0bWw1fSB0ZWNoXG4gKiAgICAgICAgVGhlIHRlY2ggb2JqZWN0IHRoYXQgc291cmNlc2V0IGlzIGJlaW5nIHNldHVwIG9uLlxuICovXG5cblxudmFyIGZpcnN0U291cmNlV2F0Y2ggPSBmdW5jdGlvbiBmaXJzdFNvdXJjZVdhdGNoKHRlY2gpIHtcbiAgdmFyIGVsID0gdGVjaC5lbCgpOyAvLyBtYWtlIHN1cmUgZmlyc3RTb3VyY2VXYXRjaCBpc24ndCBzZXR1cCB0d2ljZS5cblxuICBpZiAoZWwucmVzZXRTb3VyY2VXYXRjaF8pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgb2xkID0ge307XG4gIHZhciBpbm5lckRlc2NyaXB0b3IgPSBnZXRJbm5lckhUTUxEZXNjcmlwdG9yKHRlY2gpO1xuXG4gIHZhciBhcHBlbmRXcmFwcGVyID0gZnVuY3Rpb24gYXBwZW5kV3JhcHBlcihhcHBlbmRGbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgdmFyIHJldHZhbCA9IGFwcGVuZEZuLmFwcGx5KGVsLCBhcmdzKTtcbiAgICAgIHNvdXJjZXNldExvYWQodGVjaCk7XG4gICAgICByZXR1cm4gcmV0dmFsO1xuICAgIH07XG4gIH07XG5cbiAgWydhcHBlbmQnLCAnYXBwZW5kQ2hpbGQnLCAnaW5zZXJ0QWRqYWNlbnRIVE1MJ10uZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgIGlmICghZWxba10pIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIHN0b3JlIHRoZSBvbGQgZnVuY3Rpb25cblxuXG4gICAgb2xkW2tdID0gZWxba107IC8vIGNhbGwgdGhlIG9sZCBmdW5jdGlvbiB3aXRoIGEgc291cmNlc2V0IGlmIGEgc291cmNlXG4gICAgLy8gd2FzIGxvYWRlZFxuXG4gICAgZWxba10gPSBhcHBlbmRXcmFwcGVyKG9sZFtrXSk7XG4gIH0pO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWwsICdpbm5lckhUTUwnLCBtZXJnZU9wdGlvbnMoaW5uZXJEZXNjcmlwdG9yLCB7XG4gICAgc2V0OiBhcHBlbmRXcmFwcGVyKGlubmVyRGVzY3JpcHRvci5zZXQpXG4gIH0pKTtcblxuICBlbC5yZXNldFNvdXJjZVdhdGNoXyA9IGZ1bmN0aW9uICgpIHtcbiAgICBlbC5yZXNldFNvdXJjZVdhdGNoXyA9IG51bGw7XG4gICAgT2JqZWN0LmtleXMob2xkKS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICBlbFtrXSA9IG9sZFtrXTtcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWwsICdpbm5lckhUTUwnLCBpbm5lckRlc2NyaXB0b3IpO1xuICB9OyAvLyBvbiB0aGUgZmlyc3Qgc291cmNlc2V0LCB3ZSBuZWVkIHRvIHJldmVydCBvdXIgY2hhbmdlc1xuXG5cbiAgdGVjaC5vbmUoJ3NvdXJjZXNldCcsIGVsLnJlc2V0U291cmNlV2F0Y2hfKTtcbn07XG4vKipcbiAqIG91ciBpbXBsZW1lbnRhdGlvbiBvZiBhIGBzcmNgIGRlc2NyaXB0b3IgZm9yIGJyb3dzZXJzXG4gKiB0aGF0IGRvIG5vdCBoYXZlIG9uZS5cbiAqL1xuXG5cbnZhciBzcmNEZXNjcmlwdG9yUG9seWZpbGwgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdzcmMnLCB7XG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIGlmICh0aGlzLmhhc0F0dHJpYnV0ZSgnc3JjJykpIHtcbiAgICAgIHJldHVybiBnZXRBYnNvbHV0ZVVSTCh3aW5kb3ckMS5FbGVtZW50LnByb3RvdHlwZS5nZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLCAnc3JjJykpO1xuICAgIH1cblxuICAgIHJldHVybiAnJztcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbiBzZXQodikge1xuICAgIHdpbmRvdyQxLkVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZS5jYWxsKHRoaXMsICdzcmMnLCB2KTtcbiAgICByZXR1cm4gdjtcbiAgfVxufSk7XG5cbnZhciBnZXRTcmNEZXNjcmlwdG9yID0gZnVuY3Rpb24gZ2V0U3JjRGVzY3JpcHRvcih0ZWNoKSB7XG4gIHJldHVybiBnZXREZXNjcmlwdG9yKFt0ZWNoLmVsKCksIHdpbmRvdyQxLkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLCBzcmNEZXNjcmlwdG9yUG9seWZpbGxdLCAnc3JjJyk7XG59O1xuLyoqXG4gKiBzZXR1cCBgc291cmNlc2V0YCBoYW5kbGluZyBvbiB0aGUgYEh0bWw1YCB0ZWNoLiBUaGlzIGZ1bmN0aW9uXG4gKiBwYXRjaGVzIHRoZSBmb2xsb3dpbmcgZWxlbWVudCBwcm9wZXJ0aWVzL2Z1bmN0aW9uczpcbiAqXG4gKiAtIGBzcmNgIC0gdG8gZGV0ZXJtaW5lIHdoZW4gYHNyY2AgaXMgc2V0XG4gKiAtIGBzZXRBdHRyaWJ1dGUoKWAgLSB0byBkZXRlcm1pbmUgd2hlbiBgc3JjYCBpcyBzZXRcbiAqIC0gYGxvYWQoKWAgLSB0aGlzIHJlLXRyaWdnZXJzIHRoZSBzb3VyY2Ugc2VsZWN0aW9uIGFsZ29yaXRobSwgYW5kIGNhblxuICogICAgICAgICAgICAgIGNhdXNlIGEgc291cmNlc2V0LlxuICpcbiAqIElmIHRoZXJlIGlzIG5vIHNvdXJjZSB3aGVuIHdlIGFyZSBhZGRpbmcgYHNvdXJjZXNldGAgc3VwcG9ydCBvciBkdXJpbmcgYSBgbG9hZCgpYFxuICogd2UgYWxzbyBwYXRjaCB0aGUgZnVuY3Rpb25zIGxpc3RlZCBpbiBgZmlyc3RTb3VyY2VXYXRjaGAuXG4gKlxuICogQHBhcmFtIHtIdG1sNX0gdGVjaFxuICogICAgICAgIFRoZSB0ZWNoIHRvIHBhdGNoXG4gKi9cblxuXG52YXIgc2V0dXBTb3VyY2VzZXQgPSBmdW5jdGlvbiBzZXR1cFNvdXJjZXNldCh0ZWNoKSB7XG4gIGlmICghdGVjaC5mZWF0dXJlc1NvdXJjZXNldCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBlbCA9IHRlY2guZWwoKTsgLy8gbWFrZSBzdXJlIHNvdXJjZXNldCBpc24ndCBzZXR1cCB0d2ljZS5cblxuICBpZiAoZWwucmVzZXRTb3VyY2VzZXRfKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHNyY0Rlc2NyaXB0b3IgPSBnZXRTcmNEZXNjcmlwdG9yKHRlY2gpO1xuICB2YXIgb2xkU2V0QXR0cmlidXRlID0gZWwuc2V0QXR0cmlidXRlO1xuICB2YXIgb2xkTG9hZCA9IGVsLmxvYWQ7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbCwgJ3NyYycsIG1lcmdlT3B0aW9ucyhzcmNEZXNjcmlwdG9yLCB7XG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodikge1xuICAgICAgdmFyIHJldHZhbCA9IHNyY0Rlc2NyaXB0b3Iuc2V0LmNhbGwoZWwsIHYpOyAvLyB3ZSB1c2UgdGhlIGdldHRlciBoZXJlIHRvIGdldCB0aGUgYWN0dWFsIHZhbHVlIHNldCBvbiBzcmNcblxuICAgICAgdGVjaC50cmlnZ2VyU291cmNlc2V0KGVsLnNyYyk7XG4gICAgICByZXR1cm4gcmV0dmFsO1xuICAgIH1cbiAgfSkpO1xuXG4gIGVsLnNldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChuLCB2KSB7XG4gICAgdmFyIHJldHZhbCA9IG9sZFNldEF0dHJpYnV0ZS5jYWxsKGVsLCBuLCB2KTtcblxuICAgIGlmICgvc3JjL2kudGVzdChuKSkge1xuICAgICAgdGVjaC50cmlnZ2VyU291cmNlc2V0KGVsLnNyYyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldHZhbDtcbiAgfTtcblxuICBlbC5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXR2YWwgPSBvbGRMb2FkLmNhbGwoZWwpOyAvLyBpZiBsb2FkIHdhcyBjYWxsZWQsIGJ1dCB0aGVyZSB3YXMgbm8gc291cmNlIHRvIGZpcmVcbiAgICAvLyBzb3VyY2VzZXQgb24uIFdlIGhhdmUgdG8gd2F0Y2ggZm9yIGEgc291cmNlIGFwcGVuZFxuICAgIC8vIGFzIHRoYXQgY2FuIHRyaWdnZXIgYSBgc291cmNlc2V0YCB3aGVuIHRoZSBtZWRpYSBlbGVtZW50XG4gICAgLy8gaGFzIG5vIHNvdXJjZVxuXG4gICAgaWYgKCFzb3VyY2VzZXRMb2FkKHRlY2gpKSB7XG4gICAgICB0ZWNoLnRyaWdnZXJTb3VyY2VzZXQoJycpO1xuICAgICAgZmlyc3RTb3VyY2VXYXRjaCh0ZWNoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0dmFsO1xuICB9O1xuXG4gIGlmIChlbC5jdXJyZW50U3JjKSB7XG4gICAgdGVjaC50cmlnZ2VyU291cmNlc2V0KGVsLmN1cnJlbnRTcmMpO1xuICB9IGVsc2UgaWYgKCFzb3VyY2VzZXRMb2FkKHRlY2gpKSB7XG4gICAgZmlyc3RTb3VyY2VXYXRjaCh0ZWNoKTtcbiAgfVxuXG4gIGVsLnJlc2V0U291cmNlc2V0XyA9IGZ1bmN0aW9uICgpIHtcbiAgICBlbC5yZXNldFNvdXJjZXNldF8gPSBudWxsO1xuICAgIGVsLmxvYWQgPSBvbGRMb2FkO1xuICAgIGVsLnNldEF0dHJpYnV0ZSA9IG9sZFNldEF0dHJpYnV0ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWwsICdzcmMnLCBzcmNEZXNjcmlwdG9yKTtcblxuICAgIGlmIChlbC5yZXNldFNvdXJjZVdhdGNoXykge1xuICAgICAgZWwucmVzZXRTb3VyY2VXYXRjaF8oKTtcbiAgICB9XG4gIH07XG59O1xuXG5mdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QkMSgpIHtcbiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsTG9vc2UoW1wiVGV4dCBUcmFja3MgYXJlIGJlaW5nIGxvYWRlZCBmcm9tIGFub3RoZXIgb3JpZ2luIGJ1dCB0aGUgY3Jvc3NvcmlnaW4gYXR0cmlidXRlIGlzbid0IHVzZWQuXFxuICAgICAgICAgICAgVGhpcyBtYXkgcHJldmVudCB0ZXh0IHRyYWNrcyBmcm9tIGxvYWRpbmcuXCJdKTtcblxuICBfdGVtcGxhdGVPYmplY3QkMSA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdCgpIHtcbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICByZXR1cm4gZGF0YTtcbn1cbi8qKlxuICogSFRNTDUgTWVkaWEgQ29udHJvbGxlciAtIFdyYXBwZXIgZm9yIEhUTUw1IE1lZGlhIEFQSVxuICpcbiAqIEBtaXhlcyBUZWNoflNvdXJjZUhhbmRsZXJBZGRpdGlvbnNcbiAqIEBleHRlbmRzIFRlY2hcbiAqL1xuXG52YXIgSHRtbDUgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9UZWNoKSB7XG4gIF9pbmhlcml0c0xvb3NlKEh0bWw1LCBfVGVjaCk7XG5cbiAgLyoqXG4gICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoaXMgVGVjaC5cbiAgKlxuICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgKiAgICAgICAgVGhlIGtleS92YWx1ZSBzdG9yZSBvZiBwbGF5ZXIgb3B0aW9ucy5cbiAgKlxuICAqIEBwYXJhbSB7Q29tcG9uZW50flJlYWR5Q2FsbGJhY2t9IHJlYWR5XG4gICogICAgICAgIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgYEhUTUw1YCBUZWNoIGlzIHJlYWR5LlxuICAqL1xuICBmdW5jdGlvbiBIdG1sNShvcHRpb25zLCByZWFkeSkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX1RlY2guY2FsbCh0aGlzLCBvcHRpb25zLCByZWFkeSkgfHwgdGhpcztcbiAgICB2YXIgc291cmNlID0gb3B0aW9ucy5zb3VyY2U7XG4gICAgdmFyIGNyb3Nzb3JpZ2luVHJhY2tzID0gZmFsc2U7IC8vIFNldCB0aGUgc291cmNlIGlmIG9uZSBpcyBwcm92aWRlZFxuICAgIC8vIDEpIENoZWNrIGlmIHRoZSBzb3VyY2UgaXMgbmV3IChpZiBub3QsIHdlIHdhbnQgdG8ga2VlcCB0aGUgb3JpZ2luYWwgc28gcGxheWJhY2sgaXNuJ3QgaW50ZXJydXB0ZWQpXG4gICAgLy8gMikgQ2hlY2sgdG8gc2VlIGlmIHRoZSBuZXR3b3JrIHN0YXRlIG9mIHRoZSB0YWcgd2FzIGZhaWxlZCBhdCBpbml0LCBhbmQgaWYgc28sIHJlc2V0IHRoZSBzb3VyY2VcbiAgICAvLyBhbnl3YXkgc28gdGhlIGVycm9yIGdldHMgZmlyZWQuXG5cbiAgICBpZiAoc291cmNlICYmIChfdGhpcy5lbF8uY3VycmVudFNyYyAhPT0gc291cmNlLnNyYyB8fCBvcHRpb25zLnRhZyAmJiBvcHRpb25zLnRhZy5pbml0TmV0d29ya1N0YXRlXyA9PT0gMykpIHtcbiAgICAgIF90aGlzLnNldFNvdXJjZShzb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfdGhpcy5oYW5kbGVMYXRlSW5pdF8oX3RoaXMuZWxfKTtcbiAgICB9IC8vIHNldHVwIHNvdXJjZXNldCBhZnRlciBsYXRlIHNvdXJjZXNldC9pbml0XG5cblxuICAgIGlmIChvcHRpb25zLmVuYWJsZVNvdXJjZXNldCkge1xuICAgICAgX3RoaXMuc2V0dXBTb3VyY2VzZXRIYW5kbGluZ18oKTtcbiAgICB9XG5cbiAgICBpZiAoX3RoaXMuZWxfLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgdmFyIG5vZGVzID0gX3RoaXMuZWxfLmNoaWxkTm9kZXM7XG4gICAgICB2YXIgbm9kZXNMZW5ndGggPSBub2Rlcy5sZW5ndGg7XG4gICAgICB2YXIgcmVtb3ZlTm9kZXMgPSBbXTtcblxuICAgICAgd2hpbGUgKG5vZGVzTGVuZ3RoLS0pIHtcbiAgICAgICAgdmFyIG5vZGUgPSBub2Rlc1tub2Rlc0xlbmd0aF07XG4gICAgICAgIHZhciBub2RlTmFtZSA9IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICBpZiAobm9kZU5hbWUgPT09ICd0cmFjaycpIHtcbiAgICAgICAgICBpZiAoIV90aGlzLmZlYXR1cmVzTmF0aXZlVGV4dFRyYWNrcykge1xuICAgICAgICAgICAgLy8gRW1wdHkgdmlkZW8gdGFnIHRyYWNrcyBzbyB0aGUgYnVpbHQtaW4gcGxheWVyIGRvZXNuJ3QgdXNlIHRoZW0gYWxzby5cbiAgICAgICAgICAgIC8vIFRoaXMgbWF5IG5vdCBiZSBmYXN0IGVub3VnaCB0byBzdG9wIEhUTUw1IGJyb3dzZXJzIGZyb20gcmVhZGluZyB0aGUgdGFnc1xuICAgICAgICAgICAgLy8gc28gd2UnbGwgbmVlZCB0byB0dXJuIG9mZiBhbnkgZGVmYXVsdCB0cmFja3MgaWYgd2UncmUgbWFudWFsbHkgZG9pbmdcbiAgICAgICAgICAgIC8vIGNhcHRpb25zIGFuZCBzdWJ0aXRsZXMuIHZpZGVvRWxlbWVudC50ZXh0VHJhY2tzXG4gICAgICAgICAgICByZW1vdmVOb2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBzdG9yZSBIVE1MVHJhY2tFbGVtZW50IGFuZCBUZXh0VHJhY2sgdG8gcmVtb3RlIGxpc3RcbiAgICAgICAgICAgIF90aGlzLnJlbW90ZVRleHRUcmFja0VscygpLmFkZFRyYWNrRWxlbWVudF8obm9kZSk7XG5cbiAgICAgICAgICAgIF90aGlzLnJlbW90ZVRleHRUcmFja3MoKS5hZGRUcmFjayhub2RlLnRyYWNrKTtcblxuICAgICAgICAgICAgX3RoaXMudGV4dFRyYWNrcygpLmFkZFRyYWNrKG5vZGUudHJhY2spO1xuXG4gICAgICAgICAgICBpZiAoIWNyb3Nzb3JpZ2luVHJhY2tzICYmICFfdGhpcy5lbF8uaGFzQXR0cmlidXRlKCdjcm9zc29yaWdpbicpICYmIGlzQ3Jvc3NPcmlnaW4obm9kZS5zcmMpKSB7XG4gICAgICAgICAgICAgIGNyb3Nzb3JpZ2luVHJhY2tzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW1vdmVOb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBfdGhpcy5lbF8ucmVtb3ZlQ2hpbGQocmVtb3ZlTm9kZXNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIF90aGlzLnByb3h5TmF0aXZlVHJhY2tzXygpO1xuXG4gICAgaWYgKF90aGlzLmZlYXR1cmVzTmF0aXZlVGV4dFRyYWNrcyAmJiBjcm9zc29yaWdpblRyYWNrcykge1xuICAgICAgbG9nLndhcm4odHNtbChfdGVtcGxhdGVPYmplY3QkMSgpKSk7XG4gICAgfSAvLyBwcmV2ZW50IGlPUyBTYWZhcmkgZnJvbSBkaXNhYmxpbmcgbWV0YWRhdGEgdGV4dCB0cmFja3MgZHVyaW5nIG5hdGl2ZSBwbGF5YmFja1xuXG5cbiAgICBfdGhpcy5yZXN0b3JlTWV0YWRhdGFUcmFja3NJbklPU05hdGl2ZVBsYXllcl8oKTsgLy8gRGV0ZXJtaW5lIGlmIG5hdGl2ZSBjb250cm9scyBzaG91bGQgYmUgdXNlZFxuICAgIC8vIE91ciBnb2FsIHNob3VsZCBiZSB0byBnZXQgdGhlIGN1c3RvbSBjb250cm9scyBvbiBtb2JpbGUgc29saWQgZXZlcnl3aGVyZVxuICAgIC8vIHNvIHdlIGNhbiByZW1vdmUgdGhpcyBhbGwgdG9nZXRoZXIuIFJpZ2h0IG5vdyB0aGlzIHdpbGwgYmxvY2sgY3VzdG9tXG4gICAgLy8gY29udHJvbHMgb24gdG91Y2ggZW5hYmxlZCBsYXB0b3BzIGxpa2UgdGhlIENocm9tZSBQaXhlbFxuXG5cbiAgICBpZiAoKFRPVUNIX0VOQUJMRUQgfHwgSVNfSVBIT05FIHx8IElTX05BVElWRV9BTkRST0lEKSAmJiBvcHRpb25zLm5hdGl2ZUNvbnRyb2xzRm9yVG91Y2ggPT09IHRydWUpIHtcbiAgICAgIF90aGlzLnNldENvbnRyb2xzKHRydWUpO1xuICAgIH0gLy8gb24gaU9TLCB3ZSB3YW50IHRvIHByb3h5IGB3ZWJraXRiZWdpbmZ1bGxzY3JlZW5gIGFuZCBgd2Via2l0ZW5kZnVsbHNjcmVlbmBcbiAgICAvLyBpbnRvIGEgYGZ1bGxzY3JlZW5jaGFuZ2VgIGV2ZW50XG5cblxuICAgIF90aGlzLnByb3h5V2Via2l0RnVsbHNjcmVlbl8oKTtcblxuICAgIF90aGlzLnRyaWdnZXJSZWFkeSgpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBEaXNwb3NlIG9mIGBIVE1MNWAgbWVkaWEgZWxlbWVudCBhbmQgcmVtb3ZlIGFsbCB0cmFja3MuXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IEh0bWw1LnByb3RvdHlwZTtcblxuICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgaWYgKHRoaXMuZWxfICYmIHRoaXMuZWxfLnJlc2V0U291cmNlc2V0Xykge1xuICAgICAgdGhpcy5lbF8ucmVzZXRTb3VyY2VzZXRfKCk7XG4gICAgfVxuXG4gICAgSHRtbDUuZGlzcG9zZU1lZGlhRWxlbWVudCh0aGlzLmVsXyk7XG4gICAgdGhpcy5vcHRpb25zXyA9IG51bGw7IC8vIHRlY2ggd2lsbCBoYW5kbGUgY2xlYXJpbmcgb2YgdGhlIGVtdWxhdGVkIHRyYWNrIGxpc3RcblxuICAgIF9UZWNoLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIE1vZGlmeSB0aGUgbWVkaWEgZWxlbWVudCBzbyB0aGF0IHdlIGNhbiBkZXRlY3Qgd2hlblxuICAgKiB0aGUgc291cmNlIGlzIGNoYW5nZWQuIEZpcmVzIGBzb3VyY2VzZXRgIGp1c3QgYWZ0ZXIgdGhlIHNvdXJjZSBoYXMgY2hhbmdlZFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zZXR1cFNvdXJjZXNldEhhbmRsaW5nXyA9IGZ1bmN0aW9uIHNldHVwU291cmNlc2V0SGFuZGxpbmdfKCkge1xuICAgIHNldHVwU291cmNlc2V0KHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBXaGVuIGEgY2FwdGlvbnMgdHJhY2sgaXMgZW5hYmxlZCBpbiB0aGUgaU9TIFNhZmFyaSBuYXRpdmUgcGxheWVyLCBhbGwgb3RoZXJcbiAgICogdHJhY2tzIGFyZSBkaXNhYmxlZCAoaW5jbHVkaW5nIG1ldGFkYXRhIHRyYWNrcyksIHdoaWNoIG51bGxzIGFsbCBvZiB0aGVpclxuICAgKiBhc3NvY2lhdGVkIGN1ZSBwb2ludHMuIFRoaXMgd2lsbCByZXN0b3JlIG1ldGFkYXRhIHRyYWNrcyB0byB0aGVpciBwcmUtZnVsbHNjcmVlblxuICAgKiBzdGF0ZSBpbiB0aG9zZSBjYXNlcyBzbyB0aGF0IGN1ZSBwb2ludHMgYXJlIG5vdCBuZWVkbGVzc2x5IGxvc3QuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlc3RvcmVNZXRhZGF0YVRyYWNrc0luSU9TTmF0aXZlUGxheWVyXyA9IGZ1bmN0aW9uIHJlc3RvcmVNZXRhZGF0YVRyYWNrc0luSU9TTmF0aXZlUGxheWVyXygpIHtcbiAgICB2YXIgdGV4dFRyYWNrcyA9IHRoaXMudGV4dFRyYWNrcygpO1xuICAgIHZhciBtZXRhZGF0YVRyYWNrc1ByZUZ1bGxzY3JlZW5TdGF0ZTsgLy8gY2FwdHVyZXMgYSBzbmFwc2hvdCBvZiBldmVyeSBtZXRhZGF0YSB0cmFjaydzIGN1cnJlbnQgc3RhdGVcblxuICAgIHZhciB0YWtlTWV0YWRhdGFUcmFja1NuYXBzaG90ID0gZnVuY3Rpb24gdGFrZU1ldGFkYXRhVHJhY2tTbmFwc2hvdCgpIHtcbiAgICAgIG1ldGFkYXRhVHJhY2tzUHJlRnVsbHNjcmVlblN0YXRlID0gW107XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dFRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdHJhY2sgPSB0ZXh0VHJhY2tzW2ldO1xuXG4gICAgICAgIGlmICh0cmFjay5raW5kID09PSAnbWV0YWRhdGEnKSB7XG4gICAgICAgICAgbWV0YWRhdGFUcmFja3NQcmVGdWxsc2NyZWVuU3RhdGUucHVzaCh7XG4gICAgICAgICAgICB0cmFjazogdHJhY2ssXG4gICAgICAgICAgICBzdG9yZWRNb2RlOiB0cmFjay5tb2RlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9OyAvLyBzbmFwc2hvdCBlYWNoIG1ldGFkYXRhIHRyYWNrJ3MgaW5pdGlhbCBzdGF0ZSwgYW5kIHVwZGF0ZSB0aGUgc25hcHNob3RcbiAgICAvLyBlYWNoIHRpbWUgdGhlcmUgaXMgYSB0cmFjayAnY2hhbmdlJyBldmVudFxuXG5cbiAgICB0YWtlTWV0YWRhdGFUcmFja1NuYXBzaG90KCk7XG4gICAgdGV4dFRyYWNrcy5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0YWtlTWV0YWRhdGFUcmFja1NuYXBzaG90KTtcbiAgICB0aGlzLm9uKCdkaXNwb3NlJywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRleHRUcmFja3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGFrZU1ldGFkYXRhVHJhY2tTbmFwc2hvdCk7XG4gICAgfSk7XG5cbiAgICB2YXIgcmVzdG9yZVRyYWNrTW9kZSA9IGZ1bmN0aW9uIHJlc3RvcmVUcmFja01vZGUoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldGFkYXRhVHJhY2tzUHJlRnVsbHNjcmVlblN0YXRlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzdG9yZWRUcmFjayA9IG1ldGFkYXRhVHJhY2tzUHJlRnVsbHNjcmVlblN0YXRlW2ldO1xuXG4gICAgICAgIGlmIChzdG9yZWRUcmFjay50cmFjay5tb2RlID09PSAnZGlzYWJsZWQnICYmIHN0b3JlZFRyYWNrLnRyYWNrLm1vZGUgIT09IHN0b3JlZFRyYWNrLnN0b3JlZE1vZGUpIHtcbiAgICAgICAgICBzdG9yZWRUcmFjay50cmFjay5tb2RlID0gc3RvcmVkVHJhY2suc3RvcmVkTW9kZTtcbiAgICAgICAgfVxuICAgICAgfSAvLyB3ZSBvbmx5IHdhbnQgdGhpcyBoYW5kbGVyIHRvIGJlIGV4ZWN1dGVkIG9uIHRoZSBmaXJzdCAnY2hhbmdlJyBldmVudFxuXG5cbiAgICAgIHRleHRUcmFja3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgcmVzdG9yZVRyYWNrTW9kZSk7XG4gICAgfTsgLy8gd2hlbiB3ZSBlbnRlciBmdWxsc2NyZWVuIHBsYXliYWNrLCBzdG9wIHVwZGF0aW5nIHRoZSBzbmFwc2hvdCBhbmRcbiAgICAvLyByZXN0b3JlIGFsbCB0cmFjayBtb2RlcyB0byB0aGVpciBwcmUtZnVsbHNjcmVlbiBzdGF0ZVxuXG5cbiAgICB0aGlzLm9uKCd3ZWJraXRiZWdpbmZ1bGxzY3JlZW4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0ZXh0VHJhY2tzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRha2VNZXRhZGF0YVRyYWNrU25hcHNob3QpOyAvLyByZW1vdmUgdGhlIGxpc3RlbmVyIGJlZm9yZSBhZGRpbmcgaXQganVzdCBpbiBjYXNlIGl0IHdhc24ndCBwcmV2aW91c2x5IHJlbW92ZWRcblxuICAgICAgdGV4dFRyYWNrcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCByZXN0b3JlVHJhY2tNb2RlKTtcbiAgICAgIHRleHRUcmFja3MuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgcmVzdG9yZVRyYWNrTW9kZSk7XG4gICAgfSk7IC8vIHN0YXJ0IHVwZGF0aW5nIHRoZSBzbmFwc2hvdCBhZ2FpbiBhZnRlciBsZWF2aW5nIGZ1bGxzY3JlZW5cblxuICAgIHRoaXMub24oJ3dlYmtpdGVuZGZ1bGxzY3JlZW4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyByZW1vdmUgdGhlIGxpc3RlbmVyIGJlZm9yZSBhZGRpbmcgaXQganVzdCBpbiBjYXNlIGl0IHdhc24ndCBwcmV2aW91c2x5IHJlbW92ZWRcbiAgICAgIHRleHRUcmFja3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGFrZU1ldGFkYXRhVHJhY2tTbmFwc2hvdCk7XG4gICAgICB0ZXh0VHJhY2tzLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRha2VNZXRhZGF0YVRyYWNrU25hcHNob3QpOyAvLyByZW1vdmUgdGhlIHJlc3RvcmVUcmFja01vZGUgaGFuZGxlciBpbiBjYXNlIGl0IHdhc24ndCB0cmlnZ2VyZWQgZHVyaW5nIGZ1bGxzY3JlZW4gcGxheWJhY2tcblxuICAgICAgdGV4dFRyYWNrcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCByZXN0b3JlVHJhY2tNb2RlKTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQXR0ZW1wdCB0byBmb3JjZSBvdmVycmlkZSBvZiB0cmFja3MgZm9yIHRoZSBnaXZlbiB0eXBlXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gVHJhY2sgdHlwZSB0byBvdmVycmlkZSwgcG9zc2libGUgdmFsdWVzIGluY2x1ZGUgJ0F1ZGlvJyxcbiAgICogJ1ZpZGVvJywgYW5kICdUZXh0Jy5cbiAgICogQHBhcmFtIHtib29sZWFufSBvdmVycmlkZSAtIElmIHNldCB0byB0cnVlIG5hdGl2ZSBhdWRpby92aWRlbyB3aWxsIGJlIG92ZXJyaWRkZW4sXG4gICAqIG90aGVyd2lzZSBuYXRpdmUgYXVkaW8vdmlkZW8gd2lsbCBwb3RlbnRpYWxseSBiZSB1c2VkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5vdmVycmlkZU5hdGl2ZV8gPSBmdW5jdGlvbiBvdmVycmlkZU5hdGl2ZV8odHlwZSwgb3ZlcnJpZGUpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIC8vIElmIHRoZXJlIGlzIG5vIGJlaGF2aW9yYWwgY2hhbmdlIGRvbid0IGFkZC9yZW1vdmUgbGlzdGVuZXJzXG4gICAgaWYgKG92ZXJyaWRlICE9PSB0aGlzW1wiZmVhdHVyZXNOYXRpdmVcIiArIHR5cGUgKyBcIlRyYWNrc1wiXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBsb3dlckNhc2VUeXBlID0gdHlwZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKHRoaXNbbG93ZXJDYXNlVHlwZSArIFwiVHJhY2tzTGlzdGVuZXJzX1wiXSkge1xuICAgICAgT2JqZWN0LmtleXModGhpc1tsb3dlckNhc2VUeXBlICsgXCJUcmFja3NMaXN0ZW5lcnNfXCJdKS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudE5hbWUpIHtcbiAgICAgICAgdmFyIGVsVHJhY2tzID0gX3RoaXMyLmVsKClbbG93ZXJDYXNlVHlwZSArIFwiVHJhY2tzXCJdO1xuXG4gICAgICAgIGVsVHJhY2tzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBfdGhpczJbbG93ZXJDYXNlVHlwZSArIFwiVHJhY2tzTGlzdGVuZXJzX1wiXVtldmVudE5hbWVdKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXNbXCJmZWF0dXJlc05hdGl2ZVwiICsgdHlwZSArIFwiVHJhY2tzXCJdID0gIW92ZXJyaWRlO1xuICAgIHRoaXNbbG93ZXJDYXNlVHlwZSArIFwiVHJhY2tzTGlzdGVuZXJzX1wiXSA9IG51bGw7XG4gICAgdGhpcy5wcm94eU5hdGl2ZVRyYWNrc0ZvclR5cGVfKGxvd2VyQ2FzZVR5cGUpO1xuICB9XG4gIC8qKlxuICAgKiBBdHRlbXB0IHRvIGZvcmNlIG92ZXJyaWRlIG9mIG5hdGl2ZSBhdWRpbyB0cmFja3MuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3ZlcnJpZGUgLSBJZiBzZXQgdG8gdHJ1ZSBuYXRpdmUgYXVkaW8gd2lsbCBiZSBvdmVycmlkZGVuLFxuICAgKiBvdGhlcndpc2UgbmF0aXZlIGF1ZGlvIHdpbGwgcG90ZW50aWFsbHkgYmUgdXNlZC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ub3ZlcnJpZGVOYXRpdmVBdWRpb1RyYWNrcyA9IGZ1bmN0aW9uIG92ZXJyaWRlTmF0aXZlQXVkaW9UcmFja3Mob3ZlcnJpZGUpIHtcbiAgICB0aGlzLm92ZXJyaWRlTmF0aXZlXygnQXVkaW8nLCBvdmVycmlkZSk7XG4gIH1cbiAgLyoqXG4gICAqIEF0dGVtcHQgdG8gZm9yY2Ugb3ZlcnJpZGUgb2YgbmF0aXZlIHZpZGVvIHRyYWNrcy5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBvdmVycmlkZSAtIElmIHNldCB0byB0cnVlIG5hdGl2ZSB2aWRlbyB3aWxsIGJlIG92ZXJyaWRkZW4sXG4gICAqIG90aGVyd2lzZSBuYXRpdmUgdmlkZW8gd2lsbCBwb3RlbnRpYWxseSBiZSB1c2VkLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5vdmVycmlkZU5hdGl2ZVZpZGVvVHJhY2tzID0gZnVuY3Rpb24gb3ZlcnJpZGVOYXRpdmVWaWRlb1RyYWNrcyhvdmVycmlkZSkge1xuICAgIHRoaXMub3ZlcnJpZGVOYXRpdmVfKCdWaWRlbycsIG92ZXJyaWRlKTtcbiAgfVxuICAvKipcbiAgICogUHJveHkgbmF0aXZlIHRyYWNrIGxpc3QgZXZlbnRzIGZvciB0aGUgZ2l2ZW4gdHlwZSB0byBvdXIgdHJhY2tcbiAgICogbGlzdHMgaWYgdGhlIGJyb3dzZXIgd2UgYXJlIHBsYXlpbmcgaW4gc3VwcG9ydHMgdGhhdCB0eXBlIG9mIHRyYWNrIGxpc3QuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVHJhY2sgdHlwZTsgdmFsdWVzIGluY2x1ZGUgJ2F1ZGlvJywgJ3ZpZGVvJywgYW5kICd0ZXh0J1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wcm94eU5hdGl2ZVRyYWNrc0ZvclR5cGVfID0gZnVuY3Rpb24gcHJveHlOYXRpdmVUcmFja3NGb3JUeXBlXyhuYW1lKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICB2YXIgcHJvcHMgPSBOT1JNQUxbbmFtZV07XG4gICAgdmFyIGVsVHJhY2tzID0gdGhpcy5lbCgpW3Byb3BzLmdldHRlck5hbWVdO1xuICAgIHZhciB0ZWNoVHJhY2tzID0gdGhpc1twcm9wcy5nZXR0ZXJOYW1lXSgpO1xuXG4gICAgaWYgKCF0aGlzW1wiZmVhdHVyZXNOYXRpdmVcIiArIHByb3BzLmNhcGl0YWxOYW1lICsgXCJUcmFja3NcIl0gfHwgIWVsVHJhY2tzIHx8ICFlbFRyYWNrcy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGxpc3RlbmVycyA9IHtcbiAgICAgIGNoYW5nZTogZnVuY3Rpb24gY2hhbmdlKGUpIHtcbiAgICAgICAgdGVjaFRyYWNrcy50cmlnZ2VyKHtcbiAgICAgICAgICB0eXBlOiAnY2hhbmdlJyxcbiAgICAgICAgICB0YXJnZXQ6IHRlY2hUcmFja3MsXG4gICAgICAgICAgY3VycmVudFRhcmdldDogdGVjaFRyYWNrcyxcbiAgICAgICAgICBzcmNFbGVtZW50OiB0ZWNoVHJhY2tzXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGFkZHRyYWNrOiBmdW5jdGlvbiBhZGR0cmFjayhlKSB7XG4gICAgICAgIHRlY2hUcmFja3MuYWRkVHJhY2soZS50cmFjayk7XG4gICAgICB9LFxuICAgICAgcmVtb3ZldHJhY2s6IGZ1bmN0aW9uIHJlbW92ZXRyYWNrKGUpIHtcbiAgICAgICAgdGVjaFRyYWNrcy5yZW1vdmVUcmFjayhlLnRyYWNrKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHJlbW92ZU9sZFRyYWNrcyA9IGZ1bmN0aW9uIHJlbW92ZU9sZFRyYWNrcygpIHtcbiAgICAgIHZhciByZW1vdmVUcmFja3MgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZWNoVHJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZWxUcmFja3MubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBpZiAoZWxUcmFja3Nbal0gPT09IHRlY2hUcmFja3NbaV0pIHtcbiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICByZW1vdmVUcmFja3MucHVzaCh0ZWNoVHJhY2tzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB3aGlsZSAocmVtb3ZlVHJhY2tzLmxlbmd0aCkge1xuICAgICAgICB0ZWNoVHJhY2tzLnJlbW92ZVRyYWNrKHJlbW92ZVRyYWNrcy5zaGlmdCgpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpc1twcm9wcy5nZXR0ZXJOYW1lICsgJ0xpc3RlbmVyc18nXSA9IGxpc3RlbmVycztcbiAgICBPYmplY3Qua2V5cyhsaXN0ZW5lcnMpLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuICAgICAgdmFyIGxpc3RlbmVyID0gbGlzdGVuZXJzW2V2ZW50TmFtZV07XG4gICAgICBlbFRyYWNrcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuXG4gICAgICBfdGhpczMub24oJ2Rpc3Bvc2UnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gZWxUcmFja3MucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGxpc3RlbmVyKTtcbiAgICAgIH0pO1xuICAgIH0pOyAvLyBSZW1vdmUgKG5hdGl2ZSkgdHJhY2tzIHRoYXQgYXJlIG5vdCB1c2VkIGFueW1vcmVcblxuICAgIHRoaXMub24oJ2xvYWRzdGFydCcsIHJlbW92ZU9sZFRyYWNrcyk7XG4gICAgdGhpcy5vbignZGlzcG9zZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gX3RoaXMzLm9mZignbG9hZHN0YXJ0JywgcmVtb3ZlT2xkVHJhY2tzKTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogUHJveHkgYWxsIG5hdGl2ZSB0cmFjayBsaXN0IGV2ZW50cyB0byBvdXIgdHJhY2sgbGlzdHMgaWYgdGhlIGJyb3dzZXIgd2UgYXJlIHBsYXlpbmdcbiAgICogaW4gc3VwcG9ydHMgdGhhdCB0eXBlIG9mIHRyYWNrIGxpc3QuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnByb3h5TmF0aXZlVHJhY2tzXyA9IGZ1bmN0aW9uIHByb3h5TmF0aXZlVHJhY2tzXygpIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIE5PUk1BTC5uYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICBfdGhpczQucHJveHlOYXRpdmVUcmFja3NGb3JUeXBlXyhuYW1lKTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBgSHRtbDVgIFRlY2gncyBET00gZWxlbWVudC5cbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IGdldHMgY3JlYXRlZC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLm9wdGlvbnNfLnRhZzsgLy8gQ2hlY2sgaWYgdGhpcyBicm93c2VyIHN1cHBvcnRzIG1vdmluZyB0aGUgZWxlbWVudCBpbnRvIHRoZSBib3guXG4gICAgLy8gT24gdGhlIGlQaG9uZSB2aWRlbyB3aWxsIGJyZWFrIGlmIHlvdSBtb3ZlIHRoZSBlbGVtZW50LFxuICAgIC8vIFNvIHdlIGhhdmUgdG8gY3JlYXRlIGEgYnJhbmQgbmV3IGVsZW1lbnQuXG4gICAgLy8gSWYgd2UgaW5nZXN0ZWQgdGhlIHBsYXllciBkaXYsIHdlIGRvIG5vdCBuZWVkIHRvIG1vdmUgdGhlIG1lZGlhIGVsZW1lbnQuXG5cbiAgICBpZiAoIWVsIHx8ICEodGhpcy5vcHRpb25zXy5wbGF5ZXJFbEluZ2VzdCB8fCB0aGlzLm1vdmluZ01lZGlhRWxlbWVudEluRE9NKSkge1xuICAgICAgLy8gSWYgdGhlIG9yaWdpbmFsIHRhZyBpcyBzdGlsbCB0aGVyZSwgY2xvbmUgYW5kIHJlbW92ZSBpdC5cbiAgICAgIGlmIChlbCkge1xuICAgICAgICB2YXIgY2xvbmUgPSBlbC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICAgICAgaWYgKGVsLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICBlbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjbG9uZSwgZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgSHRtbDUuZGlzcG9zZU1lZGlhRWxlbWVudChlbCk7XG4gICAgICAgIGVsID0gY2xvbmU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7IC8vIGRldGVybWluZSBpZiBuYXRpdmUgY29udHJvbHMgc2hvdWxkIGJlIHVzZWRcblxuICAgICAgICB2YXIgdGFnQXR0cmlidXRlcyA9IHRoaXMub3B0aW9uc18udGFnICYmIGdldEF0dHJpYnV0ZXModGhpcy5vcHRpb25zXy50YWcpO1xuICAgICAgICB2YXIgYXR0cmlidXRlcyA9IG1lcmdlT3B0aW9ucyh7fSwgdGFnQXR0cmlidXRlcyk7XG5cbiAgICAgICAgaWYgKCFUT1VDSF9FTkFCTEVEIHx8IHRoaXMub3B0aW9uc18ubmF0aXZlQ29udHJvbHNGb3JUb3VjaCAhPT0gdHJ1ZSkge1xuICAgICAgICAgIGRlbGV0ZSBhdHRyaWJ1dGVzLmNvbnRyb2xzO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0QXR0cmlidXRlcyhlbCwgYXNzaWduKGF0dHJpYnV0ZXMsIHtcbiAgICAgICAgICBpZDogdGhpcy5vcHRpb25zXy50ZWNoSWQsXG4gICAgICAgICAgY2xhc3M6ICd2anMtdGVjaCdcbiAgICAgICAgfSkpO1xuICAgICAgfVxuXG4gICAgICBlbC5wbGF5ZXJJZCA9IHRoaXMub3B0aW9uc18ucGxheWVySWQ7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnNfLnByZWxvYWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzZXRBdHRyaWJ1dGUoZWwsICdwcmVsb2FkJywgdGhpcy5vcHRpb25zXy5wcmVsb2FkKTtcbiAgICB9IC8vIFVwZGF0ZSBzcGVjaWZpYyB0YWcgc2V0dGluZ3MsIGluIGNhc2UgdGhleSB3ZXJlIG92ZXJyaWRkZW5cbiAgICAvLyBgYXV0b3BsYXlgIGhhcyB0byBiZSAqbGFzdCogc28gdGhhdCBgbXV0ZWRgIGFuZCBgcGxheXNpbmxpbmVgIGFyZSBwcmVzZW50XG4gICAgLy8gd2hlbiBpT1MvU2FmYXJpIG9yIG90aGVyIGJyb3dzZXJzIGF0dGVtcHQgdG8gYXV0b3BsYXkuXG5cblxuICAgIHZhciBzZXR0aW5nc0F0dHJzID0gWydsb29wJywgJ211dGVkJywgJ3BsYXlzaW5saW5lJywgJ2F1dG9wbGF5J107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNldHRpbmdzQXR0cnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBhdHRyID0gc2V0dGluZ3NBdHRyc1tpXTtcbiAgICAgIHZhciB2YWx1ZSA9IHRoaXMub3B0aW9uc19bYXR0cl07XG5cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIHNldEF0dHJpYnV0ZShlbCwgYXR0ciwgYXR0cik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVtb3ZlQXR0cmlidXRlKGVsLCBhdHRyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsW2F0dHJdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGVsO1xuICB9XG4gIC8qKlxuICAgKiBUaGlzIHdpbGwgYmUgdHJpZ2dlcmVkIGlmIHRoZSBsb2Fkc3RhcnQgZXZlbnQgaGFzIGFscmVhZHkgZmlyZWQsIGJlZm9yZSB2aWRlb2pzIHdhc1xuICAgKiByZWFkeS4gVHdvIGtub3duIGV4YW1wbGVzIG9mIHdoZW4gdGhpcyBjYW4gaGFwcGVuIGFyZTpcbiAgICogMS4gSWYgd2UncmUgbG9hZGluZyB0aGUgcGxheWJhY2sgb2JqZWN0IGFmdGVyIGl0IGhhcyBzdGFydGVkIGxvYWRpbmdcbiAgICogMi4gVGhlIG1lZGlhIGlzIGFscmVhZHkgcGxheWluZyB0aGUgKG9mdGVuIHdpdGggYXV0b3BsYXkgb24pIHRoZW5cbiAgICpcbiAgICogVGhpcyBmdW5jdGlvbiB3aWxsIGZpcmUgYW5vdGhlciBsb2Fkc3RhcnQgc28gdGhhdCB2aWRlb2pzIGNhbiBjYXRjaHVwLlxuICAgKlxuICAgKiBAZmlyZXMgVGVjaCNsb2Fkc3RhcnRcbiAgICpcbiAgICogQHJldHVybiB7dW5kZWZpbmVkfVxuICAgKiAgICAgICAgIHJldHVybnMgbm90aGluZy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlTGF0ZUluaXRfID0gZnVuY3Rpb24gaGFuZGxlTGF0ZUluaXRfKGVsKSB7XG4gICAgaWYgKGVsLm5ldHdvcmtTdGF0ZSA9PT0gMCB8fCBlbC5uZXR3b3JrU3RhdGUgPT09IDMpIHtcbiAgICAgIC8vIFRoZSB2aWRlbyBlbGVtZW50IGhhc24ndCBzdGFydGVkIGxvYWRpbmcgdGhlIHNvdXJjZSB5ZXRcbiAgICAgIC8vIG9yIGRpZG4ndCBmaW5kIGEgc291cmNlXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGVsLnJlYWR5U3RhdGUgPT09IDApIHtcbiAgICAgIC8vIE5ldHdvcmtTdGF0ZSBpcyBzZXQgc3luY2hyb25vdXNseSBCVVQgbG9hZHN0YXJ0IGlzIGZpcmVkIGF0IHRoZVxuICAgICAgLy8gZW5kIG9mIHRoZSBjdXJyZW50IHN0YWNrLCB1c3VhbGx5IGJlZm9yZSBzZXRJbnRlcnZhbChmbiwgMCkuXG4gICAgICAvLyBTbyBhdCB0aGlzIHBvaW50IHdlIGtub3cgbG9hZHN0YXJ0IG1heSBoYXZlIGFscmVhZHkgZmlyZWQgb3IgaXNcbiAgICAgIC8vIGFib3V0IHRvIGZpcmUsIGFuZCBlaXRoZXIgd2F5IHRoZSBwbGF5ZXIgaGFzbid0IHNlZW4gaXQgeWV0LlxuICAgICAgLy8gV2UgZG9uJ3Qgd2FudCB0byBmaXJlIGxvYWRzdGFydCBwcmVtYXR1cmVseSBoZXJlIGFuZCBjYXVzZSBhXG4gICAgICAvLyBkb3VibGUgbG9hZHN0YXJ0IHNvIHdlJ2xsIHdhaXQgYW5kIHNlZSBpZiBpdCBoYXBwZW5zIGJldHdlZW4gbm93XG4gICAgICAvLyBhbmQgdGhlIG5leHQgbG9vcCwgYW5kIGZpcmUgaXQgaWYgbm90LlxuICAgICAgLy8gSE9XRVZFUiwgd2UgYWxzbyB3YW50IHRvIG1ha2Ugc3VyZSBpdCBmaXJlcyBiZWZvcmUgbG9hZGVkbWV0YWRhdGFcbiAgICAgIC8vIHdoaWNoIGNvdWxkIGFsc28gaGFwcGVuIGJldHdlZW4gbm93IGFuZCB0aGUgbmV4dCBsb29wLCBzbyB3ZSdsbFxuICAgICAgLy8gd2F0Y2ggZm9yIHRoYXQgYWxzby5cbiAgICAgIHZhciBsb2Fkc3RhcnRGaXJlZCA9IGZhbHNlO1xuXG4gICAgICB2YXIgc2V0TG9hZHN0YXJ0RmlyZWQgPSBmdW5jdGlvbiBzZXRMb2Fkc3RhcnRGaXJlZCgpIHtcbiAgICAgICAgbG9hZHN0YXJ0RmlyZWQgPSB0cnVlO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5vbignbG9hZHN0YXJ0Jywgc2V0TG9hZHN0YXJ0RmlyZWQpO1xuXG4gICAgICB2YXIgdHJpZ2dlckxvYWRzdGFydCA9IGZ1bmN0aW9uIHRyaWdnZXJMb2Fkc3RhcnQoKSB7XG4gICAgICAgIC8vIFdlIGRpZCBtaXNzIHRoZSBvcmlnaW5hbCBsb2Fkc3RhcnQuIE1ha2Ugc3VyZSB0aGUgcGxheWVyXG4gICAgICAgIC8vIHNlZXMgbG9hZHN0YXJ0IGJlZm9yZSBsb2FkZWRtZXRhZGF0YVxuICAgICAgICBpZiAoIWxvYWRzdGFydEZpcmVkKSB7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyKCdsb2Fkc3RhcnQnKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy5vbignbG9hZGVkbWV0YWRhdGEnLCB0cmlnZ2VyTG9hZHN0YXJ0KTtcbiAgICAgIHRoaXMucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm9mZignbG9hZHN0YXJ0Jywgc2V0TG9hZHN0YXJ0RmlyZWQpO1xuICAgICAgICB0aGlzLm9mZignbG9hZGVkbWV0YWRhdGEnLCB0cmlnZ2VyTG9hZHN0YXJ0KTtcblxuICAgICAgICBpZiAoIWxvYWRzdGFydEZpcmVkKSB7XG4gICAgICAgICAgLy8gV2UgZGlkIG1pc3MgdGhlIG9yaWdpbmFsIG5hdGl2ZSBsb2Fkc3RhcnQuIEZpcmUgaXQgbm93LlxuICAgICAgICAgIHRoaXMudHJpZ2dlcignbG9hZHN0YXJ0Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gRnJvbSBoZXJlIG9uIHdlIGtub3cgdGhhdCBsb2Fkc3RhcnQgYWxyZWFkeSBmaXJlZCBhbmQgd2UgbWlzc2VkIGl0LlxuICAgIC8vIFRoZSBvdGhlciByZWFkeVN0YXRlIGV2ZW50cyBhcmVuJ3QgYXMgbXVjaCBvZiBhIHByb2JsZW0gaWYgd2UgZG91YmxlXG4gICAgLy8gdGhlbSwgc28gbm90IGdvaW5nIHRvIGdvIHRvIGFzIG11Y2ggdHJvdWJsZSBhcyBsb2Fkc3RhcnQgdG8gcHJldmVudFxuICAgIC8vIHRoYXQgdW5sZXNzIHdlIGZpbmQgcmVhc29uIHRvLlxuXG5cbiAgICB2YXIgZXZlbnRzVG9UcmlnZ2VyID0gWydsb2Fkc3RhcnQnXTsgLy8gbG9hZGVkbWV0YWRhdGE6IG5ld2x5IGVxdWFsIHRvIEhBVkVfTUVUQURBVEEgKDEpIG9yIGdyZWF0ZXJcblxuICAgIGV2ZW50c1RvVHJpZ2dlci5wdXNoKCdsb2FkZWRtZXRhZGF0YScpOyAvLyBsb2FkZWRkYXRhOiBuZXdseSBpbmNyZWFzZWQgdG8gSEFWRV9DVVJSRU5UX0RBVEEgKDIpIG9yIGdyZWF0ZXJcblxuICAgIGlmIChlbC5yZWFkeVN0YXRlID49IDIpIHtcbiAgICAgIGV2ZW50c1RvVHJpZ2dlci5wdXNoKCdsb2FkZWRkYXRhJyk7XG4gICAgfSAvLyBjYW5wbGF5OiBuZXdseSBpbmNyZWFzZWQgdG8gSEFWRV9GVVRVUkVfREFUQSAoMykgb3IgZ3JlYXRlclxuXG5cbiAgICBpZiAoZWwucmVhZHlTdGF0ZSA+PSAzKSB7XG4gICAgICBldmVudHNUb1RyaWdnZXIucHVzaCgnY2FucGxheScpO1xuICAgIH0gLy8gY2FucGxheXRocm91Z2g6IG5ld2x5IGVxdWFsIHRvIEhBVkVfRU5PVUdIX0RBVEEgKDQpXG5cblxuICAgIGlmIChlbC5yZWFkeVN0YXRlID49IDQpIHtcbiAgICAgIGV2ZW50c1RvVHJpZ2dlci5wdXNoKCdjYW5wbGF5dGhyb3VnaCcpO1xuICAgIH0gLy8gV2Ugc3RpbGwgbmVlZCB0byBnaXZlIHRoZSBwbGF5ZXIgdGltZSB0byBhZGQgZXZlbnQgbGlzdGVuZXJzXG5cblxuICAgIHRoaXMucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgZXZlbnRzVG9UcmlnZ2VyLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKHR5cGUpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFNldCBjdXJyZW50IHRpbWUgZm9yIHRoZSBgSFRNTDVgIHRlY2guXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzZWNvbmRzXG4gICAqICAgICAgICBTZXQgdGhlIGN1cnJlbnQgdGltZSBvZiB0aGUgbWVkaWEgdG8gdGhpcy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uc2V0Q3VycmVudFRpbWUgPSBmdW5jdGlvbiBzZXRDdXJyZW50VGltZShzZWNvbmRzKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZWxfLmN1cnJlbnRUaW1lID0gc2Vjb25kcztcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsb2coZSwgJ1ZpZGVvIGlzIG5vdCByZWFkeS4gKFZpZGVvLmpzKScpOyAvLyB0aGlzLndhcm5pbmcoVmlkZW9KUy53YXJuaW5ncy52aWRlb05vdFJlYWR5KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCBkdXJhdGlvbiBvZiB0aGUgSFRNTDUgbWVkaWEgZWxlbWVudC5cbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIFRoZSBkdXJhdGlvbiBvZiB0aGUgbWVkaWEgb3IgMCBpZiB0aGVyZSBpcyBubyBkdXJhdGlvbi5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZHVyYXRpb24gPSBmdW5jdGlvbiBkdXJhdGlvbigpIHtcbiAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgIC8vIEFuZHJvaWQgQ2hyb21lIHdpbGwgcmVwb3J0IGR1cmF0aW9uIGFzIEluZmluaXR5IGZvciBWT0QgSExTIHVudGlsIGFmdGVyXG4gICAgLy8gcGxheWJhY2sgaGFzIHN0YXJ0ZWQsIHdoaWNoIHRyaWdnZXJzIHRoZSBsaXZlIGRpc3BsYXkgZXJyb25lb3VzbHkuXG4gICAgLy8gUmV0dXJuIE5hTiBpZiBwbGF5YmFjayBoYXMgbm90IHN0YXJ0ZWQgYW5kIHRyaWdnZXIgYSBkdXJhdGlvbnVwZGF0ZSBvbmNlXG4gICAgLy8gdGhlIGR1cmF0aW9uIGNhbiBiZSByZWxpYWJseSBrbm93bi5cbiAgICBpZiAodGhpcy5lbF8uZHVyYXRpb24gPT09IEluZmluaXR5ICYmIElTX0FORFJPSUQgJiYgSVNfQ0hST01FICYmIHRoaXMuZWxfLmN1cnJlbnRUaW1lID09PSAwKSB7XG4gICAgICAvLyBXYWl0IGZvciB0aGUgZmlyc3QgYHRpbWV1cGRhdGVgIHdpdGggY3VycmVudFRpbWUgPiAwIC0gdGhlcmUgbWF5IGJlXG4gICAgICAvLyBzZXZlcmFsIHdpdGggMFxuICAgICAgdmFyIGNoZWNrUHJvZ3Jlc3MgPSBmdW5jdGlvbiBjaGVja1Byb2dyZXNzKCkge1xuICAgICAgICBpZiAoX3RoaXM1LmVsXy5jdXJyZW50VGltZSA+IDApIHtcbiAgICAgICAgICAvLyBUcmlnZ2VyIGR1cmF0aW9uY2hhbmdlIGZvciBnZW51aW5lbHkgbGl2ZSB2aWRlb1xuICAgICAgICAgIGlmIChfdGhpczUuZWxfLmR1cmF0aW9uID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgX3RoaXM1LnRyaWdnZXIoJ2R1cmF0aW9uY2hhbmdlJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3RoaXM1Lm9mZigndGltZXVwZGF0ZScsIGNoZWNrUHJvZ3Jlc3MpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB0aGlzLm9uKCd0aW1ldXBkYXRlJywgY2hlY2tQcm9ncmVzcyk7XG4gICAgICByZXR1cm4gTmFOO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmVsXy5kdXJhdGlvbiB8fCBOYU47XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCB3aWR0aCBvZiB0aGUgSFRNTDUgbWVkaWEgZWxlbWVudC5cbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIFRoZSB3aWR0aCBvZiB0aGUgSFRNTDUgbWVkaWEgZWxlbWVudC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ud2lkdGggPSBmdW5jdGlvbiB3aWR0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbF8ub2Zmc2V0V2lkdGg7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCBoZWlnaHQgb2YgdGhlIEhUTUw1IG1lZGlhIGVsZW1lbnQuXG4gICAqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICBUaGUgaGVpZ2h0IG9mIHRoZSBIVE1MNSBtZWRpYSBlbGVtZW50LlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oZWlnaHQgPSBmdW5jdGlvbiBoZWlnaHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxfLm9mZnNldEhlaWdodDtcbiAgfVxuICAvKipcbiAgICogUHJveHkgaU9TIGB3ZWJraXRiZWdpbmZ1bGxzY3JlZW5gIGFuZCBgd2Via2l0ZW5kZnVsbHNjcmVlbmAgaW50b1xuICAgKiBgZnVsbHNjcmVlbmNoYW5nZWAgZXZlbnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBmaXJlcyBmdWxsc2NyZWVuY2hhbmdlXG4gICAqIEBsaXN0ZW5zIHdlYmtpdGVuZGZ1bGxzY3JlZW5cbiAgICogQGxpc3RlbnMgd2Via2l0YmVnaW5mdWxsc2NyZWVuXG4gICAqIEBsaXN0ZW5zIHdlYmtpdGJlZ2luZnVsbHNjcmVlblxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wcm94eVdlYmtpdEZ1bGxzY3JlZW5fID0gZnVuY3Rpb24gcHJveHlXZWJraXRGdWxsc2NyZWVuXygpIHtcbiAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgIGlmICghKCd3ZWJraXREaXNwbGF5aW5nRnVsbHNjcmVlbicgaW4gdGhpcy5lbF8pKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGVuZEZuID0gZnVuY3Rpb24gZW5kRm4oKSB7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCB7XG4gICAgICAgIGlzRnVsbHNjcmVlbjogZmFsc2VcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgYmVnaW5GbiA9IGZ1bmN0aW9uIGJlZ2luRm4oKSB7XG4gICAgICBpZiAoJ3dlYmtpdFByZXNlbnRhdGlvbk1vZGUnIGluIHRoaXMuZWxfICYmIHRoaXMuZWxfLndlYmtpdFByZXNlbnRhdGlvbk1vZGUgIT09ICdwaWN0dXJlLWluLXBpY3R1cmUnKSB7XG4gICAgICAgIHRoaXMub25lKCd3ZWJraXRlbmRmdWxsc2NyZWVuJywgZW5kRm4pO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCB7XG4gICAgICAgICAgaXNGdWxsc2NyZWVuOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLm9uKCd3ZWJraXRiZWdpbmZ1bGxzY3JlZW4nLCBiZWdpbkZuKTtcbiAgICB0aGlzLm9uKCdkaXNwb3NlJywgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXM2Lm9mZignd2Via2l0YmVnaW5mdWxsc2NyZWVuJywgYmVnaW5Gbik7XG5cbiAgICAgIF90aGlzNi5vZmYoJ3dlYmtpdGVuZGZ1bGxzY3JlZW4nLCBlbmRGbik7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrIGlmIGZ1bGxzY3JlZW4gaXMgc3VwcG9ydGVkIG9uIHRoZSBjdXJyZW50IHBsYXliYWNrIGRldmljZS5cbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICAtIFRydWUgaWYgZnVsbHNjcmVlbiBpcyBzdXBwb3J0ZWQuXG4gICAqICAgICAgICAgLSBGYWxzZSBpZiBmdWxsc2NyZWVuIGlzIG5vdCBzdXBwb3J0ZWQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnN1cHBvcnRzRnVsbFNjcmVlbiA9IGZ1bmN0aW9uIHN1cHBvcnRzRnVsbFNjcmVlbigpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuZWxfLndlYmtpdEVudGVyRnVsbFNjcmVlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdmFyIHVzZXJBZ2VudCA9IHdpbmRvdyQxLm5hdmlnYXRvciAmJiB3aW5kb3ckMS5uYXZpZ2F0b3IudXNlckFnZW50IHx8ICcnOyAvLyBTZWVtcyB0byBiZSBicm9rZW4gaW4gQ2hyb21pdW0vQ2hyb21lICYmIFNhZmFyaSBpbiBMZW9wYXJkXG5cbiAgICAgIGlmICgvQW5kcm9pZC8udGVzdCh1c2VyQWdlbnQpIHx8ICEvQ2hyb21lfE1hYyBPUyBYIDEwLjUvLnRlc3QodXNlckFnZW50KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIFJlcXVlc3QgdGhhdCB0aGUgYEhUTUw1YCBUZWNoIGVudGVyIGZ1bGxzY3JlZW4uXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmVudGVyRnVsbFNjcmVlbiA9IGZ1bmN0aW9uIGVudGVyRnVsbFNjcmVlbigpIHtcbiAgICB2YXIgdmlkZW8gPSB0aGlzLmVsXztcblxuICAgIGlmICh2aWRlby5wYXVzZWQgJiYgdmlkZW8ubmV0d29ya1N0YXRlIDw9IHZpZGVvLkhBVkVfTUVUQURBVEEpIHtcbiAgICAgIC8vIGF0dGVtcHQgdG8gcHJpbWUgdGhlIHZpZGVvIGVsZW1lbnQgZm9yIHByb2dyYW1tYXRpYyBhY2Nlc3NcbiAgICAgIC8vIHRoaXMgaXNuJ3QgbmVjZXNzYXJ5IG9uIHRoZSBkZXNrdG9wIGJ1dCBzaG91bGRuJ3QgaHVydFxuICAgICAgdGhpcy5lbF8ucGxheSgpOyAvLyBwbGF5aW5nIGFuZCBwYXVzaW5nIHN5bmNocm9ub3VzbHkgZHVyaW5nIHRoZSB0cmFuc2l0aW9uIHRvIGZ1bGxzY3JlZW5cbiAgICAgIC8vIGNhbiBnZXQgaU9TIH42LjEgZGV2aWNlcyBpbnRvIGEgcGxheS9wYXVzZSBsb29wXG5cbiAgICAgIHRoaXMuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZpZGVvLnBhdXNlKCk7XG4gICAgICAgIHZpZGVvLndlYmtpdEVudGVyRnVsbFNjcmVlbigpO1xuICAgICAgfSwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZpZGVvLndlYmtpdEVudGVyRnVsbFNjcmVlbigpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmVxdWVzdCB0aGF0IHRoZSBgSFRNTDVgIFRlY2ggZXhpdCBmdWxsc2NyZWVuLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5leGl0RnVsbFNjcmVlbiA9IGZ1bmN0aW9uIGV4aXRGdWxsU2NyZWVuKCkge1xuICAgIHRoaXMuZWxfLndlYmtpdEV4aXRGdWxsU2NyZWVuKCk7XG4gIH1cbiAgLyoqXG4gICAqIEEgZ2V0dGVyL3NldHRlciBmb3IgdGhlIGBIdG1sNWAgVGVjaCdzIHNvdXJjZSBvYmplY3QuXG4gICAqID4gTm90ZTogUGxlYXNlIHVzZSB7QGxpbmsgSHRtbDUjc2V0U291cmNlfVxuICAgKlxuICAgKiBAcGFyYW0ge1RlY2h+U291cmNlT2JqZWN0fSBbc3JjXVxuICAgKiAgICAgICAgVGhlIHNvdXJjZSBvYmplY3QgeW91IHdhbnQgdG8gc2V0IG9uIHRoZSBgSFRNTDVgIHRlY2hzIGVsZW1lbnQuXG4gICAqXG4gICAqIEByZXR1cm4ge1RlY2h+U291cmNlT2JqZWN0fHVuZGVmaW5lZH1cbiAgICogICAgICAgICAtIFRoZSBjdXJyZW50IHNvdXJjZSBvYmplY3Qgd2hlbiBhIHNvdXJjZSBpcyBub3QgcGFzc2VkIGluLlxuICAgKiAgICAgICAgIC0gdW5kZWZpbmVkIHdoZW4gc2V0dGluZ1xuICAgKlxuICAgKiBAZGVwcmVjYXRlZCBTaW5jZSB2ZXJzaW9uIDUuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnNyYyA9IGZ1bmN0aW9uIHNyYyhfc3JjKSB7XG4gICAgaWYgKF9zcmMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZWxfLnNyYztcbiAgICB9IC8vIFNldHRpbmcgc3JjIHRocm91Z2ggYHNyY2AgaW5zdGVhZCBvZiBgc2V0U3JjYCB3aWxsIGJlIGRlcHJlY2F0ZWRcblxuXG4gICAgdGhpcy5zZXRTcmMoX3NyYyk7XG4gIH1cbiAgLyoqXG4gICAqIFJlc2V0IHRoZSB0ZWNoIGJ5IHJlbW92aW5nIGFsbCBzb3VyY2VzIGFuZCB0aGVuIGNhbGxpbmdcbiAgICoge0BsaW5rIEh0bWw1LnJlc2V0TWVkaWFFbGVtZW50fS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHtcbiAgICBIdG1sNS5yZXNldE1lZGlhRWxlbWVudCh0aGlzLmVsXyk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCBzb3VyY2Ugb24gdGhlIGBIVE1MNWAgVGVjaC4gRmFsbHMgYmFjayB0byByZXR1cm5pbmcgdGhlIHNvdXJjZSBmcm9tXG4gICAqIHRoZSBIVE1MNSBtZWRpYSBlbGVtZW50LlxuICAgKlxuICAgKiBAcmV0dXJuIHtUZWNoflNvdXJjZU9iamVjdH1cbiAgICogICAgICAgICBUaGUgY3VycmVudCBzb3VyY2Ugb2JqZWN0IGZyb20gdGhlIEhUTUw1IHRlY2guIFdpdGggYSBmYWxsYmFjayB0byB0aGVcbiAgICogICAgICAgICBlbGVtZW50cyBzb3VyY2UuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmN1cnJlbnRTcmMgPSBmdW5jdGlvbiBjdXJyZW50U3JjKCkge1xuICAgIGlmICh0aGlzLmN1cnJlbnRTb3VyY2VfKSB7XG4gICAgICByZXR1cm4gdGhpcy5jdXJyZW50U291cmNlXy5zcmM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZWxfLmN1cnJlbnRTcmM7XG4gIH1cbiAgLyoqXG4gICAqIFNldCBjb250cm9scyBhdHRyaWJ1dGUgZm9yIHRoZSBIVE1MNSBtZWRpYSBFbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsXG4gICAqICAgICAgICBWYWx1ZSB0byBzZXQgdGhlIGNvbnRyb2xzIGF0dHJpYnV0ZSB0b1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zZXRDb250cm9scyA9IGZ1bmN0aW9uIHNldENvbnRyb2xzKHZhbCkge1xuICAgIHRoaXMuZWxfLmNvbnRyb2xzID0gISF2YWw7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhbmQgcmV0dXJucyBhIHJlbW90ZSB7QGxpbmsgVGV4dFRyYWNrfSBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBraW5kXG4gICAqICAgICAgICBgVGV4dFRyYWNrYCBraW5kIChzdWJ0aXRsZXMsIGNhcHRpb25zLCBkZXNjcmlwdGlvbnMsIGNoYXB0ZXJzLCBvciBtZXRhZGF0YSlcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtsYWJlbF1cbiAgICogICAgICAgIExhYmVsIHRvIGlkZW50aWZ5IHRoZSB0ZXh0IHRyYWNrXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbGFuZ3VhZ2VdXG4gICAqICAgICAgICBUd28gbGV0dGVyIGxhbmd1YWdlIGFiYnJldmlhdGlvblxuICAgKlxuICAgKiBAcmV0dXJuIHtUZXh0VHJhY2t9XG4gICAqICAgICAgICAgVGhlIFRleHRUcmFjayB0aGF0IGdldHMgY3JlYXRlZC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uYWRkVGV4dFRyYWNrID0gZnVuY3Rpb24gYWRkVGV4dFRyYWNrKGtpbmQsIGxhYmVsLCBsYW5ndWFnZSkge1xuICAgIGlmICghdGhpcy5mZWF0dXJlc05hdGl2ZVRleHRUcmFja3MpIHtcbiAgICAgIHJldHVybiBfVGVjaC5wcm90b3R5cGUuYWRkVGV4dFRyYWNrLmNhbGwodGhpcywga2luZCwgbGFiZWwsIGxhbmd1YWdlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5lbF8uYWRkVGV4dFRyYWNrKGtpbmQsIGxhYmVsLCBsYW5ndWFnZSk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgZWl0aGVyIG5hdGl2ZSBUZXh0VHJhY2sgb3IgYW4gZW11bGF0ZWQgVGV4dFRyYWNrIGRlcGVuZGluZ1xuICAgKiBvbiB0aGUgdmFsdWUgb2YgYGZlYXR1cmVzTmF0aXZlVGV4dFRyYWNrc2BcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogICAgICAgIFRoZSBvYmplY3Qgc2hvdWxkIGNvbnRhaW4gdGhlIG9wdGlvbnMgdG8gaW5pdGlhbGl6ZSB0aGUgVGV4dFRyYWNrIHdpdGguXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5raW5kXVxuICAgKiAgICAgICAgYFRleHRUcmFja2Aga2luZCAoc3VidGl0bGVzLCBjYXB0aW9ucywgZGVzY3JpcHRpb25zLCBjaGFwdGVycywgb3IgbWV0YWRhdGEpLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubGFiZWxdXG4gICAqICAgICAgICBMYWJlbCB0byBpZGVudGlmeSB0aGUgdGV4dCB0cmFja1xuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubGFuZ3VhZ2VdXG4gICAqICAgICAgICBUd28gbGV0dGVyIGxhbmd1YWdlIGFiYnJldmlhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5kZWZhdWx0XVxuICAgKiAgICAgICAgRGVmYXVsdCB0aGlzIHRyYWNrIHRvIG9uLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuaWRdXG4gICAqICAgICAgICBUaGUgaW50ZXJuYWwgaWQgdG8gYXNzaWduIHRoaXMgdHJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5zcmNdXG4gICAqICAgICAgICBBIHNvdXJjZSB1cmwgZm9yIHRoZSB0cmFjay5cbiAgICpcbiAgICogQHJldHVybiB7SFRNTFRyYWNrRWxlbWVudH1cbiAgICogICAgICAgICBUaGUgdHJhY2sgZWxlbWVudCB0aGF0IGdldHMgY3JlYXRlZC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3JlYXRlUmVtb3RlVGV4dFRyYWNrID0gZnVuY3Rpb24gY3JlYXRlUmVtb3RlVGV4dFRyYWNrKG9wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuZmVhdHVyZXNOYXRpdmVUZXh0VHJhY2tzKSB7XG4gICAgICByZXR1cm4gX1RlY2gucHJvdG90eXBlLmNyZWF0ZVJlbW90ZVRleHRUcmFjay5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHZhciBodG1sVHJhY2tFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHJhY2snKTtcblxuICAgIGlmIChvcHRpb25zLmtpbmQpIHtcbiAgICAgIGh0bWxUcmFja0VsZW1lbnQua2luZCA9IG9wdGlvbnMua2luZDtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5sYWJlbCkge1xuICAgICAgaHRtbFRyYWNrRWxlbWVudC5sYWJlbCA9IG9wdGlvbnMubGFiZWw7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMubGFuZ3VhZ2UgfHwgb3B0aW9ucy5zcmNsYW5nKSB7XG4gICAgICBodG1sVHJhY2tFbGVtZW50LnNyY2xhbmcgPSBvcHRpb25zLmxhbmd1YWdlIHx8IG9wdGlvbnMuc3JjbGFuZztcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5kZWZhdWx0KSB7XG4gICAgICBodG1sVHJhY2tFbGVtZW50LmRlZmF1bHQgPSBvcHRpb25zLmRlZmF1bHQ7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuaWQpIHtcbiAgICAgIGh0bWxUcmFja0VsZW1lbnQuaWQgPSBvcHRpb25zLmlkO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnNyYykge1xuICAgICAgaHRtbFRyYWNrRWxlbWVudC5zcmMgPSBvcHRpb25zLnNyYztcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbFRyYWNrRWxlbWVudDtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBhIHJlbW90ZSB0ZXh0IHRyYWNrIG9iamVjdCBhbmQgcmV0dXJucyBhbiBodG1sIHRyYWNrIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFRoZSBvYmplY3Qgc2hvdWxkIGNvbnRhaW4gdmFsdWVzIGZvclxuICAgKiBraW5kLCBsYW5ndWFnZSwgbGFiZWwsIGFuZCBzcmMgKGxvY2F0aW9uIG9mIHRoZSBXZWJWVFQgZmlsZSlcbiAgICogQHBhcmFtIHtib29sZWFufSBbbWFudWFsQ2xlYW51cD10cnVlXSBpZiBzZXQgdG8gZmFsc2UsIHRoZSBUZXh0VHJhY2sgd2lsbCBiZVxuICAgKiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgZnJvbSB0aGUgdmlkZW8gZWxlbWVudCB3aGVuZXZlciB0aGUgc291cmNlIGNoYW5nZXNcbiAgICogQHJldHVybiB7SFRNTFRyYWNrRWxlbWVudH0gQW4gSHRtbCBUcmFjayBFbGVtZW50LlxuICAgKiBUaGlzIGNhbiBiZSBhbiBlbXVsYXRlZCB7QGxpbmsgSFRNTFRyYWNrRWxlbWVudH0gb3IgYSBuYXRpdmUgb25lLlxuICAgKiBAZGVwcmVjYXRlZCBUaGUgZGVmYXVsdCB2YWx1ZSBvZiB0aGUgXCJtYW51YWxDbGVhbnVwXCIgcGFyYW1ldGVyIHdpbGwgZGVmYXVsdFxuICAgKiB0byBcImZhbHNlXCIgaW4gdXBjb21pbmcgdmVyc2lvbnMgb2YgVmlkZW8uanNcbiAgICovXG4gIDtcblxuICBfcHJvdG8uYWRkUmVtb3RlVGV4dFRyYWNrID0gZnVuY3Rpb24gYWRkUmVtb3RlVGV4dFRyYWNrKG9wdGlvbnMsIG1hbnVhbENsZWFudXApIHtcbiAgICB2YXIgaHRtbFRyYWNrRWxlbWVudCA9IF9UZWNoLnByb3RvdHlwZS5hZGRSZW1vdGVUZXh0VHJhY2suY2FsbCh0aGlzLCBvcHRpb25zLCBtYW51YWxDbGVhbnVwKTtcblxuICAgIGlmICh0aGlzLmZlYXR1cmVzTmF0aXZlVGV4dFRyYWNrcykge1xuICAgICAgdGhpcy5lbCgpLmFwcGVuZENoaWxkKGh0bWxUcmFja0VsZW1lbnQpO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sVHJhY2tFbGVtZW50O1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgcmVtb3RlIGBUZXh0VHJhY2tgIGZyb20gYFRleHRUcmFja0xpc3RgIG9iamVjdFxuICAgKlxuICAgKiBAcGFyYW0ge1RleHRUcmFja30gdHJhY2tcbiAgICogICAgICAgIGBUZXh0VHJhY2tgIG9iamVjdCB0byByZW1vdmVcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVtb3ZlUmVtb3RlVGV4dFRyYWNrID0gZnVuY3Rpb24gcmVtb3ZlUmVtb3RlVGV4dFRyYWNrKHRyYWNrKSB7XG4gICAgX1RlY2gucHJvdG90eXBlLnJlbW92ZVJlbW90ZVRleHRUcmFjay5jYWxsKHRoaXMsIHRyYWNrKTtcblxuICAgIGlmICh0aGlzLmZlYXR1cmVzTmF0aXZlVGV4dFRyYWNrcykge1xuICAgICAgdmFyIHRyYWNrcyA9IHRoaXMuJCQoJ3RyYWNrJyk7XG4gICAgICB2YXIgaSA9IHRyYWNrcy5sZW5ndGg7XG5cbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgaWYgKHRyYWNrID09PSB0cmFja3NbaV0gfHwgdHJhY2sgPT09IHRyYWNrc1tpXS50cmFjaykge1xuICAgICAgICAgIHRoaXMuZWwoKS5yZW1vdmVDaGlsZCh0cmFja3NbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXRzIGF2YWlsYWJsZSBtZWRpYSBwbGF5YmFjayBxdWFsaXR5IG1ldHJpY3MgYXMgc3BlY2lmaWVkIGJ5IHRoZSBXM0MncyBNZWRpYVxuICAgKiBQbGF5YmFjayBRdWFsaXR5IEFQSS5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93aWNnLmdpdGh1Yi5pby9tZWRpYS1wbGF5YmFjay1xdWFsaXR5fVxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqICAgICAgICAgQW4gb2JqZWN0IHdpdGggc3VwcG9ydGVkIG1lZGlhIHBsYXliYWNrIHF1YWxpdHkgbWV0cmljc1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5nZXRWaWRlb1BsYXliYWNrUXVhbGl0eSA9IGZ1bmN0aW9uIGdldFZpZGVvUGxheWJhY2tRdWFsaXR5KCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5lbCgpLmdldFZpZGVvUGxheWJhY2tRdWFsaXR5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbCgpLmdldFZpZGVvUGxheWJhY2tRdWFsaXR5KCk7XG4gICAgfVxuXG4gICAgdmFyIHZpZGVvUGxheWJhY2tRdWFsaXR5ID0ge307XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuZWwoKS53ZWJraXREcm9wcGVkRnJhbWVDb3VudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHRoaXMuZWwoKS53ZWJraXREZWNvZGVkRnJhbWVDb3VudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZpZGVvUGxheWJhY2tRdWFsaXR5LmRyb3BwZWRWaWRlb0ZyYW1lcyA9IHRoaXMuZWwoKS53ZWJraXREcm9wcGVkRnJhbWVDb3VudDtcbiAgICAgIHZpZGVvUGxheWJhY2tRdWFsaXR5LnRvdGFsVmlkZW9GcmFtZXMgPSB0aGlzLmVsKCkud2Via2l0RGVjb2RlZEZyYW1lQ291bnQ7XG4gICAgfVxuXG4gICAgaWYgKHdpbmRvdyQxLnBlcmZvcm1hbmNlICYmIHR5cGVvZiB3aW5kb3ckMS5wZXJmb3JtYW5jZS5ub3cgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHZpZGVvUGxheWJhY2tRdWFsaXR5LmNyZWF0aW9uVGltZSA9IHdpbmRvdyQxLnBlcmZvcm1hbmNlLm5vdygpO1xuICAgIH0gZWxzZSBpZiAod2luZG93JDEucGVyZm9ybWFuY2UgJiYgd2luZG93JDEucGVyZm9ybWFuY2UudGltaW5nICYmIHR5cGVvZiB3aW5kb3ckMS5wZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0ID09PSAnbnVtYmVyJykge1xuICAgICAgdmlkZW9QbGF5YmFja1F1YWxpdHkuY3JlYXRpb25UaW1lID0gd2luZG93JDEuRGF0ZS5ub3coKSAtIHdpbmRvdyQxLnBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZpZGVvUGxheWJhY2tRdWFsaXR5O1xuICB9O1xuXG4gIHJldHVybiBIdG1sNTtcbn0oVGVjaCk7XG4vKiBIVE1MNSBTdXBwb3J0IFRlc3RpbmcgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cbmlmIChpc1JlYWwoKSkge1xuICAvKipcbiAgICogRWxlbWVudCBmb3IgdGVzdGluZyBicm93c2VyIEhUTUw1IG1lZGlhIGNhcGFiaWxpdGllc1xuICAgKlxuICAgKiBAdHlwZSB7RWxlbWVudH1cbiAgICogQGNvbnN0YW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBIdG1sNS5URVNUX1ZJRCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gIHZhciB0cmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyYWNrJyk7XG4gIHRyYWNrLmtpbmQgPSAnY2FwdGlvbnMnO1xuICB0cmFjay5zcmNsYW5nID0gJ2VuJztcbiAgdHJhY2subGFiZWwgPSAnRW5nbGlzaCc7XG4gIEh0bWw1LlRFU1RfVklELmFwcGVuZENoaWxkKHRyYWNrKTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgSFRNTDUgbWVkaWEgaXMgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3Nlci9kZXZpY2UuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqICAgICAgICAgLSBUcnVlIGlmIEhUTUw1IG1lZGlhIGlzIHN1cHBvcnRlZC5cbiAqICAgICAgICAgLSBGYWxzZSBpZiBIVE1MNSBtZWRpYSBpcyBub3Qgc3VwcG9ydGVkLlxuICovXG5cblxuSHRtbDUuaXNTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIElFIHdpdGggbm8gTWVkaWEgUGxheWVyIGlzIGEgTElBUiEgKCM5ODQpXG4gIHRyeSB7XG4gICAgSHRtbDUuVEVTVF9WSUQudm9sdW1lID0gMC41O1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuICEhKEh0bWw1LlRFU1RfVklEICYmIEh0bWw1LlRFU1RfVklELmNhblBsYXlUeXBlKTtcbn07XG4vKipcbiAqIENoZWNrIGlmIHRoZSB0ZWNoIGNhbiBzdXBwb3J0IHRoZSBnaXZlbiB0eXBlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAqICAgICAgICBUaGUgbWltZXR5cGUgdG8gY2hlY2tcbiAqIEByZXR1cm4ge3N0cmluZ30gJ3Byb2JhYmx5JywgJ21heWJlJywgb3IgJycgKGVtcHR5IHN0cmluZylcbiAqL1xuXG5cbkh0bWw1LmNhblBsYXlUeXBlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgcmV0dXJuIEh0bWw1LlRFU1RfVklELmNhblBsYXlUeXBlKHR5cGUpO1xufTtcbi8qKlxuICogQ2hlY2sgaWYgdGhlIHRlY2ggY2FuIHN1cHBvcnQgdGhlIGdpdmVuIHNvdXJjZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBzcmNPYmpcbiAqICAgICAgICBUaGUgc291cmNlIG9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqICAgICAgICBUaGUgb3B0aW9ucyBwYXNzZWQgdG8gdGhlIHRlY2hcbiAqIEByZXR1cm4ge3N0cmluZ30gJ3Byb2JhYmx5JywgJ21heWJlJywgb3IgJycgKGVtcHR5IHN0cmluZylcbiAqL1xuXG5cbkh0bWw1LmNhblBsYXlTb3VyY2UgPSBmdW5jdGlvbiAoc3JjT2JqLCBvcHRpb25zKSB7XG4gIHJldHVybiBIdG1sNS5jYW5QbGF5VHlwZShzcmNPYmoudHlwZSk7XG59O1xuLyoqXG4gKiBDaGVjayBpZiB0aGUgdm9sdW1lIGNhbiBiZSBjaGFuZ2VkIGluIHRoaXMgYnJvd3Nlci9kZXZpY2UuXG4gKiBWb2x1bWUgY2Fubm90IGJlIGNoYW5nZWQgaW4gYSBsb3Qgb2YgbW9iaWxlIGRldmljZXMuXG4gKiBTcGVjaWZpY2FsbHksIGl0IGNhbid0IGJlIGNoYW5nZWQgZnJvbSAxIG9uIGlPUy5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogICAgICAgICAtIFRydWUgaWYgdm9sdW1lIGNhbiBiZSBjb250cm9sbGVkXG4gKiAgICAgICAgIC0gRmFsc2Ugb3RoZXJ3aXNlXG4gKi9cblxuXG5IdG1sNS5jYW5Db250cm9sVm9sdW1lID0gZnVuY3Rpb24gKCkge1xuICAvLyBJRSB3aWxsIGVycm9yIGlmIFdpbmRvd3MgTWVkaWEgUGxheWVyIG5vdCBpbnN0YWxsZWQgIzMzMTVcbiAgdHJ5IHtcbiAgICB2YXIgdm9sdW1lID0gSHRtbDUuVEVTVF9WSUQudm9sdW1lO1xuICAgIEh0bWw1LlRFU1RfVklELnZvbHVtZSA9IHZvbHVtZSAvIDIgKyAwLjE7XG4gICAgcmV0dXJuIHZvbHVtZSAhPT0gSHRtbDUuVEVTVF9WSUQudm9sdW1lO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuLyoqXG4gKiBDaGVjayBpZiB0aGUgdm9sdW1lIGNhbiBiZSBtdXRlZCBpbiB0aGlzIGJyb3dzZXIvZGV2aWNlLlxuICogU29tZSBkZXZpY2VzLCBlLmcuIGlPUywgZG9uJ3QgYWxsb3cgY2hhbmdpbmcgdm9sdW1lXG4gKiBidXQgcGVybWl0cyBtdXRpbmcvdW5tdXRpbmcuXG4gKlxuICogQHJldHVybiB7Ym9sZWFufVxuICogICAgICAtIFRydWUgaWYgdm9sdW1lIGNhbiBiZSBtdXRlZFxuICogICAgICAtIEZhbHNlIG90aGVyd2lzZVxuICovXG5cblxuSHRtbDUuY2FuTXV0ZVZvbHVtZSA9IGZ1bmN0aW9uICgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgbXV0ZWQgPSBIdG1sNS5URVNUX1ZJRC5tdXRlZDsgLy8gaW4gc29tZSB2ZXJzaW9ucyBvZiBpT1MgbXV0ZWQgcHJvcGVydHkgZG9lc24ndCBhbHdheXNcbiAgICAvLyB3b3JrLCBzbyB3ZSB3YW50IHRvIHNldCBib3RoIHByb3BlcnR5IGFuZCBhdHRyaWJ1dGVcblxuICAgIEh0bWw1LlRFU1RfVklELm11dGVkID0gIW11dGVkO1xuXG4gICAgaWYgKEh0bWw1LlRFU1RfVklELm11dGVkKSB7XG4gICAgICBzZXRBdHRyaWJ1dGUoSHRtbDUuVEVTVF9WSUQsICdtdXRlZCcsICdtdXRlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmVBdHRyaWJ1dGUoSHRtbDUuVEVTVF9WSUQsICdtdXRlZCcsICdtdXRlZCcpO1xuICAgIH1cblxuICAgIHJldHVybiBtdXRlZCAhPT0gSHRtbDUuVEVTVF9WSUQubXV0ZWQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG4vKipcbiAqIENoZWNrIGlmIHRoZSBwbGF5YmFjayByYXRlIGNhbiBiZSBjaGFuZ2VkIGluIHRoaXMgYnJvd3Nlci9kZXZpY2UuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqICAgICAgICAgLSBUcnVlIGlmIHBsYXliYWNrIHJhdGUgY2FuIGJlIGNvbnRyb2xsZWRcbiAqICAgICAgICAgLSBGYWxzZSBvdGhlcndpc2VcbiAqL1xuXG5cbkh0bWw1LmNhbkNvbnRyb2xQbGF5YmFja1JhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIFBsYXliYWNrIHJhdGUgQVBJIGlzIGltcGxlbWVudGVkIGluIEFuZHJvaWQgQ2hyb21lLCBidXQgZG9lc24ndCBkbyBhbnl0aGluZ1xuICAvLyBodHRwczovL2dpdGh1Yi5jb20vdmlkZW9qcy92aWRlby5qcy9pc3N1ZXMvMzE4MFxuICBpZiAoSVNfQU5EUk9JRCAmJiBJU19DSFJPTUUgJiYgQ0hST01FX1ZFUlNJT04gPCA1OCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSAvLyBJRSB3aWxsIGVycm9yIGlmIFdpbmRvd3MgTWVkaWEgUGxheWVyIG5vdCBpbnN0YWxsZWQgIzMzMTVcblxuXG4gIHRyeSB7XG4gICAgdmFyIHBsYXliYWNrUmF0ZSA9IEh0bWw1LlRFU1RfVklELnBsYXliYWNrUmF0ZTtcbiAgICBIdG1sNS5URVNUX1ZJRC5wbGF5YmFja1JhdGUgPSBwbGF5YmFja1JhdGUgLyAyICsgMC4xO1xuICAgIHJldHVybiBwbGF5YmFja1JhdGUgIT09IEh0bWw1LlRFU1RfVklELnBsYXliYWNrUmF0ZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcbi8qKlxuICogQ2hlY2sgaWYgd2UgY2FuIG92ZXJyaWRlIGEgdmlkZW8vYXVkaW8gZWxlbWVudHMgYXR0cmlidXRlcywgd2l0aFxuICogT2JqZWN0LmRlZmluZVByb3BlcnR5LlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiAgICAgICAgIC0gVHJ1ZSBpZiBidWlsdGluIGF0dHJpYnV0ZXMgY2FuIGJlIG92ZXJyaWRkZW5cbiAqICAgICAgICAgLSBGYWxzZSBvdGhlcndpc2VcbiAqL1xuXG5cbkh0bWw1LmNhbk92ZXJyaWRlQXR0cmlidXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gaWYgd2UgY2Fubm90IG92ZXJ3cml0ZSB0aGUgc3JjL2lubmVySFRNTCBwcm9wZXJ0eSwgdGhlcmUgaXMgbm8gc3VwcG9ydFxuICAvLyBpT1MgNyBzYWZhcmkgZm9yIGluc3RhbmNlIGNhbm5vdCBkbyB0aGlzLlxuICB0cnkge1xuICAgIHZhciBub29wID0gZnVuY3Rpb24gbm9vcCgpIHt9O1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyksICdzcmMnLCB7XG4gICAgICBnZXQ6IG5vb3AsXG4gICAgICBzZXQ6IG5vb3BcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKSwgJ3NyYycsIHtcbiAgICAgIGdldDogbm9vcCxcbiAgICAgIHNldDogbm9vcFxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpLCAnaW5uZXJIVE1MJywge1xuICAgICAgZ2V0OiBub29wLFxuICAgICAgc2V0OiBub29wXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyksICdpbm5lckhUTUwnLCB7XG4gICAgICBnZXQ6IG5vb3AsXG4gICAgICBzZXQ6IG5vb3BcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcbi8qKlxuICogQ2hlY2sgdG8gc2VlIGlmIG5hdGl2ZSBgVGV4dFRyYWNrYHMgYXJlIHN1cHBvcnRlZCBieSB0aGlzIGJyb3dzZXIvZGV2aWNlLlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiAgICAgICAgIC0gVHJ1ZSBpZiBuYXRpdmUgYFRleHRUcmFja2BzIGFyZSBzdXBwb3J0ZWQuXG4gKiAgICAgICAgIC0gRmFsc2Ugb3RoZXJ3aXNlXG4gKi9cblxuXG5IdG1sNS5zdXBwb3J0c05hdGl2ZVRleHRUcmFja3MgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBJU19BTllfU0FGQVJJIHx8IElTX0lPUyAmJiBJU19DSFJPTUU7XG59O1xuLyoqXG4gKiBDaGVjayB0byBzZWUgaWYgbmF0aXZlIGBWaWRlb1RyYWNrYHMgYXJlIHN1cHBvcnRlZCBieSB0aGlzIGJyb3dzZXIvZGV2aWNlXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqICAgICAgICAtIFRydWUgaWYgbmF0aXZlIGBWaWRlb1RyYWNrYHMgYXJlIHN1cHBvcnRlZC5cbiAqICAgICAgICAtIEZhbHNlIG90aGVyd2lzZVxuICovXG5cblxuSHRtbDUuc3VwcG9ydHNOYXRpdmVWaWRlb1RyYWNrcyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuICEhKEh0bWw1LlRFU1RfVklEICYmIEh0bWw1LlRFU1RfVklELnZpZGVvVHJhY2tzKTtcbn07XG4vKipcbiAqIENoZWNrIHRvIHNlZSBpZiBuYXRpdmUgYEF1ZGlvVHJhY2tgcyBhcmUgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3Nlci9kZXZpY2VcbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogICAgICAgIC0gVHJ1ZSBpZiBuYXRpdmUgYEF1ZGlvVHJhY2tgcyBhcmUgc3VwcG9ydGVkLlxuICogICAgICAgIC0gRmFsc2Ugb3RoZXJ3aXNlXG4gKi9cblxuXG5IdG1sNS5zdXBwb3J0c05hdGl2ZUF1ZGlvVHJhY2tzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gISEoSHRtbDUuVEVTVF9WSUQgJiYgSHRtbDUuVEVTVF9WSUQuYXVkaW9UcmFja3MpO1xufTtcbi8qKlxuICogQW4gYXJyYXkgb2YgZXZlbnRzIGF2YWlsYWJsZSBvbiB0aGUgSHRtbDUgdGVjaC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHR5cGUge0FycmF5fVxuICovXG5cblxuSHRtbDUuRXZlbnRzID0gWydsb2Fkc3RhcnQnLCAnc3VzcGVuZCcsICdhYm9ydCcsICdlcnJvcicsICdlbXB0aWVkJywgJ3N0YWxsZWQnLCAnbG9hZGVkbWV0YWRhdGEnLCAnbG9hZGVkZGF0YScsICdjYW5wbGF5JywgJ2NhbnBsYXl0aHJvdWdoJywgJ3BsYXlpbmcnLCAnd2FpdGluZycsICdzZWVraW5nJywgJ3NlZWtlZCcsICdlbmRlZCcsICdkdXJhdGlvbmNoYW5nZScsICd0aW1ldXBkYXRlJywgJ3Byb2dyZXNzJywgJ3BsYXknLCAncGF1c2UnLCAncmF0ZWNoYW5nZScsICdyZXNpemUnLCAndm9sdW1lY2hhbmdlJ107XG4vKipcbiAqIEJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBgVGVjaGAgc3VwcG9ydHMgdm9sdW1lIGNvbnRyb2wuXG4gKlxuICogQHR5cGUge2Jvb2xlYW59XG4gKiBAZGVmYXVsdCB7QGxpbmsgSHRtbDUuY2FuQ29udHJvbFZvbHVtZX1cbiAqL1xuXG5IdG1sNS5wcm90b3R5cGUuZmVhdHVyZXNWb2x1bWVDb250cm9sID0gSHRtbDUuY2FuQ29udHJvbFZvbHVtZSgpO1xuLyoqXG4gKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYFRlY2hgIHN1cHBvcnRzIG11dGluZyB2b2x1bWUuXG4gKlxuICogQHR5cGUge2JvbGVhbn1cbiAqIEBkZWZhdWx0IHtAbGluayBIdG1sNS5jYW5NdXRlVm9sdW1lfVxuICovXG5cbkh0bWw1LnByb3RvdHlwZS5mZWF0dXJlc011dGVDb250cm9sID0gSHRtbDUuY2FuTXV0ZVZvbHVtZSgpO1xuLyoqXG4gKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYFRlY2hgIHN1cHBvcnRzIGNoYW5naW5nIHRoZSBzcGVlZCBhdCB3aGljaCB0aGUgbWVkaWFcbiAqIHBsYXlzLiBFeGFtcGxlczpcbiAqICAgLSBTZXQgcGxheWVyIHRvIHBsYXkgMnggKHR3aWNlKSBhcyBmYXN0XG4gKiAgIC0gU2V0IHBsYXllciB0byBwbGF5IDAuNXggKGhhbGYpIGFzIGZhc3RcbiAqXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqIEBkZWZhdWx0IHtAbGluayBIdG1sNS5jYW5Db250cm9sUGxheWJhY2tSYXRlfVxuICovXG5cbkh0bWw1LnByb3RvdHlwZS5mZWF0dXJlc1BsYXliYWNrUmF0ZSA9IEh0bWw1LmNhbkNvbnRyb2xQbGF5YmFja1JhdGUoKTtcbi8qKlxuICogQm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGBUZWNoYCBzdXBwb3J0cyB0aGUgYHNvdXJjZXNldGAgZXZlbnQuXG4gKlxuICogQHR5cGUge2Jvb2xlYW59XG4gKiBAZGVmYXVsdFxuICovXG5cbkh0bWw1LnByb3RvdHlwZS5mZWF0dXJlc1NvdXJjZXNldCA9IEh0bWw1LmNhbk92ZXJyaWRlQXR0cmlidXRlcygpO1xuLyoqXG4gKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYEhUTUw1YCB0ZWNoIGN1cnJlbnRseSBzdXBwb3J0cyB0aGUgbWVkaWEgZWxlbWVudFxuICogbW92aW5nIGluIHRoZSBET00uIGlPUyBicmVha3MgaWYgeW91IG1vdmUgdGhlIG1lZGlhIGVsZW1lbnQsIHNvIHRoaXMgaXMgc2V0IHRoaXMgdG9cbiAqIGZhbHNlIHRoZXJlLiBFdmVyeXdoZXJlIGVsc2UgdGhpcyBzaG91bGQgYmUgdHJ1ZS5cbiAqXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuSHRtbDUucHJvdG90eXBlLm1vdmluZ01lZGlhRWxlbWVudEluRE9NID0gIUlTX0lPUzsgLy8gVE9ETzogUHJldmlvdXMgY29tbWVudDogTm8gbG9uZ2VyIGFwcGVhcnMgdG8gYmUgdXNlZC4gQ2FuIHByb2JhYmx5IGJlIHJlbW92ZWQuXG4vLyAgICAgICBJcyB0aGlzIHRydWU/XG5cbi8qKlxuICogQm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGBIVE1MNWAgdGVjaCBjdXJyZW50bHkgc3VwcG9ydHMgYXV0b21hdGljIG1lZGlhIHJlc2l6ZVxuICogd2hlbiBnb2luZyBpbnRvIGZ1bGxzY3JlZW4uXG4gKlxuICogQHR5cGUge2Jvb2xlYW59XG4gKiBAZGVmYXVsdFxuICovXG5cbkh0bWw1LnByb3RvdHlwZS5mZWF0dXJlc0Z1bGxzY3JlZW5SZXNpemUgPSB0cnVlO1xuLyoqXG4gKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYEhUTUw1YCB0ZWNoIGN1cnJlbnRseSBzdXBwb3J0cyB0aGUgcHJvZ3Jlc3MgZXZlbnQuXG4gKiBJZiB0aGlzIGlzIGZhbHNlLCBtYW51YWwgYHByb2dyZXNzYCBldmVudHMgd2lsbCBiZSB0cmlnZ2VyZWQgaW5zdGVhZC5cbiAqXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuSHRtbDUucHJvdG90eXBlLmZlYXR1cmVzUHJvZ3Jlc3NFdmVudHMgPSB0cnVlO1xuLyoqXG4gKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYEhUTUw1YCB0ZWNoIGN1cnJlbnRseSBzdXBwb3J0cyB0aGUgdGltZXVwZGF0ZSBldmVudC5cbiAqIElmIHRoaXMgaXMgZmFsc2UsIG1hbnVhbCBgdGltZXVwZGF0ZWAgZXZlbnRzIHdpbGwgYmUgdHJpZ2dlcmVkIGluc3RlYWQuXG4gKlxuICogQGRlZmF1bHRcbiAqL1xuXG5IdG1sNS5wcm90b3R5cGUuZmVhdHVyZXNUaW1ldXBkYXRlRXZlbnRzID0gdHJ1ZTtcbi8qKlxuICogQm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGBIVE1MNWAgdGVjaCBjdXJyZW50bHkgc3VwcG9ydHMgbmF0aXZlIGBUZXh0VHJhY2tgcy5cbiAqXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqIEBkZWZhdWx0IHtAbGluayBIdG1sNS5zdXBwb3J0c05hdGl2ZVRleHRUcmFja3N9XG4gKi9cblxuSHRtbDUucHJvdG90eXBlLmZlYXR1cmVzTmF0aXZlVGV4dFRyYWNrcyA9IEh0bWw1LnN1cHBvcnRzTmF0aXZlVGV4dFRyYWNrcygpO1xuLyoqXG4gKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYEhUTUw1YCB0ZWNoIGN1cnJlbnRseSBzdXBwb3J0cyBuYXRpdmUgYFZpZGVvVHJhY2tgcy5cbiAqXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqIEBkZWZhdWx0IHtAbGluayBIdG1sNS5zdXBwb3J0c05hdGl2ZVZpZGVvVHJhY2tzfVxuICovXG5cbkh0bWw1LnByb3RvdHlwZS5mZWF0dXJlc05hdGl2ZVZpZGVvVHJhY2tzID0gSHRtbDUuc3VwcG9ydHNOYXRpdmVWaWRlb1RyYWNrcygpO1xuLyoqXG4gKiBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYEhUTUw1YCB0ZWNoIGN1cnJlbnRseSBzdXBwb3J0cyBuYXRpdmUgYEF1ZGlvVHJhY2tgcy5cbiAqXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqIEBkZWZhdWx0IHtAbGluayBIdG1sNS5zdXBwb3J0c05hdGl2ZUF1ZGlvVHJhY2tzfVxuICovXG5cbkh0bWw1LnByb3RvdHlwZS5mZWF0dXJlc05hdGl2ZUF1ZGlvVHJhY2tzID0gSHRtbDUuc3VwcG9ydHNOYXRpdmVBdWRpb1RyYWNrcygpOyAvLyBIVE1MNSBGZWF0dXJlIGRldGVjdGlvbiBhbmQgRGV2aWNlIEZpeGVzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG52YXIgY2FuUGxheVR5cGUgPSBIdG1sNS5URVNUX1ZJRCAmJiBIdG1sNS5URVNUX1ZJRC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUuY2FuUGxheVR5cGU7XG52YXIgbXBlZ3VybFJFID0gL15hcHBsaWNhdGlvblxcLyg/OngtfHZuZFxcLmFwcGxlXFwuKW1wZWd1cmwvaTtcblxuSHRtbDUucGF0Y2hDYW5QbGF5VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gQW5kcm9pZCA0LjAgYW5kIGFib3ZlIGNhbiBwbGF5IEhMUyB0byBzb21lIGV4dGVudCBidXQgaXQgcmVwb3J0cyBiZWluZyB1bmFibGUgdG8gZG8gc29cbiAgLy8gRmlyZWZveCBhbmQgQ2hyb21lIHJlcG9ydCBjb3JyZWN0bHlcbiAgaWYgKEFORFJPSURfVkVSU0lPTiA+PSA0LjAgJiYgIUlTX0ZJUkVGT1ggJiYgIUlTX0NIUk9NRSkge1xuICAgIEh0bWw1LlRFU1RfVklELmNvbnN0cnVjdG9yLnByb3RvdHlwZS5jYW5QbGF5VHlwZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICBpZiAodHlwZSAmJiBtcGVndXJsUkUudGVzdCh0eXBlKSkge1xuICAgICAgICByZXR1cm4gJ21heWJlJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNhblBsYXlUeXBlLmNhbGwodGhpcywgdHlwZSk7XG4gICAgfTtcbiAgfVxufTtcblxuSHRtbDUudW5wYXRjaENhblBsYXlUeXBlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgciA9IEh0bWw1LlRFU1RfVklELmNvbnN0cnVjdG9yLnByb3RvdHlwZS5jYW5QbGF5VHlwZTtcbiAgSHRtbDUuVEVTVF9WSUQuY29uc3RydWN0b3IucHJvdG90eXBlLmNhblBsYXlUeXBlID0gY2FuUGxheVR5cGU7XG4gIHJldHVybiByO1xufTsgLy8gYnkgZGVmYXVsdCwgcGF0Y2ggdGhlIG1lZGlhIGVsZW1lbnRcblxuXG5IdG1sNS5wYXRjaENhblBsYXlUeXBlKCk7XG5cbkh0bWw1LmRpc3Bvc2VNZWRpYUVsZW1lbnQgPSBmdW5jdGlvbiAoZWwpIHtcbiAgaWYgKCFlbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChlbC5wYXJlbnROb2RlKSB7XG4gICAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG4gIH0gLy8gcmVtb3ZlIGFueSBjaGlsZCB0cmFjayBvciBzb3VyY2Ugbm9kZXMgdG8gcHJldmVudCB0aGVpciBsb2FkaW5nXG5cblxuICB3aGlsZSAoZWwuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgZWwucmVtb3ZlQ2hpbGQoZWwuZmlyc3RDaGlsZCk7XG4gIH0gLy8gcmVtb3ZlIGFueSBzcmMgcmVmZXJlbmNlLiBub3Qgc2V0dGluZyBgc3JjPScnYCBiZWNhdXNlIHRoYXQgY2F1c2VzIGEgd2FybmluZ1xuICAvLyBpbiBmaXJlZm94XG5cblxuICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpOyAvLyBmb3JjZSB0aGUgbWVkaWEgZWxlbWVudCB0byB1cGRhdGUgaXRzIGxvYWRpbmcgc3RhdGUgYnkgY2FsbGluZyBsb2FkKClcbiAgLy8gaG93ZXZlciBJRSBvbiBXaW5kb3dzIDdOIGhhcyBhIGJ1ZyB0aGF0IHRocm93cyBhbiBlcnJvciBzbyBuZWVkIGEgdHJ5L2NhdGNoICgjNzkzKVxuXG4gIGlmICh0eXBlb2YgZWwubG9hZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIHdyYXBwaW5nIGluIGFuIGlpZmUgc28gaXQncyBub3QgZGVvcHRpbWl6ZWQgKCMxMDYwI2Rpc2N1c3Npb25fcjEwMzI0NDczKVxuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBlbC5sb2FkKCk7XG4gICAgICB9IGNhdGNoIChlKSB7Ly8gbm90IHN1cHBvcnRlZFxuICAgICAgfVxuICAgIH0pKCk7XG4gIH1cbn07XG5cbkh0bWw1LnJlc2V0TWVkaWFFbGVtZW50ID0gZnVuY3Rpb24gKGVsKSB7XG4gIGlmICghZWwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgc291cmNlcyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NvdXJjZScpO1xuICB2YXIgaSA9IHNvdXJjZXMubGVuZ3RoO1xuXG4gIHdoaWxlIChpLS0pIHtcbiAgICBlbC5yZW1vdmVDaGlsZChzb3VyY2VzW2ldKTtcbiAgfSAvLyByZW1vdmUgYW55IHNyYyByZWZlcmVuY2UuXG4gIC8vIG5vdCBzZXR0aW5nIGBzcmM9JydgIGJlY2F1c2UgdGhhdCB0aHJvd3MgYW4gZXJyb3JcblxuXG4gIGVsLnJlbW92ZUF0dHJpYnV0ZSgnc3JjJyk7XG5cbiAgaWYgKHR5cGVvZiBlbC5sb2FkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gd3JhcHBpbmcgaW4gYW4gaWlmZSBzbyBpdCdzIG5vdCBkZW9wdGltaXplZCAoIzEwNjAjZGlzY3Vzc2lvbl9yMTAzMjQ0NzMpXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGVsLmxvYWQoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHsvLyBzYXRpc2Z5IGxpbnRlclxuICAgICAgfVxuICAgIH0pKCk7XG4gIH1cbn07XG4vKiBOYXRpdmUgSFRNTDUgZWxlbWVudCBwcm9wZXJ0eSB3cmFwcGluZyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLy8gV3JhcCBuYXRpdmUgYm9vbGVhbiBhdHRyaWJ1dGVzIHdpdGggZ2V0dGVycyB0aGF0IGNoZWNrIGJvdGggcHJvcGVydHkgYW5kIGF0dHJpYnV0ZVxuLy8gVGhlIGxpc3QgaXMgYXMgZm9sbG93ZWQ6XG4vLyBtdXRlZCwgZGVmYXVsdE11dGVkLCBhdXRvcGxheSwgY29udHJvbHMsIGxvb3AsIHBsYXlzaW5saW5lXG5cblxuW1xuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIGBtdXRlZGAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gYG11dGVkYCBpbmRpY2F0ZXNcbiAqIHRoYXQgdGhlIHZvbHVtZSBmb3IgdGhlIG1lZGlhIHNob3VsZCBiZSBzZXQgdG8gc2lsZW50LiBUaGlzIGRvZXMgbm90IGFjdHVhbGx5IGNoYW5nZVxuICogdGhlIGB2b2x1bWVgIGF0dHJpYnV0ZS5cbiAqXG4gKiBAbWV0aG9kIEh0bWw1I211dGVkXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogICAgICAgICAtIFRydWUgaWYgdGhlIHZhbHVlIG9mIGB2b2x1bWVgIHNob3VsZCBiZSBpZ25vcmVkIGFuZCB0aGUgYXVkaW8gc2V0IHRvIHNpbGVudC5cbiAqICAgICAgICAgLSBGYWxzZSBpZiB0aGUgdmFsdWUgb2YgYHZvbHVtZWAgc2hvdWxkIGJlIHVzZWQuXG4gKlxuICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS1tdXRlZH1cbiAqL1xuJ211dGVkJyxcbi8qKlxuICogR2V0IHRoZSB2YWx1ZSBvZiBgZGVmYXVsdE11dGVkYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgZGVmYXVsdE11dGVkYCBpbmRpY2F0ZXNcbiAqIHdoZXRoZXIgdGhlIG1lZGlhIHNob3VsZCBzdGFydCBtdXRlZCBvciBub3QuIE9ubHkgY2hhbmdlcyB0aGUgZGVmYXVsdCBzdGF0ZSBvZiB0aGVcbiAqIG1lZGlhLiBgbXV0ZWRgIGFuZCBgZGVmYXVsdE11dGVkYCBjYW4gaGF2ZSBkaWZmZXJlbnQgdmFsdWVzLiB7QGxpbmsgSHRtbDUjbXV0ZWR9IGluZGljYXRlcyB0aGVcbiAqIGN1cnJlbnQgc3RhdGUuXG4gKlxuICogQG1ldGhvZCBIdG1sNSNkZWZhdWx0TXV0ZWRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiAgICAgICAgIC0gVGhlIHZhbHVlIG9mIGBkZWZhdWx0TXV0ZWRgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuXG4gKiAgICAgICAgIC0gVHJ1ZSBpbmRpY2F0ZXMgdGhhdCB0aGUgbWVkaWEgc2hvdWxkIHN0YXJ0IG11dGVkLlxuICogICAgICAgICAtIEZhbHNlIGluZGljYXRlcyB0aGF0IHRoZSBtZWRpYSBzaG91bGQgbm90IHN0YXJ0IG11dGVkXG4gKlxuICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS1kZWZhdWx0bXV0ZWR9XG4gKi9cbidkZWZhdWx0TXV0ZWQnLFxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIGBhdXRvcGxheWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gYGF1dG9wbGF5YCBpbmRpY2F0ZXNcbiAqIHRoYXQgdGhlIG1lZGlhIHNob3VsZCBzdGFydCB0byBwbGF5IGFzIHNvb24gYXMgdGhlIHBhZ2UgaXMgcmVhZHkuXG4gKlxuICogQG1ldGhvZCBIdG1sNSNhdXRvcGxheVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqICAgICAgICAgLSBUaGUgdmFsdWUgb2YgYGF1dG9wbGF5YCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LlxuICogICAgICAgICAtIFRydWUgaW5kaWNhdGVzIHRoYXQgdGhlIG1lZGlhIHNob3VsZCBzdGFydCBhcyBzb29uIGFzIHRoZSBwYWdlIGxvYWRzLlxuICogICAgICAgICAtIEZhbHNlIGluZGljYXRlcyB0aGF0IHRoZSBtZWRpYSBzaG91bGQgbm90IHN0YXJ0IGFzIHNvb24gYXMgdGhlIHBhZ2UgbG9hZHMuXG4gKlxuICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2F0dHItbWVkaWEtYXV0b3BsYXl9XG4gKi9cbidhdXRvcGxheScsXG4vKipcbiAqIEdldCB0aGUgdmFsdWUgb2YgYGNvbnRyb2xzYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgY29udHJvbHNgIGluZGljYXRlc1xuICogd2hldGhlciB0aGUgbmF0aXZlIG1lZGlhIGNvbnRyb2xzIHNob3VsZCBiZSBzaG93biBvciBoaWRkZW4uXG4gKlxuICogQG1ldGhvZCBIdG1sNSNjb250cm9sc1xuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqICAgICAgICAgLSBUaGUgdmFsdWUgb2YgYGNvbnRyb2xzYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LlxuICogICAgICAgICAtIFRydWUgaW5kaWNhdGVzIHRoYXQgbmF0aXZlIGNvbnRyb2xzIHNob3VsZCBiZSBzaG93aW5nLlxuICogICAgICAgICAtIEZhbHNlIGluZGljYXRlcyB0aGF0IG5hdGl2ZSBjb250cm9scyBzaG91bGQgYmUgaGlkZGVuLlxuICpcbiAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNhdHRyLW1lZGlhLWNvbnRyb2xzfVxuICovXG4nY29udHJvbHMnLFxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIGBsb29wYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgbG9vcGAgaW5kaWNhdGVzXG4gKiB0aGF0IHRoZSBtZWRpYSBzaG91bGQgcmV0dXJuIHRvIHRoZSBzdGFydCBvZiB0aGUgbWVkaWEgYW5kIGNvbnRpbnVlIHBsYXlpbmcgb25jZVxuICogaXQgcmVhY2hlcyB0aGUgZW5kLlxuICpcbiAqIEBtZXRob2QgSHRtbDUjbG9vcFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqICAgICAgICAgLSBUaGUgdmFsdWUgb2YgYGxvb3BgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuXG4gKiAgICAgICAgIC0gVHJ1ZSBpbmRpY2F0ZXMgdGhhdCBwbGF5YmFjayBzaG91bGQgc2VlayBiYWNrIHRvIHN0YXJ0IG9uY2VcbiAqICAgICAgICAgICB0aGUgZW5kIG9mIGEgbWVkaWEgaXMgcmVhY2hlZC5cbiAqICAgICAgICAgLSBGYWxzZSBpbmRpY2F0ZXMgdGhhdCBwbGF5YmFjayBzaG91bGQgbm90IGxvb3AgYmFjayB0byB0aGUgc3RhcnQgd2hlbiB0aGVcbiAqICAgICAgICAgICBlbmQgb2YgdGhlIG1lZGlhIGlzIHJlYWNoZWQuXG4gKlxuICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2F0dHItbWVkaWEtbG9vcH1cbiAqL1xuJ2xvb3AnLFxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIGBwbGF5c2lubGluZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gYHBsYXlzaW5saW5lYCBpbmRpY2F0ZXNcbiAqIHRvIHRoZSBicm93c2VyIHRoYXQgbm9uLWZ1bGxzY3JlZW4gcGxheWJhY2sgaXMgcHJlZmVycmVkIHdoZW4gZnVsbHNjcmVlblxuICogcGxheWJhY2sgaXMgdGhlIG5hdGl2ZSBkZWZhdWx0LCBzdWNoIGFzIGluIGlPUyBTYWZhcmkuXG4gKlxuICogQG1ldGhvZCBIdG1sNSNwbGF5c2lubGluZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqICAgICAgICAgLSBUaGUgdmFsdWUgb2YgYHBsYXlzaW5saW5lYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LlxuICogICAgICAgICAtIFRydWUgaW5kaWNhdGVzIHRoYXQgdGhlIG1lZGlhIHNob3VsZCBwbGF5IGlubGluZS5cbiAqICAgICAgICAgLSBGYWxzZSBpbmRpY2F0ZXMgdGhhdCB0aGUgbWVkaWEgc2hvdWxkIG5vdCBwbGF5IGlubGluZS5cbiAqXG4gKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnLyNhdHRyLXZpZGVvLXBsYXlzaW5saW5lfVxuICovXG4ncGxheXNpbmxpbmUnXS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gIEh0bWw1LnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5lbF9bcHJvcF0gfHwgdGhpcy5lbF8uaGFzQXR0cmlidXRlKHByb3ApO1xuICB9O1xufSk7IC8vIFdyYXAgbmF0aXZlIGJvb2xlYW4gYXR0cmlidXRlcyB3aXRoIHNldHRlcnMgdGhhdCBzZXQgYm90aCBwcm9wZXJ0eSBhbmQgYXR0cmlidXRlXG4vLyBUaGUgbGlzdCBpcyBhcyBmb2xsb3dlZDpcbi8vIHNldE11dGVkLCBzZXREZWZhdWx0TXV0ZWQsIHNldEF1dG9wbGF5LCBzZXRMb29wLCBzZXRQbGF5c2lubGluZVxuLy8gc2V0Q29udHJvbHMgaXMgc3BlY2lhbC1jYXNlZCBhYm92ZVxuXG5bXG4vKipcbiAqIFNldCB0aGUgdmFsdWUgb2YgYG11dGVkYCBvbiB0aGUgbWVkaWEgZWxlbWVudC4gYG11dGVkYCBpbmRpY2F0ZXMgdGhhdCB0aGUgY3VycmVudFxuICogYXVkaW8gbGV2ZWwgc2hvdWxkIGJlIHNpbGVudC5cbiAqXG4gKiBAbWV0aG9kIEh0bWw1I3NldE11dGVkXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG11dGVkXG4gKiAgICAgICAgLSBUcnVlIGlmIHRoZSBhdWRpbyBzaG91bGQgYmUgc2V0IHRvIHNpbGVudFxuICogICAgICAgIC0gRmFsc2Ugb3RoZXJ3aXNlXG4gKlxuICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS1tdXRlZH1cbiAqL1xuJ211dGVkJyxcbi8qKlxuICogU2V0IHRoZSB2YWx1ZSBvZiBgZGVmYXVsdE11dGVkYCBvbiB0aGUgbWVkaWEgZWxlbWVudC4gYGRlZmF1bHRNdXRlZGAgaW5kaWNhdGVzIHRoYXQgdGhlIGN1cnJlbnRcbiAqIGF1ZGlvIGxldmVsIHNob3VsZCBiZSBzaWxlbnQsIGJ1dCB3aWxsIG9ubHkgZWZmZWN0IHRoZSBtdXRlZCBsZXZlbCBvbiBpbnRpYWwgcGxheWJhY2suLlxuICpcbiAqIEBtZXRob2QgSHRtbDUucHJvdG90eXBlLnNldERlZmF1bHRNdXRlZFxuICogQHBhcmFtIHtib29sZWFufSBkZWZhdWx0TXV0ZWRcbiAqICAgICAgICAtIFRydWUgaWYgdGhlIGF1ZGlvIHNob3VsZCBiZSBzZXQgdG8gc2lsZW50XG4gKiAgICAgICAgLSBGYWxzZSBvdGhlcndpc2VcbiAqXG4gKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjZG9tLW1lZGlhLWRlZmF1bHRtdXRlZH1cbiAqL1xuJ2RlZmF1bHRNdXRlZCcsXG4vKipcbiAqIFNldCB0aGUgdmFsdWUgb2YgYGF1dG9wbGF5YCBvbiB0aGUgbWVkaWEgZWxlbWVudC4gYGF1dG9wbGF5YCBpbmRpY2F0ZXNcbiAqIHRoYXQgdGhlIG1lZGlhIHNob3VsZCBzdGFydCB0byBwbGF5IGFzIHNvb24gYXMgdGhlIHBhZ2UgaXMgcmVhZHkuXG4gKlxuICogQG1ldGhvZCBIdG1sNSNzZXRBdXRvcGxheVxuICogQHBhcmFtIHtib29sZWFufSBhdXRvcGxheVxuICogICAgICAgICAtIFRydWUgaW5kaWNhdGVzIHRoYXQgdGhlIG1lZGlhIHNob3VsZCBzdGFydCBhcyBzb29uIGFzIHRoZSBwYWdlIGxvYWRzLlxuICogICAgICAgICAtIEZhbHNlIGluZGljYXRlcyB0aGF0IHRoZSBtZWRpYSBzaG91bGQgbm90IHN0YXJ0IGFzIHNvb24gYXMgdGhlIHBhZ2UgbG9hZHMuXG4gKlxuICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2F0dHItbWVkaWEtYXV0b3BsYXl9XG4gKi9cbidhdXRvcGxheScsXG4vKipcbiAqIFNldCB0aGUgdmFsdWUgb2YgYGxvb3BgIG9uIHRoZSBtZWRpYSBlbGVtZW50LiBgbG9vcGAgaW5kaWNhdGVzXG4gKiB0aGF0IHRoZSBtZWRpYSBzaG91bGQgcmV0dXJuIHRvIHRoZSBzdGFydCBvZiB0aGUgbWVkaWEgYW5kIGNvbnRpbnVlIHBsYXlpbmcgb25jZVxuICogaXQgcmVhY2hlcyB0aGUgZW5kLlxuICpcbiAqIEBtZXRob2QgSHRtbDUjc2V0TG9vcFxuICogQHBhcmFtIHtib29sZWFufSBsb29wXG4gKiAgICAgICAgIC0gVHJ1ZSBpbmRpY2F0ZXMgdGhhdCBwbGF5YmFjayBzaG91bGQgc2VlayBiYWNrIHRvIHN0YXJ0IG9uY2VcbiAqICAgICAgICAgICB0aGUgZW5kIG9mIGEgbWVkaWEgaXMgcmVhY2hlZC5cbiAqICAgICAgICAgLSBGYWxzZSBpbmRpY2F0ZXMgdGhhdCBwbGF5YmFjayBzaG91bGQgbm90IGxvb3AgYmFjayB0byB0aGUgc3RhcnQgd2hlbiB0aGVcbiAqICAgICAgICAgICBlbmQgb2YgdGhlIG1lZGlhIGlzIHJlYWNoZWQuXG4gKlxuICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2F0dHItbWVkaWEtbG9vcH1cbiAqL1xuJ2xvb3AnLFxuLyoqXG4gKiBTZXQgdGhlIHZhbHVlIG9mIGBwbGF5c2lubGluZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gYHBsYXlzaW5saW5lYCBpbmRpY2F0ZXNcbiAqIHRvIHRoZSBicm93c2VyIHRoYXQgbm9uLWZ1bGxzY3JlZW4gcGxheWJhY2sgaXMgcHJlZmVycmVkIHdoZW4gZnVsbHNjcmVlblxuICogcGxheWJhY2sgaXMgdGhlIG5hdGl2ZSBkZWZhdWx0LCBzdWNoIGFzIGluIGlPUyBTYWZhcmkuXG4gKlxuICogQG1ldGhvZCBIdG1sNSNzZXRQbGF5c2lubGluZVxuICogQHBhcmFtIHtib29sZWFufSBwbGF5c2lubGluZVxuICogICAgICAgICAtIFRydWUgaW5kaWNhdGVzIHRoYXQgdGhlIG1lZGlhIHNob3VsZCBwbGF5IGlubGluZS5cbiAqICAgICAgICAgLSBGYWxzZSBpbmRpY2F0ZXMgdGhhdCB0aGUgbWVkaWEgc2hvdWxkIG5vdCBwbGF5IGlubGluZS5cbiAqXG4gKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnLyNhdHRyLXZpZGVvLXBsYXlzaW5saW5lfVxuICovXG4ncGxheXNpbmxpbmUnXS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gIEh0bWw1LnByb3RvdHlwZVsnc2V0JyArIHRvVGl0bGVDYXNlKHByb3ApXSA9IGZ1bmN0aW9uICh2KSB7XG4gICAgdGhpcy5lbF9bcHJvcF0gPSB2O1xuXG4gICAgaWYgKHYpIHtcbiAgICAgIHRoaXMuZWxfLnNldEF0dHJpYnV0ZShwcm9wLCBwcm9wKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbF8ucmVtb3ZlQXR0cmlidXRlKHByb3ApO1xuICAgIH1cbiAgfTtcbn0pOyAvLyBXcmFwIG5hdGl2ZSBwcm9wZXJ0aWVzIHdpdGggYSBnZXR0ZXJcbi8vIFRoZSBsaXN0IGlzIGFzIGZvbGxvd2VkXG4vLyBwYXVzZWQsIGN1cnJlbnRUaW1lLCBidWZmZXJlZCwgdm9sdW1lLCBwb3N0ZXIsIHByZWxvYWQsIGVycm9yLCBzZWVraW5nXG4vLyBzZWVrYWJsZSwgZW5kZWQsIHBsYXliYWNrUmF0ZSwgZGVmYXVsdFBsYXliYWNrUmF0ZSwgcGxheWVkLCBuZXR3b3JrU3RhdGVcbi8vIHJlYWR5U3RhdGUsIHZpZGVvV2lkdGgsIHZpZGVvSGVpZ2h0XG5cbltcbi8qKlxuICogR2V0IHRoZSB2YWx1ZSBvZiBgcGF1c2VkYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgcGF1c2VkYCBpbmRpY2F0ZXMgd2hldGhlciB0aGUgbWVkaWEgZWxlbWVudFxuICogaXMgY3VycmVudGx5IHBhdXNlZCBvciBub3QuXG4gKlxuICogQG1ldGhvZCBIdG1sNSNwYXVzZWRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiAgICAgICAgIFRoZSB2YWx1ZSBvZiBgcGF1c2VkYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LlxuICpcbiAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtcGF1c2VkfVxuICovXG4ncGF1c2VkJyxcbi8qKlxuICogR2V0IHRoZSB2YWx1ZSBvZiBgY3VycmVudFRpbWVgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIGBjdXJyZW50VGltZWAgaW5kaWNhdGVzXG4gKiB0aGUgY3VycmVudCBzZWNvbmQgdGhhdCB0aGUgbWVkaWEgaXMgYXQgaW4gcGxheWJhY2suXG4gKlxuICogQG1ldGhvZCBIdG1sNSNjdXJyZW50VGltZVxuICogQHJldHVybiB7bnVtYmVyfVxuICogICAgICAgICBUaGUgdmFsdWUgb2YgYGN1cnJlbnRUaW1lYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LlxuICpcbiAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtY3VycmVudHRpbWV9XG4gKi9cbidjdXJyZW50VGltZScsXG4vKipcbiAqIEdldCB0aGUgdmFsdWUgb2YgYGJ1ZmZlcmVkYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgYnVmZmVyZWRgIGlzIGEgYFRpbWVSYW5nZWBcbiAqIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIHBhcnRzIG9mIHRoZSBtZWRpYSB0aGF0IGFyZSBhbHJlYWR5IGRvd25sb2FkZWQgYW5kXG4gKiBhdmFpbGFibGUgZm9yIHBsYXliYWNrLlxuICpcbiAqIEBtZXRob2QgSHRtbDUjYnVmZmVyZWRcbiAqIEByZXR1cm4ge1RpbWVSYW5nZX1cbiAqICAgICAgICAgVGhlIHZhbHVlIG9mIGBidWZmZXJlZGAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC5cbiAqXG4gKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjZG9tLW1lZGlhLWJ1ZmZlcmVkfVxuICovXG4nYnVmZmVyZWQnLFxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIGB2b2x1bWVgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIGB2b2x1bWVgIGluZGljYXRlc1xuICogdGhlIGN1cnJlbnQgcGxheWJhY2sgdm9sdW1lIG9mIGF1ZGlvIGZvciBhIG1lZGlhLiBgdm9sdW1lYCB3aWxsIGJlIGEgdmFsdWUgZnJvbSAwXG4gKiAoc2lsZW50KSB0byAxIChsb3VkZXN0IGFuZCBkZWZhdWx0KS5cbiAqXG4gKiBAbWV0aG9kIEh0bWw1I3ZvbHVtZVxuICogQHJldHVybiB7bnVtYmVyfVxuICogICAgICAgICBUaGUgdmFsdWUgb2YgYHZvbHVtZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gVmFsdWUgd2lsbCBiZSBiZXR3ZWVuIDAtMS5cbiAqXG4gKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjZG9tLWEtdm9sdW1lfVxuICovXG4ndm9sdW1lJyxcbi8qKlxuICogR2V0IHRoZSB2YWx1ZSBvZiBgcG9zdGVyYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgcG9zdGVyYCBpbmRpY2F0ZXNcbiAqIHRoYXQgdGhlIHVybCBvZiBhbiBpbWFnZSBmaWxlIHRoYXQgY2FuL3dpbGwgYmUgc2hvd24gd2hlbiBubyBtZWRpYSBkYXRhIGlzIGF2YWlsYWJsZS5cbiAqXG4gKiBAbWV0aG9kIEh0bWw1I3Bvc3RlclxuICogQHJldHVybiB7c3RyaW5nfVxuICogICAgICAgICBUaGUgdmFsdWUgb2YgYHBvc3RlcmAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gVmFsdWUgd2lsbCBiZSBhIHVybCB0byBhblxuICogICAgICAgICBpbWFnZS5cbiAqXG4gKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjYXR0ci12aWRlby1wb3N0ZXJ9XG4gKi9cbidwb3N0ZXInLFxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIGBwcmVsb2FkYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgcHJlbG9hZGAgaW5kaWNhdGVzXG4gKiB3aGF0IHNob3VsZCBkb3dubG9hZCBiZWZvcmUgdGhlIG1lZGlhIGlzIGludGVyYWN0ZWQgd2l0aC4gSXQgY2FuIGhhdmUgdGhlIGZvbGxvd2luZ1xuICogdmFsdWVzOlxuICogLSBub25lOiBub3RoaW5nIHNob3VsZCBiZSBkb3dubG9hZGVkXG4gKiAtIG1ldGFkYXRhOiBwb3N0ZXIgYW5kIHRoZSBmaXJzdCBmZXcgZnJhbWVzIG9mIHRoZSBtZWRpYSBtYXkgYmUgZG93bmxvYWRlZCB0byBnZXRcbiAqICAgbWVkaWEgZGltZW5zaW9ucyBhbmQgb3RoZXIgbWV0YWRhdGFcbiAqIC0gYXV0bzogYWxsb3cgdGhlIG1lZGlhIGFuZCBtZXRhZGF0YSBmb3IgdGhlIG1lZGlhIHRvIGJlIGRvd25sb2FkZWQgYmVmb3JlXG4gKiAgICBpbnRlcmFjdGlvblxuICpcbiAqIEBtZXRob2QgSHRtbDUjcHJlbG9hZFxuICogQHJldHVybiB7c3RyaW5nfVxuICogICAgICAgICBUaGUgdmFsdWUgb2YgYHByZWxvYWRgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIFdpbGwgYmUgJ25vbmUnLCAnbWV0YWRhdGEnLFxuICogICAgICAgICBvciAnYXV0bycuXG4gKlxuICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2F0dHItbWVkaWEtcHJlbG9hZH1cbiAqL1xuJ3ByZWxvYWQnLFxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIHRoZSBgZXJyb3JgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIGBlcnJvcmAgaW5kaWNhdGVzIGFueVxuICogTWVkaWFFcnJvciB0aGF0IG1heSBoYXZlIG9jY3VycmVkIGR1cmluZyBwbGF5YmFjay4gSWYgZXJyb3IgcmV0dXJucyBudWxsIHRoZXJlIGlzIG5vXG4gKiBjdXJyZW50IGVycm9yLlxuICpcbiAqIEBtZXRob2QgSHRtbDUjZXJyb3JcbiAqIEByZXR1cm4ge01lZGlhRXJyb3J8bnVsbH1cbiAqICAgICAgICAgVGhlIHZhbHVlIG9mIGBlcnJvcmAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gV2lsbCBiZSBgTWVkaWFFcnJvcmAgaWYgdGhlcmVcbiAqICAgICAgICAgaXMgYSBjdXJyZW50IGVycm9yIGFuZCBudWxsIG90aGVyd2lzZS5cbiAqXG4gKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjZG9tLW1lZGlhLWVycm9yfVxuICovXG4nZXJyb3InLFxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIGBzZWVraW5nYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgc2Vla2luZ2AgaW5kaWNhdGVzIHdoZXRoZXIgdGhlXG4gKiBtZWRpYSBpcyBjdXJyZW50bHkgc2Vla2luZyB0byBhIG5ldyBwb3NpdGlvbiBvciBub3QuXG4gKlxuICogQG1ldGhvZCBIdG1sNSNzZWVraW5nXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogICAgICAgICAtIFRoZSB2YWx1ZSBvZiBgc2Vla2luZ2AgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC5cbiAqICAgICAgICAgLSBUcnVlIGluZGljYXRlcyB0aGF0IHRoZSBtZWRpYSBpcyBjdXJyZW50bHkgc2Vla2luZyB0byBhIG5ldyBwb3NpdGlvbi5cbiAqICAgICAgICAgLSBGYWxzZSBpbmRpY2F0ZXMgdGhhdCB0aGUgbWVkaWEgaXMgbm90IHNlZWtpbmcgdG8gYSBuZXcgcG9zaXRpb24gYXQgdGhpcyB0aW1lLlxuICpcbiAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtc2Vla2luZ31cbiAqL1xuJ3NlZWtpbmcnLFxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIGBzZWVrYWJsZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gYHNlZWthYmxlYCByZXR1cm5zIGFcbiAqIGBUaW1lUmFuZ2VgIG9iamVjdCBpbmRpY2F0aW5nIHJhbmdlcyBvZiB0aW1lIHRoYXQgY2FuIGN1cnJlbnRseSBiZSBgc2Vla2VkYCB0by5cbiAqXG4gKiBAbWV0aG9kIEh0bWw1I3NlZWthYmxlXG4gKiBAcmV0dXJuIHtUaW1lUmFuZ2V9XG4gKiAgICAgICAgIFRoZSB2YWx1ZSBvZiBgc2Vla2FibGVgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIEEgYFRpbWVSYW5nZWAgb2JqZWN0XG4gKiAgICAgICAgIGluZGljYXRpbmcgdGhlIGN1cnJlbnQgcmFuZ2VzIG9mIHRpbWUgdGhhdCBjYW4gYmUgc2Vla2VkIHRvLlxuICpcbiAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtc2Vla2FibGV9XG4gKi9cbidzZWVrYWJsZScsXG4vKipcbiAqIEdldCB0aGUgdmFsdWUgb2YgYGVuZGVkYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgZW5kZWRgIGluZGljYXRlcyB3aGV0aGVyXG4gKiB0aGUgbWVkaWEgaGFzIHJlYWNoZWQgdGhlIGVuZCBvciBub3QuXG4gKlxuICogQG1ldGhvZCBIdG1sNSNlbmRlZFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqICAgICAgICAgLSBUaGUgdmFsdWUgb2YgYGVuZGVkYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LlxuICogICAgICAgICAtIFRydWUgaW5kaWNhdGVzIHRoYXQgdGhlIG1lZGlhIGhhcyBlbmRlZC5cbiAqICAgICAgICAgLSBGYWxzZSBpbmRpY2F0ZXMgdGhhdCB0aGUgbWVkaWEgaGFzIG5vdCBlbmRlZC5cbiAqXG4gKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjZG9tLW1lZGlhLWVuZGVkfVxuICovXG4nZW5kZWQnLFxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIGBwbGF5YmFja1JhdGVgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIGBwbGF5YmFja1JhdGVgIGluZGljYXRlc1xuICogdGhlIHJhdGUgYXQgd2hpY2ggdGhlIG1lZGlhIGlzIGN1cnJlbnRseSBwbGF5aW5nIGJhY2suIEV4YW1wbGVzOlxuICogICAtIGlmIHBsYXliYWNrUmF0ZSBpcyBzZXQgdG8gMiwgbWVkaWEgd2lsbCBwbGF5IHR3aWNlIGFzIGZhc3QuXG4gKiAgIC0gaWYgcGxheWJhY2tSYXRlIGlzIHNldCB0byAwLjUsIG1lZGlhIHdpbGwgcGxheSBoYWxmIGFzIGZhc3QuXG4gKlxuICogQG1ldGhvZCBIdG1sNSNwbGF5YmFja1JhdGVcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqICAgICAgICAgVGhlIHZhbHVlIG9mIGBwbGF5YmFja1JhdGVgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIEEgbnVtYmVyIGluZGljYXRpbmdcbiAqICAgICAgICAgdGhlIGN1cnJlbnQgcGxheWJhY2sgc3BlZWQgb2YgdGhlIG1lZGlhLCB3aGVyZSAxIGlzIG5vcm1hbCBzcGVlZC5cbiAqXG4gKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjZG9tLW1lZGlhLXBsYXliYWNrcmF0ZX1cbiAqL1xuJ3BsYXliYWNrUmF0ZScsXG4vKipcbiAqIEdldCB0aGUgdmFsdWUgb2YgYGRlZmF1bHRQbGF5YmFja1JhdGVgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIGBkZWZhdWx0UGxheWJhY2tSYXRlYCBpbmRpY2F0ZXNcbiAqIHRoZSByYXRlIGF0IHdoaWNoIHRoZSBtZWRpYSBpcyBjdXJyZW50bHkgcGxheWluZyBiYWNrLiBUaGlzIHZhbHVlIHdpbGwgbm90IGluZGljYXRlIHRoZSBjdXJyZW50XG4gKiBgcGxheWJhY2tSYXRlYCBhZnRlciBwbGF5YmFjayBoYXMgc3RhcnRlZCwgdXNlIHtAbGluayBIdG1sNSNwbGF5YmFja1JhdGV9IGZvciB0aGF0LlxuICpcbiAqIEV4YW1wbGVzOlxuICogICAtIGlmIGRlZmF1bHRQbGF5YmFja1JhdGUgaXMgc2V0IHRvIDIsIG1lZGlhIHdpbGwgcGxheSB0d2ljZSBhcyBmYXN0LlxuICogICAtIGlmIGRlZmF1bHRQbGF5YmFja1JhdGUgaXMgc2V0IHRvIDAuNSwgbWVkaWEgd2lsbCBwbGF5IGhhbGYgYXMgZmFzdC5cbiAqXG4gKiBAbWV0aG9kIEh0bWw1LnByb3RvdHlwZS5kZWZhdWx0UGxheWJhY2tSYXRlXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKiAgICAgICAgIFRoZSB2YWx1ZSBvZiBgZGVmYXVsdFBsYXliYWNrUmF0ZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gQSBudW1iZXIgaW5kaWNhdGluZ1xuICogICAgICAgICB0aGUgY3VycmVudCBwbGF5YmFjayBzcGVlZCBvZiB0aGUgbWVkaWEsIHdoZXJlIDEgaXMgbm9ybWFsIHNwZWVkLlxuICpcbiAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtcGxheWJhY2tyYXRlfVxuICovXG4nZGVmYXVsdFBsYXliYWNrUmF0ZScsXG4vKipcbiAqIEdldCB0aGUgdmFsdWUgb2YgYHBsYXllZGAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gYHBsYXllZGAgcmV0dXJucyBhIGBUaW1lUmFuZ2VgXG4gKiBvYmplY3QgcmVwcmVzZW50aW5nIHBvaW50cyBpbiB0aGUgbWVkaWEgdGltZWxpbmUgdGhhdCBoYXZlIGJlZW4gcGxheWVkLlxuICpcbiAqIEBtZXRob2QgSHRtbDUjcGxheWVkXG4gKiBAcmV0dXJuIHtUaW1lUmFuZ2V9XG4gKiAgICAgICAgIFRoZSB2YWx1ZSBvZiBgcGxheWVkYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBBIGBUaW1lUmFuZ2VgIG9iamVjdCBpbmRpY2F0aW5nXG4gKiAgICAgICAgIHRoZSByYW5nZXMgb2YgdGltZSB0aGF0IGhhdmUgYmVlbiBwbGF5ZWQuXG4gKlxuICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS1wbGF5ZWR9XG4gKi9cbidwbGF5ZWQnLFxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIGBuZXR3b3JrU3RhdGVgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIGBuZXR3b3JrU3RhdGVgIGluZGljYXRlc1xuICogdGhlIGN1cnJlbnQgbmV0d29yayBzdGF0ZS4gSXQgcmV0dXJucyBhbiBlbnVtZXJhdGlvbiBmcm9tIHRoZSBmb2xsb3dpbmcgbGlzdDpcbiAqIC0gMDogTkVUV09SS19FTVBUWVxuICogLSAxOiBORVRXT1JLX0lETEVcbiAqIC0gMjogTkVUV09SS19MT0FESU5HXG4gKiAtIDM6IE5FVFdPUktfTk9fU09VUkNFXG4gKlxuICogQG1ldGhvZCBIdG1sNSNuZXR3b3JrU3RhdGVcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqICAgICAgICAgVGhlIHZhbHVlIG9mIGBuZXR3b3JrU3RhdGVgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIFRoaXMgd2lsbCBiZSBhIG51bWJlclxuICogICAgICAgICBmcm9tIHRoZSBsaXN0IGluIHRoZSBkZXNjcmlwdGlvbi5cbiAqXG4gKiBAc2VlIFtTcGVjXSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS1uZXR3b3Jrc3RhdGV9XG4gKi9cbiduZXR3b3JrU3RhdGUnLFxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIGByZWFkeVN0YXRlYCBmcm9tIHRoZSBtZWRpYSBlbGVtZW50LiBgcmVhZHlTdGF0ZWAgaW5kaWNhdGVzXG4gKiB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgbWVkaWEgZWxlbWVudC4gSXQgcmV0dXJucyBhbiBlbnVtZXJhdGlvbiBmcm9tIHRoZVxuICogZm9sbG93aW5nIGxpc3Q6XG4gKiAtIDA6IEhBVkVfTk9USElOR1xuICogLSAxOiBIQVZFX01FVEFEQVRBXG4gKiAtIDI6IEhBVkVfQ1VSUkVOVF9EQVRBXG4gKiAtIDM6IEhBVkVfRlVUVVJFX0RBVEFcbiAqIC0gNDogSEFWRV9FTk9VR0hfREFUQVxuICpcbiAqIEBtZXRob2QgSHRtbDUjcmVhZHlTdGF0ZVxuICogQHJldHVybiB7bnVtYmVyfVxuICogICAgICAgICBUaGUgdmFsdWUgb2YgYHJlYWR5U3RhdGVgIGZyb20gdGhlIG1lZGlhIGVsZW1lbnQuIFRoaXMgd2lsbCBiZSBhIG51bWJlclxuICogICAgICAgICBmcm9tIHRoZSBsaXN0IGluIHRoZSBkZXNjcmlwdGlvbi5cbiAqXG4gKiBAc2VlIFtTcGVjXSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI3JlYWR5LXN0YXRlc31cbiAqL1xuJ3JlYWR5U3RhdGUnLFxuLyoqXG4gKiBHZXQgdGhlIHZhbHVlIG9mIGB2aWRlb1dpZHRoYCBmcm9tIHRoZSB2aWRlbyBlbGVtZW50LiBgdmlkZW9XaWR0aGAgaW5kaWNhdGVzXG4gKiB0aGUgY3VycmVudCB3aWR0aCBvZiB0aGUgdmlkZW8gaW4gY3NzIHBpeGVscy5cbiAqXG4gKiBAbWV0aG9kIEh0bWw1I3ZpZGVvV2lkdGhcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqICAgICAgICAgVGhlIHZhbHVlIG9mIGB2aWRlb1dpZHRoYCBmcm9tIHRoZSB2aWRlbyBlbGVtZW50LiBUaGlzIHdpbGwgYmUgYSBudW1iZXJcbiAqICAgICAgICAgaW4gY3NzIHBpeGVscy5cbiAqXG4gKiBAc2VlIFtTcGVjXSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS12aWRlby12aWRlb3dpZHRofVxuICovXG4ndmlkZW9XaWR0aCcsXG4vKipcbiAqIEdldCB0aGUgdmFsdWUgb2YgYHZpZGVvSGVpZ2h0YCBmcm9tIHRoZSB2aWRlbyBlbGVtZW50LiBgdmlkZW9IZWlnaHRgIGluZGljYXRlc1xuICogdGhlIGN1cnJlbnQgaGVpZ2h0IG9mIHRoZSB2aWRlbyBpbiBjc3MgcGl4ZWxzLlxuICpcbiAqIEBtZXRob2QgSHRtbDUjdmlkZW9IZWlnaHRcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqICAgICAgICAgVGhlIHZhbHVlIG9mIGB2aWRlb0hlaWdodGAgZnJvbSB0aGUgdmlkZW8gZWxlbWVudC4gVGhpcyB3aWxsIGJlIGEgbnVtYmVyXG4gKiAgICAgICAgIGluIGNzcyBwaXhlbHMuXG4gKlxuICogQHNlZSBbU3BlY10ge0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tdmlkZW8tdmlkZW93aWR0aH1cbiAqL1xuJ3ZpZGVvSGVpZ2h0J10uZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICBIdG1sNS5wcm90b3R5cGVbcHJvcF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxfW3Byb3BdO1xuICB9O1xufSk7IC8vIFdyYXAgbmF0aXZlIHByb3BlcnRpZXMgd2l0aCBhIHNldHRlciBpbiB0aGlzIGZvcm1hdDpcbi8vIHNldCArIHRvVGl0bGVDYXNlKG5hbWUpXG4vLyBUaGUgbGlzdCBpcyBhcyBmb2xsb3dzOlxuLy8gc2V0Vm9sdW1lLCBzZXRTcmMsIHNldFBvc3Rlciwgc2V0UHJlbG9hZCwgc2V0UGxheWJhY2tSYXRlLCBzZXREZWZhdWx0UGxheWJhY2tSYXRlXG5cbltcbi8qKlxuICogU2V0IHRoZSB2YWx1ZSBvZiBgdm9sdW1lYCBvbiB0aGUgbWVkaWEgZWxlbWVudC4gYHZvbHVtZWAgaW5kaWNhdGVzIHRoZSBjdXJyZW50XG4gKiBhdWRpbyBsZXZlbCBhcyBhIHBlcmNlbnRhZ2UgaW4gZGVjaW1hbCBmb3JtLiBUaGlzIG1lYW5zIHRoYXQgMSBpcyAxMDAlLCAwLjUgaXMgNTAlLCBhbmRcbiAqIHNvIG9uLlxuICpcbiAqIEBtZXRob2QgSHRtbDUjc2V0Vm9sdW1lXG4gKiBAcGFyYW0ge251bWJlcn0gcGVyY2VudEFzRGVjaW1hbFxuICogICAgICAgIFRoZSB2b2x1bWUgcGVyY2VudCBhcyBhIGRlY2ltYWwuIFZhbGlkIHJhbmdlIGlzIGZyb20gMC0xLlxuICpcbiAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tYS12b2x1bWV9XG4gKi9cbid2b2x1bWUnLFxuLyoqXG4gKiBTZXQgdGhlIHZhbHVlIG9mIGBzcmNgIG9uIHRoZSBtZWRpYSBlbGVtZW50LiBgc3JjYCBpbmRpY2F0ZXMgdGhlIGN1cnJlbnRcbiAqIHtAbGluayBUZWNoflNvdXJjZU9iamVjdH0gZm9yIHRoZSBtZWRpYS5cbiAqXG4gKiBAbWV0aG9kIEh0bWw1I3NldFNyY1xuICogQHBhcmFtIHtUZWNoflNvdXJjZU9iamVjdH0gc3JjXG4gKiAgICAgICAgVGhlIHNvdXJjZSBvYmplY3QgdG8gc2V0IGFzIHRoZSBjdXJyZW50IHNvdXJjZS5cbiAqXG4gKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjZG9tLW1lZGlhLXNyY31cbiAqL1xuJ3NyYycsXG4vKipcbiAqIFNldCB0aGUgdmFsdWUgb2YgYHBvc3RlcmAgb24gdGhlIG1lZGlhIGVsZW1lbnQuIGBwb3N0ZXJgIGlzIHRoZSB1cmwgdG9cbiAqIGFuIGltYWdlIGZpbGUgdGhhdCBjYW4vd2lsbCBiZSBzaG93biB3aGVuIG5vIG1lZGlhIGRhdGEgaXMgYXZhaWxhYmxlLlxuICpcbiAqIEBtZXRob2QgSHRtbDUjc2V0UG9zdGVyXG4gKiBAcGFyYW0ge3N0cmluZ30gcG9zdGVyXG4gKiAgICAgICAgVGhlIHVybCB0byBhbiBpbWFnZSB0aGF0IHNob3VsZCBiZSB1c2VkIGFzIHRoZSBgcG9zdGVyYCBmb3IgdGhlIG1lZGlhXG4gKiAgICAgICAgZWxlbWVudC5cbiAqXG4gKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjYXR0ci1tZWRpYS1wb3N0ZXJ9XG4gKi9cbidwb3N0ZXInLFxuLyoqXG4gKiBTZXQgdGhlIHZhbHVlIG9mIGBwcmVsb2FkYCBvbiB0aGUgbWVkaWEgZWxlbWVudC4gYHByZWxvYWRgIGluZGljYXRlc1xuICogd2hhdCBzaG91bGQgZG93bmxvYWQgYmVmb3JlIHRoZSBtZWRpYSBpcyBpbnRlcmFjdGVkIHdpdGguIEl0IGNhbiBoYXZlIHRoZSBmb2xsb3dpbmdcbiAqIHZhbHVlczpcbiAqIC0gbm9uZTogbm90aGluZyBzaG91bGQgYmUgZG93bmxvYWRlZFxuICogLSBtZXRhZGF0YTogcG9zdGVyIGFuZCB0aGUgZmlyc3QgZmV3IGZyYW1lcyBvZiB0aGUgbWVkaWEgbWF5IGJlIGRvd25sb2FkZWQgdG8gZ2V0XG4gKiAgIG1lZGlhIGRpbWVuc2lvbnMgYW5kIG90aGVyIG1ldGFkYXRhXG4gKiAtIGF1dG86IGFsbG93IHRoZSBtZWRpYSBhbmQgbWV0YWRhdGEgZm9yIHRoZSBtZWRpYSB0byBiZSBkb3dubG9hZGVkIGJlZm9yZVxuICogICAgaW50ZXJhY3Rpb25cbiAqXG4gKiBAbWV0aG9kIEh0bWw1I3NldFByZWxvYWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcmVsb2FkXG4gKiAgICAgICAgIFRoZSB2YWx1ZSBvZiBgcHJlbG9hZGAgdG8gc2V0IG9uIHRoZSBtZWRpYSBlbGVtZW50LiBNdXN0IGJlICdub25lJywgJ21ldGFkYXRhJyxcbiAqICAgICAgICAgb3IgJ2F1dG8nLlxuICpcbiAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNhdHRyLW1lZGlhLXByZWxvYWR9XG4gKi9cbidwcmVsb2FkJyxcbi8qKlxuICogU2V0IHRoZSB2YWx1ZSBvZiBgcGxheWJhY2tSYXRlYCBvbiB0aGUgbWVkaWEgZWxlbWVudC4gYHBsYXliYWNrUmF0ZWAgaW5kaWNhdGVzXG4gKiB0aGUgcmF0ZSBhdCB3aGljaCB0aGUgbWVkaWEgc2hvdWxkIHBsYXkgYmFjay4gRXhhbXBsZXM6XG4gKiAgIC0gaWYgcGxheWJhY2tSYXRlIGlzIHNldCB0byAyLCBtZWRpYSB3aWxsIHBsYXkgdHdpY2UgYXMgZmFzdC5cbiAqICAgLSBpZiBwbGF5YmFja1JhdGUgaXMgc2V0IHRvIDAuNSwgbWVkaWEgd2lsbCBwbGF5IGhhbGYgYXMgZmFzdC5cbiAqXG4gKiBAbWV0aG9kIEh0bWw1I3NldFBsYXliYWNrUmF0ZVxuICogQHJldHVybiB7bnVtYmVyfVxuICogICAgICAgICBUaGUgdmFsdWUgb2YgYHBsYXliYWNrUmF0ZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gQSBudW1iZXIgaW5kaWNhdGluZ1xuICogICAgICAgICB0aGUgY3VycmVudCBwbGF5YmFjayBzcGVlZCBvZiB0aGUgbWVkaWEsIHdoZXJlIDEgaXMgbm9ybWFsIHNwZWVkLlxuICpcbiAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtcGxheWJhY2tyYXRlfVxuICovXG4ncGxheWJhY2tSYXRlJyxcbi8qKlxuICogU2V0IHRoZSB2YWx1ZSBvZiBgZGVmYXVsdFBsYXliYWNrUmF0ZWAgb24gdGhlIG1lZGlhIGVsZW1lbnQuIGBkZWZhdWx0UGxheWJhY2tSYXRlYCBpbmRpY2F0ZXNcbiAqIHRoZSByYXRlIGF0IHdoaWNoIHRoZSBtZWRpYSBzaG91bGQgcGxheSBiYWNrIHVwb24gaW5pdGlhbCBzdGFydHVwLiBDaGFuZ2luZyB0aGlzIHZhbHVlXG4gKiBhZnRlciBhIHZpZGVvIGhhcyBzdGFydGVkIHdpbGwgZG8gbm90aGluZy4gSW5zdGVhZCB5b3Ugc2hvdWxkIHVzZWQge0BsaW5rIEh0bWw1I3NldFBsYXliYWNrUmF0ZX0uXG4gKlxuICogRXhhbXBsZSBWYWx1ZXM6XG4gKiAgIC0gaWYgcGxheWJhY2tSYXRlIGlzIHNldCB0byAyLCBtZWRpYSB3aWxsIHBsYXkgdHdpY2UgYXMgZmFzdC5cbiAqICAgLSBpZiBwbGF5YmFja1JhdGUgaXMgc2V0IHRvIDAuNSwgbWVkaWEgd2lsbCBwbGF5IGhhbGYgYXMgZmFzdC5cbiAqXG4gKiBAbWV0aG9kIEh0bWw1LnByb3RvdHlwZS5zZXREZWZhdWx0UGxheWJhY2tSYXRlXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKiAgICAgICAgIFRoZSB2YWx1ZSBvZiBgZGVmYXVsdFBsYXliYWNrUmF0ZWAgZnJvbSB0aGUgbWVkaWEgZWxlbWVudC4gQSBudW1iZXIgaW5kaWNhdGluZ1xuICogICAgICAgICB0aGUgY3VycmVudCBwbGF5YmFjayBzcGVlZCBvZiB0aGUgbWVkaWEsIHdoZXJlIDEgaXMgbm9ybWFsIHNwZWVkLlxuICpcbiAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtZGVmYXVsdHBsYXliYWNrcmF0ZX1cbiAqL1xuJ2RlZmF1bHRQbGF5YmFja1JhdGUnXS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gIEh0bWw1LnByb3RvdHlwZVsnc2V0JyArIHRvVGl0bGVDYXNlKHByb3ApXSA9IGZ1bmN0aW9uICh2KSB7XG4gICAgdGhpcy5lbF9bcHJvcF0gPSB2O1xuICB9O1xufSk7IC8vIHdyYXAgbmF0aXZlIGZ1bmN0aW9ucyB3aXRoIGEgZnVuY3Rpb25cbi8vIFRoZSBsaXN0IGlzIGFzIGZvbGxvd3M6XG4vLyBwYXVzZSwgbG9hZCwgcGxheVxuXG5bXG4vKipcbiAqIEEgd3JhcHBlciBhcm91bmQgdGhlIG1lZGlhIGVsZW1lbnRzIGBwYXVzZWAgZnVuY3Rpb24uIFRoaXMgd2lsbCBjYWxsIHRoZSBgSFRNTDVgXG4gKiBtZWRpYSBlbGVtZW50cyBgcGF1c2VgIGZ1bmN0aW9uLlxuICpcbiAqIEBtZXRob2QgSHRtbDUjcGF1c2VcbiAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtcGF1c2V9XG4gKi9cbidwYXVzZScsXG4vKipcbiAqIEEgd3JhcHBlciBhcm91bmQgdGhlIG1lZGlhIGVsZW1lbnRzIGBsb2FkYCBmdW5jdGlvbi4gVGhpcyB3aWxsIGNhbGwgdGhlIGBIVE1MNWBzXG4gKiBtZWRpYSBlbGVtZW50IGBsb2FkYCBmdW5jdGlvbi5cbiAqXG4gKiBAbWV0aG9kIEh0bWw1I2xvYWRcbiAqIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtbG9hZH1cbiAqL1xuJ2xvYWQnLFxuLyoqXG4gKiBBIHdyYXBwZXIgYXJvdW5kIHRoZSBtZWRpYSBlbGVtZW50cyBgcGxheWAgZnVuY3Rpb24uIFRoaXMgd2lsbCBjYWxsIHRoZSBgSFRNTDVgc1xuICogbWVkaWEgZWxlbWVudCBgcGxheWAgZnVuY3Rpb24uXG4gKlxuICogQG1ldGhvZCBIdG1sNSNwbGF5XG4gKiBAc2VlIFtTcGVjXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjZG9tLW1lZGlhLXBsYXl9XG4gKi9cbidwbGF5J10uZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICBIdG1sNS5wcm90b3R5cGVbcHJvcF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxfW3Byb3BdKCk7XG4gIH07XG59KTtcblRlY2gud2l0aFNvdXJjZUhhbmRsZXJzKEh0bWw1KTtcbi8qKlxuICogTmF0aXZlIHNvdXJjZSBoYW5kbGVyIGZvciBIdG1sNSwgc2ltcGx5IHBhc3NlcyB0aGUgc291cmNlIHRvIHRoZSBtZWRpYSBlbGVtZW50LlxuICpcbiAqIEBwcm9wZXJ0eSB7VGVjaH5Tb3VyY2VPYmplY3R9IHNvdXJjZVxuICogICAgICAgIFRoZSBzb3VyY2Ugb2JqZWN0XG4gKlxuICogQHByb3BlcnR5IHtIdG1sNX0gdGVjaFxuICogICAgICAgIFRoZSBpbnN0YW5jZSBvZiB0aGUgSFRNTDUgdGVjaC5cbiAqL1xuXG5IdG1sNS5uYXRpdmVTb3VyY2VIYW5kbGVyID0ge307XG4vKipcbiAqIENoZWNrIGlmIHRoZSBtZWRpYSBlbGVtZW50IGNhbiBwbGF5IHRoZSBnaXZlbiBtaW1lIHR5cGUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAqICAgICAgICBUaGUgbWltZXR5cGUgdG8gY2hlY2tcbiAqXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiAgICAgICAgICdwcm9iYWJseScsICdtYXliZScsIG9yICcnIChlbXB0eSBzdHJpbmcpXG4gKi9cblxuSHRtbDUubmF0aXZlU291cmNlSGFuZGxlci5jYW5QbGF5VHlwZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gIC8vIElFIHdpdGhvdXQgTWVkaWFQbGF5ZXIgdGhyb3dzIGFuIGVycm9yICgjNTE5KVxuICB0cnkge1xuICAgIHJldHVybiBIdG1sNS5URVNUX1ZJRC5jYW5QbGF5VHlwZSh0eXBlKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiAnJztcbiAgfVxufTtcbi8qKlxuICogQ2hlY2sgaWYgdGhlIG1lZGlhIGVsZW1lbnQgY2FuIGhhbmRsZSBhIHNvdXJjZSBuYXRpdmVseS5cbiAqXG4gKiBAcGFyYW0ge1RlY2h+U291cmNlT2JqZWN0fSBzb3VyY2VcbiAqICAgICAgICAgVGhlIHNvdXJjZSBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiAgICAgICAgIE9wdGlvbnMgdG8gYmUgcGFzc2VkIHRvIHRoZSB0ZWNoLlxuICpcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqICAgICAgICAgJ3Byb2JhYmx5JywgJ21heWJlJywgb3IgJycgKGVtcHR5IHN0cmluZykuXG4gKi9cblxuXG5IdG1sNS5uYXRpdmVTb3VyY2VIYW5kbGVyLmNhbkhhbmRsZVNvdXJjZSA9IGZ1bmN0aW9uIChzb3VyY2UsIG9wdGlvbnMpIHtcbiAgLy8gSWYgYSB0eXBlIHdhcyBwcm92aWRlZCB3ZSBzaG91bGQgcmVseSBvbiB0aGF0XG4gIGlmIChzb3VyY2UudHlwZSkge1xuICAgIHJldHVybiBIdG1sNS5uYXRpdmVTb3VyY2VIYW5kbGVyLmNhblBsYXlUeXBlKHNvdXJjZS50eXBlKTsgLy8gSWYgbm8gdHlwZSwgZmFsbCBiYWNrIHRvIGNoZWNraW5nICd2aWRlby9bRVhURU5TSU9OXSdcbiAgfSBlbHNlIGlmIChzb3VyY2Uuc3JjKSB7XG4gICAgdmFyIGV4dCA9IGdldEZpbGVFeHRlbnNpb24oc291cmNlLnNyYyk7XG4gICAgcmV0dXJuIEh0bWw1Lm5hdGl2ZVNvdXJjZUhhbmRsZXIuY2FuUGxheVR5cGUoXCJ2aWRlby9cIiArIGV4dCk7XG4gIH1cblxuICByZXR1cm4gJyc7XG59O1xuLyoqXG4gKiBQYXNzIHRoZSBzb3VyY2UgdG8gdGhlIG5hdGl2ZSBtZWRpYSBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7VGVjaH5Tb3VyY2VPYmplY3R9IHNvdXJjZVxuICogICAgICAgIFRoZSBzb3VyY2Ugb2JqZWN0XG4gKlxuICogQHBhcmFtIHtIdG1sNX0gdGVjaFxuICogICAgICAgIFRoZSBpbnN0YW5jZSBvZiB0aGUgSHRtbDUgdGVjaFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqICAgICAgICBUaGUgb3B0aW9ucyB0byBwYXNzIHRvIHRoZSBzb3VyY2VcbiAqL1xuXG5cbkh0bWw1Lm5hdGl2ZVNvdXJjZUhhbmRsZXIuaGFuZGxlU291cmNlID0gZnVuY3Rpb24gKHNvdXJjZSwgdGVjaCwgb3B0aW9ucykge1xuICB0ZWNoLnNldFNyYyhzb3VyY2Uuc3JjKTtcbn07XG4vKipcbiAqIEEgbm9vcCBmb3IgdGhlIG5hdGl2ZSBkaXNwb3NlIGZ1bmN0aW9uLCBhcyBjbGVhbnVwIGlzIG5vdCBuZWVkZWQuXG4gKi9cblxuXG5IdG1sNS5uYXRpdmVTb3VyY2VIYW5kbGVyLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7fTsgLy8gUmVnaXN0ZXIgdGhlIG5hdGl2ZSBzb3VyY2UgaGFuZGxlclxuXG5cbkh0bWw1LnJlZ2lzdGVyU291cmNlSGFuZGxlcihIdG1sNS5uYXRpdmVTb3VyY2VIYW5kbGVyKTtcblRlY2gucmVnaXN0ZXJUZWNoKCdIdG1sNScsIEh0bWw1KTtcblxuZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0JDIoKSB7XG4gIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbExvb3NlKFtcIlxcbiAgICAgICAgVXNpbmcgdGhlIHRlY2ggZGlyZWN0bHkgY2FuIGJlIGRhbmdlcm91cy4gSSBob3BlIHlvdSBrbm93IHdoYXQgeW91J3JlIGRvaW5nLlxcbiAgICAgICAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92aWRlb2pzL3ZpZGVvLmpzL2lzc3Vlcy8yNjE3IGZvciBtb3JlIGluZm8uXFxuICAgICAgXCJdKTtcblxuICBfdGVtcGxhdGVPYmplY3QkMiA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdCgpIHtcbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICByZXR1cm4gZGF0YTtcbn1cbi8vIG9uIHRoZSBwbGF5ZXIgd2hlbiB0aGV5IGhhcHBlblxuXG52YXIgVEVDSF9FVkVOVFNfUkVUUklHR0VSID0gW1xuLyoqXG4gKiBGaXJlZCB3aGlsZSB0aGUgdXNlciBhZ2VudCBpcyBkb3dubG9hZGluZyBtZWRpYSBkYXRhLlxuICpcbiAqIEBldmVudCBQbGF5ZXIjcHJvZ3Jlc3NcbiAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAqL1xuXG4vKipcbiAqIFJldHJpZ2dlciB0aGUgYHByb2dyZXNzYCBldmVudCB0aGF0IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIHtAbGluayBUZWNofS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCBQbGF5ZXIjaGFuZGxlVGVjaFByb2dyZXNzX1xuICogQGZpcmVzIFBsYXllciNwcm9ncmVzc1xuICogQGxpc3RlbnMgVGVjaCNwcm9ncmVzc1xuICovXG4ncHJvZ3Jlc3MnLFxuLyoqXG4gKiBGaXJlcyB3aGVuIHRoZSBsb2FkaW5nIG9mIGFuIGF1ZGlvL3ZpZGVvIGlzIGFib3J0ZWQuXG4gKlxuICogQGV2ZW50IFBsYXllciNhYm9ydFxuICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICovXG5cbi8qKlxuICogUmV0cmlnZ2VyIHRoZSBgYWJvcnRgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIFBsYXllciNoYW5kbGVUZWNoQWJvcnRfXG4gKiBAZmlyZXMgUGxheWVyI2Fib3J0XG4gKiBAbGlzdGVucyBUZWNoI2Fib3J0XG4gKi9cbidhYm9ydCcsXG4vKipcbiAqIEZpcmVzIHdoZW4gdGhlIGJyb3dzZXIgaXMgaW50ZW50aW9uYWxseSBub3QgZ2V0dGluZyBtZWRpYSBkYXRhLlxuICpcbiAqIEBldmVudCBQbGF5ZXIjc3VzcGVuZFxuICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICovXG5cbi8qKlxuICogUmV0cmlnZ2VyIHRoZSBgc3VzcGVuZGAgZXZlbnQgdGhhdCB3YXMgdHJpZ2dlcmVkIGJ5IHRoZSB7QGxpbmsgVGVjaH0uXG4gKlxuICogQHByaXZhdGVcbiAqIEBtZXRob2QgUGxheWVyI2hhbmRsZVRlY2hTdXNwZW5kX1xuICogQGZpcmVzIFBsYXllciNzdXNwZW5kXG4gKiBAbGlzdGVucyBUZWNoI3N1c3BlbmRcbiAqL1xuJ3N1c3BlbmQnLFxuLyoqXG4gKiBGaXJlcyB3aGVuIHRoZSBjdXJyZW50IHBsYXlsaXN0IGlzIGVtcHR5LlxuICpcbiAqIEBldmVudCBQbGF5ZXIjZW1wdGllZFxuICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICovXG5cbi8qKlxuICogUmV0cmlnZ2VyIHRoZSBgZW1wdGllZGAgZXZlbnQgdGhhdCB3YXMgdHJpZ2dlcmVkIGJ5IHRoZSB7QGxpbmsgVGVjaH0uXG4gKlxuICogQHByaXZhdGVcbiAqIEBtZXRob2QgUGxheWVyI2hhbmRsZVRlY2hFbXB0aWVkX1xuICogQGZpcmVzIFBsYXllciNlbXB0aWVkXG4gKiBAbGlzdGVucyBUZWNoI2VtcHRpZWRcbiAqL1xuJ2VtcHRpZWQnLFxuLyoqXG4gKiBGaXJlcyB3aGVuIHRoZSBicm93c2VyIGlzIHRyeWluZyB0byBnZXQgbWVkaWEgZGF0YSwgYnV0IGRhdGEgaXMgbm90IGF2YWlsYWJsZS5cbiAqXG4gKiBAZXZlbnQgUGxheWVyI3N0YWxsZWRcbiAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAqL1xuXG4vKipcbiAqIFJldHJpZ2dlciB0aGUgYHN0YWxsZWRgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIFBsYXllciNoYW5kbGVUZWNoU3RhbGxlZF9cbiAqIEBmaXJlcyBQbGF5ZXIjc3RhbGxlZFxuICogQGxpc3RlbnMgVGVjaCNzdGFsbGVkXG4gKi9cbidzdGFsbGVkJyxcbi8qKlxuICogRmlyZXMgd2hlbiB0aGUgYnJvd3NlciBoYXMgbG9hZGVkIG1ldGEgZGF0YSBmb3IgdGhlIGF1ZGlvL3ZpZGVvLlxuICpcbiAqIEBldmVudCBQbGF5ZXIjbG9hZGVkbWV0YWRhdGFcbiAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAqL1xuXG4vKipcbiAqIFJldHJpZ2dlciB0aGUgYHN0YWxsZWRgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIFBsYXllciNoYW5kbGVUZWNoTG9hZGVkbWV0YWRhdGFfXG4gKiBAZmlyZXMgUGxheWVyI2xvYWRlZG1ldGFkYXRhXG4gKiBAbGlzdGVucyBUZWNoI2xvYWRlZG1ldGFkYXRhXG4gKi9cbidsb2FkZWRtZXRhZGF0YScsXG4vKipcbiAqIEZpcmVzIHdoZW4gdGhlIGJyb3dzZXIgaGFzIGxvYWRlZCB0aGUgY3VycmVudCBmcmFtZSBvZiB0aGUgYXVkaW8vdmlkZW8uXG4gKlxuICogQGV2ZW50IFBsYXllciNsb2FkZWRkYXRhXG4gKiBAdHlwZSB7ZXZlbnR9XG4gKi9cblxuLyoqXG4gKiBSZXRyaWdnZXIgdGhlIGBsb2FkZWRkYXRhYCBldmVudCB0aGF0IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIHtAbGluayBUZWNofS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCBQbGF5ZXIjaGFuZGxlVGVjaExvYWRkZWRkYXRhX1xuICogQGZpcmVzIFBsYXllciNsb2FkZWRkYXRhXG4gKiBAbGlzdGVucyBUZWNoI2xvYWRlZGRhdGFcbiAqL1xuJ2xvYWRlZGRhdGEnLFxuLyoqXG4gKiBGaXJlcyB3aGVuIHRoZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uIGhhcyBjaGFuZ2VkLlxuICpcbiAqIEBldmVudCBQbGF5ZXIjdGltZXVwZGF0ZVxuICogQHR5cGUge2V2ZW50fVxuICovXG5cbi8qKlxuICogUmV0cmlnZ2VyIHRoZSBgdGltZXVwZGF0ZWAgZXZlbnQgdGhhdCB3YXMgdHJpZ2dlcmVkIGJ5IHRoZSB7QGxpbmsgVGVjaH0uXG4gKlxuICogQHByaXZhdGVcbiAqIEBtZXRob2QgUGxheWVyI2hhbmRsZVRlY2hUaW1lVXBkYXRlX1xuICogQGZpcmVzIFBsYXllciN0aW1ldXBkYXRlXG4gKiBAbGlzdGVucyBUZWNoI3RpbWV1cGRhdGVcbiAqL1xuJ3RpbWV1cGRhdGUnLFxuLyoqXG4gKiBGaXJlcyB3aGVuIHRoZSB2aWRlbydzIGludHJpbnNpYyBkaW1lbnNpb25zIGNoYW5nZVxuICpcbiAqIEBldmVudCBQbGF5ZXIjcmVzaXplXG4gKiBAdHlwZSB7ZXZlbnR9XG4gKi9cblxuLyoqXG4gKiBSZXRyaWdnZXIgdGhlIGByZXNpemVgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIFBsYXllciNoYW5kbGVUZWNoUmVzaXplX1xuICogQGZpcmVzIFBsYXllciNyZXNpemVcbiAqIEBsaXN0ZW5zIFRlY2gjcmVzaXplXG4gKi9cbidyZXNpemUnLFxuLyoqXG4gKiBGaXJlcyB3aGVuIHRoZSB2b2x1bWUgaGFzIGJlZW4gY2hhbmdlZFxuICpcbiAqIEBldmVudCBQbGF5ZXIjdm9sdW1lY2hhbmdlXG4gKiBAdHlwZSB7ZXZlbnR9XG4gKi9cblxuLyoqXG4gKiBSZXRyaWdnZXIgdGhlIGB2b2x1bWVjaGFuZ2VgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIFBsYXllciNoYW5kbGVUZWNoVm9sdW1lY2hhbmdlX1xuICogQGZpcmVzIFBsYXllciN2b2x1bWVjaGFuZ2VcbiAqIEBsaXN0ZW5zIFRlY2gjdm9sdW1lY2hhbmdlXG4gKi9cbid2b2x1bWVjaGFuZ2UnLFxuLyoqXG4gKiBGaXJlcyB3aGVuIHRoZSB0ZXh0IHRyYWNrIGhhcyBiZWVuIGNoYW5nZWRcbiAqXG4gKiBAZXZlbnQgUGxheWVyI3RleHR0cmFja2NoYW5nZVxuICogQHR5cGUge2V2ZW50fVxuICovXG5cbi8qKlxuICogUmV0cmlnZ2VyIHRoZSBgdGV4dHRyYWNrY2hhbmdlYCBldmVudCB0aGF0IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIHtAbGluayBUZWNofS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCBQbGF5ZXIjaGFuZGxlVGVjaFRleHR0cmFja2NoYW5nZV9cbiAqIEBmaXJlcyBQbGF5ZXIjdGV4dHRyYWNrY2hhbmdlXG4gKiBAbGlzdGVucyBUZWNoI3RleHR0cmFja2NoYW5nZVxuICovXG4ndGV4dHRyYWNrY2hhbmdlJ107IC8vIGV2ZW50cyB0byBxdWV1ZSB3aGVuIHBsYXliYWNrIHJhdGUgaXMgemVyb1xuLy8gdGhpcyBpcyBhIGhhc2ggZm9yIHRoZSBzb2xlIHB1cnBvc2Ugb2YgbWFwcGluZyBub24tY2FtZWwtY2FzZWQgZXZlbnQgbmFtZXNcbi8vIHRvIGNhbWVsLWNhc2VkIGZ1bmN0aW9uIG5hbWVzXG5cbnZhciBURUNIX0VWRU5UU19RVUVVRSA9IHtcbiAgY2FucGxheTogJ0NhblBsYXknLFxuICBjYW5wbGF5dGhyb3VnaDogJ0NhblBsYXlUaHJvdWdoJyxcbiAgcGxheWluZzogJ1BsYXlpbmcnLFxuICBzZWVrZWQ6ICdTZWVrZWQnXG59O1xudmFyIEJSRUFLUE9JTlRfT1JERVIgPSBbJ3RpbnknLCAneHNtYWxsJywgJ3NtYWxsJywgJ21lZGl1bScsICdsYXJnZScsICd4bGFyZ2UnLCAnaHVnZSddO1xudmFyIEJSRUFLUE9JTlRfQ0xBU1NFUyA9IHt9OyAvLyBncmVwOiB2anMtbGF5b3V0LXRpbnlcbi8vIGdyZXA6IHZqcy1sYXlvdXQteC1zbWFsbFxuLy8gZ3JlcDogdmpzLWxheW91dC1zbWFsbFxuLy8gZ3JlcDogdmpzLWxheW91dC1tZWRpdW1cbi8vIGdyZXA6IHZqcy1sYXlvdXQtbGFyZ2Vcbi8vIGdyZXA6IHZqcy1sYXlvdXQteC1sYXJnZVxuLy8gZ3JlcDogdmpzLWxheW91dC1odWdlXG5cbkJSRUFLUE9JTlRfT1JERVIuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICB2YXIgdiA9IGsuY2hhckF0KDApID09PSAneCcgPyBcIngtXCIgKyBrLnN1YnN0cmluZygxKSA6IGs7XG4gIEJSRUFLUE9JTlRfQ0xBU1NFU1trXSA9IFwidmpzLWxheW91dC1cIiArIHY7XG59KTtcbnZhciBERUZBVUxUX0JSRUFLUE9JTlRTID0ge1xuICB0aW55OiAyMTAsXG4gIHhzbWFsbDogMzIwLFxuICBzbWFsbDogNDI1LFxuICBtZWRpdW06IDc2OCxcbiAgbGFyZ2U6IDE0NDAsXG4gIHhsYXJnZTogMjU2MCxcbiAgaHVnZTogSW5maW5pdHlcbn07XG4vKipcbiAqIEFuIGluc3RhbmNlIG9mIHRoZSBgUGxheWVyYCBjbGFzcyBpcyBjcmVhdGVkIHdoZW4gYW55IG9mIHRoZSBWaWRlby5qcyBzZXR1cCBtZXRob2RzXG4gKiBhcmUgdXNlZCB0byBpbml0aWFsaXplIGEgdmlkZW8uXG4gKlxuICogQWZ0ZXIgYW4gaW5zdGFuY2UgaGFzIGJlZW4gY3JlYXRlZCBpdCBjYW4gYmUgYWNjZXNzZWQgZ2xvYmFsbHkgaW4gdHdvIHdheXM6XG4gKiAxLiBCeSBjYWxsaW5nIGB2aWRlb2pzKCdleGFtcGxlX3ZpZGVvXzEnKTtgXG4gKiAyLiBCeSB1c2luZyBpdCBkaXJlY3RseSB2aWEgIGB2aWRlb2pzLnBsYXllcnMuZXhhbXBsZV92aWRlb18xO2BcbiAqXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuXG52YXIgUGxheWVyID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0c0xvb3NlKFBsYXllciwgX0NvbXBvbmVudCk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhZ1xuICAgKiAgICAgICAgVGhlIG9yaWdpbmFsIHZpZGVvIERPTSBlbGVtZW50IHVzZWQgZm9yIGNvbmZpZ3VyaW5nIG9wdGlvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgIE9iamVjdCBvZiBvcHRpb24gbmFtZXMgYW5kIHZhbHVlcy5cbiAgICpcbiAgICogQHBhcmFtIHtDb21wb25lbnR+UmVhZHlDYWxsYmFja30gW3JlYWR5XVxuICAgKiAgICAgICAgUmVhZHkgY2FsbGJhY2sgZnVuY3Rpb24uXG4gICAqL1xuICBmdW5jdGlvbiBQbGF5ZXIodGFnLCBvcHRpb25zLCByZWFkeSkge1xuICAgIHZhciBfdGhpcztcblxuICAgIC8vIE1ha2Ugc3VyZSB0YWcgSUQgZXhpc3RzXG4gICAgdGFnLmlkID0gdGFnLmlkIHx8IG9wdGlvbnMuaWQgfHwgXCJ2anNfdmlkZW9fXCIgKyBuZXdHVUlEKCk7IC8vIFNldCBPcHRpb25zXG4gICAgLy8gVGhlIG9wdGlvbnMgYXJndW1lbnQgb3ZlcnJpZGVzIG9wdGlvbnMgc2V0IGluIHRoZSB2aWRlbyB0YWdcbiAgICAvLyB3aGljaCBvdmVycmlkZXMgZ2xvYmFsbHkgc2V0IG9wdGlvbnMuXG4gICAgLy8gVGhpcyBsYXR0ZXIgcGFydCBjb2luY2lkZXMgd2l0aCB0aGUgbG9hZCBvcmRlclxuICAgIC8vICh0YWcgbXVzdCBleGlzdCBiZWZvcmUgUGxheWVyKVxuXG4gICAgb3B0aW9ucyA9IGFzc2lnbihQbGF5ZXIuZ2V0VGFnU2V0dGluZ3ModGFnKSwgb3B0aW9ucyk7IC8vIERlbGF5IHRoZSBpbml0aWFsaXphdGlvbiBvZiBjaGlsZHJlbiBiZWNhdXNlIHdlIG5lZWQgdG8gc2V0IHVwXG4gICAgLy8gcGxheWVyIHByb3BlcnRpZXMgZmlyc3QsIGFuZCBjYW4ndCB1c2UgYHRoaXNgIGJlZm9yZSBgc3VwZXIoKWBcblxuICAgIG9wdGlvbnMuaW5pdENoaWxkcmVuID0gZmFsc2U7IC8vIFNhbWUgd2l0aCBjcmVhdGluZyB0aGUgZWxlbWVudFxuXG4gICAgb3B0aW9ucy5jcmVhdGVFbCA9IGZhbHNlOyAvLyBkb24ndCBhdXRvIG1peGluIHRoZSBldmVudGVkIG1peGluXG5cbiAgICBvcHRpb25zLmV2ZW50ZWQgPSBmYWxzZTsgLy8gd2UgZG9uJ3Qgd2FudCB0aGUgcGxheWVyIHRvIHJlcG9ydCB0b3VjaCBhY3Rpdml0eSBvbiBpdHNlbGZcbiAgICAvLyBzZWUgZW5hYmxlVG91Y2hBY3Rpdml0eSBpbiBDb21wb25lbnRcblxuICAgIG9wdGlvbnMucmVwb3J0VG91Y2hBY3Rpdml0eSA9IGZhbHNlOyAvLyBJZiBsYW5ndWFnZSBpcyBub3Qgc2V0LCBnZXQgdGhlIGNsb3Nlc3QgbGFuZyBhdHRyaWJ1dGVcblxuICAgIGlmICghb3B0aW9ucy5sYW5ndWFnZSkge1xuICAgICAgaWYgKHR5cGVvZiB0YWcuY2xvc2VzdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgY2xvc2VzdCA9IHRhZy5jbG9zZXN0KCdbbGFuZ10nKTtcblxuICAgICAgICBpZiAoY2xvc2VzdCAmJiBjbG9zZXN0LmdldEF0dHJpYnV0ZSkge1xuICAgICAgICAgIG9wdGlvbnMubGFuZ3VhZ2UgPSBjbG9zZXN0LmdldEF0dHJpYnV0ZSgnbGFuZycpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZWxlbWVudCA9IHRhZztcblxuICAgICAgICB3aGlsZSAoZWxlbWVudCAmJiBlbGVtZW50Lm5vZGVUeXBlID09PSAxKSB7XG4gICAgICAgICAgaWYgKGdldEF0dHJpYnV0ZXMoZWxlbWVudCkuaGFzT3duUHJvcGVydHkoJ2xhbmcnKSkge1xuICAgICAgICAgICAgb3B0aW9ucy5sYW5ndWFnZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdsYW5nJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBSdW4gYmFzZSBjb21wb25lbnQgaW5pdGlhbGl6aW5nIHdpdGggbmV3IG9wdGlvbnNcblxuXG4gICAgX3RoaXMgPSBfQ29tcG9uZW50LmNhbGwodGhpcywgbnVsbCwgb3B0aW9ucywgcmVhZHkpIHx8IHRoaXM7IC8vIENyZWF0ZSBib3VuZCBtZXRob2RzIGZvciBkb2N1bWVudCBsaXN0ZW5lcnMuXG5cbiAgICBfdGhpcy5ib3VuZERvY3VtZW50RnVsbHNjcmVlbkNoYW5nZV8gPSBiaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBfdGhpcy5kb2N1bWVudEZ1bGxzY3JlZW5DaGFuZ2VfKTtcbiAgICBfdGhpcy5ib3VuZEZ1bGxXaW5kb3dPbkVzY0tleV8gPSBiaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCBfdGhpcy5mdWxsV2luZG93T25Fc2NLZXkpO1xuICAgIF90aGlzLmJvdW5kSGFuZGxlS2V5UHJlc3NfID0gYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgX3RoaXMuaGFuZGxlS2V5UHJlc3MpOyAvLyBjcmVhdGUgbG9nZ2VyXG5cbiAgICBfdGhpcy5sb2cgPSBjcmVhdGVMb2dnZXIkMShfdGhpcy5pZF8pOyAvLyBUcmFja3Mgd2hlbiBhIHRlY2ggY2hhbmdlcyB0aGUgcG9zdGVyXG5cbiAgICBfdGhpcy5pc1Bvc3RlckZyb21UZWNoXyA9IGZhbHNlOyAvLyBIb2xkcyBjYWxsYmFjayBpbmZvIHRoYXQgZ2V0cyBxdWV1ZWQgd2hlbiBwbGF5YmFjayByYXRlIGlzIHplcm9cbiAgICAvLyBhbmQgYSBzZWVrIGlzIGhhcHBlbmluZ1xuXG4gICAgX3RoaXMucXVldWVkQ2FsbGJhY2tzXyA9IFtdOyAvLyBUdXJuIG9mZiBBUEkgYWNjZXNzIGJlY2F1c2Ugd2UncmUgbG9hZGluZyBhIG5ldyB0ZWNoIHRoYXQgbWlnaHQgbG9hZCBhc3luY2hyb25vdXNseVxuXG4gICAgX3RoaXMuaXNSZWFkeV8gPSBmYWxzZTsgLy8gSW5pdCBzdGF0ZSBoYXNTdGFydGVkX1xuXG4gICAgX3RoaXMuaGFzU3RhcnRlZF8gPSBmYWxzZTsgLy8gSW5pdCBzdGF0ZSB1c2VyQWN0aXZlX1xuXG4gICAgX3RoaXMudXNlckFjdGl2ZV8gPSBmYWxzZTsgLy8gaWYgdGhlIGdsb2JhbCBvcHRpb24gb2JqZWN0IHdhcyBhY2NpZGVudGFsbHkgYmxvd24gYXdheSBieVxuICAgIC8vIHNvbWVvbmUsIGJhaWwgZWFybHkgd2l0aCBhbiBpbmZvcm1hdGl2ZSBlcnJvclxuXG4gICAgaWYgKCFfdGhpcy5vcHRpb25zXyB8fCAhX3RoaXMub3B0aW9uc18udGVjaE9yZGVyIHx8ICFfdGhpcy5vcHRpb25zXy50ZWNoT3JkZXIubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHRlY2hPcmRlciBzcGVjaWZpZWQuIERpZCB5b3Ugb3ZlcndyaXRlICcgKyAndmlkZW9qcy5vcHRpb25zIGluc3RlYWQgb2YganVzdCBjaGFuZ2luZyB0aGUgJyArICdwcm9wZXJ0aWVzIHlvdSB3YW50IHRvIG92ZXJyaWRlPycpO1xuICAgIH0gLy8gU3RvcmUgdGhlIG9yaWdpbmFsIHRhZyB1c2VkIHRvIHNldCBvcHRpb25zXG5cblxuICAgIF90aGlzLnRhZyA9IHRhZzsgLy8gU3RvcmUgdGhlIHRhZyBhdHRyaWJ1dGVzIHVzZWQgdG8gcmVzdG9yZSBodG1sNSBlbGVtZW50XG5cbiAgICBfdGhpcy50YWdBdHRyaWJ1dGVzID0gdGFnICYmIGdldEF0dHJpYnV0ZXModGFnKTsgLy8gVXBkYXRlIGN1cnJlbnQgbGFuZ3VhZ2VcblxuICAgIF90aGlzLmxhbmd1YWdlKF90aGlzLm9wdGlvbnNfLmxhbmd1YWdlKTsgLy8gVXBkYXRlIFN1cHBvcnRlZCBMYW5ndWFnZXNcblxuXG4gICAgaWYgKG9wdGlvbnMubGFuZ3VhZ2VzKSB7XG4gICAgICAvLyBOb3JtYWxpc2UgcGxheWVyIG9wdGlvbiBsYW5ndWFnZXMgdG8gbG93ZXJjYXNlXG4gICAgICB2YXIgbGFuZ3VhZ2VzVG9Mb3dlciA9IHt9O1xuICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob3B0aW9ucy5sYW5ndWFnZXMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUkJDEpIHtcbiAgICAgICAgbGFuZ3VhZ2VzVG9Mb3dlcltuYW1lJCQxLnRvTG93ZXJDYXNlKCldID0gb3B0aW9ucy5sYW5ndWFnZXNbbmFtZSQkMV07XG4gICAgICB9KTtcbiAgICAgIF90aGlzLmxhbmd1YWdlc18gPSBsYW5ndWFnZXNUb0xvd2VyO1xuICAgIH0gZWxzZSB7XG4gICAgICBfdGhpcy5sYW5ndWFnZXNfID0gUGxheWVyLnByb3RvdHlwZS5vcHRpb25zXy5sYW5ndWFnZXM7XG4gICAgfVxuXG4gICAgX3RoaXMucmVzZXRDYWNoZV8oKTsgLy8gU2V0IHBvc3RlclxuXG5cbiAgICBfdGhpcy5wb3N0ZXJfID0gb3B0aW9ucy5wb3N0ZXIgfHwgJyc7IC8vIFNldCBjb250cm9sc1xuXG4gICAgX3RoaXMuY29udHJvbHNfID0gISFvcHRpb25zLmNvbnRyb2xzOyAvLyBPcmlnaW5hbCB0YWcgc2V0dGluZ3Mgc3RvcmVkIGluIG9wdGlvbnNcbiAgICAvLyBub3cgcmVtb3ZlIGltbWVkaWF0ZWx5IHNvIG5hdGl2ZSBjb250cm9scyBkb24ndCBmbGFzaC5cbiAgICAvLyBNYXkgYmUgdHVybmVkIGJhY2sgb24gYnkgSFRNTDUgdGVjaCBpZiBuYXRpdmVDb250cm9sc0ZvclRvdWNoIGlzIHRydWVcblxuICAgIHRhZy5jb250cm9scyA9IGZhbHNlO1xuICAgIHRhZy5yZW1vdmVBdHRyaWJ1dGUoJ2NvbnRyb2xzJyk7XG4gICAgX3RoaXMuY2hhbmdpbmdTcmNfID0gZmFsc2U7XG4gICAgX3RoaXMucGxheUNhbGxiYWNrc18gPSBbXTtcbiAgICBfdGhpcy5wbGF5VGVybWluYXRlZFF1ZXVlXyA9IFtdOyAvLyB0aGUgYXR0cmlidXRlIG92ZXJyaWRlcyB0aGUgb3B0aW9uXG5cbiAgICBpZiAodGFnLmhhc0F0dHJpYnV0ZSgnYXV0b3BsYXknKSkge1xuICAgICAgX3RoaXMuYXV0b3BsYXkodHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG90aGVyd2lzZSB1c2UgdGhlIHNldHRlciB0byB2YWxpZGF0ZSBhbmRcbiAgICAgIC8vIHNldCB0aGUgY29ycmVjdCB2YWx1ZS5cbiAgICAgIF90aGlzLmF1dG9wbGF5KF90aGlzLm9wdGlvbnNfLmF1dG9wbGF5KTtcbiAgICB9IC8vIGNoZWNrIHBsdWdpbnNcblxuXG4gICAgaWYgKG9wdGlvbnMucGx1Z2lucykge1xuICAgICAgT2JqZWN0LmtleXMob3B0aW9ucy5wbHVnaW5zKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lJCQxKSB7XG4gICAgICAgIGlmICh0eXBlb2YgX3RoaXNbbmFtZSQkMV0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJwbHVnaW4gXFxcIlwiICsgbmFtZSQkMSArIFwiXFxcIiBkb2VzIG5vdCBleGlzdFwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIC8qXG4gICAgICogU3RvcmUgdGhlIGludGVybmFsIHN0YXRlIG9mIHNjcnViYmluZ1xuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIHRoZSB1c2VyIGlzIHNjcnViYmluZ1xuICAgICAqL1xuXG5cbiAgICBfdGhpcy5zY3J1YmJpbmdfID0gZmFsc2U7XG4gICAgX3RoaXMuZWxfID0gX3RoaXMuY3JlYXRlRWwoKTsgLy8gTWFrZSB0aGlzIGFuIGV2ZW50ZWQgb2JqZWN0IGFuZCB1c2UgYGVsX2AgYXMgaXRzIGV2ZW50IGJ1cy5cblxuICAgIGV2ZW50ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIHtcbiAgICAgIGV2ZW50QnVzS2V5OiAnZWxfJ1xuICAgIH0pO1xuXG4gICAgaWYgKF90aGlzLmZsdWlkXykge1xuICAgICAgX3RoaXMub24oJ3BsYXllcnJlc2V0JywgX3RoaXMudXBkYXRlU3R5bGVFbF8pO1xuICAgIH0gLy8gV2UgYWxzbyB3YW50IHRvIHBhc3MgdGhlIG9yaWdpbmFsIHBsYXllciBvcHRpb25zIHRvIGVhY2ggY29tcG9uZW50IGFuZCBwbHVnaW5cbiAgICAvLyBhcyB3ZWxsIHNvIHRoZXkgZG9uJ3QgbmVlZCB0byByZWFjaCBiYWNrIGludG8gdGhlIHBsYXllciBmb3Igb3B0aW9ucyBsYXRlci5cbiAgICAvLyBXZSBhbHNvIG5lZWQgdG8gZG8gYW5vdGhlciBjb3B5IG9mIHRoaXMub3B0aW9uc18gc28gd2UgZG9uJ3QgZW5kIHVwIHdpdGhcbiAgICAvLyBhbiBpbmZpbml0ZSBsb29wLlxuXG5cbiAgICB2YXIgcGxheWVyT3B0aW9uc0NvcHkgPSBtZXJnZU9wdGlvbnMoX3RoaXMub3B0aW9uc18pOyAvLyBMb2FkIHBsdWdpbnNcblxuICAgIGlmIChvcHRpb25zLnBsdWdpbnMpIHtcbiAgICAgIE9iamVjdC5rZXlzKG9wdGlvbnMucGx1Z2lucykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSQkMSkge1xuICAgICAgICBfdGhpc1tuYW1lJCQxXShvcHRpb25zLnBsdWdpbnNbbmFtZSQkMV0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgX3RoaXMub3B0aW9uc18ucGxheWVyT3B0aW9ucyA9IHBsYXllck9wdGlvbnNDb3B5O1xuICAgIF90aGlzLm1pZGRsZXdhcmVfID0gW107XG5cbiAgICBfdGhpcy5pbml0Q2hpbGRyZW4oKTsgLy8gU2V0IGlzQXVkaW8gYmFzZWQgb24gd2hldGhlciBvciBub3QgYW4gYXVkaW8gdGFnIHdhcyB1c2VkXG5cblxuICAgIF90aGlzLmlzQXVkaW8odGFnLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhdWRpbycpOyAvLyBVcGRhdGUgY29udHJvbHMgY2xhc3NOYW1lLiBDYW4ndCBkbyB0aGlzIHdoZW4gdGhlIGNvbnRyb2xzIGFyZSBpbml0aWFsbHlcbiAgICAvLyBzZXQgYmVjYXVzZSB0aGUgZWxlbWVudCBkb2Vzbid0IGV4aXN0IHlldC5cblxuXG4gICAgaWYgKF90aGlzLmNvbnRyb2xzKCkpIHtcbiAgICAgIF90aGlzLmFkZENsYXNzKCd2anMtY29udHJvbHMtZW5hYmxlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfdGhpcy5hZGRDbGFzcygndmpzLWNvbnRyb2xzLWRpc2FibGVkJyk7XG4gICAgfSAvLyBTZXQgQVJJQSBsYWJlbCBhbmQgcmVnaW9uIHJvbGUgZGVwZW5kaW5nIG9uIHBsYXllciB0eXBlXG5cblxuICAgIF90aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAncmVnaW9uJyk7XG5cbiAgICBpZiAoX3RoaXMuaXNBdWRpbygpKSB7XG4gICAgICBfdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgX3RoaXMubG9jYWxpemUoJ0F1ZGlvIFBsYXllcicpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgX3RoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIF90aGlzLmxvY2FsaXplKCdWaWRlbyBQbGF5ZXInKSk7XG4gICAgfVxuXG4gICAgaWYgKF90aGlzLmlzQXVkaW8oKSkge1xuICAgICAgX3RoaXMuYWRkQ2xhc3MoJ3Zqcy1hdWRpbycpO1xuICAgIH1cblxuICAgIGlmIChfdGhpcy5mbGV4Tm90U3VwcG9ydGVkXygpKSB7XG4gICAgICBfdGhpcy5hZGRDbGFzcygndmpzLW5vLWZsZXgnKTtcbiAgICB9IC8vIFRPRE86IE1ha2UgdGhpcyBzbWFydGVyLiBUb2dnbGUgdXNlciBzdGF0ZSBiZXR3ZWVuIHRvdWNoaW5nL21vdXNpbmdcbiAgICAvLyB1c2luZyBldmVudHMsIHNpbmNlIGRldmljZXMgY2FuIGhhdmUgYm90aCB0b3VjaCBhbmQgbW91c2UgZXZlbnRzLlxuICAgIC8vIFRPRE86IE1ha2UgdGhpcyBjaGVjayBiZSBwZXJmb3JtZWQgYWdhaW4gd2hlbiB0aGUgd2luZG93IHN3aXRjaGVzIGJldHdlZW4gbW9uaXRvcnNcbiAgICAvLyAoU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92aWRlb2pzL3ZpZGVvLmpzL2lzc3Vlcy81NjgzKVxuXG5cbiAgICBpZiAoVE9VQ0hfRU5BQkxFRCkge1xuICAgICAgX3RoaXMuYWRkQ2xhc3MoJ3Zqcy10b3VjaC1lbmFibGVkJyk7XG4gICAgfSAvLyBpT1MgU2FmYXJpIGhhcyBicm9rZW4gaG92ZXIgaGFuZGxpbmdcblxuXG4gICAgaWYgKCFJU19JT1MpIHtcbiAgICAgIF90aGlzLmFkZENsYXNzKCd2anMtd29ya2luZ2hvdmVyJyk7XG4gICAgfSAvLyBNYWtlIHBsYXllciBlYXNpbHkgZmluZGFibGUgYnkgSURcblxuXG4gICAgUGxheWVyLnBsYXllcnNbX3RoaXMuaWRfXSA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOyAvLyBBZGQgYSBtYWpvciB2ZXJzaW9uIGNsYXNzIHRvIGFpZCBjc3MgaW4gcGx1Z2luc1xuXG4gICAgdmFyIG1ham9yVmVyc2lvbiA9IHZlcnNpb24uc3BsaXQoJy4nKVswXTtcblxuICAgIF90aGlzLmFkZENsYXNzKFwidmpzLXZcIiArIG1ham9yVmVyc2lvbik7IC8vIFdoZW4gdGhlIHBsYXllciBpcyBmaXJzdCBpbml0aWFsaXplZCwgdHJpZ2dlciBhY3Rpdml0eSBzbyBjb21wb25lbnRzXG4gICAgLy8gbGlrZSB0aGUgY29udHJvbCBiYXIgc2hvdyB0aGVtc2VsdmVzIGlmIG5lZWRlZFxuXG5cbiAgICBfdGhpcy51c2VyQWN0aXZlKHRydWUpO1xuXG4gICAgX3RoaXMucmVwb3J0VXNlckFjdGl2aXR5KCk7XG5cbiAgICBfdGhpcy5vbmUoJ3BsYXknLCBfdGhpcy5saXN0ZW5Gb3JVc2VyQWN0aXZpdHlfKTtcblxuICAgIF90aGlzLm9uKCdmb2N1cycsIF90aGlzLmhhbmRsZUZvY3VzKTtcblxuICAgIF90aGlzLm9uKCdibHVyJywgX3RoaXMuaGFuZGxlQmx1cik7XG5cbiAgICBfdGhpcy5vbignc3RhZ2VjbGljaycsIF90aGlzLmhhbmRsZVN0YWdlQ2xpY2tfKTtcblxuICAgIF90aGlzLmJyZWFrcG9pbnRzKF90aGlzLm9wdGlvbnNfLmJyZWFrcG9pbnRzKTtcblxuICAgIF90aGlzLnJlc3BvbnNpdmUoX3RoaXMub3B0aW9uc18ucmVzcG9uc2l2ZSk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXG4gICAqIERlc3Ryb3lzIHRoZSB2aWRlbyBwbGF5ZXIgYW5kIGRvZXMgYW55IG5lY2Vzc2FyeSBjbGVhbnVwLlxuICAgKlxuICAgKiBUaGlzIGlzIGVzcGVjaWFsbHkgaGVscGZ1bCBpZiB5b3UgYXJlIGR5bmFtaWNhbGx5IGFkZGluZyBhbmQgcmVtb3ZpbmcgdmlkZW9zXG4gICAqIHRvL2Zyb20gdGhlIERPTS5cbiAgICpcbiAgICogQGZpcmVzIFBsYXllciNkaXNwb3NlXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IFBsYXllci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gdGhlIHBsYXllciBpcyBiZWluZyBkaXNwb3NlZCBvZi5cbiAgICAgKlxuICAgICAqIEBldmVudCBQbGF5ZXIjZGlzcG9zZVxuICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgKi9cbiAgICB0aGlzLnRyaWdnZXIoJ2Rpc3Bvc2UnKTsgLy8gcHJldmVudCBkaXNwb3NlIGZyb20gYmVpbmcgY2FsbGVkIHR3aWNlXG5cbiAgICB0aGlzLm9mZignZGlzcG9zZScpOyAvLyBNYWtlIHN1cmUgYWxsIHBsYXllci1zcGVjaWZpYyBkb2N1bWVudCBsaXN0ZW5lcnMgYXJlIHVuYm91bmQuIFRoaXMgaXNcblxuICAgIG9mZihkb2N1bWVudCwgRnVsbHNjcmVlbkFwaS5mdWxsc2NyZWVuY2hhbmdlLCB0aGlzLmJvdW5kRG9jdW1lbnRGdWxsc2NyZWVuQ2hhbmdlXyk7XG4gICAgb2ZmKGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuYm91bmRGdWxsV2luZG93T25Fc2NLZXlfKTtcbiAgICBvZmYoZG9jdW1lbnQsICdrZXlkb3duJywgdGhpcy5ib3VuZEhhbmRsZUtleVByZXNzXyk7XG5cbiAgICBpZiAodGhpcy5zdHlsZUVsXyAmJiB0aGlzLnN0eWxlRWxfLnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMuc3R5bGVFbF8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnN0eWxlRWxfKTtcbiAgICAgIHRoaXMuc3R5bGVFbF8gPSBudWxsO1xuICAgIH0gLy8gS2lsbCByZWZlcmVuY2UgdG8gdGhpcyBwbGF5ZXJcblxuXG4gICAgUGxheWVyLnBsYXllcnNbdGhpcy5pZF9dID0gbnVsbDtcblxuICAgIGlmICh0aGlzLnRhZyAmJiB0aGlzLnRhZy5wbGF5ZXIpIHtcbiAgICAgIHRoaXMudGFnLnBsYXllciA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZWxfICYmIHRoaXMuZWxfLnBsYXllcikge1xuICAgICAgdGhpcy5lbF8ucGxheWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy50ZWNoXykge1xuICAgICAgdGhpcy50ZWNoXy5kaXNwb3NlKCk7XG4gICAgICB0aGlzLmlzUG9zdGVyRnJvbVRlY2hfID0gZmFsc2U7XG4gICAgICB0aGlzLnBvc3Rlcl8gPSAnJztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wbGF5ZXJFbEluZ2VzdF8pIHtcbiAgICAgIHRoaXMucGxheWVyRWxJbmdlc3RfID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy50YWcpIHtcbiAgICAgIHRoaXMudGFnID0gbnVsbDtcbiAgICB9XG5cbiAgICBjbGVhckNhY2hlRm9yUGxheWVyKHRoaXMpOyAvLyByZW1vdmUgYWxsIGV2ZW50IGhhbmRsZXJzIGZvciB0cmFjayBsaXN0c1xuICAgIC8vIGFsbCB0cmFja3MgYW5kIHRyYWNrIGxpc3RlbmVycyBhcmUgcmVtb3ZlZCBvblxuICAgIC8vIHRlY2ggZGlzcG9zZVxuXG4gICAgQUxMLm5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUkJDEpIHtcbiAgICAgIHZhciBwcm9wcyA9IEFMTFtuYW1lJCQxXTtcblxuICAgICAgdmFyIGxpc3QgPSBfdGhpczJbcHJvcHMuZ2V0dGVyTmFtZV0oKTsgLy8gaWYgaXQgaXMgbm90IGEgbmF0aXZlIGxpc3RcbiAgICAgIC8vIHdlIGhhdmUgdG8gbWFudWFsbHkgcmVtb3ZlIGV2ZW50IGxpc3RlbmVyc1xuXG5cbiAgICAgIGlmIChsaXN0ICYmIGxpc3Qub2ZmKSB7XG4gICAgICAgIGxpc3Qub2ZmKCk7XG4gICAgICB9XG4gICAgfSk7IC8vIHRoZSBhY3R1YWwgLmVsXyBpcyByZW1vdmVkIGhlcmVcblxuICAgIF9Db21wb25lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBgUGxheWVyYCdzIERPTSBlbGVtZW50LlxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKiAgICAgICAgIFRoZSBET00gZWxlbWVudCB0aGF0IGdldHMgY3JlYXRlZC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3JlYXRlRWwgPSBmdW5jdGlvbiBjcmVhdGVFbCQkMSgpIHtcbiAgICB2YXIgdGFnID0gdGhpcy50YWc7XG4gICAgdmFyIGVsO1xuICAgIHZhciBwbGF5ZXJFbEluZ2VzdCA9IHRoaXMucGxheWVyRWxJbmdlc3RfID0gdGFnLnBhcmVudE5vZGUgJiYgdGFnLnBhcmVudE5vZGUuaGFzQXR0cmlidXRlICYmIHRhZy5wYXJlbnROb2RlLmhhc0F0dHJpYnV0ZSgnZGF0YS12anMtcGxheWVyJyk7XG4gICAgdmFyIGRpdkVtYmVkID0gdGhpcy50YWcudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndmlkZW8tanMnO1xuXG4gICAgaWYgKHBsYXllckVsSW5nZXN0KSB7XG4gICAgICBlbCA9IHRoaXMuZWxfID0gdGFnLnBhcmVudE5vZGU7XG4gICAgfSBlbHNlIGlmICghZGl2RW1iZWQpIHtcbiAgICAgIGVsID0gdGhpcy5lbF8gPSBfQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnKTtcbiAgICB9IC8vIENvcHkgb3ZlciBhbGwgdGhlIGF0dHJpYnV0ZXMgZnJvbSB0aGUgdGFnLCBpbmNsdWRpbmcgSUQgYW5kIGNsYXNzXG4gICAgLy8gSUQgd2lsbCBub3cgcmVmZXJlbmNlIHBsYXllciBib3gsIG5vdCB0aGUgdmlkZW8gdGFnXG5cblxuICAgIHZhciBhdHRycyA9IGdldEF0dHJpYnV0ZXModGFnKTtcblxuICAgIGlmIChkaXZFbWJlZCkge1xuICAgICAgZWwgPSB0aGlzLmVsXyA9IHRhZztcbiAgICAgIHRhZyA9IHRoaXMudGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcblxuICAgICAgd2hpbGUgKGVsLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICB0YWcuYXBwZW5kQ2hpbGQoZWwuZmlyc3RDaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghaGFzQ2xhc3MoZWwsICd2aWRlby1qcycpKSB7XG4gICAgICAgIGFkZENsYXNzKGVsLCAndmlkZW8tanMnKTtcbiAgICAgIH1cblxuICAgICAgZWwuYXBwZW5kQ2hpbGQodGFnKTtcbiAgICAgIHBsYXllckVsSW5nZXN0ID0gdGhpcy5wbGF5ZXJFbEluZ2VzdF8gPSBlbDsgLy8gbW92ZSBwcm9wZXJ0aWVzIG92ZXIgZnJvbSBvdXIgY3VzdG9tIGB2aWRlby1qc2AgZWxlbWVudFxuICAgICAgLy8gdG8gb3VyIG5ldyBgdmlkZW9gIGVsZW1lbnQuIFRoaXMgd2lsbCBtb3ZlIHRoaW5ncyBsaWtlXG4gICAgICAvLyBgc3JjYCBvciBgY29udHJvbHNgIHRoYXQgd2VyZSBzZXQgdmlhIGpzIGJlZm9yZSB0aGUgcGxheWVyXG4gICAgICAvLyB3YXMgaW5pdGlhbGl6ZWQuXG5cbiAgICAgIE9iamVjdC5rZXlzKGVsKS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIHRhZ1trXSA9IGVsW2tdO1xuICAgICAgfSk7XG4gICAgfSAvLyBzZXQgdGFiaW5kZXggdG8gLTEgdG8gcmVtb3ZlIHRoZSB2aWRlbyBlbGVtZW50IGZyb20gdGhlIGZvY3VzIG9yZGVyXG5cblxuICAgIHRhZy5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgYXR0cnMudGFiaW5kZXggPSAnLTEnOyAvLyBXb3JrYXJvdW5kIGZvciAjNDU4MyAoSkFXUytJRSBkb2Vzbid0IGFubm91bmNlIEJQQiBvciBwbGF5IGJ1dHRvbilcbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0ZyZWVkb21TY2llbnRpZmljL1ZGTy1zdGFuZGFyZHMtc3VwcG9ydC9pc3N1ZXMvNzhcbiAgICAvLyBOb3RlIHRoYXQgd2UgY2FuJ3QgZGV0ZWN0IGlmIEpBV1MgaXMgYmVpbmcgdXNlZCwgYnV0IHRoaXMgQVJJQSBhdHRyaWJ1dGVcbiAgICAvLyAgZG9lc24ndCBjaGFuZ2UgYmVoYXZpb3Igb2YgSUUxMSBpZiBKQVdTIGlzIG5vdCBiZWluZyB1c2VkXG5cbiAgICBpZiAoSUVfVkVSU0lPTikge1xuICAgICAgdGFnLnNldEF0dHJpYnV0ZSgncm9sZScsICdhcHBsaWNhdGlvbicpO1xuICAgICAgYXR0cnMucm9sZSA9ICdhcHBsaWNhdGlvbic7XG4gICAgfSAvLyBSZW1vdmUgd2lkdGgvaGVpZ2h0IGF0dHJzIGZyb20gdGFnIHNvIENTUyBjYW4gbWFrZSBpdCAxMDAlIHdpZHRoL2hlaWdodFxuXG5cbiAgICB0YWcucmVtb3ZlQXR0cmlidXRlKCd3aWR0aCcpO1xuICAgIHRhZy5yZW1vdmVBdHRyaWJ1dGUoJ2hlaWdodCcpO1xuXG4gICAgaWYgKCd3aWR0aCcgaW4gYXR0cnMpIHtcbiAgICAgIGRlbGV0ZSBhdHRycy53aWR0aDtcbiAgICB9XG5cbiAgICBpZiAoJ2hlaWdodCcgaW4gYXR0cnMpIHtcbiAgICAgIGRlbGV0ZSBhdHRycy5oZWlnaHQ7XG4gICAgfVxuXG4gICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgIC8vIGRvbid0IGNvcHkgb3ZlciB0aGUgY2xhc3MgYXR0cmlidXRlIHRvIHRoZSBwbGF5ZXIgZWxlbWVudCB3aGVuIHdlJ3JlIGluIGEgZGl2IGVtYmVkXG4gICAgICAvLyB0aGUgY2xhc3MgaXMgYWxyZWFkeSBzZXQgdXAgcHJvcGVybHkgaW4gdGhlIGRpdkVtYmVkIGNhc2VcbiAgICAgIC8vIGFuZCB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBgdmlkZW8tanNgIGNsYXNzIGRvZXNuJ3QgZ2V0IGxvc3RcbiAgICAgIGlmICghKGRpdkVtYmVkICYmIGF0dHIgPT09ICdjbGFzcycpKSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyc1thdHRyXSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkaXZFbWJlZCkge1xuICAgICAgICB0YWcuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJzW2F0dHJdKTtcbiAgICAgIH1cbiAgICB9KTsgLy8gVXBkYXRlIHRhZyBpZC9jbGFzcyBmb3IgdXNlIGFzIEhUTUw1IHBsYXliYWNrIHRlY2hcbiAgICAvLyBNaWdodCB0aGluayB3ZSBzaG91bGQgZG8gdGhpcyBhZnRlciBlbWJlZGRpbmcgaW4gY29udGFpbmVyIHNvIC52anMtdGVjaCBjbGFzc1xuICAgIC8vIGRvZXNuJ3QgZmxhc2ggMTAwJSB3aWR0aC9oZWlnaHQsIGJ1dCBjbGFzcyBvbmx5IGFwcGxpZXMgd2l0aCAudmlkZW8tanMgcGFyZW50XG5cbiAgICB0YWcucGxheWVySWQgPSB0YWcuaWQ7XG4gICAgdGFnLmlkICs9ICdfaHRtbDVfYXBpJztcbiAgICB0YWcuY2xhc3NOYW1lID0gJ3Zqcy10ZWNoJzsgLy8gTWFrZSBwbGF5ZXIgZmluZGFibGUgb24gZWxlbWVudHNcblxuICAgIHRhZy5wbGF5ZXIgPSBlbC5wbGF5ZXIgPSB0aGlzOyAvLyBEZWZhdWx0IHN0YXRlIG9mIHZpZGVvIGlzIHBhdXNlZFxuXG4gICAgdGhpcy5hZGRDbGFzcygndmpzLXBhdXNlZCcpOyAvLyBBZGQgYSBzdHlsZSBlbGVtZW50IGluIHRoZSBwbGF5ZXIgdGhhdCB3ZSdsbCB1c2UgdG8gc2V0IHRoZSB3aWR0aC9oZWlnaHRcbiAgICAvLyBvZiB0aGUgcGxheWVyIGluIGEgd2F5IHRoYXQncyBzdGlsbCBvdmVycmlkZWFibGUgYnkgQ1NTLCBqdXN0IGxpa2UgdGhlXG4gICAgLy8gdmlkZW8gZWxlbWVudFxuXG4gICAgaWYgKHdpbmRvdyQxLlZJREVPSlNfTk9fRFlOQU1JQ19TVFlMRSAhPT0gdHJ1ZSkge1xuICAgICAgdGhpcy5zdHlsZUVsXyA9IGNyZWF0ZVN0eWxlRWxlbWVudCgndmpzLXN0eWxlcy1kaW1lbnNpb25zJyk7XG4gICAgICB2YXIgZGVmYXVsdHNTdHlsZUVsID0gJCgnLnZqcy1zdHlsZXMtZGVmYXVsdHMnKTtcbiAgICAgIHZhciBoZWFkID0gJCgnaGVhZCcpO1xuICAgICAgaGVhZC5pbnNlcnRCZWZvcmUodGhpcy5zdHlsZUVsXywgZGVmYXVsdHNTdHlsZUVsID8gZGVmYXVsdHNTdHlsZUVsLm5leHRTaWJsaW5nIDogaGVhZC5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICB0aGlzLmZpbGxfID0gZmFsc2U7XG4gICAgdGhpcy5mbHVpZF8gPSBmYWxzZTsgLy8gUGFzcyBpbiB0aGUgd2lkdGgvaGVpZ2h0L2FzcGVjdFJhdGlvIG9wdGlvbnMgd2hpY2ggd2lsbCB1cGRhdGUgdGhlIHN0eWxlIGVsXG5cbiAgICB0aGlzLndpZHRoKHRoaXMub3B0aW9uc18ud2lkdGgpO1xuICAgIHRoaXMuaGVpZ2h0KHRoaXMub3B0aW9uc18uaGVpZ2h0KTtcbiAgICB0aGlzLmZpbGwodGhpcy5vcHRpb25zXy5maWxsKTtcbiAgICB0aGlzLmZsdWlkKHRoaXMub3B0aW9uc18uZmx1aWQpO1xuICAgIHRoaXMuYXNwZWN0UmF0aW8odGhpcy5vcHRpb25zXy5hc3BlY3RSYXRpbyk7IC8vIEhpZGUgYW55IGxpbmtzIHdpdGhpbiB0aGUgdmlkZW8vYXVkaW8gdGFnLFxuICAgIC8vIGJlY2F1c2UgSUUgZG9lc24ndCBoaWRlIHRoZW0gY29tcGxldGVseSBmcm9tIHNjcmVlbiByZWFkZXJzLlxuXG4gICAgdmFyIGxpbmtzID0gdGFnLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhJyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbGlua0VsID0gbGlua3MuaXRlbShpKTtcbiAgICAgIGFkZENsYXNzKGxpbmtFbCwgJ3Zqcy1oaWRkZW4nKTtcbiAgICAgIGxpbmtFbC5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICdoaWRkZW4nKTtcbiAgICB9IC8vIGluc2VydEVsRmlyc3Qgc2VlbXMgdG8gY2F1c2UgdGhlIG5ldHdvcmtTdGF0ZSB0byBmbGlja2VyIGZyb20gMyB0byAyLCBzb1xuICAgIC8vIGtlZXAgdHJhY2sgb2YgdGhlIG9yaWdpbmFsIGZvciBsYXRlciBzbyB3ZSBjYW4ga25vdyBpZiB0aGUgc291cmNlIG9yaWdpbmFsbHkgZmFpbGVkXG5cblxuICAgIHRhZy5pbml0TmV0d29ya1N0YXRlXyA9IHRhZy5uZXR3b3JrU3RhdGU7IC8vIFdyYXAgdmlkZW8gdGFnIGluIGRpdiAoZWwvYm94KSBjb250YWluZXJcblxuICAgIGlmICh0YWcucGFyZW50Tm9kZSAmJiAhcGxheWVyRWxJbmdlc3QpIHtcbiAgICAgIHRhZy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbCwgdGFnKTtcbiAgICB9IC8vIGluc2VydCB0aGUgdGFnIGFzIHRoZSBmaXJzdCBjaGlsZCBvZiB0aGUgcGxheWVyIGVsZW1lbnRcbiAgICAvLyB0aGVuIG1hbnVhbGx5IGFkZCBpdCB0byB0aGUgY2hpbGRyZW4gYXJyYXkgc28gdGhhdCB0aGlzLmFkZENoaWxkXG4gICAgLy8gd2lsbCB3b3JrIHByb3Blcmx5IGZvciBvdGhlciBjb21wb25lbnRzXG4gICAgLy9cbiAgICAvLyBCcmVha3MgaVBob25lLCBmaXhlZCBpbiBIVE1MNSBzZXR1cC5cblxuXG4gICAgcHJlcGVuZFRvKHRhZywgZWwpO1xuICAgIHRoaXMuY2hpbGRyZW5fLnVuc2hpZnQodGFnKTsgLy8gU2V0IGxhbmcgYXR0ciBvbiBwbGF5ZXIgdG8gZW5zdXJlIENTUyA6bGFuZygpIGluIGNvbnNpc3RlbnQgd2l0aCBwbGF5ZXJcbiAgICAvLyBpZiBpdCdzIGJlZW4gc2V0IHRvIHNvbWV0aGluZyBkaWZmZXJlbnQgdG8gdGhlIGRvY1xuXG4gICAgdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdsYW5nJywgdGhpcy5sYW5ndWFnZV8pO1xuICAgIHRoaXMuZWxfID0gZWw7XG4gICAgcmV0dXJuIGVsO1xuICB9XG4gIC8qKlxuICAgKiBBIGdldHRlci9zZXR0ZXIgZm9yIHRoZSBgUGxheWVyYCdzIHdpZHRoLiBSZXR1cm5zIHRoZSBwbGF5ZXIncyBjb25maWd1cmVkIHZhbHVlLlxuICAgKiBUbyBnZXQgdGhlIGN1cnJlbnQgd2lkdGggdXNlIGBjdXJyZW50V2lkdGgoKWAuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbdmFsdWVdXG4gICAqICAgICAgICBUaGUgdmFsdWUgdG8gc2V0IHRoZSBgUGxheWVyYCdzIHdpZHRoIHRvLlxuICAgKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqICAgICAgICAgVGhlIGN1cnJlbnQgd2lkdGggb2YgdGhlIGBQbGF5ZXJgIHdoZW4gZ2V0dGluZy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ud2lkdGggPSBmdW5jdGlvbiB3aWR0aCh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbignd2lkdGgnLCB2YWx1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIEEgZ2V0dGVyL3NldHRlciBmb3IgdGhlIGBQbGF5ZXJgJ3MgaGVpZ2h0LiBSZXR1cm5zIHRoZSBwbGF5ZXIncyBjb25maWd1cmVkIHZhbHVlLlxuICAgKiBUbyBnZXQgdGhlIGN1cnJlbnQgaGVpZ2h0IHVzZSBgY3VycmVudGhlaWdodCgpYC5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IFt2YWx1ZV1cbiAgICogICAgICAgIFRoZSB2YWx1ZSB0byBzZXQgdGhlIGBQbGF5ZXJgJ3MgaGVpZ3RoIHRvLlxuICAgKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqICAgICAgICAgVGhlIGN1cnJlbnQgaGVpZ2h0IG9mIHRoZSBgUGxheWVyYCB3aGVuIGdldHRpbmcuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhlaWdodCA9IGZ1bmN0aW9uIGhlaWdodCh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbignaGVpZ2h0JywgdmFsdWUpO1xuICB9XG4gIC8qKlxuICAgKiBBIGdldHRlci9zZXR0ZXIgZm9yIHRoZSBgUGxheWVyYCdzIHdpZHRoICYgaGVpZ2h0LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGltZW5zaW9uXG4gICAqICAgICAgICBUaGlzIHN0cmluZyBjYW4gYmU6XG4gICAqICAgICAgICAtICd3aWR0aCdcbiAgICogICAgICAgIC0gJ2hlaWdodCdcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IFt2YWx1ZV1cbiAgICogICAgICAgIFZhbHVlIGZvciBkaW1lbnNpb24gc3BlY2lmaWVkIGluIHRoZSBmaXJzdCBhcmd1bWVudC5cbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIFRoZSBkaW1lbnNpb24gYXJndW1lbnRzIHZhbHVlIHdoZW4gZ2V0dGluZyAod2lkdGgvaGVpZ2h0KS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGltZW5zaW9uID0gZnVuY3Rpb24gZGltZW5zaW9uKF9kaW1lbnNpb24sIHZhbHVlKSB7XG4gICAgdmFyIHByaXZEaW1lbnNpb24gPSBfZGltZW5zaW9uICsgJ18nO1xuXG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzW3ByaXZEaW1lbnNpb25dIHx8IDA7XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgLy8gSWYgYW4gZW1wdHkgc3RyaW5nIGlzIGdpdmVuLCByZXNldCB0aGUgZGltZW5zaW9uIHRvIGJlIGF1dG9tYXRpY1xuICAgICAgdGhpc1twcml2RGltZW5zaW9uXSA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMudXBkYXRlU3R5bGVFbF8oKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcGFyc2VkVmFsID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG5cbiAgICBpZiAoaXNOYU4ocGFyc2VkVmFsKSkge1xuICAgICAgbG9nLmVycm9yKFwiSW1wcm9wZXIgdmFsdWUgXFxcIlwiICsgdmFsdWUgKyBcIlxcXCIgc3VwcGxpZWQgZm9yIGZvciBcIiArIF9kaW1lbnNpb24pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXNbcHJpdkRpbWVuc2lvbl0gPSBwYXJzZWRWYWw7XG4gICAgdGhpcy51cGRhdGVTdHlsZUVsXygpO1xuICB9XG4gIC8qKlxuICAgKiBBIGdldHRlci9zZXR0ZXIvdG9nZ2xlciBmb3IgdGhlIHZqcy1mbHVpZCBgY2xhc3NOYW1lYCBvbiB0aGUgYFBsYXllcmAuXG4gICAqXG4gICAqIFR1cm5pbmcgdGhpcyBvbiB3aWxsIHR1cm4gb2ZmIGZpbGwgbW9kZS5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbYm9vbF1cbiAgICogICAgICAgIC0gQSB2YWx1ZSBvZiB0cnVlIGFkZHMgdGhlIGNsYXNzLlxuICAgKiAgICAgICAgLSBBIHZhbHVlIG9mIGZhbHNlIHJlbW92ZXMgdGhlIGNsYXNzLlxuICAgKiAgICAgICAgLSBObyB2YWx1ZSB3aWxsIGJlIGEgZ2V0dGVyLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufHVuZGVmaW5lZH1cbiAgICogICAgICAgICAtIFRoZSB2YWx1ZSBvZiBmbHVpZCB3aGVuIGdldHRpbmcuXG4gICAqICAgICAgICAgLSBgdW5kZWZpbmVkYCB3aGVuIHNldHRpbmcuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmZsdWlkID0gZnVuY3Rpb24gZmx1aWQoYm9vbCkge1xuICAgIGlmIChib29sID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuZmx1aWRfO1xuICAgIH1cblxuICAgIHRoaXMuZmx1aWRfID0gISFib29sO1xuXG4gICAgaWYgKGlzRXZlbnRlZCh0aGlzKSkge1xuICAgICAgdGhpcy5vZmYoJ3BsYXllcnJlc2V0JywgdGhpcy51cGRhdGVTdHlsZUVsXyk7XG4gICAgfVxuXG4gICAgaWYgKGJvb2wpIHtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1mbHVpZCcpO1xuICAgICAgdGhpcy5maWxsKGZhbHNlKTtcbiAgICAgIGFkZEV2ZW50ZWRDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub24oJ3BsYXllcnJlc2V0JywgdGhpcy51cGRhdGVTdHlsZUVsXyk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWZsdWlkJyk7XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVTdHlsZUVsXygpO1xuICB9XG4gIC8qKlxuICAgKiBBIGdldHRlci9zZXR0ZXIvdG9nZ2xlciBmb3IgdGhlIHZqcy1maWxsIGBjbGFzc05hbWVgIG9uIHRoZSBgUGxheWVyYC5cbiAgICpcbiAgICogVHVybmluZyB0aGlzIG9uIHdpbGwgdHVybiBvZmYgZmx1aWQgbW9kZS5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbYm9vbF1cbiAgICogICAgICAgIC0gQSB2YWx1ZSBvZiB0cnVlIGFkZHMgdGhlIGNsYXNzLlxuICAgKiAgICAgICAgLSBBIHZhbHVlIG9mIGZhbHNlIHJlbW92ZXMgdGhlIGNsYXNzLlxuICAgKiAgICAgICAgLSBObyB2YWx1ZSB3aWxsIGJlIGEgZ2V0dGVyLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufHVuZGVmaW5lZH1cbiAgICogICAgICAgICAtIFRoZSB2YWx1ZSBvZiBmbHVpZCB3aGVuIGdldHRpbmcuXG4gICAqICAgICAgICAgLSBgdW5kZWZpbmVkYCB3aGVuIHNldHRpbmcuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmZpbGwgPSBmdW5jdGlvbiBmaWxsKGJvb2wpIHtcbiAgICBpZiAoYm9vbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gISF0aGlzLmZpbGxfO1xuICAgIH1cblxuICAgIHRoaXMuZmlsbF8gPSAhIWJvb2w7XG5cbiAgICBpZiAoYm9vbCkge1xuICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWZpbGwnKTtcbiAgICAgIHRoaXMuZmx1aWQoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtZmlsbCcpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0L1NldCB0aGUgYXNwZWN0IHJhdGlvXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbcmF0aW9dXG4gICAqICAgICAgICBBc3BlY3QgcmF0aW8gZm9yIHBsYXllclxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfVxuICAgKiAgICAgICAgIHJldHVybnMgdGhlIGN1cnJlbnQgYXNwZWN0IHJhdGlvIHdoZW4gZ2V0dGluZ1xuICAgKi9cblxuICAvKipcbiAgICogQSBnZXR0ZXIvc2V0dGVyIGZvciB0aGUgYFBsYXllcmAncyBhc3BlY3QgcmF0aW8uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbcmF0aW9dXG4gICAqICAgICAgICBUaGUgdmFsdWUgdG8gc2V0IHRoZSBgUGxheWVyJ3MgYXNwZWN0IHJhdGlvIHRvLlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfVxuICAgKiAgICAgICAgIC0gVGhlIGN1cnJlbnQgYXNwZWN0IHJhdGlvIG9mIHRoZSBgUGxheWVyYCB3aGVuIGdldHRpbmcuXG4gICAqICAgICAgICAgLSB1bmRlZmluZWQgd2hlbiBzZXR0aW5nXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmFzcGVjdFJhdGlvID0gZnVuY3Rpb24gYXNwZWN0UmF0aW8ocmF0aW8pIHtcbiAgICBpZiAocmF0aW8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXNwZWN0UmF0aW9fO1xuICAgIH0gLy8gQ2hlY2sgZm9yIHdpZHRoOmhlaWdodCBmb3JtYXRcblxuXG4gICAgaWYgKCEvXlxcZCtcXDpcXGQrJC8udGVzdChyYXRpbykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW1wcm9wZXIgdmFsdWUgc3VwcGxpZWQgZm9yIGFzcGVjdCByYXRpby4gVGhlIGZvcm1hdCBzaG91bGQgYmUgd2lkdGg6aGVpZ2h0LCBmb3IgZXhhbXBsZSAxNjo5LicpO1xuICAgIH1cblxuICAgIHRoaXMuYXNwZWN0UmF0aW9fID0gcmF0aW87IC8vIFdlJ3JlIGFzc3VtaW5nIGlmIHlvdSBzZXQgYW4gYXNwZWN0IHJhdGlvIHlvdSB3YW50IGZsdWlkIG1vZGUsXG4gICAgLy8gYmVjYXVzZSBpbiBmaXhlZCBtb2RlIHlvdSBjb3VsZCBjYWxjdWxhdGUgd2lkdGggYW5kIGhlaWdodCB5b3Vyc2VsZi5cblxuICAgIHRoaXMuZmx1aWQodHJ1ZSk7XG4gICAgdGhpcy51cGRhdGVTdHlsZUVsXygpO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgc3R5bGVzIG9mIHRoZSBgUGxheWVyYCBlbGVtZW50IChoZWlnaHQsIHdpZHRoIGFuZCBhc3BlY3QgcmF0aW8pLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbGlzdGVucyBUZWNoI2xvYWRlZG1ldGFkYXRhXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVwZGF0ZVN0eWxlRWxfID0gZnVuY3Rpb24gdXBkYXRlU3R5bGVFbF8oKSB7XG4gICAgaWYgKHdpbmRvdyQxLlZJREVPSlNfTk9fRFlOQU1JQ19TVFlMRSA9PT0gdHJ1ZSkge1xuICAgICAgdmFyIF93aWR0aCA9IHR5cGVvZiB0aGlzLndpZHRoXyA9PT0gJ251bWJlcicgPyB0aGlzLndpZHRoXyA6IHRoaXMub3B0aW9uc18ud2lkdGg7XG5cbiAgICAgIHZhciBfaGVpZ2h0ID0gdHlwZW9mIHRoaXMuaGVpZ2h0XyA9PT0gJ251bWJlcicgPyB0aGlzLmhlaWdodF8gOiB0aGlzLm9wdGlvbnNfLmhlaWdodDtcblxuICAgICAgdmFyIHRlY2hFbCA9IHRoaXMudGVjaF8gJiYgdGhpcy50ZWNoXy5lbCgpO1xuXG4gICAgICBpZiAodGVjaEVsKSB7XG4gICAgICAgIGlmIChfd2lkdGggPj0gMCkge1xuICAgICAgICAgIHRlY2hFbC53aWR0aCA9IF93aWR0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfaGVpZ2h0ID49IDApIHtcbiAgICAgICAgICB0ZWNoRWwuaGVpZ2h0ID0gX2hlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHdpZHRoO1xuICAgIHZhciBoZWlnaHQ7XG4gICAgdmFyIGFzcGVjdFJhdGlvO1xuICAgIHZhciBpZENsYXNzOyAvLyBUaGUgYXNwZWN0IHJhdGlvIGlzIGVpdGhlciB1c2VkIGRpcmVjdGx5IG9yIHRvIGNhbGN1bGF0ZSB3aWR0aCBhbmQgaGVpZ2h0LlxuXG4gICAgaWYgKHRoaXMuYXNwZWN0UmF0aW9fICE9PSB1bmRlZmluZWQgJiYgdGhpcy5hc3BlY3RSYXRpb18gIT09ICdhdXRvJykge1xuICAgICAgLy8gVXNlIGFueSBhc3BlY3RSYXRpbyB0aGF0J3MgYmVlbiBzcGVjaWZpY2FsbHkgc2V0XG4gICAgICBhc3BlY3RSYXRpbyA9IHRoaXMuYXNwZWN0UmF0aW9fO1xuICAgIH0gZWxzZSBpZiAodGhpcy52aWRlb1dpZHRoKCkgPiAwKSB7XG4gICAgICAvLyBPdGhlcndpc2UgdHJ5IHRvIGdldCB0aGUgYXNwZWN0IHJhdGlvIGZyb20gdGhlIHZpZGVvIG1ldGFkYXRhXG4gICAgICBhc3BlY3RSYXRpbyA9IHRoaXMudmlkZW9XaWR0aCgpICsgJzonICsgdGhpcy52aWRlb0hlaWdodCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPciB1c2UgYSBkZWZhdWx0LiBUaGUgdmlkZW8gZWxlbWVudCdzIGlzIDI6MSwgYnV0IDE2OjkgaXMgbW9yZSBjb21tb24uXG4gICAgICBhc3BlY3RSYXRpbyA9ICcxNjo5JztcbiAgICB9IC8vIEdldCB0aGUgcmF0aW8gYXMgYSBkZWNpbWFsIHdlIGNhbiB1c2UgdG8gY2FsY3VsYXRlIGRpbWVuc2lvbnNcblxuXG4gICAgdmFyIHJhdGlvUGFydHMgPSBhc3BlY3RSYXRpby5zcGxpdCgnOicpO1xuICAgIHZhciByYXRpb011bHRpcGxpZXIgPSByYXRpb1BhcnRzWzFdIC8gcmF0aW9QYXJ0c1swXTtcblxuICAgIGlmICh0aGlzLndpZHRoXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBVc2UgYW55IHdpZHRoIHRoYXQncyBiZWVuIHNwZWNpZmljYWxseSBzZXRcbiAgICAgIHdpZHRoID0gdGhpcy53aWR0aF87XG4gICAgfSBlbHNlIGlmICh0aGlzLmhlaWdodF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gT3IgY2FsdWxhdGUgdGhlIHdpZHRoIGZyb20gdGhlIGFzcGVjdCByYXRpbyBpZiBhIGhlaWdodCBoYXMgYmVlbiBzZXRcbiAgICAgIHdpZHRoID0gdGhpcy5oZWlnaHRfIC8gcmF0aW9NdWx0aXBsaWVyO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPciB1c2UgdGhlIHZpZGVvJ3MgbWV0YWRhdGEsIG9yIHVzZSB0aGUgdmlkZW8gZWwncyBkZWZhdWx0IG9mIDMwMFxuICAgICAgd2lkdGggPSB0aGlzLnZpZGVvV2lkdGgoKSB8fCAzMDA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGVpZ2h0XyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBVc2UgYW55IGhlaWdodCB0aGF0J3MgYmVlbiBzcGVjaWZpY2FsbHkgc2V0XG4gICAgICBoZWlnaHQgPSB0aGlzLmhlaWdodF87XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE90aGVyd2lzZSBjYWxjdWxhdGUgdGhlIGhlaWdodCBmcm9tIHRoZSByYXRpbyBhbmQgdGhlIHdpZHRoXG4gICAgICBoZWlnaHQgPSB3aWR0aCAqIHJhdGlvTXVsdGlwbGllcjtcbiAgICB9IC8vIEVuc3VyZSB0aGUgQ1NTIGNsYXNzIGlzIHZhbGlkIGJ5IHN0YXJ0aW5nIHdpdGggYW4gYWxwaGEgY2hhcmFjdGVyXG5cblxuICAgIGlmICgvXlteYS16QS1aXS8udGVzdCh0aGlzLmlkKCkpKSB7XG4gICAgICBpZENsYXNzID0gJ2RpbWVuc2lvbnMtJyArIHRoaXMuaWQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWRDbGFzcyA9IHRoaXMuaWQoKSArICctZGltZW5zaW9ucyc7XG4gICAgfSAvLyBFbnN1cmUgdGhlIHJpZ2h0IGNsYXNzIGlzIHN0aWxsIG9uIHRoZSBwbGF5ZXIgZm9yIHRoZSBzdHlsZSBlbGVtZW50XG5cblxuICAgIHRoaXMuYWRkQ2xhc3MoaWRDbGFzcyk7XG4gICAgc2V0VGV4dENvbnRlbnQodGhpcy5zdHlsZUVsXywgXCJcXG4gICAgICAuXCIgKyBpZENsYXNzICsgXCIge1xcbiAgICAgICAgd2lkdGg6IFwiICsgd2lkdGggKyBcInB4O1xcbiAgICAgICAgaGVpZ2h0OiBcIiArIGhlaWdodCArIFwicHg7XFxuICAgICAgfVxcblxcbiAgICAgIC5cIiArIGlkQ2xhc3MgKyBcIi52anMtZmx1aWQge1xcbiAgICAgICAgcGFkZGluZy10b3A6IFwiICsgcmF0aW9NdWx0aXBsaWVyICogMTAwICsgXCIlO1xcbiAgICAgIH1cXG4gICAgXCIpO1xuICB9XG4gIC8qKlxuICAgKiBMb2FkL0NyZWF0ZSBhbiBpbnN0YW5jZSBvZiBwbGF5YmFjayB7QGxpbmsgVGVjaH0gaW5jbHVkaW5nIGVsZW1lbnRcbiAgICogYW5kIEFQSSBtZXRob2RzLiBUaGVuIGFwcGVuZCB0aGUgYFRlY2hgIGVsZW1lbnQgaW4gYFBsYXllcmAgYXMgYSBjaGlsZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRlY2hOYW1lXG4gICAqICAgICAgICBuYW1lIG9mIHRoZSBwbGF5YmFjayB0ZWNobm9sb2d5XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2VcbiAgICogICAgICAgIHZpZGVvIHNvdXJjZVxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5sb2FkVGVjaF8gPSBmdW5jdGlvbiBsb2FkVGVjaF8odGVjaE5hbWUsIHNvdXJjZSkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgLy8gUGF1c2UgYW5kIHJlbW92ZSBjdXJyZW50IHBsYXliYWNrIHRlY2hub2xvZ3lcbiAgICBpZiAodGhpcy50ZWNoXykge1xuICAgICAgdGhpcy51bmxvYWRUZWNoXygpO1xuICAgIH1cblxuICAgIHZhciB0aXRsZVRlY2hOYW1lID0gdG9UaXRsZUNhc2UodGVjaE5hbWUpO1xuICAgIHZhciBjYW1lbFRlY2hOYW1lID0gdGVjaE5hbWUuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyB0ZWNoTmFtZS5zbGljZSgxKTsgLy8gZ2V0IHJpZCBvZiB0aGUgSFRNTDUgdmlkZW8gdGFnIGFzIHNvb24gYXMgd2UgYXJlIHVzaW5nIGFub3RoZXIgdGVjaFxuXG4gICAgaWYgKHRpdGxlVGVjaE5hbWUgIT09ICdIdG1sNScgJiYgdGhpcy50YWcpIHtcbiAgICAgIFRlY2guZ2V0VGVjaCgnSHRtbDUnKS5kaXNwb3NlTWVkaWFFbGVtZW50KHRoaXMudGFnKTtcbiAgICAgIHRoaXMudGFnLnBsYXllciA9IG51bGw7XG4gICAgICB0aGlzLnRhZyA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy50ZWNoTmFtZV8gPSB0aXRsZVRlY2hOYW1lOyAvLyBUdXJuIG9mZiBBUEkgYWNjZXNzIGJlY2F1c2Ugd2UncmUgbG9hZGluZyBhIG5ldyB0ZWNoIHRoYXQgbWlnaHQgbG9hZCBhc3luY2hyb25vdXNseVxuXG4gICAgdGhpcy5pc1JlYWR5XyA9IGZhbHNlOyAvLyBpZiBhdXRvcGxheSBpcyBhIHN0cmluZyB3ZSBwYXNzIGZhbHNlIHRvIHRoZSB0ZWNoXG4gICAgLy8gYmVjYXVzZSB0aGUgcGxheWVyIGlzIGdvaW5nIHRvIGhhbmRsZSBhdXRvcGxheSBvbiBgbG9hZHN0YXJ0YFxuXG4gICAgdmFyIGF1dG9wbGF5ID0gdHlwZW9mIHRoaXMuYXV0b3BsYXkoKSA9PT0gJ3N0cmluZycgPyBmYWxzZSA6IHRoaXMuYXV0b3BsYXkoKTsgLy8gR3JhYiB0ZWNoLXNwZWNpZmljIG9wdGlvbnMgZnJvbSBwbGF5ZXIgb3B0aW9ucyBhbmQgYWRkIHNvdXJjZSBhbmQgcGFyZW50IGVsZW1lbnQgdG8gdXNlLlxuXG4gICAgdmFyIHRlY2hPcHRpb25zID0ge1xuICAgICAgc291cmNlOiBzb3VyY2UsXG4gICAgICBhdXRvcGxheTogYXV0b3BsYXksXG4gICAgICAnbmF0aXZlQ29udHJvbHNGb3JUb3VjaCc6IHRoaXMub3B0aW9uc18ubmF0aXZlQ29udHJvbHNGb3JUb3VjaCxcbiAgICAgICdwbGF5ZXJJZCc6IHRoaXMuaWQoKSxcbiAgICAgICd0ZWNoSWQnOiB0aGlzLmlkKCkgKyBcIl9cIiArIGNhbWVsVGVjaE5hbWUgKyBcIl9hcGlcIixcbiAgICAgICdwbGF5c2lubGluZSc6IHRoaXMub3B0aW9uc18ucGxheXNpbmxpbmUsXG4gICAgICAncHJlbG9hZCc6IHRoaXMub3B0aW9uc18ucHJlbG9hZCxcbiAgICAgICdsb29wJzogdGhpcy5vcHRpb25zXy5sb29wLFxuICAgICAgJ211dGVkJzogdGhpcy5vcHRpb25zXy5tdXRlZCxcbiAgICAgICdwb3N0ZXInOiB0aGlzLnBvc3RlcigpLFxuICAgICAgJ2xhbmd1YWdlJzogdGhpcy5sYW5ndWFnZSgpLFxuICAgICAgJ3BsYXllckVsSW5nZXN0JzogdGhpcy5wbGF5ZXJFbEluZ2VzdF8gfHwgZmFsc2UsXG4gICAgICAndnR0LmpzJzogdGhpcy5vcHRpb25zX1sndnR0LmpzJ10sXG4gICAgICAnY2FuT3ZlcnJpZGVQb3N0ZXInOiAhIXRoaXMub3B0aW9uc18udGVjaENhbk92ZXJyaWRlUG9zdGVyLFxuICAgICAgJ2VuYWJsZVNvdXJjZXNldCc6IHRoaXMub3B0aW9uc18uZW5hYmxlU291cmNlc2V0XG4gICAgfTtcbiAgICBBTEwubmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSQkMSkge1xuICAgICAgdmFyIHByb3BzID0gQUxMW25hbWUkJDFdO1xuICAgICAgdGVjaE9wdGlvbnNbcHJvcHMuZ2V0dGVyTmFtZV0gPSBfdGhpczNbcHJvcHMucHJpdmF0ZU5hbWVdO1xuICAgIH0pO1xuICAgIGFzc2lnbih0ZWNoT3B0aW9ucywgdGhpcy5vcHRpb25zX1t0aXRsZVRlY2hOYW1lXSk7XG4gICAgYXNzaWduKHRlY2hPcHRpb25zLCB0aGlzLm9wdGlvbnNfW2NhbWVsVGVjaE5hbWVdKTtcbiAgICBhc3NpZ24odGVjaE9wdGlvbnMsIHRoaXMub3B0aW9uc19bdGVjaE5hbWUudG9Mb3dlckNhc2UoKV0pO1xuXG4gICAgaWYgKHRoaXMudGFnKSB7XG4gICAgICB0ZWNoT3B0aW9ucy50YWcgPSB0aGlzLnRhZztcbiAgICB9XG5cbiAgICBpZiAoc291cmNlICYmIHNvdXJjZS5zcmMgPT09IHRoaXMuY2FjaGVfLnNyYyAmJiB0aGlzLmNhY2hlXy5jdXJyZW50VGltZSA+IDApIHtcbiAgICAgIHRlY2hPcHRpb25zLnN0YXJ0VGltZSA9IHRoaXMuY2FjaGVfLmN1cnJlbnRUaW1lO1xuICAgIH0gLy8gSW5pdGlhbGl6ZSB0ZWNoIGluc3RhbmNlXG5cblxuICAgIHZhciBUZWNoQ2xhc3MgPSBUZWNoLmdldFRlY2godGVjaE5hbWUpO1xuXG4gICAgaWYgKCFUZWNoQ2xhc3MpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIFRlY2ggbmFtZWQgJ1wiICsgdGl0bGVUZWNoTmFtZSArIFwiJyBleGlzdHMhICdcIiArIHRpdGxlVGVjaE5hbWUgKyBcIicgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgdXNpbmcgdmlkZW9qcy5yZWdpc3RlclRlY2goKSdcIik7XG4gICAgfVxuXG4gICAgdGhpcy50ZWNoXyA9IG5ldyBUZWNoQ2xhc3ModGVjaE9wdGlvbnMpOyAvLyBwbGF5ZXIudHJpZ2dlclJlYWR5IGlzIGFsd2F5cyBhc3luYywgc28gZG9uJ3QgbmVlZCB0aGlzIHRvIGJlIGFzeW5jXG5cbiAgICB0aGlzLnRlY2hfLnJlYWR5KGJpbmQodGhpcywgdGhpcy5oYW5kbGVUZWNoUmVhZHlfKSwgdHJ1ZSk7XG4gICAgdGV4dFRyYWNrQ29udmVydGVyLmpzb25Ub1RleHRUcmFja3ModGhpcy50ZXh0VHJhY2tzSnNvbl8gfHwgW10sIHRoaXMudGVjaF8pOyAvLyBMaXN0ZW4gdG8gYWxsIEhUTUw1LWRlZmluZWQgZXZlbnRzIGFuZCB0cmlnZ2VyIHRoZW0gb24gdGhlIHBsYXllclxuXG4gICAgVEVDSF9FVkVOVFNfUkVUUklHR0VSLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBfdGhpczMub24oX3RoaXMzLnRlY2hfLCBldmVudCwgX3RoaXMzW1wiaGFuZGxlVGVjaFwiICsgdG9UaXRsZUNhc2UoZXZlbnQpICsgXCJfXCJdKTtcbiAgICB9KTtcbiAgICBPYmplY3Qua2V5cyhURUNIX0VWRU5UU19RVUVVRSkuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIF90aGlzMy5vbihfdGhpczMudGVjaF8sIGV2ZW50LCBmdW5jdGlvbiAoZXZlbnRPYmopIHtcbiAgICAgICAgaWYgKF90aGlzMy50ZWNoXy5wbGF5YmFja1JhdGUoKSA9PT0gMCAmJiBfdGhpczMudGVjaF8uc2Vla2luZygpKSB7XG4gICAgICAgICAgX3RoaXMzLnF1ZXVlZENhbGxiYWNrc18ucHVzaCh7XG4gICAgICAgICAgICBjYWxsYmFjazogX3RoaXMzW1wiaGFuZGxlVGVjaFwiICsgVEVDSF9FVkVOVFNfUVVFVUVbZXZlbnRdICsgXCJfXCJdLmJpbmQoX3RoaXMzKSxcbiAgICAgICAgICAgIGV2ZW50OiBldmVudE9ialxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMzW1wiaGFuZGxlVGVjaFwiICsgVEVDSF9FVkVOVFNfUVVFVUVbZXZlbnRdICsgXCJfXCJdKGV2ZW50T2JqKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMub24odGhpcy50ZWNoXywgJ2xvYWRzdGFydCcsIHRoaXMuaGFuZGxlVGVjaExvYWRTdGFydF8pO1xuICAgIHRoaXMub24odGhpcy50ZWNoXywgJ3NvdXJjZXNldCcsIHRoaXMuaGFuZGxlVGVjaFNvdXJjZXNldF8pO1xuICAgIHRoaXMub24odGhpcy50ZWNoXywgJ3dhaXRpbmcnLCB0aGlzLmhhbmRsZVRlY2hXYWl0aW5nXyk7XG4gICAgdGhpcy5vbih0aGlzLnRlY2hfLCAnZW5kZWQnLCB0aGlzLmhhbmRsZVRlY2hFbmRlZF8pO1xuICAgIHRoaXMub24odGhpcy50ZWNoXywgJ3NlZWtpbmcnLCB0aGlzLmhhbmRsZVRlY2hTZWVraW5nXyk7XG4gICAgdGhpcy5vbih0aGlzLnRlY2hfLCAncGxheScsIHRoaXMuaGFuZGxlVGVjaFBsYXlfKTtcbiAgICB0aGlzLm9uKHRoaXMudGVjaF8sICdmaXJzdHBsYXknLCB0aGlzLmhhbmRsZVRlY2hGaXJzdFBsYXlfKTtcbiAgICB0aGlzLm9uKHRoaXMudGVjaF8sICdwYXVzZScsIHRoaXMuaGFuZGxlVGVjaFBhdXNlXyk7XG4gICAgdGhpcy5vbih0aGlzLnRlY2hfLCAnZHVyYXRpb25jaGFuZ2UnLCB0aGlzLmhhbmRsZVRlY2hEdXJhdGlvbkNoYW5nZV8pO1xuICAgIHRoaXMub24odGhpcy50ZWNoXywgJ2Z1bGxzY3JlZW5jaGFuZ2UnLCB0aGlzLmhhbmRsZVRlY2hGdWxsc2NyZWVuQ2hhbmdlXyk7XG4gICAgdGhpcy5vbih0aGlzLnRlY2hfLCAnZXJyb3InLCB0aGlzLmhhbmRsZVRlY2hFcnJvcl8pO1xuICAgIHRoaXMub24odGhpcy50ZWNoXywgJ2xvYWRlZG1ldGFkYXRhJywgdGhpcy51cGRhdGVTdHlsZUVsXyk7XG4gICAgdGhpcy5vbih0aGlzLnRlY2hfLCAncG9zdGVyY2hhbmdlJywgdGhpcy5oYW5kbGVUZWNoUG9zdGVyQ2hhbmdlXyk7XG4gICAgdGhpcy5vbih0aGlzLnRlY2hfLCAndGV4dGRhdGEnLCB0aGlzLmhhbmRsZVRlY2hUZXh0RGF0YV8pO1xuICAgIHRoaXMub24odGhpcy50ZWNoXywgJ3JhdGVjaGFuZ2UnLCB0aGlzLmhhbmRsZVRlY2hSYXRlQ2hhbmdlXyk7XG4gICAgdGhpcy51c2luZ05hdGl2ZUNvbnRyb2xzKHRoaXMudGVjaEdldF8oJ2NvbnRyb2xzJykpO1xuXG4gICAgaWYgKHRoaXMuY29udHJvbHMoKSAmJiAhdGhpcy51c2luZ05hdGl2ZUNvbnRyb2xzKCkpIHtcbiAgICAgIHRoaXMuYWRkVGVjaENvbnRyb2xzTGlzdGVuZXJzXygpO1xuICAgIH0gLy8gQWRkIHRoZSB0ZWNoIGVsZW1lbnQgaW4gdGhlIERPTSBpZiBpdCB3YXMgbm90IGFscmVhZHkgdGhlcmVcbiAgICAvLyBNYWtlIHN1cmUgdG8gbm90IGluc2VydCB0aGUgb3JpZ2luYWwgdmlkZW8gZWxlbWVudCBpZiB1c2luZyBIdG1sNVxuXG5cbiAgICBpZiAodGhpcy50ZWNoXy5lbCgpLnBhcmVudE5vZGUgIT09IHRoaXMuZWwoKSAmJiAodGl0bGVUZWNoTmFtZSAhPT0gJ0h0bWw1JyB8fCAhdGhpcy50YWcpKSB7XG4gICAgICBwcmVwZW5kVG8odGhpcy50ZWNoXy5lbCgpLCB0aGlzLmVsKCkpO1xuICAgIH0gLy8gR2V0IHJpZCBvZiB0aGUgb3JpZ2luYWwgdmlkZW8gdGFnIHJlZmVyZW5jZSBhZnRlciB0aGUgZmlyc3QgdGVjaCBpcyBsb2FkZWRcblxuXG4gICAgaWYgKHRoaXMudGFnKSB7XG4gICAgICB0aGlzLnRhZy5wbGF5ZXIgPSBudWxsO1xuICAgICAgdGhpcy50YWcgPSBudWxsO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVW5sb2FkIGFuZCBkaXNwb3NlIG9mIHRoZSBjdXJyZW50IHBsYXliYWNrIHtAbGluayBUZWNofS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8udW5sb2FkVGVjaF8gPSBmdW5jdGlvbiB1bmxvYWRUZWNoXygpIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIC8vIFNhdmUgdGhlIGN1cnJlbnQgdGV4dCB0cmFja3Mgc28gdGhhdCB3ZSBjYW4gcmV1c2UgdGhlIHNhbWUgdGV4dCB0cmFja3Mgd2l0aCB0aGUgbmV4dCB0ZWNoXG4gICAgQUxMLm5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUkJDEpIHtcbiAgICAgIHZhciBwcm9wcyA9IEFMTFtuYW1lJCQxXTtcbiAgICAgIF90aGlzNFtwcm9wcy5wcml2YXRlTmFtZV0gPSBfdGhpczRbcHJvcHMuZ2V0dGVyTmFtZV0oKTtcbiAgICB9KTtcbiAgICB0aGlzLnRleHRUcmFja3NKc29uXyA9IHRleHRUcmFja0NvbnZlcnRlci50ZXh0VHJhY2tzVG9Kc29uKHRoaXMudGVjaF8pO1xuICAgIHRoaXMuaXNSZWFkeV8gPSBmYWxzZTtcbiAgICB0aGlzLnRlY2hfLmRpc3Bvc2UoKTtcbiAgICB0aGlzLnRlY2hfID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5pc1Bvc3RlckZyb21UZWNoXykge1xuICAgICAgdGhpcy5wb3N0ZXJfID0gJyc7XG4gICAgICB0aGlzLnRyaWdnZXIoJ3Bvc3RlcmNoYW5nZScpO1xuICAgIH1cblxuICAgIHRoaXMuaXNQb3N0ZXJGcm9tVGVjaF8gPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGEgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHtAbGluayBUZWNofS5cbiAgICogSXQgd2lsbCBwcmludCBhIHdhcm5pbmcgYnkgZGVmYXVsdCBhYm91dCB0aGUgZGFuZ2VyIG9mIHVzaW5nIHRoZSB0ZWNoIGRpcmVjdGx5XG4gICAqIGJ1dCBhbnkgYXJndW1lbnQgdGhhdCBpcyBwYXNzZWQgaW4gd2lsbCBzaWxlbmNlIHRoZSB3YXJuaW5nLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IFtzYWZldHldXG4gICAqICAgICAgICBBbnl0aGluZyBwYXNzZWQgaW4gdG8gc2lsZW5jZSB0aGUgd2FybmluZ1xuICAgKlxuICAgKiBAcmV0dXJuIHtUZWNofVxuICAgKiAgICAgICAgIFRoZSBUZWNoXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRlY2ggPSBmdW5jdGlvbiB0ZWNoKHNhZmV0eSkge1xuICAgIGlmIChzYWZldHkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgbG9nLndhcm4odHNtbChfdGVtcGxhdGVPYmplY3QkMigpKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMudGVjaF87XG4gIH1cbiAgLyoqXG4gICAqIFNldCB1cCBjbGljayBhbmQgdG91Y2ggbGlzdGVuZXJzIGZvciB0aGUgcGxheWJhY2sgZWxlbWVudFxuICAgKlxuICAgKiAtIE9uIGRlc2t0b3BzOiBhIGNsaWNrIG9uIHRoZSB2aWRlbyBpdHNlbGYgd2lsbCB0b2dnbGUgcGxheWJhY2tcbiAgICogLSBPbiBtb2JpbGUgZGV2aWNlczogYSBjbGljayBvbiB0aGUgdmlkZW8gdG9nZ2xlcyBjb250cm9sc1xuICAgKiAgIHdoaWNoIGlzIGRvbmUgYnkgdG9nZ2xpbmcgdGhlIHVzZXIgc3RhdGUgYmV0d2VlbiBhY3RpdmUgYW5kXG4gICAqICAgaW5hY3RpdmVcbiAgICogLSBBIHRhcCBjYW4gc2lnbmFsIHRoYXQgYSB1c2VyIGhhcyBiZWNvbWUgYWN0aXZlIG9yIGhhcyBiZWNvbWUgaW5hY3RpdmVcbiAgICogICBlLmcuIGEgcXVpY2sgdGFwIG9uIGFuIGlQaG9uZSBtb3ZpZSBzaG91bGQgcmV2ZWFsIHRoZSBjb250cm9scy4gQW5vdGhlclxuICAgKiAgIHF1aWNrIHRhcCBzaG91bGQgaGlkZSB0aGVtIGFnYWluIChzaWduYWxpbmcgdGhlIHVzZXIgaXMgaW4gYW4gaW5hY3RpdmVcbiAgICogICB2aWV3aW5nIHN0YXRlKVxuICAgKiAtIEluIGFkZGl0aW9uIHRvIHRoaXMsIHdlIHN0aWxsIHdhbnQgdGhlIHVzZXIgdG8gYmUgY29uc2lkZXJlZCBpbmFjdGl2ZSBhZnRlclxuICAgKiAgIGEgZmV3IHNlY29uZHMgb2YgaW5hY3Rpdml0eS5cbiAgICpcbiAgICogPiBOb3RlOiB0aGUgb25seSBwYXJ0IG9mIGlPUyBpbnRlcmFjdGlvbiB3ZSBjYW4ndCBtaW1pYyB3aXRoIHRoaXMgc2V0dXBcbiAgICogaXMgYSB0b3VjaCBhbmQgaG9sZCBvbiB0aGUgdmlkZW8gZWxlbWVudCBjb3VudGluZyBhcyBhY3Rpdml0eSBpbiBvcmRlciB0b1xuICAgKiBrZWVwIHRoZSBjb250cm9scyBzaG93aW5nLCBidXQgdGhhdCBzaG91bGRuJ3QgYmUgYW4gaXNzdWUuIEEgdG91Y2ggYW5kIGhvbGRcbiAgICogb24gYW55IGNvbnRyb2xzIHdpbGwgc3RpbGwga2VlcCB0aGUgdXNlciBhY3RpdmVcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uYWRkVGVjaENvbnRyb2xzTGlzdGVuZXJzXyA9IGZ1bmN0aW9uIGFkZFRlY2hDb250cm9sc0xpc3RlbmVyc18oKSB7XG4gICAgLy8gTWFrZSBzdXJlIHRvIHJlbW92ZSBhbGwgdGhlIHByZXZpb3VzIGxpc3RlbmVycyBpbiBjYXNlIHdlIGFyZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMuXG4gICAgdGhpcy5yZW1vdmVUZWNoQ29udHJvbHNMaXN0ZW5lcnNfKCk7IC8vIFNvbWUgYnJvd3NlcnMgKENocm9tZSAmIElFKSBkb24ndCB0cmlnZ2VyIGEgY2xpY2sgb24gYSBmbGFzaCBzd2YsIGJ1dCBkb1xuICAgIC8vIHRyaWdnZXIgbW91c2Vkb3duL3VwLlxuICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTQ0NDU2Mi9qYXZhc2NyaXB0LW9uY2xpY2stZXZlbnQtb3Zlci1mbGFzaC1vYmplY3RcbiAgICAvLyBBbnkgdG91Y2ggZXZlbnRzIGFyZSBzZXQgdG8gYmxvY2sgdGhlIG1vdXNlZG93biBldmVudCBmcm9tIGhhcHBlbmluZ1xuXG4gICAgdGhpcy5vbih0aGlzLnRlY2hfLCAnbW91c2Vkb3duJywgdGhpcy5oYW5kbGVUZWNoQ2xpY2tfKTtcbiAgICB0aGlzLm9uKHRoaXMudGVjaF8sICdkYmxjbGljaycsIHRoaXMuaGFuZGxlVGVjaERvdWJsZUNsaWNrXyk7IC8vIElmIHRoZSBjb250cm9scyB3ZXJlIGhpZGRlbiB3ZSBkb24ndCB3YW50IHRoYXQgdG8gY2hhbmdlIHdpdGhvdXQgYSB0YXAgZXZlbnRcbiAgICAvLyBzbyB3ZSdsbCBjaGVjayBpZiB0aGUgY29udHJvbHMgd2VyZSBhbHJlYWR5IHNob3dpbmcgYmVmb3JlIHJlcG9ydGluZyB1c2VyXG4gICAgLy8gYWN0aXZpdHlcblxuICAgIHRoaXMub24odGhpcy50ZWNoXywgJ3RvdWNoc3RhcnQnLCB0aGlzLmhhbmRsZVRlY2hUb3VjaFN0YXJ0Xyk7XG4gICAgdGhpcy5vbih0aGlzLnRlY2hfLCAndG91Y2htb3ZlJywgdGhpcy5oYW5kbGVUZWNoVG91Y2hNb3ZlXyk7XG4gICAgdGhpcy5vbih0aGlzLnRlY2hfLCAndG91Y2hlbmQnLCB0aGlzLmhhbmRsZVRlY2hUb3VjaEVuZF8pOyAvLyBUaGUgdGFwIGxpc3RlbmVyIG5lZWRzIHRvIGNvbWUgYWZ0ZXIgdGhlIHRvdWNoZW5kIGxpc3RlbmVyIGJlY2F1c2UgdGhlIHRhcFxuICAgIC8vIGxpc3RlbmVyIGNhbmNlbHMgb3V0IGFueSByZXBvcnRlZFVzZXJBY3Rpdml0eSB3aGVuIHNldHRpbmcgdXNlckFjdGl2ZShmYWxzZSlcblxuICAgIHRoaXMub24odGhpcy50ZWNoXywgJ3RhcCcsIHRoaXMuaGFuZGxlVGVjaFRhcF8pO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGxpc3RlbmVycyB1c2VkIGZvciBjbGljayBhbmQgdGFwIGNvbnRyb2xzLiBUaGlzIGlzIG5lZWRlZCBmb3JcbiAgICogdG9nZ2xpbmcgdG8gY29udHJvbHMgZGlzYWJsZWQsIHdoZXJlIGEgdGFwL3RvdWNoIHNob3VsZCBkbyBub3RoaW5nLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5yZW1vdmVUZWNoQ29udHJvbHNMaXN0ZW5lcnNfID0gZnVuY3Rpb24gcmVtb3ZlVGVjaENvbnRyb2xzTGlzdGVuZXJzXygpIHtcbiAgICAvLyBXZSBkb24ndCB3YW50IHRvIGp1c3QgdXNlIGB0aGlzLm9mZigpYCBiZWNhdXNlIHRoZXJlIG1pZ2h0IGJlIG90aGVyIG5lZWRlZFxuICAgIC8vIGxpc3RlbmVycyBhZGRlZCBieSB0ZWNocyB0aGF0IGV4dGVuZCB0aGlzLlxuICAgIHRoaXMub2ZmKHRoaXMudGVjaF8sICd0YXAnLCB0aGlzLmhhbmRsZVRlY2hUYXBfKTtcbiAgICB0aGlzLm9mZih0aGlzLnRlY2hfLCAndG91Y2hzdGFydCcsIHRoaXMuaGFuZGxlVGVjaFRvdWNoU3RhcnRfKTtcbiAgICB0aGlzLm9mZih0aGlzLnRlY2hfLCAndG91Y2htb3ZlJywgdGhpcy5oYW5kbGVUZWNoVG91Y2hNb3ZlXyk7XG4gICAgdGhpcy5vZmYodGhpcy50ZWNoXywgJ3RvdWNoZW5kJywgdGhpcy5oYW5kbGVUZWNoVG91Y2hFbmRfKTtcbiAgICB0aGlzLm9mZih0aGlzLnRlY2hfLCAnbW91c2Vkb3duJywgdGhpcy5oYW5kbGVUZWNoQ2xpY2tfKTtcbiAgICB0aGlzLm9mZih0aGlzLnRlY2hfLCAnZGJsY2xpY2snLCB0aGlzLmhhbmRsZVRlY2hEb3VibGVDbGlja18pO1xuICB9XG4gIC8qKlxuICAgKiBQbGF5ZXIgd2FpdHMgZm9yIHRoZSB0ZWNoIHRvIGJlIHJlYWR5XG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZVRlY2hSZWFkeV8gPSBmdW5jdGlvbiBoYW5kbGVUZWNoUmVhZHlfKCkge1xuICAgIHRoaXMudHJpZ2dlclJlYWR5KCk7IC8vIEtlZXAgdGhlIHNhbWUgdm9sdW1lIGFzIGJlZm9yZVxuXG4gICAgaWYgKHRoaXMuY2FjaGVfLnZvbHVtZSkge1xuICAgICAgdGhpcy50ZWNoQ2FsbF8oJ3NldFZvbHVtZScsIHRoaXMuY2FjaGVfLnZvbHVtZSk7XG4gICAgfSAvLyBMb29rIGlmIHRoZSB0ZWNoIGZvdW5kIGEgaGlnaGVyIHJlc29sdXRpb24gcG9zdGVyIHdoaWxlIGxvYWRpbmdcblxuXG4gICAgdGhpcy5oYW5kbGVUZWNoUG9zdGVyQ2hhbmdlXygpOyAvLyBVcGRhdGUgdGhlIGR1cmF0aW9uIGlmIGF2YWlsYWJsZVxuXG4gICAgdGhpcy5oYW5kbGVUZWNoRHVyYXRpb25DaGFuZ2VfKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHJpZ2dlciB0aGUgYGxvYWRzdGFydGAgZXZlbnQgdGhhdCB3YXMgdHJpZ2dlcmVkIGJ5IHRoZSB7QGxpbmsgVGVjaH0uIFRoaXNcbiAgICogZnVuY3Rpb24gd2lsbCBhbHNvIHRyaWdnZXIge0BsaW5rIFBsYXllciNmaXJzdHBsYXl9IGlmIGl0IGlzIHRoZSBmaXJzdCBsb2Fkc3RhcnRcbiAgICogZm9yIGEgdmlkZW8uXG4gICAqXG4gICAqIEBmaXJlcyBQbGF5ZXIjbG9hZHN0YXJ0XG4gICAqIEBmaXJlcyBQbGF5ZXIjZmlyc3RwbGF5XG4gICAqIEBsaXN0ZW5zIFRlY2gjbG9hZHN0YXJ0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZVRlY2hMb2FkU3RhcnRfID0gZnVuY3Rpb24gaGFuZGxlVGVjaExvYWRTdGFydF8oKSB7XG4gICAgLy8gVE9ETzogVXBkYXRlIHRvIHVzZSBgZW1wdGllZGAgZXZlbnQgaW5zdGVhZC4gU2VlICMxMjc3LlxuICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1lbmRlZCcpO1xuICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1zZWVraW5nJyk7IC8vIHJlc2V0IHRoZSBlcnJvciBzdGF0ZVxuXG4gICAgdGhpcy5lcnJvcihudWxsKTsgLy8gVXBkYXRlIHRoZSBkdXJhdGlvblxuXG4gICAgdGhpcy5oYW5kbGVUZWNoRHVyYXRpb25DaGFuZ2VfKCk7IC8vIElmIGl0J3MgYWxyZWFkeSBwbGF5aW5nIHdlIHdhbnQgdG8gdHJpZ2dlciBhIGZpcnN0cGxheSBldmVudCBub3cuXG4gICAgLy8gVGhlIGZpcnN0cGxheSBldmVudCByZWxpZXMgb24gYm90aCB0aGUgcGxheSBhbmQgbG9hZHN0YXJ0IGV2ZW50c1xuICAgIC8vIHdoaWNoIGNhbiBoYXBwZW4gaW4gYW55IG9yZGVyIGZvciBhIG5ldyBzb3VyY2VcblxuICAgIGlmICghdGhpcy5wYXVzZWQoKSkge1xuICAgICAgLyoqXG4gICAgICAgKiBGaXJlZCB3aGVuIHRoZSB1c2VyIGFnZW50IGJlZ2lucyBsb29raW5nIGZvciBtZWRpYSBkYXRhXG4gICAgICAgKlxuICAgICAgICogQGV2ZW50IFBsYXllciNsb2Fkc3RhcnRcbiAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAqL1xuICAgICAgdGhpcy50cmlnZ2VyKCdsb2Fkc3RhcnQnKTtcbiAgICAgIHRoaXMudHJpZ2dlcignZmlyc3RwbGF5Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHJlc2V0IHRoZSBoYXNTdGFydGVkIHN0YXRlXG4gICAgICB0aGlzLmhhc1N0YXJ0ZWQoZmFsc2UpO1xuICAgICAgdGhpcy50cmlnZ2VyKCdsb2Fkc3RhcnQnKTtcbiAgICB9IC8vIGF1dG9wbGF5IGhhcHBlbnMgYWZ0ZXIgbG9hZHN0YXJ0IGZvciB0aGUgYnJvd3NlcixcbiAgICAvLyBzbyB3ZSBtaW1pYyB0aGF0IGJlaGF2aW9yXG5cblxuICAgIHRoaXMubWFudWFsQXV0b3BsYXlfKHRoaXMuYXV0b3BsYXkoKSk7XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSBhdXRvcGxheSBzdHJpbmcgdmFsdWVzLCByYXRoZXIgdGhhbiB0aGUgdHlwaWNhbCBib29sZWFuXG4gICAqIHZhbHVlcyB0aGF0IHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSB0ZWNoLiBOb3RlIHRoYXQgdGhpcyBpcyBub3RcbiAgICogcGFydCBvZiBhbnkgc3BlY2lmaWNhdGlvbi4gVmFsaWQgdmFsdWVzIGFuZCB3aGF0IHRoZXkgZG8gY2FuIGJlXG4gICAqIGZvdW5kIG9uIHRoZSBhdXRvcGxheSBnZXR0ZXIgYXQgUGxheWVyI2F1dG9wbGF5KClcbiAgICovXG4gIDtcblxuICBfcHJvdG8ubWFudWFsQXV0b3BsYXlfID0gZnVuY3Rpb24gbWFudWFsQXV0b3BsYXlfKHR5cGUpIHtcbiAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgIGlmICghdGhpcy50ZWNoXyB8fCB0eXBlb2YgdHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbXV0ZWQgPSBmdW5jdGlvbiBtdXRlZCgpIHtcbiAgICAgIHZhciBwcmV2aW91c2x5TXV0ZWQgPSBfdGhpczUubXV0ZWQoKTtcblxuICAgICAgX3RoaXM1Lm11dGVkKHRydWUpO1xuXG4gICAgICB2YXIgcmVzdG9yZU11dGVkID0gZnVuY3Rpb24gcmVzdG9yZU11dGVkKCkge1xuICAgICAgICBfdGhpczUubXV0ZWQocHJldmlvdXNseU11dGVkKTtcbiAgICAgIH07IC8vIHJlc3RvcmUgbXV0ZWQgb24gcGxheSB0ZXJtaW5hdGF0aW9uXG5cblxuICAgICAgX3RoaXM1LnBsYXlUZXJtaW5hdGVkUXVldWVfLnB1c2gocmVzdG9yZU11dGVkKTtcblxuICAgICAgdmFyIG11dGVkUHJvbWlzZSA9IF90aGlzNS5wbGF5KCk7XG5cbiAgICAgIGlmICghaXNQcm9taXNlKG11dGVkUHJvbWlzZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbXV0ZWRQcm9taXNlLmNhdGNoKHJlc3RvcmVNdXRlZCk7XG4gICAgfTtcblxuICAgIHZhciBwcm9taXNlOyAvLyBpZiBtdXRlZCBkZWZhdWx0cyB0byB0cnVlXG4gICAgLy8gdGhlIG9ubHkgdGhpbmcgd2UgY2FuIGRvIGlzIGNhbGwgcGxheVxuXG4gICAgaWYgKHR5cGUgPT09ICdhbnknICYmIHRoaXMubXV0ZWQoKSAhPT0gdHJ1ZSkge1xuICAgICAgcHJvbWlzZSA9IHRoaXMucGxheSgpO1xuXG4gICAgICBpZiAoaXNQcm9taXNlKHByb21pc2UpKSB7XG4gICAgICAgIHByb21pc2UgPSBwcm9taXNlLmNhdGNoKG11dGVkKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdtdXRlZCcgJiYgdGhpcy5tdXRlZCgpICE9PSB0cnVlKSB7XG4gICAgICBwcm9taXNlID0gbXV0ZWQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvbWlzZSA9IHRoaXMucGxheSgpO1xuICAgIH1cblxuICAgIGlmICghaXNQcm9taXNlKHByb21pc2UpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpczUudHJpZ2dlcih7XG4gICAgICAgIHR5cGU6ICdhdXRvcGxheS1zdWNjZXNzJyxcbiAgICAgICAgYXV0b3BsYXk6IHR5cGVcbiAgICAgIH0pO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpczUudHJpZ2dlcih7XG4gICAgICAgIHR5cGU6ICdhdXRvcGxheS1mYWlsdXJlJyxcbiAgICAgICAgYXV0b3BsYXk6IHR5cGVcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGludGVybmFsIHNvdXJjZSBjYWNoZXMgc28gdGhhdCB3ZSByZXR1cm4gdGhlIGNvcnJlY3Qgc291cmNlIGZyb21cbiAgICogYHNyYygpYCwgYGN1cnJlbnRTb3VyY2UoKWAsIGFuZCBgY3VycmVudFNvdXJjZXMoKWAuXG4gICAqXG4gICAqID4gTm90ZTogYGN1cnJlbnRTb3VyY2VzYCB3aWxsIG5vdCBiZSB1cGRhdGVkIGlmIHRoZSBzb3VyY2UgdGhhdCBpcyBwYXNzZWQgaW4gZXhpc3RzXG4gICAqICAgICAgICAgaW4gdGhlIGN1cnJlbnQgYGN1cnJlbnRTb3VyY2VzYCBjYWNoZS5cbiAgICpcbiAgICpcbiAgICogQHBhcmFtIHtUZWNoflNvdXJjZU9iamVjdH0gc3JjT2JqXG4gICAqICAgICAgICBBIHN0cmluZyBvciBvYmplY3Qgc291cmNlIHRvIHVwZGF0ZSBvdXIgY2FjaGVzIHRvLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by51cGRhdGVTb3VyY2VDYWNoZXNfID0gZnVuY3Rpb24gdXBkYXRlU291cmNlQ2FjaGVzXyhzcmNPYmopIHtcbiAgICBpZiAoc3JjT2JqID09PSB2b2lkIDApIHtcbiAgICAgIHNyY09iaiA9ICcnO1xuICAgIH1cblxuICAgIHZhciBzcmMgPSBzcmNPYmo7XG4gICAgdmFyIHR5cGUgPSAnJztcblxuICAgIGlmICh0eXBlb2Ygc3JjICE9PSAnc3RyaW5nJykge1xuICAgICAgc3JjID0gc3JjT2JqLnNyYztcbiAgICAgIHR5cGUgPSBzcmNPYmoudHlwZTtcbiAgICB9IC8vIG1ha2Ugc3VyZSBhbGwgdGhlIGNhY2hlcyBhcmUgc2V0IHRvIGRlZmF1bHQgdmFsdWVzXG4gICAgLy8gdG8gcHJldmVudCBudWxsIGNoZWNraW5nXG5cblxuICAgIHRoaXMuY2FjaGVfLnNvdXJjZSA9IHRoaXMuY2FjaGVfLnNvdXJjZSB8fCB7fTtcbiAgICB0aGlzLmNhY2hlXy5zb3VyY2VzID0gdGhpcy5jYWNoZV8uc291cmNlcyB8fCBbXTsgLy8gdHJ5IHRvIGdldCB0aGUgdHlwZSBvZiB0aGUgc3JjIHRoYXQgd2FzIHBhc3NlZCBpblxuXG4gICAgaWYgKHNyYyAmJiAhdHlwZSkge1xuICAgICAgdHlwZSA9IGZpbmRNaW1ldHlwZSh0aGlzLCBzcmMpO1xuICAgIH0gLy8gdXBkYXRlIGBjdXJyZW50U291cmNlYCBjYWNoZSBhbHdheXNcblxuXG4gICAgdGhpcy5jYWNoZV8uc291cmNlID0gbWVyZ2VPcHRpb25zKHt9LCBzcmNPYmosIHtcbiAgICAgIHNyYzogc3JjLFxuICAgICAgdHlwZTogdHlwZVxuICAgIH0pO1xuICAgIHZhciBtYXRjaGluZ1NvdXJjZXMgPSB0aGlzLmNhY2hlXy5zb3VyY2VzLmZpbHRlcihmdW5jdGlvbiAocykge1xuICAgICAgcmV0dXJuIHMuc3JjICYmIHMuc3JjID09PSBzcmM7XG4gICAgfSk7XG4gICAgdmFyIHNvdXJjZUVsU291cmNlcyA9IFtdO1xuICAgIHZhciBzb3VyY2VFbHMgPSB0aGlzLiQkKCdzb3VyY2UnKTtcbiAgICB2YXIgbWF0Y2hpbmdTb3VyY2VFbHMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc291cmNlRWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc291cmNlT2JqID0gZ2V0QXR0cmlidXRlcyhzb3VyY2VFbHNbaV0pO1xuICAgICAgc291cmNlRWxTb3VyY2VzLnB1c2goc291cmNlT2JqKTtcblxuICAgICAgaWYgKHNvdXJjZU9iai5zcmMgJiYgc291cmNlT2JqLnNyYyA9PT0gc3JjKSB7XG4gICAgICAgIG1hdGNoaW5nU291cmNlRWxzLnB1c2goc291cmNlT2JqLnNyYyk7XG4gICAgICB9XG4gICAgfSAvLyBpZiB3ZSBoYXZlIG1hdGNoaW5nIHNvdXJjZSBlbHMgYnV0IG5vdCBtYXRjaGluZyBzb3VyY2VzXG4gICAgLy8gdGhlIGN1cnJlbnQgc291cmNlIGNhY2hlIGlzIG5vdCB1cCB0byBkYXRlXG5cblxuICAgIGlmIChtYXRjaGluZ1NvdXJjZUVscy5sZW5ndGggJiYgIW1hdGNoaW5nU291cmNlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuY2FjaGVfLnNvdXJjZXMgPSBzb3VyY2VFbFNvdXJjZXM7IC8vIGlmIHdlIGRvbid0IGhhdmUgbWF0Y2hpbmcgc291cmNlIG9yIHNvdXJjZSBlbHMgc2V0IHRoZVxuICAgICAgLy8gc291cmNlcyBjYWNoZSB0byB0aGUgYGN1cnJlbnRTb3VyY2VgIGNhY2hlXG4gICAgfSBlbHNlIGlmICghbWF0Y2hpbmdTb3VyY2VzLmxlbmd0aCkge1xuICAgICAgdGhpcy5jYWNoZV8uc291cmNlcyA9IFt0aGlzLmNhY2hlXy5zb3VyY2VdO1xuICAgIH0gLy8gdXBkYXRlIHRoZSB0ZWNoIGBzcmNgIGNhY2hlXG5cblxuICAgIHRoaXMuY2FjaGVfLnNyYyA9IHNyYztcbiAgfVxuICAvKipcbiAgICogKkVYUEVSSU1FTlRBTCogRmlyZWQgd2hlbiB0aGUgc291cmNlIGlzIHNldCBvciBjaGFuZ2VkIG9uIHRoZSB7QGxpbmsgVGVjaH1cbiAgICogY2F1c2luZyB0aGUgbWVkaWEgZWxlbWVudCB0byByZWxvYWQuXG4gICAqXG4gICAqIEl0IHdpbGwgZmlyZSBmb3IgdGhlIGluaXRpYWwgc291cmNlIGFuZCBlYWNoIHN1YnNlcXVlbnQgc291cmNlLlxuICAgKiBUaGlzIGV2ZW50IGlzIGEgY3VzdG9tIGV2ZW50IGZyb20gVmlkZW8uanMgYW5kIGlzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgKlxuICAgKiBUaGUgZXZlbnQgb2JqZWN0IGZvciB0aGlzIGV2ZW50IGNvbnRhaW5zIGEgYHNyY2AgcHJvcGVydHkgdGhhdCB3aWxsIGNvbnRhaW4gdGhlIHNvdXJjZVxuICAgKiB0aGF0IHdhcyBhdmFpbGFibGUgd2hlbiB0aGUgZXZlbnQgd2FzIHRyaWdnZXJlZC4gVGhpcyBpcyBnZW5lcmFsbHkgb25seSBuZWNlc3NhcnkgaWYgVmlkZW8uanNcbiAgICogaXMgc3dpdGNoaW5nIHRlY2hzIHdoaWxlIHRoZSBzb3VyY2Ugd2FzIGJlaW5nIGNoYW5nZWQuXG4gICAqXG4gICAqIEl0IGlzIGFsc28gZmlyZWQgd2hlbiBgbG9hZGAgaXMgY2FsbGVkIG9uIHRoZSBwbGF5ZXIgKG9yIG1lZGlhIGVsZW1lbnQpXG4gICAqIGJlY2F1c2UgdGhlIHtAbGluayBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9tZWRpYS5odG1sI2RvbS1tZWRpYS1sb2FkfHNwZWNpZmljYXRpb24gZm9yIGBsb2FkYH1cbiAgICogc2F5cyB0aGF0IHRoZSByZXNvdXJjZSBzZWxlY3Rpb24gYWxnb3JpdGhtIG5lZWRzIHRvIGJlIGFib3J0ZWQgYW5kIHJlc3RhcnRlZC5cbiAgICogSW4gdGhpcyBjYXNlLCBpdCBpcyB2ZXJ5IGxpa2VseSB0aGF0IHRoZSBgc3JjYCBwcm9wZXJ0eSB3aWxsIGJlIHNldCB0byB0aGVcbiAgICogZW1wdHkgc3RyaW5nIGBcIlwiYCB0byBpbmRpY2F0ZSB3ZSBkbyBub3Qga25vdyB3aGF0IHRoZSBzb3VyY2Ugd2lsbCBiZSBidXRcbiAgICogdGhhdCBpdCBpcyBjaGFuZ2luZy5cbiAgICpcbiAgICogKlRoaXMgZXZlbnQgaXMgY3VycmVudGx5IHN0aWxsIGV4cGVyaW1lbnRhbCBhbmQgbWF5IGNoYW5nZSBpbiBtaW5vciByZWxlYXNlcy4qXG4gICAqIF9fVG8gdXNlIHRoaXMsIHBhc3MgYGVuYWJsZVNvdXJjZXNldGAgb3B0aW9uIHRvIHRoZSBwbGF5ZXIuX19cbiAgICpcbiAgICogQGV2ZW50IFBsYXllciNzb3VyY2VzZXRcbiAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgKiBAcHJvcCB7c3RyaW5nfSBzcmNcbiAgICogICAgICAgICAgICAgICAgVGhlIHNvdXJjZSB1cmwgYXZhaWxhYmxlIHdoZW4gdGhlIGBzb3VyY2VzZXRgIHdhcyB0cmlnZ2VyZWQuXG4gICAqICAgICAgICAgICAgICAgIEl0IHdpbGwgYmUgYW4gZW1wdHkgc3RyaW5nIGlmIHdlIGNhbm5vdCBrbm93IHdoYXQgdGhlIHNvdXJjZSBpc1xuICAgKiAgICAgICAgICAgICAgICBidXQga25vdyB0aGF0IHRoZSBzb3VyY2Ugd2lsbCBjaGFuZ2UuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBSZXRyaWdnZXIgdGhlIGBzb3VyY2VzZXRgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgKlxuICAgKiBAZmlyZXMgUGxheWVyI3NvdXJjZXNldFxuICAgKiBAbGlzdGVucyBUZWNoI3NvdXJjZXNldFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVUZWNoU291cmNlc2V0XyA9IGZ1bmN0aW9uIGhhbmRsZVRlY2hTb3VyY2VzZXRfKGV2ZW50KSB7XG4gICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAvLyBvbmx5IHVwZGF0ZSB0aGUgc291cmNlIGNhY2hlIHdoZW4gdGhlIHNvdXJjZVxuICAgIC8vIHdhcyBub3QgdXBkYXRlZCB1c2luZyB0aGUgcGxheWVyIGFwaVxuICAgIGlmICghdGhpcy5jaGFuZ2luZ1NyY18pIHtcbiAgICAgIHZhciB1cGRhdGVTb3VyY2VDYWNoZXMgPSBmdW5jdGlvbiB1cGRhdGVTb3VyY2VDYWNoZXMoc3JjKSB7XG4gICAgICAgIHJldHVybiBfdGhpczYudXBkYXRlU291cmNlQ2FjaGVzXyhzcmMpO1xuICAgICAgfTtcblxuICAgICAgdmFyIHBsYXllclNyYyA9IHRoaXMuY3VycmVudFNvdXJjZSgpLnNyYztcbiAgICAgIHZhciBldmVudFNyYyA9IGV2ZW50LnNyYzsgLy8gaWYgd2UgaGF2ZSBhIHBsYXllclNyYyB0aGF0IGlzIG5vdCBhIGJsb2IsIGFuZCBhIHRlY2ggc3JjIHRoYXQgaXMgYSBibG9iXG5cbiAgICAgIGlmIChwbGF5ZXJTcmMgJiYgIS9eYmxvYjovLnRlc3QocGxheWVyU3JjKSAmJiAvXmJsb2I6Ly50ZXN0KGV2ZW50U3JjKSkge1xuICAgICAgICAvLyBpZiBib3RoIHRoZSB0ZWNoIHNvdXJjZSBhbmQgdGhlIHBsYXllciBzb3VyY2Ugd2VyZSB1cGRhdGVkIHdlIGFzc3VtZVxuICAgICAgICAvLyBzb21ldGhpbmcgbGlrZSBAdmlkZW9qcy9odHRwLXN0cmVhbWluZyBkaWQgdGhlIHNvdXJjZXNldCBhbmQgc2tpcCB1cGRhdGluZyB0aGUgc291cmNlIGNhY2hlLlxuICAgICAgICBpZiAoIXRoaXMubGFzdFNvdXJjZV8gfHwgdGhpcy5sYXN0U291cmNlXy50ZWNoICE9PSBldmVudFNyYyAmJiB0aGlzLmxhc3RTb3VyY2VfLnBsYXllciAhPT0gcGxheWVyU3JjKSB7XG4gICAgICAgICAgdXBkYXRlU291cmNlQ2FjaGVzID0gZnVuY3Rpb24gdXBkYXRlU291cmNlQ2FjaGVzKCkge307XG4gICAgICAgIH1cbiAgICAgIH0gLy8gdXBkYXRlIHRoZSBzb3VyY2UgdG8gdGhlIGludGlhbCBzb3VyY2UgcmlnaHQgYXdheVxuICAgICAgLy8gaW4gc29tZSBjYXNlcyB0aGlzIHdpbGwgYmUgZW1wdHkgc3RyaW5nXG5cblxuICAgICAgdXBkYXRlU291cmNlQ2FjaGVzKGV2ZW50U3JjKTsgLy8gaWYgdGhlIGBzb3VyY2VzZXRgIGBzcmNgIHdhcyBhbiBlbXB0eSBzdHJpbmdcbiAgICAgIC8vIHdhaXQgZm9yIGEgYGxvYWRzdGFydGAgdG8gdXBkYXRlIHRoZSBjYWNoZSB0byBgY3VycmVudFNyY2AuXG4gICAgICAvLyBJZiBhIHNvdXJjZXNldCBoYXBwZW5zIGJlZm9yZSBhIGBsb2Fkc3RhcnRgLCB3ZSByZXNldCB0aGUgc3RhdGVcbiAgICAgIC8vIGFzIHRoaXMgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWdhaW4uXG5cbiAgICAgIGlmICghZXZlbnQuc3JjKSB7XG4gICAgICAgIHZhciB1cGRhdGVDYWNoZSA9IGZ1bmN0aW9uIHVwZGF0ZUNhY2hlKGUpIHtcbiAgICAgICAgICBpZiAoZS50eXBlICE9PSAnc291cmNlc2V0Jykge1xuICAgICAgICAgICAgdmFyIHRlY2hTcmMgPSBfdGhpczYudGVjaEdldCgnY3VycmVudFNyYycpO1xuXG4gICAgICAgICAgICBfdGhpczYubGFzdFNvdXJjZV8udGVjaCA9IHRlY2hTcmM7XG5cbiAgICAgICAgICAgIF90aGlzNi51cGRhdGVTb3VyY2VDYWNoZXNfKHRlY2hTcmMpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzNi50ZWNoXy5vZmYoWydzb3VyY2VzZXQnLCAnbG9hZHN0YXJ0J10sIHVwZGF0ZUNhY2hlKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnRlY2hfLm9uZShbJ3NvdXJjZXNldCcsICdsb2Fkc3RhcnQnXSwgdXBkYXRlQ2FjaGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubGFzdFNvdXJjZV8gPSB7XG4gICAgICBwbGF5ZXI6IHRoaXMuY3VycmVudFNvdXJjZSgpLnNyYyxcbiAgICAgIHRlY2g6IGV2ZW50LnNyY1xuICAgIH07XG4gICAgdGhpcy50cmlnZ2VyKHtcbiAgICAgIHNyYzogZXZlbnQuc3JjLFxuICAgICAgdHlwZTogJ3NvdXJjZXNldCdcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQWRkL3JlbW92ZSB0aGUgdmpzLWhhcy1zdGFydGVkIGNsYXNzXG4gICAqXG4gICAqIEBmaXJlcyBQbGF5ZXIjZmlyc3RwbGF5XG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVxdWVzdFxuICAgKiAgICAgICAgLSB0cnVlOiBhZGRzIHRoZSBjbGFzc1xuICAgKiAgICAgICAgLSBmYWxzZTogcmVtb3ZlIHRoZSBjbGFzc1xuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIHRoZSBib29sZWFuIHZhbHVlIG9mIGhhc1N0YXJ0ZWRfXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhc1N0YXJ0ZWQgPSBmdW5jdGlvbiBoYXNTdGFydGVkKHJlcXVlc3QpIHtcbiAgICBpZiAocmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBhY3QgYXMgZ2V0dGVyLCBpZiB3ZSBoYXZlIG5vIHJlcXVlc3QgdG8gY2hhbmdlXG4gICAgICByZXR1cm4gdGhpcy5oYXNTdGFydGVkXztcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdCA9PT0gdGhpcy5oYXNTdGFydGVkXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuaGFzU3RhcnRlZF8gPSByZXF1ZXN0O1xuXG4gICAgaWYgKHRoaXMuaGFzU3RhcnRlZF8pIHtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1oYXMtc3RhcnRlZCcpO1xuICAgICAgdGhpcy50cmlnZ2VyKCdmaXJzdHBsYXknKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWhhcy1zdGFydGVkJyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuZXZlciB0aGUgbWVkaWEgYmVnaW5zIG9yIHJlc3VtZXMgcGxheWJhY2tcbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZW1iZWRkZWQtY29udGVudC5odG1sI2RvbS1tZWRpYS1wbGF5fVxuICAgKiBAZmlyZXMgUGxheWVyI3BsYXlcbiAgICogQGxpc3RlbnMgVGVjaCNwbGF5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZVRlY2hQbGF5XyA9IGZ1bmN0aW9uIGhhbmRsZVRlY2hQbGF5XygpIHtcbiAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtZW5kZWQnKTtcbiAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtcGF1c2VkJyk7XG4gICAgdGhpcy5hZGRDbGFzcygndmpzLXBsYXlpbmcnKTsgLy8gaGlkZSB0aGUgcG9zdGVyIHdoZW4gdGhlIHVzZXIgaGl0cyBwbGF5XG5cbiAgICB0aGlzLmhhc1N0YXJ0ZWQodHJ1ZSk7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW5ldmVyIGFuIHtAbGluayBUZWNoI3BsYXl9IGV2ZW50IGhhcHBlbnMuIEluZGljYXRlcyB0aGF0XG4gICAgICogcGxheWJhY2sgaGFzIHN0YXJ0ZWQgb3IgcmVzdW1lZC5cbiAgICAgKlxuICAgICAqIEBldmVudCBQbGF5ZXIjcGxheVxuICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgKi9cblxuICAgIHRoaXMudHJpZ2dlcigncGxheScpO1xuICB9XG4gIC8qKlxuICAgKiBSZXRyaWdnZXIgdGhlIGByYXRlY2hhbmdlYCBldmVudCB0aGF0IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIHtAbGluayBUZWNofS5cbiAgICpcbiAgICogSWYgdGhlcmUgd2VyZSBhbnkgZXZlbnRzIHF1ZXVlZCB3aGlsZSB0aGUgcGxheWJhY2sgcmF0ZSB3YXMgemVybywgZmlyZVxuICAgKiB0aG9zZSBldmVudHMgbm93LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIFBsYXllciNoYW5kbGVUZWNoUmF0ZUNoYW5nZV9cbiAgICogQGZpcmVzIFBsYXllciNyYXRlY2hhbmdlXG4gICAqIEBsaXN0ZW5zIFRlY2gjcmF0ZWNoYW5nZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVUZWNoUmF0ZUNoYW5nZV8gPSBmdW5jdGlvbiBoYW5kbGVUZWNoUmF0ZUNoYW5nZV8oKSB7XG4gICAgaWYgKHRoaXMudGVjaF8ucGxheWJhY2tSYXRlKCkgPiAwICYmIHRoaXMuY2FjaGVfLmxhc3RQbGF5YmFja1JhdGUgPT09IDApIHtcbiAgICAgIHRoaXMucXVldWVkQ2FsbGJhY2tzXy5mb3JFYWNoKGZ1bmN0aW9uIChxdWV1ZWQpIHtcbiAgICAgICAgcmV0dXJuIHF1ZXVlZC5jYWxsYmFjayhxdWV1ZWQuZXZlbnQpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnF1ZXVlZENhbGxiYWNrc18gPSBbXTtcbiAgICB9XG5cbiAgICB0aGlzLmNhY2hlXy5sYXN0UGxheWJhY2tSYXRlID0gdGhpcy50ZWNoXy5wbGF5YmFja1JhdGUoKTtcbiAgICAvKipcbiAgICAgKiBGaXJlcyB3aGVuIHRoZSBwbGF5aW5nIHNwZWVkIG9mIHRoZSBhdWRpby92aWRlbyBpcyBjaGFuZ2VkXG4gICAgICpcbiAgICAgKiBAZXZlbnQgUGxheWVyI3JhdGVjaGFuZ2VcbiAgICAgKiBAdHlwZSB7ZXZlbnR9XG4gICAgICovXG5cbiAgICB0aGlzLnRyaWdnZXIoJ3JhdGVjaGFuZ2UnKTtcbiAgfVxuICAvKipcbiAgICogUmV0cmlnZ2VyIHRoZSBgd2FpdGluZ2AgZXZlbnQgdGhhdCB3YXMgdHJpZ2dlcmVkIGJ5IHRoZSB7QGxpbmsgVGVjaH0uXG4gICAqXG4gICAqIEBmaXJlcyBQbGF5ZXIjd2FpdGluZ1xuICAgKiBAbGlzdGVucyBUZWNoI3dhaXRpbmdcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlVGVjaFdhaXRpbmdfID0gZnVuY3Rpb24gaGFuZGxlVGVjaFdhaXRpbmdfKCkge1xuICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgdGhpcy5hZGRDbGFzcygndmpzLXdhaXRpbmcnKTtcbiAgICAvKipcbiAgICAgKiBBIHJlYWR5U3RhdGUgY2hhbmdlIG9uIHRoZSBET00gZWxlbWVudCBoYXMgY2F1c2VkIHBsYXliYWNrIHRvIHN0b3AuXG4gICAgICpcbiAgICAgKiBAZXZlbnQgUGxheWVyI3dhaXRpbmdcbiAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICovXG5cbiAgICB0aGlzLnRyaWdnZXIoJ3dhaXRpbmcnKTsgLy8gQnJvd3NlcnMgbWF5IGVtaXQgYSB0aW1ldXBkYXRlIGV2ZW50IGFmdGVyIGEgd2FpdGluZyBldmVudC4gSW4gb3JkZXIgdG8gcHJldmVudFxuICAgIC8vIHByZW1hdHVyZSByZW1vdmFsIG9mIHRoZSB3YWl0aW5nIGNsYXNzLCB3YWl0IGZvciB0aGUgdGltZSB0byBjaGFuZ2UuXG5cbiAgICB2YXIgdGltZVdoZW5XYWl0aW5nID0gdGhpcy5jdXJyZW50VGltZSgpO1xuXG4gICAgdmFyIHRpbWVVcGRhdGVMaXN0ZW5lciA9IGZ1bmN0aW9uIHRpbWVVcGRhdGVMaXN0ZW5lcigpIHtcbiAgICAgIGlmICh0aW1lV2hlbldhaXRpbmcgIT09IF90aGlzNy5jdXJyZW50VGltZSgpKSB7XG4gICAgICAgIF90aGlzNy5yZW1vdmVDbGFzcygndmpzLXdhaXRpbmcnKTtcblxuICAgICAgICBfdGhpczcub2ZmKCd0aW1ldXBkYXRlJywgdGltZVVwZGF0ZUxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5vbigndGltZXVwZGF0ZScsIHRpbWVVcGRhdGVMaXN0ZW5lcik7XG4gIH1cbiAgLyoqXG4gICAqIFJldHJpZ2dlciB0aGUgYGNhbnBsYXlgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgKiA+IE5vdGU6IFRoaXMgaXMgbm90IGNvbnNpc3RlbnQgYmV0d2VlbiBicm93c2Vycy4gU2VlICMxMzUxXG4gICAqXG4gICAqIEBmaXJlcyBQbGF5ZXIjY2FucGxheVxuICAgKiBAbGlzdGVucyBUZWNoI2NhbnBsYXlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlVGVjaENhblBsYXlfID0gZnVuY3Rpb24gaGFuZGxlVGVjaENhblBsYXlfKCkge1xuICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy13YWl0aW5nJyk7XG4gICAgLyoqXG4gICAgICogVGhlIG1lZGlhIGhhcyBhIHJlYWR5U3RhdGUgb2YgSEFWRV9GVVRVUkVfREFUQSBvciBncmVhdGVyLlxuICAgICAqXG4gICAgICogQGV2ZW50IFBsYXllciNjYW5wbGF5XG4gICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAqL1xuXG4gICAgdGhpcy50cmlnZ2VyKCdjYW5wbGF5Jyk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHJpZ2dlciB0aGUgYGNhbnBsYXl0aHJvdWdoYCBldmVudCB0aGF0IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIHtAbGluayBUZWNofS5cbiAgICpcbiAgICogQGZpcmVzIFBsYXllciNjYW5wbGF5dGhyb3VnaFxuICAgKiBAbGlzdGVucyBUZWNoI2NhbnBsYXl0aHJvdWdoXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZVRlY2hDYW5QbGF5VGhyb3VnaF8gPSBmdW5jdGlvbiBoYW5kbGVUZWNoQ2FuUGxheVRocm91Z2hfKCkge1xuICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy13YWl0aW5nJyk7XG4gICAgLyoqXG4gICAgICogVGhlIG1lZGlhIGhhcyBhIHJlYWR5U3RhdGUgb2YgSEFWRV9FTk9VR0hfREFUQSBvciBncmVhdGVyLiBUaGlzIG1lYW5zIHRoYXQgdGhlXG4gICAgICogZW50aXJlIG1lZGlhIGZpbGUgY2FuIGJlIHBsYXllZCB3aXRob3V0IGJ1ZmZlcmluZy5cbiAgICAgKlxuICAgICAqIEBldmVudCBQbGF5ZXIjY2FucGxheXRocm91Z2hcbiAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICovXG5cbiAgICB0aGlzLnRyaWdnZXIoJ2NhbnBsYXl0aHJvdWdoJyk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHJpZ2dlciB0aGUgYHBsYXlpbmdgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgKlxuICAgKiBAZmlyZXMgUGxheWVyI3BsYXlpbmdcbiAgICogQGxpc3RlbnMgVGVjaCNwbGF5aW5nXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZVRlY2hQbGF5aW5nXyA9IGZ1bmN0aW9uIGhhbmRsZVRlY2hQbGF5aW5nXygpIHtcbiAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtd2FpdGluZycpO1xuICAgIC8qKlxuICAgICAqIFRoZSBtZWRpYSBpcyBubyBsb25nZXIgYmxvY2tlZCBmcm9tIHBsYXliYWNrLCBhbmQgaGFzIHN0YXJ0ZWQgcGxheWluZy5cbiAgICAgKlxuICAgICAqIEBldmVudCBQbGF5ZXIjcGxheWluZ1xuICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgKi9cblxuICAgIHRoaXMudHJpZ2dlcigncGxheWluZycpO1xuICB9XG4gIC8qKlxuICAgKiBSZXRyaWdnZXIgdGhlIGBzZWVraW5nYCBldmVudCB0aGF0IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIHtAbGluayBUZWNofS5cbiAgICpcbiAgICogQGZpcmVzIFBsYXllciNzZWVraW5nXG4gICAqIEBsaXN0ZW5zIFRlY2gjc2Vla2luZ1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVUZWNoU2Vla2luZ18gPSBmdW5jdGlvbiBoYW5kbGVUZWNoU2Vla2luZ18oKSB7XG4gICAgdGhpcy5hZGRDbGFzcygndmpzLXNlZWtpbmcnKTtcbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuZXZlciB0aGUgcGxheWVyIGlzIGp1bXBpbmcgdG8gYSBuZXcgdGltZVxuICAgICAqXG4gICAgICogQGV2ZW50IFBsYXllciNzZWVraW5nXG4gICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAqL1xuXG4gICAgdGhpcy50cmlnZ2VyKCdzZWVraW5nJyk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHJpZ2dlciB0aGUgYHNlZWtlZGAgZXZlbnQgdGhhdCB3YXMgdHJpZ2dlcmVkIGJ5IHRoZSB7QGxpbmsgVGVjaH0uXG4gICAqXG4gICAqIEBmaXJlcyBQbGF5ZXIjc2Vla2VkXG4gICAqIEBsaXN0ZW5zIFRlY2gjc2Vla2VkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZVRlY2hTZWVrZWRfID0gZnVuY3Rpb24gaGFuZGxlVGVjaFNlZWtlZF8oKSB7XG4gICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLXNlZWtpbmcnKTtcbiAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtZW5kZWQnKTtcbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIHRoZSBwbGF5ZXIgaGFzIGZpbmlzaGVkIGp1bXBpbmcgdG8gYSBuZXcgdGltZVxuICAgICAqXG4gICAgICogQGV2ZW50IFBsYXllciNzZWVrZWRcbiAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICovXG5cbiAgICB0aGlzLnRyaWdnZXIoJ3NlZWtlZCcpO1xuICB9XG4gIC8qKlxuICAgKiBSZXRyaWdnZXIgdGhlIGBmaXJzdHBsYXlgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgKlxuICAgKiBAZmlyZXMgUGxheWVyI2ZpcnN0cGxheVxuICAgKiBAbGlzdGVucyBUZWNoI2ZpcnN0cGxheVxuICAgKiBAZGVwcmVjYXRlZCBBcyBvZiA2LjAgZmlyc3RwbGF5IGV2ZW50IGlzIGRlcHJlY2F0ZWQuXG4gICAqICAgICAgICAgICAgIEFzIG9mIDYuMCBwYXNzaW5nIHRoZSBgc3RhcnR0aW1lYCBvcHRpb24gdG8gdGhlIHBsYXllciBhbmQgdGhlIGZpcnN0cGxheSBldmVudCBhcmUgZGVwcmVjYXRlZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlVGVjaEZpcnN0UGxheV8gPSBmdW5jdGlvbiBoYW5kbGVUZWNoRmlyc3RQbGF5XygpIHtcbiAgICAvLyBJZiB0aGUgZmlyc3Qgc3RhcnR0aW1lIGF0dHJpYnV0ZSBpcyBzcGVjaWZpZWRcbiAgICAvLyB0aGVuIHdlIHdpbGwgc3RhcnQgYXQgdGhlIGdpdmVuIG9mZnNldCBpbiBzZWNvbmRzXG4gICAgaWYgKHRoaXMub3B0aW9uc18uc3RhcnR0aW1lKSB7XG4gICAgICBsb2cud2FybignUGFzc2luZyB0aGUgYHN0YXJ0dGltZWAgb3B0aW9uIHRvIHRoZSBwbGF5ZXIgd2lsbCBiZSBkZXByZWNhdGVkIGluIDYuMCcpO1xuICAgICAgdGhpcy5jdXJyZW50VGltZSh0aGlzLm9wdGlvbnNfLnN0YXJ0dGltZSk7XG4gICAgfVxuXG4gICAgdGhpcy5hZGRDbGFzcygndmpzLWhhcy1zdGFydGVkJyk7XG4gICAgLyoqXG4gICAgICogRmlyZWQgdGhlIGZpcnN0IHRpbWUgYSB2aWRlbyBpcyBwbGF5ZWQuIE5vdCBwYXJ0IG9mIHRoZSBITFMgc3BlYywgYW5kIHRoaXMgaXNcbiAgICAgKiBwcm9iYWJseSBub3QgdGhlIGJlc3QgaW1wbGVtZW50YXRpb24geWV0LCBzbyB1c2Ugc3BhcmluZ2x5LiBJZiB5b3UgZG9uJ3QgaGF2ZSBhXG4gICAgICogcmVhc29uIHRvIHByZXZlbnQgcGxheWJhY2ssIHVzZSBgbXlQbGF5ZXIub25lKCdwbGF5Jyk7YCBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQGV2ZW50IFBsYXllciNmaXJzdHBsYXlcbiAgICAgKiBAZGVwcmVjYXRlZCBBcyBvZiA2LjAgZmlyc3RwbGF5IGV2ZW50IGlzIGRlcHJlY2F0ZWQuXG4gICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAqL1xuXG4gICAgdGhpcy50cmlnZ2VyKCdmaXJzdHBsYXknKTtcbiAgfVxuICAvKipcbiAgICogUmV0cmlnZ2VyIHRoZSBgcGF1c2VgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgKlxuICAgKiBAZmlyZXMgUGxheWVyI3BhdXNlXG4gICAqIEBsaXN0ZW5zIFRlY2gjcGF1c2VcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlVGVjaFBhdXNlXyA9IGZ1bmN0aW9uIGhhbmRsZVRlY2hQYXVzZV8oKSB7XG4gICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLXBsYXlpbmcnKTtcbiAgICB0aGlzLmFkZENsYXNzKCd2anMtcGF1c2VkJyk7XG4gICAgLyoqXG4gICAgICogRmlyZWQgd2hlbmV2ZXIgdGhlIG1lZGlhIGhhcyBiZWVuIHBhdXNlZFxuICAgICAqXG4gICAgICogQGV2ZW50IFBsYXllciNwYXVzZVxuICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgKi9cblxuICAgIHRoaXMudHJpZ2dlcigncGF1c2UnKTtcbiAgfVxuICAvKipcbiAgICogUmV0cmlnZ2VyIHRoZSBgZW5kZWRgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgKlxuICAgKiBAZmlyZXMgUGxheWVyI2VuZGVkXG4gICAqIEBsaXN0ZW5zIFRlY2gjZW5kZWRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlVGVjaEVuZGVkXyA9IGZ1bmN0aW9uIGhhbmRsZVRlY2hFbmRlZF8oKSB7XG4gICAgdGhpcy5hZGRDbGFzcygndmpzLWVuZGVkJyk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zXy5sb29wKSB7XG4gICAgICB0aGlzLmN1cnJlbnRUaW1lKDApO1xuICAgICAgdGhpcy5wbGF5KCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5wYXVzZWQoKSkge1xuICAgICAgdGhpcy5wYXVzZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIHRoZSBlbmQgb2YgdGhlIG1lZGlhIHJlc291cmNlIGlzIHJlYWNoZWQgKGN1cnJlbnRUaW1lID09IGR1cmF0aW9uKVxuICAgICAqXG4gICAgICogQGV2ZW50IFBsYXllciNlbmRlZFxuICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgKi9cblxuXG4gICAgdGhpcy50cmlnZ2VyKCdlbmRlZCcpO1xuICB9XG4gIC8qKlxuICAgKiBGaXJlZCB3aGVuIHRoZSBkdXJhdGlvbiBvZiB0aGUgbWVkaWEgcmVzb3VyY2UgaXMgZmlyc3Qga25vd24gb3IgY2hhbmdlZFxuICAgKlxuICAgKiBAbGlzdGVucyBUZWNoI2R1cmF0aW9uY2hhbmdlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZVRlY2hEdXJhdGlvbkNoYW5nZV8gPSBmdW5jdGlvbiBoYW5kbGVUZWNoRHVyYXRpb25DaGFuZ2VfKCkge1xuICAgIHRoaXMuZHVyYXRpb24odGhpcy50ZWNoR2V0XygnZHVyYXRpb24nKSk7XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSBhIGNsaWNrIG9uIHRoZSBtZWRpYSBlbGVtZW50IHRvIHBsYXkvcGF1c2VcbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIHRoZSBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIHRyaWdnZXJcbiAgICpcbiAgICogQGxpc3RlbnMgVGVjaCNtb3VzZWRvd25cbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlVGVjaENsaWNrXyA9IGZ1bmN0aW9uIGhhbmRsZVRlY2hDbGlja18oZXZlbnQpIHtcbiAgICBpZiAoIWlzU2luZ2xlTGVmdENsaWNrKGV2ZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gV2hlbiBjb250cm9scyBhcmUgZGlzYWJsZWQgYSBjbGljayBzaG91bGQgbm90IHRvZ2dsZSBwbGF5YmFjayBiZWNhdXNlXG4gICAgLy8gdGhlIGNsaWNrIGlzIGNvbnNpZGVyZWQgYSBjb250cm9sXG5cblxuICAgIGlmICghdGhpcy5jb250cm9sc18pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wYXVzZWQoKSkge1xuICAgICAgc2lsZW5jZVByb21pc2UodGhpcy5wbGF5KCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBhdXNlKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBIYW5kbGUgYSBkb3VibGUtY2xpY2sgb24gdGhlIG1lZGlhIGVsZW1lbnQgdG8gZW50ZXIvZXhpdCBmdWxsc2NyZWVuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICB0aGUgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byB0cmlnZ2VyXG4gICAqXG4gICAqIEBsaXN0ZW5zIFRlY2gjZGJsY2xpY2tcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlVGVjaERvdWJsZUNsaWNrXyA9IGZ1bmN0aW9uIGhhbmRsZVRlY2hEb3VibGVDbGlja18oZXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuY29udHJvbHNfKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyB3ZSBkbyBub3Qgd2FudCB0byB0b2dnbGUgZnVsbHNjcmVlbiBzdGF0ZVxuICAgIC8vIHdoZW4gZG91YmxlLWNsaWNraW5nIGluc2lkZSBhIGNvbnRyb2wgYmFyIG9yIGEgbW9kYWxcblxuXG4gICAgdmFyIGluQWxsb3dlZEVscyA9IEFycmF5LnByb3RvdHlwZS5zb21lLmNhbGwodGhpcy4kJCgnLnZqcy1jb250cm9sLWJhciwgLnZqcy1tb2RhbC1kaWFsb2cnKSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICByZXR1cm4gZWwuY29udGFpbnMoZXZlbnQudGFyZ2V0KTtcbiAgICB9KTtcblxuICAgIGlmICghaW5BbGxvd2VkRWxzKSB7XG4gICAgICAvKlxuICAgICAgICogb3B0aW9ucy51c2VyQWN0aW9ucy5kb3VibGVDbGlja1xuICAgICAgICpcbiAgICAgICAqIElmIGB1bmRlZmluZWRgIG9yIGB0cnVlYCwgZG91YmxlLWNsaWNrIHRvZ2dsZXMgZnVsbHNjcmVlbiBpZiBjb250cm9scyBhcmUgcHJlc2VudFxuICAgICAgICogU2V0IHRvIGBmYWxzZWAgdG8gZGlzYWJsZSBkb3VibGUtY2xpY2sgaGFuZGxpbmdcbiAgICAgICAqIFNldCB0byBhIGZ1bmN0aW9uIHRvIHN1YnN0aXR1dGUgYW4gZXh0ZXJuYWwgZG91YmxlLWNsaWNrIGhhbmRsZXJcbiAgICAgICAqL1xuICAgICAgaWYgKHRoaXMub3B0aW9uc18gPT09IHVuZGVmaW5lZCB8fCB0aGlzLm9wdGlvbnNfLnVzZXJBY3Rpb25zID09PSB1bmRlZmluZWQgfHwgdGhpcy5vcHRpb25zXy51c2VyQWN0aW9ucy5kb3VibGVDbGljayA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub3B0aW9uc18udXNlckFjdGlvbnMuZG91YmxlQ2xpY2sgIT09IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnNfICE9PSB1bmRlZmluZWQgJiYgdGhpcy5vcHRpb25zXy51c2VyQWN0aW9ucyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB0aGlzLm9wdGlvbnNfLnVzZXJBY3Rpb25zLmRvdWJsZUNsaWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zXy51c2VyQWN0aW9ucy5kb3VibGVDbGljay5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzRnVsbHNjcmVlbigpKSB7XG4gICAgICAgICAgdGhpcy5leGl0RnVsbHNjcmVlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogSGFuZGxlIGEgdGFwIG9uIHRoZSBtZWRpYSBlbGVtZW50LiBJdCB3aWxsIHRvZ2dsZSB0aGUgdXNlclxuICAgKiBhY3Rpdml0eSBzdGF0ZSwgd2hpY2ggaGlkZXMgYW5kIHNob3dzIHRoZSBjb250cm9scy5cbiAgICpcbiAgICogQGxpc3RlbnMgVGVjaCN0YXBcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlVGVjaFRhcF8gPSBmdW5jdGlvbiBoYW5kbGVUZWNoVGFwXygpIHtcbiAgICB0aGlzLnVzZXJBY3RpdmUoIXRoaXMudXNlckFjdGl2ZSgpKTtcbiAgfVxuICAvKipcbiAgICogSGFuZGxlIHRvdWNoIHRvIHN0YXJ0XG4gICAqXG4gICAqIEBsaXN0ZW5zIFRlY2gjdG91Y2hzdGFydFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVUZWNoVG91Y2hTdGFydF8gPSBmdW5jdGlvbiBoYW5kbGVUZWNoVG91Y2hTdGFydF8oKSB7XG4gICAgdGhpcy51c2VyV2FzQWN0aXZlID0gdGhpcy51c2VyQWN0aXZlKCk7XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSB0b3VjaCB0byBtb3ZlXG4gICAqXG4gICAqIEBsaXN0ZW5zIFRlY2gjdG91Y2htb3ZlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZVRlY2hUb3VjaE1vdmVfID0gZnVuY3Rpb24gaGFuZGxlVGVjaFRvdWNoTW92ZV8oKSB7XG4gICAgaWYgKHRoaXMudXNlcldhc0FjdGl2ZSkge1xuICAgICAgdGhpcy5yZXBvcnRVc2VyQWN0aXZpdHkoKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSB0b3VjaCB0byBlbmRcbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIHRoZSB0b3VjaGVuZCBldmVudCB0aGF0IHRyaWdnZXJlZFxuICAgKiAgICAgICAgdGhpcyBmdW5jdGlvblxuICAgKlxuICAgKiBAbGlzdGVucyBUZWNoI3RvdWNoZW5kXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZVRlY2hUb3VjaEVuZF8gPSBmdW5jdGlvbiBoYW5kbGVUZWNoVG91Y2hFbmRfKGV2ZW50KSB7XG4gICAgLy8gU3RvcCB0aGUgbW91c2UgZXZlbnRzIGZyb20gYWxzbyBoYXBwZW5pbmdcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG4gIC8qKlxuICAgKiBuYXRpdmUgY2xpY2sgZXZlbnRzIG9uIHRoZSBTV0YgYXJlbid0IHRyaWdnZXJlZCBvbiBJRTExLCBXaW44LjFSVFxuICAgKiB1c2Ugc3RhZ2VjbGljayBldmVudHMgdHJpZ2dlcmVkIGZyb20gaW5zaWRlIHRoZSBTV0YgaW5zdGVhZFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbGlzdGVucyBzdGFnZWNsaWNrXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZVN0YWdlQ2xpY2tfID0gZnVuY3Rpb24gaGFuZGxlU3RhZ2VDbGlja18oKSB7XG4gICAgdGhpcy5yZXBvcnRVc2VyQWN0aXZpdHkoKTtcbiAgfVxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9nZ2xlRnVsbHNjcmVlbkNsYXNzXyA9IGZ1bmN0aW9uIHRvZ2dsZUZ1bGxzY3JlZW5DbGFzc18oKSB7XG4gICAgaWYgKHRoaXMuaXNGdWxsc2NyZWVuKCkpIHtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1mdWxsc2NyZWVuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1mdWxsc2NyZWVuJyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiB3aGVuIHRoZSBkb2N1bWVudCBmc2NoYW5nZSBldmVudCB0cmlnZ2VycyBpdCBjYWxscyB0aGlzXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmRvY3VtZW50RnVsbHNjcmVlbkNoYW5nZV8gPSBmdW5jdGlvbiBkb2N1bWVudEZ1bGxzY3JlZW5DaGFuZ2VfKGUpIHtcbiAgICB2YXIgZnNBcGkgPSBGdWxsc2NyZWVuQXBpO1xuICAgIHRoaXMuaXNGdWxsc2NyZWVuKGRvY3VtZW50W2ZzQXBpLmZ1bGxzY3JlZW5FbGVtZW50XSA9PT0gdGhpcy5lbCgpIHx8IHRoaXMuZWwoKS5tYXRjaGVzKCc6JyArIGZzQXBpLmZ1bGxzY3JlZW4pKTsgLy8gSWYgY2FuY2VsbGluZyBmdWxsc2NyZWVuLCByZW1vdmUgZXZlbnQgbGlzdGVuZXIuXG5cbiAgICBpZiAodGhpcy5pc0Z1bGxzY3JlZW4oKSA9PT0gZmFsc2UpIHtcbiAgICAgIG9mZihkb2N1bWVudCwgZnNBcGkuZnVsbHNjcmVlbmNoYW5nZSwgdGhpcy5ib3VuZERvY3VtZW50RnVsbHNjcmVlbkNoYW5nZV8pO1xuICAgIH1cblxuICAgIGlmICghcHJlZml4ZWRBUEkpIHtcbiAgICAgIC8qKlxuICAgICAgICogQGV2ZW50IFBsYXllciNmdWxsc2NyZWVuY2hhbmdlXG4gICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgKi9cbiAgICAgIHRoaXMudHJpZ2dlcignZnVsbHNjcmVlbmNoYW5nZScpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogSGFuZGxlIFRlY2ggRnVsbHNjcmVlbiBDaGFuZ2VcbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIHRoZSBmdWxsc2NyZWVuY2hhbmdlIGV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoaXMgZnVuY3Rpb25cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICogICAgICAgIHRoZSBkYXRhIHRoYXQgd2FzIHNlbnQgd2l0aCB0aGUgZXZlbnRcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQGxpc3RlbnMgVGVjaCNmdWxsc2NyZWVuY2hhbmdlXG4gICAqIEBmaXJlcyBQbGF5ZXIjZnVsbHNjcmVlbmNoYW5nZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVUZWNoRnVsbHNjcmVlbkNoYW5nZV8gPSBmdW5jdGlvbiBoYW5kbGVUZWNoRnVsbHNjcmVlbkNoYW5nZV8oZXZlbnQsIGRhdGEpIHtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgdGhpcy5pc0Z1bGxzY3JlZW4oZGF0YS5pc0Z1bGxzY3JlZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaXJlZCB3aGVuIGdvaW5nIGluIGFuZCBvdXQgb2YgZnVsbHNjcmVlbi5cbiAgICAgKlxuICAgICAqIEBldmVudCBQbGF5ZXIjZnVsbHNjcmVlbmNoYW5nZVxuICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgKi9cblxuXG4gICAgdGhpcy50cmlnZ2VyKCdmdWxsc2NyZWVuY2hhbmdlJyk7XG4gIH1cbiAgLyoqXG4gICAqIEZpcmVzIHdoZW4gYW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHRoZSBsb2FkaW5nIG9mIGFuIGF1ZGlvL3ZpZGVvLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbGlzdGVucyBUZWNoI2Vycm9yXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZVRlY2hFcnJvcl8gPSBmdW5jdGlvbiBoYW5kbGVUZWNoRXJyb3JfKCkge1xuICAgIHZhciBlcnJvciA9IHRoaXMudGVjaF8uZXJyb3IoKTtcbiAgICB0aGlzLmVycm9yKGVycm9yKTtcbiAgfVxuICAvKipcbiAgICogUmV0cmlnZ2VyIHRoZSBgdGV4dGRhdGFgIGV2ZW50IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUge0BsaW5rIFRlY2h9LlxuICAgKlxuICAgKiBAZmlyZXMgUGxheWVyI3RleHRkYXRhXG4gICAqIEBsaXN0ZW5zIFRlY2gjdGV4dGRhdGFcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlVGVjaFRleHREYXRhXyA9IGZ1bmN0aW9uIGhhbmRsZVRlY2hUZXh0RGF0YV8oKSB7XG4gICAgdmFyIGRhdGEgPSBudWxsO1xuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICBkYXRhID0gYXJndW1lbnRzWzFdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaXJlcyB3aGVuIHdlIGdldCBhIHRleHRkYXRhIGV2ZW50IGZyb20gdGVjaFxuICAgICAqXG4gICAgICogQGV2ZW50IFBsYXllciN0ZXh0ZGF0YVxuICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgKi9cblxuXG4gICAgdGhpcy50cmlnZ2VyKCd0ZXh0ZGF0YScsIGRhdGEpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgb2JqZWN0IGZvciBjYWNoZWQgdmFsdWVzLlxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqICAgICAgICAgZ2V0IHRoZSBjdXJyZW50IG9iamVjdCBjYWNoZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5nZXRDYWNoZSA9IGZ1bmN0aW9uIGdldENhY2hlKCkge1xuICAgIHJldHVybiB0aGlzLmNhY2hlXztcbiAgfVxuICAvKipcbiAgICogUmVzZXRzIHRoZSBpbnRlcm5hbCBjYWNoZSBvYmplY3QuXG4gICAqXG4gICAqIFVzaW5nIHRoaXMgZnVuY3Rpb24gb3V0c2lkZSB0aGUgcGxheWVyIGNvbnN0cnVjdG9yIG9yIHJlc2V0IG1ldGhvZCBtYXlcbiAgICogaGF2ZSB1bmludGVuZGVkIHNpZGUtZWZmZWN0cy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVzZXRDYWNoZV8gPSBmdW5jdGlvbiByZXNldENhY2hlXygpIHtcbiAgICB0aGlzLmNhY2hlXyA9IHtcbiAgICAgIC8vIFJpZ2h0IG5vdywgdGhlIGN1cnJlbnRUaW1lIGlzIG5vdCBfcmVhbGx5XyBjYWNoZWQgYmVjYXVzZSBpdCBpcyBhbHdheXNcbiAgICAgIC8vIHJldHJpZXZlZCBmcm9tIHRoZSB0ZWNoIChzZWU6IGN1cnJlbnRUaW1lKS4gSG93ZXZlciwgZm9yIGNvbXBsZXRlbmVzcyxcbiAgICAgIC8vIHdlIHNldCBpdCB0byB6ZXJvIGhlcmUgdG8gZW5zdXJlIHRoYXQgaWYgd2UgZG8gc3RhcnQgYWN0dWFsbHkgY2FjaGluZ1xuICAgICAgLy8gaXQsIHdlIHJlc2V0IGl0IGFsb25nIHdpdGggZXZlcnl0aGluZyBlbHNlLlxuICAgICAgY3VycmVudFRpbWU6IDAsXG4gICAgICBpbmFjdGl2aXR5VGltZW91dDogdGhpcy5vcHRpb25zXy5pbmFjdGl2aXR5VGltZW91dCxcbiAgICAgIGR1cmF0aW9uOiBOYU4sXG4gICAgICBsYXN0Vm9sdW1lOiAxLFxuICAgICAgbGFzdFBsYXliYWNrUmF0ZTogdGhpcy5kZWZhdWx0UGxheWJhY2tSYXRlKCksXG4gICAgICBtZWRpYTogbnVsbCxcbiAgICAgIHNyYzogJycsXG4gICAgICBzb3VyY2U6IHt9LFxuICAgICAgc291cmNlczogW10sXG4gICAgICB2b2x1bWU6IDFcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBQYXNzIHZhbHVlcyB0byB0aGUgcGxheWJhY2sgdGVjaFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW21ldGhvZF1cbiAgICogICAgICAgIHRoZSBtZXRob2QgdG8gY2FsbFxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYXJnXG4gICAqICAgICAgICB0aGUgYXJndW1lbnQgdG8gcGFzc1xuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50ZWNoQ2FsbF8gPSBmdW5jdGlvbiB0ZWNoQ2FsbF8obWV0aG9kLCBhcmcpIHtcbiAgICAvLyBJZiBpdCdzIG5vdCByZWFkeSB5ZXQsIGNhbGwgbWV0aG9kIHdoZW4gaXQgaXNcbiAgICB0aGlzLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChtZXRob2QgaW4gYWxsb3dlZFNldHRlcnMpIHtcbiAgICAgICAgcmV0dXJuIHNldCQxKHRoaXMubWlkZGxld2FyZV8sIHRoaXMudGVjaF8sIG1ldGhvZCwgYXJnKTtcbiAgICAgIH0gZWxzZSBpZiAobWV0aG9kIGluIGFsbG93ZWRNZWRpYXRvcnMpIHtcbiAgICAgICAgcmV0dXJuIG1lZGlhdGUodGhpcy5taWRkbGV3YXJlXywgdGhpcy50ZWNoXywgbWV0aG9kLCBhcmcpO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBpZiAodGhpcy50ZWNoXykge1xuICAgICAgICAgIHRoaXMudGVjaF9bbWV0aG9kXShhcmcpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGxvZyhlKTtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9LCB0cnVlKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGNhbGxzIGNhbid0IHdhaXQgZm9yIHRoZSB0ZWNoLCBhbmQgc29tZXRpbWVzIGRvbid0IG5lZWQgdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2RcbiAgICogICAgICAgIFRlY2ggbWV0aG9kXG4gICAqXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAgICogICAgICAgICB0aGUgbWV0aG9kIG9yIHVuZGVmaW5lZFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50ZWNoR2V0XyA9IGZ1bmN0aW9uIHRlY2hHZXRfKG1ldGhvZCkge1xuICAgIGlmICghdGhpcy50ZWNoXyB8fCAhdGhpcy50ZWNoXy5pc1JlYWR5Xykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChtZXRob2QgaW4gYWxsb3dlZEdldHRlcnMpIHtcbiAgICAgIHJldHVybiBnZXQodGhpcy5taWRkbGV3YXJlXywgdGhpcy50ZWNoXywgbWV0aG9kKTtcbiAgICB9IGVsc2UgaWYgKG1ldGhvZCBpbiBhbGxvd2VkTWVkaWF0b3JzKSB7XG4gICAgICByZXR1cm4gbWVkaWF0ZSh0aGlzLm1pZGRsZXdhcmVfLCB0aGlzLnRlY2hfLCBtZXRob2QpO1xuICAgIH0gLy8gRmxhc2ggbGlrZXMgdG8gZGllIGFuZCByZWxvYWQgd2hlbiB5b3UgaGlkZSBvciByZXBvc2l0aW9uIGl0LlxuICAgIC8vIEluIHRoZXNlIGNhc2VzIHRoZSBvYmplY3QgbWV0aG9kcyBnbyBhd2F5IGFuZCB3ZSBnZXQgZXJyb3JzLlxuICAgIC8vIFdoZW4gdGhhdCBoYXBwZW5zIHdlJ2xsIGNhdGNoIHRoZSBlcnJvcnMgYW5kIGluZm9ybSB0ZWNoIHRoYXQgaXQncyBub3QgcmVhZHkgYW55IG1vcmUuXG5cblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gdGhpcy50ZWNoX1ttZXRob2RdKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gV2hlbiBidWlsZGluZyBhZGRpdGlvbmFsIHRlY2ggbGlicywgYW4gZXhwZWN0ZWQgbWV0aG9kIG1heSBub3QgYmUgZGVmaW5lZCB5ZXRcbiAgICAgIGlmICh0aGlzLnRlY2hfW21ldGhvZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsb2coXCJWaWRlby5qczogXCIgKyBtZXRob2QgKyBcIiBtZXRob2Qgbm90IGRlZmluZWQgZm9yIFwiICsgdGhpcy50ZWNoTmFtZV8gKyBcIiBwbGF5YmFjayB0ZWNobm9sb2d5LlwiLCBlKTtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH0gLy8gV2hlbiBhIG1ldGhvZCBpc24ndCBhdmFpbGFibGUgb24gdGhlIG9iamVjdCBpdCB0aHJvd3MgYSBUeXBlRXJyb3JcblxuXG4gICAgICBpZiAoZS5uYW1lID09PSAnVHlwZUVycm9yJykge1xuICAgICAgICBsb2coXCJWaWRlby5qczogXCIgKyBtZXRob2QgKyBcIiB1bmF2YWlsYWJsZSBvbiBcIiArIHRoaXMudGVjaE5hbWVfICsgXCIgcGxheWJhY2sgdGVjaG5vbG9neSBlbGVtZW50LlwiLCBlKTtcbiAgICAgICAgdGhpcy50ZWNoXy5pc1JlYWR5XyA9IGZhbHNlO1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfSAvLyBJZiBlcnJvciB1bmtub3duLCBqdXN0IGxvZyBhbmQgdGhyb3dcblxuXG4gICAgICBsb2coZSk7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQXR0ZW1wdCB0byBiZWdpbiBwbGF5YmFjayBhdCB0aGUgZmlyc3Qgb3Bwb3J0dW5pdHkuXG4gICAqXG4gICAqIEByZXR1cm4ge1Byb21pc2V8dW5kZWZpbmVkfVxuICAgKiAgICAgICAgIFJldHVybnMgYSBwcm9taXNlIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIFByb21pc2VzIChvciBvbmVcbiAgICogICAgICAgICB3YXMgcGFzc2VkIGluIGFzIGFuIG9wdGlvbikuIFRoaXMgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIG9uXG4gICAqICAgICAgICAgdGhlIHJldHVybiB2YWx1ZSBvZiBwbGF5LiBJZiB0aGlzIGlzIHVuZGVmaW5lZCBpdCB3aWxsIGZ1bGZpbGwgdGhlXG4gICAqICAgICAgICAgcHJvbWlzZSBjaGFpbiBvdGhlcndpc2UgdGhlIHByb21pc2UgY2hhaW4gd2lsbCBiZSBmdWxmaWxsZWQgd2hlblxuICAgKiAgICAgICAgIHRoZSBwcm9taXNlIGZyb20gcGxheSBpcyBmdWxmaWxsZWQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBsYXkgPSBmdW5jdGlvbiBwbGF5KCkge1xuICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgdmFyIFByb21pc2VDbGFzcyA9IHRoaXMub3B0aW9uc18uUHJvbWlzZSB8fCB3aW5kb3ckMS5Qcm9taXNlO1xuXG4gICAgaWYgKFByb21pc2VDbGFzcykge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlQ2xhc3MoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgX3RoaXM4LnBsYXlfKHJlc29sdmUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucGxheV8oKTtcbiAgfVxuICAvKipcbiAgICogVGhlIGFjdHVhbCBsb2dpYyBmb3IgcGxheSwgdGFrZXMgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgb24gdGhlXG4gICAqIHJldHVybiB2YWx1ZSBvZiBwbGF5LiBUaGlzIGFsbG93cyB1cyB0byByZXNvbHZlIHRvIHRoZSBwbGF5IHByb21pc2UgaWYgdGhlcmVcbiAgICogaXMgb25lIG9uIG1vZGVybiBicm93c2Vycy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXVxuICAgKiAgICAgICAgVGhlIGNhbGxiYWNrIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIHRoZSB0ZWNocyBwbGF5IGlzIGFjdHVhbGx5IGNhbGxlZFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wbGF5XyA9IGZ1bmN0aW9uIHBsYXlfKGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzOSA9IHRoaXM7XG5cbiAgICBpZiAoY2FsbGJhY2sgPT09IHZvaWQgMCkge1xuICAgICAgY2FsbGJhY2sgPSBzaWxlbmNlUHJvbWlzZTtcbiAgICB9XG5cbiAgICB0aGlzLnBsYXlDYWxsYmFja3NfLnB1c2goY2FsbGJhY2spO1xuICAgIHZhciBpc1NyY1JlYWR5ID0gQm9vbGVhbighdGhpcy5jaGFuZ2luZ1NyY18gJiYgKHRoaXMuc3JjKCkgfHwgdGhpcy5jdXJyZW50U3JjKCkpKTsgLy8gdHJlYXQgY2FsbHMgdG8gcGxheV8gc29tZXdoYXQgbGlrZSB0aGUgYG9uZWAgZXZlbnQgZnVuY3Rpb25cblxuICAgIGlmICh0aGlzLndhaXRUb1BsYXlfKSB7XG4gICAgICB0aGlzLm9mZihbJ3JlYWR5JywgJ2xvYWRzdGFydCddLCB0aGlzLndhaXRUb1BsYXlfKTtcbiAgICAgIHRoaXMud2FpdFRvUGxheV8gPSBudWxsO1xuICAgIH0gLy8gaWYgdGhlIHBsYXllci90ZWNoIGlzIG5vdCByZWFkeSBvciB0aGUgc3JjIGl0c2VsZiBpcyBub3QgcmVhZHlcbiAgICAvLyBxdWV1ZSB1cCBhIGNhbGwgdG8gcGxheSBvbiBgcmVhZHlgIG9yIGBsb2Fkc3RhcnRgXG5cblxuICAgIGlmICghdGhpcy5pc1JlYWR5XyB8fCAhaXNTcmNSZWFkeSkge1xuICAgICAgdGhpcy53YWl0VG9QbGF5XyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIF90aGlzOS5wbGF5XygpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5vbmUoWydyZWFkeScsICdsb2Fkc3RhcnQnXSwgdGhpcy53YWl0VG9QbGF5Xyk7IC8vIGlmIHdlIGFyZSBpbiBTYWZhcmksIHRoZXJlIGlzIGEgaGlnaCBjaGFuY2UgdGhhdCBsb2Fkc3RhcnQgd2lsbCB0cmlnZ2VyIGFmdGVyIHRoZSBnZXN0dXJlIHRpbWVwZXJpb2RcbiAgICAgIC8vIGluIHRoYXQgY2FzZSwgd2UgbmVlZCB0byBwcmltZSB0aGUgdmlkZW8gZWxlbWVudCBieSBjYWxsaW5nIGxvYWQgc28gaXQnbGwgYmUgcmVhZHkgaW4gdGltZVxuXG4gICAgICBpZiAoIWlzU3JjUmVhZHkgJiYgKElTX0FOWV9TQUZBUkkgfHwgSVNfSU9TKSkge1xuICAgICAgICB0aGlzLmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gSWYgdGhlIHBsYXllci90ZWNoIGlzIHJlYWR5IGFuZCB3ZSBoYXZlIGEgc291cmNlLCB3ZSBjYW4gYXR0ZW1wdCBwbGF5YmFjay5cblxuXG4gICAgdmFyIHZhbCA9IHRoaXMudGVjaEdldF8oJ3BsYXknKTsgLy8gcGxheSB3YXMgdGVybWluYXRlZCBpZiB0aGUgcmV0dXJuZWQgdmFsdWUgaXMgbnVsbFxuXG4gICAgaWYgKHZhbCA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5ydW5QbGF5VGVybWluYXRlZFF1ZXVlXygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJ1blBsYXlDYWxsYmFja3NfKHZhbCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBUaGVzZSBmdW5jdGlvbnMgd2lsbCBiZSBydW4gd2hlbiBpZiBwbGF5IGlzIHRlcm1pbmF0ZWQuIElmIHBsYXlcbiAgICogcnVuUGxheUNhbGxiYWNrc18gaXMgcnVuIHRoZXNlIGZ1bmN0aW9uIHdpbGwgbm90IGJlIHJ1bi4gVGhpcyBhbGxvd3MgdXNcbiAgICogdG8gZGlmZmVyZW5jaWF0ZSBiZXR3ZWVuIGEgdGVybWluYXRlZCBwbGF5IGFuZCBhbiBhY3R1YWwgY2FsbCB0byBwbGF5LlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5ydW5QbGF5VGVybWluYXRlZFF1ZXVlXyA9IGZ1bmN0aW9uIHJ1blBsYXlUZXJtaW5hdGVkUXVldWVfKCkge1xuICAgIHZhciBxdWV1ZSA9IHRoaXMucGxheVRlcm1pbmF0ZWRRdWV1ZV8uc2xpY2UoMCk7XG4gICAgdGhpcy5wbGF5VGVybWluYXRlZFF1ZXVlXyA9IFtdO1xuICAgIHF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKHEpIHtcbiAgICAgIHEoKTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogV2hlbiBhIGNhbGxiYWNrIHRvIHBsYXkgaXMgZGVsYXllZCB3ZSBoYXZlIHRvIHJ1biB0aGVzZVxuICAgKiBjYWxsYmFja3Mgd2hlbiBwbGF5IGlzIGFjdHVhbGx5IGNhbGxlZCBvbiB0aGUgdGVjaC4gVGhpcyBmdW5jdGlvblxuICAgKiBydW5zIHRoZSBjYWxsYmFja3MgdGhhdCB3ZXJlIGRlbGF5ZWQgYW5kIGFjY2VwdHMgdGhlIHJldHVybiB2YWx1ZVxuICAgKiBmcm9tIHRoZSB0ZWNoLlxuICAgKlxuICAgKiBAcGFyYW0ge3VuZGVmaW5lZHxQcm9taXNlfSB2YWxcbiAgICogICAgICAgIFRoZSByZXR1cm4gdmFsdWUgZnJvbSB0aGUgdGVjaC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucnVuUGxheUNhbGxiYWNrc18gPSBmdW5jdGlvbiBydW5QbGF5Q2FsbGJhY2tzXyh2YWwpIHtcbiAgICB2YXIgY2FsbGJhY2tzID0gdGhpcy5wbGF5Q2FsbGJhY2tzXy5zbGljZSgwKTtcbiAgICB0aGlzLnBsYXlDYWxsYmFja3NfID0gW107IC8vIGNsZWFyIHBsYXkgdGVybWluYXRlZFF1ZXVlIHNpbmNlIHdlIGZpbmlzaGVkIGEgcmVhbCBwbGF5XG5cbiAgICB0aGlzLnBsYXlUZXJtaW5hdGVkUXVldWVfID0gW107XG4gICAgY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7XG4gICAgICBjYih2YWwpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBQYXVzZSB0aGUgdmlkZW8gcGxheWJhY2tcbiAgICpcbiAgICogQHJldHVybiB7UGxheWVyfVxuICAgKiAgICAgICAgIEEgcmVmZXJlbmNlIHRvIHRoZSBwbGF5ZXIgb2JqZWN0IHRoaXMgZnVuY3Rpb24gd2FzIGNhbGxlZCBvblxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wYXVzZSA9IGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIHRoaXMudGVjaENhbGxfKCdwYXVzZScpO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgcGxheWVyIGlzIHBhdXNlZCBvciBoYXMgeWV0IHRvIHBsYXlcbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICAtIGZhbHNlOiBpZiB0aGUgbWVkaWEgaXMgY3VycmVudGx5IHBsYXlpbmdcbiAgICogICAgICAgICAtIHRydWU6IGlmIG1lZGlhIGlzIG5vdCBjdXJyZW50bHkgcGxheWluZ1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wYXVzZWQgPSBmdW5jdGlvbiBwYXVzZWQoKSB7XG4gICAgLy8gVGhlIGluaXRpYWwgc3RhdGUgb2YgcGF1c2VkIHNob3VsZCBiZSB0cnVlIChpbiBTYWZhcmkgaXQncyBhY3R1YWxseSBmYWxzZSlcbiAgICByZXR1cm4gdGhpcy50ZWNoR2V0XygncGF1c2VkJykgPT09IGZhbHNlID8gZmFsc2UgOiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBUaW1lUmFuZ2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCByYW5nZXMgb2YgdGltZSB0aGF0IHRoZSB1c2VyXG4gICAqIGhhcyBwbGF5ZWQuXG4gICAqXG4gICAqIEByZXR1cm4ge1RpbWVSYW5nZX1cbiAgICogICAgICAgICBBIHRpbWUgcmFuZ2Ugb2JqZWN0IHRoYXQgcmVwcmVzZW50cyBhbGwgdGhlIGluY3JlbWVudHMgb2YgdGltZSB0aGF0IGhhdmVcbiAgICogICAgICAgICBiZWVuIHBsYXllZC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGxheWVkID0gZnVuY3Rpb24gcGxheWVkKCkge1xuICAgIHJldHVybiB0aGlzLnRlY2hHZXRfKCdwbGF5ZWQnKSB8fCBjcmVhdGVUaW1lUmFuZ2VzKDAsIDApO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSB1c2VyIGlzIFwic2NydWJiaW5nXCIuIFNjcnViYmluZyBpc1xuICAgKiB3aGVuIHRoZSB1c2VyIGhhcyBjbGlja2VkIHRoZSBwcm9ncmVzcyBiYXIgaGFuZGxlIGFuZCBpc1xuICAgKiBkcmFnZ2luZyBpdCBhbG9uZyB0aGUgcHJvZ3Jlc3MgYmFyLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc1NjcnViYmluZ11cbiAgICogICAgICAgIHdoZXRoZXIgdGhlIHVzZXIgaXMgb3IgaXMgbm90IHNjcnViYmluZ1xuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIFRoZSB2YWx1ZSBvZiBzY3J1YmJpbmcgd2hlbiBnZXR0aW5nXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnNjcnViYmluZyA9IGZ1bmN0aW9uIHNjcnViYmluZyhpc1NjcnViYmluZykge1xuICAgIGlmICh0eXBlb2YgaXNTY3J1YmJpbmcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4gdGhpcy5zY3J1YmJpbmdfO1xuICAgIH1cblxuICAgIHRoaXMuc2NydWJiaW5nXyA9ICEhaXNTY3J1YmJpbmc7XG5cbiAgICBpZiAoaXNTY3J1YmJpbmcpIHtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1zY3J1YmJpbmcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLXNjcnViYmluZycpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IG9yIHNldCB0aGUgY3VycmVudCB0aW1lIChpbiBzZWNvbmRzKVxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IFtzZWNvbmRzXVxuICAgKiAgICAgICAgVGhlIHRpbWUgdG8gc2VlayB0byBpbiBzZWNvbmRzXG4gICAqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICAtIHRoZSBjdXJyZW50IHRpbWUgaW4gc2Vjb25kcyB3aGVuIGdldHRpbmdcbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3VycmVudFRpbWUgPSBmdW5jdGlvbiBjdXJyZW50VGltZShzZWNvbmRzKSB7XG4gICAgaWYgKHR5cGVvZiBzZWNvbmRzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHNlY29uZHMgPCAwKSB7XG4gICAgICAgIHNlY29uZHMgPSAwO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRlY2hDYWxsXygnc2V0Q3VycmVudFRpbWUnLCBzZWNvbmRzKTtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIGNhY2hlIGxhc3QgY3VycmVudFRpbWUgYW5kIHJldHVybi4gZGVmYXVsdCB0byAwIHNlY29uZHNcbiAgICAvL1xuICAgIC8vIENhY2hpbmcgdGhlIGN1cnJlbnRUaW1lIGlzIG1lYW50IHRvIHByZXZlbnQgYSBtYXNzaXZlIGFtb3VudCBvZiByZWFkcyBvbiB0aGUgdGVjaCdzXG4gICAgLy8gY3VycmVudFRpbWUgd2hlbiBzY3J1YmJpbmcsIGJ1dCBtYXkgbm90IHByb3ZpZGUgbXVjaCBwZXJmb3JtYW5jZSBiZW5lZml0IGFmdGVyYWxsLlxuICAgIC8vIFNob3VsZCBiZSB0ZXN0ZWQuIEFsc28gc29tZXRoaW5nIGhhcyB0byByZWFkIHRoZSBhY3R1YWwgY3VycmVudCB0aW1lIG9yIHRoZSBjYWNoZSB3aWxsXG4gICAgLy8gbmV2ZXIgZ2V0IHVwZGF0ZWQuXG5cblxuICAgIHRoaXMuY2FjaGVfLmN1cnJlbnRUaW1lID0gdGhpcy50ZWNoR2V0XygnY3VycmVudFRpbWUnKSB8fCAwO1xuICAgIHJldHVybiB0aGlzLmNhY2hlXy5jdXJyZW50VGltZTtcbiAgfVxuICAvKipcbiAgICogTm9ybWFsbHkgZ2V0cyB0aGUgbGVuZ3RoIGluIHRpbWUgb2YgdGhlIHZpZGVvIGluIHNlY29uZHM7XG4gICAqIGluIGFsbCBidXQgdGhlIHJhcmVzdCB1c2UgY2FzZXMgYW4gYXJndW1lbnQgd2lsbCBOT1QgYmUgcGFzc2VkIHRvIHRoZSBtZXRob2RcbiAgICpcbiAgICogPiAqKk5PVEUqKjogVGhlIHZpZGVvIG11c3QgaGF2ZSBzdGFydGVkIGxvYWRpbmcgYmVmb3JlIHRoZSBkdXJhdGlvbiBjYW4gYmVcbiAgICoga25vd24sIGFuZCBpbiB0aGUgY2FzZSBvZiBGbGFzaCwgbWF5IG5vdCBiZSBrbm93biB1bnRpbCB0aGUgdmlkZW8gc3RhcnRzXG4gICAqIHBsYXlpbmcuXG4gICAqXG4gICAqIEBmaXJlcyBQbGF5ZXIjZHVyYXRpb25jaGFuZ2VcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtzZWNvbmRzXVxuICAgKiAgICAgICAgVGhlIGR1cmF0aW9uIG9mIHRoZSB2aWRlbyB0byBzZXQgaW4gc2Vjb25kc1xuICAgKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqICAgICAgICAgLSBUaGUgZHVyYXRpb24gb2YgdGhlIHZpZGVvIGluIHNlY29uZHMgd2hlbiBnZXR0aW5nXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmR1cmF0aW9uID0gZnVuY3Rpb24gZHVyYXRpb24oc2Vjb25kcykge1xuICAgIGlmIChzZWNvbmRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIHJldHVybiBOYU4gaWYgdGhlIGR1cmF0aW9uIGlzIG5vdCBrbm93blxuICAgICAgcmV0dXJuIHRoaXMuY2FjaGVfLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyB0aGlzLmNhY2hlXy5kdXJhdGlvbiA6IE5hTjtcbiAgICB9XG5cbiAgICBzZWNvbmRzID0gcGFyc2VGbG9hdChzZWNvbmRzKTsgLy8gU3RhbmRhcmRpemUgb24gSW5maW5pdHkgZm9yIHNpZ25hbGluZyB2aWRlbyBpcyBsaXZlXG5cbiAgICBpZiAoc2Vjb25kcyA8IDApIHtcbiAgICAgIHNlY29uZHMgPSBJbmZpbml0eTtcbiAgICB9XG5cbiAgICBpZiAoc2Vjb25kcyAhPT0gdGhpcy5jYWNoZV8uZHVyYXRpb24pIHtcbiAgICAgIC8vIENhY2hlIHRoZSBsYXN0IHNldCB2YWx1ZSBmb3Igb3B0aW1pemVkIHNjcnViYmluZyAoZXNwLiBGbGFzaClcbiAgICAgIHRoaXMuY2FjaGVfLmR1cmF0aW9uID0gc2Vjb25kcztcblxuICAgICAgaWYgKHNlY29uZHMgPT09IEluZmluaXR5KSB7XG4gICAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1saXZlJyk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9uc18ubGl2ZXVpICYmIHRoaXMucGxheWVyXy5saXZlVHJhY2tlcikge1xuICAgICAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1saXZldWknKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWxpdmUnKTtcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWxpdmV1aScpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTmFOKHNlY29uZHMpKSB7XG4gICAgICAgIC8vIERvIG5vdCBmaXJlIGR1cmF0aW9uY2hhbmdlIHVubGVzcyB0aGUgZHVyYXRpb24gdmFsdWUgaXMga25vd24uXG4gICAgICAgIC8vIEBzZWUgW1NwZWNde0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDExL1dELWh0bWw1LTIwMTEwMTEzL3ZpZGVvLmh0bWwjbWVkaWEtZWxlbWVudC1sb2FkLWFsZ29yaXRobX1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGV2ZW50IFBsYXllciNkdXJhdGlvbmNoYW5nZVxuICAgICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2R1cmF0aW9uY2hhbmdlJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIGhvdyBtdWNoIHRpbWUgaXMgbGVmdCBpbiB0aGUgdmlkZW8uIE5vdCBwYXJ0XG4gICAqIG9mIHRoZSBuYXRpdmUgdmlkZW8gQVBJLlxuICAgKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqICAgICAgICAgVGhlIHRpbWUgcmVtYWluaW5nIGluIHNlY29uZHNcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVtYWluaW5nVGltZSA9IGZ1bmN0aW9uIHJlbWFpbmluZ1RpbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZHVyYXRpb24oKSAtIHRoaXMuY3VycmVudFRpbWUoKTtcbiAgfVxuICAvKipcbiAgICogQSByZW1haW5pbmcgdGltZSBmdW5jdGlvbiB0aGF0IGlzIGludGVudGVkIHRvIGJlIHVzZWQgd2hlblxuICAgKiB0aGUgdGltZSBpcyB0byBiZSBkaXNwbGF5ZWQgZGlyZWN0bHkgdG8gdGhlIHVzZXIuXG4gICAqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICBUaGUgcm91bmRlZCB0aW1lIHJlbWFpbmluZyBpbiBzZWNvbmRzXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlbWFpbmluZ1RpbWVEaXNwbGF5ID0gZnVuY3Rpb24gcmVtYWluaW5nVGltZURpc3BsYXkoKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5kdXJhdGlvbigpKSAtIE1hdGguZmxvb3IodGhpcy5jdXJyZW50VGltZSgpKTtcbiAgfSAvL1xuICAvLyBLaW5kIG9mIGxpa2UgYW4gYXJyYXkgb2YgcG9ydGlvbnMgb2YgdGhlIHZpZGVvIHRoYXQgaGF2ZSBiZWVuIGRvd25sb2FkZWQuXG5cbiAgLyoqXG4gICAqIEdldCBhIFRpbWVSYW5nZSBvYmplY3Qgd2l0aCBhbiBhcnJheSBvZiB0aGUgdGltZXMgb2YgdGhlIHZpZGVvXG4gICAqIHRoYXQgaGF2ZSBiZWVuIGRvd25sb2FkZWQuIElmIHlvdSBqdXN0IHdhbnQgdGhlIHBlcmNlbnQgb2YgdGhlXG4gICAqIHZpZGVvIHRoYXQncyBiZWVuIGRvd25sb2FkZWQsIHVzZSBidWZmZXJlZFBlcmNlbnQuXG4gICAqXG4gICAqIEBzZWUgW0J1ZmZlcmVkIFNwZWNde0BsaW5rIGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMvdmlkZW8uaHRtbCNkb20tbWVkaWEtYnVmZmVyZWR9XG4gICAqXG4gICAqIEByZXR1cm4ge1RpbWVSYW5nZX1cbiAgICogICAgICAgICBBIG1vY2sgVGltZVJhbmdlIG9iamVjdCAoZm9sbG93aW5nIEhUTUwgc3BlYylcbiAgICovXG4gIDtcblxuICBfcHJvdG8uYnVmZmVyZWQgPSBmdW5jdGlvbiBidWZmZXJlZCgpIHtcbiAgICB2YXIgYnVmZmVyZWQgPSB0aGlzLnRlY2hHZXRfKCdidWZmZXJlZCcpO1xuXG4gICAgaWYgKCFidWZmZXJlZCB8fCAhYnVmZmVyZWQubGVuZ3RoKSB7XG4gICAgICBidWZmZXJlZCA9IGNyZWF0ZVRpbWVSYW5nZXMoMCwgMCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1ZmZlcmVkO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHBlcmNlbnQgKGFzIGEgZGVjaW1hbCkgb2YgdGhlIHZpZGVvIHRoYXQncyBiZWVuIGRvd25sb2FkZWQuXG4gICAqIFRoaXMgbWV0aG9kIGlzIG5vdCBhIHBhcnQgb2YgdGhlIG5hdGl2ZSBIVE1MIHZpZGVvIEFQSS5cbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIEEgZGVjaW1hbCBiZXR3ZWVuIDAgYW5kIDEgcmVwcmVzZW50aW5nIHRoZSBwZXJjZW50XG4gICAqICAgICAgICAgdGhhdCBpcyBidWZmZXJlZCAwIGJlaW5nIDAlIGFuZCAxIGJlaW5nIDEwMCVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uYnVmZmVyZWRQZXJjZW50ID0gZnVuY3Rpb24gYnVmZmVyZWRQZXJjZW50JCQxKCkge1xuICAgIHJldHVybiBidWZmZXJlZFBlcmNlbnQodGhpcy5idWZmZXJlZCgpLCB0aGlzLmR1cmF0aW9uKCkpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGVuZGluZyB0aW1lIG9mIHRoZSBsYXN0IGJ1ZmZlcmVkIHRpbWUgcmFuZ2VcbiAgICogVGhpcyBpcyB1c2VkIGluIHRoZSBwcm9ncmVzcyBiYXIgdG8gZW5jYXBzdWxhdGUgYWxsIHRpbWUgcmFuZ2VzLlxuICAgKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqICAgICAgICAgVGhlIGVuZCBvZiB0aGUgbGFzdCBidWZmZXJlZCB0aW1lIHJhbmdlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmJ1ZmZlcmVkRW5kID0gZnVuY3Rpb24gYnVmZmVyZWRFbmQoKSB7XG4gICAgdmFyIGJ1ZmZlcmVkID0gdGhpcy5idWZmZXJlZCgpO1xuICAgIHZhciBkdXJhdGlvbiA9IHRoaXMuZHVyYXRpb24oKTtcbiAgICB2YXIgZW5kID0gYnVmZmVyZWQuZW5kKGJ1ZmZlcmVkLmxlbmd0aCAtIDEpO1xuXG4gICAgaWYgKGVuZCA+IGR1cmF0aW9uKSB7XG4gICAgICBlbmQgPSBkdXJhdGlvbjtcbiAgICB9XG5cbiAgICByZXR1cm4gZW5kO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgb3Igc2V0IHRoZSBjdXJyZW50IHZvbHVtZSBvZiB0aGUgbWVkaWFcbiAgICpcbiAgICogQHBhcmFtICB7bnVtYmVyfSBbcGVyY2VudEFzRGVjaW1hbF1cbiAgICogICAgICAgICBUaGUgbmV3IHZvbHVtZSBhcyBhIGRlY2ltYWwgcGVyY2VudDpcbiAgICogICAgICAgICAtIDAgaXMgbXV0ZWQvMCUvb2ZmXG4gICAqICAgICAgICAgLSAxLjAgaXMgMTAwJS9mdWxsXG4gICAqICAgICAgICAgLSAwLjUgaXMgaGFsZiB2b2x1bWUgb3IgNTAlXG4gICAqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICBUaGUgY3VycmVudCB2b2x1bWUgYXMgYSBwZXJjZW50IHdoZW4gZ2V0dGluZ1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by52b2x1bWUgPSBmdW5jdGlvbiB2b2x1bWUocGVyY2VudEFzRGVjaW1hbCkge1xuICAgIHZhciB2b2w7XG5cbiAgICBpZiAocGVyY2VudEFzRGVjaW1hbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBGb3JjZSB2YWx1ZSB0byBiZXR3ZWVuIDAgYW5kIDFcbiAgICAgIHZvbCA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHBhcnNlRmxvYXQocGVyY2VudEFzRGVjaW1hbCkpKTtcbiAgICAgIHRoaXMuY2FjaGVfLnZvbHVtZSA9IHZvbDtcbiAgICAgIHRoaXMudGVjaENhbGxfKCdzZXRWb2x1bWUnLCB2b2wpO1xuXG4gICAgICBpZiAodm9sID4gMCkge1xuICAgICAgICB0aGlzLmxhc3RWb2x1bWVfKHZvbCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9IC8vIERlZmF1bHQgdG8gMSB3aGVuIHJldHVybmluZyBjdXJyZW50IHZvbHVtZS5cblxuXG4gICAgdm9sID0gcGFyc2VGbG9hdCh0aGlzLnRlY2hHZXRfKCd2b2x1bWUnKSk7XG4gICAgcmV0dXJuIGlzTmFOKHZvbCkgPyAxIDogdm9sO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgbXV0ZWQgc3RhdGUsIG9yIHR1cm4gbXV0ZSBvbiBvciBvZmZcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbbXV0ZWRdXG4gICAqICAgICAgICAtIHRydWUgdG8gbXV0ZVxuICAgKiAgICAgICAgLSBmYWxzZSB0byB1bm11dGVcbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICAtIHRydWUgaWYgbXV0ZSBpcyBvbiBhbmQgZ2V0dGluZ1xuICAgKiAgICAgICAgIC0gZmFsc2UgaWYgbXV0ZSBpcyBvZmYgYW5kIGdldHRpbmdcbiAgICovXG4gIDtcblxuICBfcHJvdG8ubXV0ZWQgPSBmdW5jdGlvbiBtdXRlZChfbXV0ZWQpIHtcbiAgICBpZiAoX211dGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMudGVjaENhbGxfKCdzZXRNdXRlZCcsIF9tdXRlZCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMudGVjaEdldF8oJ211dGVkJykgfHwgZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCBkZWZhdWx0TXV0ZWQgc3RhdGUsIG9yIHR1cm4gZGVmYXVsdE11dGVkIG9uIG9yIG9mZi4gZGVmYXVsdE11dGVkXG4gICAqIGluZGljYXRlcyB0aGUgc3RhdGUgb2YgbXV0ZWQgb24gaW5pdGlhbCBwbGF5YmFjay5cbiAgICpcbiAgICogYGBganNcbiAgICogICB2YXIgbXlQbGF5ZXIgPSB2aWRlb2pzKCdzb21lLXBsYXllci1pZCcpO1xuICAgKlxuICAgKiAgIG15UGxheWVyLnNyYyhcImh0dHA6Ly93d3cuZXhhbXBsZS5jb20vcGF0aC90by92aWRlby5tcDRcIik7XG4gICAqXG4gICAqICAgLy8gZ2V0LCBzaG91bGQgYmUgZmFsc2VcbiAgICogICBjb25zb2xlLmxvZyhteVBsYXllci5kZWZhdWx0TXV0ZWQoKSk7XG4gICAqICAgLy8gc2V0IHRvIHRydWVcbiAgICogICBteVBsYXllci5kZWZhdWx0TXV0ZWQodHJ1ZSk7XG4gICAqICAgLy8gZ2V0IHNob3VsZCBiZSB0cnVlXG4gICAqICAgY29uc29sZS5sb2cobXlQbGF5ZXIuZGVmYXVsdE11dGVkKCkpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbZGVmYXVsdE11dGVkXVxuICAgKiAgICAgICAgLSB0cnVlIHRvIG11dGVcbiAgICogICAgICAgIC0gZmFsc2UgdG8gdW5tdXRlXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW58UGxheWVyfVxuICAgKiAgICAgICAgIC0gdHJ1ZSBpZiBkZWZhdWx0TXV0ZWQgaXMgb24gYW5kIGdldHRpbmdcbiAgICogICAgICAgICAtIGZhbHNlIGlmIGRlZmF1bHRNdXRlZCBpcyBvZmYgYW5kIGdldHRpbmdcbiAgICogICAgICAgICAtIEEgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHBsYXllciB3aGVuIHNldHRpbmdcbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGVmYXVsdE11dGVkID0gZnVuY3Rpb24gZGVmYXVsdE11dGVkKF9kZWZhdWx0TXV0ZWQpIHtcbiAgICBpZiAoX2RlZmF1bHRNdXRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZWNoQ2FsbF8oJ3NldERlZmF1bHRNdXRlZCcsIF9kZWZhdWx0TXV0ZWQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnRlY2hHZXRfKCdkZWZhdWx0TXV0ZWQnKSB8fCBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBsYXN0IHZvbHVtZSwgb3Igc2V0IGl0XG4gICAqXG4gICAqIEBwYXJhbSAge251bWJlcn0gW3BlcmNlbnRBc0RlY2ltYWxdXG4gICAqICAgICAgICAgVGhlIG5ldyBsYXN0IHZvbHVtZSBhcyBhIGRlY2ltYWwgcGVyY2VudDpcbiAgICogICAgICAgICAtIDAgaXMgbXV0ZWQvMCUvb2ZmXG4gICAqICAgICAgICAgLSAxLjAgaXMgMTAwJS9mdWxsXG4gICAqICAgICAgICAgLSAwLjUgaXMgaGFsZiB2b2x1bWUgb3IgNTAlXG4gICAqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogICAgICAgICB0aGUgY3VycmVudCB2YWx1ZSBvZiBsYXN0Vm9sdW1lIGFzIGEgcGVyY2VudCB3aGVuIGdldHRpbmdcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8ubGFzdFZvbHVtZV8gPSBmdW5jdGlvbiBsYXN0Vm9sdW1lXyhwZXJjZW50QXNEZWNpbWFsKSB7XG4gICAgaWYgKHBlcmNlbnRBc0RlY2ltYWwgIT09IHVuZGVmaW5lZCAmJiBwZXJjZW50QXNEZWNpbWFsICE9PSAwKSB7XG4gICAgICB0aGlzLmNhY2hlXy5sYXN0Vm9sdW1lID0gcGVyY2VudEFzRGVjaW1hbDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jYWNoZV8ubGFzdFZvbHVtZTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgY3VycmVudCB0ZWNoIGNhbiBzdXBwb3J0IG5hdGl2ZSBmdWxsc2NyZWVuXG4gICAqIChlLmcuIHdpdGggYnVpbHQgaW4gY29udHJvbHMgbGlrZSBpT1MsIHNvIG5vdCBvdXIgZmxhc2ggc3dmKVxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIGlmIG5hdGl2ZSBmdWxsc2NyZWVuIGlzIHN1cHBvcnRlZFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5zdXBwb3J0c0Z1bGxTY3JlZW4gPSBmdW5jdGlvbiBzdXBwb3J0c0Z1bGxTY3JlZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMudGVjaEdldF8oJ3N1cHBvcnRzRnVsbFNjcmVlbicpIHx8IGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgcGxheWVyIGlzIGluIGZ1bGxzY3JlZW4gbW9kZSBvciB0ZWxsIHRoZSBwbGF5ZXIgdGhhdCBpdFxuICAgKiBpcyBvciBpcyBub3QgaW4gZnVsbHNjcmVlbiBtb2RlLlxuICAgKlxuICAgKiA+IE5PVEU6IEFzIG9mIHRoZSBsYXRlc3QgSFRNTDUgc3BlYywgaXNGdWxsc2NyZWVuIGlzIG5vIGxvbmdlciBhbiBvZmZpY2lhbFxuICAgKiBwcm9wZXJ0eSBhbmQgaW5zdGVhZCBkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCBpcyB1c2VkLiBCdXQgaXNGdWxsc2NyZWVuIGlzXG4gICAqIHN0aWxsIGEgdmFsdWFibGUgcHJvcGVydHkgZm9yIGludGVybmFsIHBsYXllciB3b3JraW5ncy5cbiAgICpcbiAgICogQHBhcmFtICB7Ym9vbGVhbn0gW2lzRlNdXG4gICAqICAgICAgICAgU2V0IHRoZSBwbGF5ZXJzIGN1cnJlbnQgZnVsbHNjcmVlbiBzdGF0ZVxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIC0gdHJ1ZSBpZiBmdWxsc2NyZWVuIGlzIG9uIGFuZCBnZXR0aW5nXG4gICAqICAgICAgICAgLSBmYWxzZSBpZiBmdWxsc2NyZWVuIGlzIG9mZiBhbmQgZ2V0dGluZ1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5pc0Z1bGxzY3JlZW4gPSBmdW5jdGlvbiBpc0Z1bGxzY3JlZW4oaXNGUykge1xuICAgIGlmIChpc0ZTICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaXNGdWxsc2NyZWVuXyA9ICEhaXNGUztcbiAgICAgIHRoaXMudG9nZ2xlRnVsbHNjcmVlbkNsYXNzXygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiAhIXRoaXMuaXNGdWxsc2NyZWVuXztcbiAgfVxuICAvKipcbiAgICogSW5jcmVhc2UgdGhlIHNpemUgb2YgdGhlIHZpZGVvIHRvIGZ1bGwgc2NyZWVuXG4gICAqIEluIHNvbWUgYnJvd3NlcnMsIGZ1bGwgc2NyZWVuIGlzIG5vdCBzdXBwb3J0ZWQgbmF0aXZlbHksIHNvIGl0IGVudGVyc1xuICAgKiBcImZ1bGwgd2luZG93IG1vZGVcIiwgd2hlcmUgdGhlIHZpZGVvIGZpbGxzIHRoZSBicm93c2VyIHdpbmRvdy5cbiAgICogSW4gYnJvd3NlcnMgYW5kIGRldmljZXMgdGhhdCBzdXBwb3J0IG5hdGl2ZSBmdWxsIHNjcmVlbiwgc29tZXRpbWVzIHRoZVxuICAgKiBicm93c2VyJ3MgZGVmYXVsdCBjb250cm9scyB3aWxsIGJlIHNob3duLCBhbmQgbm90IHRoZSBWaWRlby5qcyBjdXN0b20gc2tpbi5cbiAgICogVGhpcyBpbmNsdWRlcyBtb3N0IG1vYmlsZSBkZXZpY2VzIChpT1MsIEFuZHJvaWQpIGFuZCBvbGRlciB2ZXJzaW9ucyBvZlxuICAgKiBTYWZhcmkuXG4gICAqXG4gICAqIEBmaXJlcyBQbGF5ZXIjZnVsbHNjcmVlbmNoYW5nZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5yZXF1ZXN0RnVsbHNjcmVlbiA9IGZ1bmN0aW9uIHJlcXVlc3RGdWxsc2NyZWVuKCkge1xuICAgIHZhciBmc0FwaSA9IEZ1bGxzY3JlZW5BcGk7XG4gICAgdGhpcy5pc0Z1bGxzY3JlZW4odHJ1ZSk7XG5cbiAgICBpZiAoZnNBcGkucmVxdWVzdEZ1bGxzY3JlZW4pIHtcbiAgICAgIC8vIHRoZSBicm93c2VyIHN1cHBvcnRzIGdvaW5nIGZ1bGxzY3JlZW4gYXQgdGhlIGVsZW1lbnQgbGV2ZWwgc28gd2UgY2FuXG4gICAgICAvLyB0YWtlIHRoZSBjb250cm9scyBmdWxsc2NyZWVuIGFzIHdlbGwgYXMgdGhlIHZpZGVvXG4gICAgICAvLyBUcmlnZ2VyIGZ1bGxzY3JlZW5jaGFuZ2UgZXZlbnQgYWZ0ZXIgY2hhbmdlXG4gICAgICAvLyBXZSBoYXZlIHRvIHNwZWNpZmljYWxseSBhZGQgdGhpcyBlYWNoIHRpbWUsIGFuZCByZW1vdmVcbiAgICAgIC8vIHdoZW4gY2FuY2VsaW5nIGZ1bGxzY3JlZW4uIE90aGVyd2lzZSBpZiB0aGVyZSdzIG11bHRpcGxlXG4gICAgICAvLyBwbGF5ZXJzIG9uIGEgcGFnZSwgdGhleSB3b3VsZCBhbGwgYmUgcmVhY3RpbmcgdG8gdGhlIHNhbWUgZnVsbHNjcmVlblxuICAgICAgLy8gZXZlbnRzXG4gICAgICBvbihkb2N1bWVudCwgZnNBcGkuZnVsbHNjcmVlbmNoYW5nZSwgdGhpcy5ib3VuZERvY3VtZW50RnVsbHNjcmVlbkNoYW5nZV8pO1xuICAgICAgdGhpcy5lbF9bZnNBcGkucmVxdWVzdEZ1bGxzY3JlZW5dKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnRlY2hfLnN1cHBvcnRzRnVsbFNjcmVlbigpKSB7XG4gICAgICAvLyB3ZSBjYW4ndCB0YWtlIHRoZSB2aWRlby5qcyBjb250cm9scyBmdWxsc2NyZWVuIGJ1dCB3ZSBjYW4gZ28gZnVsbHNjcmVlblxuICAgICAgLy8gd2l0aCBuYXRpdmUgY29udHJvbHNcbiAgICAgIHRoaXMudGVjaENhbGxfKCdlbnRlckZ1bGxTY3JlZW4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZnVsbHNjcmVlbiBpc24ndCBzdXBwb3J0ZWQgc28gd2UnbGwganVzdCBzdHJldGNoIHRoZSB2aWRlbyBlbGVtZW50IHRvXG4gICAgICAvLyBmaWxsIHRoZSB2aWV3cG9ydFxuICAgICAgdGhpcy5lbnRlckZ1bGxXaW5kb3coKTtcbiAgICAgIC8qKlxuICAgICAgICogQGV2ZW50IFBsYXllciNmdWxsc2NyZWVuY2hhbmdlXG4gICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgKi9cblxuICAgICAgdGhpcy50cmlnZ2VyKCdmdWxsc2NyZWVuY2hhbmdlJyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHZpZGVvIHRvIGl0cyBub3JtYWwgc2l6ZSBhZnRlciBoYXZpbmcgYmVlbiBpbiBmdWxsIHNjcmVlbiBtb2RlXG4gICAqXG4gICAqIEBmaXJlcyBQbGF5ZXIjZnVsbHNjcmVlbmNoYW5nZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5leGl0RnVsbHNjcmVlbiA9IGZ1bmN0aW9uIGV4aXRGdWxsc2NyZWVuKCkge1xuICAgIHZhciBmc0FwaSA9IEZ1bGxzY3JlZW5BcGk7XG4gICAgdGhpcy5pc0Z1bGxzY3JlZW4oZmFsc2UpOyAvLyBDaGVjayBmb3IgYnJvd3NlciBlbGVtZW50IGZ1bGxzY3JlZW4gc3VwcG9ydFxuXG4gICAgaWYgKGZzQXBpLnJlcXVlc3RGdWxsc2NyZWVuKSB7XG4gICAgICBkb2N1bWVudFtmc0FwaS5leGl0RnVsbHNjcmVlbl0oKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMudGVjaF8uc3VwcG9ydHNGdWxsU2NyZWVuKCkpIHtcbiAgICAgIHRoaXMudGVjaENhbGxfKCdleGl0RnVsbFNjcmVlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmV4aXRGdWxsV2luZG93KCk7XG4gICAgICAvKipcbiAgICAgICAqIEBldmVudCBQbGF5ZXIjZnVsbHNjcmVlbmNoYW5nZVxuICAgICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAgICovXG5cbiAgICAgIHRoaXMudHJpZ2dlcignZnVsbHNjcmVlbmNoYW5nZScpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogV2hlbiBmdWxsc2NyZWVuIGlzbid0IHN1cHBvcnRlZCB3ZSBjYW4gc3RyZXRjaCB0aGVcbiAgICogdmlkZW8gY29udGFpbmVyIHRvIGFzIHdpZGUgYXMgdGhlIGJyb3dzZXIgd2lsbCBsZXQgdXMuXG4gICAqXG4gICAqIEBmaXJlcyBQbGF5ZXIjZW50ZXJGdWxsV2luZG93XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmVudGVyRnVsbFdpbmRvdyA9IGZ1bmN0aW9uIGVudGVyRnVsbFdpbmRvdygpIHtcbiAgICB0aGlzLmlzRnVsbFdpbmRvdyA9IHRydWU7IC8vIFN0b3Jpbmcgb3JpZ2luYWwgZG9jIG92ZXJmbG93IHZhbHVlIHRvIHJldHVybiB0byB3aGVuIGZ1bGxzY3JlZW4gaXMgb2ZmXG5cbiAgICB0aGlzLmRvY09yaWdPdmVyZmxvdyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdzsgLy8gQWRkIGxpc3RlbmVyIGZvciBlc2Mga2V5IHRvIGV4aXQgZnVsbHNjcmVlblxuXG4gICAgb24oZG9jdW1lbnQsICdrZXlkb3duJywgdGhpcy5ib3VuZEZ1bGxXaW5kb3dPbkVzY0tleV8pOyAvLyBIaWRlIGFueSBzY3JvbGwgYmFyc1xuXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7IC8vIEFwcGx5IGZ1bGxzY3JlZW4gc3R5bGVzXG5cbiAgICBhZGRDbGFzcyhkb2N1bWVudC5ib2R5LCAndmpzLWZ1bGwtd2luZG93Jyk7XG4gICAgLyoqXG4gICAgICogQGV2ZW50IFBsYXllciNlbnRlckZ1bGxXaW5kb3dcbiAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICovXG5cbiAgICB0aGlzLnRyaWdnZXIoJ2VudGVyRnVsbFdpbmRvdycpO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBmb3IgY2FsbCB0byBlaXRoZXIgZXhpdCBmdWxsIHdpbmRvdyBvclxuICAgKiBmdWxsIHNjcmVlbiBvbiBFU0Mga2V5XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiAgICAgICAgRXZlbnQgdG8gY2hlY2sgZm9yIGtleSBwcmVzc1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5mdWxsV2luZG93T25Fc2NLZXkgPSBmdW5jdGlvbiBmdWxsV2luZG93T25Fc2NLZXkoZXZlbnQpIHtcbiAgICBpZiAoa2V5Y29kZS5pc0V2ZW50S2V5KGV2ZW50LCAnRXNjJykpIHtcbiAgICAgIGlmICh0aGlzLmlzRnVsbHNjcmVlbigpID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuZXhpdEZ1bGxzY3JlZW4oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZXhpdEZ1bGxXaW5kb3coKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEV4aXQgZnVsbCB3aW5kb3dcbiAgICpcbiAgICogQGZpcmVzIFBsYXllciNleGl0RnVsbFdpbmRvd1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5leGl0RnVsbFdpbmRvdyA9IGZ1bmN0aW9uIGV4aXRGdWxsV2luZG93KCkge1xuICAgIHRoaXMuaXNGdWxsV2luZG93ID0gZmFsc2U7XG4gICAgb2ZmKGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuYm91bmRGdWxsV2luZG93T25Fc2NLZXlfKTsgLy8gVW5oaWRlIHNjcm9sbCBiYXJzLlxuXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gdGhpcy5kb2NPcmlnT3ZlcmZsb3c7IC8vIFJlbW92ZSBmdWxsc2NyZWVuIHN0eWxlc1xuXG4gICAgcmVtb3ZlQ2xhc3MoZG9jdW1lbnQuYm9keSwgJ3Zqcy1mdWxsLXdpbmRvdycpOyAvLyBSZXNpemUgdGhlIGJveCwgY29udHJvbGxlciwgYW5kIHBvc3RlciB0byBvcmlnaW5hbCBzaXplc1xuICAgIC8vIHRoaXMucG9zaXRpb25BbGwoKTtcblxuICAgIC8qKlxuICAgICAqIEBldmVudCBQbGF5ZXIjZXhpdEZ1bGxXaW5kb3dcbiAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICovXG5cbiAgICB0aGlzLnRyaWdnZXIoJ2V4aXRGdWxsV2luZG93Jyk7XG4gIH1cbiAgLyoqXG4gICAqIFRoaXMgZ2V0cyBjYWxsZWQgd2hlbiBhIGBQbGF5ZXJgIGdhaW5zIGZvY3VzIHZpYSBhIGBmb2N1c2AgZXZlbnQuXG4gICAqIFR1cm5zIG9uIGxpc3RlbmluZyBmb3IgYGtleWRvd25gIGV2ZW50cy4gV2hlbiB0aGV5IGhhcHBlbiBpdFxuICAgKiBjYWxscyBgdGhpcy5oYW5kbGVLZXlQcmVzc2AuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYGZvY3VzYCBldmVudCB0aGF0IGNhdXNlZCB0aGlzIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZC5cbiAgICpcbiAgICogQGxpc3RlbnMgZm9jdXNcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlRm9jdXMgPSBmdW5jdGlvbiBoYW5kbGVGb2N1cyhldmVudCkge1xuICAgIC8vIGNhbGwgb2ZmIGZpcnN0IHRvIG1ha2Ugc3VyZSB3ZSBkb24ndCBrZWVwIGFkZGluZyBrZXlkb3duIGhhbmRsZXJzXG4gICAgb2ZmKGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuYm91bmRIYW5kbGVLZXlQcmVzc18pO1xuICAgIG9uKGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuYm91bmRIYW5kbGVLZXlQcmVzc18pO1xuICB9XG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhIGBQbGF5ZXJgIGxvc2VzIGZvY3VzLiBUdXJucyBvZmYgdGhlIGxpc3RlbmVyIGZvclxuICAgKiBga2V5ZG93bmAgZXZlbnRzLiBXaGljaCBTdG9wcyBgdGhpcy5oYW5kbGVLZXlQcmVzc2AgZnJvbSBnZXR0aW5nIGNhbGxlZC5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIFRoZSBgYmx1cmAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZSBjYWxsZWQuXG4gICAqXG4gICAqIEBsaXN0ZW5zIGJsdXJcbiAgICovXG4gIDtcblxuICBfcHJvdG8uaGFuZGxlQmx1ciA9IGZ1bmN0aW9uIGhhbmRsZUJsdXIoZXZlbnQpIHtcbiAgICBvZmYoZG9jdW1lbnQsICdrZXlkb3duJywgdGhpcy5ib3VuZEhhbmRsZUtleVByZXNzXyk7XG4gIH1cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRoaXMgUGxheWVyIGhhcyBmb2N1cyBhbmQgYSBrZXkgZ2V0cyBwcmVzc2VkIGRvd24sIG9yIHdoZW5cbiAgICogYW55IENvbXBvbmVudCBvZiB0aGlzIHBsYXllciByZWNlaXZlcyBhIGtleSBwcmVzcyB0aGF0IGl0IGRvZXNuJ3QgaGFuZGxlLlxuICAgKiBUaGlzIGFsbG93cyBwbGF5ZXItd2lkZSBob3RrZXlzIChlaXRoZXIgYXMgZGVmaW5lZCBiZWxvdywgb3Igb3B0aW9uYWxseVxuICAgKiBieSBhbiBleHRlcm5hbCBmdW5jdGlvbikuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnRUYXJnZXR+RXZlbnR9IGV2ZW50XG4gICAqICAgICAgICBUaGUgYGtleWRvd25gIGV2ZW50IHRoYXQgY2F1c2VkIHRoaXMgZnVuY3Rpb24gdG8gYmUgY2FsbGVkLlxuICAgKlxuICAgKiBAbGlzdGVucyBrZXlkb3duXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZUtleVByZXNzID0gZnVuY3Rpb24gaGFuZGxlS2V5UHJlc3MoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zXy51c2VyQWN0aW9ucyAmJiB0aGlzLm9wdGlvbnNfLnVzZXJBY3Rpb25zLmhvdGtleXMgJiYgdGhpcy5vcHRpb25zXy51c2VyQWN0aW9ucy5ob3RrZXlzICE9PSBmYWxzZSkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnNfLnVzZXJBY3Rpb25zLmhvdGtleXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zXy51c2VyQWN0aW9ucy5ob3RrZXlzLmNhbGwodGhpcywgZXZlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5oYW5kbGVIb3RrZXlzKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRoaXMgUGxheWVyIHJlY2VpdmVzIGEgaG90a2V5IGtleWRvd24gZXZlbnQuXG4gICAqIFN1cHBvcnRlZCBwbGF5ZXItd2lkZSBob3RrZXlzIGFyZTpcbiAgICpcbiAgICogICBmICAgICAgICAgIC0gdG9nZ2xlIGZ1bGxzY3JlZW5cbiAgICogICBtICAgICAgICAgIC0gdG9nZ2xlIG11dGVcbiAgICogICBrIG9yIFNwYWNlIC0gdG9nZ2xlIHBsYXkvcGF1c2VcbiAgICpcbiAgICogQHBhcmFtIHtFdmVudFRhcmdldH5FdmVudH0gZXZlbnRcbiAgICogICAgICAgIFRoZSBga2V5ZG93bmAgZXZlbnQgdGhhdCBjYXVzZWQgdGhpcyBmdW5jdGlvbiB0byBiZSBjYWxsZWQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZUhvdGtleXMgPSBmdW5jdGlvbiBoYW5kbGVIb3RrZXlzKGV2ZW50KSB7XG4gICAgdmFyIGhvdGtleXMgPSB0aGlzLm9wdGlvbnNfLnVzZXJBY3Rpb25zID8gdGhpcy5vcHRpb25zXy51c2VyQWN0aW9ucy5ob3RrZXlzIDoge307IC8vIHNldCBmdWxsc2NyZWVuS2V5LCBtdXRlS2V5LCBwbGF5UGF1c2VLZXkgZnJvbSBgaG90a2V5c2AsIHVzZSBkZWZhdWx0cyBpZiBub3Qgc2V0XG5cbiAgICB2YXIgX2hvdGtleXMkZnVsbHNjcmVlbktlID0gaG90a2V5cy5mdWxsc2NyZWVuS2V5LFxuICAgICAgICBmdWxsc2NyZWVuS2V5ID0gX2hvdGtleXMkZnVsbHNjcmVlbktlID09PSB2b2lkIDAgPyBmdW5jdGlvbiAoa2V5ZG93bkV2ZW50KSB7XG4gICAgICByZXR1cm4ga2V5Y29kZS5pc0V2ZW50S2V5KGtleWRvd25FdmVudCwgJ2YnKTtcbiAgICB9IDogX2hvdGtleXMkZnVsbHNjcmVlbktlLFxuICAgICAgICBfaG90a2V5cyRtdXRlS2V5ID0gaG90a2V5cy5tdXRlS2V5LFxuICAgICAgICBtdXRlS2V5ID0gX2hvdGtleXMkbXV0ZUtleSA9PT0gdm9pZCAwID8gZnVuY3Rpb24gKGtleWRvd25FdmVudCkge1xuICAgICAgcmV0dXJuIGtleWNvZGUuaXNFdmVudEtleShrZXlkb3duRXZlbnQsICdtJyk7XG4gICAgfSA6IF9ob3RrZXlzJG11dGVLZXksXG4gICAgICAgIF9ob3RrZXlzJHBsYXlQYXVzZUtleSA9IGhvdGtleXMucGxheVBhdXNlS2V5LFxuICAgICAgICBwbGF5UGF1c2VLZXkgPSBfaG90a2V5cyRwbGF5UGF1c2VLZXkgPT09IHZvaWQgMCA/IGZ1bmN0aW9uIChrZXlkb3duRXZlbnQpIHtcbiAgICAgIHJldHVybiBrZXljb2RlLmlzRXZlbnRLZXkoa2V5ZG93bkV2ZW50LCAnaycpIHx8IGtleWNvZGUuaXNFdmVudEtleShrZXlkb3duRXZlbnQsICdTcGFjZScpO1xuICAgIH0gOiBfaG90a2V5cyRwbGF5UGF1c2VLZXk7XG5cbiAgICBpZiAoZnVsbHNjcmVlbktleS5jYWxsKHRoaXMsIGV2ZW50KSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZhciBGU1RvZ2dsZSA9IENvbXBvbmVudC5nZXRDb21wb25lbnQoJ0Z1bGxzY3JlZW5Ub2dnbGUnKTtcblxuICAgICAgaWYgKGRvY3VtZW50W0Z1bGxzY3JlZW5BcGkuZnVsbHNjcmVlbkVuYWJsZWRdICE9PSBmYWxzZSkge1xuICAgICAgICBGU1RvZ2dsZS5wcm90b3R5cGUuaGFuZGxlQ2xpY2suY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG11dGVLZXkuY2FsbCh0aGlzLCBldmVudCkpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgTXV0ZVRvZ2dsZSA9IENvbXBvbmVudC5nZXRDb21wb25lbnQoJ011dGVUb2dnbGUnKTtcbiAgICAgIE11dGVUb2dnbGUucHJvdG90eXBlLmhhbmRsZUNsaWNrLmNhbGwodGhpcyk7XG4gICAgfSBlbHNlIGlmIChwbGF5UGF1c2VLZXkuY2FsbCh0aGlzLCBldmVudCkpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgUGxheVRvZ2dsZSA9IENvbXBvbmVudC5nZXRDb21wb25lbnQoJ1BsYXlUb2dnbGUnKTtcbiAgICAgIFBsYXlUb2dnbGUucHJvdG90eXBlLmhhbmRsZUNsaWNrLmNhbGwodGhpcyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDaGVjayB3aGV0aGVyIHRoZSBwbGF5ZXIgY2FuIHBsYXkgYSBnaXZlbiBtaW1ldHlwZVxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDExL1dELWh0bWw1LTIwMTEwMTEzL3ZpZGVvLmh0bWwjZG9tLW5hdmlnYXRvci1jYW5wbGF5dHlwZVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICAgKiAgICAgICAgVGhlIG1pbWV0eXBlIHRvIGNoZWNrXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICAncHJvYmFibHknLCAnbWF5YmUnLCBvciAnJyAoZW1wdHkgc3RyaW5nKVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jYW5QbGF5VHlwZSA9IGZ1bmN0aW9uIGNhblBsYXlUeXBlKHR5cGUpIHtcbiAgICB2YXIgY2FuOyAvLyBMb29wIHRocm91Z2ggZWFjaCBwbGF5YmFjayB0ZWNobm9sb2d5IGluIHRoZSBvcHRpb25zIG9yZGVyXG5cbiAgICBmb3IgKHZhciBpID0gMCwgaiA9IHRoaXMub3B0aW9uc18udGVjaE9yZGVyOyBpIDwgai5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHRlY2hOYW1lID0galtpXTtcbiAgICAgIHZhciB0ZWNoID0gVGVjaC5nZXRUZWNoKHRlY2hOYW1lKTsgLy8gU3VwcG9ydCBvbGQgYmVoYXZpb3Igb2YgdGVjaHMgYmVpbmcgcmVnaXN0ZXJlZCBhcyBjb21wb25lbnRzLlxuICAgICAgLy8gUmVtb3ZlIG9uY2UgdGhhdCBkZXByZWNhdGVkIGJlaGF2aW9yIGlzIHJlbW92ZWQuXG5cbiAgICAgIGlmICghdGVjaCkge1xuICAgICAgICB0ZWNoID0gQ29tcG9uZW50LmdldENvbXBvbmVudCh0ZWNoTmFtZSk7XG4gICAgICB9IC8vIENoZWNrIGlmIHRoZSBjdXJyZW50IHRlY2ggaXMgZGVmaW5lZCBiZWZvcmUgY29udGludWluZ1xuXG5cbiAgICAgIGlmICghdGVjaCkge1xuICAgICAgICBsb2cuZXJyb3IoXCJUaGUgXFxcIlwiICsgdGVjaE5hbWUgKyBcIlxcXCIgdGVjaCBpcyB1bmRlZmluZWQuIFNraXBwZWQgYnJvd3NlciBzdXBwb3J0IGNoZWNrIGZvciB0aGF0IHRlY2guXCIpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gLy8gQ2hlY2sgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhpcyB0ZWNobm9sb2d5XG5cblxuICAgICAgaWYgKHRlY2guaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICBjYW4gPSB0ZWNoLmNhblBsYXlUeXBlKHR5cGUpO1xuXG4gICAgICAgIGlmIChjYW4pIHtcbiAgICAgICAgICByZXR1cm4gY2FuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuICcnO1xuICB9XG4gIC8qKlxuICAgKiBTZWxlY3Qgc291cmNlIGJhc2VkIG9uIHRlY2gtb3JkZXIgb3Igc291cmNlLW9yZGVyXG4gICAqIFVzZXMgc291cmNlLW9yZGVyIHNlbGVjdGlvbiBpZiBgb3B0aW9ucy5zb3VyY2VPcmRlcmAgaXMgdHJ1dGh5LiBPdGhlcndpc2UsXG4gICAqIGRlZmF1bHRzIHRvIHRlY2gtb3JkZXIgc2VsZWN0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNvdXJjZXNcbiAgICogICAgICAgIFRoZSBzb3VyY2VzIGZvciBhIG1lZGlhIGFzc2V0XG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdHxib29sZWFufVxuICAgKiAgICAgICAgIE9iamVjdCBvZiBzb3VyY2UgYW5kIHRlY2ggb3JkZXIgb3IgZmFsc2VcbiAgICovXG4gIDtcblxuICBfcHJvdG8uc2VsZWN0U291cmNlID0gZnVuY3Rpb24gc2VsZWN0U291cmNlKHNvdXJjZXMpIHtcbiAgICB2YXIgX3RoaXMxMCA9IHRoaXM7XG5cbiAgICAvLyBHZXQgb25seSB0aGUgdGVjaHMgc3BlY2lmaWVkIGluIGB0ZWNoT3JkZXJgIHRoYXQgZXhpc3QgYW5kIGFyZSBzdXBwb3J0ZWQgYnkgdGhlXG4gICAgLy8gY3VycmVudCBwbGF0Zm9ybVxuICAgIHZhciB0ZWNocyA9IHRoaXMub3B0aW9uc18udGVjaE9yZGVyLm1hcChmdW5jdGlvbiAodGVjaE5hbWUpIHtcbiAgICAgIHJldHVybiBbdGVjaE5hbWUsIFRlY2guZ2V0VGVjaCh0ZWNoTmFtZSldO1xuICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoX3JlZikge1xuICAgICAgdmFyIHRlY2hOYW1lID0gX3JlZlswXSxcbiAgICAgICAgICB0ZWNoID0gX3JlZlsxXTtcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgdGVjaCBpcyBkZWZpbmVkIGJlZm9yZSBjb250aW51aW5nXG4gICAgICBpZiAodGVjaCkge1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0aGlzIHRlY2hub2xvZ3lcbiAgICAgICAgcmV0dXJuIHRlY2guaXNTdXBwb3J0ZWQoKTtcbiAgICAgIH1cblxuICAgICAgbG9nLmVycm9yKFwiVGhlIFxcXCJcIiArIHRlY2hOYW1lICsgXCJcXFwiIHRlY2ggaXMgdW5kZWZpbmVkLiBTa2lwcGVkIGJyb3dzZXIgc3VwcG9ydCBjaGVjayBmb3IgdGhhdCB0ZWNoLlwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTsgLy8gSXRlcmF0ZSBvdmVyIGVhY2ggYGlubmVyQXJyYXlgIGVsZW1lbnQgb25jZSBwZXIgYG91dGVyQXJyYXlgIGVsZW1lbnQgYW5kIGV4ZWN1dGVcbiAgICAvLyBgdGVzdGVyYCB3aXRoIGJvdGguIElmIGB0ZXN0ZXJgIHJldHVybnMgYSBub24tZmFsc3kgdmFsdWUsIGV4aXQgZWFybHkgYW5kIHJldHVyblxuICAgIC8vIHRoYXQgdmFsdWUuXG5cbiAgICB2YXIgZmluZEZpcnN0UGFzc2luZ1RlY2hTb3VyY2VQYWlyID0gZnVuY3Rpb24gZmluZEZpcnN0UGFzc2luZ1RlY2hTb3VyY2VQYWlyKG91dGVyQXJyYXksIGlubmVyQXJyYXksIHRlc3Rlcikge1xuICAgICAgdmFyIGZvdW5kO1xuICAgICAgb3V0ZXJBcnJheS5zb21lKGZ1bmN0aW9uIChvdXRlckNob2ljZSkge1xuICAgICAgICByZXR1cm4gaW5uZXJBcnJheS5zb21lKGZ1bmN0aW9uIChpbm5lckNob2ljZSkge1xuICAgICAgICAgIGZvdW5kID0gdGVzdGVyKG91dGVyQ2hvaWNlLCBpbm5lckNob2ljZSk7XG5cbiAgICAgICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9O1xuXG4gICAgdmFyIGZvdW5kU291cmNlQW5kVGVjaDtcblxuICAgIHZhciBmbGlwID0gZnVuY3Rpb24gZmxpcChmbikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBmbihiLCBhKTtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIHZhciBmaW5kZXIgPSBmdW5jdGlvbiBmaW5kZXIoX3JlZjIsIHNvdXJjZSkge1xuICAgICAgdmFyIHRlY2hOYW1lID0gX3JlZjJbMF0sXG4gICAgICAgICAgdGVjaCA9IF9yZWYyWzFdO1xuXG4gICAgICBpZiAodGVjaC5jYW5QbGF5U291cmNlKHNvdXJjZSwgX3RoaXMxMC5vcHRpb25zX1t0ZWNoTmFtZS50b0xvd2VyQ2FzZSgpXSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzb3VyY2U6IHNvdXJjZSxcbiAgICAgICAgICB0ZWNoOiB0ZWNoTmFtZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07IC8vIERlcGVuZGluZyBvbiB0aGUgdHJ1dGhpbmVzcyBvZiBgb3B0aW9ucy5zb3VyY2VPcmRlcmAsIHdlIHN3YXAgdGhlIG9yZGVyIG9mIHRlY2hzIGFuZCBzb3VyY2VzXG4gICAgLy8gdG8gc2VsZWN0IGZyb20gdGhlbSBiYXNlZCBvbiB0aGVpciBwcmlvcml0eS5cblxuXG4gICAgaWYgKHRoaXMub3B0aW9uc18uc291cmNlT3JkZXIpIHtcbiAgICAgIC8vIFNvdXJjZS1maXJzdCBvcmRlcmluZ1xuICAgICAgZm91bmRTb3VyY2VBbmRUZWNoID0gZmluZEZpcnN0UGFzc2luZ1RlY2hTb3VyY2VQYWlyKHNvdXJjZXMsIHRlY2hzLCBmbGlwKGZpbmRlcikpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUZWNoLWZpcnN0IG9yZGVyaW5nXG4gICAgICBmb3VuZFNvdXJjZUFuZFRlY2ggPSBmaW5kRmlyc3RQYXNzaW5nVGVjaFNvdXJjZVBhaXIodGVjaHMsIHNvdXJjZXMsIGZpbmRlcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvdW5kU291cmNlQW5kVGVjaCB8fCBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogR2V0IG9yIHNldCB0aGUgdmlkZW8gc291cmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge1RlY2h+U291cmNlT2JqZWN0fFRlY2h+U291cmNlT2JqZWN0W118c3RyaW5nfSBbc291cmNlXVxuICAgKiAgICAgICAgQSBTb3VyY2VPYmplY3QsIGFuIGFycmF5IG9mIFNvdXJjZU9iamVjdHMsIG9yIGEgc3RyaW5nIHJlZmVyZW5jaW5nXG4gICAqICAgICAgICBhIFVSTCB0byBhIG1lZGlhIHNvdXJjZS4gSXQgaXMgX2hpZ2hseSByZWNvbW1lbmRlZF8gdGhhdCBhbiBvYmplY3RcbiAgICogICAgICAgIG9yIGFycmF5IG9mIG9iamVjdHMgaXMgdXNlZCBoZXJlLCBzbyB0aGF0IHNvdXJjZSBzZWxlY3Rpb25cbiAgICogICAgICAgIGFsZ29yaXRobXMgY2FuIHRha2UgdGhlIGB0eXBlYCBpbnRvIGFjY291bnQuXG4gICAqXG4gICAqICAgICAgICBJZiBub3QgcHJvdmlkZWQsIHRoaXMgbWV0aG9kIGFjdHMgYXMgYSBnZXR0ZXIuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9XG4gICAqICAgICAgICAgSWYgdGhlIGBzb3VyY2VgIGFyZ3VtZW50IGlzIG1pc3NpbmcsIHJldHVybnMgdGhlIGN1cnJlbnQgc291cmNlXG4gICAqICAgICAgICAgVVJMLiBPdGhlcndpc2UsIHJldHVybnMgbm90aGluZy91bmRlZmluZWQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnNyYyA9IGZ1bmN0aW9uIHNyYyhzb3VyY2UpIHtcbiAgICB2YXIgX3RoaXMxMSA9IHRoaXM7XG5cbiAgICAvLyBnZXR0ZXIgdXNhZ2VcbiAgICBpZiAodHlwZW9mIHNvdXJjZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiB0aGlzLmNhY2hlXy5zcmMgfHwgJyc7XG4gICAgfSAvLyBmaWx0ZXIgb3V0IGludmFsaWQgc291cmNlcyBhbmQgdHVybiBvdXIgc291cmNlIGludG9cbiAgICAvLyBhbiBhcnJheSBvZiBzb3VyY2Ugb2JqZWN0c1xuXG5cbiAgICB2YXIgc291cmNlcyA9IGZpbHRlclNvdXJjZShzb3VyY2UpOyAvLyBpZiBhIHNvdXJjZSB3YXMgcGFzc2VkIGluIHRoZW4gaXQgaXMgaW52YWxpZCBiZWNhdXNlXG4gICAgLy8gaXQgd2FzIGZpbHRlcmVkIHRvIGEgemVybyBsZW5ndGggQXJyYXkuIFNvIHdlIGhhdmUgdG9cbiAgICAvLyBzaG93IGFuIGVycm9yXG5cbiAgICBpZiAoIXNvdXJjZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVycm9yKHtcbiAgICAgICAgICBjb2RlOiA0LFxuICAgICAgICAgIG1lc3NhZ2U6IHRoaXMubG9jYWxpemUodGhpcy5vcHRpb25zXy5ub3RTdXBwb3J0ZWRNZXNzYWdlKVxuICAgICAgICB9KTtcbiAgICAgIH0sIDApO1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gaW50aWFsIHNvdXJjZXNcblxuXG4gICAgdGhpcy5jaGFuZ2luZ1NyY18gPSB0cnVlO1xuICAgIHRoaXMuY2FjaGVfLnNvdXJjZXMgPSBzb3VyY2VzO1xuICAgIHRoaXMudXBkYXRlU291cmNlQ2FjaGVzXyhzb3VyY2VzWzBdKTsgLy8gbWlkZGxld2FyZVNvdXJjZSBpcyB0aGUgc291cmNlIGFmdGVyIGl0IGhhcyBiZWVuIGNoYW5nZWQgYnkgbWlkZGxld2FyZVxuXG4gICAgc2V0U291cmNlKHRoaXMsIHNvdXJjZXNbMF0sIGZ1bmN0aW9uIChtaWRkbGV3YXJlU291cmNlLCBtd3MpIHtcbiAgICAgIF90aGlzMTEubWlkZGxld2FyZV8gPSBtd3M7IC8vIHNpbmNlIHNvdXJjZVNldCBpcyBhc3luYyB3ZSBoYXZlIHRvIHVwZGF0ZSB0aGUgY2FjaGUgYWdhaW4gYWZ0ZXIgd2Ugc2VsZWN0IGEgc291cmNlIHNpbmNlXG4gICAgICAvLyB0aGUgc291cmNlIHRoYXQgaXMgc2VsZWN0ZWQgY291bGQgYmUgb3V0IG9mIG9yZGVyIGZyb20gdGhlIGNhY2hlIHVwZGF0ZSBhYm92ZSB0aGlzIGNhbGxiYWNrLlxuXG4gICAgICBfdGhpczExLmNhY2hlXy5zb3VyY2VzID0gc291cmNlcztcblxuICAgICAgX3RoaXMxMS51cGRhdGVTb3VyY2VDYWNoZXNfKG1pZGRsZXdhcmVTb3VyY2UpO1xuXG4gICAgICB2YXIgZXJyID0gX3RoaXMxMS5zcmNfKG1pZGRsZXdhcmVTb3VyY2UpO1xuXG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGlmIChzb3VyY2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMxMS5zcmMoc291cmNlcy5zbGljZSgxKSk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczExLmNoYW5naW5nU3JjXyA9IGZhbHNlOyAvLyBXZSBuZWVkIHRvIHdyYXAgdGhpcyBpbiBhIHRpbWVvdXQgdG8gZ2l2ZSBmb2xrcyBhIGNoYW5jZSB0byBhZGQgZXJyb3IgZXZlbnQgaGFuZGxlcnNcblxuICAgICAgICBfdGhpczExLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMuZXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogNCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMubG9jYWxpemUodGhpcy5vcHRpb25zXy5ub3RTdXBwb3J0ZWRNZXNzYWdlKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCAwKTsgLy8gd2UgY291bGQgbm90IGZpbmQgYW4gYXBwcm9wcmlhdGUgdGVjaCwgYnV0IGxldCdzIHN0aWxsIG5vdGlmeSB0aGUgZGVsZWdhdGUgdGhhdCB0aGlzIGlzIGl0XG4gICAgICAgIC8vIHRoaXMgbmVlZHMgYSBiZXR0ZXIgY29tbWVudCBhYm91dCB3aHkgdGhpcyBpcyBuZWVkZWRcblxuXG4gICAgICAgIF90aGlzMTEudHJpZ2dlclJlYWR5KCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZXRUZWNoKG13cywgX3RoaXMxMS50ZWNoXyk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgc291cmNlIG9iamVjdCBvbiB0aGUgdGVjaCwgcmV0dXJucyBhIGJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgd2hldGhlclxuICAgKiB0aGVyZSBpcyBhIHRlY2ggdGhhdCBjYW4gcGxheSB0aGUgc291cmNlIG9yIG5vdFxuICAgKlxuICAgKiBAcGFyYW0ge1RlY2h+U291cmNlT2JqZWN0fSBzb3VyY2VcbiAgICogICAgICAgIFRoZSBzb3VyY2Ugb2JqZWN0IHRvIHNldCBvbiB0aGUgVGVjaFxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIC0gVHJ1ZSBpZiB0aGVyZSBpcyBubyBUZWNoIHRvIHBsYXliYWNrIHRoaXMgc291cmNlXG4gICAqICAgICAgICAgLSBGYWxzZSBvdGhlcndpc2VcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uc3JjXyA9IGZ1bmN0aW9uIHNyY18oc291cmNlKSB7XG4gICAgdmFyIF90aGlzMTIgPSB0aGlzO1xuXG4gICAgdmFyIHNvdXJjZVRlY2ggPSB0aGlzLnNlbGVjdFNvdXJjZShbc291cmNlXSk7XG5cbiAgICBpZiAoIXNvdXJjZVRlY2gpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICghdGl0bGVDYXNlRXF1YWxzKHNvdXJjZVRlY2gudGVjaCwgdGhpcy50ZWNoTmFtZV8pKSB7XG4gICAgICB0aGlzLmNoYW5naW5nU3JjXyA9IHRydWU7IC8vIGxvYWQgdGhpcyB0ZWNobm9sb2d5IHdpdGggdGhlIGNob3NlbiBzb3VyY2VcblxuICAgICAgdGhpcy5sb2FkVGVjaF8oc291cmNlVGVjaC50ZWNoLCBzb3VyY2VUZWNoLnNvdXJjZSk7XG4gICAgICB0aGlzLnRlY2hfLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMxMi5jaGFuZ2luZ1NyY18gPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gLy8gd2FpdCB1bnRpbCB0aGUgdGVjaCBpcyByZWFkeSB0byBzZXQgdGhlIHNvdXJjZVxuICAgIC8vIGFuZCBzZXQgaXQgc3luY2hyb25vdXNseSBpZiBwb3NzaWJsZSAoIzIzMjYpXG5cblxuICAgIHRoaXMucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgLy8gVGhlIHNldFNvdXJjZSB0ZWNoIG1ldGhvZCB3YXMgYWRkZWQgd2l0aCBzb3VyY2UgaGFuZGxlcnNcbiAgICAgIC8vIHNvIG9sZGVyIHRlY2hzIHdvbid0IHN1cHBvcnQgaXRcbiAgICAgIC8vIFdlIG5lZWQgdG8gY2hlY2sgdGhlIGRpcmVjdCBwcm90b3R5cGUgZm9yIHRoZSBjYXNlIHdoZXJlIHN1YmNsYXNzZXNcbiAgICAgIC8vIG9mIHRoZSB0ZWNoIGRvIG5vdCBzdXBwb3J0IHNvdXJjZSBoYW5kbGVyc1xuICAgICAgaWYgKHRoaXMudGVjaF8uY29uc3RydWN0b3IucHJvdG90eXBlLmhhc093blByb3BlcnR5KCdzZXRTb3VyY2UnKSkge1xuICAgICAgICB0aGlzLnRlY2hDYWxsXygnc2V0U291cmNlJywgc291cmNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudGVjaENhbGxfKCdzcmMnLCBzb3VyY2Uuc3JjKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jaGFuZ2luZ1NyY18gPSBmYWxzZTtcbiAgICB9LCB0cnVlKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIEJlZ2luIGxvYWRpbmcgdGhlIHNyYyBkYXRhLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5sb2FkID0gZnVuY3Rpb24gbG9hZCgpIHtcbiAgICB0aGlzLnRlY2hDYWxsXygnbG9hZCcpO1xuICB9XG4gIC8qKlxuICAgKiBSZXNldCB0aGUgcGxheWVyLiBMb2FkcyB0aGUgZmlyc3QgdGVjaCBpbiB0aGUgdGVjaE9yZGVyLFxuICAgKiByZW1vdmVzIGFsbCB0aGUgdGV4dCB0cmFja3MgaW4gdGhlIGV4aXN0aW5nIGB0ZWNoYCxcbiAgICogYW5kIGNhbGxzIGByZXNldGAgb24gdGhlIGB0ZWNoYC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHtcbiAgICB2YXIgX3RoaXMxMyA9IHRoaXM7XG5cbiAgICB2YXIgUHJvbWlzZUNsYXNzID0gdGhpcy5vcHRpb25zXy5Qcm9taXNlIHx8IHdpbmRvdyQxLlByb21pc2U7XG5cbiAgICBpZiAodGhpcy5wYXVzZWQoKSB8fCAhUHJvbWlzZUNsYXNzKSB7XG4gICAgICB0aGlzLmRvUmVzZXRfKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBwbGF5UHJvbWlzZSA9IHRoaXMucGxheSgpO1xuICAgICAgc2lsZW5jZVByb21pc2UocGxheVByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczEzLmRvUmVzZXRfKCk7XG4gICAgICB9KSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5kb1Jlc2V0XyA9IGZ1bmN0aW9uIGRvUmVzZXRfKCkge1xuICAgIGlmICh0aGlzLnRlY2hfKSB7XG4gICAgICB0aGlzLnRlY2hfLmNsZWFyVHJhY2tzKCd0ZXh0Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5yZXNldENhY2hlXygpO1xuICAgIHRoaXMucG9zdGVyKCcnKTtcbiAgICB0aGlzLmxvYWRUZWNoXyh0aGlzLm9wdGlvbnNfLnRlY2hPcmRlclswXSwgbnVsbCk7XG4gICAgdGhpcy50ZWNoQ2FsbF8oJ3Jlc2V0Jyk7XG4gICAgdGhpcy5yZXNldENvbnRyb2xCYXJVSV8oKTtcblxuICAgIGlmIChpc0V2ZW50ZWQodGhpcykpIHtcbiAgICAgIHRoaXMudHJpZ2dlcigncGxheWVycmVzZXQnKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJlc2V0IENvbnRyb2wgQmFyJ3MgVUkgYnkgY2FsbGluZyBzdWItbWV0aG9kcyB0aGF0IHJlc2V0XG4gICAqIGFsbCBvZiBDb250cm9sIEJhcidzIGNvbXBvbmVudHNcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVzZXRDb250cm9sQmFyVUlfID0gZnVuY3Rpb24gcmVzZXRDb250cm9sQmFyVUlfKCkge1xuICAgIHRoaXMucmVzZXRQcm9ncmVzc0Jhcl8oKTtcbiAgICB0aGlzLnJlc2V0UGxheWJhY2tSYXRlXygpO1xuICAgIHRoaXMucmVzZXRWb2x1bWVCYXJfKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJlc2V0IHRlY2gncyBwcm9ncmVzcyBzbyBwcm9ncmVzcyBiYXIgaXMgcmVzZXQgaW4gdGhlIFVJXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlc2V0UHJvZ3Jlc3NCYXJfID0gZnVuY3Rpb24gcmVzZXRQcm9ncmVzc0Jhcl8oKSB7XG4gICAgdGhpcy5jdXJyZW50VGltZSgwKTtcbiAgICB2YXIgX3RoaXMkY29udHJvbEJhciA9IHRoaXMuY29udHJvbEJhcixcbiAgICAgICAgZHVyYXRpb25EaXNwbGF5ID0gX3RoaXMkY29udHJvbEJhci5kdXJhdGlvbkRpc3BsYXksXG4gICAgICAgIHJlbWFpbmluZ1RpbWVEaXNwbGF5ID0gX3RoaXMkY29udHJvbEJhci5yZW1haW5pbmdUaW1lRGlzcGxheTtcblxuICAgIGlmIChkdXJhdGlvbkRpc3BsYXkpIHtcbiAgICAgIGR1cmF0aW9uRGlzcGxheS51cGRhdGVDb250ZW50KCk7XG4gICAgfVxuXG4gICAgaWYgKHJlbWFpbmluZ1RpbWVEaXNwbGF5KSB7XG4gICAgICByZW1haW5pbmdUaW1lRGlzcGxheS51cGRhdGVDb250ZW50KCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZXNldCBQbGF5YmFjayByYXRpb1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5yZXNldFBsYXliYWNrUmF0ZV8gPSBmdW5jdGlvbiByZXNldFBsYXliYWNrUmF0ZV8oKSB7XG4gICAgdGhpcy5wbGF5YmFja1JhdGUodGhpcy5kZWZhdWx0UGxheWJhY2tSYXRlKCkpO1xuICAgIHRoaXMuaGFuZGxlVGVjaFJhdGVDaGFuZ2VfKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJlc2V0IFZvbHVtZSBiYXJcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVzZXRWb2x1bWVCYXJfID0gZnVuY3Rpb24gcmVzZXRWb2x1bWVCYXJfKCkge1xuICAgIHRoaXMudm9sdW1lKDEuMCk7XG4gICAgdGhpcy50cmlnZ2VyKCd2b2x1bWVjaGFuZ2UnKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbGwgb2YgdGhlIGN1cnJlbnQgc291cmNlIG9iamVjdHMuXG4gICAqXG4gICAqIEByZXR1cm4ge1RlY2h+U291cmNlT2JqZWN0W119XG4gICAqICAgICAgICAgVGhlIGN1cnJlbnQgc291cmNlIG9iamVjdHNcbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3VycmVudFNvdXJjZXMgPSBmdW5jdGlvbiBjdXJyZW50U291cmNlcygpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcy5jdXJyZW50U291cmNlKCk7XG4gICAgdmFyIHNvdXJjZXMgPSBbXTsgLy8gYXNzdW1lIGB7fWAgb3IgYHsgc3JjIH1gXG5cbiAgICBpZiAoT2JqZWN0LmtleXMoc291cmNlKS5sZW5ndGggIT09IDApIHtcbiAgICAgIHNvdXJjZXMucHVzaChzb3VyY2UpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNhY2hlXy5zb3VyY2VzIHx8IHNvdXJjZXM7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGN1cnJlbnQgc291cmNlIG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybiB7VGVjaH5Tb3VyY2VPYmplY3R9XG4gICAqICAgICAgICAgVGhlIGN1cnJlbnQgc291cmNlIG9iamVjdFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jdXJyZW50U291cmNlID0gZnVuY3Rpb24gY3VycmVudFNvdXJjZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZV8uc291cmNlIHx8IHt9O1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBmdWxseSBxdWFsaWZpZWQgVVJMIG9mIHRoZSBjdXJyZW50IHNvdXJjZSB2YWx1ZSBlLmcuIGh0dHA6Ly9teXNpdGUuY29tL3ZpZGVvLm1wNFxuICAgKiBDYW4gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGBjdXJyZW50VHlwZWAgdG8gYXNzaXN0IGluIHJlYnVpbGRpbmcgdGhlIGN1cnJlbnQgc291cmNlIG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiAgICAgICAgIFRoZSBjdXJyZW50IHNvdXJjZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jdXJyZW50U3JjID0gZnVuY3Rpb24gY3VycmVudFNyYygpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50U291cmNlKCkgJiYgdGhpcy5jdXJyZW50U291cmNlKCkuc3JjIHx8ICcnO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgc291cmNlIHR5cGUgZS5nLiB2aWRlby9tcDRcbiAgICogVGhpcyBjYW4gYWxsb3cgeW91IHJlYnVpbGQgdGhlIGN1cnJlbnQgc291cmNlIG9iamVjdCBzbyB0aGF0IHlvdSBjb3VsZCBsb2FkIHRoZSBzYW1lXG4gICAqIHNvdXJjZSBhbmQgdGVjaCBsYXRlclxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIHNvdXJjZSBNSU1FIHR5cGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3VycmVudFR5cGUgPSBmdW5jdGlvbiBjdXJyZW50VHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50U291cmNlKCkgJiYgdGhpcy5jdXJyZW50U291cmNlKCkudHlwZSB8fCAnJztcbiAgfVxuICAvKipcbiAgICogR2V0IG9yIHNldCB0aGUgcHJlbG9hZCBhdHRyaWJ1dGVcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbdmFsdWVdXG4gICAqICAgICAgICAtIHRydWUgbWVhbnMgdGhhdCB3ZSBzaG91bGQgcHJlbG9hZFxuICAgKiAgICAgICAgLSBmYWxzZSBtZWFucyB0aGF0IHdlIHNob3VsZCBub3QgcHJlbG9hZFxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIHByZWxvYWQgYXR0cmlidXRlIHZhbHVlIHdoZW4gZ2V0dGluZ1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wcmVsb2FkID0gZnVuY3Rpb24gcHJlbG9hZCh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnRlY2hDYWxsXygnc2V0UHJlbG9hZCcsIHZhbHVlKTtcbiAgICAgIHRoaXMub3B0aW9uc18ucHJlbG9hZCA9IHZhbHVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnRlY2hHZXRfKCdwcmVsb2FkJyk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBvciBzZXQgdGhlIGF1dG9wbGF5IG9wdGlvbi4gV2hlbiB0aGlzIGlzIGEgYm9vbGVhbiBpdCB3aWxsXG4gICAqIG1vZGlmeSB0aGUgYXR0cmlidXRlIG9uIHRoZSB0ZWNoLiBXaGVuIHRoaXMgaXMgYSBzdHJpbmcgdGhlIGF0dHJpYnV0ZSBvblxuICAgKiB0aGUgdGVjaCB3aWxsIGJlIHJlbW92ZWQgYW5kIGBQbGF5ZXJgIHdpbGwgaGFuZGxlIGF1dG9wbGF5IG9uIGxvYWRzdGFydHMuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnxzdHJpbmd9IFt2YWx1ZV1cbiAgICogICAgICAgIC0gdHJ1ZTogYXV0b3BsYXkgdXNpbmcgdGhlIGJyb3dzZXIgYmVoYXZpb3JcbiAgICogICAgICAgIC0gZmFsc2U6IGRvIG5vdCBhdXRvcGxheVxuICAgKiAgICAgICAgLSAncGxheSc6IGNhbGwgcGxheSgpIG9uIGV2ZXJ5IGxvYWRzdGFydFxuICAgKiAgICAgICAgLSAnbXV0ZWQnOiBjYWxsIG11dGVkKCkgdGhlbiBwbGF5KCkgb24gZXZlcnkgbG9hZHN0YXJ0XG4gICAqICAgICAgICAtICdhbnknOiBjYWxsIHBsYXkoKSBvbiBldmVyeSBsb2Fkc3RhcnQuIGlmIHRoYXQgZmFpbHMgY2FsbCBtdXRlZCgpIHRoZW4gcGxheSgpLlxuICAgKiAgICAgICAgLSAqOiB2YWx1ZXMgb3RoZXIgdGhhbiB0aG9zZSBsaXN0ZWQgaGVyZSB3aWxsIGJlIHNldCBgYXV0b3BsYXlgIHRvIHRydWVcbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbnxzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIGN1cnJlbnQgdmFsdWUgb2YgYXV0b3BsYXkgd2hlbiBnZXR0aW5nXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmF1dG9wbGF5ID0gZnVuY3Rpb24gYXV0b3BsYXkodmFsdWUpIHtcbiAgICAvLyBnZXR0ZXIgdXNhZ2VcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc18uYXV0b3BsYXkgfHwgZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIHRlY2hBdXRvcGxheTsgLy8gaWYgdGhlIHZhbHVlIGlzIGEgdmFsaWQgc3RyaW5nIHNldCBpdCB0byB0aGF0XG5cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiAvKGFueXxwbGF5fG11dGVkKS8udGVzdCh2YWx1ZSkpIHtcbiAgICAgIHRoaXMub3B0aW9uc18uYXV0b3BsYXkgPSB2YWx1ZTtcbiAgICAgIHRoaXMubWFudWFsQXV0b3BsYXlfKHZhbHVlKTtcbiAgICAgIHRlY2hBdXRvcGxheSA9IGZhbHNlOyAvLyBhbnkgZmFsc3kgdmFsdWUgc2V0cyBhdXRvcGxheSB0byBmYWxzZSBpbiB0aGUgYnJvd3NlcixcbiAgICAgIC8vIGxldHMgZG8gdGhlIHNhbWVcbiAgICB9IGVsc2UgaWYgKCF2YWx1ZSkge1xuICAgICAgdGhpcy5vcHRpb25zXy5hdXRvcGxheSA9IGZhbHNlOyAvLyBhbnkgb3RoZXIgdmFsdWUgKGllIHRydXRoeSkgc2V0cyBhdXRvcGxheSB0byB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub3B0aW9uc18uYXV0b3BsYXkgPSB0cnVlO1xuICAgIH1cblxuICAgIHRlY2hBdXRvcGxheSA9IHR5cGVvZiB0ZWNoQXV0b3BsYXkgPT09ICd1bmRlZmluZWQnID8gdGhpcy5vcHRpb25zXy5hdXRvcGxheSA6IHRlY2hBdXRvcGxheTsgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhIHRlY2ggdGhlbiB3ZSBkbyBub3QgcXVldWUgdXBcbiAgICAvLyBhIHNldEF1dG9wbGF5IGNhbGwgb24gdGVjaCByZWFkeS4gV2UgZG8gdGhpcyBiZWNhdXNlIHRoZVxuICAgIC8vIGF1dG9wbGF5IG9wdGlvbiB3aWxsIGJlIHBhc3NlZCBpbiB0aGUgY29uc3RydWN0b3IgYW5kIHdlXG4gICAgLy8gZG8gbm90IG5lZWQgdG8gc2V0IGl0IHR3aWNlXG5cbiAgICBpZiAodGhpcy50ZWNoXykge1xuICAgICAgdGhpcy50ZWNoQ2FsbF8oJ3NldEF1dG9wbGF5JywgdGVjaEF1dG9wbGF5KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFNldCBvciB1bnNldCB0aGUgcGxheXNpbmxpbmUgYXR0cmlidXRlLlxuICAgKiBQbGF5c2lubGluZSB0ZWxscyB0aGUgYnJvd3NlciB0aGF0IG5vbi1mdWxsc2NyZWVuIHBsYXliYWNrIGlzIHByZWZlcnJlZC5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbdmFsdWVdXG4gICAqICAgICAgICAtIHRydWUgbWVhbnMgdGhhdCB3ZSBzaG91bGQgdHJ5IHRvIHBsYXkgaW5saW5lIGJ5IGRlZmF1bHRcbiAgICogICAgICAgIC0gZmFsc2UgbWVhbnMgdGhhdCB3ZSBzaG91bGQgdXNlIHRoZSBicm93c2VyJ3MgZGVmYXVsdCBwbGF5YmFjayBtb2RlLFxuICAgKiAgICAgICAgICB3aGljaCBpbiBtb3N0IGNhc2VzIGlzIGlubGluZS4gaU9TIFNhZmFyaSBpcyBhIG5vdGFibGUgZXhjZXB0aW9uXG4gICAqICAgICAgICAgIGFuZCBwbGF5cyBmdWxsc2NyZWVuIGJ5IGRlZmF1bHQuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ3xQbGF5ZXJ9XG4gICAqICAgICAgICAgLSB0aGUgY3VycmVudCB2YWx1ZSBvZiBwbGF5c2lubGluZVxuICAgKiAgICAgICAgIC0gdGhlIHBsYXllciB3aGVuIHNldHRpbmdcbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy8jYXR0ci12aWRlby1wbGF5c2lubGluZX1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGxheXNpbmxpbmUgPSBmdW5jdGlvbiBwbGF5c2lubGluZSh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnRlY2hDYWxsXygnc2V0UGxheXNpbmxpbmUnLCB2YWx1ZSk7XG4gICAgICB0aGlzLm9wdGlvbnNfLnBsYXlzaW5saW5lID0gdmFsdWU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy50ZWNoR2V0XygncGxheXNpbmxpbmUnKTtcbiAgfVxuICAvKipcbiAgICogR2V0IG9yIHNldCB0aGUgbG9vcCBhdHRyaWJ1dGUgb24gdGhlIHZpZGVvIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3ZhbHVlXVxuICAgKiAgICAgICAgLSB0cnVlIG1lYW5zIHRoYXQgd2Ugc2hvdWxkIGxvb3AgdGhlIHZpZGVvXG4gICAqICAgICAgICAtIGZhbHNlIG1lYW5zIHRoYXQgd2Ugc2hvdWxkIG5vdCBsb29wIHRoZSB2aWRlb1xuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIFRoZSBjdXJyZW50IHZhbHVlIG9mIGxvb3Agd2hlbiBnZXR0aW5nXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmxvb3AgPSBmdW5jdGlvbiBsb29wKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMudGVjaENhbGxfKCdzZXRMb29wJywgdmFsdWUpO1xuICAgICAgdGhpcy5vcHRpb25zXy5sb29wID0gdmFsdWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMudGVjaEdldF8oJ2xvb3AnKTtcbiAgfVxuICAvKipcbiAgICogR2V0IG9yIHNldCB0aGUgcG9zdGVyIGltYWdlIHNvdXJjZSB1cmxcbiAgICpcbiAgICogQGZpcmVzIFBsYXllciNwb3N0ZXJjaGFuZ2VcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtzcmNdXG4gICAqICAgICAgICBQb3N0ZXIgaW1hZ2Ugc291cmNlIFVSTFxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIGN1cnJlbnQgdmFsdWUgb2YgcG9zdGVyIHdoZW4gZ2V0dGluZ1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wb3N0ZXIgPSBmdW5jdGlvbiBwb3N0ZXIoc3JjKSB7XG4gICAgaWYgKHNyYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5wb3N0ZXJfO1xuICAgIH0gLy8gVGhlIGNvcnJlY3Qgd2F5IHRvIHJlbW92ZSBhIHBvc3RlciBpcyB0byBzZXQgYXMgYW4gZW1wdHkgc3RyaW5nXG4gICAgLy8gb3RoZXIgZmFsc2V5IHZhbHVlcyB3aWxsIHRocm93IGVycm9yc1xuXG5cbiAgICBpZiAoIXNyYykge1xuICAgICAgc3JjID0gJyc7XG4gICAgfVxuXG4gICAgaWYgKHNyYyA9PT0gdGhpcy5wb3N0ZXJfKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyB1cGRhdGUgdGhlIGludGVybmFsIHBvc3RlciB2YXJpYWJsZVxuXG5cbiAgICB0aGlzLnBvc3Rlcl8gPSBzcmM7IC8vIHVwZGF0ZSB0aGUgdGVjaCdzIHBvc3RlclxuXG4gICAgdGhpcy50ZWNoQ2FsbF8oJ3NldFBvc3RlcicsIHNyYyk7XG4gICAgdGhpcy5pc1Bvc3RlckZyb21UZWNoXyA9IGZhbHNlOyAvLyBhbGVydCBjb21wb25lbnRzIHRoYXQgdGhlIHBvc3RlciBoYXMgYmVlbiBzZXRcblxuICAgIC8qKlxuICAgICAqIFRoaXMgZXZlbnQgZmlyZXMgd2hlbiB0aGUgcG9zdGVyIGltYWdlIGlzIGNoYW5nZWQgb24gdGhlIHBsYXllci5cbiAgICAgKlxuICAgICAqIEBldmVudCBQbGF5ZXIjcG9zdGVyY2hhbmdlXG4gICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAqL1xuXG4gICAgdGhpcy50cmlnZ2VyKCdwb3N0ZXJjaGFuZ2UnKTtcbiAgfVxuICAvKipcbiAgICogU29tZSB0ZWNocyAoZS5nLiBZb3VUdWJlKSBjYW4gcHJvdmlkZSBhIHBvc3RlciBzb3VyY2UgaW4gYW5cbiAgICogYXN5bmNocm9ub3VzIHdheS4gV2Ugd2FudCB0aGUgcG9zdGVyIGNvbXBvbmVudCB0byB1c2UgdGhpc1xuICAgKiBwb3N0ZXIgc291cmNlIHNvIHRoYXQgaXQgY292ZXJzIHVwIHRoZSB0ZWNoJ3MgY29udHJvbHMuXG4gICAqIChZb3VUdWJlJ3MgcGxheSBidXR0b24pLiBIb3dldmVyIHdlIG9ubHkgd2FudCB0byB1c2UgdGhpc1xuICAgKiBzb3VyY2UgaWYgdGhlIHBsYXllciB1c2VyIGhhc24ndCBzZXQgYSBwb3N0ZXIgdGhyb3VnaFxuICAgKiB0aGUgbm9ybWFsIEFQSXMuXG4gICAqXG4gICAqIEBmaXJlcyBQbGF5ZXIjcG9zdGVyY2hhbmdlXG4gICAqIEBsaXN0ZW5zIFRlY2gjcG9zdGVyY2hhbmdlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmhhbmRsZVRlY2hQb3N0ZXJDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlVGVjaFBvc3RlckNoYW5nZV8oKSB7XG4gICAgaWYgKCghdGhpcy5wb3N0ZXJfIHx8IHRoaXMub3B0aW9uc18udGVjaENhbk92ZXJyaWRlUG9zdGVyKSAmJiB0aGlzLnRlY2hfICYmIHRoaXMudGVjaF8ucG9zdGVyKSB7XG4gICAgICB2YXIgbmV3UG9zdGVyID0gdGhpcy50ZWNoXy5wb3N0ZXIoKSB8fCAnJztcblxuICAgICAgaWYgKG5ld1Bvc3RlciAhPT0gdGhpcy5wb3N0ZXJfKSB7XG4gICAgICAgIHRoaXMucG9zdGVyXyA9IG5ld1Bvc3RlcjtcbiAgICAgICAgdGhpcy5pc1Bvc3RlckZyb21UZWNoXyA9IHRydWU7IC8vIExldCBjb21wb25lbnRzIGtub3cgdGhlIHBvc3RlciBoYXMgY2hhbmdlZFxuXG4gICAgICAgIHRoaXMudHJpZ2dlcigncG9zdGVyY2hhbmdlJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgb3Igc2V0IHdoZXRoZXIgb3Igbm90IHRoZSBjb250cm9scyBhcmUgc2hvd2luZy5cbiAgICpcbiAgICogQGZpcmVzIFBsYXllciNjb250cm9sc2VuYWJsZWRcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbYm9vbF1cbiAgICogICAgICAgIC0gdHJ1ZSB0byB0dXJuIGNvbnRyb2xzIG9uXG4gICAqICAgICAgICAtIGZhbHNlIHRvIHR1cm4gY29udHJvbHMgb2ZmXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqICAgICAgICAgVGhlIGN1cnJlbnQgdmFsdWUgb2YgY29udHJvbHMgd2hlbiBnZXR0aW5nXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNvbnRyb2xzID0gZnVuY3Rpb24gY29udHJvbHMoYm9vbCkge1xuICAgIGlmIChib29sID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuY29udHJvbHNfO1xuICAgIH1cblxuICAgIGJvb2wgPSAhIWJvb2w7IC8vIERvbid0IHRyaWdnZXIgYSBjaGFuZ2UgZXZlbnQgdW5sZXNzIGl0IGFjdHVhbGx5IGNoYW5nZWRcblxuICAgIGlmICh0aGlzLmNvbnRyb2xzXyA9PT0gYm9vbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuY29udHJvbHNfID0gYm9vbDtcblxuICAgIGlmICh0aGlzLnVzaW5nTmF0aXZlQ29udHJvbHMoKSkge1xuICAgICAgdGhpcy50ZWNoQ2FsbF8oJ3NldENvbnRyb2xzJywgYm9vbCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29udHJvbHNfKSB7XG4gICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtY29udHJvbHMtZGlzYWJsZWQnKTtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1jb250cm9scy1lbmFibGVkJyk7XG4gICAgICAvKipcbiAgICAgICAqIEBldmVudCBQbGF5ZXIjY29udHJvbHNlbmFibGVkXG4gICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgKi9cblxuICAgICAgdGhpcy50cmlnZ2VyKCdjb250cm9sc2VuYWJsZWQnKTtcblxuICAgICAgaWYgKCF0aGlzLnVzaW5nTmF0aXZlQ29udHJvbHMoKSkge1xuICAgICAgICB0aGlzLmFkZFRlY2hDb250cm9sc0xpc3RlbmVyc18oKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWNvbnRyb2xzLWVuYWJsZWQnKTtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1jb250cm9scy1kaXNhYmxlZCcpO1xuICAgICAgLyoqXG4gICAgICAgKiBAZXZlbnQgUGxheWVyI2NvbnRyb2xzZGlzYWJsZWRcbiAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAqL1xuXG4gICAgICB0aGlzLnRyaWdnZXIoJ2NvbnRyb2xzZGlzYWJsZWQnKTtcblxuICAgICAgaWYgKCF0aGlzLnVzaW5nTmF0aXZlQ29udHJvbHMoKSkge1xuICAgICAgICB0aGlzLnJlbW92ZVRlY2hDb250cm9sc0xpc3RlbmVyc18oKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFRvZ2dsZSBuYXRpdmUgY29udHJvbHMgb24vb2ZmLiBOYXRpdmUgY29udHJvbHMgYXJlIHRoZSBjb250cm9scyBidWlsdCBpbnRvXG4gICAqIGRldmljZXMgKGUuZy4gZGVmYXVsdCBpUGhvbmUgY29udHJvbHMpLCBGbGFzaCwgb3Igb3RoZXIgdGVjaHNcbiAgICogKGUuZy4gVmltZW8gQ29udHJvbHMpXG4gICAqICoqVGhpcyBzaG91bGQgb25seSBiZSBzZXQgYnkgdGhlIGN1cnJlbnQgdGVjaCwgYmVjYXVzZSBvbmx5IHRoZSB0ZWNoIGtub3dzXG4gICAqIGlmIGl0IGNhbiBzdXBwb3J0IG5hdGl2ZSBjb250cm9scyoqXG4gICAqXG4gICAqIEBmaXJlcyBQbGF5ZXIjdXNpbmduYXRpdmVjb250cm9sc1xuICAgKiBAZmlyZXMgUGxheWVyI3VzaW5nY3VzdG9tY29udHJvbHNcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbYm9vbF1cbiAgICogICAgICAgIC0gdHJ1ZSB0byB0dXJuIG5hdGl2ZSBjb250cm9scyBvblxuICAgKiAgICAgICAgLSBmYWxzZSB0byB0dXJuIG5hdGl2ZSBjb250cm9scyBvZmZcbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICBUaGUgY3VycmVudCB2YWx1ZSBvZiBuYXRpdmUgY29udHJvbHMgd2hlbiBnZXR0aW5nXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVzaW5nTmF0aXZlQ29udHJvbHMgPSBmdW5jdGlvbiB1c2luZ05hdGl2ZUNvbnRyb2xzKGJvb2wpIHtcbiAgICBpZiAoYm9vbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gISF0aGlzLnVzaW5nTmF0aXZlQ29udHJvbHNfO1xuICAgIH1cblxuICAgIGJvb2wgPSAhIWJvb2w7IC8vIERvbid0IHRyaWdnZXIgYSBjaGFuZ2UgZXZlbnQgdW5sZXNzIGl0IGFjdHVhbGx5IGNoYW5nZWRcblxuICAgIGlmICh0aGlzLnVzaW5nTmF0aXZlQ29udHJvbHNfID09PSBib29sKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy51c2luZ05hdGl2ZUNvbnRyb2xzXyA9IGJvb2w7XG5cbiAgICBpZiAodGhpcy51c2luZ05hdGl2ZUNvbnRyb2xzXykge1xuICAgICAgdGhpcy5hZGRDbGFzcygndmpzLXVzaW5nLW5hdGl2ZS1jb250cm9scycpO1xuICAgICAgLyoqXG4gICAgICAgKiBwbGF5ZXIgaXMgdXNpbmcgdGhlIG5hdGl2ZSBkZXZpY2UgY29udHJvbHNcbiAgICAgICAqXG4gICAgICAgKiBAZXZlbnQgUGxheWVyI3VzaW5nbmF0aXZlY29udHJvbHNcbiAgICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAgICAgICAqL1xuXG4gICAgICB0aGlzLnRyaWdnZXIoJ3VzaW5nbmF0aXZlY29udHJvbHMnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLXVzaW5nLW5hdGl2ZS1jb250cm9scycpO1xuICAgICAgLyoqXG4gICAgICAgKiBwbGF5ZXIgaXMgdXNpbmcgdGhlIGN1c3RvbSBIVE1MIGNvbnRyb2xzXG4gICAgICAgKlxuICAgICAgICogQGV2ZW50IFBsYXllciN1c2luZ2N1c3RvbWNvbnRyb2xzXG4gICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgKi9cblxuICAgICAgdGhpcy50cmlnZ2VyKCd1c2luZ2N1c3RvbWNvbnRyb2xzJyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBTZXQgb3IgZ2V0IHRoZSBjdXJyZW50IE1lZGlhRXJyb3JcbiAgICpcbiAgICogQGZpcmVzIFBsYXllciNlcnJvclxuICAgKlxuICAgKiBAcGFyYW0gIHtNZWRpYUVycm9yfHN0cmluZ3xudW1iZXJ9IFtlcnJdXG4gICAqICAgICAgICAgQSBNZWRpYUVycm9yIG9yIGEgc3RyaW5nL251bWJlciB0byBiZSB0dXJuZWRcbiAgICogICAgICAgICBpbnRvIGEgTWVkaWFFcnJvclxuICAgKlxuICAgKiBAcmV0dXJuIHtNZWRpYUVycm9yfG51bGx9XG4gICAqICAgICAgICAgVGhlIGN1cnJlbnQgTWVkaWFFcnJvciB3aGVuIGdldHRpbmcgKG9yIG51bGwpXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmVycm9yID0gZnVuY3Rpb24gZXJyb3IoZXJyKSB7XG4gICAgaWYgKGVyciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5lcnJvcl8gfHwgbnVsbDtcbiAgICB9IC8vIHJlc3RvcmluZyB0byBkZWZhdWx0XG5cblxuICAgIGlmIChlcnIgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuZXJyb3JfID0gZXJyO1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWVycm9yJyk7XG5cbiAgICAgIGlmICh0aGlzLmVycm9yRGlzcGxheSkge1xuICAgICAgICB0aGlzLmVycm9yRGlzcGxheS5jbG9zZSgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5lcnJvcl8gPSBuZXcgTWVkaWFFcnJvcihlcnIpOyAvLyBhZGQgdGhlIHZqcy1lcnJvciBjbGFzc25hbWUgdG8gdGhlIHBsYXllclxuXG4gICAgdGhpcy5hZGRDbGFzcygndmpzLWVycm9yJyk7IC8vIGxvZyB0aGUgbmFtZSBvZiB0aGUgZXJyb3IgdHlwZSBhbmQgYW55IG1lc3NhZ2VcbiAgICAvLyBJRTExIGxvZ3MgXCJbb2JqZWN0IG9iamVjdF1cIiBhbmQgcmVxdWlyZWQgeW91IHRvIGV4cGFuZCBtZXNzYWdlIHRvIHNlZSBlcnJvciBvYmplY3RcblxuICAgIGxvZy5lcnJvcihcIihDT0RFOlwiICsgdGhpcy5lcnJvcl8uY29kZSArIFwiIFwiICsgTWVkaWFFcnJvci5lcnJvclR5cGVzW3RoaXMuZXJyb3JfLmNvZGVdICsgXCIpXCIsIHRoaXMuZXJyb3JfLm1lc3NhZ2UsIHRoaXMuZXJyb3JfKTtcbiAgICAvKipcbiAgICAgKiBAZXZlbnQgUGxheWVyI2Vycm9yXG4gICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAqL1xuXG4gICAgdGhpcy50cmlnZ2VyKCdlcnJvcicpO1xuICAgIHJldHVybjtcbiAgfVxuICAvKipcbiAgICogUmVwb3J0IHVzZXIgYWN0aXZpdHlcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG4gICAqICAgICAgICBFdmVudCBvYmplY3RcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVwb3J0VXNlckFjdGl2aXR5ID0gZnVuY3Rpb24gcmVwb3J0VXNlckFjdGl2aXR5KGV2ZW50KSB7XG4gICAgdGhpcy51c2VyQWN0aXZpdHlfID0gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogR2V0L3NldCBpZiB1c2VyIGlzIGFjdGl2ZVxuICAgKlxuICAgKiBAZmlyZXMgUGxheWVyI3VzZXJhY3RpdmVcbiAgICogQGZpcmVzIFBsYXllciN1c2VyaW5hY3RpdmVcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbYm9vbF1cbiAgICogICAgICAgIC0gdHJ1ZSBpZiB0aGUgdXNlciBpcyBhY3RpdmVcbiAgICogICAgICAgIC0gZmFsc2UgaWYgdGhlIHVzZXIgaXMgaW5hY3RpdmVcbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICBUaGUgY3VycmVudCB2YWx1ZSBvZiB1c2VyQWN0aXZlIHdoZW4gZ2V0dGluZ1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by51c2VyQWN0aXZlID0gZnVuY3Rpb24gdXNlckFjdGl2ZShib29sKSB7XG4gICAgaWYgKGJvb2wgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMudXNlckFjdGl2ZV87XG4gICAgfVxuXG4gICAgYm9vbCA9ICEhYm9vbDtcblxuICAgIGlmIChib29sID09PSB0aGlzLnVzZXJBY3RpdmVfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy51c2VyQWN0aXZlXyA9IGJvb2w7XG5cbiAgICBpZiAodGhpcy51c2VyQWN0aXZlXykge1xuICAgICAgdGhpcy51c2VyQWN0aXZpdHlfID0gdHJ1ZTtcbiAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy11c2VyLWluYWN0aXZlJyk7XG4gICAgICB0aGlzLmFkZENsYXNzKCd2anMtdXNlci1hY3RpdmUnKTtcbiAgICAgIC8qKlxuICAgICAgICogQGV2ZW50IFBsYXllciN1c2VyYWN0aXZlXG4gICAgICAgKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICAgKi9cblxuICAgICAgdGhpcy50cmlnZ2VyKCd1c2VyYWN0aXZlJyk7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBDaHJvbWUvU2FmYXJpL0lFIGhhdmUgYnVncyB3aGVyZSB3aGVuIHlvdSBjaGFuZ2UgdGhlIGN1cnNvciBpdCBjYW5cbiAgICAvLyB0cmlnZ2VyIGEgbW91c2Vtb3ZlIGV2ZW50LiBUaGlzIGNhdXNlcyBhbiBpc3N1ZSB3aGVuIHlvdSdyZSBoaWRpbmdcbiAgICAvLyB0aGUgY3Vyc29yIHdoZW4gdGhlIHVzZXIgaXMgaW5hY3RpdmUsIGFuZCBhIG1vdXNlbW92ZSBzaWduYWxzIHVzZXJcbiAgICAvLyBhY3Rpdml0eS4gTWFraW5nIGl0IGltcG9zc2libGUgdG8gZ28gaW50byBpbmFjdGl2ZSBtb2RlLiBTcGVjaWZpY2FsbHlcbiAgICAvLyB0aGlzIGhhcHBlbnMgaW4gZnVsbHNjcmVlbiB3aGVuIHdlIHJlYWxseSBuZWVkIHRvIGhpZGUgdGhlIGN1cnNvci5cbiAgICAvL1xuICAgIC8vIFdoZW4gdGhpcyBnZXRzIHJlc29sdmVkIGluIEFMTCBicm93c2VycyBpdCBjYW4gYmUgcmVtb3ZlZFxuICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0xMDMwNDFcblxuXG4gICAgaWYgKHRoaXMudGVjaF8pIHtcbiAgICAgIHRoaXMudGVjaF8ub25lKCdtb3VzZW1vdmUnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLnVzZXJBY3Rpdml0eV8gPSBmYWxzZTtcbiAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtdXNlci1hY3RpdmUnKTtcbiAgICB0aGlzLmFkZENsYXNzKCd2anMtdXNlci1pbmFjdGl2ZScpO1xuICAgIC8qKlxuICAgICAqIEBldmVudCBQbGF5ZXIjdXNlcmluYWN0aXZlXG4gICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICAgICAqL1xuXG4gICAgdGhpcy50cmlnZ2VyKCd1c2VyaW5hY3RpdmUnKTtcbiAgfVxuICAvKipcbiAgICogTGlzdGVuIGZvciB1c2VyIGFjdGl2aXR5IGJhc2VkIG9uIHRpbWVvdXQgdmFsdWVcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8ubGlzdGVuRm9yVXNlckFjdGl2aXR5XyA9IGZ1bmN0aW9uIGxpc3RlbkZvclVzZXJBY3Rpdml0eV8oKSB7XG4gICAgdmFyIG1vdXNlSW5Qcm9ncmVzcztcbiAgICB2YXIgbGFzdE1vdmVYO1xuICAgIHZhciBsYXN0TW92ZVk7XG4gICAgdmFyIGhhbmRsZUFjdGl2aXR5ID0gYmluZCh0aGlzLCB0aGlzLnJlcG9ydFVzZXJBY3Rpdml0eSk7XG5cbiAgICB2YXIgaGFuZGxlTW91c2VNb3ZlID0gZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlKGUpIHtcbiAgICAgIC8vICMxMDY4IC0gUHJldmVudCBtb3VzZW1vdmUgc3BhbW1pbmdcbiAgICAgIC8vIENocm9tZSBCdWc6IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0zNjY5NzBcbiAgICAgIGlmIChlLnNjcmVlblggIT09IGxhc3RNb3ZlWCB8fCBlLnNjcmVlblkgIT09IGxhc3RNb3ZlWSkge1xuICAgICAgICBsYXN0TW92ZVggPSBlLnNjcmVlblg7XG4gICAgICAgIGxhc3RNb3ZlWSA9IGUuc2NyZWVuWTtcbiAgICAgICAgaGFuZGxlQWN0aXZpdHkoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGhhbmRsZU1vdXNlRG93biA9IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bigpIHtcbiAgICAgIGhhbmRsZUFjdGl2aXR5KCk7IC8vIEZvciBhcyBsb25nIGFzIHRoZSB0aGV5IGFyZSB0b3VjaGluZyB0aGUgZGV2aWNlIG9yIGhhdmUgdGhlaXIgbW91c2UgZG93bixcbiAgICAgIC8vIHdlIGNvbnNpZGVyIHRoZW0gYWN0aXZlIGV2ZW4gaWYgdGhleSdyZSBub3QgbW92aW5nIHRoZWlyIGZpbmdlciBvciBtb3VzZS5cbiAgICAgIC8vIFNvIHdlIHdhbnQgdG8gY29udGludWUgdG8gdXBkYXRlIHRoYXQgdGhleSBhcmUgYWN0aXZlXG5cbiAgICAgIHRoaXMuY2xlYXJJbnRlcnZhbChtb3VzZUluUHJvZ3Jlc3MpOyAvLyBTZXR0aW5nIHVzZXJBY3Rpdml0eT10cnVlIG5vdyBhbmQgc2V0dGluZyB0aGUgaW50ZXJ2YWwgdG8gdGhlIHNhbWUgdGltZVxuICAgICAgLy8gYXMgdGhlIGFjdGl2aXR5Q2hlY2sgaW50ZXJ2YWwgKDI1MCkgc2hvdWxkIGVuc3VyZSB3ZSBuZXZlciBtaXNzIHRoZVxuICAgICAgLy8gbmV4dCBhY3Rpdml0eUNoZWNrXG5cbiAgICAgIG1vdXNlSW5Qcm9ncmVzcyA9IHRoaXMuc2V0SW50ZXJ2YWwoaGFuZGxlQWN0aXZpdHksIDI1MCk7XG4gICAgfTtcblxuICAgIHZhciBoYW5kbGVNb3VzZVVwID0gZnVuY3Rpb24gaGFuZGxlTW91c2VVcChldmVudCkge1xuICAgICAgaGFuZGxlQWN0aXZpdHkoKTsgLy8gU3RvcCB0aGUgaW50ZXJ2YWwgdGhhdCBtYWludGFpbnMgYWN0aXZpdHkgaWYgdGhlIG1vdXNlL3RvdWNoIGlzIGRvd25cblxuICAgICAgdGhpcy5jbGVhckludGVydmFsKG1vdXNlSW5Qcm9ncmVzcyk7XG4gICAgfTsgLy8gQW55IG1vdXNlIG1vdmVtZW50IHdpbGwgYmUgY29uc2lkZXJlZCB1c2VyIGFjdGl2aXR5XG5cblxuICAgIHRoaXMub24oJ21vdXNlZG93bicsIGhhbmRsZU1vdXNlRG93bik7XG4gICAgdGhpcy5vbignbW91c2Vtb3ZlJywgaGFuZGxlTW91c2VNb3ZlKTtcbiAgICB0aGlzLm9uKCdtb3VzZXVwJywgaGFuZGxlTW91c2VVcCk7XG4gICAgdmFyIGNvbnRyb2xCYXIgPSB0aGlzLmdldENoaWxkKCdjb250cm9sQmFyJyk7IC8vIEZpeGVzIGJ1ZyBvbiBBbmRyb2lkICYgaU9TIHdoZXJlIHdoZW4gdGFwcGluZyBwcm9ncmVzc0JhciAod2hlbiBjb250cm9sIGJhciBpcyBkaXNwbGF5ZWQpXG4gICAgLy8gY29udHJvbEJhciB3b3VsZCBubyBsb25nZXIgYmUgaGlkZGVuIGJ5IGRlZmF1bHQgdGltZW91dC5cblxuICAgIGlmIChjb250cm9sQmFyICYmICFJU19JT1MgJiYgIUlTX0FORFJPSUQpIHtcbiAgICAgIGNvbnRyb2xCYXIub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5wbGF5ZXIoKS5jYWNoZV8uaW5hY3Rpdml0eVRpbWVvdXQgPSB0aGlzLnBsYXllcigpLm9wdGlvbnNfLmluYWN0aXZpdHlUaW1lb3V0O1xuICAgICAgICB0aGlzLnBsYXllcigpLm9wdGlvbnNfLmluYWN0aXZpdHlUaW1lb3V0ID0gMDtcbiAgICAgIH0pO1xuICAgICAgY29udHJvbEJhci5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLnBsYXllcigpLm9wdGlvbnNfLmluYWN0aXZpdHlUaW1lb3V0ID0gdGhpcy5wbGF5ZXIoKS5jYWNoZV8uaW5hY3Rpdml0eVRpbWVvdXQ7XG4gICAgICB9KTtcbiAgICB9IC8vIExpc3RlbiBmb3Iga2V5Ym9hcmQgbmF2aWdhdGlvblxuICAgIC8vIFNob3VsZG4ndCBuZWVkIHRvIHVzZSBpblByb2dyZXNzIGludGVydmFsIGJlY2F1c2Ugb2Yga2V5IHJlcGVhdFxuXG5cbiAgICB0aGlzLm9uKCdrZXlkb3duJywgaGFuZGxlQWN0aXZpdHkpO1xuICAgIHRoaXMub24oJ2tleXVwJywgaGFuZGxlQWN0aXZpdHkpOyAvLyBSdW4gYW4gaW50ZXJ2YWwgZXZlcnkgMjUwIG1pbGxpc2Vjb25kcyBpbnN0ZWFkIG9mIHN0dWZmaW5nIGV2ZXJ5dGhpbmcgaW50b1xuICAgIC8vIHRoZSBtb3VzZW1vdmUvdG91Y2htb3ZlIGZ1bmN0aW9uIGl0c2VsZiwgdG8gcHJldmVudCBwZXJmb3JtYW5jZSBkZWdyYWRhdGlvbi5cbiAgICAvLyBgdGhpcy5yZXBvcnRVc2VyQWN0aXZpdHlgIHNpbXBseSBzZXRzIHRoaXMudXNlckFjdGl2aXR5XyB0byB0cnVlLCB3aGljaFxuICAgIC8vIHRoZW4gZ2V0cyBwaWNrZWQgdXAgYnkgdGhpcyBsb29wXG4gICAgLy8gaHR0cDovL2Vqb2huLm9yZy9ibG9nL2xlYXJuaW5nLWZyb20tdHdpdHRlci9cblxuICAgIHZhciBpbmFjdGl2aXR5VGltZW91dDtcbiAgICB0aGlzLnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiBtb3VzZS90b3VjaCBhY3Rpdml0eSBoYXMgaGFwcGVuZWRcbiAgICAgIGlmICghdGhpcy51c2VyQWN0aXZpdHlfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gUmVzZXQgdGhlIGFjdGl2aXR5IHRyYWNrZXJcblxuXG4gICAgICB0aGlzLnVzZXJBY3Rpdml0eV8gPSBmYWxzZTsgLy8gSWYgdGhlIHVzZXIgc3RhdGUgd2FzIGluYWN0aXZlLCBzZXQgdGhlIHN0YXRlIHRvIGFjdGl2ZVxuXG4gICAgICB0aGlzLnVzZXJBY3RpdmUodHJ1ZSk7IC8vIENsZWFyIGFueSBleGlzdGluZyBpbmFjdGl2aXR5IHRpbWVvdXQgdG8gc3RhcnQgdGhlIHRpbWVyIG92ZXJcblxuICAgICAgdGhpcy5jbGVhclRpbWVvdXQoaW5hY3Rpdml0eVRpbWVvdXQpO1xuICAgICAgdmFyIHRpbWVvdXQgPSB0aGlzLm9wdGlvbnNfLmluYWN0aXZpdHlUaW1lb3V0O1xuXG4gICAgICBpZiAodGltZW91dCA8PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gSW4gPHRpbWVvdXQ+IG1pbGxpc2Vjb25kcywgaWYgbm8gbW9yZSBhY3Rpdml0eSBoYXMgb2NjdXJyZWQgdGhlXG4gICAgICAvLyB1c2VyIHdpbGwgYmUgY29uc2lkZXJlZCBpbmFjdGl2ZVxuXG5cbiAgICAgIGluYWN0aXZpdHlUaW1lb3V0ID0gdGhpcy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gUHJvdGVjdCBhZ2FpbnN0IHRoZSBjYXNlIHdoZXJlIHRoZSBpbmFjdGl2aXR5VGltZW91dCBjYW4gdHJpZ2dlciBqdXN0XG4gICAgICAgIC8vIGJlZm9yZSB0aGUgbmV4dCB1c2VyIGFjdGl2aXR5IGlzIHBpY2tlZCB1cCBieSB0aGUgYWN0aXZpdHkgY2hlY2sgbG9vcFxuICAgICAgICAvLyBjYXVzaW5nIGEgZmxpY2tlclxuICAgICAgICBpZiAoIXRoaXMudXNlckFjdGl2aXR5Xykge1xuICAgICAgICAgIHRoaXMudXNlckFjdGl2ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIHRpbWVvdXQpO1xuICAgIH0sIDI1MCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgY3VycmVudCBwbGF5YmFjayByYXRlLiBBIHBsYXliYWNrIHJhdGUgb2ZcbiAgICogMS4wIHJlcHJlc2VudHMgbm9ybWFsIHNwZWVkIGFuZCAwLjUgd291bGQgaW5kaWNhdGUgaGFsZi1zcGVlZFxuICAgKiBwbGF5YmFjaywgZm9yIGluc3RhbmNlLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCNkb20tbWVkaWEtcGxheWJhY2tyYXRlXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbcmF0ZV1cbiAgICogICAgICAgTmV3IHBsYXliYWNrIHJhdGUgdG8gc2V0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqICAgICAgICAgVGhlIGN1cnJlbnQgcGxheWJhY2sgcmF0ZSB3aGVuIGdldHRpbmcgb3IgMS4wXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBsYXliYWNrUmF0ZSA9IGZ1bmN0aW9uIHBsYXliYWNrUmF0ZShyYXRlKSB7XG4gICAgaWYgKHJhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gTk9URTogdGhpcy5jYWNoZV8ubGFzdFBsYXliYWNrUmF0ZSBpcyBzZXQgZnJvbSB0aGUgdGVjaCBoYW5kbGVyXG4gICAgICAvLyB0aGF0IGlzIHJlZ2lzdGVyZWQgYWJvdmVcbiAgICAgIHRoaXMudGVjaENhbGxfKCdzZXRQbGF5YmFja1JhdGUnLCByYXRlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy50ZWNoXyAmJiB0aGlzLnRlY2hfLmZlYXR1cmVzUGxheWJhY2tSYXRlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jYWNoZV8ubGFzdFBsYXliYWNrUmF0ZSB8fCB0aGlzLnRlY2hHZXRfKCdwbGF5YmFja1JhdGUnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gMS4wO1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIGN1cnJlbnQgZGVmYXVsdCBwbGF5YmFjayByYXRlLiBBIGRlZmF1bHQgcGxheWJhY2sgcmF0ZSBvZlxuICAgKiAxLjAgcmVwcmVzZW50cyBub3JtYWwgc3BlZWQgYW5kIDAuNSB3b3VsZCBpbmRpY2F0ZSBoYWxmLXNwZWVkIHBsYXliYWNrLCBmb3IgaW5zdGFuY2UuXG4gICAqIGRlZmF1bHRQbGF5YmFja1JhdGUgd2lsbCBvbmx5IHJlcHJlc2VudCB3aGF0IHRoZSBpbml0aWFsIHBsYXliYWNrUmF0ZSBvZiBhIHZpZGVvIHdhcywgbm90XG4gICAqIG5vdCB0aGUgY3VycmVudCBwbGF5YmFja1JhdGUuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZW1iZWRkZWQtY29udGVudC5odG1sI2RvbS1tZWRpYS1kZWZhdWx0cGxheWJhY2tyYXRlXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbcmF0ZV1cbiAgICogICAgICAgTmV3IGRlZmF1bHQgcGxheWJhY2sgcmF0ZSB0byBzZXQuXG4gICAqXG4gICAqIEByZXR1cm4ge251bWJlcnxQbGF5ZXJ9XG4gICAqICAgICAgICAgLSBUaGUgZGVmYXVsdCBwbGF5YmFjayByYXRlIHdoZW4gZ2V0dGluZyBvciAxLjBcbiAgICogICAgICAgICAtIHRoZSBwbGF5ZXIgd2hlbiBzZXR0aW5nXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmRlZmF1bHRQbGF5YmFja1JhdGUgPSBmdW5jdGlvbiBkZWZhdWx0UGxheWJhY2tSYXRlKHJhdGUpIHtcbiAgICBpZiAocmF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZWNoQ2FsbF8oJ3NldERlZmF1bHRQbGF5YmFja1JhdGUnLCByYXRlKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy50ZWNoXyAmJiB0aGlzLnRlY2hfLmZlYXR1cmVzUGxheWJhY2tSYXRlKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZWNoR2V0XygnZGVmYXVsdFBsYXliYWNrUmF0ZScpO1xuICAgIH1cblxuICAgIHJldHVybiAxLjA7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgb3Igc2V0cyB0aGUgYXVkaW8gZmxhZ1xuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGJvb2xcbiAgICogICAgICAgIC0gdHJ1ZSBzaWduYWxzIHRoYXQgdGhpcyBpcyBhbiBhdWRpbyBwbGF5ZXJcbiAgICogICAgICAgIC0gZmFsc2Ugc2lnbmFscyB0aGF0IHRoaXMgaXMgbm90IGFuIGF1ZGlvIHBsYXllclxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiAgICAgICAgIFRoZSBjdXJyZW50IHZhbHVlIG9mIGlzQXVkaW8gd2hlbiBnZXR0aW5nXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmlzQXVkaW8gPSBmdW5jdGlvbiBpc0F1ZGlvKGJvb2wpIHtcbiAgICBpZiAoYm9vbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmlzQXVkaW9fID0gISFib29sO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiAhIXRoaXMuaXNBdWRpb187XG4gIH1cbiAgLyoqXG4gICAqIEEgaGVscGVyIG1ldGhvZCBmb3IgYWRkaW5nIGEge0BsaW5rIFRleHRUcmFja30gdG8gb3VyXG4gICAqIHtAbGluayBUZXh0VHJhY2tMaXN0fS5cbiAgICpcbiAgICogSW4gYWRkaXRpb24gdG8gdGhlIFczQyBzZXR0aW5ncyB3ZSBhbGxvdyBhZGRpbmcgYWRkaXRpb25hbCBpbmZvIHRocm91Z2ggb3B0aW9ucy5cbiAgICpcbiAgICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9odG1sL3dnL2RyYWZ0cy9odG1sL21hc3Rlci9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtYWRkdGV4dHRyYWNrXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBba2luZF1cbiAgICogICAgICAgIHRoZSBraW5kIG9mIFRleHRUcmFjayB5b3UgYXJlIGFkZGluZ1xuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xhYmVsXVxuICAgKiAgICAgICAgdGhlIGxhYmVsIHRvIGdpdmUgdGhlIFRleHRUcmFjayBsYWJlbFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xhbmd1YWdlXVxuICAgKiAgICAgICAgdGhlIGxhbmd1YWdlIHRvIHNldCBvbiB0aGUgVGV4dFRyYWNrXG4gICAqXG4gICAqIEByZXR1cm4ge1RleHRUcmFja3x1bmRlZmluZWR9XG4gICAqICAgICAgICAgdGhlIFRleHRUcmFjayB0aGF0IHdhcyBhZGRlZCBvciB1bmRlZmluZWRcbiAgICogICAgICAgICBpZiB0aGVyZSBpcyBubyB0ZWNoXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmFkZFRleHRUcmFjayA9IGZ1bmN0aW9uIGFkZFRleHRUcmFjayhraW5kLCBsYWJlbCwgbGFuZ3VhZ2UpIHtcbiAgICBpZiAodGhpcy50ZWNoXykge1xuICAgICAgcmV0dXJuIHRoaXMudGVjaF8uYWRkVGV4dFRyYWNrKGtpbmQsIGxhYmVsLCBsYW5ndWFnZSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSByZW1vdGUge0BsaW5rIFRleHRUcmFja30gYW5kIGFuIHtAbGluayBIVE1MVHJhY2tFbGVtZW50fS4gSXQgd2lsbFxuICAgKiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgZnJvbSB0aGUgdmlkZW8gZWxlbWVudCB3aGVuZXZlciB0aGUgc291cmNlIGNoYW5nZXMsIHVubGVzc1xuICAgKiBtYW51YWxDbGVhbnVwIGlzIHNldCB0byBmYWxzZS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogICAgICAgIE9wdGlvbnMgdG8gcGFzcyB0byB7QGxpbmsgSFRNTFRyYWNrRWxlbWVudH0gZHVyaW5nIGNyZWF0aW9uLiBTZWVcbiAgICogICAgICAgIHtAbGluayBIVE1MVHJhY2tFbGVtZW50fSBmb3Igb2JqZWN0IHByb3BlcnRpZXMgdGhhdCB5b3Ugc2hvdWxkIHVzZS5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbbWFudWFsQ2xlYW51cD10cnVlXSBpZiBzZXQgdG8gZmFsc2UsIHRoZSBUZXh0VHJhY2sgd2lsbCBiZVxuICAgKlxuICAgKiBAcmV0dXJuIHtIdG1sVHJhY2tFbGVtZW50fVxuICAgKiAgICAgICAgIHRoZSBIVE1MVHJhY2tFbGVtZW50IHRoYXQgd2FzIGNyZWF0ZWQgYW5kIGFkZGVkXG4gICAqICAgICAgICAgdG8gdGhlIEh0bWxUcmFja0VsZW1lbnRMaXN0IGFuZCB0aGUgcmVtb3RlXG4gICAqICAgICAgICAgVGV4dFRyYWNrTGlzdFxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCBUaGUgZGVmYXVsdCB2YWx1ZSBvZiB0aGUgXCJtYW51YWxDbGVhbnVwXCIgcGFyYW1ldGVyIHdpbGwgZGVmYXVsdFxuICAgKiAgICAgICAgICAgICB0byBcImZhbHNlXCIgaW4gdXBjb21pbmcgdmVyc2lvbnMgb2YgVmlkZW8uanNcbiAgICovXG4gIDtcblxuICBfcHJvdG8uYWRkUmVtb3RlVGV4dFRyYWNrID0gZnVuY3Rpb24gYWRkUmVtb3RlVGV4dFRyYWNrKG9wdGlvbnMsIG1hbnVhbENsZWFudXApIHtcbiAgICBpZiAodGhpcy50ZWNoXykge1xuICAgICAgcmV0dXJuIHRoaXMudGVjaF8uYWRkUmVtb3RlVGV4dFRyYWNrKG9wdGlvbnMsIG1hbnVhbENsZWFudXApO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIGEgcmVtb3RlIHtAbGluayBUZXh0VHJhY2t9IGZyb20gdGhlIHJlc3BlY3RpdmVcbiAgICoge0BsaW5rIFRleHRUcmFja0xpc3R9IGFuZCB7QGxpbmsgSHRtbFRyYWNrRWxlbWVudExpc3R9LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gdHJhY2tcbiAgICogICAgICAgIFJlbW90ZSB7QGxpbmsgVGV4dFRyYWNrfSB0byByZW1vdmVcbiAgICpcbiAgICogQHJldHVybiB7dW5kZWZpbmVkfVxuICAgKiAgICAgICAgIGRvZXMgbm90IHJldHVybiBhbnl0aGluZ1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5yZW1vdmVSZW1vdGVUZXh0VHJhY2sgPSBmdW5jdGlvbiByZW1vdmVSZW1vdGVUZXh0VHJhY2sob2JqKSB7XG4gICAgaWYgKG9iaiA9PT0gdm9pZCAwKSB7XG4gICAgICBvYmogPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgdHJhY2sgPSBfb2JqLnRyYWNrO1xuXG4gICAgaWYgKCF0cmFjaykge1xuICAgICAgdHJhY2sgPSBvYmo7XG4gICAgfSAvLyBkZXN0cnVjdHVyZSB0aGUgaW5wdXQgaW50byBhbiBvYmplY3Qgd2l0aCBhIHRyYWNrIGFyZ3VtZW50LCBkZWZhdWx0aW5nIHRvIGFyZ3VtZW50c1swXVxuICAgIC8vIGRlZmF1bHQgdGhlIHdob2xlIGFyZ3VtZW50IHRvIGFuIGVtcHR5IG9iamVjdCBpZiBub3RoaW5nIHdhcyBwYXNzZWQgaW5cblxuXG4gICAgaWYgKHRoaXMudGVjaF8pIHtcbiAgICAgIHJldHVybiB0aGlzLnRlY2hfLnJlbW92ZVJlbW90ZVRleHRUcmFjayh0cmFjayk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXRzIGF2YWlsYWJsZSBtZWRpYSBwbGF5YmFjayBxdWFsaXR5IG1ldHJpY3MgYXMgc3BlY2lmaWVkIGJ5IHRoZSBXM0MncyBNZWRpYVxuICAgKiBQbGF5YmFjayBRdWFsaXR5IEFQSS5cbiAgICpcbiAgICogQHNlZSBbU3BlY117QGxpbmsgaHR0cHM6Ly93aWNnLmdpdGh1Yi5pby9tZWRpYS1wbGF5YmFjay1xdWFsaXR5fVxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuICAgKiAgICAgICAgIEFuIG9iamVjdCB3aXRoIHN1cHBvcnRlZCBtZWRpYSBwbGF5YmFjayBxdWFsaXR5IG1ldHJpY3Mgb3IgdW5kZWZpbmVkIGlmIHRoZXJlXG4gICAqICAgICAgICAgaXMgbm8gdGVjaCBvciB0aGUgdGVjaCBkb2VzIG5vdCBzdXBwb3J0IGl0LlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5nZXRWaWRlb1BsYXliYWNrUXVhbGl0eSA9IGZ1bmN0aW9uIGdldFZpZGVvUGxheWJhY2tRdWFsaXR5KCkge1xuICAgIHJldHVybiB0aGlzLnRlY2hHZXRfKCdnZXRWaWRlb1BsYXliYWNrUXVhbGl0eScpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdmlkZW8gd2lkdGhcbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIGN1cnJlbnQgdmlkZW8gd2lkdGhcbiAgICovXG4gIDtcblxuICBfcHJvdG8udmlkZW9XaWR0aCA9IGZ1bmN0aW9uIHZpZGVvV2lkdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMudGVjaF8gJiYgdGhpcy50ZWNoXy52aWRlb1dpZHRoICYmIHRoaXMudGVjaF8udmlkZW9XaWR0aCgpIHx8IDA7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB2aWRlbyBoZWlnaHRcbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiAgICAgICAgIGN1cnJlbnQgdmlkZW8gaGVpZ2h0XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnZpZGVvSGVpZ2h0ID0gZnVuY3Rpb24gdmlkZW9IZWlnaHQoKSB7XG4gICAgcmV0dXJuIHRoaXMudGVjaF8gJiYgdGhpcy50ZWNoXy52aWRlb0hlaWdodCAmJiB0aGlzLnRlY2hfLnZpZGVvSGVpZ2h0KCkgfHwgMDtcbiAgfVxuICAvKipcbiAgICogVGhlIHBsYXllcidzIGxhbmd1YWdlIGNvZGVcbiAgICogTk9URTogVGhlIGxhbmd1YWdlIHNob3VsZCBiZSBzZXQgaW4gdGhlIHBsYXllciBvcHRpb25zIGlmIHlvdSB3YW50IHRoZVxuICAgKiB0aGUgY29udHJvbHMgdG8gYmUgYnVpbHQgd2l0aCBhIHNwZWNpZmljIGxhbmd1YWdlLiBDaGFuZ2luZyB0aGUgbGFuZ3VhZ2VcbiAgICogbGF0ZXIgd2lsbCBub3QgdXBkYXRlIGNvbnRyb2xzIHRleHQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV1cbiAgICogICAgICAgIHRoZSBsYW5ndWFnZSBjb2RlIHRvIHNldCB0aGUgcGxheWVyIHRvXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICBUaGUgY3VycmVudCBsYW5ndWFnZSBjb2RlIHdoZW4gZ2V0dGluZ1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5sYW5ndWFnZSA9IGZ1bmN0aW9uIGxhbmd1YWdlKGNvZGUpIHtcbiAgICBpZiAoY29kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5sYW5ndWFnZV87XG4gICAgfVxuXG4gICAgdGhpcy5sYW5ndWFnZV8gPSBTdHJpbmcoY29kZSkudG9Mb3dlckNhc2UoKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBwbGF5ZXIncyBsYW5ndWFnZSBkaWN0aW9uYXJ5XG4gICAqIE1lcmdlIGV2ZXJ5IHRpbWUsIGJlY2F1c2UgYSBuZXdseSBhZGRlZCBwbHVnaW4gbWlnaHQgY2FsbCB2aWRlb2pzLmFkZExhbmd1YWdlKCkgYXQgYW55IHRpbWVcbiAgICogTGFuZ3VhZ2VzIHNwZWNpZmllZCBkaXJlY3RseSBpbiB0aGUgcGxheWVyIG9wdGlvbnMgaGF2ZSBwcmVjZWRlbmNlXG4gICAqXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKiAgICAgICAgIEFuIGFycmF5IG9mIG9mIHN1cHBvcnRlZCBsYW5ndWFnZXNcbiAgICovXG4gIDtcblxuICBfcHJvdG8ubGFuZ3VhZ2VzID0gZnVuY3Rpb24gbGFuZ3VhZ2VzKCkge1xuICAgIHJldHVybiBtZXJnZU9wdGlvbnMoUGxheWVyLnByb3RvdHlwZS5vcHRpb25zXy5sYW5ndWFnZXMsIHRoaXMubGFuZ3VhZ2VzXyk7XG4gIH1cbiAgLyoqXG4gICAqIHJldHVybnMgYSBKYXZhU2NyaXB0IG9iamVjdCByZXBlcmVzZW50aW5nIHRoZSBjdXJyZW50IHRyYWNrXG4gICAqIGluZm9ybWF0aW9uLiAqKkRPRVMgbm90IHJldHVybiBpdCBhcyBKU09OKipcbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKiAgICAgICAgIE9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgb2YgdHJhY2sgaW5mb1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBtZXJnZU9wdGlvbnModGhpcy5vcHRpb25zXyk7XG4gICAgdmFyIHRyYWNrcyA9IG9wdGlvbnMudHJhY2tzO1xuICAgIG9wdGlvbnMudHJhY2tzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHRyYWNrID0gdHJhY2tzW2ldOyAvLyBkZWVwIG1lcmdlIHRyYWNrcyBhbmQgbnVsbCBvdXQgcGxheWVyIHNvIG5vIGNpcmN1bGFyIHJlZmVyZW5jZXNcblxuICAgICAgdHJhY2sgPSBtZXJnZU9wdGlvbnModHJhY2spO1xuICAgICAgdHJhY2sucGxheWVyID0gdW5kZWZpbmVkO1xuICAgICAgb3B0aW9ucy50cmFja3NbaV0gPSB0cmFjaztcbiAgICB9XG5cbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBhIHNpbXBsZSBtb2RhbCBkaWFsb2cgKGFuIGluc3RhbmNlIG9mIHRoZSB7QGxpbmsgTW9kYWxEaWFsb2d9XG4gICAqIGNvbXBvbmVudCkgdGhhdCBpbW1lZGlhdGVseSBvdmVybGF5cyB0aGUgcGxheWVyIHdpdGggYXJiaXRyYXJ5XG4gICAqIGNvbnRlbnQgYW5kIHJlbW92ZXMgaXRzZWxmIHdoZW4gY2xvc2VkLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xGdW5jdGlvbnxFbGVtZW50fEFycmF5fG51bGx9IGNvbnRlbnRcbiAgICogICAgICAgIFNhbWUgYXMge0BsaW5rIE1vZGFsRGlhbG9nI2NvbnRlbnR9J3MgcGFyYW0gb2YgdGhlIHNhbWUgbmFtZS5cbiAgICogICAgICAgIFRoZSBtb3N0IHN0cmFpZ2h0LWZvcndhcmQgdXNhZ2UgaXMgdG8gcHJvdmlkZSBhIHN0cmluZyBvciBET01cbiAgICogICAgICAgIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgIEV4dHJhIG9wdGlvbnMgd2hpY2ggd2lsbCBiZSBwYXNzZWQgb24gdG8gdGhlIHtAbGluayBNb2RhbERpYWxvZ30uXG4gICAqXG4gICAqIEByZXR1cm4ge01vZGFsRGlhbG9nfVxuICAgKiAgICAgICAgIHRoZSB7QGxpbmsgTW9kYWxEaWFsb2d9IHRoYXQgd2FzIGNyZWF0ZWRcbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3JlYXRlTW9kYWwgPSBmdW5jdGlvbiBjcmVhdGVNb2RhbChjb250ZW50LCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzMTQgPSB0aGlzO1xuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgb3B0aW9ucy5jb250ZW50ID0gY29udGVudCB8fCAnJztcbiAgICB2YXIgbW9kYWwgPSBuZXcgTW9kYWxEaWFsb2codGhpcywgb3B0aW9ucyk7XG4gICAgdGhpcy5hZGRDaGlsZChtb2RhbCk7XG4gICAgbW9kYWwub24oJ2Rpc3Bvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpczE0LnJlbW92ZUNoaWxkKG1vZGFsKTtcbiAgICB9KTtcbiAgICBtb2RhbC5vcGVuKCk7XG4gICAgcmV0dXJuIG1vZGFsO1xuICB9XG4gIC8qKlxuICAgKiBDaGFuZ2UgYnJlYWtwb2ludCBjbGFzc2VzIHdoZW4gdGhlIHBsYXllciByZXNpemVzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by51cGRhdGVDdXJyZW50QnJlYWtwb2ludF8gPSBmdW5jdGlvbiB1cGRhdGVDdXJyZW50QnJlYWtwb2ludF8oKSB7XG4gICAgaWYgKCF0aGlzLnJlc3BvbnNpdmUoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBjdXJyZW50QnJlYWtwb2ludCA9IHRoaXMuY3VycmVudEJyZWFrcG9pbnQoKTtcbiAgICB2YXIgY3VycmVudFdpZHRoID0gdGhpcy5jdXJyZW50V2lkdGgoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQlJFQUtQT0lOVF9PUkRFUi5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGNhbmRpZGF0ZUJyZWFrcG9pbnQgPSBCUkVBS1BPSU5UX09SREVSW2ldO1xuICAgICAgdmFyIG1heFdpZHRoID0gdGhpcy5icmVha3BvaW50c19bY2FuZGlkYXRlQnJlYWtwb2ludF07XG5cbiAgICAgIGlmIChjdXJyZW50V2lkdGggPD0gbWF4V2lkdGgpIHtcbiAgICAgICAgLy8gVGhlIGN1cnJlbnQgYnJlYWtwb2ludCBkaWQgbm90IGNoYW5nZSwgbm90aGluZyB0byBkby5cbiAgICAgICAgaWYgKGN1cnJlbnRCcmVha3BvaW50ID09PSBjYW5kaWRhdGVCcmVha3BvaW50KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIE9ubHkgcmVtb3ZlIGEgY2xhc3MgaWYgdGhlcmUgaXMgYSBjdXJyZW50IGJyZWFrcG9pbnQuXG5cblxuICAgICAgICBpZiAoY3VycmVudEJyZWFrcG9pbnQpIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKEJSRUFLUE9JTlRfQ0xBU1NFU1tjdXJyZW50QnJlYWtwb2ludF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hZGRDbGFzcyhCUkVBS1BPSU5UX0NMQVNTRVNbY2FuZGlkYXRlQnJlYWtwb2ludF0pO1xuICAgICAgICB0aGlzLmJyZWFrcG9pbnRfID0gY2FuZGlkYXRlQnJlYWtwb2ludDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBjdXJyZW50IGJyZWFrcG9pbnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlbW92ZUN1cnJlbnRCcmVha3BvaW50XyA9IGZ1bmN0aW9uIHJlbW92ZUN1cnJlbnRCcmVha3BvaW50XygpIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gdGhpcy5jdXJyZW50QnJlYWtwb2ludENsYXNzKCk7XG4gICAgdGhpcy5icmVha3BvaW50XyA9ICcnO1xuXG4gICAgaWYgKGNsYXNzTmFtZSkge1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IG9yIHNldCBicmVha3BvaW50cyBvbiB0aGUgcGxheWVyLlxuICAgKlxuICAgKiBDYWxsaW5nIHRoaXMgbWV0aG9kIHdpdGggYW4gb2JqZWN0IG9yIGB0cnVlYCB3aWxsIHJlbW92ZSBhbnkgcHJldmlvdXNcbiAgICogY3VzdG9tIGJyZWFrcG9pbnRzIGFuZCBzdGFydCBmcm9tIHRoZSBkZWZhdWx0cyBhZ2Fpbi5cbiAgICpcbiAgICogQHBhcmFtICB7T2JqZWN0fGJvb2xlYW59IFticmVha3BvaW50c11cbiAgICogICAgICAgICBJZiBhbiBvYmplY3QgaXMgZ2l2ZW4sIGl0IGNhbiBiZSB1c2VkIHRvIHByb3ZpZGUgY3VzdG9tXG4gICAqICAgICAgICAgYnJlYWtwb2ludHMuIElmIGB0cnVlYCBpcyBnaXZlbiwgd2lsbCBzZXQgZGVmYXVsdCBicmVha3BvaW50cy5cbiAgICogICAgICAgICBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBnaXZlbiwgd2lsbCBzaW1wbHkgcmV0dXJuIHRoZSBjdXJyZW50XG4gICAqICAgICAgICAgYnJlYWtwb2ludHMuXG4gICAqXG4gICAqIEBwYXJhbSAge251bWJlcn0gW2JyZWFrcG9pbnRzLnRpbnldXG4gICAqICAgICAgICAgVGhlIG1heGltdW0gd2lkdGggZm9yIHRoZSBcInZqcy1sYXlvdXQtdGlueVwiIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0gIHtudW1iZXJ9IFticmVha3BvaW50cy54c21hbGxdXG4gICAqICAgICAgICAgVGhlIG1heGltdW0gd2lkdGggZm9yIHRoZSBcInZqcy1sYXlvdXQteC1zbWFsbFwiIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0gIHtudW1iZXJ9IFticmVha3BvaW50cy5zbWFsbF1cbiAgICogICAgICAgICBUaGUgbWF4aW11bSB3aWR0aCBmb3IgdGhlIFwidmpzLWxheW91dC1zbWFsbFwiIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0gIHtudW1iZXJ9IFticmVha3BvaW50cy5tZWRpdW1dXG4gICAqICAgICAgICAgVGhlIG1heGltdW0gd2lkdGggZm9yIHRoZSBcInZqcy1sYXlvdXQtbWVkaXVtXCIgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSAge251bWJlcn0gW2JyZWFrcG9pbnRzLmxhcmdlXVxuICAgKiAgICAgICAgIFRoZSBtYXhpbXVtIHdpZHRoIGZvciB0aGUgXCJ2anMtbGF5b3V0LWxhcmdlXCIgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSAge251bWJlcn0gW2JyZWFrcG9pbnRzLnhsYXJnZV1cbiAgICogICAgICAgICBUaGUgbWF4aW11bSB3aWR0aCBmb3IgdGhlIFwidmpzLWxheW91dC14LWxhcmdlXCIgY2xhc3MuXG4gICAqXG4gICAqIEBwYXJhbSAge251bWJlcn0gW2JyZWFrcG9pbnRzLmh1Z2VdXG4gICAqICAgICAgICAgVGhlIG1heGltdW0gd2lkdGggZm9yIHRoZSBcInZqcy1sYXlvdXQtaHVnZVwiIGNsYXNzLlxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqICAgICAgICAgQW4gb2JqZWN0IG1hcHBpbmcgYnJlYWtwb2ludCBuYW1lcyB0byBtYXhpbXVtIHdpZHRoIHZhbHVlcy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uYnJlYWtwb2ludHMgPSBmdW5jdGlvbiBicmVha3BvaW50cyhfYnJlYWtwb2ludHMpIHtcbiAgICAvLyBVc2VkIGFzIGEgZ2V0dGVyLlxuICAgIGlmIChfYnJlYWtwb2ludHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGFzc2lnbih0aGlzLmJyZWFrcG9pbnRzXyk7XG4gICAgfVxuXG4gICAgdGhpcy5icmVha3BvaW50XyA9ICcnO1xuICAgIHRoaXMuYnJlYWtwb2ludHNfID0gYXNzaWduKHt9LCBERUZBVUxUX0JSRUFLUE9JTlRTLCBfYnJlYWtwb2ludHMpOyAvLyBXaGVuIGJyZWFrcG9pbnQgZGVmaW5pdGlvbnMgY2hhbmdlLCB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgY3VycmVudGx5XG4gICAgLy8gc2VsZWN0ZWQgYnJlYWtwb2ludC5cblxuICAgIHRoaXMudXBkYXRlQ3VycmVudEJyZWFrcG9pbnRfKCk7IC8vIENsb25lIHRoZSBicmVha3BvaW50cyBiZWZvcmUgcmV0dXJuaW5nLlxuXG4gICAgcmV0dXJuIGFzc2lnbih0aGlzLmJyZWFrcG9pbnRzXyk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBvciBzZXQgYSBmbGFnIGluZGljYXRpbmcgd2hldGhlciBvciBub3QgdGhpcyBwbGF5ZXIgc2hvdWxkIGFkanVzdFxuICAgKiBpdHMgVUkgYmFzZWQgb24gaXRzIGRpbWVuc2lvbnMuXG4gICAqXG4gICAqIEBwYXJhbSAge2Jvb2xlYW59IHZhbHVlXG4gICAqICAgICAgICAgU2hvdWxkIGJlIGB0cnVlYCBpZiB0aGUgcGxheWVyIHNob3VsZCBhZGp1c3QgaXRzIFVJIGJhc2VkIG9uIGl0c1xuICAgKiAgICAgICAgIGRpbWVuc2lvbnM7IG90aGVyd2lzZSwgc2hvdWxkIGJlIGBmYWxzZWAuXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqICAgICAgICAgV2lsbCBiZSBgdHJ1ZWAgaWYgdGhpcyBwbGF5ZXIgc2hvdWxkIGFkanVzdCBpdHMgVUkgYmFzZWQgb24gaXRzXG4gICAqICAgICAgICAgZGltZW5zaW9uczsgb3RoZXJ3aXNlLCB3aWxsIGJlIGBmYWxzZWAuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlc3BvbnNpdmUgPSBmdW5jdGlvbiByZXNwb25zaXZlKHZhbHVlKSB7XG4gICAgLy8gVXNlZCBhcyBhIGdldHRlci5cbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2l2ZV87XG4gICAgfVxuXG4gICAgdmFsdWUgPSBCb29sZWFuKHZhbHVlKTtcbiAgICB2YXIgY3VycmVudCA9IHRoaXMucmVzcG9uc2l2ZV87IC8vIE5vdGhpbmcgY2hhbmdlZC5cblxuICAgIGlmICh2YWx1ZSA9PT0gY3VycmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gVGhlIHZhbHVlIGFjdHVhbGx5IGNoYW5nZWQsIHNldCBpdC5cblxuXG4gICAgdGhpcy5yZXNwb25zaXZlXyA9IHZhbHVlOyAvLyBTdGFydCBsaXN0ZW5pbmcgZm9yIGJyZWFrcG9pbnRzIGFuZCBzZXQgdGhlIGluaXRpYWwgYnJlYWtwb2ludCBpZiB0aGVcbiAgICAvLyBwbGF5ZXIgaXMgbm93IHJlc3BvbnNpdmUuXG5cbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHRoaXMub24oJ3BsYXllcnJlc2l6ZScsIHRoaXMudXBkYXRlQ3VycmVudEJyZWFrcG9pbnRfKTtcbiAgICAgIHRoaXMudXBkYXRlQ3VycmVudEJyZWFrcG9pbnRfKCk7IC8vIFN0b3AgbGlzdGVuaW5nIGZvciBicmVha3BvaW50cyBpZiB0aGUgcGxheWVyIGlzIG5vIGxvbmdlciByZXNwb25zaXZlLlxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9mZigncGxheWVycmVzaXplJywgdGhpcy51cGRhdGVDdXJyZW50QnJlYWtwb2ludF8pO1xuICAgICAgdGhpcy5yZW1vdmVDdXJyZW50QnJlYWtwb2ludF8oKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IGJyZWFrcG9pbnQgbmFtZSwgaWYgYW55LlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgSWYgdGhlcmUgaXMgY3VycmVudGx5IGEgYnJlYWtwb2ludCBzZXQsIHJldHVybnMgYSB0aGUga2V5IGZyb20gdGhlXG4gICAqICAgICAgICAgYnJlYWtwb2ludHMgb2JqZWN0IG1hdGNoaW5nIGl0LiBPdGhlcndpc2UsIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5jdXJyZW50QnJlYWtwb2ludCA9IGZ1bmN0aW9uIGN1cnJlbnRCcmVha3BvaW50KCkge1xuICAgIHJldHVybiB0aGlzLmJyZWFrcG9pbnRfO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgYnJlYWtwb2ludCBjbGFzcyBuYW1lLlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqICAgICAgICAgVGhlIG1hdGNoaW5nIGNsYXNzIG5hbWUgKGUuZy4gYFwidmpzLWxheW91dC10aW55XCJgIG9yXG4gICAqICAgICAgICAgYFwidmpzLWxheW91dC1sYXJnZVwiYCkgZm9yIHRoZSBjdXJyZW50IGJyZWFrcG9pbnQuIEVtcHR5IHN0cmluZyBpZlxuICAgKiAgICAgICAgIHRoZXJlIGlzIG5vIGN1cnJlbnQgYnJlYWtwb2ludC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uY3VycmVudEJyZWFrcG9pbnRDbGFzcyA9IGZ1bmN0aW9uIGN1cnJlbnRCcmVha3BvaW50Q2xhc3MoKSB7XG4gICAgcmV0dXJuIEJSRUFLUE9JTlRfQ0xBU1NFU1t0aGlzLmJyZWFrcG9pbnRfXSB8fCAnJztcbiAgfVxuICAvKipcbiAgICogQW4gb2JqZWN0IHRoYXQgZGVzY3JpYmVzIGEgc2luZ2xlIHBpZWNlIG9mIG1lZGlhLlxuICAgKlxuICAgKiBQcm9wZXJ0aWVzIHRoYXQgYXJlIG5vdCBwYXJ0IG9mIHRoaXMgdHlwZSBkZXNjcmlwdGlvbiB3aWxsIGJlIHJldGFpbmVkOyBzbyxcbiAgICogdGhpcyBjYW4gYmUgdmlld2VkIGFzIGEgZ2VuZXJpYyBtZXRhZGF0YSBzdG9yYWdlIG1lY2hhbmlzbSBhcyB3ZWxsLlxuICAgKlxuICAgKiBAc2VlICAgICAge0BsaW5rIGh0dHBzOi8vd2ljZy5naXRodWIuaW8vbWVkaWFzZXNzaW9uLyN0aGUtbWVkaWFtZXRhZGF0YS1pbnRlcmZhY2V9XG4gICAqIEB0eXBlZGVmICB7T2JqZWN0fSBQbGF5ZXJ+TWVkaWFPYmplY3RcbiAgICpcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFthbGJ1bV1cbiAgICogICAgICAgICAgIFVudXNlZCwgZXhjZXB0IGlmIHRoaXMgb2JqZWN0IGlzIHBhc3NlZCB0byB0aGUgYE1lZGlhU2Vzc2lvbmBcbiAgICogICAgICAgICAgIEFQSS5cbiAgICpcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFthcnRpc3RdXG4gICAqICAgICAgICAgICBVbnVzZWQsIGV4Y2VwdCBpZiB0aGlzIG9iamVjdCBpcyBwYXNzZWQgdG8gdGhlIGBNZWRpYVNlc3Npb25gXG4gICAqICAgICAgICAgICBBUEkuXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7T2JqZWN0W119IFthcnR3b3JrXVxuICAgKiAgICAgICAgICAgVW51c2VkLCBleGNlcHQgaWYgdGhpcyBvYmplY3QgaXMgcGFzc2VkIHRvIHRoZSBgTWVkaWFTZXNzaW9uYFxuICAgKiAgICAgICAgICAgQVBJLiBJZiBub3Qgc3BlY2lmaWVkLCB3aWxsIGJlIHBvcHVsYXRlZCB2aWEgdGhlIGBwb3N0ZXJgLCBpZlxuICAgKiAgICAgICAgICAgYXZhaWxhYmxlLlxuICAgKlxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3Bvc3Rlcl1cbiAgICogICAgICAgICAgIFVSTCB0byBhbiBpbWFnZSB0aGF0IHdpbGwgZGlzcGxheSBiZWZvcmUgcGxheWJhY2suXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7VGVjaH5Tb3VyY2VPYmplY3R8VGVjaH5Tb3VyY2VPYmplY3RbXXxzdHJpbmd9IFtzcmNdXG4gICAqICAgICAgICAgICBBIHNpbmdsZSBzb3VyY2Ugb2JqZWN0LCBhbiBhcnJheSBvZiBzb3VyY2Ugb2JqZWN0cywgb3IgYSBzdHJpbmdcbiAgICogICAgICAgICAgIHJlZmVyZW5jaW5nIGEgVVJMIHRvIGEgbWVkaWEgc291cmNlLiBJdCBpcyBfaGlnaGx5IHJlY29tbWVuZGVkX1xuICAgKiAgICAgICAgICAgdGhhdCBhbiBvYmplY3Qgb3IgYXJyYXkgb2Ygb2JqZWN0cyBpcyB1c2VkIGhlcmUsIHNvIHRoYXQgc291cmNlXG4gICAqICAgICAgICAgICBzZWxlY3Rpb24gYWxnb3JpdGhtcyBjYW4gdGFrZSB0aGUgYHR5cGVgIGludG8gYWNjb3VudC5cbiAgICpcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFt0aXRsZV1cbiAgICogICAgICAgICAgIFVudXNlZCwgZXhjZXB0IGlmIHRoaXMgb2JqZWN0IGlzIHBhc3NlZCB0byB0aGUgYE1lZGlhU2Vzc2lvbmBcbiAgICogICAgICAgICAgIEFQSS5cbiAgICpcbiAgICogQHByb3BlcnR5IHtPYmplY3RbXX0gW3RleHRUcmFja3NdXG4gICAqICAgICAgICAgICBBbiBhcnJheSBvZiBvYmplY3RzIHRvIGJlIHVzZWQgdG8gY3JlYXRlIHRleHQgdHJhY2tzLCBmb2xsb3dpbmdcbiAgICogICAgICAgICAgIHRoZSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1MC9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCN0aGUtdHJhY2stZWxlbWVudHxuYXRpdmUgdHJhY2sgZWxlbWVudCBmb3JtYXR9LlxuICAgKiAgICAgICAgICAgRm9yIGVhc2Ugb2YgcmVtb3ZhbCwgdGhlc2Ugd2lsbCBiZSBjcmVhdGVkIGFzIFwicmVtb3RlXCIgdGV4dFxuICAgKiAgICAgICAgICAgdHJhY2tzIGFuZCBzZXQgdG8gYXV0b21hdGljYWxseSBjbGVhbiB1cCBvbiBzb3VyY2UgY2hhbmdlcy5cbiAgICpcbiAgICogICAgICAgICAgIFRoZXNlIG9iamVjdHMgbWF5IGhhdmUgcHJvcGVydGllcyBsaWtlIGBzcmNgLCBga2luZGAsIGBsYWJlbGAsXG4gICAqICAgICAgICAgICBhbmQgYGxhbmd1YWdlYCwgc2VlIHtAbGluayBUZWNoI2NyZWF0ZVJlbW90ZVRleHRUcmFja30uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQb3B1bGF0ZSB0aGUgcGxheWVyIHVzaW5nIGEge0BsaW5rIFBsYXllcn5NZWRpYU9iamVjdHxNZWRpYU9iamVjdH0uXG4gICAqXG4gICAqIEBwYXJhbSAge1BsYXllcn5NZWRpYU9iamVjdH0gbWVkaWFcbiAgICogICAgICAgICBBIG1lZGlhIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtICB7RnVuY3Rpb259IHJlYWR5XG4gICAqICAgICAgICAgQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgd2hlbiB0aGUgcGxheWVyIGlzIHJlYWR5LlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5sb2FkTWVkaWEgPSBmdW5jdGlvbiBsb2FkTWVkaWEobWVkaWEsIHJlYWR5KSB7XG4gICAgdmFyIF90aGlzMTUgPSB0aGlzO1xuXG4gICAgaWYgKCFtZWRpYSB8fCB0eXBlb2YgbWVkaWEgIT09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5yZXNldCgpOyAvLyBDbG9uZSB0aGUgbWVkaWEgb2JqZWN0IHNvIGl0IGNhbm5vdCBiZSBtdXRhdGVkIGZyb20gb3V0c2lkZS5cblxuICAgIHRoaXMuY2FjaGVfLm1lZGlhID0gbWVyZ2VPcHRpb25zKG1lZGlhKTtcbiAgICB2YXIgX3RoaXMkY2FjaGVfJG1lZGlhID0gdGhpcy5jYWNoZV8ubWVkaWEsXG4gICAgICAgIGFydHdvcmsgPSBfdGhpcyRjYWNoZV8kbWVkaWEuYXJ0d29yayxcbiAgICAgICAgcG9zdGVyID0gX3RoaXMkY2FjaGVfJG1lZGlhLnBvc3RlcixcbiAgICAgICAgc3JjID0gX3RoaXMkY2FjaGVfJG1lZGlhLnNyYyxcbiAgICAgICAgdGV4dFRyYWNrcyA9IF90aGlzJGNhY2hlXyRtZWRpYS50ZXh0VHJhY2tzOyAvLyBJZiBgYXJ0d29ya2AgaXMgbm90IGdpdmVuLCBjcmVhdGUgaXQgdXNpbmcgYHBvc3RlcmAuXG5cbiAgICBpZiAoIWFydHdvcmsgJiYgcG9zdGVyKSB7XG4gICAgICB0aGlzLmNhY2hlXy5tZWRpYS5hcnR3b3JrID0gW3tcbiAgICAgICAgc3JjOiBwb3N0ZXIsXG4gICAgICAgIHR5cGU6IGdldE1pbWV0eXBlKHBvc3RlcilcbiAgICAgIH1dO1xuICAgIH1cblxuICAgIGlmIChzcmMpIHtcbiAgICAgIHRoaXMuc3JjKHNyYyk7XG4gICAgfVxuXG4gICAgaWYgKHBvc3Rlcikge1xuICAgICAgdGhpcy5wb3N0ZXIocG9zdGVyKTtcbiAgICB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0ZXh0VHJhY2tzKSkge1xuICAgICAgdGV4dFRyYWNrcy5mb3JFYWNoKGZ1bmN0aW9uICh0dCkge1xuICAgICAgICByZXR1cm4gX3RoaXMxNS5hZGRSZW1vdGVUZXh0VHJhY2sodHQsIGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMucmVhZHkocmVhZHkpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBjbG9uZSBvZiB0aGUgY3VycmVudCB7QGxpbmsgUGxheWVyfk1lZGlhT2JqZWN0fSBmb3IgdGhpcyBwbGF5ZXIuXG4gICAqXG4gICAqIElmIHRoZSBgbG9hZE1lZGlhYCBtZXRob2QgaGFzIG5vdCBiZWVuIHVzZWQsIHdpbGwgYXR0ZW1wdCB0byByZXR1cm4gYVxuICAgKiB7QGxpbmsgUGxheWVyfk1lZGlhT2JqZWN0fSBiYXNlZCBvbiB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgcGxheWVyLlxuICAgKlxuICAgKiBAcmV0dXJuIHtQbGF5ZXJ+TWVkaWFPYmplY3R9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmdldE1lZGlhID0gZnVuY3Rpb24gZ2V0TWVkaWEoKSB7XG4gICAgaWYgKCF0aGlzLmNhY2hlXy5tZWRpYSkge1xuICAgICAgdmFyIHBvc3RlciA9IHRoaXMucG9zdGVyKCk7XG4gICAgICB2YXIgc3JjID0gdGhpcy5jdXJyZW50U291cmNlcygpO1xuICAgICAgdmFyIHRleHRUcmFja3MgPSBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwodGhpcy5yZW1vdGVUZXh0VHJhY2tzKCksIGZ1bmN0aW9uICh0dCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGtpbmQ6IHR0LmtpbmQsXG4gICAgICAgICAgbGFiZWw6IHR0LmxhYmVsLFxuICAgICAgICAgIGxhbmd1YWdlOiB0dC5sYW5ndWFnZSxcbiAgICAgICAgICBzcmM6IHR0LnNyY1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgICB2YXIgbWVkaWEgPSB7XG4gICAgICAgIHNyYzogc3JjLFxuICAgICAgICB0ZXh0VHJhY2tzOiB0ZXh0VHJhY2tzXG4gICAgICB9O1xuXG4gICAgICBpZiAocG9zdGVyKSB7XG4gICAgICAgIG1lZGlhLnBvc3RlciA9IHBvc3RlcjtcbiAgICAgICAgbWVkaWEuYXJ0d29yayA9IFt7XG4gICAgICAgICAgc3JjOiBtZWRpYS5wb3N0ZXIsXG4gICAgICAgICAgdHlwZTogZ2V0TWltZXR5cGUobWVkaWEucG9zdGVyKVxuICAgICAgICB9XTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG1lZGlhO1xuICAgIH1cblxuICAgIHJldHVybiBtZXJnZU9wdGlvbnModGhpcy5jYWNoZV8ubWVkaWEpO1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIHRhZyBzZXR0aW5nc1xuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhZ1xuICAgKiAgICAgICAgVGhlIHBsYXllciB0YWdcbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKiAgICAgICAgIEFuIG9iamVjdCBjb250YWluaW5nIGFsbCBvZiB0aGUgc2V0dGluZ3NcbiAgICogICAgICAgICBmb3IgYSBwbGF5ZXIgdGFnXG4gICAqL1xuICA7XG5cbiAgUGxheWVyLmdldFRhZ1NldHRpbmdzID0gZnVuY3Rpb24gZ2V0VGFnU2V0dGluZ3ModGFnKSB7XG4gICAgdmFyIGJhc2VPcHRpb25zID0ge1xuICAgICAgc291cmNlczogW10sXG4gICAgICB0cmFja3M6IFtdXG4gICAgfTtcbiAgICB2YXIgdGFnT3B0aW9ucyA9IGdldEF0dHJpYnV0ZXModGFnKTtcbiAgICB2YXIgZGF0YVNldHVwID0gdGFnT3B0aW9uc1snZGF0YS1zZXR1cCddO1xuXG4gICAgaWYgKGhhc0NsYXNzKHRhZywgJ3Zqcy1maWxsJykpIHtcbiAgICAgIHRhZ09wdGlvbnMuZmlsbCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGhhc0NsYXNzKHRhZywgJ3Zqcy1mbHVpZCcpKSB7XG4gICAgICB0YWdPcHRpb25zLmZsdWlkID0gdHJ1ZTtcbiAgICB9IC8vIENoZWNrIGlmIGRhdGEtc2V0dXAgYXR0ciBleGlzdHMuXG5cblxuICAgIGlmIChkYXRhU2V0dXAgIT09IG51bGwpIHtcbiAgICAgIC8vIFBhcnNlIG9wdGlvbnMgSlNPTlxuICAgICAgLy8gSWYgZW1wdHkgc3RyaW5nLCBtYWtlIGl0IGEgcGFyc2FibGUganNvbiBvYmplY3QuXG4gICAgICB2YXIgX3NhZmVQYXJzZVR1cGxlID0gc2FmZVBhcnNlVHVwbGUoZGF0YVNldHVwIHx8ICd7fScpLFxuICAgICAgICAgIGVyciA9IF9zYWZlUGFyc2VUdXBsZVswXSxcbiAgICAgICAgICBkYXRhID0gX3NhZmVQYXJzZVR1cGxlWzFdO1xuXG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGxvZy5lcnJvcihlcnIpO1xuICAgICAgfVxuXG4gICAgICBhc3NpZ24odGFnT3B0aW9ucywgZGF0YSk7XG4gICAgfVxuXG4gICAgYXNzaWduKGJhc2VPcHRpb25zLCB0YWdPcHRpb25zKTsgLy8gR2V0IHRhZyBjaGlsZHJlbiBzZXR0aW5nc1xuXG4gICAgaWYgKHRhZy5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgIHZhciBjaGlsZHJlbiA9IHRhZy5jaGlsZE5vZGVzO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgaiA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTsgLy8gQ2hhbmdlIGNhc2UgbmVlZGVkOiBodHRwOi8vZWpvaG4ub3JnL2Jsb2cvbm9kZW5hbWUtY2FzZS1zZW5zaXRpdml0eS9cblxuICAgICAgICB2YXIgY2hpbGROYW1lID0gY2hpbGQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICBpZiAoY2hpbGROYW1lID09PSAnc291cmNlJykge1xuICAgICAgICAgIGJhc2VPcHRpb25zLnNvdXJjZXMucHVzaChnZXRBdHRyaWJ1dGVzKGNoaWxkKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2hpbGROYW1lID09PSAndHJhY2snKSB7XG4gICAgICAgICAgYmFzZU9wdGlvbnMudHJhY2tzLnB1c2goZ2V0QXR0cmlidXRlcyhjaGlsZCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGJhc2VPcHRpb25zO1xuICB9XG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgd2hldGhlciBvciBub3QgZmxleGJveCBpcyBzdXBwb3J0ZWRcbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICAtIHRydWUgaWYgZmxleGJveCBpcyBzdXBwb3J0ZWRcbiAgICogICAgICAgICAtIGZhbHNlIGlmIGZsZXhib3ggaXMgbm90IHN1cHBvcnRlZFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5mbGV4Tm90U3VwcG9ydGVkXyA9IGZ1bmN0aW9uIGZsZXhOb3RTdXBwb3J0ZWRfKCkge1xuICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpOyAvLyBOb3RlOiBXZSBkb24ndCBhY3R1YWxseSB1c2UgZmxleEJhc2lzIChvciBmbGV4T3JkZXIpLCBidXQgaXQncyBvbmUgb2YgdGhlIG1vcmVcbiAgICAvLyBjb21tb24gZmxleCBmZWF0dXJlcyB0aGF0IHdlIGNhbiByZWx5IG9uIHdoZW4gY2hlY2tpbmcgZm9yIGZsZXggc3VwcG9ydC5cblxuICAgIHJldHVybiAhKCdmbGV4QmFzaXMnIGluIGVsZW0uc3R5bGUgfHwgJ3dlYmtpdEZsZXhCYXNpcycgaW4gZWxlbS5zdHlsZSB8fCAnbW96RmxleEJhc2lzJyBpbiBlbGVtLnN0eWxlIHx8ICdtc0ZsZXhCYXNpcycgaW4gZWxlbS5zdHlsZSB8fCAvLyBJRTEwLXNwZWNpZmljICgyMDEyIGZsZXggc3BlYyksIGF2YWlsYWJsZSBmb3IgY29tcGxldGVuZXNzXG4gICAgJ21zRmxleE9yZGVyJyBpbiBlbGVtLnN0eWxlKTtcbiAgfTtcblxuICByZXR1cm4gUGxheWVyO1xufShDb21wb25lbnQpO1xuLyoqXG4gKiBHZXQgdGhlIHtAbGluayBWaWRlb1RyYWNrTGlzdH1cbiAqIEBsaW5rIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCN2aWRlb3RyYWNrbGlzdFxuICpcbiAqIEByZXR1cm4ge1ZpZGVvVHJhY2tMaXN0fVxuICogICAgICAgICB0aGUgY3VycmVudCB2aWRlbyB0cmFjayBsaXN0XG4gKlxuICogQG1ldGhvZCBQbGF5ZXIucHJvdG90eXBlLnZpZGVvVHJhY2tzXG4gKi9cblxuLyoqXG4gKiBHZXQgdGhlIHtAbGluayBBdWRpb1RyYWNrTGlzdH1cbiAqIEBsaW5rIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCNhdWRpb3RyYWNrbGlzdFxuICpcbiAqIEByZXR1cm4ge0F1ZGlvVHJhY2tMaXN0fVxuICogICAgICAgICB0aGUgY3VycmVudCBhdWRpbyB0cmFjayBsaXN0XG4gKlxuICogQG1ldGhvZCBQbGF5ZXIucHJvdG90eXBlLmF1ZGlvVHJhY2tzXG4gKi9cblxuLyoqXG4gKiBHZXQgdGhlIHtAbGluayBUZXh0VHJhY2tMaXN0fVxuICpcbiAqIEBsaW5rIGh0dHA6Ly93d3cudzMub3JnL2h0bWwvd2cvZHJhZnRzL2h0bWwvbWFzdGVyL2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS10ZXh0dHJhY2tzXG4gKlxuICogQHJldHVybiB7VGV4dFRyYWNrTGlzdH1cbiAqICAgICAgICAgdGhlIGN1cnJlbnQgdGV4dCB0cmFjayBsaXN0XG4gKlxuICogQG1ldGhvZCBQbGF5ZXIucHJvdG90eXBlLnRleHRUcmFja3NcbiAqL1xuXG4vKipcbiAqIEdldCB0aGUgcmVtb3RlIHtAbGluayBUZXh0VHJhY2tMaXN0fVxuICpcbiAqIEByZXR1cm4ge1RleHRUcmFja0xpc3R9XG4gKiAgICAgICAgIFRoZSBjdXJyZW50IHJlbW90ZSB0ZXh0IHRyYWNrIGxpc3RcbiAqXG4gKiBAbWV0aG9kIFBsYXllci5wcm90b3R5cGUucmVtb3RlVGV4dFRyYWNrc1xuICovXG5cbi8qKlxuICogR2V0IHRoZSByZW1vdGUge0BsaW5rIEh0bWxUcmFja0VsZW1lbnRMaXN0fSB0cmFja3MuXG4gKlxuICogQHJldHVybiB7SHRtbFRyYWNrRWxlbWVudExpc3R9XG4gKiAgICAgICAgIFRoZSBjdXJyZW50IHJlbW90ZSB0ZXh0IHRyYWNrIGVsZW1lbnQgbGlzdFxuICpcbiAqIEBtZXRob2QgUGxheWVyLnByb3RvdHlwZS5yZW1vdGVUZXh0VHJhY2tFbHNcbiAqL1xuXG5cbkFMTC5uYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lJCQxKSB7XG4gIHZhciBwcm9wcyA9IEFMTFtuYW1lJCQxXTtcblxuICBQbGF5ZXIucHJvdG90eXBlW3Byb3BzLmdldHRlck5hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnRlY2hfKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZWNoX1twcm9wcy5nZXR0ZXJOYW1lXSgpO1xuICAgIH0gLy8gaWYgd2UgaGF2ZSBub3QgeWV0IGxvYWRUZWNoXywgd2UgY3JlYXRlIHt2aWRlbyxhdWRpbyx0ZXh0fVRyYWNrc19cbiAgICAvLyB0aGVzZSB3aWxsIGJlIHBhc3NlZCB0byB0aGUgdGVjaCBkdXJpbmcgbG9hZGluZ1xuXG5cbiAgICB0aGlzW3Byb3BzLnByaXZhdGVOYW1lXSA9IHRoaXNbcHJvcHMucHJpdmF0ZU5hbWVdIHx8IG5ldyBwcm9wcy5MaXN0Q2xhc3MoKTtcbiAgICByZXR1cm4gdGhpc1twcm9wcy5wcml2YXRlTmFtZV07XG4gIH07XG59KTtcbi8qKlxuICogR2xvYmFsIGVudW1lcmF0aW9uIG9mIHBsYXllcnMuXG4gKlxuICogVGhlIGtleXMgYXJlIHRoZSBwbGF5ZXIgSURzIGFuZCB0aGUgdmFsdWVzIGFyZSBlaXRoZXIgdGhlIHtAbGluayBQbGF5ZXJ9XG4gKiBpbnN0YW5jZSBvciBgbnVsbGAgZm9yIGRpc3Bvc2VkIHBsYXllcnMuXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqL1xuXG5QbGF5ZXIucGxheWVycyA9IHt9O1xudmFyIG5hdmlnYXRvciA9IHdpbmRvdyQxLm5hdmlnYXRvcjtcbi8qXG4gKiBQbGF5ZXIgaW5zdGFuY2Ugb3B0aW9ucywgc3VyZmFjZWQgdXNpbmcgb3B0aW9uc1xuICogb3B0aW9ucyA9IFBsYXllci5wcm90b3R5cGUub3B0aW9uc19cbiAqIE1ha2UgY2hhbmdlcyBpbiBvcHRpb25zLCBub3QgaGVyZS5cbiAqXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuXG5QbGF5ZXIucHJvdG90eXBlLm9wdGlvbnNfID0ge1xuICAvLyBEZWZhdWx0IG9yZGVyIG9mIGZhbGxiYWNrIHRlY2hub2xvZ3lcbiAgdGVjaE9yZGVyOiBUZWNoLmRlZmF1bHRUZWNoT3JkZXJfLFxuICBodG1sNToge30sXG4gIGZsYXNoOiB7fSxcbiAgLy8gZGVmYXVsdCBpbmFjdGl2aXR5IHRpbWVvdXRcbiAgaW5hY3Rpdml0eVRpbWVvdXQ6IDIwMDAsXG4gIC8vIGRlZmF1bHQgcGxheWJhY2sgcmF0ZXNcbiAgcGxheWJhY2tSYXRlczogW10sXG4gIC8vIEFkZCBwbGF5YmFjayByYXRlIHNlbGVjdGlvbiBieSBhZGRpbmcgcmF0ZXNcbiAgLy8gJ3BsYXliYWNrUmF0ZXMnOiBbMC41LCAxLCAxLjUsIDJdLFxuICBsaXZldWk6IGZhbHNlLFxuICAvLyBJbmNsdWRlZCBjb250cm9sIHNldHNcbiAgY2hpbGRyZW46IFsnbWVkaWFMb2FkZXInLCAncG9zdGVySW1hZ2UnLCAndGV4dFRyYWNrRGlzcGxheScsICdsb2FkaW5nU3Bpbm5lcicsICdiaWdQbGF5QnV0dG9uJywgJ2xpdmVUcmFja2VyJywgJ2NvbnRyb2xCYXInLCAnZXJyb3JEaXNwbGF5JywgJ3RleHRUcmFja1NldHRpbmdzJywgJ3Jlc2l6ZU1hbmFnZXInXSxcbiAgbGFuZ3VhZ2U6IG5hdmlnYXRvciAmJiAobmF2aWdhdG9yLmxhbmd1YWdlcyAmJiBuYXZpZ2F0b3IubGFuZ3VhZ2VzWzBdIHx8IG5hdmlnYXRvci51c2VyTGFuZ3VhZ2UgfHwgbmF2aWdhdG9yLmxhbmd1YWdlKSB8fCAnZW4nLFxuICAvLyBsb2NhbGVzIGFuZCB0aGVpciBsYW5ndWFnZSB0cmFuc2xhdGlvbnNcbiAgbGFuZ3VhZ2VzOiB7fSxcbiAgLy8gRGVmYXVsdCBtZXNzYWdlIHRvIHNob3cgd2hlbiBhIHZpZGVvIGNhbm5vdCBiZSBwbGF5ZWQuXG4gIG5vdFN1cHBvcnRlZE1lc3NhZ2U6ICdObyBjb21wYXRpYmxlIHNvdXJjZSB3YXMgZm91bmQgZm9yIHRoaXMgbWVkaWEuJyxcbiAgYnJlYWtwb2ludHM6IHt9LFxuICByZXNwb25zaXZlOiBmYWxzZVxufTtcbltcbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgcGxheWVyIGlzIGluIHRoZSBcImVuZGVkXCIgc3RhdGUuXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgcGxheWVyIGlzIGluIHRoZSBlbmRlZCBzdGF0ZSwgZmFsc2UgaWYgbm90LlxuICogQG1ldGhvZCBQbGF5ZXIjZW5kZWRcbiAqL1xuJ2VuZGVkJyxcbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgcGxheWVyIGlzIGluIHRoZSBcInNlZWtpbmdcIiBzdGF0ZS5cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIHRoZSBwbGF5ZXIgaXMgaW4gdGhlIHNlZWtpbmcgc3RhdGUsIGZhbHNlIGlmIG5vdC5cbiAqIEBtZXRob2QgUGxheWVyI3NlZWtpbmdcbiAqL1xuJ3NlZWtpbmcnLFxuLyoqXG4gKiBSZXR1cm5zIHRoZSBUaW1lUmFuZ2VzIG9mIHRoZSBtZWRpYSB0aGF0IGFyZSBjdXJyZW50bHkgYXZhaWxhYmxlXG4gKiBmb3Igc2Vla2luZyB0by5cbiAqXG4gKiBAcmV0dXJuIHtUaW1lUmFuZ2VzfSB0aGUgc2Vla2FibGUgaW50ZXJ2YWxzIG9mIHRoZSBtZWRpYSB0aW1lbGluZVxuICogQG1ldGhvZCBQbGF5ZXIjc2Vla2FibGVcbiAqL1xuJ3NlZWthYmxlJyxcbi8qKlxuICogUmV0dXJucyB0aGUgY3VycmVudCBzdGF0ZSBvZiBuZXR3b3JrIGFjdGl2aXR5IGZvciB0aGUgZWxlbWVudCwgZnJvbVxuICogdGhlIGNvZGVzIGluIHRoZSBsaXN0IGJlbG93LlxuICogLSBORVRXT1JLX0VNUFRZIChudW1lcmljIHZhbHVlIDApXG4gKiAgIFRoZSBlbGVtZW50IGhhcyBub3QgeWV0IGJlZW4gaW5pdGlhbGlzZWQuIEFsbCBhdHRyaWJ1dGVzIGFyZSBpblxuICogICB0aGVpciBpbml0aWFsIHN0YXRlcy5cbiAqIC0gTkVUV09SS19JRExFIChudW1lcmljIHZhbHVlIDEpXG4gKiAgIFRoZSBlbGVtZW50J3MgcmVzb3VyY2Ugc2VsZWN0aW9uIGFsZ29yaXRobSBpcyBhY3RpdmUgYW5kIGhhc1xuICogICBzZWxlY3RlZCBhIHJlc291cmNlLCBidXQgaXQgaXMgbm90IGFjdHVhbGx5IHVzaW5nIHRoZSBuZXR3b3JrIGF0XG4gKiAgIHRoaXMgdGltZS5cbiAqIC0gTkVUV09SS19MT0FESU5HIChudW1lcmljIHZhbHVlIDIpXG4gKiAgIFRoZSB1c2VyIGFnZW50IGlzIGFjdGl2ZWx5IHRyeWluZyB0byBkb3dubG9hZCBkYXRhLlxuICogLSBORVRXT1JLX05PX1NPVVJDRSAobnVtZXJpYyB2YWx1ZSAzKVxuICogICBUaGUgZWxlbWVudCdzIHJlc291cmNlIHNlbGVjdGlvbiBhbGdvcml0aG0gaXMgYWN0aXZlLCBidXQgaXQgaGFzXG4gKiAgIG5vdCB5ZXQgZm91bmQgYSByZXNvdXJjZSB0byB1c2UuXG4gKlxuICogQHNlZSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9lbWJlZGRlZC1jb250ZW50Lmh0bWwjbmV0d29yay1zdGF0ZXNcbiAqIEByZXR1cm4ge251bWJlcn0gdGhlIGN1cnJlbnQgbmV0d29yayBhY3Rpdml0eSBzdGF0ZVxuICogQG1ldGhvZCBQbGF5ZXIjbmV0d29ya1N0YXRlXG4gKi9cbiduZXR3b3JrU3RhdGUnLFxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgdGhhdCBleHByZXNzZXMgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGVsZW1lbnRcbiAqIHdpdGggcmVzcGVjdCB0byByZW5kZXJpbmcgdGhlIGN1cnJlbnQgcGxheWJhY2sgcG9zaXRpb24sIGZyb20gdGhlXG4gKiBjb2RlcyBpbiB0aGUgbGlzdCBiZWxvdy5cbiAqIC0gSEFWRV9OT1RISU5HIChudW1lcmljIHZhbHVlIDApXG4gKiAgIE5vIGluZm9ybWF0aW9uIHJlZ2FyZGluZyB0aGUgbWVkaWEgcmVzb3VyY2UgaXMgYXZhaWxhYmxlLlxuICogLSBIQVZFX01FVEFEQVRBIChudW1lcmljIHZhbHVlIDEpXG4gKiAgIEVub3VnaCBvZiB0aGUgcmVzb3VyY2UgaGFzIGJlZW4gb2J0YWluZWQgdGhhdCB0aGUgZHVyYXRpb24gb2YgdGhlXG4gKiAgIHJlc291cmNlIGlzIGF2YWlsYWJsZS5cbiAqIC0gSEFWRV9DVVJSRU5UX0RBVEEgKG51bWVyaWMgdmFsdWUgMilcbiAqICAgRGF0YSBmb3IgdGhlIGltbWVkaWF0ZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uIGlzIGF2YWlsYWJsZS5cbiAqIC0gSEFWRV9GVVRVUkVfREFUQSAobnVtZXJpYyB2YWx1ZSAzKVxuICogICBEYXRhIGZvciB0aGUgaW1tZWRpYXRlIGN1cnJlbnQgcGxheWJhY2sgcG9zaXRpb24gaXMgYXZhaWxhYmxlLCBhc1xuICogICB3ZWxsIGFzIGVub3VnaCBkYXRhIGZvciB0aGUgdXNlciBhZ2VudCB0byBhZHZhbmNlIHRoZSBjdXJyZW50XG4gKiAgIHBsYXliYWNrIHBvc2l0aW9uIGluIHRoZSBkaXJlY3Rpb24gb2YgcGxheWJhY2suXG4gKiAtIEhBVkVfRU5PVUdIX0RBVEEgKG51bWVyaWMgdmFsdWUgNClcbiAqICAgVGhlIHVzZXIgYWdlbnQgZXN0aW1hdGVzIHRoYXQgZW5vdWdoIGRhdGEgaXMgYXZhaWxhYmxlIGZvclxuICogICBwbGF5YmFjayB0byBwcm9jZWVkIHVuaW50ZXJydXB0ZWQuXG4gKlxuICogQHNlZSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9lbWJlZGRlZC1jb250ZW50Lmh0bWwjZG9tLW1lZGlhLXJlYWR5c3RhdGVcbiAqIEByZXR1cm4ge251bWJlcn0gdGhlIGN1cnJlbnQgcGxheWJhY2sgcmVuZGVyaW5nIHN0YXRlXG4gKiBAbWV0aG9kIFBsYXllciNyZWFkeVN0YXRlXG4gKi9cbidyZWFkeVN0YXRlJ10uZm9yRWFjaChmdW5jdGlvbiAoZm4pIHtcbiAgUGxheWVyLnByb3RvdHlwZVtmbl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGVjaEdldF8oZm4pO1xuICB9O1xufSk7XG5URUNIX0VWRU5UU19SRVRSSUdHRVIuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgUGxheWVyLnByb3RvdHlwZVtcImhhbmRsZVRlY2hcIiArIHRvVGl0bGVDYXNlKGV2ZW50KSArIFwiX1wiXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyKGV2ZW50KTtcbiAgfTtcbn0pO1xuLyoqXG4gKiBGaXJlZCB3aGVuIHRoZSBwbGF5ZXIgaGFzIGluaXRpYWwgZHVyYXRpb24gYW5kIGRpbWVuc2lvbiBpbmZvcm1hdGlvblxuICpcbiAqIEBldmVudCBQbGF5ZXIjbG9hZGVkbWV0YWRhdGFcbiAqIEB0eXBlIHtFdmVudFRhcmdldH5FdmVudH1cbiAqL1xuXG4vKipcbiAqIEZpcmVkIHdoZW4gdGhlIHBsYXllciBoYXMgZG93bmxvYWRlZCBkYXRhIGF0IHRoZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uXG4gKlxuICogQGV2ZW50IFBsYXllciNsb2FkZWRkYXRhXG4gKiBAdHlwZSB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gKi9cblxuLyoqXG4gKiBGaXJlZCB3aGVuIHRoZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uIGhhcyBjaGFuZ2VkICpcbiAqIER1cmluZyBwbGF5YmFjayB0aGlzIGlzIGZpcmVkIGV2ZXJ5IDE1LTI1MCBtaWxsaXNlY29uZHMsIGRlcGVuZGluZyBvbiB0aGVcbiAqIHBsYXliYWNrIHRlY2hub2xvZ3kgaW4gdXNlLlxuICpcbiAqIEBldmVudCBQbGF5ZXIjdGltZXVwZGF0ZVxuICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICovXG5cbi8qKlxuICogRmlyZWQgd2hlbiB0aGUgdm9sdW1lIGNoYW5nZXNcbiAqXG4gKiBAZXZlbnQgUGxheWVyI3ZvbHVtZWNoYW5nZVxuICogQHR5cGUge0V2ZW50VGFyZ2V0fkV2ZW50fVxuICovXG5cbi8qKlxuICogUmVwb3J0cyB3aGV0aGVyIG9yIG5vdCBhIHBsYXllciBoYXMgYSBwbHVnaW4gYXZhaWxhYmxlLlxuICpcbiAqIFRoaXMgZG9lcyBub3QgcmVwb3J0IHdoZXRoZXIgb3Igbm90IHRoZSBwbHVnaW4gaGFzIGV2ZXIgYmVlbiBpbml0aWFsaXplZFxuICogb24gdGhpcyBwbGF5ZXIuIEZvciB0aGF0LCBbdXNpbmdQbHVnaW5de0BsaW5rIFBsYXllciN1c2luZ1BsdWdpbn0uXG4gKlxuICogQG1ldGhvZCBQbGF5ZXIjaGFzUGx1Z2luXG4gKiBAcGFyYW0gIHtzdHJpbmd9ICBuYW1lXG4gKiAgICAgICAgIFRoZSBuYW1lIG9mIGEgcGx1Z2luLlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiAgICAgICAgIFdoZXRoZXIgb3Igbm90IHRoaXMgcGxheWVyIGhhcyB0aGUgcmVxdWVzdGVkIHBsdWdpbiBhdmFpbGFibGUuXG4gKi9cblxuLyoqXG4gKiBSZXBvcnRzIHdoZXRoZXIgb3Igbm90IGEgcGxheWVyIGlzIHVzaW5nIGEgcGx1Z2luIGJ5IG5hbWUuXG4gKlxuICogRm9yIGJhc2ljIHBsdWdpbnMsIHRoaXMgb25seSByZXBvcnRzIHdoZXRoZXIgdGhlIHBsdWdpbiBoYXMgX2V2ZXJfIGJlZW5cbiAqIGluaXRpYWxpemVkIG9uIHRoaXMgcGxheWVyLlxuICpcbiAqIEBtZXRob2QgUGxheWVyI3VzaW5nUGx1Z2luXG4gKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWVcbiAqICAgICAgICAgVGhlIG5hbWUgb2YgYSBwbHVnaW4uXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqICAgICAgICAgV2hldGhlciBvciBub3QgdGhpcyBwbGF5ZXIgaXMgdXNpbmcgdGhlIHJlcXVlc3RlZCBwbHVnaW4uXG4gKi9cblxuQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50KCdQbGF5ZXInLCBQbGF5ZXIpO1xuXG4vKipcbiAqIFRoZSBiYXNlIHBsdWdpbiBuYW1lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cblxudmFyIEJBU0VfUExVR0lOX05BTUUgPSAncGx1Z2luJztcbi8qKlxuICogVGhlIGtleSBvbiB3aGljaCBhIHBsYXllcidzIGFjdGl2ZSBwbHVnaW5zIGNhY2hlIGlzIHN0b3JlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0YW50XG4gKiBAdHlwZSAgICAge3N0cmluZ31cbiAqL1xuXG52YXIgUExVR0lOX0NBQ0hFX0tFWSA9ICdhY3RpdmVQbHVnaW5zXyc7XG4vKipcbiAqIFN0b3JlcyByZWdpc3RlcmVkIHBsdWdpbnMgaW4gYSBwcml2YXRlIHNwYWNlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAdHlwZSAgICB7T2JqZWN0fVxuICovXG5cbnZhciBwbHVnaW5TdG9yYWdlID0ge307XG4vKipcbiAqIFJlcG9ydHMgd2hldGhlciBvciBub3QgYSBwbHVnaW4gaGFzIGJlZW4gcmVnaXN0ZXJlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtICAge3N0cmluZ30gbmFtZVxuICogICAgICAgICAgVGhlIG5hbWUgb2YgYSBwbHVnaW4uXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqICAgICAgICAgIFdoZXRoZXIgb3Igbm90IHRoZSBwbHVnaW4gaGFzIGJlZW4gcmVnaXN0ZXJlZC5cbiAqL1xuXG52YXIgcGx1Z2luRXhpc3RzID0gZnVuY3Rpb24gcGx1Z2luRXhpc3RzKG5hbWUpIHtcbiAgcmV0dXJuIHBsdWdpblN0b3JhZ2UuaGFzT3duUHJvcGVydHkobmFtZSk7XG59O1xuLyoqXG4gKiBHZXQgYSBzaW5nbGUgcmVnaXN0ZXJlZCBwbHVnaW4gYnkgbmFtZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtICAge3N0cmluZ30gbmFtZVxuICogICAgICAgICAgVGhlIG5hbWUgb2YgYSBwbHVnaW4uXG4gKlxuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICogICAgICAgICAgVGhlIHBsdWdpbiAob3IgdW5kZWZpbmVkKS5cbiAqL1xuXG5cbnZhciBnZXRQbHVnaW4gPSBmdW5jdGlvbiBnZXRQbHVnaW4obmFtZSkge1xuICByZXR1cm4gcGx1Z2luRXhpc3RzKG5hbWUpID8gcGx1Z2luU3RvcmFnZVtuYW1lXSA6IHVuZGVmaW5lZDtcbn07XG4vKipcbiAqIE1hcmtzIGEgcGx1Z2luIGFzIFwiYWN0aXZlXCIgb24gYSBwbGF5ZXIuXG4gKlxuICogQWxzbywgZW5zdXJlcyB0aGF0IHRoZSBwbGF5ZXIgaGFzIGFuIG9iamVjdCBmb3IgdHJhY2tpbmcgYWN0aXZlIHBsdWdpbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSAgIHtQbGF5ZXJ9IHBsYXllclxuICogICAgICAgICAgQSBWaWRlby5qcyBwbGF5ZXIgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtICAge3N0cmluZ30gbmFtZVxuICogICAgICAgICAgVGhlIG5hbWUgb2YgYSBwbHVnaW4uXG4gKi9cblxuXG52YXIgbWFya1BsdWdpbkFzQWN0aXZlID0gZnVuY3Rpb24gbWFya1BsdWdpbkFzQWN0aXZlKHBsYXllciwgbmFtZSkge1xuICBwbGF5ZXJbUExVR0lOX0NBQ0hFX0tFWV0gPSBwbGF5ZXJbUExVR0lOX0NBQ0hFX0tFWV0gfHwge307XG4gIHBsYXllcltQTFVHSU5fQ0FDSEVfS0VZXVtuYW1lXSA9IHRydWU7XG59O1xuLyoqXG4gKiBUcmlnZ2VycyBhIHBhaXIgb2YgcGx1Z2luIHNldHVwIGV2ZW50cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtICB7UGxheWVyfSBwbGF5ZXJcbiAqICAgICAgICAgQSBWaWRlby5qcyBwbGF5ZXIgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtICB7UGx1Z2luflBsdWdpbkV2ZW50SGFzaH0gaGFzaFxuICogICAgICAgICBBIHBsdWdpbiBldmVudCBoYXNoLlxuICpcbiAqIEBwYXJhbSAge2Jvb2xlYW59IFtiZWZvcmVdXG4gKiAgICAgICAgIElmIHRydWUsIHByZWZpeGVzIHRoZSBldmVudCBuYW1lIHdpdGggXCJiZWZvcmVcIi4gSW4gb3RoZXIgd29yZHMsXG4gKiAgICAgICAgIHVzZSB0aGlzIHRvIHRyaWdnZXIgXCJiZWZvcmVwbHVnaW5zZXR1cFwiIGluc3RlYWQgb2YgXCJwbHVnaW5zZXR1cFwiLlxuICovXG5cblxudmFyIHRyaWdnZXJTZXR1cEV2ZW50ID0gZnVuY3Rpb24gdHJpZ2dlclNldHVwRXZlbnQocGxheWVyLCBoYXNoLCBiZWZvcmUpIHtcbiAgdmFyIGV2ZW50TmFtZSA9IChiZWZvcmUgPyAnYmVmb3JlJyA6ICcnKSArICdwbHVnaW5zZXR1cCc7XG4gIHBsYXllci50cmlnZ2VyKGV2ZW50TmFtZSwgaGFzaCk7XG4gIHBsYXllci50cmlnZ2VyKGV2ZW50TmFtZSArICc6JyArIGhhc2gubmFtZSwgaGFzaCk7XG59O1xuLyoqXG4gKiBUYWtlcyBhIGJhc2ljIHBsdWdpbiBmdW5jdGlvbiBhbmQgcmV0dXJucyBhIHdyYXBwZXIgZnVuY3Rpb24gd2hpY2ggbWFya3NcbiAqIG9uIHRoZSBwbGF5ZXIgdGhhdCB0aGUgcGx1Z2luIGhhcyBiZWVuIGFjdGl2YXRlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtICAge3N0cmluZ30gbmFtZVxuICogICAgICAgICAgVGhlIG5hbWUgb2YgdGhlIHBsdWdpbi5cbiAqXG4gKiBAcGFyYW0gICB7RnVuY3Rpb259IHBsdWdpblxuICogICAgICAgICAgVGhlIGJhc2ljIHBsdWdpbi5cbiAqXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqICAgICAgICAgIEEgd3JhcHBlciBmdW5jdGlvbiBmb3IgdGhlIGdpdmVuIHBsdWdpbi5cbiAqL1xuXG5cbnZhciBjcmVhdGVCYXNpY1BsdWdpbiA9IGZ1bmN0aW9uIGNyZWF0ZUJhc2ljUGx1Z2luKG5hbWUsIHBsdWdpbikge1xuICB2YXIgYmFzaWNQbHVnaW5XcmFwcGVyID0gZnVuY3Rpb24gYmFzaWNQbHVnaW5XcmFwcGVyKCkge1xuICAgIC8vIFdlIHRyaWdnZXIgdGhlIFwiYmVmb3JlcGx1Z2luc2V0dXBcIiBhbmQgXCJwbHVnaW5zZXR1cFwiIGV2ZW50cyBvbiB0aGUgcGxheWVyXG4gICAgLy8gcmVnYXJkbGVzcywgYnV0IHdlIHdhbnQgdGhlIGhhc2ggdG8gYmUgY29uc2lzdGVudCB3aXRoIHRoZSBoYXNoIHByb3ZpZGVkXG4gICAgLy8gZm9yIGFkdmFuY2VkIHBsdWdpbnMuXG4gICAgLy9cbiAgICAvLyBUaGUgb25seSBwb3RlbnRpYWxseSBjb3VudGVyLWludHVpdGl2ZSB0aGluZyBoZXJlIGlzIHRoZSBgaW5zdGFuY2VgIGluXG4gICAgLy8gdGhlIFwicGx1Z2luc2V0dXBcIiBldmVudCBpcyB0aGUgdmFsdWUgcmV0dXJuZWQgYnkgdGhlIGBwbHVnaW5gIGZ1bmN0aW9uLlxuICAgIHRyaWdnZXJTZXR1cEV2ZW50KHRoaXMsIHtcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBwbHVnaW46IHBsdWdpbixcbiAgICAgIGluc3RhbmNlOiBudWxsXG4gICAgfSwgdHJ1ZSk7XG4gICAgdmFyIGluc3RhbmNlID0gcGx1Z2luLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgbWFya1BsdWdpbkFzQWN0aXZlKHRoaXMsIG5hbWUpO1xuICAgIHRyaWdnZXJTZXR1cEV2ZW50KHRoaXMsIHtcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBwbHVnaW46IHBsdWdpbixcbiAgICAgIGluc3RhbmNlOiBpbnN0YW5jZVxuICAgIH0pO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfTtcblxuICBPYmplY3Qua2V5cyhwbHVnaW4pLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHtcbiAgICBiYXNpY1BsdWdpbldyYXBwZXJbcHJvcF0gPSBwbHVnaW5bcHJvcF07XG4gIH0pO1xuICByZXR1cm4gYmFzaWNQbHVnaW5XcmFwcGVyO1xufTtcbi8qKlxuICogVGFrZXMgYSBwbHVnaW4gc3ViLWNsYXNzIGFuZCByZXR1cm5zIGEgZmFjdG9yeSBmdW5jdGlvbiBmb3IgZ2VuZXJhdGluZ1xuICogaW5zdGFuY2VzIG9mIGl0LlxuICpcbiAqIFRoaXMgZmFjdG9yeSBmdW5jdGlvbiB3aWxsIHJlcGxhY2UgaXRzZWxmIHdpdGggYW4gaW5zdGFuY2Ugb2YgdGhlIHJlcXVlc3RlZFxuICogc3ViLWNsYXNzIG9mIFBsdWdpbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtICAge3N0cmluZ30gbmFtZVxuICogICAgICAgICAgVGhlIG5hbWUgb2YgdGhlIHBsdWdpbi5cbiAqXG4gKiBAcGFyYW0gICB7UGx1Z2lufSBQbHVnaW5TdWJDbGFzc1xuICogICAgICAgICAgVGhlIGFkdmFuY2VkIHBsdWdpbi5cbiAqXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5cbnZhciBjcmVhdGVQbHVnaW5GYWN0b3J5ID0gZnVuY3Rpb24gY3JlYXRlUGx1Z2luRmFjdG9yeShuYW1lLCBQbHVnaW5TdWJDbGFzcykge1xuICAvLyBBZGQgYSBgbmFtZWAgcHJvcGVydHkgdG8gdGhlIHBsdWdpbiBwcm90b3R5cGUgc28gdGhhdCBlYWNoIHBsdWdpbiBjYW5cbiAgLy8gcmVmZXIgdG8gaXRzZWxmIGJ5IG5hbWUuXG4gIFBsdWdpblN1YkNsYXNzLnByb3RvdHlwZS5uYW1lID0gbmFtZTtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB0cmlnZ2VyU2V0dXBFdmVudCh0aGlzLCB7XG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgcGx1Z2luOiBQbHVnaW5TdWJDbGFzcyxcbiAgICAgIGluc3RhbmNlOiBudWxsXG4gICAgfSwgdHJ1ZSk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgdmFyIGluc3RhbmNlID0gX2NvbnN0cnVjdChQbHVnaW5TdWJDbGFzcywgW3RoaXNdLmNvbmNhdChhcmdzKSk7IC8vIFRoZSBwbHVnaW4gaXMgcmVwbGFjZWQgYnkgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGN1cnJlbnQgaW5zdGFuY2UuXG5cblxuICAgIHRoaXNbbmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfTtcblxuICAgIHRyaWdnZXJTZXR1cEV2ZW50KHRoaXMsIGluc3RhbmNlLmdldEV2ZW50SGFzaCgpKTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH07XG59O1xuLyoqXG4gKiBQYXJlbnQgY2xhc3MgZm9yIGFsbCBhZHZhbmNlZCBwbHVnaW5zLlxuICpcbiAqIEBtaXhlcyAgIG1vZHVsZTpldmVudGVkfkV2ZW50ZWRNaXhpblxuICogQG1peGVzICAgbW9kdWxlOnN0YXRlZnVsflN0YXRlZnVsTWl4aW5cbiAqIEBmaXJlcyAgIFBsYXllciNiZWZvcmVwbHVnaW5zZXR1cFxuICogQGZpcmVzICAgUGxheWVyI2JlZm9yZXBsdWdpbnNldHVwOiRuYW1lXG4gKiBAZmlyZXMgICBQbGF5ZXIjcGx1Z2luc2V0dXBcbiAqIEBmaXJlcyAgIFBsYXllciNwbHVnaW5zZXR1cDokbmFtZVxuICogQGxpc3RlbnMgUGxheWVyI2Rpc3Bvc2VcbiAqIEB0aHJvd3MgIHtFcnJvcn1cbiAqICAgICAgICAgIElmIGF0dGVtcHRpbmcgdG8gaW5zdGFudGlhdGUgdGhlIGJhc2Uge0BsaW5rIFBsdWdpbn0gY2xhc3NcbiAqICAgICAgICAgIGRpcmVjdGx5IGluc3RlYWQgb2YgdmlhIGEgc3ViLWNsYXNzLlxuICovXG5cblxudmFyIFBsdWdpbiA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIFN1Yi1jbGFzc2VzIHNob3VsZCBjYWxsIGBzdXBlcmAgdG8gZW5zdXJlIHBsdWdpbnMgYXJlIHByb3Blcmx5IGluaXRpYWxpemVkLlxuICAgKlxuICAgKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyXG4gICAqICAgICAgICBBIFZpZGVvLmpzIHBsYXllciBpbnN0YW5jZS5cbiAgICovXG4gIGZ1bmN0aW9uIFBsdWdpbihwbGF5ZXIpIHtcbiAgICBpZiAodGhpcy5jb25zdHJ1Y3RvciA9PT0gUGx1Z2luKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsdWdpbiBtdXN0IGJlIHN1Yi1jbGFzc2VkOyBub3QgZGlyZWN0bHkgaW5zdGFudGlhdGVkLicpO1xuICAgIH1cblxuICAgIHRoaXMucGxheWVyID0gcGxheWVyOyAvLyBNYWtlIHRoaXMgb2JqZWN0IGV2ZW50ZWQsIGJ1dCByZW1vdmUgdGhlIGFkZGVkIGB0cmlnZ2VyYCBtZXRob2Qgc28gd2VcbiAgICAvLyB1c2UgdGhlIHByb3RvdHlwZSB2ZXJzaW9uIGluc3RlYWQuXG5cbiAgICBldmVudGVkKHRoaXMpO1xuICAgIGRlbGV0ZSB0aGlzLnRyaWdnZXI7XG4gICAgc3RhdGVmdWwodGhpcywgdGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0U3RhdGUpO1xuICAgIG1hcmtQbHVnaW5Bc0FjdGl2ZShwbGF5ZXIsIHRoaXMubmFtZSk7IC8vIEF1dG8tYmluZCB0aGUgZGlzcG9zZSBtZXRob2Qgc28gd2UgY2FuIHVzZSBpdCBhcyBhIGxpc3RlbmVyIGFuZCB1bmJpbmRcbiAgICAvLyBpdCBsYXRlciBlYXNpbHkuXG5cbiAgICB0aGlzLmRpc3Bvc2UgPSBiaW5kKHRoaXMsIHRoaXMuZGlzcG9zZSk7IC8vIElmIHRoZSBwbGF5ZXIgaXMgZGlzcG9zZWQsIGRpc3Bvc2UgdGhlIHBsdWdpbi5cblxuICAgIHBsYXllci5vbignZGlzcG9zZScsIHRoaXMuZGlzcG9zZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgdmVyc2lvbiBvZiB0aGUgcGx1Z2luIHRoYXQgd2FzIHNldCBvbiA8cGx1Z2luTmFtZT4uVkVSU0lPTlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBQbHVnaW4ucHJvdG90eXBlO1xuXG4gIF9wcm90by52ZXJzaW9uID0gZnVuY3Rpb24gdmVyc2lvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5WRVJTSU9OO1xuICB9XG4gIC8qKlxuICAgKiBFYWNoIGV2ZW50IHRyaWdnZXJlZCBieSBwbHVnaW5zIGluY2x1ZGVzIGEgaGFzaCBvZiBhZGRpdGlvbmFsIGRhdGEgd2l0aFxuICAgKiBjb252ZW50aW9uYWwgcHJvcGVydGllcy5cbiAgICpcbiAgICogVGhpcyByZXR1cm5zIHRoYXQgb2JqZWN0IG9yIG11dGF0ZXMgYW4gZXhpc3RpbmcgaGFzaC5cbiAgICpcbiAgICogQHBhcmFtICAge09iamVjdH0gW2hhc2g9e31dXG4gICAqICAgICAgICAgIEFuIG9iamVjdCB0byBiZSB1c2VkIGFzIGV2ZW50IGFuIGV2ZW50IGhhc2guXG4gICAqXG4gICAqIEByZXR1cm4ge1BsdWdpbn5QbHVnaW5FdmVudEhhc2h9XG4gICAqICAgICAgICAgIEFuIGV2ZW50IGhhc2ggb2JqZWN0IHdpdGggcHJvdmlkZWQgcHJvcGVydGllcyBtaXhlZC1pbi5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZ2V0RXZlbnRIYXNoID0gZnVuY3Rpb24gZ2V0RXZlbnRIYXNoKGhhc2gpIHtcbiAgICBpZiAoaGFzaCA9PT0gdm9pZCAwKSB7XG4gICAgICBoYXNoID0ge307XG4gICAgfVxuXG4gICAgaGFzaC5uYW1lID0gdGhpcy5uYW1lO1xuICAgIGhhc2gucGx1Z2luID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICBoYXNoLmluc3RhbmNlID0gdGhpcztcbiAgICByZXR1cm4gaGFzaDtcbiAgfVxuICAvKipcbiAgICogVHJpZ2dlcnMgYW4gZXZlbnQgb24gdGhlIHBsdWdpbiBvYmplY3QgYW5kIG92ZXJyaWRlc1xuICAgKiB7QGxpbmsgbW9kdWxlOmV2ZW50ZWR+RXZlbnRlZE1peGluLnRyaWdnZXJ8RXZlbnRlZE1peGluLnRyaWdnZXJ9LlxuICAgKlxuICAgKiBAcGFyYW0gICB7c3RyaW5nfE9iamVjdH0gZXZlbnRcbiAgICogICAgICAgICAgQW4gZXZlbnQgdHlwZSBvciBhbiBvYmplY3Qgd2l0aCBhIHR5cGUgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSAgIHtPYmplY3R9IFtoYXNoPXt9XVxuICAgKiAgICAgICAgICBBZGRpdGlvbmFsIGRhdGEgaGFzaCB0byBtZXJnZSB3aXRoIGFcbiAgICogICAgICAgICAge0BsaW5rIFBsdWdpbn5QbHVnaW5FdmVudEhhc2h8UGx1Z2luRXZlbnRIYXNofS5cbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogICAgICAgICAgV2hldGhlciBvciBub3QgZGVmYXVsdCB3YXMgcHJldmVudGVkLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50cmlnZ2VyID0gZnVuY3Rpb24gdHJpZ2dlciQkMShldmVudCwgaGFzaCkge1xuICAgIGlmIChoYXNoID09PSB2b2lkIDApIHtcbiAgICAgIGhhc2ggPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJpZ2dlcih0aGlzLmV2ZW50QnVzRWxfLCBldmVudCwgdGhpcy5nZXRFdmVudEhhc2goaGFzaCkpO1xuICB9XG4gIC8qKlxuICAgKiBIYW5kbGVzIFwic3RhdGVjaGFuZ2VkXCIgZXZlbnRzIG9uIHRoZSBwbHVnaW4uIE5vLW9wIGJ5IGRlZmF1bHQsIG92ZXJyaWRlIGJ5XG4gICAqIHN1YmNsYXNzaW5nLlxuICAgKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtICAgIHtFdmVudH0gZVxuICAgKiAgICAgICAgICAgQW4gZXZlbnQgb2JqZWN0IHByb3ZpZGVkIGJ5IGEgXCJzdGF0ZWNoYW5nZWRcIiBldmVudC5cbiAgICpcbiAgICogQHBhcmFtICAgIHtPYmplY3R9IGUuY2hhbmdlc1xuICAgKiAgICAgICAgICAgQW4gb2JqZWN0IGRlc2NyaWJpbmcgY2hhbmdlcyB0aGF0IG9jY3VycmVkIHdpdGggdGhlIFwic3RhdGVjaGFuZ2VkXCJcbiAgICogICAgICAgICAgIGV2ZW50LlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5oYW5kbGVTdGF0ZUNoYW5nZWQgPSBmdW5jdGlvbiBoYW5kbGVTdGF0ZUNoYW5nZWQoZSkge31cbiAgLyoqXG4gICAqIERpc3Bvc2VzIGEgcGx1Z2luLlxuICAgKlxuICAgKiBTdWJjbGFzc2VzIGNhbiBvdmVycmlkZSB0aGlzIGlmIHRoZXkgd2FudCwgYnV0IGZvciB0aGUgc2FrZSBvZiBzYWZldHksXG4gICAqIGl0J3MgcHJvYmFibHkgYmVzdCB0byBzdWJzY3JpYmUgdGhlIFwiZGlzcG9zZVwiIGV2ZW50LlxuICAgKlxuICAgKiBAZmlyZXMgUGx1Z2luI2Rpc3Bvc2VcbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgdmFyIG5hbWUgPSB0aGlzLm5hbWUsXG4gICAgICAgIHBsYXllciA9IHRoaXMucGxheWVyO1xuICAgIC8qKlxuICAgICAqIFNpZ25hbHMgdGhhdCBhIGFkdmFuY2VkIHBsdWdpbiBpcyBhYm91dCB0byBiZSBkaXNwb3NlZC5cbiAgICAgKlxuICAgICAqIEBldmVudCBQbHVnaW4jZGlzcG9zZVxuICAgICAqIEB0eXBlICB7RXZlbnRUYXJnZXR+RXZlbnR9XG4gICAgICovXG5cbiAgICB0aGlzLnRyaWdnZXIoJ2Rpc3Bvc2UnKTtcbiAgICB0aGlzLm9mZigpO1xuICAgIHBsYXllci5vZmYoJ2Rpc3Bvc2UnLCB0aGlzLmRpc3Bvc2UpOyAvLyBFbGltaW5hdGUgYW55IHBvc3NpYmxlIHNvdXJjZXMgb2YgbGVha2luZyBtZW1vcnkgYnkgY2xlYXJpbmcgdXBcbiAgICAvLyByZWZlcmVuY2VzIGJldHdlZW4gdGhlIHBsYXllciBhbmQgdGhlIHBsdWdpbiBpbnN0YW5jZSBhbmQgbnVsbGluZyBvdXRcbiAgICAvLyB0aGUgcGx1Z2luJ3Mgc3RhdGUgYW5kIHJlcGxhY2luZyBtZXRob2RzIHdpdGggYSBmdW5jdGlvbiB0aGF0IHRocm93cy5cblxuICAgIHBsYXllcltQTFVHSU5fQ0FDSEVfS0VZXVtuYW1lXSA9IGZhbHNlO1xuICAgIHRoaXMucGxheWVyID0gdGhpcy5zdGF0ZSA9IG51bGw7IC8vIEZpbmFsbHksIHJlcGxhY2UgdGhlIHBsdWdpbiBuYW1lIG9uIHRoZSBwbGF5ZXIgd2l0aCBhIG5ldyBmYWN0b3J5XG4gICAgLy8gZnVuY3Rpb24sIHNvIHRoYXQgdGhlIHBsdWdpbiBpcyByZWFkeSB0byBiZSBzZXQgdXAgYWdhaW4uXG5cbiAgICBwbGF5ZXJbbmFtZV0gPSBjcmVhdGVQbHVnaW5GYWN0b3J5KG5hbWUsIHBsdWdpblN0b3JhZ2VbbmFtZV0pO1xuICB9XG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIGEgcGx1Z2luIGlzIGEgYmFzaWMgcGx1Z2luIChpLmUuIG5vdCBhIHN1Yi1jbGFzcyBvZiBgUGx1Z2luYCkuXG4gICAqXG4gICAqIEBwYXJhbSAgIHtzdHJpbmd8RnVuY3Rpb259IHBsdWdpblxuICAgKiAgICAgICAgICBJZiBhIHN0cmluZywgbWF0Y2hlcyB0aGUgbmFtZSBvZiBhIHBsdWdpbi4gSWYgYSBmdW5jdGlvbiwgd2lsbCBiZVxuICAgKiAgICAgICAgICB0ZXN0ZWQgZGlyZWN0bHkuXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqICAgICAgICAgIFdoZXRoZXIgb3Igbm90IGEgcGx1Z2luIGlzIGEgYmFzaWMgcGx1Z2luLlxuICAgKi9cbiAgO1xuXG4gIFBsdWdpbi5pc0Jhc2ljID0gZnVuY3Rpb24gaXNCYXNpYyhwbHVnaW4pIHtcbiAgICB2YXIgcCA9IHR5cGVvZiBwbHVnaW4gPT09ICdzdHJpbmcnID8gZ2V0UGx1Z2luKHBsdWdpbikgOiBwbHVnaW47XG4gICAgcmV0dXJuIHR5cGVvZiBwID09PSAnZnVuY3Rpb24nICYmICFQbHVnaW4ucHJvdG90eXBlLmlzUHJvdG90eXBlT2YocC5wcm90b3R5cGUpO1xuICB9XG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIFZpZGVvLmpzIHBsdWdpbi5cbiAgICpcbiAgICogQHBhcmFtICAge3N0cmluZ30gbmFtZVxuICAgKiAgICAgICAgICBUaGUgbmFtZSBvZiB0aGUgcGx1Z2luIHRvIGJlIHJlZ2lzdGVyZWQuIE11c3QgYmUgYSBzdHJpbmcgYW5kXG4gICAqICAgICAgICAgIG11c3Qgbm90IG1hdGNoIGFuIGV4aXN0aW5nIHBsdWdpbiBvciBhIG1ldGhvZCBvbiB0aGUgYFBsYXllcmBcbiAgICogICAgICAgICAgcHJvdG90eXBlLlxuICAgKlxuICAgKiBAcGFyYW0gICB7RnVuY3Rpb259IHBsdWdpblxuICAgKiAgICAgICAgICBBIHN1Yi1jbGFzcyBvZiBgUGx1Z2luYCBvciBhIGZ1bmN0aW9uIGZvciBiYXNpYyBwbHVnaW5zLlxuICAgKlxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICogICAgICAgICAgRm9yIGFkdmFuY2VkIHBsdWdpbnMsIGEgZmFjdG9yeSBmdW5jdGlvbiBmb3IgdGhhdCBwbHVnaW4uIEZvclxuICAgKiAgICAgICAgICBiYXNpYyBwbHVnaW5zLCBhIHdyYXBwZXIgZnVuY3Rpb24gdGhhdCBpbml0aWFsaXplcyB0aGUgcGx1Z2luLlxuICAgKi9cbiAgO1xuXG4gIFBsdWdpbi5yZWdpc3RlclBsdWdpbiA9IGZ1bmN0aW9uIHJlZ2lzdGVyUGx1Z2luKG5hbWUsIHBsdWdpbikge1xuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIklsbGVnYWwgcGx1Z2luIG5hbWUsIFxcXCJcIiArIG5hbWUgKyBcIlxcXCIsIG11c3QgYmUgYSBzdHJpbmcsIHdhcyBcIiArIHR5cGVvZiBuYW1lICsgXCIuXCIpO1xuICAgIH1cblxuICAgIGlmIChwbHVnaW5FeGlzdHMobmFtZSkpIHtcbiAgICAgIGxvZy53YXJuKFwiQSBwbHVnaW4gbmFtZWQgXFxcIlwiICsgbmFtZSArIFwiXFxcIiBhbHJlYWR5IGV4aXN0cy4gWW91IG1heSB3YW50IHRvIGF2b2lkIHJlLXJlZ2lzdGVyaW5nIHBsdWdpbnMhXCIpO1xuICAgIH0gZWxzZSBpZiAoUGxheWVyLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSWxsZWdhbCBwbHVnaW4gbmFtZSwgXFxcIlwiICsgbmFtZSArIFwiXFxcIiwgY2Fubm90IHNoYXJlIGEgbmFtZSB3aXRoIGFuIGV4aXN0aW5nIHBsYXllciBtZXRob2QhXCIpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcGx1Z2luICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbGxlZ2FsIHBsdWdpbiBmb3IgXFxcIlwiICsgbmFtZSArIFwiXFxcIiwgbXVzdCBiZSBhIGZ1bmN0aW9uLCB3YXMgXCIgKyB0eXBlb2YgcGx1Z2luICsgXCIuXCIpO1xuICAgIH1cblxuICAgIHBsdWdpblN0b3JhZ2VbbmFtZV0gPSBwbHVnaW47IC8vIEFkZCBhIHBsYXllciBwcm90b3R5cGUgbWV0aG9kIGZvciBhbGwgc3ViLWNsYXNzZWQgcGx1Z2lucyAoYnV0IG5vdCBmb3JcbiAgICAvLyB0aGUgYmFzZSBQbHVnaW4gY2xhc3MpLlxuXG4gICAgaWYgKG5hbWUgIT09IEJBU0VfUExVR0lOX05BTUUpIHtcbiAgICAgIGlmIChQbHVnaW4uaXNCYXNpYyhwbHVnaW4pKSB7XG4gICAgICAgIFBsYXllci5wcm90b3R5cGVbbmFtZV0gPSBjcmVhdGVCYXNpY1BsdWdpbihuYW1lLCBwbHVnaW4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgUGxheWVyLnByb3RvdHlwZVtuYW1lXSA9IGNyZWF0ZVBsdWdpbkZhY3RvcnkobmFtZSwgcGx1Z2luKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcGx1Z2luO1xuICB9XG4gIC8qKlxuICAgKiBEZS1yZWdpc3RlciBhIFZpZGVvLmpzIHBsdWdpbi5cbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSBuYW1lXG4gICAqICAgICAgICAgVGhlIG5hbWUgb2YgdGhlIHBsdWdpbiB0byBiZSBkZS1yZWdpc3RlcmVkLiBNdXN0IGJlIGEgc3RyaW5nIHRoYXRcbiAgICogICAgICAgICBtYXRjaGVzIGFuIGV4aXN0aW5nIHBsdWdpbi5cbiAgICpcbiAgICogQHRocm93cyB7RXJyb3J9XG4gICAqICAgICAgICAgSWYgYW4gYXR0ZW1wdCBpcyBtYWRlIHRvIGRlLXJlZ2lzdGVyIHRoZSBiYXNlIHBsdWdpbi5cbiAgICovXG4gIDtcblxuICBQbHVnaW4uZGVyZWdpc3RlclBsdWdpbiA9IGZ1bmN0aW9uIGRlcmVnaXN0ZXJQbHVnaW4obmFtZSkge1xuICAgIGlmIChuYW1lID09PSBCQVNFX1BMVUdJTl9OQU1FKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBkZS1yZWdpc3RlciBiYXNlIHBsdWdpbi4nKTtcbiAgICB9XG5cbiAgICBpZiAocGx1Z2luRXhpc3RzKG5hbWUpKSB7XG4gICAgICBkZWxldGUgcGx1Z2luU3RvcmFnZVtuYW1lXTtcbiAgICAgIGRlbGV0ZSBQbGF5ZXIucHJvdG90eXBlW25hbWVdO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0cyBhbiBvYmplY3QgY29udGFpbmluZyBtdWx0aXBsZSBWaWRlby5qcyBwbHVnaW5zLlxuICAgKlxuICAgKiBAcGFyYW0gICB7QXJyYXl9IFtuYW1lc11cbiAgICogICAgICAgICAgSWYgcHJvdmlkZWQsIHNob3VsZCBiZSBhbiBhcnJheSBvZiBwbHVnaW4gbmFtZXMuIERlZmF1bHRzIHRvIF9hbGxfXG4gICAqICAgICAgICAgIHBsdWdpbiBuYW1lcy5cbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cbiAgICogICAgICAgICAgQW4gb2JqZWN0IGNvbnRhaW5pbmcgcGx1Z2luKHMpIGFzc29jaWF0ZWQgd2l0aCB0aGVpciBuYW1lKHMpIG9yXG4gICAqICAgICAgICAgIGB1bmRlZmluZWRgIGlmIG5vIG1hdGNoaW5nIHBsdWdpbnMgZXhpc3QpLlxuICAgKi9cbiAgO1xuXG4gIFBsdWdpbi5nZXRQbHVnaW5zID0gZnVuY3Rpb24gZ2V0UGx1Z2lucyhuYW1lcykge1xuICAgIGlmIChuYW1lcyA9PT0gdm9pZCAwKSB7XG4gICAgICBuYW1lcyA9IE9iamVjdC5rZXlzKHBsdWdpblN0b3JhZ2UpO1xuICAgIH1cblxuICAgIHZhciByZXN1bHQ7XG4gICAgbmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgdmFyIHBsdWdpbiA9IGdldFBsdWdpbihuYW1lKTtcblxuICAgICAgaWYgKHBsdWdpbikge1xuICAgICAgICByZXN1bHQgPSByZXN1bHQgfHwge307XG4gICAgICAgIHJlc3VsdFtuYW1lXSA9IHBsdWdpbjtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIGEgcGx1Z2luJ3MgdmVyc2lvbiwgaWYgYXZhaWxhYmxlXG4gICAqXG4gICAqIEBwYXJhbSAgIHtzdHJpbmd9IG5hbWVcbiAgICogICAgICAgICAgVGhlIG5hbWUgb2YgYSBwbHVnaW4uXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogICAgICAgICAgVGhlIHBsdWdpbidzIHZlcnNpb24gb3IgYW4gZW1wdHkgc3RyaW5nLlxuICAgKi9cbiAgO1xuXG4gIFBsdWdpbi5nZXRQbHVnaW5WZXJzaW9uID0gZnVuY3Rpb24gZ2V0UGx1Z2luVmVyc2lvbihuYW1lKSB7XG4gICAgdmFyIHBsdWdpbiA9IGdldFBsdWdpbihuYW1lKTtcbiAgICByZXR1cm4gcGx1Z2luICYmIHBsdWdpbi5WRVJTSU9OIHx8ICcnO1xuICB9O1xuXG4gIHJldHVybiBQbHVnaW47XG59KCk7XG4vKipcbiAqIEdldHMgYSBwbHVnaW4gYnkgbmFtZSBpZiBpdCBleGlzdHMuXG4gKlxuICogQHN0YXRpY1xuICogQG1ldGhvZCAgIGdldFBsdWdpblxuICogQG1lbWJlck9mIFBsdWdpblxuICogQHBhcmFtICAgIHtzdHJpbmd9IG5hbWVcbiAqICAgICAgICAgICBUaGUgbmFtZSBvZiBhIHBsdWdpbi5cbiAqXG4gKiBAcmV0dXJucyAge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAqICAgICAgICAgICBUaGUgcGx1Z2luIChvciBgdW5kZWZpbmVkYCkuXG4gKi9cblxuXG5QbHVnaW4uZ2V0UGx1Z2luID0gZ2V0UGx1Z2luO1xuLyoqXG4gKiBUaGUgbmFtZSBvZiB0aGUgYmFzZSBwbHVnaW4gY2xhc3MgYXMgaXQgaXMgcmVnaXN0ZXJlZC5cbiAqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5cblBsdWdpbi5CQVNFX1BMVUdJTl9OQU1FID0gQkFTRV9QTFVHSU5fTkFNRTtcblBsdWdpbi5yZWdpc3RlclBsdWdpbihCQVNFX1BMVUdJTl9OQU1FLCBQbHVnaW4pO1xuLyoqXG4gKiBEb2N1bWVudGVkIGluIHBsYXllci5qc1xuICpcbiAqIEBpZ25vcmVcbiAqL1xuXG5QbGF5ZXIucHJvdG90eXBlLnVzaW5nUGx1Z2luID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgcmV0dXJuICEhdGhpc1tQTFVHSU5fQ0FDSEVfS0VZXSAmJiB0aGlzW1BMVUdJTl9DQUNIRV9LRVldW25hbWVdID09PSB0cnVlO1xufTtcbi8qKlxuICogRG9jdW1lbnRlZCBpbiBwbGF5ZXIuanNcbiAqXG4gKiBAaWdub3JlXG4gKi9cblxuXG5QbGF5ZXIucHJvdG90eXBlLmhhc1BsdWdpbiA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gIHJldHVybiAhIXBsdWdpbkV4aXN0cyhuYW1lKTtcbn07XG4vKipcbiAqIFNpZ25hbHMgdGhhdCBhIHBsdWdpbiBpcyBhYm91dCB0byBiZSBzZXQgdXAgb24gYSBwbGF5ZXIuXG4gKlxuICogQGV2ZW50ICAgIFBsYXllciNiZWZvcmVwbHVnaW5zZXR1cFxuICogQHR5cGUgICAgIHtQbHVnaW5+UGx1Z2luRXZlbnRIYXNofVxuICovXG5cbi8qKlxuICogU2lnbmFscyB0aGF0IGEgcGx1Z2luIGlzIGFib3V0IHRvIGJlIHNldCB1cCBvbiBhIHBsYXllciAtIGJ5IG5hbWUuIFRoZSBuYW1lXG4gKiBpcyB0aGUgbmFtZSBvZiB0aGUgcGx1Z2luLlxuICpcbiAqIEBldmVudCAgICBQbGF5ZXIjYmVmb3JlcGx1Z2luc2V0dXA6JG5hbWVcbiAqIEB0eXBlICAgICB7UGx1Z2luflBsdWdpbkV2ZW50SGFzaH1cbiAqL1xuXG4vKipcbiAqIFNpZ25hbHMgdGhhdCBhIHBsdWdpbiBoYXMganVzdCBiZWVuIHNldCB1cCBvbiBhIHBsYXllci5cbiAqXG4gKiBAZXZlbnQgICAgUGxheWVyI3BsdWdpbnNldHVwXG4gKiBAdHlwZSAgICAge1BsdWdpbn5QbHVnaW5FdmVudEhhc2h9XG4gKi9cblxuLyoqXG4gKiBTaWduYWxzIHRoYXQgYSBwbHVnaW4gaGFzIGp1c3QgYmVlbiBzZXQgdXAgb24gYSBwbGF5ZXIgLSBieSBuYW1lLiBUaGUgbmFtZVxuICogaXMgdGhlIG5hbWUgb2YgdGhlIHBsdWdpbi5cbiAqXG4gKiBAZXZlbnQgICAgUGxheWVyI3BsdWdpbnNldHVwOiRuYW1lXG4gKiBAdHlwZSAgICAge1BsdWdpbn5QbHVnaW5FdmVudEhhc2h9XG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiAge09iamVjdH0gUGx1Z2luflBsdWdpbkV2ZW50SGFzaFxuICpcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpbnN0YW5jZVxuICogICAgICAgICAgIEZvciBiYXNpYyBwbHVnaW5zLCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBwbHVnaW4gZnVuY3Rpb24uIEZvclxuICogICAgICAgICAgIGFkdmFuY2VkIHBsdWdpbnMsIHRoZSBwbHVnaW4gaW5zdGFuY2Ugb24gd2hpY2ggdGhlIGV2ZW50IGlzIGZpcmVkLlxuICpcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBuYW1lXG4gKiAgICAgICAgICAgVGhlIG5hbWUgb2YgdGhlIHBsdWdpbi5cbiAqXG4gKiBAcHJvcGVydHkge3N0cmluZ30gcGx1Z2luXG4gKiAgICAgICAgICAgRm9yIGJhc2ljIHBsdWdpbnMsIHRoZSBwbHVnaW4gZnVuY3Rpb24uIEZvciBhZHZhbmNlZCBwbHVnaW5zLCB0aGVcbiAqICAgICAgICAgICBwbHVnaW4gY2xhc3MvY29uc3RydWN0b3IuXG4gKi9cblxuLyoqXG4gKiBAZmlsZSBleHRlbmQuanNcbiAqIEBtb2R1bGUgZXh0ZW5kXG4gKi9cblxuLyoqXG4gKiBBIGNvbWJpbmF0aW9uIG9mIG5vZGUgaW5oZXJpdHMgYW5kIGJhYmVsJ3MgaW5oZXJpdHMgKGFmdGVyIHRyYW5zcGlsZSkuXG4gKiBCb3RoIHdvcmsgdGhlIHNhbWUgYnV0IG5vZGUgYWRkcyBgc3VwZXJfYCB0byB0aGUgc3ViQ2xhc3NcbiAqIGFuZCBCYWJsZSBhZGRzIHRoZSBzdXBlckNsYXNzIGFzIF9fcHJvdG9fXy4gQm90aCBzZWVtIHVzZWZ1bC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc3ViQ2xhc3NcbiAqICAgICAgICBUaGUgY2xhc3MgdG8gaW5oZXJpdCB0b1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBzdXBlckNsYXNzXG4gKiAgICAgICAgVGhlIGNsYXNzIHRvIGluaGVyaXQgZnJvbVxuICpcbiAqIEBwcml2YXRlXG4gKi9cbnZhciBfaW5oZXJpdHMkMSA9IGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1N1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgJyArIHR5cGVvZiBzdXBlckNsYXNzKTtcbiAgfVxuXG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfVxuICB9KTtcblxuICBpZiAoc3VwZXJDbGFzcykge1xuICAgIC8vIG5vZGVcbiAgICBzdWJDbGFzcy5zdXBlcl8gPSBzdXBlckNsYXNzO1xuICB9XG59O1xuLyoqXG4gKiBVc2VkIHRvIHN1YmNsYXNzIGFuIGV4aXN0aW5nIGNsYXNzIGJ5IGVtdWxhdGluZyBFUyBzdWJjbGFzc2luZyB1c2luZyB0aGVcbiAqIGBleHRlbmRzYCBrZXl3b3JkLlxuICpcbiAqIEBmdW5jdGlvblxuICogQGV4YW1wbGVcbiAqIHZhciBNeUNvbXBvbmVudCA9IHZpZGVvanMuZXh0ZW5kKHZpZGVvanMuZ2V0Q29tcG9uZW50KCdDb21wb25lbnQnKSwge1xuICogICBteUN1c3RvbU1ldGhvZDogZnVuY3Rpb24oKSB7XG4gKiAgICAgLy8gRG8gdGhpbmdzIGluIG15IG1ldGhvZC5cbiAqICAgfVxuICogfSk7XG4gKlxuICogQHBhcmFtICAgIHtGdW5jdGlvbn0gc3VwZXJDbGFzc1xuICogICAgICAgICAgIFRoZSBjbGFzcyB0byBpbmhlcml0IGZyb21cbiAqXG4gKiBAcGFyYW0gICAge09iamVjdH0gICBbc3ViQ2xhc3NNZXRob2RzPXt9XVxuICogICAgICAgICAgIE1ldGhvZHMgb2YgdGhlIG5ldyBjbGFzc1xuICpcbiAqIEByZXR1cm4gICB7RnVuY3Rpb259XG4gKiAgICAgICAgICAgVGhlIG5ldyBjbGFzcyB3aXRoIHN1YkNsYXNzTWV0aG9kcyB0aGF0IGluaGVyaXRlZCBzdXBlckNsYXNzLlxuICovXG5cblxudmFyIGV4dGVuZCA9IGZ1bmN0aW9uIGV4dGVuZChzdXBlckNsYXNzLCBzdWJDbGFzc01ldGhvZHMpIHtcbiAgaWYgKHN1YkNsYXNzTWV0aG9kcyA9PT0gdm9pZCAwKSB7XG4gICAgc3ViQ2xhc3NNZXRob2RzID0ge307XG4gIH1cblxuICB2YXIgc3ViQ2xhc3MgPSBmdW5jdGlvbiBzdWJDbGFzcygpIHtcbiAgICBzdXBlckNsYXNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgdmFyIG1ldGhvZHMgPSB7fTtcblxuICBpZiAodHlwZW9mIHN1YkNsYXNzTWV0aG9kcyA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAoc3ViQ2xhc3NNZXRob2RzLmNvbnN0cnVjdG9yICE9PSBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yKSB7XG4gICAgICBzdWJDbGFzcyA9IHN1YkNsYXNzTWV0aG9kcy5jb25zdHJ1Y3RvcjtcbiAgICB9XG5cbiAgICBtZXRob2RzID0gc3ViQ2xhc3NNZXRob2RzO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzdWJDbGFzc01ldGhvZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBzdWJDbGFzcyA9IHN1YkNsYXNzTWV0aG9kcztcbiAgfVxuXG4gIF9pbmhlcml0cyQxKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgLy8gRXh0ZW5kIHN1Yk9iaidzIHByb3RvdHlwZSB3aXRoIGZ1bmN0aW9ucyBhbmQgb3RoZXIgcHJvcGVydGllcyBmcm9tIHByb3BzXG5cblxuICBmb3IgKHZhciBuYW1lIGluIG1ldGhvZHMpIHtcbiAgICBpZiAobWV0aG9kcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgc3ViQ2xhc3MucHJvdG90eXBlW25hbWVdID0gbWV0aG9kc1tuYW1lXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3ViQ2xhc3M7XG59O1xuXG4vKipcbiAqIEBmaWxlIHZpZGVvLmpzXG4gKiBAbW9kdWxlIHZpZGVvanNcbiAqL1xuLyoqXG4gKiBOb3JtYWxpemUgYW4gYGlkYCB2YWx1ZSBieSB0cmltbWluZyBvZmYgYSBsZWFkaW5nIGAjYFxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0gICB7c3RyaW5nfSBpZFxuICogICAgICAgICAgQSBzdHJpbmcsIG1heWJlIHdpdGggYSBsZWFkaW5nIGAjYC5cbiAqXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiAgICAgICAgICBUaGUgc3RyaW5nLCB3aXRob3V0IGFueSBsZWFkaW5nIGAjYC5cbiAqL1xuXG52YXIgbm9ybWFsaXplSWQgPSBmdW5jdGlvbiBub3JtYWxpemVJZChpZCkge1xuICByZXR1cm4gaWQuaW5kZXhPZignIycpID09PSAwID8gaWQuc2xpY2UoMSkgOiBpZDtcbn07XG4vKipcbiAqIFRoZSBgdmlkZW9qcygpYCBmdW5jdGlvbiBkb3VibGVzIGFzIHRoZSBtYWluIGZ1bmN0aW9uIGZvciB1c2VycyB0byBjcmVhdGUgYVxuICoge0BsaW5rIFBsYXllcn0gaW5zdGFuY2UgYXMgd2VsbCBhcyB0aGUgbWFpbiBsaWJyYXJ5IG5hbWVzcGFjZS5cbiAqXG4gKiBJdCBjYW4gYWxzbyBiZSB1c2VkIGFzIGEgZ2V0dGVyIGZvciBhIHByZS1leGlzdGluZyB7QGxpbmsgUGxheWVyfSBpbnN0YW5jZS5cbiAqIEhvd2V2ZXIsIHdlIF9zdHJvbmdseV8gcmVjb21tZW5kIHVzaW5nIGB2aWRlb2pzLmdldFBsYXllcigpYCBmb3IgdGhpc1xuICogcHVycG9zZSBiZWNhdXNlIGl0IGF2b2lkcyBhbnkgcG90ZW50aWFsIGZvciB1bmludGVuZGVkIGluaXRpYWxpemF0aW9uLlxuICpcbiAqIER1ZSB0byBbbGltaXRhdGlvbnNdKGh0dHBzOi8vZ2l0aHViLmNvbS9qc2RvYzMvanNkb2MvaXNzdWVzLzk1NSNpc3N1ZWNvbW1lbnQtMzEzODI5MTQ5KVxuICogb2Ygb3VyIEpTRG9jIHRlbXBsYXRlLCB3ZSBjYW5ub3QgcHJvcGVybHkgZG9jdW1lbnQgdGhpcyBhcyBib3RoIGEgZnVuY3Rpb25cbiAqIGFuZCBhIG5hbWVzcGFjZSwgc28gaXRzIGZ1bmN0aW9uIHNpZ25hdHVyZSBpcyBkb2N1bWVudGVkIGhlcmUuXG4gKlxuICogIyMjIyBBcmd1bWVudHNcbiAqICMjIyMjIGlkXG4gKiBzdHJpbmd8RWxlbWVudCwgKipyZXF1aXJlZCoqXG4gKlxuICogVmlkZW8gZWxlbWVudCBvciB2aWRlbyBlbGVtZW50IElELlxuICpcbiAqICMjIyMjIG9wdGlvbnNcbiAqIE9iamVjdCwgb3B0aW9uYWxcbiAqXG4gKiBPcHRpb25zIG9iamVjdCBmb3IgcHJvdmlkaW5nIHNldHRpbmdzLlxuICogU2VlOiBbT3B0aW9ucyBHdWlkZV0oaHR0cHM6Ly9kb2NzLnZpZGVvanMuY29tL3R1dG9yaWFsLW9wdGlvbnMuaHRtbCkuXG4gKlxuICogIyMjIyMgcmVhZHlcbiAqIHtAbGluayBDb21wb25lbnR+UmVhZHlDYWxsYmFja30sIG9wdGlvbmFsXG4gKlxuICogQSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUge0BsaW5rIFBsYXllcn0gYW5kIHtAbGluayBUZWNofSBhcmUgcmVhZHkuXG4gKlxuICogIyMjIyBSZXR1cm4gVmFsdWVcbiAqXG4gKiBUaGUgYHZpZGVvanMoKWAgZnVuY3Rpb24gcmV0dXJucyBhIHtAbGluayBQbGF5ZXJ9IGluc3RhbmNlLlxuICpcbiAqIEBuYW1lc3BhY2VcbiAqXG4gKiBAYm9ycm93cyBBdWRpb1RyYWNrIGFzIEF1ZGlvVHJhY2tcbiAqIEBib3Jyb3dzIENvbXBvbmVudC5nZXRDb21wb25lbnQgYXMgZ2V0Q29tcG9uZW50XG4gKiBAYm9ycm93cyBtb2R1bGU6Y29tcHV0ZWQtc3R5bGV+Y29tcHV0ZWRTdHlsZSBhcyBjb21wdXRlZFN0eWxlXG4gKiBAYm9ycm93cyBtb2R1bGU6ZXZlbnRzLm9uIGFzIG9uXG4gKiBAYm9ycm93cyBtb2R1bGU6ZXZlbnRzLm9uZSBhcyBvbmVcbiAqIEBib3Jyb3dzIG1vZHVsZTpldmVudHMub2ZmIGFzIG9mZlxuICogQGJvcnJvd3MgbW9kdWxlOmV2ZW50cy50cmlnZ2VyIGFzIHRyaWdnZXJcbiAqIEBib3Jyb3dzIEV2ZW50VGFyZ2V0IGFzIEV2ZW50VGFyZ2V0XG4gKiBAYm9ycm93cyBtb2R1bGU6ZXh0ZW5kfmV4dGVuZCBhcyBleHRlbmRcbiAqIEBib3Jyb3dzIG1vZHVsZTpmbi5iaW5kIGFzIGJpbmRcbiAqIEBib3Jyb3dzIG1vZHVsZTpmb3JtYXQtdGltZS5mb3JtYXRUaW1lIGFzIGZvcm1hdFRpbWVcbiAqIEBib3Jyb3dzIG1vZHVsZTpmb3JtYXQtdGltZS5yZXNldEZvcm1hdFRpbWUgYXMgcmVzZXRGb3JtYXRUaW1lXG4gKiBAYm9ycm93cyBtb2R1bGU6Zm9ybWF0LXRpbWUuc2V0Rm9ybWF0VGltZSBhcyBzZXRGb3JtYXRUaW1lXG4gKiBAYm9ycm93cyBtb2R1bGU6bWVyZ2Utb3B0aW9ucy5tZXJnZU9wdGlvbnMgYXMgbWVyZ2VPcHRpb25zXG4gKiBAYm9ycm93cyBtb2R1bGU6bWlkZGxld2FyZS51c2UgYXMgdXNlXG4gKiBAYm9ycm93cyBQbGF5ZXIucGxheWVycyBhcyBwbGF5ZXJzXG4gKiBAYm9ycm93cyBQbHVnaW4ucmVnaXN0ZXJQbHVnaW4gYXMgcmVnaXN0ZXJQbHVnaW5cbiAqIEBib3Jyb3dzIFBsdWdpbi5kZXJlZ2lzdGVyUGx1Z2luIGFzIGRlcmVnaXN0ZXJQbHVnaW5cbiAqIEBib3Jyb3dzIFBsdWdpbi5nZXRQbHVnaW5zIGFzIGdldFBsdWdpbnNcbiAqIEBib3Jyb3dzIFBsdWdpbi5nZXRQbHVnaW4gYXMgZ2V0UGx1Z2luXG4gKiBAYm9ycm93cyBQbHVnaW4uZ2V0UGx1Z2luVmVyc2lvbiBhcyBnZXRQbHVnaW5WZXJzaW9uXG4gKiBAYm9ycm93cyBUZWNoLmdldFRlY2ggYXMgZ2V0VGVjaFxuICogQGJvcnJvd3MgVGVjaC5yZWdpc3RlclRlY2ggYXMgcmVnaXN0ZXJUZWNoXG4gKiBAYm9ycm93cyBUZXh0VHJhY2sgYXMgVGV4dFRyYWNrXG4gKiBAYm9ycm93cyBtb2R1bGU6dGltZS1yYW5nZXMuY3JlYXRlVGltZVJhbmdlcyBhcyBjcmVhdGVUaW1lUmFuZ2VcbiAqIEBib3Jyb3dzIG1vZHVsZTp0aW1lLXJhbmdlcy5jcmVhdGVUaW1lUmFuZ2VzIGFzIGNyZWF0ZVRpbWVSYW5nZXNcbiAqIEBib3Jyb3dzIG1vZHVsZTp1cmwuaXNDcm9zc09yaWdpbiBhcyBpc0Nyb3NzT3JpZ2luXG4gKiBAYm9ycm93cyBtb2R1bGU6dXJsLnBhcnNlVXJsIGFzIHBhcnNlVXJsXG4gKiBAYm9ycm93cyBWaWRlb1RyYWNrIGFzIFZpZGVvVHJhY2tcbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd8RWxlbWVudH0gaWRcbiAqICAgICAgICAgVmlkZW8gZWxlbWVudCBvciB2aWRlbyBlbGVtZW50IElELlxuICpcbiAqIEBwYXJhbSAge09iamVjdH0gW29wdGlvbnNdXG4gKiAgICAgICAgIE9wdGlvbnMgb2JqZWN0IGZvciBwcm92aWRpbmcgc2V0dGluZ3MuXG4gKiAgICAgICAgIFNlZTogW09wdGlvbnMgR3VpZGVdKGh0dHBzOi8vZG9jcy52aWRlb2pzLmNvbS90dXRvcmlhbC1vcHRpb25zLmh0bWwpLlxuICpcbiAqIEBwYXJhbSAge0NvbXBvbmVudH5SZWFkeUNhbGxiYWNrfSBbcmVhZHldXG4gKiAgICAgICAgIEEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIHtAbGluayBQbGF5ZXJ9IGFuZCB7QGxpbmsgVGVjaH0gYXJlXG4gKiAgICAgICAgIHJlYWR5LlxuICpcbiAqIEByZXR1cm4ge1BsYXllcn1cbiAqICAgICAgICAgVGhlIGB2aWRlb2pzKClgIGZ1bmN0aW9uIHJldHVybnMgYSB7QGxpbmsgUGxheWVyfFBsYXllcn0gaW5zdGFuY2UuXG4gKi9cblxuXG5mdW5jdGlvbiB2aWRlb2pzJDEoaWQsIG9wdGlvbnMsIHJlYWR5KSB7XG4gIHZhciBwbGF5ZXIgPSB2aWRlb2pzJDEuZ2V0UGxheWVyKGlkKTtcblxuICBpZiAocGxheWVyKSB7XG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgIGxvZy53YXJuKFwiUGxheWVyIFxcXCJcIiArIGlkICsgXCJcXFwiIGlzIGFscmVhZHkgaW5pdGlhbGlzZWQuIE9wdGlvbnMgd2lsbCBub3QgYmUgYXBwbGllZC5cIik7XG4gICAgfVxuXG4gICAgaWYgKHJlYWR5KSB7XG4gICAgICBwbGF5ZXIucmVhZHkocmVhZHkpO1xuICAgIH1cblxuICAgIHJldHVybiBwbGF5ZXI7XG4gIH1cblxuICB2YXIgZWwgPSB0eXBlb2YgaWQgPT09ICdzdHJpbmcnID8gJCgnIycgKyBub3JtYWxpemVJZChpZCkpIDogaWQ7XG5cbiAgaWYgKCFpc0VsKGVsKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBlbGVtZW50IG9yIElEIHN1cHBsaWVkIGlzIG5vdCB2YWxpZC4gKHZpZGVvanMpJyk7XG4gIH0gLy8gZG9jdW1lbnQuYm9keS5jb250YWlucyhlbCkgd2lsbCBvbmx5IGNoZWNrIGlmIGVsIGlzIGNvbnRhaW5lZCB3aXRoaW4gdGhhdCBvbmUgZG9jdW1lbnQuXG4gIC8vIFRoaXMgY2F1c2VzIHByb2JsZW1zIGZvciBlbGVtZW50cyBpbiBpZnJhbWVzLlxuICAvLyBJbnN0ZWFkLCB1c2UgdGhlIGVsZW1lbnQncyBvd25lckRvY3VtZW50IGluc3RlYWQgb2YgdGhlIGdsb2JhbCBkb2N1bWVudC5cbiAgLy8gVGhpcyB3aWxsIG1ha2Ugc3VyZSB0aGF0IHRoZSBlbGVtZW50IGlzIGluZGVlZCBpbiB0aGUgZG9tIG9mIHRoYXQgZG9jdW1lbnQuXG4gIC8vIEFkZGl0aW9uYWxseSwgY2hlY2sgdGhhdCB0aGUgZG9jdW1lbnQgaW4gcXVlc3Rpb24gaGFzIGEgZGVmYXVsdCB2aWV3LlxuICAvLyBJZiB0aGUgZG9jdW1lbnQgaXMgbm8gbG9uZ2VyIGF0dGFjaGVkIHRvIHRoZSBkb20sIHRoZSBkZWZhdWx0VmlldyBvZiB0aGUgZG9jdW1lbnQgd2lsbCBiZSBudWxsLlxuXG5cbiAgaWYgKCFlbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3IHx8ICFlbC5vd25lckRvY3VtZW50LmJvZHkuY29udGFpbnMoZWwpKSB7XG4gICAgbG9nLndhcm4oJ1RoZSBlbGVtZW50IHN1cHBsaWVkIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgRE9NJyk7XG4gIH1cblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmlkZW9qcyQxLmhvb2tzKCdiZWZvcmVzZXR1cCcpLmZvckVhY2goZnVuY3Rpb24gKGhvb2tGdW5jdGlvbikge1xuICAgIHZhciBvcHRzID0gaG9va0Z1bmN0aW9uKGVsLCBtZXJnZU9wdGlvbnMob3B0aW9ucykpO1xuXG4gICAgaWYgKCFpc09iamVjdChvcHRzKSB8fCBBcnJheS5pc0FycmF5KG9wdHMpKSB7XG4gICAgICBsb2cuZXJyb3IoJ3BsZWFzZSByZXR1cm4gYW4gb2JqZWN0IGluIGJlZm9yZXNldHVwIGhvb2tzJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhvcHRpb25zLCBvcHRzKTtcbiAgfSk7IC8vIFdlIGdldCB0aGUgY3VycmVudCBcIlBsYXllclwiIGNvbXBvbmVudCBoZXJlIGluIGNhc2UgYW4gaW50ZWdyYXRpb24gaGFzXG4gIC8vIHJlcGxhY2VkIGl0IHdpdGggYSBjdXN0b20gcGxheWVyLlxuXG4gIHZhciBQbGF5ZXJDb21wb25lbnQgPSBDb21wb25lbnQuZ2V0Q29tcG9uZW50KCdQbGF5ZXInKTtcbiAgcGxheWVyID0gbmV3IFBsYXllckNvbXBvbmVudChlbCwgb3B0aW9ucywgcmVhZHkpO1xuICB2aWRlb2pzJDEuaG9va3MoJ3NldHVwJykuZm9yRWFjaChmdW5jdGlvbiAoaG9va0Z1bmN0aW9uKSB7XG4gICAgcmV0dXJuIGhvb2tGdW5jdGlvbihwbGF5ZXIpO1xuICB9KTtcbiAgcmV0dXJuIHBsYXllcjtcbn1cbi8qKlxuICogQW4gT2JqZWN0IHRoYXQgY29udGFpbnMgbGlmZWN5Y2xlIGhvb2tzIGFzIGtleXMgd2hpY2ggcG9pbnQgdG8gYW4gYXJyYXlcbiAqIG9mIGZ1bmN0aW9ucyB0aGF0IGFyZSBydW4gd2hlbiBhIGxpZmVjeWNsZSBpcyB0cmlnZ2VyZWRcbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5cblxudmlkZW9qcyQxLmhvb2tzXyA9IHt9O1xuLyoqXG4gKiBHZXQgYSBsaXN0IG9mIGhvb2tzIGZvciBhIHNwZWNpZmljIGxpZmVjeWNsZVxuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gdHlwZVxuICogICAgICAgICB0aGUgbGlmZWN5bGUgdG8gZ2V0IGhvb2tzIGZyb21cbiAqXG4gKiBAcGFyYW0gIHtGdW5jdGlvbnxGdW5jdGlvbltdfSBbZm5dXG4gKiAgICAgICAgIE9wdGlvbmFsbHkgYWRkIGEgaG9vayAob3IgaG9va3MpIHRvIHRoZSBsaWZlY3ljbGUgdGhhdCB5b3VyIGFyZSBnZXR0aW5nLlxuICpcbiAqIEByZXR1cm4ge0FycmF5fVxuICogICAgICAgICBhbiBhcnJheSBvZiBob29rcywgb3IgYW4gZW1wdHkgYXJyYXkgaWYgdGhlcmUgYXJlIG5vbmUuXG4gKi9cblxudmlkZW9qcyQxLmhvb2tzID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gIHZpZGVvanMkMS5ob29rc19bdHlwZV0gPSB2aWRlb2pzJDEuaG9va3NfW3R5cGVdIHx8IFtdO1xuXG4gIGlmIChmbikge1xuICAgIHZpZGVvanMkMS5ob29rc19bdHlwZV0gPSB2aWRlb2pzJDEuaG9va3NfW3R5cGVdLmNvbmNhdChmbik7XG4gIH1cblxuICByZXR1cm4gdmlkZW9qcyQxLmhvb2tzX1t0eXBlXTtcbn07XG4vKipcbiAqIEFkZCBhIGZ1bmN0aW9uIGhvb2sgdG8gYSBzcGVjaWZpYyB2aWRlb2pzIGxpZmVjeWNsZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICogICAgICAgIHRoZSBsaWZlY3ljbGUgdG8gaG9vayB0aGUgZnVuY3Rpb24gdG8uXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbnxGdW5jdGlvbltdfVxuICogICAgICAgIFRoZSBmdW5jdGlvbiBvciBhcnJheSBvZiBmdW5jdGlvbnMgdG8gYXR0YWNoLlxuICovXG5cblxudmlkZW9qcyQxLmhvb2sgPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgdmlkZW9qcyQxLmhvb2tzKHR5cGUsIGZuKTtcbn07XG4vKipcbiAqIEFkZCBhIGZ1bmN0aW9uIGhvb2sgdGhhdCB3aWxsIG9ubHkgcnVuIG9uY2UgdG8gYSBzcGVjaWZpYyB2aWRlb2pzIGxpZmVjeWNsZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICogICAgICAgIHRoZSBsaWZlY3ljbGUgdG8gaG9vayB0aGUgZnVuY3Rpb24gdG8uXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbnxGdW5jdGlvbltdfVxuICogICAgICAgIFRoZSBmdW5jdGlvbiBvciBhcnJheSBvZiBmdW5jdGlvbnMgdG8gYXR0YWNoLlxuICovXG5cblxudmlkZW9qcyQxLmhvb2tPbmNlID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gIHZpZGVvanMkMS5ob29rcyh0eXBlLCBbXS5jb25jYXQoZm4pLm1hcChmdW5jdGlvbiAob3JpZ2luYWwpIHtcbiAgICB2YXIgd3JhcHBlciA9IGZ1bmN0aW9uIHdyYXBwZXIoKSB7XG4gICAgICB2aWRlb2pzJDEucmVtb3ZlSG9vayh0eXBlLCB3cmFwcGVyKTtcbiAgICAgIHJldHVybiBvcmlnaW5hbC5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIHJldHVybiB3cmFwcGVyO1xuICB9KSk7XG59O1xuLyoqXG4gKiBSZW1vdmUgYSBob29rIGZyb20gYSBzcGVjaWZpYyB2aWRlb2pzIGxpZmVjeWNsZS5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHR5cGVcbiAqICAgICAgICAgdGhlIGxpZmVjeWNsZSB0aGF0IHRoZSBmdW5jdGlvbiBob29rZWQgdG9cbiAqXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm5cbiAqICAgICAgICAgVGhlIGhvb2tlZCBmdW5jdGlvbiB0byByZW1vdmVcbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogICAgICAgICBUaGUgZnVuY3Rpb24gdGhhdCB3YXMgcmVtb3ZlZCBvciB1bmRlZlxuICovXG5cblxudmlkZW9qcyQxLnJlbW92ZUhvb2sgPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgdmFyIGluZGV4ID0gdmlkZW9qcyQxLmhvb2tzKHR5cGUpLmluZGV4T2YoZm4pO1xuXG4gIGlmIChpbmRleCA8PSAtMSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZpZGVvanMkMS5ob29rc19bdHlwZV0gPSB2aWRlb2pzJDEuaG9va3NfW3R5cGVdLnNsaWNlKCk7XG4gIHZpZGVvanMkMS5ob29rc19bdHlwZV0uc3BsaWNlKGluZGV4LCAxKTtcbiAgcmV0dXJuIHRydWU7XG59OyAvLyBBZGQgZGVmYXVsdCBzdHlsZXNcblxuXG5pZiAod2luZG93JDEuVklERU9KU19OT19EWU5BTUlDX1NUWUxFICE9PSB0cnVlICYmIGlzUmVhbCgpKSB7XG4gIHZhciBzdHlsZSQxID0gJCgnLnZqcy1zdHlsZXMtZGVmYXVsdHMnKTtcblxuICBpZiAoIXN0eWxlJDEpIHtcbiAgICBzdHlsZSQxID0gY3JlYXRlU3R5bGVFbGVtZW50KCd2anMtc3R5bGVzLWRlZmF1bHRzJyk7XG4gICAgdmFyIGhlYWQgPSAkKCdoZWFkJyk7XG5cbiAgICBpZiAoaGVhZCkge1xuICAgICAgaGVhZC5pbnNlcnRCZWZvcmUoc3R5bGUkMSwgaGVhZC5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzZXRUZXh0Q29udGVudChzdHlsZSQxLCBcIlxcbiAgICAgIC52aWRlby1qcyB7XFxuICAgICAgICB3aWR0aDogMzAwcHg7XFxuICAgICAgICBoZWlnaHQ6IDE1MHB4O1xcbiAgICAgIH1cXG5cXG4gICAgICAudmpzLWZsdWlkIHtcXG4gICAgICAgIHBhZGRpbmctdG9wOiA1Ni4yNSVcXG4gICAgICB9XFxuICAgIFwiKTtcbiAgfVxufSAvLyBSdW4gQXV0by1sb2FkIHBsYXllcnNcbi8vIFlvdSBoYXZlIHRvIHdhaXQgYXQgbGVhc3Qgb25jZSBpbiBjYXNlIHRoaXMgc2NyaXB0IGlzIGxvYWRlZCBhZnRlciB5b3VyXG4vLyB2aWRlbyBpbiB0aGUgRE9NICh3ZWlyZCBiZWhhdmlvciBvbmx5IHdpdGggbWluaWZpZWQgdmVyc2lvbilcblxuXG5hdXRvU2V0dXBUaW1lb3V0KDEsIHZpZGVvanMkMSk7XG4vKipcbiAqIEN1cnJlbnQgVmlkZW8uanMgdmVyc2lvbi4gRm9sbG93cyBbc2VtYW50aWMgdmVyc2lvbmluZ10oaHR0cHM6Ly9zZW12ZXIub3JnLykuXG4gKlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuXG52aWRlb2pzJDEuVkVSU0lPTiA9IHZlcnNpb247XG4vKipcbiAqIFRoZSBnbG9iYWwgb3B0aW9ucyBvYmplY3QuIFRoZXNlIGFyZSB0aGUgc2V0dGluZ3MgdGhhdCB0YWtlIGVmZmVjdFxuICogaWYgbm8gb3ZlcnJpZGVzIGFyZSBzcGVjaWZpZWQgd2hlbiB0aGUgcGxheWVyIGlzIGNyZWF0ZWQuXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqL1xuXG52aWRlb2pzJDEub3B0aW9ucyA9IFBsYXllci5wcm90b3R5cGUub3B0aW9uc187XG4vKipcbiAqIEdldCBhbiBvYmplY3Qgd2l0aCB0aGUgY3VycmVudGx5IGNyZWF0ZWQgcGxheWVycywga2V5ZWQgYnkgcGxheWVyIElEXG4gKlxuICogQHJldHVybiB7T2JqZWN0fVxuICogICAgICAgICBUaGUgY3JlYXRlZCBwbGF5ZXJzXG4gKi9cblxudmlkZW9qcyQxLmdldFBsYXllcnMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBQbGF5ZXIucGxheWVycztcbn07XG4vKipcbiAqIEdldCBhIHNpbmdsZSBwbGF5ZXIgYmFzZWQgb24gYW4gSUQgb3IgRE9NIGVsZW1lbnQuXG4gKlxuICogVGhpcyBpcyB1c2VmdWwgaWYgeW91IHdhbnQgdG8gY2hlY2sgaWYgYW4gZWxlbWVudCBvciBJRCBoYXMgYW4gYXNzb2NpYXRlZFxuICogVmlkZW8uanMgcGxheWVyLCBidXQgbm90IGNyZWF0ZSBvbmUgaWYgaXQgZG9lc24ndC5cbiAqXG4gKiBAcGFyYW0gICB7c3RyaW5nfEVsZW1lbnR9IGlkXG4gKiAgICAgICAgICBBbiBIVE1MIGVsZW1lbnQgLSBgPHZpZGVvPmAsIGA8YXVkaW8+YCwgb3IgYDx2aWRlby1qcz5gIC1cbiAqICAgICAgICAgIG9yIGEgc3RyaW5nIG1hdGNoaW5nIHRoZSBgaWRgIG9mIHN1Y2ggYW4gZWxlbWVudC5cbiAqXG4gKiBAcmV0dXJuIHtQbGF5ZXJ8dW5kZWZpbmVkfVxuICogICAgICAgICAgQSBwbGF5ZXIgaW5zdGFuY2Ugb3IgYHVuZGVmaW5lZGAgaWYgdGhlcmUgaXMgbm8gcGxheWVyIGluc3RhbmNlXG4gKiAgICAgICAgICBtYXRjaGluZyB0aGUgYXJndW1lbnQuXG4gKi9cblxuXG52aWRlb2pzJDEuZ2V0UGxheWVyID0gZnVuY3Rpb24gKGlkKSB7XG4gIHZhciBwbGF5ZXJzID0gUGxheWVyLnBsYXllcnM7XG4gIHZhciB0YWc7XG5cbiAgaWYgKHR5cGVvZiBpZCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgbklkID0gbm9ybWFsaXplSWQoaWQpO1xuICAgIHZhciBwbGF5ZXIgPSBwbGF5ZXJzW25JZF07XG5cbiAgICBpZiAocGxheWVyKSB7XG4gICAgICByZXR1cm4gcGxheWVyO1xuICAgIH1cblxuICAgIHRhZyA9ICQoJyMnICsgbklkKTtcbiAgfSBlbHNlIHtcbiAgICB0YWcgPSBpZDtcbiAgfVxuXG4gIGlmIChpc0VsKHRhZykpIHtcbiAgICB2YXIgX3RhZyA9IHRhZyxcbiAgICAgICAgX3BsYXllciA9IF90YWcucGxheWVyLFxuICAgICAgICBwbGF5ZXJJZCA9IF90YWcucGxheWVySWQ7IC8vIEVsZW1lbnQgbWF5IGhhdmUgYSBgcGxheWVyYCBwcm9wZXJ0eSByZWZlcnJpbmcgdG8gYW4gYWxyZWFkeSBjcmVhdGVkXG4gICAgLy8gcGxheWVyIGluc3RhbmNlLiBJZiBzbywgcmV0dXJuIHRoYXQuXG5cbiAgICBpZiAoX3BsYXllciB8fCBwbGF5ZXJzW3BsYXllcklkXSkge1xuICAgICAgcmV0dXJuIF9wbGF5ZXIgfHwgcGxheWVyc1twbGF5ZXJJZF07XG4gICAgfVxuICB9XG59O1xuLyoqXG4gKiBSZXR1cm5zIGFuIGFycmF5IG9mIGFsbCBjdXJyZW50IHBsYXllcnMuXG4gKlxuICogQHJldHVybiB7QXJyYXl9XG4gKiAgICAgICAgIEFuIGFycmF5IG9mIGFsbCBwbGF5ZXJzLiBUaGUgYXJyYXkgd2lsbCBiZSBpbiB0aGUgb3JkZXIgdGhhdFxuICogICAgICAgICBgT2JqZWN0LmtleXNgIHByb3ZpZGVzLCB3aGljaCBjb3VsZCBwb3RlbnRpYWxseSB2YXJ5IGJldHdlZW5cbiAqICAgICAgICAgSmF2YVNjcmlwdCBlbmdpbmVzLlxuICpcbiAqL1xuXG5cbnZpZGVvanMkMS5nZXRBbGxQbGF5ZXJzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gKC8vIERpc3Bvc2VkIHBsYXllcnMgbGVhdmUgYSBrZXkgd2l0aCBhIGBudWxsYCB2YWx1ZSwgc28gd2UgbmVlZCB0byBtYWtlIHN1cmVcbiAgICAvLyB3ZSBmaWx0ZXIgdGhvc2Ugb3V0LlxuICAgIE9iamVjdC5rZXlzKFBsYXllci5wbGF5ZXJzKS5tYXAoZnVuY3Rpb24gKGspIHtcbiAgICAgIHJldHVybiBQbGF5ZXIucGxheWVyc1trXTtcbiAgICB9KS5maWx0ZXIoQm9vbGVhbilcbiAgKTtcbn07XG5cbnZpZGVvanMkMS5wbGF5ZXJzID0gUGxheWVyLnBsYXllcnM7XG52aWRlb2pzJDEuZ2V0Q29tcG9uZW50ID0gQ29tcG9uZW50LmdldENvbXBvbmVudDtcbi8qKlxuICogUmVnaXN0ZXIgYSBjb21wb25lbnQgc28gaXQgY2FuIHJlZmVycmVkIHRvIGJ5IG5hbWUuIFVzZWQgd2hlbiBhZGRpbmcgdG8gb3RoZXJcbiAqIGNvbXBvbmVudHMsIGVpdGhlciB0aHJvdWdoIGFkZENoaWxkIGBjb21wb25lbnQuYWRkQ2hpbGQoJ215Q29tcG9uZW50JylgIG9yIHRocm91Z2hcbiAqIGRlZmF1bHQgY2hpbGRyZW4gb3B0aW9ucyAgYHsgY2hpbGRyZW46IFsnbXlDb21wb25lbnQnXSB9YC5cbiAqXG4gKiA+IE5PVEU6IFlvdSBjb3VsZCBhbHNvIGp1c3QgaW5pdGlhbGl6ZSB0aGUgY29tcG9uZW50IGJlZm9yZSBhZGRpbmcuXG4gKiBgY29tcG9uZW50LmFkZENoaWxkKG5ldyBNeUNvbXBvbmVudCgpKTtgXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAqICAgICAgICBUaGUgY2xhc3MgbmFtZSBvZiB0aGUgY29tcG9uZW50XG4gKlxuICogQHBhcmFtIHtDb21wb25lbnR9IGNvbXBcbiAqICAgICAgICBUaGUgY29tcG9uZW50IGNsYXNzXG4gKlxuICogQHJldHVybiB7Q29tcG9uZW50fVxuICogICAgICAgICBUaGUgbmV3bHkgcmVnaXN0ZXJlZCBjb21wb25lbnRcbiAqL1xuXG52aWRlb2pzJDEucmVnaXN0ZXJDb21wb25lbnQgPSBmdW5jdGlvbiAobmFtZSQkMSwgY29tcCkge1xuICBpZiAoVGVjaC5pc1RlY2goY29tcCkpIHtcbiAgICBsb2cud2FybihcIlRoZSBcIiArIG5hbWUkJDEgKyBcIiB0ZWNoIHdhcyByZWdpc3RlcmVkIGFzIGEgY29tcG9uZW50LiBJdCBzaG91bGQgaW5zdGVhZCBiZSByZWdpc3RlcmVkIHVzaW5nIHZpZGVvanMucmVnaXN0ZXJUZWNoKG5hbWUsIHRlY2gpXCIpO1xuICB9XG5cbiAgQ29tcG9uZW50LnJlZ2lzdGVyQ29tcG9uZW50LmNhbGwoQ29tcG9uZW50LCBuYW1lJCQxLCBjb21wKTtcbn07XG5cbnZpZGVvanMkMS5nZXRUZWNoID0gVGVjaC5nZXRUZWNoO1xudmlkZW9qcyQxLnJlZ2lzdGVyVGVjaCA9IFRlY2gucmVnaXN0ZXJUZWNoO1xudmlkZW9qcyQxLnVzZSA9IHVzZTtcbi8qKlxuICogQW4gb2JqZWN0IHRoYXQgY2FuIGJlIHJldHVybmVkIGJ5IGEgbWlkZGxld2FyZSB0byBzaWduaWZ5XG4gKiB0aGF0IHRoZSBtaWRkbGV3YXJlIGlzIGJlaW5nIHRlcm1pbmF0ZWQuXG4gKlxuICogQHR5cGUge29iamVjdH1cbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBtaWRkbGV3YXJlLlRFUk1JTkFUT1JcbiAqL1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkodmlkZW9qcyQxLCAnbWlkZGxld2FyZScsIHtcbiAgdmFsdWU6IHt9LFxuICB3cml0ZWFibGU6IGZhbHNlLFxuICBlbnVtZXJhYmxlOiB0cnVlXG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2aWRlb2pzJDEubWlkZGxld2FyZSwgJ1RFUk1JTkFUT1InLCB7XG4gIHZhbHVlOiBURVJNSU5BVE9SLFxuICB3cml0ZWFibGU6IGZhbHNlLFxuICBlbnVtZXJhYmxlOiB0cnVlXG59KTtcbi8qKlxuICogQSByZWZlcmVuY2UgdG8gdGhlIHtAbGluayBtb2R1bGU6YnJvd3Nlcnxicm93c2VyIHV0aWxpdHkgbW9kdWxlfSBhcyBhbiBvYmplY3QuXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqIEBzZWUgIHtAbGluayBtb2R1bGU6YnJvd3Nlcnxicm93c2VyfVxuICovXG5cbnZpZGVvanMkMS5icm93c2VyID0gYnJvd3Nlcjtcbi8qKlxuICogVXNlIHtAbGluayBtb2R1bGU6YnJvd3Nlci5UT1VDSF9FTkFCTEVEfGJyb3dzZXIuVE9VQ0hfRU5BQkxFRH0gaW5zdGVhZDsgb25seVxuICogaW5jbHVkZWQgZm9yIGJhY2t3YXJkLWNvbXBhdGliaWxpdHkgd2l0aCA0LnguXG4gKlxuICogQGRlcHJlY2F0ZWQgU2luY2UgdmVyc2lvbiA1LjAsIHVzZSB7QGxpbmsgbW9kdWxlOmJyb3dzZXIuVE9VQ0hfRU5BQkxFRHxicm93c2VyLlRPVUNIX0VOQUJMRUQgaW5zdGVhZC5cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5cbnZpZGVvanMkMS5UT1VDSF9FTkFCTEVEID0gVE9VQ0hfRU5BQkxFRDtcbnZpZGVvanMkMS5leHRlbmQgPSBleHRlbmQ7XG52aWRlb2pzJDEubWVyZ2VPcHRpb25zID0gbWVyZ2VPcHRpb25zO1xudmlkZW9qcyQxLmJpbmQgPSBiaW5kO1xudmlkZW9qcyQxLnJlZ2lzdGVyUGx1Z2luID0gUGx1Z2luLnJlZ2lzdGVyUGx1Z2luO1xudmlkZW9qcyQxLmRlcmVnaXN0ZXJQbHVnaW4gPSBQbHVnaW4uZGVyZWdpc3RlclBsdWdpbjtcbi8qKlxuICogRGVwcmVjYXRlZCBtZXRob2QgdG8gcmVnaXN0ZXIgYSBwbHVnaW4gd2l0aCBWaWRlby5qc1xuICpcbiAqIEBkZXByZWNhdGVkIHZpZGVvanMucGx1Z2luKCkgaXMgZGVwcmVjYXRlZDsgdXNlIHZpZGVvanMucmVnaXN0ZXJQbHVnaW4oKSBpbnN0ZWFkXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAqICAgICAgICBUaGUgcGx1Z2luIG5hbWVcbiAqXG4gKiBAcGFyYW0ge1BsdWdpbnxGdW5jdGlvbn0gcGx1Z2luXG4gKiAgICAgICAgIFRoZSBwbHVnaW4gc3ViLWNsYXNzIG9yIGZ1bmN0aW9uXG4gKi9cblxudmlkZW9qcyQxLnBsdWdpbiA9IGZ1bmN0aW9uIChuYW1lJCQxLCBwbHVnaW4pIHtcbiAgbG9nLndhcm4oJ3ZpZGVvanMucGx1Z2luKCkgaXMgZGVwcmVjYXRlZDsgdXNlIHZpZGVvanMucmVnaXN0ZXJQbHVnaW4oKSBpbnN0ZWFkJyk7XG4gIHJldHVybiBQbHVnaW4ucmVnaXN0ZXJQbHVnaW4obmFtZSQkMSwgcGx1Z2luKTtcbn07XG5cbnZpZGVvanMkMS5nZXRQbHVnaW5zID0gUGx1Z2luLmdldFBsdWdpbnM7XG52aWRlb2pzJDEuZ2V0UGx1Z2luID0gUGx1Z2luLmdldFBsdWdpbjtcbnZpZGVvanMkMS5nZXRQbHVnaW5WZXJzaW9uID0gUGx1Z2luLmdldFBsdWdpblZlcnNpb247XG4vKipcbiAqIEFkZGluZyBsYW5ndWFnZXMgc28gdGhhdCB0aGV5J3JlIGF2YWlsYWJsZSB0byBhbGwgcGxheWVycy5cbiAqIEV4YW1wbGU6IGB2aWRlb2pzLmFkZExhbmd1YWdlKCdlcycsIHsgJ0hlbGxvJzogJ0hvbGEnIH0pO2BcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29kZVxuICogICAgICAgIFRoZSBsYW5ndWFnZSBjb2RlIG9yIGRpY3Rpb25hcnkgcHJvcGVydHlcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICogICAgICAgIFRoZSBkYXRhIHZhbHVlcyB0byBiZSB0cmFuc2xhdGVkXG4gKlxuICogQHJldHVybiB7T2JqZWN0fVxuICogICAgICAgICBUaGUgcmVzdWx0aW5nIGxhbmd1YWdlIGRpY3Rpb25hcnkgb2JqZWN0XG4gKi9cblxudmlkZW9qcyQxLmFkZExhbmd1YWdlID0gZnVuY3Rpb24gKGNvZGUsIGRhdGEpIHtcbiAgdmFyIF9tZXJnZU9wdGlvbnM7XG5cbiAgY29kZSA9ICgnJyArIGNvZGUpLnRvTG93ZXJDYXNlKCk7XG4gIHZpZGVvanMkMS5vcHRpb25zLmxhbmd1YWdlcyA9IG1lcmdlT3B0aW9ucyh2aWRlb2pzJDEub3B0aW9ucy5sYW5ndWFnZXMsIChfbWVyZ2VPcHRpb25zID0ge30sIF9tZXJnZU9wdGlvbnNbY29kZV0gPSBkYXRhLCBfbWVyZ2VPcHRpb25zKSk7XG4gIHJldHVybiB2aWRlb2pzJDEub3B0aW9ucy5sYW5ndWFnZXNbY29kZV07XG59O1xuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byB0aGUge0BsaW5rIG1vZHVsZTpsb2d8bG9nIHV0aWxpdHkgbW9kdWxlfSBhcyBhbiBvYmplY3QuXG4gKlxuICogQHR5cGUge0Z1bmN0aW9ufVxuICogQHNlZSAge0BsaW5rIG1vZHVsZTpsb2d8bG9nfVxuICovXG5cblxudmlkZW9qcyQxLmxvZyA9IGxvZztcbnZpZGVvanMkMS5jcmVhdGVMb2dnZXIgPSBjcmVhdGVMb2dnZXIkMTtcbnZpZGVvanMkMS5jcmVhdGVUaW1lUmFuZ2UgPSB2aWRlb2pzJDEuY3JlYXRlVGltZVJhbmdlcyA9IGNyZWF0ZVRpbWVSYW5nZXM7XG52aWRlb2pzJDEuZm9ybWF0VGltZSA9IGZvcm1hdFRpbWU7XG52aWRlb2pzJDEuc2V0Rm9ybWF0VGltZSA9IHNldEZvcm1hdFRpbWU7XG52aWRlb2pzJDEucmVzZXRGb3JtYXRUaW1lID0gcmVzZXRGb3JtYXRUaW1lO1xudmlkZW9qcyQxLnBhcnNlVXJsID0gcGFyc2VVcmw7XG52aWRlb2pzJDEuaXNDcm9zc09yaWdpbiA9IGlzQ3Jvc3NPcmlnaW47XG52aWRlb2pzJDEuRXZlbnRUYXJnZXQgPSBFdmVudFRhcmdldDtcbnZpZGVvanMkMS5vbiA9IG9uO1xudmlkZW9qcyQxLm9uZSA9IG9uZTtcbnZpZGVvanMkMS5vZmYgPSBvZmY7XG52aWRlb2pzJDEudHJpZ2dlciA9IHRyaWdnZXI7XG4vKipcbiAqIEEgY3Jvc3MtYnJvd3NlciBYTUxIdHRwUmVxdWVzdCB3cmFwcGVyLlxuICpcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICAgIHtPYmplY3R9IG9wdGlvbnNcbiAqICAgICAgICAgICBTZXR0aW5ncyBmb3IgdGhlIHJlcXVlc3QuXG4gKlxuICogQHJldHVybiAgIHtYTUxIdHRwUmVxdWVzdHxYRG9tYWluUmVxdWVzdH1cbiAqICAgICAgICAgICBUaGUgcmVxdWVzdCBvYmplY3QuXG4gKlxuICogQHNlZSAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9SYXlub3MveGhyXG4gKi9cblxudmlkZW9qcyQxLnhociA9IHhocjtcbnZpZGVvanMkMS5UZXh0VHJhY2sgPSBUZXh0VHJhY2s7XG52aWRlb2pzJDEuQXVkaW9UcmFjayA9IEF1ZGlvVHJhY2s7XG52aWRlb2pzJDEuVmlkZW9UcmFjayA9IFZpZGVvVHJhY2s7XG5bJ2lzRWwnLCAnaXNUZXh0Tm9kZScsICdjcmVhdGVFbCcsICdoYXNDbGFzcycsICdhZGRDbGFzcycsICdyZW1vdmVDbGFzcycsICd0b2dnbGVDbGFzcycsICdzZXRBdHRyaWJ1dGVzJywgJ2dldEF0dHJpYnV0ZXMnLCAnZW1wdHlFbCcsICdhcHBlbmRDb250ZW50JywgJ2luc2VydENvbnRlbnQnXS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gIHZpZGVvanMkMVtrXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBsb2cud2FybihcInZpZGVvanMuXCIgKyBrICsgXCIoKSBpcyBkZXByZWNhdGVkOyB1c2UgdmlkZW9qcy5kb20uXCIgKyBrICsgXCIoKSBpbnN0ZWFkXCIpO1xuICAgIHJldHVybiBEb21ba10uYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfTtcbn0pO1xudmlkZW9qcyQxLmNvbXB1dGVkU3R5bGUgPSBjb21wdXRlZFN0eWxlO1xuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byB0aGUge0BsaW5rIG1vZHVsZTpkb218RE9NIHV0aWxpdHkgbW9kdWxlfSBhcyBhbiBvYmplY3QuXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqIEBzZWUgIHtAbGluayBtb2R1bGU6ZG9tfGRvbX1cbiAqL1xuXG52aWRlb2pzJDEuZG9tID0gRG9tO1xuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byB0aGUge0BsaW5rIG1vZHVsZTp1cmx8VVJMIHV0aWxpdHkgbW9kdWxlfSBhcyBhbiBvYmplY3QuXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqIEBzZWUgIHtAbGluayBtb2R1bGU6dXJsfHVybH1cbiAqL1xuXG52aWRlb2pzJDEudXJsID0gVXJsO1xuXG4vKipcbiAqIEB2aWRlb2pzL2h0dHAtc3RyZWFtaW5nXG4gKiBAdmVyc2lvbiAxLjkuM1xuICogQGNvcHlyaWdodCAyMDE5IEJyaWdodGNvdmUsIEluY1xuICogQGxpY2Vuc2UgQXBhY2hlLTIuMFxuICovXG4vKipcbiAqIEBmaWxlIHJlc29sdmUtdXJsLmpzIC0gSGFuZGxpbmcgaG93IFVSTHMgYXJlIHJlc29sdmVkIGFuZCBtYW5pcHVsYXRlZFxuICovXG5cbnZhciByZXNvbHZlVXJsID0gZnVuY3Rpb24gcmVzb2x2ZVVybChiYXNlVVJMLCByZWxhdGl2ZVVSTCkge1xuICAvLyByZXR1cm4gZWFybHkgaWYgd2UgZG9uJ3QgbmVlZCB0byByZXNvbHZlXG4gIGlmICgvXlthLXpdKzovaS50ZXN0KHJlbGF0aXZlVVJMKSkge1xuICAgIHJldHVybiByZWxhdGl2ZVVSTDtcbiAgfSAvLyBpZiB0aGUgYmFzZSBVUkwgaXMgcmVsYXRpdmUgdGhlbiBjb21iaW5lIHdpdGggdGhlIGN1cnJlbnQgbG9jYXRpb25cblxuXG4gIGlmICghL1xcL1xcLy9pLnRlc3QoYmFzZVVSTCkpIHtcbiAgICBiYXNlVVJMID0gVVJMVG9vbGtpdC5idWlsZEFic29sdXRlVVJMKHdpbmRvdyQxLmxvY2F0aW9uLmhyZWYsIGJhc2VVUkwpO1xuICB9XG5cbiAgcmV0dXJuIFVSTFRvb2xraXQuYnVpbGRBYnNvbHV0ZVVSTChiYXNlVVJMLCByZWxhdGl2ZVVSTCk7XG59O1xuLyoqXG4gKiBDaGVja3Mgd2hldGhlciB4aHIgcmVxdWVzdCB3YXMgcmVkaXJlY3RlZCBhbmQgcmV0dXJucyBjb3JyZWN0IHVybCBkZXBlbmRpbmdcbiAqIG9uIGBoYW5kbGVNYW5pZmVzdFJlZGlyZWN0c2Agb3B0aW9uXG4gKlxuICogQGFwaSBwcml2YXRlXG4gKlxuICogQHBhcmFtICB7U3RyaW5nfSB1cmwgLSBhbiB1cmwgYmVpbmcgcmVxdWVzdGVkXG4gKiBAcGFyYW0gIHtYTUxIdHRwUmVxdWVzdH0gcmVxIC0geGhyIHJlcXVlc3QgcmVzdWx0XG4gKlxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cblxudmFyIHJlc29sdmVNYW5pZmVzdFJlZGlyZWN0ID0gZnVuY3Rpb24gcmVzb2x2ZU1hbmlmZXN0UmVkaXJlY3QoaGFuZGxlTWFuaWZlc3RSZWRpcmVjdCwgdXJsLCByZXEpIHtcbiAgLy8gVG8gdW5kZXJzdGFuZCBob3cgdGhlIHJlc3BvbnNlVVJMIGJlbG93IGlzIHNldCBhbmQgZ2VuZXJhdGVkOlxuICAvLyAtIGh0dHBzOi8vZmV0Y2guc3BlYy53aGF0d2cub3JnLyNjb25jZXB0LXJlc3BvbnNlLXVybFxuICAvLyAtIGh0dHBzOi8vZmV0Y2guc3BlYy53aGF0d2cub3JnLyNhdG9taWMtaHR0cC1yZWRpcmVjdC1oYW5kbGluZ1xuICBpZiAoaGFuZGxlTWFuaWZlc3RSZWRpcmVjdCAmJiByZXEucmVzcG9uc2VVUkwgJiYgdXJsICE9PSByZXEucmVzcG9uc2VVUkwpIHtcbiAgICByZXR1cm4gcmVxLnJlc3BvbnNlVVJMO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn07XG5cbnZhciBjbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIGNsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn07XG5cbnZhciBjcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfTtcbn0oKTtcblxudmFyIGdldCQxID0gZnVuY3Rpb24gZ2V0KG9iamVjdCwgcHJvcGVydHksIHJlY2VpdmVyKSB7XG4gIGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcbiAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpO1xuXG4gIGlmIChkZXNjID09PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7XG5cbiAgICBpZiAocGFyZW50ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZ2V0KHBhcmVudCwgcHJvcGVydHksIHJlY2VpdmVyKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MpIHtcbiAgICByZXR1cm4gZGVzYy52YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7XG5cbiAgICBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTtcbiAgfVxufTtcblxudmFyIGluaGVyaXRzID0gZnVuY3Rpb24gaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpO1xuICB9XG5cbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgY29uc3RydWN0b3I6IHtcbiAgICAgIHZhbHVlOiBzdWJDbGFzcyxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuICBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG59O1xuXG52YXIgcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiA9IGZ1bmN0aW9uIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuICBpZiAoIXNlbGYpIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gIH1cblxuICByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcbn07XG5cbnZhciBzbGljZWRUb0FycmF5ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkge1xuICAgIHZhciBfYXJyID0gW107XG4gICAgdmFyIF9uID0gdHJ1ZTtcbiAgICB2YXIgX2QgPSBmYWxzZTtcbiAgICB2YXIgX2UgPSB1bmRlZmluZWQ7XG5cbiAgICB0cnkge1xuICAgICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkge1xuICAgICAgICBfYXJyLnB1c2goX3MudmFsdWUpO1xuXG4gICAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhaztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIF9kID0gdHJ1ZTtcbiAgICAgIF9lID0gZXJyO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKF9kKSB0aHJvdyBfZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gX2FycjtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge1xuICAgICAgcmV0dXJuIGFycjtcbiAgICB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkge1xuICAgICAgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7XG4gICAgfVxuICB9O1xufSgpO1xuLyoqXG4gKiBAZmlsZSBwbGF5bGlzdC1sb2FkZXIuanNcbiAqXG4gKiBBIHN0YXRlIG1hY2hpbmUgdGhhdCBtYW5hZ2VzIHRoZSBsb2FkaW5nLCBjYWNoaW5nLCBhbmQgdXBkYXRpbmcgb2ZcbiAqIE0zVTggcGxheWxpc3RzLlxuICpcbiAqL1xuXG5cbnZhciBtZXJnZU9wdGlvbnMkMSA9IHZpZGVvanMkMS5tZXJnZU9wdGlvbnMsXG4gICAgRXZlbnRUYXJnZXQkMSA9IHZpZGVvanMkMS5FdmVudFRhcmdldCxcbiAgICBsb2ckMSA9IHZpZGVvanMkMS5sb2c7XG4vKipcbiAqIExvb3BzIHRocm91Z2ggYWxsIHN1cHBvcnRlZCBtZWRpYSBncm91cHMgaW4gbWFzdGVyIGFuZCBjYWxscyB0aGUgcHJvdmlkZWRcbiAqIGNhbGxiYWNrIGZvciBlYWNoIGdyb3VwXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG1hc3RlclxuICogICAgICAgIFRoZSBwYXJzZWQgbWFzdGVyIG1hbmlmZXN0IG9iamVjdFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqICAgICAgICBDYWxsYmFjayB0byBjYWxsIGZvciBlYWNoIG1lZGlhIGdyb3VwXG4gKi9cblxudmFyIGZvckVhY2hNZWRpYUdyb3VwID0gZnVuY3Rpb24gZm9yRWFjaE1lZGlhR3JvdXAobWFzdGVyLCBjYWxsYmFjaykge1xuICBbJ0FVRElPJywgJ1NVQlRJVExFUyddLmZvckVhY2goZnVuY3Rpb24gKG1lZGlhVHlwZSkge1xuICAgIGZvciAodmFyIGdyb3VwS2V5IGluIG1hc3Rlci5tZWRpYUdyb3Vwc1ttZWRpYVR5cGVdKSB7XG4gICAgICBmb3IgKHZhciBsYWJlbEtleSBpbiBtYXN0ZXIubWVkaWFHcm91cHNbbWVkaWFUeXBlXVtncm91cEtleV0pIHtcbiAgICAgICAgdmFyIG1lZGlhUHJvcGVydGllcyA9IG1hc3Rlci5tZWRpYUdyb3Vwc1ttZWRpYVR5cGVdW2dyb3VwS2V5XVtsYWJlbEtleV07XG4gICAgICAgIGNhbGxiYWNrKG1lZGlhUHJvcGVydGllcywgbWVkaWFUeXBlLCBncm91cEtleSwgbGFiZWxLZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuLyoqXG4gICogUmV0dXJucyBhIG5ldyBhcnJheSBvZiBzZWdtZW50cyB0aGF0IGlzIHRoZSByZXN1bHQgb2YgbWVyZ2luZ1xuICAqIHByb3BlcnRpZXMgZnJvbSBhbiBvbGRlciBsaXN0IG9mIHNlZ21lbnRzIG9udG8gYW4gdXBkYXRlZFxuICAqIGxpc3QuIE5vIHByb3BlcnRpZXMgb24gdGhlIHVwZGF0ZWQgcGxheWxpc3Qgd2lsbCBiZSBvdmVycmlkZGVuLlxuICAqXG4gICogQHBhcmFtIHtBcnJheX0gb3JpZ2luYWwgdGhlIG91dGRhdGVkIGxpc3Qgb2Ygc2VnbWVudHNcbiAgKiBAcGFyYW0ge0FycmF5fSB1cGRhdGUgdGhlIHVwZGF0ZWQgbGlzdCBvZiBzZWdtZW50c1xuICAqIEBwYXJhbSB7TnVtYmVyPX0gb2Zmc2V0IHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgdXBkYXRlXG4gICogc2VnbWVudCBpbiB0aGUgb3JpZ2luYWwgc2VnbWVudCBsaXN0LiBGb3Igbm9uLWxpdmUgcGxheWxpc3RzLFxuICAqIHRoaXMgc2hvdWxkIGFsd2F5cyBiZSB6ZXJvIGFuZCBkb2VzIG5vdCBuZWVkIHRvIGJlXG4gICogc3BlY2lmaWVkLiBGb3IgbGl2ZSBwbGF5bGlzdHMsIGl0IHNob3VsZCBiZSB0aGUgZGlmZmVyZW5jZVxuICAqIGJldHdlZW4gdGhlIG1lZGlhIHNlcXVlbmNlIG51bWJlcnMgaW4gdGhlIG9yaWdpbmFsIGFuZCB1cGRhdGVkXG4gICogcGxheWxpc3RzLlxuICAqIEByZXR1cm4gYSBsaXN0IG9mIG1lcmdlZCBzZWdtZW50IG9iamVjdHNcbiAgKi9cblxuXG52YXIgdXBkYXRlU2VnbWVudHMgPSBmdW5jdGlvbiB1cGRhdGVTZWdtZW50cyhvcmlnaW5hbCwgdXBkYXRlLCBvZmZzZXQpIHtcbiAgdmFyIHJlc3VsdCA9IHVwZGF0ZS5zbGljZSgpO1xuICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcbiAgdmFyIGxlbmd0aCA9IE1hdGgubWluKG9yaWdpbmFsLmxlbmd0aCwgdXBkYXRlLmxlbmd0aCArIG9mZnNldCk7XG5cbiAgZm9yICh2YXIgaSA9IG9mZnNldDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgcmVzdWx0W2kgLSBvZmZzZXRdID0gbWVyZ2VPcHRpb25zJDEob3JpZ2luYWxbaV0sIHJlc3VsdFtpIC0gb2Zmc2V0XSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxudmFyIHJlc29sdmVTZWdtZW50VXJpcyA9IGZ1bmN0aW9uIHJlc29sdmVTZWdtZW50VXJpcyhzZWdtZW50LCBiYXNlVXJpKSB7XG4gIGlmICghc2VnbWVudC5yZXNvbHZlZFVyaSkge1xuICAgIHNlZ21lbnQucmVzb2x2ZWRVcmkgPSByZXNvbHZlVXJsKGJhc2VVcmksIHNlZ21lbnQudXJpKTtcbiAgfVxuXG4gIGlmIChzZWdtZW50LmtleSAmJiAhc2VnbWVudC5rZXkucmVzb2x2ZWRVcmkpIHtcbiAgICBzZWdtZW50LmtleS5yZXNvbHZlZFVyaSA9IHJlc29sdmVVcmwoYmFzZVVyaSwgc2VnbWVudC5rZXkudXJpKTtcbiAgfVxuXG4gIGlmIChzZWdtZW50Lm1hcCAmJiAhc2VnbWVudC5tYXAucmVzb2x2ZWRVcmkpIHtcbiAgICBzZWdtZW50Lm1hcC5yZXNvbHZlZFVyaSA9IHJlc29sdmVVcmwoYmFzZVVyaSwgc2VnbWVudC5tYXAudXJpKTtcbiAgfVxufTtcbi8qKlxuICAqIFJldHVybnMgYSBuZXcgbWFzdGVyIHBsYXlsaXN0IHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBtZXJnaW5nIGFuXG4gICogdXBkYXRlZCBtZWRpYSBwbGF5bGlzdCBpbnRvIHRoZSBvcmlnaW5hbCB2ZXJzaW9uLiBJZiB0aGVcbiAgKiB1cGRhdGVkIG1lZGlhIHBsYXlsaXN0IGRvZXMgbm90IG1hdGNoIGFueSBvZiB0aGUgcGxheWxpc3RcbiAgKiBlbnRyaWVzIGluIHRoZSBvcmlnaW5hbCBtYXN0ZXIgcGxheWxpc3QsIG51bGwgaXMgcmV0dXJuZWQuXG4gICpcbiAgKiBAcGFyYW0ge09iamVjdH0gbWFzdGVyIGEgcGFyc2VkIG1hc3RlciBNM1U4IG9iamVjdFxuICAqIEBwYXJhbSB7T2JqZWN0fSBtZWRpYSBhIHBhcnNlZCBtZWRpYSBNM1U4IG9iamVjdFxuICAqIEByZXR1cm4ge09iamVjdH0gYSBuZXcgb2JqZWN0IHRoYXQgcmVwcmVzZW50cyB0aGUgb3JpZ2luYWxcbiAgKiBtYXN0ZXIgcGxheWxpc3Qgd2l0aCB0aGUgdXBkYXRlZCBtZWRpYSBwbGF5bGlzdCBtZXJnZWQgaW4sIG9yXG4gICogbnVsbCBpZiB0aGUgbWVyZ2UgcHJvZHVjZWQgbm8gY2hhbmdlLlxuICAqL1xuXG5cbnZhciB1cGRhdGVNYXN0ZXIgPSBmdW5jdGlvbiB1cGRhdGVNYXN0ZXIobWFzdGVyLCBtZWRpYSkge1xuICB2YXIgcmVzdWx0ID0gbWVyZ2VPcHRpb25zJDEobWFzdGVyLCB7fSk7XG4gIHZhciBwbGF5bGlzdCA9IHJlc3VsdC5wbGF5bGlzdHNbbWVkaWEudXJpXTtcblxuICBpZiAoIXBsYXlsaXN0KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gLy8gY29uc2lkZXIgdGhlIHBsYXlsaXN0IHVuY2hhbmdlZCBpZiB0aGUgbnVtYmVyIG9mIHNlZ21lbnRzIGlzIGVxdWFsLCB0aGUgbWVkaWFcbiAgLy8gc2VxdWVuY2UgbnVtYmVyIGlzIHVuY2hhbmdlZCwgYW5kIHRoaXMgcGxheWxpc3QgaGFzbid0IGJlY29tZSB0aGUgZW5kIG9mIHRoZSBwbGF5bGlzdFxuXG5cbiAgaWYgKHBsYXlsaXN0LnNlZ21lbnRzICYmIG1lZGlhLnNlZ21lbnRzICYmIHBsYXlsaXN0LnNlZ21lbnRzLmxlbmd0aCA9PT0gbWVkaWEuc2VnbWVudHMubGVuZ3RoICYmIHBsYXlsaXN0LmVuZExpc3QgPT09IG1lZGlhLmVuZExpc3QgJiYgcGxheWxpc3QubWVkaWFTZXF1ZW5jZSA9PT0gbWVkaWEubWVkaWFTZXF1ZW5jZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIG1lcmdlZFBsYXlsaXN0ID0gbWVyZ2VPcHRpb25zJDEocGxheWxpc3QsIG1lZGlhKTsgLy8gaWYgdGhlIHVwZGF0ZSBjb3VsZCBvdmVybGFwIGV4aXN0aW5nIHNlZ21lbnQgaW5mb3JtYXRpb24sIG1lcmdlIHRoZSB0d28gc2VnbWVudCBsaXN0c1xuXG4gIGlmIChwbGF5bGlzdC5zZWdtZW50cykge1xuICAgIG1lcmdlZFBsYXlsaXN0LnNlZ21lbnRzID0gdXBkYXRlU2VnbWVudHMocGxheWxpc3Quc2VnbWVudHMsIG1lZGlhLnNlZ21lbnRzLCBtZWRpYS5tZWRpYVNlcXVlbmNlIC0gcGxheWxpc3QubWVkaWFTZXF1ZW5jZSk7XG4gIH0gLy8gcmVzb2x2ZSBhbnkgc2VnbWVudCBVUklzIHRvIHByZXZlbnQgdXMgZnJvbSBoYXZpbmcgdG8gZG8gaXQgbGF0ZXJcblxuXG4gIG1lcmdlZFBsYXlsaXN0LnNlZ21lbnRzLmZvckVhY2goZnVuY3Rpb24gKHNlZ21lbnQpIHtcbiAgICByZXNvbHZlU2VnbWVudFVyaXMoc2VnbWVudCwgbWVyZ2VkUGxheWxpc3QucmVzb2x2ZWRVcmkpO1xuICB9KTsgLy8gVE9ETyBSaWdodCBub3cgaW4gdGhlIHBsYXlsaXN0cyBhcnJheSB0aGVyZSBhcmUgdHdvIHJlZmVyZW5jZXMgdG8gZWFjaCBwbGF5bGlzdCwgb25lXG4gIC8vIHRoYXQgaXMgcmVmZXJlbmNlZCBieSBpbmRleCwgYW5kIG9uZSBieSBVUkkuIFRoZSBpbmRleCByZWZlcmVuY2UgbWF5IG5vIGxvbmdlciBiZVxuICAvLyBuZWNlc3NhcnkuXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQucGxheWxpc3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHJlc3VsdC5wbGF5bGlzdHNbaV0udXJpID09PSBtZWRpYS51cmkpIHtcbiAgICAgIHJlc3VsdC5wbGF5bGlzdHNbaV0gPSBtZXJnZWRQbGF5bGlzdDtcbiAgICB9XG4gIH1cblxuICByZXN1bHQucGxheWxpc3RzW21lZGlhLnVyaV0gPSBtZXJnZWRQbGF5bGlzdDtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbnZhciBzZXR1cE1lZGlhUGxheWxpc3RzID0gZnVuY3Rpb24gc2V0dXBNZWRpYVBsYXlsaXN0cyhtYXN0ZXIpIHtcbiAgLy8gc2V0dXAgYnktVVJJIGxvb2t1cHMgYW5kIHJlc29sdmUgbWVkaWEgcGxheWxpc3QgVVJJc1xuICB2YXIgaSA9IG1hc3Rlci5wbGF5bGlzdHMubGVuZ3RoO1xuXG4gIHdoaWxlIChpLS0pIHtcbiAgICB2YXIgcGxheWxpc3QgPSBtYXN0ZXIucGxheWxpc3RzW2ldO1xuICAgIG1hc3Rlci5wbGF5bGlzdHNbcGxheWxpc3QudXJpXSA9IHBsYXlsaXN0O1xuICAgIHBsYXlsaXN0LnJlc29sdmVkVXJpID0gcmVzb2x2ZVVybChtYXN0ZXIudXJpLCBwbGF5bGlzdC51cmkpO1xuICAgIHBsYXlsaXN0LmlkID0gaTtcblxuICAgIGlmICghcGxheWxpc3QuYXR0cmlidXRlcykge1xuICAgICAgLy8gQWx0aG91Z2ggdGhlIHNwZWMgc3RhdGVzIGFuICNFWFQtWC1TVFJFQU0tSU5GIHRhZyBNVVNUIGhhdmUgYVxuICAgICAgLy8gQkFORFdJRFRIIGF0dHJpYnV0ZSwgd2UgY2FuIHBsYXkgdGhlIHN0cmVhbSB3aXRob3V0IGl0LiBUaGlzIG1lYW5zIGEgcG9vcmx5XG4gICAgICAvLyBmb3JtYXR0ZWQgbWFzdGVyIHBsYXlsaXN0IG1heSBub3QgaGF2ZSBhbiBhdHRyaWJ1dGUgbGlzdC4gQW4gYXR0cmlidXRlc1xuICAgICAgLy8gcHJvcGVydHkgaXMgYWRkZWQgaGVyZSB0byBwcmV2ZW50IHVuZGVmaW5lZCByZWZlcmVuY2VzIHdoZW4gd2UgZW5jb3VudGVyXG4gICAgICAvLyB0aGlzIHNjZW5hcmlvLlxuICAgICAgcGxheWxpc3QuYXR0cmlidXRlcyA9IHt9O1xuICAgICAgbG9nJDEud2FybignSW52YWxpZCBwbGF5bGlzdCBTVFJFQU0tSU5GIGRldGVjdGVkLiBNaXNzaW5nIEJBTkRXSURUSCBhdHRyaWJ1dGUuJyk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgcmVzb2x2ZU1lZGlhR3JvdXBVcmlzID0gZnVuY3Rpb24gcmVzb2x2ZU1lZGlhR3JvdXBVcmlzKG1hc3Rlcikge1xuICBmb3JFYWNoTWVkaWFHcm91cChtYXN0ZXIsIGZ1bmN0aW9uIChwcm9wZXJ0aWVzKSB7XG4gICAgaWYgKHByb3BlcnRpZXMudXJpKSB7XG4gICAgICBwcm9wZXJ0aWVzLnJlc29sdmVkVXJpID0gcmVzb2x2ZVVybChtYXN0ZXIudXJpLCBwcm9wZXJ0aWVzLnVyaSk7XG4gICAgfVxuICB9KTtcbn07XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHRpbWUgdG8gd2FpdCBiZWZvcmUgcmVmcmVzaGluZyBhIGxpdmUgcGxheWxpc3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gbWVkaWFcbiAqICAgICAgICBUaGUgY3VycmVudCBtZWRpYVxuICogQHBhcmFtIHtCb29sZWFufSB1cGRhdGVcbiAqICAgICAgICBUcnVlIGlmIHRoZXJlIHdlcmUgYW55IHVwZGF0ZXMgZnJvbSB0aGUgbGFzdCByZWZyZXNoLCBmYWxzZSBvdGhlcndpc2VcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqICAgICAgICAgVGhlIHRpbWUgaW4gbXMgdG8gd2FpdCBiZWZvcmUgcmVmcmVzaGluZyB0aGUgbGl2ZSBwbGF5bGlzdFxuICovXG5cblxudmFyIHJlZnJlc2hEZWxheSA9IGZ1bmN0aW9uIHJlZnJlc2hEZWxheShtZWRpYSwgdXBkYXRlKSB7XG4gIHZhciBsYXN0U2VnbWVudCA9IG1lZGlhLnNlZ21lbnRzW21lZGlhLnNlZ21lbnRzLmxlbmd0aCAtIDFdO1xuICB2YXIgZGVsYXkgPSB2b2lkIDA7XG5cbiAgaWYgKHVwZGF0ZSAmJiBsYXN0U2VnbWVudCAmJiBsYXN0U2VnbWVudC5kdXJhdGlvbikge1xuICAgIGRlbGF5ID0gbGFzdFNlZ21lbnQuZHVyYXRpb24gKiAxMDAwO1xuICB9IGVsc2Uge1xuICAgIC8vIGlmIHRoZSBwbGF5bGlzdCBpcyB1bmNoYW5nZWQgc2luY2UgdGhlIGxhc3QgcmVsb2FkIG9yIGxhc3Qgc2VnbWVudCBkdXJhdGlvblxuICAgIC8vIGNhbm5vdCBiZSBkZXRlcm1pbmVkLCB0cnkgYWdhaW4gYWZ0ZXIgaGFsZiB0aGUgdGFyZ2V0IGR1cmF0aW9uXG4gICAgZGVsYXkgPSAobWVkaWEudGFyZ2V0RHVyYXRpb24gfHwgMTApICogNTAwO1xuICB9XG5cbiAgcmV0dXJuIGRlbGF5O1xufTtcbi8qKlxuICogTG9hZCBhIHBsYXlsaXN0IGZyb20gYSByZW1vdGUgbG9jYXRpb25cbiAqXG4gKiBAY2xhc3MgUGxheWxpc3RMb2FkZXJcbiAqIEBleHRlbmRzIFN0cmVhbVxuICogQHBhcmFtIHtTdHJpbmd9IHNyY1VybCB0aGUgdXJsIHRvIHN0YXJ0IHdpdGhcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aENyZWRlbnRpYWxzIHRoZSB3aXRoQ3JlZGVudGlhbHMgeGhyIG9wdGlvblxuICogQGNvbnN0cnVjdG9yXG4gKi9cblxuXG52YXIgUGxheWxpc3RMb2FkZXIgPSBmdW5jdGlvbiAoX0V2ZW50VGFyZ2V0KSB7XG4gIGluaGVyaXRzKFBsYXlsaXN0TG9hZGVyLCBfRXZlbnRUYXJnZXQpO1xuXG4gIGZ1bmN0aW9uIFBsYXlsaXN0TG9hZGVyKHNyY1VybCwgaGxzKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFBsYXlsaXN0TG9hZGVyKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFBsYXlsaXN0TG9hZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUGxheWxpc3RMb2FkZXIpKS5jYWxsKHRoaXMpKTtcblxuICAgIHZhciBfb3B0aW9ucyR3aXRoQ3JlZGVudGkgPSBvcHRpb25zLndpdGhDcmVkZW50aWFscyxcbiAgICAgICAgd2l0aENyZWRlbnRpYWxzID0gX29wdGlvbnMkd2l0aENyZWRlbnRpID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9vcHRpb25zJHdpdGhDcmVkZW50aSxcbiAgICAgICAgX29wdGlvbnMkaGFuZGxlTWFuaWZlID0gb3B0aW9ucy5oYW5kbGVNYW5pZmVzdFJlZGlyZWN0cyxcbiAgICAgICAgaGFuZGxlTWFuaWZlc3RSZWRpcmVjdHMgPSBfb3B0aW9ucyRoYW5kbGVNYW5pZmUgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX29wdGlvbnMkaGFuZGxlTWFuaWZlO1xuICAgIF90aGlzLnNyY1VybCA9IHNyY1VybDtcbiAgICBfdGhpcy5obHNfID0gaGxzO1xuICAgIF90aGlzLndpdGhDcmVkZW50aWFscyA9IHdpdGhDcmVkZW50aWFscztcbiAgICBfdGhpcy5oYW5kbGVNYW5pZmVzdFJlZGlyZWN0cyA9IGhhbmRsZU1hbmlmZXN0UmVkaXJlY3RzO1xuICAgIHZhciBobHNPcHRpb25zID0gaGxzLm9wdGlvbnNfO1xuICAgIF90aGlzLmN1c3RvbVRhZ1BhcnNlcnMgPSBobHNPcHRpb25zICYmIGhsc09wdGlvbnMuY3VzdG9tVGFnUGFyc2VycyB8fCBbXTtcbiAgICBfdGhpcy5jdXN0b21UYWdNYXBwZXJzID0gaGxzT3B0aW9ucyAmJiBobHNPcHRpb25zLmN1c3RvbVRhZ01hcHBlcnMgfHwgW107XG5cbiAgICBpZiAoIV90aGlzLnNyY1VybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBIG5vbi1lbXB0eSBwbGF5bGlzdCBVUkwgaXMgcmVxdWlyZWQnKTtcbiAgICB9IC8vIGluaXRpYWxpemUgdGhlIGxvYWRlciBzdGF0ZVxuXG5cbiAgICBfdGhpcy5zdGF0ZSA9ICdIQVZFX05PVEhJTkcnOyAvLyBsaXZlIHBsYXlsaXN0IHN0YWxlbmVzcyB0aW1lb3V0XG5cbiAgICBfdGhpcy5vbignbWVkaWF1cGRhdGV0aW1lb3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF90aGlzLnN0YXRlICE9PSAnSEFWRV9NRVRBREFUQScpIHtcbiAgICAgICAgLy8gb25seSByZWZyZXNoIHRoZSBtZWRpYSBwbGF5bGlzdCBpZiBubyBvdGhlciBhY3Rpdml0eSBpcyBnb2luZyBvblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIF90aGlzLnN0YXRlID0gJ0hBVkVfQ1VSUkVOVF9NRVRBREFUQSc7XG4gICAgICBfdGhpcy5yZXF1ZXN0ID0gX3RoaXMuaGxzXy54aHIoe1xuICAgICAgICB1cmk6IHJlc29sdmVVcmwoX3RoaXMubWFzdGVyLnVyaSwgX3RoaXMubWVkaWEoKS51cmkpLFxuICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IF90aGlzLndpdGhDcmVkZW50aWFsc1xuICAgICAgfSwgZnVuY3Rpb24gKGVycm9yLCByZXEpIHtcbiAgICAgICAgLy8gZGlzcG9zZWRcbiAgICAgICAgaWYgKCFfdGhpcy5yZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnBsYXlsaXN0UmVxdWVzdEVycm9yKF90aGlzLnJlcXVlc3QsIF90aGlzLm1lZGlhKCkudXJpLCAnSEFWRV9NRVRBREFUQScpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMuaGF2ZU1ldGFkYXRhKF90aGlzLnJlcXVlc3QsIF90aGlzLm1lZGlhKCkudXJpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoUGxheWxpc3RMb2FkZXIsIFt7XG4gICAga2V5OiAncGxheWxpc3RSZXF1ZXN0RXJyb3InLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwbGF5bGlzdFJlcXVlc3RFcnJvcih4aHIkJDEsIHVybCwgc3RhcnRpbmdTdGF0ZSkge1xuICAgICAgLy8gYW55IGluLWZsaWdodCByZXF1ZXN0IGlzIG5vdyBmaW5pc2hlZFxuICAgICAgdGhpcy5yZXF1ZXN0ID0gbnVsbDtcblxuICAgICAgaWYgKHN0YXJ0aW5nU3RhdGUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXJ0aW5nU3RhdGU7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZXJyb3IgPSB7XG4gICAgICAgIHBsYXlsaXN0OiB0aGlzLm1hc3Rlci5wbGF5bGlzdHNbdXJsXSxcbiAgICAgICAgc3RhdHVzOiB4aHIkJDEuc3RhdHVzLFxuICAgICAgICBtZXNzYWdlOiAnSExTIHBsYXlsaXN0IHJlcXVlc3QgZXJyb3IgYXQgVVJMOiAnICsgdXJsLFxuICAgICAgICByZXNwb25zZVRleHQ6IHhociQkMS5yZXNwb25zZVRleHQsXG4gICAgICAgIGNvZGU6IHhociQkMS5zdGF0dXMgPj0gNTAwID8gNCA6IDJcbiAgICAgIH07XG4gICAgICB0aGlzLnRyaWdnZXIoJ2Vycm9yJyk7XG4gICAgfSAvLyB1cGRhdGUgdGhlIHBsYXlsaXN0IGxvYWRlcidzIHN0YXRlIGluIHJlc3BvbnNlIHRvIGEgbmV3IG9yXG4gICAgLy8gdXBkYXRlZCBwbGF5bGlzdC5cblxuICB9LCB7XG4gICAga2V5OiAnaGF2ZU1ldGFkYXRhJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGF2ZU1ldGFkYXRhKHhociQkMSwgdXJsKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpczsgLy8gYW55IGluLWZsaWdodCByZXF1ZXN0IGlzIG5vdyBmaW5pc2hlZFxuXG5cbiAgICAgIHRoaXMucmVxdWVzdCA9IG51bGw7XG4gICAgICB0aGlzLnN0YXRlID0gJ0hBVkVfTUVUQURBVEEnO1xuICAgICAgdmFyIHBhcnNlciA9IG5ldyBQYXJzZXIoKTsgLy8gYWRkaW5nIGN1c3RvbSB0YWcgcGFyc2Vyc1xuXG4gICAgICB0aGlzLmN1c3RvbVRhZ1BhcnNlcnMuZm9yRWFjaChmdW5jdGlvbiAoY3VzdG9tUGFyc2VyKSB7XG4gICAgICAgIHJldHVybiBwYXJzZXIuYWRkUGFyc2VyKGN1c3RvbVBhcnNlcik7XG4gICAgICB9KTsgLy8gYWRkaW5nIGN1c3RvbSB0YWcgbWFwcGVyc1xuXG4gICAgICB0aGlzLmN1c3RvbVRhZ01hcHBlcnMuZm9yRWFjaChmdW5jdGlvbiAobWFwcGVyKSB7XG4gICAgICAgIHJldHVybiBwYXJzZXIuYWRkVGFnTWFwcGVyKG1hcHBlcik7XG4gICAgICB9KTtcbiAgICAgIHBhcnNlci5wdXNoKHhociQkMS5yZXNwb25zZVRleHQpO1xuICAgICAgcGFyc2VyLmVuZCgpO1xuICAgICAgcGFyc2VyLm1hbmlmZXN0LnVyaSA9IHVybDsgLy8gbTN1OC1wYXJzZXIgZG9lcyBub3QgYXR0YWNoIGFuIGF0dHJpYnV0ZXMgcHJvcGVydHkgdG8gbWVkaWEgcGxheWxpc3RzIHNvIG1ha2VcbiAgICAgIC8vIHN1cmUgdGhhdCB0aGUgcHJvcGVydHkgaXMgYXR0YWNoZWQgdG8gYXZvaWQgdW5kZWZpbmVkIHJlZmVyZW5jZSBlcnJvcnNcblxuICAgICAgcGFyc2VyLm1hbmlmZXN0LmF0dHJpYnV0ZXMgPSBwYXJzZXIubWFuaWZlc3QuYXR0cmlidXRlcyB8fCB7fTsgLy8gbWVyZ2UgdGhpcyBwbGF5bGlzdCBpbnRvIHRoZSBtYXN0ZXJcblxuICAgICAgdmFyIHVwZGF0ZSA9IHVwZGF0ZU1hc3Rlcih0aGlzLm1hc3RlciwgcGFyc2VyLm1hbmlmZXN0KTtcbiAgICAgIHRoaXMudGFyZ2V0RHVyYXRpb24gPSBwYXJzZXIubWFuaWZlc3QudGFyZ2V0RHVyYXRpb247XG5cbiAgICAgIGlmICh1cGRhdGUpIHtcbiAgICAgICAgdGhpcy5tYXN0ZXIgPSB1cGRhdGU7XG4gICAgICAgIHRoaXMubWVkaWFfID0gdGhpcy5tYXN0ZXIucGxheWxpc3RzW3BhcnNlci5tYW5pZmVzdC51cmldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdwbGF5bGlzdHVuY2hhbmdlZCcpO1xuICAgICAgfSAvLyByZWZyZXNoIGxpdmUgcGxheWxpc3RzIGFmdGVyIGEgdGFyZ2V0IGR1cmF0aW9uIHBhc3Nlc1xuXG5cbiAgICAgIGlmICghdGhpcy5tZWRpYSgpLmVuZExpc3QpIHtcbiAgICAgICAgd2luZG93JDEuY2xlYXJUaW1lb3V0KHRoaXMubWVkaWFVcGRhdGVUaW1lb3V0KTtcbiAgICAgICAgdGhpcy5tZWRpYVVwZGF0ZVRpbWVvdXQgPSB3aW5kb3ckMS5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczIudHJpZ2dlcignbWVkaWF1cGRhdGV0aW1lb3V0Jyk7XG4gICAgICAgIH0sIHJlZnJlc2hEZWxheSh0aGlzLm1lZGlhKCksICEhdXBkYXRlKSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMudHJpZ2dlcignbG9hZGVkcGxheWxpc3QnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWJvcnQgYW55IG91dHN0YW5kaW5nIHdvcmsgYW5kIGNsZWFuIHVwLlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdkaXNwb3NlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgIHRoaXMuc3RvcFJlcXVlc3QoKTtcbiAgICAgIHdpbmRvdyQxLmNsZWFyVGltZW91dCh0aGlzLm1lZGlhVXBkYXRlVGltZW91dCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc3RvcFJlcXVlc3QnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wUmVxdWVzdCgpIHtcbiAgICAgIGlmICh0aGlzLnJlcXVlc3QpIHtcbiAgICAgICAgdmFyIG9sZFJlcXVlc3QgPSB0aGlzLnJlcXVlc3Q7XG4gICAgICAgIHRoaXMucmVxdWVzdCA9IG51bGw7XG4gICAgICAgIG9sZFJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgb2xkUmVxdWVzdC5hYm9ydCgpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGVuIGNhbGxlZCB3aXRob3V0IGFueSBhcmd1bWVudHMsIHJldHVybnMgdGhlIGN1cnJlbnRseVxuICAgICAqIGFjdGl2ZSBtZWRpYSBwbGF5bGlzdC4gV2hlbiBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudCxcbiAgICAgKiB0cmlnZ2VycyB0aGUgcGxheWxpc3QgbG9hZGVyIHRvIGFzeW5jaHJvbm91c2x5IHN3aXRjaCB0byB0aGVcbiAgICAgKiBzcGVjaWZpZWQgbWVkaWEgcGxheWxpc3QuIENhbGxpbmcgdGhpcyBtZXRob2Qgd2hpbGUgdGhlXG4gICAgICogbG9hZGVyIGlzIGluIHRoZSBIQVZFX05PVEhJTkcgY2F1c2VzIGFuIGVycm9yIHRvIGJlIGVtaXR0ZWRcbiAgICAgKiBidXQgb3RoZXJ3aXNlIGhhcyBubyBlZmZlY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IHBsYXlsaXN0IHRoZSBwYXJzZWQgbWVkaWEgcGxheWxpc3RcbiAgICAgKiBvYmplY3QgdG8gc3dpdGNoIHRvXG4gICAgICogQHJldHVybiB7UGxheWxpc3R9IHRoZSBjdXJyZW50IGxvYWRlZCBtZWRpYVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdtZWRpYScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1lZGlhKHBsYXlsaXN0KSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpczsgLy8gZ2V0dGVyXG5cblxuICAgICAgaWYgKCFwbGF5bGlzdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZWRpYV87XG4gICAgICB9IC8vIHNldHRlclxuXG5cbiAgICAgIGlmICh0aGlzLnN0YXRlID09PSAnSEFWRV9OT1RISU5HJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBzd2l0Y2ggbWVkaWEgcGxheWxpc3QgZnJvbSAnICsgdGhpcy5zdGF0ZSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBzdGFydGluZ1N0YXRlID0gdGhpcy5zdGF0ZTsgLy8gZmluZCB0aGUgcGxheWxpc3Qgb2JqZWN0IGlmIHRoZSB0YXJnZXQgcGxheWxpc3QgaGFzIGJlZW5cbiAgICAgIC8vIHNwZWNpZmllZCBieSBVUklcblxuICAgICAgaWYgKHR5cGVvZiBwbGF5bGlzdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKCF0aGlzLm1hc3Rlci5wbGF5bGlzdHNbcGxheWxpc3RdKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIHBsYXlsaXN0IFVSSTogJyArIHBsYXlsaXN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBsYXlsaXN0ID0gdGhpcy5tYXN0ZXIucGxheWxpc3RzW3BsYXlsaXN0XTtcbiAgICAgIH1cblxuICAgICAgdmFyIG1lZGlhQ2hhbmdlID0gIXRoaXMubWVkaWFfIHx8IHBsYXlsaXN0LnVyaSAhPT0gdGhpcy5tZWRpYV8udXJpOyAvLyBzd2l0Y2ggdG8gZnVsbHkgbG9hZGVkIHBsYXlsaXN0cyBpbW1lZGlhdGVseVxuXG4gICAgICBpZiAodGhpcy5tYXN0ZXIucGxheWxpc3RzW3BsYXlsaXN0LnVyaV0uZW5kTGlzdCkge1xuICAgICAgICAvLyBhYm9ydCBvdXRzdGFuZGluZyBwbGF5bGlzdCByZXF1ZXN0c1xuICAgICAgICBpZiAodGhpcy5yZXF1ZXN0KSB7XG4gICAgICAgICAgdGhpcy5yZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgdGhpcy5yZXF1ZXN0LmFib3J0KCk7XG4gICAgICAgICAgdGhpcy5yZXF1ZXN0ID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RhdGUgPSAnSEFWRV9NRVRBREFUQSc7XG4gICAgICAgIHRoaXMubWVkaWFfID0gcGxheWxpc3Q7IC8vIHRyaWdnZXIgbWVkaWEgY2hhbmdlIGlmIHRoZSBhY3RpdmUgbWVkaWEgaGFzIGJlZW4gdXBkYXRlZFxuXG4gICAgICAgIGlmIChtZWRpYUNoYW5nZSkge1xuICAgICAgICAgIHRoaXMudHJpZ2dlcignbWVkaWFjaGFuZ2luZycpO1xuICAgICAgICAgIHRoaXMudHJpZ2dlcignbWVkaWFjaGFuZ2UnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gc3dpdGNoaW5nIHRvIHRoZSBhY3RpdmUgcGxheWxpc3QgaXMgYSBuby1vcFxuXG5cbiAgICAgIGlmICghbWVkaWFDaGFuZ2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YXRlID0gJ1NXSVRDSElOR19NRURJQSc7IC8vIHRoZXJlIGlzIGFscmVhZHkgYW4gb3V0c3RhbmRpbmcgcGxheWxpc3QgcmVxdWVzdFxuXG4gICAgICBpZiAodGhpcy5yZXF1ZXN0KSB7XG4gICAgICAgIGlmIChwbGF5bGlzdC5yZXNvbHZlZFVyaSA9PT0gdGhpcy5yZXF1ZXN0LnVybCkge1xuICAgICAgICAgIC8vIHJlcXVlc3RpbmcgdG8gc3dpdGNoIHRvIHRoZSBzYW1lIHBsYXlsaXN0IG11bHRpcGxlIHRpbWVzXG4gICAgICAgICAgLy8gaGFzIG5vIGVmZmVjdCBhZnRlciB0aGUgZmlyc3RcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZXF1ZXN0LmFib3J0KCk7XG4gICAgICAgIHRoaXMucmVxdWVzdCA9IG51bGw7XG4gICAgICB9IC8vIHJlcXVlc3QgdGhlIG5ldyBwbGF5bGlzdFxuXG5cbiAgICAgIGlmICh0aGlzLm1lZGlhXykge1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ21lZGlhY2hhbmdpbmcnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZXF1ZXN0ID0gdGhpcy5obHNfLnhocih7XG4gICAgICAgIHVyaTogcGxheWxpc3QucmVzb2x2ZWRVcmksXG4gICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy53aXRoQ3JlZGVudGlhbHNcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvciwgcmVxKSB7XG4gICAgICAgIC8vIGRpc3Bvc2VkXG4gICAgICAgIGlmICghX3RoaXMzLnJlcXVlc3QpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBwbGF5bGlzdC5yZXNvbHZlZFVyaSA9IHJlc29sdmVNYW5pZmVzdFJlZGlyZWN0KF90aGlzMy5oYW5kbGVNYW5pZmVzdFJlZGlyZWN0cywgcGxheWxpc3QucmVzb2x2ZWRVcmksIHJlcSk7XG5cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMy5wbGF5bGlzdFJlcXVlc3RFcnJvcihfdGhpczMucmVxdWVzdCwgcGxheWxpc3QudXJpLCBzdGFydGluZ1N0YXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzMy5oYXZlTWV0YWRhdGEocmVxLCBwbGF5bGlzdC51cmkpOyAvLyBmaXJlIGxvYWRlZG1ldGFkYXRhIHRoZSBmaXJzdCB0aW1lIGEgbWVkaWEgcGxheWxpc3QgaXMgbG9hZGVkXG5cblxuICAgICAgICBpZiAoc3RhcnRpbmdTdGF0ZSA9PT0gJ0hBVkVfTUFTVEVSJykge1xuICAgICAgICAgIF90aGlzMy50cmlnZ2VyKCdsb2FkZWRtZXRhZGF0YScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzMy50cmlnZ2VyKCdtZWRpYWNoYW5nZScpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogcGF1c2UgbG9hZGluZyBvZiB0aGUgcGxheWxpc3RcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAncGF1c2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICAgIHRoaXMuc3RvcFJlcXVlc3QoKTtcbiAgICAgIHdpbmRvdyQxLmNsZWFyVGltZW91dCh0aGlzLm1lZGlhVXBkYXRlVGltZW91dCk7XG5cbiAgICAgIGlmICh0aGlzLnN0YXRlID09PSAnSEFWRV9OT1RISU5HJykge1xuICAgICAgICAvLyBJZiB3ZSBwYXVzZSB0aGUgbG9hZGVyIGJlZm9yZSBhbnkgZGF0YSBoYXMgYmVlbiByZXRyaWV2ZWQsIGl0cyBhcyBpZiB3ZSBuZXZlclxuICAgICAgICAvLyBzdGFydGVkLCBzbyByZXNldCB0byBhbiB1bnN0YXJ0ZWQgc3RhdGUuXG4gICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgfSAvLyBOZWVkIHRvIHJlc3RvcmUgc3RhdGUgbm93IHRoYXQgbm8gYWN0aXZpdHkgaXMgaGFwcGVuaW5nXG5cblxuICAgICAgaWYgKHRoaXMuc3RhdGUgPT09ICdTV0lUQ0hJTkdfTUVESUEnKSB7XG4gICAgICAgIC8vIGlmIHRoZSBsb2FkZXIgd2FzIGluIHRoZSBwcm9jZXNzIG9mIHN3aXRjaGluZyBtZWRpYSwgaXQgc2hvdWxkIGVpdGhlciByZXR1cm4gdG9cbiAgICAgICAgLy8gSEFWRV9NQVNURVIgb3IgSEFWRV9NRVRBREFUQSBkZXBlbmRpbmcgb24gaWYgdGhlIGxvYWRlciBoYXMgbG9hZGVkIGEgbWVkaWFcbiAgICAgICAgLy8gcGxheWxpc3QgeWV0LiBUaGlzIGlzIGRldGVybWluZWQgYnkgdGhlIGV4aXN0ZW5jZSBvZiBsb2FkZXIubWVkaWFfXG4gICAgICAgIGlmICh0aGlzLm1lZGlhXykge1xuICAgICAgICAgIHRoaXMuc3RhdGUgPSAnSEFWRV9NRVRBREFUQSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZSA9ICdIQVZFX01BU1RFUic7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PT0gJ0hBVkVfQ1VSUkVOVF9NRVRBREFUQScpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9ICdIQVZFX01FVEFEQVRBJztcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogc3RhcnQgbG9hZGluZyBvZiB0aGUgcGxheWxpc3RcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnbG9hZCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWQoaXNGaW5hbFJlbmRpdGlvbikge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIHdpbmRvdyQxLmNsZWFyVGltZW91dCh0aGlzLm1lZGlhVXBkYXRlVGltZW91dCk7XG4gICAgICB2YXIgbWVkaWEgPSB0aGlzLm1lZGlhKCk7XG5cbiAgICAgIGlmIChpc0ZpbmFsUmVuZGl0aW9uKSB7XG4gICAgICAgIHZhciBkZWxheSA9IG1lZGlhID8gbWVkaWEudGFyZ2V0RHVyYXRpb24gLyAyICogMTAwMCA6IDUgKiAxMDAwO1xuICAgICAgICB0aGlzLm1lZGlhVXBkYXRlVGltZW91dCA9IHdpbmRvdyQxLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczQubG9hZCgpO1xuICAgICAgICB9LCBkZWxheSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChtZWRpYSAmJiAhbWVkaWEuZW5kTGlzdCkge1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ21lZGlhdXBkYXRldGltZW91dCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdsb2FkZWRwbGF5bGlzdCcpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBzdGFydCBsb2FkaW5nIG9mIHRoZSBwbGF5bGlzdFxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdzdGFydCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7IC8vIHJlcXVlc3QgdGhlIHNwZWNpZmllZCBVUkxcblxuICAgICAgdGhpcy5yZXF1ZXN0ID0gdGhpcy5obHNfLnhocih7XG4gICAgICAgIHVyaTogdGhpcy5zcmNVcmwsXG4gICAgICAgIHdpdGhDcmVkZW50aWFsczogdGhpcy53aXRoQ3JlZGVudGlhbHNcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvciwgcmVxKSB7XG4gICAgICAgIC8vIGRpc3Bvc2VkXG4gICAgICAgIGlmICghX3RoaXM1LnJlcXVlc3QpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gY2xlYXIgdGhlIGxvYWRlcidzIHJlcXVlc3QgcmVmZXJlbmNlXG5cblxuICAgICAgICBfdGhpczUucmVxdWVzdCA9IG51bGw7XG5cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgX3RoaXM1LmVycm9yID0ge1xuICAgICAgICAgICAgc3RhdHVzOiByZXEuc3RhdHVzLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0hMUyBwbGF5bGlzdCByZXF1ZXN0IGVycm9yIGF0IFVSTDogJyArIF90aGlzNS5zcmNVcmwsXG4gICAgICAgICAgICByZXNwb25zZVRleHQ6IHJlcS5yZXNwb25zZVRleHQsXG4gICAgICAgICAgICAvLyBNRURJQV9FUlJfTkVUV09SS1xuICAgICAgICAgICAgY29kZTogMlxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBpZiAoX3RoaXM1LnN0YXRlID09PSAnSEFWRV9OT1RISU5HJykge1xuICAgICAgICAgICAgX3RoaXM1LnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gX3RoaXM1LnRyaWdnZXIoJ2Vycm9yJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcGFyc2VyID0gbmV3IFBhcnNlcigpOyAvLyBhZGRpbmcgY3VzdG9tIHRhZyBwYXJzZXJzXG5cbiAgICAgICAgX3RoaXM1LmN1c3RvbVRhZ1BhcnNlcnMuZm9yRWFjaChmdW5jdGlvbiAoY3VzdG9tUGFyc2VyKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlci5hZGRQYXJzZXIoY3VzdG9tUGFyc2VyKTtcbiAgICAgICAgfSk7IC8vIGFkZGluZyBjdXN0b20gdGFnIG1hcHBlcnNcblxuXG4gICAgICAgIF90aGlzNS5jdXN0b21UYWdNYXBwZXJzLmZvckVhY2goZnVuY3Rpb24gKG1hcHBlcikge1xuICAgICAgICAgIHJldHVybiBwYXJzZXIuYWRkVGFnTWFwcGVyKG1hcHBlcik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHBhcnNlci5wdXNoKHJlcS5yZXNwb25zZVRleHQpO1xuICAgICAgICBwYXJzZXIuZW5kKCk7XG4gICAgICAgIF90aGlzNS5zdGF0ZSA9ICdIQVZFX01BU1RFUic7XG4gICAgICAgIF90aGlzNS5zcmNVcmwgPSByZXNvbHZlTWFuaWZlc3RSZWRpcmVjdChfdGhpczUuaGFuZGxlTWFuaWZlc3RSZWRpcmVjdHMsIF90aGlzNS5zcmNVcmwsIHJlcSk7XG4gICAgICAgIHBhcnNlci5tYW5pZmVzdC51cmkgPSBfdGhpczUuc3JjVXJsOyAvLyBsb2FkZWQgYSBtYXN0ZXIgcGxheWxpc3RcblxuICAgICAgICBpZiAocGFyc2VyLm1hbmlmZXN0LnBsYXlsaXN0cykge1xuICAgICAgICAgIF90aGlzNS5tYXN0ZXIgPSBwYXJzZXIubWFuaWZlc3Q7XG4gICAgICAgICAgc2V0dXBNZWRpYVBsYXlsaXN0cyhfdGhpczUubWFzdGVyKTtcbiAgICAgICAgICByZXNvbHZlTWVkaWFHcm91cFVyaXMoX3RoaXM1Lm1hc3Rlcik7XG5cbiAgICAgICAgICBfdGhpczUudHJpZ2dlcignbG9hZGVkcGxheWxpc3QnKTtcblxuICAgICAgICAgIGlmICghX3RoaXM1LnJlcXVlc3QpIHtcbiAgICAgICAgICAgIC8vIG5vIG1lZGlhIHBsYXlsaXN0IHdhcyBzcGVjaWZpY2FsbHkgc2VsZWN0ZWQgc28gc3RhcnRcbiAgICAgICAgICAgIC8vIGZyb20gdGhlIGZpcnN0IGxpc3RlZCBvbmVcbiAgICAgICAgICAgIF90aGlzNS5tZWRpYShwYXJzZXIubWFuaWZlc3QucGxheWxpc3RzWzBdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gbG9hZGVkIGEgbWVkaWEgcGxheWxpc3RcbiAgICAgICAgLy8gaW5mZXIgYSBtYXN0ZXIgcGxheWxpc3QgaWYgbm9uZSB3YXMgcHJldmlvdXNseSByZXF1ZXN0ZWRcblxuXG4gICAgICAgIF90aGlzNS5tYXN0ZXIgPSB7XG4gICAgICAgICAgbWVkaWFHcm91cHM6IHtcbiAgICAgICAgICAgICdBVURJTyc6IHt9LFxuICAgICAgICAgICAgJ1ZJREVPJzoge30sXG4gICAgICAgICAgICAnQ0xPU0VELUNBUFRJT05TJzoge30sXG4gICAgICAgICAgICAnU1VCVElUTEVTJzoge31cbiAgICAgICAgICB9LFxuICAgICAgICAgIHVyaTogd2luZG93JDEubG9jYXRpb24uaHJlZixcbiAgICAgICAgICBwbGF5bGlzdHM6IFt7XG4gICAgICAgICAgICB1cmk6IF90aGlzNS5zcmNVcmwsXG4gICAgICAgICAgICBpZDogMCxcbiAgICAgICAgICAgIHJlc29sdmVkVXJpOiBfdGhpczUuc3JjVXJsLFxuICAgICAgICAgICAgLy8gbTN1OC1wYXJzZXIgZG9lcyBub3QgYXR0YWNoIGFuIGF0dHJpYnV0ZXMgcHJvcGVydHkgdG8gbWVkaWEgcGxheWxpc3RzIHNvIG1ha2VcbiAgICAgICAgICAgIC8vIHN1cmUgdGhhdCB0aGUgcHJvcGVydHkgaXMgYXR0YWNoZWQgdG8gYXZvaWQgdW5kZWZpbmVkIHJlZmVyZW5jZSBlcnJvcnNcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHt9XG4gICAgICAgICAgfV1cbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXM1Lm1hc3Rlci5wbGF5bGlzdHNbX3RoaXM1LnNyY1VybF0gPSBfdGhpczUubWFzdGVyLnBsYXlsaXN0c1swXTtcblxuICAgICAgICBfdGhpczUuaGF2ZU1ldGFkYXRhKHJlcSwgX3RoaXM1LnNyY1VybCk7XG5cbiAgICAgICAgcmV0dXJuIF90aGlzNS50cmlnZ2VyKCdsb2FkZWRtZXRhZGF0YScpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBQbGF5bGlzdExvYWRlcjtcbn0oRXZlbnRUYXJnZXQkMSk7XG4vKipcbiAqIEBmaWxlIHBsYXlsaXN0LmpzXG4gKlxuICogUGxheWxpc3QgcmVsYXRlZCB1dGlsaXRpZXMuXG4gKi9cblxuXG52YXIgY3JlYXRlVGltZVJhbmdlID0gdmlkZW9qcyQxLmNyZWF0ZVRpbWVSYW5nZTtcbi8qKlxuICogd2FsayBiYWNrd2FyZCB1bnRpbCB3ZSBmaW5kIGEgZHVyYXRpb24gd2UgY2FuIHVzZVxuICogb3IgcmV0dXJuIGEgZmFpbHVyZVxuICpcbiAqIEBwYXJhbSB7UGxheWxpc3R9IHBsYXlsaXN0IHRoZSBwbGF5bGlzdCB0byB3YWxrIHRocm91Z2hcbiAqIEBwYXJhbSB7TnVtYmVyfSBlbmRTZXF1ZW5jZSB0aGUgbWVkaWFTZXF1ZW5jZSB0byBzdG9wIHdhbGtpbmcgb25cbiAqL1xuXG52YXIgYmFja3dhcmREdXJhdGlvbiA9IGZ1bmN0aW9uIGJhY2t3YXJkRHVyYXRpb24ocGxheWxpc3QsIGVuZFNlcXVlbmNlKSB7XG4gIHZhciByZXN1bHQgPSAwO1xuICB2YXIgaSA9IGVuZFNlcXVlbmNlIC0gcGxheWxpc3QubWVkaWFTZXF1ZW5jZTsgLy8gaWYgYSBzdGFydCB0aW1lIGlzIGF2YWlsYWJsZSBmb3Igc2VnbWVudCBpbW1lZGlhdGVseSBmb2xsb3dpbmdcbiAgLy8gdGhlIGludGVydmFsLCB1c2UgaXRcblxuICB2YXIgc2VnbWVudCA9IHBsYXlsaXN0LnNlZ21lbnRzW2ldOyAvLyBXYWxrIGJhY2t3YXJkIHVudGlsIHdlIGZpbmQgdGhlIGxhdGVzdCBzZWdtZW50IHdpdGggdGltZWxpbmVcbiAgLy8gaW5mb3JtYXRpb24gdGhhdCBpcyBlYXJsaWVyIHRoYW4gZW5kU2VxdWVuY2VcblxuICBpZiAoc2VnbWVudCkge1xuICAgIGlmICh0eXBlb2Ygc2VnbWVudC5zdGFydCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3VsdDogc2VnbWVudC5zdGFydCxcbiAgICAgICAgcHJlY2lzZTogdHJ1ZVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHNlZ21lbnQuZW5kICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdWx0OiBzZWdtZW50LmVuZCAtIHNlZ21lbnQuZHVyYXRpb24sXG4gICAgICAgIHByZWNpc2U6IHRydWVcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgd2hpbGUgKGktLSkge1xuICAgIHNlZ21lbnQgPSBwbGF5bGlzdC5zZWdtZW50c1tpXTtcblxuICAgIGlmICh0eXBlb2Ygc2VnbWVudC5lbmQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXN1bHQ6IHJlc3VsdCArIHNlZ21lbnQuZW5kLFxuICAgICAgICBwcmVjaXNlOiB0cnVlXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJlc3VsdCArPSBzZWdtZW50LmR1cmF0aW9uO1xuXG4gICAgaWYgKHR5cGVvZiBzZWdtZW50LnN0YXJ0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdWx0OiByZXN1bHQgKyBzZWdtZW50LnN0YXJ0LFxuICAgICAgICBwcmVjaXNlOiB0cnVlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmVzdWx0OiByZXN1bHQsXG4gICAgcHJlY2lzZTogZmFsc2VcbiAgfTtcbn07XG4vKipcbiAqIHdhbGsgZm9yd2FyZCB1bnRpbCB3ZSBmaW5kIGEgZHVyYXRpb24gd2UgY2FuIHVzZVxuICogb3IgcmV0dXJuIGEgZmFpbHVyZVxuICpcbiAqIEBwYXJhbSB7UGxheWxpc3R9IHBsYXlsaXN0IHRoZSBwbGF5bGlzdCB0byB3YWxrIHRocm91Z2hcbiAqIEBwYXJhbSB7TnVtYmVyfSBlbmRTZXF1ZW5jZSB0aGUgbWVkaWFTZXF1ZW5jZSB0byBzdG9wIHdhbGtpbmcgb25cbiAqL1xuXG5cbnZhciBmb3J3YXJkRHVyYXRpb24gPSBmdW5jdGlvbiBmb3J3YXJkRHVyYXRpb24ocGxheWxpc3QsIGVuZFNlcXVlbmNlKSB7XG4gIHZhciByZXN1bHQgPSAwO1xuICB2YXIgc2VnbWVudCA9IHZvaWQgMDtcbiAgdmFyIGkgPSBlbmRTZXF1ZW5jZSAtIHBsYXlsaXN0Lm1lZGlhU2VxdWVuY2U7IC8vIFdhbGsgZm9yd2FyZCB1bnRpbCB3ZSBmaW5kIHRoZSBlYXJsaWVzdCBzZWdtZW50IHdpdGggdGltZWxpbmVcbiAgLy8gaW5mb3JtYXRpb25cblxuICBmb3IgKDsgaSA8IHBsYXlsaXN0LnNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgc2VnbWVudCA9IHBsYXlsaXN0LnNlZ21lbnRzW2ldO1xuXG4gICAgaWYgKHR5cGVvZiBzZWdtZW50LnN0YXJ0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdWx0OiBzZWdtZW50LnN0YXJ0IC0gcmVzdWx0LFxuICAgICAgICBwcmVjaXNlOiB0cnVlXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJlc3VsdCArPSBzZWdtZW50LmR1cmF0aW9uO1xuXG4gICAgaWYgKHR5cGVvZiBzZWdtZW50LmVuZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3VsdDogc2VnbWVudC5lbmQgLSByZXN1bHQsXG4gICAgICAgIHByZWNpc2U6IHRydWVcbiAgICAgIH07XG4gICAgfVxuICB9IC8vIGluZGljYXRlIHdlIGRpZG4ndCBmaW5kIGEgdXNlZnVsIGR1cmF0aW9uIGVzdGltYXRlXG5cblxuICByZXR1cm4ge1xuICAgIHJlc3VsdDogLTEsXG4gICAgcHJlY2lzZTogZmFsc2VcbiAgfTtcbn07XG4vKipcbiAgKiBDYWxjdWxhdGUgdGhlIG1lZGlhIGR1cmF0aW9uIGZyb20gdGhlIHNlZ21lbnRzIGFzc29jaWF0ZWQgd2l0aCBhXG4gICogcGxheWxpc3QuIFRoZSBkdXJhdGlvbiBvZiBhIHN1YmludGVydmFsIG9mIHRoZSBhdmFpbGFibGUgc2VnbWVudHNcbiAgKiBtYXkgYmUgY2FsY3VsYXRlZCBieSBzcGVjaWZ5aW5nIGFuIGVuZCBpbmRleC5cbiAgKlxuICAqIEBwYXJhbSB7T2JqZWN0fSBwbGF5bGlzdCBhIG1lZGlhIHBsYXlsaXN0IG9iamVjdFxuICAqIEBwYXJhbSB7TnVtYmVyPX0gZW5kU2VxdWVuY2UgYW4gZXhjbHVzaXZlIHVwcGVyIGJvdW5kYXJ5XG4gICogZm9yIHRoZSBwbGF5bGlzdC4gIERlZmF1bHRzIHRvIHBsYXlsaXN0IGxlbmd0aC5cbiAgKiBAcGFyYW0ge051bWJlcn0gZXhwaXJlZCB0aGUgYW1vdW50IG9mIHRpbWUgdGhhdCBoYXMgZHJvcHBlZFxuICAqIG9mZiB0aGUgZnJvbnQgb2YgdGhlIHBsYXlsaXN0IGluIGEgbGl2ZSBzY2VuYXJpb1xuICAqIEByZXR1cm4ge051bWJlcn0gdGhlIGR1cmF0aW9uIGJldHdlZW4gdGhlIGZpcnN0IGF2YWlsYWJsZSBzZWdtZW50XG4gICogYW5kIGVuZCBpbmRleC5cbiAgKi9cblxuXG52YXIgaW50ZXJ2YWxEdXJhdGlvbiA9IGZ1bmN0aW9uIGludGVydmFsRHVyYXRpb24ocGxheWxpc3QsIGVuZFNlcXVlbmNlLCBleHBpcmVkKSB7XG4gIHZhciBiYWNrd2FyZCA9IHZvaWQgMDtcbiAgdmFyIGZvcndhcmQgPSB2b2lkIDA7XG5cbiAgaWYgKHR5cGVvZiBlbmRTZXF1ZW5jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBlbmRTZXF1ZW5jZSA9IHBsYXlsaXN0Lm1lZGlhU2VxdWVuY2UgKyBwbGF5bGlzdC5zZWdtZW50cy5sZW5ndGg7XG4gIH1cblxuICBpZiAoZW5kU2VxdWVuY2UgPCBwbGF5bGlzdC5tZWRpYVNlcXVlbmNlKSB7XG4gICAgcmV0dXJuIDA7XG4gIH0gLy8gZG8gYSBiYWNrd2FyZCB3YWxrIHRvIGVzdGltYXRlIHRoZSBkdXJhdGlvblxuXG5cbiAgYmFja3dhcmQgPSBiYWNrd2FyZER1cmF0aW9uKHBsYXlsaXN0LCBlbmRTZXF1ZW5jZSk7XG5cbiAgaWYgKGJhY2t3YXJkLnByZWNpc2UpIHtcbiAgICAvLyBpZiB3ZSB3ZXJlIGFibGUgdG8gYmFzZSBvdXIgZHVyYXRpb24gZXN0aW1hdGUgb24gdGltaW5nXG4gICAgLy8gaW5mb3JtYXRpb24gcHJvdmlkZWQgZGlyZWN0bHkgZnJvbSB0aGUgTWVkaWEgU291cmNlLCByZXR1cm5cbiAgICAvLyBpdFxuICAgIHJldHVybiBiYWNrd2FyZC5yZXN1bHQ7XG4gIH0gLy8gd2FsayBmb3J3YXJkIHRvIHNlZSBpZiBhIHByZWNpc2UgZHVyYXRpb24gZXN0aW1hdGUgY2FuIGJlIG1hZGVcbiAgLy8gdGhhdCB3YXlcblxuXG4gIGZvcndhcmQgPSBmb3J3YXJkRHVyYXRpb24ocGxheWxpc3QsIGVuZFNlcXVlbmNlKTtcblxuICBpZiAoZm9yd2FyZC5wcmVjaXNlKSB7XG4gICAgLy8gd2UgZm91bmQgYSBzZWdtZW50IHRoYXQgaGFzIGJlZW4gYnVmZmVyZWQgYW5kIHNvIGl0J3NcbiAgICAvLyBwb3NpdGlvbiBpcyBrbm93biBwcmVjaXNlbHlcbiAgICByZXR1cm4gZm9yd2FyZC5yZXN1bHQ7XG4gIH0gLy8gcmV0dXJuIHRoZSBsZXNzLXByZWNpc2UsIHBsYXlsaXN0LWJhc2VkIGR1cmF0aW9uIGVzdGltYXRlXG5cblxuICByZXR1cm4gYmFja3dhcmQucmVzdWx0ICsgZXhwaXJlZDtcbn07XG4vKipcbiAgKiBDYWxjdWxhdGVzIHRoZSBkdXJhdGlvbiBvZiBhIHBsYXlsaXN0LiBJZiBhIHN0YXJ0IGFuZCBlbmQgaW5kZXhcbiAgKiBhcmUgc3BlY2lmaWVkLCB0aGUgZHVyYXRpb24gd2lsbCBiZSBmb3IgdGhlIHN1YnNldCBvZiB0aGUgbWVkaWFcbiAgKiB0aW1lbGluZSBiZXR3ZWVuIHRob3NlIHR3byBpbmRpY2VzLiBUaGUgdG90YWwgZHVyYXRpb24gZm9yIGxpdmVcbiAgKiBwbGF5bGlzdHMgaXMgYWx3YXlzIEluZmluaXR5LlxuICAqXG4gICogQHBhcmFtIHtPYmplY3R9IHBsYXlsaXN0IGEgbWVkaWEgcGxheWxpc3Qgb2JqZWN0XG4gICogQHBhcmFtIHtOdW1iZXI9fSBlbmRTZXF1ZW5jZSBhbiBleGNsdXNpdmUgdXBwZXJcbiAgKiBib3VuZGFyeSBmb3IgdGhlIHBsYXlsaXN0LiBEZWZhdWx0cyB0byB0aGUgcGxheWxpc3QgbWVkaWFcbiAgKiBzZXF1ZW5jZSBudW1iZXIgcGx1cyBpdHMgbGVuZ3RoLlxuICAqIEBwYXJhbSB7TnVtYmVyPX0gZXhwaXJlZCB0aGUgYW1vdW50IG9mIHRpbWUgdGhhdCBoYXNcbiAgKiBkcm9wcGVkIG9mZiB0aGUgZnJvbnQgb2YgdGhlIHBsYXlsaXN0IGluIGEgbGl2ZSBzY2VuYXJpb1xuICAqIEByZXR1cm4ge051bWJlcn0gdGhlIGR1cmF0aW9uIGJldHdlZW4gdGhlIHN0YXJ0IGluZGV4IGFuZCBlbmRcbiAgKiBpbmRleC5cbiAgKi9cblxuXG52YXIgZHVyYXRpb24gPSBmdW5jdGlvbiBkdXJhdGlvbihwbGF5bGlzdCwgZW5kU2VxdWVuY2UsIGV4cGlyZWQpIHtcbiAgaWYgKCFwbGF5bGlzdCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBleHBpcmVkICE9PSAnbnVtYmVyJykge1xuICAgIGV4cGlyZWQgPSAwO1xuICB9IC8vIGlmIGEgc2xpY2Ugb2YgdGhlIHRvdGFsIGR1cmF0aW9uIGlzIG5vdCByZXF1ZXN0ZWQsIHVzZVxuICAvLyBwbGF5bGlzdC1sZXZlbCBkdXJhdGlvbiBpbmRpY2F0b3JzIHdoZW4gdGhleSdyZSBwcmVzZW50XG5cblxuICBpZiAodHlwZW9mIGVuZFNlcXVlbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIC8vIGlmIHByZXNlbnQsIHVzZSB0aGUgZHVyYXRpb24gc3BlY2lmaWVkIGluIHRoZSBwbGF5bGlzdFxuICAgIGlmIChwbGF5bGlzdC50b3RhbER1cmF0aW9uKSB7XG4gICAgICByZXR1cm4gcGxheWxpc3QudG90YWxEdXJhdGlvbjtcbiAgICB9IC8vIGR1cmF0aW9uIHNob3VsZCBiZSBJbmZpbml0eSBmb3IgbGl2ZSBwbGF5bGlzdHNcblxuXG4gICAgaWYgKCFwbGF5bGlzdC5lbmRMaXN0KSB7XG4gICAgICByZXR1cm4gd2luZG93JDEuSW5maW5pdHk7XG4gICAgfVxuICB9IC8vIGNhbGN1bGF0ZSB0aGUgdG90YWwgZHVyYXRpb24gYmFzZWQgb24gdGhlIHNlZ21lbnQgZHVyYXRpb25zXG5cblxuICByZXR1cm4gaW50ZXJ2YWxEdXJhdGlvbihwbGF5bGlzdCwgZW5kU2VxdWVuY2UsIGV4cGlyZWQpO1xufTtcbi8qKlxuICAqIENhbGN1bGF0ZSB0aGUgdGltZSBiZXR3ZWVuIHR3byBpbmRleGVzIGluIHRoZSBjdXJyZW50IHBsYXlsaXN0XG4gICogbmVpZ2h0IHRoZSBzdGFydC0gbm9yIHRoZSBlbmQtaW5kZXggbmVlZCB0byBiZSB3aXRoaW4gdGhlIGN1cnJlbnRcbiAgKiBwbGF5bGlzdCBpbiB3aGljaCBjYXNlLCB0aGUgdGFyZ2V0RHVyYXRpb24gb2YgdGhlIHBsYXlsaXN0IGlzIHVzZWRcbiAgKiB0byBhcHByb3hpbWF0ZSB0aGUgZHVyYXRpb25zIG9mIHRoZSBzZWdtZW50c1xuICAqXG4gICogQHBhcmFtIHtPYmplY3R9IHBsYXlsaXN0IGEgbWVkaWEgcGxheWxpc3Qgb2JqZWN0XG4gICogQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0SW5kZXhcbiAgKiBAcGFyYW0ge051bWJlcn0gZW5kSW5kZXhcbiAgKiBAcmV0dXJuIHtOdW1iZXJ9IHRoZSBudW1iZXIgb2Ygc2Vjb25kcyBiZXR3ZWVuIHN0YXJ0SW5kZXggYW5kIGVuZEluZGV4XG4gICovXG5cblxudmFyIHN1bUR1cmF0aW9ucyA9IGZ1bmN0aW9uIHN1bUR1cmF0aW9ucyhwbGF5bGlzdCwgc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcbiAgdmFyIGR1cmF0aW9ucyA9IDA7XG5cbiAgaWYgKHN0YXJ0SW5kZXggPiBlbmRJbmRleCkge1xuICAgIHZhciBfcmVmID0gW2VuZEluZGV4LCBzdGFydEluZGV4XTtcbiAgICBzdGFydEluZGV4ID0gX3JlZlswXTtcbiAgICBlbmRJbmRleCA9IF9yZWZbMV07XG4gIH1cblxuICBpZiAoc3RhcnRJbmRleCA8IDApIHtcbiAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleDsgaSA8IE1hdGgubWluKDAsIGVuZEluZGV4KTsgaSsrKSB7XG4gICAgICBkdXJhdGlvbnMgKz0gcGxheWxpc3QudGFyZ2V0RHVyYXRpb247XG4gICAgfVxuXG4gICAgc3RhcnRJbmRleCA9IDA7XG4gIH1cblxuICBmb3IgKHZhciBfaSA9IHN0YXJ0SW5kZXg7IF9pIDwgZW5kSW5kZXg7IF9pKyspIHtcbiAgICBkdXJhdGlvbnMgKz0gcGxheWxpc3Quc2VnbWVudHNbX2ldLmR1cmF0aW9uO1xuICB9XG5cbiAgcmV0dXJuIGR1cmF0aW9ucztcbn07XG4vKipcbiAqIERldGVybWluZXMgdGhlIG1lZGlhIGluZGV4IG9mIHRoZSBzZWdtZW50IGNvcnJlc3BvbmRpbmcgdG8gdGhlIHNhZmUgZWRnZSBvZiB0aGUgbGl2ZVxuICogd2luZG93IHdoaWNoIGlzIHRoZSBkdXJhdGlvbiBvZiB0aGUgbGFzdCBzZWdtZW50IHBsdXMgMiB0YXJnZXQgZHVyYXRpb25zIGZyb20gdGhlIGVuZFxuICogb2YgdGhlIHBsYXlsaXN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwbGF5bGlzdFxuICogICAgICAgIGEgbWVkaWEgcGxheWxpc3Qgb2JqZWN0XG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiAgICAgICAgIFRoZSBtZWRpYSBpbmRleCBvZiB0aGUgc2VnbWVudCBhdCB0aGUgc2FmZSBsaXZlIHBvaW50LiAwIGlmIHRoZXJlIGlzIG5vIFwic2FmZVwiXG4gKiAgICAgICAgIHBvaW50LlxuICogQGZ1bmN0aW9uIHNhZmVMaXZlSW5kZXhcbiAqL1xuXG5cbnZhciBzYWZlTGl2ZUluZGV4ID0gZnVuY3Rpb24gc2FmZUxpdmVJbmRleChwbGF5bGlzdCkge1xuICBpZiAoIXBsYXlsaXN0LnNlZ21lbnRzLmxlbmd0aCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgdmFyIGkgPSBwbGF5bGlzdC5zZWdtZW50cy5sZW5ndGggLSAxO1xuICB2YXIgZGlzdGFuY2VGcm9tRW5kID0gcGxheWxpc3Quc2VnbWVudHNbaV0uZHVyYXRpb24gfHwgcGxheWxpc3QudGFyZ2V0RHVyYXRpb247XG4gIHZhciBzYWZlRGlzdGFuY2UgPSBkaXN0YW5jZUZyb21FbmQgKyBwbGF5bGlzdC50YXJnZXREdXJhdGlvbiAqIDI7XG5cbiAgd2hpbGUgKGktLSkge1xuICAgIGRpc3RhbmNlRnJvbUVuZCArPSBwbGF5bGlzdC5zZWdtZW50c1tpXS5kdXJhdGlvbjtcblxuICAgIGlmIChkaXN0YW5jZUZyb21FbmQgPj0gc2FmZURpc3RhbmNlKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gTWF0aC5tYXgoMCwgaSk7XG59O1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBwbGF5bGlzdCBlbmQgdGltZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwbGF5bGlzdCBhIG1lZGlhIHBsYXlsaXN0IG9iamVjdFxuICogQHBhcmFtIHtOdW1iZXI9fSBleHBpcmVkIHRoZSBhbW91bnQgb2YgdGltZSB0aGF0IGhhc1xuICogICAgICAgICAgICAgICAgICBkcm9wcGVkIG9mZiB0aGUgZnJvbnQgb2YgdGhlIHBsYXlsaXN0IGluIGEgbGl2ZSBzY2VuYXJpb1xuICogQHBhcmFtIHtCb29sZWFufGZhbHNlfSB1c2VTYWZlTGl2ZUVuZCBhIGJvb2xlYW4gdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgcGxheWxpc3QgZW5kIGNhbGN1bGF0aW9uIHNob3VsZCBjb25zaWRlciB0aGUgc2FmZSBsaXZlIGVuZFxuICogICAgICAgICAgICAgICAgICAgICAgICAodHJ1bmNhdGUgdGhlIHBsYXlsaXN0IGVuZCBieSB0aHJlZSBzZWdtZW50cykuIFRoaXMgaXMgbm9ybWFsbHlcbiAqICAgICAgICAgICAgICAgICAgICAgICAgdXNlZCBmb3IgY2FsY3VsYXRpbmcgdGhlIGVuZCBvZiB0aGUgcGxheWxpc3QncyBzZWVrYWJsZSByYW5nZS5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHRoZSBlbmQgdGltZSBvZiBwbGF5bGlzdFxuICogQGZ1bmN0aW9uIHBsYXlsaXN0RW5kXG4gKi9cblxuXG52YXIgcGxheWxpc3RFbmQgPSBmdW5jdGlvbiBwbGF5bGlzdEVuZChwbGF5bGlzdCwgZXhwaXJlZCwgdXNlU2FmZUxpdmVFbmQpIHtcbiAgaWYgKCFwbGF5bGlzdCB8fCAhcGxheWxpc3Quc2VnbWVudHMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmIChwbGF5bGlzdC5lbmRMaXN0KSB7XG4gICAgcmV0dXJuIGR1cmF0aW9uKHBsYXlsaXN0KTtcbiAgfVxuXG4gIGlmIChleHBpcmVkID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBleHBpcmVkID0gZXhwaXJlZCB8fCAwO1xuICB2YXIgZW5kU2VxdWVuY2UgPSB1c2VTYWZlTGl2ZUVuZCA/IHNhZmVMaXZlSW5kZXgocGxheWxpc3QpIDogcGxheWxpc3Quc2VnbWVudHMubGVuZ3RoO1xuICByZXR1cm4gaW50ZXJ2YWxEdXJhdGlvbihwbGF5bGlzdCwgcGxheWxpc3QubWVkaWFTZXF1ZW5jZSArIGVuZFNlcXVlbmNlLCBleHBpcmVkKTtcbn07XG4vKipcbiAgKiBDYWxjdWxhdGVzIHRoZSBpbnRlcnZhbCBvZiB0aW1lIHRoYXQgaXMgY3VycmVudGx5IHNlZWthYmxlIGluIGFcbiAgKiBwbGF5bGlzdC4gVGhlIHJldHVybmVkIHRpbWUgcmFuZ2VzIGFyZSByZWxhdGl2ZSB0byB0aGUgZWFybGllc3RcbiAgKiBtb21lbnQgaW4gdGhlIHNwZWNpZmllZCBwbGF5bGlzdCB0aGF0IGlzIHN0aWxsIGF2YWlsYWJsZS4gQSBmdWxsXG4gICogc2Vla2FibGUgaW1wbGVtZW50YXRpb24gZm9yIGxpdmUgc3RyZWFtcyB3b3VsZCBuZWVkIHRvIG9mZnNldFxuICAqIHRoZXNlIHZhbHVlcyBieSB0aGUgZHVyYXRpb24gb2YgY29udGVudCB0aGF0IGhhcyBleHBpcmVkIGZyb20gdGhlXG4gICogc3RyZWFtLlxuICAqXG4gICogQHBhcmFtIHtPYmplY3R9IHBsYXlsaXN0IGEgbWVkaWEgcGxheWxpc3Qgb2JqZWN0XG4gICogZHJvcHBlZCBvZmYgdGhlIGZyb250IG9mIHRoZSBwbGF5bGlzdCBpbiBhIGxpdmUgc2NlbmFyaW9cbiAgKiBAcGFyYW0ge051bWJlcj19IGV4cGlyZWQgdGhlIGFtb3VudCBvZiB0aW1lIHRoYXQgaGFzXG4gICogZHJvcHBlZCBvZmYgdGhlIGZyb250IG9mIHRoZSBwbGF5bGlzdCBpbiBhIGxpdmUgc2NlbmFyaW9cbiAgKiBAcmV0dXJuIHtUaW1lUmFuZ2VzfSB0aGUgcGVyaW9kcyBvZiB0aW1lIHRoYXQgYXJlIHZhbGlkIHRhcmdldHNcbiAgKiBmb3Igc2Vla2luZ1xuICAqL1xuXG5cbnZhciBzZWVrYWJsZSA9IGZ1bmN0aW9uIHNlZWthYmxlKHBsYXlsaXN0LCBleHBpcmVkKSB7XG4gIHZhciB1c2VTYWZlTGl2ZUVuZCA9IHRydWU7XG4gIHZhciBzZWVrYWJsZVN0YXJ0ID0gZXhwaXJlZCB8fCAwO1xuICB2YXIgc2Vla2FibGVFbmQgPSBwbGF5bGlzdEVuZChwbGF5bGlzdCwgZXhwaXJlZCwgdXNlU2FmZUxpdmVFbmQpO1xuXG4gIGlmIChzZWVrYWJsZUVuZCA9PT0gbnVsbCkge1xuICAgIHJldHVybiBjcmVhdGVUaW1lUmFuZ2UoKTtcbiAgfVxuXG4gIHJldHVybiBjcmVhdGVUaW1lUmFuZ2Uoc2Vla2FibGVTdGFydCwgc2Vla2FibGVFbmQpO1xufTtcblxudmFyIGlzV2hvbGVOdW1iZXIgPSBmdW5jdGlvbiBpc1dob2xlTnVtYmVyKG51bSkge1xuICByZXR1cm4gbnVtIC0gTWF0aC5mbG9vcihudW0pID09PSAwO1xufTtcblxudmFyIHJvdW5kU2lnbmlmaWNhbnREaWdpdCA9IGZ1bmN0aW9uIHJvdW5kU2lnbmlmaWNhbnREaWdpdChpbmNyZW1lbnQsIG51bSkge1xuICAvLyBJZiB3ZSBoYXZlIGEgd2hvbGUgbnVtYmVyLCBqdXN0IGFkZCAxIHRvIGl0XG4gIGlmIChpc1dob2xlTnVtYmVyKG51bSkpIHtcbiAgICByZXR1cm4gbnVtICsgaW5jcmVtZW50ICogMC4xO1xuICB9XG5cbiAgdmFyIG51bURlY2ltYWxEaWdpdHMgPSBudW0udG9TdHJpbmcoKS5zcGxpdCgnLicpWzFdLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMTsgaSA8PSBudW1EZWNpbWFsRGlnaXRzOyBpKyspIHtcbiAgICB2YXIgc2NhbGUgPSBNYXRoLnBvdygxMCwgaSk7XG4gICAgdmFyIHRlbXAgPSBudW0gKiBzY2FsZTtcblxuICAgIGlmIChpc1dob2xlTnVtYmVyKHRlbXApIHx8IGkgPT09IG51bURlY2ltYWxEaWdpdHMpIHtcbiAgICAgIHJldHVybiAodGVtcCArIGluY3JlbWVudCkgLyBzY2FsZTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBjZWlsTGVhc3RTaWduaWZpY2FudERpZ2l0ID0gcm91bmRTaWduaWZpY2FudERpZ2l0LmJpbmQobnVsbCwgMSk7XG52YXIgZmxvb3JMZWFzdFNpZ25pZmljYW50RGlnaXQgPSByb3VuZFNpZ25pZmljYW50RGlnaXQuYmluZChudWxsLCAtMSk7XG4vKipcbiAqIERldGVybWluZSB0aGUgaW5kZXggYW5kIGVzdGltYXRlZCBzdGFydGluZyB0aW1lIG9mIHRoZSBzZWdtZW50IHRoYXRcbiAqIGNvbnRhaW5zIGEgc3BlY2lmaWVkIHBsYXliYWNrIHBvc2l0aW9uIGluIGEgbWVkaWEgcGxheWxpc3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBsYXlsaXN0IHRoZSBtZWRpYSBwbGF5bGlzdCB0byBxdWVyeVxuICogQHBhcmFtIHtOdW1iZXJ9IGN1cnJlbnRUaW1lIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyBzaW5jZSB0aGUgZWFybGllc3RcbiAqIHBvc3NpYmxlIHBvc2l0aW9uIHRvIGRldGVybWluZSB0aGUgY29udGFpbmluZyBzZWdtZW50IGZvclxuICogQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0SW5kZXhcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdGFydFRpbWVcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG52YXIgZ2V0TWVkaWFJbmZvRm9yVGltZSA9IGZ1bmN0aW9uIGdldE1lZGlhSW5mb0ZvclRpbWUocGxheWxpc3QsIGN1cnJlbnRUaW1lLCBzdGFydEluZGV4LCBzdGFydFRpbWUpIHtcbiAgdmFyIGkgPSB2b2lkIDA7XG4gIHZhciBzZWdtZW50ID0gdm9pZCAwO1xuICB2YXIgbnVtU2VnbWVudHMgPSBwbGF5bGlzdC5zZWdtZW50cy5sZW5ndGg7XG4gIHZhciB0aW1lID0gY3VycmVudFRpbWUgLSBzdGFydFRpbWU7XG5cbiAgaWYgKHRpbWUgPCAwKSB7XG4gICAgLy8gV2FsayBiYWNrd2FyZCBmcm9tIHN0YXJ0SW5kZXggaW4gdGhlIHBsYXlsaXN0LCBhZGRpbmcgZHVyYXRpb25zXG4gICAgLy8gdW50aWwgd2UgZmluZCBhIHNlZ21lbnQgdGhhdCBjb250YWlucyBgdGltZWAgYW5kIHJldHVybiBpdFxuICAgIGlmIChzdGFydEluZGV4ID4gMCkge1xuICAgICAgZm9yIChpID0gc3RhcnRJbmRleCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIHNlZ21lbnQgPSBwbGF5bGlzdC5zZWdtZW50c1tpXTtcbiAgICAgICAgdGltZSArPSBmbG9vckxlYXN0U2lnbmlmaWNhbnREaWdpdChzZWdtZW50LmR1cmF0aW9uKTtcblxuICAgICAgICBpZiAodGltZSA+IDApIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWVkaWFJbmRleDogaSxcbiAgICAgICAgICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lIC0gc3VtRHVyYXRpb25zKHBsYXlsaXN0LCBzdGFydEluZGV4LCBpKVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIFdlIHdlcmUgdW5hYmxlIHRvIGZpbmQgYSBnb29kIHNlZ21lbnQgd2l0aGluIHRoZSBwbGF5bGlzdFxuICAgIC8vIHNvIHNlbGVjdCB0aGUgZmlyc3Qgc2VnbWVudFxuXG5cbiAgICByZXR1cm4ge1xuICAgICAgbWVkaWFJbmRleDogMCxcbiAgICAgIHN0YXJ0VGltZTogY3VycmVudFRpbWVcbiAgICB9O1xuICB9IC8vIFdoZW4gc3RhcnRJbmRleCBpcyBuZWdhdGl2ZSwgd2UgZmlyc3Qgd2FsayBmb3J3YXJkIHRvIGZpcnN0IHNlZ21lbnRcbiAgLy8gYWRkaW5nIHRhcmdldCBkdXJhdGlvbnMuIElmIHdlIFwicnVuIG91dCBvZiB0aW1lXCIgYmVmb3JlIGdldHRpbmcgdG9cbiAgLy8gdGhlIGZpcnN0IHNlZ21lbnQsIHJldHVybiB0aGUgZmlyc3Qgc2VnbWVudFxuXG5cbiAgaWYgKHN0YXJ0SW5kZXggPCAwKSB7XG4gICAgZm9yIChpID0gc3RhcnRJbmRleDsgaSA8IDA7IGkrKykge1xuICAgICAgdGltZSAtPSBwbGF5bGlzdC50YXJnZXREdXJhdGlvbjtcblxuICAgICAgaWYgKHRpbWUgPCAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbWVkaWFJbmRleDogMCxcbiAgICAgICAgICBzdGFydFRpbWU6IGN1cnJlbnRUaW1lXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3RhcnRJbmRleCA9IDA7XG4gIH0gLy8gV2FsayBmb3J3YXJkIGZyb20gc3RhcnRJbmRleCBpbiB0aGUgcGxheWxpc3QsIHN1YnRyYWN0aW5nIGR1cmF0aW9uc1xuICAvLyB1bnRpbCB3ZSBmaW5kIGEgc2VnbWVudCB0aGF0IGNvbnRhaW5zIGB0aW1lYCBhbmQgcmV0dXJuIGl0XG5cblxuICBmb3IgKGkgPSBzdGFydEluZGV4OyBpIDwgbnVtU2VnbWVudHM7IGkrKykge1xuICAgIHNlZ21lbnQgPSBwbGF5bGlzdC5zZWdtZW50c1tpXTtcbiAgICB0aW1lIC09IGNlaWxMZWFzdFNpZ25pZmljYW50RGlnaXQoc2VnbWVudC5kdXJhdGlvbik7XG5cbiAgICBpZiAodGltZSA8IDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1lZGlhSW5kZXg6IGksXG4gICAgICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lICsgc3VtRHVyYXRpb25zKHBsYXlsaXN0LCBzdGFydEluZGV4LCBpKVxuICAgICAgfTtcbiAgICB9XG4gIH0gLy8gV2UgYXJlIG91dCBvZiBwb3NzaWJsZSBjYW5kaWRhdGVzIHNvIGxvYWQgdGhlIGxhc3Qgb25lLi4uXG5cblxuICByZXR1cm4ge1xuICAgIG1lZGlhSW5kZXg6IG51bVNlZ21lbnRzIC0gMSxcbiAgICBzdGFydFRpbWU6IGN1cnJlbnRUaW1lXG4gIH07XG59O1xuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSBwbGF5bGlzdCBpcyBibGFja2xpc3RlZCBvciBub3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBsYXlsaXN0IHRoZSBtZWRpYSBwbGF5bGlzdCBvYmplY3RcbiAqIEByZXR1cm4ge2Jvb2xlYW59IHdoZXRoZXIgdGhlIHBsYXlsaXN0IGlzIGJsYWNrbGlzdGVkIG9yIG5vdFxuICogQGZ1bmN0aW9uIGlzQmxhY2tsaXN0ZWRcbiAqL1xuXG5cbnZhciBpc0JsYWNrbGlzdGVkID0gZnVuY3Rpb24gaXNCbGFja2xpc3RlZChwbGF5bGlzdCkge1xuICByZXR1cm4gcGxheWxpc3QuZXhjbHVkZVVudGlsICYmIHBsYXlsaXN0LmV4Y2x1ZGVVbnRpbCA+IERhdGUubm93KCk7XG59O1xuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSBwbGF5bGlzdCBpcyBjb21wYXRpYmxlIHdpdGggY3VycmVudCBwbGF5YmFjayBjb25maWd1cmF0aW9uIG9yIGhhc1xuICogYmVlbiBibGFja2xpc3RlZCBwZXJtYW5lbnRseSBmb3IgYmVpbmcgaW5jb21wYXRpYmxlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwbGF5bGlzdCB0aGUgbWVkaWEgcGxheWxpc3Qgb2JqZWN0XG4gKiBAcmV0dXJuIHtib29sZWFufSB3aGV0aGVyIHRoZSBwbGF5bGlzdCBpcyBpbmNvbXBhdGlibGUgb3Igbm90XG4gKiBAZnVuY3Rpb24gaXNJbmNvbXBhdGlibGVcbiAqL1xuXG5cbnZhciBpc0luY29tcGF0aWJsZSA9IGZ1bmN0aW9uIGlzSW5jb21wYXRpYmxlKHBsYXlsaXN0KSB7XG4gIHJldHVybiBwbGF5bGlzdC5leGNsdWRlVW50aWwgJiYgcGxheWxpc3QuZXhjbHVkZVVudGlsID09PSBJbmZpbml0eTtcbn07XG4vKipcbiAqIENoZWNrIHdoZXRoZXIgdGhlIHBsYXlsaXN0IGlzIGVuYWJsZWQgb3Igbm90LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwbGF5bGlzdCB0aGUgbWVkaWEgcGxheWxpc3Qgb2JqZWN0XG4gKiBAcmV0dXJuIHtib29sZWFufSB3aGV0aGVyIHRoZSBwbGF5bGlzdCBpcyBlbmFibGVkIG9yIG5vdFxuICogQGZ1bmN0aW9uIGlzRW5hYmxlZFxuICovXG5cblxudmFyIGlzRW5hYmxlZCA9IGZ1bmN0aW9uIGlzRW5hYmxlZChwbGF5bGlzdCkge1xuICB2YXIgYmxhY2tsaXN0ZWQgPSBpc0JsYWNrbGlzdGVkKHBsYXlsaXN0KTtcbiAgcmV0dXJuICFwbGF5bGlzdC5kaXNhYmxlZCAmJiAhYmxhY2tsaXN0ZWQ7XG59O1xuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSBwbGF5bGlzdCBoYXMgYmVlbiBtYW51YWxseSBkaXNhYmxlZCB0aHJvdWdoIHRoZSByZXByZXNlbnRhdGlvbnMgYXBpLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwbGF5bGlzdCB0aGUgbWVkaWEgcGxheWxpc3Qgb2JqZWN0XG4gKiBAcmV0dXJuIHtib29sZWFufSB3aGV0aGVyIHRoZSBwbGF5bGlzdCBpcyBkaXNhYmxlZCBtYW51YWxseSBvciBub3RcbiAqIEBmdW5jdGlvbiBpc0Rpc2FibGVkXG4gKi9cblxuXG52YXIgaXNEaXNhYmxlZCA9IGZ1bmN0aW9uIGlzRGlzYWJsZWQocGxheWxpc3QpIHtcbiAgcmV0dXJuIHBsYXlsaXN0LmRpc2FibGVkO1xufTtcbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBjdXJyZW50IHBsYXlsaXN0IGlzIGFuIEFFUyBlbmNyeXB0ZWQgSExTIHN0cmVhbVxuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgaXQncyBhbiBBRVMgZW5jcnlwdGVkIEhMUyBzdHJlYW1cbiAqL1xuXG5cbnZhciBpc0FlcyA9IGZ1bmN0aW9uIGlzQWVzKG1lZGlhKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbWVkaWEuc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAobWVkaWEuc2VnbWVudHNbaV0ua2V5KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGN1cnJlbnQgcGxheWxpc3QgY29udGFpbnMgZk1QNFxuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgdGhlIHBsYXlsaXN0IGNvbnRhaW5zIGZNUDRcbiAqL1xuXG5cbnZhciBpc0ZtcDQgPSBmdW5jdGlvbiBpc0ZtcDQobWVkaWEpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZWRpYS5zZWdtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChtZWRpYS5zZWdtZW50c1tpXS5tYXApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn07XG4vKipcbiAqIENoZWNrcyBpZiB0aGUgcGxheWxpc3QgaGFzIGEgdmFsdWUgZm9yIHRoZSBzcGVjaWZpZWQgYXR0cmlidXRlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGF0dHJcbiAqICAgICAgICBBdHRyaWJ1dGUgdG8gY2hlY2sgZm9yXG4gKiBAcGFyYW0ge09iamVjdH0gcGxheWxpc3RcbiAqICAgICAgICBUaGUgbWVkaWEgcGxheWxpc3Qgb2JqZWN0XG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogICAgICAgICBXaGV0aGVyIHRoZSBwbGF5bGlzdCBjb250YWlucyBhIHZhbHVlIGZvciB0aGUgYXR0cmlidXRlIG9yIG5vdFxuICogQGZ1bmN0aW9uIGhhc0F0dHJpYnV0ZVxuICovXG5cblxudmFyIGhhc0F0dHJpYnV0ZSA9IGZ1bmN0aW9uIGhhc0F0dHJpYnV0ZShhdHRyLCBwbGF5bGlzdCkge1xuICByZXR1cm4gcGxheWxpc3QuYXR0cmlidXRlcyAmJiBwbGF5bGlzdC5hdHRyaWJ1dGVzW2F0dHJdO1xufTtcbi8qKlxuICogRXN0aW1hdGVzIHRoZSB0aW1lIHJlcXVpcmVkIHRvIGNvbXBsZXRlIGEgc2VnbWVudCBkb3dubG9hZCBmcm9tIHRoZSBzcGVjaWZpZWQgcGxheWxpc3RcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gc2VnbWVudER1cmF0aW9uXG4gKiAgICAgICAgRHVyYXRpb24gb2YgcmVxdWVzdGVkIHNlZ21lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSBiYW5kd2lkdGhcbiAqICAgICAgICBDdXJyZW50IG1lYXN1cmVkIGJhbmR3aWR0aCBvZiB0aGUgcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdH0gcGxheWxpc3RcbiAqICAgICAgICBUaGUgbWVkaWEgcGxheWxpc3Qgb2JqZWN0XG4gKiBAcGFyYW0ge051bWJlcj19IGJ5dGVzUmVjZWl2ZWRcbiAqICAgICAgICBOdW1iZXIgb2YgYnl0ZXMgYWxyZWFkeSByZWNlaXZlZCBmb3IgdGhlIHJlcXVlc3QuIERlZmF1bHRzIHRvIDBcbiAqIEByZXR1cm4ge051bWJlcnxOYU59XG4gKiAgICAgICAgIFRoZSBlc3RpbWF0ZWQgdGltZSB0byByZXF1ZXN0IHRoZSBzZWdtZW50LiBOYU4gaWYgYmFuZHdpZHRoIGluZm9ybWF0aW9uIGZvclxuICogICAgICAgICB0aGUgZ2l2ZW4gcGxheWxpc3QgaXMgdW5hdmFpbGFibGVcbiAqIEBmdW5jdGlvbiBlc3RpbWF0ZVNlZ21lbnRSZXF1ZXN0VGltZVxuICovXG5cblxudmFyIGVzdGltYXRlU2VnbWVudFJlcXVlc3RUaW1lID0gZnVuY3Rpb24gZXN0aW1hdGVTZWdtZW50UmVxdWVzdFRpbWUoc2VnbWVudER1cmF0aW9uLCBiYW5kd2lkdGgsIHBsYXlsaXN0KSB7XG4gIHZhciBieXRlc1JlY2VpdmVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAwO1xuXG4gIGlmICghaGFzQXR0cmlidXRlKCdCQU5EV0lEVEgnLCBwbGF5bGlzdCkpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgdmFyIHNpemUgPSBzZWdtZW50RHVyYXRpb24gKiBwbGF5bGlzdC5hdHRyaWJ1dGVzLkJBTkRXSURUSDtcbiAgcmV0dXJuIChzaXplIC0gYnl0ZXNSZWNlaXZlZCAqIDgpIC8gYmFuZHdpZHRoO1xufTtcbi8qXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGN1cnJlbnQgcGxheWxpc3QgaXMgdGhlIGxvd2VzdCByZW5kaXRpb25cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIG9uIGxvd2VzdCByZW5kaXRpb25cbiAqL1xuXG5cbnZhciBpc0xvd2VzdEVuYWJsZWRSZW5kaXRpb24gPSBmdW5jdGlvbiBpc0xvd2VzdEVuYWJsZWRSZW5kaXRpb24obWFzdGVyLCBtZWRpYSkge1xuICBpZiAobWFzdGVyLnBsYXlsaXN0cy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHZhciBjdXJyZW50QmFuZHdpZHRoID0gbWVkaWEuYXR0cmlidXRlcy5CQU5EV0lEVEggfHwgTnVtYmVyLk1BWF9WQUxVRTtcbiAgcmV0dXJuIG1hc3Rlci5wbGF5bGlzdHMuZmlsdGVyKGZ1bmN0aW9uIChwbGF5bGlzdCkge1xuICAgIGlmICghaXNFbmFibGVkKHBsYXlsaXN0KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAocGxheWxpc3QuYXR0cmlidXRlcy5CQU5EV0lEVEggfHwgMCkgPCBjdXJyZW50QmFuZHdpZHRoO1xuICB9KS5sZW5ndGggPT09IDA7XG59OyAvLyBleHBvcnRzXG5cblxudmFyIFBsYXlsaXN0ID0ge1xuICBkdXJhdGlvbjogZHVyYXRpb24sXG4gIHNlZWthYmxlOiBzZWVrYWJsZSxcbiAgc2FmZUxpdmVJbmRleDogc2FmZUxpdmVJbmRleCxcbiAgZ2V0TWVkaWFJbmZvRm9yVGltZTogZ2V0TWVkaWFJbmZvRm9yVGltZSxcbiAgaXNFbmFibGVkOiBpc0VuYWJsZWQsXG4gIGlzRGlzYWJsZWQ6IGlzRGlzYWJsZWQsXG4gIGlzQmxhY2tsaXN0ZWQ6IGlzQmxhY2tsaXN0ZWQsXG4gIGlzSW5jb21wYXRpYmxlOiBpc0luY29tcGF0aWJsZSxcbiAgcGxheWxpc3RFbmQ6IHBsYXlsaXN0RW5kLFxuICBpc0FlczogaXNBZXMsXG4gIGlzRm1wNDogaXNGbXA0LFxuICBoYXNBdHRyaWJ1dGU6IGhhc0F0dHJpYnV0ZSxcbiAgZXN0aW1hdGVTZWdtZW50UmVxdWVzdFRpbWU6IGVzdGltYXRlU2VnbWVudFJlcXVlc3RUaW1lLFxuICBpc0xvd2VzdEVuYWJsZWRSZW5kaXRpb246IGlzTG93ZXN0RW5hYmxlZFJlbmRpdGlvblxufTtcbi8qKlxuICogQGZpbGUgeGhyLmpzXG4gKi9cblxudmFyIHZpZGVvanNYSFIgPSB2aWRlb2pzJDEueGhyLFxuICAgIG1lcmdlT3B0aW9ucyQxJDEgPSB2aWRlb2pzJDEubWVyZ2VPcHRpb25zO1xuXG52YXIgeGhyRmFjdG9yeSA9IGZ1bmN0aW9uIHhockZhY3RvcnkoKSB7XG4gIHZhciB4aHIkJDEgPSBmdW5jdGlvbiBYaHJGdW5jdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIC8vIEFkZCBhIGRlZmF1bHQgdGltZW91dCBmb3IgYWxsIGhscyByZXF1ZXN0c1xuICAgIG9wdGlvbnMgPSBtZXJnZU9wdGlvbnMkMSQxKHtcbiAgICAgIHRpbWVvdXQ6IDQ1ZTNcbiAgICB9LCBvcHRpb25zKTsgLy8gQWxsb3cgYW4gb3B0aW9uYWwgdXNlci1zcGVjaWZpZWQgZnVuY3Rpb24gdG8gbW9kaWZ5IHRoZSBvcHRpb25cbiAgICAvLyBvYmplY3QgYmVmb3JlIHdlIGNvbnN0cnVjdCB0aGUgeGhyIHJlcXVlc3RcblxuICAgIHZhciBiZWZvcmVSZXF1ZXN0ID0gWGhyRnVuY3Rpb24uYmVmb3JlUmVxdWVzdCB8fCB2aWRlb2pzJDEuSGxzLnhoci5iZWZvcmVSZXF1ZXN0O1xuXG4gICAgaWYgKGJlZm9yZVJlcXVlc3QgJiYgdHlwZW9mIGJlZm9yZVJlcXVlc3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHZhciBuZXdPcHRpb25zID0gYmVmb3JlUmVxdWVzdChvcHRpb25zKTtcblxuICAgICAgaWYgKG5ld09wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IG5ld09wdGlvbnM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHJlcXVlc3QgPSB2aWRlb2pzWEhSKG9wdGlvbnMsIGZ1bmN0aW9uIChlcnJvciwgcmVzcG9uc2UpIHtcbiAgICAgIHZhciByZXFSZXNwb25zZSA9IHJlcXVlc3QucmVzcG9uc2U7XG5cbiAgICAgIGlmICghZXJyb3IgJiYgcmVxUmVzcG9uc2UpIHtcbiAgICAgICAgcmVxdWVzdC5yZXNwb25zZVRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICByZXF1ZXN0LnJvdW5kVHJpcFRpbWUgPSByZXF1ZXN0LnJlc3BvbnNlVGltZSAtIHJlcXVlc3QucmVxdWVzdFRpbWU7XG4gICAgICAgIHJlcXVlc3QuYnl0ZXNSZWNlaXZlZCA9IHJlcVJlc3BvbnNlLmJ5dGVMZW5ndGggfHwgcmVxUmVzcG9uc2UubGVuZ3RoO1xuXG4gICAgICAgIGlmICghcmVxdWVzdC5iYW5kd2lkdGgpIHtcbiAgICAgICAgICByZXF1ZXN0LmJhbmR3aWR0aCA9IE1hdGguZmxvb3IocmVxdWVzdC5ieXRlc1JlY2VpdmVkIC8gcmVxdWVzdC5yb3VuZFRyaXBUaW1lICogOCAqIDEwMDApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXNwb25zZS5oZWFkZXJzKSB7XG4gICAgICAgIHJlcXVlc3QucmVzcG9uc2VIZWFkZXJzID0gcmVzcG9uc2UuaGVhZGVycztcbiAgICAgIH0gLy8gdmlkZW9qcy54aHIgbm93IHVzZXMgYSBzcGVjaWZpYyBjb2RlIG9uIHRoZSBlcnJvclxuICAgICAgLy8gb2JqZWN0IHRvIHNpZ25hbCB0aGF0IGEgcmVxdWVzdCBoYXMgdGltZWQgb3V0IGluc3RlYWRcbiAgICAgIC8vIG9mIHNldHRpbmcgYSBib29sZWFuIG9uIHRoZSByZXF1ZXN0IG9iamVjdFxuXG5cbiAgICAgIGlmIChlcnJvciAmJiBlcnJvci5jb2RlID09PSAnRVRJTUVET1VUJykge1xuICAgICAgICByZXF1ZXN0LnRpbWVkb3V0ID0gdHJ1ZTtcbiAgICAgIH0gLy8gdmlkZW9qcy54aHIgbm8gbG9uZ2VyIGNvbnNpZGVycyBzdGF0dXMgY29kZXMgb3V0c2lkZSBvZiAyMDAgYW5kIDBcbiAgICAgIC8vIChmb3IgZmlsZSB1cmlzKSB0byBiZSBlcnJvcnMsIGJ1dCB0aGUgb2xkIFhIUiBkaWQsIHNvIGVtdWxhdGUgdGhhdFxuICAgICAgLy8gYmVoYXZpb3IuIFN0YXR1cyAyMDYgbWF5IGJlIHVzZWQgaW4gcmVzcG9uc2UgdG8gYnl0ZXJhbmdlIHJlcXVlc3RzLlxuXG5cbiAgICAgIGlmICghZXJyb3IgJiYgIXJlcXVlc3QuYWJvcnRlZCAmJiByZXNwb25zZS5zdGF0dXNDb2RlICE9PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzQ29kZSAhPT0gMjA2ICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgIT09IDApIHtcbiAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoJ1hIUiBGYWlsZWQgd2l0aCBhIHJlc3BvbnNlIG9mOiAnICsgKHJlcXVlc3QgJiYgKHJlcVJlc3BvbnNlIHx8IHJlcXVlc3QucmVzcG9uc2VUZXh0KSkpO1xuICAgICAgfVxuXG4gICAgICBjYWxsYmFjayhlcnJvciwgcmVxdWVzdCk7XG4gICAgfSk7XG4gICAgdmFyIG9yaWdpbmFsQWJvcnQgPSByZXF1ZXN0LmFib3J0O1xuXG4gICAgcmVxdWVzdC5hYm9ydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlcXVlc3QuYWJvcnRlZCA9IHRydWU7XG4gICAgICByZXR1cm4gb3JpZ2luYWxBYm9ydC5hcHBseShyZXF1ZXN0LCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICByZXF1ZXN0LnVyaSA9IG9wdGlvbnMudXJpO1xuICAgIHJlcXVlc3QucmVxdWVzdFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIHJldHVybiByZXF1ZXN0O1xuICB9O1xuXG4gIHJldHVybiB4aHIkJDE7XG59O1xuLyoqXG4gKiBAZmlsZSBiaW4tdXRpbHMuanNcbiAqL1xuXG4vKipcbiAqIGNvbnZlcnQgYSBUaW1lUmFuZ2UgdG8gdGV4dFxuICpcbiAqIEBwYXJhbSB7VGltZVJhbmdlfSByYW5nZSB0aGUgdGltZXJhbmdlIHRvIHVzZSBmb3IgY29udmVyc2lvblxuICogQHBhcmFtIHtOdW1iZXJ9IGkgdGhlIGl0ZXJhdG9yIG9uIHRoZSByYW5nZSB0byBjb252ZXJ0XG4gKi9cblxuXG52YXIgdGV4dFJhbmdlID0gZnVuY3Rpb24gdGV4dFJhbmdlKHJhbmdlLCBpKSB7XG4gIHJldHVybiByYW5nZS5zdGFydChpKSArICctJyArIHJhbmdlLmVuZChpKTtcbn07XG4vKipcbiAqIGZvcm1hdCBhIG51bWJlciBhcyBoZXggc3RyaW5nXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGUgVGhlIG51bWJlclxuICogQHBhcmFtIHtOdW1iZXJ9IGkgdGhlIGl0ZXJhdG9yXG4gKi9cblxuXG52YXIgZm9ybWF0SGV4U3RyaW5nID0gZnVuY3Rpb24gZm9ybWF0SGV4U3RyaW5nKGUsIGkpIHtcbiAgdmFyIHZhbHVlID0gZS50b1N0cmluZygxNik7XG4gIHJldHVybiAnMDAnLnN1YnN0cmluZygwLCAyIC0gdmFsdWUubGVuZ3RoKSArIHZhbHVlICsgKGkgJSAyID8gJyAnIDogJycpO1xufTtcblxudmFyIGZvcm1hdEFzY2lpU3RyaW5nID0gZnVuY3Rpb24gZm9ybWF0QXNjaWlTdHJpbmcoZSkge1xuICBpZiAoZSA+PSAweDIwICYmIGUgPCAweDdlKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoZSk7XG4gIH1cblxuICByZXR1cm4gJy4nO1xufTtcbi8qKlxuICogQ3JlYXRlcyBhbiBvYmplY3QgZm9yIHNlbmRpbmcgdG8gYSB3ZWIgd29ya2VyIG1vZGlmeWluZyBwcm9wZXJ0aWVzIHRoYXQgYXJlIFR5cGVkQXJyYXlzXG4gKiBpbnRvIGEgbmV3IG9iamVjdCB3aXRoIHNlcGVyYXRlZCBwcm9wZXJ0aWVzIGZvciB0aGUgYnVmZmVyLCBieXRlT2Zmc2V0LCBhbmQgYnl0ZUxlbmd0aC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gbWVzc2FnZVxuICogICAgICAgIE9iamVjdCBvZiBwcm9wZXJ0aWVzIGFuZCB2YWx1ZXMgdG8gc2VuZCB0byB0aGUgd2ViIHdvcmtlclxuICogQHJldHVybiB7T2JqZWN0fVxuICogICAgICAgICBNb2RpZmllZCBtZXNzYWdlIHdpdGggVHlwZWRBcnJheSB2YWx1ZXMgZXhwYW5kZWRcbiAqIEBmdW5jdGlvbiBjcmVhdGVUcmFuc2ZlcmFibGVNZXNzYWdlXG4gKi9cblxuXG52YXIgY3JlYXRlVHJhbnNmZXJhYmxlTWVzc2FnZSA9IGZ1bmN0aW9uIGNyZWF0ZVRyYW5zZmVyYWJsZU1lc3NhZ2UobWVzc2FnZSkge1xuICB2YXIgdHJhbnNmZXJhYmxlID0ge307XG4gIE9iamVjdC5rZXlzKG1lc3NhZ2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciB2YWx1ZSA9IG1lc3NhZ2Vba2V5XTtcblxuICAgIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcodmFsdWUpKSB7XG4gICAgICB0cmFuc2ZlcmFibGVba2V5XSA9IHtcbiAgICAgICAgYnl0ZXM6IHZhbHVlLmJ1ZmZlcixcbiAgICAgICAgYnl0ZU9mZnNldDogdmFsdWUuYnl0ZU9mZnNldCxcbiAgICAgICAgYnl0ZUxlbmd0aDogdmFsdWUuYnl0ZUxlbmd0aFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJhbnNmZXJhYmxlW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gdHJhbnNmZXJhYmxlO1xufTtcbi8qKlxuICogUmV0dXJucyBhIHVuaXF1ZSBzdHJpbmcgaWRlbnRpZmllciBmb3IgYSBtZWRpYSBpbml0aWFsaXphdGlvblxuICogc2VnbWVudC5cbiAqL1xuXG5cbnZhciBpbml0U2VnbWVudElkID0gZnVuY3Rpb24gaW5pdFNlZ21lbnRJZChpbml0U2VnbWVudCkge1xuICB2YXIgYnl0ZXJhbmdlID0gaW5pdFNlZ21lbnQuYnl0ZXJhbmdlIHx8IHtcbiAgICBsZW5ndGg6IEluZmluaXR5LFxuICAgIG9mZnNldDogMFxuICB9O1xuICByZXR1cm4gW2J5dGVyYW5nZS5sZW5ndGgsIGJ5dGVyYW5nZS5vZmZzZXQsIGluaXRTZWdtZW50LnJlc29sdmVkVXJpXS5qb2luKCcsJyk7XG59O1xuLyoqXG4gKiB1dGlscyB0byBoZWxwIGR1bXAgYmluYXJ5IGRhdGEgdG8gdGhlIGNvbnNvbGVcbiAqL1xuXG5cbnZhciBoZXhEdW1wID0gZnVuY3Rpb24gaGV4RHVtcChkYXRhKSB7XG4gIHZhciBieXRlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRhdGEpO1xuICB2YXIgc3RlcCA9IDE2O1xuICB2YXIgcmVzdWx0ID0gJyc7XG4gIHZhciBoZXggPSB2b2lkIDA7XG4gIHZhciBhc2NpaSA9IHZvaWQgMDtcblxuICBmb3IgKHZhciBqID0gMDsgaiA8IGJ5dGVzLmxlbmd0aCAvIHN0ZXA7IGorKykge1xuICAgIGhleCA9IGJ5dGVzLnNsaWNlKGogKiBzdGVwLCBqICogc3RlcCArIHN0ZXApLm1hcChmb3JtYXRIZXhTdHJpbmcpLmpvaW4oJycpO1xuICAgIGFzY2lpID0gYnl0ZXMuc2xpY2UoaiAqIHN0ZXAsIGogKiBzdGVwICsgc3RlcCkubWFwKGZvcm1hdEFzY2lpU3RyaW5nKS5qb2luKCcnKTtcbiAgICByZXN1bHQgKz0gaGV4ICsgJyAnICsgYXNjaWkgKyAnXFxuJztcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG52YXIgdGFnRHVtcCA9IGZ1bmN0aW9uIHRhZ0R1bXAoX3JlZikge1xuICB2YXIgYnl0ZXMgPSBfcmVmLmJ5dGVzO1xuICByZXR1cm4gaGV4RHVtcChieXRlcyk7XG59O1xuXG52YXIgdGV4dFJhbmdlcyA9IGZ1bmN0aW9uIHRleHRSYW5nZXMocmFuZ2VzKSB7XG4gIHZhciByZXN1bHQgPSAnJztcbiAgdmFyIGkgPSB2b2lkIDA7XG5cbiAgZm9yIChpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgIHJlc3VsdCArPSB0ZXh0UmFuZ2UocmFuZ2VzLCBpKSArICcgJztcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG52YXIgdXRpbHMgPVxuLyojX19QVVJFX18qL1xuT2JqZWN0LmZyZWV6ZSh7XG4gIGNyZWF0ZVRyYW5zZmVyYWJsZU1lc3NhZ2U6IGNyZWF0ZVRyYW5zZmVyYWJsZU1lc3NhZ2UsXG4gIGluaXRTZWdtZW50SWQ6IGluaXRTZWdtZW50SWQsXG4gIGhleER1bXA6IGhleER1bXAsXG4gIHRhZ0R1bXA6IHRhZ0R1bXAsXG4gIHRleHRSYW5nZXM6IHRleHRSYW5nZXNcbn0pOyAvLyBUT0RPIGhhbmRsZSBmbXA0IGNhc2Ugd2hlcmUgdGhlIHRpbWluZyBpbmZvIGlzIGFjY3VyYXRlIGFuZCBkb2Vzbid0IGludm9sdmUgdHJhbnNtdXhcbi8vIEFkZCAyNSUgdG8gdGhlIHNlZ21lbnQgZHVyYXRpb24gdG8gYWNjb3VudCBmb3Igc21hbGwgZGlzY3JlcGVuY2llcyBpbiBzZWdtZW50IHRpbWluZy5cbi8vIDI1JSB3YXMgYXJiaXRyYXJpbHkgY2hvc2VuLCBhbmQgbWF5IG5lZWQgdG8gYmUgcmVmaW5lZCBvdmVyIHRpbWUuXG5cbnZhciBTRUdNRU5UX0VORF9GVURHRV9QRVJDRU5UID0gMC4yNTtcbi8qKlxuICogQ29udmVydHMgYSBwbGF5ZXIgdGltZSAoYW55IHRpbWUgdGhhdCBjYW4gYmUgZ290dGVuL3NldCBmcm9tIHBsYXllci5jdXJyZW50VGltZSgpLFxuICogZS5nLiwgYW55IHRpbWUgd2l0aGluIHBsYXllci5zZWVrYWJsZSgpLnN0YXJ0KDApIHRvIHBsYXllci5zZWVrYWJsZSgpLmVuZCgwKSkgdG8gYVxuICogcHJvZ3JhbSB0aW1lIChhbnkgdGltZSByZWZlcmVuY2luZyB0aGUgcmVhbCB3b3JsZCAoZS5nLiwgRVhULVgtUFJPR1JBTS1EQVRFLVRJTUUpKS5cbiAqXG4gKiBUaGUgY29udGFpbmluZyBzZWdtZW50IGlzIHJlcXVpcmVkIGFzIHRoZSBFWFQtWC1QUk9HUkFNLURBVEUtVElNRSBzZXJ2ZXMgYXMgYW4gXCJhbmNob3JcbiAqIHBvaW50XCIgKGEgcG9pbnQgd2hlcmUgd2UgaGF2ZSBhIG1hcHBpbmcgZnJvbSBwcm9ncmFtIHRpbWUgdG8gcGxheWVyIHRpbWUsIHdpdGggcGxheWVyXG4gKiB0aW1lIGJlaW5nIHRoZSBwb3N0IHRyYW5zbXV4IHN0YXJ0IG9mIHRoZSBzZWdtZW50KS5cbiAqXG4gKiBGb3IgbW9yZSBkZXRhaWxzLCBzZWUgW3RoaXMgZG9jXSguLi8uLi9kb2NzL3Byb2dyYW0tdGltZS1mcm9tLXBsYXllci10aW1lLm1kKS5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gcGxheWVyVGltZSB0aGUgcGxheWVyIHRpbWVcbiAqIEBwYXJhbSB7T2JqZWN0fSBzZWdtZW50IHRoZSBzZWdtZW50IHdoaWNoIGNvbnRhaW5zIHRoZSBwbGF5ZXIgdGltZVxuICogQHJldHVybiB7RGF0ZX0gcHJvZ3JhbSB0aW1lXG4gKi9cblxudmFyIHBsYXllclRpbWVUb1Byb2dyYW1UaW1lID0gZnVuY3Rpb24gcGxheWVyVGltZVRvUHJvZ3JhbVRpbWUocGxheWVyVGltZSwgc2VnbWVudCkge1xuICBpZiAoIXNlZ21lbnQuZGF0ZVRpbWVPYmplY3QpIHtcbiAgICAvLyBDYW4ndCBjb252ZXJ0IHdpdGhvdXQgYW4gXCJhbmNob3IgcG9pbnRcIiBmb3IgdGhlIHByb2dyYW0gdGltZSAoaS5lLiwgYSB0aW1lIHRoYXQgY2FuXG4gICAgLy8gYmUgdXNlZCB0byBtYXAgdGhlIHN0YXJ0IG9mIGEgc2VnbWVudCB3aXRoIGEgcmVhbCB3b3JsZCB0aW1lKS5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciB0cmFuc211eGVyUHJlcGVuZGVkU2Vjb25kcyA9IHNlZ21lbnQudmlkZW9UaW1pbmdJbmZvLnRyYW5zbXV4ZXJQcmVwZW5kZWRTZWNvbmRzO1xuICB2YXIgdHJhbnNtdXhlZFN0YXJ0ID0gc2VnbWVudC52aWRlb1RpbWluZ0luZm8udHJhbnNtdXhlZFByZXNlbnRhdGlvblN0YXJ0OyAvLyBnZXQgdGhlIHN0YXJ0IG9mIHRoZSBjb250ZW50IGZyb20gYmVmb3JlIG9sZCBjb250ZW50IGlzIHByZXBlbmRlZFxuXG4gIHZhciBzdGFydE9mU2VnbWVudCA9IHRyYW5zbXV4ZWRTdGFydCArIHRyYW5zbXV4ZXJQcmVwZW5kZWRTZWNvbmRzO1xuICB2YXIgb2Zmc2V0RnJvbVNlZ21lbnRTdGFydCA9IHBsYXllclRpbWUgLSBzdGFydE9mU2VnbWVudDtcbiAgcmV0dXJuIG5ldyBEYXRlKHNlZ21lbnQuZGF0ZVRpbWVPYmplY3QuZ2V0VGltZSgpICsgb2Zmc2V0RnJvbVNlZ21lbnRTdGFydCAqIDEwMDApO1xufTtcblxudmFyIG9yaWdpbmFsU2VnbWVudFZpZGVvRHVyYXRpb24gPSBmdW5jdGlvbiBvcmlnaW5hbFNlZ21lbnRWaWRlb0R1cmF0aW9uKHZpZGVvVGltaW5nSW5mbykge1xuICByZXR1cm4gdmlkZW9UaW1pbmdJbmZvLnRyYW5zbXV4ZWRQcmVzZW50YXRpb25FbmQgLSB2aWRlb1RpbWluZ0luZm8udHJhbnNtdXhlZFByZXNlbnRhdGlvblN0YXJ0IC0gdmlkZW9UaW1pbmdJbmZvLnRyYW5zbXV4ZXJQcmVwZW5kZWRTZWNvbmRzO1xufTtcbi8qKlxuICogRmluZHMgYSBzZWdtZW50IHRoYXQgY29udGFpbnMgdGhlIHRpbWUgcmVxdWVzdGVkIGdpdmVuIGFzIGFuIElTTy04NjAxIHN0cmluZy4gVGhlXG4gKiByZXR1cm5lZCBzZWdtZW50IG1pZ2h0IGJlIGFuIGVzdGltYXRlIG9yIGFuIGFjY3VyYXRlIG1hdGNoLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9ncmFtVGltZSBUaGUgSVNPLTg2MDEgcHJvZ3JhbVRpbWUgdG8gZmluZCBhIG1hdGNoIGZvclxuICogQHBhcmFtIHtPYmplY3R9IHBsYXlsaXN0IEEgcGxheWxpc3Qgb2JqZWN0IHRvIHNlYXJjaCB3aXRoaW5cbiAqL1xuXG5cbnZhciBmaW5kU2VnbWVudEZvclByb2dyYW1UaW1lID0gZnVuY3Rpb24gZmluZFNlZ21lbnRGb3JQcm9ncmFtVGltZShwcm9ncmFtVGltZSwgcGxheWxpc3QpIHtcbiAgLy8gQXNzdW1wdGlvbnM6XG4gIC8vICAtIHZlcmlmeVByb2dyYW1EYXRlVGltZVRhZ3MgaGFzIGFscmVhZHkgYmVlbiBydW5cbiAgLy8gIC0gbGl2ZSBzdHJlYW1zIGhhdmUgYmVlbiBzdGFydGVkXG4gIHZhciBkYXRlVGltZU9iamVjdCA9IHZvaWQgMDtcblxuICB0cnkge1xuICAgIGRhdGVUaW1lT2JqZWN0ID0gbmV3IERhdGUocHJvZ3JhbVRpbWUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoIXBsYXlsaXN0IHx8ICFwbGF5bGlzdC5zZWdtZW50cyB8fCBwbGF5bGlzdC5zZWdtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBzZWdtZW50ID0gcGxheWxpc3Quc2VnbWVudHNbMF07XG5cbiAgaWYgKGRhdGVUaW1lT2JqZWN0IDwgc2VnbWVudC5kYXRlVGltZU9iamVjdCkge1xuICAgIC8vIFJlcXVlc3RlZCB0aW1lIGlzIGJlZm9yZSBzdHJlYW0gc3RhcnQuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHBsYXlsaXN0LnNlZ21lbnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgIHNlZ21lbnQgPSBwbGF5bGlzdC5zZWdtZW50c1tpXTtcbiAgICB2YXIgbmV4dFNlZ21lbnRTdGFydCA9IHBsYXlsaXN0LnNlZ21lbnRzW2kgKyAxXS5kYXRlVGltZU9iamVjdDtcblxuICAgIGlmIChkYXRlVGltZU9iamVjdCA8IG5leHRTZWdtZW50U3RhcnQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHZhciBsYXN0U2VnbWVudCA9IHBsYXlsaXN0LnNlZ21lbnRzW3BsYXlsaXN0LnNlZ21lbnRzLmxlbmd0aCAtIDFdO1xuICB2YXIgbGFzdFNlZ21lbnRTdGFydCA9IGxhc3RTZWdtZW50LmRhdGVUaW1lT2JqZWN0O1xuICB2YXIgbGFzdFNlZ21lbnREdXJhdGlvbiA9IGxhc3RTZWdtZW50LnZpZGVvVGltaW5nSW5mbyA/IG9yaWdpbmFsU2VnbWVudFZpZGVvRHVyYXRpb24obGFzdFNlZ21lbnQudmlkZW9UaW1pbmdJbmZvKSA6IGxhc3RTZWdtZW50LmR1cmF0aW9uICsgbGFzdFNlZ21lbnQuZHVyYXRpb24gKiBTRUdNRU5UX0VORF9GVURHRV9QRVJDRU5UO1xuICB2YXIgbGFzdFNlZ21lbnRFbmQgPSBuZXcgRGF0ZShsYXN0U2VnbWVudFN0YXJ0LmdldFRpbWUoKSArIGxhc3RTZWdtZW50RHVyYXRpb24gKiAxMDAwKTtcblxuICBpZiAoZGF0ZVRpbWVPYmplY3QgPiBsYXN0U2VnbWVudEVuZCkge1xuICAgIC8vIEJleW9uZCB0aGUgZW5kIG9mIHRoZSBzdHJlYW0sIG9yIG91ciBiZXN0IGd1ZXNzIG9mIHRoZSBlbmQgb2YgdGhlIHN0cmVhbS5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmIChkYXRlVGltZU9iamVjdCA+IGxhc3RTZWdtZW50U3RhcnQpIHtcbiAgICBzZWdtZW50ID0gbGFzdFNlZ21lbnQ7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHNlZ21lbnQ6IHNlZ21lbnQsXG4gICAgZXN0aW1hdGVkU3RhcnQ6IHNlZ21lbnQudmlkZW9UaW1pbmdJbmZvID8gc2VnbWVudC52aWRlb1RpbWluZ0luZm8udHJhbnNtdXhlZFByZXNlbnRhdGlvblN0YXJ0IDogUGxheWxpc3QuZHVyYXRpb24ocGxheWxpc3QsIHBsYXlsaXN0Lm1lZGlhU2VxdWVuY2UgKyBwbGF5bGlzdC5zZWdtZW50cy5pbmRleE9mKHNlZ21lbnQpKSxcbiAgICAvLyBBbHRob3VnaCwgZ2l2ZW4gdGhhdCBhbGwgc2VnbWVudHMgaGF2ZSBhY2N1cmF0ZSBkYXRlIHRpbWUgb2JqZWN0cywgdGhlIHNlZ21lbnRcbiAgICAvLyBzZWxlY3RlZCBzaG91bGQgYmUgYWNjdXJhdGUsIHVubGVzcyB0aGUgdmlkZW8gaGFzIGJlZW4gdHJhbnNtdXhlZCBhdCBzb21lIHBvaW50XG4gICAgLy8gKGRldGVybWluZWQgYnkgdGhlIHByZXNlbmNlIG9mIHRoZSB2aWRlb1RpbWluZ0luZm8gb2JqZWN0KSwgdGhlIHNlZ21lbnQncyBcInBsYXllclxuICAgIC8vIHRpbWVcIiAodGhlIHN0YXJ0IHRpbWUgaW4gdGhlIHBsYXllcikgY2FuJ3QgYmUgY29uc2lkZXJlZCBhY2N1cmF0ZS5cbiAgICB0eXBlOiBzZWdtZW50LnZpZGVvVGltaW5nSW5mbyA/ICdhY2N1cmF0ZScgOiAnZXN0aW1hdGUnXG4gIH07XG59O1xuLyoqXG4gKiBGaW5kcyBhIHNlZ21lbnQgdGhhdCBjb250YWlucyB0aGUgZ2l2ZW4gcGxheWVyIHRpbWUoaW4gc2Vjb25kcykuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHRpbWUgVGhlIHBsYXllciB0aW1lIHRvIGZpbmQgYSBtYXRjaCBmb3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBwbGF5bGlzdCBBIHBsYXlsaXN0IG9iamVjdCB0byBzZWFyY2ggd2l0aGluXG4gKi9cblxuXG52YXIgZmluZFNlZ21lbnRGb3JQbGF5ZXJUaW1lID0gZnVuY3Rpb24gZmluZFNlZ21lbnRGb3JQbGF5ZXJUaW1lKHRpbWUsIHBsYXlsaXN0KSB7XG4gIC8vIEFzc3VtcHRpb25zOlxuICAvLyAtIHRoZXJlIHdpbGwgYWx3YXlzIGJlIGEgc2VnbWVudC5kdXJhdGlvblxuICAvLyAtIHdlIGNhbiBzdGFydCBmcm9tIHplcm9cbiAgLy8gLSBzZWdtZW50cyBhcmUgaW4gdGltZSBvcmRlclxuICBpZiAoIXBsYXlsaXN0IHx8ICFwbGF5bGlzdC5zZWdtZW50cyB8fCBwbGF5bGlzdC5zZWdtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBzZWdtZW50RW5kID0gMDtcbiAgdmFyIHNlZ21lbnQgPSB2b2lkIDA7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbGF5bGlzdC5zZWdtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHNlZ21lbnQgPSBwbGF5bGlzdC5zZWdtZW50c1tpXTsgLy8gdmlkZW9UaW1pbmdJbmZvIGlzIHNldCBhZnRlciB0aGUgc2VnbWVudCBpcyBkb3dubG9hZGVkIGFuZCB0cmFuc211eGVkLCBhbmRcbiAgICAvLyBzaG91bGQgY29udGFpbiB0aGUgbW9zdCBhY2N1cmF0ZSB2YWx1ZXMgd2UgaGF2ZSBmb3IgdGhlIHNlZ21lbnQncyBwbGF5ZXIgdGltZXMuXG4gICAgLy9cbiAgICAvLyBVc2UgdGhlIGFjY3VyYXRlIHRyYW5zbXV4ZWRQcmVzZW50YXRpb25FbmQgdmFsdWUgaWYgaXQgaXMgYXZhaWxhYmxlLCBvdGhlcndpc2UgZmFsbFxuICAgIC8vIGJhY2sgdG8gYW4gZXN0aW1hdGUgYmFzZWQgb24gdGhlIG1hbmlmZXN0IGRlcml2ZWQgKGluYWNjdXJhdGUpIHNlZ21lbnQuZHVyYXRpb24sIHRvXG4gICAgLy8gY2FsY3VsYXRlIGFuIGVuZCB2YWx1ZS5cblxuICAgIHNlZ21lbnRFbmQgPSBzZWdtZW50LnZpZGVvVGltaW5nSW5mbyA/IHNlZ21lbnQudmlkZW9UaW1pbmdJbmZvLnRyYW5zbXV4ZWRQcmVzZW50YXRpb25FbmQgOiBzZWdtZW50RW5kICsgc2VnbWVudC5kdXJhdGlvbjtcblxuICAgIGlmICh0aW1lIDw9IHNlZ21lbnRFbmQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHZhciBsYXN0U2VnbWVudCA9IHBsYXlsaXN0LnNlZ21lbnRzW3BsYXlsaXN0LnNlZ21lbnRzLmxlbmd0aCAtIDFdO1xuXG4gIGlmIChsYXN0U2VnbWVudC52aWRlb1RpbWluZ0luZm8gJiYgbGFzdFNlZ21lbnQudmlkZW9UaW1pbmdJbmZvLnRyYW5zbXV4ZWRQcmVzZW50YXRpb25FbmQgPCB0aW1lKSB7XG4gICAgLy8gVGhlIHRpbWUgcmVxdWVzdGVkIGlzIGJleW9uZCB0aGUgc3RyZWFtIGVuZC5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmICh0aW1lID4gc2VnbWVudEVuZCkge1xuICAgIC8vIFRoZSB0aW1lIGlzIHdpdGhpbiBvciBiZXlvbmQgdGhlIGxhc3Qgc2VnbWVudC5cbiAgICAvL1xuICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgdGltZSBpcyBiZXlvbmQgYSByZWFzb25hYmxlIGd1ZXNzIG9mIHRoZSBlbmQgb2YgdGhlIHN0cmVhbS5cbiAgICBpZiAodGltZSA+IHNlZ21lbnRFbmQgKyBsYXN0U2VnbWVudC5kdXJhdGlvbiAqIFNFR01FTlRfRU5EX0ZVREdFX1BFUkNFTlQpIHtcbiAgICAgIC8vIFRlY2huaWNhbGx5LCBiZWNhdXNlIHRoZSBkdXJhdGlvbiB2YWx1ZSBpcyBvbmx5IGFuIGVzdGltYXRlLCB0aGUgdGltZSBtYXkgc3RpbGxcbiAgICAgIC8vIGV4aXN0IGluIHRoZSBsYXN0IHNlZ21lbnQsIGhvd2V2ZXIsIHRoZXJlIGlzbid0IGVub3VnaCBpbmZvcm1hdGlvbiB0byBtYWtlIGV2ZW5cbiAgICAgIC8vIGEgcmVhc29uYWJsZSBlc3RpbWF0ZS5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHNlZ21lbnQgPSBsYXN0U2VnbWVudDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc2VnbWVudDogc2VnbWVudCxcbiAgICBlc3RpbWF0ZWRTdGFydDogc2VnbWVudC52aWRlb1RpbWluZ0luZm8gPyBzZWdtZW50LnZpZGVvVGltaW5nSW5mby50cmFuc211eGVkUHJlc2VudGF0aW9uU3RhcnQgOiBzZWdtZW50RW5kIC0gc2VnbWVudC5kdXJhdGlvbixcbiAgICAvLyBCZWNhdXNlIHZpZGVvVGltaW5nSW5mbyBpcyBvbmx5IHNldCBhZnRlciB0cmFuc211eCwgaXQgaXMgdGhlIG9ubHkgd2F5IHRvIGdldFxuICAgIC8vIGFjY3VyYXRlIHRpbWluZyB2YWx1ZXMuXG4gICAgdHlwZTogc2VnbWVudC52aWRlb1RpbWluZ0luZm8gPyAnYWNjdXJhdGUnIDogJ2VzdGltYXRlJ1xuICB9O1xufTtcbi8qKlxuICogR2l2ZXMgdGhlIG9mZnNldCBvZiB0aGUgY29tcGFyaXNvblRpbWVzdGFtcCBmcm9tIHRoZSBwcm9ncmFtVGltZSB0aW1lc3RhbXAgaW4gc2Vjb25kcy5cbiAqIElmIHRoZSBvZmZzZXQgcmV0dXJuZWQgaXMgcG9zaXRpdmUsIHRoZSBwcm9ncmFtVGltZSBvY2N1cnMgYWZ0ZXIgdGhlXG4gKiBjb21wYXJpc29uVGltZXN0YW1wLlxuICogSWYgdGhlIG9mZnNldCBpcyBuZWdhdGl2ZSwgdGhlIHByb2dyYW1UaW1lIG9jY3VycyBiZWZvcmUgdGhlIGNvbXBhcmlzb25UaW1lc3RhbXAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNvbXBhcmlzb25UaW1lU3RhbXAgQW4gSVNPLTg2MDEgdGltZXN0YW1wIHRvIGNvbXBhcmUgYWdhaW5zdFxuICogQHBhcmFtIHtTdHJpbmd9IHByb2dyYW1UaW1lIFRoZSBwcm9ncmFtVGltZSBhcyBhbiBJU08tODYwMSBzdHJpbmdcbiAqIEByZXR1cm4ge051bWJlcn0gb2Zmc2V0XG4gKi9cblxuXG52YXIgZ2V0T2Zmc2V0RnJvbVRpbWVzdGFtcCA9IGZ1bmN0aW9uIGdldE9mZnNldEZyb21UaW1lc3RhbXAoY29tcGFyaXNvblRpbWVTdGFtcCwgcHJvZ3JhbVRpbWUpIHtcbiAgdmFyIHNlZ21lbnREYXRlVGltZSA9IHZvaWQgMDtcbiAgdmFyIHByb2dyYW1EYXRlVGltZSA9IHZvaWQgMDtcblxuICB0cnkge1xuICAgIHNlZ21lbnREYXRlVGltZSA9IG5ldyBEYXRlKGNvbXBhcmlzb25UaW1lU3RhbXApO1xuICAgIHByb2dyYW1EYXRlVGltZSA9IG5ldyBEYXRlKHByb2dyYW1UaW1lKTtcbiAgfSBjYXRjaCAoZSkgey8vIFRPRE8gaGFuZGxlIGVycm9yXG4gIH1cblxuICB2YXIgc2VnbWVudFRpbWVFcG9jaCA9IHNlZ21lbnREYXRlVGltZS5nZXRUaW1lKCk7XG4gIHZhciBwcm9ncmFtVGltZUVwb2NoID0gcHJvZ3JhbURhdGVUaW1lLmdldFRpbWUoKTtcbiAgcmV0dXJuIChwcm9ncmFtVGltZUVwb2NoIC0gc2VnbWVudFRpbWVFcG9jaCkgLyAxMDAwO1xufTtcbi8qKlxuICogQ2hlY2tzIHRoYXQgYWxsIHNlZ21lbnRzIGluIHRoaXMgcGxheWxpc3QgaGF2ZSBwcm9ncmFtRGF0ZVRpbWUgdGFncy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGxheWxpc3QgQSBwbGF5bGlzdCBvYmplY3RcbiAqL1xuXG5cbnZhciB2ZXJpZnlQcm9ncmFtRGF0ZVRpbWVUYWdzID0gZnVuY3Rpb24gdmVyaWZ5UHJvZ3JhbURhdGVUaW1lVGFncyhwbGF5bGlzdCkge1xuICBpZiAoIXBsYXlsaXN0LnNlZ21lbnRzIHx8IHBsYXlsaXN0LnNlZ21lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGxheWxpc3Quc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc2VnbWVudCA9IHBsYXlsaXN0LnNlZ21lbnRzW2ldO1xuXG4gICAgaWYgKCFzZWdtZW50LmRhdGVUaW1lT2JqZWN0KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBwcm9ncmFtVGltZSBvZiB0aGUgbWVkaWEgZ2l2ZW4gYSBwbGF5bGlzdCBhbmQgYSBwbGF5ZXJUaW1lLlxuICogVGhlIHBsYXlsaXN0IG11c3QgaGF2ZSBwcm9ncmFtRGF0ZVRpbWUgdGFncyBmb3IgYSBwcm9ncmFtRGF0ZVRpbWUgdGFnIHRvIGJlIHJldHVybmVkLlxuICogSWYgdGhlIHNlZ21lbnRzIGNvbnRhaW5pbmcgdGhlIHRpbWUgcmVxdWVzdGVkIGhhdmUgbm90IGJlZW4gYnVmZmVyZWQgeWV0LCBhbiBlc3RpbWF0ZVxuICogbWF5IGJlIHJldHVybmVkIHRvIHRoZSBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYXJnc1xuICogQHBhcmFtIHtPYmplY3R9IGFyZ3MucGxheWxpc3QgQSBwbGF5bGlzdCBvYmplY3QgdG8gc2VhcmNoIHdpdGhpblxuICogQHBhcmFtIHtOdW1iZXJ9IHRpbWUgQSBwbGF5ZXJUaW1lIGluIHNlY29uZHNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrKGVyciwgcHJvZ3JhbVRpbWUpXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBlcnIubWVzc2FnZSBBIGRldGFpbGVkIGVycm9yIG1lc3NhZ2VcbiAqIEByZXR1cm5zIHtPYmplY3R9IHByb2dyYW1UaW1lXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBwcm9ncmFtVGltZS5tZWRpYVNlY29uZHMgVGhlIHN0cmVhbVRpbWUgaW4gc2Vjb25kc1xuICogQHJldHVybnMge1N0cmluZ30gcHJvZ3JhbVRpbWUucHJvZ3JhbURhdGVUaW1lIFRoZSBwcm9ncmFtVGltZSBhcyBhbiBJU08tODYwMSBTdHJpbmdcbiAqL1xuXG5cbnZhciBnZXRQcm9ncmFtVGltZSA9IGZ1bmN0aW9uIGdldFByb2dyYW1UaW1lKF9yZWYpIHtcbiAgdmFyIHBsYXlsaXN0ID0gX3JlZi5wbGF5bGlzdCxcbiAgICAgIF9yZWYkdGltZSA9IF9yZWYudGltZSxcbiAgICAgIHRpbWUgPSBfcmVmJHRpbWUgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IF9yZWYkdGltZSxcbiAgICAgIGNhbGxiYWNrID0gX3JlZi5jYWxsYmFjaztcblxuICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdnZXRQcm9ncmFtVGltZTogY2FsbGJhY2sgbXVzdCBiZSBwcm92aWRlZCcpO1xuICB9XG5cbiAgaWYgKCFwbGF5bGlzdCB8fCB0aW1lID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gY2FsbGJhY2soe1xuICAgICAgbWVzc2FnZTogJ2dldFByb2dyYW1UaW1lOiBwbGF5bGlzdCBhbmQgdGltZSBtdXN0IGJlIHByb3ZpZGVkJ1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIG1hdGNoZWRTZWdtZW50ID0gZmluZFNlZ21lbnRGb3JQbGF5ZXJUaW1lKHRpbWUsIHBsYXlsaXN0KTtcblxuICBpZiAoIW1hdGNoZWRTZWdtZW50KSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKHtcbiAgICAgIG1lc3NhZ2U6ICd2YWxpZCBwcm9ncmFtVGltZSB3YXMgbm90IGZvdW5kJ1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKG1hdGNoZWRTZWdtZW50LnR5cGUgPT09ICdlc3RpbWF0ZScpIHtcbiAgICByZXR1cm4gY2FsbGJhY2soe1xuICAgICAgbWVzc2FnZTogJ0FjY3VyYXRlIHByb2dyYW1UaW1lIGNvdWxkIG5vdCBiZSBkZXRlcm1pbmVkLicgKyAnIFBsZWFzZSBzZWVrIHRvIGUuc2Vla1RpbWUgYW5kIHRyeSBhZ2FpbicsXG4gICAgICBzZWVrVGltZTogbWF0Y2hlZFNlZ21lbnQuZXN0aW1hdGVkU3RhcnRcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBwcm9ncmFtVGltZU9iamVjdCA9IHtcbiAgICBtZWRpYVNlY29uZHM6IHRpbWVcbiAgfTtcbiAgdmFyIHByb2dyYW1UaW1lID0gcGxheWVyVGltZVRvUHJvZ3JhbVRpbWUodGltZSwgbWF0Y2hlZFNlZ21lbnQuc2VnbWVudCk7XG5cbiAgaWYgKHByb2dyYW1UaW1lKSB7XG4gICAgcHJvZ3JhbVRpbWVPYmplY3QucHJvZ3JhbURhdGVUaW1lID0gcHJvZ3JhbVRpbWUudG9JU09TdHJpbmcoKTtcbiAgfVxuXG4gIHJldHVybiBjYWxsYmFjayhudWxsLCBwcm9ncmFtVGltZU9iamVjdCk7XG59O1xuLyoqXG4gKiBTZWVrcyBpbiB0aGUgcGxheWVyIHRvIGEgdGltZSB0aGF0IG1hdGNoZXMgdGhlIGdpdmVuIHByb2dyYW1UaW1lIElTTy04NjAxIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYXJnc1xuICogQHBhcmFtIHtTdHJpbmd9IGFyZ3MucHJvZ3JhbVRpbWUgQSBwcm9ncmFtVGltZSB0byBzZWVrIHRvIGFzIGFuIElTTy04NjAxIFN0cmluZ1xuICogQHBhcmFtIHtPYmplY3R9IGFyZ3MucGxheWxpc3QgQSBwbGF5bGlzdCB0byBsb29rIHdpdGhpblxuICogQHBhcmFtIHtOdW1iZXJ9IGFyZ3MucmV0cnlDb3VudCBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIHRyeSBmb3IgYW4gYWNjdXJhdGUgc2Vlay4gRGVmYXVsdCBpcyAyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gYXJncy5zZWVrVG8gQSBtZXRob2QgdG8gcGVyZm9ybSBhIHNlZWtcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gYXJncy5wYXVzZUFmdGVyU2VlayBXaGV0aGVyIHRvIGVuZCBpbiBhIHBhdXNlZCBzdGF0ZSBhZnRlciBzZWVraW5nLiBEZWZhdWx0IGlzIHRydWUuXG4gKiBAcGFyYW0ge09iamVjdH0gYXJncy50ZWNoIFRoZSB0ZWNoIHRvIHNlZWsgb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGFyZ3MuY2FsbGJhY2soZXJyLCBuZXdUaW1lKSBBIGNhbGxiYWNrIHRvIHJldHVybiB0aGUgbmV3IHRpbWUgdG9cbiAqIEByZXR1cm5zIHtTdHJpbmd9IGVyci5tZXNzYWdlIEEgZGV0YWlsZWQgZXJyb3IgbWVzc2FnZVxuICogQHJldHVybnMge051bWJlcn0gbmV3VGltZSBUaGUgZXhhY3QgdGltZSB0aGF0IHdhcyBzZWVrZWQgdG8gaW4gc2Vjb25kc1xuICovXG5cblxudmFyIHNlZWtUb1Byb2dyYW1UaW1lID0gZnVuY3Rpb24gc2Vla1RvUHJvZ3JhbVRpbWUoX3JlZjIpIHtcbiAgdmFyIHByb2dyYW1UaW1lID0gX3JlZjIucHJvZ3JhbVRpbWUsXG4gICAgICBwbGF5bGlzdCA9IF9yZWYyLnBsYXlsaXN0LFxuICAgICAgX3JlZjIkcmV0cnlDb3VudCA9IF9yZWYyLnJldHJ5Q291bnQsXG4gICAgICByZXRyeUNvdW50ID0gX3JlZjIkcmV0cnlDb3VudCA9PT0gdW5kZWZpbmVkID8gMiA6IF9yZWYyJHJldHJ5Q291bnQsXG4gICAgICBzZWVrVG8gPSBfcmVmMi5zZWVrVG8sXG4gICAgICBfcmVmMiRwYXVzZUFmdGVyU2VlayA9IF9yZWYyLnBhdXNlQWZ0ZXJTZWVrLFxuICAgICAgcGF1c2VBZnRlclNlZWsgPSBfcmVmMiRwYXVzZUFmdGVyU2VlayA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IF9yZWYyJHBhdXNlQWZ0ZXJTZWVrLFxuICAgICAgdGVjaCA9IF9yZWYyLnRlY2gsXG4gICAgICBjYWxsYmFjayA9IF9yZWYyLmNhbGxiYWNrO1xuXG4gIGlmICghY2FsbGJhY2spIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NlZWtUb1Byb2dyYW1UaW1lOiBjYWxsYmFjayBtdXN0IGJlIHByb3ZpZGVkJyk7XG4gIH1cblxuICBpZiAodHlwZW9mIHByb2dyYW1UaW1lID09PSAndW5kZWZpbmVkJyB8fCAhcGxheWxpc3QgfHwgIXNlZWtUbykge1xuICAgIHJldHVybiBjYWxsYmFjayh7XG4gICAgICBtZXNzYWdlOiAnc2Vla1RvUHJvZ3JhbVRpbWU6IHByb2dyYW1UaW1lLCBzZWVrVG8gYW5kIHBsYXlsaXN0IG11c3QgYmUgcHJvdmlkZWQnXG4gICAgfSk7XG4gIH1cblxuICBpZiAoIXBsYXlsaXN0LmVuZExpc3QgJiYgIXRlY2guaGFzU3RhcnRlZF8pIHtcbiAgICByZXR1cm4gY2FsbGJhY2soe1xuICAgICAgbWVzc2FnZTogJ3BsYXllciBtdXN0IGJlIHBsYXlpbmcgYSBsaXZlIHN0cmVhbSB0byBzdGFydCBidWZmZXJpbmcnXG4gICAgfSk7XG4gIH1cblxuICBpZiAoIXZlcmlmeVByb2dyYW1EYXRlVGltZVRhZ3MocGxheWxpc3QpKSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKHtcbiAgICAgIG1lc3NhZ2U6ICdwcm9ncmFtRGF0ZVRpbWUgdGFncyBtdXN0IGJlIHByb3ZpZGVkIGluIHRoZSBtYW5pZmVzdCAnICsgcGxheWxpc3QucmVzb2x2ZWRVcmlcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBtYXRjaGVkU2VnbWVudCA9IGZpbmRTZWdtZW50Rm9yUHJvZ3JhbVRpbWUocHJvZ3JhbVRpbWUsIHBsYXlsaXN0KTsgLy8gbm8gbWF0Y2hcblxuICBpZiAoIW1hdGNoZWRTZWdtZW50KSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKHtcbiAgICAgIG1lc3NhZ2U6IHByb2dyYW1UaW1lICsgJyB3YXMgbm90IGZvdW5kIGluIHRoZSBzdHJlYW0nXG4gICAgfSk7XG4gIH1cblxuICB2YXIgc2VnbWVudCA9IG1hdGNoZWRTZWdtZW50LnNlZ21lbnQ7XG4gIHZhciBtZWRpYU9mZnNldCA9IGdldE9mZnNldEZyb21UaW1lc3RhbXAoc2VnbWVudC5kYXRlVGltZU9iamVjdCwgcHJvZ3JhbVRpbWUpO1xuXG4gIGlmIChtYXRjaGVkU2VnbWVudC50eXBlID09PSAnZXN0aW1hdGUnKSB7XG4gICAgLy8gd2UndmUgcnVuIG91dCBvZiByZXRyaWVzXG4gICAgaWYgKHJldHJ5Q291bnQgPT09IDApIHtcbiAgICAgIHJldHVybiBjYWxsYmFjayh7XG4gICAgICAgIG1lc3NhZ2U6IHByb2dyYW1UaW1lICsgJyBpcyBub3QgYnVmZmVyZWQgeWV0LiBUcnkgYWdhaW4nXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBzZWVrVG8obWF0Y2hlZFNlZ21lbnQuZXN0aW1hdGVkU3RhcnQgKyBtZWRpYU9mZnNldCk7XG4gICAgdGVjaC5vbmUoJ3NlZWtlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlZWtUb1Byb2dyYW1UaW1lKHtcbiAgICAgICAgcHJvZ3JhbVRpbWU6IHByb2dyYW1UaW1lLFxuICAgICAgICBwbGF5bGlzdDogcGxheWxpc3QsXG4gICAgICAgIHJldHJ5Q291bnQ6IHJldHJ5Q291bnQgLSAxLFxuICAgICAgICBzZWVrVG86IHNlZWtUbyxcbiAgICAgICAgcGF1c2VBZnRlclNlZWs6IHBhdXNlQWZ0ZXJTZWVrLFxuICAgICAgICB0ZWNoOiB0ZWNoLFxuICAgICAgICBjYWxsYmFjazogY2FsbGJhY2tcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybjtcbiAgfSAvLyBTaW5jZSB0aGUgc2VnbWVudC5zdGFydCB2YWx1ZSBpcyBkZXRlcm1pbmVkIGZyb20gdGhlIGJ1ZmZlcmVkIGVuZCBvciBlbmRpbmcgdGltZVxuICAvLyBvZiB0aGUgcHJpb3Igc2VnbWVudCwgdGhlIHNlZWtUb1RpbWUgZG9lc24ndCBuZWVkIHRvIGFjY291bnQgZm9yIGFueSB0cmFuc211eGVyXG4gIC8vIG1vZGlmaWNhdGlvbnMuXG5cblxuICB2YXIgc2Vla1RvVGltZSA9IHNlZ21lbnQuc3RhcnQgKyBtZWRpYU9mZnNldDtcblxuICB2YXIgc2Vla2VkQ2FsbGJhY2sgPSBmdW5jdGlvbiBzZWVrZWRDYWxsYmFjaygpIHtcbiAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgdGVjaC5jdXJyZW50VGltZSgpKTtcbiAgfTsgLy8gbGlzdGVuIGZvciBzZWVrZWQgZXZlbnRcblxuXG4gIHRlY2gub25lKCdzZWVrZWQnLCBzZWVrZWRDYWxsYmFjayk7IC8vIHBhdXNlIGJlZm9yZSBzZWVraW5nIGFzIHZpZGVvLmpzIHdpbGwgcmVzdG9yZSB0aGlzIHN0YXRlXG5cbiAgaWYgKHBhdXNlQWZ0ZXJTZWVrKSB7XG4gICAgdGVjaC5wYXVzZSgpO1xuICB9XG5cbiAgc2Vla1RvKHNlZWtUb1RpbWUpO1xufTtcbi8qKlxuICogcmFuZ2VzXG4gKlxuICogVXRpbGl0aWVzIGZvciB3b3JraW5nIHdpdGggVGltZVJhbmdlcy5cbiAqXG4gKi9cbi8vIEZ1ZGdlIGZhY3RvciB0byBhY2NvdW50IGZvciBUaW1lUmFuZ2VzIHJvdW5kaW5nXG5cblxudmFyIFRJTUVfRlVER0VfRkFDVE9SID0gMSAvIDMwOyAvLyBDb21wYXJpc29ucyBiZXR3ZWVuIHRpbWUgdmFsdWVzIHN1Y2ggYXMgY3VycmVudCB0aW1lIGFuZCB0aGUgZW5kIG9mIHRoZSBidWZmZXJlZCByYW5nZVxuLy8gY2FuIGJlIG1pc2xlYWRpbmcgYmVjYXVzZSBvZiBwcmVjaXNpb24gZGlmZmVyZW5jZXMgb3Igd2hlbiB0aGUgY3VycmVudCBtZWRpYSBoYXMgcG9vcmx5XG4vLyBhbGlnbmVkIGF1ZGlvIGFuZCB2aWRlbywgd2hpY2ggY2FuIGNhdXNlIHZhbHVlcyB0byBiZSBzbGlnaHRseSBvZmYgZnJvbSB3aGF0IHlvdSB3b3VsZFxuLy8gZXhwZWN0LiBUaGlzIHZhbHVlIGlzIHdoYXQgd2UgY29uc2lkZXIgdG8gYmUgc2FmZSB0byB1c2UgaW4gc3VjaCBjb21wYXJpc29ucyB0byBhY2NvdW50XG4vLyBmb3IgdGhlc2Ugc2NlbmFyaW9zLlxuXG52YXIgU0FGRV9USU1FX0RFTFRBID0gVElNRV9GVURHRV9GQUNUT1IgKiAzO1xuXG52YXIgZmlsdGVyUmFuZ2VzID0gZnVuY3Rpb24gZmlsdGVyUmFuZ2VzKHRpbWVSYW5nZXMsIHByZWRpY2F0ZSkge1xuICB2YXIgcmVzdWx0cyA9IFtdO1xuICB2YXIgaSA9IHZvaWQgMDtcblxuICBpZiAodGltZVJhbmdlcyAmJiB0aW1lUmFuZ2VzLmxlbmd0aCkge1xuICAgIC8vIFNlYXJjaCBmb3IgcmFuZ2VzIHRoYXQgbWF0Y2ggdGhlIHByZWRpY2F0ZVxuICAgIGZvciAoaSA9IDA7IGkgPCB0aW1lUmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocHJlZGljYXRlKHRpbWVSYW5nZXMuc3RhcnQoaSksIHRpbWVSYW5nZXMuZW5kKGkpKSkge1xuICAgICAgICByZXN1bHRzLnB1c2goW3RpbWVSYW5nZXMuc3RhcnQoaSksIHRpbWVSYW5nZXMuZW5kKGkpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZpZGVvanMkMS5jcmVhdGVUaW1lUmFuZ2VzKHJlc3VsdHMpO1xufTtcbi8qKlxuICogQXR0ZW1wdHMgdG8gZmluZCB0aGUgYnVmZmVyZWQgVGltZVJhbmdlIHRoYXQgY29udGFpbnMgdGhlIHNwZWNpZmllZFxuICogdGltZS5cbiAqIEBwYXJhbSB7VGltZVJhbmdlc30gYnVmZmVyZWQgLSB0aGUgVGltZVJhbmdlcyBvYmplY3QgdG8gcXVlcnlcbiAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lICAtIHRoZSB0aW1lIHRvIGZpbHRlciBvbi5cbiAqIEByZXR1cm5zIHtUaW1lUmFuZ2VzfSBhIG5ldyBUaW1lUmFuZ2VzIG9iamVjdFxuICovXG5cblxudmFyIGZpbmRSYW5nZSA9IGZ1bmN0aW9uIGZpbmRSYW5nZShidWZmZXJlZCwgdGltZSkge1xuICByZXR1cm4gZmlsdGVyUmFuZ2VzKGJ1ZmZlcmVkLCBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBzdGFydCAtIFRJTUVfRlVER0VfRkFDVE9SIDw9IHRpbWUgJiYgZW5kICsgVElNRV9GVURHRV9GQUNUT1IgPj0gdGltZTtcbiAgfSk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBUaW1lUmFuZ2VzIHRoYXQgYmVnaW4gbGF0ZXIgdGhhbiB0aGUgc3BlY2lmaWVkIHRpbWUuXG4gKiBAcGFyYW0ge1RpbWVSYW5nZXN9IHRpbWVSYW5nZXMgLSB0aGUgVGltZVJhbmdlcyBvYmplY3QgdG8gcXVlcnlcbiAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIC0gdGhlIHRpbWUgdG8gZmlsdGVyIG9uLlxuICogQHJldHVybnMge1RpbWVSYW5nZXN9IGEgbmV3IFRpbWVSYW5nZXMgb2JqZWN0LlxuICovXG5cblxudmFyIGZpbmROZXh0UmFuZ2UgPSBmdW5jdGlvbiBmaW5kTmV4dFJhbmdlKHRpbWVSYW5nZXMsIHRpbWUpIHtcbiAgcmV0dXJuIGZpbHRlclJhbmdlcyh0aW1lUmFuZ2VzLCBmdW5jdGlvbiAoc3RhcnQpIHtcbiAgICByZXR1cm4gc3RhcnQgLSBUSU1FX0ZVREdFX0ZBQ1RPUiA+PSB0aW1lO1xuICB9KTtcbn07XG4vKipcbiAqIFJldHVybnMgZ2FwcyB3aXRoaW4gYSBsaXN0IG9mIFRpbWVSYW5nZXNcbiAqIEBwYXJhbSB7VGltZVJhbmdlc30gYnVmZmVyZWQgLSB0aGUgVGltZVJhbmdlcyBvYmplY3RcbiAqIEByZXR1cm4ge1RpbWVSYW5nZXN9IGEgVGltZVJhbmdlcyBvYmplY3Qgb2YgZ2Fwc1xuICovXG5cblxudmFyIGZpbmRHYXBzID0gZnVuY3Rpb24gZmluZEdhcHMoYnVmZmVyZWQpIHtcbiAgaWYgKGJ1ZmZlcmVkLmxlbmd0aCA8IDIpIHtcbiAgICByZXR1cm4gdmlkZW9qcyQxLmNyZWF0ZVRpbWVSYW5nZXMoKTtcbiAgfVxuXG4gIHZhciByYW5nZXMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMTsgaSA8IGJ1ZmZlcmVkLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHN0YXJ0ID0gYnVmZmVyZWQuZW5kKGkgLSAxKTtcbiAgICB2YXIgZW5kID0gYnVmZmVyZWQuc3RhcnQoaSk7XG4gICAgcmFuZ2VzLnB1c2goW3N0YXJ0LCBlbmRdKTtcbiAgfVxuXG4gIHJldHVybiB2aWRlb2pzJDEuY3JlYXRlVGltZVJhbmdlcyhyYW5nZXMpO1xufTtcbi8qKlxuICogR2V0cyBhIGh1bWFuIHJlYWRhYmxlIHN0cmluZyBmb3IgYSBUaW1lUmFuZ2VcbiAqXG4gKiBAcGFyYW0ge1RpbWVSYW5nZX0gcmFuZ2VcbiAqIEByZXR1cm5zIHtTdHJpbmd9IGEgaHVtYW4gcmVhZGFibGUgc3RyaW5nXG4gKi9cblxuXG52YXIgcHJpbnRhYmxlUmFuZ2UgPSBmdW5jdGlvbiBwcmludGFibGVSYW5nZShyYW5nZSkge1xuICB2YXIgc3RyQXJyID0gW107XG5cbiAgaWYgKCFyYW5nZSB8fCAhcmFuZ2UubGVuZ3RoKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZS5sZW5ndGg7IGkrKykge1xuICAgIHN0ckFyci5wdXNoKHJhbmdlLnN0YXJ0KGkpICsgJyA9PiAnICsgcmFuZ2UuZW5kKGkpKTtcbiAgfVxuXG4gIHJldHVybiBzdHJBcnIuam9pbignLCAnKTtcbn07XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGFtb3VudCBvZiB0aW1lIGxlZnQgaW4gc2Vjb25kcyB1bnRpbCB0aGUgcGxheWVyIGhpdHMgdGhlIGVuZCBvZiB0aGVcbiAqIGJ1ZmZlciBhbmQgY2F1c2VzIGEgcmVidWZmZXJcbiAqXG4gKiBAcGFyYW0ge1RpbWVSYW5nZX0gYnVmZmVyZWRcbiAqICAgICAgICBUaGUgc3RhdGUgb2YgdGhlIGJ1ZmZlclxuICogQHBhcmFtIHtOdW1uYmVyfSBjdXJyZW50VGltZVxuICogICAgICAgIFRoZSBjdXJyZW50IHRpbWUgb2YgdGhlIHBsYXllclxuICogQHBhcmFtIHtOdW1iZXJ9IHBsYXliYWNrUmF0ZVxuICogICAgICAgIFRoZSBjdXJyZW50IHBsYXliYWNrIHJhdGUgb2YgdGhlIHBsYXllci4gRGVmYXVsdHMgdG8gMS5cbiAqIEByZXR1cm4ge051bWJlcn1cbiAqICAgICAgICAgVGltZSB1bnRpbCB0aGUgcGxheWVyIGhhcyB0byBzdGFydCByZWJ1ZmZlcmluZyBpbiBzZWNvbmRzLlxuICogQGZ1bmN0aW9uIHRpbWVVbnRpbFJlYnVmZmVyXG4gKi9cblxuXG52YXIgdGltZVVudGlsUmVidWZmZXIgPSBmdW5jdGlvbiB0aW1lVW50aWxSZWJ1ZmZlcihidWZmZXJlZCwgY3VycmVudFRpbWUpIHtcbiAgdmFyIHBsYXliYWNrUmF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogMTtcbiAgdmFyIGJ1ZmZlcmVkRW5kID0gYnVmZmVyZWQubGVuZ3RoID8gYnVmZmVyZWQuZW5kKGJ1ZmZlcmVkLmxlbmd0aCAtIDEpIDogMDtcbiAgcmV0dXJuIChidWZmZXJlZEVuZCAtIGN1cnJlbnRUaW1lKSAvIHBsYXliYWNrUmF0ZTtcbn07XG4vKipcbiAqIENvbnZlcnRzIGEgVGltZVJhbmdlcyBvYmplY3QgaW50byBhbiBhcnJheSByZXByZXNlbnRhdGlvblxuICogQHBhcmFtIHtUaW1lUmFuZ2VzfSB0aW1lUmFuZ2VzXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cblxuXG52YXIgdGltZVJhbmdlc1RvQXJyYXkgPSBmdW5jdGlvbiB0aW1lUmFuZ2VzVG9BcnJheSh0aW1lUmFuZ2VzKSB7XG4gIHZhciB0aW1lUmFuZ2VzTGlzdCA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGltZVJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgIHRpbWVSYW5nZXNMaXN0LnB1c2goe1xuICAgICAgc3RhcnQ6IHRpbWVSYW5nZXMuc3RhcnQoaSksXG4gICAgICBlbmQ6IHRpbWVSYW5nZXMuZW5kKGkpXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gdGltZVJhbmdlc0xpc3Q7XG59O1xuLyoqXG4gKiBAZmlsZSBjcmVhdGUtdGV4dC10cmFja3MtaWYtbmVjZXNzYXJ5LmpzXG4gKi9cblxuLyoqXG4gKiBDcmVhdGUgdGV4dCB0cmFja3Mgb24gdmlkZW8uanMgaWYgdGhleSBleGlzdCBvbiBhIHNlZ21lbnQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZUJ1ZmZlciB0aGUgVlNCIG9yIEZTQlxuICogQHBhcmFtIHtPYmplY3R9IG1lZGlhU291cmNlIHRoZSBIVE1MIG1lZGlhIHNvdXJjZVxuICogQHBhcmFtIHtPYmplY3R9IHNlZ21lbnQgdGhlIHNlZ21lbnQgdGhhdCBtYXkgY29udGFpbiB0aGUgdGV4dCB0cmFja1xuICogQHByaXZhdGVcbiAqL1xuXG5cbnZhciBjcmVhdGVUZXh0VHJhY2tzSWZOZWNlc3NhcnkgPSBmdW5jdGlvbiBjcmVhdGVUZXh0VHJhY2tzSWZOZWNlc3Nhcnkoc291cmNlQnVmZmVyLCBtZWRpYVNvdXJjZSwgc2VnbWVudCkge1xuICB2YXIgcGxheWVyID0gbWVkaWFTb3VyY2UucGxheWVyXzsgLy8gY3JlYXRlIGFuIGluLWJhbmQgY2FwdGlvbiB0cmFjayBpZiBvbmUgaXMgcHJlc2VudCBpbiB0aGUgc2VnbWVudFxuXG4gIGlmIChzZWdtZW50LmNhcHRpb25zICYmIHNlZ21lbnQuY2FwdGlvbnMubGVuZ3RoKSB7XG4gICAgaWYgKCFzb3VyY2VCdWZmZXIuaW5iYW5kVGV4dFRyYWNrc18pIHtcbiAgICAgIHNvdXJjZUJ1ZmZlci5pbmJhbmRUZXh0VHJhY2tzXyA9IHt9O1xuICAgIH1cblxuICAgIGZvciAodmFyIHRyYWNrSWQgaW4gc2VnbWVudC5jYXB0aW9uU3RyZWFtcykge1xuICAgICAgaWYgKCFzb3VyY2VCdWZmZXIuaW5iYW5kVGV4dFRyYWNrc19bdHJhY2tJZF0pIHtcbiAgICAgICAgcGxheWVyLnRlY2hfLnRyaWdnZXIoe1xuICAgICAgICAgIHR5cGU6ICd1c2FnZScsXG4gICAgICAgICAgbmFtZTogJ2hscy02MDgnXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgdHJhY2sgPSBwbGF5ZXIudGV4dFRyYWNrcygpLmdldFRyYWNrQnlJZCh0cmFja0lkKTtcblxuICAgICAgICBpZiAodHJhY2spIHtcbiAgICAgICAgICAvLyBSZXN1c2UgYW4gZXhpc3RpbmcgdHJhY2sgd2l0aCBhIENDIyBpZCBiZWNhdXNlIHRoaXMgd2FzXG4gICAgICAgICAgLy8gdmVyeSBsaWtlbHkgY3JlYXRlZCBieSB2aWRlb2pzLWNvbnRyaWItaGxzIGZyb20gaW5mb3JtYXRpb25cbiAgICAgICAgICAvLyBpbiB0aGUgbTN1OCBmb3IgdXMgdG8gdXNlXG4gICAgICAgICAgc291cmNlQnVmZmVyLmluYmFuZFRleHRUcmFja3NfW3RyYWNrSWRdID0gdHJhY2s7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gT3RoZXJ3aXNlLCBjcmVhdGUgYSB0cmFjayB3aXRoIHRoZSBkZWZhdWx0IGBDQyNgIGxhYmVsIGFuZFxuICAgICAgICAgIC8vIHdpdGhvdXQgYSBsYW5ndWFnZVxuICAgICAgICAgIHNvdXJjZUJ1ZmZlci5pbmJhbmRUZXh0VHJhY2tzX1t0cmFja0lkXSA9IHBsYXllci5hZGRSZW1vdGVUZXh0VHJhY2soe1xuICAgICAgICAgICAga2luZDogJ2NhcHRpb25zJyxcbiAgICAgICAgICAgIGlkOiB0cmFja0lkLFxuICAgICAgICAgICAgbGFiZWw6IHRyYWNrSWRcbiAgICAgICAgICB9LCBmYWxzZSkudHJhY2s7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoc2VnbWVudC5tZXRhZGF0YSAmJiBzZWdtZW50Lm1ldGFkYXRhLmxlbmd0aCAmJiAhc291cmNlQnVmZmVyLm1ldGFkYXRhVHJhY2tfKSB7XG4gICAgc291cmNlQnVmZmVyLm1ldGFkYXRhVHJhY2tfID0gcGxheWVyLmFkZFJlbW90ZVRleHRUcmFjayh7XG4gICAgICBraW5kOiAnbWV0YWRhdGEnLFxuICAgICAgbGFiZWw6ICdUaW1lZCBNZXRhZGF0YSdcbiAgICB9LCBmYWxzZSkudHJhY2s7XG4gICAgc291cmNlQnVmZmVyLm1ldGFkYXRhVHJhY2tfLmluQmFuZE1ldGFkYXRhVHJhY2tEaXNwYXRjaFR5cGUgPSBzZWdtZW50Lm1ldGFkYXRhLmRpc3BhdGNoVHlwZTtcbiAgfVxufTtcbi8qKlxuICogQGZpbGUgcmVtb3ZlLWN1ZXMtZnJvbS10cmFjay5qc1xuICovXG5cbi8qKlxuICogUmVtb3ZlIGN1ZXMgZnJvbSBhIHRyYWNrIG9uIHZpZGVvLmpzLlxuICpcbiAqIEBwYXJhbSB7RG91YmxlfSBzdGFydCBzdGFydCBvZiB3aGVyZSB3ZSBzaG91bGQgcmVtb3ZlIHRoZSBjdWVcbiAqIEBwYXJhbSB7RG91YmxlfSBlbmQgZW5kIG9mIHdoZXJlIHRoZSB3ZSBzaG91bGQgcmVtb3ZlIHRoZSBjdWVcbiAqIEBwYXJhbSB7T2JqZWN0fSB0cmFjayB0aGUgdGV4dCB0cmFjayB0byByZW1vdmUgdGhlIGN1ZXMgZnJvbVxuICogQHByaXZhdGVcbiAqL1xuXG5cbnZhciByZW1vdmVDdWVzRnJvbVRyYWNrID0gZnVuY3Rpb24gcmVtb3ZlQ3Vlc0Zyb21UcmFjayhzdGFydCwgZW5kLCB0cmFjaykge1xuICB2YXIgaSA9IHZvaWQgMDtcbiAgdmFyIGN1ZSA9IHZvaWQgMDtcblxuICBpZiAoIXRyYWNrKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCF0cmFjay5jdWVzKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaSA9IHRyYWNrLmN1ZXMubGVuZ3RoO1xuXG4gIHdoaWxlIChpLS0pIHtcbiAgICBjdWUgPSB0cmFjay5jdWVzW2ldOyAvLyBSZW1vdmUgYW55IG92ZXJsYXBwaW5nIGN1ZVxuXG4gICAgaWYgKGN1ZS5zdGFydFRpbWUgPD0gZW5kICYmIGN1ZS5lbmRUaW1lID49IHN0YXJ0KSB7XG4gICAgICB0cmFjay5yZW1vdmVDdWUoY3VlKTtcbiAgICB9XG4gIH1cbn07XG4vKipcbiAqIEBmaWxlIGFkZC10ZXh0LXRyYWNrLWRhdGEuanNcbiAqL1xuXG4vKipcbiAqIERlZmluZSBwcm9wZXJ0aWVzIG9uIGEgY3VlIGZvciBiYWNrd2FyZHMgY29tcGF0YWJpbGl0eSxcbiAqIGJ1dCB3YXJuIHRoZSB1c2VyIHRoYXQgdGhlIHdheSB0aGF0IHRoZXkgYXJlIHVzaW5nIGl0XG4gKiBpcyBkZXByaWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgYXQgYSBsYXRlciBkYXRlLlxuICpcbiAqIEBwYXJhbSB7Q3VlfSBjdWUgdGhlIGN1ZSB0byBhZGQgdGhlIHByb3BlcnRpZXMgb25cbiAqIEBwcml2YXRlXG4gKi9cblxuXG52YXIgZGVwcmVjYXRlT2xkQ3VlID0gZnVuY3Rpb24gZGVwcmVjYXRlT2xkQ3VlKGN1ZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhjdWUuZnJhbWUsIHtcbiAgICBpZDoge1xuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHZpZGVvanMkMS5sb2cud2FybignY3VlLmZyYW1lLmlkIGlzIGRlcHJlY2F0ZWQuIFVzZSBjdWUudmFsdWUua2V5IGluc3RlYWQuJyk7XG4gICAgICAgIHJldHVybiBjdWUudmFsdWUua2V5O1xuICAgICAgfVxuICAgIH0sXG4gICAgdmFsdWU6IHtcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICB2aWRlb2pzJDEubG9nLndhcm4oJ2N1ZS5mcmFtZS52YWx1ZSBpcyBkZXByZWNhdGVkLiBVc2UgY3VlLnZhbHVlLmRhdGEgaW5zdGVhZC4nKTtcbiAgICAgICAgcmV0dXJuIGN1ZS52YWx1ZS5kYXRhO1xuICAgICAgfVxuICAgIH0sXG4gICAgcHJpdmF0ZURhdGE6IHtcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICB2aWRlb2pzJDEubG9nLndhcm4oJ2N1ZS5mcmFtZS5wcml2YXRlRGF0YSBpcyBkZXByZWNhdGVkLiBVc2UgY3VlLnZhbHVlLmRhdGEgaW5zdGVhZC4nKTtcbiAgICAgICAgcmV0dXJuIGN1ZS52YWx1ZS5kYXRhO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuXG52YXIgZHVyYXRpb25PZlZpZGVvID0gZnVuY3Rpb24gZHVyYXRpb25PZlZpZGVvKGR1cmF0aW9uKSB7XG4gIHZhciBkdXIgPSB2b2lkIDA7XG5cbiAgaWYgKGlzTmFOKGR1cmF0aW9uKSB8fCBNYXRoLmFicyhkdXJhdGlvbikgPT09IEluZmluaXR5KSB7XG4gICAgZHVyID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgfSBlbHNlIHtcbiAgICBkdXIgPSBkdXJhdGlvbjtcbiAgfVxuXG4gIHJldHVybiBkdXI7XG59O1xuLyoqXG4gKiBBZGQgdGV4dCB0cmFjayBkYXRhIHRvIGEgc291cmNlIGhhbmRsZXIgZ2l2ZW4gdGhlIGNhcHRpb25zIGFuZFxuICogbWV0YWRhdGEgZnJvbSB0aGUgYnVmZmVyLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2VIYW5kbGVyIHRoZSB2aXJ0dWFsIHNvdXJjZSBidWZmZXJcbiAqIEBwYXJhbSB7QXJyYXl9IGNhcHRpb25BcnJheSBhbiBhcnJheSBvZiBjYXB0aW9uIGRhdGFcbiAqIEBwYXJhbSB7QXJyYXl9IG1ldGFkYXRhQXJyYXkgYW4gYXJyYXkgb2YgbWV0YSBkYXRhXG4gKiBAcHJpdmF0ZVxuICovXG5cblxudmFyIGFkZFRleHRUcmFja0RhdGEgPSBmdW5jdGlvbiBhZGRUZXh0VHJhY2tEYXRhKHNvdXJjZUhhbmRsZXIsIGNhcHRpb25BcnJheSwgbWV0YWRhdGFBcnJheSkge1xuICB2YXIgQ3VlID0gd2luZG93JDEuV2ViS2l0RGF0YUN1ZSB8fCB3aW5kb3ckMS5WVFRDdWU7XG5cbiAgaWYgKGNhcHRpb25BcnJheSkge1xuICAgIGNhcHRpb25BcnJheS5mb3JFYWNoKGZ1bmN0aW9uIChjYXB0aW9uKSB7XG4gICAgICB2YXIgdHJhY2sgPSBjYXB0aW9uLnN0cmVhbTtcbiAgICAgIHRoaXMuaW5iYW5kVGV4dFRyYWNrc19bdHJhY2tdLmFkZEN1ZShuZXcgQ3VlKGNhcHRpb24uc3RhcnRUaW1lICsgdGhpcy50aW1lc3RhbXBPZmZzZXQsIGNhcHRpb24uZW5kVGltZSArIHRoaXMudGltZXN0YW1wT2Zmc2V0LCBjYXB0aW9uLnRleHQpKTtcbiAgICB9LCBzb3VyY2VIYW5kbGVyKTtcbiAgfVxuXG4gIGlmIChtZXRhZGF0YUFycmF5KSB7XG4gICAgdmFyIHZpZGVvRHVyYXRpb24gPSBkdXJhdGlvbk9mVmlkZW8oc291cmNlSGFuZGxlci5tZWRpYVNvdXJjZV8uZHVyYXRpb24pO1xuICAgIG1ldGFkYXRhQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAobWV0YWRhdGEpIHtcbiAgICAgIHZhciB0aW1lID0gbWV0YWRhdGEuY3VlVGltZSArIHRoaXMudGltZXN0YW1wT2Zmc2V0OyAvLyBpZiB0aW1lIGlzbid0IGEgZmluaXRlIG51bWJlciBiZXR3ZWVuIDAgYW5kIEluZmluaXR5LCBsaWtlIE5hTixcbiAgICAgIC8vIGlnbm9yZSB0aGlzIGJpdCBvZiBtZXRhZGF0YS5cbiAgICAgIC8vIFRoaXMgbGlrZWx5IG9jY3VycyB3aGVuIHlvdSBoYXZlIGFuIG5vbi10aW1lZCBJRDMgdGFnIGxpa2UgVElUMixcbiAgICAgIC8vIHdoaWNoIGlzIHRoZSBcIlRpdGxlL1NvbmduYW1lL0NvbnRlbnQgZGVzY3JpcHRpb25cIiBmcmFtZVxuXG4gICAgICBpZiAodHlwZW9mIHRpbWUgIT09ICdudW1iZXInIHx8IHdpbmRvdyQxLmlzTmFOKHRpbWUpIHx8IHRpbWUgPCAwIHx8ICEodGltZSA8IEluZmluaXR5KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1ldGFkYXRhLmZyYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChmcmFtZSkge1xuICAgICAgICB2YXIgY3VlID0gbmV3IEN1ZSh0aW1lLCB0aW1lLCBmcmFtZS52YWx1ZSB8fCBmcmFtZS51cmwgfHwgZnJhbWUuZGF0YSB8fCAnJyk7XG4gICAgICAgIGN1ZS5mcmFtZSA9IGZyYW1lO1xuICAgICAgICBjdWUudmFsdWUgPSBmcmFtZTtcbiAgICAgICAgZGVwcmVjYXRlT2xkQ3VlKGN1ZSk7XG4gICAgICAgIHRoaXMubWV0YWRhdGFUcmFja18uYWRkQ3VlKGN1ZSk7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9LCBzb3VyY2VIYW5kbGVyKTsgLy8gVXBkYXRpbmcgdGhlIG1ldGFkZXRhIGN1ZXMgc28gdGhhdFxuICAgIC8vIHRoZSBlbmRUaW1lIG9mIGVhY2ggY3VlIGlzIHRoZSBzdGFydFRpbWUgb2YgdGhlIG5leHQgY3VlXG4gICAgLy8gdGhlIGVuZFRpbWUgb2YgbGFzdCBjdWUgaXMgdGhlIGR1cmF0aW9uIG9mIHRoZSB2aWRlb1xuXG4gICAgaWYgKHNvdXJjZUhhbmRsZXIubWV0YWRhdGFUcmFja18gJiYgc291cmNlSGFuZGxlci5tZXRhZGF0YVRyYWNrXy5jdWVzICYmIHNvdXJjZUhhbmRsZXIubWV0YWRhdGFUcmFja18uY3Vlcy5sZW5ndGgpIHtcbiAgICAgIHZhciBjdWVzID0gc291cmNlSGFuZGxlci5tZXRhZGF0YVRyYWNrXy5jdWVzO1xuICAgICAgdmFyIGN1ZXNBcnJheSA9IFtdOyAvLyBDcmVhdGUgYSBjb3B5IG9mIHRoZSBUZXh0VHJhY2tDdWVMaXN0Li4uXG4gICAgICAvLyAuLi5kaXNyZWdhcmRpbmcgY3VlcyB3aXRoIGEgZmFsc2V5IHZhbHVlXG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3Vlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoY3Vlc1tpXSkge1xuICAgICAgICAgIGN1ZXNBcnJheS5wdXNoKGN1ZXNbaV0pO1xuICAgICAgICB9XG4gICAgICB9IC8vIEdyb3VwIGN1ZXMgYnkgdGhlaXIgc3RhcnRUaW1lIHZhbHVlXG5cblxuICAgICAgdmFyIGN1ZXNHcm91cGVkQnlTdGFydFRpbWUgPSBjdWVzQXJyYXkucmVkdWNlKGZ1bmN0aW9uIChvYmosIGN1ZSkge1xuICAgICAgICB2YXIgdGltZVNsb3QgPSBvYmpbY3VlLnN0YXJ0VGltZV0gfHwgW107XG4gICAgICAgIHRpbWVTbG90LnB1c2goY3VlKTtcbiAgICAgICAgb2JqW2N1ZS5zdGFydFRpbWVdID0gdGltZVNsb3Q7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgICB9LCB7fSk7IC8vIFNvcnQgc3RhcnRUaW1lcyBieSBhc2NlbmRpbmcgb3JkZXJcblxuICAgICAgdmFyIHNvcnRlZFN0YXJ0VGltZXMgPSBPYmplY3Qua2V5cyhjdWVzR3JvdXBlZEJ5U3RhcnRUaW1lKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBOdW1iZXIoYSkgLSBOdW1iZXIoYik7XG4gICAgICB9KTsgLy8gTWFwIGVhY2ggY3VlIGdyb3VwJ3MgZW5kVGltZSB0byB0aGUgbmV4dCBncm91cCdzIHN0YXJ0VGltZVxuXG4gICAgICBzb3J0ZWRTdGFydFRpbWVzLmZvckVhY2goZnVuY3Rpb24gKHN0YXJ0VGltZSwgaWR4KSB7XG4gICAgICAgIHZhciBjdWVHcm91cCA9IGN1ZXNHcm91cGVkQnlTdGFydFRpbWVbc3RhcnRUaW1lXTtcbiAgICAgICAgdmFyIG5leHRUaW1lID0gTnVtYmVyKHNvcnRlZFN0YXJ0VGltZXNbaWR4ICsgMV0pIHx8IHZpZGVvRHVyYXRpb247IC8vIE1hcCBlYWNoIGN1ZSdzIGVuZFRpbWUgdGhlIG5leHQgZ3JvdXAncyBzdGFydFRpbWVcblxuICAgICAgICBjdWVHcm91cC5mb3JFYWNoKGZ1bmN0aW9uIChjdWUpIHtcbiAgICAgICAgICBjdWUuZW5kVGltZSA9IG5leHRUaW1lO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHdpbiA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDoge30sXG4gICAgVEFSR0VUID0gdHlwZW9mIFN5bWJvbCA9PT0gJ3VuZGVmaW5lZCcgPyAnX190YXJnZXQnIDogU3ltYm9sKCksXG4gICAgU0NSSVBUX1RZUEUgPSAnYXBwbGljYXRpb24vamF2YXNjcmlwdCcsXG4gICAgQmxvYkJ1aWxkZXIgPSB3aW4uQmxvYkJ1aWxkZXIgfHwgd2luLldlYktpdEJsb2JCdWlsZGVyIHx8IHdpbi5Nb3pCbG9iQnVpbGRlciB8fCB3aW4uTVNCbG9iQnVpbGRlcixcbiAgICBVUkwgPSB3aW4uVVJMIHx8IHdpbi53ZWJraXRVUkwgfHwgVVJMICYmIFVSTC5tc1VSTCxcbiAgICBXb3JrZXIgPSB3aW4uV29ya2VyO1xuLyoqXG4gKiBSZXR1cm5zIGEgd3JhcHBlciBhcm91bmQgV2ViIFdvcmtlciBjb2RlIHRoYXQgaXMgY29uc3RydWN0aWJsZS5cbiAqXG4gKiBAZnVuY3Rpb24gc2hpbVdvcmtlclxuICpcbiAqIEBwYXJhbSB7IFN0cmluZyB9ICAgIGZpbGVuYW1lICAgIFRoZSBuYW1lIG9mIHRoZSBmaWxlXG4gKiBAcGFyYW0geyBGdW5jdGlvbiB9ICBmbiAgICAgICAgICBGdW5jdGlvbiB3cmFwcGluZyB0aGUgY29kZSBvZiB0aGUgd29ya2VyXG4gKi9cblxuZnVuY3Rpb24gc2hpbVdvcmtlcihmaWxlbmFtZSwgZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIFNoaW1Xb3JrZXIoZm9yY2VGYWxsYmFjaykge1xuICAgIHZhciBvID0gdGhpcztcblxuICAgIGlmICghZm4pIHtcbiAgICAgIHJldHVybiBuZXcgV29ya2VyKGZpbGVuYW1lKTtcbiAgICB9IGVsc2UgaWYgKFdvcmtlciAmJiAhZm9yY2VGYWxsYmFjaykge1xuICAgICAgLy8gQ29udmVydCB0aGUgZnVuY3Rpb24ncyBpbm5lciBjb2RlIHRvIGEgc3RyaW5nIHRvIGNvbnN0cnVjdCB0aGUgd29ya2VyXG4gICAgICB2YXIgc291cmNlID0gZm4udG9TdHJpbmcoKS5yZXBsYWNlKC9eZnVuY3Rpb24uKz97LywgJycpLnNsaWNlKDAsIC0xKSxcbiAgICAgICAgICBvYmpVUkwgPSBjcmVhdGVTb3VyY2VPYmplY3Qoc291cmNlKTtcbiAgICAgIHRoaXNbVEFSR0VUXSA9IG5ldyBXb3JrZXIob2JqVVJMKTtcbiAgICAgIHdyYXBUZXJtaW5hdGUodGhpc1tUQVJHRVRdLCBvYmpVUkwpO1xuICAgICAgcmV0dXJuIHRoaXNbVEFSR0VUXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHNlbGZTaGltID0ge1xuICAgICAgICBwb3N0TWVzc2FnZTogZnVuY3Rpb24gcG9zdE1lc3NhZ2UobSkge1xuICAgICAgICAgIGlmIChvLm9ubWVzc2FnZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIG8ub25tZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBtLFxuICAgICAgICAgICAgICAgIHRhcmdldDogc2VsZlNoaW1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBmbi5jYWxsKHNlbGZTaGltKTtcblxuICAgICAgdGhpcy5wb3N0TWVzc2FnZSA9IGZ1bmN0aW9uIChtKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNlbGZTaGltLm9ubWVzc2FnZSh7XG4gICAgICAgICAgICBkYXRhOiBtLFxuICAgICAgICAgICAgdGFyZ2V0OiBvXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5pc1RoaXNUaHJlYWQgPSB0cnVlO1xuICAgIH1cbiAgfTtcbn0gLy8gVGVzdCBXb3JrZXIgY2FwYWJpbGl0aWVzXG5cblxuaWYgKFdvcmtlcikge1xuICB2YXIgdGVzdFdvcmtlcixcbiAgICAgIG9ialVSTCA9IGNyZWF0ZVNvdXJjZU9iamVjdCgnc2VsZi5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7fScpLFxuICAgICAgdGVzdEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMSk7XG5cbiAgdHJ5IHtcbiAgICB0ZXN0V29ya2VyID0gbmV3IFdvcmtlcihvYmpVUkwpOyAvLyBOYXRpdmUgYnJvd3NlciBvbiBzb21lIFNhbXN1bmcgZGV2aWNlcyB0aHJvd3MgZm9yIHRyYW5zZmVyYWJsZXMsIGxldCdzIGRldGVjdCBpdFxuXG4gICAgdGVzdFdvcmtlci5wb3N0TWVzc2FnZSh0ZXN0QXJyYXksIFt0ZXN0QXJyYXkuYnVmZmVyXSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBXb3JrZXIgPSBudWxsO1xuICB9IGZpbmFsbHkge1xuICAgIFVSTC5yZXZva2VPYmplY3RVUkwob2JqVVJMKTtcblxuICAgIGlmICh0ZXN0V29ya2VyKSB7XG4gICAgICB0ZXN0V29ya2VyLnRlcm1pbmF0ZSgpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTb3VyY2VPYmplY3Qoc3RyKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW3N0cl0sIHtcbiAgICAgIHR5cGU6IFNDUklQVF9UWVBFXG4gICAgfSkpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdmFyIGJsb2IgPSBuZXcgQmxvYkJ1aWxkZXIoKTtcbiAgICBibG9iLmFwcGVuZChzdHIpO1xuICAgIHJldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IuZ2V0QmxvYih0eXBlKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gd3JhcFRlcm1pbmF0ZSh3b3JrZXIsIG9ialVSTCkge1xuICBpZiAoIXdvcmtlciB8fCAhb2JqVVJMKSByZXR1cm47XG4gIHZhciB0ZXJtID0gd29ya2VyLnRlcm1pbmF0ZTtcbiAgd29ya2VyLm9ialVSTCA9IG9ialVSTDtcblxuICB3b3JrZXIudGVybWluYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh3b3JrZXIub2JqVVJMKSBVUkwucmV2b2tlT2JqZWN0VVJMKHdvcmtlci5vYmpVUkwpO1xuICAgIHRlcm0uY2FsbCh3b3JrZXIpO1xuICB9O1xufVxuXG52YXIgVHJhbnNtdXhXb3JrZXIgPSBuZXcgc2hpbVdvcmtlcihcIi4vdHJhbnNtdXhlci13b3JrZXIud29ya2VyLmpzXCIsIGZ1bmN0aW9uICh3aW5kb3csIGRvY3VtZW50JCQxKSB7XG4gIHZhciBzZWxmID0gdGhpcztcblxuICB2YXIgdHJhbnNtdXhlcldvcmtlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBtdXguanNcbiAgICAgKlxuICAgICAqIENvcHlyaWdodCAoYykgMjAxNSBCcmlnaHRjb3ZlXG4gICAgICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAgICAgKlxuICAgICAqIEZ1bmN0aW9ucyB0aGF0IGdlbmVyYXRlIGZyYWdtZW50ZWQgTVA0cyBzdWl0YWJsZSBmb3IgdXNlIHdpdGggTWVkaWFcbiAgICAgKiBTb3VyY2UgRXh0ZW5zaW9ucy5cbiAgICAgKi9cbiAgICB2YXIgVUlOVDMyX01BWCA9IE1hdGgucG93KDIsIDMyKSAtIDE7XG4gICAgdmFyIGJveCwgZGluZiwgZXNkcywgZnR5cCwgbWRhdCwgbWZoZCwgbWluZiwgbW9vZiwgbW9vdiwgbXZleCwgbXZoZCwgdHJhaywgdGtoZCwgbWRpYSwgbWRoZCwgaGRsciwgc2R0cCwgc3RibCwgc3RzZCwgdHJhZiwgdHJleCwgdHJ1biwgdHlwZXMsIE1BSk9SX0JSQU5ELCBNSU5PUl9WRVJTSU9OLCBBVkMxX0JSQU5ELCBWSURFT19IRExSLCBBVURJT19IRExSLCBIRExSX1RZUEVTLCBWTUhELCBTTUhELCBEUkVGLCBTVENPLCBTVFNDLCBTVFNaLCBTVFRTOyAvLyBwcmUtY2FsY3VsYXRlIGNvbnN0YW50c1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpO1xuICAgICAgdHlwZXMgPSB7XG4gICAgICAgIGF2YzE6IFtdLFxuICAgICAgICAvLyBjb2RpbmduYW1lXG4gICAgICAgIGF2Y0M6IFtdLFxuICAgICAgICBidHJ0OiBbXSxcbiAgICAgICAgZGluZjogW10sXG4gICAgICAgIGRyZWY6IFtdLFxuICAgICAgICBlc2RzOiBbXSxcbiAgICAgICAgZnR5cDogW10sXG4gICAgICAgIGhkbHI6IFtdLFxuICAgICAgICBtZGF0OiBbXSxcbiAgICAgICAgbWRoZDogW10sXG4gICAgICAgIG1kaWE6IFtdLFxuICAgICAgICBtZmhkOiBbXSxcbiAgICAgICAgbWluZjogW10sXG4gICAgICAgIG1vb2Y6IFtdLFxuICAgICAgICBtb292OiBbXSxcbiAgICAgICAgbXA0YTogW10sXG4gICAgICAgIC8vIGNvZGluZ25hbWVcbiAgICAgICAgbXZleDogW10sXG4gICAgICAgIG12aGQ6IFtdLFxuICAgICAgICBzZHRwOiBbXSxcbiAgICAgICAgc21oZDogW10sXG4gICAgICAgIHN0Ymw6IFtdLFxuICAgICAgICBzdGNvOiBbXSxcbiAgICAgICAgc3RzYzogW10sXG4gICAgICAgIHN0c2Q6IFtdLFxuICAgICAgICBzdHN6OiBbXSxcbiAgICAgICAgc3R0czogW10sXG4gICAgICAgIHN0eXA6IFtdLFxuICAgICAgICB0ZmR0OiBbXSxcbiAgICAgICAgdGZoZDogW10sXG4gICAgICAgIHRyYWY6IFtdLFxuICAgICAgICB0cmFrOiBbXSxcbiAgICAgICAgdHJ1bjogW10sXG4gICAgICAgIHRyZXg6IFtdLFxuICAgICAgICB0a2hkOiBbXSxcbiAgICAgICAgdm1oZDogW11cbiAgICAgIH07IC8vIEluIGVudmlyb25tZW50cyB3aGVyZSBVaW50OEFycmF5IGlzIHVuZGVmaW5lZCAoZS5nLiwgSUU4KSwgc2tpcCBzZXQgdXAgc28gdGhhdCB3ZVxuICAgICAgLy8gZG9uJ3QgdGhyb3cgYW4gZXJyb3JcblxuICAgICAgaWYgKHR5cGVvZiBVaW50OEFycmF5ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGZvciAoaSBpbiB0eXBlcykge1xuICAgICAgICBpZiAodHlwZXMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICB0eXBlc1tpXSA9IFtpLmNoYXJDb2RlQXQoMCksIGkuY2hhckNvZGVBdCgxKSwgaS5jaGFyQ29kZUF0KDIpLCBpLmNoYXJDb2RlQXQoMyldO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIE1BSk9SX0JSQU5EID0gbmV3IFVpbnQ4QXJyYXkoWydpJy5jaGFyQ29kZUF0KDApLCAncycuY2hhckNvZGVBdCgwKSwgJ28nLmNoYXJDb2RlQXQoMCksICdtJy5jaGFyQ29kZUF0KDApXSk7XG4gICAgICBBVkMxX0JSQU5EID0gbmV3IFVpbnQ4QXJyYXkoWydhJy5jaGFyQ29kZUF0KDApLCAndicuY2hhckNvZGVBdCgwKSwgJ2MnLmNoYXJDb2RlQXQoMCksICcxJy5jaGFyQ29kZUF0KDApXSk7XG4gICAgICBNSU5PUl9WRVJTSU9OID0gbmV3IFVpbnQ4QXJyYXkoWzAsIDAsIDAsIDFdKTtcbiAgICAgIFZJREVPX0hETFIgPSBuZXcgVWludDhBcnJheShbMHgwMCwgLy8gdmVyc2lvbiAwXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcHJlX2RlZmluZWRcbiAgICAgIDB4NzYsIDB4NjksIDB4NjQsIDB4NjUsIC8vIGhhbmRsZXJfdHlwZTogJ3ZpZGUnXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXG4gICAgICAweDU2LCAweDY5LCAweDY0LCAweDY1LCAweDZmLCAweDQ4LCAweDYxLCAweDZlLCAweDY0LCAweDZjLCAweDY1LCAweDcyLCAweDAwIC8vIG5hbWU6ICdWaWRlb0hhbmRsZXInXG4gICAgICBdKTtcbiAgICAgIEFVRElPX0hETFIgPSBuZXcgVWludDhBcnJheShbMHgwMCwgLy8gdmVyc2lvbiAwXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcHJlX2RlZmluZWRcbiAgICAgIDB4NzMsIDB4NmYsIDB4NzUsIDB4NmUsIC8vIGhhbmRsZXJfdHlwZTogJ3NvdW4nXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXG4gICAgICAweDUzLCAweDZmLCAweDc1LCAweDZlLCAweDY0LCAweDQ4LCAweDYxLCAweDZlLCAweDY0LCAweDZjLCAweDY1LCAweDcyLCAweDAwIC8vIG5hbWU6ICdTb3VuZEhhbmRsZXInXG4gICAgICBdKTtcbiAgICAgIEhETFJfVFlQRVMgPSB7XG4gICAgICAgIHZpZGVvOiBWSURFT19IRExSLFxuICAgICAgICBhdWRpbzogQVVESU9fSERMUlxuICAgICAgfTtcbiAgICAgIERSRUYgPSBuZXcgVWludDhBcnJheShbMHgwMCwgLy8gdmVyc2lvbiAwXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSwgLy8gZW50cnlfY291bnRcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MGMsIC8vIGVudHJ5X3NpemVcbiAgICAgIDB4NzUsIDB4NzIsIDB4NmMsIDB4MjAsIC8vICd1cmwnIHR5cGVcbiAgICAgIDB4MDAsIC8vIHZlcnNpb24gMFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMSAvLyBlbnRyeV9mbGFnc1xuICAgICAgXSk7XG4gICAgICBTTUhEID0gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIC8vIHZlcnNpb25cbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXG4gICAgICAweDAwLCAweDAwLCAvLyBiYWxhbmNlLCAwIG1lYW5zIGNlbnRlcmVkXG4gICAgICAweDAwLCAweDAwIC8vIHJlc2VydmVkXG4gICAgICBdKTtcbiAgICAgIFNUQ08gPSBuZXcgVWludDhBcnJheShbMHgwMCwgLy8gdmVyc2lvblxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gZmxhZ3NcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAgLy8gZW50cnlfY291bnRcbiAgICAgIF0pO1xuICAgICAgU1RTQyA9IFNUQ087XG4gICAgICBTVFNaID0gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIC8vIHZlcnNpb25cbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBzYW1wbGVfc2l6ZVxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCAvLyBzYW1wbGVfY291bnRcbiAgICAgIF0pO1xuICAgICAgU1RUUyA9IFNUQ087XG4gICAgICBWTUhEID0gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIC8vIHZlcnNpb25cbiAgICAgIDB4MDAsIDB4MDAsIDB4MDEsIC8vIGZsYWdzXG4gICAgICAweDAwLCAweDAwLCAvLyBncmFwaGljc21vZGVcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAgLy8gb3Bjb2xvclxuICAgICAgXSk7XG4gICAgfSkoKTtcblxuICAgIGJveCA9IGZ1bmN0aW9uIGJveCh0eXBlKSB7XG4gICAgICB2YXIgcGF5bG9hZCA9IFtdLFxuICAgICAgICAgIHNpemUgPSAwLFxuICAgICAgICAgIGksXG4gICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgIHZpZXc7XG5cbiAgICAgIGZvciAoaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcGF5bG9hZC5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gICAgICB9XG5cbiAgICAgIGkgPSBwYXlsb2FkLmxlbmd0aDsgLy8gY2FsY3VsYXRlIHRoZSB0b3RhbCBzaXplIHdlIG5lZWQgdG8gYWxsb2NhdGVcblxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBzaXplICs9IHBheWxvYWRbaV0uYnl0ZUxlbmd0aDtcbiAgICAgIH1cblxuICAgICAgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkoc2l6ZSArIDgpO1xuICAgICAgdmlldyA9IG5ldyBEYXRhVmlldyhyZXN1bHQuYnVmZmVyLCByZXN1bHQuYnl0ZU9mZnNldCwgcmVzdWx0LmJ5dGVMZW5ndGgpO1xuICAgICAgdmlldy5zZXRVaW50MzIoMCwgcmVzdWx0LmJ5dGVMZW5ndGgpO1xuICAgICAgcmVzdWx0LnNldCh0eXBlLCA0KTsgLy8gY29weSB0aGUgcGF5bG9hZCBpbnRvIHRoZSByZXN1bHRcblxuICAgICAgZm9yIChpID0gMCwgc2l6ZSA9IDg7IGkgPCBwYXlsb2FkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdC5zZXQocGF5bG9hZFtpXSwgc2l6ZSk7XG4gICAgICAgIHNpemUgKz0gcGF5bG9hZFtpXS5ieXRlTGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICBkaW5mID0gZnVuY3Rpb24gZGluZigpIHtcbiAgICAgIHJldHVybiBib3godHlwZXMuZGluZiwgYm94KHR5cGVzLmRyZWYsIERSRUYpKTtcbiAgICB9O1xuXG4gICAgZXNkcyA9IGZ1bmN0aW9uIGVzZHModHJhY2spIHtcbiAgICAgIHJldHVybiBib3godHlwZXMuZXNkcywgbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIC8vIHZlcnNpb25cbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXG4gICAgICAvLyBFU19EZXNjcmlwdG9yXG4gICAgICAweDAzLCAvLyB0YWcsIEVTX0Rlc2NyVGFnXG4gICAgICAweDE5LCAvLyBsZW5ndGhcbiAgICAgIDB4MDAsIDB4MDAsIC8vIEVTX0lEXG4gICAgICAweDAwLCAvLyBzdHJlYW1EZXBlbmRlbmNlRmxhZywgVVJMX2ZsYWcsIHJlc2VydmVkLCBzdHJlYW1Qcmlvcml0eVxuICAgICAgLy8gRGVjb2RlckNvbmZpZ0Rlc2NyaXB0b3JcbiAgICAgIDB4MDQsIC8vIHRhZywgRGVjb2RlckNvbmZpZ0Rlc2NyVGFnXG4gICAgICAweDExLCAvLyBsZW5ndGhcbiAgICAgIDB4NDAsIC8vIG9iamVjdCB0eXBlXG4gICAgICAweDE1LCAvLyBzdHJlYW1UeXBlXG4gICAgICAweDAwLCAweDA2LCAweDAwLCAvLyBidWZmZXJTaXplREJcbiAgICAgIDB4MDAsIDB4MDAsIDB4ZGEsIDB4YzAsIC8vIG1heEJpdHJhdGVcbiAgICAgIDB4MDAsIDB4MDAsIDB4ZGEsIDB4YzAsIC8vIGF2Z0JpdHJhdGVcbiAgICAgIC8vIERlY29kZXJTcGVjaWZpY0luZm9cbiAgICAgIDB4MDUsIC8vIHRhZywgRGVjb2RlclNwZWNpZmljSW5mb1RhZ1xuICAgICAgMHgwMiwgLy8gbGVuZ3RoXG4gICAgICAvLyBJU08vSUVDIDE0NDk2LTMsIEF1ZGlvU3BlY2lmaWNDb25maWdcbiAgICAgIC8vIGZvciBzYW1wbGluZ0ZyZXF1ZW5jeUluZGV4IHNlZSBJU08vSUVDIDEzODE4LTc6MjAwNiwgOC4xLjMuMi4yLCBUYWJsZSAzNVxuICAgICAgdHJhY2suYXVkaW9vYmplY3R0eXBlIDw8IDMgfCB0cmFjay5zYW1wbGluZ2ZyZXF1ZW5jeWluZGV4ID4+PiAxLCB0cmFjay5zYW1wbGluZ2ZyZXF1ZW5jeWluZGV4IDw8IDcgfCB0cmFjay5jaGFubmVsY291bnQgPDwgMywgMHgwNiwgMHgwMSwgMHgwMiAvLyBHQVNwZWNpZmljQ29uZmlnXG4gICAgICBdKSk7XG4gICAgfTtcblxuICAgIGZ0eXAgPSBmdW5jdGlvbiBmdHlwKCkge1xuICAgICAgcmV0dXJuIGJveCh0eXBlcy5mdHlwLCBNQUpPUl9CUkFORCwgTUlOT1JfVkVSU0lPTiwgTUFKT1JfQlJBTkQsIEFWQzFfQlJBTkQpO1xuICAgIH07XG5cbiAgICBoZGxyID0gZnVuY3Rpb24gaGRscih0eXBlKSB7XG4gICAgICByZXR1cm4gYm94KHR5cGVzLmhkbHIsIEhETFJfVFlQRVNbdHlwZV0pO1xuICAgIH07XG5cbiAgICBtZGF0ID0gZnVuY3Rpb24gbWRhdChkYXRhKSB7XG4gICAgICByZXR1cm4gYm94KHR5cGVzLm1kYXQsIGRhdGEpO1xuICAgIH07XG5cbiAgICBtZGhkID0gZnVuY3Rpb24gbWRoZCh0cmFjaykge1xuICAgICAgdmFyIHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KFsweDAwLCAvLyB2ZXJzaW9uIDBcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAyLCAvLyBjcmVhdGlvbl90aW1lXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAzLCAvLyBtb2RpZmljYXRpb25fdGltZVxuICAgICAgMHgwMCwgMHgwMSwgMHg1ZiwgMHg5MCwgLy8gdGltZXNjYWxlLCA5MCwwMDAgXCJ0aWNrc1wiIHBlciBzZWNvbmRcbiAgICAgIHRyYWNrLmR1cmF0aW9uID4+PiAyNCAmIDB4RkYsIHRyYWNrLmR1cmF0aW9uID4+PiAxNiAmIDB4RkYsIHRyYWNrLmR1cmF0aW9uID4+PiA4ICYgMHhGRiwgdHJhY2suZHVyYXRpb24gJiAweEZGLCAvLyBkdXJhdGlvblxuICAgICAgMHg1NSwgMHhjNCwgLy8gJ3VuZCcgbGFuZ3VhZ2UgKHVuZGV0ZXJtaW5lZClcbiAgICAgIDB4MDAsIDB4MDBdKTsgLy8gVXNlIHRoZSBzYW1wbGUgcmF0ZSBmcm9tIHRoZSB0cmFjayBtZXRhZGF0YSwgd2hlbiBpdCBpc1xuICAgICAgLy8gZGVmaW5lZC4gVGhlIHNhbXBsZSByYXRlIGNhbiBiZSBwYXJzZWQgb3V0IG9mIGFuIEFEVFMgaGVhZGVyLCBmb3JcbiAgICAgIC8vIGluc3RhbmNlLlxuXG4gICAgICBpZiAodHJhY2suc2FtcGxlcmF0ZSkge1xuICAgICAgICByZXN1bHRbMTJdID0gdHJhY2suc2FtcGxlcmF0ZSA+Pj4gMjQgJiAweEZGO1xuICAgICAgICByZXN1bHRbMTNdID0gdHJhY2suc2FtcGxlcmF0ZSA+Pj4gMTYgJiAweEZGO1xuICAgICAgICByZXN1bHRbMTRdID0gdHJhY2suc2FtcGxlcmF0ZSA+Pj4gOCAmIDB4RkY7XG4gICAgICAgIHJlc3VsdFsxNV0gPSB0cmFjay5zYW1wbGVyYXRlICYgMHhGRjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJveCh0eXBlcy5tZGhkLCByZXN1bHQpO1xuICAgIH07XG5cbiAgICBtZGlhID0gZnVuY3Rpb24gbWRpYSh0cmFjaykge1xuICAgICAgcmV0dXJuIGJveCh0eXBlcy5tZGlhLCBtZGhkKHRyYWNrKSwgaGRscih0cmFjay50eXBlKSwgbWluZih0cmFjaykpO1xuICAgIH07XG5cbiAgICBtZmhkID0gZnVuY3Rpb24gbWZoZChzZXF1ZW5jZU51bWJlcikge1xuICAgICAgcmV0dXJuIGJveCh0eXBlcy5tZmhkLCBuZXcgVWludDhBcnJheShbMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gZmxhZ3NcbiAgICAgIChzZXF1ZW5jZU51bWJlciAmIDB4RkYwMDAwMDApID4+IDI0LCAoc2VxdWVuY2VOdW1iZXIgJiAweEZGMDAwMCkgPj4gMTYsIChzZXF1ZW5jZU51bWJlciAmIDB4RkYwMCkgPj4gOCwgc2VxdWVuY2VOdW1iZXIgJiAweEZGIC8vIHNlcXVlbmNlX251bWJlclxuICAgICAgXSkpO1xuICAgIH07XG5cbiAgICBtaW5mID0gZnVuY3Rpb24gbWluZih0cmFjaykge1xuICAgICAgcmV0dXJuIGJveCh0eXBlcy5taW5mLCB0cmFjay50eXBlID09PSAndmlkZW8nID8gYm94KHR5cGVzLnZtaGQsIFZNSEQpIDogYm94KHR5cGVzLnNtaGQsIFNNSEQpLCBkaW5mKCksIHN0YmwodHJhY2spKTtcbiAgICB9O1xuXG4gICAgbW9vZiA9IGZ1bmN0aW9uIG1vb2Yoc2VxdWVuY2VOdW1iZXIsIHRyYWNrcykge1xuICAgICAgdmFyIHRyYWNrRnJhZ21lbnRzID0gW10sXG4gICAgICAgICAgaSA9IHRyYWNrcy5sZW5ndGg7IC8vIGJ1aWxkIHRyYWYgYm94ZXMgZm9yIGVhY2ggdHJhY2sgZnJhZ21lbnRcblxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICB0cmFja0ZyYWdtZW50c1tpXSA9IHRyYWYodHJhY2tzW2ldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJveC5hcHBseShudWxsLCBbdHlwZXMubW9vZiwgbWZoZChzZXF1ZW5jZU51bWJlcildLmNvbmNhdCh0cmFja0ZyYWdtZW50cykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG1vdmllIGJveC5cbiAgICAgKiBAcGFyYW0gdHJhY2tzIHthcnJheX0gdGhlIHRyYWNrcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBtb3ZpZVxuICAgICAqIEBzZWUgSVNPL0lFQyAxNDQ5Ni0xMjoyMDEyKEUpLCBzZWN0aW9uIDguMi4xXG4gICAgICovXG5cblxuICAgIG1vb3YgPSBmdW5jdGlvbiBtb292KHRyYWNrcykge1xuICAgICAgdmFyIGkgPSB0cmFja3MubGVuZ3RoLFxuICAgICAgICAgIGJveGVzID0gW107XG5cbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgYm94ZXNbaV0gPSB0cmFrKHRyYWNrc1tpXSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBib3guYXBwbHkobnVsbCwgW3R5cGVzLm1vb3YsIG12aGQoMHhmZmZmZmZmZildLmNvbmNhdChib3hlcykuY29uY2F0KG12ZXgodHJhY2tzKSkpO1xuICAgIH07XG5cbiAgICBtdmV4ID0gZnVuY3Rpb24gbXZleCh0cmFja3MpIHtcbiAgICAgIHZhciBpID0gdHJhY2tzLmxlbmd0aCxcbiAgICAgICAgICBib3hlcyA9IFtdO1xuXG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGJveGVzW2ldID0gdHJleCh0cmFja3NbaV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYm94LmFwcGx5KG51bGwsIFt0eXBlcy5tdmV4XS5jb25jYXQoYm94ZXMpKTtcbiAgICB9O1xuXG4gICAgbXZoZCA9IGZ1bmN0aW9uIG12aGQoZHVyYXRpb24pIHtcbiAgICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KFsweDAwLCAvLyB2ZXJzaW9uIDBcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAxLCAvLyBjcmVhdGlvbl90aW1lXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAyLCAvLyBtb2RpZmljYXRpb25fdGltZVxuICAgICAgMHgwMCwgMHgwMSwgMHg1ZiwgMHg5MCwgLy8gdGltZXNjYWxlLCA5MCwwMDAgXCJ0aWNrc1wiIHBlciBzZWNvbmRcbiAgICAgIChkdXJhdGlvbiAmIDB4RkYwMDAwMDApID4+IDI0LCAoZHVyYXRpb24gJiAweEZGMDAwMCkgPj4gMTYsIChkdXJhdGlvbiAmIDB4RkYwMCkgPj4gOCwgZHVyYXRpb24gJiAweEZGLCAvLyBkdXJhdGlvblxuICAgICAgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMCwgLy8gMS4wIHJhdGVcbiAgICAgIDB4MDEsIDB4MDAsIC8vIDEuMCB2b2x1bWVcbiAgICAgIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcbiAgICAgIDB4MDAsIDB4MDEsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4NDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHRyYW5zZm9ybWF0aW9uOiB1bml0eSBtYXRyaXhcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHByZV9kZWZpbmVkXG4gICAgICAweGZmLCAweGZmLCAweGZmLCAweGZmIC8vIG5leHRfdHJhY2tfSURcbiAgICAgIF0pO1xuICAgICAgcmV0dXJuIGJveCh0eXBlcy5tdmhkLCBieXRlcyk7XG4gICAgfTtcblxuICAgIHNkdHAgPSBmdW5jdGlvbiBzZHRwKHRyYWNrKSB7XG4gICAgICB2YXIgc2FtcGxlcyA9IHRyYWNrLnNhbXBsZXMgfHwgW10sXG4gICAgICAgICAgYnl0ZXMgPSBuZXcgVWludDhBcnJheSg0ICsgc2FtcGxlcy5sZW5ndGgpLFxuICAgICAgICAgIGZsYWdzLFxuICAgICAgICAgIGk7IC8vIGxlYXZlIHRoZSBmdWxsIGJveCBoZWFkZXIgKDQgYnl0ZXMpIGFsbCB6ZXJvXG4gICAgICAvLyB3cml0ZSB0aGUgc2FtcGxlIHRhYmxlXG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzYW1wbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZsYWdzID0gc2FtcGxlc1tpXS5mbGFncztcbiAgICAgICAgYnl0ZXNbaSArIDRdID0gZmxhZ3MuZGVwZW5kc09uIDw8IDQgfCBmbGFncy5pc0RlcGVuZGVkT24gPDwgMiB8IGZsYWdzLmhhc1JlZHVuZGFuY3k7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBib3godHlwZXMuc2R0cCwgYnl0ZXMpO1xuICAgIH07XG5cbiAgICBzdGJsID0gZnVuY3Rpb24gc3RibCh0cmFjaykge1xuICAgICAgcmV0dXJuIGJveCh0eXBlcy5zdGJsLCBzdHNkKHRyYWNrKSwgYm94KHR5cGVzLnN0dHMsIFNUVFMpLCBib3godHlwZXMuc3RzYywgU1RTQyksIGJveCh0eXBlcy5zdHN6LCBTVFNaKSwgYm94KHR5cGVzLnN0Y28sIFNUQ08pKTtcbiAgICB9O1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB2aWRlb1NhbXBsZSwgYXVkaW9TYW1wbGU7XG5cbiAgICAgIHN0c2QgPSBmdW5jdGlvbiBzdHNkKHRyYWNrKSB7XG4gICAgICAgIHJldHVybiBib3godHlwZXMuc3RzZCwgbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIC8vIHZlcnNpb24gMFxuICAgICAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xuICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAxXSksIHRyYWNrLnR5cGUgPT09ICd2aWRlbycgPyB2aWRlb1NhbXBsZSh0cmFjaykgOiBhdWRpb1NhbXBsZSh0cmFjaykpO1xuICAgICAgfTtcblxuICAgICAgdmlkZW9TYW1wbGUgPSBmdW5jdGlvbiB2aWRlb1NhbXBsZSh0cmFjaykge1xuICAgICAgICB2YXIgc3BzID0gdHJhY2suc3BzIHx8IFtdLFxuICAgICAgICAgICAgcHBzID0gdHJhY2sucHBzIHx8IFtdLFxuICAgICAgICAgICAgc2VxdWVuY2VQYXJhbWV0ZXJTZXRzID0gW10sXG4gICAgICAgICAgICBwaWN0dXJlUGFyYW1ldGVyU2V0cyA9IFtdLFxuICAgICAgICAgICAgaTsgLy8gYXNzZW1ibGUgdGhlIFNQU3NcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgc2VxdWVuY2VQYXJhbWV0ZXJTZXRzLnB1c2goKHNwc1tpXS5ieXRlTGVuZ3RoICYgMHhGRjAwKSA+Pj4gOCk7XG4gICAgICAgICAgc2VxdWVuY2VQYXJhbWV0ZXJTZXRzLnB1c2goc3BzW2ldLmJ5dGVMZW5ndGggJiAweEZGKTsgLy8gc2VxdWVuY2VQYXJhbWV0ZXJTZXRMZW5ndGhcblxuICAgICAgICAgIHNlcXVlbmNlUGFyYW1ldGVyU2V0cyA9IHNlcXVlbmNlUGFyYW1ldGVyU2V0cy5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoc3BzW2ldKSk7IC8vIFNQU1xuICAgICAgICB9IC8vIGFzc2VtYmxlIHRoZSBQUFNzXG5cblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcHBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgcGljdHVyZVBhcmFtZXRlclNldHMucHVzaCgocHBzW2ldLmJ5dGVMZW5ndGggJiAweEZGMDApID4+PiA4KTtcbiAgICAgICAgICBwaWN0dXJlUGFyYW1ldGVyU2V0cy5wdXNoKHBwc1tpXS5ieXRlTGVuZ3RoICYgMHhGRik7XG4gICAgICAgICAgcGljdHVyZVBhcmFtZXRlclNldHMgPSBwaWN0dXJlUGFyYW1ldGVyU2V0cy5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwocHBzW2ldKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYm94KHR5cGVzLmF2YzEsIG5ldyBVaW50OEFycmF5KFsweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgICAweDAwLCAweDAxLCAvLyBkYXRhX3JlZmVyZW5jZV9pbmRleFxuICAgICAgICAweDAwLCAweDAwLCAvLyBwcmVfZGVmaW5lZFxuICAgICAgICAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBwcmVfZGVmaW5lZFxuICAgICAgICAodHJhY2sud2lkdGggJiAweGZmMDApID4+IDgsIHRyYWNrLndpZHRoICYgMHhmZiwgLy8gd2lkdGhcbiAgICAgICAgKHRyYWNrLmhlaWdodCAmIDB4ZmYwMCkgPj4gOCwgdHJhY2suaGVpZ2h0ICYgMHhmZiwgLy8gaGVpZ2h0XG4gICAgICAgIDB4MDAsIDB4NDgsIDB4MDAsIDB4MDAsIC8vIGhvcml6cmVzb2x1dGlvblxuICAgICAgICAweDAwLCAweDQ4LCAweDAwLCAweDAwLCAvLyB2ZXJ0cmVzb2x1dGlvblxuICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgICAweDAwLCAweDAxLCAvLyBmcmFtZV9jb3VudFxuICAgICAgICAweDEzLCAweDc2LCAweDY5LCAweDY0LCAweDY1LCAweDZmLCAweDZhLCAweDczLCAweDJkLCAweDYzLCAweDZmLCAweDZlLCAweDc0LCAweDcyLCAweDY5LCAweDYyLCAweDJkLCAweDY4LCAweDZjLCAweDczLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBjb21wcmVzc29ybmFtZVxuICAgICAgICAweDAwLCAweDE4LCAvLyBkZXB0aCA9IDI0XG4gICAgICAgIDB4MTEsIDB4MTEgLy8gcHJlX2RlZmluZWQgPSAtMVxuICAgICAgICBdKSwgYm94KHR5cGVzLmF2Y0MsIG5ldyBVaW50OEFycmF5KFsweDAxLCAvLyBjb25maWd1cmF0aW9uVmVyc2lvblxuICAgICAgICB0cmFjay5wcm9maWxlSWRjLCAvLyBBVkNQcm9maWxlSW5kaWNhdGlvblxuICAgICAgICB0cmFjay5wcm9maWxlQ29tcGF0aWJpbGl0eSwgLy8gcHJvZmlsZV9jb21wYXRpYmlsaXR5XG4gICAgICAgIHRyYWNrLmxldmVsSWRjLCAvLyBBVkNMZXZlbEluZGljYXRpb25cbiAgICAgICAgMHhmZiAvLyBsZW5ndGhTaXplTWludXNPbmUsIGhhcmQtY29kZWQgdG8gNCBieXRlc1xuICAgICAgICBdLmNvbmNhdChbc3BzLmxlbmd0aCAvLyBudW1PZlNlcXVlbmNlUGFyYW1ldGVyU2V0c1xuICAgICAgICBdKS5jb25jYXQoc2VxdWVuY2VQYXJhbWV0ZXJTZXRzKS5jb25jYXQoW3Bwcy5sZW5ndGggLy8gbnVtT2ZQaWN0dXJlUGFyYW1ldGVyU2V0c1xuICAgICAgICBdKS5jb25jYXQocGljdHVyZVBhcmFtZXRlclNldHMpKSksIC8vIFwiUFBTXCJcbiAgICAgICAgYm94KHR5cGVzLmJ0cnQsIG5ldyBVaW50OEFycmF5KFsweDAwLCAweDFjLCAweDljLCAweDgwLCAvLyBidWZmZXJTaXplREJcbiAgICAgICAgMHgwMCwgMHgyZCwgMHhjNiwgMHhjMCwgLy8gbWF4Qml0cmF0ZVxuICAgICAgICAweDAwLCAweDJkLCAweGM2LCAweGMwXSkpIC8vIGF2Z0JpdHJhdGVcbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIGF1ZGlvU2FtcGxlID0gZnVuY3Rpb24gYXVkaW9TYW1wbGUodHJhY2spIHtcbiAgICAgICAgcmV0dXJuIGJveCh0eXBlcy5tcDRhLCBuZXcgVWludDhBcnJheShbLy8gU2FtcGxlRW50cnksIElTTy9JRUMgMTQ0OTYtMTJcbiAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcbiAgICAgICAgMHgwMCwgMHgwMSwgLy8gZGF0YV9yZWZlcmVuY2VfaW5kZXhcbiAgICAgICAgLy8gQXVkaW9TYW1wbGVFbnRyeSwgSVNPL0lFQyAxNDQ5Ni0xMlxuICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgICAodHJhY2suY2hhbm5lbGNvdW50ICYgMHhmZjAwKSA+PiA4LCB0cmFjay5jaGFubmVsY291bnQgJiAweGZmLCAvLyBjaGFubmVsY291bnRcbiAgICAgICAgKHRyYWNrLnNhbXBsZXNpemUgJiAweGZmMDApID4+IDgsIHRyYWNrLnNhbXBsZXNpemUgJiAweGZmLCAvLyBzYW1wbGVzaXplXG4gICAgICAgIDB4MDAsIDB4MDAsIC8vIHByZV9kZWZpbmVkXG4gICAgICAgIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXG4gICAgICAgICh0cmFjay5zYW1wbGVyYXRlICYgMHhmZjAwKSA+PiA4LCB0cmFjay5zYW1wbGVyYXRlICYgMHhmZiwgMHgwMCwgMHgwMCAvLyBzYW1wbGVyYXRlLCAxNi4xNlxuICAgICAgICAvLyBNUDRBdWRpb1NhbXBsZUVudHJ5LCBJU08vSUVDIDE0NDk2LTE0XG4gICAgICAgIF0pLCBlc2RzKHRyYWNrKSk7XG4gICAgICB9O1xuICAgIH0pKCk7XG5cbiAgICB0a2hkID0gZnVuY3Rpb24gdGtoZCh0cmFjaykge1xuICAgICAgdmFyIHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KFsweDAwLCAvLyB2ZXJzaW9uIDBcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDcsIC8vIGZsYWdzXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBjcmVhdGlvbl90aW1lXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBtb2RpZmljYXRpb25fdGltZVxuICAgICAgKHRyYWNrLmlkICYgMHhGRjAwMDAwMCkgPj4gMjQsICh0cmFjay5pZCAmIDB4RkYwMDAwKSA+PiAxNiwgKHRyYWNrLmlkICYgMHhGRjAwKSA+PiA4LCB0cmFjay5pZCAmIDB4RkYsIC8vIHRyYWNrX0lEXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgKHRyYWNrLmR1cmF0aW9uICYgMHhGRjAwMDAwMCkgPj4gMjQsICh0cmFjay5kdXJhdGlvbiAmIDB4RkYwMDAwKSA+PiAxNiwgKHRyYWNrLmR1cmF0aW9uICYgMHhGRjAwKSA+PiA4LCB0cmFjay5kdXJhdGlvbiAmIDB4RkYsIC8vIGR1cmF0aW9uXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgMHgwMCwgMHgwMCwgLy8gbGF5ZXJcbiAgICAgIDB4MDAsIDB4MDAsIC8vIGFsdGVybmF0ZV9ncm91cFxuICAgICAgMHgwMSwgMHgwMCwgLy8gbm9uLWF1ZGlvIHRyYWNrIHZvbHVtZVxuICAgICAgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcbiAgICAgIDB4MDAsIDB4MDEsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4NDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHRyYW5zZm9ybWF0aW9uOiB1bml0eSBtYXRyaXhcbiAgICAgICh0cmFjay53aWR0aCAmIDB4RkYwMCkgPj4gOCwgdHJhY2sud2lkdGggJiAweEZGLCAweDAwLCAweDAwLCAvLyB3aWR0aFxuICAgICAgKHRyYWNrLmhlaWdodCAmIDB4RkYwMCkgPj4gOCwgdHJhY2suaGVpZ2h0ICYgMHhGRiwgMHgwMCwgMHgwMCAvLyBoZWlnaHRcbiAgICAgIF0pO1xuICAgICAgcmV0dXJuIGJveCh0eXBlcy50a2hkLCByZXN1bHQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgYSB0cmFjayBmcmFnbWVudCAodHJhZikgYm94LiBBIHRyYWYgYm94IGNvbGxlY3RzIG1ldGFkYXRhXG4gICAgICogYWJvdXQgdHJhY2tzIGluIGEgbW92aWUgZnJhZ21lbnQgKG1vb2YpIGJveC5cbiAgICAgKi9cblxuXG4gICAgdHJhZiA9IGZ1bmN0aW9uIHRyYWYodHJhY2spIHtcbiAgICAgIHZhciB0cmFja0ZyYWdtZW50SGVhZGVyLCB0cmFja0ZyYWdtZW50RGVjb2RlVGltZSwgdHJhY2tGcmFnbWVudFJ1biwgc2FtcGxlRGVwZW5kZW5jeVRhYmxlLCBkYXRhT2Zmc2V0LCB1cHBlcldvcmRCYXNlTWVkaWFEZWNvZGVUaW1lLCBsb3dlcldvcmRCYXNlTWVkaWFEZWNvZGVUaW1lO1xuICAgICAgdHJhY2tGcmFnbWVudEhlYWRlciA9IGJveCh0eXBlcy50ZmhkLCBuZXcgVWludDhBcnJheShbMHgwMCwgLy8gdmVyc2lvbiAwXG4gICAgICAweDAwLCAweDAwLCAweDNhLCAvLyBmbGFnc1xuICAgICAgKHRyYWNrLmlkICYgMHhGRjAwMDAwMCkgPj4gMjQsICh0cmFjay5pZCAmIDB4RkYwMDAwKSA+PiAxNiwgKHRyYWNrLmlkICYgMHhGRjAwKSA+PiA4LCB0cmFjay5pZCAmIDB4RkYsIC8vIHRyYWNrX0lEXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAxLCAvLyBzYW1wbGVfZGVzY3JpcHRpb25faW5kZXhcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGRlZmF1bHRfc2FtcGxlX2R1cmF0aW9uXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBkZWZhdWx0X3NhbXBsZV9zaXplXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwIC8vIGRlZmF1bHRfc2FtcGxlX2ZsYWdzXG4gICAgICBdKSk7XG4gICAgICB1cHBlcldvcmRCYXNlTWVkaWFEZWNvZGVUaW1lID0gTWF0aC5mbG9vcih0cmFjay5iYXNlTWVkaWFEZWNvZGVUaW1lIC8gKFVJTlQzMl9NQVggKyAxKSk7XG4gICAgICBsb3dlcldvcmRCYXNlTWVkaWFEZWNvZGVUaW1lID0gTWF0aC5mbG9vcih0cmFjay5iYXNlTWVkaWFEZWNvZGVUaW1lICUgKFVJTlQzMl9NQVggKyAxKSk7XG4gICAgICB0cmFja0ZyYWdtZW50RGVjb2RlVGltZSA9IGJveCh0eXBlcy50ZmR0LCBuZXcgVWludDhBcnJheShbMHgwMSwgLy8gdmVyc2lvbiAxXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xuICAgICAgLy8gYmFzZU1lZGlhRGVjb2RlVGltZVxuICAgICAgdXBwZXJXb3JkQmFzZU1lZGlhRGVjb2RlVGltZSA+Pj4gMjQgJiAweEZGLCB1cHBlcldvcmRCYXNlTWVkaWFEZWNvZGVUaW1lID4+PiAxNiAmIDB4RkYsIHVwcGVyV29yZEJhc2VNZWRpYURlY29kZVRpbWUgPj4+IDggJiAweEZGLCB1cHBlcldvcmRCYXNlTWVkaWFEZWNvZGVUaW1lICYgMHhGRiwgbG93ZXJXb3JkQmFzZU1lZGlhRGVjb2RlVGltZSA+Pj4gMjQgJiAweEZGLCBsb3dlcldvcmRCYXNlTWVkaWFEZWNvZGVUaW1lID4+PiAxNiAmIDB4RkYsIGxvd2VyV29yZEJhc2VNZWRpYURlY29kZVRpbWUgPj4+IDggJiAweEZGLCBsb3dlcldvcmRCYXNlTWVkaWFEZWNvZGVUaW1lICYgMHhGRl0pKTsgLy8gdGhlIGRhdGEgb2Zmc2V0IHNwZWNpZmllcyB0aGUgbnVtYmVyIG9mIGJ5dGVzIGZyb20gdGhlIHN0YXJ0IG9mXG4gICAgICAvLyB0aGUgY29udGFpbmluZyBtb29mIHRvIHRoZSBmaXJzdCBwYXlsb2FkIGJ5dGUgb2YgdGhlIGFzc29jaWF0ZWRcbiAgICAgIC8vIG1kYXRcblxuICAgICAgZGF0YU9mZnNldCA9IDMyICsgLy8gdGZoZFxuICAgICAgMjAgKyAvLyB0ZmR0XG4gICAgICA4ICsgLy8gdHJhZiBoZWFkZXJcbiAgICAgIDE2ICsgLy8gbWZoZFxuICAgICAgOCArIC8vIG1vb2YgaGVhZGVyXG4gICAgICA4OyAvLyBtZGF0IGhlYWRlclxuICAgICAgLy8gYXVkaW8gdHJhY2tzIHJlcXVpcmUgbGVzcyBtZXRhZGF0YVxuXG4gICAgICBpZiAodHJhY2sudHlwZSA9PT0gJ2F1ZGlvJykge1xuICAgICAgICB0cmFja0ZyYWdtZW50UnVuID0gdHJ1bih0cmFjaywgZGF0YU9mZnNldCk7XG4gICAgICAgIHJldHVybiBib3godHlwZXMudHJhZiwgdHJhY2tGcmFnbWVudEhlYWRlciwgdHJhY2tGcmFnbWVudERlY29kZVRpbWUsIHRyYWNrRnJhZ21lbnRSdW4pO1xuICAgICAgfSAvLyB2aWRlbyB0cmFja3Mgc2hvdWxkIGNvbnRhaW4gYW4gaW5kZXBlbmRlbnQgYW5kIGRpc3Bvc2FibGUgc2FtcGxlc1xuICAgICAgLy8gYm94IChzZHRwKVxuICAgICAgLy8gZ2VuZXJhdGUgb25lIGFuZCBhZGp1c3Qgb2Zmc2V0cyB0byBtYXRjaFxuXG5cbiAgICAgIHNhbXBsZURlcGVuZGVuY3lUYWJsZSA9IHNkdHAodHJhY2spO1xuICAgICAgdHJhY2tGcmFnbWVudFJ1biA9IHRydW4odHJhY2ssIHNhbXBsZURlcGVuZGVuY3lUYWJsZS5sZW5ndGggKyBkYXRhT2Zmc2V0KTtcbiAgICAgIHJldHVybiBib3godHlwZXMudHJhZiwgdHJhY2tGcmFnbWVudEhlYWRlciwgdHJhY2tGcmFnbWVudERlY29kZVRpbWUsIHRyYWNrRnJhZ21lbnRSdW4sIHNhbXBsZURlcGVuZGVuY3lUYWJsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBhIHRyYWNrIGJveC5cbiAgICAgKiBAcGFyYW0gdHJhY2sge29iamVjdH0gYSB0cmFjayBkZWZpbml0aW9uXG4gICAgICogQHJldHVybiB7VWludDhBcnJheX0gdGhlIHRyYWNrIGJveFxuICAgICAqL1xuXG5cbiAgICB0cmFrID0gZnVuY3Rpb24gdHJhayh0cmFjaykge1xuICAgICAgdHJhY2suZHVyYXRpb24gPSB0cmFjay5kdXJhdGlvbiB8fCAweGZmZmZmZmZmO1xuICAgICAgcmV0dXJuIGJveCh0eXBlcy50cmFrLCB0a2hkKHRyYWNrKSwgbWRpYSh0cmFjaykpO1xuICAgIH07XG5cbiAgICB0cmV4ID0gZnVuY3Rpb24gdHJleCh0cmFjaykge1xuICAgICAgdmFyIHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KFsweDAwLCAvLyB2ZXJzaW9uIDBcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXG4gICAgICAodHJhY2suaWQgJiAweEZGMDAwMDAwKSA+PiAyNCwgKHRyYWNrLmlkICYgMHhGRjAwMDApID4+IDE2LCAodHJhY2suaWQgJiAweEZGMDApID4+IDgsIHRyYWNrLmlkICYgMHhGRiwgLy8gdHJhY2tfSURcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsIC8vIGRlZmF1bHRfc2FtcGxlX2Rlc2NyaXB0aW9uX2luZGV4XG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBkZWZhdWx0X3NhbXBsZV9kdXJhdGlvblxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gZGVmYXVsdF9zYW1wbGVfc2l6ZVxuICAgICAgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMSAvLyBkZWZhdWx0X3NhbXBsZV9mbGFnc1xuICAgICAgXSk7IC8vIHRoZSBsYXN0IHR3byBieXRlcyBvZiBkZWZhdWx0X3NhbXBsZV9mbGFncyBpcyB0aGUgc2FtcGxlXG4gICAgICAvLyBkZWdyYWRhdGlvbiBwcmlvcml0eSwgYSBoaW50IGFib3V0IHRoZSBpbXBvcnRhbmNlIG9mIHRoaXMgc2FtcGxlXG4gICAgICAvLyByZWxhdGl2ZSB0byBvdGhlcnMuIExvd2VyIHRoZSBkZWdyYWRhdGlvbiBwcmlvcml0eSBmb3IgYWxsIHNhbXBsZVxuICAgICAgLy8gdHlwZXMgb3RoZXIgdGhhbiB2aWRlby5cblxuICAgICAgaWYgKHRyYWNrLnR5cGUgIT09ICd2aWRlbycpIHtcbiAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSA9IDB4MDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBib3godHlwZXMudHJleCwgcmVzdWx0KTtcbiAgICB9O1xuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhdWRpb1RydW4sIHZpZGVvVHJ1biwgdHJ1bkhlYWRlcjsgLy8gVGhpcyBtZXRob2QgYXNzdW1lcyBhbGwgc2FtcGxlcyBhcmUgdW5pZm9ybS4gVGhhdCBpcywgaWYgYVxuICAgICAgLy8gZHVyYXRpb24gaXMgcHJlc2VudCBmb3IgdGhlIGZpcnN0IHNhbXBsZSwgaXQgd2lsbCBiZSBwcmVzZW50IGZvclxuICAgICAgLy8gYWxsIHN1YnNlcXVlbnQgc2FtcGxlcy5cbiAgICAgIC8vIHNlZSBJU08vSUVDIDE0NDk2LTEyOjIwMTIsIFNlY3Rpb24gOC44LjguMVxuXG4gICAgICB0cnVuSGVhZGVyID0gZnVuY3Rpb24gdHJ1bkhlYWRlcihzYW1wbGVzLCBvZmZzZXQpIHtcbiAgICAgICAgdmFyIGR1cmF0aW9uUHJlc2VudCA9IDAsXG4gICAgICAgICAgICBzaXplUHJlc2VudCA9IDAsXG4gICAgICAgICAgICBmbGFnc1ByZXNlbnQgPSAwLFxuICAgICAgICAgICAgY29tcG9zaXRpb25UaW1lT2Zmc2V0ID0gMDsgLy8gdHJ1biBmbGFnIGNvbnN0YW50c1xuXG4gICAgICAgIGlmIChzYW1wbGVzLmxlbmd0aCkge1xuICAgICAgICAgIGlmIChzYW1wbGVzWzBdLmR1cmF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGR1cmF0aW9uUHJlc2VudCA9IDB4MTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2FtcGxlc1swXS5zaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNpemVQcmVzZW50ID0gMHgyO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzYW1wbGVzWzBdLmZsYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZsYWdzUHJlc2VudCA9IDB4NDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2FtcGxlc1swXS5jb21wb3NpdGlvblRpbWVPZmZzZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29tcG9zaXRpb25UaW1lT2Zmc2V0ID0gMHg4O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbMHgwMCwgLy8gdmVyc2lvbiAwXG4gICAgICAgIDB4MDAsIGR1cmF0aW9uUHJlc2VudCB8IHNpemVQcmVzZW50IHwgZmxhZ3NQcmVzZW50IHwgY29tcG9zaXRpb25UaW1lT2Zmc2V0LCAweDAxLCAvLyBmbGFnc1xuICAgICAgICAoc2FtcGxlcy5sZW5ndGggJiAweEZGMDAwMDAwKSA+Pj4gMjQsIChzYW1wbGVzLmxlbmd0aCAmIDB4RkYwMDAwKSA+Pj4gMTYsIChzYW1wbGVzLmxlbmd0aCAmIDB4RkYwMCkgPj4+IDgsIHNhbXBsZXMubGVuZ3RoICYgMHhGRiwgLy8gc2FtcGxlX2NvdW50XG4gICAgICAgIChvZmZzZXQgJiAweEZGMDAwMDAwKSA+Pj4gMjQsIChvZmZzZXQgJiAweEZGMDAwMCkgPj4+IDE2LCAob2Zmc2V0ICYgMHhGRjAwKSA+Pj4gOCwgb2Zmc2V0ICYgMHhGRiAvLyBkYXRhX29mZnNldFxuICAgICAgICBdO1xuICAgICAgfTtcblxuICAgICAgdmlkZW9UcnVuID0gZnVuY3Rpb24gdmlkZW9UcnVuKHRyYWNrLCBvZmZzZXQpIHtcbiAgICAgICAgdmFyIGJ5dGVzLCBzYW1wbGVzLCBzYW1wbGUsIGk7XG4gICAgICAgIHNhbXBsZXMgPSB0cmFjay5zYW1wbGVzIHx8IFtdO1xuICAgICAgICBvZmZzZXQgKz0gOCArIDEyICsgMTYgKiBzYW1wbGVzLmxlbmd0aDtcbiAgICAgICAgYnl0ZXMgPSB0cnVuSGVhZGVyKHNhbXBsZXMsIG9mZnNldCk7XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHNhbXBsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBzYW1wbGUgPSBzYW1wbGVzW2ldO1xuICAgICAgICAgIGJ5dGVzID0gYnl0ZXMuY29uY2F0KFsoc2FtcGxlLmR1cmF0aW9uICYgMHhGRjAwMDAwMCkgPj4+IDI0LCAoc2FtcGxlLmR1cmF0aW9uICYgMHhGRjAwMDApID4+PiAxNiwgKHNhbXBsZS5kdXJhdGlvbiAmIDB4RkYwMCkgPj4+IDgsIHNhbXBsZS5kdXJhdGlvbiAmIDB4RkYsIC8vIHNhbXBsZV9kdXJhdGlvblxuICAgICAgICAgIChzYW1wbGUuc2l6ZSAmIDB4RkYwMDAwMDApID4+PiAyNCwgKHNhbXBsZS5zaXplICYgMHhGRjAwMDApID4+PiAxNiwgKHNhbXBsZS5zaXplICYgMHhGRjAwKSA+Pj4gOCwgc2FtcGxlLnNpemUgJiAweEZGLCAvLyBzYW1wbGVfc2l6ZVxuICAgICAgICAgIHNhbXBsZS5mbGFncy5pc0xlYWRpbmcgPDwgMiB8IHNhbXBsZS5mbGFncy5kZXBlbmRzT24sIHNhbXBsZS5mbGFncy5pc0RlcGVuZGVkT24gPDwgNiB8IHNhbXBsZS5mbGFncy5oYXNSZWR1bmRhbmN5IDw8IDQgfCBzYW1wbGUuZmxhZ3MucGFkZGluZ1ZhbHVlIDw8IDEgfCBzYW1wbGUuZmxhZ3MuaXNOb25TeW5jU2FtcGxlLCBzYW1wbGUuZmxhZ3MuZGVncmFkYXRpb25Qcmlvcml0eSAmIDB4RjAgPDwgOCwgc2FtcGxlLmZsYWdzLmRlZ3JhZGF0aW9uUHJpb3JpdHkgJiAweDBGLCAvLyBzYW1wbGVfZmxhZ3NcbiAgICAgICAgICAoc2FtcGxlLmNvbXBvc2l0aW9uVGltZU9mZnNldCAmIDB4RkYwMDAwMDApID4+PiAyNCwgKHNhbXBsZS5jb21wb3NpdGlvblRpbWVPZmZzZXQgJiAweEZGMDAwMCkgPj4+IDE2LCAoc2FtcGxlLmNvbXBvc2l0aW9uVGltZU9mZnNldCAmIDB4RkYwMCkgPj4+IDgsIHNhbXBsZS5jb21wb3NpdGlvblRpbWVPZmZzZXQgJiAweEZGIC8vIHNhbXBsZV9jb21wb3NpdGlvbl90aW1lX29mZnNldFxuICAgICAgICAgIF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJveCh0eXBlcy50cnVuLCBuZXcgVWludDhBcnJheShieXRlcykpO1xuICAgICAgfTtcblxuICAgICAgYXVkaW9UcnVuID0gZnVuY3Rpb24gYXVkaW9UcnVuKHRyYWNrLCBvZmZzZXQpIHtcbiAgICAgICAgdmFyIGJ5dGVzLCBzYW1wbGVzLCBzYW1wbGUsIGk7XG4gICAgICAgIHNhbXBsZXMgPSB0cmFjay5zYW1wbGVzIHx8IFtdO1xuICAgICAgICBvZmZzZXQgKz0gOCArIDEyICsgOCAqIHNhbXBsZXMubGVuZ3RoO1xuICAgICAgICBieXRlcyA9IHRydW5IZWFkZXIoc2FtcGxlcywgb2Zmc2V0KTtcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2FtcGxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHNhbXBsZSA9IHNhbXBsZXNbaV07XG4gICAgICAgICAgYnl0ZXMgPSBieXRlcy5jb25jYXQoWyhzYW1wbGUuZHVyYXRpb24gJiAweEZGMDAwMDAwKSA+Pj4gMjQsIChzYW1wbGUuZHVyYXRpb24gJiAweEZGMDAwMCkgPj4+IDE2LCAoc2FtcGxlLmR1cmF0aW9uICYgMHhGRjAwKSA+Pj4gOCwgc2FtcGxlLmR1cmF0aW9uICYgMHhGRiwgLy8gc2FtcGxlX2R1cmF0aW9uXG4gICAgICAgICAgKHNhbXBsZS5zaXplICYgMHhGRjAwMDAwMCkgPj4+IDI0LCAoc2FtcGxlLnNpemUgJiAweEZGMDAwMCkgPj4+IDE2LCAoc2FtcGxlLnNpemUgJiAweEZGMDApID4+PiA4LCBzYW1wbGUuc2l6ZSAmIDB4RkZdKTsgLy8gc2FtcGxlX3NpemVcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBib3godHlwZXMudHJ1biwgbmV3IFVpbnQ4QXJyYXkoYnl0ZXMpKTtcbiAgICAgIH07XG5cbiAgICAgIHRydW4gPSBmdW5jdGlvbiB0cnVuKHRyYWNrLCBvZmZzZXQpIHtcbiAgICAgICAgaWYgKHRyYWNrLnR5cGUgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICByZXR1cm4gYXVkaW9UcnVuKHRyYWNrLCBvZmZzZXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZpZGVvVHJ1bih0cmFjaywgb2Zmc2V0KTtcbiAgICAgIH07XG4gICAgfSkoKTtcblxuICAgIHZhciBtcDRHZW5lcmF0b3IgPSB7XG4gICAgICBmdHlwOiBmdHlwLFxuICAgICAgbWRhdDogbWRhdCxcbiAgICAgIG1vb2Y6IG1vb2YsXG4gICAgICBtb292OiBtb292LFxuICAgICAgaW5pdFNlZ21lbnQ6IGZ1bmN0aW9uIGluaXRTZWdtZW50KHRyYWNrcykge1xuICAgICAgICB2YXIgZmlsZVR5cGUgPSBmdHlwKCksXG4gICAgICAgICAgICBtb3ZpZSA9IG1vb3YodHJhY2tzKSxcbiAgICAgICAgICAgIHJlc3VsdDtcbiAgICAgICAgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkoZmlsZVR5cGUuYnl0ZUxlbmd0aCArIG1vdmllLmJ5dGVMZW5ndGgpO1xuICAgICAgICByZXN1bHQuc2V0KGZpbGVUeXBlKTtcbiAgICAgICAgcmVzdWx0LnNldChtb3ZpZSwgZmlsZVR5cGUuYnl0ZUxlbmd0aCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciB0b1Vuc2lnbmVkID0gZnVuY3Rpb24gdG9VbnNpZ25lZCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID4+PiAwO1xuICAgIH07XG5cbiAgICB2YXIgYmluID0ge1xuICAgICAgdG9VbnNpZ25lZDogdG9VbnNpZ25lZFxuICAgIH07XG4gICAgdmFyIHRvVW5zaWduZWQkMSA9IGJpbi50b1Vuc2lnbmVkO1xuXG4gICAgdmFyIF9maW5kQm94LCBwYXJzZVR5cGUsIHRpbWVzY2FsZSwgc3RhcnRUaW1lLCBnZXRWaWRlb1RyYWNrSWRzOyAvLyBGaW5kIHRoZSBkYXRhIGZvciBhIGJveCBzcGVjaWZpZWQgYnkgaXRzIHBhdGhcblxuXG4gICAgX2ZpbmRCb3ggPSBmdW5jdGlvbiBmaW5kQm94KGRhdGEsIHBhdGgpIHtcbiAgICAgIHZhciByZXN1bHRzID0gW10sXG4gICAgICAgICAgaSxcbiAgICAgICAgICBzaXplLFxuICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgZW5kLFxuICAgICAgICAgIHN1YnJlc3VsdHM7XG5cbiAgICAgIGlmICghcGF0aC5sZW5ndGgpIHtcbiAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCB0aGUgc2VhcmNoIGZvciBlbXB0eSBwYXRoc1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgZm9yIChpID0gMDsgaSA8IGRhdGEuYnl0ZUxlbmd0aDspIHtcbiAgICAgICAgc2l6ZSA9IHRvVW5zaWduZWQkMShkYXRhW2ldIDw8IDI0IHwgZGF0YVtpICsgMV0gPDwgMTYgfCBkYXRhW2kgKyAyXSA8PCA4IHwgZGF0YVtpICsgM10pO1xuICAgICAgICB0eXBlID0gcGFyc2VUeXBlKGRhdGEuc3ViYXJyYXkoaSArIDQsIGkgKyA4KSk7XG4gICAgICAgIGVuZCA9IHNpemUgPiAxID8gaSArIHNpemUgOiBkYXRhLmJ5dGVMZW5ndGg7XG5cbiAgICAgICAgaWYgKHR5cGUgPT09IHBhdGhbMF0pIHtcbiAgICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgdGhlIGVuZCBvZiB0aGUgcGF0aCBhbmQgd2UndmUgZm91bmQgdGhlIGJveCB3ZSB3ZXJlXG4gICAgICAgICAgICAvLyBsb29raW5nIGZvclxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGRhdGEuc3ViYXJyYXkoaSArIDgsIGVuZCkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyByZWN1cnNpdmVseSBzZWFyY2ggZm9yIHRoZSBuZXh0IGJveCBhbG9uZyB0aGUgcGF0aFxuICAgICAgICAgICAgc3VicmVzdWx0cyA9IF9maW5kQm94KGRhdGEuc3ViYXJyYXkoaSArIDgsIGVuZCksIHBhdGguc2xpY2UoMSkpO1xuXG4gICAgICAgICAgICBpZiAoc3VicmVzdWx0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuY29uY2F0KHN1YnJlc3VsdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGkgPSBlbmQ7XG4gICAgICB9IC8vIHdlJ3ZlIGZpbmlzaGVkIHNlYXJjaGluZyBhbGwgb2YgZGF0YVxuXG5cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFTQ0lJIGVuY29kZWQgZm91ciBieXRlIGJ1ZmZlci5cbiAgICAgKiBAcGFyYW0gYnVmZmVyIHtVaW50OEFycmF5fSBhIGZvdXItYnl0ZSBidWZmZXIgdG8gdHJhbnNsYXRlXG4gICAgICogQHJldHVybiB7c3RyaW5nfSB0aGUgY29ycmVzcG9uZGluZyBzdHJpbmdcbiAgICAgKi9cblxuXG4gICAgcGFyc2VUeXBlID0gZnVuY3Rpb24gcGFyc2VUeXBlKGJ1ZmZlcikge1xuICAgICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmZmVyWzBdKTtcbiAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZmZlclsxXSk7XG4gICAgICByZXN1bHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZmZXJbMl0pO1xuICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmZmVyWzNdKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYW4gTVA0IGluaXRpYWxpemF0aW9uIHNlZ21lbnQgYW5kIGV4dHJhY3RzIHRoZSB0aW1lc2NhbGVcbiAgICAgKiB2YWx1ZXMgZm9yIGFueSBkZWNsYXJlZCB0cmFja3MuIFRpbWVzY2FsZSB2YWx1ZXMgaW5kaWNhdGUgdGhlXG4gICAgICogbnVtYmVyIG9mIGNsb2NrIHRpY2tzIHBlciBzZWNvbmQgdG8gYXNzdW1lIGZvciB0aW1lLWJhc2VkIHZhbHVlc1xuICAgICAqIGVsc2V3aGVyZSBpbiB0aGUgTVA0LlxuICAgICAqXG4gICAgICogVG8gZGV0ZXJtaW5lIHRoZSBzdGFydCB0aW1lIG9mIGFuIE1QNCwgeW91IG5lZWQgdHdvIHBpZWNlcyBvZlxuICAgICAqIGluZm9ybWF0aW9uOiB0aGUgdGltZXNjYWxlIHVuaXQgYW5kIHRoZSBlYXJsaWVzdCBiYXNlIG1lZGlhIGRlY29kZVxuICAgICAqIHRpbWUuIE11bHRpcGxlIHRpbWVzY2FsZXMgY2FuIGJlIHNwZWNpZmllZCB3aXRoaW4gYW4gTVA0IGJ1dCB0aGVcbiAgICAgKiBiYXNlIG1lZGlhIGRlY29kZSB0aW1lIGlzIGFsd2F5cyBleHByZXNzZWQgaW4gdGhlIHRpbWVzY2FsZSBmcm9tXG4gICAgICogdGhlIG1lZGlhIGhlYWRlciBib3ggZm9yIHRoZSB0cmFjazpcbiAgICAgKiBgYGBcbiAgICAgKiBtb292ID4gdHJhayA+IG1kaWEgPiBtZGhkLnRpbWVzY2FsZVxuICAgICAqIGBgYFxuICAgICAqIEBwYXJhbSBpbml0IHtVaW50OEFycmF5fSB0aGUgYnl0ZXMgb2YgdGhlIGluaXQgc2VnbWVudFxuICAgICAqIEByZXR1cm4ge29iamVjdH0gYSBoYXNoIG9mIHRyYWNrIGlkcyB0byB0aW1lc2NhbGUgdmFsdWVzIG9yIG51bGwgaWZcbiAgICAgKiB0aGUgaW5pdCBzZWdtZW50IGlzIG1hbGZvcm1lZC5cbiAgICAgKi9cblxuXG4gICAgdGltZXNjYWxlID0gZnVuY3Rpb24gdGltZXNjYWxlKGluaXQpIHtcbiAgICAgIHZhciByZXN1bHQgPSB7fSxcbiAgICAgICAgICB0cmFrcyA9IF9maW5kQm94KGluaXQsIFsnbW9vdicsICd0cmFrJ10pOyAvLyBtZGhkIHRpbWVzY2FsZVxuXG5cbiAgICAgIHJldHVybiB0cmFrcy5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwgdHJhaykge1xuICAgICAgICB2YXIgdGtoZCwgdmVyc2lvbiwgaW5kZXgsIGlkLCBtZGhkO1xuICAgICAgICB0a2hkID0gX2ZpbmRCb3godHJhaywgWyd0a2hkJ10pWzBdO1xuXG4gICAgICAgIGlmICghdGtoZCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmVyc2lvbiA9IHRraGRbMF07XG4gICAgICAgIGluZGV4ID0gdmVyc2lvbiA9PT0gMCA/IDEyIDogMjA7XG4gICAgICAgIGlkID0gdG9VbnNpZ25lZCQxKHRraGRbaW5kZXhdIDw8IDI0IHwgdGtoZFtpbmRleCArIDFdIDw8IDE2IHwgdGtoZFtpbmRleCArIDJdIDw8IDggfCB0a2hkW2luZGV4ICsgM10pO1xuICAgICAgICBtZGhkID0gX2ZpbmRCb3godHJhaywgWydtZGlhJywgJ21kaGQnXSlbMF07XG5cbiAgICAgICAgaWYgKCFtZGhkKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB2ZXJzaW9uID0gbWRoZFswXTtcbiAgICAgICAgaW5kZXggPSB2ZXJzaW9uID09PSAwID8gMTIgOiAyMDtcbiAgICAgICAgcmVzdWx0W2lkXSA9IHRvVW5zaWduZWQkMShtZGhkW2luZGV4XSA8PCAyNCB8IG1kaGRbaW5kZXggKyAxXSA8PCAxNiB8IG1kaGRbaW5kZXggKyAyXSA8PCA4IHwgbWRoZFtpbmRleCArIDNdKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0sIHJlc3VsdCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgdGhlIGJhc2UgbWVkaWEgZGVjb2RlIHN0YXJ0IHRpbWUsIGluIHNlY29uZHMsIGZvciBhbiBNUDRcbiAgICAgKiBmcmFnbWVudC4gSWYgbXVsdGlwbGUgZnJhZ21lbnRzIGFyZSBzcGVjaWZpZWQsIHRoZSBlYXJsaWVzdCB0aW1lIGlzXG4gICAgICogcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBUaGUgYmFzZSBtZWRpYSBkZWNvZGUgdGltZSBjYW4gYmUgcGFyc2VkIGZyb20gdHJhY2sgZnJhZ21lbnRcbiAgICAgKiBtZXRhZGF0YTpcbiAgICAgKiBgYGBcbiAgICAgKiBtb29mID4gdHJhZiA+IHRmZHQuYmFzZU1lZGlhRGVjb2RlVGltZVxuICAgICAqIGBgYFxuICAgICAqIEl0IHJlcXVpcmVzIHRoZSB0aW1lc2NhbGUgdmFsdWUgZnJvbSB0aGUgbWRoZCB0byBpbnRlcnByZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGltZXNjYWxlIHtvYmplY3R9IGEgaGFzaCBvZiB0cmFjayBpZHMgdG8gdGltZXNjYWxlIHZhbHVlcy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IHRoZSBlYXJsaWVzdCBiYXNlIG1lZGlhIGRlY29kZSBzdGFydCB0aW1lIGZvciB0aGVcbiAgICAgKiBmcmFnbWVudCwgaW4gc2Vjb25kc1xuICAgICAqL1xuXG5cbiAgICBzdGFydFRpbWUgPSBmdW5jdGlvbiBzdGFydFRpbWUodGltZXNjYWxlLCBmcmFnbWVudCkge1xuICAgICAgdmFyIHRyYWZzLCBiYXNlVGltZXMsIHJlc3VsdDsgLy8gd2UgbmVlZCBpbmZvIGZyb20gdHdvIGNoaWxkcmVuZCBvZiBlYWNoIHRyYWNrIGZyYWdtZW50IGJveFxuXG4gICAgICB0cmFmcyA9IF9maW5kQm94KGZyYWdtZW50LCBbJ21vb2YnLCAndHJhZiddKTsgLy8gZGV0ZXJtaW5lIHRoZSBzdGFydCB0aW1lcyBmb3IgZWFjaCB0cmFja1xuXG4gICAgICBiYXNlVGltZXMgPSBbXS5jb25jYXQuYXBwbHkoW10sIHRyYWZzLm1hcChmdW5jdGlvbiAodHJhZikge1xuICAgICAgICByZXR1cm4gX2ZpbmRCb3godHJhZiwgWyd0ZmhkJ10pLm1hcChmdW5jdGlvbiAodGZoZCkge1xuICAgICAgICAgIHZhciBpZCwgc2NhbGUsIGJhc2VUaW1lOyAvLyBnZXQgdGhlIHRyYWNrIGlkIGZyb20gdGhlIHRmaGRcblxuICAgICAgICAgIGlkID0gdG9VbnNpZ25lZCQxKHRmaGRbNF0gPDwgMjQgfCB0ZmhkWzVdIDw8IDE2IHwgdGZoZFs2XSA8PCA4IHwgdGZoZFs3XSk7IC8vIGFzc3VtZSBhIDkwa0h6IGNsb2NrIGlmIG5vIHRpbWVzY2FsZSB3YXMgc3BlY2lmaWVkXG5cbiAgICAgICAgICBzY2FsZSA9IHRpbWVzY2FsZVtpZF0gfHwgOTBlMzsgLy8gZ2V0IHRoZSBiYXNlIG1lZGlhIGRlY29kZSB0aW1lIGZyb20gdGhlIHRmZHRcblxuICAgICAgICAgIGJhc2VUaW1lID0gX2ZpbmRCb3godHJhZiwgWyd0ZmR0J10pLm1hcChmdW5jdGlvbiAodGZkdCkge1xuICAgICAgICAgICAgdmFyIHZlcnNpb24sIHJlc3VsdDtcbiAgICAgICAgICAgIHZlcnNpb24gPSB0ZmR0WzBdO1xuICAgICAgICAgICAgcmVzdWx0ID0gdG9VbnNpZ25lZCQxKHRmZHRbNF0gPDwgMjQgfCB0ZmR0WzVdIDw8IDE2IHwgdGZkdFs2XSA8PCA4IHwgdGZkdFs3XSk7XG5cbiAgICAgICAgICAgIGlmICh2ZXJzaW9uID09PSAxKSB7XG4gICAgICAgICAgICAgIHJlc3VsdCAqPSBNYXRoLnBvdygyLCAzMik7XG4gICAgICAgICAgICAgIHJlc3VsdCArPSB0b1Vuc2lnbmVkJDEodGZkdFs4XSA8PCAyNCB8IHRmZHRbOV0gPDwgMTYgfCB0ZmR0WzEwXSA8PCA4IHwgdGZkdFsxMV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIH0pWzBdO1xuICAgICAgICAgIGJhc2VUaW1lID0gYmFzZVRpbWUgfHwgSW5maW5pdHk7IC8vIGNvbnZlcnQgYmFzZSB0aW1lIHRvIHNlY29uZHNcblxuICAgICAgICAgIHJldHVybiBiYXNlVGltZSAvIHNjYWxlO1xuICAgICAgICB9KTtcbiAgICAgIH0pKTsgLy8gcmV0dXJuIHRoZSBtaW5pbXVtXG5cbiAgICAgIHJlc3VsdCA9IE1hdGgubWluLmFwcGx5KG51bGwsIGJhc2VUaW1lcyk7XG4gICAgICByZXR1cm4gaXNGaW5pdGUocmVzdWx0KSA/IHJlc3VsdCA6IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgICogRmluZCB0aGUgdHJhY2tJZHMgb2YgdGhlIHZpZGVvIHRyYWNrcyBpbiB0aGlzIHNvdXJjZS5cbiAgICAgICogRm91bmQgYnkgcGFyc2luZyB0aGUgSGFuZGxlciBSZWZlcmVuY2UgYW5kIFRyYWNrIEhlYWRlciBCb3hlczpcbiAgICAgICogICBtb292ID4gdHJhayA+IG1kaWEgPiBoZGxyXG4gICAgICAqICAgbW9vdiA+IHRyYWsgPiB0a2hkXG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7VWludDhBcnJheX0gaW5pdCAtIFRoZSBieXRlcyBvZiB0aGUgaW5pdCBzZWdtZW50IGZvciB0aGlzIHNvdXJjZVxuICAgICAgKiBAcmV0dXJuIHtOdW1iZXJbXX0gQSBsaXN0IG9mIHRyYWNrSWRzXG4gICAgICAqXG4gICAgICAqIEBzZWUgSVNPLUJNRkYtMTIvMjAxNSwgU2VjdGlvbiA4LjQuM1xuICAgICAqKi9cblxuXG4gICAgZ2V0VmlkZW9UcmFja0lkcyA9IGZ1bmN0aW9uIGdldFZpZGVvVHJhY2tJZHMoaW5pdCkge1xuICAgICAgdmFyIHRyYWtzID0gX2ZpbmRCb3goaW5pdCwgWydtb292JywgJ3RyYWsnXSk7XG5cbiAgICAgIHZhciB2aWRlb1RyYWNrSWRzID0gW107XG4gICAgICB0cmFrcy5mb3JFYWNoKGZ1bmN0aW9uICh0cmFrKSB7XG4gICAgICAgIHZhciBoZGxycyA9IF9maW5kQm94KHRyYWssIFsnbWRpYScsICdoZGxyJ10pO1xuXG4gICAgICAgIHZhciB0a2hkcyA9IF9maW5kQm94KHRyYWssIFsndGtoZCddKTtcblxuICAgICAgICBoZGxycy5mb3JFYWNoKGZ1bmN0aW9uIChoZGxyLCBpbmRleCkge1xuICAgICAgICAgIHZhciBoYW5kbGVyVHlwZSA9IHBhcnNlVHlwZShoZGxyLnN1YmFycmF5KDgsIDEyKSk7XG4gICAgICAgICAgdmFyIHRraGQgPSB0a2hkc1tpbmRleF07XG4gICAgICAgICAgdmFyIHZpZXc7XG4gICAgICAgICAgdmFyIHZlcnNpb247XG4gICAgICAgICAgdmFyIHRyYWNrSWQ7XG5cbiAgICAgICAgICBpZiAoaGFuZGxlclR5cGUgPT09ICd2aWRlJykge1xuICAgICAgICAgICAgdmlldyA9IG5ldyBEYXRhVmlldyh0a2hkLmJ1ZmZlciwgdGtoZC5ieXRlT2Zmc2V0LCB0a2hkLmJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgdmVyc2lvbiA9IHZpZXcuZ2V0VWludDgoMCk7XG4gICAgICAgICAgICB0cmFja0lkID0gdmVyc2lvbiA9PT0gMCA/IHZpZXcuZ2V0VWludDMyKDEyKSA6IHZpZXcuZ2V0VWludDMyKDIwKTtcbiAgICAgICAgICAgIHZpZGVvVHJhY2tJZHMucHVzaCh0cmFja0lkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdmlkZW9UcmFja0lkcztcbiAgICB9O1xuXG4gICAgdmFyIHByb2JlID0ge1xuICAgICAgZmluZEJveDogX2ZpbmRCb3gsXG4gICAgICBwYXJzZVR5cGU6IHBhcnNlVHlwZSxcbiAgICAgIHRpbWVzY2FsZTogdGltZXNjYWxlLFxuICAgICAgc3RhcnRUaW1lOiBzdGFydFRpbWUsXG4gICAgICB2aWRlb1RyYWNrSWRzOiBnZXRWaWRlb1RyYWNrSWRzXG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBtdXguanNcbiAgICAgKlxuICAgICAqIENvcHlyaWdodCAoYykgMjAxNCBCcmlnaHRjb3ZlXG4gICAgICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAgICAgKlxuICAgICAqIEEgbGlnaHR3ZWlnaHQgcmVhZGFibGUgc3RyZWFtIGltcGxlbWVudGlvbiB0aGF0IGhhbmRsZXMgZXZlbnQgZGlzcGF0Y2hpbmcuXG4gICAgICogT2JqZWN0cyB0aGF0IGluaGVyaXQgZnJvbSBzdHJlYW1zIHNob3VsZCBjYWxsIGluaXQgaW4gdGhlaXIgY29uc3RydWN0b3JzLlxuICAgICAqL1xuXG4gICAgdmFyIFN0cmVhbSA9IGZ1bmN0aW9uIFN0cmVhbSgpIHtcbiAgICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQWRkIGEgbGlzdGVuZXIgZm9yIGEgc3BlY2lmaWVkIGV2ZW50IHR5cGUuXG4gICAgICAgICAqIEBwYXJhbSB0eXBlIHtzdHJpbmd9IHRoZSBldmVudCBuYW1lXG4gICAgICAgICAqIEBwYXJhbSBsaXN0ZW5lciB7ZnVuY3Rpb259IHRoZSBjYWxsYmFjayB0byBiZSBpbnZva2VkIHdoZW4gYW4gZXZlbnQgb2ZcbiAgICAgICAgICogdGhlIHNwZWNpZmllZCB0eXBlIG9jY3Vyc1xuICAgICAgICAgKi9cblxuICAgICAgICB0aGlzLm9uID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgICAgaWYgKCFsaXN0ZW5lcnNbdHlwZV0pIHtcbiAgICAgICAgICAgIGxpc3RlbmVyc1t0eXBlXSA9IFtdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxpc3RlbmVyc1t0eXBlXSA9IGxpc3RlbmVyc1t0eXBlXS5jb25jYXQobGlzdGVuZXIpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVtb3ZlIGEgbGlzdGVuZXIgZm9yIGEgc3BlY2lmaWVkIGV2ZW50IHR5cGUuXG4gICAgICAgICAqIEBwYXJhbSB0eXBlIHtzdHJpbmd9IHRoZSBldmVudCBuYW1lXG4gICAgICAgICAqIEBwYXJhbSBsaXN0ZW5lciB7ZnVuY3Rpb259IGEgZnVuY3Rpb24gcHJldmlvdXNseSByZWdpc3RlcmVkIGZvciB0aGlzXG4gICAgICAgICAqIHR5cGUgb2YgZXZlbnQgdGhyb3VnaCBgb25gXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgdGhpcy5vZmYgPSBmdW5jdGlvbiAodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgICB2YXIgaW5kZXg7XG5cbiAgICAgICAgICBpZiAoIWxpc3RlbmVyc1t0eXBlXSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGluZGV4ID0gbGlzdGVuZXJzW3R5cGVdLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgICAgIGxpc3RlbmVyc1t0eXBlXSA9IGxpc3RlbmVyc1t0eXBlXS5zbGljZSgpO1xuICAgICAgICAgIGxpc3RlbmVyc1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIHJldHVybiBpbmRleCA+IC0xO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogVHJpZ2dlciBhbiBldmVudCBvZiB0aGUgc3BlY2lmaWVkIHR5cGUgb24gdGhpcyBzdHJlYW0uIEFueSBhZGRpdGlvbmFsXG4gICAgICAgICAqIGFyZ3VtZW50cyB0byB0aGlzIGZ1bmN0aW9uIGFyZSBwYXNzZWQgYXMgcGFyYW1ldGVycyB0byBldmVudCBsaXN0ZW5lcnMuXG4gICAgICAgICAqIEBwYXJhbSB0eXBlIHtzdHJpbmd9IHRoZSBldmVudCBuYW1lXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgdGhpcy50cmlnZ2VyID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgICB2YXIgY2FsbGJhY2tzLCBpLCBsZW5ndGgsIGFyZ3M7XG4gICAgICAgICAgY2FsbGJhY2tzID0gbGlzdGVuZXJzW3R5cGVdO1xuXG4gICAgICAgICAgaWYgKCFjYWxsYmFja3MpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IC8vIFNsaWNpbmcgdGhlIGFyZ3VtZW50cyBvbiBldmVyeSBpbnZvY2F0aW9uIG9mIHRoaXMgbWV0aG9kXG4gICAgICAgICAgLy8gY2FuIGFkZCBhIHNpZ25pZmljYW50IGFtb3VudCBvZiBvdmVyaGVhZC4gQXZvaWQgdGhlXG4gICAgICAgICAgLy8gaW50ZXJtZWRpYXRlIG9iamVjdCBjcmVhdGlvbiBmb3IgdGhlIGNvbW1vbiBjYXNlIG9mIGFcbiAgICAgICAgICAvLyBzaW5nbGUgY2FsbGJhY2sgYXJndW1lbnRcblxuXG4gICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIGxlbmd0aCA9IGNhbGxiYWNrcy5sZW5ndGg7XG5cbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICBjYWxsYmFja3NbaV0uY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcmdzID0gW107XG4gICAgICAgICAgICBpID0gYXJndW1lbnRzLmxlbmd0aDtcblxuICAgICAgICAgICAgZm9yIChpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGVuZ3RoID0gY2FsbGJhY2tzLmxlbmd0aDtcblxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXN0cm95cyB0aGUgc3RyZWFtIGFuZCBjbGVhbnMgdXAuXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgdGhpcy5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGxpc3RlbmVycyA9IHt9O1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZvcndhcmRzIGFsbCBgZGF0YWAgZXZlbnRzIG9uIHRoaXMgc3RyZWFtIHRvIHRoZSBkZXN0aW5hdGlvbiBzdHJlYW0uIFRoZVxuICAgICAqIGRlc3RpbmF0aW9uIHN0cmVhbSBzaG91bGQgcHJvdmlkZSBhIG1ldGhvZCBgcHVzaGAgdG8gcmVjZWl2ZSB0aGUgZGF0YVxuICAgICAqIGV2ZW50cyBhcyB0aGV5IGFycml2ZS5cbiAgICAgKiBAcGFyYW0gZGVzdGluYXRpb24ge3N0cmVhbX0gdGhlIHN0cmVhbSB0aGF0IHdpbGwgcmVjZWl2ZSBhbGwgYGRhdGFgIGV2ZW50c1xuICAgICAqIEBwYXJhbSBhdXRvRmx1c2gge2Jvb2xlYW59IGlmIGZhbHNlLCB3ZSB3aWxsIG5vdCBjYWxsIGBmbHVzaGAgb24gdGhlIGRlc3RpbmF0aW9uXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hlbiB0aGUgY3VycmVudCBzdHJlYW0gZW1pdHMgYSAnZG9uZScgZXZlbnRcbiAgICAgKiBAc2VlIGh0dHA6Ly9ub2RlanMub3JnL2FwaS9zdHJlYW0uaHRtbCNzdHJlYW1fcmVhZGFibGVfcGlwZV9kZXN0aW5hdGlvbl9vcHRpb25zXG4gICAgICovXG5cblxuICAgIFN0cmVhbS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uIChkZXN0aW5hdGlvbikge1xuICAgICAgdGhpcy5vbignZGF0YScsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGRlc3RpbmF0aW9uLnB1c2goZGF0YSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub24oJ2RvbmUnLCBmdW5jdGlvbiAoZmx1c2hTb3VyY2UpIHtcbiAgICAgICAgZGVzdGluYXRpb24uZmx1c2goZmx1c2hTb3VyY2UpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGVzdGluYXRpb247XG4gICAgfTsgLy8gRGVmYXVsdCBzdHJlYW0gZnVuY3Rpb25zIHRoYXQgYXJlIGV4cGVjdGVkIHRvIGJlIG92ZXJyaWRkZW4gdG8gcGVyZm9ybVxuICAgIC8vIGFjdHVhbCB3b3JrLiBUaGVzZSBhcmUgcHJvdmlkZWQgYnkgdGhlIHByb3RvdHlwZSBhcyBhIHNvcnQgb2Ygbm8tb3BcbiAgICAvLyBpbXBsZW1lbnRhdGlvbiBzbyB0aGF0IHdlIGRvbid0IGhhdmUgdG8gY2hlY2sgZm9yIHRoZWlyIGV4aXN0ZW5jZSBpbiB0aGVcbiAgICAvLyBgcGlwZWAgZnVuY3Rpb24gYWJvdmUuXG5cblxuICAgIFN0cmVhbS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2RhdGEnLCBkYXRhKTtcbiAgICB9O1xuXG4gICAgU3RyZWFtLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uIChmbHVzaFNvdXJjZSkge1xuICAgICAgdGhpcy50cmlnZ2VyKCdkb25lJywgZmx1c2hTb3VyY2UpO1xuICAgIH07XG5cbiAgICB2YXIgc3RyZWFtID0gU3RyZWFtOyAvLyBDb252ZXJ0IGFuIGFycmF5IG9mIG5hbCB1bml0cyBpbnRvIGFuIGFycmF5IG9mIGZyYW1lcyB3aXRoIGVhY2ggZnJhbWUgYmVpbmdcbiAgICAvLyBjb21wb3NlZCBvZiB0aGUgbmFsIHVuaXRzIHRoYXQgbWFrZSB1cCB0aGF0IGZyYW1lXG4gICAgLy8gQWxzbyBrZWVwIHRyYWNrIG9mIGN1bW11bGF0aXZlIGRhdGEgYWJvdXQgdGhlIGZyYW1lIGZyb20gdGhlIG5hbCB1bml0cyBzdWNoXG4gICAgLy8gYXMgdGhlIGZyYW1lIGR1cmF0aW9uLCBzdGFydGluZyBwdHMsIGV0Yy5cblxuICAgIHZhciBncm91cE5hbHNJbnRvRnJhbWVzID0gZnVuY3Rpb24gZ3JvdXBOYWxzSW50b0ZyYW1lcyhuYWxVbml0cykge1xuICAgICAgdmFyIGksXG4gICAgICAgICAgY3VycmVudE5hbCxcbiAgICAgICAgICBjdXJyZW50RnJhbWUgPSBbXSxcbiAgICAgICAgICBmcmFtZXMgPSBbXTtcbiAgICAgIGN1cnJlbnRGcmFtZS5ieXRlTGVuZ3RoID0gMDtcblxuICAgICAgZm9yIChpID0gMDsgaSA8IG5hbFVuaXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGN1cnJlbnROYWwgPSBuYWxVbml0c1tpXTsgLy8gU3BsaXQgb24gJ2F1ZCctdHlwZSBuYWwgdW5pdHNcblxuICAgICAgICBpZiAoY3VycmVudE5hbC5uYWxVbml0VHlwZSA9PT0gJ2FjY2Vzc191bml0X2RlbGltaXRlcl9yYnNwJykge1xuICAgICAgICAgIC8vIFNpbmNlIHRoZSB2ZXJ5IGZpcnN0IG5hbCB1bml0IGlzIGV4cGVjdGVkIHRvIGJlIGFuIEFVRFxuICAgICAgICAgIC8vIG9ubHkgcHVzaCB0byB0aGUgZnJhbWVzIGFycmF5IHdoZW4gY3VycmVudEZyYW1lIGlzIG5vdCBlbXB0eVxuICAgICAgICAgIGlmIChjdXJyZW50RnJhbWUubGVuZ3RoKSB7XG4gICAgICAgICAgICBjdXJyZW50RnJhbWUuZHVyYXRpb24gPSBjdXJyZW50TmFsLmR0cyAtIGN1cnJlbnRGcmFtZS5kdHM7XG4gICAgICAgICAgICBmcmFtZXMucHVzaChjdXJyZW50RnJhbWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1cnJlbnRGcmFtZSA9IFtjdXJyZW50TmFsXTtcbiAgICAgICAgICBjdXJyZW50RnJhbWUuYnl0ZUxlbmd0aCA9IGN1cnJlbnROYWwuZGF0YS5ieXRlTGVuZ3RoO1xuICAgICAgICAgIGN1cnJlbnRGcmFtZS5wdHMgPSBjdXJyZW50TmFsLnB0cztcbiAgICAgICAgICBjdXJyZW50RnJhbWUuZHRzID0gY3VycmVudE5hbC5kdHM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gU3BlY2lmaWNhbGx5IGZsYWcga2V5IGZyYW1lcyBmb3IgZWFzZSBvZiB1c2UgbGF0ZXJcbiAgICAgICAgICBpZiAoY3VycmVudE5hbC5uYWxVbml0VHlwZSA9PT0gJ3NsaWNlX2xheWVyX3dpdGhvdXRfcGFydGl0aW9uaW5nX3Jic3BfaWRyJykge1xuICAgICAgICAgICAgY3VycmVudEZyYW1lLmtleUZyYW1lID0gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJyZW50RnJhbWUuZHVyYXRpb24gPSBjdXJyZW50TmFsLmR0cyAtIGN1cnJlbnRGcmFtZS5kdHM7XG4gICAgICAgICAgY3VycmVudEZyYW1lLmJ5dGVMZW5ndGggKz0gY3VycmVudE5hbC5kYXRhLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgY3VycmVudEZyYW1lLnB1c2goY3VycmVudE5hbCk7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gRm9yIHRoZSBsYXN0IGZyYW1lLCB1c2UgdGhlIGR1cmF0aW9uIG9mIHRoZSBwcmV2aW91cyBmcmFtZSBpZiB3ZVxuICAgICAgLy8gaGF2ZSBub3RoaW5nIGJldHRlciB0byBnbyBvblxuXG5cbiAgICAgIGlmIChmcmFtZXMubGVuZ3RoICYmICghY3VycmVudEZyYW1lLmR1cmF0aW9uIHx8IGN1cnJlbnRGcmFtZS5kdXJhdGlvbiA8PSAwKSkge1xuICAgICAgICBjdXJyZW50RnJhbWUuZHVyYXRpb24gPSBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDFdLmR1cmF0aW9uO1xuICAgICAgfSAvLyBQdXNoIHRoZSBmaW5hbCBmcmFtZVxuXG5cbiAgICAgIGZyYW1lcy5wdXNoKGN1cnJlbnRGcmFtZSk7XG4gICAgICByZXR1cm4gZnJhbWVzO1xuICAgIH07IC8vIENvbnZlcnQgYW4gYXJyYXkgb2YgZnJhbWVzIGludG8gYW4gYXJyYXkgb2YgR29wIHdpdGggZWFjaCBHb3AgYmVpbmcgY29tcG9zZWRcbiAgICAvLyBvZiB0aGUgZnJhbWVzIHRoYXQgbWFrZSB1cCB0aGF0IEdvcFxuICAgIC8vIEFsc28ga2VlcCB0cmFjayBvZiBjdW1tdWxhdGl2ZSBkYXRhIGFib3V0IHRoZSBHb3AgZnJvbSB0aGUgZnJhbWVzIHN1Y2ggYXMgdGhlXG4gICAgLy8gR29wIGR1cmF0aW9uLCBzdGFydGluZyBwdHMsIGV0Yy5cblxuXG4gICAgdmFyIGdyb3VwRnJhbWVzSW50b0dvcHMgPSBmdW5jdGlvbiBncm91cEZyYW1lc0ludG9Hb3BzKGZyYW1lcykge1xuICAgICAgdmFyIGksXG4gICAgICAgICAgY3VycmVudEZyYW1lLFxuICAgICAgICAgIGN1cnJlbnRHb3AgPSBbXSxcbiAgICAgICAgICBnb3BzID0gW107IC8vIFdlIG11c3QgcHJlLXNldCBzb21lIG9mIHRoZSB2YWx1ZXMgb24gdGhlIEdvcCBzaW5jZSB3ZVxuICAgICAgLy8ga2VlcCBydW5uaW5nIHRvdGFscyBvZiB0aGVzZSB2YWx1ZXNcblxuICAgICAgY3VycmVudEdvcC5ieXRlTGVuZ3RoID0gMDtcbiAgICAgIGN1cnJlbnRHb3AubmFsQ291bnQgPSAwO1xuICAgICAgY3VycmVudEdvcC5kdXJhdGlvbiA9IDA7XG4gICAgICBjdXJyZW50R29wLnB0cyA9IGZyYW1lc1swXS5wdHM7XG4gICAgICBjdXJyZW50R29wLmR0cyA9IGZyYW1lc1swXS5kdHM7IC8vIHN0b3JlIHNvbWUgbWV0YWRhdGEgYWJvdXQgYWxsIHRoZSBHb3BzXG5cbiAgICAgIGdvcHMuYnl0ZUxlbmd0aCA9IDA7XG4gICAgICBnb3BzLm5hbENvdW50ID0gMDtcbiAgICAgIGdvcHMuZHVyYXRpb24gPSAwO1xuICAgICAgZ29wcy5wdHMgPSBmcmFtZXNbMF0ucHRzO1xuICAgICAgZ29wcy5kdHMgPSBmcmFtZXNbMF0uZHRzO1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgZnJhbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGN1cnJlbnRGcmFtZSA9IGZyYW1lc1tpXTtcblxuICAgICAgICBpZiAoY3VycmVudEZyYW1lLmtleUZyYW1lKSB7XG4gICAgICAgICAgLy8gU2luY2UgdGhlIHZlcnkgZmlyc3QgZnJhbWUgaXMgZXhwZWN0ZWQgdG8gYmUgYW4ga2V5ZnJhbWVcbiAgICAgICAgICAvLyBvbmx5IHB1c2ggdG8gdGhlIGdvcHMgYXJyYXkgd2hlbiBjdXJyZW50R29wIGlzIG5vdCBlbXB0eVxuICAgICAgICAgIGlmIChjdXJyZW50R29wLmxlbmd0aCkge1xuICAgICAgICAgICAgZ29wcy5wdXNoKGN1cnJlbnRHb3ApO1xuICAgICAgICAgICAgZ29wcy5ieXRlTGVuZ3RoICs9IGN1cnJlbnRHb3AuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgIGdvcHMubmFsQ291bnQgKz0gY3VycmVudEdvcC5uYWxDb3VudDtcbiAgICAgICAgICAgIGdvcHMuZHVyYXRpb24gKz0gY3VycmVudEdvcC5kdXJhdGlvbjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJyZW50R29wID0gW2N1cnJlbnRGcmFtZV07XG4gICAgICAgICAgY3VycmVudEdvcC5uYWxDb3VudCA9IGN1cnJlbnRGcmFtZS5sZW5ndGg7XG4gICAgICAgICAgY3VycmVudEdvcC5ieXRlTGVuZ3RoID0gY3VycmVudEZyYW1lLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgY3VycmVudEdvcC5wdHMgPSBjdXJyZW50RnJhbWUucHRzO1xuICAgICAgICAgIGN1cnJlbnRHb3AuZHRzID0gY3VycmVudEZyYW1lLmR0cztcbiAgICAgICAgICBjdXJyZW50R29wLmR1cmF0aW9uID0gY3VycmVudEZyYW1lLmR1cmF0aW9uO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRHb3AuZHVyYXRpb24gKz0gY3VycmVudEZyYW1lLmR1cmF0aW9uO1xuICAgICAgICAgIGN1cnJlbnRHb3AubmFsQ291bnQgKz0gY3VycmVudEZyYW1lLmxlbmd0aDtcbiAgICAgICAgICBjdXJyZW50R29wLmJ5dGVMZW5ndGggKz0gY3VycmVudEZyYW1lLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgY3VycmVudEdvcC5wdXNoKGN1cnJlbnRGcmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGdvcHMubGVuZ3RoICYmIGN1cnJlbnRHb3AuZHVyYXRpb24gPD0gMCkge1xuICAgICAgICBjdXJyZW50R29wLmR1cmF0aW9uID0gZ29wc1tnb3BzLmxlbmd0aCAtIDFdLmR1cmF0aW9uO1xuICAgICAgfVxuXG4gICAgICBnb3BzLmJ5dGVMZW5ndGggKz0gY3VycmVudEdvcC5ieXRlTGVuZ3RoO1xuICAgICAgZ29wcy5uYWxDb3VudCArPSBjdXJyZW50R29wLm5hbENvdW50O1xuICAgICAgZ29wcy5kdXJhdGlvbiArPSBjdXJyZW50R29wLmR1cmF0aW9uOyAvLyBwdXNoIHRoZSBmaW5hbCBHb3BcblxuICAgICAgZ29wcy5wdXNoKGN1cnJlbnRHb3ApO1xuICAgICAgcmV0dXJuIGdvcHM7XG4gICAgfTtcbiAgICAvKlxuICAgICAqIFNlYXJjaCBmb3IgdGhlIGZpcnN0IGtleWZyYW1lIGluIHRoZSBHT1BzIGFuZCB0aHJvdyBhd2F5IGFsbCBmcmFtZXNcbiAgICAgKiB1bnRpbCB0aGF0IGtleWZyYW1lLiBUaGVuIGV4dGVuZCB0aGUgZHVyYXRpb24gb2YgdGhlIHB1bGxlZCBrZXlmcmFtZVxuICAgICAqIGFuZCBwdWxsIHRoZSBQVFMgYW5kIERUUyBvZiB0aGUga2V5ZnJhbWUgc28gdGhhdCBpdCBjb3ZlcnMgdGhlIHRpbWVcbiAgICAgKiByYW5nZSBvZiB0aGUgZnJhbWVzIHRoYXQgd2VyZSBkaXNwb3NlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGdvcHMgdmlkZW8gR09Qc1xuICAgICAqIEByZXR1cm5zIHtBcnJheX0gbW9kaWZpZWQgdmlkZW8gR09Qc1xuICAgICAqL1xuXG5cbiAgICB2YXIgZXh0ZW5kRmlyc3RLZXlGcmFtZSA9IGZ1bmN0aW9uIGV4dGVuZEZpcnN0S2V5RnJhbWUoZ29wcykge1xuICAgICAgdmFyIGN1cnJlbnRHb3A7XG5cbiAgICAgIGlmICghZ29wc1swXVswXS5rZXlGcmFtZSAmJiBnb3BzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCBHT1BcbiAgICAgICAgY3VycmVudEdvcCA9IGdvcHMuc2hpZnQoKTtcbiAgICAgICAgZ29wcy5ieXRlTGVuZ3RoIC09IGN1cnJlbnRHb3AuYnl0ZUxlbmd0aDtcbiAgICAgICAgZ29wcy5uYWxDb3VudCAtPSBjdXJyZW50R29wLm5hbENvdW50OyAvLyBFeHRlbmQgdGhlIGZpcnN0IGZyYW1lIG9mIHdoYXQgaXMgbm93IHRoZVxuICAgICAgICAvLyBmaXJzdCBnb3AgdG8gY292ZXIgdGhlIHRpbWUgcGVyaW9kIG9mIHRoZVxuICAgICAgICAvLyBmcmFtZXMgd2UganVzdCByZW1vdmVkXG5cbiAgICAgICAgZ29wc1swXVswXS5kdHMgPSBjdXJyZW50R29wLmR0cztcbiAgICAgICAgZ29wc1swXVswXS5wdHMgPSBjdXJyZW50R29wLnB0cztcbiAgICAgICAgZ29wc1swXVswXS5kdXJhdGlvbiArPSBjdXJyZW50R29wLmR1cmF0aW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZ29wcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERlZmF1bHQgc2FtcGxlIG9iamVjdFxuICAgICAqIHNlZSBJU08vSUVDIDE0NDk2LTEyOjIwMTIsIHNlY3Rpb24gOC42LjQuM1xuICAgICAqL1xuXG5cbiAgICB2YXIgY3JlYXRlRGVmYXVsdFNhbXBsZSA9IGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRTYW1wbGUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzaXplOiAwLFxuICAgICAgICBmbGFnczoge1xuICAgICAgICAgIGlzTGVhZGluZzogMCxcbiAgICAgICAgICBkZXBlbmRzT246IDEsXG4gICAgICAgICAgaXNEZXBlbmRlZE9uOiAwLFxuICAgICAgICAgIGhhc1JlZHVuZGFuY3k6IDAsXG4gICAgICAgICAgZGVncmFkYXRpb25Qcmlvcml0eTogMCxcbiAgICAgICAgICBpc05vblN5bmNTYW1wbGU6IDFcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuICAgIC8qXG4gICAgICogQ29sbGF0ZXMgaW5mb3JtYXRpb24gZnJvbSBhIHZpZGVvIGZyYW1lIGludG8gYW4gb2JqZWN0IGZvciBldmVudHVhbFxuICAgICAqIGVudHJ5IGludG8gYW4gTVA0IHNhbXBsZSB0YWJsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmcmFtZSB0aGUgdmlkZW8gZnJhbWVcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZGF0YU9mZnNldCB0aGUgYnl0ZSBvZmZzZXQgdG8gcG9zaXRpb24gdGhlIHNhbXBsZVxuICAgICAqIEByZXR1cm4ge09iamVjdH0gb2JqZWN0IGNvbnRhaW5pbmcgc2FtcGxlIHRhYmxlIGluZm8gZm9yIGEgZnJhbWVcbiAgICAgKi9cblxuXG4gICAgdmFyIHNhbXBsZUZvckZyYW1lID0gZnVuY3Rpb24gc2FtcGxlRm9yRnJhbWUoZnJhbWUsIGRhdGFPZmZzZXQpIHtcbiAgICAgIHZhciBzYW1wbGUgPSBjcmVhdGVEZWZhdWx0U2FtcGxlKCk7XG4gICAgICBzYW1wbGUuZGF0YU9mZnNldCA9IGRhdGFPZmZzZXQ7XG4gICAgICBzYW1wbGUuY29tcG9zaXRpb25UaW1lT2Zmc2V0ID0gZnJhbWUucHRzIC0gZnJhbWUuZHRzO1xuICAgICAgc2FtcGxlLmR1cmF0aW9uID0gZnJhbWUuZHVyYXRpb247XG4gICAgICBzYW1wbGUuc2l6ZSA9IDQgKiBmcmFtZS5sZW5ndGg7IC8vIFNwYWNlIGZvciBuYWwgdW5pdCBzaXplXG5cbiAgICAgIHNhbXBsZS5zaXplICs9IGZyYW1lLmJ5dGVMZW5ndGg7XG5cbiAgICAgIGlmIChmcmFtZS5rZXlGcmFtZSkge1xuICAgICAgICBzYW1wbGUuZmxhZ3MuZGVwZW5kc09uID0gMjtcbiAgICAgICAgc2FtcGxlLmZsYWdzLmlzTm9uU3luY1NhbXBsZSA9IDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzYW1wbGU7XG4gICAgfTsgLy8gZ2VuZXJhdGUgdGhlIHRyYWNrJ3Mgc2FtcGxlIHRhYmxlIGZyb20gYW4gYXJyYXkgb2YgZ29wc1xuXG5cbiAgICB2YXIgZ2VuZXJhdGVTYW1wbGVUYWJsZSA9IGZ1bmN0aW9uIGdlbmVyYXRlU2FtcGxlVGFibGUoZ29wcywgYmFzZURhdGFPZmZzZXQpIHtcbiAgICAgIHZhciBoLFxuICAgICAgICAgIGksXG4gICAgICAgICAgc2FtcGxlLFxuICAgICAgICAgIGN1cnJlbnRHb3AsXG4gICAgICAgICAgY3VycmVudEZyYW1lLFxuICAgICAgICAgIGRhdGFPZmZzZXQgPSBiYXNlRGF0YU9mZnNldCB8fCAwLFxuICAgICAgICAgIHNhbXBsZXMgPSBbXTtcblxuICAgICAgZm9yIChoID0gMDsgaCA8IGdvcHMubGVuZ3RoOyBoKyspIHtcbiAgICAgICAgY3VycmVudEdvcCA9IGdvcHNbaF07XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGN1cnJlbnRHb3AubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjdXJyZW50RnJhbWUgPSBjdXJyZW50R29wW2ldO1xuICAgICAgICAgIHNhbXBsZSA9IHNhbXBsZUZvckZyYW1lKGN1cnJlbnRGcmFtZSwgZGF0YU9mZnNldCk7XG4gICAgICAgICAgZGF0YU9mZnNldCArPSBzYW1wbGUuc2l6ZTtcbiAgICAgICAgICBzYW1wbGVzLnB1c2goc2FtcGxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2FtcGxlcztcbiAgICB9OyAvLyBnZW5lcmF0ZSB0aGUgdHJhY2sncyByYXcgbWRhdCBkYXRhIGZyb20gYW4gYXJyYXkgb2YgZ29wc1xuXG5cbiAgICB2YXIgY29uY2F0ZW5hdGVOYWxEYXRhID0gZnVuY3Rpb24gY29uY2F0ZW5hdGVOYWxEYXRhKGdvcHMpIHtcbiAgICAgIHZhciBoLFxuICAgICAgICAgIGksXG4gICAgICAgICAgaixcbiAgICAgICAgICBjdXJyZW50R29wLFxuICAgICAgICAgIGN1cnJlbnRGcmFtZSxcbiAgICAgICAgICBjdXJyZW50TmFsLFxuICAgICAgICAgIGRhdGFPZmZzZXQgPSAwLFxuICAgICAgICAgIG5hbHNCeXRlTGVuZ3RoID0gZ29wcy5ieXRlTGVuZ3RoLFxuICAgICAgICAgIG51bWJlck9mTmFscyA9IGdvcHMubmFsQ291bnQsXG4gICAgICAgICAgdG90YWxCeXRlTGVuZ3RoID0gbmFsc0J5dGVMZW5ndGggKyA0ICogbnVtYmVyT2ZOYWxzLFxuICAgICAgICAgIGRhdGEgPSBuZXcgVWludDhBcnJheSh0b3RhbEJ5dGVMZW5ndGgpLFxuICAgICAgICAgIHZpZXcgPSBuZXcgRGF0YVZpZXcoZGF0YS5idWZmZXIpOyAvLyBGb3IgZWFjaCBHb3AuLlxuXG4gICAgICBmb3IgKGggPSAwOyBoIDwgZ29wcy5sZW5ndGg7IGgrKykge1xuICAgICAgICBjdXJyZW50R29wID0gZ29wc1toXTsgLy8gRm9yIGVhY2ggRnJhbWUuLlxuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjdXJyZW50R29wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY3VycmVudEZyYW1lID0gY3VycmVudEdvcFtpXTsgLy8gRm9yIGVhY2ggTkFMLi5cblxuICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBjdXJyZW50RnJhbWUubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGN1cnJlbnROYWwgPSBjdXJyZW50RnJhbWVbal07XG4gICAgICAgICAgICB2aWV3LnNldFVpbnQzMihkYXRhT2Zmc2V0LCBjdXJyZW50TmFsLmRhdGEuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICBkYXRhT2Zmc2V0ICs9IDQ7XG4gICAgICAgICAgICBkYXRhLnNldChjdXJyZW50TmFsLmRhdGEsIGRhdGFPZmZzZXQpO1xuICAgICAgICAgICAgZGF0YU9mZnNldCArPSBjdXJyZW50TmFsLmRhdGEuYnl0ZUxlbmd0aDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfTtcblxuICAgIHZhciBmcmFtZVV0aWxzID0ge1xuICAgICAgZ3JvdXBOYWxzSW50b0ZyYW1lczogZ3JvdXBOYWxzSW50b0ZyYW1lcyxcbiAgICAgIGdyb3VwRnJhbWVzSW50b0dvcHM6IGdyb3VwRnJhbWVzSW50b0dvcHMsXG4gICAgICBleHRlbmRGaXJzdEtleUZyYW1lOiBleHRlbmRGaXJzdEtleUZyYW1lLFxuICAgICAgZ2VuZXJhdGVTYW1wbGVUYWJsZTogZ2VuZXJhdGVTYW1wbGVUYWJsZSxcbiAgICAgIGNvbmNhdGVuYXRlTmFsRGF0YTogY29uY2F0ZW5hdGVOYWxEYXRhXG4gICAgfTtcbiAgICB2YXIgaGlnaFByZWZpeCA9IFszMywgMTYsIDUsIDMyLCAxNjQsIDI3XTtcbiAgICB2YXIgbG93UHJlZml4ID0gWzMzLCA2NSwgMTA4LCA4NCwgMSwgMiwgNCwgOCwgMTY4LCAyLCA0LCA4LCAxNywgMTkxLCAyNTJdO1xuXG4gICAgdmFyIHplcm9GaWxsID0gZnVuY3Rpb24gemVyb0ZpbGwoY291bnQpIHtcbiAgICAgIHZhciBhID0gW107XG5cbiAgICAgIHdoaWxlIChjb3VudC0tKSB7XG4gICAgICAgIGEucHVzaCgwKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGE7XG4gICAgfTtcblxuICAgIHZhciBtYWtlVGFibGUgPSBmdW5jdGlvbiBtYWtlVGFibGUobWV0YVRhYmxlKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMobWV0YVRhYmxlKS5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwga2V5KSB7XG4gICAgICAgIG9ialtrZXldID0gbmV3IFVpbnQ4QXJyYXkobWV0YVRhYmxlW2tleV0ucmVkdWNlKGZ1bmN0aW9uIChhcnIsIHBhcnQpIHtcbiAgICAgICAgICByZXR1cm4gYXJyLmNvbmNhdChwYXJ0KTtcbiAgICAgICAgfSwgW10pKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH0sIHt9KTtcbiAgICB9OyAvLyBGcmFtZXMtb2Ytc2lsZW5jZSB0byB1c2UgZm9yIGZpbGxpbmcgaW4gbWlzc2luZyBBQUMgZnJhbWVzXG5cblxuICAgIHZhciBjb25lT2ZTaWxlbmNlID0ge1xuICAgICAgOTYwMDA6IFtoaWdoUHJlZml4LCBbMjI3LCA2NF0sIHplcm9GaWxsKDE1NCksIFs1Nl1dLFxuICAgICAgODgyMDA6IFtoaWdoUHJlZml4LCBbMjMxXSwgemVyb0ZpbGwoMTcwKSwgWzU2XV0sXG4gICAgICA2NDAwMDogW2hpZ2hQcmVmaXgsIFsyNDgsIDE5Ml0sIHplcm9GaWxsKDI0MCksIFs1Nl1dLFxuICAgICAgNDgwMDA6IFtoaWdoUHJlZml4LCBbMjU1LCAxOTJdLCB6ZXJvRmlsbCgyNjgpLCBbNTUsIDE0OCwgMTI4XSwgemVyb0ZpbGwoNTQpLCBbMTEyXV0sXG4gICAgICA0NDEwMDogW2hpZ2hQcmVmaXgsIFsyNTUsIDE5Ml0sIHplcm9GaWxsKDI2OCksIFs1NSwgMTYzLCAxMjhdLCB6ZXJvRmlsbCg4NCksIFsxMTJdXSxcbiAgICAgIDMyMDAwOiBbaGlnaFByZWZpeCwgWzI1NSwgMTkyXSwgemVyb0ZpbGwoMjY4KSwgWzU1LCAyMzRdLCB6ZXJvRmlsbCgyMjYpLCBbMTEyXV0sXG4gICAgICAyNDAwMDogW2hpZ2hQcmVmaXgsIFsyNTUsIDE5Ml0sIHplcm9GaWxsKDI2OCksIFs1NSwgMjU1LCAxMjhdLCB6ZXJvRmlsbCgyNjgpLCBbMTExLCAxMTJdLCB6ZXJvRmlsbCgxMjYpLCBbMjI0XV0sXG4gICAgICAxNjAwMDogW2hpZ2hQcmVmaXgsIFsyNTUsIDE5Ml0sIHplcm9GaWxsKDI2OCksIFs1NSwgMjU1LCAxMjhdLCB6ZXJvRmlsbCgyNjgpLCBbMTExLCAyNTVdLCB6ZXJvRmlsbCgyNjkpLCBbMjIzLCAxMDhdLCB6ZXJvRmlsbCgxOTUpLCBbMSwgMTkyXV0sXG4gICAgICAxMjAwMDogW2xvd1ByZWZpeCwgemVyb0ZpbGwoMjY4KSwgWzMsIDEyNywgMjQ4XSwgemVyb0ZpbGwoMjY4KSwgWzYsIDI1NSwgMjQwXSwgemVyb0ZpbGwoMjY4KSwgWzEzLCAyNTUsIDIyNF0sIHplcm9GaWxsKDI2OCksIFsyNywgMjUzLCAxMjhdLCB6ZXJvRmlsbCgyNTkpLCBbNTZdXSxcbiAgICAgIDExMDI1OiBbbG93UHJlZml4LCB6ZXJvRmlsbCgyNjgpLCBbMywgMTI3LCAyNDhdLCB6ZXJvRmlsbCgyNjgpLCBbNiwgMjU1LCAyNDBdLCB6ZXJvRmlsbCgyNjgpLCBbMTMsIDI1NSwgMjI0XSwgemVyb0ZpbGwoMjY4KSwgWzI3LCAyNTUsIDE5Ml0sIHplcm9GaWxsKDI2OCksIFs1NSwgMTc1LCAxMjhdLCB6ZXJvRmlsbCgxMDgpLCBbMTEyXV0sXG4gICAgICA4MDAwOiBbbG93UHJlZml4LCB6ZXJvRmlsbCgyNjgpLCBbMywgMTIxLCAxNl0sIHplcm9GaWxsKDQ3KSwgWzddXVxuICAgIH07XG4gICAgdmFyIHNpbGVuY2UgPSBtYWtlVGFibGUoY29uZU9mU2lsZW5jZSk7XG4gICAgdmFyIE9ORV9TRUNPTkRfSU5fVFMgPSA5MDAwMCxcbiAgICAgICAgLy8gOTBrSHogY2xvY2tcbiAgICBzZWNvbmRzVG9WaWRlb1RzLFxuICAgICAgICBzZWNvbmRzVG9BdWRpb1RzLFxuICAgICAgICB2aWRlb1RzVG9TZWNvbmRzLFxuICAgICAgICBhdWRpb1RzVG9TZWNvbmRzLFxuICAgICAgICBhdWRpb1RzVG9WaWRlb1RzLFxuICAgICAgICB2aWRlb1RzVG9BdWRpb1RzO1xuXG4gICAgc2Vjb25kc1RvVmlkZW9UcyA9IGZ1bmN0aW9uIHNlY29uZHNUb1ZpZGVvVHMoc2Vjb25kcykge1xuICAgICAgcmV0dXJuIHNlY29uZHMgKiBPTkVfU0VDT05EX0lOX1RTO1xuICAgIH07XG5cbiAgICBzZWNvbmRzVG9BdWRpb1RzID0gZnVuY3Rpb24gc2Vjb25kc1RvQXVkaW9UcyhzZWNvbmRzLCBzYW1wbGVSYXRlKSB7XG4gICAgICByZXR1cm4gc2Vjb25kcyAqIHNhbXBsZVJhdGU7XG4gICAgfTtcblxuICAgIHZpZGVvVHNUb1NlY29uZHMgPSBmdW5jdGlvbiB2aWRlb1RzVG9TZWNvbmRzKHRpbWVzdGFtcCkge1xuICAgICAgcmV0dXJuIHRpbWVzdGFtcCAvIE9ORV9TRUNPTkRfSU5fVFM7XG4gICAgfTtcblxuICAgIGF1ZGlvVHNUb1NlY29uZHMgPSBmdW5jdGlvbiBhdWRpb1RzVG9TZWNvbmRzKHRpbWVzdGFtcCwgc2FtcGxlUmF0ZSkge1xuICAgICAgcmV0dXJuIHRpbWVzdGFtcCAvIHNhbXBsZVJhdGU7XG4gICAgfTtcblxuICAgIGF1ZGlvVHNUb1ZpZGVvVHMgPSBmdW5jdGlvbiBhdWRpb1RzVG9WaWRlb1RzKHRpbWVzdGFtcCwgc2FtcGxlUmF0ZSkge1xuICAgICAgcmV0dXJuIHNlY29uZHNUb1ZpZGVvVHMoYXVkaW9Uc1RvU2Vjb25kcyh0aW1lc3RhbXAsIHNhbXBsZVJhdGUpKTtcbiAgICB9O1xuXG4gICAgdmlkZW9Uc1RvQXVkaW9UcyA9IGZ1bmN0aW9uIHZpZGVvVHNUb0F1ZGlvVHModGltZXN0YW1wLCBzYW1wbGVSYXRlKSB7XG4gICAgICByZXR1cm4gc2Vjb25kc1RvQXVkaW9Ucyh2aWRlb1RzVG9TZWNvbmRzKHRpbWVzdGFtcCksIHNhbXBsZVJhdGUpO1xuICAgIH07XG5cbiAgICB2YXIgY2xvY2sgPSB7XG4gICAgICBzZWNvbmRzVG9WaWRlb1RzOiBzZWNvbmRzVG9WaWRlb1RzLFxuICAgICAgc2Vjb25kc1RvQXVkaW9Uczogc2Vjb25kc1RvQXVkaW9UcyxcbiAgICAgIHZpZGVvVHNUb1NlY29uZHM6IHZpZGVvVHNUb1NlY29uZHMsXG4gICAgICBhdWRpb1RzVG9TZWNvbmRzOiBhdWRpb1RzVG9TZWNvbmRzLFxuICAgICAgYXVkaW9Uc1RvVmlkZW9UczogYXVkaW9Uc1RvVmlkZW9UcyxcbiAgICAgIHZpZGVvVHNUb0F1ZGlvVHM6IHZpZGVvVHNUb0F1ZGlvVHNcbiAgICB9O1xuICAgIHZhciBPTkVfU0VDT05EX0lOX1RTJDEgPSA5MDAwMDsgLy8gOTBrSHogY2xvY2tcblxuICAgIC8qKlxuICAgICAqIFN1bSB0aGUgYGJ5dGVMZW5ndGhgIHByb3BlcnRpZXMgb2YgdGhlIGRhdGEgaW4gZWFjaCBBQUMgZnJhbWVcbiAgICAgKi9cblxuICAgIHZhciBzdW1GcmFtZUJ5dGVMZW5ndGhzID0gZnVuY3Rpb24gc3VtRnJhbWVCeXRlTGVuZ3RocyhhcnJheSkge1xuICAgICAgdmFyIGksXG4gICAgICAgICAgY3VycmVudE9iaixcbiAgICAgICAgICBzdW0gPSAwOyAvLyBzdW0gdGhlIGJ5dGVMZW5ndGgncyBhbGwgZWFjaCBuYWwgdW5pdCBpbiB0aGUgZnJhbWVcblxuICAgICAgZm9yIChpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGN1cnJlbnRPYmogPSBhcnJheVtpXTtcbiAgICAgICAgc3VtICs9IGN1cnJlbnRPYmouZGF0YS5ieXRlTGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3VtO1xuICAgIH07IC8vIFBvc3NpYmx5IHBhZCAocHJlZml4KSB0aGUgYXVkaW8gdHJhY2sgd2l0aCBzaWxlbmNlIGlmIGFwcGVuZGluZyB0aGlzIHRyYWNrXG4gICAgLy8gd291bGQgbGVhZCB0byB0aGUgaW50cm9kdWN0aW9uIG9mIGEgZ2FwIGluIHRoZSBhdWRpbyBidWZmZXJcblxuXG4gICAgdmFyIHByZWZpeFdpdGhTaWxlbmNlID0gZnVuY3Rpb24gcHJlZml4V2l0aFNpbGVuY2UodHJhY2ssIGZyYW1lcywgYXVkaW9BcHBlbmRTdGFydFRzLCB2aWRlb0Jhc2VNZWRpYURlY29kZVRpbWUpIHtcbiAgICAgIHZhciBiYXNlTWVkaWFEZWNvZGVUaW1lVHMsXG4gICAgICAgICAgZnJhbWVEdXJhdGlvbiA9IDAsXG4gICAgICAgICAgYXVkaW9HYXBEdXJhdGlvbiA9IDAsXG4gICAgICAgICAgYXVkaW9GaWxsRnJhbWVDb3VudCA9IDAsXG4gICAgICAgICAgYXVkaW9GaWxsRHVyYXRpb24gPSAwLFxuICAgICAgICAgIHNpbGVudEZyYW1lLFxuICAgICAgICAgIGk7XG5cbiAgICAgIGlmICghZnJhbWVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGJhc2VNZWRpYURlY29kZVRpbWVUcyA9IGNsb2NrLmF1ZGlvVHNUb1ZpZGVvVHModHJhY2suYmFzZU1lZGlhRGVjb2RlVGltZSwgdHJhY2suc2FtcGxlcmF0ZSk7IC8vIGRldGVybWluZSBmcmFtZSBjbG9jayBkdXJhdGlvbiBiYXNlZCBvbiBzYW1wbGUgcmF0ZSwgcm91bmQgdXAgdG8gYXZvaWQgb3ZlcmZpbGxzXG5cbiAgICAgIGZyYW1lRHVyYXRpb24gPSBNYXRoLmNlaWwoT05FX1NFQ09ORF9JTl9UUyQxIC8gKHRyYWNrLnNhbXBsZXJhdGUgLyAxMDI0KSk7XG5cbiAgICAgIGlmIChhdWRpb0FwcGVuZFN0YXJ0VHMgJiYgdmlkZW9CYXNlTWVkaWFEZWNvZGVUaW1lKSB7XG4gICAgICAgIC8vIGluc2VydCB0aGUgc2hvcnRlc3QgcG9zc2libGUgYW1vdW50IChhdWRpbyBnYXAgb3IgYXVkaW8gdG8gdmlkZW8gZ2FwKVxuICAgICAgICBhdWRpb0dhcER1cmF0aW9uID0gYmFzZU1lZGlhRGVjb2RlVGltZVRzIC0gTWF0aC5tYXgoYXVkaW9BcHBlbmRTdGFydFRzLCB2aWRlb0Jhc2VNZWRpYURlY29kZVRpbWUpOyAvLyBudW1iZXIgb2YgZnVsbCBmcmFtZXMgaW4gdGhlIGF1ZGlvIGdhcFxuXG4gICAgICAgIGF1ZGlvRmlsbEZyYW1lQ291bnQgPSBNYXRoLmZsb29yKGF1ZGlvR2FwRHVyYXRpb24gLyBmcmFtZUR1cmF0aW9uKTtcbiAgICAgICAgYXVkaW9GaWxsRHVyYXRpb24gPSBhdWRpb0ZpbGxGcmFtZUNvdW50ICogZnJhbWVEdXJhdGlvbjtcbiAgICAgIH0gLy8gZG9uJ3QgYXR0ZW1wdCB0byBmaWxsIGdhcHMgc21hbGxlciB0aGFuIGEgc2luZ2xlIGZyYW1lIG9yIGxhcmdlclxuICAgICAgLy8gdGhhbiBhIGhhbGYgc2Vjb25kXG5cblxuICAgICAgaWYgKGF1ZGlvRmlsbEZyYW1lQ291bnQgPCAxIHx8IGF1ZGlvRmlsbER1cmF0aW9uID4gT05FX1NFQ09ORF9JTl9UUyQxIC8gMikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNpbGVudEZyYW1lID0gc2lsZW5jZVt0cmFjay5zYW1wbGVyYXRlXTtcblxuICAgICAgaWYgKCFzaWxlbnRGcmFtZSkge1xuICAgICAgICAvLyB3ZSBkb24ndCBoYXZlIGEgc2lsZW50IGZyYW1lIHByZWdlbmVyYXRlZCBmb3IgdGhlIHNhbXBsZSByYXRlLCBzbyB1c2UgYSBmcmFtZVxuICAgICAgICAvLyBmcm9tIHRoZSBjb250ZW50IGluc3RlYWRcbiAgICAgICAgc2lsZW50RnJhbWUgPSBmcmFtZXNbMF0uZGF0YTtcbiAgICAgIH1cblxuICAgICAgZm9yIChpID0gMDsgaSA8IGF1ZGlvRmlsbEZyYW1lQ291bnQ7IGkrKykge1xuICAgICAgICBmcmFtZXMuc3BsaWNlKGksIDAsIHtcbiAgICAgICAgICBkYXRhOiBzaWxlbnRGcmFtZVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdHJhY2suYmFzZU1lZGlhRGVjb2RlVGltZSAtPSBNYXRoLmZsb29yKGNsb2NrLnZpZGVvVHNUb0F1ZGlvVHMoYXVkaW9GaWxsRHVyYXRpb24sIHRyYWNrLnNhbXBsZXJhdGUpKTtcbiAgICB9OyAvLyBJZiB0aGUgYXVkaW8gc2VnbWVudCBleHRlbmRzIGJlZm9yZSB0aGUgZWFybGllc3QgYWxsb3dlZCBkdHNcbiAgICAvLyB2YWx1ZSwgcmVtb3ZlIEFBQyBmcmFtZXMgdW50aWwgc3RhcnRzIGF0IG9yIGFmdGVyIHRoZSBlYXJsaWVzdFxuICAgIC8vIGFsbG93ZWQgRFRTIHNvIHRoYXQgd2UgZG9uJ3QgZW5kIHVwIHdpdGggYSBuZWdhdGl2ZSBiYXNlTWVkaWEtXG4gICAgLy8gRGVjb2RlVGltZSBmb3IgdGhlIGF1ZGlvIHRyYWNrXG5cblxuICAgIHZhciB0cmltQWR0c0ZyYW1lc0J5RWFybGllc3REdHMgPSBmdW5jdGlvbiB0cmltQWR0c0ZyYW1lc0J5RWFybGllc3REdHMoYWR0c0ZyYW1lcywgdHJhY2ssIGVhcmxpZXN0QWxsb3dlZER0cykge1xuICAgICAgaWYgKHRyYWNrLm1pblNlZ21lbnREdHMgPj0gZWFybGllc3RBbGxvd2VkRHRzKSB7XG4gICAgICAgIHJldHVybiBhZHRzRnJhbWVzO1xuICAgICAgfSAvLyBXZSB3aWxsIG5lZWQgdG8gcmVjYWxjdWxhdGUgdGhlIGVhcmxpZXN0IHNlZ21lbnQgRHRzXG5cblxuICAgICAgdHJhY2subWluU2VnbWVudER0cyA9IEluZmluaXR5O1xuICAgICAgcmV0dXJuIGFkdHNGcmFtZXMuZmlsdGVyKGZ1bmN0aW9uIChjdXJyZW50RnJhbWUpIHtcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBhbGxvd2VkIGZyYW1lLCBrZWVwIGl0IGFuZCByZWNvcmQgaXQncyBEdHNcbiAgICAgICAgaWYgKGN1cnJlbnRGcmFtZS5kdHMgPj0gZWFybGllc3RBbGxvd2VkRHRzKSB7XG4gICAgICAgICAgdHJhY2subWluU2VnbWVudER0cyA9IE1hdGgubWluKHRyYWNrLm1pblNlZ21lbnREdHMsIGN1cnJlbnRGcmFtZS5kdHMpO1xuICAgICAgICAgIHRyYWNrLm1pblNlZ21lbnRQdHMgPSB0cmFjay5taW5TZWdtZW50RHRzO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IC8vIE90aGVyd2lzZSwgZGlzY2FyZCBpdFxuXG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSk7XG4gICAgfTsgLy8gZ2VuZXJhdGUgdGhlIHRyYWNrJ3MgcmF3IG1kYXQgZGF0YSBmcm9tIGFuIGFycmF5IG9mIGZyYW1lc1xuXG5cbiAgICB2YXIgZ2VuZXJhdGVTYW1wbGVUYWJsZSQxID0gZnVuY3Rpb24gZ2VuZXJhdGVTYW1wbGVUYWJsZShmcmFtZXMpIHtcbiAgICAgIHZhciBpLFxuICAgICAgICAgIGN1cnJlbnRGcmFtZSxcbiAgICAgICAgICBzYW1wbGVzID0gW107XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBmcmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY3VycmVudEZyYW1lID0gZnJhbWVzW2ldO1xuICAgICAgICBzYW1wbGVzLnB1c2goe1xuICAgICAgICAgIHNpemU6IGN1cnJlbnRGcmFtZS5kYXRhLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgZHVyYXRpb246IDEwMjQgLy8gRm9yIEFBQyBhdWRpbywgYWxsIHNhbXBsZXMgY29udGFpbiAxMDI0IHNhbXBsZXNcblxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNhbXBsZXM7XG4gICAgfTsgLy8gZ2VuZXJhdGUgdGhlIHRyYWNrJ3Mgc2FtcGxlIHRhYmxlIGZyb20gYW4gYXJyYXkgb2YgZnJhbWVzXG5cblxuICAgIHZhciBjb25jYXRlbmF0ZUZyYW1lRGF0YSA9IGZ1bmN0aW9uIGNvbmNhdGVuYXRlRnJhbWVEYXRhKGZyYW1lcykge1xuICAgICAgdmFyIGksXG4gICAgICAgICAgY3VycmVudEZyYW1lLFxuICAgICAgICAgIGRhdGFPZmZzZXQgPSAwLFxuICAgICAgICAgIGRhdGEgPSBuZXcgVWludDhBcnJheShzdW1GcmFtZUJ5dGVMZW5ndGhzKGZyYW1lcykpO1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgZnJhbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGN1cnJlbnRGcmFtZSA9IGZyYW1lc1tpXTtcbiAgICAgICAgZGF0YS5zZXQoY3VycmVudEZyYW1lLmRhdGEsIGRhdGFPZmZzZXQpO1xuICAgICAgICBkYXRhT2Zmc2V0ICs9IGN1cnJlbnRGcmFtZS5kYXRhLmJ5dGVMZW5ndGg7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH07XG5cbiAgICB2YXIgYXVkaW9GcmFtZVV0aWxzID0ge1xuICAgICAgcHJlZml4V2l0aFNpbGVuY2U6IHByZWZpeFdpdGhTaWxlbmNlLFxuICAgICAgdHJpbUFkdHNGcmFtZXNCeUVhcmxpZXN0RHRzOiB0cmltQWR0c0ZyYW1lc0J5RWFybGllc3REdHMsXG4gICAgICBnZW5lcmF0ZVNhbXBsZVRhYmxlOiBnZW5lcmF0ZVNhbXBsZVRhYmxlJDEsXG4gICAgICBjb25jYXRlbmF0ZUZyYW1lRGF0YTogY29uY2F0ZW5hdGVGcmFtZURhdGFcbiAgICB9O1xuICAgIHZhciBPTkVfU0VDT05EX0lOX1RTJDIgPSA5MDAwMDsgLy8gOTBrSHogY2xvY2tcblxuICAgIC8qKlxuICAgICAqIFN0b3JlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBzdGFydCBhbmQgZW5kIG9mIHRoZSB0cmFjayBhbmQgdGhlXG4gICAgICogZHVyYXRpb24gZm9yIGVhY2ggZnJhbWUvc2FtcGxlIHdlIHByb2Nlc3MgaW4gb3JkZXIgdG8gY2FsY3VsYXRlXG4gICAgICogdGhlIGJhc2VNZWRpYURlY29kZVRpbWVcbiAgICAgKi9cblxuICAgIHZhciBjb2xsZWN0RHRzSW5mbyA9IGZ1bmN0aW9uIGNvbGxlY3REdHNJbmZvKHRyYWNrLCBkYXRhKSB7XG4gICAgICBpZiAodHlwZW9mIGRhdGEucHRzID09PSAnbnVtYmVyJykge1xuICAgICAgICBpZiAodHJhY2sudGltZWxpbmVTdGFydEluZm8ucHRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0cmFjay50aW1lbGluZVN0YXJ0SW5mby5wdHMgPSBkYXRhLnB0cztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0cmFjay5taW5TZWdtZW50UHRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0cmFjay5taW5TZWdtZW50UHRzID0gZGF0YS5wdHM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJhY2subWluU2VnbWVudFB0cyA9IE1hdGgubWluKHRyYWNrLm1pblNlZ21lbnRQdHMsIGRhdGEucHRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0cmFjay5tYXhTZWdtZW50UHRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0cmFjay5tYXhTZWdtZW50UHRzID0gZGF0YS5wdHM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJhY2subWF4U2VnbWVudFB0cyA9IE1hdGgubWF4KHRyYWNrLm1heFNlZ21lbnRQdHMsIGRhdGEucHRzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGRhdGEuZHRzID09PSAnbnVtYmVyJykge1xuICAgICAgICBpZiAodHJhY2sudGltZWxpbmVTdGFydEluZm8uZHRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0cmFjay50aW1lbGluZVN0YXJ0SW5mby5kdHMgPSBkYXRhLmR0cztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0cmFjay5taW5TZWdtZW50RHRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0cmFjay5taW5TZWdtZW50RHRzID0gZGF0YS5kdHM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJhY2subWluU2VnbWVudER0cyA9IE1hdGgubWluKHRyYWNrLm1pblNlZ21lbnREdHMsIGRhdGEuZHRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0cmFjay5tYXhTZWdtZW50RHRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0cmFjay5tYXhTZWdtZW50RHRzID0gZGF0YS5kdHM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJhY2subWF4U2VnbWVudER0cyA9IE1hdGgubWF4KHRyYWNrLm1heFNlZ21lbnREdHMsIGRhdGEuZHRzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2xlYXIgdmFsdWVzIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBiYXNlTWVkaWFEZWNvZGVUaW1lIGJldHdlZW5cbiAgICAgKiB0cmFja3NcbiAgICAgKi9cblxuXG4gICAgdmFyIGNsZWFyRHRzSW5mbyA9IGZ1bmN0aW9uIGNsZWFyRHRzSW5mbyh0cmFjaykge1xuICAgICAgZGVsZXRlIHRyYWNrLm1pblNlZ21lbnREdHM7XG4gICAgICBkZWxldGUgdHJhY2subWF4U2VnbWVudER0cztcbiAgICAgIGRlbGV0ZSB0cmFjay5taW5TZWdtZW50UHRzO1xuICAgICAgZGVsZXRlIHRyYWNrLm1heFNlZ21lbnRQdHM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIHRyYWNrJ3MgYmFzZU1lZGlhRGVjb2RlVGltZSBiYXNlZCBvbiB0aGUgZWFybGllc3RcbiAgICAgKiBEVFMgdGhlIHRyYW5zbXV4ZXIgaGFzIGV2ZXIgc2VlbiBhbmQgdGhlIG1pbmltdW0gRFRTIGZvciB0aGVcbiAgICAgKiBjdXJyZW50IHRyYWNrXG4gICAgICogQHBhcmFtIHRyYWNrIHtvYmplY3R9IHRyYWNrIG1ldGFkYXRhIGNvbmZpZ3VyYXRpb25cbiAgICAgKiBAcGFyYW0ga2VlcE9yaWdpbmFsVGltZXN0YW1wcyB7Ym9vbGVhbn0gSWYgdHJ1ZSwga2VlcCB0aGUgdGltZXN0YW1wc1xuICAgICAqICAgICAgICBpbiB0aGUgc291cmNlOyBmYWxzZSB0byBhZGp1c3QgdGhlIGZpcnN0IHNlZ21lbnQgdG8gc3RhcnQgYXQgMC5cbiAgICAgKi9cblxuXG4gICAgdmFyIGNhbGN1bGF0ZVRyYWNrQmFzZU1lZGlhRGVjb2RlVGltZSA9IGZ1bmN0aW9uIGNhbGN1bGF0ZVRyYWNrQmFzZU1lZGlhRGVjb2RlVGltZSh0cmFjaywga2VlcE9yaWdpbmFsVGltZXN0YW1wcykge1xuICAgICAgdmFyIGJhc2VNZWRpYURlY29kZVRpbWUsXG4gICAgICAgICAgc2NhbGUsXG4gICAgICAgICAgbWluU2VnbWVudER0cyA9IHRyYWNrLm1pblNlZ21lbnREdHM7IC8vIE9wdGlvbmFsbHkgYWRqdXN0IHRoZSB0aW1lIHNvIHRoZSBmaXJzdCBzZWdtZW50IHN0YXJ0cyBhdCB6ZXJvLlxuXG4gICAgICBpZiAoIWtlZXBPcmlnaW5hbFRpbWVzdGFtcHMpIHtcbiAgICAgICAgbWluU2VnbWVudER0cyAtPSB0cmFjay50aW1lbGluZVN0YXJ0SW5mby5kdHM7XG4gICAgICB9IC8vIHRyYWNrLnRpbWVsaW5lU3RhcnRJbmZvLmJhc2VNZWRpYURlY29kZVRpbWUgaXMgdGhlIGxvY2F0aW9uLCBpbiB0aW1lLCB3aGVyZVxuICAgICAgLy8gd2Ugd2FudCB0aGUgc3RhcnQgb2YgdGhlIGZpcnN0IHNlZ21lbnQgdG8gYmUgcGxhY2VkXG5cblxuICAgICAgYmFzZU1lZGlhRGVjb2RlVGltZSA9IHRyYWNrLnRpbWVsaW5lU3RhcnRJbmZvLmJhc2VNZWRpYURlY29kZVRpbWU7IC8vIEFkZCB0byB0aGF0IHRoZSBkaXN0YW5jZSB0aGlzIHNlZ21lbnQgaXMgZnJvbSB0aGUgdmVyeSBmaXJzdFxuXG4gICAgICBiYXNlTWVkaWFEZWNvZGVUaW1lICs9IG1pblNlZ21lbnREdHM7IC8vIGJhc2VNZWRpYURlY29kZVRpbWUgbXVzdCBub3QgYmVjb21lIG5lZ2F0aXZlXG5cbiAgICAgIGJhc2VNZWRpYURlY29kZVRpbWUgPSBNYXRoLm1heCgwLCBiYXNlTWVkaWFEZWNvZGVUaW1lKTtcblxuICAgICAgaWYgKHRyYWNrLnR5cGUgPT09ICdhdWRpbycpIHtcbiAgICAgICAgLy8gQXVkaW8gaGFzIGEgZGlmZmVyZW50IGNsb2NrIGVxdWFsIHRvIHRoZSBzYW1wbGluZ19yYXRlIHNvIHdlIG5lZWQgdG9cbiAgICAgICAgLy8gc2NhbGUgdGhlIFBUUyB2YWx1ZXMgaW50byB0aGUgY2xvY2sgcmF0ZSBvZiB0aGUgdHJhY2tcbiAgICAgICAgc2NhbGUgPSB0cmFjay5zYW1wbGVyYXRlIC8gT05FX1NFQ09ORF9JTl9UUyQyO1xuICAgICAgICBiYXNlTWVkaWFEZWNvZGVUaW1lICo9IHNjYWxlO1xuICAgICAgICBiYXNlTWVkaWFEZWNvZGVUaW1lID0gTWF0aC5mbG9vcihiYXNlTWVkaWFEZWNvZGVUaW1lKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJhc2VNZWRpYURlY29kZVRpbWU7XG4gICAgfTtcblxuICAgIHZhciB0cmFja0RlY29kZUluZm8gPSB7XG4gICAgICBjbGVhckR0c0luZm86IGNsZWFyRHRzSW5mbyxcbiAgICAgIGNhbGN1bGF0ZVRyYWNrQmFzZU1lZGlhRGVjb2RlVGltZTogY2FsY3VsYXRlVHJhY2tCYXNlTWVkaWFEZWNvZGVUaW1lLFxuICAgICAgY29sbGVjdER0c0luZm86IGNvbGxlY3REdHNJbmZvXG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBtdXguanNcbiAgICAgKlxuICAgICAqIENvcHlyaWdodCAoYykgMjAxNSBCcmlnaHRjb3ZlXG4gICAgICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAgICAgKlxuICAgICAqIFJlYWRzIGluLWJhbmQgY2FwdGlvbiBpbmZvcm1hdGlvbiBmcm9tIGEgdmlkZW8gZWxlbWVudGFyeVxuICAgICAqIHN0cmVhbS4gQ2FwdGlvbnMgbXVzdCBmb2xsb3cgdGhlIENFQS03MDggc3RhbmRhcmQgZm9yIGluamVjdGlvblxuICAgICAqIGludG8gYW4gTVBFRy0yIHRyYW5zcG9ydCBzdHJlYW1zLlxuICAgICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ0VBLTcwOFxuICAgICAqIEBzZWUgaHR0cHM6Ly93d3cuZ3BvLmdvdi9mZHN5cy9wa2cvQ0ZSLTIwMDctdGl0bGU0Ny12b2wxL3BkZi9DRlItMjAwNy10aXRsZTQ3LXZvbDEtc2VjMTUtMTE5LnBkZlxuICAgICAqL1xuICAgIC8vIFN1cHBsZW1lbnRhbCBlbmhhbmNlbWVudCBpbmZvcm1hdGlvbiAoU0VJKSBOQUwgdW5pdHMgaGF2ZSBhXG4gICAgLy8gcGF5bG9hZCB0eXBlIGZpZWxkIHRvIGluZGljYXRlIGhvdyB0aGV5IGFyZSB0byBiZVxuICAgIC8vIGludGVycHJldGVkLiBDRUFTLTcwOCBjYXB0aW9uIGNvbnRlbnQgaXMgYWx3YXlzIHRyYW5zbWl0dGVkIHdpdGhcbiAgICAvLyBwYXlsb2FkIHR5cGUgMHgwNC5cblxuICAgIHZhciBVU0VSX0RBVEFfUkVHSVNURVJFRF9JVFVfVF9UMzUgPSA0LFxuICAgICAgICBSQlNQX1RSQUlMSU5HX0JJVFMgPSAxMjg7XG4gICAgLyoqXG4gICAgICAqIFBhcnNlIGEgc3VwcGxlbWVudGFsIGVuaGFuY2VtZW50IGluZm9ybWF0aW9uIChTRUkpIE5BTCB1bml0LlxuICAgICAgKiBTdG9wcyBwYXJzaW5nIG9uY2UgYSBtZXNzYWdlIG9mIHR5cGUgSVRVIFQgVDM1IGhhcyBiZWVuIGZvdW5kLlxuICAgICAgKlxuICAgICAgKiBAcGFyYW0gYnl0ZXMge1VpbnQ4QXJyYXl9IHRoZSBieXRlcyBvZiBhIFNFSSBOQUwgdW5pdFxuICAgICAgKiBAcmV0dXJuIHtvYmplY3R9IHRoZSBwYXJzZWQgU0VJIHBheWxvYWRcbiAgICAgICogQHNlZSBSZWMuIElUVS1UIEguMjY0LCA3LjMuMi4zLjFcbiAgICAgICovXG5cbiAgICB2YXIgcGFyc2VTZWkgPSBmdW5jdGlvbiBwYXJzZVNlaShieXRlcykge1xuICAgICAgdmFyIGkgPSAwLFxuICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgcGF5bG9hZFR5cGU6IC0xLFxuICAgICAgICBwYXlsb2FkU2l6ZTogMFxuICAgICAgfSxcbiAgICAgICAgICBwYXlsb2FkVHlwZSA9IDAsXG4gICAgICAgICAgcGF5bG9hZFNpemUgPSAwOyAvLyBnbyB0aHJvdWdoIHRoZSBzZWlfcmJzcCBwYXJzaW5nIGVhY2ggZWFjaCBpbmRpdmlkdWFsIHNlaV9tZXNzYWdlXG5cbiAgICAgIHdoaWxlIChpIDwgYnl0ZXMuYnl0ZUxlbmd0aCkge1xuICAgICAgICAvLyBzdG9wIG9uY2Ugd2UgaGF2ZSBoaXQgdGhlIGVuZCBvZiB0aGUgc2VpX3Jic3BcbiAgICAgICAgaWYgKGJ5dGVzW2ldID09PSBSQlNQX1RSQUlMSU5HX0JJVFMpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSAvLyBQYXJzZSBwYXlsb2FkIHR5cGVcblxuXG4gICAgICAgIHdoaWxlIChieXRlc1tpXSA9PT0gMHhGRikge1xuICAgICAgICAgIHBheWxvYWRUeXBlICs9IDI1NTtcbiAgICAgICAgICBpKys7XG4gICAgICAgIH1cblxuICAgICAgICBwYXlsb2FkVHlwZSArPSBieXRlc1tpKytdOyAvLyBQYXJzZSBwYXlsb2FkIHNpemVcblxuICAgICAgICB3aGlsZSAoYnl0ZXNbaV0gPT09IDB4RkYpIHtcbiAgICAgICAgICBwYXlsb2FkU2l6ZSArPSAyNTU7XG4gICAgICAgICAgaSsrO1xuICAgICAgICB9XG5cbiAgICAgICAgcGF5bG9hZFNpemUgKz0gYnl0ZXNbaSsrXTsgLy8gdGhpcyBzZWlfbWVzc2FnZSBpcyBhIDYwOC83MDggY2FwdGlvbiBzbyBzYXZlIGl0IGFuZCBicmVha1xuICAgICAgICAvLyB0aGVyZSBjYW4gb25seSBldmVyIGJlIG9uZSBjYXB0aW9uIG1lc3NhZ2UgaW4gYSBmcmFtZSdzIHNlaVxuXG4gICAgICAgIGlmICghcmVzdWx0LnBheWxvYWQgJiYgcGF5bG9hZFR5cGUgPT09IFVTRVJfREFUQV9SRUdJU1RFUkVEX0lUVV9UX1QzNSkge1xuICAgICAgICAgIHJlc3VsdC5wYXlsb2FkVHlwZSA9IHBheWxvYWRUeXBlO1xuICAgICAgICAgIHJlc3VsdC5wYXlsb2FkU2l6ZSA9IHBheWxvYWRTaXplO1xuICAgICAgICAgIHJlc3VsdC5wYXlsb2FkID0gYnl0ZXMuc3ViYXJyYXkoaSwgaSArIHBheWxvYWRTaXplKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSAvLyBza2lwIHRoZSBwYXlsb2FkIGFuZCBwYXJzZSB0aGUgbmV4dCBtZXNzYWdlXG5cblxuICAgICAgICBpICs9IHBheWxvYWRTaXplO1xuICAgICAgICBwYXlsb2FkVHlwZSA9IDA7XG4gICAgICAgIHBheWxvYWRTaXplID0gMDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9OyAvLyBzZWUgQU5TSS9TQ1RFIDEyOC0xICgyMDEzKSwgc2VjdGlvbiA4LjFcblxuXG4gICAgdmFyIHBhcnNlVXNlckRhdGEgPSBmdW5jdGlvbiBwYXJzZVVzZXJEYXRhKHNlaSkge1xuICAgICAgLy8gaXR1X3RfdDM1X2NvbnRyeV9jb2RlIG11c3QgYmUgMTgxIChVbml0ZWQgU3RhdGVzKSBmb3JcbiAgICAgIC8vIGNhcHRpb25zXG4gICAgICBpZiAoc2VpLnBheWxvYWRbMF0gIT09IDE4MSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gLy8gaXR1X3RfdDM1X3Byb3ZpZGVyX2NvZGUgc2hvdWxkIGJlIDQ5IChBVFNDKSBmb3IgY2FwdGlvbnNcblxuXG4gICAgICBpZiAoKHNlaS5wYXlsb2FkWzFdIDw8IDggfCBzZWkucGF5bG9hZFsyXSkgIT09IDQ5KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSAvLyB0aGUgdXNlcl9pZGVudGlmaWVyIHNob3VsZCBiZSBcIkdBOTRcIiB0byBpbmRpY2F0ZSBBVFNDMSBkYXRhXG5cblxuICAgICAgaWYgKFN0cmluZy5mcm9tQ2hhckNvZGUoc2VpLnBheWxvYWRbM10sIHNlaS5wYXlsb2FkWzRdLCBzZWkucGF5bG9hZFs1XSwgc2VpLnBheWxvYWRbNl0pICE9PSAnR0E5NCcpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9IC8vIGZpbmFsbHksIHVzZXJfZGF0YV90eXBlX2NvZGUgc2hvdWxkIGJlIDB4MDMgZm9yIGNhcHRpb24gZGF0YVxuXG5cbiAgICAgIGlmIChzZWkucGF5bG9hZFs3XSAhPT0gMHgwMykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gLy8gcmV0dXJuIHRoZSB1c2VyX2RhdGFfdHlwZV9zdHJ1Y3R1cmUgYW5kIHN0cmlwIHRoZSB0cmFpbGluZ1xuICAgICAgLy8gbWFya2VyIGJpdHNcblxuXG4gICAgICByZXR1cm4gc2VpLnBheWxvYWQuc3ViYXJyYXkoOCwgc2VpLnBheWxvYWQubGVuZ3RoIC0gMSk7XG4gICAgfTsgLy8gc2VlIENFQS03MDgtRCwgc2VjdGlvbiA0LjRcblxuXG4gICAgdmFyIHBhcnNlQ2FwdGlvblBhY2tldHMgPSBmdW5jdGlvbiBwYXJzZUNhcHRpb25QYWNrZXRzKHB0cywgdXNlckRhdGEpIHtcbiAgICAgIHZhciByZXN1bHRzID0gW10sXG4gICAgICAgICAgaSxcbiAgICAgICAgICBjb3VudCxcbiAgICAgICAgICBvZmZzZXQsXG4gICAgICAgICAgZGF0YTsgLy8gaWYgdGhpcyBpcyBqdXN0IGZpbGxlciwgcmV0dXJuIGltbWVkaWF0ZWx5XG5cbiAgICAgIGlmICghKHVzZXJEYXRhWzBdICYgMHg0MCkpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICB9IC8vIHBhcnNlIG91dCB0aGUgY2NfZGF0YV8xIGFuZCBjY19kYXRhXzIgZmllbGRzXG5cblxuICAgICAgY291bnQgPSB1c2VyRGF0YVswXSAmIDB4MWY7XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgIG9mZnNldCA9IGkgKiAzO1xuICAgICAgICBkYXRhID0ge1xuICAgICAgICAgIHR5cGU6IHVzZXJEYXRhW29mZnNldCArIDJdICYgMHgwMyxcbiAgICAgICAgICBwdHM6IHB0c1xuICAgICAgICB9OyAvLyBjYXB0dXJlIGNjIGRhdGEgd2hlbiBjY192YWxpZCBpcyAxXG5cbiAgICAgICAgaWYgKHVzZXJEYXRhW29mZnNldCArIDJdICYgMHgwNCkge1xuICAgICAgICAgIGRhdGEuY2NEYXRhID0gdXNlckRhdGFbb2Zmc2V0ICsgM10gPDwgOCB8IHVzZXJEYXRhW29mZnNldCArIDRdO1xuICAgICAgICAgIHJlc3VsdHMucHVzaChkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuXG4gICAgdmFyIGRpc2NhcmRFbXVsYXRpb25QcmV2ZW50aW9uQnl0ZXMgPSBmdW5jdGlvbiBkaXNjYXJkRW11bGF0aW9uUHJldmVudGlvbkJ5dGVzKGRhdGEpIHtcbiAgICAgIHZhciBsZW5ndGggPSBkYXRhLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgZW11bGF0aW9uUHJldmVudGlvbkJ5dGVzUG9zaXRpb25zID0gW10sXG4gICAgICAgICAgaSA9IDEsXG4gICAgICAgICAgbmV3TGVuZ3RoLFxuICAgICAgICAgIG5ld0RhdGE7IC8vIEZpbmQgYWxsIGBFbXVsYXRpb24gUHJldmVudGlvbiBCeXRlc2BcblxuICAgICAgd2hpbGUgKGkgPCBsZW5ndGggLSAyKSB7XG4gICAgICAgIGlmIChkYXRhW2ldID09PSAwICYmIGRhdGFbaSArIDFdID09PSAwICYmIGRhdGFbaSArIDJdID09PSAweDAzKSB7XG4gICAgICAgICAgZW11bGF0aW9uUHJldmVudGlvbkJ5dGVzUG9zaXRpb25zLnB1c2goaSArIDIpO1xuICAgICAgICAgIGkgKz0gMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gSWYgbm8gRW11bGF0aW9uIFByZXZlbnRpb24gQnl0ZXMgd2VyZSBmb3VuZCBqdXN0IHJldHVybiB0aGUgb3JpZ2luYWxcbiAgICAgIC8vIGFycmF5XG5cblxuICAgICAgaWYgKGVtdWxhdGlvblByZXZlbnRpb25CeXRlc1Bvc2l0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9IC8vIENyZWF0ZSBhIG5ldyBhcnJheSB0byBob2xkIHRoZSBOQUwgdW5pdCBkYXRhXG5cblxuICAgICAgbmV3TGVuZ3RoID0gbGVuZ3RoIC0gZW11bGF0aW9uUHJldmVudGlvbkJ5dGVzUG9zaXRpb25zLmxlbmd0aDtcbiAgICAgIG5ld0RhdGEgPSBuZXcgVWludDhBcnJheShuZXdMZW5ndGgpO1xuICAgICAgdmFyIHNvdXJjZUluZGV4ID0gMDtcblxuICAgICAgZm9yIChpID0gMDsgaSA8IG5ld0xlbmd0aDsgc291cmNlSW5kZXgrKywgaSsrKSB7XG4gICAgICAgIGlmIChzb3VyY2VJbmRleCA9PT0gZW11bGF0aW9uUHJldmVudGlvbkJ5dGVzUG9zaXRpb25zWzBdKSB7XG4gICAgICAgICAgLy8gU2tpcCB0aGlzIGJ5dGVcbiAgICAgICAgICBzb3VyY2VJbmRleCsrOyAvLyBSZW1vdmUgdGhpcyBwb3NpdGlvbiBpbmRleFxuXG4gICAgICAgICAgZW11bGF0aW9uUHJldmVudGlvbkJ5dGVzUG9zaXRpb25zLnNoaWZ0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBuZXdEYXRhW2ldID0gZGF0YVtzb3VyY2VJbmRleF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXdEYXRhO1xuICAgIH07IC8vIGV4cG9ydHNcblxuXG4gICAgdmFyIGNhcHRpb25QYWNrZXRQYXJzZXIgPSB7XG4gICAgICBwYXJzZVNlaTogcGFyc2VTZWksXG4gICAgICBwYXJzZVVzZXJEYXRhOiBwYXJzZVVzZXJEYXRhLFxuICAgICAgcGFyc2VDYXB0aW9uUGFja2V0czogcGFyc2VDYXB0aW9uUGFja2V0cyxcbiAgICAgIGRpc2NhcmRFbXVsYXRpb25QcmV2ZW50aW9uQnl0ZXM6IGRpc2NhcmRFbXVsYXRpb25QcmV2ZW50aW9uQnl0ZXMsXG4gICAgICBVU0VSX0RBVEFfUkVHSVNURVJFRF9JVFVfVF9UMzU6IFVTRVJfREFUQV9SRUdJU1RFUkVEX0lUVV9UX1QzNVxuICAgIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gTGluayBUbyBUcmFuc3BvcnRcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgdmFyIENhcHRpb25TdHJlYW0gPSBmdW5jdGlvbiBDYXB0aW9uU3RyZWFtKCkge1xuICAgICAgQ2FwdGlvblN0cmVhbS5wcm90b3R5cGUuaW5pdC5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5jYXB0aW9uUGFja2V0c18gPSBbXTtcbiAgICAgIHRoaXMuY2NTdHJlYW1zXyA9IFtuZXcgQ2VhNjA4U3RyZWFtKDAsIDApLCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICBuZXcgQ2VhNjA4U3RyZWFtKDAsIDEpLCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICBuZXcgQ2VhNjA4U3RyZWFtKDEsIDApLCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICBuZXcgQ2VhNjA4U3RyZWFtKDEsIDEpIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgIF07XG4gICAgICB0aGlzLnJlc2V0KCk7IC8vIGZvcndhcmQgZGF0YSBhbmQgZG9uZSBldmVudHMgZnJvbSBDQ3MgdG8gdGhpcyBDYXB0aW9uU3RyZWFtXG5cbiAgICAgIHRoaXMuY2NTdHJlYW1zXy5mb3JFYWNoKGZ1bmN0aW9uIChjYykge1xuICAgICAgICBjYy5vbignZGF0YScsIHRoaXMudHJpZ2dlci5iaW5kKHRoaXMsICdkYXRhJykpO1xuICAgICAgICBjYy5vbignZG9uZScsIHRoaXMudHJpZ2dlci5iaW5kKHRoaXMsICdkb25lJykpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfTtcblxuICAgIENhcHRpb25TdHJlYW0ucHJvdG90eXBlID0gbmV3IHN0cmVhbSgpO1xuXG4gICAgQ2FwdGlvblN0cmVhbS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyIHNlaSwgdXNlckRhdGEsIG5ld0NhcHRpb25QYWNrZXRzOyAvLyBvbmx5IGV4YW1pbmUgU0VJIE5BTHNcblxuICAgICAgaWYgKGV2ZW50Lm5hbFVuaXRUeXBlICE9PSAnc2VpX3Jic3AnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gcGFyc2UgdGhlIHNlaVxuXG5cbiAgICAgIHNlaSA9IGNhcHRpb25QYWNrZXRQYXJzZXIucGFyc2VTZWkoZXZlbnQuZXNjYXBlZFJCU1ApOyAvLyBpZ25vcmUgZXZlcnl0aGluZyBidXQgdXNlcl9kYXRhX3JlZ2lzdGVyZWRfaXR1X3RfdDM1XG5cbiAgICAgIGlmIChzZWkucGF5bG9hZFR5cGUgIT09IGNhcHRpb25QYWNrZXRQYXJzZXIuVVNFUl9EQVRBX1JFR0lTVEVSRURfSVRVX1RfVDM1KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gcGFyc2Ugb3V0IHRoZSB1c2VyIGRhdGEgcGF5bG9hZFxuXG5cbiAgICAgIHVzZXJEYXRhID0gY2FwdGlvblBhY2tldFBhcnNlci5wYXJzZVVzZXJEYXRhKHNlaSk7IC8vIGlnbm9yZSB1bnJlY29nbml6ZWQgdXNlckRhdGFcblxuICAgICAgaWYgKCF1c2VyRGF0YSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIFNvbWV0aW1lcywgdGhlIHNhbWUgc2VnbWVudCAjIHdpbGwgYmUgZG93bmxvYWRlZCB0d2ljZS4gVG8gc3RvcCB0aGVcbiAgICAgIC8vIGNhcHRpb24gZGF0YSBmcm9tIGJlaW5nIHByb2Nlc3NlZCB0d2ljZSwgd2UgdHJhY2sgdGhlIGxhdGVzdCBkdHMgd2UndmVcbiAgICAgIC8vIHJlY2VpdmVkIGFuZCBpZ25vcmUgZXZlcnl0aGluZyB3aXRoIGEgZHRzIGJlZm9yZSB0aGF0LiBIb3dldmVyLCBzaW5jZVxuICAgICAgLy8gZGF0YSBmb3IgYSBzcGVjaWZpYyBkdHMgY2FuIGJlIHNwbGl0IGFjcm9zcyBwYWNrZXRzIG9uIGVpdGhlciBzaWRlIG9mXG4gICAgICAvLyBhIHNlZ21lbnQgYm91bmRhcnksIHdlIG5lZWQgdG8gbWFrZSBzdXJlIHdlICpkb24ndCogaWdub3JlIHRoZSBwYWNrZXRzXG4gICAgICAvLyBmcm9tIHRoZSAqbmV4dCogc2VnbWVudCB0aGF0IGhhdmUgZHRzID09PSB0aGlzLmxhdGVzdER0c18uIEJ5IGNvbnN0YW50bHlcbiAgICAgIC8vIHRyYWNraW5nIHRoZSBudW1iZXIgb2YgcGFja2V0cyByZWNlaXZlZCB3aXRoIGR0cyA9PT0gdGhpcy5sYXRlc3REdHNfLCB3ZVxuICAgICAgLy8ga25vdyBob3cgbWFueSBzaG91bGQgYmUgaWdub3JlZCBvbmNlIHdlIHN0YXJ0IHJlY2VpdmluZyBkdXBsaWNhdGVzLlxuXG5cbiAgICAgIGlmIChldmVudC5kdHMgPCB0aGlzLmxhdGVzdER0c18pIHtcbiAgICAgICAgLy8gV2UndmUgc3RhcnRlZCBnZXR0aW5nIG9sZGVyIGRhdGEsIHNvIHNldCB0aGUgZmxhZy5cbiAgICAgICAgdGhpcy5pZ25vcmVOZXh0RXF1YWxEdHNfID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIGlmIChldmVudC5kdHMgPT09IHRoaXMubGF0ZXN0RHRzXyAmJiB0aGlzLmlnbm9yZU5leHRFcXVhbER0c18pIHtcbiAgICAgICAgdGhpcy5udW1TYW1lRHRzXy0tO1xuXG4gICAgICAgIGlmICghdGhpcy5udW1TYW1lRHRzXykge1xuICAgICAgICAgIC8vIFdlJ3ZlIHJlY2VpdmVkIHRoZSBsYXN0IGR1cGxpY2F0ZSBwYWNrZXQsIHRpbWUgdG8gc3RhcnQgcHJvY2Vzc2luZyBhZ2FpblxuICAgICAgICAgIHRoaXMuaWdub3JlTmV4dEVxdWFsRHRzXyA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBwYXJzZSBvdXQgQ0MgZGF0YSBwYWNrZXRzIGFuZCBzYXZlIHRoZW0gZm9yIGxhdGVyXG5cblxuICAgICAgbmV3Q2FwdGlvblBhY2tldHMgPSBjYXB0aW9uUGFja2V0UGFyc2VyLnBhcnNlQ2FwdGlvblBhY2tldHMoZXZlbnQucHRzLCB1c2VyRGF0YSk7XG4gICAgICB0aGlzLmNhcHRpb25QYWNrZXRzXyA9IHRoaXMuY2FwdGlvblBhY2tldHNfLmNvbmNhdChuZXdDYXB0aW9uUGFja2V0cyk7XG5cbiAgICAgIGlmICh0aGlzLmxhdGVzdER0c18gIT09IGV2ZW50LmR0cykge1xuICAgICAgICB0aGlzLm51bVNhbWVEdHNfID0gMDtcbiAgICAgIH1cblxuICAgICAgdGhpcy5udW1TYW1lRHRzXysrO1xuICAgICAgdGhpcy5sYXRlc3REdHNfID0gZXZlbnQuZHRzO1xuICAgIH07XG5cbiAgICBDYXB0aW9uU3RyZWFtLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIG1ha2Ugc3VyZSB3ZSBhY3R1YWxseSBwYXJzZWQgY2FwdGlvbnMgYmVmb3JlIHByb2NlZWRpbmdcbiAgICAgIGlmICghdGhpcy5jYXB0aW9uUGFja2V0c18ubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuY2NTdHJlYW1zXy5mb3JFYWNoKGZ1bmN0aW9uIChjYykge1xuICAgICAgICAgIGNjLmZsdXNoKCk7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIEluIENocm9tZSwgdGhlIEFycmF5I3NvcnQgZnVuY3Rpb24gaXMgbm90IHN0YWJsZSBzbyBhZGQgYVxuICAgICAgLy8gcHJlc29ydEluZGV4IHRoYXQgd2UgY2FuIHVzZSB0byBlbnN1cmUgd2UgZ2V0IGEgc3RhYmxlLXNvcnRcblxuXG4gICAgICB0aGlzLmNhcHRpb25QYWNrZXRzXy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtLCBpZHgpIHtcbiAgICAgICAgZWxlbS5wcmVzb3J0SW5kZXggPSBpZHg7XG4gICAgICB9KTsgLy8gc29ydCBjYXB0aW9uIGJ5dGUtcGFpcnMgYmFzZWQgb24gdGhlaXIgUFRTIHZhbHVlc1xuXG4gICAgICB0aGlzLmNhcHRpb25QYWNrZXRzXy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIGlmIChhLnB0cyA9PT0gYi5wdHMpIHtcbiAgICAgICAgICByZXR1cm4gYS5wcmVzb3J0SW5kZXggLSBiLnByZXNvcnRJbmRleDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhLnB0cyAtIGIucHRzO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmNhcHRpb25QYWNrZXRzXy5mb3JFYWNoKGZ1bmN0aW9uIChwYWNrZXQpIHtcbiAgICAgICAgaWYgKHBhY2tldC50eXBlIDwgMikge1xuICAgICAgICAgIC8vIERpc3BhdGNoIHBhY2tldCB0byB0aGUgcmlnaHQgQ2VhNjA4U3RyZWFtXG4gICAgICAgICAgdGhpcy5kaXNwYXRjaENlYTYwOFBhY2tldChwYWNrZXQpO1xuICAgICAgICB9IC8vIHRoaXMgaXMgd2hlcmUgYW4gJ2Vsc2UnIHdvdWxkIGdvIGZvciBhIGRpc3BhdGNoaW5nIHBhY2tldHNcbiAgICAgICAgLy8gdG8gYSB0aGVvcmV0aWNhbCBDZWE3MDhTdHJlYW0gdGhhdCBoYW5kbGVzIFNFUlZJQ0VuIGRhdGFcblxuICAgICAgfSwgdGhpcyk7XG4gICAgICB0aGlzLmNhcHRpb25QYWNrZXRzXy5sZW5ndGggPSAwO1xuICAgICAgdGhpcy5jY1N0cmVhbXNfLmZvckVhY2goZnVuY3Rpb24gKGNjKSB7XG4gICAgICAgIGNjLmZsdXNoKCk7XG4gICAgICB9LCB0aGlzKTtcbiAgICAgIHJldHVybjtcbiAgICB9O1xuXG4gICAgQ2FwdGlvblN0cmVhbS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmxhdGVzdER0c18gPSBudWxsO1xuICAgICAgdGhpcy5pZ25vcmVOZXh0RXF1YWxEdHNfID0gZmFsc2U7XG4gICAgICB0aGlzLm51bVNhbWVEdHNfID0gMDtcbiAgICAgIHRoaXMuYWN0aXZlQ2VhNjA4Q2hhbm5lbF8gPSBbbnVsbCwgbnVsbF07XG4gICAgICB0aGlzLmNjU3RyZWFtc18uZm9yRWFjaChmdW5jdGlvbiAoY2NTdHJlYW0pIHtcbiAgICAgICAgY2NTdHJlYW0ucmVzZXQoKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBDYXB0aW9uU3RyZWFtLnByb3RvdHlwZS5kaXNwYXRjaENlYTYwOFBhY2tldCA9IGZ1bmN0aW9uIChwYWNrZXQpIHtcbiAgICAgIC8vIE5PVEU6IHBhY2tldC50eXBlIGlzIHRoZSBDRUE2MDggZmllbGRcbiAgICAgIGlmICh0aGlzLnNldHNDaGFubmVsMUFjdGl2ZShwYWNrZXQpKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlQ2VhNjA4Q2hhbm5lbF9bcGFja2V0LnR5cGVdID0gMDtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZXRzQ2hhbm5lbDJBY3RpdmUocGFja2V0KSkge1xuICAgICAgICB0aGlzLmFjdGl2ZUNlYTYwOENoYW5uZWxfW3BhY2tldC50eXBlXSA9IDE7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmFjdGl2ZUNlYTYwOENoYW5uZWxfW3BhY2tldC50eXBlXSA9PT0gbnVsbCkge1xuICAgICAgICAvLyBJZiB3ZSBoYXZlbid0IHJlY2VpdmVkIGFueXRoaW5nIHRvIHNldCB0aGUgYWN0aXZlIGNoYW5uZWwsIGRpc2NhcmQgdGhlXG4gICAgICAgIC8vIGRhdGE7IHdlIGRvbid0IHdhbnQganVtYmxlZCBjYXB0aW9uc1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2NTdHJlYW1zX1socGFja2V0LnR5cGUgPDwgMSkgKyB0aGlzLmFjdGl2ZUNlYTYwOENoYW5uZWxfW3BhY2tldC50eXBlXV0ucHVzaChwYWNrZXQpO1xuICAgIH07XG5cbiAgICBDYXB0aW9uU3RyZWFtLnByb3RvdHlwZS5zZXRzQ2hhbm5lbDFBY3RpdmUgPSBmdW5jdGlvbiAocGFja2V0KSB7XG4gICAgICByZXR1cm4gKHBhY2tldC5jY0RhdGEgJiAweDc4MDApID09PSAweDEwMDA7XG4gICAgfTtcblxuICAgIENhcHRpb25TdHJlYW0ucHJvdG90eXBlLnNldHNDaGFubmVsMkFjdGl2ZSA9IGZ1bmN0aW9uIChwYWNrZXQpIHtcbiAgICAgIHJldHVybiAocGFja2V0LmNjRGF0YSAmIDB4NzgwMCkgPT09IDB4MTgwMDtcbiAgICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gU2Vzc2lvbiB0byBBcHBsaWNhdGlvblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBUaGlzIGhhc2ggbWFwcyBub24tQVNDSUksIHNwZWNpYWwsIGFuZCBleHRlbmRlZCBjaGFyYWN0ZXIgY29kZXMgdG8gdGhlaXJcbiAgICAvLyBwcm9wZXIgVW5pY29kZSBlcXVpdmFsZW50LiBUaGUgZmlyc3Qga2V5cyB0aGF0IGFyZSBvbmx5IGEgc2luZ2xlIGJ5dGVcbiAgICAvLyBhcmUgdGhlIG5vbi1zdGFuZGFyZCBBU0NJSSBjaGFyYWN0ZXJzLCB3aGljaCBzaW1wbHkgbWFwIHRoZSBDRUE2MDggYnl0ZVxuICAgIC8vIHRvIHRoZSBzdGFuZGFyZCBBU0NJSS9Vbmljb2RlLiBUaGUgdHdvLWJ5dGUga2V5cyB0aGF0IGZvbGxvdyBhcmUgdGhlIENFQTYwOFxuICAgIC8vIGNoYXJhY3RlciBjb2RlcywgYnV0IGhhdmUgdGhlaXIgTVNCIGJpdG1hc2tlZCB3aXRoIDB4MDMgc28gdGhhdCBhIGxvb2t1cFxuICAgIC8vIGNhbiBiZSBwZXJmb3JtZWQgcmVnYXJkbGVzcyBvZiB0aGUgZmllbGQgYW5kIGRhdGEgY2hhbm5lbCBvbiB3aGljaCB0aGVcbiAgICAvLyBjaGFyYWN0ZXIgY29kZSB3YXMgcmVjZWl2ZWQuXG5cblxuICAgIHZhciBDSEFSQUNURVJfVFJBTlNMQVRJT04gPSB7XG4gICAgICAweDJhOiAweGUxLFxuICAgICAgLy8gw6FcbiAgICAgIDB4NWM6IDB4ZTksXG4gICAgICAvLyDDqVxuICAgICAgMHg1ZTogMHhlZCxcbiAgICAgIC8vIMOtXG4gICAgICAweDVmOiAweGYzLFxuICAgICAgLy8gw7NcbiAgICAgIDB4NjA6IDB4ZmEsXG4gICAgICAvLyDDulxuICAgICAgMHg3YjogMHhlNyxcbiAgICAgIC8vIMOnXG4gICAgICAweDdjOiAweGY3LFxuICAgICAgLy8gw7dcbiAgICAgIDB4N2Q6IDB4ZDEsXG4gICAgICAvLyDDkVxuICAgICAgMHg3ZTogMHhmMSxcbiAgICAgIC8vIMOxXG4gICAgICAweDdmOiAweDI1ODgsXG4gICAgICAvLyDilohcbiAgICAgIDB4MDEzMDogMHhhZSxcbiAgICAgIC8vIMKuXG4gICAgICAweDAxMzE6IDB4YjAsXG4gICAgICAvLyDCsFxuICAgICAgMHgwMTMyOiAweGJkLFxuICAgICAgLy8gwr1cbiAgICAgIDB4MDEzMzogMHhiZixcbiAgICAgIC8vIMK/XG4gICAgICAweDAxMzQ6IDB4MjEyMixcbiAgICAgIC8vIOKEolxuICAgICAgMHgwMTM1OiAweGEyLFxuICAgICAgLy8gwqJcbiAgICAgIDB4MDEzNjogMHhhMyxcbiAgICAgIC8vIMKjXG4gICAgICAweDAxMzc6IDB4MjY2YSxcbiAgICAgIC8vIOKZqlxuICAgICAgMHgwMTM4OiAweGUwLFxuICAgICAgLy8gw6BcbiAgICAgIDB4MDEzOTogMHhhMCxcbiAgICAgIC8vXG4gICAgICAweDAxM2E6IDB4ZTgsXG4gICAgICAvLyDDqFxuICAgICAgMHgwMTNiOiAweGUyLFxuICAgICAgLy8gw6JcbiAgICAgIDB4MDEzYzogMHhlYSxcbiAgICAgIC8vIMOqXG4gICAgICAweDAxM2Q6IDB4ZWUsXG4gICAgICAvLyDDrlxuICAgICAgMHgwMTNlOiAweGY0LFxuICAgICAgLy8gw7RcbiAgICAgIDB4MDEzZjogMHhmYixcbiAgICAgIC8vIMO7XG4gICAgICAweDAyMjA6IDB4YzEsXG4gICAgICAvLyDDgVxuICAgICAgMHgwMjIxOiAweGM5LFxuICAgICAgLy8gw4lcbiAgICAgIDB4MDIyMjogMHhkMyxcbiAgICAgIC8vIMOTXG4gICAgICAweDAyMjM6IDB4ZGEsXG4gICAgICAvLyDDmlxuICAgICAgMHgwMjI0OiAweGRjLFxuICAgICAgLy8gw5xcbiAgICAgIDB4MDIyNTogMHhmYyxcbiAgICAgIC8vIMO8XG4gICAgICAweDAyMjY6IDB4MjAxOCxcbiAgICAgIC8vIOKAmFxuICAgICAgMHgwMjI3OiAweGExLFxuICAgICAgLy8gwqFcbiAgICAgIDB4MDIyODogMHgyYSxcbiAgICAgIC8vICpcbiAgICAgIDB4MDIyOTogMHgyNyxcbiAgICAgIC8vICdcbiAgICAgIDB4MDIyYTogMHgyMDE0LFxuICAgICAgLy8g4oCUXG4gICAgICAweDAyMmI6IDB4YTksXG4gICAgICAvLyDCqVxuICAgICAgMHgwMjJjOiAweDIxMjAsXG4gICAgICAvLyDihKBcbiAgICAgIDB4MDIyZDogMHgyMDIyLFxuICAgICAgLy8g4oCiXG4gICAgICAweDAyMmU6IDB4MjAxYyxcbiAgICAgIC8vIOKAnFxuICAgICAgMHgwMjJmOiAweDIwMWQsXG4gICAgICAvLyDigJ1cbiAgICAgIDB4MDIzMDogMHhjMCxcbiAgICAgIC8vIMOAXG4gICAgICAweDAyMzE6IDB4YzIsXG4gICAgICAvLyDDglxuICAgICAgMHgwMjMyOiAweGM3LFxuICAgICAgLy8gw4dcbiAgICAgIDB4MDIzMzogMHhjOCxcbiAgICAgIC8vIMOIXG4gICAgICAweDAyMzQ6IDB4Y2EsXG4gICAgICAvLyDDilxuICAgICAgMHgwMjM1OiAweGNiLFxuICAgICAgLy8gw4tcbiAgICAgIDB4MDIzNjogMHhlYixcbiAgICAgIC8vIMOrXG4gICAgICAweDAyMzc6IDB4Y2UsXG4gICAgICAvLyDDjlxuICAgICAgMHgwMjM4OiAweGNmLFxuICAgICAgLy8gw49cbiAgICAgIDB4MDIzOTogMHhlZixcbiAgICAgIC8vIMOvXG4gICAgICAweDAyM2E6IDB4ZDQsXG4gICAgICAvLyDDlFxuICAgICAgMHgwMjNiOiAweGQ5LFxuICAgICAgLy8gw5lcbiAgICAgIDB4MDIzYzogMHhmOSxcbiAgICAgIC8vIMO5XG4gICAgICAweDAyM2Q6IDB4ZGIsXG4gICAgICAvLyDDm1xuICAgICAgMHgwMjNlOiAweGFiLFxuICAgICAgLy8gwqtcbiAgICAgIDB4MDIzZjogMHhiYixcbiAgICAgIC8vIMK7XG4gICAgICAweDAzMjA6IDB4YzMsXG4gICAgICAvLyDDg1xuICAgICAgMHgwMzIxOiAweGUzLFxuICAgICAgLy8gw6NcbiAgICAgIDB4MDMyMjogMHhjZCxcbiAgICAgIC8vIMONXG4gICAgICAweDAzMjM6IDB4Y2MsXG4gICAgICAvLyDDjFxuICAgICAgMHgwMzI0OiAweGVjLFxuICAgICAgLy8gw6xcbiAgICAgIDB4MDMyNTogMHhkMixcbiAgICAgIC8vIMOSXG4gICAgICAweDAzMjY6IDB4ZjIsXG4gICAgICAvLyDDslxuICAgICAgMHgwMzI3OiAweGQ1LFxuICAgICAgLy8gw5VcbiAgICAgIDB4MDMyODogMHhmNSxcbiAgICAgIC8vIMO1XG4gICAgICAweDAzMjk6IDB4N2IsXG4gICAgICAvLyB7XG4gICAgICAweDAzMmE6IDB4N2QsXG4gICAgICAvLyB9XG4gICAgICAweDAzMmI6IDB4NWMsXG4gICAgICAvLyBcXFxuICAgICAgMHgwMzJjOiAweDVlLFxuICAgICAgLy8gXlxuICAgICAgMHgwMzJkOiAweDVmLFxuICAgICAgLy8gX1xuICAgICAgMHgwMzJlOiAweDdjLFxuICAgICAgLy8gfFxuICAgICAgMHgwMzJmOiAweDdlLFxuICAgICAgLy8gflxuICAgICAgMHgwMzMwOiAweGM0LFxuICAgICAgLy8gw4RcbiAgICAgIDB4MDMzMTogMHhlNCxcbiAgICAgIC8vIMOkXG4gICAgICAweDAzMzI6IDB4ZDYsXG4gICAgICAvLyDDllxuICAgICAgMHgwMzMzOiAweGY2LFxuICAgICAgLy8gw7ZcbiAgICAgIDB4MDMzNDogMHhkZixcbiAgICAgIC8vIMOfXG4gICAgICAweDAzMzU6IDB4YTUsXG4gICAgICAvLyDCpVxuICAgICAgMHgwMzM2OiAweGE0LFxuICAgICAgLy8gwqRcbiAgICAgIDB4MDMzNzogMHgyNTAyLFxuICAgICAgLy8g4pSCXG4gICAgICAweDAzMzg6IDB4YzUsXG4gICAgICAvLyDDhVxuICAgICAgMHgwMzM5OiAweGU1LFxuICAgICAgLy8gw6VcbiAgICAgIDB4MDMzYTogMHhkOCxcbiAgICAgIC8vIMOYXG4gICAgICAweDAzM2I6IDB4ZjgsXG4gICAgICAvLyDDuFxuICAgICAgMHgwMzNjOiAweDI1MGMsXG4gICAgICAvLyDilIxcbiAgICAgIDB4MDMzZDogMHgyNTEwLFxuICAgICAgLy8g4pSQXG4gICAgICAweDAzM2U6IDB4MjUxNCxcbiAgICAgIC8vIOKUlFxuICAgICAgMHgwMzNmOiAweDI1MTggLy8g4pSYXG5cbiAgICB9O1xuXG4gICAgdmFyIGdldENoYXJGcm9tQ29kZSA9IGZ1bmN0aW9uIGdldENoYXJGcm9tQ29kZShjb2RlKSB7XG4gICAgICBpZiAoY29kZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIGNvZGUgPSBDSEFSQUNURVJfVFJBTlNMQVRJT05bY29kZV0gfHwgY29kZTtcbiAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpO1xuICAgIH07IC8vIHRoZSBpbmRleCBvZiB0aGUgbGFzdCByb3cgaW4gYSBDRUEtNjA4IGRpc3BsYXkgYnVmZmVyXG5cblxuICAgIHZhciBCT1RUT01fUk9XID0gMTQ7IC8vIFRoaXMgYXJyYXkgaXMgdXNlZCBmb3IgbWFwcGluZyBQQUNzIC0+IHJvdyAjLCBzaW5jZSB0aGVyZSdzIG5vIHdheSBvZlxuICAgIC8vIGdldHRpbmcgaXQgdGhyb3VnaCBiaXQgbG9naWMuXG5cbiAgICB2YXIgUk9XUyA9IFsweDExMDAsIDB4MTEyMCwgMHgxMjAwLCAweDEyMjAsIDB4MTUwMCwgMHgxNTIwLCAweDE2MDAsIDB4MTYyMCwgMHgxNzAwLCAweDE3MjAsIDB4MTAwMCwgMHgxMzAwLCAweDEzMjAsIDB4MTQwMCwgMHgxNDIwXTsgLy8gQ0VBLTYwOCBjYXB0aW9ucyBhcmUgcmVuZGVyZWQgb250byBhIDM0eDE1IG1hdHJpeCBvZiBjaGFyYWN0ZXJcbiAgICAvLyBjZWxscy4gVGhlIFwiYm90dG9tXCIgcm93IGlzIHRoZSBsYXN0IGVsZW1lbnQgaW4gdGhlIG91dGVyIGFycmF5LlxuXG4gICAgdmFyIGNyZWF0ZURpc3BsYXlCdWZmZXIgPSBmdW5jdGlvbiBjcmVhdGVEaXNwbGF5QnVmZmVyKCkge1xuICAgICAgdmFyIHJlc3VsdCA9IFtdLFxuICAgICAgICAgIGkgPSBCT1RUT01fUk9XICsgMTtcblxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICByZXN1bHQucHVzaCgnJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIHZhciBDZWE2MDhTdHJlYW0gPSBmdW5jdGlvbiBDZWE2MDhTdHJlYW0oZmllbGQsIGRhdGFDaGFubmVsKSB7XG4gICAgICBDZWE2MDhTdHJlYW0ucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuZmllbGRfID0gZmllbGQgfHwgMDtcbiAgICAgIHRoaXMuZGF0YUNoYW5uZWxfID0gZGF0YUNoYW5uZWwgfHwgMDtcbiAgICAgIHRoaXMubmFtZV8gPSAnQ0MnICsgKCh0aGlzLmZpZWxkXyA8PCAxIHwgdGhpcy5kYXRhQ2hhbm5lbF8pICsgMSk7XG4gICAgICB0aGlzLnNldENvbnN0YW50cygpO1xuICAgICAgdGhpcy5yZXNldCgpO1xuXG4gICAgICB0aGlzLnB1c2ggPSBmdW5jdGlvbiAocGFja2V0KSB7XG4gICAgICAgIHZhciBkYXRhLCBzd2FwLCBjaGFyMCwgY2hhcjEsIHRleHQ7IC8vIHJlbW92ZSB0aGUgcGFyaXR5IGJpdHNcblxuICAgICAgICBkYXRhID0gcGFja2V0LmNjRGF0YSAmIDB4N2Y3ZjsgLy8gaWdub3JlIGR1cGxpY2F0ZSBjb250cm9sIGNvZGVzOyB0aGUgc3BlYyBkZW1hbmRzIHRoZXkncmUgc2VudCB0d2ljZVxuXG4gICAgICAgIGlmIChkYXRhID09PSB0aGlzLmxhc3RDb250cm9sQ29kZV8pIHtcbiAgICAgICAgICB0aGlzLmxhc3RDb250cm9sQ29kZV8gPSBudWxsO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBTdG9yZSBjb250cm9sIGNvZGVzXG5cblxuICAgICAgICBpZiAoKGRhdGEgJiAweGYwMDApID09PSAweDEwMDApIHtcbiAgICAgICAgICB0aGlzLmxhc3RDb250cm9sQ29kZV8gPSBkYXRhO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGEgIT09IHRoaXMuUEFERElOR18pIHtcbiAgICAgICAgICB0aGlzLmxhc3RDb250cm9sQ29kZV8gPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hhcjAgPSBkYXRhID4+PiA4O1xuICAgICAgICBjaGFyMSA9IGRhdGEgJiAweGZmO1xuXG4gICAgICAgIGlmIChkYXRhID09PSB0aGlzLlBBRERJTkdfKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGEgPT09IHRoaXMuUkVTVU1FX0NBUFRJT05fTE9BRElOR18pIHtcbiAgICAgICAgICB0aGlzLm1vZGVfID0gJ3BvcE9uJztcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhID09PSB0aGlzLkVORF9PRl9DQVBUSU9OXykge1xuICAgICAgICAgIC8vIElmIGFuIEVPQyBpcyByZWNlaXZlZCB3aGlsZSBpbiBwYWludC1vbiBtb2RlLCB0aGUgZGlzcGxheWVkIGNhcHRpb25cbiAgICAgICAgICAvLyB0ZXh0IHNob3VsZCBiZSBzd2FwcGVkIHRvIG5vbi1kaXNwbGF5ZWQgbWVtb3J5IGFzIGlmIGl0IHdhcyBhIHBvcC1vblxuICAgICAgICAgIC8vIGNhcHRpb24uIEJlY2F1c2Ugb2YgdGhhdCwgd2Ugc2hvdWxkIGV4cGxpY2l0bHkgc3dpdGNoIGJhY2sgdG8gcG9wLW9uXG4gICAgICAgICAgLy8gbW9kZVxuICAgICAgICAgIHRoaXMubW9kZV8gPSAncG9wT24nO1xuICAgICAgICAgIHRoaXMuY2xlYXJGb3JtYXR0aW5nKHBhY2tldC5wdHMpOyAvLyBpZiBhIGNhcHRpb24gd2FzIGJlaW5nIGRpc3BsYXllZCwgaXQncyBnb25lIG5vd1xuXG4gICAgICAgICAgdGhpcy5mbHVzaERpc3BsYXllZChwYWNrZXQucHRzKTsgLy8gZmxpcCBtZW1vcnlcblxuICAgICAgICAgIHN3YXAgPSB0aGlzLmRpc3BsYXllZF87XG4gICAgICAgICAgdGhpcy5kaXNwbGF5ZWRfID0gdGhpcy5ub25EaXNwbGF5ZWRfO1xuICAgICAgICAgIHRoaXMubm9uRGlzcGxheWVkXyA9IHN3YXA7IC8vIHN0YXJ0IG1lYXN1cmluZyB0aGUgdGltZSB0byBkaXNwbGF5IHRoZSBjYXB0aW9uXG5cbiAgICAgICAgICB0aGlzLnN0YXJ0UHRzXyA9IHBhY2tldC5wdHM7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gdGhpcy5ST0xMX1VQXzJfUk9XU18pIHtcbiAgICAgICAgICB0aGlzLnJvbGxVcFJvd3NfID0gMjtcbiAgICAgICAgICB0aGlzLnNldFJvbGxVcChwYWNrZXQucHRzKTtcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhID09PSB0aGlzLlJPTExfVVBfM19ST1dTXykge1xuICAgICAgICAgIHRoaXMucm9sbFVwUm93c18gPSAzO1xuICAgICAgICAgIHRoaXMuc2V0Um9sbFVwKHBhY2tldC5wdHMpO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGEgPT09IHRoaXMuUk9MTF9VUF80X1JPV1NfKSB7XG4gICAgICAgICAgdGhpcy5yb2xsVXBSb3dzXyA9IDQ7XG4gICAgICAgICAgdGhpcy5zZXRSb2xsVXAocGFja2V0LnB0cyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gdGhpcy5DQVJSSUFHRV9SRVRVUk5fKSB7XG4gICAgICAgICAgdGhpcy5jbGVhckZvcm1hdHRpbmcocGFja2V0LnB0cyk7XG4gICAgICAgICAgdGhpcy5mbHVzaERpc3BsYXllZChwYWNrZXQucHRzKTtcbiAgICAgICAgICB0aGlzLnNoaWZ0Um93c1VwXygpO1xuICAgICAgICAgIHRoaXMuc3RhcnRQdHNfID0gcGFja2V0LnB0cztcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhID09PSB0aGlzLkJBQ0tTUEFDRV8pIHtcbiAgICAgICAgICBpZiAodGhpcy5tb2RlXyA9PT0gJ3BvcE9uJykge1xuICAgICAgICAgICAgdGhpcy5ub25EaXNwbGF5ZWRfW3RoaXMucm93X10gPSB0aGlzLm5vbkRpc3BsYXllZF9bdGhpcy5yb3dfXS5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheWVkX1t0aGlzLnJvd19dID0gdGhpcy5kaXNwbGF5ZWRfW3RoaXMucm93X10uc2xpY2UoMCwgLTEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkYXRhID09PSB0aGlzLkVSQVNFX0RJU1BMQVlFRF9NRU1PUllfKSB7XG4gICAgICAgICAgdGhpcy5mbHVzaERpc3BsYXllZChwYWNrZXQucHRzKTtcbiAgICAgICAgICB0aGlzLmRpc3BsYXllZF8gPSBjcmVhdGVEaXNwbGF5QnVmZmVyKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gdGhpcy5FUkFTRV9OT05fRElTUExBWUVEX01FTU9SWV8pIHtcbiAgICAgICAgICB0aGlzLm5vbkRpc3BsYXllZF8gPSBjcmVhdGVEaXNwbGF5QnVmZmVyKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gdGhpcy5SRVNVTUVfRElSRUNUX0NBUFRJT05JTkdfKSB7XG4gICAgICAgICAgaWYgKHRoaXMubW9kZV8gIT09ICdwYWludE9uJykge1xuICAgICAgICAgICAgLy8gTk9URTogVGhpcyBzaG91bGQgYmUgcmVtb3ZlZCB3aGVuIHByb3BlciBjYXB0aW9uIHBvc2l0aW9uaW5nIGlzXG4gICAgICAgICAgICAvLyBpbXBsZW1lbnRlZFxuICAgICAgICAgICAgdGhpcy5mbHVzaERpc3BsYXllZChwYWNrZXQucHRzKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheWVkXyA9IGNyZWF0ZURpc3BsYXlCdWZmZXIoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLm1vZGVfID0gJ3BhaW50T24nO1xuICAgICAgICAgIHRoaXMuc3RhcnRQdHNfID0gcGFja2V0LnB0czsgLy8gQXBwZW5kIHNwZWNpYWwgY2hhcmFjdGVycyB0byBjYXB0aW9uIHRleHRcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzU3BlY2lhbENoYXJhY3RlcihjaGFyMCwgY2hhcjEpKSB7XG4gICAgICAgICAgLy8gQml0bWFzayBjaGFyMCBzbyB0aGF0IHdlIGNhbiBhcHBseSBjaGFyYWN0ZXIgdHJhbnNmb3JtYXRpb25zXG4gICAgICAgICAgLy8gcmVnYXJkbGVzcyBvZiBmaWVsZCBhbmQgZGF0YSBjaGFubmVsLlxuICAgICAgICAgIC8vIFRoZW4gYnl0ZS1zaGlmdCB0byB0aGUgbGVmdCBhbmQgT1Igd2l0aCBjaGFyMSBzbyB3ZSBjYW4gcGFzcyB0aGVcbiAgICAgICAgICAvLyBlbnRpcmUgY2hhcmFjdGVyIGNvZGUgdG8gYGdldENoYXJGcm9tQ29kZWAuXG4gICAgICAgICAgY2hhcjAgPSAoY2hhcjAgJiAweDAzKSA8PCA4O1xuICAgICAgICAgIHRleHQgPSBnZXRDaGFyRnJvbUNvZGUoY2hhcjAgfCBjaGFyMSk7XG4gICAgICAgICAgdGhpc1t0aGlzLm1vZGVfXShwYWNrZXQucHRzLCB0ZXh0KTtcbiAgICAgICAgICB0aGlzLmNvbHVtbl8rKzsgLy8gQXBwZW5kIGV4dGVuZGVkIGNoYXJhY3RlcnMgdG8gY2FwdGlvbiB0ZXh0XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0V4dENoYXJhY3RlcihjaGFyMCwgY2hhcjEpKSB7XG4gICAgICAgICAgLy8gRXh0ZW5kZWQgY2hhcmFjdGVycyBhbHdheXMgZm9sbG93IHRoZWlyIFwibm9uLWV4dGVuZGVkXCIgZXF1aXZhbGVudHMuXG4gICAgICAgICAgLy8gSUUgaWYgYSBcIsOoXCIgaXMgZGVzaXJlZCwgeW91J2xsIGFsd2F5cyByZWNlaXZlIFwiZcOoXCI7IG5vbi1jb21wbGlhbnRcbiAgICAgICAgICAvLyBkZWNvZGVycyBhcmUgc3VwcG9zZWQgdG8gZHJvcCB0aGUgXCLDqFwiLCB3aGlsZSBjb21wbGlhbnQgZGVjb2RlcnNcbiAgICAgICAgICAvLyBiYWNrc3BhY2UgdGhlIFwiZVwiIGFuZCBpbnNlcnQgXCLDqFwiLlxuICAgICAgICAgIC8vIERlbGV0ZSB0aGUgcHJldmlvdXMgY2hhcmFjdGVyXG4gICAgICAgICAgaWYgKHRoaXMubW9kZV8gPT09ICdwb3BPbicpIHtcbiAgICAgICAgICAgIHRoaXMubm9uRGlzcGxheWVkX1t0aGlzLnJvd19dID0gdGhpcy5ub25EaXNwbGF5ZWRfW3RoaXMucm93X10uc2xpY2UoMCwgLTEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXllZF9bdGhpcy5yb3dfXSA9IHRoaXMuZGlzcGxheWVkX1t0aGlzLnJvd19dLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgICB9IC8vIEJpdG1hc2sgY2hhcjAgc28gdGhhdCB3ZSBjYW4gYXBwbHkgY2hhcmFjdGVyIHRyYW5zZm9ybWF0aW9uc1xuICAgICAgICAgIC8vIHJlZ2FyZGxlc3Mgb2YgZmllbGQgYW5kIGRhdGEgY2hhbm5lbC5cbiAgICAgICAgICAvLyBUaGVuIGJ5dGUtc2hpZnQgdG8gdGhlIGxlZnQgYW5kIE9SIHdpdGggY2hhcjEgc28gd2UgY2FuIHBhc3MgdGhlXG4gICAgICAgICAgLy8gZW50aXJlIGNoYXJhY3RlciBjb2RlIHRvIGBnZXRDaGFyRnJvbUNvZGVgLlxuXG5cbiAgICAgICAgICBjaGFyMCA9IChjaGFyMCAmIDB4MDMpIDw8IDg7XG4gICAgICAgICAgdGV4dCA9IGdldENoYXJGcm9tQ29kZShjaGFyMCB8IGNoYXIxKTtcbiAgICAgICAgICB0aGlzW3RoaXMubW9kZV9dKHBhY2tldC5wdHMsIHRleHQpO1xuICAgICAgICAgIHRoaXMuY29sdW1uXysrOyAvLyBQcm9jZXNzIG1pZC1yb3cgY29kZXNcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzTWlkUm93Q29kZShjaGFyMCwgY2hhcjEpKSB7XG4gICAgICAgICAgLy8gQXR0cmlidXRlcyBhcmUgbm90IGFkZGl0aXZlLCBzbyBjbGVhciBhbGwgZm9ybWF0dGluZ1xuICAgICAgICAgIHRoaXMuY2xlYXJGb3JtYXR0aW5nKHBhY2tldC5wdHMpOyAvLyBBY2NvcmRpbmcgdG8gdGhlIHN0YW5kYXJkLCBtaWQtcm93IGNvZGVzXG4gICAgICAgICAgLy8gc2hvdWxkIGJlIHJlcGxhY2VkIHdpdGggc3BhY2VzLCBzbyBhZGQgb25lIG5vd1xuXG4gICAgICAgICAgdGhpc1t0aGlzLm1vZGVfXShwYWNrZXQucHRzLCAnICcpO1xuICAgICAgICAgIHRoaXMuY29sdW1uXysrO1xuXG4gICAgICAgICAgaWYgKChjaGFyMSAmIDB4ZSkgPT09IDB4ZSkge1xuICAgICAgICAgICAgdGhpcy5hZGRGb3JtYXR0aW5nKHBhY2tldC5wdHMsIFsnaSddKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoKGNoYXIxICYgMHgxKSA9PT0gMHgxKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEZvcm1hdHRpbmcocGFja2V0LnB0cywgWyd1J10pO1xuICAgICAgICAgIH0gLy8gRGV0ZWN0IG9mZnNldCBjb250cm9sIGNvZGVzIGFuZCBhZGp1c3QgY3Vyc29yXG5cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzT2Zmc2V0Q29udHJvbENvZGUoY2hhcjAsIGNoYXIxKSkge1xuICAgICAgICAgIC8vIEN1cnNvciBwb3NpdGlvbiBpcyBzZXQgYnkgaW5kZW50IFBBQyAoc2VlIGJlbG93KSBpbiA0LWNvbHVtblxuICAgICAgICAgIC8vIGluY3JlbWVudHMsIHdpdGggYW4gYWRkaXRpb25hbCBvZmZzZXQgY29kZSBvZiAxLTMgdG8gcmVhY2ggYW55XG4gICAgICAgICAgLy8gb2YgdGhlIDMyIGNvbHVtbnMgc3BlY2lmaWVkIGJ5IENFQS02MDguIFNvIGFsbCB3ZSBuZWVkIHRvIGRvXG4gICAgICAgICAgLy8gaGVyZSBpcyBpbmNyZW1lbnQgdGhlIGNvbHVtbiBjdXJzb3IgYnkgdGhlIGdpdmVuIG9mZnNldC5cbiAgICAgICAgICB0aGlzLmNvbHVtbl8gKz0gY2hhcjEgJiAweDAzOyAvLyBEZXRlY3QgUEFDcyAoUHJlYW1ibGUgQWRkcmVzcyBDb2RlcylcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzUEFDKGNoYXIwLCBjaGFyMSkpIHtcbiAgICAgICAgICAvLyBUaGVyZSdzIG5vIGxvZ2ljIGZvciBQQUMgLT4gcm93IG1hcHBpbmcsIHNvIHdlIGhhdmUgdG8ganVzdFxuICAgICAgICAgIC8vIGZpbmQgdGhlIHJvdyBjb2RlIGluIGFuIGFycmF5IGFuZCB1c2UgaXRzIGluZGV4IDooXG4gICAgICAgICAgdmFyIHJvdyA9IFJPV1MuaW5kZXhPZihkYXRhICYgMHgxZjIwKTsgLy8gQ29uZmlndXJlIHRoZSBjYXB0aW9uIHdpbmRvdyBpZiB3ZSdyZSBpbiByb2xsLXVwIG1vZGVcblxuICAgICAgICAgIGlmICh0aGlzLm1vZGVfID09PSAncm9sbFVwJykge1xuICAgICAgICAgICAgLy8gVGhpcyBpbXBsaWVzIHRoYXQgdGhlIGJhc2Ugcm93IGlzIGluY29ycmVjdGx5IHNldC5cbiAgICAgICAgICAgIC8vIEFzIHBlciB0aGUgcmVjb21tZW5kYXRpb24gaW4gQ0VBLTYwOChCYXNlIFJvdyBJbXBsZW1lbnRhdGlvbiksIGRlZmVyIHRvIHRoZSBudW1iZXJcbiAgICAgICAgICAgIC8vIG9mIHJvbGwtdXAgcm93cyBzZXQuXG4gICAgICAgICAgICBpZiAocm93IC0gdGhpcy5yb2xsVXBSb3dzXyArIDEgPCAwKSB7XG4gICAgICAgICAgICAgIHJvdyA9IHRoaXMucm9sbFVwUm93c18gLSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldFJvbGxVcChwYWNrZXQucHRzLCByb3cpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChyb3cgIT09IHRoaXMucm93Xykge1xuICAgICAgICAgICAgLy8gZm9ybWF0dGluZyBpcyBvbmx5IHBlcnNpc3RlbnQgZm9yIGN1cnJlbnQgcm93XG4gICAgICAgICAgICB0aGlzLmNsZWFyRm9ybWF0dGluZyhwYWNrZXQucHRzKTtcbiAgICAgICAgICAgIHRoaXMucm93XyA9IHJvdztcbiAgICAgICAgICB9IC8vIEFsbCBQQUNzIGNhbiBhcHBseSB1bmRlcmxpbmUsIHNvIGRldGVjdCBhbmQgYXBwbHlcbiAgICAgICAgICAvLyAoQWxsIG9kZC1udW1iZXJlZCBzZWNvbmQgYnl0ZXMgc2V0IHVuZGVybGluZSlcblxuXG4gICAgICAgICAgaWYgKGNoYXIxICYgMHgxICYmIHRoaXMuZm9ybWF0dGluZ18uaW5kZXhPZigndScpID09PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5hZGRGb3JtYXR0aW5nKHBhY2tldC5wdHMsIFsndSddKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoKGRhdGEgJiAweDEwKSA9PT0gMHgxMCkge1xuICAgICAgICAgICAgLy8gV2UndmUgZ290IGFuIGluZGVudCBsZXZlbCBjb2RlLiBFYWNoIHN1Y2Nlc3NpdmUgZXZlbiBudW1iZXJcbiAgICAgICAgICAgIC8vIGluY3JlbWVudHMgdGhlIGNvbHVtbiBjdXJzb3IgYnkgNCwgc28gd2UgY2FuIGdldCB0aGUgZGVzaXJlZFxuICAgICAgICAgICAgLy8gY29sdW1uIHBvc2l0aW9uIGJ5IGJpdC1zaGlmdGluZyB0byB0aGUgcmlnaHQgKHRvIGdldCBuLzIpXG4gICAgICAgICAgICAvLyBhbmQgbXVsdGlwbHlpbmcgYnkgNC5cbiAgICAgICAgICAgIHRoaXMuY29sdW1uXyA9ICgoZGF0YSAmIDB4ZSkgPj4gMSkgKiA0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLmlzQ29sb3JQQUMoY2hhcjEpKSB7XG4gICAgICAgICAgICAvLyBpdCdzIGEgY29sb3IgY29kZSwgdGhvdWdoIHdlIG9ubHkgc3VwcG9ydCB3aGl0ZSwgd2hpY2hcbiAgICAgICAgICAgIC8vIGNhbiBiZSBlaXRoZXIgbm9ybWFsIG9yIGl0YWxpY2l6ZWQuIHdoaXRlIGl0YWxpY3MgY2FuIGJlXG4gICAgICAgICAgICAvLyBlaXRoZXIgMHg0ZSBvciAweDZlIGRlcGVuZGluZyBvbiB0aGUgcm93LCBzbyB3ZSBqdXN0XG4gICAgICAgICAgICAvLyBiaXR3aXNlLWFuZCB3aXRoIDB4ZSB0byBzZWUgaWYgaXRhbGljcyBzaG91bGQgYmUgdHVybmVkIG9uXG4gICAgICAgICAgICBpZiAoKGNoYXIxICYgMHhlKSA9PT0gMHhlKSB7XG4gICAgICAgICAgICAgIHRoaXMuYWRkRm9ybWF0dGluZyhwYWNrZXQucHRzLCBbJ2knXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSAvLyBXZSBoYXZlIGEgbm9ybWFsIGNoYXJhY3RlciBpbiBjaGFyMCwgYW5kIHBvc3NpYmx5IG9uZSBpbiBjaGFyMVxuXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc05vcm1hbENoYXIoY2hhcjApKSB7XG4gICAgICAgICAgaWYgKGNoYXIxID09PSAweDAwKSB7XG4gICAgICAgICAgICBjaGFyMSA9IG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGV4dCA9IGdldENoYXJGcm9tQ29kZShjaGFyMCk7XG4gICAgICAgICAgdGV4dCArPSBnZXRDaGFyRnJvbUNvZGUoY2hhcjEpO1xuICAgICAgICAgIHRoaXNbdGhpcy5tb2RlX10ocGFja2V0LnB0cywgdGV4dCk7XG4gICAgICAgICAgdGhpcy5jb2x1bW5fICs9IHRleHQubGVuZ3RoO1xuICAgICAgICB9IC8vIGZpbmlzaCBkYXRhIHByb2Nlc3NpbmdcblxuICAgICAgfTtcbiAgICB9O1xuXG4gICAgQ2VhNjA4U3RyZWFtLnByb3RvdHlwZSA9IG5ldyBzdHJlYW0oKTsgLy8gVHJpZ2dlciBhIGN1ZSBwb2ludCB0aGF0IGNhcHR1cmVzIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZVxuICAgIC8vIGRpc3BsYXkgYnVmZmVyXG5cbiAgICBDZWE2MDhTdHJlYW0ucHJvdG90eXBlLmZsdXNoRGlzcGxheWVkID0gZnVuY3Rpb24gKHB0cykge1xuICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLmRpc3BsYXllZF8gLy8gcmVtb3ZlIHNwYWNlcyBmcm9tIHRoZSBzdGFydCBhbmQgZW5kIG9mIHRoZSBzdHJpbmdcbiAgICAgIC5tYXAoZnVuY3Rpb24gKHJvdykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiByb3cudHJpbSgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gT3JkaW5hcmlseSwgdGhpcyBzaG91bGRuJ3QgaGFwcGVuLiBIb3dldmVyLCBjYXB0aW9uXG4gICAgICAgICAgLy8gcGFyc2luZyBlcnJvcnMgc2hvdWxkIG5vdCB0aHJvdyBleGNlcHRpb25zIGFuZFxuICAgICAgICAgIC8vIGJyZWFrIHBsYXliYWNrLlxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgY29uc29sZS5lcnJvcignU2tpcHBpbmcgbWFsZm9ybWVkIGNhcHRpb24uJyk7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICB9KSAvLyBjb21iaW5lIGFsbCB0ZXh0IHJvd3MgdG8gZGlzcGxheSBpbiBvbmUgY3VlXG4gICAgICAuam9pbignXFxuJykgLy8gYW5kIHJlbW92ZSBibGFuayByb3dzIGZyb20gdGhlIHN0YXJ0IGFuZCBlbmQsIGJ1dCBub3QgdGhlIG1pZGRsZVxuICAgICAgLnJlcGxhY2UoL15cXG4rfFxcbiskL2csICcnKTtcblxuICAgICAgaWYgKGNvbnRlbnQubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIHtcbiAgICAgICAgICBzdGFydFB0czogdGhpcy5zdGFydFB0c18sXG4gICAgICAgICAgZW5kUHRzOiBwdHMsXG4gICAgICAgICAgdGV4dDogY29udGVudCxcbiAgICAgICAgICBzdHJlYW06IHRoaXMubmFtZV9cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBaZXJvIG91dCB0aGUgZGF0YSwgdXNlZCBmb3Igc3RhcnR1cCBhbmQgb24gc2Vla1xuICAgICAqL1xuXG5cbiAgICBDZWE2MDhTdHJlYW0ucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5tb2RlXyA9ICdwb3BPbic7IC8vIFdoZW4gaW4gcm9sbC11cCBtb2RlLCB0aGUgaW5kZXggb2YgdGhlIGxhc3Qgcm93IHRoYXQgd2lsbFxuICAgICAgLy8gYWN0dWFsbHkgZGlzcGxheSBjYXB0aW9ucy4gSWYgYSBjYXB0aW9uIGlzIHNoaWZ0ZWQgdG8gYSByb3dcbiAgICAgIC8vIHdpdGggYSBsb3dlciBpbmRleCB0aGFuIHRoaXMsIGl0IGlzIGNsZWFyZWQgZnJvbSB0aGUgZGlzcGxheVxuICAgICAgLy8gYnVmZmVyXG5cbiAgICAgIHRoaXMudG9wUm93XyA9IDA7XG4gICAgICB0aGlzLnN0YXJ0UHRzXyA9IDA7XG4gICAgICB0aGlzLmRpc3BsYXllZF8gPSBjcmVhdGVEaXNwbGF5QnVmZmVyKCk7XG4gICAgICB0aGlzLm5vbkRpc3BsYXllZF8gPSBjcmVhdGVEaXNwbGF5QnVmZmVyKCk7XG4gICAgICB0aGlzLmxhc3RDb250cm9sQ29kZV8gPSBudWxsOyAvLyBUcmFjayByb3cgYW5kIGNvbHVtbiBmb3IgcHJvcGVyIGxpbmUtYnJlYWtpbmcgYW5kIHNwYWNpbmdcblxuICAgICAgdGhpcy5jb2x1bW5fID0gMDtcbiAgICAgIHRoaXMucm93XyA9IEJPVFRPTV9ST1c7XG4gICAgICB0aGlzLnJvbGxVcFJvd3NfID0gMjsgLy8gVGhpcyB2YXJpYWJsZSBob2xkcyBjdXJyZW50bHktYXBwbGllZCBmb3JtYXR0aW5nXG5cbiAgICAgIHRoaXMuZm9ybWF0dGluZ18gPSBbXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdXAgY29udHJvbCBjb2RlIGFuZCByZWxhdGVkIGNvbnN0YW50cyBmb3IgdGhpcyBpbnN0YW5jZVxuICAgICAqL1xuXG5cbiAgICBDZWE2MDhTdHJlYW0ucHJvdG90eXBlLnNldENvbnN0YW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXR0cmlidXRlcyBoYXZlIHRoZXNlIHVzZXM6XG4gICAgICAvLyBleHRfIDogICAgY2hhcjAgZm9yIG1pZC1yb3cgY29kZXMsIGFuZCB0aGUgYmFzZSBmb3IgZXh0ZW5kZWRcbiAgICAgIC8vICAgICAgICAgICBjaGFycyAoZXh0XyswLCBleHRfKzEsIGFuZCBleHRfKzIgYXJlIGNoYXIwcyBmb3JcbiAgICAgIC8vICAgICAgICAgICBleHRlbmRlZCBjb2RlcylcbiAgICAgIC8vIGNvbnRyb2xfOiBjaGFyMCBmb3IgY29udHJvbCBjb2RlcywgZXhjZXB0IGJ5dGUtc2hpZnRlZCB0byB0aGVcbiAgICAgIC8vICAgICAgICAgICBsZWZ0IHNvIHRoYXQgd2UgY2FuIGRvIHRoaXMuY29udHJvbF8gfCBDT05UUk9MX0NPREVcbiAgICAgIC8vIG9mZnNldF86ICBjaGFyMCBmb3IgdGFiIG9mZnNldCBjb2Rlc1xuICAgICAgLy9cbiAgICAgIC8vIEl0J3MgYWxzbyB3b3J0aCBub3RpbmcgdGhhdCBjb250cm9sIGNvZGVzLCBhbmQgX29ubHlfIGNvbnRyb2wgY29kZXMsXG4gICAgICAvLyBkaWZmZXIgYmV0d2VlbiBmaWVsZCAxIGFuZCBmaWVsZDIuIEZpZWxkIDIgY29udHJvbCBjb2RlcyBhcmUgYWx3YXlzXG4gICAgICAvLyB0aGVpciBmaWVsZCAxIHZhbHVlIHBsdXMgMS4gVGhhdCdzIHdoeSB0aGVyZSdzIHRoZSBcInwgZmllbGRcIiBvbiB0aGVcbiAgICAgIC8vIGNvbnRyb2wgdmFsdWUuXG4gICAgICBpZiAodGhpcy5kYXRhQ2hhbm5lbF8gPT09IDApIHtcbiAgICAgICAgdGhpcy5CQVNFXyA9IDB4MTA7XG4gICAgICAgIHRoaXMuRVhUXyA9IDB4MTE7XG4gICAgICAgIHRoaXMuQ09OVFJPTF8gPSAoMHgxNCB8IHRoaXMuZmllbGRfKSA8PCA4O1xuICAgICAgICB0aGlzLk9GRlNFVF8gPSAweDE3O1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGFDaGFubmVsXyA9PT0gMSkge1xuICAgICAgICB0aGlzLkJBU0VfID0gMHgxODtcbiAgICAgICAgdGhpcy5FWFRfID0gMHgxOTtcbiAgICAgICAgdGhpcy5DT05UUk9MXyA9ICgweDFjIHwgdGhpcy5maWVsZF8pIDw8IDg7XG4gICAgICAgIHRoaXMuT0ZGU0VUXyA9IDB4MWY7XG4gICAgICB9IC8vIENvbnN0YW50cyBmb3IgdGhlIExTQnl0ZSBjb21tYW5kIGNvZGVzIHJlY29nbml6ZWQgYnkgQ2VhNjA4U3RyZWFtLiBUaGlzXG4gICAgICAvLyBsaXN0IGlzIG5vdCBleGhhdXN0aXZlLiBGb3IgYSBtb3JlIGNvbXByZWhlbnNpdmUgbGlzdGluZyBhbmQgc2VtYW50aWNzIHNlZVxuICAgICAgLy8gaHR0cDovL3d3dy5ncG8uZ292L2Zkc3lzL3BrZy9DRlItMjAxMC10aXRsZTQ3LXZvbDEvcGRmL0NGUi0yMDEwLXRpdGxlNDctdm9sMS1zZWMxNS0xMTkucGRmXG4gICAgICAvLyBQYWRkaW5nXG5cblxuICAgICAgdGhpcy5QQURESU5HXyA9IDB4MDAwMDsgLy8gUG9wLW9uIE1vZGVcblxuICAgICAgdGhpcy5SRVNVTUVfQ0FQVElPTl9MT0FESU5HXyA9IHRoaXMuQ09OVFJPTF8gfCAweDIwO1xuICAgICAgdGhpcy5FTkRfT0ZfQ0FQVElPTl8gPSB0aGlzLkNPTlRST0xfIHwgMHgyZjsgLy8gUm9sbC11cCBNb2RlXG5cbiAgICAgIHRoaXMuUk9MTF9VUF8yX1JPV1NfID0gdGhpcy5DT05UUk9MXyB8IDB4MjU7XG4gICAgICB0aGlzLlJPTExfVVBfM19ST1dTXyA9IHRoaXMuQ09OVFJPTF8gfCAweDI2O1xuICAgICAgdGhpcy5ST0xMX1VQXzRfUk9XU18gPSB0aGlzLkNPTlRST0xfIHwgMHgyNztcbiAgICAgIHRoaXMuQ0FSUklBR0VfUkVUVVJOXyA9IHRoaXMuQ09OVFJPTF8gfCAweDJkOyAvLyBwYWludC1vbiBtb2RlXG5cbiAgICAgIHRoaXMuUkVTVU1FX0RJUkVDVF9DQVBUSU9OSU5HXyA9IHRoaXMuQ09OVFJPTF8gfCAweDI5OyAvLyBFcmFzdXJlXG5cbiAgICAgIHRoaXMuQkFDS1NQQUNFXyA9IHRoaXMuQ09OVFJPTF8gfCAweDIxO1xuICAgICAgdGhpcy5FUkFTRV9ESVNQTEFZRURfTUVNT1JZXyA9IHRoaXMuQ09OVFJPTF8gfCAweDJjO1xuICAgICAgdGhpcy5FUkFTRV9OT05fRElTUExBWUVEX01FTU9SWV8gPSB0aGlzLkNPTlRST0xfIHwgMHgyZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVjdHMgaWYgdGhlIDItYnl0ZSBwYWNrZXQgZGF0YSBpcyBhIHNwZWNpYWwgY2hhcmFjdGVyXG4gICAgICpcbiAgICAgKiBTcGVjaWFsIGNoYXJhY3RlcnMgaGF2ZSBhIHNlY29uZCBieXRlIGluIHRoZSByYW5nZSAweDMwIHRvIDB4M2YsXG4gICAgICogd2l0aCB0aGUgZmlyc3QgYnl0ZSBiZWluZyAweDExIChmb3IgZGF0YSBjaGFubmVsIDEpIG9yIDB4MTkgKGZvclxuICAgICAqIGRhdGEgY2hhbm5lbCAyKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0ludGVnZXJ9IGNoYXIwIFRoZSBmaXJzdCBieXRlXG4gICAgICogQHBhcmFtICB7SW50ZWdlcn0gY2hhcjEgVGhlIHNlY29uZCBieXRlXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgV2hldGhlciB0aGUgMiBieXRlcyBhcmUgYW4gc3BlY2lhbCBjaGFyYWN0ZXJcbiAgICAgKi9cblxuXG4gICAgQ2VhNjA4U3RyZWFtLnByb3RvdHlwZS5pc1NwZWNpYWxDaGFyYWN0ZXIgPSBmdW5jdGlvbiAoY2hhcjAsIGNoYXIxKSB7XG4gICAgICByZXR1cm4gY2hhcjAgPT09IHRoaXMuRVhUXyAmJiBjaGFyMSA+PSAweDMwICYmIGNoYXIxIDw9IDB4M2Y7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlY3RzIGlmIHRoZSAyLWJ5dGUgcGFja2V0IGRhdGEgaXMgYW4gZXh0ZW5kZWQgY2hhcmFjdGVyXG4gICAgICpcbiAgICAgKiBFeHRlbmRlZCBjaGFyYWN0ZXJzIGhhdmUgYSBzZWNvbmQgYnl0ZSBpbiB0aGUgcmFuZ2UgMHgyMCB0byAweDNmLFxuICAgICAqIHdpdGggdGhlIGZpcnN0IGJ5dGUgYmVpbmcgMHgxMiBvciAweDEzIChmb3IgZGF0YSBjaGFubmVsIDEpIG9yXG4gICAgICogMHgxYSBvciAweDFiIChmb3IgZGF0YSBjaGFubmVsIDIpLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7SW50ZWdlcn0gY2hhcjAgVGhlIGZpcnN0IGJ5dGVcbiAgICAgKiBAcGFyYW0gIHtJbnRlZ2VyfSBjaGFyMSBUaGUgc2Vjb25kIGJ5dGVcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICBXaGV0aGVyIHRoZSAyIGJ5dGVzIGFyZSBhbiBleHRlbmRlZCBjaGFyYWN0ZXJcbiAgICAgKi9cblxuXG4gICAgQ2VhNjA4U3RyZWFtLnByb3RvdHlwZS5pc0V4dENoYXJhY3RlciA9IGZ1bmN0aW9uIChjaGFyMCwgY2hhcjEpIHtcbiAgICAgIHJldHVybiAoY2hhcjAgPT09IHRoaXMuRVhUXyArIDEgfHwgY2hhcjAgPT09IHRoaXMuRVhUXyArIDIpICYmIGNoYXIxID49IDB4MjAgJiYgY2hhcjEgPD0gMHgzZjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVjdHMgaWYgdGhlIDItYnl0ZSBwYWNrZXQgaXMgYSBtaWQtcm93IGNvZGVcbiAgICAgKlxuICAgICAqIE1pZC1yb3cgY29kZXMgaGF2ZSBhIHNlY29uZCBieXRlIGluIHRoZSByYW5nZSAweDIwIHRvIDB4MmYsIHdpdGhcbiAgICAgKiB0aGUgZmlyc3QgYnl0ZSBiZWluZyAweDExIChmb3IgZGF0YSBjaGFubmVsIDEpIG9yIDB4MTkgKGZvciBkYXRhXG4gICAgICogY2hhbm5lbCAyKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0ludGVnZXJ9IGNoYXIwIFRoZSBmaXJzdCBieXRlXG4gICAgICogQHBhcmFtICB7SW50ZWdlcn0gY2hhcjEgVGhlIHNlY29uZCBieXRlXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgV2hldGhlciB0aGUgMiBieXRlcyBhcmUgYSBtaWQtcm93IGNvZGVcbiAgICAgKi9cblxuXG4gICAgQ2VhNjA4U3RyZWFtLnByb3RvdHlwZS5pc01pZFJvd0NvZGUgPSBmdW5jdGlvbiAoY2hhcjAsIGNoYXIxKSB7XG4gICAgICByZXR1cm4gY2hhcjAgPT09IHRoaXMuRVhUXyAmJiBjaGFyMSA+PSAweDIwICYmIGNoYXIxIDw9IDB4MmY7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlY3RzIGlmIHRoZSAyLWJ5dGUgcGFja2V0IGlzIGFuIG9mZnNldCBjb250cm9sIGNvZGVcbiAgICAgKlxuICAgICAqIE9mZnNldCBjb250cm9sIGNvZGVzIGhhdmUgYSBzZWNvbmQgYnl0ZSBpbiB0aGUgcmFuZ2UgMHgyMSB0byAweDIzLFxuICAgICAqIHdpdGggdGhlIGZpcnN0IGJ5dGUgYmVpbmcgMHgxNyAoZm9yIGRhdGEgY2hhbm5lbCAxKSBvciAweDFmIChmb3JcbiAgICAgKiBkYXRhIGNoYW5uZWwgMikuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtJbnRlZ2VyfSBjaGFyMCBUaGUgZmlyc3QgYnl0ZVxuICAgICAqIEBwYXJhbSAge0ludGVnZXJ9IGNoYXIxIFRoZSBzZWNvbmQgYnl0ZVxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgIFdoZXRoZXIgdGhlIDIgYnl0ZXMgYXJlIGFuIG9mZnNldCBjb250cm9sIGNvZGVcbiAgICAgKi9cblxuXG4gICAgQ2VhNjA4U3RyZWFtLnByb3RvdHlwZS5pc09mZnNldENvbnRyb2xDb2RlID0gZnVuY3Rpb24gKGNoYXIwLCBjaGFyMSkge1xuICAgICAgcmV0dXJuIGNoYXIwID09PSB0aGlzLk9GRlNFVF8gJiYgY2hhcjEgPj0gMHgyMSAmJiBjaGFyMSA8PSAweDIzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZWN0cyBpZiB0aGUgMi1ieXRlIHBhY2tldCBpcyBhIFByZWFtYmxlIEFkZHJlc3MgQ29kZVxuICAgICAqXG4gICAgICogUEFDcyBoYXZlIGEgZmlyc3QgYnl0ZSBpbiB0aGUgcmFuZ2UgMHgxMCB0byAweDE3IChmb3IgZGF0YSBjaGFubmVsIDEpXG4gICAgICogb3IgMHgxOCB0byAweDFmIChmb3IgZGF0YSBjaGFubmVsIDIpLCB3aXRoIHRoZSBzZWNvbmQgYnl0ZSBpbiB0aGVcbiAgICAgKiByYW5nZSAweDQwIHRvIDB4N2YuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtJbnRlZ2VyfSBjaGFyMCBUaGUgZmlyc3QgYnl0ZVxuICAgICAqIEBwYXJhbSAge0ludGVnZXJ9IGNoYXIxIFRoZSBzZWNvbmQgYnl0ZVxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgIFdoZXRoZXIgdGhlIDIgYnl0ZXMgYXJlIGEgUEFDXG4gICAgICovXG5cblxuICAgIENlYTYwOFN0cmVhbS5wcm90b3R5cGUuaXNQQUMgPSBmdW5jdGlvbiAoY2hhcjAsIGNoYXIxKSB7XG4gICAgICByZXR1cm4gY2hhcjAgPj0gdGhpcy5CQVNFXyAmJiBjaGFyMCA8IHRoaXMuQkFTRV8gKyA4ICYmIGNoYXIxID49IDB4NDAgJiYgY2hhcjEgPD0gMHg3ZjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVjdHMgaWYgYSBwYWNrZXQncyBzZWNvbmQgYnl0ZSBpcyBpbiB0aGUgcmFuZ2Ugb2YgYSBQQUMgY29sb3IgY29kZVxuICAgICAqXG4gICAgICogUEFDIGNvbG9yIGNvZGVzIGhhdmUgdGhlIHNlY29uZCBieXRlIGJlIGluIHRoZSByYW5nZSAweDQwIHRvIDB4NGYsIG9yXG4gICAgICogMHg2MCB0byAweDZmLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7SW50ZWdlcn0gY2hhcjEgVGhlIHNlY29uZCBieXRlXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgV2hldGhlciB0aGUgYnl0ZSBpcyBhIGNvbG9yIFBBQ1xuICAgICAqL1xuXG5cbiAgICBDZWE2MDhTdHJlYW0ucHJvdG90eXBlLmlzQ29sb3JQQUMgPSBmdW5jdGlvbiAoY2hhcjEpIHtcbiAgICAgIHJldHVybiBjaGFyMSA+PSAweDQwICYmIGNoYXIxIDw9IDB4NGYgfHwgY2hhcjEgPj0gMHg2MCAmJiBjaGFyMSA8PSAweDdmO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZWN0cyBpZiBhIHNpbmdsZSBieXRlIGlzIGluIHRoZSByYW5nZSBvZiBhIG5vcm1hbCBjaGFyYWN0ZXJcbiAgICAgKlxuICAgICAqIE5vcm1hbCB0ZXh0IGJ5dGVzIGFyZSBpbiB0aGUgcmFuZ2UgMHgyMCB0byAweDdmLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7SW50ZWdlcn0gY2hhciAgVGhlIGJ5dGVcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICBXaGV0aGVyIHRoZSBieXRlIGlzIGEgbm9ybWFsIGNoYXJhY3RlclxuICAgICAqL1xuXG5cbiAgICBDZWE2MDhTdHJlYW0ucHJvdG90eXBlLmlzTm9ybWFsQ2hhciA9IGZ1bmN0aW9uIChjaGFyKSB7XG4gICAgICByZXR1cm4gY2hhciA+PSAweDIwICYmIGNoYXIgPD0gMHg3ZjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENvbmZpZ3VyZXMgcm9sbC11cFxuICAgICAqXG4gICAgICogQHBhcmFtICB7SW50ZWdlcn0gcHRzICAgICAgICAgQ3VycmVudCBQVFNcbiAgICAgKiBAcGFyYW0gIHtJbnRlZ2VyfSBuZXdCYXNlUm93ICBVc2VkIGJ5IFBBQ3MgdG8gc2xpZGUgdGhlIGN1cnJlbnQgd2luZG93IHRvXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSBuZXcgcG9zaXRpb25cbiAgICAgKi9cblxuXG4gICAgQ2VhNjA4U3RyZWFtLnByb3RvdHlwZS5zZXRSb2xsVXAgPSBmdW5jdGlvbiAocHRzLCBuZXdCYXNlUm93KSB7XG4gICAgICAvLyBSZXNldCB0aGUgYmFzZSByb3cgdG8gdGhlIGJvdHRvbSByb3cgd2hlbiBzd2l0Y2hpbmcgbW9kZXNcbiAgICAgIGlmICh0aGlzLm1vZGVfICE9PSAncm9sbFVwJykge1xuICAgICAgICB0aGlzLnJvd18gPSBCT1RUT01fUk9XO1xuICAgICAgICB0aGlzLm1vZGVfID0gJ3JvbGxVcCc7IC8vIFNwZWMgc2F5cyB0byB3aXBlIG1lbW9yaWVzIHdoZW4gc3dpdGNoaW5nIHRvIHJvbGwtdXBcblxuICAgICAgICB0aGlzLmZsdXNoRGlzcGxheWVkKHB0cyk7XG4gICAgICAgIHRoaXMubm9uRGlzcGxheWVkXyA9IGNyZWF0ZURpc3BsYXlCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5kaXNwbGF5ZWRfID0gY3JlYXRlRGlzcGxheUJ1ZmZlcigpO1xuICAgICAgfVxuXG4gICAgICBpZiAobmV3QmFzZVJvdyAhPT0gdW5kZWZpbmVkICYmIG5ld0Jhc2VSb3cgIT09IHRoaXMucm93Xykge1xuICAgICAgICAvLyBtb3ZlIGN1cnJlbnRseSBkaXNwbGF5ZWQgY2FwdGlvbnMgKHVwIG9yIGRvd24pIHRvIHRoZSBuZXcgYmFzZSByb3dcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJvbGxVcFJvd3NfOyBpKyspIHtcbiAgICAgICAgICB0aGlzLmRpc3BsYXllZF9bbmV3QmFzZVJvdyAtIGldID0gdGhpcy5kaXNwbGF5ZWRfW3RoaXMucm93XyAtIGldO1xuICAgICAgICAgIHRoaXMuZGlzcGxheWVkX1t0aGlzLnJvd18gLSBpXSA9ICcnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChuZXdCYXNlUm93ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3QmFzZVJvdyA9IHRoaXMucm93XztcbiAgICAgIH1cblxuICAgICAgdGhpcy50b3BSb3dfID0gbmV3QmFzZVJvdyAtIHRoaXMucm9sbFVwUm93c18gKyAxO1xuICAgIH07IC8vIEFkZHMgdGhlIG9wZW5pbmcgSFRNTCB0YWcgZm9yIHRoZSBwYXNzZWQgY2hhcmFjdGVyIHRvIHRoZSBjYXB0aW9uIHRleHQsXG4gICAgLy8gYW5kIGtlZXBzIHRyYWNrIG9mIGl0IGZvciBsYXRlciBjbG9zaW5nXG5cblxuICAgIENlYTYwOFN0cmVhbS5wcm90b3R5cGUuYWRkRm9ybWF0dGluZyA9IGZ1bmN0aW9uIChwdHMsIGZvcm1hdCkge1xuICAgICAgdGhpcy5mb3JtYXR0aW5nXyA9IHRoaXMuZm9ybWF0dGluZ18uY29uY2F0KGZvcm1hdCk7XG4gICAgICB2YXIgdGV4dCA9IGZvcm1hdC5yZWR1Y2UoZnVuY3Rpb24gKHRleHQsIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gdGV4dCArICc8JyArIGZvcm1hdCArICc+JztcbiAgICAgIH0sICcnKTtcbiAgICAgIHRoaXNbdGhpcy5tb2RlX10ocHRzLCB0ZXh0KTtcbiAgICB9OyAvLyBBZGRzIEhUTUwgY2xvc2luZyB0YWdzIGZvciBjdXJyZW50IGZvcm1hdHRpbmcgdG8gY2FwdGlvbiB0ZXh0IGFuZFxuICAgIC8vIGNsZWFycyByZW1lbWJlcmVkIGZvcm1hdHRpbmdcblxuXG4gICAgQ2VhNjA4U3RyZWFtLnByb3RvdHlwZS5jbGVhckZvcm1hdHRpbmcgPSBmdW5jdGlvbiAocHRzKSB7XG4gICAgICBpZiAoIXRoaXMuZm9ybWF0dGluZ18ubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHRleHQgPSB0aGlzLmZvcm1hdHRpbmdfLnJldmVyc2UoKS5yZWR1Y2UoZnVuY3Rpb24gKHRleHQsIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gdGV4dCArICc8LycgKyBmb3JtYXQgKyAnPic7XG4gICAgICB9LCAnJyk7XG4gICAgICB0aGlzLmZvcm1hdHRpbmdfID0gW107XG4gICAgICB0aGlzW3RoaXMubW9kZV9dKHB0cywgdGV4dCk7XG4gICAgfTsgLy8gTW9kZSBJbXBsZW1lbnRhdGlvbnNcblxuXG4gICAgQ2VhNjA4U3RyZWFtLnByb3RvdHlwZS5wb3BPbiA9IGZ1bmN0aW9uIChwdHMsIHRleHQpIHtcbiAgICAgIHZhciBiYXNlUm93ID0gdGhpcy5ub25EaXNwbGF5ZWRfW3RoaXMucm93X107IC8vIGJ1ZmZlciBjaGFyYWN0ZXJzXG5cbiAgICAgIGJhc2VSb3cgKz0gdGV4dDtcbiAgICAgIHRoaXMubm9uRGlzcGxheWVkX1t0aGlzLnJvd19dID0gYmFzZVJvdztcbiAgICB9O1xuXG4gICAgQ2VhNjA4U3RyZWFtLnByb3RvdHlwZS5yb2xsVXAgPSBmdW5jdGlvbiAocHRzLCB0ZXh0KSB7XG4gICAgICB2YXIgYmFzZVJvdyA9IHRoaXMuZGlzcGxheWVkX1t0aGlzLnJvd19dO1xuICAgICAgYmFzZVJvdyArPSB0ZXh0O1xuICAgICAgdGhpcy5kaXNwbGF5ZWRfW3RoaXMucm93X10gPSBiYXNlUm93O1xuICAgIH07XG5cbiAgICBDZWE2MDhTdHJlYW0ucHJvdG90eXBlLnNoaWZ0Um93c1VwXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpOyAvLyBjbGVhciBvdXQgaW5hY3RpdmUgcm93c1xuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy50b3BSb3dfOyBpKyspIHtcbiAgICAgICAgdGhpcy5kaXNwbGF5ZWRfW2ldID0gJyc7XG4gICAgICB9XG5cbiAgICAgIGZvciAoaSA9IHRoaXMucm93XyArIDE7IGkgPCBCT1RUT01fUk9XICsgMTsgaSsrKSB7XG4gICAgICAgIHRoaXMuZGlzcGxheWVkX1tpXSA9ICcnO1xuICAgICAgfSAvLyBzaGlmdCBkaXNwbGF5ZWQgcm93cyB1cFxuXG5cbiAgICAgIGZvciAoaSA9IHRoaXMudG9wUm93XzsgaSA8IHRoaXMucm93XzsgaSsrKSB7XG4gICAgICAgIHRoaXMuZGlzcGxheWVkX1tpXSA9IHRoaXMuZGlzcGxheWVkX1tpICsgMV07XG4gICAgICB9IC8vIGNsZWFyIG91dCB0aGUgYm90dG9tIHJvd1xuXG5cbiAgICAgIHRoaXMuZGlzcGxheWVkX1t0aGlzLnJvd19dID0gJyc7XG4gICAgfTtcblxuICAgIENlYTYwOFN0cmVhbS5wcm90b3R5cGUucGFpbnRPbiA9IGZ1bmN0aW9uIChwdHMsIHRleHQpIHtcbiAgICAgIHZhciBiYXNlUm93ID0gdGhpcy5kaXNwbGF5ZWRfW3RoaXMucm93X107XG4gICAgICBiYXNlUm93ICs9IHRleHQ7XG4gICAgICB0aGlzLmRpc3BsYXllZF9bdGhpcy5yb3dfXSA9IGJhc2VSb3c7XG4gICAgfTsgLy8gZXhwb3J0c1xuXG5cbiAgICB2YXIgY2FwdGlvblN0cmVhbSA9IHtcbiAgICAgIENhcHRpb25TdHJlYW06IENhcHRpb25TdHJlYW0sXG4gICAgICBDZWE2MDhTdHJlYW06IENlYTYwOFN0cmVhbVxuICAgIH07XG4gICAgdmFyIHN0cmVhbVR5cGVzID0ge1xuICAgICAgSDI2NF9TVFJFQU1fVFlQRTogMHgxQixcbiAgICAgIEFEVFNfU1RSRUFNX1RZUEU6IDB4MEYsXG4gICAgICBNRVRBREFUQV9TVFJFQU1fVFlQRTogMHgxNVxuICAgIH07XG4gICAgdmFyIE1BWF9UUyA9IDg1ODk5MzQ1OTI7XG4gICAgdmFyIFJPX1RIUkVTSCA9IDQyOTQ5NjcyOTY7XG5cbiAgICB2YXIgaGFuZGxlUm9sbG92ZXIgPSBmdW5jdGlvbiBoYW5kbGVSb2xsb3Zlcih2YWx1ZSwgcmVmZXJlbmNlKSB7XG4gICAgICB2YXIgZGlyZWN0aW9uID0gMTtcblxuICAgICAgaWYgKHZhbHVlID4gcmVmZXJlbmNlKSB7XG4gICAgICAgIC8vIElmIHRoZSBjdXJyZW50IHRpbWVzdGFtcCB2YWx1ZSBpcyBncmVhdGVyIHRoYW4gb3VyIHJlZmVyZW5jZSB0aW1lc3RhbXAgYW5kIHdlIGRldGVjdCBhXG4gICAgICAgIC8vIHRpbWVzdGFtcCByb2xsb3ZlciwgdGhpcyBtZWFucyB0aGUgcm9sbCBvdmVyIGlzIGhhcHBlbmluZyBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLlxuICAgICAgICAvLyBFeGFtcGxlIHNjZW5hcmlvOiBFbnRlciBhIGxvbmcgc3RyZWFtL3ZpZGVvIGp1c3QgYWZ0ZXIgYSByb2xsb3ZlciBvY2N1cnJlZC4gVGhlIHJlZmVyZW5jZVxuICAgICAgICAvLyBwb2ludCB3aWxsIGJlIHNldCB0byBhIHNtYWxsIG51bWJlciwgZS5nLiAxLiBUaGUgdXNlciB0aGVuIHNlZWtzIGJhY2t3YXJkcyBvdmVyIHRoZVxuICAgICAgICAvLyByb2xsb3ZlciBwb2ludC4gSW4gbG9hZGluZyB0aGlzIHNlZ21lbnQsIHRoZSB0aW1lc3RhbXAgdmFsdWVzIHdpbGwgYmUgdmVyeSBsYXJnZSxcbiAgICAgICAgLy8gZS5nLiAyXjMzIC0gMS4gU2luY2UgdGhpcyBjb21lcyBiZWZvcmUgdGhlIGRhdGEgd2UgbG9hZGVkIHByZXZpb3VzbHksIHdlIHdhbnQgdG8gYWRqdXN0XG4gICAgICAgIC8vIHRoZSB0aW1lIHN0YW1wIHRvIGJlIGB2YWx1ZSAtIDJeMzNgLlxuICAgICAgICBkaXJlY3Rpb24gPSAtMTtcbiAgICAgIH0gLy8gTm90ZTogQSBzZWVrIGZvcndhcmRzIG9yIGJhY2sgdGhhdCBpcyBncmVhdGVyIHRoYW4gdGhlIFJPX1RIUkVTSCAoMl4zMiwgfjEzIGhvdXJzKSB3aWxsXG4gICAgICAvLyBjYXVzZSBhbiBpbmNvcnJlY3QgYWRqdXN0bWVudC5cblxuXG4gICAgICB3aGlsZSAoTWF0aC5hYnMocmVmZXJlbmNlIC0gdmFsdWUpID4gUk9fVEhSRVNIKSB7XG4gICAgICAgIHZhbHVlICs9IGRpcmVjdGlvbiAqIE1BWF9UUztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG5cbiAgICB2YXIgVGltZXN0YW1wUm9sbG92ZXJTdHJlYW0gPSBmdW5jdGlvbiBUaW1lc3RhbXBSb2xsb3ZlclN0cmVhbSh0eXBlKSB7XG4gICAgICB2YXIgbGFzdERUUywgcmVmZXJlbmNlRFRTO1xuICAgICAgVGltZXN0YW1wUm9sbG92ZXJTdHJlYW0ucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMudHlwZV8gPSB0eXBlO1xuXG4gICAgICB0aGlzLnB1c2ggPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS50eXBlICE9PSB0aGlzLnR5cGVfKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlZmVyZW5jZURUUyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmVmZXJlbmNlRFRTID0gZGF0YS5kdHM7XG4gICAgICAgIH1cblxuICAgICAgICBkYXRhLmR0cyA9IGhhbmRsZVJvbGxvdmVyKGRhdGEuZHRzLCByZWZlcmVuY2VEVFMpO1xuICAgICAgICBkYXRhLnB0cyA9IGhhbmRsZVJvbGxvdmVyKGRhdGEucHRzLCByZWZlcmVuY2VEVFMpO1xuICAgICAgICBsYXN0RFRTID0gZGF0YS5kdHM7XG4gICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIGRhdGEpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVmZXJlbmNlRFRTID0gbGFzdERUUztcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdkb25lJyk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLmRpc2NvbnRpbnVpdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlZmVyZW5jZURUUyA9IHZvaWQgMDtcbiAgICAgICAgbGFzdERUUyA9IHZvaWQgMDtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIFRpbWVzdGFtcFJvbGxvdmVyU3RyZWFtLnByb3RvdHlwZSA9IG5ldyBzdHJlYW0oKTtcbiAgICB2YXIgdGltZXN0YW1wUm9sbG92ZXJTdHJlYW0gPSB7XG4gICAgICBUaW1lc3RhbXBSb2xsb3ZlclN0cmVhbTogVGltZXN0YW1wUm9sbG92ZXJTdHJlYW0sXG4gICAgICBoYW5kbGVSb2xsb3ZlcjogaGFuZGxlUm9sbG92ZXJcbiAgICB9O1xuXG4gICAgdmFyIHBlcmNlbnRFbmNvZGUgPSBmdW5jdGlvbiBwZXJjZW50RW5jb2RlKGJ5dGVzLCBzdGFydCwgZW5kKSB7XG4gICAgICB2YXIgaSxcbiAgICAgICAgICByZXN1bHQgPSAnJztcblxuICAgICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgICByZXN1bHQgKz0gJyUnICsgKCcwMCcgKyBieXRlc1tpXS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuICAgICAgICAvLyByZXR1cm4gdGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGJ5dGUgcmFuZ2UsXG4gICAgLy8gaW50ZXJwcmV0ZWQgYXMgVVRmLTguXG4gICAgcGFyc2VVdGY4ID0gZnVuY3Rpb24gcGFyc2VVdGY4KGJ5dGVzLCBzdGFydCwgZW5kKSB7XG4gICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHBlcmNlbnRFbmNvZGUoYnl0ZXMsIHN0YXJ0LCBlbmQpKTtcbiAgICB9LFxuICAgICAgICAvLyByZXR1cm4gdGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGJ5dGUgcmFuZ2UsXG4gICAgLy8gaW50ZXJwcmV0ZWQgYXMgSVNPLTg4NTktMS5cbiAgICBwYXJzZUlzbzg4NTkxID0gZnVuY3Rpb24gcGFyc2VJc284ODU5MShieXRlcywgc3RhcnQsIGVuZCkge1xuICAgICAgcmV0dXJuIHVuZXNjYXBlKHBlcmNlbnRFbmNvZGUoYnl0ZXMsIHN0YXJ0LCBlbmQpKTsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgfSxcbiAgICAgICAgcGFyc2VTeW5jU2FmZUludGVnZXIgPSBmdW5jdGlvbiBwYXJzZVN5bmNTYWZlSW50ZWdlcihkYXRhKSB7XG4gICAgICByZXR1cm4gZGF0YVswXSA8PCAyMSB8IGRhdGFbMV0gPDwgMTQgfCBkYXRhWzJdIDw8IDcgfCBkYXRhWzNdO1xuICAgIH0sXG4gICAgICAgIHRhZ1BhcnNlcnMgPSB7XG4gICAgICBUWFhYOiBmdW5jdGlvbiBUWFhYKHRhZykge1xuICAgICAgICB2YXIgaTtcblxuICAgICAgICBpZiAodGFnLmRhdGFbMF0gIT09IDMpIHtcbiAgICAgICAgICAvLyBpZ25vcmUgZnJhbWVzIHdpdGggdW5yZWNvZ25pemVkIGNoYXJhY3RlciBlbmNvZGluZ3NcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGkgPSAxOyBpIDwgdGFnLmRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAodGFnLmRhdGFbaV0gPT09IDApIHtcbiAgICAgICAgICAgIC8vIHBhcnNlIHRoZSB0ZXh0IGZpZWxkc1xuICAgICAgICAgICAgdGFnLmRlc2NyaXB0aW9uID0gcGFyc2VVdGY4KHRhZy5kYXRhLCAxLCBpKTsgLy8gZG8gbm90IGluY2x1ZGUgdGhlIG51bGwgdGVybWluYXRvciBpbiB0aGUgdGFnIHZhbHVlXG5cbiAgICAgICAgICAgIHRhZy52YWx1ZSA9IHBhcnNlVXRmOCh0YWcuZGF0YSwgaSArIDEsIHRhZy5kYXRhLmxlbmd0aCkucmVwbGFjZSgvXFwwKiQvLCAnJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0YWcuZGF0YSA9IHRhZy52YWx1ZTtcbiAgICAgIH0sXG4gICAgICBXWFhYOiBmdW5jdGlvbiBXWFhYKHRhZykge1xuICAgICAgICB2YXIgaTtcblxuICAgICAgICBpZiAodGFnLmRhdGFbMF0gIT09IDMpIHtcbiAgICAgICAgICAvLyBpZ25vcmUgZnJhbWVzIHdpdGggdW5yZWNvZ25pemVkIGNoYXJhY3RlciBlbmNvZGluZ3NcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGkgPSAxOyBpIDwgdGFnLmRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAodGFnLmRhdGFbaV0gPT09IDApIHtcbiAgICAgICAgICAgIC8vIHBhcnNlIHRoZSBkZXNjcmlwdGlvbiBhbmQgVVJMIGZpZWxkc1xuICAgICAgICAgICAgdGFnLmRlc2NyaXB0aW9uID0gcGFyc2VVdGY4KHRhZy5kYXRhLCAxLCBpKTtcbiAgICAgICAgICAgIHRhZy51cmwgPSBwYXJzZVV0ZjgodGFnLmRhdGEsIGkgKyAxLCB0YWcuZGF0YS5sZW5ndGgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgUFJJVjogZnVuY3Rpb24gUFJJVih0YWcpIHtcbiAgICAgICAgdmFyIGk7XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRhZy5kYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKHRhZy5kYXRhW2ldID09PSAwKSB7XG4gICAgICAgICAgICAvLyBwYXJzZSB0aGUgZGVzY3JpcHRpb24gYW5kIFVSTCBmaWVsZHNcbiAgICAgICAgICAgIHRhZy5vd25lciA9IHBhcnNlSXNvODg1OTEodGFnLmRhdGEsIDAsIGkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGFnLnByaXZhdGVEYXRhID0gdGFnLmRhdGEuc3ViYXJyYXkoaSArIDEpO1xuICAgICAgICB0YWcuZGF0YSA9IHRhZy5wcml2YXRlRGF0YTtcbiAgICAgIH1cbiAgICB9LFxuICAgICAgICBfTWV0YWRhdGFTdHJlYW07XG5cbiAgICBfTWV0YWRhdGFTdHJlYW0gPSBmdW5jdGlvbiBNZXRhZGF0YVN0cmVhbShvcHRpb25zKSB7XG4gICAgICB2YXIgc2V0dGluZ3MgPSB7XG4gICAgICAgIGRlYnVnOiAhIShvcHRpb25zICYmIG9wdGlvbnMuZGVidWcpLFxuICAgICAgICAvLyB0aGUgYnl0ZXMgb2YgdGhlIHByb2dyYW0tbGV2ZWwgZGVzY3JpcHRvciBmaWVsZCBpbiBNUDJUXG4gICAgICAgIC8vIHNlZSBJU08vSUVDIDEzODE4LTE6MjAxMyAoRSksIHNlY3Rpb24gMi42IFwiUHJvZ3JhbSBhbmRcbiAgICAgICAgLy8gcHJvZ3JhbSBlbGVtZW50IGRlc2NyaXB0b3JzXCJcbiAgICAgICAgZGVzY3JpcHRvcjogb3B0aW9ucyAmJiBvcHRpb25zLmRlc2NyaXB0b3JcbiAgICAgIH0sXG4gICAgICAgICAgLy8gdGhlIHRvdGFsIHNpemUgaW4gYnl0ZXMgb2YgdGhlIElEMyB0YWcgYmVpbmcgcGFyc2VkXG4gICAgICB0YWdTaXplID0gMCxcbiAgICAgICAgICAvLyB0YWcgZGF0YSB0aGF0IGlzIG5vdCBjb21wbGV0ZSBlbm91Z2ggdG8gYmUgcGFyc2VkXG4gICAgICBidWZmZXIgPSBbXSxcbiAgICAgICAgICAvLyB0aGUgdG90YWwgbnVtYmVyIG9mIGJ5dGVzIGN1cnJlbnRseSBpbiB0aGUgYnVmZmVyXG4gICAgICBidWZmZXJTaXplID0gMCxcbiAgICAgICAgICBpO1xuXG4gICAgICBfTWV0YWRhdGFTdHJlYW0ucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzKTsgLy8gY2FsY3VsYXRlIHRoZSB0ZXh0IHRyYWNrIGluLWJhbmQgbWV0YWRhdGEgdHJhY2sgZGlzcGF0Y2ggdHlwZVxuICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZW1iZWRkZWQtY29udGVudC5odG1sI3N0ZXBzLXRvLWV4cG9zZS1hLW1lZGlhLXJlc291cmNlLXNwZWNpZmljLXRleHQtdHJhY2tcblxuXG4gICAgICB0aGlzLmRpc3BhdGNoVHlwZSA9IHN0cmVhbVR5cGVzLk1FVEFEQVRBX1NUUkVBTV9UWVBFLnRvU3RyaW5nKDE2KTtcblxuICAgICAgaWYgKHNldHRpbmdzLmRlc2NyaXB0b3IpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHNldHRpbmdzLmRlc2NyaXB0b3IubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoVHlwZSArPSAoJzAwJyArIHNldHRpbmdzLmRlc2NyaXB0b3JbaV0udG9TdHJpbmcoMTYpKS5zbGljZSgtMik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5wdXNoID0gZnVuY3Rpb24gKGNodW5rKSB7XG4gICAgICAgIHZhciB0YWcsIGZyYW1lU3RhcnQsIGZyYW1lU2l6ZSwgZnJhbWUsIGksIGZyYW1lSGVhZGVyO1xuXG4gICAgICAgIGlmIChjaHVuay50eXBlICE9PSAndGltZWQtbWV0YWRhdGEnKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIGlmIGRhdGFfYWxpZ25tZW50X2luZGljYXRvciBpcyBzZXQgaW4gdGhlIFBFUyBoZWFkZXIsXG4gICAgICAgIC8vIHdlIG11c3QgaGF2ZSB0aGUgc3RhcnQgb2YgYSBuZXcgSUQzIHRhZy4gQXNzdW1lIGFueXRoaW5nXG4gICAgICAgIC8vIHJlbWFpbmluZyBpbiB0aGUgYnVmZmVyIHdhcyBtYWxmb3JtZWQgYW5kIHRocm93IGl0IG91dFxuXG5cbiAgICAgICAgaWYgKGNodW5rLmRhdGFBbGlnbm1lbnRJbmRpY2F0b3IpIHtcbiAgICAgICAgICBidWZmZXJTaXplID0gMDtcbiAgICAgICAgICBidWZmZXIubGVuZ3RoID0gMDtcbiAgICAgICAgfSAvLyBpZ25vcmUgZXZlbnRzIHRoYXQgZG9uJ3QgbG9vayBsaWtlIElEMyBkYXRhXG5cblxuICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCAmJiAoY2h1bmsuZGF0YS5sZW5ndGggPCAxMCB8fCBjaHVuay5kYXRhWzBdICE9PSAnSScuY2hhckNvZGVBdCgwKSB8fCBjaHVuay5kYXRhWzFdICE9PSAnRCcuY2hhckNvZGVBdCgwKSB8fCBjaHVuay5kYXRhWzJdICE9PSAnMycuY2hhckNvZGVBdCgwKSkpIHtcbiAgICAgICAgICBpZiAoc2V0dGluZ3MuZGVidWcpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU2tpcHBpbmcgdW5yZWNvZ25pemVkIG1ldGFkYXRhIHBhY2tldCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBhZGQgdGhpcyBjaHVuayB0byB0aGUgZGF0YSB3ZSd2ZSBjb2xsZWN0ZWQgc28gZmFyXG5cblxuICAgICAgICBidWZmZXIucHVzaChjaHVuayk7XG4gICAgICAgIGJ1ZmZlclNpemUgKz0gY2h1bmsuZGF0YS5ieXRlTGVuZ3RoOyAvLyBncmFiIHRoZSBzaXplIG9mIHRoZSBlbnRpcmUgZnJhbWUgZnJvbSB0aGUgSUQzIGhlYWRlclxuXG4gICAgICAgIGlmIChidWZmZXIubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgLy8gdGhlIGZyYW1lIHNpemUgaXMgdHJhbnNtaXR0ZWQgYXMgYSAyOC1iaXQgaW50ZWdlciBpbiB0aGVcbiAgICAgICAgICAvLyBsYXN0IGZvdXIgYnl0ZXMgb2YgdGhlIElEMyBoZWFkZXIuXG4gICAgICAgICAgLy8gVGhlIG1vc3Qgc2lnbmlmaWNhbnQgYml0IG9mIGVhY2ggYnl0ZSBpcyBkcm9wcGVkIGFuZCB0aGVcbiAgICAgICAgICAvLyByZXN1bHRzIGNvbmNhdGVuYXRlZCB0byByZWNvdmVyIHRoZSBhY3R1YWwgdmFsdWUuXG4gICAgICAgICAgdGFnU2l6ZSA9IHBhcnNlU3luY1NhZmVJbnRlZ2VyKGNodW5rLmRhdGEuc3ViYXJyYXkoNiwgMTApKTsgLy8gSUQzIHJlcG9ydHMgdGhlIHRhZyBzaXplIGV4Y2x1ZGluZyB0aGUgaGVhZGVyIGJ1dCBpdCdzIG1vcmVcbiAgICAgICAgICAvLyBjb252ZW5pZW50IGZvciBvdXIgY29tcGFyaXNvbnMgdG8gaW5jbHVkZSBpdFxuXG4gICAgICAgICAgdGFnU2l6ZSArPSAxMDtcbiAgICAgICAgfSAvLyBpZiB0aGUgZW50aXJlIGZyYW1lIGhhcyBub3QgYXJyaXZlZCwgd2FpdCBmb3IgbW9yZSBkYXRhXG5cblxuICAgICAgICBpZiAoYnVmZmVyU2l6ZSA8IHRhZ1NpemUpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gY29sbGVjdCB0aGUgZW50aXJlIGZyYW1lIHNvIGl0IGNhbiBiZSBwYXJzZWRcblxuXG4gICAgICAgIHRhZyA9IHtcbiAgICAgICAgICBkYXRhOiBuZXcgVWludDhBcnJheSh0YWdTaXplKSxcbiAgICAgICAgICBmcmFtZXM6IFtdLFxuICAgICAgICAgIHB0czogYnVmZmVyWzBdLnB0cyxcbiAgICAgICAgICBkdHM6IGJ1ZmZlclswXS5kdHNcbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGFnU2l6ZTspIHtcbiAgICAgICAgICB0YWcuZGF0YS5zZXQoYnVmZmVyWzBdLmRhdGEuc3ViYXJyYXkoMCwgdGFnU2l6ZSAtIGkpLCBpKTtcbiAgICAgICAgICBpICs9IGJ1ZmZlclswXS5kYXRhLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgYnVmZmVyU2l6ZSAtPSBidWZmZXJbMF0uZGF0YS5ieXRlTGVuZ3RoO1xuICAgICAgICAgIGJ1ZmZlci5zaGlmdCgpO1xuICAgICAgICB9IC8vIGZpbmQgdGhlIHN0YXJ0IG9mIHRoZSBmaXJzdCBmcmFtZSBhbmQgdGhlIGVuZCBvZiB0aGUgdGFnXG5cblxuICAgICAgICBmcmFtZVN0YXJ0ID0gMTA7XG5cbiAgICAgICAgaWYgKHRhZy5kYXRhWzVdICYgMHg0MCkge1xuICAgICAgICAgIC8vIGFkdmFuY2UgdGhlIGZyYW1lIHN0YXJ0IHBhc3QgdGhlIGV4dGVuZGVkIGhlYWRlclxuICAgICAgICAgIGZyYW1lU3RhcnQgKz0gNDsgLy8gaGVhZGVyIHNpemUgZmllbGRcblxuICAgICAgICAgIGZyYW1lU3RhcnQgKz0gcGFyc2VTeW5jU2FmZUludGVnZXIodGFnLmRhdGEuc3ViYXJyYXkoMTAsIDE0KSk7IC8vIGNsaXAgYW55IHBhZGRpbmcgb2ZmIHRoZSBlbmRcblxuICAgICAgICAgIHRhZ1NpemUgLT0gcGFyc2VTeW5jU2FmZUludGVnZXIodGFnLmRhdGEuc3ViYXJyYXkoMTYsIDIwKSk7XG4gICAgICAgIH0gLy8gcGFyc2Ugb25lIG9yIG1vcmUgSUQzIGZyYW1lc1xuICAgICAgICAvLyBodHRwOi8vaWQzLm9yZy9pZDN2Mi4zLjAjSUQzdjJfZnJhbWVfb3ZlcnZpZXdcblxuXG4gICAgICAgIGRvIHtcbiAgICAgICAgICAvLyBkZXRlcm1pbmUgdGhlIG51bWJlciBvZiBieXRlcyBpbiB0aGlzIGZyYW1lXG4gICAgICAgICAgZnJhbWVTaXplID0gcGFyc2VTeW5jU2FmZUludGVnZXIodGFnLmRhdGEuc3ViYXJyYXkoZnJhbWVTdGFydCArIDQsIGZyYW1lU3RhcnQgKyA4KSk7XG5cbiAgICAgICAgICBpZiAoZnJhbWVTaXplIDwgMSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZygnTWFsZm9ybWVkIElEMyBmcmFtZSBlbmNvdW50ZXJlZC4gU2tpcHBpbmcgbWV0YWRhdGEgcGFyc2luZy4nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmcmFtZUhlYWRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUodGFnLmRhdGFbZnJhbWVTdGFydF0sIHRhZy5kYXRhW2ZyYW1lU3RhcnQgKyAxXSwgdGFnLmRhdGFbZnJhbWVTdGFydCArIDJdLCB0YWcuZGF0YVtmcmFtZVN0YXJ0ICsgM10pO1xuICAgICAgICAgIGZyYW1lID0ge1xuICAgICAgICAgICAgaWQ6IGZyYW1lSGVhZGVyLFxuICAgICAgICAgICAgZGF0YTogdGFnLmRhdGEuc3ViYXJyYXkoZnJhbWVTdGFydCArIDEwLCBmcmFtZVN0YXJ0ICsgZnJhbWVTaXplICsgMTApXG4gICAgICAgICAgfTtcbiAgICAgICAgICBmcmFtZS5rZXkgPSBmcmFtZS5pZDtcblxuICAgICAgICAgIGlmICh0YWdQYXJzZXJzW2ZyYW1lLmlkXSkge1xuICAgICAgICAgICAgdGFnUGFyc2Vyc1tmcmFtZS5pZF0oZnJhbWUpOyAvLyBoYW5kbGUgdGhlIHNwZWNpYWwgUFJJViBmcmFtZSB1c2VkIHRvIGluZGljYXRlIHRoZSBzdGFydFxuICAgICAgICAgICAgLy8gdGltZSBmb3IgcmF3IEFBQyBkYXRhXG5cbiAgICAgICAgICAgIGlmIChmcmFtZS5vd25lciA9PT0gJ2NvbS5hcHBsZS5zdHJlYW1pbmcudHJhbnNwb3J0U3RyZWFtVGltZXN0YW1wJykge1xuICAgICAgICAgICAgICB2YXIgZCA9IGZyYW1lLmRhdGEsXG4gICAgICAgICAgICAgICAgICBzaXplID0gKGRbM10gJiAweDAxKSA8PCAzMCB8IGRbNF0gPDwgMjIgfCBkWzVdIDw8IDE0IHwgZFs2XSA8PCA2IHwgZFs3XSA+Pj4gMjtcbiAgICAgICAgICAgICAgc2l6ZSAqPSA0O1xuICAgICAgICAgICAgICBzaXplICs9IGRbN10gJiAweDAzO1xuICAgICAgICAgICAgICBmcmFtZS50aW1lU3RhbXAgPSBzaXplOyAvLyBpbiByYXcgQUFDLCBhbGwgc3Vic2VxdWVudCBkYXRhIHdpbGwgYmUgdGltZXN0YW1wZWQgYmFzZWRcbiAgICAgICAgICAgICAgLy8gb24gdGhlIHZhbHVlIG9mIHRoaXMgZnJhbWVcbiAgICAgICAgICAgICAgLy8gd2UgY291bGRuJ3QgaGF2ZSBrbm93biB0aGUgYXBwcm9wcmlhdGUgcHRzIGFuZCBkdHMgYmVmb3JlXG4gICAgICAgICAgICAgIC8vIHBhcnNpbmcgdGhpcyBJRDMgdGFnIHNvIHNldCB0aG9zZSB2YWx1ZXMgbm93XG5cbiAgICAgICAgICAgICAgaWYgKHRhZy5wdHMgPT09IHVuZGVmaW5lZCAmJiB0YWcuZHRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0YWcucHRzID0gZnJhbWUudGltZVN0YW1wO1xuICAgICAgICAgICAgICAgIHRhZy5kdHMgPSBmcmFtZS50aW1lU3RhbXA7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3RpbWVzdGFtcCcsIGZyYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0YWcuZnJhbWVzLnB1c2goZnJhbWUpO1xuICAgICAgICAgIGZyYW1lU3RhcnQgKz0gMTA7IC8vIGFkdmFuY2UgcGFzdCB0aGUgZnJhbWUgaGVhZGVyXG5cbiAgICAgICAgICBmcmFtZVN0YXJ0ICs9IGZyYW1lU2l6ZTsgLy8gYWR2YW5jZSBwYXN0IHRoZSBmcmFtZSBib2R5XG4gICAgICAgIH0gd2hpbGUgKGZyYW1lU3RhcnQgPCB0YWdTaXplKTtcblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2RhdGEnLCB0YWcpO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgX01ldGFkYXRhU3RyZWFtLnByb3RvdHlwZSA9IG5ldyBzdHJlYW0oKTtcbiAgICB2YXIgbWV0YWRhdGFTdHJlYW0gPSBfTWV0YWRhdGFTdHJlYW07XG4gICAgdmFyIFRpbWVzdGFtcFJvbGxvdmVyU3RyZWFtJDEgPSB0aW1lc3RhbXBSb2xsb3ZlclN0cmVhbS5UaW1lc3RhbXBSb2xsb3ZlclN0cmVhbTsgLy8gb2JqZWN0IHR5cGVzXG5cbiAgICB2YXIgX1RyYW5zcG9ydFBhY2tldFN0cmVhbSwgX1RyYW5zcG9ydFBhcnNlU3RyZWFtLCBfRWxlbWVudGFyeVN0cmVhbTsgLy8gY29uc3RhbnRzXG5cblxuICAgIHZhciBNUDJUX1BBQ0tFVF9MRU5HVEggPSAxODgsXG4gICAgICAgIC8vIGJ5dGVzXG4gICAgU1lOQ19CWVRFID0gMHg0NztcbiAgICAvKipcbiAgICAgKiBTcGxpdHMgYW4gaW5jb21pbmcgc3RyZWFtIG9mIGJpbmFyeSBkYXRhIGludG8gTVBFRy0yIFRyYW5zcG9ydFxuICAgICAqIFN0cmVhbSBwYWNrZXRzLlxuICAgICAqL1xuXG4gICAgX1RyYW5zcG9ydFBhY2tldFN0cmVhbSA9IGZ1bmN0aW9uIFRyYW5zcG9ydFBhY2tldFN0cmVhbSgpIHtcbiAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheShNUDJUX1BBQ0tFVF9MRU5HVEgpLFxuICAgICAgICAgIGJ5dGVzSW5CdWZmZXIgPSAwO1xuXG4gICAgICBfVHJhbnNwb3J0UGFja2V0U3RyZWFtLnByb3RvdHlwZS5pbml0LmNhbGwodGhpcyk7IC8vIERlbGl2ZXIgbmV3IGJ5dGVzIHRvIHRoZSBzdHJlYW0uXG5cbiAgICAgIC8qKlxuICAgICAgICogU3BsaXQgYSBzdHJlYW0gb2YgZGF0YSBpbnRvIE0yVFMgcGFja2V0c1xuICAgICAgKiovXG5cblxuICAgICAgdGhpcy5wdXNoID0gZnVuY3Rpb24gKGJ5dGVzKSB7XG4gICAgICAgIHZhciBzdGFydEluZGV4ID0gMCxcbiAgICAgICAgICAgIGVuZEluZGV4ID0gTVAyVF9QQUNLRVRfTEVOR1RILFxuICAgICAgICAgICAgZXZlcnl0aGluZzsgLy8gSWYgdGhlcmUgYXJlIGJ5dGVzIHJlbWFpbmluZyBmcm9tIHRoZSBsYXN0IHNlZ21lbnQsIHByZXBlbmQgdGhlbSB0byB0aGVcbiAgICAgICAgLy8gYnl0ZXMgdGhhdCB3ZXJlIHB1c2hlZCBpblxuXG4gICAgICAgIGlmIChieXRlc0luQnVmZmVyKSB7XG4gICAgICAgICAgZXZlcnl0aGluZyA9IG5ldyBVaW50OEFycmF5KGJ5dGVzLmJ5dGVMZW5ndGggKyBieXRlc0luQnVmZmVyKTtcbiAgICAgICAgICBldmVyeXRoaW5nLnNldChidWZmZXIuc3ViYXJyYXkoMCwgYnl0ZXNJbkJ1ZmZlcikpO1xuICAgICAgICAgIGV2ZXJ5dGhpbmcuc2V0KGJ5dGVzLCBieXRlc0luQnVmZmVyKTtcbiAgICAgICAgICBieXRlc0luQnVmZmVyID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBldmVyeXRoaW5nID0gYnl0ZXM7XG4gICAgICAgIH0gLy8gV2hpbGUgd2UgaGF2ZSBlbm91Z2ggZGF0YSBmb3IgYSBwYWNrZXRcblxuXG4gICAgICAgIHdoaWxlIChlbmRJbmRleCA8IGV2ZXJ5dGhpbmcuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgIC8vIExvb2sgZm9yIGEgcGFpciBvZiBzdGFydCBhbmQgZW5kIHN5bmMgYnl0ZXMgaW4gdGhlIGRhdGEuLlxuICAgICAgICAgIGlmIChldmVyeXRoaW5nW3N0YXJ0SW5kZXhdID09PSBTWU5DX0JZVEUgJiYgZXZlcnl0aGluZ1tlbmRJbmRleF0gPT09IFNZTkNfQllURSkge1xuICAgICAgICAgICAgLy8gV2UgZm91bmQgYSBwYWNrZXQgc28gZW1pdCBpdCBhbmQganVtcCBvbmUgd2hvbGUgcGFja2V0IGZvcndhcmQgaW5cbiAgICAgICAgICAgIC8vIHRoZSBzdHJlYW1cbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIGV2ZXJ5dGhpbmcuc3ViYXJyYXkoc3RhcnRJbmRleCwgZW5kSW5kZXgpKTtcbiAgICAgICAgICAgIHN0YXJ0SW5kZXggKz0gTVAyVF9QQUNLRVRfTEVOR1RIO1xuICAgICAgICAgICAgZW5kSW5kZXggKz0gTVAyVF9QQUNLRVRfTEVOR1RIO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfSAvLyBJZiB3ZSBnZXQgaGVyZSwgd2UgaGF2ZSBzb21laG93IGJlY29tZSBkZS1zeW5jaHJvbml6ZWQgYW5kIHdlIG5lZWQgdG8gc3RlcFxuICAgICAgICAgIC8vIGZvcndhcmQgb25lIGJ5dGUgYXQgYSB0aW1lIHVudGlsIHdlIGZpbmQgYSBwYWlyIG9mIHN5bmMgYnl0ZXMgdGhhdCBkZW5vdGVcbiAgICAgICAgICAvLyBhIHBhY2tldFxuXG5cbiAgICAgICAgICBzdGFydEluZGV4Kys7XG4gICAgICAgICAgZW5kSW5kZXgrKztcbiAgICAgICAgfSAvLyBJZiB0aGVyZSB3YXMgc29tZSBkYXRhIGxlZnQgb3ZlciBhdCB0aGUgZW5kIG9mIHRoZSBzZWdtZW50IHRoYXQgY291bGRuJ3RcbiAgICAgICAgLy8gcG9zc2libHkgYmUgYSB3aG9sZSBwYWNrZXQsIGtlZXAgaXQgYmVjYXVzZSBpdCBtaWdodCBiZSB0aGUgc3RhcnQgb2YgYSBwYWNrZXRcbiAgICAgICAgLy8gdGhhdCBjb250aW51ZXMgaW4gdGhlIG5leHQgc2VnbWVudFxuXG5cbiAgICAgICAgaWYgKHN0YXJ0SW5kZXggPCBldmVyeXRoaW5nLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICBidWZmZXIuc2V0KGV2ZXJ5dGhpbmcuc3ViYXJyYXkoc3RhcnRJbmRleCksIDApO1xuICAgICAgICAgIGJ5dGVzSW5CdWZmZXIgPSBldmVyeXRoaW5nLmJ5dGVMZW5ndGggLSBzdGFydEluZGV4O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgLyoqXG4gICAgICAgKiBQYXNzZXMgaWRlbnRpZmllZCBNMlRTIHBhY2tldHMgdG8gdGhlIFRyYW5zcG9ydFBhcnNlU3RyZWFtIHRvIGJlIHBhcnNlZFxuICAgICAgKiovXG5cblxuICAgICAgdGhpcy5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gSWYgdGhlIGJ1ZmZlciBjb250YWlucyBhIHdob2xlIHBhY2tldCB3aGVuIHdlIGFyZSBiZWluZyBmbHVzaGVkLCBlbWl0IGl0XG4gICAgICAgIC8vIGFuZCBlbXB0eSB0aGUgYnVmZmVyLiBPdGhlcndpc2UgaG9sZCBvbnRvIHRoZSBkYXRhIGJlY2F1c2UgaXQgbWF5IGJlXG4gICAgICAgIC8vIGltcG9ydGFudCBmb3IgZGVjb2RpbmcgdGhlIG5leHQgc2VnbWVudFxuICAgICAgICBpZiAoYnl0ZXNJbkJ1ZmZlciA9PT0gTVAyVF9QQUNLRVRfTEVOR1RIICYmIGJ1ZmZlclswXSA9PT0gU1lOQ19CWVRFKSB7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywgYnVmZmVyKTtcbiAgICAgICAgICBieXRlc0luQnVmZmVyID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcignZG9uZScpO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgX1RyYW5zcG9ydFBhY2tldFN0cmVhbS5wcm90b3R5cGUgPSBuZXcgc3RyZWFtKCk7XG4gICAgLyoqXG4gICAgICogQWNjZXB0cyBhbiBNUDJUIFRyYW5zcG9ydFBhY2tldFN0cmVhbSBhbmQgZW1pdHMgZGF0YSBldmVudHMgd2l0aCBwYXJzZWRcbiAgICAgKiBmb3JtcyBvZiB0aGUgaW5kaXZpZHVhbCB0cmFuc3BvcnQgc3RyZWFtIHBhY2tldHMuXG4gICAgICovXG5cbiAgICBfVHJhbnNwb3J0UGFyc2VTdHJlYW0gPSBmdW5jdGlvbiBUcmFuc3BvcnRQYXJzZVN0cmVhbSgpIHtcbiAgICAgIHZhciBwYXJzZVBzaSwgcGFyc2VQYXQsIHBhcnNlUG10LCBzZWxmO1xuXG4gICAgICBfVHJhbnNwb3J0UGFyc2VTdHJlYW0ucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzKTtcblxuICAgICAgc2VsZiA9IHRoaXM7XG4gICAgICB0aGlzLnBhY2tldHNXYWl0aW5nRm9yUG10ID0gW107XG4gICAgICB0aGlzLnByb2dyYW1NYXBUYWJsZSA9IHVuZGVmaW5lZDtcblxuICAgICAgcGFyc2VQc2kgPSBmdW5jdGlvbiBwYXJzZVBzaShwYXlsb2FkLCBwc2kpIHtcbiAgICAgICAgdmFyIG9mZnNldCA9IDA7IC8vIFBTSSBwYWNrZXRzIG1heSBiZSBzcGxpdCBpbnRvIG11bHRpcGxlIHNlY3Rpb25zIGFuZCB0aG9zZVxuICAgICAgICAvLyBzZWN0aW9ucyBtYXkgYmUgc3BsaXQgaW50byBtdWx0aXBsZSBwYWNrZXRzLiBJZiBhIFBTSVxuICAgICAgICAvLyBzZWN0aW9uIHN0YXJ0cyBpbiB0aGlzIHBhY2tldCwgdGhlIHBheWxvYWRfdW5pdF9zdGFydF9pbmRpY2F0b3JcbiAgICAgICAgLy8gd2lsbCBiZSB0cnVlIGFuZCB0aGUgZmlyc3QgYnl0ZSBvZiB0aGUgcGF5bG9hZCB3aWxsIGluZGljYXRlXG4gICAgICAgIC8vIHRoZSBvZmZzZXQgZnJvbSB0aGUgY3VycmVudCBwb3NpdGlvbiB0byB0aGUgc3RhcnQgb2YgdGhlXG4gICAgICAgIC8vIHNlY3Rpb24uXG5cbiAgICAgICAgaWYgKHBzaS5wYXlsb2FkVW5pdFN0YXJ0SW5kaWNhdG9yKSB7XG4gICAgICAgICAgb2Zmc2V0ICs9IHBheWxvYWRbb2Zmc2V0XSArIDE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHNpLnR5cGUgPT09ICdwYXQnKSB7XG4gICAgICAgICAgcGFyc2VQYXQocGF5bG9hZC5zdWJhcnJheShvZmZzZXQpLCBwc2kpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhcnNlUG10KHBheWxvYWQuc3ViYXJyYXkob2Zmc2V0KSwgcHNpKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcGFyc2VQYXQgPSBmdW5jdGlvbiBwYXJzZVBhdChwYXlsb2FkLCBwYXQpIHtcbiAgICAgICAgcGF0LnNlY3Rpb25fbnVtYmVyID0gcGF5bG9hZFs3XTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBjYW1lbGNhc2VcblxuICAgICAgICBwYXQubGFzdF9zZWN0aW9uX251bWJlciA9IHBheWxvYWRbOF07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY2FtZWxjYXNlXG4gICAgICAgIC8vIHNraXAgdGhlIFBTSSBoZWFkZXIgYW5kIHBhcnNlIHRoZSBmaXJzdCBQTVQgZW50cnlcblxuICAgICAgICBzZWxmLnBtdFBpZCA9IChwYXlsb2FkWzEwXSAmIDB4MUYpIDw8IDggfCBwYXlsb2FkWzExXTtcbiAgICAgICAgcGF0LnBtdFBpZCA9IHNlbGYucG10UGlkO1xuICAgICAgfTtcbiAgICAgIC8qKlxuICAgICAgICogUGFyc2Ugb3V0IHRoZSByZWxldmFudCBmaWVsZHMgb2YgYSBQcm9ncmFtIE1hcCBUYWJsZSAoUE1UKS5cbiAgICAgICAqIEBwYXJhbSBwYXlsb2FkIHtVaW50OEFycmF5fSB0aGUgUE1ULXNwZWNpZmljIHBvcnRpb24gb2YgYW4gTVAyVFxuICAgICAgICogcGFja2V0LiBUaGUgZmlyc3QgYnl0ZSBpbiB0aGlzIGFycmF5IHNob3VsZCBiZSB0aGUgdGFibGVfaWRcbiAgICAgICAqIGZpZWxkLlxuICAgICAgICogQHBhcmFtIHBtdCB7b2JqZWN0fSB0aGUgb2JqZWN0IHRoYXQgc2hvdWxkIGJlIGRlY29yYXRlZCB3aXRoXG4gICAgICAgKiBmaWVsZHMgcGFyc2VkIGZyb20gdGhlIFBNVC5cbiAgICAgICAqL1xuXG5cbiAgICAgIHBhcnNlUG10ID0gZnVuY3Rpb24gcGFyc2VQbXQocGF5bG9hZCwgcG10KSB7XG4gICAgICAgIHZhciBzZWN0aW9uTGVuZ3RoLCB0YWJsZUVuZCwgcHJvZ3JhbUluZm9MZW5ndGgsIG9mZnNldDsgLy8gUE1UcyBjYW4gYmUgc2VudCBhaGVhZCBvZiB0aGUgdGltZSB3aGVuIHRoZXkgc2hvdWxkIGFjdHVhbGx5XG4gICAgICAgIC8vIHRha2UgZWZmZWN0LiBXZSBkb24ndCBiZWxpZXZlIHRoaXMgc2hvdWxkIGV2ZXIgYmUgdGhlIGNhc2VcbiAgICAgICAgLy8gZm9yIEhMUyBidXQgd2UnbGwgaWdub3JlIFwiZm9yd2FyZFwiIFBNVCBkZWNsYXJhdGlvbnMgaWYgd2Ugc2VlXG4gICAgICAgIC8vIHRoZW0uIEZ1dHVyZSBQTVQgZGVjbGFyYXRpb25zIGhhdmUgdGhlIGN1cnJlbnRfbmV4dF9pbmRpY2F0b3JcbiAgICAgICAgLy8gc2V0IHRvIHplcm8uXG5cbiAgICAgICAgaWYgKCEocGF5bG9hZFs1XSAmIDB4MDEpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIG92ZXJ3cml0ZSBhbnkgZXhpc3RpbmcgcHJvZ3JhbSBtYXAgdGFibGVcblxuXG4gICAgICAgIHNlbGYucHJvZ3JhbU1hcFRhYmxlID0ge1xuICAgICAgICAgIHZpZGVvOiBudWxsLFxuICAgICAgICAgIGF1ZGlvOiBudWxsLFxuICAgICAgICAgICd0aW1lZC1tZXRhZGF0YSc6IHt9XG4gICAgICAgIH07IC8vIHRoZSBtYXBwaW5nIHRhYmxlIGVuZHMgYXQgdGhlIGVuZCBvZiB0aGUgY3VycmVudCBzZWN0aW9uXG5cbiAgICAgICAgc2VjdGlvbkxlbmd0aCA9IChwYXlsb2FkWzFdICYgMHgwZikgPDwgOCB8IHBheWxvYWRbMl07XG4gICAgICAgIHRhYmxlRW5kID0gMyArIHNlY3Rpb25MZW5ndGggLSA0OyAvLyB0byBkZXRlcm1pbmUgd2hlcmUgdGhlIHRhYmxlIGlzLCB3ZSBoYXZlIHRvIGZpZ3VyZSBvdXQgaG93XG4gICAgICAgIC8vIGxvbmcgdGhlIHByb2dyYW0gaW5mbyBkZXNjcmlwdG9ycyBhcmVcblxuICAgICAgICBwcm9ncmFtSW5mb0xlbmd0aCA9IChwYXlsb2FkWzEwXSAmIDB4MGYpIDw8IDggfCBwYXlsb2FkWzExXTsgLy8gYWR2YW5jZSB0aGUgb2Zmc2V0IHRvIHRoZSBmaXJzdCBlbnRyeSBpbiB0aGUgbWFwcGluZyB0YWJsZVxuXG4gICAgICAgIG9mZnNldCA9IDEyICsgcHJvZ3JhbUluZm9MZW5ndGg7XG5cbiAgICAgICAgd2hpbGUgKG9mZnNldCA8IHRhYmxlRW5kKSB7XG4gICAgICAgICAgdmFyIHN0cmVhbVR5cGUgPSBwYXlsb2FkW29mZnNldF07XG4gICAgICAgICAgdmFyIHBpZCA9IChwYXlsb2FkW29mZnNldCArIDFdICYgMHgxRikgPDwgOCB8IHBheWxvYWRbb2Zmc2V0ICsgMl07IC8vIG9ubHkgbWFwIGEgc2luZ2xlIGVsZW1lbnRhcnlfcGlkIGZvciBhdWRpbyBhbmQgdmlkZW8gc3RyZWFtIHR5cGVzXG4gICAgICAgICAgLy8gVE9ETzogc2hvdWxkIHRoaXMgYmUgZG9uZSBmb3IgbWV0YWRhdGEgdG9vPyBmb3Igbm93IG1haW50YWluIGJlaGF2aW9yIG9mXG4gICAgICAgICAgLy8gICAgICAgbXVsdGlwbGUgbWV0YWRhdGEgc3RyZWFtc1xuXG4gICAgICAgICAgaWYgKHN0cmVhbVR5cGUgPT09IHN0cmVhbVR5cGVzLkgyNjRfU1RSRUFNX1RZUEUgJiYgc2VsZi5wcm9ncmFtTWFwVGFibGUudmlkZW8gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHNlbGYucHJvZ3JhbU1hcFRhYmxlLnZpZGVvID0gcGlkO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3RyZWFtVHlwZSA9PT0gc3RyZWFtVHlwZXMuQURUU19TVFJFQU1fVFlQRSAmJiBzZWxmLnByb2dyYW1NYXBUYWJsZS5hdWRpbyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgc2VsZi5wcm9ncmFtTWFwVGFibGUuYXVkaW8gPSBwaWQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChzdHJlYW1UeXBlID09PSBzdHJlYW1UeXBlcy5NRVRBREFUQV9TVFJFQU1fVFlQRSkge1xuICAgICAgICAgICAgLy8gbWFwIHBpZCB0byBzdHJlYW0gdHlwZSBmb3IgbWV0YWRhdGEgc3RyZWFtc1xuICAgICAgICAgICAgc2VsZi5wcm9ncmFtTWFwVGFibGVbJ3RpbWVkLW1ldGFkYXRhJ11bcGlkXSA9IHN0cmVhbVR5cGU7XG4gICAgICAgICAgfSAvLyBtb3ZlIHRvIHRoZSBuZXh0IHRhYmxlIGVudHJ5XG4gICAgICAgICAgLy8gc2tpcCBwYXN0IHRoZSBlbGVtZW50YXJ5IHN0cmVhbSBkZXNjcmlwdG9ycywgaWYgcHJlc2VudFxuXG5cbiAgICAgICAgICBvZmZzZXQgKz0gKChwYXlsb2FkW29mZnNldCArIDNdICYgMHgwRikgPDwgOCB8IHBheWxvYWRbb2Zmc2V0ICsgNF0pICsgNTtcbiAgICAgICAgfSAvLyByZWNvcmQgdGhlIG1hcCBvbiB0aGUgcGFja2V0IGFzIHdlbGxcblxuXG4gICAgICAgIHBtdC5wcm9ncmFtTWFwVGFibGUgPSBzZWxmLnByb2dyYW1NYXBUYWJsZTtcbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAqIERlbGl2ZXIgYSBuZXcgTVAyVCBwYWNrZXQgdG8gdGhlIG5leHQgc3RyZWFtIGluIHRoZSBwaXBlbGluZS5cbiAgICAgICAqL1xuXG5cbiAgICAgIHRoaXMucHVzaCA9IGZ1bmN0aW9uIChwYWNrZXQpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9LFxuICAgICAgICAgICAgb2Zmc2V0ID0gNDtcbiAgICAgICAgcmVzdWx0LnBheWxvYWRVbml0U3RhcnRJbmRpY2F0b3IgPSAhIShwYWNrZXRbMV0gJiAweDQwKTsgLy8gcGlkIGlzIGEgMTMtYml0IGZpZWxkIHN0YXJ0aW5nIGF0IHRoZSBsYXN0IGJpdCBvZiBwYWNrZXRbMV1cblxuICAgICAgICByZXN1bHQucGlkID0gcGFja2V0WzFdICYgMHgxZjtcbiAgICAgICAgcmVzdWx0LnBpZCA8PD0gODtcbiAgICAgICAgcmVzdWx0LnBpZCB8PSBwYWNrZXRbMl07IC8vIGlmIGFuIGFkYXB0aW9uIGZpZWxkIGlzIHByZXNlbnQsIGl0cyBsZW5ndGggaXMgc3BlY2lmaWVkIGJ5IHRoZVxuICAgICAgICAvLyBmaWZ0aCBieXRlIG9mIHRoZSBUUyBwYWNrZXQgaGVhZGVyLiBUaGUgYWRhcHRhdGlvbiBmaWVsZCBpc1xuICAgICAgICAvLyB1c2VkIHRvIGFkZCBzdHVmZmluZyB0byBQRVMgcGFja2V0cyB0aGF0IGRvbid0IGZpbGwgYSBjb21wbGV0ZVxuICAgICAgICAvLyBUUyBwYWNrZXQsIGFuZCB0byBzcGVjaWZ5IHNvbWUgZm9ybXMgb2YgdGltaW5nIGFuZCBjb250cm9sIGRhdGFcbiAgICAgICAgLy8gdGhhdCB3ZSBkbyBub3QgY3VycmVudGx5IHVzZS5cblxuICAgICAgICBpZiAoKHBhY2tldFszXSAmIDB4MzApID4+PiA0ID4gMHgwMSkge1xuICAgICAgICAgIG9mZnNldCArPSBwYWNrZXRbb2Zmc2V0XSArIDE7XG4gICAgICAgIH0gLy8gcGFyc2UgdGhlIHJlc3Qgb2YgdGhlIHBhY2tldCBiYXNlZCBvbiB0aGUgdHlwZVxuXG5cbiAgICAgICAgaWYgKHJlc3VsdC5waWQgPT09IDApIHtcbiAgICAgICAgICByZXN1bHQudHlwZSA9ICdwYXQnO1xuICAgICAgICAgIHBhcnNlUHNpKHBhY2tldC5zdWJhcnJheShvZmZzZXQpLCByZXN1bHQpO1xuICAgICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIHJlc3VsdCk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnBpZCA9PT0gdGhpcy5wbXRQaWQpIHtcbiAgICAgICAgICByZXN1bHQudHlwZSA9ICdwbXQnO1xuICAgICAgICAgIHBhcnNlUHNpKHBhY2tldC5zdWJhcnJheShvZmZzZXQpLCByZXN1bHQpO1xuICAgICAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIHJlc3VsdCk7IC8vIGlmIHRoZXJlIGFyZSBhbnkgcGFja2V0cyB3YWl0aW5nIGZvciBhIFBNVCB0byBiZSBmb3VuZCwgcHJvY2VzcyB0aGVtIG5vd1xuXG4gICAgICAgICAgd2hpbGUgKHRoaXMucGFja2V0c1dhaXRpbmdGb3JQbXQubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NQZXNfLmFwcGx5KHRoaXMsIHRoaXMucGFja2V0c1dhaXRpbmdGb3JQbXQuc2hpZnQoKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvZ3JhbU1hcFRhYmxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm90IHNlZW4gYSBQTVQgeWV0LCBkZWZlciBmdXJ0aGVyIHByb2Nlc3Npbmcgb2ZcbiAgICAgICAgICAvLyBQRVMgcGFja2V0cyB1bnRpbCBvbmUgaGFzIGJlZW4gcGFyc2VkXG4gICAgICAgICAgdGhpcy5wYWNrZXRzV2FpdGluZ0ZvclBtdC5wdXNoKFtwYWNrZXQsIG9mZnNldCwgcmVzdWx0XSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5wcm9jZXNzUGVzXyhwYWNrZXQsIG9mZnNldCwgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy5wcm9jZXNzUGVzXyA9IGZ1bmN0aW9uIChwYWNrZXQsIG9mZnNldCwgcmVzdWx0KSB7XG4gICAgICAgIC8vIHNldCB0aGUgYXBwcm9wcmlhdGUgc3RyZWFtIHR5cGVcbiAgICAgICAgaWYgKHJlc3VsdC5waWQgPT09IHRoaXMucHJvZ3JhbU1hcFRhYmxlLnZpZGVvKSB7XG4gICAgICAgICAgcmVzdWx0LnN0cmVhbVR5cGUgPSBzdHJlYW1UeXBlcy5IMjY0X1NUUkVBTV9UWVBFO1xuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5waWQgPT09IHRoaXMucHJvZ3JhbU1hcFRhYmxlLmF1ZGlvKSB7XG4gICAgICAgICAgcmVzdWx0LnN0cmVhbVR5cGUgPSBzdHJlYW1UeXBlcy5BRFRTX1NUUkVBTV9UWVBFO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGlmIG5vdCB2aWRlbyBvciBhdWRpbywgaXQgaXMgdGltZWQtbWV0YWRhdGEgb3IgdW5rbm93blxuICAgICAgICAgIC8vIGlmIHVua25vd24sIHN0cmVhbVR5cGUgd2lsbCBiZSB1bmRlZmluZWRcbiAgICAgICAgICByZXN1bHQuc3RyZWFtVHlwZSA9IHRoaXMucHJvZ3JhbU1hcFRhYmxlWyd0aW1lZC1tZXRhZGF0YSddW3Jlc3VsdC5waWRdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0LnR5cGUgPSAncGVzJztcbiAgICAgICAgcmVzdWx0LmRhdGEgPSBwYWNrZXQuc3ViYXJyYXkob2Zmc2V0KTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywgcmVzdWx0KTtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIF9UcmFuc3BvcnRQYXJzZVN0cmVhbS5wcm90b3R5cGUgPSBuZXcgc3RyZWFtKCk7XG4gICAgX1RyYW5zcG9ydFBhcnNlU3RyZWFtLlNUUkVBTV9UWVBFUyA9IHtcbiAgICAgIGgyNjQ6IDB4MWIsXG4gICAgICBhZHRzOiAweDBmXG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWNvbnNpc3R1dGVzIHByb2dyYW0gZWxlbWVudGFyeSBzdHJlYW0gKFBFUykgcGFja2V0cyBmcm9tIHBhcnNlZFxuICAgICAqIHRyYW5zcG9ydCBzdHJlYW0gcGFja2V0cy4gVGhhdCBpcywgaWYgeW91IHBpcGUgYW5cbiAgICAgKiBtcDJ0LlRyYW5zcG9ydFBhcnNlU3RyZWFtIGludG8gYSBtcDJ0LkVsZW1lbnRhcnlTdHJlYW0sIHRoZSBvdXRwdXRcbiAgICAgKiBldmVudHMgd2lsbCBiZSBldmVudHMgd2hpY2ggY2FwdHVyZSB0aGUgYnl0ZXMgZm9yIGluZGl2aWR1YWwgUEVTXG4gICAgICogcGFja2V0cyBwbHVzIHJlbGV2YW50IG1ldGFkYXRhIHRoYXQgaGFzIGJlZW4gZXh0cmFjdGVkIGZyb20gdGhlXG4gICAgICogY29udGFpbmVyLlxuICAgICAqL1xuXG4gICAgX0VsZW1lbnRhcnlTdHJlYW0gPSBmdW5jdGlvbiBFbGVtZW50YXJ5U3RyZWFtKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICAgIC8vIFBFUyBwYWNrZXQgZnJhZ21lbnRzXG4gICAgICB2aWRlbyA9IHtcbiAgICAgICAgZGF0YTogW10sXG4gICAgICAgIHNpemU6IDBcbiAgICAgIH0sXG4gICAgICAgICAgYXVkaW8gPSB7XG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgICBzaXplOiAwXG4gICAgICB9LFxuICAgICAgICAgIHRpbWVkTWV0YWRhdGEgPSB7XG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgICBzaXplOiAwXG4gICAgICB9LFxuICAgICAgICAgIHBhcnNlUGVzID0gZnVuY3Rpb24gcGFyc2VQZXMocGF5bG9hZCwgcGVzKSB7XG4gICAgICAgIHZhciBwdHNEdHNGbGFnczsgLy8gZ2V0IHRoZSBwYWNrZXQgbGVuZ3RoLCB0aGlzIHdpbGwgYmUgMCBmb3IgdmlkZW9cblxuICAgICAgICBwZXMucGFja2V0TGVuZ3RoID0gNiArIChwYXlsb2FkWzRdIDw8IDggfCBwYXlsb2FkWzVdKTsgLy8gZmluZCBvdXQgaWYgdGhpcyBwYWNrZXRzIHN0YXJ0cyBhIG5ldyBrZXlmcmFtZVxuXG4gICAgICAgIHBlcy5kYXRhQWxpZ25tZW50SW5kaWNhdG9yID0gKHBheWxvYWRbNl0gJiAweDA0KSAhPT0gMDsgLy8gUEVTIHBhY2tldHMgbWF5IGJlIGFubm90YXRlZCB3aXRoIGEgUFRTIHZhbHVlLCBvciBhIFBUUyB2YWx1ZVxuICAgICAgICAvLyBhbmQgYSBEVFMgdmFsdWUuIERldGVybWluZSB3aGF0IGNvbWJpbmF0aW9uIG9mIHZhbHVlcyBpc1xuICAgICAgICAvLyBhdmFpbGFibGUgdG8gd29yayB3aXRoLlxuXG4gICAgICAgIHB0c0R0c0ZsYWdzID0gcGF5bG9hZFs3XTsgLy8gUFRTIGFuZCBEVFMgYXJlIG5vcm1hbGx5IHN0b3JlZCBhcyBhIDMzLWJpdCBudW1iZXIuICBKYXZhc2NyaXB0XG4gICAgICAgIC8vIHBlcmZvcm1zIGFsbCBiaXR3aXNlIG9wZXJhdGlvbnMgb24gMzItYml0IGludGVnZXJzIGJ1dCBqYXZhc2NyaXB0XG4gICAgICAgIC8vIHN1cHBvcnRzIGEgbXVjaCBncmVhdGVyIHJhbmdlICg1Mi1iaXRzKSBvZiBpbnRlZ2VyIHVzaW5nIHN0YW5kYXJkXG4gICAgICAgIC8vIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zLlxuICAgICAgICAvLyBXZSBjb25zdHJ1Y3QgYSAzMS1iaXQgdmFsdWUgdXNpbmcgYml0d2lzZSBvcGVyYXRvcnMgb3ZlciB0aGUgMzFcbiAgICAgICAgLy8gbW9zdCBzaWduaWZpY2FudCBiaXRzIGFuZCB0aGVuIG11bHRpcGx5IGJ5IDQgKGVxdWFsIHRvIGEgbGVmdC1zaGlmdFxuICAgICAgICAvLyBvZiAyKSBiZWZvcmUgd2UgYWRkIHRoZSBmaW5hbCAyIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgb2YgdGhlXG4gICAgICAgIC8vIHRpbWVzdGFtcCAoZXF1YWwgdG8gYW4gT1IuKVxuXG4gICAgICAgIGlmIChwdHNEdHNGbGFncyAmIDB4QzApIHtcbiAgICAgICAgICAvLyB0aGUgUFRTIGFuZCBEVFMgYXJlIG5vdCB3cml0dGVuIG91dCBkaXJlY3RseS4gRm9yIGluZm9ybWF0aW9uXG4gICAgICAgICAgLy8gb24gaG93IHRoZXkgYXJlIGVuY29kZWQsIHNlZVxuICAgICAgICAgIC8vIGh0dHA6Ly9kdmQuc291cmNlZm9yZ2UubmV0L2R2ZGluZm8vcGVzLWhkci5odG1sXG4gICAgICAgICAgcGVzLnB0cyA9IChwYXlsb2FkWzldICYgMHgwRSkgPDwgMjcgfCAocGF5bG9hZFsxMF0gJiAweEZGKSA8PCAyMCB8IChwYXlsb2FkWzExXSAmIDB4RkUpIDw8IDEyIHwgKHBheWxvYWRbMTJdICYgMHhGRikgPDwgNSB8IChwYXlsb2FkWzEzXSAmIDB4RkUpID4+PiAzO1xuICAgICAgICAgIHBlcy5wdHMgKj0gNDsgLy8gTGVmdCBzaGlmdCBieSAyXG5cbiAgICAgICAgICBwZXMucHRzICs9IChwYXlsb2FkWzEzXSAmIDB4MDYpID4+PiAxOyAvLyBPUiBieSB0aGUgdHdvIExTQnNcblxuICAgICAgICAgIHBlcy5kdHMgPSBwZXMucHRzO1xuXG4gICAgICAgICAgaWYgKHB0c0R0c0ZsYWdzICYgMHg0MCkge1xuICAgICAgICAgICAgcGVzLmR0cyA9IChwYXlsb2FkWzE0XSAmIDB4MEUpIDw8IDI3IHwgKHBheWxvYWRbMTVdICYgMHhGRikgPDwgMjAgfCAocGF5bG9hZFsxNl0gJiAweEZFKSA8PCAxMiB8IChwYXlsb2FkWzE3XSAmIDB4RkYpIDw8IDUgfCAocGF5bG9hZFsxOF0gJiAweEZFKSA+Pj4gMztcbiAgICAgICAgICAgIHBlcy5kdHMgKj0gNDsgLy8gTGVmdCBzaGlmdCBieSAyXG5cbiAgICAgICAgICAgIHBlcy5kdHMgKz0gKHBheWxvYWRbMThdICYgMHgwNikgPj4+IDE7IC8vIE9SIGJ5IHRoZSB0d28gTFNCc1xuICAgICAgICAgIH1cbiAgICAgICAgfSAvLyB0aGUgZGF0YSBzZWN0aW9uIHN0YXJ0cyBpbW1lZGlhdGVseSBhZnRlciB0aGUgUEVTIGhlYWRlci5cbiAgICAgICAgLy8gcGVzX2hlYWRlcl9kYXRhX2xlbmd0aCBzcGVjaWZpZXMgdGhlIG51bWJlciBvZiBoZWFkZXIgYnl0ZXNcbiAgICAgICAgLy8gdGhhdCBmb2xsb3cgdGhlIGxhc3QgYnl0ZSBvZiB0aGUgZmllbGQuXG5cblxuICAgICAgICBwZXMuZGF0YSA9IHBheWxvYWQuc3ViYXJyYXkoOSArIHBheWxvYWRbOF0pO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgICogUGFzcyBjb21wbGV0ZWx5IHBhcnNlZCBQRVMgcGFja2V0cyB0byB0aGUgbmV4dCBzdHJlYW0gaW4gdGhlIHBpcGVsaW5lXG4gICAgICAgKiovXG4gICAgICBmbHVzaFN0cmVhbSA9IGZ1bmN0aW9uIGZsdXNoU3RyZWFtKHN0cmVhbSQkMSwgdHlwZSwgZm9yY2VGbHVzaCkge1xuICAgICAgICB2YXIgcGFja2V0RGF0YSA9IG5ldyBVaW50OEFycmF5KHN0cmVhbSQkMS5zaXplKSxcbiAgICAgICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6IHR5cGVcbiAgICAgICAgfSxcbiAgICAgICAgICAgIGkgPSAwLFxuICAgICAgICAgICAgb2Zmc2V0ID0gMCxcbiAgICAgICAgICAgIHBhY2tldEZsdXNoYWJsZSA9IGZhbHNlLFxuICAgICAgICAgICAgZnJhZ21lbnQ7IC8vIGRvIG5vdGhpbmcgaWYgdGhlcmUgaXMgbm90IGVub3VnaCBidWZmZXJlZCBkYXRhIGZvciBhIGNvbXBsZXRlXG4gICAgICAgIC8vIFBFUyBoZWFkZXJcblxuICAgICAgICBpZiAoIXN0cmVhbSQkMS5kYXRhLmxlbmd0aCB8fCBzdHJlYW0kJDEuc2l6ZSA8IDkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBldmVudC50cmFja0lkID0gc3RyZWFtJCQxLmRhdGFbMF0ucGlkOyAvLyByZWFzc2VtYmxlIHRoZSBwYWNrZXRcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc3RyZWFtJCQxLmRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBmcmFnbWVudCA9IHN0cmVhbSQkMS5kYXRhW2ldO1xuICAgICAgICAgIHBhY2tldERhdGEuc2V0KGZyYWdtZW50LmRhdGEsIG9mZnNldCk7XG4gICAgICAgICAgb2Zmc2V0ICs9IGZyYWdtZW50LmRhdGEuYnl0ZUxlbmd0aDtcbiAgICAgICAgfSAvLyBwYXJzZSBhc3NlbWJsZWQgcGFja2V0J3MgUEVTIGhlYWRlclxuXG5cbiAgICAgICAgcGFyc2VQZXMocGFja2V0RGF0YSwgZXZlbnQpOyAvLyBub24tdmlkZW8gUEVTIHBhY2tldHMgTVVTVCBoYXZlIGEgbm9uLXplcm8gUEVTX3BhY2tldF9sZW5ndGhcbiAgICAgICAgLy8gY2hlY2sgdGhhdCB0aGVyZSBpcyBlbm91Z2ggc3RyZWFtIGRhdGEgdG8gZmlsbCB0aGUgcGFja2V0XG5cbiAgICAgICAgcGFja2V0Rmx1c2hhYmxlID0gdHlwZSA9PT0gJ3ZpZGVvJyB8fCBldmVudC5wYWNrZXRMZW5ndGggPD0gc3RyZWFtJCQxLnNpemU7IC8vIGZsdXNoIHBlbmRpbmcgcGFja2V0cyBpZiB0aGUgY29uZGl0aW9ucyBhcmUgcmlnaHRcblxuICAgICAgICBpZiAoZm9yY2VGbHVzaCB8fCBwYWNrZXRGbHVzaGFibGUpIHtcbiAgICAgICAgICBzdHJlYW0kJDEuc2l6ZSA9IDA7XG4gICAgICAgICAgc3RyZWFtJCQxLmRhdGEubGVuZ3RoID0gMDtcbiAgICAgICAgfSAvLyBvbmx5IGVtaXQgcGFja2V0cyB0aGF0IGFyZSBjb21wbGV0ZS4gdGhpcyBpcyB0byBhdm9pZCBhc3NlbWJsaW5nXG4gICAgICAgIC8vIGluY29tcGxldGUgUEVTIHBhY2tldHMgZHVlIHRvIHBvb3Igc2VnbWVudGF0aW9uXG5cblxuICAgICAgICBpZiAocGFja2V0Rmx1c2hhYmxlKSB7XG4gICAgICAgICAgc2VsZi50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBfRWxlbWVudGFyeVN0cmVhbS5wcm90b3R5cGUuaW5pdC5jYWxsKHRoaXMpO1xuICAgICAgLyoqXG4gICAgICAgKiBJZGVudGlmaWVzIE0yVFMgcGFja2V0IHR5cGVzIGFuZCBwYXJzZXMgUEVTIHBhY2tldHMgdXNpbmcgbWV0YWRhdGFcbiAgICAgICAqIHBhcnNlZCBmcm9tIHRoZSBQTVRcbiAgICAgICAqKi9cblxuXG4gICAgICB0aGlzLnB1c2ggPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAoe1xuICAgICAgICAgIHBhdDogZnVuY3Rpb24gcGF0KCkgey8vIHdlIGhhdmUgdG8gd2FpdCBmb3IgdGhlIFBNVCB0byBhcnJpdmUgYXMgd2VsbCBiZWZvcmUgd2VcbiAgICAgICAgICAgIC8vIGhhdmUgYW55IG1lYW5pbmdmdWwgbWV0YWRhdGFcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBlczogZnVuY3Rpb24gcGVzKCkge1xuICAgICAgICAgICAgdmFyIHN0cmVhbSQkMSwgc3RyZWFtVHlwZTtcblxuICAgICAgICAgICAgc3dpdGNoIChkYXRhLnN0cmVhbVR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBzdHJlYW1UeXBlcy5IMjY0X1NUUkVBTV9UWVBFOlxuICAgICAgICAgICAgICBjYXNlIHN0cmVhbVR5cGVzLkgyNjRfU1RSRUFNX1RZUEU6XG4gICAgICAgICAgICAgICAgc3RyZWFtJCQxID0gdmlkZW87XG4gICAgICAgICAgICAgICAgc3RyZWFtVHlwZSA9ICd2aWRlbyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBzdHJlYW1UeXBlcy5BRFRTX1NUUkVBTV9UWVBFOlxuICAgICAgICAgICAgICAgIHN0cmVhbSQkMSA9IGF1ZGlvO1xuICAgICAgICAgICAgICAgIHN0cmVhbVR5cGUgPSAnYXVkaW8nO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2Ugc3RyZWFtVHlwZXMuTUVUQURBVEFfU1RSRUFNX1RZUEU6XG4gICAgICAgICAgICAgICAgc3RyZWFtJCQxID0gdGltZWRNZXRhZGF0YTtcbiAgICAgICAgICAgICAgICBzdHJlYW1UeXBlID0gJ3RpbWVkLW1ldGFkYXRhJztcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIGlnbm9yZSB1bmtub3duIHN0cmVhbSB0eXBlc1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gLy8gaWYgYSBuZXcgcGFja2V0IGlzIHN0YXJ0aW5nLCB3ZSBjYW4gZmx1c2ggdGhlIGNvbXBsZXRlZFxuICAgICAgICAgICAgLy8gcGFja2V0XG5cblxuICAgICAgICAgICAgaWYgKGRhdGEucGF5bG9hZFVuaXRTdGFydEluZGljYXRvcikge1xuICAgICAgICAgICAgICBmbHVzaFN0cmVhbShzdHJlYW0kJDEsIHN0cmVhbVR5cGUsIHRydWUpO1xuICAgICAgICAgICAgfSAvLyBidWZmZXIgdGhpcyBmcmFnbWVudCB1bnRpbCB3ZSBhcmUgc3VyZSB3ZSd2ZSByZWNlaXZlZCB0aGVcbiAgICAgICAgICAgIC8vIGNvbXBsZXRlIHBheWxvYWRcblxuXG4gICAgICAgICAgICBzdHJlYW0kJDEuZGF0YS5wdXNoKGRhdGEpO1xuICAgICAgICAgICAgc3RyZWFtJCQxLnNpemUgKz0gZGF0YS5kYXRhLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBwbXQ6IGZ1bmN0aW9uIHBtdCgpIHtcbiAgICAgICAgICAgIHZhciBldmVudCA9IHtcbiAgICAgICAgICAgICAgdHlwZTogJ21ldGFkYXRhJyxcbiAgICAgICAgICAgICAgdHJhY2tzOiBbXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcm9ncmFtTWFwVGFibGUgPSBkYXRhLnByb2dyYW1NYXBUYWJsZTsgLy8gdHJhbnNsYXRlIGF1ZGlvIGFuZCB2aWRlbyBzdHJlYW1zIHRvIHRyYWNrc1xuXG4gICAgICAgICAgICBpZiAocHJvZ3JhbU1hcFRhYmxlLnZpZGVvICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIGV2ZW50LnRyYWNrcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0aW1lbGluZVN0YXJ0SW5mbzoge1xuICAgICAgICAgICAgICAgICAgYmFzZU1lZGlhRGVjb2RlVGltZTogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaWQ6ICtwcm9ncmFtTWFwVGFibGUudmlkZW8sXG4gICAgICAgICAgICAgICAgY29kZWM6ICdhdmMnLFxuICAgICAgICAgICAgICAgIHR5cGU6ICd2aWRlbydcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwcm9ncmFtTWFwVGFibGUuYXVkaW8gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgZXZlbnQudHJhY2tzLnB1c2goe1xuICAgICAgICAgICAgICAgIHRpbWVsaW5lU3RhcnRJbmZvOiB7XG4gICAgICAgICAgICAgICAgICBiYXNlTWVkaWFEZWNvZGVUaW1lOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpZDogK3Byb2dyYW1NYXBUYWJsZS5hdWRpbyxcbiAgICAgICAgICAgICAgICBjb2RlYzogJ2FkdHMnLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdhdWRpbydcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pW2RhdGEudHlwZV0oKTtcbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAqIEZsdXNoIGFueSByZW1haW5pbmcgaW5wdXQuIFZpZGVvIFBFUyBwYWNrZXRzIG1heSBiZSBvZiB2YXJpYWJsZVxuICAgICAgICogbGVuZ3RoLiBOb3JtYWxseSwgdGhlIHN0YXJ0IG9mIGEgbmV3IHZpZGVvIHBhY2tldCBjYW4gdHJpZ2dlciB0aGVcbiAgICAgICAqIGZpbmFsaXphdGlvbiBvZiB0aGUgcHJldmlvdXMgcGFja2V0LiBUaGF0IGlzIG5vdCBwb3NzaWJsZSBpZiBub1xuICAgICAgICogbW9yZSB2aWRlbyBpcyBmb3J0aGNvbWluZywgaG93ZXZlci4gSW4gdGhhdCBjYXNlLCBzb21lIG90aGVyXG4gICAgICAgKiBtZWNoYW5pc20gKGxpa2UgdGhlIGVuZCBvZiB0aGUgZmlsZSkgaGFzIHRvIGJlIGVtcGxveWVkLiBXaGVuIGl0IGlzXG4gICAgICAgKiBjbGVhciB0aGF0IG5vIGFkZGl0aW9uYWwgZGF0YSBpcyBmb3J0aGNvbWluZywgY2FsbGluZyB0aGlzIG1ldGhvZFxuICAgICAgICogd2lsbCBmbHVzaCB0aGUgYnVmZmVyZWQgcGFja2V0cy5cbiAgICAgICAqL1xuXG5cbiAgICAgIHRoaXMuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vICEhVEhJUyBPUkRFUiBJUyBJTVBPUlRBTlQhIVxuICAgICAgICAvLyB2aWRlbyBmaXJzdCB0aGVuIGF1ZGlvXG4gICAgICAgIGZsdXNoU3RyZWFtKHZpZGVvLCAndmlkZW8nKTtcbiAgICAgICAgZmx1c2hTdHJlYW0oYXVkaW8sICdhdWRpbycpO1xuICAgICAgICBmbHVzaFN0cmVhbSh0aW1lZE1ldGFkYXRhLCAndGltZWQtbWV0YWRhdGEnKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdkb25lJyk7XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBfRWxlbWVudGFyeVN0cmVhbS5wcm90b3R5cGUgPSBuZXcgc3RyZWFtKCk7XG4gICAgdmFyIG0ydHMgPSB7XG4gICAgICBQQVRfUElEOiAweDAwMDAsXG4gICAgICBNUDJUX1BBQ0tFVF9MRU5HVEg6IE1QMlRfUEFDS0VUX0xFTkdUSCxcbiAgICAgIFRyYW5zcG9ydFBhY2tldFN0cmVhbTogX1RyYW5zcG9ydFBhY2tldFN0cmVhbSxcbiAgICAgIFRyYW5zcG9ydFBhcnNlU3RyZWFtOiBfVHJhbnNwb3J0UGFyc2VTdHJlYW0sXG4gICAgICBFbGVtZW50YXJ5U3RyZWFtOiBfRWxlbWVudGFyeVN0cmVhbSxcbiAgICAgIFRpbWVzdGFtcFJvbGxvdmVyU3RyZWFtOiBUaW1lc3RhbXBSb2xsb3ZlclN0cmVhbSQxLFxuICAgICAgQ2FwdGlvblN0cmVhbTogY2FwdGlvblN0cmVhbS5DYXB0aW9uU3RyZWFtLFxuICAgICAgQ2VhNjA4U3RyZWFtOiBjYXB0aW9uU3RyZWFtLkNlYTYwOFN0cmVhbSxcbiAgICAgIE1ldGFkYXRhU3RyZWFtOiBtZXRhZGF0YVN0cmVhbVxuICAgIH07XG5cbiAgICBmb3IgKHZhciB0eXBlIGluIHN0cmVhbVR5cGVzKSB7XG4gICAgICBpZiAoc3RyZWFtVHlwZXMuaGFzT3duUHJvcGVydHkodHlwZSkpIHtcbiAgICAgICAgbTJ0c1t0eXBlXSA9IHN0cmVhbVR5cGVzW3R5cGVdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBtMnRzXzEgPSBtMnRzO1xuXG4gICAgdmFyIF9BZHRzU3RyZWFtO1xuXG4gICAgdmFyIEFEVFNfU0FNUExJTkdfRlJFUVVFTkNJRVMgPSBbOTYwMDAsIDg4MjAwLCA2NDAwMCwgNDgwMDAsIDQ0MTAwLCAzMjAwMCwgMjQwMDAsIDIyMDUwLCAxNjAwMCwgMTIwMDAsIDExMDI1LCA4MDAwLCA3MzUwXTtcbiAgICAvKlxuICAgICAqIEFjY2VwdHMgYSBFbGVtZW50YXJ5U3RyZWFtIGFuZCBlbWl0cyBkYXRhIGV2ZW50cyB3aXRoIHBhcnNlZFxuICAgICAqIEFBQyBBdWRpbyBGcmFtZXMgb2YgdGhlIGluZGl2aWR1YWwgcGFja2V0cy4gSW5wdXQgYXVkaW8gaW4gQURUU1xuICAgICAqIGZvcm1hdCBpcyB1bnBhY2tlZCBhbmQgcmUtZW1pdHRlZCBhcyBBQUMgZnJhbWVzLlxuICAgICAqXG4gICAgICogQHNlZSBodHRwOi8vd2lraS5tdWx0aW1lZGlhLmN4L2luZGV4LnBocD90aXRsZT1BRFRTXG4gICAgICogQHNlZSBodHRwOi8vd2lraS5tdWx0aW1lZGlhLmN4Lz90aXRsZT1VbmRlcnN0YW5kaW5nX0FBQ1xuICAgICAqL1xuXG4gICAgX0FkdHNTdHJlYW0gPSBmdW5jdGlvbiBBZHRzU3RyZWFtKCkge1xuICAgICAgdmFyIGJ1ZmZlcjtcblxuICAgICAgX0FkdHNTdHJlYW0ucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzKTtcblxuICAgICAgdGhpcy5wdXNoID0gZnVuY3Rpb24gKHBhY2tldCkge1xuICAgICAgICB2YXIgaSA9IDAsXG4gICAgICAgICAgICBmcmFtZU51bSA9IDAsXG4gICAgICAgICAgICBmcmFtZUxlbmd0aCxcbiAgICAgICAgICAgIHByb3RlY3Rpb25Ta2lwQnl0ZXMsXG4gICAgICAgICAgICBmcmFtZUVuZCxcbiAgICAgICAgICAgIG9sZEJ1ZmZlcixcbiAgICAgICAgICAgIHNhbXBsZUNvdW50LFxuICAgICAgICAgICAgYWR0c0ZyYW1lRHVyYXRpb247XG5cbiAgICAgICAgaWYgKHBhY2tldC50eXBlICE9PSAnYXVkaW8nKSB7XG4gICAgICAgICAgLy8gaWdub3JlIG5vbi1hdWRpbyBkYXRhXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIFByZXBlbmQgYW55IGRhdGEgaW4gdGhlIGJ1ZmZlciB0byB0aGUgaW5wdXQgZGF0YSBzbyB0aGF0IHdlIGNhbiBwYXJzZVxuICAgICAgICAvLyBhYWMgZnJhbWVzIHRoZSBjcm9zcyBhIFBFUyBwYWNrZXQgYm91bmRhcnlcblxuXG4gICAgICAgIGlmIChidWZmZXIpIHtcbiAgICAgICAgICBvbGRCdWZmZXIgPSBidWZmZXI7XG4gICAgICAgICAgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkob2xkQnVmZmVyLmJ5dGVMZW5ndGggKyBwYWNrZXQuZGF0YS5ieXRlTGVuZ3RoKTtcbiAgICAgICAgICBidWZmZXIuc2V0KG9sZEJ1ZmZlcik7XG4gICAgICAgICAgYnVmZmVyLnNldChwYWNrZXQuZGF0YSwgb2xkQnVmZmVyLmJ5dGVMZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJ1ZmZlciA9IHBhY2tldC5kYXRhO1xuICAgICAgICB9IC8vIHVucGFjayBhbnkgQURUUyBmcmFtZXMgd2hpY2ggaGF2ZSBiZWVuIGZ1bGx5IHJlY2VpdmVkXG4gICAgICAgIC8vIGZvciBkZXRhaWxzIG9uIHRoZSBBRFRTIGhlYWRlciwgc2VlIGh0dHA6Ly93aWtpLm11bHRpbWVkaWEuY3gvaW5kZXgucGhwP3RpdGxlPUFEVFNcblxuXG4gICAgICAgIHdoaWxlIChpICsgNSA8IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICAvLyBMb29vayBmb3IgdGhlIHN0YXJ0IG9mIGFuIEFEVFMgaGVhZGVyLi5cbiAgICAgICAgICBpZiAoYnVmZmVyW2ldICE9PSAweEZGIHx8IChidWZmZXJbaSArIDFdICYgMHhGNikgIT09IDB4RjApIHtcbiAgICAgICAgICAgIC8vIElmIGEgdmFsaWQgaGVhZGVyIHdhcyBub3QgZm91bmQsICBqdW1wIG9uZSBmb3J3YXJkIGFuZCBhdHRlbXB0IHRvXG4gICAgICAgICAgICAvLyBmaW5kIGEgdmFsaWQgQURUUyBoZWFkZXIgc3RhcnRpbmcgYXQgdGhlIG5leHQgYnl0ZVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfSAvLyBUaGUgcHJvdGVjdGlvbiBza2lwIGJpdCB0ZWxscyB1cyBpZiB3ZSBoYXZlIDIgYnl0ZXMgb2YgQ1JDIGRhdGEgYXQgdGhlXG4gICAgICAgICAgLy8gZW5kIG9mIHRoZSBBRFRTIGhlYWRlclxuXG5cbiAgICAgICAgICBwcm90ZWN0aW9uU2tpcEJ5dGVzID0gKH5idWZmZXJbaSArIDFdICYgMHgwMSkgKiAyOyAvLyBGcmFtZSBsZW5ndGggaXMgYSAxMyBiaXQgaW50ZWdlciBzdGFydGluZyAxNiBiaXRzIGZyb20gdGhlXG4gICAgICAgICAgLy8gZW5kIG9mIHRoZSBzeW5jIHNlcXVlbmNlXG5cbiAgICAgICAgICBmcmFtZUxlbmd0aCA9IChidWZmZXJbaSArIDNdICYgMHgwMykgPDwgMTEgfCBidWZmZXJbaSArIDRdIDw8IDMgfCAoYnVmZmVyW2kgKyA1XSAmIDB4ZTApID4+IDU7XG4gICAgICAgICAgc2FtcGxlQ291bnQgPSAoKGJ1ZmZlcltpICsgNl0gJiAweDAzKSArIDEpICogMTAyNDtcbiAgICAgICAgICBhZHRzRnJhbWVEdXJhdGlvbiA9IHNhbXBsZUNvdW50ICogOTAwMDAgLyBBRFRTX1NBTVBMSU5HX0ZSRVFVRU5DSUVTWyhidWZmZXJbaSArIDJdICYgMHgzYykgPj4+IDJdO1xuICAgICAgICAgIGZyYW1lRW5kID0gaSArIGZyYW1lTGVuZ3RoOyAvLyBJZiB3ZSBkb24ndCBoYXZlIGVub3VnaCBkYXRhIHRvIGFjdHVhbGx5IGZpbmlzaCB0aGlzIEFEVFMgZnJhbWUsIHJldHVyblxuICAgICAgICAgIC8vIGFuZCB3YWl0IGZvciBtb3JlIGRhdGFcblxuICAgICAgICAgIGlmIChidWZmZXIuYnl0ZUxlbmd0aCA8IGZyYW1lRW5kKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSAvLyBPdGhlcndpc2UsIGRlbGl2ZXIgdGhlIGNvbXBsZXRlIEFBQyBmcmFtZVxuXG5cbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2RhdGEnLCB7XG4gICAgICAgICAgICBwdHM6IHBhY2tldC5wdHMgKyBmcmFtZU51bSAqIGFkdHNGcmFtZUR1cmF0aW9uLFxuICAgICAgICAgICAgZHRzOiBwYWNrZXQuZHRzICsgZnJhbWVOdW0gKiBhZHRzRnJhbWVEdXJhdGlvbixcbiAgICAgICAgICAgIHNhbXBsZUNvdW50OiBzYW1wbGVDb3VudCxcbiAgICAgICAgICAgIGF1ZGlvb2JqZWN0dHlwZTogKGJ1ZmZlcltpICsgMl0gPj4+IDYgJiAweDAzKSArIDEsXG4gICAgICAgICAgICBjaGFubmVsY291bnQ6IChidWZmZXJbaSArIDJdICYgMSkgPDwgMiB8IChidWZmZXJbaSArIDNdICYgMHhjMCkgPj4+IDYsXG4gICAgICAgICAgICBzYW1wbGVyYXRlOiBBRFRTX1NBTVBMSU5HX0ZSRVFVRU5DSUVTWyhidWZmZXJbaSArIDJdICYgMHgzYykgPj4+IDJdLFxuICAgICAgICAgICAgc2FtcGxpbmdmcmVxdWVuY3lpbmRleDogKGJ1ZmZlcltpICsgMl0gJiAweDNjKSA+Pj4gMixcbiAgICAgICAgICAgIC8vIGFzc3VtZSBJU08vSUVDIDE0NDk2LTEyIEF1ZGlvU2FtcGxlRW50cnkgZGVmYXVsdCBvZiAxNlxuICAgICAgICAgICAgc2FtcGxlc2l6ZTogMTYsXG4gICAgICAgICAgICBkYXRhOiBidWZmZXIuc3ViYXJyYXkoaSArIDcgKyBwcm90ZWN0aW9uU2tpcEJ5dGVzLCBmcmFtZUVuZClcbiAgICAgICAgICB9KTsgLy8gSWYgdGhlIGJ1ZmZlciBpcyBlbXB0eSwgY2xlYXIgaXQgYW5kIHJldHVyblxuXG4gICAgICAgICAgaWYgKGJ1ZmZlci5ieXRlTGVuZ3RoID09PSBmcmFtZUVuZCkge1xuICAgICAgICAgICAgYnVmZmVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZyYW1lTnVtKys7IC8vIFJlbW92ZSB0aGUgZmluaXNoZWQgZnJhbWUgZnJvbSB0aGUgYnVmZmVyIGFuZCBzdGFydCB0aGUgcHJvY2VzcyBhZ2FpblxuXG4gICAgICAgICAgYnVmZmVyID0gYnVmZmVyLnN1YmFycmF5KGZyYW1lRW5kKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdkb25lJyk7XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBfQWR0c1N0cmVhbS5wcm90b3R5cGUgPSBuZXcgc3RyZWFtKCk7XG4gICAgdmFyIGFkdHMgPSBfQWR0c1N0cmVhbTtcbiAgICB2YXIgRXhwR29sb21iO1xuICAgIC8qKlxuICAgICAqIFBhcnNlciBmb3IgZXhwb25lbnRpYWwgR29sb21iIGNvZGVzLCBhIHZhcmlhYmxlLWJpdHdpZHRoIG51bWJlciBlbmNvZGluZ1xuICAgICAqIHNjaGVtZSB1c2VkIGJ5IGgyNjQuXG4gICAgICovXG5cbiAgICBFeHBHb2xvbWIgPSBmdW5jdGlvbiBFeHBHb2xvbWIod29ya2luZ0RhdGEpIHtcbiAgICAgIHZhciAvLyB0aGUgbnVtYmVyIG9mIGJ5dGVzIGxlZnQgdG8gZXhhbWluZSBpbiB3b3JraW5nRGF0YVxuICAgICAgd29ya2luZ0J5dGVzQXZhaWxhYmxlID0gd29ya2luZ0RhdGEuYnl0ZUxlbmd0aCxcbiAgICAgICAgICAvLyB0aGUgY3VycmVudCB3b3JkIGJlaW5nIGV4YW1pbmVkXG4gICAgICB3b3JraW5nV29yZCA9IDAsXG4gICAgICAgICAgLy8gOnVpbnRcbiAgICAgIC8vIHRoZSBudW1iZXIgb2YgYml0cyBsZWZ0IHRvIGV4YW1pbmUgaW4gdGhlIGN1cnJlbnQgd29yZFxuICAgICAgd29ya2luZ0JpdHNBdmFpbGFibGUgPSAwOyAvLyA6dWludDtcbiAgICAgIC8vICgpOnVpbnRcblxuICAgICAgdGhpcy5sZW5ndGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiA4ICogd29ya2luZ0J5dGVzQXZhaWxhYmxlO1xuICAgICAgfTsgLy8gKCk6dWludFxuXG5cbiAgICAgIHRoaXMuYml0c0F2YWlsYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIDggKiB3b3JraW5nQnl0ZXNBdmFpbGFibGUgKyB3b3JraW5nQml0c0F2YWlsYWJsZTtcbiAgICAgIH07IC8vICgpOnZvaWRcblxuXG4gICAgICB0aGlzLmxvYWRXb3JkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcG9zaXRpb24gPSB3b3JraW5nRGF0YS5ieXRlTGVuZ3RoIC0gd29ya2luZ0J5dGVzQXZhaWxhYmxlLFxuICAgICAgICAgICAgd29ya2luZ0J5dGVzID0gbmV3IFVpbnQ4QXJyYXkoNCksXG4gICAgICAgICAgICBhdmFpbGFibGVCeXRlcyA9IE1hdGgubWluKDQsIHdvcmtpbmdCeXRlc0F2YWlsYWJsZSk7XG5cbiAgICAgICAgaWYgKGF2YWlsYWJsZUJ5dGVzID09PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyBieXRlcyBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdvcmtpbmdCeXRlcy5zZXQod29ya2luZ0RhdGEuc3ViYXJyYXkocG9zaXRpb24sIHBvc2l0aW9uICsgYXZhaWxhYmxlQnl0ZXMpKTtcbiAgICAgICAgd29ya2luZ1dvcmQgPSBuZXcgRGF0YVZpZXcod29ya2luZ0J5dGVzLmJ1ZmZlcikuZ2V0VWludDMyKDApOyAvLyB0cmFjayB0aGUgYW1vdW50IG9mIHdvcmtpbmdEYXRhIHRoYXQgaGFzIGJlZW4gcHJvY2Vzc2VkXG5cbiAgICAgICAgd29ya2luZ0JpdHNBdmFpbGFibGUgPSBhdmFpbGFibGVCeXRlcyAqIDg7XG4gICAgICAgIHdvcmtpbmdCeXRlc0F2YWlsYWJsZSAtPSBhdmFpbGFibGVCeXRlcztcbiAgICAgIH07IC8vIChjb3VudDppbnQpOnZvaWRcblxuXG4gICAgICB0aGlzLnNraXBCaXRzID0gZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgICAgIHZhciBza2lwQnl0ZXM7IC8vIDppbnRcblxuICAgICAgICBpZiAod29ya2luZ0JpdHNBdmFpbGFibGUgPiBjb3VudCkge1xuICAgICAgICAgIHdvcmtpbmdXb3JkIDw8PSBjb3VudDtcbiAgICAgICAgICB3b3JraW5nQml0c0F2YWlsYWJsZSAtPSBjb3VudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb3VudCAtPSB3b3JraW5nQml0c0F2YWlsYWJsZTtcbiAgICAgICAgICBza2lwQnl0ZXMgPSBNYXRoLmZsb29yKGNvdW50IC8gOCk7XG4gICAgICAgICAgY291bnQgLT0gc2tpcEJ5dGVzICogODtcbiAgICAgICAgICB3b3JraW5nQnl0ZXNBdmFpbGFibGUgLT0gc2tpcEJ5dGVzO1xuICAgICAgICAgIHRoaXMubG9hZFdvcmQoKTtcbiAgICAgICAgICB3b3JraW5nV29yZCA8PD0gY291bnQ7XG4gICAgICAgICAgd29ya2luZ0JpdHNBdmFpbGFibGUgLT0gY291bnQ7XG4gICAgICAgIH1cbiAgICAgIH07IC8vIChzaXplOmludCk6dWludFxuXG5cbiAgICAgIHRoaXMucmVhZEJpdHMgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICB2YXIgYml0cyA9IE1hdGgubWluKHdvcmtpbmdCaXRzQXZhaWxhYmxlLCBzaXplKSxcbiAgICAgICAgICAgIC8vIDp1aW50XG4gICAgICAgIHZhbHUgPSB3b3JraW5nV29yZCA+Pj4gMzIgLSBiaXRzOyAvLyA6dWludFxuICAgICAgICAvLyBpZiBzaXplID4gMzEsIGhhbmRsZSBlcnJvclxuXG4gICAgICAgIHdvcmtpbmdCaXRzQXZhaWxhYmxlIC09IGJpdHM7XG5cbiAgICAgICAgaWYgKHdvcmtpbmdCaXRzQXZhaWxhYmxlID4gMCkge1xuICAgICAgICAgIHdvcmtpbmdXb3JkIDw8PSBiaXRzO1xuICAgICAgICB9IGVsc2UgaWYgKHdvcmtpbmdCeXRlc0F2YWlsYWJsZSA+IDApIHtcbiAgICAgICAgICB0aGlzLmxvYWRXb3JkKCk7XG4gICAgICAgIH1cblxuICAgICAgICBiaXRzID0gc2l6ZSAtIGJpdHM7XG5cbiAgICAgICAgaWYgKGJpdHMgPiAwKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHUgPDwgYml0cyB8IHRoaXMucmVhZEJpdHMoYml0cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdTtcbiAgICAgIH07IC8vICgpOnVpbnRcblxuXG4gICAgICB0aGlzLnNraXBMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsZWFkaW5nWmVyb0NvdW50OyAvLyA6dWludFxuXG4gICAgICAgIGZvciAobGVhZGluZ1plcm9Db3VudCA9IDA7IGxlYWRpbmdaZXJvQ291bnQgPCB3b3JraW5nQml0c0F2YWlsYWJsZTsgKytsZWFkaW5nWmVyb0NvdW50KSB7XG4gICAgICAgICAgaWYgKCh3b3JraW5nV29yZCAmIDB4ODAwMDAwMDAgPj4+IGxlYWRpbmdaZXJvQ291bnQpICE9PSAwKSB7XG4gICAgICAgICAgICAvLyB0aGUgZmlyc3QgYml0IG9mIHdvcmtpbmcgd29yZCBpcyAxXG4gICAgICAgICAgICB3b3JraW5nV29yZCA8PD0gbGVhZGluZ1plcm9Db3VudDtcbiAgICAgICAgICAgIHdvcmtpbmdCaXRzQXZhaWxhYmxlIC09IGxlYWRpbmdaZXJvQ291bnQ7XG4gICAgICAgICAgICByZXR1cm4gbGVhZGluZ1plcm9Db3VudDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gLy8gd2UgZXhoYXVzdGVkIHdvcmtpbmdXb3JkIGFuZCBzdGlsbCBoYXZlIG5vdCBmb3VuZCBhIDFcblxuXG4gICAgICAgIHRoaXMubG9hZFdvcmQoKTtcbiAgICAgICAgcmV0dXJuIGxlYWRpbmdaZXJvQ291bnQgKyB0aGlzLnNraXBMZWFkaW5nWmVyb3MoKTtcbiAgICAgIH07IC8vICgpOnZvaWRcblxuXG4gICAgICB0aGlzLnNraXBVbnNpZ25lZEV4cEdvbG9tYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5za2lwQml0cygxICsgdGhpcy5za2lwTGVhZGluZ1plcm9zKCkpO1xuICAgICAgfTsgLy8gKCk6dm9pZFxuXG5cbiAgICAgIHRoaXMuc2tpcEV4cEdvbG9tYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5za2lwQml0cygxICsgdGhpcy5za2lwTGVhZGluZ1plcm9zKCkpO1xuICAgICAgfTsgLy8gKCk6dWludFxuXG5cbiAgICAgIHRoaXMucmVhZFVuc2lnbmVkRXhwR29sb21iID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2x6ID0gdGhpcy5za2lwTGVhZGluZ1plcm9zKCk7IC8vIDp1aW50XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZEJpdHMoY2x6ICsgMSkgLSAxO1xuICAgICAgfTsgLy8gKCk6aW50XG5cblxuICAgICAgdGhpcy5yZWFkRXhwR29sb21iID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmFsdSA9IHRoaXMucmVhZFVuc2lnbmVkRXhwR29sb21iKCk7IC8vIDppbnRcblxuICAgICAgICBpZiAoMHgwMSAmIHZhbHUpIHtcbiAgICAgICAgICAvLyB0aGUgbnVtYmVyIGlzIG9kZCBpZiB0aGUgbG93IG9yZGVyIGJpdCBpcyBzZXRcbiAgICAgICAgICByZXR1cm4gMSArIHZhbHUgPj4+IDE7IC8vIGFkZCAxIHRvIG1ha2UgaXQgZXZlbiwgYW5kIGRpdmlkZSBieSAyXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gLTEgKiAodmFsdSA+Pj4gMSk7IC8vIGRpdmlkZSBieSB0d28gdGhlbiBtYWtlIGl0IG5lZ2F0aXZlXG4gICAgICB9OyAvLyBTb21lIGNvbnZlbmllbmNlIGZ1bmN0aW9uc1xuICAgICAgLy8gOkJvb2xlYW5cblxuXG4gICAgICB0aGlzLnJlYWRCb29sZWFuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFkQml0cygxKSA9PT0gMTtcbiAgICAgIH07IC8vICgpOmludFxuXG5cbiAgICAgIHRoaXMucmVhZFVuc2lnbmVkQnl0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZEJpdHMoOCk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLmxvYWRXb3JkKCk7XG4gICAgfTtcblxuICAgIHZhciBleHBHb2xvbWIgPSBFeHBHb2xvbWI7XG5cbiAgICB2YXIgX0gyNjRTdHJlYW0sIF9OYWxCeXRlU3RyZWFtO1xuXG4gICAgdmFyIFBST0ZJTEVTX1dJVEhfT1BUSU9OQUxfU1BTX0RBVEE7XG4gICAgLyoqXG4gICAgICogQWNjZXB0cyBhIE5BTCB1bml0IGJ5dGUgc3RyZWFtIGFuZCB1bnBhY2tzIHRoZSBlbWJlZGRlZCBOQUwgdW5pdHMuXG4gICAgICovXG5cbiAgICBfTmFsQnl0ZVN0cmVhbSA9IGZ1bmN0aW9uIE5hbEJ5dGVTdHJlYW0oKSB7XG4gICAgICB2YXIgc3luY1BvaW50ID0gMCxcbiAgICAgICAgICBpLFxuICAgICAgICAgIGJ1ZmZlcjtcblxuICAgICAgX05hbEJ5dGVTdHJlYW0ucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzKTtcbiAgICAgIC8qXG4gICAgICAgKiBTY2FucyBhIGJ5dGUgc3RyZWFtIGFuZCB0cmlnZ2VycyBhIGRhdGEgZXZlbnQgd2l0aCB0aGUgTkFMIHVuaXRzIGZvdW5kLlxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgRXZlbnQgcmVjZWl2ZWQgZnJvbSBIMjY0U3RyZWFtXG4gICAgICAgKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGRhdGEuZGF0YSBUaGUgaDI2NCBieXRlIHN0cmVhbSB0byBiZSBzY2FubmVkXG4gICAgICAgKlxuICAgICAgICogQHNlZSBIMjY0U3RyZWFtLnB1c2hcbiAgICAgICAqL1xuXG5cbiAgICAgIHRoaXMucHVzaCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZhciBzd2FwQnVmZmVyO1xuXG4gICAgICAgIGlmICghYnVmZmVyKSB7XG4gICAgICAgICAgYnVmZmVyID0gZGF0YS5kYXRhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN3YXBCdWZmZXIgPSBuZXcgVWludDhBcnJheShidWZmZXIuYnl0ZUxlbmd0aCArIGRhdGEuZGF0YS5ieXRlTGVuZ3RoKTtcbiAgICAgICAgICBzd2FwQnVmZmVyLnNldChidWZmZXIpO1xuICAgICAgICAgIHN3YXBCdWZmZXIuc2V0KGRhdGEuZGF0YSwgYnVmZmVyLmJ5dGVMZW5ndGgpO1xuICAgICAgICAgIGJ1ZmZlciA9IHN3YXBCdWZmZXI7XG4gICAgICAgIH0gLy8gUmVjLiBJVFUtVCBILjI2NCwgQW5uZXggQlxuICAgICAgICAvLyBzY2FuIGZvciBOQUwgdW5pdCBib3VuZGFyaWVzXG4gICAgICAgIC8vIGEgbWF0Y2ggbG9va3MgbGlrZSB0aGlzOlxuICAgICAgICAvLyAwIDAgMSAuLiBOQUwgLi4gMCAwIDFcbiAgICAgICAgLy8gXiBzeW5jIHBvaW50ICAgICAgICBeIGlcbiAgICAgICAgLy8gb3IgdGhpczpcbiAgICAgICAgLy8gMCAwIDEgLi4gTkFMIC4uIDAgMCAwXG4gICAgICAgIC8vIF4gc3luYyBwb2ludCAgICAgICAgXiBpXG4gICAgICAgIC8vIGFkdmFuY2UgdGhlIHN5bmMgcG9pbnQgdG8gYSBOQUwgc3RhcnQsIGlmIG5lY2Vzc2FyeVxuXG5cbiAgICAgICAgZm9yICg7IHN5bmNQb2ludCA8IGJ1ZmZlci5ieXRlTGVuZ3RoIC0gMzsgc3luY1BvaW50KyspIHtcbiAgICAgICAgICBpZiAoYnVmZmVyW3N5bmNQb2ludCArIDJdID09PSAxKSB7XG4gICAgICAgICAgICAvLyB0aGUgc3luYyBwb2ludCBpcyBwcm9wZXJseSBhbGlnbmVkXG4gICAgICAgICAgICBpID0gc3luY1BvaW50ICsgNTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlIChpIDwgYnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAvLyBsb29rIGF0IHRoZSBjdXJyZW50IGJ5dGUgdG8gZGV0ZXJtaW5lIGlmIHdlJ3ZlIGhpdCB0aGUgZW5kIG9mXG4gICAgICAgICAgLy8gYSBOQUwgdW5pdCBib3VuZGFyeVxuICAgICAgICAgIHN3aXRjaCAoYnVmZmVyW2ldKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIC8vIHNraXAgcGFzdCBub24tc3luYyBzZXF1ZW5jZXNcbiAgICAgICAgICAgICAgaWYgKGJ1ZmZlcltpIC0gMV0gIT09IDApIHtcbiAgICAgICAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoYnVmZmVyW2kgLSAyXSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfSAvLyBkZWxpdmVyIHRoZSBOQUwgdW5pdCBpZiBpdCBpc24ndCBlbXB0eVxuXG5cbiAgICAgICAgICAgICAgaWYgKHN5bmNQb2ludCArIDMgIT09IGkgLSAyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywgYnVmZmVyLnN1YmFycmF5KHN5bmNQb2ludCArIDMsIGkgLSAyKSk7XG4gICAgICAgICAgICAgIH0gLy8gZHJvcCB0cmFpbGluZyB6ZXJvZXNcblxuXG4gICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgIH0gd2hpbGUgKGJ1ZmZlcltpXSAhPT0gMSAmJiBpIDwgYnVmZmVyLmxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgc3luY1BvaW50ID0gaSAtIDI7XG4gICAgICAgICAgICAgIGkgKz0gMztcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgLy8gc2tpcCBwYXN0IG5vbi1zeW5jIHNlcXVlbmNlc1xuICAgICAgICAgICAgICBpZiAoYnVmZmVyW2kgLSAxXSAhPT0gMCB8fCBidWZmZXJbaSAtIDJdICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgaSArPSAzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9IC8vIGRlbGl2ZXIgdGhlIE5BTCB1bml0XG5cblxuICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2RhdGEnLCBidWZmZXIuc3ViYXJyYXkoc3luY1BvaW50ICsgMywgaSAtIDIpKTtcbiAgICAgICAgICAgICAgc3luY1BvaW50ID0gaSAtIDI7XG4gICAgICAgICAgICAgIGkgKz0gMztcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIC8vIHRoZSBjdXJyZW50IGJ5dGUgaXNuJ3QgYSBvbmUgb3IgemVybywgc28gaXQgY2Fubm90IGJlIHBhcnRcbiAgICAgICAgICAgICAgLy8gb2YgYSBzeW5jIHNlcXVlbmNlXG4gICAgICAgICAgICAgIGkgKz0gMztcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9IC8vIGZpbHRlciBvdXQgdGhlIE5BTCB1bml0cyB0aGF0IHdlcmUgZGVsaXZlcmVkXG5cblxuICAgICAgICBidWZmZXIgPSBidWZmZXIuc3ViYXJyYXkoc3luY1BvaW50KTtcbiAgICAgICAgaSAtPSBzeW5jUG9pbnQ7XG4gICAgICAgIHN5bmNQb2ludCA9IDA7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBkZWxpdmVyIHRoZSBsYXN0IGJ1ZmZlcmVkIE5BTCB1bml0XG4gICAgICAgIGlmIChidWZmZXIgJiYgYnVmZmVyLmJ5dGVMZW5ndGggPiAzKSB7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywgYnVmZmVyLnN1YmFycmF5KHN5bmNQb2ludCArIDMpKTtcbiAgICAgICAgfSAvLyByZXNldCB0aGUgc3RyZWFtIHN0YXRlXG5cblxuICAgICAgICBidWZmZXIgPSBudWxsO1xuICAgICAgICBzeW5jUG9pbnQgPSAwO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2RvbmUnKTtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIF9OYWxCeXRlU3RyZWFtLnByb3RvdHlwZSA9IG5ldyBzdHJlYW0oKTsgLy8gdmFsdWVzIG9mIHByb2ZpbGVfaWRjIHRoYXQgaW5kaWNhdGUgYWRkaXRpb25hbCBmaWVsZHMgYXJlIGluY2x1ZGVkIGluIHRoZSBTUFNcbiAgICAvLyBzZWUgUmVjb21tZW5kYXRpb24gSVRVLVQgSC4yNjQgKDQvMjAxMyksXG4gICAgLy8gNy4zLjIuMS4xIFNlcXVlbmNlIHBhcmFtZXRlciBzZXQgZGF0YSBzeW50YXhcblxuICAgIFBST0ZJTEVTX1dJVEhfT1BUSU9OQUxfU1BTX0RBVEEgPSB7XG4gICAgICAxMDA6IHRydWUsXG4gICAgICAxMTA6IHRydWUsXG4gICAgICAxMjI6IHRydWUsXG4gICAgICAyNDQ6IHRydWUsXG4gICAgICA0NDogdHJ1ZSxcbiAgICAgIDgzOiB0cnVlLFxuICAgICAgODY6IHRydWUsXG4gICAgICAxMTg6IHRydWUsXG4gICAgICAxMjg6IHRydWUsXG4gICAgICAxMzg6IHRydWUsXG4gICAgICAxMzk6IHRydWUsXG4gICAgICAxMzQ6IHRydWVcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFjY2VwdHMgaW5wdXQgZnJvbSBhIEVsZW1lbnRhcnlTdHJlYW0gYW5kIHByb2R1Y2VzIEguMjY0IE5BTCB1bml0IGRhdGFcbiAgICAgKiBldmVudHMuXG4gICAgICovXG5cbiAgICBfSDI2NFN0cmVhbSA9IGZ1bmN0aW9uIEgyNjRTdHJlYW0oKSB7XG4gICAgICB2YXIgbmFsQnl0ZVN0cmVhbSA9IG5ldyBfTmFsQnl0ZVN0cmVhbSgpLFxuICAgICAgICAgIHNlbGYsXG4gICAgICAgICAgdHJhY2tJZCxcbiAgICAgICAgICBjdXJyZW50UHRzLFxuICAgICAgICAgIGN1cnJlbnREdHMsXG4gICAgICAgICAgZGlzY2FyZEVtdWxhdGlvblByZXZlbnRpb25CeXRlcyxcbiAgICAgICAgICByZWFkU2VxdWVuY2VQYXJhbWV0ZXJTZXQsXG4gICAgICAgICAgc2tpcFNjYWxpbmdMaXN0O1xuXG4gICAgICBfSDI2NFN0cmVhbS5wcm90b3R5cGUuaW5pdC5jYWxsKHRoaXMpO1xuXG4gICAgICBzZWxmID0gdGhpcztcbiAgICAgIC8qXG4gICAgICAgKiBQdXNoZXMgYSBwYWNrZXQgZnJvbSBhIHN0cmVhbSBvbnRvIHRoZSBOYWxCeXRlU3RyZWFtXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IHBhY2tldCAtIEEgcGFja2V0IHJlY2VpdmVkIGZyb20gYSBzdHJlYW1cbiAgICAgICAqIEBwYXJhbSB7VWludDhBcnJheX0gcGFja2V0LmRhdGEgLSBUaGUgcmF3IGJ5dGVzIG9mIHRoZSBwYWNrZXRcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwYWNrZXQuZHRzIC0gRGVjb2RlIHRpbWVzdGFtcCBvZiB0aGUgcGFja2V0XG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gcGFja2V0LnB0cyAtIFByZXNlbnRhdGlvbiB0aW1lc3RhbXAgb2YgdGhlIHBhY2tldFxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHBhY2tldC50cmFja0lkIC0gVGhlIGlkIG9mIHRoZSBoMjY0IHRyYWNrIHRoaXMgcGFja2V0IGNhbWUgZnJvbVxuICAgICAgICogQHBhcmFtIHsoJ3ZpZGVvJ3wnYXVkaW8nKX0gcGFja2V0LnR5cGUgLSBUaGUgdHlwZSBvZiBwYWNrZXRcbiAgICAgICAqXG4gICAgICAgKi9cblxuICAgICAgdGhpcy5wdXNoID0gZnVuY3Rpb24gKHBhY2tldCkge1xuICAgICAgICBpZiAocGFja2V0LnR5cGUgIT09ICd2aWRlbycpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cmFja0lkID0gcGFja2V0LnRyYWNrSWQ7XG4gICAgICAgIGN1cnJlbnRQdHMgPSBwYWNrZXQucHRzO1xuICAgICAgICBjdXJyZW50RHRzID0gcGFja2V0LmR0cztcbiAgICAgICAgbmFsQnl0ZVN0cmVhbS5wdXNoKHBhY2tldCk7XG4gICAgICB9O1xuICAgICAgLypcbiAgICAgICAqIElkZW50aWZ5IE5BTCB1bml0IHR5cGVzIGFuZCBwYXNzIG9uIHRoZSBOQUxVLCB0cmFja0lkLCBwcmVzZW50YXRpb24gYW5kIGRlY29kZSB0aW1lc3RhbXBzXG4gICAgICAgKiBmb3IgdGhlIE5BTFVzIHRvIHRoZSBuZXh0IHN0cmVhbSBjb21wb25lbnQuXG4gICAgICAgKiBBbHNvLCBwcmVwcm9jZXNzIGNhcHRpb24gYW5kIHNlcXVlbmNlIHBhcmFtZXRlciBOQUxVcy5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGRhdGEgLSBBIE5BTCB1bml0IGlkZW50aWZpZWQgYnkgYE5hbEJ5dGVTdHJlYW0ucHVzaGBcbiAgICAgICAqIEBzZWUgTmFsQnl0ZVN0cmVhbS5wdXNoXG4gICAgICAgKi9cblxuXG4gICAgICBuYWxCeXRlU3RyZWFtLm9uKCdkYXRhJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdmFyIGV2ZW50ID0ge1xuICAgICAgICAgIHRyYWNrSWQ6IHRyYWNrSWQsXG4gICAgICAgICAgcHRzOiBjdXJyZW50UHRzLFxuICAgICAgICAgIGR0czogY3VycmVudER0cyxcbiAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgIH07XG5cbiAgICAgICAgc3dpdGNoIChkYXRhWzBdICYgMHgxZikge1xuICAgICAgICAgIGNhc2UgMHgwNTpcbiAgICAgICAgICAgIGV2ZW50Lm5hbFVuaXRUeXBlID0gJ3NsaWNlX2xheWVyX3dpdGhvdXRfcGFydGl0aW9uaW5nX3Jic3BfaWRyJztcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAweDA2OlxuICAgICAgICAgICAgZXZlbnQubmFsVW5pdFR5cGUgPSAnc2VpX3Jic3AnO1xuICAgICAgICAgICAgZXZlbnQuZXNjYXBlZFJCU1AgPSBkaXNjYXJkRW11bGF0aW9uUHJldmVudGlvbkJ5dGVzKGRhdGEuc3ViYXJyYXkoMSkpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDB4MDc6XG4gICAgICAgICAgICBldmVudC5uYWxVbml0VHlwZSA9ICdzZXFfcGFyYW1ldGVyX3NldF9yYnNwJztcbiAgICAgICAgICAgIGV2ZW50LmVzY2FwZWRSQlNQID0gZGlzY2FyZEVtdWxhdGlvblByZXZlbnRpb25CeXRlcyhkYXRhLnN1YmFycmF5KDEpKTtcbiAgICAgICAgICAgIGV2ZW50LmNvbmZpZyA9IHJlYWRTZXF1ZW5jZVBhcmFtZXRlclNldChldmVudC5lc2NhcGVkUkJTUCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMHgwODpcbiAgICAgICAgICAgIGV2ZW50Lm5hbFVuaXRUeXBlID0gJ3BpY19wYXJhbWV0ZXJfc2V0X3Jic3AnO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDB4MDk6XG4gICAgICAgICAgICBldmVudC5uYWxVbml0VHlwZSA9ICdhY2Nlc3NfdW5pdF9kZWxpbWl0ZXJfcmJzcCc7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfSAvLyBUaGlzIHRyaWdnZXJzIGRhdGEgb24gdGhlIEgyNjRTdHJlYW1cblxuXG4gICAgICAgIHNlbGYudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcbiAgICAgIH0pO1xuICAgICAgbmFsQnl0ZVN0cmVhbS5vbignZG9uZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi50cmlnZ2VyKCdkb25lJyk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbmFsQnl0ZVN0cmVhbS5mbHVzaCgpO1xuICAgICAgfTtcbiAgICAgIC8qKlxuICAgICAgICogQWR2YW5jZSB0aGUgRXhwR29sb21iIGRlY29kZXIgcGFzdCBhIHNjYWxpbmcgbGlzdC4gVGhlIHNjYWxpbmdcbiAgICAgICAqIGxpc3QgaXMgb3B0aW9uYWxseSB0cmFuc21pdHRlZCBhcyBwYXJ0IG9mIGEgc2VxdWVuY2UgcGFyYW1ldGVyXG4gICAgICAgKiBzZXQgYW5kIGlzIG5vdCByZWxldmFudCB0byB0cmFuc211eGluZy5cbiAgICAgICAqIEBwYXJhbSBjb3VudCB7bnVtYmVyfSB0aGUgbnVtYmVyIG9mIGVudHJpZXMgaW4gdGhpcyBzY2FsaW5nIGxpc3RcbiAgICAgICAqIEBwYXJhbSBleHBHb2xvbWJEZWNvZGVyIHtvYmplY3R9IGFuIEV4cEdvbG9tYiBwb2ludGVkIHRvIHRoZVxuICAgICAgICogc3RhcnQgb2YgYSBzY2FsaW5nIGxpc3RcbiAgICAgICAqIEBzZWUgUmVjb21tZW5kYXRpb24gSVRVLVQgSC4yNjQsIFNlY3Rpb24gNy4zLjIuMS4xLjFcbiAgICAgICAqL1xuXG5cbiAgICAgIHNraXBTY2FsaW5nTGlzdCA9IGZ1bmN0aW9uIHNraXBTY2FsaW5nTGlzdChjb3VudCwgZXhwR29sb21iRGVjb2Rlcikge1xuICAgICAgICB2YXIgbGFzdFNjYWxlID0gOCxcbiAgICAgICAgICAgIG5leHRTY2FsZSA9IDgsXG4gICAgICAgICAgICBqLFxuICAgICAgICAgICAgZGVsdGFTY2FsZTtcblxuICAgICAgICBmb3IgKGogPSAwOyBqIDwgY291bnQ7IGorKykge1xuICAgICAgICAgIGlmIChuZXh0U2NhbGUgIT09IDApIHtcbiAgICAgICAgICAgIGRlbHRhU2NhbGUgPSBleHBHb2xvbWJEZWNvZGVyLnJlYWRFeHBHb2xvbWIoKTtcbiAgICAgICAgICAgIG5leHRTY2FsZSA9IChsYXN0U2NhbGUgKyBkZWx0YVNjYWxlICsgMjU2KSAlIDI1NjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsYXN0U2NhbGUgPSBuZXh0U2NhbGUgPT09IDAgPyBsYXN0U2NhbGUgOiBuZXh0U2NhbGU7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAqIEV4cHVuZ2UgYW55IFwiRW11bGF0aW9uIFByZXZlbnRpb25cIiBieXRlcyBmcm9tIGEgXCJSYXcgQnl0ZVxuICAgICAgICogU2VxdWVuY2UgUGF5bG9hZFwiXG4gICAgICAgKiBAcGFyYW0gZGF0YSB7VWludDhBcnJheX0gdGhlIGJ5dGVzIG9mIGEgUkJTUCBmcm9tIGEgTkFMXG4gICAgICAgKiB1bml0XG4gICAgICAgKiBAcmV0dXJuIHtVaW50OEFycmF5fSB0aGUgUkJTUCB3aXRob3V0IGFueSBFbXVsYXRpb25cbiAgICAgICAqIFByZXZlbnRpb24gQnl0ZXNcbiAgICAgICAqL1xuXG5cbiAgICAgIGRpc2NhcmRFbXVsYXRpb25QcmV2ZW50aW9uQnl0ZXMgPSBmdW5jdGlvbiBkaXNjYXJkRW11bGF0aW9uUHJldmVudGlvbkJ5dGVzKGRhdGEpIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IGRhdGEuYnl0ZUxlbmd0aCxcbiAgICAgICAgICAgIGVtdWxhdGlvblByZXZlbnRpb25CeXRlc1Bvc2l0aW9ucyA9IFtdLFxuICAgICAgICAgICAgaSA9IDEsXG4gICAgICAgICAgICBuZXdMZW5ndGgsXG4gICAgICAgICAgICBuZXdEYXRhOyAvLyBGaW5kIGFsbCBgRW11bGF0aW9uIFByZXZlbnRpb24gQnl0ZXNgXG5cbiAgICAgICAgd2hpbGUgKGkgPCBsZW5ndGggLSAyKSB7XG4gICAgICAgICAgaWYgKGRhdGFbaV0gPT09IDAgJiYgZGF0YVtpICsgMV0gPT09IDAgJiYgZGF0YVtpICsgMl0gPT09IDB4MDMpIHtcbiAgICAgICAgICAgIGVtdWxhdGlvblByZXZlbnRpb25CeXRlc1Bvc2l0aW9ucy5wdXNoKGkgKyAyKTtcbiAgICAgICAgICAgIGkgKz0gMjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBJZiBubyBFbXVsYXRpb24gUHJldmVudGlvbiBCeXRlcyB3ZXJlIGZvdW5kIGp1c3QgcmV0dXJuIHRoZSBvcmlnaW5hbFxuICAgICAgICAvLyBhcnJheVxuXG5cbiAgICAgICAgaWYgKGVtdWxhdGlvblByZXZlbnRpb25CeXRlc1Bvc2l0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfSAvLyBDcmVhdGUgYSBuZXcgYXJyYXkgdG8gaG9sZCB0aGUgTkFMIHVuaXQgZGF0YVxuXG5cbiAgICAgICAgbmV3TGVuZ3RoID0gbGVuZ3RoIC0gZW11bGF0aW9uUHJldmVudGlvbkJ5dGVzUG9zaXRpb25zLmxlbmd0aDtcbiAgICAgICAgbmV3RGF0YSA9IG5ldyBVaW50OEFycmF5KG5ld0xlbmd0aCk7XG4gICAgICAgIHZhciBzb3VyY2VJbmRleCA9IDA7XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG5ld0xlbmd0aDsgc291cmNlSW5kZXgrKywgaSsrKSB7XG4gICAgICAgICAgaWYgKHNvdXJjZUluZGV4ID09PSBlbXVsYXRpb25QcmV2ZW50aW9uQnl0ZXNQb3NpdGlvbnNbMF0pIHtcbiAgICAgICAgICAgIC8vIFNraXAgdGhpcyBieXRlXG4gICAgICAgICAgICBzb3VyY2VJbmRleCsrOyAvLyBSZW1vdmUgdGhpcyBwb3NpdGlvbiBpbmRleFxuXG4gICAgICAgICAgICBlbXVsYXRpb25QcmV2ZW50aW9uQnl0ZXNQb3NpdGlvbnMuc2hpZnQoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZXdEYXRhW2ldID0gZGF0YVtzb3VyY2VJbmRleF07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3RGF0YTtcbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAqIFJlYWQgYSBzZXF1ZW5jZSBwYXJhbWV0ZXIgc2V0IGFuZCByZXR1cm4gc29tZSBpbnRlcmVzdGluZyB2aWRlb1xuICAgICAgICogcHJvcGVydGllcy4gQSBzZXF1ZW5jZSBwYXJhbWV0ZXIgc2V0IGlzIHRoZSBIMjY0IG1ldGFkYXRhIHRoYXRcbiAgICAgICAqIGRlc2NyaWJlcyB0aGUgcHJvcGVydGllcyBvZiB1cGNvbWluZyB2aWRlbyBmcmFtZXMuXG4gICAgICAgKiBAcGFyYW0gZGF0YSB7VWludDhBcnJheX0gdGhlIGJ5dGVzIG9mIGEgc2VxdWVuY2UgcGFyYW1ldGVyIHNldFxuICAgICAgICogQHJldHVybiB7b2JqZWN0fSBhbiBvYmplY3Qgd2l0aCBjb25maWd1cmF0aW9uIHBhcnNlZCBmcm9tIHRoZVxuICAgICAgICogc2VxdWVuY2UgcGFyYW1ldGVyIHNldCwgaW5jbHVkaW5nIHRoZSBkaW1lbnNpb25zIG9mIHRoZVxuICAgICAgICogYXNzb2NpYXRlZCB2aWRlbyBmcmFtZXMuXG4gICAgICAgKi9cblxuXG4gICAgICByZWFkU2VxdWVuY2VQYXJhbWV0ZXJTZXQgPSBmdW5jdGlvbiByZWFkU2VxdWVuY2VQYXJhbWV0ZXJTZXQoZGF0YSkge1xuICAgICAgICB2YXIgZnJhbWVDcm9wTGVmdE9mZnNldCA9IDAsXG4gICAgICAgICAgICBmcmFtZUNyb3BSaWdodE9mZnNldCA9IDAsXG4gICAgICAgICAgICBmcmFtZUNyb3BUb3BPZmZzZXQgPSAwLFxuICAgICAgICAgICAgZnJhbWVDcm9wQm90dG9tT2Zmc2V0ID0gMCxcbiAgICAgICAgICAgIHNhclNjYWxlID0gMSxcbiAgICAgICAgICAgIGV4cEdvbG9tYkRlY29kZXIsXG4gICAgICAgICAgICBwcm9maWxlSWRjLFxuICAgICAgICAgICAgbGV2ZWxJZGMsXG4gICAgICAgICAgICBwcm9maWxlQ29tcGF0aWJpbGl0eSxcbiAgICAgICAgICAgIGNocm9tYUZvcm1hdElkYyxcbiAgICAgICAgICAgIHBpY09yZGVyQ250VHlwZSxcbiAgICAgICAgICAgIG51bVJlZkZyYW1lc0luUGljT3JkZXJDbnRDeWNsZSxcbiAgICAgICAgICAgIHBpY1dpZHRoSW5NYnNNaW51czEsXG4gICAgICAgICAgICBwaWNIZWlnaHRJbk1hcFVuaXRzTWludXMxLFxuICAgICAgICAgICAgZnJhbWVNYnNPbmx5RmxhZyxcbiAgICAgICAgICAgIHNjYWxpbmdMaXN0Q291bnQsXG4gICAgICAgICAgICBzYXJSYXRpbyxcbiAgICAgICAgICAgIGFzcGVjdFJhdGlvSWRjLFxuICAgICAgICAgICAgaTtcbiAgICAgICAgZXhwR29sb21iRGVjb2RlciA9IG5ldyBleHBHb2xvbWIoZGF0YSk7XG4gICAgICAgIHByb2ZpbGVJZGMgPSBleHBHb2xvbWJEZWNvZGVyLnJlYWRVbnNpZ25lZEJ5dGUoKTsgLy8gcHJvZmlsZV9pZGNcblxuICAgICAgICBwcm9maWxlQ29tcGF0aWJpbGl0eSA9IGV4cEdvbG9tYkRlY29kZXIucmVhZFVuc2lnbmVkQnl0ZSgpOyAvLyBjb25zdHJhaW50X3NldFswLTVdX2ZsYWdcblxuICAgICAgICBsZXZlbElkYyA9IGV4cEdvbG9tYkRlY29kZXIucmVhZFVuc2lnbmVkQnl0ZSgpOyAvLyBsZXZlbF9pZGMgdSg4KVxuXG4gICAgICAgIGV4cEdvbG9tYkRlY29kZXIuc2tpcFVuc2lnbmVkRXhwR29sb21iKCk7IC8vIHNlcV9wYXJhbWV0ZXJfc2V0X2lkXG4gICAgICAgIC8vIHNvbWUgcHJvZmlsZXMgaGF2ZSBtb3JlIG9wdGlvbmFsIGRhdGEgd2UgZG9uJ3QgbmVlZFxuXG4gICAgICAgIGlmIChQUk9GSUxFU19XSVRIX09QVElPTkFMX1NQU19EQVRBW3Byb2ZpbGVJZGNdKSB7XG4gICAgICAgICAgY2hyb21hRm9ybWF0SWRjID0gZXhwR29sb21iRGVjb2Rlci5yZWFkVW5zaWduZWRFeHBHb2xvbWIoKTtcblxuICAgICAgICAgIGlmIChjaHJvbWFGb3JtYXRJZGMgPT09IDMpIHtcbiAgICAgICAgICAgIGV4cEdvbG9tYkRlY29kZXIuc2tpcEJpdHMoMSk7IC8vIHNlcGFyYXRlX2NvbG91cl9wbGFuZV9mbGFnXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZXhwR29sb21iRGVjb2Rlci5za2lwVW5zaWduZWRFeHBHb2xvbWIoKTsgLy8gYml0X2RlcHRoX2x1bWFfbWludXM4XG5cbiAgICAgICAgICBleHBHb2xvbWJEZWNvZGVyLnNraXBVbnNpZ25lZEV4cEdvbG9tYigpOyAvLyBiaXRfZGVwdGhfY2hyb21hX21pbnVzOFxuXG4gICAgICAgICAgZXhwR29sb21iRGVjb2Rlci5za2lwQml0cygxKTsgLy8gcXBwcmltZV95X3plcm9fdHJhbnNmb3JtX2J5cGFzc19mbGFnXG5cbiAgICAgICAgICBpZiAoZXhwR29sb21iRGVjb2Rlci5yZWFkQm9vbGVhbigpKSB7XG4gICAgICAgICAgICAvLyBzZXFfc2NhbGluZ19tYXRyaXhfcHJlc2VudF9mbGFnXG4gICAgICAgICAgICBzY2FsaW5nTGlzdENvdW50ID0gY2hyb21hRm9ybWF0SWRjICE9PSAzID8gOCA6IDEyO1xuXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2NhbGluZ0xpc3RDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmIChleHBHb2xvbWJEZWNvZGVyLnJlYWRCb29sZWFuKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBzZXFfc2NhbGluZ19saXN0X3ByZXNlbnRfZmxhZ1sgaSBdXG4gICAgICAgICAgICAgICAgaWYgKGkgPCA2KSB7XG4gICAgICAgICAgICAgICAgICBza2lwU2NhbGluZ0xpc3QoMTYsIGV4cEdvbG9tYkRlY29kZXIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBza2lwU2NhbGluZ0xpc3QoNjQsIGV4cEdvbG9tYkRlY29kZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGV4cEdvbG9tYkRlY29kZXIuc2tpcFVuc2lnbmVkRXhwR29sb21iKCk7IC8vIGxvZzJfbWF4X2ZyYW1lX251bV9taW51czRcblxuICAgICAgICBwaWNPcmRlckNudFR5cGUgPSBleHBHb2xvbWJEZWNvZGVyLnJlYWRVbnNpZ25lZEV4cEdvbG9tYigpO1xuXG4gICAgICAgIGlmIChwaWNPcmRlckNudFR5cGUgPT09IDApIHtcbiAgICAgICAgICBleHBHb2xvbWJEZWNvZGVyLnJlYWRVbnNpZ25lZEV4cEdvbG9tYigpOyAvLyBsb2cyX21heF9waWNfb3JkZXJfY250X2xzYl9taW51czRcbiAgICAgICAgfSBlbHNlIGlmIChwaWNPcmRlckNudFR5cGUgPT09IDEpIHtcbiAgICAgICAgICBleHBHb2xvbWJEZWNvZGVyLnNraXBCaXRzKDEpOyAvLyBkZWx0YV9waWNfb3JkZXJfYWx3YXlzX3plcm9fZmxhZ1xuXG4gICAgICAgICAgZXhwR29sb21iRGVjb2Rlci5za2lwRXhwR29sb21iKCk7IC8vIG9mZnNldF9mb3Jfbm9uX3JlZl9waWNcblxuICAgICAgICAgIGV4cEdvbG9tYkRlY29kZXIuc2tpcEV4cEdvbG9tYigpOyAvLyBvZmZzZXRfZm9yX3RvcF90b19ib3R0b21fZmllbGRcblxuICAgICAgICAgIG51bVJlZkZyYW1lc0luUGljT3JkZXJDbnRDeWNsZSA9IGV4cEdvbG9tYkRlY29kZXIucmVhZFVuc2lnbmVkRXhwR29sb21iKCk7XG5cbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbnVtUmVmRnJhbWVzSW5QaWNPcmRlckNudEN5Y2xlOyBpKyspIHtcbiAgICAgICAgICAgIGV4cEdvbG9tYkRlY29kZXIuc2tpcEV4cEdvbG9tYigpOyAvLyBvZmZzZXRfZm9yX3JlZl9mcmFtZVsgaSBdXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZXhwR29sb21iRGVjb2Rlci5za2lwVW5zaWduZWRFeHBHb2xvbWIoKTsgLy8gbWF4X251bV9yZWZfZnJhbWVzXG5cbiAgICAgICAgZXhwR29sb21iRGVjb2Rlci5za2lwQml0cygxKTsgLy8gZ2Fwc19pbl9mcmFtZV9udW1fdmFsdWVfYWxsb3dlZF9mbGFnXG5cbiAgICAgICAgcGljV2lkdGhJbk1ic01pbnVzMSA9IGV4cEdvbG9tYkRlY29kZXIucmVhZFVuc2lnbmVkRXhwR29sb21iKCk7XG4gICAgICAgIHBpY0hlaWdodEluTWFwVW5pdHNNaW51czEgPSBleHBHb2xvbWJEZWNvZGVyLnJlYWRVbnNpZ25lZEV4cEdvbG9tYigpO1xuICAgICAgICBmcmFtZU1ic09ubHlGbGFnID0gZXhwR29sb21iRGVjb2Rlci5yZWFkQml0cygxKTtcblxuICAgICAgICBpZiAoZnJhbWVNYnNPbmx5RmxhZyA9PT0gMCkge1xuICAgICAgICAgIGV4cEdvbG9tYkRlY29kZXIuc2tpcEJpdHMoMSk7IC8vIG1iX2FkYXB0aXZlX2ZyYW1lX2ZpZWxkX2ZsYWdcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cEdvbG9tYkRlY29kZXIuc2tpcEJpdHMoMSk7IC8vIGRpcmVjdF84eDhfaW5mZXJlbmNlX2ZsYWdcblxuICAgICAgICBpZiAoZXhwR29sb21iRGVjb2Rlci5yZWFkQm9vbGVhbigpKSB7XG4gICAgICAgICAgLy8gZnJhbWVfY3JvcHBpbmdfZmxhZ1xuICAgICAgICAgIGZyYW1lQ3JvcExlZnRPZmZzZXQgPSBleHBHb2xvbWJEZWNvZGVyLnJlYWRVbnNpZ25lZEV4cEdvbG9tYigpO1xuICAgICAgICAgIGZyYW1lQ3JvcFJpZ2h0T2Zmc2V0ID0gZXhwR29sb21iRGVjb2Rlci5yZWFkVW5zaWduZWRFeHBHb2xvbWIoKTtcbiAgICAgICAgICBmcmFtZUNyb3BUb3BPZmZzZXQgPSBleHBHb2xvbWJEZWNvZGVyLnJlYWRVbnNpZ25lZEV4cEdvbG9tYigpO1xuICAgICAgICAgIGZyYW1lQ3JvcEJvdHRvbU9mZnNldCA9IGV4cEdvbG9tYkRlY29kZXIucmVhZFVuc2lnbmVkRXhwR29sb21iKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXhwR29sb21iRGVjb2Rlci5yZWFkQm9vbGVhbigpKSB7XG4gICAgICAgICAgLy8gdnVpX3BhcmFtZXRlcnNfcHJlc2VudF9mbGFnXG4gICAgICAgICAgaWYgKGV4cEdvbG9tYkRlY29kZXIucmVhZEJvb2xlYW4oKSkge1xuICAgICAgICAgICAgLy8gYXNwZWN0X3JhdGlvX2luZm9fcHJlc2VudF9mbGFnXG4gICAgICAgICAgICBhc3BlY3RSYXRpb0lkYyA9IGV4cEdvbG9tYkRlY29kZXIucmVhZFVuc2lnbmVkQnl0ZSgpO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGFzcGVjdFJhdGlvSWRjKSB7XG4gICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBzYXJSYXRpbyA9IFsxLCAxXTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgc2FyUmF0aW8gPSBbMTIsIDExXTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgc2FyUmF0aW8gPSBbMTAsIDExXTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgc2FyUmF0aW8gPSBbMTYsIDExXTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgc2FyUmF0aW8gPSBbNDAsIDMzXTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgc2FyUmF0aW8gPSBbMjQsIDExXTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgc2FyUmF0aW8gPSBbMjAsIDExXTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgc2FyUmF0aW8gPSBbMzIsIDExXTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgc2FyUmF0aW8gPSBbODAsIDMzXTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgIHNhclJhdGlvID0gWzE4LCAxMV07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICBzYXJSYXRpbyA9IFsxNSwgMTFdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICAgICAgc2FyUmF0aW8gPSBbNjQsIDMzXTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgIHNhclJhdGlvID0gWzE2MCwgOTldO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgICAgICAgc2FyUmF0aW8gPSBbNCwgM107XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAxNTpcbiAgICAgICAgICAgICAgICBzYXJSYXRpbyA9IFszLCAyXTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDE2OlxuICAgICAgICAgICAgICAgIHNhclJhdGlvID0gWzIsIDFdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMjU1OlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHNhclJhdGlvID0gW2V4cEdvbG9tYkRlY29kZXIucmVhZFVuc2lnbmVkQnl0ZSgpIDw8IDggfCBleHBHb2xvbWJEZWNvZGVyLnJlYWRVbnNpZ25lZEJ5dGUoKSwgZXhwR29sb21iRGVjb2Rlci5yZWFkVW5zaWduZWRCeXRlKCkgPDwgOCB8IGV4cEdvbG9tYkRlY29kZXIucmVhZFVuc2lnbmVkQnl0ZSgpXTtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNhclJhdGlvKSB7XG4gICAgICAgICAgICAgIHNhclNjYWxlID0gc2FyUmF0aW9bMF0gLyBzYXJSYXRpb1sxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHByb2ZpbGVJZGM6IHByb2ZpbGVJZGMsXG4gICAgICAgICAgbGV2ZWxJZGM6IGxldmVsSWRjLFxuICAgICAgICAgIHByb2ZpbGVDb21wYXRpYmlsaXR5OiBwcm9maWxlQ29tcGF0aWJpbGl0eSxcbiAgICAgICAgICB3aWR0aDogTWF0aC5jZWlsKCgocGljV2lkdGhJbk1ic01pbnVzMSArIDEpICogMTYgLSBmcmFtZUNyb3BMZWZ0T2Zmc2V0ICogMiAtIGZyYW1lQ3JvcFJpZ2h0T2Zmc2V0ICogMikgKiBzYXJTY2FsZSksXG4gICAgICAgICAgaGVpZ2h0OiAoMiAtIGZyYW1lTWJzT25seUZsYWcpICogKHBpY0hlaWdodEluTWFwVW5pdHNNaW51czEgKyAxKSAqIDE2IC0gZnJhbWVDcm9wVG9wT2Zmc2V0ICogMiAtIGZyYW1lQ3JvcEJvdHRvbU9mZnNldCAqIDJcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIF9IMjY0U3RyZWFtLnByb3RvdHlwZSA9IG5ldyBzdHJlYW0oKTtcbiAgICB2YXIgaDI2NCA9IHtcbiAgICAgIEgyNjRTdHJlYW06IF9IMjY0U3RyZWFtLFxuICAgICAgTmFsQnl0ZVN0cmVhbTogX05hbEJ5dGVTdHJlYW1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIG11eC5qc1xuICAgICAqXG4gICAgICogQ29weXJpZ2h0IChjKSAyMDE2IEJyaWdodGNvdmVcbiAgICAgKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICAgICAqXG4gICAgICogVXRpbGl0aWVzIHRvIGRldGVjdCBiYXNpYyBwcm9wZXJ0aWVzIGFuZCBtZXRhZGF0YSBhYm91dCBBYWMgZGF0YS5cbiAgICAgKi9cblxuICAgIHZhciBBRFRTX1NBTVBMSU5HX0ZSRVFVRU5DSUVTJDEgPSBbOTYwMDAsIDg4MjAwLCA2NDAwMCwgNDgwMDAsIDQ0MTAwLCAzMjAwMCwgMjQwMDAsIDIyMDUwLCAxNjAwMCwgMTIwMDAsIDExMDI1LCA4MDAwLCA3MzUwXTtcblxuICAgIHZhciBpc0xpa2VseUFhY0RhdGEgPSBmdW5jdGlvbiBpc0xpa2VseUFhY0RhdGEoZGF0YSkge1xuICAgICAgaWYgKGRhdGFbMF0gPT09ICdJJy5jaGFyQ29kZUF0KDApICYmIGRhdGFbMV0gPT09ICdEJy5jaGFyQ29kZUF0KDApICYmIGRhdGFbMl0gPT09ICczJy5jaGFyQ29kZUF0KDApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIHZhciBwYXJzZVN5bmNTYWZlSW50ZWdlciQxID0gZnVuY3Rpb24gcGFyc2VTeW5jU2FmZUludGVnZXIoZGF0YSkge1xuICAgICAgcmV0dXJuIGRhdGFbMF0gPDwgMjEgfCBkYXRhWzFdIDw8IDE0IHwgZGF0YVsyXSA8PCA3IHwgZGF0YVszXTtcbiAgICB9OyAvLyByZXR1cm4gYSBwZXJjZW50LWVuY29kZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIHNwZWNpZmllZCBieXRlIHJhbmdlXG4gICAgLy8gQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1BlcmNlbnQtZW5jb2RpbmdcblxuXG4gICAgdmFyIHBlcmNlbnRFbmNvZGUkMSA9IGZ1bmN0aW9uIHBlcmNlbnRFbmNvZGUoYnl0ZXMsIHN0YXJ0LCBlbmQpIHtcbiAgICAgIHZhciBpLFxuICAgICAgICAgIHJlc3VsdCA9ICcnO1xuXG4gICAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdCArPSAnJScgKyAoJzAwJyArIGJ5dGVzW2ldLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07IC8vIHJldHVybiB0aGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBzcGVjaWZpZWQgYnl0ZSByYW5nZSxcbiAgICAvLyBpbnRlcnByZXRlZCBhcyBJU08tODg1OS0xLlxuXG5cbiAgICB2YXIgcGFyc2VJc284ODU5MSQxID0gZnVuY3Rpb24gcGFyc2VJc284ODU5MShieXRlcywgc3RhcnQsIGVuZCkge1xuICAgICAgcmV0dXJuIHVuZXNjYXBlKHBlcmNlbnRFbmNvZGUkMShieXRlcywgc3RhcnQsIGVuZCkpOyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcbiAgICB9O1xuXG4gICAgdmFyIHBhcnNlSWQzVGFnU2l6ZSA9IGZ1bmN0aW9uIHBhcnNlSWQzVGFnU2l6ZShoZWFkZXIsIGJ5dGVJbmRleCkge1xuICAgICAgdmFyIHJldHVyblNpemUgPSBoZWFkZXJbYnl0ZUluZGV4ICsgNl0gPDwgMjEgfCBoZWFkZXJbYnl0ZUluZGV4ICsgN10gPDwgMTQgfCBoZWFkZXJbYnl0ZUluZGV4ICsgOF0gPDwgNyB8IGhlYWRlcltieXRlSW5kZXggKyA5XSxcbiAgICAgICAgICBmbGFncyA9IGhlYWRlcltieXRlSW5kZXggKyA1XSxcbiAgICAgICAgICBmb290ZXJQcmVzZW50ID0gKGZsYWdzICYgMTYpID4+IDQ7XG5cbiAgICAgIGlmIChmb290ZXJQcmVzZW50KSB7XG4gICAgICAgIHJldHVybiByZXR1cm5TaXplICsgMjA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXR1cm5TaXplICsgMTA7XG4gICAgfTtcblxuICAgIHZhciBwYXJzZUFkdHNTaXplID0gZnVuY3Rpb24gcGFyc2VBZHRzU2l6ZShoZWFkZXIsIGJ5dGVJbmRleCkge1xuICAgICAgdmFyIGxvd1RocmVlID0gKGhlYWRlcltieXRlSW5kZXggKyA1XSAmIDB4RTApID4+IDUsXG4gICAgICAgICAgbWlkZGxlID0gaGVhZGVyW2J5dGVJbmRleCArIDRdIDw8IDMsXG4gICAgICAgICAgaGlnaFR3byA9IGhlYWRlcltieXRlSW5kZXggKyAzXSAmIDB4MyA8PCAxMTtcbiAgICAgIHJldHVybiBoaWdoVHdvIHwgbWlkZGxlIHwgbG93VGhyZWU7XG4gICAgfTtcblxuICAgIHZhciBwYXJzZVR5cGUkMSA9IGZ1bmN0aW9uIHBhcnNlVHlwZShoZWFkZXIsIGJ5dGVJbmRleCkge1xuICAgICAgaWYgKGhlYWRlcltieXRlSW5kZXhdID09PSAnSScuY2hhckNvZGVBdCgwKSAmJiBoZWFkZXJbYnl0ZUluZGV4ICsgMV0gPT09ICdEJy5jaGFyQ29kZUF0KDApICYmIGhlYWRlcltieXRlSW5kZXggKyAyXSA9PT0gJzMnLmNoYXJDb2RlQXQoMCkpIHtcbiAgICAgICAgcmV0dXJuICd0aW1lZC1tZXRhZGF0YSc7XG4gICAgICB9IGVsc2UgaWYgKGhlYWRlcltieXRlSW5kZXhdICYgMHhmZiA9PT0gMHhmZiAmJiAoaGVhZGVyW2J5dGVJbmRleCArIDFdICYgMHhmMCkgPT09IDB4ZjApIHtcbiAgICAgICAgcmV0dXJuICdhdWRpbyc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICB2YXIgcGFyc2VTYW1wbGVSYXRlID0gZnVuY3Rpb24gcGFyc2VTYW1wbGVSYXRlKHBhY2tldCkge1xuICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICB3aGlsZSAoaSArIDUgPCBwYWNrZXQubGVuZ3RoKSB7XG4gICAgICAgIGlmIChwYWNrZXRbaV0gIT09IDB4RkYgfHwgKHBhY2tldFtpICsgMV0gJiAweEY2KSAhPT0gMHhGMCkge1xuICAgICAgICAgIC8vIElmIGEgdmFsaWQgaGVhZGVyIHdhcyBub3QgZm91bmQsICBqdW1wIG9uZSBmb3J3YXJkIGFuZCBhdHRlbXB0IHRvXG4gICAgICAgICAgLy8gZmluZCBhIHZhbGlkIEFEVFMgaGVhZGVyIHN0YXJ0aW5nIGF0IHRoZSBuZXh0IGJ5dGVcbiAgICAgICAgICBpKys7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gQURUU19TQU1QTElOR19GUkVRVUVOQ0lFUyQxWyhwYWNrZXRbaSArIDJdICYgMHgzYykgPj4+IDJdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgdmFyIHBhcnNlQWFjVGltZXN0YW1wID0gZnVuY3Rpb24gcGFyc2VBYWNUaW1lc3RhbXAocGFja2V0KSB7XG4gICAgICB2YXIgZnJhbWVTdGFydCwgZnJhbWVTaXplLCBmcmFtZSwgZnJhbWVIZWFkZXI7IC8vIGZpbmQgdGhlIHN0YXJ0IG9mIHRoZSBmaXJzdCBmcmFtZSBhbmQgdGhlIGVuZCBvZiB0aGUgdGFnXG5cbiAgICAgIGZyYW1lU3RhcnQgPSAxMDtcblxuICAgICAgaWYgKHBhY2tldFs1XSAmIDB4NDApIHtcbiAgICAgICAgLy8gYWR2YW5jZSB0aGUgZnJhbWUgc3RhcnQgcGFzdCB0aGUgZXh0ZW5kZWQgaGVhZGVyXG4gICAgICAgIGZyYW1lU3RhcnQgKz0gNDsgLy8gaGVhZGVyIHNpemUgZmllbGRcblxuICAgICAgICBmcmFtZVN0YXJ0ICs9IHBhcnNlU3luY1NhZmVJbnRlZ2VyJDEocGFja2V0LnN1YmFycmF5KDEwLCAxNCkpO1xuICAgICAgfSAvLyBwYXJzZSBvbmUgb3IgbW9yZSBJRDMgZnJhbWVzXG4gICAgICAvLyBodHRwOi8vaWQzLm9yZy9pZDN2Mi4zLjAjSUQzdjJfZnJhbWVfb3ZlcnZpZXdcblxuXG4gICAgICBkbyB7XG4gICAgICAgIC8vIGRldGVybWluZSB0aGUgbnVtYmVyIG9mIGJ5dGVzIGluIHRoaXMgZnJhbWVcbiAgICAgICAgZnJhbWVTaXplID0gcGFyc2VTeW5jU2FmZUludGVnZXIkMShwYWNrZXQuc3ViYXJyYXkoZnJhbWVTdGFydCArIDQsIGZyYW1lU3RhcnQgKyA4KSk7XG5cbiAgICAgICAgaWYgKGZyYW1lU2l6ZSA8IDEpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZyYW1lSGVhZGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShwYWNrZXRbZnJhbWVTdGFydF0sIHBhY2tldFtmcmFtZVN0YXJ0ICsgMV0sIHBhY2tldFtmcmFtZVN0YXJ0ICsgMl0sIHBhY2tldFtmcmFtZVN0YXJ0ICsgM10pO1xuXG4gICAgICAgIGlmIChmcmFtZUhlYWRlciA9PT0gJ1BSSVYnKSB7XG4gICAgICAgICAgZnJhbWUgPSBwYWNrZXQuc3ViYXJyYXkoZnJhbWVTdGFydCArIDEwLCBmcmFtZVN0YXJ0ICsgZnJhbWVTaXplICsgMTApO1xuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmcmFtZS5ieXRlTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChmcmFtZVtpXSA9PT0gMCkge1xuICAgICAgICAgICAgICB2YXIgb3duZXIgPSBwYXJzZUlzbzg4NTkxJDEoZnJhbWUsIDAsIGkpO1xuXG4gICAgICAgICAgICAgIGlmIChvd25lciA9PT0gJ2NvbS5hcHBsZS5zdHJlYW1pbmcudHJhbnNwb3J0U3RyZWFtVGltZXN0YW1wJykge1xuICAgICAgICAgICAgICAgIHZhciBkID0gZnJhbWUuc3ViYXJyYXkoaSArIDEpO1xuICAgICAgICAgICAgICAgIHZhciBzaXplID0gKGRbM10gJiAweDAxKSA8PCAzMCB8IGRbNF0gPDwgMjIgfCBkWzVdIDw8IDE0IHwgZFs2XSA8PCA2IHwgZFs3XSA+Pj4gMjtcbiAgICAgICAgICAgICAgICBzaXplICo9IDQ7XG4gICAgICAgICAgICAgICAgc2l6ZSArPSBkWzddICYgMHgwMztcbiAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZyYW1lU3RhcnQgKz0gMTA7IC8vIGFkdmFuY2UgcGFzdCB0aGUgZnJhbWUgaGVhZGVyXG5cbiAgICAgICAgZnJhbWVTdGFydCArPSBmcmFtZVNpemU7IC8vIGFkdmFuY2UgcGFzdCB0aGUgZnJhbWUgYm9keVxuICAgICAgfSB3aGlsZSAoZnJhbWVTdGFydCA8IHBhY2tldC5ieXRlTGVuZ3RoKTtcblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIHZhciB1dGlscyA9IHtcbiAgICAgIGlzTGlrZWx5QWFjRGF0YTogaXNMaWtlbHlBYWNEYXRhLFxuICAgICAgcGFyc2VJZDNUYWdTaXplOiBwYXJzZUlkM1RhZ1NpemUsXG4gICAgICBwYXJzZUFkdHNTaXplOiBwYXJzZUFkdHNTaXplLFxuICAgICAgcGFyc2VUeXBlOiBwYXJzZVR5cGUkMSxcbiAgICAgIHBhcnNlU2FtcGxlUmF0ZTogcGFyc2VTYW1wbGVSYXRlLFxuICAgICAgcGFyc2VBYWNUaW1lc3RhbXA6IHBhcnNlQWFjVGltZXN0YW1wXG4gICAgfTsgLy8gQ29uc3RhbnRzXG5cbiAgICB2YXIgX0FhY1N0cmVhbTtcbiAgICAvKipcbiAgICAgKiBTcGxpdHMgYW4gaW5jb21pbmcgc3RyZWFtIG9mIGJpbmFyeSBkYXRhIGludG8gQURUUyBhbmQgSUQzIEZyYW1lcy5cbiAgICAgKi9cblxuXG4gICAgX0FhY1N0cmVhbSA9IGZ1bmN0aW9uIEFhY1N0cmVhbSgpIHtcbiAgICAgIHZhciBldmVyeXRoaW5nID0gbmV3IFVpbnQ4QXJyYXkoKSxcbiAgICAgICAgICB0aW1lU3RhbXAgPSAwO1xuXG4gICAgICBfQWFjU3RyZWFtLnByb3RvdHlwZS5pbml0LmNhbGwodGhpcyk7XG5cbiAgICAgIHRoaXMuc2V0VGltZXN0YW1wID0gZnVuY3Rpb24gKHRpbWVzdGFtcCkge1xuICAgICAgICB0aW1lU3RhbXAgPSB0aW1lc3RhbXA7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLnB1c2ggPSBmdW5jdGlvbiAoYnl0ZXMpIHtcbiAgICAgICAgdmFyIGZyYW1lU2l6ZSA9IDAsXG4gICAgICAgICAgICBieXRlSW5kZXggPSAwLFxuICAgICAgICAgICAgYnl0ZXNMZWZ0LFxuICAgICAgICAgICAgY2h1bmssXG4gICAgICAgICAgICBwYWNrZXQsXG4gICAgICAgICAgICB0ZW1wTGVuZ3RoOyAvLyBJZiB0aGVyZSBhcmUgYnl0ZXMgcmVtYWluaW5nIGZyb20gdGhlIGxhc3Qgc2VnbWVudCwgcHJlcGVuZCB0aGVtIHRvIHRoZVxuICAgICAgICAvLyBieXRlcyB0aGF0IHdlcmUgcHVzaGVkIGluXG5cbiAgICAgICAgaWYgKGV2ZXJ5dGhpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgdGVtcExlbmd0aCA9IGV2ZXJ5dGhpbmcubGVuZ3RoO1xuICAgICAgICAgIGV2ZXJ5dGhpbmcgPSBuZXcgVWludDhBcnJheShieXRlcy5ieXRlTGVuZ3RoICsgdGVtcExlbmd0aCk7XG4gICAgICAgICAgZXZlcnl0aGluZy5zZXQoZXZlcnl0aGluZy5zdWJhcnJheSgwLCB0ZW1wTGVuZ3RoKSk7XG4gICAgICAgICAgZXZlcnl0aGluZy5zZXQoYnl0ZXMsIHRlbXBMZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGV2ZXJ5dGhpbmcgPSBieXRlcztcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlIChldmVyeXRoaW5nLmxlbmd0aCAtIGJ5dGVJbmRleCA+PSAzKSB7XG4gICAgICAgICAgaWYgKGV2ZXJ5dGhpbmdbYnl0ZUluZGV4XSA9PT0gJ0knLmNoYXJDb2RlQXQoMCkgJiYgZXZlcnl0aGluZ1tieXRlSW5kZXggKyAxXSA9PT0gJ0QnLmNoYXJDb2RlQXQoMCkgJiYgZXZlcnl0aGluZ1tieXRlSW5kZXggKyAyXSA9PT0gJzMnLmNoYXJDb2RlQXQoMCkpIHtcbiAgICAgICAgICAgIC8vIEV4aXQgZWFybHkgYmVjYXVzZSB3ZSBkb24ndCBoYXZlIGVub3VnaCB0byBwYXJzZVxuICAgICAgICAgICAgLy8gdGhlIElEMyB0YWcgaGVhZGVyXG4gICAgICAgICAgICBpZiAoZXZlcnl0aGluZy5sZW5ndGggLSBieXRlSW5kZXggPCAxMCkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gLy8gY2hlY2sgZnJhbWVzaXplXG5cblxuICAgICAgICAgICAgZnJhbWVTaXplID0gdXRpbHMucGFyc2VJZDNUYWdTaXplKGV2ZXJ5dGhpbmcsIGJ5dGVJbmRleCk7IC8vIEV4aXQgZWFybHkgaWYgd2UgZG9uJ3QgaGF2ZSBlbm91Z2ggaW4gdGhlIGJ1ZmZlclxuICAgICAgICAgICAgLy8gdG8gZW1pdCBhIGZ1bGwgcGFja2V0XG4gICAgICAgICAgICAvLyBBZGQgdG8gYnl0ZUluZGV4IHRvIHN1cHBvcnQgbXVsdGlwbGUgSUQzIHRhZ3MgaW4gc2VxdWVuY2VcblxuICAgICAgICAgICAgaWYgKGJ5dGVJbmRleCArIGZyYW1lU2l6ZSA+IGV2ZXJ5dGhpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjaHVuayA9IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3RpbWVkLW1ldGFkYXRhJyxcbiAgICAgICAgICAgICAgZGF0YTogZXZlcnl0aGluZy5zdWJhcnJheShieXRlSW5kZXgsIGJ5dGVJbmRleCArIGZyYW1lU2l6ZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2RhdGEnLCBjaHVuayk7XG4gICAgICAgICAgICBieXRlSW5kZXggKz0gZnJhbWVTaXplO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfSBlbHNlIGlmICgoZXZlcnl0aGluZ1tieXRlSW5kZXhdICYgMHhmZikgPT09IDB4ZmYgJiYgKGV2ZXJ5dGhpbmdbYnl0ZUluZGV4ICsgMV0gJiAweGYwKSA9PT0gMHhmMCkge1xuICAgICAgICAgICAgLy8gRXhpdCBlYXJseSBiZWNhdXNlIHdlIGRvbid0IGhhdmUgZW5vdWdoIHRvIHBhcnNlXG4gICAgICAgICAgICAvLyB0aGUgQURUUyBmcmFtZSBoZWFkZXJcbiAgICAgICAgICAgIGlmIChldmVyeXRoaW5nLmxlbmd0aCAtIGJ5dGVJbmRleCA8IDcpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZyYW1lU2l6ZSA9IHV0aWxzLnBhcnNlQWR0c1NpemUoZXZlcnl0aGluZywgYnl0ZUluZGV4KTsgLy8gRXhpdCBlYXJseSBpZiB3ZSBkb24ndCBoYXZlIGVub3VnaCBpbiB0aGUgYnVmZmVyXG4gICAgICAgICAgICAvLyB0byBlbWl0IGEgZnVsbCBwYWNrZXRcblxuICAgICAgICAgICAgaWYgKGJ5dGVJbmRleCArIGZyYW1lU2l6ZSA+IGV2ZXJ5dGhpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYWNrZXQgPSB7XG4gICAgICAgICAgICAgIHR5cGU6ICdhdWRpbycsXG4gICAgICAgICAgICAgIGRhdGE6IGV2ZXJ5dGhpbmcuc3ViYXJyYXkoYnl0ZUluZGV4LCBieXRlSW5kZXggKyBmcmFtZVNpemUpLFxuICAgICAgICAgICAgICBwdHM6IHRpbWVTdGFtcCxcbiAgICAgICAgICAgICAgZHRzOiB0aW1lU3RhbXBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2RhdGEnLCBwYWNrZXQpO1xuICAgICAgICAgICAgYnl0ZUluZGV4ICs9IGZyYW1lU2l6ZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJ5dGVJbmRleCsrO1xuICAgICAgICB9XG5cbiAgICAgICAgYnl0ZXNMZWZ0ID0gZXZlcnl0aGluZy5sZW5ndGggLSBieXRlSW5kZXg7XG5cbiAgICAgICAgaWYgKGJ5dGVzTGVmdCA+IDApIHtcbiAgICAgICAgICBldmVyeXRoaW5nID0gZXZlcnl0aGluZy5zdWJhcnJheShieXRlSW5kZXgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGV2ZXJ5dGhpbmcgPSBuZXcgVWludDhBcnJheSgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBfQWFjU3RyZWFtLnByb3RvdHlwZSA9IG5ldyBzdHJlYW0oKTtcbiAgICB2YXIgYWFjID0gX0FhY1N0cmVhbTtcbiAgICB2YXIgSDI2NFN0cmVhbSA9IGgyNjQuSDI2NFN0cmVhbTtcbiAgICB2YXIgaXNMaWtlbHlBYWNEYXRhJDEgPSB1dGlscy5pc0xpa2VseUFhY0RhdGE7IC8vIGNvbnN0YW50c1xuXG4gICAgdmFyIEFVRElPX1BST1BFUlRJRVMgPSBbJ2F1ZGlvb2JqZWN0dHlwZScsICdjaGFubmVsY291bnQnLCAnc2FtcGxlcmF0ZScsICdzYW1wbGluZ2ZyZXF1ZW5jeWluZGV4JywgJ3NhbXBsZXNpemUnXTtcbiAgICB2YXIgVklERU9fUFJPUEVSVElFUyA9IFsnd2lkdGgnLCAnaGVpZ2h0JywgJ3Byb2ZpbGVJZGMnLCAnbGV2ZWxJZGMnLCAncHJvZmlsZUNvbXBhdGliaWxpdHknXTsgLy8gb2JqZWN0IHR5cGVzXG5cbiAgICB2YXIgX1ZpZGVvU2VnbWVudFN0cmVhbSwgX0F1ZGlvU2VnbWVudFN0cmVhbSwgX1RyYW5zbXV4ZXIsIF9Db2FsZXNjZVN0cmVhbTtcbiAgICAvKipcbiAgICAgKiBDb21wYXJlIHR3byBhcnJheXMgKGV2ZW4gdHlwZWQpIGZvciBzYW1lLW5lc3NcbiAgICAgKi9cblxuXG4gICAgdmFyIGFycmF5RXF1YWxzID0gZnVuY3Rpb24gYXJyYXlFcXVhbHMoYSwgYikge1xuICAgICAgdmFyIGk7XG5cbiAgICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSAvLyBjb21wYXJlIHRoZSB2YWx1ZSBvZiBlYWNoIGVsZW1lbnQgaW4gdGhlIGFycmF5XG5cblxuICAgICAgZm9yIChpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHZhciBnZW5lcmF0ZVZpZGVvU2VnbWVudFRpbWluZ0luZm8gPSBmdW5jdGlvbiBnZW5lcmF0ZVZpZGVvU2VnbWVudFRpbWluZ0luZm8oYmFzZU1lZGlhRGVjb2RlVGltZSwgc3RhcnREdHMsIHN0YXJ0UHRzLCBlbmREdHMsIGVuZFB0cywgcHJlcGVuZGVkQ29udGVudER1cmF0aW9uKSB7XG4gICAgICB2YXIgcHRzT2Zmc2V0RnJvbUR0cyA9IHN0YXJ0UHRzIC0gc3RhcnREdHMsXG4gICAgICAgICAgZGVjb2RlRHVyYXRpb24gPSBlbmREdHMgLSBzdGFydER0cyxcbiAgICAgICAgICBwcmVzZW50YXRpb25EdXJhdGlvbiA9IGVuZFB0cyAtIHN0YXJ0UHRzOyAvLyBUaGUgUFRTIGFuZCBEVFMgdmFsdWVzIGFyZSBiYXNlZCBvbiB0aGUgYWN0dWFsIHN0cmVhbSB0aW1lcyBmcm9tIHRoZSBzZWdtZW50LFxuICAgICAgLy8gaG93ZXZlciwgdGhlIHBsYXllciB0aW1lIHZhbHVlcyB3aWxsIHJlZmxlY3QgYSBzdGFydCBmcm9tIHRoZSBiYXNlTWVkaWFEZWNvZGVUaW1lLlxuICAgICAgLy8gSW4gb3JkZXIgdG8gcHJvdmlkZSByZWxldmFudCB2YWx1ZXMgZm9yIHRoZSBwbGF5ZXIgdGltZXMsIGJhc2UgdGltaW5nIGluZm8gb24gdGhlXG4gICAgICAvLyBiYXNlTWVkaWFEZWNvZGVUaW1lIGFuZCB0aGUgRFRTIGFuZCBQVFMgZHVyYXRpb25zIG9mIHRoZSBzZWdtZW50LlxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGFydDoge1xuICAgICAgICAgIGR0czogYmFzZU1lZGlhRGVjb2RlVGltZSxcbiAgICAgICAgICBwdHM6IGJhc2VNZWRpYURlY29kZVRpbWUgKyBwdHNPZmZzZXRGcm9tRHRzXG4gICAgICAgIH0sXG4gICAgICAgIGVuZDoge1xuICAgICAgICAgIGR0czogYmFzZU1lZGlhRGVjb2RlVGltZSArIGRlY29kZUR1cmF0aW9uLFxuICAgICAgICAgIHB0czogYmFzZU1lZGlhRGVjb2RlVGltZSArIHByZXNlbnRhdGlvbkR1cmF0aW9uXG4gICAgICAgIH0sXG4gICAgICAgIHByZXBlbmRlZENvbnRlbnREdXJhdGlvbjogcHJlcGVuZGVkQ29udGVudER1cmF0aW9uLFxuICAgICAgICBiYXNlTWVkaWFEZWNvZGVUaW1lOiBiYXNlTWVkaWFEZWNvZGVUaW1lXG4gICAgICB9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIHNpbmdsZS10cmFjaywgSVNPIEJNRkYgbWVkaWEgc2VnbWVudCBmcm9tIEFBQyBkYXRhXG4gICAgICogZXZlbnRzLiBUaGUgb3V0cHV0IG9mIHRoaXMgc3RyZWFtIGNhbiBiZSBmZWQgdG8gYSBTb3VyY2VCdWZmZXJcbiAgICAgKiBjb25maWd1cmVkIHdpdGggYSBzdWl0YWJsZSBpbml0aWFsaXphdGlvbiBzZWdtZW50LlxuICAgICAqIEBwYXJhbSB0cmFjayB7b2JqZWN0fSB0cmFjayBtZXRhZGF0YSBjb25maWd1cmF0aW9uXG4gICAgICogQHBhcmFtIG9wdGlvbnMge29iamVjdH0gdHJhbnNtdXhlciBvcHRpb25zIG9iamVjdFxuICAgICAqIEBwYXJhbSBvcHRpb25zLmtlZXBPcmlnaW5hbFRpbWVzdGFtcHMge2Jvb2xlYW59IElmIHRydWUsIGtlZXAgdGhlIHRpbWVzdGFtcHNcbiAgICAgKiAgICAgICAgaW4gdGhlIHNvdXJjZTsgZmFsc2UgdG8gYWRqdXN0IHRoZSBmaXJzdCBzZWdtZW50IHRvIHN0YXJ0IGF0IDAuXG4gICAgICovXG5cblxuICAgIF9BdWRpb1NlZ21lbnRTdHJlYW0gPSBmdW5jdGlvbiBBdWRpb1NlZ21lbnRTdHJlYW0odHJhY2ssIG9wdGlvbnMpIHtcbiAgICAgIHZhciBhZHRzRnJhbWVzID0gW10sXG4gICAgICAgICAgc2VxdWVuY2VOdW1iZXIgPSAwLFxuICAgICAgICAgIGVhcmxpZXN0QWxsb3dlZER0cyA9IDAsXG4gICAgICAgICAgYXVkaW9BcHBlbmRTdGFydFRzID0gMCxcbiAgICAgICAgICB2aWRlb0Jhc2VNZWRpYURlY29kZVRpbWUgPSBJbmZpbml0eTtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICBfQXVkaW9TZWdtZW50U3RyZWFtLnByb3RvdHlwZS5pbml0LmNhbGwodGhpcyk7XG5cbiAgICAgIHRoaXMucHVzaCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHRyYWNrRGVjb2RlSW5mby5jb2xsZWN0RHRzSW5mbyh0cmFjaywgZGF0YSk7XG5cbiAgICAgICAgaWYgKHRyYWNrKSB7XG4gICAgICAgICAgQVVESU9fUFJPUEVSVElFUy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgICAgICB0cmFja1twcm9wXSA9IGRhdGFbcHJvcF07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gLy8gYnVmZmVyIGF1ZGlvIGRhdGEgdW50aWwgZW5kKCkgaXMgY2FsbGVkXG5cblxuICAgICAgICBhZHRzRnJhbWVzLnB1c2goZGF0YSk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLnNldEVhcmxpZXN0RHRzID0gZnVuY3Rpb24gKGVhcmxpZXN0RHRzKSB7XG4gICAgICAgIGVhcmxpZXN0QWxsb3dlZER0cyA9IGVhcmxpZXN0RHRzIC0gdHJhY2sudGltZWxpbmVTdGFydEluZm8uYmFzZU1lZGlhRGVjb2RlVGltZTtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuc2V0VmlkZW9CYXNlTWVkaWFEZWNvZGVUaW1lID0gZnVuY3Rpb24gKGJhc2VNZWRpYURlY29kZVRpbWUpIHtcbiAgICAgICAgdmlkZW9CYXNlTWVkaWFEZWNvZGVUaW1lID0gYmFzZU1lZGlhRGVjb2RlVGltZTtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuc2V0QXVkaW9BcHBlbmRTdGFydCA9IGZ1bmN0aW9uICh0aW1lc3RhbXApIHtcbiAgICAgICAgYXVkaW9BcHBlbmRTdGFydFRzID0gdGltZXN0YW1wO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZyYW1lcywgbW9vZiwgbWRhdCwgYm94ZXM7IC8vIHJldHVybiBlYXJseSBpZiBubyBhdWRpbyBkYXRhIGhhcyBiZWVuIG9ic2VydmVkXG5cbiAgICAgICAgaWYgKGFkdHNGcmFtZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyKCdkb25lJywgJ0F1ZGlvU2VnbWVudFN0cmVhbScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZyYW1lcyA9IGF1ZGlvRnJhbWVVdGlscy50cmltQWR0c0ZyYW1lc0J5RWFybGllc3REdHMoYWR0c0ZyYW1lcywgdHJhY2ssIGVhcmxpZXN0QWxsb3dlZER0cyk7XG4gICAgICAgIHRyYWNrLmJhc2VNZWRpYURlY29kZVRpbWUgPSB0cmFja0RlY29kZUluZm8uY2FsY3VsYXRlVHJhY2tCYXNlTWVkaWFEZWNvZGVUaW1lKHRyYWNrLCBvcHRpb25zLmtlZXBPcmlnaW5hbFRpbWVzdGFtcHMpO1xuICAgICAgICBhdWRpb0ZyYW1lVXRpbHMucHJlZml4V2l0aFNpbGVuY2UodHJhY2ssIGZyYW1lcywgYXVkaW9BcHBlbmRTdGFydFRzLCB2aWRlb0Jhc2VNZWRpYURlY29kZVRpbWUpOyAvLyB3ZSBoYXZlIHRvIGJ1aWxkIHRoZSBpbmRleCBmcm9tIGJ5dGUgbG9jYXRpb25zIHRvXG4gICAgICAgIC8vIHNhbXBsZXMgKHRoYXQgaXMsIGFkdHMgZnJhbWVzKSBpbiB0aGUgYXVkaW8gZGF0YVxuXG4gICAgICAgIHRyYWNrLnNhbXBsZXMgPSBhdWRpb0ZyYW1lVXRpbHMuZ2VuZXJhdGVTYW1wbGVUYWJsZShmcmFtZXMpOyAvLyBjb25jYXRlbmF0ZSB0aGUgYXVkaW8gZGF0YSB0byBjb25zdHVjdCB0aGUgbWRhdFxuXG4gICAgICAgIG1kYXQgPSBtcDRHZW5lcmF0b3IubWRhdChhdWRpb0ZyYW1lVXRpbHMuY29uY2F0ZW5hdGVGcmFtZURhdGEoZnJhbWVzKSk7XG4gICAgICAgIGFkdHNGcmFtZXMgPSBbXTtcbiAgICAgICAgbW9vZiA9IG1wNEdlbmVyYXRvci5tb29mKHNlcXVlbmNlTnVtYmVyLCBbdHJhY2tdKTtcbiAgICAgICAgYm94ZXMgPSBuZXcgVWludDhBcnJheShtb29mLmJ5dGVMZW5ndGggKyBtZGF0LmJ5dGVMZW5ndGgpOyAvLyBidW1wIHRoZSBzZXF1ZW5jZSBudW1iZXIgZm9yIG5leHQgdGltZVxuXG4gICAgICAgIHNlcXVlbmNlTnVtYmVyKys7XG4gICAgICAgIGJveGVzLnNldChtb29mKTtcbiAgICAgICAgYm94ZXMuc2V0KG1kYXQsIG1vb2YuYnl0ZUxlbmd0aCk7XG4gICAgICAgIHRyYWNrRGVjb2RlSW5mby5jbGVhckR0c0luZm8odHJhY2spO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2RhdGEnLCB7XG4gICAgICAgICAgdHJhY2s6IHRyYWNrLFxuICAgICAgICAgIGJveGVzOiBib3hlc1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdkb25lJywgJ0F1ZGlvU2VnbWVudFN0cmVhbScpO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgX0F1ZGlvU2VnbWVudFN0cmVhbS5wcm90b3R5cGUgPSBuZXcgc3RyZWFtKCk7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIHNpbmdsZS10cmFjaywgSVNPIEJNRkYgbWVkaWEgc2VnbWVudCBmcm9tIEgyNjQgZGF0YVxuICAgICAqIGV2ZW50cy4gVGhlIG91dHB1dCBvZiB0aGlzIHN0cmVhbSBjYW4gYmUgZmVkIHRvIGEgU291cmNlQnVmZmVyXG4gICAgICogY29uZmlndXJlZCB3aXRoIGEgc3VpdGFibGUgaW5pdGlhbGl6YXRpb24gc2VnbWVudC5cbiAgICAgKiBAcGFyYW0gdHJhY2sge29iamVjdH0gdHJhY2sgbWV0YWRhdGEgY29uZmlndXJhdGlvblxuICAgICAqIEBwYXJhbSBvcHRpb25zIHtvYmplY3R9IHRyYW5zbXV4ZXIgb3B0aW9ucyBvYmplY3RcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5hbGlnbkdvcHNBdEVuZCB7Ym9vbGVhbn0gSWYgdHJ1ZSwgc3RhcnQgZnJvbSB0aGUgZW5kIG9mIHRoZVxuICAgICAqICAgICAgICBnb3BzVG9BbGlnbldpdGggbGlzdCB3aGVuIGF0dGVtcHRpbmcgdG8gYWxpZ24gZ29wIHB0c1xuICAgICAqIEBwYXJhbSBvcHRpb25zLmtlZXBPcmlnaW5hbFRpbWVzdGFtcHMge2Jvb2xlYW59IElmIHRydWUsIGtlZXAgdGhlIHRpbWVzdGFtcHNcbiAgICAgKiAgICAgICAgaW4gdGhlIHNvdXJjZTsgZmFsc2UgdG8gYWRqdXN0IHRoZSBmaXJzdCBzZWdtZW50IHRvIHN0YXJ0IGF0IDAuXG4gICAgICovXG5cbiAgICBfVmlkZW9TZWdtZW50U3RyZWFtID0gZnVuY3Rpb24gVmlkZW9TZWdtZW50U3RyZWFtKHRyYWNrLCBvcHRpb25zKSB7XG4gICAgICB2YXIgc2VxdWVuY2VOdW1iZXIgPSAwLFxuICAgICAgICAgIG5hbFVuaXRzID0gW10sXG4gICAgICAgICAgZ29wc1RvQWxpZ25XaXRoID0gW10sXG4gICAgICAgICAgY29uZmlnLFxuICAgICAgICAgIHBwcztcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICBfVmlkZW9TZWdtZW50U3RyZWFtLnByb3RvdHlwZS5pbml0LmNhbGwodGhpcyk7XG5cbiAgICAgIGRlbGV0ZSB0cmFjay5taW5QVFM7XG4gICAgICB0aGlzLmdvcENhY2hlXyA9IFtdO1xuICAgICAgLyoqXG4gICAgICAgICogQ29uc3RydWN0cyBhIElTTyBCTUZGIHNlZ21lbnQgZ2l2ZW4gSDI2NCBuYWxVbml0c1xuICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBuYWxVbml0IEEgZGF0YSBldmVudCByZXByZXNlbnRpbmcgYSBuYWxVbml0XG4gICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbFVuaXQubmFsVW5pdFR5cGVcbiAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gbmFsVW5pdC5jb25maWcgUHJvcGVydGllcyBmb3IgYSBtcDQgdHJhY2tcbiAgICAgICAgKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IG5hbFVuaXQuZGF0YSBUaGUgbmFsVW5pdCBieXRlc1xuICAgICAgICAqIEBzZWUgbGliL2NvZGVjcy9oMjY0LmpzXG4gICAgICAgKiovXG5cbiAgICAgIHRoaXMucHVzaCA9IGZ1bmN0aW9uIChuYWxVbml0KSB7XG4gICAgICAgIHRyYWNrRGVjb2RlSW5mby5jb2xsZWN0RHRzSW5mbyh0cmFjaywgbmFsVW5pdCk7IC8vIHJlY29yZCB0aGUgdHJhY2sgY29uZmlnXG5cbiAgICAgICAgaWYgKG5hbFVuaXQubmFsVW5pdFR5cGUgPT09ICdzZXFfcGFyYW1ldGVyX3NldF9yYnNwJyAmJiAhY29uZmlnKSB7XG4gICAgICAgICAgY29uZmlnID0gbmFsVW5pdC5jb25maWc7XG4gICAgICAgICAgdHJhY2suc3BzID0gW25hbFVuaXQuZGF0YV07XG4gICAgICAgICAgVklERU9fUFJPUEVSVElFUy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgICAgICB0cmFja1twcm9wXSA9IGNvbmZpZ1twcm9wXTtcbiAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuYWxVbml0Lm5hbFVuaXRUeXBlID09PSAncGljX3BhcmFtZXRlcl9zZXRfcmJzcCcgJiYgIXBwcykge1xuICAgICAgICAgIHBwcyA9IG5hbFVuaXQuZGF0YTtcbiAgICAgICAgICB0cmFjay5wcHMgPSBbbmFsVW5pdC5kYXRhXTtcbiAgICAgICAgfSAvLyBidWZmZXIgdmlkZW8gdW50aWwgZmx1c2goKSBpcyBjYWxsZWRcblxuXG4gICAgICAgIG5hbFVuaXRzLnB1c2gobmFsVW5pdCk7XG4gICAgICB9O1xuICAgICAgLyoqXG4gICAgICAgICogUGFzcyBjb25zdHJ1Y3RlZCBJU08gQk1GRiB0cmFjayBhbmQgYm94ZXMgb24gdG8gdGhlXG4gICAgICAgICogbmV4dCBzdHJlYW0gaW4gdGhlIHBpcGVsaW5lXG4gICAgICAgKiovXG5cblxuICAgICAgdGhpcy5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZyYW1lcyxcbiAgICAgICAgICAgIGdvcEZvckZ1c2lvbixcbiAgICAgICAgICAgIGdvcHMsXG4gICAgICAgICAgICBtb29mLFxuICAgICAgICAgICAgbWRhdCxcbiAgICAgICAgICAgIGJveGVzLFxuICAgICAgICAgICAgcHJlcGVuZGVkQ29udGVudER1cmF0aW9uID0gMCxcbiAgICAgICAgICAgIGZpcnN0R29wLFxuICAgICAgICAgICAgbGFzdEdvcDsgLy8gVGhyb3cgYXdheSBuYWxVbml0cyBhdCB0aGUgc3RhcnQgb2YgdGhlIGJ5dGUgc3RyZWFtIHVudGlsXG4gICAgICAgIC8vIHdlIGZpbmQgdGhlIGZpcnN0IEFVRFxuXG4gICAgICAgIHdoaWxlIChuYWxVbml0cy5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAobmFsVW5pdHNbMF0ubmFsVW5pdFR5cGUgPT09ICdhY2Nlc3NfdW5pdF9kZWxpbWl0ZXJfcmJzcCcpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG5hbFVuaXRzLnNoaWZ0KCk7XG4gICAgICAgIH0gLy8gUmV0dXJuIGVhcmx5IGlmIG5vIHZpZGVvIGRhdGEgaGFzIGJlZW4gb2JzZXJ2ZWRcblxuXG4gICAgICAgIGlmIChuYWxVbml0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLnJlc2V0U3RyZWFtXygpO1xuICAgICAgICAgIHRoaXMudHJpZ2dlcignZG9uZScsICdWaWRlb1NlZ21lbnRTdHJlYW0nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gT3JnYW5pemUgdGhlIHJhdyBuYWwtdW5pdHMgaW50byBhcnJheXMgdGhhdCByZXByZXNlbnRcbiAgICAgICAgLy8gaGlnaGVyLWxldmVsIGNvbnN0cnVjdHMgc3VjaCBhcyBmcmFtZXMgYW5kIGdvcHNcbiAgICAgICAgLy8gKGdyb3VwLW9mLXBpY3R1cmVzKVxuXG5cbiAgICAgICAgZnJhbWVzID0gZnJhbWVVdGlscy5ncm91cE5hbHNJbnRvRnJhbWVzKG5hbFVuaXRzKTtcbiAgICAgICAgZ29wcyA9IGZyYW1lVXRpbHMuZ3JvdXBGcmFtZXNJbnRvR29wcyhmcmFtZXMpOyAvLyBJZiB0aGUgZmlyc3QgZnJhbWUgb2YgdGhpcyBmcmFnbWVudCBpcyBub3QgYSBrZXlmcmFtZSB3ZSBoYXZlXG4gICAgICAgIC8vIGEgcHJvYmxlbSBzaW5jZSBNU0UgKG9uIENocm9tZSkgcmVxdWlyZXMgYSBsZWFkaW5nIGtleWZyYW1lLlxuICAgICAgICAvL1xuICAgICAgICAvLyBXZSBoYXZlIHR3byBhcHByb2FjaGVzIHRvIHJlcGFpcmluZyB0aGlzIHNpdHVhdGlvbjpcbiAgICAgICAgLy8gMSkgR09QLUZVU0lPTjpcbiAgICAgICAgLy8gICAgVGhpcyBpcyB3aGVyZSB3ZSBrZWVwIHRyYWNrIG9mIHRoZSBHT1BTIChncm91cC1vZi1waWN0dXJlcylcbiAgICAgICAgLy8gICAgZnJvbSBwcmV2aW91cyBmcmFnbWVudHMgYW5kIGF0dGVtcHQgdG8gZmluZCBvbmUgdGhhdCB3ZSBjYW5cbiAgICAgICAgLy8gICAgcHJlcGVuZCB0byB0aGUgY3VycmVudCBmcmFnbWVudCBpbiBvcmRlciB0byBjcmVhdGUgYSB2YWxpZFxuICAgICAgICAvLyAgICBmcmFnbWVudC5cbiAgICAgICAgLy8gMikgS0VZRlJBTUUtUFVMTElORzpcbiAgICAgICAgLy8gICAgSGVyZSB3ZSBzZWFyY2ggZm9yIHRoZSBmaXJzdCBrZXlmcmFtZSBpbiB0aGUgZnJhZ21lbnQgYW5kXG4gICAgICAgIC8vICAgIHRocm93IGF3YXkgYWxsIHRoZSBmcmFtZXMgYmV0d2VlbiB0aGUgc3RhcnQgb2YgdGhlIGZyYWdtZW50XG4gICAgICAgIC8vICAgIGFuZCB0aGF0IGtleWZyYW1lLiBXZSB0aGVuIGV4dGVuZCB0aGUgZHVyYXRpb24gYW5kIHB1bGwgdGhlXG4gICAgICAgIC8vICAgIFBUUyBvZiB0aGUga2V5ZnJhbWUgZm9yd2FyZCBzbyB0aGF0IGl0IGNvdmVycyB0aGUgdGltZSByYW5nZVxuICAgICAgICAvLyAgICBvZiB0aGUgZnJhbWVzIHRoYXQgd2VyZSBkaXNwb3NlZCBvZi5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gIzEgaXMgZmFyIHByZWZlcmVhYmxlIG92ZXIgIzIgd2hpY2ggY2FuIGNhdXNlIFwic3R1dHRlcmluZ1wiIGJ1dFxuICAgICAgICAvLyByZXF1aXJlcyBtb3JlIHRoaW5ncyB0byBiZSBqdXN0IHJpZ2h0LlxuXG4gICAgICAgIGlmICghZ29wc1swXVswXS5rZXlGcmFtZSkge1xuICAgICAgICAgIC8vIFNlYXJjaCBmb3IgYSBnb3AgZm9yIGZ1c2lvbiBmcm9tIG91ciBnb3BDYWNoZVxuICAgICAgICAgIGdvcEZvckZ1c2lvbiA9IHRoaXMuZ2V0R29wRm9yRnVzaW9uXyhuYWxVbml0c1swXSwgdHJhY2spO1xuXG4gICAgICAgICAgaWYgKGdvcEZvckZ1c2lvbikge1xuICAgICAgICAgICAgLy8gaW4gb3JkZXIgdG8gcHJvdmlkZSBtb3JlIGFjY3VyYXRlIHRpbWluZyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgc2VnbWVudCwgc2F2ZVxuICAgICAgICAgICAgLy8gdGhlIG51bWJlciBvZiBzZWNvbmRzIHByZXBlbmRlZCB0byB0aGUgb3JpZ2luYWwgc2VnbWVudCBkdWUgdG8gR09QIGZ1c2lvblxuICAgICAgICAgICAgcHJlcGVuZGVkQ29udGVudER1cmF0aW9uID0gZ29wRm9yRnVzaW9uLmR1cmF0aW9uO1xuICAgICAgICAgICAgZ29wcy51bnNoaWZ0KGdvcEZvckZ1c2lvbik7IC8vIEFkanVzdCBHb3BzJyBtZXRhZGF0YSB0byBhY2NvdW50IGZvciB0aGUgaW5jbHVzaW9uIG9mIHRoZVxuICAgICAgICAgICAgLy8gbmV3IGdvcCBhdCB0aGUgYmVnaW5uaW5nXG5cbiAgICAgICAgICAgIGdvcHMuYnl0ZUxlbmd0aCArPSBnb3BGb3JGdXNpb24uYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgIGdvcHMubmFsQ291bnQgKz0gZ29wRm9yRnVzaW9uLm5hbENvdW50O1xuICAgICAgICAgICAgZ29wcy5wdHMgPSBnb3BGb3JGdXNpb24ucHRzO1xuICAgICAgICAgICAgZ29wcy5kdHMgPSBnb3BGb3JGdXNpb24uZHRzO1xuICAgICAgICAgICAgZ29wcy5kdXJhdGlvbiArPSBnb3BGb3JGdXNpb24uZHVyYXRpb247XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2FuZGlkYXRlIGdvcCBmYWxsIGJhY2sgdG8ga2V5ZnJhbWUtcHVsbGluZ1xuICAgICAgICAgICAgZ29wcyA9IGZyYW1lVXRpbHMuZXh0ZW5kRmlyc3RLZXlGcmFtZShnb3BzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gLy8gVHJpbSBnb3BzIHRvIGFsaWduIHdpdGggZ29wc1RvQWxpZ25XaXRoXG5cblxuICAgICAgICBpZiAoZ29wc1RvQWxpZ25XaXRoLmxlbmd0aCkge1xuICAgICAgICAgIHZhciBhbGlnbmVkR29wcztcblxuICAgICAgICAgIGlmIChvcHRpb25zLmFsaWduR29wc0F0RW5kKSB7XG4gICAgICAgICAgICBhbGlnbmVkR29wcyA9IHRoaXMuYWxpZ25Hb3BzQXRFbmRfKGdvcHMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhbGlnbmVkR29wcyA9IHRoaXMuYWxpZ25Hb3BzQXRTdGFydF8oZ29wcyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFhbGlnbmVkR29wcykge1xuICAgICAgICAgICAgLy8gc2F2ZSBhbGwgdGhlIG5hbHMgaW4gdGhlIGxhc3QgR09QIGludG8gdGhlIGdvcCBjYWNoZVxuICAgICAgICAgICAgdGhpcy5nb3BDYWNoZV8udW5zaGlmdCh7XG4gICAgICAgICAgICAgIGdvcDogZ29wcy5wb3AoKSxcbiAgICAgICAgICAgICAgcHBzOiB0cmFjay5wcHMsXG4gICAgICAgICAgICAgIHNwczogdHJhY2suc3BzXG4gICAgICAgICAgICB9KTsgLy8gS2VlcCBhIG1heGltdW0gb2YgNiBHT1BzIGluIHRoZSBjYWNoZVxuXG4gICAgICAgICAgICB0aGlzLmdvcENhY2hlXy5sZW5ndGggPSBNYXRoLm1pbig2LCB0aGlzLmdvcENhY2hlXy5sZW5ndGgpOyAvLyBDbGVhciBuYWxVbml0c1xuXG4gICAgICAgICAgICBuYWxVbml0cyA9IFtdOyAvLyByZXR1cm4gZWFybHkgbm8gZ29wcyBjYW4gYmUgYWxpZ25lZCB3aXRoIGRlc2lyZWQgZ29wc1RvQWxpZ25XaXRoXG5cbiAgICAgICAgICAgIHRoaXMucmVzZXRTdHJlYW1fKCk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2RvbmUnLCAnVmlkZW9TZWdtZW50U3RyZWFtJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSAvLyBTb21lIGdvcHMgd2VyZSB0cmltbWVkLiBjbGVhciBkdHMgaW5mbyBzbyBtaW5TZWdtZW50RHRzIGFuZCBwdHMgYXJlIGNvcnJlY3RcbiAgICAgICAgICAvLyB3aGVuIHJlY2FsY3VsYXRlZCBiZWZvcmUgc2VuZGluZyBvZmYgdG8gQ29hbGVzY2VTdHJlYW1cblxuXG4gICAgICAgICAgdHJhY2tEZWNvZGVJbmZvLmNsZWFyRHRzSW5mbyh0cmFjayk7XG4gICAgICAgICAgZ29wcyA9IGFsaWduZWRHb3BzO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJhY2tEZWNvZGVJbmZvLmNvbGxlY3REdHNJbmZvKHRyYWNrLCBnb3BzKTsgLy8gRmlyc3QsIHdlIGhhdmUgdG8gYnVpbGQgdGhlIGluZGV4IGZyb20gYnl0ZSBsb2NhdGlvbnMgdG9cbiAgICAgICAgLy8gc2FtcGxlcyAodGhhdCBpcywgZnJhbWVzKSBpbiB0aGUgdmlkZW8gZGF0YVxuXG4gICAgICAgIHRyYWNrLnNhbXBsZXMgPSBmcmFtZVV0aWxzLmdlbmVyYXRlU2FtcGxlVGFibGUoZ29wcyk7IC8vIENvbmNhdGVuYXRlIHRoZSB2aWRlbyBkYXRhIGFuZCBjb25zdHJ1Y3QgdGhlIG1kYXRcblxuICAgICAgICBtZGF0ID0gbXA0R2VuZXJhdG9yLm1kYXQoZnJhbWVVdGlscy5jb25jYXRlbmF0ZU5hbERhdGEoZ29wcykpO1xuICAgICAgICB0cmFjay5iYXNlTWVkaWFEZWNvZGVUaW1lID0gdHJhY2tEZWNvZGVJbmZvLmNhbGN1bGF0ZVRyYWNrQmFzZU1lZGlhRGVjb2RlVGltZSh0cmFjaywgb3B0aW9ucy5rZWVwT3JpZ2luYWxUaW1lc3RhbXBzKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdwcm9jZXNzZWRHb3BzSW5mbycsIGdvcHMubWFwKGZ1bmN0aW9uIChnb3ApIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHRzOiBnb3AucHRzLFxuICAgICAgICAgICAgZHRzOiBnb3AuZHRzLFxuICAgICAgICAgICAgYnl0ZUxlbmd0aDogZ29wLmJ5dGVMZW5ndGhcbiAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgICAgIGZpcnN0R29wID0gZ29wc1swXTtcbiAgICAgICAgbGFzdEdvcCA9IGdvcHNbZ29wcy5sZW5ndGggLSAxXTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdzZWdtZW50VGltaW5nSW5mbycsIGdlbmVyYXRlVmlkZW9TZWdtZW50VGltaW5nSW5mbyh0cmFjay5iYXNlTWVkaWFEZWNvZGVUaW1lLCBmaXJzdEdvcC5kdHMsIGZpcnN0R29wLnB0cywgbGFzdEdvcC5kdHMgKyBsYXN0R29wLmR1cmF0aW9uLCBsYXN0R29wLnB0cyArIGxhc3RHb3AuZHVyYXRpb24sIHByZXBlbmRlZENvbnRlbnREdXJhdGlvbikpOyAvLyBzYXZlIGFsbCB0aGUgbmFscyBpbiB0aGUgbGFzdCBHT1AgaW50byB0aGUgZ29wIGNhY2hlXG5cbiAgICAgICAgdGhpcy5nb3BDYWNoZV8udW5zaGlmdCh7XG4gICAgICAgICAgZ29wOiBnb3BzLnBvcCgpLFxuICAgICAgICAgIHBwczogdHJhY2sucHBzLFxuICAgICAgICAgIHNwczogdHJhY2suc3BzXG4gICAgICAgIH0pOyAvLyBLZWVwIGEgbWF4aW11bSBvZiA2IEdPUHMgaW4gdGhlIGNhY2hlXG5cbiAgICAgICAgdGhpcy5nb3BDYWNoZV8ubGVuZ3RoID0gTWF0aC5taW4oNiwgdGhpcy5nb3BDYWNoZV8ubGVuZ3RoKTsgLy8gQ2xlYXIgbmFsVW5pdHNcblxuICAgICAgICBuYWxVbml0cyA9IFtdO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2Jhc2VNZWRpYURlY29kZVRpbWUnLCB0cmFjay5iYXNlTWVkaWFEZWNvZGVUaW1lKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCd0aW1lbGluZVN0YXJ0SW5mbycsIHRyYWNrLnRpbWVsaW5lU3RhcnRJbmZvKTtcbiAgICAgICAgbW9vZiA9IG1wNEdlbmVyYXRvci5tb29mKHNlcXVlbmNlTnVtYmVyLCBbdHJhY2tdKTsgLy8gaXQgd291bGQgYmUgZ3JlYXQgdG8gYWxsb2NhdGUgdGhpcyBhcnJheSB1cCBmcm9udCBpbnN0ZWFkIG9mXG4gICAgICAgIC8vIHRocm93aW5nIGF3YXkgaHVuZHJlZHMgb2YgbWVkaWEgc2VnbWVudCBmcmFnbWVudHNcblxuICAgICAgICBib3hlcyA9IG5ldyBVaW50OEFycmF5KG1vb2YuYnl0ZUxlbmd0aCArIG1kYXQuYnl0ZUxlbmd0aCk7IC8vIEJ1bXAgdGhlIHNlcXVlbmNlIG51bWJlciBmb3IgbmV4dCB0aW1lXG5cbiAgICAgICAgc2VxdWVuY2VOdW1iZXIrKztcbiAgICAgICAgYm94ZXMuc2V0KG1vb2YpO1xuICAgICAgICBib3hlcy5zZXQobWRhdCwgbW9vZi5ieXRlTGVuZ3RoKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywge1xuICAgICAgICAgIHRyYWNrOiB0cmFjayxcbiAgICAgICAgICBib3hlczogYm94ZXNcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmVzZXRTdHJlYW1fKCk7IC8vIENvbnRpbnVlIHdpdGggdGhlIGZsdXNoIHByb2Nlc3Mgbm93XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdkb25lJywgJ1ZpZGVvU2VnbWVudFN0cmVhbScpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5yZXNldFN0cmVhbV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRyYWNrRGVjb2RlSW5mby5jbGVhckR0c0luZm8odHJhY2spOyAvLyByZXNldCBjb25maWcgYW5kIHBwcyBiZWNhdXNlIHRoZXkgbWF5IGRpZmZlciBhY3Jvc3Mgc2VnbWVudHNcbiAgICAgICAgLy8gZm9yIGluc3RhbmNlLCB3aGVuIHdlIGFyZSByZW5kaXRpb24gc3dpdGNoaW5nXG5cbiAgICAgICAgY29uZmlnID0gdW5kZWZpbmVkO1xuICAgICAgICBwcHMgPSB1bmRlZmluZWQ7XG4gICAgICB9OyAvLyBTZWFyY2ggZm9yIGEgY2FuZGlkYXRlIEdvcCBmb3IgZ29wLWZ1c2lvbiBmcm9tIHRoZSBnb3AgY2FjaGUgYW5kXG4gICAgICAvLyByZXR1cm4gaXQgb3IgcmV0dXJuIG51bGwgaWYgbm8gZ29vZCBjYW5kaWRhdGUgd2FzIGZvdW5kXG5cblxuICAgICAgdGhpcy5nZXRHb3BGb3JGdXNpb25fID0gZnVuY3Rpb24gKG5hbFVuaXQpIHtcbiAgICAgICAgdmFyIGhhbGZTZWNvbmQgPSA0NTAwMCxcbiAgICAgICAgICAgIC8vIEhhbGYtYS1zZWNvbmQgaW4gYSA5MGtoeiBjbG9ja1xuICAgICAgICBhbGxvd2FibGVPdmVybGFwID0gMTAwMDAsXG4gICAgICAgICAgICAvLyBBYm91dCAzIGZyYW1lcyBAIDMwZnBzXG4gICAgICAgIG5lYXJlc3REaXN0YW5jZSA9IEluZmluaXR5LFxuICAgICAgICAgICAgZHRzRGlzdGFuY2UsXG4gICAgICAgICAgICBuZWFyZXN0R29wT2JqLFxuICAgICAgICAgICAgY3VycmVudEdvcCxcbiAgICAgICAgICAgIGN1cnJlbnRHb3BPYmosXG4gICAgICAgICAgICBpOyAvLyBTZWFyY2ggZm9yIHRoZSBHT1AgbmVhcmVzdCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoaXMgbmFsIHVuaXRcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5nb3BDYWNoZV8ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjdXJyZW50R29wT2JqID0gdGhpcy5nb3BDYWNoZV9baV07XG4gICAgICAgICAgY3VycmVudEdvcCA9IGN1cnJlbnRHb3BPYmouZ29wOyAvLyBSZWplY3QgR29wcyB3aXRoIGRpZmZlcmVudCBTUFMgb3IgUFBTXG5cbiAgICAgICAgICBpZiAoISh0cmFjay5wcHMgJiYgYXJyYXlFcXVhbHModHJhY2sucHBzWzBdLCBjdXJyZW50R29wT2JqLnBwc1swXSkpIHx8ICEodHJhY2suc3BzICYmIGFycmF5RXF1YWxzKHRyYWNrLnNwc1swXSwgY3VycmVudEdvcE9iai5zcHNbMF0pKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfSAvLyBSZWplY3QgR29wcyB0aGF0IHdvdWxkIHJlcXVpcmUgYSBuZWdhdGl2ZSBiYXNlTWVkaWFEZWNvZGVUaW1lXG5cblxuICAgICAgICAgIGlmIChjdXJyZW50R29wLmR0cyA8IHRyYWNrLnRpbWVsaW5lU3RhcnRJbmZvLmR0cykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfSAvLyBUaGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgZW5kIG9mIHRoZSBnb3AgYW5kIHRoZSBzdGFydCBvZiB0aGUgbmFsVW5pdFxuXG5cbiAgICAgICAgICBkdHNEaXN0YW5jZSA9IG5hbFVuaXQuZHRzIC0gY3VycmVudEdvcC5kdHMgLSBjdXJyZW50R29wLmR1cmF0aW9uOyAvLyBPbmx5IGNvbnNpZGVyIEdPUFMgdGhhdCBzdGFydCBiZWZvcmUgdGhlIG5hbCB1bml0IGFuZCBlbmQgd2l0aGluXG4gICAgICAgICAgLy8gYSBoYWxmLXNlY29uZCBvZiB0aGUgbmFsIHVuaXRcblxuICAgICAgICAgIGlmIChkdHNEaXN0YW5jZSA+PSAtYWxsb3dhYmxlT3ZlcmxhcCAmJiBkdHNEaXN0YW5jZSA8PSBoYWxmU2Vjb25kKSB7XG4gICAgICAgICAgICAvLyBBbHdheXMgdXNlIHRoZSBjbG9zZXN0IEdPUCB3ZSBmb3VuZCBpZiB0aGVyZSBpcyBtb3JlIHRoYW5cbiAgICAgICAgICAgIC8vIG9uZSBjYW5kaWRhdGVcbiAgICAgICAgICAgIGlmICghbmVhcmVzdEdvcE9iaiB8fCBuZWFyZXN0RGlzdGFuY2UgPiBkdHNEaXN0YW5jZSkge1xuICAgICAgICAgICAgICBuZWFyZXN0R29wT2JqID0gY3VycmVudEdvcE9iajtcbiAgICAgICAgICAgICAgbmVhcmVzdERpc3RhbmNlID0gZHRzRGlzdGFuY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5lYXJlc3RHb3BPYmopIHtcbiAgICAgICAgICByZXR1cm4gbmVhcmVzdEdvcE9iai5nb3A7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH07IC8vIHRyaW0gZ29wIGxpc3QgdG8gdGhlIGZpcnN0IGdvcCBmb3VuZCB0aGF0IGhhcyBhIG1hdGNoaW5nIHB0cyB3aXRoIGEgZ29wIGluIHRoZSBsaXN0XG4gICAgICAvLyBvZiBnb3BzVG9BbGlnbldpdGggc3RhcnRpbmcgZnJvbSB0aGUgU1RBUlQgb2YgdGhlIGxpc3RcblxuXG4gICAgICB0aGlzLmFsaWduR29wc0F0U3RhcnRfID0gZnVuY3Rpb24gKGdvcHMpIHtcbiAgICAgICAgdmFyIGFsaWduSW5kZXgsIGdvcEluZGV4LCBhbGlnbiwgZ29wLCBieXRlTGVuZ3RoLCBuYWxDb3VudCwgZHVyYXRpb24sIGFsaWduZWRHb3BzO1xuICAgICAgICBieXRlTGVuZ3RoID0gZ29wcy5ieXRlTGVuZ3RoO1xuICAgICAgICBuYWxDb3VudCA9IGdvcHMubmFsQ291bnQ7XG4gICAgICAgIGR1cmF0aW9uID0gZ29wcy5kdXJhdGlvbjtcbiAgICAgICAgYWxpZ25JbmRleCA9IGdvcEluZGV4ID0gMDtcblxuICAgICAgICB3aGlsZSAoYWxpZ25JbmRleCA8IGdvcHNUb0FsaWduV2l0aC5sZW5ndGggJiYgZ29wSW5kZXggPCBnb3BzLmxlbmd0aCkge1xuICAgICAgICAgIGFsaWduID0gZ29wc1RvQWxpZ25XaXRoW2FsaWduSW5kZXhdO1xuICAgICAgICAgIGdvcCA9IGdvcHNbZ29wSW5kZXhdO1xuXG4gICAgICAgICAgaWYgKGFsaWduLnB0cyA9PT0gZ29wLnB0cykge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGdvcC5wdHMgPiBhbGlnbi5wdHMpIHtcbiAgICAgICAgICAgIC8vIHRoaXMgY3VycmVudCBnb3Agc3RhcnRzIGFmdGVyIHRoZSBjdXJyZW50IGdvcCB3ZSB3YW50IHRvIGFsaWduIG9uLCBzbyBpbmNyZW1lbnRcbiAgICAgICAgICAgIC8vIGFsaWduIGluZGV4XG4gICAgICAgICAgICBhbGlnbkluZGV4Kys7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9IC8vIGN1cnJlbnQgZ29wIHN0YXJ0cyBiZWZvcmUgdGhlIGN1cnJlbnQgZ29wIHdlIHdhbnQgdG8gYWxpZ24gb24uIHNvIGluY3JlbWVudCBnb3BcbiAgICAgICAgICAvLyBpbmRleFxuXG5cbiAgICAgICAgICBnb3BJbmRleCsrO1xuICAgICAgICAgIGJ5dGVMZW5ndGggLT0gZ29wLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgbmFsQ291bnQgLT0gZ29wLm5hbENvdW50O1xuICAgICAgICAgIGR1cmF0aW9uIC09IGdvcC5kdXJhdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChnb3BJbmRleCA9PT0gMCkge1xuICAgICAgICAgIC8vIG5vIGdvcHMgdG8gdHJpbVxuICAgICAgICAgIHJldHVybiBnb3BzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGdvcEluZGV4ID09PSBnb3BzLmxlbmd0aCkge1xuICAgICAgICAgIC8vIGFsbCBnb3BzIHRyaW1tZWQsIHNraXAgYXBwZW5kaW5nIGFsbCBnb3BzXG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBhbGlnbmVkR29wcyA9IGdvcHMuc2xpY2UoZ29wSW5kZXgpO1xuICAgICAgICBhbGlnbmVkR29wcy5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aDtcbiAgICAgICAgYWxpZ25lZEdvcHMuZHVyYXRpb24gPSBkdXJhdGlvbjtcbiAgICAgICAgYWxpZ25lZEdvcHMubmFsQ291bnQgPSBuYWxDb3VudDtcbiAgICAgICAgYWxpZ25lZEdvcHMucHRzID0gYWxpZ25lZEdvcHNbMF0ucHRzO1xuICAgICAgICBhbGlnbmVkR29wcy5kdHMgPSBhbGlnbmVkR29wc1swXS5kdHM7XG4gICAgICAgIHJldHVybiBhbGlnbmVkR29wcztcbiAgICAgIH07IC8vIHRyaW0gZ29wIGxpc3QgdG8gdGhlIGZpcnN0IGdvcCBmb3VuZCB0aGF0IGhhcyBhIG1hdGNoaW5nIHB0cyB3aXRoIGEgZ29wIGluIHRoZSBsaXN0XG4gICAgICAvLyBvZiBnb3BzVG9BbGlnbldpdGggc3RhcnRpbmcgZnJvbSB0aGUgRU5EIG9mIHRoZSBsaXN0XG5cblxuICAgICAgdGhpcy5hbGlnbkdvcHNBdEVuZF8gPSBmdW5jdGlvbiAoZ29wcykge1xuICAgICAgICB2YXIgYWxpZ25JbmRleCwgZ29wSW5kZXgsIGFsaWduLCBnb3AsIGFsaWduRW5kSW5kZXgsIG1hdGNoRm91bmQ7XG4gICAgICAgIGFsaWduSW5kZXggPSBnb3BzVG9BbGlnbldpdGgubGVuZ3RoIC0gMTtcbiAgICAgICAgZ29wSW5kZXggPSBnb3BzLmxlbmd0aCAtIDE7XG4gICAgICAgIGFsaWduRW5kSW5kZXggPSBudWxsO1xuICAgICAgICBtYXRjaEZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgd2hpbGUgKGFsaWduSW5kZXggPj0gMCAmJiBnb3BJbmRleCA+PSAwKSB7XG4gICAgICAgICAgYWxpZ24gPSBnb3BzVG9BbGlnbldpdGhbYWxpZ25JbmRleF07XG4gICAgICAgICAgZ29wID0gZ29wc1tnb3BJbmRleF07XG5cbiAgICAgICAgICBpZiAoYWxpZ24ucHRzID09PSBnb3AucHRzKSB7XG4gICAgICAgICAgICBtYXRjaEZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChhbGlnbi5wdHMgPiBnb3AucHRzKSB7XG4gICAgICAgICAgICBhbGlnbkluZGV4LS07XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYWxpZ25JbmRleCA9PT0gZ29wc1RvQWxpZ25XaXRoLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIC8vIGdvcC5wdHMgaXMgZ3JlYXRlciB0aGFuIHRoZSBsYXN0IGFsaWdubWVudCBjYW5kaWRhdGUuIElmIG5vIG1hdGNoIGlzIGZvdW5kXG4gICAgICAgICAgICAvLyBieSB0aGUgZW5kIG9mIHRoaXMgbG9vcCwgd2Ugc3RpbGwgd2FudCB0byBhcHBlbmQgZ29wcyB0aGF0IGNvbWUgYWZ0ZXIgdGhpc1xuICAgICAgICAgICAgLy8gcG9pbnRcbiAgICAgICAgICAgIGFsaWduRW5kSW5kZXggPSBnb3BJbmRleDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBnb3BJbmRleC0tO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFtYXRjaEZvdW5kICYmIGFsaWduRW5kSW5kZXggPT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0cmltSW5kZXg7XG5cbiAgICAgICAgaWYgKG1hdGNoRm91bmQpIHtcbiAgICAgICAgICB0cmltSW5kZXggPSBnb3BJbmRleDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0cmltSW5kZXggPSBhbGlnbkVuZEluZGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRyaW1JbmRleCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBnb3BzO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFsaWduZWRHb3BzID0gZ29wcy5zbGljZSh0cmltSW5kZXgpO1xuICAgICAgICB2YXIgbWV0YWRhdGEgPSBhbGlnbmVkR29wcy5yZWR1Y2UoZnVuY3Rpb24gKHRvdGFsLCBnb3ApIHtcbiAgICAgICAgICB0b3RhbC5ieXRlTGVuZ3RoICs9IGdvcC5ieXRlTGVuZ3RoO1xuICAgICAgICAgIHRvdGFsLmR1cmF0aW9uICs9IGdvcC5kdXJhdGlvbjtcbiAgICAgICAgICB0b3RhbC5uYWxDb3VudCArPSBnb3AubmFsQ291bnQ7XG4gICAgICAgICAgcmV0dXJuIHRvdGFsO1xuICAgICAgICB9LCB7XG4gICAgICAgICAgYnl0ZUxlbmd0aDogMCxcbiAgICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgICBuYWxDb3VudDogMFxuICAgICAgICB9KTtcbiAgICAgICAgYWxpZ25lZEdvcHMuYnl0ZUxlbmd0aCA9IG1ldGFkYXRhLmJ5dGVMZW5ndGg7XG4gICAgICAgIGFsaWduZWRHb3BzLmR1cmF0aW9uID0gbWV0YWRhdGEuZHVyYXRpb247XG4gICAgICAgIGFsaWduZWRHb3BzLm5hbENvdW50ID0gbWV0YWRhdGEubmFsQ291bnQ7XG4gICAgICAgIGFsaWduZWRHb3BzLnB0cyA9IGFsaWduZWRHb3BzWzBdLnB0cztcbiAgICAgICAgYWxpZ25lZEdvcHMuZHRzID0gYWxpZ25lZEdvcHNbMF0uZHRzO1xuICAgICAgICByZXR1cm4gYWxpZ25lZEdvcHM7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLmFsaWduR29wc1dpdGggPSBmdW5jdGlvbiAobmV3R29wc1RvQWxpZ25XaXRoKSB7XG4gICAgICAgIGdvcHNUb0FsaWduV2l0aCA9IG5ld0dvcHNUb0FsaWduV2l0aDtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIF9WaWRlb1NlZ21lbnRTdHJlYW0ucHJvdG90eXBlID0gbmV3IHN0cmVhbSgpO1xuICAgIC8qKlxuICAgICAqIEEgU3RyZWFtIHRoYXQgY2FuIGNvbWJpbmUgbXVsdGlwbGUgc3RyZWFtcyAoaWUuIGF1ZGlvICYgdmlkZW8pXG4gICAgICogaW50byBhIHNpbmdsZSBvdXRwdXQgc2VnbWVudCBmb3IgTVNFLiBBbHNvIHN1cHBvcnRzIGF1ZGlvLW9ubHlcbiAgICAgKiBhbmQgdmlkZW8tb25seSBzdHJlYW1zLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIHtvYmplY3R9IHRyYW5zbXV4ZXIgb3B0aW9ucyBvYmplY3RcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5rZWVwT3JpZ2luYWxUaW1lc3RhbXBzIHtib29sZWFufSBJZiB0cnVlLCBrZWVwIHRoZSB0aW1lc3RhbXBzXG4gICAgICogICAgICAgIGluIHRoZSBzb3VyY2U7IGZhbHNlIHRvIGFkanVzdCB0aGUgZmlyc3Qgc2VnbWVudCB0byBzdGFydCBhdCBtZWRpYSB0aW1lbGluZSBzdGFydC5cbiAgICAgKi9cblxuICAgIF9Db2FsZXNjZVN0cmVhbSA9IGZ1bmN0aW9uIENvYWxlc2NlU3RyZWFtKG9wdGlvbnMsIG1ldGFkYXRhU3RyZWFtKSB7XG4gICAgICAvLyBOdW1iZXIgb2YgVHJhY2tzIHBlciBvdXRwdXQgc2VnbWVudFxuICAgICAgLy8gSWYgZ3JlYXRlciB0aGFuIDEsIHdlIGNvbWJpbmUgbXVsdGlwbGVcbiAgICAgIC8vIHRyYWNrcyBpbnRvIGEgc2luZ2xlIHNlZ21lbnRcbiAgICAgIHRoaXMubnVtYmVyT2ZUcmFja3MgPSAwO1xuICAgICAgdGhpcy5tZXRhZGF0YVN0cmVhbSA9IG1ldGFkYXRhU3RyZWFtO1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5yZW11eCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5yZW11eFRyYWNrcyA9ICEhb3B0aW9ucy5yZW11eDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVtdXhUcmFja3MgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMua2VlcE9yaWdpbmFsVGltZXN0YW1wcyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHRoaXMua2VlcE9yaWdpbmFsVGltZXN0YW1wcyA9IG9wdGlvbnMua2VlcE9yaWdpbmFsVGltZXN0YW1wcztcbiAgICAgIH1cblxuICAgICAgdGhpcy5wZW5kaW5nVHJhY2tzID0gW107XG4gICAgICB0aGlzLnZpZGVvVHJhY2sgPSBudWxsO1xuICAgICAgdGhpcy5wZW5kaW5nQm94ZXMgPSBbXTtcbiAgICAgIHRoaXMucGVuZGluZ0NhcHRpb25zID0gW107XG4gICAgICB0aGlzLnBlbmRpbmdNZXRhZGF0YSA9IFtdO1xuICAgICAgdGhpcy5wZW5kaW5nQnl0ZXMgPSAwO1xuICAgICAgdGhpcy5lbWl0dGVkVHJhY2tzID0gMDtcblxuICAgICAgX0NvYWxlc2NlU3RyZWFtLnByb3RvdHlwZS5pbml0LmNhbGwodGhpcyk7IC8vIFRha2Ugb3V0cHV0IGZyb20gbXVsdGlwbGVcblxuXG4gICAgICB0aGlzLnB1c2ggPSBmdW5jdGlvbiAob3V0cHV0KSB7XG4gICAgICAgIC8vIGJ1ZmZlciBpbmNvbWluZyBjYXB0aW9ucyB1bnRpbCB0aGUgYXNzb2NpYXRlZCB2aWRlbyBzZWdtZW50XG4gICAgICAgIC8vIGZpbmlzaGVzXG4gICAgICAgIGlmIChvdXRwdXQudGV4dCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnBlbmRpbmdDYXB0aW9ucy5wdXNoKG91dHB1dCk7XG4gICAgICAgIH0gLy8gYnVmZmVyIGluY29taW5nIGlkMyB0YWdzIHVudGlsIHRoZSBmaW5hbCBmbHVzaFxuXG5cbiAgICAgICAgaWYgKG91dHB1dC5mcmFtZXMpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5wZW5kaW5nTWV0YWRhdGEucHVzaChvdXRwdXQpO1xuICAgICAgICB9IC8vIEFkZCB0aGlzIHRyYWNrIHRvIHRoZSBsaXN0IG9mIHBlbmRpbmcgdHJhY2tzIGFuZCBzdG9yZVxuICAgICAgICAvLyBpbXBvcnRhbnQgaW5mb3JtYXRpb24gcmVxdWlyZWQgZm9yIHRoZSBjb25zdHJ1Y3Rpb24gb2ZcbiAgICAgICAgLy8gdGhlIGZpbmFsIHNlZ21lbnRcblxuXG4gICAgICAgIHRoaXMucGVuZGluZ1RyYWNrcy5wdXNoKG91dHB1dC50cmFjayk7XG4gICAgICAgIHRoaXMucGVuZGluZ0JveGVzLnB1c2gob3V0cHV0LmJveGVzKTtcbiAgICAgICAgdGhpcy5wZW5kaW5nQnl0ZXMgKz0gb3V0cHV0LmJveGVzLmJ5dGVMZW5ndGg7XG5cbiAgICAgICAgaWYgKG91dHB1dC50cmFjay50eXBlID09PSAndmlkZW8nKSB7XG4gICAgICAgICAgdGhpcy52aWRlb1RyYWNrID0gb3V0cHV0LnRyYWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG91dHB1dC50cmFjay50eXBlID09PSAnYXVkaW8nKSB7XG4gICAgICAgICAgdGhpcy5hdWRpb1RyYWNrID0gb3V0cHV0LnRyYWNrO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBfQ29hbGVzY2VTdHJlYW0ucHJvdG90eXBlID0gbmV3IHN0cmVhbSgpO1xuXG4gICAgX0NvYWxlc2NlU3RyZWFtLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uIChmbHVzaFNvdXJjZSkge1xuICAgICAgdmFyIG9mZnNldCA9IDAsXG4gICAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgIGNhcHRpb25zOiBbXSxcbiAgICAgICAgY2FwdGlvblN0cmVhbXM6IHt9LFxuICAgICAgICBtZXRhZGF0YTogW10sXG4gICAgICAgIGluZm86IHt9XG4gICAgICB9LFxuICAgICAgICAgIGNhcHRpb24sXG4gICAgICAgICAgaWQzLFxuICAgICAgICAgIGluaXRTZWdtZW50LFxuICAgICAgICAgIHRpbWVsaW5lU3RhcnRQdHMgPSAwLFxuICAgICAgICAgIGk7XG5cbiAgICAgIGlmICh0aGlzLnBlbmRpbmdUcmFja3MubGVuZ3RoIDwgdGhpcy5udW1iZXJPZlRyYWNrcykge1xuICAgICAgICBpZiAoZmx1c2hTb3VyY2UgIT09ICdWaWRlb1NlZ21lbnRTdHJlYW0nICYmIGZsdXNoU291cmNlICE9PSAnQXVkaW9TZWdtZW50U3RyZWFtJykge1xuICAgICAgICAgIC8vIFJldHVybiBiZWNhdXNlIHdlIGhhdmVuJ3QgcmVjZWl2ZWQgYSBmbHVzaCBmcm9tIGEgZGF0YS1nZW5lcmF0aW5nXG4gICAgICAgICAgLy8gcG9ydGlvbiBvZiB0aGUgc2VnbWVudCAobWVhbmluZyB0aGF0IHdlIGhhdmUgb25seSByZWNpZXZlZCBtZXRhLWRhdGFcbiAgICAgICAgICAvLyBvciBjYXB0aW9ucy4pXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVtdXhUcmFja3MpIHtcbiAgICAgICAgICAvLyBSZXR1cm4gdW50aWwgd2UgaGF2ZSBlbm91Z2ggdHJhY2tzIGZyb20gdGhlIHBpcGVsaW5lIHRvIHJlbXV4IChpZiB3ZVxuICAgICAgICAgIC8vIGFyZSByZW11eGluZyBhdWRpbyBhbmQgdmlkZW8gaW50byBhIHNpbmdsZSBNUDQpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGVuZGluZ1RyYWNrcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAvLyBJbiB0aGUgY2FzZSB3aGVyZSB3ZSByZWNlaXZlIGEgZmx1c2ggd2l0aG91dCBhbnkgZGF0YSBoYXZpbmcgYmVlblxuICAgICAgICAgIC8vIHJlY2VpdmVkIHdlIGNvbnNpZGVyIGl0IGFuIGVtaXR0ZWQgdHJhY2sgZm9yIHRoZSBwdXJwb3NlcyBvZiBjb2FsZXNjaW5nXG4gICAgICAgICAgLy8gYGRvbmVgIGV2ZW50cy5cbiAgICAgICAgICAvLyBXZSBkbyB0aGlzIGZvciB0aGUgY2FzZSB3aGVyZSB0aGVyZSBpcyBhbiBhdWRpbyBhbmQgdmlkZW8gdHJhY2sgaW4gdGhlXG4gICAgICAgICAgLy8gc2VnbWVudCBidXQgbm8gYXVkaW8gZGF0YS4gKHNlZW4gaW4gc2V2ZXJhbCBwbGF5bGlzdHMgd2l0aCBhbHRlcm5hdGVcbiAgICAgICAgICAvLyBhdWRpbyB0cmFja3MgYW5kIG5vIGF1ZGlvIHByZXNlbnQgaW4gdGhlIG1haW4gVFMgc2VnbWVudHMuKVxuICAgICAgICAgIHRoaXMuZW1pdHRlZFRyYWNrcysrO1xuXG4gICAgICAgICAgaWYgKHRoaXMuZW1pdHRlZFRyYWNrcyA+PSB0aGlzLm51bWJlck9mVHJhY2tzKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2RvbmUnKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdHRlZFRyYWNrcyA9IDA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnZpZGVvVHJhY2spIHtcbiAgICAgICAgdGltZWxpbmVTdGFydFB0cyA9IHRoaXMudmlkZW9UcmFjay50aW1lbGluZVN0YXJ0SW5mby5wdHM7XG4gICAgICAgIFZJREVPX1BST1BFUlRJRVMuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICAgIGV2ZW50LmluZm9bcHJvcF0gPSB0aGlzLnZpZGVvVHJhY2tbcHJvcF07XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmF1ZGlvVHJhY2spIHtcbiAgICAgICAgdGltZWxpbmVTdGFydFB0cyA9IHRoaXMuYXVkaW9UcmFjay50aW1lbGluZVN0YXJ0SW5mby5wdHM7XG4gICAgICAgIEFVRElPX1BST1BFUlRJRVMuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICAgIGV2ZW50LmluZm9bcHJvcF0gPSB0aGlzLmF1ZGlvVHJhY2tbcHJvcF07XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wZW5kaW5nVHJhY2tzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBldmVudC50eXBlID0gdGhpcy5wZW5kaW5nVHJhY2tzWzBdLnR5cGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBldmVudC50eXBlID0gJ2NvbWJpbmVkJztcbiAgICAgIH1cblxuICAgICAgdGhpcy5lbWl0dGVkVHJhY2tzICs9IHRoaXMucGVuZGluZ1RyYWNrcy5sZW5ndGg7XG4gICAgICBpbml0U2VnbWVudCA9IG1wNEdlbmVyYXRvci5pbml0U2VnbWVudCh0aGlzLnBlbmRpbmdUcmFja3MpOyAvLyBDcmVhdGUgYSBuZXcgdHlwZWQgYXJyYXkgdG8gaG9sZCB0aGUgaW5pdCBzZWdtZW50XG5cbiAgICAgIGV2ZW50LmluaXRTZWdtZW50ID0gbmV3IFVpbnQ4QXJyYXkoaW5pdFNlZ21lbnQuYnl0ZUxlbmd0aCk7IC8vIENyZWF0ZSBhbiBpbml0IHNlZ21lbnQgY29udGFpbmluZyBhIG1vb3ZcbiAgICAgIC8vIGFuZCB0cmFjayBkZWZpbml0aW9uc1xuXG4gICAgICBldmVudC5pbml0U2VnbWVudC5zZXQoaW5pdFNlZ21lbnQpOyAvLyBDcmVhdGUgYSBuZXcgdHlwZWQgYXJyYXkgdG8gaG9sZCB0aGUgbW9vZittZGF0c1xuXG4gICAgICBldmVudC5kYXRhID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5wZW5kaW5nQnl0ZXMpOyAvLyBBcHBlbmQgZWFjaCBtb29mK21kYXQgKG9uZSBwZXIgdHJhY2spIHRvZ2V0aGVyXG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnBlbmRpbmdCb3hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBldmVudC5kYXRhLnNldCh0aGlzLnBlbmRpbmdCb3hlc1tpXSwgb2Zmc2V0KTtcbiAgICAgICAgb2Zmc2V0ICs9IHRoaXMucGVuZGluZ0JveGVzW2ldLmJ5dGVMZW5ndGg7XG4gICAgICB9IC8vIFRyYW5zbGF0ZSBjYXB0aW9uIFBUUyB0aW1lcyBpbnRvIHNlY29uZCBvZmZzZXRzIHRvIG1hdGNoIHRoZVxuICAgICAgLy8gdmlkZW8gdGltZWxpbmUgZm9yIHRoZSBzZWdtZW50LCBhbmQgYWRkIHRyYWNrIGluZm9cblxuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5wZW5kaW5nQ2FwdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2FwdGlvbiA9IHRoaXMucGVuZGluZ0NhcHRpb25zW2ldO1xuICAgICAgICBjYXB0aW9uLnN0YXJ0VGltZSA9IGNhcHRpb24uc3RhcnRQdHM7XG5cbiAgICAgICAgaWYgKCF0aGlzLmtlZXBPcmlnaW5hbFRpbWVzdGFtcHMpIHtcbiAgICAgICAgICBjYXB0aW9uLnN0YXJ0VGltZSAtPSB0aW1lbGluZVN0YXJ0UHRzO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FwdGlvbi5zdGFydFRpbWUgLz0gOTBlMztcbiAgICAgICAgY2FwdGlvbi5lbmRUaW1lID0gY2FwdGlvbi5lbmRQdHM7XG5cbiAgICAgICAgaWYgKCF0aGlzLmtlZXBPcmlnaW5hbFRpbWVzdGFtcHMpIHtcbiAgICAgICAgICBjYXB0aW9uLmVuZFRpbWUgLT0gdGltZWxpbmVTdGFydFB0cztcbiAgICAgICAgfVxuXG4gICAgICAgIGNhcHRpb24uZW5kVGltZSAvPSA5MGUzO1xuICAgICAgICBldmVudC5jYXB0aW9uU3RyZWFtc1tjYXB0aW9uLnN0cmVhbV0gPSB0cnVlO1xuICAgICAgICBldmVudC5jYXB0aW9ucy5wdXNoKGNhcHRpb24pO1xuICAgICAgfSAvLyBUcmFuc2xhdGUgSUQzIGZyYW1lIFBUUyB0aW1lcyBpbnRvIHNlY29uZCBvZmZzZXRzIHRvIG1hdGNoIHRoZVxuICAgICAgLy8gdmlkZW8gdGltZWxpbmUgZm9yIHRoZSBzZWdtZW50XG5cblxuICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMucGVuZGluZ01ldGFkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlkMyA9IHRoaXMucGVuZGluZ01ldGFkYXRhW2ldO1xuICAgICAgICBpZDMuY3VlVGltZSA9IGlkMy5wdHM7XG5cbiAgICAgICAgaWYgKCF0aGlzLmtlZXBPcmlnaW5hbFRpbWVzdGFtcHMpIHtcbiAgICAgICAgICBpZDMuY3VlVGltZSAtPSB0aW1lbGluZVN0YXJ0UHRzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWQzLmN1ZVRpbWUgLz0gOTBlMztcbiAgICAgICAgZXZlbnQubWV0YWRhdGEucHVzaChpZDMpO1xuICAgICAgfSAvLyBXZSBhZGQgdGhpcyB0byBldmVyeSBzaW5nbGUgZW1pdHRlZCBzZWdtZW50IGV2ZW4gdGhvdWdoIHdlIG9ubHkgbmVlZFxuICAgICAgLy8gaXQgZm9yIHRoZSBmaXJzdFxuXG5cbiAgICAgIGV2ZW50Lm1ldGFkYXRhLmRpc3BhdGNoVHlwZSA9IHRoaXMubWV0YWRhdGFTdHJlYW0uZGlzcGF0Y2hUeXBlOyAvLyBSZXNldCBzdHJlYW0gc3RhdGVcblxuICAgICAgdGhpcy5wZW5kaW5nVHJhY2tzLmxlbmd0aCA9IDA7XG4gICAgICB0aGlzLnZpZGVvVHJhY2sgPSBudWxsO1xuICAgICAgdGhpcy5wZW5kaW5nQm94ZXMubGVuZ3RoID0gMDtcbiAgICAgIHRoaXMucGVuZGluZ0NhcHRpb25zLmxlbmd0aCA9IDA7XG4gICAgICB0aGlzLnBlbmRpbmdCeXRlcyA9IDA7XG4gICAgICB0aGlzLnBlbmRpbmdNZXRhZGF0YS5sZW5ndGggPSAwOyAvLyBFbWl0IHRoZSBidWlsdCBzZWdtZW50XG5cbiAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIGV2ZW50KTsgLy8gT25seSBlbWl0IGBkb25lYCBpZiBhbGwgdHJhY2tzIGhhdmUgYmVlbiBmbHVzaGVkIGFuZCBlbWl0dGVkXG5cbiAgICAgIGlmICh0aGlzLmVtaXR0ZWRUcmFja3MgPj0gdGhpcy5udW1iZXJPZlRyYWNrcykge1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2RvbmUnKTtcbiAgICAgICAgdGhpcy5lbWl0dGVkVHJhY2tzID0gMDtcbiAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEEgU3RyZWFtIHRoYXQgZXhwZWN0cyBNUDJUIGJpbmFyeSBkYXRhIGFzIGlucHV0IGFuZCBwcm9kdWNlc1xuICAgICAqIGNvcnJlc3BvbmRpbmcgbWVkaWEgc2VnbWVudHMsIHN1aXRhYmxlIGZvciB1c2Ugd2l0aCBNZWRpYSBTb3VyY2VcbiAgICAgKiBFeHRlbnNpb24gKE1TRSkgaW1wbGVtZW50YXRpb25zIHRoYXQgc3VwcG9ydCB0aGUgSVNPIEJNRkYgYnl0ZVxuICAgICAqIHN0cmVhbSBmb3JtYXQsIGxpa2UgQ2hyb21lLlxuICAgICAqL1xuXG5cbiAgICBfVHJhbnNtdXhlciA9IGZ1bmN0aW9uIFRyYW5zbXV4ZXIob3B0aW9ucykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICAgIGhhc0ZsdXNoZWQgPSB0cnVlLFxuICAgICAgICAgIHZpZGVvVHJhY2ssXG4gICAgICAgICAgYXVkaW9UcmFjaztcblxuICAgICAgX1RyYW5zbXV4ZXIucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzKTtcblxuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICB0aGlzLmJhc2VNZWRpYURlY29kZVRpbWUgPSBvcHRpb25zLmJhc2VNZWRpYURlY29kZVRpbWUgfHwgMDtcbiAgICAgIHRoaXMudHJhbnNtdXhQaXBlbGluZV8gPSB7fTtcblxuICAgICAgdGhpcy5zZXR1cEFhY1BpcGVsaW5lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGlwZWxpbmUgPSB7fTtcbiAgICAgICAgdGhpcy50cmFuc211eFBpcGVsaW5lXyA9IHBpcGVsaW5lO1xuICAgICAgICBwaXBlbGluZS50eXBlID0gJ2FhYyc7XG4gICAgICAgIHBpcGVsaW5lLm1ldGFkYXRhU3RyZWFtID0gbmV3IG0ydHNfMS5NZXRhZGF0YVN0cmVhbSgpOyAvLyBzZXQgdXAgdGhlIHBhcnNpbmcgcGlwZWxpbmVcblxuICAgICAgICBwaXBlbGluZS5hYWNTdHJlYW0gPSBuZXcgYWFjKCk7XG4gICAgICAgIHBpcGVsaW5lLmF1ZGlvVGltZXN0YW1wUm9sbG92ZXJTdHJlYW0gPSBuZXcgbTJ0c18xLlRpbWVzdGFtcFJvbGxvdmVyU3RyZWFtKCdhdWRpbycpO1xuICAgICAgICBwaXBlbGluZS50aW1lZE1ldGFkYXRhVGltZXN0YW1wUm9sbG92ZXJTdHJlYW0gPSBuZXcgbTJ0c18xLlRpbWVzdGFtcFJvbGxvdmVyU3RyZWFtKCd0aW1lZC1tZXRhZGF0YScpO1xuICAgICAgICBwaXBlbGluZS5hZHRzU3RyZWFtID0gbmV3IGFkdHMoKTtcbiAgICAgICAgcGlwZWxpbmUuY29hbGVzY2VTdHJlYW0gPSBuZXcgX0NvYWxlc2NlU3RyZWFtKG9wdGlvbnMsIHBpcGVsaW5lLm1ldGFkYXRhU3RyZWFtKTtcbiAgICAgICAgcGlwZWxpbmUuaGVhZE9mUGlwZWxpbmUgPSBwaXBlbGluZS5hYWNTdHJlYW07XG4gICAgICAgIHBpcGVsaW5lLmFhY1N0cmVhbS5waXBlKHBpcGVsaW5lLmF1ZGlvVGltZXN0YW1wUm9sbG92ZXJTdHJlYW0pLnBpcGUocGlwZWxpbmUuYWR0c1N0cmVhbSk7XG4gICAgICAgIHBpcGVsaW5lLmFhY1N0cmVhbS5waXBlKHBpcGVsaW5lLnRpbWVkTWV0YWRhdGFUaW1lc3RhbXBSb2xsb3ZlclN0cmVhbSkucGlwZShwaXBlbGluZS5tZXRhZGF0YVN0cmVhbSkucGlwZShwaXBlbGluZS5jb2FsZXNjZVN0cmVhbSk7XG4gICAgICAgIHBpcGVsaW5lLm1ldGFkYXRhU3RyZWFtLm9uKCd0aW1lc3RhbXAnLCBmdW5jdGlvbiAoZnJhbWUpIHtcbiAgICAgICAgICBwaXBlbGluZS5hYWNTdHJlYW0uc2V0VGltZXN0YW1wKGZyYW1lLnRpbWVTdGFtcCk7XG4gICAgICAgIH0pO1xuICAgICAgICBwaXBlbGluZS5hYWNTdHJlYW0ub24oJ2RhdGEnLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICd0aW1lZC1tZXRhZGF0YScgJiYgIXBpcGVsaW5lLmF1ZGlvU2VnbWVudFN0cmVhbSkge1xuICAgICAgICAgICAgYXVkaW9UcmFjayA9IGF1ZGlvVHJhY2sgfHwge1xuICAgICAgICAgICAgICB0aW1lbGluZVN0YXJ0SW5mbzoge1xuICAgICAgICAgICAgICAgIGJhc2VNZWRpYURlY29kZVRpbWU6IHNlbGYuYmFzZU1lZGlhRGVjb2RlVGltZVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBjb2RlYzogJ2FkdHMnLFxuICAgICAgICAgICAgICB0eXBlOiAnYXVkaW8nXG4gICAgICAgICAgICB9OyAvLyBob29rIHVwIHRoZSBhdWRpbyBzZWdtZW50IHN0cmVhbSB0byB0aGUgZmlyc3QgdHJhY2sgd2l0aCBhYWMgZGF0YVxuXG4gICAgICAgICAgICBwaXBlbGluZS5jb2FsZXNjZVN0cmVhbS5udW1iZXJPZlRyYWNrcysrO1xuICAgICAgICAgICAgcGlwZWxpbmUuYXVkaW9TZWdtZW50U3RyZWFtID0gbmV3IF9BdWRpb1NlZ21lbnRTdHJlYW0oYXVkaW9UcmFjaywgb3B0aW9ucyk7IC8vIFNldCB1cCB0aGUgZmluYWwgcGFydCBvZiB0aGUgYXVkaW8gcGlwZWxpbmVcblxuICAgICAgICAgICAgcGlwZWxpbmUuYWR0c1N0cmVhbS5waXBlKHBpcGVsaW5lLmF1ZGlvU2VnbWVudFN0cmVhbSkucGlwZShwaXBlbGluZS5jb2FsZXNjZVN0cmVhbSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTsgLy8gUmUtZW1pdCBhbnkgZGF0YSBjb21pbmcgZnJvbSB0aGUgY29hbGVzY2Ugc3RyZWFtIHRvIHRoZSBvdXRzaWRlIHdvcmxkXG5cbiAgICAgICAgcGlwZWxpbmUuY29hbGVzY2VTdHJlYW0ub24oJ2RhdGEnLCB0aGlzLnRyaWdnZXIuYmluZCh0aGlzLCAnZGF0YScpKTsgLy8gTGV0IHRoZSBjb25zdW1lciBrbm93IHdlIGhhdmUgZmluaXNoZWQgZmx1c2hpbmcgdGhlIGVudGlyZSBwaXBlbGluZVxuXG4gICAgICAgIHBpcGVsaW5lLmNvYWxlc2NlU3RyZWFtLm9uKCdkb25lJywgdGhpcy50cmlnZ2VyLmJpbmQodGhpcywgJ2RvbmUnKSk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLnNldHVwVHNQaXBlbGluZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBpcGVsaW5lID0ge307XG4gICAgICAgIHRoaXMudHJhbnNtdXhQaXBlbGluZV8gPSBwaXBlbGluZTtcbiAgICAgICAgcGlwZWxpbmUudHlwZSA9ICd0cyc7XG4gICAgICAgIHBpcGVsaW5lLm1ldGFkYXRhU3RyZWFtID0gbmV3IG0ydHNfMS5NZXRhZGF0YVN0cmVhbSgpOyAvLyBzZXQgdXAgdGhlIHBhcnNpbmcgcGlwZWxpbmVcblxuICAgICAgICBwaXBlbGluZS5wYWNrZXRTdHJlYW0gPSBuZXcgbTJ0c18xLlRyYW5zcG9ydFBhY2tldFN0cmVhbSgpO1xuICAgICAgICBwaXBlbGluZS5wYXJzZVN0cmVhbSA9IG5ldyBtMnRzXzEuVHJhbnNwb3J0UGFyc2VTdHJlYW0oKTtcbiAgICAgICAgcGlwZWxpbmUuZWxlbWVudGFyeVN0cmVhbSA9IG5ldyBtMnRzXzEuRWxlbWVudGFyeVN0cmVhbSgpO1xuICAgICAgICBwaXBlbGluZS52aWRlb1RpbWVzdGFtcFJvbGxvdmVyU3RyZWFtID0gbmV3IG0ydHNfMS5UaW1lc3RhbXBSb2xsb3ZlclN0cmVhbSgndmlkZW8nKTtcbiAgICAgICAgcGlwZWxpbmUuYXVkaW9UaW1lc3RhbXBSb2xsb3ZlclN0cmVhbSA9IG5ldyBtMnRzXzEuVGltZXN0YW1wUm9sbG92ZXJTdHJlYW0oJ2F1ZGlvJyk7XG4gICAgICAgIHBpcGVsaW5lLnRpbWVkTWV0YWRhdGFUaW1lc3RhbXBSb2xsb3ZlclN0cmVhbSA9IG5ldyBtMnRzXzEuVGltZXN0YW1wUm9sbG92ZXJTdHJlYW0oJ3RpbWVkLW1ldGFkYXRhJyk7XG4gICAgICAgIHBpcGVsaW5lLmFkdHNTdHJlYW0gPSBuZXcgYWR0cygpO1xuICAgICAgICBwaXBlbGluZS5oMjY0U3RyZWFtID0gbmV3IEgyNjRTdHJlYW0oKTtcbiAgICAgICAgcGlwZWxpbmUuY2FwdGlvblN0cmVhbSA9IG5ldyBtMnRzXzEuQ2FwdGlvblN0cmVhbSgpO1xuICAgICAgICBwaXBlbGluZS5jb2FsZXNjZVN0cmVhbSA9IG5ldyBfQ29hbGVzY2VTdHJlYW0ob3B0aW9ucywgcGlwZWxpbmUubWV0YWRhdGFTdHJlYW0pO1xuICAgICAgICBwaXBlbGluZS5oZWFkT2ZQaXBlbGluZSA9IHBpcGVsaW5lLnBhY2tldFN0cmVhbTsgLy8gZGlzYXNzZW1ibGUgTVBFRzItVFMgcGFja2V0cyBpbnRvIGVsZW1lbnRhcnkgc3RyZWFtc1xuXG4gICAgICAgIHBpcGVsaW5lLnBhY2tldFN0cmVhbS5waXBlKHBpcGVsaW5lLnBhcnNlU3RyZWFtKS5waXBlKHBpcGVsaW5lLmVsZW1lbnRhcnlTdHJlYW0pOyAvLyAhIVRISVMgT1JERVIgSVMgSU1QT1JUQU5UISFcbiAgICAgICAgLy8gZGVtdXggdGhlIHN0cmVhbXNcblxuICAgICAgICBwaXBlbGluZS5lbGVtZW50YXJ5U3RyZWFtLnBpcGUocGlwZWxpbmUudmlkZW9UaW1lc3RhbXBSb2xsb3ZlclN0cmVhbSkucGlwZShwaXBlbGluZS5oMjY0U3RyZWFtKTtcbiAgICAgICAgcGlwZWxpbmUuZWxlbWVudGFyeVN0cmVhbS5waXBlKHBpcGVsaW5lLmF1ZGlvVGltZXN0YW1wUm9sbG92ZXJTdHJlYW0pLnBpcGUocGlwZWxpbmUuYWR0c1N0cmVhbSk7XG4gICAgICAgIHBpcGVsaW5lLmVsZW1lbnRhcnlTdHJlYW0ucGlwZShwaXBlbGluZS50aW1lZE1ldGFkYXRhVGltZXN0YW1wUm9sbG92ZXJTdHJlYW0pLnBpcGUocGlwZWxpbmUubWV0YWRhdGFTdHJlYW0pLnBpcGUocGlwZWxpbmUuY29hbGVzY2VTdHJlYW0pOyAvLyBIb29rIHVwIENFQS02MDgvNzA4IGNhcHRpb24gc3RyZWFtXG5cbiAgICAgICAgcGlwZWxpbmUuaDI2NFN0cmVhbS5waXBlKHBpcGVsaW5lLmNhcHRpb25TdHJlYW0pLnBpcGUocGlwZWxpbmUuY29hbGVzY2VTdHJlYW0pO1xuICAgICAgICBwaXBlbGluZS5lbGVtZW50YXJ5U3RyZWFtLm9uKCdkYXRhJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICB2YXIgaTtcblxuICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdtZXRhZGF0YScpIHtcbiAgICAgICAgICAgIGkgPSBkYXRhLnRyYWNrcy5sZW5ndGg7IC8vIHNjYW4gdGhlIHRyYWNrcyBsaXN0ZWQgaW4gdGhlIG1ldGFkYXRhXG5cbiAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgICAgaWYgKCF2aWRlb1RyYWNrICYmIGRhdGEudHJhY2tzW2ldLnR5cGUgPT09ICd2aWRlbycpIHtcbiAgICAgICAgICAgICAgICB2aWRlb1RyYWNrID0gZGF0YS50cmFja3NbaV07XG4gICAgICAgICAgICAgICAgdmlkZW9UcmFjay50aW1lbGluZVN0YXJ0SW5mby5iYXNlTWVkaWFEZWNvZGVUaW1lID0gc2VsZi5iYXNlTWVkaWFEZWNvZGVUaW1lO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFhdWRpb1RyYWNrICYmIGRhdGEudHJhY2tzW2ldLnR5cGUgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgICAgICBhdWRpb1RyYWNrID0gZGF0YS50cmFja3NbaV07XG4gICAgICAgICAgICAgICAgYXVkaW9UcmFjay50aW1lbGluZVN0YXJ0SW5mby5iYXNlTWVkaWFEZWNvZGVUaW1lID0gc2VsZi5iYXNlTWVkaWFEZWNvZGVUaW1lO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IC8vIGhvb2sgdXAgdGhlIHZpZGVvIHNlZ21lbnQgc3RyZWFtIHRvIHRoZSBmaXJzdCB0cmFjayB3aXRoIGgyNjQgZGF0YVxuXG5cbiAgICAgICAgICAgIGlmICh2aWRlb1RyYWNrICYmICFwaXBlbGluZS52aWRlb1NlZ21lbnRTdHJlYW0pIHtcbiAgICAgICAgICAgICAgcGlwZWxpbmUuY29hbGVzY2VTdHJlYW0ubnVtYmVyT2ZUcmFja3MrKztcbiAgICAgICAgICAgICAgcGlwZWxpbmUudmlkZW9TZWdtZW50U3RyZWFtID0gbmV3IF9WaWRlb1NlZ21lbnRTdHJlYW0odmlkZW9UcmFjaywgb3B0aW9ucyk7XG4gICAgICAgICAgICAgIHBpcGVsaW5lLnZpZGVvU2VnbWVudFN0cmVhbS5vbigndGltZWxpbmVTdGFydEluZm8nLCBmdW5jdGlvbiAodGltZWxpbmVTdGFydEluZm8pIHtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIHZpZGVvIGVtaXRzIHRpbWVsaW5lU3RhcnRJbmZvIGRhdGEgYWZ0ZXIgYSBmbHVzaCwgd2UgZm9yd2FyZCB0aGF0XG4gICAgICAgICAgICAgICAgLy8gaW5mbyB0byB0aGUgQXVkaW9TZWdtZW50U3RyZWFtLCBpZiBpdCBleGlzdHMsIGJlY2F1c2UgdmlkZW8gdGltZWxpbmVcbiAgICAgICAgICAgICAgICAvLyBkYXRhIHRha2VzIHByZWNlZGVuY2UuXG4gICAgICAgICAgICAgICAgaWYgKGF1ZGlvVHJhY2spIHtcbiAgICAgICAgICAgICAgICAgIGF1ZGlvVHJhY2sudGltZWxpbmVTdGFydEluZm8gPSB0aW1lbGluZVN0YXJ0SW5mbzsgLy8gT24gdGhlIGZpcnN0IHNlZ21lbnQgd2UgdHJpbSBBQUMgZnJhbWVzIHRoYXQgZXhpc3QgYmVmb3JlIHRoZVxuICAgICAgICAgICAgICAgICAgLy8gdmVyeSBlYXJsaWVzdCBEVFMgd2UgaGF2ZSBzZWVuIGluIHZpZGVvIGJlY2F1c2UgQ2hyb21lIHdpbGxcbiAgICAgICAgICAgICAgICAgIC8vIGludGVycHJldCBhbnkgdmlkZW8gdHJhY2sgd2l0aCBhIGJhc2VNZWRpYURlY29kZVRpbWUgdGhhdCBpc1xuICAgICAgICAgICAgICAgICAgLy8gbm9uLXplcm8gYXMgYSBnYXAuXG5cbiAgICAgICAgICAgICAgICAgIHBpcGVsaW5lLmF1ZGlvU2VnbWVudFN0cmVhbS5zZXRFYXJsaWVzdER0cyh0aW1lbGluZVN0YXJ0SW5mby5kdHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHBpcGVsaW5lLnZpZGVvU2VnbWVudFN0cmVhbS5vbigncHJvY2Vzc2VkR29wc0luZm8nLCBzZWxmLnRyaWdnZXIuYmluZChzZWxmLCAnZ29wSW5mbycpKTtcbiAgICAgICAgICAgICAgcGlwZWxpbmUudmlkZW9TZWdtZW50U3RyZWFtLm9uKCdzZWdtZW50VGltaW5nSW5mbycsIHNlbGYudHJpZ2dlci5iaW5kKHNlbGYsICd2aWRlb1NlZ21lbnRUaW1pbmdJbmZvJykpO1xuICAgICAgICAgICAgICBwaXBlbGluZS52aWRlb1NlZ21lbnRTdHJlYW0ub24oJ2Jhc2VNZWRpYURlY29kZVRpbWUnLCBmdW5jdGlvbiAoYmFzZU1lZGlhRGVjb2RlVGltZSkge1xuICAgICAgICAgICAgICAgIGlmIChhdWRpb1RyYWNrKSB7XG4gICAgICAgICAgICAgICAgICBwaXBlbGluZS5hdWRpb1NlZ21lbnRTdHJlYW0uc2V0VmlkZW9CYXNlTWVkaWFEZWNvZGVUaW1lKGJhc2VNZWRpYURlY29kZVRpbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7IC8vIFNldCB1cCB0aGUgZmluYWwgcGFydCBvZiB0aGUgdmlkZW8gcGlwZWxpbmVcblxuICAgICAgICAgICAgICBwaXBlbGluZS5oMjY0U3RyZWFtLnBpcGUocGlwZWxpbmUudmlkZW9TZWdtZW50U3RyZWFtKS5waXBlKHBpcGVsaW5lLmNvYWxlc2NlU3RyZWFtKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGF1ZGlvVHJhY2sgJiYgIXBpcGVsaW5lLmF1ZGlvU2VnbWVudFN0cmVhbSkge1xuICAgICAgICAgICAgICAvLyBob29rIHVwIHRoZSBhdWRpbyBzZWdtZW50IHN0cmVhbSB0byB0aGUgZmlyc3QgdHJhY2sgd2l0aCBhYWMgZGF0YVxuICAgICAgICAgICAgICBwaXBlbGluZS5jb2FsZXNjZVN0cmVhbS5udW1iZXJPZlRyYWNrcysrO1xuICAgICAgICAgICAgICBwaXBlbGluZS5hdWRpb1NlZ21lbnRTdHJlYW0gPSBuZXcgX0F1ZGlvU2VnbWVudFN0cmVhbShhdWRpb1RyYWNrLCBvcHRpb25zKTsgLy8gU2V0IHVwIHRoZSBmaW5hbCBwYXJ0IG9mIHRoZSBhdWRpbyBwaXBlbGluZVxuXG4gICAgICAgICAgICAgIHBpcGVsaW5lLmFkdHNTdHJlYW0ucGlwZShwaXBlbGluZS5hdWRpb1NlZ21lbnRTdHJlYW0pLnBpcGUocGlwZWxpbmUuY29hbGVzY2VTdHJlYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7IC8vIFJlLWVtaXQgYW55IGRhdGEgY29taW5nIGZyb20gdGhlIGNvYWxlc2NlIHN0cmVhbSB0byB0aGUgb3V0c2lkZSB3b3JsZFxuXG4gICAgICAgIHBpcGVsaW5lLmNvYWxlc2NlU3RyZWFtLm9uKCdkYXRhJywgdGhpcy50cmlnZ2VyLmJpbmQodGhpcywgJ2RhdGEnKSk7IC8vIExldCB0aGUgY29uc3VtZXIga25vdyB3ZSBoYXZlIGZpbmlzaGVkIGZsdXNoaW5nIHRoZSBlbnRpcmUgcGlwZWxpbmVcblxuICAgICAgICBwaXBlbGluZS5jb2FsZXNjZVN0cmVhbS5vbignZG9uZScsIHRoaXMudHJpZ2dlci5iaW5kKHRoaXMsICdkb25lJykpO1xuICAgICAgfTsgLy8gaG9vayB1cCB0aGUgc2VnbWVudCBzdHJlYW1zIG9uY2UgdHJhY2sgbWV0YWRhdGEgaXMgZGVsaXZlcmVkXG5cblxuICAgICAgdGhpcy5zZXRCYXNlTWVkaWFEZWNvZGVUaW1lID0gZnVuY3Rpb24gKGJhc2VNZWRpYURlY29kZVRpbWUpIHtcbiAgICAgICAgdmFyIHBpcGVsaW5lID0gdGhpcy50cmFuc211eFBpcGVsaW5lXztcblxuICAgICAgICBpZiAoIW9wdGlvbnMua2VlcE9yaWdpbmFsVGltZXN0YW1wcykge1xuICAgICAgICAgIHRoaXMuYmFzZU1lZGlhRGVjb2RlVGltZSA9IGJhc2VNZWRpYURlY29kZVRpbWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXVkaW9UcmFjaykge1xuICAgICAgICAgIGF1ZGlvVHJhY2sudGltZWxpbmVTdGFydEluZm8uZHRzID0gdW5kZWZpbmVkO1xuICAgICAgICAgIGF1ZGlvVHJhY2sudGltZWxpbmVTdGFydEluZm8ucHRzID0gdW5kZWZpbmVkO1xuICAgICAgICAgIHRyYWNrRGVjb2RlSW5mby5jbGVhckR0c0luZm8oYXVkaW9UcmFjayk7XG5cbiAgICAgICAgICBpZiAoIW9wdGlvbnMua2VlcE9yaWdpbmFsVGltZXN0YW1wcykge1xuICAgICAgICAgICAgYXVkaW9UcmFjay50aW1lbGluZVN0YXJ0SW5mby5iYXNlTWVkaWFEZWNvZGVUaW1lID0gYmFzZU1lZGlhRGVjb2RlVGltZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAocGlwZWxpbmUuYXVkaW9UaW1lc3RhbXBSb2xsb3ZlclN0cmVhbSkge1xuICAgICAgICAgICAgcGlwZWxpbmUuYXVkaW9UaW1lc3RhbXBSb2xsb3ZlclN0cmVhbS5kaXNjb250aW51aXR5KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZpZGVvVHJhY2spIHtcbiAgICAgICAgICBpZiAocGlwZWxpbmUudmlkZW9TZWdtZW50U3RyZWFtKSB7XG4gICAgICAgICAgICBwaXBlbGluZS52aWRlb1NlZ21lbnRTdHJlYW0uZ29wQ2FjaGVfID0gW107XG4gICAgICAgICAgICBwaXBlbGluZS52aWRlb1RpbWVzdGFtcFJvbGxvdmVyU3RyZWFtLmRpc2NvbnRpbnVpdHkoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2aWRlb1RyYWNrLnRpbWVsaW5lU3RhcnRJbmZvLmR0cyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB2aWRlb1RyYWNrLnRpbWVsaW5lU3RhcnRJbmZvLnB0cyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB0cmFja0RlY29kZUluZm8uY2xlYXJEdHNJbmZvKHZpZGVvVHJhY2spO1xuICAgICAgICAgIHBpcGVsaW5lLmNhcHRpb25TdHJlYW0ucmVzZXQoKTtcblxuICAgICAgICAgIGlmICghb3B0aW9ucy5rZWVwT3JpZ2luYWxUaW1lc3RhbXBzKSB7XG4gICAgICAgICAgICB2aWRlb1RyYWNrLnRpbWVsaW5lU3RhcnRJbmZvLmJhc2VNZWRpYURlY29kZVRpbWUgPSBiYXNlTWVkaWFEZWNvZGVUaW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwaXBlbGluZS50aW1lZE1ldGFkYXRhVGltZXN0YW1wUm9sbG92ZXJTdHJlYW0pIHtcbiAgICAgICAgICBwaXBlbGluZS50aW1lZE1ldGFkYXRhVGltZXN0YW1wUm9sbG92ZXJTdHJlYW0uZGlzY29udGludWl0eSgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB0aGlzLnNldEF1ZGlvQXBwZW5kU3RhcnQgPSBmdW5jdGlvbiAodGltZXN0YW1wKSB7XG4gICAgICAgIGlmIChhdWRpb1RyYWNrKSB7XG4gICAgICAgICAgdGhpcy50cmFuc211eFBpcGVsaW5lXy5hdWRpb1NlZ21lbnRTdHJlYW0uc2V0QXVkaW9BcHBlbmRTdGFydCh0aW1lc3RhbXApO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB0aGlzLmFsaWduR29wc1dpdGggPSBmdW5jdGlvbiAoZ29wc1RvQWxpZ25XaXRoKSB7XG4gICAgICAgIGlmICh2aWRlb1RyYWNrICYmIHRoaXMudHJhbnNtdXhQaXBlbGluZV8udmlkZW9TZWdtZW50U3RyZWFtKSB7XG4gICAgICAgICAgdGhpcy50cmFuc211eFBpcGVsaW5lXy52aWRlb1NlZ21lbnRTdHJlYW0uYWxpZ25Hb3BzV2l0aChnb3BzVG9BbGlnbldpdGgpO1xuICAgICAgICB9XG4gICAgICB9OyAvLyBmZWVkIGluY29taW5nIGRhdGEgdG8gdGhlIGZyb250IG9mIHRoZSBwYXJzaW5nIHBpcGVsaW5lXG5cblxuICAgICAgdGhpcy5wdXNoID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYgKGhhc0ZsdXNoZWQpIHtcbiAgICAgICAgICB2YXIgaXNBYWMgPSBpc0xpa2VseUFhY0RhdGEkMShkYXRhKTtcblxuICAgICAgICAgIGlmIChpc0FhYyAmJiB0aGlzLnRyYW5zbXV4UGlwZWxpbmVfLnR5cGUgIT09ICdhYWMnKSB7XG4gICAgICAgICAgICB0aGlzLnNldHVwQWFjUGlwZWxpbmUoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCFpc0FhYyAmJiB0aGlzLnRyYW5zbXV4UGlwZWxpbmVfLnR5cGUgIT09ICd0cycpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dXBUc1BpcGVsaW5lKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaGFzRmx1c2hlZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cmFuc211eFBpcGVsaW5lXy5oZWFkT2ZQaXBlbGluZS5wdXNoKGRhdGEpO1xuICAgICAgfTsgLy8gZmx1c2ggYW55IGJ1ZmZlcmVkIGRhdGFcblxuXG4gICAgICB0aGlzLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBoYXNGbHVzaGVkID0gdHJ1ZTsgLy8gU3RhcnQgYXQgdGhlIHRvcCBvZiB0aGUgcGlwZWxpbmUgYW5kIGZsdXNoIGFsbCBwZW5kaW5nIHdvcmtcblxuICAgICAgICB0aGlzLnRyYW5zbXV4UGlwZWxpbmVfLmhlYWRPZlBpcGVsaW5lLmZsdXNoKCk7XG4gICAgICB9OyAvLyBDYXB0aW9uIGRhdGEgaGFzIHRvIGJlIHJlc2V0IHdoZW4gc2Vla2luZyBvdXRzaWRlIGJ1ZmZlcmVkIHJhbmdlXG5cblxuICAgICAgdGhpcy5yZXNldENhcHRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy50cmFuc211eFBpcGVsaW5lXy5jYXB0aW9uU3RyZWFtKSB7XG4gICAgICAgICAgdGhpcy50cmFuc211eFBpcGVsaW5lXy5jYXB0aW9uU3RyZWFtLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfTtcblxuICAgIF9UcmFuc211eGVyLnByb3RvdHlwZSA9IG5ldyBzdHJlYW0oKTtcbiAgICB2YXIgdHJhbnNtdXhlciA9IHtcbiAgICAgIFRyYW5zbXV4ZXI6IF9UcmFuc211eGVyLFxuICAgICAgVmlkZW9TZWdtZW50U3RyZWFtOiBfVmlkZW9TZWdtZW50U3RyZWFtLFxuICAgICAgQXVkaW9TZWdtZW50U3RyZWFtOiBfQXVkaW9TZWdtZW50U3RyZWFtLFxuICAgICAgQVVESU9fUFJPUEVSVElFUzogQVVESU9fUFJPUEVSVElFUyxcbiAgICAgIFZJREVPX1BST1BFUlRJRVM6IFZJREVPX1BST1BFUlRJRVMsXG4gICAgICAvLyBleHBvcnRlZCBmb3IgdGVzdGluZ1xuICAgICAgZ2VuZXJhdGVWaWRlb1NlZ21lbnRUaW1pbmdJbmZvOiBnZW5lcmF0ZVZpZGVvU2VnbWVudFRpbWluZ0luZm9cbiAgICB9O1xuXG4gICAgdmFyIGluc3BlY3RNcDQsXG4gICAgICAgIF90ZXh0aWZ5TXAsXG4gICAgICAgIHBhcnNlVHlwZSQyID0gcHJvYmUucGFyc2VUeXBlLFxuICAgICAgICBwYXJzZU1wNERhdGUgPSBmdW5jdGlvbiBwYXJzZU1wNERhdGUoc2Vjb25kcykge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKHNlY29uZHMgKiAxMDAwIC0gMjA4Mjg0NDgwMDAwMCk7XG4gICAgfSxcbiAgICAgICAgcGFyc2VTYW1wbGVGbGFncyA9IGZ1bmN0aW9uIHBhcnNlU2FtcGxlRmxhZ3MoZmxhZ3MpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzTGVhZGluZzogKGZsYWdzWzBdICYgMHgwYykgPj4+IDIsXG4gICAgICAgIGRlcGVuZHNPbjogZmxhZ3NbMF0gJiAweDAzLFxuICAgICAgICBpc0RlcGVuZGVkT246IChmbGFnc1sxXSAmIDB4YzApID4+PiA2LFxuICAgICAgICBoYXNSZWR1bmRhbmN5OiAoZmxhZ3NbMV0gJiAweDMwKSA+Pj4gNCxcbiAgICAgICAgcGFkZGluZ1ZhbHVlOiAoZmxhZ3NbMV0gJiAweDBlKSA+Pj4gMSxcbiAgICAgICAgaXNOb25TeW5jU2FtcGxlOiBmbGFnc1sxXSAmIDB4MDEsXG4gICAgICAgIGRlZ3JhZGF0aW9uUHJpb3JpdHk6IGZsYWdzWzJdIDw8IDggfCBmbGFnc1szXVxuICAgICAgfTtcbiAgICB9LFxuICAgICAgICBuYWxQYXJzZSA9IGZ1bmN0aW9uIG5hbFBhcnNlKGF2Y1N0cmVhbSkge1xuICAgICAgdmFyIGF2Y1ZpZXcgPSBuZXcgRGF0YVZpZXcoYXZjU3RyZWFtLmJ1ZmZlciwgYXZjU3RyZWFtLmJ5dGVPZmZzZXQsIGF2Y1N0cmVhbS5ieXRlTGVuZ3RoKSxcbiAgICAgICAgICByZXN1bHQgPSBbXSxcbiAgICAgICAgICBpLFxuICAgICAgICAgIGxlbmd0aDtcblxuICAgICAgZm9yIChpID0gMDsgaSArIDQgPCBhdmNTdHJlYW0ubGVuZ3RoOyBpICs9IGxlbmd0aCkge1xuICAgICAgICBsZW5ndGggPSBhdmNWaWV3LmdldFVpbnQzMihpKTtcbiAgICAgICAgaSArPSA0OyAvLyBiYWlsIGlmIHRoaXMgZG9lc24ndCBhcHBlYXIgdG8gYmUgYW4gSDI2NCBzdHJlYW1cblxuICAgICAgICBpZiAobGVuZ3RoIDw9IDApIHtcbiAgICAgICAgICByZXN1bHQucHVzaCgnPHNwYW4gc3R5bGU9XFwnY29sb3I6cmVkO1xcJz5NQUxGT1JNRUQgREFUQTwvc3Bhbj4nKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAoYXZjU3RyZWFtW2ldICYgMHgxRikge1xuICAgICAgICAgIGNhc2UgMHgwMTpcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKCdzbGljZV9sYXllcl93aXRob3V0X3BhcnRpdGlvbmluZ19yYnNwJyk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMHgwNTpcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKCdzbGljZV9sYXllcl93aXRob3V0X3BhcnRpdGlvbmluZ19yYnNwX2lkcicpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDB4MDY6XG4gICAgICAgICAgICByZXN1bHQucHVzaCgnc2VpX3Jic3AnKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAweDA3OlxuICAgICAgICAgICAgcmVzdWx0LnB1c2goJ3NlcV9wYXJhbWV0ZXJfc2V0X3Jic3AnKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAweDA4OlxuICAgICAgICAgICAgcmVzdWx0LnB1c2goJ3BpY19wYXJhbWV0ZXJfc2V0X3Jic3AnKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAweDA5OlxuICAgICAgICAgICAgcmVzdWx0LnB1c2goJ2FjY2Vzc191bml0X2RlbGltaXRlcl9yYnNwJyk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXN1bHQucHVzaCgnVU5LTk9XTiBOQUwgLSAnICsgYXZjU3RyZWFtW2ldICYgMHgxRik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG4gICAgICAgIC8vIHJlZ2lzdHJ5IG9mIGhhbmRsZXJzIGZvciBpbmRpdmlkdWFsIG1wNCBib3ggdHlwZXNcbiAgICBwYXJzZSQkMSA9IHtcbiAgICAgIC8vIGNvZGluZ25hbWUsIG5vdCBhIGZpcnN0LWNsYXNzIGJveCB0eXBlLiBzdHNkIGVudHJpZXMgc2hhcmUgdGhlXG4gICAgICAvLyBzYW1lIGZvcm1hdCBhcyByZWFsIGJveGVzIHNvIHRoZSBwYXJzaW5nIGluZnJhc3RydWN0dXJlIGNhbiBiZVxuICAgICAgLy8gc2hhcmVkXG4gICAgICBhdmMxOiBmdW5jdGlvbiBhdmMxKGRhdGEpIHtcbiAgICAgICAgdmFyIHZpZXcgPSBuZXcgRGF0YVZpZXcoZGF0YS5idWZmZXIsIGRhdGEuYnl0ZU9mZnNldCwgZGF0YS5ieXRlTGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkYXRhUmVmZXJlbmNlSW5kZXg6IHZpZXcuZ2V0VWludDE2KDYpLFxuICAgICAgICAgIHdpZHRoOiB2aWV3LmdldFVpbnQxNigyNCksXG4gICAgICAgICAgaGVpZ2h0OiB2aWV3LmdldFVpbnQxNigyNiksXG4gICAgICAgICAgaG9yaXpyZXNvbHV0aW9uOiB2aWV3LmdldFVpbnQxNigyOCkgKyB2aWV3LmdldFVpbnQxNigzMCkgLyAxNixcbiAgICAgICAgICB2ZXJ0cmVzb2x1dGlvbjogdmlldy5nZXRVaW50MTYoMzIpICsgdmlldy5nZXRVaW50MTYoMzQpIC8gMTYsXG4gICAgICAgICAgZnJhbWVDb3VudDogdmlldy5nZXRVaW50MTYoNDApLFxuICAgICAgICAgIGRlcHRoOiB2aWV3LmdldFVpbnQxNig3NCksXG4gICAgICAgICAgY29uZmlnOiBpbnNwZWN0TXA0KGRhdGEuc3ViYXJyYXkoNzgsIGRhdGEuYnl0ZUxlbmd0aCkpXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgYXZjQzogZnVuY3Rpb24gYXZjQyhkYXRhKSB7XG4gICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGRhdGEuYnVmZmVyLCBkYXRhLmJ5dGVPZmZzZXQsIGRhdGEuYnl0ZUxlbmd0aCksXG4gICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgY29uZmlndXJhdGlvblZlcnNpb246IGRhdGFbMF0sXG4gICAgICAgICAgYXZjUHJvZmlsZUluZGljYXRpb246IGRhdGFbMV0sXG4gICAgICAgICAgcHJvZmlsZUNvbXBhdGliaWxpdHk6IGRhdGFbMl0sXG4gICAgICAgICAgYXZjTGV2ZWxJbmRpY2F0aW9uOiBkYXRhWzNdLFxuICAgICAgICAgIGxlbmd0aFNpemVNaW51c09uZTogZGF0YVs0XSAmIDB4MDMsXG4gICAgICAgICAgc3BzOiBbXSxcbiAgICAgICAgICBwcHM6IFtdXG4gICAgICAgIH0sXG4gICAgICAgICAgICBudW1PZlNlcXVlbmNlUGFyYW1ldGVyU2V0cyA9IGRhdGFbNV0gJiAweDFmLFxuICAgICAgICAgICAgbnVtT2ZQaWN0dXJlUGFyYW1ldGVyU2V0cyxcbiAgICAgICAgICAgIG5hbFNpemUsXG4gICAgICAgICAgICBvZmZzZXQsXG4gICAgICAgICAgICBpOyAvLyBpdGVyYXRlIHBhc3QgYW55IFNQU3NcblxuICAgICAgICBvZmZzZXQgPSA2O1xuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1PZlNlcXVlbmNlUGFyYW1ldGVyU2V0czsgaSsrKSB7XG4gICAgICAgICAgbmFsU2l6ZSA9IHZpZXcuZ2V0VWludDE2KG9mZnNldCk7XG4gICAgICAgICAgb2Zmc2V0ICs9IDI7XG4gICAgICAgICAgcmVzdWx0LnNwcy5wdXNoKG5ldyBVaW50OEFycmF5KGRhdGEuc3ViYXJyYXkob2Zmc2V0LCBvZmZzZXQgKyBuYWxTaXplKSkpO1xuICAgICAgICAgIG9mZnNldCArPSBuYWxTaXplO1xuICAgICAgICB9IC8vIGl0ZXJhdGUgcGFzdCBhbnkgUFBTc1xuXG5cbiAgICAgICAgbnVtT2ZQaWN0dXJlUGFyYW1ldGVyU2V0cyA9IGRhdGFbb2Zmc2V0XTtcbiAgICAgICAgb2Zmc2V0Kys7XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG51bU9mUGljdHVyZVBhcmFtZXRlclNldHM7IGkrKykge1xuICAgICAgICAgIG5hbFNpemUgPSB2aWV3LmdldFVpbnQxNihvZmZzZXQpO1xuICAgICAgICAgIG9mZnNldCArPSAyO1xuICAgICAgICAgIHJlc3VsdC5wcHMucHVzaChuZXcgVWludDhBcnJheShkYXRhLnN1YmFycmF5KG9mZnNldCwgb2Zmc2V0ICsgbmFsU2l6ZSkpKTtcbiAgICAgICAgICBvZmZzZXQgKz0gbmFsU2l6ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9LFxuICAgICAgYnRydDogZnVuY3Rpb24gYnRydChkYXRhKSB7XG4gICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGRhdGEuYnVmZmVyLCBkYXRhLmJ5dGVPZmZzZXQsIGRhdGEuYnl0ZUxlbmd0aCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgYnVmZmVyU2l6ZURCOiB2aWV3LmdldFVpbnQzMigwKSxcbiAgICAgICAgICBtYXhCaXRyYXRlOiB2aWV3LmdldFVpbnQzMig0KSxcbiAgICAgICAgICBhdmdCaXRyYXRlOiB2aWV3LmdldFVpbnQzMig4KVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGVzZHM6IGZ1bmN0aW9uIGVzZHMoZGF0YSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZlcnNpb246IGRhdGFbMF0sXG4gICAgICAgICAgZmxhZ3M6IG5ldyBVaW50OEFycmF5KGRhdGEuc3ViYXJyYXkoMSwgNCkpLFxuICAgICAgICAgIGVzSWQ6IGRhdGFbNl0gPDwgOCB8IGRhdGFbN10sXG4gICAgICAgICAgc3RyZWFtUHJpb3JpdHk6IGRhdGFbOF0gJiAweDFmLFxuICAgICAgICAgIGRlY29kZXJDb25maWc6IHtcbiAgICAgICAgICAgIG9iamVjdFByb2ZpbGVJbmRpY2F0aW9uOiBkYXRhWzExXSxcbiAgICAgICAgICAgIHN0cmVhbVR5cGU6IGRhdGFbMTJdID4+PiAyICYgMHgzZixcbiAgICAgICAgICAgIGJ1ZmZlclNpemU6IGRhdGFbMTNdIDw8IDE2IHwgZGF0YVsxNF0gPDwgOCB8IGRhdGFbMTVdLFxuICAgICAgICAgICAgbWF4Qml0cmF0ZTogZGF0YVsxNl0gPDwgMjQgfCBkYXRhWzE3XSA8PCAxNiB8IGRhdGFbMThdIDw8IDggfCBkYXRhWzE5XSxcbiAgICAgICAgICAgIGF2Z0JpdHJhdGU6IGRhdGFbMjBdIDw8IDI0IHwgZGF0YVsyMV0gPDwgMTYgfCBkYXRhWzIyXSA8PCA4IHwgZGF0YVsyM10sXG4gICAgICAgICAgICBkZWNvZGVyQ29uZmlnRGVzY3JpcHRvcjoge1xuICAgICAgICAgICAgICB0YWc6IGRhdGFbMjRdLFxuICAgICAgICAgICAgICBsZW5ndGg6IGRhdGFbMjVdLFxuICAgICAgICAgICAgICBhdWRpb09iamVjdFR5cGU6IGRhdGFbMjZdID4+PiAzICYgMHgxZixcbiAgICAgICAgICAgICAgc2FtcGxpbmdGcmVxdWVuY3lJbmRleDogKGRhdGFbMjZdICYgMHgwNykgPDwgMSB8IGRhdGFbMjddID4+PiA3ICYgMHgwMSxcbiAgICAgICAgICAgICAgY2hhbm5lbENvbmZpZ3VyYXRpb246IGRhdGFbMjddID4+PiAzICYgMHgwZlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBmdHlwOiBmdW5jdGlvbiBmdHlwKGRhdGEpIHtcbiAgICAgICAgdmFyIHZpZXcgPSBuZXcgRGF0YVZpZXcoZGF0YS5idWZmZXIsIGRhdGEuYnl0ZU9mZnNldCwgZGF0YS5ieXRlTGVuZ3RoKSxcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICBtYWpvckJyYW5kOiBwYXJzZVR5cGUkMihkYXRhLnN1YmFycmF5KDAsIDQpKSxcbiAgICAgICAgICBtaW5vclZlcnNpb246IHZpZXcuZ2V0VWludDMyKDQpLFxuICAgICAgICAgIGNvbXBhdGlibGVCcmFuZHM6IFtdXG4gICAgICAgIH0sXG4gICAgICAgICAgICBpID0gODtcblxuICAgICAgICB3aGlsZSAoaSA8IGRhdGEuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgIHJlc3VsdC5jb21wYXRpYmxlQnJhbmRzLnB1c2gocGFyc2VUeXBlJDIoZGF0YS5zdWJhcnJheShpLCBpICsgNCkpKTtcbiAgICAgICAgICBpICs9IDQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSxcbiAgICAgIGRpbmY6IGZ1bmN0aW9uIGRpbmYoZGF0YSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGJveGVzOiBpbnNwZWN0TXA0KGRhdGEpXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgZHJlZjogZnVuY3Rpb24gZHJlZihkYXRhKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmVyc2lvbjogZGF0YVswXSxcbiAgICAgICAgICBmbGFnczogbmV3IFVpbnQ4QXJyYXkoZGF0YS5zdWJhcnJheSgxLCA0KSksXG4gICAgICAgICAgZGF0YVJlZmVyZW5jZXM6IGluc3BlY3RNcDQoZGF0YS5zdWJhcnJheSg4KSlcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBoZGxyOiBmdW5jdGlvbiBoZGxyKGRhdGEpIHtcbiAgICAgICAgdmFyIHZpZXcgPSBuZXcgRGF0YVZpZXcoZGF0YS5idWZmZXIsIGRhdGEuYnl0ZU9mZnNldCwgZGF0YS5ieXRlTGVuZ3RoKSxcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICB2ZXJzaW9uOiB2aWV3LmdldFVpbnQ4KDApLFxuICAgICAgICAgIGZsYWdzOiBuZXcgVWludDhBcnJheShkYXRhLnN1YmFycmF5KDEsIDQpKSxcbiAgICAgICAgICBoYW5kbGVyVHlwZTogcGFyc2VUeXBlJDIoZGF0YS5zdWJhcnJheSg4LCAxMikpLFxuICAgICAgICAgIG5hbWU6ICcnXG4gICAgICAgIH0sXG4gICAgICAgICAgICBpID0gODsgLy8gcGFyc2Ugb3V0IHRoZSBuYW1lIGZpZWxkXG5cbiAgICAgICAgZm9yIChpID0gMjQ7IGkgPCBkYXRhLmJ5dGVMZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChkYXRhW2ldID09PSAweDAwKSB7XG4gICAgICAgICAgICAvLyB0aGUgbmFtZSBmaWVsZCBpcyBudWxsLXRlcm1pbmF0ZWRcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlc3VsdC5uYW1lICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZGF0YVtpXSk7XG4gICAgICAgIH0gLy8gZGVjb2RlIFVURi04IHRvIGphdmFzY3JpcHQncyBpbnRlcm5hbCByZXByZXNlbnRhdGlvblxuICAgICAgICAvLyBzZWUgaHR0cDovL2VjbWFuYXV0LmJsb2dzcG90LmNvbS8yMDA2LzA3L2VuY29kaW5nLWRlY29kaW5nLXV0ZjgtaW4tamF2YXNjcmlwdC5odG1sXG5cblxuICAgICAgICByZXN1bHQubmFtZSA9IGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUocmVzdWx0Lm5hbWUpKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0sXG4gICAgICBtZGF0OiBmdW5jdGlvbiBtZGF0KGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBieXRlTGVuZ3RoOiBkYXRhLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgbmFsczogbmFsUGFyc2UoZGF0YSlcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBtZGhkOiBmdW5jdGlvbiBtZGhkKGRhdGEpIHtcbiAgICAgICAgdmFyIHZpZXcgPSBuZXcgRGF0YVZpZXcoZGF0YS5idWZmZXIsIGRhdGEuYnl0ZU9mZnNldCwgZGF0YS5ieXRlTGVuZ3RoKSxcbiAgICAgICAgICAgIGkgPSA0LFxuICAgICAgICAgICAgbGFuZ3VhZ2UsXG4gICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgdmVyc2lvbjogdmlldy5nZXRVaW50OCgwKSxcbiAgICAgICAgICBmbGFnczogbmV3IFVpbnQ4QXJyYXkoZGF0YS5zdWJhcnJheSgxLCA0KSksXG4gICAgICAgICAgbGFuZ3VhZ2U6ICcnXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHJlc3VsdC52ZXJzaW9uID09PSAxKSB7XG4gICAgICAgICAgaSArPSA0O1xuICAgICAgICAgIHJlc3VsdC5jcmVhdGlvblRpbWUgPSBwYXJzZU1wNERhdGUodmlldy5nZXRVaW50MzIoaSkpOyAvLyB0cnVuY2F0aW5nIHRvcCA0IGJ5dGVzXG5cbiAgICAgICAgICBpICs9IDg7XG4gICAgICAgICAgcmVzdWx0Lm1vZGlmaWNhdGlvblRpbWUgPSBwYXJzZU1wNERhdGUodmlldy5nZXRVaW50MzIoaSkpOyAvLyB0cnVuY2F0aW5nIHRvcCA0IGJ5dGVzXG5cbiAgICAgICAgICBpICs9IDQ7XG4gICAgICAgICAgcmVzdWx0LnRpbWVzY2FsZSA9IHZpZXcuZ2V0VWludDMyKGkpO1xuICAgICAgICAgIGkgKz0gODtcbiAgICAgICAgICByZXN1bHQuZHVyYXRpb24gPSB2aWV3LmdldFVpbnQzMihpKTsgLy8gdHJ1bmNhdGluZyB0b3AgNCBieXRlc1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdC5jcmVhdGlvblRpbWUgPSBwYXJzZU1wNERhdGUodmlldy5nZXRVaW50MzIoaSkpO1xuICAgICAgICAgIGkgKz0gNDtcbiAgICAgICAgICByZXN1bHQubW9kaWZpY2F0aW9uVGltZSA9IHBhcnNlTXA0RGF0ZSh2aWV3LmdldFVpbnQzMihpKSk7XG4gICAgICAgICAgaSArPSA0O1xuICAgICAgICAgIHJlc3VsdC50aW1lc2NhbGUgPSB2aWV3LmdldFVpbnQzMihpKTtcbiAgICAgICAgICBpICs9IDQ7XG4gICAgICAgICAgcmVzdWx0LmR1cmF0aW9uID0gdmlldy5nZXRVaW50MzIoaSk7XG4gICAgICAgIH1cblxuICAgICAgICBpICs9IDQ7IC8vIGxhbmd1YWdlIGlzIHN0b3JlZCBhcyBhbiBJU08tNjM5LTIvVCBjb2RlIGluIGFuIGFycmF5IG9mIHRocmVlIDUtYml0IGZpZWxkc1xuICAgICAgICAvLyBlYWNoIGZpZWxkIGlzIHRoZSBwYWNrZWQgZGlmZmVyZW5jZSBiZXR3ZWVuIGl0cyBBU0NJSSB2YWx1ZSBhbmQgMHg2MFxuXG4gICAgICAgIGxhbmd1YWdlID0gdmlldy5nZXRVaW50MTYoaSk7XG4gICAgICAgIHJlc3VsdC5sYW5ndWFnZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChsYW5ndWFnZSA+PiAxMCkgKyAweDYwKTtcbiAgICAgICAgcmVzdWx0Lmxhbmd1YWdlICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChsYW5ndWFnZSAmIDB4MDNlMCkgPj4gNSkgKyAweDYwKTtcbiAgICAgICAgcmVzdWx0Lmxhbmd1YWdlICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGxhbmd1YWdlICYgMHgxZikgKyAweDYwKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0sXG4gICAgICBtZGlhOiBmdW5jdGlvbiBtZGlhKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBib3hlczogaW5zcGVjdE1wNChkYXRhKVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIG1maGQ6IGZ1bmN0aW9uIG1maGQoZGF0YSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZlcnNpb246IGRhdGFbMF0sXG4gICAgICAgICAgZmxhZ3M6IG5ldyBVaW50OEFycmF5KGRhdGEuc3ViYXJyYXkoMSwgNCkpLFxuICAgICAgICAgIHNlcXVlbmNlTnVtYmVyOiBkYXRhWzRdIDw8IDI0IHwgZGF0YVs1XSA8PCAxNiB8IGRhdGFbNl0gPDwgOCB8IGRhdGFbN11cbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBtaW5mOiBmdW5jdGlvbiBtaW5mKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBib3hlczogaW5zcGVjdE1wNChkYXRhKVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIC8vIGNvZGluZ25hbWUsIG5vdCBhIGZpcnN0LWNsYXNzIGJveCB0eXBlLiBzdHNkIGVudHJpZXMgc2hhcmUgdGhlXG4gICAgICAvLyBzYW1lIGZvcm1hdCBhcyByZWFsIGJveGVzIHNvIHRoZSBwYXJzaW5nIGluZnJhc3RydWN0dXJlIGNhbiBiZVxuICAgICAgLy8gc2hhcmVkXG4gICAgICBtcDRhOiBmdW5jdGlvbiBtcDRhKGRhdGEpIHtcbiAgICAgICAgdmFyIHZpZXcgPSBuZXcgRGF0YVZpZXcoZGF0YS5idWZmZXIsIGRhdGEuYnl0ZU9mZnNldCwgZGF0YS5ieXRlTGVuZ3RoKSxcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAvLyA2IGJ5dGVzIHJlc2VydmVkXG4gICAgICAgICAgZGF0YVJlZmVyZW5jZUluZGV4OiB2aWV3LmdldFVpbnQxNig2KSxcbiAgICAgICAgICAvLyA0ICsgNCBieXRlcyByZXNlcnZlZFxuICAgICAgICAgIGNoYW5uZWxjb3VudDogdmlldy5nZXRVaW50MTYoMTYpLFxuICAgICAgICAgIHNhbXBsZXNpemU6IHZpZXcuZ2V0VWludDE2KDE4KSxcbiAgICAgICAgICAvLyAyIGJ5dGVzIHByZV9kZWZpbmVkXG4gICAgICAgICAgLy8gMiBieXRlcyByZXNlcnZlZFxuICAgICAgICAgIHNhbXBsZXJhdGU6IHZpZXcuZ2V0VWludDE2KDI0KSArIHZpZXcuZ2V0VWludDE2KDI2KSAvIDY1NTM2XG4gICAgICAgIH07IC8vIGlmIHRoZXJlIGFyZSBtb3JlIGJ5dGVzIHRvIHByb2Nlc3MsIGFzc3VtZSB0aGlzIGlzIGFuIElTTy9JRUNcbiAgICAgICAgLy8gMTQ0OTYtMTQgTVA0QXVkaW9TYW1wbGVFbnRyeSBhbmQgcGFyc2UgdGhlIEVTREJveFxuXG4gICAgICAgIGlmIChkYXRhLmJ5dGVMZW5ndGggPiAyOCkge1xuICAgICAgICAgIHJlc3VsdC5zdHJlYW1EZXNjcmlwdG9yID0gaW5zcGVjdE1wNChkYXRhLnN1YmFycmF5KDI4KSlbMF07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSxcbiAgICAgIG1vb2Y6IGZ1bmN0aW9uIG1vb2YoZGF0YSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGJveGVzOiBpbnNwZWN0TXA0KGRhdGEpXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgbW9vdjogZnVuY3Rpb24gbW9vdihkYXRhKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgYm94ZXM6IGluc3BlY3RNcDQoZGF0YSlcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBtdmV4OiBmdW5jdGlvbiBtdmV4KGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBib3hlczogaW5zcGVjdE1wNChkYXRhKVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIG12aGQ6IGZ1bmN0aW9uIG12aGQoZGF0YSkge1xuICAgICAgICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhkYXRhLmJ1ZmZlciwgZGF0YS5ieXRlT2Zmc2V0LCBkYXRhLmJ5dGVMZW5ndGgpLFxuICAgICAgICAgICAgaSA9IDQsXG4gICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgdmVyc2lvbjogdmlldy5nZXRVaW50OCgwKSxcbiAgICAgICAgICBmbGFnczogbmV3IFVpbnQ4QXJyYXkoZGF0YS5zdWJhcnJheSgxLCA0KSlcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAocmVzdWx0LnZlcnNpb24gPT09IDEpIHtcbiAgICAgICAgICBpICs9IDQ7XG4gICAgICAgICAgcmVzdWx0LmNyZWF0aW9uVGltZSA9IHBhcnNlTXA0RGF0ZSh2aWV3LmdldFVpbnQzMihpKSk7IC8vIHRydW5jYXRpbmcgdG9wIDQgYnl0ZXNcblxuICAgICAgICAgIGkgKz0gODtcbiAgICAgICAgICByZXN1bHQubW9kaWZpY2F0aW9uVGltZSA9IHBhcnNlTXA0RGF0ZSh2aWV3LmdldFVpbnQzMihpKSk7IC8vIHRydW5jYXRpbmcgdG9wIDQgYnl0ZXNcblxuICAgICAgICAgIGkgKz0gNDtcbiAgICAgICAgICByZXN1bHQudGltZXNjYWxlID0gdmlldy5nZXRVaW50MzIoaSk7XG4gICAgICAgICAgaSArPSA4O1xuICAgICAgICAgIHJlc3VsdC5kdXJhdGlvbiA9IHZpZXcuZ2V0VWludDMyKGkpOyAvLyB0cnVuY2F0aW5nIHRvcCA0IGJ5dGVzXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LmNyZWF0aW9uVGltZSA9IHBhcnNlTXA0RGF0ZSh2aWV3LmdldFVpbnQzMihpKSk7XG4gICAgICAgICAgaSArPSA0O1xuICAgICAgICAgIHJlc3VsdC5tb2RpZmljYXRpb25UaW1lID0gcGFyc2VNcDREYXRlKHZpZXcuZ2V0VWludDMyKGkpKTtcbiAgICAgICAgICBpICs9IDQ7XG4gICAgICAgICAgcmVzdWx0LnRpbWVzY2FsZSA9IHZpZXcuZ2V0VWludDMyKGkpO1xuICAgICAgICAgIGkgKz0gNDtcbiAgICAgICAgICByZXN1bHQuZHVyYXRpb24gPSB2aWV3LmdldFVpbnQzMihpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGkgKz0gNDsgLy8gY29udmVydCBmaXhlZC1wb2ludCwgYmFzZSAxNiBiYWNrIHRvIGEgbnVtYmVyXG5cbiAgICAgICAgcmVzdWx0LnJhdGUgPSB2aWV3LmdldFVpbnQxNihpKSArIHZpZXcuZ2V0VWludDE2KGkgKyAyKSAvIDE2O1xuICAgICAgICBpICs9IDQ7XG4gICAgICAgIHJlc3VsdC52b2x1bWUgPSB2aWV3LmdldFVpbnQ4KGkpICsgdmlldy5nZXRVaW50OChpICsgMSkgLyA4O1xuICAgICAgICBpICs9IDI7XG4gICAgICAgIGkgKz0gMjtcbiAgICAgICAgaSArPSAyICogNDtcbiAgICAgICAgcmVzdWx0Lm1hdHJpeCA9IG5ldyBVaW50MzJBcnJheShkYXRhLnN1YmFycmF5KGksIGkgKyA5ICogNCkpO1xuICAgICAgICBpICs9IDkgKiA0O1xuICAgICAgICBpICs9IDYgKiA0O1xuICAgICAgICByZXN1bHQubmV4dFRyYWNrSWQgPSB2aWV3LmdldFVpbnQzMihpKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0sXG4gICAgICBwZGluOiBmdW5jdGlvbiBwZGluKGRhdGEpIHtcbiAgICAgICAgdmFyIHZpZXcgPSBuZXcgRGF0YVZpZXcoZGF0YS5idWZmZXIsIGRhdGEuYnl0ZU9mZnNldCwgZGF0YS5ieXRlTGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2ZXJzaW9uOiB2aWV3LmdldFVpbnQ4KDApLFxuICAgICAgICAgIGZsYWdzOiBuZXcgVWludDhBcnJheShkYXRhLnN1YmFycmF5KDEsIDQpKSxcbiAgICAgICAgICByYXRlOiB2aWV3LmdldFVpbnQzMig0KSxcbiAgICAgICAgICBpbml0aWFsRGVsYXk6IHZpZXcuZ2V0VWludDMyKDgpXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgc2R0cDogZnVuY3Rpb24gc2R0cChkYXRhKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgICAgdmVyc2lvbjogZGF0YVswXSxcbiAgICAgICAgICBmbGFnczogbmV3IFVpbnQ4QXJyYXkoZGF0YS5zdWJhcnJheSgxLCA0KSksXG4gICAgICAgICAgc2FtcGxlczogW11cbiAgICAgICAgfSxcbiAgICAgICAgICAgIGk7XG5cbiAgICAgICAgZm9yIChpID0gNDsgaSA8IGRhdGEuYnl0ZUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgcmVzdWx0LnNhbXBsZXMucHVzaCh7XG4gICAgICAgICAgICBkZXBlbmRzT246IChkYXRhW2ldICYgMHgzMCkgPj4gNCxcbiAgICAgICAgICAgIGlzRGVwZW5kZWRPbjogKGRhdGFbaV0gJiAweDBjKSA+PiAyLFxuICAgICAgICAgICAgaGFzUmVkdW5kYW5jeTogZGF0YVtpXSAmIDB4MDNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9LFxuICAgICAgc2lkeDogZnVuY3Rpb24gc2lkeChkYXRhKSB7XG4gICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGRhdGEuYnVmZmVyLCBkYXRhLmJ5dGVPZmZzZXQsIGRhdGEuYnl0ZUxlbmd0aCksXG4gICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgdmVyc2lvbjogZGF0YVswXSxcbiAgICAgICAgICBmbGFnczogbmV3IFVpbnQ4QXJyYXkoZGF0YS5zdWJhcnJheSgxLCA0KSksXG4gICAgICAgICAgcmVmZXJlbmNlczogW10sXG4gICAgICAgICAgcmVmZXJlbmNlSWQ6IHZpZXcuZ2V0VWludDMyKDQpLFxuICAgICAgICAgIHRpbWVzY2FsZTogdmlldy5nZXRVaW50MzIoOCksXG4gICAgICAgICAgZWFybGllc3RQcmVzZW50YXRpb25UaW1lOiB2aWV3LmdldFVpbnQzMigxMiksXG4gICAgICAgICAgZmlyc3RPZmZzZXQ6IHZpZXcuZ2V0VWludDMyKDE2KVxuICAgICAgICB9LFxuICAgICAgICAgICAgcmVmZXJlbmNlQ291bnQgPSB2aWV3LmdldFVpbnQxNigyMiksXG4gICAgICAgICAgICBpO1xuXG4gICAgICAgIGZvciAoaSA9IDI0OyByZWZlcmVuY2VDb3VudDsgaSArPSAxMiwgcmVmZXJlbmNlQ291bnQtLSkge1xuICAgICAgICAgIHJlc3VsdC5yZWZlcmVuY2VzLnB1c2goe1xuICAgICAgICAgICAgcmVmZXJlbmNlVHlwZTogKGRhdGFbaV0gJiAweDgwKSA+Pj4gNyxcbiAgICAgICAgICAgIHJlZmVyZW5jZWRTaXplOiB2aWV3LmdldFVpbnQzMihpKSAmIDB4N0ZGRkZGRkYsXG4gICAgICAgICAgICBzdWJzZWdtZW50RHVyYXRpb246IHZpZXcuZ2V0VWludDMyKGkgKyA0KSxcbiAgICAgICAgICAgIHN0YXJ0c1dpdGhTYXA6ICEhKGRhdGFbaSArIDhdICYgMHg4MCksXG4gICAgICAgICAgICBzYXBUeXBlOiAoZGF0YVtpICsgOF0gJiAweDcwKSA+Pj4gNCxcbiAgICAgICAgICAgIHNhcERlbHRhVGltZTogdmlldy5nZXRVaW50MzIoaSArIDgpICYgMHgwRkZGRkZGRlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0sXG4gICAgICBzbWhkOiBmdW5jdGlvbiBzbWhkKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2ZXJzaW9uOiBkYXRhWzBdLFxuICAgICAgICAgIGZsYWdzOiBuZXcgVWludDhBcnJheShkYXRhLnN1YmFycmF5KDEsIDQpKSxcbiAgICAgICAgICBiYWxhbmNlOiBkYXRhWzRdICsgZGF0YVs1XSAvIDI1NlxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHN0Ymw6IGZ1bmN0aW9uIHN0YmwoZGF0YSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGJveGVzOiBpbnNwZWN0TXA0KGRhdGEpXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgc3RjbzogZnVuY3Rpb24gc3RjbyhkYXRhKSB7XG4gICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGRhdGEuYnVmZmVyLCBkYXRhLmJ5dGVPZmZzZXQsIGRhdGEuYnl0ZUxlbmd0aCksXG4gICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgdmVyc2lvbjogZGF0YVswXSxcbiAgICAgICAgICBmbGFnczogbmV3IFVpbnQ4QXJyYXkoZGF0YS5zdWJhcnJheSgxLCA0KSksXG4gICAgICAgICAgY2h1bmtPZmZzZXRzOiBbXVxuICAgICAgICB9LFxuICAgICAgICAgICAgZW50cnlDb3VudCA9IHZpZXcuZ2V0VWludDMyKDQpLFxuICAgICAgICAgICAgaTtcblxuICAgICAgICBmb3IgKGkgPSA4OyBlbnRyeUNvdW50OyBpICs9IDQsIGVudHJ5Q291bnQtLSkge1xuICAgICAgICAgIHJlc3VsdC5jaHVua09mZnNldHMucHVzaCh2aWV3LmdldFVpbnQzMihpKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSxcbiAgICAgIHN0c2M6IGZ1bmN0aW9uIHN0c2MoZGF0YSkge1xuICAgICAgICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhkYXRhLmJ1ZmZlciwgZGF0YS5ieXRlT2Zmc2V0LCBkYXRhLmJ5dGVMZW5ndGgpLFxuICAgICAgICAgICAgZW50cnlDb3VudCA9IHZpZXcuZ2V0VWludDMyKDQpLFxuICAgICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgIHZlcnNpb246IGRhdGFbMF0sXG4gICAgICAgICAgZmxhZ3M6IG5ldyBVaW50OEFycmF5KGRhdGEuc3ViYXJyYXkoMSwgNCkpLFxuICAgICAgICAgIHNhbXBsZVRvQ2h1bmtzOiBbXVxuICAgICAgICB9LFxuICAgICAgICAgICAgaTtcblxuICAgICAgICBmb3IgKGkgPSA4OyBlbnRyeUNvdW50OyBpICs9IDEyLCBlbnRyeUNvdW50LS0pIHtcbiAgICAgICAgICByZXN1bHQuc2FtcGxlVG9DaHVua3MucHVzaCh7XG4gICAgICAgICAgICBmaXJzdENodW5rOiB2aWV3LmdldFVpbnQzMihpKSxcbiAgICAgICAgICAgIHNhbXBsZXNQZXJDaHVuazogdmlldy5nZXRVaW50MzIoaSArIDQpLFxuICAgICAgICAgICAgc2FtcGxlRGVzY3JpcHRpb25JbmRleDogdmlldy5nZXRVaW50MzIoaSArIDgpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSxcbiAgICAgIHN0c2Q6IGZ1bmN0aW9uIHN0c2QoZGF0YSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZlcnNpb246IGRhdGFbMF0sXG4gICAgICAgICAgZmxhZ3M6IG5ldyBVaW50OEFycmF5KGRhdGEuc3ViYXJyYXkoMSwgNCkpLFxuICAgICAgICAgIHNhbXBsZURlc2NyaXB0aW9uczogaW5zcGVjdE1wNChkYXRhLnN1YmFycmF5KDgpKVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHN0c3o6IGZ1bmN0aW9uIHN0c3ooZGF0YSkge1xuICAgICAgICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhkYXRhLmJ1ZmZlciwgZGF0YS5ieXRlT2Zmc2V0LCBkYXRhLmJ5dGVMZW5ndGgpLFxuICAgICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgIHZlcnNpb246IGRhdGFbMF0sXG4gICAgICAgICAgZmxhZ3M6IG5ldyBVaW50OEFycmF5KGRhdGEuc3ViYXJyYXkoMSwgNCkpLFxuICAgICAgICAgIHNhbXBsZVNpemU6IHZpZXcuZ2V0VWludDMyKDQpLFxuICAgICAgICAgIGVudHJpZXM6IFtdXG4gICAgICAgIH0sXG4gICAgICAgICAgICBpO1xuXG4gICAgICAgIGZvciAoaSA9IDEyOyBpIDwgZGF0YS5ieXRlTGVuZ3RoOyBpICs9IDQpIHtcbiAgICAgICAgICByZXN1bHQuZW50cmllcy5wdXNoKHZpZXcuZ2V0VWludDMyKGkpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9LFxuICAgICAgc3R0czogZnVuY3Rpb24gc3R0cyhkYXRhKSB7XG4gICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGRhdGEuYnVmZmVyLCBkYXRhLmJ5dGVPZmZzZXQsIGRhdGEuYnl0ZUxlbmd0aCksXG4gICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgdmVyc2lvbjogZGF0YVswXSxcbiAgICAgICAgICBmbGFnczogbmV3IFVpbnQ4QXJyYXkoZGF0YS5zdWJhcnJheSgxLCA0KSksXG4gICAgICAgICAgdGltZVRvU2FtcGxlczogW11cbiAgICAgICAgfSxcbiAgICAgICAgICAgIGVudHJ5Q291bnQgPSB2aWV3LmdldFVpbnQzMig0KSxcbiAgICAgICAgICAgIGk7XG5cbiAgICAgICAgZm9yIChpID0gODsgZW50cnlDb3VudDsgaSArPSA4LCBlbnRyeUNvdW50LS0pIHtcbiAgICAgICAgICByZXN1bHQudGltZVRvU2FtcGxlcy5wdXNoKHtcbiAgICAgICAgICAgIHNhbXBsZUNvdW50OiB2aWV3LmdldFVpbnQzMihpKSxcbiAgICAgICAgICAgIHNhbXBsZURlbHRhOiB2aWV3LmdldFVpbnQzMihpICsgNClcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9LFxuICAgICAgc3R5cDogZnVuY3Rpb24gc3R5cChkYXRhKSB7XG4gICAgICAgIHJldHVybiBwYXJzZSQkMS5mdHlwKGRhdGEpO1xuICAgICAgfSxcbiAgICAgIHRmZHQ6IGZ1bmN0aW9uIHRmZHQoZGF0YSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge1xuICAgICAgICAgIHZlcnNpb246IGRhdGFbMF0sXG4gICAgICAgICAgZmxhZ3M6IG5ldyBVaW50OEFycmF5KGRhdGEuc3ViYXJyYXkoMSwgNCkpLFxuICAgICAgICAgIGJhc2VNZWRpYURlY29kZVRpbWU6IGRhdGFbNF0gPDwgMjQgfCBkYXRhWzVdIDw8IDE2IHwgZGF0YVs2XSA8PCA4IHwgZGF0YVs3XVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChyZXN1bHQudmVyc2lvbiA9PT0gMSkge1xuICAgICAgICAgIHJlc3VsdC5iYXNlTWVkaWFEZWNvZGVUaW1lICo9IE1hdGgucG93KDIsIDMyKTtcbiAgICAgICAgICByZXN1bHQuYmFzZU1lZGlhRGVjb2RlVGltZSArPSBkYXRhWzhdIDw8IDI0IHwgZGF0YVs5XSA8PCAxNiB8IGRhdGFbMTBdIDw8IDggfCBkYXRhWzExXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9LFxuICAgICAgdGZoZDogZnVuY3Rpb24gdGZoZChkYXRhKSB7XG4gICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGRhdGEuYnVmZmVyLCBkYXRhLmJ5dGVPZmZzZXQsIGRhdGEuYnl0ZUxlbmd0aCksXG4gICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgdmVyc2lvbjogZGF0YVswXSxcbiAgICAgICAgICBmbGFnczogbmV3IFVpbnQ4QXJyYXkoZGF0YS5zdWJhcnJheSgxLCA0KSksXG4gICAgICAgICAgdHJhY2tJZDogdmlldy5nZXRVaW50MzIoNClcbiAgICAgICAgfSxcbiAgICAgICAgICAgIGJhc2VEYXRhT2Zmc2V0UHJlc2VudCA9IHJlc3VsdC5mbGFnc1syXSAmIDB4MDEsXG4gICAgICAgICAgICBzYW1wbGVEZXNjcmlwdGlvbkluZGV4UHJlc2VudCA9IHJlc3VsdC5mbGFnc1syXSAmIDB4MDIsXG4gICAgICAgICAgICBkZWZhdWx0U2FtcGxlRHVyYXRpb25QcmVzZW50ID0gcmVzdWx0LmZsYWdzWzJdICYgMHgwOCxcbiAgICAgICAgICAgIGRlZmF1bHRTYW1wbGVTaXplUHJlc2VudCA9IHJlc3VsdC5mbGFnc1syXSAmIDB4MTAsXG4gICAgICAgICAgICBkZWZhdWx0U2FtcGxlRmxhZ3NQcmVzZW50ID0gcmVzdWx0LmZsYWdzWzJdICYgMHgyMCxcbiAgICAgICAgICAgIGR1cmF0aW9uSXNFbXB0eSA9IHJlc3VsdC5mbGFnc1swXSAmIDB4MDEwMDAwLFxuICAgICAgICAgICAgZGVmYXVsdEJhc2VJc01vb2YgPSByZXN1bHQuZmxhZ3NbMF0gJiAweDAyMDAwMCxcbiAgICAgICAgICAgIGk7XG4gICAgICAgIGkgPSA4O1xuXG4gICAgICAgIGlmIChiYXNlRGF0YU9mZnNldFByZXNlbnQpIHtcbiAgICAgICAgICBpICs9IDQ7IC8vIHRydW5jYXRlIHRvcCA0IGJ5dGVzXG4gICAgICAgICAgLy8gRklYTUU6IHNob3VsZCB3ZSByZWFkIHRoZSBmdWxsIDY0IGJpdHM/XG5cbiAgICAgICAgICByZXN1bHQuYmFzZURhdGFPZmZzZXQgPSB2aWV3LmdldFVpbnQzMigxMik7XG4gICAgICAgICAgaSArPSA0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNhbXBsZURlc2NyaXB0aW9uSW5kZXhQcmVzZW50KSB7XG4gICAgICAgICAgcmVzdWx0LnNhbXBsZURlc2NyaXB0aW9uSW5kZXggPSB2aWV3LmdldFVpbnQzMihpKTtcbiAgICAgICAgICBpICs9IDQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGVmYXVsdFNhbXBsZUR1cmF0aW9uUHJlc2VudCkge1xuICAgICAgICAgIHJlc3VsdC5kZWZhdWx0U2FtcGxlRHVyYXRpb24gPSB2aWV3LmdldFVpbnQzMihpKTtcbiAgICAgICAgICBpICs9IDQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGVmYXVsdFNhbXBsZVNpemVQcmVzZW50KSB7XG4gICAgICAgICAgcmVzdWx0LmRlZmF1bHRTYW1wbGVTaXplID0gdmlldy5nZXRVaW50MzIoaSk7XG4gICAgICAgICAgaSArPSA0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRlZmF1bHRTYW1wbGVGbGFnc1ByZXNlbnQpIHtcbiAgICAgICAgICByZXN1bHQuZGVmYXVsdFNhbXBsZUZsYWdzID0gdmlldy5nZXRVaW50MzIoaSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZHVyYXRpb25Jc0VtcHR5KSB7XG4gICAgICAgICAgcmVzdWx0LmR1cmF0aW9uSXNFbXB0eSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJhc2VEYXRhT2Zmc2V0UHJlc2VudCAmJiBkZWZhdWx0QmFzZUlzTW9vZikge1xuICAgICAgICAgIHJlc3VsdC5iYXNlRGF0YU9mZnNldElzTW9vZiA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSxcbiAgICAgIHRraGQ6IGZ1bmN0aW9uIHRraGQoZGF0YSkge1xuICAgICAgICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhkYXRhLmJ1ZmZlciwgZGF0YS5ieXRlT2Zmc2V0LCBkYXRhLmJ5dGVMZW5ndGgpLFxuICAgICAgICAgICAgaSA9IDQsXG4gICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgdmVyc2lvbjogdmlldy5nZXRVaW50OCgwKSxcbiAgICAgICAgICBmbGFnczogbmV3IFVpbnQ4QXJyYXkoZGF0YS5zdWJhcnJheSgxLCA0KSlcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAocmVzdWx0LnZlcnNpb24gPT09IDEpIHtcbiAgICAgICAgICBpICs9IDQ7XG4gICAgICAgICAgcmVzdWx0LmNyZWF0aW9uVGltZSA9IHBhcnNlTXA0RGF0ZSh2aWV3LmdldFVpbnQzMihpKSk7IC8vIHRydW5jYXRpbmcgdG9wIDQgYnl0ZXNcblxuICAgICAgICAgIGkgKz0gODtcbiAgICAgICAgICByZXN1bHQubW9kaWZpY2F0aW9uVGltZSA9IHBhcnNlTXA0RGF0ZSh2aWV3LmdldFVpbnQzMihpKSk7IC8vIHRydW5jYXRpbmcgdG9wIDQgYnl0ZXNcblxuICAgICAgICAgIGkgKz0gNDtcbiAgICAgICAgICByZXN1bHQudHJhY2tJZCA9IHZpZXcuZ2V0VWludDMyKGkpO1xuICAgICAgICAgIGkgKz0gNDtcbiAgICAgICAgICBpICs9IDg7XG4gICAgICAgICAgcmVzdWx0LmR1cmF0aW9uID0gdmlldy5nZXRVaW50MzIoaSk7IC8vIHRydW5jYXRpbmcgdG9wIDQgYnl0ZXNcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQuY3JlYXRpb25UaW1lID0gcGFyc2VNcDREYXRlKHZpZXcuZ2V0VWludDMyKGkpKTtcbiAgICAgICAgICBpICs9IDQ7XG4gICAgICAgICAgcmVzdWx0Lm1vZGlmaWNhdGlvblRpbWUgPSBwYXJzZU1wNERhdGUodmlldy5nZXRVaW50MzIoaSkpO1xuICAgICAgICAgIGkgKz0gNDtcbiAgICAgICAgICByZXN1bHQudHJhY2tJZCA9IHZpZXcuZ2V0VWludDMyKGkpO1xuICAgICAgICAgIGkgKz0gNDtcbiAgICAgICAgICBpICs9IDQ7XG4gICAgICAgICAgcmVzdWx0LmR1cmF0aW9uID0gdmlldy5nZXRVaW50MzIoaSk7XG4gICAgICAgIH1cblxuICAgICAgICBpICs9IDQ7XG4gICAgICAgIGkgKz0gMiAqIDQ7XG4gICAgICAgIHJlc3VsdC5sYXllciA9IHZpZXcuZ2V0VWludDE2KGkpO1xuICAgICAgICBpICs9IDI7XG4gICAgICAgIHJlc3VsdC5hbHRlcm5hdGVHcm91cCA9IHZpZXcuZ2V0VWludDE2KGkpO1xuICAgICAgICBpICs9IDI7IC8vIGNvbnZlcnQgZml4ZWQtcG9pbnQsIGJhc2UgMTYgYmFjayB0byBhIG51bWJlclxuXG4gICAgICAgIHJlc3VsdC52b2x1bWUgPSB2aWV3LmdldFVpbnQ4KGkpICsgdmlldy5nZXRVaW50OChpICsgMSkgLyA4O1xuICAgICAgICBpICs9IDI7XG4gICAgICAgIGkgKz0gMjtcbiAgICAgICAgcmVzdWx0Lm1hdHJpeCA9IG5ldyBVaW50MzJBcnJheShkYXRhLnN1YmFycmF5KGksIGkgKyA5ICogNCkpO1xuICAgICAgICBpICs9IDkgKiA0O1xuICAgICAgICByZXN1bHQud2lkdGggPSB2aWV3LmdldFVpbnQxNihpKSArIHZpZXcuZ2V0VWludDE2KGkgKyAyKSAvIDE2O1xuICAgICAgICBpICs9IDQ7XG4gICAgICAgIHJlc3VsdC5oZWlnaHQgPSB2aWV3LmdldFVpbnQxNihpKSArIHZpZXcuZ2V0VWludDE2KGkgKyAyKSAvIDE2O1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSxcbiAgICAgIHRyYWY6IGZ1bmN0aW9uIHRyYWYoZGF0YSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGJveGVzOiBpbnNwZWN0TXA0KGRhdGEpXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgdHJhazogZnVuY3Rpb24gdHJhayhkYXRhKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgYm94ZXM6IGluc3BlY3RNcDQoZGF0YSlcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICB0cmV4OiBmdW5jdGlvbiB0cmV4KGRhdGEpIHtcbiAgICAgICAgdmFyIHZpZXcgPSBuZXcgRGF0YVZpZXcoZGF0YS5idWZmZXIsIGRhdGEuYnl0ZU9mZnNldCwgZGF0YS5ieXRlTGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2ZXJzaW9uOiBkYXRhWzBdLFxuICAgICAgICAgIGZsYWdzOiBuZXcgVWludDhBcnJheShkYXRhLnN1YmFycmF5KDEsIDQpKSxcbiAgICAgICAgICB0cmFja0lkOiB2aWV3LmdldFVpbnQzMig0KSxcbiAgICAgICAgICBkZWZhdWx0U2FtcGxlRGVzY3JpcHRpb25JbmRleDogdmlldy5nZXRVaW50MzIoOCksXG4gICAgICAgICAgZGVmYXVsdFNhbXBsZUR1cmF0aW9uOiB2aWV3LmdldFVpbnQzMigxMiksXG4gICAgICAgICAgZGVmYXVsdFNhbXBsZVNpemU6IHZpZXcuZ2V0VWludDMyKDE2KSxcbiAgICAgICAgICBzYW1wbGVEZXBlbmRzT246IGRhdGFbMjBdICYgMHgwMyxcbiAgICAgICAgICBzYW1wbGVJc0RlcGVuZGVkT246IChkYXRhWzIxXSAmIDB4YzApID4+IDYsXG4gICAgICAgICAgc2FtcGxlSGFzUmVkdW5kYW5jeTogKGRhdGFbMjFdICYgMHgzMCkgPj4gNCxcbiAgICAgICAgICBzYW1wbGVQYWRkaW5nVmFsdWU6IChkYXRhWzIxXSAmIDB4MGUpID4+IDEsXG4gICAgICAgICAgc2FtcGxlSXNEaWZmZXJlbmNlU2FtcGxlOiAhIShkYXRhWzIxXSAmIDB4MDEpLFxuICAgICAgICAgIHNhbXBsZURlZ3JhZGF0aW9uUHJpb3JpdHk6IHZpZXcuZ2V0VWludDE2KDIyKVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHRydW46IGZ1bmN0aW9uIHRydW4oZGF0YSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge1xuICAgICAgICAgIHZlcnNpb246IGRhdGFbMF0sXG4gICAgICAgICAgZmxhZ3M6IG5ldyBVaW50OEFycmF5KGRhdGEuc3ViYXJyYXkoMSwgNCkpLFxuICAgICAgICAgIHNhbXBsZXM6IFtdXG4gICAgICAgIH0sXG4gICAgICAgICAgICB2aWV3ID0gbmV3IERhdGFWaWV3KGRhdGEuYnVmZmVyLCBkYXRhLmJ5dGVPZmZzZXQsIGRhdGEuYnl0ZUxlbmd0aCksXG4gICAgICAgICAgICAvLyBGbGFnIGludGVycHJldGF0aW9uXG4gICAgICAgIGRhdGFPZmZzZXRQcmVzZW50ID0gcmVzdWx0LmZsYWdzWzJdICYgMHgwMSxcbiAgICAgICAgICAgIC8vIGNvbXBhcmUgd2l0aCAybmQgYnl0ZSBvZiAweDFcbiAgICAgICAgZmlyc3RTYW1wbGVGbGFnc1ByZXNlbnQgPSByZXN1bHQuZmxhZ3NbMl0gJiAweDA0LFxuICAgICAgICAgICAgLy8gY29tcGFyZSB3aXRoIDJuZCBieXRlIG9mIDB4NFxuICAgICAgICBzYW1wbGVEdXJhdGlvblByZXNlbnQgPSByZXN1bHQuZmxhZ3NbMV0gJiAweDAxLFxuICAgICAgICAgICAgLy8gY29tcGFyZSB3aXRoIDJuZCBieXRlIG9mIDB4MTAwXG4gICAgICAgIHNhbXBsZVNpemVQcmVzZW50ID0gcmVzdWx0LmZsYWdzWzFdICYgMHgwMixcbiAgICAgICAgICAgIC8vIGNvbXBhcmUgd2l0aCAybmQgYnl0ZSBvZiAweDIwMFxuICAgICAgICBzYW1wbGVGbGFnc1ByZXNlbnQgPSByZXN1bHQuZmxhZ3NbMV0gJiAweDA0LFxuICAgICAgICAgICAgLy8gY29tcGFyZSB3aXRoIDJuZCBieXRlIG9mIDB4NDAwXG4gICAgICAgIHNhbXBsZUNvbXBvc2l0aW9uVGltZU9mZnNldFByZXNlbnQgPSByZXN1bHQuZmxhZ3NbMV0gJiAweDA4LFxuICAgICAgICAgICAgLy8gY29tcGFyZSB3aXRoIDJuZCBieXRlIG9mIDB4ODAwXG4gICAgICAgIHNhbXBsZUNvdW50ID0gdmlldy5nZXRVaW50MzIoNCksXG4gICAgICAgICAgICBvZmZzZXQgPSA4LFxuICAgICAgICAgICAgc2FtcGxlO1xuXG4gICAgICAgIGlmIChkYXRhT2Zmc2V0UHJlc2VudCkge1xuICAgICAgICAgIC8vIDMyIGJpdCBzaWduZWQgaW50ZWdlclxuICAgICAgICAgIHJlc3VsdC5kYXRhT2Zmc2V0ID0gdmlldy5nZXRJbnQzMihvZmZzZXQpO1xuICAgICAgICAgIG9mZnNldCArPSA0O1xuICAgICAgICB9IC8vIE92ZXJyaWRlcyB0aGUgZmxhZ3MgZm9yIHRoZSBmaXJzdCBzYW1wbGUgb25seS4gVGhlIG9yZGVyIG9mXG4gICAgICAgIC8vIG9wdGlvbmFsIHZhbHVlcyB3aWxsIGJlOiBkdXJhdGlvbiwgc2l6ZSwgY29tcG9zaXRpb25UaW1lT2Zmc2V0XG5cblxuICAgICAgICBpZiAoZmlyc3RTYW1wbGVGbGFnc1ByZXNlbnQgJiYgc2FtcGxlQ291bnQpIHtcbiAgICAgICAgICBzYW1wbGUgPSB7XG4gICAgICAgICAgICBmbGFnczogcGFyc2VTYW1wbGVGbGFncyhkYXRhLnN1YmFycmF5KG9mZnNldCwgb2Zmc2V0ICsgNCkpXG4gICAgICAgICAgfTtcbiAgICAgICAgICBvZmZzZXQgKz0gNDtcblxuICAgICAgICAgIGlmIChzYW1wbGVEdXJhdGlvblByZXNlbnQpIHtcbiAgICAgICAgICAgIHNhbXBsZS5kdXJhdGlvbiA9IHZpZXcuZ2V0VWludDMyKG9mZnNldCk7XG4gICAgICAgICAgICBvZmZzZXQgKz0gNDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2FtcGxlU2l6ZVByZXNlbnQpIHtcbiAgICAgICAgICAgIHNhbXBsZS5zaXplID0gdmlldy5nZXRVaW50MzIob2Zmc2V0KTtcbiAgICAgICAgICAgIG9mZnNldCArPSA0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzYW1wbGVDb21wb3NpdGlvblRpbWVPZmZzZXRQcmVzZW50KSB7XG4gICAgICAgICAgICAvLyBOb3RlOiB0aGlzIHNob3VsZCBiZSBhIHNpZ25lZCBpbnQgaWYgdmVyc2lvbiBpcyAxXG4gICAgICAgICAgICBzYW1wbGUuY29tcG9zaXRpb25UaW1lT2Zmc2V0ID0gdmlldy5nZXRVaW50MzIob2Zmc2V0KTtcbiAgICAgICAgICAgIG9mZnNldCArPSA0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlc3VsdC5zYW1wbGVzLnB1c2goc2FtcGxlKTtcbiAgICAgICAgICBzYW1wbGVDb3VudC0tO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKHNhbXBsZUNvdW50LS0pIHtcbiAgICAgICAgICBzYW1wbGUgPSB7fTtcblxuICAgICAgICAgIGlmIChzYW1wbGVEdXJhdGlvblByZXNlbnQpIHtcbiAgICAgICAgICAgIHNhbXBsZS5kdXJhdGlvbiA9IHZpZXcuZ2V0VWludDMyKG9mZnNldCk7XG4gICAgICAgICAgICBvZmZzZXQgKz0gNDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2FtcGxlU2l6ZVByZXNlbnQpIHtcbiAgICAgICAgICAgIHNhbXBsZS5zaXplID0gdmlldy5nZXRVaW50MzIob2Zmc2V0KTtcbiAgICAgICAgICAgIG9mZnNldCArPSA0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzYW1wbGVGbGFnc1ByZXNlbnQpIHtcbiAgICAgICAgICAgIHNhbXBsZS5mbGFncyA9IHBhcnNlU2FtcGxlRmxhZ3MoZGF0YS5zdWJhcnJheShvZmZzZXQsIG9mZnNldCArIDQpKTtcbiAgICAgICAgICAgIG9mZnNldCArPSA0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzYW1wbGVDb21wb3NpdGlvblRpbWVPZmZzZXRQcmVzZW50KSB7XG4gICAgICAgICAgICAvLyBOb3RlOiB0aGlzIHNob3VsZCBiZSBhIHNpZ25lZCBpbnQgaWYgdmVyc2lvbiBpcyAxXG4gICAgICAgICAgICBzYW1wbGUuY29tcG9zaXRpb25UaW1lT2Zmc2V0ID0gdmlldy5nZXRVaW50MzIob2Zmc2V0KTtcbiAgICAgICAgICAgIG9mZnNldCArPSA0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlc3VsdC5zYW1wbGVzLnB1c2goc2FtcGxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9LFxuICAgICAgJ3VybCAnOiBmdW5jdGlvbiB1cmwoZGF0YSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZlcnNpb246IGRhdGFbMF0sXG4gICAgICAgICAgZmxhZ3M6IG5ldyBVaW50OEFycmF5KGRhdGEuc3ViYXJyYXkoMSwgNCkpXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgdm1oZDogZnVuY3Rpb24gdm1oZChkYXRhKSB7XG4gICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGRhdGEuYnVmZmVyLCBkYXRhLmJ5dGVPZmZzZXQsIGRhdGEuYnl0ZUxlbmd0aCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmVyc2lvbjogZGF0YVswXSxcbiAgICAgICAgICBmbGFnczogbmV3IFVpbnQ4QXJyYXkoZGF0YS5zdWJhcnJheSgxLCA0KSksXG4gICAgICAgICAgZ3JhcGhpY3Ntb2RlOiB2aWV3LmdldFVpbnQxNig0KSxcbiAgICAgICAgICBvcGNvbG9yOiBuZXcgVWludDE2QXJyYXkoW3ZpZXcuZ2V0VWludDE2KDYpLCB2aWV3LmdldFVpbnQxNig4KSwgdmlldy5nZXRVaW50MTYoMTApXSlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBhIGphdmFzY3JpcHQgYXJyYXkgb2YgYm94IG9iamVjdHMgcGFyc2VkIGZyb20gYW4gSVNPIGJhc2VcbiAgICAgKiBtZWRpYSBmaWxlLlxuICAgICAqIEBwYXJhbSBkYXRhIHtVaW50OEFycmF5fSB0aGUgYmluYXJ5IGRhdGEgb2YgdGhlIG1lZGlhIHRvIGJlIGluc3BlY3RlZFxuICAgICAqIEByZXR1cm4ge2FycmF5fSBhIGphdmFzY3JpcHQgYXJyYXkgb2YgcG90ZW50aWFsbHkgbmVzdGVkIGJveCBvYmplY3RzXG4gICAgICovXG5cblxuICAgIGluc3BlY3RNcDQgPSBmdW5jdGlvbiBpbnNwZWN0TXA0KGRhdGEpIHtcbiAgICAgIHZhciBpID0gMCxcbiAgICAgICAgICByZXN1bHQgPSBbXSxcbiAgICAgICAgICB2aWV3LFxuICAgICAgICAgIHNpemUsXG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICBlbmQsXG4gICAgICAgICAgYm94OyAvLyBDb252ZXJ0IGRhdGEgZnJvbSBVaW50OEFycmF5IHRvIEFycmF5QnVmZmVyLCB0byBmb2xsb3cgRGF0YXZpZXcgQVBJXG5cbiAgICAgIHZhciBhYiA9IG5ldyBBcnJheUJ1ZmZlcihkYXRhLmxlbmd0aCk7XG4gICAgICB2YXIgdiA9IG5ldyBVaW50OEFycmF5KGFiKTtcblxuICAgICAgZm9yICh2YXIgeiA9IDA7IHogPCBkYXRhLmxlbmd0aDsgKyt6KSB7XG4gICAgICAgIHZbel0gPSBkYXRhW3pdO1xuICAgICAgfVxuXG4gICAgICB2aWV3ID0gbmV3IERhdGFWaWV3KGFiKTtcblxuICAgICAgd2hpbGUgKGkgPCBkYXRhLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgLy8gcGFyc2UgYm94IGRhdGFcbiAgICAgICAgc2l6ZSA9IHZpZXcuZ2V0VWludDMyKGkpO1xuICAgICAgICB0eXBlID0gcGFyc2VUeXBlJDIoZGF0YS5zdWJhcnJheShpICsgNCwgaSArIDgpKTtcbiAgICAgICAgZW5kID0gc2l6ZSA+IDEgPyBpICsgc2l6ZSA6IGRhdGEuYnl0ZUxlbmd0aDsgLy8gcGFyc2UgdHlwZS1zcGVjaWZpYyBkYXRhXG5cbiAgICAgICAgYm94ID0gKHBhcnNlJCQxW3R5cGVdIHx8IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgICB9O1xuICAgICAgICB9KShkYXRhLnN1YmFycmF5KGkgKyA4LCBlbmQpKTtcblxuICAgICAgICBib3guc2l6ZSA9IHNpemU7XG4gICAgICAgIGJveC50eXBlID0gdHlwZTsgLy8gc3RvcmUgdGhpcyBib3ggYW5kIG1vdmUgdG8gdGhlIG5leHRcblxuICAgICAgICByZXN1bHQucHVzaChib3gpO1xuICAgICAgICBpID0gZW5kO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHRleHR1YWwgcmVwcmVzZW50YXRpb24gb2YgdGhlIGphdmFzY3JpcHQgcmVwcmVzdGVudGF0aW9uXG4gICAgICogb2YgYW4gTVA0IGZpbGUuIFlvdSBjYW4gdXNlIGl0IGFzIGFuIGFsdGVybmF0aXZlIHRvXG4gICAgICogSlNPTi5zdHJpbmdpZnkoKSB0byBjb21wYXJlIGluc3BlY3RlZCBNUDRzLlxuICAgICAqIEBwYXJhbSBpbnNwZWN0ZWRNcDQge2FycmF5fSB0aGUgcGFyc2VkIGFycmF5IG9mIGJveGVzIGluIGFuIE1QNFxuICAgICAqIGZpbGVcbiAgICAgKiBAcGFyYW0gZGVwdGgge251bWJlcn0gKG9wdGlvbmFsKSB0aGUgbnVtYmVyIG9mIGFuY2VzdG9yIGJveGVzIG9mXG4gICAgICogdGhlIGVsZW1lbnRzIG9mIGluc3BlY3RlZE1wNC4gQXNzdW1lZCB0byBiZSB6ZXJvIGlmIHVuc3BlY2lmaWVkLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gYSB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwYXJzZWQgTVA0XG4gICAgICovXG5cblxuICAgIF90ZXh0aWZ5TXAgPSBmdW5jdGlvbiB0ZXh0aWZ5TXA0KGluc3BlY3RlZE1wNCwgZGVwdGgpIHtcbiAgICAgIHZhciBpbmRlbnQ7XG4gICAgICBkZXB0aCA9IGRlcHRoIHx8IDA7XG4gICAgICBpbmRlbnQgPSBuZXcgQXJyYXkoZGVwdGggKiAyICsgMSkuam9pbignICcpOyAvLyBpdGVyYXRlIG92ZXIgYWxsIHRoZSBib3hlc1xuXG4gICAgICByZXR1cm4gaW5zcGVjdGVkTXA0Lm1hcChmdW5jdGlvbiAoYm94LCBpbmRleCkge1xuICAgICAgICAvLyBsaXN0IHRoZSBib3ggdHlwZSBmaXJzdCBhdCB0aGUgY3VycmVudCBpbmRlbnRhdGlvbiBsZXZlbFxuICAgICAgICByZXR1cm4gaW5kZW50ICsgYm94LnR5cGUgKyAnXFxuJyArIC8vIHRoZSB0eXBlIGlzIGFscmVhZHkgaW5jbHVkZWQgYW5kIGhhbmRsZSBjaGlsZCBib3hlcyBzZXBhcmF0ZWx5XG4gICAgICAgIE9iamVjdC5rZXlzKGJveCkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICByZXR1cm4ga2V5ICE9PSAndHlwZScgJiYga2V5ICE9PSAnYm94ZXMnOyAvLyBvdXRwdXQgYWxsIHRoZSBib3ggcHJvcGVydGllc1xuICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgIHZhciBwcmVmaXggPSBpbmRlbnQgKyAnICAnICsga2V5ICsgJzogJyxcbiAgICAgICAgICAgICAgdmFsdWUgPSBib3hba2V5XTsgLy8gcHJpbnQgb3V0IHJhdyBieXRlcyBhcyBoZXhhZGVtaWNhbFxuXG4gICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSB8fCB2YWx1ZSBpbnN0YW5jZW9mIFVpbnQzMkFycmF5KSB7XG4gICAgICAgICAgICB2YXIgYnl0ZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChuZXcgVWludDhBcnJheSh2YWx1ZS5idWZmZXIsIHZhbHVlLmJ5dGVPZmZzZXQsIHZhbHVlLmJ5dGVMZW5ndGgpKS5tYXAoZnVuY3Rpb24gKGJ5dGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICcgJyArICgnMDAnICsgYnl0ZS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbiAgICAgICAgICAgIH0pLmpvaW4oJycpLm1hdGNoKC8uezEsMjR9L2cpO1xuXG4gICAgICAgICAgICBpZiAoIWJ5dGVzKSB7XG4gICAgICAgICAgICAgIHJldHVybiBwcmVmaXggKyAnPD4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYnl0ZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgIHJldHVybiBwcmVmaXggKyAnPCcgKyBieXRlcy5qb2luKCcnKS5zbGljZSgxKSArICc+JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHByZWZpeCArICc8XFxuJyArIGJ5dGVzLm1hcChmdW5jdGlvbiAobGluZSkge1xuICAgICAgICAgICAgICByZXR1cm4gaW5kZW50ICsgJyAgJyArIGxpbmU7XG4gICAgICAgICAgICB9KS5qb2luKCdcXG4nKSArICdcXG4nICsgaW5kZW50ICsgJyAgPic7XG4gICAgICAgICAgfSAvLyBzdHJpbmdpZnkgZ2VuZXJpYyBvYmplY3RzXG5cblxuICAgICAgICAgIHJldHVybiBwcmVmaXggKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgbnVsbCwgMikuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbiAobGluZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICByZXR1cm4gbGluZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGluZGVudCArICcgICcgKyBsaW5lO1xuICAgICAgICAgIH0pLmpvaW4oJ1xcbicpO1xuICAgICAgICB9KS5qb2luKCdcXG4nKSArICggLy8gcmVjdXJzaXZlbHkgdGV4dGlmeSB0aGUgY2hpbGQgYm94ZXNcbiAgICAgICAgYm94LmJveGVzID8gJ1xcbicgKyBfdGV4dGlmeU1wKGJveC5ib3hlcywgZGVwdGggKyAxKSA6ICcnKTtcbiAgICAgIH0pLmpvaW4oJ1xcbicpO1xuICAgIH07XG5cbiAgICB2YXIgbXA0SW5zcGVjdG9yID0ge1xuICAgICAgaW5zcGVjdDogaW5zcGVjdE1wNCxcbiAgICAgIHRleHRpZnk6IF90ZXh0aWZ5TXAsXG4gICAgICBwYXJzZVRmZHQ6IHBhcnNlJCQxLnRmZHQsXG4gICAgICBwYXJzZUhkbHI6IHBhcnNlJCQxLmhkbHIsXG4gICAgICBwYXJzZVRmaGQ6IHBhcnNlJCQxLnRmaGQsXG4gICAgICBwYXJzZVRydW46IHBhcnNlJCQxLnRydW4sXG4gICAgICBwYXJzZVNpZHg6IHBhcnNlJCQxLnNpZHhcbiAgICB9O1xuICAgIHZhciBkaXNjYXJkRW11bGF0aW9uUHJldmVudGlvbkJ5dGVzJDEgPSBjYXB0aW9uUGFja2V0UGFyc2VyLmRpc2NhcmRFbXVsYXRpb25QcmV2ZW50aW9uQnl0ZXM7XG4gICAgdmFyIENhcHRpb25TdHJlYW0kMSA9IGNhcHRpb25TdHJlYW0uQ2FwdGlvblN0cmVhbTtcbiAgICAvKipcbiAgICAgICogTWFwcyBhbiBvZmZzZXQgaW4gdGhlIG1kYXQgdG8gYSBzYW1wbGUgYmFzZWQgb24gdGhlIHRoZSBzaXplIG9mIHRoZSBzYW1wbGVzLlxuICAgICAgKiBBc3N1bWVzIHRoYXQgYHBhcnNlU2FtcGxlc2AgaGFzIGJlZW4gY2FsbGVkIGZpcnN0LlxuICAgICAgKlxuICAgICAgKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldCBpbnRvIHRoZSBtZGF0XG4gICAgICAqIEBwYXJhbSB7T2JqZWN0W119IHNhbXBsZXMgLSBBbiBhcnJheSBvZiBzYW1wbGVzLCBwYXJzZWQgdXNpbmcgYHBhcnNlU2FtcGxlc2BcbiAgICAgICogQHJldHVybiB7P09iamVjdH0gVGhlIG1hdGNoaW5nIHNhbXBsZSwgb3IgbnVsbCBpZiBubyBtYXRjaCB3YXMgZm91bmQuXG4gICAgICAqXG4gICAgICAqIEBzZWUgSVNPLUJNRkYtMTIvMjAxNSwgU2VjdGlvbiA4LjguOFxuICAgICAqKi9cblxuICAgIHZhciBtYXBUb1NhbXBsZSA9IGZ1bmN0aW9uIG1hcFRvU2FtcGxlKG9mZnNldCwgc2FtcGxlcykge1xuICAgICAgdmFyIGFwcHJveGltYXRlT2Zmc2V0ID0gb2Zmc2V0O1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNhbXBsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHNhbXBsZSA9IHNhbXBsZXNbaV07XG5cbiAgICAgICAgaWYgKGFwcHJveGltYXRlT2Zmc2V0IDwgc2FtcGxlLnNpemUpIHtcbiAgICAgICAgICByZXR1cm4gc2FtcGxlO1xuICAgICAgICB9XG5cbiAgICAgICAgYXBwcm94aW1hdGVPZmZzZXQgLT0gc2FtcGxlLnNpemU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICAqIEZpbmRzIFNFSSBuYWwgdW5pdHMgY29udGFpbmVkIGluIGEgTWVkaWEgRGF0YSBCb3guXG4gICAgICAqIEFzc3VtZXMgdGhhdCBgcGFyc2VTYW1wbGVzYCBoYXMgYmVlbiBjYWxsZWQgZmlyc3QuXG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7VWludDhBcnJheX0gYXZjU3RyZWFtIC0gVGhlIGJ5dGVzIG9mIHRoZSBtZGF0XG4gICAgICAqIEBwYXJhbSB7T2JqZWN0W119IHNhbXBsZXMgLSBUaGUgc2FtcGxlcyBwYXJzZWQgb3V0IGJ5IGBwYXJzZVNhbXBsZXNgXG4gICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0cmFja0lkIC0gVGhlIHRyYWNrSWQgb2YgdGhpcyB2aWRlbyB0cmFja1xuICAgICAgKiBAcmV0dXJuIHtPYmplY3RbXX0gc2VpTmFscyAtIHRoZSBwYXJzZWQgU0VJIE5BTFVzIGZvdW5kLlxuICAgICAgKiAgIFRoZSBjb250ZW50cyBvZiB0aGUgc2VpTmFsIHNob3VsZCBtYXRjaCB3aGF0IGlzIGV4cGVjdGVkIGJ5XG4gICAgICAqICAgQ2FwdGlvblN0cmVhbS5wdXNoIChuYWxVbml0VHlwZSwgc2l6ZSwgZGF0YSwgZXNjYXBlZFJCU1AsIHB0cywgZHRzKVxuICAgICAgKlxuICAgICAgKiBAc2VlIElTTy1CTUZGLTEyLzIwMTUsIFNlY3Rpb24gOC4xLjFcbiAgICAgICogQHNlZSBSZWMuIElUVS1UIEguMjY0LCA3LjMuMi4zLjFcbiAgICAgKiovXG5cblxuICAgIHZhciBmaW5kU2VpTmFscyA9IGZ1bmN0aW9uIGZpbmRTZWlOYWxzKGF2Y1N0cmVhbSwgc2FtcGxlcywgdHJhY2tJZCkge1xuICAgICAgdmFyIGF2Y1ZpZXcgPSBuZXcgRGF0YVZpZXcoYXZjU3RyZWFtLmJ1ZmZlciwgYXZjU3RyZWFtLmJ5dGVPZmZzZXQsIGF2Y1N0cmVhbS5ieXRlTGVuZ3RoKSxcbiAgICAgICAgICByZXN1bHQgPSBbXSxcbiAgICAgICAgICBzZWlOYWwsXG4gICAgICAgICAgaSxcbiAgICAgICAgICBsZW5ndGgsXG4gICAgICAgICAgbGFzdE1hdGNoZWRTYW1wbGU7XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgKyA0IDwgYXZjU3RyZWFtLmxlbmd0aDsgaSArPSBsZW5ndGgpIHtcbiAgICAgICAgbGVuZ3RoID0gYXZjVmlldy5nZXRVaW50MzIoaSk7XG4gICAgICAgIGkgKz0gNDsgLy8gQmFpbCBpZiB0aGlzIGRvZXNuJ3QgYXBwZWFyIHRvIGJlIGFuIEgyNjQgc3RyZWFtXG5cbiAgICAgICAgaWYgKGxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKGF2Y1N0cmVhbVtpXSAmIDB4MUYpIHtcbiAgICAgICAgICBjYXNlIDB4MDY6XG4gICAgICAgICAgICB2YXIgZGF0YSA9IGF2Y1N0cmVhbS5zdWJhcnJheShpICsgMSwgaSArIDEgKyBsZW5ndGgpO1xuICAgICAgICAgICAgdmFyIG1hdGNoaW5nU2FtcGxlID0gbWFwVG9TYW1wbGUoaSwgc2FtcGxlcyk7XG4gICAgICAgICAgICBzZWlOYWwgPSB7XG4gICAgICAgICAgICAgIG5hbFVuaXRUeXBlOiAnc2VpX3Jic3AnLFxuICAgICAgICAgICAgICBzaXplOiBsZW5ndGgsXG4gICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgIGVzY2FwZWRSQlNQOiBkaXNjYXJkRW11bGF0aW9uUHJldmVudGlvbkJ5dGVzJDEoZGF0YSksXG4gICAgICAgICAgICAgIHRyYWNrSWQ6IHRyYWNrSWRcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChtYXRjaGluZ1NhbXBsZSkge1xuICAgICAgICAgICAgICBzZWlOYWwucHRzID0gbWF0Y2hpbmdTYW1wbGUucHRzO1xuICAgICAgICAgICAgICBzZWlOYWwuZHRzID0gbWF0Y2hpbmdTYW1wbGUuZHRzO1xuICAgICAgICAgICAgICBsYXN0TWF0Y2hlZFNhbXBsZSA9IG1hdGNoaW5nU2FtcGxlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gSWYgYSBtYXRjaGluZyBzYW1wbGUgY2Fubm90IGJlIGZvdW5kLCB1c2UgdGhlIGxhc3RcbiAgICAgICAgICAgICAgLy8gc2FtcGxlJ3MgdmFsdWVzIGFzIHRoZXkgc2hvdWxkIGJlIGFzIGNsb3NlIGFzIHBvc3NpYmxlXG4gICAgICAgICAgICAgIHNlaU5hbC5wdHMgPSBsYXN0TWF0Y2hlZFNhbXBsZS5wdHM7XG4gICAgICAgICAgICAgIHNlaU5hbC5kdHMgPSBsYXN0TWF0Y2hlZFNhbXBsZS5kdHM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHNlaU5hbCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICAqIFBhcnNlcyBzYW1wbGUgaW5mb3JtYXRpb24gb3V0IG9mIFRyYWNrIFJ1biBCb3hlcyBhbmQgY2FsY3VsYXRlc1xuICAgICAgKiB0aGUgYWJzb2x1dGUgcHJlc2VudGF0aW9uIGFuZCBkZWNvZGUgdGltZXN0YW1wcyBvZiBlYWNoIHNhbXBsZS5cbiAgICAgICpcbiAgICAgICogQHBhcmFtIHtBcnJheTxVaW50OEFycmF5Pn0gdHJ1bnMgLSBUaGUgVHJ1biBSdW4gYm94ZXMgdG8gYmUgcGFyc2VkXG4gICAgICAqIEBwYXJhbSB7TnVtYmVyfSBiYXNlTWVkaWFEZWNvZGVUaW1lIC0gYmFzZSBtZWRpYSBkZWNvZGUgdGltZSBmcm9tIHRmZHRcbiAgICAgICAgICBAc2VlIElTTy1CTUZGLTEyLzIwMTUsIFNlY3Rpb24gOC44LjEyXG4gICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0ZmhkIC0gVGhlIHBhcnNlZCBUcmFjayBGcmFnbWVudCBIZWFkZXJcbiAgICAgICogICBAc2VlIGluc3BlY3QucGFyc2VUZmhkXG4gICAgICAqIEByZXR1cm4ge09iamVjdFtdfSB0aGUgcGFyc2VkIHNhbXBsZXNcbiAgICAgICpcbiAgICAgICogQHNlZSBJU08tQk1GRi0xMi8yMDE1LCBTZWN0aW9uIDguOC44XG4gICAgICoqL1xuXG5cbiAgICB2YXIgcGFyc2VTYW1wbGVzID0gZnVuY3Rpb24gcGFyc2VTYW1wbGVzKHRydW5zLCBiYXNlTWVkaWFEZWNvZGVUaW1lLCB0ZmhkKSB7XG4gICAgICB2YXIgY3VycmVudER0cyA9IGJhc2VNZWRpYURlY29kZVRpbWU7XG4gICAgICB2YXIgZGVmYXVsdFNhbXBsZUR1cmF0aW9uID0gdGZoZC5kZWZhdWx0U2FtcGxlRHVyYXRpb24gfHwgMDtcbiAgICAgIHZhciBkZWZhdWx0U2FtcGxlU2l6ZSA9IHRmaGQuZGVmYXVsdFNhbXBsZVNpemUgfHwgMDtcbiAgICAgIHZhciB0cmFja0lkID0gdGZoZC50cmFja0lkO1xuICAgICAgdmFyIGFsbFNhbXBsZXMgPSBbXTtcbiAgICAgIHRydW5zLmZvckVhY2goZnVuY3Rpb24gKHRydW4pIHtcbiAgICAgICAgLy8gTm90ZTogV2UgY3VycmVudGx5IGRvIG5vdCBwYXJzZSB0aGUgc2FtcGxlIHRhYmxlIGFzIHdlbGxcbiAgICAgICAgLy8gYXMgdGhlIHRydW4uIEl0J3MgcG9zc2libGUgc29tZSBzb3VyY2VzIHdpbGwgcmVxdWlyZSB0aGlzLlxuICAgICAgICAvLyBtb292ID4gdHJhayA+IG1kaWEgPiBtaW5mID4gc3RibFxuICAgICAgICB2YXIgdHJhY2tSdW4gPSBtcDRJbnNwZWN0b3IucGFyc2VUcnVuKHRydW4pO1xuICAgICAgICB2YXIgc2FtcGxlcyA9IHRyYWNrUnVuLnNhbXBsZXM7XG4gICAgICAgIHNhbXBsZXMuZm9yRWFjaChmdW5jdGlvbiAoc2FtcGxlKSB7XG4gICAgICAgICAgaWYgKHNhbXBsZS5kdXJhdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzYW1wbGUuZHVyYXRpb24gPSBkZWZhdWx0U2FtcGxlRHVyYXRpb247XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNhbXBsZS5zaXplID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNhbXBsZS5zaXplID0gZGVmYXVsdFNhbXBsZVNpemU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2FtcGxlLnRyYWNrSWQgPSB0cmFja0lkO1xuICAgICAgICAgIHNhbXBsZS5kdHMgPSBjdXJyZW50RHRzO1xuXG4gICAgICAgICAgaWYgKHNhbXBsZS5jb21wb3NpdGlvblRpbWVPZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2FtcGxlLmNvbXBvc2l0aW9uVGltZU9mZnNldCA9IDA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2FtcGxlLnB0cyA9IGN1cnJlbnREdHMgKyBzYW1wbGUuY29tcG9zaXRpb25UaW1lT2Zmc2V0O1xuICAgICAgICAgIGN1cnJlbnREdHMgKz0gc2FtcGxlLmR1cmF0aW9uO1xuICAgICAgICB9KTtcbiAgICAgICAgYWxsU2FtcGxlcyA9IGFsbFNhbXBsZXMuY29uY2F0KHNhbXBsZXMpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gYWxsU2FtcGxlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAgKiBQYXJzZXMgb3V0IGNhcHRpb24gbmFscyBmcm9tIGFuIEZNUDQgc2VnbWVudCdzIHZpZGVvIHRyYWNrcy5cbiAgICAgICpcbiAgICAgICogQHBhcmFtIHtVaW50OEFycmF5fSBzZWdtZW50IC0gVGhlIGJ5dGVzIG9mIGEgc2luZ2xlIHNlZ21lbnRcbiAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHZpZGVvVHJhY2tJZCAtIFRoZSB0cmFja0lkIG9mIGEgdmlkZW8gdHJhY2sgaW4gdGhlIHNlZ21lbnRcbiAgICAgICogQHJldHVybiB7T2JqZWN0LjxOdW1iZXIsIE9iamVjdFtdPn0gQSBtYXBwaW5nIG9mIHZpZGVvIHRyYWNrSWQgdG9cbiAgICAgICogICBhIGxpc3Qgb2Ygc2VpTmFscyBmb3VuZCBpbiB0aGF0IHRyYWNrXG4gICAgICoqL1xuXG5cbiAgICB2YXIgcGFyc2VDYXB0aW9uTmFscyA9IGZ1bmN0aW9uIHBhcnNlQ2FwdGlvbk5hbHMoc2VnbWVudCwgdmlkZW9UcmFja0lkKSB7XG4gICAgICAvLyBUbyBnZXQgdGhlIHNhbXBsZXNcbiAgICAgIHZhciB0cmFmcyA9IHByb2JlLmZpbmRCb3goc2VnbWVudCwgWydtb29mJywgJ3RyYWYnXSk7IC8vIFRvIGdldCBTRUkgTkFMIHVuaXRzXG5cbiAgICAgIHZhciBtZGF0cyA9IHByb2JlLmZpbmRCb3goc2VnbWVudCwgWydtZGF0J10pO1xuICAgICAgdmFyIGNhcHRpb25OYWxzID0ge307XG4gICAgICB2YXIgbWRhdFRyYWZQYWlycyA9IFtdOyAvLyBQYWlyIHVwIGVhY2ggdHJhZiB3aXRoIGEgbWRhdCBhcyBtb29mcyBhbmQgbWRhdHMgYXJlIGluIHBhaXJzXG5cbiAgICAgIG1kYXRzLmZvckVhY2goZnVuY3Rpb24gKG1kYXQsIGluZGV4KSB7XG4gICAgICAgIHZhciBtYXRjaGluZ1RyYWYgPSB0cmFmc1tpbmRleF07XG4gICAgICAgIG1kYXRUcmFmUGFpcnMucHVzaCh7XG4gICAgICAgICAgbWRhdDogbWRhdCxcbiAgICAgICAgICB0cmFmOiBtYXRjaGluZ1RyYWZcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIG1kYXRUcmFmUGFpcnMuZm9yRWFjaChmdW5jdGlvbiAocGFpcikge1xuICAgICAgICB2YXIgbWRhdCA9IHBhaXIubWRhdDtcbiAgICAgICAgdmFyIHRyYWYgPSBwYWlyLnRyYWY7XG4gICAgICAgIHZhciB0ZmhkID0gcHJvYmUuZmluZEJveCh0cmFmLCBbJ3RmaGQnXSk7IC8vIEV4YWN0bHkgMSB0ZmhkIHBlciB0cmFmXG5cbiAgICAgICAgdmFyIGhlYWRlckluZm8gPSBtcDRJbnNwZWN0b3IucGFyc2VUZmhkKHRmaGRbMF0pO1xuICAgICAgICB2YXIgdHJhY2tJZCA9IGhlYWRlckluZm8udHJhY2tJZDtcbiAgICAgICAgdmFyIHRmZHQgPSBwcm9iZS5maW5kQm94KHRyYWYsIFsndGZkdCddKTsgLy8gRWl0aGVyIDAgb3IgMSB0ZmR0IHBlciB0cmFmXG5cbiAgICAgICAgdmFyIGJhc2VNZWRpYURlY29kZVRpbWUgPSB0ZmR0Lmxlbmd0aCA+IDAgPyBtcDRJbnNwZWN0b3IucGFyc2VUZmR0KHRmZHRbMF0pLmJhc2VNZWRpYURlY29kZVRpbWUgOiAwO1xuICAgICAgICB2YXIgdHJ1bnMgPSBwcm9iZS5maW5kQm94KHRyYWYsIFsndHJ1biddKTtcbiAgICAgICAgdmFyIHNhbXBsZXM7XG4gICAgICAgIHZhciBzZWlOYWxzOyAvLyBPbmx5IHBhcnNlIHZpZGVvIGRhdGEgZm9yIHRoZSBjaG9zZW4gdmlkZW8gdHJhY2tcblxuICAgICAgICBpZiAodmlkZW9UcmFja0lkID09PSB0cmFja0lkICYmIHRydW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzYW1wbGVzID0gcGFyc2VTYW1wbGVzKHRydW5zLCBiYXNlTWVkaWFEZWNvZGVUaW1lLCBoZWFkZXJJbmZvKTtcbiAgICAgICAgICBzZWlOYWxzID0gZmluZFNlaU5hbHMobWRhdCwgc2FtcGxlcywgdHJhY2tJZCk7XG5cbiAgICAgICAgICBpZiAoIWNhcHRpb25OYWxzW3RyYWNrSWRdKSB7XG4gICAgICAgICAgICBjYXB0aW9uTmFsc1t0cmFja0lkXSA9IFtdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNhcHRpb25OYWxzW3RyYWNrSWRdID0gY2FwdGlvbk5hbHNbdHJhY2tJZF0uY29uY2F0KHNlaU5hbHMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjYXB0aW9uTmFscztcbiAgICB9O1xuICAgIC8qKlxuICAgICAgKiBQYXJzZXMgb3V0IGluYmFuZCBjYXB0aW9ucyBmcm9tIGFuIE1QNCBjb250YWluZXIgYW5kIHJldHVybnNcbiAgICAgICogY2FwdGlvbiBvYmplY3RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgV2ViVlRUIGFuZCB0aGUgVGV4dFRyYWNrIEFQSS5cbiAgICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvVlRUQ3VlXG4gICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1RleHRUcmFja1xuICAgICAgKiBBc3N1bWVzIHRoYXQgYHByb2JlLmdldFZpZGVvVHJhY2tJZHNgIGFuZCBgcHJvYmUudGltZXNjYWxlYCBoYXZlIGJlZW4gY2FsbGVkIGZpcnN0XG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7VWludDhBcnJheX0gc2VnbWVudCAtIFRoZSBmbXA0IHNlZ21lbnQgY29udGFpbmluZyBlbWJlZGRlZCBjYXB0aW9uc1xuICAgICAgKiBAcGFyYW0ge051bWJlcn0gdHJhY2tJZCAtIFRoZSBpZCBvZiB0aGUgdmlkZW8gdHJhY2sgdG8gcGFyc2VcbiAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVzY2FsZSAtIFRoZSB0aW1lc2NhbGUgZm9yIHRoZSB2aWRlbyB0cmFjayBmcm9tIHRoZSBpbml0IHNlZ21lbnRcbiAgICAgICpcbiAgICAgICogQHJldHVybiB7P09iamVjdFtdfSBwYXJzZWRDYXB0aW9ucyAtIEEgbGlzdCBvZiBjYXB0aW9ucyBvciBudWxsIGlmIG5vIHZpZGVvIHRyYWNrc1xuICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IHBhcnNlZENhcHRpb25zW10uc3RhcnRUaW1lIC0gVGhlIHRpbWUgdG8gc2hvdyB0aGUgY2FwdGlvbiBpbiBzZWNvbmRzXG4gICAgICAqIEByZXR1cm4ge051bWJlcn0gcGFyc2VkQ2FwdGlvbnNbXS5lbmRUaW1lIC0gVGhlIHRpbWUgdG8gc3RvcCBzaG93aW5nIHRoZSBjYXB0aW9uIGluIHNlY29uZHNcbiAgICAgICogQHJldHVybiB7U3RyaW5nfSBwYXJzZWRDYXB0aW9uc1tdLnRleHQgLSBUaGUgdmlzaWJsZSBjb250ZW50IG9mIHRoZSBjYXB0aW9uXG4gICAgICoqL1xuXG5cbiAgICB2YXIgcGFyc2VFbWJlZGRlZENhcHRpb25zID0gZnVuY3Rpb24gcGFyc2VFbWJlZGRlZENhcHRpb25zKHNlZ21lbnQsIHRyYWNrSWQsIHRpbWVzY2FsZSkge1xuICAgICAgdmFyIHNlaU5hbHM7XG5cbiAgICAgIGlmICghdHJhY2tJZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgc2VpTmFscyA9IHBhcnNlQ2FwdGlvbk5hbHMoc2VnbWVudCwgdHJhY2tJZCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzZWlOYWxzOiBzZWlOYWxzW3RyYWNrSWRdLFxuICAgICAgICB0aW1lc2NhbGU6IHRpbWVzY2FsZVxuICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAgKiBDb252ZXJ0cyBTRUkgTkFMVXMgaW50byBjYXB0aW9ucyB0aGF0IGNhbiBiZSB1c2VkIGJ5IHZpZGVvLmpzXG4gICAgICoqL1xuXG5cbiAgICB2YXIgQ2FwdGlvblBhcnNlciQkMSA9IGZ1bmN0aW9uIENhcHRpb25QYXJzZXIkJDEoKSB7XG4gICAgICB2YXIgaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgdmFyIGNhcHRpb25TdHJlYW0kJDE7IC8vIFN0b3JlcyBzZWdtZW50cyBzZWVuIGJlZm9yZSB0cmFja0lkIGFuZCB0aW1lc2NhbGUgYXJlIHNldFxuXG4gICAgICB2YXIgc2VnbWVudENhY2hlOyAvLyBTdG9yZXMgdmlkZW8gdHJhY2sgSUQgb2YgdGhlIHRyYWNrIGJlaW5nIHBhcnNlZFxuXG4gICAgICB2YXIgdHJhY2tJZDsgLy8gU3RvcmVzIHRoZSB0aW1lc2NhbGUgb2YgdGhlIHRyYWNrIGJlaW5nIHBhcnNlZFxuXG4gICAgICB2YXIgdGltZXNjYWxlOyAvLyBTdG9yZXMgY2FwdGlvbnMgcGFyc2VkIHNvIGZhclxuXG4gICAgICB2YXIgcGFyc2VkQ2FwdGlvbnM7XG4gICAgICAvKipcbiAgICAgICAgKiBBIG1ldGhvZCB0byBpbmRpY2F0ZSB3aGV0aGVyIGEgQ2FwdGlvblBhcnNlciBoYXMgYmVlbiBpbml0YWxpemVkXG4gICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICAgKiovXG5cbiAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGlzSW5pdGlhbGl6ZWQ7XG4gICAgICB9O1xuICAgICAgLyoqXG4gICAgICAgICogSW5pdGlhbGl6ZXMgdGhlIHVuZGVybHlpbmcgQ2FwdGlvblN0cmVhbSwgU0VJIE5BTCBwYXJzaW5nXG4gICAgICAgICogYW5kIG1hbmFnZW1lbnQsIGFuZCBjYXB0aW9uIGNvbGxlY3Rpb25cbiAgICAgICAqKi9cblxuXG4gICAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNhcHRpb25TdHJlYW0kJDEgPSBuZXcgQ2FwdGlvblN0cmVhbSQxKCk7XG4gICAgICAgIGlzSW5pdGlhbGl6ZWQgPSB0cnVlOyAvLyBDb2xsZWN0IGRpc3BhdGNoZWQgY2FwdGlvbnNcblxuICAgICAgICBjYXB0aW9uU3RyZWFtJCQxLm9uKCdkYXRhJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgLy8gQ29udmVydCB0byBzZWNvbmRzIGluIHRoZSBzb3VyY2UncyB0aW1lc2NhbGVcbiAgICAgICAgICBldmVudC5zdGFydFRpbWUgPSBldmVudC5zdGFydFB0cyAvIHRpbWVzY2FsZTtcbiAgICAgICAgICBldmVudC5lbmRUaW1lID0gZXZlbnQuZW5kUHRzIC8gdGltZXNjYWxlO1xuICAgICAgICAgIHBhcnNlZENhcHRpb25zLmNhcHRpb25zLnB1c2goZXZlbnQpO1xuICAgICAgICAgIHBhcnNlZENhcHRpb25zLmNhcHRpb25TdHJlYW1zW2V2ZW50LnN0cmVhbV0gPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAgKiBEZXRlcm1pbmVzIGlmIGEgbmV3IHZpZGVvIHRyYWNrIHdpbGwgYmUgc2VsZWN0ZWRcbiAgICAgICAgKiBvciBpZiB0aGUgdGltZXNjYWxlIGNoYW5nZWRcbiAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAgICoqL1xuXG5cbiAgICAgIHRoaXMuaXNOZXdJbml0ID0gZnVuY3Rpb24gKHZpZGVvVHJhY2tJZHMsIHRpbWVzY2FsZXMpIHtcbiAgICAgICAgaWYgKHZpZGVvVHJhY2tJZHMgJiYgdmlkZW9UcmFja0lkcy5sZW5ndGggPT09IDAgfHwgdGltZXNjYWxlcyAmJiB0eXBlb2YgdGltZXNjYWxlcyA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXModGltZXNjYWxlcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRyYWNrSWQgIT09IHZpZGVvVHJhY2tJZHNbMF0gfHwgdGltZXNjYWxlICE9PSB0aW1lc2NhbGVzW3RyYWNrSWRdO1xuICAgICAgfTtcbiAgICAgIC8qKlxuICAgICAgICAqIFBhcnNlcyBvdXQgU0VJIGNhcHRpb25zIGFuZCBpbnRlcmFjdHMgd2l0aCB1bmRlcmx5aW5nXG4gICAgICAgICogQ2FwdGlvblN0cmVhbSB0byByZXR1cm4gZGlzcGF0Y2hlZCBjYXB0aW9uc1xuICAgICAgICAqXG4gICAgICAgICogQHBhcmFtIHtVaW50OEFycmF5fSBzZWdtZW50IC0gVGhlIGZtcDQgc2VnbWVudCBjb250YWluaW5nIGVtYmVkZGVkIGNhcHRpb25zXG4gICAgICAgICogQHBhcmFtIHtOdW1iZXJbXX0gdmlkZW9UcmFja0lkcyAtIEEgbGlzdCBvZiB2aWRlbyB0cmFja3MgZm91bmQgaW4gdGhlIGluaXQgc2VnbWVudFxuICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxOdW1iZXIsIE51bWJlcj59IHRpbWVzY2FsZXMgLSBUaGUgdGltZXNjYWxlcyBmb3VuZCBpbiB0aGUgaW5pdCBzZWdtZW50XG4gICAgICAgICogQHNlZSBwYXJzZUVtYmVkZGVkQ2FwdGlvbnNcbiAgICAgICAgKiBAc2VlIG0ydHMvY2FwdGlvbi1zdHJlYW0uanNcbiAgICAgICAqKi9cblxuXG4gICAgICB0aGlzLnBhcnNlID0gZnVuY3Rpb24gKHNlZ21lbnQsIHZpZGVvVHJhY2tJZHMsIHRpbWVzY2FsZXMpIHtcbiAgICAgICAgdmFyIHBhcnNlZERhdGE7XG5cbiAgICAgICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQoKSkge1xuICAgICAgICAgIHJldHVybiBudWxsOyAvLyBUaGlzIGlzIG5vdCBsaWtlbHkgdG8gYmUgYSB2aWRlbyBzZWdtZW50XG4gICAgICAgIH0gZWxzZSBpZiAoIXZpZGVvVHJhY2tJZHMgfHwgIXRpbWVzY2FsZXMpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzTmV3SW5pdCh2aWRlb1RyYWNrSWRzLCB0aW1lc2NhbGVzKSkge1xuICAgICAgICAgIC8vIFVzZSB0aGUgZmlyc3QgdmlkZW8gdHJhY2sgb25seSBhcyB0aGVyZSBpcyBub1xuICAgICAgICAgIC8vIG1lY2hhbmlzbSB0byBzd2l0Y2ggdG8gb3RoZXIgdmlkZW8gdHJhY2tzXG4gICAgICAgICAgdHJhY2tJZCA9IHZpZGVvVHJhY2tJZHNbMF07XG4gICAgICAgICAgdGltZXNjYWxlID0gdGltZXNjYWxlc1t0cmFja0lkXTsgLy8gSWYgYW4gaW5pdCBzZWdtZW50IGhhcyBub3QgYmVlbiBzZWVuIHlldCwgaG9sZCBvbnRvIHNlZ21lbnRcbiAgICAgICAgICAvLyBkYXRhIHVudGlsIHdlIGhhdmUgb25lXG4gICAgICAgIH0gZWxzZSBpZiAoIXRyYWNrSWQgfHwgIXRpbWVzY2FsZSkge1xuICAgICAgICAgIHNlZ21lbnRDYWNoZS5wdXNoKHNlZ21lbnQpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IC8vIE5vdyB0aGF0IGEgdGltZXNjYWxlIGFuZCB0cmFja0lkIGlzIHNldCwgcGFyc2UgY2FjaGVkIHNlZ21lbnRzXG5cblxuICAgICAgICB3aGlsZSAoc2VnbWVudENhY2hlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2YXIgY2FjaGVkU2VnbWVudCA9IHNlZ21lbnRDYWNoZS5zaGlmdCgpO1xuICAgICAgICAgIHRoaXMucGFyc2UoY2FjaGVkU2VnbWVudCwgdmlkZW9UcmFja0lkcywgdGltZXNjYWxlcyk7XG4gICAgICAgIH1cblxuICAgICAgICBwYXJzZWREYXRhID0gcGFyc2VFbWJlZGRlZENhcHRpb25zKHNlZ21lbnQsIHRyYWNrSWQsIHRpbWVzY2FsZSk7XG5cbiAgICAgICAgaWYgKHBhcnNlZERhdGEgPT09IG51bGwgfHwgIXBhcnNlZERhdGEuc2VpTmFscykge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wdXNoTmFscyhwYXJzZWREYXRhLnNlaU5hbHMpOyAvLyBGb3JjZSB0aGUgcGFyc2VkIGNhcHRpb25zIHRvIGJlIGRpc3BhdGNoZWRcblxuICAgICAgICB0aGlzLmZsdXNoU3RyZWFtKCk7XG4gICAgICAgIHJldHVybiBwYXJzZWRDYXB0aW9ucztcbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAgKiBQdXNoZXMgU0VJIE5BTFVzIG9udG8gQ2FwdGlvblN0cmVhbVxuICAgICAgICAqIEBwYXJhbSB7T2JqZWN0W119IG5hbHMgLSBBIGxpc3Qgb2YgU0VJIG5hbHMgcGFyc2VkIHVzaW5nIGBwYXJzZUNhcHRpb25OYWxzYFxuICAgICAgICAqIEFzc3VtZXMgdGhhdCBgcGFyc2VDYXB0aW9uTmFsc2AgaGFzIGJlZW4gY2FsbGVkIGZpcnN0XG4gICAgICAgICogQHNlZSBtMnRzL2NhcHRpb24tc3RyZWFtLmpzXG4gICAgICAgICoqL1xuXG5cbiAgICAgIHRoaXMucHVzaE5hbHMgPSBmdW5jdGlvbiAobmFscykge1xuICAgICAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCgpIHx8ICFuYWxzIHx8IG5hbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBuYWxzLmZvckVhY2goZnVuY3Rpb24gKG5hbCkge1xuICAgICAgICAgIGNhcHRpb25TdHJlYW0kJDEucHVzaChuYWwpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAgKiBGbHVzaGVzIHVuZGVybHlpbmcgQ2FwdGlvblN0cmVhbSB0byBkaXNwYXRjaCBwcm9jZXNzZWQsIGRpc3BsYXlhYmxlIGNhcHRpb25zXG4gICAgICAgICogQHNlZSBtMnRzL2NhcHRpb24tc3RyZWFtLmpzXG4gICAgICAgKiovXG5cblxuICAgICAgdGhpcy5mbHVzaFN0cmVhbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQoKSkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FwdGlvblN0cmVhbSQkMS5mbHVzaCgpO1xuICAgICAgfTtcbiAgICAgIC8qKlxuICAgICAgICAqIFJlc2V0IGNhcHRpb24gYnVja2V0cyBmb3IgbmV3IGRhdGFcbiAgICAgICAqKi9cblxuXG4gICAgICB0aGlzLmNsZWFyUGFyc2VkQ2FwdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHBhcnNlZENhcHRpb25zLmNhcHRpb25zID0gW107XG4gICAgICAgIHBhcnNlZENhcHRpb25zLmNhcHRpb25TdHJlYW1zID0ge307XG4gICAgICB9O1xuICAgICAgLyoqXG4gICAgICAgICogUmVzZXRzIHVuZGVybHlpbmcgQ2FwdGlvblN0cmVhbVxuICAgICAgICAqIEBzZWUgbTJ0cy9jYXB0aW9uLXN0cmVhbS5qc1xuICAgICAgICoqL1xuXG5cbiAgICAgIHRoaXMucmVzZXRDYXB0aW9uU3RyZWFtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCgpKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjYXB0aW9uU3RyZWFtJCQxLnJlc2V0KCk7XG4gICAgICB9O1xuICAgICAgLyoqXG4gICAgICAgICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIGNsZWFyIGFsbCBjYXB0aW9ucyBmbHVzaGVkIGZyb20gdGhlXG4gICAgICAgICogQ2FwdGlvblN0cmVhbSBhbmQgc3RpbGwgYmVpbmcgcGFyc2VkXG4gICAgICAgICogQHNlZSBtMnRzL2NhcHRpb24tc3RyZWFtLmpzXG4gICAgICAgKiovXG5cblxuICAgICAgdGhpcy5jbGVhckFsbENhcHRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNsZWFyUGFyc2VkQ2FwdGlvbnMoKTtcbiAgICAgICAgdGhpcy5yZXNldENhcHRpb25TdHJlYW0oKTtcbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAgKiBSZXNldCBjYXB0aW9uIHBhcnNlclxuICAgICAgICoqL1xuXG5cbiAgICAgIHRoaXMucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlZ21lbnRDYWNoZSA9IFtdO1xuICAgICAgICB0cmFja0lkID0gbnVsbDtcbiAgICAgICAgdGltZXNjYWxlID0gbnVsbDtcblxuICAgICAgICBpZiAoIXBhcnNlZENhcHRpb25zKSB7XG4gICAgICAgICAgcGFyc2VkQ2FwdGlvbnMgPSB7XG4gICAgICAgICAgICBjYXB0aW9uczogW10sXG4gICAgICAgICAgICAvLyBDQzEsIENDMiwgQ0MzLCBDQzRcbiAgICAgICAgICAgIGNhcHRpb25TdHJlYW1zOiB7fVxuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5jbGVhclBhcnNlZENhcHRpb25zKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlc2V0Q2FwdGlvblN0cmVhbSgpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5yZXNldCgpO1xuICAgIH07XG5cbiAgICB2YXIgY2FwdGlvblBhcnNlciA9IENhcHRpb25QYXJzZXIkJDE7XG4gICAgdmFyIG1wNCA9IHtcbiAgICAgIGdlbmVyYXRvcjogbXA0R2VuZXJhdG9yLFxuICAgICAgcHJvYmU6IHByb2JlLFxuICAgICAgVHJhbnNtdXhlcjogdHJhbnNtdXhlci5UcmFuc211eGVyLFxuICAgICAgQXVkaW9TZWdtZW50U3RyZWFtOiB0cmFuc211eGVyLkF1ZGlvU2VnbWVudFN0cmVhbSxcbiAgICAgIFZpZGVvU2VnbWVudFN0cmVhbTogdHJhbnNtdXhlci5WaWRlb1NlZ21lbnRTdHJlYW0sXG4gICAgICBDYXB0aW9uUGFyc2VyOiBjYXB0aW9uUGFyc2VyXG4gICAgfTtcblxuICAgIHZhciBjbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIGNsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICAgICAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGNyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgICAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICAgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgICAgICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gICAgICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgICAgIH07XG4gICAgfSgpO1xuICAgIC8qKlxuICAgICAqIEBmaWxlIHRyYW5zbXV4ZXItd29ya2VyLmpzXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBSZS1lbWl0cyB0cmFuc211eGVyIGV2ZW50cyBieSBjb252ZXJ0aW5nIHRoZW0gaW50byBtZXNzYWdlcyB0byB0aGVcbiAgICAgKiB3b3JsZCBvdXRzaWRlIHRoZSB3b3JrZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdHJhbnNtdXhlciB0aGUgdHJhbnNtdXhlciB0byB3aXJlIGV2ZW50cyBvblxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG5cblxuICAgIHZhciB3aXJlVHJhbnNtdXhlckV2ZW50cyA9IGZ1bmN0aW9uIHdpcmVUcmFuc211eGVyRXZlbnRzKHNlbGYsIHRyYW5zbXV4ZXIpIHtcbiAgICAgIHRyYW5zbXV4ZXIub24oJ2RhdGEnLCBmdW5jdGlvbiAoc2VnbWVudCkge1xuICAgICAgICAvLyB0cmFuc2ZlciBvd25lcnNoaXAgb2YgdGhlIHVuZGVybHlpbmcgQXJyYXlCdWZmZXJcbiAgICAgICAgLy8gaW5zdGVhZCBvZiBkb2luZyBhIGNvcHkgdG8gc2F2ZSBtZW1vcnlcbiAgICAgICAgLy8gQXJyYXlCdWZmZXJzIGFyZSB0cmFuc2ZlcmFibGUgYnV0IGdlbmVyaWMgVHlwZWRBcnJheXMgYXJlIG5vdFxuICAgICAgICAvLyBAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViX1dvcmtlcnNfQVBJL1VzaW5nX3dlYl93b3JrZXJzI1Bhc3NpbmdfZGF0YV9ieV90cmFuc2ZlcnJpbmdfb3duZXJzaGlwXyh0cmFuc2ZlcmFibGVfb2JqZWN0cylcbiAgICAgICAgdmFyIGluaXRBcnJheSA9IHNlZ21lbnQuaW5pdFNlZ21lbnQ7XG4gICAgICAgIHNlZ21lbnQuaW5pdFNlZ21lbnQgPSB7XG4gICAgICAgICAgZGF0YTogaW5pdEFycmF5LmJ1ZmZlcixcbiAgICAgICAgICBieXRlT2Zmc2V0OiBpbml0QXJyYXkuYnl0ZU9mZnNldCxcbiAgICAgICAgICBieXRlTGVuZ3RoOiBpbml0QXJyYXkuYnl0ZUxlbmd0aFxuICAgICAgICB9O1xuICAgICAgICB2YXIgdHlwZWRBcnJheSA9IHNlZ21lbnQuZGF0YTtcbiAgICAgICAgc2VnbWVudC5kYXRhID0gdHlwZWRBcnJheS5idWZmZXI7XG4gICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIGFjdGlvbjogJ2RhdGEnLFxuICAgICAgICAgIHNlZ21lbnQ6IHNlZ21lbnQsXG4gICAgICAgICAgYnl0ZU9mZnNldDogdHlwZWRBcnJheS5ieXRlT2Zmc2V0LFxuICAgICAgICAgIGJ5dGVMZW5ndGg6IHR5cGVkQXJyYXkuYnl0ZUxlbmd0aFxuICAgICAgICB9LCBbc2VnbWVudC5kYXRhXSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHRyYW5zbXV4ZXIuY2FwdGlvblN0cmVhbSkge1xuICAgICAgICB0cmFuc211eGVyLmNhcHRpb25TdHJlYW0ub24oJ2RhdGEnLCBmdW5jdGlvbiAoY2FwdGlvbikge1xuICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgYWN0aW9uOiAnY2FwdGlvbicsXG4gICAgICAgICAgICBkYXRhOiBjYXB0aW9uXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB0cmFuc211eGVyLm9uKCdkb25lJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgYWN0aW9uOiAnZG9uZSdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHRyYW5zbXV4ZXIub24oJ2dvcEluZm8nLCBmdW5jdGlvbiAoZ29wSW5mbykge1xuICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICBhY3Rpb246ICdnb3BJbmZvJyxcbiAgICAgICAgICBnb3BJbmZvOiBnb3BJbmZvXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICB0cmFuc211eGVyLm9uKCd2aWRlb1NlZ21lbnRUaW1pbmdJbmZvJywgZnVuY3Rpb24gKHZpZGVvU2VnbWVudFRpbWluZ0luZm8pIHtcbiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgYWN0aW9uOiAndmlkZW9TZWdtZW50VGltaW5nSW5mbycsXG4gICAgICAgICAgdmlkZW9TZWdtZW50VGltaW5nSW5mbzogdmlkZW9TZWdtZW50VGltaW5nSW5mb1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWxsIGluY29taW5nIG1lc3NhZ2VzIHJvdXRlIHRocm91Z2ggdGhpcyBoYXNoLiBJZiBubyBmdW5jdGlvbiBleGlzdHNcbiAgICAgKiB0byBoYW5kbGUgYW4gaW5jb21pbmcgbWVzc2FnZSwgdGhlbiB3ZSBpZ25vcmUgdGhlIG1lc3NhZ2UuXG4gICAgICpcbiAgICAgKiBAY2xhc3MgTWVzc2FnZUhhbmRsZXJzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIG9wdGlvbnMgdG8gaW5pdGlhbGl6ZSB3aXRoXG4gICAgICovXG5cblxuICAgIHZhciBNZXNzYWdlSGFuZGxlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBNZXNzYWdlSGFuZGxlcnMoc2VsZiwgb3B0aW9ucykge1xuICAgICAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBNZXNzYWdlSGFuZGxlcnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICB0aGlzLnNlbGYgPSBzZWxmO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogaW5pdGlhbGl6ZSBvdXIgd2ViIHdvcmtlciBhbmQgd2lyZSBhbGwgdGhlIGV2ZW50cy5cbiAgICAgICAqL1xuXG5cbiAgICAgIGNyZWF0ZUNsYXNzKE1lc3NhZ2VIYW5kbGVycywgW3tcbiAgICAgICAga2V5OiAnaW5pdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICAgIGlmICh0aGlzLnRyYW5zbXV4ZXIpIHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNtdXhlci5kaXNwb3NlKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy50cmFuc211eGVyID0gbmV3IG1wNC5UcmFuc211eGVyKHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgd2lyZVRyYW5zbXV4ZXJFdmVudHModGhpcy5zZWxmLCB0aGlzLnRyYW5zbXV4ZXIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGRzIGRhdGEgKGEgdHMgc2VnbWVudCkgdG8gdGhlIHN0YXJ0IG9mIHRoZSB0cmFuc211eGVyIHBpcGVsaW5lIGZvclxuICAgICAgICAgKiBwcm9jZXNzaW5nLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBkYXRhIGRhdGEgdG8gcHVzaCBpbnRvIHRoZSBtdXhlclxuICAgICAgICAgKi9cblxuICAgICAgfSwge1xuICAgICAgICBrZXk6ICdwdXNoJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHB1c2goZGF0YSkge1xuICAgICAgICAgIC8vIENhc3QgYXJyYXkgYnVmZmVyIHRvIGNvcnJlY3QgdHlwZSBmb3IgdHJhbnNtdXhlclxuICAgICAgICAgIHZhciBzZWdtZW50ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5kYXRhLCBkYXRhLmJ5dGVPZmZzZXQsIGRhdGEuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgdGhpcy50cmFuc211eGVyLnB1c2goc2VnbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlY3JlYXRlIHRoZSB0cmFuc211eGVyIHNvIHRoYXQgdGhlIG5leHQgc2VnbWVudCBhZGRlZCB2aWEgYHB1c2hgXG4gICAgICAgICAqIHN0YXJ0IHdpdGggYSBmcmVzaCB0cmFuc211eGVyLlxuICAgICAgICAgKi9cblxuICAgICAgfSwge1xuICAgICAgICBrZXk6ICdyZXNldCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSB2YWx1ZSB0aGF0IHdpbGwgYmUgdXNlZCBhcyB0aGUgYGJhc2VNZWRpYURlY29kZVRpbWVgIHRpbWUgZm9yIHRoZVxuICAgICAgICAgKiBuZXh0IHNlZ21lbnQgcHVzaGVkIGluLiBTdWJzZXF1ZW50IHNlZ21lbnRzIHdpbGwgaGF2ZSB0aGVpciBgYmFzZU1lZGlhRGVjb2RlVGltZWBcbiAgICAgICAgICogc2V0IHJlbGF0aXZlIHRvIHRoZSBmaXJzdCBiYXNlZCBvbiB0aGUgUFRTIHZhbHVlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgdXNlZCB0byBzZXQgdGhlIHRpbWVzdGFtcCBvZmZzZXQgaW4gdGhlIG11eGVyXG4gICAgICAgICAqL1xuXG4gICAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldFRpbWVzdGFtcE9mZnNldCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUaW1lc3RhbXBPZmZzZXQoZGF0YSkge1xuICAgICAgICAgIHZhciB0aW1lc3RhbXBPZmZzZXQgPSBkYXRhLnRpbWVzdGFtcE9mZnNldCB8fCAwO1xuICAgICAgICAgIHRoaXMudHJhbnNtdXhlci5zZXRCYXNlTWVkaWFEZWNvZGVUaW1lKE1hdGgucm91bmQodGltZXN0YW1wT2Zmc2V0ICogOTAwMDApKTtcbiAgICAgICAgfVxuICAgICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRBdWRpb0FwcGVuZFN0YXJ0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEF1ZGlvQXBwZW5kU3RhcnQoZGF0YSkge1xuICAgICAgICAgIHRoaXMudHJhbnNtdXhlci5zZXRBdWRpb0FwcGVuZFN0YXJ0KE1hdGguY2VpbChkYXRhLmFwcGVuZFN0YXJ0ICogOTAwMDApKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogRm9yY2VzIHRoZSBwaXBlbGluZSB0byBmaW5pc2ggcHJvY2Vzc2luZyB0aGUgbGFzdCBzZWdtZW50IGFuZCBlbWl0IGl0J3NcbiAgICAgICAgICogcmVzdWx0cy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgZXZlbnQgZGF0YSwgbm90IHJlYWxseSB1c2VkXG4gICAgICAgICAqL1xuXG4gICAgICB9LCB7XG4gICAgICAgIGtleTogJ2ZsdXNoJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZsdXNoKGRhdGEpIHtcbiAgICAgICAgICB0aGlzLnRyYW5zbXV4ZXIuZmx1c2goKTtcbiAgICAgICAgfVxuICAgICAgfSwge1xuICAgICAgICBrZXk6ICdyZXNldENhcHRpb25zJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0Q2FwdGlvbnMoKSB7XG4gICAgICAgICAgdGhpcy50cmFuc211eGVyLnJlc2V0Q2FwdGlvbnMoKTtcbiAgICAgICAgfVxuICAgICAgfSwge1xuICAgICAgICBrZXk6ICdhbGlnbkdvcHNXaXRoJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFsaWduR29wc1dpdGgoZGF0YSkge1xuICAgICAgICAgIHRoaXMudHJhbnNtdXhlci5hbGlnbkdvcHNXaXRoKGRhdGEuZ29wc1RvQWxpZ25XaXRoLnNsaWNlKCkpO1xuICAgICAgICB9XG4gICAgICB9XSk7XG4gICAgICByZXR1cm4gTWVzc2FnZUhhbmRsZXJzO1xuICAgIH0oKTtcbiAgICAvKipcbiAgICAgKiBPdXIgd2ViIHdyb2tlciBpbnRlcmZhY2Ugc28gdGhhdCB0aGluZ3MgY2FuIHRhbGsgdG8gbXV4LmpzXG4gICAgICogdGhhdCB3aWxsIGJlIHJ1bm5pbmcgaW4gYSB3ZWIgd29ya2VyLiB0aGUgc2NvcGUgaXMgcGFzc2VkIHRvIHRoaXMgYnlcbiAgICAgKiB3ZWJ3b3JraWZ5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNlbGYgdGhlIHNjb3BlIGZvciB0aGUgd2ViIHdvcmtlclxuICAgICAqL1xuXG5cbiAgICB2YXIgVHJhbnNtdXhlcldvcmtlciA9IGZ1bmN0aW9uIFRyYW5zbXV4ZXJXb3JrZXIoc2VsZikge1xuICAgICAgc2VsZi5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmRhdGEuYWN0aW9uID09PSAnaW5pdCcgJiYgZXZlbnQuZGF0YS5vcHRpb25zKSB7XG4gICAgICAgICAgdGhpcy5tZXNzYWdlSGFuZGxlcnMgPSBuZXcgTWVzc2FnZUhhbmRsZXJzKHNlbGYsIGV2ZW50LmRhdGEub3B0aW9ucyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLm1lc3NhZ2VIYW5kbGVycykge1xuICAgICAgICAgIHRoaXMubWVzc2FnZUhhbmRsZXJzID0gbmV3IE1lc3NhZ2VIYW5kbGVycyhzZWxmKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC5kYXRhICYmIGV2ZW50LmRhdGEuYWN0aW9uICYmIGV2ZW50LmRhdGEuYWN0aW9uICE9PSAnaW5pdCcpIHtcbiAgICAgICAgICBpZiAodGhpcy5tZXNzYWdlSGFuZGxlcnNbZXZlbnQuZGF0YS5hY3Rpb25dKSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VIYW5kbGVyc1tldmVudC5kYXRhLmFjdGlvbl0oZXZlbnQuZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG5cbiAgICB2YXIgdHJhbnNtdXhlcldvcmtlciA9IG5ldyBUcmFuc211eGVyV29ya2VyKHNlbGYpO1xuICAgIHJldHVybiB0cmFuc211eGVyV29ya2VyO1xuICB9KCk7XG59KTtcbi8qKlxuICogQGZpbGUgLSBjb2RlY3MuanMgLSBIYW5kbGVzIHRhc2tzIHJlZ2FyZGluZyBjb2RlYyBzdHJpbmdzIHN1Y2ggYXMgdHJhbnNsYXRpbmcgdGhlbSB0b1xuICogY29kZWMgc3RyaW5ncywgb3IgdHJhbnNsYXRpbmcgY29kZWMgc3RyaW5ncyBpbnRvIG9iamVjdHMgdGhhdCBjYW4gYmUgZXhhbWluZWQuXG4gKi9cbi8vIERlZmF1bHQgY29kZWMgcGFyYW1ldGVycyBpZiBub25lIHdlcmUgcHJvdmlkZWQgZm9yIHZpZGVvIGFuZC9vciBhdWRpb1xuXG52YXIgZGVmYXVsdENvZGVjcyA9IHtcbiAgdmlkZW9Db2RlYzogJ2F2YzEnLFxuICB2aWRlb09iamVjdFR5cGVJbmRpY2F0b3I6ICcuNGQ0MDBkJyxcbiAgLy8gQUFDLUxDXG4gIGF1ZGlvUHJvZmlsZTogJzInXG59O1xuLyoqXG4gKiBSZXBsYWNlIHRoZSBvbGQgYXBwbGUtc3R5bGUgYGF2YzEuPGRkPi48ZGQ+YCBjb2RlYyBzdHJpbmcgd2l0aCB0aGUgc3RhbmRhcmRcbiAqIGBhdmMxLjxoaGhoaGg+YFxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGNvZGVjcyBhbiBhcnJheSBvZiBjb2RlYyBzdHJpbmdzIHRvIGZpeFxuICogQHJldHVybiB7QXJyYXl9IHRoZSB0cmFuc2xhdGVkIGNvZGVjIGFycmF5XG4gKiBAcHJpdmF0ZVxuICovXG5cbnZhciB0cmFuc2xhdGVMZWdhY3lDb2RlY3MgPSBmdW5jdGlvbiB0cmFuc2xhdGVMZWdhY3lDb2RlY3MoY29kZWNzKSB7XG4gIHJldHVybiBjb2RlY3MubWFwKGZ1bmN0aW9uIChjb2RlYykge1xuICAgIHJldHVybiBjb2RlYy5yZXBsYWNlKC9hdmMxXFwuKFxcZCspXFwuKFxcZCspL2ksIGZ1bmN0aW9uIChvcmlnLCBwcm9maWxlLCBhdmNMZXZlbCkge1xuICAgICAgdmFyIHByb2ZpbGVIZXggPSAoJzAwJyArIE51bWJlcihwcm9maWxlKS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbiAgICAgIHZhciBhdmNMZXZlbEhleCA9ICgnMDAnICsgTnVtYmVyKGF2Y0xldmVsKS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbiAgICAgIHJldHVybiAnYXZjMS4nICsgcHJvZmlsZUhleCArICcwMCcgKyBhdmNMZXZlbEhleDtcbiAgICB9KTtcbiAgfSk7XG59O1xuLyoqXG4gKiBQYXJzZXMgYSBjb2RlYyBzdHJpbmcgdG8gcmV0cmlldmUgdGhlIG51bWJlciBvZiBjb2RlY3Mgc3BlY2lmaWVkLFxuICogdGhlIHZpZGVvIGNvZGVjIGFuZCBvYmplY3QgdHlwZSBpbmRpY2F0b3IsIGFuZCB0aGUgYXVkaW8gcHJvZmlsZS5cbiAqL1xuXG5cbnZhciBwYXJzZUNvZGVjcyA9IGZ1bmN0aW9uIHBhcnNlQ29kZWNzKCkge1xuICB2YXIgY29kZWNzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnJztcbiAgdmFyIHJlc3VsdCA9IHtcbiAgICBjb2RlY0NvdW50OiAwXG4gIH07XG4gIHZhciBwYXJzZWQgPSB2b2lkIDA7XG4gIHJlc3VsdC5jb2RlY0NvdW50ID0gY29kZWNzLnNwbGl0KCcsJykubGVuZ3RoO1xuICByZXN1bHQuY29kZWNDb3VudCA9IHJlc3VsdC5jb2RlY0NvdW50IHx8IDI7IC8vIHBhcnNlIHRoZSB2aWRlbyBjb2RlY1xuXG4gIHBhcnNlZCA9IC8oXnxcXHN8LCkrKGF2Y1sxM10pKFteICxdKikvaS5leGVjKGNvZGVjcyk7XG5cbiAgaWYgKHBhcnNlZCkge1xuICAgIHJlc3VsdC52aWRlb0NvZGVjID0gcGFyc2VkWzJdO1xuICAgIHJlc3VsdC52aWRlb09iamVjdFR5cGVJbmRpY2F0b3IgPSBwYXJzZWRbM107XG4gIH0gLy8gcGFyc2UgdGhlIGxhc3QgZmllbGQgb2YgdGhlIGF1ZGlvIGNvZGVjXG5cblxuICByZXN1bHQuYXVkaW9Qcm9maWxlID0gLyhefFxcc3wsKSttcDRhLlswLTlBLUZhLWZdK1xcLihbMC05QS1GYS1mXSspL2kuZXhlYyhjb2RlY3MpO1xuICByZXN1bHQuYXVkaW9Qcm9maWxlID0gcmVzdWx0LmF1ZGlvUHJvZmlsZSAmJiByZXN1bHQuYXVkaW9Qcm9maWxlWzJdO1xuICByZXR1cm4gcmVzdWx0O1xufTtcbi8qKlxuICogUmVwbGFjZSBjb2RlY3MgaW4gdGhlIGNvZGVjIHN0cmluZyB3aXRoIHRoZSBvbGQgYXBwbGUtc3R5bGUgYGF2YzEuPGRkPi48ZGQ+YCB0byB0aGVcbiAqIHN0YW5kYXJkIGBhdmMxLjxoaGhoaGg+YC5cbiAqXG4gKiBAcGFyYW0gY29kZWNTdHJpbmcge1N0cmluZ30gdGhlIGNvZGVjIHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfSB0aGUgY29kZWMgc3RyaW5nIHdpdGggb2xkIGFwcGxlLXN0eWxlIGNvZGVjcyByZXBsYWNlZFxuICpcbiAqIEBwcml2YXRlXG4gKi9cblxuXG52YXIgbWFwTGVnYWN5QXZjQ29kZWNzID0gZnVuY3Rpb24gbWFwTGVnYWN5QXZjQ29kZWNzKGNvZGVjU3RyaW5nKSB7XG4gIHJldHVybiBjb2RlY1N0cmluZy5yZXBsYWNlKC9hdmMxXFwuKFxcZCspXFwuKFxcZCspL2ksIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgIHJldHVybiB0cmFuc2xhdGVMZWdhY3lDb2RlY3MoW21hdGNoXSlbMF07XG4gIH0pO1xufTtcbi8qKlxuICogQnVpbGQgYSBtZWRpYSBtaW1lLXR5cGUgc3RyaW5nIGZyb20gYSBzZXQgb2YgcGFyYW1ldGVyc1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgZWl0aGVyICdhdWRpbycgb3IgJ3ZpZGVvJ1xuICogQHBhcmFtIHtTdHJpbmd9IGNvbnRhaW5lciBlaXRoZXIgJ21wMnQnIG9yICdtcDQnXG4gKiBAcGFyYW0ge0FycmF5fSBjb2RlY3MgYW4gYXJyYXkgb2YgY29kZWMgc3RyaW5ncyB0byBhZGRcbiAqIEByZXR1cm4ge1N0cmluZ30gYSB2YWxpZCBtZWRpYSBtaW1lLXR5cGVcbiAqL1xuXG5cbnZhciBtYWtlTWltZVR5cGVTdHJpbmcgPSBmdW5jdGlvbiBtYWtlTWltZVR5cGVTdHJpbmcodHlwZSwgY29udGFpbmVyLCBjb2RlY3MpIHtcbiAgLy8gVGhlIGNvZGVjcyBhcnJheSBpcyBmaWx0ZXJlZCBzbyB0aGF0IGZhbHNleSB2YWx1ZXMgYXJlXG4gIC8vIGRyb3BwZWQgYW5kIGRvbid0IGNhdXNlIEFycmF5I2pvaW4gdG8gY3JlYXRlIHNwdXJpb3VzXG4gIC8vIGNvbW1hc1xuICByZXR1cm4gdHlwZSArICcvJyArIGNvbnRhaW5lciArICc7IGNvZGVjcz1cIicgKyBjb2RlY3MuZmlsdGVyKGZ1bmN0aW9uIChjKSB7XG4gICAgcmV0dXJuICEhYztcbiAgfSkuam9pbignLCAnKSArICdcIic7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB0eXBlIGNvbnRhaW5lciBiYXNlZCBvbiBpbmZvcm1hdGlvbiBpbiB0aGUgcGxheWxpc3RcbiAqIEBwYXJhbSB7UGxheWxpc3R9IG1lZGlhIHRoZSBjdXJyZW50IG1lZGlhIHBsYXlsaXN0XG4gKiBAcmV0dXJuIHtTdHJpbmd9IGEgdmFsaWQgbWVkaWEgY29udGFpbmVyIHR5cGVcbiAqL1xuXG5cbnZhciBnZXRDb250YWluZXJUeXBlID0gZnVuY3Rpb24gZ2V0Q29udGFpbmVyVHlwZShtZWRpYSkge1xuICAvLyBBbiBpbml0aWFsaXphdGlvbiBzZWdtZW50IG1lYW5zIHRoZSBtZWRpYSBwbGF5bGlzdCBpcyBhbiBpZnJhbWVcbiAgLy8gcGxheWxpc3Qgb3IgaXMgdXNpbmcgdGhlIG1wNCBjb250YWluZXIuIFdlIGRvbid0IGN1cnJlbnRseVxuICAvLyBzdXBwb3J0IGlmcmFtZSBwbGF5bGlzdHMsIHNvIGFzc3VtZSB0aGlzIGlzIHNpZ25hbGxpbmcgbXA0XG4gIC8vIGZyYWdtZW50cy5cbiAgaWYgKG1lZGlhLnNlZ21lbnRzICYmIG1lZGlhLnNlZ21lbnRzLmxlbmd0aCAmJiBtZWRpYS5zZWdtZW50c1swXS5tYXApIHtcbiAgICByZXR1cm4gJ21wNCc7XG4gIH1cblxuICByZXR1cm4gJ21wMnQnO1xufTtcbi8qKlxuICogUmV0dXJucyBhIHNldCBvZiBjb2RlYyBzdHJpbmdzIHBhcnNlZCBmcm9tIHRoZSBwbGF5bGlzdCBvciB0aGUgZGVmYXVsdFxuICogY29kZWMgc3RyaW5ncyBpZiBubyBjb2RlY3Mgd2VyZSBzcGVjaWZpZWQgaW4gdGhlIHBsYXlsaXN0XG4gKiBAcGFyYW0ge1BsYXlsaXN0fSBtZWRpYSB0aGUgY3VycmVudCBtZWRpYSBwbGF5bGlzdFxuICogQHJldHVybiB7T2JqZWN0fSBhbiBvYmplY3Qgd2l0aCB0aGUgdmlkZW8gYW5kIGF1ZGlvIGNvZGVjc1xuICovXG5cblxudmFyIGdldENvZGVjcyA9IGZ1bmN0aW9uIGdldENvZGVjcyhtZWRpYSkge1xuICAvLyBpZiB0aGUgY29kZWNzIHdlcmUgZXhwbGljaXRseSBzcGVjaWZpZWQsIHVzZSB0aGVtIGluc3RlYWQgb2YgdGhlXG4gIC8vIGRlZmF1bHRzXG4gIHZhciBtZWRpYUF0dHJpYnV0ZXMgPSBtZWRpYS5hdHRyaWJ1dGVzIHx8IHt9O1xuXG4gIGlmIChtZWRpYUF0dHJpYnV0ZXMuQ09ERUNTKSB7XG4gICAgcmV0dXJuIHBhcnNlQ29kZWNzKG1lZGlhQXR0cmlidXRlcy5DT0RFQ1MpO1xuICB9XG5cbiAgcmV0dXJuIGRlZmF1bHRDb2RlY3M7XG59O1xuXG52YXIgYXVkaW9Qcm9maWxlRnJvbURlZmF1bHQgPSBmdW5jdGlvbiBhdWRpb1Byb2ZpbGVGcm9tRGVmYXVsdChtYXN0ZXIsIGF1ZGlvR3JvdXBJZCkge1xuICBpZiAoIW1hc3Rlci5tZWRpYUdyb3Vwcy5BVURJTyB8fCAhYXVkaW9Hcm91cElkKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgYXVkaW9Hcm91cCA9IG1hc3Rlci5tZWRpYUdyb3Vwcy5BVURJT1thdWRpb0dyb3VwSWRdO1xuXG4gIGlmICghYXVkaW9Hcm91cCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZm9yICh2YXIgbmFtZSBpbiBhdWRpb0dyb3VwKSB7XG4gICAgdmFyIGF1ZGlvVHlwZSA9IGF1ZGlvR3JvdXBbbmFtZV07XG5cbiAgICBpZiAoYXVkaW9UeXBlLmRlZmF1bHQgJiYgYXVkaW9UeXBlLnBsYXlsaXN0cykge1xuICAgICAgLy8gY29kZWMgc2hvdWxkIGJlIHRoZSBzYW1lIGZvciBhbGwgcGxheWxpc3RzIHdpdGhpbiB0aGUgYXVkaW8gdHlwZVxuICAgICAgcmV0dXJuIHBhcnNlQ29kZWNzKGF1ZGlvVHlwZS5wbGF5bGlzdHNbMF0uYXR0cmlidXRlcy5DT0RFQ1MpLmF1ZGlvUHJvZmlsZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIE1JTUUgdHlwZSBzdHJpbmdzIGZvciBhIHdvcmtpbmcgY29uZmlndXJhdGlvbiBvZlxuICogU291cmNlQnVmZmVycyB0byBwbGF5IHZhcmlhbnQgc3RyZWFtcyBpbiBhIG1hc3RlciBwbGF5bGlzdC4gSWZcbiAqIHRoZXJlIGlzIG5vIHBvc3NpYmxlIHdvcmtpbmcgY29uZmlndXJhdGlvbiwgYW4gZW1wdHkgYXJyYXkgd2lsbCBiZVxuICogcmV0dXJuZWQuXG4gKlxuICogQHBhcmFtIG1hc3RlciB7T2JqZWN0fSB0aGUgbTN1OCBvYmplY3QgZm9yIHRoZSBtYXN0ZXIgcGxheWxpc3RcbiAqIEBwYXJhbSBtZWRpYSB7T2JqZWN0fSB0aGUgbTN1OCBvYmplY3QgZm9yIHRoZSB2YXJpYW50IHBsYXlsaXN0XG4gKiBAcmV0dXJuIHtBcnJheX0gdGhlIE1JTUUgdHlwZSBzdHJpbmdzLiBJZiB0aGUgYXJyYXkgaGFzIG1vcmUgdGhhblxuICogb25lIGVudHJ5LCB0aGUgZmlyc3QgZWxlbWVudCBzaG91bGQgYmUgYXBwbGllZCB0byB0aGUgdmlkZW9cbiAqIFNvdXJjZUJ1ZmZlciBhbmQgdGhlIHNlY29uZCB0byB0aGUgYXVkaW8gU291cmNlQnVmZmVyLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cblxuXG52YXIgbWltZVR5cGVzRm9yUGxheWxpc3QgPSBmdW5jdGlvbiBtaW1lVHlwZXNGb3JQbGF5bGlzdChtYXN0ZXIsIG1lZGlhKSB7XG4gIHZhciBjb250YWluZXJUeXBlID0gZ2V0Q29udGFpbmVyVHlwZShtZWRpYSk7XG4gIHZhciBjb2RlY0luZm8gPSBnZXRDb2RlY3MobWVkaWEpO1xuICB2YXIgbWVkaWFBdHRyaWJ1dGVzID0gbWVkaWEuYXR0cmlidXRlcyB8fCB7fTsgLy8gRGVmYXVsdCBjb25kaXRpb24gZm9yIGEgdHJhZGl0aW9uYWwgSExTIChubyBkZW11eGVkIGF1ZGlvL3ZpZGVvKVxuXG4gIHZhciBpc011eGVkID0gdHJ1ZTtcbiAgdmFyIGlzTWFhdCA9IGZhbHNlO1xuXG4gIGlmICghbWVkaWEpIHtcbiAgICAvLyBOb3QgZW5vdWdoIGluZm9ybWF0aW9uXG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgaWYgKG1hc3Rlci5tZWRpYUdyb3Vwcy5BVURJTyAmJiBtZWRpYUF0dHJpYnV0ZXMuQVVESU8pIHtcbiAgICB2YXIgYXVkaW9Hcm91cCA9IG1hc3Rlci5tZWRpYUdyb3Vwcy5BVURJT1ttZWRpYUF0dHJpYnV0ZXMuQVVESU9dOyAvLyBIYW5kbGUgdGhlIGNhc2Ugd2hlcmUgd2UgYXJlIGluIGEgbXVsdGlwbGUtYXVkaW8gdHJhY2sgc2NlbmFyaW9cblxuICAgIGlmIChhdWRpb0dyb3VwKSB7XG4gICAgICBpc01hYXQgPSB0cnVlOyAvLyBTdGFydCB3aXRoIHRoZSBldmVyeXRoaW5nIGRlbXV4ZWQgdGhlbi4uLlxuXG4gICAgICBpc011eGVkID0gZmFsc2U7IC8vIC4uLmNoZWNrIHRvIHNlZSBpZiBhbnkgYXVkaW8gZ3JvdXAgdHJhY2tzIGFyZSBtdXhlZCAoaWUuIGxhY2tpbmcgYSB1cmkpXG5cbiAgICAgIGZvciAodmFyIGdyb3VwSWQgaW4gYXVkaW9Hcm91cCkge1xuICAgICAgICAvLyBlaXRoZXIgYSB1cmkgaXMgcHJlc2VudCAoaWYgdGhlIGNhc2Ugb2YgSExTIGFuZCBhbiBleHRlcm5hbCBwbGF5bGlzdCksIG9yXG4gICAgICAgIC8vIHBsYXlsaXN0cyBpcyBwcmVzZW50IChpbiB0aGUgY2FzZSBvZiBEQVNIIHdoZXJlIHdlIGRvbid0IGhhdmUgZXh0ZXJuYWwgYXVkaW9cbiAgICAgICAgLy8gcGxheWxpc3RzKVxuICAgICAgICBpZiAoIWF1ZGlvR3JvdXBbZ3JvdXBJZF0udXJpICYmICFhdWRpb0dyb3VwW2dyb3VwSWRdLnBsYXlsaXN0cykge1xuICAgICAgICAgIGlzTXV4ZWQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IC8vIEhMUyB3aXRoIG11bHRpcGxlLWF1ZGlvIHRyYWNrcyBtdXN0IGFsd2F5cyBnZXQgYW4gYXVkaW8gY29kZWMuXG4gIC8vIFB1dCBhbm90aGVyIHdheSwgdGhlcmUgaXMgbm8gd2F5IHRvIGhhdmUgYSB2aWRlby1vbmx5IG11bHRpcGxlLWF1ZGlvIEhMUyFcblxuXG4gIGlmIChpc01hYXQgJiYgIWNvZGVjSW5mby5hdWRpb1Byb2ZpbGUpIHtcbiAgICBpZiAoIWlzTXV4ZWQpIHtcbiAgICAgIC8vIEl0IGlzIHBvc3NpYmxlIGZvciBjb2RlY3MgdG8gYmUgc3BlY2lmaWVkIG9uIHRoZSBhdWRpbyBtZWRpYSBncm91cCBwbGF5bGlzdCBidXRcbiAgICAgIC8vIG5vdCBvbiB0aGUgcmVuZGl0aW9uIHBsYXlsaXN0LiBUaGlzIGlzIG1vc3RseSB0aGUgY2FzZSBmb3IgREFTSCwgd2hlcmUgYXVkaW8gYW5kXG4gICAgICAvLyB2aWRlbyBhcmUgYWx3YXlzIHNlcGFyYXRlIChhbmQgc2VwYXJhdGVseSBzcGVjaWZpZWQpLlxuICAgICAgY29kZWNJbmZvLmF1ZGlvUHJvZmlsZSA9IGF1ZGlvUHJvZmlsZUZyb21EZWZhdWx0KG1hc3RlciwgbWVkaWFBdHRyaWJ1dGVzLkFVRElPKTtcbiAgICB9XG5cbiAgICBpZiAoIWNvZGVjSW5mby5hdWRpb1Byb2ZpbGUpIHtcbiAgICAgIHZpZGVvanMkMS5sb2cud2FybignTXVsdGlwbGUgYXVkaW8gdHJhY2tzIHByZXNlbnQgYnV0IG5vIGF1ZGlvIGNvZGVjIHN0cmluZyBpcyBzcGVjaWZpZWQuICcgKyAnQXR0ZW1wdGluZyB0byB1c2UgdGhlIGRlZmF1bHQgYXVkaW8gY29kZWMgKG1wNGEuNDAuMiknKTtcbiAgICAgIGNvZGVjSW5mby5hdWRpb1Byb2ZpbGUgPSBkZWZhdWx0Q29kZWNzLmF1ZGlvUHJvZmlsZTtcbiAgICB9XG4gIH0gLy8gR2VuZXJhdGUgdGhlIGZpbmFsIGNvZGVjIHN0cmluZ3MgZnJvbSB0aGUgY29kZWMgb2JqZWN0IGdlbmVyYXRlZCBhYm92ZVxuXG5cbiAgdmFyIGNvZGVjU3RyaW5ncyA9IHt9O1xuXG4gIGlmIChjb2RlY0luZm8udmlkZW9Db2RlYykge1xuICAgIGNvZGVjU3RyaW5ncy52aWRlbyA9ICcnICsgY29kZWNJbmZvLnZpZGVvQ29kZWMgKyBjb2RlY0luZm8udmlkZW9PYmplY3RUeXBlSW5kaWNhdG9yO1xuICB9XG5cbiAgaWYgKGNvZGVjSW5mby5hdWRpb1Byb2ZpbGUpIHtcbiAgICBjb2RlY1N0cmluZ3MuYXVkaW8gPSAnbXA0YS40MC4nICsgY29kZWNJbmZvLmF1ZGlvUHJvZmlsZTtcbiAgfSAvLyBGaW5hbGx5LCBtYWtlIGFuZCByZXR1cm4gYW4gYXJyYXkgd2l0aCBwcm9wZXIgbWltZS10eXBlcyBkZXBlbmRpbmcgb25cbiAgLy8gdGhlIGNvbmZpZ3VyYXRpb25cblxuXG4gIHZhciBqdXN0QXVkaW8gPSBtYWtlTWltZVR5cGVTdHJpbmcoJ2F1ZGlvJywgY29udGFpbmVyVHlwZSwgW2NvZGVjU3RyaW5ncy5hdWRpb10pO1xuICB2YXIganVzdFZpZGVvID0gbWFrZU1pbWVUeXBlU3RyaW5nKCd2aWRlbycsIGNvbnRhaW5lclR5cGUsIFtjb2RlY1N0cmluZ3MudmlkZW9dKTtcbiAgdmFyIGJvdGhWaWRlb0F1ZGlvID0gbWFrZU1pbWVUeXBlU3RyaW5nKCd2aWRlbycsIGNvbnRhaW5lclR5cGUsIFtjb2RlY1N0cmluZ3MudmlkZW8sIGNvZGVjU3RyaW5ncy5hdWRpb10pO1xuXG4gIGlmIChpc01hYXQpIHtcbiAgICBpZiAoIWlzTXV4ZWQgJiYgY29kZWNTdHJpbmdzLnZpZGVvKSB7XG4gICAgICByZXR1cm4gW2p1c3RWaWRlbywganVzdEF1ZGlvXTtcbiAgICB9XG5cbiAgICBpZiAoIWlzTXV4ZWQgJiYgIWNvZGVjU3RyaW5ncy52aWRlbykge1xuICAgICAgLy8gVGhlcmUgaXMgbm8gbXV4ZWQgY29udGVudCBhbmQgbm8gdmlkZW8gY29kZWMgc3RyaW5nLCBzbyB0aGlzIGlzIGFuIGF1ZGlvIG9ubHlcbiAgICAgIC8vIHN0cmVhbSB3aXRoIGFsdGVybmF0ZSBhdWRpby5cbiAgICAgIHJldHVybiBbanVzdEF1ZGlvLCBqdXN0QXVkaW9dO1xuICAgIH0gLy8gVGhlcmUgZXhpc3RzIHRoZSBwb3NzaWJsaXR5IHRoYXQgdGhpcyB3aWxsIHJldHVybiBhIGB2aWRlby9jb250YWluZXJgXG4gICAgLy8gbWltZS10eXBlIGZvciB0aGUgZmlyc3QgZW50cnkgaW4gdGhlIGFycmF5IGV2ZW4gd2hlbiB0aGVyZSBpcyBvbmx5IGF1ZGlvLlxuICAgIC8vIFRoaXMgZG9lc24ndCBhcHBlYXIgdG8gYmUgYSBwcm9ibGVtIGFuZCBzaW1wbGlmaWVzIHRoZSBjb2RlLlxuXG5cbiAgICByZXR1cm4gW2JvdGhWaWRlb0F1ZGlvLCBqdXN0QXVkaW9dO1xuICB9IC8vIElmIHRoZXJlIGlzIG5vIHZpZGVvIGNvZGVjIGF0IGFsbCwgYWx3YXlzIGp1c3QgcmV0dXJuIGEgc2luZ2xlXG4gIC8vIGF1ZGlvLzxjb250YWluZXI+IG1pbWUtdHlwZVxuXG5cbiAgaWYgKCFjb2RlY1N0cmluZ3MudmlkZW8pIHtcbiAgICByZXR1cm4gW2p1c3RBdWRpb107XG4gIH0gLy8gV2hlbiBub3QgdXNpbmcgc2VwYXJhdGUgYXVkaW8gbWVkaWEgZ3JvdXBzLCBhdWRpbyBhbmQgdmlkZW8gaXNcbiAgLy8gKmFsd2F5cyogbXV4ZWRcblxuXG4gIHJldHVybiBbYm90aFZpZGVvQXVkaW9dO1xufTtcbi8qKlxuICogUGFyc2UgYSBjb250ZW50IHR5cGUgaGVhZGVyIGludG8gYSB0eXBlIGFuZCBwYXJhbWV0ZXJzXG4gKiBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSB0aGUgY29udGVudCB0eXBlIGhlYWRlclxuICogQHJldHVybiB7T2JqZWN0fSB0aGUgcGFyc2VkIGNvbnRlbnQtdHlwZVxuICogQHByaXZhdGVcbiAqL1xuXG5cbnZhciBwYXJzZUNvbnRlbnRUeXBlID0gZnVuY3Rpb24gcGFyc2VDb250ZW50VHlwZSh0eXBlKSB7XG4gIHZhciBvYmplY3QgPSB7XG4gICAgdHlwZTogJycsXG4gICAgcGFyYW1ldGVyczoge31cbiAgfTtcbiAgdmFyIHBhcmFtZXRlcnMgPSB0eXBlLnRyaW0oKS5zcGxpdCgnOycpOyAvLyBmaXJzdCBwYXJhbWV0ZXIgc2hvdWxkIGFsd2F5cyBiZSBjb250ZW50LXR5cGVcblxuICBvYmplY3QudHlwZSA9IHBhcmFtZXRlcnMuc2hpZnQoKS50cmltKCk7XG4gIHBhcmFtZXRlcnMuZm9yRWFjaChmdW5jdGlvbiAocGFyYW1ldGVyKSB7XG4gICAgdmFyIHBhaXIgPSBwYXJhbWV0ZXIudHJpbSgpLnNwbGl0KCc9Jyk7XG5cbiAgICBpZiAocGFpci5sZW5ndGggPiAxKSB7XG4gICAgICB2YXIgbmFtZSA9IHBhaXJbMF0ucmVwbGFjZSgvXCIvZywgJycpLnRyaW0oKTtcbiAgICAgIHZhciB2YWx1ZSA9IHBhaXJbMV0ucmVwbGFjZSgvXCIvZywgJycpLnRyaW0oKTtcbiAgICAgIG9iamVjdC5wYXJhbWV0ZXJzW25hbWVdID0gdmFsdWU7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIG9iamVjdDtcbn07XG4vKipcbiAqIENoZWNrIGlmIGEgY29kZWMgc3RyaW5nIHJlZmVycyB0byBhbiBhdWRpbyBjb2RlYy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY29kZWMgY29kZWMgc3RyaW5nIHRvIGNoZWNrXG4gKiBAcmV0dXJuIHtCb29sZWFufSBpZiB0aGlzIGlzIGFuIGF1ZGlvIGNvZGVjXG4gKiBAcHJpdmF0ZVxuICovXG5cblxudmFyIGlzQXVkaW9Db2RlYyA9IGZ1bmN0aW9uIGlzQXVkaW9Db2RlYyhjb2RlYykge1xuICByZXR1cm4gL21wNGFcXC5cXGQrLlxcZCsvaS50ZXN0KGNvZGVjKTtcbn07XG4vKipcbiAqIENoZWNrIGlmIGEgY29kZWMgc3RyaW5nIHJlZmVycyB0byBhIHZpZGVvIGNvZGVjLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBjb2RlYyBjb2RlYyBzdHJpbmcgdG8gY2hlY2tcbiAqIEByZXR1cm4ge0Jvb2xlYW59IGlmIHRoaXMgaXMgYSB2aWRlbyBjb2RlY1xuICogQHByaXZhdGVcbiAqL1xuXG5cbnZhciBpc1ZpZGVvQ29kZWMgPSBmdW5jdGlvbiBpc1ZpZGVvQ29kZWMoY29kZWMpIHtcbiAgcmV0dXJuIC9hdmMxXFwuW1xcZGEtZl0rL2kudGVzdChjb2RlYyk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIGEgbGlzdCBvZiBnb3BzIGluIHRoZSBidWZmZXIgdGhhdCBoYXZlIGEgcHRzIHZhbHVlIG9mIDMgc2Vjb25kcyBvciBtb3JlIGluXG4gKiBmcm9udCBvZiBjdXJyZW50IHRpbWUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYnVmZmVyXG4gKiAgICAgICAgVGhlIGN1cnJlbnQgYnVmZmVyIG9mIGdvcCBpbmZvcm1hdGlvblxuICogQHBhcmFtIHtOdW1iZXJ9IGN1cnJlbnRUaW1lXG4gKiAgICAgICAgVGhlIGN1cnJlbnQgdGltZVxuICogQHBhcmFtIHtEb3VibGV9IG1hcHBpbmdcbiAqICAgICAgICBPZmZzZXQgdG8gbWFwIGRpc3BsYXkgdGltZSB0byBzdHJlYW0gcHJlc2VudGF0aW9uIHRpbWVcbiAqIEByZXR1cm4ge0FycmF5fVxuICogICAgICAgICBMaXN0IG9mIGdvcHMgY29uc2lkZXJlZCBzYWZlIHRvIGFwcGVuZCBvdmVyXG4gKi9cblxuXG52YXIgZ29wc1NhZmVUb0FsaWduV2l0aCA9IGZ1bmN0aW9uIGdvcHNTYWZlVG9BbGlnbldpdGgoYnVmZmVyLCBjdXJyZW50VGltZSwgbWFwcGluZykge1xuICBpZiAodHlwZW9mIGN1cnJlbnRUaW1lID09PSAndW5kZWZpbmVkJyB8fCBjdXJyZW50VGltZSA9PT0gbnVsbCB8fCAhYnVmZmVyLmxlbmd0aCkge1xuICAgIHJldHVybiBbXTtcbiAgfSAvLyBwdHMgdmFsdWUgZm9yIGN1cnJlbnQgdGltZSArIDMgc2Vjb25kcyB0byBnaXZlIGEgYml0IG1vcmUgd2lnZ2xlIHJvb21cblxuXG4gIHZhciBjdXJyZW50VGltZVB0cyA9IE1hdGguY2VpbCgoY3VycmVudFRpbWUgLSBtYXBwaW5nICsgMykgKiA5MDAwMCk7XG4gIHZhciBpID0gdm9pZCAwO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoYnVmZmVyW2ldLnB0cyA+IGN1cnJlbnRUaW1lUHRzKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnVmZmVyLnNsaWNlKGkpO1xufTtcbi8qKlxuICogQXBwZW5kcyBnb3AgaW5mb3JtYXRpb24gKHRpbWluZyBhbmQgYnl0ZUxlbmd0aCkgcmVjZWl2ZWQgYnkgdGhlIHRyYW5zbXV4ZXIgZm9yIHRoZVxuICogZ29wcyBhcHBlbmRlZCBpbiB0aGUgbGFzdCBjYWxsIHRvIGFwcGVuZEJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGJ1ZmZlclxuICogICAgICAgIFRoZSBjdXJyZW50IGJ1ZmZlciBvZiBnb3AgaW5mb3JtYXRpb25cbiAqIEBwYXJhbSB7QXJyYXl9IGdvcHNcbiAqICAgICAgICBMaXN0IG9mIG5ldyBnb3AgaW5mb3JtYXRpb25cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVwbGFjZVxuICogICAgICAgIElmIHRydWUsIHJlcGxhY2UgdGhlIGJ1ZmZlciB3aXRoIHRoZSBuZXcgZ29wIGluZm9ybWF0aW9uLiBJZiBmYWxzZSwgYXBwZW5kIHRoZVxuICogICAgICAgIG5ldyBnb3AgaW5mb3JtYXRpb24gdG8gdGhlIGJ1ZmZlciBpbiB0aGUgcmlnaHQgbG9jYXRpb24gb2YgdGltZS5cbiAqIEByZXR1cm4ge0FycmF5fVxuICogICAgICAgICBVcGRhdGVkIGxpc3Qgb2YgZ29wIGluZm9ybWF0aW9uXG4gKi9cblxuXG52YXIgdXBkYXRlR29wQnVmZmVyID0gZnVuY3Rpb24gdXBkYXRlR29wQnVmZmVyKGJ1ZmZlciwgZ29wcywgcmVwbGFjZSkge1xuICBpZiAoIWdvcHMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxuXG4gIGlmIChyZXBsYWNlKSB7XG4gICAgLy8gSWYgd2UgYXJlIGluIHNhZmUgYXBwZW5kIG1vZGUsIHRoZW4gY29tcGxldGVseSBvdmVyd3JpdGUgdGhlIGdvcCBidWZmZXJcbiAgICAvLyB3aXRoIHRoZSBtb3N0IHJlY2VudCBhcHBlbmVkZWQgZGF0YS4gVGhpcyB3aWxsIG1ha2Ugc3VyZSB0aGF0IHdoZW4gYXBwZW5kaW5nXG4gICAgLy8gZnV0dXJlIHNlZ21lbnRzLCB3ZSBvbmx5IHRyeSB0byBhbGlnbiB3aXRoIGdvcHMgdGhhdCBhcmUgYm90aCBhaGVhZCBvZiBjdXJyZW50XG4gICAgLy8gdGltZSBhbmQgaW4gdGhlIGxhc3Qgc2VnbWVudCBhcHBlbmRlZC5cbiAgICByZXR1cm4gZ29wcy5zbGljZSgpO1xuICB9XG5cbiAgdmFyIHN0YXJ0ID0gZ29wc1swXS5wdHM7XG4gIHZhciBpID0gMDtcblxuICBmb3IgKGk7IGkgPCBidWZmZXIubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoYnVmZmVyW2ldLnB0cyA+PSBzdGFydCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ1ZmZlci5zbGljZSgwLCBpKS5jb25jYXQoZ29wcyk7XG59O1xuLyoqXG4gKiBSZW1vdmVzIGdvcCBpbmZvcm1hdGlvbiBpbiBidWZmZXIgdGhhdCBvdmVybGFwcyB3aXRoIHByb3ZpZGVkIHN0YXJ0IGFuZCBlbmRcbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBidWZmZXJcbiAqICAgICAgICBUaGUgY3VycmVudCBidWZmZXIgb2YgZ29wIGluZm9ybWF0aW9uXG4gKiBAcGFyYW0ge0RvdWJsZX0gc3RhcnRcbiAqICAgICAgICBwb3NpdGlvbiB0byBzdGFydCB0aGUgcmVtb3ZlIGF0XG4gKiBAcGFyYW0ge0RvdWJsZX0gZW5kXG4gKiAgICAgICAgcG9zaXRpb24gdG8gZW5kIHRoZSByZW1vdmUgYXRcbiAqIEBwYXJhbSB7RG91YmxlfSBtYXBwaW5nXG4gKiAgICAgICAgT2Zmc2V0IHRvIG1hcCBkaXNwbGF5IHRpbWUgdG8gc3RyZWFtIHByZXNlbnRhdGlvbiB0aW1lXG4gKi9cblxuXG52YXIgcmVtb3ZlR29wQnVmZmVyID0gZnVuY3Rpb24gcmVtb3ZlR29wQnVmZmVyKGJ1ZmZlciwgc3RhcnQsIGVuZCwgbWFwcGluZykge1xuICB2YXIgc3RhcnRQdHMgPSBNYXRoLmNlaWwoKHN0YXJ0IC0gbWFwcGluZykgKiA5MDAwMCk7XG4gIHZhciBlbmRQdHMgPSBNYXRoLmNlaWwoKGVuZCAtIG1hcHBpbmcpICogOTAwMDApO1xuICB2YXIgdXBkYXRlZEJ1ZmZlciA9IGJ1ZmZlci5zbGljZSgpO1xuICB2YXIgaSA9IGJ1ZmZlci5sZW5ndGg7XG5cbiAgd2hpbGUgKGktLSkge1xuICAgIGlmIChidWZmZXJbaV0ucHRzIDw9IGVuZFB0cykge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKGkgPT09IC0xKSB7XG4gICAgLy8gbm8gcmVtb3ZhbCBiZWNhdXNlIGVuZCBvZiByZW1vdmUgcmFuZ2UgaXMgYmVmb3JlIHN0YXJ0IG9mIGJ1ZmZlclxuICAgIHJldHVybiB1cGRhdGVkQnVmZmVyO1xuICB9XG5cbiAgdmFyIGogPSBpICsgMTtcblxuICB3aGlsZSAoai0tKSB7XG4gICAgaWYgKGJ1ZmZlcltqXS5wdHMgPD0gc3RhcnRQdHMpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSAvLyBjbGFtcCByZW1vdmUgcmFuZ2Ugc3RhcnQgdG8gMCBpbmRleFxuXG5cbiAgaiA9IE1hdGgubWF4KGosIDApO1xuICB1cGRhdGVkQnVmZmVyLnNwbGljZShqLCBpIC0gaiArIDEpO1xuICByZXR1cm4gdXBkYXRlZEJ1ZmZlcjtcbn07XG5cbnZhciBidWZmZXJlZCA9IGZ1bmN0aW9uIGJ1ZmZlcmVkKHZpZGVvQnVmZmVyLCBhdWRpb0J1ZmZlciwgYXVkaW9EaXNhYmxlZCkge1xuICB2YXIgc3RhcnQgPSBudWxsO1xuICB2YXIgZW5kID0gbnVsbDtcbiAgdmFyIGFyaXR5ID0gMDtcbiAgdmFyIGV4dGVudHMgPSBbXTtcbiAgdmFyIHJhbmdlcyA9IFtdOyAvLyBuZWl0aGVyIGJ1ZmZlciBoYXMgYmVlbiBjcmVhdGVkIHlldFxuXG4gIGlmICghdmlkZW9CdWZmZXIgJiYgIWF1ZGlvQnVmZmVyKSB7XG4gICAgcmV0dXJuIHZpZGVvanMkMS5jcmVhdGVUaW1lUmFuZ2UoKTtcbiAgfSAvLyBvbmx5IG9uZSBidWZmZXIgaXMgY29uZmlndXJlZFxuXG5cbiAgaWYgKCF2aWRlb0J1ZmZlcikge1xuICAgIHJldHVybiBhdWRpb0J1ZmZlci5idWZmZXJlZDtcbiAgfVxuXG4gIGlmICghYXVkaW9CdWZmZXIpIHtcbiAgICByZXR1cm4gdmlkZW9CdWZmZXIuYnVmZmVyZWQ7XG4gIH0gLy8gYm90aCBidWZmZXJzIGFyZSBjb25maWd1cmVkXG5cblxuICBpZiAoYXVkaW9EaXNhYmxlZCkge1xuICAgIHJldHVybiB2aWRlb0J1ZmZlci5idWZmZXJlZDtcbiAgfSAvLyBib3RoIGJ1ZmZlcnMgYXJlIGVtcHR5XG5cblxuICBpZiAodmlkZW9CdWZmZXIuYnVmZmVyZWQubGVuZ3RoID09PSAwICYmIGF1ZGlvQnVmZmVyLmJ1ZmZlcmVkLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB2aWRlb2pzJDEuY3JlYXRlVGltZVJhbmdlKCk7XG4gIH0gLy8gSGFuZGxlIHRoZSBjYXNlIHdoZXJlIHdlIGhhdmUgYm90aCBidWZmZXJzIGFuZCBjcmVhdGUgYW5cbiAgLy8gaW50ZXJzZWN0aW9uIG9mIHRoZSB0d29cblxuXG4gIHZhciB2aWRlb0J1ZmZlcmVkID0gdmlkZW9CdWZmZXIuYnVmZmVyZWQ7XG4gIHZhciBhdWRpb0J1ZmZlcmVkID0gYXVkaW9CdWZmZXIuYnVmZmVyZWQ7XG4gIHZhciBjb3VudCA9IHZpZGVvQnVmZmVyZWQubGVuZ3RoOyAvLyBBKSBHYXRoZXIgdXAgYWxsIHN0YXJ0IGFuZCBlbmQgdGltZXNcblxuICB3aGlsZSAoY291bnQtLSkge1xuICAgIGV4dGVudHMucHVzaCh7XG4gICAgICB0aW1lOiB2aWRlb0J1ZmZlcmVkLnN0YXJ0KGNvdW50KSxcbiAgICAgIHR5cGU6ICdzdGFydCdcbiAgICB9KTtcbiAgICBleHRlbnRzLnB1c2goe1xuICAgICAgdGltZTogdmlkZW9CdWZmZXJlZC5lbmQoY291bnQpLFxuICAgICAgdHlwZTogJ2VuZCdcbiAgICB9KTtcbiAgfVxuXG4gIGNvdW50ID0gYXVkaW9CdWZmZXJlZC5sZW5ndGg7XG5cbiAgd2hpbGUgKGNvdW50LS0pIHtcbiAgICBleHRlbnRzLnB1c2goe1xuICAgICAgdGltZTogYXVkaW9CdWZmZXJlZC5zdGFydChjb3VudCksXG4gICAgICB0eXBlOiAnc3RhcnQnXG4gICAgfSk7XG4gICAgZXh0ZW50cy5wdXNoKHtcbiAgICAgIHRpbWU6IGF1ZGlvQnVmZmVyZWQuZW5kKGNvdW50KSxcbiAgICAgIHR5cGU6ICdlbmQnXG4gICAgfSk7XG4gIH0gLy8gQikgU29ydCB0aGVtIGJ5IHRpbWVcblxuXG4gIGV4dGVudHMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBhLnRpbWUgLSBiLnRpbWU7XG4gIH0pOyAvLyBDKSBHbyBhbG9uZyBvbmUgYnkgb25lIGluY3JlbWVudGluZyBhcml0eSBmb3Igc3RhcnQgYW5kIGRlY3JlbWVudGluZ1xuICAvLyAgICBhcml0eSBmb3IgZW5kc1xuXG4gIGZvciAoY291bnQgPSAwOyBjb3VudCA8IGV4dGVudHMubGVuZ3RoOyBjb3VudCsrKSB7XG4gICAgaWYgKGV4dGVudHNbY291bnRdLnR5cGUgPT09ICdzdGFydCcpIHtcbiAgICAgIGFyaXR5Kys7IC8vIEQpIElmIGFyaXR5IGlzIGV2ZXIgaW5jcmVtZW50ZWQgdG8gMiB3ZSBhcmUgZW50ZXJpbmcgYW5cbiAgICAgIC8vICAgIG92ZXJsYXBwaW5nIHJhbmdlXG5cbiAgICAgIGlmIChhcml0eSA9PT0gMikge1xuICAgICAgICBzdGFydCA9IGV4dGVudHNbY291bnRdLnRpbWU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChleHRlbnRzW2NvdW50XS50eXBlID09PSAnZW5kJykge1xuICAgICAgYXJpdHktLTsgLy8gRSkgSWYgYXJpdHkgaXMgZXZlciBkZWNyZW1lbnRlZCB0byAxIHdlIGxlYXZpbmcgYW5cbiAgICAgIC8vICAgIG92ZXJsYXBwaW5nIHJhbmdlXG5cbiAgICAgIGlmIChhcml0eSA9PT0gMSkge1xuICAgICAgICBlbmQgPSBleHRlbnRzW2NvdW50XS50aW1lO1xuICAgICAgfVxuICAgIH0gLy8gRikgUmVjb3JkIG92ZXJsYXBwaW5nIHJhbmdlc1xuXG5cbiAgICBpZiAoc3RhcnQgIT09IG51bGwgJiYgZW5kICE9PSBudWxsKSB7XG4gICAgICByYW5nZXMucHVzaChbc3RhcnQsIGVuZF0pO1xuICAgICAgc3RhcnQgPSBudWxsO1xuICAgICAgZW5kID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdmlkZW9qcyQxLmNyZWF0ZVRpbWVSYW5nZXMocmFuZ2VzKTtcbn07XG4vKipcbiAqIEBmaWxlIHZpcnR1YWwtc291cmNlLWJ1ZmZlci5qc1xuICovXG5cblxudmFyIE9ORV9TRUNPTkRfSU5fVFMgPSA5MDAwMDsgLy8gV2UgY3JlYXRlIGEgd3JhcHBlciBhcm91bmQgdGhlIFNvdXJjZUJ1ZmZlciBzbyB0aGF0IHdlIGNhbiBtYW5hZ2UgdGhlXG4vLyBzdGF0ZSBvZiB0aGUgYHVwZGF0aW5nYCBwcm9wZXJ0eSBtYW51YWxseS4gV2UgaGF2ZSB0byBkbyB0aGlzIGJlY2F1c2Vcbi8vIEZpcmVmb3ggY2hhbmdlcyBgdXBkYXRpbmdgIHRvIGZhbHNlIGxvbmcgYmVmb3JlIHRyaWdnZXJpbmcgYHVwZGF0ZWVuZGBcbi8vIGV2ZW50cyBhbmQgdGhhdCB3YXMgY2F1c2luZyBzdHJhbmdlIHByb2JsZW1zIGluIHZpZGVvanMtY29udHJpYi1obHNcblxudmFyIG1ha2VXcmFwcGVkU291cmNlQnVmZmVyID0gZnVuY3Rpb24gbWFrZVdyYXBwZWRTb3VyY2VCdWZmZXIobWVkaWFTb3VyY2UsIG1pbWVUeXBlKSB7XG4gIHZhciBzb3VyY2VCdWZmZXIgPSBtZWRpYVNvdXJjZS5hZGRTb3VyY2VCdWZmZXIobWltZVR5cGUpO1xuICB2YXIgd3JhcHBlciA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHdyYXBwZXIudXBkYXRpbmcgPSBmYWxzZTtcbiAgd3JhcHBlci5yZWFsQnVmZmVyXyA9IHNvdXJjZUJ1ZmZlcjtcblxuICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChrZXkpIHtcbiAgICBpZiAodHlwZW9mIHNvdXJjZUJ1ZmZlcltrZXldID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB3cmFwcGVyW2tleV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2VCdWZmZXJba2V5XS5hcHBseShzb3VyY2VCdWZmZXIsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHdyYXBwZXJba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3cmFwcGVyLCBrZXksIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICAgICAgcmV0dXJuIHNvdXJjZUJ1ZmZlcltrZXldO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMSh2KSB7XG4gICAgICAgICAgcmV0dXJuIHNvdXJjZUJ1ZmZlcltrZXldID0gdjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGZvciAodmFyIGtleSBpbiBzb3VyY2VCdWZmZXIpIHtcbiAgICBfbG9vcChrZXkpO1xuICB9XG5cbiAgcmV0dXJuIHdyYXBwZXI7XG59O1xuLyoqXG4gKiBWaXJ0dWFsU291cmNlQnVmZmVycyBleGlzdCBzbyB0aGF0IHdlIGNhbiB0cmFuc211eCBub24gbmF0aXZlIGZvcm1hdHNcbiAqIGludG8gYSBuYXRpdmUgZm9ybWF0LCBidXQga2VlcCB0aGUgc2FtZSBhcGkgYXMgYSBuYXRpdmUgc291cmNlIGJ1ZmZlci5cbiAqIEl0IGNyZWF0ZXMgYSB0cmFuc211eGVyLCB0aGF0IHdvcmtzIGluIGl0cyBvd24gdGhyZWFkIChhIHdlYiB3b3JrZXIpIGFuZFxuICogdGhhdCB0cmFuc211eGVyIG11eGVzIHRoZSBkYXRhIGludG8gYSBuYXRpdmUgZm9ybWF0LiBWaXJ0dWFsU291cmNlQnVmZmVyIHdpbGxcbiAqIHRoZW4gc2VuZCBhbGwgb2YgdGhhdCBkYXRhIHRvIHRoZSBuYWl2ZSBzb3VyY2VidWZmZXIgc28gdGhhdCBpdCBpc1xuICogaW5kZXN0aW5ndWlzaGFibGUgZnJvbSBhIG5hdGl2ZWx5IHN1cHBvcnRlZCBmb3JtYXQuXG4gKlxuICogQHBhcmFtIHtIdG1sTWVkaWFTb3VyY2V9IG1lZGlhU291cmNlIHRoZSBwYXJlbnQgbWVkaWFTb3VyY2VcbiAqIEBwYXJhbSB7QXJyYXl9IGNvZGVjcyBhcnJheSBvZiBjb2RlY3MgdGhhdCB3ZSB3aWxsIGJlIGRlYWxpbmcgd2l0aFxuICogQGNsYXNzIFZpcnR1YWxTb3VyY2VCdWZmZXJcbiAqIEBleHRlbmRzIHZpZGVvLmpzLkV2ZW50VGFyZ2V0XG4gKi9cblxuXG52YXIgVmlydHVhbFNvdXJjZUJ1ZmZlciA9IGZ1bmN0aW9uIChfdmlkZW9qcyRFdmVudFRhcmdldCkge1xuICBpbmhlcml0cyhWaXJ0dWFsU291cmNlQnVmZmVyLCBfdmlkZW9qcyRFdmVudFRhcmdldCk7XG5cbiAgZnVuY3Rpb24gVmlydHVhbFNvdXJjZUJ1ZmZlcihtZWRpYVNvdXJjZSwgY29kZWNzKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgVmlydHVhbFNvdXJjZUJ1ZmZlcik7XG5cbiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChWaXJ0dWFsU291cmNlQnVmZmVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVmlydHVhbFNvdXJjZUJ1ZmZlcikpLmNhbGwodGhpcywgdmlkZW9qcyQxLkV2ZW50VGFyZ2V0KSk7XG5cbiAgICBfdGhpcy50aW1lc3RhbXBPZmZzZXRfID0gMDtcbiAgICBfdGhpcy5wZW5kaW5nQnVmZmVyc18gPSBbXTtcbiAgICBfdGhpcy5idWZmZXJVcGRhdGluZ18gPSBmYWxzZTtcbiAgICBfdGhpcy5tZWRpYVNvdXJjZV8gPSBtZWRpYVNvdXJjZTtcbiAgICBfdGhpcy5jb2RlY3NfID0gY29kZWNzO1xuICAgIF90aGlzLmF1ZGlvQ29kZWNfID0gbnVsbDtcbiAgICBfdGhpcy52aWRlb0NvZGVjXyA9IG51bGw7XG4gICAgX3RoaXMuYXVkaW9EaXNhYmxlZF8gPSBmYWxzZTtcbiAgICBfdGhpcy5hcHBlbmRBdWRpb0luaXRTZWdtZW50XyA9IHRydWU7XG4gICAgX3RoaXMuZ29wQnVmZmVyXyA9IFtdO1xuICAgIF90aGlzLnRpbWVNYXBwaW5nXyA9IDA7XG4gICAgX3RoaXMuc2FmZUFwcGVuZF8gPSB2aWRlb2pzJDEuYnJvd3Nlci5JRV9WRVJTSU9OID49IDExO1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgcmVtdXg6IGZhbHNlLFxuICAgICAgYWxpZ25Hb3BzQXRFbmQ6IF90aGlzLnNhZmVBcHBlbmRfXG4gICAgfTtcblxuICAgIF90aGlzLmNvZGVjc18uZm9yRWFjaChmdW5jdGlvbiAoY29kZWMpIHtcbiAgICAgIGlmIChpc0F1ZGlvQ29kZWMoY29kZWMpKSB7XG4gICAgICAgIF90aGlzLmF1ZGlvQ29kZWNfID0gY29kZWM7XG4gICAgICB9IGVsc2UgaWYgKGlzVmlkZW9Db2RlYyhjb2RlYykpIHtcbiAgICAgICAgX3RoaXMudmlkZW9Db2RlY18gPSBjb2RlYztcbiAgICAgIH1cbiAgICB9KTsgLy8gYXBwZW5kIG11eGVkIHNlZ21lbnRzIHRvIHRoZWlyIHJlc3BlY3RpdmUgbmF0aXZlIGJ1ZmZlcnMgYXNcbiAgICAvLyBzb29uIGFzIHRoZXkgYXJlIGF2YWlsYWJsZVxuXG5cbiAgICBfdGhpcy50cmFuc211eGVyXyA9IG5ldyBUcmFuc211eFdvcmtlcigpO1xuXG4gICAgX3RoaXMudHJhbnNtdXhlcl8ucG9zdE1lc3NhZ2Uoe1xuICAgICAgYWN0aW9uOiAnaW5pdCcsXG4gICAgICBvcHRpb25zOiBvcHRpb25zXG4gICAgfSk7XG5cbiAgICBfdGhpcy50cmFuc211eGVyXy5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5kYXRhLmFjdGlvbiA9PT0gJ2RhdGEnKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5kYXRhXyhldmVudCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChldmVudC5kYXRhLmFjdGlvbiA9PT0gJ2RvbmUnKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5kb25lXyhldmVudCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChldmVudC5kYXRhLmFjdGlvbiA9PT0gJ2dvcEluZm8nKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5hcHBlbmRHb3BJbmZvXyhldmVudCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChldmVudC5kYXRhLmFjdGlvbiA9PT0gJ3ZpZGVvU2VnbWVudFRpbWluZ0luZm8nKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy52aWRlb1NlZ21lbnRUaW1pbmdJbmZvXyhldmVudC5kYXRhLnZpZGVvU2VnbWVudFRpbWluZ0luZm8pO1xuICAgICAgfVxuICAgIH07IC8vIHRoaXMgdGltZXN0YW1wT2Zmc2V0IGlzIGEgcHJvcGVydHkgd2l0aCB0aGUgc2lkZS1lZmZlY3Qgb2YgcmVzZXR0aW5nXG4gICAgLy8gYmFzZU1lZGlhRGVjb2RlVGltZSBpbiB0aGUgdHJhbnNtdXhlciBvbiB0aGUgc2V0dGVyXG5cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ3RpbWVzdGFtcE9mZnNldCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXBPZmZzZXRfO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0JCQxKHZhbCkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicgJiYgdmFsID49IDApIHtcbiAgICAgICAgICB0aGlzLnRpbWVzdGFtcE9mZnNldF8gPSB2YWw7XG4gICAgICAgICAgdGhpcy5hcHBlbmRBdWRpb0luaXRTZWdtZW50XyA9IHRydWU7IC8vIHJlc2V0IGdvcCBidWZmZXIgb24gdGltZXN0YW1wb2Zmc2V0IGFzIHRoaXMgc2lnbmFscyBhIGNoYW5nZSBpbiB0aW1lbGluZVxuXG4gICAgICAgICAgdGhpcy5nb3BCdWZmZXJfLmxlbmd0aCA9IDA7XG4gICAgICAgICAgdGhpcy50aW1lTWFwcGluZ18gPSAwOyAvLyBXZSBoYXZlIHRvIHRlbGwgdGhlIHRyYW5zbXV4ZXIgdG8gc2V0IHRoZSBiYXNlTWVkaWFEZWNvZGVUaW1lIHRvXG4gICAgICAgICAgLy8gdGhlIGRlc2lyZWQgdGltZXN0YW1wT2Zmc2V0IGZvciB0aGUgbmV4dCBzZWdtZW50XG5cbiAgICAgICAgICB0aGlzLnRyYW5zbXV4ZXJfLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIGFjdGlvbjogJ3NldFRpbWVzdGFtcE9mZnNldCcsXG4gICAgICAgICAgICB0aW1lc3RhbXBPZmZzZXQ6IHZhbFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7IC8vIHNldHRpbmcgdGhlIGFwcGVuZCB3aW5kb3cgYWZmZWN0cyBib3RoIHNvdXJjZSBidWZmZXJzXG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX3RoaXMsICdhcHBlbmRXaW5kb3dTdGFydCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMudmlkZW9CdWZmZXJfIHx8IHRoaXMuYXVkaW9CdWZmZXJfKS5hcHBlbmRXaW5kb3dTdGFydDtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMShzdGFydCkge1xuICAgICAgICBpZiAodGhpcy52aWRlb0J1ZmZlcl8pIHtcbiAgICAgICAgICB0aGlzLnZpZGVvQnVmZmVyXy5hcHBlbmRXaW5kb3dTdGFydCA9IHN0YXJ0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuYXVkaW9CdWZmZXJfKSB7XG4gICAgICAgICAgdGhpcy5hdWRpb0J1ZmZlcl8uYXBwZW5kV2luZG93U3RhcnQgPSBzdGFydDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pOyAvLyB0aGlzIGJ1ZmZlciBpcyBcInVwZGF0aW5nXCIgaWYgZWl0aGVyIG9mIGl0cyBuYXRpdmUgYnVmZmVycyBhcmVcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ3VwZGF0aW5nJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICAgIHJldHVybiAhISh0aGlzLmJ1ZmZlclVwZGF0aW5nXyB8fCAhdGhpcy5hdWRpb0Rpc2FibGVkXyAmJiB0aGlzLmF1ZGlvQnVmZmVyXyAmJiB0aGlzLmF1ZGlvQnVmZmVyXy51cGRhdGluZyB8fCB0aGlzLnZpZGVvQnVmZmVyXyAmJiB0aGlzLnZpZGVvQnVmZmVyXy51cGRhdGluZyk7XG4gICAgICB9XG4gICAgfSk7IC8vIHRoZSBidWZmZXJlZCBwcm9wZXJ0eSBpcyB0aGUgaW50ZXJzZWN0aW9uIG9mIHRoZSBidWZmZXJlZFxuICAgIC8vIHJhbmdlcyBvZiB0aGUgbmF0aXZlIHNvdXJjZSBidWZmZXJzXG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX3RoaXMsICdidWZmZXJlZCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgICByZXR1cm4gYnVmZmVyZWQodGhpcy52aWRlb0J1ZmZlcl8sIHRoaXMuYXVkaW9CdWZmZXJfLCB0aGlzLmF1ZGlvRGlzYWJsZWRfKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFdoZW4gd2UgZ2V0IGEgZGF0YSBldmVudCBmcm9tIHRoZSB0cmFuc211eGVyXG4gICAqIHdlIGNhbGwgdGhpcyBmdW5jdGlvbiBhbmQgaGFuZGxlIHRoZSBkYXRhIHRoYXRcbiAgICogd2FzIHNlbnQgdG8gdXNcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgdGhlIGRhdGEgZXZlbnQgZnJvbSB0aGUgdHJhbnNtdXhlclxuICAgKi9cblxuXG4gIGNyZWF0ZUNsYXNzKFZpcnR1YWxTb3VyY2VCdWZmZXIsIFt7XG4gICAga2V5OiAnZGF0YV8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkYXRhXyhldmVudCkge1xuICAgICAgdmFyIHNlZ21lbnQgPSBldmVudC5kYXRhLnNlZ21lbnQ7IC8vIENhc3QgQXJyYXlCdWZmZXIgdG8gVHlwZWRBcnJheVxuXG4gICAgICBzZWdtZW50LmRhdGEgPSBuZXcgVWludDhBcnJheShzZWdtZW50LmRhdGEsIGV2ZW50LmRhdGEuYnl0ZU9mZnNldCwgZXZlbnQuZGF0YS5ieXRlTGVuZ3RoKTtcbiAgICAgIHNlZ21lbnQuaW5pdFNlZ21lbnQgPSBuZXcgVWludDhBcnJheShzZWdtZW50LmluaXRTZWdtZW50LmRhdGEsIHNlZ21lbnQuaW5pdFNlZ21lbnQuYnl0ZU9mZnNldCwgc2VnbWVudC5pbml0U2VnbWVudC5ieXRlTGVuZ3RoKTtcbiAgICAgIGNyZWF0ZVRleHRUcmFja3NJZk5lY2Vzc2FyeSh0aGlzLCB0aGlzLm1lZGlhU291cmNlXywgc2VnbWVudCk7IC8vIEFkZCB0aGUgc2VnbWVudHMgdG8gdGhlIHBlbmRpbmdCdWZmZXJzIGFycmF5XG5cbiAgICAgIHRoaXMucGVuZGluZ0J1ZmZlcnNfLnB1c2goc2VnbWVudCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZW4gd2UgZ2V0IGEgZG9uZSBldmVudCBmcm9tIHRoZSB0cmFuc211eGVyXG4gICAgICogd2UgY2FsbCB0aGlzIGZ1bmN0aW9uIGFuZCB3ZSBwcm9jZXNzIGFsbFxuICAgICAqIG9mIHRoZSBwZW5kaW5nIGRhdGEgdGhhdCB3ZSBoYXZlIGJlZW4gc2F2aW5nIGluIHRoZVxuICAgICAqIGRhdGFfIGZ1bmN0aW9uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IHRoZSBkb25lIGV2ZW50IGZyb20gdGhlIHRyYW5zbXV4ZXJcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZG9uZV8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkb25lXyhldmVudCkge1xuICAgICAgLy8gRG9uJ3QgcHJvY2VzcyBhbmQgYXBwZW5kIGRhdGEgaWYgdGhlIG1lZGlhU291cmNlIGlzIGNsb3NlZFxuICAgICAgaWYgKHRoaXMubWVkaWFTb3VyY2VfLnJlYWR5U3RhdGUgPT09ICdjbG9zZWQnKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ0J1ZmZlcnNfLmxlbmd0aCA9IDA7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gQWxsIGJ1ZmZlcnMgc2hvdWxkIGhhdmUgYmVlbiBmbHVzaGVkIGZyb20gdGhlIG11eGVyXG4gICAgICAvLyBzdGFydCBwcm9jZXNzaW5nIGFueXRoaW5nIHdlIGhhdmUgcmVjZWl2ZWRcblxuXG4gICAgICB0aGlzLnByb2Nlc3NQZW5kaW5nU2VnbWVudHNfKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAndmlkZW9TZWdtZW50VGltaW5nSW5mb18nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB2aWRlb1NlZ21lbnRUaW1pbmdJbmZvXyh0aW1pbmdJbmZvKSB7XG4gICAgICB2YXIgdGltaW5nSW5mb0luU2Vjb25kcyA9IHtcbiAgICAgICAgc3RhcnQ6IHtcbiAgICAgICAgICBkZWNvZGU6IHRpbWluZ0luZm8uc3RhcnQuZHRzIC8gT05FX1NFQ09ORF9JTl9UUyxcbiAgICAgICAgICBwcmVzZW50YXRpb246IHRpbWluZ0luZm8uc3RhcnQucHRzIC8gT05FX1NFQ09ORF9JTl9UU1xuICAgICAgICB9LFxuICAgICAgICBlbmQ6IHtcbiAgICAgICAgICBkZWNvZGU6IHRpbWluZ0luZm8uZW5kLmR0cyAvIE9ORV9TRUNPTkRfSU5fVFMsXG4gICAgICAgICAgcHJlc2VudGF0aW9uOiB0aW1pbmdJbmZvLmVuZC5wdHMgLyBPTkVfU0VDT05EX0lOX1RTXG4gICAgICAgIH0sXG4gICAgICAgIGJhc2VNZWRpYURlY29kZVRpbWU6IHRpbWluZ0luZm8uYmFzZU1lZGlhRGVjb2RlVGltZSAvIE9ORV9TRUNPTkRfSU5fVFNcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aW1pbmdJbmZvLnByZXBlbmRlZENvbnRlbnREdXJhdGlvbikge1xuICAgICAgICB0aW1pbmdJbmZvSW5TZWNvbmRzLnByZXBlbmRlZENvbnRlbnREdXJhdGlvbiA9IHRpbWluZ0luZm8ucHJlcGVuZGVkQ29udGVudER1cmF0aW9uIC8gT05FX1NFQ09ORF9JTl9UUztcbiAgICAgIH1cblxuICAgICAgdGhpcy50cmlnZ2VyKHtcbiAgICAgICAgdHlwZTogJ3ZpZGVvU2VnbWVudFRpbWluZ0luZm8nLFxuICAgICAgICB2aWRlb1NlZ21lbnRUaW1pbmdJbmZvOiB0aW1pbmdJbmZvSW5TZWNvbmRzXG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIG91ciBpbnRlcm5hbCBuYXRpdmUgYXVkaW8vdmlkZW8gc291cmNlIGJ1ZmZlcnMgYW5kIGFkZFxuICAgICAqIGV2ZW50IGhhbmRsZXJzIHRvIHRoZW0gd2l0aCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gICAgICogMS4gdGhleSBkbyBub3QgYWxyZWFkeSBleGlzdCBvbiB0aGUgbWVkaWFTb3VyY2VcbiAgICAgKiAyLiB0aGlzIFZTQiBoYXMgYSBjb2RlYyBmb3IgdGhlbVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnY3JlYXRlUmVhbFNvdXJjZUJ1ZmZlcnNfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUmVhbFNvdXJjZUJ1ZmZlcnNfKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciB0eXBlcyA9IFsnYXVkaW8nLCAndmlkZW8nXTtcbiAgICAgIHR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgLy8gRG9uJ3QgY3JlYXRlIGEgU291cmNlQnVmZmVyIG9mIHRoaXMgdHlwZSBpZiB3ZSBkb24ndCBoYXZlIGFcbiAgICAgICAgLy8gY29kZWMgZm9yIGl0XG4gICAgICAgIGlmICghX3RoaXMyW3R5cGUgKyAnQ29kZWNfJ10pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gRG8gbm90aGluZyBpZiBhIFNvdXJjZUJ1ZmZlciBvZiB0aGlzIHR5cGUgYWxyZWFkeSBleGlzdHNcblxuXG4gICAgICAgIGlmIChfdGhpczJbdHlwZSArICdCdWZmZXJfJ10pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYnVmZmVyID0gbnVsbDsgLy8gSWYgdGhlIG1lZGlhc291cmNlIGFscmVhZHkgaGFzIGEgU291cmNlQnVmZmVyIGZvciB0aGUgY29kZWNcbiAgICAgICAgLy8gdXNlIHRoYXRcblxuICAgICAgICBpZiAoX3RoaXMyLm1lZGlhU291cmNlX1t0eXBlICsgJ0J1ZmZlcl8nXSkge1xuICAgICAgICAgIGJ1ZmZlciA9IF90aGlzMi5tZWRpYVNvdXJjZV9bdHlwZSArICdCdWZmZXJfJ107IC8vIEluIG11bHRpcGxlIGF1ZGlvIHRyYWNrIGNhc2VzLCB0aGUgYXVkaW8gc291cmNlIGJ1ZmZlciBpcyBkaXNhYmxlZFxuICAgICAgICAgIC8vIG9uIHRoZSBtYWluIFZpcnR1YWxTb3VyY2VCdWZmZXIgYnkgdGhlIEhUTUxNZWRpYVNvdXJjZSBtdWNoIGVhcmxpZXJcbiAgICAgICAgICAvLyB0aGFuIGNyZWF0ZVJlYWxTb3VyY2VCdWZmZXJzXyBpcyBjYWxsZWQgdG8gY3JlYXRlIHRoZSBzZWNvbmRcbiAgICAgICAgICAvLyBWaXJ0dWFsU291cmNlQnVmZmVyIGJlY2F1c2UgdGhhdCBoYXBwZW5zIGFzIGEgc2lkZS1lZmZlY3Qgb2ZcbiAgICAgICAgICAvLyB2aWRlb2pzLWNvbnRyaWItaGxzIHN0YXJ0aW5nIHRoZSBhdWRpb1NlZ21lbnRMb2FkZXIuIEFzIGEgcmVzdWx0LFxuICAgICAgICAgIC8vIHRoZSBhdWRpb0J1ZmZlciBpcyBlc3NlbnRpYWxseSBcIm93bmVybGVzc1wiIGFuZCBubyBvbmUgd2lsbCB0b2dnbGVcbiAgICAgICAgICAvLyB0aGUgYHVwZGF0aW5nYCBzdGF0ZSBiYWNrIHRvIGZhbHNlIG9uY2UgdGhlIGB1cGRhdGVlbmRgIGV2ZW50IGlzIHJlY2VpdmVkXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBTZXR0aW5nIGB1cGRhdGluZ2AgdG8gZmFsc2UgbWFudWFsbHkgd2lsbCB3b3JrIGFyb3VuZCB0aGlzXG4gICAgICAgICAgLy8gc2l0dWF0aW9uIGFuZCBhbGxvdyB3b3JrIHRvIGNvbnRpbnVlXG5cbiAgICAgICAgICBidWZmZXIudXBkYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgY29kZWNQcm9wZXJ0eSA9IHR5cGUgKyAnQ29kZWNfJztcbiAgICAgICAgICB2YXIgbWltZVR5cGUgPSB0eXBlICsgJy9tcDQ7Y29kZWNzPVwiJyArIF90aGlzMltjb2RlY1Byb3BlcnR5XSArICdcIic7XG4gICAgICAgICAgYnVmZmVyID0gbWFrZVdyYXBwZWRTb3VyY2VCdWZmZXIoX3RoaXMyLm1lZGlhU291cmNlXy5uYXRpdmVNZWRpYVNvdXJjZV8sIG1pbWVUeXBlKTtcbiAgICAgICAgICBfdGhpczIubWVkaWFTb3VyY2VfW3R5cGUgKyAnQnVmZmVyXyddID0gYnVmZmVyO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyW3R5cGUgKyAnQnVmZmVyXyddID0gYnVmZmVyOyAvLyBXaXJlIHVwIHRoZSBldmVudHMgdG8gdGhlIFNvdXJjZUJ1ZmZlclxuXG4gICAgICAgIFsndXBkYXRlJywgJ3VwZGF0ZXN0YXJ0JywgJ3VwZGF0ZWVuZCddLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgYnVmZmVyLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIGlmIGF1ZGlvIGlzIGRpc2FibGVkXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2F1ZGlvJyAmJiBfdGhpczIuYXVkaW9EaXNhYmxlZF8pIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZXZlbnQgPT09ICd1cGRhdGVlbmQnKSB7XG4gICAgICAgICAgICAgIF90aGlzMlt0eXBlICsgJ0J1ZmZlcl8nXS51cGRhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc2hvdWxkVHJpZ2dlciA9IHR5cGVzLmV2ZXJ5KGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgIC8vIHNraXAgY2hlY2tpbmcgYXVkaW8ncyB1cGRhdGluZyBzdGF0dXMgaWYgYXVkaW9cbiAgICAgICAgICAgICAgLy8gaXMgbm90IGVuYWJsZWRcbiAgICAgICAgICAgICAgaWYgKHQgPT09ICdhdWRpbycgJiYgX3RoaXMyLmF1ZGlvRGlzYWJsZWRfKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgIH0gLy8gaWYgdGhlIG90aGVyIHR5cGUgaWYgdXBkYXRpbmcgd2UgZG9uJ3QgdHJpZ2dlclxuXG5cbiAgICAgICAgICAgICAgaWYgKHR5cGUgIT09IHQgJiYgX3RoaXMyW3QgKyAnQnVmZmVyXyddICYmIF90aGlzMlt0ICsgJ0J1ZmZlcl8nXS51cGRhdGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChzaG91bGRUcmlnZ2VyKSB7XG4gICAgICAgICAgICAgIHJldHVybiBfdGhpczIudHJpZ2dlcihldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVtdWxhdGUgdGhlIG5hdGl2ZSBtZWRpYXNvdXJjZSBmdW5jdGlvbiwgYnV0IG91ciBmdW5jdGlvbiB3aWxsXG4gICAgICogc2VuZCBhbGwgb2YgdGhlIHByb3Bvc2VkIHNlZ21lbnRzIHRvIHRoZSB0cmFuc211eGVyIHNvIHRoYXQgd2VcbiAgICAgKiBjYW4gdHJhbnNtdXggdGhlbSBiZWZvcmUgd2UgYXBwZW5kIHRoZW0gdG8gb3VyIGludGVybmFsXG4gICAgICogbmF0aXZlIHNvdXJjZSBidWZmZXJzIGluIHRoZSBjb3JyZWN0IGZvcm1hdC5cbiAgICAgKlxuICAgICAqIEBsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Tb3VyY2VCdWZmZXIvYXBwZW5kQnVmZmVyXG4gICAgICogQHBhcmFtIHtVaW50OEFycmF5fSBzZWdtZW50IHRoZSBzZWdtZW50IHRvIGFwcGVuZCB0byB0aGUgYnVmZmVyXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2FwcGVuZEJ1ZmZlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGVuZEJ1ZmZlcihzZWdtZW50KSB7XG4gICAgICAvLyBTdGFydCB0aGUgaW50ZXJuYWwgXCJ1cGRhdGluZ1wiIHN0YXRlXG4gICAgICB0aGlzLmJ1ZmZlclVwZGF0aW5nXyA9IHRydWU7XG5cbiAgICAgIGlmICh0aGlzLmF1ZGlvQnVmZmVyXyAmJiB0aGlzLmF1ZGlvQnVmZmVyXy5idWZmZXJlZC5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGF1ZGlvQnVmZmVyZWQgPSB0aGlzLmF1ZGlvQnVmZmVyXy5idWZmZXJlZDtcbiAgICAgICAgdGhpcy50cmFuc211eGVyXy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgYWN0aW9uOiAnc2V0QXVkaW9BcHBlbmRTdGFydCcsXG4gICAgICAgICAgYXBwZW5kU3RhcnQ6IGF1ZGlvQnVmZmVyZWQuZW5kKGF1ZGlvQnVmZmVyZWQubGVuZ3RoIC0gMSlcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnZpZGVvQnVmZmVyXykge1xuICAgICAgICB0aGlzLnRyYW5zbXV4ZXJfLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICBhY3Rpb246ICdhbGlnbkdvcHNXaXRoJyxcbiAgICAgICAgICBnb3BzVG9BbGlnbldpdGg6IGdvcHNTYWZlVG9BbGlnbldpdGgodGhpcy5nb3BCdWZmZXJfLCB0aGlzLm1lZGlhU291cmNlXy5wbGF5ZXJfID8gdGhpcy5tZWRpYVNvdXJjZV8ucGxheWVyXy5jdXJyZW50VGltZSgpIDogbnVsbCwgdGhpcy50aW1lTWFwcGluZ18pXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRyYW5zbXV4ZXJfLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgYWN0aW9uOiAncHVzaCcsXG4gICAgICAgIC8vIFNlbmQgdGhlIHR5cGVkLWFycmF5IG9mIGRhdGEgYXMgYW4gQXJyYXlCdWZmZXIgc28gdGhhdFxuICAgICAgICAvLyBpdCBjYW4gYmUgc2VudCBhcyBhIFwiVHJhbnNmZXJhYmxlXCIgYW5kIGF2b2lkIHRoZSBjb3N0bHlcbiAgICAgICAgLy8gbWVtb3J5IGNvcHlcbiAgICAgICAgZGF0YTogc2VnbWVudC5idWZmZXIsXG4gICAgICAgIC8vIFRvIHJlY3JlYXRlIHRoZSBvcmlnaW5hbCB0eXBlZC1hcnJheSwgd2UgbmVlZCBpbmZvcm1hdGlvblxuICAgICAgICAvLyBhYm91dCB3aGF0IHBvcnRpb24gb2YgdGhlIEFycmF5QnVmZmVyIGl0IHdhcyBhIHZpZXcgaW50b1xuICAgICAgICBieXRlT2Zmc2V0OiBzZWdtZW50LmJ5dGVPZmZzZXQsXG4gICAgICAgIGJ5dGVMZW5ndGg6IHNlZ21lbnQuYnl0ZUxlbmd0aFxuICAgICAgfSwgW3NlZ21lbnQuYnVmZmVyXSk7XG4gICAgICB0aGlzLnRyYW5zbXV4ZXJfLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgYWN0aW9uOiAnZmx1c2gnXG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwZW5kcyBnb3AgaW5mb3JtYXRpb24gKHRpbWluZyBhbmQgYnl0ZUxlbmd0aCkgcmVjZWl2ZWQgYnkgdGhlIHRyYW5zbXV4ZXIgZm9yIHRoZVxuICAgICAqIGdvcHMgYXBwZW5kZWQgaW4gdGhlIGxhc3QgY2FsbCB0byBhcHBlbmRCdWZmZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIFRoZSBnb3BJbmZvIGV2ZW50IGZyb20gdGhlIHRyYW5zbXV4ZXJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBldmVudC5kYXRhLmdvcEluZm9cbiAgICAgKiAgICAgICAgTGlzdCBvZiBnb3AgaW5mbyB0byBhcHBlbmRcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnYXBwZW5kR29wSW5mb18nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhcHBlbmRHb3BJbmZvXyhldmVudCkge1xuICAgICAgdGhpcy5nb3BCdWZmZXJfID0gdXBkYXRlR29wQnVmZmVyKHRoaXMuZ29wQnVmZmVyXywgZXZlbnQuZGF0YS5nb3BJbmZvLCB0aGlzLnNhZmVBcHBlbmRfKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW11bGF0ZSB0aGUgbmF0aXZlIG1lZGlhc291cmNlIGZ1bmN0aW9uIGFuZCByZW1vdmUgcGFydHNcbiAgICAgKiBvZiB0aGUgYnVmZmVyIGZyb20gYW55IG9mIG91ciBpbnRlcm5hbCBidWZmZXJzIHRoYXQgZXhpc3RcbiAgICAgKlxuICAgICAqIEBsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Tb3VyY2VCdWZmZXIvcmVtb3ZlXG4gICAgICogQHBhcmFtIHtEb3VibGV9IHN0YXJ0IHBvc2l0aW9uIHRvIHN0YXJ0IHRoZSByZW1vdmUgYXRcbiAgICAgKiBAcGFyYW0ge0RvdWJsZX0gZW5kIHBvc2l0aW9uIHRvIGVuZCB0aGUgcmVtb3ZlIGF0XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3JlbW92ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZShzdGFydCwgZW5kKSB7XG4gICAgICBpZiAodGhpcy52aWRlb0J1ZmZlcl8pIHtcbiAgICAgICAgdGhpcy52aWRlb0J1ZmZlcl8udXBkYXRpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLnZpZGVvQnVmZmVyXy5yZW1vdmUoc3RhcnQsIGVuZCk7XG4gICAgICAgIHRoaXMuZ29wQnVmZmVyXyA9IHJlbW92ZUdvcEJ1ZmZlcih0aGlzLmdvcEJ1ZmZlcl8sIHN0YXJ0LCBlbmQsIHRoaXMudGltZU1hcHBpbmdfKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmF1ZGlvRGlzYWJsZWRfICYmIHRoaXMuYXVkaW9CdWZmZXJfKSB7XG4gICAgICAgIHRoaXMuYXVkaW9CdWZmZXJfLnVwZGF0aW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5hdWRpb0J1ZmZlcl8ucmVtb3ZlKHN0YXJ0LCBlbmQpO1xuICAgICAgfSAvLyBSZW1vdmUgTWV0YWRhdGEgQ3VlcyAoaWQzKVxuXG5cbiAgICAgIHJlbW92ZUN1ZXNGcm9tVHJhY2soc3RhcnQsIGVuZCwgdGhpcy5tZXRhZGF0YVRyYWNrXyk7IC8vIFJlbW92ZSBBbnkgQ2FwdGlvbnNcblxuICAgICAgaWYgKHRoaXMuaW5iYW5kVGV4dFRyYWNrc18pIHtcbiAgICAgICAgZm9yICh2YXIgdHJhY2sgaW4gdGhpcy5pbmJhbmRUZXh0VHJhY2tzXykge1xuICAgICAgICAgIHJlbW92ZUN1ZXNGcm9tVHJhY2soc3RhcnQsIGVuZCwgdGhpcy5pbmJhbmRUZXh0VHJhY2tzX1t0cmFja10pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2Nlc3MgYW55IHNlZ21lbnRzIHRoYXQgdGhlIG11eGVyIGhhcyBvdXRwdXRcbiAgICAgKiBDb25jYXRlbmF0ZSBzZWdtZW50cyB0b2dldGhlciBiYXNlZCBvbiB0eXBlIGFuZCBhcHBlbmQgdGhlbSBpbnRvXG4gICAgICogdGhlaXIgcmVzcGVjdGl2ZSBzb3VyY2VCdWZmZXJzXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdwcm9jZXNzUGVuZGluZ1NlZ21lbnRzXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHByb2Nlc3NQZW5kaW5nU2VnbWVudHNfKCkge1xuICAgICAgdmFyIHNvcnRlZFNlZ21lbnRzID0ge1xuICAgICAgICB2aWRlbzoge1xuICAgICAgICAgIHNlZ21lbnRzOiBbXSxcbiAgICAgICAgICBieXRlczogMFxuICAgICAgICB9LFxuICAgICAgICBhdWRpbzoge1xuICAgICAgICAgIHNlZ21lbnRzOiBbXSxcbiAgICAgICAgICBieXRlczogMFxuICAgICAgICB9LFxuICAgICAgICBjYXB0aW9uczogW10sXG4gICAgICAgIG1ldGFkYXRhOiBbXVxuICAgICAgfTsgLy8gU29ydCBzZWdtZW50cyBpbnRvIHNlcGFyYXRlIHZpZGVvL2F1ZGlvIGFycmF5cyBhbmRcbiAgICAgIC8vIGtlZXAgdHJhY2sgb2YgdGhlaXIgdG90YWwgYnl0ZSBsZW5ndGhzXG5cbiAgICAgIHNvcnRlZFNlZ21lbnRzID0gdGhpcy5wZW5kaW5nQnVmZmVyc18ucmVkdWNlKGZ1bmN0aW9uIChzZWdtZW50T2JqLCBzZWdtZW50KSB7XG4gICAgICAgIHZhciB0eXBlID0gc2VnbWVudC50eXBlO1xuICAgICAgICB2YXIgZGF0YSA9IHNlZ21lbnQuZGF0YTtcbiAgICAgICAgdmFyIGluaXRTZWdtZW50ID0gc2VnbWVudC5pbml0U2VnbWVudDtcbiAgICAgICAgc2VnbWVudE9ialt0eXBlXS5zZWdtZW50cy5wdXNoKGRhdGEpO1xuICAgICAgICBzZWdtZW50T2JqW3R5cGVdLmJ5dGVzICs9IGRhdGEuYnl0ZUxlbmd0aDtcbiAgICAgICAgc2VnbWVudE9ialt0eXBlXS5pbml0U2VnbWVudCA9IGluaXRTZWdtZW50OyAvLyBHYXRoZXIgYW55IGNhcHRpb25zIGludG8gYSBzaW5nbGUgYXJyYXlcblxuICAgICAgICBpZiAoc2VnbWVudC5jYXB0aW9ucykge1xuICAgICAgICAgIHNlZ21lbnRPYmouY2FwdGlvbnMgPSBzZWdtZW50T2JqLmNhcHRpb25zLmNvbmNhdChzZWdtZW50LmNhcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWdtZW50LmluZm8pIHtcbiAgICAgICAgICBzZWdtZW50T2JqW3R5cGVdLmluZm8gPSBzZWdtZW50LmluZm87XG4gICAgICAgIH0gLy8gR2F0aGVyIGFueSBtZXRhZGF0YSBpbnRvIGEgc2luZ2xlIGFycmF5XG5cblxuICAgICAgICBpZiAoc2VnbWVudC5tZXRhZGF0YSkge1xuICAgICAgICAgIHNlZ21lbnRPYmoubWV0YWRhdGEgPSBzZWdtZW50T2JqLm1ldGFkYXRhLmNvbmNhdChzZWdtZW50Lm1ldGFkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzZWdtZW50T2JqO1xuICAgICAgfSwgc29ydGVkU2VnbWVudHMpOyAvLyBDcmVhdGUgdGhlIHJlYWwgc291cmNlIGJ1ZmZlcnMgaWYgdGhleSBkb24ndCBleGlzdCBieSBub3cgc2luY2Ugd2VcbiAgICAgIC8vIGZpbmFsbHkgYXJlIHN1cmUgd2hhdCB0cmFja3MgYXJlIGNvbnRhaW5lZCBpbiB0aGUgc291cmNlXG5cbiAgICAgIGlmICghdGhpcy52aWRlb0J1ZmZlcl8gJiYgIXRoaXMuYXVkaW9CdWZmZXJfKSB7XG4gICAgICAgIC8vIFJlbW92ZSBhbnkgY29kZWNzIHRoYXQgbWF5IGhhdmUgYmVlbiBzcGVjaWZpZWQgYnkgZGVmYXVsdCBidXRcbiAgICAgICAgLy8gYXJlIG5vIGxvbmdlciBhcHBsaWNhYmxlIG5vd1xuICAgICAgICBpZiAoc29ydGVkU2VnbWVudHMudmlkZW8uYnl0ZXMgPT09IDApIHtcbiAgICAgICAgICB0aGlzLnZpZGVvQ29kZWNfID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzb3J0ZWRTZWdtZW50cy5hdWRpby5ieXRlcyA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuYXVkaW9Db2RlY18gPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jcmVhdGVSZWFsU291cmNlQnVmZmVyc18oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNvcnRlZFNlZ21lbnRzLmF1ZGlvLmluZm8pIHtcbiAgICAgICAgdGhpcy5tZWRpYVNvdXJjZV8udHJpZ2dlcih7XG4gICAgICAgICAgdHlwZTogJ2F1ZGlvaW5mbycsXG4gICAgICAgICAgaW5mbzogc29ydGVkU2VnbWVudHMuYXVkaW8uaW5mb1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNvcnRlZFNlZ21lbnRzLnZpZGVvLmluZm8pIHtcbiAgICAgICAgdGhpcy5tZWRpYVNvdXJjZV8udHJpZ2dlcih7XG4gICAgICAgICAgdHlwZTogJ3ZpZGVvaW5mbycsXG4gICAgICAgICAgaW5mbzogc29ydGVkU2VnbWVudHMudmlkZW8uaW5mb1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuYXBwZW5kQXVkaW9Jbml0U2VnbWVudF8pIHtcbiAgICAgICAgaWYgKCF0aGlzLmF1ZGlvRGlzYWJsZWRfICYmIHRoaXMuYXVkaW9CdWZmZXJfKSB7XG4gICAgICAgICAgc29ydGVkU2VnbWVudHMuYXVkaW8uc2VnbWVudHMudW5zaGlmdChzb3J0ZWRTZWdtZW50cy5hdWRpby5pbml0U2VnbWVudCk7XG4gICAgICAgICAgc29ydGVkU2VnbWVudHMuYXVkaW8uYnl0ZXMgKz0gc29ydGVkU2VnbWVudHMuYXVkaW8uaW5pdFNlZ21lbnQuYnl0ZUxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYXBwZW5kQXVkaW9Jbml0U2VnbWVudF8gPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRyaWdnZXJVcGRhdGVlbmQgPSBmYWxzZTsgLy8gTWVyZ2UgbXVsdGlwbGUgdmlkZW8gYW5kIGF1ZGlvIHNlZ21lbnRzIGludG8gb25lIGFuZCBhcHBlbmRcblxuICAgICAgaWYgKHRoaXMudmlkZW9CdWZmZXJfICYmIHNvcnRlZFNlZ21lbnRzLnZpZGVvLmJ5dGVzKSB7XG4gICAgICAgIHNvcnRlZFNlZ21lbnRzLnZpZGVvLnNlZ21lbnRzLnVuc2hpZnQoc29ydGVkU2VnbWVudHMudmlkZW8uaW5pdFNlZ21lbnQpO1xuICAgICAgICBzb3J0ZWRTZWdtZW50cy52aWRlby5ieXRlcyArPSBzb3J0ZWRTZWdtZW50cy52aWRlby5pbml0U2VnbWVudC5ieXRlTGVuZ3RoO1xuICAgICAgICB0aGlzLmNvbmNhdEFuZEFwcGVuZFNlZ21lbnRzXyhzb3J0ZWRTZWdtZW50cy52aWRlbywgdGhpcy52aWRlb0J1ZmZlcl8pO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnZpZGVvQnVmZmVyXyAmJiAodGhpcy5hdWRpb0Rpc2FibGVkXyB8fCAhdGhpcy5hdWRpb0J1ZmZlcl8pKSB7XG4gICAgICAgIC8vIFRoZSB0cmFuc211eGVyIGRpZCBub3QgcmV0dXJuIGFueSBieXRlcyBvZiB2aWRlbywgbWVhbmluZyBpdCB3YXMgYWxsIHRyaW1tZWRcbiAgICAgICAgLy8gZm9yIGdvcCBhbGlnbm1lbnQuIFNpbmNlIHdlIGhhdmUgYSB2aWRlbyBidWZmZXIgYW5kIGF1ZGlvIGlzIGRpc2FibGVkLCB1cGRhdGVlbmRcbiAgICAgICAgLy8gd2lsbCBuZXZlciBiZSB0cmlnZ2VyZWQgYnkgdGhpcyBzb3VyY2UgYnVmZmVyLCB3aGljaCB3aWxsIGNhdXNlIGNvbnRyaWItaGxzXG4gICAgICAgIC8vIHRvIGJlIHN0dWNrIGZvcmV2ZXIgd2FpdGluZyBmb3IgdXBkYXRlZW5kLiBJZiBhdWRpbyBpcyBub3QgZGlzYWJsZWQsIHVwZGF0ZWVuZFxuICAgICAgICAvLyB3aWxsIGJlIHRyaWdnZXJlZCBieSB0aGUgYXVkaW8gYnVmZmVyLCB3aGljaCB3aWxsIGJlIHNlbnQgdXB3YXJkcyBzaW5jZSB0aGUgdmlkZW9cbiAgICAgICAgLy8gYnVmZmVyIHdpbGwgbm90IGJlIGluIGFuIHVwZGF0aW5nIHN0YXRlLlxuICAgICAgICB0cmlnZ2VyVXBkYXRlZW5kID0gdHJ1ZTtcbiAgICAgIH0gLy8gQWRkIHRleHQtdHJhY2sgZGF0YSBmb3IgYWxsXG5cblxuICAgICAgYWRkVGV4dFRyYWNrRGF0YSh0aGlzLCBzb3J0ZWRTZWdtZW50cy5jYXB0aW9ucywgc29ydGVkU2VnbWVudHMubWV0YWRhdGEpO1xuXG4gICAgICBpZiAoIXRoaXMuYXVkaW9EaXNhYmxlZF8gJiYgdGhpcy5hdWRpb0J1ZmZlcl8pIHtcbiAgICAgICAgdGhpcy5jb25jYXRBbmRBcHBlbmRTZWdtZW50c18oc29ydGVkU2VnbWVudHMuYXVkaW8sIHRoaXMuYXVkaW9CdWZmZXJfKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wZW5kaW5nQnVmZmVyc18ubGVuZ3RoID0gMDtcblxuICAgICAgaWYgKHRyaWdnZXJVcGRhdGVlbmQpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCd1cGRhdGVlbmQnKTtcbiAgICAgIH0gLy8gV2UgYXJlIG5vIGxvbmdlciBpbiB0aGUgaW50ZXJuYWwgXCJ1cGRhdGluZ1wiIHN0YXRlXG5cblxuICAgICAgdGhpcy5idWZmZXJVcGRhdGluZ18gPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tYmluZSBhbGwgc2VnbWVudHMgaW50byBhIHNpbmdsZSBVaW50OEFycmF5IGFuZCB0aGVuIGFwcGVuZCB0aGVtXG4gICAgICogdG8gdGhlIGRlc3RpbmF0aW9uIGJ1ZmZlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNlZ21lbnRPYmpcbiAgICAgKiBAcGFyYW0ge1NvdXJjZUJ1ZmZlcn0gZGVzdGluYXRpb25CdWZmZXIgbmF0aXZlIHNvdXJjZSBidWZmZXIgdG8gYXBwZW5kIGRhdGEgdG9cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdjb25jYXRBbmRBcHBlbmRTZWdtZW50c18nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb25jYXRBbmRBcHBlbmRTZWdtZW50c18oc2VnbWVudE9iaiwgZGVzdGluYXRpb25CdWZmZXIpIHtcbiAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgdmFyIHRlbXBCdWZmZXIgPSB2b2lkIDA7XG5cbiAgICAgIGlmIChzZWdtZW50T2JqLmJ5dGVzKSB7XG4gICAgICAgIHRlbXBCdWZmZXIgPSBuZXcgVWludDhBcnJheShzZWdtZW50T2JqLmJ5dGVzKTsgLy8gQ29tYmluZSB0aGUgaW5kaXZpZHVhbCBzZWdtZW50cyBpbnRvIG9uZSBsYXJnZSB0eXBlZC1hcnJheVxuXG4gICAgICAgIHNlZ21lbnRPYmouc2VnbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoc2VnbWVudCkge1xuICAgICAgICAgIHRlbXBCdWZmZXIuc2V0KHNlZ21lbnQsIG9mZnNldCk7XG4gICAgICAgICAgb2Zmc2V0ICs9IHNlZ21lbnQuYnl0ZUxlbmd0aDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBkZXN0aW5hdGlvbkJ1ZmZlci51cGRhdGluZyA9IHRydWU7XG4gICAgICAgICAgZGVzdGluYXRpb25CdWZmZXIuYXBwZW5kQnVmZmVyKHRlbXBCdWZmZXIpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGlmICh0aGlzLm1lZGlhU291cmNlXy5wbGF5ZXJfKSB7XG4gICAgICAgICAgICB0aGlzLm1lZGlhU291cmNlXy5wbGF5ZXJfLmVycm9yKHtcbiAgICAgICAgICAgICAgY29kZTogLTMsXG4gICAgICAgICAgICAgIHR5cGU6ICdBUFBFTkRfQlVGRkVSX0VSUicsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3I6IGVycm9yXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRW11bGF0ZSB0aGUgbmF0aXZlIG1lZGlhc291cmNlIGZ1bmN0aW9uLiBhYm9ydCBhbnkgc291cmVCdWZmZXJcbiAgICAgKiBhY3Rpb25zIGFuZCB0aHJvdyBvdXQgYW55IHVuLWFwcGVuZGVkIGRhdGEuXG4gICAgICpcbiAgICAgKiBAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU291cmNlQnVmZmVyL2Fib3J0XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2Fib3J0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWJvcnQoKSB7XG4gICAgICBpZiAodGhpcy52aWRlb0J1ZmZlcl8pIHtcbiAgICAgICAgdGhpcy52aWRlb0J1ZmZlcl8uYWJvcnQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmF1ZGlvRGlzYWJsZWRfICYmIHRoaXMuYXVkaW9CdWZmZXJfKSB7XG4gICAgICAgIHRoaXMuYXVkaW9CdWZmZXJfLmFib3J0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnRyYW5zbXV4ZXJfKSB7XG4gICAgICAgIHRoaXMudHJhbnNtdXhlcl8ucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIGFjdGlvbjogJ3Jlc2V0J1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wZW5kaW5nQnVmZmVyc18ubGVuZ3RoID0gMDtcbiAgICAgIHRoaXMuYnVmZmVyVXBkYXRpbmdfID0gZmFsc2U7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBWaXJ0dWFsU291cmNlQnVmZmVyO1xufSh2aWRlb2pzJDEuRXZlbnRUYXJnZXQpO1xuLyoqXG4gKiBAZmlsZSBodG1sLW1lZGlhLXNvdXJjZS5qc1xuICovXG5cbi8qKlxuICogT3VyIE1lZGlhU291cmNlIGltcGxlbWVudGF0aW9uIGluIEhUTUwsIG1pbWljcyBuYXRpdmVcbiAqIE1lZGlhU291cmNlIHdoZXJlL2lmIHBvc3NpYmxlLlxuICpcbiAqIEBsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9NZWRpYVNvdXJjZVxuICogQGNsYXNzIEh0bWxNZWRpYVNvdXJjZVxuICogQGV4dGVuZHMgdmlkZW9qcy5FdmVudFRhcmdldFxuICovXG5cblxudmFyIEh0bWxNZWRpYVNvdXJjZSA9IGZ1bmN0aW9uIChfdmlkZW9qcyRFdmVudFRhcmdldCkge1xuICBpbmhlcml0cyhIdG1sTWVkaWFTb3VyY2UsIF92aWRlb2pzJEV2ZW50VGFyZ2V0KTtcblxuICBmdW5jdGlvbiBIdG1sTWVkaWFTb3VyY2UoKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgSHRtbE1lZGlhU291cmNlKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEh0bWxNZWRpYVNvdXJjZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEh0bWxNZWRpYVNvdXJjZSkpLmNhbGwodGhpcykpO1xuXG4gICAgdmFyIHByb3BlcnR5ID0gdm9pZCAwO1xuICAgIF90aGlzLm5hdGl2ZU1lZGlhU291cmNlXyA9IG5ldyB3aW5kb3ckMS5NZWRpYVNvdXJjZSgpOyAvLyBkZWxlZ2F0ZSB0byB0aGUgbmF0aXZlIE1lZGlhU291cmNlJ3MgbWV0aG9kcyBieSBkZWZhdWx0XG5cbiAgICBmb3IgKHByb3BlcnR5IGluIF90aGlzLm5hdGl2ZU1lZGlhU291cmNlXykge1xuICAgICAgaWYgKCEocHJvcGVydHkgaW4gSHRtbE1lZGlhU291cmNlLnByb3RvdHlwZSkgJiYgdHlwZW9mIF90aGlzLm5hdGl2ZU1lZGlhU291cmNlX1twcm9wZXJ0eV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgX3RoaXNbcHJvcGVydHldID0gX3RoaXMubmF0aXZlTWVkaWFTb3VyY2VfW3Byb3BlcnR5XS5iaW5kKF90aGlzLm5hdGl2ZU1lZGlhU291cmNlXyk7XG4gICAgICB9XG4gICAgfSAvLyBlbXVsYXRlIGBkdXJhdGlvbmAgYW5kIGBzZWVrYWJsZWAgdW50aWwgc2Vla2luZyBjYW4gYmVcbiAgICAvLyBoYW5kbGVkIHVuaWZvcm1seSBmb3IgbGl2ZSBzdHJlYW1zXG4gICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93M2MvbWVkaWEtc291cmNlL2lzc3Vlcy81XG5cblxuICAgIF90aGlzLmR1cmF0aW9uXyA9IE5hTjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX3RoaXMsICdkdXJhdGlvbicsIHtcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgICBpZiAodGhpcy5kdXJhdGlvbl8gPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZHVyYXRpb25fO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMubmF0aXZlTWVkaWFTb3VyY2VfLmR1cmF0aW9uO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0JCQxKGR1cmF0aW9uKSB7XG4gICAgICAgIHRoaXMuZHVyYXRpb25fID0gZHVyYXRpb247XG5cbiAgICAgICAgaWYgKGR1cmF0aW9uICE9PSBJbmZpbml0eSkge1xuICAgICAgICAgIHRoaXMubmF0aXZlTWVkaWFTb3VyY2VfLmR1cmF0aW9uID0gZHVyYXRpb247XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF90aGlzLCAnc2Vla2FibGUnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZHVyYXRpb25fID09PSBJbmZpbml0eSkge1xuICAgICAgICAgIHJldHVybiB2aWRlb2pzJDEuY3JlYXRlVGltZVJhbmdlcyhbWzAsIHRoaXMubmF0aXZlTWVkaWFTb3VyY2VfLmR1cmF0aW9uXV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMubmF0aXZlTWVkaWFTb3VyY2VfLnNlZWthYmxlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ3JlYWR5U3RhdGUnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmF0aXZlTWVkaWFTb3VyY2VfLnJlYWR5U3RhdGU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF90aGlzLCAnYWN0aXZlU291cmNlQnVmZmVycycsIHtcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmVTb3VyY2VCdWZmZXJzXztcbiAgICAgIH1cbiAgICB9KTsgLy8gdGhlIGxpc3Qgb2YgdmlydHVhbCBhbmQgbmF0aXZlIFNvdXJjZUJ1ZmZlcnMgY3JlYXRlZCBieSB0aGlzXG4gICAgLy8gTWVkaWFTb3VyY2VcblxuICAgIF90aGlzLnNvdXJjZUJ1ZmZlcnMgPSBbXTtcbiAgICBfdGhpcy5hY3RpdmVTb3VyY2VCdWZmZXJzXyA9IFtdO1xuICAgIC8qKlxuICAgICAqIHVwZGF0ZSB0aGUgbGlzdCBvZiBhY3RpdmUgc291cmNlIGJ1ZmZlcnMgYmFzZWQgdXBvbiB2YXJpb3VzXG4gICAgICogaW1mb3JtYXRpb24gZnJvbSBITFMgYW5kIHZpZGVvLmpzXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgX3RoaXMudXBkYXRlQWN0aXZlU291cmNlQnVmZmVyc18gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBSZXRhaW4gdGhlIHJlZmVyZW5jZSBidXQgZW1wdHkgdGhlIGFycmF5XG4gICAgICBfdGhpcy5hY3RpdmVTb3VyY2VCdWZmZXJzXy5sZW5ndGggPSAwOyAvLyBJZiB0aGVyZSBpcyBvbmx5IG9uZSBzb3VyY2UgYnVmZmVyLCB0aGVuIGl0IHdpbGwgYWx3YXlzIGJlIGFjdGl2ZSBhbmQgYXVkaW8gd2lsbFxuICAgICAgLy8gYmUgZGlzYWJsZWQgYmFzZWQgb24gdGhlIGNvZGVjIG9mIHRoZSBzb3VyY2UgYnVmZmVyXG5cbiAgICAgIGlmIChfdGhpcy5zb3VyY2VCdWZmZXJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB2YXIgc291cmNlQnVmZmVyID0gX3RoaXMuc291cmNlQnVmZmVyc1swXTtcbiAgICAgICAgc291cmNlQnVmZmVyLmFwcGVuZEF1ZGlvSW5pdFNlZ21lbnRfID0gdHJ1ZTtcbiAgICAgICAgc291cmNlQnVmZmVyLmF1ZGlvRGlzYWJsZWRfID0gIXNvdXJjZUJ1ZmZlci5hdWRpb0NvZGVjXztcblxuICAgICAgICBfdGhpcy5hY3RpdmVTb3VyY2VCdWZmZXJzXy5wdXNoKHNvdXJjZUJ1ZmZlcik7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBUaGVyZSBhcmUgMiBzb3VyY2UgYnVmZmVycywgYSBjb21iaW5lZCAocG9zc2libHkgdmlkZW8gb25seSkgc291cmNlIGJ1ZmZlciBhbmRcbiAgICAgIC8vIGFuZCBhbiBhdWRpbyBvbmx5IHNvdXJjZSBidWZmZXIuXG4gICAgICAvLyBCeSBkZWZhdWx0LCB0aGUgYXVkaW8gaW4gdGhlIGNvbWJpbmVkIHZpcnR1YWwgc291cmNlIGJ1ZmZlciBpcyBlbmFibGVkXG4gICAgICAvLyBhbmQgdGhlIGF1ZGlvLW9ubHkgc291cmNlIGJ1ZmZlciAoaWYgaXQgZXhpc3RzKSBpcyBkaXNhYmxlZC5cblxuXG4gICAgICB2YXIgZGlzYWJsZUNvbWJpbmVkID0gZmFsc2U7XG4gICAgICB2YXIgZGlzYWJsZUF1ZGlvT25seSA9IHRydWU7IC8vIFRPRE86IG1heWJlIHdlIGNhbiBzdG9yZSB0aGUgc291cmNlYnVmZmVycyBvbiB0aGUgdHJhY2sgb2JqZWN0cz9cbiAgICAgIC8vIHNhZmFyaSBtYXkgZG8gc29tZXRoaW5nIGxpa2UgdGhpc1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90aGlzLnBsYXllcl8uYXVkaW9UcmFja3MoKS5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdHJhY2sgPSBfdGhpcy5wbGF5ZXJfLmF1ZGlvVHJhY2tzKClbaV07XG5cbiAgICAgICAgaWYgKHRyYWNrLmVuYWJsZWQgJiYgdHJhY2sua2luZCAhPT0gJ21haW4nKSB7XG4gICAgICAgICAgLy8gVGhlIGVuYWJsZWQgdHJhY2sgaXMgYW4gYWx0ZXJuYXRlIGF1ZGlvIHRyYWNrIHNvIGRpc2FibGUgdGhlIGF1ZGlvIGluXG4gICAgICAgICAgLy8gdGhlIGNvbWJpbmVkIHNvdXJjZSBidWZmZXIgYW5kIGVuYWJsZSB0aGUgYXVkaW8tb25seSBzb3VyY2UgYnVmZmVyLlxuICAgICAgICAgIGRpc2FibGVDb21iaW5lZCA9IHRydWU7XG4gICAgICAgICAgZGlzYWJsZUF1ZGlvT25seSA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIF90aGlzLnNvdXJjZUJ1ZmZlcnMuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlQnVmZmVyLCBpbmRleCkge1xuICAgICAgICAvKiBlc2xpbnN0LWRpc2FibGUgKi9cbiAgICAgICAgLy8gVE9ETyBvbmNlIGNvZGVjcyBhcmUgcmVxdWlyZWQsIHdlIGNhbiBzd2l0Y2ggdG8gdXNpbmcgdGhlIGNvZGVjcyB0byBkZXRlcm1pbmVcbiAgICAgICAgLy8gICAgICB3aGF0IHN0cmVhbSBpcyB0aGUgdmlkZW8gc3RyZWFtLCByYXRoZXIgdGhhbiByZWx5aW5nIG9uIHZpZGVvVHJhY2tzXG5cbiAgICAgICAgLyogZXNsaW5zdC1lbmFibGUgKi9cbiAgICAgICAgc291cmNlQnVmZmVyLmFwcGVuZEF1ZGlvSW5pdFNlZ21lbnRfID0gdHJ1ZTtcblxuICAgICAgICBpZiAoc291cmNlQnVmZmVyLnZpZGVvQ29kZWNfICYmIHNvdXJjZUJ1ZmZlci5hdWRpb0NvZGVjXykge1xuICAgICAgICAgIC8vIGNvbWJpbmVkXG4gICAgICAgICAgc291cmNlQnVmZmVyLmF1ZGlvRGlzYWJsZWRfID0gZGlzYWJsZUNvbWJpbmVkO1xuICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZUJ1ZmZlci52aWRlb0NvZGVjXyAmJiAhc291cmNlQnVmZmVyLmF1ZGlvQ29kZWNfKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIFwiY29tYmluZWRcIiBzb3VyY2UgYnVmZmVyIGlzIHZpZGVvIG9ubHksIHRoZW4gd2UgZG8gbm90IHdhbnRcbiAgICAgICAgICAvLyBkaXNhYmxlIHRoZSBhdWRpby1vbmx5IHNvdXJjZSBidWZmZXIgKHRoaXMgaXMgbW9zdGx5IGZvciBkZW11eGVkXG4gICAgICAgICAgLy8gYXVkaW8gYW5kIHZpZGVvIGhscylcbiAgICAgICAgICBzb3VyY2VCdWZmZXIuYXVkaW9EaXNhYmxlZF8gPSB0cnVlO1xuICAgICAgICAgIGRpc2FibGVBdWRpb09ubHkgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmICghc291cmNlQnVmZmVyLnZpZGVvQ29kZWNfICYmIHNvdXJjZUJ1ZmZlci5hdWRpb0NvZGVjXykge1xuICAgICAgICAgIC8vIGF1ZGlvIG9ubHlcbiAgICAgICAgICAvLyBJbiB0aGUgY2FzZSBvZiBhdWRpbyBvbmx5IHdpdGggYWx0ZXJuYXRlIGF1ZGlvIGFuZCBkaXNhYmxlQXVkaW9Pbmx5IGlzIHRydWVcbiAgICAgICAgICAvLyB0aGlzIG1lYW5zIHdlIHdhbnQgdG8gZGlzYWJsZSB0aGUgYXVkaW8gb24gdGhlIGFsdGVybmF0ZSBhdWRpbyBzb3VyY2VidWZmZXJcbiAgICAgICAgICAvLyBidXQgbm90IHRoZSBtYWluIFwiY29tYmluZWRcIiBzb3VyY2UgYnVmZmVyLiBUaGUgXCJjb21iaW5lZFwiIHNvdXJjZSBidWZmZXIgaXNcbiAgICAgICAgICAvLyBhbHdheXMgYXQgaW5kZXggMCwgc28gdGhpcyBlbnN1cmVzIGF1ZGlvIHdvbid0IGJlIGRpc2FibGVkIGluIGJvdGggc291cmNlXG4gICAgICAgICAgLy8gYnVmZmVycy5cbiAgICAgICAgICBzb3VyY2VCdWZmZXIuYXVkaW9EaXNhYmxlZF8gPSBpbmRleCA/IGRpc2FibGVBdWRpb09ubHkgOiAhZGlzYWJsZUF1ZGlvT25seTtcblxuICAgICAgICAgIGlmIChzb3VyY2VCdWZmZXIuYXVkaW9EaXNhYmxlZF8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpcy5hY3RpdmVTb3VyY2VCdWZmZXJzXy5wdXNoKHNvdXJjZUJ1ZmZlcik7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RoaXMub25QbGF5ZXJNZWRpYWNoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zb3VyY2VCdWZmZXJzLmZvckVhY2goZnVuY3Rpb24gKHNvdXJjZUJ1ZmZlcikge1xuICAgICAgICBzb3VyY2VCdWZmZXIuYXBwZW5kQXVkaW9Jbml0U2VnbWVudF8gPSB0cnVlO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF90aGlzLm9uSGxzUmVzZXRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc291cmNlQnVmZmVycy5mb3JFYWNoKGZ1bmN0aW9uIChzb3VyY2VCdWZmZXIpIHtcbiAgICAgICAgaWYgKHNvdXJjZUJ1ZmZlci50cmFuc211eGVyXykge1xuICAgICAgICAgIHNvdXJjZUJ1ZmZlci50cmFuc211eGVyXy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICBhY3Rpb246ICdyZXNldENhcHRpb25zJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RoaXMub25IbHNTZWdtZW50VGltZU1hcHBpbmdfID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBfdGhpcy5zb3VyY2VCdWZmZXJzLmZvckVhY2goZnVuY3Rpb24gKGJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gYnVmZmVyLnRpbWVNYXBwaW5nXyA9IGV2ZW50Lm1hcHBpbmc7XG4gICAgICB9KTtcbiAgICB9OyAvLyBSZS1lbWl0IE1lZGlhU291cmNlIGV2ZW50cyBvbiB0aGUgcG9seWZpbGxcblxuXG4gICAgWydzb3VyY2VvcGVuJywgJ3NvdXJjZWNsb3NlJywgJ3NvdXJjZWVuZGVkJ10uZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgICB0aGlzLm5hdGl2ZU1lZGlhU291cmNlXy5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgdGhpcy50cmlnZ2VyLmJpbmQodGhpcykpO1xuICAgIH0sIF90aGlzKTsgLy8gY2FwdHVyZSB0aGUgYXNzb2NpYXRlZCBwbGF5ZXIgd2hlbiB0aGUgTWVkaWFTb3VyY2UgaXNcbiAgICAvLyBzdWNjZXNzZnVsbHkgYXR0YWNoZWRcblxuICAgIF90aGlzLm9uKCdzb3VyY2VvcGVuJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAvLyBHZXQgdGhlIHBsYXllciB0aGlzIE1lZGlhU291cmNlIGlzIGF0dGFjaGVkIHRvXG4gICAgICB2YXIgdmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbc3JjPVwiJyArIF90aGlzLnVybF8gKyAnXCJdJyk7XG5cbiAgICAgIGlmICghdmlkZW8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5wbGF5ZXJfID0gdmlkZW9qcyQxKHZpZGVvLnBhcmVudE5vZGUpO1xuXG4gICAgICBpZiAoIV90aGlzLnBsYXllcl8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBobHMtcmVzZXQgaXMgZmlyZWQgYnkgdmlkZW9qcy5IbHMgb24gdG8gdGhlIHRlY2ggYWZ0ZXIgdGhlIG1haW4gU2VnbWVudExvYWRlclxuICAgICAgLy8gcmVzZXRzIGl0cyBzdGF0ZSBhbmQgZmx1c2hlcyB0aGUgYnVmZmVyXG5cblxuICAgICAgX3RoaXMucGxheWVyXy50ZWNoXy5vbignaGxzLXJlc2V0JywgX3RoaXMub25IbHNSZXNldF8pOyAvLyBobHMtc2VnbWVudC10aW1lLW1hcHBpbmcgaXMgZmlyZWQgYnkgdmlkZW9qcy5IbHMgb24gdG8gdGhlIHRlY2ggYWZ0ZXIgdGhlIG1haW5cbiAgICAgIC8vIFNlZ21lbnRMb2FkZXIgaW5zcGVjdHMgYW4gTVRTIHNlZ21lbnQgYW5kIGhhcyBhbiBhY2N1cmF0ZSBzdHJlYW0gdG8gZGlzcGxheVxuICAgICAgLy8gdGltZSBtYXBwaW5nXG5cblxuICAgICAgX3RoaXMucGxheWVyXy50ZWNoXy5vbignaGxzLXNlZ21lbnQtdGltZS1tYXBwaW5nJywgX3RoaXMub25IbHNTZWdtZW50VGltZU1hcHBpbmdfKTtcblxuICAgICAgaWYgKF90aGlzLnBsYXllcl8uYXVkaW9UcmFja3MgJiYgX3RoaXMucGxheWVyXy5hdWRpb1RyYWNrcygpKSB7XG4gICAgICAgIF90aGlzLnBsYXllcl8uYXVkaW9UcmFja3MoKS5vbignY2hhbmdlJywgX3RoaXMudXBkYXRlQWN0aXZlU291cmNlQnVmZmVyc18pO1xuXG4gICAgICAgIF90aGlzLnBsYXllcl8uYXVkaW9UcmFja3MoKS5vbignYWRkdHJhY2snLCBfdGhpcy51cGRhdGVBY3RpdmVTb3VyY2VCdWZmZXJzXyk7XG5cbiAgICAgICAgX3RoaXMucGxheWVyXy5hdWRpb1RyYWNrcygpLm9uKCdyZW1vdmV0cmFjaycsIF90aGlzLnVwZGF0ZUFjdGl2ZVNvdXJjZUJ1ZmZlcnNfKTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMucGxheWVyXy5vbignbWVkaWFjaGFuZ2UnLCBfdGhpcy5vblBsYXllck1lZGlhY2hhbmdlXyk7XG4gICAgfSk7XG5cbiAgICBfdGhpcy5vbignc291cmNlZW5kZWQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBkdXJhdGlvbiA9IGR1cmF0aW9uT2ZWaWRlbyhfdGhpcy5kdXJhdGlvbik7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMuc291cmNlQnVmZmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgc291cmNlYnVmZmVyID0gX3RoaXMuc291cmNlQnVmZmVyc1tpXTtcbiAgICAgICAgdmFyIGN1ZXMgPSBzb3VyY2VidWZmZXIubWV0YWRhdGFUcmFja18gJiYgc291cmNlYnVmZmVyLm1ldGFkYXRhVHJhY2tfLmN1ZXM7XG5cbiAgICAgICAgaWYgKGN1ZXMgJiYgY3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICBjdWVzW2N1ZXMubGVuZ3RoIC0gMV0uZW5kVGltZSA9IGR1cmF0aW9uO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7IC8vIGV4cGxpY2l0bHkgdGVybWluYXRlIGFueSBXZWJXb3JrZXJzIHRoYXQgd2VyZSBjcmVhdGVkXG4gICAgLy8gYnkgU291cmNlSGFuZGxlcnNcblxuXG4gICAgX3RoaXMub24oJ3NvdXJjZWNsb3NlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB0aGlzLnNvdXJjZUJ1ZmZlcnMuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlQnVmZmVyKSB7XG4gICAgICAgIGlmIChzb3VyY2VCdWZmZXIudHJhbnNtdXhlcl8pIHtcbiAgICAgICAgICBzb3VyY2VCdWZmZXIudHJhbnNtdXhlcl8udGVybWluYXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy5zb3VyY2VCdWZmZXJzLmxlbmd0aCA9IDA7XG5cbiAgICAgIGlmICghdGhpcy5wbGF5ZXJfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMucGxheWVyXy5hdWRpb1RyYWNrcyAmJiB0aGlzLnBsYXllcl8uYXVkaW9UcmFja3MoKSkge1xuICAgICAgICB0aGlzLnBsYXllcl8uYXVkaW9UcmFja3MoKS5vZmYoJ2NoYW5nZScsIHRoaXMudXBkYXRlQWN0aXZlU291cmNlQnVmZmVyc18pO1xuICAgICAgICB0aGlzLnBsYXllcl8uYXVkaW9UcmFja3MoKS5vZmYoJ2FkZHRyYWNrJywgdGhpcy51cGRhdGVBY3RpdmVTb3VyY2VCdWZmZXJzXyk7XG4gICAgICAgIHRoaXMucGxheWVyXy5hdWRpb1RyYWNrcygpLm9mZigncmVtb3ZldHJhY2snLCB0aGlzLnVwZGF0ZUFjdGl2ZVNvdXJjZUJ1ZmZlcnNfKTtcbiAgICAgIH0gLy8gV2UgY2FuIG9ubHkgY2hhbmdlIHRoaXMgaWYgdGhlIHBsYXllciBoYXNuJ3QgYmVlbiBkaXNwb3NlZCBvZiB5ZXRcbiAgICAgIC8vIGJlY2F1c2UgYG9mZmAgZXZlbnR1YWxseSB0cmllcyB0byB1c2UgdGhlIGVsXyBwcm9wZXJ0eS4gSWYgaXQgaGFzXG4gICAgICAvLyBiZWVuIGRpc3Bvc2VkIG9mLCB0aGVuIGRvbid0IHdvcnJ5IGFib3V0IGl0IGJlY2F1c2UgdGhlcmUgYXJlIG5vXG4gICAgICAvLyBldmVudCBoYW5kbGVycyBsZWZ0IHRvIHVuYmluZCBhbnl3YXlcblxuXG4gICAgICBpZiAodGhpcy5wbGF5ZXJfLmVsXykge1xuICAgICAgICB0aGlzLnBsYXllcl8ub2ZmKCdtZWRpYWNoYW5nZScsIHRoaXMub25QbGF5ZXJNZWRpYWNoYW5nZV8pO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wbGF5ZXJfLnRlY2hfICYmIHRoaXMucGxheWVyXy50ZWNoXy5lbF8pIHtcbiAgICAgICAgdGhpcy5wbGF5ZXJfLnRlY2hfLm9mZignaGxzLXJlc2V0JywgdGhpcy5vbkhsc1Jlc2V0Xyk7XG4gICAgICAgIHRoaXMucGxheWVyXy50ZWNoXy5vZmYoJ2hscy1zZWdtZW50LXRpbWUtbWFwcGluZycsIHRoaXMub25IbHNTZWdtZW50VGltZU1hcHBpbmdfKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKipcbiAgICogQWRkIGEgcmFuZ2UgdGhhdCB0aGF0IGNhbiBub3cgYmUgc2Vla2VkIHRvLlxuICAgKlxuICAgKiBAcGFyYW0ge0RvdWJsZX0gc3RhcnQgd2hlcmUgdG8gc3RhcnQgdGhlIGFkZGl0aW9uXG4gICAqIEBwYXJhbSB7RG91YmxlfSBlbmQgd2hlcmUgdG8gZW5kIHRoZSBhZGRpdGlvblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIGNyZWF0ZUNsYXNzKEh0bWxNZWRpYVNvdXJjZSwgW3tcbiAgICBrZXk6ICdhZGRTZWVrYWJsZVJhbmdlXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFNlZWthYmxlUmFuZ2VfKHN0YXJ0LCBlbmQpIHtcbiAgICAgIHZhciBlcnJvciA9IHZvaWQgMDtcblxuICAgICAgaWYgKHRoaXMuZHVyYXRpb24gIT09IEluZmluaXR5KSB7XG4gICAgICAgIGVycm9yID0gbmV3IEVycm9yKCdNZWRpYVNvdXJjZS5hZGRTZWVrYWJsZVJhbmdlKCkgY2FuIG9ubHkgYmUgaW52b2tlZCAnICsgJ3doZW4gdGhlIGR1cmF0aW9uIGlzIEluZmluaXR5Jyk7XG4gICAgICAgIGVycm9yLm5hbWUgPSAnSW52YWxpZFN0YXRlRXJyb3InO1xuICAgICAgICBlcnJvci5jb2RlID0gMTE7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuXG4gICAgICBpZiAoZW5kID4gdGhpcy5uYXRpdmVNZWRpYVNvdXJjZV8uZHVyYXRpb24gfHwgaXNOYU4odGhpcy5uYXRpdmVNZWRpYVNvdXJjZV8uZHVyYXRpb24pKSB7XG4gICAgICAgIHRoaXMubmF0aXZlTWVkaWFTb3VyY2VfLmR1cmF0aW9uID0gZW5kO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgYSBzb3VyY2UgYnVmZmVyIHRvIHRoZSBtZWRpYSBzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTWVkaWFTb3VyY2UvYWRkU291cmNlQnVmZmVyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgdGhlIGNvbnRlbnQtdHlwZSBvZiB0aGUgY29udGVudFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gdGhlIGNyZWF0ZWQgc291cmNlIGJ1ZmZlclxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdhZGRTb3VyY2VCdWZmZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRTb3VyY2VCdWZmZXIodHlwZSkge1xuICAgICAgdmFyIGJ1ZmZlciA9IHZvaWQgMDtcbiAgICAgIHZhciBwYXJzZWRUeXBlID0gcGFyc2VDb250ZW50VHlwZSh0eXBlKTsgLy8gQ3JlYXRlIGEgVmlydHVhbFNvdXJjZUJ1ZmZlciB0byB0cmFuc211eCBNUEVHLTIgdHJhbnNwb3J0XG4gICAgICAvLyBzdHJlYW0gc2VnbWVudHMgaW50byBmcmFnbWVudGVkIE1QNHNcblxuICAgICAgaWYgKC9eKHZpZGVvfGF1ZGlvKVxcL21wMnQkL2kudGVzdChwYXJzZWRUeXBlLnR5cGUpKSB7XG4gICAgICAgIHZhciBjb2RlY3MgPSBbXTtcblxuICAgICAgICBpZiAocGFyc2VkVHlwZS5wYXJhbWV0ZXJzICYmIHBhcnNlZFR5cGUucGFyYW1ldGVycy5jb2RlY3MpIHtcbiAgICAgICAgICBjb2RlY3MgPSBwYXJzZWRUeXBlLnBhcmFtZXRlcnMuY29kZWNzLnNwbGl0KCcsJyk7XG4gICAgICAgICAgY29kZWNzID0gdHJhbnNsYXRlTGVnYWN5Q29kZWNzKGNvZGVjcyk7XG4gICAgICAgICAgY29kZWNzID0gY29kZWNzLmZpbHRlcihmdW5jdGlvbiAoY29kZWMpIHtcbiAgICAgICAgICAgIHJldHVybiBpc0F1ZGlvQ29kZWMoY29kZWMpIHx8IGlzVmlkZW9Db2RlYyhjb2RlYyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29kZWNzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGNvZGVjcyA9IFsnYXZjMS40ZDQwMGQnLCAnbXA0YS40MC4yJ107XG4gICAgICAgIH1cblxuICAgICAgICBidWZmZXIgPSBuZXcgVmlydHVhbFNvdXJjZUJ1ZmZlcih0aGlzLCBjb2RlY3MpO1xuXG4gICAgICAgIGlmICh0aGlzLnNvdXJjZUJ1ZmZlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgLy8gSWYgYW5vdGhlciBWaXJ0dWFsU291cmNlQnVmZmVyIGFscmVhZHkgZXhpc3RzLCB0aGVuIHdlIGFyZSBjcmVhdGluZyBhXG4gICAgICAgICAgLy8gU291cmNlQnVmZmVyIGZvciBhbiBhbHRlcm5hdGUgYXVkaW8gdHJhY2sgYW5kIHRoZXJlZm9yZSB3ZSBrbm93IHRoYXRcbiAgICAgICAgICAvLyB0aGUgc291cmNlIGhhcyBib3RoIGFuIGF1ZGlvIGFuZCB2aWRlbyB0cmFjay5cbiAgICAgICAgICAvLyBUaGF0IG1lYW5zIHdlIHNob3VsZCB0cmlnZ2VyIHRoZSBtYW51YWwgY3JlYXRpb24gb2YgdGhlIHJlYWxcbiAgICAgICAgICAvLyBTb3VyY2VCdWZmZXJzIGluc3RlYWQgb2Ygd2FpdGluZyBmb3IgdGhlIHRyYW5zbXV4ZXIgdG8gcmV0dXJuIGRhdGFcbiAgICAgICAgICB0aGlzLnNvdXJjZUJ1ZmZlcnNbMF0uY3JlYXRlUmVhbFNvdXJjZUJ1ZmZlcnNfKCk7XG4gICAgICAgICAgYnVmZmVyLmNyZWF0ZVJlYWxTb3VyY2VCdWZmZXJzXygpOyAvLyBBdXRvbWF0aWNhbGx5IGRpc2FibGUgdGhlIGF1ZGlvIG9uIHRoZSBmaXJzdCBzb3VyY2UgYnVmZmVyIGlmXG4gICAgICAgICAgLy8gYSBzZWNvbmQgc291cmNlIGJ1ZmZlciBpcyBldmVyIGNyZWF0ZWRcblxuICAgICAgICAgIHRoaXMuc291cmNlQnVmZmVyc1swXS5hdWRpb0Rpc2FibGVkXyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGRlbGVnYXRlIHRvIHRoZSBuYXRpdmUgaW1wbGVtZW50YXRpb25cbiAgICAgICAgYnVmZmVyID0gdGhpcy5uYXRpdmVNZWRpYVNvdXJjZV8uYWRkU291cmNlQnVmZmVyKHR5cGUpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNvdXJjZUJ1ZmZlcnMucHVzaChidWZmZXIpO1xuICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIEh0bWxNZWRpYVNvdXJjZTtcbn0odmlkZW9qcyQxLkV2ZW50VGFyZ2V0KTtcbi8qKlxuICogQGZpbGUgdmlkZW9qcy1jb250cmliLW1lZGlhLXNvdXJjZXMuanNcbiAqL1xuXG5cbnZhciB1cmxDb3VudCA9IDA7IC8vIC0tLS0tLS0tLS0tLVxuLy8gTWVkaWEgU291cmNlXG4vLyAtLS0tLS0tLS0tLS1cbi8vIHN0b3JlIHJlZmVyZW5jZXMgdG8gdGhlIG1lZGlhIHNvdXJjZXMgc28gdGhleSBjYW4gYmUgY29ubmVjdGVkXG4vLyB0byBhIHZpZGVvIGVsZW1lbnQgKGEgc3dmIG9iamVjdClcbi8vIFRPRE86IGNhbiB3ZSBzdG9yZSB0aGlzIHNvbWV3aGVyZSBsb2NhbCB0byB0aGlzIG1vZHVsZT9cblxudmlkZW9qcyQxLm1lZGlhU291cmNlcyA9IHt9O1xuLyoqXG4gKiBQcm92aWRlIGEgbWV0aG9kIGZvciBhIHN3ZiBvYmplY3QgdG8gbm90aWZ5IEpTIHRoYXQgYVxuICogbWVkaWEgc291cmNlIGlzIG5vdyBvcGVuLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtc09iamVjdFVSTCBzdHJpbmcgcmVmZXJlbmNpbmcgdGhlIE1TRSBPYmplY3QgVVJMXG4gKiBAcGFyYW0ge1N0cmluZ30gc3dmSWQgdGhlIHN3ZiBpZFxuICovXG5cbnZhciBvcGVuID0gZnVuY3Rpb24gb3Blbihtc09iamVjdFVSTCwgc3dmSWQpIHtcbiAgdmFyIG1lZGlhU291cmNlID0gdmlkZW9qcyQxLm1lZGlhU291cmNlc1ttc09iamVjdFVSTF07XG5cbiAgaWYgKG1lZGlhU291cmNlKSB7XG4gICAgbWVkaWFTb3VyY2UudHJpZ2dlcih7XG4gICAgICB0eXBlOiAnc291cmNlb3BlbicsXG4gICAgICBzd2ZJZDogc3dmSWRcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01lZGlhIFNvdXJjZSBub3QgZm91bmQgKFZpZGVvLmpzKScpO1xuICB9XG59O1xuLyoqXG4gKiBDaGVjayB0byBzZWUgaWYgdGhlIG5hdGl2ZSBNZWRpYVNvdXJjZSBvYmplY3QgZXhpc3RzIGFuZCBzdXBwb3J0c1xuICogYW4gTVA0IGNvbnRhaW5lciB3aXRoIGJvdGggSC4yNjQgdmlkZW8gYW5kIEFBQy1MQyBhdWRpby5cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufSBpZiAgbmF0aXZlIG1lZGlhIHNvdXJjZXMgYXJlIHN1cHBvcnRlZFxuICovXG5cblxudmFyIHN1cHBvcnRzTmF0aXZlTWVkaWFTb3VyY2VzID0gZnVuY3Rpb24gc3VwcG9ydHNOYXRpdmVNZWRpYVNvdXJjZXMoKSB7XG4gIHJldHVybiAhIXdpbmRvdyQxLk1lZGlhU291cmNlICYmICEhd2luZG93JDEuTWVkaWFTb3VyY2UuaXNUeXBlU3VwcG9ydGVkICYmIHdpbmRvdyQxLk1lZGlhU291cmNlLmlzVHlwZVN1cHBvcnRlZCgndmlkZW8vbXA0O2NvZGVjcz1cImF2YzEuNGQ0MDBkLG1wNGEuNDAuMlwiJyk7XG59O1xuLyoqXG4gKiBBbiBlbXVsYXRpb24gb2YgdGhlIE1lZGlhU291cmNlIEFQSSBzbyB0aGF0IHdlIGNhbiBzdXBwb3J0XG4gKiBuYXRpdmUgYW5kIG5vbi1uYXRpdmUgZnVuY3Rpb25hbGl0eS4gcmV0dXJucyBhbiBpbnN0YW5jZSBvZlxuICogSHRtbE1lZGlhU291cmNlLlxuICpcbiAqIEBsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9NZWRpYVNvdXJjZS9NZWRpYVNvdXJjZVxuICovXG5cblxudmFyIE1lZGlhU291cmNlID0gZnVuY3Rpb24gTWVkaWFTb3VyY2UoKSB7XG4gIHRoaXMuTWVkaWFTb3VyY2UgPSB7XG4gICAgb3Blbjogb3BlbixcbiAgICBzdXBwb3J0c05hdGl2ZU1lZGlhU291cmNlczogc3VwcG9ydHNOYXRpdmVNZWRpYVNvdXJjZXNcbiAgfTtcblxuICBpZiAoc3VwcG9ydHNOYXRpdmVNZWRpYVNvdXJjZXMoKSkge1xuICAgIHJldHVybiBuZXcgSHRtbE1lZGlhU291cmNlKCk7XG4gIH1cblxuICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCB1c2UgY3JlYXRlIGEgdmlydHVhbCBNZWRpYVNvdXJjZSBmb3IgdGhpcyB2aWRlbycpO1xufTtcblxuTWVkaWFTb3VyY2Uub3BlbiA9IG9wZW47XG5NZWRpYVNvdXJjZS5zdXBwb3J0c05hdGl2ZU1lZGlhU291cmNlcyA9IHN1cHBvcnRzTmF0aXZlTWVkaWFTb3VyY2VzO1xuLyoqXG4gKiBBIHdyYXBwZXIgYXJvdW5kIHRoZSBuYXRpdmUgVVJMIGZvciBvdXIgTVNFIG9iamVjdFxuICogaW1wbGVtZW50YXRpb24sIHRoaXMgb2JqZWN0IGlzIGV4cG9zZWQgdW5kZXIgdmlkZW9qcy5VUkxcbiAqXG4gKiBAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvVVJML1VSTFxuICovXG5cbnZhciBVUkwkMSA9IHtcbiAgLyoqXG4gICAqIEEgd3JhcHBlciBhcm91bmQgdGhlIG5hdGl2ZSBjcmVhdGVPYmplY3RVUkwgZm9yIG91ciBvYmplY3RzLlxuICAgKiBUaGlzIGZ1bmN0aW9uIG1hcHMgYSBuYXRpdmUgb3IgZW11bGF0ZWQgbWVkaWFTb3VyY2UgdG8gYSBibG9iXG4gICAqIHVybCBzbyB0aGF0IGl0IGNhbiBiZSBsb2FkZWQgaW50byB2aWRlby5qc1xuICAgKlxuICAgKiBAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvVVJML2NyZWF0ZU9iamVjdFVSTFxuICAgKiBAcGFyYW0ge01lZGlhU291cmNlfSBvYmplY3QgdGhlIG9iamVjdCB0byBjcmVhdGUgYSBibG9iIHVybCB0b1xuICAgKi9cbiAgY3JlYXRlT2JqZWN0VVJMOiBmdW5jdGlvbiBjcmVhdGVPYmplY3RVUkwob2JqZWN0KSB7XG4gICAgdmFyIG9iamVjdFVybFByZWZpeCA9ICdibG9iOnZqcy1tZWRpYS1zb3VyY2UvJztcbiAgICB2YXIgdXJsID0gdm9pZCAwOyAvLyB1c2UgdGhlIG5hdGl2ZSBNZWRpYVNvdXJjZSB0byBnZW5lcmF0ZSBhbiBvYmplY3QgVVJMXG5cbiAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgSHRtbE1lZGlhU291cmNlKSB7XG4gICAgICB1cmwgPSB3aW5kb3ckMS5VUkwuY3JlYXRlT2JqZWN0VVJMKG9iamVjdC5uYXRpdmVNZWRpYVNvdXJjZV8pO1xuICAgICAgb2JqZWN0LnVybF8gPSB1cmw7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH0gLy8gaWYgdGhlIG9iamVjdCBpc24ndCBhbiBlbXVsYXRlZCBNZWRpYVNvdXJjZSwgZGVsZWdhdGUgdG8gdGhlXG4gICAgLy8gbmF0aXZlIGltcGxlbWVudGF0aW9uXG5cblxuICAgIGlmICghKG9iamVjdCBpbnN0YW5jZW9mIEh0bWxNZWRpYVNvdXJjZSkpIHtcbiAgICAgIHVybCA9IHdpbmRvdyQxLlVSTC5jcmVhdGVPYmplY3RVUkwob2JqZWN0KTtcbiAgICAgIG9iamVjdC51cmxfID0gdXJsO1xuICAgICAgcmV0dXJuIHVybDtcbiAgICB9IC8vIGJ1aWxkIGEgVVJMIHRoYXQgY2FuIGJlIHVzZWQgdG8gbWFwIGJhY2sgdG8gdGhlIGVtdWxhdGVkXG4gICAgLy8gTWVkaWFTb3VyY2VcblxuXG4gICAgdXJsID0gb2JqZWN0VXJsUHJlZml4ICsgdXJsQ291bnQ7XG4gICAgdXJsQ291bnQrKzsgLy8gc2V0dXAgdGhlIG1hcHBpbmcgYmFjayB0byBvYmplY3RcblxuICAgIHZpZGVvanMkMS5tZWRpYVNvdXJjZXNbdXJsXSA9IG9iamVjdDtcbiAgICByZXR1cm4gdXJsO1xuICB9XG59O1xudmlkZW9qcyQxLk1lZGlhU291cmNlID0gTWVkaWFTb3VyY2U7XG52aWRlb2pzJDEuVVJMID0gVVJMJDE7XG52YXIgRXZlbnRUYXJnZXQkMSQxID0gdmlkZW9qcyQxLkV2ZW50VGFyZ2V0LFxuICAgIG1lcmdlT3B0aW9ucyQyID0gdmlkZW9qcyQxLm1lcmdlT3B0aW9ucztcbi8qKlxuICogUmV0dXJucyBhIG5ldyBtYXN0ZXIgbWFuaWZlc3QgdGhhdCBpcyB0aGUgcmVzdWx0IG9mIG1lcmdpbmcgYW4gdXBkYXRlZCBtYXN0ZXIgbWFuaWZlc3RcbiAqIGludG8gdGhlIG9yaWdpbmFsIHZlcnNpb24uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9sZE1hc3RlclxuICogICAgICAgIFRoZSBvbGQgcGFyc2VkIG1wZCBvYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBuZXdNYXN0ZXJcbiAqICAgICAgICBUaGUgdXBkYXRlZCBwYXJzZWQgbXBkIG9iamVjdFxuICogQHJldHVybiB7T2JqZWN0fVxuICogICAgICAgICBBIG5ldyBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBvcmlnaW5hbCBtYXN0ZXIgbWFuaWZlc3Qgd2l0aCB0aGUgdXBkYXRlZCBtZWRpYVxuICogICAgICAgICBwbGF5bGlzdHMgbWVyZ2VkIGluXG4gKi9cblxudmFyIHVwZGF0ZU1hc3RlciQxID0gZnVuY3Rpb24gdXBkYXRlTWFzdGVyJCQxKG9sZE1hc3RlciwgbmV3TWFzdGVyKSB7XG4gIHZhciBub0NoYW5nZXMgPSB2b2lkIDA7XG4gIHZhciB1cGRhdGUgPSBtZXJnZU9wdGlvbnMkMihvbGRNYXN0ZXIsIHtcbiAgICAvLyBUaGVzZSBhcmUgdG9wIGxldmVsIHByb3BlcnRpZXMgdGhhdCBjYW4gYmUgdXBkYXRlZFxuICAgIGR1cmF0aW9uOiBuZXdNYXN0ZXIuZHVyYXRpb24sXG4gICAgbWluaW11bVVwZGF0ZVBlcmlvZDogbmV3TWFzdGVyLm1pbmltdW1VcGRhdGVQZXJpb2RcbiAgfSk7IC8vIEZpcnN0IHVwZGF0ZSB0aGUgcGxheWxpc3RzIGluIHBsYXlsaXN0IGxpc3RcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld01hc3Rlci5wbGF5bGlzdHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcGxheWxpc3RVcGRhdGUgPSB1cGRhdGVNYXN0ZXIodXBkYXRlLCBuZXdNYXN0ZXIucGxheWxpc3RzW2ldKTtcblxuICAgIGlmIChwbGF5bGlzdFVwZGF0ZSkge1xuICAgICAgdXBkYXRlID0gcGxheWxpc3RVcGRhdGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vQ2hhbmdlcyA9IHRydWU7XG4gICAgfVxuICB9IC8vIFRoZW4gdXBkYXRlIG1lZGlhIGdyb3VwIHBsYXlsaXN0c1xuXG5cbiAgZm9yRWFjaE1lZGlhR3JvdXAobmV3TWFzdGVyLCBmdW5jdGlvbiAocHJvcGVydGllcywgdHlwZSwgZ3JvdXAsIGxhYmVsKSB7XG4gICAgaWYgKHByb3BlcnRpZXMucGxheWxpc3RzICYmIHByb3BlcnRpZXMucGxheWxpc3RzLmxlbmd0aCkge1xuICAgICAgdmFyIHVyaSA9IHByb3BlcnRpZXMucGxheWxpc3RzWzBdLnVyaTtcblxuICAgICAgdmFyIF9wbGF5bGlzdFVwZGF0ZSA9IHVwZGF0ZU1hc3Rlcih1cGRhdGUsIHByb3BlcnRpZXMucGxheWxpc3RzWzBdKTtcblxuICAgICAgaWYgKF9wbGF5bGlzdFVwZGF0ZSkge1xuICAgICAgICB1cGRhdGUgPSBfcGxheWxpc3RVcGRhdGU7IC8vIHVwZGF0ZSB0aGUgcGxheWxpc3QgcmVmZXJlbmNlIHdpdGhpbiBtZWRpYSBncm91cHNcblxuICAgICAgICB1cGRhdGUubWVkaWFHcm91cHNbdHlwZV1bZ3JvdXBdW2xhYmVsXS5wbGF5bGlzdHNbMF0gPSB1cGRhdGUucGxheWxpc3RzW3VyaV07XG4gICAgICAgIG5vQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgaWYgKG5vQ2hhbmdlcykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIHVwZGF0ZTtcbn07XG5cbnZhciBEYXNoUGxheWxpc3RMb2FkZXIgPSBmdW5jdGlvbiAoX0V2ZW50VGFyZ2V0KSB7XG4gIGluaGVyaXRzKERhc2hQbGF5bGlzdExvYWRlciwgX0V2ZW50VGFyZ2V0KTsgLy8gRGFzaFBsYXlsaXN0TG9hZGVyIG11c3QgYWNjZXB0IGVpdGhlciBhIHNyYyB1cmwgb3IgYSBwbGF5bGlzdCBiZWNhdXNlIHN1YnNlcXVlbnRcbiAgLy8gcGxheWxpc3QgbG9hZGVyIHNldHVwcyBmcm9tIG1lZGlhIGdyb3VwcyB3aWxsIGV4cGVjdCB0byBiZSBhYmxlIHRvIHBhc3MgYSBwbGF5bGlzdFxuICAvLyAoc2luY2UgdGhlcmUgYXJlbid0IGV4dGVybmFsIFVSTHMgdG8gbWVkaWEgcGxheWxpc3RzIHdpdGggREFTSClcblxuICBmdW5jdGlvbiBEYXNoUGxheWxpc3RMb2FkZXIoc3JjVXJsT3JQbGF5bGlzdCwgaGxzKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgIHZhciBtYXN0ZXJQbGF5bGlzdExvYWRlciA9IGFyZ3VtZW50c1szXTtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBEYXNoUGxheWxpc3RMb2FkZXIpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRGFzaFBsYXlsaXN0TG9hZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRGFzaFBsYXlsaXN0TG9hZGVyKSkuY2FsbCh0aGlzKSk7XG5cbiAgICB2YXIgX29wdGlvbnMkd2l0aENyZWRlbnRpID0gb3B0aW9ucy53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgIHdpdGhDcmVkZW50aWFscyA9IF9vcHRpb25zJHdpdGhDcmVkZW50aSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfb3B0aW9ucyR3aXRoQ3JlZGVudGksXG4gICAgICAgIF9vcHRpb25zJGhhbmRsZU1hbmlmZSA9IG9wdGlvbnMuaGFuZGxlTWFuaWZlc3RSZWRpcmVjdHMsXG4gICAgICAgIGhhbmRsZU1hbmlmZXN0UmVkaXJlY3RzID0gX29wdGlvbnMkaGFuZGxlTWFuaWZlID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9vcHRpb25zJGhhbmRsZU1hbmlmZTtcbiAgICBfdGhpcy5obHNfID0gaGxzO1xuICAgIF90aGlzLndpdGhDcmVkZW50aWFscyA9IHdpdGhDcmVkZW50aWFscztcbiAgICBfdGhpcy5oYW5kbGVNYW5pZmVzdFJlZGlyZWN0cyA9IGhhbmRsZU1hbmlmZXN0UmVkaXJlY3RzO1xuXG4gICAgaWYgKCFzcmNVcmxPclBsYXlsaXN0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Egbm9uLWVtcHR5IHBsYXlsaXN0IFVSTCBvciBwbGF5bGlzdCBpcyByZXF1aXJlZCcpO1xuICAgIH0gLy8gZXZlbnQgbmFtaW5nP1xuXG5cbiAgICBfdGhpcy5vbignbWluaW11bVVwZGF0ZVBlcmlvZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnJlZnJlc2hYbWxfKCk7XG4gICAgfSk7IC8vIGxpdmUgcGxheWxpc3Qgc3RhbGVuZXNzIHRpbWVvdXRcblxuXG4gICAgX3RoaXMub24oJ21lZGlhdXBkYXRldGltZW91dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnJlZnJlc2hNZWRpYV8oKTtcbiAgICB9KTtcblxuICAgIF90aGlzLnN0YXRlID0gJ0hBVkVfTk9USElORyc7XG4gICAgX3RoaXMubG9hZGVkUGxheWxpc3RzXyA9IHt9OyAvLyBpbml0aWFsaXplIHRoZSBsb2FkZXIgc3RhdGVcbiAgICAvLyBUaGUgbWFzdGVyUGxheWxpc3RMb2FkZXIgd2lsbCBiZSBjcmVhdGVkIHdpdGggYSBzdHJpbmdcblxuICAgIGlmICh0eXBlb2Ygc3JjVXJsT3JQbGF5bGlzdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIF90aGlzLnNyY1VybCA9IHNyY1VybE9yUGxheWxpc3Q7XG4gICAgICByZXR1cm4gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcyk7XG4gICAgfVxuXG4gICAgX3RoaXMuc2V0dXBDaGlsZExvYWRlcihtYXN0ZXJQbGF5bGlzdExvYWRlciwgc3JjVXJsT3JQbGF5bGlzdCk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhEYXNoUGxheWxpc3RMb2FkZXIsIFt7XG4gICAga2V5OiAnc2V0dXBDaGlsZExvYWRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwQ2hpbGRMb2FkZXIobWFzdGVyUGxheWxpc3RMb2FkZXIsIHBsYXlsaXN0KSB7XG4gICAgICB0aGlzLm1hc3RlclBsYXlsaXN0TG9hZGVyXyA9IG1hc3RlclBsYXlsaXN0TG9hZGVyO1xuICAgICAgdGhpcy5jaGlsZFBsYXlsaXN0XyA9IHBsYXlsaXN0O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2Rpc3Bvc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgdGhpcy5zdG9wUmVxdWVzdCgpO1xuICAgICAgdGhpcy5sb2FkZWRQbGF5bGlzdHNfID0ge307XG4gICAgICB3aW5kb3ckMS5jbGVhclRpbWVvdXQodGhpcy5tZWRpYVVwZGF0ZVRpbWVvdXQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2hhc1BlbmRpbmdSZXF1ZXN0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFzUGVuZGluZ1JlcXVlc3QoKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0IHx8IHRoaXMubWVkaWFSZXF1ZXN0XztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzdG9wUmVxdWVzdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3BSZXF1ZXN0KCkge1xuICAgICAgaWYgKHRoaXMucmVxdWVzdCkge1xuICAgICAgICB2YXIgb2xkUmVxdWVzdCA9IHRoaXMucmVxdWVzdDtcbiAgICAgICAgdGhpcy5yZXF1ZXN0ID0gbnVsbDtcbiAgICAgICAgb2xkUmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICBvbGRSZXF1ZXN0LmFib3J0KCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnbWVkaWEnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtZWRpYShwbGF5bGlzdCkge1xuICAgICAgLy8gZ2V0dGVyXG4gICAgICBpZiAoIXBsYXlsaXN0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lZGlhXztcbiAgICAgIH0gLy8gc2V0dGVyXG5cblxuICAgICAgaWYgKHRoaXMuc3RhdGUgPT09ICdIQVZFX05PVEhJTkcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHN3aXRjaCBtZWRpYSBwbGF5bGlzdCBmcm9tICcgKyB0aGlzLnN0YXRlKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0YXJ0aW5nU3RhdGUgPSB0aGlzLnN0YXRlOyAvLyBmaW5kIHRoZSBwbGF5bGlzdCBvYmplY3QgaWYgdGhlIHRhcmdldCBwbGF5bGlzdCBoYXMgYmVlbiBzcGVjaWZpZWQgYnkgVVJJXG5cbiAgICAgIGlmICh0eXBlb2YgcGxheWxpc3QgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICghdGhpcy5tYXN0ZXIucGxheWxpc3RzW3BsYXlsaXN0XSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBwbGF5bGlzdCBVUkk6ICcgKyBwbGF5bGlzdCk7XG4gICAgICAgIH1cblxuICAgICAgICBwbGF5bGlzdCA9IHRoaXMubWFzdGVyLnBsYXlsaXN0c1twbGF5bGlzdF07XG4gICAgICB9XG5cbiAgICAgIHZhciBtZWRpYUNoYW5nZSA9ICF0aGlzLm1lZGlhXyB8fCBwbGF5bGlzdC51cmkgIT09IHRoaXMubWVkaWFfLnVyaTsgLy8gc3dpdGNoIHRvIHByZXZpb3VzbHkgbG9hZGVkIHBsYXlsaXN0cyBpbW1lZGlhdGVseVxuXG4gICAgICBpZiAobWVkaWFDaGFuZ2UgJiYgdGhpcy5sb2FkZWRQbGF5bGlzdHNfW3BsYXlsaXN0LnVyaV0gJiYgdGhpcy5sb2FkZWRQbGF5bGlzdHNfW3BsYXlsaXN0LnVyaV0uZW5kTGlzdCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gJ0hBVkVfTUVUQURBVEEnO1xuICAgICAgICB0aGlzLm1lZGlhXyA9IHBsYXlsaXN0OyAvLyB0cmlnZ2VyIG1lZGlhIGNoYW5nZSBpZiB0aGUgYWN0aXZlIG1lZGlhIGhhcyBiZWVuIHVwZGF0ZWRcblxuICAgICAgICBpZiAobWVkaWFDaGFuZ2UpIHtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ21lZGlhY2hhbmdpbmcnKTtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ21lZGlhY2hhbmdlJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIHN3aXRjaGluZyB0byB0aGUgYWN0aXZlIHBsYXlsaXN0IGlzIGEgbm8tb3BcblxuXG4gICAgICBpZiAoIW1lZGlhQ2hhbmdlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gc3dpdGNoaW5nIGZyb20gYW4gYWxyZWFkeSBsb2FkZWQgcGxheWxpc3RcblxuXG4gICAgICBpZiAodGhpcy5tZWRpYV8pIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdtZWRpYWNoYW5naW5nJyk7XG4gICAgICB9IC8vIFRPRE86IGNoZWNrIGZvciBzaWR4IGhlcmVcbiAgICAgIC8vIENvbnRpbnVlIGFzeW5jaHJvbm91c2x5IGlmIHRoZXJlIGlzIG5vIHNpZHhcbiAgICAgIC8vIHdhaXQgb25lIHRpY2sgdG8gYWxsb3cgaGF2ZU1hc3RlciB0byBydW4gZmlyc3Qgb24gYSBjaGlsZCBsb2FkZXJcblxuXG4gICAgICB0aGlzLm1lZGlhUmVxdWVzdF8gPSB3aW5kb3ckMS5zZXRUaW1lb3V0KHRoaXMuaGF2ZU1ldGFkYXRhLmJpbmQodGhpcywge1xuICAgICAgICBzdGFydGluZ1N0YXRlOiBzdGFydGluZ1N0YXRlLFxuICAgICAgICBwbGF5bGlzdDogcGxheWxpc3RcbiAgICAgIH0pLCAwKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdoYXZlTWV0YWRhdGEnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYXZlTWV0YWRhdGEoX3JlZikge1xuICAgICAgdmFyIHN0YXJ0aW5nU3RhdGUgPSBfcmVmLnN0YXJ0aW5nU3RhdGUsXG4gICAgICAgICAgcGxheWxpc3QgPSBfcmVmLnBsYXlsaXN0O1xuICAgICAgdGhpcy5zdGF0ZSA9ICdIQVZFX01FVEFEQVRBJztcbiAgICAgIHRoaXMubWVkaWFfID0gcGxheWxpc3Q7XG4gICAgICB0aGlzLmxvYWRlZFBsYXlsaXN0c19bcGxheWxpc3QudXJpXSA9IHBsYXlsaXN0O1xuICAgICAgdGhpcy5tZWRpYVJlcXVlc3RfID0gbnVsbDsgLy8gVGhpcyB3aWxsIHRyaWdnZXIgbG9hZGVkcGxheWxpc3RcblxuICAgICAgdGhpcy5yZWZyZXNoTWVkaWFfKCk7IC8vIGZpcmUgbG9hZGVkbWV0YWRhdGEgdGhlIGZpcnN0IHRpbWUgYSBtZWRpYSBwbGF5bGlzdCBpcyBsb2FkZWRcbiAgICAgIC8vIHRvIHJlc29sdmUgc2V0dXAgb2YgbWVkaWEgZ3JvdXBzXG5cbiAgICAgIGlmIChzdGFydGluZ1N0YXRlID09PSAnSEFWRV9NQVNURVInKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcignbG9hZGVkbWV0YWRhdGEnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHRyaWdnZXIgbWVkaWEgY2hhbmdlIGlmIHRoZSBhY3RpdmUgbWVkaWEgaGFzIGJlZW4gdXBkYXRlZFxuICAgICAgICB0aGlzLnRyaWdnZXIoJ21lZGlhY2hhbmdlJyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncGF1c2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICAgIHRoaXMuc3RvcFJlcXVlc3QoKTtcbiAgICAgIHdpbmRvdyQxLmNsZWFyVGltZW91dCh0aGlzLm1lZGlhVXBkYXRlVGltZW91dCk7XG5cbiAgICAgIGlmICh0aGlzLnN0YXRlID09PSAnSEFWRV9OT1RISU5HJykge1xuICAgICAgICAvLyBJZiB3ZSBwYXVzZSB0aGUgbG9hZGVyIGJlZm9yZSBhbnkgZGF0YSBoYXMgYmVlbiByZXRyaWV2ZWQsIGl0cyBhcyBpZiB3ZSBuZXZlclxuICAgICAgICAvLyBzdGFydGVkLCBzbyByZXNldCB0byBhbiB1bnN0YXJ0ZWQgc3RhdGUuXG4gICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2xvYWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkKGlzRmluYWxSZW5kaXRpb24pIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB3aW5kb3ckMS5jbGVhclRpbWVvdXQodGhpcy5tZWRpYVVwZGF0ZVRpbWVvdXQpO1xuICAgICAgdmFyIG1lZGlhID0gdGhpcy5tZWRpYSgpO1xuXG4gICAgICBpZiAoaXNGaW5hbFJlbmRpdGlvbikge1xuICAgICAgICB2YXIgZGVsYXkgPSBtZWRpYSA/IG1lZGlhLnRhcmdldER1cmF0aW9uIC8gMiAqIDEwMDAgOiA1ICogMTAwMDtcbiAgICAgICAgdGhpcy5tZWRpYVVwZGF0ZVRpbWVvdXQgPSB3aW5kb3ckMS5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMyLmxvYWQoKTtcbiAgICAgICAgfSwgZGVsYXkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIGJlY2F1c2UgdGhlIHBsYXlsaXN0cyBhcmUgaW50ZXJuYWwgdG8gdGhlIG1hbmlmZXN0LCBsb2FkIHNob3VsZCBlaXRoZXIgbG9hZCB0aGVcbiAgICAgIC8vIG1haW4gbWFuaWZlc3QsIG9yIGRvIG5vdGhpbmcgYnV0IHRyaWdnZXIgYW4gZXZlbnRcblxuXG4gICAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy50cmlnZ2VyKCdsb2FkZWRwbGF5bGlzdCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGhlIG1hc3RlciB4bWwgc3RyaW5nIGFuZCB1cGRhdGVzIHBsYXlsaXN0IHVyaSByZWZlcmVuY2VzXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogICAgICAgICBUaGUgcGFyc2VkIG1wZCBtYW5pZmVzdCBvYmplY3RcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAncGFyc2VNYXN0ZXJYbWwnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZU1hc3RlclhtbCgpIHtcbiAgICAgIHZhciBtYXN0ZXIgPSBwYXJzZSh0aGlzLm1hc3RlclhtbF8sIHtcbiAgICAgICAgbWFuaWZlc3RVcmk6IHRoaXMuc3JjVXJsLFxuICAgICAgICBjbGllbnRPZmZzZXQ6IHRoaXMuY2xpZW50T2Zmc2V0X1xuICAgICAgfSk7XG4gICAgICBtYXN0ZXIudXJpID0gdGhpcy5zcmNVcmw7IC8vIFNldCB1cCBwaG9ueSBVUklzIGZvciB0aGUgcGxheWxpc3RzIHNpbmNlIHdlIHdvbid0IGhhdmUgZXh0ZXJuYWwgVVJJcyBmb3IgREFTSFxuICAgICAgLy8gYnV0IHJlZmVyZW5jZSBwbGF5bGlzdHMgYnkgdGhlaXIgVVJJIHRocm91Z2hvdXQgdGhlIHByb2plY3RcbiAgICAgIC8vIFRPRE86IFNob3VsZCB3ZSBjcmVhdGUgdGhlIGR1bW15IHVyaXMgaW4gbXBkLXBhcnNlciBhcyB3ZWxsIChsZWFuaW5nIHRvd2FyZHMgeWVzKS5cblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXN0ZXIucGxheWxpc3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBwaG9ueVVyaSA9ICdwbGFjZWhvbGRlci11cmktJyArIGk7XG4gICAgICAgIG1hc3Rlci5wbGF5bGlzdHNbaV0udXJpID0gcGhvbnlVcmk7IC8vIHNldCB1cCBieSBVUkkgcmVmZXJlbmNlc1xuXG4gICAgICAgIG1hc3Rlci5wbGF5bGlzdHNbcGhvbnlVcmldID0gbWFzdGVyLnBsYXlsaXN0c1tpXTtcbiAgICAgIH0gLy8gc2V0IHVwIHBob255IFVSSXMgZm9yIHRoZSBtZWRpYSBncm91cCBwbGF5bGlzdHMgc2luY2Ugd2Ugd29uJ3QgaGF2ZSBleHRlcm5hbFxuICAgICAgLy8gVVJJcyBmb3IgREFTSCBidXQgcmVmZXJlbmNlIHBsYXlsaXN0cyBieSB0aGVpciBVUkkgdGhyb3VnaG91dCB0aGUgcHJvamVjdFxuXG5cbiAgICAgIGZvckVhY2hNZWRpYUdyb3VwKG1hc3RlciwgZnVuY3Rpb24gKHByb3BlcnRpZXMsIG1lZGlhVHlwZSwgZ3JvdXBLZXksIGxhYmVsS2V5KSB7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzLnBsYXlsaXN0cyAmJiBwcm9wZXJ0aWVzLnBsYXlsaXN0cy5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgX3Bob255VXJpID0gJ3BsYWNlaG9sZGVyLXVyaS0nICsgbWVkaWFUeXBlICsgJy0nICsgZ3JvdXBLZXkgKyAnLScgKyBsYWJlbEtleTtcblxuICAgICAgICAgIHByb3BlcnRpZXMucGxheWxpc3RzWzBdLnVyaSA9IF9waG9ueVVyaTsgLy8gc2V0dXAgVVJJIHJlZmVyZW5jZXNcblxuICAgICAgICAgIG1hc3Rlci5wbGF5bGlzdHNbX3Bob255VXJpXSA9IHByb3BlcnRpZXMucGxheWxpc3RzWzBdO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHNldHVwTWVkaWFQbGF5bGlzdHMobWFzdGVyKTtcbiAgICAgIHJlc29sdmVNZWRpYUdyb3VwVXJpcyhtYXN0ZXIpO1xuICAgICAgcmV0dXJuIG1hc3RlcjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzdGFydCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7IC8vIFdlIGRvbid0IG5lZWQgdG8gcmVxdWVzdCB0aGUgbWFzdGVyIG1hbmlmZXN0IGFnYWluXG4gICAgICAvLyBDYWxsIHRoaXMgYXN5bmNocm9ub3VzbHkgdG8gbWF0Y2ggdGhlIHhociByZXF1ZXN0IGJlaGF2aW9yIGJlbG93XG5cbiAgICAgIGlmICh0aGlzLm1hc3RlclBsYXlsaXN0TG9hZGVyXykge1xuICAgICAgICB0aGlzLm1lZGlhUmVxdWVzdF8gPSB3aW5kb3ckMS5zZXRUaW1lb3V0KHRoaXMuaGF2ZU1hc3Rlcl8uYmluZCh0aGlzKSwgMCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gcmVxdWVzdCB0aGUgc3BlY2lmaWVkIFVSTFxuXG5cbiAgICAgIHRoaXMucmVxdWVzdCA9IHRoaXMuaGxzXy54aHIoe1xuICAgICAgICB1cmk6IHRoaXMuc3JjVXJsLFxuICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMud2l0aENyZWRlbnRpYWxzXG4gICAgICB9LCBmdW5jdGlvbiAoZXJyb3IsIHJlcSkge1xuICAgICAgICAvLyBkaXNwb3NlZFxuICAgICAgICBpZiAoIV90aGlzMy5yZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIGNsZWFyIHRoZSBsb2FkZXIncyByZXF1ZXN0IHJlZmVyZW5jZVxuXG5cbiAgICAgICAgX3RoaXMzLnJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIF90aGlzMy5lcnJvciA9IHtcbiAgICAgICAgICAgIHN0YXR1czogcmVxLnN0YXR1cyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdEQVNIIHBsYXlsaXN0IHJlcXVlc3QgZXJyb3IgYXQgVVJMOiAnICsgX3RoaXMzLnNyY1VybCxcbiAgICAgICAgICAgIHJlc3BvbnNlVGV4dDogcmVxLnJlc3BvbnNlVGV4dCxcbiAgICAgICAgICAgIC8vIE1FRElBX0VSUl9ORVRXT1JLXG4gICAgICAgICAgICBjb2RlOiAyXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGlmIChfdGhpczMuc3RhdGUgPT09ICdIQVZFX05PVEhJTkcnKSB7XG4gICAgICAgICAgICBfdGhpczMuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBfdGhpczMudHJpZ2dlcignZXJyb3InKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzMy5tYXN0ZXJYbWxfID0gcmVxLnJlc3BvbnNlVGV4dDtcblxuICAgICAgICBpZiAocmVxLnJlc3BvbnNlSGVhZGVycyAmJiByZXEucmVzcG9uc2VIZWFkZXJzLmRhdGUpIHtcbiAgICAgICAgICBfdGhpczMubWFzdGVyTG9hZGVkXyA9IERhdGUucGFyc2UocmVxLnJlc3BvbnNlSGVhZGVycy5kYXRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfdGhpczMubWFzdGVyTG9hZGVkXyA9IERhdGUubm93KCk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczMuc3JjVXJsID0gcmVzb2x2ZU1hbmlmZXN0UmVkaXJlY3QoX3RoaXMzLmhhbmRsZU1hbmlmZXN0UmVkaXJlY3RzLCBfdGhpczMuc3JjVXJsLCByZXEpO1xuXG4gICAgICAgIF90aGlzMy5zeW5jQ2xpZW50U2VydmVyQ2xvY2tfKF90aGlzMy5vbkNsaWVudFNlcnZlckNsb2NrU3luY18uYmluZChfdGhpczMpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGhlIG1hc3RlciB4bWwgZm9yIFVUQ1RpbWluZyBub2RlIHRvIHN5bmMgdGhlIGNsaWVudCBjbG9jayB0byB0aGUgc2VydmVyXG4gICAgICogY2xvY2suIElmIHRoZSBVVENUaW1pbmcgbm9kZSByZXF1aXJlcyBhIEhFQUQgb3IgR0VUIHJlcXVlc3QsIHRoYXQgcmVxdWVzdCBpcyBtYWRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZG9uZVxuICAgICAqICAgICAgICBGdW5jdGlvbiB0byBjYWxsIHdoZW4gY2xvY2sgc3luYyBoYXMgY29tcGxldGVkXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3N5bmNDbGllbnRTZXJ2ZXJDbG9ja18nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzeW5jQ2xpZW50U2VydmVyQ2xvY2tfKGRvbmUpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICB2YXIgdXRjVGltaW5nID0gcGFyc2VVVENUaW1pbmcodGhpcy5tYXN0ZXJYbWxfKTsgLy8gTm8gVVRDVGltaW5nIGVsZW1lbnQgZm91bmQgaW4gdGhlIG1wZC4gVXNlIERhdGUgaGVhZGVyIGZyb20gbXBkIHJlcXVlc3QgYXMgdGhlXG4gICAgICAvLyBzZXJ2ZXIgY2xvY2tcblxuICAgICAgaWYgKHV0Y1RpbWluZyA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLmNsaWVudE9mZnNldF8gPSB0aGlzLm1hc3RlckxvYWRlZF8gLSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gZG9uZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodXRjVGltaW5nLm1ldGhvZCA9PT0gJ0RJUkVDVCcpIHtcbiAgICAgICAgdGhpcy5jbGllbnRPZmZzZXRfID0gdXRjVGltaW5nLnZhbHVlIC0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuIGRvbmUoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZXF1ZXN0ID0gdGhpcy5obHNfLnhocih7XG4gICAgICAgIHVyaTogcmVzb2x2ZVVybCh0aGlzLnNyY1VybCwgdXRjVGltaW5nLnZhbHVlKSxcbiAgICAgICAgbWV0aG9kOiB1dGNUaW1pbmcubWV0aG9kLFxuICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMud2l0aENyZWRlbnRpYWxzXG4gICAgICB9LCBmdW5jdGlvbiAoZXJyb3IsIHJlcSkge1xuICAgICAgICAvLyBkaXNwb3NlZFxuICAgICAgICBpZiAoIV90aGlzNC5yZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgLy8gc3luYyByZXF1ZXN0IGZhaWxlZCwgZmFsbCBiYWNrIHRvIHVzaW5nIGRhdGUgaGVhZGVyIGZyb20gbXBkXG4gICAgICAgICAgLy8gVE9ETzogbG9nIHdhcm5pbmdcbiAgICAgICAgICBfdGhpczQuY2xpZW50T2Zmc2V0XyA9IF90aGlzNC5tYXN0ZXJMb2FkZWRfIC0gRGF0ZS5ub3coKTtcbiAgICAgICAgICByZXR1cm4gZG9uZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNlcnZlclRpbWUgPSB2b2lkIDA7XG5cbiAgICAgICAgaWYgKHV0Y1RpbWluZy5tZXRob2QgPT09ICdIRUFEJykge1xuICAgICAgICAgIGlmICghcmVxLnJlc3BvbnNlSGVhZGVycyB8fCAhcmVxLnJlc3BvbnNlSGVhZGVycy5kYXRlKSB7XG4gICAgICAgICAgICAvLyBleHBlY3RlZCBkYXRlIGhlYWRlciBub3QgcHJlc2V0LCBmYWxsIGJhY2sgdG8gdXNpbmcgZGF0ZSBoZWFkZXIgZnJvbSBtcGRcbiAgICAgICAgICAgIC8vIFRPRE86IGxvZyB3YXJuaW5nXG4gICAgICAgICAgICBzZXJ2ZXJUaW1lID0gX3RoaXM0Lm1hc3RlckxvYWRlZF87XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlcnZlclRpbWUgPSBEYXRlLnBhcnNlKHJlcS5yZXNwb25zZUhlYWRlcnMuZGF0ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlcnZlclRpbWUgPSBEYXRlLnBhcnNlKHJlcS5yZXNwb25zZVRleHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXM0LmNsaWVudE9mZnNldF8gPSBzZXJ2ZXJUaW1lIC0gRGF0ZS5ub3coKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnaGF2ZU1hc3Rlcl8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYXZlTWFzdGVyXygpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSAnSEFWRV9NQVNURVInOyAvLyBjbGVhciBtZWRpYSByZXF1ZXN0XG5cbiAgICAgIHRoaXMubWVkaWFSZXF1ZXN0XyA9IG51bGw7XG5cbiAgICAgIGlmICghdGhpcy5tYXN0ZXJQbGF5bGlzdExvYWRlcl8pIHtcbiAgICAgICAgdGhpcy5tYXN0ZXIgPSB0aGlzLnBhcnNlTWFzdGVyWG1sKCk7IC8vIFdlIGhhdmUgdGhlIG1hc3RlciBwbGF5bGlzdCBhdCB0aGlzIHBvaW50LCBzb1xuICAgICAgICAvLyB0cmlnZ2VyIHRoaXMgdG8gYWxsb3cgTWFzdGVyUGxheWxpc3RDb250cm9sbGVyXG4gICAgICAgIC8vIHRvIG1ha2UgYW4gaW5pdGlhbCBwbGF5bGlzdCBzZWxlY3Rpb25cblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2xvYWRlZHBsYXlsaXN0Jyk7XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLm1lZGlhXykge1xuICAgICAgICAvLyBubyBtZWRpYSBwbGF5bGlzdCB3YXMgc3BlY2lmaWNhbGx5IHNlbGVjdGVkIHNvIHNlbGVjdFxuICAgICAgICAvLyB0aGUgb25lIHRoZSBjaGlsZCBwbGF5bGlzdCBsb2FkZXIgd2FzIGNyZWF0ZWQgd2l0aFxuICAgICAgICB0aGlzLm1lZGlhKHRoaXMuY2hpbGRQbGF5bGlzdF8pO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVyIGZvciBhZnRlciBjbGllbnQvc2VydmVyIGNsb2NrIHN5bmNocm9uaXphdGlvbiBoYXMgaGFwcGVuZWQuIFNldHMgdXBcbiAgICAgKiB4bWwgcmVmcmVzaCB0aW1lciBpZiBzcGVjaWZpY2VkIGJ5IHRoZSBtYW5pZmVzdC5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnb25DbGllbnRTZXJ2ZXJDbG9ja1N5bmNfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DbGllbnRTZXJ2ZXJDbG9ja1N5bmNfKCkge1xuICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgIHRoaXMuaGF2ZU1hc3Rlcl8oKTtcblxuICAgICAgaWYgKCF0aGlzLmhhc1BlbmRpbmdSZXF1ZXN0KCkgJiYgIXRoaXMubWVkaWFfKSB7XG4gICAgICAgIHRoaXMubWVkaWEodGhpcy5tYXN0ZXIucGxheWxpc3RzWzBdKTtcbiAgICAgIH0gLy8gVE9ETzogbWluaW11bVVwZGF0ZVBlcmlvZCBjYW4gaGF2ZSBhIHZhbHVlIG9mIDAuIEN1cnJlbnRseSB0aGUgbWFuaWZlc3Qgd2lsbCBub3RcbiAgICAgIC8vIGJlIHJlZnJlc2hlZCB3aGVuIHRoaXMgaXMgdGhlIGNhc2UuIFRoZSBpbnRlci1vcCBndWlkZSBzYXlzIHRoYXQgd2hlbiB0aGVcbiAgICAgIC8vIG1pbmltdW1VcGRhdGVQZXJpb2QgaXMgMCwgdGhlIG1hbmlmZXN0IHNob3VsZCBvdXRsaW5lIGFsbCBjdXJyZW50bHkgYXZhaWxhYmxlXG4gICAgICAvLyBzZWdtZW50cywgYnV0IGZ1dHVyZSBzZWdtZW50cyBtYXkgcmVxdWlyZSBhbiB1cGRhdGUuIEkgdGhpbmsgYSBnb29kIHNvbHV0aW9uXG4gICAgICAvLyB3b3VsZCBiZSB0byB1cGRhdGUgdGhlIG1hbmlmZXN0IGF0IHRoZSBzYW1lIHJhdGUgdGhhdCB0aGUgbWVkaWEgcGxheWxpc3RzXG4gICAgICAvLyBhcmUgXCJyZWZyZXNoZWRcIiwgaS5lLiBldmVyeSB0YXJnZXREdXJhdGlvbi5cblxuXG4gICAgICBpZiAodGhpcy5tYXN0ZXIgJiYgdGhpcy5tYXN0ZXIubWluaW11bVVwZGF0ZVBlcmlvZCkge1xuICAgICAgICB3aW5kb3ckMS5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczUudHJpZ2dlcignbWluaW11bVVwZGF0ZVBlcmlvZCcpO1xuICAgICAgICB9LCB0aGlzLm1hc3Rlci5taW5pbXVtVXBkYXRlUGVyaW9kKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgcmVxdWVzdCB0byByZWZyZXNoIHRoZSBtYXN0ZXIgeG1sIGFuZCB1cGRhdGVzIHRoZSBwYXJzZWQgbWFzdGVyIG1hbmlmZXN0XG4gICAgICogVE9ETzogRG9lcyB0aGUgY2xpZW50IG9mZnNldCBuZWVkIHRvIGJlIHJlY2FsY3VsYXRlZCB3aGVuIHRoZSB4bWwgaXMgcmVmcmVzaGVkP1xuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdyZWZyZXNoWG1sXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlZnJlc2hYbWxfKCkge1xuICAgICAgdmFyIF90aGlzNiA9IHRoaXM7IC8vIFRoZSBzcmNVcmwgaGVyZSAqbWF5KiBuZWVkIHRvIHBhc3MgdGhyb3VnaCBoYW5kbGVNYW5pZmVzdHNSZWRpcmVjdHMgd2hlblxuICAgICAgLy8gc2lkeCBpcyBpbXBsZW1lbnRlZFxuXG5cbiAgICAgIHRoaXMucmVxdWVzdCA9IHRoaXMuaGxzXy54aHIoe1xuICAgICAgICB1cmk6IHRoaXMuc3JjVXJsLFxuICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRoaXMud2l0aENyZWRlbnRpYWxzXG4gICAgICB9LCBmdW5jdGlvbiAoZXJyb3IsIHJlcSkge1xuICAgICAgICAvLyBkaXNwb3NlZFxuICAgICAgICBpZiAoIV90aGlzNi5yZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIGNsZWFyIHRoZSBsb2FkZXIncyByZXF1ZXN0IHJlZmVyZW5jZVxuXG5cbiAgICAgICAgX3RoaXM2LnJlcXVlc3QgPSBudWxsO1xuXG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIF90aGlzNi5lcnJvciA9IHtcbiAgICAgICAgICAgIHN0YXR1czogcmVxLnN0YXR1cyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdEQVNIIHBsYXlsaXN0IHJlcXVlc3QgZXJyb3IgYXQgVVJMOiAnICsgX3RoaXM2LnNyY1VybCxcbiAgICAgICAgICAgIHJlc3BvbnNlVGV4dDogcmVxLnJlc3BvbnNlVGV4dCxcbiAgICAgICAgICAgIC8vIE1FRElBX0VSUl9ORVRXT1JLXG4gICAgICAgICAgICBjb2RlOiAyXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGlmIChfdGhpczYuc3RhdGUgPT09ICdIQVZFX05PVEhJTkcnKSB7XG4gICAgICAgICAgICBfdGhpczYuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBfdGhpczYudHJpZ2dlcignZXJyb3InKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzNi5tYXN0ZXJYbWxfID0gcmVxLnJlc3BvbnNlVGV4dDtcblxuICAgICAgICB2YXIgbmV3TWFzdGVyID0gX3RoaXM2LnBhcnNlTWFzdGVyWG1sKCk7XG5cbiAgICAgICAgdmFyIHVwZGF0ZWRNYXN0ZXIgPSB1cGRhdGVNYXN0ZXIkMShfdGhpczYubWFzdGVyLCBuZXdNYXN0ZXIpO1xuXG4gICAgICAgIGlmICh1cGRhdGVkTWFzdGVyKSB7XG4gICAgICAgICAgX3RoaXM2Lm1hc3RlciA9IHVwZGF0ZWRNYXN0ZXI7XG4gICAgICAgIH1cblxuICAgICAgICB3aW5kb3ckMS5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczYudHJpZ2dlcignbWluaW11bVVwZGF0ZVBlcmlvZCcpO1xuICAgICAgICB9LCBfdGhpczYubWFzdGVyLm1pbmltdW1VcGRhdGVQZXJpb2QpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZnJlc2hlcyB0aGUgbWVkaWEgcGxheWxpc3QgYnkgcmUtcGFyc2luZyB0aGUgbWFzdGVyIHhtbCBhbmQgdXBkYXRpbmcgcGxheWxpc3RcbiAgICAgKiByZWZlcmVuY2VzLiBJZiB0aGlzIGlzIGFuIGFsdGVybmF0ZSBsb2FkZXIsIHRoZSB1cGRhdGVkIHBhcnNlZCBtYW5pZmVzdCBpcyByZXRyaWV2ZWRcbiAgICAgKiBmcm9tIHRoZSBtYXN0ZXIgbG9hZGVyLlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdyZWZyZXNoTWVkaWFfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVmcmVzaE1lZGlhXygpIHtcbiAgICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgICB2YXIgb2xkTWFzdGVyID0gdm9pZCAwO1xuICAgICAgdmFyIG5ld01hc3RlciA9IHZvaWQgMDtcblxuICAgICAgaWYgKHRoaXMubWFzdGVyUGxheWxpc3RMb2FkZXJfKSB7XG4gICAgICAgIG9sZE1hc3RlciA9IHRoaXMubWFzdGVyUGxheWxpc3RMb2FkZXJfLm1hc3RlcjtcbiAgICAgICAgbmV3TWFzdGVyID0gdGhpcy5tYXN0ZXJQbGF5bGlzdExvYWRlcl8ucGFyc2VNYXN0ZXJYbWwoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9sZE1hc3RlciA9IHRoaXMubWFzdGVyO1xuICAgICAgICBuZXdNYXN0ZXIgPSB0aGlzLnBhcnNlTWFzdGVyWG1sKCk7XG4gICAgICB9XG5cbiAgICAgIHZhciB1cGRhdGVkTWFzdGVyID0gdXBkYXRlTWFzdGVyJDEob2xkTWFzdGVyLCBuZXdNYXN0ZXIpO1xuXG4gICAgICBpZiAodXBkYXRlZE1hc3Rlcikge1xuICAgICAgICBpZiAodGhpcy5tYXN0ZXJQbGF5bGlzdExvYWRlcl8pIHtcbiAgICAgICAgICB0aGlzLm1hc3RlclBsYXlsaXN0TG9hZGVyXy5tYXN0ZXIgPSB1cGRhdGVkTWFzdGVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubWFzdGVyID0gdXBkYXRlZE1hc3RlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubWVkaWFfID0gdXBkYXRlZE1hc3Rlci5wbGF5bGlzdHNbdGhpcy5tZWRpYV8udXJpXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcigncGxheWxpc3R1bmNoYW5nZWQnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLm1lZGlhKCkuZW5kTGlzdCkge1xuICAgICAgICB0aGlzLm1lZGlhVXBkYXRlVGltZW91dCA9IHdpbmRvdyQxLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzNy50cmlnZ2VyKCdtZWRpYXVwZGF0ZXRpbWVvdXQnKTtcbiAgICAgICAgfSwgcmVmcmVzaERlbGF5KHRoaXMubWVkaWEoKSwgISF1cGRhdGVkTWFzdGVyKSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMudHJpZ2dlcignbG9hZGVkcGxheWxpc3QnKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIERhc2hQbGF5bGlzdExvYWRlcjtcbn0oRXZlbnRUYXJnZXQkMSQxKTtcblxudmFyIGxvZ2dlciA9IGZ1bmN0aW9uIGxvZ2dlcihzb3VyY2UpIHtcbiAgaWYgKHZpZGVvanMkMS5sb2cuZGVidWcpIHtcbiAgICByZXR1cm4gdmlkZW9qcyQxLmxvZy5kZWJ1Zy5iaW5kKHZpZGVvanMkMSwgJ1ZIUzonLCBzb3VyY2UgKyAnID4nKTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7fTtcbn07XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuLyoqXG4gKiBAZmlsZSBzb3VyY2UtdXBkYXRlci5qc1xuICovXG5cbi8qKlxuICogQSBxdWV1ZSBvZiBjYWxsYmFja3MgdG8gYmUgc2VyaWFsaXplZCBhbmQgYXBwbGllZCB3aGVuIGFcbiAqIE1lZGlhU291cmNlIGFuZCBpdHMgYXNzb2NpYXRlZCBTb3VyY2VCdWZmZXJzIGFyZSBub3QgaW4gdGhlXG4gKiB1cGRhdGluZyBzdGF0ZS4gSXQgaXMgdXNlZCBieSB0aGUgc2VnbWVudCBsb2FkZXIgdG8gdXBkYXRlIHRoZVxuICogdW5kZXJseWluZyBTb3VyY2VCdWZmZXJzIHdoZW4gbmV3IGRhdGEgaXMgbG9hZGVkLCBmb3IgaW5zdGFuY2UuXG4gKlxuICogQGNsYXNzIFNvdXJjZVVwZGF0ZXJcbiAqIEBwYXJhbSB7TWVkaWFTb3VyY2V9IG1lZGlhU291cmNlIHRoZSBNZWRpYVNvdXJjZSB0byBjcmVhdGUgdGhlXG4gKiBTb3VyY2VCdWZmZXIgZnJvbVxuICogQHBhcmFtIHtTdHJpbmd9IG1pbWVUeXBlIHRoZSBkZXNpcmVkIE1JTUUgdHlwZSBvZiB0aGUgdW5kZXJseWluZ1xuICogU291cmNlQnVmZmVyXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlQnVmZmVyRW1pdHRlciBhbiBldmVudCBlbWl0dGVyIHRoYXQgZmlyZXMgd2hlbiBhIHNvdXJjZSBidWZmZXIgaXNcbiAqIGFkZGVkIHRvIHRoZSBtZWRpYSBzb3VyY2VcbiAqL1xuXG5cbnZhciBTb3VyY2VVcGRhdGVyID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTb3VyY2VVcGRhdGVyKG1lZGlhU291cmNlLCBtaW1lVHlwZSwgdHlwZSwgc291cmNlQnVmZmVyRW1pdHRlcikge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFNvdXJjZVVwZGF0ZXIpO1xuICAgIHRoaXMuY2FsbGJhY2tzXyA9IFtdO1xuICAgIHRoaXMucGVuZGluZ0NhbGxiYWNrXyA9IG51bGw7XG4gICAgdGhpcy50aW1lc3RhbXBPZmZzZXRfID0gMDtcbiAgICB0aGlzLm1lZGlhU291cmNlID0gbWVkaWFTb3VyY2U7XG4gICAgdGhpcy5wcm9jZXNzZWRBcHBlbmRfID0gZmFsc2U7XG4gICAgdGhpcy50eXBlXyA9IHR5cGU7XG4gICAgdGhpcy5taW1lVHlwZV8gPSBtaW1lVHlwZTtcbiAgICB0aGlzLmxvZ2dlcl8gPSBsb2dnZXIoJ1NvdXJjZVVwZGF0ZXJbJyArIHR5cGUgKyAnXVsnICsgbWltZVR5cGUgKyAnXScpO1xuXG4gICAgaWYgKG1lZGlhU291cmNlLnJlYWR5U3RhdGUgPT09ICdjbG9zZWQnKSB7XG4gICAgICBtZWRpYVNvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdzb3VyY2VvcGVuJywgdGhpcy5jcmVhdGVTb3VyY2VCdWZmZXJfLmJpbmQodGhpcywgbWltZVR5cGUsIHNvdXJjZUJ1ZmZlckVtaXR0ZXIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jcmVhdGVTb3VyY2VCdWZmZXJfKG1pbWVUeXBlLCBzb3VyY2VCdWZmZXJFbWl0dGVyKTtcbiAgICB9XG4gIH1cblxuICBjcmVhdGVDbGFzcyhTb3VyY2VVcGRhdGVyLCBbe1xuICAgIGtleTogJ2NyZWF0ZVNvdXJjZUJ1ZmZlcl8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVTb3VyY2VCdWZmZXJfKG1pbWVUeXBlLCBzb3VyY2VCdWZmZXJFbWl0dGVyKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB0aGlzLnNvdXJjZUJ1ZmZlcl8gPSB0aGlzLm1lZGlhU291cmNlLmFkZFNvdXJjZUJ1ZmZlcihtaW1lVHlwZSk7XG4gICAgICB0aGlzLmxvZ2dlcl8oJ2NyZWF0ZWQgU291cmNlQnVmZmVyJyk7XG5cbiAgICAgIGlmIChzb3VyY2VCdWZmZXJFbWl0dGVyKSB7XG4gICAgICAgIHNvdXJjZUJ1ZmZlckVtaXR0ZXIudHJpZ2dlcignc291cmNlYnVmZmVyYWRkZWQnKTtcblxuICAgICAgICBpZiAodGhpcy5tZWRpYVNvdXJjZS5zb3VyY2VCdWZmZXJzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAvLyBUaGVyZSdzIGFub3RoZXIgc291cmNlIGJ1ZmZlciB3ZSBtdXN0IHdhaXQgZm9yIGJlZm9yZSB3ZSBjYW4gc3RhcnQgdXBkYXRpbmdcbiAgICAgICAgICAvLyBvdXIgb3duIChvciBlbHNlIHdlIGNhbiBnZXQgaW50byBhIGJhZCBzdGF0ZSwgaS5lLiwgYXBwZW5kaW5nIHZpZGVvL2F1ZGlvIGRhdGFcbiAgICAgICAgICAvLyBiZWZvcmUgdGhlIG90aGVyIHZpZGVvL2F1ZGlvIHNvdXJjZSBidWZmZXIgaXMgYXZhaWxhYmxlIGFuZCBsZWFkaW5nIHRvIGEgdmlkZW9cbiAgICAgICAgICAvLyBvciBhdWRpbyBvbmx5IGJ1ZmZlcikuXG4gICAgICAgICAgc291cmNlQnVmZmVyRW1pdHRlci5vbignc291cmNlYnVmZmVyYWRkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5zdGFydF8oKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5zdGFydF8oKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzdGFydF8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydF8oKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdGhpcy5zdGFydGVkXyA9IHRydWU7IC8vIHJ1biBjb21wbGV0aW9uIGhhbmRsZXJzIGFuZCBwcm9jZXNzIGNhbGxiYWNrcyBhcyB1cGRhdGVlbmRcbiAgICAgIC8vIGV2ZW50cyBmaXJlXG5cbiAgICAgIHRoaXMub25VcGRhdGVlbmRDYWxsYmFja18gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwZW5kaW5nQ2FsbGJhY2sgPSBfdGhpczIucGVuZGluZ0NhbGxiYWNrXztcbiAgICAgICAgX3RoaXMyLnBlbmRpbmdDYWxsYmFja18gPSBudWxsO1xuXG4gICAgICAgIF90aGlzMi5sb2dnZXJfKCdidWZmZXJlZCBbJyArIHByaW50YWJsZVJhbmdlKF90aGlzMi5idWZmZXJlZCgpKSArICddJyk7XG5cbiAgICAgICAgaWYgKHBlbmRpbmdDYWxsYmFjaykge1xuICAgICAgICAgIHBlbmRpbmdDYWxsYmFjaygpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnJ1bkNhbGxiYWNrXygpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5zb3VyY2VCdWZmZXJfLmFkZEV2ZW50TGlzdGVuZXIoJ3VwZGF0ZWVuZCcsIHRoaXMub25VcGRhdGVlbmRDYWxsYmFja18pO1xuICAgICAgdGhpcy5ydW5DYWxsYmFja18oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWJvcnRzIHRoZSBjdXJyZW50IHNlZ21lbnQgYW5kIHJlc2V0cyB0aGUgc2VnbWVudCBwYXJzZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkb25lIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBkb25lXG4gICAgICogQHNlZSBodHRwOi8vdzNjLmdpdGh1Yi5pby9tZWRpYS1zb3VyY2UvI3dpZGwtU291cmNlQnVmZmVyLWFib3J0LXZvaWRcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnYWJvcnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhYm9ydChkb25lKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMucHJvY2Vzc2VkQXBwZW5kXykge1xuICAgICAgICB0aGlzLnF1ZXVlQ2FsbGJhY2tfKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczMuc291cmNlQnVmZmVyXy5hYm9ydCgpO1xuICAgICAgICB9LCBkb25lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUXVldWUgYW4gdXBkYXRlIHRvIGFwcGVuZCBhbiBBcnJheUJ1ZmZlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGJ5dGVzXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZG9uZSB0aGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIGRvbmVcbiAgICAgKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL21lZGlhLXNvdXJjZS8jd2lkbC1Tb3VyY2VCdWZmZXItYXBwZW5kQnVmZmVyLXZvaWQtQXJyYXlCdWZmZXItZGF0YVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdhcHBlbmRCdWZmZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhcHBlbmRCdWZmZXIoY29uZmlnLCBkb25lKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgdGhpcy5wcm9jZXNzZWRBcHBlbmRfID0gdHJ1ZTtcbiAgICAgIHRoaXMucXVldWVDYWxsYmFja18oZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoY29uZmlnLnZpZGVvU2VnbWVudFRpbWluZ0luZm9DYWxsYmFjaykge1xuICAgICAgICAgIF90aGlzNC5zb3VyY2VCdWZmZXJfLmFkZEV2ZW50TGlzdGVuZXIoJ3ZpZGVvU2VnbWVudFRpbWluZ0luZm8nLCBjb25maWcudmlkZW9TZWdtZW50VGltaW5nSW5mb0NhbGxiYWNrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzNC5zb3VyY2VCdWZmZXJfLmFwcGVuZEJ1ZmZlcihjb25maWcuYnl0ZXMpO1xuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoY29uZmlnLnZpZGVvU2VnbWVudFRpbWluZ0luZm9DYWxsYmFjaykge1xuICAgICAgICAgIF90aGlzNC5zb3VyY2VCdWZmZXJfLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ZpZGVvU2VnbWVudFRpbWluZ0luZm8nLCBjb25maWcudmlkZW9TZWdtZW50VGltaW5nSW5mb0NhbGxiYWNrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hhdCBUaW1lUmFuZ2VzIGFyZSBidWZmZXJlZCBpbiB0aGUgbWFuYWdlZCBTb3VyY2VCdWZmZXIuXG4gICAgICpcbiAgICAgKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL21lZGlhLXNvdXJjZS8jd2lkbC1Tb3VyY2VCdWZmZXItYnVmZmVyZWRcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnYnVmZmVyZWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBidWZmZXJlZCgpIHtcbiAgICAgIGlmICghdGhpcy5zb3VyY2VCdWZmZXJfKSB7XG4gICAgICAgIHJldHVybiB2aWRlb2pzJDEuY3JlYXRlVGltZVJhbmdlcygpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2VCdWZmZXJfLmJ1ZmZlcmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBRdWV1ZSBhbiB1cGRhdGUgdG8gcmVtb3ZlIGEgdGltZSByYW5nZSBmcm9tIHRoZSBidWZmZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhcnQgd2hlcmUgdG8gc3RhcnQgdGhlIHJlbW92YWxcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZW5kIHdoZXJlIHRvIGVuZCB0aGUgcmVtb3ZhbFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtkb25lPW5vb3BdIG9wdGlvbmFsIGNhbGxiYWNrIHRvIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIHJlbW92ZVxuICAgICAqIG9wZXJhdGlvbiBpcyBjb21wbGV0ZVxuICAgICAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvbWVkaWEtc291cmNlLyN3aWRsLVNvdXJjZUJ1ZmZlci1yZW1vdmUtdm9pZC1kb3VibGUtc3RhcnQtdW5yZXN0cmljdGVkLWRvdWJsZS1lbmRcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAncmVtb3ZlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlKHN0YXJ0LCBlbmQpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICB2YXIgZG9uZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbm9vcDtcblxuICAgICAgaWYgKHRoaXMucHJvY2Vzc2VkQXBwZW5kXykge1xuICAgICAgICB0aGlzLnF1ZXVlQ2FsbGJhY2tfKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczUubG9nZ2VyXygncmVtb3ZlIFsnICsgc3RhcnQgKyAnID0+ICcgKyBlbmQgKyAnXScpO1xuXG4gICAgICAgICAgX3RoaXM1LnNvdXJjZUJ1ZmZlcl8ucmVtb3ZlKHN0YXJ0LCBlbmQpO1xuICAgICAgICB9LCBkb25lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgdW5kZXJseWluZyBzb3VyY2VCdWZmZXIgaXMgdXBkYXRpbmcgb3Igbm90XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0aGUgdXBkYXRpbmcgc3RhdHVzIG9mIHRoZSBTb3VyY2VCdWZmZXJcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAndXBkYXRpbmcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGluZygpIHtcbiAgICAgIC8vIHdlIGFyZSB1cGRhdGluZyBpZiB0aGUgc291cmNlYnVmZmVyIGlzIHVwZGF0aW5nIG9yXG4gICAgICByZXR1cm4gIXRoaXMuc291cmNlQnVmZmVyXyB8fCB0aGlzLnNvdXJjZUJ1ZmZlcl8udXBkYXRpbmcgfHwgLy8gaWYgd2UgaGF2ZSBhIHBlbmRpbmcgY2FsbGJhY2sgdGhhdCBpcyBub3Qgb3VyIGludGVybmFsIG5vb3BcbiAgICAgICEhdGhpcy5wZW5kaW5nQ2FsbGJhY2tfICYmIHRoaXMucGVuZGluZ0NhbGxiYWNrXyAhPT0gbm9vcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0L2dldCB0aGUgdGltZXN0YW1wb2Zmc2V0IG9uIHRoZSBTb3VyY2VCdWZmZXJcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gdGhlIHRpbWVzdGFtcCBvZmZzZXRcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAndGltZXN0YW1wT2Zmc2V0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdGltZXN0YW1wT2Zmc2V0KG9mZnNldCkge1xuICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgIGlmICh0eXBlb2Ygb2Zmc2V0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLnF1ZXVlQ2FsbGJhY2tfKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczYuc291cmNlQnVmZmVyXy50aW1lc3RhbXBPZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRpbWVzdGFtcE9mZnNldF8gPSBvZmZzZXQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcE9mZnNldF87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFF1ZXVlIGEgY2FsbGJhY2sgdG8gcnVuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3F1ZXVlQ2FsbGJhY2tfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcXVldWVDYWxsYmFja18oY2FsbGJhY2ssIGRvbmUpIHtcbiAgICAgIHRoaXMuY2FsbGJhY2tzXy5wdXNoKFtjYWxsYmFjay5iaW5kKHRoaXMpLCBkb25lXSk7XG4gICAgICB0aGlzLnJ1bkNhbGxiYWNrXygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW4gYSBxdWV1ZWQgY2FsbGJhY2tcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAncnVuQ2FsbGJhY2tfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcnVuQ2FsbGJhY2tfKCkge1xuICAgICAgdmFyIGNhbGxiYWNrcyA9IHZvaWQgMDtcblxuICAgICAgaWYgKCF0aGlzLnVwZGF0aW5nKCkgJiYgdGhpcy5jYWxsYmFja3NfLmxlbmd0aCAmJiB0aGlzLnN0YXJ0ZWRfKSB7XG4gICAgICAgIGNhbGxiYWNrcyA9IHRoaXMuY2FsbGJhY2tzXy5zaGlmdCgpO1xuICAgICAgICB0aGlzLnBlbmRpbmdDYWxsYmFja18gPSBjYWxsYmFja3NbMV07XG4gICAgICAgIGNhbGxiYWNrc1swXSgpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBkaXNwb3NlIG9mIHRoZSBzb3VyY2UgdXBkYXRlciBhbmQgdGhlIHVuZGVybHlpbmcgc291cmNlQnVmZmVyXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2Rpc3Bvc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgdGhpcy5zb3VyY2VCdWZmZXJfLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3VwZGF0ZWVuZCcsIHRoaXMub25VcGRhdGVlbmRDYWxsYmFja18pO1xuXG4gICAgICBpZiAodGhpcy5zb3VyY2VCdWZmZXJfICYmIHRoaXMubWVkaWFTb3VyY2UucmVhZHlTdGF0ZSA9PT0gJ29wZW4nKSB7XG4gICAgICAgIHRoaXMuc291cmNlQnVmZmVyXy5hYm9ydCgpO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gU291cmNlVXBkYXRlcjtcbn0oKTtcblxudmFyIENvbmZpZyA9IHtcbiAgR09BTF9CVUZGRVJfTEVOR1RIOiAzMCxcbiAgTUFYX0dPQUxfQlVGRkVSX0xFTkdUSDogNjAsXG4gIEdPQUxfQlVGRkVSX0xFTkdUSF9SQVRFOiAxLFxuICAvLyAwLjUgTUIvc1xuICBJTklUSUFMX0JBTkRXSURUSDogNDE5NDMwNCxcbiAgLy8gQSBmdWRnZSBmYWN0b3IgdG8gYXBwbHkgdG8gYWR2ZXJ0aXNlZCBwbGF5bGlzdCBiaXRyYXRlcyB0byBhY2NvdW50IGZvclxuICAvLyB0ZW1wb3JhcnkgZmx1Y2F0aW9ucyBpbiBjbGllbnQgYmFuZHdpZHRoXG4gIEJBTkRXSURUSF9WQVJJQU5DRTogMS4yLFxuICAvLyBIb3cgbXVjaCBvZiB0aGUgYnVmZmVyIG11c3QgYmUgZmlsbGVkIGJlZm9yZSB3ZSBjb25zaWRlciB1cHN3aXRjaGluZ1xuICBCVUZGRVJfTE9XX1dBVEVSX0xJTkU6IDAsXG4gIE1BWF9CVUZGRVJfTE9XX1dBVEVSX0xJTkU6IDMwLFxuICBCVUZGRVJfTE9XX1dBVEVSX0xJTkVfUkFURTogMVxufTtcbnZhciBSRVFVRVNUX0VSUk9SUyA9IHtcbiAgRkFJTFVSRTogMixcbiAgVElNRU9VVDogLTEwMSxcbiAgQUJPUlRFRDogLTEwMlxufTtcbi8qKlxuICogVHVybnMgc2VnbWVudCBieXRlcmFuZ2UgaW50byBhIHN0cmluZyBzdWl0YWJsZSBmb3IgdXNlIGluXG4gKiBIVFRQIFJhbmdlIHJlcXVlc3RzXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGJ5dGVyYW5nZSAtIGFuIG9iamVjdCB3aXRoIHR3byB2YWx1ZXMgZGVmaW5pbmcgdGhlIHN0YXJ0IGFuZCBlbmRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZiBhIGJ5dGUtcmFuZ2VcbiAqL1xuXG52YXIgYnl0ZXJhbmdlU3RyID0gZnVuY3Rpb24gYnl0ZXJhbmdlU3RyKGJ5dGVyYW5nZSkge1xuICB2YXIgYnl0ZXJhbmdlU3RhcnQgPSB2b2lkIDA7XG4gIHZhciBieXRlcmFuZ2VFbmQgPSB2b2lkIDA7IC8vIGBieXRlcmFuZ2VFbmRgIGlzIG9uZSBsZXNzIHRoYW4gYG9mZnNldCArIGxlbmd0aGAgYmVjYXVzZSB0aGUgSFRUUCByYW5nZVxuICAvLyBoZWFkZXIgdXNlcyBpbmNsdXNpdmUgcmFuZ2VzXG5cbiAgYnl0ZXJhbmdlRW5kID0gYnl0ZXJhbmdlLm9mZnNldCArIGJ5dGVyYW5nZS5sZW5ndGggLSAxO1xuICBieXRlcmFuZ2VTdGFydCA9IGJ5dGVyYW5nZS5vZmZzZXQ7XG4gIHJldHVybiAnYnl0ZXM9JyArIGJ5dGVyYW5nZVN0YXJ0ICsgJy0nICsgYnl0ZXJhbmdlRW5kO1xufTtcbi8qKlxuICogRGVmaW5lcyBoZWFkZXJzIGZvciB1c2UgaW4gdGhlIHhociByZXF1ZXN0IGZvciBhIHBhcnRpY3VsYXIgc2VnbWVudC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc2VnbWVudCAtIGEgc2ltcGxpZmllZCBjb3B5IG9mIHRoZSBzZWdtZW50SW5mbyBvYmplY3RcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSBTZWdtZW50TG9hZGVyXG4gKi9cblxuXG52YXIgc2VnbWVudFhockhlYWRlcnMgPSBmdW5jdGlvbiBzZWdtZW50WGhySGVhZGVycyhzZWdtZW50KSB7XG4gIHZhciBoZWFkZXJzID0ge307XG5cbiAgaWYgKHNlZ21lbnQuYnl0ZXJhbmdlKSB7XG4gICAgaGVhZGVycy5SYW5nZSA9IGJ5dGVyYW5nZVN0cihzZWdtZW50LmJ5dGVyYW5nZSk7XG4gIH1cblxuICByZXR1cm4gaGVhZGVycztcbn07XG4vKipcbiAqIEFib3J0IGFsbCByZXF1ZXN0c1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhY3RpdmVYaHJzIC0gYW4gb2JqZWN0IHRoYXQgdHJhY2tzIGFsbCBYSFIgcmVxdWVzdHNcbiAqL1xuXG5cbnZhciBhYm9ydEFsbCA9IGZ1bmN0aW9uIGFib3J0QWxsKGFjdGl2ZVhocnMpIHtcbiAgYWN0aXZlWGhycy5mb3JFYWNoKGZ1bmN0aW9uICh4aHIkJDEpIHtcbiAgICB4aHIkJDEuYWJvcnQoKTtcbiAgfSk7XG59O1xuLyoqXG4gKiBHYXRoZXIgaW1wb3J0YW50IGJhbmR3aWR0aCBzdGF0cyBvbmNlIGEgcmVxdWVzdCBoYXMgY29tcGxldGVkXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3QgLSB0aGUgWEhSIHJlcXVlc3QgZnJvbSB3aGljaCB0byBnYXRoZXIgc3RhdHNcbiAqL1xuXG5cbnZhciBnZXRSZXF1ZXN0U3RhdHMgPSBmdW5jdGlvbiBnZXRSZXF1ZXN0U3RhdHMocmVxdWVzdCkge1xuICByZXR1cm4ge1xuICAgIGJhbmR3aWR0aDogcmVxdWVzdC5iYW5kd2lkdGgsXG4gICAgYnl0ZXNSZWNlaXZlZDogcmVxdWVzdC5ieXRlc1JlY2VpdmVkIHx8IDAsXG4gICAgcm91bmRUcmlwVGltZTogcmVxdWVzdC5yb3VuZFRyaXBUaW1lIHx8IDBcbiAgfTtcbn07XG4vKipcbiAqIElmIHBvc3NpYmxlIGdhdGhlciBiYW5kd2lkdGggc3RhdHMgYXMgYSByZXF1ZXN0IGlzIGluXG4gKiBwcm9ncmVzc1xuICpcbiAqIEBwYXJhbSB7RXZlbnR9IHByb2dyZXNzRXZlbnQgLSBhbiBldmVudCBvYmplY3QgZnJvbSBhbiBYSFIncyBwcm9ncmVzcyBldmVudFxuICovXG5cblxudmFyIGdldFByb2dyZXNzU3RhdHMgPSBmdW5jdGlvbiBnZXRQcm9ncmVzc1N0YXRzKHByb2dyZXNzRXZlbnQpIHtcbiAgdmFyIHJlcXVlc3QgPSBwcm9ncmVzc0V2ZW50LnRhcmdldDtcbiAgdmFyIHJvdW5kVHJpcFRpbWUgPSBEYXRlLm5vdygpIC0gcmVxdWVzdC5yZXF1ZXN0VGltZTtcbiAgdmFyIHN0YXRzID0ge1xuICAgIGJhbmR3aWR0aDogSW5maW5pdHksXG4gICAgYnl0ZXNSZWNlaXZlZDogMCxcbiAgICByb3VuZFRyaXBUaW1lOiByb3VuZFRyaXBUaW1lIHx8IDBcbiAgfTtcbiAgc3RhdHMuYnl0ZXNSZWNlaXZlZCA9IHByb2dyZXNzRXZlbnQubG9hZGVkOyAvLyBUaGlzIGNhbiByZXN1bHQgaW4gSW5maW5pdHkgaWYgc3RhdHMucm91bmRUcmlwVGltZSBpcyAwIGJ1dCB0aGF0IGlzIG9rXG4gIC8vIGJlY2F1c2Ugd2Ugc2hvdWxkIG9ubHkgdXNlIGJhbmR3aWR0aCBzdGF0cyBvbiBwcm9ncmVzcyB0byBkZXRlcm1pbmUgd2hlblxuICAvLyBhYm9ydCBhIHJlcXVlc3QgZWFybHkgZHVlIHRvIGluc3VmZmljaWVudCBiYW5kd2lkdGhcblxuICBzdGF0cy5iYW5kd2lkdGggPSBNYXRoLmZsb29yKHN0YXRzLmJ5dGVzUmVjZWl2ZWQgLyBzdGF0cy5yb3VuZFRyaXBUaW1lICogOCAqIDEwMDApO1xuICByZXR1cm4gc3RhdHM7XG59O1xuLyoqXG4gKiBIYW5kbGUgYWxsIGVycm9yIGNvbmRpdGlvbnMgaW4gb25lIHBsYWNlIGFuZCByZXR1cm4gYW4gb2JqZWN0XG4gKiB3aXRoIGFsbCB0aGUgaW5mb3JtYXRpb25cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfG51bGx9IGVycm9yIC0gaWYgbm9uLW51bGwgc2lnbmFscyBhbiBlcnJvciBvY2N1cmVkIHdpdGggdGhlIFhIUlxuICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3QgLSAgdGhlIFhIUiByZXF1ZXN0IHRoYXQgcG9zc2libHkgZ2VuZXJhdGVkIHRoZSBlcnJvclxuICovXG5cblxudmFyIGhhbmRsZUVycm9ycyA9IGZ1bmN0aW9uIGhhbmRsZUVycm9ycyhlcnJvciwgcmVxdWVzdCkge1xuICBpZiAocmVxdWVzdC50aW1lZG91dCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzLFxuICAgICAgbWVzc2FnZTogJ0hMUyByZXF1ZXN0IHRpbWVkLW91dCBhdCBVUkw6ICcgKyByZXF1ZXN0LnVyaSxcbiAgICAgIGNvZGU6IFJFUVVFU1RfRVJST1JTLlRJTUVPVVQsXG4gICAgICB4aHI6IHJlcXVlc3RcbiAgICB9O1xuICB9XG5cbiAgaWYgKHJlcXVlc3QuYWJvcnRlZCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzLFxuICAgICAgbWVzc2FnZTogJ0hMUyByZXF1ZXN0IGFib3J0ZWQgYXQgVVJMOiAnICsgcmVxdWVzdC51cmksXG4gICAgICBjb2RlOiBSRVFVRVNUX0VSUk9SUy5BQk9SVEVELFxuICAgICAgeGhyOiByZXF1ZXN0XG4gICAgfTtcbiAgfVxuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzLFxuICAgICAgbWVzc2FnZTogJ0hMUyByZXF1ZXN0IGVycm9yZWQgYXQgVVJMOiAnICsgcmVxdWVzdC51cmksXG4gICAgICBjb2RlOiBSRVFVRVNUX0VSUk9SUy5GQUlMVVJFLFxuICAgICAgeGhyOiByZXF1ZXN0XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufTtcbi8qKlxuICogSGFuZGxlIHJlc3BvbnNlcyBmb3Iga2V5IGRhdGEgYW5kIGNvbnZlcnQgdGhlIGtleSBkYXRhIHRvIHRoZSBjb3JyZWN0IGZvcm1hdFxuICogZm9yIHRoZSBkZWNyeXB0aW9uIHN0ZXAgbGF0ZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc2VnbWVudCAtIGEgc2ltcGxpZmllZCBjb3B5IG9mIHRoZSBzZWdtZW50SW5mbyBvYmplY3RcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSBTZWdtZW50TG9hZGVyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmaW5pc2hQcm9jZXNzaW5nRm4gLSBhIGNhbGxiYWNrIHRvIGV4ZWN1dGUgdG8gY29udGludWUgcHJvY2Vzc2luZ1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyByZXF1ZXN0XG4gKi9cblxuXG52YXIgaGFuZGxlS2V5UmVzcG9uc2UgPSBmdW5jdGlvbiBoYW5kbGVLZXlSZXNwb25zZShzZWdtZW50LCBmaW5pc2hQcm9jZXNzaW5nRm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChlcnJvciwgcmVxdWVzdCkge1xuICAgIHZhciByZXNwb25zZSA9IHJlcXVlc3QucmVzcG9uc2U7XG4gICAgdmFyIGVycm9yT2JqID0gaGFuZGxlRXJyb3JzKGVycm9yLCByZXF1ZXN0KTtcblxuICAgIGlmIChlcnJvck9iaikge1xuICAgICAgcmV0dXJuIGZpbmlzaFByb2Nlc3NpbmdGbihlcnJvck9iaiwgc2VnbWVudCk7XG4gICAgfVxuXG4gICAgaWYgKHJlc3BvbnNlLmJ5dGVMZW5ndGggIT09IDE2KSB7XG4gICAgICByZXR1cm4gZmluaXNoUHJvY2Vzc2luZ0ZuKHtcbiAgICAgICAgc3RhdHVzOiByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgSExTIGtleSBhdCBVUkw6ICcgKyByZXF1ZXN0LnVyaSxcbiAgICAgICAgY29kZTogUkVRVUVTVF9FUlJPUlMuRkFJTFVSRSxcbiAgICAgICAgeGhyOiByZXF1ZXN0XG4gICAgICB9LCBzZWdtZW50KTtcbiAgICB9XG5cbiAgICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhyZXNwb25zZSk7XG4gICAgc2VnbWVudC5rZXkuYnl0ZXMgPSBuZXcgVWludDMyQXJyYXkoW3ZpZXcuZ2V0VWludDMyKDApLCB2aWV3LmdldFVpbnQzMig0KSwgdmlldy5nZXRVaW50MzIoOCksIHZpZXcuZ2V0VWludDMyKDEyKV0pO1xuICAgIHJldHVybiBmaW5pc2hQcm9jZXNzaW5nRm4obnVsbCwgc2VnbWVudCk7XG4gIH07XG59O1xuLyoqXG4gKiBIYW5kbGUgaW5pdC1zZWdtZW50IHJlc3BvbnNlc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBzZWdtZW50IC0gYSBzaW1wbGlmaWVkIGNvcHkgb2YgdGhlIHNlZ21lbnRJbmZvIG9iamVjdFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tIFNlZ21lbnRMb2FkZXJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZpbmlzaFByb2Nlc3NpbmdGbiAtIGEgY2FsbGJhY2sgdG8gZXhlY3V0ZSB0byBjb250aW51ZSBwcm9jZXNzaW5nXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzIHJlcXVlc3RcbiAqL1xuXG5cbnZhciBoYW5kbGVJbml0U2VnbWVudFJlc3BvbnNlID0gZnVuY3Rpb24gaGFuZGxlSW5pdFNlZ21lbnRSZXNwb25zZShzZWdtZW50LCBjYXB0aW9uUGFyc2VyLCBmaW5pc2hQcm9jZXNzaW5nRm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChlcnJvciwgcmVxdWVzdCkge1xuICAgIHZhciByZXNwb25zZSA9IHJlcXVlc3QucmVzcG9uc2U7XG4gICAgdmFyIGVycm9yT2JqID0gaGFuZGxlRXJyb3JzKGVycm9yLCByZXF1ZXN0KTtcblxuICAgIGlmIChlcnJvck9iaikge1xuICAgICAgcmV0dXJuIGZpbmlzaFByb2Nlc3NpbmdGbihlcnJvck9iaiwgc2VnbWVudCk7XG4gICAgfSAvLyBzdG9wIHByb2Nlc3NpbmcgaWYgcmVjZWl2ZWQgZW1wdHkgY29udGVudFxuXG5cbiAgICBpZiAocmVzcG9uc2UuYnl0ZUxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGZpbmlzaFByb2Nlc3NpbmdGbih7XG4gICAgICAgIHN0YXR1czogcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgIG1lc3NhZ2U6ICdFbXB0eSBITFMgc2VnbWVudCBjb250ZW50IGF0IFVSTDogJyArIHJlcXVlc3QudXJpLFxuICAgICAgICBjb2RlOiBSRVFVRVNUX0VSUk9SUy5GQUlMVVJFLFxuICAgICAgICB4aHI6IHJlcXVlc3RcbiAgICAgIH0sIHNlZ21lbnQpO1xuICAgIH1cblxuICAgIHNlZ21lbnQubWFwLmJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkocmVxdWVzdC5yZXNwb25zZSk7IC8vIEluaXRpYWxpemUgQ2FwdGlvblBhcnNlciBpZiBpdCBoYXNuJ3QgYmVlbiB5ZXRcblxuICAgIGlmICghY2FwdGlvblBhcnNlci5pc0luaXRpYWxpemVkKCkpIHtcbiAgICAgIGNhcHRpb25QYXJzZXIuaW5pdCgpO1xuICAgIH1cblxuICAgIHNlZ21lbnQubWFwLnRpbWVzY2FsZXMgPSBtcDRwcm9iZS50aW1lc2NhbGUoc2VnbWVudC5tYXAuYnl0ZXMpO1xuICAgIHNlZ21lbnQubWFwLnZpZGVvVHJhY2tJZHMgPSBtcDRwcm9iZS52aWRlb1RyYWNrSWRzKHNlZ21lbnQubWFwLmJ5dGVzKTtcbiAgICByZXR1cm4gZmluaXNoUHJvY2Vzc2luZ0ZuKG51bGwsIHNlZ21lbnQpO1xuICB9O1xufTtcbi8qKlxuICogUmVzcG9uc2UgaGFuZGxlciBmb3Igc2VnbWVudC1yZXF1ZXN0cyBiZWluZyBzdXJlIHRvIHNldCB0aGUgY29ycmVjdFxuICogcHJvcGVydHkgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHNlZ21lbnQgaXMgZW5jcnlwZWQgb3Igbm90XG4gKiBBbHNvIHJlY29yZHMgYW5kIGtlZXBzIHRyYWNrIG9mIHN0YXRzIHRoYXQgYXJlIHVzZWQgZm9yIEFCUiBwdXJwb3Nlc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBzZWdtZW50IC0gYSBzaW1wbGlmaWVkIGNvcHkgb2YgdGhlIHNlZ21lbnRJbmZvIG9iamVjdFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tIFNlZ21lbnRMb2FkZXJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZpbmlzaFByb2Nlc3NpbmdGbiAtIGEgY2FsbGJhY2sgdG8gZXhlY3V0ZSB0byBjb250aW51ZSBwcm9jZXNzaW5nXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzIHJlcXVlc3RcbiAqL1xuXG5cbnZhciBoYW5kbGVTZWdtZW50UmVzcG9uc2UgPSBmdW5jdGlvbiBoYW5kbGVTZWdtZW50UmVzcG9uc2Uoc2VnbWVudCwgY2FwdGlvblBhcnNlciwgZmluaXNoUHJvY2Vzc2luZ0ZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoZXJyb3IsIHJlcXVlc3QpIHtcbiAgICB2YXIgcmVzcG9uc2UgPSByZXF1ZXN0LnJlc3BvbnNlO1xuICAgIHZhciBlcnJvck9iaiA9IGhhbmRsZUVycm9ycyhlcnJvciwgcmVxdWVzdCk7XG4gICAgdmFyIHBhcnNlZCA9IHZvaWQgMDtcblxuICAgIGlmIChlcnJvck9iaikge1xuICAgICAgcmV0dXJuIGZpbmlzaFByb2Nlc3NpbmdGbihlcnJvck9iaiwgc2VnbWVudCk7XG4gICAgfSAvLyBzdG9wIHByb2Nlc3NpbmcgaWYgcmVjZWl2ZWQgZW1wdHkgY29udGVudFxuXG5cbiAgICBpZiAocmVzcG9uc2UuYnl0ZUxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGZpbmlzaFByb2Nlc3NpbmdGbih7XG4gICAgICAgIHN0YXR1czogcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgIG1lc3NhZ2U6ICdFbXB0eSBITFMgc2VnbWVudCBjb250ZW50IGF0IFVSTDogJyArIHJlcXVlc3QudXJpLFxuICAgICAgICBjb2RlOiBSRVFVRVNUX0VSUk9SUy5GQUlMVVJFLFxuICAgICAgICB4aHI6IHJlcXVlc3RcbiAgICAgIH0sIHNlZ21lbnQpO1xuICAgIH1cblxuICAgIHNlZ21lbnQuc3RhdHMgPSBnZXRSZXF1ZXN0U3RhdHMocmVxdWVzdCk7XG5cbiAgICBpZiAoc2VnbWVudC5rZXkpIHtcbiAgICAgIHNlZ21lbnQuZW5jcnlwdGVkQnl0ZXMgPSBuZXcgVWludDhBcnJheShyZXF1ZXN0LnJlc3BvbnNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VnbWVudC5ieXRlcyA9IG5ldyBVaW50OEFycmF5KHJlcXVlc3QucmVzcG9uc2UpO1xuICAgIH0gLy8gVGhpcyBpcyBsaWtlbHkgYW4gRk1QNCBhbmQgaGFzIHRoZSBpbml0IHNlZ21lbnQuXG4gICAgLy8gUnVuIHRocm91Z2ggdGhlIENhcHRpb25QYXJzZXIgaW4gY2FzZSB0aGVyZSBhcmUgY2FwdGlvbnMuXG5cblxuICAgIGlmIChzZWdtZW50Lm1hcCAmJiBzZWdtZW50Lm1hcC5ieXRlcykge1xuICAgICAgLy8gSW5pdGlhbGl6ZSBDYXB0aW9uUGFyc2VyIGlmIGl0IGhhc24ndCBiZWVuIHlldFxuICAgICAgaWYgKCFjYXB0aW9uUGFyc2VyLmlzSW5pdGlhbGl6ZWQoKSkge1xuICAgICAgICBjYXB0aW9uUGFyc2VyLmluaXQoKTtcbiAgICAgIH1cblxuICAgICAgcGFyc2VkID0gY2FwdGlvblBhcnNlci5wYXJzZShzZWdtZW50LmJ5dGVzLCBzZWdtZW50Lm1hcC52aWRlb1RyYWNrSWRzLCBzZWdtZW50Lm1hcC50aW1lc2NhbGVzKTtcblxuICAgICAgaWYgKHBhcnNlZCAmJiBwYXJzZWQuY2FwdGlvbnMpIHtcbiAgICAgICAgc2VnbWVudC5jYXB0aW9uU3RyZWFtcyA9IHBhcnNlZC5jYXB0aW9uU3RyZWFtcztcbiAgICAgICAgc2VnbWVudC5mbXA0Q2FwdGlvbnMgPSBwYXJzZWQuY2FwdGlvbnM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbmlzaFByb2Nlc3NpbmdGbihudWxsLCBzZWdtZW50KTtcbiAgfTtcbn07XG4vKipcbiAqIERlY3J5cHQgdGhlIHNlZ21lbnQgdmlhIHRoZSBkZWNyeXB0aW9uIHdlYiB3b3JrZXJcbiAqXG4gKiBAcGFyYW0ge1dlYldvcmtlcn0gZGVjcnlwdGVyIC0gYSBXZWJXb3JrZXIgaW50ZXJmYWNlIHRvIEFFUy0xMjggZGVjcnlwdGlvbiByb3V0aW5lc1xuICogQHBhcmFtIHtPYmplY3R9IHNlZ21lbnQgLSBhIHNpbXBsaWZpZWQgY29weSBvZiB0aGUgc2VnbWVudEluZm8gb2JqZWN0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gU2VnbWVudExvYWRlclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZG9uZUZuIC0gYSBjYWxsYmFjayB0aGF0IGlzIGV4ZWN1dGVkIGFmdGVyIGRlY3J5cHRpb24gaGFzIGNvbXBsZXRlZFxuICovXG5cblxudmFyIGRlY3J5cHRTZWdtZW50ID0gZnVuY3Rpb24gZGVjcnlwdFNlZ21lbnQoZGVjcnlwdGVyLCBzZWdtZW50LCBkb25lRm4pIHtcbiAgdmFyIGRlY3J5cHRpb25IYW5kbGVyID0gZnVuY3Rpb24gZGVjcnlwdGlvbkhhbmRsZXIoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuZGF0YS5zb3VyY2UgPT09IHNlZ21lbnQucmVxdWVzdElkKSB7XG4gICAgICBkZWNyeXB0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGRlY3J5cHRpb25IYW5kbGVyKTtcbiAgICAgIHZhciBkZWNyeXB0ZWQgPSBldmVudC5kYXRhLmRlY3J5cHRlZDtcbiAgICAgIHNlZ21lbnQuYnl0ZXMgPSBuZXcgVWludDhBcnJheShkZWNyeXB0ZWQuYnl0ZXMsIGRlY3J5cHRlZC5ieXRlT2Zmc2V0LCBkZWNyeXB0ZWQuYnl0ZUxlbmd0aCk7XG4gICAgICByZXR1cm4gZG9uZUZuKG51bGwsIHNlZ21lbnQpO1xuICAgIH1cbiAgfTtcblxuICBkZWNyeXB0ZXIuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGRlY3J5cHRpb25IYW5kbGVyKTsgLy8gdGhpcyBpcyBhbiBlbmNyeXB0ZWQgc2VnbWVudFxuICAvLyBpbmNyZW1lbnRhbGx5IGRlY3J5cHQgdGhlIHNlZ21lbnRcblxuICBkZWNyeXB0ZXIucG9zdE1lc3NhZ2UoY3JlYXRlVHJhbnNmZXJhYmxlTWVzc2FnZSh7XG4gICAgc291cmNlOiBzZWdtZW50LnJlcXVlc3RJZCxcbiAgICBlbmNyeXB0ZWQ6IHNlZ21lbnQuZW5jcnlwdGVkQnl0ZXMsXG4gICAga2V5OiBzZWdtZW50LmtleS5ieXRlcyxcbiAgICBpdjogc2VnbWVudC5rZXkuaXZcbiAgfSksIFtzZWdtZW50LmVuY3J5cHRlZEJ5dGVzLmJ1ZmZlciwgc2VnbWVudC5rZXkuYnl0ZXMuYnVmZmVyXSk7XG59O1xuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdhaXRzIGZvciBhbGwgWEhScyB0byBmaW5pc2ggKHdpdGggZWl0aGVyIHN1Y2Nlc3Mgb3IgZmFpbHVyZSlcbiAqIGJlZm9yZSBjb250aW51ZWluZyBwcm9jZXNzaW5nIHZpYSBpdCdzIGNhbGxiYWNrLiBUaGUgZnVuY3Rpb24gZ2F0aGVycyBlcnJvcnNcbiAqIGZyb20gZWFjaCByZXF1ZXN0IGludG8gYSBzaW5nbGUgZXJyb3JzIGFycmF5IHNvIHRoYXQgdGhlIGVycm9yIHN0YXR1cyBmb3JcbiAqIGVhY2ggcmVxdWVzdCBjYW4gYmUgZXhhbWluZWQgbGF0ZXIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFjdGl2ZVhocnMgLSBhbiBvYmplY3QgdGhhdCB0cmFja3MgYWxsIFhIUiByZXF1ZXN0c1xuICogQHBhcmFtIHtXZWJXb3JrZXJ9IGRlY3J5cHRlciAtIGEgV2ViV29ya2VyIGludGVyZmFjZSB0byBBRVMtMTI4IGRlY3J5cHRpb24gcm91dGluZXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGRvbmVGbiAtIGEgY2FsbGJhY2sgdGhhdCBpcyBleGVjdXRlZCBhZnRlciBhbGwgcmVzb3VyY2VzIGhhdmUgYmVlblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRlZCBhbmQgYW55IGRlY3J5cHRpb24gY29tcGxldGVkXG4gKi9cblxuXG52YXIgd2FpdEZvckNvbXBsZXRpb24gPSBmdW5jdGlvbiB3YWl0Rm9yQ29tcGxldGlvbihhY3RpdmVYaHJzLCBkZWNyeXB0ZXIsIGRvbmVGbikge1xuICB2YXIgY291bnQgPSAwO1xuICB2YXIgZGlkRXJyb3IgPSBmYWxzZTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChlcnJvciwgc2VnbWVudCkge1xuICAgIGlmIChkaWRFcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChlcnJvcikge1xuICAgICAgZGlkRXJyb3IgPSB0cnVlOyAvLyBJZiB0aGVyZSBhcmUgZXJyb3JzLCB3ZSBoYXZlIHRvIGFib3J0IGFueSBvdXRzdGFuZGluZyByZXF1ZXN0c1xuXG4gICAgICBhYm9ydEFsbChhY3RpdmVYaHJzKTsgLy8gRXZlbiB0aG91Z2ggdGhlIHJlcXVlc3RzIGFib3ZlIGFyZSBhYm9ydGVkLCBhbmQgaW4gdGhlb3J5IHdlIGNvdWxkIHdhaXQgdW50aWwgd2VcbiAgICAgIC8vIGhhbmRsZSB0aGUgYWJvcnRlZCBldmVudHMgZnJvbSB0aG9zZSByZXF1ZXN0cywgdGhlcmUgYXJlIHNvbWUgY2FzZXMgd2hlcmUgd2UgbWF5XG4gICAgICAvLyBuZXZlciBnZXQgYW4gYWJvcnRlZCBldmVudC4gRm9yIGluc3RhbmNlLCBpZiB0aGUgbmV0d29yayBjb25uZWN0aW9uIGlzIGxvc3QgYW5kXG4gICAgICAvLyB0aGVyZSB3ZXJlIHR3byByZXF1ZXN0cywgdGhlIGZpcnN0IG1heSBoYXZlIHRyaWdnZXJlZCBhbiBlcnJvciBpbW1lZGlhdGVseSwgd2hpbGVcbiAgICAgIC8vIHRoZSBzZWNvbmQgcmVxdWVzdCByZW1haW5zIHVuc2VudC4gSW4gdGhhdCBjYXNlLCB0aGUgYWJvcnRlZCBhbGdvcml0aG0gd2lsbCBub3RcbiAgICAgIC8vIHRyaWdnZXIgYW4gYWJvcnQ6IHNlZSBodHRwczovL3hoci5zcGVjLndoYXR3Zy5vcmcvI3RoZS1hYm9ydCgpLW1ldGhvZFxuICAgICAgLy9cbiAgICAgIC8vIFdlIGFsc28gY2FuJ3QgcmVseSBvbiB0aGUgcmVhZHkgc3RhdGUgb2YgdGhlIFhIUiwgc2luY2UgdGhlIHJlcXVlc3QgdGhhdFxuICAgICAgLy8gdHJpZ2dlcmVkIHRoZSBjb25uZWN0aW9uIGVycm9yIG1heSBhbHNvIHNob3cgYXMgYSByZWFkeSBzdGF0ZSBvZiAwICh1bnNlbnQpLlxuICAgICAgLy8gVGhlcmVmb3JlLCB3ZSBoYXZlIHRvIGZpbmlzaCB0aGlzIGdyb3VwIG9mIHJlcXVlc3RzIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSBmaXJzdFxuICAgICAgLy8gc2VlbiBlcnJvci5cblxuICAgICAgcmV0dXJuIGRvbmVGbihlcnJvciwgc2VnbWVudCk7XG4gICAgfVxuXG4gICAgY291bnQgKz0gMTtcblxuICAgIGlmIChjb3VudCA9PT0gYWN0aXZlWGhycy5sZW5ndGgpIHtcbiAgICAgIC8vIEtlZXAgdHJhY2sgb2Ygd2hlbiAqYWxsKiBvZiB0aGUgcmVxdWVzdHMgaGF2ZSBjb21wbGV0ZWRcbiAgICAgIHNlZ21lbnQuZW5kT2ZBbGxSZXF1ZXN0cyA9IERhdGUubm93KCk7XG5cbiAgICAgIGlmIChzZWdtZW50LmVuY3J5cHRlZEJ5dGVzKSB7XG4gICAgICAgIHJldHVybiBkZWNyeXB0U2VnbWVudChkZWNyeXB0ZXIsIHNlZ21lbnQsIGRvbmVGbik7XG4gICAgICB9IC8vIE90aGVyd2lzZSwgZXZlcnl0aGluZyBpcyByZWFkeSBqdXN0IGNvbnRpbnVlXG5cblxuICAgICAgcmV0dXJuIGRvbmVGbihudWxsLCBzZWdtZW50KTtcbiAgICB9XG4gIH07XG59O1xuLyoqXG4gKiBTaW1wbGUgcHJvZ3Jlc3MgZXZlbnQgY2FsbGJhY2sgaGFuZGxlciB0aGF0IGdhdGhlcnMgc29tZSBzdGF0cyBiZWZvcmVcbiAqIGV4ZWN1dGluZyBhIHByb3ZpZGVkIGNhbGxiYWNrIHdpdGggdGhlIGBzZWdtZW50YCBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc2VnbWVudCAtIGEgc2ltcGxpZmllZCBjb3B5IG9mIHRoZSBzZWdtZW50SW5mbyBvYmplY3RcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSBTZWdtZW50TG9hZGVyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9ncmVzc0ZuIC0gYSBjYWxsYmFjayB0aGF0IGlzIGV4ZWN1dGVkIGVhY2ggdGltZSBhIHByb2dyZXNzIGV2ZW50XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXMgcmVjZWl2ZWRcbiAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IC0gdGhlIHByb2dyZXNzIGV2ZW50IG9iamVjdCBmcm9tIFhNTEh0dHBSZXF1ZXN0XG4gKi9cblxuXG52YXIgaGFuZGxlUHJvZ3Jlc3MgPSBmdW5jdGlvbiBoYW5kbGVQcm9ncmVzcyhzZWdtZW50LCBwcm9ncmVzc0ZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBzZWdtZW50LnN0YXRzID0gdmlkZW9qcyQxLm1lcmdlT3B0aW9ucyhzZWdtZW50LnN0YXRzLCBnZXRQcm9ncmVzc1N0YXRzKGV2ZW50KSk7IC8vIHJlY29yZCB0aGUgdGltZSB0aGF0IHdlIHJlY2VpdmUgdGhlIGZpcnN0IGJ5dGUgb2YgZGF0YVxuXG4gICAgaWYgKCFzZWdtZW50LnN0YXRzLmZpcnN0Qnl0ZXNSZWNlaXZlZEF0ICYmIHNlZ21lbnQuc3RhdHMuYnl0ZXNSZWNlaXZlZCkge1xuICAgICAgc2VnbWVudC5zdGF0cy5maXJzdEJ5dGVzUmVjZWl2ZWRBdCA9IERhdGUubm93KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb2dyZXNzRm4oZXZlbnQsIHNlZ21lbnQpO1xuICB9O1xufTtcbi8qKlxuICogTG9hZCBhbGwgcmVzb3VyY2VzIGFuZCBkb2VzIGFueSBwcm9jZXNzaW5nIG5lY2Vzc2FyeSBmb3IgYSBtZWRpYS1zZWdtZW50XG4gKlxuICogRmVhdHVyZXM6XG4gKiAgIGRlY3J5cHRzIHRoZSBtZWRpYS1zZWdtZW50IGlmIGl0IGhhcyBhIGtleSB1cmkgYW5kIGFuIGl2XG4gKiAgIGFib3J0cyAqYWxsKiByZXF1ZXN0cyBpZiAqYW55KiBvbmUgcmVxdWVzdCBmYWlsc1xuICpcbiAqIFRoZSBzZWdtZW50IG9iamVjdCwgYXQgbWluaW11bSwgaGFzIHRoZSBmb2xsb3dpbmcgZm9ybWF0OlxuICoge1xuICogICByZXNvbHZlZFVyaTogU3RyaW5nLFxuICogICBbYnl0ZXJhbmdlXToge1xuICogICAgIG9mZnNldDogTnVtYmVyLFxuICogICAgIGxlbmd0aDogTnVtYmVyXG4gKiAgIH0sXG4gKiAgIFtrZXldOiB7XG4gKiAgICAgcmVzb2x2ZWRVcmk6IFN0cmluZ1xuICogICAgIFtieXRlcmFuZ2VdOiB7XG4gKiAgICAgICBvZmZzZXQ6IE51bWJlcixcbiAqICAgICAgIGxlbmd0aDogTnVtYmVyXG4gKiAgICAgfSxcbiAqICAgICBpdjoge1xuICogICAgICAgYnl0ZXM6IFVpbnQzMkFycmF5XG4gKiAgICAgfVxuICogICB9LFxuICogICBbbWFwXToge1xuICogICAgIHJlc29sdmVkVXJpOiBTdHJpbmcsXG4gKiAgICAgW2J5dGVyYW5nZV06IHtcbiAqICAgICAgIG9mZnNldDogTnVtYmVyLFxuICogICAgICAgbGVuZ3RoOiBOdW1iZXJcbiAqICAgICB9LFxuICogICAgIFtieXRlc106IFVpbnQ4QXJyYXlcbiAqICAgfVxuICogfVxuICogLi4ud2hlcmUgW25hbWVdIGRlbm90ZXMgb3B0aW9uYWwgcHJvcGVydGllc1xuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHhociAtIGFuIGluc3RhbmNlIG9mIHRoZSB4aHIgd3JhcHBlciBpbiB4aHIuanNcbiAqIEBwYXJhbSB7T2JqZWN0fSB4aHJPcHRpb25zIC0gdGhlIGJhc2Ugb3B0aW9ucyB0byBwcm92aWRlIHRvIGFsbCB4aHIgcmVxdWVzdHNcbiAqIEBwYXJhbSB7V2ViV29ya2VyfSBkZWNyeXB0aW9uV29ya2VyIC0gYSBXZWJXb3JrZXIgaW50ZXJmYWNlIHRvIEFFUy0xMjhcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjcnlwdGlvbiByb3V0aW5lc1xuICogQHBhcmFtIHtPYmplY3R9IHNlZ21lbnQgLSBhIHNpbXBsaWZpZWQgY29weSBvZiB0aGUgc2VnbWVudEluZm8gb2JqZWN0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gU2VnbWVudExvYWRlclxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJvZ3Jlc3NGbiAtIGEgY2FsbGJhY2sgdGhhdCByZWNlaXZlcyBwcm9ncmVzcyBldmVudHMgZnJvbSB0aGUgbWFpblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnQncyB4aHIgcmVxdWVzdFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZG9uZUZuIC0gYSBjYWxsYmFjayB0aGF0IGlzIGV4ZWN1dGVkIG9ubHkgb25jZSBhbGwgcmVxdWVzdHMgaGF2ZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VlZGVkIG9yIGZhaWxlZFxuICogQHJldHVybnMge0Z1bmN0aW9ufSBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gaW52b2tlZCwgaW1tZWRpYXRlbHkgYWJvcnRzIGFsbFxuICogICAgICAgICAgICAgICAgICAgICBvdXRzdGFuZGluZyByZXF1ZXN0c1xuICovXG5cblxudmFyIG1lZGlhU2VnbWVudFJlcXVlc3QgPSBmdW5jdGlvbiBtZWRpYVNlZ21lbnRSZXF1ZXN0KHhociQkMSwgeGhyT3B0aW9ucywgZGVjcnlwdGlvbldvcmtlciwgY2FwdGlvblBhcnNlciwgc2VnbWVudCwgcHJvZ3Jlc3NGbiwgZG9uZUZuKSB7XG4gIHZhciBhY3RpdmVYaHJzID0gW107XG4gIHZhciBmaW5pc2hQcm9jZXNzaW5nRm4gPSB3YWl0Rm9yQ29tcGxldGlvbihhY3RpdmVYaHJzLCBkZWNyeXB0aW9uV29ya2VyLCBkb25lRm4pOyAvLyBvcHRpb25hbGx5LCByZXF1ZXN0IHRoZSBkZWNyeXB0aW9uIGtleVxuXG4gIGlmIChzZWdtZW50LmtleSkge1xuICAgIHZhciBrZXlSZXF1ZXN0T3B0aW9ucyA9IHZpZGVvanMkMS5tZXJnZU9wdGlvbnMoeGhyT3B0aW9ucywge1xuICAgICAgdXJpOiBzZWdtZW50LmtleS5yZXNvbHZlZFVyaSxcbiAgICAgIHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJ1xuICAgIH0pO1xuICAgIHZhciBrZXlSZXF1ZXN0Q2FsbGJhY2sgPSBoYW5kbGVLZXlSZXNwb25zZShzZWdtZW50LCBmaW5pc2hQcm9jZXNzaW5nRm4pO1xuICAgIHZhciBrZXlYaHIgPSB4aHIkJDEoa2V5UmVxdWVzdE9wdGlvbnMsIGtleVJlcXVlc3RDYWxsYmFjayk7XG4gICAgYWN0aXZlWGhycy5wdXNoKGtleVhocik7XG4gIH0gLy8gb3B0aW9uYWxseSwgcmVxdWVzdCB0aGUgYXNzb2NpYXRlZCBtZWRpYSBpbml0IHNlZ21lbnRcblxuXG4gIGlmIChzZWdtZW50Lm1hcCAmJiAhc2VnbWVudC5tYXAuYnl0ZXMpIHtcbiAgICB2YXIgaW5pdFNlZ21lbnRPcHRpb25zID0gdmlkZW9qcyQxLm1lcmdlT3B0aW9ucyh4aHJPcHRpb25zLCB7XG4gICAgICB1cmk6IHNlZ21lbnQubWFwLnJlc29sdmVkVXJpLFxuICAgICAgcmVzcG9uc2VUeXBlOiAnYXJyYXlidWZmZXInLFxuICAgICAgaGVhZGVyczogc2VnbWVudFhockhlYWRlcnMoc2VnbWVudC5tYXApXG4gICAgfSk7XG4gICAgdmFyIGluaXRTZWdtZW50UmVxdWVzdENhbGxiYWNrID0gaGFuZGxlSW5pdFNlZ21lbnRSZXNwb25zZShzZWdtZW50LCBjYXB0aW9uUGFyc2VyLCBmaW5pc2hQcm9jZXNzaW5nRm4pO1xuICAgIHZhciBpbml0U2VnbWVudFhociA9IHhociQkMShpbml0U2VnbWVudE9wdGlvbnMsIGluaXRTZWdtZW50UmVxdWVzdENhbGxiYWNrKTtcbiAgICBhY3RpdmVYaHJzLnB1c2goaW5pdFNlZ21lbnRYaHIpO1xuICB9XG5cbiAgdmFyIHNlZ21lbnRSZXF1ZXN0T3B0aW9ucyA9IHZpZGVvanMkMS5tZXJnZU9wdGlvbnMoeGhyT3B0aW9ucywge1xuICAgIHVyaTogc2VnbWVudC5yZXNvbHZlZFVyaSxcbiAgICByZXNwb25zZVR5cGU6ICdhcnJheWJ1ZmZlcicsXG4gICAgaGVhZGVyczogc2VnbWVudFhockhlYWRlcnMoc2VnbWVudClcbiAgfSk7XG4gIHZhciBzZWdtZW50UmVxdWVzdENhbGxiYWNrID0gaGFuZGxlU2VnbWVudFJlc3BvbnNlKHNlZ21lbnQsIGNhcHRpb25QYXJzZXIsIGZpbmlzaFByb2Nlc3NpbmdGbik7XG4gIHZhciBzZWdtZW50WGhyID0geGhyJCQxKHNlZ21lbnRSZXF1ZXN0T3B0aW9ucywgc2VnbWVudFJlcXVlc3RDYWxsYmFjayk7XG4gIHNlZ21lbnRYaHIuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBoYW5kbGVQcm9ncmVzcyhzZWdtZW50LCBwcm9ncmVzc0ZuKSk7XG4gIGFjdGl2ZVhocnMucHVzaChzZWdtZW50WGhyKTtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYWJvcnRBbGwoYWN0aXZlWGhycyk7XG4gIH07XG59OyAvLyBVdGlsaXRpZXNcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBDU1MgdmFsdWUgZm9yIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkgb24gYW4gZWxlbWVudFxuICogdXNpbmcgYGdldENvbXB1dGVkU3R5bGVgLiBGaXJlZm94IGhhcyBhIGxvbmctc3RhbmRpbmcgaXNzdWUgd2hlcmVcbiAqIGdldENvbXB1dGVkU3R5bGUoKSBtYXkgcmV0dXJuIG51bGwgd2hlbiBydW5uaW5nIGluIGFuIGlmcmFtZSB3aXRoXG4gKiBgZGlzcGxheTogbm9uZWAuXG4gKlxuICogQHNlZSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD01NDgzOTdcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsIHRoZSBodG1sZWxlbWVudCB0byB3b3JrIG9uXG4gKiBAcGFyYW0ge3N0cmluZ30gdGhlIHByb3ByZXR5IHRvIGdldCB0aGUgc3R5bGUgZm9yXG4gKi9cblxuXG52YXIgc2FmZUdldENvbXB1dGVkU3R5bGUgPSBmdW5jdGlvbiBzYWZlR2V0Q29tcHV0ZWRTdHlsZShlbCwgcHJvcGVydHkpIHtcbiAgdmFyIHJlc3VsdCA9IHZvaWQgMDtcblxuICBpZiAoIWVsKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgcmVzdWx0ID0gd2luZG93JDEuZ2V0Q29tcHV0ZWRTdHlsZShlbCk7XG5cbiAgaWYgKCFyZXN1bHQpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0W3Byb3BlcnR5XTtcbn07XG4vKipcbiAqIFJlc3VhYmxlIHN0YWJsZSBzb3J0IGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtQbGF5bGlzdHN9IGFycmF5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBzb3J0Rm4gRGlmZmVyZW50IGNvbXBhcmF0b3JzXG4gKiBAZnVuY3Rpb24gc3RhYmxlU29ydFxuICovXG5cblxudmFyIHN0YWJsZVNvcnQgPSBmdW5jdGlvbiBzdGFibGVTb3J0KGFycmF5LCBzb3J0Rm4pIHtcbiAgdmFyIG5ld0FycmF5ID0gYXJyYXkuc2xpY2UoKTtcbiAgYXJyYXkuc29ydChmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcbiAgICB2YXIgY21wID0gc29ydEZuKGxlZnQsIHJpZ2h0KTtcblxuICAgIGlmIChjbXAgPT09IDApIHtcbiAgICAgIHJldHVybiBuZXdBcnJheS5pbmRleE9mKGxlZnQpIC0gbmV3QXJyYXkuaW5kZXhPZihyaWdodCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNtcDtcbiAgfSk7XG59O1xuLyoqXG4gKiBBIGNvbXBhcmF0b3IgZnVuY3Rpb24gdG8gc29ydCB0d28gcGxheWxpc3Qgb2JqZWN0IGJ5IGJhbmR3aWR0aC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gbGVmdCBhIG1lZGlhIHBsYXlsaXN0IG9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IHJpZ2h0IGEgbWVkaWEgcGxheWxpc3Qgb2JqZWN0XG4gKiBAcmV0dXJuIHtOdW1iZXJ9IEdyZWF0ZXIgdGhhbiB6ZXJvIGlmIHRoZSBiYW5kd2lkdGggYXR0cmlidXRlIG9mXG4gKiBsZWZ0IGlzIGdyZWF0ZXIgdGhhbiB0aGUgY29ycmVzcG9uZGluZyBhdHRyaWJ1dGUgb2YgcmlnaHQuIExlc3NcbiAqIHRoYW4gemVybyBpZiB0aGUgYmFuZHdpZHRoIG9mIHJpZ2h0IGlzIGdyZWF0ZXIgdGhhbiBsZWZ0IGFuZFxuICogZXhhY3RseSB6ZXJvIGlmIHRoZSB0d28gYXJlIGVxdWFsLlxuICovXG5cblxudmFyIGNvbXBhcmVQbGF5bGlzdEJhbmR3aWR0aCA9IGZ1bmN0aW9uIGNvbXBhcmVQbGF5bGlzdEJhbmR3aWR0aChsZWZ0LCByaWdodCkge1xuICB2YXIgbGVmdEJhbmR3aWR0aCA9IHZvaWQgMDtcbiAgdmFyIHJpZ2h0QmFuZHdpZHRoID0gdm9pZCAwO1xuXG4gIGlmIChsZWZ0LmF0dHJpYnV0ZXMuQkFORFdJRFRIKSB7XG4gICAgbGVmdEJhbmR3aWR0aCA9IGxlZnQuYXR0cmlidXRlcy5CQU5EV0lEVEg7XG4gIH1cblxuICBsZWZ0QmFuZHdpZHRoID0gbGVmdEJhbmR3aWR0aCB8fCB3aW5kb3ckMS5OdW1iZXIuTUFYX1ZBTFVFO1xuXG4gIGlmIChyaWdodC5hdHRyaWJ1dGVzLkJBTkRXSURUSCkge1xuICAgIHJpZ2h0QmFuZHdpZHRoID0gcmlnaHQuYXR0cmlidXRlcy5CQU5EV0lEVEg7XG4gIH1cblxuICByaWdodEJhbmR3aWR0aCA9IHJpZ2h0QmFuZHdpZHRoIHx8IHdpbmRvdyQxLk51bWJlci5NQVhfVkFMVUU7XG4gIHJldHVybiBsZWZ0QmFuZHdpZHRoIC0gcmlnaHRCYW5kd2lkdGg7XG59O1xuLyoqXG4gKiBBIGNvbXBhcmF0b3IgZnVuY3Rpb24gdG8gc29ydCB0d28gcGxheWxpc3Qgb2JqZWN0IGJ5IHJlc29sdXRpb24gKHdpZHRoKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBsZWZ0IGEgbWVkaWEgcGxheWxpc3Qgb2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gcmlnaHQgYSBtZWRpYSBwbGF5bGlzdCBvYmplY3RcbiAqIEByZXR1cm4ge051bWJlcn0gR3JlYXRlciB0aGFuIHplcm8gaWYgdGhlIHJlc29sdXRpb24ud2lkdGggYXR0cmlidXRlIG9mXG4gKiBsZWZ0IGlzIGdyZWF0ZXIgdGhhbiB0aGUgY29ycmVzcG9uZGluZyBhdHRyaWJ1dGUgb2YgcmlnaHQuIExlc3NcbiAqIHRoYW4gemVybyBpZiB0aGUgcmVzb2x1dGlvbi53aWR0aCBvZiByaWdodCBpcyBncmVhdGVyIHRoYW4gbGVmdCBhbmRcbiAqIGV4YWN0bHkgemVybyBpZiB0aGUgdHdvIGFyZSBlcXVhbC5cbiAqL1xuXG5cbnZhciBjb21wYXJlUGxheWxpc3RSZXNvbHV0aW9uID0gZnVuY3Rpb24gY29tcGFyZVBsYXlsaXN0UmVzb2x1dGlvbihsZWZ0LCByaWdodCkge1xuICB2YXIgbGVmdFdpZHRoID0gdm9pZCAwO1xuICB2YXIgcmlnaHRXaWR0aCA9IHZvaWQgMDtcblxuICBpZiAobGVmdC5hdHRyaWJ1dGVzLlJFU09MVVRJT04gJiYgbGVmdC5hdHRyaWJ1dGVzLlJFU09MVVRJT04ud2lkdGgpIHtcbiAgICBsZWZ0V2lkdGggPSBsZWZ0LmF0dHJpYnV0ZXMuUkVTT0xVVElPTi53aWR0aDtcbiAgfVxuXG4gIGxlZnRXaWR0aCA9IGxlZnRXaWR0aCB8fCB3aW5kb3ckMS5OdW1iZXIuTUFYX1ZBTFVFO1xuXG4gIGlmIChyaWdodC5hdHRyaWJ1dGVzLlJFU09MVVRJT04gJiYgcmlnaHQuYXR0cmlidXRlcy5SRVNPTFVUSU9OLndpZHRoKSB7XG4gICAgcmlnaHRXaWR0aCA9IHJpZ2h0LmF0dHJpYnV0ZXMuUkVTT0xVVElPTi53aWR0aDtcbiAgfVxuXG4gIHJpZ2h0V2lkdGggPSByaWdodFdpZHRoIHx8IHdpbmRvdyQxLk51bWJlci5NQVhfVkFMVUU7IC8vIE5PVEUgLSBGYWxsYmFjayB0byBiYW5kd2lkdGggc29ydCBhcyBhcHByb3ByaWF0ZSBpbiBjYXNlcyB3aGVyZSBtdWx0aXBsZSByZW5kaXRpb25zXG4gIC8vIGhhdmUgdGhlIHNhbWUgbWVkaWEgZGltZW5zaW9ucy8gcmVzb2x1dGlvblxuXG4gIGlmIChsZWZ0V2lkdGggPT09IHJpZ2h0V2lkdGggJiYgbGVmdC5hdHRyaWJ1dGVzLkJBTkRXSURUSCAmJiByaWdodC5hdHRyaWJ1dGVzLkJBTkRXSURUSCkge1xuICAgIHJldHVybiBsZWZ0LmF0dHJpYnV0ZXMuQkFORFdJRFRIIC0gcmlnaHQuYXR0cmlidXRlcy5CQU5EV0lEVEg7XG4gIH1cblxuICByZXR1cm4gbGVmdFdpZHRoIC0gcmlnaHRXaWR0aDtcbn07XG4vKipcbiAqIENob29zZXMgdGhlIGFwcHJvcHJpYXRlIG1lZGlhIHBsYXlsaXN0IGJhc2VkIG9uIGJhbmR3aWR0aCBhbmQgcGxheWVyIHNpemVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gbWFzdGVyXG4gKiAgICAgICAgT2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtYXN0ZXIgbWFuaWZlc3RcbiAqIEBwYXJhbSB7TnVtYmVyfSBwbGF5ZXJCYW5kd2lkdGhcbiAqICAgICAgICBDdXJyZW50IGNhbGN1bGF0ZWQgYmFuZHdpZHRoIG9mIHRoZSBwbGF5ZXJcbiAqIEBwYXJhbSB7TnVtYmVyfSBwbGF5ZXJXaWR0aFxuICogICAgICAgIEN1cnJlbnQgd2lkdGggb2YgdGhlIHBsYXllciBlbGVtZW50XG4gKiBAcGFyYW0ge051bWJlcn0gcGxheWVySGVpZ2h0XG4gKiAgICAgICAgQ3VycmVudCBoZWlnaHQgb2YgdGhlIHBsYXllciBlbGVtZW50XG4gKiBAcGFyYW0ge0Jvb2xlYW59IGxpbWl0UmVuZGl0aW9uQnlQbGF5ZXJEaW1lbnNpb25zXG4gKiAgICAgICAgVHJ1ZSBpZiB0aGUgcGxheWVyIHdpZHRoIGFuZCBoZWlnaHQgc2hvdWxkIGJlIHVzZWQgZHVyaW5nIHRoZSBzZWxlY3Rpb24sIGZhbHNlIG90aGVyd2lzZVxuICogQHJldHVybiB7UGxheWxpc3R9IHRoZSBoaWdoZXN0IGJpdHJhdGUgcGxheWxpc3QgbGVzcyB0aGFuIHRoZVxuICogY3VycmVudGx5IGRldGVjdGVkIGJhbmR3aWR0aCwgYWNjb3VudGluZyBmb3Igc29tZSBhbW91bnQgb2ZcbiAqIGJhbmR3aWR0aCB2YXJpYW5jZVxuICovXG5cblxudmFyIHNpbXBsZVNlbGVjdG9yID0gZnVuY3Rpb24gc2ltcGxlU2VsZWN0b3IobWFzdGVyLCBwbGF5ZXJCYW5kd2lkdGgsIHBsYXllcldpZHRoLCBwbGF5ZXJIZWlnaHQsIGxpbWl0UmVuZGl0aW9uQnlQbGF5ZXJEaW1lbnNpb25zKSB7XG4gIC8vIGNvbnZlcnQgdGhlIHBsYXlsaXN0cyB0byBhbiBpbnRlcm1lZGlhcnkgcmVwcmVzZW50YXRpb24gdG8gbWFrZSBjb21wYXJpc29ucyBlYXNpZXJcbiAgdmFyIHNvcnRlZFBsYXlsaXN0UmVwcyA9IG1hc3Rlci5wbGF5bGlzdHMubWFwKGZ1bmN0aW9uIChwbGF5bGlzdCkge1xuICAgIHZhciB3aWR0aCA9IHZvaWQgMDtcbiAgICB2YXIgaGVpZ2h0ID0gdm9pZCAwO1xuICAgIHZhciBiYW5kd2lkdGggPSB2b2lkIDA7XG4gICAgd2lkdGggPSBwbGF5bGlzdC5hdHRyaWJ1dGVzLlJFU09MVVRJT04gJiYgcGxheWxpc3QuYXR0cmlidXRlcy5SRVNPTFVUSU9OLndpZHRoO1xuICAgIGhlaWdodCA9IHBsYXlsaXN0LmF0dHJpYnV0ZXMuUkVTT0xVVElPTiAmJiBwbGF5bGlzdC5hdHRyaWJ1dGVzLlJFU09MVVRJT04uaGVpZ2h0O1xuICAgIGJhbmR3aWR0aCA9IHBsYXlsaXN0LmF0dHJpYnV0ZXMuQkFORFdJRFRIO1xuICAgIGJhbmR3aWR0aCA9IGJhbmR3aWR0aCB8fCB3aW5kb3ckMS5OdW1iZXIuTUFYX1ZBTFVFO1xuICAgIHJldHVybiB7XG4gICAgICBiYW5kd2lkdGg6IGJhbmR3aWR0aCxcbiAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgcGxheWxpc3Q6IHBsYXlsaXN0XG4gICAgfTtcbiAgfSk7XG4gIHN0YWJsZVNvcnQoc29ydGVkUGxheWxpc3RSZXBzLCBmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcbiAgICByZXR1cm4gbGVmdC5iYW5kd2lkdGggLSByaWdodC5iYW5kd2lkdGg7XG4gIH0pOyAvLyBmaWx0ZXIgb3V0IGFueSBwbGF5bGlzdHMgdGhhdCBoYXZlIGJlZW4gZXhjbHVkZWQgZHVlIHRvXG4gIC8vIGluY29tcGF0aWJsZSBjb25maWd1cmF0aW9uc1xuXG4gIHNvcnRlZFBsYXlsaXN0UmVwcyA9IHNvcnRlZFBsYXlsaXN0UmVwcy5maWx0ZXIoZnVuY3Rpb24gKHJlcCkge1xuICAgIHJldHVybiAhUGxheWxpc3QuaXNJbmNvbXBhdGlibGUocmVwLnBsYXlsaXN0KTtcbiAgfSk7IC8vIGZpbHRlciBvdXQgYW55IHBsYXlsaXN0cyB0aGF0IGhhdmUgYmVlbiBkaXNhYmxlZCBtYW51YWxseSB0aHJvdWdoIHRoZSByZXByZXNlbnRhdGlvbnNcbiAgLy8gYXBpIG9yIGJsYWNrbGlzdGVkIHRlbXBvcmFyaWx5IGR1ZSB0byBwbGF5YmFjayBlcnJvcnMuXG5cbiAgdmFyIGVuYWJsZWRQbGF5bGlzdFJlcHMgPSBzb3J0ZWRQbGF5bGlzdFJlcHMuZmlsdGVyKGZ1bmN0aW9uIChyZXApIHtcbiAgICByZXR1cm4gUGxheWxpc3QuaXNFbmFibGVkKHJlcC5wbGF5bGlzdCk7XG4gIH0pO1xuXG4gIGlmICghZW5hYmxlZFBsYXlsaXN0UmVwcy5sZW5ndGgpIHtcbiAgICAvLyBpZiB0aGVyZSBhcmUgbm8gZW5hYmxlZCBwbGF5bGlzdHMsIHRoZW4gdGhleSBoYXZlIGFsbCBiZWVuIGJsYWNrbGlzdGVkIG9yIGRpc2FibGVkXG4gICAgLy8gYnkgdGhlIHVzZXIgdGhyb3VnaCB0aGUgcmVwcmVzZW50YXRpb25zIGFwaS4gSW4gdGhpcyBjYXNlLCBpZ25vcmUgYmxhY2tsaXN0aW5nIGFuZFxuICAgIC8vIGZhbGxiYWNrIHRvIHdoYXQgdGhlIHVzZXIgd2FudHMgYnkgdXNpbmcgcGxheWxpc3RzIHRoZSB1c2VyIGhhcyBub3QgZGlzYWJsZWQuXG4gICAgZW5hYmxlZFBsYXlsaXN0UmVwcyA9IHNvcnRlZFBsYXlsaXN0UmVwcy5maWx0ZXIoZnVuY3Rpb24gKHJlcCkge1xuICAgICAgcmV0dXJuICFQbGF5bGlzdC5pc0Rpc2FibGVkKHJlcC5wbGF5bGlzdCk7XG4gICAgfSk7XG4gIH0gLy8gZmlsdGVyIG91dCBhbnkgdmFyaWFudCB0aGF0IGhhcyBncmVhdGVyIGVmZmVjdGl2ZSBiaXRyYXRlXG4gIC8vIHRoYW4gdGhlIGN1cnJlbnQgZXN0aW1hdGVkIGJhbmR3aWR0aFxuXG5cbiAgdmFyIGJhbmR3aWR0aFBsYXlsaXN0UmVwcyA9IGVuYWJsZWRQbGF5bGlzdFJlcHMuZmlsdGVyKGZ1bmN0aW9uIChyZXApIHtcbiAgICByZXR1cm4gcmVwLmJhbmR3aWR0aCAqIENvbmZpZy5CQU5EV0lEVEhfVkFSSUFOQ0UgPCBwbGF5ZXJCYW5kd2lkdGg7XG4gIH0pO1xuICB2YXIgaGlnaGVzdFJlbWFpbmluZ0JhbmR3aWR0aFJlcCA9IGJhbmR3aWR0aFBsYXlsaXN0UmVwc1tiYW5kd2lkdGhQbGF5bGlzdFJlcHMubGVuZ3RoIC0gMV07IC8vIGdldCBhbGwgb2YgdGhlIHJlbmRpdGlvbnMgd2l0aCB0aGUgc2FtZSAoaGlnaGVzdCkgYmFuZHdpZHRoXG4gIC8vIGFuZCB0aGVuIHRha2luZyB0aGUgdmVyeSBmaXJzdCBlbGVtZW50XG5cbiAgdmFyIGJhbmR3aWR0aEJlc3RSZXAgPSBiYW5kd2lkdGhQbGF5bGlzdFJlcHMuZmlsdGVyKGZ1bmN0aW9uIChyZXApIHtcbiAgICByZXR1cm4gcmVwLmJhbmR3aWR0aCA9PT0gaGlnaGVzdFJlbWFpbmluZ0JhbmR3aWR0aFJlcC5iYW5kd2lkdGg7XG4gIH0pWzBdOyAvLyBpZiB3ZSdyZSBub3QgZ29pbmcgdG8gbGltaXQgcmVuZGl0aW9ucyBieSBwbGF5ZXIgc2l6ZSwgbWFrZSBhbiBlYXJseSBkZWNpc2lvbi5cblxuICBpZiAobGltaXRSZW5kaXRpb25CeVBsYXllckRpbWVuc2lvbnMgPT09IGZhbHNlKSB7XG4gICAgdmFyIF9jaG9zZW5SZXAgPSBiYW5kd2lkdGhCZXN0UmVwIHx8IGVuYWJsZWRQbGF5bGlzdFJlcHNbMF0gfHwgc29ydGVkUGxheWxpc3RSZXBzWzBdO1xuXG4gICAgcmV0dXJuIF9jaG9zZW5SZXAgPyBfY2hvc2VuUmVwLnBsYXlsaXN0IDogbnVsbDtcbiAgfSAvLyBmaWx0ZXIgb3V0IHBsYXlsaXN0cyB3aXRob3V0IHJlc29sdXRpb24gaW5mb3JtYXRpb25cblxuXG4gIHZhciBoYXZlUmVzb2x1dGlvbiA9IGJhbmR3aWR0aFBsYXlsaXN0UmVwcy5maWx0ZXIoZnVuY3Rpb24gKHJlcCkge1xuICAgIHJldHVybiByZXAud2lkdGggJiYgcmVwLmhlaWdodDtcbiAgfSk7IC8vIHNvcnQgdmFyaWFudHMgYnkgcmVzb2x1dGlvblxuXG4gIHN0YWJsZVNvcnQoaGF2ZVJlc29sdXRpb24sIGZ1bmN0aW9uIChsZWZ0LCByaWdodCkge1xuICAgIHJldHVybiBsZWZ0LndpZHRoIC0gcmlnaHQud2lkdGg7XG4gIH0pOyAvLyBpZiB3ZSBoYXZlIHRoZSBleGFjdCByZXNvbHV0aW9uIGFzIHRoZSBwbGF5ZXIgdXNlIGl0XG5cbiAgdmFyIHJlc29sdXRpb25CZXN0UmVwTGlzdCA9IGhhdmVSZXNvbHV0aW9uLmZpbHRlcihmdW5jdGlvbiAocmVwKSB7XG4gICAgcmV0dXJuIHJlcC53aWR0aCA9PT0gcGxheWVyV2lkdGggJiYgcmVwLmhlaWdodCA9PT0gcGxheWVySGVpZ2h0O1xuICB9KTtcbiAgaGlnaGVzdFJlbWFpbmluZ0JhbmR3aWR0aFJlcCA9IHJlc29sdXRpb25CZXN0UmVwTGlzdFtyZXNvbHV0aW9uQmVzdFJlcExpc3QubGVuZ3RoIC0gMV07IC8vIGVuc3VyZSB0aGF0IHdlIHBpY2sgdGhlIGhpZ2hlc3QgYmFuZHdpZHRoIHZhcmlhbnQgdGhhdCBoYXZlIGV4YWN0IHJlc29sdXRpb25cblxuICB2YXIgcmVzb2x1dGlvbkJlc3RSZXAgPSByZXNvbHV0aW9uQmVzdFJlcExpc3QuZmlsdGVyKGZ1bmN0aW9uIChyZXApIHtcbiAgICByZXR1cm4gcmVwLmJhbmR3aWR0aCA9PT0gaGlnaGVzdFJlbWFpbmluZ0JhbmR3aWR0aFJlcC5iYW5kd2lkdGg7XG4gIH0pWzBdO1xuICB2YXIgcmVzb2x1dGlvblBsdXNPbmVMaXN0ID0gdm9pZCAwO1xuICB2YXIgcmVzb2x1dGlvblBsdXNPbmVTbWFsbGVzdCA9IHZvaWQgMDtcbiAgdmFyIHJlc29sdXRpb25QbHVzT25lUmVwID0gdm9pZCAwOyAvLyBmaW5kIHRoZSBzbWFsbGVzdCB2YXJpYW50IHRoYXQgaXMgbGFyZ2VyIHRoYW4gdGhlIHBsYXllclxuICAvLyBpZiB0aGVyZSBpcyBubyBtYXRjaCBvZiBleGFjdCByZXNvbHV0aW9uXG5cbiAgaWYgKCFyZXNvbHV0aW9uQmVzdFJlcCkge1xuICAgIHJlc29sdXRpb25QbHVzT25lTGlzdCA9IGhhdmVSZXNvbHV0aW9uLmZpbHRlcihmdW5jdGlvbiAocmVwKSB7XG4gICAgICByZXR1cm4gcmVwLndpZHRoID4gcGxheWVyV2lkdGggfHwgcmVwLmhlaWdodCA+IHBsYXllckhlaWdodDtcbiAgICB9KTsgLy8gZmluZCBhbGwgdGhlIHZhcmlhbnRzIGhhdmUgdGhlIHNhbWUgc21hbGxlc3QgcmVzb2x1dGlvblxuXG4gICAgcmVzb2x1dGlvblBsdXNPbmVTbWFsbGVzdCA9IHJlc29sdXRpb25QbHVzT25lTGlzdC5maWx0ZXIoZnVuY3Rpb24gKHJlcCkge1xuICAgICAgcmV0dXJuIHJlcC53aWR0aCA9PT0gcmVzb2x1dGlvblBsdXNPbmVMaXN0WzBdLndpZHRoICYmIHJlcC5oZWlnaHQgPT09IHJlc29sdXRpb25QbHVzT25lTGlzdFswXS5oZWlnaHQ7XG4gICAgfSk7IC8vIGVuc3VyZSB0aGF0IHdlIGFsc28gcGljayB0aGUgaGlnaGVzdCBiYW5kd2lkdGggdmFyaWFudCB0aGF0XG4gICAgLy8gaXMganVzdC1sYXJnZXItdGhhbiB0aGUgdmlkZW8gcGxheWVyXG5cbiAgICBoaWdoZXN0UmVtYWluaW5nQmFuZHdpZHRoUmVwID0gcmVzb2x1dGlvblBsdXNPbmVTbWFsbGVzdFtyZXNvbHV0aW9uUGx1c09uZVNtYWxsZXN0Lmxlbmd0aCAtIDFdO1xuICAgIHJlc29sdXRpb25QbHVzT25lUmVwID0gcmVzb2x1dGlvblBsdXNPbmVTbWFsbGVzdC5maWx0ZXIoZnVuY3Rpb24gKHJlcCkge1xuICAgICAgcmV0dXJuIHJlcC5iYW5kd2lkdGggPT09IGhpZ2hlc3RSZW1haW5pbmdCYW5kd2lkdGhSZXAuYmFuZHdpZHRoO1xuICAgIH0pWzBdO1xuICB9IC8vIGZhbGxiYWNrIGNoYWluIG9mIHZhcmlhbnRzXG5cblxuICB2YXIgY2hvc2VuUmVwID0gcmVzb2x1dGlvblBsdXNPbmVSZXAgfHwgcmVzb2x1dGlvbkJlc3RSZXAgfHwgYmFuZHdpZHRoQmVzdFJlcCB8fCBlbmFibGVkUGxheWxpc3RSZXBzWzBdIHx8IHNvcnRlZFBsYXlsaXN0UmVwc1swXTtcbiAgcmV0dXJuIGNob3NlblJlcCA/IGNob3NlblJlcC5wbGF5bGlzdCA6IG51bGw7XG59OyAvLyBQbGF5bGlzdCBTZWxlY3RvcnNcblxuLyoqXG4gKiBDaG9vc2VzIHRoZSBhcHByb3ByaWF0ZSBtZWRpYSBwbGF5bGlzdCBiYXNlZCBvbiB0aGUgbW9zdCByZWNlbnRcbiAqIGJhbmR3aWR0aCBlc3RpbWF0ZSBhbmQgdGhlIHBsYXllciBzaXplLlxuICpcbiAqIEV4cGVjdHMgdG8gYmUgY2FsbGVkIHdpdGhpbiB0aGUgY29udGV4dCBvZiBhbiBpbnN0YW5jZSBvZiBIbHNIYW5kbGVyXG4gKlxuICogQHJldHVybiB7UGxheWxpc3R9IHRoZSBoaWdoZXN0IGJpdHJhdGUgcGxheWxpc3QgbGVzcyB0aGFuIHRoZVxuICogY3VycmVudGx5IGRldGVjdGVkIGJhbmR3aWR0aCwgYWNjb3VudGluZyBmb3Igc29tZSBhbW91bnQgb2ZcbiAqIGJhbmR3aWR0aCB2YXJpYW5jZVxuICovXG5cblxudmFyIGxhc3RCYW5kd2lkdGhTZWxlY3RvciA9IGZ1bmN0aW9uIGxhc3RCYW5kd2lkdGhTZWxlY3RvcigpIHtcbiAgcmV0dXJuIHNpbXBsZVNlbGVjdG9yKHRoaXMucGxheWxpc3RzLm1hc3RlciwgdGhpcy5zeXN0ZW1CYW5kd2lkdGgsIHBhcnNlSW50KHNhZmVHZXRDb21wdXRlZFN0eWxlKHRoaXMudGVjaF8uZWwoKSwgJ3dpZHRoJyksIDEwKSwgcGFyc2VJbnQoc2FmZUdldENvbXB1dGVkU3R5bGUodGhpcy50ZWNoXy5lbCgpLCAnaGVpZ2h0JyksIDEwKSwgdGhpcy5saW1pdFJlbmRpdGlvbkJ5UGxheWVyRGltZW5zaW9ucyk7XG59O1xuLyoqXG4gKiBDaG9vc2VzIHRoZSBhcHByb3ByaWF0ZSBtZWRpYSBwbGF5bGlzdCBiYXNlZCBvbiB0aGUgcG90ZW50aWFsIHRvIHJlYnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzXG4gKiAgICAgICAgT2JqZWN0IG9mIGluZm9ybWF0aW9uIHJlcXVpcmVkIHRvIHVzZSB0aGlzIHNlbGVjdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3MubWFzdGVyXG4gKiAgICAgICAgT2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtYXN0ZXIgbWFuaWZlc3RcbiAqIEBwYXJhbSB7TnVtYmVyfSBzZXR0aW5ncy5jdXJyZW50VGltZVxuICogICAgICAgIFRoZSBjdXJyZW50IHRpbWUgb2YgdGhlIHBsYXllclxuICogQHBhcmFtIHtOdW1iZXJ9IHNldHRpbmdzLmJhbmR3aWR0aFxuICogICAgICAgIEN1cnJlbnQgbWVhc3VyZWQgYmFuZHdpZHRoXG4gKiBAcGFyYW0ge051bWJlcn0gc2V0dGluZ3MuZHVyYXRpb25cbiAqICAgICAgICBEdXJhdGlvbiBvZiB0aGUgbWVkaWFcbiAqIEBwYXJhbSB7TnVtYmVyfSBzZXR0aW5ncy5zZWdtZW50RHVyYXRpb25cbiAqICAgICAgICBTZWdtZW50IGR1cmF0aW9uIHRvIGJlIHVzZWQgaW4gcm91bmQgdHJpcCB0aW1lIGNhbGN1bGF0aW9uc1xuICogQHBhcmFtIHtOdW1iZXJ9IHNldHRpbmdzLnRpbWVVbnRpbFJlYnVmZmVyXG4gKiAgICAgICAgVGltZSBsZWZ0IGluIHNlY29uZHMgdW50aWwgdGhlIHBsYXllciBoYXMgdG8gcmVidWZmZXJcbiAqIEBwYXJhbSB7TnVtYmVyfSBzZXR0aW5ncy5jdXJyZW50VGltZWxpbmVcbiAqICAgICAgICBUaGUgY3VycmVudCB0aW1lbGluZSBzZWdtZW50cyBhcmUgYmVpbmcgbG9hZGVkIGZyb21cbiAqIEBwYXJhbSB7U3luY0NvbnRyb2xsZXJ9IHNldHRpbmdzLnN5bmNDb250cm9sbGVyXG4gKiAgICAgICAgU3luY0NvbnRyb2xsZXIgZm9yIGRldGVybWluaW5nIGlmIHdlIGhhdmUgYSBzeW5jIHBvaW50IGZvciBhIGdpdmVuIHBsYXlsaXN0XG4gKiBAcmV0dXJuIHtPYmplY3R8bnVsbH1cbiAqICAgICAgICAge09iamVjdH0gcmV0dXJuLnBsYXlsaXN0XG4gKiAgICAgICAgIFRoZSBoaWdoZXN0IGJhbmR3aWR0aCBwbGF5bGlzdCB3aXRoIHRoZSBsZWFzdCBhbW91bnQgb2YgcmVidWZmZXJpbmdcbiAqICAgICAgICAge051bWJlcn0gcmV0dXJuLnJlYnVmZmVyaW5nSW1wYWN0XG4gKiAgICAgICAgIFRoZSBhbW91bnQgb2YgdGltZSBpbiBzZWNvbmRzIHN3aXRjaGluZyB0byB0aGlzIHBsYXlsaXN0IHdpbGwgcmVidWZmZXIuIEFcbiAqICAgICAgICAgbmVnYXRpdmUgdmFsdWUgbWVhbnMgdGhhdCBzd2l0Y2hpbmcgd2lsbCBjYXVzZSB6ZXJvIHJlYnVmZmVyaW5nLlxuICovXG5cblxudmFyIG1pblJlYnVmZmVyTWF4QmFuZHdpZHRoU2VsZWN0b3IgPSBmdW5jdGlvbiBtaW5SZWJ1ZmZlck1heEJhbmR3aWR0aFNlbGVjdG9yKHNldHRpbmdzKSB7XG4gIHZhciBtYXN0ZXIgPSBzZXR0aW5ncy5tYXN0ZXIsXG4gICAgICBjdXJyZW50VGltZSA9IHNldHRpbmdzLmN1cnJlbnRUaW1lLFxuICAgICAgYmFuZHdpZHRoID0gc2V0dGluZ3MuYmFuZHdpZHRoLFxuICAgICAgZHVyYXRpb24kJDEgPSBzZXR0aW5ncy5kdXJhdGlvbixcbiAgICAgIHNlZ21lbnREdXJhdGlvbiA9IHNldHRpbmdzLnNlZ21lbnREdXJhdGlvbixcbiAgICAgIHRpbWVVbnRpbFJlYnVmZmVyID0gc2V0dGluZ3MudGltZVVudGlsUmVidWZmZXIsXG4gICAgICBjdXJyZW50VGltZWxpbmUgPSBzZXR0aW5ncy5jdXJyZW50VGltZWxpbmUsXG4gICAgICBzeW5jQ29udHJvbGxlciA9IHNldHRpbmdzLnN5bmNDb250cm9sbGVyOyAvLyBmaWx0ZXIgb3V0IGFueSBwbGF5bGlzdHMgdGhhdCBoYXZlIGJlZW4gZXhjbHVkZWQgZHVlIHRvXG4gIC8vIGluY29tcGF0aWJsZSBjb25maWd1cmF0aW9uc1xuXG4gIHZhciBjb21wYXRpYmxlUGxheWxpc3RzID0gbWFzdGVyLnBsYXlsaXN0cy5maWx0ZXIoZnVuY3Rpb24gKHBsYXlsaXN0KSB7XG4gICAgcmV0dXJuICFQbGF5bGlzdC5pc0luY29tcGF0aWJsZShwbGF5bGlzdCk7XG4gIH0pOyAvLyBmaWx0ZXIgb3V0IGFueSBwbGF5bGlzdHMgdGhhdCBoYXZlIGJlZW4gZGlzYWJsZWQgbWFudWFsbHkgdGhyb3VnaCB0aGUgcmVwcmVzZW50YXRpb25zXG4gIC8vIGFwaSBvciBibGFja2xpc3RlZCB0ZW1wb3JhcmlseSBkdWUgdG8gcGxheWJhY2sgZXJyb3JzLlxuXG4gIHZhciBlbmFibGVkUGxheWxpc3RzID0gY29tcGF0aWJsZVBsYXlsaXN0cy5maWx0ZXIoUGxheWxpc3QuaXNFbmFibGVkKTtcblxuICBpZiAoIWVuYWJsZWRQbGF5bGlzdHMubGVuZ3RoKSB7XG4gICAgLy8gaWYgdGhlcmUgYXJlIG5vIGVuYWJsZWQgcGxheWxpc3RzLCB0aGVuIHRoZXkgaGF2ZSBhbGwgYmVlbiBibGFja2xpc3RlZCBvciBkaXNhYmxlZFxuICAgIC8vIGJ5IHRoZSB1c2VyIHRocm91Z2ggdGhlIHJlcHJlc2VudGF0aW9ucyBhcGkuIEluIHRoaXMgY2FzZSwgaWdub3JlIGJsYWNrbGlzdGluZyBhbmRcbiAgICAvLyBmYWxsYmFjayB0byB3aGF0IHRoZSB1c2VyIHdhbnRzIGJ5IHVzaW5nIHBsYXlsaXN0cyB0aGUgdXNlciBoYXMgbm90IGRpc2FibGVkLlxuICAgIGVuYWJsZWRQbGF5bGlzdHMgPSBjb21wYXRpYmxlUGxheWxpc3RzLmZpbHRlcihmdW5jdGlvbiAocGxheWxpc3QpIHtcbiAgICAgIHJldHVybiAhUGxheWxpc3QuaXNEaXNhYmxlZChwbGF5bGlzdCk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgYmFuZHdpZHRoUGxheWxpc3RzID0gZW5hYmxlZFBsYXlsaXN0cy5maWx0ZXIoUGxheWxpc3QuaGFzQXR0cmlidXRlLmJpbmQobnVsbCwgJ0JBTkRXSURUSCcpKTtcbiAgdmFyIHJlYnVmZmVyaW5nRXN0aW1hdGVzID0gYmFuZHdpZHRoUGxheWxpc3RzLm1hcChmdW5jdGlvbiAocGxheWxpc3QpIHtcbiAgICB2YXIgc3luY1BvaW50ID0gc3luY0NvbnRyb2xsZXIuZ2V0U3luY1BvaW50KHBsYXlsaXN0LCBkdXJhdGlvbiQkMSwgY3VycmVudFRpbWVsaW5lLCBjdXJyZW50VGltZSk7IC8vIElmIHRoZXJlIGlzIG5vIHN5bmMgcG9pbnQgZm9yIHRoaXMgcGxheWxpc3QsIHN3aXRjaGluZyB0byBpdCB3aWxsIHJlcXVpcmUgYVxuICAgIC8vIHN5bmMgcmVxdWVzdCBmaXJzdC4gVGhpcyB3aWxsIGRvdWJsZSB0aGUgcmVxdWVzdCB0aW1lXG5cbiAgICB2YXIgbnVtUmVxdWVzdHMgPSBzeW5jUG9pbnQgPyAxIDogMjtcbiAgICB2YXIgcmVxdWVzdFRpbWVFc3RpbWF0ZSA9IFBsYXlsaXN0LmVzdGltYXRlU2VnbWVudFJlcXVlc3RUaW1lKHNlZ21lbnREdXJhdGlvbiwgYmFuZHdpZHRoLCBwbGF5bGlzdCk7XG4gICAgdmFyIHJlYnVmZmVyaW5nSW1wYWN0ID0gcmVxdWVzdFRpbWVFc3RpbWF0ZSAqIG51bVJlcXVlc3RzIC0gdGltZVVudGlsUmVidWZmZXI7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBsYXlsaXN0OiBwbGF5bGlzdCxcbiAgICAgIHJlYnVmZmVyaW5nSW1wYWN0OiByZWJ1ZmZlcmluZ0ltcGFjdFxuICAgIH07XG4gIH0pO1xuICB2YXIgbm9SZWJ1ZmZlcmluZ1BsYXlsaXN0cyA9IHJlYnVmZmVyaW5nRXN0aW1hdGVzLmZpbHRlcihmdW5jdGlvbiAoZXN0aW1hdGUpIHtcbiAgICByZXR1cm4gZXN0aW1hdGUucmVidWZmZXJpbmdJbXBhY3QgPD0gMDtcbiAgfSk7IC8vIFNvcnQgYnkgYmFuZHdpZHRoIERFU0NcblxuICBzdGFibGVTb3J0KG5vUmVidWZmZXJpbmdQbGF5bGlzdHMsIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIGNvbXBhcmVQbGF5bGlzdEJhbmR3aWR0aChiLnBsYXlsaXN0LCBhLnBsYXlsaXN0KTtcbiAgfSk7XG5cbiAgaWYgKG5vUmVidWZmZXJpbmdQbGF5bGlzdHMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIG5vUmVidWZmZXJpbmdQbGF5bGlzdHNbMF07XG4gIH1cblxuICBzdGFibGVTb3J0KHJlYnVmZmVyaW5nRXN0aW1hdGVzLCBmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBhLnJlYnVmZmVyaW5nSW1wYWN0IC0gYi5yZWJ1ZmZlcmluZ0ltcGFjdDtcbiAgfSk7XG4gIHJldHVybiByZWJ1ZmZlcmluZ0VzdGltYXRlc1swXSB8fCBudWxsO1xufTtcbi8qKlxuICogQ2hvb3NlcyB0aGUgYXBwcm9wcmlhdGUgbWVkaWEgcGxheWxpc3QsIHdoaWNoIGluIHRoaXMgY2FzZSBpcyB0aGUgbG93ZXN0IGJpdHJhdGVcbiAqIG9uZSB3aXRoIHZpZGVvLiAgSWYgbm8gcmVuZGl0aW9ucyB3aXRoIHZpZGVvIGV4aXN0LCByZXR1cm4gdGhlIGxvd2VzdCBhdWRpbyByZW5kaXRpb24uXG4gKlxuICogRXhwZWN0cyB0byBiZSBjYWxsZWQgd2l0aGluIHRoZSBjb250ZXh0IG9mIGFuIGluc3RhbmNlIG9mIEhsc0hhbmRsZXJcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R8bnVsbH1cbiAqICAgICAgICAge09iamVjdH0gcmV0dXJuLnBsYXlsaXN0XG4gKiAgICAgICAgIFRoZSBsb3dlc3QgYml0cmF0ZSBwbGF5bGlzdCB0aGF0IGNvbnRhaW5zIGEgdmlkZW8gY29kZWMuICBJZiBubyBzdWNoIHJlbmRpdGlvblxuICogICAgICAgICBleGlzdHMgcGljayB0aGUgbG93ZXN0IGF1ZGlvIHJlbmRpdGlvbi5cbiAqL1xuXG5cbnZhciBsb3dlc3RCaXRyYXRlQ29tcGF0aWJsZVZhcmlhbnRTZWxlY3RvciA9IGZ1bmN0aW9uIGxvd2VzdEJpdHJhdGVDb21wYXRpYmxlVmFyaWFudFNlbGVjdG9yKCkge1xuICAvLyBmaWx0ZXIgb3V0IGFueSBwbGF5bGlzdHMgdGhhdCBoYXZlIGJlZW4gZXhjbHVkZWQgZHVlIHRvXG4gIC8vIGluY29tcGF0aWJsZSBjb25maWd1cmF0aW9ucyBvciBwbGF5YmFjayBlcnJvcnNcbiAgdmFyIHBsYXlsaXN0cyA9IHRoaXMucGxheWxpc3RzLm1hc3Rlci5wbGF5bGlzdHMuZmlsdGVyKFBsYXlsaXN0LmlzRW5hYmxlZCk7IC8vIFNvcnQgYXNjZW5kaW5nIGJ5IGJpdHJhdGVcblxuICBzdGFibGVTb3J0KHBsYXlsaXN0cywgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gY29tcGFyZVBsYXlsaXN0QmFuZHdpZHRoKGEsIGIpO1xuICB9KTsgLy8gUGFyc2UgYW5kIGFzc3VtZSB0aGF0IHBsYXlsaXN0cyB3aXRoIG5vIHZpZGVvIGNvZGVjIGhhdmUgbm8gdmlkZW9cbiAgLy8gKHRoaXMgaXMgbm90IG5lY2Vzc2FyaWx5IHRydWUsIGFsdGhvdWdoIGl0IGlzIGdlbmVyYWxseSB0cnVlKS5cbiAgLy9cbiAgLy8gSWYgYW4gZW50aXJlIG1hbmlmZXN0IGhhcyBubyB2YWxpZCB2aWRlb3MgZXZlcnl0aGluZyB3aWxsIGdldCBmaWx0ZXJlZFxuICAvLyBvdXQuXG5cbiAgdmFyIHBsYXlsaXN0c1dpdGhWaWRlbyA9IHBsYXlsaXN0cy5maWx0ZXIoZnVuY3Rpb24gKHBsYXlsaXN0KSB7XG4gICAgcmV0dXJuIHBhcnNlQ29kZWNzKHBsYXlsaXN0LmF0dHJpYnV0ZXMuQ09ERUNTKS52aWRlb0NvZGVjO1xuICB9KTtcbiAgcmV0dXJuIHBsYXlsaXN0c1dpdGhWaWRlb1swXSB8fCBudWxsO1xufTtcbi8qKlxuICogQ3JlYXRlIGNhcHRpb25zIHRleHQgdHJhY2tzIG9uIHZpZGVvLmpzIGlmIHRoZXkgZG8gbm90IGV4aXN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGluYmFuZFRleHRUcmFja3MgYSByZWZlcmVuY2UgdG8gY3VycmVudCBpbmJhbmRUZXh0VHJhY2tzXG4gKiBAcGFyYW0ge09iamVjdH0gdGVjaCB0aGUgdmlkZW8uanMgdGVjaFxuICogQHBhcmFtIHtPYmplY3R9IGNhcHRpb25TdHJlYW1zIHRoZSBjYXB0aW9uIHN0cmVhbXMgdG8gY3JlYXRlXG4gKiBAcHJpdmF0ZVxuICovXG5cblxudmFyIGNyZWF0ZUNhcHRpb25zVHJhY2tJZk5vdEV4aXN0cyA9IGZ1bmN0aW9uIGNyZWF0ZUNhcHRpb25zVHJhY2tJZk5vdEV4aXN0cyhpbmJhbmRUZXh0VHJhY2tzLCB0ZWNoLCBjYXB0aW9uU3RyZWFtcykge1xuICBmb3IgKHZhciB0cmFja0lkIGluIGNhcHRpb25TdHJlYW1zKSB7XG4gICAgaWYgKCFpbmJhbmRUZXh0VHJhY2tzW3RyYWNrSWRdKSB7XG4gICAgICB0ZWNoLnRyaWdnZXIoe1xuICAgICAgICB0eXBlOiAndXNhZ2UnLFxuICAgICAgICBuYW1lOiAnaGxzLTYwOCdcbiAgICAgIH0pO1xuICAgICAgdmFyIHRyYWNrID0gdGVjaC50ZXh0VHJhY2tzKCkuZ2V0VHJhY2tCeUlkKHRyYWNrSWQpO1xuXG4gICAgICBpZiAodHJhY2spIHtcbiAgICAgICAgLy8gUmVzdXNlIGFuIGV4aXN0aW5nIHRyYWNrIHdpdGggYSBDQyMgaWQgYmVjYXVzZSB0aGlzIHdhc1xuICAgICAgICAvLyB2ZXJ5IGxpa2VseSBjcmVhdGVkIGJ5IHZpZGVvanMtY29udHJpYi1obHMgZnJvbSBpbmZvcm1hdGlvblxuICAgICAgICAvLyBpbiB0aGUgbTN1OCBmb3IgdXMgdG8gdXNlXG4gICAgICAgIGluYmFuZFRleHRUcmFja3NbdHJhY2tJZF0gPSB0cmFjaztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgY3JlYXRlIGEgdHJhY2sgd2l0aCB0aGUgZGVmYXVsdCBgQ0MjYCBsYWJlbCBhbmRcbiAgICAgICAgLy8gd2l0aG91dCBhIGxhbmd1YWdlXG4gICAgICAgIGluYmFuZFRleHRUcmFja3NbdHJhY2tJZF0gPSB0ZWNoLmFkZFJlbW90ZVRleHRUcmFjayh7XG4gICAgICAgICAga2luZDogJ2NhcHRpb25zJyxcbiAgICAgICAgICBpZDogdHJhY2tJZCxcbiAgICAgICAgICBsYWJlbDogdHJhY2tJZFxuICAgICAgICB9LCBmYWxzZSkudHJhY2s7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG52YXIgYWRkQ2FwdGlvbkRhdGEgPSBmdW5jdGlvbiBhZGRDYXB0aW9uRGF0YShfcmVmKSB7XG4gIHZhciBpbmJhbmRUZXh0VHJhY2tzID0gX3JlZi5pbmJhbmRUZXh0VHJhY2tzLFxuICAgICAgY2FwdGlvbkFycmF5ID0gX3JlZi5jYXB0aW9uQXJyYXksXG4gICAgICB0aW1lc3RhbXBPZmZzZXQgPSBfcmVmLnRpbWVzdGFtcE9mZnNldDtcblxuICBpZiAoIWNhcHRpb25BcnJheSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBDdWUgPSB3aW5kb3cuV2ViS2l0RGF0YUN1ZSB8fCB3aW5kb3cuVlRUQ3VlO1xuICBjYXB0aW9uQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAoY2FwdGlvbikge1xuICAgIHZhciB0cmFjayA9IGNhcHRpb24uc3RyZWFtO1xuICAgIHZhciBzdGFydFRpbWUgPSBjYXB0aW9uLnN0YXJ0VGltZTtcbiAgICB2YXIgZW5kVGltZSA9IGNhcHRpb24uZW5kVGltZTtcblxuICAgIGlmICghaW5iYW5kVGV4dFRyYWNrc1t0cmFja10pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzdGFydFRpbWUgKz0gdGltZXN0YW1wT2Zmc2V0O1xuICAgIGVuZFRpbWUgKz0gdGltZXN0YW1wT2Zmc2V0O1xuICAgIGluYmFuZFRleHRUcmFja3NbdHJhY2tdLmFkZEN1ZShuZXcgQ3VlKHN0YXJ0VGltZSwgZW5kVGltZSwgY2FwdGlvbi50ZXh0KSk7XG4gIH0pO1xufTtcbi8qKlxuICogQGZpbGUgc2VnbWVudC1sb2FkZXIuanNcbiAqL1xuLy8gaW4gbXNcblxuXG52YXIgQ0hFQ0tfQlVGRkVSX0RFTEFZID0gNTAwO1xuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHdlIHNob3VsZCBjYWxsIGVuZE9mU3RyZWFtIG9uIHRoZSBtZWRpYSBzb3VyY2UgYmFzZWRcbiAqIG9uIHRoZSBzdGF0ZSBvZiB0aGUgYnVmZmVyIG9yIGlmIGFwcGVuZWQgc2VnbWVudCB3YXMgdGhlIGZpbmFsXG4gKiBzZWdtZW50IGluIHRoZSBwbGF5bGlzdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGxheWxpc3QgYSBtZWRpYSBwbGF5bGlzdCBvYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBtZWRpYVNvdXJjZSB0aGUgTWVkaWFTb3VyY2Ugb2JqZWN0XG4gKiBAcGFyYW0ge051bWJlcn0gc2VnbWVudEluZGV4IHRoZSBpbmRleCBvZiBzZWdtZW50IHdlIGxhc3QgYXBwZW5kZWRcbiAqIEByZXR1cm5zIHtCb29sZWFufSBkbyB3ZSBuZWVkIHRvIGNhbGwgZW5kT2ZTdHJlYW0gb24gdGhlIE1lZGlhU291cmNlXG4gKi9cblxudmFyIGRldGVjdEVuZE9mU3RyZWFtID0gZnVuY3Rpb24gZGV0ZWN0RW5kT2ZTdHJlYW0ocGxheWxpc3QsIG1lZGlhU291cmNlLCBzZWdtZW50SW5kZXgpIHtcbiAgaWYgKCFwbGF5bGlzdCB8fCAhbWVkaWFTb3VyY2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgc2VnbWVudHMgPSBwbGF5bGlzdC5zZWdtZW50czsgLy8gZGV0ZXJtaW5lIGEgZmV3IGJvb2xlYW4gdmFsdWVzIHRvIGhlbHAgbWFrZSB0aGUgYnJhbmNoIGJlbG93IGVhc2llclxuICAvLyB0byByZWFkXG5cbiAgdmFyIGFwcGVuZGVkTGFzdFNlZ21lbnQgPSBzZWdtZW50SW5kZXggPT09IHNlZ21lbnRzLmxlbmd0aDsgLy8gaWYgd2UndmUgYnVmZmVyZWQgdG8gdGhlIGVuZCBvZiB0aGUgdmlkZW8sIHdlIG5lZWQgdG8gY2FsbCBlbmRPZlN0cmVhbVxuICAvLyBzbyB0aGF0IE1lZGlhU291cmNlcyBjYW4gdHJpZ2dlciB0aGUgYGVuZGVkYCBldmVudCB3aGVuIGl0IHJ1bnMgb3V0IG9mXG4gIC8vIGJ1ZmZlcmVkIGRhdGEgaW5zdGVhZCBvZiB3YWl0aW5nIGZvciBtZVxuXG4gIHJldHVybiBwbGF5bGlzdC5lbmRMaXN0ICYmIG1lZGlhU291cmNlLnJlYWR5U3RhdGUgPT09ICdvcGVuJyAmJiBhcHBlbmRlZExhc3RTZWdtZW50O1xufTtcblxudmFyIGZpbml0ZSA9IGZ1bmN0aW9uIGZpbml0ZShudW0pIHtcbiAgcmV0dXJuIHR5cGVvZiBudW0gPT09ICdudW1iZXInICYmIGlzRmluaXRlKG51bSk7XG59O1xuXG52YXIgaWxsZWdhbE1lZGlhU3dpdGNoID0gZnVuY3Rpb24gaWxsZWdhbE1lZGlhU3dpdGNoKGxvYWRlclR5cGUsIHN0YXJ0aW5nTWVkaWEsIG5ld1NlZ21lbnRNZWRpYSkge1xuICAvLyBBbHRob3VnaCB0aGVzZSBjaGVja3Mgc2hvdWxkIG1vc3QgbGlrZWx5IGNvdmVyIG5vbiAnbWFpbicgdHlwZXMsIGZvciBub3cgaXQgbmFycm93c1xuICAvLyB0aGUgc2NvcGUgb2Ygb3VyIGNoZWNrcy5cbiAgaWYgKGxvYWRlclR5cGUgIT09ICdtYWluJyB8fCAhc3RhcnRpbmdNZWRpYSB8fCAhbmV3U2VnbWVudE1lZGlhKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoIW5ld1NlZ21lbnRNZWRpYS5jb250YWluc0F1ZGlvICYmICFuZXdTZWdtZW50TWVkaWEuY29udGFpbnNWaWRlbykge1xuICAgIHJldHVybiAnTmVpdGhlciBhdWRpbyBub3IgdmlkZW8gZm91bmQgaW4gc2VnbWVudC4nO1xuICB9XG5cbiAgaWYgKHN0YXJ0aW5nTWVkaWEuY29udGFpbnNWaWRlbyAmJiAhbmV3U2VnbWVudE1lZGlhLmNvbnRhaW5zVmlkZW8pIHtcbiAgICByZXR1cm4gJ09ubHkgYXVkaW8gZm91bmQgaW4gc2VnbWVudCB3aGVuIHdlIGV4cGVjdGVkIHZpZGVvLicgKyAnIFdlIGNhblxcJ3Qgc3dpdGNoIHRvIGF1ZGlvIG9ubHkgZnJvbSBhIHN0cmVhbSB0aGF0IGhhZCB2aWRlby4nICsgJyBUbyBnZXQgcmlkIG9mIHRoaXMgbWVzc2FnZSwgcGxlYXNlIGFkZCBjb2RlYyBpbmZvcm1hdGlvbiB0byB0aGUgbWFuaWZlc3QuJztcbiAgfVxuXG4gIGlmICghc3RhcnRpbmdNZWRpYS5jb250YWluc1ZpZGVvICYmIG5ld1NlZ21lbnRNZWRpYS5jb250YWluc1ZpZGVvKSB7XG4gICAgcmV0dXJuICdWaWRlbyBmb3VuZCBpbiBzZWdtZW50IHdoZW4gd2UgZXhwZWN0ZWQgb25seSBhdWRpby4nICsgJyBXZSBjYW5cXCd0IHN3aXRjaCB0byBhIHN0cmVhbSB3aXRoIHZpZGVvIGZyb20gYW4gYXVkaW8gb25seSBzdHJlYW0uJyArICcgVG8gZ2V0IHJpZCBvZiB0aGlzIG1lc3NhZ2UsIHBsZWFzZSBhZGQgY29kZWMgaW5mb3JtYXRpb24gdG8gdGhlIG1hbmlmZXN0Lic7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG4vKipcbiAqIENhbGN1bGF0ZXMgYSB0aW1lIHZhbHVlIHRoYXQgaXMgc2FmZSB0byByZW1vdmUgZnJvbSB0aGUgYmFjayBidWZmZXIgd2l0aG91dCBpbnRlcnVwdGluZ1xuICogcGxheWJhY2suXG4gKlxuICogQHBhcmFtIHtUaW1lUmFuZ2V9IHNlZWthYmxlXG4gKiAgICAgICAgVGhlIGN1cnJlbnQgc2Vla2FibGUgcmFuZ2VcbiAqIEBwYXJhbSB7TnVtYmVyfSBjdXJyZW50VGltZVxuICogICAgICAgIFRoZSBjdXJyZW50IHRpbWUgb2YgdGhlIHBsYXllclxuICogQHBhcmFtIHtOdW1iZXJ9IHRhcmdldER1cmF0aW9uXG4gKiAgICAgICAgVGhlIHRhcmdldCBkdXJhdGlvbiBvZiB0aGUgY3VycmVudCBwbGF5bGlzdFxuICogQHJldHVybiB7TnVtYmVyfVxuICogICAgICAgICBUaW1lIHRoYXQgaXMgc2FmZSB0byByZW1vdmUgZnJvbSB0aGUgYmFjayBidWZmZXIgd2l0aG91dCBpbnRlcnVwdGluZyBwbGF5YmFja1xuICovXG5cblxudmFyIHNhZmVCYWNrQnVmZmVyVHJpbVRpbWUgPSBmdW5jdGlvbiBzYWZlQmFja0J1ZmZlclRyaW1UaW1lKHNlZWthYmxlJCQxLCBjdXJyZW50VGltZSwgdGFyZ2V0RHVyYXRpb24pIHtcbiAgdmFyIHJlbW92ZVRvVGltZSA9IHZvaWQgMDtcblxuICBpZiAoc2Vla2FibGUkJDEubGVuZ3RoICYmIHNlZWthYmxlJCQxLnN0YXJ0KDApID4gMCAmJiBzZWVrYWJsZSQkMS5zdGFydCgwKSA8IGN1cnJlbnRUaW1lKSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBhIHNlZWthYmxlIHJhbmdlIHVzZSB0aGF0IGFzIHRoZSBsaW1pdCBmb3Igd2hhdCBjYW4gYmUgcmVtb3ZlZCBzYWZlbHlcbiAgICByZW1vdmVUb1RpbWUgPSBzZWVrYWJsZSQkMS5zdGFydCgwKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBvdGhlcndpc2UgcmVtb3ZlIGFueXRoaW5nIG9sZGVyIHRoYW4gMzAgc2Vjb25kcyBiZWZvcmUgdGhlIGN1cnJlbnQgcGxheSBoZWFkXG4gICAgcmVtb3ZlVG9UaW1lID0gY3VycmVudFRpbWUgLSAzMDtcbiAgfSAvLyBEb24ndCBhbGxvdyByZW1vdmluZyBmcm9tIHRoZSBidWZmZXIgd2l0aGluIHRhcmdldCBkdXJhdGlvbiBvZiBjdXJyZW50IHRpbWVcbiAgLy8gdG8gYXZvaWQgdGhlIHBvc3NpYmlsaXR5IG9mIHJlbW92aW5nIHRoZSBHT1AgY3VycmVudGx5IGJlaW5nIHBsYXllZCB3aGljaCBjb3VsZFxuICAvLyBjYXVzZSBwbGF5YmFjayBzdGFsbHMuXG5cblxuICByZXR1cm4gTWF0aC5taW4ocmVtb3ZlVG9UaW1lLCBjdXJyZW50VGltZSAtIHRhcmdldER1cmF0aW9uKTtcbn07XG5cbnZhciBzZWdtZW50SW5mb1N0cmluZyA9IGZ1bmN0aW9uIHNlZ21lbnRJbmZvU3RyaW5nKHNlZ21lbnRJbmZvKSB7XG4gIHZhciBfc2VnbWVudEluZm8kc2VnbWVudCA9IHNlZ21lbnRJbmZvLnNlZ21lbnQsXG4gICAgICBzdGFydCA9IF9zZWdtZW50SW5mbyRzZWdtZW50LnN0YXJ0LFxuICAgICAgZW5kID0gX3NlZ21lbnRJbmZvJHNlZ21lbnQuZW5kLFxuICAgICAgX3NlZ21lbnRJbmZvJHBsYXlsaXN0ID0gc2VnbWVudEluZm8ucGxheWxpc3QsXG4gICAgICBzZXEgPSBfc2VnbWVudEluZm8kcGxheWxpc3QubWVkaWFTZXF1ZW5jZSxcbiAgICAgIGlkID0gX3NlZ21lbnRJbmZvJHBsYXlsaXN0LmlkLFxuICAgICAgX3NlZ21lbnRJbmZvJHBsYXlsaXN0MiA9IF9zZWdtZW50SW5mbyRwbGF5bGlzdC5zZWdtZW50cyxcbiAgICAgIHNlZ21lbnRzID0gX3NlZ21lbnRJbmZvJHBsYXlsaXN0MiA9PT0gdW5kZWZpbmVkID8gW10gOiBfc2VnbWVudEluZm8kcGxheWxpc3QyLFxuICAgICAgaW5kZXggPSBzZWdtZW50SW5mby5tZWRpYUluZGV4LFxuICAgICAgdGltZWxpbmUgPSBzZWdtZW50SW5mby50aW1lbGluZTtcbiAgcmV0dXJuIFsnYXBwZW5kaW5nIFsnICsgaW5kZXggKyAnXSBvZiBbJyArIHNlcSArICcsICcgKyAoc2VxICsgc2VnbWVudHMubGVuZ3RoKSArICddIGZyb20gcGxheWxpc3QgWycgKyBpZCArICddJywgJ1snICsgc3RhcnQgKyAnID0+ICcgKyBlbmQgKyAnXSBpbiB0aW1lbGluZSBbJyArIHRpbWVsaW5lICsgJ10nXS5qb2luKCcgJyk7XG59O1xuLyoqXG4gKiBBbiBvYmplY3QgdGhhdCBtYW5hZ2VzIHNlZ21lbnQgbG9hZGluZyBhbmQgYXBwZW5kaW5nLlxuICpcbiAqIEBjbGFzcyBTZWdtZW50TG9hZGVyXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyByZXF1aXJlZCBhbmQgb3B0aW9uYWwgb3B0aW9uc1xuICogQGV4dGVuZHMgdmlkZW9qcy5FdmVudFRhcmdldFxuICovXG5cblxudmFyIFNlZ21lbnRMb2FkZXIgPSBmdW5jdGlvbiAoX3ZpZGVvanMkRXZlbnRUYXJnZXQpIHtcbiAgaW5oZXJpdHMoU2VnbWVudExvYWRlciwgX3ZpZGVvanMkRXZlbnRUYXJnZXQpO1xuXG4gIGZ1bmN0aW9uIFNlZ21lbnRMb2FkZXIoc2V0dGluZ3MpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBTZWdtZW50TG9hZGVyKTsgLy8gY2hlY2sgcHJlLWNvbmRpdGlvbnNcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFNlZ21lbnRMb2FkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihTZWdtZW50TG9hZGVyKSkuY2FsbCh0aGlzKSk7XG5cbiAgICBpZiAoIXNldHRpbmdzKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbml0aWFsaXphdGlvbiBzZXR0aW5ncyBhcmUgcmVxdWlyZWQnKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHNldHRpbmdzLmN1cnJlbnRUaW1lICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdObyBjdXJyZW50VGltZSBnZXR0ZXIgc3BlY2lmaWVkJyk7XG4gICAgfVxuXG4gICAgaWYgKCFzZXR0aW5ncy5tZWRpYVNvdXJjZSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTm8gTWVkaWFTb3VyY2Ugc3BlY2lmaWVkJyk7XG4gICAgfSAvLyBwdWJsaWMgcHJvcGVydGllc1xuXG5cbiAgICBfdGhpcy5iYW5kd2lkdGggPSBzZXR0aW5ncy5iYW5kd2lkdGg7XG4gICAgX3RoaXMudGhyb3VnaHB1dCA9IHtcbiAgICAgIHJhdGU6IDAsXG4gICAgICBjb3VudDogMFxuICAgIH07XG4gICAgX3RoaXMucm91bmRUcmlwID0gTmFOO1xuXG4gICAgX3RoaXMucmVzZXRTdGF0c18oKTtcblxuICAgIF90aGlzLm1lZGlhSW5kZXggPSBudWxsOyAvLyBwcml2YXRlIHNldHRpbmdzXG5cbiAgICBfdGhpcy5oYXNQbGF5ZWRfID0gc2V0dGluZ3MuaGFzUGxheWVkO1xuICAgIF90aGlzLmN1cnJlbnRUaW1lXyA9IHNldHRpbmdzLmN1cnJlbnRUaW1lO1xuICAgIF90aGlzLnNlZWthYmxlXyA9IHNldHRpbmdzLnNlZWthYmxlO1xuICAgIF90aGlzLnNlZWtpbmdfID0gc2V0dGluZ3Muc2Vla2luZztcbiAgICBfdGhpcy5kdXJhdGlvbl8gPSBzZXR0aW5ncy5kdXJhdGlvbjtcbiAgICBfdGhpcy5tZWRpYVNvdXJjZV8gPSBzZXR0aW5ncy5tZWRpYVNvdXJjZTtcbiAgICBfdGhpcy5obHNfID0gc2V0dGluZ3MuaGxzO1xuICAgIF90aGlzLmxvYWRlclR5cGVfID0gc2V0dGluZ3MubG9hZGVyVHlwZTtcbiAgICBfdGhpcy5zdGFydGluZ01lZGlhXyA9IHZvaWQgMDtcbiAgICBfdGhpcy5zZWdtZW50TWV0YWRhdGFUcmFja18gPSBzZXR0aW5ncy5zZWdtZW50TWV0YWRhdGFUcmFjaztcbiAgICBfdGhpcy5nb2FsQnVmZmVyTGVuZ3RoXyA9IHNldHRpbmdzLmdvYWxCdWZmZXJMZW5ndGg7XG4gICAgX3RoaXMuc291cmNlVHlwZV8gPSBzZXR0aW5ncy5zb3VyY2VUeXBlO1xuICAgIF90aGlzLmluYmFuZFRleHRUcmFja3NfID0gc2V0dGluZ3MuaW5iYW5kVGV4dFRyYWNrcztcbiAgICBfdGhpcy5zdGF0ZV8gPSAnSU5JVCc7IC8vIHByaXZhdGUgaW5zdGFuY2UgdmFyaWFibGVzXG5cbiAgICBfdGhpcy5jaGVja0J1ZmZlclRpbWVvdXRfID0gbnVsbDtcbiAgICBfdGhpcy5lcnJvcl8gPSB2b2lkIDA7XG4gICAgX3RoaXMuY3VycmVudFRpbWVsaW5lXyA9IC0xO1xuICAgIF90aGlzLnBlbmRpbmdTZWdtZW50XyA9IG51bGw7XG4gICAgX3RoaXMubWltZVR5cGVfID0gbnVsbDtcbiAgICBfdGhpcy5zb3VyY2VVcGRhdGVyXyA9IG51bGw7XG4gICAgX3RoaXMueGhyT3B0aW9uc18gPSBudWxsOyAvLyBGcmFnbWVudGVkIG1wNCBwbGF5YmFja1xuXG4gICAgX3RoaXMuYWN0aXZlSW5pdFNlZ21lbnRJZF8gPSBudWxsO1xuICAgIF90aGlzLmluaXRTZWdtZW50c18gPSB7fTsgLy8gRm1wNCBDYXB0aW9uUGFyc2VyXG5cbiAgICBfdGhpcy5jYXB0aW9uUGFyc2VyXyA9IG5ldyBDYXB0aW9uUGFyc2VyKCk7XG4gICAgX3RoaXMuZGVjcnlwdGVyXyA9IHNldHRpbmdzLmRlY3J5cHRlcjsgLy8gTWFuYWdlcyB0aGUgdHJhY2tpbmcgYW5kIGdlbmVyYXRpb24gb2Ygc3luYy1wb2ludHMsIG1hcHBpbmdzXG4gICAgLy8gYmV0d2VlbiBhIHRpbWUgaW4gdGhlIGRpc3BsYXkgdGltZSBhbmQgYSBzZWdtZW50IGluZGV4IHdpdGhpblxuICAgIC8vIGEgcGxheWxpc3RcblxuICAgIF90aGlzLnN5bmNDb250cm9sbGVyXyA9IHNldHRpbmdzLnN5bmNDb250cm9sbGVyO1xuICAgIF90aGlzLnN5bmNQb2ludF8gPSB7XG4gICAgICBzZWdtZW50SW5kZXg6IDAsXG4gICAgICB0aW1lOiAwXG4gICAgfTtcblxuICAgIF90aGlzLnN5bmNDb250cm9sbGVyXy5vbignc3luY2luZm91cGRhdGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMudHJpZ2dlcignc3luY2luZm91cGRhdGUnKTtcbiAgICB9KTtcblxuICAgIF90aGlzLm1lZGlhU291cmNlXy5hZGRFdmVudExpc3RlbmVyKCdzb3VyY2VvcGVuJywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLmVuZGVkXyA9IGZhbHNlO1xuICAgIH0pOyAvLyAuLi5mb3IgZGV0ZXJtaW5pbmcgdGhlIGZldGNoIGxvY2F0aW9uXG5cblxuICAgIF90aGlzLmZldGNoQXRCdWZmZXJfID0gZmFsc2U7XG4gICAgX3RoaXMubG9nZ2VyXyA9IGxvZ2dlcignU2VnbWVudExvYWRlclsnICsgX3RoaXMubG9hZGVyVHlwZV8gKyAnXScpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ3N0YXRlJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlXztcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMShuZXdTdGF0ZSkge1xuICAgICAgICBpZiAobmV3U3RhdGUgIT09IHRoaXMuc3RhdGVfKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXJfKHRoaXMuc3RhdGVfICsgJyAtPiAnICsgbmV3U3RhdGUpO1xuICAgICAgICAgIHRoaXMuc3RhdGVfID0gbmV3U3RhdGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXG4gICAqIHJlc2V0IGFsbCBvZiBvdXIgbWVkaWEgc3RhdHNcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICBjcmVhdGVDbGFzcyhTZWdtZW50TG9hZGVyLCBbe1xuICAgIGtleTogJ3Jlc2V0U3RhdHNfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXRTdGF0c18oKSB7XG4gICAgICB0aGlzLm1lZGlhQnl0ZXNUcmFuc2ZlcnJlZCA9IDA7XG4gICAgICB0aGlzLm1lZGlhUmVxdWVzdHMgPSAwO1xuICAgICAgdGhpcy5tZWRpYVJlcXVlc3RzQWJvcnRlZCA9IDA7XG4gICAgICB0aGlzLm1lZGlhUmVxdWVzdHNUaW1lZG91dCA9IDA7XG4gICAgICB0aGlzLm1lZGlhUmVxdWVzdHNFcnJvcmVkID0gMDtcbiAgICAgIHRoaXMubWVkaWFUcmFuc2ZlckR1cmF0aW9uID0gMDtcbiAgICAgIHRoaXMubWVkaWFTZWNvbmRzTG9hZGVkID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogZGlzcG9zZSBvZiB0aGUgU2VnbWVudExvYWRlciBhbmQgcmVzZXQgdG8gdGhlIGRlZmF1bHQgc3RhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZGlzcG9zZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICB0aGlzLnN0YXRlID0gJ0RJU1BPU0VEJztcbiAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgIHRoaXMuYWJvcnRfKCk7XG5cbiAgICAgIGlmICh0aGlzLnNvdXJjZVVwZGF0ZXJfKSB7XG4gICAgICAgIHRoaXMuc291cmNlVXBkYXRlcl8uZGlzcG9zZSgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJlc2V0U3RhdHNfKCk7XG4gICAgICB0aGlzLmNhcHRpb25QYXJzZXJfLnJlc2V0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGFib3J0IGFueXRoaW5nIHRoYXQgaXMgY3VycmVudGx5IGRvaW5nIG9uIHdpdGggdGhlIFNlZ21lbnRMb2FkZXJcbiAgICAgKiBhbmQgcmVzZXQgdG8gYSBkZWZhdWx0IHN0YXRlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2Fib3J0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWJvcnQoKSB7XG4gICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gJ1dBSVRJTkcnKSB7XG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmdTZWdtZW50Xykge1xuICAgICAgICAgIHRoaXMucGVuZGluZ1NlZ21lbnRfID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5hYm9ydF8oKTsgLy8gV2UgYWJvcnRlZCB0aGUgcmVxdWVzdHMgd2Ugd2VyZSB3YWl0aW5nIG9uLCBzbyByZXNldCB0aGUgbG9hZGVyJ3Mgc3RhdGUgdG8gUkVBRFlcbiAgICAgIC8vIHNpbmNlIHdlIGFyZSBubyBsb25nZXIgXCJ3YWl0aW5nXCIgb24gYW55IHJlcXVlc3RzLiBYSFIgY2FsbGJhY2sgaXMgbm90IGFsd2F5cyBydW5cbiAgICAgIC8vIHdoZW4gdGhlIHJlcXVlc3QgaXMgYWJvcnRlZC4gVGhpcyB3aWxsIHByZXZlbnQgdGhlIGxvYWRlciBmcm9tIGJlaW5nIHN0dWNrIGluIHRoZVxuICAgICAgLy8gV0FJVElORyBzdGF0ZSBpbmRlZmluaXRlbHkuXG5cbiAgICAgIHRoaXMuc3RhdGUgPSAnUkVBRFknOyAvLyBkb24ndCB3YWl0IGZvciBidWZmZXIgY2hlY2sgdGltZW91dHMgdG8gYmVnaW4gZmV0Y2hpbmcgdGhlXG4gICAgICAvLyBuZXh0IHNlZ21lbnRcblxuICAgICAgaWYgKCF0aGlzLnBhdXNlZCgpKSB7XG4gICAgICAgIHRoaXMubW9uaXRvckJ1ZmZlcl8oKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogYWJvcnQgYWxsIHBlbmRpbmcgeGhyIHJlcXVlc3RzIGFuZCBudWxsIGFueSBwZW5kaW5nIHNlZ2VtZW50c1xuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnYWJvcnRfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWJvcnRfKCkge1xuICAgICAgaWYgKHRoaXMucGVuZGluZ1NlZ21lbnRfKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ1NlZ21lbnRfLmFib3J0UmVxdWVzdHMoKTtcbiAgICAgIH0gLy8gY2xlYXIgb3V0IHRoZSBzZWdtZW50IGJlaW5nIHByb2Nlc3NlZFxuXG5cbiAgICAgIHRoaXMucGVuZGluZ1NlZ21lbnRfID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogc2V0IGFuIGVycm9yIG9uIHRoZSBzZWdtZW50IGxvYWRlciBhbmQgbnVsbCBvdXQgYW55IHBlbmRpbmcgc2VnZW1lbnRzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Vycm9yfSBlcnJvciB0aGUgZXJyb3IgdG8gc2V0IG9uIHRoZSBTZWdtZW50TG9hZGVyXG4gICAgICogQHJldHVybiB7RXJyb3J9IHRoZSBlcnJvciB0aGF0IHdhcyBzZXQgb3IgdGhhdCBpcyBjdXJyZW50bHkgc2V0XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2Vycm9yJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZXJyb3IoX2Vycm9yKSB7XG4gICAgICBpZiAodHlwZW9mIF9lcnJvciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5lcnJvcl8gPSBfZXJyb3I7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucGVuZGluZ1NlZ21lbnRfID0gbnVsbDtcbiAgICAgIHJldHVybiB0aGlzLmVycm9yXztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdlbmRPZlN0cmVhbScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuZE9mU3RyZWFtKCkge1xuICAgICAgdGhpcy5lbmRlZF8gPSB0cnVlO1xuICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgdGhpcy50cmlnZ2VyKCdlbmRlZCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hpY2ggdGltZSByYW5nZXMgYXJlIGJ1ZmZlcmVkXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtUaW1lUmFuZ2V9XG4gICAgICogICAgICAgICBUaW1lUmFuZ2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBidWZmZXJlZCByYW5nZXNcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnYnVmZmVyZWRfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gYnVmZmVyZWRfKCkge1xuICAgICAgaWYgKCF0aGlzLnNvdXJjZVVwZGF0ZXJfKSB7XG4gICAgICAgIHJldHVybiB2aWRlb2pzJDEuY3JlYXRlVGltZVJhbmdlcygpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2VVcGRhdGVyXy5idWZmZXJlZCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGFuZCBzZXRzIGluaXQgc2VnbWVudCBmb3IgdGhlIHByb3ZpZGVkIG1hcFxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxuICAgICAqICAgICAgICBUaGUgbWFwIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGluaXQgc2VnbWVudCB0byBnZXQgb3Igc2V0XG4gICAgICogQHBhcmFtIHtCb29sZWFuPX0gc2V0XG4gICAgICogICAgICAgIElmIHRydWUsIHRoZSBpbml0IHNlZ21lbnQgZm9yIHRoZSBwcm92aWRlZCBtYXAgc2hvdWxkIGJlIHNhdmVkXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqICAgICAgICAgbWFwIG9iamVjdCBmb3IgZGVzaXJlZCBpbml0IHNlZ21lbnRcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnaW5pdFNlZ21lbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0U2VnbWVudChtYXApIHtcbiAgICAgIHZhciBzZXQkJDEgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlO1xuXG4gICAgICBpZiAoIW1hcCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIGlkID0gaW5pdFNlZ21lbnRJZChtYXApO1xuICAgICAgdmFyIHN0b3JlZE1hcCA9IHRoaXMuaW5pdFNlZ21lbnRzX1tpZF07XG5cbiAgICAgIGlmIChzZXQkJDEgJiYgIXN0b3JlZE1hcCAmJiBtYXAuYnl0ZXMpIHtcbiAgICAgICAgdGhpcy5pbml0U2VnbWVudHNfW2lkXSA9IHN0b3JlZE1hcCA9IHtcbiAgICAgICAgICByZXNvbHZlZFVyaTogbWFwLnJlc29sdmVkVXJpLFxuICAgICAgICAgIGJ5dGVyYW5nZTogbWFwLmJ5dGVyYW5nZSxcbiAgICAgICAgICBieXRlczogbWFwLmJ5dGVzLFxuICAgICAgICAgIHRpbWVzY2FsZXM6IG1hcC50aW1lc2NhbGVzLFxuICAgICAgICAgIHZpZGVvVHJhY2tJZHM6IG1hcC52aWRlb1RyYWNrSWRzXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzdG9yZWRNYXAgfHwgbWFwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYWxsIGNvbmZpZ3VyYXRpb24gcmVxdWlyZWQgZm9yIGxvYWRpbmcgaXMgcHJlc2VudCwgb3RoZXJ3aXNlIGZhbHNlLlxuICAgICAqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgYWxsIGNvbmZpZ3VyYXRpb24gaXMgcmVhZHkgZm9yIGxvYWRpbmdcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdjb3VsZEJlZ2luTG9hZGluZ18nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb3VsZEJlZ2luTG9hZGluZ18oKSB7XG4gICAgICByZXR1cm4gdGhpcy5wbGF5bGlzdF8gJiYgKCAvLyB0aGUgc291cmNlIHVwZGF0ZXIgaXMgY3JlYXRlZCB3aGVuIGluaXRfIGlzIGNhbGxlZCwgc28gZWl0aGVyIGhhdmluZyBhXG4gICAgICAvLyBzb3VyY2UgdXBkYXRlciBvciBiZWluZyBpbiB0aGUgSU5JVCBzdGF0ZSB3aXRoIGEgbWltZVR5cGUgaXMgZW5vdWdoXG4gICAgICAvLyB0byBzYXkgd2UgaGF2ZSBhbGwgdGhlIG5lZWRlZCBjb25maWd1cmF0aW9uIHRvIHN0YXJ0IGxvYWRpbmcuXG4gICAgICB0aGlzLnNvdXJjZVVwZGF0ZXJfIHx8IHRoaXMubWltZVR5cGVfICYmIHRoaXMuc3RhdGUgPT09ICdJTklUJykgJiYgIXRoaXMucGF1c2VkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGxvYWQgYSBwbGF5bGlzdCBhbmQgc3RhcnQgdG8gZmlsbCB0aGUgYnVmZmVyXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2xvYWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkKCkge1xuICAgICAgLy8gdW4tcGF1c2VcbiAgICAgIHRoaXMubW9uaXRvckJ1ZmZlcl8oKTsgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhIHBsYXlsaXN0IHlldCwga2VlcCB3YWl0aW5nIGZvciBvbmUgdG8gYmVcbiAgICAgIC8vIHNwZWNpZmllZFxuXG4gICAgICBpZiAoIXRoaXMucGxheWxpc3RfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gbm90IHN1cmUgaWYgdGhpcyBpcyB0aGUgYmVzdCBwbGFjZSBmb3IgdGhpc1xuXG5cbiAgICAgIHRoaXMuc3luY0NvbnRyb2xsZXJfLnNldERhdGVUaW1lTWFwcGluZyh0aGlzLnBsYXlsaXN0Xyk7IC8vIGlmIGFsbCB0aGUgY29uZmlndXJhdGlvbiBpcyByZWFkeSwgaW5pdGlhbGl6ZSBhbmQgYmVnaW4gbG9hZGluZ1xuXG4gICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ0lOSVQnICYmIHRoaXMuY291bGRCZWdpbkxvYWRpbmdfKCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdF8oKTtcbiAgICAgIH0gLy8gaWYgd2UncmUgaW4gdGhlIG1pZGRsZSBvZiBwcm9jZXNzaW5nIGEgc2VnbWVudCBhbHJlYWR5LCBkb24ndFxuICAgICAgLy8ga2ljayBvZmYgYW4gYWRkaXRpb25hbCBzZWdtZW50IHJlcXVlc3RcblxuXG4gICAgICBpZiAoIXRoaXMuY291bGRCZWdpbkxvYWRpbmdfKCkgfHwgdGhpcy5zdGF0ZSAhPT0gJ1JFQURZJyAmJiB0aGlzLnN0YXRlICE9PSAnSU5JVCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YXRlID0gJ1JFQURZJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogT25jZSBhbGwgdGhlIHN0YXJ0aW5nIHBhcmFtZXRlcnMgaGF2ZSBiZWVuIHNwZWNpZmllZCwgYmVnaW5cbiAgICAgKiBvcGVyYXRpb24uIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGludm9rZWQgZnJvbSB0aGUgSU5JVFxuICAgICAqIHN0YXRlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnaW5pdF8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0XygpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSAnUkVBRFknO1xuICAgICAgdGhpcy5zb3VyY2VVcGRhdGVyXyA9IG5ldyBTb3VyY2VVcGRhdGVyKHRoaXMubWVkaWFTb3VyY2VfLCB0aGlzLm1pbWVUeXBlXywgdGhpcy5sb2FkZXJUeXBlXywgdGhpcy5zb3VyY2VCdWZmZXJFbWl0dGVyXyk7XG4gICAgICB0aGlzLnJlc2V0RXZlcnl0aGluZygpO1xuICAgICAgcmV0dXJuIHRoaXMubW9uaXRvckJ1ZmZlcl8oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogc2V0IGEgcGxheWxpc3Qgb24gdGhlIHNlZ21lbnQgbG9hZGVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BsYXlsaXN0TG9hZGVyfSBtZWRpYSB0aGUgcGxheWxpc3QgdG8gc2V0IG9uIHRoZSBzZWdtZW50IGxvYWRlclxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdwbGF5bGlzdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBsYXlsaXN0KG5ld1BsYXlsaXN0KSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICAgIGlmICghbmV3UGxheWxpc3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgb2xkUGxheWxpc3QgPSB0aGlzLnBsYXlsaXN0XztcbiAgICAgIHZhciBzZWdtZW50SW5mbyA9IHRoaXMucGVuZGluZ1NlZ21lbnRfO1xuICAgICAgdGhpcy5wbGF5bGlzdF8gPSBuZXdQbGF5bGlzdDtcbiAgICAgIHRoaXMueGhyT3B0aW9uc18gPSBvcHRpb25zOyAvLyB3aGVuIHdlIGhhdmVuJ3Qgc3RhcnRlZCBwbGF5aW5nIHlldCwgdGhlIHN0YXJ0IG9mIGEgbGl2ZSBwbGF5bGlzdFxuICAgICAgLy8gaXMgYWx3YXlzIG91ciB6ZXJvLXRpbWUgc28gZm9yY2UgYSBzeW5jIHVwZGF0ZSBlYWNoIHRpbWUgdGhlIHBsYXlsaXN0XG4gICAgICAvLyBpcyByZWZyZXNoZWQgZnJvbSB0aGUgc2VydmVyXG5cbiAgICAgIGlmICghdGhpcy5oYXNQbGF5ZWRfKCkpIHtcbiAgICAgICAgbmV3UGxheWxpc3Quc3luY0luZm8gPSB7XG4gICAgICAgICAgbWVkaWFTZXF1ZW5jZTogbmV3UGxheWxpc3QubWVkaWFTZXF1ZW5jZSxcbiAgICAgICAgICB0aW1lOiAwXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHZhciBvbGRJZCA9IG51bGw7XG5cbiAgICAgIGlmIChvbGRQbGF5bGlzdCkge1xuICAgICAgICBpZiAob2xkUGxheWxpc3QuaWQpIHtcbiAgICAgICAgICBvbGRJZCA9IG9sZFBsYXlsaXN0LmlkO1xuICAgICAgICB9IGVsc2UgaWYgKG9sZFBsYXlsaXN0LnVyaSkge1xuICAgICAgICAgIG9sZElkID0gb2xkUGxheWxpc3QudXJpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMubG9nZ2VyXygncGxheWxpc3QgdXBkYXRlIFsnICsgb2xkSWQgKyAnID0+ICcgKyAobmV3UGxheWxpc3QuaWQgfHwgbmV3UGxheWxpc3QudXJpKSArICddJyk7IC8vIGluIFZPRCwgdGhpcyBpcyBhbHdheXMgYSByZW5kaXRpb24gc3dpdGNoIChvciB3ZSB1cGRhdGVkIG91ciBzeW5jSW5mbyBhYm92ZSlcbiAgICAgIC8vIGluIExJVkUsIHdlIGFsd2F5cyB3YW50IHRvIHVwZGF0ZSB3aXRoIG5ldyBwbGF5bGlzdHMgKGluY2x1ZGluZyByZWZyZXNoZXMpXG5cbiAgICAgIHRoaXMudHJpZ2dlcignc3luY2luZm91cGRhdGUnKTsgLy8gaWYgd2Ugd2VyZSB1bnBhdXNlZCBidXQgd2FpdGluZyBmb3IgYSBwbGF5bGlzdCwgc3RhcnRcbiAgICAgIC8vIGJ1ZmZlcmluZyBub3dcblxuICAgICAgaWYgKHRoaXMuc3RhdGUgPT09ICdJTklUJyAmJiB0aGlzLmNvdWxkQmVnaW5Mb2FkaW5nXygpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluaXRfKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghb2xkUGxheWxpc3QgfHwgb2xkUGxheWxpc3QudXJpICE9PSBuZXdQbGF5bGlzdC51cmkpIHtcbiAgICAgICAgaWYgKHRoaXMubWVkaWFJbmRleCAhPT0gbnVsbCkge1xuICAgICAgICAgIC8vIHdlIG11c3QgXCJyZXN5bmNcIiB0aGUgc2VnbWVudCBsb2FkZXIgd2hlbiB3ZSBzd2l0Y2ggcmVuZGl0aW9ucyBhbmRcbiAgICAgICAgICAvLyB0aGUgc2VnbWVudCBsb2FkZXIgaXMgYWxyZWFkeSBzeW5jZWQgdG8gdGhlIHByZXZpb3VzIHJlbmRpdGlvblxuICAgICAgICAgIHRoaXMucmVzeW5jTG9hZGVyKCk7XG4gICAgICAgIH0gLy8gdGhlIHJlc3Qgb2YgdGhpcyBmdW5jdGlvbiBkZXBlbmRzIG9uIGBvbGRQbGF5bGlzdGAgYmVpbmcgZGVmaW5lZFxuXG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyB3ZSByZWxvYWRlZCB0aGUgc2FtZSBwbGF5bGlzdCBzbyB3ZSBhcmUgaW4gYSBsaXZlIHNjZW5hcmlvXG4gICAgICAvLyBhbmQgd2Ugd2lsbCBsaWtlbHkgbmVlZCB0byBhZGp1c3QgdGhlIG1lZGlhSW5kZXhcblxuXG4gICAgICB2YXIgbWVkaWFTZXF1ZW5jZURpZmYgPSBuZXdQbGF5bGlzdC5tZWRpYVNlcXVlbmNlIC0gb2xkUGxheWxpc3QubWVkaWFTZXF1ZW5jZTtcbiAgICAgIHRoaXMubG9nZ2VyXygnbGl2ZSB3aW5kb3cgc2hpZnQgWycgKyBtZWRpYVNlcXVlbmNlRGlmZiArICddJyk7IC8vIHVwZGF0ZSB0aGUgbWVkaWFJbmRleCBvbiB0aGUgU2VnbWVudExvYWRlclxuICAgICAgLy8gdGhpcyBpcyBpbXBvcnRhbnQgYmVjYXVzZSB3ZSBjYW4gYWJvcnQgYSByZXF1ZXN0IGFuZCB0aGlzIHZhbHVlIG11c3QgYmVcbiAgICAgIC8vIGVxdWFsIHRvIHRoZSBsYXN0IGFwcGVuZGVkIG1lZGlhSW5kZXhcblxuICAgICAgaWYgKHRoaXMubWVkaWFJbmRleCAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLm1lZGlhSW5kZXggLT0gbWVkaWFTZXF1ZW5jZURpZmY7XG4gICAgICB9IC8vIHVwZGF0ZSB0aGUgbWVkaWFJbmRleCBvbiB0aGUgU2VnbWVudEluZm8gb2JqZWN0XG4gICAgICAvLyB0aGlzIGlzIGltcG9ydGFudCBiZWNhdXNlIHdlIHdpbGwgdXBkYXRlIHRoaXMubWVkaWFJbmRleCB3aXRoIHRoaXMgdmFsdWVcbiAgICAgIC8vIGluIGBoYW5kbGVVcGRhdGVFbmRfYCBhZnRlciB0aGUgc2VnbWVudCBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgYXBwZW5kZWRcblxuXG4gICAgICBpZiAoc2VnbWVudEluZm8pIHtcbiAgICAgICAgc2VnbWVudEluZm8ubWVkaWFJbmRleCAtPSBtZWRpYVNlcXVlbmNlRGlmZjsgLy8gd2UgbmVlZCB0byB1cGRhdGUgdGhlIHJlZmVyZW5jZWQgc2VnbWVudCBzbyB0aGF0IHRpbWluZyBpbmZvcm1hdGlvbiBpc1xuICAgICAgICAvLyBzYXZlZCBmb3IgdGhlIG5ldyBwbGF5bGlzdCdzIHNlZ21lbnQsIGhvd2V2ZXIsIGlmIHRoZSBzZWdtZW50IGZlbGwgb2ZmIHRoZVxuICAgICAgICAvLyBwbGF5bGlzdCwgd2UgY2FuIGxlYXZlIHRoZSBvbGQgcmVmZXJlbmNlIGFuZCBqdXN0IGxvc2UgdGhlIHRpbWluZyBpbmZvXG5cbiAgICAgICAgaWYgKHNlZ21lbnRJbmZvLm1lZGlhSW5kZXggPj0gMCkge1xuICAgICAgICAgIHNlZ21lbnRJbmZvLnNlZ21lbnQgPSBuZXdQbGF5bGlzdC5zZWdtZW50c1tzZWdtZW50SW5mby5tZWRpYUluZGV4XTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLnN5bmNDb250cm9sbGVyXy5zYXZlRXhwaXJlZFNlZ21lbnRJbmZvKG9sZFBsYXlsaXN0LCBuZXdQbGF5bGlzdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByZXZlbnQgdGhlIGxvYWRlciBmcm9tIGZldGNoaW5nIGFkZGl0aW9uYWwgc2VnbWVudHMuIElmIHRoZXJlXG4gICAgICogaXMgYSBzZWdtZW50IHJlcXVlc3Qgb3V0c3RhbmRpbmcsIGl0IHdpbGwgZmluaXNoIHByb2Nlc3NpbmdcbiAgICAgKiBiZWZvcmUgdGhlIGxvYWRlciBoYWx0cy4gQSBzZWdtZW50IGxvYWRlciBjYW4gYmUgdW5wYXVzZWQgYnlcbiAgICAgKiBjYWxsaW5nIGxvYWQoKS5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAncGF1c2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICAgIGlmICh0aGlzLmNoZWNrQnVmZmVyVGltZW91dF8pIHtcbiAgICAgICAgd2luZG93JDEuY2xlYXJUaW1lb3V0KHRoaXMuY2hlY2tCdWZmZXJUaW1lb3V0Xyk7XG4gICAgICAgIHRoaXMuY2hlY2tCdWZmZXJUaW1lb3V0XyA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgc2VnbWVudCBsb2FkZXIgaXMgZmV0Y2hpbmcgYWRkaXRpb25hbFxuICAgICAqIHNlZ21lbnRzIHdoZW4gZ2l2ZW4gdGhlIG9wcG9ydHVuaXR5LiBUaGlzIHByb3BlcnR5IGNhbiBiZVxuICAgICAqIG1vZGlmaWVkIHRocm91Z2ggY2FsbHMgdG8gcGF1c2UoKSBhbmQgbG9hZCgpLlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdwYXVzZWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXVzZWQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGVja0J1ZmZlclRpbWVvdXRfID09PSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBjcmVhdGUvc2V0IHRoZSBmb2xsb3dpbmcgbWltZXR5cGUgb24gdGhlIFNvdXJjZUJ1ZmZlciB0aHJvdWdoIGFcbiAgICAgKiBTb3VyY2VVcGRhdGVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWltZVR5cGUgdGhlIG1pbWUgdHlwZSBzdHJpbmcgdG8gdXNlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZUJ1ZmZlckVtaXR0ZXIgYW4gZXZlbnQgZW1pdHRlciB0aGF0IGZpcmVzIHdoZW4gYSBzb3VyY2UgYnVmZmVyXG4gICAgICogaXMgYWRkZWQgdG8gdGhlIG1lZGlhIHNvdXJjZVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdtaW1lVHlwZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1pbWVUeXBlKF9taW1lVHlwZSwgc291cmNlQnVmZmVyRW1pdHRlcikge1xuICAgICAgaWYgKHRoaXMubWltZVR5cGVfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5taW1lVHlwZV8gPSBfbWltZVR5cGU7XG4gICAgICB0aGlzLnNvdXJjZUJ1ZmZlckVtaXR0ZXJfID0gc291cmNlQnVmZmVyRW1pdHRlcjsgLy8gaWYgd2Ugd2VyZSB1bnBhdXNlZCBidXQgd2FpdGluZyBmb3IgYSBzb3VyY2VVcGRhdGVyLCBzdGFydFxuICAgICAgLy8gYnVmZmVyaW5nIG5vd1xuXG4gICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ0lOSVQnICYmIHRoaXMuY291bGRCZWdpbkxvYWRpbmdfKCkpIHtcbiAgICAgICAgdGhpcy5pbml0XygpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGUgYWxsIHRoZSBidWZmZXJlZCBkYXRhIGFuZCByZXNldCB0aGUgU2VnbWVudExvYWRlclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtkb25lXSBhbiBvcHRpb25hbCBjYWxsYmFjayB0byBiZSBleGVjdXRlZCB3aGVuIHRoZSByZW1vdmVcbiAgICAgKiBvcGVyYXRpb24gaXMgY29tcGxldGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAncmVzZXRFdmVyeXRoaW5nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXRFdmVyeXRoaW5nKGRvbmUpIHtcbiAgICAgIHRoaXMuZW5kZWRfID0gZmFsc2U7XG4gICAgICB0aGlzLnJlc2V0TG9hZGVyKCk7XG4gICAgICB0aGlzLnJlbW92ZSgwLCB0aGlzLmR1cmF0aW9uXygpLCBkb25lKTsgLy8gY2xlYXJzIGZtcDQgY2FwdGlvbnNcblxuICAgICAgdGhpcy5jYXB0aW9uUGFyc2VyXy5jbGVhckFsbENhcHRpb25zKCk7XG4gICAgICB0aGlzLnRyaWdnZXIoJ3Jlc2V0ZXZlcnl0aGluZycpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JjZSB0aGUgU2VnbWVudExvYWRlciB0byByZXN5bmMgYW5kIHN0YXJ0IGxvYWRpbmcgYXJvdW5kIHRoZSBjdXJyZW50VGltZSBpbnN0ZWFkXG4gICAgICogb2Ygc3RhcnRpbmcgYXQgdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG4gICAgICpcbiAgICAgKiBVc2VmdWwgZm9yIGZhc3QgcXVhbGl0eSBjaGFuZ2VzXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3Jlc2V0TG9hZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXRMb2FkZXIoKSB7XG4gICAgICB0aGlzLmZldGNoQXRCdWZmZXJfID0gZmFsc2U7XG4gICAgICB0aGlzLnJlc3luY0xvYWRlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JjZSB0aGUgU2VnbWVudExvYWRlciB0byByZXN0YXJ0IHN5bmNocm9uaXphdGlvbiBhbmQgbWFrZSBhIGNvbnNlcnZhdGl2ZSBndWVzc1xuICAgICAqIGJlZm9yZSByZXR1cm5pbmcgdG8gdGhlIHNpbXBsZSB3YWxrLWZvcndhcmQgbWV0aG9kXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3Jlc3luY0xvYWRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc3luY0xvYWRlcigpIHtcbiAgICAgIHRoaXMubWVkaWFJbmRleCA9IG51bGw7XG4gICAgICB0aGlzLnN5bmNQb2ludF8gPSBudWxsO1xuICAgICAgdGhpcy5hYm9ydCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYW55IGRhdGEgaW4gdGhlIHNvdXJjZSBidWZmZXIgYmV0d2VlbiBzdGFydCBhbmQgZW5kIHRpbWVzXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0IC0gdGhlIHN0YXJ0IHRpbWUgb2YgdGhlIHJlZ2lvbiB0byByZW1vdmUgZnJvbSB0aGUgYnVmZmVyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGVuZCAtIHRoZSBlbmQgdGltZSBvZiB0aGUgcmVnaW9uIHRvIHJlbW92ZSBmcm9tIHRoZSBidWZmZXJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZG9uZV0gLSBhbiBvcHRpb25hbCBjYWxsYmFjayB0byBiZSBleGVjdXRlZCB3aGVuIHRoZSByZW1vdmVcbiAgICAgKiBvcGVyYXRpb24gaXMgY29tcGxldGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAncmVtb3ZlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlKHN0YXJ0LCBlbmQsIGRvbmUpIHtcbiAgICAgIGlmICh0aGlzLnNvdXJjZVVwZGF0ZXJfKSB7XG4gICAgICAgIHRoaXMuc291cmNlVXBkYXRlcl8ucmVtb3ZlKHN0YXJ0LCBlbmQsIGRvbmUpO1xuICAgICAgfVxuXG4gICAgICByZW1vdmVDdWVzRnJvbVRyYWNrKHN0YXJ0LCBlbmQsIHRoaXMuc2VnbWVudE1ldGFkYXRhVHJhY2tfKTtcblxuICAgICAgaWYgKHRoaXMuaW5iYW5kVGV4dFRyYWNrc18pIHtcbiAgICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy5pbmJhbmRUZXh0VHJhY2tzXykge1xuICAgICAgICAgIHJlbW92ZUN1ZXNGcm9tVHJhY2soc3RhcnQsIGVuZCwgdGhpcy5pbmJhbmRUZXh0VHJhY2tzX1tpZF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIChyZS0pc2NoZWR1bGUgbW9uaXRvckJ1ZmZlclRpY2tfIHRvIHJ1biBhcyBzb29uIGFzIHBvc3NpYmxlXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdtb25pdG9yQnVmZmVyXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1vbml0b3JCdWZmZXJfKCkge1xuICAgICAgaWYgKHRoaXMuY2hlY2tCdWZmZXJUaW1lb3V0Xykge1xuICAgICAgICB3aW5kb3ckMS5jbGVhclRpbWVvdXQodGhpcy5jaGVja0J1ZmZlclRpbWVvdXRfKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jaGVja0J1ZmZlclRpbWVvdXRfID0gd2luZG93JDEuc2V0VGltZW91dCh0aGlzLm1vbml0b3JCdWZmZXJUaWNrXy5iaW5kKHRoaXMpLCAxKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXMgbG9uZyBhcyB0aGUgU2VnbWVudExvYWRlciBpcyBpbiB0aGUgUkVBRFkgc3RhdGUsIHBlcmlvZGljYWxseVxuICAgICAqIGludm9rZSBmaWxsQnVmZmVyXygpLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnbW9uaXRvckJ1ZmZlclRpY2tfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbW9uaXRvckJ1ZmZlclRpY2tfKCkge1xuICAgICAgaWYgKHRoaXMuc3RhdGUgPT09ICdSRUFEWScpIHtcbiAgICAgICAgdGhpcy5maWxsQnVmZmVyXygpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5jaGVja0J1ZmZlclRpbWVvdXRfKSB7XG4gICAgICAgIHdpbmRvdyQxLmNsZWFyVGltZW91dCh0aGlzLmNoZWNrQnVmZmVyVGltZW91dF8pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmNoZWNrQnVmZmVyVGltZW91dF8gPSB3aW5kb3ckMS5zZXRUaW1lb3V0KHRoaXMubW9uaXRvckJ1ZmZlclRpY2tfLmJpbmQodGhpcyksIENIRUNLX0JVRkZFUl9ERUxBWSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGZpbGwgdGhlIGJ1ZmZlciB3aXRoIHNlZ2VtZW50cyB1bmxlc3MgdGhlIHNvdXJjZUJ1ZmZlcnMgYXJlXG4gICAgICogY3VycmVudGx5IHVwZGF0aW5nXG4gICAgICpcbiAgICAgKiBOb3RlOiB0aGlzIGZ1bmN0aW9uIHNob3VsZCBvbmx5IGV2ZXIgYmUgY2FsbGVkIGJ5IG1vbml0b3JCdWZmZXJfXG4gICAgICogYW5kIG5ldmVyIGRpcmVjdGx5XG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdmaWxsQnVmZmVyXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZpbGxCdWZmZXJfKCkge1xuICAgICAgaWYgKHRoaXMuc291cmNlVXBkYXRlcl8udXBkYXRpbmcoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5zeW5jUG9pbnRfKSB7XG4gICAgICAgIHRoaXMuc3luY1BvaW50XyA9IHRoaXMuc3luY0NvbnRyb2xsZXJfLmdldFN5bmNQb2ludCh0aGlzLnBsYXlsaXN0XywgdGhpcy5kdXJhdGlvbl8oKSwgdGhpcy5jdXJyZW50VGltZWxpbmVfLCB0aGlzLmN1cnJlbnRUaW1lXygpKTtcbiAgICAgIH0gLy8gc2VlIGlmIHdlIG5lZWQgdG8gYmVnaW4gbG9hZGluZyBpbW1lZGlhdGVseVxuXG5cbiAgICAgIHZhciBzZWdtZW50SW5mbyA9IHRoaXMuY2hlY2tCdWZmZXJfKHRoaXMuYnVmZmVyZWRfKCksIHRoaXMucGxheWxpc3RfLCB0aGlzLm1lZGlhSW5kZXgsIHRoaXMuaGFzUGxheWVkXygpLCB0aGlzLmN1cnJlbnRUaW1lXygpLCB0aGlzLnN5bmNQb2ludF8pO1xuXG4gICAgICBpZiAoIXNlZ21lbnRJbmZvKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuaXNFbmRPZlN0cmVhbV8oc2VnbWVudEluZm8ubWVkaWFJbmRleCkpIHtcbiAgICAgICAgdGhpcy5lbmRPZlN0cmVhbSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChzZWdtZW50SW5mby5tZWRpYUluZGV4ID09PSB0aGlzLnBsYXlsaXN0Xy5zZWdtZW50cy5sZW5ndGggLSAxICYmIHRoaXMubWVkaWFTb3VyY2VfLnJlYWR5U3RhdGUgPT09ICdlbmRlZCcgJiYgIXRoaXMuc2Vla2luZ18oKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIFdlIHdpbGwgbmVlZCB0byBjaGFuZ2UgdGltZXN0YW1wT2Zmc2V0IG9mIHRoZSBzb3VyY2VCdWZmZXIgaWYgZWl0aGVyIG9mXG4gICAgICAvLyB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIHRydWU6XG4gICAgICAvLyAtIFRoZSBzZWdtZW50LnRpbWVsaW5lICE9PSB0aGlzLmN1cnJlbnRUaW1lbGluZVxuICAgICAgLy8gICAod2UgYXJlIGNyb3NzaW5nIGEgZGlzY29udGludWl0eSBzb21laG93KVxuICAgICAgLy8gLSBUaGUgXCJ0aW1lc3RhbXBPZmZzZXRcIiBmb3IgdGhlIHN0YXJ0IG9mIHRoaXMgc2VnbWVudCBpcyBsZXNzIHRoYW5cbiAgICAgIC8vICAgdGhlIGN1cnJlbnRseSBzZXQgdGltZXN0YW1wT2Zmc2V0XG4gICAgICAvLyBBbHNvLCBjbGVhciBjYXB0aW9ucyBpZiB3ZSBhcmUgY3Jvc3NpbmcgYSBkaXNjb250aW51aXR5IGJvdW5kYXJ5XG5cblxuICAgICAgaWYgKHNlZ21lbnRJbmZvLnRpbWVsaW5lICE9PSB0aGlzLmN1cnJlbnRUaW1lbGluZV8gfHwgc2VnbWVudEluZm8uc3RhcnRPZlNlZ21lbnQgIT09IG51bGwgJiYgc2VnbWVudEluZm8uc3RhcnRPZlNlZ21lbnQgPCB0aGlzLnNvdXJjZVVwZGF0ZXJfLnRpbWVzdGFtcE9mZnNldCgpKSB7XG4gICAgICAgIHRoaXMuc3luY0NvbnRyb2xsZXJfLnJlc2V0KCk7XG4gICAgICAgIHNlZ21lbnRJbmZvLnRpbWVzdGFtcE9mZnNldCA9IHNlZ21lbnRJbmZvLnN0YXJ0T2ZTZWdtZW50O1xuICAgICAgICB0aGlzLmNhcHRpb25QYXJzZXJfLmNsZWFyQWxsQ2FwdGlvbnMoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5sb2FkU2VnbWVudF8oc2VnbWVudEluZm8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIHRoaXMgc2VnbWVudCBsb2FkZXIgaXMgYXQgdGhlIGVuZCBvZiBpdCdzIHN0cmVhbS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBtZWRpYUluZGV4IHRoZSBpbmRleCBvZiBzZWdtZW50IHdlIGxhc3QgYXBwZW5kZWRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3BsYXlsaXN0PXRoaXMucGxheWxpc3RfXSBhIG1lZGlhIHBsYXlsaXN0IG9iamVjdFxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGF0IGVuZCBvZiBzdHJlYW0sIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnaXNFbmRPZlN0cmVhbV8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc0VuZE9mU3RyZWFtXyhtZWRpYUluZGV4KSB7XG4gICAgICB2YXIgcGxheWxpc3QgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRoaXMucGxheWxpc3RfO1xuICAgICAgcmV0dXJuIGRldGVjdEVuZE9mU3RyZWFtKHBsYXlsaXN0LCB0aGlzLm1lZGlhU291cmNlXywgbWVkaWFJbmRleCkgJiYgIXRoaXMuc291cmNlVXBkYXRlcl8udXBkYXRpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyB3aGF0IHNlZ21lbnQgcmVxdWVzdCBzaG91bGQgYmUgbWFkZSwgZ2l2ZW4gY3VycmVudCBwbGF5YmFja1xuICAgICAqIHN0YXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtUaW1lUmFuZ2VzfSBidWZmZXJlZCAtIHRoZSBzdGF0ZSBvZiB0aGUgYnVmZmVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBsYXlsaXN0IC0gdGhlIHBsYXlsaXN0IG9iamVjdCB0byBmZXRjaCBzZWdtZW50cyBmcm9tXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG1lZGlhSW5kZXggLSB0aGUgcHJldmlvdXMgbWVkaWFJbmRleCBmZXRjaGVkIG9yIG51bGxcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGhhc1BsYXllZCAtIGEgZmxhZyBpbmRpY2F0aW5nIHdoZXRoZXIgd2UgaGF2ZSBwbGF5ZWQgb3Igbm90XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGN1cnJlbnRUaW1lIC0gdGhlIHBsYXliYWNrIHBvc2l0aW9uIGluIHNlY29uZHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3luY1BvaW50IC0gYSBzZWdtZW50IGluZm8gb2JqZWN0IHRoYXQgZGVzY3JpYmVzIHRoZVxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IGEgc2VnbWVudCByZXF1ZXN0IG9iamVjdCB0aGF0IGRlc2NyaWJlcyB0aGUgc2VnbWVudCB0byBsb2FkXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2NoZWNrQnVmZmVyXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrQnVmZmVyXyhidWZmZXJlZCwgcGxheWxpc3QsIG1lZGlhSW5kZXgsIGhhc1BsYXllZCwgY3VycmVudFRpbWUsIHN5bmNQb2ludCkge1xuICAgICAgdmFyIGxhc3RCdWZmZXJlZEVuZCA9IDA7XG4gICAgICB2YXIgc3RhcnRPZlNlZ21lbnQgPSB2b2lkIDA7XG5cbiAgICAgIGlmIChidWZmZXJlZC5sZW5ndGgpIHtcbiAgICAgICAgbGFzdEJ1ZmZlcmVkRW5kID0gYnVmZmVyZWQuZW5kKGJ1ZmZlcmVkLmxlbmd0aCAtIDEpO1xuICAgICAgfVxuXG4gICAgICB2YXIgYnVmZmVyZWRUaW1lID0gTWF0aC5tYXgoMCwgbGFzdEJ1ZmZlcmVkRW5kIC0gY3VycmVudFRpbWUpO1xuXG4gICAgICBpZiAoIXBsYXlsaXN0LnNlZ21lbnRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gLy8gaWYgdGhlcmUgaXMgcGxlbnR5IG9mIGNvbnRlbnQgYnVmZmVyZWQsIGFuZCB0aGUgdmlkZW8gaGFzXG4gICAgICAvLyBiZWVuIHBsYXllZCBiZWZvcmUgcmVsYXggZm9yIGF3aGlsZVxuXG5cbiAgICAgIGlmIChidWZmZXJlZFRpbWUgPj0gdGhpcy5nb2FsQnVmZmVyTGVuZ3RoXygpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSAvLyBpZiB0aGUgdmlkZW8gaGFzIG5vdCB5ZXQgcGxheWVkIG9uY2UsIGFuZCB3ZSBhbHJlYWR5IGhhdmVcbiAgICAgIC8vIG9uZSBzZWdtZW50IGRvd25sb2FkZWQgZG8gbm90aGluZ1xuXG5cbiAgICAgIGlmICghaGFzUGxheWVkICYmIGJ1ZmZlcmVkVGltZSA+PSAxKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSAvLyBXaGVuIHRoZSBzeW5jUG9pbnQgaXMgbnVsbCwgdGhlcmUgaXMgbm8gd2F5IG9mIGRldGVybWluaW5nIGEgZ29vZFxuICAgICAgLy8gY29uc2VydmF0aXZlIHNlZ21lbnQgaW5kZXggdG8gZmV0Y2ggZnJvbVxuICAgICAgLy8gVGhlIGJlc3QgdGhpbmcgdG8gZG8gaGVyZSBpcyB0byBnZXQgdGhlIGtpbmQgb2Ygc3luYy1wb2ludCBkYXRhIGJ5XG4gICAgICAvLyBtYWtpbmcgYSByZXF1ZXN0XG5cblxuICAgICAgaWYgKHN5bmNQb2ludCA9PT0gbnVsbCkge1xuICAgICAgICBtZWRpYUluZGV4ID0gdGhpcy5nZXRTeW5jU2VnbWVudENhbmRpZGF0ZV8ocGxheWxpc3QpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZVNlZ21lbnRJbmZvXyhwbGF5bGlzdCwgbWVkaWFJbmRleCwgbnVsbCwgdHJ1ZSk7XG4gICAgICB9IC8vIFVuZGVyIG5vcm1hbCBwbGF5YmFjayBjb25kaXRpb25zIGZldGNoaW5nIGlzIGEgc2ltcGxlIHdhbGsgZm9yd2FyZFxuXG5cbiAgICAgIGlmIChtZWRpYUluZGV4ICE9PSBudWxsKSB7XG4gICAgICAgIHZhciBzZWdtZW50ID0gcGxheWxpc3Quc2VnbWVudHNbbWVkaWFJbmRleF07XG5cbiAgICAgICAgaWYgKHNlZ21lbnQgJiYgc2VnbWVudC5lbmQpIHtcbiAgICAgICAgICBzdGFydE9mU2VnbWVudCA9IHNlZ21lbnQuZW5kO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YXJ0T2ZTZWdtZW50ID0gbGFzdEJ1ZmZlcmVkRW5kO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVTZWdtZW50SW5mb18ocGxheWxpc3QsIG1lZGlhSW5kZXggKyAxLCBzdGFydE9mU2VnbWVudCwgZmFsc2UpO1xuICAgICAgfSAvLyBUaGVyZSBpcyBhIHN5bmMtcG9pbnQgYnV0IHRoZSBsYWNrIG9mIGEgbWVkaWFJbmRleCBpbmRpY2F0ZXMgdGhhdFxuICAgICAgLy8gd2UgbmVlZCB0byBtYWtlIGEgZ29vZCBjb25zZXJ2YXRpdmUgZ3Vlc3MgYWJvdXQgd2hpY2ggc2VnbWVudCB0b1xuICAgICAgLy8gZmV0Y2hcblxuXG4gICAgICBpZiAodGhpcy5mZXRjaEF0QnVmZmVyXykge1xuICAgICAgICAvLyBGaW5kIHRoZSBzZWdtZW50IGNvbnRhaW5pbmcgdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG4gICAgICAgIHZhciBtZWRpYVNvdXJjZUluZm8gPSBQbGF5bGlzdC5nZXRNZWRpYUluZm9Gb3JUaW1lKHBsYXlsaXN0LCBsYXN0QnVmZmVyZWRFbmQsIHN5bmNQb2ludC5zZWdtZW50SW5kZXgsIHN5bmNQb2ludC50aW1lKTtcbiAgICAgICAgbWVkaWFJbmRleCA9IG1lZGlhU291cmNlSW5mby5tZWRpYUluZGV4O1xuICAgICAgICBzdGFydE9mU2VnbWVudCA9IG1lZGlhU291cmNlSW5mby5zdGFydFRpbWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGaW5kIHRoZSBzZWdtZW50IGNvbnRhaW5pbmcgY3VycmVudFRpbWVcbiAgICAgICAgdmFyIF9tZWRpYVNvdXJjZUluZm8gPSBQbGF5bGlzdC5nZXRNZWRpYUluZm9Gb3JUaW1lKHBsYXlsaXN0LCBjdXJyZW50VGltZSwgc3luY1BvaW50LnNlZ21lbnRJbmRleCwgc3luY1BvaW50LnRpbWUpO1xuXG4gICAgICAgIG1lZGlhSW5kZXggPSBfbWVkaWFTb3VyY2VJbmZvLm1lZGlhSW5kZXg7XG4gICAgICAgIHN0YXJ0T2ZTZWdtZW50ID0gX21lZGlhU291cmNlSW5mby5zdGFydFRpbWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlU2VnbWVudEluZm9fKHBsYXlsaXN0LCBtZWRpYUluZGV4LCBzdGFydE9mU2VnbWVudCwgZmFsc2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgc2VnbWVudCBsb2FkZXIgaGFzIG5vIHJlY291cnNlIGV4Y2VwdCB0byBmZXRjaCBhIHNlZ21lbnQgaW4gdGhlXG4gICAgICogY3VycmVudCBwbGF5bGlzdCBhbmQgdXNlIHRoZSBpbnRlcm5hbCB0aW1lc3RhbXBzIGluIHRoYXQgc2VnbWVudCB0b1xuICAgICAqIGdlbmVyYXRlIGEgc3luY1BvaW50LiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgYSBnb29kIGNhbmRpZGF0ZSBpbmRleFxuICAgICAqIGZvciB0aGF0IHByb2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGxheWxpc3QgLSB0aGUgcGxheWxpc3Qgb2JqZWN0IHRvIGxvb2sgZm9yIGFcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBBbiBpbmRleCBvZiBhIHNlZ21lbnQgZnJvbSB0aGUgcGxheWxpc3QgdG8gbG9hZFxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdnZXRTeW5jU2VnbWVudENhbmRpZGF0ZV8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTeW5jU2VnbWVudENhbmRpZGF0ZV8ocGxheWxpc3QpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5jdXJyZW50VGltZWxpbmVfID09PSAtMSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlZ21lbnRJbmRleEFycmF5ID0gcGxheWxpc3Quc2VnbWVudHMubWFwKGZ1bmN0aW9uIChzLCBpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdGltZWxpbmU6IHMudGltZWxpbmUsXG4gICAgICAgICAgc2VnbWVudEluZGV4OiBpXG4gICAgICAgIH07XG4gICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgcmV0dXJuIHMudGltZWxpbmUgPT09IF90aGlzMi5jdXJyZW50VGltZWxpbmVfO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChzZWdtZW50SW5kZXhBcnJheS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHNlZ21lbnRJbmRleEFycmF5W01hdGgubWluKHNlZ21lbnRJbmRleEFycmF5Lmxlbmd0aCAtIDEsIDEpXS5zZWdtZW50SW5kZXg7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBNYXRoLm1heChwbGF5bGlzdC5zZWdtZW50cy5sZW5ndGggLSAxLCAwKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdnZW5lcmF0ZVNlZ21lbnRJbmZvXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlU2VnbWVudEluZm9fKHBsYXlsaXN0LCBtZWRpYUluZGV4LCBzdGFydE9mU2VnbWVudCwgaXNTeW5jUmVxdWVzdCkge1xuICAgICAgaWYgKG1lZGlhSW5kZXggPCAwIHx8IG1lZGlhSW5kZXggPj0gcGxheWxpc3Quc2VnbWVudHMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2VnbWVudCA9IHBsYXlsaXN0LnNlZ21lbnRzW21lZGlhSW5kZXhdO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVxdWVzdElkOiAnc2VnbWVudC1sb2FkZXItJyArIE1hdGgucmFuZG9tKCksXG4gICAgICAgIC8vIHJlc29sdmUgdGhlIHNlZ21lbnQgVVJMIHJlbGF0aXZlIHRvIHRoZSBwbGF5bGlzdFxuICAgICAgICB1cmk6IHNlZ21lbnQucmVzb2x2ZWRVcmksXG4gICAgICAgIC8vIHRoZSBzZWdtZW50J3MgbWVkaWFJbmRleCBhdCB0aGUgdGltZSBpdCB3YXMgcmVxdWVzdGVkXG4gICAgICAgIG1lZGlhSW5kZXg6IG1lZGlhSW5kZXgsXG4gICAgICAgIC8vIHdoZXRoZXIgb3Igbm90IHRvIHVwZGF0ZSB0aGUgU2VnbWVudExvYWRlcidzIHN0YXRlIHdpdGggdGhpc1xuICAgICAgICAvLyBzZWdtZW50J3MgbWVkaWFJbmRleFxuICAgICAgICBpc1N5bmNSZXF1ZXN0OiBpc1N5bmNSZXF1ZXN0LFxuICAgICAgICBzdGFydE9mU2VnbWVudDogc3RhcnRPZlNlZ21lbnQsXG4gICAgICAgIC8vIHRoZSBzZWdtZW50J3MgcGxheWxpc3RcbiAgICAgICAgcGxheWxpc3Q6IHBsYXlsaXN0LFxuICAgICAgICAvLyB1bmVuY3J5cHRlZCBieXRlcyBvZiB0aGUgc2VnbWVudFxuICAgICAgICBieXRlczogbnVsbCxcbiAgICAgICAgLy8gd2hlbiBhIGtleSBpcyBkZWZpbmVkIGZvciB0aGlzIHNlZ21lbnQsIHRoZSBlbmNyeXB0ZWQgYnl0ZXNcbiAgICAgICAgZW5jcnlwdGVkQnl0ZXM6IG51bGwsXG4gICAgICAgIC8vIFRoZSB0YXJnZXQgdGltZXN0YW1wT2Zmc2V0IGZvciB0aGlzIHNlZ21lbnQgd2hlbiB3ZSBhcHBlbmQgaXRcbiAgICAgICAgLy8gdG8gdGhlIHNvdXJjZSBidWZmZXJcbiAgICAgICAgdGltZXN0YW1wT2Zmc2V0OiBudWxsLFxuICAgICAgICAvLyBUaGUgdGltZWxpbmUgdGhhdCB0aGUgc2VnbWVudCBpcyBpblxuICAgICAgICB0aW1lbGluZTogc2VnbWVudC50aW1lbGluZSxcbiAgICAgICAgLy8gVGhlIGV4cGVjdGVkIGR1cmF0aW9uIG9mIHRoZSBzZWdtZW50IGluIHNlY29uZHNcbiAgICAgICAgZHVyYXRpb246IHNlZ21lbnQuZHVyYXRpb24sXG4gICAgICAgIC8vIHJldGFpbiB0aGUgc2VnbWVudCBpbiBjYXNlIHRoZSBwbGF5bGlzdCB1cGRhdGVzIHdoaWxlIGRvaW5nIGFuIGFzeW5jIHByb2Nlc3NcbiAgICAgICAgc2VnbWVudDogc2VnbWVudFxuICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGUgbmV0d29yayBoYXMgZW5vdWdoIGJhbmR3aWR0aCB0byBjb21wbGV0ZSB0aGUgY3VycmVudCBzZWdtZW50XG4gICAgICogcmVxdWVzdCBpbiBhIHRpbWVseSBtYW5uZXIuIElmIG5vdCwgdGhlIHJlcXVlc3Qgd2lsbCBiZSBhYm9ydGVkIGVhcmx5IGFuZCBiYW5kd2lkdGhcbiAgICAgKiB1cGRhdGVkIHRvIHRyaWdnZXIgYSBwbGF5bGlzdCBzd2l0Y2guXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3RhdHNcbiAgICAgKiAgICAgICAgT2JqZWN0IGNvbnRhaW5pbmcgc3RhdHMgYWJvdXQgdGhlIHJlcXVlc3QgdGltaW5nIGFuZCBzaXplXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgcmVxdWVzdCB3YXMgYWJvcnRlZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnYWJvcnRSZXF1ZXN0RWFybHlfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWJvcnRSZXF1ZXN0RWFybHlfKHN0YXRzKSB7XG4gICAgICBpZiAodGhpcy5obHNfLnRlY2hfLnBhdXNlZCgpIHx8IC8vIERvbid0IGFib3J0IGlmIHRoZSBjdXJyZW50IHBsYXlsaXN0IGlzIG9uIHRoZSBsb3dlc3RFbmFibGVkUmVuZGl0aW9uXG4gICAgICAvLyBUT0RPOiBSZXBsYWNlIHVzaW5nIHRpbWVvdXQgd2l0aCBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoaXMgcGxheWxpc3QgaXNcbiAgICAgIC8vICAgICAgIHRoZSBsb3dlc3RFbmFibGVkUmVuZGl0aW9uLlxuICAgICAgIXRoaXMueGhyT3B0aW9uc18udGltZW91dCB8fCAvLyBEb24ndCBhYm9ydCBpZiB3ZSBoYXZlIG5vIGJhbmR3aWR0aCBpbmZvcm1hdGlvbiB0byBlc3RpbWF0ZSBzZWdtZW50IHNpemVzXG4gICAgICAhdGhpcy5wbGF5bGlzdF8uYXR0cmlidXRlcy5CQU5EV0lEVEgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSAvLyBXYWl0IGF0IGxlYXN0IDEgc2Vjb25kIHNpbmNlIHRoZSBmaXJzdCBieXRlIG9mIGRhdGEgaGFzIGJlZW4gcmVjZWl2ZWQgYmVmb3JlXG4gICAgICAvLyB1c2luZyB0aGUgY2FsY3VsYXRlZCBiYW5kd2lkdGggZnJvbSB0aGUgcHJvZ3Jlc3MgZXZlbnQgdG8gYWxsb3cgdGhlIGJpdHJhdGVcbiAgICAgIC8vIHRvIHN0YWJpbGl6ZVxuXG5cbiAgICAgIGlmIChEYXRlLm5vdygpIC0gKHN0YXRzLmZpcnN0Qnl0ZXNSZWNlaXZlZEF0IHx8IERhdGUubm93KCkpIDwgMTAwMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBjdXJyZW50VGltZSA9IHRoaXMuY3VycmVudFRpbWVfKCk7XG4gICAgICB2YXIgbWVhc3VyZWRCYW5kd2lkdGggPSBzdGF0cy5iYW5kd2lkdGg7XG4gICAgICB2YXIgc2VnbWVudER1cmF0aW9uID0gdGhpcy5wZW5kaW5nU2VnbWVudF8uZHVyYXRpb247XG4gICAgICB2YXIgcmVxdWVzdFRpbWVSZW1haW5pbmcgPSBQbGF5bGlzdC5lc3RpbWF0ZVNlZ21lbnRSZXF1ZXN0VGltZShzZWdtZW50RHVyYXRpb24sIG1lYXN1cmVkQmFuZHdpZHRoLCB0aGlzLnBsYXlsaXN0Xywgc3RhdHMuYnl0ZXNSZWNlaXZlZCk7IC8vIFN1YnRyYWN0IDEgZnJvbSB0aGUgdGltZVVudGlsUmVidWZmZXIgc28gd2Ugc3RpbGwgY29uc2lkZXIgYW4gZWFybHkgYWJvcnRcbiAgICAgIC8vIGlmIHdlIGFyZSBvbmx5IGxlZnQgd2l0aCBsZXNzIHRoYW4gMSBzZWNvbmQgd2hlbiB0aGUgcmVxdWVzdCBjb21wbGV0ZXMuXG4gICAgICAvLyBBIG5lZ2F0aXZlIHRpbWVVbnRpbFJlYnVmZmVyaW5nIGluZGljYXRlcyB3ZSBhcmUgYWxyZWFkeSByZWJ1ZmZlcmluZ1xuXG4gICAgICB2YXIgdGltZVVudGlsUmVidWZmZXIkJDEgPSB0aW1lVW50aWxSZWJ1ZmZlcih0aGlzLmJ1ZmZlcmVkXygpLCBjdXJyZW50VGltZSwgdGhpcy5obHNfLnRlY2hfLnBsYXliYWNrUmF0ZSgpKSAtIDE7IC8vIE9ubHkgY29uc2lkZXIgYWJvcnRpbmcgZWFybHkgaWYgdGhlIGVzdGltYXRlZCB0aW1lIHRvIGZpbmlzaCB0aGUgZG93bmxvYWRcbiAgICAgIC8vIGlzIGxhcmdlciB0aGFuIHRoZSBlc3RpbWF0ZWQgdGltZSB1bnRpbCB0aGUgcGxheWVyIHJ1bnMgb3V0IG9mIGZvcndhcmQgYnVmZmVyXG5cbiAgICAgIGlmIChyZXF1ZXN0VGltZVJlbWFpbmluZyA8PSB0aW1lVW50aWxSZWJ1ZmZlciQkMSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBzd2l0Y2hDYW5kaWRhdGUgPSBtaW5SZWJ1ZmZlck1heEJhbmR3aWR0aFNlbGVjdG9yKHtcbiAgICAgICAgbWFzdGVyOiB0aGlzLmhsc18ucGxheWxpc3RzLm1hc3RlcixcbiAgICAgICAgY3VycmVudFRpbWU6IGN1cnJlbnRUaW1lLFxuICAgICAgICBiYW5kd2lkdGg6IG1lYXN1cmVkQmFuZHdpZHRoLFxuICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbl8oKSxcbiAgICAgICAgc2VnbWVudER1cmF0aW9uOiBzZWdtZW50RHVyYXRpb24sXG4gICAgICAgIHRpbWVVbnRpbFJlYnVmZmVyOiB0aW1lVW50aWxSZWJ1ZmZlciQkMSxcbiAgICAgICAgY3VycmVudFRpbWVsaW5lOiB0aGlzLmN1cnJlbnRUaW1lbGluZV8sXG4gICAgICAgIHN5bmNDb250cm9sbGVyOiB0aGlzLnN5bmNDb250cm9sbGVyX1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghc3dpdGNoQ2FuZGlkYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlYnVmZmVyaW5nSW1wYWN0ID0gcmVxdWVzdFRpbWVSZW1haW5pbmcgLSB0aW1lVW50aWxSZWJ1ZmZlciQkMTtcbiAgICAgIHZhciB0aW1lU2F2ZWRCeVN3aXRjaGluZyA9IHJlYnVmZmVyaW5nSW1wYWN0IC0gc3dpdGNoQ2FuZGlkYXRlLnJlYnVmZmVyaW5nSW1wYWN0O1xuICAgICAgdmFyIG1pbmltdW1UaW1lU2F2aW5nID0gMC41OyAvLyBJZiB3ZSBhcmUgYWxyZWFkeSByZWJ1ZmZlcmluZywgaW5jcmVhc2UgdGhlIGFtb3VudCBvZiB2YXJpYW5jZSB3ZSBhZGQgdG8gdGhlXG4gICAgICAvLyBwb3RlbnRpYWwgcm91bmQgdHJpcCB0aW1lIG9mIHRoZSBuZXcgcmVxdWVzdCBzbyB0aGF0IHdlIGFyZSBub3QgdG9vIGFnZ3Jlc3NpdmVcbiAgICAgIC8vIHdpdGggc3dpdGNoaW5nIHRvIGEgcGxheWxpc3QgdGhhdCBtaWdodCBzYXZlIHVzIGEgZnJhY3Rpb24gb2YgYSBzZWNvbmQuXG5cbiAgICAgIGlmICh0aW1lVW50aWxSZWJ1ZmZlciQkMSA8PSBUSU1FX0ZVREdFX0ZBQ1RPUikge1xuICAgICAgICBtaW5pbXVtVGltZVNhdmluZyA9IDE7XG4gICAgICB9XG5cbiAgICAgIGlmICghc3dpdGNoQ2FuZGlkYXRlLnBsYXlsaXN0IHx8IHN3aXRjaENhbmRpZGF0ZS5wbGF5bGlzdC51cmkgPT09IHRoaXMucGxheWxpc3RfLnVyaSB8fCB0aW1lU2F2ZWRCeVN3aXRjaGluZyA8IG1pbmltdW1UaW1lU2F2aW5nKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gLy8gc2V0IHRoZSBiYW5kd2lkdGggdG8gdGhhdCBvZiB0aGUgZGVzaXJlZCBwbGF5bGlzdCBiZWluZyBzdXJlIHRvIHNjYWxlIGJ5XG4gICAgICAvLyBCQU5EV0lEVEhfVkFSSUFOQ0UgYW5kIGFkZCBvbmUgc28gdGhlIHBsYXlsaXN0IHNlbGVjdG9yIGRvZXMgbm90IGV4Y2x1ZGUgaXRcbiAgICAgIC8vIGRvbid0IHRyaWdnZXIgYSBiYW5kd2lkdGh1cGRhdGUgYXMgdGhlIGJhbmR3aWR0aCBpcyBhcnRpZmlhbFxuXG5cbiAgICAgIHRoaXMuYmFuZHdpZHRoID0gc3dpdGNoQ2FuZGlkYXRlLnBsYXlsaXN0LmF0dHJpYnV0ZXMuQkFORFdJRFRIICogQ29uZmlnLkJBTkRXSURUSF9WQVJJQU5DRSArIDE7XG4gICAgICB0aGlzLmFib3J0KCk7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2Vhcmx5YWJvcnQnKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBYSFIgYHByb2dyZXNzYCBldmVudCBoYW5kbGVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50fVxuICAgICAqICAgICAgICBUaGUgWEhSIGBwcm9ncmVzc2AgZXZlbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc2ltcGxlU2VnbWVudFxuICAgICAqICAgICAgICBBIHNpbXBsaWZpZWQgc2VnbWVudCBvYmplY3QgY29weVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2hhbmRsZVByb2dyZXNzXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVByb2dyZXNzXyhldmVudCwgc2ltcGxlU2VnbWVudCkge1xuICAgICAgaWYgKCF0aGlzLnBlbmRpbmdTZWdtZW50XyB8fCBzaW1wbGVTZWdtZW50LnJlcXVlc3RJZCAhPT0gdGhpcy5wZW5kaW5nU2VnbWVudF8ucmVxdWVzdElkIHx8IHRoaXMuYWJvcnRSZXF1ZXN0RWFybHlfKHNpbXBsZVNlZ21lbnQuc3RhdHMpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy50cmlnZ2VyKCdwcm9ncmVzcycpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBsb2FkIGEgc3BlY2lmaWMgc2VnbWVudCBmcm9tIGEgcmVxdWVzdCBpbnRvIHRoZSBidWZmZXJcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2xvYWRTZWdtZW50XycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRTZWdtZW50XyhzZWdtZW50SW5mbykge1xuICAgICAgdGhpcy5zdGF0ZSA9ICdXQUlUSU5HJztcbiAgICAgIHRoaXMucGVuZGluZ1NlZ21lbnRfID0gc2VnbWVudEluZm87XG4gICAgICB0aGlzLnRyaW1CYWNrQnVmZmVyXyhzZWdtZW50SW5mbyk7XG4gICAgICBzZWdtZW50SW5mby5hYm9ydFJlcXVlc3RzID0gbWVkaWFTZWdtZW50UmVxdWVzdCh0aGlzLmhsc18ueGhyLCB0aGlzLnhock9wdGlvbnNfLCB0aGlzLmRlY3J5cHRlcl8sIHRoaXMuY2FwdGlvblBhcnNlcl8sIHRoaXMuY3JlYXRlU2ltcGxpZmllZFNlZ21lbnRPYmpfKHNlZ21lbnRJbmZvKSwgLy8gcHJvZ3Jlc3MgY2FsbGJhY2tcbiAgICAgIHRoaXMuaGFuZGxlUHJvZ3Jlc3NfLmJpbmQodGhpcyksIHRoaXMuc2VnbWVudFJlcXVlc3RGaW5pc2hlZF8uYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHRyaW0gdGhlIGJhY2sgYnVmZmVyIHNvIHRoYXQgd2UgZG9uJ3QgaGF2ZSB0b28gbXVjaCBkYXRhXG4gICAgICogaW4gdGhlIHNvdXJjZSBidWZmZXJcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc2VnbWVudEluZm8gLSB0aGUgY3VycmVudCBzZWdtZW50XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3RyaW1CYWNrQnVmZmVyXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRyaW1CYWNrQnVmZmVyXyhzZWdtZW50SW5mbykge1xuICAgICAgdmFyIHJlbW92ZVRvVGltZSA9IHNhZmVCYWNrQnVmZmVyVHJpbVRpbWUodGhpcy5zZWVrYWJsZV8oKSwgdGhpcy5jdXJyZW50VGltZV8oKSwgdGhpcy5wbGF5bGlzdF8udGFyZ2V0RHVyYXRpb24gfHwgMTApOyAvLyBDaHJvbWUgaGFzIGEgaGFyZCBsaW1pdCBvZiAxNTBNQiBvZlxuICAgICAgLy8gYnVmZmVyIGFuZCBhIHZlcnkgY29uc2VydmF0aXZlIFwiZ2FyYmFnZSBjb2xsZWN0b3JcIlxuICAgICAgLy8gV2UgbWFudWFsbHkgY2xlYXIgb3V0IHRoZSBvbGQgYnVmZmVyIHRvIGVuc3VyZVxuICAgICAgLy8gd2UgZG9uJ3QgdHJpZ2dlciB0aGUgUXVvdGFFeGNlZWRlZCBlcnJvclxuICAgICAgLy8gb24gdGhlIHNvdXJjZSBidWZmZXIgZHVyaW5nIHN1YnNlcXVlbnQgYXBwZW5kc1xuXG4gICAgICBpZiAocmVtb3ZlVG9UaW1lID4gMCkge1xuICAgICAgICB0aGlzLnJlbW92ZSgwLCByZW1vdmVUb1RpbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBjcmVhdGVkIGEgc2ltcGxpZmllZCBjb3B5IG9mIHRoZSBzZWdtZW50IG9iamVjdCB3aXRoIGp1c3QgdGhlXG4gICAgICogaW5mb3JtYXRpb24gbmVjZXNzYXJ5IHRvIHBlcmZvcm0gdGhlIFhIUiBhbmQgZGVjcnlwdGlvblxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzZWdtZW50SW5mbyAtIHRoZSBjdXJyZW50IHNlZ21lbnRcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBhIHNpbXBsaWZpZWQgc2VnbWVudCBvYmplY3QgY29weVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdjcmVhdGVTaW1wbGlmaWVkU2VnbWVudE9ial8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVTaW1wbGlmaWVkU2VnbWVudE9ial8oc2VnbWVudEluZm8pIHtcbiAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudEluZm8uc2VnbWVudDtcbiAgICAgIHZhciBzaW1wbGVTZWdtZW50ID0ge1xuICAgICAgICByZXNvbHZlZFVyaTogc2VnbWVudC5yZXNvbHZlZFVyaSxcbiAgICAgICAgYnl0ZXJhbmdlOiBzZWdtZW50LmJ5dGVyYW5nZSxcbiAgICAgICAgcmVxdWVzdElkOiBzZWdtZW50SW5mby5yZXF1ZXN0SWRcbiAgICAgIH07XG5cbiAgICAgIGlmIChzZWdtZW50LmtleSkge1xuICAgICAgICAvLyBpZiB0aGUgbWVkaWEgc2VxdWVuY2UgaXMgZ3JlYXRlciB0aGFuIDJeMzIsIHRoZSBJViB3aWxsIGJlIGluY29ycmVjdFxuICAgICAgICAvLyBhc3N1bWluZyAxMHMgc2VnbWVudHMsIHRoYXQgd291bGQgYmUgYWJvdXQgMTMwMCB5ZWFyc1xuICAgICAgICB2YXIgaXYgPSBzZWdtZW50LmtleS5pdiB8fCBuZXcgVWludDMyQXJyYXkoWzAsIDAsIDAsIHNlZ21lbnRJbmZvLm1lZGlhSW5kZXggKyBzZWdtZW50SW5mby5wbGF5bGlzdC5tZWRpYVNlcXVlbmNlXSk7XG4gICAgICAgIHNpbXBsZVNlZ21lbnQua2V5ID0ge1xuICAgICAgICAgIHJlc29sdmVkVXJpOiBzZWdtZW50LmtleS5yZXNvbHZlZFVyaSxcbiAgICAgICAgICBpdjogaXZcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlZ21lbnQubWFwKSB7XG4gICAgICAgIHNpbXBsZVNlZ21lbnQubWFwID0gdGhpcy5pbml0U2VnbWVudChzZWdtZW50Lm1hcCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzaW1wbGVTZWdtZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdGhlIGNhbGxiYWNrIGZyb20gdGhlIHNlZ21lbnRSZXF1ZXN0IGZ1bmN0aW9uIGFuZCBzZXQgdGhlXG4gICAgICogYXNzb2NpYXRlZCBTZWdtZW50TG9hZGVyIHN0YXRlIGFuZCBlcnJvcnMgaWYgbmVjZXNzYXJ5XG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdzZWdtZW50UmVxdWVzdEZpbmlzaGVkXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlZ21lbnRSZXF1ZXN0RmluaXNoZWRfKGVycm9yLCBzaW1wbGVTZWdtZW50KSB7XG4gICAgICAvLyBldmVyeSByZXF1ZXN0IGNvdW50cyBhcyBhIG1lZGlhIHJlcXVlc3QgZXZlbiBpZiBpdCBoYXMgYmVlbiBhYm9ydGVkXG4gICAgICAvLyBvciBjYW5jZWxlZCBkdWUgdG8gYSB0aW1lb3V0XG4gICAgICB0aGlzLm1lZGlhUmVxdWVzdHMgKz0gMTtcblxuICAgICAgaWYgKHNpbXBsZVNlZ21lbnQuc3RhdHMpIHtcbiAgICAgICAgdGhpcy5tZWRpYUJ5dGVzVHJhbnNmZXJyZWQgKz0gc2ltcGxlU2VnbWVudC5zdGF0cy5ieXRlc1JlY2VpdmVkO1xuICAgICAgICB0aGlzLm1lZGlhVHJhbnNmZXJEdXJhdGlvbiArPSBzaW1wbGVTZWdtZW50LnN0YXRzLnJvdW5kVHJpcFRpbWU7XG4gICAgICB9IC8vIFRoZSByZXF1ZXN0IHdhcyBhYm9ydGVkIGFuZCB0aGUgU2VnbWVudExvYWRlciBoYXMgYWxyZWFkeSBiZWVuIHJlc2V0XG5cblxuICAgICAgaWYgKCF0aGlzLnBlbmRpbmdTZWdtZW50Xykge1xuICAgICAgICB0aGlzLm1lZGlhUmVxdWVzdHNBYm9ydGVkICs9IDE7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gdGhlIHJlcXVlc3Qgd2FzIGFib3J0ZWQgYW5kIHRoZSBTZWdtZW50TG9hZGVyIGhhcyBhbHJlYWR5IHN0YXJ0ZWRcbiAgICAgIC8vIGFub3RoZXIgcmVxdWVzdC4gdGhpcyBjYW4gaGFwcGVuIHdoZW4gdGhlIHRpbWVvdXQgZm9yIGFuIGFib3J0ZWRcbiAgICAgIC8vIHJlcXVlc3QgdHJpZ2dlcnMgZHVlIHRvIGEgbGltaXRhdGlvbiBpbiB0aGUgWEhSIGxpYnJhcnlcbiAgICAgIC8vIGRvIG5vdCBjb3VudCB0aGlzIGFzIGFueSBzb3J0IG9mIHJlcXVlc3Qgb3Igd2UgcmlzayBkb3VibGUtY291bnRpbmdcblxuXG4gICAgICBpZiAoc2ltcGxlU2VnbWVudC5yZXF1ZXN0SWQgIT09IHRoaXMucGVuZGluZ1NlZ21lbnRfLnJlcXVlc3RJZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIGFuIGVycm9yIG9jY3VycmVkIGZyb20gdGhlIGFjdGl2ZSBwZW5kaW5nU2VnbWVudF8gc28gcmVzZXQgZXZlcnl0aGluZ1xuXG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aGlzLnBlbmRpbmdTZWdtZW50XyA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAnUkVBRFknOyAvLyB0aGUgcmVxdWVzdHMgd2VyZSBhYm9ydGVkIGp1c3QgcmVjb3JkIHRoZSBhYm9ydGVkIHN0YXQgYW5kIGV4aXRcbiAgICAgICAgLy8gdGhpcyBpcyBub3QgYSB0cnVlIGVycm9yIGNvbmRpdGlvbiBhbmQgbm90aGluZyBjb3JyZWN0aXZlIG5lZWRzXG4gICAgICAgIC8vIHRvIGJlIGRvbmVcblxuICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gUkVRVUVTVF9FUlJPUlMuQUJPUlRFRCkge1xuICAgICAgICAgIHRoaXMubWVkaWFSZXF1ZXN0c0Fib3J0ZWQgKz0gMTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBhdXNlKCk7IC8vIHRoZSBlcnJvciBpcyByZWFsbHkganVzdCB0aGF0IGF0IGxlYXN0IG9uZSBvZiB0aGUgcmVxdWVzdHMgdGltZWQtb3V0XG4gICAgICAgIC8vIHNldCB0aGUgYmFuZHdpZHRoIHRvIGEgdmVyeSBsb3cgdmFsdWUgYW5kIHRyaWdnZXIgYW4gQUJSIHN3aXRjaCB0b1xuICAgICAgICAvLyB0YWtlIGVtZXJnZW5jeSBhY3Rpb25cblxuICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gUkVRVUVTVF9FUlJPUlMuVElNRU9VVCkge1xuICAgICAgICAgIHRoaXMubWVkaWFSZXF1ZXN0c1RpbWVkb3V0ICs9IDE7XG4gICAgICAgICAgdGhpcy5iYW5kd2lkdGggPSAxO1xuICAgICAgICAgIHRoaXMucm91bmRUcmlwID0gTmFOO1xuICAgICAgICAgIHRoaXMudHJpZ2dlcignYmFuZHdpZHRodXBkYXRlJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIGlmIGNvbnRyb2wtZmxvdyBoYXMgYXJyaXZlZCBoZXJlLCB0aGVuIHRoZSBlcnJvciBpcyByZWFsXG4gICAgICAgIC8vIGVtaXQgYW4gZXJyb3IgZXZlbnQgdG8gYmxhY2tsaXN0IHRoZSBjdXJyZW50IHBsYXlsaXN0XG5cblxuICAgICAgICB0aGlzLm1lZGlhUmVxdWVzdHNFcnJvcmVkICs9IDE7XG4gICAgICAgIHRoaXMuZXJyb3IoZXJyb3IpO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2Vycm9yJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gdGhlIHJlc3BvbnNlIHdhcyBhIHN1Y2Nlc3Mgc28gc2V0IGFueSBiYW5kd2lkdGggc3RhdHMgdGhlIHJlcXVlc3RcbiAgICAgIC8vIGdlbmVyYXRlZCBmb3IgQUJSIHB1cnBvc2VzXG5cblxuICAgICAgdGhpcy5iYW5kd2lkdGggPSBzaW1wbGVTZWdtZW50LnN0YXRzLmJhbmR3aWR0aDtcbiAgICAgIHRoaXMucm91bmRUcmlwID0gc2ltcGxlU2VnbWVudC5zdGF0cy5yb3VuZFRyaXBUaW1lOyAvLyBpZiB0aGlzIHJlcXVlc3QgaW5jbHVkZWQgYW4gaW5pdGlhbGl6YXRpb24gc2VnbWVudCwgc2F2ZSB0aGF0IGRhdGFcbiAgICAgIC8vIHRvIHRoZSBpbml0U2VnbWVudCBjYWNoZVxuXG4gICAgICBpZiAoc2ltcGxlU2VnbWVudC5tYXApIHtcbiAgICAgICAgc2ltcGxlU2VnbWVudC5tYXAgPSB0aGlzLmluaXRTZWdtZW50KHNpbXBsZVNlZ21lbnQubWFwLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wcm9jZXNzU2VnbWVudFJlc3BvbnNlXyhzaW1wbGVTZWdtZW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW92ZSBhbnkgaW1wb3J0YW50IGRhdGEgZnJvbSB0aGUgc2ltcGxpZmllZCBzZWdtZW50IG9iamVjdFxuICAgICAqIGJhY2sgdG8gdGhlIHJlYWwgc2VnbWVudCBvYmplY3QgZm9yIGZ1dHVyZSBwaGFzZXNcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3Byb2Nlc3NTZWdtZW50UmVzcG9uc2VfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2Vzc1NlZ21lbnRSZXNwb25zZV8oc2ltcGxlU2VnbWVudCkge1xuICAgICAgdmFyIHNlZ21lbnRJbmZvID0gdGhpcy5wZW5kaW5nU2VnbWVudF87XG4gICAgICBzZWdtZW50SW5mby5ieXRlcyA9IHNpbXBsZVNlZ21lbnQuYnl0ZXM7XG5cbiAgICAgIGlmIChzaW1wbGVTZWdtZW50Lm1hcCkge1xuICAgICAgICBzZWdtZW50SW5mby5zZWdtZW50Lm1hcC5ieXRlcyA9IHNpbXBsZVNlZ21lbnQubWFwLmJ5dGVzO1xuICAgICAgfVxuXG4gICAgICBzZWdtZW50SW5mby5lbmRPZkFsbFJlcXVlc3RzID0gc2ltcGxlU2VnbWVudC5lbmRPZkFsbFJlcXVlc3RzOyAvLyBUaGlzIGhhcyBmbXA0IGNhcHRpb25zLCBhZGQgdGhlbSB0byB0ZXh0IHRyYWNrc1xuXG4gICAgICBpZiAoc2ltcGxlU2VnbWVudC5mbXA0Q2FwdGlvbnMpIHtcbiAgICAgICAgY3JlYXRlQ2FwdGlvbnNUcmFja0lmTm90RXhpc3RzKHRoaXMuaW5iYW5kVGV4dFRyYWNrc18sIHRoaXMuaGxzXy50ZWNoXywgc2ltcGxlU2VnbWVudC5jYXB0aW9uU3RyZWFtcyk7XG4gICAgICAgIGFkZENhcHRpb25EYXRhKHtcbiAgICAgICAgICBpbmJhbmRUZXh0VHJhY2tzOiB0aGlzLmluYmFuZFRleHRUcmFja3NfLFxuICAgICAgICAgIGNhcHRpb25BcnJheTogc2ltcGxlU2VnbWVudC5mbXA0Q2FwdGlvbnMsXG4gICAgICAgICAgLy8gZm1wNHMgd2lsbCBub3QgaGF2ZSBhIHRpbWVzdGFtcCBvZmZzZXRcbiAgICAgICAgICB0aW1lc3RhbXBPZmZzZXQ6IDBcbiAgICAgICAgfSk7IC8vIFJlc2V0IHN0b3JlZCBjYXB0aW9ucyBzaW5jZSB3ZSBhZGRlZCBwYXJzZWRcbiAgICAgICAgLy8gY2FwdGlvbnMgdG8gYSB0ZXh0IHRyYWNrIGF0IHRoaXMgcG9pbnRcblxuICAgICAgICB0aGlzLmNhcHRpb25QYXJzZXJfLmNsZWFyUGFyc2VkQ2FwdGlvbnMoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5oYW5kbGVTZWdtZW50XygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBhcHBlbmQgYSBkZWNyeXB0ZWQgc2VnZW1lbnQgdG8gdGhlIFNvdXJjZUJ1ZmZlciB0aHJvdWdoIGEgU291cmNlVXBkYXRlclxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnaGFuZGxlU2VnbWVudF8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTZWdtZW50XygpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICBpZiAoIXRoaXMucGVuZGluZ1NlZ21lbnRfKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAnUkVBRFknO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBzZWdtZW50SW5mbyA9IHRoaXMucGVuZGluZ1NlZ21lbnRfO1xuICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50SW5mby5zZWdtZW50O1xuICAgICAgdmFyIHRpbWluZ0luZm8gPSB0aGlzLnN5bmNDb250cm9sbGVyXy5wcm9iZVNlZ21lbnRJbmZvKHNlZ21lbnRJbmZvKTsgLy8gV2hlbiB3ZSBoYXZlIG91ciBmaXJzdCB0aW1pbmcgaW5mbywgZGV0ZXJtaW5lIHdoYXQgbWVkaWEgdHlwZXMgdGhpcyBsb2FkZXIgaXNcbiAgICAgIC8vIGRlYWxpbmcgd2l0aC4gQWx0aG91Z2ggd2UncmUgbWFpbnRhaW5pbmcgZXh0cmEgc3RhdGUsIGl0IGhlbHBzIHRvIHByZXNlcnZlIHRoZVxuICAgICAgLy8gc2VwYXJhdGlvbiBvZiBzZWdtZW50IGxvYWRlciBmcm9tIHRoZSBhY3R1YWwgc291cmNlIGJ1ZmZlcnMuXG5cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5zdGFydGluZ01lZGlhXyA9PT0gJ3VuZGVmaW5lZCcgJiYgdGltaW5nSW5mbyAmJiAoIC8vIEd1YXJkIGFnYWluc3QgY2FzZXMgd2hlcmUgd2UncmUgbm90IGdldHRpbmcgdGltaW5nIGluZm8gYXQgYWxsIHVudGlsIHdlIGFyZVxuICAgICAgLy8gY2VydGFpbiB0aGF0IGFsbCBzdHJlYW1zIHdpbGwgcHJvdmlkZSBpdC5cbiAgICAgIHRpbWluZ0luZm8uY29udGFpbnNBdWRpbyB8fCB0aW1pbmdJbmZvLmNvbnRhaW5zVmlkZW8pKSB7XG4gICAgICAgIHRoaXMuc3RhcnRpbmdNZWRpYV8gPSB7XG4gICAgICAgICAgY29udGFpbnNBdWRpbzogdGltaW5nSW5mby5jb250YWluc0F1ZGlvLFxuICAgICAgICAgIGNvbnRhaW5zVmlkZW86IHRpbWluZ0luZm8uY29udGFpbnNWaWRlb1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB2YXIgaWxsZWdhbE1lZGlhU3dpdGNoRXJyb3IgPSBpbGxlZ2FsTWVkaWFTd2l0Y2godGhpcy5sb2FkZXJUeXBlXywgdGhpcy5zdGFydGluZ01lZGlhXywgdGltaW5nSW5mbyk7XG5cbiAgICAgIGlmIChpbGxlZ2FsTWVkaWFTd2l0Y2hFcnJvcikge1xuICAgICAgICB0aGlzLmVycm9yKHtcbiAgICAgICAgICBtZXNzYWdlOiBpbGxlZ2FsTWVkaWFTd2l0Y2hFcnJvcixcbiAgICAgICAgICBibGFja2xpc3REdXJhdGlvbjogSW5maW5pdHlcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudHJpZ2dlcignZXJyb3InKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2VnbWVudEluZm8uaXNTeW5jUmVxdWVzdCkge1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ3N5bmNpbmZvdXBkYXRlJyk7XG4gICAgICAgIHRoaXMucGVuZGluZ1NlZ21lbnRfID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGF0ZSA9ICdSRUFEWSc7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlZ21lbnRJbmZvLnRpbWVzdGFtcE9mZnNldCAhPT0gbnVsbCAmJiBzZWdtZW50SW5mby50aW1lc3RhbXBPZmZzZXQgIT09IHRoaXMuc291cmNlVXBkYXRlcl8udGltZXN0YW1wT2Zmc2V0KCkpIHtcbiAgICAgICAgdGhpcy5zb3VyY2VVcGRhdGVyXy50aW1lc3RhbXBPZmZzZXQoc2VnbWVudEluZm8udGltZXN0YW1wT2Zmc2V0KTsgLy8gZmlyZWQgd2hlbiBhIHRpbWVzdGFtcCBvZmZzZXQgaXMgc2V0IGluIEhMUyAoY2FuIGFsc28gaWRlbnRpZnkgZGlzY29udGludWl0aWVzKVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcigndGltZXN0YW1wb2Zmc2V0Jyk7XG4gICAgICB9XG5cbiAgICAgIHZhciB0aW1lbGluZU1hcHBpbmcgPSB0aGlzLnN5bmNDb250cm9sbGVyXy5tYXBwaW5nRm9yVGltZWxpbmUoc2VnbWVudEluZm8udGltZWxpbmUpO1xuXG4gICAgICBpZiAodGltZWxpbmVNYXBwaW5nICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcih7XG4gICAgICAgICAgdHlwZTogJ3NlZ21lbnR0aW1lbWFwcGluZycsXG4gICAgICAgICAgbWFwcGluZzogdGltZWxpbmVNYXBwaW5nXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YXRlID0gJ0FQUEVORElORyc7IC8vIGlmIHRoZSBtZWRpYSBpbml0aWFsaXphdGlvbiBzZWdtZW50IGlzIGNoYW5naW5nLCBhcHBlbmQgaXRcbiAgICAgIC8vIGJlZm9yZSB0aGUgY29udGVudCBzZWdtZW50XG5cbiAgICAgIGlmIChzZWdtZW50Lm1hcCkge1xuICAgICAgICB2YXIgaW5pdElkID0gaW5pdFNlZ21lbnRJZChzZWdtZW50Lm1hcCk7XG5cbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZUluaXRTZWdtZW50SWRfIHx8IHRoaXMuYWN0aXZlSW5pdFNlZ21lbnRJZF8gIT09IGluaXRJZCkge1xuICAgICAgICAgIHZhciBpbml0U2VnbWVudCA9IHRoaXMuaW5pdFNlZ21lbnQoc2VnbWVudC5tYXApO1xuICAgICAgICAgIHRoaXMuc291cmNlVXBkYXRlcl8uYXBwZW5kQnVmZmVyKHtcbiAgICAgICAgICAgIGJ5dGVzOiBpbml0U2VnbWVudC5ieXRlc1xuICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzMy5hY3RpdmVJbml0U2VnbWVudElkXyA9IGluaXRJZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzZWdtZW50SW5mby5ieXRlTGVuZ3RoID0gc2VnbWVudEluZm8uYnl0ZXMuYnl0ZUxlbmd0aDtcblxuICAgICAgaWYgKHR5cGVvZiBzZWdtZW50LnN0YXJ0ID09PSAnbnVtYmVyJyAmJiB0eXBlb2Ygc2VnbWVudC5lbmQgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHRoaXMubWVkaWFTZWNvbmRzTG9hZGVkICs9IHNlZ21lbnQuZW5kIC0gc2VnbWVudC5zdGFydDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubWVkaWFTZWNvbmRzTG9hZGVkICs9IHNlZ21lbnQuZHVyYXRpb247XG4gICAgICB9XG5cbiAgICAgIHRoaXMubG9nZ2VyXyhzZWdtZW50SW5mb1N0cmluZyhzZWdtZW50SW5mbykpO1xuICAgICAgdGhpcy5zb3VyY2VVcGRhdGVyXy5hcHBlbmRCdWZmZXIoe1xuICAgICAgICBieXRlczogc2VnbWVudEluZm8uYnl0ZXMsXG4gICAgICAgIHZpZGVvU2VnbWVudFRpbWluZ0luZm9DYWxsYmFjazogdGhpcy5oYW5kbGVWaWRlb1NlZ21lbnRUaW1pbmdJbmZvXy5iaW5kKHRoaXMsIHNlZ21lbnRJbmZvLnJlcXVlc3RJZClcbiAgICAgIH0sIHRoaXMuaGFuZGxlVXBkYXRlRW5kXy5iaW5kKHRoaXMpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdoYW5kbGVWaWRlb1NlZ21lbnRUaW1pbmdJbmZvXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVZpZGVvU2VnbWVudFRpbWluZ0luZm9fKHJlcXVlc3RJZCwgZXZlbnQpIHtcbiAgICAgIGlmICghdGhpcy5wZW5kaW5nU2VnbWVudF8gfHwgcmVxdWVzdElkICE9PSB0aGlzLnBlbmRpbmdTZWdtZW50Xy5yZXF1ZXN0SWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2VnbWVudCA9IHRoaXMucGVuZGluZ1NlZ21lbnRfLnNlZ21lbnQ7XG5cbiAgICAgIGlmICghc2VnbWVudC52aWRlb1RpbWluZ0luZm8pIHtcbiAgICAgICAgc2VnbWVudC52aWRlb1RpbWluZ0luZm8gPSB7fTtcbiAgICAgIH1cblxuICAgICAgc2VnbWVudC52aWRlb1RpbWluZ0luZm8udHJhbnNtdXhlclByZXBlbmRlZFNlY29uZHMgPSBldmVudC52aWRlb1NlZ21lbnRUaW1pbmdJbmZvLnByZXBlbmRlZENvbnRlbnREdXJhdGlvbiB8fCAwO1xuICAgICAgc2VnbWVudC52aWRlb1RpbWluZ0luZm8udHJhbnNtdXhlZFByZXNlbnRhdGlvblN0YXJ0ID0gZXZlbnQudmlkZW9TZWdtZW50VGltaW5nSW5mby5zdGFydC5wcmVzZW50YXRpb247XG4gICAgICBzZWdtZW50LnZpZGVvVGltaW5nSW5mby50cmFuc211eGVkUHJlc2VudGF0aW9uRW5kID0gZXZlbnQudmlkZW9TZWdtZW50VGltaW5nSW5mby5lbmQucHJlc2VudGF0aW9uOyAvLyBtYWlubHkgdXNlZCBhcyBhIHJlZmVyZW5jZSBmb3IgZGVidWdnaW5nXG5cbiAgICAgIHNlZ21lbnQudmlkZW9UaW1pbmdJbmZvLmJhc2VNZWRpYURlY29kZVRpbWUgPSBldmVudC52aWRlb1NlZ21lbnRUaW1pbmdJbmZvLmJhc2VNZWRpYURlY29kZVRpbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGNhbGxiYWNrIHRvIHJ1biB3aGVuIGFwcGVuZEJ1ZmZlciBpcyBmaW5pc2hlZC4gZGV0ZWN0cyBpZiB3ZSBhcmVcbiAgICAgKiBpbiBhIGdvb2Qgc3RhdGUgdG8gZG8gdGhpbmdzIHdpdGggdGhlIGRhdGEgd2UgZ290LCBvciBpZiB3ZSBuZWVkXG4gICAgICogdG8gd2FpdCBmb3IgbW9yZVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnaGFuZGxlVXBkYXRlRW5kXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVVwZGF0ZUVuZF8oKSB7XG4gICAgICBpZiAoIXRoaXMucGVuZGluZ1NlZ21lbnRfKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAnUkVBRFknO1xuXG4gICAgICAgIGlmICghdGhpcy5wYXVzZWQoKSkge1xuICAgICAgICAgIHRoaXMubW9uaXRvckJ1ZmZlcl8oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlZ21lbnRJbmZvID0gdGhpcy5wZW5kaW5nU2VnbWVudF87XG4gICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRJbmZvLnNlZ21lbnQ7XG4gICAgICB2YXIgaXNXYWxraW5nRm9yd2FyZCA9IHRoaXMubWVkaWFJbmRleCAhPT0gbnVsbDtcbiAgICAgIHRoaXMucGVuZGluZ1NlZ21lbnRfID0gbnVsbDtcbiAgICAgIHRoaXMucmVjb3JkVGhyb3VnaHB1dF8oc2VnbWVudEluZm8pO1xuICAgICAgdGhpcy5hZGRTZWdtZW50TWV0YWRhdGFDdWVfKHNlZ21lbnRJbmZvKTtcbiAgICAgIHRoaXMuc3RhdGUgPSAnUkVBRFknO1xuICAgICAgdGhpcy5tZWRpYUluZGV4ID0gc2VnbWVudEluZm8ubWVkaWFJbmRleDtcbiAgICAgIHRoaXMuZmV0Y2hBdEJ1ZmZlcl8gPSB0cnVlO1xuICAgICAgdGhpcy5jdXJyZW50VGltZWxpbmVfID0gc2VnbWVudEluZm8udGltZWxpbmU7IC8vIFdlIG11c3QgdXBkYXRlIHRoZSBzeW5jaW5mbyB0byByZWNhbGN1bGF0ZSB0aGUgc2Vla2FibGUgcmFuZ2UgYmVmb3JlXG4gICAgICAvLyB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbmFsIG90aGVyd2lzZSBpdCBtYXkgY29uc2lkZXIgdGhpcyBhIGJhZCBcImd1ZXNzXCJcbiAgICAgIC8vIGFuZCBhdHRlbXB0IHRvIHJlc3luYyB3aGVuIHRoZSBwb3N0LXVwZGF0ZSBzZWVrYWJsZSB3aW5kb3cgYW5kIGxpdmVcbiAgICAgIC8vIHBvaW50IHdvdWxkIG1lYW4gdGhhdCB0aGlzIHdhcyB0aGUgcGVyZmVjdCBzZWdtZW50IHRvIGZldGNoXG5cbiAgICAgIHRoaXMudHJpZ2dlcignc3luY2luZm91cGRhdGUnKTsgLy8gSWYgd2UgcHJldmlvdXNseSBhcHBlbmRlZCBhIHNlZ21lbnQgdGhhdCBlbmRzIG1vcmUgdGhhbiAzIHRhcmdldER1cmF0aW9ucyBiZWZvcmVcbiAgICAgIC8vIHRoZSBjdXJyZW50VGltZV8gdGhhdCBtZWFucyB0aGF0IG91ciBjb25zZXJ2YXRpdmUgZ3Vlc3Mgd2FzIHRvbyBjb25zZXJ2YXRpdmUuXG4gICAgICAvLyBJbiB0aGF0IGNhc2UsIHJlc2V0IHRoZSBsb2FkZXIgc3RhdGUgc28gdGhhdCB3ZSB0cnkgdG8gdXNlIGFueSBpbmZvcm1hdGlvbiBnYWluZWRcbiAgICAgIC8vIGZyb20gdGhlIHByZXZpb3VzIHJlcXVlc3QgdG8gY3JlYXRlIGEgbmV3LCBtb3JlIGFjY3VyYXRlLCBzeW5jLXBvaW50LlxuXG4gICAgICBpZiAoc2VnbWVudC5lbmQgJiYgdGhpcy5jdXJyZW50VGltZV8oKSAtIHNlZ21lbnQuZW5kID4gc2VnbWVudEluZm8ucGxheWxpc3QudGFyZ2V0RHVyYXRpb24gKiAzKSB7XG4gICAgICAgIHRoaXMucmVzZXRFdmVyeXRoaW5nKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gRG9uJ3QgZG8gYSByZW5kaXRpb24gc3dpdGNoIHVubGVzcyB3ZSBoYXZlIGVub3VnaCB0aW1lIHRvIGdldCBhIHN5bmMgc2VnbWVudFxuICAgICAgLy8gYW5kIGNvbnNlcnZhdGl2ZWx5IGd1ZXNzXG5cblxuICAgICAgaWYgKGlzV2Fsa2luZ0ZvcndhcmQpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdiYW5kd2lkdGh1cGRhdGUnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy50cmlnZ2VyKCdwcm9ncmVzcycpOyAvLyBhbnkgdGltZSBhbiB1cGRhdGUgZmluaXNoZXMgYW5kIHRoZSBsYXN0IHNlZ21lbnQgaXMgaW4gdGhlXG4gICAgICAvLyBidWZmZXIsIGVuZCB0aGUgc3RyZWFtLiB0aGlzIGVuc3VyZXMgdGhlIFwiZW5kZWRcIiBldmVudCB3aWxsXG4gICAgICAvLyBmaXJlIGlmIHBsYXliYWNrIHJlYWNoZXMgdGhhdCBwb2ludC5cblxuICAgICAgaWYgKHRoaXMuaXNFbmRPZlN0cmVhbV8oc2VnbWVudEluZm8ubWVkaWFJbmRleCArIDEsIHNlZ21lbnRJbmZvLnBsYXlsaXN0KSkge1xuICAgICAgICB0aGlzLmVuZE9mU3RyZWFtKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5wYXVzZWQoKSkge1xuICAgICAgICB0aGlzLm1vbml0b3JCdWZmZXJfKCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY29yZHMgdGhlIGN1cnJlbnQgdGhyb3VnaHB1dCBvZiB0aGUgZGVjcnlwdCwgdHJhbnNtdXgsIGFuZCBhcHBlbmRcbiAgICAgKiBwb3J0aW9uIG9mIHRoZSBzZW1nbWVudCBwaXBlbGluZS4gYHRocm91Z2hwdXQucmF0ZWAgaXMgYSB0aGUgY3VtdWxhdGl2ZVxuICAgICAqIG1vdmluZyBhdmVyYWdlIG9mIHRoZSB0aHJvdWdocHV0LiBgdGhyb3VnaHB1dC5jb3VudGAgaXMgdGhlIG51bWJlciBvZlxuICAgICAqIGRhdGEgcG9pbnRzIGluIHRoZSBhdmVyYWdlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc2VnbWVudEluZm8gdGhlIG9iamVjdCByZXR1cm5lZCBieSBsb2FkU2VnbWVudFxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdyZWNvcmRUaHJvdWdocHV0XycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlY29yZFRocm91Z2hwdXRfKHNlZ21lbnRJbmZvKSB7XG4gICAgICB2YXIgcmF0ZSA9IHRoaXMudGhyb3VnaHB1dC5yYXRlOyAvLyBBZGQgb25lIHRvIHRoZSB0aW1lIHRvIGVuc3VyZSB0aGF0IHdlIGRvbid0IGFjY2lkZW50YWxseSBhdHRlbXB0IHRvIGRpdmlkZVxuICAgICAgLy8gYnkgemVybyBpbiB0aGUgY2FzZSB3aGVyZSB0aGUgdGhyb3VnaHB1dCBpcyByaWRpY3Vsb3VzbHkgaGlnaFxuXG4gICAgICB2YXIgc2VnbWVudFByb2Nlc3NpbmdUaW1lID0gRGF0ZS5ub3coKSAtIHNlZ21lbnRJbmZvLmVuZE9mQWxsUmVxdWVzdHMgKyAxOyAvLyBNdWx0aXBseSBieSA4MDAwIHRvIGNvbnZlcnQgZnJvbSBieXRlcy9taWxsaXNlY29uZCB0byBiaXRzL3NlY29uZFxuXG4gICAgICB2YXIgc2VnbWVudFByb2Nlc3NpbmdUaHJvdWdocHV0ID0gTWF0aC5mbG9vcihzZWdtZW50SW5mby5ieXRlTGVuZ3RoIC8gc2VnbWVudFByb2Nlc3NpbmdUaW1lICogOCAqIDEwMDApOyAvLyBUaGlzIGlzIGp1c3QgYSBjdW11bGF0aXZlIG1vdmluZyBhdmVyYWdlIGNhbGN1bGF0aW9uOlxuICAgICAgLy8gICBuZXdBdmcgPSBvbGRBdmcgKyAoc2FtcGxlIC0gb2xkQXZnKSAvIChzYW1wbGVDb3VudCArIDEpXG5cbiAgICAgIHRoaXMudGhyb3VnaHB1dC5yYXRlICs9IChzZWdtZW50UHJvY2Vzc2luZ1Rocm91Z2hwdXQgLSByYXRlKSAvICsrdGhpcy50aHJvdWdocHV0LmNvdW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgY3VlIHRvIHRoZSBzZWdtZW50LW1ldGFkYXRhIHRyYWNrIHdpdGggc29tZSBtZXRhZGF0YSBpbmZvcm1hdGlvbiBhYm91dCB0aGVcbiAgICAgKiBzZWdtZW50XG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzZWdtZW50SW5mb1xuICAgICAqICAgICAgICB0aGUgb2JqZWN0IHJldHVybmVkIGJ5IGxvYWRTZWdtZW50XG4gICAgICogQG1ldGhvZCBhZGRTZWdtZW50TWV0YWRhdGFDdWVfXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2FkZFNlZ21lbnRNZXRhZGF0YUN1ZV8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRTZWdtZW50TWV0YWRhdGFDdWVfKHNlZ21lbnRJbmZvKSB7XG4gICAgICBpZiAoIXRoaXMuc2VnbWVudE1ldGFkYXRhVHJhY2tfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50SW5mby5zZWdtZW50O1xuICAgICAgdmFyIHN0YXJ0ID0gc2VnbWVudC5zdGFydDtcbiAgICAgIHZhciBlbmQgPSBzZWdtZW50LmVuZDsgLy8gRG8gbm90IHRyeSBhZGRpbmcgdGhlIGN1ZSBpZiB0aGUgc3RhcnQgYW5kIGVuZCB0aW1lcyBhcmUgaW52YWxpZC5cblxuICAgICAgaWYgKCFmaW5pdGUoc3RhcnQpIHx8ICFmaW5pdGUoZW5kKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHJlbW92ZUN1ZXNGcm9tVHJhY2soc3RhcnQsIGVuZCwgdGhpcy5zZWdtZW50TWV0YWRhdGFUcmFja18pO1xuICAgICAgdmFyIEN1ZSA9IHdpbmRvdyQxLldlYktpdERhdGFDdWUgfHwgd2luZG93JDEuVlRUQ3VlO1xuICAgICAgdmFyIHZhbHVlID0ge1xuICAgICAgICBjdXN0b206IHNlZ21lbnQuY3VzdG9tLFxuICAgICAgICBkYXRlVGltZU9iamVjdDogc2VnbWVudC5kYXRlVGltZU9iamVjdCxcbiAgICAgICAgZGF0ZVRpbWVTdHJpbmc6IHNlZ21lbnQuZGF0ZVRpbWVTdHJpbmcsXG4gICAgICAgIGJhbmR3aWR0aDogc2VnbWVudEluZm8ucGxheWxpc3QuYXR0cmlidXRlcy5CQU5EV0lEVEgsXG4gICAgICAgIHJlc29sdXRpb246IHNlZ21lbnRJbmZvLnBsYXlsaXN0LmF0dHJpYnV0ZXMuUkVTT0xVVElPTixcbiAgICAgICAgY29kZWNzOiBzZWdtZW50SW5mby5wbGF5bGlzdC5hdHRyaWJ1dGVzLkNPREVDUyxcbiAgICAgICAgYnl0ZUxlbmd0aDogc2VnbWVudEluZm8uYnl0ZUxlbmd0aCxcbiAgICAgICAgdXJpOiBzZWdtZW50SW5mby51cmksXG4gICAgICAgIHRpbWVsaW5lOiBzZWdtZW50SW5mby50aW1lbGluZSxcbiAgICAgICAgcGxheWxpc3Q6IHNlZ21lbnRJbmZvLnBsYXlsaXN0LnVyaSxcbiAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICBlbmQ6IGVuZFxuICAgICAgfTtcbiAgICAgIHZhciBkYXRhID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgdmFyIGN1ZSA9IG5ldyBDdWUoc3RhcnQsIGVuZCwgZGF0YSk7IC8vIEF0dGFjaCB0aGUgbWV0YWRhdGEgdG8gdGhlIHZhbHVlIHByb3BlcnR5IG9mIHRoZSBjdWUgdG8ga2VlcCBjb25zaXN0ZW5jeSBiZXR3ZWVuXG4gICAgICAvLyB0aGUgZGlmZmVyZW5jZXMgb2YgV2ViS2l0RGF0YUN1ZSBpbiBzYWZhcmkgYW5kIFZUVEN1ZSBpbiBvdGhlciBicm93c2Vyc1xuXG4gICAgICBjdWUudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHRoaXMuc2VnbWVudE1ldGFkYXRhVHJhY2tfLmFkZEN1ZShjdWUpO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gU2VnbWVudExvYWRlcjtcbn0odmlkZW9qcyQxLkV2ZW50VGFyZ2V0KTtcblxudmFyIHVpbnQ4VG9VdGY4ID0gZnVuY3Rpb24gdWludDhUb1V0ZjgodWludEFycmF5KSB7XG4gIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgdWludEFycmF5KSkpO1xufTtcbi8qKlxuICogQGZpbGUgdnR0LXNlZ21lbnQtbG9hZGVyLmpzXG4gKi9cblxuXG52YXIgVlRUX0xJTkVfVEVSTUlOQVRPUlMgPSBuZXcgVWludDhBcnJheSgnXFxuXFxuJy5zcGxpdCgnJykubWFwKGZ1bmN0aW9uIChjaGFyKSB7XG4gIHJldHVybiBjaGFyLmNoYXJDb2RlQXQoMCk7XG59KSk7XG4vKipcbiAqIEFuIG9iamVjdCB0aGF0IG1hbmFnZXMgc2VnbWVudCBsb2FkaW5nIGFuZCBhcHBlbmRpbmcuXG4gKlxuICogQGNsYXNzIFZUVFNlZ21lbnRMb2FkZXJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHJlcXVpcmVkIGFuZCBvcHRpb25hbCBvcHRpb25zXG4gKiBAZXh0ZW5kcyB2aWRlb2pzLkV2ZW50VGFyZ2V0XG4gKi9cblxudmFyIFZUVFNlZ21lbnRMb2FkZXIgPSBmdW5jdGlvbiAoX1NlZ21lbnRMb2FkZXIpIHtcbiAgaW5oZXJpdHMoVlRUU2VnbWVudExvYWRlciwgX1NlZ21lbnRMb2FkZXIpO1xuXG4gIGZ1bmN0aW9uIFZUVFNlZ21lbnRMb2FkZXIoc2V0dGluZ3MpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgVlRUU2VnbWVudExvYWRlcik7IC8vIFNlZ21lbnRMb2FkZXIgcmVxdWlyZXMgYSBNZWRpYVNvdXJjZSBiZSBzcGVjaWZpZWQgb3IgaXQgd2lsbCB0aHJvdyBhbiBlcnJvcjtcbiAgICAvLyBob3dldmVyLCBWVFRTZWdtZW50TG9hZGVyIGhhcyBubyBuZWVkIG9mIGEgbWVkaWEgc291cmNlLCBzbyBkZWxldGUgdGhlIHJlZmVyZW5jZVxuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVlRUU2VnbWVudExvYWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFZUVFNlZ21lbnRMb2FkZXIpKS5jYWxsKHRoaXMsIHNldHRpbmdzLCBvcHRpb25zKSk7XG5cbiAgICBfdGhpcy5tZWRpYVNvdXJjZV8gPSBudWxsO1xuICAgIF90aGlzLnN1YnRpdGxlc1RyYWNrXyA9IG51bGw7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgd2hpY2ggdGltZSByYW5nZXMgYXJlIGJ1ZmZlcmVkXG4gICAqXG4gICAqIEByZXR1cm4ge1RpbWVSYW5nZX1cbiAgICogICAgICAgICBUaW1lUmFuZ2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBidWZmZXJlZCByYW5nZXNcbiAgICovXG5cblxuICBjcmVhdGVDbGFzcyhWVFRTZWdtZW50TG9hZGVyLCBbe1xuICAgIGtleTogJ2J1ZmZlcmVkXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGJ1ZmZlcmVkXygpIHtcbiAgICAgIGlmICghdGhpcy5zdWJ0aXRsZXNUcmFja18gfHwgIXRoaXMuc3VidGl0bGVzVHJhY2tfLmN1ZXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB2aWRlb2pzJDEuY3JlYXRlVGltZVJhbmdlcygpO1xuICAgICAgfVxuXG4gICAgICB2YXIgY3VlcyA9IHRoaXMuc3VidGl0bGVzVHJhY2tfLmN1ZXM7XG4gICAgICB2YXIgc3RhcnQgPSBjdWVzWzBdLnN0YXJ0VGltZTtcbiAgICAgIHZhciBlbmQgPSBjdWVzW2N1ZXMubGVuZ3RoIC0gMV0uc3RhcnRUaW1lO1xuICAgICAgcmV0dXJuIHZpZGVvanMkMS5jcmVhdGVUaW1lUmFuZ2VzKFtbc3RhcnQsIGVuZF1dKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBhbmQgc2V0cyBpbml0IHNlZ21lbnQgZm9yIHRoZSBwcm92aWRlZCBtYXBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBtYXBcbiAgICAgKiAgICAgICAgVGhlIG1hcCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBpbml0IHNlZ21lbnQgdG8gZ2V0IG9yIHNldFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbj19IHNldFxuICAgICAqICAgICAgICBJZiB0cnVlLCB0aGUgaW5pdCBzZWdtZW50IGZvciB0aGUgcHJvdmlkZWQgbWFwIHNob3VsZCBiZSBzYXZlZFxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKiAgICAgICAgIG1hcCBvYmplY3QgZm9yIGRlc2lyZWQgaW5pdCBzZWdtZW50XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2luaXRTZWdtZW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdFNlZ21lbnQobWFwKSB7XG4gICAgICB2YXIgc2V0JCQxID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTtcblxuICAgICAgaWYgKCFtYXApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciBpZCA9IGluaXRTZWdtZW50SWQobWFwKTtcbiAgICAgIHZhciBzdG9yZWRNYXAgPSB0aGlzLmluaXRTZWdtZW50c19baWRdO1xuXG4gICAgICBpZiAoc2V0JCQxICYmICFzdG9yZWRNYXAgJiYgbWFwLmJ5dGVzKSB7XG4gICAgICAgIC8vIGFwcGVuZCBXZWJWVFQgbGluZSB0ZXJtaW5hdG9ycyB0byB0aGUgbWVkaWEgaW5pdGlhbGl6YXRpb24gc2VnbWVudCBpZiBpdCBleGlzdHNcbiAgICAgICAgLy8gdG8gZm9sbG93IHRoZSBXZWJWVFQgc3BlYyAoaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYnZ0dC8jZmlsZS1zdHJ1Y3R1cmUpIHRoYXRcbiAgICAgICAgLy8gcmVxdWlyZXMgdHdvIG9yIG1vcmUgV2ViVlRUIGxpbmUgdGVybWluYXRvcnMgYmV0d2VlbiB0aGUgV2ViVlRUIGhlYWRlciBhbmQgdGhlXG4gICAgICAgIC8vIHJlc3Qgb2YgdGhlIGZpbGVcbiAgICAgICAgdmFyIGNvbWJpbmVkQnl0ZUxlbmd0aCA9IFZUVF9MSU5FX1RFUk1JTkFUT1JTLmJ5dGVMZW5ndGggKyBtYXAuYnl0ZXMuYnl0ZUxlbmd0aDtcbiAgICAgICAgdmFyIGNvbWJpbmVkU2VnbWVudCA9IG5ldyBVaW50OEFycmF5KGNvbWJpbmVkQnl0ZUxlbmd0aCk7XG4gICAgICAgIGNvbWJpbmVkU2VnbWVudC5zZXQobWFwLmJ5dGVzKTtcbiAgICAgICAgY29tYmluZWRTZWdtZW50LnNldChWVFRfTElORV9URVJNSU5BVE9SUywgbWFwLmJ5dGVzLmJ5dGVMZW5ndGgpO1xuICAgICAgICB0aGlzLmluaXRTZWdtZW50c19baWRdID0gc3RvcmVkTWFwID0ge1xuICAgICAgICAgIHJlc29sdmVkVXJpOiBtYXAucmVzb2x2ZWRVcmksXG4gICAgICAgICAgYnl0ZXJhbmdlOiBtYXAuYnl0ZXJhbmdlLFxuICAgICAgICAgIGJ5dGVzOiBjb21iaW5lZFNlZ21lbnRcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN0b3JlZE1hcCB8fCBtYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhbGwgY29uZmlndXJhdGlvbiByZXF1aXJlZCBmb3IgbG9hZGluZyBpcyBwcmVzZW50LCBvdGhlcndpc2UgZmFsc2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIHRoZSBhbGwgY29uZmlndXJhdGlvbiBpcyByZWFkeSBmb3IgbG9hZGluZ1xuICAgICAqIEBwcml2YXRlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2NvdWxkQmVnaW5Mb2FkaW5nXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvdWxkQmVnaW5Mb2FkaW5nXygpIHtcbiAgICAgIHJldHVybiB0aGlzLnBsYXlsaXN0XyAmJiB0aGlzLnN1YnRpdGxlc1RyYWNrXyAmJiAhdGhpcy5wYXVzZWQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT25jZSBhbGwgdGhlIHN0YXJ0aW5nIHBhcmFtZXRlcnMgaGF2ZSBiZWVuIHNwZWNpZmllZCwgYmVnaW5cbiAgICAgKiBvcGVyYXRpb24uIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGludm9rZWQgZnJvbSB0aGUgSU5JVFxuICAgICAqIHN0YXRlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnaW5pdF8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0XygpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSAnUkVBRFknO1xuICAgICAgdGhpcy5yZXNldEV2ZXJ5dGhpbmcoKTtcbiAgICAgIHJldHVybiB0aGlzLm1vbml0b3JCdWZmZXJfKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBhIHN1YnRpdGxlIHRyYWNrIG9uIHRoZSBzZWdtZW50IGxvYWRlciB0byBhZGQgc3VidGl0bGVzIHRvXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RleHRUcmFjaz19IHRyYWNrXG4gICAgICogICAgICAgIFRoZSB0ZXh0IHRyYWNrIHRvIGFkZCBsb2FkZWQgc3VidGl0bGVzIHRvXG4gICAgICogQHJldHVybiB7VGV4dFRyYWNrfVxuICAgICAqICAgICAgICBSZXR1cm5zIHRoZSBzdWJ0aXRsZXMgdHJhY2tcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAndHJhY2snLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0cmFjayhfdHJhY2spIHtcbiAgICAgIGlmICh0eXBlb2YgX3RyYWNrID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJ0aXRsZXNUcmFja187XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3VidGl0bGVzVHJhY2tfID0gX3RyYWNrOyAvLyBpZiB3ZSB3ZXJlIHVucGF1c2VkIGJ1dCB3YWl0aW5nIGZvciBhIHNvdXJjZVVwZGF0ZXIsIHN0YXJ0XG4gICAgICAvLyBidWZmZXJpbmcgbm93XG5cbiAgICAgIGlmICh0aGlzLnN0YXRlID09PSAnSU5JVCcgJiYgdGhpcy5jb3VsZEJlZ2luTG9hZGluZ18oKSkge1xuICAgICAgICB0aGlzLmluaXRfKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnN1YnRpdGxlc1RyYWNrXztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFueSBkYXRhIGluIHRoZSBzb3VyY2UgYnVmZmVyIGJldHdlZW4gc3RhcnQgYW5kIGVuZCB0aW1lc1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGFydCAtIHRoZSBzdGFydCB0aW1lIG9mIHRoZSByZWdpb24gdG8gcmVtb3ZlIGZyb20gdGhlIGJ1ZmZlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBlbmQgLSB0aGUgZW5kIHRpbWUgb2YgdGhlIHJlZ2lvbiB0byByZW1vdmUgZnJvbSB0aGUgYnVmZmVyXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3JlbW92ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZShzdGFydCwgZW5kKSB7XG4gICAgICByZW1vdmVDdWVzRnJvbVRyYWNrKHN0YXJ0LCBlbmQsIHRoaXMuc3VidGl0bGVzVHJhY2tfKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogZmlsbCB0aGUgYnVmZmVyIHdpdGggc2VnZW1lbnRzIHVubGVzcyB0aGUgc291cmNlQnVmZmVycyBhcmVcbiAgICAgKiBjdXJyZW50bHkgdXBkYXRpbmdcbiAgICAgKlxuICAgICAqIE5vdGU6IHRoaXMgZnVuY3Rpb24gc2hvdWxkIG9ubHkgZXZlciBiZSBjYWxsZWQgYnkgbW9uaXRvckJ1ZmZlcl9cbiAgICAgKiBhbmQgbmV2ZXIgZGlyZWN0bHlcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2ZpbGxCdWZmZXJfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmlsbEJ1ZmZlcl8oKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKCF0aGlzLnN5bmNQb2ludF8pIHtcbiAgICAgICAgdGhpcy5zeW5jUG9pbnRfID0gdGhpcy5zeW5jQ29udHJvbGxlcl8uZ2V0U3luY1BvaW50KHRoaXMucGxheWxpc3RfLCB0aGlzLmR1cmF0aW9uXygpLCB0aGlzLmN1cnJlbnRUaW1lbGluZV8sIHRoaXMuY3VycmVudFRpbWVfKCkpO1xuICAgICAgfSAvLyBzZWUgaWYgd2UgbmVlZCB0byBiZWdpbiBsb2FkaW5nIGltbWVkaWF0ZWx5XG5cblxuICAgICAgdmFyIHNlZ21lbnRJbmZvID0gdGhpcy5jaGVja0J1ZmZlcl8odGhpcy5idWZmZXJlZF8oKSwgdGhpcy5wbGF5bGlzdF8sIHRoaXMubWVkaWFJbmRleCwgdGhpcy5oYXNQbGF5ZWRfKCksIHRoaXMuY3VycmVudFRpbWVfKCksIHRoaXMuc3luY1BvaW50Xyk7XG4gICAgICBzZWdtZW50SW5mbyA9IHRoaXMuc2tpcEVtcHR5U2VnbWVudHNfKHNlZ21lbnRJbmZvKTtcblxuICAgICAgaWYgKCFzZWdtZW50SW5mbykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnN5bmNDb250cm9sbGVyXy50aW1lc3RhbXBPZmZzZXRGb3JUaW1lbGluZShzZWdtZW50SW5mby50aW1lbGluZSkgPT09IG51bGwpIHtcbiAgICAgICAgLy8gV2UgZG9uJ3QgaGF2ZSB0aGUgdGltZXN0YW1wIG9mZnNldCB0aGF0IHdlIG5lZWQgdG8gc3luYyBzdWJ0aXRsZXMuXG4gICAgICAgIC8vIFJlcnVuIG9uIGEgdGltZXN0YW1wIG9mZnNldCBvciB1c2VyIGludGVyYWN0aW9uLlxuICAgICAgICB2YXIgY2hlY2tUaW1lc3RhbXBPZmZzZXQgPSBmdW5jdGlvbiBjaGVja1RpbWVzdGFtcE9mZnNldCgpIHtcbiAgICAgICAgICBfdGhpczIuc3RhdGUgPSAnUkVBRFknO1xuXG4gICAgICAgICAgaWYgKCFfdGhpczIucGF1c2VkKCkpIHtcbiAgICAgICAgICAgIC8vIGlmIG5vdCBwYXVzZWQsIHF1ZXVlIGEgYnVmZmVyIGNoZWNrIGFzIHNvb24gYXMgcG9zc2libGVcbiAgICAgICAgICAgIF90aGlzMi5tb25pdG9yQnVmZmVyXygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnN5bmNDb250cm9sbGVyXy5vbmUoJ3RpbWVzdGFtcG9mZnNldCcsIGNoZWNrVGltZXN0YW1wT2Zmc2V0KTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9ICdXQUlUSU5HX09OX1RJTUVMSU5FJztcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmxvYWRTZWdtZW50XyhzZWdtZW50SW5mbyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByZXZlbnRzIHRoZSBzZWdtZW50IGxvYWRlciBmcm9tIHJlcXVlc3Rpbmcgc2VnbWVudHMgd2Uga25vdyBjb250YWluIG5vIHN1YnRpdGxlc1xuICAgICAqIGJ5IHdhbGtpbmcgZm9yd2FyZCB1bnRpbCB3ZSBmaW5kIHRoZSBuZXh0IHNlZ21lbnQgdGhhdCB3ZSBkb24ndCBrbm93IHdoZXRoZXIgaXQgaXNcbiAgICAgKiBlbXB0eSBvciBub3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc2VnbWVudEluZm9cbiAgICAgKiAgICAgICAgYSBzZWdtZW50IGluZm8gb2JqZWN0IHRoYXQgZGVzY3JpYmVzIHRoZSBjdXJyZW50IHNlZ21lbnRcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogICAgICAgICBhIHNlZ21lbnQgaW5mbyBvYmplY3QgdGhhdCBkZXNjcmliZXMgdGhlIGN1cnJlbnQgc2VnbWVudFxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdza2lwRW1wdHlTZWdtZW50c18nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBza2lwRW1wdHlTZWdtZW50c18oc2VnbWVudEluZm8pIHtcbiAgICAgIHdoaWxlIChzZWdtZW50SW5mbyAmJiBzZWdtZW50SW5mby5zZWdtZW50LmVtcHR5KSB7XG4gICAgICAgIHNlZ21lbnRJbmZvID0gdGhpcy5nZW5lcmF0ZVNlZ21lbnRJbmZvXyhzZWdtZW50SW5mby5wbGF5bGlzdCwgc2VnbWVudEluZm8ubWVkaWFJbmRleCArIDEsIHNlZ21lbnRJbmZvLnN0YXJ0T2ZTZWdtZW50ICsgc2VnbWVudEluZm8uZHVyYXRpb24sIHNlZ21lbnRJbmZvLmlzU3luY1JlcXVlc3QpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VnbWVudEluZm87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGFwcGVuZCBhIGRlY3J5cHRlZCBzZWdlbWVudCB0byB0aGUgU291cmNlQnVmZmVyIHRocm91Z2ggYSBTb3VyY2VVcGRhdGVyXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdoYW5kbGVTZWdtZW50XycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVNlZ21lbnRfKCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIGlmICghdGhpcy5wZW5kaW5nU2VnbWVudF8gfHwgIXRoaXMuc3VidGl0bGVzVHJhY2tfKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAnUkVBRFknO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3RhdGUgPSAnQVBQRU5ESU5HJztcbiAgICAgIHZhciBzZWdtZW50SW5mbyA9IHRoaXMucGVuZGluZ1NlZ21lbnRfO1xuICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50SW5mby5zZWdtZW50OyAvLyBNYWtlIHN1cmUgdGhhdCB2dHRqcyBoYXMgbG9hZGVkLCBvdGhlcndpc2UsIHdhaXQgdGlsbCBpdCBmaW5pc2hlZCBsb2FkaW5nXG5cbiAgICAgIGlmICh0eXBlb2Ygd2luZG93JDEuV2ViVlRUICE9PSAnZnVuY3Rpb24nICYmIHRoaXMuc3VidGl0bGVzVHJhY2tfICYmIHRoaXMuc3VidGl0bGVzVHJhY2tfLnRlY2hfKSB7XG4gICAgICAgIHZhciBsb2FkSGFuZGxlciA9IGZ1bmN0aW9uIGxvYWRIYW5kbGVyKCkge1xuICAgICAgICAgIF90aGlzMy5oYW5kbGVTZWdtZW50XygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSAnV0FJVElOR19PTl9WVFRKUyc7XG4gICAgICAgIHRoaXMuc3VidGl0bGVzVHJhY2tfLnRlY2hfLm9uZSgndnR0anNsb2FkZWQnLCBsb2FkSGFuZGxlcik7XG4gICAgICAgIHRoaXMuc3VidGl0bGVzVHJhY2tfLnRlY2hfLm9uZSgndnR0anNlcnJvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczMuc3VidGl0bGVzVHJhY2tfLnRlY2hfLm9mZigndnR0anNsb2FkZWQnLCBsb2FkSGFuZGxlcik7XG5cbiAgICAgICAgICBfdGhpczMuZXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIGxvYWRpbmcgdnR0LmpzJ1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgX3RoaXMzLnN0YXRlID0gJ1JFQURZJztcblxuICAgICAgICAgIF90aGlzMy5wYXVzZSgpO1xuXG4gICAgICAgICAgX3RoaXMzLnRyaWdnZXIoJ2Vycm9yJyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlZ21lbnQucmVxdWVzdGVkID0gdHJ1ZTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5wYXJzZVZUVEN1ZXNfKHNlZ21lbnRJbmZvKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhpcy5lcnJvcih7XG4gICAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0YXRlID0gJ1JFQURZJztcbiAgICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy50cmlnZ2VyKCdlcnJvcicpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnVwZGF0ZVRpbWVNYXBwaW5nXyhzZWdtZW50SW5mbywgdGhpcy5zeW5jQ29udHJvbGxlcl8udGltZWxpbmVzW3NlZ21lbnRJbmZvLnRpbWVsaW5lXSwgdGhpcy5wbGF5bGlzdF8pO1xuXG4gICAgICBpZiAoc2VnbWVudEluZm8uaXNTeW5jUmVxdWVzdCkge1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ3N5bmNpbmZvdXBkYXRlJyk7XG4gICAgICAgIHRoaXMucGVuZGluZ1NlZ21lbnRfID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGF0ZSA9ICdSRUFEWSc7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2VnbWVudEluZm8uYnl0ZUxlbmd0aCA9IHNlZ21lbnRJbmZvLmJ5dGVzLmJ5dGVMZW5ndGg7XG4gICAgICB0aGlzLm1lZGlhU2Vjb25kc0xvYWRlZCArPSBzZWdtZW50LmR1cmF0aW9uO1xuXG4gICAgICBpZiAoc2VnbWVudEluZm8uY3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgLy8gcmVtb3ZlIGFueSBvdmVybGFwcGluZyBjdWVzIHRvIHByZXZlbnQgZG91YmxpbmdcbiAgICAgICAgdGhpcy5yZW1vdmUoc2VnbWVudEluZm8uY3Vlc1swXS5lbmRUaW1lLCBzZWdtZW50SW5mby5jdWVzW3NlZ21lbnRJbmZvLmN1ZXMubGVuZ3RoIC0gMV0uZW5kVGltZSk7XG4gICAgICB9XG5cbiAgICAgIHNlZ21lbnRJbmZvLmN1ZXMuZm9yRWFjaChmdW5jdGlvbiAoY3VlKSB7XG4gICAgICAgIF90aGlzMy5zdWJ0aXRsZXNUcmFja18uYWRkQ3VlKGN1ZSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuaGFuZGxlVXBkYXRlRW5kXygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVc2VzIHRoZSBXZWJWVFQgcGFyc2VyIHRvIHBhcnNlIHRoZSBzZWdtZW50IHJlc3BvbnNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc2VnbWVudEluZm9cbiAgICAgKiAgICAgICAgYSBzZWdtZW50IGluZm8gb2JqZWN0IHRoYXQgZGVzY3JpYmVzIHRoZSBjdXJyZW50IHNlZ21lbnRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZVZUVEN1ZXNfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2VWVFRDdWVzXyhzZWdtZW50SW5mbykge1xuICAgICAgdmFyIGRlY29kZXIgPSB2b2lkIDA7XG4gICAgICB2YXIgZGVjb2RlQnl0ZXNUb1N0cmluZyA9IGZhbHNlO1xuXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyQxLlRleHREZWNvZGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGRlY29kZXIgPSBuZXcgd2luZG93JDEuVGV4dERlY29kZXIoJ3V0ZjgnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlY29kZXIgPSB3aW5kb3ckMS5XZWJWVFQuU3RyaW5nRGVjb2RlcigpO1xuICAgICAgICBkZWNvZGVCeXRlc1RvU3RyaW5nID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHBhcnNlciA9IG5ldyB3aW5kb3ckMS5XZWJWVFQuUGFyc2VyKHdpbmRvdyQxLCB3aW5kb3ckMS52dHRqcywgZGVjb2Rlcik7XG4gICAgICBzZWdtZW50SW5mby5jdWVzID0gW107XG4gICAgICBzZWdtZW50SW5mby50aW1lc3RhbXBtYXAgPSB7XG4gICAgICAgIE1QRUdUUzogMCxcbiAgICAgICAgTE9DQUw6IDBcbiAgICAgIH07XG4gICAgICBwYXJzZXIub25jdWUgPSBzZWdtZW50SW5mby5jdWVzLnB1c2guYmluZChzZWdtZW50SW5mby5jdWVzKTtcblxuICAgICAgcGFyc2VyLm9udGltZXN0YW1wbWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICByZXR1cm4gc2VnbWVudEluZm8udGltZXN0YW1wbWFwID0gbWFwO1xuICAgICAgfTtcblxuICAgICAgcGFyc2VyLm9ucGFyc2luZ2Vycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHZpZGVvanMkMS5sb2cud2FybignRXJyb3IgZW5jb3VudGVyZWQgd2hlbiBwYXJzaW5nIGN1ZXM6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgIH07XG5cbiAgICAgIGlmIChzZWdtZW50SW5mby5zZWdtZW50Lm1hcCkge1xuICAgICAgICB2YXIgbWFwRGF0YSA9IHNlZ21lbnRJbmZvLnNlZ21lbnQubWFwLmJ5dGVzO1xuXG4gICAgICAgIGlmIChkZWNvZGVCeXRlc1RvU3RyaW5nKSB7XG4gICAgICAgICAgbWFwRGF0YSA9IHVpbnQ4VG9VdGY4KG1hcERhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyc2VyLnBhcnNlKG1hcERhdGEpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2VnbWVudERhdGEgPSBzZWdtZW50SW5mby5ieXRlcztcblxuICAgICAgaWYgKGRlY29kZUJ5dGVzVG9TdHJpbmcpIHtcbiAgICAgICAgc2VnbWVudERhdGEgPSB1aW50OFRvVXRmOChzZWdtZW50RGF0YSk7XG4gICAgICB9XG5cbiAgICAgIHBhcnNlci5wYXJzZShzZWdtZW50RGF0YSk7XG4gICAgICBwYXJzZXIuZmx1c2goKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgc3RhcnQgYW5kIGVuZCB0aW1lcyBvZiBhbnkgY3VlcyBwYXJzZWQgYnkgdGhlIFdlYlZUVCBwYXJzZXIgdXNpbmdcbiAgICAgKiB0aGUgaW5mb3JtYXRpb24gcGFyc2VkIGZyb20gdGhlIFgtVElNRVNUQU1QLU1BUCBoZWFkZXIgYW5kIGEgVFMgdG8gbWVkaWEgdGltZSBtYXBwaW5nXG4gICAgICogZnJvbSB0aGUgU3luY0NvbnRyb2xsZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzZWdtZW50SW5mb1xuICAgICAqICAgICAgICBhIHNlZ21lbnQgaW5mbyBvYmplY3QgdGhhdCBkZXNjcmliZXMgdGhlIGN1cnJlbnQgc2VnbWVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBtYXBwaW5nT2JqXG4gICAgICogICAgICAgIG9iamVjdCBjb250YWluaW5nIGEgbWFwcGluZyBmcm9tIFRTIHRvIG1lZGlhIHRpbWVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGxheWxpc3RcbiAgICAgKiAgICAgICAgdGhlIHBsYXlsaXN0IG9iamVjdCBjb250YWluaW5nIHRoZSBzZWdtZW50XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAndXBkYXRlVGltZU1hcHBpbmdfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlVGltZU1hcHBpbmdfKHNlZ21lbnRJbmZvLCBtYXBwaW5nT2JqLCBwbGF5bGlzdCkge1xuICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50SW5mby5zZWdtZW50O1xuXG4gICAgICBpZiAoIW1hcHBpbmdPYmopIHtcbiAgICAgICAgLy8gSWYgdGhlIHN5bmMgY29udHJvbGxlciBkb2VzIG5vdCBoYXZlIGEgbWFwcGluZyBvZiBUUyB0byBNZWRpYSBUaW1lIGZvciB0aGVcbiAgICAgICAgLy8gdGltZWxpbmUsIHRoZW4gd2UgZG9uJ3QgaGF2ZSBlbm91Z2ggaW5mb3JtYXRpb24gdG8gdXBkYXRlIHRoZSBjdWVcbiAgICAgICAgLy8gc3RhcnQvZW5kIHRpbWVzXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFzZWdtZW50SW5mby5jdWVzLmxlbmd0aCkge1xuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gY3Vlcywgd2UgYWxzbyBkbyBub3QgaGF2ZSBlbm91Z2ggaW5mb3JtYXRpb24gdG8gZmlndXJlIG91dFxuICAgICAgICAvLyBzZWdtZW50IHRpbWluZy4gTWFyayB0aGF0IHRoZSBzZWdtZW50IGNvbnRhaW5zIG5vIGN1ZXMgc28gd2UgZG9uJ3QgcmUtcmVxdWVzdFxuICAgICAgICAvLyBhbiBlbXB0eSBzZWdtZW50LlxuICAgICAgICBzZWdtZW50LmVtcHR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgdGltZXN0YW1wbWFwID0gc2VnbWVudEluZm8udGltZXN0YW1wbWFwO1xuICAgICAgdmFyIGRpZmYgPSB0aW1lc3RhbXBtYXAuTVBFR1RTIC8gOTAwMDAgLSB0aW1lc3RhbXBtYXAuTE9DQUwgKyBtYXBwaW5nT2JqLm1hcHBpbmc7XG4gICAgICBzZWdtZW50SW5mby5jdWVzLmZvckVhY2goZnVuY3Rpb24gKGN1ZSkge1xuICAgICAgICAvLyBGaXJzdCBjb252ZXJ0IGN1ZSB0aW1lIHRvIFRTIHRpbWUgdXNpbmcgdGhlIHRpbWVzdGFtcC1tYXAgcHJvdmlkZWQgd2l0aGluIHRoZSB2dHRcbiAgICAgICAgY3VlLnN0YXJ0VGltZSArPSBkaWZmO1xuICAgICAgICBjdWUuZW5kVGltZSArPSBkaWZmO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghcGxheWxpc3Quc3luY0luZm8pIHtcbiAgICAgICAgdmFyIGZpcnN0U3RhcnQgPSBzZWdtZW50SW5mby5jdWVzWzBdLnN0YXJ0VGltZTtcbiAgICAgICAgdmFyIGxhc3RTdGFydCA9IHNlZ21lbnRJbmZvLmN1ZXNbc2VnbWVudEluZm8uY3Vlcy5sZW5ndGggLSAxXS5zdGFydFRpbWU7XG4gICAgICAgIHBsYXlsaXN0LnN5bmNJbmZvID0ge1xuICAgICAgICAgIG1lZGlhU2VxdWVuY2U6IHBsYXlsaXN0Lm1lZGlhU2VxdWVuY2UgKyBzZWdtZW50SW5mby5tZWRpYUluZGV4LFxuICAgICAgICAgIHRpbWU6IE1hdGgubWluKGZpcnN0U3RhcnQsIGxhc3RTdGFydCAtIHNlZ21lbnQuZHVyYXRpb24pXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBWVFRTZWdtZW50TG9hZGVyO1xufShTZWdtZW50TG9hZGVyKTtcbi8qKlxuICogQGZpbGUgYWQtY3VlLXRhZ3MuanNcbiAqL1xuXG4vKipcbiAqIFNlYXJjaGVzIGZvciBhbiBhZCBjdWUgdGhhdCBvdmVybGFwcyB3aXRoIHRoZSBnaXZlbiBtZWRpYVRpbWVcbiAqL1xuXG5cbnZhciBmaW5kQWRDdWUgPSBmdW5jdGlvbiBmaW5kQWRDdWUodHJhY2ssIG1lZGlhVGltZSkge1xuICB2YXIgY3VlcyA9IHRyYWNrLmN1ZXM7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGN1ZSA9IGN1ZXNbaV07XG5cbiAgICBpZiAobWVkaWFUaW1lID49IGN1ZS5hZFN0YXJ0VGltZSAmJiBtZWRpYVRpbWUgPD0gY3VlLmFkRW5kVGltZSkge1xuICAgICAgcmV0dXJuIGN1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG5cbnZhciB1cGRhdGVBZEN1ZXMgPSBmdW5jdGlvbiB1cGRhdGVBZEN1ZXMobWVkaWEsIHRyYWNrKSB7XG4gIHZhciBvZmZzZXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDA7XG5cbiAgaWYgKCFtZWRpYS5zZWdtZW50cykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBtZWRpYVRpbWUgPSBvZmZzZXQ7XG4gIHZhciBjdWUgPSB2b2lkIDA7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZWRpYS5zZWdtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzZWdtZW50ID0gbWVkaWEuc2VnbWVudHNbaV07XG5cbiAgICBpZiAoIWN1ZSkge1xuICAgICAgLy8gU2luY2UgdGhlIGN1ZXMgd2lsbCBzcGFuIGZvciBhdCBsZWFzdCB0aGUgc2VnbWVudCBkdXJhdGlvbiwgYWRkaW5nIGEgZnVkZ2VcbiAgICAgIC8vIGZhY3RvciBvZiBoYWxmIHNlZ21lbnQgZHVyYXRpb24gd2lsbCBwcmV2ZW50IGR1cGxpY2F0ZSBjdWVzIGZyb20gYmVpbmdcbiAgICAgIC8vIGNyZWF0ZWQgd2hlbiB0aW1pbmcgaW5mbyBpcyBub3QgZXhhY3QgKGUuZy4gY3VlIHN0YXJ0IHRpbWUgaW5pdGlhbGl6ZWRcbiAgICAgIC8vIGF0IDEwLjAwNjY3NywgYnV0IG5leHQgY2FsbCBtZWRpYVRpbWUgaXMgMTAuMDAzMzMyIClcbiAgICAgIGN1ZSA9IGZpbmRBZEN1ZSh0cmFjaywgbWVkaWFUaW1lICsgc2VnbWVudC5kdXJhdGlvbiAvIDIpO1xuICAgIH1cblxuICAgIGlmIChjdWUpIHtcbiAgICAgIGlmICgnY3VlSW4nIGluIHNlZ21lbnQpIHtcbiAgICAgICAgLy8gRm91bmQgYSBDVUUtSU4gc28gZW5kIHRoZSBjdWVcbiAgICAgICAgY3VlLmVuZFRpbWUgPSBtZWRpYVRpbWU7XG4gICAgICAgIGN1ZS5hZEVuZFRpbWUgPSBtZWRpYVRpbWU7XG4gICAgICAgIG1lZGlhVGltZSArPSBzZWdtZW50LmR1cmF0aW9uO1xuICAgICAgICBjdWUgPSBudWxsO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1lZGlhVGltZSA8IGN1ZS5lbmRUaW1lKSB7XG4gICAgICAgIC8vIEFscmVhZHkgcHJvY2Vzc2VkIHRoaXMgbWVkaWFUaW1lIGZvciB0aGlzIGN1ZVxuICAgICAgICBtZWRpYVRpbWUgKz0gc2VnbWVudC5kdXJhdGlvbjtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IC8vIG90aGVyd2lzZSBleHRlbmQgY3VlIHVudGlsIGEgQ1VFLUlOIGlzIGZvdW5kXG5cblxuICAgICAgY3VlLmVuZFRpbWUgKz0gc2VnbWVudC5kdXJhdGlvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCdjdWVPdXQnIGluIHNlZ21lbnQpIHtcbiAgICAgICAgY3VlID0gbmV3IHdpbmRvdyQxLlZUVEN1ZShtZWRpYVRpbWUsIG1lZGlhVGltZSArIHNlZ21lbnQuZHVyYXRpb24sIHNlZ21lbnQuY3VlT3V0KTtcbiAgICAgICAgY3VlLmFkU3RhcnRUaW1lID0gbWVkaWFUaW1lOyAvLyBBc3N1bWVzIHRhZyBmb3JtYXQgdG8gYmVcbiAgICAgICAgLy8gI0VYVC1YLUNVRS1PVVQ6MzBcblxuICAgICAgICBjdWUuYWRFbmRUaW1lID0gbWVkaWFUaW1lICsgcGFyc2VGbG9hdChzZWdtZW50LmN1ZU91dCk7XG4gICAgICAgIHRyYWNrLmFkZEN1ZShjdWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAoJ2N1ZU91dENvbnQnIGluIHNlZ21lbnQpIHtcbiAgICAgICAgLy8gRW50ZXJlZCBpbnRvIHRoZSBtaWRkbGUgb2YgYW4gYWQgY3VlXG4gICAgICAgIHZhciBhZE9mZnNldCA9IHZvaWQgMDtcbiAgICAgICAgdmFyIGFkVG90YWwgPSB2b2lkIDA7IC8vIEFzc3VtZXMgdGFnIGZvcm1hdGUgdG8gYmVcbiAgICAgICAgLy8gI0VYVC1YLUNVRS1PVVQtQ09OVDoxMC8zMFxuXG4gICAgICAgIHZhciBfc2VnbWVudCRjdWVPdXRDb250JHMgPSBzZWdtZW50LmN1ZU91dENvbnQuc3BsaXQoJy8nKS5tYXAocGFyc2VGbG9hdCk7XG5cbiAgICAgICAgdmFyIF9zZWdtZW50JGN1ZU91dENvbnQkczIgPSBzbGljZWRUb0FycmF5KF9zZWdtZW50JGN1ZU91dENvbnQkcywgMik7XG5cbiAgICAgICAgYWRPZmZzZXQgPSBfc2VnbWVudCRjdWVPdXRDb250JHMyWzBdO1xuICAgICAgICBhZFRvdGFsID0gX3NlZ21lbnQkY3VlT3V0Q29udCRzMlsxXTtcbiAgICAgICAgY3VlID0gbmV3IHdpbmRvdyQxLlZUVEN1ZShtZWRpYVRpbWUsIG1lZGlhVGltZSArIHNlZ21lbnQuZHVyYXRpb24sICcnKTtcbiAgICAgICAgY3VlLmFkU3RhcnRUaW1lID0gbWVkaWFUaW1lIC0gYWRPZmZzZXQ7XG4gICAgICAgIGN1ZS5hZEVuZFRpbWUgPSBjdWUuYWRTdGFydFRpbWUgKyBhZFRvdGFsO1xuICAgICAgICB0cmFjay5hZGRDdWUoY3VlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBtZWRpYVRpbWUgKz0gc2VnbWVudC5kdXJhdGlvbjtcbiAgfVxufTtcbi8qKlxuICogQGZpbGUgc3luYy1jb250cm9sbGVyLmpzXG4gKi9cblxuXG52YXIgdHNwcm9iZSA9IHRzSW5zcGVjdG9yLmluc3BlY3Q7XG52YXIgc3luY1BvaW50U3RyYXRlZ2llcyA9IFsvLyBTdGF0ZWd5IFwiVk9EXCI6IEhhbmRsZSB0aGUgVk9ELWNhc2Ugd2hlcmUgdGhlIHN5bmMtcG9pbnQgaXMgKmFsd2F5cypcbi8vICAgICAgICAgICAgICAgIHRoZSBlcXVpdmFsZW5jZSBkaXNwbGF5LXRpbWUgMCA9PT0gc2VnbWVudC1pbmRleCAwXG57XG4gIG5hbWU6ICdWT0QnLFxuICBydW46IGZ1bmN0aW9uIHJ1bihzeW5jQ29udHJvbGxlciwgcGxheWxpc3QsIGR1cmF0aW9uJCQxLCBjdXJyZW50VGltZWxpbmUsIGN1cnJlbnRUaW1lKSB7XG4gICAgaWYgKGR1cmF0aW9uJCQxICE9PSBJbmZpbml0eSkge1xuICAgICAgdmFyIHN5bmNQb2ludCA9IHtcbiAgICAgICAgdGltZTogMCxcbiAgICAgICAgc2VnbWVudEluZGV4OiAwXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHN5bmNQb2ludDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufSwgLy8gU3RhdGVneSBcIlByb2dyYW1EYXRlVGltZVwiOiBXZSBoYXZlIGEgcHJvZ3JhbS1kYXRlLXRpbWUgdGFnIGluIHRoaXMgcGxheWxpc3RcbntcbiAgbmFtZTogJ1Byb2dyYW1EYXRlVGltZScsXG4gIHJ1bjogZnVuY3Rpb24gcnVuKHN5bmNDb250cm9sbGVyLCBwbGF5bGlzdCwgZHVyYXRpb24kJDEsIGN1cnJlbnRUaW1lbGluZSwgY3VycmVudFRpbWUpIHtcbiAgICBpZiAoIXN5bmNDb250cm9sbGVyLmRhdGV0aW1lVG9EaXNwbGF5VGltZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIHNlZ21lbnRzID0gcGxheWxpc3Quc2VnbWVudHMgfHwgW107XG4gICAgdmFyIHN5bmNQb2ludCA9IG51bGw7XG4gICAgdmFyIGxhc3REaXN0YW5jZSA9IG51bGw7XG4gICAgY3VycmVudFRpbWUgPSBjdXJyZW50VGltZSB8fCAwO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tpXTtcblxuICAgICAgaWYgKHNlZ21lbnQuZGF0ZVRpbWVPYmplY3QpIHtcbiAgICAgICAgdmFyIHNlZ21lbnRUaW1lID0gc2VnbWVudC5kYXRlVGltZU9iamVjdC5nZXRUaW1lKCkgLyAxMDAwO1xuICAgICAgICB2YXIgc2VnbWVudFN0YXJ0ID0gc2VnbWVudFRpbWUgKyBzeW5jQ29udHJvbGxlci5kYXRldGltZVRvRGlzcGxheVRpbWU7XG4gICAgICAgIHZhciBkaXN0YW5jZSA9IE1hdGguYWJzKGN1cnJlbnRUaW1lIC0gc2VnbWVudFN0YXJ0KTsgLy8gT25jZSB0aGUgZGlzdGFuY2UgYmVnaW5zIHRvIGluY3JlYXNlLCB3ZSBoYXZlIHBhc3NlZFxuICAgICAgICAvLyBjdXJyZW50VGltZSBhbmQgY2FuIHN0b3AgbG9va2luZyBmb3IgYmV0dGVyIGNhbmRpZGF0ZXNcblxuICAgICAgICBpZiAobGFzdERpc3RhbmNlICE9PSBudWxsICYmIGxhc3REaXN0YW5jZSA8IGRpc3RhbmNlKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBsYXN0RGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgICAgc3luY1BvaW50ID0ge1xuICAgICAgICAgIHRpbWU6IHNlZ21lbnRTdGFydCxcbiAgICAgICAgICBzZWdtZW50SW5kZXg6IGlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3luY1BvaW50O1xuICB9XG59LCAvLyBTdGF0ZWd5IFwiU2VnbWVudFwiOiBXZSBoYXZlIGEga25vd24gdGltZSBtYXBwaW5nIGZvciBhIHRpbWVsaW5lIGFuZCBhXG4vLyAgICAgICAgICAgICAgICAgICAgc2VnbWVudCBpbiB0aGUgY3VycmVudCB0aW1lbGluZSB3aXRoIHRpbWluZyBkYXRhXG57XG4gIG5hbWU6ICdTZWdtZW50JyxcbiAgcnVuOiBmdW5jdGlvbiBydW4oc3luY0NvbnRyb2xsZXIsIHBsYXlsaXN0LCBkdXJhdGlvbiQkMSwgY3VycmVudFRpbWVsaW5lLCBjdXJyZW50VGltZSkge1xuICAgIHZhciBzZWdtZW50cyA9IHBsYXlsaXN0LnNlZ21lbnRzIHx8IFtdO1xuICAgIHZhciBzeW5jUG9pbnQgPSBudWxsO1xuICAgIHZhciBsYXN0RGlzdGFuY2UgPSBudWxsO1xuICAgIGN1cnJlbnRUaW1lID0gY3VycmVudFRpbWUgfHwgMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV07XG5cbiAgICAgIGlmIChzZWdtZW50LnRpbWVsaW5lID09PSBjdXJyZW50VGltZWxpbmUgJiYgdHlwZW9mIHNlZ21lbnQuc3RhcnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBkaXN0YW5jZSA9IE1hdGguYWJzKGN1cnJlbnRUaW1lIC0gc2VnbWVudC5zdGFydCk7IC8vIE9uY2UgdGhlIGRpc3RhbmNlIGJlZ2lucyB0byBpbmNyZWFzZSwgd2UgaGF2ZSBwYXNzZWRcbiAgICAgICAgLy8gY3VycmVudFRpbWUgYW5kIGNhbiBzdG9wIGxvb2tpbmcgZm9yIGJldHRlciBjYW5kaWRhdGVzXG5cbiAgICAgICAgaWYgKGxhc3REaXN0YW5jZSAhPT0gbnVsbCAmJiBsYXN0RGlzdGFuY2UgPCBkaXN0YW5jZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzeW5jUG9pbnQgfHwgbGFzdERpc3RhbmNlID09PSBudWxsIHx8IGxhc3REaXN0YW5jZSA+PSBkaXN0YW5jZSkge1xuICAgICAgICAgIGxhc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgICAgICAgIHN5bmNQb2ludCA9IHtcbiAgICAgICAgICAgIHRpbWU6IHNlZ21lbnQuc3RhcnQsXG4gICAgICAgICAgICBzZWdtZW50SW5kZXg6IGlcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHN5bmNQb2ludDtcbiAgfVxufSwgLy8gU3RhdGVneSBcIkRpc2NvbnRpbnVpdHlcIjogV2UgaGF2ZSBhIGRpc2NvbnRpbnVpdHkgd2l0aCBhIGtub3duXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheS10aW1lXG57XG4gIG5hbWU6ICdEaXNjb250aW51aXR5JyxcbiAgcnVuOiBmdW5jdGlvbiBydW4oc3luY0NvbnRyb2xsZXIsIHBsYXlsaXN0LCBkdXJhdGlvbiQkMSwgY3VycmVudFRpbWVsaW5lLCBjdXJyZW50VGltZSkge1xuICAgIHZhciBzeW5jUG9pbnQgPSBudWxsO1xuICAgIGN1cnJlbnRUaW1lID0gY3VycmVudFRpbWUgfHwgMDtcblxuICAgIGlmIChwbGF5bGlzdC5kaXNjb250aW51aXR5U3RhcnRzICYmIHBsYXlsaXN0LmRpc2NvbnRpbnVpdHlTdGFydHMubGVuZ3RoKSB7XG4gICAgICB2YXIgbGFzdERpc3RhbmNlID0gbnVsbDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbGF5bGlzdC5kaXNjb250aW51aXR5U3RhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzZWdtZW50SW5kZXggPSBwbGF5bGlzdC5kaXNjb250aW51aXR5U3RhcnRzW2ldO1xuICAgICAgICB2YXIgZGlzY29udGludWl0eSA9IHBsYXlsaXN0LmRpc2NvbnRpbnVpdHlTZXF1ZW5jZSArIGkgKyAxO1xuICAgICAgICB2YXIgZGlzY29udGludWl0eVN5bmMgPSBzeW5jQ29udHJvbGxlci5kaXNjb250aW51aXRpZXNbZGlzY29udGludWl0eV07XG5cbiAgICAgICAgaWYgKGRpc2NvbnRpbnVpdHlTeW5jKSB7XG4gICAgICAgICAgdmFyIGRpc3RhbmNlID0gTWF0aC5hYnMoY3VycmVudFRpbWUgLSBkaXNjb250aW51aXR5U3luYy50aW1lKTsgLy8gT25jZSB0aGUgZGlzdGFuY2UgYmVnaW5zIHRvIGluY3JlYXNlLCB3ZSBoYXZlIHBhc3NlZFxuICAgICAgICAgIC8vIGN1cnJlbnRUaW1lIGFuZCBjYW4gc3RvcCBsb29raW5nIGZvciBiZXR0ZXIgY2FuZGlkYXRlc1xuXG4gICAgICAgICAgaWYgKGxhc3REaXN0YW5jZSAhPT0gbnVsbCAmJiBsYXN0RGlzdGFuY2UgPCBkaXN0YW5jZSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFzeW5jUG9pbnQgfHwgbGFzdERpc3RhbmNlID09PSBudWxsIHx8IGxhc3REaXN0YW5jZSA+PSBkaXN0YW5jZSkge1xuICAgICAgICAgICAgbGFzdERpc3RhbmNlID0gZGlzdGFuY2U7XG4gICAgICAgICAgICBzeW5jUG9pbnQgPSB7XG4gICAgICAgICAgICAgIHRpbWU6IGRpc2NvbnRpbnVpdHlTeW5jLnRpbWUsXG4gICAgICAgICAgICAgIHNlZ21lbnRJbmRleDogc2VnbWVudEluZGV4XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzeW5jUG9pbnQ7XG4gIH1cbn0sIC8vIFN0YXRlZ3kgXCJQbGF5bGlzdFwiOiBXZSBoYXZlIGEgcGxheWxpc3Qgd2l0aCBhIGtub3duIG1hcHBpbmcgb2Zcbi8vICAgICAgICAgICAgICAgICAgICAgc2VnbWVudCBpbmRleCB0byBkaXNwbGF5IHRpbWVcbntcbiAgbmFtZTogJ1BsYXlsaXN0JyxcbiAgcnVuOiBmdW5jdGlvbiBydW4oc3luY0NvbnRyb2xsZXIsIHBsYXlsaXN0LCBkdXJhdGlvbiQkMSwgY3VycmVudFRpbWVsaW5lLCBjdXJyZW50VGltZSkge1xuICAgIGlmIChwbGF5bGlzdC5zeW5jSW5mbykge1xuICAgICAgdmFyIHN5bmNQb2ludCA9IHtcbiAgICAgICAgdGltZTogcGxheWxpc3Quc3luY0luZm8udGltZSxcbiAgICAgICAgc2VnbWVudEluZGV4OiBwbGF5bGlzdC5zeW5jSW5mby5tZWRpYVNlcXVlbmNlIC0gcGxheWxpc3QubWVkaWFTZXF1ZW5jZVxuICAgICAgfTtcbiAgICAgIHJldHVybiBzeW5jUG9pbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1dO1xuXG52YXIgU3luY0NvbnRyb2xsZXIgPSBmdW5jdGlvbiAoX3ZpZGVvanMkRXZlbnRUYXJnZXQpIHtcbiAgaW5oZXJpdHMoU3luY0NvbnRyb2xsZXIsIF92aWRlb2pzJEV2ZW50VGFyZ2V0KTtcblxuICBmdW5jdGlvbiBTeW5jQ29udHJvbGxlcigpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBTeW5jQ29udHJvbGxlcik7IC8vIFNlZ21lbnQgTG9hZGVyIHN0YXRlIHZhcmlhYmxlcy4uLlxuICAgIC8vIC4uLmZvciBzeW5jaGluZyBhY3Jvc3MgdmFyaWFudHNcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFN5bmNDb250cm9sbGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoU3luY0NvbnRyb2xsZXIpKS5jYWxsKHRoaXMpKTtcblxuICAgIF90aGlzLmluc3BlY3RDYWNoZV8gPSB1bmRlZmluZWQ7IC8vIC4uLmZvciBzeW5jaGluZyBhY3Jvc3MgdmFyaWFudHNcblxuICAgIF90aGlzLnRpbWVsaW5lcyA9IFtdO1xuICAgIF90aGlzLmRpc2NvbnRpbnVpdGllcyA9IFtdO1xuICAgIF90aGlzLmRhdGV0aW1lVG9EaXNwbGF5VGltZSA9IG51bGw7XG4gICAgX3RoaXMubG9nZ2VyXyA9IGxvZ2dlcignU3luY0NvbnRyb2xsZXInKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEZpbmQgYSBzeW5jLXBvaW50IGZvciB0aGUgcGxheWxpc3Qgc3BlY2lmaWVkXG4gICAqXG4gICAqIEEgc3luYy1wb2ludCBpcyBkZWZpbmVkIGFzIGEga25vd24gbWFwcGluZyBmcm9tIGRpc3BsYXktdGltZSB0b1xuICAgKiBhIHNlZ21lbnQtaW5kZXggaW4gdGhlIGN1cnJlbnQgcGxheWxpc3QuXG4gICAqXG4gICAqIEBwYXJhbSB7UGxheWxpc3R9IHBsYXlsaXN0XG4gICAqICAgICAgICBUaGUgcGxheWxpc3QgdGhhdCBuZWVkcyBhIHN5bmMtcG9pbnRcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR1cmF0aW9uXG4gICAqICAgICAgICBEdXJhdGlvbiBvZiB0aGUgTWVkaWFTb3VyY2UgKEluZmluaXRlIGlmIHBsYXlpbmcgYSBsaXZlIHNvdXJjZSlcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGN1cnJlbnRUaW1lbGluZVxuICAgKiAgICAgICAgVGhlIGxhc3QgdGltZWxpbmUgZnJvbSB3aGljaCBhIHNlZ21lbnQgd2FzIGxvYWRlZFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKiAgICAgICAgICBBIHN5bmMtcG9pbnQgb2JqZWN0XG4gICAqL1xuXG5cbiAgY3JlYXRlQ2xhc3MoU3luY0NvbnRyb2xsZXIsIFt7XG4gICAga2V5OiAnZ2V0U3luY1BvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3luY1BvaW50KHBsYXlsaXN0LCBkdXJhdGlvbiQkMSwgY3VycmVudFRpbWVsaW5lLCBjdXJyZW50VGltZSkge1xuICAgICAgdmFyIHN5bmNQb2ludHMgPSB0aGlzLnJ1blN0cmF0ZWdpZXNfKHBsYXlsaXN0LCBkdXJhdGlvbiQkMSwgY3VycmVudFRpbWVsaW5lLCBjdXJyZW50VGltZSk7XG5cbiAgICAgIGlmICghc3luY1BvaW50cy5sZW5ndGgpIHtcbiAgICAgICAgLy8gU2lnbmFsIHRoYXQgd2UgbmVlZCB0byBhdHRlbXB0IHRvIGdldCBhIHN5bmMtcG9pbnQgbWFudWFsbHlcbiAgICAgICAgLy8gYnkgZmV0Y2hpbmcgYSBzZWdtZW50IGluIHRoZSBwbGF5bGlzdCBhbmQgY29uc3RydWN0aW5nXG4gICAgICAgIC8vIGEgc3luYy1wb2ludCBmcm9tIHRoYXQgaW5mb3JtYXRpb25cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9IC8vIE5vdyBmaW5kIHRoZSBzeW5jLXBvaW50IHRoYXQgaXMgY2xvc2VzdCB0byB0aGUgY3VycmVudFRpbWUgYmVjYXVzZVxuICAgICAgLy8gdGhhdCBzaG91bGQgcmVzdWx0IGluIHRoZSBtb3N0IGFjY3VyYXRlIGd1ZXNzIGFib3V0IHdoaWNoIHNlZ21lbnRcbiAgICAgIC8vIHRvIGZldGNoXG5cblxuICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0U3luY1BvaW50XyhzeW5jUG9pbnRzLCB7XG4gICAgICAgIGtleTogJ3RpbWUnLFxuICAgICAgICB2YWx1ZTogY3VycmVudFRpbWVcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIGFtb3VudCBvZiB0aW1lIHRoYXQgaGFzIGV4cGlyZWQgb2ZmIHRoZSBwbGF5bGlzdCBkdXJpbmcgcGxheWJhY2tcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UGxheWxpc3R9IHBsYXlsaXN0XG4gICAgICogICAgICAgIFBsYXlsaXN0IG9iamVjdCB0byBjYWxjdWxhdGUgZXhwaXJlZCBmcm9tXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGR1cmF0aW9uXG4gICAgICogICAgICAgIER1cmF0aW9uIG9mIHRoZSBNZWRpYVNvdXJjZSAoSW5maW5pdHkgaWYgcGxheWxpbmcgYSBsaXZlIHNvdXJjZSlcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfG51bGx9XG4gICAgICogICAgICAgICAgVGhlIGFtb3VudCBvZiB0aW1lIHRoYXQgaGFzIGV4cGlyZWQgb2ZmIHRoZSBwbGF5bGlzdCBkdXJpbmcgcGxheWJhY2suIE51bGxcbiAgICAgKiAgICAgICAgICBpZiBubyBzeW5jLXBvaW50cyBmb3IgdGhlIHBsYXlsaXN0IGNhbiBiZSBmb3VuZC5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZ2V0RXhwaXJlZFRpbWUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRFeHBpcmVkVGltZShwbGF5bGlzdCwgZHVyYXRpb24kJDEpIHtcbiAgICAgIGlmICghcGxheWxpc3QgfHwgIXBsYXlsaXN0LnNlZ21lbnRzKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3luY1BvaW50cyA9IHRoaXMucnVuU3RyYXRlZ2llc18ocGxheWxpc3QsIGR1cmF0aW9uJCQxLCBwbGF5bGlzdC5kaXNjb250aW51aXR5U2VxdWVuY2UsIDApOyAvLyBXaXRob3V0IHN5bmMtcG9pbnRzLCB0aGVyZSBpcyBub3QgZW5vdWdoIGluZm9ybWF0aW9uIHRvIGRldGVybWluZSB0aGUgZXhwaXJlZCB0aW1lXG5cbiAgICAgIGlmICghc3luY1BvaW50cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciBzeW5jUG9pbnQgPSB0aGlzLnNlbGVjdFN5bmNQb2ludF8oc3luY1BvaW50cywge1xuICAgICAgICBrZXk6ICdzZWdtZW50SW5kZXgnLFxuICAgICAgICB2YWx1ZTogMFxuICAgICAgfSk7IC8vIElmIHRoZSBzeW5jLXBvaW50IGlzIGJleW9uZCB0aGUgc3RhcnQgb2YgdGhlIHBsYXlsaXN0LCB3ZSB3YW50IHRvIHN1YnRyYWN0IHRoZVxuICAgICAgLy8gZHVyYXRpb24gZnJvbSBpbmRleCAwIHRvIHN5bmNQb2ludC5zZWdtZW50SW5kZXggaW5zdGVhZCBvZiBhZGRpbmcuXG5cbiAgICAgIGlmIChzeW5jUG9pbnQuc2VnbWVudEluZGV4ID4gMCkge1xuICAgICAgICBzeW5jUG9pbnQudGltZSAqPSAtMTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIE1hdGguYWJzKHN5bmNQb2ludC50aW1lICsgc3VtRHVyYXRpb25zKHBsYXlsaXN0LCBzeW5jUG9pbnQuc2VnbWVudEluZGV4LCAwKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJ1bnMgZWFjaCBzeW5jLXBvaW50IHN0cmF0ZWd5IGFuZCByZXR1cm5zIGEgbGlzdCBvZiBzeW5jLXBvaW50cyByZXR1cm5lZCBieSB0aGVcbiAgICAgKiBzdHJhdGVnaWVzXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UGxheWxpc3R9IHBsYXlsaXN0XG4gICAgICogICAgICAgIFRoZSBwbGF5bGlzdCB0aGF0IG5lZWRzIGEgc3luYy1wb2ludFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkdXJhdGlvblxuICAgICAqICAgICAgICBEdXJhdGlvbiBvZiB0aGUgTWVkaWFTb3VyY2UgKEluZmluaXR5IGlmIHBsYXlpbmcgYSBsaXZlIHNvdXJjZSlcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY3VycmVudFRpbWVsaW5lXG4gICAgICogICAgICAgIFRoZSBsYXN0IHRpbWVsaW5lIGZyb20gd2hpY2ggYSBzZWdtZW50IHdhcyBsb2FkZWRcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG4gICAgICogICAgICAgICAgQSBsaXN0IG9mIHN5bmMtcG9pbnQgb2JqZWN0c1xuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdydW5TdHJhdGVnaWVzXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJ1blN0cmF0ZWdpZXNfKHBsYXlsaXN0LCBkdXJhdGlvbiQkMSwgY3VycmVudFRpbWVsaW5lLCBjdXJyZW50VGltZSkge1xuICAgICAgdmFyIHN5bmNQb2ludHMgPSBbXTsgLy8gVHJ5IHRvIGZpbmQgYSBzeW5jLXBvaW50IGluIGJ5IHV0aWxpemluZyB2YXJpb3VzIHN0cmF0ZWdpZXMuLi5cblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzeW5jUG9pbnRTdHJhdGVnaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzdHJhdGVneSA9IHN5bmNQb2ludFN0cmF0ZWdpZXNbaV07XG4gICAgICAgIHZhciBzeW5jUG9pbnQgPSBzdHJhdGVneS5ydW4odGhpcywgcGxheWxpc3QsIGR1cmF0aW9uJCQxLCBjdXJyZW50VGltZWxpbmUsIGN1cnJlbnRUaW1lKTtcblxuICAgICAgICBpZiAoc3luY1BvaW50KSB7XG4gICAgICAgICAgc3luY1BvaW50LnN0cmF0ZWd5ID0gc3RyYXRlZ3kubmFtZTtcbiAgICAgICAgICBzeW5jUG9pbnRzLnB1c2goe1xuICAgICAgICAgICAgc3RyYXRlZ3k6IHN0cmF0ZWd5Lm5hbWUsXG4gICAgICAgICAgICBzeW5jUG9pbnQ6IHN5bmNQb2ludFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzeW5jUG9pbnRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWxlY3RzIHRoZSBzeW5jLXBvaW50IG5lYXJlc3QgdGhlIHNwZWNpZmllZCB0YXJnZXRcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gc3luY1BvaW50c1xuICAgICAqICAgICAgICBMaXN0IG9mIHN5bmMtcG9pbnRzIHRvIHNlbGVjdCBmcm9tXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHRhcmdldFxuICAgICAqICAgICAgICBPYmplY3Qgc3BlY2lmeWluZyB0aGUgcHJvcGVydHkgYW5kIHZhbHVlIHdlIGFyZSB0YXJnZXRpbmdcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGFyZ2V0LmtleVxuICAgICAqICAgICAgICBTcGVjaWZpZXMgdGhlIHByb3BlcnR5IHRvIHRhcmdldC4gTXVzdCBiZSBlaXRoZXIgJ3RpbWUnIG9yICdzZWdtZW50SW5kZXgnXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRhcmdldC52YWx1ZVxuICAgICAqICAgICAgICBUaGUgdmFsdWUgdG8gdGFyZ2V0IGZvciB0aGUgc3BlY2lmaWVkIGtleS5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqICAgICAgICAgIFRoZSBzeW5jLXBvaW50IG5lYXJlc3QgdGhlIHRhcmdldFxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdzZWxlY3RTeW5jUG9pbnRfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0U3luY1BvaW50XyhzeW5jUG9pbnRzLCB0YXJnZXQpIHtcbiAgICAgIHZhciBiZXN0U3luY1BvaW50ID0gc3luY1BvaW50c1swXS5zeW5jUG9pbnQ7XG4gICAgICB2YXIgYmVzdERpc3RhbmNlID0gTWF0aC5hYnMoc3luY1BvaW50c1swXS5zeW5jUG9pbnRbdGFyZ2V0LmtleV0gLSB0YXJnZXQudmFsdWUpO1xuICAgICAgdmFyIGJlc3RTdHJhdGVneSA9IHN5bmNQb2ludHNbMF0uc3RyYXRlZ3k7XG5cbiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc3luY1BvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbmV3RGlzdGFuY2UgPSBNYXRoLmFicyhzeW5jUG9pbnRzW2ldLnN5bmNQb2ludFt0YXJnZXQua2V5XSAtIHRhcmdldC52YWx1ZSk7XG5cbiAgICAgICAgaWYgKG5ld0Rpc3RhbmNlIDwgYmVzdERpc3RhbmNlKSB7XG4gICAgICAgICAgYmVzdERpc3RhbmNlID0gbmV3RGlzdGFuY2U7XG4gICAgICAgICAgYmVzdFN5bmNQb2ludCA9IHN5bmNQb2ludHNbaV0uc3luY1BvaW50O1xuICAgICAgICAgIGJlc3RTdHJhdGVneSA9IHN5bmNQb2ludHNbaV0uc3RyYXRlZ3k7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5sb2dnZXJfKCdzeW5jUG9pbnQgZm9yIFsnICsgdGFyZ2V0LmtleSArICc6ICcgKyB0YXJnZXQudmFsdWUgKyAnXSBjaG9zZW4gd2l0aCBzdHJhdGVneScgKyAoJyBbJyArIGJlc3RTdHJhdGVneSArICddOiBbdGltZTonICsgYmVzdFN5bmNQb2ludC50aW1lICsgJywnKSArICgnIHNlZ21lbnRJbmRleDonICsgYmVzdFN5bmNQb2ludC5zZWdtZW50SW5kZXggKyAnXScpKTtcbiAgICAgIHJldHVybiBiZXN0U3luY1BvaW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTYXZlIGFueSBtZXRhLWRhdGEgcHJlc2VudCBvbiB0aGUgc2VnbWVudHMgd2hlbiBzZWdtZW50cyBsZWF2ZVxuICAgICAqIHRoZSBsaXZlIHdpbmRvdyB0byB0aGUgcGxheWxpc3QgdG8gYWxsb3cgZm9yIHN5bmNocm9uaXphdGlvbiBhdCB0aGVcbiAgICAgKiBwbGF5bGlzdCBsZXZlbCBsYXRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UGxheWxpc3R9IG9sZFBsYXlsaXN0IC0gVGhlIHByZXZpb3VzIGFjdGl2ZSBwbGF5bGlzdFxuICAgICAqIEBwYXJhbSB7UGxheWxpc3R9IG5ld1BsYXlsaXN0IC0gVGhlIHVwZGF0ZWQgYW5kIG1vc3QgY3VycmVudCBwbGF5bGlzdFxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdzYXZlRXhwaXJlZFNlZ21lbnRJbmZvJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZUV4cGlyZWRTZWdtZW50SW5mbyhvbGRQbGF5bGlzdCwgbmV3UGxheWxpc3QpIHtcbiAgICAgIHZhciBtZWRpYVNlcXVlbmNlRGlmZiA9IG5ld1BsYXlsaXN0Lm1lZGlhU2VxdWVuY2UgLSBvbGRQbGF5bGlzdC5tZWRpYVNlcXVlbmNlOyAvLyBXaGVuIGEgc2VnbWVudCBleHBpcmVzIGZyb20gdGhlIHBsYXlsaXN0IGFuZCBpdCBoYXMgYSBzdGFydCB0aW1lXG4gICAgICAvLyBzYXZlIHRoYXQgaW5mb3JtYXRpb24gYXMgYSBwb3NzaWJsZSBzeW5jLXBvaW50IHJlZmVyZW5jZSBpbiBmdXR1cmVcblxuICAgICAgZm9yICh2YXIgaSA9IG1lZGlhU2VxdWVuY2VEaWZmIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgdmFyIGxhc3RSZW1vdmVkU2VnbWVudCA9IG9sZFBsYXlsaXN0LnNlZ21lbnRzW2ldO1xuXG4gICAgICAgIGlmIChsYXN0UmVtb3ZlZFNlZ21lbnQgJiYgdHlwZW9mIGxhc3RSZW1vdmVkU2VnbWVudC5zdGFydCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBuZXdQbGF5bGlzdC5zeW5jSW5mbyA9IHtcbiAgICAgICAgICAgIG1lZGlhU2VxdWVuY2U6IG9sZFBsYXlsaXN0Lm1lZGlhU2VxdWVuY2UgKyBpLFxuICAgICAgICAgICAgdGltZTogbGFzdFJlbW92ZWRTZWdtZW50LnN0YXJ0XG4gICAgICAgICAgfTtcbiAgICAgICAgICB0aGlzLmxvZ2dlcl8oJ3BsYXlsaXN0IHJlZnJlc2ggc3luYzogW3RpbWU6JyArIG5ld1BsYXlsaXN0LnN5bmNJbmZvLnRpbWUgKyAnLCcgKyAoJyBtZWRpYVNlcXVlbmNlOiAnICsgbmV3UGxheWxpc3Quc3luY0luZm8ubWVkaWFTZXF1ZW5jZSArICddJykpO1xuICAgICAgICAgIHRoaXMudHJpZ2dlcignc3luY2luZm91cGRhdGUnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTYXZlIHRoZSBtYXBwaW5nIGZyb20gcGxheWxpc3QncyBQcm9ncmFtRGF0ZVRpbWUgdG8gZGlzcGxheS4gVGhpcyBzaG91bGRcbiAgICAgKiBvbmx5IGV2ZXIgaGFwcGVuIG9uY2UgYXQgdGhlIHN0YXJ0IG9mIHBsYXliYWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQbGF5bGlzdH0gcGxheWxpc3QgLSBUaGUgY3VycmVudGx5IGFjdGl2ZSBwbGF5bGlzdFxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdzZXREYXRlVGltZU1hcHBpbmcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXREYXRlVGltZU1hcHBpbmcocGxheWxpc3QpIHtcbiAgICAgIGlmICghdGhpcy5kYXRldGltZVRvRGlzcGxheVRpbWUgJiYgcGxheWxpc3Quc2VnbWVudHMgJiYgcGxheWxpc3Quc2VnbWVudHMubGVuZ3RoICYmIHBsYXlsaXN0LnNlZ21lbnRzWzBdLmRhdGVUaW1lT2JqZWN0KSB7XG4gICAgICAgIHZhciBwbGF5bGlzdFRpbWVzdGFtcCA9IHBsYXlsaXN0LnNlZ21lbnRzWzBdLmRhdGVUaW1lT2JqZWN0LmdldFRpbWUoKSAvIDEwMDA7XG4gICAgICAgIHRoaXMuZGF0ZXRpbWVUb0Rpc3BsYXlUaW1lID0gLXBsYXlsaXN0VGltZXN0YW1wO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgc3RhdGUgb2YgdGhlIGluc3BlY3Rpb24gY2FjaGUgd2hlbiB3ZSBkbyBhIHJlbmRpdGlvblxuICAgICAqIHN3aXRjaFxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdyZXNldCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgdGhpcy5pbnNwZWN0Q2FjaGVfID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9iZSBvciBpbnNwZWN0IGEgZm1wNCBvciBhbiBtcGVnMi10cyBzZWdtZW50IHRvIGRldGVybWluZSB0aGUgc3RhcnRcbiAgICAgKiBhbmQgZW5kIG9mIHRoZSBzZWdtZW50IGluIGl0J3MgaW50ZXJuYWwgXCJtZWRpYSB0aW1lXCIuIFVzZWQgdG8gZ2VuZXJhdGVcbiAgICAgKiBtYXBwaW5ncyBmcm9tIHRoYXQgaW50ZXJuYWwgXCJtZWRpYSB0aW1lXCIgdG8gdGhlIGRpc3BsYXkgdGltZSB0aGF0IGlzXG4gICAgICogc2hvd24gb24gdGhlIHBsYXllci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U2VnbWVudEluZm99IHNlZ21lbnRJbmZvIC0gVGhlIGN1cnJlbnQgYWN0aXZlIHJlcXVlc3QgaW5mb3JtYXRpb25cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAncHJvYmVTZWdtZW50SW5mbycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHByb2JlU2VnbWVudEluZm8oc2VnbWVudEluZm8pIHtcbiAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudEluZm8uc2VnbWVudDtcbiAgICAgIHZhciBwbGF5bGlzdCA9IHNlZ21lbnRJbmZvLnBsYXlsaXN0O1xuICAgICAgdmFyIHRpbWluZ0luZm8gPSB2b2lkIDA7XG5cbiAgICAgIGlmIChzZWdtZW50Lm1hcCkge1xuICAgICAgICB0aW1pbmdJbmZvID0gdGhpcy5wcm9iZU1wNFNlZ21lbnRfKHNlZ21lbnRJbmZvKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpbWluZ0luZm8gPSB0aGlzLnByb2JlVHNTZWdtZW50XyhzZWdtZW50SW5mbyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aW1pbmdJbmZvKSB7XG4gICAgICAgIGlmICh0aGlzLmNhbGN1bGF0ZVNlZ21lbnRUaW1lTWFwcGluZ18oc2VnbWVudEluZm8sIHRpbWluZ0luZm8pKSB7XG4gICAgICAgICAgdGhpcy5zYXZlRGlzY29udGludWl0eVN5bmNJbmZvXyhzZWdtZW50SW5mbyk7IC8vIElmIHRoZSBwbGF5bGlzdCBkb2VzIG5vdCBoYXZlIHN5bmMgaW5mb3JtYXRpb24geWV0LCByZWNvcmQgdGhhdCBpbmZvcm1hdGlvblxuICAgICAgICAgIC8vIG5vdyB3aXRoIHNlZ21lbnQgdGltaW5nIGluZm9ybWF0aW9uXG5cbiAgICAgICAgICBpZiAoIXBsYXlsaXN0LnN5bmNJbmZvKSB7XG4gICAgICAgICAgICBwbGF5bGlzdC5zeW5jSW5mbyA9IHtcbiAgICAgICAgICAgICAgbWVkaWFTZXF1ZW5jZTogcGxheWxpc3QubWVkaWFTZXF1ZW5jZSArIHNlZ21lbnRJbmZvLm1lZGlhSW5kZXgsXG4gICAgICAgICAgICAgIHRpbWU6IHNlZ21lbnQuc3RhcnRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aW1pbmdJbmZvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9iZSBhbiBmbXA0IG9yIGFuIG1wZWcyLXRzIHNlZ21lbnQgdG8gZGV0ZXJtaW5lIHRoZSBzdGFydCBvZiB0aGUgc2VnbWVudFxuICAgICAqIGluIGl0J3MgaW50ZXJuYWwgXCJtZWRpYSB0aW1lXCIuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7U2VnbWVudEluZm99IHNlZ21lbnRJbmZvIC0gVGhlIGN1cnJlbnQgYWN0aXZlIHJlcXVlc3QgaW5mb3JtYXRpb25cbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9IFRoZSBzdGFydCBhbmQgZW5kIHRpbWUgb2YgdGhlIGN1cnJlbnQgc2VnbWVudCBpbiBcIm1lZGlhIHRpbWVcIlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdwcm9iZU1wNFNlZ21lbnRfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvYmVNcDRTZWdtZW50XyhzZWdtZW50SW5mbykge1xuICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50SW5mby5zZWdtZW50O1xuICAgICAgdmFyIHRpbWVzY2FsZXMgPSBtcDRwcm9iZS50aW1lc2NhbGUoc2VnbWVudC5tYXAuYnl0ZXMpO1xuICAgICAgdmFyIHN0YXJ0VGltZSA9IG1wNHByb2JlLnN0YXJ0VGltZSh0aW1lc2NhbGVzLCBzZWdtZW50SW5mby5ieXRlcyk7XG5cbiAgICAgIGlmIChzZWdtZW50SW5mby50aW1lc3RhbXBPZmZzZXQgIT09IG51bGwpIHtcbiAgICAgICAgc2VnbWVudEluZm8udGltZXN0YW1wT2Zmc2V0IC09IHN0YXJ0VGltZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnQ6IHN0YXJ0VGltZSxcbiAgICAgICAgZW5kOiBzdGFydFRpbWUgKyBzZWdtZW50LmR1cmF0aW9uXG4gICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9iZSBhbiBtcGVnMi10cyBzZWdtZW50IHRvIGRldGVybWluZSB0aGUgc3RhcnQgYW5kIGVuZCBvZiB0aGUgc2VnbWVudFxuICAgICAqIGluIGl0J3MgaW50ZXJuYWwgXCJtZWRpYSB0aW1lXCIuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7U2VnbWVudEluZm99IHNlZ21lbnRJbmZvIC0gVGhlIGN1cnJlbnQgYWN0aXZlIHJlcXVlc3QgaW5mb3JtYXRpb25cbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9IFRoZSBzdGFydCBhbmQgZW5kIHRpbWUgb2YgdGhlIGN1cnJlbnQgc2VnbWVudCBpbiBcIm1lZGlhIHRpbWVcIlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdwcm9iZVRzU2VnbWVudF8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9iZVRzU2VnbWVudF8oc2VnbWVudEluZm8pIHtcbiAgICAgIHZhciB0aW1lSW5mbyA9IHRzcHJvYmUoc2VnbWVudEluZm8uYnl0ZXMsIHRoaXMuaW5zcGVjdENhY2hlXyk7XG4gICAgICB2YXIgc2VnbWVudFN0YXJ0VGltZSA9IHZvaWQgMDtcbiAgICAgIHZhciBzZWdtZW50RW5kVGltZSA9IHZvaWQgMDtcblxuICAgICAgaWYgKCF0aW1lSW5mbykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRpbWVJbmZvLnZpZGVvICYmIHRpbWVJbmZvLnZpZGVvLmxlbmd0aCA9PT0gMikge1xuICAgICAgICB0aGlzLmluc3BlY3RDYWNoZV8gPSB0aW1lSW5mby52aWRlb1sxXS5kdHM7XG4gICAgICAgIHNlZ21lbnRTdGFydFRpbWUgPSB0aW1lSW5mby52aWRlb1swXS5kdHNUaW1lO1xuICAgICAgICBzZWdtZW50RW5kVGltZSA9IHRpbWVJbmZvLnZpZGVvWzFdLmR0c1RpbWU7XG4gICAgICB9IGVsc2UgaWYgKHRpbWVJbmZvLmF1ZGlvICYmIHRpbWVJbmZvLmF1ZGlvLmxlbmd0aCA9PT0gMikge1xuICAgICAgICB0aGlzLmluc3BlY3RDYWNoZV8gPSB0aW1lSW5mby5hdWRpb1sxXS5kdHM7XG4gICAgICAgIHNlZ21lbnRTdGFydFRpbWUgPSB0aW1lSW5mby5hdWRpb1swXS5kdHNUaW1lO1xuICAgICAgICBzZWdtZW50RW5kVGltZSA9IHRpbWVJbmZvLmF1ZGlvWzFdLmR0c1RpbWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBwcm9iZWRJbmZvID0ge1xuICAgICAgICBzdGFydDogc2VnbWVudFN0YXJ0VGltZSxcbiAgICAgICAgZW5kOiBzZWdtZW50RW5kVGltZSxcbiAgICAgICAgY29udGFpbnNWaWRlbzogdGltZUluZm8udmlkZW8gJiYgdGltZUluZm8udmlkZW8ubGVuZ3RoID09PSAyLFxuICAgICAgICBjb250YWluc0F1ZGlvOiB0aW1lSW5mby5hdWRpbyAmJiB0aW1lSW5mby5hdWRpby5sZW5ndGggPT09IDJcbiAgICAgIH07XG4gICAgICByZXR1cm4gcHJvYmVkSW5mbztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICd0aW1lc3RhbXBPZmZzZXRGb3JUaW1lbGluZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRpbWVzdGFtcE9mZnNldEZvclRpbWVsaW5lKHRpbWVsaW5lKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMudGltZWxpbmVzW3RpbWVsaW5lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnRpbWVsaW5lc1t0aW1lbGluZV0udGltZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdtYXBwaW5nRm9yVGltZWxpbmUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtYXBwaW5nRm9yVGltZWxpbmUodGltZWxpbmUpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy50aW1lbGluZXNbdGltZWxpbmVdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMudGltZWxpbmVzW3RpbWVsaW5lXS5tYXBwaW5nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVc2UgdGhlIFwibWVkaWEgdGltZVwiIGZvciBhIHNlZ21lbnQgdG8gZ2VuZXJhdGUgYSBtYXBwaW5nIHRvIFwiZGlzcGxheSB0aW1lXCIgYW5kXG4gICAgICogc2F2ZSB0aGF0IGRpc3BsYXkgdGltZSB0byB0aGUgc2VnbWVudC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtTZWdtZW50SW5mb30gc2VnbWVudEluZm9cbiAgICAgKiAgICAgICAgVGhlIGN1cnJlbnQgYWN0aXZlIHJlcXVlc3QgaW5mb3JtYXRpb25cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gdGltaW5nSW5mb1xuICAgICAqICAgICAgICBUaGUgc3RhcnQgYW5kIGVuZCB0aW1lIG9mIHRoZSBjdXJyZW50IHNlZ21lbnQgaW4gXCJtZWRpYSB0aW1lXCJcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKiAgICAgICAgICBSZXR1cm5zIGZhbHNlIGlmIHNlZ21lbnQgdGltZSBtYXBwaW5nIGNvdWxkIG5vdCBiZSBjYWxjdWxhdGVkXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2NhbGN1bGF0ZVNlZ21lbnRUaW1lTWFwcGluZ18nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjdWxhdGVTZWdtZW50VGltZU1hcHBpbmdfKHNlZ21lbnRJbmZvLCB0aW1pbmdJbmZvKSB7XG4gICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRJbmZvLnNlZ21lbnQ7XG4gICAgICB2YXIgbWFwcGluZ09iaiA9IHRoaXMudGltZWxpbmVzW3NlZ21lbnRJbmZvLnRpbWVsaW5lXTtcblxuICAgICAgaWYgKHNlZ21lbnRJbmZvLnRpbWVzdGFtcE9mZnNldCAhPT0gbnVsbCkge1xuICAgICAgICBtYXBwaW5nT2JqID0ge1xuICAgICAgICAgIHRpbWU6IHNlZ21lbnRJbmZvLnN0YXJ0T2ZTZWdtZW50LFxuICAgICAgICAgIG1hcHBpbmc6IHNlZ21lbnRJbmZvLnN0YXJ0T2ZTZWdtZW50IC0gdGltaW5nSW5mby5zdGFydFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnRpbWVsaW5lc1tzZWdtZW50SW5mby50aW1lbGluZV0gPSBtYXBwaW5nT2JqO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ3RpbWVzdGFtcG9mZnNldCcpO1xuICAgICAgICB0aGlzLmxvZ2dlcl8oJ3RpbWUgbWFwcGluZyBmb3IgdGltZWxpbmUgJyArIHNlZ21lbnRJbmZvLnRpbWVsaW5lICsgJzogJyArICgnW3RpbWU6ICcgKyBtYXBwaW5nT2JqLnRpbWUgKyAnXSBbbWFwcGluZzogJyArIG1hcHBpbmdPYmoubWFwcGluZyArICddJykpO1xuICAgICAgICBzZWdtZW50LnN0YXJ0ID0gc2VnbWVudEluZm8uc3RhcnRPZlNlZ21lbnQ7XG4gICAgICAgIHNlZ21lbnQuZW5kID0gdGltaW5nSW5mby5lbmQgKyBtYXBwaW5nT2JqLm1hcHBpbmc7XG4gICAgICB9IGVsc2UgaWYgKG1hcHBpbmdPYmopIHtcbiAgICAgICAgc2VnbWVudC5zdGFydCA9IHRpbWluZ0luZm8uc3RhcnQgKyBtYXBwaW5nT2JqLm1hcHBpbmc7XG4gICAgICAgIHNlZ21lbnQuZW5kID0gdGltaW5nSW5mby5lbmQgKyBtYXBwaW5nT2JqLm1hcHBpbmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFYWNoIHRpbWUgd2UgaGF2ZSBkaXNjb250aW51aXR5IGluIHRoZSBwbGF5bGlzdCwgYXR0ZW1wdCB0byBjYWxjdWxhdGUgdGhlIGxvY2F0aW9uXG4gICAgICogaW4gZGlzcGxheSBvZiB0aGUgc3RhcnQgb2YgdGhlIGRpc2NvbnRpbnVpdHkgYW5kIHNhdmUgdGhhdC4gV2UgYWxzbyBzYXZlIGFuIGFjY3VyYWN5XG4gICAgICogdmFsdWUgc28gdGhhdCB3ZSBzYXZlIHZhbHVlcyB3aXRoIHRoZSBtb3N0IGFjY3VyYWN5IChjbG9zZXN0IHRvIDAuKVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1NlZ21lbnRJbmZvfSBzZWdtZW50SW5mbyAtIFRoZSBjdXJyZW50IGFjdGl2ZSByZXF1ZXN0IGluZm9ybWF0aW9uXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3NhdmVEaXNjb250aW51aXR5U3luY0luZm9fJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZURpc2NvbnRpbnVpdHlTeW5jSW5mb18oc2VnbWVudEluZm8pIHtcbiAgICAgIHZhciBwbGF5bGlzdCA9IHNlZ21lbnRJbmZvLnBsYXlsaXN0O1xuICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50SW5mby5zZWdtZW50OyAvLyBJZiB0aGUgY3VycmVudCBzZWdtZW50IGlzIGEgZGlzY29udGludWl0eSB0aGVuIHdlIGtub3cgZXhhY3RseSB3aGVyZVxuICAgICAgLy8gdGhlIHN0YXJ0IG9mIHRoZSByYW5nZSBhbmQgaXQncyBhY2N1cmFjeSBpcyAwIChncmVhdGVyIGFjY3VyYWN5IHZhbHVlc1xuICAgICAgLy8gbWVhbiBtb3JlIGFwcHJveGltYXRpb24pXG5cbiAgICAgIGlmIChzZWdtZW50LmRpc2NvbnRpbnVpdHkpIHtcbiAgICAgICAgdGhpcy5kaXNjb250aW51aXRpZXNbc2VnbWVudC50aW1lbGluZV0gPSB7XG4gICAgICAgICAgdGltZTogc2VnbWVudC5zdGFydCxcbiAgICAgICAgICBhY2N1cmFjeTogMFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIGlmIChwbGF5bGlzdC5kaXNjb250aW51aXR5U3RhcnRzICYmIHBsYXlsaXN0LmRpc2NvbnRpbnVpdHlTdGFydHMubGVuZ3RoKSB7XG4gICAgICAgIC8vIFNlYXJjaCBmb3IgZnV0dXJlIGRpc2NvbnRpbnVpdGllcyB0aGF0IHdlIGNhbiBwcm92aWRlIGJldHRlciB0aW1pbmdcbiAgICAgICAgLy8gaW5mb3JtYXRpb24gZm9yIGFuZCBzYXZlIHRoYXQgaW5mb3JtYXRpb24gZm9yIHN5bmMgcHVycG9zZXNcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbGF5bGlzdC5kaXNjb250aW51aXR5U3RhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHNlZ21lbnRJbmRleCA9IHBsYXlsaXN0LmRpc2NvbnRpbnVpdHlTdGFydHNbaV07XG4gICAgICAgICAgdmFyIGRpc2NvbnRpbnVpdHkgPSBwbGF5bGlzdC5kaXNjb250aW51aXR5U2VxdWVuY2UgKyBpICsgMTtcbiAgICAgICAgICB2YXIgbWVkaWFJbmRleERpZmYgPSBzZWdtZW50SW5kZXggLSBzZWdtZW50SW5mby5tZWRpYUluZGV4O1xuICAgICAgICAgIHZhciBhY2N1cmFjeSA9IE1hdGguYWJzKG1lZGlhSW5kZXhEaWZmKTtcblxuICAgICAgICAgIGlmICghdGhpcy5kaXNjb250aW51aXRpZXNbZGlzY29udGludWl0eV0gfHwgdGhpcy5kaXNjb250aW51aXRpZXNbZGlzY29udGludWl0eV0uYWNjdXJhY3kgPiBhY2N1cmFjeSkge1xuICAgICAgICAgICAgdmFyIHRpbWUgPSB2b2lkIDA7XG5cbiAgICAgICAgICAgIGlmIChtZWRpYUluZGV4RGlmZiA8IDApIHtcbiAgICAgICAgICAgICAgdGltZSA9IHNlZ21lbnQuc3RhcnQgLSBzdW1EdXJhdGlvbnMocGxheWxpc3QsIHNlZ21lbnRJbmZvLm1lZGlhSW5kZXgsIHNlZ21lbnRJbmRleCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aW1lID0gc2VnbWVudC5lbmQgKyBzdW1EdXJhdGlvbnMocGxheWxpc3QsIHNlZ21lbnRJbmZvLm1lZGlhSW5kZXggKyAxLCBzZWdtZW50SW5kZXgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmRpc2NvbnRpbnVpdGllc1tkaXNjb250aW51aXR5XSA9IHtcbiAgICAgICAgICAgICAgdGltZTogdGltZSxcbiAgICAgICAgICAgICAgYWNjdXJhY3k6IGFjY3VyYWN5XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gU3luY0NvbnRyb2xsZXI7XG59KHZpZGVvanMkMS5FdmVudFRhcmdldCk7XG5cbnZhciBEZWNyeXB0ZXIkMSA9IG5ldyBzaGltV29ya2VyKFwiLi9kZWNyeXB0ZXItd29ya2VyLndvcmtlci5qc1wiLCBmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCQkMSkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgdmFyIGRlY3J5cHRlcldvcmtlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAvKlxuICAgICAqIHBrY3M3LnBhZFxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9icmlnaHRjb3ZlL3BrY3M3XG4gICAgICpcbiAgICAgKiBDb3B5cmlnaHQgKGMpIDIwMTQgQnJpZ2h0Y292ZVxuICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBhcGFjaGUyIGxpY2Vuc2UuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzdWJhcnJheSBvZiBhIFVpbnQ4QXJyYXkgd2l0aG91dCBQS0NTIzcgcGFkZGluZy5cbiAgICAgKiBAcGFyYW0gcGFkZGVkIHtVaW50OEFycmF5fSB1bmVuY3J5cHRlZCBieXRlcyB0aGF0IGhhdmUgYmVlbiBwYWRkZWRcbiAgICAgKiBAcmV0dXJuIHtVaW50OEFycmF5fSB0aGUgdW5wYWRkZWQgYnl0ZXNcbiAgICAgKiBAc2VlIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzU2NTJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1bnBhZChwYWRkZWQpIHtcbiAgICAgIHJldHVybiBwYWRkZWQuc3ViYXJyYXkoMCwgcGFkZGVkLmJ5dGVMZW5ndGggLSBwYWRkZWRbcGFkZGVkLmJ5dGVMZW5ndGggLSAxXSk7XG4gICAgfVxuXG4gICAgdmFyIGNsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gICAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgICAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgICAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgICAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgICAgICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICAgICAgfTtcbiAgICB9KCk7XG5cbiAgICB2YXIgaW5oZXJpdHMgPSBmdW5jdGlvbiBpbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuICAgICAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTtcbiAgICAgIH1cblxuICAgICAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcbiAgICB9O1xuXG4gICAgdmFyIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gPSBmdW5jdGlvbiBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcbiAgICAgIGlmICghc2VsZikge1xuICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGZpbGUgYWVzLmpzXG4gICAgICpcbiAgICAgKiBUaGlzIGZpbGUgY29udGFpbnMgYW4gYWRhcHRhdGlvbiBvZiB0aGUgQUVTIGRlY3J5cHRpb24gYWxnb3JpdGhtXG4gICAgICogZnJvbSB0aGUgU3RhbmRmb3JkIEphdmFzY3JpcHQgQ3J5cHRvZ3JhcGh5IExpYnJhcnkuIFRoYXQgd29yayBpc1xuICAgICAqIGNvdmVyZWQgYnkgdGhlIGZvbGxvd2luZyBjb3B5cmlnaHQgYW5kIHBlcm1pc3Npb25zIG5vdGljZTpcbiAgICAgKlxuICAgICAqIENvcHlyaWdodCAyMDA5LTIwMTAgRW1pbHkgU3RhcmssIE1pa2UgSGFtYnVyZywgRGFuIEJvbmVoLlxuICAgICAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gICAgICpcbiAgICAgKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbiAgICAgKiBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlXG4gICAgICogbWV0OlxuICAgICAqXG4gICAgICogMS4gUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcbiAgICAgKiAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gICAgICpcbiAgICAgKiAyLiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlXG4gICAgICogICAgY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmdcbiAgICAgKiAgICBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWRcbiAgICAgKiAgICB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG4gICAgICpcbiAgICAgKiBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBBVVRIT1JTIGBgQVMgSVMnJyBBTkQgQU5ZIEVYUFJFU1MgT1JcbiAgICAgKiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuICAgICAqIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbiAgICAgKiBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCA8Q09QWVJJR0hUIEhPTERFUj4gT1IgQ09OVFJJQlVUT1JTIEJFXG4gICAgICogTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUlxuICAgICAqIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GXG4gICAgICogU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SXG4gICAgICogQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksXG4gICAgICogV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0VcbiAgICAgKiBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOXG4gICAgICogSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4gICAgICpcbiAgICAgKiBUaGUgdmlld3MgYW5kIGNvbmNsdXNpb25zIGNvbnRhaW5lZCBpbiB0aGUgc29mdHdhcmUgYW5kIGRvY3VtZW50YXRpb25cbiAgICAgKiBhcmUgdGhvc2Ugb2YgdGhlIGF1dGhvcnMgYW5kIHNob3VsZCBub3QgYmUgaW50ZXJwcmV0ZWQgYXMgcmVwcmVzZW50aW5nXG4gICAgICogb2ZmaWNpYWwgcG9saWNpZXMsIGVpdGhlciBleHByZXNzZWQgb3IgaW1wbGllZCwgb2YgdGhlIGF1dGhvcnMuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBFeHBhbmQgdGhlIFMtYm94IHRhYmxlcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG5cblxuICAgIHZhciBwcmVjb21wdXRlID0gZnVuY3Rpb24gcHJlY29tcHV0ZSgpIHtcbiAgICAgIHZhciB0YWJsZXMgPSBbW1tdLCBbXSwgW10sIFtdLCBbXV0sIFtbXSwgW10sIFtdLCBbXSwgW11dXTtcbiAgICAgIHZhciBlbmNUYWJsZSA9IHRhYmxlc1swXTtcbiAgICAgIHZhciBkZWNUYWJsZSA9IHRhYmxlc1sxXTtcbiAgICAgIHZhciBzYm94ID0gZW5jVGFibGVbNF07XG4gICAgICB2YXIgc2JveEludiA9IGRlY1RhYmxlWzRdO1xuICAgICAgdmFyIGkgPSB2b2lkIDA7XG4gICAgICB2YXIgeCA9IHZvaWQgMDtcbiAgICAgIHZhciB4SW52ID0gdm9pZCAwO1xuICAgICAgdmFyIGQgPSBbXTtcbiAgICAgIHZhciB0aCA9IFtdO1xuICAgICAgdmFyIHgyID0gdm9pZCAwO1xuICAgICAgdmFyIHg0ID0gdm9pZCAwO1xuICAgICAgdmFyIHg4ID0gdm9pZCAwO1xuICAgICAgdmFyIHMgPSB2b2lkIDA7XG4gICAgICB2YXIgdEVuYyA9IHZvaWQgMDtcbiAgICAgIHZhciB0RGVjID0gdm9pZCAwOyAvLyBDb21wdXRlIGRvdWJsZSBhbmQgdGhpcmQgdGFibGVzXG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgICAgICB0aFsoZFtpXSA9IGkgPDwgMSBeIChpID4+IDcpICogMjgzKSBeIGldID0gaTtcbiAgICAgIH1cblxuICAgICAgZm9yICh4ID0geEludiA9IDA7ICFzYm94W3hdOyB4IF49IHgyIHx8IDEsIHhJbnYgPSB0aFt4SW52XSB8fCAxKSB7XG4gICAgICAgIC8vIENvbXB1dGUgc2JveFxuICAgICAgICBzID0geEludiBeIHhJbnYgPDwgMSBeIHhJbnYgPDwgMiBeIHhJbnYgPDwgMyBeIHhJbnYgPDwgNDtcbiAgICAgICAgcyA9IHMgPj4gOCBeIHMgJiAyNTUgXiA5OTtcbiAgICAgICAgc2JveFt4XSA9IHM7XG4gICAgICAgIHNib3hJbnZbc10gPSB4OyAvLyBDb21wdXRlIE1peENvbHVtbnNcblxuICAgICAgICB4OCA9IGRbeDQgPSBkW3gyID0gZFt4XV1dO1xuICAgICAgICB0RGVjID0geDggKiAweDEwMTAxMDEgXiB4NCAqIDB4MTAwMDEgXiB4MiAqIDB4MTAxIF4geCAqIDB4MTAxMDEwMDtcbiAgICAgICAgdEVuYyA9IGRbc10gKiAweDEwMSBeIHMgKiAweDEwMTAxMDA7XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICAgIGVuY1RhYmxlW2ldW3hdID0gdEVuYyA9IHRFbmMgPDwgMjQgXiB0RW5jID4+PiA4O1xuICAgICAgICAgIGRlY1RhYmxlW2ldW3NdID0gdERlYyA9IHREZWMgPDwgMjQgXiB0RGVjID4+PiA4O1xuICAgICAgICB9XG4gICAgICB9IC8vIENvbXBhY3RpZnkuIENvbnNpZGVyYWJsZSBzcGVlZHVwIG9uIEZpcmVmb3guXG5cblxuICAgICAgZm9yIChpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICBlbmNUYWJsZVtpXSA9IGVuY1RhYmxlW2ldLnNsaWNlKDApO1xuICAgICAgICBkZWNUYWJsZVtpXSA9IGRlY1RhYmxlW2ldLnNsaWNlKDApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGFibGVzO1xuICAgIH07XG5cbiAgICB2YXIgYWVzVGFibGVzID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZSBvdXQgYW4gQUVTIGtleSBmb3IgYm90aCBlbmNyeXB0aW9uIGFuZCBkZWNyeXB0aW9uLiBUaGlzXG4gICAgICogaXMgYSBsb3ctbGV2ZWwgY2xhc3MuIFVzZSBhIGNpcGhlciBtb2RlIHRvIGRvIGJ1bGsgZW5jcnlwdGlvbi5cbiAgICAgKlxuICAgICAqIEBjbGFzcyBBRVNcbiAgICAgKiBAcGFyYW0ga2V5IHtBcnJheX0gVGhlIGtleSBhcyBhbiBhcnJheSBvZiA0LCA2IG9yIDggd29yZHMuXG4gICAgICovXG5cbiAgICB2YXIgQUVTID0gZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gQUVTKGtleSkge1xuICAgICAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBBRVMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGV4cGFuZGVkIFMtYm94IGFuZCBpbnZlcnNlIFMtYm94IHRhYmxlcy4gVGhlc2Ugd2lsbCBiZSBjb21wdXRlZFxuICAgICAgICAgKiBvbiB0aGUgY2xpZW50IHNvIHRoYXQgd2UgZG9uJ3QgaGF2ZSB0byBzZW5kIHRoZW0gZG93biB0aGUgd2lyZS5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlcmUgYXJlIHR3byB0YWJsZXMsIF90YWJsZXNbMF0gaXMgZm9yIGVuY3J5cHRpb24gYW5kXG4gICAgICAgICAqIF90YWJsZXNbMV0gaXMgZm9yIGRlY3J5cHRpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBmaXJzdCA0IHN1Yi10YWJsZXMgYXJlIHRoZSBleHBhbmRlZCBTLWJveCB3aXRoIE1peENvbHVtbnMuIFRoZVxuICAgICAgICAgKiBsYXN0IChfdGFibGVzWzAxXVs0XSkgaXMgdGhlIFMtYm94IGl0c2VsZi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIC8vIGlmIHdlIGhhdmUgeWV0IHRvIHByZWNvbXB1dGUgdGhlIFMtYm94IHRhYmxlc1xuICAgICAgICAvLyBkbyBzbyBub3dcblxuICAgICAgICBpZiAoIWFlc1RhYmxlcykge1xuICAgICAgICAgIGFlc1RhYmxlcyA9IHByZWNvbXB1dGUoKTtcbiAgICAgICAgfSAvLyB0aGVuIG1ha2UgYSBjb3B5IG9mIHRoYXQgb2JqZWN0IGZvciB1c2VcblxuXG4gICAgICAgIHRoaXMuX3RhYmxlcyA9IFtbYWVzVGFibGVzWzBdWzBdLnNsaWNlKCksIGFlc1RhYmxlc1swXVsxXS5zbGljZSgpLCBhZXNUYWJsZXNbMF1bMl0uc2xpY2UoKSwgYWVzVGFibGVzWzBdWzNdLnNsaWNlKCksIGFlc1RhYmxlc1swXVs0XS5zbGljZSgpXSwgW2Flc1RhYmxlc1sxXVswXS5zbGljZSgpLCBhZXNUYWJsZXNbMV1bMV0uc2xpY2UoKSwgYWVzVGFibGVzWzFdWzJdLnNsaWNlKCksIGFlc1RhYmxlc1sxXVszXS5zbGljZSgpLCBhZXNUYWJsZXNbMV1bNF0uc2xpY2UoKV1dO1xuICAgICAgICB2YXIgaSA9IHZvaWQgMDtcbiAgICAgICAgdmFyIGogPSB2b2lkIDA7XG4gICAgICAgIHZhciB0bXAgPSB2b2lkIDA7XG4gICAgICAgIHZhciBlbmNLZXkgPSB2b2lkIDA7XG4gICAgICAgIHZhciBkZWNLZXkgPSB2b2lkIDA7XG4gICAgICAgIHZhciBzYm94ID0gdGhpcy5fdGFibGVzWzBdWzRdO1xuICAgICAgICB2YXIgZGVjVGFibGUgPSB0aGlzLl90YWJsZXNbMV07XG4gICAgICAgIHZhciBrZXlMZW4gPSBrZXkubGVuZ3RoO1xuICAgICAgICB2YXIgcmNvbiA9IDE7XG5cbiAgICAgICAgaWYgKGtleUxlbiAhPT0gNCAmJiBrZXlMZW4gIT09IDYgJiYga2V5TGVuICE9PSA4KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFlcyBrZXkgc2l6ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgZW5jS2V5ID0ga2V5LnNsaWNlKDApO1xuICAgICAgICBkZWNLZXkgPSBbXTtcbiAgICAgICAgdGhpcy5fa2V5ID0gW2VuY0tleSwgZGVjS2V5XTsgLy8gc2NoZWR1bGUgZW5jcnlwdGlvbiBrZXlzXG5cbiAgICAgICAgZm9yIChpID0ga2V5TGVuOyBpIDwgNCAqIGtleUxlbiArIDI4OyBpKyspIHtcbiAgICAgICAgICB0bXAgPSBlbmNLZXlbaSAtIDFdOyAvLyBhcHBseSBzYm94XG5cbiAgICAgICAgICBpZiAoaSAlIGtleUxlbiA9PT0gMCB8fCBrZXlMZW4gPT09IDggJiYgaSAlIGtleUxlbiA9PT0gNCkge1xuICAgICAgICAgICAgdG1wID0gc2JveFt0bXAgPj4+IDI0XSA8PCAyNCBeIHNib3hbdG1wID4+IDE2ICYgMjU1XSA8PCAxNiBeIHNib3hbdG1wID4+IDggJiAyNTVdIDw8IDggXiBzYm94W3RtcCAmIDI1NV07IC8vIHNoaWZ0IHJvd3MgYW5kIGFkZCByY29uXG5cbiAgICAgICAgICAgIGlmIChpICUga2V5TGVuID09PSAwKSB7XG4gICAgICAgICAgICAgIHRtcCA9IHRtcCA8PCA4IF4gdG1wID4+PiAyNCBeIHJjb24gPDwgMjQ7XG4gICAgICAgICAgICAgIHJjb24gPSByY29uIDw8IDEgXiAocmNvbiA+PiA3KSAqIDI4MztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBlbmNLZXlbaV0gPSBlbmNLZXlbaSAtIGtleUxlbl0gXiB0bXA7XG4gICAgICAgIH0gLy8gc2NoZWR1bGUgZGVjcnlwdGlvbiBrZXlzXG5cblxuICAgICAgICBmb3IgKGogPSAwOyBpOyBqKyssIGktLSkge1xuICAgICAgICAgIHRtcCA9IGVuY0tleVtqICYgMyA/IGkgOiBpIC0gNF07XG5cbiAgICAgICAgICBpZiAoaSA8PSA0IHx8IGogPCA0KSB7XG4gICAgICAgICAgICBkZWNLZXlbal0gPSB0bXA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlY0tleVtqXSA9IGRlY1RhYmxlWzBdW3Nib3hbdG1wID4+PiAyNF1dIF4gZGVjVGFibGVbMV1bc2JveFt0bXAgPj4gMTYgJiAyNTVdXSBeIGRlY1RhYmxlWzJdW3Nib3hbdG1wID4+IDggJiAyNTVdXSBeIGRlY1RhYmxlWzNdW3Nib3hbdG1wICYgMjU1XV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIERlY3J5cHQgMTYgYnl0ZXMsIHNwZWNpZmllZCBhcyBmb3VyIDMyLWJpdCB3b3Jkcy5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gZW5jcnlwdGVkMCB0aGUgZmlyc3Qgd29yZCB0byBkZWNyeXB0XG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gZW5jcnlwdGVkMSB0aGUgc2Vjb25kIHdvcmQgdG8gZGVjcnlwdFxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGVuY3J5cHRlZDIgdGhlIHRoaXJkIHdvcmQgdG8gZGVjcnlwdFxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGVuY3J5cHRlZDMgdGhlIGZvdXJ0aCB3b3JkIHRvIGRlY3J5cHRcbiAgICAgICAqIEBwYXJhbSB7SW50MzJBcnJheX0gb3V0IHRoZSBhcnJheSB0byB3cml0ZSB0aGUgZGVjcnlwdGVkIHdvcmRzXG4gICAgICAgKiBpbnRvXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IHRoZSBvZmZzZXQgaW50byB0aGUgb3V0cHV0IGFycmF5IHRvIHN0YXJ0XG4gICAgICAgKiB3cml0aW5nIHJlc3VsdHNcbiAgICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgcGxhaW50ZXh0LlxuICAgICAgICovXG5cblxuICAgICAgQUVTLnByb3RvdHlwZS5kZWNyeXB0ID0gZnVuY3Rpb24gZGVjcnlwdCQkMShlbmNyeXB0ZWQwLCBlbmNyeXB0ZWQxLCBlbmNyeXB0ZWQyLCBlbmNyeXB0ZWQzLCBvdXQsIG9mZnNldCkge1xuICAgICAgICB2YXIga2V5ID0gdGhpcy5fa2V5WzFdOyAvLyBzdGF0ZSB2YXJpYWJsZXMgYSxiLGMsZCBhcmUgbG9hZGVkIHdpdGggcHJlLXdoaXRlbmVkIGRhdGFcblxuICAgICAgICB2YXIgYSA9IGVuY3J5cHRlZDAgXiBrZXlbMF07XG4gICAgICAgIHZhciBiID0gZW5jcnlwdGVkMyBeIGtleVsxXTtcbiAgICAgICAgdmFyIGMgPSBlbmNyeXB0ZWQyIF4ga2V5WzJdO1xuICAgICAgICB2YXIgZCA9IGVuY3J5cHRlZDEgXiBrZXlbM107XG4gICAgICAgIHZhciBhMiA9IHZvaWQgMDtcbiAgICAgICAgdmFyIGIyID0gdm9pZCAwO1xuICAgICAgICB2YXIgYzIgPSB2b2lkIDA7IC8vIGtleS5sZW5ndGggPT09IDIgP1xuXG4gICAgICAgIHZhciBuSW5uZXJSb3VuZHMgPSBrZXkubGVuZ3RoIC8gNCAtIDI7XG4gICAgICAgIHZhciBpID0gdm9pZCAwO1xuICAgICAgICB2YXIga0luZGV4ID0gNDtcbiAgICAgICAgdmFyIHRhYmxlID0gdGhpcy5fdGFibGVzWzFdOyAvLyBsb2FkIHVwIHRoZSB0YWJsZXNcblxuICAgICAgICB2YXIgdGFibGUwID0gdGFibGVbMF07XG4gICAgICAgIHZhciB0YWJsZTEgPSB0YWJsZVsxXTtcbiAgICAgICAgdmFyIHRhYmxlMiA9IHRhYmxlWzJdO1xuICAgICAgICB2YXIgdGFibGUzID0gdGFibGVbM107XG4gICAgICAgIHZhciBzYm94ID0gdGFibGVbNF07IC8vIElubmVyIHJvdW5kcy4gQ3JpYmJlZCBmcm9tIE9wZW5TU0wuXG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG5Jbm5lclJvdW5kczsgaSsrKSB7XG4gICAgICAgICAgYTIgPSB0YWJsZTBbYSA+Pj4gMjRdIF4gdGFibGUxW2IgPj4gMTYgJiAyNTVdIF4gdGFibGUyW2MgPj4gOCAmIDI1NV0gXiB0YWJsZTNbZCAmIDI1NV0gXiBrZXlba0luZGV4XTtcbiAgICAgICAgICBiMiA9IHRhYmxlMFtiID4+PiAyNF0gXiB0YWJsZTFbYyA+PiAxNiAmIDI1NV0gXiB0YWJsZTJbZCA+PiA4ICYgMjU1XSBeIHRhYmxlM1thICYgMjU1XSBeIGtleVtrSW5kZXggKyAxXTtcbiAgICAgICAgICBjMiA9IHRhYmxlMFtjID4+PiAyNF0gXiB0YWJsZTFbZCA+PiAxNiAmIDI1NV0gXiB0YWJsZTJbYSA+PiA4ICYgMjU1XSBeIHRhYmxlM1tiICYgMjU1XSBeIGtleVtrSW5kZXggKyAyXTtcbiAgICAgICAgICBkID0gdGFibGUwW2QgPj4+IDI0XSBeIHRhYmxlMVthID4+IDE2ICYgMjU1XSBeIHRhYmxlMltiID4+IDggJiAyNTVdIF4gdGFibGUzW2MgJiAyNTVdIF4ga2V5W2tJbmRleCArIDNdO1xuICAgICAgICAgIGtJbmRleCArPSA0O1xuICAgICAgICAgIGEgPSBhMjtcbiAgICAgICAgICBiID0gYjI7XG4gICAgICAgICAgYyA9IGMyO1xuICAgICAgICB9IC8vIExhc3Qgcm91bmQuXG5cblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgb3V0WygzICYgLWkpICsgb2Zmc2V0XSA9IHNib3hbYSA+Pj4gMjRdIDw8IDI0IF4gc2JveFtiID4+IDE2ICYgMjU1XSA8PCAxNiBeIHNib3hbYyA+PiA4ICYgMjU1XSA8PCA4IF4gc2JveFtkICYgMjU1XSBeIGtleVtrSW5kZXgrK107XG4gICAgICAgICAgYTIgPSBhO1xuICAgICAgICAgIGEgPSBiO1xuICAgICAgICAgIGIgPSBjO1xuICAgICAgICAgIGMgPSBkO1xuICAgICAgICAgIGQgPSBhMjtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIEFFUztcbiAgICB9KCk7XG4gICAgLyoqXG4gICAgICogQGZpbGUgc3RyZWFtLmpzXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBBIGxpZ2h0d2VpZ2h0IHJlYWRhYmxlIHN0cmVhbSBpbXBsZW1lbnRpb24gdGhhdCBoYW5kbGVzIGV2ZW50IGRpc3BhdGNoaW5nLlxuICAgICAqXG4gICAgICogQGNsYXNzIFN0cmVhbVxuICAgICAqL1xuXG5cbiAgICB2YXIgU3RyZWFtID0gZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gU3RyZWFtKCkge1xuICAgICAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBTdHJlYW0pO1xuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBBZGQgYSBsaXN0ZW5lciBmb3IgYSBzcGVjaWZpZWQgZXZlbnQgdHlwZS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSB0aGUgZXZlbnQgbmFtZVxuICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgdGhlIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgd2hlbiBhbiBldmVudCBvZlxuICAgICAgICogdGhlIHNwZWNpZmllZCB0eXBlIG9jY3Vyc1xuICAgICAgICovXG5cblxuICAgICAgU3RyZWFtLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIG9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIGlmICghdGhpcy5saXN0ZW5lcnNbdHlwZV0pIHtcbiAgICAgICAgICB0aGlzLmxpc3RlbmVyc1t0eXBlXSA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbdHlwZV0ucHVzaChsaXN0ZW5lcik7XG4gICAgICB9O1xuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmUgYSBsaXN0ZW5lciBmb3IgYSBzcGVjaWZpZWQgZXZlbnQgdHlwZS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSB0aGUgZXZlbnQgbmFtZVxuICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgIGEgZnVuY3Rpb24gcHJldmlvdXNseSByZWdpc3RlcmVkIGZvciB0aGlzXG4gICAgICAgKiB0eXBlIG9mIGV2ZW50IHRocm91Z2ggYG9uYFxuICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gaWYgd2UgY291bGQgdHVybiBpdCBvZmYgb3Igbm90XG4gICAgICAgKi9cblxuXG4gICAgICBTdHJlYW0ucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIG9mZih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzW3R5cGVdKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5saXN0ZW5lcnNbdHlwZV0uaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzW3R5cGVdLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHJldHVybiBpbmRleCA+IC0xO1xuICAgICAgfTtcbiAgICAgIC8qKlxuICAgICAgICogVHJpZ2dlciBhbiBldmVudCBvZiB0aGUgc3BlY2lmaWVkIHR5cGUgb24gdGhpcyBzdHJlYW0uIEFueSBhZGRpdGlvbmFsXG4gICAgICAgKiBhcmd1bWVudHMgdG8gdGhpcyBmdW5jdGlvbiBhcmUgcGFzc2VkIGFzIHBhcmFtZXRlcnMgdG8gZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIHRoZSBldmVudCBuYW1lXG4gICAgICAgKi9cblxuXG4gICAgICBTdHJlYW0ucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiB0cmlnZ2VyKHR5cGUpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrcyA9IHRoaXMubGlzdGVuZXJzW3R5cGVdO1xuXG4gICAgICAgIGlmICghY2FsbGJhY2tzKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IC8vIFNsaWNpbmcgdGhlIGFyZ3VtZW50cyBvbiBldmVyeSBpbnZvY2F0aW9uIG9mIHRoaXMgbWV0aG9kXG4gICAgICAgIC8vIGNhbiBhZGQgYSBzaWduaWZpY2FudCBhbW91bnQgb2Ygb3ZlcmhlYWQuIEF2b2lkIHRoZVxuICAgICAgICAvLyBpbnRlcm1lZGlhdGUgb2JqZWN0IGNyZWF0aW9uIGZvciB0aGUgY29tbW9uIGNhc2Ugb2YgYVxuICAgICAgICAvLyBzaW5nbGUgY2FsbGJhY2sgYXJndW1lbnRcblxuXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgdmFyIGxlbmd0aCA9IGNhbGxiYWNrcy5sZW5ndGg7XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjYWxsYmFja3NbaV0uY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICAgICAgdmFyIF9sZW5ndGggPSBjYWxsYmFja3MubGVuZ3RoO1xuXG4gICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IF9sZW5ndGg7ICsrX2kpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrc1tfaV0uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgLyoqXG4gICAgICAgKiBEZXN0cm95cyB0aGUgc3RyZWFtIGFuZCBjbGVhbnMgdXAuXG4gICAgICAgKi9cblxuXG4gICAgICBTdHJlYW0ucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xuICAgICAgfTtcbiAgICAgIC8qKlxuICAgICAgICogRm9yd2FyZHMgYWxsIGBkYXRhYCBldmVudHMgb24gdGhpcyBzdHJlYW0gdG8gdGhlIGRlc3RpbmF0aW9uIHN0cmVhbS4gVGhlXG4gICAgICAgKiBkZXN0aW5hdGlvbiBzdHJlYW0gc2hvdWxkIHByb3ZpZGUgYSBtZXRob2QgYHB1c2hgIHRvIHJlY2VpdmUgdGhlIGRhdGFcbiAgICAgICAqIGV2ZW50cyBhcyB0aGV5IGFycml2ZS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge1N0cmVhbX0gZGVzdGluYXRpb24gdGhlIHN0cmVhbSB0aGF0IHdpbGwgcmVjZWl2ZSBhbGwgYGRhdGFgIGV2ZW50c1xuICAgICAgICogQHNlZSBodHRwOi8vbm9kZWpzLm9yZy9hcGkvc3RyZWFtLmh0bWwjc3RyZWFtX3JlYWRhYmxlX3BpcGVfZGVzdGluYXRpb25fb3B0aW9uc1xuICAgICAgICovXG5cblxuICAgICAgU3RyZWFtLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gcGlwZShkZXN0aW5hdGlvbikge1xuICAgICAgICB0aGlzLm9uKCdkYXRhJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICBkZXN0aW5hdGlvbi5wdXNoKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBTdHJlYW07XG4gICAgfSgpO1xuICAgIC8qKlxuICAgICAqIEBmaWxlIGFzeW5jLXN0cmVhbS5qc1xuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQSB3cmFwcGVyIGFyb3VuZCB0aGUgU3RyZWFtIGNsYXNzIHRvIHVzZSBzZXRUaWVtb3V0XG4gICAgICogYW5kIHJ1biBzdHJlYW0gXCJqb2JzXCIgQXN5bmNocm9ub3VzbHlcbiAgICAgKlxuICAgICAqIEBjbGFzcyBBc3luY1N0cmVhbVxuICAgICAqIEBleHRlbmRzIFN0cmVhbVxuICAgICAqL1xuXG5cbiAgICB2YXIgQXN5bmNTdHJlYW0kJDEgPSBmdW5jdGlvbiAoX1N0cmVhbSkge1xuICAgICAgaW5oZXJpdHMoQXN5bmNTdHJlYW0kJDEsIF9TdHJlYW0pO1xuXG4gICAgICBmdW5jdGlvbiBBc3luY1N0cmVhbSQkMSgpIHtcbiAgICAgICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgQXN5bmNTdHJlYW0kJDEpO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1N0cmVhbS5jYWxsKHRoaXMsIFN0cmVhbSkpO1xuXG4gICAgICAgIF90aGlzLmpvYnMgPSBbXTtcbiAgICAgICAgX3RoaXMuZGVsYXkgPSAxO1xuICAgICAgICBfdGhpcy50aW1lb3V0XyA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogcHJvY2VzcyBhbiBhc3luYyBqb2JcbiAgICAgICAqXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICovXG5cblxuICAgICAgQXN5bmNTdHJlYW0kJDEucHJvdG90eXBlLnByb2Nlc3NKb2JfID0gZnVuY3Rpb24gcHJvY2Vzc0pvYl8oKSB7XG4gICAgICAgIHRoaXMuam9icy5zaGlmdCgpKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuam9icy5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLnRpbWVvdXRfID0gc2V0VGltZW91dCh0aGlzLnByb2Nlc3NKb2JfLmJpbmQodGhpcyksIHRoaXMuZGVsYXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudGltZW91dF8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgLyoqXG4gICAgICAgKiBwdXNoIGEgam9iIGludG8gdGhlIHN0cmVhbVxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGpvYiB0aGUgam9iIHRvIHB1c2ggaW50byB0aGUgc3RyZWFtXG4gICAgICAgKi9cblxuXG4gICAgICBBc3luY1N0cmVhbSQkMS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIHB1c2goam9iKSB7XG4gICAgICAgIHRoaXMuam9icy5wdXNoKGpvYik7XG5cbiAgICAgICAgaWYgKCF0aGlzLnRpbWVvdXRfKSB7XG4gICAgICAgICAgdGhpcy50aW1lb3V0XyA9IHNldFRpbWVvdXQodGhpcy5wcm9jZXNzSm9iXy5iaW5kKHRoaXMpLCB0aGlzLmRlbGF5KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIEFzeW5jU3RyZWFtJCQxO1xuICAgIH0oU3RyZWFtKTtcbiAgICAvKipcbiAgICAgKiBAZmlsZSBkZWNyeXB0ZXIuanNcbiAgICAgKlxuICAgICAqIEFuIGFzeW5jaHJvbm91cyBpbXBsZW1lbnRhdGlvbiBvZiBBRVMtMTI4IENCQyBkZWNyeXB0aW9uIHdpdGhcbiAgICAgKiBQS0NTIzcgcGFkZGluZy5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnQgbmV0d29yay1vcmRlciAoYmlnLWVuZGlhbikgYnl0ZXMgaW50byB0aGVpciBsaXR0bGUtZW5kaWFuXG4gICAgICogcmVwcmVzZW50YXRpb24uXG4gICAgICovXG5cblxuICAgIHZhciBudG9oID0gZnVuY3Rpb24gbnRvaCh3b3JkKSB7XG4gICAgICByZXR1cm4gd29yZCA8PCAyNCB8ICh3b3JkICYgMHhmZjAwKSA8PCA4IHwgKHdvcmQgJiAweGZmMDAwMCkgPj4gOCB8IHdvcmQgPj4+IDI0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGVjcnlwdCBieXRlcyB1c2luZyBBRVMtMTI4IHdpdGggQ0JDIGFuZCBQS0NTIzcgcGFkZGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VWludDhBcnJheX0gZW5jcnlwdGVkIHRoZSBlbmNyeXB0ZWQgYnl0ZXNcbiAgICAgKiBAcGFyYW0ge1VpbnQzMkFycmF5fSBrZXkgdGhlIGJ5dGVzIG9mIHRoZSBkZWNyeXB0aW9uIGtleVxuICAgICAqIEBwYXJhbSB7VWludDMyQXJyYXl9IGluaXRWZWN0b3IgdGhlIGluaXRpYWxpemF0aW9uIHZlY3RvciAoSVYpIHRvXG4gICAgICogdXNlIGZvciB0aGUgZmlyc3Qgcm91bmQgb2YgQ0JDLlxuICAgICAqIEByZXR1cm4ge1VpbnQ4QXJyYXl9IHRoZSBkZWNyeXB0ZWQgYnl0ZXNcbiAgICAgKlxuICAgICAqIEBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BZHZhbmNlZF9FbmNyeXB0aW9uX1N0YW5kYXJkXG4gICAgICogQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Jsb2NrX2NpcGhlcl9tb2RlX29mX29wZXJhdGlvbiNDaXBoZXJfQmxvY2tfQ2hhaW5pbmdfLjI4Q0JDLjI5XG4gICAgICogQHNlZSBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMjMxNVxuICAgICAqL1xuXG5cbiAgICB2YXIgZGVjcnlwdCQkMSA9IGZ1bmN0aW9uIGRlY3J5cHQkJDEoZW5jcnlwdGVkLCBrZXksIGluaXRWZWN0b3IpIHtcbiAgICAgIC8vIHdvcmQtbGV2ZWwgYWNjZXNzIHRvIHRoZSBlbmNyeXB0ZWQgYnl0ZXNcbiAgICAgIHZhciBlbmNyeXB0ZWQzMiA9IG5ldyBJbnQzMkFycmF5KGVuY3J5cHRlZC5idWZmZXIsIGVuY3J5cHRlZC5ieXRlT2Zmc2V0LCBlbmNyeXB0ZWQuYnl0ZUxlbmd0aCA+PiAyKTtcbiAgICAgIHZhciBkZWNpcGhlciA9IG5ldyBBRVMoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoa2V5KSk7IC8vIGJ5dGUgYW5kIHdvcmQtbGV2ZWwgYWNjZXNzIGZvciB0aGUgZGVjcnlwdGVkIG91dHB1dFxuXG4gICAgICB2YXIgZGVjcnlwdGVkID0gbmV3IFVpbnQ4QXJyYXkoZW5jcnlwdGVkLmJ5dGVMZW5ndGgpO1xuICAgICAgdmFyIGRlY3J5cHRlZDMyID0gbmV3IEludDMyQXJyYXkoZGVjcnlwdGVkLmJ1ZmZlcik7IC8vIHRlbXBvcmFyeSB2YXJpYWJsZXMgZm9yIHdvcmtpbmcgd2l0aCB0aGUgSVYsIGVuY3J5cHRlZCwgYW5kXG4gICAgICAvLyBkZWNyeXB0ZWQgZGF0YVxuXG4gICAgICB2YXIgaW5pdDAgPSB2b2lkIDA7XG4gICAgICB2YXIgaW5pdDEgPSB2b2lkIDA7XG4gICAgICB2YXIgaW5pdDIgPSB2b2lkIDA7XG4gICAgICB2YXIgaW5pdDMgPSB2b2lkIDA7XG4gICAgICB2YXIgZW5jcnlwdGVkMCA9IHZvaWQgMDtcbiAgICAgIHZhciBlbmNyeXB0ZWQxID0gdm9pZCAwO1xuICAgICAgdmFyIGVuY3J5cHRlZDIgPSB2b2lkIDA7XG4gICAgICB2YXIgZW5jcnlwdGVkMyA9IHZvaWQgMDsgLy8gaXRlcmF0aW9uIHZhcmlhYmxlXG5cbiAgICAgIHZhciB3b3JkSXggPSB2b2lkIDA7IC8vIHB1bGwgb3V0IHRoZSB3b3JkcyBvZiB0aGUgSVYgdG8gZW5zdXJlIHdlIGRvbid0IG1vZGlmeSB0aGVcbiAgICAgIC8vIHBhc3NlZC1pbiByZWZlcmVuY2UgYW5kIGVhc2llciBhY2Nlc3NcblxuICAgICAgaW5pdDAgPSBpbml0VmVjdG9yWzBdO1xuICAgICAgaW5pdDEgPSBpbml0VmVjdG9yWzFdO1xuICAgICAgaW5pdDIgPSBpbml0VmVjdG9yWzJdO1xuICAgICAgaW5pdDMgPSBpbml0VmVjdG9yWzNdOyAvLyBkZWNyeXB0IGZvdXIgd29yZCBzZXF1ZW5jZXMsIGFwcGx5aW5nIGNpcGhlci1ibG9jayBjaGFpbmluZyAoQ0JDKVxuICAgICAgLy8gdG8gZWFjaCBkZWNyeXB0ZWQgYmxvY2tcblxuICAgICAgZm9yICh3b3JkSXggPSAwOyB3b3JkSXggPCBlbmNyeXB0ZWQzMi5sZW5ndGg7IHdvcmRJeCArPSA0KSB7XG4gICAgICAgIC8vIGNvbnZlcnQgYmlnLWVuZGlhbiAobmV0d29yayBvcmRlcikgd29yZHMgaW50byBsaXR0bGUtZW5kaWFuXG4gICAgICAgIC8vIChqYXZhc2NyaXB0IG9yZGVyKVxuICAgICAgICBlbmNyeXB0ZWQwID0gbnRvaChlbmNyeXB0ZWQzMlt3b3JkSXhdKTtcbiAgICAgICAgZW5jcnlwdGVkMSA9IG50b2goZW5jcnlwdGVkMzJbd29yZEl4ICsgMV0pO1xuICAgICAgICBlbmNyeXB0ZWQyID0gbnRvaChlbmNyeXB0ZWQzMlt3b3JkSXggKyAyXSk7XG4gICAgICAgIGVuY3J5cHRlZDMgPSBudG9oKGVuY3J5cHRlZDMyW3dvcmRJeCArIDNdKTsgLy8gZGVjcnlwdCB0aGUgYmxvY2tcblxuICAgICAgICBkZWNpcGhlci5kZWNyeXB0KGVuY3J5cHRlZDAsIGVuY3J5cHRlZDEsIGVuY3J5cHRlZDIsIGVuY3J5cHRlZDMsIGRlY3J5cHRlZDMyLCB3b3JkSXgpOyAvLyBYT1Igd2l0aCB0aGUgSVYsIGFuZCByZXN0b3JlIG5ldHdvcmsgYnl0ZS1vcmRlciB0byBvYnRhaW4gdGhlXG4gICAgICAgIC8vIHBsYWludGV4dFxuXG4gICAgICAgIGRlY3J5cHRlZDMyW3dvcmRJeF0gPSBudG9oKGRlY3J5cHRlZDMyW3dvcmRJeF0gXiBpbml0MCk7XG4gICAgICAgIGRlY3J5cHRlZDMyW3dvcmRJeCArIDFdID0gbnRvaChkZWNyeXB0ZWQzMlt3b3JkSXggKyAxXSBeIGluaXQxKTtcbiAgICAgICAgZGVjcnlwdGVkMzJbd29yZEl4ICsgMl0gPSBudG9oKGRlY3J5cHRlZDMyW3dvcmRJeCArIDJdIF4gaW5pdDIpO1xuICAgICAgICBkZWNyeXB0ZWQzMlt3b3JkSXggKyAzXSA9IG50b2goZGVjcnlwdGVkMzJbd29yZEl4ICsgM10gXiBpbml0Myk7IC8vIHNldHVwIHRoZSBJViBmb3IgdGhlIG5leHQgcm91bmRcblxuICAgICAgICBpbml0MCA9IGVuY3J5cHRlZDA7XG4gICAgICAgIGluaXQxID0gZW5jcnlwdGVkMTtcbiAgICAgICAgaW5pdDIgPSBlbmNyeXB0ZWQyO1xuICAgICAgICBpbml0MyA9IGVuY3J5cHRlZDM7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkZWNyeXB0ZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUgYERlY3J5cHRlcmAgY2xhc3MgdGhhdCBtYW5hZ2VzIGRlY3J5cHRpb24gb2YgQUVTXG4gICAgICogZGF0YSB0aHJvdWdoIGBBc3luY1N0cmVhbWAgb2JqZWN0cyBhbmQgdGhlIGBkZWNyeXB0YFxuICAgICAqIGZ1bmN0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGVuY3J5cHRlZCB0aGUgZW5jcnlwdGVkIGJ5dGVzXG4gICAgICogQHBhcmFtIHtVaW50MzJBcnJheX0ga2V5IHRoZSBieXRlcyBvZiB0aGUgZGVjcnlwdGlvbiBrZXlcbiAgICAgKiBAcGFyYW0ge1VpbnQzMkFycmF5fSBpbml0VmVjdG9yIHRoZSBpbml0aWFsaXphdGlvbiB2ZWN0b3IgKElWKSB0b1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGRvbmUgdGhlIGZ1bmN0aW9uIHRvIHJ1biB3aGVuIGRvbmVcbiAgICAgKiBAY2xhc3MgRGVjcnlwdGVyXG4gICAgICovXG5cblxuICAgIHZhciBEZWNyeXB0ZXIkJDEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBEZWNyeXB0ZXIkJDEoZW5jcnlwdGVkLCBrZXksIGluaXRWZWN0b3IsIGRvbmUpIHtcbiAgICAgICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgRGVjcnlwdGVyJCQxKTtcbiAgICAgICAgdmFyIHN0ZXAgPSBEZWNyeXB0ZXIkJDEuU1RFUDtcbiAgICAgICAgdmFyIGVuY3J5cHRlZDMyID0gbmV3IEludDMyQXJyYXkoZW5jcnlwdGVkLmJ1ZmZlcik7XG4gICAgICAgIHZhciBkZWNyeXB0ZWQgPSBuZXcgVWludDhBcnJheShlbmNyeXB0ZWQuYnl0ZUxlbmd0aCk7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdGhpcy5hc3luY1N0cmVhbV8gPSBuZXcgQXN5bmNTdHJlYW0kJDEoKTsgLy8gc3BsaXQgdXAgdGhlIGVuY3J5cHRpb24gam9iIGFuZCBkbyB0aGUgaW5kaXZpZHVhbCBjaHVua3MgYXN5bmNocm9ub3VzbHlcblxuICAgICAgICB0aGlzLmFzeW5jU3RyZWFtXy5wdXNoKHRoaXMuZGVjcnlwdENodW5rXyhlbmNyeXB0ZWQzMi5zdWJhcnJheShpLCBpICsgc3RlcCksIGtleSwgaW5pdFZlY3RvciwgZGVjcnlwdGVkKSk7XG5cbiAgICAgICAgZm9yIChpID0gc3RlcDsgaSA8IGVuY3J5cHRlZDMyLmxlbmd0aDsgaSArPSBzdGVwKSB7XG4gICAgICAgICAgaW5pdFZlY3RvciA9IG5ldyBVaW50MzJBcnJheShbbnRvaChlbmNyeXB0ZWQzMltpIC0gNF0pLCBudG9oKGVuY3J5cHRlZDMyW2kgLSAzXSksIG50b2goZW5jcnlwdGVkMzJbaSAtIDJdKSwgbnRvaChlbmNyeXB0ZWQzMltpIC0gMV0pXSk7XG4gICAgICAgICAgdGhpcy5hc3luY1N0cmVhbV8ucHVzaCh0aGlzLmRlY3J5cHRDaHVua18oZW5jcnlwdGVkMzIuc3ViYXJyYXkoaSwgaSArIHN0ZXApLCBrZXksIGluaXRWZWN0b3IsIGRlY3J5cHRlZCkpO1xuICAgICAgICB9IC8vIGludm9rZSB0aGUgZG9uZSgpIGNhbGxiYWNrIHdoZW4gZXZlcnl0aGluZyBpcyBmaW5pc2hlZFxuXG5cbiAgICAgICAgdGhpcy5hc3luY1N0cmVhbV8ucHVzaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gcmVtb3ZlIHBrY3MjNyBwYWRkaW5nIGZyb20gdGhlIGRlY3J5cHRlZCBieXRlc1xuICAgICAgICAgIGRvbmUobnVsbCwgdW5wYWQoZGVjcnlwdGVkKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBhIGdldHRlciBmb3Igc3RlcCB0aGUgbWF4aW11bSBudW1iZXIgb2YgYnl0ZXMgdG8gcHJvY2VzcyBhdCBvbmUgdGltZVxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge051bWJlcn0gdGhlIHZhbHVlIG9mIHN0ZXAgMzIwMDBcbiAgICAgICAqL1xuXG4gICAgICAvKipcbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKi9cblxuXG4gICAgICBEZWNyeXB0ZXIkJDEucHJvdG90eXBlLmRlY3J5cHRDaHVua18gPSBmdW5jdGlvbiBkZWNyeXB0Q2h1bmtfKGVuY3J5cHRlZCwga2V5LCBpbml0VmVjdG9yLCBkZWNyeXB0ZWQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgYnl0ZXMgPSBkZWNyeXB0JCQxKGVuY3J5cHRlZCwga2V5LCBpbml0VmVjdG9yKTtcbiAgICAgICAgICBkZWNyeXB0ZWQuc2V0KGJ5dGVzLCBlbmNyeXB0ZWQuYnl0ZU9mZnNldCk7XG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICBjcmVhdGVDbGFzcyhEZWNyeXB0ZXIkJDEsIG51bGwsIFt7XG4gICAgICAgIGtleTogJ1NURVAnLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgICAgICAvLyA0ICogODAwMDtcbiAgICAgICAgICByZXR1cm4gMzIwMDA7XG4gICAgICAgIH1cbiAgICAgIH1dKTtcbiAgICAgIHJldHVybiBEZWNyeXB0ZXIkJDE7XG4gICAgfSgpO1xuICAgIC8qKlxuICAgICAqIEBmaWxlIGJpbi11dGlscy5qc1xuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3QgZm9yIHNlbmRpbmcgdG8gYSB3ZWIgd29ya2VyIG1vZGlmeWluZyBwcm9wZXJ0aWVzIHRoYXQgYXJlIFR5cGVkQXJyYXlzXG4gICAgICogaW50byBhIG5ldyBvYmplY3Qgd2l0aCBzZXBlcmF0ZWQgcHJvcGVydGllcyBmb3IgdGhlIGJ1ZmZlciwgYnl0ZU9mZnNldCwgYW5kIGJ5dGVMZW5ndGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWVzc2FnZVxuICAgICAqICAgICAgICBPYmplY3Qgb2YgcHJvcGVydGllcyBhbmQgdmFsdWVzIHRvIHNlbmQgdG8gdGhlIHdlYiB3b3JrZXJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogICAgICAgICBNb2RpZmllZCBtZXNzYWdlIHdpdGggVHlwZWRBcnJheSB2YWx1ZXMgZXhwYW5kZWRcbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlVHJhbnNmZXJhYmxlTWVzc2FnZVxuICAgICAqL1xuXG5cbiAgICB2YXIgY3JlYXRlVHJhbnNmZXJhYmxlTWVzc2FnZSA9IGZ1bmN0aW9uIGNyZWF0ZVRyYW5zZmVyYWJsZU1lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgdmFyIHRyYW5zZmVyYWJsZSA9IHt9O1xuICAgICAgT2JqZWN0LmtleXMobWVzc2FnZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IG1lc3NhZ2Vba2V5XTtcblxuICAgICAgICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KHZhbHVlKSkge1xuICAgICAgICAgIHRyYW5zZmVyYWJsZVtrZXldID0ge1xuICAgICAgICAgICAgYnl0ZXM6IHZhbHVlLmJ1ZmZlcixcbiAgICAgICAgICAgIGJ5dGVPZmZzZXQ6IHZhbHVlLmJ5dGVPZmZzZXQsXG4gICAgICAgICAgICBieXRlTGVuZ3RoOiB2YWx1ZS5ieXRlTGVuZ3RoXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0cmFuc2ZlcmFibGVba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cmFuc2ZlcmFibGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBPdXIgd2ViIHdvcmtlciBpbnRlcmZhY2Ugc28gdGhhdCB0aGluZ3MgY2FuIHRhbGsgdG8gYWVzLWRlY3J5cHRlclxuICAgICAqIHRoYXQgd2lsbCBiZSBydW5uaW5nIGluIGEgd2ViIHdvcmtlci4gdGhlIHNjb3BlIGlzIHBhc3NlZCB0byB0aGlzIGJ5XG4gICAgICogd2Vid29ya2lmeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzZWxmXG4gICAgICogICAgICAgIHRoZSBzY29wZSBmb3IgdGhlIHdlYiB3b3JrZXJcbiAgICAgKi9cblxuXG4gICAgdmFyIERlY3J5cHRlcldvcmtlciA9IGZ1bmN0aW9uIERlY3J5cHRlcldvcmtlcihzZWxmKSB7XG4gICAgICBzZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgZGF0YSA9IGV2ZW50LmRhdGE7XG4gICAgICAgIHZhciBlbmNyeXB0ZWQgPSBuZXcgVWludDhBcnJheShkYXRhLmVuY3J5cHRlZC5ieXRlcywgZGF0YS5lbmNyeXB0ZWQuYnl0ZU9mZnNldCwgZGF0YS5lbmNyeXB0ZWQuYnl0ZUxlbmd0aCk7XG4gICAgICAgIHZhciBrZXkgPSBuZXcgVWludDMyQXJyYXkoZGF0YS5rZXkuYnl0ZXMsIGRhdGEua2V5LmJ5dGVPZmZzZXQsIGRhdGEua2V5LmJ5dGVMZW5ndGggLyA0KTtcbiAgICAgICAgdmFyIGl2ID0gbmV3IFVpbnQzMkFycmF5KGRhdGEuaXYuYnl0ZXMsIGRhdGEuaXYuYnl0ZU9mZnNldCwgZGF0YS5pdi5ieXRlTGVuZ3RoIC8gNCk7XG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldywgaGFuZGxlLWNhbGxiYWNrLWVyciAqL1xuXG4gICAgICAgIG5ldyBEZWNyeXB0ZXIkJDEoZW5jcnlwdGVkLCBrZXksIGl2LCBmdW5jdGlvbiAoZXJyLCBieXRlcykge1xuICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoY3JlYXRlVHJhbnNmZXJhYmxlTWVzc2FnZSh7XG4gICAgICAgICAgICBzb3VyY2U6IGRhdGEuc291cmNlLFxuICAgICAgICAgICAgZGVjcnlwdGVkOiBieXRlc1xuICAgICAgICAgIH0pLCBbYnl0ZXMuYnVmZmVyXSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvKiBlc2xpbnQtZW5hYmxlICovXG4gICAgICB9O1xuICAgIH07XG5cbiAgICB2YXIgZGVjcnlwdGVyV29ya2VyID0gbmV3IERlY3J5cHRlcldvcmtlcihzZWxmKTtcbiAgICByZXR1cm4gZGVjcnlwdGVyV29ya2VyO1xuICB9KCk7XG59KTtcbi8qKlxuICogQ29udmVydCB0aGUgcHJvcGVydGllcyBvZiBhbiBITFMgdHJhY2sgaW50byBhbiBhdWRpb1RyYWNrS2luZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5cbnZhciBhdWRpb1RyYWNrS2luZF8gPSBmdW5jdGlvbiBhdWRpb1RyYWNrS2luZF8ocHJvcGVydGllcykge1xuICB2YXIga2luZCA9IHByb3BlcnRpZXMuZGVmYXVsdCA/ICdtYWluJyA6ICdhbHRlcm5hdGl2ZSc7XG5cbiAgaWYgKHByb3BlcnRpZXMuY2hhcmFjdGVyaXN0aWNzICYmIHByb3BlcnRpZXMuY2hhcmFjdGVyaXN0aWNzLmluZGV4T2YoJ3B1YmxpYy5hY2Nlc3NpYmlsaXR5LmRlc2NyaWJlcy12aWRlbycpID49IDApIHtcbiAgICBraW5kID0gJ21haW4tZGVzYyc7XG4gIH1cblxuICByZXR1cm4ga2luZDtcbn07XG4vKipcbiAqIFBhdXNlIHByb3ZpZGVkIHNlZ21lbnQgbG9hZGVyIGFuZCBwbGF5bGlzdCBsb2FkZXIgaWYgYWN0aXZlXG4gKlxuICogQHBhcmFtIHtTZWdtZW50TG9hZGVyfSBzZWdtZW50TG9hZGVyXG4gKiAgICAgICAgU2VnbWVudExvYWRlciB0byBwYXVzZVxuICogQHBhcmFtIHtPYmplY3R9IG1lZGlhVHlwZVxuICogICAgICAgIEFjdGl2ZSBtZWRpYSB0eXBlXG4gKiBAZnVuY3Rpb24gc3RvcExvYWRlcnNcbiAqL1xuXG5cbnZhciBzdG9wTG9hZGVycyA9IGZ1bmN0aW9uIHN0b3BMb2FkZXJzKHNlZ21lbnRMb2FkZXIsIG1lZGlhVHlwZSkge1xuICBzZWdtZW50TG9hZGVyLmFib3J0KCk7XG4gIHNlZ21lbnRMb2FkZXIucGF1c2UoKTtcblxuICBpZiAobWVkaWFUeXBlICYmIG1lZGlhVHlwZS5hY3RpdmVQbGF5bGlzdExvYWRlcikge1xuICAgIG1lZGlhVHlwZS5hY3RpdmVQbGF5bGlzdExvYWRlci5wYXVzZSgpO1xuICAgIG1lZGlhVHlwZS5hY3RpdmVQbGF5bGlzdExvYWRlciA9IG51bGw7XG4gIH1cbn07XG4vKipcbiAqIFN0YXJ0IGxvYWRpbmcgcHJvdmlkZWQgc2VnbWVudCBsb2FkZXIgYW5kIHBsYXlsaXN0IGxvYWRlclxuICpcbiAqIEBwYXJhbSB7UGxheWxpc3RMb2FkZXJ9IHBsYXlsaXN0TG9hZGVyXG4gKiAgICAgICAgUGxheWxpc3RMb2FkZXIgdG8gc3RhcnQgbG9hZGluZ1xuICogQHBhcmFtIHtPYmplY3R9IG1lZGlhVHlwZVxuICogICAgICAgIEFjdGl2ZSBtZWRpYSB0eXBlXG4gKiBAZnVuY3Rpb24gc3RhcnRMb2FkZXJzXG4gKi9cblxuXG52YXIgc3RhcnRMb2FkZXJzID0gZnVuY3Rpb24gc3RhcnRMb2FkZXJzKHBsYXlsaXN0TG9hZGVyLCBtZWRpYVR5cGUpIHtcbiAgLy8gU2VnbWVudCBsb2FkZXIgd2lsbCBiZSBzdGFydGVkIGFmdGVyIGBsb2FkZWRtZXRhZGF0YWAgb3IgYGxvYWRlZHBsYXlsaXN0YCBmcm9tIHRoZVxuICAvLyBwbGF5bGlzdCBsb2FkZXJcbiAgbWVkaWFUeXBlLmFjdGl2ZVBsYXlsaXN0TG9hZGVyID0gcGxheWxpc3RMb2FkZXI7XG4gIHBsYXlsaXN0TG9hZGVyLmxvYWQoKTtcbn07XG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgbWVkaWEgZ3JvdXAgY2hhbmdlcy4gSXQgcGVyZm9ybXMgYVxuICogbm9uLWRlc3RydWN0aXZlIChwcmVzZXJ2ZSB0aGUgYnVmZmVyKSByZXN5bmMgb2YgdGhlIFNlZ21lbnRMb2FkZXIuIFRoaXMgaXMgYmVjYXVzZSBhXG4gKiBjaGFuZ2Ugb2YgZ3JvdXAgaXMgbWVyZWx5IGEgcmVuZGl0aW9uIHN3aXRjaCBvZiB0aGUgc2FtZSBjb250ZW50IGF0IGFub3RoZXIgZW5jb2RpbmcsXG4gKiByYXRoZXIgdGhhbiBhIGNoYW5nZSBvZiBjb250ZW50LCBzdWNoIGFzIHN3aXRjaGluZyBhdWRpbyBmcm9tIEVuZ2xpc2ggdG8gU3BhbmlzaC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogICAgICAgIE1lZGlhR3JvdXAgdHlwZVxuICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzXG4gKiAgICAgICAgT2JqZWN0IGNvbnRhaW5pbmcgcmVxdWlyZWQgaW5mb3JtYXRpb24gZm9yIG1lZGlhIGdyb3Vwc1xuICogQHJldHVybiB7RnVuY3Rpb259XG4gKiAgICAgICAgIEhhbmRsZXIgZm9yIGEgbm9uLWRlc3RydWN0aXZlIHJlc3luYyBvZiBTZWdtZW50TG9hZGVyIHdoZW4gdGhlIGFjdGl2ZSBtZWRpYVxuICogICAgICAgICBncm91cCBjaGFuZ2VzLlxuICogQGZ1bmN0aW9uIG9uR3JvdXBDaGFuZ2VkXG4gKi9cblxuXG52YXIgb25Hcm91cENoYW5nZWQgPSBmdW5jdGlvbiBvbkdyb3VwQ2hhbmdlZCh0eXBlLCBzZXR0aW5ncykge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBfc2V0dGluZ3Mkc2VnbWVudExvYWQgPSBzZXR0aW5ncy5zZWdtZW50TG9hZGVycyxcbiAgICAgICAgc2VnbWVudExvYWRlciA9IF9zZXR0aW5ncyRzZWdtZW50TG9hZFt0eXBlXSxcbiAgICAgICAgbWFpblNlZ21lbnRMb2FkZXIgPSBfc2V0dGluZ3Mkc2VnbWVudExvYWQubWFpbixcbiAgICAgICAgbWVkaWFUeXBlID0gc2V0dGluZ3MubWVkaWFUeXBlc1t0eXBlXTtcbiAgICB2YXIgYWN0aXZlVHJhY2sgPSBtZWRpYVR5cGUuYWN0aXZlVHJhY2soKTtcbiAgICB2YXIgYWN0aXZlR3JvdXAgPSBtZWRpYVR5cGUuYWN0aXZlR3JvdXAoYWN0aXZlVHJhY2spO1xuICAgIHZhciBwcmV2aW91c0FjdGl2ZUxvYWRlciA9IG1lZGlhVHlwZS5hY3RpdmVQbGF5bGlzdExvYWRlcjtcbiAgICBzdG9wTG9hZGVycyhzZWdtZW50TG9hZGVyLCBtZWRpYVR5cGUpO1xuXG4gICAgaWYgKCFhY3RpdmVHcm91cCkge1xuICAgICAgLy8gdGhlcmUgaXMgbm8gZ3JvdXAgYWN0aXZlXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFhY3RpdmVHcm91cC5wbGF5bGlzdExvYWRlcikge1xuICAgICAgaWYgKHByZXZpb3VzQWN0aXZlTG9hZGVyKSB7XG4gICAgICAgIC8vIFRoZSBwcmV2aW91cyBncm91cCBoYWQgYSBwbGF5bGlzdCBsb2FkZXIgYnV0IHRoZSBuZXcgYWN0aXZlIGdyb3VwIGRvZXMgbm90XG4gICAgICAgIC8vIHRoaXMgbWVhbnMgd2UgYXJlIHN3aXRjaGluZyBmcm9tIGRlbXV4ZWQgdG8gbXV4ZWQgYXVkaW8uIEluIHRoaXMgY2FzZSB3ZSB3YW50IHRvXG4gICAgICAgIC8vIGRvIGEgZGVzdHJ1Y3RpdmUgcmVzZXQgb2YgdGhlIG1haW4gc2VnbWVudCBsb2FkZXIgYW5kIG5vdCByZXN0YXJ0IHRoZSBhdWRpb1xuICAgICAgICAvLyBsb2FkZXJzLlxuICAgICAgICBtYWluU2VnbWVudExvYWRlci5yZXNldEV2ZXJ5dGhpbmcoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gTm9uLWRlc3RydWN0aXZlIHJlc3luY1xuXG5cbiAgICBzZWdtZW50TG9hZGVyLnJlc3luY0xvYWRlcigpO1xuICAgIHN0YXJ0TG9hZGVycyhhY3RpdmVHcm91cC5wbGF5bGlzdExvYWRlciwgbWVkaWFUeXBlKTtcbiAgfTtcbn07XG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgbWVkaWEgdHJhY2sgY2hhbmdlcy4gSXQgcGVyZm9ybXMgYVxuICogZGVzdHJ1Y3RpdmUgcmVzZXQgb2YgdGhlIFNlZ21lbnRMb2FkZXIgdG8gZW5zdXJlIHdlIHN0YXJ0IGxvYWRpbmcgYXMgY2xvc2UgdG9cbiAqIGN1cnJlbnRUaW1lIGFzIHBvc3NpYmxlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiAgICAgICAgTWVkaWFHcm91cCB0eXBlXG4gKiBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3NcbiAqICAgICAgICBPYmplY3QgY29udGFpbmluZyByZXF1aXJlZCBpbmZvcm1hdGlvbiBmb3IgbWVkaWEgZ3JvdXBzXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqICAgICAgICAgSGFuZGxlciBmb3IgYSBkZXN0cnVjdGl2ZSByZXNldCBvZiBTZWdtZW50TG9hZGVyIHdoZW4gdGhlIGFjdGl2ZSBtZWRpYVxuICogICAgICAgICB0cmFjayBjaGFuZ2VzLlxuICogQGZ1bmN0aW9uIG9uVHJhY2tDaGFuZ2VkXG4gKi9cblxuXG52YXIgb25UcmFja0NoYW5nZWQgPSBmdW5jdGlvbiBvblRyYWNrQ2hhbmdlZCh0eXBlLCBzZXR0aW5ncykge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBfc2V0dGluZ3Mkc2VnbWVudExvYWQyID0gc2V0dGluZ3Muc2VnbWVudExvYWRlcnMsXG4gICAgICAgIHNlZ21lbnRMb2FkZXIgPSBfc2V0dGluZ3Mkc2VnbWVudExvYWQyW3R5cGVdLFxuICAgICAgICBtYWluU2VnbWVudExvYWRlciA9IF9zZXR0aW5ncyRzZWdtZW50TG9hZDIubWFpbixcbiAgICAgICAgbWVkaWFUeXBlID0gc2V0dGluZ3MubWVkaWFUeXBlc1t0eXBlXTtcbiAgICB2YXIgYWN0aXZlVHJhY2sgPSBtZWRpYVR5cGUuYWN0aXZlVHJhY2soKTtcbiAgICB2YXIgYWN0aXZlR3JvdXAgPSBtZWRpYVR5cGUuYWN0aXZlR3JvdXAoYWN0aXZlVHJhY2spO1xuICAgIHZhciBwcmV2aW91c0FjdGl2ZUxvYWRlciA9IG1lZGlhVHlwZS5hY3RpdmVQbGF5bGlzdExvYWRlcjtcbiAgICBzdG9wTG9hZGVycyhzZWdtZW50TG9hZGVyLCBtZWRpYVR5cGUpO1xuXG4gICAgaWYgKCFhY3RpdmVHcm91cCkge1xuICAgICAgLy8gdGhlcmUgaXMgbm8gZ3JvdXAgYWN0aXZlIHNvIHdlIGRvIG5vdCB3YW50IHRvIHJlc3RhcnQgbG9hZGVyc1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghYWN0aXZlR3JvdXAucGxheWxpc3RMb2FkZXIpIHtcbiAgICAgIC8vIHdoZW4gc3dpdGNoaW5nIGZyb20gZGVtdXhlZCBhdWRpby92aWRlbyB0byBtdXhlZCBhdWRpby92aWRlbyAobm90ZWQgYnkgbm8gcGxheWxpc3RcbiAgICAgIC8vIGxvYWRlciBmb3IgdGhlIGF1ZGlvIGdyb3VwKSwgd2Ugd2FudCB0byBkbyBhIGRlc3RydWN0aXZlIHJlc2V0IG9mIHRoZSBtYWluIHNlZ21lbnRcbiAgICAgIC8vIGxvYWRlciBhbmQgbm90IHJlc3RhcnQgdGhlIGF1ZGlvIGxvYWRlcnNcbiAgICAgIG1haW5TZWdtZW50TG9hZGVyLnJlc2V0RXZlcnl0aGluZygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChwcmV2aW91c0FjdGl2ZUxvYWRlciA9PT0gYWN0aXZlR3JvdXAucGxheWxpc3RMb2FkZXIpIHtcbiAgICAgIC8vIE5vdGhpbmcgaGFzIGFjdHVhbGx5IGNoYW5nZWQuIFRoaXMgY2FuIGhhcHBlbiBiZWNhdXNlIHRyYWNrIGNoYW5nZSBldmVudHMgY2FuIGZpcmVcbiAgICAgIC8vIG11bHRpcGxlIHRpbWVzIGZvciBhIFwic2luZ2xlXCIgY2hhbmdlLiBPbmUgZm9yIGVuYWJsaW5nIHRoZSBuZXcgYWN0aXZlIHRyYWNrLCBhbmRcbiAgICAgIC8vIG9uZSBmb3IgZGlzYWJsaW5nIHRoZSB0cmFjayB0aGF0IHdhcyBhY3RpdmVcbiAgICAgIHN0YXJ0TG9hZGVycyhhY3RpdmVHcm91cC5wbGF5bGlzdExvYWRlciwgbWVkaWFUeXBlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc2VnbWVudExvYWRlci50cmFjaykge1xuICAgICAgLy8gRm9yIFdlYlZUVCwgc2V0IHRoZSBuZXcgdGV4dCB0cmFjayBpbiB0aGUgc2VnbWVudGxvYWRlclxuICAgICAgc2VnbWVudExvYWRlci50cmFjayhhY3RpdmVUcmFjayk7XG4gICAgfSAvLyBkZXN0cnVjdGl2ZSByZXNldFxuXG5cbiAgICBzZWdtZW50TG9hZGVyLnJlc2V0RXZlcnl0aGluZygpO1xuICAgIHN0YXJ0TG9hZGVycyhhY3RpdmVHcm91cC5wbGF5bGlzdExvYWRlciwgbWVkaWFUeXBlKTtcbiAgfTtcbn07XG5cbnZhciBvbkVycm9yID0ge1xuICAvKipcbiAgICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIGEgU2VnbWVudExvYWRlciBvciBQbGF5bGlzdExvYWRlciBlbmNvdW50ZXJzXG4gICAqIGFuIGVycm9yLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICAgKiAgICAgICAgTWVkaWFHcm91cCB0eXBlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzZXR0aW5nc1xuICAgKiAgICAgICAgT2JqZWN0IGNvbnRhaW5pbmcgcmVxdWlyZWQgaW5mb3JtYXRpb24gZm9yIG1lZGlhIGdyb3Vwc1xuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICogICAgICAgICBFcnJvciBoYW5kbGVyLiBMb2dzIHdhcm5pbmcgKG9yIGVycm9yIGlmIHRoZSBwbGF5bGlzdCBpcyBibGFja2xpc3RlZCkgdG9cbiAgICogICAgICAgICBjb25zb2xlIGFuZCBzd2l0Y2hlcyBiYWNrIHRvIGRlZmF1bHQgYXVkaW8gdHJhY2suXG4gICAqIEBmdW5jdGlvbiBvbkVycm9yLkFVRElPXG4gICAqL1xuICBBVURJTzogZnVuY3Rpb24gQVVESU8odHlwZSwgc2V0dGluZ3MpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHNlZ21lbnRMb2FkZXIgPSBzZXR0aW5ncy5zZWdtZW50TG9hZGVyc1t0eXBlXSxcbiAgICAgICAgICBtZWRpYVR5cGUgPSBzZXR0aW5ncy5tZWRpYVR5cGVzW3R5cGVdLFxuICAgICAgICAgIGJsYWNrbGlzdEN1cnJlbnRQbGF5bGlzdCA9IHNldHRpbmdzLmJsYWNrbGlzdEN1cnJlbnRQbGF5bGlzdDtcbiAgICAgIHN0b3BMb2FkZXJzKHNlZ21lbnRMb2FkZXIsIG1lZGlhVHlwZSk7IC8vIHN3aXRjaCBiYWNrIHRvIGRlZmF1bHQgYXVkaW8gdHJhY2tcblxuICAgICAgdmFyIGFjdGl2ZVRyYWNrID0gbWVkaWFUeXBlLmFjdGl2ZVRyYWNrKCk7XG4gICAgICB2YXIgYWN0aXZlR3JvdXAgPSBtZWRpYVR5cGUuYWN0aXZlR3JvdXAoKTtcbiAgICAgIHZhciBpZCA9IChhY3RpdmVHcm91cC5maWx0ZXIoZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICAgIHJldHVybiBncm91cC5kZWZhdWx0O1xuICAgICAgfSlbMF0gfHwgYWN0aXZlR3JvdXBbMF0pLmlkO1xuICAgICAgdmFyIGRlZmF1bHRUcmFjayA9IG1lZGlhVHlwZS50cmFja3NbaWRdO1xuXG4gICAgICBpZiAoYWN0aXZlVHJhY2sgPT09IGRlZmF1bHRUcmFjaykge1xuICAgICAgICAvLyBEZWZhdWx0IHRyYWNrIGVuY291bnRlcmVkIGFuIGVycm9yLiBBbGwgd2UgY2FuIGRvIG5vdyBpcyBibGFja2xpc3QgdGhlIGN1cnJlbnRcbiAgICAgICAgLy8gcmVuZGl0aW9uIGFuZCBob3BlIGFub3RoZXIgd2lsbCBzd2l0Y2ggYXVkaW8gZ3JvdXBzXG4gICAgICAgIGJsYWNrbGlzdEN1cnJlbnRQbGF5bGlzdCh7XG4gICAgICAgICAgbWVzc2FnZTogJ1Byb2JsZW0gZW5jb3VudGVyZWQgbG9hZGluZyB0aGUgZGVmYXVsdCBhdWRpbyB0cmFjay4nXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZpZGVvanMkMS5sb2cud2FybignUHJvYmxlbSBlbmNvdW50ZXJlZCBsb2FkaW5nIHRoZSBhbHRlcm5hdGUgYXVkaW8gdHJhY2suJyArICdTd2l0Y2hpbmcgYmFjayB0byBkZWZhdWx0LicpO1xuXG4gICAgICBmb3IgKHZhciB0cmFja0lkIGluIG1lZGlhVHlwZS50cmFja3MpIHtcbiAgICAgICAgbWVkaWFUeXBlLnRyYWNrc1t0cmFja0lkXS5lbmFibGVkID0gbWVkaWFUeXBlLnRyYWNrc1t0cmFja0lkXSA9PT0gZGVmYXVsdFRyYWNrO1xuICAgICAgfVxuXG4gICAgICBtZWRpYVR5cGUub25UcmFja0NoYW5nZWQoKTtcbiAgICB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gYSBTZWdtZW50TG9hZGVyIG9yIFBsYXlsaXN0TG9hZGVyIGVuY291bnRlcnNcbiAgICogYW4gZXJyb3IuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gICAqICAgICAgICBNZWRpYUdyb3VwIHR5cGVcbiAgICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzXG4gICAqICAgICAgICBPYmplY3QgY29udGFpbmluZyByZXF1aXJlZCBpbmZvcm1hdGlvbiBmb3IgbWVkaWEgZ3JvdXBzXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKiAgICAgICAgIEVycm9yIGhhbmRsZXIuIExvZ3Mgd2FybmluZyB0byBjb25zb2xlIGFuZCBkaXNhYmxlcyB0aGUgYWN0aXZlIHN1YnRpdGxlIHRyYWNrXG4gICAqIEBmdW5jdGlvbiBvbkVycm9yLlNVQlRJVExFU1xuICAgKi9cbiAgU1VCVElUTEVTOiBmdW5jdGlvbiBTVUJUSVRMRVModHlwZSwgc2V0dGluZ3MpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHNlZ21lbnRMb2FkZXIgPSBzZXR0aW5ncy5zZWdtZW50TG9hZGVyc1t0eXBlXSxcbiAgICAgICAgICBtZWRpYVR5cGUgPSBzZXR0aW5ncy5tZWRpYVR5cGVzW3R5cGVdO1xuICAgICAgdmlkZW9qcyQxLmxvZy53YXJuKCdQcm9ibGVtIGVuY291bnRlcmVkIGxvYWRpbmcgdGhlIHN1YnRpdGxlIHRyYWNrLicgKyAnRGlzYWJsaW5nIHN1YnRpdGxlIHRyYWNrLicpO1xuICAgICAgc3RvcExvYWRlcnMoc2VnbWVudExvYWRlciwgbWVkaWFUeXBlKTtcbiAgICAgIHZhciB0cmFjayA9IG1lZGlhVHlwZS5hY3RpdmVUcmFjaygpO1xuXG4gICAgICBpZiAodHJhY2spIHtcbiAgICAgICAgdHJhY2subW9kZSA9ICdkaXNhYmxlZCc7XG4gICAgICB9XG5cbiAgICAgIG1lZGlhVHlwZS5vblRyYWNrQ2hhbmdlZCgpO1xuICAgIH07XG4gIH1cbn07XG52YXIgc2V0dXBMaXN0ZW5lcnMgPSB7XG4gIC8qKlxuICAgKiBTZXR1cCBldmVudCBsaXN0ZW5lcnMgZm9yIGF1ZGlvIHBsYXlsaXN0IGxvYWRlclxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICAgKiAgICAgICAgTWVkaWFHcm91cCB0eXBlXG4gICAqIEBwYXJhbSB7UGxheWxpc3RMb2FkZXJ8bnVsbH0gcGxheWxpc3RMb2FkZXJcbiAgICogICAgICAgIFBsYXlsaXN0TG9hZGVyIHRvIHJlZ2lzdGVyIGxpc3RlbmVycyBvblxuICAgKiBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3NcbiAgICogICAgICAgIE9iamVjdCBjb250YWluaW5nIHJlcXVpcmVkIGluZm9ybWF0aW9uIGZvciBtZWRpYSBncm91cHNcbiAgICogQGZ1bmN0aW9uIHNldHVwTGlzdGVuZXJzLkFVRElPXG4gICAqL1xuICBBVURJTzogZnVuY3Rpb24gQVVESU8odHlwZSwgcGxheWxpc3RMb2FkZXIsIHNldHRpbmdzKSB7XG4gICAgaWYgKCFwbGF5bGlzdExvYWRlcikge1xuICAgICAgLy8gbm8gcGxheWxpc3QgbG9hZGVyIG1lYW5zIGF1ZGlvIHdpbGwgYmUgbXV4ZWQgd2l0aCB0aGUgdmlkZW9cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdGVjaCA9IHNldHRpbmdzLnRlY2gsXG4gICAgICAgIHJlcXVlc3RPcHRpb25zID0gc2V0dGluZ3MucmVxdWVzdE9wdGlvbnMsXG4gICAgICAgIHNlZ21lbnRMb2FkZXIgPSBzZXR0aW5ncy5zZWdtZW50TG9hZGVyc1t0eXBlXTtcbiAgICBwbGF5bGlzdExvYWRlci5vbignbG9hZGVkbWV0YWRhdGEnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbWVkaWEgPSBwbGF5bGlzdExvYWRlci5tZWRpYSgpO1xuICAgICAgc2VnbWVudExvYWRlci5wbGF5bGlzdChtZWRpYSwgcmVxdWVzdE9wdGlvbnMpOyAvLyBpZiB0aGUgdmlkZW8gaXMgYWxyZWFkeSBwbGF5aW5nLCBvciBpZiB0aGlzIGlzbid0IGEgbGl2ZSB2aWRlbyBhbmQgcHJlbG9hZFxuICAgICAgLy8gcGVybWl0cywgc3RhcnQgZG93bmxvYWRpbmcgc2VnbWVudHNcblxuICAgICAgaWYgKCF0ZWNoLnBhdXNlZCgpIHx8IG1lZGlhLmVuZExpc3QgJiYgdGVjaC5wcmVsb2FkKCkgIT09ICdub25lJykge1xuICAgICAgICBzZWdtZW50TG9hZGVyLmxvYWQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBwbGF5bGlzdExvYWRlci5vbignbG9hZGVkcGxheWxpc3QnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzZWdtZW50TG9hZGVyLnBsYXlsaXN0KHBsYXlsaXN0TG9hZGVyLm1lZGlhKCksIHJlcXVlc3RPcHRpb25zKTsgLy8gSWYgdGhlIHBsYXllciBpc24ndCBwYXVzZWQsIGVuc3VyZSB0aGF0IHRoZSBzZWdtZW50IGxvYWRlciBpcyBydW5uaW5nXG5cbiAgICAgIGlmICghdGVjaC5wYXVzZWQoKSkge1xuICAgICAgICBzZWdtZW50TG9hZGVyLmxvYWQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBwbGF5bGlzdExvYWRlci5vbignZXJyb3InLCBvbkVycm9yW3R5cGVdKHR5cGUsIHNldHRpbmdzKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHVwIGV2ZW50IGxpc3RlbmVycyBmb3Igc3VidGl0bGUgcGxheWxpc3QgbG9hZGVyXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gICAqICAgICAgICBNZWRpYUdyb3VwIHR5cGVcbiAgICogQHBhcmFtIHtQbGF5bGlzdExvYWRlcnxudWxsfSBwbGF5bGlzdExvYWRlclxuICAgKiAgICAgICAgUGxheWxpc3RMb2FkZXIgdG8gcmVnaXN0ZXIgbGlzdGVuZXJzIG9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzZXR0aW5nc1xuICAgKiAgICAgICAgT2JqZWN0IGNvbnRhaW5pbmcgcmVxdWlyZWQgaW5mb3JtYXRpb24gZm9yIG1lZGlhIGdyb3Vwc1xuICAgKiBAZnVuY3Rpb24gc2V0dXBMaXN0ZW5lcnMuU1VCVElUTEVTXG4gICAqL1xuICBTVUJUSVRMRVM6IGZ1bmN0aW9uIFNVQlRJVExFUyh0eXBlLCBwbGF5bGlzdExvYWRlciwgc2V0dGluZ3MpIHtcbiAgICB2YXIgdGVjaCA9IHNldHRpbmdzLnRlY2gsXG4gICAgICAgIHJlcXVlc3RPcHRpb25zID0gc2V0dGluZ3MucmVxdWVzdE9wdGlvbnMsXG4gICAgICAgIHNlZ21lbnRMb2FkZXIgPSBzZXR0aW5ncy5zZWdtZW50TG9hZGVyc1t0eXBlXSxcbiAgICAgICAgbWVkaWFUeXBlID0gc2V0dGluZ3MubWVkaWFUeXBlc1t0eXBlXTtcbiAgICBwbGF5bGlzdExvYWRlci5vbignbG9hZGVkbWV0YWRhdGEnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbWVkaWEgPSBwbGF5bGlzdExvYWRlci5tZWRpYSgpO1xuICAgICAgc2VnbWVudExvYWRlci5wbGF5bGlzdChtZWRpYSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgc2VnbWVudExvYWRlci50cmFjayhtZWRpYVR5cGUuYWN0aXZlVHJhY2soKSk7IC8vIGlmIHRoZSB2aWRlbyBpcyBhbHJlYWR5IHBsYXlpbmcsIG9yIGlmIHRoaXMgaXNuJ3QgYSBsaXZlIHZpZGVvIGFuZCBwcmVsb2FkXG4gICAgICAvLyBwZXJtaXRzLCBzdGFydCBkb3dubG9hZGluZyBzZWdtZW50c1xuXG4gICAgICBpZiAoIXRlY2gucGF1c2VkKCkgfHwgbWVkaWEuZW5kTGlzdCAmJiB0ZWNoLnByZWxvYWQoKSAhPT0gJ25vbmUnKSB7XG4gICAgICAgIHNlZ21lbnRMb2FkZXIubG9hZCgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHBsYXlsaXN0TG9hZGVyLm9uKCdsb2FkZWRwbGF5bGlzdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlZ21lbnRMb2FkZXIucGxheWxpc3QocGxheWxpc3RMb2FkZXIubWVkaWEoKSwgcmVxdWVzdE9wdGlvbnMpOyAvLyBJZiB0aGUgcGxheWVyIGlzbid0IHBhdXNlZCwgZW5zdXJlIHRoYXQgdGhlIHNlZ21lbnQgbG9hZGVyIGlzIHJ1bm5pbmdcblxuICAgICAgaWYgKCF0ZWNoLnBhdXNlZCgpKSB7XG4gICAgICAgIHNlZ21lbnRMb2FkZXIubG9hZCgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHBsYXlsaXN0TG9hZGVyLm9uKCdlcnJvcicsIG9uRXJyb3JbdHlwZV0odHlwZSwgc2V0dGluZ3MpKTtcbiAgfVxufTtcblxudmFyIGJ5R3JvdXBJZCA9IGZ1bmN0aW9uIGJ5R3JvdXBJZCh0eXBlLCBncm91cElkKSB7XG4gIHJldHVybiBmdW5jdGlvbiAocGxheWxpc3QpIHtcbiAgICByZXR1cm4gcGxheWxpc3QuYXR0cmlidXRlc1t0eXBlXSA9PT0gZ3JvdXBJZDtcbiAgfTtcbn07XG5cbnZhciBieVJlc29sdmVkVXJpID0gZnVuY3Rpb24gYnlSZXNvbHZlZFVyaShyZXNvbHZlZFVyaSkge1xuICByZXR1cm4gZnVuY3Rpb24gKHBsYXlsaXN0KSB7XG4gICAgcmV0dXJuIHBsYXlsaXN0LnJlc29sdmVkVXJpID09PSByZXNvbHZlZFVyaTtcbiAgfTtcbn07XG5cbnZhciBpbml0aWFsaXplID0ge1xuICAvKipcbiAgICogU2V0dXAgUGxheWxpc3RMb2FkZXJzIGFuZCBBdWRpb1RyYWNrcyBmb3IgdGhlIGF1ZGlvIGdyb3Vwc1xuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICAgKiAgICAgICAgTWVkaWFHcm91cCB0eXBlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzZXR0aW5nc1xuICAgKiAgICAgICAgT2JqZWN0IGNvbnRhaW5pbmcgcmVxdWlyZWQgaW5mb3JtYXRpb24gZm9yIG1lZGlhIGdyb3Vwc1xuICAgKiBAZnVuY3Rpb24gaW5pdGlhbGl6ZS5BVURJT1xuICAgKi9cbiAgJ0FVRElPJzogZnVuY3Rpb24gQVVESU8odHlwZSwgc2V0dGluZ3MpIHtcbiAgICB2YXIgaGxzID0gc2V0dGluZ3MuaGxzLFxuICAgICAgICBzb3VyY2VUeXBlID0gc2V0dGluZ3Muc291cmNlVHlwZSxcbiAgICAgICAgc2VnbWVudExvYWRlciA9IHNldHRpbmdzLnNlZ21lbnRMb2FkZXJzW3R5cGVdLFxuICAgICAgICByZXF1ZXN0T3B0aW9ucyA9IHNldHRpbmdzLnJlcXVlc3RPcHRpb25zLFxuICAgICAgICBfc2V0dGluZ3MkbWFzdGVyID0gc2V0dGluZ3MubWFzdGVyLFxuICAgICAgICBtZWRpYUdyb3VwcyA9IF9zZXR0aW5ncyRtYXN0ZXIubWVkaWFHcm91cHMsXG4gICAgICAgIHBsYXlsaXN0cyA9IF9zZXR0aW5ncyRtYXN0ZXIucGxheWxpc3RzLFxuICAgICAgICBfc2V0dGluZ3MkbWVkaWFUeXBlcyQgPSBzZXR0aW5ncy5tZWRpYVR5cGVzW3R5cGVdLFxuICAgICAgICBncm91cHMgPSBfc2V0dGluZ3MkbWVkaWFUeXBlcyQuZ3JvdXBzLFxuICAgICAgICB0cmFja3MgPSBfc2V0dGluZ3MkbWVkaWFUeXBlcyQudHJhY2tzLFxuICAgICAgICBtYXN0ZXJQbGF5bGlzdExvYWRlciA9IHNldHRpbmdzLm1hc3RlclBsYXlsaXN0TG9hZGVyOyAvLyBmb3JjZSBhIGRlZmF1bHQgaWYgd2UgaGF2ZSBub25lXG5cbiAgICBpZiAoIW1lZGlhR3JvdXBzW3R5cGVdIHx8IE9iamVjdC5rZXlzKG1lZGlhR3JvdXBzW3R5cGVdKS5sZW5ndGggPT09IDApIHtcbiAgICAgIG1lZGlhR3JvdXBzW3R5cGVdID0ge1xuICAgICAgICBtYWluOiB7XG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBncm91cElkIGluIG1lZGlhR3JvdXBzW3R5cGVdKSB7XG4gICAgICBpZiAoIWdyb3Vwc1tncm91cElkXSkge1xuICAgICAgICBncm91cHNbZ3JvdXBJZF0gPSBbXTtcbiAgICAgIH0gLy8gTGlzdCBvZiBwbGF5bGlzdHMgdGhhdCBoYXZlIGFuIEFVRElPIGF0dHJpYnV0ZSB2YWx1ZSBtYXRjaGluZyB0aGUgY3VycmVudFxuICAgICAgLy8gZ3JvdXAgSURcblxuXG4gICAgICB2YXIgZ3JvdXBQbGF5bGlzdHMgPSBwbGF5bGlzdHMuZmlsdGVyKGJ5R3JvdXBJZCh0eXBlLCBncm91cElkKSk7XG5cbiAgICAgIGZvciAodmFyIHZhcmlhbnRMYWJlbCBpbiBtZWRpYUdyb3Vwc1t0eXBlXVtncm91cElkXSkge1xuICAgICAgICB2YXIgcHJvcGVydGllcyA9IG1lZGlhR3JvdXBzW3R5cGVdW2dyb3VwSWRdW3ZhcmlhbnRMYWJlbF07IC8vIExpc3Qgb2YgcGxheWxpc3RzIGZvciB0aGUgY3VycmVudCBncm91cCBJRCB0aGF0IGhhdmUgYSBtYXRjaGluZyB1cmkgd2l0aFxuICAgICAgICAvLyB0aGlzIGFsdGVybmF0ZSBhdWRpbyB2YXJpYW50XG5cbiAgICAgICAgdmFyIG1hdGNoaW5nUGxheWxpc3RzID0gZ3JvdXBQbGF5bGlzdHMuZmlsdGVyKGJ5UmVzb2x2ZWRVcmkocHJvcGVydGllcy5yZXNvbHZlZFVyaSkpO1xuXG4gICAgICAgIGlmIChtYXRjaGluZ1BsYXlsaXN0cy5sZW5ndGgpIHtcbiAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIHBsYXlsaXN0IHRoYXQgaGFzIHRoZSBzYW1lIHVyaSBhcyB0aGlzIGF1ZGlvIHZhcmlhbnQsIGFzc3VtZVxuICAgICAgICAgIC8vIHRoYXQgdGhlIHBsYXlsaXN0IGlzIGF1ZGlvIG9ubHkuIFdlIGRlbGV0ZSB0aGUgcmVzb2x2ZWRVcmkgcHJvcGVydHkgaGVyZVxuICAgICAgICAgIC8vIHRvIHByZXZlbnQgYSBwbGF5bGlzdCBsb2FkZXIgZnJvbSBiZWluZyBjcmVhdGVkIHNvIHRoYXQgd2UgZG9uJ3QgaGF2ZVxuICAgICAgICAgIC8vIGJvdGggdGhlIG1haW4gYW5kIGF1ZGlvIHNlZ21lbnQgbG9hZGVycyBsb2FkaW5nIHRoZSBzYW1lIGF1ZGlvIHNlZ21lbnRzXG4gICAgICAgICAgLy8gZnJvbSB0aGUgc2FtZSBwbGF5bGlzdC5cbiAgICAgICAgICBkZWxldGUgcHJvcGVydGllcy5yZXNvbHZlZFVyaTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwbGF5bGlzdExvYWRlciA9IHZvaWQgMDtcblxuICAgICAgICBpZiAocHJvcGVydGllcy5yZXNvbHZlZFVyaSkge1xuICAgICAgICAgIHBsYXlsaXN0TG9hZGVyID0gbmV3IFBsYXlsaXN0TG9hZGVyKHByb3BlcnRpZXMucmVzb2x2ZWRVcmksIGhscywgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnRpZXMucGxheWxpc3RzICYmIHNvdXJjZVR5cGUgPT09ICdkYXNoJykge1xuICAgICAgICAgIHBsYXlsaXN0TG9hZGVyID0gbmV3IERhc2hQbGF5bGlzdExvYWRlcihwcm9wZXJ0aWVzLnBsYXlsaXN0c1swXSwgaGxzLCByZXF1ZXN0T3B0aW9ucywgbWFzdGVyUGxheWxpc3RMb2FkZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG5vIHJlc29sdmVkVXJpIG1lYW5zIHRoZSBhdWRpbyBpcyBtdXhlZCB3aXRoIHRoZSB2aWRlbyB3aGVuIHVzaW5nIHRoaXNcbiAgICAgICAgICAvLyBhdWRpbyB0cmFja1xuICAgICAgICAgIHBsYXlsaXN0TG9hZGVyID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3BlcnRpZXMgPSB2aWRlb2pzJDEubWVyZ2VPcHRpb25zKHtcbiAgICAgICAgICBpZDogdmFyaWFudExhYmVsLFxuICAgICAgICAgIHBsYXlsaXN0TG9hZGVyOiBwbGF5bGlzdExvYWRlclxuICAgICAgICB9LCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgc2V0dXBMaXN0ZW5lcnNbdHlwZV0odHlwZSwgcHJvcGVydGllcy5wbGF5bGlzdExvYWRlciwgc2V0dGluZ3MpO1xuICAgICAgICBncm91cHNbZ3JvdXBJZF0ucHVzaChwcm9wZXJ0aWVzKTtcblxuICAgICAgICBpZiAodHlwZW9mIHRyYWNrc1t2YXJpYW50TGFiZWxdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHZhciB0cmFjayA9IG5ldyB2aWRlb2pzJDEuQXVkaW9UcmFjayh7XG4gICAgICAgICAgICBpZDogdmFyaWFudExhYmVsLFxuICAgICAgICAgICAga2luZDogYXVkaW9UcmFja0tpbmRfKHByb3BlcnRpZXMpLFxuICAgICAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICBsYW5ndWFnZTogcHJvcGVydGllcy5sYW5ndWFnZSxcbiAgICAgICAgICAgIGRlZmF1bHQ6IHByb3BlcnRpZXMuZGVmYXVsdCxcbiAgICAgICAgICAgIGxhYmVsOiB2YXJpYW50TGFiZWxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0cmFja3NbdmFyaWFudExhYmVsXSA9IHRyYWNrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBzZXR1cCBzaW5nbGUgZXJyb3IgZXZlbnQgaGFuZGxlciBmb3IgdGhlIHNlZ21lbnQgbG9hZGVyXG5cblxuICAgIHNlZ21lbnRMb2FkZXIub24oJ2Vycm9yJywgb25FcnJvclt0eXBlXSh0eXBlLCBzZXR0aW5ncykpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXR1cCBQbGF5bGlzdExvYWRlcnMgYW5kIFRleHRUcmFja3MgZm9yIHRoZSBzdWJ0aXRsZSBncm91cHNcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAgICogICAgICAgIE1lZGlhR3JvdXAgdHlwZVxuICAgKiBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3NcbiAgICogICAgICAgIE9iamVjdCBjb250YWluaW5nIHJlcXVpcmVkIGluZm9ybWF0aW9uIGZvciBtZWRpYSBncm91cHNcbiAgICogQGZ1bmN0aW9uIGluaXRpYWxpemUuU1VCVElUTEVTXG4gICAqL1xuICAnU1VCVElUTEVTJzogZnVuY3Rpb24gU1VCVElUTEVTKHR5cGUsIHNldHRpbmdzKSB7XG4gICAgdmFyIHRlY2ggPSBzZXR0aW5ncy50ZWNoLFxuICAgICAgICBobHMgPSBzZXR0aW5ncy5obHMsXG4gICAgICAgIHNvdXJjZVR5cGUgPSBzZXR0aW5ncy5zb3VyY2VUeXBlLFxuICAgICAgICBzZWdtZW50TG9hZGVyID0gc2V0dGluZ3Muc2VnbWVudExvYWRlcnNbdHlwZV0sXG4gICAgICAgIHJlcXVlc3RPcHRpb25zID0gc2V0dGluZ3MucmVxdWVzdE9wdGlvbnMsXG4gICAgICAgIG1lZGlhR3JvdXBzID0gc2V0dGluZ3MubWFzdGVyLm1lZGlhR3JvdXBzLFxuICAgICAgICBfc2V0dGluZ3MkbWVkaWFUeXBlcyQyID0gc2V0dGluZ3MubWVkaWFUeXBlc1t0eXBlXSxcbiAgICAgICAgZ3JvdXBzID0gX3NldHRpbmdzJG1lZGlhVHlwZXMkMi5ncm91cHMsXG4gICAgICAgIHRyYWNrcyA9IF9zZXR0aW5ncyRtZWRpYVR5cGVzJDIudHJhY2tzLFxuICAgICAgICBtYXN0ZXJQbGF5bGlzdExvYWRlciA9IHNldHRpbmdzLm1hc3RlclBsYXlsaXN0TG9hZGVyO1xuXG4gICAgZm9yICh2YXIgZ3JvdXBJZCBpbiBtZWRpYUdyb3Vwc1t0eXBlXSkge1xuICAgICAgaWYgKCFncm91cHNbZ3JvdXBJZF0pIHtcbiAgICAgICAgZ3JvdXBzW2dyb3VwSWRdID0gW107XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIHZhcmlhbnRMYWJlbCBpbiBtZWRpYUdyb3Vwc1t0eXBlXVtncm91cElkXSkge1xuICAgICAgICBpZiAobWVkaWFHcm91cHNbdHlwZV1bZ3JvdXBJZF1bdmFyaWFudExhYmVsXS5mb3JjZWQpIHtcbiAgICAgICAgICAvLyBTdWJ0aXRsZSBwbGF5bGlzdHMgd2l0aCB0aGUgZm9yY2VkIGF0dHJpYnV0ZSBhcmUgbm90IHNlbGVjdGFibGUgaW4gU2FmYXJpLlxuICAgICAgICAgIC8vIEFjY29yZGluZyB0byBBcHBsZSdzIEhMUyBBdXRob3JpbmcgU3BlY2lmaWNhdGlvbjpcbiAgICAgICAgICAvLyAgIElmIGNvbnRlbnQgaGFzIGZvcmNlZCBzdWJ0aXRsZXMgYW5kIHJlZ3VsYXIgc3VidGl0bGVzIGluIGEgZ2l2ZW4gbGFuZ3VhZ2UsXG4gICAgICAgICAgLy8gICB0aGUgcmVndWxhciBzdWJ0aXRsZXMgdHJhY2sgaW4gdGhhdCBsYW5ndWFnZSBNVVNUIGNvbnRhaW4gYm90aCB0aGUgZm9yY2VkXG4gICAgICAgICAgLy8gICBzdWJ0aXRsZXMgYW5kIHRoZSByZWd1bGFyIHN1YnRpdGxlcyBmb3IgdGhhdCBsYW5ndWFnZS5cbiAgICAgICAgICAvLyBCZWNhdXNlIG9mIHRoaXMgcmVxdWlyZW1lbnQgYW5kIHRoYXQgU2FmYXJpIGRvZXMgbm90IGFkZCBmb3JjZWQgc3VidGl0bGVzLFxuICAgICAgICAgIC8vIGZvcmNlZCBzdWJ0aXRsZXMgYXJlIHNraXBwZWQgaGVyZSB0byBtYWludGFpbiBjb25zaXN0ZW50IGV4cGVyaWVuY2UgYWNyb3NzXG4gICAgICAgICAgLy8gYWxsIHBsYXRmb3Jtc1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBtZWRpYUdyb3Vwc1t0eXBlXVtncm91cElkXVt2YXJpYW50TGFiZWxdO1xuICAgICAgICB2YXIgcGxheWxpc3RMb2FkZXIgPSB2b2lkIDA7XG5cbiAgICAgICAgaWYgKHNvdXJjZVR5cGUgPT09ICdobHMnKSB7XG4gICAgICAgICAgcGxheWxpc3RMb2FkZXIgPSBuZXcgUGxheWxpc3RMb2FkZXIocHJvcGVydGllcy5yZXNvbHZlZFVyaSwgaGxzLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSBpZiAoc291cmNlVHlwZSA9PT0gJ2Rhc2gnKSB7XG4gICAgICAgICAgcGxheWxpc3RMb2FkZXIgPSBuZXcgRGFzaFBsYXlsaXN0TG9hZGVyKHByb3BlcnRpZXMucGxheWxpc3RzWzBdLCBobHMsIHJlcXVlc3RPcHRpb25zLCBtYXN0ZXJQbGF5bGlzdExvYWRlcik7XG4gICAgICAgIH1cblxuICAgICAgICBwcm9wZXJ0aWVzID0gdmlkZW9qcyQxLm1lcmdlT3B0aW9ucyh7XG4gICAgICAgICAgaWQ6IHZhcmlhbnRMYWJlbCxcbiAgICAgICAgICBwbGF5bGlzdExvYWRlcjogcGxheWxpc3RMb2FkZXJcbiAgICAgICAgfSwgcHJvcGVydGllcyk7XG4gICAgICAgIHNldHVwTGlzdGVuZXJzW3R5cGVdKHR5cGUsIHByb3BlcnRpZXMucGxheWxpc3RMb2FkZXIsIHNldHRpbmdzKTtcbiAgICAgICAgZ3JvdXBzW2dyb3VwSWRdLnB1c2gocHJvcGVydGllcyk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiB0cmFja3NbdmFyaWFudExhYmVsXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB2YXIgdHJhY2sgPSB0ZWNoLmFkZFJlbW90ZVRleHRUcmFjayh7XG4gICAgICAgICAgICBpZDogdmFyaWFudExhYmVsLFxuICAgICAgICAgICAga2luZDogJ3N1YnRpdGxlcycsXG4gICAgICAgICAgICBkZWZhdWx0OiBwcm9wZXJ0aWVzLmRlZmF1bHQgJiYgcHJvcGVydGllcy5hdXRvc2VsZWN0LFxuICAgICAgICAgICAgbGFuZ3VhZ2U6IHByb3BlcnRpZXMubGFuZ3VhZ2UsXG4gICAgICAgICAgICBsYWJlbDogdmFyaWFudExhYmVsXG4gICAgICAgICAgfSwgZmFsc2UpLnRyYWNrO1xuICAgICAgICAgIHRyYWNrc1t2YXJpYW50TGFiZWxdID0gdHJhY2s7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIHNldHVwIHNpbmdsZSBlcnJvciBldmVudCBoYW5kbGVyIGZvciB0aGUgc2VnbWVudCBsb2FkZXJcblxuXG4gICAgc2VnbWVudExvYWRlci5vbignZXJyb3InLCBvbkVycm9yW3R5cGVdKHR5cGUsIHNldHRpbmdzKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHVwIFRleHRUcmFja3MgZm9yIHRoZSBjbG9zZWQtY2FwdGlvbiBncm91cHNcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAgICogICAgICAgIE1lZGlhR3JvdXAgdHlwZVxuICAgKiBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3NcbiAgICogICAgICAgIE9iamVjdCBjb250YWluaW5nIHJlcXVpcmVkIGluZm9ybWF0aW9uIGZvciBtZWRpYSBncm91cHNcbiAgICogQGZ1bmN0aW9uIGluaXRpYWxpemVbJ0NMT1NFRC1DQVBUSU9OUyddXG4gICAqL1xuICAnQ0xPU0VELUNBUFRJT05TJzogZnVuY3Rpb24gQ0xPU0VEQ0FQVElPTlModHlwZSwgc2V0dGluZ3MpIHtcbiAgICB2YXIgdGVjaCA9IHNldHRpbmdzLnRlY2gsXG4gICAgICAgIG1lZGlhR3JvdXBzID0gc2V0dGluZ3MubWFzdGVyLm1lZGlhR3JvdXBzLFxuICAgICAgICBfc2V0dGluZ3MkbWVkaWFUeXBlcyQzID0gc2V0dGluZ3MubWVkaWFUeXBlc1t0eXBlXSxcbiAgICAgICAgZ3JvdXBzID0gX3NldHRpbmdzJG1lZGlhVHlwZXMkMy5ncm91cHMsXG4gICAgICAgIHRyYWNrcyA9IF9zZXR0aW5ncyRtZWRpYVR5cGVzJDMudHJhY2tzO1xuXG4gICAgZm9yICh2YXIgZ3JvdXBJZCBpbiBtZWRpYUdyb3Vwc1t0eXBlXSkge1xuICAgICAgaWYgKCFncm91cHNbZ3JvdXBJZF0pIHtcbiAgICAgICAgZ3JvdXBzW2dyb3VwSWRdID0gW107XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIHZhcmlhbnRMYWJlbCBpbiBtZWRpYUdyb3Vwc1t0eXBlXVtncm91cElkXSkge1xuICAgICAgICB2YXIgcHJvcGVydGllcyA9IG1lZGlhR3JvdXBzW3R5cGVdW2dyb3VwSWRdW3ZhcmlhbnRMYWJlbF07IC8vIFdlIG9ubHkgc3VwcG9ydCBDRUE2MDggY2FwdGlvbnMgZm9yIG5vdywgc28gaWdub3JlIGFueXRoaW5nIHRoYXRcbiAgICAgICAgLy8gZG9lc24ndCB1c2UgYSBDQ3ggSU5TVFJFQU0tSURcblxuICAgICAgICBpZiAoIXByb3BlcnRpZXMuaW5zdHJlYW1JZC5tYXRjaCgvQ0NcXGQvKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9IC8vIE5vIFBsYXlsaXN0TG9hZGVyIGlzIHJlcXVpcmVkIGZvciBDbG9zZWQtQ2FwdGlvbnMgYmVjYXVzZSB0aGUgY2FwdGlvbnMgYXJlXG4gICAgICAgIC8vIGVtYmVkZGVkIHdpdGhpbiB0aGUgdmlkZW8gc3RyZWFtXG5cblxuICAgICAgICBncm91cHNbZ3JvdXBJZF0ucHVzaCh2aWRlb2pzJDEubWVyZ2VPcHRpb25zKHtcbiAgICAgICAgICBpZDogdmFyaWFudExhYmVsXG4gICAgICAgIH0sIHByb3BlcnRpZXMpKTtcblxuICAgICAgICBpZiAodHlwZW9mIHRyYWNrc1t2YXJpYW50TGFiZWxdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHZhciB0cmFjayA9IHRlY2guYWRkUmVtb3RlVGV4dFRyYWNrKHtcbiAgICAgICAgICAgIGlkOiBwcm9wZXJ0aWVzLmluc3RyZWFtSWQsXG4gICAgICAgICAgICBraW5kOiAnY2FwdGlvbnMnLFxuICAgICAgICAgICAgZGVmYXVsdDogcHJvcGVydGllcy5kZWZhdWx0ICYmIHByb3BlcnRpZXMuYXV0b3NlbGVjdCxcbiAgICAgICAgICAgIGxhbmd1YWdlOiBwcm9wZXJ0aWVzLmxhbmd1YWdlLFxuICAgICAgICAgICAgbGFiZWw6IHZhcmlhbnRMYWJlbFxuICAgICAgICAgIH0sIGZhbHNlKS50cmFjaztcbiAgICAgICAgICB0cmFja3NbdmFyaWFudExhYmVsXSA9IHRyYWNrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdXNlZCB0byBnZXQgdGhlIGFjdGl2ZSBncm91cCBvZiB0aGUgcHJvdmlkZWQgdHlwZVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiAgICAgICAgTWVkaWFHcm91cCB0eXBlXG4gKiBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3NcbiAqICAgICAgICBPYmplY3QgY29udGFpbmluZyByZXF1aXJlZCBpbmZvcm1hdGlvbiBmb3IgbWVkaWEgZ3JvdXBzXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqICAgICAgICAgRnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBhY3RpdmUgbWVkaWEgZ3JvdXAgZm9yIHRoZSBwcm92aWRlZCB0eXBlLiBUYWtlcyBhblxuICogICAgICAgICBvcHRpb25hbCBwYXJhbWV0ZXIge1RleHRUcmFja30gdHJhY2suIElmIG5vIHRyYWNrIGlzIHByb3ZpZGVkLCBhIGxpc3Qgb2YgYWxsXG4gKiAgICAgICAgIHZhcmlhbnRzIGluIHRoZSBncm91cCwgb3RoZXJ3aXNlIHRoZSB2YXJpYW50IGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3ZpZGVkXG4gKiAgICAgICAgIHRyYWNrIGlzIHJldHVybmVkLlxuICogQGZ1bmN0aW9uIGFjdGl2ZUdyb3VwXG4gKi9cblxudmFyIGFjdGl2ZUdyb3VwID0gZnVuY3Rpb24gYWN0aXZlR3JvdXAodHlwZSwgc2V0dGluZ3MpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh0cmFjaykge1xuICAgIHZhciBtYXN0ZXJQbGF5bGlzdExvYWRlciA9IHNldHRpbmdzLm1hc3RlclBsYXlsaXN0TG9hZGVyLFxuICAgICAgICBncm91cHMgPSBzZXR0aW5ncy5tZWRpYVR5cGVzW3R5cGVdLmdyb3VwcztcbiAgICB2YXIgbWVkaWEgPSBtYXN0ZXJQbGF5bGlzdExvYWRlci5tZWRpYSgpO1xuXG4gICAgaWYgKCFtZWRpYSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIHZhcmlhbnRzID0gbnVsbDtcblxuICAgIGlmIChtZWRpYS5hdHRyaWJ1dGVzW3R5cGVdKSB7XG4gICAgICB2YXJpYW50cyA9IGdyb3Vwc1ttZWRpYS5hdHRyaWJ1dGVzW3R5cGVdXTtcbiAgICB9XG5cbiAgICB2YXJpYW50cyA9IHZhcmlhbnRzIHx8IGdyb3Vwcy5tYWluO1xuXG4gICAgaWYgKHR5cGVvZiB0cmFjayA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiB2YXJpYW50cztcbiAgICB9XG5cbiAgICBpZiAodHJhY2sgPT09IG51bGwpIHtcbiAgICAgIC8vIEFuIGFjdGl2ZSB0cmFjayB3YXMgc3BlY2lmaWVkIHNvIGEgY29ycmVzcG9uZGluZyBncm91cCBpcyBleHBlY3RlZC4gdHJhY2sgPT09IG51bGxcbiAgICAgIC8vIG1lYW5zIG5vIHRyYWNrIGlzIGN1cnJlbnRseSBhY3RpdmUgc28gdGhlcmUgaXMgbm8gY29ycmVzcG9uZGluZyBncm91cFxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhcmlhbnRzLmZpbHRlcihmdW5jdGlvbiAocHJvcHMpIHtcbiAgICAgIHJldHVybiBwcm9wcy5pZCA9PT0gdHJhY2suaWQ7XG4gICAgfSlbMF0gfHwgbnVsbDtcbiAgfTtcbn07XG5cbnZhciBhY3RpdmVUcmFjayA9IHtcbiAgLyoqXG4gICAqIFJldHVybnMgYSBmdW5jdGlvbiB1c2VkIHRvIGdldCB0aGUgYWN0aXZlIHRyYWNrIG9mIHR5cGUgcHJvdmlkZWRcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAgICogICAgICAgIE1lZGlhR3JvdXAgdHlwZVxuICAgKiBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3NcbiAgICogICAgICAgIE9iamVjdCBjb250YWluaW5nIHJlcXVpcmVkIGluZm9ybWF0aW9uIGZvciBtZWRpYSBncm91cHNcbiAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAqICAgICAgICAgRnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBhY3RpdmUgbWVkaWEgdHJhY2sgZm9yIHRoZSBwcm92aWRlZCB0eXBlLiBSZXR1cm5zXG4gICAqICAgICAgICAgbnVsbCBpZiBubyB0cmFjayBpcyBhY3RpdmVcbiAgICogQGZ1bmN0aW9uIGFjdGl2ZVRyYWNrLkFVRElPXG4gICAqL1xuICBBVURJTzogZnVuY3Rpb24gQVVESU8odHlwZSwgc2V0dGluZ3MpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHRyYWNrcyA9IHNldHRpbmdzLm1lZGlhVHlwZXNbdHlwZV0udHJhY2tzO1xuXG4gICAgICBmb3IgKHZhciBpZCBpbiB0cmFja3MpIHtcbiAgICAgICAgaWYgKHRyYWNrc1tpZF0uZW5hYmxlZCkge1xuICAgICAgICAgIHJldHVybiB0cmFja3NbaWRdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBmdW5jdGlvbiB1c2VkIHRvIGdldCB0aGUgYWN0aXZlIHRyYWNrIG9mIHR5cGUgcHJvdmlkZWRcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAgICogICAgICAgIE1lZGlhR3JvdXAgdHlwZVxuICAgKiBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3NcbiAgICogICAgICAgIE9iamVjdCBjb250YWluaW5nIHJlcXVpcmVkIGluZm9ybWF0aW9uIGZvciBtZWRpYSBncm91cHNcbiAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAqICAgICAgICAgRnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBhY3RpdmUgbWVkaWEgdHJhY2sgZm9yIHRoZSBwcm92aWRlZCB0eXBlLiBSZXR1cm5zXG4gICAqICAgICAgICAgbnVsbCBpZiBubyB0cmFjayBpcyBhY3RpdmVcbiAgICogQGZ1bmN0aW9uIGFjdGl2ZVRyYWNrLlNVQlRJVExFU1xuICAgKi9cbiAgU1VCVElUTEVTOiBmdW5jdGlvbiBTVUJUSVRMRVModHlwZSwgc2V0dGluZ3MpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHRyYWNrcyA9IHNldHRpbmdzLm1lZGlhVHlwZXNbdHlwZV0udHJhY2tzO1xuXG4gICAgICBmb3IgKHZhciBpZCBpbiB0cmFja3MpIHtcbiAgICAgICAgaWYgKHRyYWNrc1tpZF0ubW9kZSA9PT0gJ3Nob3dpbmcnKSB7XG4gICAgICAgICAgcmV0dXJuIHRyYWNrc1tpZF07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgfVxufTtcbi8qKlxuICogU2V0dXAgUGxheWxpc3RMb2FkZXJzIGFuZCBUcmFja3MgZm9yIG1lZGlhIGdyb3VwcyAoQXVkaW8sIFN1YnRpdGxlcyxcbiAqIENsb3NlZC1DYXB0aW9ucykgc3BlY2lmaWVkIGluIHRoZSBtYXN0ZXIgbWFuaWZlc3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzXG4gKiAgICAgICAgT2JqZWN0IGNvbnRhaW5pbmcgcmVxdWlyZWQgaW5mb3JtYXRpb24gZm9yIHNldHRpbmcgdXAgdGhlIG1lZGlhIGdyb3Vwc1xuICogQHBhcmFtIHtTZWdtZW50TG9hZGVyfSBzZXR0aW5ncy5zZWdtZW50TG9hZGVycy5BVURJT1xuICogICAgICAgIEF1ZGlvIHNlZ21lbnQgbG9hZGVyXG4gKiBAcGFyYW0ge1NlZ21lbnRMb2FkZXJ9IHNldHRpbmdzLnNlZ21lbnRMb2FkZXJzLlNVQlRJVExFU1xuICogICAgICAgIFN1YnRpdGxlIHNlZ21lbnQgbG9hZGVyXG4gKiBAcGFyYW0ge1NlZ21lbnRMb2FkZXJ9IHNldHRpbmdzLnNlZ21lbnRMb2FkZXJzLm1haW5cbiAqICAgICAgICBNYWluIHNlZ21lbnQgbG9hZGVyXG4gKiBAcGFyYW0ge1RlY2h9IHNldHRpbmdzLnRlY2hcbiAqICAgICAgICBUaGUgdGVjaCBvZiB0aGUgcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3MucmVxdWVzdE9wdGlvbnNcbiAqICAgICAgICBYSFIgcmVxdWVzdCBvcHRpb25zIHVzZWQgYnkgdGhlIHNlZ21lbnQgbG9hZGVyc1xuICogQHBhcmFtIHtQbGF5bGlzdExvYWRlcn0gc2V0dGluZ3MubWFzdGVyUGxheWxpc3RMb2FkZXJcbiAqICAgICAgICBQbGF5bGlzdExvYWRlciBmb3IgdGhlIG1hc3RlciBzb3VyY2VcbiAqIEBwYXJhbSB7SGxzSGFuZGxlcn0gc2V0dGluZ3MuaGxzXG4gKiAgICAgICAgSExTIFNvdXJjZUhhbmRsZXJcbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXR0aW5ncy5tYXN0ZXJcbiAqICAgICAgICBUaGUgcGFyc2VkIG1hc3RlciBtYW5pZmVzdFxuICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzLm1lZGlhVHlwZXNcbiAqICAgICAgICBPYmplY3QgdG8gc3RvcmUgdGhlIGxvYWRlcnMsIHRyYWNrcywgYW5kIHV0aWxpdHkgbWV0aG9kcyBmb3IgZWFjaCBtZWRpYSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZXR0aW5ncy5ibGFja2xpc3RDdXJyZW50UGxheWxpc3RcbiAqICAgICAgICBCbGFja2xpc3RzIHRoZSBjdXJyZW50IHJlbmRpdGlvbiBhbmQgZm9yY2VzIGEgcmVuZGl0aW9uIHN3aXRjaC5cbiAqIEBmdW5jdGlvbiBzZXR1cE1lZGlhR3JvdXBzXG4gKi9cblxudmFyIHNldHVwTWVkaWFHcm91cHMgPSBmdW5jdGlvbiBzZXR1cE1lZGlhR3JvdXBzKHNldHRpbmdzKSB7XG4gIFsnQVVESU8nLCAnU1VCVElUTEVTJywgJ0NMT1NFRC1DQVBUSU9OUyddLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICBpbml0aWFsaXplW3R5cGVdKHR5cGUsIHNldHRpbmdzKTtcbiAgfSk7XG4gIHZhciBtZWRpYVR5cGVzID0gc2V0dGluZ3MubWVkaWFUeXBlcyxcbiAgICAgIG1hc3RlclBsYXlsaXN0TG9hZGVyID0gc2V0dGluZ3MubWFzdGVyUGxheWxpc3RMb2FkZXIsXG4gICAgICB0ZWNoID0gc2V0dGluZ3MudGVjaCxcbiAgICAgIGhscyA9IHNldHRpbmdzLmhsczsgLy8gc2V0dXAgYWN0aXZlIGdyb3VwIGFuZCB0cmFjayBnZXR0ZXJzIGFuZCBjaGFuZ2UgZXZlbnQgaGFuZGxlcnNcblxuICBbJ0FVRElPJywgJ1NVQlRJVExFUyddLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICBtZWRpYVR5cGVzW3R5cGVdLmFjdGl2ZUdyb3VwID0gYWN0aXZlR3JvdXAodHlwZSwgc2V0dGluZ3MpO1xuICAgIG1lZGlhVHlwZXNbdHlwZV0uYWN0aXZlVHJhY2sgPSBhY3RpdmVUcmFja1t0eXBlXSh0eXBlLCBzZXR0aW5ncyk7XG4gICAgbWVkaWFUeXBlc1t0eXBlXS5vbkdyb3VwQ2hhbmdlZCA9IG9uR3JvdXBDaGFuZ2VkKHR5cGUsIHNldHRpbmdzKTtcbiAgICBtZWRpYVR5cGVzW3R5cGVdLm9uVHJhY2tDaGFuZ2VkID0gb25UcmFja0NoYW5nZWQodHlwZSwgc2V0dGluZ3MpO1xuICB9KTsgLy8gRE8gTk9UIGVuYWJsZSB0aGUgZGVmYXVsdCBzdWJ0aXRsZSBvciBjYXB0aW9uIHRyYWNrLlxuICAvLyBETyBlbmFibGUgdGhlIGRlZmF1bHQgYXVkaW8gdHJhY2tcblxuICB2YXIgYXVkaW9Hcm91cCA9IG1lZGlhVHlwZXMuQVVESU8uYWN0aXZlR3JvdXAoKTtcbiAgdmFyIGdyb3VwSWQgPSAoYXVkaW9Hcm91cC5maWx0ZXIoZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgcmV0dXJuIGdyb3VwLmRlZmF1bHQ7XG4gIH0pWzBdIHx8IGF1ZGlvR3JvdXBbMF0pLmlkO1xuICBtZWRpYVR5cGVzLkFVRElPLnRyYWNrc1tncm91cElkXS5lbmFibGVkID0gdHJ1ZTtcbiAgbWVkaWFUeXBlcy5BVURJTy5vblRyYWNrQ2hhbmdlZCgpO1xuICBtYXN0ZXJQbGF5bGlzdExvYWRlci5vbignbWVkaWFjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgWydBVURJTycsICdTVUJUSVRMRVMnXS5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICByZXR1cm4gbWVkaWFUeXBlc1t0eXBlXS5vbkdyb3VwQ2hhbmdlZCgpO1xuICAgIH0pO1xuICB9KTsgLy8gY3VzdG9tIGF1ZGlvIHRyYWNrIGNoYW5nZSBldmVudCBoYW5kbGVyIGZvciB1c2FnZSBldmVudFxuXG4gIHZhciBvbkF1ZGlvVHJhY2tDaGFuZ2VkID0gZnVuY3Rpb24gb25BdWRpb1RyYWNrQ2hhbmdlZCgpIHtcbiAgICBtZWRpYVR5cGVzLkFVRElPLm9uVHJhY2tDaGFuZ2VkKCk7XG4gICAgdGVjaC50cmlnZ2VyKHtcbiAgICAgIHR5cGU6ICd1c2FnZScsXG4gICAgICBuYW1lOiAnaGxzLWF1ZGlvLWNoYW5nZSdcbiAgICB9KTtcbiAgfTtcblxuICB0ZWNoLmF1ZGlvVHJhY2tzKCkuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25BdWRpb1RyYWNrQ2hhbmdlZCk7XG4gIHRlY2gucmVtb3RlVGV4dFRyYWNrcygpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG1lZGlhVHlwZXMuU1VCVElUTEVTLm9uVHJhY2tDaGFuZ2VkKTtcbiAgaGxzLm9uKCdkaXNwb3NlJywgZnVuY3Rpb24gKCkge1xuICAgIHRlY2guYXVkaW9UcmFja3MoKS5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkF1ZGlvVHJhY2tDaGFuZ2VkKTtcbiAgICB0ZWNoLnJlbW90ZVRleHRUcmFja3MoKS5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBtZWRpYVR5cGVzLlNVQlRJVExFUy5vblRyYWNrQ2hhbmdlZCk7XG4gIH0pOyAvLyBjbGVhciBleGlzdGluZyBhdWRpbyB0cmFja3MgYW5kIGFkZCB0aGUgb25lcyB3ZSBqdXN0IGNyZWF0ZWRcblxuICB0ZWNoLmNsZWFyVHJhY2tzKCdhdWRpbycpO1xuXG4gIGZvciAodmFyIGlkIGluIG1lZGlhVHlwZXMuQVVESU8udHJhY2tzKSB7XG4gICAgdGVjaC5hdWRpb1RyYWNrcygpLmFkZFRyYWNrKG1lZGlhVHlwZXMuQVVESU8udHJhY2tzW2lkXSk7XG4gIH1cbn07XG4vKipcbiAqIENyZWF0ZXMgc2tlbGV0b24gb2JqZWN0IHVzZWQgdG8gc3RvcmUgdGhlIGxvYWRlcnMsIHRyYWNrcywgYW5kIHV0aWxpdHkgbWV0aG9kcyBmb3IgZWFjaFxuICogbWVkaWEgdHlwZVxuICpcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqICAgICAgICAgT2JqZWN0IHRvIHN0b3JlIHRoZSBsb2FkZXJzLCB0cmFja3MsIGFuZCB1dGlsaXR5IG1ldGhvZHMgZm9yIGVhY2ggbWVkaWEgdHlwZVxuICogQGZ1bmN0aW9uIGNyZWF0ZU1lZGlhVHlwZXNcbiAqL1xuXG5cbnZhciBjcmVhdGVNZWRpYVR5cGVzID0gZnVuY3Rpb24gY3JlYXRlTWVkaWFUeXBlcygpIHtcbiAgdmFyIG1lZGlhVHlwZXMgPSB7fTtcbiAgWydBVURJTycsICdTVUJUSVRMRVMnLCAnQ0xPU0VELUNBUFRJT05TJ10uZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgIG1lZGlhVHlwZXNbdHlwZV0gPSB7XG4gICAgICBncm91cHM6IHt9LFxuICAgICAgdHJhY2tzOiB7fSxcbiAgICAgIGFjdGl2ZVBsYXlsaXN0TG9hZGVyOiBudWxsLFxuICAgICAgYWN0aXZlR3JvdXA6IG5vb3AsXG4gICAgICBhY3RpdmVUcmFjazogbm9vcCxcbiAgICAgIG9uR3JvdXBDaGFuZ2VkOiBub29wLFxuICAgICAgb25UcmFja0NoYW5nZWQ6IG5vb3BcbiAgICB9O1xuICB9KTtcbiAgcmV0dXJuIG1lZGlhVHlwZXM7XG59O1xuLyoqXG4gKiBAZmlsZSBtYXN0ZXItcGxheWxpc3QtY29udHJvbGxlci5qc1xuICovXG5cblxudmFyIEFCT1JUX0VBUkxZX0JMQUNLTElTVF9TRUNPTkRTID0gNjAgKiAyO1xudmFyIEhscyA9IHZvaWQgMDsgLy8gU2VnbWVudExvYWRlciBzdGF0cyB0aGF0IG5lZWQgdG8gaGF2ZSBlYWNoIGxvYWRlcidzXG4vLyB2YWx1ZXMgc3VtbWVkIHRvIGNhbGN1bGF0ZSB0aGUgZmluYWwgdmFsdWVcblxudmFyIGxvYWRlclN0YXRzID0gWydtZWRpYVJlcXVlc3RzJywgJ21lZGlhUmVxdWVzdHNBYm9ydGVkJywgJ21lZGlhUmVxdWVzdHNUaW1lZG91dCcsICdtZWRpYVJlcXVlc3RzRXJyb3JlZCcsICdtZWRpYVRyYW5zZmVyRHVyYXRpb24nLCAnbWVkaWFCeXRlc1RyYW5zZmVycmVkJ107XG5cbnZhciBzdW1Mb2FkZXJTdGF0ID0gZnVuY3Rpb24gc3VtTG9hZGVyU3RhdChzdGF0KSB7XG4gIHJldHVybiB0aGlzLmF1ZGlvU2VnbWVudExvYWRlcl9bc3RhdF0gKyB0aGlzLm1haW5TZWdtZW50TG9hZGVyX1tzdGF0XTtcbn07XG4vKipcbiAqIHRoZSBtYXN0ZXIgcGxheWxpc3QgY29udHJvbGxlciBjb250cm9sbGVyIGFsbCBpbnRlcmFjdG9uc1xuICogYmV0d2VlbiBwbGF5bGlzdHMgYW5kIHNlZ21lbnRsb2FkZXJzLiBBdCB0aGlzIHRpbWUgdGhpcyBtYWlubHlcbiAqIGludm9sdmVzIGEgbWFzdGVyIHBsYXlsaXN0IGFuZCBhIHNlcmllcyBvZiBhdWRpbyBwbGF5bGlzdHNcbiAqIGlmIHRoZXkgYXJlIGF2YWlsYWJsZVxuICpcbiAqIEBjbGFzcyBNYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJcbiAqIEBleHRlbmRzIHZpZGVvanMuRXZlbnRUYXJnZXRcbiAqL1xuXG5cbnZhciBNYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXIgPSBmdW5jdGlvbiAoX3ZpZGVvanMkRXZlbnRUYXJnZXQpIHtcbiAgaW5oZXJpdHMoTWFzdGVyUGxheWxpc3RDb250cm9sbGVyLCBfdmlkZW9qcyRFdmVudFRhcmdldCk7XG5cbiAgZnVuY3Rpb24gTWFzdGVyUGxheWxpc3RDb250cm9sbGVyKG9wdGlvbnMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBNYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXIpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTWFzdGVyUGxheWxpc3RDb250cm9sbGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTWFzdGVyUGxheWxpc3RDb250cm9sbGVyKSkuY2FsbCh0aGlzKSk7XG5cbiAgICB2YXIgdXJsID0gb3B0aW9ucy51cmwsXG4gICAgICAgIGhhbmRsZU1hbmlmZXN0UmVkaXJlY3RzID0gb3B0aW9ucy5oYW5kbGVNYW5pZmVzdFJlZGlyZWN0cyxcbiAgICAgICAgd2l0aENyZWRlbnRpYWxzID0gb3B0aW9ucy53aXRoQ3JlZGVudGlhbHMsXG4gICAgICAgIHRlY2ggPSBvcHRpb25zLnRlY2gsXG4gICAgICAgIGJhbmR3aWR0aCA9IG9wdGlvbnMuYmFuZHdpZHRoLFxuICAgICAgICBleHRlcm5IbHMgPSBvcHRpb25zLmV4dGVybkhscyxcbiAgICAgICAgdXNlQ3VlVGFncyA9IG9wdGlvbnMudXNlQ3VlVGFncyxcbiAgICAgICAgYmxhY2tsaXN0RHVyYXRpb24gPSBvcHRpb25zLmJsYWNrbGlzdER1cmF0aW9uLFxuICAgICAgICBlbmFibGVMb3dJbml0aWFsUGxheWxpc3QgPSBvcHRpb25zLmVuYWJsZUxvd0luaXRpYWxQbGF5bGlzdCxcbiAgICAgICAgc291cmNlVHlwZSA9IG9wdGlvbnMuc291cmNlVHlwZSxcbiAgICAgICAgc2Vla1RvID0gb3B0aW9ucy5zZWVrVG87XG5cbiAgICBpZiAoIXVybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBIG5vbi1lbXB0eSBwbGF5bGlzdCBVUkwgaXMgcmVxdWlyZWQnKTtcbiAgICB9XG5cbiAgICBIbHMgPSBleHRlcm5IbHM7XG4gICAgX3RoaXMud2l0aENyZWRlbnRpYWxzID0gd2l0aENyZWRlbnRpYWxzO1xuICAgIF90aGlzLnRlY2hfID0gdGVjaDtcbiAgICBfdGhpcy5obHNfID0gdGVjaC5obHM7XG4gICAgX3RoaXMuc2Vla1RvXyA9IHNlZWtUbztcbiAgICBfdGhpcy5zb3VyY2VUeXBlXyA9IHNvdXJjZVR5cGU7XG4gICAgX3RoaXMudXNlQ3VlVGFnc18gPSB1c2VDdWVUYWdzO1xuICAgIF90aGlzLmJsYWNrbGlzdER1cmF0aW9uID0gYmxhY2tsaXN0RHVyYXRpb247XG4gICAgX3RoaXMuZW5hYmxlTG93SW5pdGlhbFBsYXlsaXN0ID0gZW5hYmxlTG93SW5pdGlhbFBsYXlsaXN0O1xuXG4gICAgaWYgKF90aGlzLnVzZUN1ZVRhZ3NfKSB7XG4gICAgICBfdGhpcy5jdWVUYWdzVHJhY2tfID0gX3RoaXMudGVjaF8uYWRkVGV4dFRyYWNrKCdtZXRhZGF0YScsICdhZC1jdWVzJyk7XG4gICAgICBfdGhpcy5jdWVUYWdzVHJhY2tfLmluQmFuZE1ldGFkYXRhVHJhY2tEaXNwYXRjaFR5cGUgPSAnJztcbiAgICB9XG5cbiAgICBfdGhpcy5yZXF1ZXN0T3B0aW9uc18gPSB7XG4gICAgICB3aXRoQ3JlZGVudGlhbHM6IHdpdGhDcmVkZW50aWFscyxcbiAgICAgIGhhbmRsZU1hbmlmZXN0UmVkaXJlY3RzOiBoYW5kbGVNYW5pZmVzdFJlZGlyZWN0cyxcbiAgICAgIHRpbWVvdXQ6IG51bGxcbiAgICB9O1xuICAgIF90aGlzLm1lZGlhVHlwZXNfID0gY3JlYXRlTWVkaWFUeXBlcygpO1xuICAgIF90aGlzLm1lZGlhU291cmNlID0gbmV3IHZpZGVvanMkMS5NZWRpYVNvdXJjZSgpOyAvLyBsb2FkIHRoZSBtZWRpYSBzb3VyY2UgaW50byB0aGUgcGxheWVyXG5cbiAgICBfdGhpcy5tZWRpYVNvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdzb3VyY2VvcGVuJywgX3RoaXMuaGFuZGxlU291cmNlT3Blbl8uYmluZChfdGhpcykpO1xuXG4gICAgX3RoaXMuc2Vla2FibGVfID0gdmlkZW9qcyQxLmNyZWF0ZVRpbWVSYW5nZXMoKTtcblxuICAgIF90aGlzLmhhc1BsYXllZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIF90aGlzLnN5bmNDb250cm9sbGVyXyA9IG5ldyBTeW5jQ29udHJvbGxlcihvcHRpb25zKTtcbiAgICBfdGhpcy5zZWdtZW50TWV0YWRhdGFUcmFja18gPSB0ZWNoLmFkZFJlbW90ZVRleHRUcmFjayh7XG4gICAgICBraW5kOiAnbWV0YWRhdGEnLFxuICAgICAgbGFiZWw6ICdzZWdtZW50LW1ldGFkYXRhJ1xuICAgIH0sIGZhbHNlKS50cmFjaztcbiAgICBfdGhpcy5kZWNyeXB0ZXJfID0gbmV3IERlY3J5cHRlciQxKCk7XG4gICAgX3RoaXMuaW5iYW5kVGV4dFRyYWNrc18gPSB7fTtcbiAgICB2YXIgc2VnbWVudExvYWRlclNldHRpbmdzID0ge1xuICAgICAgaGxzOiBfdGhpcy5obHNfLFxuICAgICAgbWVkaWFTb3VyY2U6IF90aGlzLm1lZGlhU291cmNlLFxuICAgICAgY3VycmVudFRpbWU6IF90aGlzLnRlY2hfLmN1cnJlbnRUaW1lLmJpbmQoX3RoaXMudGVjaF8pLFxuICAgICAgc2Vla2FibGU6IGZ1bmN0aW9uIHNlZWthYmxlJCQxKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2Vla2FibGUoKTtcbiAgICAgIH0sXG4gICAgICBzZWVraW5nOiBmdW5jdGlvbiBzZWVraW5nKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMudGVjaF8uc2Vla2luZygpO1xuICAgICAgfSxcbiAgICAgIGR1cmF0aW9uOiBmdW5jdGlvbiBkdXJhdGlvbiQkMSgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLm1lZGlhU291cmNlLmR1cmF0aW9uO1xuICAgICAgfSxcbiAgICAgIGhhc1BsYXllZDogZnVuY3Rpb24gaGFzUGxheWVkKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuaGFzUGxheWVkXygpO1xuICAgICAgfSxcbiAgICAgIGdvYWxCdWZmZXJMZW5ndGg6IGZ1bmN0aW9uIGdvYWxCdWZmZXJMZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5nb2FsQnVmZmVyTGVuZ3RoKCk7XG4gICAgICB9LFxuICAgICAgYmFuZHdpZHRoOiBiYW5kd2lkdGgsXG4gICAgICBzeW5jQ29udHJvbGxlcjogX3RoaXMuc3luY0NvbnRyb2xsZXJfLFxuICAgICAgZGVjcnlwdGVyOiBfdGhpcy5kZWNyeXB0ZXJfLFxuICAgICAgc291cmNlVHlwZTogX3RoaXMuc291cmNlVHlwZV8sXG4gICAgICBpbmJhbmRUZXh0VHJhY2tzOiBfdGhpcy5pbmJhbmRUZXh0VHJhY2tzX1xuICAgIH07XG4gICAgX3RoaXMubWFzdGVyUGxheWxpc3RMb2FkZXJfID0gX3RoaXMuc291cmNlVHlwZV8gPT09ICdkYXNoJyA/IG5ldyBEYXNoUGxheWxpc3RMb2FkZXIodXJsLCBfdGhpcy5obHNfLCBfdGhpcy5yZXF1ZXN0T3B0aW9uc18pIDogbmV3IFBsYXlsaXN0TG9hZGVyKHVybCwgX3RoaXMuaGxzXywgX3RoaXMucmVxdWVzdE9wdGlvbnNfKTtcblxuICAgIF90aGlzLnNldHVwTWFzdGVyUGxheWxpc3RMb2FkZXJMaXN0ZW5lcnNfKCk7IC8vIHNldHVwIHNlZ21lbnQgbG9hZGVyc1xuICAgIC8vIGNvbWJpbmVkIGF1ZGlvL3ZpZGVvIG9yIGp1c3QgdmlkZW8gd2hlbiBhbHRlcm5hdGUgYXVkaW8gdHJhY2sgaXMgc2VsZWN0ZWRcblxuXG4gICAgX3RoaXMubWFpblNlZ21lbnRMb2FkZXJfID0gbmV3IFNlZ21lbnRMb2FkZXIodmlkZW9qcyQxLm1lcmdlT3B0aW9ucyhzZWdtZW50TG9hZGVyU2V0dGluZ3MsIHtcbiAgICAgIHNlZ21lbnRNZXRhZGF0YVRyYWNrOiBfdGhpcy5zZWdtZW50TWV0YWRhdGFUcmFja18sXG4gICAgICBsb2FkZXJUeXBlOiAnbWFpbidcbiAgICB9KSwgb3B0aW9ucyk7IC8vIGFsdGVybmF0ZSBhdWRpbyB0cmFja1xuXG4gICAgX3RoaXMuYXVkaW9TZWdtZW50TG9hZGVyXyA9IG5ldyBTZWdtZW50TG9hZGVyKHZpZGVvanMkMS5tZXJnZU9wdGlvbnMoc2VnbWVudExvYWRlclNldHRpbmdzLCB7XG4gICAgICBsb2FkZXJUeXBlOiAnYXVkaW8nXG4gICAgfSksIG9wdGlvbnMpO1xuICAgIF90aGlzLnN1YnRpdGxlU2VnbWVudExvYWRlcl8gPSBuZXcgVlRUU2VnbWVudExvYWRlcih2aWRlb2pzJDEubWVyZ2VPcHRpb25zKHNlZ21lbnRMb2FkZXJTZXR0aW5ncywge1xuICAgICAgbG9hZGVyVHlwZTogJ3Z0dCdcbiAgICB9KSwgb3B0aW9ucyk7XG5cbiAgICBfdGhpcy5zZXR1cFNlZ21lbnRMb2FkZXJMaXN0ZW5lcnNfKCk7IC8vIENyZWF0ZSBTZWdtZW50TG9hZGVyIHN0YXQtZ2V0dGVyc1xuXG5cbiAgICBsb2FkZXJTdGF0cy5mb3JFYWNoKGZ1bmN0aW9uIChzdGF0KSB7XG4gICAgICBfdGhpc1tzdGF0ICsgJ18nXSA9IHN1bUxvYWRlclN0YXQuYmluZChfdGhpcywgc3RhdCk7XG4gICAgfSk7XG4gICAgX3RoaXMubG9nZ2VyXyA9IGxvZ2dlcignTVBDJyk7XG5cbiAgICBfdGhpcy5tYXN0ZXJQbGF5bGlzdExvYWRlcl8ubG9hZCgpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBSZWdpc3RlciBldmVudCBoYW5kbGVycyBvbiB0aGUgbWFzdGVyIHBsYXlsaXN0IGxvYWRlci4gQSBoZWxwZXJcbiAgICogZnVuY3Rpb24gZm9yIGNvbnN0cnVjdGlvbiB0aW1lLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIGNyZWF0ZUNsYXNzKE1hc3RlclBsYXlsaXN0Q29udHJvbGxlciwgW3tcbiAgICBrZXk6ICdzZXR1cE1hc3RlclBsYXlsaXN0TG9hZGVyTGlzdGVuZXJzXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwTWFzdGVyUGxheWxpc3RMb2FkZXJMaXN0ZW5lcnNfKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHRoaXMubWFzdGVyUGxheWxpc3RMb2FkZXJfLm9uKCdsb2FkZWRtZXRhZGF0YScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1lZGlhID0gX3RoaXMyLm1hc3RlclBsYXlsaXN0TG9hZGVyXy5tZWRpYSgpO1xuXG4gICAgICAgIHZhciByZXF1ZXN0VGltZW91dCA9IG1lZGlhLnRhcmdldER1cmF0aW9uICogMS41ICogMTAwMDsgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbnkgbW9yZSBhdmFpbGFibGUgcGxheWxpc3RzLCB3ZSBkb24ndCB3YW50IHRvXG4gICAgICAgIC8vIHRpbWVvdXQgdGhlIHJlcXVlc3QuXG5cbiAgICAgICAgaWYgKGlzTG93ZXN0RW5hYmxlZFJlbmRpdGlvbihfdGhpczIubWFzdGVyUGxheWxpc3RMb2FkZXJfLm1hc3RlciwgX3RoaXMyLm1hc3RlclBsYXlsaXN0TG9hZGVyXy5tZWRpYSgpKSkge1xuICAgICAgICAgIF90aGlzMi5yZXF1ZXN0T3B0aW9uc18udGltZW91dCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3RoaXMyLnJlcXVlc3RPcHRpb25zXy50aW1lb3V0ID0gcmVxdWVzdFRpbWVvdXQ7XG4gICAgICAgIH0gLy8gaWYgdGhpcyBpc24ndCBhIGxpdmUgdmlkZW8gYW5kIHByZWxvYWQgcGVybWl0cywgc3RhcnRcbiAgICAgICAgLy8gZG93bmxvYWRpbmcgc2VnbWVudHNcblxuXG4gICAgICAgIGlmIChtZWRpYS5lbmRMaXN0ICYmIF90aGlzMi50ZWNoXy5wcmVsb2FkKCkgIT09ICdub25lJykge1xuICAgICAgICAgIF90aGlzMi5tYWluU2VnbWVudExvYWRlcl8ucGxheWxpc3QobWVkaWEsIF90aGlzMi5yZXF1ZXN0T3B0aW9uc18pO1xuXG4gICAgICAgICAgX3RoaXMyLm1haW5TZWdtZW50TG9hZGVyXy5sb2FkKCk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXR1cE1lZGlhR3JvdXBzKHtcbiAgICAgICAgICBzb3VyY2VUeXBlOiBfdGhpczIuc291cmNlVHlwZV8sXG4gICAgICAgICAgc2VnbWVudExvYWRlcnM6IHtcbiAgICAgICAgICAgIEFVRElPOiBfdGhpczIuYXVkaW9TZWdtZW50TG9hZGVyXyxcbiAgICAgICAgICAgIFNVQlRJVExFUzogX3RoaXMyLnN1YnRpdGxlU2VnbWVudExvYWRlcl8sXG4gICAgICAgICAgICBtYWluOiBfdGhpczIubWFpblNlZ21lbnRMb2FkZXJfXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0ZWNoOiBfdGhpczIudGVjaF8sXG4gICAgICAgICAgcmVxdWVzdE9wdGlvbnM6IF90aGlzMi5yZXF1ZXN0T3B0aW9uc18sXG4gICAgICAgICAgbWFzdGVyUGxheWxpc3RMb2FkZXI6IF90aGlzMi5tYXN0ZXJQbGF5bGlzdExvYWRlcl8sXG4gICAgICAgICAgaGxzOiBfdGhpczIuaGxzXyxcbiAgICAgICAgICBtYXN0ZXI6IF90aGlzMi5tYXN0ZXIoKSxcbiAgICAgICAgICBtZWRpYVR5cGVzOiBfdGhpczIubWVkaWFUeXBlc18sXG4gICAgICAgICAgYmxhY2tsaXN0Q3VycmVudFBsYXlsaXN0OiBfdGhpczIuYmxhY2tsaXN0Q3VycmVudFBsYXlsaXN0LmJpbmQoX3RoaXMyKVxuICAgICAgICB9KTtcblxuICAgICAgICBfdGhpczIudHJpZ2dlclByZXNlbmNlVXNhZ2VfKF90aGlzMi5tYXN0ZXIoKSwgbWVkaWEpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgX3RoaXMyLnNldHVwU291cmNlQnVmZmVyc18oKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHZpZGVvanMkMS5sb2cud2FybignRmFpbGVkIHRvIGNyZWF0ZSBTb3VyY2VCdWZmZXJzJywgZSk7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMi5tZWRpYVNvdXJjZS5lbmRPZlN0cmVhbSgnZGVjb2RlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIuc2V0dXBGaXJzdFBsYXkoKTtcblxuICAgICAgICBpZiAoIV90aGlzMi5tZWRpYVR5cGVzXy5BVURJTy5hY3RpdmVQbGF5bGlzdExvYWRlciB8fCBfdGhpczIubWVkaWFUeXBlc18uQVVESU8uYWN0aXZlUGxheWxpc3RMb2FkZXIubWVkaWEoKSkge1xuICAgICAgICAgIF90aGlzMi50cmlnZ2VyKCdzZWxlY3RlZGluaXRpYWxtZWRpYScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFdlIG11c3Qgd2FpdCBmb3IgdGhlIGFjdGl2ZSBhdWRpbyBwbGF5bGlzdCBsb2FkZXIgdG9cbiAgICAgICAgICAvLyBmaW5pc2ggc2V0dGluZyB1cCBiZWZvcmUgdHJpZ2dlcmluZyB0aGlzIGV2ZW50IHNvIHRoZVxuICAgICAgICAgIC8vIHJlcHJlc2VudGF0aW9ucyBBUEkgYW5kIEVNRSBzZXR1cCBpcyBjb3JyZWN0XG4gICAgICAgICAgX3RoaXMyLm1lZGlhVHlwZXNfLkFVRElPLmFjdGl2ZVBsYXlsaXN0TG9hZGVyLm9uZSgnbG9hZGVkbWV0YWRhdGEnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpczIudHJpZ2dlcignc2VsZWN0ZWRpbml0aWFsbWVkaWEnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLm1hc3RlclBsYXlsaXN0TG9hZGVyXy5vbignbG9hZGVkcGxheWxpc3QnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB1cGRhdGVkUGxheWxpc3QgPSBfdGhpczIubWFzdGVyUGxheWxpc3RMb2FkZXJfLm1lZGlhKCk7XG5cbiAgICAgICAgaWYgKCF1cGRhdGVkUGxheWxpc3QpIHtcbiAgICAgICAgICAvLyBibGFja2xpc3QgYW55IHZhcmlhbnRzIHRoYXQgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIgYmVmb3JlIHNlbGVjdGluZ1xuICAgICAgICAgIC8vIGFuIGluaXRpYWwgbWVkaWEgYXMgdGhlIHBsYXlsaXN0IHNlbGVjdG9ycyBkbyBub3QgY29uc2lkZXIgYnJvd3NlciBzdXBwb3J0XG4gICAgICAgICAgX3RoaXMyLmV4Y2x1ZGVVbnN1cHBvcnRlZFZhcmlhbnRzXygpO1xuXG4gICAgICAgICAgdmFyIHNlbGVjdGVkTWVkaWEgPSB2b2lkIDA7XG5cbiAgICAgICAgICBpZiAoX3RoaXMyLmVuYWJsZUxvd0luaXRpYWxQbGF5bGlzdCkge1xuICAgICAgICAgICAgc2VsZWN0ZWRNZWRpYSA9IF90aGlzMi5zZWxlY3RJbml0aWFsUGxheWxpc3QoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXNlbGVjdGVkTWVkaWEpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkTWVkaWEgPSBfdGhpczIuc2VsZWN0UGxheWxpc3QoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBfdGhpczIuaW5pdGlhbE1lZGlhXyA9IHNlbGVjdGVkTWVkaWE7XG5cbiAgICAgICAgICBfdGhpczIubWFzdGVyUGxheWxpc3RMb2FkZXJfLm1lZGlhKF90aGlzMi5pbml0aWFsTWVkaWFfKTtcblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfdGhpczIudXNlQ3VlVGFnc18pIHtcbiAgICAgICAgICBfdGhpczIudXBkYXRlQWRDdWVzXyh1cGRhdGVkUGxheWxpc3QpO1xuICAgICAgICB9IC8vIFRPRE86IENyZWF0ZSBhIG5ldyBldmVudCBvbiB0aGUgUGxheWxpc3RMb2FkZXIgdGhhdCBzaWduYWxzXG4gICAgICAgIC8vIHRoYXQgdGhlIHNlZ21lbnRzIGhhdmUgY2hhbmdlZCBpbiBzb21lIHdheSBhbmQgdXNlIHRoYXQgdG9cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBTZWdtZW50TG9hZGVyIGluc3RlYWQgb2YgZG9pbmcgaXQgdHdpY2UgaGVyZSBhbmRcbiAgICAgICAgLy8gb24gYG1lZGlhY2hhbmdlYFxuXG5cbiAgICAgICAgX3RoaXMyLm1haW5TZWdtZW50TG9hZGVyXy5wbGF5bGlzdCh1cGRhdGVkUGxheWxpc3QsIF90aGlzMi5yZXF1ZXN0T3B0aW9uc18pO1xuXG4gICAgICAgIF90aGlzMi51cGRhdGVEdXJhdGlvbigpOyAvLyBJZiB0aGUgcGxheWVyIGlzbid0IHBhdXNlZCwgZW5zdXJlIHRoYXQgdGhlIHNlZ21lbnQgbG9hZGVyIGlzIHJ1bm5pbmcsXG4gICAgICAgIC8vIGFzIGl0IGlzIHBvc3NpYmxlIHRoYXQgaXQgd2FzIHRlbXBvcmFyaWx5IHN0b3BwZWQgd2hpbGUgd2FpdGluZyBmb3JcbiAgICAgICAgLy8gYSBwbGF5bGlzdCAoZS5nLiwgaW4gY2FzZSB0aGUgcGxheWxpc3QgZXJyb3JlZCBhbmQgd2UgcmUtcmVxdWVzdGVkIGl0KS5cblxuXG4gICAgICAgIGlmICghX3RoaXMyLnRlY2hfLnBhdXNlZCgpKSB7XG4gICAgICAgICAgX3RoaXMyLm1haW5TZWdtZW50TG9hZGVyXy5sb2FkKCk7XG5cbiAgICAgICAgICBpZiAoX3RoaXMyLmF1ZGlvU2VnbWVudExvYWRlcl8pIHtcbiAgICAgICAgICAgIF90aGlzMi5hdWRpb1NlZ21lbnRMb2FkZXJfLmxvYWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXVwZGF0ZWRQbGF5bGlzdC5lbmRMaXN0KSB7XG4gICAgICAgICAgdmFyIGFkZFNlZWthYmxlUmFuZ2UgPSBmdW5jdGlvbiBhZGRTZWVrYWJsZVJhbmdlKCkge1xuICAgICAgICAgICAgdmFyIHNlZWthYmxlJCQxID0gX3RoaXMyLnNlZWthYmxlKCk7XG5cbiAgICAgICAgICAgIGlmIChzZWVrYWJsZSQkMS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgX3RoaXMyLm1lZGlhU291cmNlLmFkZFNlZWthYmxlUmFuZ2VfKHNlZWthYmxlJCQxLnN0YXJ0KDApLCBzZWVrYWJsZSQkMS5lbmQoMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBpZiAoX3RoaXMyLmR1cmF0aW9uKCkgIT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICB2YXIgb25EdXJhdGlvbmNoYW5nZSA9IGZ1bmN0aW9uIG9uRHVyYXRpb25jaGFuZ2UoKSB7XG4gICAgICAgICAgICAgIGlmIChfdGhpczIuZHVyYXRpb24oKSA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgICBhZGRTZWVrYWJsZVJhbmdlKCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3RoaXMyLnRlY2hfLm9uZSgnZHVyYXRpb25jaGFuZ2UnLCBvbkR1cmF0aW9uY2hhbmdlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgX3RoaXMyLnRlY2hfLm9uZSgnZHVyYXRpb25jaGFuZ2UnLCBvbkR1cmF0aW9uY2hhbmdlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWRkU2Vla2FibGVSYW5nZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLm1hc3RlclBsYXlsaXN0TG9hZGVyXy5vbignZXJyb3InLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMi5ibGFja2xpc3RDdXJyZW50UGxheWxpc3QoX3RoaXMyLm1hc3RlclBsYXlsaXN0TG9hZGVyXy5lcnJvcik7XG4gICAgICB9KTtcbiAgICAgIHRoaXMubWFzdGVyUGxheWxpc3RMb2FkZXJfLm9uKCdtZWRpYWNoYW5naW5nJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIubWFpblNlZ21lbnRMb2FkZXJfLmFib3J0KCk7XG5cbiAgICAgICAgX3RoaXMyLm1haW5TZWdtZW50TG9hZGVyXy5wYXVzZSgpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm1hc3RlclBsYXlsaXN0TG9hZGVyXy5vbignbWVkaWFjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtZWRpYSA9IF90aGlzMi5tYXN0ZXJQbGF5bGlzdExvYWRlcl8ubWVkaWEoKTtcblxuICAgICAgICB2YXIgcmVxdWVzdFRpbWVvdXQgPSBtZWRpYS50YXJnZXREdXJhdGlvbiAqIDEuNSAqIDEwMDA7IC8vIElmIHdlIGRvbid0IGhhdmUgYW55IG1vcmUgYXZhaWxhYmxlIHBsYXlsaXN0cywgd2UgZG9uJ3Qgd2FudCB0b1xuICAgICAgICAvLyB0aW1lb3V0IHRoZSByZXF1ZXN0LlxuXG4gICAgICAgIGlmIChpc0xvd2VzdEVuYWJsZWRSZW5kaXRpb24oX3RoaXMyLm1hc3RlclBsYXlsaXN0TG9hZGVyXy5tYXN0ZXIsIF90aGlzMi5tYXN0ZXJQbGF5bGlzdExvYWRlcl8ubWVkaWEoKSkpIHtcbiAgICAgICAgICBfdGhpczIucmVxdWVzdE9wdGlvbnNfLnRpbWVvdXQgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzMi5yZXF1ZXN0T3B0aW9uc18udGltZW91dCA9IHJlcXVlc3RUaW1lb3V0O1xuICAgICAgICB9IC8vIFRPRE86IENyZWF0ZSBhIG5ldyBldmVudCBvbiB0aGUgUGxheWxpc3RMb2FkZXIgdGhhdCBzaWduYWxzXG4gICAgICAgIC8vIHRoYXQgdGhlIHNlZ21lbnRzIGhhdmUgY2hhbmdlZCBpbiBzb21lIHdheSBhbmQgdXNlIHRoYXQgdG9cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBTZWdtZW50TG9hZGVyIGluc3RlYWQgb2YgZG9pbmcgaXQgdHdpY2UgaGVyZSBhbmRcbiAgICAgICAgLy8gb24gYGxvYWRlZHBsYXlsaXN0YFxuXG5cbiAgICAgICAgX3RoaXMyLm1haW5TZWdtZW50TG9hZGVyXy5wbGF5bGlzdChtZWRpYSwgX3RoaXMyLnJlcXVlc3RPcHRpb25zXyk7XG5cbiAgICAgICAgX3RoaXMyLm1haW5TZWdtZW50TG9hZGVyXy5sb2FkKCk7XG5cbiAgICAgICAgX3RoaXMyLnRlY2hfLnRyaWdnZXIoe1xuICAgICAgICAgIHR5cGU6ICdtZWRpYWNoYW5nZScsXG4gICAgICAgICAgYnViYmxlczogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5tYXN0ZXJQbGF5bGlzdExvYWRlcl8ub24oJ3BsYXlsaXN0dW5jaGFuZ2VkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdXBkYXRlZFBsYXlsaXN0ID0gX3RoaXMyLm1hc3RlclBsYXlsaXN0TG9hZGVyXy5tZWRpYSgpO1xuXG4gICAgICAgIHZhciBwbGF5bGlzdE91dGRhdGVkID0gX3RoaXMyLnN0dWNrQXRQbGF5bGlzdEVuZF8odXBkYXRlZFBsYXlsaXN0KTtcblxuICAgICAgICBpZiAocGxheWxpc3RPdXRkYXRlZCkge1xuICAgICAgICAgIC8vIFBsYXlsaXN0IGhhcyBzdG9wcGVkIHVwZGF0aW5nIGFuZCB3ZSdyZSBzdHVjayBhdCBpdHMgZW5kLiBUcnkgdG9cbiAgICAgICAgICAvLyBibGFja2xpc3QgaXQgYW5kIHN3aXRjaCB0byBhbm90aGVyIHBsYXlsaXN0IGluIHRoZSBob3BlIHRoYXQgdGhhdFxuICAgICAgICAgIC8vIG9uZSBpcyB1cGRhdGluZyAoYW5kIGdpdmUgdGhlIHBsYXllciBhIGNoYW5jZSB0byByZS1hZGp1c3QgdG8gdGhlXG4gICAgICAgICAgLy8gc2FmZSBsaXZlIHBvaW50KS5cbiAgICAgICAgICBfdGhpczIuYmxhY2tsaXN0Q3VycmVudFBsYXlsaXN0KHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdQbGF5bGlzdCBubyBsb25nZXIgdXBkYXRpbmcuJ1xuICAgICAgICAgIH0pOyAvLyB1c2VmdWwgZm9yIG1vbml0b3JpbmcgUW9TXG5cblxuICAgICAgICAgIF90aGlzMi50ZWNoXy50cmlnZ2VyKCdwbGF5bGlzdHN0dWNrJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy5tYXN0ZXJQbGF5bGlzdExvYWRlcl8ub24oJ3JlbmRpdGlvbmRpc2FibGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIudGVjaF8udHJpZ2dlcih7XG4gICAgICAgICAgdHlwZTogJ3VzYWdlJyxcbiAgICAgICAgICBuYW1lOiAnaGxzLXJlbmRpdGlvbi1kaXNhYmxlZCdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMubWFzdGVyUGxheWxpc3RMb2FkZXJfLm9uKCdyZW5kaXRpb25lbmFibGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIudGVjaF8udHJpZ2dlcih7XG4gICAgICAgICAgdHlwZTogJ3VzYWdlJyxcbiAgICAgICAgICBuYW1lOiAnaGxzLXJlbmRpdGlvbi1lbmFibGVkJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGhlbHBlciBmdW5jdGlvbiBmb3IgdHJpZ2dlcnJpbmcgcHJlc2VuY2UgdXNhZ2UgZXZlbnRzIG9uY2UgcGVyIHNvdXJjZVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAndHJpZ2dlclByZXNlbmNlVXNhZ2VfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdHJpZ2dlclByZXNlbmNlVXNhZ2VfKG1hc3RlciwgbWVkaWEpIHtcbiAgICAgIHZhciBtZWRpYUdyb3VwcyA9IG1hc3Rlci5tZWRpYUdyb3VwcyB8fCB7fTtcbiAgICAgIHZhciBkZWZhdWx0RGVtdXhlZCA9IHRydWU7XG4gICAgICB2YXIgYXVkaW9Hcm91cEtleXMgPSBPYmplY3Qua2V5cyhtZWRpYUdyb3Vwcy5BVURJTyk7XG5cbiAgICAgIGZvciAodmFyIG1lZGlhR3JvdXAgaW4gbWVkaWFHcm91cHMuQVVESU8pIHtcbiAgICAgICAgZm9yICh2YXIgbGFiZWwgaW4gbWVkaWFHcm91cHMuQVVESU9bbWVkaWFHcm91cF0pIHtcbiAgICAgICAgICB2YXIgcHJvcGVydGllcyA9IG1lZGlhR3JvdXBzLkFVRElPW21lZGlhR3JvdXBdW2xhYmVsXTtcblxuICAgICAgICAgIGlmICghcHJvcGVydGllcy51cmkpIHtcbiAgICAgICAgICAgIGRlZmF1bHREZW11eGVkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChkZWZhdWx0RGVtdXhlZCkge1xuICAgICAgICB0aGlzLnRlY2hfLnRyaWdnZXIoe1xuICAgICAgICAgIHR5cGU6ICd1c2FnZScsXG4gICAgICAgICAgbmFtZTogJ2hscy1kZW11eGVkJ1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKE9iamVjdC5rZXlzKG1lZGlhR3JvdXBzLlNVQlRJVExFUykubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMudGVjaF8udHJpZ2dlcih7XG4gICAgICAgICAgdHlwZTogJ3VzYWdlJyxcbiAgICAgICAgICBuYW1lOiAnaGxzLXdlYnZ0dCdcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChIbHMuUGxheWxpc3QuaXNBZXMobWVkaWEpKSB7XG4gICAgICAgIHRoaXMudGVjaF8udHJpZ2dlcih7XG4gICAgICAgICAgdHlwZTogJ3VzYWdlJyxcbiAgICAgICAgICBuYW1lOiAnaGxzLWFlcydcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChIbHMuUGxheWxpc3QuaXNGbXA0KG1lZGlhKSkge1xuICAgICAgICB0aGlzLnRlY2hfLnRyaWdnZXIoe1xuICAgICAgICAgIHR5cGU6ICd1c2FnZScsXG4gICAgICAgICAgbmFtZTogJ2hscy1mbXA0J1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGF1ZGlvR3JvdXBLZXlzLmxlbmd0aCAmJiBPYmplY3Qua2V5cyhtZWRpYUdyb3Vwcy5BVURJT1thdWRpb0dyb3VwS2V5c1swXV0pLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhpcy50ZWNoXy50cmlnZ2VyKHtcbiAgICAgICAgICB0eXBlOiAndXNhZ2UnLFxuICAgICAgICAgIG5hbWU6ICdobHMtYWx0ZXJuYXRlLWF1ZGlvJ1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMudXNlQ3VlVGFnc18pIHtcbiAgICAgICAgdGhpcy50ZWNoXy50cmlnZ2VyKHtcbiAgICAgICAgICB0eXBlOiAndXNhZ2UnLFxuICAgICAgICAgIG5hbWU6ICdobHMtcGxheWxpc3QtY3VlLXRhZ3MnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBldmVudCBoYW5kbGVycyBvbiB0aGUgc2VnbWVudCBsb2FkZXJzLiBBIGhlbHBlciBmdW5jdGlvblxuICAgICAqIGZvciBjb25zdHJ1Y3Rpb24gdGltZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3NldHVwU2VnbWVudExvYWRlckxpc3RlbmVyc18nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXR1cFNlZ21lbnRMb2FkZXJMaXN0ZW5lcnNfKCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHRoaXMubWFpblNlZ21lbnRMb2FkZXJfLm9uKCdiYW5kd2lkdGh1cGRhdGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBuZXh0UGxheWxpc3QgPSBfdGhpczMuc2VsZWN0UGxheWxpc3QoKTtcblxuICAgICAgICB2YXIgY3VycmVudFBsYXlsaXN0ID0gX3RoaXMzLm1hc3RlclBsYXlsaXN0TG9hZGVyXy5tZWRpYSgpO1xuXG4gICAgICAgIHZhciBidWZmZXJlZCA9IF90aGlzMy50ZWNoXy5idWZmZXJlZCgpO1xuXG4gICAgICAgIHZhciBmb3J3YXJkQnVmZmVyID0gYnVmZmVyZWQubGVuZ3RoID8gYnVmZmVyZWQuZW5kKGJ1ZmZlcmVkLmxlbmd0aCAtIDEpIC0gX3RoaXMzLnRlY2hfLmN1cnJlbnRUaW1lKCkgOiAwO1xuXG4gICAgICAgIHZhciBidWZmZXJMb3dXYXRlckxpbmUgPSBfdGhpczMuYnVmZmVyTG93V2F0ZXJMaW5lKCk7IC8vIElmIHRoZSBwbGF5bGlzdCBpcyBsaXZlLCB0aGVuIHdlIHdhbnQgdG8gbm90IHRha2UgbG93IHdhdGVyIGxpbmUgaW50byBhY2NvdW50LlxuICAgICAgICAvLyBUaGlzIGlzIGJlY2F1c2UgaW4gTElWRSwgdGhlIHBsYXllciBwbGF5cyAzIHNlZ21lbnRzIGZyb20gdGhlIGVuZCBvZiB0aGVcbiAgICAgICAgLy8gcGxheWxpc3QsIGFuZCBpZiBgQlVGRkVSX0xPV19XQVRFUl9MSU5FYCBpcyBncmVhdGVyIHRoYW4gdGhlIGR1cmF0aW9uIGF2YWlsYmxlXG4gICAgICAgIC8vIGluIHRob3NlIHNlZ21lbnRzLCBhIHZpZXdlciB3aWxsIG5ldmVyIGV4cGVyaWVuY2UgYSByZW5kaXRpb24gdXBzd2l0Y2guXG5cblxuICAgICAgICBpZiAoIWN1cnJlbnRQbGF5bGlzdC5lbmRMaXN0IHx8IC8vIEZvciB0aGUgc2FtZSByZWFzb24gYXMgTElWRSwgd2UgaWdub3JlIHRoZSBsb3cgd2F0ZXIgbGluZSB3aGVuIHRoZSBWT0RcbiAgICAgICAgLy8gZHVyYXRpb24gaXMgYmVsb3cgdGhlIG1heCBwb3RlbnRpYWwgbG93IHdhdGVyIGxpbmVcbiAgICAgICAgX3RoaXMzLmR1cmF0aW9uKCkgPCBDb25maWcuTUFYX0JVRkZFUl9MT1dfV0FURVJfTElORSB8fCAvLyB3ZSB3YW50IHRvIHN3aXRjaCBkb3duIHRvIGxvd2VyIHJlc29sdXRpb25zIHF1aWNrbHkgdG8gY29udGludWUgcGxheWJhY2ssIGJ1dFxuICAgICAgICBuZXh0UGxheWxpc3QuYXR0cmlidXRlcy5CQU5EV0lEVEggPCBjdXJyZW50UGxheWxpc3QuYXR0cmlidXRlcy5CQU5EV0lEVEggfHwgLy8gZW5zdXJlIHdlIGhhdmUgc29tZSBidWZmZXIgYmVmb3JlIHdlIHN3aXRjaCB1cCB0byBwcmV2ZW50IHVzIHJ1bm5pbmcgb3V0IG9mXG4gICAgICAgIC8vIGJ1ZmZlciB3aGlsZSBsb2FkaW5nIGEgaGlnaGVyIHJlbmRpdGlvbi5cbiAgICAgICAgZm9yd2FyZEJ1ZmZlciA+PSBidWZmZXJMb3dXYXRlckxpbmUpIHtcbiAgICAgICAgICBfdGhpczMubWFzdGVyUGxheWxpc3RMb2FkZXJfLm1lZGlhKG5leHRQbGF5bGlzdCk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczMudGVjaF8udHJpZ2dlcignYmFuZHdpZHRodXBkYXRlJyk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMubWFpblNlZ21lbnRMb2FkZXJfLm9uKCdwcm9ncmVzcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMzLnRyaWdnZXIoJ3Byb2dyZXNzJyk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMubWFpblNlZ21lbnRMb2FkZXJfLm9uKCdlcnJvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMzLmJsYWNrbGlzdEN1cnJlbnRQbGF5bGlzdChfdGhpczMubWFpblNlZ21lbnRMb2FkZXJfLmVycm9yKCkpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm1haW5TZWdtZW50TG9hZGVyXy5vbignc3luY2luZm91cGRhdGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMy5vblN5bmNJbmZvVXBkYXRlXygpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm1haW5TZWdtZW50TG9hZGVyXy5vbigndGltZXN0YW1wb2Zmc2V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczMudGVjaF8udHJpZ2dlcih7XG4gICAgICAgICAgdHlwZTogJ3VzYWdlJyxcbiAgICAgICAgICBuYW1lOiAnaGxzLXRpbWVzdGFtcC1vZmZzZXQnXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmF1ZGlvU2VnbWVudExvYWRlcl8ub24oJ3N5bmNpbmZvdXBkYXRlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczMub25TeW5jSW5mb1VwZGF0ZV8oKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5tYWluU2VnbWVudExvYWRlcl8ub24oJ2VuZGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczMub25FbmRPZlN0cmVhbSgpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm1haW5TZWdtZW50TG9hZGVyXy5vbignZWFybHlhYm9ydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMzLmJsYWNrbGlzdEN1cnJlbnRQbGF5bGlzdCh7XG4gICAgICAgICAgbWVzc2FnZTogJ0Fib3J0ZWQgZWFybHkgYmVjYXVzZSB0aGVyZSBpc25cXCd0IGVub3VnaCBiYW5kd2lkdGggdG8gY29tcGxldGUgdGhlICcgKyAncmVxdWVzdCB3aXRob3V0IHJlYnVmZmVyaW5nLidcbiAgICAgICAgfSwgQUJPUlRfRUFSTFlfQkxBQ0tMSVNUX1NFQ09ORFMpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm1haW5TZWdtZW50TG9hZGVyXy5vbigncmVzZXRldmVyeXRoaW5nJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBJZiBwbGF5aW5nIGFuIE1UUyBzdHJlYW0sIGEgdmlkZW9qcy5NZWRpYVNvdXJjZSBpcyBsaXN0ZW5pbmcgZm9yXG4gICAgICAgIC8vIGhscy1yZXNldCB0byByZXNldCBjYXB0aW9uIHBhcnNpbmcgc3RhdGUgaW4gdGhlIHRyYW5zbXV4ZXJcbiAgICAgICAgX3RoaXMzLnRlY2hfLnRyaWdnZXIoJ2hscy1yZXNldCcpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm1haW5TZWdtZW50TG9hZGVyXy5vbignc2VnbWVudHRpbWVtYXBwaW5nJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIElmIHBsYXlpbmcgYW4gTVRTIHN0cmVhbSBpbiBodG1sLCBhIHZpZGVvanMuTWVkaWFTb3VyY2UgaXMgbGlzdGVuaW5nIGZvclxuICAgICAgICAvLyBobHMtc2VnbWVudC10aW1lLW1hcHBpbmcgdXBkYXRlIGl0cyBpbnRlcm5hbCBtYXBwaW5nIG9mIHN0cmVhbSB0byBkaXNwbGF5IHRpbWVcbiAgICAgICAgX3RoaXMzLnRlY2hfLnRyaWdnZXIoe1xuICAgICAgICAgIHR5cGU6ICdobHMtc2VnbWVudC10aW1lLW1hcHBpbmcnLFxuICAgICAgICAgIG1hcHBpbmc6IGV2ZW50Lm1hcHBpbmdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuYXVkaW9TZWdtZW50TG9hZGVyXy5vbignZW5kZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMy5vbkVuZE9mU3RyZWFtKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdtZWRpYVNlY29uZHNMb2FkZWRfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWVkaWFTZWNvbmRzTG9hZGVkXygpIHtcbiAgICAgIHJldHVybiBNYXRoLm1heCh0aGlzLmF1ZGlvU2VnbWVudExvYWRlcl8ubWVkaWFTZWNvbmRzTG9hZGVkICsgdGhpcy5tYWluU2VnbWVudExvYWRlcl8ubWVkaWFTZWNvbmRzTG9hZGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBsb2FkIG9uIG91ciBTZWdtZW50TG9hZGVyc1xuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdsb2FkJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZCgpIHtcbiAgICAgIHRoaXMubWFpblNlZ21lbnRMb2FkZXJfLmxvYWQoKTtcblxuICAgICAgaWYgKHRoaXMubWVkaWFUeXBlc18uQVVESU8uYWN0aXZlUGxheWxpc3RMb2FkZXIpIHtcbiAgICAgICAgdGhpcy5hdWRpb1NlZ21lbnRMb2FkZXJfLmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMubWVkaWFUeXBlc18uU1VCVElUTEVTLmFjdGl2ZVBsYXlsaXN0TG9hZGVyKSB7XG4gICAgICAgIHRoaXMuc3VidGl0bGVTZWdtZW50TG9hZGVyXy5sb2FkKCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlLXR1bmUgcGxheWJhY2sgcXVhbGl0eSBsZXZlbCBmb3IgdGhlIGN1cnJlbnQgcGxheWVyXG4gICAgICogY29uZGl0aW9ucyB3aXRob3V0IHBlcmZvcm1pbmcgZGVzdHJ1Y3RpdmUgYWN0aW9ucywgbGlrZVxuICAgICAqIHJlbW92aW5nIGFscmVhZHkgYnVmZmVyZWQgY29udGVudFxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnc21vb3RoUXVhbGl0eUNoYW5nZV8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzbW9vdGhRdWFsaXR5Q2hhbmdlXygpIHtcbiAgICAgIHZhciBtZWRpYSA9IHRoaXMuc2VsZWN0UGxheWxpc3QoKTtcblxuICAgICAgaWYgKG1lZGlhICE9PSB0aGlzLm1hc3RlclBsYXlsaXN0TG9hZGVyXy5tZWRpYSgpKSB7XG4gICAgICAgIHRoaXMubWFzdGVyUGxheWxpc3RMb2FkZXJfLm1lZGlhKG1lZGlhKTtcbiAgICAgICAgdGhpcy5tYWluU2VnbWVudExvYWRlcl8ucmVzZXRMb2FkZXIoKTsgLy8gZG9uJ3QgbmVlZCB0byByZXNldCBhdWRpbyBhcyBpdCBpcyByZXNldCB3aGVuIG1lZGlhIGNoYW5nZXNcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmUtdHVuZSBwbGF5YmFjayBxdWFsaXR5IGxldmVsIGZvciB0aGUgY3VycmVudCBwbGF5ZXJcbiAgICAgKiBjb25kaXRpb25zLiBUaGlzIG1ldGhvZCB3aWxsIHBlcmZvcm0gZGVzdHJ1Y3RpdmUgYWN0aW9ucyBsaWtlIHJlbW92aW5nXG4gICAgICogYWxyZWFkeSBidWZmZXJlZCBjb250ZW50IGluIG9yZGVyIHRvIHJlYWRqdXN0IHRoZSBjdXJyZW50bHkgYWN0aXZlXG4gICAgICogcGxheWxpc3QgcXVpY2tseS4gVGhpcyBpcyBnb29kIGZvciBtYW51YWwgcXVhbGl0eSBjaGFuZ2VzXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdmYXN0UXVhbGl0eUNoYW5nZV8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmYXN0UXVhbGl0eUNoYW5nZV8oKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgdmFyIG1lZGlhID0gdGhpcy5zZWxlY3RQbGF5bGlzdCgpO1xuXG4gICAgICBpZiAobWVkaWEgPT09IHRoaXMubWFzdGVyUGxheWxpc3RMb2FkZXJfLm1lZGlhKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1hc3RlclBsYXlsaXN0TG9hZGVyXy5tZWRpYShtZWRpYSk7IC8vIERlbGV0ZSBhbGwgYnVmZmVyZWQgZGF0YSB0byBhbGxvdyBhbiBpbW1lZGlhdGUgcXVhbGl0eSBzd2l0Y2gsIHRoZW4gc2VlayB0byBnaXZlXG4gICAgICAvLyB0aGUgYnJvd3NlciBhIGtpY2sgdG8gcmVtb3ZlIGFueSBjYWNoZWQgZnJhbWVzIGZyb20gdGhlIHByZXZpb3VzIHJlbmR0aW9uICguMDQgc2Vjb25kc1xuICAgICAgLy8gYWhlYWQgaXMgcm91Z2hseSB0aGUgbWluaW11bSB0aGF0IHdpbGwgYWNjb21wbGlzaCB0aGlzIGFjcm9zcyBhIHZhcmlldHkgb2YgY29udGVudFxuICAgICAgLy8gaW4gSUUgYW5kIEVkZ2UsIGJ1dCBzZWVraW5nIGluIHBsYWNlIGlzIHN1ZmZpY2llbnQgb24gYWxsIG90aGVyIGJyb3dzZXJzKVxuICAgICAgLy8gRWRnZS9JRSBidWc6IGh0dHBzOi8vZGV2ZWxvcGVyLm1pY3Jvc29mdC5jb20vZW4tdXMvbWljcm9zb2Z0LWVkZ2UvcGxhdGZvcm0vaXNzdWVzLzE0NjAwMzc1L1xuICAgICAgLy8gQ2hyb21lIGJ1ZzogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NjUxOTA0XG5cbiAgICAgIHRoaXMubWFpblNlZ21lbnRMb2FkZXJfLnJlc2V0RXZlcnl0aGluZyhmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIFNpbmNlIHRoaXMgaXMgbm90IGEgdHlwaWNhbCBzZWVrLCB3ZSBhdm9pZCB0aGUgc2Vla1RvIG1ldGhvZCB3aGljaCBjYW4gY2F1c2Ugc2VnbWVudHNcbiAgICAgICAgLy8gZnJvbSB0aGUgcHJldmlvdXNseSBlbmFibGVkIHJlbmRpdGlvbiB0byBsb2FkIGJlZm9yZSB0aGUgbmV3IHBsYXlsaXN0IGhhcyBmaW5pc2hlZCBsb2FkaW5nXG4gICAgICAgIGlmICh2aWRlb2pzJDEuYnJvd3Nlci5JRV9WRVJTSU9OIHx8IHZpZGVvanMkMS5icm93c2VyLklTX0VER0UpIHtcbiAgICAgICAgICBfdGhpczQudGVjaF8uc2V0Q3VycmVudFRpbWUoX3RoaXM0LnRlY2hfLmN1cnJlbnRUaW1lKCkgKyAwLjA0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfdGhpczQudGVjaF8uc2V0Q3VycmVudFRpbWUoX3RoaXM0LnRlY2hfLmN1cnJlbnRUaW1lKCkpO1xuICAgICAgICB9XG4gICAgICB9KTsgLy8gZG9uJ3QgbmVlZCB0byByZXNldCBhdWRpbyBhcyBpdCBpcyByZXNldCB3aGVuIG1lZGlhIGNoYW5nZXNcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmVnaW4gcGxheWJhY2suXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3BsYXknLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwbGF5KCkge1xuICAgICAgaWYgKHRoaXMuc2V0dXBGaXJzdFBsYXkoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnRlY2hfLmVuZGVkKCkpIHtcbiAgICAgICAgdGhpcy5zZWVrVG9fKDApO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5oYXNQbGF5ZWRfKCkpIHtcbiAgICAgICAgdGhpcy5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBzZWVrYWJsZSQkMSA9IHRoaXMudGVjaF8uc2Vla2FibGUoKTsgLy8gaWYgdGhlIHZpZXdlciBoYXMgcGF1c2VkIGFuZCB3ZSBmZWxsIG91dCBvZiB0aGUgbGl2ZSB3aW5kb3csXG4gICAgICAvLyBzZWVrIGZvcndhcmQgdG8gdGhlIGxpdmUgcG9pbnRcblxuICAgICAgaWYgKHRoaXMudGVjaF8uZHVyYXRpb24oKSA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgaWYgKHRoaXMudGVjaF8uY3VycmVudFRpbWUoKSA8IHNlZWthYmxlJCQxLnN0YXJ0KDApKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuc2Vla1RvXyhzZWVrYWJsZSQkMS5lbmQoc2Vla2FibGUkJDEubGVuZ3RoIC0gMSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlZWsgdG8gdGhlIGxhdGVzdCBtZWRpYSBwb3NpdGlvbiBpZiB0aGlzIGlzIGEgbGl2ZSB2aWRlbyBhbmQgdGhlXG4gICAgICogcGxheWVyIGFuZCB2aWRlbyBhcmUgbG9hZGVkIGFuZCBpbml0aWFsaXplZC5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnc2V0dXBGaXJzdFBsYXknLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXR1cEZpcnN0UGxheSgpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICB2YXIgbWVkaWEgPSB0aGlzLm1hc3RlclBsYXlsaXN0TG9hZGVyXy5tZWRpYSgpOyAvLyBDaGVjayB0aGF0IGV2ZXJ5dGhpbmcgaXMgcmVhZHkgdG8gYmVnaW4gYnVmZmVyaW5nIGZvciB0aGUgZmlyc3QgY2FsbCB0byBwbGF5XG4gICAgICAvLyAgSWYgMSkgdGhlcmUgaXMgbm8gYWN0aXZlIG1lZGlhXG4gICAgICAvLyAgICAgMikgdGhlIHBsYXllciBpcyBwYXVzZWRcbiAgICAgIC8vICAgICAzKSB0aGUgZmlyc3QgcGxheSBoYXMgYWxyZWFkeSBiZWVuIHNldHVwXG4gICAgICAvLyB0aGVuIGV4aXQgZWFybHlcblxuICAgICAgaWYgKCFtZWRpYSB8fCB0aGlzLnRlY2hfLnBhdXNlZCgpIHx8IHRoaXMuaGFzUGxheWVkXygpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gLy8gd2hlbiB0aGUgdmlkZW8gaXMgYSBsaXZlIHN0cmVhbVxuXG5cbiAgICAgIGlmICghbWVkaWEuZW5kTGlzdCkge1xuICAgICAgICB2YXIgc2Vla2FibGUkJDEgPSB0aGlzLnNlZWthYmxlKCk7XG5cbiAgICAgICAgaWYgKCFzZWVrYWJsZSQkMS5sZW5ndGgpIHtcbiAgICAgICAgICAvLyB3aXRob3V0IGEgc2Vla2FibGUgcmFuZ2UsIHRoZSBwbGF5ZXIgY2Fubm90IHNlZWsgdG8gYmVnaW4gYnVmZmVyaW5nIGF0IHRoZSBsaXZlXG4gICAgICAgICAgLy8gcG9pbnRcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmlkZW9qcyQxLmJyb3dzZXIuSUVfVkVSU0lPTiAmJiB0aGlzLnRlY2hfLnJlYWR5U3RhdGUoKSA9PT0gMCkge1xuICAgICAgICAgIC8vIElFMTEgdGhyb3dzIGFuIEludmFsaWRTdGF0ZUVycm9yIGlmIHlvdSB0cnkgdG8gc2V0IGN1cnJlbnRUaW1lIHdoaWxlIHRoZVxuICAgICAgICAgIC8vIHJlYWR5U3RhdGUgaXMgMCwgc28gaXQgbXVzdCBiZSBkZWxheWVkIHVudGlsIHRoZSB0ZWNoIGZpcmVzIGxvYWRlZG1ldGFkYXRhLlxuICAgICAgICAgIHRoaXMudGVjaF8ub25lKCdsb2FkZWRtZXRhZGF0YScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzNS50cmlnZ2VyKCdmaXJzdHBsYXknKTtcblxuICAgICAgICAgICAgX3RoaXM1LnNlZWtUb18oc2Vla2FibGUkJDEuZW5kKDApKTtcblxuICAgICAgICAgICAgX3RoaXM1Lmhhc1BsYXllZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gLy8gdHJpZ2dlciBmaXJzdHBsYXkgdG8gaW5mb3JtIHRoZSBzb3VyY2UgaGFuZGxlciB0byBpZ25vcmUgdGhlIG5leHQgc2VlayBldmVudFxuXG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdmaXJzdHBsYXknKTsgLy8gc2VlayB0byB0aGUgbGl2ZSBwb2ludFxuXG4gICAgICAgIHRoaXMuc2Vla1RvXyhzZWVrYWJsZSQkMS5lbmQoMCkpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmhhc1BsYXllZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfTsgLy8gd2UgY2FuIGJlZ2luIGxvYWRpbmcgbm93IHRoYXQgZXZlcnl0aGluZyBpcyByZWFkeVxuXG5cbiAgICAgIHRoaXMubG9hZCgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGhhbmRsZSB0aGUgc291cmNlb3BlbiBldmVudCBvbiB0aGUgTWVkaWFTb3VyY2VcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2hhbmRsZVNvdXJjZU9wZW5fJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU291cmNlT3Blbl8oKSB7XG4gICAgICAvLyBPbmx5IGF0dGVtcHQgdG8gY3JlYXRlIHRoZSBzb3VyY2UgYnVmZmVyIGlmIG5vbmUgYWxyZWFkeSBleGlzdC5cbiAgICAgIC8vIGhhbmRsZVNvdXJjZU9wZW4gaXMgYWxzbyBjYWxsZWQgd2hlbiB3ZSBhcmUgXCJyZS1vcGVuaW5nXCIgYSBzb3VyY2UgYnVmZmVyXG4gICAgICAvLyBhZnRlciBgZW5kT2ZTdHJlYW1gIGhhcyBiZWVuIGNhbGxlZCAoaW4gcmVzcG9uc2UgdG8gYSBzZWVrIGZvciBpbnN0YW5jZSlcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuc2V0dXBTb3VyY2VCdWZmZXJzXygpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB2aWRlb2pzJDEubG9nLndhcm4oJ0ZhaWxlZCB0byBjcmVhdGUgU291cmNlIEJ1ZmZlcnMnLCBlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVkaWFTb3VyY2UuZW5kT2ZTdHJlYW0oJ2RlY29kZScpO1xuICAgICAgfSAvLyBpZiBhdXRvcGxheSBpcyBlbmFibGVkLCBiZWdpbiBwbGF5YmFjay4gVGhpcyBpcyBkdXBsaWNhdGl2ZSBvZlxuICAgICAgLy8gY29kZSBpbiB2aWRlby5qcyBidXQgaXMgcmVxdWlyZWQgYmVjYXVzZSBwbGF5KCkgbXVzdCBiZSBpbnZva2VkXG4gICAgICAvLyAqYWZ0ZXIqIHRoZSBtZWRpYSBzb3VyY2UgaGFzIG9wZW5lZC5cblxuXG4gICAgICBpZiAodGhpcy50ZWNoXy5hdXRvcGxheSgpKSB7XG4gICAgICAgIHZhciBwbGF5UHJvbWlzZSA9IHRoaXMudGVjaF8ucGxheSgpOyAvLyBDYXRjaC9zaWxlbmNlIGVycm9yIHdoZW4gYSBwYXVzZSBpbnRlcnJ1cHRzIGEgcGxheSByZXF1ZXN0XG4gICAgICAgIC8vIG9uIGJyb3dzZXJzIHdoaWNoIHJldHVybiBhIHByb21pc2VcblxuICAgICAgICBpZiAodHlwZW9mIHBsYXlQcm9taXNlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcGxheVByb21pc2UudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHBsYXlQcm9taXNlLnRoZW4obnVsbCwgZnVuY3Rpb24gKGUpIHt9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLnRyaWdnZXIoJ3NvdXJjZW9wZW4nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbHMgZW5kT2ZTdHJlYW0gb24gdGhlIG1lZGlhIHNvdXJjZSB3aGVuIGFsbCBhY3RpdmUgc3RyZWFtIHR5cGVzIGhhdmUgY2FsbGVkXG4gICAgICogZW5kT2ZTdHJlYW1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJlYW1UeXBlXG4gICAgICogICAgICAgIFN0cmVhbSB0eXBlIG9mIHRoZSBzZWdtZW50IGxvYWRlciB0aGF0IGNhbGxlZCBlbmRPZlN0cmVhbVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ29uRW5kT2ZTdHJlYW0nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkVuZE9mU3RyZWFtKCkge1xuICAgICAgdmFyIGlzRW5kT2ZTdHJlYW0gPSB0aGlzLm1haW5TZWdtZW50TG9hZGVyXy5lbmRlZF87XG5cbiAgICAgIGlmICh0aGlzLm1lZGlhVHlwZXNfLkFVRElPLmFjdGl2ZVBsYXlsaXN0TG9hZGVyKSB7XG4gICAgICAgIC8vIGlmIHRoZSBhdWRpbyBwbGF5bGlzdCBsb2FkZXIgZXhpc3RzLCB0aGVuIGFsdGVybmF0ZSBhdWRpbyBpcyBhY3RpdmVcbiAgICAgICAgaWYgKCF0aGlzLm1haW5TZWdtZW50TG9hZGVyXy5zdGFydGluZ01lZGlhXyB8fCB0aGlzLm1haW5TZWdtZW50TG9hZGVyXy5zdGFydGluZ01lZGlhXy5jb250YWluc1ZpZGVvKSB7XG4gICAgICAgICAgLy8gaWYgd2UgZG8gbm90IGtub3cgaWYgdGhlIG1haW4gc2VnbWVudCBsb2FkZXIgY29udGFpbnMgdmlkZW8geWV0IG9yIGlmIHdlXG4gICAgICAgICAgLy8gZGVmaW5pdGl2ZWx5IGtub3cgdGhlIG1haW4gc2VnbWVudCBsb2FkZXIgY29udGFpbnMgdmlkZW8sIHRoZW4gd2UgbmVlZCB0byB3YWl0XG4gICAgICAgICAgLy8gZm9yIGJvdGggbWFpbiBhbmQgYXVkaW8gc2VnbWVudCBsb2FkZXJzIHRvIGNhbGwgZW5kT2ZTdHJlYW1cbiAgICAgICAgICBpc0VuZE9mU3RyZWFtID0gaXNFbmRPZlN0cmVhbSAmJiB0aGlzLmF1ZGlvU2VnbWVudExvYWRlcl8uZW5kZWRfO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG90aGVyd2lzZSBqdXN0IHJlbHkgb24gdGhlIGF1ZGlvIGxvYWRlclxuICAgICAgICAgIGlzRW5kT2ZTdHJlYW0gPSB0aGlzLmF1ZGlvU2VnbWVudExvYWRlcl8uZW5kZWRfO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNFbmRPZlN0cmVhbSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMubG9nZ2VyXygnY2FsbGluZyBtZWRpYVNvdXJjZS5lbmRPZlN0cmVhbSgpJyk7IC8vIG9uIGNocm9tZSBjYWxsaW5nIGVuZE9mU3RyZWFtIGNhbiBzb21ldGltZXMgY2F1c2UgYW4gZXhjZXB0aW9uLFxuICAgICAgLy8gZXZlbiB3aGVuIHRoZSBtZWRpYSBzb3VyY2UgaXMgaW4gYSB2YWxpZCBzdGF0ZS5cblxuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5tZWRpYVNvdXJjZS5lbmRPZlN0cmVhbSgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB2aWRlb2pzJDEubG9nLndhcm4oJ0ZhaWxlZCB0byBjYWxsIG1lZGlhIHNvdXJjZSBlbmRPZlN0cmVhbScsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIHBsYXlsaXN0IGhhcyBzdG9wcGVkIGJlaW5nIHVwZGF0ZWRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGxheWxpc3QgdGhlIG1lZGlhIHBsYXlsaXN0IG9iamVjdFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHdoZXRoZXIgdGhlIHBsYXlsaXN0IGhhcyBzdG9wcGVkIGJlaW5nIHVwZGF0ZWQgb3Igbm90XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3N0dWNrQXRQbGF5bGlzdEVuZF8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzdHVja0F0UGxheWxpc3RFbmRfKHBsYXlsaXN0KSB7XG4gICAgICB2YXIgc2Vla2FibGUkJDEgPSB0aGlzLnNlZWthYmxlKCk7XG5cbiAgICAgIGlmICghc2Vla2FibGUkJDEubGVuZ3RoKSB7XG4gICAgICAgIC8vIHBsYXlsaXN0IGRvZXNuJ3QgaGF2ZSBlbm91Z2ggaW5mb3JtYXRpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgd2UgYXJlIHN0dWNrXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGV4cGlyZWQgPSB0aGlzLnN5bmNDb250cm9sbGVyXy5nZXRFeHBpcmVkVGltZShwbGF5bGlzdCwgdGhpcy5tZWRpYVNvdXJjZS5kdXJhdGlvbik7XG5cbiAgICAgIGlmIChleHBpcmVkID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gLy8gZG9lcyBub3QgdXNlIHRoZSBzYWZlIGxpdmUgZW5kIHRvIGNhbGN1bGF0ZSBwbGF5bGlzdCBlbmQsIHNpbmNlIHdlXG4gICAgICAvLyBkb24ndCB3YW50IHRvIHNheSB3ZSBhcmUgc3R1Y2sgd2hpbGUgdGhlcmUgaXMgc3RpbGwgY29udGVudFxuXG5cbiAgICAgIHZhciBhYnNvbHV0ZVBsYXlsaXN0RW5kID0gSGxzLlBsYXlsaXN0LnBsYXlsaXN0RW5kKHBsYXlsaXN0LCBleHBpcmVkKTtcbiAgICAgIHZhciBjdXJyZW50VGltZSA9IHRoaXMudGVjaF8uY3VycmVudFRpbWUoKTtcbiAgICAgIHZhciBidWZmZXJlZCA9IHRoaXMudGVjaF8uYnVmZmVyZWQoKTtcblxuICAgICAgaWYgKCFidWZmZXJlZC5sZW5ndGgpIHtcbiAgICAgICAgLy8gcmV0dXJuIHRydWUgaWYgdGhlIHBsYXloZWFkIHJlYWNoZWQgdGhlIGFic29sdXRlIGVuZCBvZiB0aGUgcGxheWxpc3RcbiAgICAgICAgcmV0dXJuIGFic29sdXRlUGxheWxpc3RFbmQgLSBjdXJyZW50VGltZSA8PSBTQUZFX1RJTUVfREVMVEE7XG4gICAgICB9XG5cbiAgICAgIHZhciBidWZmZXJlZEVuZCA9IGJ1ZmZlcmVkLmVuZChidWZmZXJlZC5sZW5ndGggLSAxKTsgLy8gcmV0dXJuIHRydWUgaWYgdGhlcmUgaXMgdG9vIGxpdHRsZSBidWZmZXIgbGVmdCBhbmQgYnVmZmVyIGhhcyByZWFjaGVkIGFic29sdXRlXG4gICAgICAvLyBlbmQgb2YgcGxheWxpc3RcblxuICAgICAgcmV0dXJuIGJ1ZmZlcmVkRW5kIC0gY3VycmVudFRpbWUgPD0gU0FGRV9USU1FX0RFTFRBICYmIGFic29sdXRlUGxheWxpc3RFbmQgLSBidWZmZXJlZEVuZCA8PSBTQUZFX1RJTUVfREVMVEE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJsYWNrbGlzdHMgYSBwbGF5bGlzdCB3aGVuIGFuIGVycm9yIG9jY3VycyBmb3IgYSBzZXQgYW1vdW50IG9mIHRpbWVcbiAgICAgKiBtYWtpbmcgaXQgdW5hdmFpbGFibGUgZm9yIHNlbGVjdGlvbiBieSB0aGUgcmVuZGl0aW9uIHNlbGVjdGlvbiBhbGdvcml0aG1cbiAgICAgKiBhbmQgdGhlbiBmb3JjZXMgYSBuZXcgcGxheWxpc3QgKHJlbmRpdGlvbikgc2VsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBlcnJvciBhbiBvcHRpb25hbCBlcnJvciB0aGF0IG1heSBpbmNsdWRlIHRoZSBwbGF5bGlzdFxuICAgICAqIHRvIGJsYWNrbGlzdFxuICAgICAqIEBwYXJhbSB7TnVtYmVyPX0gYmxhY2tsaXN0RHVyYXRpb24gYW4gb3B0aW9uYWwgbnVtYmVyIG9mIHNlY29uZHMgdG8gYmxhY2tsaXN0IHRoZVxuICAgICAqIHBsYXlsaXN0XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2JsYWNrbGlzdEN1cnJlbnRQbGF5bGlzdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGJsYWNrbGlzdEN1cnJlbnRQbGF5bGlzdCgpIHtcbiAgICAgIHZhciBlcnJvciA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgICB2YXIgYmxhY2tsaXN0RHVyYXRpb24gPSBhcmd1bWVudHNbMV07XG4gICAgICB2YXIgY3VycmVudFBsYXlsaXN0ID0gdm9pZCAwO1xuICAgICAgdmFyIG5leHRQbGF5bGlzdCA9IHZvaWQgMDsgLy8gSWYgdGhlIGBlcnJvcmAgd2FzIGdlbmVyYXRlZCBieSB0aGUgcGxheWxpc3QgbG9hZGVyLCBpdCB3aWxsIGNvbnRhaW5cbiAgICAgIC8vIHRoZSBwbGF5bGlzdCB3ZSB3ZXJlIHRyeWluZyB0byBsb2FkIChidXQgZmFpbGVkKSBhbmQgdGhhdCBzaG91bGQgYmVcbiAgICAgIC8vIGJsYWNrbGlzdGVkIGluc3RlYWQgb2YgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBwbGF5bGlzdCB3aGljaCBpcyBsaWtlbHlcbiAgICAgIC8vIG91dC1vZi1kYXRlIGluIHRoaXMgc2NlbmFyaW9cblxuICAgICAgY3VycmVudFBsYXlsaXN0ID0gZXJyb3IucGxheWxpc3QgfHwgdGhpcy5tYXN0ZXJQbGF5bGlzdExvYWRlcl8ubWVkaWEoKTtcbiAgICAgIGJsYWNrbGlzdER1cmF0aW9uID0gYmxhY2tsaXN0RHVyYXRpb24gfHwgZXJyb3IuYmxhY2tsaXN0RHVyYXRpb24gfHwgdGhpcy5ibGFja2xpc3REdXJhdGlvbjsgLy8gSWYgdGhlcmUgaXMgbm8gY3VycmVudCBwbGF5bGlzdCwgdGhlbiBhbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB3ZSB3ZXJlXG4gICAgICAvLyB0cnlpbmcgdG8gbG9hZCB0aGUgbWFzdGVyIE9SIHdoaWxlIHdlIHdlcmUgZGlzcG9zaW5nIG9mIHRoZSB0ZWNoXG5cbiAgICAgIGlmICghY3VycmVudFBsYXlsaXN0KSB7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiB0aGlzLm1lZGlhU291cmNlLmVuZE9mU3RyZWFtKCduZXR3b3JrJyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy50cmlnZ2VyKCdlcnJvcicpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBpc0ZpbmFsUmVuZGl0aW9uID0gdGhpcy5tYXN0ZXJQbGF5bGlzdExvYWRlcl8ubWFzdGVyLnBsYXlsaXN0cy5maWx0ZXIoaXNFbmFibGVkKS5sZW5ndGggPT09IDE7XG5cbiAgICAgIGlmIChpc0ZpbmFsUmVuZGl0aW9uKSB7XG4gICAgICAgIC8vIE5ldmVyIGJsYWNrbGlzdGluZyB0aGlzIHBsYXlsaXN0IGJlY2F1c2UgaXQncyBmaW5hbCByZW5kaXRpb25cbiAgICAgICAgdmlkZW9qcyQxLmxvZy53YXJuKCdQcm9ibGVtIGVuY291bnRlcmVkIHdpdGggdGhlIGN1cnJlbnQgJyArICdITFMgcGxheWxpc3QuIFRyeWluZyBhZ2FpbiBzaW5jZSBpdCBpcyB0aGUgZmluYWwgcGxheWxpc3QuJyk7XG4gICAgICAgIHRoaXMudGVjaF8udHJpZ2dlcigncmV0cnlwbGF5bGlzdCcpO1xuICAgICAgICByZXR1cm4gdGhpcy5tYXN0ZXJQbGF5bGlzdExvYWRlcl8ubG9hZChpc0ZpbmFsUmVuZGl0aW9uKTtcbiAgICAgIH0gLy8gQmxhY2tsaXN0IHRoaXMgcGxheWxpc3RcblxuXG4gICAgICBjdXJyZW50UGxheWxpc3QuZXhjbHVkZVVudGlsID0gRGF0ZS5ub3coKSArIGJsYWNrbGlzdER1cmF0aW9uICogMTAwMDtcbiAgICAgIHRoaXMudGVjaF8udHJpZ2dlcignYmxhY2tsaXN0cGxheWxpc3QnKTtcbiAgICAgIHRoaXMudGVjaF8udHJpZ2dlcih7XG4gICAgICAgIHR5cGU6ICd1c2FnZScsXG4gICAgICAgIG5hbWU6ICdobHMtcmVuZGl0aW9uLWJsYWNrbGlzdGVkJ1xuICAgICAgfSk7IC8vIFNlbGVjdCBhIG5ldyBwbGF5bGlzdFxuXG4gICAgICBuZXh0UGxheWxpc3QgPSB0aGlzLnNlbGVjdFBsYXlsaXN0KCk7XG4gICAgICB2aWRlb2pzJDEubG9nLndhcm4oJ1Byb2JsZW0gZW5jb3VudGVyZWQgd2l0aCB0aGUgY3VycmVudCBITFMgcGxheWxpc3QuJyArIChlcnJvci5tZXNzYWdlID8gJyAnICsgZXJyb3IubWVzc2FnZSA6ICcnKSArICcgU3dpdGNoaW5nIHRvIGFub3RoZXIgcGxheWxpc3QuJyk7XG4gICAgICByZXR1cm4gdGhpcy5tYXN0ZXJQbGF5bGlzdExvYWRlcl8ubWVkaWEobmV4dFBsYXlsaXN0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGF1c2UgYWxsIHNlZ21lbnQgbG9hZGVyc1xuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdwYXVzZUxvYWRpbmcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXVzZUxvYWRpbmcoKSB7XG4gICAgICB0aGlzLm1haW5TZWdtZW50TG9hZGVyXy5wYXVzZSgpO1xuXG4gICAgICBpZiAodGhpcy5tZWRpYVR5cGVzXy5BVURJTy5hY3RpdmVQbGF5bGlzdExvYWRlcikge1xuICAgICAgICB0aGlzLmF1ZGlvU2VnbWVudExvYWRlcl8ucGF1c2UoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMubWVkaWFUeXBlc18uU1VCVElUTEVTLmFjdGl2ZVBsYXlsaXN0TG9hZGVyKSB7XG4gICAgICAgIHRoaXMuc3VidGl0bGVTZWdtZW50TG9hZGVyXy5wYXVzZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBzZXQgdGhlIGN1cnJlbnQgdGltZSBvbiBhbGwgc2VnbWVudCBsb2FkZXJzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RpbWVSYW5nZX0gY3VycmVudFRpbWUgdGhlIGN1cnJlbnQgdGltZSB0byBzZXRcbiAgICAgKiBAcmV0dXJuIHtUaW1lUmFuZ2V9IHRoZSBjdXJyZW50IHRpbWVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnc2V0Q3VycmVudFRpbWUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRDdXJyZW50VGltZShjdXJyZW50VGltZSkge1xuICAgICAgdmFyIGJ1ZmZlcmVkID0gZmluZFJhbmdlKHRoaXMudGVjaF8uYnVmZmVyZWQoKSwgY3VycmVudFRpbWUpO1xuXG4gICAgICBpZiAoISh0aGlzLm1hc3RlclBsYXlsaXN0TG9hZGVyXyAmJiB0aGlzLm1hc3RlclBsYXlsaXN0TG9hZGVyXy5tZWRpYSgpKSkge1xuICAgICAgICAvLyByZXR1cm4gaW1tZWRpYXRlbHkgaWYgdGhlIG1ldGFkYXRhIGlzIG5vdCByZWFkeSB5ZXRcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9IC8vIGl0J3MgY2xlYXJseSBhbiBlZGdlLWNhc2UgYnV0IGRvbid0IHRocm93biBhbiBlcnJvciBpZiBhc2tlZCB0b1xuICAgICAgLy8gc2VlayB3aXRoaW4gYW4gZW1wdHkgcGxheWxpc3RcblxuXG4gICAgICBpZiAoIXRoaXMubWFzdGVyUGxheWxpc3RMb2FkZXJfLm1lZGlhKCkuc2VnbWVudHMpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9IC8vIEluIGZsYXNoIHBsYXliYWNrLCB0aGUgc2VnbWVudCBsb2FkZXJzIHNob3VsZCBiZSByZXNldCBvbiBldmVyeSBzZWVrLCBldmVuXG4gICAgICAvLyBpbiBidWZmZXIgc2Vla3MuIElmIHRoZSBzZWVrIGxvY2F0aW9uIGlzIGFscmVhZHkgYnVmZmVyZWQsIGNvbnRpbnVlIGJ1ZmZlcmluZyBhc1xuICAgICAgLy8gdXN1YWxcbiAgICAgIC8vIFRPRE86IHJlZG8gdGhpcyBjb21tZW50XG5cblxuICAgICAgaWYgKGJ1ZmZlcmVkICYmIGJ1ZmZlcmVkLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gY3VycmVudFRpbWU7XG4gICAgICB9IC8vIGNhbmNlbCBvdXRzdGFuZGluZyByZXF1ZXN0cyBzbyB3ZSBiZWdpbiBidWZmZXJpbmcgYXQgdGhlIG5ld1xuICAgICAgLy8gbG9jYXRpb25cblxuXG4gICAgICB0aGlzLm1haW5TZWdtZW50TG9hZGVyXy5yZXNldEV2ZXJ5dGhpbmcoKTtcbiAgICAgIHRoaXMubWFpblNlZ21lbnRMb2FkZXJfLmFib3J0KCk7XG5cbiAgICAgIGlmICh0aGlzLm1lZGlhVHlwZXNfLkFVRElPLmFjdGl2ZVBsYXlsaXN0TG9hZGVyKSB7XG4gICAgICAgIHRoaXMuYXVkaW9TZWdtZW50TG9hZGVyXy5yZXNldEV2ZXJ5dGhpbmcoKTtcbiAgICAgICAgdGhpcy5hdWRpb1NlZ21lbnRMb2FkZXJfLmFib3J0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm1lZGlhVHlwZXNfLlNVQlRJVExFUy5hY3RpdmVQbGF5bGlzdExvYWRlcikge1xuICAgICAgICB0aGlzLnN1YnRpdGxlU2VnbWVudExvYWRlcl8ucmVzZXRFdmVyeXRoaW5nKCk7XG4gICAgICAgIHRoaXMuc3VidGl0bGVTZWdtZW50TG9hZGVyXy5hYm9ydCgpO1xuICAgICAgfSAvLyBzdGFydCBzZWdtZW50IGxvYWRlciBsb2FkaW5nIGluIGNhc2UgdGhleSBhcmUgcGF1c2VkXG5cblxuICAgICAgdGhpcy5sb2FkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGdldCB0aGUgY3VycmVudCBkdXJhdGlvblxuICAgICAqXG4gICAgICogQHJldHVybiB7VGltZVJhbmdlfSB0aGUgZHVyYXRpb25cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZHVyYXRpb24nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkdXJhdGlvbiQkMSgpIHtcbiAgICAgIGlmICghdGhpcy5tYXN0ZXJQbGF5bGlzdExvYWRlcl8pIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm1lZGlhU291cmNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lZGlhU291cmNlLmR1cmF0aW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gSGxzLlBsYXlsaXN0LmR1cmF0aW9uKHRoaXMubWFzdGVyUGxheWxpc3RMb2FkZXJfLm1lZGlhKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBjaGVjayB0aGUgc2Vla2FibGUgcmFuZ2VcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1RpbWVSYW5nZX0gdGhlIHNlZWthYmxlIHJhbmdlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3NlZWthYmxlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2Vla2FibGUkJDEoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZWVrYWJsZV87XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25TeW5jSW5mb1VwZGF0ZV8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblN5bmNJbmZvVXBkYXRlXygpIHtcbiAgICAgIHZhciBtYWluU2Vla2FibGUgPSB2b2lkIDA7XG4gICAgICB2YXIgYXVkaW9TZWVrYWJsZSA9IHZvaWQgMDtcblxuICAgICAgaWYgKCF0aGlzLm1hc3RlclBsYXlsaXN0TG9hZGVyXykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBtZWRpYSA9IHRoaXMubWFzdGVyUGxheWxpc3RMb2FkZXJfLm1lZGlhKCk7XG5cbiAgICAgIGlmICghbWVkaWEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZXhwaXJlZCA9IHRoaXMuc3luY0NvbnRyb2xsZXJfLmdldEV4cGlyZWRUaW1lKG1lZGlhLCB0aGlzLm1lZGlhU291cmNlLmR1cmF0aW9uKTtcblxuICAgICAgaWYgKGV4cGlyZWQgPT09IG51bGwpIHtcbiAgICAgICAgLy8gbm90IGVub3VnaCBpbmZvcm1hdGlvbiB0byB1cGRhdGUgc2Vla2FibGVcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYWluU2Vla2FibGUgPSBIbHMuUGxheWxpc3Quc2Vla2FibGUobWVkaWEsIGV4cGlyZWQpO1xuXG4gICAgICBpZiAobWFpblNlZWthYmxlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm1lZGlhVHlwZXNfLkFVRElPLmFjdGl2ZVBsYXlsaXN0TG9hZGVyKSB7XG4gICAgICAgIG1lZGlhID0gdGhpcy5tZWRpYVR5cGVzXy5BVURJTy5hY3RpdmVQbGF5bGlzdExvYWRlci5tZWRpYSgpO1xuICAgICAgICBleHBpcmVkID0gdGhpcy5zeW5jQ29udHJvbGxlcl8uZ2V0RXhwaXJlZFRpbWUobWVkaWEsIHRoaXMubWVkaWFTb3VyY2UuZHVyYXRpb24pO1xuXG4gICAgICAgIGlmIChleHBpcmVkID09PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXVkaW9TZWVrYWJsZSA9IEhscy5QbGF5bGlzdC5zZWVrYWJsZShtZWRpYSwgZXhwaXJlZCk7XG5cbiAgICAgICAgaWYgKGF1ZGlvU2Vla2FibGUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBvbGRFbmQgPSB2b2lkIDA7XG4gICAgICB2YXIgb2xkU3RhcnQgPSB2b2lkIDA7XG5cbiAgICAgIGlmICh0aGlzLnNlZWthYmxlXyAmJiB0aGlzLnNlZWthYmxlXy5sZW5ndGgpIHtcbiAgICAgICAgb2xkRW5kID0gdGhpcy5zZWVrYWJsZV8uZW5kKDApO1xuICAgICAgICBvbGRTdGFydCA9IHRoaXMuc2Vla2FibGVfLnN0YXJ0KDApO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWF1ZGlvU2Vla2FibGUpIHtcbiAgICAgICAgLy8gc2Vla2FibGUgaGFzIGJlZW4gY2FsY3VsYXRlZCBiYXNlZCBvbiBidWZmZXJpbmcgdmlkZW8gZGF0YSBzbyBpdFxuICAgICAgICAvLyBjYW4gYmUgcmV0dXJuZWQgZGlyZWN0bHlcbiAgICAgICAgdGhpcy5zZWVrYWJsZV8gPSBtYWluU2Vla2FibGU7XG4gICAgICB9IGVsc2UgaWYgKGF1ZGlvU2Vla2FibGUuc3RhcnQoMCkgPiBtYWluU2Vla2FibGUuZW5kKDApIHx8IG1haW5TZWVrYWJsZS5zdGFydCgwKSA+IGF1ZGlvU2Vla2FibGUuZW5kKDApKSB7XG4gICAgICAgIC8vIHNlZWthYmxlcyBhcmUgcHJldHR5IGZhciBvZmYsIHJlbHkgb24gbWFpblxuICAgICAgICB0aGlzLnNlZWthYmxlXyA9IG1haW5TZWVrYWJsZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2Vla2FibGVfID0gdmlkZW9qcyQxLmNyZWF0ZVRpbWVSYW5nZXMoW1thdWRpb1NlZWthYmxlLnN0YXJ0KDApID4gbWFpblNlZWthYmxlLnN0YXJ0KDApID8gYXVkaW9TZWVrYWJsZS5zdGFydCgwKSA6IG1haW5TZWVrYWJsZS5zdGFydCgwKSwgYXVkaW9TZWVrYWJsZS5lbmQoMCkgPCBtYWluU2Vla2FibGUuZW5kKDApID8gYXVkaW9TZWVrYWJsZS5lbmQoMCkgOiBtYWluU2Vla2FibGUuZW5kKDApXV0pO1xuICAgICAgfSAvLyBzZWVrYWJsZSBpcyB0aGUgc2FtZSBhcyBsYXN0IHRpbWVcblxuXG4gICAgICBpZiAodGhpcy5zZWVrYWJsZV8gJiYgdGhpcy5zZWVrYWJsZV8ubGVuZ3RoKSB7XG4gICAgICAgIGlmICh0aGlzLnNlZWthYmxlXy5lbmQoMCkgPT09IG9sZEVuZCAmJiB0aGlzLnNlZWthYmxlXy5zdGFydCgwKSA9PT0gb2xkU3RhcnQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5sb2dnZXJfKCdzZWVrYWJsZSB1cGRhdGVkIFsnICsgcHJpbnRhYmxlUmFuZ2UodGhpcy5zZWVrYWJsZV8pICsgJ10nKTtcbiAgICAgIHRoaXMudGVjaF8udHJpZ2dlcignc2Vla2FibGVjaGFuZ2VkJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgcGxheWVyIGR1cmF0aW9uXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3VwZGF0ZUR1cmF0aW9uJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlRHVyYXRpb24oKSB7XG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgdmFyIG9sZER1cmF0aW9uID0gdGhpcy5tZWRpYVNvdXJjZS5kdXJhdGlvbjtcbiAgICAgIHZhciBuZXdEdXJhdGlvbiA9IEhscy5QbGF5bGlzdC5kdXJhdGlvbih0aGlzLm1hc3RlclBsYXlsaXN0TG9hZGVyXy5tZWRpYSgpKTtcbiAgICAgIHZhciBidWZmZXJlZCA9IHRoaXMudGVjaF8uYnVmZmVyZWQoKTtcblxuICAgICAgdmFyIHNldER1cmF0aW9uID0gZnVuY3Rpb24gc2V0RHVyYXRpb24oKSB7XG4gICAgICAgIC8vIG9uIGZpcmVmb3ggc2V0dGluZyB0aGUgZHVyYXRpb24gbWF5IHNvbWV0aW1lcyBjYXVzZSBhbiBleGNlcHRpb25cbiAgICAgICAgLy8gZXZlbiBpZiB0aGUgbWVkaWEgc291cmNlIGlzIG9wZW4gYW5kIHNvdXJjZSBidWZmZXJzIGFyZSBub3RcbiAgICAgICAgLy8gdXBkYXRpbmcsIHNvbWV0aGluZyBhYm91dCB0aGUgbWVkaWEgc291cmNlIGJlaW5nIGluIGFuIGludmFsaWQgc3RhdGUuXG4gICAgICAgIF90aGlzNi5sb2dnZXJfKCdTZXR0aW5nIGR1cmF0aW9uIGZyb20gJyArIF90aGlzNi5tZWRpYVNvdXJjZS5kdXJhdGlvbiArICcgPT4gJyArIG5ld0R1cmF0aW9uKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIF90aGlzNi5tZWRpYVNvdXJjZS5kdXJhdGlvbiA9IG5ld0R1cmF0aW9uO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgdmlkZW9qcyQxLmxvZy53YXJuKCdGYWlsZWQgdG8gc2V0IG1lZGlhIHNvdXJjZSBkdXJhdGlvbicsIGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXM2LnRlY2hfLnRyaWdnZXIoJ2R1cmF0aW9uY2hhbmdlJyk7XG5cbiAgICAgICAgX3RoaXM2Lm1lZGlhU291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3NvdXJjZW9wZW4nLCBzZXREdXJhdGlvbik7XG4gICAgICB9O1xuXG4gICAgICBpZiAoYnVmZmVyZWQubGVuZ3RoID4gMCkge1xuICAgICAgICBuZXdEdXJhdGlvbiA9IE1hdGgubWF4KG5ld0R1cmF0aW9uLCBidWZmZXJlZC5lbmQoYnVmZmVyZWQubGVuZ3RoIC0gMSkpO1xuICAgICAgfSAvLyBpZiB0aGUgZHVyYXRpb24gaGFzIGNoYW5nZWQsIGludmFsaWRhdGUgdGhlIGNhY2hlZCB2YWx1ZVxuXG5cbiAgICAgIGlmIChvbGREdXJhdGlvbiAhPT0gbmV3RHVyYXRpb24pIHtcbiAgICAgICAgLy8gdXBkYXRlIHRoZSBkdXJhdGlvblxuICAgICAgICBpZiAodGhpcy5tZWRpYVNvdXJjZS5yZWFkeVN0YXRlICE9PSAnb3BlbicpIHtcbiAgICAgICAgICB0aGlzLm1lZGlhU291cmNlLmFkZEV2ZW50TGlzdGVuZXIoJ3NvdXJjZW9wZW4nLCBzZXREdXJhdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0RHVyYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBkaXNwb3NlIG9mIHRoZSBNYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXIgYW5kIGV2ZXJ5dGhpbmdcbiAgICAgKiB0aGF0IGl0IGNvbnRyb2xzXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2Rpc3Bvc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgIHRoaXMuZGVjcnlwdGVyXy50ZXJtaW5hdGUoKTtcbiAgICAgIHRoaXMubWFzdGVyUGxheWxpc3RMb2FkZXJfLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMubWFpblNlZ21lbnRMb2FkZXJfLmRpc3Bvc2UoKTtcbiAgICAgIFsnQVVESU8nLCAnU1VCVElUTEVTJ10uZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICB2YXIgZ3JvdXBzID0gX3RoaXM3Lm1lZGlhVHlwZXNfW3R5cGVdLmdyb3VwcztcblxuICAgICAgICBmb3IgKHZhciBpZCBpbiBncm91cHMpIHtcbiAgICAgICAgICBncm91cHNbaWRdLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwKSB7XG4gICAgICAgICAgICBpZiAoZ3JvdXAucGxheWxpc3RMb2FkZXIpIHtcbiAgICAgICAgICAgICAgZ3JvdXAucGxheWxpc3RMb2FkZXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMuYXVkaW9TZWdtZW50TG9hZGVyXy5kaXNwb3NlKCk7XG4gICAgICB0aGlzLnN1YnRpdGxlU2VnbWVudExvYWRlcl8uZGlzcG9zZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiByZXR1cm4gdGhlIG1hc3RlciBwbGF5bGlzdCBvYmplY3QgaWYgd2UgaGF2ZSBvbmVcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gdGhlIG1hc3RlciBwbGF5bGlzdCBvYmplY3QgdGhhdCB3ZSBwYXJzZWRcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnbWFzdGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWFzdGVyKCkge1xuICAgICAgcmV0dXJuIHRoaXMubWFzdGVyUGxheWxpc3RMb2FkZXJfLm1hc3RlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogcmV0dXJuIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgcGxheWxpc3RcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBwbGF5bGlzdCBvYmplY3QgdGhhdCB3ZSBwYXJzZWRcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnbWVkaWEnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtZWRpYSgpIHtcbiAgICAgIC8vIHBsYXlsaXN0IGxvYWRlciB3aWxsIG5vdCByZXR1cm4gbWVkaWEgaWYgaXQgaGFzIG5vdCBiZWVuIGZ1bGx5IGxvYWRlZFxuICAgICAgcmV0dXJuIHRoaXMubWFzdGVyUGxheWxpc3RMb2FkZXJfLm1lZGlhKCkgfHwgdGhpcy5pbml0aWFsTWVkaWFfO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBzZXR1cCBvdXIgaW50ZXJuYWwgc291cmNlIGJ1ZmZlcnMgb24gb3VyIHNlZ21lbnQgTG9hZGVyc1xuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnc2V0dXBTb3VyY2VCdWZmZXJzXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwU291cmNlQnVmZmVyc18oKSB7XG4gICAgICB2YXIgbWVkaWEgPSB0aGlzLm1hc3RlclBsYXlsaXN0TG9hZGVyXy5tZWRpYSgpO1xuICAgICAgdmFyIG1pbWVUeXBlcyA9IHZvaWQgMDsgLy8gd2FpdCB1bnRpbCBhIG1lZGlhIHBsYXlsaXN0IGlzIGF2YWlsYWJsZSBhbmQgdGhlIE1lZGlhIFNvdXJjZSBpc1xuICAgICAgLy8gYXR0YWNoZWRcblxuICAgICAgaWYgKCFtZWRpYSB8fCB0aGlzLm1lZGlhU291cmNlLnJlYWR5U3RhdGUgIT09ICdvcGVuJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1pbWVUeXBlcyA9IG1pbWVUeXBlc0ZvclBsYXlsaXN0KHRoaXMubWFzdGVyUGxheWxpc3RMb2FkZXJfLm1hc3RlciwgbWVkaWEpO1xuXG4gICAgICBpZiAobWltZVR5cGVzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgdGhpcy5lcnJvciA9ICdObyBjb21wYXRpYmxlIFNvdXJjZUJ1ZmZlciBjb25maWd1cmF0aW9uIGZvciB0aGUgdmFyaWFudCBzdHJlYW06JyArIG1lZGlhLnJlc29sdmVkVXJpO1xuICAgICAgICByZXR1cm4gdGhpcy5tZWRpYVNvdXJjZS5lbmRPZlN0cmVhbSgnZGVjb2RlJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY29uZmlndXJlTG9hZGVyTWltZVR5cGVzXyhtaW1lVHlwZXMpOyAvLyBleGNsdWRlIGFueSBpbmNvbXBhdGlibGUgdmFyaWFudCBzdHJlYW1zIGZyb20gZnV0dXJlIHBsYXlsaXN0XG4gICAgICAvLyBzZWxlY3Rpb25cblxuICAgICAgdGhpcy5leGNsdWRlSW5jb21wYXRpYmxlVmFyaWFudHNfKG1lZGlhKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb25maWd1cmVMb2FkZXJNaW1lVHlwZXNfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29uZmlndXJlTG9hZGVyTWltZVR5cGVzXyhtaW1lVHlwZXMpIHtcbiAgICAgIC8vIElmIHRoZSBjb250ZW50IGlzIGRlbXV4ZWQsIHdlIGNhbid0IHN0YXJ0IGFwcGVuZGluZyBzZWdtZW50cyB0byBhIHNvdXJjZSBidWZmZXJcbiAgICAgIC8vIHVudGlsIGJvdGggc291cmNlIGJ1ZmZlcnMgYXJlIHNldCB1cCwgb3IgZWxzZSB0aGUgYnJvd3NlciBtYXkgbm90IGxldCB1cyBhZGQgdGhlXG4gICAgICAvLyBzZWNvbmQgc291cmNlIGJ1ZmZlciAoaXQgd2lsbCBhc3N1bWUgd2UgYXJlIHBsYXlpbmcgZWl0aGVyIGF1ZGlvIG9ubHkgb3IgdmlkZW9cbiAgICAgIC8vIG9ubHkpLlxuICAgICAgdmFyIHNvdXJjZUJ1ZmZlckVtaXR0ZXIgPSAvLyBJZiB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIG1pbWUgdHlwZVxuICAgICAgbWltZVR5cGVzLmxlbmd0aCA+IDEgJiYgLy8gYW5kIHRoZSBmaXJzdCBtaW1lIHR5cGUgZG9lcyBub3QgaGF2ZSBtdXhlZCB2aWRlbyBhbmQgYXVkaW9cbiAgICAgIG1pbWVUeXBlc1swXS5pbmRleE9mKCcsJykgPT09IC0xICYmIC8vIGFuZCB0aGUgdHdvIG1pbWUgdHlwZXMgYXJlIGRpZmZlcmVudCAodGhleSBjYW4gYmUgdGhlIHNhbWUgaW4gdGhlIGNhc2Ugb2YgYXVkaW9cbiAgICAgIC8vIG9ubHkgd2l0aCBhbHRlcm5hdGUgYXVkaW8pXG4gICAgICBtaW1lVHlwZXNbMF0gIT09IG1pbWVUeXBlc1sxXSA/IC8vIHRoZW4gd2Ugd2FudCB0byB3YWl0IG9uIHRoZSBzZWNvbmQgc291cmNlIGJ1ZmZlclxuICAgICAgbmV3IHZpZGVvanMkMS5FdmVudFRhcmdldCgpIDogLy8gb3RoZXJ3aXNlIHRoZXJlIGlzIG5vIG5lZWQgdG8gd2FpdCBhcyB0aGUgY29udGVudCBpcyBlaXRoZXIgYXVkaW8gb25seSxcbiAgICAgIC8vIHZpZGVvIG9ubHksIG9yIG11eGVkIGNvbnRlbnQuXG4gICAgICBudWxsO1xuICAgICAgdGhpcy5tYWluU2VnbWVudExvYWRlcl8ubWltZVR5cGUobWltZVR5cGVzWzBdLCBzb3VyY2VCdWZmZXJFbWl0dGVyKTtcblxuICAgICAgaWYgKG1pbWVUeXBlc1sxXSkge1xuICAgICAgICB0aGlzLmF1ZGlvU2VnbWVudExvYWRlcl8ubWltZVR5cGUobWltZVR5cGVzWzFdLCBzb3VyY2VCdWZmZXJFbWl0dGVyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQmxhY2tsaXN0cyBwbGF5bGlzdHMgd2l0aCBjb2RlY3MgdGhhdCBhcmUgdW5zdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2V4Y2x1ZGVVbnN1cHBvcnRlZFZhcmlhbnRzXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGV4Y2x1ZGVVbnN1cHBvcnRlZFZhcmlhbnRzXygpIHtcbiAgICAgIHRoaXMubWFzdGVyKCkucGxheWxpc3RzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhbnQpIHtcbiAgICAgICAgaWYgKHZhcmlhbnQuYXR0cmlidXRlcy5DT0RFQ1MgJiYgd2luZG93JDEuTWVkaWFTb3VyY2UgJiYgd2luZG93JDEuTWVkaWFTb3VyY2UuaXNUeXBlU3VwcG9ydGVkICYmICF3aW5kb3ckMS5NZWRpYVNvdXJjZS5pc1R5cGVTdXBwb3J0ZWQoJ3ZpZGVvL21wNDsgY29kZWNzPVwiJyArIG1hcExlZ2FjeUF2Y0NvZGVjcyh2YXJpYW50LmF0dHJpYnV0ZXMuQ09ERUNTKSArICdcIicpKSB7XG4gICAgICAgICAgdmFyaWFudC5leGNsdWRlVW50aWwgPSBJbmZpbml0eTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJsYWNrbGlzdCBwbGF5bGlzdHMgdGhhdCBhcmUga25vd24gdG8gYmUgY29kZWMgb3JcbiAgICAgKiBzdHJlYW0taW5jb21wYXRpYmxlIHdpdGggdGhlIFNvdXJjZUJ1ZmZlciBjb25maWd1cmF0aW9uLiBGb3JcbiAgICAgKiBpbnN0YW5jZSwgTWVkaWEgU291cmNlIEV4dGVuc2lvbnMgd291bGQgY2F1c2UgdGhlIHZpZGVvIGVsZW1lbnQgdG9cbiAgICAgKiBzdGFsbCB3YWl0aW5nIGZvciB2aWRlbyBkYXRhIGlmIHlvdSBzd2l0Y2hlZCBmcm9tIGEgdmFyaWFudCB3aXRoXG4gICAgICogdmlkZW8gYW5kIGF1ZGlvIHRvIGFuIGF1ZGlvLW9ubHkgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1lZGlhIGEgbWVkaWEgcGxheWxpc3QgY29tcGF0aWJsZSB3aXRoIHRoZSBjdXJyZW50XG4gICAgICogc2V0IG9mIFNvdXJjZUJ1ZmZlcnMuIFZhcmlhbnRzIGluIHRoZSBjdXJyZW50IG1hc3RlciBwbGF5bGlzdCB0aGF0XG4gICAgICogZG8gbm90IGFwcGVhciB0byBoYXZlIGNvbXBhdGlibGUgY29kZWMgb3Igc3RyZWFtIGNvbmZpZ3VyYXRpb25zXG4gICAgICogd2lsbCBiZSBleGNsdWRlZCBmcm9tIHRoZSBkZWZhdWx0IHBsYXlsaXN0IHNlbGVjdGlvbiBhbGdvcml0aG1cbiAgICAgKiBpbmRlZmluaXRlbHkuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZXhjbHVkZUluY29tcGF0aWJsZVZhcmlhbnRzXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGV4Y2x1ZGVJbmNvbXBhdGlibGVWYXJpYW50c18obWVkaWEpIHtcbiAgICAgIHZhciBjb2RlY0NvdW50ID0gMjtcbiAgICAgIHZhciB2aWRlb0NvZGVjID0gbnVsbDtcbiAgICAgIHZhciBjb2RlY3MgPSB2b2lkIDA7XG5cbiAgICAgIGlmIChtZWRpYS5hdHRyaWJ1dGVzLkNPREVDUykge1xuICAgICAgICBjb2RlY3MgPSBwYXJzZUNvZGVjcyhtZWRpYS5hdHRyaWJ1dGVzLkNPREVDUyk7XG4gICAgICAgIHZpZGVvQ29kZWMgPSBjb2RlY3MudmlkZW9Db2RlYztcbiAgICAgICAgY29kZWNDb3VudCA9IGNvZGVjcy5jb2RlY0NvdW50O1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1hc3RlcigpLnBsYXlsaXN0cy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYW50KSB7XG4gICAgICAgIHZhciB2YXJpYW50Q29kZWNzID0ge1xuICAgICAgICAgIGNvZGVjQ291bnQ6IDIsXG4gICAgICAgICAgdmlkZW9Db2RlYzogbnVsbFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh2YXJpYW50LmF0dHJpYnV0ZXMuQ09ERUNTKSB7XG4gICAgICAgICAgdmFyaWFudENvZGVjcyA9IHBhcnNlQ29kZWNzKHZhcmlhbnQuYXR0cmlidXRlcy5DT0RFQ1MpO1xuICAgICAgICB9IC8vIGlmIHRoZSBzdHJlYW1zIGRpZmZlciBpbiB0aGUgcHJlc2VuY2Ugb3IgYWJzZW5jZSBvZiBhdWRpbyBvclxuICAgICAgICAvLyB2aWRlbywgdGhleSBhcmUgaW5jb21wYXRpYmxlXG5cblxuICAgICAgICBpZiAodmFyaWFudENvZGVjcy5jb2RlY0NvdW50ICE9PSBjb2RlY0NvdW50KSB7XG4gICAgICAgICAgdmFyaWFudC5leGNsdWRlVW50aWwgPSBJbmZpbml0eTtcbiAgICAgICAgfSAvLyBpZiBoLjI2NCBpcyBzcGVjaWZpZWQgb24gdGhlIGN1cnJlbnQgcGxheWxpc3QsIHNvbWUgZmxhdm9yIG9mXG4gICAgICAgIC8vIGl0IG11c3QgYmUgc3BlY2lmaWVkIG9uIGFsbCBjb21wYXRpYmxlIHZhcmlhbnRzXG5cblxuICAgICAgICBpZiAodmFyaWFudENvZGVjcy52aWRlb0NvZGVjICE9PSB2aWRlb0NvZGVjKSB7XG4gICAgICAgICAgdmFyaWFudC5leGNsdWRlVW50aWwgPSBJbmZpbml0eTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAndXBkYXRlQWRDdWVzXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUFkQ3Vlc18obWVkaWEpIHtcbiAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgdmFyIHNlZWthYmxlJCQxID0gdGhpcy5zZWVrYWJsZSgpO1xuXG4gICAgICBpZiAoc2Vla2FibGUkJDEubGVuZ3RoKSB7XG4gICAgICAgIG9mZnNldCA9IHNlZWthYmxlJCQxLnN0YXJ0KDApO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGVBZEN1ZXMobWVkaWEsIHRoaXMuY3VlVGFnc1RyYWNrXywgb2Zmc2V0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyB0aGUgZGVzaXJlZCBmb3J3YXJkIGJ1ZmZlciBsZW5ndGggYmFzZWQgb24gY3VycmVudCB0aW1lXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IERlc2lyZWQgZm9yd2FyZCBidWZmZXIgbGVuZ3RoIGluIHNlY29uZHNcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZ29hbEJ1ZmZlckxlbmd0aCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdvYWxCdWZmZXJMZW5ndGgoKSB7XG4gICAgICB2YXIgY3VycmVudFRpbWUgPSB0aGlzLnRlY2hfLmN1cnJlbnRUaW1lKCk7XG4gICAgICB2YXIgaW5pdGlhbCA9IENvbmZpZy5HT0FMX0JVRkZFUl9MRU5HVEg7XG4gICAgICB2YXIgcmF0ZSA9IENvbmZpZy5HT0FMX0JVRkZFUl9MRU5HVEhfUkFURTtcbiAgICAgIHZhciBtYXggPSBNYXRoLm1heChpbml0aWFsLCBDb25maWcuTUFYX0dPQUxfQlVGRkVSX0xFTkdUSCk7XG4gICAgICByZXR1cm4gTWF0aC5taW4oaW5pdGlhbCArIGN1cnJlbnRUaW1lICogcmF0ZSwgbWF4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyB0aGUgZGVzaXJlZCBidWZmZXIgbG93IHdhdGVyIGxpbmUgYmFzZWQgb24gY3VycmVudCB0aW1lXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IERlc2lyZWQgYnVmZmVyIGxvdyB3YXRlciBsaW5lIGluIHNlY29uZHNcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnYnVmZmVyTG93V2F0ZXJMaW5lJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gYnVmZmVyTG93V2F0ZXJMaW5lKCkge1xuICAgICAgdmFyIGN1cnJlbnRUaW1lID0gdGhpcy50ZWNoXy5jdXJyZW50VGltZSgpO1xuICAgICAgdmFyIGluaXRpYWwgPSBDb25maWcuQlVGRkVSX0xPV19XQVRFUl9MSU5FO1xuICAgICAgdmFyIHJhdGUgPSBDb25maWcuQlVGRkVSX0xPV19XQVRFUl9MSU5FX1JBVEU7XG4gICAgICB2YXIgbWF4ID0gTWF0aC5tYXgoaW5pdGlhbCwgQ29uZmlnLk1BWF9CVUZGRVJfTE9XX1dBVEVSX0xJTkUpO1xuICAgICAgcmV0dXJuIE1hdGgubWluKGluaXRpYWwgKyBjdXJyZW50VGltZSAqIHJhdGUsIG1heCk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBNYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXI7XG59KHZpZGVvanMkMS5FdmVudFRhcmdldCk7XG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGFjdHMgYXMgdGhlIEVuYWJsZS9kaXNhYmxlIHBsYXlsaXN0IGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7UGxheWxpc3RMb2FkZXJ9IGxvYWRlciAtIFRoZSBtYXN0ZXIgcGxheWxpc3QgbG9hZGVyXG4gKiBAcGFyYW0ge1N0cmluZ30gcGxheWxpc3RVcmkgLSB1cmkgb2YgdGhlIHBsYXlsaXN0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjaGFuZ2VQbGF5bGlzdEZuIC0gQSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgYWZ0ZXIgYVxuICogcGxheWxpc3QncyBlbmFibGVkLXN0YXRlIGhhcyBiZWVuIGNoYW5nZWQuIFdpbGwgTk9UIGJlIGNhbGxlZCBpZiBhXG4gKiBwbGF5bGlzdCdzIGVuYWJsZWQtc3RhdGUgaXMgdW5jaGFuZ2VkXG4gKiBAcGFyYW0ge0Jvb2xlYW49fSBlbmFibGUgLSBWYWx1ZSB0byBzZXQgdGhlIHBsYXlsaXN0IGVuYWJsZWQtc3RhdGUgdG9cbiAqIG9yIGlmIHVuZGVmaW5lZCByZXR1cm5zIHRoZSBjdXJyZW50IGVuYWJsZWQtc3RhdGUgZm9yIHRoZSBwbGF5bGlzdFxuICogQHJldHVybiB7RnVuY3Rpb259IEZ1bmN0aW9uIGZvciBzZXR0aW5nL2dldHRpbmcgZW5hYmxlZFxuICovXG5cblxudmFyIGVuYWJsZUZ1bmN0aW9uID0gZnVuY3Rpb24gZW5hYmxlRnVuY3Rpb24obG9hZGVyLCBwbGF5bGlzdFVyaSwgY2hhbmdlUGxheWxpc3RGbikge1xuICByZXR1cm4gZnVuY3Rpb24gKGVuYWJsZSkge1xuICAgIHZhciBwbGF5bGlzdCA9IGxvYWRlci5tYXN0ZXIucGxheWxpc3RzW3BsYXlsaXN0VXJpXTtcbiAgICB2YXIgaW5jb21wYXRpYmxlID0gaXNJbmNvbXBhdGlibGUocGxheWxpc3QpO1xuICAgIHZhciBjdXJyZW50bHlFbmFibGVkID0gaXNFbmFibGVkKHBsYXlsaXN0KTtcblxuICAgIGlmICh0eXBlb2YgZW5hYmxlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIGN1cnJlbnRseUVuYWJsZWQ7XG4gICAgfVxuXG4gICAgaWYgKGVuYWJsZSkge1xuICAgICAgZGVsZXRlIHBsYXlsaXN0LmRpc2FibGVkO1xuICAgIH0gZWxzZSB7XG4gICAgICBwbGF5bGlzdC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGVuYWJsZSAhPT0gY3VycmVudGx5RW5hYmxlZCAmJiAhaW5jb21wYXRpYmxlKSB7XG4gICAgICAvLyBFbnN1cmUgdGhlIG91dHNpZGUgd29ybGQga25vd3MgYWJvdXQgb3VyIGNoYW5nZXNcbiAgICAgIGNoYW5nZVBsYXlsaXN0Rm4oKTtcblxuICAgICAgaWYgKGVuYWJsZSkge1xuICAgICAgICBsb2FkZXIudHJpZ2dlcigncmVuZGl0aW9uZW5hYmxlZCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9hZGVyLnRyaWdnZXIoJ3JlbmRpdGlvbmRpc2FibGVkJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGVuYWJsZTtcbiAgfTtcbn07XG4vKipcbiAqIFRoZSByZXByZXNlbnRhdGlvbiBvYmplY3QgZW5jYXBzdWxhdGVzIHRoZSBwdWJsaWNseSB2aXNpYmxlIGluZm9ybWF0aW9uXG4gKiBpbiBhIG1lZGlhIHBsYXlsaXN0IGFsb25nIHdpdGggYSBzZXR0ZXIvZ2V0dGVyLXR5cGUgZnVuY3Rpb24gKGVuYWJsZWQpXG4gKiBmb3IgY2hhbmdpbmcgdGhlIGVuYWJsZWQtc3RhdGUgb2YgYSBwYXJ0aWN1bGFyIHBsYXlsaXN0IGVudHJ5XG4gKlxuICogQGNsYXNzIFJlcHJlc2VudGF0aW9uXG4gKi9cblxuXG52YXIgUmVwcmVzZW50YXRpb24gPSBmdW5jdGlvbiBSZXByZXNlbnRhdGlvbihobHNIYW5kbGVyLCBwbGF5bGlzdCwgaWQpIHtcbiAgY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVwcmVzZW50YXRpb24pO1xuICB2YXIgbXBjID0gaGxzSGFuZGxlci5tYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJfLFxuICAgICAgc21vb3RoUXVhbGl0eUNoYW5nZSA9IGhsc0hhbmRsZXIub3B0aW9uc18uc21vb3RoUXVhbGl0eUNoYW5nZTsgLy8gR2V0IGEgcmVmZXJlbmNlIHRvIGEgYm91bmQgdmVyc2lvbiBvZiB0aGUgcXVhbGl0eSBjaGFuZ2UgZnVuY3Rpb25cblxuICB2YXIgY2hhbmdlVHlwZSA9IHNtb290aFF1YWxpdHlDaGFuZ2UgPyAnc21vb3RoJyA6ICdmYXN0JztcbiAgdmFyIHF1YWxpdHlDaGFuZ2VGdW5jdGlvbiA9IG1wY1tjaGFuZ2VUeXBlICsgJ1F1YWxpdHlDaGFuZ2VfJ10uYmluZChtcGMpOyAvLyBzb21lIHBsYXlsaXN0IGF0dHJpYnV0ZXMgYXJlIG9wdGlvbmFsXG5cbiAgaWYgKHBsYXlsaXN0LmF0dHJpYnV0ZXMuUkVTT0xVVElPTikge1xuICAgIHZhciByZXNvbHV0aW9uID0gcGxheWxpc3QuYXR0cmlidXRlcy5SRVNPTFVUSU9OO1xuICAgIHRoaXMud2lkdGggPSByZXNvbHV0aW9uLndpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gcmVzb2x1dGlvbi5oZWlnaHQ7XG4gIH1cblxuICB0aGlzLmJhbmR3aWR0aCA9IHBsYXlsaXN0LmF0dHJpYnV0ZXMuQkFORFdJRFRIOyAvLyBUaGUgaWQgaXMgc2ltcGx5IHRoZSBvcmRpbmFsaXR5IG9mIHRoZSBtZWRpYSBwbGF5bGlzdFxuICAvLyB3aXRoaW4gdGhlIG1hc3RlciBwbGF5bGlzdFxuXG4gIHRoaXMuaWQgPSBpZDsgLy8gUGFydGlhbGx5LWFwcGx5IHRoZSBlbmFibGVGdW5jdGlvbiB0byBjcmVhdGUgYSBwbGF5bGlzdC1cbiAgLy8gc3BlY2lmaWMgdmFyaWFudFxuXG4gIHRoaXMuZW5hYmxlZCA9IGVuYWJsZUZ1bmN0aW9uKGhsc0hhbmRsZXIucGxheWxpc3RzLCBwbGF5bGlzdC51cmksIHF1YWxpdHlDaGFuZ2VGdW5jdGlvbik7XG59O1xuLyoqXG4gKiBBIG1peGluIGZ1bmN0aW9uIHRoYXQgYWRkcyB0aGUgYHJlcHJlc2VudGF0aW9uc2AgYXBpIHRvIGFuIGluc3RhbmNlXG4gKiBvZiB0aGUgSGxzSGFuZGxlciBjbGFzc1xuICogQHBhcmFtIHtIbHNIYW5kbGVyfSBobHNIYW5kbGVyIC0gQW4gaW5zdGFuY2Ugb2YgSGxzSGFuZGxlciB0byBhZGQgdGhlXG4gKiByZXByZXNlbnRhdGlvbiBBUEkgaW50b1xuICovXG5cblxudmFyIHJlbmRpdGlvblNlbGVjdGlvbk1peGluID0gZnVuY3Rpb24gcmVuZGl0aW9uU2VsZWN0aW9uTWl4aW4oaGxzSGFuZGxlcikge1xuICB2YXIgcGxheWxpc3RzID0gaGxzSGFuZGxlci5wbGF5bGlzdHM7IC8vIEFkZCBhIHNpbmdsZSBBUEktc3BlY2lmaWMgZnVuY3Rpb24gdG8gdGhlIEhsc0hhbmRsZXIgaW5zdGFuY2VcblxuICBobHNIYW5kbGVyLnJlcHJlc2VudGF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcGxheWxpc3RzLm1hc3Rlci5wbGF5bGlzdHMuZmlsdGVyKGZ1bmN0aW9uIChtZWRpYSkge1xuICAgICAgcmV0dXJuICFpc0luY29tcGF0aWJsZShtZWRpYSk7XG4gICAgfSkubWFwKGZ1bmN0aW9uIChlLCBpKSB7XG4gICAgICByZXR1cm4gbmV3IFJlcHJlc2VudGF0aW9uKGhsc0hhbmRsZXIsIGUsIGUudXJpKTtcbiAgICB9KTtcbiAgfTtcbn07XG4vKipcbiAqIEBmaWxlIHBsYXliYWNrLXdhdGNoZXIuanNcbiAqXG4gKiBQbGF5YmFjayBzdGFydHMsIGFuZCBub3cgbXkgd2F0Y2ggYmVnaW5zLiBJdCBzaGFsbCBub3QgZW5kIHVudGlsIG15IGRlYXRoLiBJIHNoYWxsXG4gKiB0YWtlIG5vIHdhaXQsIGhvbGQgbm8gdW5jbGVhcmVkIHRpbWVvdXRzLCBmYXRoZXIgbm8gYmFkIHNlZWtzLiBJIHNoYWxsIHdlYXIgbm8gY3Jvd25zXG4gKiBhbmQgd2luIG5vIGdsb3J5LiBJIHNoYWxsIGxpdmUgYW5kIGRpZSBhdCBteSBwb3N0LiBJIGFtIHRoZSBjb3JyZWN0b3Igb2YgdGhlIHVuZGVyZmxvdy5cbiAqIEkgYW0gdGhlIHdhdGNoZXIgb2YgZ2Fwcy4gSSBhbSB0aGUgc2hpZWxkIHRoYXQgZ3VhcmRzIHRoZSByZWFsbXMgb2Ygc2Vla2FibGUuIEkgcGxlZGdlXG4gKiBteSBsaWZlIGFuZCBob25vciB0byB0aGUgUGxheWJhY2sgV2F0Y2gsIGZvciB0aGlzIFBsYXllciBhbmQgYWxsIHRoZSBQbGF5ZXJzIHRvIGNvbWUuXG4gKi9cbi8vIFNldCBvZiBldmVudHMgdGhhdCByZXNldCB0aGUgcGxheWJhY2std2F0Y2hlciB0aW1lIGNoZWNrIGxvZ2ljIGFuZCBjbGVhciB0aGUgdGltZW91dFxuXG5cbnZhciB0aW1lckNhbmNlbEV2ZW50cyA9IFsnc2Vla2luZycsICdzZWVrZWQnLCAncGF1c2UnLCAncGxheWluZycsICdlcnJvciddO1xuLyoqXG4gKiBAY2xhc3MgUGxheWJhY2tXYXRjaGVyXG4gKi9cblxudmFyIFBsYXliYWNrV2F0Y2hlciA9IGZ1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgYW4gUGxheWJhY2tXYXRjaGVyIG9iamVjdC5cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIGFuIG9iamVjdCB0aGF0IGluY2x1ZGVzIHRoZSB0ZWNoIGFuZCBzZXR0aW5nc1xuICAgKi9cbiAgZnVuY3Rpb24gUGxheWJhY2tXYXRjaGVyKG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgUGxheWJhY2tXYXRjaGVyKTtcbiAgICB0aGlzLnRlY2hfID0gb3B0aW9ucy50ZWNoO1xuICAgIHRoaXMuc2Vla2FibGUgPSBvcHRpb25zLnNlZWthYmxlO1xuICAgIHRoaXMuc2Vla1RvID0gb3B0aW9ucy5zZWVrVG87XG4gICAgdGhpcy5hbGxvd1NlZWtzV2l0aGluVW5zYWZlTGl2ZVdpbmRvdyA9IG9wdGlvbnMuYWxsb3dTZWVrc1dpdGhpblVuc2FmZUxpdmVXaW5kb3c7XG4gICAgdGhpcy5tZWRpYSA9IG9wdGlvbnMubWVkaWE7XG4gICAgdGhpcy5jb25zZWN1dGl2ZVVwZGF0ZXMgPSAwO1xuICAgIHRoaXMubGFzdFJlY29yZGVkVGltZSA9IG51bGw7XG4gICAgdGhpcy50aW1lcl8gPSBudWxsO1xuICAgIHRoaXMuY2hlY2tDdXJyZW50VGltZVRpbWVvdXRfID0gbnVsbDtcbiAgICB0aGlzLmxvZ2dlcl8gPSBsb2dnZXIoJ1BsYXliYWNrV2F0Y2hlcicpO1xuICAgIHRoaXMubG9nZ2VyXygnaW5pdGlhbGl6ZScpO1xuXG4gICAgdmFyIGNhblBsYXlIYW5kbGVyID0gZnVuY3Rpb24gY2FuUGxheUhhbmRsZXIoKSB7XG4gICAgICByZXR1cm4gX3RoaXMubW9uaXRvckN1cnJlbnRUaW1lXygpO1xuICAgIH07XG5cbiAgICB2YXIgd2FpdGluZ0hhbmRsZXIgPSBmdW5jdGlvbiB3YWl0aW5nSGFuZGxlcigpIHtcbiAgICAgIHJldHVybiBfdGhpcy50ZWNoV2FpdGluZ18oKTtcbiAgICB9O1xuXG4gICAgdmFyIGNhbmNlbFRpbWVySGFuZGxlciA9IGZ1bmN0aW9uIGNhbmNlbFRpbWVySGFuZGxlcigpIHtcbiAgICAgIHJldHVybiBfdGhpcy5jYW5jZWxUaW1lcl8oKTtcbiAgICB9O1xuXG4gICAgdmFyIGZpeGVzQmFkU2Vla3NIYW5kbGVyID0gZnVuY3Rpb24gZml4ZXNCYWRTZWVrc0hhbmRsZXIoKSB7XG4gICAgICByZXR1cm4gX3RoaXMuZml4ZXNCYWRTZWVrc18oKTtcbiAgICB9O1xuXG4gICAgdGhpcy50ZWNoXy5vbignc2Vla2FibGVjaGFuZ2VkJywgZml4ZXNCYWRTZWVrc0hhbmRsZXIpO1xuICAgIHRoaXMudGVjaF8ub24oJ3dhaXRpbmcnLCB3YWl0aW5nSGFuZGxlcik7XG4gICAgdGhpcy50ZWNoXy5vbih0aW1lckNhbmNlbEV2ZW50cywgY2FuY2VsVGltZXJIYW5kbGVyKTtcbiAgICB0aGlzLnRlY2hfLm9uKCdjYW5wbGF5JywgY2FuUGxheUhhbmRsZXIpOyAvLyBEZWZpbmUgdGhlIGRpc3Bvc2UgZnVuY3Rpb24gdG8gY2xlYW4gdXAgb3VyIGV2ZW50c1xuXG4gICAgdGhpcy5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMubG9nZ2VyXygnZGlzcG9zZScpO1xuXG4gICAgICBfdGhpcy50ZWNoXy5vZmYoJ3NlZWthYmxlY2hhbmdlZCcsIGZpeGVzQmFkU2Vla3NIYW5kbGVyKTtcblxuICAgICAgX3RoaXMudGVjaF8ub2ZmKCd3YWl0aW5nJywgd2FpdGluZ0hhbmRsZXIpO1xuXG4gICAgICBfdGhpcy50ZWNoXy5vZmYodGltZXJDYW5jZWxFdmVudHMsIGNhbmNlbFRpbWVySGFuZGxlcik7XG5cbiAgICAgIF90aGlzLnRlY2hfLm9mZignY2FucGxheScsIGNhblBsYXlIYW5kbGVyKTtcblxuICAgICAgaWYgKF90aGlzLmNoZWNrQ3VycmVudFRpbWVUaW1lb3V0Xykge1xuICAgICAgICB3aW5kb3ckMS5jbGVhclRpbWVvdXQoX3RoaXMuY2hlY2tDdXJyZW50VGltZVRpbWVvdXRfKTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMuY2FuY2VsVGltZXJfKCk7XG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogUGVyaW9kaWNhbGx5IGNoZWNrIGN1cnJlbnQgdGltZSB0byBzZWUgaWYgcGxheWJhY2sgc3RvcHBlZFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIGNyZWF0ZUNsYXNzKFBsYXliYWNrV2F0Y2hlciwgW3tcbiAgICBrZXk6ICdtb25pdG9yQ3VycmVudFRpbWVfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbW9uaXRvckN1cnJlbnRUaW1lXygpIHtcbiAgICAgIHRoaXMuY2hlY2tDdXJyZW50VGltZV8oKTtcblxuICAgICAgaWYgKHRoaXMuY2hlY2tDdXJyZW50VGltZVRpbWVvdXRfKSB7XG4gICAgICAgIHdpbmRvdyQxLmNsZWFyVGltZW91dCh0aGlzLmNoZWNrQ3VycmVudFRpbWVUaW1lb3V0Xyk7XG4gICAgICB9IC8vIDQyID0gMjQgZnBzIC8vIDI1MCBpcyB3aGF0IFdlYmtpdCB1c2VzIC8vIEZGIHVzZXMgMTVcblxuXG4gICAgICB0aGlzLmNoZWNrQ3VycmVudFRpbWVUaW1lb3V0XyA9IHdpbmRvdyQxLnNldFRpbWVvdXQodGhpcy5tb25pdG9yQ3VycmVudFRpbWVfLmJpbmQodGhpcyksIDI1MCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBwdXJwb3NlIG9mIHRoaXMgZnVuY3Rpb24gaXMgdG8gZW11bGF0ZSB0aGUgXCJ3YWl0aW5nXCIgZXZlbnQgb25cbiAgICAgKiBicm93c2VycyB0aGF0IGRvIG5vdCBlbWl0IGl0IHdoZW4gdGhleSBhcmUgd2FpdGluZyBmb3IgbW9yZVxuICAgICAqIGRhdGEgdG8gY29udGludWUgcGxheWJhY2tcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2NoZWNrQ3VycmVudFRpbWVfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tDdXJyZW50VGltZV8oKSB7XG4gICAgICBpZiAodGhpcy50ZWNoXy5zZWVraW5nKCkgJiYgdGhpcy5maXhlc0JhZFNlZWtzXygpKSB7XG4gICAgICAgIHRoaXMuY29uc2VjdXRpdmVVcGRhdGVzID0gMDtcbiAgICAgICAgdGhpcy5sYXN0UmVjb3JkZWRUaW1lID0gdGhpcy50ZWNoXy5jdXJyZW50VGltZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnRlY2hfLnBhdXNlZCgpIHx8IHRoaXMudGVjaF8uc2Vla2luZygpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGN1cnJlbnRUaW1lID0gdGhpcy50ZWNoXy5jdXJyZW50VGltZSgpO1xuICAgICAgdmFyIGJ1ZmZlcmVkID0gdGhpcy50ZWNoXy5idWZmZXJlZCgpO1xuXG4gICAgICBpZiAodGhpcy5sYXN0UmVjb3JkZWRUaW1lID09PSBjdXJyZW50VGltZSAmJiAoIWJ1ZmZlcmVkLmxlbmd0aCB8fCBjdXJyZW50VGltZSArIFNBRkVfVElNRV9ERUxUQSA+PSBidWZmZXJlZC5lbmQoYnVmZmVyZWQubGVuZ3RoIC0gMSkpKSB7XG4gICAgICAgIC8vIElmIGN1cnJlbnQgdGltZSBpcyBhdCB0aGUgZW5kIG9mIHRoZSBmaW5hbCBidWZmZXJlZCByZWdpb24sIHRoZW4gYW55IHBsYXliYWNrXG4gICAgICAgIC8vIHN0YWxsIGlzIG1vc3QgbGlrZWx5IGNhdXNlZCBieSBidWZmZXJpbmcgaW4gYSBsb3cgYmFuZHdpZHRoIGVudmlyb25tZW50LiBUaGUgdGVjaFxuICAgICAgICAvLyBzaG91bGQgZmlyZSBhIGB3YWl0aW5nYCBldmVudCBpbiB0aGlzIHNjZW5hcmlvLCBidXQgZHVlIHRvIGJyb3dzZXIgYW5kIHRlY2hcbiAgICAgICAgLy8gaW5jb25zaXN0ZW5jaWVzLiBDYWxsaW5nIGB0ZWNoV2FpdGluZ19gIGhlcmUgYWxsb3dzIHVzIHRvIHNpbXVsYXRlXG4gICAgICAgIC8vIHJlc3BvbmRpbmcgdG8gYSBuYXRpdmUgYHdhaXRpbmdgIGV2ZW50IHdoZW4gdGhlIHRlY2ggZmFpbHMgdG8gZW1pdCBvbmUuXG4gICAgICAgIHJldHVybiB0aGlzLnRlY2hXYWl0aW5nXygpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5jb25zZWN1dGl2ZVVwZGF0ZXMgPj0gNSAmJiBjdXJyZW50VGltZSA9PT0gdGhpcy5sYXN0UmVjb3JkZWRUaW1lKSB7XG4gICAgICAgIHRoaXMuY29uc2VjdXRpdmVVcGRhdGVzKys7XG4gICAgICAgIHRoaXMud2FpdGluZ18oKTtcbiAgICAgIH0gZWxzZSBpZiAoY3VycmVudFRpbWUgPT09IHRoaXMubGFzdFJlY29yZGVkVGltZSkge1xuICAgICAgICB0aGlzLmNvbnNlY3V0aXZlVXBkYXRlcysrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jb25zZWN1dGl2ZVVwZGF0ZXMgPSAwO1xuICAgICAgICB0aGlzLmxhc3RSZWNvcmRlZFRpbWUgPSBjdXJyZW50VGltZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FuY2VscyBhbnkgcGVuZGluZyB0aW1lcnMgYW5kIHJlc2V0cyB0aGUgJ3RpbWV1cGRhdGUnIG1lY2hhbmlzbVxuICAgICAqIGRlc2lnbmVkIHRvIGRldGVjdCB0aGF0IHdlIGFyZSBzdGFsbGVkXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdjYW5jZWxUaW1lcl8nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWxUaW1lcl8oKSB7XG4gICAgICB0aGlzLmNvbnNlY3V0aXZlVXBkYXRlcyA9IDA7XG5cbiAgICAgIGlmICh0aGlzLnRpbWVyXykge1xuICAgICAgICB0aGlzLmxvZ2dlcl8oJ2NhbmNlbFRpbWVyXycpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcl8pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRpbWVyXyA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpeGVzIHNpdHVhdGlvbnMgd2hlcmUgdGhlcmUncyBhIGJhZCBzZWVrXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB3aGV0aGVyIGFuIGFjdGlvbiB3YXMgdGFrZW4gdG8gZml4IHRoZSBzZWVrXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZml4ZXNCYWRTZWVrc18nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaXhlc0JhZFNlZWtzXygpIHtcbiAgICAgIHZhciBzZWVraW5nID0gdGhpcy50ZWNoXy5zZWVraW5nKCk7XG5cbiAgICAgIGlmICghc2Vla2luZykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBzZWVrYWJsZSA9IHRoaXMuc2Vla2FibGUoKTtcbiAgICAgIHZhciBjdXJyZW50VGltZSA9IHRoaXMudGVjaF8uY3VycmVudFRpbWUoKTtcbiAgICAgIHZhciBpc0FmdGVyU2Vla2FibGVSYW5nZSA9IHRoaXMuYWZ0ZXJTZWVrYWJsZVdpbmRvd18oc2Vla2FibGUsIGN1cnJlbnRUaW1lLCB0aGlzLm1lZGlhKCksIHRoaXMuYWxsb3dTZWVrc1dpdGhpblVuc2FmZUxpdmVXaW5kb3cpO1xuICAgICAgdmFyIHNlZWtUbyA9IHZvaWQgMDtcblxuICAgICAgaWYgKGlzQWZ0ZXJTZWVrYWJsZVJhbmdlKSB7XG4gICAgICAgIHZhciBzZWVrYWJsZUVuZCA9IHNlZWthYmxlLmVuZChzZWVrYWJsZS5sZW5ndGggLSAxKTsgLy8gc3luYyB0byBsaXZlIHBvaW50IChpZiBWT0QsIG91ciBzZWVrYWJsZSB3YXMgdXBkYXRlZCBhbmQgd2UncmUgc2ltcGx5IGFkanVzdGluZylcblxuICAgICAgICBzZWVrVG8gPSBzZWVrYWJsZUVuZDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuYmVmb3JlU2Vla2FibGVXaW5kb3dfKHNlZWthYmxlLCBjdXJyZW50VGltZSkpIHtcbiAgICAgICAgdmFyIHNlZWthYmxlU3RhcnQgPSBzZWVrYWJsZS5zdGFydCgwKTsgLy8gc3luYyB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBsaXZlIHdpbmRvd1xuICAgICAgICAvLyBwcm92aWRlIGEgYnVmZmVyIG9mIC4xIHNlY29uZHMgdG8gaGFuZGxlIHJvdW5kaW5nL2ltcHJlY2lzZSBudW1iZXJzXG5cbiAgICAgICAgc2Vla1RvID0gc2Vla2FibGVTdGFydCArIFNBRkVfVElNRV9ERUxUQTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBzZWVrVG8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyXygnVHJ5aW5nIHRvIHNlZWsgb3V0c2lkZSBvZiBzZWVrYWJsZSBhdCB0aW1lICcgKyBjdXJyZW50VGltZSArICcgd2l0aCAnICsgKCdzZWVrYWJsZSByYW5nZSAnICsgcHJpbnRhYmxlUmFuZ2Uoc2Vla2FibGUpICsgJy4gU2Vla2luZyB0byAnKSArIChzZWVrVG8gKyAnLicpKTtcbiAgICAgICAgdGhpcy5zZWVrVG8oc2Vla1RvKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlciBmb3Igc2l0dWF0aW9ucyB3aGVuIHdlIGRldGVybWluZSB0aGUgcGxheWVyIGlzIHdhaXRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICd3YWl0aW5nXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHdhaXRpbmdfKCkge1xuICAgICAgaWYgKHRoaXMudGVjaFdhaXRpbmdfKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBBbGwgdGVjaCB3YWl0aW5nIGNoZWNrcyBmYWlsZWQuIFVzZSBsYXN0IHJlc29ydCBjb3JyZWN0aW9uXG5cblxuICAgICAgdmFyIGN1cnJlbnRUaW1lID0gdGhpcy50ZWNoXy5jdXJyZW50VGltZSgpO1xuICAgICAgdmFyIGJ1ZmZlcmVkID0gdGhpcy50ZWNoXy5idWZmZXJlZCgpO1xuICAgICAgdmFyIGN1cnJlbnRSYW5nZSA9IGZpbmRSYW5nZShidWZmZXJlZCwgY3VycmVudFRpbWUpOyAvLyBTb21ldGltZXMgdGhlIHBsYXllciBjYW4gc3RhbGwgZm9yIHVua25vd24gcmVhc29ucyB3aXRoaW4gYSBjb250aWd1b3VzIGJ1ZmZlcmVkXG4gICAgICAvLyByZWdpb24gd2l0aCBubyBpbmRpY2F0aW9uIHRoYXQgYW55dGhpbmcgaXMgYW1pc3MgKHNlZW4gaW4gRmlyZWZveCkuIFNlZWtpbmcgdG9cbiAgICAgIC8vIGN1cnJlbnRUaW1lIGlzIHVzdWFsbHkgZW5vdWdoIHRvIGtpY2tzdGFydCB0aGUgcGxheWVyLiBUaGlzIGNoZWNrcyB0aGF0IHRoZSBwbGF5ZXJcbiAgICAgIC8vIGlzIGN1cnJlbnRseSB3aXRoaW4gYSBidWZmZXJlZCByZWdpb24gYmVmb3JlIGF0dGVtcHRpbmcgYSBjb3JyZWN0aXZlIHNlZWsuXG4gICAgICAvLyBDaHJvbWUgZG9lcyBub3QgYXBwZWFyIHRvIGNvbnRpbnVlIGB0aW1ldXBkYXRlYCBldmVudHMgYWZ0ZXIgYSBgd2FpdGluZ2AgZXZlbnRcbiAgICAgIC8vIHVudGlsIHRoZXJlIGlzIH4gMyBzZWNvbmRzIG9mIGZvcndhcmQgYnVmZmVyIGF2YWlsYWJsZS4gUGxheWJhY2tXYXRjaGVyIHNob3VsZCBhbHNvXG4gICAgICAvLyBtYWtlIHN1cmUgdGhlcmUgaXMgfjMgc2Vjb25kcyBvZiBmb3J3YXJkIGJ1ZmZlciBiZWZvcmUgdGFraW5nIGFueSBjb3JyZWN0aXZlIGFjdGlvblxuICAgICAgLy8gdG8gYXZvaWQgdHJpZ2dlcmluZyBhbiBgdW5rbm93bndhaXRpbmdgIGV2ZW50IHdoZW4gdGhlIG5ldHdvcmsgaXMgc2xvdy5cblxuICAgICAgaWYgKGN1cnJlbnRSYW5nZS5sZW5ndGggJiYgY3VycmVudFRpbWUgKyAzIDw9IGN1cnJlbnRSYW5nZS5lbmQoMCkpIHtcbiAgICAgICAgdGhpcy5jYW5jZWxUaW1lcl8oKTtcbiAgICAgICAgdGhpcy5zZWVrVG8oY3VycmVudFRpbWUpO1xuICAgICAgICB0aGlzLmxvZ2dlcl8oJ1N0b3BwZWQgYXQgJyArIGN1cnJlbnRUaW1lICsgJyB3aGlsZSBpbnNpZGUgYSBidWZmZXJlZCByZWdpb24gJyArICgnWycgKyBjdXJyZW50UmFuZ2Uuc3RhcnQoMCkgKyAnIC0+ICcgKyBjdXJyZW50UmFuZ2UuZW5kKDApICsgJ10uIEF0dGVtcHRpbmcgdG8gcmVzdW1lICcpICsgJ3BsYXliYWNrIGJ5IHNlZWtpbmcgdG8gdGhlIGN1cnJlbnQgdGltZS4nKTsgLy8gdW5rbm93biB3YWl0aW5nIGNvcnJlY3Rpb25zIG1heSBiZSB1c2VmdWwgZm9yIG1vbml0b3JpbmcgUW9TXG5cbiAgICAgICAgdGhpcy50ZWNoXy50cmlnZ2VyKHtcbiAgICAgICAgICB0eXBlOiAndXNhZ2UnLFxuICAgICAgICAgIG5hbWU6ICdobHMtdW5rbm93bi13YWl0aW5nJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVyIGZvciBzaXR1YXRpb25zIHdoZW4gdGhlIHRlY2ggZmlyZXMgYSBgd2FpdGluZ2AgZXZlbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogICAgICAgICBUcnVlIGlmIGFuIGFjdGlvbiAob3Igbm9uZSkgd2FzIG5lZWRlZCB0byBjb3JyZWN0IHRoZSB3YWl0aW5nLiBGYWxzZSBpZiBub1xuICAgICAqICAgICAgICAgY2hlY2tzIHBhc3NlZFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3RlY2hXYWl0aW5nXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRlY2hXYWl0aW5nXygpIHtcbiAgICAgIHZhciBzZWVrYWJsZSA9IHRoaXMuc2Vla2FibGUoKTtcbiAgICAgIHZhciBjdXJyZW50VGltZSA9IHRoaXMudGVjaF8uY3VycmVudFRpbWUoKTtcblxuICAgICAgaWYgKHRoaXMudGVjaF8uc2Vla2luZygpICYmIHRoaXMuZml4ZXNCYWRTZWVrc18oKSkge1xuICAgICAgICAvLyBUZWNoIGlzIHNlZWtpbmcgb3IgYmFkIHNlZWsgZml4ZWQsIG5vIGFjdGlvbiBuZWVkZWRcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnRlY2hfLnNlZWtpbmcoKSB8fCB0aGlzLnRpbWVyXyAhPT0gbnVsbCkge1xuICAgICAgICAvLyBUZWNoIGlzIHNlZWtpbmcgb3IgYWxyZWFkeSB3YWl0aW5nIG9uIGFub3RoZXIgYWN0aW9uLCBubyBhY3Rpb24gbmVlZGVkXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5iZWZvcmVTZWVrYWJsZVdpbmRvd18oc2Vla2FibGUsIGN1cnJlbnRUaW1lKSkge1xuICAgICAgICB2YXIgbGl2ZVBvaW50ID0gc2Vla2FibGUuZW5kKHNlZWthYmxlLmxlbmd0aCAtIDEpO1xuICAgICAgICB0aGlzLmxvZ2dlcl8oJ0ZlbGwgb3V0IG9mIGxpdmUgd2luZG93IGF0IHRpbWUgJyArIGN1cnJlbnRUaW1lICsgJy4gU2Vla2luZyB0byAnICsgKCdsaXZlIHBvaW50IChzZWVrYWJsZSBlbmQpICcgKyBsaXZlUG9pbnQpKTtcbiAgICAgICAgdGhpcy5jYW5jZWxUaW1lcl8oKTtcbiAgICAgICAgdGhpcy5zZWVrVG8obGl2ZVBvaW50KTsgLy8gbGl2ZSB3aW5kb3cgcmVzeW5jcyBtYXkgYmUgdXNlZnVsIGZvciBtb25pdG9yaW5nIFFvU1xuXG4gICAgICAgIHRoaXMudGVjaF8udHJpZ2dlcih7XG4gICAgICAgICAgdHlwZTogJ3VzYWdlJyxcbiAgICAgICAgICBuYW1lOiAnaGxzLWxpdmUtcmVzeW5jJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBidWZmZXJlZCA9IHRoaXMudGVjaF8uYnVmZmVyZWQoKTtcbiAgICAgIHZhciBuZXh0UmFuZ2UgPSBmaW5kTmV4dFJhbmdlKGJ1ZmZlcmVkLCBjdXJyZW50VGltZSk7XG5cbiAgICAgIGlmICh0aGlzLnZpZGVvVW5kZXJmbG93XyhuZXh0UmFuZ2UsIGJ1ZmZlcmVkLCBjdXJyZW50VGltZSkpIHtcbiAgICAgICAgLy8gRXZlbiB0aG91Z2ggdGhlIHZpZGVvIHVuZGVyZmxvd2VkIGFuZCB3YXMgc3R1Y2sgaW4gYSBnYXAsIHRoZSBhdWRpbyBvdmVycGxheWVkXG4gICAgICAgIC8vIHRoZSBnYXAsIGxlYWRpbmcgY3VycmVudFRpbWUgaW50byBhIGJ1ZmZlcmVkIHJhbmdlLiBTZWVraW5nIHRvIGN1cnJlbnRUaW1lXG4gICAgICAgIC8vIGFsbG93cyB0aGUgdmlkZW8gdG8gY2F0Y2ggdXAgdG8gdGhlIGF1ZGlvIHBvc2l0aW9uIHdpdGhvdXQgbG9zaW5nIGFueSBhdWRpb1xuICAgICAgICAvLyAob25seSBzdWZmZXJpbmcgfjMgc2Vjb25kcyBvZiBmcm96ZW4gdmlkZW8gYW5kIGEgcGF1c2UgaW4gYXVkaW8gcGxheWJhY2spLlxuICAgICAgICB0aGlzLmNhbmNlbFRpbWVyXygpO1xuICAgICAgICB0aGlzLnNlZWtUbyhjdXJyZW50VGltZSk7IC8vIHZpZGVvIHVuZGVyZmxvdyBtYXkgYmUgdXNlZnVsIGZvciBtb25pdG9yaW5nIFFvU1xuXG4gICAgICAgIHRoaXMudGVjaF8udHJpZ2dlcih7XG4gICAgICAgICAgdHlwZTogJ3VzYWdlJyxcbiAgICAgICAgICBuYW1lOiAnaGxzLXZpZGVvLXVuZGVyZmxvdydcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSAvLyBjaGVjayBmb3IgZ2FwXG5cblxuICAgICAgaWYgKG5leHRSYW5nZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBkaWZmZXJlbmNlID0gbmV4dFJhbmdlLnN0YXJ0KDApIC0gY3VycmVudFRpbWU7XG4gICAgICAgIHRoaXMubG9nZ2VyXygnU3RvcHBlZCBhdCAnICsgY3VycmVudFRpbWUgKyAnLCBzZXR0aW5nIHRpbWVyIGZvciAnICsgZGlmZmVyZW5jZSArICcsIHNlZWtpbmcgJyArICgndG8gJyArIG5leHRSYW5nZS5zdGFydCgwKSkpO1xuICAgICAgICB0aGlzLnRpbWVyXyA9IHNldFRpbWVvdXQodGhpcy5za2lwVGhlR2FwXy5iaW5kKHRoaXMpLCBkaWZmZXJlbmNlICogMTAwMCwgY3VycmVudFRpbWUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gLy8gQWxsIGNoZWNrcyBmYWlsZWQuIFJldHVybmluZyBmYWxzZSB0byBpbmRpY2F0ZSBmYWlsdXJlIHRvIGNvcnJlY3Qgd2FpdGluZ1xuXG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdhZnRlclNlZWthYmxlV2luZG93XycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFmdGVyU2Vla2FibGVXaW5kb3dfKHNlZWthYmxlLCBjdXJyZW50VGltZSwgcGxheWxpc3QpIHtcbiAgICAgIHZhciBhbGxvd1NlZWtzV2l0aGluVW5zYWZlTGl2ZVdpbmRvdyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7XG5cbiAgICAgIGlmICghc2Vla2FibGUubGVuZ3RoKSB7XG4gICAgICAgIC8vIHdlIGNhbid0IG1ha2UgYSBzb2xpZCBjYXNlIGlmIHRoZXJlJ3Mgbm8gc2Vla2FibGUsIGRlZmF1bHQgdG8gZmFsc2VcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgYWxsb3dlZEVuZCA9IHNlZWthYmxlLmVuZChzZWVrYWJsZS5sZW5ndGggLSAxKSArIFNBRkVfVElNRV9ERUxUQTtcbiAgICAgIHZhciBpc0xpdmUgPSAhcGxheWxpc3QuZW5kTGlzdDtcblxuICAgICAgaWYgKGlzTGl2ZSAmJiBhbGxvd1NlZWtzV2l0aGluVW5zYWZlTGl2ZVdpbmRvdykge1xuICAgICAgICBhbGxvd2VkRW5kID0gc2Vla2FibGUuZW5kKHNlZWthYmxlLmxlbmd0aCAtIDEpICsgcGxheWxpc3QudGFyZ2V0RHVyYXRpb24gKiAzO1xuICAgICAgfVxuXG4gICAgICBpZiAoY3VycmVudFRpbWUgPiBhbGxvd2VkRW5kKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnYmVmb3JlU2Vla2FibGVXaW5kb3dfJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gYmVmb3JlU2Vla2FibGVXaW5kb3dfKHNlZWthYmxlLCBjdXJyZW50VGltZSkge1xuICAgICAgaWYgKHNlZWthYmxlLmxlbmd0aCAmJiAvLyBjYW4ndCBmYWxsIGJlZm9yZSAwIGFuZCAwIHNlZWthYmxlIHN0YXJ0IGlkZW50aWZpZXMgVk9EIHN0cmVhbVxuICAgICAgc2Vla2FibGUuc3RhcnQoMCkgPiAwICYmIGN1cnJlbnRUaW1lIDwgc2Vla2FibGUuc3RhcnQoMCkgLSBTQUZFX1RJTUVfREVMVEEpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICd2aWRlb1VuZGVyZmxvd18nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB2aWRlb1VuZGVyZmxvd18obmV4dFJhbmdlLCBidWZmZXJlZCwgY3VycmVudFRpbWUpIHtcbiAgICAgIGlmIChuZXh0UmFuZ2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIEV2ZW4gaWYgdGhlcmUgaXMgbm8gYXZhaWxhYmxlIG5leHQgcmFuZ2UsIHRoZXJlIGlzIHN0aWxsIGEgcG9zc2liaWxpdHkgd2UgYXJlXG4gICAgICAgIC8vIHN0dWNrIGluIGEgZ2FwIGR1ZSB0byB2aWRlbyB1bmRlcmZsb3cuXG4gICAgICAgIHZhciBnYXAgPSB0aGlzLmdhcEZyb21WaWRlb1VuZGVyZmxvd18oYnVmZmVyZWQsIGN1cnJlbnRUaW1lKTtcblxuICAgICAgICBpZiAoZ2FwKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXJfKCdFbmNvdW50ZXJlZCBhIGdhcCBpbiB2aWRlbyBmcm9tICcgKyBnYXAuc3RhcnQgKyAnIHRvICcgKyBnYXAuZW5kICsgJy4gJyArICgnU2Vla2luZyB0byBjdXJyZW50IHRpbWUgJyArIGN1cnJlbnRUaW1lKSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaW1lciBjYWxsYmFjay4gSWYgcGxheWJhY2sgc3RpbGwgaGFzIG5vdCBwcm9jZWVkZWQsIHRoZW4gd2Ugc2Vla1xuICAgICAqIHRvIHRoZSBzdGFydCBvZiB0aGUgbmV4dCBidWZmZXJlZCByZWdpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdza2lwVGhlR2FwXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNraXBUaGVHYXBfKHNjaGVkdWxlZEN1cnJlbnRUaW1lKSB7XG4gICAgICB2YXIgYnVmZmVyZWQgPSB0aGlzLnRlY2hfLmJ1ZmZlcmVkKCk7XG4gICAgICB2YXIgY3VycmVudFRpbWUgPSB0aGlzLnRlY2hfLmN1cnJlbnRUaW1lKCk7XG4gICAgICB2YXIgbmV4dFJhbmdlID0gZmluZE5leHRSYW5nZShidWZmZXJlZCwgY3VycmVudFRpbWUpO1xuICAgICAgdGhpcy5jYW5jZWxUaW1lcl8oKTtcblxuICAgICAgaWYgKG5leHRSYW5nZS5sZW5ndGggPT09IDAgfHwgY3VycmVudFRpbWUgIT09IHNjaGVkdWxlZEN1cnJlbnRUaW1lKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5sb2dnZXJfKCdza2lwVGhlR2FwXzonLCAnY3VycmVudFRpbWU6JywgY3VycmVudFRpbWUsICdzY2hlZHVsZWQgY3VycmVudFRpbWU6Jywgc2NoZWR1bGVkQ3VycmVudFRpbWUsICduZXh0UmFuZ2Ugc3RhcnQ6JywgbmV4dFJhbmdlLnN0YXJ0KDApKTsgLy8gb25seSBzZWVrIGlmIHdlIHN0aWxsIGhhdmUgbm90IHBsYXllZFxuXG4gICAgICB0aGlzLnNlZWtUbyhuZXh0UmFuZ2Uuc3RhcnQoMCkgKyBUSU1FX0ZVREdFX0ZBQ1RPUik7XG4gICAgICB0aGlzLnRlY2hfLnRyaWdnZXIoe1xuICAgICAgICB0eXBlOiAndXNhZ2UnLFxuICAgICAgICBuYW1lOiAnaGxzLWdhcC1za2lwJ1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2FwRnJvbVZpZGVvVW5kZXJmbG93XycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdhcEZyb21WaWRlb1VuZGVyZmxvd18oYnVmZmVyZWQsIGN1cnJlbnRUaW1lKSB7XG4gICAgICAvLyBBdCBsZWFzdCBpbiBDaHJvbWUsIGlmIHRoZXJlIGlzIGEgZ2FwIGluIHRoZSB2aWRlbyBidWZmZXIsIHRoZSBhdWRpbyB3aWxsIGNvbnRpbnVlXG4gICAgICAvLyBwbGF5aW5nIGZvciB+MyBzZWNvbmRzIGFmdGVyIHRoZSB2aWRlbyBnYXAgc3RhcnRzLiBUaGlzIGlzIGRvbmUgdG8gYWNjb3VudCBmb3JcbiAgICAgIC8vIHZpZGVvIGJ1ZmZlciB1bmRlcmZsb3cvdW5kZXJydW4gKG5vdGUgdGhhdCB0aGlzIGlzIG5vdCBkb25lIHdoZW4gdGhlcmUgaXMgYXVkaW9cbiAgICAgIC8vIGJ1ZmZlciB1bmRlcmZsb3cvdW5kZXJydW4gLS0gaW4gdGhhdCBjYXNlIHRoZSB2aWRlbyB3aWxsIHN0b3AgYXMgc29vbiBhcyBpdFxuICAgICAgLy8gZW5jb3VudGVycyB0aGUgZ2FwLCBhcyBhdWRpbyBzdGFsbHMgYXJlIG1vcmUgbm90aWNlYWJsZS9qYXJyaW5nIHRvIGEgdXNlciB0aGFuXG4gICAgICAvLyB2aWRlbyBzdGFsbHMpLiBUaGUgcGxheWVyJ3MgdGltZSB3aWxsIHJlZmxlY3QgdGhlIHBsYXl0aHJvdWdoIG9mIGF1ZGlvLCBzbyB0aGVcbiAgICAgIC8vIHRpbWUgd2lsbCBhcHBlYXIgYXMgaWYgd2UgYXJlIGluIGEgYnVmZmVyZWQgcmVnaW9uLCBldmVuIGlmIHdlIGFyZSBzdHVjayBpbiBhXG4gICAgICAvLyBcImdhcC5cIlxuICAgICAgLy9cbiAgICAgIC8vIEV4YW1wbGU6XG4gICAgICAvLyB2aWRlbyBidWZmZXI6ICAgMCA9PiAxMC4xLCAxMC4yID0+IDIwXG4gICAgICAvLyBhdWRpbyBidWZmZXI6ICAgMCA9PiAyMFxuICAgICAgLy8gb3ZlcmFsbCBidWZmZXI6IDAgPT4gMTAuMSwgMTAuMiA9PiAyMFxuICAgICAgLy8gY3VycmVudCB0aW1lOiAxM1xuICAgICAgLy9cbiAgICAgIC8vIENocm9tZSdzIHZpZGVvIGZyb3plIGF0IDEwIHNlY29uZHMsIHdoZXJlIHRoZSB2aWRlbyBidWZmZXIgZW5jb3VudGVyZWQgdGhlIGdhcCxcbiAgICAgIC8vIGhvd2V2ZXIsIHRoZSBhdWRpbyBjb250aW51ZWQgcGxheWluZyB1bnRpbCBpdCByZWFjaGVkIH4zIHNlY29uZHMgcGFzdCB0aGUgZ2FwXG4gICAgICAvLyAoMTMgc2Vjb25kcyksIGF0IHdoaWNoIHBvaW50IGl0IHN0b3BzIGFzIHdlbGwuIFNpbmNlIGN1cnJlbnQgdGltZSBpcyBwYXN0IHRoZVxuICAgICAgLy8gZ2FwLCBmaW5kTmV4dFJhbmdlIHdpbGwgcmV0dXJuIG5vIHJhbmdlcy5cbiAgICAgIC8vXG4gICAgICAvLyBUbyBjaGVjayBmb3IgdGhpcyBpc3N1ZSwgd2Ugc2VlIGlmIHRoZXJlIGlzIGEgZ2FwIHRoYXQgc3RhcnRzIHNvbWV3aGVyZSB3aXRoaW5cbiAgICAgIC8vIGEgMyBzZWNvbmQgcmFuZ2UgKDMgc2Vjb25kcyArLy0gMSBzZWNvbmQpIGJhY2sgZnJvbSBvdXIgY3VycmVudCB0aW1lLlxuICAgICAgdmFyIGdhcHMgPSBmaW5kR2FwcyhidWZmZXJlZCk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2Fwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgc3RhcnQgPSBnYXBzLnN0YXJ0KGkpO1xuICAgICAgICB2YXIgZW5kID0gZ2Fwcy5lbmQoaSk7IC8vIGdhcCBpcyBzdGFydHMgbm8gbW9yZSB0aGFuIDQgc2Vjb25kcyBiYWNrXG5cbiAgICAgICAgaWYgKGN1cnJlbnRUaW1lIC0gc3RhcnQgPCA0ICYmIGN1cnJlbnRUaW1lIC0gc3RhcnQgPiAyKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgICAgIGVuZDogZW5kXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIFBsYXliYWNrV2F0Y2hlcjtcbn0oKTtcblxudmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICBlcnJvckludGVydmFsOiAzMCxcbiAgZ2V0U291cmNlOiBmdW5jdGlvbiBnZXRTb3VyY2UobmV4dCkge1xuICAgIHZhciB0ZWNoID0gdGhpcy50ZWNoKHtcbiAgICAgIElXaWxsTm90VXNlVGhpc0luUGx1Z2luczogdHJ1ZVxuICAgIH0pO1xuICAgIHZhciBzb3VyY2VPYmogPSB0ZWNoLmN1cnJlbnRTb3VyY2VfO1xuICAgIHJldHVybiBuZXh0KHNvdXJjZU9iaik7XG4gIH1cbn07XG4vKipcbiAqIE1haW4gZW50cnkgcG9pbnQgZm9yIHRoZSBwbHVnaW5cbiAqXG4gKiBAcGFyYW0ge1BsYXllcn0gcGxheWVyIGEgcmVmZXJlbmNlIHRvIGEgdmlkZW9qcyBQbGF5ZXIgaW5zdGFuY2VcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gYW4gb2JqZWN0IHdpdGggcGx1Z2luIG9wdGlvbnNcbiAqIEBwcml2YXRlXG4gKi9cblxudmFyIGluaXRQbHVnaW4gPSBmdW5jdGlvbiBpbml0UGx1Z2luKHBsYXllciwgb3B0aW9ucykge1xuICB2YXIgbGFzdENhbGxlZCA9IDA7XG4gIHZhciBzZWVrVG8gPSAwO1xuICB2YXIgbG9jYWxPcHRpb25zID0gdmlkZW9qcyQxLm1lcmdlT3B0aW9ucyhkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XG4gIHBsYXllci5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgcGxheWVyLnRyaWdnZXIoe1xuICAgICAgdHlwZTogJ3VzYWdlJyxcbiAgICAgIG5hbWU6ICdobHMtZXJyb3ItcmVsb2FkLWluaXRpYWxpemVkJ1xuICAgIH0pO1xuICB9KTtcbiAgLyoqXG4gICAqIFBsYXllciBtb2RpZmljYXRpb25zIHRvIHBlcmZvcm0gdGhhdCBtdXN0IHdhaXQgdW50aWwgYGxvYWRlZG1ldGFkYXRhYFxuICAgKiBoYXMgYmVlbiB0cmlnZ2VyZWRcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgdmFyIGxvYWRlZE1ldGFkYXRhSGFuZGxlciA9IGZ1bmN0aW9uIGxvYWRlZE1ldGFkYXRhSGFuZGxlcigpIHtcbiAgICBpZiAoc2Vla1RvKSB7XG4gICAgICBwbGF5ZXIuY3VycmVudFRpbWUoc2Vla1RvKTtcbiAgICB9XG4gIH07XG4gIC8qKlxuICAgKiBTZXQgdGhlIHNvdXJjZSBvbiB0aGUgcGxheWVyIGVsZW1lbnQsIHBsYXksIGFuZCBzZWVrIGlmIG5lY2Vzc2FyeVxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlT2JqIEFuIG9iamVjdCBzcGVjaWZ5aW5nIHRoZSBzb3VyY2UgdXJsIGFuZCBtaW1lLXR5cGUgdG8gcGxheVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIHZhciBzZXRTb3VyY2UgPSBmdW5jdGlvbiBzZXRTb3VyY2Uoc291cmNlT2JqKSB7XG4gICAgaWYgKHNvdXJjZU9iaiA9PT0gbnVsbCB8fCBzb3VyY2VPYmogPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNlZWtUbyA9IHBsYXllci5kdXJhdGlvbigpICE9PSBJbmZpbml0eSAmJiBwbGF5ZXIuY3VycmVudFRpbWUoKSB8fCAwO1xuICAgIHBsYXllci5vbmUoJ2xvYWRlZG1ldGFkYXRhJywgbG9hZGVkTWV0YWRhdGFIYW5kbGVyKTtcbiAgICBwbGF5ZXIuc3JjKHNvdXJjZU9iaik7XG4gICAgcGxheWVyLnRyaWdnZXIoe1xuICAgICAgdHlwZTogJ3VzYWdlJyxcbiAgICAgIG5hbWU6ICdobHMtZXJyb3ItcmVsb2FkJ1xuICAgIH0pO1xuICAgIHBsYXllci5wbGF5KCk7XG4gIH07XG4gIC8qKlxuICAgKiBBdHRlbXB0IHRvIGdldCBhIHNvdXJjZSBmcm9tIGVpdGhlciB0aGUgYnVpbHQtaW4gZ2V0U291cmNlIGZ1bmN0aW9uXG4gICAqIG9yIGEgY3VzdG9tIGZ1bmN0aW9uIHByb3ZpZGVkIHZpYSB0aGUgb3B0aW9uc1xuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIHZhciBlcnJvckhhbmRsZXIgPSBmdW5jdGlvbiBlcnJvckhhbmRsZXIoKSB7XG4gICAgLy8gRG8gbm90IGF0dGVtcHQgdG8gcmVsb2FkIHRoZSBzb3VyY2UgaWYgYSBzb3VyY2UtcmVsb2FkIG9jY3VycmVkIGJlZm9yZVxuICAgIC8vICdlcnJvckludGVydmFsJyB0aW1lIGhhcyBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHNvdXJjZS1yZWxvYWRcbiAgICBpZiAoRGF0ZS5ub3coKSAtIGxhc3RDYWxsZWQgPCBsb2NhbE9wdGlvbnMuZXJyb3JJbnRlcnZhbCAqIDEwMDApIHtcbiAgICAgIHBsYXllci50cmlnZ2VyKHtcbiAgICAgICAgdHlwZTogJ3VzYWdlJyxcbiAgICAgICAgbmFtZTogJ2hscy1lcnJvci1yZWxvYWQtY2FuY2VsZWQnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWxvY2FsT3B0aW9ucy5nZXRTb3VyY2UgfHwgdHlwZW9mIGxvY2FsT3B0aW9ucy5nZXRTb3VyY2UgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHZpZGVvanMkMS5sb2cuZXJyb3IoJ0VSUk9SOiByZWxvYWRTb3VyY2VPbkVycm9yIC0gVGhlIG9wdGlvbiBnZXRTb3VyY2UgbXVzdCBiZSBhIGZ1bmN0aW9uIScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxhc3RDYWxsZWQgPSBEYXRlLm5vdygpO1xuICAgIHJldHVybiBsb2NhbE9wdGlvbnMuZ2V0U291cmNlLmNhbGwocGxheWVyLCBzZXRTb3VyY2UpO1xuICB9O1xuICAvKipcbiAgICogVW5iaW5kIGFueSBldmVudCBoYW5kbGVycyB0aGF0IHdlcmUgYm91bmQgYnkgdGhlIHBsdWdpblxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuXG4gIHZhciBjbGVhbnVwRXZlbnRzID0gZnVuY3Rpb24gY2xlYW51cEV2ZW50cygpIHtcbiAgICBwbGF5ZXIub2ZmKCdsb2FkZWRtZXRhZGF0YScsIGxvYWRlZE1ldGFkYXRhSGFuZGxlcik7XG4gICAgcGxheWVyLm9mZignZXJyb3InLCBlcnJvckhhbmRsZXIpO1xuICAgIHBsYXllci5vZmYoJ2Rpc3Bvc2UnLCBjbGVhbnVwRXZlbnRzKTtcbiAgfTtcbiAgLyoqXG4gICAqIENsZWFudXAgYmVmb3JlIHJlLWluaXRpYWxpemluZyB0aGUgcGx1Z2luXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbbmV3T3B0aW9uc10gYW4gb2JqZWN0IHdpdGggcGx1Z2luIG9wdGlvbnNcbiAgICogQHByaXZhdGVcbiAgICovXG5cblxuICB2YXIgcmVpbml0UGx1Z2luID0gZnVuY3Rpb24gcmVpbml0UGx1Z2luKG5ld09wdGlvbnMpIHtcbiAgICBjbGVhbnVwRXZlbnRzKCk7XG4gICAgaW5pdFBsdWdpbihwbGF5ZXIsIG5ld09wdGlvbnMpO1xuICB9O1xuXG4gIHBsYXllci5vbignZXJyb3InLCBlcnJvckhhbmRsZXIpO1xuICBwbGF5ZXIub24oJ2Rpc3Bvc2UnLCBjbGVhbnVwRXZlbnRzKTsgLy8gT3ZlcndyaXRlIHRoZSBwbHVnaW4gZnVuY3Rpb24gc28gdGhhdCB3ZSBjYW4gY29ycmVjdGx5IGNsZWFudXAgYmVmb3JlXG4gIC8vIGluaXRpYWxpemluZyB0aGUgcGx1Z2luXG5cbiAgcGxheWVyLnJlbG9hZFNvdXJjZU9uRXJyb3IgPSByZWluaXRQbHVnaW47XG59O1xuLyoqXG4gKiBSZWxvYWQgdGhlIHNvdXJjZSB3aGVuIGFuIGVycm9yIGlzIGRldGVjdGVkIGFzIGxvbmcgYXMgdGhlcmVcbiAqIHdhc24ndCBhbiBlcnJvciBwcmV2aW91c2x5IHdpdGhpbiB0aGUgbGFzdCAzMCBzZWNvbmRzXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBhbiBvYmplY3Qgd2l0aCBwbHVnaW4gb3B0aW9uc1xuICovXG5cblxudmFyIHJlbG9hZFNvdXJjZU9uRXJyb3IgPSBmdW5jdGlvbiByZWxvYWRTb3VyY2VPbkVycm9yKG9wdGlvbnMpIHtcbiAgaW5pdFBsdWdpbih0aGlzLCBvcHRpb25zKTtcbn07XG5cbnZhciB2ZXJzaW9uJDEgPSBcIjEuOS4zXCI7IC8vIHNpbmNlIFZIUyBoYW5kbGVzIEhMUyBhbmQgREFTSCAoYW5kIGluIHRoZSBmdXR1cmUsIG1vcmUgdHlwZXMpLCB1c2UgKiB0byBjYXB0dXJlIGFsbFxuXG52aWRlb2pzJDEudXNlKCcqJywgZnVuY3Rpb24gKHBsYXllcikge1xuICByZXR1cm4ge1xuICAgIHNldFNvdXJjZTogZnVuY3Rpb24gc2V0U291cmNlKHNyY09iaiwgbmV4dCkge1xuICAgICAgLy8gcGFzcyBudWxsIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byBpbmRpY2F0ZSB0aGF0IHRoZSBzb3VyY2UgaXMgbm90IHJlamVjdGVkXG4gICAgICBuZXh0KG51bGwsIHNyY09iaik7XG4gICAgfSxcbiAgICAvLyBWSFMgbmVlZHMgdG8ga25vdyB3aGVuIHNlZWtzIGhhcHBlbi4gRm9yIGV4dGVybmFsIHNlZWtzIChnZW5lcmF0ZWQgYXQgdGhlIHBsYXllclxuICAgIC8vIGxldmVsKSwgdGhpcyBtaWRkbGV3YXJlIHdpbGwgY2FwdHVyZSB0aGUgYWN0aW9uLiBGb3IgaW50ZXJuYWwgc2Vla3MgKGdlbmVyYXRlZCBhdFxuICAgIC8vIHRoZSB0ZWNoIGxldmVsKSwgd2UgdXNlIGEgd3JhcHBlZCBmdW5jdGlvbiBzbyB0aGF0IHdlIGNhbiBoYW5kbGUgaXQgb24gb3VyIG93blxuICAgIC8vIChzcGVjaWZpZWQgZWxzZXdoZXJlKS5cbiAgICBzZXRDdXJyZW50VGltZTogZnVuY3Rpb24gc2V0Q3VycmVudFRpbWUodGltZSkge1xuICAgICAgaWYgKHBsYXllci52aHMgJiYgcGxheWVyLmN1cnJlbnRTb3VyY2UoKS5zcmMgPT09IHBsYXllci52aHMuc291cmNlXy5zcmMpIHtcbiAgICAgICAgcGxheWVyLnZocy5zZXRDdXJyZW50VGltZSh0aW1lKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRpbWU7XG4gICAgfSxcbiAgICAvLyBTeW5jIFZIUyBhZnRlciBwbGF5IHJlcXVlc3RzLlxuICAgIC8vIFRoaXMgc3BlY2lmaWNhbGx5IGhhbmRsZXMgcmVwbGF5IHdoZXJlIHRoZSBvcmRlciBvZiBhY3Rpb25zIGlzXG4gICAgLy8gcGxheSwgdmlkZW8gZWxlbWVudCB3aWxsIHNlZWsgdG8gMCAoc2tpcHBpbmcgdGhlIHNldEN1cnJlbnRUaW1lIG1pZGRsZXdhcmUpXG4gICAgLy8gdGhlbiB0cmlnZ2VycyBhIHBsYXkgZXZlbnQuXG4gICAgcGxheTogZnVuY3Rpb24gcGxheSgpIHtcbiAgICAgIGlmIChwbGF5ZXIudmhzICYmIHBsYXllci5jdXJyZW50U291cmNlKCkuc3JjID09PSBwbGF5ZXIudmhzLnNvdXJjZV8uc3JjKSB7XG4gICAgICAgIHBsYXllci52aHMuc2V0Q3VycmVudFRpbWUocGxheWVyLnRlY2hfLmN1cnJlbnRUaW1lKCkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn0pO1xuLyoqXG4gKiBAZmlsZSB2aWRlb2pzLWh0dHAtc3RyZWFtaW5nLmpzXG4gKlxuICogVGhlIG1haW4gZmlsZSBmb3IgdGhlIEhMUyBwcm9qZWN0LlxuICogTGljZW5zZTogaHR0cHM6Ly9naXRodWIuY29tL3ZpZGVvanMvdmlkZW9qcy1odHRwLXN0cmVhbWluZy9ibG9iL21hc3Rlci9MSUNFTlNFXG4gKi9cblxudmFyIEhscyQxID0ge1xuICBQbGF5bGlzdExvYWRlcjogUGxheWxpc3RMb2FkZXIsXG4gIFBsYXlsaXN0OiBQbGF5bGlzdCxcbiAgRGVjcnlwdGVyOiBEZWNyeXB0ZXIsXG4gIEFzeW5jU3RyZWFtOiBBc3luY1N0cmVhbSxcbiAgZGVjcnlwdDogZGVjcnlwdCxcbiAgdXRpbHM6IHV0aWxzLFxuICBTVEFOREFSRF9QTEFZTElTVF9TRUxFQ1RPUjogbGFzdEJhbmR3aWR0aFNlbGVjdG9yLFxuICBJTklUSUFMX1BMQVlMSVNUX1NFTEVDVE9SOiBsb3dlc3RCaXRyYXRlQ29tcGF0aWJsZVZhcmlhbnRTZWxlY3RvcixcbiAgY29tcGFyZVBsYXlsaXN0QmFuZHdpZHRoOiBjb21wYXJlUGxheWxpc3RCYW5kd2lkdGgsXG4gIGNvbXBhcmVQbGF5bGlzdFJlc29sdXRpb246IGNvbXBhcmVQbGF5bGlzdFJlc29sdXRpb24sXG4gIHhocjogeGhyRmFjdG9yeSgpXG59OyAvLyBEZWZpbmUgZ2V0dGVyL3NldHRlcnMgZm9yIGNvbmZpZyBwcm9wZXJpdGVzXG5cblsnR09BTF9CVUZGRVJfTEVOR1RIJywgJ01BWF9HT0FMX0JVRkZFUl9MRU5HVEgnLCAnR09BTF9CVUZGRVJfTEVOR1RIX1JBVEUnLCAnQlVGRkVSX0xPV19XQVRFUl9MSU5FJywgJ01BWF9CVUZGRVJfTE9XX1dBVEVSX0xJTkUnLCAnQlVGRkVSX0xPV19XQVRFUl9MSU5FX1JBVEUnLCAnQkFORFdJRFRIX1ZBUklBTkNFJ10uZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSGxzJDEsIHByb3AsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgIHZpZGVvanMkMS5sb2cud2FybigndXNpbmcgSGxzLicgKyBwcm9wICsgJyBpcyBVTlNBRkUgYmUgc3VyZSB5b3Uga25vdyB3aGF0IHlvdSBhcmUgZG9pbmcnKTtcbiAgICAgIHJldHVybiBDb25maWdbcHJvcF07XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMSh2YWx1ZSkge1xuICAgICAgdmlkZW9qcyQxLmxvZy53YXJuKCd1c2luZyBIbHMuJyArIHByb3AgKyAnIGlzIFVOU0FGRSBiZSBzdXJlIHlvdSBrbm93IHdoYXQgeW91IGFyZSBkb2luZycpO1xuXG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJyB8fCB2YWx1ZSA8IDApIHtcbiAgICAgICAgdmlkZW9qcyQxLmxvZy53YXJuKCd2YWx1ZSBvZiBIbHMuJyArIHByb3AgKyAnIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIDAnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBDb25maWdbcHJvcF0gPSB2YWx1ZTtcbiAgICB9XG4gIH0pO1xufSk7XG52YXIgTE9DQUxfU1RPUkFHRV9LRVkkMSA9ICd2aWRlb2pzLXZocyc7XG5cbnZhciBzaW1wbGVUeXBlRnJvbVNvdXJjZVR5cGUgPSBmdW5jdGlvbiBzaW1wbGVUeXBlRnJvbVNvdXJjZVR5cGUodHlwZSkge1xuICB2YXIgbXBlZ3VybFJFID0gL14oYXVkaW98dmlkZW98YXBwbGljYXRpb24pXFwvKHgtfHZuZFxcLmFwcGxlXFwuKT9tcGVndXJsL2k7XG5cbiAgaWYgKG1wZWd1cmxSRS50ZXN0KHR5cGUpKSB7XG4gICAgcmV0dXJuICdobHMnO1xuICB9XG5cbiAgdmFyIGRhc2hSRSA9IC9eYXBwbGljYXRpb25cXC9kYXNoXFwreG1sL2k7XG5cbiAgaWYgKGRhc2hSRS50ZXN0KHR5cGUpKSB7XG4gICAgcmV0dXJuICdkYXNoJztcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufTtcbi8qKlxuICogVXBkYXRlcyB0aGUgc2VsZWN0ZWRJbmRleCBvZiB0aGUgUXVhbGl0eUxldmVsTGlzdCB3aGVuIGEgbWVkaWFjaGFuZ2UgaGFwcGVucyBpbiBobHMuXG4gKlxuICogQHBhcmFtIHtRdWFsaXR5TGV2ZWxMaXN0fSBxdWFsaXR5TGV2ZWxzIFRoZSBRdWFsaXR5TGV2ZWxMaXN0IHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSB7UGxheWxpc3RMb2FkZXJ9IHBsYXlsaXN0TG9hZGVyIFBsYXlsaXN0TG9hZGVyIGNvbnRhaW5pbmcgdGhlIG5ldyBtZWRpYSBpbmZvLlxuICogQGZ1bmN0aW9uIGhhbmRsZUhsc01lZGlhQ2hhbmdlXG4gKi9cblxuXG52YXIgaGFuZGxlSGxzTWVkaWFDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVIbHNNZWRpYUNoYW5nZShxdWFsaXR5TGV2ZWxzLCBwbGF5bGlzdExvYWRlcikge1xuICB2YXIgbmV3UGxheWxpc3QgPSBwbGF5bGlzdExvYWRlci5tZWRpYSgpO1xuICB2YXIgc2VsZWN0ZWRJbmRleCA9IC0xO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcXVhbGl0eUxldmVscy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChxdWFsaXR5TGV2ZWxzW2ldLmlkID09PSBuZXdQbGF5bGlzdC51cmkpIHtcbiAgICAgIHNlbGVjdGVkSW5kZXggPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcXVhbGl0eUxldmVscy5zZWxlY3RlZEluZGV4XyA9IHNlbGVjdGVkSW5kZXg7XG4gIHF1YWxpdHlMZXZlbHMudHJpZ2dlcih7XG4gICAgc2VsZWN0ZWRJbmRleDogc2VsZWN0ZWRJbmRleCxcbiAgICB0eXBlOiAnY2hhbmdlJ1xuICB9KTtcbn07XG4vKipcbiAqIEFkZHMgcXVhbGl0eSBsZXZlbHMgdG8gbGlzdCBvbmNlIHBsYXlsaXN0IG1ldGFkYXRhIGlzIGF2YWlsYWJsZVxuICpcbiAqIEBwYXJhbSB7UXVhbGl0eUxldmVsTGlzdH0gcXVhbGl0eUxldmVscyBUaGUgUXVhbGl0eUxldmVsTGlzdCB0byBhdHRhY2ggZXZlbnRzIHRvLlxuICogQHBhcmFtIHtPYmplY3R9IGhscyBIbHMgb2JqZWN0IHRvIGxpc3RlbiB0byBmb3IgbWVkaWEgZXZlbnRzLlxuICogQGZ1bmN0aW9uIGhhbmRsZUhsc0xvYWRlZE1ldGFkYXRhXG4gKi9cblxuXG52YXIgaGFuZGxlSGxzTG9hZGVkTWV0YWRhdGEgPSBmdW5jdGlvbiBoYW5kbGVIbHNMb2FkZWRNZXRhZGF0YShxdWFsaXR5TGV2ZWxzLCBobHMpIHtcbiAgaGxzLnJlcHJlc2VudGF0aW9ucygpLmZvckVhY2goZnVuY3Rpb24gKHJlcCkge1xuICAgIHF1YWxpdHlMZXZlbHMuYWRkUXVhbGl0eUxldmVsKHJlcCk7XG4gIH0pO1xuICBoYW5kbGVIbHNNZWRpYUNoYW5nZShxdWFsaXR5TGV2ZWxzLCBobHMucGxheWxpc3RzKTtcbn07IC8vIEhMUyBpcyBhIHNvdXJjZSBoYW5kbGVyLCBub3QgYSB0ZWNoLiBNYWtlIHN1cmUgYXR0ZW1wdHMgdG8gdXNlIGl0XG4vLyBhcyBvbmUgZG8gbm90IGNhdXNlIGV4Y2VwdGlvbnMuXG5cblxuSGxzJDEuY2FuUGxheVNvdXJjZSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHZpZGVvanMkMS5sb2cud2FybignSExTIGlzIG5vIGxvbmdlciBhIHRlY2guIFBsZWFzZSByZW1vdmUgaXQgZnJvbSAnICsgJ3lvdXIgcGxheWVyXFwncyB0ZWNoT3JkZXIuJyk7XG59O1xuXG52YXIgZW1lS2V5U3lzdGVtcyA9IGZ1bmN0aW9uIGVtZUtleVN5c3RlbXMoa2V5U3lzdGVtT3B0aW9ucywgdmlkZW9QbGF5bGlzdCwgYXVkaW9QbGF5bGlzdCkge1xuICBpZiAoIWtleVN5c3RlbU9wdGlvbnMpIHtcbiAgICByZXR1cm4ga2V5U3lzdGVtT3B0aW9ucztcbiAgfSAvLyB1cHNlcnQgdGhlIGNvbnRlbnQgdHlwZXMgYmFzZWQgb24gdGhlIHNlbGVjdGVkIHBsYXlsaXN0XG5cblxuICB2YXIga2V5U3lzdGVtQ29udGVudFR5cGVzID0ge307XG5cbiAgZm9yICh2YXIga2V5U3lzdGVtIGluIGtleVN5c3RlbU9wdGlvbnMpIHtcbiAgICBrZXlTeXN0ZW1Db250ZW50VHlwZXNba2V5U3lzdGVtXSA9IHtcbiAgICAgIGF1ZGlvQ29udGVudFR5cGU6ICdhdWRpby9tcDQ7IGNvZGVjcz1cIicgKyBhdWRpb1BsYXlsaXN0LmF0dHJpYnV0ZXMuQ09ERUNTICsgJ1wiJyxcbiAgICAgIHZpZGVvQ29udGVudFR5cGU6ICd2aWRlby9tcDQ7IGNvZGVjcz1cIicgKyB2aWRlb1BsYXlsaXN0LmF0dHJpYnV0ZXMuQ09ERUNTICsgJ1wiJ1xuICAgIH07XG5cbiAgICBpZiAodmlkZW9QbGF5bGlzdC5jb250ZW50UHJvdGVjdGlvbiAmJiB2aWRlb1BsYXlsaXN0LmNvbnRlbnRQcm90ZWN0aW9uW2tleVN5c3RlbV0gJiYgdmlkZW9QbGF5bGlzdC5jb250ZW50UHJvdGVjdGlvbltrZXlTeXN0ZW1dLnBzc2gpIHtcbiAgICAgIGtleVN5c3RlbUNvbnRlbnRUeXBlc1trZXlTeXN0ZW1dLnBzc2ggPSB2aWRlb1BsYXlsaXN0LmNvbnRlbnRQcm90ZWN0aW9uW2tleVN5c3RlbV0ucHNzaDtcbiAgICB9IC8vIHZpZGVvanMtY29udHJpYi1lbWUgYWNjZXB0cyB0aGUgb3B0aW9uIG9mIHNwZWNpZnlpbmc6ICdjb20uc29tZS5jZG0nOiAndXJsJ1xuICAgIC8vIHNvIHdlIG5lZWQgdG8gcHJldmVudCBvdmVyd3JpdGluZyB0aGUgVVJMIGVudGlyZWx5XG5cblxuICAgIGlmICh0eXBlb2Yga2V5U3lzdGVtT3B0aW9uc1trZXlTeXN0ZW1dID09PSAnc3RyaW5nJykge1xuICAgICAga2V5U3lzdGVtQ29udGVudFR5cGVzW2tleVN5c3RlbV0udXJsID0ga2V5U3lzdGVtT3B0aW9uc1trZXlTeXN0ZW1dO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB2aWRlb2pzJDEubWVyZ2VPcHRpb25zKGtleVN5c3RlbU9wdGlvbnMsIGtleVN5c3RlbUNvbnRlbnRUeXBlcyk7XG59O1xuXG52YXIgc2V0dXBFbWVPcHRpb25zID0gZnVuY3Rpb24gc2V0dXBFbWVPcHRpb25zKGhsc0hhbmRsZXIpIHtcbiAgaWYgKGhsc0hhbmRsZXIub3B0aW9uc18uc291cmNlVHlwZSAhPT0gJ2Rhc2gnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHBsYXllciA9IHZpZGVvanMkMS5wbGF5ZXJzW2hsc0hhbmRsZXIudGVjaF8ub3B0aW9uc18ucGxheWVySWRdO1xuXG4gIGlmIChwbGF5ZXIuZW1lKSB7XG4gICAgdmFyIHNvdXJjZU9wdGlvbnMgPSBlbWVLZXlTeXN0ZW1zKGhsc0hhbmRsZXIuc291cmNlXy5rZXlTeXN0ZW1zLCBobHNIYW5kbGVyLnBsYXlsaXN0cy5tZWRpYSgpLCBobHNIYW5kbGVyLm1hc3RlclBsYXlsaXN0Q29udHJvbGxlcl8ubWVkaWFUeXBlc18uQVVESU8uYWN0aXZlUGxheWxpc3RMb2FkZXIubWVkaWEoKSk7XG5cbiAgICBpZiAoc291cmNlT3B0aW9ucykge1xuICAgICAgcGxheWVyLmN1cnJlbnRTb3VyY2UoKS5rZXlTeXN0ZW1zID0gc291cmNlT3B0aW9uczsgLy8gd29ya3MgYXJvdW5kIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTg5NTQ0OVxuXG4gICAgICBpZiAocGxheWVyLmVtZS5pbml0aWFsaXplTWVkaWFLZXlzKSB7XG4gICAgICAgIHBsYXllci5lbWUuaW5pdGlhbGl6ZU1lZGlhS2V5cygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxudmFyIGdldFZoc0xvY2FsU3RvcmFnZSA9IGZ1bmN0aW9uIGdldFZoc0xvY2FsU3RvcmFnZSgpIHtcbiAgaWYgKCF3aW5kb3cubG9jYWxTdG9yYWdlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgc3RvcmVkT2JqZWN0ID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKExPQ0FMX1NUT1JBR0VfS0VZJDEpO1xuXG4gIGlmICghc3RvcmVkT2JqZWN0KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB0cnkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHN0b3JlZE9iamVjdCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBzb21lb25lIG1heSBoYXZlIHRhbXBlcmVkIHdpdGggdGhlIHZhbHVlXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbnZhciB1cGRhdGVWaHNMb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiB1cGRhdGVWaHNMb2NhbFN0b3JhZ2Uob3B0aW9ucykge1xuICBpZiAoIXdpbmRvdy5sb2NhbFN0b3JhZ2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgb2JqZWN0VG9TdG9yZSA9IGdldFZoc0xvY2FsU3RvcmFnZSgpO1xuICBvYmplY3RUb1N0b3JlID0gb2JqZWN0VG9TdG9yZSA/IHZpZGVvanMkMS5tZXJnZU9wdGlvbnMob2JqZWN0VG9TdG9yZSwgb3B0aW9ucykgOiBvcHRpb25zO1xuXG4gIHRyeSB7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfS0VZJDEsIEpTT04uc3RyaW5naWZ5KG9iamVjdFRvU3RvcmUpKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIFRocm93cyBpZiBzdG9yYWdlIGlzIGZ1bGwgKGUuZy4sIGFsd2F5cyBvbiBpT1MgNSsgU2FmYXJpIHByaXZhdGUgbW9kZSwgd2hlcmVcbiAgICAvLyBzdG9yYWdlIGlzIHNldCB0byAwKS5cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU3RvcmFnZS9zZXRJdGVtI0V4Y2VwdGlvbnNcbiAgICAvLyBObyBuZWVkIHRvIHBlcmZvcm0gYW55IG9wZXJhdGlvbi5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gb2JqZWN0VG9TdG9yZTtcbn07XG4vKipcbiAqIFdoZXRoZXIgdGhlIGJyb3dzZXIgaGFzIGJ1aWx0LWluIEhMUyBzdXBwb3J0LlxuICovXG5cblxuSGxzJDEuc3VwcG9ydHNOYXRpdmVIbHMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7IC8vIG5hdGl2ZSBITFMgaXMgZGVmaW5pdGVseSBub3Qgc3VwcG9ydGVkIGlmIEhUTUw1IHZpZGVvIGlzbid0XG5cbiAgaWYgKCF2aWRlb2pzJDEuZ2V0VGVjaCgnSHRtbDUnKS5pc1N1cHBvcnRlZCgpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IC8vIEhMUyBtYW5pZmVzdHMgY2FuIGdvIGJ5IG1hbnkgbWltZS10eXBlc1xuXG5cbiAgdmFyIGNhblBsYXkgPSBbLy8gQXBwbGUgc2FudGlvbmVkXG4gICdhcHBsaWNhdGlvbi92bmQuYXBwbGUubXBlZ3VybCcsIC8vIEFwcGxlIHNhbmN0aW9uZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gICdhdWRpby9tcGVndXJsJywgLy8gVmVyeSBjb21tb25cbiAgJ2F1ZGlvL3gtbXBlZ3VybCcsIC8vIFZlcnkgY29tbW9uXG4gICdhcHBsaWNhdGlvbi94LW1wZWd1cmwnLCAvLyBJbmNsdWRlZCBmb3IgY29tcGxldGVuZXNzXG4gICd2aWRlby94LW1wZWd1cmwnLCAndmlkZW8vbXBlZ3VybCcsICdhcHBsaWNhdGlvbi9tcGVndXJsJ107XG4gIHJldHVybiBjYW5QbGF5LnNvbWUoZnVuY3Rpb24gKGNhbkl0UGxheSkge1xuICAgIHJldHVybiAvbWF5YmV8cHJvYmFibHkvaS50ZXN0KHZpZGVvLmNhblBsYXlUeXBlKGNhbkl0UGxheSkpO1xuICB9KTtcbn0oKTtcblxuSGxzJDEuc3VwcG9ydHNOYXRpdmVEYXNoID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXZpZGVvanMkMS5nZXRUZWNoKCdIdG1sNScpLmlzU3VwcG9ydGVkKCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gL21heWJlfHByb2JhYmx5L2kudGVzdChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpLmNhblBsYXlUeXBlKCdhcHBsaWNhdGlvbi9kYXNoK3htbCcpKTtcbn0oKTtcblxuSGxzJDEuc3VwcG9ydHNUeXBlTmF0aXZlbHkgPSBmdW5jdGlvbiAodHlwZSkge1xuICBpZiAodHlwZSA9PT0gJ2hscycpIHtcbiAgICByZXR1cm4gSGxzJDEuc3VwcG9ydHNOYXRpdmVIbHM7XG4gIH1cblxuICBpZiAodHlwZSA9PT0gJ2Rhc2gnKSB7XG4gICAgcmV0dXJuIEhscyQxLnN1cHBvcnRzTmF0aXZlRGFzaDtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn07XG4vKipcbiAqIEhMUyBpcyBhIHNvdXJjZSBoYW5kbGVyLCBub3QgYSB0ZWNoLiBNYWtlIHN1cmUgYXR0ZW1wdHMgdG8gdXNlIGl0XG4gKiBhcyBvbmUgZG8gbm90IGNhdXNlIGV4Y2VwdGlvbnMuXG4gKi9cblxuXG5IbHMkMS5pc1N1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHZpZGVvanMkMS5sb2cud2FybignSExTIGlzIG5vIGxvbmdlciBhIHRlY2guIFBsZWFzZSByZW1vdmUgaXQgZnJvbSAnICsgJ3lvdXIgcGxheWVyXFwncyB0ZWNoT3JkZXIuJyk7XG59O1xuXG52YXIgQ29tcG9uZW50JDEgPSB2aWRlb2pzJDEuZ2V0Q29tcG9uZW50KCdDb21wb25lbnQnKTtcbi8qKlxuICogVGhlIEhscyBIYW5kbGVyIG9iamVjdCwgd2hlcmUgd2Ugb3JjaGVzdHJhdGUgYWxsIG9mIHRoZSBwYXJ0c1xuICogb2YgSExTIHRvIGludGVyYWN0IHdpdGggdmlkZW8uanNcbiAqXG4gKiBAY2xhc3MgSGxzSGFuZGxlclxuICogQGV4dGVuZHMgdmlkZW9qcy5Db21wb25lbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgdGhlIHNvcnVjZSBvYmplY3RcbiAqIEBwYXJhbSB7VGVjaH0gdGVjaCB0aGUgcGFyZW50IHRlY2ggb2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBvcHRpb25hbCBhbmQgcmVxdWlyZWQgb3B0aW9uc1xuICovXG5cbnZhciBIbHNIYW5kbGVyID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgaW5oZXJpdHMoSGxzSGFuZGxlciwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gSGxzSGFuZGxlcihzb3VyY2UsIHRlY2gsIG9wdGlvbnMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBIbHNIYW5kbGVyKTsgLy8gdGVjaC5wbGF5ZXIoKSBpcyBkZXByZWNhdGVkIGJ1dCBzZXR1cCBhIHJlZmVyZW5jZSB0byBITFMgZm9yXG4gICAgLy8gYmFja3dhcmRzLWNvbXBhdGliaWxpdHlcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEhsc0hhbmRsZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihIbHNIYW5kbGVyKSkuY2FsbCh0aGlzLCB0ZWNoLCBvcHRpb25zLmhscykpO1xuXG4gICAgaWYgKHRlY2gub3B0aW9uc18gJiYgdGVjaC5vcHRpb25zXy5wbGF5ZXJJZCkge1xuICAgICAgdmFyIF9wbGF5ZXIgPSB2aWRlb2pzJDEodGVjaC5vcHRpb25zXy5wbGF5ZXJJZCk7XG5cbiAgICAgIGlmICghX3BsYXllci5oYXNPd25Qcm9wZXJ0eSgnaGxzJykpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9wbGF5ZXIsICdobHMnLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICAgICAgICB2aWRlb2pzJDEubG9nLndhcm4oJ3BsYXllci5obHMgaXMgZGVwcmVjYXRlZC4gVXNlIHBsYXllci50ZWNoKCkuaGxzIGluc3RlYWQuJyk7XG4gICAgICAgICAgICB0ZWNoLnRyaWdnZXIoe1xuICAgICAgICAgICAgICB0eXBlOiAndXNhZ2UnLFxuICAgICAgICAgICAgICBuYW1lOiAnaGxzLXBsYXllci1hY2Nlc3MnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0gLy8gU2V0IHVwIGEgcmVmZXJlbmNlIHRvIHRoZSBIbHNIYW5kbGVyIGZyb20gcGxheWVyLnZocy4gVGhpcyBhbGxvd3MgdXNlcnMgdG8gc3RhcnRcbiAgICAgIC8vIG1pZ3JhdGluZyBmcm9tIHBsYXllci50ZWNoXy5obHMuLi4gdG8gcGxheWVyLnZocy4uLiBmb3IgQVBJIGFjY2Vzcy4gQWx0aG91Z2ggdGhpc1xuICAgICAgLy8gaXNuJ3QgdGhlIG1vc3QgYXBwcm9wcmlhdGUgZm9ybSBvZiByZWZlcmVuY2UgZm9yIHZpZGVvLmpzIChzaW5jZSBhbGwgQVBJcyBzaG91bGRcbiAgICAgIC8vIGJlIHByb3ZpZGVkIHRocm91Z2ggY29yZSB2aWRlby5qcyksIGl0IGlzIGEgY29tbW9uIHBhdHRlcm4gZm9yIHBsdWdpbnMsIGFuZCB2aHNcbiAgICAgIC8vIHdpbGwgYWN0IGFjY29yZGluZ2x5LlxuXG5cbiAgICAgIF9wbGF5ZXIudmhzID0gX3RoaXM7IC8vIGRlcHJlY2F0ZWQsIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuXG4gICAgICBfcGxheWVyLmRhc2ggPSBfdGhpcztcbiAgICAgIF90aGlzLnBsYXllcl8gPSBfcGxheWVyO1xuICAgIH1cblxuICAgIF90aGlzLnRlY2hfID0gdGVjaDtcbiAgICBfdGhpcy5zb3VyY2VfID0gc291cmNlO1xuICAgIF90aGlzLnN0YXRzID0ge307XG5cbiAgICBfdGhpcy5zZXRPcHRpb25zXygpO1xuXG4gICAgaWYgKF90aGlzLm9wdGlvbnNfLm92ZXJyaWRlTmF0aXZlICYmIHRlY2gub3ZlcnJpZGVOYXRpdmVBdWRpb1RyYWNrcyAmJiB0ZWNoLm92ZXJyaWRlTmF0aXZlVmlkZW9UcmFja3MpIHtcbiAgICAgIHRlY2gub3ZlcnJpZGVOYXRpdmVBdWRpb1RyYWNrcyh0cnVlKTtcbiAgICAgIHRlY2gub3ZlcnJpZGVOYXRpdmVWaWRlb1RyYWNrcyh0cnVlKTtcbiAgICB9IGVsc2UgaWYgKF90aGlzLm9wdGlvbnNfLm92ZXJyaWRlTmF0aXZlICYmICh0ZWNoLmZlYXR1cmVzTmF0aXZlVmlkZW9UcmFja3MgfHwgdGVjaC5mZWF0dXJlc05hdGl2ZUF1ZGlvVHJhY2tzKSkge1xuICAgICAgLy8gb3ZlcnJpZGluZyBuYXRpdmUgSExTIG9ubHkgd29ya3MgaWYgYXVkaW8gdHJhY2tzIGhhdmUgYmVlbiBlbXVsYXRlZFxuICAgICAgLy8gZXJyb3IgZWFybHkgaWYgd2UncmUgbWlzY29uZmlndXJlZFxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdPdmVycmlkaW5nIG5hdGl2ZSBITFMgcmVxdWlyZXMgZW11bGF0ZWQgdHJhY2tzLiAnICsgJ1NlZSBodHRwczovL2dpdC5pby92TXBqQicpO1xuICAgIH0gLy8gbGlzdGVuIGZvciBmdWxsc2NyZWVuY2hhbmdlIGV2ZW50cyBmb3IgdGhpcyBwbGF5ZXIgc28gdGhhdCB3ZVxuICAgIC8vIGNhbiBhZGp1c3Qgb3VyIHF1YWxpdHkgc2VsZWN0aW9uIHF1aWNrbHlcblxuXG4gICAgX3RoaXMub24oZG9jdW1lbnQsIFsnZnVsbHNjcmVlbmNoYW5nZScsICd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJywgJ21vemZ1bGxzY3JlZW5jaGFuZ2UnLCAnTVNGdWxsc2NyZWVuQ2hhbmdlJ10sIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyIGZ1bGxzY3JlZW5FbGVtZW50ID0gZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQubXNGdWxsc2NyZWVuRWxlbWVudDtcblxuICAgICAgaWYgKGZ1bGxzY3JlZW5FbGVtZW50ICYmIGZ1bGxzY3JlZW5FbGVtZW50LmNvbnRhaW5zKF90aGlzLnRlY2hfLmVsKCkpKSB7XG4gICAgICAgIF90aGlzLm1hc3RlclBsYXlsaXN0Q29udHJvbGxlcl8uc21vb3RoUXVhbGl0eUNoYW5nZV8oKTtcbiAgICAgIH1cbiAgICB9KTsgLy8gSGFuZGxlIHNlZWtpbmcgd2hlbiBsb29waW5nIC0gbWlkZGxld2FyZSBkb2Vzbid0IGhhbmRsZSB0aGlzIHNlZWsgZXZlbnQgZnJvbSB0aGUgdGVjaFxuXG5cbiAgICBfdGhpcy5vbihfdGhpcy50ZWNoXywgJ3NlZWtpbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy50ZWNoXy5jdXJyZW50VGltZSgpID09PSAwICYmIHRoaXMudGVjaF8ucGxheWVyXy5sb29wKCkpIHtcbiAgICAgICAgdGhpcy5zZXRDdXJyZW50VGltZSgwKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIF90aGlzLm9uKF90aGlzLnRlY2hfLCAnZXJyb3InLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5tYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJfKSB7XG4gICAgICAgIHRoaXMubWFzdGVyUGxheWxpc3RDb250cm9sbGVyXy5wYXVzZUxvYWRpbmcoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIF90aGlzLm9uKF90aGlzLnRlY2hfLCAncGxheScsIF90aGlzLnBsYXkpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoSGxzSGFuZGxlciwgW3tcbiAgICBrZXk6ICdzZXRPcHRpb25zXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldE9wdGlvbnNfKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7IC8vIGRlZmF1bHRzXG5cblxuICAgICAgdGhpcy5vcHRpb25zXy53aXRoQ3JlZGVudGlhbHMgPSB0aGlzLm9wdGlvbnNfLndpdGhDcmVkZW50aWFscyB8fCBmYWxzZTtcbiAgICAgIHRoaXMub3B0aW9uc18uaGFuZGxlTWFuaWZlc3RSZWRpcmVjdHMgPSB0aGlzLm9wdGlvbnNfLmhhbmRsZU1hbmlmZXN0UmVkaXJlY3RzIHx8IGZhbHNlO1xuICAgICAgdGhpcy5vcHRpb25zXy5saW1pdFJlbmRpdGlvbkJ5UGxheWVyRGltZW5zaW9ucyA9IHRoaXMub3B0aW9uc18ubGltaXRSZW5kaXRpb25CeVBsYXllckRpbWVuc2lvbnMgPT09IGZhbHNlID8gZmFsc2UgOiB0cnVlO1xuICAgICAgdGhpcy5vcHRpb25zXy5zbW9vdGhRdWFsaXR5Q2hhbmdlID0gdGhpcy5vcHRpb25zXy5zbW9vdGhRdWFsaXR5Q2hhbmdlIHx8IGZhbHNlO1xuICAgICAgdGhpcy5vcHRpb25zXy51c2VCYW5kd2lkdGhGcm9tTG9jYWxTdG9yYWdlID0gdHlwZW9mIHRoaXMuc291cmNlXy51c2VCYW5kd2lkdGhGcm9tTG9jYWxTdG9yYWdlICE9PSAndW5kZWZpbmVkJyA/IHRoaXMuc291cmNlXy51c2VCYW5kd2lkdGhGcm9tTG9jYWxTdG9yYWdlIDogdGhpcy5vcHRpb25zXy51c2VCYW5kd2lkdGhGcm9tTG9jYWxTdG9yYWdlIHx8IGZhbHNlO1xuICAgICAgdGhpcy5vcHRpb25zXy5jdXN0b21UYWdQYXJzZXJzID0gdGhpcy5vcHRpb25zXy5jdXN0b21UYWdQYXJzZXJzIHx8IFtdO1xuICAgICAgdGhpcy5vcHRpb25zXy5jdXN0b21UYWdNYXBwZXJzID0gdGhpcy5vcHRpb25zXy5jdXN0b21UYWdNYXBwZXJzIHx8IFtdO1xuXG4gICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9uc18uYmxhY2tsaXN0RHVyYXRpb24gIT09ICdudW1iZXInKSB7XG4gICAgICAgIHRoaXMub3B0aW9uc18uYmxhY2tsaXN0RHVyYXRpb24gPSA1ICogNjA7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zXy5iYW5kd2lkdGggIT09ICdudW1iZXInKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnNfLnVzZUJhbmR3aWR0aEZyb21Mb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgICB2YXIgc3RvcmVkT2JqZWN0ID0gZ2V0VmhzTG9jYWxTdG9yYWdlKCk7XG5cbiAgICAgICAgICBpZiAoc3RvcmVkT2JqZWN0ICYmIHN0b3JlZE9iamVjdC5iYW5kd2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9uc18uYmFuZHdpZHRoID0gc3RvcmVkT2JqZWN0LmJhbmR3aWR0aDtcbiAgICAgICAgICAgIHRoaXMudGVjaF8udHJpZ2dlcih7XG4gICAgICAgICAgICAgIHR5cGU6ICd1c2FnZScsXG4gICAgICAgICAgICAgIG5hbWU6ICdobHMtYmFuZHdpZHRoLWZyb20tbG9jYWwtc3RvcmFnZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzdG9yZWRPYmplY3QgJiYgc3RvcmVkT2JqZWN0LnRocm91Z2hwdXQpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9uc18udGhyb3VnaHB1dCA9IHN0b3JlZE9iamVjdC50aHJvdWdocHV0O1xuICAgICAgICAgICAgdGhpcy50ZWNoXy50cmlnZ2VyKHtcbiAgICAgICAgICAgICAgdHlwZTogJ3VzYWdlJyxcbiAgICAgICAgICAgICAgbmFtZTogJ2hscy10aHJvdWdocHV0LWZyb20tbG9jYWwtc3RvcmFnZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSAvLyBpZiBiYW5kd2lkdGggd2FzIG5vdCBzZXQgYnkgb3B0aW9ucyBvciBwdWxsZWQgZnJvbSBsb2NhbCBzdG9yYWdlLCBzdGFydCBwbGF5bGlzdFxuICAgICAgLy8gc2VsZWN0aW9uIGF0IGEgcmVhc29uYWJsZSBiYW5kd2lkdGhcblxuXG4gICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9uc18uYmFuZHdpZHRoICE9PSAnbnVtYmVyJykge1xuICAgICAgICB0aGlzLm9wdGlvbnNfLmJhbmR3aWR0aCA9IENvbmZpZy5JTklUSUFMX0JBTkRXSURUSDtcbiAgICAgIH0gLy8gSWYgdGhlIGJhbmR3aWR0aCBudW1iZXIgaXMgdW5jaGFuZ2VkIGZyb20gdGhlIGluaXRpYWwgc2V0dGluZ1xuICAgICAgLy8gdGhlbiB0aGlzIHRha2VzIHByZWNlZGVuY2Ugb3ZlciB0aGUgZW5hYmxlTG93SW5pdGlhbFBsYXlsaXN0IG9wdGlvblxuXG5cbiAgICAgIHRoaXMub3B0aW9uc18uZW5hYmxlTG93SW5pdGlhbFBsYXlsaXN0ID0gdGhpcy5vcHRpb25zXy5lbmFibGVMb3dJbml0aWFsUGxheWxpc3QgJiYgdGhpcy5vcHRpb25zXy5iYW5kd2lkdGggPT09IENvbmZpZy5JTklUSUFMX0JBTkRXSURUSDsgLy8gZ3JhYiBvcHRpb25zIHBhc3NlZCB0byBwbGF5ZXIuc3JjXG5cbiAgICAgIFsnd2l0aENyZWRlbnRpYWxzJywgJ2xpbWl0UmVuZGl0aW9uQnlQbGF5ZXJEaW1lbnNpb25zJywgJ2JhbmR3aWR0aCcsICdzbW9vdGhRdWFsaXR5Q2hhbmdlJywgJ2N1c3RvbVRhZ1BhcnNlcnMnLCAnY3VzdG9tVGFnTWFwcGVycycsICdoYW5kbGVNYW5pZmVzdFJlZGlyZWN0cyddLmZvckVhY2goZnVuY3Rpb24gKG9wdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIF90aGlzMi5zb3VyY2VfW29wdGlvbl0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgX3RoaXMyLm9wdGlvbnNfW29wdGlvbl0gPSBfdGhpczIuc291cmNlX1tvcHRpb25dO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMubGltaXRSZW5kaXRpb25CeVBsYXllckRpbWVuc2lvbnMgPSB0aGlzLm9wdGlvbnNfLmxpbWl0UmVuZGl0aW9uQnlQbGF5ZXJEaW1lbnNpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBjYWxsZWQgd2hlbiBwbGF5ZXIuc3JjIGdldHMgY2FsbGVkLCBoYW5kbGUgYSBuZXcgc291cmNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3JjIHRoZSBzb3VyY2Ugb2JqZWN0IHRvIGhhbmRsZVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdzcmMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzcmMoX3NyYywgdHlwZSkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7IC8vIGRvIG5vdGhpbmcgaWYgdGhlIHNyYyBpcyBmYWxzZXlcblxuXG4gICAgICBpZiAoIV9zcmMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNldE9wdGlvbnNfKCk7IC8vIGFkZCBtYXN0ZXIgcGxheWxpc3QgY29udHJvbGxlciBvcHRpb25zXG5cbiAgICAgIHRoaXMub3B0aW9uc18udXJsID0gdGhpcy5zb3VyY2VfLnNyYztcbiAgICAgIHRoaXMub3B0aW9uc18udGVjaCA9IHRoaXMudGVjaF87XG4gICAgICB0aGlzLm9wdGlvbnNfLmV4dGVybkhscyA9IEhscyQxO1xuICAgICAgdGhpcy5vcHRpb25zXy5zb3VyY2VUeXBlID0gc2ltcGxlVHlwZUZyb21Tb3VyY2VUeXBlKHR5cGUpOyAvLyBXaGVuZXZlciB3ZSBzZWVrIGludGVybmFsbHksIHdlIHNob3VsZCB1cGRhdGUgYm90aCB0aGUgdGVjaCBhbmQgY2FsbCBvdXIgb3duXG4gICAgICAvLyBzZXRDdXJyZW50VGltZSBmdW5jdGlvbi4gVGhpcyBpcyBuZWVkZWQgYmVjYXVzZSBcInNlZWtpbmdcIiBldmVudHMgYXJlbid0IGFsd2F5c1xuICAgICAgLy8gcmVsaWFibGUuIEV4dGVybmFsIHNlZWtzICh2aWEgdGhlIHBsYXllciBvYmplY3QpIGFyZSBoYW5kbGVkIHZpYSBtaWRkbGV3YXJlLlxuXG4gICAgICB0aGlzLm9wdGlvbnNfLnNlZWtUbyA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gICAgICAgIF90aGlzMy50ZWNoXy5zZXRDdXJyZW50VGltZSh0aW1lKTtcblxuICAgICAgICBfdGhpczMuc2V0Q3VycmVudFRpbWUodGltZSk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLm1hc3RlclBsYXlsaXN0Q29udHJvbGxlcl8gPSBuZXcgTWFzdGVyUGxheWxpc3RDb250cm9sbGVyKHRoaXMub3B0aW9uc18pO1xuICAgICAgdGhpcy5wbGF5YmFja1dhdGNoZXJfID0gbmV3IFBsYXliYWNrV2F0Y2hlcih2aWRlb2pzJDEubWVyZ2VPcHRpb25zKHRoaXMub3B0aW9uc18sIHtcbiAgICAgICAgc2Vla2FibGU6IGZ1bmN0aW9uIHNlZWthYmxlJCQxKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczMuc2Vla2FibGUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgbWVkaWE6IGZ1bmN0aW9uIG1lZGlhKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczMubWFzdGVyUGxheWxpc3RDb250cm9sbGVyXy5tZWRpYSgpO1xuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgICB0aGlzLm1hc3RlclBsYXlsaXN0Q29udHJvbGxlcl8ub24oJ2Vycm9yJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGxheWVyID0gdmlkZW9qcyQxLnBsYXllcnNbX3RoaXMzLnRlY2hfLm9wdGlvbnNfLnBsYXllcklkXTtcbiAgICAgICAgcGxheWVyLmVycm9yKF90aGlzMy5tYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJfLmVycm9yKTtcbiAgICAgIH0pOyAvLyBgdGhpc2AgaW4gc2VsZWN0UGxheWxpc3Qgc2hvdWxkIGJlIHRoZSBIbHNIYW5kbGVyIGZvciBiYWNrd2FyZHNcbiAgICAgIC8vIGNvbXBhdGliaWxpdHkgd2l0aCA8IHYyXG5cbiAgICAgIHRoaXMubWFzdGVyUGxheWxpc3RDb250cm9sbGVyXy5zZWxlY3RQbGF5bGlzdCA9IHRoaXMuc2VsZWN0UGxheWxpc3QgPyB0aGlzLnNlbGVjdFBsYXlsaXN0LmJpbmQodGhpcykgOiBIbHMkMS5TVEFOREFSRF9QTEFZTElTVF9TRUxFQ1RPUi5iaW5kKHRoaXMpO1xuICAgICAgdGhpcy5tYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJfLnNlbGVjdEluaXRpYWxQbGF5bGlzdCA9IEhscyQxLklOSVRJQUxfUExBWUxJU1RfU0VMRUNUT1IuYmluZCh0aGlzKTsgLy8gcmUtZXhwb3NlIHNvbWUgaW50ZXJuYWwgb2JqZWN0cyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCA8IHYyXG5cbiAgICAgIHRoaXMucGxheWxpc3RzID0gdGhpcy5tYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJfLm1hc3RlclBsYXlsaXN0TG9hZGVyXztcbiAgICAgIHRoaXMubWVkaWFTb3VyY2UgPSB0aGlzLm1hc3RlclBsYXlsaXN0Q29udHJvbGxlcl8ubWVkaWFTb3VyY2U7IC8vIFByb3h5IGFzc2lnbm1lbnQgb2Ygc29tZSBwcm9wZXJ0aWVzIHRvIHRoZSBtYXN0ZXIgcGxheWxpc3RcbiAgICAgIC8vIGNvbnRyb2xsZXIuIFVzaW5nIGEgY3VzdG9tIHByb3BlcnR5IGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuICAgICAgLy8gd2l0aCA8IHYyXG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgc2VsZWN0UGxheWxpc3Q6IHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hc3RlclBsYXlsaXN0Q29udHJvbGxlcl8uc2VsZWN0UGxheWxpc3Q7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMShzZWxlY3RQbGF5bGlzdCkge1xuICAgICAgICAgICAgdGhpcy5tYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJfLnNlbGVjdFBsYXlsaXN0ID0gc2VsZWN0UGxheWxpc3QuYmluZCh0aGlzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHRocm91Z2hwdXQ6IHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hc3RlclBsYXlsaXN0Q29udHJvbGxlcl8ubWFpblNlZ21lbnRMb2FkZXJfLnRocm91Z2hwdXQucmF0ZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0JCQxKHRocm91Z2hwdXQpIHtcbiAgICAgICAgICAgIHRoaXMubWFzdGVyUGxheWxpc3RDb250cm9sbGVyXy5tYWluU2VnbWVudExvYWRlcl8udGhyb3VnaHB1dC5yYXRlID0gdGhyb3VnaHB1dDsgLy8gQnkgc2V0dGluZyBgY291bnRgIHRvIDEgdGhlIHRocm91Z2hwdXQgdmFsdWUgYmVjb21lcyB0aGUgc3RhcnRpbmcgdmFsdWVcbiAgICAgICAgICAgIC8vIGZvciB0aGUgY3VtdWxhdGl2ZSBhdmVyYWdlXG5cbiAgICAgICAgICAgIHRoaXMubWFzdGVyUGxheWxpc3RDb250cm9sbGVyXy5tYWluU2VnbWVudExvYWRlcl8udGhyb3VnaHB1dC5jb3VudCA9IDE7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBiYW5kd2lkdGg6IHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hc3RlclBsYXlsaXN0Q29udHJvbGxlcl8ubWFpblNlZ21lbnRMb2FkZXJfLmJhbmR3aWR0aDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0JCQxKGJhbmR3aWR0aCkge1xuICAgICAgICAgICAgdGhpcy5tYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJfLm1haW5TZWdtZW50TG9hZGVyXy5iYW5kd2lkdGggPSBiYW5kd2lkdGg7IC8vIHNldHRpbmcgdGhlIGJhbmR3aWR0aCBtYW51YWxseSByZXNldHMgdGhlIHRocm91Z2hwdXQgY291bnRlclxuICAgICAgICAgICAgLy8gYGNvdW50YCBpcyBzZXQgdG8gemVybyB0aGF0IGN1cnJlbnQgdmFsdWUgb2YgYHJhdGVgIGlzbid0IGluY2x1ZGVkXG4gICAgICAgICAgICAvLyBpbiB0aGUgY3VtdWxhdGl2ZSBhdmVyYWdlXG5cbiAgICAgICAgICAgIHRoaXMubWFzdGVyUGxheWxpc3RDb250cm9sbGVyXy5tYWluU2VnbWVudExvYWRlcl8udGhyb3VnaHB1dCA9IHtcbiAgICAgICAgICAgICAgcmF0ZTogMCxcbiAgICAgICAgICAgICAgY291bnQ6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBgc3lzdGVtQmFuZHdpZHRoYCBpcyBhIGNvbWJpbmF0aW9uIG9mIHR3byBzZXJpYWwgcHJvY2Vzc2VzIGJpdC1yYXRlcy4gVGhlIGZpcnN0XG4gICAgICAgICAqIGlzIHRoZSBuZXR3b3JrIGJpdHJhdGUgcHJvdmlkZWQgYnkgYGJhbmR3aWR0aGAgYW5kIHRoZSBzZWNvbmQgaXMgdGhlIGJpdHJhdGUgb2ZcbiAgICAgICAgICogdGhlIGVudGlyZSBwcm9jZXNzIGFmdGVyIHRoYXQgLSBkZWNyeXB0aW9uLCB0cmFuc211eGluZywgYW5kIGFwcGVuZGluZyAtIHByb3ZpZGVkXG4gICAgICAgICAqIGJ5IGB0aHJvdWdocHV0YC5cbiAgICAgICAgICpcbiAgICAgICAgICogU2luY2UgdGhlIHR3byBwcm9jZXNzIGFyZSBzZXJpYWwsIHRoZSBvdmVyYWxsIHN5c3RlbSBiYW5kd2lkdGggaXMgZ2l2ZW4gYnk6XG4gICAgICAgICAqICAgc3lzQmFuZHdpZHRoID0gMSAvICgxIC8gYmFuZHdpZHRoICsgMSAvIHRocm91Z2hwdXQpXG4gICAgICAgICAqL1xuICAgICAgICBzeXN0ZW1CYW5kd2lkdGg6IHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgICAgICAgIHZhciBpbnZCYW5kd2lkdGggPSAxIC8gKHRoaXMuYmFuZHdpZHRoIHx8IDEpO1xuICAgICAgICAgICAgdmFyIGludlRocm91Z2hwdXQgPSB2b2lkIDA7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnRocm91Z2hwdXQgPiAwKSB7XG4gICAgICAgICAgICAgIGludlRocm91Z2hwdXQgPSAxIC8gdGhpcy50aHJvdWdocHV0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaW52VGhyb3VnaHB1dCA9IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzeXN0ZW1CaXRyYXRlID0gTWF0aC5mbG9vcigxIC8gKGludkJhbmR3aWR0aCArIGludlRocm91Z2hwdXQpKTtcbiAgICAgICAgICAgIHJldHVybiBzeXN0ZW1CaXRyYXRlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQkJDEoKSB7XG4gICAgICAgICAgICB2aWRlb2pzJDEubG9nLmVycm9yKCdUaGUgXCJzeXN0ZW1CYW5kd2lkdGhcIiBwcm9wZXJ0eSBpcyByZWFkLW9ubHknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zXy5iYW5kd2lkdGgpIHtcbiAgICAgICAgdGhpcy5iYW5kd2lkdGggPSB0aGlzLm9wdGlvbnNfLmJhbmR3aWR0aDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0aW9uc18udGhyb3VnaHB1dCkge1xuICAgICAgICB0aGlzLnRocm91Z2hwdXQgPSB0aGlzLm9wdGlvbnNfLnRocm91Z2hwdXQ7XG4gICAgICB9XG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMuc3RhdHMsIHtcbiAgICAgICAgYmFuZHdpZHRoOiB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMzLmJhbmR3aWR0aCB8fCAwO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBtZWRpYVJlcXVlc3RzOiB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMzLm1hc3RlclBsYXlsaXN0Q29udHJvbGxlcl8ubWVkaWFSZXF1ZXN0c18oKSB8fCAwO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBtZWRpYVJlcXVlc3RzQWJvcnRlZDoge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5tYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJfLm1lZGlhUmVxdWVzdHNBYm9ydGVkXygpIHx8IDA7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIG1lZGlhUmVxdWVzdHNUaW1lZG91dDoge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5tYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJfLm1lZGlhUmVxdWVzdHNUaW1lZG91dF8oKSB8fCAwO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBtZWRpYVJlcXVlc3RzRXJyb3JlZDoge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5tYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJfLm1lZGlhUmVxdWVzdHNFcnJvcmVkXygpIHx8IDA7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIG1lZGlhVHJhbnNmZXJEdXJhdGlvbjoge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5tYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJfLm1lZGlhVHJhbnNmZXJEdXJhdGlvbl8oKSB8fCAwO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBtZWRpYUJ5dGVzVHJhbnNmZXJyZWQ6IHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczMubWFzdGVyUGxheWxpc3RDb250cm9sbGVyXy5tZWRpYUJ5dGVzVHJhbnNmZXJyZWRfKCkgfHwgMDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgbWVkaWFTZWNvbmRzTG9hZGVkOiB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMzLm1hc3RlclBsYXlsaXN0Q29udHJvbGxlcl8ubWVkaWFTZWNvbmRzTG9hZGVkXygpIHx8IDA7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIGJ1ZmZlcmVkOiB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGltZVJhbmdlc1RvQXJyYXkoX3RoaXMzLnRlY2hfLmJ1ZmZlcmVkKCkpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBjdXJyZW50VGltZToge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzMy50ZWNoXy5jdXJyZW50VGltZSgpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBjdXJyZW50U291cmNlOiB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMzLnRlY2hfLmN1cnJlbnRTb3VyY2VfO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBjdXJyZW50VGVjaDoge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzMy50ZWNoXy5uYW1lXztcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgZHVyYXRpb246IHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczMudGVjaF8uZHVyYXRpb24oKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgbWFzdGVyOiB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMzLnBsYXlsaXN0cy5tYXN0ZXI7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHBsYXllckRpbWVuc2lvbnM6IHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczMudGVjaF8uY3VycmVudERpbWVuc2lvbnMoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgc2Vla2FibGU6IHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aW1lUmFuZ2VzVG9BcnJheShfdGhpczMudGVjaF8uc2Vla2FibGUoKSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWVzdGFtcDoge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0JCQxKCkge1xuICAgICAgICAgICAgcmV0dXJuIERhdGUubm93KCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHZpZGVvUGxheWJhY2tRdWFsaXR5OiB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMzLnRlY2hfLmdldFZpZGVvUGxheWJhY2tRdWFsaXR5KCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy50ZWNoXy5vbmUoJ2NhbnBsYXknLCB0aGlzLm1hc3RlclBsYXlsaXN0Q29udHJvbGxlcl8uc2V0dXBGaXJzdFBsYXkuYmluZCh0aGlzLm1hc3RlclBsYXlsaXN0Q29udHJvbGxlcl8pKTtcbiAgICAgIHRoaXMudGVjaF8ub24oJ2JhbmR3aWR0aHVwZGF0ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF90aGlzMy5vcHRpb25zXy51c2VCYW5kd2lkdGhGcm9tTG9jYWxTdG9yYWdlKSB7XG4gICAgICAgICAgdXBkYXRlVmhzTG9jYWxTdG9yYWdlKHtcbiAgICAgICAgICAgIGJhbmR3aWR0aDogX3RoaXMzLmJhbmR3aWR0aCxcbiAgICAgICAgICAgIHRocm91Z2hwdXQ6IE1hdGgucm91bmQoX3RoaXMzLnRocm91Z2hwdXQpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy5tYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJfLm9uKCdzZWxlY3RlZGluaXRpYWxtZWRpYScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gQWRkIHRoZSBtYW51YWwgcmVuZGl0aW9uIG1peC1pbiB0byBIbHNIYW5kbGVyXG4gICAgICAgIHJlbmRpdGlvblNlbGVjdGlvbk1peGluKF90aGlzMyk7XG4gICAgICAgIHNldHVwRW1lT3B0aW9ucyhfdGhpczMpO1xuICAgICAgfSk7IC8vIHRoZSBiYW5kd2lkdGggb2YgdGhlIHByaW1hcnkgc2VnbWVudCBsb2FkZXIgaXMgb3VyIGJlc3RcbiAgICAgIC8vIGVzdGltYXRlIG9mIG92ZXJhbGwgYmFuZHdpZHRoXG5cbiAgICAgIHRoaXMub24odGhpcy5tYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJfLCAncHJvZ3Jlc3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudGVjaF8udHJpZ2dlcigncHJvZ3Jlc3MnKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy50ZWNoXy5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczMuc2V0dXBRdWFsaXR5TGV2ZWxzXygpO1xuICAgICAgfSk7IC8vIGRvIG5vdGhpbmcgaWYgdGhlIHRlY2ggaGFzIGJlZW4gZGlzcG9zZWQgYWxyZWFkeVxuICAgICAgLy8gdGhpcyBjYW4gb2NjdXIgaWYgc29tZW9uZSBzZXRzIHRoZSBzcmMgaW4gcGxheWVyLnJlYWR5KCksIGZvciBpbnN0YW5jZVxuXG4gICAgICBpZiAoIXRoaXMudGVjaF8uZWwoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMudGVjaF8uc3JjKHZpZGVvanMkMS5VUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMubWFzdGVyUGxheWxpc3RDb250cm9sbGVyXy5tZWRpYVNvdXJjZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgcXVhbGl0eSBsZXZlbHMgYW5kIHNldHMgbGlzdGVuZXJzIHRvIHVwZGF0ZSB0aGVtLlxuICAgICAqXG4gICAgICogQG1ldGhvZCBzZXR1cFF1YWxpdHlMZXZlbHNfXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnc2V0dXBRdWFsaXR5TGV2ZWxzXycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwUXVhbGl0eUxldmVsc18oKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgdmFyIHBsYXllciA9IHZpZGVvanMkMS5wbGF5ZXJzW3RoaXMudGVjaF8ub3B0aW9uc18ucGxheWVySWRdO1xuXG4gICAgICBpZiAocGxheWVyICYmIHBsYXllci5xdWFsaXR5TGV2ZWxzKSB7XG4gICAgICAgIHRoaXMucXVhbGl0eUxldmVsc18gPSBwbGF5ZXIucXVhbGl0eUxldmVscygpO1xuICAgICAgICB0aGlzLm1hc3RlclBsYXlsaXN0Q29udHJvbGxlcl8ub24oJ3NlbGVjdGVkaW5pdGlhbG1lZGlhJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGhhbmRsZUhsc0xvYWRlZE1ldGFkYXRhKF90aGlzNC5xdWFsaXR5TGV2ZWxzXywgX3RoaXM0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGxheWxpc3RzLm9uKCdtZWRpYWNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBoYW5kbGVIbHNNZWRpYUNoYW5nZShfdGhpczQucXVhbGl0eUxldmVsc18sIF90aGlzNC5wbGF5bGlzdHMpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQmVnaW4gcGxheWluZyB0aGUgdmlkZW8uXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3BsYXknLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwbGF5KCkge1xuICAgICAgdGhpcy5tYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJfLnBsYXkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogYSB3cmFwcGVyIGFyb3VuZCB0aGUgZnVuY3Rpb24gaW4gTWFzdGVyUGxheWxpc3RDb250cm9sbGVyXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3NldEN1cnJlbnRUaW1lJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q3VycmVudFRpbWUoY3VycmVudFRpbWUpIHtcbiAgICAgIHRoaXMubWFzdGVyUGxheWxpc3RDb250cm9sbGVyXy5zZXRDdXJyZW50VGltZShjdXJyZW50VGltZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGEgd3JhcHBlciBhcm91bmQgdGhlIGZ1bmN0aW9uIGluIE1hc3RlclBsYXlsaXN0Q29udHJvbGxlclxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdkdXJhdGlvbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGR1cmF0aW9uJCQxKCkge1xuICAgICAgcmV0dXJuIHRoaXMubWFzdGVyUGxheWxpc3RDb250cm9sbGVyXy5kdXJhdGlvbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBhIHdyYXBwZXIgYXJvdW5kIHRoZSBmdW5jdGlvbiBpbiBNYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnc2Vla2FibGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWVrYWJsZSQkMSgpIHtcbiAgICAgIHJldHVybiB0aGlzLm1hc3RlclBsYXlsaXN0Q29udHJvbGxlcl8uc2Vla2FibGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWJvcnQgYWxsIG91dHN0YW5kaW5nIHdvcmsgYW5kIGNsZWFudXAuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2Rpc3Bvc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgaWYgKHRoaXMucGxheWJhY2tXYXRjaGVyXykge1xuICAgICAgICB0aGlzLnBsYXliYWNrV2F0Y2hlcl8uZGlzcG9zZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5tYXN0ZXJQbGF5bGlzdENvbnRyb2xsZXJfKSB7XG4gICAgICAgIHRoaXMubWFzdGVyUGxheWxpc3RDb250cm9sbGVyXy5kaXNwb3NlKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnF1YWxpdHlMZXZlbHNfKSB7XG4gICAgICAgIHRoaXMucXVhbGl0eUxldmVsc18uZGlzcG9zZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wbGF5ZXJfKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnBsYXllcl8udmhzO1xuICAgICAgICBkZWxldGUgdGhpcy5wbGF5ZXJfLmRhc2g7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnBsYXllcl8uaGxzO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy50ZWNoXyAmJiB0aGlzLnRlY2hfLmhscykge1xuICAgICAgICBkZWxldGUgdGhpcy50ZWNoXy5obHM7XG4gICAgICB9XG5cbiAgICAgIGdldCQxKEhsc0hhbmRsZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoSGxzSGFuZGxlci5wcm90b3R5cGUpLCAnZGlzcG9zZScsIHRoaXMpLmNhbGwodGhpcyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29udmVydFRvUHJvZ3JhbVRpbWUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb252ZXJ0VG9Qcm9ncmFtVGltZSh0aW1lLCBjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIGdldFByb2dyYW1UaW1lKHtcbiAgICAgICAgcGxheWxpc3Q6IHRoaXMubWFzdGVyUGxheWxpc3RDb250cm9sbGVyXy5tZWRpYSgpLFxuICAgICAgICB0aW1lOiB0aW1lLFxuICAgICAgICBjYWxsYmFjazogY2FsbGJhY2tcbiAgICAgIH0pO1xuICAgIH0gLy8gdGhlIHBsYXllciBtdXN0IGJlIHBsYXlpbmcgYmVmb3JlIGNhbGxpbmcgdGhpc1xuXG4gIH0sIHtcbiAgICBrZXk6ICdzZWVrVG9Qcm9ncmFtVGltZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlZWtUb1Byb2dyYW1UaW1lJCQxKHByb2dyYW1UaW1lLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHBhdXNlQWZ0ZXJTZWVrID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB0cnVlO1xuICAgICAgdmFyIHJldHJ5Q291bnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IDI7XG4gICAgICByZXR1cm4gc2Vla1RvUHJvZ3JhbVRpbWUoe1xuICAgICAgICBwcm9ncmFtVGltZTogcHJvZ3JhbVRpbWUsXG4gICAgICAgIHBsYXlsaXN0OiB0aGlzLm1hc3RlclBsYXlsaXN0Q29udHJvbGxlcl8ubWVkaWEoKSxcbiAgICAgICAgcmV0cnlDb3VudDogcmV0cnlDb3VudCxcbiAgICAgICAgcGF1c2VBZnRlclNlZWs6IHBhdXNlQWZ0ZXJTZWVrLFxuICAgICAgICBzZWVrVG86IHRoaXMub3B0aW9uc18uc2Vla1RvLFxuICAgICAgICB0ZWNoOiB0aGlzLm9wdGlvbnNfLnRlY2gsXG4gICAgICAgIGNhbGxiYWNrOiBjYWxsYmFja1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBIbHNIYW5kbGVyO1xufShDb21wb25lbnQkMSk7XG4vKipcbiAqIFRoZSBTb3VyY2UgSGFuZGxlciBvYmplY3QsIHdoaWNoIGluZm9ybXMgdmlkZW8uanMgd2hhdCBhZGRpdGlvbmFsXG4gKiBNSU1FIHR5cGVzIGFyZSBzdXBwb3J0ZWQgYW5kIHNldHMgdXAgcGxheWJhY2suIEl0IGlzIHJlZ2lzdGVyZWRcbiAqIGF1dG9tYXRpY2FsbHkgdG8gdGhlIGFwcHJvcHJpYXRlIHRlY2ggYmFzZWQgb24gdGhlIGNhcGFiaWxpdGllcyBvZlxuICogdGhlIGJyb3dzZXIgaXQgaXMgcnVubmluZyBpbi4gSXQgaXMgbm90IG5lY2Vzc2FyeSB0byB1c2Ugb3IgbW9kaWZ5XG4gKiB0aGlzIG9iamVjdCBpbiBub3JtYWwgdXNhZ2UuXG4gKi9cblxuXG52YXIgSGxzU291cmNlSGFuZGxlciA9IHtcbiAgbmFtZTogJ3ZpZGVvanMtaHR0cC1zdHJlYW1pbmcnLFxuICBWRVJTSU9OOiB2ZXJzaW9uJDEsXG4gIGNhbkhhbmRsZVNvdXJjZTogZnVuY3Rpb24gY2FuSGFuZGxlU291cmNlKHNyY09iaikge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICB2YXIgbG9jYWxPcHRpb25zID0gdmlkZW9qcyQxLm1lcmdlT3B0aW9ucyh2aWRlb2pzJDEub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgcmV0dXJuIEhsc1NvdXJjZUhhbmRsZXIuY2FuUGxheVR5cGUoc3JjT2JqLnR5cGUsIGxvY2FsT3B0aW9ucyk7XG4gIH0sXG4gIGhhbmRsZVNvdXJjZTogZnVuY3Rpb24gaGFuZGxlU291cmNlKHNvdXJjZSwgdGVjaCkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcbiAgICB2YXIgbG9jYWxPcHRpb25zID0gdmlkZW9qcyQxLm1lcmdlT3B0aW9ucyh2aWRlb2pzJDEub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgdGVjaC5obHMgPSBuZXcgSGxzSGFuZGxlcihzb3VyY2UsIHRlY2gsIGxvY2FsT3B0aW9ucyk7XG4gICAgdGVjaC5obHMueGhyID0geGhyRmFjdG9yeSgpO1xuICAgIHRlY2guaGxzLnNyYyhzb3VyY2Uuc3JjLCBzb3VyY2UudHlwZSk7XG4gICAgcmV0dXJuIHRlY2guaGxzO1xuICB9LFxuICBjYW5QbGF5VHlwZTogZnVuY3Rpb24gY2FuUGxheVR5cGUodHlwZSkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIHZhciBfdmlkZW9qcyRtZXJnZU9wdGlvbnMgPSB2aWRlb2pzJDEubWVyZ2VPcHRpb25zKHZpZGVvanMkMS5vcHRpb25zLCBvcHRpb25zKSxcbiAgICAgICAgb3ZlcnJpZGVOYXRpdmUgPSBfdmlkZW9qcyRtZXJnZU9wdGlvbnMuaGxzLm92ZXJyaWRlTmF0aXZlO1xuXG4gICAgdmFyIHN1cHBvcnRlZFR5cGUgPSBzaW1wbGVUeXBlRnJvbVNvdXJjZVR5cGUodHlwZSk7XG4gICAgdmFyIGNhblVzZU1zZVBsYXliYWNrID0gc3VwcG9ydGVkVHlwZSAmJiAoIUhscyQxLnN1cHBvcnRzVHlwZU5hdGl2ZWx5KHN1cHBvcnRlZFR5cGUpIHx8IG92ZXJyaWRlTmF0aXZlKTtcbiAgICByZXR1cm4gY2FuVXNlTXNlUGxheWJhY2sgPyAnbWF5YmUnIDogJyc7XG4gIH1cbn07XG5cbmlmICh0eXBlb2YgdmlkZW9qcyQxLk1lZGlhU291cmNlID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgdmlkZW9qcyQxLlVSTCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgdmlkZW9qcyQxLk1lZGlhU291cmNlID0gTWVkaWFTb3VyY2U7XG4gIHZpZGVvanMkMS5VUkwgPSBVUkwkMTtcbn0gLy8gcmVnaXN0ZXIgc291cmNlIGhhbmRsZXJzIHdpdGggdGhlIGFwcHJvcHJpYXRlIHRlY2hzXG5cblxuaWYgKE1lZGlhU291cmNlLnN1cHBvcnRzTmF0aXZlTWVkaWFTb3VyY2VzKCkpIHtcbiAgdmlkZW9qcyQxLmdldFRlY2goJ0h0bWw1JykucmVnaXN0ZXJTb3VyY2VIYW5kbGVyKEhsc1NvdXJjZUhhbmRsZXIsIDApO1xufVxuXG52aWRlb2pzJDEuSGxzSGFuZGxlciA9IEhsc0hhbmRsZXI7XG52aWRlb2pzJDEuSGxzU291cmNlSGFuZGxlciA9IEhsc1NvdXJjZUhhbmRsZXI7XG52aWRlb2pzJDEuSGxzID0gSGxzJDE7XG5cbmlmICghdmlkZW9qcyQxLnVzZSkge1xuICB2aWRlb2pzJDEucmVnaXN0ZXJDb21wb25lbnQoJ0hscycsIEhscyQxKTtcbn1cblxudmlkZW9qcyQxLm9wdGlvbnMuaGxzID0gdmlkZW9qcyQxLm9wdGlvbnMuaGxzIHx8IHt9O1xuXG5pZiAodmlkZW9qcyQxLnJlZ2lzdGVyUGx1Z2luKSB7XG4gIHZpZGVvanMkMS5yZWdpc3RlclBsdWdpbigncmVsb2FkU291cmNlT25FcnJvcicsIHJlbG9hZFNvdXJjZU9uRXJyb3IpO1xufSBlbHNlIHtcbiAgdmlkZW9qcyQxLnBsdWdpbigncmVsb2FkU291cmNlT25FcnJvcicsIHJlbG9hZFNvdXJjZU9uRXJyb3IpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2aWRlb2pzJDE7XG4iXX0=