'use strict';

/*
RainbowVis-JS
Released under Eclipse Public License - v 1.0
*/
function Rainbow() {
  "use strict";

  var gradients = null;
  var minNum = 0;
  var maxNum = 100;
  var colours = ['ff0000', 'ffff00', '00ff00', '0000ff'];
  setColours(colours);

  function setColours(spectrum) {
    if (spectrum.length < 2) {
      throw new Error('Rainbow must have two or more colours.');
    } else {
      var increment = (maxNum - minNum) / (spectrum.length - 1);
      var firstGradient = new ColourGradient();
      firstGradient.setGradient(spectrum[0], spectrum[1]);
      firstGradient.setNumberRange(minNum, minNum + increment);
      gradients = [firstGradient];

      for (var i = 1; i < spectrum.length - 1; i++) {
        var colourGradient = new ColourGradient();
        colourGradient.setGradient(spectrum[i], spectrum[i + 1]);
        colourGradient.setNumberRange(minNum + increment * i, minNum + increment * (i + 1));
        gradients[i] = colourGradient;
      }

      colours = spectrum;
    }
  }

  this.setSpectrum = function () {
    setColours(arguments);
    return this;
  };

  this.setSpectrumByArray = function (array) {
    setColours(array);
    return this;
  };

  this.colourAt = function (number) {
    if (isNaN(number)) {
      throw new TypeError(number + ' is not a number');
    } else if (gradients.length === 1) {
      return gradients[0].colourAt(number);
    } else {
      var segment = (maxNum - minNum) / gradients.length;
      var index = Math.min(Math.floor((Math.max(number, minNum) - minNum) / segment), gradients.length - 1);
      return gradients[index].colourAt(number);
    }
  };

  this.colorAt = this.colourAt;

  this.setNumberRange = function (minNumber, maxNumber) {
    if (maxNumber > minNumber) {
      minNum = minNumber;
      maxNum = maxNumber;
      setColours(colours);
    } else {
      throw new RangeError('maxNumber (' + maxNumber + ') is not greater than minNumber (' + minNumber + ')');
    }
    return this;
  };
}

function ColourGradient() {
  "use strict";

  var startColour = 'ff0000';
  var endColour = '0000ff';
  var minNum = 0;
  var maxNum = 100;

  this.setGradient = function (colourStart, colourEnd) {
    startColour = getHexColour(colourStart);
    endColour = getHexColour(colourEnd);
  };

  this.setNumberRange = function (minNumber, maxNumber) {
    if (maxNumber > minNumber) {
      minNum = minNumber;
      maxNum = maxNumber;
    } else {
      throw new RangeError('maxNumber (' + maxNumber + ') is not greater than minNumber (' + minNumber + ')');
    }
  };

  this.colourAt = function (number) {
    return calcHex(number, startColour.substring(0, 2), endColour.substring(0, 2)) + calcHex(number, startColour.substring(2, 4), endColour.substring(2, 4)) + calcHex(number, startColour.substring(4, 6), endColour.substring(4, 6));
  };

  function calcHex(number, channelStart_Base16, channelEnd_Base16) {
    var num = number;
    if (num < minNum) {
      num = minNum;
    }
    if (num > maxNum) {
      num = maxNum;
    }
    var numRange = maxNum - minNum;
    var cStart_Base10 = parseInt(channelStart_Base16, 16);
    var cEnd_Base10 = parseInt(channelEnd_Base16, 16);
    var cPerUnit = (cEnd_Base10 - cStart_Base10) / numRange;
    var c_Base10 = Math.round(cPerUnit * (num - minNum) + cStart_Base10);
    return formatHex(c_Base10.toString(16));
  }

  function formatHex(hex) {
    if (hex.length === 1) {
      return '0' + hex;
    } else {
      return hex;
    }
  }

  function isHexColour(string) {
    var regex = /^#?[0-9a-fA-F]{6}$/i;
    return regex.test(string);
  }

  function getHexColour(string) {
    if (isHexColour(string)) {
      return string.substring(string.length - 6, string.length);
    } else {
      var name = string.toLowerCase();
      if (colourNames.hasOwnProperty(name)) {
        return colourNames[name];
      }
      throw new Error(string + ' is not a valid colour.');
    }
  }

  // Extended list of CSS colornames s taken from
  // http://www.w3.org/TR/css3-color/#svg-color
  var colourNames = {
    aliceblue: "F0F8FF",
    antiquewhite: "FAEBD7",
    aqua: "00FFFF",
    aquamarine: "7FFFD4",
    azure: "F0FFFF",
    beige: "F5F5DC",
    bisque: "FFE4C4",
    black: "000000",
    blanchedalmond: "FFEBCD",
    blue: "0000FF",
    blueviolet: "8A2BE2",
    brown: "A52A2A",
    burlywood: "DEB887",
    cadetblue: "5F9EA0",
    chartreuse: "7FFF00",
    chocolate: "D2691E",
    coral: "FF7F50",
    cornflowerblue: "6495ED",
    cornsilk: "FFF8DC",
    crimson: "DC143C",
    cyan: "00FFFF",
    darkblue: "00008B",
    darkcyan: "008B8B",
    darkgoldenrod: "B8860B",
    darkgray: "A9A9A9",
    darkgreen: "006400",
    darkgrey: "A9A9A9",
    darkkhaki: "BDB76B",
    darkmagenta: "8B008B",
    darkolivegreen: "556B2F",
    darkorange: "FF8C00",
    darkorchid: "9932CC",
    darkred: "8B0000",
    darksalmon: "E9967A",
    darkseagreen: "8FBC8F",
    darkslateblue: "483D8B",
    darkslategray: "2F4F4F",
    darkslategrey: "2F4F4F",
    darkturquoise: "00CED1",
    darkviolet: "9400D3",
    deeppink: "FF1493",
    deepskyblue: "00BFFF",
    dimgray: "696969",
    dimgrey: "696969",
    dodgerblue: "1E90FF",
    firebrick: "B22222",
    floralwhite: "FFFAF0",
    forestgreen: "228B22",
    fuchsia: "FF00FF",
    gainsboro: "DCDCDC",
    ghostwhite: "F8F8FF",
    gold: "FFD700",
    goldenrod: "DAA520",
    gray: "808080",
    green: "008000",
    greenyellow: "ADFF2F",
    grey: "808080",
    honeydew: "F0FFF0",
    hotpink: "FF69B4",
    indianred: "CD5C5C",
    indigo: "4B0082",
    ivory: "FFFFF0",
    khaki: "F0E68C",
    lavender: "E6E6FA",
    lavenderblush: "FFF0F5",
    lawngreen: "7CFC00",
    lemonchiffon: "FFFACD",
    lightblue: "ADD8E6",
    lightcoral: "F08080",
    lightcyan: "E0FFFF",
    lightgoldenrodyellow: "FAFAD2",
    lightgray: "D3D3D3",
    lightgreen: "90EE90",
    lightgrey: "D3D3D3",
    lightpink: "FFB6C1",
    lightsalmon: "FFA07A",
    lightseagreen: "20B2AA",
    lightskyblue: "87CEFA",
    lightslategray: "778899",
    lightslategrey: "778899",
    lightsteelblue: "B0C4DE",
    lightyellow: "FFFFE0",
    lime: "00FF00",
    limegreen: "32CD32",
    linen: "FAF0E6",
    magenta: "FF00FF",
    maroon: "800000",
    mediumaquamarine: "66CDAA",
    mediumblue: "0000CD",
    mediumorchid: "BA55D3",
    mediumpurple: "9370DB",
    mediumseagreen: "3CB371",
    mediumslateblue: "7B68EE",
    mediumspringgreen: "00FA9A",
    mediumturquoise: "48D1CC",
    mediumvioletred: "C71585",
    midnightblue: "191970",
    mintcream: "F5FFFA",
    mistyrose: "FFE4E1",
    moccasin: "FFE4B5",
    navajowhite: "FFDEAD",
    navy: "000080",
    oldlace: "FDF5E6",
    olive: "808000",
    olivedrab: "6B8E23",
    orange: "FFA500",
    orangered: "FF4500",
    orchid: "DA70D6",
    palegoldenrod: "EEE8AA",
    palegreen: "98FB98",
    paleturquoise: "AFEEEE",
    palevioletred: "DB7093",
    papayawhip: "FFEFD5",
    peachpuff: "FFDAB9",
    peru: "CD853F",
    pink: "FFC0CB",
    plum: "DDA0DD",
    powderblue: "B0E0E6",
    purple: "800080",
    red: "FF0000",
    rosybrown: "BC8F8F",
    royalblue: "4169E1",
    saddlebrown: "8B4513",
    salmon: "FA8072",
    sandybrown: "F4A460",
    seagreen: "2E8B57",
    seashell: "FFF5EE",
    sienna: "A0522D",
    silver: "C0C0C0",
    skyblue: "87CEEB",
    slateblue: "6A5ACD",
    slategray: "708090",
    slategrey: "708090",
    snow: "FFFAFA",
    springgreen: "00FF7F",
    steelblue: "4682B4",
    tan: "D2B48C",
    teal: "008080",
    thistle: "D8BFD8",
    tomato: "FF6347",
    turquoise: "40E0D0",
    violet: "EE82EE",
    wheat: "F5DEB3",
    white: "FFFFFF",
    whitesmoke: "F5F5F5",
    yellow: "FFFF00",
    yellowgreen: "9ACD32"
  };
}

if (typeof module !== 'undefined') {
  module.exports = Rainbow;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJhaW5ib3cuanMiXSwibmFtZXMiOlsiUmFpbmJvdyIsImdyYWRpZW50cyIsIm1pbk51bSIsIm1heE51bSIsImNvbG91cnMiLCJzZXRDb2xvdXJzIiwic3BlY3RydW0iLCJsZW5ndGgiLCJFcnJvciIsImluY3JlbWVudCIsImZpcnN0R3JhZGllbnQiLCJDb2xvdXJHcmFkaWVudCIsInNldEdyYWRpZW50Iiwic2V0TnVtYmVyUmFuZ2UiLCJpIiwiY29sb3VyR3JhZGllbnQiLCJzZXRTcGVjdHJ1bSIsImFyZ3VtZW50cyIsInNldFNwZWN0cnVtQnlBcnJheSIsImFycmF5IiwiY29sb3VyQXQiLCJudW1iZXIiLCJpc05hTiIsIlR5cGVFcnJvciIsInNlZ21lbnQiLCJpbmRleCIsIk1hdGgiLCJtaW4iLCJmbG9vciIsIm1heCIsImNvbG9yQXQiLCJtaW5OdW1iZXIiLCJtYXhOdW1iZXIiLCJSYW5nZUVycm9yIiwic3RhcnRDb2xvdXIiLCJlbmRDb2xvdXIiLCJjb2xvdXJTdGFydCIsImNvbG91ckVuZCIsImdldEhleENvbG91ciIsImNhbGNIZXgiLCJzdWJzdHJpbmciLCJjaGFubmVsU3RhcnRfQmFzZTE2IiwiY2hhbm5lbEVuZF9CYXNlMTYiLCJudW0iLCJudW1SYW5nZSIsImNTdGFydF9CYXNlMTAiLCJwYXJzZUludCIsImNFbmRfQmFzZTEwIiwiY1BlclVuaXQiLCJjX0Jhc2UxMCIsInJvdW5kIiwiZm9ybWF0SGV4IiwidG9TdHJpbmciLCJoZXgiLCJpc0hleENvbG91ciIsInN0cmluZyIsInJlZ2V4IiwidGVzdCIsIm5hbWUiLCJ0b0xvd2VyQ2FzZSIsImNvbG91ck5hbWVzIiwiaGFzT3duUHJvcGVydHkiLCJhbGljZWJsdWUiLCJhbnRpcXVld2hpdGUiLCJhcXVhIiwiYXF1YW1hcmluZSIsImF6dXJlIiwiYmVpZ2UiLCJiaXNxdWUiLCJibGFjayIsImJsYW5jaGVkYWxtb25kIiwiYmx1ZSIsImJsdWV2aW9sZXQiLCJicm93biIsImJ1cmx5d29vZCIsImNhZGV0Ymx1ZSIsImNoYXJ0cmV1c2UiLCJjaG9jb2xhdGUiLCJjb3JhbCIsImNvcm5mbG93ZXJibHVlIiwiY29ybnNpbGsiLCJjcmltc29uIiwiY3lhbiIsImRhcmtibHVlIiwiZGFya2N5YW4iLCJkYXJrZ29sZGVucm9kIiwiZGFya2dyYXkiLCJkYXJrZ3JlZW4iLCJkYXJrZ3JleSIsImRhcmtraGFraSIsImRhcmttYWdlbnRhIiwiZGFya29saXZlZ3JlZW4iLCJkYXJrb3JhbmdlIiwiZGFya29yY2hpZCIsImRhcmtyZWQiLCJkYXJrc2FsbW9uIiwiZGFya3NlYWdyZWVuIiwiZGFya3NsYXRlYmx1ZSIsImRhcmtzbGF0ZWdyYXkiLCJkYXJrc2xhdGVncmV5IiwiZGFya3R1cnF1b2lzZSIsImRhcmt2aW9sZXQiLCJkZWVwcGluayIsImRlZXBza3libHVlIiwiZGltZ3JheSIsImRpbWdyZXkiLCJkb2RnZXJibHVlIiwiZmlyZWJyaWNrIiwiZmxvcmFsd2hpdGUiLCJmb3Jlc3RncmVlbiIsImZ1Y2hzaWEiLCJnYWluc2Jvcm8iLCJnaG9zdHdoaXRlIiwiZ29sZCIsImdvbGRlbnJvZCIsImdyYXkiLCJncmVlbiIsImdyZWVueWVsbG93IiwiZ3JleSIsImhvbmV5ZGV3IiwiaG90cGluayIsImluZGlhbnJlZCIsImluZGlnbyIsIml2b3J5Iiwia2hha2kiLCJsYXZlbmRlciIsImxhdmVuZGVyYmx1c2giLCJsYXduZ3JlZW4iLCJsZW1vbmNoaWZmb24iLCJsaWdodGJsdWUiLCJsaWdodGNvcmFsIiwibGlnaHRjeWFuIiwibGlnaHRnb2xkZW5yb2R5ZWxsb3ciLCJsaWdodGdyYXkiLCJsaWdodGdyZWVuIiwibGlnaHRncmV5IiwibGlnaHRwaW5rIiwibGlnaHRzYWxtb24iLCJsaWdodHNlYWdyZWVuIiwibGlnaHRza3libHVlIiwibGlnaHRzbGF0ZWdyYXkiLCJsaWdodHNsYXRlZ3JleSIsImxpZ2h0c3RlZWxibHVlIiwibGlnaHR5ZWxsb3ciLCJsaW1lIiwibGltZWdyZWVuIiwibGluZW4iLCJtYWdlbnRhIiwibWFyb29uIiwibWVkaXVtYXF1YW1hcmluZSIsIm1lZGl1bWJsdWUiLCJtZWRpdW1vcmNoaWQiLCJtZWRpdW1wdXJwbGUiLCJtZWRpdW1zZWFncmVlbiIsIm1lZGl1bXNsYXRlYmx1ZSIsIm1lZGl1bXNwcmluZ2dyZWVuIiwibWVkaXVtdHVycXVvaXNlIiwibWVkaXVtdmlvbGV0cmVkIiwibWlkbmlnaHRibHVlIiwibWludGNyZWFtIiwibWlzdHlyb3NlIiwibW9jY2FzaW4iLCJuYXZham93aGl0ZSIsIm5hdnkiLCJvbGRsYWNlIiwib2xpdmUiLCJvbGl2ZWRyYWIiLCJvcmFuZ2UiLCJvcmFuZ2VyZWQiLCJvcmNoaWQiLCJwYWxlZ29sZGVucm9kIiwicGFsZWdyZWVuIiwicGFsZXR1cnF1b2lzZSIsInBhbGV2aW9sZXRyZWQiLCJwYXBheWF3aGlwIiwicGVhY2hwdWZmIiwicGVydSIsInBpbmsiLCJwbHVtIiwicG93ZGVyYmx1ZSIsInB1cnBsZSIsInJlZCIsInJvc3licm93biIsInJveWFsYmx1ZSIsInNhZGRsZWJyb3duIiwic2FsbW9uIiwic2FuZHlicm93biIsInNlYWdyZWVuIiwic2Vhc2hlbGwiLCJzaWVubmEiLCJzaWx2ZXIiLCJza3libHVlIiwic2xhdGVibHVlIiwic2xhdGVncmF5Iiwic2xhdGVncmV5Iiwic25vdyIsInNwcmluZ2dyZWVuIiwic3RlZWxibHVlIiwidGFuIiwidGVhbCIsInRoaXN0bGUiLCJ0b21hdG8iLCJ0dXJxdW9pc2UiLCJ2aW9sZXQiLCJ3aGVhdCIsIndoaXRlIiwid2hpdGVzbW9rZSIsInllbGxvdyIsInllbGxvd2dyZWVuIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7OztBQUlBLFNBQVNBLE9BQVQsR0FDQTtBQUNFOztBQUNBLE1BQUlDLFlBQVksSUFBaEI7QUFDQSxNQUFJQyxTQUFTLENBQWI7QUFDQSxNQUFJQyxTQUFTLEdBQWI7QUFDQSxNQUFJQyxVQUFVLENBQUMsUUFBRCxFQUFXLFFBQVgsRUFBcUIsUUFBckIsRUFBK0IsUUFB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QXdJaEJDLGVBQVcsUUF4SUs7QUF5SWhCQyxTQUFLLFFBeklXO0FBMEloQkMsVUFBTSxRQTFJVTtBQTJJaEJDLGFBQVMsUUEzSU87QUE0SWhCQyxZQUFRLFFBNUlRO0FBNkloQkMsZUFBVyxRQTdJSztBQThJaEJDLFlBQVEsUUE5SVE7QUErSWhCQyxXQUFPLFFBL0lTO0FBZ0poQkMsV0FBTyxRQWhKUztBQWlKaEJDLGdCQUFZLFFBakpJO0FBa0poQkMsWUFBUSxRQWxKUTtBQW1KaEJDLGlCQUFhO0FBbkpHLEdBQWxCO0FBcUpEOztBQUVELElBQUksT0FBT0MsTUFBUCxLQUFrQixXQUF0QixFQUFtQztBQUNqQ0EsU0FBT0MsT0FBUCxHQUFpQmxOLE9BQWpCO0FBQ0QiLCJmaWxlIjoicmFpbmJvdy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5SYWluYm93VmlzLUpTXG5SZWxlYXNlZCB1bmRlciBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIC0gdiAxLjBcbiovXG5mdW5jdGlvbiBSYWluYm93KClcbntcbiAgXCJ1c2Ugc3RyaWN0XCI7XG4gIHZhciBncmFkaWVudHMgPSBudWxsO1xuICB2YXIgbWluTnVtID0gMDtcbiAgdmFyIG1heE51bSA9IDEwMDtcbiAgdmFyIGNvbG91cnMgPSBbJ2ZmMDAwMCcsICdmZmZmMDAnLCAnMDBmZjAwJywgJzAwMDBmZiddO1xuICBzZXRDb2xvdXJzKGNvbG91cnMpO1xuICBcbiAgZnVuY3Rpb24gc2V0Q29sb3VycyAoc3BlY3RydW0pXG4gIHtcbiAgICBpZiAoc3BlY3RydW0ubGVuZ3RoIDwgMikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSYWluYm93IG11c3QgaGF2ZSB0d28gb3IgbW9yZSBjb2xvdXJzLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaW5jcmVtZW50ID0gKG1heE51bSAtIG1pbk51bSkvKHNwZWN0cnVtLmxlbmd0aCAtIDEpO1xuICAgICAgdmFyIGZpcnN0R3JhZGllbnQgPSBuZXcgQ29sb3VyR3JhZGllbnQoKTtcbiAgICAgIGZpcnN0R3JhZGllbnQuc2V0R3JhZGllbnQoc3BlY3RydW1bMF0sIHNwZWN0cnVtWzFdKTtcbiAgICAgIGZpcnN0R3JhZGllbnQuc2V0TnVtYmVyUmFuZ2UobWluTnVtLCBtaW5OdW0gKyBpbmNyZW1lbnQpO1xuICAgICAgZ3JhZGllbnRzID0gWyBmaXJzdEdyYWRpZW50IF07XG4gICAgICBcbiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc3BlY3RydW0ubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgIHZhciBjb2xvdXJHcmFkaWVudCA9IG5ldyBDb2xvdXJHcmFkaWVudCgpO1xuICAgICAgICBjb2xvdXJHcmFkaWVudC5zZXRHcmFkaWVudChzcGVjdHJ1bVtpXSwgc3BlY3RydW1baSArIDFdKTtcbiAgICAgICAgY29sb3VyR3JhZGllbnQuc2V0TnVtYmVyUmFuZ2UobWluTnVtICsgaW5jcmVtZW50ICogaSwgbWluTnVtICsgaW5jcmVtZW50ICogKGkgKyAxKSk7XG4gICAgICAgIGdyYWRpZW50c1tpXSA9IGNvbG91ckdyYWRpZW50O1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb2xvdXJzID0gc3BlY3RydW07XG4gICAgfVxuICB9XG4gIFxuICB0aGlzLnNldFNwZWN0cnVtID0gZnVuY3Rpb24gKClcbiAge1xuICAgIHNldENvbG91cnMoYXJndW1lbnRzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgdGhpcy5zZXRTcGVjdHJ1bUJ5QXJyYXkgPSBmdW5jdGlvbiAoYXJyYXkpXG4gIHtcbiAgICBzZXRDb2xvdXJzKGFycmF5KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgdGhpcy5jb2xvdXJBdCA9IGZ1bmN0aW9uIChudW1iZXIpXG4gIHtcbiAgICBpZiAoaXNOYU4obnVtYmVyKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihudW1iZXIgKyAnIGlzIG5vdCBhIG51bWJlcicpO1xuICAgIH0gZWxzZSBpZiAoZ3JhZGllbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIGdyYWRpZW50c1swXS5jb2xvdXJBdChudW1iZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgc2VnbWVudCA9IChtYXhOdW0gLSBtaW5OdW0pLyhncmFkaWVudHMubGVuZ3RoKTtcbiAgICAgIHZhciBpbmRleCA9IE1hdGgubWluKE1hdGguZmxvb3IoKE1hdGgubWF4KG51bWJlciwgbWluTnVtKSAtIG1pbk51bSkvc2VnbWVudCksIGdyYWRpZW50cy5sZW5ndGggLSAxKTtcbiAgICAgIHJldHVybiBncmFkaWVudHNbaW5kZXhdLmNvbG91ckF0KG51bWJlcik7XG4gICAgfVxuICB9XG4gIFxuICB0aGlzLmNvbG9yQXQgPSB0aGlzLmNvbG91ckF0O1xuICBcbiAgdGhpcy5zZXROdW1iZXJSYW5nZSA9IGZ1bmN0aW9uIChtaW5OdW1iZXIsIG1heE51bWJlcilcbiAge1xuICAgIGlmIChtYXhOdW1iZXIgPiBtaW5OdW1iZXIpIHtcbiAgICAgIG1pbk51bSA9IG1pbk51bWJlcjtcbiAgICAgIG1heE51bSA9IG1heE51bWJlcjtcbiAgICAgIHNldENvbG91cnMoY29sb3Vycyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdtYXhOdW1iZXIgKCcgKyBtYXhOdW1iZXIgKyAnKSBpcyBub3QgZ3JlYXRlciB0aGFuIG1pbk51bWJlciAoJyArIG1pbk51bWJlciArICcpJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbmZ1bmN0aW9uIENvbG91ckdyYWRpZW50KClcbntcbiAgXCJ1c2Ugc3RyaWN0XCI7XG4gIHZhciBzdGFydENvbG91ciA9ICdmZjAwMDAnO1xuICB2YXIgZW5kQ29sb3VyID0gJzAwMDBmZic7XG4gIHZhciBtaW5OdW0gPSAwO1xuICB2YXIgbWF4TnVtID0gMTAwO1xuICBcbiAgdGhpcy5zZXRHcmFkaWVudCA9IGZ1bmN0aW9uIChjb2xvdXJTdGFydCwgY29sb3VyRW5kKVxuICB7XG4gICAgc3RhcnRDb2xvdXIgPSBnZXRIZXhDb2xvdXIoY29sb3VyU3RhcnQpO1xuICAgIGVuZENvbG91ciA9IGdldEhleENvbG91cihjb2xvdXJFbmQpO1xuICB9XG4gIFxuICB0aGlzLnNldE51bWJlclJhbmdlID0gZnVuY3Rpb24gKG1pbk51bWJlciwgbWF4TnVtYmVyKVxuICB7XG4gICAgaWYgKG1heE51bWJlciA+IG1pbk51bWJlcikge1xuICAgICAgbWluTnVtID0gbWluTnVtYmVyO1xuICAgICAgbWF4TnVtID0gbWF4TnVtYmVyO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignbWF4TnVtYmVyICgnICsgbWF4TnVtYmVyICsgJykgaXMgbm90IGdyZWF0ZXIgdGhhbiBtaW5OdW1iZXIgKCcgKyBtaW5OdW1iZXIgKyAnKScpO1xuICAgIH1cbiAgfVxuICBcbiAgdGhpcy5jb2xvdXJBdCA9IGZ1bmN0aW9uIChudW1iZXIpXG4gIHtcbiAgICByZXR1cm4gY2FsY0hleChudW1iZXIsIHN0YXJ0Q29sb3VyLnN1YnN0cmluZygwLDIpLCBlbmRDb2xvdXIuc3Vic3RyaW5nKDAsMikpXG4gICAgICArIGNhbGNIZXgobnVtYmVyLCBzdGFydENvbG91ci5zdWJzdHJpbmcoMiw0KSwgZW5kQ29sb3VyLnN1YnN0cmluZygyLDQpKVxuICAgICAgKyBjYWxjSGV4KG51bWJlciwgc3RhcnRDb2xvdXIuc3Vic3RyaW5nKDQsNiksIGVuZENvbG91ci5zdWJzdHJpbmcoNCw2KSk7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGNhbGNIZXgobnVtYmVyLCBjaGFubmVsU3RhcnRfQmFzZTE2LCBjaGFubmVsRW5kX0Jhc2UxNilcbiAge1xuICAgIHZhciBudW0gPSBudW1iZXI7XG4gICAgaWYgKG51bSA8IG1pbk51bSkge1xuICAgICAgbnVtID0gbWluTnVtO1xuICAgIH1cbiAgICBpZiAobnVtID4gbWF4TnVtKSB7XG4gICAgICBudW0gPSBtYXhOdW07XG4gICAgfVxuICAgIHZhciBudW1SYW5nZSA9IG1heE51bSAtIG1pbk51bTtcbiAgICB2YXIgY1N0YXJ0X0Jhc2UxMCA9IHBhcnNlSW50KGNoYW5uZWxTdGFydF9CYXNlMTYsIDE2KTtcbiAgICB2YXIgY0VuZF9CYXNlMTAgPSBwYXJzZUludChjaGFubmVsRW5kX0Jhc2UxNiwgMTYpO1xuICAgIHZhciBjUGVyVW5pdCA9IChjRW5kX0Jhc2UxMCAtIGNTdGFydF9CYXNlMTApL251bVJhbmdlO1xuICAgIHZhciBjX0Jhc2UxMCA9IE1hdGgucm91bmQoY1BlclVuaXQgKiAobnVtIC0gbWluTnVtKSArIGNTdGFydF9CYXNlMTApO1xuICAgIHJldHVybiBmb3JtYXRIZXgoY19CYXNlMTAudG9TdHJpbmcoMTYpKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gZm9ybWF0SGV4KGhleClcbiAge1xuICAgIGlmIChoZXgubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gJzAnICsgaGV4O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaGV4O1xuICAgIH1cbiAgfVxuICBcbiAgZnVuY3Rpb24gaXNIZXhDb2xvdXIoc3RyaW5nKVxuICB7XG4gICAgdmFyIHJlZ2V4ID0gL14jP1swLTlhLWZBLUZdezZ9JC9pO1xuICAgIHJldHVybiByZWdleC50ZXN0KHN0cmluZyk7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGdldEhleENvbG91cihzdHJpbmcpXG4gIHtcbiAgICBpZiAoaXNIZXhDb2xvdXIoc3RyaW5nKSkge1xuICAgICAgcmV0dXJuIHN0cmluZy5zdWJzdHJpbmcoc3RyaW5nLmxlbmd0aCAtIDYsIHN0cmluZy5sZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbmFtZSA9IHN0cmluZy50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKGNvbG91ck5hbWVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiBjb2xvdXJOYW1lc1tuYW1lXTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcihzdHJpbmcgKyAnIGlzIG5vdCBhIHZhbGlkIGNvbG91ci4nKTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIEV4dGVuZGVkIGxpc3Qgb2YgQ1NTIGNvbG9ybmFtZXMgcyB0YWtlbiBmcm9tXG4gIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtY29sb3IvI3N2Zy1jb2xvclxuICB2YXIgY29sb3VyTmFtZXMgPSB7XG4gICAgYWxpY2VibHVlOiBcIkYwRjhGRlwiLFxuICAgIGFudGlxdWV3aGl0ZTogXCJGQUVCRDdcIixcbiAgICBhcXVhOiBcIjAwRkZGRlwiLFxuICAgIGFxdWFtYXJpbmU6IFwiN0ZGRkQ0XCIsXG4gICAgYXp1cmU6IFwiRjBGRkZGXCIsXG4gICAgYmVpZ2U6IFwiRjVGNURDXCIsXG4gICAgYmlzcXVlOiBcIkZGRTRDNFwiLFxuICAgIGJsYWNrOiBcIjAwMDAwMFwiLFxuICAgIGJsYW5jaGVkYWxtb25kOiBcIkZGRUJDRFwiLFxuICAgIGJsdWU6IFwiMDAwMEZGXCIsXG4gICAgYmx1ZXZpb2xldDogXCI4QTJCRTJcIixcbiAgICBicm93bjogXCJBNTJBMkFcIixcbiAgICBidXJseXdvb2Q6IFwiREVCODg3XCIsXG4gICAgY2FkZXRibHVlOiBcIjVGOUVBMFwiLFxuICAgIGNoYXJ0cmV1c2U6IFwiN0ZGRjAwXCIsXG4gICAgY2hvY29sYXRlOiBcIkQyNjkxRVwiLFxuICAgIGNvcmFsOiBcIkZGN0Y1MFwiLFxuICAgIGNvcm5mbG93ZXJibHVlOiBcIjY0OTVFRFwiLFxuICAgIGNvcm5zaWxrOiBcIkZGRjhEQ1wiLFxuICAgIGNyaW1zb246IFwiREMxNDNDXCIsXG4gICAgY3lhbjogXCIwMEZGRkZcIixcbiAgICBkYXJrYmx1ZTogXCIwMDAwOEJcIixcbiAgICBkYXJrY3lhbjogXCIwMDhCOEJcIixcbiAgICBkYXJrZ29sZGVucm9kOiBcIkI4ODYwQlwiLFxuICAgIGRhcmtncmF5OiBcIkE5QTlBOVwiLFxuICAgIGRhcmtncmVlbjogXCIwMDY0MDBcIixcbiAgICBkYXJrZ3JleTogXCJBOUE5QTlcIixcbiAgICBkYXJra2hha2k6IFwiQkRCNzZCXCIsXG4gICAgZGFya21hZ2VudGE6IFwiOEIwMDhCXCIsXG4gICAgZGFya29saXZlZ3JlZW46IFwiNTU2QjJGXCIsXG4gICAgZGFya29yYW5nZTogXCJGRjhDMDBcIixcbiAgICBkYXJrb3JjaGlkOiBcIjk5MzJDQ1wiLFxuICAgIGRhcmtyZWQ6IFwiOEIwMDAwXCIsXG4gICAgZGFya3NhbG1vbjogXCJFOTk2N0FcIixcbiAgICBkYXJrc2VhZ3JlZW46IFwiOEZCQzhGXCIsXG4gICAgZGFya3NsYXRlYmx1ZTogXCI0ODNEOEJcIixcbiAgICBkYXJrc2xhdGVncmF5OiBcIjJGNEY0RlwiLFxuICAgIGRhcmtzbGF0ZWdyZXk6IFwiMkY0RjRGXCIsXG4gICAgZGFya3R1cnF1b2lzZTogXCIwMENFRDFcIixcbiAgICBkYXJrdmlvbGV0OiBcIjk0MDBEM1wiLFxuICAgIGRlZXBwaW5rOiBcIkZGMTQ5M1wiLFxuICAgIGRlZXBza3libHVlOiBcIjAwQkZGRlwiLFxuICAgIGRpbWdyYXk6IFwiNjk2OTY5XCIsXG4gICAgZGltZ3JleTogXCI2OTY5NjlcIixcbiAgICBkb2RnZXJibHVlOiBcIjFFOTBGRlwiLFxuICAgIGZpcmVicmljazogXCJCMjIyMjJcIixcbiAgICBmbG9yYWx3aGl0ZTogXCJGRkZBRjBcIixcbiAgICBmb3Jlc3RncmVlbjogXCIyMjhCMjJcIixcbiAgICBmdWNoc2lhOiBcIkZGMDBGRlwiLFxuICAgIGdhaW5zYm9ybzogXCJEQ0RDRENcIixcbiAgICBnaG9zdHdoaXRlOiBcIkY4RjhGRlwiLFxuICAgIGdvbGQ6IFwiRkZENzAwXCIsXG4gICAgZ29sZGVucm9kOiBcIkRBQTUyMFwiLFxuICAgIGdyYXk6IFwiODA4MDgwXCIsXG4gICAgZ3JlZW46IFwiMDA4MDAwXCIsXG4gICAgZ3JlZW55ZWxsb3c6IFwiQURGRjJGXCIsXG4gICAgZ3JleTogXCI4MDgwODBcIixcbiAgICBob25leWRldzogXCJGMEZGRjBcIixcbiAgICBob3RwaW5rOiBcIkZGNjlCNFwiLFxuICAgIGluZGlhbnJlZDogXCJDRDVDNUNcIixcbiAgICBpbmRpZ286IFwiNEIwMDgyXCIsXG4gICAgaXZvcnk6IFwiRkZGRkYwXCIsXG4gICAga2hha2k6IFwiRjBFNjhDXCIsXG4gICAgbGF2ZW5kZXI6IFwiRTZFNkZBXCIsXG4gICAgbGF2ZW5kZXJibHVzaDogXCJGRkYwRjVcIixcbiAgICBsYXduZ3JlZW46IFwiN0NGQzAwXCIsXG4gICAgbGVtb25jaGlmZm9uOiBcIkZGRkFDRFwiLFxuICAgIGxpZ2h0Ymx1ZTogXCJBREQ4RTZcIixcbiAgICBsaWdodGNvcmFsOiBcIkYwODA4MFwiLFxuICAgIGxpZ2h0Y3lhbjogXCJFMEZGRkZcIixcbiAgICBsaWdodGdvbGRlbnJvZHllbGxvdzogXCJGQUZBRDJcIixcbiAgICBsaWdodGdyYXk6IFwiRDNEM0QzXCIsXG4gICAgbGlnaHRncmVlbjogXCI5MEVFOTBcIixcbiAgICBsaWdodGdyZXk6IFwiRDNEM0QzXCIsXG4gICAgbGlnaHRwaW5rOiBcIkZGQjZDMVwiLFxuICAgIGxpZ2h0c2FsbW9uOiBcIkZGQTA3QVwiLFxuICAgIGxpZ2h0c2VhZ3JlZW46IFwiMjBCMkFBXCIsXG4gICAgbGlnaHRza3libHVlOiBcIjg3Q0VGQVwiLFxuICAgIGxpZ2h0c2xhdGVncmF5OiBcIjc3ODg5OVwiLFxuICAgIGxpZ2h0c2xhdGVncmV5OiBcIjc3ODg5OVwiLFxuICAgIGxpZ2h0c3RlZWxibHVlOiBcIkIwQzRERVwiLFxuICAgIGxpZ2h0eWVsbG93OiBcIkZGRkZFMFwiLFxuICAgIGxpbWU6IFwiMDBGRjAwXCIsXG4gICAgbGltZWdyZWVuOiBcIjMyQ0QzMlwiLFxuICAgIGxpbmVuOiBcIkZBRjBFNlwiLFxuICAgIG1hZ2VudGE6IFwiRkYwMEZGXCIsXG4gICAgbWFyb29uOiBcIjgwMDAwMFwiLFxuICAgIG1lZGl1bWFxdWFtYXJpbmU6IFwiNjZDREFBXCIsXG4gICAgbWVkaXVtYmx1ZTogXCIwMDAwQ0RcIixcbiAgICBtZWRpdW1vcmNoaWQ6IFwiQkE1NUQzXCIsXG4gICAgbWVkaXVtcHVycGxlOiBcIjkzNzBEQlwiLFxuICAgIG1lZGl1bXNlYWdyZWVuOiBcIjNDQjM3MVwiLFxuICAgIG1lZGl1bXNsYXRlYmx1ZTogXCI3QjY4RUVcIixcbiAgICBtZWRpdW1zcHJpbmdncmVlbjogXCIwMEZBOUFcIixcbiAgICBtZWRpdW10dXJxdW9pc2U6IFwiNDhEMUNDXCIsXG4gICAgbWVkaXVtdmlvbGV0cmVkOiBcIkM3MTU4NVwiLFxuICAgIG1pZG5pZ2h0Ymx1ZTogXCIxOTE5NzBcIixcbiAgICBtaW50Y3JlYW06IFwiRjVGRkZBXCIsXG4gICAgbWlzdHlyb3NlOiBcIkZGRTRFMVwiLFxuICAgIG1vY2Nhc2luOiBcIkZGRTRCNVwiLFxuICAgIG5hdmFqb3doaXRlOiBcIkZGREVBRFwiLFxuICAgIG5hdnk6IFwiMDAwMDgwXCIsXG4gICAgb2xkbGFjZTogXCJGREY1RTZcIixcbiAgICBvbGl2ZTogXCI4MDgwMDBcIixcbiAgICBvbGl2ZWRyYWI6IFwiNkI4RTIzXCIsXG4gICAgb3JhbmdlOiBcIkZGQTUwMFwiLFxuICAgIG9yYW5nZXJlZDogXCJGRjQ1MDBcIixcbiAgICBvcmNoaWQ6IFwiREE3MEQ2XCIsXG4gICAgcGFsZWdvbGRlbnJvZDogXCJFRUU4QUFcIixcbiAgICBwYWxlZ3JlZW46IFwiOThGQjk4XCIsXG4gICAgcGFsZXR1cnF1b2lzZTogXCJBRkVFRUVcIixcbiAgICBwYWxldmlvbGV0cmVkOiBcIkRCNzA5M1wiLFxuICAgIHBhcGF5YXdoaXA6IFwiRkZFRkQ1XCIsXG4gICAgcGVhY2hwdWZmOiBcIkZGREFCOVwiLFxuICAgIHBlcnU6IFwiQ0Q4NTNGXCIsXG4gICAgcGluazogXCJGRkMwQ0JcIixcbiAgICBwbHVtOiBcIkREQTBERFwiLFxuICAgIHBvd2RlcmJsdWU6IFwiQjBFMEU2XCIsXG4gICAgcHVycGxlOiBcIjgwMDA4MFwiLFxuICAgIHJlZDogXCJGRjAwMDBcIixcbiAgICByb3N5YnJvd246IFwiQkM4RjhGXCIsXG4gICAgcm95YWxibHVlOiBcIjQxNjlFMVwiLFxuICAgIHNhZGRsZWJyb3duOiBcIjhCNDUxM1wiLFxuICAgIHNhbG1vbjogXCJGQTgwNzJcIixcbiAgICBzYW5keWJyb3duOiBcIkY0QTQ2MFwiLFxuICAgIHNlYWdyZWVuOiBcIjJFOEI1N1wiLFxuICAgIHNlYXNoZWxsOiBcIkZGRjVFRVwiLFxuICAgIHNpZW5uYTogXCJBMDUyMkRcIixcbiAgICBzaWx2ZXI6IFwiQzBDMEMwXCIsXG4gICAgc2t5Ymx1ZTogXCI4N0NFRUJcIixcbiAgICBzbGF0ZWJsdWU6IFwiNkE1QUNEXCIsXG4gICAgc2xhdGVncmF5OiBcIjcwODA5MFwiLFxuICAgIHNsYXRlZ3JleTogXCI3MDgwOTBcIixcbiAgICBzbm93OiBcIkZGRkFGQVwiLFxuICAgIHNwcmluZ2dyZWVuOiBcIjAwRkY3RlwiLFxuICAgIHN0ZWVsYmx1ZTogXCI0NjgyQjRcIixcbiAgICB0YW46IFwiRDJCNDhDXCIsXG4gICAgdGVhbDogXCIwMDgwODBcIixcbiAgICB0aGlzdGxlOiBcIkQ4QkZEOFwiLFxuICAgIHRvbWF0bzogXCJGRjYzNDdcIixcbiAgICB0dXJxdW9pc2U6IFwiNDBFMEQwXCIsXG4gICAgdmlvbGV0OiBcIkVFODJFRVwiLFxuICAgIHdoZWF0OiBcIkY1REVCM1wiLFxuICAgIHdoaXRlOiBcIkZGRkZGRlwiLFxuICAgIHdoaXRlc21va2U6IFwiRjVGNUY1XCIsXG4gICAgeWVsbG93OiBcIkZGRkYwMFwiLFxuICAgIHllbGxvd2dyZWVuOiBcIjlBQ0QzMlwiXG4gIH1cbn1cblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gUmFpbmJvdztcbn0iXX0=